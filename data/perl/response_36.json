[{"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1442468798, "post_id": 32620213, "comment_id": 53096699, "body": "I suspect that you haven&#39;t had any solutions because your description is very hard to understand. I can&#39;t see what you mean by <i>\u201cthe first triple set of values\u201d</i> on a row, as each row contains only three values. I also don&#39;t get <i>\u201cIf there is ever a point where row one&#39;s values were equal to row two&#39;s\u201d</i>, as row one and row two of the file are fixed and don&#39;t vary depending which point is being processed. I think you should show an example of what you are talking about, and show the output you want for data that has multiple identical points, and for data that is wholly unique"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1442469189, "post_id": 32620213, "comment_id": 53096832, "body": "You&#39;re loading the <code>Math::Vector::Real</code> module but you don&#39;t use its capabilities. For instance, if you have two vectors <code>$v1</code> and <code>$v2</code> that are generated by <code>V(split)</code> as in your program, then the delta vector is just <code>$v1 - $v2</code>, and you can use <code>abs</code> to get the magnitude of the delta so you can write <code>my $math = abs($val1 - $val2)</code> instead of all that Pythagoras arithmetic. Also, the two vectors are identical if <code>$math == 0</code>"}, {"owner": {"reputation": 243, "user_id": 4999890, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c34942cc479898b04d21c6c917d64955?s=128&d=identicon&r=PG&f=1", "display_name": "MadisonCooper", "link": "https://stackoverflow.com/users/4999890/madisoncooper"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1442493872, "post_id": 32620213, "comment_id": 53110229, "body": "@Borodin , gotcha, thanks. Ive reposted/updated the question. I appreciate the feedback. Thanks again!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1442503294, "post_id": 32620213, "comment_id": 53116903, "body": "I&#39;m sorry but I&#39;m still not following. You talk about <i>&quot;the first triple set of values on row 1&quot;</i> but row 1 -- like all the rows -- has only one set of coordinates so I don&#39;t understand you using &quot;first&quot;. Really, an example would help enormously"}, {"owner": {"reputation": 243, "user_id": 4999890, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c34942cc479898b04d21c6c917d64955?s=128&d=identicon&r=PG&f=1", "display_name": "MadisonCooper", "link": "https://stackoverflow.com/users/4999890/madisoncooper"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1442503482, "post_id": 32620213, "comment_id": 53117019, "body": "@Borodin on the new question i posted? Theres a new post entirely, i was going to delete this one but i wanted you to see the comment first. There is an example on the new one. Sorry if I&#39;m being confusing."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1442504098, "post_id": 32620213, "comment_id": 53117419, "body": "Ah okay I misunderstood, and thought you meant you had updated <i>this</i> question. You should have posted <a href=\"http://stackoverflow.com/questions/32630561/data-processing-by-iterating-through-an-array-in-perl\">a link to your new question</a> to save people having to search your profile to find your most recent output"}, {"owner": {"reputation": 243, "user_id": 4999890, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c34942cc479898b04d21c6c917d64955?s=128&d=identicon&r=PG&f=1", "display_name": "MadisonCooper", "link": "https://stackoverflow.com/users/4999890/madisoncooper"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1442504468, "post_id": 32620213, "comment_id": 53117662, "body": "@Borodin you have a fair point. Ill keep that in mind for next time. Sorry!"}], "answers": [{"comments": [{"owner": {"reputation": 243, "user_id": 4999890, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c34942cc479898b04d21c6c917d64955?s=128&d=identicon&r=PG&f=1", "display_name": "MadisonCooper", "link": "https://stackoverflow.com/users/4999890/madisoncooper"}, "edited": false, "score": 1, "creation_date": 1442513712, "post_id": 32636167, "comment_id": 53123074, "body": "It looks like the end angles may be in radians? They should be higher. I may just have to recheck my data though. But I&#39;m pretty sure it shouldn&#39;t be that low.  I very well could be wrong."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1442509819, "creation_date": 1442509819, "answer_id": 32636167, "question_id": 32620213, "link": "https://stackoverflow.com/questions/32620213/specifically-iterating-through-a-file-in-perl/32636167#32636167", "title": "Specifically Iterating through a file in perl", "body": "<p>I think this is correct</p>\n\n<p>I've used the facilities of the <a href=\"http://metacpan.org/module/Math::Vector::Real\" rel=\"nofollow\"><code>Math::Vector::Real</code></a> module as I described in a comment</p>\n\n<ul>\n<li><p>I leave the vectors as objects and avoid accessing their their contents directly</p></li>\n<li><p>I calculate the distance between <code>$vec1</code> and <code>$vec2</code> as <code>abs($vec1 - $vec2</code></p></li>\n<li><p>I use the class's <em>stringify</em> ability to display it instead of extracting the individual values in my code</p></li>\n</ul>\n\n<p>I have also changed the intermediate data format. The distance is no longer kept because it's not necessary, and the array <code>@groups</code> now contains an array for each group of vector pairs that have a common first vector. Each group is of the form</p>\n\n<pre><code>[ $vec1, $vec2, $vec2, $vec2, ... ]\n</code></pre>\n\n<p>and I use the <code>first</code> function from <a href=\"http://metacpan.org/module/List::Util\" rel=\"nofollow\"><code>List::Util</code></a> to find the group that each new vector pair belongs in. If an existing group is found with a matching first value then the second vector is just pushed onto the end of the group; otherwise a new group is created that looks like <code>[ $vec1, $vec2 ]</code></p>\n\n<p>Once the <code>@groups</code> array is built, it is processed again to generate the output</p>\n\n<ul>\n<li><p>If there are only two values in the group then they are <code>$vec1</code> and <code>$vec2</code> of a unique point. <code>$vec1</code> is printed with <code>180</code></p></li>\n<li><p>If there are more than two elements then a line of output is generated for every pair of <code>$vec2</code> values, each containing the value <code>$vec1</code> together with the angle between the two <code>$vec2</code> vectors in the pair</p></li>\n</ul>\n\n<p><br/></p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Math::Vector::Real qw/ V /;\nuse List::Util qw / first /;\n\nuse constant DEG_PER_RAD =&gt; 45 / atan2(1, 1);\n\nmy ( $source, $out ) = qw/ OUT4 OUTABA12 /;\n\nopen my $in_fh,  '&lt;', $source or die qq{Unable to open \"$source\" for input: $!\\n};\n\nmy @data = map V(split), &lt;$in_fh&gt;;\n\nmy @groups;\n\nfor my $vec1 ( @data ) {\n\n    for my $vec2 ( @data ) {\n\n        next if abs($vec1 - $vec2) &gt; 2.2 or $vec1 == $vec2;\n\n        my $group = first { $_-&gt;[0] == $vec1 } @groups;\n\n        if ( $group ) {\n            push @$group, $vec2;\n        }\n        else {\n            push @groups, [ $vec1, $vec2 ];\n        }\n    }\n}\n\nopen my $out_fh, '&gt;', $out or die qq{Unable to open \"$out\" for output: $!\\n};\nselect $out_fh;\n\nfor my $group ( @groups ) {\n\n    my ($vec1, @vec2) = @$group;\n\n    if ( @vec2 == 1 ) {\n        print \"$vec1 180\\n\";\n        next;\n    }\n\n    for my $i ( 0 .. $#vec2-1 ) {\n        for my $j ( $i+1 .. $#vec2 ) {\n            my ($vec2a, $vec2b) = @vec2[$i, $j];\n            my $angle = atan2( $vec2a, $vec2b ) * DEG_PER_RAD;\n            print \"$vec1 $angle\\n\";\n        }\n    }\n\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>{18.474525, 20.161419, 20.33903} 4.96831567625921\n{18.474525, 20.161419, 20.33903} 1.65052300046634\n{18.474525, 20.161419, 20.33903} 4.80888617553369\n{21.999333, 20.220667, 19.786734} 4.22499387836286\n{18.333228, 21.649157, 21.125111} 180\n{20.371077, 19.675844, 19.77649} 5.09280172684743\n{17.04323, 19.3106, 20.148842} 180\n{22.941106, 19.105412, 19.069893} 180\n</code></pre>\n"}], "owner": {"reputation": 243, "user_id": 4999890, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c34942cc479898b04d21c6c917d64955?s=128&d=identicon&r=PG&f=1", "display_name": "MadisonCooper", "link": "https://stackoverflow.com/users/4999890/madisoncooper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442509819, "creation_date": 1442445055, "question_id": 32620213, "link": "https://stackoverflow.com/questions/32620213/specifically-iterating-through-a-file-in-perl", "title": "Specifically Iterating through a file in perl", "body": "<p>So, I have this script :</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse diagnostics;\nuse Math::Vector::Real;\nuse constant DEG_PER_RAD =&gt; 45 / atan2(1, 1);\n\nmy ( $source, $out ) = qw/ OUT4 OUTABA12 /;\n\nopen my $in_fh,  '&lt;', $source or die qq{Unable to open \"$source\" for input: $!\\n};\nopen my $out_fh, '&gt;', $out    or die qq{Unable to open \"$out\" for output: $!\\n};\n\n\nmy @data;\npush @data, V(split) while &lt;$in_fh&gt;;\nmy @aoa;\n\nfor my $i ( 0 .. $#data ) {\n    for my $j ( 0 .. $#data ) {\n        my $val1 = $data[$i];\n        my $val2 = $data[$j];\n\n        if ($val1 != $val2) {\n\n            my $math = sqrt(($val1-&gt;[0] - $val2-&gt;[0])**2 +\n                ($val1-&gt;[1] - $val2-&gt;[1])**2 +\n                ($val1-&gt;[2] - $val2-&gt;[2])**2);\n\n                if ($math &lt; 2.2) {\n                print \"@$val1 @$val2 $math\\n\";\n                    push @aoa, [@$val1, @$val2, $math];\n                    }\n        }\n    }\n}\n\nfor my $k ( 0 .. $#aoa-1 ) {\n\n        my $aoadata1 = $aoa[$k];\n        my $aoadata2 = $aoa[$k+1];\n\n        my $vect1 = [ @{ $aoa[$k] }[0..2] ];\n        my $vect2 = [ @{ $aoa[$k+1] }[0..2] ];\n        my $vect3 = [ @{ $aoa[$k] }[3..5] ];\n        my $vect4 = [ @{ $aoa[$k+1] }[3..5] ];\n        my $math1 = [ @{ $aoa[$k] }[6] ];\n        my $math2 = [ @{ $aoa[$k+1] }[6] ];\n\n        my @matha = @$math1;\n        my @mathb = @$math2;\n        my @vecta = @$vect1;\n        my @vectb = @$vect2;\n        my @vectc = @$vect3;\n        my @vectd = @$vect4;\n\n            if ( @vecta != @vectb ) {\n\n                print \"1\\n\";\n\n                }\n}\n</code></pre>\n\n<p>Which runs on a test file like so: </p>\n\n<pre><code> 18.474525 20.161419 20.33903\n 21.999333 20.220667 19.786734\n 18.333228 21.649157 21.125111\n 20.371077 19.675844 19.77649\n 17.04323 19.3106 20.148842\n 22.941106 19.105412 19.069893\n</code></pre>\n\n<p>and it calculates the distance between each point and every other point, and if it's below a threshold push it to an array for later. (For testing purposes, I also have it printing it. )</p>\n\n<p>What I've been stuck on is the bottom half - I'm trying to eventually get to the point where the bottom half of the script script will iterate between rows like so:</p>\n\n<p>If the first triple set of values on row 1 is not identical to the first set of triple values on row two, print 180, but only if this is the only instance of this line. If there is ever a point where row one's values were equal to row two's, do not print 180 whatsoever. </p>\n\n<p>I cannot, for the life of me, get it to work. Any help is appreciated. </p>\n"}, {"tags": ["multithreading", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1442442557, "post_id": 32619676, "comment_id": 53090053, "body": "1) Oh god, why are you using threads in Perl? 2) It&#39;s throwing an exception."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 3, "creation_date": 1442443094, "post_id": 32619676, "comment_id": 53090218, "body": "and you catch exceptions using <a href=\"http://p3rl.org/eval\" rel=\"nofollow noreferrer\">p3rl.org/eval</a> (in its eval BLOCK form)"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1442463264, "post_id": 32619676, "comment_id": 53095019, "body": "are your threads all trying to share the same WWW::Mechanize object?"}, {"owner": {"reputation": 5913, "user_id": 2893712, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ba3bea502f3cde271b0d8d9a0b957afc?s=128&d=identicon&r=PG", "display_name": "Bijan", "link": "https://stackoverflow.com/users/2893712/bijan"}, "edited": false, "score": 0, "creation_date": 1442463602, "post_id": 32619676, "comment_id": 53095108, "body": "Each WWW::Mechanize::Firefox object is created in each thread. It&#39;s just that sometimes the element I am looking for is not done loading at that point yet (I add a sleep between form fill)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1442480478, "post_id": 32619676, "comment_id": 53102484, "body": "Nowt wrong with perl threads if used appropriately. Of course, they often aren&#39;t."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1442495433, "post_id": 32619676, "comment_id": 53111238, "body": "There&#39;s a lot wrong with perl threads, that&#39;s why first implementation (Thread.pm) was removed and the second (ithreads) are offcially discouraged."}], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 2, "last_activity_date": 1442463547, "creation_date": 1442463547, "answer_id": 32622518, "question_id": 32619676, "link": "https://stackoverflow.com/questions/32619676/perl-see-if-function-returns-successfully/32622518#32622518", "title": "Perl: see if function returns successfully", "body": "<p>You could first check that your page has forms by running:</p>\n\n<pre><code>next unless scalar @{ $mech-&gt;forms };\n</code></pre>\n"}], "owner": {"reputation": 5913, "user_id": 2893712, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ba3bea502f3cde271b0d8d9a0b957afc?s=128&d=identicon&r=PG", "display_name": "Bijan", "link": "https://stackoverflow.com/users/2893712/bijan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 32622518, "answer_count": 1, "score": -1, "last_activity_date": 1442463547, "creation_date": 1442441671, "question_id": 32619676, "link": "https://stackoverflow.com/questions/32619676/perl-see-if-function-returns-successfully", "title": "Perl: see if function returns successfully", "body": "<p>I have a perl script that runs at 20 threads. I have a function that will occasionally fail and return</p>\n\n<pre><code>Thread 15 terminated abnormally: No elements found for form number 1 at FILENAME.pl line 40 thread 15.\n</code></pre>\n\n<p>The reason for this is because I run <code>$mech-&gt;form_number(1)</code> and there is no form_number(1) most likely because the page did not finish loading.</p>\n\n<p>How would I check to see if $mech->form_number(1) returned successfully?</p>\n\n<p>I tried doing <code>next if(!$mech-&gt;form_number(1));</code> but this did not work.</p>\n"}, {"tags": ["javascript", "perl", "mechanize", "www-mechanize-firefox"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1442434665, "post_id": 32617530, "comment_id": 53086481, "body": "I can&#39;t test right now, but you can use simple CSS selectors with the <a href=\"https://metacpan.org/pod/WWW::Mechanize::Firefox#mech-field-selector-value-pre_events-post_events\" rel=\"nofollow noreferrer\"><code>field</code></a> method, e.g. <code>$mech-&gt;field(&#39;#ember745&#39;, $value);</code> I don&#39;t think you can do this with <code>set_fields</code>, which is called by <code>submit_form</code>."}], "answers": [{"tags": [], "owner": {"reputation": 5913, "user_id": 2893712, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ba3bea502f3cde271b0d8d9a0b957afc?s=128&d=identicon&r=PG", "display_name": "Bijan", "link": "https://stackoverflow.com/users/2893712/bijan"}, "is_accepted": true, "score": 3, "last_activity_date": 1442434766, "creation_date": 1442434766, "answer_id": 32617938, "question_id": 32617530, "link": "https://stackoverflow.com/questions/32617530/perl-fill-out-form-based-on-element-id/32617938#32617938", "title": "Perl Fill Out Form Based on Element ID", "body": "<p>Figured it out, had to use a selector</p>\n\n<pre><code>my $field = $mech-&gt;selector('input.ssTextboxField', single =&gt; 1);\n$mech-&gt;field( $field =&gt; $value );\n</code></pre>\n"}], "owner": {"reputation": 5913, "user_id": 2893712, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ba3bea502f3cde271b0d8d9a0b957afc?s=128&d=identicon&r=PG", "display_name": "Bijan", "link": "https://stackoverflow.com/users/2893712/bijan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "accepted_answer_id": 32617938, "answer_count": 1, "score": 2, "last_activity_date": 1442434766, "creation_date": 1442433285, "question_id": 32617530, "link": "https://stackoverflow.com/questions/32617530/perl-fill-out-form-based-on-element-id", "title": "Perl Fill Out Form Based on Element ID", "body": "<p>I am trying to use <code>WWW::Mechanize</code> to fill out a form. Unfortunately my page requires JS so I am now using <code>WWW::Mechanize::Firefox</code>. </p>\n\n<p>Here is the element I am trying to fill out.</p>\n\n<pre><code>&lt;input id=\"ember745\" class=\"ssTextboxField\"&gt;&lt;/input&gt;\n</code></pre>\n\n<p>The <a href=\"http://search.cpan.org/~corion/WWW-Mechanize-Firefox-0.78/lib/WWW/Mechanize/Firefox.pm#$mech-&gt;set_fields(_$name_=&gt;_$value,_..._)\" rel=\"nofollow\">set_field()</a> function takes an element name. How would I give it an element ID (ember 745) and have it fill the form in?</p>\n\n<p>Here is my code so far</p>\n\n<pre><code>use WWW::Mechanize::Firefox;\nmy $mech = WWW::Mechanize::Firefox-&gt;new(autoclose =&gt; 0);\n$mech-&gt;get(URL);\n\n$mech-&gt;form_number(1);\n$mech-&gt;submit_form(\nfields =&gt; {\n    ember745 =&gt; $value\n});\n</code></pre>\n"}, {"tags": ["arrays", "windows", "perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 4, "creation_date": 1442427485, "post_id": 32615659, "comment_id": 53082529, "body": "What kind of line endings does the input file have?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 4, "creation_date": 1442434760, "post_id": 32615659, "comment_id": 53086540, "body": "<code>use Data::Dumper; $Data::Dumper::Useqq=1; print Dumper $array[0]</code> to see what you are getting from the file.  Also check if $/ has been changed"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1442439264, "post_id": 32615659, "comment_id": 53088810, "body": "What is the origin of <code>Elements.txt</code>? Has it come from an Apple system perhaps? Or alternatively, does your code alter the built-in variable <code>$&#47;</code>? Does it make any difference if you temporarily add <code>local $&#47; = &quot;\\n&quot;;</code> before the <code>while</code> loop? And please show the result of ysth&#39;s diagnostic code"}, {"owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1442443800, "post_id": 32615659, "comment_id": 53090419, "body": "@mob The line endings of the file is <code>\\n</code> generated via Perl Windows."}, {"owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1442443863, "post_id": 32615659, "comment_id": 53090442, "body": "@ysth The result is:      <code>Element 1     Element 2     Element 3     Element 4     Element 5     Element 6     Element 7     Element 8     $VAR1 = &quot;Element 1\\nElement 2\\nElement 3\\nElement 4\\nElement 5\\nElement 6\\nElement 7\\nElement 8&quot;;</code>"}, {"owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1442444017, "post_id": 32615659, "comment_id": 53090482, "body": "@Borodin The origin of the file is Windows system. It&#39;s generated via perl code using <code>\\n</code> as the new line delimiter. When I&#39;ve added <code>local $&#47; = &quot;\\n&quot;;</code> before <code>while</code> loop, the result was as expected correctly. ysth&#39;s diagnostic code showed that the newline delimiter used is <code>\\n</code>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1442446537, "post_id": 32615659, "comment_id": 53091166, "body": "it may actually be \\r\\n and reading it is converting it.  but since setting $/ fixes it, clearly somewhere you are leaving $/ set badly.  (\\n is its default)"}, {"owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1442448046, "post_id": 32615659, "comment_id": 53091493, "body": "@ysth Could using <code>undef $&#47;;</code> with other previous <code>open()</code> forces us to redefine <code>$&#47;</code> again?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1442448458, "post_id": 32615659, "comment_id": 53091584, "body": "@omareg: Absolutely. Apart from affecting how files are read, it&#39;s just an ordinary variable. Nothing will change its value apart from an explicit assignment that you have written. If you want to alter it temporarily, for instance to read an entire file at once, you should enclose the file reading in a block (between braces <code>{ ... }</code>) that starts with <code>local $&#47;</code>. That will automatically restore the original value outside the block"}, {"owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1442449709, "post_id": 32615659, "comment_id": 53091854, "body": "@Borodin The code is now running correctly without using <code>local $&#47; = &quot;\\n&quot;;</code> when I used <code>{... local $&#47;; undef $&#47;; ... }</code> for all <code>open ()</code> that has the <code>undef $&#47;;</code>. The problem was definitely caused by the not localized <code>undef $&#47;</code>. Thanks a lot for all your help!! @Borodin @ysth"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1442451069, "post_id": 32615659, "comment_id": 53092139, "body": "@omareg94: I&#39;m pleased you have it working. There&#39;s no need to <code>undef $&#47;</code> -- just <code>local $&#47;</code> will set it to undefined"}, {"owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1442520365, "post_id": 32615659, "comment_id": 53126620, "body": "@Borodin: Thanks a lot, it really worked fine. Could you please write an answer to make the question marked as answered?"}], "owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1442441099, "creation_date": 1442426794, "last_edit_date": 1442441099, "question_id": 32615659, "link": "https://stackoverflow.com/questions/32615659/why-are-all-the-lines-of-my-input-file-being-read-into-the-first-element-of-my-a", "title": "Why are all the lines of my input file being read into the first element of my array instead of separate elements?", "body": "<p>I'm trying to store each line of a text file as an element in an array. My text file looks like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Element 1\nElement 2\nElement 3\nElement 4\nElement 5\nElement 6\nElement 7\nElement 8\n</code></pre>\n\n<p>I tried this code:</p>\n\n<pre><code>$FilePath = \"File/Path/Elements.txt\";\nopen my $handle, '&lt;', $FilePath;\nchomp(my @array = &lt;$handle&gt;);\nclose $handle;\nprint \"$array[0]\\n\\n$array[2]\";\n</code></pre>\n\n<p>but I got this output:</p>\n\n<pre>\nElement 1\nElement 2\nElement 3\nElement 4\nElement 5\nElement 6\nElement 7\nElement 8\n\n\n</pre>\n\n<p>even though I expect this output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Element 1\n\nElement 3\n</code></pre>\n\n<p>All the lines are stored in the first element <code>$array[0]</code> and nothing is stored in the other elements including element <code>$array[2]</code>.</p>\n\n<p>I also tried the following, but got the same output:</p>\n\n<pre><code>$FilePath = \"File/Path/Elements.txt\";\nmy @array;\nopen(my $handle, \"&lt;\", $FilePath)\nwhile(&lt;$handle&gt;) { \n    chomp; \n    push @array, $_;\n} \nclose $handle;\nprint \"$array[0]\\n\\n$array[2]\";\n</code></pre>\n\n<p>How can I get my expected output? I'm using Perl on Windows.</p>\n"}, {"tags": ["perl", "command"], "comments": [{"owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 1, "creation_date": 1442425332, "post_id": 32615037, "comment_id": 53081215, "body": "First, using <code>system</code> or backtics will fork a child process - there&#39;s no way around that. You could do something like <code>$cmd = join(&#39; &#39;, map { s&#47;&#39;&#47;\\\\&#39;&#47;g; &quot;&#39;$_&#39;&quot; } @cmd);</code> but <code>open</code> would probably be safer.."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1442425566, "post_id": 32615037, "comment_id": 53081366, "body": "Re &quot;I don&#39;t want to use forking&quot;, It&#39;s impossible not to fork. That&#39;s how all processes are created in unix, including when using <code>system</code>."}, {"owner": {"reputation": 244, "user_id": 1413728, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/0b6c088d28447c8d83373aa9780038b1?s=128&d=identicon&r=PG", "display_name": "baa2w", "link": "https://stackoverflow.com/users/1413728/baa2w"}, "edited": false, "score": 0, "creation_date": 1442426640, "post_id": 32615037, "comment_id": 53082061, "body": "By forking, I meant implicit forking the Perl process itself that opening a pipe does, as I understood."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 5, "creation_date": 1442427624, "post_id": 32615037, "comment_id": 53082595, "body": "That&#39;s the same as the implicit forking done by <code>system</code> and backticks."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1442439565, "post_id": 32615037, "comment_id": 53088936, "body": "You should explain why you think you don&#39;t want to fork a subprocess, and why you don&#39;t want to use a Perl module"}, {"owner": {"reputation": 244, "user_id": 1413728, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/0b6c088d28447c8d83373aa9780038b1?s=128&d=identicon&r=PG", "display_name": "baa2w", "link": "https://stackoverflow.com/users/1413728/baa2w"}, "edited": false, "score": 0, "creation_date": 1442439848, "post_id": 32615037, "comment_id": 53089053, "body": "I want to be able to use the script under Windows as well, that was the reason. I don&#39;t care how the command is actually executed, but I noticed opening pipe via <code>open(FROM_KID, &#39;-|&#39;)</code> does not work under Windows."}], "answers": [{"comments": [{"owner": {"reputation": 244, "user_id": 1413728, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/0b6c088d28447c8d83373aa9780038b1?s=128&d=identicon&r=PG", "display_name": "baa2w", "link": "https://stackoverflow.com/users/1413728/baa2w"}, "edited": false, "score": 0, "creation_date": 1442440643, "post_id": 32616021, "comment_id": 53089417, "body": "The <code>String::ShellQuote</code> is third-party package, which I would like to avoid. We have an existing script that uses only core packages and supports Perl back to version 5.8. I just need to make it work under Windows with possibly not affecting the minimum requirements or adding dependency on packages not in core."}, {"owner": {"reputation": 263, "user_id": 4544319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5d424615459eed99418ce56f93de90?s=128&d=identicon&r=PG", "display_name": "The Sidhekin", "link": "https://stackoverflow.com/users/4544319/the-sidhekin"}, "reply_to_user": {"reputation": 244, "user_id": 1413728, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/0b6c088d28447c8d83373aa9780038b1?s=128&d=identicon&r=PG", "display_name": "baa2w", "link": "https://stackoverflow.com/users/1413728/baa2w"}, "edited": false, "score": 2, "creation_date": 1442442204, "post_id": 32616021, "comment_id": 53089962, "body": "String::ShellQuote is pure Perl \u2013 you could copy the code from it.  But it will only work with Bourne shell, not with Windows&#39; command.exe/cmd.exe.  On Windows, you&#39;d need Win32::ShellQuote \u2013 or a recent enough version of perl that pipe open works. ;-)"}, {"owner": {"reputation": 244, "user_id": 1413728, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/0b6c088d28447c8d83373aa9780038b1?s=128&d=identicon&r=PG", "display_name": "baa2w", "link": "https://stackoverflow.com/users/1413728/baa2w"}, "edited": false, "score": 0, "creation_date": 1442513498, "post_id": 32616021, "comment_id": 53122942, "body": "The <code>Win32::ShellQuote</code> seems to be a place to borrow the code from. Thanks!"}], "tags": [], "owner": {"reputation": 263, "user_id": 4544319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5d424615459eed99418ce56f93de90?s=128&d=identicon&r=PG", "display_name": "The Sidhekin", "link": "https://stackoverflow.com/users/4544319/the-sidhekin"}, "is_accepted": false, "score": 3, "last_activity_date": 1442428710, "last_edit_date": 1442428710, "creation_date": 1442428010, "answer_id": 32616021, "question_id": 32615037, "link": "https://stackoverflow.com/questions/32615037/capturing-output-from-a-command-specified-in-perl-array/32616021#32616021", "title": "Capturing output from a command specified in Perl array", "body": "<p>You may be looking for <a href=\"http://search.cpan.org/perldoc?String%3A%3AShellQuote\" rel=\"nofollow\">String::ShellQuote</a>.  Note that only Bourne shell quoting is supported.</p>\n\n<p>But backticks also perform an implicit fork, and if they in any way differ from the implicit fork of pipe open, I for one never noticed. :-\\</p>\n"}], "owner": {"reputation": 244, "user_id": 1413728, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/0b6c088d28447c8d83373aa9780038b1?s=128&d=identicon&r=PG", "display_name": "baa2w", "link": "https://stackoverflow.com/users/1413728/baa2w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442428710, "creation_date": 1442424504, "question_id": 32615037, "link": "https://stackoverflow.com/questions/32615037/capturing-output-from-a-command-specified-in-perl-array", "title": "Capturing output from a command specified in Perl array", "body": "<p>I thought this must be simple, but I haven't found a viable solution. </p>\n\n<p>The problem is as simple as this: I want to execute a system command and capture the output in Perl variable. The command is specified in Perl array (containing command and parameters, e.g. <code>@cmd = ('mycmd', '-opt1', 'arg1', 'val1')</code>). </p>\n\n<p>I don't want to use forking, i.e. <code>open(FROM_KID, '-|')</code> is not an option. I know that if I had the command in a string I can achieve this with backticks. So perhaps this problem reduces to converting <code>@cmd</code> array into a string. In my case, the command arguments can contain spaces. </p>\n\n<p>Is there a simple way to convert <code>@cmd</code> array into string that can be used with backticks, but such that all arguments are properly quoted? Also ideally without using any external libraries.</p>\n\n<p>Thanks!!</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 27022, "user_id": 182693, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7e4422dd860fce9b9f3c024c8655c7d2?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/182693/sean"}, "edited": false, "score": 4, "creation_date": 1442422175, "post_id": 32614196, "comment_id": 53079457, "body": "<code>perl -e &#39;my $response = &quot;hello&quot;; my $find = q(+); my $replace = &quot;_plus&quot;; $response =~ s&#47;\\Q$find\\E&#47;$replace&#47;g; print $response&#39;</code> prints <code>hello</code> with no error or warnings even if <code>strict</code> and <code>warnings</code> are turned on.  I think there might be some wider context you&#39;re not mentioning.  (For example, what does <code>$stripChars</code> have to do with anything?)"}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 2, "creation_date": 1442422235, "post_id": 32614196, "comment_id": 53079495, "body": "Where is <code>$stripChars</code> defined?"}, {"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1442424362, "post_id": 32614196, "comment_id": 53080704, "body": "$stripChars line was meant to be: print Data::Dumper::Dumper($response);"}, {"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1442424420, "post_id": 32614196, "comment_id": 53080731, "body": "There&#39;s no wider context. The service returns a string and If that string contains a character such as +, I want to replace it with _plus. Is that not clear?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1442424587, "post_id": 32614196, "comment_id": 53080817, "body": "Re &quot;There&#39;s no wider context&quot;, Yes, there is. 1) The code you posted doesn&#39;t even enable warnings, so you wouldn&#39;t get that message even if you made the error it mentions, and 2) the code you posted does not contain the error that causes that warning."}, {"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1442425187, "post_id": 32614196, "comment_id": 53081126, "body": "You&#39;re getting bogged down by specifics. I posted all the code necessary for the question to be answered so I can learn how to do a regex find/replace properly. Warnings and strict are enabled for more info."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1442426382, "post_id": 32614196, "comment_id": 53081871, "body": "Re. &quot;I posted all the code necessary for the question to be answered&quot; No, you didn&#39;t. As Sean and ikegami already explained, running the code you posted generates no warnings. Please create a <a href=\"http://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a> that we can run on our own machines to reproduce your issue."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1442431090, "last_edit_date": 1442431090, "creation_date": 1442430785, "answer_id": 32616838, "question_id": 32614196, "link": "https://stackoverflow.com/questions/32614196/regex-to-replace-with-plus-in-perl/32616838#32616838", "title": "Regex to replace + with _plus in Perl", "body": "<p>The code you posted does not contain the error that causes that warning.</p>\n\n<p>The warning is issued when when an expression consisting of a lexical variable is used in void context.</p>\n\n<pre><code>$ perl -we'my $x; $x;'\nUseless use of private variable in void context at -e line 1.\n</code></pre>\n\n<p>The following is what the <a href=\"http://perldoc.perl.org/perldiag.html\" rel=\"nofollow\">documentation</a> has to say about this warning:</p>\n\n<blockquote>\n  <p><strong>Useless use of %s in void context</strong></p>\n  \n  <p>(W void) You did something without a side effect in a context that does nothing with the return value, such as a statement that doesn't return a value from a block, or the left side of a scalar comma operator. Very often this points not to stupidity on your part, but a failure of Perl to parse your program the way you thought it would. For example, you'd get this if you mixed up your C precedence with Python precedence and said</p>\n\n<pre><code>$one, $two = 1, 2;\n</code></pre>\n  \n  <p>when you meant to say</p>\n\n<pre><code>($one, $two) = (1, 2);\n</code></pre>\n  \n  <p>Another common error is to use ordinary parentheses to construct a list reference when you should be using square or curly brackets, for example, if you say</p>\n\n<pre><code>$array = (1,2);\n</code></pre>\n  \n  <p>when you should have said</p>\n\n<pre><code>$array = [1,2];\n</code></pre>\n  \n  <p>The square brackets explicitly turn a list value into a scalar value, while parentheses do not. So when a parenthesized list is evaluated in a scalar context, the comma is treated like C's comma operator, which throws away the left argument, which is not what you want. See perlref for more on this.\n  This warning will not be issued for numerical constants equal to 0 or 1 since they are often used in statements like</p>\n\n<pre><code>1 while sub_with_side_effects();\n</code></pre>\n  \n  <p>String constants that would normally evaluate to 0 or 1 are warned about.</p>\n</blockquote>\n"}], "owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "closed_date": 1458657244, "answer_count": 1, "score": -4, "last_activity_date": 1442431090, "creation_date": 1442421632, "last_edit_date": 1442424545, "question_id": 32614196, "link": "https://stackoverflow.com/questions/32614196/regex-to-replace-with-plus-in-perl", "closed_reason": "Duplicate", "title": "Regex to replace + with _plus in Perl", "body": "<p>I need to replace the + character from a service response to a _plus. So far I've got the following which works when the response contains a '+', but doesn't return anything when its anything else, like 'hello':</p>\n\n<pre><code>my $response = 'hello';   \n\nmy $find = '+';\nmy $replace = '_plus';\n\n$response =~ s/\\Q$find\\E/$replace/g;\n\nprint Data::Dumper::Dumper($response);\n</code></pre>\n\n<p>I get the error 'Useless use of private variable in void context' when the response is something else.</p>\n\n<p>I just want to return it normally if it doesn't contain any + character.</p>\n\n<p>Appreciate your help.</p>\n"}, {"tags": ["regex", "perl", "perl-module", "taint"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1442421372, "post_id": 32613971, "comment_id": 53078993, "body": "It should never look like <code>$string =~ &#47;\\A(.*)\\z&#47;s</code> or <code>myModule::myUntaint($string);</code>. It should validate the value."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1442421389, "post_id": 32613971, "comment_id": 53079004, "body": "Have you tried this? I assume that because <code>CGI::Untaint</code> or <code>Untaint</code> exists, that it works. However for obvious reasons - you shouldn&#39;t just blanket untaint, because the whole point is to ensure any potentially dangerous input isn&#39;t any more."}, {"owner": {"reputation": 3, "user_id": 5343218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b76862cea9155aa3659d91faaca1f6d?s=128&d=identicon&r=PG&f=1", "display_name": "SpenserAD", "link": "https://stackoverflow.com/users/5343218/spenserad"}, "edited": false, "score": 0, "creation_date": 1442509786, "post_id": 32613971, "comment_id": 53120863, "body": "Thanks for the input. I used <code>$string =~ &#47;\\A(.*)\\z&#47;s</code> as a quick example of untainting. It&#39;s obviously typically a horrendous practice to blanket match-anything when untainting. The <code>myUntaint()</code> subroutine in the myModule .pm would contain the proper regex to validate the value."}, {"owner": {"reputation": 3, "user_id": 5343218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b76862cea9155aa3659d91faaca1f6d?s=128&d=identicon&r=PG&f=1", "display_name": "SpenserAD", "link": "https://stackoverflow.com/users/5343218/spenserad"}, "edited": false, "score": 0, "creation_date": 1442510106, "post_id": 32613971, "comment_id": 53121040, "body": "I have tried this before and it appeared to work. Though I&#39;ve also been able to somewhat &#39;trick&#39; by taint mode before, so I wasn&#39;t 100% sure it was working properly."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5343218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b76862cea9155aa3659d91faaca1f6d?s=128&d=identicon&r=PG&f=1", "display_name": "SpenserAD", "link": "https://stackoverflow.com/users/5343218/spenserad"}, "edited": false, "score": 0, "creation_date": 1442509636, "post_id": 32617109, "comment_id": 53120787, "body": "Thanks for the input. You&#39;re correct, one should rarely (never) do a blanket match-anything expression. That was written just as a quick example."}], "tags": [], "owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "is_accepted": true, "score": 0, "last_activity_date": 1442431807, "creation_date": 1442431807, "answer_id": 32617109, "question_id": 32613971, "link": "https://stackoverflow.com/questions/32613971/perl-untaint-variable-by-passing-through-perl-module-subroutine/32617109#32617109", "title": "Perl Untaint Variable By Passing Through Perl Module Subroutine", "body": "<p>Yes, you can have a subroutine in a module that takes a tainted parameter and returns an untainted expression derived from it.</p>\n\n<p>But you shouldn't be using a generic match-anything expression like <code>/\\A(.*)\\z/s</code> for untainting.  That defeats the purpose of tainting, which is to ensure that the value looks like what you were expecting before you use it.  (But that has nothing to do with where the code that does the untainting lives.)</p>\n"}], "owner": {"reputation": 3, "user_id": 5343218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b76862cea9155aa3659d91faaca1f6d?s=128&d=identicon&r=PG&f=1", "display_name": "SpenserAD", "link": "https://stackoverflow.com/users/5343218/spenserad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "accepted_answer_id": 32617109, "answer_count": 1, "score": 0, "last_activity_date": 1442510233, "creation_date": 1442420796, "last_edit_date": 1442510233, "question_id": 32613971, "link": "https://stackoverflow.com/questions/32613971/perl-untaint-variable-by-passing-through-perl-module-subroutine", "title": "Perl Untaint Variable By Passing Through Perl Module Subroutine", "body": "<p>When untainting variables in Perl does all the untainting have to be done locally to the Perl (.pl) file or can it be passed through a Perl Module (.pm) to untaint?</p>\n\n<p>For example, untainting may look something like this:</p>\n\n<pre><code>$string =~ /\\A(.*)\\z/s\n</code></pre>\n\n<p>(obviously it is a bad practice to blanket match-anything an input, this is just showing an example)</p>\n\n<p>I'm wondering is it possible to pass it through a .pm since I want to execute against the same regex expression in multiple .pl files.</p>\n\n<pre><code>use myModule;\n\n$string = myModule::myUntaint($string);\n</code></pre>\n\n<p>Where \"myUntaint\" is a subroutine within the .pm \"myModule\" that contains my regex.</p>\n"}, {"tags": ["regex", "perl", "accessor", "moose"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1442418256, "post_id": 32613115, "comment_id": 53076881, "body": "I realize this is a contrived example, but generally you shouldn&#39;t be using a regex for integers anyway. Can you explain what you&#39;re actually using the regex for?"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1442418327, "post_id": 32613115, "comment_id": 53076935, "body": "I have objects that store CVS file information and I&#39;m using regex&#39;s to compare file data.  I came up with a generic problem to express the problem as simply as possible. (The attribute could really be any arbitrary string, not necessarily an integer)."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1442418510, "post_id": 32613115, "comment_id": 53077059, "body": "For example I may want to see if a string contains a file name so I would use something like this: <code>if ($string =~ m&#47;$file-&gt;name()&#47;) { }</code>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1442419810, "post_id": 32613115, "comment_id": 53077952, "body": "See <a href=\"http://perldoc.perl.org/perlfaq4.html#How-do-I-expand-function-calls-in-a-string?\" rel=\"nofollow noreferrer\">How do I expand function calls in a string?</a> in perlfaq4 (the contents of <code>m&#47;&#47;</code> are interpolated similar to <code>qq</code>). Personally, I find using an intermediate variable to be more readable."}], "answers": [{"comments": [{"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1442419803, "post_id": 32613647, "comment_id": 53077949, "body": "I know matching an integer is a stupid example, but that&#39;s not the point.  The point is to be able to go through the accessor for the attribute in the regex which would mean using <code>$person-&gt;age()</code> instead of <code>$person-&gt;{age}</code> and getting it to be recognized correctly as a regex."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1442419827, "post_id": 32613647, "comment_id": 53077965, "body": "That was answered, but you asked what was proper. And that&#39;s not proper."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1442419919, "post_id": 32613647, "comment_id": 53078021, "body": "Thats so syntactically ugly... lol, is there really no better way?  Also for the sake of example I don&#39;t care if 23 =~ /2/ comes out to a match.  I just want the simplest possible syntax to make the regex work at all."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1442419998, "post_id": 32613647, "comment_id": 53078080, "body": "@tjwrona1992 The simplest possible syntax is to use a temporary variable."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1442420080, "post_id": 32613647, "comment_id": 53078151, "body": "@ThisSuitIsBlackNot, what about a situation where I want a regex to match multiple attributes at once and would need to define many temporary variables.  That just seems bulky and unneccessary."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1442420203, "post_id": 32613647, "comment_id": 53078217, "body": "That makes no sense. You can only perform a regex match against one value."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1442934176, "post_id": 32613647, "comment_id": 53283028, "body": "@tjwrona1992 you would need to build a pattern like <code>&#47;foo|bar|baz&#47;</code> to match against several attributes at the same time."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1442944113, "post_id": 32613647, "comment_id": 53289548, "body": "@simbabque, That isn&#39;t what I meant by multiple at once.  I meant I have a regular expression that contains multiple attributes within it. like <code>&#47;$foo$bar$baz&#47;</code> all in one regex"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1442944196, "post_id": 32613647, "comment_id": 53289591, "body": "What would you match against?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1442953413, "post_id": 32613647, "comment_id": 53294772, "body": "Anything where a bunch of atomic values from the attributes form a value, like the name of a product that&#39;s made up of size, color, brand and model. But I&#39;d make a custom method that returns it, or a lazy attribute with clearer and triggers on the parts. Then save that in a variable and build regex from that."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1442953618, "post_id": 32613647, "comment_id": 53294901, "body": "No, then you&#39;d need a joining and an escaping mechanism, which means you&#39;d have to canonize first, which makes a regex approach much longer than the alternative (parsing and comparing), seeing as canonizing requires parsing on the first place"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1442419848, "last_edit_date": 1442419848, "creation_date": 1442419685, "answer_id": 32613647, "question_id": 32613115, "link": "https://stackoverflow.com/questions/32613115/proper-way-to-use-a-moose-class-attribute-in-a-regex/32613647#32613647", "title": "Proper way to use a Moose class attribute in a regex?", "body": "<p>First of all, <code>/$compare_age/</code> is wrong since <code>23 =~ /2/</code> matches. Fixed:</p>\n\n<pre><code>$age =~ /^\\Q$compare_age\\E\\z/\n</code></pre>\n\n<p>There is a trick to evaluate an arbitrary expression within double-quote string literals and regex literals.</p>\n\n<pre><code>$age =~ /^\\Q${\\( $person-&gt;age() )}\\E\\z/\n</code></pre>\n\n<p>Buy what you should be using is the following:</p>\n\n<pre><code>$age == $person-&gt;{age}\n</code></pre>\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 32613647, "answer_count": 1, "score": 1, "last_activity_date": 1442419848, "creation_date": 1442418090, "last_edit_date": 1495540685, "question_id": 32613115, "link": "https://stackoverflow.com/questions/32613115/proper-way-to-use-a-moose-class-attribute-in-a-regex", "title": "Proper way to use a Moose class attribute in a regex?", "body": "<p>I now know that the proper way to access <code>Moose</code> class attributes is to ALWAYS go through the accessor method that is automatically generated by <code>Moose</code>.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/32572421/writing-to-read-only-attributes-inside-a-perl-moose-class/32572706#32572706\">Friedo's answer</a> to my <a href=\"https://stackoverflow.com/questions/32572421/writing-to-read-only-attributes-inside-a-perl-moose-class\">previous question</a> for the reasons why.</p>\n\n<p>However this raises a new question...  How do you ensure <code>Moose</code> class attributes are handled correctly within regular expressions?</p>\n\n<hr>\n\n<p><strong>Take the following for example:</strong></p>\n\n<p><em>Person.pm</em></p>\n\n<pre><code>package Person;\n\nuse strict;\nuse warnings;\nuse Moose;\n\nhas 'name' =&gt; (is =&gt; 'rw', isa =&gt; 'Str');\nhas 'age'  =&gt; (is =&gt; 'rw', isa =&gt; 'Int');\n\n# Make package immutable\n__PACKAGE__-&gt;meta-&gt;make_immutable;\n</code></pre>\n\n<p><em>test.pl</em></p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Person;\n\nmy $person = Person-&gt;new(\n    name =&gt; 'Joe',\n    age  =&gt; 23,\n);\n\nmy $age = 23;\n\n# Access age the \"proper\" way\nif ($age =~ m/$person-&gt;age()/) {\n    print \"MATCH 1!\\n\";\n}\n\n# Access age the \"improper\" way\nif ($age =~ m/$person-&gt;{age}/) {\n    print \"MATCH 2!\\n\";\n}\n</code></pre>\n\n<p><strong>This code will output the following:</strong></p>\n\n<pre><code>MATCH 2!\n</code></pre>\n\n<hr>\n\n<p>It seems that Perl does not parse the accessor method correctly when it is placed in a regex...  What is the proper way to handle this?</p>\n\n<p>I know I could just do this:</p>\n\n<pre><code>my $compare_age = $person-&gt;age();\nif ($age =~ m/$compare_age/) {\n    # MATCH!\n}\n</code></pre>\n\n<p>But how can I get it to work without the extra step of storing it in a separate variable, while still going through the accessor?</p>\n"}, {"tags": ["perl", "backticks"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1442416218, "post_id": 32612275, "comment_id": 53075571, "body": "What is the name of your script? Is it calling itself by any chance? Also, what&#39;s <code>$pFileName</code> set to?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1442416442, "post_id": 32612275, "comment_id": 53075721, "body": "Double quote missing somewhere."}, {"owner": {"reputation": 695, "user_id": 2178956, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6efb8df1c31a08f8eb04b075170fd1f5?s=128&d=identicon&r=PG", "display_name": "Soumya", "link": "https://stackoverflow.com/users/2178956/soumya"}, "edited": false, "score": 0, "creation_date": 1442416448, "post_id": 32612275, "comment_id": 53075725, "body": "scriptname is : validateCodeCompliance    and $pFileName is set to : fileToValidate"}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 1, "creation_date": 1442416757, "post_id": 32612275, "comment_id": 53075923, "body": "Why are you executing via backticks in void context?  If you not needing to use the script&#39;s output in the calling script, then I&#39;d think executing it via the system() function would be more appropriate."}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 0, "creation_date": 1442416842, "post_id": 32612275, "comment_id": 53075986, "body": "Do you have any code in the validateCodeCompliance script that executes the parent script you&#39;ve posted."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1442416847, "post_id": 32612275, "comment_id": 53075992, "body": "It seems to be calling itself - so it looks rather like whatever condition it&#39;s evaluating to check if it should &#39;work&#39; or &#39;call&#39; is failing, and it&#39;s just recursively calling itself. Can&#39;t tell you what that is without more code. (Try just printing <code>$pValidateCmd2</code> to see what it say before running it."}, {"owner": {"reputation": 2847, "user_id": 5049185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46f0d2dc8ee06f428e43d0d115a57c4f?s=128&d=identicon&r=PG&f=1", "display_name": "syck", "link": "https://stackoverflow.com/users/5049185/syck"}, "edited": false, "score": 0, "creation_date": 1442416875, "post_id": 32612275, "comment_id": 53076008, "body": "I think Sobrique was asking for the name of the script which is executing the code, not the one which is called. If they are same, of course the script would start another instance of itself which every instance started."}, {"owner": {"reputation": 695, "user_id": 2178956, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6efb8df1c31a08f8eb04b075170fd1f5?s=128&d=identicon&r=PG", "display_name": "Soumya", "link": "https://stackoverflow.com/users/2178956/soumya"}, "reply_to_user": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 0, "creation_date": 1442417137, "post_id": 32612275, "comment_id": 53076197, "body": "@Ron Bergin : I am actually capturing the output.I just ignored while posting the question to keep it concise.My bad.  Yes, validateCodeCompliance do executes the parent script.But in that case, the parent script is passed as an argument.Will that matter ? What am I missing ? It gonna be something like ... validateCodeCompliance -FILE_TO_VALIDATE=fileToValidate."}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 0, "creation_date": 1442417561, "post_id": 32612275, "comment_id": 53076442, "body": "Since validateCodeCompliance can/does call the parent script, then that is the source of the recursive loop.  It looks to me like you may have an XY problem or wrong implementation.  Maybe your validateCodeCompliance script should be turned into a module and have the parent script call one of its methods and without the recursion."}, {"owner": {"reputation": 695, "user_id": 2178956, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6efb8df1c31a08f8eb04b075170fd1f5?s=128&d=identicon&r=PG", "display_name": "Soumya", "link": "https://stackoverflow.com/users/2178956/soumya"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1442417640, "post_id": 32612275, "comment_id": 53076493, "body": "@Sobrique Sorry-I misunderstood.   The name of the parent script which is executing the code is :   fileToValidate  . But it is just passed as an argument to FILE_TO_VALIDATE within validateCodeCompliance.  Now I am pretty much sure I have messed it up."}, {"owner": {"reputation": 695, "user_id": 2178956, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6efb8df1c31a08f8eb04b075170fd1f5?s=128&d=identicon&r=PG", "display_name": "Soumya", "link": "https://stackoverflow.com/users/2178956/soumya"}, "edited": false, "score": 1, "creation_date": 1442418126, "post_id": 32612275, "comment_id": 53076799, "body": "Thanks a lot !! As you all pointed out, the validateCodeCompliance is calling the parent script and it is leading to an infinite loop. I am now able to get past the issue. Regards."}], "owner": {"reputation": 695, "user_id": 2178956, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6efb8df1c31a08f8eb04b075170fd1f5?s=128&d=identicon&r=PG", "display_name": "Soumya", "link": "https://stackoverflow.com/users/2178956/soumya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1442416850, "creation_date": 1442415716, "last_edit_date": 1442416850, "question_id": 32612275, "link": "https://stackoverflow.com/questions/32612275/backticks-triggering-infinite-processes-in-perl", "title": "Backticks triggering infinite processes in Perl", "body": "<p>I am trying to run a script using backticks and now facing a peculiar issue wherein it is triggering infinite processes.</p>\n\n<pre><code># File name is hard coded.\nmy $pValidateCmd1 =     \n    \"/path/to/script/validateCodeCompliance \".\n    \" -FILE_TO_VALIDATE=/path/to/file/fileToValidate\";\n$glOutText = `$pValidateCmd1`;   # Works perfectly fine\n</code></pre>\n\n<p>#</p>\n\n<pre><code># File name set via variable\nmy $pValidateCmd2 = \n    \"/path/to/script/validateCodeCompliance \".\n    \" -FILE_TO_VALIDATE=/path/to/file/\".$pFileName;\n\n\n$glOutText = `$pValidateCmd2`;   # Triggers infinitely many process\nprint '---'.$pFileName.'---';   # Output :   ---fileToValidate---\n</code></pre>\n\n<p>if I do pstree on any of the processes trigerred - it shows</p>\n\n<pre><code>sh\u2500\u2500\u2500sh\u2500\u2500\u2500perl\u2500\u2500\u2500validateCodeCom\u2500\u2500\u2500sh\u2500\u2500\u2500sh\u2500\u2500\u2500perl\u2500\u2500\u2500validateCodeCom\u2500\u2500\u2500sh\u2500\u2500\u2500sh\u2500\u2500\u2500perl\u2500\u2500\u2500validateCodeCom\u2500\u2500\u2500sh\u2500\u2500\u2500sh\u2500\u2500\u2500perl\u2500\u2500\u2500validateCodeCom\u2500\u2500\u2500sh\u2500\u2500\u2500sh\u2500\u2500\u2500perl\u2500\u2500\u2500validateCodeCom\u2500\u2500\u2500sh\u2500\u2500\u2500sh\u2500\u2500\u2500perl\u2500\u2500\u2500vali+\n</code></pre>\n\n<p>It forces me to believe that there is something wrong with the filename which is causing infinite processes to be triggered.(\nI have already chomped and removed any surrounding whitespaces around the filename. )</p>\n\n<p>Any pointer as to what might the issue behind will be a great help in debugging this issue.</p>\n"}, {"tags": ["regex", "bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 5, "creation_date": 1442415035, "post_id": 32611904, "comment_id": 53074695, "body": "It looks like a JSON objects with the <code>{</code> and <code>}</code> missing."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1442415443, "post_id": 32611904, "comment_id": 53074966, "body": "Can you give a fuller example of your JSON - the answer would most likely be &#39;use a JSON parser&#39;."}, {"owner": {"reputation": 37, "user_id": 4173991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-3oNg9P_TD1M/AAAAAAAAAAI/AAAAAAAACF4/k8Y5fOCXaSc/photo.jpg?sz=128", "display_name": "A.J. Ruckman", "link": "https://stackoverflow.com/users/4173991/a-j-ruckman"}, "edited": false, "score": 0, "creation_date": 1442433300, "post_id": 32611904, "comment_id": 53085722, "body": "simbabque; this is a small sample of the original file, the whole file is 160k."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4173991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-3oNg9P_TD1M/AAAAAAAAAAI/AAAAAAAACF4/k8Y5fOCXaSc/photo.jpg?sz=128", "display_name": "A.J. Ruckman", "link": "https://stackoverflow.com/users/4173991/a-j-ruckman"}, "edited": false, "score": 0, "creation_date": 1442432901, "post_id": 32612011, "comment_id": 53085513, "body": "This didn&#39;t work, the output in <code>file</code> is the same as the original, after I use the <code>sed</code> line. If you can get it to work, how can I then incorporate the output to <code>file</code> into the original .json file?"}, {"owner": {"reputation": 37, "user_id": 4173991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-3oNg9P_TD1M/AAAAAAAAAAI/AAAAAAAACF4/k8Y5fOCXaSc/photo.jpg?sz=128", "display_name": "A.J. Ruckman", "link": "https://stackoverflow.com/users/4173991/a-j-ruckman"}, "edited": false, "score": 0, "creation_date": 1442434722, "post_id": 32612011, "comment_id": 53086514, "body": "I&#39;m getting this error: <code>can&#39;t read s~&quot;\\(libraries\\|objects\\)&quot;~&quot;pack&#47;\\1&quot;~g: No such file or directory</code>"}, {"owner": {"reputation": 37, "user_id": 4173991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-3oNg9P_TD1M/AAAAAAAAAAI/AAAAAAAACF4/k8Y5fOCXaSc/photo.jpg?sz=128", "display_name": "A.J. Ruckman", "link": "https://stackoverflow.com/users/4173991/a-j-ruckman"}, "edited": false, "score": 0, "creation_date": 1442434954, "post_id": 32612011, "comment_id": 53086662, "body": "That&#39;s perfect, except for one thing; there is one other occurrence of the word &#39;libraries&#39; in the .json. Is there a way to make it only change the first occurrence of &#39;libraries&#39; and &#39;objects?&#39;"}, {"owner": {"reputation": 37, "user_id": 4173991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-3oNg9P_TD1M/AAAAAAAAAAI/AAAAAAAACF4/k8Y5fOCXaSc/photo.jpg?sz=128", "display_name": "A.J. Ruckman", "link": "https://stackoverflow.com/users/4173991/a-j-ruckman"}, "edited": false, "score": 0, "creation_date": 1442436058, "post_id": 32612011, "comment_id": 53087219, "body": "I got an error: <code>sed: -e expression #1, char 25: invalid reference \\1 on </code>s&#39; command&#39;s RHS`"}, {"owner": {"reputation": 37, "user_id": 4173991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-3oNg9P_TD1M/AAAAAAAAAAI/AAAAAAAACF4/k8Y5fOCXaSc/photo.jpg?sz=128", "display_name": "A.J. Ruckman", "link": "https://stackoverflow.com/users/4173991/a-j-ruckman"}, "edited": false, "score": 1, "creation_date": 1442436161, "post_id": 32612011, "comment_id": 53087264, "body": "I got it! The problem was the <code>\\1&quot;</code>, replacing the 1 with 0 fixed it. sed apparently starts at 0 and goes up. Thanks!!!"}, {"owner": {"reputation": 37, "user_id": 4173991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-3oNg9P_TD1M/AAAAAAAAAAI/AAAAAAAACF4/k8Y5fOCXaSc/photo.jpg?sz=128", "display_name": "A.J. Ruckman", "link": "https://stackoverflow.com/users/4173991/a-j-ruckman"}, "edited": false, "score": 0, "creation_date": 1442436835, "post_id": 32612011, "comment_id": 53087601, "body": "Alright, another problem if you can help; the command works fine on the server, but I need to run the command over ssh. Here&#39;s the command I&#39;m trying: <code>ssh [IP] &#39;sed -i &#39;&quot;&#39;&quot;&#39;s~&quot;libraries&quot;~&quot;pack&#47;\\0&quot;~; s~&quot;objects&quot;~&quot;pack&#47;\\0&quot;~&#39;&quot;&#39;&quot;&#39;[Directory]&#47;text.json&#39;</code>  However, the output in the file is: <code>&quot;librariesLocation&quot;:&quot;pack&#47;&quot;libraries&quot;&quot;,&quot;objectsLocation&quot;:&quot;pa&zwnj;&#8203;ck&#47;&quot;objects&quot;&quot;,</code> The words <code>objects</code> and <code>libraries</code> are surrounded by another pair of quotes. Any ideas, or is this a matter for another question?"}, {"owner": {"reputation": 37, "user_id": 4173991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-3oNg9P_TD1M/AAAAAAAAAAI/AAAAAAAACF4/k8Y5fOCXaSc/photo.jpg?sz=128", "display_name": "A.J. Ruckman", "link": "https://stackoverflow.com/users/4173991/a-j-ruckman"}, "edited": false, "score": 0, "creation_date": 1442437870, "post_id": 32612011, "comment_id": 53088126, "body": "That doesn&#39;t seem to work. I ran my script in terminal and it logged me into SSH, but as a user; I would have to type the sed command, if that makes sense."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 37, "user_id": 4173991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-3oNg9P_TD1M/AAAAAAAAAAI/AAAAAAAACF4/k8Y5fOCXaSc/photo.jpg?sz=128", "display_name": "A.J. Ruckman", "link": "https://stackoverflow.com/users/4173991/a-j-ruckman"}, "edited": false, "score": 0, "creation_date": 1442438331, "post_id": 32612011, "comment_id": 53088384, "body": "ok at this point I suggest opening a new question as we are digressing a lot from the posted problem."}, {"owner": {"reputation": 37, "user_id": 4173991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-3oNg9P_TD1M/AAAAAAAAAAI/AAAAAAAACF4/k8Y5fOCXaSc/photo.jpg?sz=128", "display_name": "A.J. Ruckman", "link": "https://stackoverflow.com/users/4173991/a-j-ruckman"}, "edited": false, "score": 0, "creation_date": 1442438776, "post_id": 32612011, "comment_id": 53088596, "body": "Here&#39;s the new issue if you have any answers: <a href=\"http://stackoverflow.com/questions/32619016/running-a-complicated-sed-command-over-ssh\" title=\"running a complicated sed command over ssh\">stackoverflow.com/questions/32619016/&hellip;</a>"}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 1, "last_activity_date": 1442436963, "last_edit_date": 1442436963, "creation_date": 1442415060, "answer_id": 32612011, "question_id": 32611904, "link": "https://stackoverflow.com/questions/32611904/linux-how-to-replace-a-string-of-text-containing-quotes-and-commas-in-a-file/32612011#32612011", "title": "Linux: How to replace a string of text containing quotes and commas in a file", "body": "<blockquote>\n  <p>How can I add the 'pack/' prefix to the text 'libraries' and 'objects'?</p>\n</blockquote>\n\n<p>How about a simple <code>sed</code> command:</p>\n\n<pre><code>echo '\"minimumVersion\":2,\"librariesLocation\":\"libraries\",\"objectsLocation\":\"objects\",' &gt; file\n\nsed 's~\"\\(libraries\\|objects\\)\"~\"pack/\\1\"~g' file\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>\"minimumVersion\":2,\"librariesLocation\":\"pack/libraries\",\"objectsLocation\":\"pack/objects\",\n</code></pre>\n\n<hr>\n\n<p>To run over ssh:</p>\n\n<pre><code>ssh ip&lt;&lt;'EOF'\nsed -i 's~\"libraries\"~\"pack/&amp;\"~; s~\"objects\"~\"pack/&amp;\"~' file.json \nEOF\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 4173991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-3oNg9P_TD1M/AAAAAAAAAAI/AAAAAAAACF4/k8Y5fOCXaSc/photo.jpg?sz=128", "display_name": "A.J. Ruckman", "link": "https://stackoverflow.com/users/4173991/a-j-ruckman"}, "edited": false, "score": 0, "creation_date": 1442433086, "post_id": 32612106, "comment_id": 53085616, "body": "How can I incorporate the output in <code>text.txt</code> into the original .json?"}, {"owner": {"reputation": 6984, "user_id": 703531, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2de8b26df89622f511d45480761237c7?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/703531/bruce"}, "reply_to_user": {"reputation": 37, "user_id": 4173991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-3oNg9P_TD1M/AAAAAAAAAAI/AAAAAAAACF4/k8Y5fOCXaSc/photo.jpg?sz=128", "display_name": "A.J. Ruckman", "link": "https://stackoverflow.com/users/4173991/a-j-ruckman"}, "edited": false, "score": 0, "creation_date": 1442433572, "post_id": 32612106, "comment_id": 53085857, "body": "replace text.txt with yourFile.json... This will modify the existing file, without creating a backup (as in &quot;in place&quot;)"}, {"owner": {"reputation": 37, "user_id": 4173991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-3oNg9P_TD1M/AAAAAAAAAAI/AAAAAAAACF4/k8Y5fOCXaSc/photo.jpg?sz=128", "display_name": "A.J. Ruckman", "link": "https://stackoverflow.com/users/4173991/a-j-ruckman"}, "edited": false, "score": 0, "creation_date": 1442435480, "post_id": 32612106, "comment_id": 53086926, "body": "The original file is very long; I only included a snippet of the file. However, note that there are 2 occurrences of the word <code>libraries</code> in the file. I only need to prefix the first. The word <code>objects</code> only occurs once. I&#39;ve looked into doing this with <code>sed</code> but I can&#39;t figure it out. I tried using this: <code>&#39;0&#47;s&#47;&quot;\\(libraries\\|objects\\)&quot;&#47;&quot;pack\\&#47;\\1&quot;&#47;g&#39;</code> with no success, I get an error saying &#39;Invalid usage of the line address 0&quot;"}], "tags": [], "owner": {"reputation": 6984, "user_id": 703531, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2de8b26df89622f511d45480761237c7?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/703531/bruce"}, "is_accepted": false, "score": 0, "last_activity_date": 1442415313, "creation_date": 1442415313, "answer_id": 32612106, "question_id": 32611904, "link": "https://stackoverflow.com/questions/32611904/linux-how-to-replace-a-string-of-text-containing-quotes-and-commas-in-a-file/32612106#32612106", "title": "Linux: How to replace a string of text containing quotes and commas in a file", "body": "<p>sed --in-place will do the trick, with the correct escaping</p>\n\n<pre><code>$ echo '\"minimumVersion\":2,\"librariesLocation\":\"libraries\",\"objectsLocation\":\"objects\",' &gt; text.txt      \n$ sed --in-place 's/\"\\(libraries\\|objects\\)\"/\"pack\\/\\1\"/g' text.txt\n$ cat text.txt \n  \"minimumVersion\":2,\"librariesLocation\":\"pack/libraries\",\"objectsLocation\":\"pack/objects\",\n</code></pre>\n\n<p>replace pattern <code>\"libraries\"</code> with <code>\"pack/libraries\"</code> (using grouping and reuse of matching pattern)</p>\n"}, {"tags": [], "owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 0, "last_activity_date": 1442417278, "last_edit_date": 1442417278, "creation_date": 1442415636, "answer_id": 32612245, "question_id": 32611904, "link": "https://stackoverflow.com/questions/32611904/linux-how-to-replace-a-string-of-text-containing-quotes-and-commas-in-a-file/32612245#32612245", "title": "Linux: How to replace a string of text containing quotes and commas in a file", "body": "<p>With proper JSON input, you could use <a href=\"https://stedolan.github.io/jq/\" rel=\"nofollow\"><code>jq</code></a>:</p>\n\n<pre><code>$ jq '.librariesLocation |= \"pack/\"+., .objectsLocation |= \"pack/\"+.' &lt;&lt;EOF\n{\"minimumVersion\":2,\"librariesLocation\":\"libraries\",\"objectsLocation\":\"objects\"}\nEOF\n{\n  \"minimumVersion\": 2,\n  \"librariesLocation\": \"pack/libraries\",\n  \"objectsLocation\": \"objects\"\n}\n{\n  \"minimumVersion\": 2,\n  \"librariesLocation\": \"libraries\",\n  \"objectsLocation\": \"pack/objects\"\n}\n</code></pre>\n\n<p>If your input is just a comma-separated list of key/value pairs, you <em>might</em> be able to use <code>jq</code> to turn it into a proper JSON object before filtering, but I don't know <code>jq</code> well enough yet to figure out how.</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 4173991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-3oNg9P_TD1M/AAAAAAAAAAI/AAAAAAAACF4/k8Y5fOCXaSc/photo.jpg?sz=128", "display_name": "A.J. Ruckman", "link": "https://stackoverflow.com/users/4173991/a-j-ruckman"}, "edited": false, "score": 0, "creation_date": 1442432865, "post_id": 32612331, "comment_id": 53085486, "body": "I assume this is a script. How can I incorporate the output into the original file?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 37, "user_id": 4173991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-3oNg9P_TD1M/AAAAAAAAAAI/AAAAAAAACF4/k8Y5fOCXaSc/photo.jpg?sz=128", "display_name": "A.J. Ruckman", "link": "https://stackoverflow.com/users/4173991/a-j-ruckman"}, "edited": false, "score": 0, "creation_date": 1442435021, "post_id": 32612331, "comment_id": 53086690, "body": "It is, I have edited to include an example of file IO. (There&#39;s more than one way of doing it, depending on precisely what you need though - you can make this work in a pipe if that&#39;s what you want)."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1442482255, "last_edit_date": 1442482255, "creation_date": 1442415885, "answer_id": 32612331, "question_id": 32611904, "link": "https://stackoverflow.com/questions/32611904/linux-how-to-replace-a-string-of-text-containing-quotes-and-commas-in-a-file/32612331#32612331", "title": "Linux: How to replace a string of text containing quotes and commas in a file", "body": "<p>Please don't try and use regex for JSON. It's nasty. Use a JSON parser:</p>\n\n<p></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse JSON; \n\nmy $json_str = '{ \"minimumVersion\":2,\"librariesLocation\":\"libraries\",\"objectsLocation\":\"objects\" }';\n\nmy $json_ob = decode_json($json_str);\n\nprint \"Before:\", $json_ob -&gt; {'librariesLocation'},\"\\n\";\n\n#pattern replace just the values we're interested in.\n$json_ob -&gt; {'librariesLocation'} =~ s,^,pack/,;\n$json_ob -&gt; {'objectsLocation'} =~ s,^,pack/,;\n\nprint \"After: \", $json_ob -&gt; {'librariesLocation'},\"\\n\";\n\n#print single line text blob\nprint encode_json($json_ob);\nprint \"\\n\\n\";\n\n## or perhaps (formatted, multiline, whitespace):\n\nprint to_json($json_ob, { canonical =&gt; 1, pretty =&gt; 1 } );\n</code></pre>\n\n<p>This works with the rough sample - if you want a better one, give me more JSON and I'll redraft.</p>\n\n<p>This outputs:</p>\n\n<pre><code>Before:libraries\nAfter: pack/libraries\n{\"objectsLocation\":\"pack/objects\",\"minimumVersion\":2,\"librariesLocation\":\"pack/libraries\"}\n\n{\n   \"librariesLocation\" : \"pack/libraries\",\n   \"minimumVersion\" : 2,\n   \"objectsLocation\" : \"pack/objects\"\n}\n</code></pre>\n\n<p>Edit: To do this from a file:</p>\n\n<pre><code>local $/; \nopen ( my $input, '&lt;', 'source_filename_here' ) or die $!;\nopen ( my $output, '&gt;', 'output_filename_here' ) or die $!;\n\nmy $json_ob = decode_json(&lt;$input&gt;);\n#do the transforms\n\nprint {$output} encode_json($json_ob); \n</code></pre>\n\n<p>Or alternatively (reading from STDIN printing to STDOUT just like sed/grep etc.):</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse JSON;\n\nmy @stuff_to_change = qw ( librariesLocation objectsLocation );\n\nlocal $/;\n\n#read from stdin or arg on commmand line. E.g.:\n#myscript.pl somefile\n#cat json_file | myscript.pl\nmy $json_ob = decode_json(&lt;&gt;);\n\n#pattern replace just the values we're interested in.\nfor my $thing (@stuff_to_change) {\n    $json_ob-&gt;{$thing} =~ s,^,pack/,;\n}\n\n#print single line text blob to STDOUT\nprint encode_json($json_ob);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 38863, "user_id": 2415822, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zxy7G.jpg?s=128&g=1", "display_name": "JAL", "link": "https://stackoverflow.com/users/2415822/jal"}, "edited": false, "score": 0, "creation_date": 1442528514, "post_id": 32635969, "comment_id": 53130367, "body": "While this code may answer the question, providing additional context regarding why and/or how this code answers the question improves its long-term value."}], "tags": [], "owner": {"reputation": 1371, "user_id": 5056806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfa01ad122fc89b571651ffbbc34ce37?s=128&d=identicon&r=PG&f=1", "display_name": "Claes Wikner", "link": "https://stackoverflow.com/users/5056806/claes-wikner"}, "is_accepted": false, "score": 0, "last_activity_date": 1442509074, "creation_date": 1442509074, "answer_id": 32635969, "question_id": 32611904, "link": "https://stackoverflow.com/questions/32611904/linux-how-to-replace-a-string-of-text-containing-quotes-and-commas-in-a-file/32635969#32635969", "title": "Linux: How to replace a string of text containing quotes and commas in a file", "body": "<pre><code>awk '{gsub(/libraries\",|objects\",/, \"pack/&amp;\")}1' file\nminimumVersion\":2,\"librariesLocation\":\"pack/libraries\",\"objectsLocation\":\"pack/objects\",\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 4173991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-3oNg9P_TD1M/AAAAAAAAAAI/AAAAAAAACF4/k8Y5fOCXaSc/photo.jpg?sz=128", "display_name": "A.J. Ruckman", "link": "https://stackoverflow.com/users/4173991/a-j-ruckman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 32612011, "answer_count": 5, "score": 0, "last_activity_date": 1442509074, "creation_date": 1442414770, "last_edit_date": 1442434882, "question_id": 32611904, "link": "https://stackoverflow.com/questions/32611904/linux-how-to-replace-a-string-of-text-containing-quotes-and-commas-in-a-file", "title": "Linux: How to replace a string of text containing quotes and commas in a file", "body": "<p>I'm not the greatest with awk, perl, or sed, and I can't figure out how to replace a string of text in a file.</p>\n\n<p>The string is somewhat unusual. Actually, there are 2 of them I need to replace in 1 file automatically.</p>\n\n<p>The file contains a single line of text, very long, in JSON format. Per-line replacements won't work.</p>\n\n<p>Here is the text I need to replace. From:</p>\n\n<pre><code>\"minimumVersion\":2,\"librariesLocation\":\"libraries\",\"objectsLocation\":\"objects\",\n</code></pre>\n\n<p>to</p>\n\n<pre><code>\"minimumVersion\":2,\"librariesLocation\":\"pack/libraries\",\"objectsLocation\":\"pack/objects\",\n</code></pre>\n\n<p>As you can see there are quotes in the text and slashes I need to enter, as well as commas and multiple occurences of libraries and objects, making my current knowledge of sed, awk, and perl useless.</p>\n\n<p>How can I add the 'pack/' prefix to the text 'libraries' and 'objects'?</p>\n"}, {"tags": ["multithreading", "perl", "variables", "time", "share"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1442413467, "post_id": 32611342, "comment_id": 53073459, "body": "This sounds like something that would be trivial to test for yourself. Also - do you mean <code>thread</code> or <code>fork</code>. And - what are you trying to accomplish, because a measure of wallclock seconds is a crude metric at best."}, {"owner": {"reputation": 39, "user_id": 5157541, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/04ba9590a14092bdcc2ff5dd95ec70ca?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/5157541/david-young"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1442414994, "post_id": 32611342, "comment_id": 53074674, "body": "Hi, I just tested it. It is indeed a copy of its mother. By the way, I use threads module."}], "answers": [{"comments": [{"owner": {"reputation": 984, "user_id": 1107958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Zy3c.jpg?s=128&g=1", "display_name": "swornabsent", "link": "https://stackoverflow.com/users/1107958/swornabsent"}, "edited": false, "score": 2, "creation_date": 1442415206, "post_id": 32611597, "comment_id": 53074817, "body": "And you&#39;d probably want to use <code>Time::HiRes</code> if you&#39;re measuring elapsed time."}, {"owner": {"reputation": 39, "user_id": 5157541, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/04ba9590a14092bdcc2ff5dd95ec70ca?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/5157541/david-young"}, "edited": false, "score": 0, "creation_date": 1442415380, "post_id": 32611597, "comment_id": 53074930, "body": "Yes, calling time() twice would be easy to understand. I will keep an eye on real and run time difference. Very thx."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1442413996, "creation_date": 1442413996, "answer_id": 32611597, "question_id": 32611342, "link": "https://stackoverflow.com/questions/32611342/perl-the-value-of-variable-t-in-child-threads/32611597#32611597", "title": "Perl: the value of variable $^T in child threads", "body": "<p>Running this:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\n\nsub test_th {\n    print $^T,\"\\n\";\n}\n\nprint $^T.\"\\n\"\nsleep 10;\nmy $thr = threads -&gt; create ( \\&amp;test_th ); \n$thr -&gt; join;\n</code></pre>\n\n<p>Prints the same value twice.</p>\n\n<p>Which is as expected, since when you thread, you effectively inherit all your parent variables. </p>\n\n<p>If you try this via forking:</p>\n\n<pre><code> #!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Parallel::ForkManager;\n\nprint $^T, \"\\n\";\n\nfor ( 1 .. 2 ) {\n    sleep 10;\n    $mgr-&gt;start and next;\n    print $^T, \"\\n\";\n    $mgr-&gt;finish;\n}\n\n$mgr-&gt;wait_all_children;\n</code></pre>\n\n<p>You get the same value, despite the 'start' of the fork being 10s later.</p>\n\n<p>So to answer your question - no, <code>$^T</code> is started at program instantiation. If you wish to measure things like thread run times, you'll have to find other ways of doing it.</p>\n\n<p>Although, given \"elapsed time\" is at best a very crude metric (processors doing things like scheduling, such that 'real time' and 'run time' don't really correlate particularly)</p>\n\n<p>But perhaps calling <code>time()</code> at start and end of each thread would give you what you need? Or perhaps something like <code>Devel::NYTProf</code>? </p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1442430022, "last_edit_date": 1442430022, "creation_date": 1442423778, "answer_id": 32614815, "question_id": 32611342, "link": "https://stackoverflow.com/questions/32611342/perl-the-value-of-variable-t-in-child-threads/32614815#32614815", "title": "Perl: the value of variable $^T in child threads", "body": "<p>A quick test will reveal that <code>$^T</code> is defined for the populated at process startup, not at thread startup</p>\n\n<p>But nothing's stopping you from noting when the thread starts. You can even save the time stamp in <code>$^T</code> since it's a per-thread variable!</p>\n\n<pre><code>use feature qw( say );\nuse threads;\n\nsub thread {\n   my ($n) = @_;\n   sleep $n;\n}\n\nsub wrapper {\n   my ($n) = @_;\n   $^T = time;\n   thread($n);\n   say sprintf \"Thread %s ran for %s seconds.\", threads-&gt;tid, time-$^T;\n}\n\nasync { wrapper(5) };\nsleep 2;\nasync { wrapper(2) };\n$_-&gt;join for threads-&gt;list;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Thread 2 ran for 2 seconds.\nThread 1 ran for 5 seconds.\n</code></pre>\n\n<p>Note that assigning to <code>$^T</code> coerces the stored value into an integer, so it would not be an appropriate place to store the result of <code>Time::HiRes::time()</code>.</p>\n"}], "owner": {"reputation": 39, "user_id": 5157541, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/04ba9590a14092bdcc2ff5dd95ec70ca?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/5157541/david-young"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 32611597, "answer_count": 2, "score": 0, "last_activity_date": 1442430022, "creation_date": 1442413354, "question_id": 32611342, "link": "https://stackoverflow.com/questions/32611342/perl-the-value-of-variable-t-in-child-threads", "title": "Perl: the value of variable $^T in child threads", "body": "<p>$^T stores the start time of a perl program in second since epoch.\nBecause I need to know how many seconds a child thread costs, the question is:\nDoes $^T in child thread store the beginning time of itself? or simply copy the value from its mother thread? </p>\n"}, {"tags": ["perl", "module", "namespaces", "package"], "comments": [{"owner": {"reputation": 4266, "user_id": 233347, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/72ad3afaf8c7c42ee404bb0bf9ff0d1a?s=128&d=identicon&r=PG", "display_name": "prashant thakre", "link": "https://stackoverflow.com/users/233347/prashant-thakre"}, "edited": false, "score": 0, "creation_date": 1442406631, "post_id": 32608504, "comment_id": 53068190, "body": "Yup i got it..removing my comments"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 4266, "user_id": 233347, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/72ad3afaf8c7c42ee404bb0bf9ff0d1a?s=128&d=identicon&r=PG", "display_name": "prashant thakre", "link": "https://stackoverflow.com/users/233347/prashant-thakre"}, "edited": false, "score": 0, "creation_date": 1618568921, "post_id": 32608504, "comment_id": 118646599, "body": "Different way to check that <code>Class</code> was loaded and available: <a href=\"https://github.com/mojolicious/mojo/blob/master/lib/Mojo/Loader.pm#L47\" rel=\"nofollow noreferrer\">github.com/mojolicious/mojo/blob/master/lib/Mojo/Loader.pm#L&zwnj;&#8203;47</a>"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1442425464, "post_id": 32608860, "comment_id": 53081298, "body": "<code>defined(*{&quot;Hi::Test::&quot;})</code> is sufficient."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1442407127, "creation_date": 1442407127, "answer_id": 32608860, "question_id": 32608504, "link": "https://stackoverflow.com/questions/32608504/how-to-check-if-perl-module-is-available/32608860#32608860", "title": "How to check if perl module is available?", "body": "<p>I'm assuming there is actually something happening in that package, and not just an empty block. </p>\n\n<p>The following code checks if there are any entries in the symbol table for that package. It's dirty, but it works as long as there are subs or package variables registered.</p>\n\n<pre><code>{\n  package Hi::Test;\n\n  sub foo;\n}\n\nmy $rc =  eval{ require Hi::Test };\nif (! $rc) {\n  $rc = do {\n    no strict;\n    *stash = *{\"Hi::Test::\"};\n    scalar keys %stash;\n  }\n}\n\nprint $rc;\n</code></pre>\n\n<p>It will print <code>1</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1442411441, "last_edit_date": 1442411441, "creation_date": 1442410851, "answer_id": 32610304, "question_id": 32608504, "link": "https://stackoverflow.com/questions/32608504/how-to-check-if-perl-module-is-available/32610304#32610304", "title": "How to check if perl module is available?", "body": "<p>I'm a little rusty on this, but I think your <code>require</code> will be failing regardless - this errors:</p>\n\n<pre><code>#!/usr/bin/perl\n\n{\n    package Hi::Test;\n\n    sub foo {\n        print \"bar\\n\";\n    }\n}\n\n{\n    package main;\n    require Hi::Test; \n}\n</code></pre>\n\n<p>This errors - it can't find it <code>@INC</code> (because it isn't in <code>@INC</code>). Both <code>use</code> and <code>require</code> specifically tell <code>perl</code> to \"go out and find a module file\"</p>\n\n<p>But you can still call 'foo' with:</p>\n\n<pre><code>Hi::Test::foo();\n</code></pre>\n\n<p>So you can't test the loading of the module with <code>eval</code> nor can you check <code>%INC</code> . </p>\n\n<p>But what you can do is check <code>%Hi::</code>:</p>\n\n<pre><code>use Data::Dumper;\nprint Dumper \\%Hi::;\nprint Dumper \\%Hi::Test::;\n</code></pre>\n\n<p>Which gives us:</p>\n\n<pre><code>$VAR1 = {\n          'Test::' =&gt; *{'Hi::Test::'}\n        };\n$VAR1 = {\n          'foo' =&gt; *Hi::Test::foo\n        };\n</code></pre>\n\n<p>So we can:</p>\n\n<pre><code>print \"Is loaded\" if defined $Hi::{'Test::'}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1442411383, "post_id": 32610499, "comment_id": 53071864, "body": "Please attribute where you have found that."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1442411693, "post_id": 32610499, "comment_id": 53072079, "body": "this can be found in <code>perlmod</code> - each package has a magic hash called <code>%packagename::</code>  So you can do <code>print Dumper \\%main::</code> - or in this example: <code>print Dumper \\$main::{&#39;Hi::&#39;};</code> giving <code>$VAR1 = \\*{&#39;::Hi::&#39;};</code>. What you <i>can&#39;t</i> do is: <code>print Dumper \\$main::{&#39;Hi::Test::&#39;};</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1442424948, "post_id": 32610499, "comment_id": 53080992, "body": "<code>%::</code>, <code>%main::</code>, <code>%main::main::</code> and <code>%main::main::main::</code> are all the same namespace. I&#39;d drop the <code>main</code> from your code."}], "tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1442469103, "last_edit_date": 1495542585, "creation_date": 1442411295, "answer_id": 32610499, "question_id": 32608504, "link": "https://stackoverflow.com/questions/32608504/how-to-check-if-perl-module-is-available/32610499#32610499", "title": "How to check if perl module is available?", "body": "<p><strong>UPDATED</strong><br>\nI have found this clue:</p>\n\n<pre><code>my $module =  *main::;\nmy @sub_name =  split '::', $full_name;\nwhile( each @sub_name ) {\n    $module =  $$module{ $sub_name[$_].'::' };\n}\nprint \"Module is available\"   if $module;\n</code></pre>\n\n<p>In compare to <a href=\"https://stackoverflow.com/a/32608860/4632019\">this</a> answer it does not create additional variable in global stash</p>\n"}, {"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1442471704, "post_id": 32615283, "comment_id": 53097810, "body": "There seems a bug in perl when <code>eval &#39;require Some::Pkg&#39;</code> which spoil global namespace. <a href=\"https://rt.perl.org/Ticket/Display.html?id=126077\" rel=\"nofollow noreferrer\">rt.perl.org/Ticket/Display.html?id=126077</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1442504893, "post_id": 32615283, "comment_id": 53117952, "body": "@Eugen Konkov, Yes, as mentioned, referencing <code>Some::Pkg</code> creates the package, so <code>require Some::Pkg</code> creates the package, even if it eventually throws an exception."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1442504923, "post_id": 32615283, "comment_id": 53117970, "body": "@Eugen Konkov, Interesting. <code>no strict qw( refs );</code> is indeed not required. Fixed."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1442506873, "post_id": 32615283, "comment_id": 53119222, "body": "I think that is due to &#39;defined&#39; which does not produce error"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1442507992, "post_id": 32615283, "comment_id": 53119849, "body": "It does seem to be. That&#39;s <i>very</i> interesting once you realize that <code>defined</code> is only called after the strict error would have been thrown. That means they went out of their way to support this by treating it specially in the compiler."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1442504548, "last_edit_date": 1442504548, "creation_date": 1442425403, "answer_id": 32615283, "question_id": 32608504, "link": "https://stackoverflow.com/questions/32608504/how-to-check-if-perl-module-is-available/32615283#32615283", "title": "How to check if perl module is available?", "body": "<p>You want something like <code>defined(*Hi::Test::)</code>, except that simply mentioning <code>*Hi::Test::</code> creates the package.</p>\n\n<pre><code>$ perl -E'\n   say defined(*Hi::Test::) ? \"exists\" : \"doesn'\\''t exist\";\n'\nexists\n</code></pre>\n\n<p>By using symbolic references, you avoid that problem.</p>\n\n<pre><code>$ perl -E'\n   { package Hi::Test }\n   say defined(*{\"Hi::Test::\"}) ? \"exists\" : \"doesn'\\''t exist\";\n   say defined(*{\"Hi::TEST::\"}) ? \"exists\" : \"doesn'\\''t exist\";\n'\nexists\ndoesn't exist\n</code></pre>\n\n<p>Putting that code in a sub to makes things cleaner.</p>\n\n<pre><code>$ perl -E'\n   use strict;\n   use warnings;\n\n   sub test_for_package {\n      my ($pkg_name) = @_;\n      $pkg_name .= \"::\";\n      return defined(*$pkg_name);\n   }\n\n   { package Hi::Test }\n   say test_for_package(\"Hi::Test\") ? \"exists\" : \"doesn'\\''t exist\";\n   say test_for_package(\"Hi::TEST\") ? \"exists\" : \"doesn'\\''t exist\";\n'\nexists\ndoesn't exist\n</code></pre>\n\n<p>Note that creating the package <code>Foo::Bar::Baz</code> also creates the packages <code>Foo</code> and <code>Foo::Bar</code>.</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "accepted_answer_id": 32615283, "answer_count": 4, "score": 2, "last_activity_date": 1618549167, "creation_date": 1442406181, "last_edit_date": 1618549167, "question_id": 32608504, "link": "https://stackoverflow.com/questions/32608504/how-to-check-if-perl-module-is-available", "title": "How to check if perl module is available?", "body": "<p>I have found <a href=\"https://stackoverflow.com/questions/251694/how-can-i-check-if-i-have-a-perl-module-before-using-it/251786#251786\">this</a>:</p>\n<pre><code>my $rc = eval\n{\n  require Term::ReadKey;\n  Term::ReadKey-&gt;import();\n  1;\n};\n\nif($rc)\n{\n  # Term::ReadKey loaded and imported successfully\n  ...\n}\n</code></pre>\n<p>But that does not work for packages defined inside other modules like:</p>\n<pre><code>{\n  package Hi::Test;\n}    \n\nmy $rc =  eval{ require Hi::Test };\n</code></pre>\n<p><code>$rc</code> is false here.</p>\n<p>How can I check that 'Hi::Test' is available?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1442399582, "post_id": 32605993, "comment_id": 53063453, "body": "<code>$counter</code> is local to the <code>while</code> block. Did you mean to declare it outside of the block?"}, {"owner": {"reputation": 340, "user_id": 2165436, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kJoGX.jpg?s=128&g=1", "display_name": "dubis", "link": "https://stackoverflow.com/users/2165436/dubis"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1442399722, "post_id": 32605993, "comment_id": 53063530, "body": "I try  to do a stepper like : <code>(my $i = 200; $i &lt;= 6000; $i += 200)</code>  for changing  the names of the files each 200 lines. If I put <code>$counter</code> outside the <code>while</code> the still as 1"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 2, "creation_date": 1442399782, "post_id": 32605993, "comment_id": 53063566, "body": "The code in the question has some serious syntactical errors. Could you show us the <i>real</i> code?"}, {"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 3, "creation_date": 1442403228, "post_id": 32605993, "comment_id": 53065740, "body": "If you&#39;re running Perl, you&#39;re probably on Unix, and there&#39;s a command for that.  Try <code>split -l 200 &lt; 5000_lines.txt &gt; 200_lines.txt</code>"}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1442414453, "post_id": 32605993, "comment_id": 53074271, "body": "With <i>Unix</i> taken very broadly - e.g. Cygwin has <code>split</code> as well."}, {"owner": {"reputation": 340, "user_id": 2165436, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kJoGX.jpg?s=128&g=1", "display_name": "dubis", "link": "https://stackoverflow.com/users/2165436/dubis"}, "edited": false, "score": 0, "creation_date": 1442422880, "post_id": 32605993, "comment_id": 53079876, "body": "I understood my <code>$counter++;</code> is not placed well because the loop <code>while</code> resset it to 0 each times."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1442405272, "post_id": 32606692, "comment_id": 53067160, "body": "Would strongly suggest not using <code>DATA</code> as that&#39;s a special case for filenames. And generally speaking, using lexical filehandles."}, {"owner": {"reputation": 1543, "user_id": 2696275, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Ku4yB.jpg?s=128&g=1", "display_name": "Sahil M", "link": "https://stackoverflow.com/users/2696275/sahil-m"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1442405341, "post_id": 32606692, "comment_id": 53067205, "body": "+1, Yeah, I realized and changed that in the code. I used it to be consistent with the OP&#39;s original post."}], "tags": [], "owner": {"reputation": 1543, "user_id": 2696275, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Ku4yB.jpg?s=128&g=1", "display_name": "Sahil M", "link": "https://stackoverflow.com/users/2696275/sahil-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1442405235, "last_edit_date": 1442405235, "creation_date": 1442401094, "answer_id": 32606692, "question_id": 32605993, "link": "https://stackoverflow.com/questions/32605993/how-to-split-a-file-of-5000-lines-in-several-files-of-200-lines-each-with-perl/32606692#32606692", "title": "How to split a file of 5000 lines in several files of 200 lines each with Perl?", "body": "<p>You have a bunch of errors in your code.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n# Creating a file with 5000 lines\nmy $filename = '5000_lines.txt';\nopen ( $DATA, '&gt;', $filename )  or die \"Could not open file '$filename': $!\";\n\nfor (my $i=0;$i&lt;5000;$i++){\n    print $DATA \"$i\\n\";\n}\nclose ( $DATA);\n\n\nmy $targetfile = '200_lines.txt';\n\nopen ( my $DATA, '&lt;', $filename )  or die \"Could not open file '$filename': $!\";\nmy $counter = 0;\nmy $num = 0;\nmy $flag = 1;\nwhile ( my $line = &lt;$DATA&gt; ) {\n      if ($flag == 1){\n          open (FILE, '&gt;', $targetfile.'_'.$num ) or die \"Could not open file '$targetfile.'_'.$num': $!\";\n      }\n      print FILE $line;\n      $flag=0;\n      if ( $counter % 200 == 0){\n           $num = $counter/200;\n           close FILE;\n           $flag=1\n       }\n      $counter++; \n}\nclose (FILE);\n</code></pre>\n\n<p>It will break the large file into smaller chunks of 200 lines each.</p>\n"}, {"comments": [{"owner": {"reputation": 149, "user_id": 3059096, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d12ffc0cd9482e260f377fa9a3c0f3bb?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixJay", "link": "https://stackoverflow.com/users/3059096/phoenixjay"}, "edited": false, "score": 0, "creation_date": 1563309281, "post_id": 32606885, "comment_id": 100655183, "body": "This worked perfectly for what I needed! Thank  you for this!"}], "tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": true, "score": 4, "last_activity_date": 1442404383, "last_edit_date": 1442404383, "creation_date": 1442401623, "answer_id": 32606885, "question_id": 32605993, "link": "https://stackoverflow.com/questions/32605993/how-to-split-a-file-of-5000-lines-in-several-files-of-200-lines-each-with-perl/32606885#32606885", "title": "How to split a file of 5000 lines in several files of 200 lines each with Perl?", "body": "<p>You can use <code>sprintf</code> to generate new filenames after every 200 lines and use <code>$.</code> to keep track of line numbers in the file.</p>\n\n<p>The below script will generate smaller chunks of files from the larger file with 200 lines each.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nopen my $rfh,'&lt;','file_5000' or die \"unable to open file : $! \\n\";\n\nmy $filecount=0;\nmy $wfh;\nwhile(&lt;$rfh&gt;){\n    if(($.-1) % 200 == 0){\n           close($wfh) if($wfh);\n           open($wfh, '&gt;', sprintf(\"file%02d\", ++$filecount)) or die $!;\n        }\n   print $wfh \"$_\";\n}\nclose($rfh);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1442405222, "last_edit_date": 1442405222, "creation_date": 1442404921, "answer_id": 32608051, "question_id": 32605993, "link": "https://stackoverflow.com/questions/32605993/how-to-split-a-file-of-5000-lines-in-several-files-of-200-lines-each-with-perl/32608051#32608051", "title": "How to split a file of 5000 lines in several files of 200 lines each with Perl?", "body": "<ul>\n<li><code>$counter</code> is scoped within your while block. So it is reset each iteration. </li>\n<li>You don't really need to do it like that, as you can test <code>$.</code> for the current line number</li>\n<li>don't call your filehandle <code>$DATA</code>. There's a special filehandle called <code>&lt;DATA&gt;</code>. </li>\n</ul>\n\n<p>How about:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nopen( my $input,  '&lt;', '5000_lines.txt' ) or die $!;\nopen( my $output, '&gt;', '200_lines.txt' )  or die $!;\n\nwhile ( my $line = &lt;$input&gt; ) {\n    unless ( $. % 200 ) {\n        close($output);\n        open( $output, '&gt;', int( $. / 200 + 2) . \"00_lines.txt\" ) or die $!;\n    }\n    print {$output} $line;\n}\nclose($input);\nclose($output);\n</code></pre>\n\n<p>This creates files:</p>\n\n<pre><code>200_lines.txt\n400_lines.txt\n600_lines.txt\n</code></pre>\n\n<p>etc. </p>\n"}], "owner": {"reputation": 340, "user_id": 2165436, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kJoGX.jpg?s=128&g=1", "display_name": "dubis", "link": "https://stackoverflow.com/users/2165436/dubis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "accepted_answer_id": 32606885, "answer_count": 3, "score": 0, "last_activity_date": 1442405235, "creation_date": 1442399135, "last_edit_date": 1442399693, "question_id": 32605993, "link": "https://stackoverflow.com/questions/32605993/how-to-split-a-file-of-5000-lines-in-several-files-of-200-lines-each-with-perl", "title": "How to split a file of 5000 lines in several files of 200 lines each with Perl?", "body": "<p>I've a file of 5000 lines and I want several files of 200 lines each, and I tried this:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy $targetfile = '200_lines.txt';\nmy $filename = '5000_lines.txt';\n\nopen ( my $DATA, '&lt;', $filename )  or die \"Could not open file '$filename': $!\";\n\nwhile ( my $line = &lt;$DATA&gt; ) {\n  my $counter++; \n\n  open (my $FILE, '&gt;&gt;', $targetfile ) or die \"Could not open file '$targetfile': $!\";\n  print $FILE $line;\n  close $FILE;\n  if ( $counter % 200 == 0\n    if ($. % 200 == 0) { \n      $targetfile =~ s/200/$counter/;\n    }\n}\n</code></pre>\n\n<p>My <code>$counter</code> variable still at 1. I don't know why. So I got just one file named <code>200_lines.txt</code> with 5000 lines.</p>\n"}, {"tags": ["apache", "perl", "solr", "lucene", "apache-lucy"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1442395824, "post_id": 32604657, "comment_id": 53061011, "body": "Unfortunately your question is probably a bit offtopic, as Stack Overflow focusses on specific code questions."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1442396484, "post_id": 32604657, "comment_id": 53061440, "body": "I agree with @Sobrique. In an attempt to help anyway, you might want to look into Elastic Search also. Solr takes a while to index stuff if there is a lot. Elastic Search might be faster."}, {"owner": {"reputation": 708, "user_id": 148420, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/2vMyg.jpg?s=128&g=1", "display_name": "ppant", "link": "https://stackoverflow.com/users/148420/ppant"}, "edited": false, "score": 0, "creation_date": 1442396694, "post_id": 32604657, "comment_id": 53061579, "body": "Even I was a bit hesitant to post here but anyway posted. Probably..will post on PerlMonks and close here. Have investigated elastic too waiting for 2.0 release to do more testing on attachments because of river plugin depreciation. Thanks for helping."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1442435138, "post_id": 32604657, "comment_id": 53086750, "body": "This question is somewhat off-topic for StackOverflow. But as a Apache Lucy PMC member, I can answer all questions with yes. Note that Lucy is a &quot;loose&quot; port of Lucene, doesn&#39;t track Lucene versions, and provides only a small subset of features."}, {"owner": {"reputation": 708, "user_id": 148420, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/2vMyg.jpg?s=128&g=1", "display_name": "ppant", "link": "https://stackoverflow.com/users/148420/ppant"}, "edited": false, "score": 0, "creation_date": 1442465095, "post_id": 32604657, "comment_id": 53095519, "body": "Interested to know which features it is providing and which not? This will help in selecting Lucene based Solr or lucy. I have already asked the same question on Perl monks. Thanks for your feedback."}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 5356042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431b85016b61939122c1636c89e50f84?s=128&d=identicon&r=PG&f=1", "display_name": "sKuNkeNsTeiN", "link": "https://stackoverflow.com/users/5356042/skunkenstein"}, "is_accepted": true, "score": 2, "last_activity_date": 1442755742, "creation_date": 1442755742, "answer_id": 32679921, "question_id": 32604657, "link": "https://stackoverflow.com/questions/32604657/apache-solr-vs-apache-lucy/32679921#32679921", "title": "Apache solr vs Apache Lucy", "body": "<p>Okay, I'm going to share some of my experience with using Lucy.</p>\n\n<p>When Lucy builds an index it creates many index files in a directory which you have declared. Only one user can read, write and delete from the index.If the index is to be shared with multiple users, then file locking needs to be applied. When one user is accessing the index, the other users are locked out until the user that's currently accessing the index is done. This maybe an issue when there is a high volume of users wanting to access the index. </p>\n\n<p>Lucy does not support Integer types, so if you make a query using numbers, Lucy will treat it as a string. This also means Lucy has no number query function operators like greater, less than, etc. It's also impossible to work with dates and time. Solr on the other hand allows you to use integers and all the available query functions with integers, dates, time, etc.</p>\n\n<p>Lucy has practically no online community support, not to mention lack of documentation. Solr on the other hand is the most popular Lucene based enterprise search engine. It has a vast amount of community support, very comprehensive documentation and tutorial.</p>\n\n<p>The only issue with solr is security. When you create an index with solr, it is loaded on to a shared tenancy server. This means anyone can access your data. It is up to you to secure your data. The good news is there a some plugins that allows you to do so.</p>\n\n<p>In my opinion Lucy is a good, fast little search engine if you are using it primarily for text searches and you have a site with not a lot of traffic.</p>\n"}], "owner": {"reputation": 708, "user_id": 148420, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/2vMyg.jpg?s=128&g=1", "display_name": "ppant", "link": "https://stackoverflow.com/users/148420/ppant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 764, "favorite_count": 0, "closed_date": 1443136340, "accepted_answer_id": 32679921, "answer_count": 1, "score": 0, "last_activity_date": 1442755742, "creation_date": 1442395686, "question_id": 32604657, "link": "https://stackoverflow.com/questions/32604657/apache-solr-vs-apache-lucy", "closed_reason": "Opinion-based", "title": "Apache solr vs Apache Lucy", "body": "<p>I have a web application written in <a href=\"https://www.perl.org/\" rel=\"nofollow\">Perl</a>. My search requirement is to index a file system / on fly document which can contains file types i.e.; HTML, MS Office, PDF documents etc and then perform a full-text search. I have already investigated <a href=\"https://metacpan.org/source/CREAMYG/Lucy-0.4.2\" rel=\"nofollow\">Apache Solr</a> works fine with sample data. Now I got to know about <a href=\"http://lucy.apache.org/\" rel=\"nofollow\">Apache Lucy</a> and wondering if this is the right candidate for my Perl based application. One of the concern with <a href=\"https://metacpan.org/source/CREAMYG/Lucy-0.4.2\" rel=\"nofollow\">Apache Lucy</a> this is that there is no update on <a href=\"https://metacpan.org/source/CREAMYG/Lucy-0.4.2\" rel=\"nofollow\">CPAN</a> after Dec 2014. Not sure if this is actively maintained especially what is the progress with integration with <a href=\"https://lucene.apache.org/core/5_3_0/index.html\" rel=\"nofollow\">Lucene 5.3</a>. I need suggestion on below points:</p>\n\n<ul>\n<li>Is <a href=\"http://lucy.apache.org/\" rel=\"nofollow\">Apache Lucy</a> is almost similar to <a href=\"https://lucene.apache.org/core/5_3_0/index.html\" rel=\"nofollow\">Apache Lucene</a>? </li>\n<li>Is <a href=\"http://lucy.apache.org/\" rel=\"nofollow\">Apache Lucy</a> production ready? </li>\n<li>Any tentative planning of new release of <a href=\"https://metacpan.org/source/CREAMYG/Lucy-0.4.2\" rel=\"nofollow\">Apache Lucy</a>.</li>\n</ul>\n\n<p>Thanks,</p>\n"}, {"tags": ["python", "bash", "perl", "shell", "unix"], "comments": [{"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "edited": false, "score": 0, "creation_date": 1442390891, "post_id": 32602143, "comment_id": 53057961, "body": "Did you try using the full path of the perl executable? like &#39;/usr/bin/perl -e &quot;$script&quot;&#39;"}, {"owner": {"reputation": 68674, "user_id": 41316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2c31ca37c09ab42763f690e0d1355d7?s=128&d=identicon&r=PG", "display_name": "bruno desthuilliers", "link": "https://stackoverflow.com/users/41316/bruno-desthuilliers"}, "edited": false, "score": 3, "creation_date": 1442399478, "post_id": 32602143, "comment_id": 53063392, "body": "Rube Goldberg, is that you ?-) Seriously, why don&#39;t you add some generated C code and a call to gcc ?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1442405750, "post_id": 32602143, "comment_id": 53067510, "body": "I&#39;m sure you could get some obfuscated code generators in there too!"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1442392053, "creation_date": 1442392053, "answer_id": 32603346, "question_id": 32602143, "link": "https://stackoverflow.com/questions/32602143/bash-script-contain-perl-code-and-run-on-python/32603346#32603346", "title": "bash script contain perl code - and run on Python", "body": "<p>Well, I can't say about collapsing your shell script into python, but all that <code>perl</code> does is:</p>\n\n<pre><code>echo ${USERNAME} \\@ ${PASSWORD} &gt;&gt; UserList.txt\n</code></pre>\n\n<p>Seems a bit overkill to me. </p>\n"}], "owner": {"reputation": 54, "user_id": 4471753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f07281651b83a4aa4f14eaf13235e216?s=128&d=identicon&r=PG&f=1", "display_name": "M.M", "link": "https://stackoverflow.com/users/4471753/m-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1442392053, "creation_date": 1442388102, "question_id": 32602143, "link": "https://stackoverflow.com/questions/32602143/bash-script-contain-perl-code-and-run-on-python", "title": "bash script contain perl code - and run on Python", "body": "<p>I'm trying to run bash script - that contains perl code in it - on Python.\nFrom some reason - it only execute the bash part and not the perl part.</p>\n\n<p>The Python code that call's the bash Script is this : (2 options)</p>\n\n<pre><code> bashCommand = \"/bin/bash createUser.sh \"+  str(self.emptyNameField.text()) +\" \"+ str(self.emptyPWField.text())+\" \" + str(self.emptyGroupField.text())\n        os.system(bashCommand)\n\nsubprocess.call([path+'createUser.sh', str(self.emptyNameField.text()),str(self.emptyPWField.text()),str(self.emptyGroupField.text())])\n</code></pre>\n\n<p>And the bash script:</p>\n\n<pre><code>#!/bin/bash\n\nUSER_NAME=\"$1\"\nPASSWORD=\"$2\"\nUNIQUE_ID=\"$3\"\nsudo dscl . create /Users/$USER_NAME\nsudo dscl . create /Users/$USER_NAME UserShell /bin/bash\nsudo dscl . create /Users/$USER_NAME RealName \"$USER_NAME\"\nsudo dscl . create /Users/$USER_NAME UniqueID $UNIQUE_ID\nsudo dscl . create /Users/$USER_NAME PrimaryGroupID 1000\nsudo dscl . create /Users/$USER_NAME NFSHomeDirectory /Local/Users/$USER_NAME\nsudo dscl . passwd /Users/$USER_NAME $PASSWORD\nexport USER_NAME\nexport PASSWORD\nexport UNIQUE_ID\n\n\nscript=$(cat &lt;&lt;'EOF'\n\n$file = \"UsersList.txt\";\n\nopen LIST, '&gt;&gt;',$file;\nprint LIST \"$ENV{USER_NAME} @ $ENV{PASSWORD}\\n\";\nclose(LIST);\nEOF\n)\nperl -e \"$script\"\n\n\necho \"User Name: $USER_NAME , Password: $PASSWORD \"\n</code></pre>\n\n<p>Any help would be much appreciated !!!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 3, "creation_date": 1442388601, "post_id": 32602076, "comment_id": 53056690, "body": "<code>ls -1dt *&#47; | head -n 1</code> will give you most recently modified folder."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1442388695, "post_id": 32602076, "comment_id": 53056751, "body": "Welcome to Stack Overflow. Please take a moment to read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 23, "user_id": 5057031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OeTd.png?s=128&g=1", "display_name": "Direlynx", "link": "https://stackoverflow.com/users/5057031/direlynx"}, "edited": false, "score": 0, "creation_date": 1442388734, "post_id": 32602076, "comment_id": 53056779, "body": "Thanks! That worked."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1442392734, "last_edit_date": 1495542577, "creation_date": 1442392734, "answer_id": 32603561, "question_id": 32602076, "link": "https://stackoverflow.com/questions/32602076/find-the-most-recently-modifed-folder/32603561#32603561", "title": "Find the most recently modifed folder", "body": "<p>Well, it's tagged <code>perl</code>, so I'm going to assume you want some <code>perl</code> code. But as  <a href=\"https://stackoverflow.com/users/257635/chankey-pathak\">Chankey Pathak</a> notes in the comments:</p>\n\n<pre><code>ls -1dt */ | head -n 1\n</code></pre>\n\n<p>Will do the trick.</p>\n\n<p>In <code>perl</code> you'll want <code>stat</code> and <code>glob</code> and probably <code>sort</code>:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy %files_by_mtime;\n\nforeach my $file ( glob ( \"~/foo/bar/*\" ) ) {\n   next unless -d $file;\n   my ( $mtime ) = (stat($file))[9];\n   $files_by_mtime{$file} = $mtime; \n}\n\nforeach my $filename (  sort { $files_by_mtime{$b} &lt;=&gt; $files_by_mtime{$a} } keys %files_by_mtime ) {\n   print \"$filename  $files_by_mtime{$filename }\\n\";\n}\n</code></pre>\n\n<p>Generates an ordered list - by mtime.</p>\n\n<p>To simplify this - you can just access element zero:</p>\n\n<pre><code>print \"\".(  sort { $files_by_mtime{$b} &lt;=&gt; $files_by_mtime{$a} } keys %files_by_mtime )[0],\"\\n\";\n</code></pre>\n\n<p>Or simpifying to a one liner:</p>\n\n<pre><code>perl -e '%f = map { -d ? $_ =&gt; (stat)[9] : () } glob(\"~/foo/bar/*\");print \"\" . ( sort { $f{$b} &lt;=&gt; $f{$a} } keys %f )[0];\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5057031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OeTd.png?s=128&g=1", "display_name": "Direlynx", "link": "https://stackoverflow.com/users/5057031/direlynx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442392734, "creation_date": 1442387882, "last_edit_date": 1442388652, "question_id": 32602076, "link": "https://stackoverflow.com/questions/32602076/find-the-most-recently-modifed-folder", "title": "Find the most recently modifed folder", "body": "<p><code>$some_folder</code> will always be in <code>~/foo/bar/</code>. <code>$some_folder</code> will always be the most recently modified folder inside <code>~/foo/bar/</code>, however, the name will never be the same per-system. How would I go about finding <code>$some_folder</code>?</p>\n"}, {"tags": ["arrays", "perl", "hash"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 3626985, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DbvBt.jpg?s=128&g=1", "display_name": "Analyzer", "link": "https://stackoverflow.com/users/3626985/analyzer"}, "edited": false, "score": 0, "creation_date": 1442386818, "post_id": 32601544, "comment_id": 53055685, "body": "Thanks for the effort. But, still, it does not produce the desired output. I will be keen to get &quot;1 and 3 are duplicates&quot;. More ever, I am using hash of arrays, so, processing should be carried out through hash"}, {"owner": {"reputation": 1078, "user_id": 734744, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3a20b00349cbb9c96c21c307a74487a7?s=128&d=identicon&r=PG", "display_name": "Sameer Naik", "link": "https://stackoverflow.com/users/734744/sameer-naik"}, "reply_to_user": {"reputation": 69, "user_id": 3626985, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DbvBt.jpg?s=128&g=1", "display_name": "Analyzer", "link": "https://stackoverflow.com/users/3626985/analyzer"}, "edited": false, "score": 0, "creation_date": 1442386947, "post_id": 32601544, "comment_id": 53055755, "body": "Add a simple check. When keys are equal, don&#39;t print &quot;are duplicates&quot; messages. Most of the hard work is done for you."}, {"owner": {"reputation": 1078, "user_id": 734744, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3a20b00349cbb9c96c21c307a74487a7?s=128&d=identicon&r=PG", "display_name": "Sameer Naik", "link": "https://stackoverflow.com/users/734744/sameer-naik"}, "reply_to_user": {"reputation": 69, "user_id": 3626985, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DbvBt.jpg?s=128&g=1", "display_name": "Analyzer", "link": "https://stackoverflow.com/users/3626985/analyzer"}, "edited": false, "score": 0, "creation_date": 1442387166, "post_id": 32601544, "comment_id": 53055875, "body": "Edited answer. Enjoy!!"}, {"owner": {"reputation": 69, "user_id": 3626985, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DbvBt.jpg?s=128&g=1", "display_name": "Analyzer", "link": "https://stackoverflow.com/users/3626985/analyzer"}, "edited": false, "score": 0, "creation_date": 1442387407, "post_id": 32601544, "comment_id": 53056014, "body": "Thanks. Can we look for more easy approach :) ?"}, {"owner": {"reputation": 1078, "user_id": 734744, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3a20b00349cbb9c96c21c307a74487a7?s=128&d=identicon&r=PG", "display_name": "Sameer Naik", "link": "https://stackoverflow.com/users/734744/sameer-naik"}, "reply_to_user": {"reputation": 69, "user_id": 3626985, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DbvBt.jpg?s=128&g=1", "display_name": "Analyzer", "link": "https://stackoverflow.com/users/3626985/analyzer"}, "edited": false, "score": 0, "creation_date": 1442387771, "post_id": 32601544, "comment_id": 53056168, "body": "This is actually very simple approach. We are interating over hash map and comparing each element with every other element. Its just that perl syntax is making it difficult on eyes. Try to understand the code line by line to learn more about code. You have already saved a lot of time writing it, so spend it in understanding it."}, {"owner": {"reputation": 69, "user_id": 3626985, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DbvBt.jpg?s=128&g=1", "display_name": "Analyzer", "link": "https://stackoverflow.com/users/3626985/analyzer"}, "edited": false, "score": 0, "creation_date": 1442387889, "post_id": 32601544, "comment_id": 53056255, "body": "Thanks for your response. Sameer!  I am new to Perl Programming. Can you kindly have a look at my edited question. Shall your code work with edited one too?"}, {"owner": {"reputation": 69, "user_id": 3626985, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DbvBt.jpg?s=128&g=1", "display_name": "Analyzer", "link": "https://stackoverflow.com/users/3626985/analyzer"}, "edited": false, "score": 0, "creation_date": 1442401207, "post_id": 32601544, "comment_id": 53064455, "body": "Sameer! Can we avoid counting duplication for empty arrays in above code?"}, {"owner": {"reputation": 69, "user_id": 3626985, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DbvBt.jpg?s=128&g=1", "display_name": "Analyzer", "link": "https://stackoverflow.com/users/3626985/analyzer"}, "edited": false, "score": 0, "creation_date": 1442419869, "post_id": 32601544, "comment_id": 53077993, "body": "Sameer! I did it by putting check in compArray  subroutine. Can you update the code for finding intersection among the arrays, I am making update into the test code ?"}], "tags": [], "owner": {"reputation": 1078, "user_id": 734744, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3a20b00349cbb9c96c21c307a74487a7?s=128&d=identicon&r=PG", "display_name": "Sameer Naik", "link": "https://stackoverflow.com/users/734744/sameer-naik"}, "is_accepted": false, "score": 0, "last_activity_date": 1442387153, "last_edit_date": 1442387153, "creation_date": 1442386227, "answer_id": 32601544, "question_id": 32600831, "link": "https://stackoverflow.com/questions/32600831/find-duplicate-arrays-and-intersection-of-arrays-in-array-of-hash-values-using-p/32601544#32601544", "title": "Find Duplicate arrays and Intersection of arrays in array of hash values using Perl", "body": "<pre><code>use strict;\nuse warnings;\n\nmy @test1= (\"Bob\", \"Flip\", \"David\");\nmy @test2= (\"Kevin\", \"John\", \"Michel\");\nmy @test3= (\"Bob\", \"Flip\", \"David\");\nmy @test4= (\"Haidi\", \"Grook\", \"Franky\");\n\nmy %arrayHash= ( \"1\" =&gt; \\@test1,\n             \"2\"=&gt; \\@test2,\n             \"3\" =&gt; \\@test3,\n             \"4\"=&gt; \\@test4,\n\n            );\n\nsub arrayCmp {\n        my @array1 = @{$_[0]};\n        my @array2 = @{$_[1]};\n\n        return 0 if ($#array1 != $#array2);\n\n        @array1 = sort(@array1);\n        @array2 = sort(@array2);\n\n        for (my $ii = 0; $ii &lt;= $#array1; $ii++) {\n                if ($array1[$ii] ne $array2[$ii]) {\n                        #print \"$array1[$ii] != $array2[$ii]\\n\";\n                        return 0;\n                }\n        }\n\n        return 1;\n}\n\n\nmy @keyArr = sort(keys(%arrayHash));\nfor(my $i = 0; $i &lt;= $#keyArr - 1; $i++) {\n\n        my @arr1 = @{$arrayHash{$keyArr[$i]}};\n\n        for(my $j = 1; $j &lt;= $#keyArr; $j++) {\n                my @arr2 = @{$arrayHash{$keyArr[$j]}};\n                if ($keyArr[$i] ne $keyArr[$j] &amp;&amp; arrayCmp(\\@arr1, \\@arr2) == 1) {\n                        print \"$keyArr[$i] and $keyArr[$j] are duplicates\\n\";\n                }\n        }\n}\n</code></pre>\n\n<p>Outputs this</p>\n\n<pre><code>1 and 3 are duplicates\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 3626985, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DbvBt.jpg?s=128&g=1", "display_name": "Analyzer", "link": "https://stackoverflow.com/users/3626985/analyzer"}, "edited": false, "score": 0, "creation_date": 1442485002, "post_id": 32604075, "comment_id": 53105197, "body": "Your code is quite understandable. However, it does not produce desired output. What it outputs is only those keys which are being duplicated. How can we edit the code to give out put keys which are duplicating with other keys. Thanks"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1442403603, "last_edit_date": 1442403603, "creation_date": 1442394129, "answer_id": 32604075, "question_id": 32600831, "link": "https://stackoverflow.com/questions/32600831/find-duplicate-arrays-and-intersection-of-arrays-in-array-of-hash-values-using-p/32604075#32604075", "title": "Find Duplicate arrays and Intersection of arrays in array of hash values using Perl", "body": "<p>So there's a set of steps here:</p>\n\n<ul>\n<li><p>compare your arrays one to the other. This is harder because you're doing multi-element arrays. You can't directly test equivalence, because you need to compare <em>members</em>. </p></li>\n<li><p>Filter one from the other. </p></li>\n</ul>\n\n<p>So first of all:</p>\n\n<p>(Edit: Coping with empty)</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy @test1 = ( \"Bob\",   \"Flip\",  \"David\" );\nmy @test2 = ( \"Kevin\", \"John\",  \"Michel\" );\nmy @test3 = ( \"Bob\",   \"Flip\",  \"David\" );\nmy @test4 = ( \"Haidi\", \"Grook\", \"Franky\" );\nmy @test5 = ();\nmy @test6 = ();\n\nmy %arrayHash = (\n    \"ppl1\" =&gt; [@test1],\n    \"ppl2\" =&gt; [@test2],\n    \"ppl3\" =&gt; [@test3],\n    \"ppl4\" =&gt; [@test4],\n    \"ppl5\" =&gt; [@test5],\n    \"ppl6\" =&gt; [@test6],\n\n);\n\nmy %seen;\n\n#cycle through the hash\nforeach my $key ( sort keys %arrayHash ) {\n\n    #skip empty:\n    next unless @{ $arrayHash{$key} };\n\n    #turn your array into a string - ':' separated\n    my $value_str = join( \":\", sort @{ $arrayHash{$key} } );\n\n    #check if that 'value string' has already been seen\n    if ( $seen{$value_str} ) {\n        print \"$key is a duplicate of $seen{$value_str}\\n\";\n    }\n    $seen{$value_str} = $key;\n}\n</code></pre>\n\n<p>Now note - this is a <em>bit</em> of a cheat - it sticks together your arrays with <code>:</code>, which doesn't work in every scenario. </p>\n\n<p><code>(\"Bob:\", \"Flip\")</code> and <code>(\"Bob\", \":Flip\")</code> will end up the same. </p>\n\n<p>It will also only print your most recent duplicate if you have multiple.</p>\n\n<p>You can work around this - if you want - by pushing multiple values into the <code>%seen</code> hash. </p>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 3626985, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DbvBt.jpg?s=128&g=1", "display_name": "Analyzer", "link": "https://stackoverflow.com/users/3626985/analyzer"}, "edited": false, "score": 0, "creation_date": 1442403068, "post_id": 32605395, "comment_id": 53065632, "body": "Is it possible avoid duplication detection for empty arrays. Trouble is, in my actual data, there are some cases of empty arrays as well. However, your code also detects their duplication as valid, which is not desired!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1442403557, "post_id": 32605395, "comment_id": 53065945, "body": "But they literally <i>are</i> duplicates, by content."}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1442403799, "post_id": 32605395, "comment_id": 53066118, "body": "@Sobrique indeed. @Analyzer you can just add condition to check if array is defined like <code>if(defined @{$arrayHash{$key1}}){...}</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1442403862, "post_id": 32605395, "comment_id": 53066162, "body": "Array in a scalar context returns number of elements. So <code>next unless @{$arrayHash{$key1}}</code> will probably do the trick too."}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1442404090, "post_id": 32605395, "comment_id": 53066321, "body": "Thanks @Sobrique that is simpler approach."}, {"owner": {"reputation": 69, "user_id": 3626985, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DbvBt.jpg?s=128&g=1", "display_name": "Analyzer", "link": "https://stackoverflow.com/users/3626985/analyzer"}, "edited": false, "score": 0, "creation_date": 1442405669, "post_id": 32605395, "comment_id": 53067447, "body": "Thanks. Shall respond after testing."}, {"owner": {"reputation": 69, "user_id": 3626985, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DbvBt.jpg?s=128&g=1", "display_name": "Analyzer", "link": "https://stackoverflow.com/users/3626985/analyzer"}, "edited": false, "score": 0, "creation_date": 1442405775, "post_id": 32605395, "comment_id": 53067536, "body": "@Arunesh Smart match operator is used to match the strings enclosed in &quot; &quot;. How about using &quot;eq&quot; in the context of strings placed with &quot; &quot; as array elements?"}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "reply_to_user": {"reputation": 69, "user_id": 3626985, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DbvBt.jpg?s=128&g=1", "display_name": "Analyzer", "link": "https://stackoverflow.com/users/3626985/analyzer"}, "edited": false, "score": 0, "creation_date": 1442406294, "post_id": 32605395, "comment_id": 53067945, "body": "@Analyzer could you be more specific . Sorry, I didn&#39;t get you?"}, {"owner": {"reputation": 69, "user_id": 3626985, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DbvBt.jpg?s=128&g=1", "display_name": "Analyzer", "link": "https://stackoverflow.com/users/3626985/analyzer"}, "edited": false, "score": 0, "creation_date": 1442419032, "post_id": 32605395, "comment_id": 53077456, "body": "@AruneshSingh Seems, it is working for me some how. Can you make little more contribution and write the code for finding intersection (Common elements ) among all the arrays of hash?"}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "reply_to_user": {"reputation": 69, "user_id": 3626985, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DbvBt.jpg?s=128&g=1", "display_name": "Analyzer", "link": "https://stackoverflow.com/users/3626985/analyzer"}, "edited": false, "score": 0, "creation_date": 1442419849, "post_id": 32605395, "comment_id": 53077978, "body": "@Analyzer that is a different question. Please ask it separately."}], "tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": true, "score": 0, "last_activity_date": 1442403984, "last_edit_date": 1442403984, "creation_date": 1442397581, "answer_id": 32605395, "question_id": 32600831, "link": "https://stackoverflow.com/questions/32600831/find-duplicate-arrays-and-intersection-of-arrays-in-array-of-hash-values-using-p/32605395#32605395", "title": "Find Duplicate arrays and Intersection of arrays in array of hash values using Perl", "body": "<p>You need to check two arrays for equality for the hash keys.For that you can use <a href=\"http://perldoc.perl.org/perlop.html#Smartmatch-Operator\" rel=\"nofollow\">smart match operator</a> for comparison.</p>\n\n<p>Next you can use <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow\"><code>grep</code></a> to filter-out values which are not duplicates and a hash to keep track of values which are already checked.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @test1= (\"Bob\", \"Flip\", \"David\");\nmy @test2= (\"Kevin\", \"John\", \"Michel\");\nmy @test3= (\"Bob\", \"Flip\", \"David\");\nmy @test4= (\"Haidi\", \"Grook\", \"Franky\");\nmy @test5= (\"Bob\", \"Flip\", \"David\");\nmy @test6= (\"Kevin\", \"John\", \"Michel\");\nmy @test7= (\"Haidi\", \"Grook\", \"Frank4\");\n\n\nmy %arrayHash= ( \"ppl1\" =&gt; [@test1],\n                 \"ppl2\"=&gt; [@test2],\n                 \"ppl3\" =&gt; [@test3],\n                 \"ppl4\"=&gt; [@test4],\n                 \"ppl5\"=&gt; [@test5],\n                 \"ppl6\"=&gt; [@test6],\n                 \"ppl7\"=&gt; [@test7]\n                );\n\nmy %seen;\nforeach my $key1 (sort keys %arrayHash){\n   next unless @{$arrayHash{$key1}};\n   my @keys;\n   if(@keys=grep{(@{$arrayHash{$key1}} ~~ @{$arrayHash{$_}} ) &amp;&amp; ($_ ne $key1) &amp;&amp; (not exists $seen{$key1})}sort keys %arrayHash){\n           unshift(@keys,$key1);\n           print \"@keys are duplicates \\n\";\n           @seen{@keys}=@keys;\n      }\n}\n</code></pre>\n\n<p><strong>output:</strong></p>\n\n<pre><code>ppl1 ppl3 ppl5 are duplicates \nppl2 ppl6 are duplicates\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 3626985, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DbvBt.jpg?s=128&g=1", "display_name": "Analyzer", "link": "https://stackoverflow.com/users/3626985/analyzer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 32605395, "answer_count": 3, "score": 2, "last_activity_date": 1442419928, "creation_date": 1442383192, "last_edit_date": 1442419928, "question_id": 32600831, "link": "https://stackoverflow.com/questions/32600831/find-duplicate-arrays-and-intersection-of-arrays-in-array-of-hash-values-using-p", "title": "Find Duplicate arrays and Intersection of arrays in array of hash values using Perl", "body": "<p>I want to find duplicate Arrays from hash that contains arrays. Point is, I am trying to develop sets and storing them into hash table of Perl. After, I need to extract \n1. those arrays which are <strong>completely</strong> duplicate(Having all values same).\n2. Intersection of arrays </p>\n\n<pre><code>Source code is given as under:  \n\n\nuse strict;\nuse warnings;\n\nmy @test1= (\"Bob\", \"Flip\", \"David\");\nmy @test2= (\"Bob\", \"Kevin\", \"John\", \"Michel\");\nmy @test3= (\"Bob\", \"Flip\", \"David\");\nmy @test4= (\"Haidi\", \"Bob\",  \"Grook\", \"Franky\");\nmy @test5= ();\nmy @test6=();\n\nmy %arrayHash= ( \"ppl1\" =&gt; [@test1],\n             \"ppl2\"=&gt; [@test2], \n             \"ppl3\" =&gt; [@test3],\n             \"ppl4\"=&gt; [@test4], \n             \"ppl5\"=&gt; [@test5],\n             \"ppl6\"=&gt; [@test6],  \n\n            );\n\n\nRequired Output:  ppl1 and   ppl3 have duplicate lists\nIntersection of arrays= Bob\n</code></pre>\n\n<p>Kindly note that duplication of empty arrays is not desired!</p>\n"}, {"tags": ["perl", "ssh", "cpan", "openssh"], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 2152189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c68fbeb02fd513fd6f3fe5faaed57ce?s=128&d=identicon&r=PG", "display_name": "user2152189", "link": "https://stackoverflow.com/users/2152189/user2152189"}, "is_accepted": false, "score": -1, "last_activity_date": 1442402374, "creation_date": 1442402374, "answer_id": 32607142, "question_id": 32600662, "link": "https://stackoverflow.com/questions/32600662/how-to-set-gssapiauthentication-and-gssapidelegatecredentials-attributes-through/32607142#32607142", "title": "How to set GSSAPIAuthentication and GSSAPIDelegateCredentials attributes through CPAN module Net-OpenSSH", "body": "<p>Just add -F => 'somepath/config' under master_opts:</p>\n\n<p>master_opts => [-F => 'somepath/config']</p>\n\n<p>and another line like this:</p>\n\n<p>$self->{ssh}->{_ssh_opts} = ['-F', 'somepath/config'];'</p>\n"}], "owner": {"reputation": 9, "user_id": 2152189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c68fbeb02fd513fd6f3fe5faaed57ce?s=128&d=identicon&r=PG", "display_name": "user2152189", "link": "https://stackoverflow.com/users/2152189/user2152189"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 994, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1442402374, "creation_date": 1442382444, "last_edit_date": 1442384215, "question_id": 32600662, "link": "https://stackoverflow.com/questions/32600662/how-to-set-gssapiauthentication-and-gssapidelegatecredentials-attributes-through", "title": "How to set GSSAPIAuthentication and GSSAPIDelegateCredentials attributes through CPAN module Net-OpenSSH", "body": "<p>I am trying to create a ssh handle through module <a href=\"http://search.cpan.org/~salva/Net-OpenSSH-0.62/\" rel=\"nofollow\">http://search.cpan.org/~salva/Net-OpenSSH-0.62/</a>. I tried setting <code>GSSAPIAuthentication</code> and <code>GSSAPIDelegateCredentials</code> to \"No\", but these setting don't take effect if my <code>.ssh/config</code> is like this:</p>\n\n<pre><code>$ cat myusername/.ssh/config \n\nHost *\n    CheckHostIP no\n    StrictHostKeyChecking no\n    HashKnownHosts no\n    GSSAPIAuthentication yes\n    GSSAPIDelegateCredentials no\n    UserKnownHostsFile /dev/null\n    LogLevel ERROR\n</code></pre>\n\n<p>This is how I try to set <code>GSSAPIAuthentication</code> and <code>GSSAPIDelegateCredentials</code>. Also is there a way to give <code>-F</code> option in open ssh constructor so that by default ssh uses some other config file rather than using the one user my user name?</p>\n\n<pre><code>$self-&gt;{ssh} = Net::OpenSSH-&gt;new($host,\nuser =&gt; $username,\npasswd =&gt; $password,\ntimeout =&gt; $timeout,\ndefault_stderr_discard =&gt; 1,\nkill_ssh_on_timeout =&gt; 1,\nmaster_opts =&gt; [-o =&gt; \"UserKnownHostsFile=/dev/null\",\n    -o =&gt; \"GSSAPIAuthentication=no\", \n    -o =&gt; \"GSSAPIDelegateCredentials=no\",\n    -o =&gt; \"StrictHostKeyChecking=no\"]);\n</code></pre>\n"}, {"tags": ["html", "perl", "dom", "web-scraping", "scrape"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1442367855, "post_id": 32598060, "comment_id": 53049704, "body": "I am always suspicious of questions that ask about web scraping. Either it is your own data that, because of some calamity, your only remaining copy is formatted in HTML, or it is someone else&#39;s data that they have not made available to you either directly or through an API. Either of those casts clouds over your intentions, and I really don&#39;t want to encourage you along this road unless you explain why you are doing it"}, {"owner": {"reputation": 1330, "user_id": 1768233, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fbdf57a16515518ce0471cb0e75fce29?s=128&d=identicon&r=PG", "display_name": "user1768233", "link": "https://stackoverflow.com/users/1768233/user1768233"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1442368502, "post_id": 32598060, "comment_id": 53049861, "body": "Hi, I understand your concerns. This is an old internal Intranet site of ours that I am doing some migration work on. We&#39;ve had an issue with being locked out from the database and webserver (Angry ex employees after some &#39;re-structuring&#39; ) so I thought I would try to scrape the data out.  There is nothing unethical or illegal happening, I am just trying to assist our company as they are struggling to get access to the DB. I don&#39;t really have a way to prove this obviously."}, {"owner": {"reputation": 22785, "user_id": 3215948, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mRU0y.jpg?s=128&g=1", "display_name": "Racil Hilan", "link": "https://stackoverflow.com/users/3215948/racil-hilan"}, "edited": false, "score": 0, "creation_date": 1442396490, "post_id": 32598060, "comment_id": 53061443, "body": "Yeah, there is no way to prove it, but the company can legally sue the &quot;Angry ex employees&quot; and force them to give back access info plus pay for the damage. If the database is very small and not important, then scraping the data out is OK, but that&#39;s rarely the case. In most cases, the database has several tables with relationships and that&#39;s not easy to scrape out."}], "answers": [{"comments": [{"owner": {"reputation": 1330, "user_id": 1768233, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fbdf57a16515518ce0471cb0e75fce29?s=128&d=identicon&r=PG", "display_name": "user1768233", "link": "https://stackoverflow.com/users/1768233/user1768233"}, "edited": false, "score": 0, "creation_date": 1442376049, "post_id": 32598713, "comment_id": 53051625, "body": "I believe we are only getting one test,description pair because the first &#39;process&#39; line is matching on the DIV which means the inner scraper just processes the one DIV, if you use //div/p on the first process then change the inner scrappers processes to match on //p/strong and //p/br/etc... then it works for the first example but not the second. I have something that is kind of working now, but I just need to post process the arrays to get it into the format I want.  I think I have it working and will put my answer in below."}], "tags": [], "owner": {"reputation": 158, "user_id": 5332111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577f1d8ac062969e5493abec7a5edf4c?s=128&d=identicon&r=PG&f=1", "display_name": "DBagBaggerWithSwagger", "link": "https://stackoverflow.com/users/5332111/dbagbaggerwithswagger"}, "is_accepted": false, "score": 1, "last_activity_date": 1442370216, "creation_date": 1442370216, "answer_id": 32598713, "question_id": 32598060, "link": "https://stackoverflow.com/questions/32598060/how-do-i-scrape-the-following-using-webscraper/32598713#32598713", "title": "How do I scrape the following using Web::Scraper?", "body": "<p>I've never used WebScraper, but its behavior seems broken or just odd. </p>\n\n<p>The following XPath expressions more or less should work (small adjustment is needed) for both cases:</p>\n\n<pre><code>//div//strong/text()\n//div//br/following-sibling::text()\n</code></pre>\n\n<p>When plugging these into <code>xmllint</code> (libxml2):</p>\n\n<pre><code>tmp &gt;xmllint --html --shell a.html\n/ &gt; cat /\n -------\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\"&gt;\n&lt;html&gt;&lt;body&gt;\n&lt;div&gt;\n  &lt;p&gt;\n    &lt;strong&gt;TITLE1&lt;/strong&gt;\n    &lt;br&gt;\n    DESCRIPTION1\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;strong&gt;TITLE2&lt;/strong&gt;\n    &lt;br&gt;\n    DESCRIPTION2\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;strong&gt;TITLE3&lt;/strong&gt;\n    &lt;br&gt;\n    DESCRIPTION3\n  &lt;/p&gt;\n&lt;/div&gt;\n&lt;/body&gt;&lt;/html&gt;\n\n/ &gt; xpath //div//strong/text()\nObject is a Node Set :\nSet contains 3 nodes:\n1  TEXT\n    content=TITLE1\n2  TEXT\n    content=TITLE2\n3  TEXT\n    content=TITLE3\n/ &gt; xpath //div//br/following-sibling::text()\nObject is a Node Set :\nSet contains 3 nodes:\n1  TEXT\n    content=     DESCRIPTION1\n2  TEXT\n    content=     DESCRIPTION2\n3  TEXT\n    content=     DESCRIPTION3\n\n/ &gt; load b.html\n/ &gt; cat /\n -------\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\"&gt;\n&lt;html&gt;&lt;body&gt;&lt;div&gt;\n    &lt;p&gt;\n    &lt;strong&gt;TITLE1&lt;/strong&gt;\n    &lt;br&gt;\n    DESCRIPTION1\n    &lt;strong&gt;TITLE2&lt;/strong&gt;\n    &lt;br&gt;\n    DESCRIPTION2\n    &lt;strong&gt;TITLE3&lt;/strong&gt;\n    &lt;br&gt;\n    DESCRIPTION3\n    &lt;/p&gt;\n&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;\n\n/ &gt; xpath //div//strong/text()\nObject is a Node Set :\nSet contains 3 nodes:\n1  TEXT\n    content=TITLE1\n2  TEXT\n    content=TITLE2\n3  TEXT\n    content=TITLE3\n/ &gt; xpath //div//br/following-sibling::text()\nObject is a Node Set :\nSet contains 5 nodes:\n1  TEXT\n    content=  DESCRIPTION1\n2  TEXT\n    content=\n3  TEXT\n    content=  DESCRIPTION2\n4  TEXT\n    content=\n5  TEXT\n    content=  DESCRIPTION3\n</code></pre>\n\n<p>When you plug various versions of these into WebScraper, they don't work. </p>\n\n<pre><code> process '//div', 'test[]' =&gt; scraper {\n    process '//strong', 'name' =&gt; 'TEXT';\n    process '//br/following-sibling::text()', 'desc' =&gt; 'TEXT';\n  };\n</code></pre>\n\n<p>Results in:</p>\n\n<pre><code>/tmp &gt;for f in a b; do perl bs.pl file:///tmp/$f.html; done\n{ test =&gt; [{ desc =&gt; \" DESCRIPTION1 \", name =&gt; \"TITLE1\" }] }\n{ test =&gt; [{ desc =&gt; \" DESCRIPTION1 \", name =&gt; \"TITLE1\" }] }\n</code></pre>\n\n<hr>\n\n<pre><code>process '//div', 'test[]' =&gt; scraper {\n  process '//div//strong', 'name' =&gt; 'TEXT';\n  process '//div//br/following-sibling::text()', 'desc' =&gt; 'TEXT';\n};\n</code></pre>\n\n<p>Results in:</p>\n\n<pre><code>/tmp &gt;for f in a b; do perl bs.pl file:///tmp/$f.html; done\n{ test =&gt; [{ desc =&gt; \" DESCRIPTION1 \", name =&gt; \"TITLE1\" }] }\n{ test =&gt; [{ desc =&gt; \" DESCRIPTION1 \", name =&gt; \"TITLE1\" }] }\n</code></pre>\n\n<hr>\n\n<p>Even the most basic case:</p>\n\n<pre><code>  process 'div', 'test[]' =&gt; scraper {\n    process 'strong', 'name' =&gt; 'TEXT';\n  };\n</code></pre>\n\n<p>Results in:</p>\n\n<pre><code>/tmp &gt;for f in a b; do perl bs.pl file:///tmp/$f.html; done\n{ test =&gt; [{ name =&gt; \"TITLE1\" }] }\n{ test =&gt; [{ name =&gt; \"TITLE1\" }] }\n</code></pre>\n\n<p>Even when you tell it to use libxml2 via <code>use Web::Scraper::LibXML</code> -nothing!</p>\n\n<p>To make sure I wasn't going insane I tried it using Ruby's Nokogiri:</p>\n\n<pre><code> /tmp &gt;for f in a b; do ruby -rnokogiri -rpp -e'pp Nokogiri::HTML(File.read(ARGV[0])).css(\"div p strong\").map &amp;:text' $f.html; done\n[\"TITLE1\", \"TITLE2\", \"TITLE3\"]\n[\"TITLE1\", \"TITLE2\", \"TITLE3\"]\n</code></pre>\n\n<p>What am <em>I</em> missing.</p>\n"}, {"tags": [], "owner": {"reputation": 1330, "user_id": 1768233, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fbdf57a16515518ce0471cb0e75fce29?s=128&d=identicon&r=PG", "display_name": "user1768233", "link": "https://stackoverflow.com/users/1768233/user1768233"}, "is_accepted": true, "score": 0, "last_activity_date": 1442376817, "creation_date": 1442376817, "answer_id": 32599662, "question_id": 32598060, "link": "https://stackoverflow.com/questions/32598060/how-do-i-scrape-the-following-using-webscraper/32599662#32599662", "title": "How do I scrape the following using Web::Scraper?", "body": "<p>I think I worked it out. I'm not sure if its the best way but it seems to handle both cases.</p>\n\n<pre><code>         my $test = scraper {\n         process '//div', 'test' =&gt; scraper {\n            process '//div//strong//text()', 'name[]' =&gt; 'TEXT';\n            process '//p/text()','desc[]' =&gt; ['TEXT', sub { s/^\\s+|\\s+$//g} ];\n\n         }\n      };\n\n\n\n    my $res = $test-&gt;scrape(\\$html);\n\n    #get the names and descriptions \n    my @keys = @{$res-&gt;{test}-&gt;{name}};\n    my @values = @{$res-&gt;{test}-&gt;{desc}};\n\n    #merge two arrays into hash\n    my %hash;   \n    @hash{@keys} = @values;\n</code></pre>\n"}], "owner": {"reputation": 1330, "user_id": 1768233, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fbdf57a16515518ce0471cb0e75fce29?s=128&d=identicon&r=PG", "display_name": "user1768233", "link": "https://stackoverflow.com/users/1768233/user1768233"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 32599662, "answer_count": 2, "score": 0, "last_activity_date": 1444114345, "creation_date": 1442365219, "last_edit_date": 1495542148, "question_id": 32598060, "link": "https://stackoverflow.com/questions/32598060/how-do-i-scrape-the-following-using-webscraper", "title": "How do I scrape the following using Web::Scraper?", "body": "<p>This question is different from but related to <a href=\"https://stackoverflow.com/questions/32580960/how-to-parse-this-html-with-webscraper\">How to Parse this HTML with Web::Scraper?</a>.</p>\n\n<p>I have to scrape a page using <a href=\"https://metacpan.org/pod/Web::Scraper\" rel=\"nofollow noreferrer\">Web::Scraper</a> where the HTML can change slightly. Sometimes it can be </p>\n\n<pre><code>&lt;div&gt;\n  &lt;p&gt;\n    &lt;strong&gt;TITLE1&lt;/strong&gt;\n    &lt;br&gt;\n    DESCRIPTION1\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;strong&gt;TITLE2&lt;/strong&gt;\n    &lt;br&gt;\n    DESCRIPTION2\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;strong&gt;TITLE3&lt;/strong&gt;\n    &lt;br&gt;\n    DESCRIPTION3\n  &lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Which I am extracting with <code>Web::Scraper</code> with the following code</p>\n\n<pre><code>my $test = scraper {\n    process 'div p', 'test[]' =&gt; scraper {\n        process 'p strong', 'name' =&gt; 'TEXT';\n        process '//p/text()', 'desc' =&gt; [ 'TEXT', sub { s/^\\s+|\\s+$//g } ];\n    };\n};\n</code></pre>\n\n<p>But sometimes it contains the following HTML instead (notice that each title and description is no longer separated by <code>&lt;p&gt;</code>).</p>\n\n<pre><code>&lt;div&gt;\n  &lt;p&gt;\n    &lt;strong&gt;TITLE1&lt;/strong&gt;\n    &lt;br&gt;\n    DESCRIPTION1\n    &lt;strong&gt;TITLE2&lt;/strong&gt;\n    &lt;br&gt;\n    DESCRIPTION2\n    &lt;strong&gt;TITLE3&lt;/strong&gt;\n    &lt;br&gt;\n    DESCRIPTION3\n  &lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>How can I scrape the HTML above into </p>\n\n<pre><code>test =&gt; [\n  { desc =&gt; \"DESCRIPTION1 \", name =&gt; \"TITLE1\" },\n  { desc =&gt; \"DESCRIPTION2 \", name =&gt; \"TITLE2\" },\n  { desc =&gt; \"DESCRIPTION3 \", name =&gt; \"TITLE3\" },\n]\n</code></pre>\n\n<p>I have tried modifying the code above but I cannot work out what HTML to use to 'split' the unique title and description pairs.</p>\n"}, {"tags": ["perl", "sockets", "ipc"], "comments": [{"owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 1, "creation_date": 1442389097, "post_id": 32596159, "comment_id": 53056967, "body": "Any particular reason you are manually creating all this work using the lowlevel machinery of <code>IO::Select</code> etc... rather than using one of the higher-level wrappings of it?"}, {"owner": {"reputation": 371, "user_id": 1655942, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/420b05f798587712130e5ed33a3abde0?s=128&d=identicon&r=PG", "display_name": "arielCo", "link": "https://stackoverflow.com/users/1655942/arielco"}, "reply_to_user": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 0, "creation_date": 1442411744, "post_id": 32596159, "comment_id": 53072116, "body": "@LeoNerd, I want a small portable script that doesn&#39;t use extra modules in a <code>$HOME&#47;lib&#47;perl5</code>; in fact, that&#39;s the whole code. Anyway, what&#39;s your preferred wrapper?"}, {"owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 0, "creation_date": 1442504720, "post_id": 32596159, "comment_id": 53117816, "body": "if you want something portable, you can fatpack the required modules together into a single file. That way you still get to use justabout anything from CPAN, but know it&#39;ll all be bundled into one file."}], "answers": [{"comments": [{"owner": {"reputation": 371, "user_id": 1655942, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/420b05f798587712130e5ed33a3abde0?s=128&d=identicon&r=PG", "display_name": "arielCo", "link": "https://stackoverflow.com/users/1655942/arielco"}, "edited": false, "score": 0, "creation_date": 1442359337, "post_id": 32596505, "comment_id": 53047647, "body": "You&#39;re right, I forgot about wicked, tricksy <code>EINTR</code> - thanks a lot! What kind of helpful shenanigans is the <code>IGNORE</code> handler pulling here?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1442368697, "post_id": 32596505, "comment_id": 53049903, "body": "<code>IGNORE</code> will trap the signal at the OS level and perl will not be aware of it."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1442368228, "last_edit_date": 1442368228, "creation_date": 1442354937, "answer_id": 32596505, "question_id": 32596159, "link": "https://stackoverflow.com/questions/32596159/iosocketaccept-works-only-once-if-children-reaped-manually/32596505#32596505", "title": "IO::Socket::accept works only once if children reaped manually", "body": "<p>When your program receives the <code>SIGCHLD</code> signal, it is possible for the system call underlying <code>$server-&gt;accept()</code> to get interrupted. In that case, <code>accept()</code> will return <code>undef</code> and <code>$!</code> and <code>$!{EINTR}</code> will be set.</p>\n\n<p>A little more defensive programming is called for in this case. Here's one way:</p>\n\n<pre><code>sub robust_accept {\n    my $server = shift;\n    for (;;) {\n        my $client = $server-&gt;accept();\n        return $client if $client;\n        warn \"syserror: $!\" if !$!{EINTR};\n    }\n}\n\nwhile (my $client = robust_accept($server)) {\n   ...\n}\n</code></pre>\n"}], "owner": {"reputation": 371, "user_id": 1655942, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/420b05f798587712130e5ed33a3abde0?s=128&d=identicon&r=PG", "display_name": "arielCo", "link": "https://stackoverflow.com/users/1655942/arielco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 32596505, "answer_count": 1, "score": 2, "last_activity_date": 1442368228, "creation_date": 1442353326, "question_id": 32596159, "link": "https://stackoverflow.com/questions/32596159/iosocketaccept-works-only-once-if-children-reaped-manually", "title": "IO::Socket::accept works only once if children reaped manually", "body": "<p>In the simple echo server below, <code>accept()</code> returns <code>undef</code> on the second call if I reap children with my own <code>SIGCHLD</code> handler instead of letting Perl do it:</p>\n\n<pre><code>#!/opt/perl5/bin/perl\n\nuse IO::Select;\nuse IO::Socket;\nuse POSIX qw(WNOHANG);\nuse strict;\nuse warnings;\n\n$|=1;\n\nuse constant LISTEN_PORT =&gt; 9998;\n\nmy $server = IO::Socket::INET-&gt;new (\n                 Proto     =&gt; 'tcp',\n                 LocalPort =&gt; LISTEN_PORT,\n                 Listen    =&gt; SOMAXCONN,\n                 Reuse     =&gt; 1);\n\n(! $server) &amp;&amp; die \"Could not setup server - $!\\n\";\n$server-&gt;autoflush(1);\n\n\nsub reaper {\n    while ((my $dead_child = waitpid(-1, WNOHANG)) &gt; 0) {\n        print \"Reaped PID $dead_child\\n\";\n    }\n    $SIG{CHLD} = \\&amp;reaper;\n};\n$SIG{CHLD} = \\&amp;reaper;    ## THIS BLOWS\n# $SIG{CHLD} = 'IGNORE';  ## THIS WORKS\n\nwhile (my $client = $server-&gt;accept()) {\n   my $childPid;\n   if (! defined($childPid = fork())) {\n      die \"Could not fork: $!\\n\";\n   }\n   if ($childPid == 0) {\n      print $client $_ while (&lt;$client&gt;);\n      $client-&gt;shutdown(1);\n      exit();\n   } else {\n       print \"Spawned PID $childPid\\n\";\n   }\n   close($client);\n\n}\nprint \"bye\\n\";\n</code></pre>\n\n<p>In other words:</p>\n\n<pre><code>$ ./echoserver.pl\nSpawned PID 20953\nReaped PID 20953\nbye\n</code></pre>\n"}, {"tags": ["arrays", "perl", "subroutine"], "comments": [{"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "edited": false, "score": 9, "creation_date": 1442351419, "post_id": 32595581, "comment_id": 53044914, "body": "Not related to your main point, but don&#39;t use <code>&amp;</code> to call subroutines in Perl.  That&#39;s an old and obsolete practice (except in certain advanced and obscure instances you don&#39;t need to worry about yet). Just use <code>hail(8)</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 0, "creation_date": 1442419415, "post_id": 32595581, "comment_id": 53077707, "body": "Another point not related to your question: why return an array as a string? <code>return &quot;@seq&quot;</code> ?"}, {"owner": {"reputation": 71, "user_id": 5339687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30cbdaecc6f82cdb9854bd0f74263283?s=128&d=identicon&r=PG&f=1", "display_name": "frankenstein724", "link": "https://stackoverflow.com/users/5339687/frankenstein724"}, "edited": false, "score": 0, "creation_date": 1442516267, "post_id": 32595581, "comment_id": 53124511, "body": "@Arkadiy Because I need to reread ch. 3 of Learning Perl. I just know that <code>@seq</code> and <code>&quot;@seq&quot;</code> produce two different things, and <code>&quot;@seq&quot;</code> was working for what I was trying at the time.      There&#39;s another part of the exercise where I do need the number of elements in a given sequence, and <code>return @seq</code> is working beautifully for that, now I&#39;m just working back from that to actually display the sequence."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1442371642, "post_id": 32595686, "comment_id": 53050565, "body": "Simpler: <code>sub hail { hail_recursive([], @_) }</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1442417085, "post_id": 32595686, "comment_id": 53076170, "body": "While the post is light on details, this is a very good approach as it makes the <code>hailRecursive</code> tail-recursive. Some languages can optimize this type of recursion away automatically in such cases (to speed things up and save memory), but unfortunately not Perl. OTOH, it makes it easy to manually remove the recursion manually."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "is_accepted": false, "score": 0, "last_activity_date": 1442351394, "creation_date": 1442351394, "answer_id": 32595686, "question_id": 32595581, "link": "https://stackoverflow.com/questions/32595581/subroutine-recursion-in-perl/32595686#32595686", "title": "Subroutine recursion in Perl", "body": "<p>Not sure about perl, but in other languages I'd do</p>\n\n<pre><code>sub hail {\n    my @seq;\n    return hailRecursive(\\@seq, $_[0])\n}\n</code></pre>\n\n<p>And then implement hailRecursive in terms of array ref and $n</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 0, "creation_date": 1442353053, "post_id": 32595897, "comment_id": 53045635, "body": "Could you do that while still returning an array useful in list context, rather than a string? Please?"}], "tags": [], "owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "is_accepted": false, "score": -1, "last_activity_date": 1442352231, "creation_date": 1442352231, "answer_id": 32595897, "question_id": 32595581, "link": "https://stackoverflow.com/questions/32595581/subroutine-recursion-in-perl/32595897#32595897", "title": "Subroutine recursion in Perl", "body": "<p>Change your 2nd else block to this and remove the return statement after that block.</p>\n\n<pre><code>else {\n    push @seq, $n;\n    my $seq = \"@seq\";\n    undef @seq;\n    return $seq;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 1, "creation_date": 1442352908, "post_id": 32595951, "comment_id": 53045567, "body": "Broken encapsulation!"}], "tags": [], "owner": {"reputation": 7, "user_id": 5334922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ef3ae2610382ca3f32a61628cb991e?s=128&d=identicon&r=PG&f=1", "display_name": "ch8rl3s", "link": "https://stackoverflow.com/users/5334922/ch8rl3s"}, "is_accepted": false, "score": -1, "last_activity_date": 1442352470, "creation_date": 1442352470, "answer_id": 32595951, "question_id": 32595581, "link": "https://stackoverflow.com/questions/32595581/subroutine-recursion-in-perl/32595951#32595951", "title": "Subroutine recursion in Perl", "body": "<p>You just need to initialize the array @seq before calling the hail subroutine a second time.  Try this ...</p>\n\n<pre><code>my @seq;\nprint \"\\nThe hailstone sequence for 724 is:\\n\" . &amp;hail(8) . \"\\n\\n\";\n@seq = ();\nprint \"The hailstone sequence for 27 is:\\n\" . &amp;hail(16) . \"\\n\\n\";\n\nmy $n;\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 0, "creation_date": 1442405465, "post_id": 32599218, "comment_id": 53067294, "body": "Comma operator in list context with list flattening! All Hail Perl!"}, {"owner": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "edited": false, "score": 0, "creation_date": 1442406591, "post_id": 32599218, "comment_id": 53068161, "body": "The second sub should be <code>last if $n &lt;2</code> ."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "edited": false, "score": 0, "creation_date": 1442414100, "post_id": 32599218, "comment_id": 53073981, "body": "@JRFerguson, Thanks, fixed. I didn&#39;t test the code because I wrote it on my phone."}, {"owner": {"reputation": 71, "user_id": 5339687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30cbdaecc6f82cdb9854bd0f74263283?s=128&d=identicon&r=PG&f=1", "display_name": "frankenstein724", "link": "https://stackoverflow.com/users/5339687/frankenstein724"}, "edited": false, "score": 0, "creation_date": 1442515858, "post_id": 32599218, "comment_id": 53124285, "body": "Is <code>while (1)</code> more or less &quot;while true&quot;, and once you get to the <code>last</code> there is no longer anything to be true, thus the loop stops? That might be horribly worded on my part, but if that&#39;s not more or less the idea, I&#39;d like a little more explanation on <code>while (1)</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1442517727, "post_id": 32599218, "comment_id": 53125254, "body": "I&#39;ve responded in my answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1442518444, "last_edit_date": 1442518444, "creation_date": 1442373676, "answer_id": 32599218, "question_id": 32595581, "link": "https://stackoverflow.com/questions/32595581/subroutine-recursion-in-perl/32599218#32599218", "title": "Subroutine recursion in Perl", "body": "<p>Should you want a true function &mdash; one that doesn't have any side-effects, and thus none of the problems you are having &mdash; it would look as follows:</p>\n\n<pre><code>sub hail {\n    no warnings qw( recursion );\n    my ($n) = @_;\n    if ($n &gt; 1) {\n        if ($n % 2 == 0) {\n            return $n, hail($n/2);\n        } else {\n            return $n, hail(3*$n + 1);\n        }\n    } else {\n        return $n;\n    }\n}\n</code></pre>\n\n<p>Note that recursion is totally unneeded here, greatly slowing down your program and increasing its memory footprint. The following is such an iterative solution:</p>\n\n<pre><code>sub hail {\n    my ($n) = @_;\n    my @rv;\n    while (1) {\n        push @rv, $n;\n        last if $n &lt;= 1;\n\n        if ($n % 2 == 0) {\n            $n = $n/2;\n        } else {\n            $n = 3*$n + 1;\n        }\n    }\n\n    return @rv;\n}\n</code></pre>\n\n<hr>\n\n<p><em>A question about the above code was asked in the comments. The following is the answer:</em></p>\n\n<p><code>last</code> jumps to the statement after the loop.</p>\n\n<p>Another programmer might have written the following:</p>\n\n<pre><code>push @rv, $n;\nwhile ($n &gt; 1) {\n   ...;\n   push @rv, $n;\n}\n</code></pre>\n\n<p>But that contains duplicated code. Ideally, one seeks to avoid duplicated code. But since</p>\n\n<pre><code>while (EXPR) { STATEMENTS }\n</code></pre>\n\n<p>can be rewritten as</p>\n\n<pre><code>while (1) { last if !EXPR; STATEMENTS }\n</code></pre>\n\n<p>and since</p>\n\n<pre><code>push @rv, $n;\nwhile ($n &gt; 1) {\n   ...;\n   push @rv, $n;\n}\n</code></pre>\n\n<p>can be rewritten as</p>\n\n<pre><code>push @rv, $n;\nwhile (1) {\n   last if $n &lt;= 1;\n   ...;\n   push @rv, $n;\n}\n</code></pre>\n\n<p>we can remove the duplicated code as follows:</p>\n\n<pre><code>while (1) {\n   push @rv, $n;\n   last if $n &lt;= 1;\n   ...;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4565820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tBhF5.jpg?s=128&g=1", "display_name": "lonewolf28", "link": "https://stackoverflow.com/users/4565820/lonewolf28"}, "is_accepted": false, "score": -1, "last_activity_date": 1442376827, "creation_date": 1442376827, "answer_id": 32599664, "question_id": 32595581, "link": "https://stackoverflow.com/questions/32595581/subroutine-recursion-in-perl/32599664#32599664", "title": "Subroutine recursion in Perl", "body": "<p>Similar to what others have posted.</p>\n\n<pre><code>sub hailstone {\n    my $n = shift;\n    return if $n == 1;\n    if ( $n % 2 == 0 ){\n        $n = $n / 2;\n    } else {\n        $n = ( $n * 3 ) + 1;\n    }\n    return $n.\"\\n\",hailstone($n)\n}\n</code></pre>\n\n<p>Upon calling the subroutine:</p>\n\n<pre><code>say hailstone(5);\n16\n8\n4\n2\n1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1442417640, "post_id": 32608711, "comment_id": 53076492, "body": "Problems with this post: 1) This post correct states that recursion is not needed, but doesn&#39;t mention why you&#39;d want to avoid recursion. 2) The post expects the reader to know that &quot;iterative&quot; is commonly used to mean &quot;non-recursive&quot;. 3) This post uses a very complicate means of removing recursion, but doesn&#39;t explain why. 4) This post provides a very complicated iterative solution when much simpler ones exist. 5) It also calls this iterative solution easier. 6) This posts requires a version of Perl the OP is unlikely to have. This is harmful, especially since the OP is still learning Perl."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1442417824, "post_id": 32608711, "comment_id": 53076595, "body": "I get it. You don&#39;t like me and need to rationalize it. Just ignore me and move on."}, {"owner": {"reputation": 71, "user_id": 5339687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30cbdaecc6f82cdb9854bd0f74263283?s=128&d=identicon&r=PG&f=1", "display_name": "frankenstein724", "link": "https://stackoverflow.com/users/5339687/frankenstein724"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1442511519, "post_id": 32608711, "comment_id": 53121781, "body": "@ikegami I take things with a grain of salt, being not only new to Perl, but scripting/computing in general. I actually came in assuming people would give me answers beyond what I really understand doing, so things that you would consider &quot;harmful&quot; don&#39;t bother me.  briandfoy, my supervisor suggested using recursion. What I was working on at first didn&#39;t have it, but I was far enough from a solution anyway that I went ahead and tried doing as she suggested. I very much appreciate your feedback."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 71, "user_id": 5339687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30cbdaecc6f82cdb9854bd0f74263283?s=128&d=identicon&r=PG&f=1", "display_name": "frankenstein724", "link": "https://stackoverflow.com/users/5339687/frankenstein724"}, "edited": false, "score": 0, "creation_date": 1442512140, "post_id": 32608711, "comment_id": 53122124, "body": "@frankenstein724, You&#39;re not the only reader, and even if you were, there&#39;s no reason to provide code that won&#39;t run when it&#39;s just as simple to provide code that does (meaning use <code>@{ $sequence-&gt;{$next} }</code> instead of <code>$sequence-&gt;{$next}-&gt;@*</code>)."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 5, "last_activity_date": 1442420952, "last_edit_date": 1442420952, "creation_date": 1442406687, "answer_id": 32608711, "question_id": 32595581, "link": "https://stackoverflow.com/questions/32595581/subroutine-recursion-in-perl/32608711#32608711", "title": "Subroutine recursion in Perl", "body": "<p>You don't need recursion here. In my Fibonacci example in <a href=\"http://www.masteringperl.org\" rel=\"nofollow\">Mastering Perl</a>, I show that it's easier to do it with iteration where you manage the queue yourself rather than using the call stack to do it.</p>\n\n<p>Here's a general iterative solution that uses an array to keep track of the work left to do:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.10;\n\nsay \"The hailstone sequence for 724 is:\\n\\t\" .\n    join \" \", hail(8);\nsay \"The hailstone sequence for 27 is:\\n\\t\"  .\n    join \" \", hail(16);\n\n\nsub hail {\n    my @queue    = ( $_[0] );\n    my @sequence = ();\n\n    while( my $next = shift @queue ) {\n        if( $next &gt; 1 ) {\n            push @queue, do {\n                if( $next % 2 == 0 ) { $next / 2 }\n                else                 { 3*$next + 1 }\n                };\n            }\n\n        push @sequence, $next;\n        }\n\n    @sequence;\n    }\n</code></pre>\n\n<p>From there, I could add caching and other things so I can reuse sequences I've already generated (which works even without showing off some exciting new Perl features such as <a href=\"http://www.effectiveperlprogramming.com/2015/04/use-v5-20-subroutine-signatures/\" rel=\"nofollow\">subroutine signatures</a> and <a href=\"http://www.effectiveperlprogramming.com/2014/09/use-postfix-dereferencing/\" rel=\"nofollow\">postfix dereferencing</a> that I find quite fun):</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.22;\n\nuse feature qw(signatures postderef);\nno warnings qw(experimental::signatures experimental::postderef);\n\nsay \"The hailstone sequence for 724 is:\\n\\t\" .\n    join \" \", hail(8)-&gt;@*;\nsay \"The hailstone sequence for 27 is:\\n\\t\"  .\n    join \" \", hail(16)-&gt;@*;\n\n\nsub hail ( $n ) {\n    my @queue    = ( $_[0] );\n    state $sequence = { 1 =&gt; [ 1 ] };\n\n    return $sequence-&gt;{$n} if exists $sequence-&gt;{$n};\n\n    my @sequence = ();\n\n    while( my $next = shift @queue ) {\n        say \"Processing $next\";  # to watch what happens\n        if( exists $sequence-&gt;{$next} ) {\n            push @sequence, $sequence-&gt;{$next}-&gt;@*;\n            next;\n            }\n\n        push @queue, do {\n            if( $next % 2 == 0 ) { $next / 2 }\n            else                 { 3*$next + 1 }\n            };\n\n        push @sequence, $next;\n        }\n\n    $sequence-&gt;{$n} = \\@sequence;\n    }\n</code></pre>\n\n<p>I threw a <code>say</code> in there to show what I process. You can see that with 16, it doesn't have to go past 8 because it already knows that answer:</p>\n\n<pre><code>Processing 8\nProcessing 4\nProcessing 2\nProcessing 1\nThe hailstone sequence for 724 is:\n    8 4 2 1\nProcessing 16\nProcessing 8\nThe hailstone sequence for 27 is:\n    16 8 4 2 1\n</code></pre>\n\n<p>I was curious which numbers might cause a problem, so I slightly modified your example to return a list so I could easily count the number of elements. Several numbers produced sequences with over 100 numbers:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.10;\n\nforeach my $n ( 0 .. 100 ) {\n    hail( $n, \\my @seq );\n    say \"$n [\" . @seq . \"] @seq\";\n    }\n\nsub hail {\n    my $n = $_[0];\n    my $s = $_[1];\n\n    if ($n &gt; 1) {\n            push @$s, $n;\n            if ($n % 2 == 0) {\n                    $n = $n/2;\n            } else {\n                    $n = (3 * $n) + 1;\n            }\n            hail($n, $s);\n    } else {\n            push @$s, $n;\n    }\n}\n</code></pre>\n\n<p>The output, without the deep recursion warnings (which should be the hint not to do it that way ;):</p>\n\n<pre><code>0 [1] 0\n1 [1] 1\n2 [2] 2 1\n3 [8] 3 10 5 16 8 4 2 1\n4 [3] 4 2 1\n5 [6] 5 16 8 4 2 1\n6 [9] 6 3 10 5 16 8 4 2 1\n7 [17] 7 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n8 [4] 8 4 2 1\n9 [20] 9 28 14 7 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n10 [7] 10 5 16 8 4 2 1\n11 [15] 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n12 [10] 12 6 3 10 5 16 8 4 2 1\n13 [10] 13 40 20 10 5 16 8 4 2 1\n14 [18] 14 7 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n15 [18] 15 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n16 [5] 16 8 4 2 1\n17 [13] 17 52 26 13 40 20 10 5 16 8 4 2 1\n18 [21] 18 9 28 14 7 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n19 [21] 19 58 29 88 44 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n20 [8] 20 10 5 16 8 4 2 1\n21 [8] 21 64 32 16 8 4 2 1\n22 [16] 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n23 [16] 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n24 [11] 24 12 6 3 10 5 16 8 4 2 1\n25 [24] 25 76 38 19 58 29 88 44 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n26 [11] 26 13 40 20 10 5 16 8 4 2 1\n27 [112] 27 82 41 124 62 31 94 47 142 71 214 107 322 161 484 242 121 364 182 91 274 137 412 206 103 310 155 466 233 700 350 175 526 263 790 395 1186 593 1780 890 445 1336 668 334 167 502 251 754 377 1132 566 283 850 425 1276 638 319 958 479 1438 719 2158 1079 3238 1619 4858 2429 7288 3644 1822 911 2734 1367 4102 2051 6154 3077 9232 4616 2308 1154 577 1732 866 433 1300 650 325 976 488 244 122 61 184 92 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n28 [19] 28 14 7 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n29 [19] 29 88 44 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n30 [19] 30 15 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n31 [107] 31 94 47 142 71 214 107 322 161 484 242 121 364 182 91 274 137 412 206 103 310 155 466 233 700 350 175 526 263 790 395 1186 593 1780 890 445 1336 668 334 167 502 251 754 377 1132 566 283 850 425 1276 638 319 958 479 1438 719 2158 1079 3238 1619 4858 2429 7288 3644 1822 911 2734 1367 4102 2051 6154 3077 9232 4616 2308 1154 577 1732 866 433 1300 650 325 976 488 244 122 61 184 92 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n32 [6] 32 16 8 4 2 1\n33 [27] 33 100 50 25 76 38 19 58 29 88 44 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n34 [14] 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n35 [14] 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n36 [22] 36 18 9 28 14 7 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n37 [22] 37 112 56 28 14 7 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n38 [22] 38 19 58 29 88 44 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n39 [35] 39 118 59 178 89 268 134 67 202 101 304 152 76 38 19 58 29 88 44 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n40 [9] 40 20 10 5 16 8 4 2 1\n41 [110] 41 124 62 31 94 47 142 71 214 107 322 161 484 242 121 364 182 91 274 137 412 206 103 310 155 466 233 700 350 175 526 263 790 395 1186 593 1780 890 445 1336 668 334 167 502 251 754 377 1132 566 283 850 425 1276 638 319 958 479 1438 719 2158 1079 3238 1619 4858 2429 7288 3644 1822 911 2734 1367 4102 2051 6154 3077 9232 4616 2308 1154 577 1732 866 433 1300 650 325 976 488 244 122 61 184 92 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n42 [9] 42 21 64 32 16 8 4 2 1\n43 [30] 43 130 65 196 98 49 148 74 37 112 56 28 14 7 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n44 [17] 44 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n45 [17] 45 136 68 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n46 [17] 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n47 [105] 47 142 71 214 107 322 161 484 242 121 364 182 91 274 137 412 206 103 310 155 466 233 700 350 175 526 263 790 395 1186 593 1780 890 445 1336 668 334 167 502 251 754 377 1132 566 283 850 425 1276 638 319 958 479 1438 719 2158 1079 3238 1619 4858 2429 7288 3644 1822 911 2734 1367 4102 2051 6154 3077 9232 4616 2308 1154 577 1732 866 433 1300 650 325 976 488 244 122 61 184 92 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n48 [12] 48 24 12 6 3 10 5 16 8 4 2 1\n49 [25] 49 148 74 37 112 56 28 14 7 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n50 [25] 50 25 76 38 19 58 29 88 44 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n51 [25] 51 154 77 232 116 58 29 88 44 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n52 [12] 52 26 13 40 20 10 5 16 8 4 2 1\n53 [12] 53 160 80 40 20 10 5 16 8 4 2 1\n54 [113] 54 27 82 41 124 62 31 94 47 142 71 214 107 322 161 484 242 121 364 182 91 274 137 412 206 103 310 155 466 233 700 350 175 526 263 790 395 1186 593 1780 890 445 1336 668 334 167 502 251 754 377 1132 566 283 850 425 1276 638 319 958 479 1438 719 2158 1079 3238 1619 4858 2429 7288 3644 1822 911 2734 1367 4102 2051 6154 3077 9232 4616 2308 1154 577 1732 866 433 1300 650 325 976 488 244 122 61 184 92 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n55 [113] 55 166 83 250 125 376 188 94 47 142 71 214 107 322 161 484 242 121 364 182 91 274 137 412 206 103 310 155 466 233 700 350 175 526 263 790 395 1186 593 1780 890 445 1336 668 334 167 502 251 754 377 1132 566 283 850 425 1276 638 319 958 479 1438 719 2158 1079 3238 1619 4858 2429 7288 3644 1822 911 2734 1367 4102 2051 6154 3077 9232 4616 2308 1154 577 1732 866 433 1300 650 325 976 488 244 122 61 184 92 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n56 [20] 56 28 14 7 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n57 [33] 57 172 86 43 130 65 196 98 49 148 74 37 112 56 28 14 7 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n58 [20] 58 29 88 44 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n59 [33] 59 178 89 268 134 67 202 101 304 152 76 38 19 58 29 88 44 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n60 [20] 60 30 15 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n61 [20] 61 184 92 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n62 [108] 62 31 94 47 142 71 214 107 322 161 484 242 121 364 182 91 274 137 412 206 103 310 155 466 233 700 350 175 526 263 790 395 1186 593 1780 890 445 1336 668 334 167 502 251 754 377 1132 566 283 850 425 1276 638 319 958 479 1438 719 2158 1079 3238 1619 4858 2429 7288 3644 1822 911 2734 1367 4102 2051 6154 3077 9232 4616 2308 1154 577 1732 866 433 1300 650 325 976 488 244 122 61 184 92 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n63 [108] 63 190 95 286 143 430 215 646 323 970 485 1456 728 364 182 91 274 137 412 206 103 310 155 466 233 700 350 175 526 263 790 395 1186 593 1780 890 445 1336 668 334 167 502 251 754 377 1132 566 283 850 425 1276 638 319 958 479 1438 719 2158 1079 3238 1619 4858 2429 7288 3644 1822 911 2734 1367 4102 2051 6154 3077 9232 4616 2308 1154 577 1732 866 433 1300 650 325 976 488 244 122 61 184 92 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n64 [7] 64 32 16 8 4 2 1\n65 [28] 65 196 98 49 148 74 37 112 56 28 14 7 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n66 [28] 66 33 100 50 25 76 38 19 58 29 88 44 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n67 [28] 67 202 101 304 152 76 38 19 58 29 88 44 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n68 [15] 68 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n69 [15] 69 208 104 52 26 13 40 20 10 5 16 8 4 2 1\n70 [15] 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n71 [103] 71 214 107 322 161 484 242 121 364 182 91 274 137 412 206 103 310 155 466 233 700 350 175 526 263 790 395 1186 593 1780 890 445 1336 668 334 167 502 251 754 377 1132 566 283 850 425 1276 638 319 958 479 1438 719 2158 1079 3238 1619 4858 2429 7288 3644 1822 911 2734 1367 4102 2051 6154 3077 9232 4616 2308 1154 577 1732 866 433 1300 650 325 976 488 244 122 61 184 92 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n72 [23] 72 36 18 9 28 14 7 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n73 [116] 73 220 110 55 166 83 250 125 376 188 94 47 142 71 214 107 322 161 484 242 121 364 182 91 274 137 412 206 103 310 155 466 233 700 350 175 526 263 790 395 1186 593 1780 890 445 1336 668 334 167 502 251 754 377 1132 566 283 850 425 1276 638 319 958 479 1438 719 2158 1079 3238 1619 4858 2429 7288 3644 1822 911 2734 1367 4102 2051 6154 3077 9232 4616 2308 1154 577 1732 866 433 1300 650 325 976 488 244 122 61 184 92 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n74 [23] 74 37 112 56 28 14 7 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n75 [15] 75 226 113 340 170 85 256 128 64 32 16 8 4 2 1\n76 [23] 76 38 19 58 29 88 44 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n77 [23] 77 232 116 58 29 88 44 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n78 [36] 78 39 118 59 178 89 268 134 67 202 101 304 152 76 38 19 58 29 88 44 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n79 [36] 79 238 119 358 179 538 269 808 404 202 101 304 152 76 38 19 58 29 88 44 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n80 [10] 80 40 20 10 5 16 8 4 2 1\n81 [23] 81 244 122 61 184 92 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n82 [111] 82 41 124 62 31 94 47 142 71 214 107 322 161 484 242 121 364 182 91 274 137 412 206 103 310 155 466 233 700 350 175 526 263 790 395 1186 593 1780 890 445 1336 668 334 167 502 251 754 377 1132 566 283 850 425 1276 638 319 958 479 1438 719 2158 1079 3238 1619 4858 2429 7288 3644 1822 911 2734 1367 4102 2051 6154 3077 9232 4616 2308 1154 577 1732 866 433 1300 650 325 976 488 244 122 61 184 92 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n83 [111] 83 250 125 376 188 94 47 142 71 214 107 322 161 484 242 121 364 182 91 274 137 412 206 103 310 155 466 233 700 350 175 526 263 790 395 1186 593 1780 890 445 1336 668 334 167 502 251 754 377 1132 566 283 850 425 1276 638 319 958 479 1438 719 2158 1079 3238 1619 4858 2429 7288 3644 1822 911 2734 1367 4102 2051 6154 3077 9232 4616 2308 1154 577 1732 866 433 1300 650 325 976 488 244 122 61 184 92 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n84 [10] 84 42 21 64 32 16 8 4 2 1\n85 [10] 85 256 128 64 32 16 8 4 2 1\n86 [31] 86 43 130 65 196 98 49 148 74 37 112 56 28 14 7 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n87 [31] 87 262 131 394 197 592 296 148 74 37 112 56 28 14 7 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n88 [18] 88 44 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n89 [31] 89 268 134 67 202 101 304 152 76 38 19 58 29 88 44 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n90 [18] 90 45 136 68 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n91 [93] 91 274 137 412 206 103 310 155 466 233 700 350 175 526 263 790 395 1186 593 1780 890 445 1336 668 334 167 502 251 754 377 1132 566 283 850 425 1276 638 319 958 479 1438 719 2158 1079 3238 1619 4858 2429 7288 3644 1822 911 2734 1367 4102 2051 6154 3077 9232 4616 2308 1154 577 1732 866 433 1300 650 325 976 488 244 122 61 184 92 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n92 [18] 92 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n93 [18] 93 280 140 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n94 [106] 94 47 142 71 214 107 322 161 484 242 121 364 182 91 274 137 412 206 103 310 155 466 233 700 350 175 526 263 790 395 1186 593 1780 890 445 1336 668 334 167 502 251 754 377 1132 566 283 850 425 1276 638 319 958 479 1438 719 2158 1079 3238 1619 4858 2429 7288 3644 1822 911 2734 1367 4102 2051 6154 3077 9232 4616 2308 1154 577 1732 866 433 1300 650 325 976 488 244 122 61 184 92 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n95 [106] 95 286 143 430 215 646 323 970 485 1456 728 364 182 91 274 137 412 206 103 310 155 466 233 700 350 175 526 263 790 395 1186 593 1780 890 445 1336 668 334 167 502 251 754 377 1132 566 283 850 425 1276 638 319 958 479 1438 719 2158 1079 3238 1619 4858 2429 7288 3644 1822 911 2734 1367 4102 2051 6154 3077 9232 4616 2308 1154 577 1732 866 433 1300 650 325 976 488 244 122 61 184 92 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n96 [13] 96 48 24 12 6 3 10 5 16 8 4 2 1\n97 [119] 97 292 146 73 220 110 55 166 83 250 125 376 188 94 47 142 71 214 107 322 161 484 242 121 364 182 91 274 137 412 206 103 310 155 466 233 700 350 175 526 263 790 395 1186 593 1780 890 445 1336 668 334 167 502 251 754 377 1132 566 283 850 425 1276 638 319 958 479 1438 719 2158 1079 3238 1619 4858 2429 7288 3644 1822 911 2734 1367 4102 2051 6154 3077 9232 4616 2308 1154 577 1732 866 433 1300 650 325 976 488 244 122 61 184 92 46 23 70 35 106 53 160 80 40 20 10 5 16 8 4 2 1\n98 [26] 98 49 148 74 37 112 56 28 14 7 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n99 [26] 99 298 149 448 224 112 56 28 14 7 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n100 [26] 100 50 25 76 38 19 58 29 88 44 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 5339687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30cbdaecc6f82cdb9854bd0f74263283?s=128&d=identicon&r=PG&f=1", "display_name": "frankenstein724", "link": "https://stackoverflow.com/users/5339687/frankenstein724"}, "is_accepted": false, "score": 0, "last_activity_date": 1442519372, "creation_date": 1442519372, "answer_id": 32638816, "question_id": 32595581, "link": "https://stackoverflow.com/questions/32595581/subroutine-recursion-in-perl/32638816#32638816", "title": "Subroutine recursion in Perl", "body": "<p>So, the full assignment was to print the sequence for any number &lt; 100000 of my choosing, print the sequence of 27, and then find the number &lt; 100000 with the longest sequence, and print the number of elements in the sequence (but not the sequence itself) I greatly appreciate the help everyone has provided about making a more effective subroutine, and I really will go through the different suggestions to learn the different tips and tricks from each one. I didn't modify my main subroutine code too much to keep it more in my (current) style for the sake of the exercise. (My supervisor won't care that I got help, but it still feels...-something-...to just copy somebody else's code without also knowing I could figure it out with my own hair-brained ideas, along with -her- suggestion to use a recursive subroutine, as well). </p>\n\n<p>I took one person's advice to not return the array as a string, which helped with the part of the exercise I didn't originally mention, but then I had to rework how I printed the actual sequences which seemed easy enough. Beyond learning more effective subroutines, my main concern is still with clearing the array. Someone suggested just putting <code>@seq = ()</code> after each instance, and that works. What I want to know is why what I actually have running in the code (the lines with <code>#####</code> -after- the code) works to clear the array each time, but why it doesn't work to simply clear out the array after I return it in the subroutine, like I have with the commented out line. That still aggregates the sequence each time the subroutine is called.</p>\n\n<pre><code>#!usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $num_win = 0;\nmy $elem_win = 0;\nmy @seq;\nmy $elements;\n\nprint \"\\nThe hailstone sequence for 724 is:\\n\";\n&amp;sequence(&amp;hail(724));\n@seq = ();      #####\n\nprint \"\\n\\nThe hailstone sequence for 27 is:\\n\";\n&amp;sequence(&amp;hail(27));\n@seq = ();      #####\n\nfor (my $i=1; $i&lt;100000; $i++) {\n    $elements = &amp;hail($i);\n    if ($elements &gt; $elem_win) {\n            $elem_win = $elements;\n            $num_win = $i;\n    }\n    @seq = ();      #####\n}\n\nprint \"\\n\\nThe number with the largest sequence is: $num_win\\n\";\nprint \"The number of elements in $num_win is: $elem_win\\n\\n\";\n\nmy $n;\nsub hail {\n    no warnings 'recursion';\n    $n = $_[0];\n    if ($n &gt; 1) {\n            push @seq, $n;\n            if ($n % 2 == 0) {\n                    $n = $n/2;\n            } else {\n                    $n = (3 * $n) + 1;\n            }\n            &amp;hail($n);\n    } else {\n            push @seq, $n;\n    }\n    return @seq;\n#####   @seq = ();\n}\n\nsub sequence {\n    my @hail_seq = @_;\n    foreach (@hail_seq) {\n            my $number = $_;\n            print \"$number, \";\n    }\n}\n</code></pre>\n\n<p>with the results:</p>\n\n<pre><code>The hailstone sequence for 724 is:\n724, 362, 181, 544, 272, 136, 68, 34, 17, 52, 26, 13, 40, 20, 10, 5, 16, 8, 4, 2, 1, \n\nThe hailstone sequence for 27 is:\n27, 82, 41, 124, 62, 31, 94, 47, 142, 71, 214, 107, 322, 161, 484, 242, 121, 364, 182, 91, 274, 137, 412, 206, 103, 310, 155, 466, 233, 700, 350, 175, 526, 263, 790, 395, 1186, 593, 1780, 890, 445, 1336, 668, 334, 167, 502, 251, 754, 377, 1132, 566, 283, 850, 425, 1276, 638, 319, 958, 479, 1438, 719, 2158, 1079, 3238, 1619, 4858, 2429, 7288, 3644, 1822, 911, 2734, 1367, 4102, 2051, 6154, 3077, 9232, 4616, 2308, 1154, 577, 1732, 866, 433, 1300, 650, 325, 976, 488, 244, 122, 61, 184, 92, 46, 23, 70, 35, 106, 53, 160, 80, 40, 20, 10, 5, 16, 8, 4, 2, 1, \n\nThe number with the largest sequence is: 77031\nThe number of elements in 77031 is: 351\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 5339687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30cbdaecc6f82cdb9854bd0f74263283?s=128&d=identicon&r=PG&f=1", "display_name": "frankenstein724", "link": "https://stackoverflow.com/users/5339687/frankenstein724"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 1, "answer_count": 7, "score": 7, "last_activity_date": 1442519372, "creation_date": 1442350991, "last_edit_date": 1442512211, "question_id": 32595581, "link": "https://stackoverflow.com/questions/32595581/subroutine-recursion-in-perl", "title": "Subroutine recursion in Perl", "body": "<p>EDIT: <em>I'm glad no one has spent any time pointing out that the actual text in line 6 and 7 has a different number than the input for their respective function calls. Eventually I'll be doing it for those two numbers (724 and 27), but for the sake of troubleshooting, I picked numbers with much smaller sequences. So, if anyone was wondering, that's why...</em></p>\n\n<p>So, I've been learning Perl, and am relatively new to programming in general. My supervisor has a set of exercises for me to go through. The current one deals with Hailstone sequences, and she wants me to write a subroutine that prints the sequence for a given number.</p>\n\n<p>The problem I'm running into is that, no matter what I've tried, if I call the function more than once, it will produce the sequence for the first number I call the function with, but the second time I call the function, it produces the sequence of the first call followed by the sequence of the second. So, this code:    </p>\n\n<pre><code>#!usr/bin/perl\n\nuse strict;\nuse warnings; \n\nprint \"\\nThe hailstone sequence for 724 is:\\n\" . &amp;hail(8) . \"\\n\\n\";\nprint \"The hailstone sequence for 27 is:\\n\" . &amp;hail(16) . \"\\n\\n\";\n\nmy $n;\nmy @seq;\nsub hail {\n    no warnings 'recursion';\n    $n = $_[0];\n    if ($n &gt; 1) {\n            push @seq, $n;\n            if ($n % 2 == 0) {\n                    $n = $n/2;\n            } else {\n                    $n = (3 * $n) + 1;\n            }\n            &amp;hail($n);\n    } else {\n            push @seq, $n;\n    }\n    return \"@seq\";\n}\n</code></pre>\n\n<p>produces:</p>\n\n<pre><code>The hailstone sequence for 724 is:\n8 4 2 1\n\nThe hailstone sequence for 27 is:\n8 4 2 1 16 8 4 2 1\n</code></pre>\n\n<p>I understand that this is most likely due to the fact that <code>@seq</code> doesn't get cleared out after each time the subroutine runs, but I've tried as many different ways as I can think of to clear it out so that each time I call the subroutine, it displays the sequence for -only- that number but they all either result in what I show here, or in showing nothing. How do I go about clearing the array each time? </p>\n\n<p>Thanks very much.</p>\n"}, {"tags": ["javascript", "jquery", "perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1442344204, "post_id": 32593752, "comment_id": 53041197, "body": "Please <a href=\"https://stackoverflow.com/posts/32593752/edit\">edit</a> your question to show the relevant section of Perl code, the JavaScript code that <i>isn&#39;t</i> working, and the <i>exact</i> text of the error you&#39;re getting, including line number."}, {"owner": {"reputation": 655, "user_id": 5261993, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/681e03d6a8f921dccf48253bc83432b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayesha", "link": "https://stackoverflow.com/users/5261993/ayesha"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1442344448, "post_id": 32593752, "comment_id": 53041328, "body": "@ThisSuitIsBlackNot- updated the post with the details. can you please have a look now"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1442344678, "post_id": 32593752, "comment_id": 53041461, "body": "Are you outputting this JavaScript code from Perl? If so, why the separate AJAX request? Why not just build the entire page using Perl?"}, {"owner": {"reputation": 655, "user_id": 5261993, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/681e03d6a8f921dccf48253bc83432b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayesha", "link": "https://stackoverflow.com/users/5261993/ayesha"}, "edited": false, "score": 0, "creation_date": 1442344756, "post_id": 32593752, "comment_id": 53041502, "body": "@MattJacob- Hi, good to see you. The entire page is build using Perl. i have added javascript inside of it."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1442345369, "post_id": 32593752, "comment_id": 53041835, "body": "I understand that, but why? You&#39;re making a separate HTTP request and adding complexity when you probably don&#39;t need to. Anyway, to answer your original question...  What does the <i>source</i> of the generated page look like for the line with the error? Those backslashes will need to be escaped properly for a JavaScript string."}, {"owner": {"reputation": 655, "user_id": 5261993, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/681e03d6a8f921dccf48253bc83432b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayesha", "link": "https://stackoverflow.com/users/5261993/ayesha"}, "edited": false, "score": 0, "creation_date": 1442346401, "post_id": 32593752, "comment_id": 53042412, "body": "@MattJacob- from your comment, i understand that the syntax error is probably because the backslashes are not properly understood by javascript string. how could i change the code to achieve that ?"}, {"owner": {"reputation": 655, "user_id": 5261993, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/681e03d6a8f921dccf48253bc83432b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayesha", "link": "https://stackoverflow.com/users/5261993/ayesha"}, "edited": false, "score": 0, "creation_date": 1442346591, "post_id": 32593752, "comment_id": 53042502, "body": "@MattJacob- if i use \\\\ instead of \\ and \\\\\\\\ instead of \\\\, the $filename works. i guess this is the problem."}], "answers": [{"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 1, "last_activity_date": 1442346920, "creation_date": 1442346920, "answer_id": 32594536, "question_id": 32593752, "link": "https://stackoverflow.com/questions/32593752/append-path-url-to-javascript-object/32594536#32594536", "title": "Append path url to Javascript object", "body": "<p>Your resultant string contains backslashes, which are escape characters in JavaScript. You'll need to handle any special characters using the proper <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String#Escape_notation\" rel=\"nofollow\">escape notation</a>, e.g., <code>\\\\</code> instead of <code>\\</code> for a backslash.</p>\n"}, {"tags": [], "owner": {"reputation": 655, "user_id": 5261993, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/681e03d6a8f921dccf48253bc83432b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayesha", "link": "https://stackoverflow.com/users/5261993/ayesha"}, "is_accepted": true, "score": 0, "last_activity_date": 1442351052, "creation_date": 1442351052, "answer_id": 32595601, "question_id": 32593752, "link": "https://stackoverflow.com/questions/32593752/append-path-url-to-javascript-object/32595601#32595601", "title": "Append path url to Javascript object", "body": "<p>As matt mentioned above, the following changes to the code worked. As soon as i get the dynamic path, i use regex and then append it to the javascript object. </p>\n\n<p>The code is as follows:</p>\n\n<pre><code>$filename=~ s/\\\\/\\\\\\\\/g;\nform_data.append('filename', \"$filename\"); \n</code></pre>\n"}], "owner": {"reputation": 655, "user_id": 5261993, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/681e03d6a8f921dccf48253bc83432b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayesha", "link": "https://stackoverflow.com/users/5261993/ayesha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 32595601, "answer_count": 2, "score": 0, "last_activity_date": 1442351052, "creation_date": 1442344064, "last_edit_date": 1442346737, "question_id": 32593752, "link": "https://stackoverflow.com/questions/32593752/append-path-url-to-javascript-object", "title": "Append path url to Javascript object", "body": "<p>I had initially defined perl variables </p>\n\n<pre><code>$delimit =\"C\";\n$filename=\\\\aemdata.fcc.com\\aem\\GE\\2015\\Files\\list.txt\n</code></pre>\n\n<p>I used to use those perl variables in javascript. whenever user clicks on save, the above variables would be passed through ajax and backend perl subroutine would be executed based on these above paramters.  Here is that code. </p>\n\n<pre><code>var form_data = new FormData();\n\nform_data.append('action', \"File_Check\"); //perl subroutine which is called \nform_data.append('delimit', \"$delimit\");\nform_data.append('jsondata', data);\n\n\\$.ajax({\n    url: http://aemdata.fcc.com/cgi-bin/test/excel.pl, // directed to url where that perl subroutine is placed\n    contentType: false,\n    processData: false,\n    type: 'post',\n    data: form_data,\n    cache:false,\n    datatype: \"script\",\n    success: function (result) {\n\n    },\n\n    error: function (data) {\n\n    }   \n});\n</code></pre>\n\n<p>This code worked fine. Now instead of specifying the $filename initially at the start. I want to dynamically add it as a parameter. Append it to the javascript object and pass it along with other parameters to the subroutine perl code. Here is the second code where i get the error</p>\n\n<pre><code>var form_data = new FormData();\n\nform_data.append('action', \"File_Check\"); //perl subroutine which is called \nform_data.append('delimit', \"$delimit\");\nform_data.append('jsondata', data);\nform_data.append('filename', \"$filename\"); //ERROR ON THIS LINE\n\n\n\\$.ajax({\n    url: http://aemdata.fcc.com/cgi-bin/test/excel.pl, // directed to url where that perl subroutine is placed\n    contentType: false,\n    processData: false,\n    type: 'post',\n    data: form_data,\n    cache:false,\n    datatype: \"script\",\n    success: function (result) {\n\n    },\n\n    error: function (data) {\n\n    }   \n});\n</code></pre>\n\n<p>This append doesnt work. it gives me a error like \"Uncaught Syntax Error: Unexpected Token ILLEGAL\" on 5th line of above code. \nIf i could pass this along with other paramters, the subroutine would be called and the code would run fine. however i am unable to pass the URL using append. </p>\n\n<p>Can Someone please suggest anything over here ? any inputs will be highly appreciated. </p>\n"}, {"tags": ["perl", "csv", "replace"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 1, "creation_date": 1442344423, "post_id": 32593722, "comment_id": 53041317, "body": "You only ever output <code>$string</code>. How do you expect to see the rest of <code>@fields</code>?"}, {"owner": {"reputation": 3, "user_id": 5339356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/550cca1323ee2b7beee61614522dff5b?s=128&d=identicon&r=PG&f=1", "display_name": "S.Littell", "link": "https://stackoverflow.com/users/5339356/s-littell"}, "edited": false, "score": 0, "creation_date": 1442344742, "post_id": 32593722, "comment_id": 53041494, "body": "I have pointed that out in my question... Do you have a solution on how to get the @fields back into the document while also updating the IP&#39;s in column 2?"}], "answers": [{"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 0, "last_activity_date": 1442344864, "creation_date": 1442344864, "answer_id": 32593979, "question_id": 32593722, "link": "https://stackoverflow.com/questions/32593722/how-to-search-and-replace-a-column-in-a-csv-via-perl/32593979#32593979", "title": "How to search and replace a column in a CSV via perl?", "body": "<p>You need to output more than just the changed field...</p>\n\n<pre><code>my @fields = split(/,/, $line);\n$fields[1] =~ s/$oldsubnet/$newsubnet/g;\nprint $ofh join(',', @fields);\n</code></pre>\n\n<p>Also, don't open the output file in the loop to read the input file.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1442395207, "creation_date": 1442395207, "answer_id": 32604472, "question_id": 32593722, "link": "https://stackoverflow.com/questions/32593722/how-to-search-and-replace-a-column-in-a-csv-via-perl/32604472#32604472", "title": "How to search and replace a column in a CSV via perl?", "body": "<p>Without your source CSV, I can't say for sure, but would be thinking \"use the <code>Text::CSV</code> module\":</p>\n\n<pre><code>#!/usr/bin/env perl;\nuse strict;\nuse warnings;\nuse Text::CSV;\n\nprint \"Old subnet ex: 10.0.0\\n\";\nmy $oldsubnet = &lt;STDIN&gt;;\nchomp $oldsubnet;\nprint \"New subnet ex: 10.0.0\\n\";\nmy $newsubnet = &lt;STDIN&gt;;\nchomp $newsubnet;\n\nmy $file  = \"path\\\\file.csv\";\nmy $ofile = \"path\\\\test.csv\";\n\nopen( my $input,  '&lt;', $file )  or die \"'$file' would not open $!\";\nopen( my $output, '&gt;', $ofile ) or die \"'$ofile' would not open $!\";\nmy $csv = Text::CSV-&gt;new( { binary =&gt; 1, eol =&gt; \"\\n\" } );\n\nwhile ( my $row = $csv-&gt;getline() ) {\n    $row-&gt;[1] =~ s/$oldsubnet/$newsubnet/;\n    $csv-&gt;print( $output, $row );\n}\n</code></pre>\n\n<p>It's not always the best answer, but where you're trying to read CSV, change a single field, and write CSV it works quite nicely. </p>\n"}], "owner": {"reputation": 3, "user_id": 5339356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/550cca1323ee2b7beee61614522dff5b?s=128&d=identicon&r=PG&f=1", "display_name": "S.Littell", "link": "https://stackoverflow.com/users/5339356/s-littell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 893, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1442395207, "creation_date": 1442343966, "last_edit_date": 1442394668, "question_id": 32593722, "link": "https://stackoverflow.com/questions/32593722/how-to-search-and-replace-a-column-in-a-csv-via-perl", "title": "How to search and replace a column in a CSV via perl?", "body": "<p>So, I'm super new to perl... I'm on a windows box within a Corporate network. I am unable to download CPAN modules... </p>\n\n<p>I have a CSV that is exported with multiple columns, the 2nd column contains 2 rows with text and the rest of the rows are IP addresses. I need to change the first 3 octets of the IP for all the rows excluding the text obviously. I then need to either save it to the same file, or create a new one... I also need all the other columns to remain in the document. I've looked and looked and everyone suggests modules which makes sense but I cannot get them. Here is my code:</p>\n\n<pre><code>if ( $cmd[0] eq \"update\" ) {\n    print \"Old subnet ex: 10.0.0\\n\";\n    my $oldsubnet = &lt;STDIN&gt;;\n    chomp $oldsubnet;\n    print \"New subnet ex: 10.0.0\\n\";\n    my $newsubnet = &lt;STDIN&gt;;\n    chomp $newsubnet;\n\n    my $file = \"path\\\\file.csv\";\n\n    open( my $fh, '&lt;', $file ) or die \"'$file' would not open $!\";\n\n    while ( my $line = &lt;$fh&gt; ) {\n        chomp $line;\n        my @fields = split \",\", $line;\n        my $string = $fields[1];\n\n        $string =~ s/$oldsubnet/$newsubnet/g;\n\n        my $ofile = \"path\\\\test.csv\";\n\n        open( my $ofh, '&gt;&gt;', $ofile ) or die \"'$ofile' would not open $!\";\n        print $ofh \"$string\\n\";\n    }\n}\n</code></pre>\n\n<p>So I just end up with a single column with the updated IP's with this code. How in the world do I get the rest of the CSV... Is there an easier way to just replace the IP's???? It seems like this would be easy but the CSV is making it hard. Any help would be appreciated. P.S. I am using strict and warnings :)</p>\n\n<p>So just to clarify I am aware that @fields is being left out and thus not being printed... What I'm asking is how do I update only the data in the 2nd column and then put the whole document back into a new file?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1442334993, "post_id": 32590623, "comment_id": 53036293, "body": "If you want every element in the array, there&#39;s no need to slice it."}], "answers": [{"comments": [{"owner": {"reputation": 243, "user_id": 4999890, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c34942cc479898b04d21c6c917d64955?s=128&d=identicon&r=PG&f=1", "display_name": "MadisonCooper", "link": "https://stackoverflow.com/users/4999890/madisoncooper"}, "edited": false, "score": 0, "creation_date": 1442334034, "post_id": 32590792, "comment_id": 53035738, "body": "Yes, thats exactly what I needed. Thanks!"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1442333371, "creation_date": 1442333371, "answer_id": 32590792, "question_id": 32590623, "link": "https://stackoverflow.com/questions/32590623/how-can-i-use-an-array-slice-to-access-several-elements-of-an-array-simultaneous/32590792#32590792", "title": "How can I use an array slice to access several elements of an array simultaneously?", "body": "<p>If you want to use multiple subscripts in an array, you have to change the sigil:</p>\n\n<pre><code>@array[ 0 .. 2 ];\n@{ $arra_ref }[ 0 .. 2 ];\n</code></pre>\n\n<p>It makes no sense to assign the result to a scalar, though. Use an anonymous array:</p>\n\n<pre><code>my $aoadata1 = $aoa[$k];\nmy $vect1 = [ @{ $aoadata1 }[ 0 .. 2 ] ];\n</code></pre>\n\n<p>or, without the temp var:</p>\n\n<pre><code>my $vect1 = [ @{ $aoa[$k] }[ 0 .. 2 ] ];\n</code></pre>\n\n<p>It might still not work, as I noticed you used </p>\n\n<pre><code>push @aoa, \"@$val1 @$val2\";\n</code></pre>\n\n<p>Did you mean</p>\n\n<pre><code>push @aoa, [ @$val1, @$val2 ];\n</code></pre>\n\n<p>or something similar?</p>\n"}], "owner": {"reputation": 243, "user_id": 4999890, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c34942cc479898b04d21c6c917d64955?s=128&d=identicon&r=PG&f=1", "display_name": "MadisonCooper", "link": "https://stackoverflow.com/users/4999890/madisoncooper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 32590792, "answer_count": 1, "score": 0, "last_activity_date": 1442336920, "creation_date": 1442332813, "last_edit_date": 1442336920, "question_id": 32590623, "link": "https://stackoverflow.com/questions/32590623/how-can-i-use-an-array-slice-to-access-several-elements-of-an-array-simultaneous", "title": "How can I use an array slice to access several elements of an array simultaneously?", "body": "<p>I'm trying to modify this script:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse diagnostics;\nuse Math::Vector::Real;\nuse constant DEG_PER_RAD =&gt; 45 / atan2(1, 1);\n\nmy ( $source, $out ) = qw/ OUT4 OUTABA12 /;\n\nopen my $in_fh,  '&lt;', $source or die qq{Unable to open \"$source\" for input: $!\\n};\nopen my $out_fh, '&gt;', $out    or die qq{Unable to open \"$out\" for output: $!\\n};\n\n\nmy @data;\npush @data, V(split) while &lt;$in_fh&gt;;\nmy @aoa;\n\nfor my $i ( 0 .. $#data ) {\n    for my $j ( 0 .. $#data ) {\n        my $val1 = $data[$i];\n        my $val2 = $data[$j];\n\n        if ($val1 != $val2) {\n\n            my $math = sqrt(($val1-&gt;[0] - $val2-&gt;[0])**2 +\n                ($val1-&gt;[1] - $val2-&gt;[1])**2 +\n                ($val1-&gt;[2] - $val2-&gt;[2])**2);\n\n                if ($math &lt; 2.2) {\n                    push @aoa, \"@$val1 @$val2\";\n                    }\n        }\n    }\n}\n\nfor my $k ( 0 .. $#aoa ) {\n    for my $m ( 0 .. $#aoa ) {\n\n        my $aoadata1 = $aoa[$k];\n        my $aoadata2 = $aoa[$m];\n\n        my $vect1 = $aoadata1[0..2];\n        my $vect2 = $aoadata2[0..2];\n\n        print \"$vect1 $vect2\\n\";    \n\n    }\n}\n</code></pre>\n\n<p>.</p>\n\n<p>At the end of the script, I want to be able to do things with the variables $aoadata1 and $aoadata2 in fields 0-2. However, I cannot get them to stop throwing up errors regarding things not referenced right (I think). Can anyone tell me why this is happening/how to fix it?</p>\n\n<p>Thanks. </p>\n"}, {"tags": ["bash", "perl", "cgi"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1442332650, "post_id": 32590187, "comment_id": 53034868, "body": "What is configfile.sh actually doing? Just setting environment variables?"}, {"owner": {"reputation": 1289, "user_id": 4081962, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/aeKOK.jpg?s=128&g=1", "display_name": "hilcharge", "link": "https://stackoverflow.com/users/4081962/hilcharge"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1442333273, "post_id": 32590187, "comment_id": 53035255, "body": "Yes, just sets and exports environmnt variables, i updated question. The variables reference each other, though, so changing one variable changes mant others."}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 0, "creation_date": 1442335447, "post_id": 32590187, "comment_id": 53036507, "body": "Why not use a properly formatted config file that the bash and perl script parses and sets their environment accordingly?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1442337974, "post_id": 32590187, "comment_id": 53037806, "body": "I&#39;m inclined to agree with Ron. There&#39;s too much &quot;magic&quot; in your initial solution because of all the indirection, if you ask me. I&#39;d pick a simple format that can be parsed universally and go that route instead."}, {"owner": {"reputation": 1289, "user_id": 4081962, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/aeKOK.jpg?s=128&g=1", "display_name": "hilcharge", "link": "https://stackoverflow.com/users/4081962/hilcharge"}, "edited": false, "score": 0, "creation_date": 1442358960, "post_id": 32590187, "comment_id": 53047557, "body": "By &#39;proper&#39; or &#39;simple&#39; format, do you mean just a bunch of <code>VAR=HARDCODED_VALUE</code> statements? Or would <code>VAR=$VAL1&#47;VALPART2</code> still qualify?"}], "answers": [{"comments": [{"owner": {"reputation": 1289, "user_id": 4081962, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/aeKOK.jpg?s=128&g=1", "display_name": "hilcharge", "link": "https://stackoverflow.com/users/4081962/hilcharge"}, "edited": false, "score": 1, "creation_date": 1442360365, "post_id": 32594008, "comment_id": 53047882, "body": "Great options. I dont want to change entire apache environment in case some variables affect other web applications. Shell parser looks interesting, but actually AppConfig looks best for my simple config file. The only issue for using my existing config file with it is export statements. Maybe I will just grep away the export statements and then use AppConfig on whats left."}, {"owner": {"reputation": 1901, "user_id": 2002471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/222d816f24fcb2d01e92937b6af01d34?s=128&d=identicon&r=PG", "display_name": "chicks", "link": "https://stackoverflow.com/users/2002471/chicks"}, "reply_to_user": {"reputation": 1289, "user_id": 4081962, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/aeKOK.jpg?s=128&g=1", "display_name": "hilcharge", "link": "https://stackoverflow.com/users/4081962/hilcharge"}, "edited": false, "score": 0, "creation_date": 1442360493, "post_id": 32594008, "comment_id": 53047918, "body": "Good choice, that is the least hacky of the options.  I&#39;ve had great luck with App::Config, it really does it all."}], "tags": [], "owner": {"reputation": 1901, "user_id": 2002471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/222d816f24fcb2d01e92937b6af01d34?s=128&d=identicon&r=PG", "display_name": "chicks", "link": "https://stackoverflow.com/users/2002471/chicks"}, "is_accepted": true, "score": 1, "last_activity_date": 1442344975, "creation_date": 1442344975, "answer_id": 32594008, "question_id": 32590187, "link": "https://stackoverflow.com/questions/32590187/bash-config-file-for-perl-cgi-script/32594008#32594008", "title": "Bash config file for perl cgi script", "body": "<p>Most of this is a bit hacky, but I like the idea of keeping your config centralized so let's see how it goes. </p>\n\n<p>If you're writing a CGI script you need a web server.  Let's assume apache for this answer.</p>\n\n<p>There are several options:</p>\n\n<h1>reconfigure apache</h1>\n\n<p>So you could add your config script into the startup script for apache.  This would set your environment variables before starting apache and those should be inherited by the child processes including your CGI script.</p>\n\n<h1>parse the config file</h1>\n\n<p>If you're not doing anything special with the shell in your config file it should be pretty trivial to parse it in Perl.  <a href=\"https://metacpan.org/release/Shell-Parser\" rel=\"nofollow\">Shell::Parser</a> is a pre-existing module which seems to be pretty thorough about taking care of this.</p>\n\n<h1>process the config file</h1>\n\n<p>If you are doing fun shell tricks in your config file it might be easier to let the shell run it and then see what is left in the environment.  Your CGI could run a script like:</p>\n\n<pre><code>source config.sh    # read config\nenv                 # print out environment\n</code></pre>\n\n<p>and then parse the output from the <code>env</code> in Perl.</p>\n\n<h1>real config library</h1>\n\n<p>If you're interested in a bigger rewrite, going for <a href=\"https://metacpan.org/release/AppConfig\" rel=\"nofollow\">App::Config</a> would be my recommendation.  It would not let you keep your config in shell files, but you could write a Perl script that would generate your shell configs from the <code>App::Config</code> configs.</p>\n"}], "owner": {"reputation": 1289, "user_id": 4081962, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/aeKOK.jpg?s=128&g=1", "display_name": "hilcharge", "link": "https://stackoverflow.com/users/4081962/hilcharge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 1, "accepted_answer_id": 32594008, "answer_count": 1, "score": 1, "last_activity_date": 1442344975, "creation_date": 1442331466, "question_id": 32590187, "link": "https://stackoverflow.com/questions/32590187/bash-config-file-for-perl-cgi-script", "title": "Bash config file for perl cgi script", "body": "<p>I would like to use a bash file as my config file for a project, so that the same config file can be used for all scripts regardless of language (especially bash and perl).</p>\n\n<p>This is no problem from command line</p>\n\n<pre><code>$ source configfile.sh\n$ ./perlscript.pl\n</code></pre>\n\n<p>But in a cgi script the answer's not so clear.</p>\n\n<p>One way is using bash cgi file to execute a perl script.</p>\n\n<pre><code>#!/usr/bin/env bash\n# mycgiscript.cgi\nsource /path/to/configfile.sh\nperl /path/to/perlscript.pl\n# i think the print functions in perlscript just output to the browser?\n</code></pre>\n\n<p>But if I do that, then bash is handling all of the http parameter parsing, and any of perl's cgi capabilities and modules become useless unless I am mistaken. Since perl would be doing all the leg work anyway, it seems using the cgi for parameter passing should be natural, but maybe there's no real problem with having bash manage the http request?</p>\n\n<p>Another way is to use a Perl CGI file to parse the config file, and set the environment variables based on the parsing. The variables in <code>configfile.sh</code> reference each other though, causing complicated parsing and headaches.</p>\n\n<p>So, what is the best practice for using a <code>bash</code> config file to set project-specific config/environment variables used by output generating Perl code, within a cgi script?</p>\n"}, {"tags": ["python", "bash", "perl", "csv"], "comments": [{"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 4, "creation_date": 1442326029, "post_id": 32588124, "comment_id": 53030061, "body": "<a href=\"http://perlmaven.com/how-to-read-a-csv-file-using-perl\" rel=\"nofollow noreferrer\">perlmaven.com/how-to-read-a-csv-file-using-perl</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4912, "user_id": 4974175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ixCeF.jpg?s=128&g=1", "display_name": "rll", "link": "https://stackoverflow.com/users/4974175/rll"}, "is_accepted": false, "score": 0, "last_activity_date": 1442328794, "creation_date": 1442328794, "answer_id": 32589205, "question_id": 32588124, "link": "https://stackoverflow.com/questions/32588124/convert-csv-file-to-txt-file/32589205#32589205", "title": "Convert csv file to txt file", "body": "<p>You need regular expressions to help you. In python it would simply be:</p>\n\n<pre><code>&gt;&gt;&gt; re.split(r'(?!\\B\"[^\"]*),(?![^\"]*\"\\B)',  'ADNP, \"descript1, descript2\", 1'\n['ADNP', ' \"descript1, descript2\"', ' 1']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13658, "user_id": 1338158, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7b1dd97725ef5d1afb914e159c42c9a2?s=128&d=identicon&r=PG", "display_name": "Maciej Gol", "link": "https://stackoverflow.com/users/1338158/maciej-gol"}, "is_accepted": false, "score": 1, "last_activity_date": 1442329116, "creation_date": 1442329116, "answer_id": 32589321, "question_id": 32588124, "link": "https://stackoverflow.com/questions/32588124/convert-csv-file-to-txt-file/32589321#32589321", "title": "Convert csv file to txt file", "body": "<p>In python</p>\n\n<pre><code>import csv\n\nwith open('input', 'rb') as inf:\n    reader = csv.reader(inf)\n    with open('output', 'wb') as out:\n        writer = csv.writer(out, delimiter='\\t')\n        writer.writerows(reader)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1374, "user_id": 2049147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/210dedd0d2350595ef34b6c2eec0da94?s=128&d=identicon&r=PG", "display_name": "cts", "link": "https://stackoverflow.com/users/2049147/cts"}, "is_accepted": false, "score": 0, "last_activity_date": 1442329465, "creation_date": 1442329465, "answer_id": 32589460, "question_id": 32588124, "link": "https://stackoverflow.com/questions/32588124/convert-csv-file-to-txt-file/32589460#32589460", "title": "Convert csv file to txt file", "body": "<p>Building off rll's regex answer, you can turn it into a perl oneliner like you're currenly doing</p>\n\n<pre><code>perl -ne 'BEGIN{$,=\"\\t\";}@a=split(/(?!\\B\"[^\"]*),(?![^\"]*\"\\B)/);print @a' csvfile.csv &gt; tabfile.tab\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 0, "creation_date": 1442330701, "post_id": 32589646, "comment_id": 53033549, "body": "Not as efficient as @cts&#39;s answer since it uses a foreach loop, but it does remove the quotes. Another version on this theme: <code>perl -e &#39;$sep=&quot;,&quot;;while(&lt;STDIN&gt;){print(join(&quot;\\t&quot;,map {if(&#47;&quot;&#47;){s&#47;^\\Q$sep\\E\\s*&quot;&#47;&#47;;s&#47;&quot;\\s*\\Q$sep\\E$&#47;&#47;;}else{s&#47;\\Q$sep\\&zwnj;&#8203;E&#47;\\t&#47;g;}$_} split(&#47;(\\Q$sep\\E?\\s*&quot;[^&quot;]+&quot;\\s*\\Q$sep\\E?)&#47;)));} warn &quot;Changed $sep to tab on $. lines\\n&quot;&#39; &lt; csvfile.csv &gt; tabfile.tab</code>"}], "tags": [], "owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "is_accepted": false, "score": 0, "last_activity_date": 1442330009, "creation_date": 1442330009, "answer_id": 32589646, "question_id": 32588124, "link": "https://stackoverflow.com/questions/32588124/convert-csv-file-to-txt-file/32589646#32589646", "title": "Convert csv file to txt file", "body": "<p>This'll work:</p>\n\n<pre><code>perl -e '$sep=\",\"; while(&lt;STDIN&gt;) { @data = split(/(\\Q$sep\\E?\\s*\"[^\"]+\"\\s*\\Q$sep\\E?)/); foreach(@data){if(/\"/){s/^\\Q$sep\\E\\s*\"//;s/\"\\s*\\Q$sep\\E$//;}else{s/\\Q$sep\\E/\\t/g;}}print(join(\"\\t\",@data));} warn \"Changed $sep to tab on $. lines\\n\"' &lt; csvfile.csv &gt; tabfile.tab\n</code></pre>\n\n<p>Putting parens in the pattern to split, returns the captured separators along with the split elements and effectively separates the strings containing quotes into separate list elements that can be treated differently when quotes are detected. You just strip off the commas and quotes for the quoted strings and substitute for tabs in the other elements, then join the elements with tabs (so that the quoted strings get joined with tabs to the other already tabbed strings.</p>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 0, "last_activity_date": 1442332439, "creation_date": 1442332439, "answer_id": 32590492, "question_id": 32588124, "link": "https://stackoverflow.com/questions/32588124/convert-csv-file-to-txt-file/32590492#32590492", "title": "Convert csv file to txt file", "body": "<p>The <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow\">Text::CSV</a> module is what you're looking for. There are a lot of considerations when parsing CSV files, and you really don't want to handle all of them yourself.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1442332998, "last_edit_date": 1442332998, "creation_date": 1442332692, "answer_id": 32590584, "question_id": 32588124, "link": "https://stackoverflow.com/questions/32588124/convert-csv-file-to-txt-file/32590584#32590584", "title": "Convert csv file to txt file", "body": "<p>Trivial in Perl, using <code>Text::CSV</code>:</p>\n\n<p></p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Text::CSV;\n\n#configure our read format using the default separator of \",\"\nmy $input_csv = Text::CSV-&gt;new( { binary =&gt; 1 } );\n#configure our output format with a tab as separator. \nmy $output_csv = Text::CSV-&gt;new( { binary =&gt; 1, sep_char =&gt; \"\\t\", eol =&gt; \"\\n\" } );\n\n#open input file\nopen my $input_fh, '&lt;', \"sample.csv\" or die $!;\n#iterate input file - reading in 'comma separated' \n#printing out (to stdout -can use filehandle) tab separated. \nwhile ( my $row = $input_csv-&gt;getline($input_fh) ) {\n    $output_csv-&gt;print( \\*STDOUT, $row );\n}\n</code></pre>\n"}], "owner": {"reputation": 525, "user_id": 4582163, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e81fa122e4b1a98a6f9e8fb90213ba08?s=128&d=identicon&r=PG&f=1", "display_name": "cosmictypist", "link": "https://stackoverflow.com/users/4582163/cosmictypist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4558, "favorite_count": 0, "accepted_answer_id": 32590584, "answer_count": 6, "score": -1, "last_activity_date": 1442332998, "creation_date": 1442325722, "question_id": 32588124, "link": "https://stackoverflow.com/questions/32588124/convert-csv-file-to-txt-file", "title": "Convert csv file to txt file", "body": "<p>I'm using perl to convert a comma separated file to a tab separated file with this command: </p>\n\n<pre><code>perl -e ' $sep=\",\"; while(&lt;&gt;) { s/\\Q$sep\\E/\\t/g; print $_; } warn \"Changed $sep to tab on $. lines\\n\" ' csvfile.csv &gt; tabfile.tab\n</code></pre>\n\n<p>However, my file has additional commas that I do not want to be separated in specific columns. Here's and example of my file:</p>\n\n<pre><code>ADNP, \"descript1, descript2\", 1\nPTB, \"descriptA, descriptB\", 5\n</code></pre>\n\n<p>I only want to convert the comma's outside of the quotations to tabs as so:</p>\n\n<pre><code>ADNP    descript1, descript2    1\nPTB    descriptA, descriptB    5\n</code></pre>\n\n<p>Is there anyway to go about doing this with either perl, python, or bash?</p>\n"}, {"tags": ["python", "linux", "perl", "ping", "availability"], "comments": [{"owner": {"reputation": 1322, "user_id": 4505331, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3Lh1Z.jpg?s=128&g=1", "display_name": "Lawrence Benson", "link": "https://stackoverflow.com/users/4505331/lawrence-benson"}, "edited": false, "score": 0, "creation_date": 1442325058, "post_id": 32587838, "comment_id": 53029296, "body": "maybe set short timeouts? then the result would come quicker"}, {"owner": {"reputation": 1143, "user_id": 1526312, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/1QEwg.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1526312/ali"}, "reply_to_user": {"reputation": 1322, "user_id": 4505331, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3Lh1Z.jpg?s=128&g=1", "display_name": "Lawrence Benson", "link": "https://stackoverflow.com/users/4505331/lawrence-benson"}, "edited": false, "score": 0, "creation_date": 1442325340, "post_id": 32587838, "comment_id": 53029509, "body": "@LawrenceBenson and what  the exact command would be?"}, {"owner": {"reputation": 4527, "user_id": 2382792, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/9tQBs.jpg?s=128&g=1", "display_name": "\u03c1ss", "link": "https://stackoverflow.com/users/2382792/%cf%81ss"}, "edited": false, "score": 0, "creation_date": 1442325879, "post_id": 32587838, "comment_id": 53029949, "body": "Maybe instead of checking the VM, let the VM send some confirmation about its existence. Something like a <code>SYN</code> packets being sent from the VM to some other machine running the server instance, that might be accepting the connections, logging them and dropping them. <a href=\"http://www.secdev.org/projects/scapy/doc/usage.html#tcp-port-scanning\" rel=\"nofollow noreferrer\">secdev.org/projects/scapy/doc/usage.html#tcp-port-scanning</a>"}, {"owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 0, "creation_date": 1442389461, "post_id": 32587838, "comment_id": 53057150, "body": "Are you confusing the advice of &quot;Don&#39;t use the ping(1) command&quot; with &quot;Don&#39;t use ICMP echo-request/echo-response packets&quot;? I think ICMP is perfectly reasonable for this sort of problem; I just wouldn&#39;t use the ping command to send them. Maybe you want to stick with ICMP but use your own custom logic to send it."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1442368372, "last_edit_date": 1442368372, "creation_date": 1442332308, "answer_id": 32590444, "question_id": 32587838, "link": "https://stackoverflow.com/questions/32587838/determine-server-availability-using-a-program-acting-as-a-udp-echo/32590444#32590444", "title": "Determine server availability using a program acting as a UDP echo", "body": "<blockquote>\n  <p><em>ping doesn't work since it's not being accurate and in case of vm being unavailable, ping command waits and retries sending ICMP packets</em></p>\n</blockquote>\n\n<p>That's the default, but you can tell it to only send one.</p>\n\n<pre><code>$ ping -q -c 1 9.9.9.9 &gt;/dev/null\n\n$ echo $?\n1\n\n$ ping -q -c 1 8.8.8.8 &gt;/dev/null\n\n$ echo $?\n0\n</code></pre>\n\n<p>So</p>\n\n<pre><code>while ! ping -q -c 1 -W 1 x.x.x.x &gt;/dev/null ; do true ; done\n</code></pre>\n\n<blockquote>\n  <p><em>Plus I asked a question in here and the feedback was \"don't use ping!\"\n  so NO USING PING!</em></p>\n</blockquote>\n\n<p>Yet you asked for a (UDP-based) ping instead of a means of checking if the needed service is up. </p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4322779"}, "is_accepted": false, "score": 0, "last_activity_date": 1442334481, "last_edit_date": 1442334481, "creation_date": 1442333879, "answer_id": 32590958, "question_id": 32587838, "link": "https://stackoverflow.com/questions/32587838/determine-server-availability-using-a-program-acting-as-a-udp-echo/32590958#32590958", "title": "Determine server availability using a program acting as a UDP echo", "body": "<p>Here is a ZeroMQ UDP ping function adapted from <a href=\"http://zguide.zeromq.org/py:udpping1\" rel=\"nofollow\">UDP discovery, model 1 in Python</a> by disabling broadcasting, pinging just one IP address, returning after the first reply, adding a counter to limit the number of ping attempts and adding extra error handling during message receive. The latter was done since one host in my net forcibly closed the connection causing socket.error: [Errno 10054]. It has been tested and found to work with Python 2.7.10 and 3.4.3.</p>\n\n<pre><code>from __future__ import print_function\nimport os\nimport socket\nimport sys\nimport time\nimport zmq\n\ndef udpping(ip):\n    PING_PORT_NUMBER = 9999\n    PING_MSG_SIZE = 1\n    PING_INTERVAL = 1 # once per second, sets minimum initial timeout\n\n    sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM, socket.IPPROTO_UDP)\n    # uncomment the line below for broadcast to 255.255.255.255\n    # sock.setsockopt(socket.SOL_SOCKET, socket.SO_BROADCAST, 1)\n    sock.bind(('', PING_PORT_NUMBER))\n    poller = zmq.Poller()\n    poller.register(sock, zmq.POLLIN)\n    ping_at = time.time()\n\n    limit = 5 # only limit ping attempts will be made\n    count = 0\n    while True:\n        count += 1\n        timeout = ping_at - time.time()\n        if timeout &lt; 0:\n            timeout = 0\n        try:\n            events = dict(poller.poll(1000* timeout))\n        except KeyboardInterrupt:\n            return (1,None,None)\n        try:\n            if sock.fileno() in events:\n                msg, addrinfo = sock.recvfrom(PING_MSG_SIZE)\n                return (2,\"found %s:%d\" % addrinfo,None)\n        except socket.error as e:\n            return (3,'error during msg receive:',e)\n        if time.time() &gt;= ping_at:\n            # the line below is for broadcasting\n            # sock.sendto(b'!', 0, (\"255.255.255.255\", PING_PORT_NUMBER))\n            sock.sendto(b'!', 0, (ip, PING_PORT_NUMBER))\n            ping_at = time.time() + PING_INTERVAL\n        if count == limit:\n            return (4,limit,None)\n\nip = '192.168.159.21'\nc,m,e = udpping(ip)\n</code></pre>\n\n<p>Below is shown output handling. For binary decision, the ping succeeded only if c == 2.</p>\n\n<pre><code>if c == 1:\n    print('ping attempt stopped by KeyboardInterrupt')\nelif c == 2:\n    print(m)\nelif c == 3:\n    print(m,e)\nelif c == 4:\n    print('no response from',ip,'after',m,'attempts')\n\n# prints 'found 192.168.159.21:9999' immediately in my net\n</code></pre>\n"}], "owner": {"reputation": 1143, "user_id": 1526312, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/1QEwg.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1526312/ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1442368372, "creation_date": 1442324922, "last_edit_date": 1492085615, "question_id": 32587838, "link": "https://stackoverflow.com/questions/32587838/determine-server-availability-using-a-program-acting-as-a-udp-echo", "title": "Determine server availability using a program acting as a UDP echo", "body": "<p>I'm using Xen Hypervisor in ubuntu and I have a VM. When live-migrating vm to another host, the vm will be Unavailable from a range of about a few milliseconds to no more than a few seconds tops (depending on the environment). I need to be able to determine that short time as accurate as possible. so I need to 'somehow' check the vm say every 100 milliseconds. and the number of times in which I find the vm UNAVAILABLE continuously, multiplied by 100, will be the total milliseconds that my vm was down.</p>\n\n<p>ping doesn't work since it's not being accurate and in case of vm being unavailable, ping command waits and retries sending ICMP packets and This spoils the goal to find out if the server is available in that EXACT CHECKING MOMENT. Plus I asked a question in <a href=\"https://serverfault.com/questions/722419/how-to-check-server-availability-every-100-milliseconds-using-ping\">here</a> and the feedback was \"don't use ping!\"<br>\nso <strong>NO USING PING!</strong>    </p>\n\n<p>I need to write my own piece of code in python/perl/whathever which could do the job. How could I do that?</p>\n"}, {"tags": ["perl", "windows-server-2008"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1442323141, "post_id": 32586765, "comment_id": 53027928, "body": "Can I suggest doing it via UNC path instead? E.g. <code>\\\\servername.domain.fqdn\\sharename\\path\\to\\files</code>"}, {"owner": {"reputation": 15, "user_id": 2168172, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f70f1c6f4c7defb7ab3ad73bd9506d4a?s=128&d=identicon&r=PG", "display_name": "Nitin Jaitely", "link": "https://stackoverflow.com/users/2168172/nitin-jaitely"}, "edited": false, "score": 0, "creation_date": 1442323914, "post_id": 32586765, "comment_id": 53028446, "body": "There is a copy, using module File::Copy. <a href=\"http://perldoc.perl.org/File/Copy.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/File/Copy.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "is_accepted": false, "score": 0, "last_activity_date": 1442341774, "creation_date": 1442341774, "answer_id": 32593136, "question_id": 32586765, "link": "https://stackoverflow.com/questions/32586765/copying-file-on-network-drive-using-perl-in-windows-server-2008/32593136#32593136", "title": "Copying File on Network Drive using Perl in Windows Server 2008", "body": "<p>You used $targetdir when you defined the path, but used $targetpath in the copy statement instead of $targetdir.</p>\n"}], "owner": {"reputation": 15, "user_id": 2168172, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f70f1c6f4c7defb7ab3ad73bd9506d4a?s=128&d=identicon&r=PG", "display_name": "Nitin Jaitely", "link": "https://stackoverflow.com/users/2168172/nitin-jaitely"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1062, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1442341774, "creation_date": 1442321969, "last_edit_date": 1442323502, "question_id": 32586765, "link": "https://stackoverflow.com/questions/32586765/copying-file-on-network-drive-using-perl-in-windows-server-2008", "title": "Copying File on Network Drive using Perl in Windows Server 2008", "body": "<p>How would you explore and write to windows shared directories in perl ? Note: I have the right for network drive creation on the concerned workstation. This script was working perfectly fine in Windows Server 2003 but stopped working when i upgraded the server to Windows Server 2008. <br>\nI already have the network drive mapped to my server as M drive:</p>\n\n<pre><code>$prompt = *some file*\n        if ($environment eq \"Media\") {\n            $targetdir = \"M:\\\\EAN\\\\Documents\\\\\";\n            print \"Media Environment selected.  Using $targetdir\\n\";\n            copy ($prompt, $targetpath) || die \"Can't copy $prompt \\n to $targetpath\\n $!\";\n        }\n</code></pre>\n\n<p>When ever it tries to copy the file, the script just dies saying \"Cant copy ... since the path doesnt exist\". \nWhy is this happening? \n<br>Is there any solution for this? Is there any way i can authenticate a network drive in the script? </p>\n"}, {"tags": ["php", "regex", "perl"], "comments": [{"owner": {"reputation": 49, "user_id": 2936321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1074a9c2b0f80118ab939df61c9a7b24?s=128&d=identicon&r=PG&f=1", "display_name": "louie172", "link": "https://stackoverflow.com/users/2936321/louie172"}, "edited": false, "score": 0, "creation_date": 1442404858, "post_id": 32585357, "comment_id": 53066862, "body": "not sure why I&#39;ve been marked down for asking a question, have i done something wrong ?"}], "answers": [{"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 6, "last_activity_date": 1442318446, "last_edit_date": 1442318446, "creation_date": 1442317974, "answer_id": 32585409, "question_id": 32585357, "link": "https://stackoverflow.com/questions/32585357/regex-to-match-a-substring-but-not-starting-with-certain-characters/32585409#32585409", "title": "regex to match a substring, but not starting with certain characters", "body": "<p>Use <a href=\"http://www.regular-expressions.info/lookaround.html\" rel=\"nofollow\">negative lookbehind</a>:</p>\n\n<pre><code>(?&lt;![-g\"])test\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1442342100, "last_edit_date": 1442342100, "creation_date": 1442324899, "answer_id": 32587826, "question_id": 32585357, "link": "https://stackoverflow.com/questions/32585357/regex-to-match-a-substring-but-not-starting-with-certain-characters/32587826#32587826", "title": "regex to match a substring, but not starting with certain characters", "body": "<p>The simplest answer is</p>\n\n<pre><code>/(?&lt;![g\"-])test/\n</code></pre>\n\n<p>But there is room for optimization if you need more performance. If <code>test</code> can't appear at the very start of the string, then the following is a clear winner in terms of simplicity and performance:</p>\n\n<pre><code>/[^g\"-]test/\n</code></pre>\n\n<p>Otherwise, I'd try the following:</p>\n\n<pre><code>/test(?&lt;![g\"-].{4})/s\n\n/^test|[^g\"-]test/\n\n/^test/ || /[^g\"-]test/\n</code></pre>\n\n<p>Note: <code>-</code> can have special meaning in character classes, but not if it's the first character, the first character after the negating <code>^</code>, or the last character. I always use it last; it keeps things nice and simple.</p>\n"}], "owner": {"reputation": 49, "user_id": 2936321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1074a9c2b0f80118ab939df61c9a7b24?s=128&d=identicon&r=PG&f=1", "display_name": "louie172", "link": "https://stackoverflow.com/users/2936321/louie172"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 32585409, "answer_count": 2, "score": -2, "last_activity_date": 1442342100, "creation_date": 1442317844, "last_edit_date": 1592644375, "question_id": 32585357, "link": "https://stackoverflow.com/questions/32585357/regex-to-match-a-substring-but-not-starting-with-certain-characters", "title": "regex to match a substring, but not starting with certain characters", "body": "<p>I am searching for a substring e.g. <code>test</code> , in a longer string e.g. <code>alongstringtest</code>.</p>\n<p>In this example it would match ok</p>\n<p>but I want to exclude certain cases ( when 'test' preceded by certain characters)</p>\n<p>e.g.</p>\n<blockquote>\n<p>do not match 'a-test'   (because of '-' )</p>\n<p>do not match 'abcgtest'   (because of 'g' )</p>\n<p>do not match 'abc&quot;test'   (because of '&quot;' )</p>\n</blockquote>\n<p>I haven't written any regex for a long time, so this has me pulling my hair out abit !</p>\n"}, {"tags": ["regex", "perl", "encoding", "utf-8"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1442310246, "post_id": 32582631, "comment_id": 53019304, "body": "No need for <code>$i</code> to count the line numbers. You can use <code>$.</code>, it holds the current filehandle line number. See perlvar."}, {"owner": {"reputation": 43, "user_id": 5337219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/015c92ee50c374fc9c463ef65977006b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/5337219/andrew"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1442312722, "post_id": 32582631, "comment_id": 53020939, "body": "Thanks simbabque, I will take a look"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5337219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/015c92ee50c374fc9c463ef65977006b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/5337219/andrew"}, "edited": false, "score": 0, "creation_date": 1442322379, "post_id": 32584114, "comment_id": 53027388, "body": "Hi, I have implemented the above and the regex is still not finding the En Dashes in the service.c file, i have also changed the encoding of my editor to UTF-8"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 43, "user_id": 5337219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/015c92ee50c374fc9c463ef65977006b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/5337219/andrew"}, "edited": false, "score": 0, "creation_date": 1442322819, "post_id": 32584114, "comment_id": 53027708, "body": "@Andrew: Are you opening the file with the correct encoding? Is it a UTF-8 file? Can you post the file on pastebin.com and put a link here?"}, {"owner": {"reputation": 43, "user_id": 5337219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/015c92ee50c374fc9c463ef65977006b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/5337219/andrew"}, "edited": false, "score": 0, "creation_date": 1442323858, "post_id": 32584114, "comment_id": 53028413, "body": "Unfortunately the file holds confidential information so i cannot post it, but i can assure you it is utf-8 encoded"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 43, "user_id": 5337219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/015c92ee50c374fc9c463ef65977006b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/5337219/andrew"}, "edited": false, "score": 0, "creation_date": 1442324152, "post_id": 32584114, "comment_id": 53028609, "body": "@Andrew: Okay did you <i>open</i> it as a UTF-8 file?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 43, "user_id": 5337219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/015c92ee50c374fc9c463ef65977006b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/5337219/andrew"}, "edited": false, "score": 0, "creation_date": 1442324703, "post_id": 32584114, "comment_id": 53029018, "body": "@Andrew: If your sample code is correct then you haven&#39;t even <i>opened</i> the files as UTF-8 files. I&#39;ve added to my solution to explain how to  do that"}, {"owner": {"reputation": 43, "user_id": 5337219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/015c92ee50c374fc9c463ef65977006b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/5337219/andrew"}, "edited": false, "score": 0, "creation_date": 1442324975, "post_id": 32584114, "comment_id": 53029245, "body": "Thank you for the add, It is functioning properly now,i believe i will be doing some reading up on Encoding tonight :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 43, "user_id": 5337219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/015c92ee50c374fc9c463ef65977006b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/5337219/andrew"}, "edited": false, "score": 0, "creation_date": 1442331006, "post_id": 32584114, "comment_id": 53033752, "body": "@Andrew: I&#39;m sorry, there was a space missing from the <code>use open</code> example. It&#39;s fixed now"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1442330979, "last_edit_date": 1442330979, "creation_date": 1442314179, "answer_id": 32584114, "question_id": 32582631, "link": "https://stackoverflow.com/questions/32582631/regular-expressions-to-search-and-replace-decimal-dashes-with-a-normal-dash-in-p/32584114#32584114", "title": "Regular expressions to search and replace decimal dashes with a normal dash in perl?", "body": "<p>You need to <code>use utf8</code> at the top of your program, otherwise Perl will see the individual bytes that make up the UTF-8 encoding of the en-dash (<code>E2</code> <code>80</code> <code>93</code>). There's also no need to specify <code>$_</code> as the object of the substitution as it is the default, and you needn't escape an en-dash as it's not a special character within regex patterns</p>\n\n<pre><code>use utf8;\n\n...\n\nwhile( s/\u2013/-/g ) { ... }\n</code></pre>\n\n<p>Or you may want to make it clearer using Unicode names, as it's far from obvious at a glance what it is you're replacing. In that case you don't need <code>use utf8</code> as long as you name <em>every</em> non-ASCII character instead of using it literally, like this</p>\n\n<pre><code>while( s/\\N{EN DASH}/-/g ) { ... }\n</code></pre>\n\n<p><br/></p>\n\n<hr>\n\n<p>You will also need to <em>open</em> the files -- both input and output -- as UTF-8-encoded. The simplest way is to set UTF-8 as the default mode. You would add this line near the top of your program</p>\n\n<pre><code>use open qw/ :std :encoding(utf8) /;\n</code></pre>\n\n<p>or you can open each file explicitly as UTF-8-encoded like this</p>\n\n<pre><code>my $filename = 'NoDodge.c';\n\nopen my $in_fh, '&lt;:encoding(utf8)', 'service.c'\n        or die qq{Unable to open \"service.c\" for input: $!};\n\nopen my $out_fh, '&gt;:encoding(utf8)', $filename\n        or die qq{Unable to open \"$filename\" for output: $!};\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5337219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/015c92ee50c374fc9c463ef65977006b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/5337219/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 32584114, "answer_count": 1, "score": 2, "last_activity_date": 1442386600, "creation_date": 1442309778, "last_edit_date": 1442386600, "question_id": 32582631, "link": "https://stackoverflow.com/questions/32582631/regular-expressions-to-search-and-replace-decimal-dashes-with-a-normal-dash-in-p", "title": "Regular expressions to search and replace decimal dashes with a normal dash in perl?", "body": "<p>I Currently require a regular expression to search and replace all |\u2013| with |-|. I am Currently Replacing |`| with |'| and it is working using:</p>\n\n<pre><code>while($_ =~ s/`/'/g)\n{\n  print \"Line: '$.'. \";\n  print \"Found '$&amp;'. \";\n}\n</code></pre>\n\n<p>However using the same regex is not working for all of my below attempts:</p>\n\n<pre><code>while($_ =~ s/\\\u2013/-/g)\n{\n  print \"Line: '$.'. \";\n  print \"Found '$&amp;'.\\n\";\n}\n\nwhile($_ =~ s/\\&amp;#8211/-/g)\n{\n  print \"Line: '$.'. \";\n  print \"Found '$&amp;'.\\n\";\n}\n\nwhile($_ =~ s/\\&amp;ndash/-/g)\n{\n  print \"Line: '$.'. \";\n  print \"Found '$&amp;'.\\n\";\n}\nwhile($_ =~ s/\\\u2013/-/g)\n{\n  print \"Line: '$.'. \";\n  print \"Found '$&amp;'.\\n\";\n}\n\nwhile($_ =~ s/&amp;#8211/-/g)\n{\n  print \"Line: '$.'. \";\n  print \"Found '$&amp;'.\\n\";\n}\n\nwhile($_ =~ s/&amp;ndash/-/g)\n{\n  print \"Line: '$.'. \";\n  print \"Found '$&amp;'.\\n\";\n}\n</code></pre>\n\n<p>The Script Currently looks as follows:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy $FILE;\nmy $filename = 'NoDodge.c';\n\nopen($FILE,\"&lt;service.c\") or die \"File not opened\";\nopen(my $fh, '&gt;', $filename) or die \"Could not open file '$filename' $!\";\nwhile (&lt;$FILE&gt;)\n{\n  while($_ =~ s/`/'/g)\n  {\n    print \"Line: '$.'. \";\n    print \"Found '$&amp;'. \";\n  }\n  while($_ =~ s/\\&amp;#8211/-/g)\n  {\n    print \"Line: '$.'. \";\n    print \"Found '$&amp;'.\\n\";\n  }\n  print $fh $_;\n}\nclose $fh;\nprint \"\\nCompleted\\n\";\n</code></pre>\n\n<p>Example of Current Result:</p>\n\n<p>Line: '152'. Found '`'. </p>\n\n<p>Line: '162'. Found '`'. </p>\n\n<p>Completed</p>\n\n<p>SOLUTION:\nProvided by Borodin,</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse utf8;\nuse open qw/ :std :encoding(utf8) /;\n\nmy $FILE;\nmy $fh;\nmy $readfile = 'service.c';\nmy $writefile = 'NoDodge.c';\n\nopen($FILE,'&lt;',$readfile) or die qq{Unable to open \"$readfile\" for input: $!};\nopen($fh, '&gt;',$writefile) or die qq{Unable to open \"$writefile\" for output: $!};\nwhile (&lt;$FILE&gt;)\n{\n  while(s/\u2013/-/g)\n  {\n    print \"Found: $&amp; on Line: $.\\n\";\n  }\n\n  while(s/`/'/g)\n  {\n    print \"Found: $&amp; on Line: $.\\n\";\n  }\n\n  print $fh $_;\n}\nclose $fh;\nclose $FILE;\nprint \"\\nService Migrated to $writefile\\n\";\n</code></pre>\n\n<p>Example Output:</p>\n\n<p>Found: \u2013 on Line: 713</p>\n\n<p>Found: ` on Line: 713</p>\n\n<p>Found: \u2013 on Line: 724</p>\n\n<p>Found: ` on Line: 724</p>\n\n<p>Found: ` on Line: 794</p>\n\n<p>Service Migrated to NoDodge.c</p>\n"}, {"tags": ["perl", "ssl", "openssl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1442309466, "post_id": 32581367, "comment_id": 53018805, "body": "I would <i>guess</i> your remote server no longer supports older versions of SSL. There&#39;s a bunch of older SSL versions that are dangerously insecure, so sites are starting to deprecate them. E.g. something like this: <a href=\"http://security.stackexchange.com/questions/71457/how-can-i-verify-that-sslv3-protocol-is-disabled\" title=\"how can i verify that sslv3 protocol is disabled\">security.stackexchange.com/questions/71457/&hellip;</a>"}, {"owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1442316812, "post_id": 32581367, "comment_id": 53023513, "body": "Yes, that was my guess also."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1442325331, "post_id": 32581367, "comment_id": 53029505, "body": "In which case I&#39;m not really sure how you&#39;d test it - verify with wget maybe?"}, {"owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1442327245, "post_id": 32581367, "comment_id": 53030948, "body": "wget also gives an error on that site: (SSL handshake failed. Unable to establish SSL connection)."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1442329704, "post_id": 32581367, "comment_id": 53032861, "body": "So, your problem isn&#39;t a perl one, it&#39;s a bit more fundamental than that."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1442345205, "post_id": 32581367, "comment_id": 53041748, "body": "Did your certificate expire?"}, {"owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "edited": false, "score": 0, "creation_date": 1442346114, "post_id": 32581367, "comment_id": 53042242, "body": "I think wget fails because it&#39;s an older version as well. I don&#39;t think there&#39;s a single solution that will make both Perl and wget work. They probably both require their own solution."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1442346703, "post_id": 32581367, "comment_id": 53042553, "body": "Please post the exact URL you are using to connect to the server, and post the output of <code>openssl s_client -connect &lt;hostname&gt;:&lt;port&gt; -tls1 -servername &lt;hostname&gt; | openssl x509 -text -noout</code>. Do so by adding it to your question by clicking <i>Edit</i> (and don&#39;t post it as a comment). Otherwise, we can&#39;t reproduce it and there&#39;s not enough information to help troubleshoot it."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1442346864, "post_id": 32581367, "comment_id": 53042640, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/q/28940024/608639\">500 SSL negotiation failed with perl</a>."}], "answers": [{"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1495135997, "post_id": 32596405, "comment_id": 75137711, "body": "In fact, updating <code>Crypt::SSLeay</code> will install <code>LWP::Protocol::https</code> which will pull in <code>IO::Socket::SSL</code> and <code>Net::SSLeay</code>. Unless specific manual steps are taken to override this, it will then cause <code>Crypt::SSLeay</code> not to be used at all, but it will have served the purpose of transitioning the user to <code>Net::SSLeay</code>."}], "tags": [], "owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "is_accepted": true, "score": 1, "last_activity_date": 1442849492, "last_edit_date": 1442849492, "creation_date": 1442354448, "answer_id": 32596405, "question_id": 32581367, "link": "https://stackoverflow.com/questions/32581367/lwpuseragent-and-500-ssl-negotiation-failed/32596405#32596405", "title": "LWP::UserAgent and 500 SSL negotiation failed", "body": "<p>I got it to work for Perl. As I suspected, each program on the server that uses SSL needs to be patched seperately. But this was the solution for Perl:</p>\n\n<p><strong>1) Update OpenSSL (to version 1.0.2d)</strong></p>\n\n<p>This is a necessary step for every program that uses SSL! On my Debian system, I used the instructions found <a href=\"http://www.linuxfromscratch.org/blfs/view/svn/postlfs/openssl.html\" rel=\"nofollow\" title=\"OpenSSL-1.0.2d\">here</a>.</p>\n\n<p><strong>2) Update Net::SSLeay</strong></p>\n\n<p>This was necessary otherwise step 4) would fail.</p>\n\n<pre><code>$ cpan Net::SSLeay\n</code></pre>\n\n<p><strong>3) Update Getopt::Long</strong></p>\n\n<p>Again, this step was necessary otherwise step 4) would fail.</p>\n\n<pre><code>$ cpan Getopt::Long\n</code></pre>\n\n<p><strong>4) Update Crypt::SSLeay</strong></p>\n\n<p>Note that this will also update LWP.</p>\n\n<pre><code>$ cpan Crypt::SSLeay\n</code></pre>\n"}], "owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5362, "favorite_count": 0, "accepted_answer_id": 32596405, "answer_count": 1, "score": 5, "last_activity_date": 1442849492, "creation_date": 1442306001, "last_edit_date": 1442346816, "question_id": 32581367, "link": "https://stackoverflow.com/questions/32581367/lwpuseragent-and-500-ssl-negotiation-failed", "title": "LWP::UserAgent and 500 SSL negotiation failed", "body": "<p>I'm running an old Debian server that once a day fetches a webpage through a Perl script. Since yesterday, the script fails with a \"500 SSL negotiation failed\" error.</p>\n\n<pre><code>use strict;\nuse LWP::UserAgent;\n\nmy $browserObj = LWP::UserAgent-&gt;new();\n\n$response = $browserObj-&gt;get( \"https://www.domain.tld\" );\nprint $response-&gt;status_line . \"\\n\" if( ! $response-&gt;is_success );\n</code></pre>\n\n<p>Like I said, it's an old server running old versions of everything:</p>\n\n<ul>\n<li>Perl: 5.8.8</li>\n<li>OpenSSL: 0.9.8c</li>\n<li>LWP: 5.805</li>\n<li>Crypt::SSLeay: 0.57</li>\n</ul>\n\n<p>I made a snapshot of the server so I could try all kinds of solutions and return to the snapshot if it fails. Which is exactly what I did after each test, return to the original server state.</p>\n\n<p><strong>Test 1:</strong>\nFirst thing I tried was updating OpenSSL to 1.0.2d. That did not help, I still got the \"SSL negotiation failed\" error. I then updated Crypt:SSLeay. That broke SSL altogether (caused the server to be unable to connect to any secure server).</p>\n\n<p><strong>Test 2:</strong>\nUpdated Crypt::SSLeay without updating OpenSSL. Caused the server to unable to connect to secure servers again.</p>\n\n<p><strong>Test 3:</strong>\nUpdated OpenSSL to 1.0.2d. Updated LWP. Made no difference. Still got \"500 SSL negotiation failed\"</p>\n\n<p>Is there anything else I could try?</p>\n\n<p>PS: For several reasons I'm unable to update Debian itself.</p>\n"}, {"tags": ["html", "perl", "dom", "web-scraping", "scraper"], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1442306194, "creation_date": 1442306194, "answer_id": 32581430, "question_id": 32580960, "link": "https://stackoverflow.com/questions/32580960/how-to-parse-this-html-with-webscraper/32581430#32581430", "title": "How to Parse this HTML with Web::Scraper?", "body": "<p>There are two points in your code that need changing.</p>\n\n<p>To get only the <em>DESCRIPTION</em>-text, use xpath. <code>//p/text()</code> will give you the text-nodes directly under any <code>p</code>, so the ones inside of the <code>strong</code> are not included.</p>\n\n<p>To make all blocks of <code>p</code> show up in the array, and not only the first one, make the first instruction be on <code>div p</code>. That way it grabs all <code>p</code> inside of a <code>div</code> and not only the one <code>div</code>.</p>\n\n<pre><code>my $test = scraper {\n    process 'div p', 'test[]' =&gt; scraper {\n        process 'p strong',           'name' =&gt; 'TEXT';\n        process '//p/text()', 'desc' =&gt; ['TEXT', sub { s/^\\s+|\\s+$//g } ];\n    };\n};\n</code></pre>\n\n<p>Output (with <a href=\"http://p3rl.org/Data::Printer\" rel=\"nofollow\">Data::Printer</a>):</p>\n\n<pre><code>\\ {\n    test   [\n        [0] {\n            desc   \"DESCRIPTION1\",\n            name   \"TITLE1\"\n        },\n        [1] {\n            desc   \"DESCRIPTION2\",\n            name   \"TITLE2\"\n        },\n        [2] {\n            desc   \"DESCRIPTION3\",\n            name   \"TITLE3\"\n        }\n    ]\n}\n</code></pre>\n"}], "owner": {"reputation": 1330, "user_id": 1768233, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fbdf57a16515518ce0471cb0e75fce29?s=128&d=identicon&r=PG", "display_name": "user1768233", "link": "https://stackoverflow.com/users/1768233/user1768233"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 32581430, "answer_count": 1, "score": 2, "last_activity_date": 1442308309, "creation_date": 1442304768, "last_edit_date": 1442308309, "question_id": 32580960, "link": "https://stackoverflow.com/questions/32580960/how-to-parse-this-html-with-webscraper", "title": "How to Parse this HTML with Web::Scraper?", "body": "<p>I am trying to use <a href=\"https://metacpan.org/pod/Web::Scraper\" rel=\"nofollow\">Web::Scraper</a> to parse the following HTML:</p>\n\n<pre><code>&lt;div&gt;\n&lt;p&gt;&lt;strong&gt;TITLE1&lt;/strong&gt;\n&lt;br&gt;\nDESCRIPTION1\n&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;TITLE2&lt;/strong&gt;\n&lt;br&gt;\nDESCRIPTION2\n&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;TITLE3&lt;/strong&gt;\n&lt;br&gt;\nDESCRIPTION3\n&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>into </p>\n\n<pre><code>      'test' =&gt; [\n                  {\n                    'name' =&gt; 'TITLE1',\n                    'desc' =&gt; 'DESCRIPTION1 '\n                  },\n                  {\n                    'name' =&gt; 'TITLE2',\n                    'desc' =&gt; 'DESCRIPTION2 '\n                  },\n                  {\n                    'name' =&gt; 'TITLE3',\n                    'desc' =&gt; 'DESCRIPTION3 '\n                  }\n                ]\n</code></pre>\n\n<p>I have the following code but I don't have much luck. 'TEXT' when processing 'p' gives both the text and what is between \"strong\" for example</p>\n\n<pre><code>      'test' =&gt; [\n                  {\n                    'name' =&gt; 'TITLE1',\n                    'desc' =&gt; 'TITLE1 DESCRIPTION1 '\n                  }\n                ]\n</code></pre>\n\n<p>plus its only the first item.</p>\n\n<p>Here is my code.</p>\n\n<pre><code>use strict;\nuse Web::Scraper;\nuse Data::Dumper;\n\nmy $html = q[&lt;div&gt;\n            &lt;p&gt;&lt;strong&gt;TITLE1&lt;/strong&gt;\n            &lt;br&gt;\n            DESCRIPTION1\n            &lt;/p&gt;\n            &lt;p&gt;&lt;strong&gt;TITLE2&lt;/strong&gt;\n            &lt;br&gt;\n            DESCRIPTION2\n            &lt;/p&gt;\n            &lt;p&gt;&lt;strong&gt;TITLE3&lt;/strong&gt;\n            &lt;br&gt;\n            DESCRIPTION3\n            &lt;/p&gt;\n           &lt;/div&gt;\n           ];\n\n my $test = scraper {\n process 'div', 'test[]' =&gt; scraper {\n    process 'p strong', 'name' =&gt; 'TEXT';\n    process 'p','desc' =&gt; 'TEXT';       \n   };\n };\n\n  my $res = $test-&gt;scrape(\\$html);\n  print Dumper($res);   \n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["perl", "hash", "position"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1442312732, "post_id": 32579840, "comment_id": 53020945, "body": "You&#39;re storing the start of the entire match against the length of the first capture. Coincidentally they&#39;re the same value, but you really should be using <code>$-[1] + 1</code> with <code>length $1</code> or <code>$-[0] + 1</code> with <code>$+[0] - $-[0]</code>"}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 3, "last_activity_date": 1442302552, "last_edit_date": 1442302552, "creation_date": 1442301073, "answer_id": 32579840, "question_id": 32579636, "link": "https://stackoverflow.com/questions/32579636/perl-get-position-and-length-of-element-in-a-string/32579840#32579840", "title": "Perl: Get position and length of element in a string", "body": "<p>Check for <code>@-</code> array in <a href=\"http://perldoc.perl.org/perlvar.html#%40-\" rel=\"nofollow\"><code>perlval</code></a></p>\n\n<pre><code>my $refseq = \"CCCC-TGA---ATAAAC--TCCAT-GCTCCCCC--------------------AAGC\";\nmy %POSLENGTH;\n\n$POSLENGTH{ $-[0] +1 } = length($1) while $refseq =~ s/(-+)//;\n\nuse Data::Dumper; print Dumper \\%POSLENGTH;\n</code></pre>\n\n<p>output</p>\n\n<pre><code>$VAR1 = {\n      '14' =&gt; 2,\n      '8' =&gt; 3,\n      '27' =&gt; 20,\n      '19' =&gt; 1,\n      '5' =&gt; 1\n    };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1442312797, "post_id": 32579843, "comment_id": 53020990, "body": "@DaniCee: My apologies, I hadn&#39;t noticed that you wanted your start position to start at one instead of zero. It&#39;s fixed"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1442312577, "last_edit_date": 1442312577, "creation_date": 1442301081, "answer_id": 32579843, "question_id": 32579636, "link": "https://stackoverflow.com/questions/32579636/perl-get-position-and-length-of-element-in-a-string/32579843#32579843", "title": "Perl: Get position and length of element in a string", "body": "<p>You can do this using the built-in <code>@-</code> and <code>@+</code> arrays. Together they hold the start and end offsets of the last successful pattern match in element 0 (and of any captures in elements 1 onwards) so clearly the <em>length</em> of the last match is <code>$+[0] - $-[0]</code>.\nThey're documented under <em>Variables related to regular expressions</em> in <a href=\"http://perldoc.perl.org/perlvar.html#Variables-related-to-regular-expressions\" rel=\"nofollow\"><code>perldoc perlvar</code></a>. </p>\n\n<p>I've used <code>Data::Dump</code> here just to display the contents of the hash that is built</p>\n\n<p>On a side note, I'm very doubtful that a hash is a useful structure for this information as I can't imagine a situation where you know the start position of a substring and need to know its length. I would have thought it was better represented as just an array of pairs</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dump;\n\nmy $refseq=\"CCCC-TGA---ATAAAC--TCCAT-GCTCCCCC--------------------AAGC\";\n\nmy %pos_length;\n\nwhile ( $refseq =~ /-+/g ) {\n    my ($pos, $len) = ( $-[0] + 1, $+[0] - $-[0] );\n    $pos_length{$pos} = $len;\n}\n\ndd \\%pos_length;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>{ 5 =&gt; 1, 9 =&gt; 3, 18 =&gt; 2, 25 =&gt; 1, 34 =&gt; 20 }\n</code></pre>\n"}], "owner": {"reputation": 1633, "user_id": 2573168, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/747f3fba6f89de542cd8f03cc53e0b69?s=128&d=identicon&r=PG", "display_name": "DaniCee", "link": "https://stackoverflow.com/users/2573168/danicee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 32579840, "answer_count": 2, "score": 0, "last_activity_date": 1442312577, "creation_date": 1442300263, "question_id": 32579636, "link": "https://stackoverflow.com/questions/32579636/perl-get-position-and-length-of-element-in-a-string", "title": "Perl: Get position and length of element in a string", "body": "<p>Say I have a string like:</p>\n\n<blockquote>\n  <p>my $refseq=\"CCCC-TGA---ATAAAC--TCCAT-GCTCCCCC--------------------AAGC\";</p>\n</blockquote>\n\n<p>I want to detect the positions where \"-\" occurs and the number of contiguous \"-\". I want to end up with a hash with \"-\" position as key, and extension length as value, for this example above:</p>\n\n<blockquote>\n  <p>%POSLENGTH = (5 => 1, 8 => 3, 14 => 2, 19 => 1, 27 => 20);</p>\n</blockquote>\n\n<p>Note that the positions should be given based on the string without \"-\".</p>\n"}, {"tags": ["perl", "debian", "glibc", "cpan"], "answers": [{"comments": [{"owner": {"reputation": 4840, "user_id": 1051441, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/XfVDj.png?s=128&g=1", "display_name": "Shuwn Yuan Tee", "link": "https://stackoverflow.com/users/1051441/shuwn-yuan-tee"}, "edited": false, "score": 0, "creation_date": 1442305680, "post_id": 32578037, "comment_id": 53016402, "body": "I got it fixed by reinstalling YAML::Syck, thanks a lot! :)"}], "tags": [], "owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "is_accepted": true, "score": 4, "last_activity_date": 1442293120, "creation_date": 1442293120, "answer_id": 32578037, "question_id": 32577940, "link": "https://stackoverflow.com/questions/32577940/installing-configpit-on-debian-wheezy/32578037#32578037", "title": "Installing Config::Pit on Debian Wheezy", "body": "<p>The error you show isn't directly related to Config::Pit.  Perl is failing to load <a href=\"https://metacpan.org/pod/YAML::Syck\" rel=\"nofollow\">YAML::Syck</a>, which is a dependency of Config::Pit.</p>\n\n<p>You need to rebuild/reinstall YAML::Syck so it links with your glibc instead of a version you don't have installed.</p>\n"}], "owner": {"reputation": 4840, "user_id": 1051441, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/XfVDj.png?s=128&g=1", "display_name": "Shuwn Yuan Tee", "link": "https://stackoverflow.com/users/1051441/shuwn-yuan-tee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 1, "accepted_answer_id": 32578037, "answer_count": 1, "score": 1, "last_activity_date": 1442295504, "creation_date": 1442292588, "last_edit_date": 1442295504, "question_id": 32577940, "link": "https://stackoverflow.com/questions/32577940/installing-configpit-on-debian-wheezy", "title": "Installing Config::Pit on Debian Wheezy", "body": "<p>I am trying to install <a href=\"http://search.cpan.org/~satoh/Config-Pit-0.04/lib/Config/Pit.pm\" rel=\"nofollow\">Config::Pit</a> from CPAN. Steps I did:</p>\n\n<ol>\n<li>Download tar.gz from CPAN, untar</li>\n<li>perl Makefile.PL</li>\n<li>make install</li>\n<li>make test</li>\n</ol>\n\n<p>It failed with following error:</p>\n\n<blockquote>\n  <p>Tried to use 'Config::Pit'.\n      Error:  Can't load '/home/git/cpan/local/lib/perl5/x86_64-linux-gnu-thread-multi/auto/YAML/Syck/Syck.so' for module YAML::Syck: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.14' not found (required by /home/git/cpan/local/lib/perl5/x86_64-linux-gnu-thread-multi/auto/YAML/Syck/Syck.so) at /usr/lib/perl/5.14/DynaLoader.pm line 184.\n   at /home/git/cpan/local/lib/perl5/x86_64-linux-gnu-thread-multi/YAML/Syck.pm line 36.\n  BEGIN failed--compilation aborted at /home/git/cpan/local/lib/perl5/x86_64-linux-gnu-thread-multi/YAML/Syck.pm line 36.\n  Compilation failed in require at /home/git/google_net_spreadsheet/Config-Pit-0.04/blib/lib/Config/Pit.pm line 13.\n  BEGIN failed--compilation aborted at /home/git/google_net_spreadsheet/Config-Pit-0.04/blib/lib/Config/Pit.pm line 13.</p>\n</blockquote>\n\n<p>For my glibc, I checked with:</p>\n\n<blockquote>\n  <p>ldd --version</p>\n  \n  <p>ldd (Debian EGLIBC 2.13-38+deb7u8) 2.13</p>\n</blockquote>\n\n<p>My machine is running:</p>\n\n<ol>\n<li>Debian 7.9</li>\n<li>perl v5.14.2</li>\n</ol>\n\n<p>Config::Pit requires glibc 2.14 (Mine is 2.13). How can I install it? Or how can I change dependency to glibc 2.13?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1442285456, "post_id": 32576886, "comment_id": 53008740, "body": "why don&#39;t you <code>return</code> the string back from level0 and print it later with the rest of the result?  Alternatively, you could set <code>$|=0</code> to buffer your print output... perldoc perlvar"}, {"owner": {"reputation": 417, "user_id": 5182223, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-hzs0PABtd3o/AAAAAAAAAAI/AAAAAAAAAs4/rGlTnmLKwgk/photo.jpg?sz=128", "display_name": "nonemaw", "link": "https://stackoverflow.com/users/5182223/nonemaw"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1442285686, "post_id": 32576886, "comment_id": 53008798, "body": "It because this case is an example, level0 subroutine has to print something in other situations for me, that is why I would like to know how to redirect the printed content :("}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1442287084, "post_id": 32576886, "comment_id": 53009147, "body": "What is the actual use case here?  debugging?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1442309185, "post_id": 32576886, "comment_id": 53018617, "body": "This feels a lot like an XY problem. What are you actually trying to accomplish?"}, {"owner": {"reputation": 417, "user_id": 5182223, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-hzs0PABtd3o/AAAAAAAAAAI/AAAAAAAAAs4/rGlTnmLKwgk/photo.jpg?sz=128", "display_name": "nonemaw", "link": "https://stackoverflow.com/users/5182223/nonemaw"}, "edited": false, "score": 0, "creation_date": 1442444837, "post_id": 32576886, "comment_id": 53090719, "body": "I am working on a translator assignment, using perl to translate some shell scripts with nested loops to python code. Some subroutines, like the example &quot;level0&quot;, are already done and embed to the whole program, hence they cannot be changed, otherwise I have to change the whole structure. I use print and then redirect the STDOUT to python file to achieve my goal."}, {"owner": {"reputation": 417, "user_id": 5182223, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-hzs0PABtd3o/AAAAAAAAAAI/AAAAAAAAAs4/rGlTnmLKwgk/photo.jpg?sz=128", "display_name": "nonemaw", "link": "https://stackoverflow.com/users/5182223/nonemaw"}, "edited": false, "score": 0, "creation_date": 1442445025, "post_id": 32576886, "comment_id": 53090766, "body": "But yesterday I found that I need some subroutines, still like the one &quot;level0&quot; in example, to return the value, rather than print out. That&#39;s why I need a feasible solution to this, if there is not then I may have to change lots of things to the whole program :(, but thanks to Nick P, his code truly works perfectly"}], "answers": [{"tags": [], "owner": {"reputation": 695, "user_id": 2060441, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e093d389dd8919b616a4835e4adcf22f?s=128&d=identicon&r=PG", "display_name": "Nick P", "link": "https://stackoverflow.com/users/2060441/nick-p"}, "is_accepted": true, "score": 5, "last_activity_date": 1442286125, "creation_date": 1442286125, "answer_id": 32577026, "question_id": 32576886, "link": "https://stackoverflow.com/questions/32576886/in-perl-how-to-redirect-a-print-to-a-variable-rather-than-display-on-the-scre/32577026#32577026", "title": "in Perl, how to redirect a &quot;print&quot; to a variable rather than display on the screen", "body": "<p>I'm not sure this is something you should be doing, it's usually a bad idea because you can't always be certain of the side effects of everything you call.</p>\n\n<p>But anyway if you have to, the below should work.</p>\n\n<pre><code>while (my $line = &lt;&gt;) {\n    my $result = '';\n    open RESULT, '&gt;', \\$result or die $!;\n    select RESULT;\n    check($line);\n    select STDOUT;\n    chomp($result);\n    print \"$result, the result has been redirected\\n\";\n}\n</code></pre>\n\n<p>You can see some more options at <a href=\"http://www.perlmonks.org/?node_id=631760\" rel=\"noreferrer\">http://www.perlmonks.org/?node_id=631760</a></p>\n"}], "owner": {"reputation": 417, "user_id": 5182223, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-hzs0PABtd3o/AAAAAAAAAAI/AAAAAAAAAs4/rGlTnmLKwgk/photo.jpg?sz=128", "display_name": "nonemaw", "link": "https://stackoverflow.com/users/5182223/nonemaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 32577026, "answer_count": 1, "score": 1, "last_activity_date": 1442286125, "creation_date": 1442285101, "question_id": 32576886, "link": "https://stackoverflow.com/questions/32576886/in-perl-how-to-redirect-a-print-to-a-variable-rather-than-display-on-the-scre", "title": "in Perl, how to redirect a &quot;print&quot; to a variable rather than display on the screen", "body": "<p>my case is like this: The while loop will check STDIN, once I enter a line containing a key word \"win\", the level0 subroutine will display \"hahaha I win!\\n\". Now I would like to redirect the printed \"hahaha I win\\n\" to a variable named $result, rather than display it on the screen, and chomp() it, then display the modified information on the screen.</p>\n\n<p>My expected display: \n\"hahaha I win! the result has been redirected\"</p>\n\n<pre><code>sub level0 {\n    print \"hahaha I win!\\n\";\n}\n\nsub level1 {\n    level0();\n}\n\nsub check {\n    my ($word) = @_;\n    if ($word =~ /win/) {\n        level1($word);\n    }\n}\n\nwhile (&lt;&gt;) {\n    ($line) = $_;\n    $result = check($line);\n    chomp($result);\n    print \"$result, the result has been redirected\\n\";\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl", "shell", "system", "stdout"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 5157541, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/04ba9590a14092bdcc2ff5dd95ec70ca?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/5157541/david-young"}, "edited": false, "score": 0, "creation_date": 1442291375, "post_id": 32576385, "comment_id": 53010107, "body": "Thanks so much. I&#39;ve tried your way. Just concerned about high memory consumption and putting 20gb into ram is still very slow. The way&#39;s fantastic, fast and low memory usage."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1442281376, "creation_date": 1442281376, "answer_id": 32576385, "question_id": 32576247, "link": "https://stackoverflow.com/questions/32576247/perl-stdout-the-output-of-shell-command-to-an-array-directly/32576385#32576385", "title": "Perl: STDOUT/the output of shell command to an array directly", "body": "<pre><code>@array = `command`;\n</code></pre>\n\n<p>does, in fact, put each line of output from <code>command</code> into its own element of <code>@array</code>. There is no need to load the output into a scalar and <code>split</code> it yourself.</p>\n\n<p>But 20GB of output stored in an array (and possibly 2-3 times that amount due to the way that Perl stores data) will still put an awful strain on your system.</p>\n\n<p>The real solution to your problem is to stream the output of your command through an IO handle, and deal with one line at a time without having to load all of the output into memory at once. The way to do that is with Perl's <code>open</code> command:</p>\n\n<pre><code>open my $fh, \"-|\", \"command\";\nopen my $fh, \"command |\";\n</code></pre>\n\n<p>The <code>-|</code> filemode or the <code>|</code> appended to the command tells Perl to run an external command, and to make the output of that command available in the filehandle <code>$fh</code>.</p>\n\n<p>Now iterate on the filehandle to receive one line of output at a time.</p>\n\n<pre><code>while (&lt;$fh&gt;) {\n    # one line of output is now in $_\n    do_something($_);\n}\nclose $fh;\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5157541, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/04ba9590a14092bdcc2ff5dd95ec70ca?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/5157541/david-young"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 32576385, "answer_count": 1, "score": 0, "last_activity_date": 1442281376, "creation_date": 1442280474, "last_edit_date": 1442280773, "question_id": 32576247, "link": "https://stackoverflow.com/questions/32576247/perl-stdout-the-output-of-shell-command-to-an-array-directly", "title": "Perl: STDOUT/the output of shell command to an array directly", "body": "<p>I have to access a shell command - hive within a Perl script, So I use `...`.\nAssuming the result of `hive ... ...` contains 100000000 lines and is 20GB size.\nwhat I want to achieve is like this:</p>\n\n<pre><code>@array = `hive ... ...`;\n</code></pre>\n\n<p>Does `` automatically know to use \"\\n\" as separator to divide each line into the @array? </p>\n\n<p>The 2 ways I can thought of are (but with problem in this case):</p>\n\n<pre><code>$temp = `hive ... ...`;\n@array = split ( \"\\n\", $temp );\nundef $temp;\n</code></pre>\n\n<p>The problem of this way is that if the output of hive is too big in this case, the $temp cant store the output, resulting in segmentation fault core dump.</p>\n\n<p>OR</p>\n\n<pre><code>`hive ... ... 1&gt;temp.txt`;\nopen ( FP, &lt;, \"temp.txt\" );\nwhile (&lt;FP&gt;)\n{\n    chomp;\n    push @array, $_;\n}\nclose FP;\n`rm temp.txt`;\n</code></pre>\n\n<p>But this way would be too slow, because it writes result first to hard-disk.</p>\n\n<p>Is there a way to write the output of a shell command directly to an array without using any 'temporary container'?</p>\n\n<p>Very Thanks for helping.</p>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 91128, "user_id": 1229023, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/75b840909603c238921a81032efd57eb?s=128&d=identicon&r=PG", "display_name": "raina77ow", "link": "https://stackoverflow.com/users/1229023/raina77ow"}, "edited": false, "score": 2, "creation_date": 1442271388, "post_id": 32575108, "comment_id": 53005415, "body": "One word - <code>chomp</code> (right after <code>foreach</code>)."}, {"owner": {"reputation": 45, "user_id": 5221128, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/da6ce44d3899cb5f04c7bde972281257?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin M", "link": "https://stackoverflow.com/users/5221128/kevin-m"}, "reply_to_user": {"reputation": 91128, "user_id": 1229023, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/75b840909603c238921a81032efd57eb?s=128&d=identicon&r=PG", "display_name": "raina77ow", "link": "https://stackoverflow.com/users/1229023/raina77ow"}, "edited": false, "score": 0, "creation_date": 1442271686, "post_id": 32575108, "comment_id": 53005490, "body": "That should be it. Thank you, Raina."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 91128, "user_id": 1229023, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/75b840909603c238921a81032efd57eb?s=128&d=identicon&r=PG", "display_name": "raina77ow", "link": "https://stackoverflow.com/users/1229023/raina77ow"}, "edited": false, "score": 0, "creation_date": 1442300599, "post_id": 32575108, "comment_id": 53013664, "body": "@raina77ow please post that as an answer so Kevin M can accept it and the question doesn&#39;t show as unanswered. Thanks."}], "owner": {"reputation": 45, "user_id": 5221128, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/da6ce44d3899cb5f04c7bde972281257?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin M", "link": "https://stackoverflow.com/users/5221128/kevin-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "closed_date": 1442313028, "answer_count": 0, "score": 1, "last_activity_date": 1442281097, "creation_date": 1442270894, "question_id": 32575108, "link": "https://stackoverflow.com/questions/32575108/perl-code-not-working-as-intended", "closed_reason": "Duplicate", "title": "Perl code not working as intended", "body": "<p>I am trying to compare a list of servers registered with spacewalk and the server list in database. The below doesn't print it the server exists in database. The server does exist in database, but it isn't printing it out. Can you please check and let me know as to where I might done a mistake? </p>\n\n<pre><code>my @swsrvlist = qx(/bin/spacecmd -q system_list 2&gt;/dev/null);\nforeach(@swsrvlist)\n{$select1 = \"select host from hosts where host = '$_';\";\nprint \"running SQL --- \" . $select1. \" --- against mysql.\\n\" if $debug;\n\nmy $records1 = $dbh-&gt;prepare($select1);\n$records1-&gt;execute;\nwhile (my @data1 = $records1-&gt;fetchrow_array) {\nprint \"$data1[0]\";\n$records1-&gt;finish;\n}\n\n  }\n</code></pre>\n\n<p>When I do turn on debugging in the script, I get below result.</p>\n\n<pre><code>running SQL --- select host from hosts where (host = 'swprxy01.xxxx.com\n'); --- against mysql.\n running SQL --- select host from hosts where (host = 'bldtest10.xxxx.com\n'); --- against mysql.\n</code></pre>\n"}, {"tags": ["perl", "accessor", "moose"], "answers": [{"comments": [{"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1442260181, "post_id": 32572615, "comment_id": 53000770, "body": "<code>$self-&gt;{age}</code> will work since <code>Moose</code> objects are <code>HashRef</code>s but I do see your point.  That looks like it is probably the &quot;best practice&quot; way of doing things."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 1, "creation_date": 1442260936, "post_id": 32572615, "comment_id": 53001129, "body": "@tjwrona1992 Sure, they&#39;re hashrefs, but is it documented that an attribute called <code>age</code> will be stored under the key <code>age</code>?"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1491376340, "post_id": 32572615, "comment_id": 73518674, "body": "@melpomene it&#39;s somewhat implied, everyone knows it&#39;s true, and it couldn&#39;t change without breaking a significant amount of code... but no, I can&#39;t find any doc that clearly states it as a fact :) I consider it implicit in the fact that the default metaclass is also the <i>minimal</i> one on top of vanilla perl conventions, but I do recognize the fuzziness of that argument."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 4, "last_activity_date": 1442259605, "creation_date": 1442259605, "answer_id": 32572615, "question_id": 32572421, "link": "https://stackoverflow.com/questions/32572421/writing-to-read-only-attributes-inside-a-perl-moose-class/32572615#32572615", "title": "Writing to read-only attributes inside a Perl Moose class", "body": "<p>I don't think <code>$self-&gt;{age}</code> is a documented interface, so it's not even guaranteed to work.</p>\n\n<p>In this case I'd use a private writer as described in <a href=\"https://metacpan.org/pod/Moose::Manual::Attributes#Accessor-methods\" rel=\"nofollow\">https://metacpan.org/pod/Moose::Manual::Attributes#Accessor-methods</a>:</p>\n\n<pre><code>has 'weight' =&gt; (\n    is     =&gt; 'ro',\n    writer =&gt; '_set_weight',\n);\n</code></pre>\n\n<p>You could even automate this using <code>'rwp'</code> from <a href=\"https://metacpan.org/pod/MooseX::AttributeShortcuts#is-rwp\" rel=\"nofollow\">https://metacpan.org/pod/MooseX::AttributeShortcuts#is-rwp</a>:</p>\n\n<pre><code>use MooseX::AttributeShortcuts;\n\nhas 'weight' =&gt; (\n    is =&gt; 'rwp',\n);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1442260314, "post_id": 32572706, "comment_id": 53000842, "body": "Great answer @friedo.  One question though, what do you do when you want to set an attributes value conditionally like so: <code>$person-&gt;{age} = $person-&gt;is_baby() ? 1 : 52;</code>.  How do you do something like that following the correct <code>Moose</code> format?"}, {"owner": {"reputation": 62484, "user_id": 20745, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dc5d9e7efea07afc78d5408680438507?s=128&d=identicon&r=PG", "display_name": "friedo", "link": "https://stackoverflow.com/users/20745/friedo"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1442260420, "post_id": 32572706, "comment_id": 53000891, "body": "@tjwrona1992 in that case, I would use a lazy builder method for the <code>age</code> attribute."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1442260626, "post_id": 32572706, "comment_id": 53000994, "body": "Interesting, i will look into lazy builder methods."}, {"owner": {"reputation": 62484, "user_id": 20745, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dc5d9e7efea07afc78d5408680438507?s=128&d=identicon&r=PG", "display_name": "friedo", "link": "https://stackoverflow.com/users/20745/friedo"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1442260913, "post_id": 32572706, "comment_id": 53001115, "body": "@tjwrona1992 I added an example of how you might use a lazy builder."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1442261205, "post_id": 32572706, "comment_id": 53001260, "body": "Thanks @friedo, that looks like what I need!"}, {"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "edited": false, "score": 2, "creation_date": 1442262284, "post_id": 32572706, "comment_id": 53001713, "body": "Your <code>_real_age</code> suggestion is a bad idea.  Instead, use a read-only attribute with a private writer method:  <code>is =&gt; &#39;ro&#39;, writer =&gt; &#39;_set_age&#39;</code>.  That way, you don&#39;t incur the overhead of two method calls just to read the attribute."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1442262709, "post_id": 32572706, "comment_id": 53001938, "body": "You can also introduce <a href=\"https://metacpan.org/pod/Moose::Meta::Attribute::Native\" rel=\"nofollow noreferrer\">a trait</a> to your age attribute. That will give you the <i>birthday</i> method and you can still make sure the age only goes up. We don&#39;t get younger after all. Let&#39;s use the <a href=\"https://metacpan.org/pod/Moose::Meta::Attribute::Native::Trait::Counter\" rel=\"nofollow noreferrer\">Counter trait</a>. <code>has age =&gt; ( is =&gt; &#39;ro&#39;, traits  =&gt; [&#39;Counter&#39;], isa =&gt; &#39;Num&#39;, handles =&gt; { celebrate_birthday =&gt; &#39;inc&#39; }, );</code> Now we have a read-only age that has to be a number. Trying to set it will blow up, but you can increment by calling <code>$bob-&gt;celebrate_birthday</code>."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1442323368, "post_id": 32572706, "comment_id": 53028065, "body": "Haven&#39;t messed with traits much, I will need to look into them! Thanks @simbabque"}], "tags": [], "owner": {"reputation": 62484, "user_id": 20745, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dc5d9e7efea07afc78d5408680438507?s=128&d=identicon&r=PG", "display_name": "friedo", "link": "https://stackoverflow.com/users/20745/friedo"}, "is_accepted": true, "score": 8, "last_activity_date": 1442262762, "last_edit_date": 1442262762, "creation_date": 1442259930, "answer_id": 32572706, "question_id": 32572421, "link": "https://stackoverflow.com/questions/32572421/writing-to-read-only-attributes-inside-a-perl-moose-class/32572706#32572706", "title": "Writing to read-only attributes inside a Perl Moose class", "body": "<p>When using Moose, the best practice is to always use the generated accessor methods, even when inside the object's own class. Here are a few reasons:</p>\n\n<ol>\n<li><p>The accessor methods may be over-ridden by a child class that does something special. Calling <code>$self-&gt;age()</code> assures that the correct method will be called.</p></li>\n<li><p>There may be method modifiers, such as <code>before</code> or <code>after</code>, attached to the attribute. Accessing the hash value directly will skip these. </p></li>\n<li><p>There may be a predicate or clearer method attached to the attribute (e.g. <code>has_age</code>). Messing with the hash value directly will confuse them.</p></li>\n<li><p>Hash keys are subject to typos. If you accidentally say <code>$self-&gt;{aeg}</code> the bug will not be caught right away. But <code>$self-&gt;aeg</code> will die since the method does not exist. </p></li>\n<li><p>Consistency is good. There's no reason to use one style in one place and another style elsewhere. It makes the code easier to understand for newbs as well.</p></li>\n</ol>\n\n<p>In the specific case of a read-only attribute, here are some strategies:</p>\n\n<ol>\n<li><p>Make your objects truly immutable. If you need to change a value, construct a new object which is a clone of the old one with the new value. </p></li>\n<li><p>Use a read-only attribute to store the real age, and specify a private writer method</p></li>\n</ol>\n\n<p>For example:</p>\n\n<pre><code>package Person;\nuse Moose;\n\nhas age =&gt; ( is =&gt; 'ro', isa =&gt; 'Int', writer =&gt; '_set_age' );\n\nsub HAPPY_BIRTHDAY {\n    my $self = shift;\n    $self-&gt;_set_age( $self-&gt;age + 1 );\n}\n</code></pre>\n\n<p><em>Update</em></p>\n\n<p>Here's an example of how you might use a lazy builder to set one attribute based on another. </p>\n\n<pre><code>package Person;\nuse Moose;\n\nhas age     =&gt; ( is =&gt; 'rw', isa =&gt; 'Int', lazy =&gt; 1, builder =&gt; '_build_age' );\nhas is_baby =&gt; ( is =&gt; 'rw', isa =&gt; 'Bool', required =&gt; 1 );\n\nsub _build_age { \n    my $self = shift;\n    return $self-&gt;is_baby ? 1 : 52\n}\n</code></pre>\n\n<p>The lazy builder is not called until <code>age</code> is accessed, so you can be sure that <code>is_baby</code> will be there. </p>\n\n<p>Setting the hash element directly will of course skip the builder method.</p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1442260264, "creation_date": 1442260264, "answer_id": 32572785, "question_id": 32572421, "link": "https://stackoverflow.com/questions/32572421/writing-to-read-only-attributes-inside-a-perl-moose-class/32572785#32572785", "title": "Writing to read-only attributes inside a Perl Moose class", "body": "<p>Out-of-the-box perl isn't type safe and doesn't have much in the way of encapsulation, so it's easy to do reckless things. Moose imposes some civilization on your perl object, exchanging security and stability for some liberty. If Moose gets too stifling, the underlying Perl is still there so there are ways to work around any laws the iron fist of Moose tries to lay down.</p>\n\n<p>Once you have wrapped your head around the fact that you have declared an attribute read-only, but you want to change it, even though you also said you wanted it to be read-only, and in most universes you declare something read only because you don't want to change it, then by all means go ahead and update <code>$person-&gt;{age}</code>. After all, you know what you are doing.</p>\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1020, "favorite_count": 1, "accepted_answer_id": 32572706, "answer_count": 3, "score": 6, "last_activity_date": 1442262762, "creation_date": 1442258772, "last_edit_date": 1592644375, "question_id": 32572421, "link": "https://stackoverflow.com/questions/32572421/writing-to-read-only-attributes-inside-a-perl-moose-class", "title": "Writing to read-only attributes inside a Perl Moose class", "body": "<p>Using Perl and <code>Moose</code>, object data can be accessed in 2 ways.</p>\n<p><code>$self-&gt;{attribute}</code> or <code>$self-&gt;attribute()</code></p>\n<p>Here is a simple example demonstrating both:</p>\n<pre><code># Person.pm\npackage Person;\n\nuse strict;\nuse warnings;\nuse Moose;\n\nhas 'name' =&gt; (is =&gt; 'rw', isa =&gt; 'Str');\nhas 'age'  =&gt; (is =&gt; 'ro', isa =&gt; 'Int');\n\nsub HAPPY_BIRTHDAY {\n    my $self = shift;\n    $self-&gt;{age}++;   # Age is accessed through method 1\n}\n\nsub HAPPY_BIRTHDAY2 {\n    my $self = shift;\n    my $age = $self-&gt;age();\n    $self-&gt;age($age + 1);   # Age is accessed through method 2 (this will fail)\n}\n\n1;\n</code></pre>\n<hr />\n<pre><code># test.pl\n#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Person;\n\nmy $person = Person-&gt;new(\n    name =&gt; 'Joe',\n    age  =&gt; 23,\n);\n\nprint $person-&gt;age().&quot;\\n&quot;;\n\n$person-&gt;HAPPY_BIRTHDAY();\nprint $person-&gt;age().&quot;\\n&quot;;\n\n$person-&gt;HAPPY_BIRTHDAY2();\nprint $person-&gt;age().&quot;\\n&quot;;\n</code></pre>\n<p>I know that when you are outside of the <code>Person.pm</code> file it is better to use the <code>$person-&gt;age()</code> version since it prevents you from making dumb mistakes and will stop you from overwriting a read only value, but my question is...</p>\n<blockquote>\n<p><em><strong>Inside</strong></em> of <code>Person.pm</code> is it best to use <code>$self-&gt;{age}</code> or <code>$self-&gt;age()</code>?    Is it considered bad practice to overwrite a read-only attribute <em><strong>within</strong></em> the module itself?</p>\n<p>Should this attribute be changed to a read/write attribute if its value is ever expected to change, or is it considered acceptable to override the read-only aspect of the attribute by using <code>$self-&gt;{age}</code> within the <code>HAPPY_BIRTHDAY</code> function?</p>\n</blockquote>\n"}, {"tags": ["perl", "authentication", "interpolation", "telnet", "expect.pm"], "comments": [{"owner": {"reputation": 8543, "user_id": 5008284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AvSMy.jpg?s=128&g=1", "display_name": "meuh", "link": "https://stackoverflow.com/users/5008284/meuh"}, "edited": false, "score": 0, "creation_date": 1442250953, "post_id": 32569195, "comment_id": 52995801, "body": "add some debug output: <code>$exp-&gt;debug(1);</code>"}, {"owner": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "edited": false, "score": 0, "creation_date": 1442251036, "post_id": 32569195, "comment_id": 52995848, "body": "Yes, <code>@</code> will interpolate in a double-quoted string. However, it will not in a single-quoted string; to use a single <code>send</code> call, you could do something like <code>-&gt;send( &#39;@password&#39; . &quot;\\n&quot; )</code> to concatenate a newline."}, {"owner": {"reputation": 8543, "user_id": 5008284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AvSMy.jpg?s=128&g=1", "display_name": "meuh", "link": "https://stackoverflow.com/users/5008284/meuh"}, "edited": false, "score": 0, "creation_date": 1442600675, "post_id": 32569195, "comment_id": 53163643, "body": "I seem to remember of a bug whereby you can reply too quickly to the password: prompt, whilst the remote is doing an ioctl to suppress echo, and so it can lose characters. Try adding a short <code>sleep 1</code> after matching the password prompt before sending the password."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 13341484, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/d6b14f6ee8d254d4bc466adc57060397?s=128&d=identicon&r=PG", "display_name": "P.Earl", "link": "https://stackoverflow.com/users/13341484/p-earl"}, "is_accepted": false, "score": 0, "last_activity_date": 1587141788, "creation_date": 1587141788, "answer_id": 61276550, "question_id": 32569195, "link": "https://stackoverflow.com/questions/32569195/perl-expect-authentication-with-telnet/61276550#61276550", "title": "Perl Expect authentication with telnet", "body": "<p>When you type the passwords manually, you press Enter, not LineFeed, so better send @password\\r not \\n.\nWhen the terminal is in raw non-echo mode, it might be picky about it.</p>\n"}], "owner": {"reputation": 71, "user_id": 3402702, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e558d2fa71a8a844d3513a6f6f5f8412?s=128&d=identicon&r=PG&f=1", "display_name": "user3402702", "link": "https://stackoverflow.com/users/3402702/user3402702"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 400, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1587141788, "creation_date": 1442246853, "last_edit_date": 1521009742, "question_id": 32569195, "link": "https://stackoverflow.com/questions/32569195/perl-expect-authentication-with-telnet", "title": "Perl Expect authentication with telnet", "body": "<p>I have an active ssh session created with Expect 1.15. In this session I execute the following commands for a second level of authentication. Unfortunately i have to use a strange password which starts with @ character (example @johndoe)</p>\n\n<pre><code>$exp-&gt;send(\"telnet 10.0.0.1\\n\");\n$exp-&gt;expect(\n    10,\n    [\n        qr/login: / =&gt; sub {\n            $exp-&gt;send(\"johndoe\\n\");\n            +exp_continue;\n        }\n    ],\n    [\n        qr/assword: / =&gt; sub {\n            $exp-&gt;send('@johndoe' . \"\\n\");\n            +exp_continue;\n        }\n    ],\n    [\n        qr/\\[\\w+\\]\\#/ =&gt; sub {\n            print \"Success\\n\";\n        }\n    ],\n    [\n        qr/Login incorrect/ =&gt; sub {\n            print \"Login Incorrect\\n\";\n        }\n    ]\n);\n</code></pre>\n\n<p>I tried manually and login is successfull, so credentials are correct. When run the code it goes always in error (Login Incorrect), so i believe that expect doesn't send displayed password but another string. </p>\n\n<p>I tried too many type of interpolations and interpolated strings also with ascii codes.</p>\n\n<p><strong>Anybody knows if the @ character can cause interpolation errors in already interpolated string?</strong></p>\n\n<p>I can't change password otherwise I could exclude an expect bug.</p>\n\n<p>An expert can help me? Thanks!</p>\n\n<p><strong>EDIT. Added logs</strong></p>\n\n<pre><code>login:\nspawn id(3): Does `telnet 10.0.0.1\\r\\nTrying 10.0.0.1...\\r\\nConnected to 10.0.0.1.\\r\\n\\r\\nlogin: '\nmatch:\n  pattern #1: -re `(?-xism:login: )'? YES!!\n    Before match string: `telnet 10.0.0.1\\r\\nTrying 10.0.0.1...\\r\\nConnected to 10.0.0.1.\\r\\n'\n    Match string: `login: '\n    After match string: `'\n    Matchlist: ()\nCalling hook CODE(0x4064e0ac)...\nSending 'johndoe\\n' to spawn id(3)\n        Expect::print('Expect=GLOB(0x405d6920)','johndoe\\x{a}') called at my_script.pl line 195\n        main::__ANON__('Expect=GLOB(0x405d6920)') called at /opt/perl_32/lib/site_perl/5.8.3/Expect.pm line 733\n        Expect::_multi_expect(10,'undef','ARRAY(0x40653f4c)') called at /opt/perl_32/lib/site_perl/5.8.3/Expect.pm line 536\n        Expect::expect('Expect=GLOB(0x405d6920)',10,'ARRAY(0x4064e040)','ARRAY(0x40653ea4)','ARRAY(0x405d6c44)','ARRAY(0x40653f04)') called at my_script.pl line 224\nContinuing expect, restarting timeout...\n\nspawn id(3): Does `'\nmatch:\n  pattern #1: -re `(?-xism:login: )'? No.\n  pattern #2: -re `(?-xism:assword: )'? No.\n  pattern #3: -re `(?-xism:\\[\\w+\\]\\w+\\#)'? No.\n  pattern #4: -re `(?-xism:Login incorrect)'? No.\n\nWaiting for new data (10 seconds)...\nspawn id(3): new data.\nspawn id(3): read 9 byte(s).\njohndoe\n\nspawn id(3): Does `johndoe\\r\\n'\nmatch:\n  pattern #1: -re `(?-xism:login: )'? No.\n  pattern #2: -re `(?-xism:assword: )'? No.\n  pattern #3: -re `(?-xism:\\[\\w+\\]\\w+\\#)'? No.\n  pattern #4: -re `(?-xism:Login incorrect)'? No.\n\nWaiting for new data (10 seconds)...\nspawn id(3): new data.\nspawn id(3): read 10 byte(s).\nPassword:\nspawn id(3): Does `johndoe\\r\\nPassword: '\nmatch:\n  pattern #1: -re `(?-xism:login: )'? No.\n  pattern #2: -re `(?-xism:assword: )'? YES!!\n    Before match string: `johndoe\\r\\nP'\n    Match string: `assword: '\n    After match string: `'\n    Matchlist: ()\nCalling hook CODE(0x404b4f44)...\nSending '@johndoe\\n' to spawn id(3)\n        Expect::print('Expect=GLOB(0x405d6920)','@johndoe\\x{a}') called at my_script.pl line 205\n        main::__ANON__('Expect=GLOB(0x405d6920)') called at /opt/perl_32/lib/site_perl/5.8.3/Expect.pm line 733\n        Expect::_multi_expect(10,'undef','ARRAY(0x40653f4c)') called at /opt/perl_32/lib/site_perl/5.8.3/Expect.pm line 536\n        Expect::expect('Expect=GLOB(0x405d6920)',10,'ARRAY(0x4064e040)','ARRAY(0x40653ea4)','ARRAY(0x405d6c44)','ARRAY(0x40653f04)') called at my_script.pl line 224\nContinuing expect, restarting timeout...\n\nspawn id(3): Does `'\nmatch:\n  pattern #1: -re `(?-xism:login: )'? No.\n  pattern #2: -re `(?-xism:assword: )'? No.\n  pattern #3: -re `(?-xism:\\[\\w+\\]\\w+\\#)'? No.\n  pattern #4: -re `(?-xism:Login incorrect)'? No.\n\nWaiting for new data (10 seconds)...\nspawn id(3): new data.\nspawn id(3): read 2 byte(s).\n\n\nspawn id(3): Does `\\r\\n'\nmatch:\n  pattern #1: -re `(?-xism:login: )'? No.\n  pattern #2: -re `(?-xism:assword: )'? No.\n  pattern #3: -re `(?-xism:\\[\\w+\\]\\w+\\#)'? No.\n  pattern #4: -re `(?-xism:Login incorrect)'? No.\n\nWaiting for new data (10 seconds)...\nspawn id(3): new data.\nspawn id(3): read 24 byte(s).\nLogin incorrect\nlogin:\nspawn id(3): Does `\\r\\nLogin incorrect\\r\\nlogin: '\nmatch:\n  pattern #1: -re `(?-xism:login: )'? YES!!\n    Before match string: `\\r\\nLogin incorrect\\r\\n'\n    Match string: `login: '\n    After match string: `'\n    Matchlist: ()\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1442257090, "post_id": 32569180, "comment_id": 52999185, "body": "It might be worth using something like JSON instead of Dumper output."}], "answers": [{"comments": [{"owner": {"reputation": 3590, "user_id": 2066468, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c3d95d4d4529fc0d8169cf4844db5369?s=128&d=identicon&r=PG", "display_name": "Dirty Penguin", "link": "https://stackoverflow.com/users/2066468/dirty-penguin"}, "edited": false, "score": 0, "creation_date": 1442247455, "post_id": 32569278, "comment_id": 52993883, "body": "Thanks @swornabsent. In the event that I&#39;m given a string by another application (which dumped the array not the ref), is there a way to read the string back into an array?"}, {"owner": {"reputation": 984, "user_id": 1107958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Zy3c.jpg?s=128&g=1", "display_name": "swornabsent", "link": "https://stackoverflow.com/users/1107958/swornabsent"}, "reply_to_user": {"reputation": 3590, "user_id": 2066468, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c3d95d4d4529fc0d8169cf4844db5369?s=128&d=identicon&r=PG", "display_name": "Dirty Penguin", "link": "https://stackoverflow.com/users/2066468/dirty-penguin"}, "edited": false, "score": 0, "creation_date": 1442248005, "post_id": 32569278, "comment_id": 52994186, "body": "@DirtyPenguin that could be a challenge, I&#39;m not sure of a hard and fast way or a module that does it offhand. I think all you&#39;d have to do is write something to strip the leading  <code>$VAR2..$VAR_n_</code> strings and wrap square brackets around the whole thing, should be doable. Sorry I can&#39;t point you to something quick and easy."}, {"owner": {"reputation": 3590, "user_id": 2066468, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c3d95d4d4529fc0d8169cf4844db5369?s=128&d=identicon&r=PG", "display_name": "Dirty Penguin", "link": "https://stackoverflow.com/users/2066468/dirty-penguin"}, "edited": false, "score": 0, "creation_date": 1442248056, "post_id": 32569278, "comment_id": 52994214, "body": "I updated the code to dump the array ref. But I still get an undef when I try to eval that string. Any ideas?"}, {"owner": {"reputation": 984, "user_id": 1107958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Zy3c.jpg?s=128&g=1", "display_name": "swornabsent", "link": "https://stackoverflow.com/users/1107958/swornabsent"}, "reply_to_user": {"reputation": 3590, "user_id": 2066468, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c3d95d4d4529fc0d8169cf4844db5369?s=128&d=identicon&r=PG", "display_name": "Dirty Penguin", "link": "https://stackoverflow.com/users/2066468/dirty-penguin"}, "edited": false, "score": 0, "creation_date": 1442248258, "post_id": 32569278, "comment_id": 52994341, "body": "@DirtyPenguin you can keep the array assignment. I edited code that works for me into my answer."}, {"owner": {"reputation": 3590, "user_id": 2066468, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c3d95d4d4529fc0d8169cf4844db5369?s=128&d=identicon&r=PG", "display_name": "Dirty Penguin", "link": "https://stackoverflow.com/users/2066468/dirty-penguin"}, "edited": false, "score": 0, "creation_date": 1442248383, "post_id": 32569278, "comment_id": 52994405, "body": "It works when I remove the <code>use strict;</code> pragma. I&#39;ve updated the question. Any ideas how to get it working with <code>use strict;</code>?"}], "tags": [], "owner": {"reputation": 984, "user_id": 1107958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Zy3c.jpg?s=128&g=1", "display_name": "swornabsent", "link": "https://stackoverflow.com/users/1107958/swornabsent"}, "is_accepted": false, "score": 4, "last_activity_date": 1442248200, "last_edit_date": 1442248200, "creation_date": 1442247111, "answer_id": 32569278, "question_id": 32569180, "link": "https://stackoverflow.com/questions/32569180/perl-read-reverse-data-dumper-back-into-an-array/32569278#32569278", "title": "Perl: Read/Reverse Data Dumper back into an array", "body": "<p>You need to pass an array reference to Dumper rather than the array itself, i.e.:</p>\n\n<pre><code>my $output_string = Dumper(\\@test_array);\n</code></pre>\n\n<p>The following works for me:</p>\n\n<pre><code>my $output_string = Dumper(\\@test_array);\n\n# eval_result should be an Array but is undef\nmy @eval_result = @{eval $output_string};\nprint Dumper(\\@eval_result);\n</code></pre>\n\n<p>results in:</p>\n\n<pre><code>$VAR1 = [\n    {\n        'ding' =&gt; 'dong'\n    }\n];\n</code></pre>\n\n<p>See also examples in <a href=\"http://search.cpan.org/~ilyam/Data-Dumper-2.121/Dumper.pm\" rel=\"nofollow\">Dumper documentation</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 3590, "user_id": 2066468, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c3d95d4d4529fc0d8169cf4844db5369?s=128&d=identicon&r=PG", "display_name": "Dirty Penguin", "link": "https://stackoverflow.com/users/2066468/dirty-penguin"}, "edited": false, "score": 0, "creation_date": 1442248733, "post_id": 32569677, "comment_id": 52994619, "body": "That was just it. Thank you."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 4, "last_activity_date": 1442248553, "creation_date": 1442248553, "answer_id": 32569677, "question_id": 32569180, "link": "https://stackoverflow.com/questions/32569180/perl-read-reverse-data-dumper-back-into-an-array/32569677#32569677", "title": "Perl: Read/Reverse Data Dumper back into an array", "body": "<p>You should be checking <code>$@</code> after any <code>eval</code> that unexpectedly fails.</p>\n\n<p>The <code>Dumper</code> output by default will begin with <code>$VAR1 = ...</code>. If you have not declared <code>$VAR1</code> in the current scope, then under <code>use strict</code> your <code>Dumper</code> output will fail to compile and <code>$@</code> will contain the dreaded <code>Global symbol $VAR1 requires explicit package ...</code> message.</p>\n\n<p>So if you are using <code>strict</code> and calling <code>eval</code> on <code>Dumper</code> output, declare <code>$VAR1</code>.</p>\n\n<pre><code>my $VAR1;\nmy $array_ref = eval($output_string);\ndie $@ unless $array_ref;\n</code></pre>\n"}], "owner": {"reputation": 3590, "user_id": 2066468, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c3d95d4d4529fc0d8169cf4844db5369?s=128&d=identicon&r=PG", "display_name": "Dirty Penguin", "link": "https://stackoverflow.com/users/2066468/dirty-penguin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 739, "favorite_count": 0, "accepted_answer_id": 32569677, "answer_count": 2, "score": 3, "last_activity_date": 1442248557, "creation_date": 1442246815, "last_edit_date": 1442248557, "question_id": 32569180, "link": "https://stackoverflow.com/questions/32569180/perl-read-reverse-data-dumper-back-into-an-array", "title": "Perl: Read/Reverse Data Dumper back into an array", "body": "<p>My goal is to read a string back into an array ref.</p>\n\n<p>I modified the example code <a href=\"http://www.perlmonks.org/?node_id=845672\" rel=\"nofollow\">here</a>. The example on that site uses a Hash and in my case I want to use an Array. Here is what I tried:</p>\n\n<pre><code>use strict;\nuse warnings;\n\n# Build an array with a hash inside\nmy @test_array = ();\nmy %test_hash = ();\n$test_hash{'ding'} = 'dong';\npush @test_array, \\%test_hash;\n\n# Get the Dumper output as a string\nmy $output_string = Dumper(\\@test_array);\n\n# eval_result should be an array but is undef\nmy @eval_result = @{eval $output_string};\n</code></pre>\n\n<p>Running this code produces this error:</p>\n\n<pre><code>Can't use an undefined value as an ARRAY reference at\n        /var/tmp/test_dumper.pl line 30 (#1)\n    (F) A value used as either a hard reference or a symbolic reference must\n    be a defined value.  This helps to delurk some insidious errors.\n\nUncaught exception from user code:\n        Can't use an undefined value as an ARRAY reference at /var/tmp/test_dumper.pl line 30.\n at /var/tmp/test_dumper.pl line 30.\n        main::test_array_dump() called at /var/tmp/test_dumper.pl line 14\n</code></pre>\n\n<p>If I remove the <code>use strict;</code> pragma, the error goes away and I get the expected array.</p>\n\n<p>What is the correct way to get an array variable from a Dumper output?</p>\n"}, {"tags": ["regex", "perl", "sublimetext2", "sublimetext"], "comments": [{"owner": {"reputation": 105827, "user_id": 3037257, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/nq6Zo.jpg?s=128&g=1", "display_name": "Pranav C Balan", "link": "https://stackoverflow.com/users/3037257/pranav-c-balan"}, "edited": false, "score": 2, "creation_date": 1442242638, "post_id": 32567878, "comment_id": 52990900, "body": "add <code>s</code> modifier....."}], "answers": [{"comments": [{"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 0, "creation_date": 1442253401, "post_id": 32568027, "comment_id": 52997120, "body": "For those arriving here to do this in other contexts, note that if you are doing this to a file of text, the text must be accumulated into a single string before this will work, e.g. <code>$content = join(&#39;&#39;,&lt;&gt;);$content =~ s&#47;&lt;div class=&quot;wp-caption&quot;&gt;(.*?)&lt;\\&#47;div&gt;&#47;&lt;figure&gt;$1&lt;\\&#47;figure&gt;&#47;sg;</code>  And don&#39;t chomp the newlines."}], "tags": [], "owner": {"reputation": 8276, "user_id": 3501958, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/weWwl.png?s=128&g=1", "display_name": "hata", "link": "https://stackoverflow.com/users/3501958/hata"}, "is_accepted": true, "score": 4, "last_activity_date": 1442243152, "last_edit_date": 1442243152, "creation_date": 1442242838, "answer_id": 32568027, "question_id": 32567878, "link": "https://stackoverflow.com/questions/32567878/regex-pattern-ignore-whitespace-line-breaks-tabs-etc/32568027#32568027", "title": "Regex pattern - ignore whitespace, line breaks, tabs etc", "body": "<p>How is using like this in Perl?</p>\n\n<pre><code>s/&lt;div class=\"wp-caption\"&gt;(.*?)&lt;\\/div&gt;/&lt;figure&gt;$1&lt;\\/figure&gt;/sg\n</code></pre>\n\n<ul>\n<li>regex replacement operation with <code>s///</code></li>\n<li>To avoid greedy match, using <code>?</code> with <code>.*</code></li>\n<li>The captured string with <code>(.*?)</code> is stored in variable $1.</li>\n<li><code>/</code> inside regex can be escaped with <code>\\</code> (backslash).</li>\n<li><code>s</code> option means single line mode which ignores newlines.</li>\n<li><code>g</code> option means global match (all matches are processed).</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 362892, "user_id": 256196, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d84b558fd67be10d5a718fb94231909d?s=128&d=identicon&r=PG", "display_name": "Bohemian", "link": "https://stackoverflow.com/users/256196/bohemian"}, "is_accepted": false, "score": 1, "last_activity_date": 1442243409, "last_edit_date": 1442243409, "creation_date": 1442242921, "answer_id": 32568057, "question_id": 32567878, "link": "https://stackoverflow.com/questions/32567878/regex-pattern-ignore-whitespace-line-breaks-tabs-etc/32568057#32568057", "title": "Regex pattern - ignore whitespace, line breaks, tabs etc", "body": "<p>This worked for me:</p>\n\n<pre><code>Find: (?s)&lt;div class=\"wp-caption\"&gt;(.*?)&lt;/div&gt;\nReplace: &lt;figure&gt;\\1&lt;/figure&gt;\n</code></pre>\n\n<p>The trick here is <code>(?s)</code> which makes dot match newlines, and <code>(.*?)</code> to capture <em>non-greedily</em> (will stop consuming at the next <code>&lt;/div&gt;</code>) the contents of the <code>&lt;div&gt;</code> tag.</p>\n\n<p><code>\\1</code> is a <em>back reference</em> to the captured group 1.</p>\n"}, {"tags": [], "owner": {"reputation": 71156, "user_id": 1190388, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5391819cc4abe0cb43587c9ef1808dbd?s=128&d=identicon&r=PG", "display_name": "hjpotter92", "link": "https://stackoverflow.com/users/1190388/hjpotter92"}, "is_accepted": false, "score": 0, "last_activity_date": 1442242963, "creation_date": 1442242963, "answer_id": 32568069, "question_id": 32567878, "link": "https://stackoverflow.com/questions/32567878/regex-pattern-ignore-whitespace-line-breaks-tabs-etc/32568069#32568069", "title": "Regex pattern - ignore whitespace, line breaks, tabs etc", "body": "<p>Use the <code>dotall</code> modifier as follows:</p>\n\n<pre><code>(?s)&lt;div[^&gt;]+&gt;(.*?)&lt;/div&gt;\n</code></pre>\n\n<p>and replace with:</p>\n\n<pre><code>&lt;figure&gt;$1&lt;/figure&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 3865062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56689a07b88fdab55716de7d147e8b7d?s=128&d=identicon&r=PG", "display_name": "Paco Esteban", "link": "https://stackoverflow.com/users/3865062/paco-esteban"}, "is_accepted": false, "score": 0, "last_activity_date": 1442243176, "creation_date": 1442243176, "answer_id": 32568136, "question_id": 32567878, "link": "https://stackoverflow.com/questions/32567878/regex-pattern-ignore-whitespace-line-breaks-tabs-etc/32568136#32568136", "title": "Regex pattern - ignore whitespace, line breaks, tabs etc", "body": "<p>This should work, at least for your example:</p>\n\n<pre><code>s/div(\\sclass=\"wp-caption\")?/figure$1/g;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 4009600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d8f018592e2db3f76a2abdd8fd866b5?s=128&d=identicon&r=PG&f=1", "display_name": "Harold Luiz Palazzini Cardozo", "link": "https://stackoverflow.com/users/4009600/harold-luiz-palazzini-cardozo"}, "is_accepted": false, "score": 0, "last_activity_date": 1442243190, "creation_date": 1442243190, "answer_id": 32568140, "question_id": 32567878, "link": "https://stackoverflow.com/questions/32567878/regex-pattern-ignore-whitespace-line-breaks-tabs-etc/32568140#32568140", "title": "Regex pattern - ignore whitespace, line breaks, tabs etc", "body": "<p>On sublime Ctrl+f(Grep)</p>\n\n<p>Find:</p>\n\n<pre><code>&lt;div[^&gt;]*&gt;([\\s\\S]*?)&lt;/div&gt;\n</code></pre>\n\n<p>Replace:</p>\n\n<pre><code>&lt;figure&gt;\\1&lt;/figure&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "is_accepted": false, "score": 3, "last_activity_date": 1442243630, "last_edit_date": 1495540685, "creation_date": 1442243223, "answer_id": 32568150, "question_id": 32567878, "link": "https://stackoverflow.com/questions/32567878/regex-pattern-ignore-whitespace-line-breaks-tabs-etc/32568150#32568150", "title": "Regex pattern - ignore whitespace, line breaks, tabs etc", "body": "<p>Additionally to <a href=\"https://stackoverflow.com/a/32568057/710099\">Bohemian</a>'s answer if you don't want to use inline flags, then you can use a regex trick like this:</p>\n\n<pre><code>&lt;div class=\"wp-caption\"&gt;([\\s\\S]*?)&lt;/div&gt;\n</code></pre>\n\n<p><img src=\"https://www.debuggex.com/i/VeZIThd9B-cylw6k.png\" alt=\"Regular expression visualization\"></p>\n\n<p>With the substitution string:</p>\n\n<pre><code>&lt;figure&gt;$1&lt;/figure&gt;\n</code></pre>\n\n<p><strong><a href=\"https://regex101.com/r/tM4xE4/1\" rel=\"nofollow noreferrer\">Working demo</a></strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/1AeWH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1AeWH.png\" alt=\"enter image description here\"></a></p>\n\n<p>The trick is using <code>[\\s\\S]</code>, meaning you will match spaces and non spaces multiple times (ie. everything).</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5083063, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gv8y7OcKVic/AAAAAAAAAAI/AAAAAAAAAGc/zbQDCDkMM8Q/photo.jpg?sz=128", "display_name": "Shuvankar Chakraborty", "link": "https://stackoverflow.com/users/5083063/shuvankar-chakraborty"}, "is_accepted": false, "score": 0, "last_activity_date": 1442246188, "creation_date": 1442246188, "answer_id": 32569005, "question_id": 32567878, "link": "https://stackoverflow.com/questions/32567878/regex-pattern-ignore-whitespace-line-breaks-tabs-etc/32569005#32569005", "title": "Regex pattern - ignore whitespace, line breaks, tabs etc", "body": "<p>Try this it will work</p>\n\n<pre><code>$variable =~ s!&lt;div(?:\\s+[^&lt;&gt;)?)?&gt;(.*?)&lt;/div&gt;!\n           my $div_cont = $1;\n           \"&lt;figure&gt;\".$div_cont.\"&lt;/figure&gt;\";\n           !sge;\n</code></pre>\n"}], "owner": {"reputation": 7255, "user_id": 473539, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/1d926424a3e39762c9dc32cbc0d39c74?s=128&d=identicon&r=PG&f=1", "display_name": "Badr Hari", "link": "https://stackoverflow.com/users/473539/badr-hari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3023, "favorite_count": 0, "accepted_answer_id": 32568027, "answer_count": 7, "score": 2, "last_activity_date": 1442246188, "creation_date": 1442242419, "question_id": 32567878, "link": "https://stackoverflow.com/questions/32567878/regex-pattern-ignore-whitespace-line-breaks-tabs-etc", "title": "Regex pattern - ignore whitespace, line breaks, tabs etc", "body": "<p>I have something like this:</p>\n\n<pre><code>&lt;div class=\"wp-caption\"&gt;\n    &lt;a href=\"https://\"&gt;\n        &lt;img src=\"https://\" alt=\"blabla\"&gt;\n    &lt;/a&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And I want to replace it with </p>\n\n<pre><code>&lt;figure&gt;\n    &lt;a href=\"https://\"&gt;\n        &lt;img src=\"https://\" alt=\"blabla\"&gt;\n    &lt;/a&gt;\n&lt;/figure&gt;\n</code></pre>\n\n<p>I'm using regex pattern like this:\nSearch for <code>&lt;div class=\"wp-caption\"&gt;(.*)&lt;/div&gt;</code>\nReplace <code>&lt;figure&gt;(.*)&lt;/figure&gt;</code></p>\n\n<p>Which works fine, but not when there are line breaks, spaces, tabs or some other formatting inside, how can I tell to ignore it?</p>\n\n<p>I'm using Sublime Text.. what is using Perl style for expressions.</p>\n"}, {"tags": ["perl", "string-literals"], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1442240870, "post_id": 32567315, "comment_id": 52989655, "body": "<code>\\d</code> is literally <code>\\d</code> inside a <code>q()</code> expression, so you can get away with 3 initial backslashes"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 9, "last_activity_date": 1442242970, "last_edit_date": 1592644375, "creation_date": 1442240765, "answer_id": 32567315, "question_id": 32567207, "link": "https://stackoverflow.com/questions/32567207/perl-q-function-or-single-quote-doesnt-return-the-string-literal-of-unc-path-co/32567315#32567315", "title": "Perl q function or single quote doesn&#39;t return the string literal of UNC path correctly", "body": "<p>From <a href=\"http://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"noreferrer\"><code>perldoc perlop</code></a>:</p>\n<blockquote>\n<p><strong>q/STRING/</strong></p>\n<p><strong>'STRING'</strong></p>\n<p>A single-quoted, literal string. A backslash represents a backslash unless followed by the delimiter or another backslash, in which case the delimiter or backslash is interpolated.</p>\n</blockquote>\n<p>Change:</p>\n<pre><code>my $path = q(\\\\dir1\\dir2\\dir3);\n</code></pre>\n<p>to:</p>\n<pre><code>my $path = q(\\\\\\dir1\\dir2\\dir3);\n</code></pre>\n<hr />\n<p>As for why, it's because Perl lets you include the quote delimiter in your string by escaping it with a backslash:</p>\n<pre><code>my $single_quote = 'This is a single quote: \\'';\n</code></pre>\n<p>But if a backslash before the delimiter always escaped the delimiter, there would be no way to end a string with a backslash:</p>\n<pre><code>my $backslash = 'This is a backslash: \\'; # nope\n</code></pre>\n<p>Allowing backslashes to be escaped too takes care of that:</p>\n<pre><code>my $backslash = 'This is a backslash: \\\\';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4462, "user_id": 1018580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757fafb944d47f80a2336d097dcef7c5?s=128&d=identicon&r=PG", "display_name": "Trenton Trama", "link": "https://stackoverflow.com/users/1018580/trenton-trama"}, "is_accepted": false, "score": 5, "last_activity_date": 1442241976, "last_edit_date": 1442241976, "creation_date": 1442241283, "answer_id": 32567504, "question_id": 32567207, "link": "https://stackoverflow.com/questions/32567207/perl-q-function-or-single-quote-doesnt-return-the-string-literal-of-unc-path-co/32567504#32567504", "title": "Perl q function or single quote doesn&#39;t return the string literal of UNC path correctly", "body": "<p>Interestingly enough, there is only one way to type in double backslashes in a perl string without it being interpolated as a single backslash.<br>\nAs all the other answers showed,  any of the quote operators treat backslashes as  a backslash unless there is another one following it directly.  </p>\n\n<p>The only way to get the double backslashes to display exactly as you have typed them is to use a <a href=\"http://perldoc.perl.org/perlop.html#%3C%3C_EOF_\" rel=\"nofollow\">single quote here-doc</a>.</p>\n\n<pre><code>my $path = &lt;&lt;'VISTA';  \n\\\\dir1\\dir2\\dir3 \nVISTA\nchomp $path;\nprint $path.\"\\n\";\n</code></pre>\n\n<p>Would print it exactly as you've typed it in.</p>\n"}], "owner": {"reputation": 1207, "user_id": 278910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OB8dM.jpg?s=128&g=1", "display_name": "ontherocks", "link": "https://stackoverflow.com/users/278910/ontherocks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "accepted_answer_id": 32567315, "answer_count": 2, "score": 4, "last_activity_date": 1442242970, "creation_date": 1442240417, "question_id": 32567207, "link": "https://stackoverflow.com/questions/32567207/perl-q-function-or-single-quote-doesnt-return-the-string-literal-of-unc-path-co", "title": "Perl q function or single quote doesn&#39;t return the string literal of UNC path correctly", "body": "<p>Perl's q function or single quote is supposed to return the string literal as typed (except <code>\\'</code>). But it doesn't work as expected for the following scenario.\nI want to print the following UNC path</p>\n\n<pre><code>\\\\dir1\\dir2\\dir3\n</code></pre>\n\n<p>So I have used</p>\n\n<pre><code>my $path = q(\\\\dir1\\dir2\\dir3); \n</code></pre>\n\n<p>OR</p>\n\n<pre><code>my $path = '\\\\dir1\\dir2\\dir3'; \n</code></pre>\n\n<p>But this skips one backslash at the front.\nSo if I print it i.e. <code>print $path;</code> it prints</p>\n\n<pre><code>\\dir1\\dir2\\dir3\n</code></pre>\n\n<p>I want to know why? I have to type 3 or 4 backslashes at the beginning of the UNC path to make it work as expected. What am I missing?</p>\n"}, {"tags": ["database", "perl", "postgresql", "cpan"], "comments": [{"owner": {"reputation": 91128, "user_id": 1229023, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/75b840909603c238921a81032efd57eb?s=128&d=identicon&r=PG", "display_name": "raina77ow", "link": "https://stackoverflow.com/users/1229023/raina77ow"}, "edited": false, "score": 0, "creation_date": 1442239620, "post_id": 32566743, "comment_id": 52988788, "body": "Shouldn&#39;t it be all lowercase, like <code>dbi:Pg:dbname=</code>...?"}, {"owner": {"reputation": 1637, "user_id": 1829473, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/37a3d3c86fdac20366db9a8c092a2f56?s=128&d=identicon&r=PG", "display_name": "MaMu", "link": "https://stackoverflow.com/users/1829473/mamu"}, "reply_to_user": {"reputation": 91128, "user_id": 1229023, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/75b840909603c238921a81032efd57eb?s=128&d=identicon&r=PG", "display_name": "raina77ow", "link": "https://stackoverflow.com/users/1229023/raina77ow"}, "edited": false, "score": 0, "creation_date": 1442239845, "post_id": 32566743, "comment_id": 52988935, "body": "I have tred both... Same error."}, {"owner": {"reputation": 44607, "user_id": 833073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b2e4376123477a31727c54096d1d117?s=128&d=identicon&r=PG", "display_name": "fthiella", "link": "https://stackoverflow.com/users/833073/fthiella"}, "edited": false, "score": 0, "creation_date": 1442239943, "post_id": 32566743, "comment_id": 52988995, "body": "how is $dbdriver defined?"}, {"owner": {"reputation": 91128, "user_id": 1229023, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/75b840909603c238921a81032efd57eb?s=128&d=identicon&r=PG", "display_name": "raina77ow", "link": "https://stackoverflow.com/users/1229023/raina77ow"}, "edited": false, "score": 0, "creation_date": 1442240083, "post_id": 32566743, "comment_id": 52989097, "body": "What&#39;s <code>DBI-&gt;trace()</code> output?"}, {"owner": {"reputation": 1637, "user_id": 1829473, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/37a3d3c86fdac20366db9a8c092a2f56?s=128&d=identicon&r=PG", "display_name": "MaMu", "link": "https://stackoverflow.com/users/1829473/mamu"}, "reply_to_user": {"reputation": 44607, "user_id": 833073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b2e4376123477a31727c54096d1d117?s=128&d=identicon&r=PG", "display_name": "fthiella", "link": "https://stackoverflow.com/users/833073/fthiella"}, "edited": false, "score": 0, "creation_date": 1442240233, "post_id": 32566743, "comment_id": 52989205, "body": "@fthiella <code>$dbdriver = DBI-&gt;install_driver(&#39;Pg&#39;);</code>"}, {"owner": {"reputation": 44607, "user_id": 833073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b2e4376123477a31727c54096d1d117?s=128&d=identicon&r=PG", "display_name": "fthiella", "link": "https://stackoverflow.com/users/833073/fthiella"}, "edited": false, "score": 3, "creation_date": 1442240349, "post_id": 32566743, "comment_id": 52989291, "body": "<code>$database = DBI-&gt;connect(...)</code> should work"}, {"owner": {"reputation": 1637, "user_id": 1829473, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/37a3d3c86fdac20366db9a8c092a2f56?s=128&d=identicon&r=PG", "display_name": "MaMu", "link": "https://stackoverflow.com/users/1829473/mamu"}, "reply_to_user": {"reputation": 91128, "user_id": 1229023, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/75b840909603c238921a81032efd57eb?s=128&d=identicon&r=PG", "display_name": "raina77ow", "link": "https://stackoverflow.com/users/1229023/raina77ow"}, "edited": false, "score": 0, "creation_date": 1442240462, "post_id": 32566743, "comment_id": 52989365, "body": "@raina77ow <code>0 at postgres.pm line 129</code> (which is the line where i#m connecting."}, {"owner": {"reputation": 1637, "user_id": 1829473, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/37a3d3c86fdac20366db9a8c092a2f56?s=128&d=identicon&r=PG", "display_name": "MaMu", "link": "https://stackoverflow.com/users/1829473/mamu"}, "reply_to_user": {"reputation": 44607, "user_id": 833073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b2e4376123477a31727c54096d1d117?s=128&d=identicon&r=PG", "display_name": "fthiella", "link": "https://stackoverflow.com/users/833073/fthiella"}, "edited": false, "score": 0, "creation_date": 1442240526, "post_id": 32566743, "comment_id": 52989415, "body": "@fthiella : indeed.   Thank all of you  for your time."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1442246265, "post_id": 32566743, "comment_id": 52993229, "body": "In fact, there&#39;s no need to call <code>DBI-&gt;install_driver(&#39;Pg&#39;)</code>. DBI will load the driver based on the DSN."}], "answers": [{"tags": [], "owner": {"reputation": 44607, "user_id": 833073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b2e4376123477a31727c54096d1d117?s=128&d=identicon&r=PG", "display_name": "fthiella", "link": "https://stackoverflow.com/users/833073/fthiella"}, "is_accepted": true, "score": 3, "last_activity_date": 1442240715, "creation_date": 1442240715, "answer_id": 32567297, "question_id": 32566743, "link": "https://stackoverflow.com/questions/32566743/unable-to-connect-to-postgres/32567297#32567297", "title": "Unable to connect to Postgres", "body": "<p>Change the following line:</p>\n\n<pre><code>$database = $dbdriver-&gt;connect(...)\n</code></pre>\n\n<p>with this:</p>\n\n<pre><code>$database = DBI-&gt;connect(...)\n</code></pre>\n"}], "owner": {"reputation": 1637, "user_id": 1829473, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/37a3d3c86fdac20366db9a8c092a2f56?s=128&d=identicon&r=PG", "display_name": "MaMu", "link": "https://stackoverflow.com/users/1829473/mamu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 32567297, "answer_count": 1, "score": 0, "last_activity_date": 1442240715, "creation_date": 1442239162, "last_edit_date": 1442240157, "question_id": 32566743, "link": "https://stackoverflow.com/questions/32566743/unable-to-connect-to-postgres", "title": "Unable to connect to Postgres", "body": "<p>I'm trying to connect to postgres db. Anyhow I'm doing something wrong as I'm getting this error:</p>\n\n<pre><code>invalid connection option \"DBI:Pg:dbname\"\n</code></pre>\n\n<p>Here the code snippet:</p>\n\n<pre><code>  my $dbinstance = \"DBI:Pg:dbname=DB_NAME;host=111.222.111.2;port=1234\";\n  my $dbdriver = DBI-&gt;install_driver('Pg');\n  if ( !$dbdriver ) {\n      $dberror = \"Load driver: \" . $dbdriver-&gt;errstr;\n  }\n\n  $database = $dbdriver-&gt;connect(\n        $dbinstance,\n        $dbuser,\n        $dbpassword,\n        {\n            RaiseError =&gt; 1,\n            AutoCommit =&gt; 0\n        }\n    ) or die($dbdriver-&gt;errstr);\n</code></pre>\n\n<p>Any clue?</p>\n\n<p>Thanks in advance!</p>\n\n<p>Greetings.</p>\n"}, {"tags": ["regex", "perl", "matching"], "comments": [{"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "edited": false, "score": 0, "creation_date": 1442237468, "post_id": 32566033, "comment_id": 52987231, "body": "The &quot;errors&quot; you mentioned are actually warnings!"}, {"owner": {"reputation": 984, "user_id": 1107958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Zy3c.jpg?s=128&g=1", "display_name": "swornabsent", "link": "https://stackoverflow.com/users/1107958/swornabsent"}, "edited": false, "score": 0, "creation_date": 1442237894, "post_id": 32566033, "comment_id": 52987538, "body": "^^ do you still get the expected output despite those warnings? Also have you inspected <code>$kglocus{$reg}</code> with <code>Data::Dumper</code>?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1442237902, "post_id": 32566033, "comment_id": 52987547, "body": "What if <code>$reg</code> is not a key in <code>%kglocus</code> ? For example, you check <code>if ($A1 eq $kglocus{$reg}-&gt;[3]</code>, but you do not check if <code>$reg</code> is actually a valid key"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1442240364, "creation_date": 1442240364, "answer_id": 32567191, "question_id": 32566033, "link": "https://stackoverflow.com/questions/32566033/perl-to-print-lines-with-matching-fields-from-two-files-error-use-of-uninitial/32567191#32567191", "title": "perl to print lines with matching fields from two files, error: use of uninitialized value in string", "body": "<p>The problem is that the existence of the hash element <code>$kglocus{$reg}</code> forms the first test, that <em>\"Fields 1 and 3 from File1 match fields 2 and 3 from File2\"</em>. But you are treating it as if that test always passes, and simply using it to access elements of the <code>File1</code> record</p>\n\n<p>You need something like a <code>next unless $kglocus{$reg}</code> in there to make it work correctly. I would also prefer to see that value pulled out as a separate variable to avoid indexing the hash over and over again</p>\n\n<p>Here's a solution that will work for you</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.10.1;\nuse autodie;\n\nmy %kglocus;\n{\n    open my $in_fh, '&lt;', 'File1';\n    while ( &lt;$in_fh&gt; ) {\n        next if /chr/;\n\n        my ( $chr, $id, $bp, $a1, $a2 ) = split;\n        my $key = \"${chr}_$bp\";\n        $kglocus{$key} = [ $chr, $id, $bp, $a1, $a2 ];\n    }\n}\n\n{\n    my ( $filename ) = @ARGV;\n    open my $in_fh, '&lt;', $filename;\n    while ( &lt;$in_fh&gt; ) {\n        next if /SNP/;\n\n        my ( $snp, $chr, $bp, $a1, $a2 ) = split;\n        my $key = \"${chr}_$bp\";\n        next unless my $item = $kglocus{$key};\n\n        if ( $a1 eq $item-&gt;[3] and $a2 eq $item-&gt;[4]\n                or length $a1 &gt; 1 and length $item-&gt;[3] &gt; 1\n                or length $a2 &gt; 1 and length $item-&gt;[4] &gt; 1 ) {\n\n            print \"$item-&gt;[1] $snp $bp\\n\";\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 3591048, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vr3Mm.jpg?s=128&g=1", "display_name": "theo4786", "link": "https://stackoverflow.com/users/3591048/theo4786"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 32567191, "answer_count": 1, "score": 0, "last_activity_date": 1442240364, "creation_date": 1442237111, "last_edit_date": 1442239481, "question_id": 32566033, "link": "https://stackoverflow.com/questions/32566033/perl-to-print-lines-with-matching-fields-from-two-files-error-use-of-uninitial", "title": "perl to print lines with matching fields from two files, error: use of uninitialized value in string", "body": "<p>I have two files, which look like:</p>\n\n<p>File1:</p>\n\n<pre><code>chr id position a0 a1\n22 rs4820378:39869209:C:T 39869209 C T\n22 22:16050075:A:G 16050075 A G\n22 22:16050115:G:A 16050115 G A\n22 rs199694733:39913976:C:CT 39913976 C CT\n22 rs139408809:39937958:GC:G 39937958 GC G\n</code></pre>\n\n<p>File2:</p>\n\n<pre><code>SNP CHR BP A1 A2\nrs4820378 22 39869209 C T\nrs4821900 22 39869719 G A\nrs1984662 22 39869997 T G\nrs35629588 22 39913976 I2 D\nrs139408809 22 39937958 D I2\n</code></pre>\n\n<p>I would like to find lines where</p>\n\n<ul>\n<li>Fields 1 and 3 from File1 match fields 2 and 3 from File2</li>\n</ul>\n\n<p>and also either</p>\n\n<ul>\n<li><p>Fields 4 and 5 from File1 are matching fields 4 and 5 from File2</p></li>\n<li><p>Field 4 from both files have more than 1 character</p></li>\n<li><p>Field 5 from both files have more than 1 character</p></li>\n</ul>\n\n<p>Then print out field 2 from File1, and fields 1 and 3 from File2</p>\n\n<p>Code below</p>\n\n<pre><code>#! perl -w\n\nuse strict;\nuse warnings;\n\nmy %kglocus;\nopen( my $loci_in, \"&lt;\", \"File1\" ) or die $!;\nwhile ( &lt;$loci_in&gt; ) {\n\n    next if m/chr/;\n\n    my ( $CHR, $id, $BP, $A1, $A2 ) = split;\n    my $reg = \"${CHR}_$BP\";\n    $kglocus{$reg} = [ $CHR, $id, $BP, $A1, $A2 ];\n}\nclose $loci_in;\n\nmy $filename = shift @ARGV;\nopen( my $input, \"&lt;\", $filename ) or die $!;\nwhile ( &lt;$input&gt; ) {\n    next if m/SNP/;\n\n    my ( $SNP, $CHR, $BP, $A1, $A2 ) = split;\n    my $reg = \"${CHR}_$BP\";\n\n    if ( $A1 eq $kglocus{$reg}-&gt;[3] and $A2 eq $kglocus{$reg}-&gt;[4] ) {\n\n        print \"$kglocus{$reg}-&gt;[1] $SNP $BP\\n\";\n    }\n    elsif ( ( length( $A1 ) &gt; 1 &amp;&amp; length( $kglocus{$reg}-&gt;[3] ) &gt; 1 ) ||\n            ( length( $A2 ) &gt; 1 &amp;&amp; length( $kglocus{$reg}-&gt;[4] ) &gt; 1 ) ) {\n\n        print \"$kglocus{$reg}-&gt;[1] $SNP $BP\\n\";\n    }\n}\n\nclose( $input );\n</code></pre>\n\n<p>I'm getting the error below for all input lines: </p>\n\n<pre><code>Use of uninitialized value in string eq at find_ID.hash.chr22.pl line 23 \nUse of uninitialized value in length at find_ID.hash.chr22.pl line 27\n</code></pre>\n\n<p>Can anyone point out the problem?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 204, "user_id": 1789095, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/qbBuS.jpg?s=128&g=1", "display_name": "arka.b", "link": "https://stackoverflow.com/users/1789095/arka-b"}, "edited": false, "score": 1, "creation_date": 1442231568, "post_id": 32564093, "comment_id": 52983223, "body": "Links to name a few: <a href=\"http://stackoverflow.com/questions/16019848/how-to-add-hours-minutes-seconds-in-perl\" title=\"how to add hours minutes seconds in perl\">stackoverflow.com/questions/16019848/&hellip;</a>, <a href=\"http://stackoverflow.com/questions/20049665/cant-control-how-hours-minutes-seconds-are-formatted-using-perls-datetimefo\" title=\"cant control how hours minutes seconds are formatted using perls datetimefo\">stackoverflow.com/questions/20049665/&hellip;</a>, <a href=\"http://stackoverflow.com/questions/7545664/is-there-a-cpan-module-for-converting-seconds-to-english\" title=\"is there a cpan module for converting seconds to english\">stackoverflow.com/questions/7545664/&hellip;</a>, <a href=\"http://stackoverflow.com/questions/7545664/is-there-a-cpan-module-for-converting-seconds-to-english\" title=\"is there a cpan module for converting seconds to english\">stackoverflow.com/questions/7545664/&hellip;</a>"}, {"owner": {"reputation": 34465, "user_id": 12274, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/98e72a0366a5d8e0a4a5df9ecd1933db?s=128&d=identicon&r=PG&f=1", "display_name": "JB.", "link": "https://stackoverflow.com/users/12274/jb"}, "edited": false, "score": 3, "creation_date": 1442231859, "post_id": 32564093, "comment_id": 52983417, "body": "What&#39;s wrong with the last one you mention?"}, {"owner": {"reputation": 204, "user_id": 1789095, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/qbBuS.jpg?s=128&g=1", "display_name": "arka.b", "link": "https://stackoverflow.com/users/1789095/arka-b"}, "reply_to_user": {"reputation": 34465, "user_id": 12274, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/98e72a0366a5d8e0a4a5df9ecd1933db?s=128&d=identicon&r=PG&f=1", "display_name": "JB.", "link": "https://stackoverflow.com/users/12274/jb"}, "edited": false, "score": 0, "creation_date": 1442232047, "post_id": 32564093, "comment_id": 52983519, "body": "@JB - Adding just those modules will help? What changes should I add in those few lines of code?"}, {"owner": {"reputation": 34465, "user_id": 12274, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/98e72a0366a5d8e0a4a5df9ecd1933db?s=128&d=identicon&r=PG&f=1", "display_name": "JB.", "link": "https://stackoverflow.com/users/12274/jb"}, "edited": false, "score": 3, "creation_date": 1442232171, "post_id": 32564093, "comment_id": 52983586, "body": "Going through half of the relevant StackOverflow answers won&#39;t help if you don&#39;t allow it to."}], "answers": [{"comments": [{"owner": {"reputation": 204, "user_id": 1789095, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/qbBuS.jpg?s=128&g=1", "display_name": "arka.b", "link": "https://stackoverflow.com/users/1789095/arka-b"}, "edited": false, "score": 0, "creation_date": 1442235254, "post_id": 32564668, "comment_id": 52985549, "body": "Your code worked perfectly. Small issue here, my execution time is random. Sometimes it generates <b>311052 s</b> sometimes only <b>17653 s</b> sometimes <b>24 s</b>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 204, "user_id": 1789095, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/qbBuS.jpg?s=128&g=1", "display_name": "arka.b", "link": "https://stackoverflow.com/users/1789095/arka-b"}, "edited": false, "score": 0, "creation_date": 1442235865, "post_id": 32564668, "comment_id": 52985996, "body": "@arka.b: Why is that a problem?"}, {"owner": {"reputation": 204, "user_id": 1789095, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/qbBuS.jpg?s=128&g=1", "display_name": "arka.b", "link": "https://stackoverflow.com/users/1789095/arka-b"}, "edited": false, "score": 0, "creation_date": 1442236116, "post_id": 32564668, "comment_id": 52986176, "body": "Yes, because my execution time varies. <i>Say</i> my execution ran for <b>12 hours 14 seconds</b> it will still show me <b>3 days, 3 hours, 23 minutes, 53 seconds</b>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 204, "user_id": 1789095, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/qbBuS.jpg?s=128&g=1", "display_name": "arka.b", "link": "https://stackoverflow.com/users/1789095/arka-b"}, "edited": false, "score": 1, "creation_date": 1442238438, "post_id": 32564668, "comment_id": 52987962, "body": "@arka.b: My second paragraph says <i>&quot;In this program I have simply added pi days onto the current date and time to get a representative duration. You will, of course, use an actual time&quot;</i>. You need to call <code>localtime</code> again to get the actual end time. I didn&#39;t imagine that all of your execution times were exactly 3.14 days!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 15, "last_activity_date": 1442233252, "creation_date": 1442233252, "answer_id": 32564668, "question_id": 32564093, "link": "https://stackoverflow.com/questions/32564093/convert-seconds-to-days-hours-minutes-using-perl/32564668#32564668", "title": "Convert seconds to days, hours, minutes using Perl", "body": "<p>You could use the <a href=\"http://metacpan.org/module/Time::Piece\"><code>Time::Piece</code></a> and <a href=\"http://metacpan.org/module/Time::Seconds\"><code>Time::Seconds</code></a> modules, which will do all of this for you</p>\n\n<p>In this program I have simply added pi days onto the current date and time to get a representative duration. You will, of course, use an actual time</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Time::Piece;\nuse Time::Seconds qw/ ONE_DAY /;\n\nmy $start = localtime;\nmy $end = $start + int(355/113 * ONE_DAY);\n\nmy $duration = ($end - $start)-&gt;pretty;\nprint \"Total Execution time: $duration\\n\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>Total Execution time: 3 days, 3 hours, 23 minutes, 53 seconds\n</code></pre>\n"}], "owner": {"reputation": 204, "user_id": 1789095, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/qbBuS.jpg?s=128&g=1", "display_name": "arka.b", "link": "https://stackoverflow.com/users/1789095/arka-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6395, "favorite_count": 1, "accepted_answer_id": 32564668, "answer_count": 1, "score": 5, "last_activity_date": 1558085364, "creation_date": 1442231428, "last_edit_date": 1442231933, "question_id": 32564093, "link": "https://stackoverflow.com/questions/32564093/convert-seconds-to-days-hours-minutes-using-perl", "title": "Convert seconds to days, hours, minutes using Perl", "body": "<p>I would like to take <em>control of the output</em> generated in seconds using <strong>perl</strong>. I would like to show the time (in seconds) in the form of days, hours, minutes and seconds to make it <strong>human readable format</strong>. </p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>my $start = time;\n&lt;some other perl codes&gt;\nmy $duration = time - $start;\nprint \"Total Execution time: $duration s\\n\";\n</code></pre>\n\n<p><strong>Output</strong> is 311052 s</p>\n\n<p><strong>Required Output</strong> is 3 days 14 hours 24 minutes 12 seconds </p>\n\n<p><strong>Note:</strong> I am new to Perl. Before you flag this is as duplicate, I have done my research. I have gone through <em>all</em> the stackoverflow where <em>similar solutions</em> were discussed, none helped. My code is very small. What could be the few line changes that could be added. </p>\n"}, {"tags": ["python", "perl", "awk", "hexdump"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 2, "creation_date": 1442227585, "post_id": 32562805, "comment_id": 52980810, "body": "Have you tried <code>xxd</code>?  <a href=\"http://stackoverflow.com/questions/7826526/transform-a-hex-info-to-binary-using-linux-command\" title=\"transform a hex info to binary using linux command\">stackoverflow.com/questions/7826526/&hellip;</a> <a href=\"http://linux.die.net/man/1/xxd\" rel=\"nofollow noreferrer\">linux.die.net/man/1/xxd</a>"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1442227919, "post_id": 32562805, "comment_id": 52980986, "body": "perl has <code>pack</code> <a href=\"http://perldoc.perl.org/functions/pack.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/pack.html</a> which is useful for just that kind of conversion"}, {"owner": {"reputation": 2091, "user_id": 5226287, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/27CtT.png?s=128&g=1", "display_name": "Georg P.", "link": "https://stackoverflow.com/users/5226287/georg-p"}, "edited": false, "score": 0, "creation_date": 1442228603, "post_id": 32562805, "comment_id": 52981369, "body": "Amazing! I knew <code>xxd</code> before, but didn&#39;t know it can also reverse hex dumps. Thanks a lot!"}], "owner": {"reputation": 2091, "user_id": 5226287, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/27CtT.png?s=128&g=1", "display_name": "Georg P.", "link": "https://stackoverflow.com/users/5226287/georg-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "closed_date": 1442227650, "answer_count": 0, "score": 0, "last_activity_date": 1442227355, "creation_date": 1442227355, "question_id": 32562805, "link": "https://stackoverflow.com/questions/32562805/convert-hex-dump-to-binary-file", "closed_reason": "Duplicate", "title": "Convert hex-dump to binary file", "body": "<p>I have some hex dumps that look like this:</p>\n\n<pre><code>0x000eb3a8 0005a5a8 0005a5b0    ........\n0x000eb3b0 000e8918 0005a7b8    ........\n0x000eb3b8 00056018 00000001    ..`.....\n0x000eb3c0 00000000 000b8450    .......P\n0x000eb3c8 000b83b0 00000007    ........\n0x000eb3d0 000b8378 000b8358    ...x...X\n0x000eb3d8 000cef70 000c95f8    ...p....\n</code></pre>\n\n<p>I want to parse the two columns in the middle, read them byte by byte (obviously, two characters represent one byte in hex notation) and write each byte into a <em>binary</em> file. I tried with <code>awk</code>, but couldn't find a way to write binary output. Can somebody help me? Any other tool or scripting language (perl, python, sed, zsh, ...) would also be accepted.</p>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["git", "perl"], "answers": [{"tags": [], "owner": {"reputation": 1289, "user_id": 4081962, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/aeKOK.jpg?s=128&g=1", "display_name": "hilcharge", "link": "https://stackoverflow.com/users/4081962/hilcharge"}, "is_accepted": false, "score": 2, "last_activity_date": 1442247050, "creation_date": 1442247050, "answer_id": 32569258, "question_id": 32561735, "link": "https://stackoverflow.com/questions/32561735/how-to-separate-local-from-shared-code-using-git-repos/32569258#32569258", "title": "How to separate local from shared code using git repos", "body": "<p>Having all files be in the same folder may cause yourself or somebody else difficulty when trying to determine what source each file came from, and accordingly how it should be maintained. </p>\n\n<p>If your dependencies are not reflected somehow in your file structure, then do not be surprised when you or someone else starts adding in localized code and committing to your 'core' repository. </p>\n\n<p>You can still have all files be effectively in the same location, however, by using softlinks to the localized directories. </p>\n\n<p>For example, the following softlink structure would give you flat file structure for usage, but hierarchical file structure for dependencies and modular maintenance.</p>\n\n<pre><code> basedir/perl-modules/localmodule1.pm -&gt; ../../localized-code/server1/perlmodules/localmodule1\n basedir/localscript1.pl -&gt; ../localized-code/server1/scripts/localscript1.pl\n</code></pre>\n\n<p>Using a simple install script, you could just generate all softlinks to the relevant <code>server1</code> folder or subfolder when you are installing on a server needing the <code>server1</code> code.</p>\n\n<p>To maintain version control, you can <code>gitignore</code> all files except the core modules in the base directories, and use git <code>submodules</code> to maintain code for each of the localized directories.</p>\n\n<p>That way, you dont need to have all submodules included in all servers. </p>\n\n<p>As a more general potential pitfall, be wary of complicated installation or upgrade processes. Eventually, you are going to install the system on multiple servers. As a potential guidepost for yourself, remember that as per the JOEL test, if you cannot make a build in one step, then your install process is error prone. Test your install process and you will find your own potential issues. If you can run a clean install for all your servers, and still be in a position to do maintenance, then you should be fine! </p>\n"}], "owner": {"reputation": 352, "user_id": 4296256, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a95172d4146a185d7b7e7fd69f4d397c?s=128&d=identicon&r=PG&f=1", "display_name": "alisea", "link": "https://stackoverflow.com/users/4296256/alisea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1442247050, "creation_date": 1442223988, "question_id": 32561735, "link": "https://stackoverflow.com/questions/32561735/how-to-separate-local-from-shared-code-using-git-repos", "title": "How to separate local from shared code using git repos", "body": "<p>I am developing and maintaining a pile of perl glue code for third party applications running on different servers. Each of the servers currently has a git repo for developing the code running there and a push-to-deploy mechanism to roll changes out to the respective production servers.</p>\n\n<p>While there are generally different scripts running on the different servers, I have now noticed that some perl scripts and modules are useful and necessary on all the servers. I want to pull those out so I have a single place where I can maintain them, while still testing and deploying them in conjunction with the code that is local to each server. Local scripts and modules use shared modules, shared scripts use shared modules, but there's no dependency the other way round.</p>\n\n<p>Current repository structure:</p>\n\n<p>Server 1 ~/usr/dev:</p>\n\n<pre><code>localscript1.pl\nsharedscript1.pl\nperl-modules/localmodule1.pm\nperl-modules/sharedmodule1.pm\n</code></pre>\n\n<p>Server 2:</p>\n\n<pre><code>localscript2.pl\nsharedscript1.pl\nperl-modules/localmodule2.pm\nperl-modules/sharedmodule1.pm\n</code></pre>\n\n<p>I want to pull out sharedscript1.pl and sharedmodule1.pm into their own repo for source control, but would prefer for all the scripts to end up in the same folder structure in test and production environments. </p>\n\n<p>My current idea for implementing this involves creating a repo for the shared code, and setting this one up as a remote repo for the local repos.</p>\n\n<p>Shared repo:</p>\n\n<pre><code>sharedscript1.pl\nperl-modules/sharedmodule1.pm\n</code></pre>\n\n<p>I could then define the shared repo as a remote for the local repos and pull commits from there into the local code. After testing and committing there I can use my existing deployment process to push everything to production.</p>\n\n<p>Is this a reasonable setup to use? Any problems/pitfalls with this approach I should be aware of? Is there a better way to handle this case?</p>\n\n<p>Note: I want to keep this fairly lightweight, the final buildout will be three or four local servers, with maybe a dozen scripts and a couple of local modules each. The shared repo would currently have two scripts and one module, with the potential for a few more. </p>\n\n<p>Additional note: I'm running git version 1.6.0.2 </p>\n"}, {"tags": ["bash", "perl", "awk", "sed"], "answers": [{"tags": [], "owner": {"reputation": 9362, "user_id": 2885763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/l4VVG.jpg?s=128&g=1", "display_name": "NeronLeVelu", "link": "https://stackoverflow.com/users/2885763/neronlevelu"}, "is_accepted": false, "score": 0, "last_activity_date": 1442220500, "creation_date": 1442220500, "answer_id": 32560627, "question_id": 32560428, "link": "https://stackoverflow.com/questions/32560428/parsing-csv-file-from-db/32560627#32560627", "title": "Parsing CSV file from DB", "body": "<p>Assuming your input format (OP specify between 2 field but with 1 configuration showed)</p>\n\n<pre><code>awk -F ',' 'NR == 1{print \"HOST#,Primary Hostname,DNS Domain\"} NR &gt; 1{print $2 \",\" $3, \",\" $4}' YourFile\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1406, "user_id": 3958549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jx4XS.jpg?s=128&g=1", "display_name": "bian", "link": "https://stackoverflow.com/users/3958549/bian"}, "is_accepted": false, "score": 2, "last_activity_date": 1442220628, "creation_date": 1442220628, "answer_id": 32560662, "question_id": 32560428, "link": "https://stackoverflow.com/questions/32560428/parsing-csv-file-from-db/32560662#32560662", "title": "Parsing CSV file from DB", "body": "<pre><code>[root@test /tmp]$ awk -F, -vOFS=, '{if(++a[$2,$3,$4]==1)print $2,$3,$4}' a  \n\nHOST#,Primary Hostname,DNS Domain\n11,abc,example.com\n12,bcd,example.com\n13,cde,example.com\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "is_accepted": false, "score": 0, "last_activity_date": 1442221955, "last_edit_date": 1442221955, "creation_date": 1442221112, "answer_id": 32560809, "question_id": 32560428, "link": "https://stackoverflow.com/questions/32560428/parsing-csv-file-from-db/32560809#32560809", "title": "Parsing CSV file from DB", "body": "<p>Assuming you will parse header separately from data, this is how to parse data and remove duplicates:</p>\n\n<pre><code>awk -F',' '{print $2\",\"$3\",\"$4}'|sort -u\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38442, "user_id": 1331399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a22763d295c9d45db0dd0c692bb4051?s=128&d=identicon&r=PG", "display_name": "Thor", "link": "https://stackoverflow.com/users/1331399/thor"}, "is_accepted": false, "score": 1, "last_activity_date": 1442222540, "creation_date": 1442222540, "answer_id": 32561256, "question_id": 32560428, "link": "https://stackoverflow.com/questions/32560428/parsing-csv-file-from-db/32561256#32561256", "title": "Parsing CSV file from DB", "body": "<p>No need  for awk or sed, use cut'n'sort instead:</p>\n\n<pre><code>cut -d, -f2-4 infile | sort -u\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>11,abc,example.com\n12,bcd,example.com\n13,cde,example.com\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 0, "last_activity_date": 1442223234, "creation_date": 1442223234, "answer_id": 32561481, "question_id": 32560428, "link": "https://stackoverflow.com/questions/32560428/parsing-csv-file-from-db/32561481#32561481", "title": "Parsing CSV file from DB", "body": "<p>In Perl you could use <a href=\"https://metacpan.org/pod/Text::CSV#NAME\" rel=\"nofollow\">Text::CSV</a> module, which has rich set of functions to deal with CSV files. </p>\n"}], "owner": {"reputation": 11, "user_id": 4928360, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/230bbccab6fde4d0c1b38983a672afd5?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/4928360/pavel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 5, "score": -1, "last_activity_date": 1442223234, "creation_date": 1442219785, "last_edit_date": 1442220561, "question_id": 32560428, "link": "https://stackoverflow.com/questions/32560428/parsing-csv-file-from-db", "title": "Parsing CSV file from DB", "body": "<p>I have this DB dump file in comma separated CSV file with first line as heading/table name and rest of it are data and some has duplicate entry</p>\n\n<pre><code>HOST_#_INFORMATION,HOST#,Primary Hostname,DNS Domain,IP_#_INFORMATION,Primary IP,DNS\n,11,abc,example.com,,10.10.10.10,10.10.10.1\n,12,bcd,example.com,,10.10.10.11,10.10.10.1\n,13,cde,example.com,,10.10.10.12,10.10.10.1\n,11,abc,example.com,,10.10.10.10,10.10.10.1\n,13,cde,example.com,,10.10.10.12,10.10.10.1\n</code></pre>\n\n<p>I need to print only unique columns between <code>HOST_#_INFORMATION</code> and <code>IP_#_INFORMATIO</code>. Output I am looking for is</p>\n\n<pre><code>HOST#,Primary Hostname,DNS Domain\n11,abc,example.com\n12,bcd,example.com\n12,bcd,example.com\n</code></pre>\n\n<p>I tried with awk gsub option but only printing first line. how can i parse this csv file. I am open to perl option also. Thanks</p>\n"}, {"tags": ["perl", "python-2.7", "http", "https", "keep-alive"], "answers": [{"comments": [{"owner": {"reputation": 21557, "user_id": 1122270, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1ab0e19086582d27abe75b0635f57f43?s=128&d=identicon&r=PG", "display_name": "cnst", "link": "https://stackoverflow.com/users/1122270/cnst"}, "edited": false, "score": 0, "creation_date": 1442214573, "post_id": 32558956, "comment_id": 52973871, "body": "ahhh...  i&#39;m doing requests, not handling them!"}, {"owner": {"reputation": 21557, "user_id": 1122270, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1ab0e19086582d27abe75b0635f57f43?s=128&d=identicon&r=PG", "display_name": "cnst", "link": "https://stackoverflow.com/users/1122270/cnst"}, "edited": false, "score": 0, "creation_date": 1442214740, "post_id": 32558956, "comment_id": 52973977, "body": "so, as i already mentioned, i&#39;m building a client, not a server, so, this answer is unfortunately a non-sequitur"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 21557, "user_id": 1122270, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1ab0e19086582d27abe75b0635f57f43?s=128&d=identicon&r=PG", "display_name": "cnst", "link": "https://stackoverflow.com/users/1122270/cnst"}, "edited": false, "score": 0, "creation_date": 1442214927, "post_id": 32558956, "comment_id": 52974056, "body": "Ah in that case you could use polling to keep polling the server so that it does not time out and await desired response."}, {"owner": {"reputation": 21557, "user_id": 1122270, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1ab0e19086582d27abe75b0635f57f43?s=128&d=identicon&r=PG", "display_name": "cnst", "link": "https://stackoverflow.com/users/1122270/cnst"}, "edited": false, "score": 0, "creation_date": 1442215072, "post_id": 32558956, "comment_id": 52974126, "body": "As mentioned, I don&#39;t know any perl, so, I was looking for a complete working snippet for what appears to be a quite easy task.  I guess I might instead write this in C with libcurl instead."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 1, "last_activity_date": 1442215523, "last_edit_date": 1442215523, "creation_date": 1442214387, "answer_id": 32558956, "question_id": 32558783, "link": "https://stackoverflow.com/questions/32558783/requests-over-https-keep-alive-until-a-good-response-perl-or-python2-7/32558956#32558956", "title": "requests over https keep-alive until a good response (perl or python2.7)", "body": "<blockquote>\n  <p>If you're building a web application that might be deployed in a high\n  network latency situation, consider taking advantage of HTTP/1.1\n  Keep-Alive. This requires that you build up the HTML that your CGI\n  will emit, and then emit the HTML in one piece, with a Content-Length\n  prepended. Something along the lines of</p>\n\n<pre><code>binmode(STDOUT);\n$html = ...;\nprint \"Content-Type: text/html\\r\\n\",\n      \"Content-Length: \", length($html), \"\\r\\n\\r\\n\",\n      $html;\n</code></pre>\n  \n  <p>or, if using CGI,</p>\n\n<pre><code>$html = ...;\nprint header(-content_length =&gt; length($html)), $html;\n</code></pre>\n  \n  <p>will do the trick.</p>\n</blockquote>\n\n<p>Read more at: <a href=\"http://www.perlmonks.org/?node_id=83791\" rel=\"nofollow\">Keep-Alive and Perl</a></p>\n\n<p>Modern web frameworks already provide option to <code>keep-alive</code>. For example in <code>Mojo::Server::Hypnotoad</code> you could say <code>requests =&gt; &lt;number of keep-alive requests per connection&gt;</code>. You could also implement the <a href=\"https://en.wikipedia.org/wiki/Push_technology#Long_polling\" rel=\"nofollow\">polling mechanism</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 85, "user_id": 8216902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89ee5c93502a42e2c78747f7b43724ec?s=128&d=identicon&r=PG", "display_name": "nverkland", "link": "https://stackoverflow.com/users/8216902/nverkland"}, "is_accepted": false, "score": 0, "last_activity_date": 1598308958, "creation_date": 1598308958, "answer_id": 63569615, "question_id": 32558783, "link": "https://stackoverflow.com/questions/32558783/requests-over-https-keep-alive-until-a-good-response-perl-or-python2-7/63569615#63569615", "title": "requests over https keep-alive until a good response (perl or python2.7)", "body": "<pre><code>import requests\n\ndef deal_with_specal_case(res -&gt; request.response):\n    print(&quot;oops server error&quot;)\n\n\n# main\nurl = 'https://www.google.com/?search=foobar'\nres = requests.get(url)\n\nwhile True:\n    if res.response_code == '200' and any(mystring in x for x in res.text.splitlines()): break\n    else:\n        res = requests.get(url)\n        if res.response_code &gt; 499:\n            deal_with_special_case(res)\n            break\n        \n</code></pre>\n"}], "owner": {"reputation": 21557, "user_id": 1122270, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1ab0e19086582d27abe75b0635f57f43?s=128&d=identicon&r=PG", "display_name": "cnst", "link": "https://stackoverflow.com/users/1122270/cnst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1598308958, "creation_date": 1442213688, "question_id": 32558783, "link": "https://stackoverflow.com/questions/32558783/requests-over-https-keep-alive-until-a-good-response-perl-or-python2-7", "title": "requests over https keep-alive until a good response (perl or python2.7)", "body": "<p>I would like to keep sending some HTTP requests over an <code>https</code> <code>Keep-Alive</code> connection until I get a good response (e.g., a response matching a certain string/regex).</p>\n\n<p>What would be the best way to do this in <code>perl</code> or <code>python2.7</code>?  (I'm a C programmer, don't know much Perl or Python.)</p>\n"}, {"tags": ["mysql", "perl", "testing", "percona"], "comments": [{"owner": {"reputation": 24080, "user_id": 1816093, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZImpg.jpg?s=128&g=1", "display_name": "Drew", "link": "https://stackoverflow.com/users/1816093/drew"}, "edited": false, "score": 0, "creation_date": 1442197707, "post_id": 32556469, "comment_id": 52969065, "body": "I need to download this too. It will improve my normal queries, and save me the effort"}, {"owner": {"reputation": 845, "user_id": 2105790, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/ded7e22588e7875f480ecfe5453d83f6?s=128&d=identicon&r=PG", "display_name": "The Georgia", "link": "https://stackoverflow.com/users/2105790/the-georgia"}, "reply_to_user": {"reputation": 24080, "user_id": 1816093, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZImpg.jpg?s=128&g=1", "display_name": "Drew", "link": "https://stackoverflow.com/users/1816093/drew"}, "edited": false, "score": 0, "creation_date": 1442199552, "post_id": 32556469, "comment_id": 52969403, "body": "Drew, you can download from <a href=\"https://launchpad.net/randgen/+download\" rel=\"nofollow noreferrer\">launchpad.net/randgen/+download</a>"}, {"owner": {"reputation": 24080, "user_id": 1816093, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZImpg.jpg?s=128&g=1", "display_name": "Drew", "link": "https://stackoverflow.com/users/1816093/drew"}, "edited": false, "score": 0, "creation_date": 1442199623, "post_id": 32556469, "comment_id": 52969427, "body": "Thank you sir I certainly will"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1442262615, "post_id": 32556469, "comment_id": 53001895, "body": "your DB is bombarded with a lot of random queries within a short period of time. I think you should expect some failure message if it cannot handle this load, the test running through is good news in and of itself."}, {"owner": {"reputation": 845, "user_id": 2105790, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/ded7e22588e7875f480ecfe5453d83f6?s=128&d=identicon&r=PG", "display_name": "The Georgia", "link": "https://stackoverflow.com/users/2105790/the-georgia"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1442282734, "post_id": 32556469, "comment_id": 53008049, "body": "@Bytepusher, but it seems after producing the last line (Repoters: ErrorLog, Backtrace], it just hang there, even if i set duration to time of 360 seconds. Shouldn&#39;t somehow stop after the indicated duration? And what should i interpret &quot;Reporters: ErrorLog, Backtrace&quot; anyway?"}], "answers": [{"tags": [], "owner": {"reputation": 5667, "user_id": 5875887, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3fQa0.jpg?s=128&g=1", "display_name": "Dylan Su", "link": "https://stackoverflow.com/users/5875887/dylan-su"}, "is_accepted": true, "score": 1, "last_activity_date": 1454496343, "creation_date": 1454496343, "answer_id": 35174879, "question_id": 32556469, "link": "https://stackoverflow.com/questions/32556469/mysql-random-query-generator-output-meaning/35174879#35174879", "title": "MySQL Random Query Generator Output meaning", "body": "<p>When you are testing with only one server, like percona 5.6 you used, the only possible output from the randomly generated queries is when the random query fails with ERROR message. At this time, RQG will print these error situation on the console.</p>\n\n<p>If it encounters no error at all, it will run silently until query count reach the \"--queries\" you specified, or the time specified is out. The timeout value in your example is 3600 seconds, which is one hour.</p>\n\n<p>Actually, from my own experience using RQG, the most powerful way for me is using RQG to compare two different servers, specified in --dsn1 and --dsn2.\nIn this case, when the generated random query get different result from the two servers, it will print out the mismatched result.\nUsing this kinds comparison, even dozens of bugs in MySQL 5.6 and 5.7 are found, after they are released.</p>\n"}], "owner": {"reputation": 845, "user_id": 2105790, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/ded7e22588e7875f480ecfe5453d83f6?s=128&d=identicon&r=PG", "display_name": "The Georgia", "link": "https://stackoverflow.com/users/2105790/the-georgia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 35174879, "answer_count": 1, "score": 2, "last_activity_date": 1454496343, "creation_date": 1442197132, "last_edit_date": 1442197508, "question_id": 32556469, "link": "https://stackoverflow.com/questions/32556469/mysql-random-query-generator-output-meaning", "title": "MySQL Random Query Generator Output meaning", "body": "<p>I have downloaded the MySQ Random Query Generator (RQG) that i am testing on my percona 5.6 server. However, i do not know what to make of my results when i run a test. Can somebody help me understand the meaning of my output, and maybe what results i should be expecting? I am new to RQG and i cannot find a good tutorial online that discusses how to interpret the output, or even what to expect when you run a test.</p>\n\n<p>Test command for Percona server5.6:</p>\n\n<pre><code>perl gentest.pl --dsn=dbi:mysql:host=192.168.2.100:port=3306:user=root:password=skret:database=test --threads=1 --queries=100K --grammar=conf/percona_qa/5.6/5.6.yy --duration 3600\n</code></pre>\n\n<p>Output</p>\n\n<pre><code># 2015-09-14T10:16:55 -------------------------------\n# 2015-09-14T10:16:55 Configuration\n# 2015-09-14T10:16:55   debug_server =&gt; ['']\n# 2015-09-14T10:16:55   dsn =&gt; ['dbi:mysql:host=192.168.2.100:port=3306:user=root:password=skret:database=test']\n# 2015-09-14T10:16:55   duration =&gt; 3600\n# 2015-09-14T10:16:55   generator =&gt; FromGrammar\n# 2015-09-14T10:16:55   grammar =&gt; conf/percona_qa/5.6/5.6.yy\n# 2015-09-14T10:16:55   queries =&gt; 100000\n# 2015-09-14T10:16:55   reporters =&gt; ['']\n# 2015-09-14T10:16:55   seed =&gt; 1\n# 2015-09-14T10:16:55   threads =&gt; 1\n# 2015-09-14T10:16:55   transformers =&gt; ['']\n# 2015-09-14T10:16:55   validators =&gt; ['']\n# 2015-09-14T10:16:55   views =&gt; ['', '']\n# 2015-09-14T10:16:55 Reporters: ErrorLog, Backtrace\n</code></pre>\n"}, {"tags": ["python", "linux", "bash", "perl"], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 3139767, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7cf7f66d68f559c4582f8ffa6190103c?s=128&d=identicon&r=PG&f=1", "display_name": "icehac", "link": "https://stackoverflow.com/users/3139767/icehac"}, "edited": false, "score": 0, "creation_date": 1442188086, "post_id": 32555539, "comment_id": 52967224, "body": "It worked like a champ @rici.  Thank you for such a prompt reply!"}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 5, "last_activity_date": 1442187176, "creation_date": 1442187176, "answer_id": 32555539, "question_id": 32555508, "link": "https://stackoverflow.com/questions/32555508/how-to-remove-last-character-of-nth-line-linux/32555539#32555539", "title": "How to remove last character of Nth line linux", "body": "<p>A simple solution using <code>wc</code> to count lines and <code>sed</code> to do the editing:</p>\n\n<pre><code>sed \"$(( $(wc -l &lt;file) - 2))s/,$//\" file\n</code></pre>\n\n<p>That will output the edited file on stdout; you can edit inplace with <code>sed -i</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 5343, "user_id": 612124, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/p8BFg.png?s=128&g=1", "display_name": "M.javid", "link": "https://stackoverflow.com/users/612124/m-javid"}, "is_accepted": false, "score": -1, "last_activity_date": 1442222533, "last_edit_date": 1442222533, "creation_date": 1442187880, "answer_id": 32555609, "question_id": 32555508, "link": "https://stackoverflow.com/questions/32555508/how-to-remove-last-character-of-nth-line-linux/32555609#32555609", "title": "How to remove last character of Nth line linux", "body": "<p>In python 2.* :</p>\n\n<pre><code>with open('/path/of/file', 'w+') as f:\n    f.write(f.read().replace(',\\n]', '\\n]'))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16165, "user_id": 547820, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/29c81a4724590af17510dcd846eea411?s=128&d=identicon&r=PG", "display_name": "Sait", "link": "https://stackoverflow.com/users/547820/sait"}, "is_accepted": false, "score": -1, "last_activity_date": 1442188651, "creation_date": 1442188651, "answer_id": 32555681, "question_id": 32555508, "link": "https://stackoverflow.com/questions/32555508/how-to-remove-last-character-of-nth-line-linux/32555681#32555681", "title": "How to remove last character of Nth line linux", "body": "<pre><code>with open('a.txt', \"a+\") as f:\n    f.seek(-2, 2)                 # Jump to the second last byte.\n    counter = 0\n    while counter &lt; 2:            # if found EOLS still not enough  \n        if f.read(1) == \"\\n\":     # Count EOLs\n            counter += 1\n        f.seek(-2, 1)             # jump back the read byte plus one more\n    position = f.tell()           # save position\n    last_three_lines = f.read()   # read last three lines\n    f.seek(position, 0)           # jump back \n    f.truncate()                  # remove all the rest\n    f.write(last_three_lines[1:]) # write back necessary stuff\n</code></pre>\n\n<h2>Input:</h2>\n\n<pre><code>AAAAAa\nBBBBBb\nCCCCCc\nDDDDDd\nEEEEEe\nFFFFFf\nGGGGGg\n</code></pre>\n\n<h2>Output:</h2>\n\n<pre><code>AAAAAa\nBBBBBb\nCCCCCc\nDDDDDd\nEEEEE\nFFFFFf\nGGGGGg\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1442244673, "post_id": 32555894, "comment_id": 52992246, "body": "Should be chop $file[-3];"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1442190865, "creation_date": 1442190865, "answer_id": 32555894, "question_id": 32555508, "link": "https://stackoverflow.com/questions/32555508/how-to-remove-last-character-of-nth-line-linux/32555894#32555894", "title": "How to remove last character of Nth line linux", "body": "<p>Perl's <a href=\"https://metacpan.org/pod/Tie::File\" rel=\"nofollow\"><code>Tie::File</code></a> module makes this trivial. It has the effect of <em>tying</em> an array to a disk file, so that any changes made to the array are reflected in the file</p>\n\n<p>It would look like this (untested, as I'm posting from my tablet). The path to the input file is expected as a parameter on the command line. The line terminators are already removed from the strings that appear in the array, so a call to <code>chop</code> will remove the last character of the text</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Tie::File;\n\ntie my @file, 'Tie::File', shift or die $!;\n\nchop $line[-3];\n\nuntie @file;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1442241460, "post_id": 32556023, "comment_id": 52990055, "body": "Why the downvote? This is actually better than the accepted solution as it works not just at the end of the file, but everywhere else that needs to be fixed too."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": -1, "last_activity_date": 1442192357, "creation_date": 1442192357, "answer_id": 32556023, "question_id": 32555508, "link": "https://stackoverflow.com/questions/32555508/how-to-remove-last-character-of-nth-line-linux/32556023#32556023", "title": "How to remove last character of Nth line linux", "body": "<p>The following removes commas followed by <code>]</code> or by <code>}</code> (with optional whitespace between the two):</p>\n\n<pre><code>perl -0777pe's/,(?=\\s*[\\]}])//g'\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>perl -0777pe's/,(?=\\s*[\\]}])//g' file.in &gt;file.out   # Read from file\nperl -0777pe's/,(?=\\s*[\\]}])//g' &lt;file.in &gt;file.out  # Read from STDIN\nperl -i~ -0777pe's/,(?=\\s*[\\]}])//g' file            # In-place, with backup\nperl -i -0777pe's/,(?=\\s*[\\]}])//g' file             # In-place, without backup\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 3139767, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7cf7f66d68f559c4582f8ffa6190103c?s=128&d=identicon&r=PG&f=1", "display_name": "icehac", "link": "https://stackoverflow.com/users/3139767/icehac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 510, "favorite_count": 0, "accepted_answer_id": 32555539, "answer_count": 5, "score": 3, "last_activity_date": 1442222533, "creation_date": 1442186833, "question_id": 32555508, "link": "https://stackoverflow.com/questions/32555508/how-to-remove-last-character-of-nth-line-linux", "title": "How to remove last character of Nth line linux", "body": "<p>I have a large document with a similar structure:</p>\n\n<pre><code>Data800,\nData900,\nData1000,\n]\n}\n</code></pre>\n\n<p>How would I go about removing the last character from the 3rd to last line (in this case, where the comma is positioned next to Data1000). The output should look like this:</p>\n\n<pre><code>Data800,\nData900,\nData1000\n]\n}\n</code></pre>\n\n<p>It will always be the 3rd to last line in which needs the last character removed.  Back-end is linux, and can use perl, bash, python, etc.</p>\n"}, {"tags": ["perl", "random", "crypt", "srand"], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1442188363, "post_id": 32554856, "comment_id": 52967274, "body": "but if the password was generated on windows, where (until more recent perls) you only have 15 bits of random value (and no extra seed, afaik), it&#39;s another story"}, {"owner": {"reputation": 63, "user_id": 5331663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae25130879208172da7e8c58bc682ef8?s=128&d=identicon&r=PG&f=1", "display_name": "Reni", "link": "https://stackoverflow.com/users/5331663/reni"}, "edited": false, "score": 0, "creation_date": 1442191731, "post_id": 32554856, "comment_id": 52967952, "body": "Thanks for the fast responses. I will play with the information for the next few days before I mark as answered. I haven&#39;t tried GPU-based yet as well so I will look into it. I was concentrating on the srand/rand side because of hints from people who done this before, however it seems to me that unless he used &quot;use 5.004;&quot; then there is no adequate (easy) way of breaking rand."}, {"owner": {"reputation": 63, "user_id": 5331663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae25130879208172da7e8c58bc682ef8?s=128&d=identicon&r=PG&f=1", "display_name": "Reni", "link": "https://stackoverflow.com/users/5331663/reni"}, "edited": false, "score": 0, "creation_date": 1442774028, "post_id": 32554856, "comment_id": 53210304, "body": "Well after spending a week on it I finally I understand how perl rand works.&lt;br&gt;  1) At the first rand of perl it will call srand(), it uses an integer value as a seed (2^32) possibilities, but the REAL seed has 2 trailing bytes unused.  2) Each rand will actually use the UNIX drand48() and change the seed following the documentation."}, {"owner": {"reputation": 63, "user_id": 5331663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae25130879208172da7e8c58bc682ef8?s=128&d=identicon&r=PG&f=1", "display_name": "Reni", "link": "https://stackoverflow.com/users/5331663/reni"}, "edited": false, "score": 0, "creation_date": 1442774648, "post_id": 32554856, "comment_id": 53210532, "body": "I&#39;m sorry for failing posting replies, having a hard time formatting in a response.  This link explains drand48 on Unix system : <a href=\"http://man7.org/linux/man-pages/man3/drand48.3.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man3/drand48.3.html</a> The real seed has always 6 bytes. Thanks a lot hobbs for putting me in the right direction."}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 4, "last_activity_date": 1442180902, "creation_date": 1442180902, "answer_id": 32554856, "question_id": 32554702, "link": "https://stackoverflow.com/questions/32554702/reversing-rand-in-perl-5-10-0-anyone-know-where-to-find-the-source-code-for-ran/32554856#32554856", "title": "Reversing rand in perl 5.10.0, anyone know where to find the source code for rand/srand?", "body": "<p>You don't want to look in /lib/perl, you want to look in the Perl source.</p>\n\n<p>Here is <a href=\"https://github.com/Perl/perl5/blob/aa00ea78eea85d7a3ca094d43e18e9c8c4da2ebb/util.c#L5192-L5272\" rel=\"nofollow\">Perl_seed() in util.c as of v5.10.0</a>, which is the function called if <code>srand</code> is called without an argument, or if <code>rand</code> is called without <code>srand</code> being called first.</p>\n\n<p>As you can see, on a Unix system with random device support, it uses bytes from <code>/dev/urandom</code> to seed the RNG. On a system without such support, it uses a combination of the time (with microsecond resolution if possible), the PID of the Perl process, and memory locations of various data structures in the Perl interpreter.</p>\n\n<p>In the <code>urandom</code> case, guessing the seed is effectively impossible. In the second case, it's still of difficulty probably similar to brute-forcing the passwords; you have 20 bits of unpredictability from the microsecond timestamp, up to 16 bits from the PID, and an unknown amount from the memory addresses, probably between 0 and 20 bits if you know details of the system where it was run, but up to 64 or 96 bits if you have no knowledge at all.</p>\n\n<p>I would say that attacking Perl's <code>rand</code> by guessing the seed is probably not practical, and reversing it from its output is probably not either, especially if it was run on a system with <code>drand48</code>. Have you considered a GPU-based brute-forcing tool?</p>\n"}], "owner": {"reputation": 63, "user_id": 5331663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae25130879208172da7e8c58bc682ef8?s=128&d=identicon&r=PG&f=1", "display_name": "Reni", "link": "https://stackoverflow.com/users/5331663/reni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 32554856, "answer_count": 1, "score": 1, "last_activity_date": 1461167359, "creation_date": 1442179511, "last_edit_date": 1495539921, "question_id": 32554702, "link": "https://stackoverflow.com/questions/32554702/reversing-rand-in-perl-5-10-0-anyone-know-where-to-find-the-source-code-for-ran", "title": "Reversing rand in perl 5.10.0, anyone know where to find the source code for rand/srand?", "body": "<p>I am doing an assignment where I have a passwd file and I am to find all the passwords in it. Most of them were easy with Jack the ripper and some tweaking but the extra credit requires I find a 8 byte Alphanumeric password generated by rand in perl 5.10.0 and encrypted with crypt.\nI came up with three ways to approaching this:</p>\n\n<ol>\n<li><strong>Brute force</strong>: 62^8 Computations = 300 Weeks on my machine. I could\nrent a server with 300 times my machine power to do in 1 week.\nSomehow that feels like a waste of resources/electricity for an\nextra credit.</li>\n<li><p><strong>Break Crypt</strong>: Not sure on this one, I have however generated a\nchar-set from the other passwords I found, reducing the Incremental\nbrute force to 5 days, but I think that will only work if this\npassword contains only characters present in the previous ones (17\nplain-texts), so maybe if i get lucky! (Highly Unlikely)</p></li>\n<li><p><strong>Break rand</strong>: If I can find the same seed used to generate the\npassword. I can then generate dictionaries to feed to Jack. In order\nto get the seed from the file given to me however I have to\nunderstand how perl is creating the seed (and if it is even possible\non 5.10.0).</p></li>\n</ol>\n\n<p>From what I have researched on earlier Perl versions only the System Time was used as a seed. I made a script that uses the <code>m_time</code> (Time From Epoch) on the passwd file given to me (+-10 to be sure although I'm sure the file got generated in one second) as seed to generate a dictionary, in this format, since I do not know at what call of <code>rand()</code> my password actually starts:</p>\n\n<blockquote>\n  <p>abcdefgh<br> bcdefghi<br> cdefhijk</p>\n</blockquote>\n\n<p>I fed the dictionary to Jack. Of course this didn't work because after Perl 5.004 Perl uses other stuff (the point of my question) to generate a seed.</p>\n\n<p>So, my question is if anyone knows where to find the source code Perl uses to generate the seed, and/or source code for rand/srand. I was looking for something that looked like this, but for version 5.10.0:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/12497045/what-are-the-weaknesses-of-perls-srand-default-seed-post-version-5-004\">What are the weaknesses of Perl&#39;s srand() default seed, post version 5.004?</a></p>\n\n<p>I tried using grep in the <code>/lib/perl</code> directory but I get lost in all the <code>#define</code> structure files. </p>\n\n<p>Also feel free to let me know if you think I am completely offtrack with the assignment and/or any advice on the matter.  </p>\n"}, {"tags": ["perl", "oauth", "mojolicious", "mojolicious-lite"], "answers": [{"tags": [], "owner": {"reputation": 313, "user_id": 5061277, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mv0jT.png?s=128&g=1", "display_name": "Chris Eveland", "link": "https://stackoverflow.com/users/5061277/chris-eveland"}, "is_accepted": true, "score": 4, "last_activity_date": 1449623992, "creation_date": 1449623992, "answer_id": 34169150, "question_id": 32554127, "link": "https://stackoverflow.com/questions/32554127/how-can-i-make-a-request-authorized-with-oauth-with-mojouseragent/34169150#34169150", "title": "How can I make a request authorized with Oauth with Mojo::UserAgent?", "body": "<p>The only thing I see that you're missing is a <a href=\"http://mojolicio.us/perldoc/Mojo/UserAgent#build_tx\" rel=\"nofollow\">call to <code>start</code></a>.  Adding the following two lines to your code block works for me (albeit with a different url/token):</p>\n\n<pre><code>$tx = $ua-&gt;start($tx);\napp-&gt;log-&gt;info($tx-&gt;res-&gt;body);\n</code></pre>\n\n<p>If you have a lot of API calls that need to be authorized, then you might want to try the approach <a href=\"https://msoulier.wordpress.com/2012/08/06/custom-request-headers-in-mojo/\" rel=\"nofollow\">similar to this</a>, shown below:</p>\n\n<pre><code>my $ua = Mojo::UserAgent-&gt;new;\n\n$ua-&gt;on(start =&gt; sub {\n    my ($ua, $tx) = @_;\n    $tx-&gt;req-&gt;headers-&gt;authorization('Bearer &lt;your token here&gt;');\n});\n\nmy $tx = $ua-&gt;get('&lt;your first url here&gt;');\napp-&gt;log-&gt;info(\"Response body:\", $tx-&gt;res-&gt;body);\n\nmy $tx = $ua-&gt;get('&lt;your second url here&gt;');\napp-&gt;log-&gt;info(\"Response body:\", $tx-&gt;res-&gt;body);\n\n# etc...\n</code></pre>\n\n<p>The advantage of this technique is that each time you use the <code>get</code> method of that <code>UserAgent</code> instance, it will fire the start event listener and add the authorization header for you.</p>\n"}], "owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 713, "favorite_count": 1, "accepted_answer_id": 34169150, "answer_count": 1, "score": 2, "last_activity_date": 1449623992, "creation_date": 1442175371, "last_edit_date": 1442176751, "question_id": 32554127, "link": "https://stackoverflow.com/questions/32554127/how-can-i-make-a-request-authorized-with-oauth-with-mojouseragent", "title": "How can I make a request authorized with Oauth with Mojo::UserAgent?", "body": "<p>I am currently trying to make this work:</p>\n\n<pre><code>my $ua = Mojo::UserAgent-&gt;new;\n\nmy $req = Mojo::Message::Request-&gt;new;\nmy $tx = $ua-&gt;build_tx(GET =&gt; 'https://spreadsheets.google.com/feeds/spreadsheets/private/full');\n\napp-&gt;log-&gt;info($c-&gt;session('token'));\n$tx-&gt;req-&gt;headers-&gt;authorization('Bearer ' . $c-&gt;session('token'));\n</code></pre>\n\n<p>where <code>$c-&gt;session('token')</code> is the token I got via <a href=\"http://search.cpan.org/~jhthorsen/Mojolicious-Plugin-OAuth2-1.53/lib/Mojolicious/Plugin/OAuth2.pm\" rel=\"nofollow\">Mojolicious::Plugin::OAuth2</a>.</p>\n\n<p>I only get back an empty response. Doing the same (I think) via curl works OK:</p>\n\n<pre><code>curl -v -H \"authorization: Bearer the_same_token_as_above\" https://spreadsheets.google.com/feeds/spreadsheets/private/full\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["java", "perl"], "answers": [{"tags": [], "owner": {"reputation": 456, "user_id": 5268273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b02464adf091cf031333d25f9056e3b?s=128&d=identicon&r=PG&f=1", "display_name": "dimplex", "link": "https://stackoverflow.com/users/5268273/dimplex"}, "is_accepted": false, "score": 0, "last_activity_date": 1442164918, "creation_date": 1442164918, "answer_id": 32552458, "question_id": 32552338, "link": "https://stackoverflow.com/questions/32552338/how-to-invoke-perl-script-within-jar-archive/32552458#32552458", "title": "How to invoke perl script within jar archive?", "body": "<p>You can access you script as a stream like:</p>\n\n<pre><code>Thread.currentThread().getContextClassLoader().getResourceAsStream(\"script.pl\");\n</code></pre>\n\n<p>if your script is not in the root of classpath, use slashes to point to it like:</p>\n\n<p>\"path/to/script/script.pl\" </p>\n"}, {"tags": [], "owner": {"reputation": 642, "user_id": 1126804, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/wslEr.jpg?s=128&g=1", "display_name": "seninp", "link": "https://stackoverflow.com/users/1126804/seninp"}, "is_accepted": false, "score": 1, "last_activity_date": 1442215099, "last_edit_date": 1495542127, "creation_date": 1442166124, "answer_id": 32552646, "question_id": 32552338, "link": "https://stackoverflow.com/questions/32552338/how-to-invoke-perl-script-within-jar-archive/32552646#32552646", "title": "How to invoke perl script within jar archive?", "body": "<p>This works both, in Eclipse and as a Maven-built jar. Following what is said in this <a href=\"https://stackoverflow.com/questions/11339979/how-to-execute-script-from-jar-file\">SO answer</a>, what I've done is (i) find the original script within the jar, (ii) copy its content into a newly created file within a temporary folder and finally (iii) -- execute that script:</p>\n\n<pre><code>// find the original script within the JAR, \n// mine sits in /src/main/resources/Perl/Hello.pl\nInputStream in = PerlCaller.class.getClass().getResourceAsStream(\"/Perl/Hello.pl\");\n// if the file in the jar's root\n// InputStream in = PerlCaller.class.getClass().getResourceAsStream(\"/Hello.pl\");\nif (null == in) {\n  System.err.println(\"Resource ws not found, exiting...\");\n  System.exit(10);\n}\n\n// copy its content into a temporary file, I use strings since it's a script\nBufferedReader reader = new BufferedReader(new InputStreamReader(in));\nFile scriptFile = File.createTempFile(\"perlscript\", \".pl\");\nBufferedWriter bw = new BufferedWriter(new FileWriter(scriptFile));\nString line;\nwhile ((line = reader.readLine()) != null) {\n  bw.write(line + \"\\n\");\n}\nbw.close();\n\n// execute the newly created file\nString[] command = { \"perl\", scriptFile.getAbsolutePath() };\n\nfinal ProcessBuilder pb = new ProcessBuilder(command);\npb.redirectErrorStream(true);\nfinal Process p = pb.start();\n\nBufferedReader outputReader = new BufferedReader(new InputStreamReader(p.getInputStream()));\nStringBuilder builder = new StringBuilder();\nString outputLine = null;\nwhile ((outputLine = outputReader.readLine()) != null) {\n  builder.append(outputLine);\n  builder.append(System.getProperty(\"line.separator\"));\n}\nString scriptOutput = builder.toString();\n\nSystem.out.println(scriptOutput);\n</code></pre>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 123, "user_id": 4418261, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/m0OzU.jpg?s=128&g=1", "display_name": "Willis V", "link": "https://stackoverflow.com/users/4418261/willis-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "closed_date": 1442285076, "answer_count": 2, "score": 0, "last_activity_date": 1442215099, "creation_date": 1442164274, "question_id": 32552338, "link": "https://stackoverflow.com/questions/32552338/how-to-invoke-perl-script-within-jar-archive", "closed_reason": "Duplicate", "title": "How to invoke perl script within jar archive?", "body": "<p>I have class that invokes perl script:</p>\n\n<pre><code>Runtime.getRuntime().exec(perlscript.pl)\n</code></pre>\n\n<p>The class and the script are placed on the same jar archive. This jar was built by maven. And perl script was placed in root of the jar, but the class not in root path.</p>\n\n<p>When I launch the perl script I get error: \"The system cannot find the file specified\"</p>\n\n<p>Where should I place the script to properly invoke it?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1442163552, "post_id": 32551977, "comment_id": 52960303, "body": "To me, it is not quite clear how you want to separate the value from the next key - by space? But spaces should be ok within delimiters, no? So how do you tell when the next key starts, I believe that is part of the problem, isn&#39;t it."}, {"owner": {"reputation": 59, "user_id": 3922974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c68ebdd4272c07137a305d0f75b54029?s=128&d=identicon&r=PG&f=1", "display_name": "Maelstrom", "link": "https://stackoverflow.com/users/3922974/maelstrom"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1442166028, "post_id": 32551977, "comment_id": 52961091, "body": "Yes that&#39;s right.  If it wasn&#39;t for the spaces inside delimiters I&#39;d just use a couple of splits."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1442184460, "post_id": 32551977, "comment_id": 52966533, "body": "I&#39;m not happy about the sensitivity of your subject line. Would you consider using <i>early-onset dementia</i> or <i>progressive multiple sclerosis</i> so flippantly? Anorexia means a lot more than &quot;a bit thin&quot;."}, {"owner": {"reputation": 59, "user_id": 3922974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c68ebdd4272c07137a305d0f75b54029?s=128&d=identicon&r=PG&f=1", "display_name": "Maelstrom", "link": "https://stackoverflow.com/users/3922974/maelstrom"}, "edited": false, "score": 0, "creation_date": 1442299064, "post_id": 32551977, "comment_id": 53012833, "body": "Those are biological disorders, not behavioural. There&#39;s a huge difference between mocking biology and behaviour and speaking as someone who actually <i>does</i> suffer from a genetic disorder I&#39;m not happy about your attempt to conflate the two. Take that dreck to twitter where it belongs."}], "answers": [{"tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": true, "score": 1, "last_activity_date": 1442163070, "last_edit_date": 1442163070, "creation_date": 1442162599, "answer_id": 32552038, "question_id": 32551977, "link": "https://stackoverflow.com/questions/32551977/my-regexp-has-anorexia/32552038#32552038", "title": "My regexp has anorexia", "body": "<p>Because <code>.+?</code> is non-greedy which stops once it finds a match since you're not giving any regex pattern next to non-greedy form.</p>\n\n<pre><code>my %hash = ($line =~ m/(\\w+)\\s*=\\s*(.+?)(?=\\h+\\w+\\h*=|$)/gm);\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/iW9hJ8/1\" rel=\"nofollow\">DEMO</a></p>\n\n<p><code>(?=\\h+\\w+\\h*=|$)</code> called positive lookahead which asserts that the match must be followed by </p>\n\n<ul>\n<li><code>\\h+</code> one or more horizontal spaces.</li>\n<li><code>\\w+</code> one or more word characters.</li>\n<li><code>\\h*</code> zero or more horizontal spaces.</li>\n<li><code>=</code> equal symbol.</li>\n<li><code>|</code> OR</li>\n<li><code>$</code> End of the line anchor.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1442163415, "post_id": 32552189, "comment_id": 52960250, "body": "which does what OP said: capture everything after first key/value pair"}, {"owner": {"reputation": 59, "user_id": 3922974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c68ebdd4272c07137a305d0f75b54029?s=128&d=identicon&r=PG&f=1", "display_name": "Maelstrom", "link": "https://stackoverflow.com/users/3922974/maelstrom"}, "edited": false, "score": 0, "creation_date": 1442166779, "post_id": 32552189, "comment_id": 52961348, "body": "This answer did actually work for the example posted but it breaks if anything follows a non-delimited match like if test=%result came first and not last."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 1, "last_activity_date": 1442177311, "last_edit_date": 1442177311, "creation_date": 1442163371, "answer_id": 32552189, "question_id": 32551977, "link": "https://stackoverflow.com/questions/32551977/my-regexp-has-anorexia/32552189#32552189", "title": "My regexp has anorexia", "body": "<p><code>.+?</code> says match one or more non-newline characters, preferring as few as possible.</p>\n\n<p>You want <code>.+</code> which matches one or more non-newline characters, preferring as many as possible.</p>\n\n<p>Then it looks like you also need to stop at a matching quote, so</p>\n\n<pre><code>/(\\w+)\\s*=\\s*('.+?'|\".+?\"|.+)/g\n</code></pre>\n\n<p>Though if spaces aren't allowed in unquoted values, you want \u00b4\\S+\u00b4 instead of \u00b4.+\u00b4</p>\n"}], "owner": {"reputation": 59, "user_id": 3922974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c68ebdd4272c07137a305d0f75b54029?s=128&d=identicon&r=PG&f=1", "display_name": "Maelstrom", "link": "https://stackoverflow.com/users/3922974/maelstrom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 32552038, "answer_count": 2, "score": 2, "last_activity_date": 1442177311, "creation_date": 1442162274, "question_id": 32551977, "link": "https://stackoverflow.com/questions/32551977/my-regexp-has-anorexia", "title": "My regexp has anorexia", "body": "<p>I'm trying to get multiple key/value pairs from a string where the keys is on the left of an = character and the value on the right. So the following code</p>\n\n<pre><code>$line = &lt;&lt;END;\nnames='bob,jane, Alexander the Great' colors = \"red,green\" test= %results\nEND\nmy %hash = ($line =~ m/(\\w+)\\s*=\\s*(.+?)/g);\nfor (keys %hash) { print \"$_: $hash{$_}\\n\"; }\n</code></pre>\n\n<p>Should output<br>\nnames: 'bob,jane, Alexander the Great'<br>\ncolors: \"red,green\"<br>\ntest: %results</p>\n\n<p>But my regexp is just returning the first character of the value like<br>\nnames: '<br>\ncolors: \"<br>\nand so on. If I change the second match to (.+) then it matches the whole line after the first =. Can someone fix this regexp?</p>\n"}, {"tags": ["linux", "perl", "ubuntu", "perl-module"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 5, "creation_date": 1442159752, "post_id": 32551028, "comment_id": 52958971, "body": "You might have more success if you would a use version of ubuntu which is still supported. 5.8.8 must have been Ubuntu 8.04/8.10 which is about 7 years old and long out of support. As far as I know that files are already removed from the official ubuntu servers so you will not be able to download the packages from there anymore."}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1442165091, "post_id": 32551028, "comment_id": 52960813, "body": "@SteffenUllrich And <code>libgtk-perl</code> is almost certainly for GTK 1.x, which is even older. GTK 2.0 came out in 2002."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5330988"}, "edited": false, "score": 1, "creation_date": 1442165177, "post_id": 32551028, "comment_id": 52960843, "body": "Well basically i need perlapi-5.8.8 and I am using ubuntu 14.04. I need if to run virtuoso"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1442218098, "post_id": 32551028, "comment_id": 52975649, "body": "Don&#39;t virtuoso supply a version that uses libgtk2-perl? That&#39;s what recent versions of Ubuntu use."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 1, "creation_date": 1442236571, "post_id": 32551028, "comment_id": 52986555, "body": "Related?: <a href=\"http://serverfault.com/questions/631673/virtuoso-opensource-7-1-how-do-i-build-an-ubuntu-deb-package-from-github-sourc\" title=\"virtuoso opensource 7 1 how do i build an ubuntu deb package from github sourc\">serverfault.com/questions/631673/&hellip;</a>"}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1442236652, "post_id": 32551028, "comment_id": 52986618, "body": "<a href=\"http://dev.perl.org/perl5/news/2006/perl-5.8.8.html\" rel=\"nofollow noreferrer\">Perl 5.8.8 is nine years old</a>. You really want to avoid software that old."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5330988"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1442300559, "post_id": 32551028, "comment_id": 53013642, "body": "@DaveCross I am taking about this virtuoso (related to Virtual Machine Introspection) <a href=\"http://amnesia.gtisc.gatech.edu/~moyix/virtuoso/virtuoso_install.html\" rel=\"nofollow noreferrer\">amnesia.gtisc.gatech.edu/~moyix/virtuoso/virtuoso_install.ht&zwnj;&#8203;ml</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1442303471, "post_id": 32551028, "comment_id": 53015266, "body": "@AnasSaeed: Then they are the people you should contact to ask why they are using such old software :-)"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5330988"}, "edited": false, "score": 1, "creation_date": 1442300891, "post_id": 32555904, "comment_id": 53013846, "body": "This is the error I am getting                                                                                     make[1]: *** [xs/Gtk-1.2.o] Error 1 make[1]: Leaving directory `/home/adminuser/.cpan/build/Gtk-Perl-0.7010-2YVCBV/Gtk&#39; make: *** [subdirs] Error 2   MLEHMANN/Gtk-Perl-0.7010.tar.gz   /usr/bin/make -- NOT OK"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5330988"}, "edited": false, "score": 1, "creation_date": 1442335446, "post_id": 32555904, "comment_id": 53036505, "body": "Could you explain a little more cant find a way out"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1442335772, "post_id": 32555904, "comment_id": 53036675, "body": "The message means <code>make</code> was unable to generate <code>xs&#47;Gtk-1.2.o</code>. The way out is to look at the error you got during the attempt to generate <code>xs&#47;Gtk-1.2.o</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1442191279, "last_edit_date": 1442191279, "creation_date": 1442190938, "answer_id": 32555904, "question_id": 32551028, "link": "https://stackoverflow.com/questions/32551028/installing-perlapi-5-8-8/32555904#32555904", "title": "Installing perlapi-5.8.8", "body": "<p>You're trying to use Perl package Gtk. In order to do that, you're trying to install a binary that was built using Perl 5.8.8, which would require you switching to Perl 5.8.8 (or 5.8.9). Aside from being a major step backwards, you can't do what you want without breaking your system. Switching your Perl for Perl 5.8.8 would cause problems.</p>\n\n<p>If your system doesn't provide a package for the Perl module Gtk for your version of Perl, install it yourself as follows (after installing the necessary C libraries):</p>\n\n<pre><code>cpan Gtk\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5330988"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1298, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1442191279, "creation_date": 1442156660, "last_edit_date": 1442162110, "question_id": 32551028, "link": "https://stackoverflow.com/questions/32551028/installing-perlapi-5-8-8", "title": "Installing perlapi-5.8.8", "body": "<p>My problem is that I want to install the package libgtk-perl on ubuntu but it fails due to its unmet dependencies i.e perlapi-5.8.8, I have also tried doing auto dependency installation but that also fails. The problem is that it is a virtual package and even though perl-base is installed (As shown in the instructions) perlapi can't be installed. Please can anyone help me installing perlapu-5.8.8</p>\n\n<pre><code>adminuser@adminuser-VirtualBox:~$ sudo apt-get install libgtk-perl\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nSome packages could not be installed. This may mean that you have\nrequested an impossible situation or if you are using the unstable\ndistribution that some required packages have not yet been created\nor been moved out of Incoming.\nThe following information may help to resolve the situation:\n\nThe following packages have unmet dependencies:\n libgtk-perl : Depends: perlapi-5.8.8\nE: Unable to correct problems, you have held broken packages.\nadminuser@adminuser-VirtualBox:~$ sudo apt-get install perlapi-5.8.8\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nPackage perlapi-5.8.8 is a virtual package provided by:\n  perl-base 5.8.8-7 [Not candidate version]\n\nE: Package 'perlapi-5.8.8' has no installation candidate\nadminuser@adminuser-VirtualBox:~$ sudo apt-get install perl-base\nReading package lists... Done\nBuilding dependency tree        \nReading state information... Done\nperl-base is already the newest version.\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\n</code></pre>\n"}, {"tags": ["regex", "windows", "perl", "encoding", "character-encoding"], "comments": [{"owner": {"reputation": 71156, "user_id": 1190388, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5391819cc4abe0cb43587c9ef1808dbd?s=128&d=identicon&r=PG", "display_name": "hjpotter92", "link": "https://stackoverflow.com/users/1190388/hjpotter92"}, "edited": false, "score": 0, "creation_date": 1442157960, "post_id": 32551019, "comment_id": 52958416, "body": "The <code>sample.txt</code> has <code>LF</code> (or <code>\\n</code>) characters for new-lines. Since notepad only considers <code>CRLF</code> (or <code>\\r\\n</code>) to be new-line markers, it doesn&#39;t display them. As for the substitution pattern, use <code>ignorecase</code> modifier."}, {"owner": {"reputation": 38379, "user_id": 3074564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yo5QG.png?s=128&g=1", "display_name": "Mofi", "link": "https://stackoverflow.com/users/3074564/mofi"}, "edited": false, "score": 0, "creation_date": 1442297442, "post_id": 32551019, "comment_id": 53012051, "body": "MS DOS/Windows text files have usually \\r\\n (carriage return + line-feed) as line termination and Notepad supports only text files with CRLF as line termination. UNIX text files have only \\n as line termination. \\n\\r is invalid for most OS. UltraEdit detects line termination type and displays it in status bar at bottom of main window for active file. See Wikipedia article about <a href=\"https://en.wikipedia.org/wiki/Newline\" rel=\"nofollow noreferrer\">newline</a> for more details."}], "answers": [{"comments": [{"owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "edited": false, "score": 0, "creation_date": 1442159058, "post_id": 32551138, "comment_id": 52958763, "body": "how to add <code>0777</code> and add to what?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "edited": false, "score": 0, "creation_date": 1442160937, "post_id": 32551138, "comment_id": 52959374, "body": "<code>perl</code> command-line option <code>-0777</code>, as an optional argument to <code>perl</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1442157234, "creation_date": 1442157234, "answer_id": 32551138, "question_id": 32551019, "link": "https://stackoverflow.com/questions/32551019/how-to-match-line-feed-via-perl-thats-not-matched-via-normal-code/32551138#32551138", "title": "How to match line feed via perl that&#39;s not matched via normal code?", "body": "<p>You're reading the file a line at a time, but you want to perform matches that span lines. Add <code>-0777</code> to work on the whole file at a time. </p>\n"}], "owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 32551138, "answer_count": 1, "score": 0, "last_activity_date": 1442161265, "creation_date": 1442156610, "last_edit_date": 1442161265, "question_id": 32551019, "link": "https://stackoverflow.com/questions/32551019/how-to-match-line-feed-via-perl-thats-not-matched-via-normal-code", "title": "How to match line feed via perl that&#39;s not matched via normal code?", "body": "<p>I've <strong><a href=\"https://drive.google.com/file/d/0B0wRqgqQ3PVKTk1vSWF2SXFaZFU/view?usp=sharing\" rel=\"nofollow\">Sample.txt</a></strong> file. I use <strong>changes.pl</strong> and <strong>cmd command</strong> to apply find and replace on <em>Sample.txt</em>. I'm looking for removing <em>line 1</em> and <em>line 2</em>. I've tried using each of <strong>perl lines</strong> in <em>changes.pl</em> but I get <strong><a href=\"https://drive.google.com/file/d/0B0wRqgqQ3PVKZkdiRWthbDFFcmc/view?usp=sharing\" rel=\"nofollow\">Result.txt</a></strong> for all.</p>\n\n<p><strong>Sample.txt</strong></p>\n\n<pre><code>line 1\nline 2\nline 3\nline 4\nline 5\nline 6\n</code></pre>\n\n<p><strong>changes.pl</strong></p>\n\n<pre><code>BEGIN {\n    @ARGV = map glob(\"\\\"$_\\\"\"), @ARGV;\n}\n\ns/a/b/g;\n</code></pre>\n\n<p><strong>cmd command</strong></p>\n\n<pre><code>perl -i.bak -p changes.pl My/Files/Directory/Sample.txt\n</code></pre>\n\n<p><strong>perl lines</strong></p>\n\n<pre><code>s/line 1\\nline 2//g; #perl line 1\ns/line 1\\n\\rline 2//g; #perl line 2\ns/line 1\\r?\\n?\\r?line 2//g; #perl line 3\ns/line 1\\s*line 2//g; #perl line 4\ns/line 1.*line 2//su; #perl line 5\ns/line 1[\\s\\S]line 2//g; #perl line 6\n</code></pre>\n\n<p><strong>Result.txt</strong></p>\n\n<pre><code>line 1\nline 2\nline 3\nline 4\nline 5\nline 6\n</code></pre>\n\n<p><strong>Notes</strong></p>\n\n<ul>\n<li>I'm using Perl on Windows.</li>\n<li>When I open <em>Sample.txt</em> with <em>Notepad</em>, I find that <em>line feeds</em> aren't shown (<a href=\"http://i.imgur.com/unSA8i6.png\" rel=\"nofollow\">screenshot</a>), while when I open <em>Result.txt</em> I find that they are shown (<a href=\"http://i.imgur.com/e3oWvjn.png\" rel=\"nofollow\">screenshot</a>). While when I open any of both with <em>UltraEdit</em>, I find that <em>line feeds</em> are shown (<a href=\"http://i.imgur.com/kFMzEMu.png\" rel=\"nofollow\">screenshot</a>). So, I think the problem is related some how to the text encoding. Also, it's advised to download <em>Sample.txt</em> and <em>Result.txt</em> to figure out what is the problem.</li>\n</ul>\n"}, {"tags": ["perl", "shell", "awk"], "comments": [{"owner": {"reputation": 4965, "user_id": 4806927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UoVTT.jpg?s=128&g=1", "display_name": "il_raffa", "link": "https://stackoverflow.com/users/4806927/il-raffa"}, "edited": false, "score": 4, "creation_date": 1442155400, "post_id": 32550750, "comment_id": 52957604, "body": "Did you try doing anything? What is the specifc problem (to read the input file, compute the difference between the time strings, ...)?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1442155970, "post_id": 32550750, "comment_id": 52957758, "body": "What timezone are these times in?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1442156057, "post_id": 32550750, "comment_id": 52957799, "body": "@ysth What difference does that make?"}, {"owner": {"reputation": 1, "user_id": 5330937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6170a1f6dbf9e1b3cd0ca088c2337fe?s=128&d=identicon&r=PG&f=1", "display_name": "Haos", "link": "https://stackoverflow.com/users/5330937/haos"}, "edited": false, "score": 0, "creation_date": 1442156319, "post_id": 32550750, "comment_id": 52957882, "body": "I am writing a php script to do it, but didn&#39;t solve it yet"}, {"owner": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "edited": false, "score": 0, "creation_date": 1442156655, "post_id": 32550750, "comment_id": 52958022, "body": "try this, <code>awk -F &#39;[ :]&#39; &#39;{gsub(&quot;\\&quot;&quot;,&quot;&quot;); if(NR==1){hour0=$2; min0=$3; sec0=$4} printf &quot;%.3f&quot; OFS &quot;%s&quot; OFS &quot;%s\\n&quot;,(($2-hour0)*3600+($3-min0)*60+($4-sec0))&#47;60,$5,$6}&#39; file</code> ...... This is your first post"}, {"owner": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "edited": false, "score": 0, "creation_date": 1442156858, "post_id": 32550750, "comment_id": 52958103, "body": "It is only valid if the hours are recorded on the same day"}, {"owner": {"reputation": 1, "user_id": 5330937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6170a1f6dbf9e1b3cd0ca088c2337fe?s=128&d=identicon&r=PG&f=1", "display_name": "Haos", "link": "https://stackoverflow.com/users/5330937/haos"}, "edited": false, "score": 0, "creation_date": 1442157082, "post_id": 32550750, "comment_id": 52958174, "body": "thanks Jose...there are different days however..."}, {"owner": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "edited": false, "score": 0, "creation_date": 1442157193, "post_id": 32550750, "comment_id": 52958203, "body": "@Haos chansen&#39; solution is better in this case"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1442162099, "post_id": 32550750, "comment_id": 52959778, "body": "@melpomene: if the times aren&#39;t UTC and they span a daylight savings change, you need to take that into account (and some times may be ambiguous ).  Even if they are UTC, that can affect the answer (e.g. the &#39;Z&#39; in chansen&#39;s answer)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5330937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6170a1f6dbf9e1b3cd0ca088c2337fe?s=128&d=identicon&r=PG&f=1", "display_name": "Haos", "link": "https://stackoverflow.com/users/5330937/haos"}, "edited": false, "score": 0, "creation_date": 1442157884, "post_id": 32551118, "comment_id": 52958392, "body": "my original file is very large...it would be hard to copy all the values into the perl script as you suggested...but thanks a lot for trying to help.."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 1, "user_id": 5330937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6170a1f6dbf9e1b3cd0ca088c2337fe?s=128&d=identicon&r=PG&f=1", "display_name": "Haos", "link": "https://stackoverflow.com/users/5330937/haos"}, "edited": false, "score": 0, "creation_date": 1442158363, "post_id": 32551118, "comment_id": 52958546, "body": "@Haos Then I suppose you should leave the file where it&#39;s at and read from it instead, right?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 1, "user_id": 5330937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6170a1f6dbf9e1b3cd0ca088c2337fe?s=128&d=identicon&r=PG&f=1", "display_name": "Haos", "link": "https://stackoverflow.com/users/5330937/haos"}, "edited": false, "score": 1, "creation_date": 1442162591, "post_id": 32551118, "comment_id": 52959953, "body": "@Haos see the first comment to your question.  Stack Overflow isn&#39;t a code writing service.  We&#39;re here to help you with specific questions about how you should write the code, so a single question should ask about reading the file <i>or</i> parsing the lines <i>or</i> calculating the time differences.  Since you didn&#39;t address the comment, this answer is perfectly correct in picking the most likely thing you might be having trouble with."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1, "user_id": 5330937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6170a1f6dbf9e1b3cd0ca088c2337fe?s=128&d=identicon&r=PG&f=1", "display_name": "Haos", "link": "https://stackoverflow.com/users/5330937/haos"}, "edited": false, "score": 0, "creation_date": 1442217919, "post_id": 32551118, "comment_id": 52975561, "body": "@Haos: This is clearly an example to show you how to do the complicated bit (the conversion of the dates). Hard-coding the input dates in the example code is the simplest way to demonstrate that. I&#39;d hope it would be obvious that you should replace that section of the example with code that reads the data from the file. Perhaps I also need to reiterate what others have said - StackOverflow is not a free code-writing service."}], "tags": [], "owner": {"reputation": 2317, "user_id": 711515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5b6edf26acc698b27a585417bb9bb6?s=128&d=identicon&r=PG", "display_name": "chansen", "link": "https://stackoverflow.com/users/711515/chansen"}, "is_accepted": false, "score": 1, "last_activity_date": 1442157120, "creation_date": 1442157120, "answer_id": 32551118, "question_id": 32550750, "link": "https://stackoverflow.com/questions/32550750/replacing-a-time-column-with-values-in-minutes-since-time-0/32551118#32551118", "title": "Replacing a \u201ctime\u201d column with values in minutes since time &quot;0&quot;", "body": "<p>Here is a solution that uses <a href=\"https://metacpan.org/pod/Time::Moment\" rel=\"nofollow\">Time::Moment</a>:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Time::Moment;\n\nmy @times = map {\n   Time::Moment-&gt;from_string($_ . 'Z', lenient =&gt; 1) \n} ('2004-04-19 12:25:00',\n   '2004-04-19 12:26:30',\n   '2004-04-19 12:27:15');\n\nmy $first = $times[0];\nforeach my $time (@times) {\n    printf \"%.3f\\n\", ($time-&gt;rd - $first-&gt;rd) / (1/60/24);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0.000\n1.500\n2.250\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 3, "last_activity_date": 1442159743, "last_edit_date": 1442159743, "creation_date": 1442159270, "answer_id": 32551487, "question_id": 32550750, "link": "https://stackoverflow.com/questions/32550750/replacing-a-time-column-with-values-in-minutes-since-time-0/32551487#32551487", "title": "Replacing a \u201ctime\u201d column with values in minutes since time &quot;0&quot;", "body": "<p>With GNU awk for mktime() and gensub():</p>\n\n<pre><code>$ cat tst.awk\nBEGIN { FS=\"\\\"\" }\n{ mins=mktime(gensub(/[-:]/,\" \",\"g\",$2)) / 60 }\nNR==1 { startMins=mins }\n{ printf \"%.3f%s\\n\", (mins-startMins), $3 }\n\n$ awk -f tst.awk file\n0.000 44 44\n1.500 36 36\n2.250 34 34\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1442160300, "creation_date": 1442160300, "answer_id": 32551656, "question_id": 32550750, "link": "https://stackoverflow.com/questions/32550750/replacing-a-time-column-with-values-in-minutes-since-time-0/32551656#32551656", "title": "Replacing a \u201ctime\u201d column with values in minutes since time &quot;0&quot;", "body": "<p>I am as disappointed as the others who downvoted your question with your reluctance to even attempt to do this for yourself before asking for free help. If you always do this then you will never learn the language and will always have to rely on other people to do it for you. However, I would prefer that you got your solution from Stack Overflow, as I am sure you will only go elsewhere and ask the same question</p>\n\n<p>This will do as you ask. It expects the path to the input file as a parameter on the command line, and sends the output to <code>STDOUT</code></p>\n\n<p>To write the output to a file you would redirect it on the command line, like this</p>\n\n<pre><code>$perl fractional_minutes.pl mydata.txt &gt; mydata_new.txt\n</code></pre>\n\n<p>and if you want to write back to the same file then you will need to use Perl's <em>in-place</em> option, like this</p>\n\n<pre><code>$perl -i.bak fractional_minutes.pl mydata.txt\n</code></pre>\n\n<p>which will save the old file as <code>mydata.txt.bak</code></p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Time::Piece;\nuse Time::Seconds qw/ ONE_MINUTE /;\n\nmy $t0;\n\nwhile ( &lt;&gt; ) {\n\n    s{^\"([^\"]*)\"}{\n        my $t = Time::Piece-&gt;strptime($1, '%Y-%m-%d %H:%M:%S');\n        $t0 = $t if not defined $t0;\n        sprintf('%.3f', ($t - $t0) / ONE_MINUTE);\n    }e;\n\n    print;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>0.000 44 44\n1.500 36 36\n2.250 34 34\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5330937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6170a1f6dbf9e1b3cd0ca088c2337fe?s=128&d=identicon&r=PG&f=1", "display_name": "Haos", "link": "https://stackoverflow.com/users/5330937/haos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "closed_date": 1442178957, "answer_count": 3, "score": -6, "last_activity_date": 1442160300, "creation_date": 1442154891, "last_edit_date": 1442159066, "question_id": 32550750, "link": "https://stackoverflow.com/questions/32550750/replacing-a-time-column-with-values-in-minutes-since-time-0", "closed_reason": "Needs more focus", "title": "Replacing a \u201ctime\u201d column with values in minutes since time &quot;0&quot;", "body": "<p>I think it won't be a straightforward thing to solve, but here it is. I have a file in the following format:</p>\n\n<pre><code>\"2004-04-19 12:25:00\" 44 44\n\"2004-04-19 12:26:30\" 36 36\n\"2004-04-19 12:27:15\" 34 34\n</code></pre>\n\n<p>and I need a file with exact same content, except that the first row of the first column is 0, and remaining values of the first column are times in minutes since time 0 (since first time). Times should be rounded 3 digit after decimal (dot), like this:</p>\n\n<pre><code>0.000 44 44\n1.500 36 36\n2.250 34 34\n</code></pre>\n"}, {"tags": ["perl", "serial-port", "usb", "device"], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 5056723, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VmeDLoLc6UU/AAAAAAAAAAI/AAAAAAAAAC0/5tsL-y4WznM/photo.jpg?sz=128", "display_name": "pradeep v", "link": "https://stackoverflow.com/users/5056723/pradeep-v"}, "edited": false, "score": 0, "creation_date": 1442158807, "post_id": 32550385, "comment_id": 52958684, "body": "By <code>$bus</code> you mean, one of the busses returned by <code>$usb-&gt;list_busses()</code>? What arguments should i pass to <code>$bus-&gt;devices()</code> function to get vendor and product id? Can you also point me to any material where i can refer to. Im also trying to send some messages to the connected USB device."}, {"owner": {"reputation": 7207, "user_id": 410847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a354e99dd64adf823aa72c4ee22a1fc?s=128&d=identicon&r=PG", "display_name": "Turbo J", "link": "https://stackoverflow.com/users/410847/turbo-j"}, "reply_to_user": {"reputation": 7, "user_id": 5056723, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VmeDLoLc6UU/AAAAAAAAAAI/AAAAAAAAAC0/5tsL-y4WznM/photo.jpg?sz=128", "display_name": "pradeep v", "link": "https://stackoverflow.com/users/5056723/pradeep-v"}, "edited": false, "score": 0, "creation_date": 1442160011, "post_id": 32550385, "comment_id": 52959058, "body": "This was literally one mitute of googling <code>perl Device::USB</code>. Use the source, Luke!"}], "tags": [], "owner": {"reputation": 7207, "user_id": 410847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a354e99dd64adf823aa72c4ee22a1fc?s=128&d=identicon&r=PG", "display_name": "Turbo J", "link": "https://stackoverflow.com/users/410847/turbo-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1442152610, "creation_date": 1442152610, "answer_id": 32550385, "question_id": 32550177, "link": "https://stackoverflow.com/questions/32550177/to-access-a-usb-device-from-a-perl-module-windows-platform/32550385#32550385", "title": "To access a USB device from a Perl module (Windows Platform)", "body": "<blockquote>\n  <p>How do i find them?</p>\n</blockquote>\n\n<p>You could use <code>$usb-&gt;list_busses()</code> to get an array of busses, and then check each device in <code>$bus-&gt;devices()</code> for its vendor and product id.</p>\n"}], "owner": {"reputation": 7, "user_id": 5056723, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VmeDLoLc6UU/AAAAAAAAAAI/AAAAAAAAAC0/5tsL-y4WznM/photo.jpg?sz=128", "display_name": "pradeep v", "link": "https://stackoverflow.com/users/5056723/pradeep-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 671, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442152610, "creation_date": 1442151233, "question_id": 32550177, "link": "https://stackoverflow.com/questions/32550177/to-access-a-usb-device-from-a-perl-module-windows-platform", "title": "To access a USB device from a Perl module (Windows Platform)", "body": "<p>I am trying to access the usb device which is connected to my PC on windows platform. I used something like this:</p>\n\n<pre><code>use Device::USB;\n   my $usb = Device::USB-&gt;new();\n   my $dev = $usb-&gt;find_device($VENDOR, $PRODUCT);\n</code></pre>\n\n<p>What are the variables <code>$VENDOR, $PRODUCT</code> exactly to be sent as arguments?\nHow do i find them?</p>\n\n<p>The driver for my device is already installed. Im using Windows 7 and Perl 5.18 version. </p>\n\n<p>Please help in doing this. Thanks in advance.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1442148538, "post_id": 32549520, "comment_id": 52955713, "body": "Is <code>$lanip</code> a string that contains all the IPs? It is not clear from you question. I assumed that it is but according to the code example it seems to contain a single IP."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1442149484, "post_id": 32549520, "comment_id": 52955974, "body": "You should use <code>uniq</code> on an array, not a string. For example: <code>perl -MList::MoreUtils=uniq -E &#39;@a=qw(192.169.30.0 192.169.30.0 192.169.31.0); say $_ for uniq @a;&#39;</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1442150261, "post_id": 32549520, "comment_id": 52956164, "body": "Your last attempt should work if <code>%seen</code> is declared outside of the loop: <code>my %seen; for my $server (@{$servers-&gt;{server}}) { ...</code>"}, {"owner": {"reputation": 11, "user_id": 3211936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdc836103b187cf887fa9ba398df22d9?s=128&d=identicon&r=PG&f=1", "display_name": "user55342", "link": "https://stackoverflow.com/users/3211936/user55342"}, "edited": false, "score": 0, "creation_date": 1442152009, "post_id": 32549520, "comment_id": 52956606, "body": "<code>@melpomene</code> - I tried that but unfortunately doesn&#39;t works either  <code>#!&#47;usr&#47;bin&#47;perl -w use XML::Simple;  my $servers = XMLin(&#39;network.xml&#39;); my %seen ; foreach my $server (@{$servers-&gt;{server}}) {     my %seen ;     my $node =  $server-&gt;{NodeName__1} . &quot;\\n&quot;;     my $lanip = $server-&gt;{CoreLanIP_1__1};     my $mask = $server-&gt;{CoreLanNetmask_1} . &quot;\\n&quot;;      substr($lanip, 11, 3) = &quot;0&quot;;    print $lanip . &quot;\\n&quot; if !  $seen{$lanip}++; }</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1442156884, "post_id": 32549520, "comment_id": 52958109, "body": "@user55342 You have <code>my %seen;</code> twice in there (the outer one being unused because of shadowing). Remove the inner declaration."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1442313133, "post_id": 32549520, "comment_id": 53021171, "body": "Please give some sample XML."}], "answers": [{"tags": [], "owner": {"reputation": 6881, "user_id": 1112503, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PVM67.jpg?s=128&g=1", "display_name": "Ivan Mushketyk", "link": "https://stackoverflow.com/users/1112503/ivan-mushketyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1442150393, "creation_date": 1442150393, "answer_id": 32550065, "question_id": 32549520, "link": "https://stackoverflow.com/questions/32549520/perl-grep-unique-value-from-a-variable/32550065#32550065", "title": "Perl: grep unique value from a variable", "body": "<p>I would suggest to use hash map to find unique values:</p>\n\n<pre><code>#Let's count how many times each ip occures in a list    \n%ip_count;\nfor $ip (@ips) {\n  if (not defined $ip_count{$ip}) {\n    $ip_count{$ip} = 1;\n  }\n  else {\n    $ip_count{$ip}++;\n  }\n}\n\n# Now we need to filter unique ips\n@unique_ips;\nfor $ip (keys(%ip_count)) {\n  if ($ip_count{$ip} == 1) {\n    push(@unique_ips, $ip);\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "is_accepted": false, "score": 0, "last_activity_date": 1442156424, "creation_date": 1442156424, "answer_id": 32550995, "question_id": 32549520, "link": "https://stackoverflow.com/questions/32549520/perl-grep-unique-value-from-a-variable/32550995#32550995", "title": "Perl: grep unique value from a variable", "body": "<p>None of those work since <code>$lanip</code> is a scalar variable and not a list. You'd need to convert it into a list first:</p>\n\n<pre><code>use List::MoreUtils qw(uniq);\nmy $lanip=\"192.169.30.0\n192.169.30.0\n192.169.30.0\n192.169.30.0\n192.169.30.0\n192.169.30.0\n192.169.30.0\n192.169.31.0\n192.169.31.0\n192.169.31.0\n192.169.32.0\n192.169.72.0\n192.169.72.0\n192.169.72.0\n192.169.32.0\n192.169.32.0\";\n\nmy @unique=uniq split(/\\n/,$lanip);\nprint \"@unique\\n\";\n</code></pre>\n\n<p>Or, to print each unique IP on a separate line:</p>\n\n<pre><code>print join \"\\n\", @unique , \"\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1442314688, "creation_date": 1442314688, "answer_id": 32584280, "question_id": 32549520, "link": "https://stackoverflow.com/questions/32549520/perl-grep-unique-value-from-a-variable/32584280#32584280", "title": "Perl: grep unique value from a variable", "body": "<p>Please please please - don't use <code>XML::Simple</code>. Even it's docs suggests not using it. </p>\n\n<p>Also - you <em>look</em> like you're converting your IP address to a network address by just sticking a zero as the last octet. That <em>only</em> works if you're using <code>/24</code> subnets, so really - you shouldn't do that. </p>\n\n<p>Something like <code>Net::IPv4Addr</code> looks like it does that sum for you, giving you a <em>proper</em> address range. (Or you can do bit patterns yourself if you're so inclined - all you're doing is logical AND of the bit mask and IP address. ) </p>\n\n<p>Instead - guessing a bit on your XML structure:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse XML::Twig;\n\nmy %seen;\n\nmy $twig = XML::Twig -&gt; parsefile ( 'file.xml' ); \nforeach my $server ( $twig -&gt; findnodes ('//server') ) {\n    my $lanip = $server-&gt;first_child_text('LanIP');\n    my $mask = $server-&gt;first_child_text('Netmask'); \n    my ($net) = Net::IPv4Addr::ipv4_network( \"$lanip/$mask\" \n    $seen{$net}++; \n}\n\nprint join ( \"\\n\", sort keys %seen ); \n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3211936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdc836103b187cf887fa9ba398df22d9?s=128&d=identicon&r=PG&f=1", "display_name": "user55342", "link": "https://stackoverflow.com/users/3211936/user55342"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1442314688, "creation_date": 1442146356, "last_edit_date": 1442149830, "question_id": 32549520, "link": "https://stackoverflow.com/questions/32549520/perl-grep-unique-value-from-a-variable", "title": "Perl: grep unique value from a variable", "body": "<p>I am using XML::Simple to parse a xml file.</p>\n\n<pre><code>my $servers = XMLin('file.xml');\nfor my $server (@{$servers-&gt;{server}}) {\n    my %seen  = ();\n    my $node =  $server-&gt;{NodeName} . \"\\n\";\n    my $lanip = $server-&gt;{LanIP} . \"\\n\";\n    my $mask = $server-&gt;{Netmask} . \"\\n\";\n\n    substr($lanip, 11, 3) = \"0\";\n    print \"$lanip\\n\";\n}\n</code></pre>\n\n<p>The output here is like below</p>\n\n<pre><code>192.169.30.0\n192.169.30.0\n192.169.30.0\n192.169.30.0\n192.169.30.0\n192.169.30.0\n192.169.30.0\n192.169.31.0\n192.169.31.0\n192.169.31.0\n192.169.32.0\n192.169.72.0\n192.169.72.0\n192.169.72.0\n192.169.32.0\n192.169.32.0\n</code></pre>\n\n<p>Here I only want to grep unique values but I have tried many things but nothing seems to work.</p>\n\n<p>I have used below methods</p>\n\n<pre><code>use List::MoreUtils qw(uniq);\nmy @unique = uniq $lanip;\n</code></pre>\n\n<p>also this</p>\n\n<pre><code>my @unique = do { my %seen; grep { !$seen{$_}++ } $lanip };\n</code></pre>\n\n<p>also this</p>\n\n<pre><code>print $lanip . \"\\n\" if !  $seen{$lanip}++  \n</code></pre>\n\n<p>Can someone please help me here.</p>\n"}, {"tags": ["python", "perl", "curl", "sh", "keep-alive"], "answers": [{"comments": [{"owner": {"reputation": 21557, "user_id": 1122270, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1ab0e19086582d27abe75b0635f57f43?s=128&d=identicon&r=PG", "display_name": "cnst", "link": "https://stackoverflow.com/users/1122270/cnst"}, "edited": false, "score": 0, "creation_date": 1442174622, "post_id": 32546549, "comment_id": 52963918, "body": "hm, i guess i just meant regular keep-alive, not really the pipelining."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 1, "last_activity_date": 1442121322, "creation_date": 1442121322, "answer_id": 32546549, "question_id": 32545866, "link": "https://stackoverflow.com/questions/32545866/wrap-a-loop-to-use-http-pipelining/32546549#32546549", "title": "Wrap a loop to use HTTP pipelining", "body": "<p>A purely shell based solution will probably not work since you have to reuse the same TCP connection when doing keep-alive/pipelining. But, your current solutions isn't fully shell based either since it calls curl and fgrep all the time and if this is your understanding of a shell-solution than your shell could also call Perl and Python.</p>\n\n<p>I recommend to just use the LWP (Perl) or requests (Python) libraries which both use HTTP keep-alive. There are enough examples out there on how to use these libraries, so there is no need to repeat it here. Apart from that behavior might differ between versions (like if HTTP keep-alive is on per default or not, and it is unknown which versions are installed on your unknown OpenBSD version). HTTP pipelining is harder but doesn't speed up the things much more than keep-alive in most cases (might for for really small requests). Also note that keep-alive does not magically speed up everything since it must be supported on the server side too. While most servers implement it, it is sometimes switched off to use less resources.</p>\n"}], "owner": {"reputation": 21557, "user_id": 1122270, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1ab0e19086582d27abe75b0635f57f43?s=128&d=identicon&r=PG", "display_name": "cnst", "link": "https://stackoverflow.com/users/1122270/cnst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1442121322, "creation_date": 1442112990, "question_id": 32545866, "link": "https://stackoverflow.com/questions/32545866/wrap-a-loop-to-use-http-pipelining", "title": "Wrap a loop to use HTTP pipelining", "body": "<p>I have a script that repeatedly makes X requests every Y minutes to the same server, and which currently doesn't use any pipelining / HTTP Keep-Alive, partially because each request has to be preceded by a header in the output.</p>\n\n<pre><code>#!/bin/sh -x\nfor k in $(jot 6)\n  do\n    while read i\n      do\n        echo -n $i\n        curl -s \"http://example.org/?param=$i\" | fgrep result\n    done &lt;&lt;EOF\nsome\nuri\ndata\nhere\nEOF\n    sleep 600\ndone\n</code></pre>\n\n<p>What I want is to convert this to use a single connection to <code>example.com</code> for each batch, instead of establishing a new one for each request.</p>\n\n<p><strong><em>Note that pipelining would be complicated by the fact that a header must be printed</em> with e.g. <code>echo -n $i</code>.</strong></p>\n\n<p><strong>Constraints:</strong> there may be zero or one lines from each request that would match the string we're trying to <code>fgrep</code> (so, the present script is also partially broken, because it wouldn't print <code>\\n</code> if there are 0 lines, either).</p>\n\n<p>I'm ideally looking for an <code>sh</code> solution, but I do have <code>perl</code> and <code>python2.7</code> available, too, if that wouldn't take too long.  (As well as <code>curl</code> and <code>wget</code>, plus all the other stuff that OpenBSD has.)</p>\n"}, {"tags": ["perl"], "owner": {"reputation": 29, "user_id": 5099471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77361a41e4ab5808848c082ac94fc6b2?s=128&d=identicon&r=PG&f=1", "display_name": "Progger", "link": "https://stackoverflow.com/users/5099471/progger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1442170013, "creation_date": 1442096284, "question_id": 32544302, "link": "https://stackoverflow.com/questions/32544302/web-server-hypnotoad-mojolicious-just-vanishing-from-memory", "title": "Web server (Hypnotoad - Mojolicious) just vanishing from memory", "body": "<p>Sometimes Hypnotoad proccess just vanishing from memory, so nobody to serve requests. Nothing strange in it's logs.\nIs there a way to trace life of Hypnotoad?</p>\n"}, {"tags": ["arrays", "perl", "hash", "io"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1442081385, "post_id": 32541533, "comment_id": 52941209, "body": "You should probably use the <a href=\"http://metacpan.org/module/JSON\" rel=\"nofollow noreferrer\"><code>JSON</code> module</a>  to serialise data structures like this"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1442082480, "creation_date": 1442082480, "answer_id": 32542246, "question_id": 32541533, "link": "https://stackoverflow.com/questions/32541533/perl-dumping-array-of-hashes/32542246#32542246", "title": "Perl Dumping array of hashes", "body": "<p>As I wrote in my comment, there are better options for serialising Perl data than <code>Data::Dumper</code>, and <a href=\"http://metacpan.org/module/JSON\" rel=\"nofollow\"><code>JSON</code></a> is one of the better ones</p>\n\n<p>However, if you have a reason to use <code>Data::Dumper</code> then you should set the <code>Terse</code> option so that it doesn't generate variable names like <code>$VAR1</code> or, in your case, <code>$membersDb</code>. You should also use <a href=\"http://perldoc.perl.org/functions/do.html\" rel=\"nofollow\"><code>do</code></a> rather than reading the file and applying <code>eval</code> to the contents</p>\n\n<p>This code works as expected</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\nuse constant MEMBERS_FILE =&gt; 'members.dat';\n\nmy $members_db = do MEMBERS_FILE;\n\nmy @data = @$members_db;\n\nwrite_data(@data);\n\nsub write_data {\n    open my $fh, '&gt;', MEMBERS_FILE or die $!;\n    local $Data::Dumper::Terse = 1;\n    print $fh Dumper(\\@_);\n}\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 3989231, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/885a98bc4dd84e139a0123bbc0d9e875?s=128&d=identicon&r=PG&f=1", "display_name": "xxdefaultxx", "link": "https://stackoverflow.com/users/3989231/xxdefaultxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442111302, "creation_date": 1442077902, "last_edit_date": 1442111302, "question_id": 32541533, "link": "https://stackoverflow.com/questions/32541533/perl-dumping-array-of-hashes", "title": "Perl Dumping array of hashes", "body": "<p>Pretty much just starting out in perl and having some trouble finding out where i am going wrong astray on these 2 subs. They should be reading and writing an array of hashes.. I had the code working when it was just storing a single hash, but since i've tried to adapt it to an array of hashes it seems to have gone quite awry and just writes a single membersDb = [] each time</p>\n\n<pre><code>sub ReadData {\n    my($input) = new FileHandle \"&lt;$dat_file\";\n    local($/) = \"\";\n    my($str) = &lt;$input&gt;;\n    close $input;\n\n    print \"Input: $str\";\n\n    my($membersDb);\n    eval $str;\n    my(@current_members) = @$membersDb;\n}\n\nsub WriteData {\n    my (@data) = @_;\n    my $str = Data::Dumper-&gt;Dump([ \\@data ], [ '$membersDb' ]);\n    my($out) = new FileHandle \"&gt;$dat_file\";\n    print $out $str;\n    close $out;\n}\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1442064544, "post_id": 32539048, "comment_id": 52935972, "body": "1) You can omit the two lines about option parsing, they are irrelevant; 2) When parsing multiple options, it is more convenient to use a hash, e.g. <code>my %opt; getopts(&#39;a:dm:no:st:l&#39;, \\%opt);</code> and now you can use <code>$opt{a}</code> for the <code>a</code> option, etc."}], "answers": [{"comments": [{"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1442064763, "post_id": 32539180, "comment_id": 52936034, "body": "This also removes the final newline marker, which should probably remain, or should be added back on when printing."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1442064846, "post_id": 32539180, "comment_id": 52936052, "body": "Also, this will replace <code>\\r\\n</code> (the DOS line end sequence) with <i>two</i> spaces."}, {"owner": {"reputation": 8276, "user_id": 3501958, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/weWwl.png?s=128&g=1", "display_name": "hata", "link": "https://stackoverflow.com/users/3501958/hata"}, "reply_to_user": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1442065043, "post_id": 32539180, "comment_id": 52936108, "body": "@reinierpost Thank you for your complement. :)"}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1442066127, "post_id": 32539180, "comment_id": 52936407, "body": "I wanted to fix it, but that is not so easy with the <code>tr</code> version."}], "tags": [], "owner": {"reputation": 8276, "user_id": 3501958, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/weWwl.png?s=128&g=1", "display_name": "hata", "link": "https://stackoverflow.com/users/3501958/hata"}, "is_accepted": false, "score": 1, "last_activity_date": 1442064685, "last_edit_date": 1442064685, "creation_date": 1442063158, "answer_id": 32539180, "question_id": 32539048, "link": "https://stackoverflow.com/questions/32539048/vertical-output-to-horizontal-output/32539180#32539180", "title": "Vertical output to horizontal output", "body": "<p>Replace new line characters with space by using <code>tr///</code>:</p>\n\n<pre><code>$drives =~ s/Name //;\n$drives =~ tr/\\r\\n/ /;\nprint $drives;\n</code></pre>\n\n<p>or by using <code>s///</code>:</p>\n\n<pre><code>$drives =~ s/Name //;\n$drives =~ s/[\\r\\n]/ /g;\nprint $drives;\n</code></pre>\n\n<p>Note: <code>\\r</code> and <code>\\n</code> are new line characters.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1442074029, "creation_date": 1442074029, "answer_id": 32540898, "question_id": 32539048, "link": "https://stackoverflow.com/questions/32539048/vertical-output-to-horizontal-output/32540898#32540898", "title": "Vertical output to horizontal output", "body": "<p>For this purpose it's most simple to use the backticks operator in list context; i.e. assign the output to an array. That way you will get one line of output per array element</p>\n\n<p>You also probably want to remove network shares, so a <code>grep</code> for lines starting with a letter and a colon will extract those</p>\n\n<p>Finally, if you look at the output of <code>wmic</code> using <code>Data::Dump</code> or similar, you will see that the lines are padded with spaces so that they are all as long as the longest line. You can use these unwanted spaces using a subtitution, which will also remove the trailing CR and LF</p>\n\n<p>Like this</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @drives = grep /^[A-Z]:/, `wmic volume get name`;\ns/\\s+\\z// for @drives;\n\nprint \"@drives\\n\";\n</code></pre>\n\n<h3>output</h3>\n\n<p>This is the output of the above code on my own Windows system</p>\n\n<pre><code>X:\\ E:\\ D:\\ L:\\ R:\\ C:\\ P:\\ H:\\ I:\\ S:\\ T:\\ U:\\ J:\\ M:\\ N:\\ O:\\ F:\\ G:\\ Q:\\\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5310960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f44bef7afe2c34b30f6b1237eca8c2b6?s=128&d=identicon&r=PG&f=1", "display_name": "greenprash", "link": "https://stackoverflow.com/users/5310960/greenprash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1442074029, "creation_date": 1442062404, "last_edit_date": 1442064389, "question_id": 32539048, "link": "https://stackoverflow.com/questions/32539048/vertical-output-to-horizontal-output", "title": "Vertical output to horizontal output", "body": "<p>For the following piece of code, I'm getting the output one below the other (vertically); however what I want is all in a single line (horizontally).</p>\n\n<pre><code>use strict;\nuse warnings;   \nuse Getopt::Std;\n\nuse vars qw($opt_a $opt_d $opt_m $opt_n $opt_o $opt_s $opt_t $opt_l);\nmy $drives = `wmic volume get name`; \n$drives =~ s/Name //;\nprint $drives;\n</code></pre>\n\n<p>It should be:</p>\n\n<pre><code>C:\\ D:\\ F:\\ Q:\\ X:\\\n</code></pre>\n\n<p>However, what I'm getting is:</p>\n\n<pre><code>C:\\ \nD:\\ \nF:\\ \nQ:\\ \nX:\\\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "is_accepted": false, "score": 2, "last_activity_date": 1442065876, "creation_date": 1442065876, "answer_id": 32539581, "question_id": 32537729, "link": "https://stackoverflow.com/questions/32537729/please-help-me-debug-sqltranslator/32539581#32539581", "title": "Please help me debug SQL::Translator", "body": "<p>The error message tells you that <code>$name</code> is undefined; it is set to the first argument, i.e. the value of <code>$module</code> in  <code>_load_sub</code>, which is set to the second captured match in <code>m/((.*)::)?(\\w+)$/</code>: everything in the value of <code>$tool</code> before the first occurrence of <code>::</code>, if <code>::</code> occurs, and undefined otherwise.</p>\n\n<p>So <code>$tool</code> does not contain the string <code>::</code>; the matching pattern accounts for this (by including the <code>?</code> metacharacter), but the code in <code>load</code> doesn't. Looks like a bug in the code.  <a href=\"http://search.cpan.org/~ilmari/SQL-Translator-0.11021/lib/SQL/Translator.pm\" rel=\"nofollow\">The documentation</a> lists several ways to report this or verify whether this has been reported or fixed before.</p>\n\n<p>You can debug Perl code by running it with <code>perl -d</code> - see <a href=\"http://perldoc.perl.org/perldebug.html\" rel=\"nofollow\">its manual</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1442217581, "creation_date": 1442217581, "answer_id": 32559852, "question_id": 32537729, "link": "https://stackoverflow.com/questions/32537729/please-help-me-debug-sqltranslator/32559852#32559852", "title": "Please help me debug SQL::Translator", "body": "<p>The SQL::Translator parser for MySQL is called \"MySQL\", not \"MySql\". </p>\n\n<pre><code>sqlt -f SQLite -t MySQL /tmp/test.sql /tmp/out.sql\n</code></pre>\n\n<p>Running <code>sqlt -l</code> will give you a complete list of the parsers available.</p>\n\n<p>But I certainly agree that the error message could be better. It's worth raising a bug against this.</p>\n"}], "owner": {"reputation": 29435, "user_id": 458742, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ee0a7599f30c29076a3c9a2c022e473b?s=128&d=identicon&r=PG", "display_name": "spraff", "link": "https://stackoverflow.com/users/458742/spraff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1442217581, "creation_date": 1442053570, "last_edit_date": 1442053929, "question_id": 32537729, "link": "https://stackoverflow.com/questions/32537729/please-help-me-debug-sqltranslator", "title": "Please help me debug SQL::Translator", "body": "<p>I installed libsql-translator-perl on Ubuntu 15.04 and ran it with</p>\n\n<pre><code>sqlt -f SQLite -t MySql /tmp/test.sql /tmp/out.sql\n</code></pre>\n\n<p>test.sql contains only this:</p>\n\n<pre><code>CREATE TABLE X (id INTEGER);\n</code></pre>\n\n<p>It failed with</p>\n\n<pre><code>Use of uninitialized value $name in pattern match (m//) at /usr/share/perl5/SQL/Translator.pm line 610.\n</code></pre>\n\n<p>I looked at this file, it contains</p>\n\n<pre><code>sub load {\n    my $name = shift;\n    my @path;\n    push @path, \"\" if $name =~ /::/; # error here\n</code></pre>\n\n<p>The call stack shows that it was called with</p>\n\n<pre><code>SQL::Translator::load(undef, 'SQL::Translator::Producer')\n</code></pre>\n\n<p>from here</p>\n\n<pre><code>sub _load_sub {\n    my ($tool, @path) = @_;\n\n    my (undef,$module,$func_name) = $tool =~ m/((.*)::)?(\\w+)$/;\n    if ( my $module = load($module =&gt; @path) ) {                    # &lt;&lt;&lt;&lt;&lt;&lt;&lt;\n        my $sub = \"$module\\::$func_name\";\n        return wantarray ? ( \\&amp;{ $sub }, $sub ) : \\&amp;$sub;\n    }\n    return undef;\n}\n</code></pre>\n\n<p>I don't know enough Perl to unpick this any further. Does anyone know what might be going on? Thanks.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 2, "creation_date": 1442050196, "post_id": 32537127, "comment_id": 52932208, "body": "There is the Number::Range library that will do this for you : <a href=\"http://search.cpan.org/~larrysh/Number-Range-0.10/lib/Number/Range.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~larrysh/Number-Range-0.10/lib/Number/Range.&zwnj;&#8203;pm</a>"}, {"owner": {"reputation": 3635, "user_id": 852571, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qGgfa.jpg?s=128&g=1", "display_name": "Noam Rathaus", "link": "https://stackoverflow.com/users/852571/noam-rathaus"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1442054043, "post_id": 32537127, "comment_id": 52933263, "body": "@xxfelixxx it doesn&#39;t appear to work, maybe its a broken package? <code>my $range = Number::Range-&gt;new(&#39;1..65535&#39;); $range-&gt;delrange(&quot;250..255&quot;); print $range-&gt;range;</code> doesn&#39;t print what it should"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 2, "creation_date": 1442057718, "post_id": 32537127, "comment_id": 52934164, "body": "looks like you found a bug! <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=98623\" rel=\"nofollow noreferrer\">rt.cpan.org/Public/Bug/Display.html?id=98623</a>"}, {"owner": {"reputation": 3635, "user_id": 852571, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qGgfa.jpg?s=128&g=1", "display_name": "Noam Rathaus", "link": "https://stackoverflow.com/users/852571/noam-rathaus"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1442058576, "post_id": 32537127, "comment_id": 52934371, "body": "doesn&#39;t really help :) @xxfelixxx"}], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 0, "last_activity_date": 1442060671, "last_edit_date": 1442060671, "creation_date": 1442060331, "answer_id": 32538701, "question_id": 32537127, "link": "https://stackoverflow.com/questions/32537127/exclude-range-of-numbers-from-a-given-range-port-range/32538701#32538701", "title": "Exclude Range of Numbers from a given Range (Port Range)", "body": "<p>Here is an attempt, without using a library, instead just using an array (since it is not very large).</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\nmy @port_range = ( 1, 65535 );\nmy @ports = map { 1 } ( 0 .. $port_range[1] );\nmy $exclusions = '1-2,3-4,4-5,5-6,7-8,9-10,1-100';\n\nfor my $exclusion ( split /,/, $exclusions ) {\n    if ($exclusion =~ m|\\-|) {\n        # Range\n        my ($start, $stop) = split /-/, $exclusion;\n        $ports[$_] = 0 for ($start..$stop);\n    } else {\n        # Single port\n        $ports[$exclusion] = 0;\n    }\n}\n\nmy @good_ports = grep { $ports[$_] &gt; 0 } ( $port_range[0] .. $port_range[1] );\nmy $last_good = 0;\nfor my $i ( 1 .. $#good_ports ) {\n    if ($good_ports[$i] - $good_ports[$i-1] &gt; 1) {\n        # gap\n        print join '-', $good_ports[$last_good], $good_ports[$i-1] . \"\\n\";\n        $last_good = $i;\n    }    \n}\nprint join '-', $good_ports[$last_good], $good_ports[$#good_ports] . \"\\n\";\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>101-65535\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3635, "user_id": 852571, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qGgfa.jpg?s=128&g=1", "display_name": "Noam Rathaus", "link": "https://stackoverflow.com/users/852571/noam-rathaus"}, "edited": false, "score": 0, "creation_date": 1442133248, "post_id": 32538717, "comment_id": 52951834, "body": "Thanks for this, I did this as well, its is VERY slow if your exclusion list is a lot of ports (more than 100)"}], "tags": [], "owner": {"reputation": 2177, "user_id": 5324657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/t1fGJ.png?s=128&g=1", "display_name": "Jeremy Jones", "link": "https://stackoverflow.com/users/5324657/jeremy-jones"}, "is_accepted": false, "score": 0, "last_activity_date": 1442063069, "last_edit_date": 1442063069, "creation_date": 1442060465, "answer_id": 32538717, "question_id": 32537127, "link": "https://stackoverflow.com/questions/32537127/exclude-range-of-numbers-from-a-given-range-port-range/32538717#32538717", "title": "Exclude Range of Numbers from a given Range (Port Range)", "body": "<p>With a range as small as that you could just keep a list of every port and set flags for which are open &amp; closed, and print out the results.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\n# print a list of open ports, given a string of closed ports\n\nmy @ports = map { 1 } 1..65535; #\u00a0start with all ports flagged as open\n\nwhile (&lt;DATA&gt;) {     #\u00a0get the string of closed port numbers &amp; ranges\n    chomp;\n    /\\d/ or next;    # ensure we have at least one number to work with\n\n    my @exclusions = split /,/;\n\n    for (@exclusions) {\n\n        #\u00a0each exclusion is a number, optionally followed\n        #\u00a0by a dash and another number\n        /^(\\d+)(?:-(\\d+))?$/ or next;\n\n        #\u00a0set the flag to 0 for a single port or a range of ports\n        if ($1 and ! $2) {\n            $ports[$1-1] = 0;  #\u00a0single port\n        }\n        elsif ($1 and $2) {\n            @ports[$1-1..$2-1] = map {0} $1..$2; # range of ports\n        }\n    }\n}\n\n#\u00a0get a list of all ports which are open\nmy @open_ports = map {$_ + 1} grep {$ports[$_] == 1} 0..$#ports;\n\n# the final list of open port ranges, to be displayed\nmy @ranges     = ();\n\n# build up the list of open ranges\nfor (@open_ports) {\n    my $one_less = $_ - 1;\n\n    # either add this open port to the previous range,\n    #   or start a new range with this port\n    #\n    (@ranges and $ranges[-1] =~ s/-$one_less$/-$_/) \n       or push @ranges, \"$_-$_\";\n}\n\n# fix single-number ranges for display\nfor (@ranges) {\n    s/^(\\d+)-\\1$/$1/;\n}\n\n#\u00a0display the result\nprint join ',', @ranges;\n\n__DATA__\n1-2,3-4,4-5,5-6,7-8,9-10,1-100\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>101-65535\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3635, "user_id": 852571, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qGgfa.jpg?s=128&g=1", "display_name": "Noam Rathaus", "link": "https://stackoverflow.com/users/852571/noam-rathaus"}, "edited": false, "score": 0, "creation_date": 1442133478, "post_id": 32540848, "comment_id": 52951904, "body": "This code doesn&#39;t have the bug include 1-65535 and exclude 1-65535 - which should return empty"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 3, "last_activity_date": 1442073679, "creation_date": 1442073679, "answer_id": 32540848, "question_id": 32537127, "link": "https://stackoverflow.com/questions/32537127/exclude-range-of-numbers-from-a-given-range-port-range/32540848#32540848", "title": "Exclude Range of Numbers from a given Range (Port Range)", "body": "<p>There are a number of modules for working with sets that will make your life easier. I would recommend <a href=\"https://metacpan.org/pod/Set::IntSpan::Fast\" rel=\"nofollow\">Set::IntSpan::Fast</a>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nuse Set::IntSpan::Fast;\n\nmy $ports = Set::IntSpan::Fast-&gt;new('1-65535');\nmy $exclude = Set::IntSpan::Fast-&gt;new('1-2,3-4,4-5,5-6,7-8,9-10,1-100');\n\nsay $ports-&gt;diff($exclude)-&gt;as_string;\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>101-65535\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3635, "user_id": 852571, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qGgfa.jpg?s=128&g=1", "display_name": "Noam Rathaus", "link": "https://stackoverflow.com/users/852571/noam-rathaus"}, "edited": false, "score": 0, "creation_date": 1442133199, "post_id": 32542495, "comment_id": 52951813, "body": "There seems to be a bug in it, <code>my $range = Range::Object::Serial-&gt;new(&#39;1-65535&#39;); $range-&gt;remove(&#39;1-65535&#39;); </code> should return an empty set, but doesn&#39;t?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1442083867, "creation_date": 1442083867, "answer_id": 32542495, "question_id": 32537127, "link": "https://stackoverflow.com/questions/32537127/exclude-range-of-numbers-from-a-given-range-port-range/32542495#32542495", "title": "Exclude Range of Numbers from a given Range (Port Range)", "body": "<p>The <code>Range::Object</code> set of modules is very comprehensive, and <a href=\"http://metacpan.org/module/Range::Object::Serial\" rel=\"nofollow\"><code>Range::Object::Serial</code></a> does exactly what you're looking for out of the box</p>\n\n<p>This short program demonstrates</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.10;\n\nuse Range::Object::Serial;\n\nmy $range = Range::Object::Serial-&gt;new('1-65535');\nsay scalar $range-&gt;collapsed;\n\n$range-&gt;remove('1-2,3-4,4-5,5-6,7-8,9-10,1-100');\nsay scalar $range-&gt;collapsed;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>1-65535\n101-65535\n</code></pre>\n"}], "owner": {"reputation": 3635, "user_id": 852571, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qGgfa.jpg?s=128&g=1", "display_name": "Noam Rathaus", "link": "https://stackoverflow.com/users/852571/noam-rathaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 32540848, "answer_count": 4, "score": 1, "last_activity_date": 1442083867, "creation_date": 1442049105, "last_edit_date": 1442056177, "question_id": 32537127, "link": "https://stackoverflow.com/questions/32537127/exclude-range-of-numbers-from-a-given-range-port-range", "title": "Exclude Range of Numbers from a given Range (Port Range)", "body": "<p>I am trying to make the port range of 1-65535 allow the user to exclude certain ranges of ports from it</p>\n\n<p>The input will be a comma separated single or range of port numbers, such as:\n<code>1-2,3-4,4-5,5-6,7-8,9-10,1-100</code></p>\n\n<p>The output should be:\n<code>101-65535</code></p>\n\n<p>I have written code to cover many cases, but for some reason the code I currently have doesn't handle the last exclusion <code>1-100</code> because <code>9</code> is the current minimum port number</p>\n\n<p>Here is my code:</p>\n\n<pre><code> my @ranges;\n push @ranges, '1-65535';\n\n my $bFound = 0;\n do {\n  $bFound = 0;\n  foreach my $ptrExclusion (@exclusions) {\n   my %exclusion = %{$ptrExclusion};\n   print STDERR \"handling exclusion @ 7964: \".Dumper(\\%exclusion);\n   my $currentPos = 0;\n   foreach my $range (@ranges) {\n    $currentPos++;\n\n    if ($range =~ /([0-9]+)-([0-9]+)/) {\n     my $firstPortInRange = $1;\n     my $secondPortInRange = $2;\n\n     if ($secondPortInRange == $exclusion{first} and\n         $exclusion{second} == $exclusion{first}) {\n      $bFound = 1;\n      my @newranges;\n      if ($exclusion{first} - 1 &gt; 0) {\n       push @newranges, \"$firstPortInRange-\".(sprintf(\"%d\", $exclusion{first} - 1));\n      } else { # Handle port \"1\"\n       ### Don't put anything, we are excluded from adding this\n      }\n\n      if ($currentPos &gt; 1) {\n       unshift @newranges, $ranges[1..($currentPos-1)];\n      }\n\n      if ($currentPos + 1 &lt; scalar(@ranges)) {\n       push @newranges, $ranges[($currentPos+1) .. scalar(@ranges)];\n      }\n\n      print STDERR \"newranges @ 7985: \".Dumper(\\@newranges);\n      @ranges = @newranges;\n      last;\n     }\n\n     if ($firstPortInRange == $exclusion{first} and\n         $exclusion{second} == $exclusion{first}) {\n      $bFound = 1;\n      my @newranges;\n\n      if ($exclusion{second} + 1 &lt;= 65535) {\n       push @newranges, (sprintf(\"%d\", $exclusion{second} + 1)).\"-$secondPortInRange\";\n      } else { # Handle port 65535\n       #### Don't put anything, we are excluded from adding this\n      }\n\n      if ($currentPos &gt; 1) {\n       unshift @newranges, $ranges[1..($currentPos-1)];\n      }\n\n      if ($currentPos + 1 &lt; scalar(@ranges)) {\n       push @newranges, $ranges[($currentPos+1) .. scalar(@ranges)];\n      }\n\n      print STDERR \"newranges @ 8005: \".Dumper(\\@newranges);\n      @ranges = @newranges;\n      last;\n     }\n\n     if ($firstPortInRange &lt; $exclusion{first} and\n         $secondPortInRange &gt; $exclusion{second} # An exclusion is between the ranges we currently have, this doesn't include \"hits\" on the exact port number, i.e. excluding port 1 and port 65535\n        ) {\n      print STDERR \"exclusion matched @ 8022\\n\";\n      $bFound = 1;\n      #printf (STDERR \"currentPos @ 7973: %d\\n\", $currentPos);\n      my @newranges;\n      push @newranges, \"$firstPortInRange-\".(sprintf(\"%d\", $exclusion{first} - 1));\n      push @newranges, (sprintf(\"%d\", $exclusion{second} + 1)).\"-$secondPortInRange\";\n      if ($currentPos &gt; 1) {\n       unshift @newranges, $ranges[1..($currentPos-1)];\n      }\n\n      if ($currentPos + 1 &lt; scalar(@ranges)) {\n       push @newranges, $ranges[($currentPos+1) .. scalar(@ranges)];\n      }\n\n      print STDERR \"newranges @ 8026: \".Dumper(\\@newranges);\n      @ranges = @newranges;\n      last;\n     }\n\n     if ($firstPortInRange &gt;= $exclusion{first} and\n         $firstPortInRange &lt; $exclusion{second} and\n         $secondPortInRange &lt;= $exclusion{second} and\n         $secondPortInRange &gt; $exclusion{first} # An exclusion is holding our range inside it\n        ) {\n      print STDERR \"exclusion matched @ 8045\\n\";\n      $bFound = 1;\n\n      splice(@ranges, $currentPos-1, 1); # -1 as our index starts from 1, while @ranges index starts at 0\n      print STDERR \"ranges @ 8051: \".Dumper(\\@ranges);\n\n      last;\n     }\n    }\n   }\n   if ($bFound) {\n    last;\n   }\n  }\n } while ($bFound);\n\n print STDERR \"ranges @ 7980: \".join(\", \", @ranges). \"\\n\";\n</code></pre>\n\n<p><code>@exclusions</code> has hash elements under it with a <code>first</code> and <code>second</code> values to them which designate port A and port B (lower range and top range) their value can match if the exclusion is for 1 port.</p>\n"}, {"tags": ["perl", "logging", "log4perl"], "comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1442077879, "post_id": 32536681, "comment_id": 52940127, "body": "I think you could make a custom appender and call that, if I remember correctly. Cannot find my old code, but there is an indent example in the docs, I think you could just make a log sub that dumps if ref() eq &#39;ARRAY&#39;..."}], "answers": [{"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 1, "last_activity_date": 1442335898, "last_edit_date": 1442335898, "creation_date": 1442259928, "answer_id": 32572702, "question_id": 32536681, "link": "https://stackoverflow.com/questions/32536681/is-it-possible-to-register-a-function-to-preprocess-log-messages-with-loglog4p/32572702#32572702", "title": "Is it possible to register a function to preprocess log messages with Log::Log4perl?", "body": "<h1>The easy way: use <code>warp_message</code></h1>\n\n<p>The easiest way to do this is to create a custom appender and <a href=\"https://metacpan.org/pod/Log::Log4perl::Appender#Appenders-Expecting-Message-Chunks\" rel=\"nofollow\">set the <code>warp_message</code> parameter</a> so you can get the original references that were passed to the logger:</p>\n\n<pre><code>package DumpAppender;\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\n$Data::Dumper::Indent = 0;\n$Data::Dumper::Terse  = 1;\n\nsub new {\n    bless {}, $_[0];\n}\n\nsub log {\n    my($self, %params) = @_;\n    print ref($_) ? Dumper($_) : $_ for @{ $params{message} };\n    print \"\\n\";\n}\n\npackage main;   \nuse strict;\nuse warnings;\n\nuse Log::Log4perl;\n\nLog::Log4perl-&gt;init(\\q{\n    log4perl.rootLogger=DEBUG,Dump\n    log4perl.appender.Dump=DumpAppender\n    log4perl.appender.Dump.layout=NoopLayout\n    log4perl.appender.Dump.warp_message=0\n});\n\nmy $logger = Log::Log4perl-&gt;get_logger;\n\n$logger-&gt;debug(\n    'This is a string, but this is a reference: ',\n    { foo =&gt; 'bar' },\n);\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>This is a string, but this is a reference: {'foo' =&gt; 'bar'}\n</code></pre>\n\n<p>Unfortunately, if you take this approach, you're stuck writing your own code to handle layouts, open files, etc. I wouldn't take this approach except for very simple projects that only need to print to screen.</p>\n\n<h1>A better way: composite appender</h1>\n\n<p>A better approach is to write your own <a href=\"https://metacpan.org/pod/Log::Log4perl::Appender#Composite-Appenders\" rel=\"nofollow\">composite appender</a>. A composite appender forwards messages on to another appender after manipulating them somehow, e.g. filtering or caching them. With this approach, you can write only the code for dumping the references and let an existing appender do the heavy lifting.</p>\n\n<p>The following shows how to write a composite appender. Some of this is explained in the docs for <a href=\"https://metacpan.org/pod/Log::Log4perl::Appender#Composite-Appenders\" rel=\"nofollow\">Log::Log4perl::Appender</a>, but I copied much of it from Mike Schilli's <a href=\"https://metacpan.org/pod/Log::Log4perl::Appender::Limit\" rel=\"nofollow\">Log::Log4perl::Appender::Limit</a>:</p>\n\n<pre><code>package DumpAppender;   \nuse strict;\nuse warnings;\n\nour @ISA = qw(Log::Log4perl::Appender);\n\nuse Data::Dumper;\n\n$Data::Dumper::Indent = 0;\n$Data::Dumper::Terse  = 1;\n\nsub new {\n    my ($class, %options) = @_;\n\n    my $self = {\n        appender =&gt; undef,\n        %options\n    };\n\n    # Pass back the appender to be limited as a dependency to the configuration\n    # file parser.\n    push @{ $options{l4p_depends_on} }, $self-&gt;{appender};\n\n    # Run our post_init method in the configurator after all appenders have been\n    # defined to make sure the appenders we're connecting to really exist.\n    push @{ $options{l4p_post_config_subs} }, sub { $self-&gt;post_init() };\n\n    bless $self, $class;\n}\n\nsub log {\n    my ($self, %params) = @_;\n\n    # Adjust call stack so messages are reported with the correct caller and\n    # file\n    local $Log::Log4perl::caller_depth = $Log::Log4perl::caller_depth + 2;\n\n    # Dump all references with Data::Dumper\n    $_ = ref($_) ? Dumper($_) : $_ for @{ $params{message} };\n\n    $self-&gt;{app}-&gt;SUPER::log(\n        \\%params,\n        $params{log4p_category},\n        $params{log4p_level}\n    );\n}\n\nsub post_init {\n    my ($self) = @_;\n\n    if(! exists $self-&gt;{appender}) {\n        die \"No appender defined for \" . __PACKAGE__;\n    }\n\n    my $appenders = Log::Log4perl-&gt;appenders();\n    my $appender = Log::Log4perl-&gt;appenders()-&gt;{$self-&gt;{appender}};\n\n    if(! defined $appender) {\n        die \"Appender $self-&gt;{appender} not defined (yet) when \" .\n            __PACKAGE__ . \" needed it\";\n    }\n\n    $self-&gt;{app} = $appender;\n}\n\npackage main;\n\nuse strict;\nuse warnings;\n\nuse Log::Log4perl;\n\nLog::Log4perl-&gt;init(\\q{\n    log4perl.rootLogger=DEBUG, Dump\n\n    log4perl.appender.Dump=DumpAppender\n    log4perl.appender.Dump.appender=SCREEN\n\n    log4perl.appender.SCREEN=Log::Log4perl::Appender::Screen\n    log4perl.appender.SCREEN.layout=PatternLayout\n    log4perl.appender.SCREEN.layout.ConversionPattern=%d %p %m%n\n});\n\nmy $logger = Log::Log4perl-&gt;get_logger;\n\n$logger-&gt;debug(\n    'This is a string, but this is a reference: ',\n    { foo =&gt; 'bar' },\n);\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>2015/09/14 13:38:47 DEBUG This is a string, but this is a reference: {'foo' =&gt; 'bar'}\n</code></pre>\n\n<p>Note that you have to take some extra steps if you initialize Log::Log4perl via the API instead of via a file. This is documented in the <a href=\"https://metacpan.org/pod/Log::Log4perl::Appender#Composite-Appenders\" rel=\"nofollow\">composite appenders</a> section of the Log::Log4perl::Appender documentation.</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 1, "accepted_answer_id": 32572702, "answer_count": 1, "score": 3, "last_activity_date": 1442491165, "creation_date": 1442045670, "last_edit_date": 1442491165, "question_id": 32536681, "link": "https://stackoverflow.com/questions/32536681/is-it-possible-to-register-a-function-to-preprocess-log-messages-with-loglog4p", "title": "Is it possible to register a function to preprocess log messages with Log::Log4perl?", "body": "<p>In <a href=\"http://search.cpan.org/~mschilli/Log-Log4perl-1.46/lib/Log/Log4perl/FAQ.pm#How_can_I_drill_down_on_references_before_logging_them?\" rel=\"nofollow\">this example</a>:</p>\n\n<pre><code>$logger-&gt;debug({\n    filter =&gt; \\&amp;Data::Dumper::Dumper,\n    value  =&gt; $ref\n});\n</code></pre>\n\n<p>I can pretty print my references instead of <code>ARRAY(0xFFDFKDJ)</code>. But it's too boring to type that long code every time. I just want:</p>\n\n<pre><code>$logger-&gt;preprocessor({\n    filter =&gt; \\&amp;Data::Dumper::Dumper,\n    value  =&gt; $ref\n});\n\n$logger-&gt;debug( $ref, $ref2 );\n$logger-&gt;info( $array );\n</code></pre>\n\n<p>And <code>$ref</code>, <code>$ref2</code>, and <code>$array</code> will be dumped by Data::Dumper.</p>\n\n<p>It there a way to do this?</p>\n\n<p><strong>UPD</strong><br>\nWith help of your answers I do the <a href=\"https://github.com/mschilli/log4perl/pull/63\" rel=\"nofollow\">patch</a></p>\n\n<p>Now you just:</p>\n\n<pre><code>log4perl.appender.A1.layout=FallbackLayout\nlog4perl.appender.A1.layout.chain=PatternLayout\nlog4perl.appender.A1.layout.chain.ConversionPattern=%m%n\nlog4perl.appender.A1.warp_message = sub { $#_ = 2 if @_ &gt; 3; \\\n                                       return @_; }\n# OR\nlog4perl.appender.A1.warp_message = main::warp_my_message\n\nsub warp_my_message {\n    my( @chunks ) =  @_;\n\n    use Data::Dump qw/ pp /;\n    for my $msg ( @chunks ) {\n        $msg =  pp $msg   if ref $msg;\n    }\n\n    return @chunks;\n}\n</code></pre>\n\n<p><strong>UPD2</strong>  </p>\n\n<p>Or you can use this small module</p>\n\n<pre><code>log4perl.appender.SomeAPP.warp_message  = Preprocess::Messages::msg_filter\nlog4perl.appender.SomeAPP.layout        = Preprocess::Messages\n\npackage Preprocess::Messages;\n\nsub msg_filter {\n    my @chunks =  @_;\n\n    for my $msg ( @chunks ) {\n        $msg =  pp $msg   if ref $msg;\n    }\n\n    return @chunks;\n};\n\nsub render {\n    my $self =  shift;\n\n    my $layout =  Log::Log4perl::Layout::PatternLayout-&gt;new(\n        '%d %P %p&gt; %c %F:%L %M%n  %m{indent=2}%n%n'\n    );\n\n    $_[-1] += 1; # increase level of the caller\n    return $layout-&gt;render( join $Log::Log4perl::JOIN_MSG_ARRAY_CHAR, @{ shift() }, @_ );\n}\n\n\nsub new {\n    my $class = shift;\n    $class = ref ($class) || $class;\n\n    return bless {}, $class;\n}\n\n1;\n</code></pre>\n\n<p>Yes, of course you can set 'warp_message = 0' and combine msg_filter and render together.</p>\n\n<pre><code>log4perl.appender.SomeAPP.warp_message  = 0\nlog4perl.appender.SomeAPP.layout        = Preprocess::Messages\n\nsub render {\n    my($self, $message, $category, $priority, $caller_level) = @_;\n\n    my $layout =  Log::Log4perl::Layout::PatternLayout-&gt;new(\n        '%d %P %p&gt; %c %F:%L %M%n  %m{indent=2}%n%n'\n    );\n\n    for my $item ( @{ $message } ) {\n        $item =  pp $item   if ref $item;\n    }\n\n    $message =  join $Log::Log4perl::JOIN_MSG_ARRAY_CHAR, @$message;\n    return $layout-&gt;render( $message, $category, $priority, $caller_level+1 );\n}\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1442008511, "post_id": 32532668, "comment_id": 52923510, "body": "<code>\\s</code> matches any whitespace including a normal space. Try <code>$value =~ s&#47;[ \\t]+&#47;,&#47;g;</code> or <code>$value =~ s&#47;\\h+&#47;,&#47;g;</code>."}, {"owner": {"reputation": 655, "user_id": 5261993, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/681e03d6a8f921dccf48253bc83432b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayesha", "link": "https://stackoverflow.com/users/5261993/ayesha"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1442008706, "post_id": 32532668, "comment_id": 52923571, "body": "@stribizhev- this didnt work. this one will only remove tabs."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1442008798, "post_id": 32532668, "comment_id": 52923605, "body": "Then you must show your exact code. Also, above, I meant to say <i>including a carriage return and line feed characters</i>."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1442009074, "post_id": 32532668, "comment_id": 52923718, "body": "This more simple to do it with awk."}, {"owner": {"reputation": 655, "user_id": 5261993, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/681e03d6a8f921dccf48253bc83432b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayesha", "link": "https://stackoverflow.com/users/5261993/ayesha"}, "edited": false, "score": 0, "creation_date": 1442009209, "post_id": 32532668, "comment_id": 52923778, "body": "@stribizhev- edited my post with exact code. i am passing the file data to an array and making changes to the array. is it the reason regex not working ?"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1442010697, "post_id": 32532668, "comment_id": 52924254, "body": "The premise is a bad idea. Though it&#39;s uncommon, email addresses may contain spaces so long as they&#39;re quoted.  Since your incoming data seems to be fixed-width, unpack it into fields, and then use Text::CSV to produce safe CSV with it. If your input data isn&#39;t fixed width, and is really only space delimited, it&#39;s broken before you even write a line of code."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1442011110, "post_id": 32532668, "comment_id": 52924381, "body": "There is <b>absolutely</b> no need to read the entire file into memory (twice!) in order to make the changes. Just do it in-place, save some memory, and make the code simpler."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 655, "user_id": 5261993, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/681e03d6a8f921dccf48253bc83432b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayesha", "link": "https://stackoverflow.com/users/5261993/ayesha"}, "edited": false, "score": 0, "creation_date": 1442009033, "post_id": 32532714, "comment_id": 52923704, "body": "@Ayesha &quot;didn&#39;t work&quot; is not a problem description. What did it do? What did you expect instead?"}, {"owner": {"reputation": 655, "user_id": 5261993, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/681e03d6a8f921dccf48253bc83432b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayesha", "link": "https://stackoverflow.com/users/5261993/ayesha"}, "edited": false, "score": 0, "creation_date": 1442009264, "post_id": 32532714, "comment_id": 52923800, "body": "@melpomene- updated the post with the exact code. i think the problem is that i am writing it to an array first and then manipulating the array. ?"}, {"owner": {"reputation": 655, "user_id": 5261993, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/681e03d6a8f921dccf48253bc83432b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayesha", "link": "https://stackoverflow.com/users/5261993/ayesha"}, "edited": false, "score": 0, "creation_date": 1442009415, "post_id": 32532714, "comment_id": 52923850, "body": "@melpomene- i mentioned in the start of the post. a file has spaces between each words. i need to replace those spaces and use a comma instead of those spaces."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 655, "user_id": 5261993, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/681e03d6a8f921dccf48253bc83432b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayesha", "link": "https://stackoverflow.com/users/5261993/ayesha"}, "edited": false, "score": 1, "creation_date": 1442009515, "post_id": 32532714, "comment_id": 52923877, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/89429/discussion-between-melpomene-and-ayesha\">continue this discussion in chat</a>."}, {"owner": {"reputation": 655, "user_id": 5261993, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/681e03d6a8f921dccf48253bc83432b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayesha", "link": "https://stackoverflow.com/users/5261993/ayesha"}, "edited": false, "score": 0, "creation_date": 1442009912, "post_id": 32532714, "comment_id": 52924016, "body": "@melpomene- this works well. athough i had to write to a different file as suggested by you in the chat"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 2, "last_activity_date": 1442010547, "last_edit_date": 1442010547, "creation_date": 1442008662, "answer_id": 32532714, "question_id": 32532668, "link": "https://stackoverflow.com/questions/32532668/regex-to-convert-spaces-into-commas/32532714#32532714", "title": "Regex to convert spaces into commas", "body": "<p>You could do it without a regex:</p>\n\n<pre><code>$value =~ tr/ \\t/,/s;\n</code></pre>\n\n<p><code>tr///</code> is documented in <a href=\"https://metacpan.org/pod/perlop#tr-SEARCHLIST-REPLACEMENTLIST-cdsr\" rel=\"nofollow\"><code>perldoc perlop</code></a> (or <code>perldoc -f tr</code> if your perldoc is new enough).</p>\n"}, {"tags": [], "owner": {"reputation": 2177, "user_id": 5324657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/t1fGJ.png?s=128&g=1", "display_name": "Jeremy Jones", "link": "https://stackoverflow.com/users/5324657/jeremy-jones"}, "is_accepted": false, "score": 0, "last_activity_date": 1442064306, "last_edit_date": 1442064306, "creation_date": 1442063894, "answer_id": 32539289, "question_id": 32532668, "link": "https://stackoverflow.com/questions/32532668/regex-to-convert-spaces-into-commas/32539289#32539289", "title": "Regex to convert spaces into commas", "body": "<p>To do this on the terminal you can just do this:</p>\n\n<pre><code>perl -pe 'tr/ /,/s' datafile.txt\n</code></pre>\n\n<p>To replace the original file with the changed version, just add an i option:</p>\n\n<pre><code>perl -pi -e 'tr/ /,/s' datafile.txt\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>$ perl -pe 'tr/ /,/s' datafile.txt \nName,Id,Contact,Email\nraj,3232,408333,ra@gmail.com\nanu,353453,409242,anu@yahoomail.com\n$\n</code></pre>\n\n<p>.</p>\n\n<pre><code>$ perl -pi -e 'tr/ /,/s' datafile.txt \n$ more datafile.txt \nName,Id,Contact,Email\nraj,3232,408333,ra@gmail.com\nanu,353453,409242,anu@yahoomail.com\n$ \n</code></pre>\n"}], "owner": {"reputation": 655, "user_id": 5261993, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/681e03d6a8f921dccf48253bc83432b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayesha", "link": "https://stackoverflow.com/users/5261993/ayesha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 688, "favorite_count": 0, "accepted_answer_id": 32532714, "answer_count": 2, "score": 0, "last_activity_date": 1442096603, "creation_date": 1442008401, "last_edit_date": 1442096603, "question_id": 32532668, "link": "https://stackoverflow.com/questions/32532668/regex-to-convert-spaces-into-commas", "title": "Regex to convert spaces into commas", "body": "<p>I have a file with below data</p>\n\n<pre><code>Name        Id    Contact        Email\nraj       3232    408333       ra@gmail.com\nanu      353453   409242       anu@yahoomail.com\n</code></pre>\n\n<p>I want to replace the above file with below data. </p>\n\n<pre><code>Name,Id,Contact,Email\nraj,3232,408333,ra@gmail.com\nanu,353453,409242,anu@yahoomail.com\n</code></pre>\n\n<p>Replace all the spaces in a line with commas and ignore the spaces between each new line. How can I achieve this ??</p>\n\n<p>I read online that <code>$value =~ s/\\s+/,/g;</code> would convert all the spaces and tabs in a line and replace it with a comma. but it doesn't execute that way. </p>\n\n<p>Can someone advise please??</p>\n\n<p>Here is my exact code. It might confuse a bit. but here it is. The file gets copied in a array, then changes made to array as per needed. Once changes are made, the array is written back to the file.</p>\n\n<pre><code>open(FILE, $filename) || die \"File not found\";\nmy @lines = &lt;FILE&gt;;\nclose(FILE);\n\nmy @newlines;\nforeach(@lines) {\n            $_ =~ tr/ \\t/,/s;       \n            push(@newlines,$_);  \n}\n\n\nopen(my $fh, '&gt;', $filename) or die \"Could not open file '$filename' $!\";\nprint $fh @newlines;\nclose($fh);\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["perl", "concatenation", "lines"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1442008161, "post_id": 32532425, "comment_id": 52923386, "body": "Are both files the same length? Are the common lines in between exactly the same in both files?"}, {"owner": {"reputation": 147, "user_id": 5290820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6b4e11cc48058951252437f1b883bed?s=128&d=identicon&r=PG&f=1", "display_name": "serious", "link": "https://stackoverflow.com/users/5290820/serious"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1442008522, "post_id": 32532425, "comment_id": 52923514, "body": "The files are both the same length, identical expect for the lines I&#39;m combining. As for the lines in between no. I will edit them to be representative of the file. Sorry about that."}], "answers": [{"tags": [], "owner": {"reputation": 2177, "user_id": 5324657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/t1fGJ.png?s=128&g=1", "display_name": "Jeremy Jones", "link": "https://stackoverflow.com/users/5324657/jeremy-jones"}, "is_accepted": true, "score": 0, "last_activity_date": 1442065404, "creation_date": 1442065404, "answer_id": 32539503, "question_id": 32532425, "link": "https://stackoverflow.com/questions/32532425/best-way-to-merge-every-other-line-from-two-different-files/32539503#32539503", "title": "best way to merge every other line from two different files", "body": "<pre><code>#!/usr/bin/perl --\nuse warnings;\nuse strict;\n\nopen my $in1, \"&lt;\", 'file1.txt' or die $!;\nopen my $in2, \"&lt;\", 'file2.txt' or die $!;\n\nwhile (&lt;$in1&gt;) {\n\n    chomp;\n    print;\n\n    my $file2line = &lt;$in2&gt;;\n    print \"|\", substr($file2line,1);\n\n    my $whatitis  = &lt;$in1&gt; or last;\n    &lt;$in2&gt; || undef; # throw file2's line away\n\n    print $whatitis;\n}\n\nclose $in1;\nclose $in2;\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>$ more file1.txt \n&gt;blue\nit is a 2006 toyota\n&gt;red\nit is a 1990\n&gt;black\nit is a mongoose\n&gt;blue\nit is a 2010\n$ more file2.txt \n&gt;car\nit is a 2006 toyota\n&gt;jeep\nit is a 1990\n&gt;bike\nit is a mongoose\n&gt;jeep\nit is a 2010\n$ perl script2.pl\n&gt;blue|car\nit is a 2006 toyota\n&gt;red|jeep\nit is a 1990\n&gt;black|bike\nit is a mongoose\n&gt;blue|jeep\nit is a 2010\n$ \n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 5290820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6b4e11cc48058951252437f1b883bed?s=128&d=identicon&r=PG&f=1", "display_name": "serious", "link": "https://stackoverflow.com/users/5290820/serious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 32539503, "answer_count": 1, "score": 0, "last_activity_date": 1442065404, "creation_date": 1442007185, "last_edit_date": 1495542573, "question_id": 32532425, "link": "https://stackoverflow.com/questions/32532425/best-way-to-merge-every-other-line-from-two-different-files", "title": "best way to merge every other line from two different files", "body": "<p>I am attempting to combined every other line in two files. I tried to adapt an old script of mine, linked <a href=\"https://stackoverflow.com/questions/32344307/foreach-loop-not-returning-expected-results\">here</a> by using hashes. The best way to explain this is by showing an example, can't really word it well. If you have further questions about my task please comment below and I will clarify.</p>\n\n<p>File 1:</p>\n\n<pre><code>&gt;blue\nit is a 2006 toyota\n&gt;red\nit is a 1990\n&gt;black\nit is a mongoose\n&gt;blue\nit is a 2010\n</code></pre>\n\n<p>File 2:</p>\n\n<pre><code>&gt;car\nit is a 2006 toyota\n&gt;jeep\nit is a 1990\n&gt;bike\nit is a mongoose\n&gt;jeep\nit is a 2010\n</code></pre>\n\n<p>Expected Output:</p>\n\n<pre><code>&gt;blue|car\nit is a 2006 toyota\n&gt;red|jeep\nit is a 1990\n&gt;black|bike\nit is a mongoose\n&gt;blue|jeep\nit is a 2010\n</code></pre>\n\n<p>The problem I was having with the old script was that it would delete any repeated elements and I don't want to repeat occurrences. Since in my actual file the second line from the both files is the same (line 2 in file 1 is the same as line 2 in file2). I am not experienced with perl one liners but I think a one liner can accomplish this task much faster than my script.</p>\n"}, {"tags": ["ajax", "perl", "session", "persistence"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1442005566, "post_id": 32532035, "comment_id": 52922341, "body": "The process that had the object no longer exists, so even if a memory address into that process was useful at some point, it isn&#39;t anymore."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1442005634, "post_id": 32532035, "comment_id": 52922377, "body": "Why are you sending memory location in the first place? <a href=\"http://meta.stackexchange.com/a/66378/222077\">meta.stackexchange.com/a/66378/222077</a>"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1442005890, "post_id": 32532035, "comment_id": 52922499, "body": "The &quot;X&quot; in this problem is how to persist an object across separate calls to the back end."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1442006398, "post_id": 32532035, "comment_id": 52922683, "body": "s/how to persist \\Kan object/data/. Two options: 1) pass the data to the browser, and have the browser send it in the following requests, or 2) store the data locally, pass a token to the browser that identifies the storage location, and have the browser send the token in the following requests."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1442013632, "post_id": 32532035, "comment_id": 52925012, "body": "What framework are you using on the backend? Different frameworks will accomplish this task in different ways."}], "answers": [{"tags": [], "owner": {"reputation": 4663, "user_id": 3967089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d00715119003023d62918dcc603ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Calle Dybedahl", "link": "https://stackoverflow.com/users/3967089/calle-dybedahl"}, "is_accepted": false, "score": 1, "last_activity_date": 1442048557, "creation_date": 1442048557, "answer_id": 32537050, "question_id": 32532035, "link": "https://stackoverflow.com/questions/32532035/how-do-i-access-a-perl-object-from-the-memory-location/32537050#32537050", "title": "How do I access a Perl object from the memory location?", "body": "<p>You can't. Some of the reasons are spelled out in the comments. One additional reason is that even if you were to arrange to return the string to the same processes that generated it, there is no way you can be sure that the object still exists, or that if it does it still lives at the same memory location. The only purpose of that string is to give the object a unique name.</p>\n\n<p>You probably need to read <code>perldoc Storable</code>. You definitely need to ask about the actual problem you're trying to solve rather than something you think may be a solution to it.</p>\n"}], "owner": {"reputation": 77, "user_id": 2589587, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c74096dee28d082ab4331b70be184794?s=128&d=identicon&r=PG", "display_name": "Yasir", "link": "https://stackoverflow.com/users/2589587/yasir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442048557, "creation_date": 1442005183, "last_edit_date": 1442019482, "question_id": 32532035, "link": "https://stackoverflow.com/questions/32532035/how-do-i-access-a-perl-object-from-the-memory-location", "title": "How do I access a Perl object from the memory location?", "body": "<p>I want to access a Perl object in a script, which has been passed through Ajax. </p>\n\n<p>I can't pass the object itself through JS Ajax, so I passed in the memory location for the object I want to access.</p>\n\n<p>Now in the Perl script I have a memory location, for example </p>\n\n<pre><code>my $obj = \"ClassName=HASH(0x9dccdb18)\";\n</code></pre>\n\n<p>Now if I want to access the actual object for ClassName from this string of memory location, how can I do it?</p>\n\n<p>I want to be able to access the object and run the subroutines on that object.</p>\n"}, {"tags": ["perl", "module"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1442003658, "post_id": 32531668, "comment_id": 52921483, "body": "What do you mean by &quot;download it normally&quot;?"}, {"owner": {"reputation": 387, "user_id": 5317077, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/ed534d7b2e7485df17c645f07832e65f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/5317077/andrew"}, "edited": false, "score": 0, "creation_date": 1442003880, "post_id": 32531668, "comment_id": 52921588, "body": "I tried using the FindBin method, but now it says Can&#39;t locate FindBin.pm in @INC at temp.pl line 3. BEGIN failed--compilation aborted at temp.pl line 3. How do I solve this?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1442004238, "post_id": 32531668, "comment_id": 52921753, "body": "@Andrew FindBin is a core module, so it should already be installed somewhere in <code>@INC</code>. What are the contents of <code>@INC</code> in the error message?"}], "owner": {"reputation": 387, "user_id": 5317077, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/ed534d7b2e7485df17c645f07832e65f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/5317077/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "closed_date": 1442004139, "answer_count": 0, "score": 1, "last_activity_date": 1442003618, "creation_date": 1442003405, "last_edit_date": 1442003540, "question_id": 32531668, "link": "https://stackoverflow.com/questions/32531668/using-a-perl-module-in-my-own-directory", "closed_reason": "Duplicate", "title": "Using a Perl module in my own directory", "body": "<p>I'm trying to download a module from CPAN and save it into the same directory as the directory that my Perl script is in because I don't have permissions to download it normally, but when I try to run the code, it can't find the script.</p>\n\n<p>My Code:</p>\n\n<pre><code>#usr/bin/perl\nuse Spreadsheet::WriteExcel;\n</code></pre>\n\n<p>Error Message:</p>\n\n<pre><code>Can't locate Spreadsheet/WriteExcel.pm in @INC at temp.pl line 3.\nBEGIN failed--compilation aborted at temp.pl line 3.\n</code></pre>\n\n<p>How can I tell Perl where to look for the module? Thanks.</p>\n"}, {"tags": ["perl", "hash", "assign", "ref", "strict"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 2, "creation_date": 1442001422, "post_id": 32531192, "comment_id": 52920533, "body": "That is an <i>array</i> reference, not a hash reference. See <a href=\"http://perldoc.perl.org/perlref.html#Making-References\" rel=\"nofollow noreferrer\"><code>perldoc perlref</code></a> for more information."}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 2, "creation_date": 1442001450, "post_id": 32531192, "comment_id": 52920550, "body": "Please show the code that is creating your data structure before you dump it."}, {"owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "edited": false, "score": 1, "creation_date": 1442001488, "post_id": 32531192, "comment_id": 52920570, "body": "If Data::Dumper is dumping it that way, you have an array (square brackets) not a hash (curly braces). Note in your second example you have an array containing one element, which is a reference to the 5-element hash shown &quot;inside&quot; it."}, {"owner": {"reputation": 372, "user_id": 821637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbe15882a7f9d18c27da5183f4d4cb10?s=128&d=identicon&r=PG", "display_name": "Wim Lewis", "link": "https://stackoverflow.com/users/821637/wim-lewis"}, "edited": false, "score": 0, "creation_date": 1442001621, "post_id": 32531192, "comment_id": 52920634, "body": "It looks like you&#39;re dumping an array containing the hash of interest (in your second example). So, in your first example, your &quot;hash reference&quot; is just the scalar <code>0</code>. It doesn&#39;t <i>contain</i> a <code>0</code>\u2014 it <i>is</i> a <code>0</code>. Which isn&#39;t a hash ref, which is why you get that warning. As for why the variable that you expect to contain a hash ref actually contains a scalar, that depends on your code."}, {"owner": {"reputation": 25, "user_id": 4755683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77da58d63e0ce0e83cfc31703df2552c?s=128&d=identicon&r=PG&f=1", "display_name": "dukibas", "link": "https://stackoverflow.com/users/4755683/dukibas"}, "edited": false, "score": 0, "creation_date": 1442002209, "post_id": 32531192, "comment_id": 52920869, "body": "dgw, I don&#180;t have acess to the data structure&#180;s creator, the only thing I know is that the code tries to get the hash content (is this case, a hash ref) if a regex is valid to the array. Joe / Wim I understand it now. The &quot;0&quot; is supposed to be a hash, but because there is not matching with the previously mentioned regex, it get this 0. Will dig it more to see if I can handle this. Tks."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1442006060, "creation_date": 1442006060, "answer_id": 32532220, "question_id": 32531192, "link": "https://stackoverflow.com/questions/32531192/odd-hash-representation-in-perl/32532220#32532220", "title": "Odd hash representation in perl", "body": "<p>There are no hashes involved. <code>$VAR1 = [ 0 ];</code> means the dumped variable is a reference to an array with a single element consisting of the number zero.</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 4755683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77da58d63e0ce0e83cfc31703df2552c?s=128&d=identicon&r=PG&f=1", "display_name": "dukibas", "link": "https://stackoverflow.com/users/4755683/dukibas"}, "edited": false, "score": 0, "creation_date": 1442254232, "post_id": 32539621, "comment_id": 52997578, "body": "Thanks for that insight with <code>ref()</code>. With that I can remove/undef the array when the hash is 0."}], "tags": [], "owner": {"reputation": 2177, "user_id": 5324657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/t1fGJ.png?s=128&g=1", "display_name": "Jeremy Jones", "link": "https://stackoverflow.com/users/5324657/jeremy-jones"}, "is_accepted": false, "score": 1, "last_activity_date": 1442066175, "creation_date": 1442066175, "answer_id": 32539621, "question_id": 32531192, "link": "https://stackoverflow.com/questions/32531192/odd-hash-representation-in-perl/32539621#32539621", "title": "Odd hash representation in perl", "body": "<p>You can check what type of reference it is with the <code>ref()</code> command. If it returns 'HASH' for that variable then you're safe to use it as a hash reference like you expect. If not then your incoming data isn't what you expect and you can raise an exception or handle it otherwise.</p>\n\n<pre><code>if (ref($data) eq 'HASH') {\n    while (my ($key, $value) = each %{$data}) {\n        ...\n    }\n} else {\n    die \"Unexpected data\";\n}\n</code></pre>\n\n<p>Or you could use <code>ref()</code> twice in the comparison, giving it the structure you want. That avoids coding specific string values:</p>\n\n<pre><code>if (ref($data) eq ref({})) {\n    ...\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 4755683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77da58d63e0ce0e83cfc31703df2552c?s=128&d=identicon&r=PG&f=1", "display_name": "dukibas", "link": "https://stackoverflow.com/users/4755683/dukibas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 32532220, "answer_count": 2, "score": 0, "last_activity_date": 1442066175, "creation_date": 1442001239, "question_id": 32531192, "link": "https://stackoverflow.com/questions/32531192/odd-hash-representation-in-perl", "title": "Odd hash representation in perl", "body": "<p>I have a hash that has the following content, dumped via <code>Data::Dumper</code>:</p>\n\n<pre><code>$VAR1 = [\n      0\n    ];\n</code></pre>\n\n<p>What does that mean? I can\u00b4t seem to understand if that \"0\" is a key with nothing assigned to it or any other thing. Only clue is that I got this error below, which says a hash cannot be referenced by a zero string, is that right?</p>\n\n<blockquote>\n  <p>Can't use string (\"0\") as a HASH ref while \"strict refs\" in use at FOO.pm</p>\n</blockquote>\n\n<p>The way this is assigned to an hash is obscure, since the code is restrict, but in some other cases, this same hash had something like</p>\n\n<pre><code>$VAR1 = [\n          {\n            'ExtraInfo-&gt;m_Fade_Notification_Timer' =&gt; 'RTPC',\n            'ExtraInfo-&gt;m_FarEndNESlot' =&gt; '28 MHz',\n            'ExtraInfo-&gt;m_Temperature_Ra2' =&gt; '',\n            'ExtraInfo-&gt;m_Path' =&gt; '',\n            'ExtraInfo-&gt;m_Radio_Terminal_Name' =&gt; 'ST01',\n\n          }\n        ];\n</code></pre>\n"}, {"tags": ["perl", "autoload", "moose", "method-modifier"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1442005904, "post_id": 32530936, "comment_id": 52922504, "body": "If your AUTOLOAD sub creates the symbol being autoloaded (so that AUTOLOAD won&#39;t be called for that symbol again), it&#39;s simply a question of calling <code>after</code> (which is just a normal subroutine) after creatng the symbol."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1442236805, "post_id": 32530936, "comment_id": 52986734, "body": "How do you do this after the symbol is created?  If I just try and use <code>after</code> it says that the method &#39;diff&#39; was not found in the inheritance hierarchy."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1442238127, "post_id": 32530936, "comment_id": 52987734, "body": "Then you didn&#39;t create the symbol (<code>diff</code>), or you called <code>after</code> from the wrong package"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1442239614, "post_id": 32530936, "comment_id": 52988783, "body": "Ohh, so you mean define something like <code>*diff</code>? I haven&#39;t messed with symbols much."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1442241487, "post_id": 32530936, "comment_id": 52990074, "body": "Yet you&#39;re writing an AUTOLOAD, whose purpose is to &quot;load&quot; symbols..."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1442241934, "post_id": 32530936, "comment_id": 52990420, "body": "Okay so I guess i&#39;ll go with the approach @mob suggested.  It seems to work well and I can add special processing for any CVS command that I want easily."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1442242120, "post_id": 32530936, "comment_id": 52990550, "body": "@mob&#39;s answer makes no sense. No need to wrap an AUTOLOAD you are writing yourself. You can place the code in AUTOLOAD itself."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1442243107, "post_id": 32530936, "comment_id": 52991182, "body": "basically I want to use <code>AUTOLOAD</code> to generate all of the CVS commands, however with the <code>diff</code> command I want to add extra processing.  I want <code>AUTOLOAD</code> to automatically send the &#39;diff&#39; command to CVS, then I want to use <code>after</code> to parse the diff output and return it in a different format.  I don&#39;t want any other CVS command to be treated this way though, which is why I need a way to single out <code>diff</code> and not all of the code can be a part of the <code>AUTOLOAD</code> routine itself."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1442243178, "post_id": 32530936, "comment_id": 52991222, "body": "Actually, I guess you&#39;re right.  Technically I could add the special processing directly inside the <code>AUTOLOAD</code> routine and have it return a different result for <code>diff</code>.  That might be cleaner too.  Thanks @ikegami."}], "answers": [{"comments": [{"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1442236048, "post_id": 32532036, "comment_id": 52986128, "body": "I really like this approach because it keeps any special processing for <code>AUTOLOAD</code>ed commands grouped to one place. Thanks @mob!"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1442240338, "last_edit_date": 1442240338, "creation_date": 1442005189, "answer_id": 32532036, "question_id": 32530936, "link": "https://stackoverflow.com/questions/32530936/how-can-i-apply-a-method-modifier-to-a-method-generated-by-autoload/32532036#32532036", "title": "How can I apply a method modifier to a method generated by AUTOLOAD?", "body": "<p>Apply <code>after</code> to your <code>AUTOLOAD</code> method.</p>\n\n<pre><code>after 'AUTOLOAD' =&gt; sub {\n    my $method = $The::Package::AUTOLOAD;\n    $method =~ s/.*:://;\n    if ($method eq 'diff') {\n        # do  after diff  stuff\n    } elsif ($method eq 'foo') {\n        # do  after foo  stuff\n    } else {\n        # never mind, don't want to do anything after this function\n    }\n};\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I found that I may want even more control over the <code>diff</code> command so I have added more detail to your answer.  Hopefully someone will find this information useful.</p>\n\n<p>For even more control you can use <code>around</code>!</p>\n\n<pre><code>around 'AUTOLOAD' =&gt; sub {\n    my $orig = shift;\n    my $self = shift;\n    (my $command = $AUTOLOAD) =~ s{.+::}{};\n\n    # Special processing\n    if ($command eq 'diff') {\n\n        #\n        # Add \"before\" special processing here\n        #\n\n        my $output = $self-&gt;$orig(@_);\n\n        #\n        # Add \"after\" special processing here\n        #\n\n    }\n    else {\n        return $self-&gt;$orig(@_);\n    }\n};\n</code></pre>\n\n<p>This allows you to do special processing before the function is called AND after.</p>\n\n<p>For more information see: <a href=\"http://search.cpan.org/~ether/Moose-2.1603/lib/Moose/Manual/MethodModifiers.pod\" rel=\"nofollow\">Moose::Manual::MethodModifiers</a></p>\n"}, {"comments": [{"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1442236194, "post_id": 32538790, "comment_id": 52986241, "body": "This doesn&#39;t seem to work with <code>Moose</code> classes unfortunately :("}], "tags": [], "owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "is_accepted": false, "score": 0, "last_activity_date": 1442060950, "creation_date": 1442060950, "answer_id": 32538790, "question_id": 32530936, "link": "https://stackoverflow.com/questions/32530936/how-can-i-apply-a-method-modifier-to-a-method-generated-by-autoload/32538790#32538790", "title": "How can I apply a method modifier to a method generated by AUTOLOAD?", "body": "<p>Depending on how well the <code>AUTOLOAD</code>-using class is implemented, you may find that it respects the <code>can</code> method too, and that simply calling <code>can</code> is enough to create the method.</p>\n\n<pre><code>__PACKAGE__-&gt;can( \"diff\" );\nafter diff =&gt; sub { ... };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1442234445, "post_id": 32543986, "comment_id": 52985000, "body": "I will look into this, but the main reason I&#39;m using <code>AUTOLOAD</code> is because there are a lot of CVS commands and I don&#39;t want to have to manually implement them all.  If an attempt is made to call an invalid CVS command, it will pass the command to CVS and CVS will return an error saying it is an invalid command."}], "tags": [], "owner": {"reputation": 1, "user_id": 5246536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71f0685dbe615b2609ced386e64265a2?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/5246536/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1442093815, "creation_date": 1442093815, "answer_id": 32543986, "question_id": 32530936, "link": "https://stackoverflow.com/questions/32530936/how-can-i-apply-a-method-modifier-to-a-method-generated-by-autoload/32543986#32543986", "title": "How can I apply a method modifier to a method generated by AUTOLOAD?", "body": "<p>I'd suggest that you re-architect your system to use traits, instead of relying on AUTOLOAD behavior.  The maintainability and intent will be much more obvious, if you don't have behavior scattered all over the place.</p>\n\n<p>As an example, you can do what you want with something like the following:</p>\n\n<pre><code>package Trait::CVSActions;\n\nuse Moose::Role;\n\nsub commit { print 'in commit for ' . shift . \"\\n\" }\n\nsub diff { print 'diffing for ' . shift . \"\\n\" }\n\npackage Module;\n\nuse Moose;\n\nwith 'Trait::CVSActions';\n\npackage Path;\n\nuse Moose;\n\nwith 'Trait::CVSActions';\n\nafter commit =&gt; sub { print \"after commit on Path\\n\" };\n\npackage main;\n\nmy $module = new Module;\nmy $path = new Path;\n\n$module-&gt;commit;\n$path-&gt;commit;\n</code></pre>\n\n<p>If you're looking to use AUTOLOAD to dispatch to unknown commands, then this is dangerous, since there may be some that you will have to have special handling for that you aren't aware of, so you may be causing yourself future problems.</p>\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 32532036, "answer_count": 3, "score": 4, "last_activity_date": 1442240338, "creation_date": 1442000120, "question_id": 32530936, "link": "https://stackoverflow.com/questions/32530936/how-can-i-apply-a-method-modifier-to-a-method-generated-by-autoload", "title": "How can I apply a method modifier to a method generated by AUTOLOAD?", "body": "<p>I have a very interesting predicament.  I am working on a Perl script interface to the CVS repository and have created Perl Objects to represent <code>Modules</code>,<code>Paths</code>, and <code>Files</code>.  Since <code>Modules</code>, <code>Paths</code>, and <code>Files</code> can all have CVS commands issued on them, I set up the <code>AUTOLOAD</code> routine to take any unidentified methods and issue them on the object as if they were CVS commands.</p>\n\n<p>All of these CVS commands are executed exactly the same way, but some of them need special processing done with the output to get the result i desire.</p>\n\n<hr>\n\n<p><em>For example, I want to take the output from the diff command and reformat it before I return it.</em></p>\n\n<p>I am using <code>Moose</code>, so typically this special processing could be done as follows:</p>\n\n<pre><code>after 'diff' =&gt; sub {\n    # Reformat output here\n}\n</code></pre>\n\n<p>The problem is... I never explicitly created the <code>diff</code> method since it is being generated by <code>AUTOLOAD</code> and Perl won't let me create a method modifier for it since it technically doesn't exist!</p>\n\n<blockquote>\n  <p><strong><em>Is there a way to get this to work how I want?</em></strong></p>\n</blockquote>\n"}, {"tags": ["regex", "perl", "shell", "replace"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1442000234, "post_id": 32530892, "comment_id": 52919993, "body": "Using perl is overkill for this task, sed can do the job."}, {"owner": {"reputation": 86, "user_id": 4456770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9939c63a637b6b1d01f386aa28785a42?s=128&d=identicon&r=PG&f=1", "display_name": "isanco", "link": "https://stackoverflow.com/users/4456770/isanco"}, "edited": false, "score": 1, "creation_date": 1442005557, "post_id": 32530892, "comment_id": 52922337, "body": "I tried your script and it is working for me (perl v5.20.2)."}, {"owner": {"reputation": 303, "user_id": 2184399, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d0d5ea5587c347136056855b26a3ad1?s=128&d=identicon&r=PG", "display_name": "Strommer", "link": "https://stackoverflow.com/users/2184399/strommer"}, "edited": false, "score": 0, "creation_date": 1442353772, "post_id": 32530892, "comment_id": 53045918, "body": "Thanks for the comment. It was actually working fine but there was an issue with the space before value in the regex. Thanks anyways!"}], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 2184399, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d0d5ea5587c347136056855b26a3ad1?s=128&d=identicon&r=PG", "display_name": "Strommer", "link": "https://stackoverflow.com/users/2184399/strommer"}, "edited": false, "score": 0, "creation_date": 1442005290, "post_id": 32531216, "comment_id": 52922231, "body": "Thanks, This does it perfectly fine!"}], "tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": true, "score": 2, "last_activity_date": 1442001349, "creation_date": 1442001349, "answer_id": 32531216, "question_id": 32530892, "link": "https://stackoverflow.com/questions/32530892/error-in-replacing-string-using-regular-expressions/32531216#32531216", "title": "Error in replacing string using regular expressions", "body": "<p>You don't need to use perl and xargs, you can do this task only with sed:</p>\n\n<pre><code>find . -type f -name \"*.jsp\" -exec sed -i 's#\\(value=\"\\)\\(\\${[^}]*}\\)\"#\\1&lt;c:out \\1\\2/&gt;\"#g' {} \\;\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 2184399, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d0d5ea5587c347136056855b26a3ad1?s=128&d=identicon&r=PG", "display_name": "Strommer", "link": "https://stackoverflow.com/users/2184399/strommer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 32531216, "answer_count": 1, "score": 0, "last_activity_date": 1442001349, "creation_date": 1441999939, "question_id": 32530892, "link": "https://stackoverflow.com/questions/32530892/error-in-replacing-string-using-regular-expressions", "title": "Error in replacing string using regular expressions", "body": "<p>I have multiple jsp files in which I want to do something like this in order to avoid XSS. Basically use JSTL to escape the \"value\".</p>\n\n<pre><code>//change following line to use c:out\n&lt;input  type=\"hidden\" id=\"crudProperty1\" name=\"crudProperty1\" value=\"${crud.property1}\"&gt;&lt;/input&gt; \n\n&lt;input  type=\"hidden\" id=\"crudProperty1\" name=\"crudProperty1\"  value=\"&lt;c:out value=\"${crud.property1}\"/&gt;\"&gt;&lt;/input&gt;\n</code></pre>\n\n<p>Here's the script that I tried to use from the terminal, to do these changes for one of the files in a folder. </p>\n\n<pre><code>find . -type f -name \"*.jsp\" | xargs perl -i -p -e 's|\" value=(\"\\${.*}\"?)|\" value=\"&lt;c:out value=\\1/&gt;\"|'\n</code></pre>\n\n<p>This is essentially looking for any .jsp files, then looping over the output abd replacing the above mentioned text in-place. I am not quite sure what is going wrong, but I do not see any changes to the file. Any help with this would be appreciated.</p>\n"}, {"tags": ["java", "python", "c++", "perl"], "comments": [{"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 2, "creation_date": 1441999250, "post_id": 32530648, "comment_id": 52919536, "body": "This question, while reasonable in general, is inappropriate on Stack Overflow. We don&#39;t really do conversational items here and your question is looking for a strategic conversation rather than a tactical solution."}, {"owner": {"reputation": 496316, "user_id": 57695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG", "display_name": "Peter Lawrey", "link": "https://stackoverflow.com/users/57695/peter-lawrey"}, "edited": false, "score": 0, "creation_date": 1441999256, "post_id": 32530648, "comment_id": 52919538, "body": "In general working out what you need the library to do, determining what to test and fixing bugs takes most of the time. If you spend most of your time just writing code non-stop you are in a very unusual situation."}, {"owner": {"reputation": 1053, "user_id": 3608492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68e469e0555fc5221b227deb0d9a305a?s=128&d=identicon&r=PG&f=1", "display_name": "Satyen Rai", "link": "https://stackoverflow.com/users/3608492/satyen-rai"}, "reply_to_user": {"reputation": 496316, "user_id": 57695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG", "display_name": "Peter Lawrey", "link": "https://stackoverflow.com/users/57695/peter-lawrey"}, "edited": false, "score": 1, "creation_date": 1441999621, "post_id": 32530648, "comment_id": 52919708, "body": "@PeterLawrey: No, I don&#39;t write code non stop. The reason I don&#39;t want to reimplement it in multiple languages is to avoid code duplication. Duplicate code often means library behaviour differing in subtle ways or having subtle bugs."}, {"owner": {"reputation": 1053, "user_id": 3608492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68e469e0555fc5221b227deb0d9a305a?s=128&d=identicon&r=PG&f=1", "display_name": "Satyen Rai", "link": "https://stackoverflow.com/users/3608492/satyen-rai"}, "reply_to_user": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1441999745, "post_id": 32530648, "comment_id": 52919769, "body": "@mah: Sorry, I didn&#39;t think about that angle while asking this question, I&#39;ll keep this in mind in the future."}, {"owner": {"reputation": 496316, "user_id": 57695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG", "display_name": "Peter Lawrey", "link": "https://stackoverflow.com/users/57695/peter-lawrey"}, "edited": false, "score": 0, "creation_date": 1441999783, "post_id": 32530648, "comment_id": 52919788, "body": "@Darkstar to some degree different language favour different styles of API, but I take your point that you only want differences if you intended them, not by accident."}, {"owner": {"reputation": 4945, "user_id": 341510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9162e8bca37c48433207c1fccfb3bba1?s=128&d=identicon&r=PG", "display_name": "chucksmash", "link": "https://stackoverflow.com/users/341510/chucksmash"}, "edited": false, "score": 0, "creation_date": 1442000245, "post_id": 32530648, "comment_id": 52920005, "body": "Sort of an answer comment here...in addition to your standard RESTful API options over HTTP, I&#39;ve had success in the past orchestrating dissimilar backend apps via Protobuf for serialization and Redis for inter-process communication. If there isn&#39;t a Protobuf library for your language of choice you can always fall back on a more basic serialization format like JSON."}], "answers": [{"comments": [{"owner": {"reputation": 1053, "user_id": 3608492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68e469e0555fc5221b227deb0d9a305a?s=128&d=identicon&r=PG&f=1", "display_name": "Satyen Rai", "link": "https://stackoverflow.com/users/3608492/satyen-rai"}, "edited": false, "score": 0, "creation_date": 1442000591, "post_id": 32530879, "comment_id": 52920138, "body": "There are certain restrictions due to which it can&#39;t be a RESTful service."}], "tags": [], "owner": {"reputation": 2119, "user_id": 5294334, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/0kVkL.jpg?s=128&g=1", "display_name": "MikeJ", "link": "https://stackoverflow.com/users/5294334/mikej"}, "is_accepted": false, "score": 0, "last_activity_date": 1441999874, "creation_date": 1441999874, "answer_id": 32530879, "question_id": 32530648, "link": "https://stackoverflow.com/questions/32530648/how-to-build-and-maintain-a-library-for-multiple-languages/32530879#32530879", "title": "How to build and maintain a library for multiple languages?", "body": "<p>Depends on how you plan on access the library, is it possible to expose the public API via Web Services?</p>\n\n<p>This way you can write the shared module in any language and access it via a common protocol such as a RESTfull web service.</p>\n\n<p>Look at Microservices architecture.</p>\n"}, {"tags": [], "owner": {"reputation": 56863, "user_id": 11649, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5e4103707f37d83ebd26d960c70948c2?s=128&d=identicon&r=PG", "display_name": "Javier", "link": "https://stackoverflow.com/users/11649/javier"}, "is_accepted": false, "score": 3, "last_activity_date": 1442000237, "creation_date": 1442000237, "answer_id": 32530954, "question_id": 32530648, "link": "https://stackoverflow.com/questions/32530648/how-to-build-and-maintain-a-library-for-multiple-languages/32530954#32530954", "title": "How to build and maintain a library for multiple languages?", "body": "<p>The simplest way is to write the library in C with a simple API.  Every non-obscure language has some way to interface with C code.</p>\n\n<p>Depending on the style of the API, SWIG can save some time in generating the bindings; but unless it's very big and regular, you might find it easier to write the bindings by hand.</p>\n\n<p>Some Languages (at least Python in your question) have an FFI mechanism, that lets you write the whole binding in the target language, making it much easier to deploy and maintain.  Note that most of those are focused on C APIs, not C++.</p>\n"}], "owner": {"reputation": 1053, "user_id": 3608492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68e469e0555fc5221b227deb0d9a305a?s=128&d=identicon&r=PG&f=1", "display_name": "Satyen Rai", "link": "https://stackoverflow.com/users/3608492/satyen-rai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1110, "favorite_count": 1, "closed_date": 1442001390, "answer_count": 2, "score": -2, "last_activity_date": 1442000237, "creation_date": 1441998914, "question_id": 32530648, "link": "https://stackoverflow.com/questions/32530648/how-to-build-and-maintain-a-library-for-multiple-languages", "closed_reason": "Needs more focus", "title": "How to build and maintain a library for multiple languages?", "body": "<p>I need to implement a library which will be called from multiple languages - Java, Python, Perl and possibly more in the future. I'd hate to implement (and maintain) the same thing again and again in multiple languages.</p>\n\n<p>One option I can think of is to write the core functionality in C/C++ and use SWIG to generate bindings for target languages; or maybe write the bindings myself.</p>\n\n<p>Thre are some reasons why it can't be an independent service.</p>\n\n<p>Are there any other mature alternatives? I am looking for options to compare before I settle for one.</p>\n\n<p>Ideally, I'd like to do it using a source to source compiler or a source code generator. But I can't find one that supports all of the above languages - with potential for future additions.</p>\n\n<p>I may consider any alternative binding generators if they provide any advantages over SWIG.</p>\n\n<p>Thanks in advance for any pointers!</p>\n"}, {"tags": ["perl", "if-statement"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1441993338, "post_id": 32529163, "comment_id": 52916473, "body": "No, it always passes because both of your conditions cannot be false simultaneously. Try using <code>&amp;&amp;&#47;and</code> instead of <code>||&#47;or</code> and see if your are more satisfied with the results."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1441993364, "post_id": 32529163, "comment_id": 52916489, "body": "This looks like an AND condition: <code>&amp;&amp;</code>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1441994513, "post_id": 32529163, "comment_id": 52917052, "body": "Here&#39;s a list of things that are not equal to <code>.</code>: <code>foo</code>, <code>1</code>, <code>..</code>. Here&#39;s a list of things that are not equal to <code>..</code>: <code>bar</code>, <code>2</code>, <code>.</code>. Here&#39;s a list of things that are in either the first list <i>or</i> the second list: <code>foo</code>, <code>bar</code>, <code>1</code>, <code>2</code>, <code>.</code>, <code>..</code>. In other words, everything!"}], "answers": [{"comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1441993892, "post_id": 32529255, "comment_id": 52916734, "body": "Globbing is not necessarily better, especially for <a href=\"http://perldoc.perl.org/perlport.html\" rel=\"nofollow noreferrer\">portability</a>: &quot;Don&#39;t count on filename globbing. Use <code>opendir</code>, <code>readdir</code>, and <code>closedir</code> instead.&quot;"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 4, "creation_date": 1441997519, "post_id": 32529255, "comment_id": 52918626, "body": "recommend using <code>&amp;&amp;</code>, not <code>and</code>, and reserving <code>and</code>for flow control"}, {"owner": {"reputation": 205, "user_id": 3108627, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/MmCuk.jpg?s=128&g=1", "display_name": "lchristina26", "link": "https://stackoverflow.com/users/3108627/lchristina26"}, "edited": false, "score": 0, "creation_date": 1441998633, "post_id": 32529255, "comment_id": 52919213, "body": "Thanks, simple logic oversight on my end that was probably not worthy of a StackOverflow question."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 205, "user_id": 3108627, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/MmCuk.jpg?s=128&g=1", "display_name": "lchristina26", "link": "https://stackoverflow.com/users/3108627/lchristina26"}, "edited": false, "score": 1, "creation_date": 1442001828, "post_id": 32529255, "comment_id": 52920706, "body": "@lchristina26 It&#39;s actually a very common mistake. See <a href=\"http://stackoverflow.com/q/29944441/176646\">this question</a>, for example (possible duplicate?). Wrapping your brain around multiple negatives at once is tough; I prefer statements like <code>next if $file eq &#39;.&#39; || $file eq &#39;..&#39;;</code> since they&#39;re easier to understand at a glance."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1441993384, "creation_date": 1441993384, "answer_id": 32529255, "question_id": 32529163, "link": "https://stackoverflow.com/questions/32529163/perl-if-statement-with-or-ignores-if-statement-altogether/32529255#32529255", "title": "Perl: If statement with or ignores if statement altogether", "body": "<p><em>Everything</em> is either not a single dot or not a double dot!</p>\n\n<p>You mean</p>\n\n<pre><code>if ( $file ne \".\" and $file ne \"..\" ) { ... }\n</code></pre>\n\n<p>and you should probably be looking at <code>glob</code> rather than <code>opendir</code> / <code>readdir</code></p>\n"}], "owner": {"reputation": 205, "user_id": 3108627, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/MmCuk.jpg?s=128&g=1", "display_name": "lchristina26", "link": "https://stackoverflow.com/users/3108627/lchristina26"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 32529255, "answer_count": 1, "score": 0, "last_activity_date": 1441993384, "creation_date": 1441993030, "question_id": 32529163, "link": "https://stackoverflow.com/questions/32529163/perl-if-statement-with-or-ignores-if-statement-altogether", "title": "Perl: If statement with or ignores if statement altogether", "body": "<p>Here is my line of code:</p>\n\n<pre><code>#!/usr loca/bin/perl                                                           \nuse warnings;                                                                   \nuse strict;  \n...\n...\nif ($file ne \".\" || $file ne \"..\")\n</code></pre>\n\n<p>I have also tried:</p>\n\n<pre><code>if ($file ne \".\" or $file ne \"..\")\n</code></pre>\n\n<p>And the if statement always passes since it cannot recognize the conditions I am setting. I have done one at a time and they work as expected. Can anyone help determine how I need to set this up properly? Thanks!</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1441985589, "post_id": 32527058, "comment_id": 52912158, "body": "What <code>-0777</code> does? Do you need it?"}, {"owner": {"reputation": 19234, "user_id": 1156245, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Cug0U.jpg?s=128&g=1", "display_name": "geotheory", "link": "https://stackoverflow.com/users/1156245/geotheory"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1441985689, "post_id": 32527058, "comment_id": 52912219, "body": "<a href=\"http://stackoverflow.com/a/9671078/1156245\">This explains</a>.  I&#39;m not sure what &#39;slurping&#39; means.  You&#39;re right though removing it does fix the problem."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 2, "creation_date": 1441985811, "post_id": 32527058, "comment_id": 52912309, "body": "Slurping is reading a whole file at once, and it seems like you want to read the file one line at the time (ie. get rid of that parameter)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1441986295, "post_id": 32527058, "comment_id": 52912596, "body": "@geotheory: You mustn&#39;t just write things because you&#39;ve seen them elsewhere, without having any idea what they&#39;re doing. Also, your question needs specifying a lot better. Do you want to replace <code>this</code> only on the second line of a file, only the first time it appears at the start of a line, <i>every time</i> it appears at the start of a line, or something else?"}], "answers": [{"comments": [{"owner": {"reputation": 19234, "user_id": 1156245, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Cug0U.jpg?s=128&g=1", "display_name": "geotheory", "link": "https://stackoverflow.com/users/1156245/geotheory"}, "edited": false, "score": 0, "creation_date": 1441985813, "post_id": 32527128, "comment_id": 52912311, "body": "Thanks!  Do you happen to know what <code>-0777</code> is doing - i.e. what is <a href=\"http://stackoverflow.com/a/9671078/1156245\">&#39;slurping&#39;</a>?"}, {"owner": {"reputation": 984, "user_id": 1107958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Zy3c.jpg?s=128&g=1", "display_name": "swornabsent", "link": "https://stackoverflow.com/users/1107958/swornabsent"}, "reply_to_user": {"reputation": 19234, "user_id": 1156245, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Cug0U.jpg?s=128&g=1", "display_name": "geotheory", "link": "https://stackoverflow.com/users/1156245/geotheory"}, "edited": false, "score": 0, "creation_date": 1441986210, "post_id": 32527128, "comment_id": 52912545, "body": "As @\u0421\u0443\u0445\u043e\u043927 mentioned it&#39;s reading a whole file into memory at once rather than iterating over it line by line. Not sure exactly what your end state is, but you&#39;d need to slurp the file to do your multi-line substitution in a one-shot command line like that."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1441986551, "post_id": 32527128, "comment_id": 52912755, "body": "<code>s</code> does not treat the whole string as a single line, it causes <code>.</code> to match any character including newlines. <code>m</code> causes <code>^</code> and <code>$</code> to match at the start or end of any line anywhere within the string, not just the beginning or end of the entire string."}, {"owner": {"reputation": 984, "user_id": 1107958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Zy3c.jpg?s=128&g=1", "display_name": "swornabsent", "link": "https://stackoverflow.com/users/1107958/swornabsent"}, "edited": false, "score": 0, "creation_date": 1441986795, "post_id": 32527128, "comment_id": 52912893, "body": "Okay, &quot;in effect&quot; tells Perl to pretend the string is a single line."}, {"owner": {"reputation": 19234, "user_id": 1156245, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Cug0U.jpg?s=128&g=1", "display_name": "geotheory", "link": "https://stackoverflow.com/users/1156245/geotheory"}, "edited": false, "score": 0, "creation_date": 1441986930, "post_id": 32527128, "comment_id": 52912988, "body": "Thanks guys that&#39;s helpful"}], "tags": [], "owner": {"reputation": 984, "user_id": 1107958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Zy3c.jpg?s=128&g=1", "display_name": "swornabsent", "link": "https://stackoverflow.com/users/1107958/swornabsent"}, "is_accepted": false, "score": 1, "last_activity_date": 1441992045, "last_edit_date": 1441992045, "creation_date": 1441985676, "answer_id": 32527128, "question_id": 32527058, "link": "https://stackoverflow.com/questions/32527058/perl-regex-start-of-line-anchor-fails/32527128#32527128", "title": "Perl regex start of line anchor fails", "body": "<p>You are using the /s flag, you actually want the /m flag.</p>\n\n<pre><code>perl -0777 -i -pe 's/^this/rhinoceros/igm' test.txt\n</code></pre>\n\n<p><code>s</code> treats the whole string as a single line, whereas <code>m</code> matches over multiple lines.</p>\n\n<p><strong>Edit:</strong> See <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow\">http://perldoc.perl.org/perlre.html</a> for a more detailed treatment of the <code>s</code> and <code>m</code> modifiers that @ThisSuitIsBlackNot comments on below. For practical purposes, <code>s</code> \"treat[s] string as single line\".</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1441999749, "post_id": 32527160, "comment_id": 52919774, "body": "Simpler: <code>perl -i -pe &#39;s&#47;^this&#47;rhinoceros&#47;&#39; test.txt</code>"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 5, "last_activity_date": 1441990854, "last_edit_date": 1441990854, "creation_date": 1441985801, "answer_id": 32527160, "question_id": 32527058, "link": "https://stackoverflow.com/questions/32527058/perl-regex-start-of-line-anchor-fails/32527160#32527160", "title": "Perl regex start of line anchor fails", "body": "<p>You have all the wrong modifiers on your substitution. You presumably only want to make a single change, so the <code>/g</code> is unnecessary; the text to be matched is exactly <code>this</code>, so the <code>/i</code> is unnecessary, and you have no dot <code>.</code> characters in your pattern, so <code>/s</code> doesn't do anything</p>\n\n<p>What you <em>do</em> need is a <code>/m</code> (multi-line) modifier so that the <code>^</code> matches the beginning of lines in the middle of the string, as well as just at the start of the string</p>\n\n<p>This should work for you</p>\n\n<pre><code>perl -0777 -i -pe 's/^this/rhinoceros/m' test.txt\n</code></pre>\n"}], "owner": {"reputation": 19234, "user_id": 1156245, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Cug0U.jpg?s=128&g=1", "display_name": "geotheory", "link": "https://stackoverflow.com/users/1156245/geotheory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1291, "favorite_count": 1, "accepted_answer_id": 32527160, "answer_count": 2, "score": 0, "last_activity_date": 1441992045, "creation_date": 1441985401, "question_id": 32527058, "link": "https://stackoverflow.com/questions/32527058/perl-regex-start-of-line-anchor-fails", "title": "Perl regex start of line anchor fails", "body": "<p>I want to change the 'this' on the second row of the example, but it's not happening.  Most grateful for an idea where I'm going wrong.</p>\n\n<pre><code>echo \"not this but\nthis one\" &gt; test.txt\nperl -0777 -i -pe 's/^this/rhinoceros/igs' test.txt\ncat test.txt\nnot this but\nthis one\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1441985276, "post_id": 32526929, "comment_id": 52911957, "body": "no, we can&#39;t, because you haven&#39;t explained how/where these character sequences are being used."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1441985442, "post_id": 32526929, "comment_id": 52912073, "body": "@user3597719 <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">RT*M</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 6, "creation_date": 1441986119, "post_id": 32526929, "comment_id": 52912477, "body": "It seems that you have made no effort to resolve this question yourself. This is all very clearly laid out in <a href=\"http://perldoc.perl.org/perlre.html#Regular-Expressions\" rel=\"nofollow noreferrer\"><code>perldoc perlre</code></a> under <b><i>Assertions</i></b>."}], "answers": [{"tags": [], "owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "is_accepted": false, "score": 17, "last_activity_date": 1441986418, "last_edit_date": 1441986418, "creation_date": 1441985267, "answer_id": 32527013, "question_id": 32526929, "link": "https://stackoverflow.com/questions/32526929/difference-between-z-and-z-and-a-and-a-in-perl/32527013#32527013", "title": "Difference between \\z and \\Z and \\a and \\A in Perl", "body": "<p><code>\\z</code> only matches the very end of the string.</p>\n\n<p><code>\\Z</code> also matches the very end of the string, but if the string ends with a newline, then <code>\\Z</code> also matches immediately before the newline.</p>\n\n<p>So, for example, these five are true:</p>\n\n<pre><code>'foo' =~ m/foo\\z/\n'foo' =~ m/foo\\Z/\n\"foo\\n\" =~ m/foo\\Z/\n\"foo\\n\" =~ m/foo\\n\\z/\n\"foo\\n\" =~ m/foo\\n\\Z/\n</code></pre>\n\n<p>whereas this one is false:</p>\n\n<pre><code>\"foo\\n\" =~ m/foo\\z/\n</code></pre>\n\n<p>They both differ from <code>$</code> in that they are not affected by the <code>/m</code> \"multiline\" flag, which allows <code>$</code> to match at the end of any line.</p>\n\n<p><code>\\a</code> denotes the alert (bell) character; it doesn't have any additional special meaning in a regex.</p>\n\n<p><code>\\A</code> matches only at the start of a string. Like <code>\\z</code> and <code>\\Z</code>, and unlike <code>^</code>, it's not affected by the <code>/m</code> \"multiline\" flag.</p>\n\n<p>All of this is documented in <code>perlre</code>, the Perl regular expressions manual page: <a href=\"http://perldoc.perl.org/perlre.html\">http://perldoc.perl.org/perlre.html</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1441988918, "last_edit_date": 1441988918, "creation_date": 1441986340, "answer_id": 32527329, "question_id": 32526929, "link": "https://stackoverflow.com/questions/32526929/difference-between-z-and-z-and-a-and-a-in-perl/32527329#32527329", "title": "Difference between \\z and \\Z and \\a and \\A in Perl", "body": "<p>The following indicates the positions at which the relevant regex patterns will match (<code>\u240a</code> indicates a line feed):</p>\n\n<pre><code>\\A                       \\A is not affected by /m\n^                        ^ without /m             \u2261 \\A\n^/m  ^/m  ^/m            ^ with /m                \u2261 \\A|(?&lt;=\\n)\n|    |    |\n|    |    |\nv    v    v\nabc\u240adef\u240aghi\u240a\n   ^    ^    ^^\n   |    |    ||___\n   |    |    |    |\n   $/m  $/m  $/m  $/m    $ with /m                \u2261 (?=\\n)|\\z\n             $    $      $ without /m             \u2261 (?=\\n\\z)|\\z\n             \\Z   \\Z     \\Z is not affected by /m \u2261 (?=\\n\\z)|\\z\n                  \\z     \\z is not affected by /m\n</code></pre>\n\n<p><code>\\a</code> is equivalent to <code>\\x07</code>, meaning it matches character 0x07 (BEL/BELL in ASCII and UNICODE).</p>\n\n<p>This is documented in <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow\">perlre</a>.</p>\n"}], "owner": {"reputation": 429, "user_id": 3597719, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e27a2108d6bc2898e83ba23ef8cf9405?s=128&d=identicon&r=PG&f=1", "display_name": "user3597719", "link": "https://stackoverflow.com/users/3597719/user3597719"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3716, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1441988918, "creation_date": 1441984998, "last_edit_date": 1441987152, "question_id": 32526929, "link": "https://stackoverflow.com/questions/32526929/difference-between-z-and-z-and-a-and-a-in-perl", "title": "Difference between \\z and \\Z and \\a and \\A in Perl", "body": "<p>Can you please tell me the difference between <code>\\z</code> and <code>\\Z</code> as well as <code>\\a</code> and <code>\\A</code> in Perl with a simple example ? </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 39390, "user_id": 21755, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8d1dc85bd2d8ed3a2074b9728fbdaa55?s=128&d=identicon&r=PG", "display_name": "The Archetypal Paul", "link": "https://stackoverflow.com/users/21755/the-archetypal-paul"}, "edited": false, "score": 1, "creation_date": 1441984090, "post_id": 32526563, "comment_id": 52911202, "body": "&quot;my script isn&#39;t censoring the words properly. the censored status is 80%&quot;. What does this mean? What do you mean by &quot;properly&quot;? Have you tried printing out each line, and each word to check, to ensure your text handling is what you think it should be?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1441984091, "post_id": 32526563, "comment_id": 52911205, "body": "You didn&#39;t chomp; your &#39;words&#39; have a newline at the end, so they won&#39;t often be matched."}, {"owner": {"reputation": 13, "user_id": 4803979, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d25578b450e0985bff895f42a7bbae13?s=128&d=identicon&r=PG&f=1", "display_name": "Dor12126", "link": "https://stackoverflow.com/users/4803979/dor12126"}, "edited": false, "score": 0, "creation_date": 1441984752, "post_id": 32526563, "comment_id": 52911618, "body": "i&#39;m using regexboddy and yes i printedoup every single cell in the array and it&#39;s look ok"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1441985240, "post_id": 32526563, "comment_id": 52911928, "body": "If this is just a homework assignment or a toy script, your approach is fine, but <a href=\"http://stackoverflow.com/a/6099598/176646\">don&#39;t expect a regex-based profanity filter (or any blacklist-type content filter in general) to work 100% in the wild.</a>"}, {"owner": {"reputation": 13, "user_id": 4803979, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d25578b450e0985bff895f42a7bbae13?s=128&d=identicon&r=PG&f=1", "display_name": "Dor12126", "link": "https://stackoverflow.com/users/4803979/dor12126"}, "edited": false, "score": 0, "creation_date": 1441985711, "post_id": 32526563, "comment_id": 52912249, "body": "this is bit homwork assignment. i want to build words censoring script. what&#39;s you way to do it?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1441986630, "post_id": 32526563, "comment_id": 52912806, "body": "Please don&#39;t read entire files into memory: it&#39;s wasteful and very rarely necessary. Instead, you shjould read and process files line by line. But if you <i>do</i> need to read into an array then <code>my @text = &lt;FH&gt;</code> is what you want -- there&#39;s no need to call <code>push</code> in a loop"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4803979, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d25578b450e0985bff895f42a7bbae13?s=128&d=identicon&r=PG&f=1", "display_name": "Dor12126", "link": "https://stackoverflow.com/users/4803979/dor12126"}, "edited": false, "score": 0, "creation_date": 1441984613, "post_id": 32526676, "comment_id": 52911545, "body": "Hi,i tried that but still, i have uncensored words. in one line i have the word &quot;hi&quot;, the line is: &quot;hi my name is x and hi my name is y&quot; and it cencoring it like this: &quot;hi my name is x and cencored my name is y&quot;"}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 3, "last_activity_date": 1441984526, "last_edit_date": 1441984526, "creation_date": 1441984194, "answer_id": 32526676, "question_id": 32526563, "link": "https://stackoverflow.com/questions/32526563/censored-words-in-perl/32526676#32526676", "title": "censored words in perl", "body": "<p>To answer your direct question, you need to <a href=\"http://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow\"><code>chomp</code></a> the newline off of the end of each input line that you read into your two arrays <code>@text</code> and <code>@censoredText</code>:</p>\n\n<pre><code>...\nwhile( &lt;FH&gt; ) {\n    chomp;\n    push(@text,$_);\n}\nclose(FH);\n\nmy $cencoredFile = \"blabla\\\\forbidden.txt\";\nopen(FH2, \"&lt;\", $cencoredFile) or die \"cant open file\";\n\nwhile(&lt;FH2&gt;) {\n    chomp;\n    push(@cencoredText,$_);\n}\n...\n</code></pre>\n\n<p>A few points not directly related to what you asked:</p>\n\n<p>Are arrays really the best data structure choice to indicate that a word should be censored? </p>\n\n<p>I am going to say no. One problem is that to identify words that should be censored, you currently loop through each word in <code>@censoredText</code> then for each of those words you loop through each line of <code>@text</code>. If you have N lines of text and M forbidden words then you be an overall complexity of <code>O(N*M)</code> which is not very good as N and M increase. If you used a hash to represent words that should be censored, you could reduce this to <code>O(max(N,M))</code>.</p>\n\n<p>Alternatively, you could construct a pattern with each forbidden word and do a global substitution across your entire input file. </p>\n"}], "owner": {"reputation": 13, "user_id": 4803979, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d25578b450e0985bff895f42a7bbae13?s=128&d=identicon&r=PG&f=1", "display_name": "Dor12126", "link": "https://stackoverflow.com/users/4803979/dor12126"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1441984526, "creation_date": 1441983813, "last_edit_date": 1441984019, "question_id": 32526563, "link": "https://stackoverflow.com/questions/32526563/censored-words-in-perl", "title": "censored words in perl", "body": "<p>im trying to make a censored words script,\ni don't know why but my script isn't censoring the words properly.\nthe censored status is 80% ~</p>\n\n<p>this is my code:</p>\n\n<pre><code>    #!/usr/bin/perl -w\n    use strict;\n\n    my @text;\n    my @cencoredText;\n\n    my $file = \"blabla\\\\text.txt\";\n    open(FH, \"&lt;\", $file) or die \"cant open file\";\n\n    while(&lt;FH&gt;)\n    {\n        push(@text,$_);\n    }\n    close(FH);\n\n    my $cencoredFile = \"blabla\\\\forbidden.txt\";\n    open(FH2, \"&lt;\", $cencoredFile) or die \"cant open file\";\n\n    while(&lt;FH2&gt;)\n    {\n        push(@cencoredText,$_);\n    }\n\n    close(FH2);\n\n    for(my $i=0; $i&lt;@cencoredText; $i++)\n    {\n        for(my $j=0; $j&lt;@text; $j++)\n        {\n            $text[$j] =~ s/${cencoredText[$i]}/censored/g;\n        }\n\n    }\n</code></pre>\n\n<p>the two files open and the perl script get the info from them..\ni don't know whats wrong..\nthanks!</p>\n"}, {"tags": ["perl", "telnet"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 4, "last_activity_date": 1441976858, "creation_date": 1441976858, "answer_id": 32524285, "question_id": 32524120, "link": "https://stackoverflow.com/questions/32524120/extract-string-from-variable-passed-in-parameter/32524285#32524285", "title": "Extract string from variable passed in parameter", "body": "<p>You can use substitution to remove everything up to a dash:</p>\n\n<pre><code>my $string = '90-0/2/2';\n$string = s/^.+-//;\n</code></pre>\n\n<p>If you want to be more specific, you can remove only digits:</p>\n\n<pre><code>$string =~ s/^[0-9]+-//;\n</code></pre>\n\n<ul>\n<li><code>^</code> matches the beginning of the string.</li>\n<li><code>.</code> matches anything (except for newline).</li>\n<li><code>+</code> means the previous thing should be repeated at least once.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5273342, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b2f1fce1355a1f77a424fb8f6ad6d702?s=128&d=identicon&r=PG", "display_name": "wael", "link": "https://stackoverflow.com/users/5273342/wael"}, "edited": false, "score": 0, "creation_date": 1441979404, "post_id": 32524446, "comment_id": 52907948, "body": "Thank you Pradeep this is exactly what i looked for"}], "tags": [], "owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "is_accepted": false, "score": 0, "last_activity_date": 1441977369, "creation_date": 1441977369, "answer_id": 32524446, "question_id": 32524120, "link": "https://stackoverflow.com/questions/32524120/extract-string-from-variable-passed-in-parameter/32524446#32524446", "title": "Extract string from variable passed in parameter", "body": "<p>You can use Perl's split subroutine.</p>\n\n<pre><code>my $ARG1 = '90-0/2/2';\nmy $required_part = (split(/-/,$ARG1))[1];\n</code></pre>\n\n<p>Now, $required_part contains <strong>0/2/2</strong></p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1441986843, "creation_date": 1441986843, "answer_id": 32527470, "question_id": 32524120, "link": "https://stackoverflow.com/questions/32524120/extract-string-from-variable-passed-in-parameter/32527470#32527470", "title": "Extract string from variable passed in parameter", "body": "<p>Instead of removing the part you don't want, you can capture the part that you <em>do</em> want</p>\n\n<pre><code>my ($param) = $ARGV[1] =~ /-(.+)/\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5273342, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b2f1fce1355a1f77a424fb8f6ad6d702?s=128&d=identicon&r=PG", "display_name": "wael", "link": "https://stackoverflow.com/users/5273342/wael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1441986843, "creation_date": 1441976386, "question_id": 32524120, "link": "https://stackoverflow.com/questions/32524120/extract-string-from-variable-passed-in-parameter", "title": "Extract string from variable passed in parameter", "body": "<p>My Perl script needs ARG 0 and ARG 1 which are gived by web application ./telnet 10.10.10.10 78-0/1/1 </p>\n\n<p>i want to take from ARG1 only 0/1/1 and not 78-0/1/1 \nand these value are different each time here on other exemple :</p>\n\n<p>./telnet 10.10.10.10 90-0/2/2   so i need only 0/2/2 \nSome one help please !!!!!</p>\n"}, {"tags": ["perl", "parameters"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1441975897, "post_id": 32523865, "comment_id": 52905461, "body": "Is your <code>$obj</code> actually the global <code>$OPENRTR</code> in the <code>main</code> namespace and you are calling it from a different package? Why?!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1441975964, "post_id": 32523865, "comment_id": 52905506, "body": "Those error messages are two different errors. You cut the line off the first one with <i>odd number of elements</i>. Do you have <code>use strict</code> and <code>use warnings</code> in your code?"}, {"owner": {"reputation": 115, "user_id": 1424082, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2902e5528f021209725f7e0cfdd90070?s=128&d=identicon&r=PG", "display_name": "DavisTasar", "link": "https://stackoverflow.com/users/1424082/davistasar"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1441976041, "post_id": 32523865, "comment_id": 52905552, "body": "The object in the global is based on the original script, I didn&#39;t write it, just using it so I don&#39;t have to re-write the wheel.  And use warnings is in my code."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1441976113, "post_id": 32524006, "comment_id": 52905596, "body": "It was hard to see from the documentation as code in the question. (facepalm)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1441976146, "post_id": 32524006, "comment_id": 52905616, "body": "In fact OP used them wrong. They did <code>cmd( foo =&gt; &quot;bar&quot;, [ baz =&gt; &quot;qux&quot;, &quot;asd&quot; =&gt; &quot;fgh&quot; ] )</code> and not <code>cmd( foo =&gt; &quot;bar&quot;, [ baz =&gt; &quot;qux&quot;], [&quot;asd&quot; =&gt; &quot;fgh&quot; ] )</code> as the <i>docs suggested</i>."}, {"owner": {"reputation": 115, "user_id": 1424082, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2902e5528f021209725f7e0cfdd90070?s=128&d=identicon&r=PG", "display_name": "DavisTasar", "link": "https://stackoverflow.com/users/1424082/davistasar"}, "edited": false, "score": 0, "creation_date": 1441976539, "post_id": 32524006, "comment_id": 52905867, "body": "I had tried that format as well, and it didn&#39;t work."}, {"owner": {"reputation": 115, "user_id": 1424082, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2902e5528f021209725f7e0cfdd90070?s=128&d=identicon&r=PG", "display_name": "DavisTasar", "link": "https://stackoverflow.com/users/1424082/davistasar"}, "edited": false, "score": 0, "creation_date": 1441976842, "post_id": 32524006, "comment_id": 52906060, "body": "@choroba What simbabque suggested, by placing each optional parameter in separate &#39;[]&#39; statements. It looks like yours is working now, feel like an idiot to include them altogether."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 115, "user_id": 1424082, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2902e5528f021209725f7e0cfdd90070?s=128&d=identicon&r=PG", "display_name": "DavisTasar", "link": "https://stackoverflow.com/users/1424082/davistasar"}, "edited": false, "score": 0, "creation_date": 1441977026, "post_id": 32524006, "comment_id": 52906198, "body": "@DavisTasar: I&#39;d probably submit a bugreport for the documentation."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1441976121, "last_edit_date": 1441976121, "creation_date": 1441976057, "answer_id": 32524006, "question_id": 32523865, "link": "https://stackoverflow.com/questions/32523865/perl-nettelnetcisco-bad-named-parameter/32524006#32524006", "title": "Perl Net::Telnet::Cisco Bad named parameter", "body": "<p>I think the square brackets in the documentation just show the arguments are optional, you shouldn't use them in real code:</p>\n\n<pre><code> $OPENRTR-&gt;cmd( String  =&gt; $testString,\n                Timeout =&gt; 5,\n                Output  =&gt; $userTest1);\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 1424082, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2902e5528f021209725f7e0cfdd90070?s=128&d=identicon&r=PG", "display_name": "DavisTasar", "link": "https://stackoverflow.com/users/1424082/davistasar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "accepted_answer_id": 32524006, "answer_count": 1, "score": 0, "last_activity_date": 1441976121, "creation_date": 1441975538, "question_id": 32523865, "link": "https://stackoverflow.com/questions/32523865/perl-nettelnetcisco-bad-named-parameter", "title": "Perl Net::Telnet::Cisco Bad named parameter", "body": "<p>I'm trying to get some scripting finished to deploy changes en masse to about 400 Cisco devices. I've got a perl script modified from <a href=\"http://blog.alwaysthenetwork.com/useful-links/great-perl-script/\" rel=\"nofollow\">MrAudit</a> that's using <a href=\"http://search.cpan.org/~joshua/Net-Telnet-Cisco-1.10/Cisco.pm\" rel=\"nofollow\">Net::Telnet::Cisco</a> and for the life of me, I can't figure out the named parameter component. </p>\n\n<p>In the documentation, they have:</p>\n\n<pre><code>$ok = $obj-&gt;cmd($string);\n$ok = $obj-&gt;cmd(String   =&gt; $string,\n                [Output  =&gt; $ref,]\n                [Prompt  =&gt; $match,]\n                [Timeout =&gt; $secs,]\n                [Cmd_remove_mode =&gt; $mode,]);\n\n@output = $obj-&gt;cmd($string);\n@output = $obj-&gt;cmd(String   =&gt; $string,\n                    [Output  =&gt; $ref,]\n                    [Prompt  =&gt; $match,]\n                    [Timeout =&gt; $secs,]\n                    [Cmd_remove_mode =&gt; $mode,]\n                    [Normalize_cmd =&gt; $boolean,]);\n</code></pre>\n\n<p>And my code is:</p>\n\n<p>$testString is the test command I'm running against the device, $userTest1 is an array being cast where I want the output to be stored. </p>\n\n<pre><code>$::OPENRTR-&gt;cmd(String=&gt;$testString,[Timeout=&gt;5,Output=&gt;$userTest1,]);\n</code></pre>\n\n<p>And every single time, no matter which component I modify or try and write it a different way, I get a variation of the error:</p>\n\n<pre><code>Odd number of elements in hash assignment at(filename)\nbad named parameter \"ARRAY(0x2e46460)\" given to Net::Telnet::Cisco::cmd() at mrAudit-TACACSMod.pl line 279\n</code></pre>\n\n<p>I know it has to be something simple, but it's just flying right by. Any help would be appreciated. </p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1441972741, "post_id": 32522905, "comment_id": 52903524, "body": "Why do you want to do that exactly? Sounds like you&#39;re making your life hard. What&#39;s the overall intent?"}, {"owner": {"reputation": 107, "user_id": 2594491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L2Lt.jpg?s=128&g=1", "display_name": "TVNshack", "link": "https://stackoverflow.com/users/2594491/tvnshack"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1441973753, "post_id": 32522905, "comment_id": 52904123, "body": "As I wrote, I have to reuse an existing library that I&#39;m not allowed to modify, mapping new content (my content) to an existing hash (not mine) which then will be processed by this library. If it were only for me, I wouldn&#39;t have bothered. Thus, I&#39;de like to understand if the language allows <code>%foo=();</code> to be replaced by another existing constructor. Thanks."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1441973863, "post_id": 32522905, "comment_id": 52904187, "body": "Can you rephrase it maybe? There is code that creates a hash variable. Is that lexical or global? Is it in a package? Is it the return value of a function call?"}, {"owner": {"reputation": 107, "user_id": 2594491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L2Lt.jpg?s=128&g=1", "display_name": "TVNshack", "link": "https://stackoverflow.com/users/2594491/tvnshack"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1441974152, "post_id": 32522905, "comment_id": 52904387, "body": "No, bunch of (quite) independent files put together with &quot;<code>require()</code>&quot;. I&#39;m modifying one of them that will create the <code>%bar</code> content. I can negotiate adding one line to create &quot;<i>bar linked to foo</i>&quot;. If I were allowed to modify the existing code, I&#39;ll turn it all to anon-hash in a jiffy. In general - not talking about my (poor) case - is it possible to substitute the constructor created by <code>%bar=();</code> by another ?"}, {"owner": {"reputation": 107, "user_id": 2594491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L2Lt.jpg?s=128&g=1", "display_name": "TVNshack", "link": "https://stackoverflow.com/users/2594491/tvnshack"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1441974383, "post_id": 32522905, "comment_id": 52904534, "body": "Note: That code needs to be extremely fast in execution (&lt; tenth of a sec), therefore it loads portions of codes it needs with selective <code>require()</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1441974583, "post_id": 32522905, "comment_id": 52904656, "body": "Actually that doesn&#39;t make it faster, because it makes the Perl compiler switch between compile time and run time. Legacy is fun."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1441974847, "post_id": 32522905, "comment_id": 52904839, "body": "There is no constructor in <code>%bar = ()</code>. <code>%bar</code> is just a hash, not an object. You are <i>initializing</i> it with the empty list (if it didn&#39;t have a value before). And with <code>my %bar</code> you are <i>declaring</i> it. If there was a constructor, you could overwrite that by either sub-classing or monkey-patching into your package. But you don&#39;t have packages it seems, so that&#39;s not possible. What you can do to avoid further confusion is write new code in packages and start slowly moving away from the legacy stuff. When you need to work with it, also put it in a package. <code>package legacy { require &#39;foo.pl&#39; }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 2594491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L2Lt.jpg?s=128&g=1", "display_name": "TVNshack", "link": "https://stackoverflow.com/users/2594491/tvnshack"}, "edited": false, "score": 0, "creation_date": 1441974970, "post_id": 32523424, "comment_id": 52904917, "body": "Thanks. So, it means that the language doesn&#39;t allow for it, thus requiring resorting to using a external code. Did I read somewhere that Data:Alias is manipulating Perl internal data structures to achieve this feat ? Thus leading with some uncertainty to some upward compatibility issues. This won&#39;t fit with the customer. I presume that I&#39;ll have to file for rewriting these external files I was mentioning (and trigger some complex re-validation process). Here goes our life. Thanks a lot anyways."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 107, "user_id": 2594491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L2Lt.jpg?s=128&g=1", "display_name": "TVNshack", "link": "https://stackoverflow.com/users/2594491/tvnshack"}, "edited": false, "score": 1, "creation_date": 1441975268, "post_id": 32523424, "comment_id": 52905103, "body": "I believe it does. A look at the source reveals 2k lines of nice XS code. But you cannot really know if it does anything upstream. You could have tests, but I guess you don&#39;t have those for that project. Using CPAN on the other hand should not be put asside. It&#39;s a valuable asset and one of the strong points that Perl has over newer technologies today."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 5, "last_activity_date": 1441974078, "creation_date": 1441974078, "answer_id": 32523424, "question_id": 32522905, "link": "https://stackoverflow.com/questions/32522905/binding-two-perl-hashes-not-two-anonymous-hashes/32523424#32523424", "title": "Binding two Perl hashes (not two anonymous hashes)", "body": "<p>For your example, you can use <a href=\"https://metacpan.org/pod/Data::Alias\">Data::Alias</a> to alias <code>%bar</code> to <code>%foo</code>. That allows you to make changes in <code>%bar</code> and later see those in <code>%foo</code>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Printer;\nuse Data::Alias;\n\nmy  %foo = ();\nmy  %bar = ();\n\nalias %foo = %bar;\n\n$bar{A}-&gt;{st} = 'a';\n$bar{A}-&gt;{qt} = 'a';\n$bar{B}-&gt;{st} = 'b';\n$bar{B}-&gt;{qt} = 'b';\n\np %foo;\np %bar;\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>{\n    A   {\n        qt   \"a\",\n        st   \"a\"\n    },\n    B   {\n        qt   \"b\",\n        st   \"b\"\n    }\n}\n{\n    A   {\n        qt   \"a\",\n        st   \"a\"\n    },\n    B   {\n        qt   \"b\",\n        st   \"b\"\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 2594491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L2Lt.jpg?s=128&g=1", "display_name": "TVNshack", "link": "https://stackoverflow.com/users/2594491/tvnshack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1441974078, "creation_date": 1441972424, "question_id": 32522905, "link": "https://stackoverflow.com/questions/32522905/binding-two-perl-hashes-not-two-anonymous-hashes", "title": "Binding two Perl hashes (not two anonymous hashes)", "body": "<p>In order to reuse some already written code libraries, I need to \"masquerade\" a hash (<code>%bar</code>) into another hash (<code>%foo</code>) so that each changes made in <code>%bar</code> can be seen with <code>%foo</code> <em>after</em> their binding.</p>\n\n<p>With an anonymous hash construct, it's easy: just copy the ref of <code>bar</code> into the ref of <code>foo</code>  ( <code>$foo = $bar;</code> ).</p>\n\n<p>How about \"not using\" an anonymous hash (because the code I have to reuse is built not using anonymous hash constructs) ?  Is this only possible ?</p>\n\n<p>Thanks.</p>\n\n<pre><code>use strict;\nuse Data::Dumper;\n\nmy  %foo = ();\nmy  %bar = ();\n\n%foo = %bar;    # This won't work as it copies %bar into %foo as at the current time.\n\n$bar{A}-&gt;{st} = 'a';\n$bar{A}-&gt;{qt} = 'a';\n$bar{B}-&gt;{st} = 'b';\n$bar{B}-&gt;{qt} = 'b';\n\n# $foo{A}-&gt;{st}  doesn't exist\n</code></pre>\n\n<p>Of course, an anonymous hash construct would have been a blessing.</p>\n\n<pre><code>use strict;\nuse Data::Dumper;\n\nmy  $foo = {};\nmy  $bar = {};\n\n$foo = $bar;   # This works fine.\n\n$bar-&gt;{A}-&gt;{st} = 'a';\n$bar-&gt;{A}-&gt;{qt} = 'a';\n$bar-&gt;{B}-&gt;{st} = 'b';\n$bar-&gt;{B}-&gt;{qt} = 'b';\n\nprint STDOUT \"foo\\n---\\n\";\nprint Dumper($foo) . \"\\n\\n\";\n\nprint STDOUT \"bar\\n---\\n\";\nprint Dumper($bar) . \"\\n\\n\";\n</code></pre>\n\n<p>Yields the expected result:</p>\n\n<pre><code>foo\n---\n$VAR1 = {\n          'B' =&gt; {\n                   'st' =&gt; 'b',\n                   'qt' =&gt; 'b'\n                 },\n          'A' =&gt; {\n                   'qt' =&gt; 'a',\n                   'st' =&gt; 'a'\n                 }\n        };\n\n\nbar\n---\n$VAR1 = {\n          'B' =&gt; {\n                   'st' =&gt; 'b',\n                   'qt' =&gt; 'b'\n                 },\n          'A' =&gt; {\n                   'qt' =&gt; 'a',\n                   'st' =&gt; 'a'\n                 }\n        };\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1441972159, "post_id": 32522598, "comment_id": 52903144, "body": "Elements like <code>&lt;policy 1 create&gt;</code> are inadmissible becauseyou can&#39;t have spaces in the tag name. I&#39;m surprised you say that&#39;s what you want, because your code explicitly calls <code>split</code> on each line, which is unnecessary if you just want the whole line as a tag name"}, {"owner": {"reputation": 325, "user_id": 4319705, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/02641c38b0ade4dc43beecea4aaf1888?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh", "link": "https://stackoverflow.com/users/4319705/venkatesh"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1441972322, "post_id": 32522598, "comment_id": 52903265, "body": "typo error :P now corrected  to <code>&lt;policy_1_create&gt;</code>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1441972443, "post_id": 32522598, "comment_id": 52903351, "body": "Can you show how the output XML should look like for the given input?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1441972659, "post_id": 32522598, "comment_id": 52903478, "body": "Fine, but surely you don&#39;t want <code>start last sunday september 02:00</code> rendered as <code>&lt;start_last_sunday_september_02:00&gt;</code>"}, {"owner": {"reputation": 325, "user_id": 4319705, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/02641c38b0ade4dc43beecea4aaf1888?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh", "link": "https://stackoverflow.com/users/4319705/venkatesh"}, "edited": false, "score": 0, "creation_date": 1441973987, "post_id": 32522598, "comment_id": 52904275, "body": "Here is where i need help."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1441974203, "post_id": 32522598, "comment_id": 52904425, "body": "Well you&#39;ll have to at least explain what the format of your config data means, as at present only you have this information. If you can&#39;t express the config file as XML <i>by hand</i> then you don&#39;t stand a chance to get a program working"}, {"owner": {"reputation": 325, "user_id": 4319705, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/02641c38b0ade4dc43beecea4aaf1888?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh", "link": "https://stackoverflow.com/users/4319705/venkatesh"}, "edited": false, "score": 0, "creation_date": 1441983810, "post_id": 32522598, "comment_id": 52911027, "body": "I am using space count before every line to for creating open and close tag. <code>system</code>     <code>name &quot;NILpv-BNG34&quot;</code> <code>exit </code>   becomes  <code>&lt;system&gt;&lt;name&gt;NILpv-BNG34&lt;&#47;name&gt;&lt;&#47;system&gt;</code> The whole logic used for every line is can be known from script."}, {"owner": {"reputation": 325, "user_id": 4319705, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/02641c38b0ade4dc43beecea4aaf1888?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh", "link": "https://stackoverflow.com/users/4319705/venkatesh"}, "edited": false, "score": 0, "creation_date": 1442073248, "post_id": 32522598, "comment_id": 52938653, "body": "there is no problem if <code>start last sunday september 02:00</code> rendered as <code>&lt;start_last_sunday_september_02:00&gt;</code>."}, {"owner": {"reputation": 325, "user_id": 4319705, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/02641c38b0ade4dc43beecea4aaf1888?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh", "link": "https://stackoverflow.com/users/4319705/venkatesh"}, "edited": false, "score": 0, "creation_date": 1442073392, "post_id": 32522598, "comment_id": 52938695, "body": "I need to compare two .cfg files.So, my idea is to change data to XML and then parse it with xpath. Any better idea to compare these files is appreciated."}, {"owner": {"reputation": 325, "user_id": 4319705, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/02641c38b0ade4dc43beecea4aaf1888?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh", "link": "https://stackoverflow.com/users/4319705/venkatesh"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1442132525, "post_id": 32522598, "comment_id": 52951684, "body": "@choroba , i added the xml required for the text."}, {"owner": {"reputation": 325, "user_id": 4319705, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/02641c38b0ade4dc43beecea4aaf1888?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh", "link": "https://stackoverflow.com/users/4319705/venkatesh"}, "edited": false, "score": 0, "creation_date": 1442163382, "post_id": 32522598, "comment_id": 52960234, "body": "it would be appreciated even if text is converted to JSON. The aim is to compare two .cfg files for given hierarchy and display differences."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1442178360, "post_id": 32522598, "comment_id": 52964933, "body": "Do you need to compare the files programmatically or just visually?"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1441973291, "creation_date": 1441973291, "answer_id": 32523175, "question_id": 32522598, "link": "https://stackoverflow.com/questions/32522598/formatted-text-to-xml-or-json-using-perl/32523175#32523175", "title": "formatted text to XML (or) JSON using perl", "body": "<p>I recommend the <a href=\"http://metacpan.org/module/XML::Writer\" rel=\"nofollow\"><code>XML::Writer</code></a> for this. It will keep track of the stack of outstanding open tags that remain to be closed</p>\n\n<p>It would look like this</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse XML::Writer;\n\nmy $writer = XML::Writer-&gt;new( DATA_MODE =&gt; 1, DATA_INDENT =&gt; '  ');\n\n$writer-&gt;xmlDecl('UTF-8');\n\nwhile ( &lt;DATA&gt; ) {\n\n  next unless /^(\\s*)(\\S.*\\S*)/;\n\n  my $tag = $2 =~ tr/ /_/r;\n\n  if ( $tag eq 'exit' ) {\n    $writer-&gt;endTag;\n  }\n  else {\n    $writer-&gt;startTag($tag);\n  }\n}\n\n$writer-&gt;end;\n\n__DATA__\ncpu-protection\n        policy 1 create\n        exit\n        policy 254 create\n        exit\n        policy 255 create\n        exit\n    exit\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;cpu-protection&gt;\n  &lt;policy_1_create&gt;&lt;/policy_1_create&gt;\n  &lt;policy_254_create&gt;&lt;/policy_254_create&gt;\n  &lt;policy_255_create&gt;&lt;/policy_255_create&gt;\n&lt;/cpu-protection&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 325, "user_id": 4319705, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/02641c38b0ade4dc43beecea4aaf1888?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh", "link": "https://stackoverflow.com/users/4319705/venkatesh"}, "edited": false, "score": 0, "creation_date": 1442073870, "post_id": 32540005, "comment_id": 52938850, "body": "you have shortened my code a lot. Thank You :).But, <code>contact &quot;Wayne Ritchie&#47;NGN OPERATIONS 0800 4 NGNOP (0800 464 667)&quot;</code> becomes <code>&lt;contact_ &quot; NGN_OPERATIONS_0800_4_NGNOP_ ( _464667 )&gt;</code>. can you update script which works for part of file i added??"}, {"owner": {"reputation": 2177, "user_id": 5324657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/t1fGJ.png?s=128&g=1", "display_name": "Jeremy Jones", "link": "https://stackoverflow.com/users/5324657/jeremy-jones"}, "reply_to_user": {"reputation": 325, "user_id": 4319705, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/02641c38b0ade4dc43beecea4aaf1888?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh", "link": "https://stackoverflow.com/users/4319705/venkatesh"}, "edited": false, "score": 0, "creation_date": 1442076057, "post_id": 32540005, "comment_id": 52939518, "body": "I&#39;ve revised the <code>tr&#47;&#47;&#47;;</code> statement so that it will now make any non-alphanumeric character(s) into a _"}, {"owner": {"reputation": 325, "user_id": 4319705, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/02641c38b0ade4dc43beecea4aaf1888?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh", "link": "https://stackoverflow.com/users/4319705/venkatesh"}, "edited": false, "score": 0, "creation_date": 1442076353, "post_id": 32540005, "comment_id": 52939601, "body": "XML is not generating in proper way"}, {"owner": {"reputation": 2177, "user_id": 5324657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/t1fGJ.png?s=128&g=1", "display_name": "Jeremy Jones", "link": "https://stackoverflow.com/users/5324657/jeremy-jones"}, "reply_to_user": {"reputation": 325, "user_id": 4319705, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/02641c38b0ade4dc43beecea4aaf1888?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh", "link": "https://stackoverflow.com/users/4319705/venkatesh"}, "edited": false, "score": 0, "creation_date": 1442076739, "post_id": 32540005, "comment_id": 52939716, "body": "If the data is even slightly unusual like that then you&#39;re far better using XML::Writer as above in order to generate valid XML. A hand-rolled solution like mine is only suitable if you know the data beforehand and know that it only uses simple &amp; safe keys, e.g. from a fixed list of values. Hope that helps."}], "tags": [], "owner": {"reputation": 2177, "user_id": 5324657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/t1fGJ.png?s=128&g=1", "display_name": "Jeremy Jones", "link": "https://stackoverflow.com/users/5324657/jeremy-jones"}, "is_accepted": false, "score": 0, "last_activity_date": 1442075977, "last_edit_date": 1442075977, "creation_date": 1442068603, "answer_id": 32540005, "question_id": 32522598, "link": "https://stackoverflow.com/questions/32522598/formatted-text-to-xml-or-json-using-perl/32540005#32540005", "title": "formatted text to XML (or) JSON using perl", "body": "<p>Another option, if you can rely on the data</p>\n\n<pre><code>#!/usr/bin/perl -l\nuse warnings;\nuse strict;\n\nmy @tags = ();\n\nprint qq[&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\\n];\n\nwhile (&lt;DATA&gt;) {\n    chomp;\n    s/^\\s+//;\n\n    if (@tags and $_ eq 'exit') {\n        print sprintf(\"%s&lt;/%s&gt;\", (\" \" x (scalar(@tags)-1)), pop @tags);\n    }\n    else {\n        tr/a-zA-Z0-9-/_/cs;\n        print sprintf(\"%s&lt;%s&gt;\", (\" \" x scalar(@tags)), $_);\n        push @tags, $_;\n    }\n}\n\n__DATA__\ncpu-protection\n        policy 1 create\n        exit\n        policy 254 create\n        exit\n        policy 255 create\n        exit\n    exit\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>$ perl script3.pl\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;cpu-protection&gt;\n &lt;policy_1_create&gt;\n &lt;/policy_1_create&gt;\n &lt;policy_254_create&gt;\n &lt;/policy_254_create&gt;\n &lt;policy_255_create&gt;\n &lt;/policy_255_create&gt;\n&lt;/cpu-protection&gt;\n$ \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 325, "user_id": 4319705, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/02641c38b0ade4dc43beecea4aaf1888?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh", "link": "https://stackoverflow.com/users/4319705/venkatesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1442579079, "last_edit_date": 1442579079, "creation_date": 1442410346, "answer_id": 32610077, "question_id": 32522598, "link": "https://stackoverflow.com/questions/32522598/formatted-text-to-xml-or-json-using-perl/32610077#32610077", "title": "formatted text to XML (or) JSON using perl", "body": "<p>Converts data to XML to compare and display differences.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse XML::XPath;\n\nuse Data::Dumper;\n\nmy $exitProgram = 0;\n\nif ( @ARGV != 3 ) {\n    print \"Proper Files input required !!\\n\";\n    exit;\n}\n\nif ( !-e $ARGV[0] ) {\n    print \"Template File Not found!!\\n\";\n    $exitProgram = 1;\n}\n\nif ( !-e $ARGV[1] ) {\n    print \"Test File Not found!!\\n\";\n    $exitProgram = 1;\n}\n\nif ( !-e $ARGV[2] ) {\n    print \"Production File Not found!!\\n\";\n    $exitProgram = 1;\n}\n\nexit 101 if $exitProgram;\n\nif ( -z $ARGV[0] ) {\n    print \"Template File Empty!!\\n\";\n    $exitProgram = 1;\n}\n\nif ( -z $ARGV[1] ) {\n    print \"Test File Empty!!\\n\";\n    $exitProgram = 1;\n}\n\nif ( -z $ARGV[2] ) {\n    print \"Production File Empty!!\\n\";\n    $exitProgram = 1;\n}\n\nexit 102 if $exitProgram;\n\nmy $templateFile = $ARGV[0];\nmy $test         = $ARGV[1];\nmy $prod         = $ARGV[2];\n\nmy @configFiles = ( $test, $prod );\n\nmy @addrootElementAppendRequired = (\n    'Switch Fabric Configuration',\n    'Card Configuration',\n    'Port Configuration',\n    'LAG Configuration'\n);    \n\n my @configModules;\n my %configurationsHash;\n my $configName;\n\nopen( TEMPLATE, \"&lt;\" . $templateFile ) or die \"cannot open file\";\nwhile (&lt;TEMPLATE&gt;) {\n    chomp($_);\n    push @configModules, $_ if /^[[:alpha:]]/;\n    $configName = $_ if /^[[:alpha:]]/;\n    push @{ $configurationsHash{$configName} }, $_ if /^\\|/;\n}  \nclose(TEMPLATE);\n\nif ( scalar @configModules == 0 ) {\n    print \"Configuration modules not specefied in Template File\\n\";\n    exit 103;\n}\n\n=pod\n\nif( scalar %configurationsHash == 0 ){\n    print \"Configuration Hierarchy not specefied in Template File\\n\";\n    exit 103;\n}\n\n=cut\n\nmy $configSubModuleEscaped;\n\nforeach my $configSubModule (@configModules) {\nchomp($configSubModule);\n\nprint \"\\nConfiguration :: $configSubModule\\n\";\n\n$configSubModuleEscaped = quotemeta '\"' . $configSubModule . '\"';\n\nmy $index = 0;\nmy @grabbed_1;\nmy @grabbed_2;\nmy $last = 0;\nmy $end  = 0;\n\nforeach my $file (@configFiles) {\n    $last = 0;\n    $end  = 0;\n    $index++;\n\n    open( CONFIGFILE, \"&lt;\" . $file );\n    while (&lt;CONFIGFILE&gt;) {\n        if (/$configSubModuleEscaped/) {\n            while (&lt;CONFIGFILE&gt;) {\n                if (/#---/) {\n                    $end = 1, last if $last;\n                    $last = 1;\n                }\n                else {\n                    push @grabbed_1, $_ if $index == 1;\n                    push @grabbed_2, $_ if $index == 2;\n                }\n            }\n        }\n        last if $end;\n    }\n}\n\nmy @grabbed;\nmy @XMLStrings;\n\nforeach my $i ( 1 .. $index ) {\n    @grabbed = @grabbed_1 if $i == 1;\n    @grabbed = @grabbed_2 if $i == 2;\n\n    my $currentLine;\n\n    my $previousLineSpaceLength = 0;\n    my $currentLineSpaceLength  = 0;\n    my $nextLineSpaceLength     = 0;\n\n    my @exitTags;\n    my $exitTag = '';\n\n    my @tag;\n    my $lineSplits;\n\n    my $xmlString = '';\n    foreach my $i ( 0 .. $#grabbed ) {\n\n        $currentLine = $grabbed[$i];\n        $currentLine =~ /^\\s*/;\n        $currentLineSpaceLength = $+[0];\n        chomp($currentLine);\n        $currentLine =~ s/^\\s+//;\n        $currentLine =~ s/\\s+$//;\n\n        @tag = split ' ', $currentLine, 2;\n        $lineSplits = scalar @tag;\n\n        ## If configuration has single line.\n        if ( ( scalar @grabbed ) == 1 ) {\n            $xmlString = '&lt;' . $tag[0] . '/&gt;' if $lineSplits == 1;\n            $xmlString =\n              '&lt;' . $tag[0] . ' id=\\'' . $tag[1] . '&gt;&lt;/' . $tag[0] . '&gt;'\n              if $lineSplits == 2;\n            next;\n        }\n\n        if ( $previousLineSpaceLength == 0 ) {\n\n            if ( $lineSplits == 1 ) {\n                $xmlString = $xmlString . '&lt;' . $currentLine . '&gt;';\n                push @exitTags, '&lt;/' . $currentLine . '&gt;';\n            }\n            else {\n                $xmlString =\n                  $xmlString . '&lt;' . $tag[0] . ' id=\\'' . $tag[1] . '\\'&gt;';\n                push @exitTags, '&lt;/' . $tag[0] . '&gt;';\n            }\n        }\n        elsif ( $currentLineSpaceLength &gt; $previousLineSpaceLength ) {\n            my $nextLine = $grabbed[ $i + 1 ];\n            $nextLine =~ /^\\s*/;\n            $nextLineSpaceLength = $+[0];\n            chomp($nextLine);\n            $nextLine =~ s/^\\s+//;\n            $nextLine =~ s/\\s+$//;\n\n            if ( $lineSplits == 1 ) {\n                if ( $nextLineSpaceLength &lt;= $currentLineSpaceLength ) {\n                    $xmlString = $xmlString . '&lt;' . $currentLine . ' /&gt;';\n                }\n                else {\n                    $xmlString = $xmlString . '&lt;' . $currentLine . '&gt;';\n                    push @exitTags, '&lt;/' . $currentLine . '&gt;';\n                }\n            }\n            elsif ( $lineSplits == 2 ) {\n                if ( $nextLineSpaceLength &lt;= $currentLineSpaceLength ) {\n                    $xmlString =\n                        $xmlString . '&lt;'\n                      . $tag[0] . '&gt;'\n                      . $tag[1] . '&lt;/'\n                      . $tag[0] . '&gt;';\n                }\n                else {\n                    $xmlString =\n                        $xmlString . '&lt;'\n                      . $tag[0]\n                      . ' id=\\''\n                      . $tag[1] . '\\'&gt;';\n                    push @exitTags, '&lt;/' . $tag[0] . '&gt;';\n                }\n            }\n\n        }\n        elsif ( ( $currentLineSpaceLength == $previousLineSpaceLength )\n            &amp;&amp; $currentLine ne 'exit' )\n        {\n            my $nextLine = $grabbed[ $i + 1 ];\n            $nextLine =~ /^\\s*/;\n            $nextLineSpaceLength = $+[0];\n            chomp($nextLine);\n            $nextLine =~ s/^\\s+//;\n            $nextLine =~ s/\\s+$//;\n            if ( $lineSplits == 1 ) {\n\n                if ( $nextLineSpaceLength &gt; $currentLineSpaceLength ) {\n                    $xmlString = $xmlString . '&lt;' . $currentLine . '&gt;';\n                    push @exitTags, '&lt;/' . $currentLine . '&gt;';\n                }\n                else {\n                    $xmlString = $xmlString . '&lt;' . $currentLine . ' /&gt;';\n                }\n\n            }\n            elsif ( $lineSplits == 2 ) {\n                if ( $nextLineSpaceLength &gt; $currentLineSpaceLength ) {\n\n                    $xmlString =\n                        $xmlString . '&lt;'\n                      . $tag[0]\n                      . ' id=\\''\n                      . $tag[1] . '\\'&gt;';\n                    push @exitTags, '&lt;/' . $tag[0] . '&gt;';\n                }\n                else {\n                    if ( ( $currentLineSpaceLength == $nextLineSpaceLength )\n                        &amp;&amp; $nextLine eq 'exit' )\n                    {\n                        $xmlString =\n                            $xmlString . '&lt;'\n                          . $tag[0]\n                          . ' id=\\''\n                          . $tag[1] . '\\'&gt;' . '&lt;/'\n                          . $tag[0] . '&gt;';\n\n                    }\n                    else {\n                        $xmlString =\n                            $xmlString . '&lt;'\n                          . $tag[0] . '&gt;'\n                          . $tag[1] . '&lt;/'\n                          . $tag[0] . '&gt;';\n                    }\n                }\n            }\n\n        }\n        elsif ( ( $currentLineSpaceLength &lt; $previousLineSpaceLength )\n            &amp;&amp; $currentLine eq 'exit' )\n        {\n            $xmlString = $xmlString . pop @exitTags;\n        }\n\n        $previousLineSpaceLength = $currentLineSpaceLength;\n\n    }\n\n    if ( grep { $_ eq $configSubModule } @addrootElementAppendRequired ) {\n        my $subModuleTemp = $configSubModule;\n        $subModuleTemp =~ s/ /_/g;\n        $xmlString = '&lt;'\n          . $subModuleTemp . '&gt;'\n          . $xmlString . '&lt;/'\n          . $subModuleTemp . '&gt;';\n\n    }\n    $xmlString = '&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;' . $xmlString;\n    push @XMLStrings, $xmlString;\n\n}\n\nmy $matched;\nmy @ary;\nmy %params;\n\nforeach my $path ( @{ $configurationsHash{$configSubModule} } ) {\n    $matched = 1;\n\n    print \"\\nHierarchy : $path\\n\";\n\n    @ary = split '\\|', $path;\n    foreach my $i ( 1 .. $#ary ) {\n        my @splits = split ' ', $ary[$i], 2;\n        if ( ( scalar @splits ) == 2 ) {\n            my $tmp      = $ary[$i];\n            my $withAttr = $splits[0] . '[@id=\\'' . $splits[1] . '\\']';\n            $path =~ s/$tmp/$withAttr/;\n        }\n    }\n\n    $path =~ s/\\|/\\//g;\n    if ( grep { $_ eq $configSubModule } @addrootElementAppendRequired ) {\n        my $subModuleTemp = $configSubModule;\n        $subModuleTemp =~ s/ /_/g;\n        $path = '/' . $subModuleTemp . $path;\n    }\n\n    my $XMLIndex = 0;\n    my @test;\n    my @prod;\n    my $nodeset;\n    my @nodeList;\n    my $nodeString;\n    my $node;\n    my @childNodes;\n    my $stringToPush;\n    my $xp;\n    my $checkInProduction = 1;\n\n    foreach my $xml (@XMLStrings) {\n\n        $XMLIndex++;\n        $xp = XML::XPath-&gt;new($xml);\n        if ( $xp-&gt;find($path) ) {\n\n            @nodeList = $xp-&gt;findnodes($path);\n\n            my @chn;\n            for my $node (@nodeList) {\n                @chn = $node-&gt;getChildNodes;\n                my $childCount = 0;\n                foreach my $n (@chn) {\n                    $childCount++ if $n-&gt;getNodeType == 1;\n                }\n\n                if ( $childCount == 0 ) {\n                    $stringToPush = $node-&gt;string_value;\n                    push @test, $stringToPush\n                      if $XMLIndex == 1;\n                    push @prod, $stringToPush\n                      if $XMLIndex == 2;\n                }\n                elsif ( $childCount &gt;= 1 ) {\n                    foreach my $n (@chn) {\n                        if ( $n-&gt;getNodeType == 1 ) {\n                            $stringToPush = $n-&gt;getName;\n                            $stringToPush =\n                              $stringToPush . ' ' . $n-&gt;getAttribute('id')\n                              if defined $n-&gt;getAttribute('id');\n                            $stringToPush =\n                              $stringToPush . ' ' . $n-&gt;string_value\n                              if $n-&gt;getName eq 'no';\n                            push @test, $stringToPush if $XMLIndex == 1;\n                            push @prod, $stringToPush if $XMLIndex == 2;\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            $matched = 0;\n            print 'Does not exist ';\n            print \"Test\\n\" if $XMLIndex == 1;\n            $checkInProduction = 0 if $XMLIndex == 2;\n            print \"Production\\n\" if $XMLIndex == 2;\n        }\n    }\n\n    %params = map { $_ =&gt; 1 } @prod;\n    foreach my $var (@test) {\n        last if !$checkInProduction;\n        if ( !exists( $params{$var} ) ) {\n            $matched = 0;\n            print $var . \" =&gt; Not in Production\\n\" if $var ne '';\n        }\n    }\n\n    %params = map { $_ =&gt; 1 } @test;\n    foreach my $var (@prod) {\n        if ( !exists( $params{$var} ) ) {\n            $matched = 0;\n            print $var . \" =&gt; Not in Test\\n\" if $var ne '';\n        }\n    }\n    print \"Matched\\n\" if $matched;\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 4319705, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/02641c38b0ade4dc43beecea4aaf1888?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh", "link": "https://stackoverflow.com/users/4319705/venkatesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1442579079, "creation_date": 1441971520, "last_edit_date": 1442163260, "question_id": 32522598, "link": "https://stackoverflow.com/questions/32522598/formatted-text-to-xml-or-json-using-perl", "title": "formatted text to XML (or) JSON using perl", "body": "<p>I need to parse formatted text to XML using Perl.\nIt is .cfg file which contains formatted text.</p>\n\n<p>Some part of file ::</p>\n\n<pre><code>system\n    name \"NILpv-BNG34\"\n    contact \"Wayne Ritchie/NGN OPERATIONS 0800 4 NGNOP (0800 464 667)\"\n    location \"NIL, Level 1, Tory Street, Wellington.\"\n    clli-code \"BNG_v15    \"\n    chassis-mode c\n    dns\n    exit\n    persistence\n        subscriber-mgmt\n            location cf2:\n        exit\n    exit\n    snmp\n        streaming\n            no shutdown\n        exit\n        packet-size 9216\n    exit\n    time\n        ntp\n            server 10.78.247.155 prefer\n            no shutdown\n        exit\n        sntp\n            shutdown\n        exit\n        dst-zone NZDT\n            start last sunday september 02:00\n            end first sunday april 03:00\n        exit\n        zone NZST \n    exit\n    thresholds\n        rmon\n        exit\n    exit\nexit\n</code></pre>\n\n<p>All the text in file is formatted with 4 spaces and <code>exit</code>.</p>\n\n<p>I thought of changing above text to </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;system&gt;\n    &lt;name&gt;\"WR-BNG01\"&lt;/name&gt;\n    &lt;contact&gt;\"NGN OPERATIONS 0800 4 NGNOP (0800 464667)\"&lt;/contact&gt;\n    &lt;location&gt;\"Whangarei Telephone exchange\"&lt;/location&gt;\n    &lt;clli-code&gt;\"BNG_v4 \"&lt;/clli-code&gt;\n    &lt;chassis-mode&gt;c&lt;/chassis-mode&gt;\n    &lt;dns /&gt;\n    &lt;persistence&gt;\n        &lt;subscriber-mgmt&gt;\n            &lt;location&gt;cf2:&lt;/location&gt;\n        &lt;/subscriber-mgmt&gt;\n    &lt;/persistence&gt;\n    &lt;snmp&gt;\n        &lt;packet-size&gt;9216&lt;/packet-size&gt;\n    &lt;/snmp&gt;\n    &lt;time&gt;\n        &lt;ntp&gt;\n            &lt;server&gt;10.72.14.17&lt;/server&gt;\n            &lt;server&gt;10.74.14.26 prefer&lt;/server&gt;\n            &lt;no&gt;shutdown&lt;/no&gt;\n        &lt;/ntp&gt;\n        &lt;sntp&gt;\n            &lt;shutdown /&gt;\n        &lt;/sntp&gt;\n        &lt;dst-zone_NZDT&gt;\n            &lt;start&gt;last sunday september 02:00&lt;/start&gt;\n            &lt;end&gt;first sunday april 03:00&lt;/end&gt;\n        &lt;/dst-zone_NZDT&gt;\n        &lt;zone&gt;NZST&lt;/zone&gt;\n    &lt;/time&gt;\n    &lt;thresholds&gt;\n        &lt;rmon /&gt;\n    &lt;/thresholds&gt;\n&lt;/system&gt;\n</code></pre>\n\n<p>I wrote a Perl script for this but it does not work in some cases.</p>\n\n<pre><code>cpu-protection\n            policy 1 create\n            exit\n            policy 254 create\n            exit\n            policy 255 create\n            exit\n        exit\n</code></pre>\n\n<p>Here, XML becomes </p>\n\n<pre><code>&lt;cpu-protection&gt;\n        &lt;policy&gt;1 create&lt;/policy&gt;\n        &lt;policy&gt;254 create&lt;/policy&gt;\n        &lt;policy&gt;255 create&lt;/policy&gt;\n&lt;/cpu-protection&gt;\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>&lt;cpu-protection&gt;\n        &lt;policy_1_create&gt;&lt;/policy_1_create&gt;\n        &lt;policy_254_create&gt;&lt;/policy_254_create&gt;\n        &lt;policy_255_create&gt;&lt;/policy_255_create&gt;\n&lt;/cpu-protection&gt;\n</code></pre>\n\n<p>My script (Part for changing data to XML) ::</p>\n\n<pre><code>    foreach my $i ( 1 .. $index ) {\n    @grabbed = @grabbed_1 if $i == 1;\n    @grabbed = @grabbed_2 if $i == 2;\n\n    my $currentLine;\n\n    my $previousLineSpaceLength = 0;\n    my $currentLineSpaceLength  = 0;\n    my $nextLineSpaceLength     = 0;\n\n    my @exitTags;\n    my $exitTag = '';\n\n    my @tag;\n    my $lineSplits;\n\n    my $xmlString = '&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;';\n    foreach my $i ( 0 .. $#grabbed ) {\n\n        $currentLine = $grabbed[$i];\n        $currentLine =~ /^\\s*/;\n        $currentLineSpaceLength = $+[0];\n\n        chomp($currentLine);\n        $currentLine =~ s/^\\s+//;\n        $currentLine =~ s/\\s+$//;\n\n        #$currentLine =~ s/\"//g;\n\n        @tag = split ' ', $currentLine, 2;\n        $lineSplits = scalar @tag;\n\n        if ( $previousLineSpaceLength == 0 ) {\n\n            $previousLineSpaceLength = $currentLineSpaceLength;\n\n            if ( $lineSplits == 1 ) {\n                $xmlString = $xmlString . '&lt;' . $currentLine . '&gt;';\n                $exitTag   = '&lt;/' . $currentLine . '&gt;';\n            }\n            elsif ( $lineSplits == 2 ) {\n\n                $nextLine = $grabbed[ $i + 1 ];\n                $nextLine =~ /^\\s*/;\n                $nextLineSpaceLength = $+[0];\n\n                if ( $nextLineSpaceLength &gt; $currentLineSpaceLength ) {\n                    $xmlString =\n                      $xmlString . '&lt;' . $tag[0] . '_' . $tag[1] . '&gt;';\n                    $exitTag = '&lt;/' . $tag[0] . '_' . $tag[1] . '&gt;';\n\n                }\n                else {\n                    $xmlString = $xmlString . '&lt;' . $tag[0] . '&gt;' . $tag[1];\n                    $exitTag   = '&lt;/' . $tag[0] . '&gt;';\n                }\n\n            }\n\n          #$xmlString               = $xmlString . '&lt;' . $currentLine . '&gt;';\n          #$exitTag                 = '&lt;/' . $currentLine . '&gt;';\n\n        }\n        elsif ($currentLineSpaceLength &gt; $previousLineSpaceLength\n            &amp;&amp; $exitTag ne '' )\n        {\n            $previousLineSpaceLength = $currentLineSpaceLength;\n            push @exitTags, $exitTag;\n\n            if ( $lineSplits == 1 ) {\n                $xmlString = $xmlString . '&lt;' . $currentLine . '&gt;';\n                $exitTag   = '&lt;/' . $currentLine . '&gt;';\n            }\n            elsif ( $lineSplits == 2 ) {\n\n                $nextLine = $grabbed[ $i + 1 ];\n                $nextLine =~ /^\\s*/;\n                $nextLineSpaceLength = $+[0];\n\n                if ( $nextLineSpaceLength &gt; $currentLineSpaceLength ) {\n                    $xmlString =\n                      $xmlString . '&lt;' . $tag[0] . '_' . $tag[1] . '&gt;';\n                    $exitTag = '&lt;/' . $tag[0] . '_' . $tag[1] . '&gt;';\n\n                }\n                else {\n                    $xmlString = $xmlString . '&lt;' . $tag[0] . '&gt;' . $tag[1];\n                    $exitTag   = '&lt;/' . $tag[0] . '&gt;';\n                }\n\n            }\n\n            #$xmlString = $xmlString . '&lt;' . $currentLine . '&gt;';\n            #$exitTag   = '&lt;/' . $currentLine . '&gt;';\n        }\n        elsif ($currentLineSpaceLength == $previousLineSpaceLength\n            &amp;&amp; $currentLine ne 'exit' )\n        {\n            $previousLineSpaceLength = $currentLineSpaceLength;\n            if ( $exitTag ne 'exit' ) {\n                $xmlString = $xmlString . $exitTag;\n\n            }\n\n            if ( $lineSplits == 1 ) {\n                $xmlString = $xmlString . '&lt;' . $currentLine . '&gt;';\n                $exitTag   = '&lt;/' . $currentLine . '&gt;';\n            }\n            elsif ( $lineSplits == 2 ) {\n\n                $nextLine = $grabbed[ $i + 1 ];\n                $nextLine =~ /^\\s*/;\n                $nextLineSpaceLength = $+[0];\n\n                if ( $nextLineSpaceLength &gt; $currentLineSpaceLength ) {\n                    $xmlString =\n                      $xmlString . '&lt;' . $tag[0] . '_' . $tag[1] . '&gt;';\n                    $exitTag = '&lt;/' . $tag[0] . '_' . $tag[1] . '&gt;';\n\n                }\n                else {\n                    $xmlString = $xmlString . '&lt;' . $tag[0] . '&gt;' . $tag[1];\n                    $exitTag   = '&lt;/' . $tag[0] . '&gt;';\n                }\n\n            }\n\n            #$xmlString = $xmlString . '&lt;' . $currentLine . '&gt;';\n            #$exitTag   = '&lt;/' . $currentLine . '&gt;';\n\n        }\n        elsif ($currentLineSpaceLength == $previousLineSpaceLength\n            &amp;&amp; $currentLine eq 'exit' )\n        {\n            $previousLineSpaceLength = $currentLineSpaceLength;\n            $xmlString               = $xmlString . $exitTag;\n            $exitTag                 = $currentLine;\n\n        }\n        elsif ($currentLineSpaceLength &lt; $previousLineSpaceLength\n            &amp;&amp; $currentLine eq 'exit' )\n        {\n            $previousLineSpaceLength = $currentLineSpaceLength;\n            if ( $exitTag ne 'exit' ) {\n                $xmlString = $xmlString . $exitTag;\n\n            }\n            $xmlString = $xmlString . pop @exitTags;\n            $exitTag   = $currentLine;\n        }\n\n    }\n\n    push @XMLStrings, $xmlString;\n\n }\n</code></pre>\n\n<p>Please help with corrections required.</p>\n\n<p>Full Code :: </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse Data::Dumper;\nuse XML::XPath;\nuse XML::DOM;\n\nmy $file1 = \"1.cfg\";\nmy $file2 = \"2.cfg\";\n\nmy @configFiles = ( $file1, $file2 );\n\nmy $templateFile = \"template.cfg\";\nmy @configModules;\nmy %configurationsHash;\nmy $configName;\n\nopen( TEMPLATE, \"&lt;\" . $templateFile ) or die \"cannot open file\";\nwhile (&lt;TEMPLATE&gt;) {\n    chomp($_);\n    push @configModules, $_ if /^[[:alpha:]]/;\n$configName = $_ if /^[[:alpha:]]/;\npush @{ $configurationsHash{$configName} }, $_ if /^\\//;\n}\nclose(TEMPLATE);\n\nforeach $configSubModule (@configModules) {\nchomp($configSubModule);\n\nmy $index = 0;\nmy @grabbed_1;\nmy @grabbed_2;\n\nforeach my $file (@configFiles) {\n    my $last = 0, $end = 0;\n    $index++;\n\n    open( CONFIGFILE, \"&lt;\" . $file );\n    while (&lt;CONFIGFILE&gt;) {\n        if (/$configSubModule/) {\n            while (&lt;CONFIGFILE&gt;) {\n                if (/#---/) {\n                    $end = 1, last if $last;\n                    $last = 1;\n                }\n                else {\n                    push @grabbed_1, $_ if $index == 1;\n                    push @grabbed_2, $_ if $index == 2;\n                }\n            }\n        }\n        last if $end;\n    }\n}\n\n    my @grabbed;\n    my @XMLStrings;\n\n    foreach my $i ( 1 .. $index ) {\n    @grabbed = @grabbed_1 if $i == 1;\n    @grabbed = @grabbed_2 if $i == 2;\n\n    my $currentLine;\n\n    my $previousLineSpaceLength = 0;\n    my $currentLineSpaceLength  = 0;\n    my $nextLineSpaceLength     = 0;\n\n    my @exitTags;\n    my $exitTag = '';\n\n    my @tag;\n    my $lineSplits;\n\n    my $xmlString = '&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;';\n    foreach my $i ( 0 .. $#grabbed ) {\n\n        $currentLine = $grabbed[$i];\n        $currentLine =~ /^\\s*/;\n        $currentLineSpaceLength = $+[0];\n\n        chomp($currentLine);\n        $currentLine =~ s/^\\s+//;\n        $currentLine =~ s/\\s+$//;\n\n        #$currentLine =~ s/\"//g;\n\n        @tag = split ' ', $currentLine, 2;\n        $lineSplits = scalar @tag;\n\n        if ( $previousLineSpaceLength == 0 ) {\n\n            $previousLineSpaceLength = $currentLineSpaceLength;\n\n            if ( $lineSplits == 1 ) {\n                $xmlString = $xmlString . '&lt;' . $currentLine . '&gt;';\n                $exitTag   = '&lt;/' . $currentLine . '&gt;';\n            }\n            elsif ( $lineSplits == 2 ) {\n\n                $nextLine = $grabbed[ $i + 1 ];\n                $nextLine =~ /^\\s*/;\n                $nextLineSpaceLength = $+[0];\n\n                if ( $nextLineSpaceLength &gt; $currentLineSpaceLength ) {\n                    $xmlString =\n                      $xmlString . '&lt;' . $tag[0] . '_' . $tag[1] . '&gt;';\n                    $exitTag = '&lt;/' . $tag[0] . '_' . $tag[1] . '&gt;';\n\n                }\n                else {\n                    $xmlString = $xmlString . '&lt;' . $tag[0] . '&gt;' . $tag[1];\n                    $exitTag   = '&lt;/' . $tag[0] . '&gt;';\n                }\n\n            }\n\n          #$xmlString               = $xmlString . '&lt;' . $currentLine . '&gt;';\n          #$exitTag                 = '&lt;/' . $currentLine . '&gt;';\n\n        }\n        elsif ($currentLineSpaceLength &gt; $previousLineSpaceLength\n            &amp;&amp; $exitTag ne '' )\n        {\n            $previousLineSpaceLength = $currentLineSpaceLength;\n            push @exitTags, $exitTag;\n\n            if ( $lineSplits == 1 ) {\n                $xmlString = $xmlString . '&lt;' . $currentLine . '&gt;';\n                $exitTag   = '&lt;/' . $currentLine . '&gt;';\n            }\n            elsif ( $lineSplits == 2 ) {\n\n                $nextLine = $grabbed[ $i + 1 ];\n                $nextLine =~ /^\\s*/;\n                $nextLineSpaceLength = $+[0];\n\n                if ( $nextLineSpaceLength &gt; $currentLineSpaceLength ) {\n                    $xmlString =\n                      $xmlString . '&lt;' . $tag[0] . '_' . $tag[1] . '&gt;';\n                    $exitTag = '&lt;/' . $tag[0] . '_' . $tag[1] . '&gt;';\n\n                }\n                else {\n                    $xmlString = $xmlString . '&lt;' . $tag[0] . '&gt;' . $tag[1];\n                    $exitTag   = '&lt;/' . $tag[0] . '&gt;';\n                }\n\n            }\n\n            #$xmlString = $xmlString . '&lt;' . $currentLine . '&gt;';\n            #$exitTag   = '&lt;/' . $currentLine . '&gt;';\n        }\n        elsif ($currentLineSpaceLength == $previousLineSpaceLength\n            &amp;&amp; $currentLine ne 'exit' )\n        {\n            $previousLineSpaceLength = $currentLineSpaceLength;\n            if ( $exitTag ne 'exit' ) {\n                $xmlString = $xmlString . $exitTag;\n\n            }\n\n            if ( $lineSplits == 1 ) {\n                $xmlString = $xmlString . '&lt;' . $currentLine . '&gt;';\n                $exitTag   = '&lt;/' . $currentLine . '&gt;';\n            }\n            elsif ( $lineSplits == 2 ) {\n\n                $nextLine = $grabbed[ $i + 1 ];\n                $nextLine =~ /^\\s*/;\n                $nextLineSpaceLength = $+[0];\n\n                if ( $nextLineSpaceLength &gt; $currentLineSpaceLength ) {\n                    $xmlString =\n                      $xmlString . '&lt;' . $tag[0] . '_' . $tag[1] . '&gt;';\n                    $exitTag = '&lt;/' . $tag[0] . '_' . $tag[1] . '&gt;';\n\n                }\n                else {\n                    $xmlString = $xmlString . '&lt;' . $tag[0] . '&gt;' . $tag[1];\n                    $exitTag   = '&lt;/' . $tag[0] . '&gt;';\n                }\n\n            }\n\n            #$xmlString = $xmlString . '&lt;' . $currentLine . '&gt;';\n            #$exitTag   = '&lt;/' . $currentLine . '&gt;';\n\n        }\n        elsif ($currentLineSpaceLength == $previousLineSpaceLength\n            &amp;&amp; $currentLine eq 'exit' )\n        {\n            $previousLineSpaceLength = $currentLineSpaceLength;\n            $xmlString               = $xmlString . $exitTag;\n            $exitTag                 = $currentLine;\n\n        }\n        elsif ($currentLineSpaceLength &lt; $previousLineSpaceLength\n            &amp;&amp; $currentLine eq 'exit' )\n        {\n            $previousLineSpaceLength = $currentLineSpaceLength;\n            if ( $exitTag ne 'exit' ) {\n                $xmlString = $xmlString . $exitTag;\n\n            }\n            $xmlString = $xmlString . pop @exitTags;\n            $exitTag   = $currentLine;\n        }\n\n    }\n\n    push @XMLStrings, $xmlString;\n\n}\n\nprint \"\\n\", 'Configuration :: ', $configSubModule, \"\\n\";\n\nforeach my $path ( @{ $configurationsHash{$configSubModule} } ) {\n\n    $path =~ s/\\s+/_/g;\n\n    print $path;\n    my $XMLIndex = 0;\n\n    my @XMLOne;\n    my @XMLTwo;\n\n    foreach my $xml (@XMLStrings) {\n\n        $XMLIndex++;\n        $xp = XML::XPath-&gt;new($xml);\n\n        if ( $xp-&gt;find($path) ) {\n            my $nodeset  = $xp-&gt;find($path);\n            my @nodeList = $nodeset-&gt;get_nodelist;\n\n            foreach my $node (@nodeList) {\n                my @childNodes = $node-&gt;getChildNodes;\n                foreach my $childNode (@childNodes) {\n                    print \"\\n\", $childNode-&gt;getName;\n                }\n            }\n        }\n        else {\n            print $path, ' =&gt;  Not Available in file : ' . $XMLIndex, \"\\n\";\n        }\n        print \"\\n\";\n    }\n\n}\n\n}\n</code></pre>\n\n<p>Need to compare two .cfg files and show differences.</p>\n\n<p>required pattern is taken from another file.</p>\n\n<pre><code>System Configuration\n#/system\n#/system/persistence\n/system/snmp/streaming\n/system/time\n#/system/time/ntp\n#/system/time/sntp\n/system/time/dst-zone NZDT\n#/system/thresholds\n\nSystem Security Configuration\n#/system\n#/system/security\n#/system/security/management-access-filter\n#/system/security/management-access-filter/ip-filter\n</code></pre>\n"}, {"tags": ["arrays", "perl", "multidimensional-array"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1441962791, "post_id": 32519632, "comment_id": 52897248, "body": "Could you add the expected output for the given input sample? The description of the logic is fuzzy."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1441963321, "post_id": 32519632, "comment_id": 52897562, "body": "Don&#39;t use bareword filehandles, don&#39;t use 2-arg open, don&#39;t ignore <code>open</code> errors."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1441963359, "post_id": 32519632, "comment_id": 52897585, "body": "Always <code>use strict; use warnings;</code>. I&#39;m pretty sure that would have found <code>my $i&gt;=0;</code>, for example."}, {"owner": {"reputation": 39, "user_id": 2328524, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wmq7Q.jpg?s=128&g=1", "display_name": "Kanhu", "link": "https://stackoverflow.com/users/2328524/kanhu"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1441963585, "post_id": 32519632, "comment_id": 52897728, "body": "@melpomene, yes I got a warning at $i&gt;=0, but don&#39;t know why it is giving that. its numerical equating isn&#39;t it?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1441963674, "post_id": 32519632, "comment_id": 52897777, "body": "@Kanhu <code>my $i &gt;= 0</code> defines a new variable <code>$i</code> containing <code>undef</code>. Then it compares <code>undef</code> to <code>0</code> (numerically). Then it throws the result of the comparison away. It&#39;s otherwise equivalent to <code>my $i</code> (also, why would you want to compare a variable you only just created?). What you probably meant to write is <code>my $i = 0;</code>."}, {"owner": {"reputation": 39, "user_id": 2328524, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wmq7Q.jpg?s=128&g=1", "display_name": "Kanhu", "link": "https://stackoverflow.com/users/2328524/kanhu"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1441963874, "post_id": 32519632, "comment_id": 52897905, "body": "@melpomene, but perl allows inline declaration of variable, isn&#39;t it?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1441963905, "post_id": 32519632, "comment_id": 52897924, "body": "@Kanhu What does that have to do with anything?"}, {"owner": {"reputation": 39, "user_id": 2328524, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wmq7Q.jpg?s=128&g=1", "display_name": "Kanhu", "link": "https://stackoverflow.com/users/2328524/kanhu"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1441964274, "post_id": 32519632, "comment_id": 52898168, "body": "@melpomene, thank you :-)"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1441965590, "creation_date": 1441965590, "answer_id": 32520742, "question_id": 32519632, "link": "https://stackoverflow.com/questions/32519632/perl-grouping-array-of-array-element-based-on-one-column-and-condition/32520742#32520742", "title": "Perl, grouping Array of Array element based on one column and condition", "body": "<p>This seems to produce the expected output. I'm not sure I understood the specification correctly, so there might be errors and edge cases.</p>\n\n<p>How it works: it remembers what kind of section it's currently outputting ($section, <code>Singlet</code> or <code>Cluster</code>). It accumulates lines in the @cluster array if they belong together, when an incompatible line arrives, the cluster is printed and a new one is started. If the cluster to print has only one member, it's treated as a singlet.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $section = q();\nmy @cluster;\nmy $cluster_count = 1;\n\nsub output {\n    if (@cluster &gt; 1) {\n        print \"Cluster$cluster_count\\n\";\n        $cluster_count++;\n\n    } elsif (1 == @cluster) {\n        print $section = 'Singlet', \"s\\n\" unless 'Singlet' eq $section;\n    }\n\n    print for @cluster;\n    @cluster = ();\n}\n\nmy $last = 'INF';\nwhile (&lt;&gt;) {\n    my ($id, $from, $to, $value) = split;\n    if ($value &gt; 1000 || 1000 &lt; abs($last - $from)) {\n        output();\n\n    } else {\n        $section = 'Cluster';\n    }\n\n    push @cluster, $_;\n    $last = $to;\n}\noutput();\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 2328524, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wmq7Q.jpg?s=128&g=1", "display_name": "Kanhu", "link": "https://stackoverflow.com/users/2328524/kanhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 32520742, "answer_count": 1, "score": 0, "last_activity_date": 1441965590, "creation_date": 1441962280, "last_edit_date": 1441963454, "question_id": 32519632, "link": "https://stackoverflow.com/questions/32519632/perl-grouping-array-of-array-element-based-on-one-column-and-condition", "title": "Perl, grouping Array of Array element based on one column and condition", "body": "<p>I have an AoA construct with four columns and many rows. Following is an example of data (input).</p>\n\n<pre><code>DQ556929    103480190   103480214   154943\nDQ540839    103325247   103325275   2484\nDQ566549    103322763   103322792   99\nDQ699634    103322664   103322694   0\nDQ544472    103322664   103322692   373\nDQ709105    103322291   103322318   46\nDQ705937    103322245   103322273   486\nDQ699398    103321759   103321788   1211\nDQ710151    103320548   103320577   692251\nDQ548430    102628297   102628326   1\nDQ558403    102628296   102628321   855795\nDQ692476    101772501   101772529   481463\nDQ544274    101291038   101291068   484047\nDQ723982    100806991   100807020   1\nDQ709023    100806990   100807020   3\nDQ712307    100806987   100807014   0\nDQ709654    100806987   100807012   571051\nDQ707370    100235936   100235962   1481849\n</code></pre>\n\n<p>I want to group and write into a file all the row elements (sequentially).\nConditions are if column four values less than 1000 and minimum two values are next to each other, group them else if the value less than 1000 and lies between the values more than 1000 treat them as single and append separately in the same file and the values which are more than 1000 also write as a block but with out affecting the order of the 2nd and third column.</p>\n\n<p>This file is output of my previous program, now for this I have tried implementing my hands but getting some weird results. Here is my chunk of code, but non functional. Guys I need just help if i am executing my logic well here, I am open for any comments as a beginner. And also correct me anywhere.</p>\n\n<pre><code>my @dataf= sort{ $a-&gt;[1]&lt;=&gt; $b-&gt;[1]} @data;\n@dataf=reverse @dataf;\nfor(my $i&gt;=0;$i&lt;=$#Start;$i++)\n{\n    print \"$sortStart[$i]\\n\";\n    my $diff = $sortStart[$i] - $sortStart[$i+1];\n    $dataf[$i][3]= $diff;\n#   $IDdiff{$ID[$i]}=$diff;\n}\n\n#print Dumper(@dataf);\n\nopen (CLUST, \"&gt;&gt; ./clustTest.txt\" );\nfor (my $k=0;$k&lt;=$#Start;$k++)\n{   \n\n    for (my $l=0;$l&lt;=3;$l++)\n    {\n#       my $tempdataf = shift $dataf[$k][$l];\n#       print $tempdataf;       \n\n        if ($dataf[$k][3]&lt;=1000)\n        {\n            $flag = 1;\n            do\n            {\n                print CLUST\"----- Cluster $clustNo -----\\n\";\n                print CLUST\"$dataf[$k][$l]\\t\";\n                if ($dataf[$k][3]&lt;=1000)\n                {\n                    $flag1 = 1;\n                }else {$flag1=0;}\n\n            $clustNo++;\n            }until($flag1==0 &amp;&amp; $data[$k][3] &gt; 1000);\n\n            if($flag1==0 &amp;&amp; $data[$k][3] &gt; 1000)\n            {\n                print CLUST\"Singlet \\n\";\n                print CLUST\"$dataf[$k][$l]\\t\";\n                next;\n            }\n        #print CLUST\"$dataf[$k][$l]\\t\";     #@IDdiff\n\n        }\n\n    print CLUST\"\\n\";\n    }\n}\n</code></pre>\n\n<p>Expected output in file:</p>\n\n<blockquote>\n  <p>Singlets\n  <code>DQ556929   103480190   103480214   154943\n  DQ540839    103325247   103325275   2484</code></p>\n  \n  <p>Cluster1\n  <code>DQ566549   103322763   103322792   99\n  DQ699634    103322664   103322694   0\n  DQ544472    103322664   103322692   373\n  DQ709105    103322291   103322318   46\n  DQ705937    103322245   103322273   486</code></p>\n  \n  <p>Singlets\n  <code>DQ699398   103321759   103321788   1211\n  DQ710151    103320548   103320577   692251\n  DQ548430    102628297   102628326   1\n  DQ558403    102628296   102628321   855795\n  DQ692476    101772501   101772529   481463\n  DQ544274    101291038   101291068   484047</code></p>\n  \n  <p>Cluster2\n  <code>DQ723982   100806991   100807020   1\n  DQ709023    100806990   100807020   3\n  DQ712307    100806987   100807014   0</code></p>\n  \n  <p>Singlets\n  <code>DQ709654   100806987   100807012   571051\n  DQ707370    100235936   100235962   1481849\n  </code></p>\n</blockquote>\n"}, {"tags": ["bash", "perl", "timestamp"], "comments": [{"owner": {"reputation": 980, "user_id": 1716704, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/S8zFC.png?s=128&g=1", "display_name": "Kalin Borisov", "link": "https://stackoverflow.com/users/1716704/kalin-borisov"}, "reply_to_user": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1441957588, "post_id": 32518112, "comment_id": 52894339, "body": "For now only thing in my mind it was only: if [[ &quot;$date_string&quot; &gt;= &quot;$system_date&quot; ]] ; Not sure if there is a option in the if operator to add days ..."}], "answers": [{"tags": [], "owner": {"reputation": 1971, "user_id": 1837048, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/QHuOL.jpg?s=128&g=1", "display_name": "Manuel Barbe", "link": "https://stackoverflow.com/users/1837048/manuel-barbe"}, "is_accepted": false, "score": 1, "last_activity_date": 1441958206, "creation_date": 1441958206, "answer_id": 32518405, "question_id": 32518112, "link": "https://stackoverflow.com/questions/32518112/compare-timestamp-from-string-with-the-current-system-day-and-turn-bad-status-if/32518405#32518405", "title": "Compare timestamp from string with the current system day and turn bad status if it&#39;s less than 5 days", "body": "<p>Try using convertion of the date string to unix time, e.g.</p>\n\n<pre><code>cur_date=$(date +\"%s\");\ncat data_file | while read line;\ndo\n   lineDate=$(date -d \"$line\" +\"%s\");\n   diff=$(expr $cur_date - $lineDate);\n   if [ \"$diff\" -gt 432000 ];\n       then echo $line \" bad\";\n   else\n       echo $line \" good\";\n   fi;\ndone\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2317, "user_id": 711515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5b6edf26acc698b27a585417bb9bb6?s=128&d=identicon&r=PG", "display_name": "chansen", "link": "https://stackoverflow.com/users/711515/chansen"}, "edited": false, "score": 0, "creation_date": 1442000544, "post_id": 32518534, "comment_id": 52920118, "body": "<a href=\"https://metacpan.org/pod/DateTime#dt-subtract_datetime-datetime\" rel=\"nofollow noreferrer\"><code>subtract_datetime</code></a> returns an instance of <a href=\"https://metacpan.org/pod/DateTime::Duration\" rel=\"nofollow noreferrer\">DateTime::Duration</a>, not a HASH reference."}, {"owner": {"reputation": 2317, "user_id": 711515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5b6edf26acc698b27a585417bb9bb6?s=128&d=identicon&r=PG", "display_name": "chansen", "link": "https://stackoverflow.com/users/711515/chansen"}, "edited": false, "score": 0, "creation_date": 1442001430, "post_id": 32518534, "comment_id": 52920536, "body": "<code>DateTime-&gt;today</code> returns a truncated DateTime in UTC zone. <code>DateTime::Format::Strptime-&gt;new</code> without a zone parameter returns a DateTime in the &quot;floating&quot; time zone."}], "tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1441959768, "last_edit_date": 1441959768, "creation_date": 1441958650, "answer_id": 32518534, "question_id": 32518112, "link": "https://stackoverflow.com/questions/32518112/compare-timestamp-from-string-with-the-current-system-day-and-turn-bad-status-if/32518534#32518534", "title": "Compare timestamp from string with the current system day and turn bad status if it&#39;s less than 5 days", "body": "<p>In Perl, you can use <a href=\"http://search.cpan.org/~drolsky/DateTime-1.20/lib/DateTime.pm\" rel=\"nofollow\"><code>DateTime</code></a> module to perform operations on Dates.You can easily subtract dates If you get two dates into <code>DateTime</code> object.</p>\n\n<p>To convert earlier dates into <code>DateTime</code>, parse those dates using <a href=\"http://search.cpan.org/~drolsky/DateTime-Format-Strptime-1.56/lib/DateTime/Format/Strptime.pm\" rel=\"nofollow\"><code>DateTime::Format::Strptime</code></a> and then, subtract it from today's date.</p>\n\n<p>So, overall this  script will do your job:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse DateTime;\nuse DateTime::Format::Strptime;\n\nmy @dates = ( \"20150911\", \"20150705\", \"20150710\" );\nmy $strp = DateTime::Format::Strptime-&gt;new( pattern =&gt; '%Y%m%d' ); # parse\nmy $today = DateTime-&gt;today; # get today's date\n\nforeach (@dates) {\n    my $mydate = $strp-&gt;parse_datetime($_);\n    my $sub    = $today-&gt;subtract_datetime($mydate)-&gt;{'days'};\n    if ( $sub &gt; 5 ) {\n        print \"$_ bad\\n\";\n    }\n    else {\n        print \"$_ good\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1441958866, "creation_date": 1441958866, "answer_id": 32518602, "question_id": 32518112, "link": "https://stackoverflow.com/questions/32518112/compare-timestamp-from-string-with-the-current-system-day-and-turn-bad-status-if/32518602#32518602", "title": "Compare timestamp from string with the current system day and turn bad status if it&#39;s less than 5 days", "body": "<p>You can use string comparison for YYYYMMDD strings. <code>date</code> handles human readable dates with <code>-d</code>:</p>\n\n<pre><code>#!/bin/bash\nold=20150905\nnew=201510017\ngood=20150911\n\nbefore=$(date -d 'today - 5 days' +%Y%m%d)\nafter=$(date -d 'today + 5 days' +%Y%m%d)\necho $before - $after\n\nfor date in $old $new $good ; do\n    if [[ $before &lt; $date &amp;&amp; $date &lt; $after ]] ; then\n        echo $date in the interval\n    else\n        echo $date outside of the interval\n    fi\ndone\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2317, "user_id": 711515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5b6edf26acc698b27a585417bb9bb6?s=128&d=identicon&r=PG", "display_name": "chansen", "link": "https://stackoverflow.com/users/711515/chansen"}, "edited": false, "score": 1, "creation_date": 1442003080, "post_id": 32519058, "comment_id": 52921234, "body": "<code>Time::Piece-&gt;strptime</code> parses the string as being in the UTC/GMT zone unless the format string contains the <code>%Z</code> or <code>%z</code> conversion specifier. You could get around this by either changing <code>$now = localtime;</code> to <code>$now = gmtime;</code> or changing <code>Time::Piece-&gt;strptime()</code> to <code>localtime-&gt;strptime()</code>."}, {"owner": {"reputation": 2317, "user_id": 711515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5b6edf26acc698b27a585417bb9bb6?s=128&d=identicon&r=PG", "display_name": "chansen", "link": "https://stackoverflow.com/users/711515/chansen"}, "edited": false, "score": 0, "creation_date": 1442005101, "post_id": 32519058, "comment_id": 52922153, "body": "Actually, after a quick review, <code>Time::Piece-&gt;strptime</code> always parses the format string as being in the UTC/GMT zone regardless if the format string contains the <code>%Z</code> or <code>%z</code> conversion specifier."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1441960505, "creation_date": 1441960505, "answer_id": 32519058, "question_id": 32518112, "link": "https://stackoverflow.com/questions/32518112/compare-timestamp-from-string-with-the-current-system-day-and-turn-bad-status-if/32519058#32519058", "title": "Compare timestamp from string with the current system day and turn bad status if it&#39;s less than 5 days", "body": "<p><a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow\">Time::Piece</a> has been included in the standard Perl distribution since 5.10.0 in 2007.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse Time::Piece;\nuse Time::Seconds;\n\nmy $now = localtime;\n\nwhile (&lt;DATA&gt;) {\n  chomp;\n  my $then = Time::Piece-&gt;strptime($_, '%Y%m%d');\n\n  my $status = 'bad';\n  if ($now - $then &lt; 5 * ONE_DAY) {\n    $status = 'good';\n  }\n\n  say \"$_ $status\";\n}\n\n__DATA__\n20150705\n20150911\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1441967583, "post_id": 32520641, "comment_id": 52900263, "body": "You could get round any DST-shift problems by changing the time you use from midnight to midday."}, {"owner": {"reputation": 2317, "user_id": 711515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5b6edf26acc698b27a585417bb9bb6?s=128&d=identicon&r=PG", "display_name": "chansen", "link": "https://stackoverflow.com/users/711515/chansen"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1442008811, "post_id": 32520641, "comment_id": 52923613, "body": "After applying the recommended edit by @DaveCross, you need to adjust the duration appropriately, from <code>(86400 * 5)</code> to <code>(((24 * 5 + 12) * 60) * 60)</code>."}], "tags": [], "owner": {"reputation": 2177, "user_id": 5324657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/t1fGJ.png?s=128&g=1", "display_name": "Jeremy Jones", "link": "https://stackoverflow.com/users/5324657/jeremy-jones"}, "is_accepted": false, "score": 1, "last_activity_date": 1441967983, "last_edit_date": 1441967983, "creation_date": 1441965311, "answer_id": 32520641, "question_id": 32518112, "link": "https://stackoverflow.com/questions/32518112/compare-timestamp-from-string-with-the-current-system-day-and-turn-bad-status-if/32520641#32520641", "title": "Compare timestamp from string with the current system day and turn bad status if it&#39;s less than 5 days", "body": "<p>You can also use Time::Local for this, which is built-in and converts arbitrary time &amp; date values into epoch time for comparison:</p>\n\n<pre><code>#!/usr/bin/perl --\nuse warnings;\nuse strict;\n\n# compare string dates against the current date\n# and output each one with a 'bad' or 'good' label\n\nuse Time::Local;\n\nwhile (&lt;DATA&gt;) {\n    chomp;\n\n    my $this_time = timelocal(0,0,12,                   # time (dst-compliant)\n                              substr($_, -2),           # mday\n                              substr($_, 4, 2) - 1,     # month\n                              substr($_, 0, 4) - 1900); # year\n\n    print \"$_ \", (time() - $this_time &lt;= (86400 * 5) ? 'good' : 'bad'), \"\\n\";\n}\n\n__DATA__\n20150705\n20150911\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ perl script.pl \n20150705 bad\n20150911 good\n$ \n</code></pre>\n\n<p>Note however that this solution wouldn't be 100% with the time. In other words, it relies on five 24-hour periods of time, rather than five actual calendar days.</p>\n"}, {"tags": [], "owner": {"reputation": 17763, "user_id": 5317403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8TwWN.png?s=128&g=1", "display_name": "acw1668", "link": "https://stackoverflow.com/users/5317403/acw1668"}, "is_accepted": true, "score": 1, "last_activity_date": 1441969349, "creation_date": 1441969349, "answer_id": 32521892, "question_id": 32518112, "link": "https://stackoverflow.com/questions/32518112/compare-timestamp-from-string-with-the-current-system-day-and-turn-bad-status-if/32521892#32521892", "title": "Compare timestamp from string with the current system day and turn bad status if it&#39;s less than 5 days", "body": "<p>Try:</p>\n\n<pre><code>#!/bin/bash\n\nTODAY=`date +%s`\nFIVE_DAYS=$((5 * 24 * 60 * 60))\n\nfor d in '20150705' '20150911'; do\n    t=`date -d $d +%s`\n    seconds=$((TODAY - t))\n    [ $seconds -gt $FIVE_DAYS ] &amp;&amp; result=bad || result=good\n    echo \"$d $result\"\ndone\n</code></pre>\n"}], "owner": {"reputation": 980, "user_id": 1716704, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/S8zFC.png?s=128&g=1", "display_name": "Kalin Borisov", "link": "https://stackoverflow.com/users/1716704/kalin-borisov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "accepted_answer_id": 32521892, "answer_count": 6, "score": 0, "last_activity_date": 1441969349, "creation_date": 1441957195, "question_id": 32518112, "link": "https://stackoverflow.com/questions/32518112/compare-timestamp-from-string-with-the-current-system-day-and-turn-bad-status-if", "title": "Compare timestamp from string with the current system day and turn bad status if it&#39;s less than 5 days", "body": "<p>I want to compare timestamp from string with the current system day and turn bad status if it's less than 5 days of the current system day, what I mean for example have those dates:</p>\n\n<pre><code>20150705\n20150911\n</code></pre>\n\n<p>I'm wondering how to compare them with the current system date and to show output like that if the current system time is 11 Sep 2015:</p>\n\n<pre><code>20150705 bad\n20150911 good\n</code></pre>\n"}, {"tags": ["perl", "apple-push-notifications"], "answers": [{"comments": [{"owner": {"reputation": 1246, "user_id": 184165, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c3169e7f4c83e81188794c7f146a6b3e?s=128&d=identicon&r=PG", "display_name": "Mark Aufflick", "link": "https://stackoverflow.com/users/184165/mark-aufflick"}, "edited": false, "score": 0, "creation_date": 1447317743, "post_id": 32570994, "comment_id": 55107669, "body": "I&#39;m the author of Net::APNS::Persistent, and I&#39;m about to start using the module again after some years of not needing it, so I&#39;ll change over to the Enhanced notification format asap and push it to CPAN."}, {"owner": {"reputation": 2920, "user_id": 3360140, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/OThx0.jpg?s=128&g=1", "display_name": "Kamrul Khan", "link": "https://stackoverflow.com/users/3360140/kamrul-khan"}, "reply_to_user": {"reputation": 1246, "user_id": 184165, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c3169e7f4c83e81188794c7f146a6b3e?s=128&d=identicon&r=PG", "display_name": "Mark Aufflick", "link": "https://stackoverflow.com/users/184165/mark-aufflick"}, "edited": false, "score": 0, "creation_date": 1447965093, "post_id": 32570994, "comment_id": 55393098, "body": "Great to know you decided to update it again. We are using your module and made couple of fixes. We will be happy to share our fixes with you if that helps. Please let me know."}], "tags": [], "owner": {"reputation": 2920, "user_id": 3360140, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/OThx0.jpg?s=128&g=1", "display_name": "Kamrul Khan", "link": "https://stackoverflow.com/users/3360140/kamrul-khan"}, "is_accepted": true, "score": 1, "last_activity_date": 1442253546, "creation_date": 1442253546, "answer_id": 32570994, "question_id": 32513679, "link": "https://stackoverflow.com/questions/32513679/perl-proper-way-to-read-apns-error-response/32570994#32570994", "title": "Perl: proper way to read APNS error_response", "body": "<p>APNS has two different push notification format, Simple Notification Format and Enhanced Notification Format. The Simple Notification Format does not have a field for specifying the message ID (notification identifier). I was using a Perl module (Net::APNS::Persistent) for communicating with APNS; that only supports Simple Notification Format. Thats why I was always getting 00000000 for the notification identifier part. I updated the code of the module to use the enhanced format which is :</p>\n\n<pre><code>pack(\n        'cNNnH*na*',                   # format\n        1,                             # command\n        $id,                           # Notification identifier\n        0,                             # expiry timestamp\n        32,                            # token length\n        $devicetoken,                  # token\n        length $json,                  # payload length\n        $json                          # payload\n    );\n</code></pre>\n\n<p>Then for reading the response I used the below message format:</p>\n\n<pre><code>my($c,$status,$identifier) = unpack('ccN',$error);\n</code></pre>\n\n<p>Where $error is the response from APNS. Now the whole thing is working fine.</p>\n"}], "owner": {"reputation": 2920, "user_id": 3360140, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/OThx0.jpg?s=128&g=1", "display_name": "Kamrul Khan", "link": "https://stackoverflow.com/users/3360140/kamrul-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "accepted_answer_id": 32570994, "answer_count": 1, "score": 1, "last_activity_date": 1442253546, "creation_date": 1441931381, "question_id": 32513679, "link": "https://stackoverflow.com/questions/32513679/perl-proper-way-to-read-apns-error-response", "title": "Perl: proper way to read APNS error_response", "body": "<p>I have implemented a Perl script that sends push notifications through Apples apns services. I am having some issues with the error handling. As per <a href=\"https://developer.apple.com/library/ios/technotes/tn2265/_index.html#//apple_ref/doc/uid/DTS40010376-CH1-TNTAG34\" rel=\"nofollow noreferrer\">APNS documentation:</a></p>\n\n<blockquote>\n  <p>If the stream isn't ready for writing, see if the stream is available for reading. If it is, read everything available from the stream. If you get zero bytes back, the connection was closed because of an error such as an invalid command byte or other parsing error. If you get six bytes back, that's an error response that you can check for the response code and the ID of the notification that caused the error. You'll need to send every notification following that one again.</p>\n</blockquote>\n\n<p>I am doing the same. Whenever I get a write error due to connection drop; I read the socket. Everytime I get 6 bytes return from the socket. Meaning APNS is sending me back an error_response. The format of error-response packet as per <a href=\"https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/CommunicatingWIthAPS.html\" rel=\"nofollow noreferrer\">APNS documentation</a> is like below </p>\n\n<p><a href=\"https://i.stack.imgur.com/4RU1P.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4RU1P.png\" alt=\"enter image description here\"></a></p>\n\n<blockquote>\n  <p>The packet has a command value of 8 followed by a one-byte status code and the notification identifier of the malformed notification.</p>\n</blockquote>\n\n<p>I am using the below code to unpack the data I read from the socket:</p>\n\n<pre><code>my $hex = unpack( 'H*', $data );\nprint $hex;\n</code></pre>\n\n<p>Everytime, I get the same value 080800000000. As per APNS documentation the first byte will always be 8, the next byte will represent the error status code. 8 means \"Invalid Token\". Up to this part it is OK. However, the remaining 4 bytes which is the identifier, always gives me 00000000. What does it mean ? </p>\n"}, {"tags": ["perl", "dbix-class"], "answers": [{"comments": [{"owner": {"reputation": 12427, "user_id": 498634, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/580e34a7c6e156d847e8ee768388daa4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel B&#246;hmer", "link": "https://stackoverflow.com/users/498634/daniel-b%c3%b6hmer"}, "edited": false, "score": 0, "creation_date": 1517965691, "post_id": 32514356, "comment_id": 84306953, "body": "There&#39;s also <code>$record-&gt;get_inflated_columns()</code> if that is what you need. Is there any way to get a hashref right way? I&#39;d like not to have that many copies of the column data if fetching the hash multiple times but the code of named method does a lot of things. Doesn&#39;t look like there&#39;s a hashref ready anywhere."}], "tags": [], "owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "is_accepted": true, "score": 5, "last_activity_date": 1441936886, "creation_date": 1441936886, "answer_id": 32514356, "question_id": 32513447, "link": "https://stackoverflow.com/questions/32513447/convert-a-dbixclassresult-into-a-hash/32514356#32514356", "title": "Convert a DBIx::Class::Result into a hash", "body": "<p>I assume you're talking about <code>DBIx::Class</code>?</p>\n\n<pre><code>my $record = $schema-&gt;resultset(\"food\")-&gt;create({name=&gt;\"bacon\"});\nmy %record_columns = $record-&gt;get_columns;\n\n# or, to get a HashRef directly\nmy $cols = { $record-&gt;get_columns };\n\n# or, as you've asked for\nmy $foo = { record =&gt; { $record-&gt;get_columns } };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12427, "user_id": 498634, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/580e34a7c6e156d847e8ee768388daa4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel B&#246;hmer", "link": "https://stackoverflow.com/users/498634/daniel-b%c3%b6hmer"}, "edited": false, "score": 0, "creation_date": 1517965805, "post_id": 32549366, "comment_id": 84306996, "body": "Yeah, that&#39;s really useful but doesn&#39;t work when you need to get a prefetched related object first before passing along the record as a hashref."}, {"owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "reply_to_user": {"reputation": 12427, "user_id": 498634, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/580e34a7c6e156d847e8ee768388daa4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel B&#246;hmer", "link": "https://stackoverflow.com/users/498634/daniel-b%c3%b6hmer"}, "edited": false, "score": 1, "creation_date": 1518099216, "post_id": 32549366, "comment_id": 84372809, "body": "You didn&#39;t ask for that, please extend your question or ask another one."}, {"owner": {"reputation": 12427, "user_id": 498634, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/580e34a7c6e156d847e8ee768388daa4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel B&#246;hmer", "link": "https://stackoverflow.com/users/498634/daniel-b%c3%b6hmer"}, "edited": false, "score": 0, "creation_date": 1541547818, "post_id": 32549366, "comment_id": 93253633, "body": "Also instead of that module you might want to use <a href=\"https://metacpan.org/source/FREW/DBIx-Class-Helpers-2.033004/lib/DBIx/Class/Helper/ResultSet/Shortcut/HRI.pm\" rel=\"nofollow noreferrer\">DBIx::Class::Helper::ResultSet::ShortCut::HRI</a> which comes as part of the awesome and handy toolbox <a href=\"https://metacpan.org/release/FREW/DBIx-Class-Helpers-2.033004\" rel=\"nofollow noreferrer\">DBIx-Class-Helpers</a> with many other helpful gems"}], "tags": [], "owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "is_accepted": false, "score": 2, "last_activity_date": 1518099227, "last_edit_date": 1518099227, "creation_date": 1442145265, "answer_id": 32549366, "question_id": 32513447, "link": "https://stackoverflow.com/questions/32513447/convert-a-dbixclassresult-into-a-hash/32549366#32549366", "title": "Convert a DBIx::Class::Result into a hash", "body": "<p>What you're looking for is included in DBIx::Class as <a href=\"https://metacpan.org/pod/DBIx::Class::ResultClass::HashRefInflator\" rel=\"nofollow noreferrer\">DBIx::Class::ResultClass::HashRefInflator</a>.</p>\n"}], "owner": {"reputation": 139, "user_id": 1321568, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ad6b4278ffdc1d49cdd10713d960bc55?s=128&d=identicon&r=PG", "display_name": "Baconbitz", "link": "https://stackoverflow.com/users/1321568/baconbitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1507, "favorite_count": 0, "accepted_answer_id": 32514356, "answer_count": 2, "score": 2, "last_activity_date": 1518099227, "creation_date": 1441929728, "last_edit_date": 1509424633, "question_id": 32513447, "link": "https://stackoverflow.com/questions/32513447/convert-a-dbixclassresult-into-a-hash", "title": "Convert a DBIx::Class::Result into a hash", "body": "<p>Using DBIx::Class, I found a solution to my issue, thankfully. But I'm sure there has to be a nicer way. </p>\n\n<pre><code>my $record = $schema-&gt;resultset(\"food\")-&gt;create({name=&gt;\"bacon\"});\n</code></pre>\n\n<p>How would I turn this record into a simple hashref instead of having to make this call right after.</p>\n\n<pre><code>my record = $schema-&gt;resultset(\"food\")-&gt;search({name=&gt;\"bacon\"})-&gt;hashref_array();\n</code></pre>\n\n<p>Ideally I want to be able to write a code snippet as simple as</p>\n\n<pre><code> {record=&gt; $record} \n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>{record =&gt; {name =&gt; $record-&gt;name, $record-&gt;food_id, ...}}\n</code></pre>\n\n<p>This would drive me insane with a table that has alot more columns.</p>\n"}, {"tags": ["perl", "active-directory", "netldap"], "answers": [{"comments": [{"owner": {"reputation": 3595, "user_id": 2460294, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Om5Xt.jpg?s=128&g=1", "display_name": "Drew", "link": "https://stackoverflow.com/users/2460294/drew"}, "edited": false, "score": 0, "creation_date": 1442253159, "post_id": 32551683, "comment_id": 52996998, "body": "Worked great,  thanks for the explanation along with the correct solution."}], "tags": [], "owner": {"reputation": 18741, "user_id": 138200, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e98211a037ee1431e5c6929947691fba?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/138200/mitch"}, "is_accepted": true, "score": 0, "last_activity_date": 1442160439, "creation_date": 1442160439, "answer_id": 32551683, "question_id": 32513091, "link": "https://stackoverflow.com/questions/32513091/ms-ad2008-unable-to-force-password-change-at-next-login-using-perl-netldaps/32551683#32551683", "title": "MS AD2008 - Unable to force password change at next login using Perl Net::LDAPS and userAccountControl attribute", "body": "<p>The <code>userAccountControl</code> attribute is a bitfield with many settings.  Changing the value for the user to be <code>0x00800000</code> would be quite harmful since it would remove the default of <code>0x200 ADS_UF_NORMAL_ACCOUNT</code>.</p>\n\n<p>The <a href=\"https://msdn.microsoft.com/en-us/library/ms680832(v=vs.85).aspx\" rel=\"nofollow\">documentation for <code>0x00800000</code></a> is:</p>\n\n<blockquote>\n  <p>0x00800000 <br/>ADS_UF_PASSWORD_EXPIRED<br/>  The user password has expired. This flag is created by the system using data from the Pwd-Last-Set attribute and the domain policy. </p>\n</blockquote>\n\n<p>If we look at <a href=\"https://msdn.microsoft.com/en-us/library/ms679430(v=vs.85).aspx\" rel=\"nofollow\"><code>pwdLastSet</code>'s documentation</a>, we see:</p>\n\n<blockquote>\n  <p>The date and time that the password for this account was last changed. [...] If this value is set to 0 and the User-Account-Control attribute does not contain the UF_DONT_EXPIRE_PASSWD flag, then the user must set the password at the next logon.</p>\n</blockquote>\n\n<p>So to expire the password, we need to set <code>pwdLastSet</code> to zero.  This is substantiated by a <a href=\"http://blogs.technet.com/b/heyscriptingguy/archive/2005/07/06/how-can-i-cause-a-user-s-password-to-expire.aspx\" rel=\"nofollow\">blog entry from Scripting Guy</a> who does it in VBScript.</p>\n\n<p>In Perl:</p>\n\n<pre><code># Binding to LDAP Directory:\n$self-&gt;{LDAP_INSTANCE} = Net::LDAPS-&gt;new($host);\n$self-&gt;{LDAP_INSTANCE}-&gt;bind(dn=&gt;$dn, password=&gt;$password, version=&gt;3 )\n\nmy $rc =$self-&gt;{LDAP_INSTANCE}-&gt;modify(\n    $DN_OF_USER_ACCOUNT, \n    [ replace =&gt; [pwdLastSet =&gt; 0] ]\n);\nprint $rc-&gt;error;\n</code></pre>\n"}], "owner": {"reputation": 3595, "user_id": 2460294, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Om5Xt.jpg?s=128&g=1", "display_name": "Drew", "link": "https://stackoverflow.com/users/2460294/drew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 32551683, "answer_count": 1, "score": 0, "last_activity_date": 1442160439, "creation_date": 1441927143, "question_id": 32513091, "link": "https://stackoverflow.com/questions/32513091/ms-ad2008-unable-to-force-password-change-at-next-login-using-perl-netldaps", "title": "MS AD2008 - Unable to force password change at next login using Perl Net::LDAPS and userAccountControl attribute", "body": "<p>I am connecting to an Active Directory 2008 Domain Controller using perl Net::LDAPS and trying to set the \"User must change password at next logon\" account option and it's not working.</p>\n\n<p>I am able to create, modify, delete, and move different objects but I am not able to get that change password setting to take!</p>\n\n<p>This is what I am trying to do and it's not working:</p>\n\n<p>Note: I am using a self written class wrapper for Net::LDAPS and the code below is boiled down to the bare bones of what I am trying to do.</p>\n\n<pre>\n# Binding to LDAP Directory:\n$self->{LDAP_INSTANCE} = Net::LDAPS->new($host);\n$self->{LDAP_INSTANCE}->bind(dn=>$dn, password=>$password, version=>3 )\n\nmy $rc =$self->{LDAP_INSTANCE}->modify(\n    $DN_OF_USER_ACCOUNT, \n    [ replace => [userAccountControl => 0x00800000] ]\n);\nprint $rc->error; # Results in an empty string / No error\n\n# Note: I have also tried: hex(800000) instead of 0x00800000 as well.\n</pre>\n\n<p>I am binding with a domain administrator account and I have verified that the $DN_OF_USER_ACCOUNT is correct. </p>\n"}, {"tags": ["perl", "template-toolkit"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1441924357, "post_id": 32512531, "comment_id": 52884261, "body": "Hashes are designed to quickly extract the value given the key, but to go the other way around you would have to iterate through all the key-value pairs of the hash."}], "answers": [{"comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 4, "creation_date": 1441927133, "post_id": 32512997, "comment_id": 52885038, "body": "If there is a way to do it in template, don&#39;t. It is just not the right place, code that is perfectly readable becomes horrible in TT, because it is made to offer some simple ways of displaying the data prepared elsewhere, not to code in."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1441928505, "post_id": 32512997, "comment_id": 52885408, "body": "Agreed. The controller is a much better place to massage data."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 0, "last_activity_date": 1441926590, "creation_date": 1441926590, "answer_id": 32512997, "question_id": 32512531, "link": "https://stackoverflow.com/questions/32512531/find-hash-value-from-key-in-template-toolkit/32512997#32512997", "title": "find hash value from key in template toolkit", "body": "<p>This would be easy enough to do by implementing a custom sort by value:</p>\n\n<pre><code>my @keys = sort { $hash{$a} cmp $hash{$b} } keys(%hash);\n</code></pre>\n\n<p>Unfortunately, looking over the <a href=\"http://template-toolkit.org/docs/manual/VMethods.html#section_Hash_Virtual_Methods\" rel=\"nofollow\">hash virtual methods</a> available in TT, I don't think there's a way to do this purely in your template. You'll need to massage the data a little in code first, either through the <code>sort</code> above, or by inverting the hash:</p>\n\n<pre><code>my %inverted = reverse(%hash);\n</code></pre>\n\n<p>If you invert the hash, you can use the TT <a href=\"http://template-toolkit.org/docs/manual/VMethods.html#section_pairs\" rel=\"nofollow\">pairs</a> method to get a sorted list of key/value pairs in one shot.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1441959860, "creation_date": 1441959860, "answer_id": 32518878, "question_id": 32512531, "link": "https://stackoverflow.com/questions/32512531/find-hash-value-from-key-in-template-toolkit/32518878#32518878", "title": "find hash value from key in template toolkit", "body": "<p>You can use the <a href=\"https://metacpan.org/pod/distribution/Template-Toolkit/lib/Template/Manual/VMethods.pod#pairs\" rel=\"nofollow\"><code>pairs</code></a> vmethod to get a list of key/value pairs, which you can then sort into the order you want.</p>\n\n<pre><code>[% myList = { first =&gt; 'ZZZ', second =&gt; 'YYY', third =&gt; 'XXX' };\n   FOREACH option IN myList.pairs.sort('value') -%]\n&lt;option value=\"[% option.key %]\"&gt;[% option.value %]&lt;/option&gt;\n[% END -%]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&lt;option value=\"third\"&gt;XXX&lt;/option&gt;\n&lt;option value=\"second\"&gt;YYY&lt;/option&gt;\n&lt;option value=\"first\"&gt;ZZZ&lt;/option&gt;\n</code></pre>\n"}], "owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 900, "favorite_count": 0, "accepted_answer_id": 32518878, "answer_count": 2, "score": 1, "last_activity_date": 1441959860, "creation_date": 1441923536, "question_id": 32512531, "link": "https://stackoverflow.com/questions/32512531/find-hash-value-from-key-in-template-toolkit", "title": "find hash value from key in template toolkit", "body": "<p>have simple hash, which is being used to pupulate a select option. I want to order it on values, but I am not able to print the keys...</p>\n\n<pre><code>[%- FOREACH val IN myList.values.sort -%]&lt;option value=\"[%- myList.$val.key -%]\"&gt;[%- val -%]&lt;/option&gt;[% END %]\n</code></pre>\n\n<p>the KEY is coming null..... i tried many things, it is not working.</p>\n\n<p>so that select option is coming as:</p>\n\n<pre><code>&lt;option value=\"\"&gt;roger1&lt;/option&gt;\n</code></pre>\n\n<p>all keys and values are unique.</p>\n\n<p>how can i get the key if i know the value, from a hash?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "is_accepted": true, "score": 2, "last_activity_date": 1441918481, "creation_date": 1441918481, "answer_id": 32511419, "question_id": 32511304, "link": "https://stackoverflow.com/questions/32511304/how-can-i-modify-the-regex-in-this-script-to-parse-ngrep-instead-of-netstat/32511419#32511419", "title": "How can I modify the regex in this script to parse ngrep instead of netstat?", "body": "<p>The following should do it:</p>\n\n<pre><code>if ( $line =~ /^X-Forwarded-For:\\s+(\\d+\\.\\d+\\.\\d+\\.\\d+)/i ) {\n  my $ip = $1;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 4570271, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/98f31fd3c97f32a5bf23a4e026311664?s=128&d=identicon&r=PG&f=1", "display_name": "Rdang", "link": "https://stackoverflow.com/users/4570271/rdang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 32511419, "answer_count": 1, "score": -3, "last_activity_date": 1441918481, "creation_date": 1441917934, "last_edit_date": 1441918404, "question_id": 32511304, "link": "https://stackoverflow.com/questions/32511304/how-can-i-modify-the-regex-in-this-script-to-parse-ngrep-instead-of-netstat", "title": "How can I modify the regex in this script to parse ngrep instead of netstat?", "body": "<p>I am currently using a Perl version of a DDoS Deflate script, which parses <code>netstat</code> for the total number of IPs connected in order to apply IP ban rules.</p>\n\n<p>Currently the script is parsing <code>netstat</code> with this regex:</p>\n\n<pre><code>my %active_conns_by_ip = ( );\nfor my $line ( split /^/, `netstat -ntu --protocol=inet` ) {\n    if ( $line =~ /^\\S+\\s+\\S+\\s+\\S+\\s+\\S+\\s+(\\S+):\\S+/i ) {\n        my $ip = $1;\n</code></pre>\n\n<p>(See sample output of <code>nestat -ntu --protocol=inet</code> <a href=\"http://prntscr.com/8ew551\" rel=\"nofollow\">here</a>.)</p>\n\n<p>Basically what I want to achieve is a change in the script regex that will parse the <code>$ip</code> from the following command instead:</p>\n\n<pre><code>ngrep -il -d eth0 -W byline \"x-forwarded-for\" \"port 80\" | grep -i x-forwarded-for\n</code></pre>\n\n<p>The output of <code>ngrep</code> has the following format:</p>\n\n<pre><code>X-Forwarded-For: 46.166.xx.xx\nX-Forwarded-For: 78.143.xx.xx\n</code></pre>\n"}, {"tags": ["perl", "mechanize", "www-mechanize", "html-content-extraction", "html-treebuilder"], "answers": [{"comments": [{"owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "edited": false, "score": 0, "creation_date": 1441925339, "post_id": 32511436, "comment_id": 52884533, "body": "I think this is a very reasonable option if you&#39;re already using Mech."}, {"owner": {"reputation": 47, "user_id": 4870810, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/541e9ad50da1bb1538c6f407119be059?s=128&d=identicon&r=PG&f=1", "display_name": "MikeEMKI", "link": "https://stackoverflow.com/users/4870810/mikeemki"}, "edited": false, "score": 0, "creation_date": 1441928356, "post_id": 32511436, "comment_id": 52885375, "body": "Thank you! Someone gave you a -1 even though this was the solution I was looking for, so I&#39;ll upvote this and label it as the solution."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1441931116, "post_id": 32511436, "comment_id": 52886028, "body": "This doesn&#39;t check that the <code>a</code> element found is within a <code>div</code> with an <code>id</code> of <code>innercontent</code>"}], "tags": [], "owner": {"reputation": 4462, "user_id": 1018580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757fafb944d47f80a2336d097dcef7c5?s=128&d=identicon&r=PG", "display_name": "Trenton Trama", "link": "https://stackoverflow.com/users/1018580/trenton-trama"}, "is_accepted": true, "score": 1, "last_activity_date": 1441957312, "last_edit_date": 1441957312, "creation_date": 1441918536, "answer_id": 32511436, "question_id": 32510091, "link": "https://stackoverflow.com/questions/32510091/extracting-links-in-perl-using-treebuilder/32511436#32511436", "title": "Extracting Links in Perl using TreeBuilder", "body": "<p><code>WWW::Mechanize</code> has the ability to extract links based on quite a few attributes, such as the text that's displayed for the link, the actual link, or id.  </p>\n\n<p>For your specific example, you'd fetch the links that are pdfs with:</p>\n\n<pre><code>my @links = $mech-&gt;find_all_links(url_regex=&gt;qr/\\.pdf$/)\n</code></pre>\n\n<p>and then do whatever you needed with the resulting array.   </p>\n\n<p>You can see the <a href=\"https://metacpan.org/pod/WWW::Mechanize#mech-find_all_links\" rel=\"nofollow\">documentation</a>. And <a href=\"https://metacpan.org/pod/WWW::Mechanize#mech-find_link\" rel=\"nofollow\">this doc</a> will show you the options availiabe.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1441930994, "creation_date": 1441930994, "answer_id": 32513627, "question_id": 32510091, "link": "https://stackoverflow.com/questions/32510091/extracting-links-in-perl-using-treebuilder/32513627#32513627", "title": "Extracting Links in Perl using TreeBuilder", "body": "<p>Using <a href=\"http://metacpan.org/module/HTML::TreeBuilder\" rel=\"nofollow\"><code>HTML::TreeBuilder</code></a>, you have to make two successive calls tro <code>look_down</code>. The first to find <code>div</code> elements with an <code>id</code> attribute of <code>innercontent</code>, and the second to search <em>within</em> those elements to find <code>a</code> elements with an <code>href</code> attribute whose value ends with <code>.pdf</code></p>\n\n<p>It loks like this</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse HTML::TreeBuilder;\n\nmy $html = &lt;&lt;END;\n&lt;div id=\"innercontent\"&gt;\n&lt;h1&gt;Download here&lt;/h1&gt;\n&lt;a href=\"website.pdf\"&gt;&lt;img src=\"stuff\"&gt;&lt;/a&gt;\n&lt;/div&gt;\nEND\n\nmy $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n\nfor my $div ( $tree-&gt;look_down(_tag =&gt; 'div', id =&gt; 'innercontent') ) {\n    my @anchors = $div-&gt;look_down(_tag =&gt; 'a', href =&gt; qr/\\.pdf\\z/i );\n    print $_-&gt;attr('href'), \"\\n\" for @anchors;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>website.pdf\n</code></pre>\n\n<p>I like <a href=\"http://metacpan.org/module/Mojo::DOM\" rel=\"nofollow\"><code>Mojo::DOM</code></a> for this, as it allows simple CSS accessors and allows problems to be solved very concisely</p>\n\n<p>Here is a solution using that module. The output is identical to the solution above</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Mojo::DOM;\n\nmy $html = &lt;&lt;END;\n&lt;div id=\"innercontent\"&gt;\n&lt;h1&gt;Download here&lt;/h1&gt;\n&lt;a href=\"website.pdf\"&gt;&lt;img src=\"stuff\"&gt;&lt;/a&gt;\n&lt;/div&gt;\nEND\n\nmy $dom = Mojo::DOM-&gt;new($html);\n\nfor my $anchor ( $dom-&gt;find('div#innercontent a[href]')-&gt;each ) {\n    my $href = $anchor-&gt;attr('href');\n    print \"$href\\n\" if $href =~ /\\.pdf\\z/i;\n}\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 4870810, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/541e9ad50da1bb1538c6f407119be059?s=128&d=identicon&r=PG&f=1", "display_name": "MikeEMKI", "link": "https://stackoverflow.com/users/4870810/mikeemki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 559, "favorite_count": 0, "accepted_answer_id": 32511436, "answer_count": 2, "score": 1, "last_activity_date": 1441957312, "creation_date": 1441912982, "question_id": 32510091, "link": "https://stackoverflow.com/questions/32510091/extracting-links-in-perl-using-treebuilder", "title": "Extracting Links in Perl using TreeBuilder", "body": "<p>I'm working on a script to extract a bunch of information into one HTML file. I'm having some difficulty extracting ONLY a specific set of links from the page in question, however.</p>\n\n<p>Here is a rough structure of the site. There are some other headings and paragraphs in between the innercontent div and what I'm showing below.</p>\n\n<pre><code>&lt;div id=\"innercontent\"&gt;\n&lt;h1&gt;Download here&lt;/h1&gt;\n&lt;a href=\"website.pdf\"&gt;&lt;img src=\"stuff\"&gt;&lt;/a&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Now there are multiple links found in the div ID \"innercontent,\" so I'm looking to find a way to either match a string or otherwise to only get the links I want. Keep in mind all of the links I'm looking to grab will be .pdf, so perhaps that can be of some help. I'm <em>pretty</em> sure TreeBuilder can handle this based on the research I've done. Here are two methods I'm trying. I'd prefer to solve it using the first.</p>\n\n<pre><code># link to pdf of transcript\nfor ( $mech-&gt;look_down(_tag =&gt; 'a') ) {\n  next unless $_-&gt;as_trimmed_text =~ m/pdf/;\n  say $_-&gt;as_HTML;\n}\n\nmy @links = $mech-&gt;links();\n  for my $link ( @links ) {\n  print $link-&gt;url;\n}\n</code></pre>\n\n<p>I realize the latter method is just going to search the entire page for links, but I'm including it just in case that method is more efficient, or if both of these methods can be combined.</p>\n\n<p>Any help or advice would be greatly appreciated!</p>\n"}, {"tags": ["perl", "datetime"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 2, "creation_date": 1441911874, "post_id": 32509596, "comment_id": 52878603, "body": "The documentation seems to imply that should work, but it doesn&#39;t work for me either. I had to use <code>Time::Piece-&gt;strptime($date, &#39;%Y-%m-%dT%H:%M:%S&#39;)</code> to get the date to parse. <code>man strptime</code> says that <code>%F</code> should equal <code>%Y-%m-%d</code> and <code>%T</code> should equal <code>%H:%M:%S</code>... so this is odd."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1441912028, "post_id": 32509596, "comment_id": 52878681, "body": "I&#39;ve always gotten this error with the <code>%F</code> format specifier. I <i>think</i> Time::Piece has platform-specific differences, so it may work on some systems."}, {"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 1, "creation_date": 1441919523, "post_id": 32509596, "comment_id": 52882381, "body": "The &quot;just like the man page&quot; documentation is a little optimistic."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 0, "creation_date": 1441922578, "post_id": 32509596, "comment_id": 52883658, "body": "@JimDavis They did <a href=\"https://metacpan.org/source/RJBS/Time-Piece-1.30/Piece.xs#L315\" rel=\"nofollow noreferrer\">copy</a> the strptime implementation from FreeBSD, after all. But unless you&#39;re actually running BSD, I think time.h and other things may differ, so you get stuff like this."}], "answers": [{"comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 3, "creation_date": 1441913977, "post_id": 32509835, "comment_id": 52879679, "body": "I guess it&#39;s time to send a pull request."}, {"owner": {"reputation": 2317, "user_id": 711515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5b6edf26acc698b27a585417bb9bb6?s=128&d=identicon&r=PG", "display_name": "chansen", "link": "https://stackoverflow.com/users/711515/chansen"}, "edited": false, "score": 2, "creation_date": 1441917149, "post_id": 32509835, "comment_id": 52881276, "body": "It&#39;s a mess, <code>Time::Piece</code> bundles a old implementation of strptime() from BSD which is hardcoded to use english for non-numerical components, while the strftime() method uses your libc&#39;s implementation and is subject for any locale."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 6, "last_activity_date": 1441911963, "creation_date": 1441911963, "answer_id": 32509835, "question_id": 32509596, "link": "https://stackoverflow.com/questions/32509596/why-do-i-get-error-parsing-time-when-i-use-the-format-string-ftt-with-time/32509835#32509835", "title": "Why do I get &quot;Error Parsing Time&quot; when I use the format string &quot;%FT%T&quot; with Time::Piece-&gt;strptime?", "body": "<p><code>Time::Piece</code> seems to have some bugs in this area. In particular, it thinks that <code>strptime</code> <code>%T</code> is equivalent to <code>%B %e</code>, unlike what its documentation claims.</p>\n\n<p><code>strftime</code> <code>%F</code> and <code>%T</code> don't work for me either, but that may be because I'm on Windows.</p>\n\n<p>Sticking to standard format specifications works fine, though:</p>\n\n<pre><code>my $date = \"2015-09-11T04:00:00\";\nmy $t = Time::Piece-&gt;strptime($date, '%Y-%m-%dT%H:%M:%S');\nprint $t-&gt;strftime('%Y-%m-%d %H:%M:%S'), \"\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5913, "user_id": 2893712, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ba3bea502f3cde271b0d8d9a0b957afc?s=128&d=identicon&r=PG", "display_name": "Bijan", "link": "https://stackoverflow.com/users/2893712/bijan"}, "edited": false, "score": 2, "creation_date": 1441913404, "post_id": 32510160, "comment_id": 52879398, "body": "Yes, I ended up doing that. Datetime actually has a module <code>DateTime::Format::ISO8601</code>"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 5913, "user_id": 2893712, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ba3bea502f3cde271b0d8d9a0b957afc?s=128&d=identicon&r=PG", "display_name": "Bijan", "link": "https://stackoverflow.com/users/2893712/bijan"}, "edited": false, "score": 0, "creation_date": 1441914400, "post_id": 32510160, "comment_id": 52879905, "body": "Even better! I guess I should have checked before I posted my answer, but I didn&#39;t know if you had multiple formats to parse or just the one."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 2, "last_activity_date": 1441913317, "creation_date": 1441913317, "answer_id": 32510160, "question_id": 32509596, "link": "https://stackoverflow.com/questions/32509596/why-do-i-get-error-parsing-time-when-i-use-the-format-string-ftt-with-time/32510160#32510160", "title": "Why do I get &quot;Error Parsing Time&quot; when I use the format string &quot;%FT%T&quot; with Time::Piece-&gt;strptime?", "body": "<p>Have you considered ditching Time::Piece for something else? <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow\">DateTime</a>, for example, does what it says on the tin:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse DateTime::Format::Strptime;\n\nmy $date = '2015-09-11T04:00:00';\nmy $strp = DateTime::Format::Strptime-&gt;new(pattern =&gt; '%FT%T');\nmy $dt = $strp-&gt;parse_datetime($date);\n\nprint $dt-&gt;datetime;  # prints 2015-09-11T04:00:00\n</code></pre>\n"}], "owner": {"reputation": 5913, "user_id": 2893712, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ba3bea502f3cde271b0d8d9a0b957afc?s=128&d=identicon&r=PG", "display_name": "Bijan", "link": "https://stackoverflow.com/users/2893712/bijan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2468, "favorite_count": 0, "accepted_answer_id": 32510160, "answer_count": 2, "score": 5, "last_activity_date": 1441913317, "creation_date": 1441911123, "last_edit_date": 1441913266, "question_id": 32509596, "link": "https://stackoverflow.com/questions/32509596/why-do-i-get-error-parsing-time-when-i-use-the-format-string-ftt-with-time", "title": "Why do I get &quot;Error Parsing Time&quot; when I use the format string &quot;%FT%T&quot; with Time::Piece-&gt;strptime?", "body": "<p>I am trying to convert <code>2015-09-11T04:00:00</code> to a <a href=\"http://perldoc.perl.org/Time/Piece.html\" rel=\"nofollow\">Time::Piece</a> object. I tried:</p>\n\n<pre><code>my $date = \"2015-09-11T04:00:00\";\nmy $t = Time::Piece-&gt;strptime($date, '%FT%T');\nprint $t-&gt;strftime('%F %T');\n</code></pre>\n\n<p>But I get <code>Error Parsing Time</code>. I think it is because I am looking for <code>%FT%T</code> and this is causing issues because of the spacing. How would I fix this?</p>\n"}, {"tags": ["regex", "perl", "substitution"], "comments": [{"owner": {"reputation": 39, "user_id": 4389780, "user_type": "registered", "accept_rate": 12, "profile_image": "https://lh6.googleusercontent.com/-w6i5MwvKw7Q/AAAAAAAAAAI/AAAAAAAAAK4/xoxIE6T7WL4/photo.jpg?sz=128", "display_name": "Ahmed Mahdi", "link": "https://stackoverflow.com/users/4389780/ahmed-mahdi"}, "edited": false, "score": 0, "creation_date": 1441908303, "post_id": 32508738, "comment_id": 52876558, "body": "Thanks for edit Hunter McMillen"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1441908459, "post_id": 32508738, "comment_id": 52876653, "body": "<code>perl -E &#39;$_= &quot;c&#47;g&#47;c&#47;g&#47;c&#47;g&#47;c&#47;g&quot;; s{&#47;}{),(}g; say&#39;</code>"}, {"owner": {"reputation": 83501, "user_id": 166712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f970g.png?s=128&g=1", "display_name": "Anthony Forloney", "link": "https://stackoverflow.com/users/166712/anthony-forloney"}, "edited": false, "score": 0, "creation_date": 1441908472, "post_id": 32508738, "comment_id": 52876660, "body": "Why do you need regex for this? Would a replace on <code>&#47;</code> with <code>),(</code> be sufficient enough?"}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 83501, "user_id": 166712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f970g.png?s=128&g=1", "display_name": "Anthony Forloney", "link": "https://stackoverflow.com/users/166712/anthony-forloney"}, "edited": false, "score": 2, "creation_date": 1441908628, "post_id": 32508738, "comment_id": 52876739, "body": "@AnthonyForloney If you mean string replace, there is not a primitive in Perl for this. You would have to loop through each character and write out the update string to a different variable. Regular expressions are the correct solution for this in Perl (and probably other languages). Rather, the substitution operator is the Perl primitive for this type of operation."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1441909711, "post_id": 32508738, "comment_id": 52877317, "body": "Additionally, the binding operator is <code>=~</code>, not <code>= ~</code>. If you were using <code>warnings</code>, this would have produced the following warning: Use of uninitialized value $_ in substitution (s///)"}], "answers": [{"tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 7, "last_activity_date": 1441908762, "last_edit_date": 1441908762, "creation_date": 1441908429, "answer_id": 32508859, "question_id": 32508738, "link": "https://stackoverflow.com/questions/32508738/regular-expression-to-substitute-forward-slash-with-opening-brackets/32508859#32508859", "title": "regular expression to substitute forward slash with opening brackets", "body": "<p>If you want to use a literal forward slash in a substitution that is delimted with forward slashes e.g. <code>s/../../g</code> you have to first <em>escape</em> the forward slash:</p>\n\n<pre><code>s/\\//),(/; # Note: this only replaces a single occurrence\n</code></pre>\n\n<p>to replace all occurrences you can add the <a href=\"http://perldoc.perl.org/perlre.html#Modifiers\"><code>g(global)</code></a> modifier:</p>\n\n<pre><code>s/\\//),(/g;\n</code></pre>\n\n<p>You can also choose any other delimiter for the substitution expression, the following are all valid and equivalent:</p>\n\n<pre><code>s|/|),(|g;\ns./.),(.g;\ns#/#),(#g;\ns{/}{),(}g;\n</code></pre>\n\n<p>It is also important to note that </p>\n\n<pre><code>$str = c/g/c/g/c/g/c/g.\n</code></pre>\n\n<p>is not a valid statement in Perl, all strings need to be enclosed in single or double quotes or the corresponding <code>q{}</code>, <code>qq{}</code> forms:</p>\n\n<pre><code>$str = 'c/g/c/g/c/g/c/g.';\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4389780, "user_type": "registered", "accept_rate": 12, "profile_image": "https://lh6.googleusercontent.com/-w6i5MwvKw7Q/AAAAAAAAAAI/AAAAAAAAAK4/xoxIE6T7WL4/photo.jpg?sz=128", "display_name": "Ahmed Mahdi", "link": "https://stackoverflow.com/users/4389780/ahmed-mahdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441908888, "creation_date": 1441908039, "last_edit_date": 1441908888, "question_id": 32508738, "link": "https://stackoverflow.com/questions/32508738/regular-expression-to-substitute-forward-slash-with-opening-brackets", "title": "regular expression to substitute forward slash with opening brackets", "body": "<p>I want to use regular expression to substitute forward slash with opening brackets, separated by a comma. For example, for</p>\n\n<pre><code>$str = \"c/g/c/g/c/g/c/g\";\n</code></pre>\n\n<p>the result should be </p>\n\n<pre><code>$str = \"c),(g),(c),(g),(c),(g),(c),(g\";\n</code></pre>\n\n<p>I wrote the following line but it does not work</p>\n\n<pre><code>$observed = ~ s///);(//;\n</code></pre>\n\n<p>Any advice how to solve it</p>\n"}, {"tags": ["perl", "shell"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 6, "creation_date": 1441909220, "post_id": 32508709, "comment_id": 52877053, "body": "<a href=\"http://unix.stackexchange.com/a/194046/94637\">Redirecting stdin with both a pipe and a heredoc won&#39;t work.</a> Can you please explain exactly what you&#39;re trying to do and why?"}], "answers": [{"tags": [], "owner": {"reputation": 44030, "user_id": 453002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/66e564e1221dfd0bfd24e7c47e2079ea?s=128&d=identicon&r=PG", "display_name": "Alex Howansky", "link": "https://stackoverflow.com/users/453002/alex-howansky"}, "is_accepted": false, "score": 0, "last_activity_date": 1441908379, "creation_date": 1441908379, "answer_id": 32508844, "question_id": 32508709, "link": "https://stackoverflow.com/questions/32508709/way-to-fetch-the-argument-inside-perl-script/32508844#32508844", "title": "way to fetch the argument inside perl script", "body": "<p>Your example is not using argument, it's using standard input. You can read standard input with <a href=\"http://perldoc.perl.org/perlop.html#I%2FO-Operators\" rel=\"nofollow\">the I/O operators</a>. If you actually mean that you want an argument like <code>myscript.pl --arg</code> then I would recommend using <a href=\"http://perldoc.perl.org/Getopt/Long.html\" rel=\"nofollow\">Getopt::Long</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 0, "last_activity_date": 1441908393, "creation_date": 1441908393, "answer_id": 32508849, "question_id": 32508709, "link": "https://stackoverflow.com/questions/32508709/way-to-fetch-the-argument-inside-perl-script/32508849#32508849", "title": "way to fetch the argument inside perl script", "body": "<p>You have not passed any argument to the Perl script.</p>\n\n<p>You redirected the Perl script itself so it comes from standard input; that means that the piped output goes nowhere and cannot be seen by Perl.</p>\n\n<p>Reconsider how you're invoking your script.  Maybe:</p>\n\n<pre><code>perl script.pl \"abc\"\n</code></pre>\n\n<p>where <code>script.pl</code> is a file that contains the Perl script you used as a here-document.  Or simply make that script executable (perhaps without the <code>.pl</code> suffix).</p>\n"}, {"tags": [], "owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "is_accepted": false, "score": 1, "last_activity_date": 1441908710, "creation_date": 1441908710, "answer_id": 32508942, "question_id": 32508709, "link": "https://stackoverflow.com/questions/32508709/way-to-fetch-the-argument-inside-perl-script/32508942#32508942", "title": "way to fetch the argument inside perl script", "body": "<p>The precise command line you have there may be your problem, if that is what you're actually executing. What you are saying there is \"put 'abc' on the standard input of the next thing in the pipeline. Now run a Perl script consisting of a single comment.\" </p>\n\n<p>This will do nothing, because there's nothing executable in that Perl script. Try this:</p>\n\n<pre><code>echo \"abc\" | perl -e 'print &lt;STDIN&gt;'\n</code></pre>\n\n<p>If you have a short Perl script the <code>-e</code> option is the way to go.</p>\n"}, {"tags": [], "owner": {"reputation": 263, "user_id": 4544319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5d424615459eed99418ce56f93de90?s=128&d=identicon&r=PG", "display_name": "The Sidhekin", "link": "https://stackoverflow.com/users/4544319/the-sidhekin"}, "is_accepted": false, "score": 0, "last_activity_date": 1441919583, "last_edit_date": 1441919583, "creation_date": 1441909401, "answer_id": 32509125, "question_id": 32508709, "link": "https://stackoverflow.com/questions/32508709/way-to-fetch-the-argument-inside-perl-script/32509125#32509125", "title": "way to fetch the argument inside perl script", "body": "<p>Your problem is that both the pipe and the here-document redirect the STDIN.  And the here-document wins, so the perl process never sees the pipe; it gets the script on STDIN (and has read to EOF before running the script, so that will see STDIN at EOF).</p>\n\n<p>Observe:</p>\n\n<pre><code>$ echo \"abc\" | perl &lt;&lt;'EOF'\nprint \"[What have we here?]\\n\";\nseek(STDIN, 0, 0);\nprint &lt;STDIN&gt;;\nprint \"[Well, what do you know ...]\\n\";\nEOF\n[What have we here?]\nprint \"[What have we here?]\\n\";\nseek(STDIN, 0, 0);\nprint &lt;STDIN&gt;;\nprint \"[Well, what do you know ...]\\n\";\n[Well, what do you know ...]\n$\n</code></pre>\n\n<p>Moral: Don't try to mix pipes and here-documents in the shell. :)</p>\n"}], "owner": {"reputation": 9619, "user_id": 534617, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7cd10a43f8fab06f82c32ace961f9fa0?s=128&d=identicon&r=PG", "display_name": "Qiang Li", "link": "https://stackoverflow.com/users/534617/qiang-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1441919583, "creation_date": 1441907953, "question_id": 32508709, "link": "https://stackoverflow.com/questions/32508709/way-to-fetch-the-argument-inside-perl-script", "title": "way to fetch the argument inside perl script", "body": "<p>I am having some trouble of getting the argument passed in in the following script</p>\n\n<pre><code>echo \"abc\"|perl &lt;&lt;'EOF'\n#how to get \"abc\". it seems not $ARGV[0] nor in &lt;STDIN&gt;\nEOF\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["perl", "count", "latex"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1441898652, "post_id": 32503093, "comment_id": 52870944, "body": "Which part doesn&#39;t work? Can you run that exact thing on the command line? Does it work if you run the batch file from command line? Do you think the problem is with the perl code, with the batch code or with TexStudio running the batch file?"}, {"owner": {"reputation": 3, "user_id": 5321416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/508c5b4beb0cb446d25cef702ef7e66b?s=128&d=identicon&r=PG&f=1", "display_name": "Cervo Hillary", "link": "https://stackoverflow.com/users/5321416/cervo-hillary"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1441916166, "post_id": 32503093, "comment_id": 52880790, "body": "I think the problem is TexStudio running the batch file. The % gives you the name of the file without the extension and ?ame gives you the full path, name and extension. I think the syntax is wrong which is why TexCount isnt getting the right file(s)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1441917656, "post_id": 32503093, "comment_id": 52881511, "body": "Change the batch file to just output stuff. Maybe to a fixed file of the window closes immediately, or put a break. Then you can see what it fills in."}, {"owner": {"reputation": 3, "user_id": 5321416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/508c5b4beb0cb446d25cef702ef7e66b?s=128&d=identicon&r=PG&f=1", "display_name": "Cervo Hillary", "link": "https://stackoverflow.com/users/5321416/cervo-hillary"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1441961963, "post_id": 32503093, "comment_id": 52896734, "body": "I dont really know how to do that, could you give an example please?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7906906, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/95d2fe1ece2562d54155eab458205e66?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/7906906/thomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1492889351, "last_edit_date": 1492889351, "creation_date": 1492887993, "answer_id": 43563458, "question_id": 32503093, "link": "https://stackoverflow.com/questions/32503093/texstudio-and-texcount-user-command/43563458#43563458", "title": "TexStudio and TexCount User Command", "body": "<p>I could get this to work on my mac, you may need some adjustments for other OSs and/or other directory structures.</p>\n\n<ol>\n<li><p>I created a script that calls texcount, as follows:</p>\n\n<pre><code>#!/bin/bash\nperl /CorrectPath/texcount.pl -v0 -sum -html \"$1*\" &gt;tempdoc.html\nopen tempdoc.html\n</code></pre></li>\n<li><p>In TexStudio, my user command looks like this:</p>\n\n<pre><code>\"/CorrectPath/count_pdf_words.sh\" ?ame\"\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 67, "user_id": 5791272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ccd2ba5f67ba2dad25b7813b40553be?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Jones", "link": "https://stackoverflow.com/users/5791272/sam-jones"}, "is_accepted": false, "score": 0, "last_activity_date": 1497556777, "last_edit_date": 1497556777, "creation_date": 1497556390, "answer_id": 44575890, "question_id": 32503093, "link": "https://stackoverflow.com/questions/32503093/texstudio-and-texcount-user-command/44575890#44575890", "title": "TexStudio and TexCount User Command", "body": "<p>I've managed to get it working using the TexStudio User Commands.</p>\n\n<p>In the Menus,</p>\n\n<blockquote>\n  <p>Options > Configure TeXStudio</p>\n</blockquote>\n\n<p>Then,</p>\n\n<blockquote>\n  <p>Build > User Commands</p>\n</blockquote>\n\n<p>I created my own user command with the name \"texcount\".</p>\n\n<pre><code>texcount %.tex -inc -total\n</code></pre>\n\n<p>This runs the texcount script;</p>\n\n<ul>\n<li>on the current file (that's what the % is for),</li>\n<li>it includes the files that use \\input{},</li>\n<li>it provides a total.</li>\n</ul>\n\n<p>I can now run this command from:</p>\n\n<blockquote>\n  <p>Tools > User > (Number of user command: name of user command) e.g. 1:\n  texcount</p>\n</blockquote>\n\n<p>Then the results are output in the messages tab.</p>\n\n<p>Hope that helps.</p>\n\n<p>EDIT: To more specifically produce a html file. I imagine you could use the html commands to produce your html file as shown in Thomas' answer.</p>\n\n<p>You could then pipe the output to something like wkhtmltopdf to produce a pdf from the html file and show it using the default TeXstudio pdf viewer.</p>\n"}], "owner": {"reputation": 3, "user_id": 5321416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/508c5b4beb0cb446d25cef702ef7e66b?s=128&d=identicon&r=PG&f=1", "display_name": "Cervo Hillary", "link": "https://stackoverflow.com/users/5321416/cervo-hillary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 959, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1497556777, "creation_date": 1441891256, "question_id": 32503093, "link": "https://stackoverflow.com/questions/32503093/texstudio-and-texcount-user-command", "title": "TexStudio and TexCount User Command", "body": "<p>Im trying to incorporate TexCount into Tex Studio.</p>\n\n<p>Ive gotten the perl script working in the command line, but I would like it done in TexStudio automatically.</p>\n\n<p>I have adapted a bat file, but it doesnt work:</p>\n\n<pre><code>@echo off\nC:\\texlive\\2015\\texmf-dist\\scripts\\texcount\\texcount.pl -html -inc \"?ame\" &gt; \"%\".html\n\"%\".html\n</code></pre>\n\n<p>However I tinker with the syntax it doesnt seem to work and at the very most I can get it to produce a blank html file \"_count.html\"</p>\n\n<p>Can anybody get this .bat file working please?</p>\n"}, {"tags": ["perl", "system"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 6, "last_activity_date": 1441889244, "creation_date": 1441889244, "answer_id": 32502343, "question_id": 32502243, "link": "https://stackoverflow.com/questions/32502243/my-perl-script-runs-a-system-command-i-want-the-output-as-a-string-for-the-rest/32502343#32502343", "title": "My Perl Script runs a system command, I want the output as a string for the rest of the script, how can this be accomplished?", "body": "<p>To capture output of an external command, use backticks or <code>qx</code>:</p>\n\n<pre><code>my $output = qx{echo schwifty};\ndie unless $output =~ /schw/;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1001, "user_id": 3156898, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/53b9baf7830447e6294326a609b8e688?s=128&d=identicon&r=PG&f=1", "display_name": "thonnor", "link": "https://stackoverflow.com/users/3156898/thonnor"}, "is_accepted": false, "score": 0, "last_activity_date": 1441892047, "creation_date": 1441892047, "answer_id": 32503389, "question_id": 32502243, "link": "https://stackoverflow.com/questions/32502243/my-perl-script-runs-a-system-command-i-want-the-output-as-a-string-for-the-rest/32503389#32503389", "title": "My Perl Script runs a system command, I want the output as a string for the rest of the script, how can this be accomplished?", "body": "<p>For multi-line system calls such as <code>ls</code> I tend to use an @array to store the output. More flexible than a variable when there are lots of lines to process.</p>\n\n<p>Very similar to choroba's example but expanded a little further.</p>\n\n<pre><code>my @output = qx{ ls -l };\n\nforeach my $line ( @output )\n{\n    # process each $line here\n    print \"$line\";\n}\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 5164527, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/10153040192953595/picture?type=large", "display_name": "driedupsharpie", "link": "https://stackoverflow.com/users/5164527/driedupsharpie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "closed_date": 1443136422, "accepted_answer_id": 32502343, "answer_count": 2, "score": -1, "last_activity_date": 1441900256, "creation_date": 1441888992, "last_edit_date": 1441900256, "question_id": 32502243, "link": "https://stackoverflow.com/questions/32502243/my-perl-script-runs-a-system-command-i-want-the-output-as-a-string-for-the-rest", "closed_reason": "Duplicate", "title": "My Perl Script runs a system command, I want the output as a string for the rest of the script, how can this be accomplished?", "body": "<p>For example if my script was the following:</p>\n\n<pre><code>#! /bin/perl\nuse strict;\nuse warnings;\n\nsystem('echo schwifty')\n</code></pre>\n\n<p>-how could I get the output on my terminal (schwifty) into a string that I could continue on with my script using?</p>\n\n<p>NOTE: \"echo\" is just given as an example I'm using other commands that print to the screen.</p>\n"}, {"tags": ["bash", "perl", "shell", "awk", "sed"], "comments": [{"owner": {"reputation": 59167, "user_id": 134713, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5143bb3f979be36f8508d2605b215a4d?s=128&d=identicon&r=PG", "display_name": "Vijay", "link": "https://stackoverflow.com/users/134713/vijay"}, "edited": false, "score": 0, "creation_date": 1441888265, "post_id": 32501883, "comment_id": 52863181, "body": "what is a record here?"}, {"owner": {"reputation": 9362, "user_id": 2885763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/l4VVG.jpg?s=128&g=1", "display_name": "NeronLeVelu", "link": "https://stackoverflow.com/users/2885763/neronlevelu"}, "edited": false, "score": 0, "creation_date": 1441888904, "post_id": 32501883, "comment_id": 52863608, "body": "and what do you try that failed  (and which error) ?"}, {"owner": {"reputation": 1, "user_id": 5321140, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WH9LB.png?s=128&g=1", "display_name": "Manni-de", "link": "https://stackoverflow.com/users/5321140/manni-de"}, "reply_to_user": {"reputation": 59167, "user_id": 134713, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5143bb3f979be36f8508d2605b215a4d?s=128&d=identicon&r=PG", "display_name": "Vijay", "link": "https://stackoverflow.com/users/134713/vijay"}, "edited": false, "score": 0, "creation_date": 1441892072, "post_id": 32501883, "comment_id": 52865970, "body": "@Vijay: One <b>record</b> is the lines with the <b>same</b> FilterRuleX number, e.g. all lines starting with <b>FilterRule2</b>."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1441890192, "creation_date": 1441890192, "answer_id": 32502691, "question_id": 32501883, "link": "https://stackoverflow.com/questions/32501883/numbering-multi-line-records-continuously-in-a-list/32502691#32502691", "title": "Numbering multi-line records continuously in a list", "body": "<p>Read the input in the \"paragraph mode\", one record a time. Change the rule number to the value you keep in a variable, increment it for each record:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\n$/ = '';                    # Read in the \"paragraph mode\".\nmy $record_id = 1;\nwhile (&lt;&gt;) {\n    s/^FilterRule[0-9]+/FilterRule$record_id/gm;\n    $record_id++;\n    print;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1441903484, "post_id": 32502810, "comment_id": 52873885, "body": "comments incorporated."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1441905359, "post_id": 32502810, "comment_id": 52874979, "body": "believe it or not, not putting a space between <code>-v</code> and <code>var=value</code> makes the script gawk-specific so it&#39;s best to just put a space in <code>-v RS= -v ORS=&#39;\\n\\n&#39;</code> so it&#39;ll work with any awk."}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 2, "last_activity_date": 1441903415, "last_edit_date": 1441903415, "creation_date": 1441890524, "answer_id": 32502810, "question_id": 32501883, "link": "https://stackoverflow.com/questions/32501883/numbering-multi-line-records-continuously-in-a-list/32502810#32502810", "title": "Numbering multi-line records continuously in a list", "body": "<p>awk to the rescue!</p>\n\n<pre><code>awk -vRS= -vORS=\"\\n\\n\" '{gsub(/FilterRule[0-9]*/,\"FilterRule\"NR)}1'\n</code></pre>\n\n<p>numbers the records starting from 1 consecutively.</p>\n"}, {"tags": [], "owner": {"reputation": 59167, "user_id": 134713, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5143bb3f979be36f8508d2605b215a4d?s=128&d=identicon&r=PG", "display_name": "Vijay", "link": "https://stackoverflow.com/users/134713/vijay"}, "is_accepted": false, "score": 0, "last_activity_date": 1441953195, "creation_date": 1441953195, "answer_id": 32516991, "question_id": 32501883, "link": "https://stackoverflow.com/questions/32501883/numbering-multi-line-records-continuously-in-a-list/32516991#32516991", "title": "Numbering multi-line records continuously in a list", "body": "<p>Removed the third record:</p>\n\n<pre><code>7&gt; cat temp\n#  filter rule1\nFilterrule1.match_message_facility = MME_E\nFilterrule1.match_message_process = -1\nFilterrule1.match_message_host = -1\nFilterrule1.not_matched_facility_to_log_to = MME_E\nFilterrule1.max_time_since_last_match_secs = 300\n\n\n# incoming files\nFilterrule2.match_message_facility = EXG\nFilterrule2.match_message_event_severity = I\nFilterrule2.match_message_host = -1\nFilterrule2.not_matched_facility_to_log_to = EXG\nFilterrule2.max_time_since_last_match_secs = 2000\n\n\n# outgoing files: included headers\nFilterrule4.match_message_facility = EXG\nFilterrule4.match_message_event_severity = I\nFilterrule4.match_message_host = -1\nFilterrule4.not_matched_facility_to_log_to = EXG\nFilterrule4.max_time_since_last_match_secs = 900\n&gt;\n</code></pre>\n\n<p>Run the command:</p>\n\n<pre><code>perl -pi -lne '{$i++ if(/^#/);s/Filterrule./Filterrule$i/g;}' temp\n</code></pre>\n\n<p>Numbering will changed now and will be sequential.</p>\n"}], "owner": {"reputation": 1, "user_id": 5321140, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WH9LB.png?s=128&g=1", "display_name": "Manni-de", "link": "https://stackoverflow.com/users/5321140/manni-de"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1441953195, "creation_date": 1441887988, "question_id": 32501883, "link": "https://stackoverflow.com/questions/32501883/numbering-multi-line-records-continuously-in-a-list", "title": "Numbering multi-line records continuously in a list", "body": "<p>I am trying to re-number records in a file continuously after inserting or removing a record. The file looks like below, with > 100 records. If e.g. the 2nd record has been removed, all the following ones need to be re-numbered, so that there is no gap in sequence. Any idea how this can be done in e.g. bash or awk (or perl) ... also if it is just in theory.</p>\n\n<p>record-file.txt:</p>\n\n<pre><code>#  filter rule1\nFilterRule1.match_message_facility = MME_E\nFilterRule1.match_message_process = -1\nFilterRule1.match_message_host = -1\nFilterRule1.not_matched_facility_to_log_to = MME_E\nFilterRule1.max_time_since_last_match_secs = 300\n\n\n# incoming files \nFilterRule2.match_message_facility = EXG\nFilterRule2.match_message_event_severity = I\nFilterRule2.match_message_host = -1\nFilterRule2.not_matched_facility_to_log_to = EXG\nFilterRule2.max_time_since_last_match_secs = 2000\n\n# outgoing files  \nFilterRule3.match_message_facility = EXG\nFilterRule3.match_message_event_severity = I\nFilterRule3.match_message_host = -1\nFilterRule3.not_matched_facility_to_log_to = EXG\nFilterRule3.max_time_since_last_match_secs = 14400\n\n# outgoing files: included headers\nFilterRule4.match_message_facility = EXG\nFilterRule4.match_message_event_severity = I\nFilterRule4.match_message_host = -1\nFilterRule4.not_matched_facility_to_log_to = EXG\nFilterRule4.max_time_since_last_match_secs = 900\n\n...\n</code></pre>\n"}, {"tags": ["regex", "perl", "unicode"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1441887589, "post_id": 32501596, "comment_id": 52862693, "body": "What does <code>$mail_body</code> look like if you output it?"}, {"owner": {"reputation": 12977, "user_id": 4453262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b98c905b863b482c3d1d6616d3482b54?s=128&d=identicon&r=PG&f=1", "display_name": "karthik manchala", "link": "https://stackoverflow.com/users/4453262/karthik-manchala"}, "edited": false, "score": 1, "creation_date": 1441887602, "post_id": 32501596, "comment_id": 52862705, "body": "It is showing a match here: <a href=\"https://regex101.com/r/iO5aL8/2\" rel=\"nofollow noreferrer\">regex101.com/r/iO5aL8/2</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 12977, "user_id": 4453262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b98c905b863b482c3d1d6616d3482b54?s=128&d=identicon&r=PG&f=1", "display_name": "karthik manchala", "link": "https://stackoverflow.com/users/4453262/karthik-manchala"}, "edited": false, "score": 0, "creation_date": 1441887687, "post_id": 32501596, "comment_id": 52862764, "body": "@karthikmanchala that is php&#39;s pcre regex engine and you just copied the text the OP copied in here, most likely from his email program. Perl&#39;s internal regex engine is a different story, and the content of OP&#39;s variable is not necessarily the same as the email program lets them copy."}, {"owner": {"reputation": 12977, "user_id": 4453262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b98c905b863b482c3d1d6616d3482b54?s=128&d=identicon&r=PG&f=1", "display_name": "karthik manchala", "link": "https://stackoverflow.com/users/4453262/karthik-manchala"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1441887948, "post_id": 32501596, "comment_id": 52862966, "body": "@simbabque pcre means &quot;perl compatible regular expressions&quot;, which should work with perl&#39;s internal regex engine."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 12977, "user_id": 4453262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b98c905b863b482c3d1d6616d3482b54?s=128&d=identicon&r=PG&f=1", "display_name": "karthik manchala", "link": "https://stackoverflow.com/users/4453262/karthik-manchala"}, "edited": false, "score": 1, "creation_date": 1441888540, "post_id": 32501596, "comment_id": 52863372, "body": "@karthikmanchala I know. But it&#39;s <i>compatible</i>. Not the same."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1441888596, "post_id": 32501596, "comment_id": 52863416, "body": "You can actually use <code>&#47;Total:\\s+\\xE2\\x82\\xB9\\s+(\\d+)&#47;</code>."}, {"owner": {"reputation": 2039, "user_id": 2606322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81d55d81af159f254ba12f0254ed2622?s=128&d=identicon&r=PG", "display_name": "azt", "link": "https://stackoverflow.com/users/2606322/azt"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1441889390, "post_id": 32501596, "comment_id": 52863941, "body": "%342%202%271%302%240 translates to e2 82 b9 c2 a0, so @stribizhev&#39;s method should work. Side note: (\\d+(.\\d*)?) captures also the parts after the comma."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1441891474, "post_id": 32502423, "comment_id": 52865487, "body": "Yeah, the issue is that wherever that data is coming from, it wasn&#39;t decoded (and so is still a bunch of bytes, not unicode text)."}, {"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "edited": false, "score": 0, "creation_date": 1441891944, "post_id": 32502423, "comment_id": 52865876, "body": "Thanks, how do I fix this?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "edited": false, "score": 1, "creation_date": 1441891974, "post_id": 32502423, "comment_id": 52865896, "body": "@Pradeep Where does your text (<code>$mail_body</code>) come from?"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "edited": false, "score": 0, "creation_date": 1441892155, "post_id": 32502423, "comment_id": 52866036, "body": "@Pradeep: you can take a look at this module to try to find the current encoding: <a href=\"http://perldoc.perl.org/Encode/Guess.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/Encode/Guess.html</a> and convert it to utf8"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1441892722, "post_id": 32502423, "comment_id": 52866467, "body": "@CasimiretHippolyte Ew. You should never guess encodings if you can avoid it."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1441889443, "creation_date": 1441889443, "answer_id": 32502423, "question_id": 32501596, "link": "https://stackoverflow.com/questions/32501596/unable-to-match-indian-rupee-currency-symbol-using-regex-in-perl/32502423#32502423", "title": "Unable to match Indian Rupee currency symbol using regex in Perl", "body": "<p>This is a bit of searching for the explanation, not an outright answer. Please bear with me.</p>\n\n<hr>\n\n<p>I believe your <code>$mail_body</code> does not contain what you think it does. You posted the input data as plain text. Was that copied from a mail client?</p>\n\n<p>If I take the code and the input data from the question and run it with <code>use re 'debug'</code> I get a different output.</p>\n\n<pre><code>use utf8;\nuse strict;\nuse warnings;\nuse re 'debug';\n\nmy $mail_body = qq{Total: \u20b9 131.84\n\nThanks for choosing Uber, Pradeep};\n\nif ( $mail_body =~ /Total: \\x{20B9} (\\d+)/ ) {\n    my $amount = $1;\n}\n</code></pre>\n\n<p>It will produce this:</p>\n\n<pre><code>Compiling REx \"Total: \\x{20B9} (\\d+)\"\nFinal program:\n   1: EXACT &lt;Total: \\x{20b9} &gt; (5)\n   5: OPEN1 (7)\n   7:   PLUS (9)\n   8:     POSIXU[\\d] (0)\n   9: CLOSE1 (11)\n  11: END (0)\nanchored utf8 \"Total: %x{20b9} \" at 0 (checking anchored) minlen 10 \nMatching REx \"Total: \\x{20B9} (\\d+)\" against \"Total: %x{20b9} 131.84%n%nThanks for choosing Uber, Pradeep\"\nUTF-8 pattern and string...\nIntuit: trying to determine minimum start position...\n  Found anchored substr \"Total: %x{20b9} \" at offset 0...\n  (multiline anchor test skipped)\nIntuit: Successfully guessed: match at offset 0\n   0 &lt;&gt; &lt;Total: &gt;            |  1:EXACT &lt;Total: \\x{20b9} &gt;(5)\n  11 &lt; %x{20b9} &gt; &lt;131.84%n%n&gt;|  5:OPEN1(7)\n  11 &lt; %x{20b9} &gt; &lt;131.84%n%n&gt;|  7:PLUS(9)\n                                  POSIXU[\\d] can match 3 times out of 2147483647...\n  14 &lt;%x{20b9} 131&gt; &lt;.84%n%nTha&gt;|  9:  CLOSE1(11)\n  14 &lt;%x{20b9} 131&gt; &lt;.84%n%nTha&gt;| 11:  END(0)\nMatch successful!\nFreeing REx: \"Total: \\x{20B9} (\\d+)\"\n</code></pre>\n\n<p>Let's compare the line with the <em>Matching REx</em> to your output:</p>\n\n<pre><code>against against \"Total: %x{20b9} 131.84%n%nThanks for choosing Uber, Pradeep\"\nagainst \"Total: %342%202%271%302%240131.84%n%nThanks for choosing Ube\"...\n</code></pre>\n\n<p>As we can see, there my output has <code>%x{e2}</code> and so on, while yours has <code>%342</code>.</p>\n\n<p>When I started trying this code I forgot to put <code>use utf8</code> in my code, so I got a bunch of single characters when the regex engine tried to match:</p>\n\n<pre><code>%x{e2}%x{82}%x{b9}\n</code></pre>\n\n<p>It then rejected the match.</p>\n\n<p>So my conclusion is: <strong>Perl doesn't know your input data is utf8.</strong></p>\n"}, {"comments": [{"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "edited": false, "score": 0, "creation_date": 1441951730, "post_id": 32504197, "comment_id": 52891400, "body": "Thanks @melpomene used decode sub-routine and used this &quot;$mail_body =~ /Total: \\x{20B9}(?:\\x{00A0}|\\x{C2A0}|\\s)(\\d+(.\\d*)?)/&quot; Works!"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1441894170, "creation_date": 1441894170, "answer_id": 32504197, "question_id": 32501596, "link": "https://stackoverflow.com/questions/32501596/unable-to-match-indian-rupee-currency-symbol-using-regex-in-perl/32504197#32504197", "title": "Unable to match Indian Rupee currency symbol using regex in Perl", "body": "<p><em>Disclaimer:</em> This feels more like a comment than an answer, but I need more space.</p>\n\n<p>I've never used <a href=\"https://metacpan.org/pod/MIME::Parser\" rel=\"nofollow\"><code>MIME::Parser</code></a> and friends before, but from what I've read in the documentation, the following might work:</p>\n\n<pre><code>use Encode qw(decode);\n\n# according to your code, $text_mail is a MIME::Entity object\nmy $charset = $text_mail-&gt;head-&gt;mime_attr('content-type.charset');\nmy $mail_body_raw = $text_mail-&gt;bodyhandle-&gt;as_string;\n\nmy $mail_body = decode $charset, $mail_body_raw;\n</code></pre>\n\n<p>The idea is to get the charset from the <code>MIME::Head</code> object, then use <a href=\"https://metacpan.org/pod/Encode\" rel=\"nofollow\"><code>Encode</code></a> to decode the body accordingly.</p>\n\n<p>Of course, if you know that it's always going to be UTF-8 text, you could also hardcode that:</p>\n\n<pre><code>my $mail_body = decode 'UTF-8', $mail_body_raw;\n</code></pre>\n\n<hr>\n\n<p>After that, your regex may still fail to work because according to the debugging output in your question the character between \u20b9 and the number is actually not a simple space (ASCII 32, U+0020), but a non-breaking space (U+00A0). You should be able to match that with <code>\\s</code>:</p>\n\n<pre><code>if ( $mail_body =~ /Total: \\x{20B9}\\s(\\d+)/ ) {\n</code></pre>\n"}], "owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 579, "favorite_count": 0, "accepted_answer_id": 32504197, "answer_count": 2, "score": 3, "last_activity_date": 1441894211, "creation_date": 1441887287, "last_edit_date": 1441894211, "question_id": 32501596, "link": "https://stackoverflow.com/questions/32501596/unable-to-match-indian-rupee-currency-symbol-using-regex-in-perl", "title": "Unable to match Indian Rupee currency symbol using regex in Perl", "body": "<p>Following is my text:</p>\n\n<pre><code>Total: \u20b9\u00a0131.84\n\nThanks for choosing Uber, Pradeep\n</code></pre>\n\n<p>I would like to match the amount part, using the following code:</p>\n\n<pre><code>if ( $mail_body =~ /Total: \\x{20B9} (\\d+)/ ) {\n    $amount = $1;\n}\n</code></pre>\n\n<p>But, it does not match, tried using regex debugging, here's the output:</p>\n\n<pre><code>Compiling REx \"Total: \\x{20B9} (\\d+)\"\nFinal program:\n   1: EXACT &lt;Total: \\x{20b9} &gt; (5)\n   5: OPEN1 (7)\n   7:   PLUS (9)\n   8:     DIGIT (0)\n   9: CLOSE1 (11)\n  11: END (0)\nanchored utf8 \"Total: %x{20b9} \" at 0 (checking anchored) minlen 10\nMatching REx \"Total: \\x{20B9} (\\d+)\" against \"Total: %342%202%271%302%240131.84%n%nThanks for choosing Ube\"...\nUTF-8 pattern...\nMatch failed\nFreeing REx: \"Total: \\x{20B9} (\\d+)\"\n</code></pre>\n\n<p>The full code is at <a href=\"http://pastebin.com/TGdFX7hg\" rel=\"nofollow\">http://pastebin.com/TGdFX7hg</a>.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 3, "last_activity_date": 1441887002, "creation_date": 1441887002, "answer_id": 32501513, "question_id": 32501278, "link": "https://stackoverflow.com/questions/32501278/perl-script-to-open-a-file-and-read-a-string/32501513#32501513", "title": "Perl script to open a file and read a string", "body": "<pre><code>use strict;\nuse warnings;\nopen (my $fh, \"&lt;\", \"file.txt\") or die $!;\nwhile(&lt;$fh&gt;){\n    if ($_ = /test_reg_ip = (.*)/){\n        my $ip = $1;\n        print \"IP is $ip\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 186, "user_id": 5143990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4958f434d358944688c7f01989120400?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Trindade", "link": "https://stackoverflow.com/users/5143990/jos%c3%a9-trindade"}, "is_accepted": false, "score": 1, "last_activity_date": 1441887150, "creation_date": 1441887150, "answer_id": 32501559, "question_id": 32501278, "link": "https://stackoverflow.com/questions/32501278/perl-script-to-open-a-file-and-read-a-string/32501559#32501559", "title": "Perl script to open a file and read a string", "body": "<p>you need a regexp. try something like this: </p>\n\n<pre><code>if ($row =~ /test_reg_ip\\s=\\s(\\d{1,3}\\.\\d{1,3}.\\d{1,3}.\\d{1,3})/) {\n   my  $foo = $1; # your IP goes here, on the first (and only matched group)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 2, "last_activity_date": 1441890191, "last_edit_date": 1441890191, "creation_date": 1441888855, "answer_id": 32502198, "question_id": 32501278, "link": "https://stackoverflow.com/questions/32501278/perl-script-to-open-a-file-and-read-a-string/32502198#32502198", "title": "Perl script to open a file and read a string", "body": "<p>This code assumes a few things, but if the config entries are consistently the same, you could iterate the entire file and store all the config details in a hash in case you need more of them later:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nopen my $fh, '&lt;', 'in.txt'\n  or die $!;\n\nmy %data;\n\nwhile (&lt;$fh&gt;){\n    if (/^(\\w+)\\s*=\\s*(.*)$/){\n        $data{$1} = $2;\n    }\n}\n\nprint \"$data{test_reg_ip}\\n\";\n\nprint \"$data{mon_server_ip}\\n\";\n</code></pre>\n"}], "owner": {"reputation": 297, "user_id": 3607869, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3fb399908c4a954de136cbc36cbf2500?s=128&d=identicon&r=PG&f=1", "display_name": "user3607869", "link": "https://stackoverflow.com/users/3607869/user3607869"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1441890191, "creation_date": 1441886299, "question_id": 32501278, "link": "https://stackoverflow.com/questions/32501278/perl-script-to-open-a-file-and-read-a-string", "title": "Perl script to open a file and read a string", "body": "<p>I know how to open a file and display entire content using perl script, but how can i read a string from file into a variable</p>\n\n<p>Following is to open file and display entire content</p>\n\n<pre><code>#!/usr/bin/perl \nuse strict;\nuse warnings;\n\nmy $filename = '/home/abc/data.txt';\nif (open(my $fh, '&lt;', $filename)) {\n  while (my $row = &lt;$fh&gt;) {\n    chomp $row;\n    print \"$row\\n\";\n  }\n} else {\n  warn \"Could not open file '$filename' $!\";\n}\n</code></pre>\n\n<p>My requirement is</p>\n\n<pre><code>   #!/usr/bin/perl \n    use strict;\n    use warnings;\n\n    my $filename = '/home/abc/data.txt';\n    my $foo = \"\"\n    if (open(my $fh, '&lt;', $filename)) {\n     ---- Read test_reg_ip string from data.txt into variable \n         $foo=test_reg_ip;\n    } else {\n      warn \"Could not open file '$filename' $!\";\n    }\n    print \"$foo\\n\";\n</code></pre>\n\n<p>Following is the input file data.txt</p>\n\n<pre><code>#############################################################################################\n# mon_server_ip\n# This parameter value should point to the IP address where the mon Server\n# is installed\n#############################################################################################\nmon_server_ip = 127.0.0.1\n\n#############################################################################################\n# test_reg_ip\n# This parameter value should point to the IP address where reg server is\n# installed\n#############################################################################################\ntest_reg_ip = 127.0.0.1\n\n#############################################################################################\n# mon_port\n# This parameter value should point to the mon port \n#############################################################################################\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 4793, "user_id": 1099230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d9d86aa069778820dfc676147d432c2d?s=128&d=identicon&r=PG", "display_name": "luoluo", "link": "https://stackoverflow.com/users/1099230/luoluo"}, "edited": false, "score": 0, "creation_date": 1441884162, "post_id": 32500323, "comment_id": 52860308, "body": "Why not using <code>string[start:end]</code> directly as you are using <code>python</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 2384, "user_id": 1933888, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5e290a2495e65b2d5a423d2ce7288f26?s=128&d=identicon&r=PG", "display_name": "user1933888", "link": "https://stackoverflow.com/users/1933888/user1933888"}, "edited": false, "score": 0, "creation_date": 1441884862, "post_id": 32500529, "comment_id": 52860809, "body": "you guys are amazing. and regex is amazing!"}], "tags": [], "owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "is_accepted": true, "score": 3, "last_activity_date": 1441884121, "creation_date": 1441884121, "answer_id": 32500529, "question_id": 32500323, "link": "https://stackoverflow.com/questions/32500323/traverse-over-a-string-twice-in-regex/32500529#32500529", "title": "Traverse over a string twice in regex", "body": "<pre><code> ^((.{3})(.{3}).{10})\n</code></pre>\n\n<p>You can use this.</p>\n\n<p>Here <code>group 1</code> will be <code>16 character string</code></p>\n\n<p><code>group 2</code> will be first <code>3</code> characters.</p>\n\n<p><code>group 3</code> will be next <code>3</code> characters.</p>\n\n<p><a href=\"https://regex101.com/r/fF8aN0/3\" rel=\"nofollow\">https://regex101.com/r/fF8aN0/3</a></p>\n\n<p>When you use this with <code>re.findall</code> you get a <code>list</code> of <code>3</code> values which is defined above.</p>\n"}], "owner": {"reputation": 2384, "user_id": 1933888, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5e290a2495e65b2d5a423d2ce7288f26?s=128&d=identicon&r=PG", "display_name": "user1933888", "link": "https://stackoverflow.com/users/1933888/user1933888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 32500529, "answer_count": 1, "score": 2, "last_activity_date": 1441886116, "creation_date": 1441883538, "last_edit_date": 1441886116, "question_id": 32500323, "link": "https://stackoverflow.com/questions/32500323/traverse-over-a-string-twice-in-regex", "title": "Traverse over a string twice in regex", "body": "<p>I have an input string something like (Actual string is much more complicated):</p>\n\n<pre><code>223001PAPA DUMMY\n</code></pre>\n\n<p>on this string i want to match the first 3 characters as one group and next 3 as another group and want to save the matches in variable's for further processing.</p>\n\n<p>regex I used:</p>\n\n<pre><code>(.{3})(.{3}).*\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/fF8aN0/1\" rel=\"nofollow\">regex 101 example 1</a></p>\n\n<p>Now on the same input string I would also want to match the whole string length i.e 16 in this case</p>\n\n<pre><code>(.{16}).*\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/fF8aN0/2\" rel=\"nofollow\">regex 101 example 2</a></p>\n\n<p>But i want to do both these operations in a single regex, i.e one match should match the complete input string and save in a variable and then another 2 matches for first and second 3 characters as shown above, is it possible?\nhow can I proceed? Tried backreference did not help much</p>\n"}]