[{"tags": ["perl", "strftime"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1523485234, "post_id": 49785085, "comment_id": 86585864, "body": "<i>Not</i> tested: <code>{local $ENV{LC_ALL}=&#39;C&#39;; print strftime &quot;%b %d, %Y&quot;, gmtime;}</code>"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 3, "creation_date": 1523487440, "post_id": 49785085, "comment_id": 86586530, "body": "See also <a href=\"https://gist.github.com/karupanerura/2027343\" rel=\"nofollow noreferrer\">this gist</a>."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1523538314, "post_id": 49785085, "comment_id": 86609104, "body": "<a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\"><code>DateTime</code></a> defaults to <code>en-US</code> unless explicitly changed: <code>use DateTime; print DateTime-&gt;now-&gt;strftime(&quot;%b %d, %Y&quot;);</code> prints <code>Apr 12, 2018</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "is_accepted": false, "score": 4, "last_activity_date": 1523518213, "creation_date": 1523518213, "answer_id": 49790496, "question_id": 49785085, "link": "https://stackoverflow.com/questions/49785085/use-different-language-than-locale-for-strftime-by-perl-script/49790496#49790496", "title": "Use different language than locale for strftime by perl script", "body": "<p>POSIX::setlocale is what you need</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse POSIX qw(setlocale strftime);\nprint strftime \"%a %b %d, %Y\", gmtime(time());\nsetlocale(POSIX::LC_ALL,'en_US.utf8');\nprint strftime \"%a %b %d, %Y\", gmtime(time());\nsetlocale(&amp;POSIX::LC_ALL,'de_DE.utf8');\nprint strftime \"%a %b %d, %Y\", gmtime(time());\n</code></pre>\n\n<p><a href=\"http://perldoc.perl.org/POSIX.html\" rel=\"nofollow noreferrer\">perldoc POSIX</a> should give additional info. Also see <a href=\"http://perldoc.perl.org/perllocale.html#The-setlocale-function\" rel=\"nofollow noreferrer\">this</a> about setting and resetting the locale.</p>\n"}], "owner": {"reputation": 61, "user_id": 9495076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0e20d815c07a771cbc3aab0e3328d?s=128&d=identicon&r=PG&f=1", "display_name": "F. Grela", "link": "https://stackoverflow.com/users/9495076/f-grela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 502, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1523518213, "creation_date": 1523484372, "question_id": 49785085, "link": "https://stackoverflow.com/questions/49785085/use-different-language-than-locale-for-strftime-by-perl-script", "title": "Use different language than locale for strftime by perl script", "body": "<p>My OS is in polish language. I need print month name in english by perl script.</p>\n\n<p>Locale:</p>\n\n<pre><code>LANG=pl_PL.UTF8\nLANGUAGE=\nLC_CTYPE=en_US.UTF-8\nLC_NUMERIC=pl_PL.UTF-8\nLC_TIME=\"pl_PL.UTF8\"\nLC_COLLATE=\"pl_PL.UTF8\"\nLC_MONETARY=pl_PL.UTF-8\nLC_MESSAGES=\"pl_PL.UTF8\"\nLC_PAPER=pl_PL.UTF-8\nLC_NAME=pl_PL.UTF-8\nLC_ADDRESS=pl_PL.UTF-8\nLC_TELEPHONE=pl_PL.UTF-8\nLC_MEASUREMENT=pl_PL.UTF-8\nLC_IDENTIFICATION=pl_PL.UTF-8\nLC_ALL=\n</code></pre>\n\n<p>Script:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse POSIX;\n\nprint strftime \"%b %d, %Y\", gmtime(time());\n</code></pre>\n\n<p>Output: <code>kwi 11, 2018</code>\nExpected: <code>Mar 11, 2018</code></p>\n\n<p>Is there any smarter solution than do <code>s/kwi/Mar/</code>?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1523484492, "post_id": 49785052, "comment_id": 86585643, "body": "How do you think the <code>$_</code> you are assigning to <code>$r</code> is defined and what its value is? If it is not defined then <code>$r</code> isn&#39;t either."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 4, "creation_date": 1523484803, "post_id": 49785052, "comment_id": 86585731, "body": "Use <a href=\"http://p3rl.org/strict\" rel=\"nofollow noreferrer\">strict</a> and <a href=\"http://p3rl.org/warnings\" rel=\"nofollow noreferrer\">warnings</a>. The <code>$r</code> used in the last line is not the same <code>$r</code> as the one declared in <code>printdata</code>, and you haven&#39;t assigned it any value."}, {"owner": {"reputation": 187, "user_id": 9632990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a85813191e396e799558c16c89a3e67c?s=128&d=identicon&r=PG&f=1", "display_name": "Shawn Way", "link": "https://stackoverflow.com/users/9632990/shawn-way"}, "edited": false, "score": 0, "creation_date": 1523490246, "post_id": 49785052, "comment_id": 86587226, "body": "I understand what is happening; I&#39;m looking for a way to not evaluate  the variables until &amp;heading function is called."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1523525110, "post_id": 49785052, "comment_id": 86599995, "body": "Please don&#39;t use <code>&amp;</code> on subroutine calls. It hasn&#39;t been necessary since Perl 5 was released in 1994."}], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 9632990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a85813191e396e799558c16c89a3e67c?s=128&d=identicon&r=PG&f=1", "display_name": "Shawn Way", "link": "https://stackoverflow.com/users/9632990/shawn-way"}, "edited": false, "score": 0, "creation_date": 1523530172, "post_id": 49786149, "comment_id": 86603373, "body": "Interesting! Thank you for the insightful answer"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1523492246, "creation_date": 1523492246, "answer_id": 49786149, "question_id": 49785052, "link": "https://stackoverflow.com/questions/49785052/variable-replacement-in-multiple-subroutines/49786149#49786149", "title": "Variable Replacement in multiple subroutines", "body": "<pre><code>sub printdata {\n    my $data      = shift;\n    my $formatter = shift;\n    for my $r (@$data) {\n       print $formatter-&gt;($r);\n    }\n}\n\n\nmy @data = qw(12 13 15);\n\nprintdata(\\@data, sub { \"Part-$_[0]\\n\" });\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 9632990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a85813191e396e799558c16c89a3e67c?s=128&d=identicon&r=PG&f=1", "display_name": "Shawn Way", "link": "https://stackoverflow.com/users/9632990/shawn-way"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 49786149, "answer_count": 1, "score": -1, "last_activity_date": 1523492246, "creation_date": 1523484154, "question_id": 49785052, "link": "https://stackoverflow.com/questions/49785052/variable-replacement-in-multiple-subroutines", "title": "Variable Replacement in multiple subroutines", "body": "<p>I have a subroutine that I'm trying to pass a string to and used within the subroutine.  A minimal code sample is below.</p>\n\n<pre><code>my $printsection=\"Part\";\nmy @data = qw(12 13 15);\n\nsub heading{\n  my $value= $_[0];\n  print \"$value\";\n}\n\nsub printdata{\n    my $label=$_[0];\n    foreach (@data) {\n       my $r = $_;\n       &amp;heading($label);\n    }\n}\n\n&amp;printdata(\"$printsection-$r\");\n</code></pre>\n\n<p>What I'm getting is a \"Use of uninitialized value $r in concatenation (.) or string at ...\" error and I understand why, but I don't know how to fix it in this particular case.  What I'm trying to get out of this is:</p>\n\n<pre><code>Part-12\nPart-13\nPart-15\n</code></pre>\n\n<p>Can someone give me some pointers on how to go about this?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1523483925, "post_id": 49785008, "comment_id": 86585480, "body": "Search for <a href=\"https://metacpan.org/pod/perlfunc#chomp\" rel=\"nofollow noreferrer\"><code>chomp</code></a>"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1523484306, "post_id": 49785008, "comment_id": 86585577, "body": "Your <code>while</code> doesn&#39;t have a <code>BLOCK</code>! <a href=\"https://perldoc.perl.org/perlsyn.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlsyn.html</a>"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1523484368, "post_id": 49785008, "comment_id": 86585592, "body": "You&#39;re missing a semicolon on the line with <code>open</code>."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 4, "creation_date": 1523484626, "post_id": 49785008, "comment_id": 86585690, "body": "The <code>while</code> is getting interpreted as a statement modifier, but if you had used <code>strict</code> and <code>warnings</code>, you would have seen <i>readline() on unopened filehandle PASSWD</i>. Moral of the story: <b>always</b> use <code>strict</code> and <code>warnings</code>!"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1523484721, "post_id": 49785008, "comment_id": 86585714, "body": "It kind of seems like you might just be guessing at Perl syntax and hoping that something will work..."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1523521107, "creation_date": 1523521107, "answer_id": 49791373, "question_id": 49785008, "link": "https://stackoverflow.com/questions/49785008/searching-etc-passwd-for-username/49791373#49791373", "title": "Searching /etc/passwd for username", "body": "<p>I assume the missing semicolon at the end of your <code>open()</code> line is a typo.</p>\n\n<p>Your <code>while</code> statement needs a block, not a semicolon.</p>\n\n<pre><code>while (&lt;PASSWD&gt;) {\n  ... # stuff\n}\n</code></pre>\n\n<p>When you run this line:</p>\n\n<pre><code>$username = &lt;STDIN&gt;;\n</code></pre>\n\n<p>Then <code>$username</code> will end containing all of the characters the user has typed at the command line. Crucially, that includes the newline character that was generated when they pressed the \"Enter\" key.</p>\n\n<p>You then go on to compare that variable with the first field from the records in <code>/etc/passwd</code>. Those fields don't contain a newline character, so the match never succeeds.</p>\n\n<p>You'll want to remove the newline from the end of <code>$username</code>. That's what <code>chomp()</code> is for.</p>\n\n<pre><code>chomp($username = &lt;STDIN&gt;);\n</code></pre>\n\n<p>Also, the <code>PASSWD</code> in your <code>if</code> statement is very strange. I'm not sure why you think it's necessary. It's not.</p>\n\n<pre><code>if ( (split(/:/)[0] =~ $username) {\n</code></pre>\n\n<p>But actually, a regex check is overkill here. You should be checking for string equality.</p>\n\n<pre><code>if ((split(/:/)[0] eq $username) {\n</code></pre>\n\n<p>A couple of other tips:</p>\n\n<ul>\n<li>Always <code>use strict</code> and <code>use warnings</code>.</li>\n<li><p>Use lexical variables for filehandles, use the three-argument version of <code>open()</code> and always check the return value from <code>open()</code></p>\n\n<pre><code>open my $passwd_fh, '&lt;', '/etc/passwd'\n  or die \"Cannot open /etc/passwd: $!\\n\";\n</code></pre></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 2, "last_activity_date": 1523538948, "creation_date": 1523538948, "answer_id": 49797603, "question_id": 49785008, "link": "https://stackoverflow.com/questions/49785008/searching-etc-passwd-for-username/49797603#49797603", "title": "Searching /etc/passwd for username", "body": "<p>Perl has built-in functions for that, see <a href=\"http://perldoc.perl.org/perlfunc.html#getpwnam-NAME\" rel=\"nofollow noreferrer\"><code>getpwnam</code></a> or <a href=\"http://perldoc.perl.org/User/pwent.html\" rel=\"nofollow noreferrer\"><code>User::pwent</code></a>:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nprint \"Username? \";\nchomp( my $username = &lt;STDIN&gt; );\n\ndie \"Unknown user $username\\n\" unless getpwnam($username);\n\nmy $dir = (getpwnam($username))[7];\nprint $dir, \"\\n\";\n\n# - or -\nuse User::pwent;\nprint getpwnam($username)-&gt;dir, \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 6132816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb1848bbf8584c4cc3ab4ef9d2974d3?s=128&d=identicon&r=PG&f=1", "display_name": "masral", "link": "https://stackoverflow.com/users/6132816/masral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 1, "answer_count": 2, "score": -2, "last_activity_date": 1523552007, "creation_date": 1523483808, "last_edit_date": 1523552007, "question_id": 49785008, "link": "https://stackoverflow.com/questions/49785008/searching-etc-passwd-for-username", "title": "Searching /etc/passwd for username", "body": "<p>I'm trying to search the <code>/etc/passwd</code> file for a username that the use unputs but I'm not sure about the <code>if</code> statement syntax. My current code is:</p>\n\n<pre><code>print \"Username?\";\n$username = &lt;STDIN&gt;;\n\nopen (PASSWD, '/etc/passwd')\n     while (&lt;PASSWD&gt;);\n          if (PASSWD ((split(/:/)[0] =~ $username)) {\n               print ((split(/:/)[5]), \"\\n\");\n          }\nclose (PASSWD);\n</code></pre>\n\n<p>Something is wrong with the syntax and I'm having difficulty finding the correct way despite searching stackoverflow and google. Any help would be appreciated.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1523473948, "post_id": 49782768, "comment_id": 86580868, "body": "Please explain more about the problem. In which way does the code you have shown not satisfy you?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1523474830, "post_id": 49782768, "comment_id": 86581332, "body": "It sounds like you want templating, e.g., <a href=\"http://template-toolkit.org\" rel=\"nofollow noreferrer\">Template Toolkit</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523475049, "post_id": 49782768, "comment_id": 86581445, "body": "This should be marked as a duplicate of <a href=\"https://stackoverflow.com/questions/1549685/how-can-i-use-a-variable-as-a-variable-name-in-perl\"><b><i>How can I use a variable as a variable name in Perl?</i></b></a> Unfortunately I missed my chance to do it myself."}, {"owner": {"reputation": 61, "user_id": 9495076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0e20d815c07a771cbc3aab0e3328d?s=128&d=identicon&r=PG&f=1", "display_name": "F. Grela", "link": "https://stackoverflow.com/users/9495076/f-grela"}, "edited": false, "score": 0, "creation_date": 1523475115, "post_id": 49782768, "comment_id": 86581483, "body": "Yes. I mean templating. Thanks."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523475283, "post_id": 49782768, "comment_id": 86581568, "body": "You shouldn&#39;t be asking the user to write software: that is your job. <i>&quot;I want the user to be able to choose the variables themselves in an accessible form&quot;</i> How can the user possibly know what variable identifiers you have used, so that they can select one?"}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1523475369, "post_id": 49782768, "comment_id": 86581622, "body": "<a href=\"https://metacpan.org/pod/perlfaq7#How-can-I-use-a-variable-as-a-variable-name\" rel=\"nofollow noreferrer\">metacpan.org/pod/&hellip;</a>"}, {"owner": {"reputation": 61, "user_id": 9495076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0e20d815c07a771cbc3aab0e3328d?s=128&d=identicon&r=PG&f=1", "display_name": "F. Grela", "link": "https://stackoverflow.com/users/9495076/f-grela"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523475413, "post_id": 49782768, "comment_id": 86581646, "body": "@Borodin: another explanation: its choose of columns in generated CSV file"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523475726, "post_id": 49782768, "comment_id": 86581793, "body": "If you move <code>require file.conf</code> to <i>after</i> the definitions of  <code>$from</code> and <code>$to</code> then your code should do as you ask. But your question is far from clear, and it isn&#39;t obvious what sorts of things you want to be able to do in general."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 9495076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0e20d815c07a771cbc3aab0e3328d?s=128&d=identicon&r=PG&f=1", "display_name": "F. Grela", "link": "https://stackoverflow.com/users/9495076/f-grela"}, "edited": false, "score": 0, "creation_date": 1523520388, "post_id": 49783831, "comment_id": 86597001, "body": "Thanks You very much! :) Working as I expected."}, {"owner": {"reputation": 61, "user_id": 9495076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0e20d815c07a771cbc3aab0e3328d?s=128&d=identicon&r=PG&f=1", "display_name": "F. Grela", "link": "https://stackoverflow.com/users/9495076/f-grela"}, "edited": false, "score": 0, "creation_date": 1523523401, "post_id": 49783831, "comment_id": 86598856, "body": "I have one more question: how send <code>$tt-&gt;process($template, $vars) </code> output to variable or external file? I mean do it correctly: <code>print $fh3 join (&quot;\\n&quot;, $tocsv-&gt;process($template, $vars));</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 61, "user_id": 9495076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0e20d815c07a771cbc3aab0e3328d?s=128&d=identicon&r=PG&f=1", "display_name": "F. Grela", "link": "https://stackoverflow.com/users/9495076/f-grela"}, "edited": false, "score": 1, "creation_date": 1523547492, "post_id": 49783831, "comment_id": 86616019, "body": "Use <code>\\$output</code> for <code>process</code>&#39;s third parameter"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1523478869, "last_edit_date": 1523478869, "creation_date": 1523477884, "answer_id": 49783831, "question_id": 49782768, "link": "https://stackoverflow.com/questions/49782768/use-variables-for-template/49783831#49783831", "title": "Use variables for template", "body": "<p>You are trying to create a template system. Instead, use an existing one.</p>\n\n<pre><code>use Template qw( );\n\nmy $from = '2017-01-01';\nmy $to   = '2017-04-12';\n\n# Name of a file or reference to string containing the template.\nmy $template = \\ \"[% from %] - [% to %]\";\n\nmy $vars = {\n   from =&gt; $from,\n   to   =&gt; $to,\n};\n\nmy $tt = Template-&gt;new({ });\n$tt-&gt;process($template, $vars)\n   or die($tt-&gt;error());\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 0, "last_activity_date": 1523478812, "creation_date": 1523478812, "answer_id": 49784060, "question_id": 49782768, "link": "https://stackoverflow.com/questions/49782768/use-variables-for-template/49784060#49784060", "title": "Use variables for template", "body": "<p>First, I fully second <a href=\"https://stackoverflow.com/a/49783831/9300627\">ikegami's answer</a> - it sounds like you're looking for a templating system like <a href=\"https://metacpan.org/pod/Template::Toolkit\" rel=\"nofollow noreferrer\"><code>Template::Toolkit</code></a>. While its syntax isn't exactly Perl, from what you write it sounds like your users aren't programmers, so templates like these might be better than giving them the full power of an entire programing language.</p>\n\n<p>Having said that, for the sake of completeness, the way to get your original code working is with <a href=\"http://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\"><code>eval</code></a>, since then, as opposed to <a href=\"http://perldoc.perl.org/functions/do.html\" rel=\"nofollow noreferrer\"><code>do</code></a>/<a href=\"http://perldoc.perl.org/functions/require.html\" rel=\"nofollow noreferrer\"><code>require</code></a>, the executed code will be able to see the lexicals <code>$from</code> and <code>$to</code>. As always, this comes with the <strong>warning</strong> that running this on user-supplied input can be <strong>dangerous</strong> since it allows the execution of arbitrary code. This produces your expected output:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $templ = do { open my $fh, '&lt;', 'file.conf' or die $!; local $/; &lt;$fh&gt; };\n\nmy $from = '2017-01-01';\nmy $to   = '2017-04-12';\nour $period;\n\neval \"$templ; 1\" or die $@;\n\nprint $period, \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9495076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0e20d815c07a771cbc3aab0e3328d?s=128&d=identicon&r=PG&f=1", "display_name": "F. Grela", "link": "https://stackoverflow.com/users/9495076/f-grela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 49783831, "answer_count": 2, "score": -1, "last_activity_date": 1523527045, "creation_date": 1523473731, "last_edit_date": 1523527045, "question_id": 49782768, "link": "https://stackoverflow.com/questions/49782768/use-variables-for-template", "title": "Use variables for template", "body": "<p>I do not know how to name even what I want to do, I know it's weird.</p>\n\n<p>I have a script and an external configuration file for this script. I want the user to be able to choose the variables themselves in an accessible form. Its something like template.</p>\n\n<h3>Script:</h3>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\n\nmy ($from, $to);\nour $period;\n\nrequire file.conf\n\n$from = '2017-01-01';\n$to   = '2017-04-12';\n\nprint $period;\n\nopen my $fh, '&gt;&gt;', 'file.txt' or die \"Cannot open!\";\nprint $fh join (\"\\n\", $period));\nclose $fh;\n</code></pre>\n\n<h3>file.conf</h3>\n\n<pre><code>$period = \"$from \\- $to\";\n1;\n</code></pre>\n\n<h3>Expected output:</h3>\n\n<pre><code>2017-01-01 - 2017-04-12\n</code></pre>\n\n<p>This same output should be in file.txt. This solution is not working, on define $period has undefinied variables $from and $to. I want use this line in different line of code.</p>\n\n<p>Is such an output in some way possible? I emphasize that the idea is to make the solution the most aesthetic and most simple for the user who has no idea what a subroutine, hash or even array is.</p>\n"}, {"tags": ["perl", "csh"], "comments": [{"owner": {"reputation": 1682, "user_id": 7220869, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ad096f6dde486ee6799b7e7834530db1?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse", "link": "https://stackoverflow.com/users/7220869/jesse"}, "edited": false, "score": 2, "creation_date": 1523467181, "post_id": 49780955, "comment_id": 86577396, "body": "Please share more details. Provide code in .csh file, so that, we can see what are you trying to do and possible syntax errors."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523469805, "post_id": 49780955, "comment_id": 86578781, "body": "Is that the <i>exact contents</i> of the two files? Please check."}, {"owner": {"reputation": 21, "user_id": 9512529, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215761020280326/picture?type=large", "display_name": "Rocky Zheng", "link": "https://stackoverflow.com/users/9512529/rocky-zheng"}, "edited": false, "score": 0, "creation_date": 1523470084, "post_id": 49780955, "comment_id": 86578916, "body": "actually not too much related code in these files. I pasted all code I have below. ( I paste the code in the original text ,not in comment )"}], "answers": [{"tags": [], "owner": {"reputation": 3136, "user_id": 1596460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fwyxG.jpg?s=128&g=1", "display_name": "0112", "link": "https://stackoverflow.com/users/1596460/0112"}, "is_accepted": true, "score": 0, "last_activity_date": 1524590680, "creation_date": 1524590680, "answer_id": 50007579, "question_id": 49780955, "link": "https://stackoverflow.com/questions/49780955/how-to-call-a-perl-program-from-a-csh-script/50007579#50007579", "title": "How to call a Perl program from a csh script", "body": "<p>The backticks in your program are returning the output of the perl script.  Then csh tries to execute that output as csh.  toolic's comment telling you to remove the backticks is correct: <code>perl a.pl</code>.  Reading more about <a href=\"https://unix.stackexchange.com/a/27432/40507\">how backticks work</a> might be useful.</p>\n"}], "owner": {"reputation": 21, "user_id": 9512529, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215761020280326/picture?type=large", "display_name": "Rocky Zheng", "link": "https://stackoverflow.com/users/9512529/rocky-zheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 0, "accepted_answer_id": 50007579, "answer_count": 1, "score": -2, "last_activity_date": 1524590680, "creation_date": 1523466824, "last_edit_date": 1523470294, "question_id": 49780955, "link": "https://stackoverflow.com/questions/49780955/how-to-call-a-perl-program-from-a-csh-script", "title": "How to call a Perl program from a csh script", "body": "<p>I have this simple code to execute, but have failed.</p>\n\n<h3>a.csh</h3>\n\n<pre><code>#! /bin/csh -f\n\n`perl a.pl`\n</code></pre>\n\n<h3>a.pl</h3>\n\n<pre><code>#use perl\n    eval 'exec perl -w -S $0 ${1+\"$@\"}'\n    if 0;\n\nuse Cwd;\n\nprint \"here.\\n\";\n</code></pre>\n\n<p>When I run <code>a.csh</code>, it reports an error as below.</p>\n\n<blockquote>\n  <p>here: Command not found</p>\n</blockquote>\n\n<p>I am not sure what that means; any suggestion is welcome.</p>\n"}, {"tags": ["perl", "utf-8"], "comments": [{"owner": {"reputation": 1332, "user_id": 2170917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e4bde8f118dd0095d6ba07e2a5bc3aa?s=128&d=identicon&r=PG", "display_name": "Nikola Benes", "link": "https://stackoverflow.com/users/2170917/nikola-benes"}, "edited": false, "score": 0, "creation_date": 1523463329, "post_id": 49779911, "comment_id": 86575283, "body": "OK, so a quick solution is to run <code>utf8::decode($output)</code> after closing `$oh$, but is there no better solution?"}], "answers": [{"comments": [{"owner": {"reputation": 1332, "user_id": 2170917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e4bde8f118dd0095d6ba07e2a5bc3aa?s=128&d=identicon&r=PG", "display_name": "Nikola Benes", "link": "https://stackoverflow.com/users/2170917/nikola-benes"}, "edited": false, "score": 0, "creation_date": 1523464378, "post_id": 49780123, "comment_id": 86575956, "body": "OK, I understand that I have to run utf8::decode or decode_utf8 on the variable and that there is no better solution. Thanks."}, {"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 0, "creation_date": 1523464391, "post_id": 49780123, "comment_id": 86575967, "body": "Dumb question for clarity:  While <code>utf8</code> ne <code>utf-8</code>, is <code>utf-8</code> eq <code>UTF-8</code>, for purposes of <code>:encoding()</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 2, "creation_date": 1523464410, "post_id": 49780123, "comment_id": 86575980, "body": "@Jim Davis, Encoding names are case-insensitive."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 8, "last_activity_date": 1523465610, "last_edit_date": 1523465610, "creation_date": 1523463782, "answer_id": 49780123, "question_id": 49779911, "link": "https://stackoverflow.com/questions/49779911/perl-utf8-output-to-a-variable/49780123#49780123", "title": "Perl UTF8 output to a variable", "body": "<p>First of all, <code>:encoding(utf8)</code> should be <code>:encoding(utf-8)</code>.</p>\n\n<ul>\n<li><code>UTF-8</code> is the well known encoding standard.</li>\n<li><code>utf8</code> is a Perl-specific extension to UTF-8.</li>\n</ul>\n\n<p><a href=\"https://stackoverflow.com/q/49038533/589924\">Reference</a></p>\n\n<p>(Encoding names are case-insensitive.)</p>\n\n<hr>\n\n<p><code>use open qw( :std :encoding(utf8) );</code> has two effects:</p>\n\n<ul>\n<li>It adds <code>:encoding(utf8)</code> to <code>STDIN</code>, <code>STDOUT</code> and <code>STDERR</code>.</li>\n<li>It sets the default layer for <code>open</code> in the lexical scope of the <code>use</code> to <code>:encoding(utf8)</code>.</li>\n</ul>\n\n<p>So,</p>\n\n<pre><code>use utf8;\nuse open qw( :std :encoding(UTF-8) );\n\n# String of decoded text aka string of Unicode Code Points, thanks to `use utf8`.\nmy $text_ucp = \"\u017dlu\u0165ou\u010dk\u00fd k\u016f\u0148.\";\n\n# $output will contain text encoded using UTF-8 thanks to `use open`.\nopen my $oh, \"&gt;\", \\my $text_utf8;\nsay $oh $text_ucp;\nclose $oh;\n\n# ok. Will encode the decoded text using UTF-8 thanks to `use open`.\nsay $text_ucp;\n\n# XXX. Will encode the already-encoded text using UTF-8 thanks to `use open`.\nprint $text_utf8;\n</code></pre>\n\n<p>You tried to override the second effect of <code>use open</code> to obtain a file of Unicode Code Points, but that's futile since files can only contain bytes. Some kind of encoding or failure must occur if you try to store something other than bytes in a file.</p>\n\n<p>So live with it, and decode the \"file\" before using it.</p>\n\n<pre><code>use utf8;\nuse open qw( :std :encoding(UTF-8) );\nuse Encode qw( decode_utf8 );\n\nmy $text_ucp = \"\u017dlu\u0165ou\u010dk\u00fd k\u016f\u0148.\";\n\nopen my $oh, \"&gt;\", \\my $text_utf8;\nsay $oh $text_ucp;\nclose $oh;\n\nmy $text2_ucp = decode_utf8($text_utf8);\n\n... Do stuff with $text_ucp and/or $text2_ucp ...\n\nsay $text_ucp;\nsay $text2_ucp;\n</code></pre>\n\n<hr>\n\n<p>It is possible to avoid the <code>decode</code> by working directly with UTF-8 in the second half of the program.</p>\n\n<pre><code>use utf8;\nBEGIN { binmode(STDERR, \":encoding(UTF-8)\"); }  # We'll handle STDOUT manually.\nuse open qw( :encoding(UTF-8) );\nuse Encode qw( encode_utf8 );\n\nmy $text_ucp = \"\u017dlu\u0165ou\u010dk\u00fd k\u016f\u0148.\";\n\nopen my $oh, \"&gt;\", \\my $text_utf8;\nsay $oh $text_ucp;\nclose $oh;\n\nsay encode_utf8($text_ucp);\nsay $text_utf8;\n</code></pre>\n\n<p>Of course, that means you can't use <code>$text_utf8</code> anywhere that expects decoded text.</p>\n"}], "owner": {"reputation": 1332, "user_id": 2170917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e4bde8f118dd0095d6ba07e2a5bc3aa?s=128&d=identicon&r=PG", "display_name": "Nikola Benes", "link": "https://stackoverflow.com/users/2170917/nikola-benes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 708, "favorite_count": 0, "accepted_answer_id": 49780123, "answer_count": 1, "score": 0, "last_activity_date": 1523465610, "creation_date": 1523463108, "question_id": 49779911, "link": "https://stackoverflow.com/questions/49779911/perl-utf8-output-to-a-variable", "title": "Perl UTF8 output to a variable", "body": "<p>I have the following Perl code, in which I am opening a handle to a scalar variable and writing some utf8 text to it:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse 5.010;\nuse utf8;\nuse open qw( :std :encoding(utf8) );\n\nmy $output; \nopen my $oh, \"&gt;\", \\$output;    \nsay $oh \"\u017dlu\u0165ou\u010dk\u00fd k\u016f\u0148.\";    \nclose $oh;\n\nsay \"\u017dlu\u0165ou\u010dk\u00fd k\u016f\u0148.\";\nprint $output;\n</code></pre>\n\n<p>and when I run it I get the following output:</p>\n\n<pre><code>\u017dlu\u0165ou\u010dk\u00fd k\u016f\u0148.\n\u00c5\u00bdlu\u00c5\u00a5ou\u00c4k\u00c3\u00bd k\u00c5\u00af\u00c5.\n</code></pre>\n\n<p>(without any warnings or errors). So, obviously, writing an utf8 string into a variable via a handle does not work correctly here as the string seems to be double-encoded. I have tried opening $oh with <code>&gt;:raw</code>, <code>&gt;:bytes</code>, <code>&gt;:encoding(ascii)</code>, but none of it helped.</p>\n\n<p>I might be doing something stupid but I cannot figure how to fix this. Any ideas?</p>\n"}, {"tags": ["perl", "text-parsing"], "comments": [{"owner": {"reputation": 399, "user_id": 3420699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AgkhT.jpg?s=128&g=1", "display_name": "pcjr", "link": "https://stackoverflow.com/users/3420699/pcjr"}, "edited": false, "score": 0, "creation_date": 1523546880, "post_id": 49779605, "comment_id": 86615626, "body": "Why do you <code>chdir $dirName</code> twice?"}, {"owner": {"reputation": 3, "user_id": 3312077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kCEKG.jpg?s=128&g=1", "display_name": "grumpy", "link": "https://stackoverflow.com/users/3312077/grumpy"}, "reply_to_user": {"reputation": 399, "user_id": 3420699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AgkhT.jpg?s=128&g=1", "display_name": "pcjr", "link": "https://stackoverflow.com/users/3420699/pcjr"}, "edited": false, "score": 0, "creation_date": 1523896024, "post_id": 49779605, "comment_id": 86739214, "body": "Just a mistake in trying to clean up the script for asking a question. I didn&#39;t need to post the entire script and missed this. Cleaned it up."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 3312077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kCEKG.jpg?s=128&g=1", "display_name": "grumpy", "link": "https://stackoverflow.com/users/3312077/grumpy"}, "edited": false, "score": 0, "creation_date": 1523466587, "post_id": 49779812, "comment_id": 86577090, "body": "Sometimes the simplest solution is the easiest, looks like it&#39;s only in the TextWrangler integration and runs fine from the terminal. I should have considered this previously but missed it as a possible cause/solution. Thanks @filiprem!"}], "tags": [], "owner": {"reputation": 5598, "user_id": 540341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7762851de72b8505fa70cae4eb7c83?s=128&d=identicon&r=PG", "display_name": "filiprem", "link": "https://stackoverflow.com/users/540341/filiprem"}, "is_accepted": true, "score": 1, "last_activity_date": 1523462810, "creation_date": 1523462810, "answer_id": 49779812, "question_id": 49779605, "link": "https://stackoverflow.com/questions/49779605/looping-through-lines-in-text-file-in-perl-on-mac-unable-to-print-lines-in-whil/49779812#49779812", "title": "Looping through lines in text file in PERL on Mac, unable to print lines in while loop", "body": "<p>It must be editor/IDE issue. Your original code works fine. I created the directory with 3 txt files, ran your code and here is the output:</p>\n\n<pre><code>[18:04:40][filip@lap2:~]$ more /Users/me/Documents/examples/*\n::::::::::::::\n/Users/me/Documents/examples/a.txt\n::::::::::::::\na\na\na\n::::::::::::::\n/Users/me/Documents/examples/b.txt\n::::::::::::::\nb\nb\nb\n::::::::::::::\n/Users/me/Documents/examples/c.txt\n::::::::::::::\nc\nc\nc\n[18:04:48][filip@lap2:~]$ perl 49779605.pl \nb.txt\nb\nb\nb\nc.txt\nc\nc\nc\na.txt\na\na\na\nUse of uninitialized value within @files in pattern match (m//) at 49779605.pl line 23.\nUse of uninitialized value within @files in pattern match (m//) at 49779605.pl line 23.\nUse of uninitialized value within @files in pattern match (m//) at 49779605.pl line 23.\nUse of uninitialized value within @files in pattern match (m//) at 49779605.pl line 23.\nUse of uninitialized value within @files in pattern match (m//) at 49779605.pl line 23.\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 3312077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kCEKG.jpg?s=128&g=1", "display_name": "grumpy", "link": "https://stackoverflow.com/users/3312077/grumpy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 49779812, "answer_count": 1, "score": 0, "last_activity_date": 1523896053, "creation_date": 1523462251, "last_edit_date": 1523896053, "question_id": 49779605, "link": "https://stackoverflow.com/questions/49779605/looping-through-lines-in-text-file-in-perl-on-mac-unable-to-print-lines-in-whil", "title": "Looping through lines in text file in PERL on Mac, unable to print lines in while loop", "body": "<p>There is a lot of documentation on looping through files on PERL, but I am running into an issue I haven't found a solution to. I haven't been able to get any of the examples for looping through lines in text files working yet.</p>\n\n<p>First, my environment: I'm on a MacBook using macOS Sierra version 10.12.6. I'm writing my scripts in and running them from TextWrangler version 5.5.2.</p>\n\n<p>I would like to write the sub ProcessFile in the below script to do string parsing on each line of the text files in my directory, but this is not running at all. There is no output in TextWrangler's Unix Script Output.log.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $dirName = \"/Users/me/Documents/examples\";\n\nchdir $dirName or die \"Cannot chdir $dirName: $!\";\n\nopendir ( my $dir, $dirName ) or die \"Cannot open directory $dirName: $!\";\n\nmy @files = readdir $dir;\n\n# Put in variable for debugging with less than the full directory\n#my $numberOfFiles = scalar( @files );\nmy $numberOfFiles = 10;\n\nfor ( my $iFiles = 0; $iFiles &lt; $numberOfFiles; $iFiles++ )\n{\n    # Check if .txt file\n    if ( $files[$iFiles]=~/\\.txt$/ )\n    {\n        my $fileName = \"$files[$iFiles]\";\n\n        ProcessFile ( $fileName );\n    }\n}\n\nclosedir  $dir;\n\nsub ProcessFile\n{\n    my ( $fileName ) = @_;\n    print $fileName; print \"\\n\";\n\n    open(my $inputFile, \"&lt;$fileName\" ) or die \"Cannot open file $fileName: $!\";\n\n    while (my $line = &lt;$inputFile&gt;)\n    {\n        print \"$line\";\n        #Add parsing to gather metrics on the number of instances of different patterns\n    }\n}\n</code></pre>\n\n<p>However, if I change ProcessFile to the below it prints the first 2 lines of the file:</p>\n\n<pre><code>sub ProcessFile\n{\n    my ( $fileName ) = @_;\n    print $fileName; print \"\\n\";\n\n    open(my $inputFile, \"&lt;$fileName\" ) or die \"Cannot open file $fileName: $!\";\n\n    my $line = &lt;$inputFile&gt;;\n    print \"$line\";\n\n    my $line2 = &lt;$inputFile&gt;;\n    print \"$line2\";\n}\n</code></pre>\n\n<p>Also, if I change ProcessFile to the below it prints a line for each line in the file:</p>\n\n<pre><code>sub ProcessFile\n{\n    my ( $fileName ) = @_;\n    print $fileName; print \"\\n\";\n\n    open(my $inputFile, \"&lt;$fileName\" ) or die \"Cannot open file $fileName: $!\";\n\n    my $i = 0;\n\n    while (my $line = &lt;$inputFile&gt;)\n    {\n        print \"$i\\n\";\n        $i++;\n    }\n}\n</code></pre>\n\n<p>At this point I'm not sure what the next step should be to be able to iterate through each line of the file and parse it as a string. Eventually I'm going to want to output matching strings to a file as well, but I need to pass this hurdle first.</p>\n"}, {"tags": ["perl", "email", "data-dumper"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1523461663, "post_id": 49779333, "comment_id": 86574199, "body": "Your code looks fine. Are you actually calling that sub <code>mail_func</code> further down? Looks like you forgot to tell your program to actually do something. It will just compile, but then not execute things, because cause in subs will only be run once you call that sub."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1523461806, "post_id": 49779333, "comment_id": 86574302, "body": "What about adding <code>print Dumper(\\@to_list)</code> about 20 lines up? What&#39;s calling <code>mail_func</code>?"}, {"owner": {"reputation": 75, "user_id": 9355368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f408be0771b8451b59900e02670c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/9355368/jes"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1523463768, "post_id": 49779333, "comment_id": 86575557, "body": "@simbabque the sub mail_func is being called elsewhere. I can print my whole script for you if you think that will help. running the script by itself works as the emails do send, it is just the --dry_run option that doesn&#39;t work"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1523464267, "post_id": 49779333, "comment_id": 86575881, "body": "Ok. Then we don&#39;t need to see the rest. Where does the STDOUT of the script go? How do you invoke it? Please show your complete command line."}, {"owner": {"reputation": 75, "user_id": 9355368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f408be0771b8451b59900e02670c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/9355368/jes"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1523465505, "post_id": 49779333, "comment_id": 86576562, "body": "@simbabque I am really new to Perl and this is my first script attempt. I am not sure how to see where STDOUT goes...I assume it is the Email library. I call it simply <code>perl ownership_needed.pl</code> or <code>perl ownership_needed.pl --dry_run</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1523465655, "post_id": 49779333, "comment_id": 86576640, "body": "So if STDOUT goes to the email, then your <code>print Dumper</code> will go there, too. Try <code>warn Dumper</code> instead. That&#39;ll write to STDERR and should show up on the command line."}, {"owner": {"reputation": 75, "user_id": 9355368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f408be0771b8451b59900e02670c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/9355368/jes"}, "edited": false, "score": 0, "creation_date": 1523465995, "post_id": 49779333, "comment_id": 86576798, "body": "That did not work either."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1523473312, "post_id": 49779333, "comment_id": 86580562, "body": "I&#39;m voting to close this question as off-topic, because you haven&#39;t provided code to reproduce the problem in the question."}, {"owner": {"reputation": 75, "user_id": 9355368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f408be0771b8451b59900e02670c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/9355368/jes"}, "edited": false, "score": 0, "creation_date": 1523546885, "post_id": 49779333, "comment_id": 86615630, "body": "That&#39;s fine to close it. I offered to post my entire code and not just the email section, and it was declared fine not to. As simbabque said the code looked fine, I just decided to redo it one step at a time this morning. Going back to my original and by the end, --dry_run option works. I am not sure why it didn&#39;t yesterday and now does, but my finished code is the same as above. So I thank simbabque for stating it looked right, which pointed me in the right direction."}], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 9355368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f408be0771b8451b59900e02670c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/9355368/jes"}, "is_accepted": true, "score": 1, "last_activity_date": 1523547194, "creation_date": 1523547194, "answer_id": 49800564, "question_id": 49779333, "link": "https://stackoverflow.com/questions/49779333/print-out-email-on-terminal-using-datadumper/49800564#49800564", "title": "print out email on terminal using data::dumper", "body": "<p>Reverted to original, re-added in code, re-ran the script, and it works.\nThe above code is correct as is.\nThanks to simbabque who stated the code looked correct in the first place.</p>\n"}], "owner": {"reputation": 75, "user_id": 9355368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f408be0771b8451b59900e02670c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/9355368/jes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 49800564, "answer_count": 1, "score": -1, "last_activity_date": 1523547194, "creation_date": 1523461489, "question_id": 49779333, "link": "https://stackoverflow.com/questions/49779333/print-out-email-on-terminal-using-datadumper", "title": "print out email on terminal using data::dumper", "body": "<p>I am not understanding how to use Data::Dumper even after reading the Perl doc and looking at other scripts in git. I see lots of examples online dealing with hashes, but I didn't think that quite fit with what I need to do.</p>\n\n<p>I am creating a script to send emails to managers or teams regarding terminated employees. I was told to add <code>print Dumper $email</code> to my code so that when --dry_run option is used, we could see on the terminal a printout of what the email would look like. --dry_run would also ensure that the email isn't actually sent. When I run <code>perl &lt;script&gt; --dry_run</code>, nothing happens. Maybe I need to do something along the lines of <code>$d = Data::Dumper-&gt;new(</code>?</p>\n\n<p>Here is a snippet of my code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse NIE::Email;\nuse Data::Dumper;\nuse List::Util qw(any);\nuse Getopt::Long;\nGetopt::Long::Configure qw(gnu_getopt);\nmy ($qa, $verbose, $dry_run, $help, $dbh);\n\nGetOptions(\n    'qa' =&gt; \\$qa,\n    'verbose|v' =&gt; \\$verbose,\n    'dry_run' =&gt; \\$dry_run,\n    'help|h' =&gt; \\$help\n);\n\n#Generate email here\nsub mail_func {\n    print \"Prepare email\\n\" if $verbose;\n    my $n = shift;    #user\n    my $i = shift;    #ips\n    my $t = shift;    #testnets\n    my $m = shift;    #managers (multiple if owner is undef)\n    my @to_list;      # send to field\n    foreach my $value (values %{$t}) {\n        if ($value ne 'lab@abc.com') {    #don't send this email to lab@\n            if (any { $value eq $_ } @to_list) { #check not already listed\n                next;\n            }\n            else { push(@to_list, $value); }\n        }\n    }\n    foreach my $key (keys %{$m}) {\n        if ($key ne 'def') {\n            if (any { $key eq $_ } @to_list) {\n                next;\n            }\n            else { push(@to_list, $key . '@abc.com'); }\n        }\n    }\n    my @body;\n    while (my ($key, $value) = each %{$i}) {\n        my $b = \"IP \" . $key . \" : Testnet \" . $value . \"\\n\";\n        push(@body, $b);\n    }\n    my $sub1 = \"Ownership needed!\";\n    my $sub2 = \"Ownership needed script special case\";\n    my $email;\n\n    #Email testnet group (if not lab) as well as manager of term employee\n    if (@to_list) {\n        $email = NIE::Email-&gt;new(\n            From       =&gt; 'do-not-reply@abc.com',\n            To         =&gt; join(',', @to_list),\n            'Reply-to' =&gt; 'def@abc.com',\n            Subject    =&gt; $sub1,\n            );\n        $email-&gt;data(\n            \"Good Day, \\n\\n The below machines need claimed as their previous\"\n              . \" owner, $n, is showing up as no longer with the company. \\n\"\n              . \"Please visit website to change\"\n              . \" ownership of these machhines. \\n\\n\"\n              . \"@body \\n\\n\"\n              . \"If you have already requested an ownership change for these\"\n              . \" machines, please disregard this message.\"\n              . \"\\n\\n Thank you \\n -Lab team \\n\\n\"\n              . \"This script is under active development and could contain\"\n              . \" bugs, so please speak up if you have doubts or something \"\n              . \"looks strange.\"\n              . \"\\n Script name: lab_ownership_needed_email\");\n        if ($dry_run) {print Dumper($email);}\n        else {$email-&gt;send();}\n    }\n</code></pre>\n\n<p>Any help in understanding how to use this for my purpose would be greatly appreciated. Thank you.</p>\n"}, {"tags": ["perl", "hash", "crystal-lang"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1523459037, "post_id": 49778199, "comment_id": 86572263, "body": "Perl 5 does not have static types. It doesn&#39;t even really have types at all. That&#39;s the whole idea of the language. You can make a hash read-only, but that&#39;s not what you want. The approach with <code>use constant</code> simply installs functions into your current namespace. That&#39;s not a data structure."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1523460562, "post_id": 49778199, "comment_id": 86573420, "body": "Do you mean a feature such that executing, e.g., <code>$value = $aaa{A}</code> at run time should not use hash lookup to determine <code>$value</code> but rather be equivalent to a simple assignment statement <code>$value = &quot;ddd&quot;</code>? So the compiler should substitute hash lookup <code>$aaa{A}</code> with the constant  <code>&quot;ddd&quot;</code> in this case?"}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 3, "creation_date": 1523462314, "post_id": 49778199, "comment_id": 86574653, "body": "I doubt that you&#39;ll have a performance hit from a hash. Did you profile your code?"}, {"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1523462388, "post_id": 49778199, "comment_id": 86574713, "body": "I think $aaa{A} could be equivalent to $a[A] with the A value defined in compile time as some N (for example, N=0)"}], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1523461751, "post_id": 49779138, "comment_id": 86574256, "body": "<code>DrvtinyStaticHash::XS</code> will be out by the end of next quarter  :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1523461916, "post_id": 49779138, "comment_id": 86574378, "body": "I don&#39;t think that will help enough. The problem is fundamental to using tie. I think a hash lookup is faster than a sub call (no matter whether the sub is written in Perl or XS)."}, {"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1523462103, "post_id": 49779138, "comment_id": 86574496, "body": "$key eq &#39;A&#39; and tied variables is not what i want. I want to simply pass names of the constants, not strings, as indexes. Ideally so: $saa[:myStaticIndex] = &quot;value&quot;; but not $saa[&quot;myStaticIndex&quot;] = &quot;value&quot; (because conversion from string to integer value is a hash lookup - whether it will be &quot;internal&quot; hash table containing program symbols or &quot;external&quot; - for user-defined hash)."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1523466573, "post_id": 49779138, "comment_id": 86577078, "body": "Conversion from string to int in this example is done with a sequence of <code>if...else</code> statements and string comparisons, not a hash lookup."}, {"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1523467899, "post_id": 49779138, "comment_id": 86577759, "body": "Are you kidding me? :)"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1523460886, "creation_date": 1523460886, "answer_id": 49779138, "question_id": 49778199, "link": "https://stackoverflow.com/questions/49778199/is-there-a-way-to-implement-statically-defined-associative-arrays-in-perl-5/49779138#49779138", "title": "Is there a way to implement statically-defined associative arrays in Perl 5?", "body": "<p>Since this is Perl, there are a number of ways to at least sort of do what you want. Here is a <a href=\"https://metacpan.org/pod/perltie#Tying-Hashes\" rel=\"nofollow noreferrer\">tied hash</a> implementation that does not do any hash lookups:</p>\n\n<pre><code>sub DrvtinyStaticHash::TIEHASH {\n    my ($pkg, $A, $B, $C) = @_;\n    bless [ $A, $B, $C ], $pkg;\n}\n\nsub DrvtinyStaticHash::STORE {\n    my ($self,$key,$value) = @_;\n    if ($key eq 'A')      { $self-&gt;[0] = $value }\n    elsif ($key eq 'B') { $self-&gt;[1] = $value }\n    elsif ($key eq 'C') { $self-&gt;[2] = $value; }\n    else { die \"DrvtinyStaticHash: Bad key: $key\" }\n}\n\nsub DrvtinyStaticHash::FETCH {\n    my ($self,$key) = @_;\n    return $self-&gt;[0] if $key eq 'A';\n    return $self-&gt;[1] if $key eq 'B';\n    return $self-&gt;[2] if $key eq 'C';\n    die \"DrvtinyStaticHash: Bad key: $key\";\n}\n\ntie my %saa, 'DrvtinyStaticHash', 'aaa', 'bbb', 'ccc';\n\nprint $saa{\"B\"};     # \"bbb\"\n$saa{\"C\"} = 42;\nprint $saa{\"D\"};     # error: Bad key\n</code></pre>\n\n<p>You could generalize this to any package name and any set of keys with an unhealthy dose of <code>eval</code> calls.</p>\n"}, {"comments": [{"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1523462177, "post_id": 49779294, "comment_id": 86574545, "body": "Thank you bery much Sinan! How this const %hash was implemented internally? Is it somehow faster than generic hash in perl?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1523462555, "post_id": 49779294, "comment_id": 86574827, "body": "In <code>Const::Fast</code>, the data structure is <a href=\"https://metacpan.org/source/LEONT/Const-Fast-0.014/lib/Const/Fast.pm#L26\" rel=\"nofollow noreferrer\">marked as readonly</a> using an internal Perl API."}, {"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 1, "creation_date": 1523463277, "post_id": 49779294, "comment_id": 86575255, "body": "Class::XSAccessor&#39;s objects is not NamedTuple, but its staticcaly defined and its very fast. It is good replacement for arrays with elements addressed by constant symbols. Thank you again, i will prefer to use your solution!"}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 4, "last_activity_date": 1523462945, "last_edit_date": 1523462945, "creation_date": 1523461332, "answer_id": 49779294, "question_id": 49778199, "link": "https://stackoverflow.com/questions/49778199/is-there-a-way-to-implement-statically-defined-associative-arrays-in-perl-5/49779294#49779294", "title": "Is there a way to implement statically-defined associative arrays in Perl 5?", "body": "<p>The closest thing to the functionality described in <a href=\"https://crystal-lang.org/api/0.24.2/NamedTuple.html\" rel=\"nofollow noreferrer\"><code>struct NamedTuple(**T)</code></a> is <a href=\"https://metacpan.org/pod/Const::Fast\" rel=\"nofollow noreferrer\"><code>Const::Fast</code></a>.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Const::Fast qw( const );\n\nmy %language;\n\nBEGIN {\n    const %language =&gt; (\n        name =&gt;'Crystal',\n        year =&gt; '2011',\n    );\n}\n\nprint \"$language{$_}\\n\" for qw( name year other );\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl t.pl\nCrystal\n2011\nAttempt to access disallowed key 'other' in a restricted hash at t.pl line 17.\n</code></pre>\n\n<p><strong>BUT</strong> the check happens at run time. See <a href=\"http://neilb.org/reviews/constants.html\" rel=\"nofollow noreferrer\">Neil Bowers' excellent review</a> for performance information. The stats may have changed since then, but it should give you an idea.</p>\n\n<p>An alternative is not to use hashes at all, but use <a href=\"https://metacpan.org/pod/Class::XSAccessor\" rel=\"nofollow noreferrer\">Class::XSAccessor</a> to define a simple class:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\npackage My::Language;\nuse Class::XSAccessor (\n    constructor =&gt; 'new',\n    getters =&gt; {\n        name =&gt; 'name',\n        year =&gt; 'year',\n    },\n);\n\npackage main;\n\nmy $language;\n\nBEGIN {\n    $language = My::Language-&gt;new(\n        name =&gt;'Crystal',\n        year =&gt; '2011',\n    );\n}\n\nprint $language-&gt;$_, \"\\n\" for qw( name year other );\n</code></pre>\n\n<p><a href=\"https://metacpan.org/pod/Class::XSAccessor::Array\" rel=\"nofollow noreferrer\"><code>Class::XSAccessor::Array</code></a> should be about 10%-15% faster:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\npackage My::Language;\nuse Class::XSAccessor::Array (\n    getters =&gt; {\n        name =&gt; 0,\n        year =&gt; 1,\n    },\n);\n\npackage main;\n\nmy $language;\n\nBEGIN {\n    $language = bless ['Crystal', '2011'] =&gt; 'My::Language';\n}\n\nprint $language-&gt;$_, \"\\n\" for qw( name year other );\n</code></pre>\n\n<p>In all cases, the checks happen at run time.</p>\n"}, {"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 3, "last_activity_date": 1523485283, "creation_date": 1523485283, "answer_id": 49785223, "question_id": 49778199, "link": "https://stackoverflow.com/questions/49778199/is-there-a-way-to-implement-statically-defined-associative-arrays-in-perl-5/49785223#49785223", "title": "Is there a way to implement statically-defined associative arrays in Perl 5?", "body": "<p>Perl already precomputes the hash of constant keys. The hash code is then retrieved at runtime. Additionally, hash keys are constant-pooled so that even if the hash collides, the string equality is simplified to a pointer comparison.</p>\n\n<p>Therefore, the extra runtime cost of of a constant hash key lookup compared to a constant array index lookup is very low, especially compared to all the overhead that is incurred anyway due to the Perl data model.</p>\n\n<p>How does this work?</p>\n\n<p>During the optimization phase, the <code>S_maybe_multideref()</code> function in <code>op.c</code> folds consecutive dereference operations like <code>$x{foo}[0]{bar}</code> into a single opcode. Scalars for constant keys are set aside so that they are just a pointer lookup away. These scalars are prepared by the <code>S_check_hash_fields_and_hekify()</code> function, which creates the constant-pooled scalar using the <code>newSVpvn_share()</code> function which (after a few levels of macros) uses the <code>S_share_hek_flags()</code> function from <code>hv.c</code> which creates or fetches a hash entry key (HEK) structure in a global constant pool (which itself is a hash table).</p>\n\n<p>During runtime, the hash lookup function notices that the key scalar is in fact a shared HEK, and directly retrieves the hash. This short-circuits most of the hash table lookup code in the <code>Perl_hv_common()</code> function.</p>\n\n<p>This only works when using constant strings for hash keys. Otherwise, you still have to do the complete hash lookup.</p>\n\n<p>Using constant array keys like <code>$struct[KEY_FOO]</code> in place of constant hash keys <code>$hash{foo}</code> is therefore not going to give you a noticeable performance benefit. Instead, the main benefit of the array approach is that you have to <em>declare</em> all constants up front, thus giving you some amount of static checking. This can e.g. detect typos. Note that hashes also support some checks:</p>\n\n<ul>\n<li><p>Using the <code>fields</code> pragma, you can <em>statically</em> restrict the hash keys that can be accessed <em>through a variable</em>. E.g. <code>my SomeClass $object</code> only allows <code>$object-&gt;{foo}</code> if the <code>SomeClass</code> class has declared a <code>foo</code> field. However, this is a very arcane, misleading, and discouraged feature of Perl. Please do not use it.</p></li>\n<li><p>Using \u201crestricted hashes\u201d, you can freeze the keys of a hash table (see <code>lock_keys()</code> in <code>Hash::Util</code>). This is a <em>runtime</em> check. This is the best approach if you want to get the typo-detection benefits. E.g. we could declare a kind of struct like:</p>\n\n<pre><code>use Hash::Util qw(lock_keys);\nmy %struct;\nlock_keys(%struct, qw(foo bar));\n\n$struct{foo};  # OK\n$struct{bar};  # OK\n$struct{qux};  # runtime error\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 1, "accepted_answer_id": 49779294, "answer_count": 3, "score": 1, "last_activity_date": 1523485283, "creation_date": 1523458103, "last_edit_date": 1523461757, "question_id": 49778199, "link": "https://stackoverflow.com/questions/49778199/is-there-a-way-to-implement-statically-defined-associative-arrays-in-perl-5", "title": "Is there a way to implement statically-defined associative arrays in Perl 5?", "body": "<p>If I have some hash with the (absolutely) static set of keys, can I avoid calculating of hash functions on each access to elements of this hash by key at run time? </p>\n\n<p>Say, I have a static associative array <code>%saa</code> with the keys:</p>\n\n<pre><code>my %saa = (\n A =&gt; \"aaa\",\n B =&gt; \"bbb\",\n C =&gt; \"ccc\"\n);\n</code></pre>\n\n<p>How to pre-calculate hash function values for these keys in compile time and use it in run time in such effective manner as I did when using indexed access to simple lists elements.</p>\n\n<p>As I know for now, in perl5 it may be implemented only as emulation of hashes using lists (<code>use constant A=&gt;0, B=&gt;1...; $saa[A]=\"ddd\"</code>).</p>\n\n<p>Maybe there is more straightforward way to implement static associative arrays (also called \"named tuples\", not hashes) in Perl ?</p>\n\n<p>For example, that's how the desired feature was <a href=\"https://crystal-lang.org/api/0.24.2/NamedTuple.html\" rel=\"nofollow noreferrer\">implemented in Crystal language</a>.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1523453455, "post_id": 49774601, "comment_id": 86567987, "body": "<code>$line=~s&#47;\\,([^\\,]*)$&#47;\\,DONE&#47;g;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "is_accepted": false, "score": 2, "last_activity_date": 1523449191, "creation_date": 1523449191, "answer_id": 49774969, "question_id": 49774601, "link": "https://stackoverflow.com/questions/49774601/i-want-to-search-and-replace-in-a-text-file-using-perl-but-the-regex-expression/49774969#49774969", "title": "I want to search and replace in a text file using perl but the regex expression s/// is not working as expected", "body": "<p>why not simply \n<br><code>$line =~ s/PEND/DONE/;</code></p>\n\n<p>if you want to keep a regex similar to the one you used, you can <br>\n<code>$line =~ s/(\\w+,[\\w\\s]+,\\w+,\\w+),\\w+/$1,\"DONE\"/g;</code></p>\n"}, {"tags": [], "owner": {"reputation": 227, "user_id": 9588865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7920db6949a0ec8547252d88d21b2c01?s=128&d=identicon&r=PG&f=1", "display_name": "Enheh", "link": "https://stackoverflow.com/users/9588865/enheh"}, "is_accepted": false, "score": 1, "last_activity_date": 1523453178, "creation_date": 1523453178, "answer_id": 49776388, "question_id": 49774601, "link": "https://stackoverflow.com/questions/49774601/i-want-to-search-and-replace-in-a-text-file-using-perl-but-the-regex-expression/49776388#49776388", "title": "I want to search and replace in a text file using perl but the regex expression s/// is not working as expected", "body": "<p>If you want to allow for whitespace in any of your fields, you can do this:</p>\n\n<pre><code>$line =~ s/^((?:[\\w\\s]+,){4})[\\w\\s]+$/$1DONE/g;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1523454135, "post_id": 49776516, "comment_id": 86568495, "body": "Needs <a href=\"http://perldoc.perl.org/perlre.html#Details-on-some-modifiers\" rel=\"nofollow noreferrer\"><code>&#47;x</code></a>, right?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1523455284, "post_id": 49776516, "comment_id": 86569385, "body": "Yes. However just brief info for understanding on the regex."}], "tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 1, "last_activity_date": 1523454168, "last_edit_date": 1523454168, "creation_date": 1523453554, "answer_id": 49776516, "question_id": 49774601, "link": "https://stackoverflow.com/questions/49774601/i-want-to-search-and-replace-in-a-text-file-using-perl-but-the-regex-expression/49776516#49776516", "title": "I want to search and replace in a text file using perl but the regex expression s/// is not working as expected", "body": "<p>My question is why should we should bother about the spaces. You have a operator <code>,</code> at the before keyword hence Its might be simple replacement.</p>\n\n<p><code>$line=~s/\\,([^\\,]*)$/\\,DONE/g;</code></p>\n\n<p>Regex explanation:</p>\n\n<pre><code>$line=~s/\\, #Check the last comma\n           ([^\\,]*)  #Rest of the words (PEND)\n                     $ # End of the line \n              /\\,DONE/g; #Replace whatever you want (DONE)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 453, "user_id": 5983598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d539e9b534f278c139ce01cadf7b70?s=128&d=identicon&r=PG", "display_name": "mr_ron", "link": "https://stackoverflow.com/users/5983598/mr-ron"}, "is_accepted": false, "score": 2, "last_activity_date": 1523458088, "creation_date": 1523458088, "answer_id": 49778192, "question_id": 49774601, "link": "https://stackoverflow.com/questions/49774601/i-want-to-search-and-replace-in-a-text-file-using-perl-but-the-regex-expression/49778192#49778192", "title": "I want to search and replace in a text file using perl but the regex expression s/// is not working as expected", "body": "<p>Pulling a wheel off the shelf:</p>\n\n<pre><code>use Modern::Perl;\nuse Text::CSV::Easy qw( csv_parse );\n\nwhile (&lt;DATA&gt;) {\n    my @row = csv_parse $_;\n    $row[ 4 ] = 'DONE' if $row[ 4 ] eq 'PEND';\n    say join',', @row;\n}\n\n__DATA__\nR00001,abcd xyz pqr,undef,undef,PEND\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>R00001,abcd xyz pqr,undef,undef,DONE\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9585113, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nOf6wnm646I/AAAAAAAAAAI/AAAAAAAABTY/96zh0PTy7kE/photo.jpg?sz=128", "display_name": "Saurabh Agrawal", "link": "https://stackoverflow.com/users/9585113/saurabh-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1523458088, "creation_date": 1523448099, "last_edit_date": 1523448325, "question_id": 49774601, "link": "https://stackoverflow.com/questions/49774601/i-want-to-search-and-replace-in-a-text-file-using-perl-but-the-regex-expression", "title": "I want to search and replace in a text file using perl but the regex expression s/// is not working as expected", "body": "<p>I wish to replace </p>\n\n<pre><code>R00001,abcd xyz pqr,undef,undef,PEND\n</code></pre>\n\n<p>with </p>\n\n<pre><code>R00001,abcd xyz pqr,undef,undef,DONE\n</code></pre>\n\n<p>I tried using </p>\n\n<pre><code> $line =~ s/(\\w+,\\w+,\\w+,\\w+),\\w+/$1,\"DONE\"/g;\n</code></pre>\n\n<p>The issue is that abcd xyz pqr has spaces in it and so it's not able to sync with \\w+. What changes can I make to this part of the code so that it works?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "namespaces", "package", "subroutine"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1523436893, "post_id": 49770665, "comment_id": 86556174, "body": "Try to put <code>BEGIN {}</code> around the sub def and move it before the <code>use Mypackage</code> statement"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1523437110, "post_id": 49770665, "comment_id": 86556360, "body": "Your package declaration is wrong. Perl&#39;s keywords are case sensitive. It&#39;s <code>package</code>, not <code>Package</code>."}, {"owner": {"reputation": 153, "user_id": 3185638, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e17f4bcc437d279c112a983046fd8730?s=128&d=identicon&r=PG&f=1", "display_name": "The nothing", "link": "https://stackoverflow.com/users/3185638/the-nothing"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1523437627, "post_id": 49770665, "comment_id": 86556742, "body": "@Hakon, I get: Undefined subroutine &amp;main::test   not work."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1523437691, "post_id": 49770665, "comment_id": 86556798, "body": "Also, <code>use</code> should be lowercase, and <code>Mypackage</code> should have extension <code>pm</code>, not <code>pl</code>."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1523437692, "post_id": 49770665, "comment_id": 86556800, "body": "@Thenothing Ok, please update the question and show the new code. It works for me."}, {"owner": {"reputation": 153, "user_id": 3185638, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e17f4bcc437d279c112a983046fd8730?s=128&d=identicon&r=PG&f=1", "display_name": "The nothing", "link": "https://stackoverflow.com/users/3185638/the-nothing"}, "edited": false, "score": 0, "creation_date": 1523438105, "post_id": 49770665, "comment_id": 86557098, "body": "Your are right, can you please explain why this work before the (use) and do like answer, to accept. Thanks."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1523476870, "post_id": 49770665, "comment_id": 86582464, "body": "<a href=\"https://www.perlmonks.org/?node_id=1212680\" rel=\"nofollow noreferrer\">Crossposted to PerlMonks</a>."}, {"owner": {"reputation": 25590, "user_id": 59135, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/90c563665ec03a1b9e80671bb95deeed?s=128&d=identicon&r=PG", "display_name": "daotoad", "link": "https://stackoverflow.com/users/59135/daotoad"}, "edited": false, "score": 0, "creation_date": 1523994327, "post_id": 49770665, "comment_id": 86788680, "body": "Why are you trying to do this?  While it is certainly possible, it may be that there is a more standard approach to the problem you are trying to solve."}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 3185638, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e17f4bcc437d279c112a983046fd8730?s=128&d=identicon&r=PG&f=1", "display_name": "The nothing", "link": "https://stackoverflow.com/users/3185638/the-nothing"}, "edited": false, "score": 0, "creation_date": 1523439228, "post_id": 49771281, "comment_id": 86557875, "body": "I really appreciate your help, is this possible to do in form of OOP ?,  I want to call of subroutine in syntax of OO."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 153, "user_id": 3185638, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e17f4bcc437d279c112a983046fd8730?s=128&d=identicon&r=PG&f=1", "display_name": "The nothing", "link": "https://stackoverflow.com/users/3185638/the-nothing"}, "edited": false, "score": 1, "creation_date": 1523439685, "post_id": 49771281, "comment_id": 86558209, "body": "@Thenothing for an object oriented call, you need an object to call your method on. There&#39;s no object in this context, and your <code>main</code> namespace wouldn&#39;t typically be a class."}, {"owner": {"reputation": 153, "user_id": 3185638, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e17f4bcc437d279c112a983046fd8730?s=128&d=identicon&r=PG&f=1", "display_name": "The nothing", "link": "https://stackoverflow.com/users/3185638/the-nothing"}, "edited": false, "score": 0, "creation_date": 1523441346, "post_id": 49771281, "comment_id": 86559433, "body": "@Hakon, sorry but this aproach does not work with plackup program.psgi but if work with perl program.psgi, in plack I get Undefined subroutine &amp;main::test"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 153, "user_id": 3185638, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e17f4bcc437d279c112a983046fd8730?s=128&d=identicon&r=PG&f=1", "display_name": "The nothing", "link": "https://stackoverflow.com/users/3185638/the-nothing"}, "edited": false, "score": 2, "creation_date": 1523442214, "post_id": 49771281, "comment_id": 86559996, "body": "@Thenothing Sorry I am not familiar with plackup. Maybe you should post a new question showing the specific code you are using?"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 5, "last_activity_date": 1523439632, "last_edit_date": 1523439632, "creation_date": 1523438566, "answer_id": 49771281, "question_id": 49770665, "link": "https://stackoverflow.com/questions/49770665/perl-call-subroutine-of-main-namespace-from-package/49771281#49771281", "title": "Perl - Call subroutine of main namespace from package", "body": "<p>The statement <code>use Mypackage</code> is <a href=\"https://perldoc.perl.org/functions/use.html\" rel=\"nofollow noreferrer\">equivalent to</a> </p>\n\n<pre><code>BEGIN { require Mypackage; Mypackage-&gt;import( ); }\n</code></pre>\n\n<p>So we see that the <code>Mypackage</code> is executed before the execution of the main program (since it is in a <code>BEGIN</code> block). See <a href=\"https://stackoverflow.com/a/22693557/2173773\">this</a> answer for more information an another example. Hence the sub <code>test()</code> in the main program is not yet defined at this time. To make it work, we \nneed to have it defined when <code>Mypackage</code> is run. One way to do that is to \nput it in a <code>BEGIN</code> block before the <code>use Mypackage</code> statement in the main program.</p>\n\n<pre><code>BEGIN {\n    sub test{\n        print \"from test\\n\";\n    }\n}    \nuse Mypackage;\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 3185638, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e17f4bcc437d279c112a983046fd8730?s=128&d=identicon&r=PG&f=1", "display_name": "The nothing", "link": "https://stackoverflow.com/users/3185638/the-nothing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 49771281, "answer_count": 1, "score": 0, "last_activity_date": 1523439632, "creation_date": 1523436771, "question_id": 49770665, "link": "https://stackoverflow.com/questions/49770665/perl-call-subroutine-of-main-namespace-from-package", "title": "Perl - Call subroutine of main namespace from package", "body": "<p><strong>program.pl</strong></p>\n\n<pre><code>Use Mypackage;\n\nsub test{\n\nprint \"from test\";\n\n}\n</code></pre>\n\n<p><strong>Mypackage.pl</strong> </p>\n\n<pre><code>Package Mypackage;\n\n::test();\n</code></pre>\n\n<p>This return nothing.</p>\n\n<p>I see several threads about call subroutine in namespace from package, but I want to do <strong>the contrary</strong></p>\n\n<p>Print a subroutine in package from main namespace  (program.pl)</p>\n\n<p><strong>is this possible ?</strong></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 3, "creation_date": 1523430340, "post_id": 49768228, "comment_id": 86552269, "body": "What is inside the <code>while</code> loop? Do you need to look at <i>every</i> line of the file?"}, {"owner": {"reputation": 35, "user_id": 9267188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0914d596ba60b1988e61b6348ab8898e?s=128&d=identicon&r=PG&f=1", "display_name": "Chinnu", "link": "https://stackoverflow.com/users/9267188/chinnu"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1523430753, "post_id": 49768228, "comment_id": 86552509, "body": "yes i need to look into every line of file."}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 2, "creation_date": 1523432909, "post_id": 49768228, "comment_id": 86553757, "body": "Can you determine if you are bottlenecked on disk throughput or processing time? ie what is the running time of your script versus <code>time cat filename &gt; &#47;dev&#47;null</code> Don&#39;t forget to take disk caching into account, so run each command a few times and take the last result. If your script is substantially slower than <code>cat</code>, we&#39;ll need to see your processing code (the contents of your while loop)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 5, "creation_date": 1523433987, "post_id": 49768228, "comment_id": 86554354, "body": "What makes you think it&#39;s reading a line that takes long?!?!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523445296, "post_id": 49768228, "comment_id": 86562061, "body": "Exactly how big is your file? Telling us that it&#39;s &quot;big&quot; doesn&#39;t help much. You should be able to read through a 12GB file in two minutes. Is it smaller/bigger than that?"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 1, "creation_date": 1523446960, "post_id": 49768228, "comment_id": 86563154, "body": "please show us your code inside <code>while</code> loop. also, the way you open the file is not recommended, according to the <code>open</code> documentation, a more suitable way is  <code>open(my $fh, &quot;&lt;&quot;, &quot;input.txt&quot;)</code> , you should also add <code>or die &quot;Can&#39;t open &lt; input.txt: $!&quot;;</code> to catch errors"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 5, "last_activity_date": 1523456495, "creation_date": 1523456495, "answer_id": 49777586, "question_id": 49768228, "link": "https://stackoverflow.com/questions/49768228/faster-way-to-read-a-file-line-by-line-in-perl/49777586#49777586", "title": "Faster way to read a file line by line in perl", "body": "<p>What do you mean by a \"big file\" and a \"small file\"? What size are those files? How many lines do they have?</p>\n\n<p>Unless your big file is absolutely huge, it seems likely that what is slowing your program down is not the reading from a file, but whatever you're doing in the <code>while</code> loop. To prove me wrong, you'd just need to run your program with nothing in the while loop to see how long that takes.</p>\n\n<p>Assuming that I'm right, then you need to work out what section of your processing is causing the problems. Without seeing that code we, obviously, can't be any help there. But that's where a tool like <a href=\"https://metacpan.org/pod/Devel::NYTProf\" rel=\"noreferrer\">Devel::NYTProf</a> would be useful.</p>\n\n<p>I'm not sure where you learned your Perl from, but the idiom you're using to open your file is rather outdated. These days we would a) use lexical variables as filehandles, b) use the 3-argument version of <code>open()</code> and c) always check the return value from <code>open()</code> and take appropriate action.</p>\n\n<pre><code>open(my $fh, '&lt;', 'filename')\n  or die \"Cannot open 'filename': $!\\n\";\n\nwhile ( &lt; $fh &gt; ) {\n  ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 9497524, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Henry Wong", "link": "https://stackoverflow.com/users/9497524/henry-wong"}, "is_accepted": false, "score": 0, "last_activity_date": 1523666103, "creation_date": 1523666103, "answer_id": 49826758, "question_id": 49768228, "link": "https://stackoverflow.com/questions/49768228/faster-way-to-read-a-file-line-by-line-in-perl/49826758#49826758", "title": "Faster way to read a file line by line in perl", "body": "<p>If you have the memory, @array = &lt;fh&gt; then look thru array</p>\n"}], "owner": {"reputation": 35, "user_id": 9267188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0914d596ba60b1988e61b6348ab8898e?s=128&d=identicon&r=PG&f=1", "display_name": "Chinnu", "link": "https://stackoverflow.com/users/9267188/chinnu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1457, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1523666103, "creation_date": 1523429052, "last_edit_date": 1523436689, "question_id": 49768228, "link": "https://stackoverflow.com/questions/49768228/faster-way-to-read-a-file-line-by-line-in-perl", "title": "Faster way to read a file line by line in perl", "body": "<p>I have to read a big unix file line by line using perl. the script is taking more than 2 mins to run in case of big file but takes lesser time for small file.</p>\n\n<p>I am using following code:</p>\n\n<pre><code>open(FILE , \"filename\");\n\nwhile ( &lt; FILE &gt; ){ \n\n}\n</code></pre>\n\n<p>Please let me know a way to parse file faster</p>\n"}, {"tags": ["regex", "perl", "awk"], "comments": [{"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1523416369, "post_id": 49765879, "comment_id": 86547253, "body": "I see that you&#39;ve added an <code>awk</code> tag, but I don&#39;t see any awk code in your question. Could you add some? I&#39;d love to help, but I don&#39;t think that sed is the best tool for something like this. :-)"}, {"owner": {"reputation": 6315, "user_id": 5411198, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FabOI.jpg?s=128&g=1", "display_name": "sergio MAGA", "link": "https://stackoverflow.com/users/5411198/sergio-maga"}, "reply_to_user": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1523416537, "post_id": 49765879, "comment_id": 86547287, "body": "I also think <code>awk</code> is better than <code>sed</code> for this particular job but I&#39;m a beginner with <code>awk</code> so I need help."}], "answers": [{"tags": [], "owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "is_accepted": false, "score": 2, "last_activity_date": 1523416577, "creation_date": 1523416577, "answer_id": 49765928, "question_id": 49765879, "link": "https://stackoverflow.com/questions/49765879/append-zeros-to-list/49765928#49765928", "title": "Append zeros to list", "body": "<p>In awk: </p>\n\n<pre><code>$ awk 'BEGIN{FS=OFS=\",\";nf=4}{for(i=(NF+1);i&lt;=nf;i++)$i=0}1' file\na,10,12,13\nb,20,22,0\nc,30,0,0\nd,33,0,0\n</code></pre>\n\n<p>Explained:</p>\n\n<pre><code>$ awk '\nBEGIN {\n    FS=OFS=\",\"               # separators\n    nf=4                     # desired field count\n}\n{\n    for(i=(NF+1);i&lt;=nf;i++)  # da loop to create new fields\n        $i=0                 # set new fields to 0 \n}1' file                     # output\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6315, "user_id": 5411198, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FabOI.jpg?s=128&g=1", "display_name": "sergio MAGA", "link": "https://stackoverflow.com/users/5411198/sergio-maga"}, "edited": false, "score": 0, "creation_date": 1523417470, "post_id": 49765941, "comment_id": 86547535, "body": "I get syntax error at the closing brace (<code>}</code>) for the command <code>awk -F, &#39;{for(;NF&lt;4;$(NF+1)=0)} 1&#39; OFS=,  inputfile</code>"}, {"owner": {"reputation": 6315, "user_id": 5411198, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FabOI.jpg?s=128&g=1", "display_name": "sergio MAGA", "link": "https://stackoverflow.com/users/5411198/sergio-maga"}, "edited": false, "score": 0, "creation_date": 1523418026, "post_id": 49765941, "comment_id": 86547667, "body": "Awesome, that fixed the problem."}], "tags": [], "owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "is_accepted": false, "score": 4, "last_activity_date": 1523417567, "last_edit_date": 1523417567, "creation_date": 1523416671, "answer_id": 49765941, "question_id": 49765879, "link": "https://stackoverflow.com/questions/49765879/append-zeros-to-list/49765941#49765941", "title": "Append zeros to list", "body": "<p>Super simple in awk.</p>\n\n<pre><code>$ awk -F, '{for(;NF&lt;4;$(NF+1)=0);} 1' OFS=, i.csv\n</code></pre>\n\n<p>This uses a for loop whose condition is your field count goal and whose action adds another field. This works in BSD awk and GNU awk, I haven't tested in mawk or other awks.</p>\n\n<p>In sed, however, the solution looks a little more complicated.</p>\n\n<pre><code>$ sed -e ':start' -e '/,.*,.*,/b end' -e 's/$/,0/' -e 'b start' -e ':end' i.csv\n</code></pre>\n\n<p>Or more compactly:</p>\n\n<pre><code>$ sed -e ':start\n  /,.*,.*,/b end\n  s/$/,0/\n  b start\n  :end' i.csv\n</code></pre>\n\n<p>The strategy here is to test for four fields by looking for three field separators, then step through a loop that adds a <code>,0</code> until we pass that test, at which point we <code>b end</code> (branch to the <code>:end</code> label) to quit. Then print the line, as it's the default action.</p>\n\n<p>This was tested in BSD sed, but should be equally compatible (and perhaps more compactable) in GNU sed.</p>\n"}, {"tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 3, "last_activity_date": 1523417637, "last_edit_date": 1523417637, "creation_date": 1523416831, "answer_id": 49765964, "question_id": 49765879, "link": "https://stackoverflow.com/questions/49765879/append-zeros-to-list/49765964#49765964", "title": "Append zeros to list", "body": "<p>Following <code>awk</code> may help here too.</p>\n\n<pre><code>awk -F, 'NF&lt;4{i=\"\";while(i&lt;(4-NF)){val=val?val OFS \"0\":\",0\";i++}}{print $0 val;val=\"\"}' OFS=,  Input_file\n</code></pre>\n\n<p>Adding a non-one liner form of solution too now.</p>\n\n<pre><code>awk -F, '\nNF&lt;4{\n  i=\"\";\n  while(i&lt;(4-NF)){\n    val=val?val OFS \"0\":\",0\";\n    i++}\n}\n{\n  print $0 val;\n  val=\"\"\n}' OFS=,  Input_file\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 1, "creation_date": 1523417213, "post_id": 49766021, "comment_id": 86547456, "body": "++ve for quick and nice thought Ed sir :)"}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 4, "last_activity_date": 1523417217, "last_edit_date": 1523417217, "creation_date": 1523417154, "answer_id": 49766021, "question_id": 49765879, "link": "https://stackoverflow.com/questions/49765879/append-zeros-to-list/49766021#49766021", "title": "Append zeros to list", "body": "<pre><code>$ awk 'BEGIN{FS=OFS=\",\"} {for (i=2;i&lt;=4;i++) $i+=0} 1' file\na,10,12,13\nb,20,22,0\nc,30,0,0\nd,33,0,0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "is_accepted": false, "score": 4, "last_activity_date": 1523445013, "last_edit_date": 1523445013, "creation_date": 1523418025, "answer_id": 49766138, "question_id": 49765879, "link": "https://stackoverflow.com/questions/49765879/append-zeros-to-list/49766138#49766138", "title": "Append zeros to list", "body": "<p>With <code>perl</code></p>\n\n<pre><code>$ perl -F, -lane 'print join \",\", @F, (0)x(3-$#F)' ip.txt\na,10,12,13\nb,20,22,0\nc,30,0,0\nd,33,0,0\n\n$ perl -F, -lane 'print join \",\", @F, (\"NA\")x(3-$#F)' ip.txt\na,10,12,13\nb,20,22,NA\nc,30,NA,NA\nd,33,NA,NA\n</code></pre>\n\n<ul>\n<li><code>-F,</code> input field delimiter is <code>,</code> and results are accessible from <code>@F</code> array\n\n<ul>\n<li>See <a href=\"https://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/perlrun.html#Command-Switches</a> for command line option details</li>\n</ul></li>\n<li><code>(0)x(3-$#F)</code> add missing zeroes. <code>$#F</code> gives index of last element, for example it is <code>2</code> for the second line - so <code>3-2</code> zeroes added\n\n<ul>\n<li><code>(\"NA\")x(3-$#F)</code> to use <code>NA</code> instead of <code>0</code> as filler element</li>\n</ul></li>\n<li><code>join \",\"</code> use <code>,</code> as delimiter to join array elements</li>\n</ul>\n\n<p><br>\nInspired from <a href=\"https://stackoverflow.com/users/622310/borodin\">Borodin</a>'s answer</p>\n\n<pre><code>$ perl -pe 's|$|\",0\" x (3 - tr/,//)|e' ip.txt \na,10,12,13\nb,20,22,0\nc,30,0,0\nd,33,0,0\n</code></pre>\n\n<ul>\n<li><code>e</code> modifier allows to use Perl code in replacement section</li>\n<li><code>tr/,//</code> will give number of <code>,</code> in input line</li>\n<li><code>x</code> will repeat the given string by <code>(3 - tr/,//)</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 5, "last_activity_date": 1523428151, "creation_date": 1523428151, "answer_id": 49767989, "question_id": 49765879, "link": "https://stackoverflow.com/questions/49765879/append-zeros-to-list/49767989#49767989", "title": "Append zeros to list", "body": "<p>As a Perl one-liner</p>\n\n<pre><code>perl -pe 's/$/,0/ until tr/,// &gt;= 3' myfile\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>a,10,12,13\nb,20,22,0\nc,30,0,0\nd,33,0,0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1371, "user_id": 5056806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfa01ad122fc89b571651ffbbc34ce37?s=128&d=identicon&r=PG&f=1", "display_name": "Claes Wikner", "link": "https://stackoverflow.com/users/5056806/claes-wikner"}, "is_accepted": false, "score": 0, "last_activity_date": 1523495940, "last_edit_date": 1523495940, "creation_date": 1523442030, "answer_id": 49772540, "question_id": 49765879, "link": "https://stackoverflow.com/questions/49765879/append-zeros-to-list/49772540#49772540", "title": "Append zeros to list", "body": "<pre><code>awk 'BEGIN{FS=OFS=\",\"}$3==\"\"{$3=\"0\"}$4==\"\"{$4=\"0\"}1' file\n\na,10,12,13\nb,20,22,0\nc,30,0,0\nd,33,0,0\n</code></pre>\n\n<p>First it says to keep the field separator in the output as well and then fill empty fields in $3,$4 with zeros.</p>\n"}], "owner": {"reputation": 6315, "user_id": 5411198, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FabOI.jpg?s=128&g=1", "display_name": "sergio MAGA", "link": "https://stackoverflow.com/users/5411198/sergio-maga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 49766021, "answer_count": 7, "score": 3, "last_activity_date": 1523495940, "creation_date": 1523416212, "question_id": 49765879, "link": "https://stackoverflow.com/questions/49765879/append-zeros-to-list", "title": "Append zeros to list", "body": "<p>I have the following input file:</p>\n\n<pre><code>a,10,12,13\nb,20,22\nc,30\nd,33\n</code></pre>\n\n<p>and would like to append zeros until each line has three numbers, so this should be the output:</p>\n\n<pre><code>a,10,12,13\nb,20,22,0\nc,30,0,0\nd,33,0,0\n</code></pre>\n\n<p>In <code>sed</code> I could do use these two commands:</p>\n\n<pre><code>sed 's/\\([a-z],[0-9]\\+$\\)/\\1,0,0/g'\nsed 's/\\([a-z],[0-9]\\+,[0-9]\\+$\\)/\\1,0/g'\n</code></pre>\n\n<p>My regex knowledge is limited to <code>sed</code> and I would like to know how to achieve this with <code>awk</code> or <code>perl</code>.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 3, "creation_date": 1523412786, "post_id": 49765210, "comment_id": 86546411, "body": "Missing semicolon after <code>$output = $1.$2</code> makes the following <code>if</code> into a statement modifier, and eventually the parser realizes it can&#39;t make that work."}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1523413085, "post_id": 49765210, "comment_id": 86546477, "body": "You also need to remove the comment mark from  the <code>#}</code> in the second to last line so that all braces are balanced."}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 2, "creation_date": 1523413185, "post_id": 49765210, "comment_id": 86546512, "body": "You probably want to <code>use strict;</code> and <code>use warnings;</code> at the beginning of your code."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1523413476, "post_id": 49765210, "comment_id": 86546565, "body": "<code>gt</code> is the stringwise comparison operator. You want <code>&gt;</code> if you\u2019re comparing numbers."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 1, "creation_date": 1523447419, "post_id": 49765210, "comment_id": 86563493, "body": "there&#39;re more <code>{</code> than <code>}</code> I think you should comment the one directly under your commented <code>if</code>  you should also be consistent in the place you write <code>{</code> after a control structure/loop. Either on the same line, or on the next line, but you should be consistent ;)"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9627903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/377f74ff16765a7f607b61c6cc978e68?s=128&d=identicon&r=PG&f=1", "display_name": "zephyrmoth", "link": "https://stackoverflow.com/users/9627903/zephyrmoth"}, "edited": false, "score": 0, "creation_date": 1523508126, "post_id": 49769745, "comment_id": 86591263, "body": "This was a section of code that I was having errors in, I removed the boilerplate for conciseness&#39; sake. However, this did fix my error- I&#39;m generally used to languages with more verbose errors, so thank you for the help!"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1523434033, "creation_date": 1523434033, "answer_id": 49769745, "question_id": 49765210, "link": "https://stackoverflow.com/questions/49765210/mysterious-perl-syntax-errors/49769745#49769745", "title": "Mysterious Perl Syntax Errors?", "body": "<p>The rule of thumb when trying to trace syntax errors, is look at the line before. </p>\n\n<p>Your error points to:</p>\n\n<pre><code>        if(!exists $testedhash{\"$resolvable\"}){\n</code></pre>\n\n<p>But actually, that's the 'end' of the error - the point at which perl is sure that there's a problem. </p>\n\n<p>It starts with the whole statement that's a part of. And because you're missing a <code>;</code> on the preceeding line, that's \"counted\". </p>\n\n<p>Your statement is actually:</p>\n\n<pre><code>    $output = $1.$2 if(!exists $testedhash{\"$resolvable\"}){\n</code></pre>\n\n<p>And up until that <code>{</code> that's valid - you can assign a value based on a post condition. </p>\n\n<p>However, you really want to include in your code:</p>\n\n<ul>\n<li><code>use strict;</code> </li>\n<li><code>use warnings;</code></li>\n<li>and if you're not sure about an error - <code>use diagnostics;</code></li>\n</ul>\n\n<p>You've a few other logic errors in your code which have been noted in the comments - your <code>$1</code> and <code>$2</code> aren't valid when you've commented out your regex. And also <code>gt</code> is probably not the thing you want - it's a string comparison - so \"10\" comes before \"2\" instead of after like you might be expecting. </p>\n"}, {"tags": [], "owner": {"reputation": 25590, "user_id": 59135, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/90c563665ec03a1b9e80671bb95deeed?s=128&d=identicon&r=PG", "display_name": "daotoad", "link": "https://stackoverflow.com/users/59135/daotoad"}, "is_accepted": false, "score": 0, "last_activity_date": 1523998617, "creation_date": 1523998617, "answer_id": 49887372, "question_id": 49765210, "link": "https://stackoverflow.com/questions/49765210/mysterious-perl-syntax-errors/49887372#49887372", "title": "Mysterious Perl Syntax Errors?", "body": "<p>SO doesn't really reward this, blah blah blah, whine, whatever.  But I tidied up your code and threw some comments in on what I changed.  I hope you find it helpful.</p>\n\n<p>Note that I didn't actually test this, so I could have busted it all up.  YMMV, known to cause cancer in laboratory rats, 3 out of 4 dentists like to chew gum.  </p>\n\n<pre><code>use strict;    # Until you understand why you wouldn't want it, use strict.  It will save you a ton of errors.\nuse warnings;  # Same with warnings.\n\n# Break up your regexes into labeled pieces\n# It makes them easier to understand.\nmy $UDP_DATA = qr{udp\\d*://};\nmy $HOST_NAME = qr/[^\\s,]+/;\nmy $HOST_IP4_ADDRESS = qr/\\d+\\(?.\\d+){3}/;\nmy $SOME_STUFF = qr/Face\\sId:..../;\n\n\nmy $n = SomeKindOfPinger-&gt;new();\n\nwhile (defined my $line = &lt;$file&gt;) {\n\n    # Use early returns and loop continuation to avoid deep nesting.\n    # Extended regexes let you use space and comments in regexes to make them even easier to read.\n    next unless $line =~ m{\n            ( $UDP_DATA )\n            (   $HOST_IP4_ADDRESS\n              | $HOST_NAME\n            )\n            \\s $SOME_STUFF\n        }x;\n\n    # Use better variable names, output could be anything.\n    # we don't know if resolvable is resolvable at this point, so it's just a host.\n    my $label = \"$1$2\";\n    my $host = $2;\n\n    # Bail out avoids nesting again.\n    # Variable names with types in them like \"some_hash\" or \"monkey_array\" are a code smell.\n    next if exists $tested_hosts{$host};\n\n    $tested_hosts{$host}++;\n\n    # We got to reuse that regex piece. Handy.\n    if ( $host =~ $HOST_IP4_ADDRESS ) {\n        # If you have a bunch of checks to do, put them in a data structure and iterate\n        my @octets = split /\\./, $host;\n        my @bad = grep $_&gt;255, @octets; # grep is like JS 'filter' function.\n                                        # This says: \"Show me the malformed octets.\"\n\n        # An array, like @bad, in scalar context to the number of items in the array.\n        # So it returns 0 or FALSE if it is empty.\n        # So if any octets are malformed, we print the message.\n        print \"$line is malformed\\n\"\n            if @bad;\n    }\n    else {\n        # if you are doing the same kind of operation, no matter how an if/else chain goes,\n        # just with different data, use a ternary operator.\n        # Here, we print no matter what.\n        # So if ping is true, we print the happy message. Otherwise we print the sad message.\n        print $n-&gt;ping($host)\n            ? \"$label is up\\n\"\n            : \"$label is busted\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9627903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/377f74ff16765a7f607b61c6cc978e68?s=128&d=identicon&r=PG&f=1", "display_name": "zephyrmoth", "link": "https://stackoverflow.com/users/9627903/zephyrmoth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 49769745, "answer_count": 2, "score": -1, "last_activity_date": 1523998617, "creation_date": 1523411103, "question_id": 49765210, "link": "https://stackoverflow.com/questions/49765210/mysterious-perl-syntax-errors", "title": "Mysterious Perl Syntax Errors?", "body": "<p>My Perl code is throwing me two syntax errors on the commented lines, but I cannot parse what's wrong here (I've put it through a couple of tools). I'm admittedly very new to Perl but I don't know what's wrong as the compiler is very unspecific.</p>\n\n<pre><code>while (&lt;$file&gt;)\n {  \n#if(/(udp(\\d*):\\/\\/)([^\\s,]+|\\d+\\.\\d+\\.\\d+\\.\\d+)(\\sFace\\sId:....\\))?/)\n    {\n        $resolvable = $2;\n        $output = $1.$2\n        if(!exists $testedhash{\"$resolvable\"}){\n            $testedhash{\"$resolvable\"} = 1;\n            if($resolvable =~ /(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)/)\n            {\n                my $temp = 255;\n                if($1 gt $temp || $2 gt $temp || $3 gt $temp || $4 gt $temp)\n                {\n                    print \"$_ is malformed\\n\"\n                }\n            }\n            else\n            {\n                if($n-&gt;ping($resolvable))\n                {\n                    print \"$output is up\\n\"\n                }\n                else\n                {\n                    print \"$resolvable is down\\n\"\n                }\n            }\n        }\n    #}\n }\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "edited": false, "score": 0, "creation_date": 1523415996, "post_id": 49764762, "comment_id": 86547182, "body": "White annotation: <code>perl -00 -ne &quot;s&#47;([ \\t\\n\\r][0-9]+[.][ \\t\\n\\r]\\w+[ \\t\\n\\r])&#47;$1\\$14 &#47;g;print;&quot; games.pgn&gt;dollar14.pgn</code> Black annotation: <code>perl -00 -ne &quot;s&#47;([ \\t\\n\\r][0-9]+[.][ \\t\\n\\r][^ \\t\\n\\r]+?[ \\t\\n\\r][^ \\t\\n\\r]+)&#47;$1 \\$18&#47;g;print;&quot; games.pgn&gt;dollar18.pgn</code> <a href=\"https://regex101.com/r/wu6SKZ/2\" rel=\"nofollow noreferrer\">Demo</a>"}, {"owner": {"reputation": 29, "user_id": 9627713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/671b4a0c85dad6a8f778b9bdab3e6be9?s=128&d=identicon&r=PG&f=1", "display_name": "darmar", "link": "https://stackoverflow.com/users/9627713/darmar"}, "reply_to_user": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "edited": false, "score": 0, "creation_date": 1523418173, "post_id": 49764762, "comment_id": 86547710, "body": "These are God&#39;s commands. People who think my question is unuseful  know nothing about chess database, chess openbooks and many others thinks. In the answer of this great person you can learn how to substitute &#39;$&#39;  a dollar sign like simple letter and functions of &#39;^&#39; and &#39;\\w+&#39;. Thank you very much. I am going in [link](talkchess.com) to say everybody &quot;we got the tool to change chess world&quot;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "edited": false, "score": 0, "creation_date": 1523437525, "post_id": 49764762, "comment_id": 86556667, "body": "@wp78de why did you delete the answer? It looked perfectly valid. The question is a bit odd, but in my opinion it has sample code, sample data, a description of the problem and attempt at solving it. It&#39;s a bit of an unusual domain that we don&#39;t see often here, but that&#39;s what makes this place fun imho. :)"}, {"owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1523457051, "post_id": 49764762, "comment_id": 86570699, "body": "@simbabque well, it was down-voted."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "edited": false, "score": 0, "creation_date": 1523459094, "post_id": 49764762, "comment_id": 86572316, "body": "@wp78de I think that downvote came from someone who didn&#39;t believe this question should be answered. Don&#39;t let yourself be stopped from a single downvote."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 9627713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/671b4a0c85dad6a8f778b9bdab3e6be9?s=128&d=identicon&r=PG&f=1", "display_name": "darmar", "link": "https://stackoverflow.com/users/9627713/darmar"}, "edited": false, "score": 0, "creation_date": 1523411714, "post_id": 49765132, "comment_id": 86546147, "body": "Thank you very much!  Unbelievable it&#39;s working   Please what is command line to sign every black moves with &quot;$15&quot; ?"}, {"owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "reply_to_user": {"reputation": 29, "user_id": 9627713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/671b4a0c85dad6a8f778b9bdab3e6be9?s=128&d=identicon&r=PG&f=1", "display_name": "darmar", "link": "https://stackoverflow.com/users/9627713/darmar"}, "edited": false, "score": 0, "creation_date": 1523412518, "post_id": 49765132, "comment_id": 86546335, "body": "@darmar sure thing. BTW: Why are you doing this?"}, {"owner": {"reputation": 29, "user_id": 9627713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/671b4a0c85dad6a8f778b9bdab3e6be9?s=128&d=identicon&r=PG&f=1", "display_name": "darmar", "link": "https://stackoverflow.com/users/9627713/darmar"}, "edited": false, "score": 0, "creation_date": 1523413029, "post_id": 49765132, "comment_id": 86546471, "body": "Command for black moves is signed every 2nd black move, not every black move. Something is wrong   1. c4 Nf6 2. g3 c5 $18 3. Bg2 Nc6 4. Nc3 g6 $18 5. Nf3 Bg7 6. O-O O-O 7. d4 d6 $18 8. d5 Na5 9. Nd2 a6 $18 10. Qc2 Rb8 11. b3 b5 $18 12. Rb1 e5 13. Bb2 Ne8 $18 14. e3 f5 15. Ne2 Bd7 $18 16. Nc1 Nf6 17. Nd3 e4 $18 18. Nf4 Qe7 19. h4 Ng4 $18 20. Rfc1 Bxb2 21. Qxb2 Ne5 $18 22. Qa3 Qd8 23. f3 exf3 $18 24. Nxf3 Ng4 25. Ng5 Qb6 $18 26. h5 gxh5 27. Bh3 bxc4 $18 28. Bxg4 hxg4 29. Qb2 Qd8 $18 30. Nge6 Qf6 31. Nxf8 Qxb2 $18 32. Rxb2 Kxf8 33. Rcb1 Rb5 $18 34. Kf2 Be8 35. Ne6+ Ke7 1/2-1/2"}, {"owner": {"reputation": 29, "user_id": 9627713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/671b4a0c85dad6a8f778b9bdab3e6be9?s=128&d=identicon&r=PG&f=1", "display_name": "darmar", "link": "https://stackoverflow.com/users/9627713/darmar"}, "edited": false, "score": 0, "creation_date": 1523413630, "post_id": 49765132, "comment_id": 86546605, "body": "I am using &quot;signed&quot; games for make open book ctg. format ( it ctg.book can works in Fritz chess program )"}, {"owner": {"reputation": 29, "user_id": 9627713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/671b4a0c85dad6a8f778b9bdab3e6be9?s=128&d=identicon&r=PG&f=1", "display_name": "darmar", "link": "https://stackoverflow.com/users/9627713/darmar"}, "edited": false, "score": 1, "creation_date": 1523414602, "post_id": 49765132, "comment_id": 86546858, "body": "I have split all games in 3 different database : 1. correspondence chess gamess (only players rating 2300+); 2. Playchess engine games - long time control ( 120 min, 180 min ); 3. Playchess engine games - blitz strongest players only And all these games are inported in the openbook ctg. format. I need different signed moves for every database because I can to know what move in the book is from which database. Correspondence moves are strongest, than long time control and bliz moves are weakest ..."}, {"owner": {"reputation": 29, "user_id": 9627713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/671b4a0c85dad6a8f778b9bdab3e6be9?s=128&d=identicon&r=PG&f=1", "display_name": "darmar", "link": "https://stackoverflow.com/users/9627713/darmar"}, "edited": false, "score": 0, "creation_date": 1546490352, "post_id": 49765132, "comment_id": 94869560, "body": "Happy New Year . Please can you improve commands for white and black games? I will try to explain what the problem is for black moves signed games, <a href=\"http://prntscr.com/m2fcqf\" rel=\"nofollow noreferrer\">prntscr.com/m2fcqf</a> .First 7 moves are in same line but 8th move has 2 possibility: a) in the 1st line are number (8) and dot (.) but move (Bh4) is in the 2nd line (seems between exists Shift+Enter command and because black move didn&#39;t signed with ($15).; b) in end of 1st line is full 8th white move (8. d5) but in 2nd line black move isn&#39;t signed with sign ($15) because &#39;Split line downwards&#39; exits there"}, {"owner": {"reputation": 29, "user_id": 9627713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/671b4a0c85dad6a8f778b9bdab3e6be9?s=128&d=identicon&r=PG&f=1", "display_name": "darmar", "link": "https://stackoverflow.com/users/9627713/darmar"}, "edited": false, "score": 0, "creation_date": 1546490832, "post_id": 49765132, "comment_id": 94869665, "body": "Similarly for white moves: <a href=\"http://prntscr.com/m2fclj\" rel=\"nofollow noreferrer\">prntscr.com/m2fclj</a>  , in the 1st line is &quot;8.&quot; and in the 2nd line is &quot;f3&quot; which isn&#39;t signed because between them exists &#39;Shift+Enter&#39; command or  &#39;Split line downwards&#39;. Can you include  &#39;Split line downwards&#39; in commands ?"}, {"owner": {"reputation": 29, "user_id": 9627713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/671b4a0c85dad6a8f778b9bdab3e6be9?s=128&d=identicon&r=PG&f=1", "display_name": "darmar", "link": "https://stackoverflow.com/users/9627713/darmar"}, "edited": false, "score": 0, "creation_date": 1546494745, "post_id": 49765132, "comment_id": 94870567, "body": "Ahhh I see every move in new line isn&#39;t signed.  I believe it&#39;s easy to improve commands to sign all moves. Here is picture and there are some CR LF characters   <a href=\"http://prntscr.com/m2g11w\" rel=\"nofollow noreferrer\">prntscr.com/m2g11w</a>"}], "tags": [], "owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "is_accepted": false, "score": 0, "last_activity_date": 1523456827, "last_edit_date": 1523456827, "creation_date": 1523410539, "answer_id": 49765132, "question_id": 49764762, "link": "https://stackoverflow.com/questions/49764762/how-to-put-18-after-every-white-move-in-pgn-chess-database/49765132#49765132", "title": "How to put &quot;$18&quot; after every white move in pgn chess database?", "body": "<p>The problem here is, the move no. with the dot is not the anchor for your rexep replacement. The second thing is, you have to escape the <code>$</code> sign in replace pattern.</p>\n\n<p>Try this:</p>\n\n<pre><code>perl -00 -ne \"s/([ \\t\\n\\r][0-9]+[.][ \\t\\n\\r]\\w+[ \\t\\n\\r])/$1\\$14 /g;print;\" games.pgn&gt;dollar14.pgn\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/wu6SKZ/1\" rel=\"nofollow noreferrer\"><strong>Demo</strong></a></p>\n\n<p>In a similar fashion you can annotate the black moves:</p>\n\n<pre><code>perl -00 -ne \"s/([ \\t\\n\\r][0-9]+[.][ \\t\\n\\r][^ \\t\\n\\r]+?[ \\t\\n\\r][^ \\t\\n\\r]+)/$1 \\$18/g;print;\" games.pgn&gt;dollar18.pgn\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/wu6SKZ/2\" rel=\"nofollow noreferrer\"><strong>Demo2</strong></a></p>\n"}], "owner": {"reputation": 29, "user_id": 9627713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/671b4a0c85dad6a8f778b9bdab3e6be9?s=128&d=identicon&r=PG&f=1", "display_name": "darmar", "link": "https://stackoverflow.com/users/9627713/darmar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "closed_date": 1523437993, "answer_count": 1, "score": 0, "last_activity_date": 1523456827, "creation_date": 1523407357, "last_edit_date": 1523410842, "question_id": 49764762, "link": "https://stackoverflow.com/questions/49764762/how-to-put-18-after-every-white-move-in-pgn-chess-database", "closed_reason": "Duplicate", "title": "How to put &quot;$18&quot; after every white move in pgn chess database?", "body": "<p>I will try to explain what I want here:<br>\n-this is command I got from somebody in TCEC chat : </p>\n\n<pre><code>perl -00 -ne \"s/([ \\t\\n\\r][0-9]+[.][ \\t\\n\\r])/!$1/g;print;\" games.pgn&gt;blackwon.pgn \n</code></pre>\n\n<p>(this command working in Perl's command prompt)</p>\n\n<p>I am using it to make all black moves \"!\"-signed in the database finished 0-1. Similar command is signing all white moves \"!\" in database contains games finished 1-0. </p>\n\n<p>Similar command is this: </p>\n\n<pre><code>perl -00 -ne \"s/([ \\t\\n\\r][0-9]+[.][ \\t\\n\\r])/?$1/g;print;\" games.pgn&gt;blacklost.pgn \n</code></pre>\n\n<p>this signed all black moves \"?\" in every game in the whole database contains games finished 1-0.</p>\n\n<p>And these commands are perfectly working with sign <code>!!</code>, <code>!?</code>, <code>?!</code> and <code>??</code> too (only need to put them in the command line instead existing <code>!</code> or <code>?</code> sign).</p>\n\n<p>I am using these \"signed games\" for make <code>ctg.book</code>. </p>\n\n<p>But I tried ( unsuccessfully ) to get commands to put this sign (<code>$18</code>) or combination (<code>$144 $40</code> for ex.) on the right place in the <code>pgn.file</code>. It is not same as commands about <code>!</code>,<code>?</code> signs because (<code>$18</code>) comes after extra space ahead move (white or black). Another problem is that <code>$</code> is not simple letter/sign in Perl ( but a dollar sign (<code>$</code>) has some function). </p>\n\n<p>Here is example what signs exist -</p>\n\n<pre><code>$18\n$19\n$16\n$17\n$14\n$15\n$11\n$13\n$36\n$44\n$32\n</code></pre>\n\n<p>Or a combination:</p>\n\n<pre><code>$144 $40\n</code></pre>\n\n<p>Like in the next game:</p>\n\n<pre><code>1. e4 $18 c6 $19 2. d4 $16 d5 $17 3. e5 $14 Bf5 $15 4. Nf3 $11 e6 $13 5. Be2 $36 Nd7 $44 6. O-O $144 $40 Ne7 $32 * \n</code></pre>\n\n<p>And what we can to do about that? Can somebody very smart to make program to put this \"sign\" <code>$18</code> in pgn games of whole database after every white move or after every black move or in same time after every white and black move?</p>\n\n<p>Here is example game where did import sign <code>$14</code> after every white move (but notice that after white move and sign <code>$14</code> have space):</p>\n\n<pre><code>[Event \"?\"] \n[Site \"?\"] \n[Date \"2018.04.11\"] \n[Round \"?\"] \n[White \"Bond\"] \n[Black \"Tor\"] \n[Result \"1/2-1/2\"] \n[ECO \"C88\"] \n[Annotator \"Top\"] \n[PlyCount \"26\"] \n[SourceDate \"2018.04.11\"] \n[SourceVersionDate \"2018.04.11\"]\n\n1. e4 $14 e5 2. Nf3 $14 Nc6 3. Bb5 $14 a6 \n4. Ba4 $14 Nf6 5. O-O $14 Be7 6. Re1 $14 b5 \n7. Bb3 $14 O-O 8. h3 $14 Bb7 9. d3 $14 d6 \n10. a3 $14 Nb8 11. Nbd2 $14 Nbd7 12. Nf1 $14 Re8 \n13. Ng3 $14 Bf8 1/2-1/2\n</code></pre>\n"}, {"tags": ["perl", "elasticsearch", "pagination", "catalyst"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1523437707, "post_id": 49755931, "comment_id": 86556816, "body": "Do you want this to be a page reload or an AJAX call?"}, {"owner": {"reputation": 153, "user_id": 7812937, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3efb67c1c6cce7e59b8c133ac95c09a7?s=128&d=identicon&r=PG&f=1", "display_name": "K Soze", "link": "https://stackoverflow.com/users/7812937/k-soze"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1523440663, "post_id": 49755931, "comment_id": 86558925, "body": "See my Edit 1. I dont want to make AJAX call."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1523441009, "post_id": 49755931, "comment_id": 86559190, "body": "I think you should try to read up more about pagination."}, {"owner": {"reputation": 153, "user_id": 7812937, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3efb67c1c6cce7e59b8c133ac95c09a7?s=128&d=identicon&r=PG&f=1", "display_name": "K Soze", "link": "https://stackoverflow.com/users/7812937/k-soze"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1523443220, "post_id": 49755931, "comment_id": 86560642, "body": "Some documentations in mind ?"}], "answers": [{"tags": [], "owner": {"reputation": 153, "user_id": 7812937, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3efb67c1c6cce7e59b8c133ac95c09a7?s=128&d=identicon&r=PG&f=1", "display_name": "K Soze", "link": "https://stackoverflow.com/users/7812937/k-soze"}, "is_accepted": true, "score": 0, "last_activity_date": 1523456453, "creation_date": 1523456453, "answer_id": 49777564, "question_id": 49755931, "link": "https://stackoverflow.com/questions/49755931/how-to-paginate-in-a-catalyst-app-using-elasticsearch/49777564#49777564", "title": "How to paginate in a Catalyst app using elasticsearch?", "body": "<p>See the original post with the two edits I made.</p>\n"}], "owner": {"reputation": 153, "user_id": 7812937, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3efb67c1c6cce7e59b8c133ac95c09a7?s=128&d=identicon&r=PG&f=1", "display_name": "K Soze", "link": "https://stackoverflow.com/users/7812937/k-soze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 49777564, "answer_count": 1, "score": 1, "last_activity_date": 1523456453, "creation_date": 1523369720, "last_edit_date": 1523456298, "question_id": 49755931, "link": "https://stackoverflow.com/questions/49755931/how-to-paginate-in-a-catalyst-app-using-elasticsearch", "title": "How to paginate in a Catalyst app using elasticsearch?", "body": "<p>I am using the web framework Catalyst and I want to paginate results from elasticsearch query with the plugin <a href=\"https://metacpan.org/pod/Data::Paginator\" rel=\"nofollow noreferrer\">Data::Paginator</a>. Here is my code for now:</p>\n\n<blockquote>\n  <p>Root.pm</p>\n</blockquote>\n\n<pre><code>sub search :Global {\n    my ( $self, $c ) = @_;\n    my $search = $c-&gt;model('Search');\n    my $m = $c-&gt;req-&gt;params-&gt;{m};\n\n    my $from = 0;\n    my $size = 10;          \n\n    my $results = $search-&gt;search(\n      index =&gt; 'index1',\n      type =&gt; 'type1',\n      body  =&gt; {\n        query =&gt; {\n            prefix =&gt; { entree =&gt; $m }\n        },\n    from =&gt; $from,\n    size =&gt; $size\n      }\n    );\n\n    my $pager = Data::Paginator-&gt;new(\n     current_page =&gt; 1,\n     entries_per_page =&gt; 10,\n     total_entries =&gt; $results-&gt;{hits}{total},\n    );\n    my $p = { next_page=&gt;$pager-&gt;next_page, previous_page=&gt;$pager-&gt;previous_page };\n\n    my @res=();\n    for my $i ( @{ $results-&gt;{hits}-&gt;{hits} } ) {\n      my $h = { entree =&gt; $i-&gt;{_source}-&gt;{entree}, contenu =&gt; $i-&gt;{_source}-&gt;{contenu} };\n      push @res, $h;\n    }\n\n    $c-&gt;stash(template =&gt; 'search.tt', total =&gt; $results-&gt;{hits}{total}, m=&gt;$m , res=&gt;\\@res, pager=&gt;$p);\n    $c-&gt;forward('View::HTML');\n}\n</code></pre>\n\n<p>And there is the template </p>\n\n<blockquote>\n  <p>search.tt</p>\n</blockquote>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"fr\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;title&gt;R\u00e9sultats&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;[% total %] r\u00e9sultat(s) pour [% m %]&lt;/h1&gt;\n    [% IF total &gt;0 %]\n      [% FOREACH h IN res %]\n        &lt;h2&gt;[% h.entree %]&lt;/h2&gt;\n        &lt;p&gt;[% h.contenu %]&lt;/p&gt;\n      [% END %]\n    [% ELSE %]\n      &lt;p&gt;Pas de r\u00e9sultat&lt;/p&gt;\n    [% END %]\n  &lt;/body&gt;\n  &lt;footer&gt;\n    &lt;a href=\"/\"&gt;Nouvelle recherche&lt;/a&gt;\n    &lt;a href=\"/search?offset=[% pager.previous_page %]&amp;m=[% m %]\"&gt;Previous Page&lt;/a&gt;\n    &lt;a href=\"/search?offset=[% pager.next_page %]&amp;m=[% m %]\"&gt;Next Page&lt;/a&gt;\n    &lt;a&gt; DATA PAGINATOR TEST [% pager %]&lt;/a&gt;\n &lt;/footer&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I would like to make a new query through elasticsearch when I click \"Next Page\" or \"Previous Page\" and display the new results:</p>\n\n<pre><code> my $results = $search-&gt;search(\n      index =&gt; 'index1',\n      type =&gt; 'type1',\n      body  =&gt; {\n        query =&gt; {\n            prefix =&gt; { entree =&gt; $m }\n        },\n    from =&gt; $from + 10, \n</code></pre>\n\n<blockquote>\n  <p>OR from => $from -10,</p>\n</blockquote>\n\n<pre><code>    size =&gt; $size\n      }\n    );\n</code></pre>\n\n<p>Some hints on how to do that would be nice, thanks.</p>\n\n<p><strong><em>EDIT 1:</em></strong> </p>\n\n<blockquote>\n  <p>Root_v2.pm</p>\n</blockquote>\n\n<pre><code>sub search :Global {\n    my ( $self, $c ) = @_;\n    my $search = $c-&gt;model('Search');\n    my $m = $c-&gt;req-&gt;params-&gt;{m};\n    my $offset = $c-&gt;req-&gt;params-&gt;{offset} ? $c-&gt;req-&gt;params-&gt;{offset} : 0;\n\n    my $from = 0;\n    my $size = 10;          \n\n    my $results = $search-&gt;search(\n      index =&gt; 'index1',\n      type =&gt; 'type1',\n      body  =&gt; {\n        query =&gt; {\n            prefix =&gt; { entree =&gt; $m }\n        },\n    from =&gt; $offset*$size,\n    size =&gt; $size\n      }\n    );\n\n    my $pager = Data::Paginator-&gt;new(\n     current_page =&gt; $offset,\n     entries_per_page =&gt; 10,\n     total_entries =&gt; $results-&gt;{hits}{total},\n    );\n    my $p = { next_page=&gt;$pager-&gt;next_page, previous_page=&gt;$pager-&gt;previous_page };\n\n    my @res=();\n    for my $i ( @{ $results-&gt;{hits}-&gt;{hits} } ) {\n      my $h = { entree =&gt; $i-&gt;{_source}-&gt;{entree}, contenu =&gt; $i-&gt;{_source}-&gt;{contenu} };\n      push @res, $h;\n    }\n\n    $c-&gt;stash(template =&gt; 'search.tt', total =&gt; $results-&gt;{hits}{total}, m=&gt;$m , res=&gt;\\@res, pager=&gt;$p);\n    $c-&gt;forward('View::HTML');\n}\n</code></pre>\n\n<p>I get the offset from the href in my search.tt file and I used it to modify my \"from\" parameter in the elasticsearch query.</p>\n\n<p>But I have a problem with the \"current_page\" from Data::Paginator : it's never equal to 0 even when my $offset is equal to 0 itself (see current_page => $offset). I miss the 10th to 20th results when I first click on next page.</p>\n\n<p>The behaviour is like this: </p>\n\n<blockquote>\n  <p>Click on search button: OFFSET=0 / CURRENT_PAGE=1 / NEXT_PAGE=2\n  / PREVIOUS_PAGE=not def</p>\n  \n  <p>Click on next page button: OFFSET=2 / CURRENT_PAGE=2 / NEXT_PAGE=3\n  / PREVIOUS_PAGE=1</p>\n  \n  <p>Click on previous page button: OFFSET=1 / CURRENT_PAGE=1 / NEXT_PAGE=2\n  / PREVIOUS_PAGE=not def</p>\n</blockquote>\n\n<p>You can see that I miss results when I first click on next page button, due to my offset directly goes from 0 to 2 skipping 1.</p>\n\n<p><strong><em>EDIT 2</em></strong></p>\n\n<blockquote>\n  <p>Root_v3.pm</p>\n</blockquote>\n\n<p>Modifications:</p>\n\n<pre><code>my $offset = $c-&gt;req-&gt;params-&gt;{offset} ? $c-&gt;req-&gt;params-&gt;{offset} : O; \n\u25bc\u25bc\u25bc\nmy $offset = $c-&gt;req-&gt;params-&gt;{offset} ? $c-&gt;req-&gt;params-&gt;{offset} : 1;\n</code></pre>\n\n<p>AND</p>\n\n<pre><code>from =&gt; $offset*$size,\n\u25bc\u25bc\u25bc\nfrom =&gt; ($offset-1)*$size,\n</code></pre>\n\n<p>Now it works !</p>\n"}, {"tags": ["perl", "google-chrome", "www-mechanize"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 2, "creation_date": 1523438954, "post_id": 49754216, "comment_id": 86557688, "body": "You can record all requests as <a href=\"https://toolbox.googleapps.com/apps/har_analyzer/\" rel=\"nofollow noreferrer\">HAR</a>."}, {"owner": {"reputation": 471, "user_id": 1742886, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/320ca9e6ae5feefbfa9a9f8df9f60bd7?s=128&d=identicon&r=PG", "display_name": "vijayvithal", "link": "https://stackoverflow.com/users/1742886/vijayvithal"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1523611332, "post_id": 49754216, "comment_id": 86641382, "body": "The link speaks of keycodes and clicking on browser elements. I do not think these will be available from  WWW::Mechanize::Chrome :("}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1523440150, "post_id": 49767046, "comment_id": 86558549, "body": "A link to the relevant documentation would be quite useful. WWW::Mechanize::Chrome allows you to call API functions in Chrome, so there might be a way to do this. Effectively that&#39;s all the module does, so it should also just be a matter of subclassing and adding a call (or creating a PR and contributing)."}], "tags": [], "owner": {"reputation": 187, "user_id": 78248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/py5BZ.png?s=128&g=1", "display_name": "Tanami", "link": "https://stackoverflow.com/users/78248/tanami"}, "is_accepted": false, "score": 0, "last_activity_date": 1523423977, "creation_date": 1523423977, "answer_id": 49767046, "question_id": 49754216, "link": "https://stackoverflow.com/questions/49754216/wwwmechanizechrome-capture-xhr-response/49767046#49767046", "title": "WWW::Mechanize::Chrome capture XHR response", "body": "<p>To intercept requests like that, you generally need to use the webRequest API to filter and retrieve specific responses. I do not think you can do that via WWW::Mechanize::Chrome.</p>\n"}, {"tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": -2, "last_activity_date": 1537716821, "creation_date": 1537716821, "answer_id": 52467624, "question_id": 49754216, "link": "https://stackoverflow.com/questions/49754216/wwwmechanizechrome-capture-xhr-response/52467624#52467624", "title": "WWW::Mechanize::Chrome capture XHR response", "body": "<p>WWW::Mechanize::Chrome tries to give you the content of all requests, but Chrome itself does not make the content of XHR requests available ( <a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=457484\" rel=\"nofollow noreferrer\">https://bugs.chromium.org/p/chromium/issues/detail?id=457484</a> ). So the approach I take in (for example ) <a href=\"https://github.com/Corion/Net-Google-Keep\" rel=\"nofollow noreferrer\">Net::Google::Keep</a> is to replay the XHR requests using plain Perl LWP requests by copying the cookies and parameters from the Chrome requests-</p>\n\n<p>Please note that the official support forum for WWW::Mechanize::Chrome is <a href=\"https://perlmonks.org\" rel=\"nofollow noreferrer\">https://perlmonks.org</a> , not StackOverflow.</p>\n"}], "owner": {"reputation": 471, "user_id": 1742886, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/320ca9e6ae5feefbfa9a9f8df9f60bd7?s=128&d=identicon&r=PG", "display_name": "vijayvithal", "link": "https://stackoverflow.com/users/1742886/vijayvithal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1537716821, "creation_date": 1523364689, "question_id": 49754216, "link": "https://stackoverflow.com/questions/49754216/wwwmechanizechrome-capture-xhr-response", "title": "WWW::Mechanize::Chrome capture XHR response", "body": "<p>I am using Perl WWW::Mechanize::Chrome to automate a JS heavy website.</p>\n\n<p>In response to a user click the page among many other requests, requests and loads a JSON file using XHR.</p>\n\n<p>Is there some way to save this particular JSON data to a file?</p>\n"}, {"tags": ["perl", "dancer"], "answers": [{"comments": [{"owner": {"reputation": 10748, "user_id": 13992, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c81f585328c241594864f888f1154025?s=128&d=identicon&r=PG", "display_name": "badp", "link": "https://stackoverflow.com/users/13992/badp"}, "edited": false, "score": 0, "creation_date": 1523366648, "post_id": 49754794, "comment_id": 86524484, "body": "this answer actually found by <a href=\"https://nl.linkedin.com/in/erik-jan-vos-b2135366\" rel=\"nofollow noreferrer\">Erik Jan Vos</a>, please send precious internet karma his way"}, {"owner": {"reputation": 2447, "user_id": 6676466, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/aVqkA.jpg?s=128&g=1", "display_name": "Vishal Chhodwani", "link": "https://stackoverflow.com/users/6676466/vishal-chhodwani"}, "edited": false, "score": 2, "creation_date": 1523415053, "post_id": 49754794, "comment_id": 86546977, "body": "While this code may answer the question, providing additional context regarding why and/or how this code answers the question improves its long-term value"}], "tags": [], "owner": {"reputation": 10748, "user_id": 13992, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c81f585328c241594864f888f1154025?s=128&d=identicon&r=PG", "display_name": "badp", "link": "https://stackoverflow.com/users/13992/badp"}, "is_accepted": false, "score": -1, "last_activity_date": 1523458192, "last_edit_date": 1523458192, "creation_date": 1523366499, "answer_id": 49754794, "question_id": 49753437, "link": "https://stackoverflow.com/questions/49753437/how-do-i-skip-the-serializer-in-dancer2/49754794#49754794", "title": "How do I skip the serializer in Dancer2?", "body": "<pre><code>get '/mything/rss' =&gt; sub {\n  # Calculate the result\n  my $rss = ...;\n  # Mark the request as successful\n  status 200;\n  # Be polite and set the content type\n  content_type 'application/rss+xml; charset=UTF-8';\n  # Jam the result straight into the response object\n  response-&gt;{content} = $rss;\n  # Tell Dancer internals that the response has already been encoded \n  # (this is pretty much guaranteed to break in the future, regrettably)\n  response-&gt;{is_encoded} = 1;\n  # and return.\n  return response;\n}\n</code></pre>\n\n<hr>\n"}, {"comments": [{"owner": {"reputation": 10748, "user_id": 13992, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c81f585328c241594864f888f1154025?s=128&d=identicon&r=PG", "display_name": "badp", "link": "https://stackoverflow.com/users/13992/badp"}, "edited": false, "score": 0, "creation_date": 1523574089, "post_id": 49799818, "comment_id": 86628892, "body": "send_as is literally the first thing I said I tried in my question."}, {"owner": {"reputation": 34792, "user_id": 238, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/77bcaa0eb819a87a6316ca79345b1fd4?s=128&d=identicon&r=PG", "display_name": "Pat", "link": "https://stackoverflow.com/users/238/pat"}, "reply_to_user": {"reputation": 10748, "user_id": 13992, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c81f585328c241594864f888f1154025?s=128&d=identicon&r=PG", "display_name": "badp", "link": "https://stackoverflow.com/users/13992/badp"}, "edited": false, "score": 0, "creation_date": 1524244467, "post_id": 49799818, "comment_id": 86909882, "body": "Can you get the sample code to run outside of your application? The given example should be a fully working dancer2 app. In order to check if the problem is with your Dancer2 installation or something messed up in your app"}], "tags": [], "owner": {"reputation": 34792, "user_id": 238, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/77bcaa0eb819a87a6316ca79345b1fd4?s=128&d=identicon&r=PG", "display_name": "Pat", "link": "https://stackoverflow.com/users/238/pat"}, "is_accepted": false, "score": -1, "last_activity_date": 1524244344, "last_edit_date": 1524244344, "creation_date": 1523545119, "answer_id": 49799818, "question_id": 49753437, "link": "https://stackoverflow.com/questions/49753437/how-do-i-skip-the-serializer-in-dancer2/49799818#49799818", "title": "How do I skip the serializer in Dancer2?", "body": "<p>Use <a href=\"https://metacpan.org/pod/distribution/Dancer2/lib/Dancer2/Manual.pod#send_as\" rel=\"nofollow noreferrer\">send_as</a>:</p>\n\n<blockquote>\n  <p>Allows the current route handler to return specific content types to\n  the client using either a specified serializer or as html.</p>\n</blockquote>\n\n<p>You can use it to specify your own serializer or just use the default html\n serializer but change the content-type for rss</p>\n\n<pre><code>use Dancer2;\nset serializer =&gt; 'JSON';\n\nget '/mything/rss' =&gt; sub {\n  # Get your rss string \n  # ...\n  my $xml = '&lt;rss&gt;content&lt;/rss&gt;';\n  send_as html =&gt; $xml , { content_type =&gt; 'application/rss+xml; charset=UTF-8' };\n}\n\ndance;\n</code></pre>\n"}], "owner": {"reputation": 10748, "user_id": 13992, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c81f585328c241594864f888f1154025?s=128&d=identicon&r=PG", "display_name": "badp", "link": "https://stackoverflow.com/users/13992/badp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 342, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1524244344, "creation_date": 1523362602, "last_edit_date": 1523362913, "question_id": 49753437, "link": "https://stackoverflow.com/questions/49753437/how-do-i-skip-the-serializer-in-dancer2", "title": "How do I skip the serializer in Dancer2?", "body": "<p>My application is configured to send out JSON responses. I need to add an RSS (or anything else) endpoint to it. There are no no-op serializers, though it would be trivial to write one:</p>\n\n<pre><code>{ # do not use this lol\n    package Dancer2::Serializer::ThisIsNotAnOkayThingToDo_Raw;\n    use Moo;\n    with 'Dancer2::Core::Role::Serializer';\n    sub serialize { $_[1] }\n    sub deserialize { $_[1] }\n    1;\n}\n\nget '/mything/rss' =&gt; sub {\n  my $rss = new XML::RSS (version =&gt; '2.0');\n  $rss-&gt;channel(title =&gt; \"Wharrgarbl\");\n  $rss-&gt;add_item(title =&gt; \"Potato\");\n  send_as(ThisIsNotAnOkayThingToDo_Raw =&gt; $rss-&gt;as_string, {content_type =&gt; 'application/rss+xml; charset=UTF-8'});\n}\n</code></pre>\n\n<p>This, however, fails, claiming <code>__PACKAGE__::send_as</code> is not defined (but running <code>perldoc Dancer2::Manual</code> on the server does say <code>send_as</code> should be there).</p>\n\n<pre><code># __PACKAGE__ is me redacting the sensitive out of the error message\nUndefined subroutine &amp;__PACKAGE__::send_as called at...\n</code></pre>\n\n<p>The documentation also claims that <code>send_as</code> uses <code>send_file</code>, so I tried to cut out the middleman:</p>\n\n<pre><code>get '/mything/rss' =&gt; sub {\n  my $rss = new XML::RSS (version =&gt; '2.0');\n  $rss-&gt;channel(title =&gt; \"Wharrgarbl\");\n  $rss-&gt;add_item(title =&gt; \"Potato\");\n  my $xml = $rss-&gt;as_string;\n  send_file(\\$xml, content_type =&gt; 'application/rss+xml; charset=UTF-8');\n}\n</code></pre>\n\n<p>This however goes through the serializer:</p>\n\n<pre><code>hash- or arrayref expected (not a simple scalar, use allow_nonref to allow this) at .../site/lib/JSON.pm line 154.\n</code></pre>\n\n<p>What do?</p>\n"}, {"tags": ["xcode", "perl", "character-encoding", "newline"], "comments": [{"owner": {"reputation": 2757, "user_id": 4250161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dfd697fc459e7b83f3effc36cdb29040?s=128&d=identicon&r=PG&f=1", "display_name": "little", "link": "https://stackoverflow.com/users/4250161/little"}, "edited": false, "score": 0, "creation_date": 1523356779, "post_id": 49751207, "comment_id": 86517409, "body": "How are you doing it in xCode and which xCode version do you have?"}, {"owner": {"reputation": 27138, "user_id": 239219, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/DHquN.jpg?s=128&g=1", "display_name": "J&#225;nos", "link": "https://stackoverflow.com/users/239219/j%c3%a1nos"}, "reply_to_user": {"reputation": 2757, "user_id": 4250161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dfd697fc459e7b83f3effc36cdb29040?s=128&d=identicon&r=PG&f=1", "display_name": "little", "link": "https://stackoverflow.com/users/4250161/little"}, "edited": false, "score": 0, "creation_date": 1523357568, "post_id": 49751207, "comment_id": 86517920, "body": "Version 9.3 (9E145)"}, {"owner": {"reputation": 486130, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1523359036, "post_id": 49751207, "comment_id": 86518889, "body": "Did you try this <a href=\"http://www.perlmonks.org/?node_id=258025\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=258025</a> ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1523363290, "post_id": 49751207, "comment_id": 86521830, "body": "You could use the <code>dos2unix</code> tool"}, {"owner": {"reputation": 3691, "user_id": 843387, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5c48aeef66ede33531f716bd274e7b13?s=128&d=identicon&r=PG", "display_name": "0909EM", "link": "https://stackoverflow.com/users/843387/0909em"}, "edited": false, "score": 0, "creation_date": 1602113603, "post_id": 49751207, "comment_id": 113621113, "body": "FYI - there is some help regarding this on github, which refreshes line endings on your repository (without the need for perl): <a href=\"https://docs.github.com/en/free-pro-team@latest/github/using-git/configuring-git-to-handle-line-endings#refreshing-a-repository-after-changing-line-endings\" rel=\"nofollow noreferrer\">docs.github.com/en/free-pro-team@latest/github/using-git/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 27138, "user_id": 239219, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/DHquN.jpg?s=128&g=1", "display_name": "J&#225;nos", "link": "https://stackoverflow.com/users/239219/j%c3%a1nos"}, "is_accepted": false, "score": 0, "last_activity_date": 1523359166, "creation_date": 1523359166, "answer_id": 49752307, "question_id": 49751207, "link": "https://stackoverflow.com/questions/49751207/how-to-replace-efficiently-newline-characters-in-mac/49752307#49752307", "title": "How to replace efficiently newline characters in Mac", "body": "<p>This worked:</p>\n\n<pre><code>perl -pi -w -e 's/\\r\\n/\\n/g;' *.h\nperl -pi -w -e 's/\\r\\n/\\n/g;' *.m\n</code></pre>\n"}], "owner": {"reputation": 27138, "user_id": 239219, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/DHquN.jpg?s=128&g=1", "display_name": "J&#225;nos", "link": "https://stackoverflow.com/users/239219/j%c3%a1nos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "closed_date": 1523360066, "answer_count": 1, "score": -1, "last_activity_date": 1523359176, "creation_date": 1523355849, "last_edit_date": 1523359176, "question_id": 49751207, "link": "https://stackoverflow.com/questions/49751207/how-to-replace-efficiently-newline-characters-in-mac", "closed_reason": "Duplicate", "title": "How to replace efficiently newline characters in Mac", "body": "<p>Someone in our development team merged in code but with windows newline characters. And git, merging tool get crazy about it. How is it possible to replace all <code>0D0A</code> -> <code>0A</code> in the whole Xcode project? If I do it in Xcode, Xcode crashed.</p>\n\n<p><a href=\"https://i.stack.imgur.com/qM94V.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qM94V.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["xml", "perl", "xml-twig"], "comments": [{"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "edited": false, "score": 1, "creation_date": 1523355700, "post_id": 49750886, "comment_id": 86516662, "body": "what&#39;s <code>$stdout</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1523372883, "post_id": 49750886, "comment_id": 86529175, "body": "<code>nparse_pp</code> is a class method, not an object method."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1523372884, "post_id": 49751458, "comment_id": 86529178, "body": "<code>XML::Twig-&gt;nparse_pp($xml_string)-&gt;print;</code>"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 5, "last_activity_date": 1523356579, "creation_date": 1523356579, "answer_id": 49751458, "question_id": 49750886, "link": "https://stackoverflow.com/questions/49750886/attempt-to-bless-into-a-reference-while-using-xmltwig/49751458#49751458", "title": "Attempt to bless into a reference while using XML::Twig", "body": "<blockquote>\n  <p>Did I miss something</p>\n</blockquote>\n\n<ul>\n<li><code>use strict;</code> <code>use warnings;</code></li>\n<li>You never actually parse your <code>$xml_string</code></li>\n<li>you never declare or open <code>$stdout</code>. (Maybe you mean <code>STDOUT</code>)? </li>\n<li>You use both <code>XML::LibXML</code> and <code>XML::Twig</code>. </li>\n<li><code>nparse_pp</code> implicitly sets <code>pretty_print =&gt; 'indented'</code> already. </li>\n</ul>\n\n<p>Post some code that actually compiles and runs, and we might be able to help. </p>\n\n<p>But perhaps you want something like;</p>\n\n<pre><code>my $twig = XML::Twig -&gt; parse ( $xml_string );\n$twig -&gt; set_pretty_print ( 'indented' ); \n$twig -&gt; print; \n</code></pre>\n"}], "owner": {"reputation": 245, "user_id": 5483086, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh6.googleusercontent.com/-Jy4zcLAdO1g/AAAAAAAAAAI/AAAAAAAAADs/WAgYfacy-7o/photo.jpg?sz=128", "display_name": "aman", "link": "https://stackoverflow.com/users/5483086/aman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 49751458, "answer_count": 1, "score": -1, "last_activity_date": 1523360501, "creation_date": 1523354798, "last_edit_date": 1523360501, "question_id": 49750886, "link": "https://stackoverflow.com/questions/49750886/attempt-to-bless-into-a-reference-while-using-xmltwig", "title": "Attempt to bless into a reference while using XML::Twig", "body": "<p>I am using the module XML::Twig for processing XML. While trying to run the <code>nparse</code> method with pretty_print option, I get an error. Following is the code:</p>\n\n<pre><code>use strict;\nuse XML::Twig;\nuse Data::Dumper;\n\nmy $xml_string = q{some xml string};\nmy $twig = XML::Twig-&gt;new();\n\n$twig-&gt;nparse_pp( pretty_print =&gt; 'indented', $xml_string);\n</code></pre>\n\n<p>and the error message:</p>\n\n<blockquote>\n  <p>Attempt to bless into a reference at local/5.16/lib/perl5/XML/Twig.pm line 463.</p>\n</blockquote>\n\n<p>Did I miss something?</p>\n"}, {"tags": ["linux", "perl", "if-statement"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1523358253, "post_id": 49750815, "comment_id": 86518386, "body": "An <code>if</code> is not a loop construct. It&#39;s a control flow structure."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1523390397, "post_id": 49750815, "comment_id": 86539316, "body": "You&#39;re using multiple copies of <code>ps</code>, <code>sed</code>, <code>grep</code>, <code>awk</code>, <code>echo</code>, <code>wc</code>, <code>xargs</code> etc. when Perl is quite capable of doing the whole thing. It&#39;s a very ugly and wasteful approach, and I strongly recommend that you train yourself out of it."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1523391885, "post_id": 49750815, "comment_id": 86540022, "body": "<code>sh: line 1: -o: command not found</code> is because <code>$pid</code> has a newline at the end."}, {"owner": {"reputation": 29, "user_id": 9602185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8431b03f3f7bce02e76235cf14fdf38?s=128&d=identicon&r=PG&f=1", "display_name": "Malavika", "link": "https://stackoverflow.com/users/9602185/malavika"}, "edited": false, "score": 0, "creation_date": 1525432613, "post_id": 49750815, "comment_id": 87364191, "body": "This fixed the issue. Thank you :)"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 9602185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8431b03f3f7bce02e76235cf14fdf38?s=128&d=identicon&r=PG&f=1", "display_name": "Malavika", "link": "https://stackoverflow.com/users/9602185/malavika"}, "edited": false, "score": 0, "creation_date": 1523362787, "post_id": 49751717, "comment_id": 86521474, "body": "I am pretty new to Perl. Would you be able to provide a link or referral on how to use the Proc::ProcessTable? Also, sorry about the typo I have used $pmin in my actual script. So basically if I use any if conditions my script fails. I even tried a simple if to print yes/no that does not work either."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 29, "user_id": 9602185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8431b03f3f7bce02e76235cf14fdf38?s=128&d=identicon&r=PG&f=1", "display_name": "Malavika", "link": "https://stackoverflow.com/users/9602185/malavika"}, "edited": false, "score": 2, "creation_date": 1523362978, "post_id": 49751717, "comment_id": 86521607, "body": "Don&#39;t post code in comments. Edit your original post if you&#39;ve further to add."}, {"owner": {"reputation": 29, "user_id": 9602185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8431b03f3f7bce02e76235cf14fdf38?s=128&d=identicon&r=PG&f=1", "display_name": "Malavika", "link": "https://stackoverflow.com/users/9602185/malavika"}, "edited": false, "score": 0, "creation_date": 1523363426, "post_id": 49751717, "comment_id": 86521926, "body": "Sorry about that. I have added it to my original post now."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 29, "user_id": 9602185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8431b03f3f7bce02e76235cf14fdf38?s=128&d=identicon&r=PG&f=1", "display_name": "Malavika", "link": "https://stackoverflow.com/users/9602185/malavika"}, "edited": false, "score": 0, "creation_date": 1523390719, "post_id": 49751717, "comment_id": 86539456, "body": "@Malavika: I suspect you&#39;re running your Perl code using a shell like <code>sh</code>. You need to either put a shebang line at the top or run it with <code>perl.exe program.pl</code>."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 4, "last_activity_date": 1523362804, "last_edit_date": 1523362804, "creation_date": 1523357323, "answer_id": 49751717, "question_id": 49750815, "link": "https://stackoverflow.com/questions/49750815/if-conditions-not-working-as-expected/49751717#49751717", "title": "&quot;if&quot; conditions not working as expected", "body": "<p>I think this might be the root of your problem:</p>\n\n<pre><code>elsif ($pid &gt;= 40) {\n</code></pre>\n\n<p>Because that's the process ID. Not <code>$pmin</code>. So you're basically killing and process ID >40, which will be almost any process, apart from occasionally if it randomly gets a low pid. </p>\n\n<p>But pretty fundamentally - shelling out to <code>ps</code> and <code>grep</code> is painful. Replacing <code>:</code> with <code>\\n</code> and then counting lines is a bit of a nasty thing to do - and then using <code>grep</code> to match a string is also pretty dirty.</p>\n\n<p>Why not rewrite using something like <code>Proc::ProcessTable</code> instead? </p>\n\n<p>Here's an example of how you'd read the process table, find a particular process id (or set of) and then query the time:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Proc::ProcessTable;\nuse Data::Dumper;\n\nmy $ps = Proc::ProcessTable-&gt;new;\n\nmy @target_processes = grep { $_-&gt;pid eq $$ } @{ $ps-&gt;table };\n\nprint Dumper \\@target_processes;\n\nsleep 10;\n\nwhile (1) {\n\n   foreach my $process ( grep { $_-&gt;cmndline =~ m/perl/ } @{ $ps-&gt;table } ) {\n      sleep 5;\n      print $process -&gt;cmndline, \" has been running for \",\n        $process-&gt;time / 10000, \"s\\n\";\n      print Dumper \\$process;\n   }\n\n}\n</code></pre>\n\n<p>Note - the <code>time</code> is a high res time </p>\n"}, {"tags": [], "owner": {"reputation": 16, "user_id": 594896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1abe65cff218a07410de1b40f941f37?s=128&d=identicon&r=PG", "display_name": "Senthil Prabu", "link": "https://stackoverflow.com/users/594896/senthil-prabu"}, "is_accepted": true, "score": 0, "last_activity_date": 1523513065, "creation_date": 1523513065, "answer_id": 49789079, "question_id": 49750815, "link": "https://stackoverflow.com/questions/49750815/if-conditions-not-working-as-expected/49789079#49789079", "title": "&quot;if&quot; conditions not working as expected", "body": "<p>Try the below change</p>\n\n<p>ps -A | grep firefox >/dev/null 2>&amp;1 &amp;&amp; echo \"Yes\" || echo \"No\"</p>\n"}], "owner": {"reputation": 29, "user_id": 9602185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8431b03f3f7bce02e76235cf14fdf38?s=128&d=identicon&r=PG&f=1", "display_name": "Malavika", "link": "https://stackoverflow.com/users/9602185/malavika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 49789079, "answer_count": 2, "score": 0, "last_activity_date": 1523513065, "creation_date": 1523354562, "last_edit_date": 1523390061, "question_id": 49750815, "link": "https://stackoverflow.com/questions/49750815/if-conditions-not-working-as-expected", "title": "&quot;if&quot; conditions not working as expected", "body": "<p>I am seeing two issues with my Perl script:</p>\n\n<ul>\n<li><p>My <code>if</code> condition that has <code>==</code>,  <code>.</code>, <code>!=</code> etc. is failing</p></li>\n<li><p>The <code>ps -p $pid -o etime=</code> throws an error <code>sh: line 1: -o: command not found</code></p></li>\n</ul>\n\n<p>I am trying to check whether a process is already running, and if so</p>\n\n<ul>\n<li><p>If it has been running for more than 40 minutes then kill the process</p></li>\n<li><p>If it has been running for 30-40 minutes then issue a notification</p></li>\n<li><p>If it has been running for less than 30 minutes then exit</p></li>\n</ul>\n\n<p>A simple <code>if</code> test fails too. I have attached example code at the end.</p>\n\n<p>Could some one please let me know the cause of these issues?</p>\n\n<pre><code>if ( `ps -ef | grep example | grep -v grep` ) {\n\n    print \"Process is already running\\n\";\n\n    my $pid = `ps -ef | grep example | grep -v grep | awk '{print \\$2}'`;\n\n    if ( `ps -p $pid -o etime= | sed -e \"s/:/\\\\n/g\" | wc -l | grep 3` ) {\n\n        print \"1. Running for more than 40 mins\\n\";\n        `ps -ef | grep example | grep -v grep | awk '{print \\$2}' | xargs kill -9`;\n    }\n    elsif ( `ps -p $pid -o etime= | sed -e \"s/:/\\\\n/g\" | wc -l|grep \"2\"` ) {\n\n        my $pmin = `ps -p $pid -o etime= | awk -F: '{print \\$1}'`;\n\n        if ( $pmin &lt; 30 ) {\n\n            print \"Process running for 15 mins. Exiting\";\n            exit;\n        }\n        elsif ( $pid &gt;= 40 ) {\n\n            print \"2.Running for more than 40 mins\\n\";\n            `ps -ef | grep example | grep -v grep | awk '{print \\$2}' | xargs kill -9`;\n        }\n        else {\n\n            print \"Process running for 30 mins. Notify\";\n        }\n    }\n}\n\nmy $psc = `ps -ef | grep example | grep -v grep &gt;/dev/null 2&gt;&amp;1 &amp;&amp; echo \"Yes\" || echo \"No\"`; \nprint \"PSC - $psc\"; \n\nif ( $psc eq \"Yes\" ) { \n    print \"running\"; \n} \nelse { \n    print \"not running\"; \n}\n</code></pre>\n\n<h1>./test.pl</h1>\n\n<pre><code>PSC - Yes \nnot running \n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 1, "creation_date": 1523325940, "post_id": 49744123, "comment_id": 86503157, "body": "I&#39;m having a surprisingly hard time producing a config file that that library <i>refuses</i> to parse. Can you provide an erroneous config file for testing?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1523341593, "post_id": 49744123, "comment_id": 86507712, "body": "I still don&#39;t see how your code <code>die</code>s from inside <code>eval</code> ... <code>Carp::Heavy</code> issues?  There are also some bug reports quoted in the source.  What happens if you add a hook <code>$SIG{__DIE__} = sub { say &quot;die: @_&quot; }</code>?  (The &quot;<i>uninitialized</i>&quot; warning will still come out, which you can suppress, but that doesn&#39;t terminate your program.)  But even if this works you&#39;ll still need to find out what is wrong with the file."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1523342147, "post_id": 49744123, "comment_id": 86508001, "body": "I couldn&#39;t find a single word on error handling in the docs ... but by the source it it appears that that their code fails to <a href=\"https://metacpan.org/source/TLINDEN/Config-General-2.63/General.pm#L568\" rel=\"nofollow noreferrer\">read into $n_read</a>, where it reads the initial characters from the file to check for BOM. So it is &quot;<i>uninitialized</i>&quot; (undefined) on the next line of source. Can your file have something strange at its beginning?  I tried (with an empty file as well) and can&#39;t reproduce."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1523896741, "last_edit_date": 1523896741, "creation_date": 1523343213, "answer_id": 49747208, "question_id": 49744123, "link": "https://stackoverflow.com/questions/49744123/capture-issue-when-parsing-bad-file-with-configgeneral/49747208#49747208", "title": "Capture issue when parsing bad file with Config::General", "body": "<p>The code in <code>eval</code> appears to terminate the program, so a <code>die</code> triggered from the initialization code must have escaped. The module uses <code>Carp::Heavy</code> for which strange behavior has been reported occasionally and this could be the source of trouble. There are also various bug reports quoted in module's source.</p>\n\n<p>You can attempt to control this with a <a href=\"https://perldoc.perl.org/perlvar.html#%SIG\" rel=\"nofollow noreferrer\">hook for <code>die</code></a></p>\n\n<pre><code>$SIG{__DIE__} = sub { say \"Got: @_\" };\n</code></pre>\n\n<p>but that may or may well not work. </p>\n\n<p>Eventually the question is why this happens. The reported warning (which in itself doesn't terminate the program) can be traced <a href=\"https://metacpan.org/source/TLINDEN/Config-General-2.63/General.pm#L568\" rel=\"nofollow noreferrer\">in the source to</a></p>\n\n<blockquote>\n  <p># attempt to read an initial utf8 byte-order mark (BOM)</p>\n\n<pre><code>my $n_read  = sysread $fh, my $read_BOM, length(_UTF8_BOM);\n</code></pre>\n</blockquote>\n\n<p>what apparently fails to read since <code>$n_read</code> remains undefined (\"<em>uninitialized</em>\") in the next line.  The <code>undef</code> return from <a href=\"http://perldoc.perl.org/functions/sysread.html\" rel=\"nofollow noreferrer\">sysread</a> indicates an error. The constant <a href=\"https://metacpan.org/source/TLINDEN/Config-General-2.63/General.pm#L41\" rel=\"nofollow noreferrer\"><code>_UTF8_BOM</code> is defined as</a></p>\n\n<blockquote>\n<pre><code>use constant _UTF8_BOM =&gt; \"\\x{ef}\\x{bb}\\x{bf}\";\n</code></pre>\n</blockquote>\n\n<p>(Three characters since <code>:utf8</code> layer is set only a few lines below <code>sysread</code>, conditionally)</p>\n\n<p>So check the first characters of your file. I've tried to confuse <code>sysread</code> (one of the guesses being a null byte) but couldn't reproduce the behavior. An empty file worked fine as well.</p>\n"}], "owner": {"reputation": 1673, "user_id": 1919092, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tAQlZ.jpg?s=128&g=1", "display_name": "learner", "link": "https://stackoverflow.com/users/1919092/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 1, "accepted_answer_id": 49747208, "answer_count": 1, "score": 2, "last_activity_date": 1559895335, "creation_date": 1523325434, "last_edit_date": 1559895335, "question_id": 49744123, "link": "https://stackoverflow.com/questions/49744123/capture-issue-when-parsing-bad-file-with-configgeneral", "title": "Capture issue when parsing bad file with Config::General", "body": "<p>I am using perl 5.16.3 and face following problem</p>\n\n<p>I have a code to read a Config::General format file using following code:</p>\n\n<pre><code>use Config::General qw(ParseConfig);\nmy $meta_file = \"/foo/bar/file\";\nmy $hash;\neval {\n    $hash = {ParseConfig($meta_file)};\n};\n\nif ($@) {\n    print $@;\n}\n</code></pre>\n\n<p>Now when there is a issue in file pointed buy $meta_file, this code fails with stack trace similar to following:</p>\n\n<blockquote>\n  <p>Use of uninitialized value $n_read in numeric eq (==)\n    Config::General::_openfile_for_read('Config::General=HASH(0xff92e30)',\n  '/foo/bar/file')\n    Config::General::_open('Config::General=HASH(0xff92e30)',\n  '/foo/bar/file')\n    Config::General::_process('Config::General=HASH(0xff92e30)')\n    Config::General::new('Config::General', '/foo/bar/file')</p>\n</blockquote>\n\n<p>Is there a way to capture this and continue with my code?</p>\n"}, {"tags": ["perl", "machine-learning", "svm"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1523305091, "post_id": 49740582, "comment_id": 86496544, "body": "You won&#39;t get favourable answers if you don&#39;t even attempt to write a solution yourself."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523305241, "post_id": 49740582, "comment_id": 86496630, "body": "Those values aren&#39;t frequencies: they&#39;re simple counts."}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 1, "creation_date": 1523312874, "post_id": 49740582, "comment_id": 86499822, "body": "Go ahead and try a solution, then we&#39;ll be happy to offer suggestions to improve your code. A solution would probably use a hash of hash to hold the data with the &#39;id&#39; as the key to the outer hash and the column numbers seen as the keys to the inner hash. Like <code>$seen{$id}{$col}++</code>. See <a href=\"https://stackoverflow.com/questions/22764615/counting-and-manipulating-occurrences-in-text-file-perl/22765327#22765327\">this example</a>"}, {"owner": {"reputation": 3, "user_id": 7065657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2439365e785ecff66d340f679afbd10?s=128&d=identicon&r=PG&f=1", "display_name": "Julia", "link": "https://stackoverflow.com/users/7065657/julia"}, "edited": false, "score": 0, "creation_date": 1523369146, "post_id": 49740582, "comment_id": 86526368, "body": "Thank you for your kindly suggestions. I have tried for about 8 hours and get it. But it is not good when array amount and size increase. Hope to discuss with you"}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1523376934, "post_id": 49740582, "comment_id": 86531783, "body": "From the size of the root (15,000) array and the number of arrays to test (14,000), it seems not likely that you would want to print them all out to a file. I would instead use a database, (SQLite good choice), and enter the counts for each test array result as a row with the root as a header. But it is difficult to tell what you want to do with the results at this point. I need more information to offer a solution."}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1523377402, "post_id": 49740582, "comment_id": 86532057, "body": "Also, your new sample data doesn&#39;t match what you originally posted and makes it difficult to tell what results in what format you  want."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1523392749, "post_id": 49740582, "comment_id": 86540448, "body": "Please don&#39;t use the broken, experimental <code>~~</code> operator."}], "answers": [{"comments": [{"owner": {"reputation": 10190, "user_id": 215487, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e3e947cd5a0515d1eece902a29891750?s=128&d=identicon&r=PG", "display_name": "Christopher Bottoms", "link": "https://stackoverflow.com/users/215487/christopher-bottoms"}, "edited": false, "score": 0, "creation_date": 1523390867, "post_id": 49760247, "comment_id": 86539526, "body": "Nice! For simple counting, I also like to compress that <code>for</code> loop into one line: <code>$seen{$_}++ for @aa</code>"}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": true, "score": 1, "last_activity_date": 1523383615, "last_edit_date": 1523383615, "creation_date": 1523383305, "answer_id": 49760247, "question_id": 49740582, "link": "https://stackoverflow.com/questions/49740582/perl-better-method-for-counting-each-array-element-occurance/49760247#49760247", "title": "perl better method for counting each array element occurance", "body": "<p>A better algorithm would be to use a hash to keep counts. For your sample arrays, it would look like this. (And will run considerably faster than your solution).</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @root=qw(1 2 3 4 5 6 7 8 10);\nmy @aa=qw(1 1 2 3);\n\nprint join(\"\\t\", @root), \"\\n\";\n\nmy %seen;\nfor my $data (@aa) {\n    $seen{$data}++; \n}\n\nprint join(\"\\t\", map {$_ // '0'} @seen{@root}), \"\\n\";   \n</code></pre>\n\n<p>Output is:</p>\n\n<pre><code>1       2       3       4       5       6       7       8       10\n2       1       1       0       0       0       0       0       0\n</code></pre>\n\n<p><code>@seen{@root}</code> is a hash slice keyed by the <code>@root</code> array. If no item was found for any of the <code>@root</code> elements, the map supplies a zero.</p>\n\n<p>The <code>map {$_ // '0'}</code> portion is saying pass to <code>join</code> a count if <code>$_</code> has a count otherwise pass a zero.</p>\n"}], "owner": {"reputation": 3, "user_id": 7065657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2439365e785ecff66d340f679afbd10?s=128&d=identicon&r=PG&f=1", "display_name": "Julia", "link": "https://stackoverflow.com/users/7065657/julia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 49760247, "answer_count": 1, "score": -3, "last_activity_date": 1523383615, "creation_date": 1523303297, "last_edit_date": 1523369064, "question_id": 49740582, "link": "https://stackoverflow.com/questions/49740582/perl-better-method-for-counting-each-array-element-occurance", "title": "perl better method for counting each array element occurance", "body": "<p>I have 2 arrays, one is the root array, which contains huge mount of elements. Another is the tested array, all of which elements is a subset of root array. I want to  construct a new array, with size equal to root arrays, and its element value at a specific position represents the count of that element in the tested array.     </p>\n\n<p>Below codes works well when 2 array size is small. But the practical problem I meet is that, the root arrays has about 15000 elements, and there are about 14000 tested  arrays.<br>\nI wonder to have better algorithm. Do you guys have some suggestions?\n<code></p>\n\n<pre><code>my @root=qw(1 2 3 4 5 6 7 8 10);\nmy @aa=qw(1 1 2 3);\nmy @count;\n\nforeach my $eleroot(@root){\nmy $mathnum=0;\nmy ($i) = grep { $root[$_] ~~ $eleroot } 0 .. $#root;\nforeach my $eleaa(@aa){\n if ($eleroot==$eleaa){\n  $mathnum++;\n   }\n }\n $count[$i]=$mathnum;\n\n}\nprint @count;\n</code></pre>\n\n<p></code></p>\n"}, {"tags": ["perl", "language-lawyer", "packages", "variable-declaration", "scoping"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1523300031, "post_id": 49738776, "comment_id": 86493979, "body": "The lexical variables declared by <code>my</code>, <code>state</code> and <code>our</code> exempt from strict. <code>use vars</code> creates a package variable in a different package and imports it, taking advantage of the fact that imported variables are exempt from strict."}], "answers": [{"comments": [{"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1523299841, "post_id": 49739472, "comment_id": 86493887, "body": "Yes, magic indeed!  To confirm, is this correct?--- <code>our</code> doesn&#39;t need to trigger &quot;exported if aliased when in a different package&quot; because it is updating the local scope (scratchpad).  Perl checks the local scope and finds the <code>our</code> variable before it checks the symbol table for an exported variable."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1523299918, "post_id": 49739472, "comment_id": 86493922, "body": "@cxw That&#39;s correct, but I haven&#39;t heard the term &quot;scratchpad&quot; in this context before. There&#39;s a thing called a &quot;(lexical) pad&quot;, which is a data structure used to implement local scopes in the interpreter."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 1, "creation_date": 1523300112, "post_id": 49739472, "comment_id": 86494026, "body": "Thanks very much!  This is very helpful - I&#39;m pretty sure I would not have figured it out even if I had tried spelunking in the C source.  (I got scratchpad from <a href=\"http://www.perlmonks.org/?node_id=728484\" rel=\"nofollow noreferrer\">here</a>, but I&#39;ll use &quot;lexical pad&quot; in future.)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 1, "creation_date": 1523300224, "post_id": 49739472, "comment_id": 86494089, "body": "@cxw Oh, interesting. If that link is right, &quot;pad&quot; is just a shortened name for &quot;scratchpad&quot;."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 17, "last_activity_date": 1523298847, "creation_date": 1523298847, "answer_id": 49739472, "question_id": 49738776, "link": "https://stackoverflow.com/questions/49738776/what-magic-in-our-or-use-vars-satisfies-use-strict-qwvars/49739472#49739472", "title": "What magic in &quot;our&quot; or &quot;use vars&quot; satisfies &quot;use strict qw(vars)&quot;?", "body": "<blockquote>\n  <p><code>use strict 'vars'</code> works by setting flags in <code>$^H</code>.</p>\n</blockquote>\n\n<p>Yes, but that's an implementation detail. <code>$^H</code> exposes some internal interpreter state bits, but you're not supposed to touch it in normal code.</p>\n\n<blockquote>\n  <p>Somehow, both <code>our</code> and <code>use vars</code> mark variables so that they will pass the test. How do they do so?</p>\n</blockquote>\n\n<p>This is also considered an implementation detail.</p>\n\n<hr>\n\n<p>However, we can peek a bit under the hood. <code>strict \"vars\"</code> complains about undeclared variables (at compile time).</p>\n\n<p>There is a hardcoded list of variables that are exempt from this check; it includes all punctuation variables (e.g. <code>$/</code>, <code>$_</code>, etc. along with <code>$a</code> and <code>$b</code> (used by <code>sort</code>)).</p>\n\n<p>All lexically (i.e. locally) declared variables also pass <code>strict</code>; this is how <code>my</code>, <code>our</code>, and <code>state</code> work. (For our purposes <a href=\"http://perldoc.perl.org/perlsub.html#Temporary-Values-via-local()\" rel=\"noreferrer\"><code>local</code></a> is not a declaration and does not create local variables; <code>local</code> temporarily changes the value of an existing variable.)</p>\n\n<p>The third exception is variables exported from modules. Using global variables as part of your module interface is generally considered to be a bad idea, but some older modules still do it. <a href=\"https://metacpan.org/pod/English\" rel=\"noreferrer\"><code>English</code></a> also exports variables because that's its whole point, so we'll use it as an example:</p>\n\n<pre><code>use strict;\nuse English qw($INPUT_RECORD_SEPARATOR);\n$INPUT_RECORD_SEPARATOR = \"\";  # &lt;--\nmy $paragraph = readline STDIN;\n</code></pre>\n\n<p>The line marked <code>&lt;--</code> does not throw an error because Perl remembers which variables were imported from a module.</p>\n\n<p>What does \"exporting\" actually mean? It just means aliasing a symbol across package boundaries:</p>\n\n<pre><code>*main::foo = \\$Some::Module::foo;  # now $main::foo is an alias for $Some::Module::foo\n</code></pre>\n\n<p>The curious thing is that as far as the Perl internals are concerned, a variable is \"imported\" if it has been aliased in some other package. It does not matter what it was aliased <em>to</em>; all that matters is where the aliasing happened. <code>use vars</code> (ab-)uses this detail to bypass <code>strict \"vars\"</code> by exporting your own variables back at you:</p>\n\n<pre><code>package Some::Package;\nuse vars qw($foo);\n</code></pre>\n\n<p>works like</p>\n\n<pre><code>package Some::Package;\nBEGIN {\n    package vars;\n    *Some::Package::foo = \\$Some::Package::foo;\n}\n# now $foo is an alias to ... itself\n</code></pre>\n\n<p>The other piece of the puzzle is that <code>use</code> happens at compile time, like <code>BEGIN</code> blocks. Your example fails because your aliasing attempt only happens at runtime, which is too late for <code>strict</code>, and because it doesn't switch to a different package to do the aliasing.</p>\n\n<hr>\n\n<p>In the end <code>vars</code> is just a module, written in plain Perl. <code>our</code> is different: It is a real keyword and part of the language. It also has different behavior: It effectively creates an alias (to a package variable), but that alias lives in a local scope, not the symbol table.</p>\n\n<p>Consider e.g. the following:</p>\n\n<pre><code>my $foo = 2;\n{\n    our $foo = \"hello\";\n    print \"foo = $foo; main::foo = $main::foo\\n\";\n}\nprint \"foo = $foo; main::foo = $main::foo\\n\";\n</code></pre>\n\n<p>This outputs</p>\n\n<pre><code>foo = hello; main::foo = hello\nfoo = 2; main::foo = hello\n</code></pre>\n\n<p>because the inner <code>our $foo</code> declaration shadows the outer <code>$foo</code> in the inner block. Within the block both <code>$foo</code> and <code>$main::foo</code> refer to the same variable; outside <code>$foo</code> refers to the lexical <code>my $foo</code>, which is untouched.</p>\n\n<p>Another difference to <code>use vars</code>:</p>\n\n<pre><code>use strict;\npackage Foo;\nour $x = \"hello\";\npackage Bar;\nprint \"$x\\n\";  # hello\n</code></pre>\n\n<p>This code works fine because <code>package</code> declarations don't create a new scope. There is only one unit of scoping here (the whole file), and so <code>our $x</code> makes <code>$x</code> refer to <code>$Foo::x</code> for the rest of the file, no matter which package you switch into.</p>\n\n<p>On the other hand:</p>\n\n<pre><code>use strict;\npackage Foo;\nuse vars qw($x);\n$x = \"hello\";\npackage Bar;\nprint \"$x\\n\";\n</code></pre>\n\n<p>This code doesn't even compile. The reference to <code>$x</code> in the last line can't be resolved: Perl checks the local scope first, but there are no locally declared <code>$x</code>'s. It then checks the current package (<code>Bar</code>) and finds nothing either, and without <code>strict \"vars\"</code> it would have automatically created <code>$Bar::x</code> for you, but with <code>strict \"vars\"</code> enabled this is simply an error. <code>$Foo::x</code> is irrelevant and never checked.</p>\n"}], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 496, "favorite_count": 4, "accepted_answer_id": 49739472, "answer_count": 1, "score": 11, "last_activity_date": 1523452434, "creation_date": 1523296126, "last_edit_date": 1523452434, "question_id": 49738776, "link": "https://stackoverflow.com/questions/49738776/what-magic-in-our-or-use-vars-satisfies-use-strict-qwvars", "title": "What magic in &quot;our&quot; or &quot;use vars&quot; satisfies &quot;use strict qw(vars)&quot;?", "body": "<p>I have working code, but I am trying to understand <em>why</em> it works. I am also trying to learn more about the internals of Perl 5 (<code>perlbrew</code>, <code>perl-5.26.1</code>, <code>Cygwin x64</code>).</p>\n\n<p>I know from <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\"><code>perlvar</code></a> and <a href=\"https://metacpan.org/source/SHAY/perl-5.26.1/lib/strict.pm\" rel=\"nofollow noreferrer\"><code>strict</code></a> that <code>use strict 'vars'</code> works by setting flags in <code>$^H</code>.  Perl then tests accesses to non-<code>::</code> variables based on those flags.  Somehow, both <code>our</code> and <code>use vars</code> mark variables so that they will pass the test.  How do they do so?</p>\n\n<p>For example:</p>\n\n<pre><code>perl -E 'package Foo;\n    use strict \"vars\";\n    use vars qw($foo);\n    say $foo;'\n</code></pre>\n\n<p>runs fine (although it produces no output).  Based on <a href=\"https://metacpan.org/source/SHAY/perl-5.26.1/lib/vars.pm#L29\" rel=\"nofollow noreferrer\">the source for <code>use vars</code></a>, I tried this, which I thought would have the same effect:</p>\n\n<pre><code>perl -E 'package Foo;\n    use strict \"vars\";\n    my $sym = \"Foo::foo\";          # &lt;-- These two lines pulled straight\n    *$sym = \\$$sym;                # &lt;-- from the source for the vars pragma\n    say $foo;'\n</code></pre>\n\n<p>However, it gave me an error: <code>Global symbol \"$foo\" requires explicit package name</code>.  I also tried <code>$sym = \"::Foo:foo\"</code> in the above, with the same result.</p>\n\n<p>I checked, and <code>$Foo::foo</code> is in the symbol table:</p>\n\n<pre><code>$ perl -E 'package Foo;\n      use Data::Dumper;\n      use strict \"vars\"; \n      my $sym = \"Foo::foo\";\n      *$sym = \\$$sym; \n      say Dumper(\\%{\"Foo::\"});'    # &lt;-- Foo's symbol table\n\nOutput: \n$VAR1 = {\n    'BEGIN'  =&gt; *Foo::BEGIN,\n    'Dumper' =&gt; *Foo::Dumper,\n    'foo'    =&gt; *Foo::foo          # &lt;-- yep, it's there\n};\n</code></pre>\n\n<p>What else is <code>use vars</code> doing that I'm missing?  Does <code>our</code> do the same, or something different?</p>\n\n<h3>Update</h3>\n\n<p>Here's an A/B based on <a href=\"https://stackoverflow.com/a/49739472/2877364\">melpomene's answer</a>:</p>\n\n<pre><code>Fails                         Succeeds\n-------------------------     ----------------------------------\npackage Foo;                  package Foo;\nuse strict \"vars\";            use strict \"vars\";\n\n                              BEGIN {\n                                  package Bar;\nmy $sym=\"Foo::foo\";               my $sym = \"Foo::foo\";\n*$sym = \\$$sym;                   *$sym = \\$$sym;\n                              }\nsay $foo;                     say $foo;\n</code></pre>\n"}, {"tags": ["perl", "gtk", "ascii"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1523290058, "post_id": 49737046, "comment_id": 86488676, "body": "How does it not work? You might want <a href=\"https://stackoverflow.com/posts/49737046/edit\">edit</a> and include screenshots of your output, and a description of what it should look like."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1523291972, "post_id": 49737046, "comment_id": 86489584, "body": "If <code>insert_with_tags_by_name</code> expects decoded text, use <code>my $string = decode(&quot;cp437&quot;, &quot;\\xBA&quot;);</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1523291993, "post_id": 49737046, "comment_id": 86489597, "body": "If <code>insert_with_tags_by_name</code> expects text encoded using UTF-8, use <code>my $string = encode(&quot;UTF-8&quot;, decode(&quot;cp437&quot;, &quot;\\xBA&quot;));</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1523292042, "post_id": 49737046, "comment_id": 86489627, "body": "(<code>BA</code> is the cp437 encoding of &quot;\u2551&quot;)"}, {"owner": {"reputation": 165, "user_id": 6920800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8aad840893bf8dddaa9bae758c57b78?s=128&d=identicon&r=PG&f=1", "display_name": "lesrol", "link": "https://stackoverflow.com/users/6920800/lesrol"}, "edited": false, "score": 0, "creation_date": 1523366314, "post_id": 49737046, "comment_id": 86524205, "body": "I tried that, with no success. Screenshot now appears above."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1523370556, "post_id": 49737046, "comment_id": 86527411, "body": "How about outputting <code>$cpString</code> (decoded cp437 output)?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1523373081, "post_id": 49737046, "comment_id": 86529296, "body": "I tried this on Ubuntu 17.10, and Perl <code>Gtk2</code> module version 1.24992 and I get the same result as you. However, if I encode as <code>latin1</code> instead of <code>utf-8</code> it works fine. I am not sure if this could be a bug in the Perl module or in Gtk"}, {"owner": {"reputation": 165, "user_id": 6920800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8aad840893bf8dddaa9bae758c57b78?s=128&d=identicon&r=PG&f=1", "display_name": "lesrol", "link": "https://stackoverflow.com/users/6920800/lesrol"}, "edited": false, "score": 0, "creation_date": 1523374504, "post_id": 49737046, "comment_id": 86530262, "body": "Very strange. I also see the correct characters if I encode in latin1, instead of utf-8.  However, not all characters are displayed as if we had encoded into utf-8. For example, the &#226; character (134) is displayed correctly, but the \u2593 shade character (177) is not, and neither are the pipe characters, for example \u255f (199)."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 6920800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8aad840893bf8dddaa9bae758c57b78?s=128&d=identicon&r=PG&f=1", "display_name": "lesrol", "link": "https://stackoverflow.com/users/6920800/lesrol"}, "edited": false, "score": 0, "creation_date": 1523366335, "post_id": 49737735, "comment_id": 86524224, "body": "Tried that too, see the edited script and screenshot above."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 6, "last_activity_date": 1523292060, "creation_date": 1523292060, "answer_id": 49737735, "question_id": 49737046, "link": "https://stackoverflow.com/questions/49737046/displaying-cp437-extended-ascii-in-perl-gtk/49737735#49737735", "title": "Displaying CP437 (&#39;extended ascii&#39;) in Perl/Gtk", "body": "<p><a href=\"https://developer.gnome.org/gtk2/stable/TextWidget.html\" rel=\"noreferrer\">Gtk wants to receive UTF-8 encoded strings</a>, so anything you pass to a Gtk widget should be UTF-8 encoded.</p>\n\n<p>If your input is <code>cp437</code>, then you'll want to decode it first and reencode it as UTF-8.</p>\n\n<pre><code>my $cp437_string = chr(153) x 10;               # cp437 encoded\nmy $string = decode('cp437', $cp437_string);    # Unicode code point encoded\nmy $utf8_string = encode('utf-8', $string);     # utf-8 encoded\n$buffer-&gt;insert_with_tags_by_name(\n    $buffer-&gt;get_end_iter(), $utf8_string . \"\\n\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1523379883, "post_id": 49758385, "comment_id": 86533500, "body": "Thanks for resolving this issue!"}, {"owner": {"reputation": 3078, "user_id": 3439968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35ac9be13672d93d1784eae3f25eae5c?s=128&d=identicon&r=PG&f=1", "display_name": "user3439968", "link": "https://stackoverflow.com/users/3439968/user3439968"}, "edited": false, "score": 0, "creation_date": 1564340825, "post_id": 49758385, "comment_id": 100988899, "body": "Tnx! Working in GTK3+ too."}], "tags": [], "owner": {"reputation": 31, "user_id": 9626048, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/f24d277efa0ccdbeed4bc5d938661116?s=128&d=identicon&r=PG", "display_name": "user9626048", "link": "https://stackoverflow.com/users/9626048/user9626048"}, "is_accepted": false, "score": 3, "last_activity_date": 1523380169, "last_edit_date": 1523380169, "creation_date": 1523376793, "answer_id": 49758385, "question_id": 49737046, "link": "https://stackoverflow.com/questions/49737046/displaying-cp437-extended-ascii-in-perl-gtk/49758385#49758385", "title": "Displaying CP437 (&#39;extended ascii&#39;) in Perl/Gtk", "body": "<p>Gtk2.pm expects Perl character strings (<code>Encode::decode(...)</code>), which are internally stored as UTF-8.</p>\n\n<p>If you feed it a byte string (<code>Encode::encode(...)</code>), it will try to display it as latin1.</p>\n\n<pre><code># In cp437, this is a series of accented A characters\nmy $string = chr (131) . chr (132) . chr (133) . chr (134);\n\nmy $perlString = decode ('cp437', $string);\n\n$buffer-&gt;insert_with_tags_by_name($buffer-&gt;get_end_iter(), $perlString . \"\\n\\n\");\n\n\nmy $charmap = join(\"\", map chr, 128..255);\n$charmap =~ s!.{16}\\K!\\n!g;\n$perlString = decode ('cp437', $charmap);\n\n$buffer-&gt;insert_with_tags_by_name($buffer-&gt;get_end_iter(), $perlString . \"\\n\");\n\nGtk2-&gt;main();\n</code></pre>\n\n<p><strong>Resulting screenshot</strong>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dDxxQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dDxxQ.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 165, "user_id": 6920800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8aad840893bf8dddaa9bae758c57b78?s=128&d=identicon&r=PG&f=1", "display_name": "lesrol", "link": "https://stackoverflow.com/users/6920800/lesrol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1523380169, "creation_date": 1523289506, "last_edit_date": 1523366271, "question_id": 49737046, "link": "https://stackoverflow.com/questions/49737046/displaying-cp437-extended-ascii-in-perl-gtk", "title": "Displaying CP437 (&#39;extended ascii&#39;) in Perl/Gtk", "body": "<p>Is there any way in which I can display old-fashioned extended ASCII (cp437) in a Gtk2::TextView? (Google suggests no answers.)</p>\n\n<p>If there is some way of changing the charset used by a GTK widget, I can't find it.</p>\n\n<p>Or maybe it's necessary to use Perl's Encode module, as I tried in the script below, but that doesn't work either.</p>\n\n<pre><code>#!/usr/bin/perl\n# Display ASCII\n\nuse strict;\nuse diagnostics;\nuse warnings;\nuse Encode;\n\nuse Glib qw(TRUE FALSE);\nuse Gtk2 '-init';\n\n# Open a Gtk2 window, with a Gtk2::TextView to display text\nmy $window = Gtk2::Window-&gt;new('toplevel');\n$window-&gt;set_title('Extended ASCII viewer');\n$window-&gt;set_position('center');\n$window-&gt;set_default_size(600, 400);\n$window-&gt;signal_connect('delete-event' =&gt; sub {\n\n    Gtk2-&gt;main_quit();\n    exit;\n});\n\nmy $scrollWin = Gtk2::ScrolledWindow-&gt;new(undef, undef);\n$window-&gt;add($scrollWin);\n$scrollWin-&gt;set_policy('automatic', 'automatic');     \n$scrollWin-&gt;set_border_width(0);\n\nmy $textView = Gtk2::TextView-&gt;new;\n$scrollWin-&gt;add_with_viewport($textView);\n$textView-&gt;can_focus(FALSE);\n$textView-&gt;set_wrap_mode('word-char');\n$textView-&gt;set_justification('left');\nmy $buffer = $textView-&gt;get_buffer();\n\n$window-&gt;show_all();   \n\n# In cp437, this is a series of accented A characters\nmy $string = chr (131) . chr (132) . chr (133) . chr (134);\n\n# Display plain text\n$buffer-&gt;insert_with_tags_by_name($buffer-&gt;get_end_iter(), $string . \"\\n\");\n\n# Display UTF-8 text\nmy $utfString = encode('utf8', $string);\n$buffer-&gt;insert_with_tags_by_name($buffer-&gt;get_end_iter(), $utfString . \"\\n\");\n\n# Display cp437\nmy $cpString = decode ('cp437', $string);\nmy $utfString2 = encode('utf-8', $cpString);\n$buffer-&gt;insert_with_tags_by_name($buffer-&gt;get_end_iter(), $utfString2 . \"\\n\");\n\n# Other suggestion\nmy $otherString = encode(\"utf-8\", decode (\"cp437\", $string));\n$buffer-&gt;insert_with_tags_by_name($buffer-&gt;get_end_iter(), $otherString . \"\\n\");\n\n# Directly decode a hex character (as suggested)\nmy $hexString = encode(\"utf-8\", decode(\"cp437\", \"\\xBA\"));\n$buffer-&gt;insert_with_tags_by_name($buffer-&gt;get_end_iter(), $hexString . \"\\n\");\n\nGtk2-&gt;main();\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/9phS2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9phS2.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1523284346, "post_id": 49735360, "comment_id": 86484682, "body": "Regex is part of the solution, but not <b>the solution</b>. You want write a program that works through your input, detects the beginning of a list, the end of a list, and then does what you want. The trick is to do this line by line. You have several options for every line. You can be at the start of a list, at the end of a list, inside a list or not inside a list."}, {"owner": {"reputation": 21876, "user_id": 1678362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba023d18099cde022b9e4394d5714c0?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/1678362/aaron"}, "edited": false, "score": 0, "creation_date": 1523284430, "post_id": 49735360, "comment_id": 86484731, "body": "Repeated capturing groups wouldn&#39;t work because they only hold the last occurence of the match : matching <code>(\\w)+</code> over <code>abc</code> will have the first capturing group holding <code>c</code>."}, {"owner": {"reputation": 2216, "user_id": 1422010, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0a57a087d07908ae751e8662b41bd90?s=128&d=identicon&r=PG", "display_name": "Anna", "link": "https://stackoverflow.com/users/1422010/anna"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1523284460, "post_id": 49735360, "comment_id": 86484752, "body": "@simbabque Yes this is exactly what I meant. Sorry for being unclear. I have a working solution with a &quot;parser&quot;. I&#39;m curious to expand my regex knowledge."}, {"owner": {"reputation": 21876, "user_id": 1678362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba023d18099cde022b9e4394d5714c0?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/1678362/aaron"}, "edited": false, "score": 0, "creation_date": 1523285045, "post_id": 49735360, "comment_id": 86485181, "body": "You could probably make it with lookarounds to distinguish whether you&#39;re at the start, middle or end of a list (just check whether you&#39;re preeceeding or following another list item) ; the three cases only match a single list item so you can use capturing group to replace fixed patterns in the list items"}], "answers": [{"comments": [{"owner": {"reputation": 2216, "user_id": 1422010, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0a57a087d07908ae751e8662b41bd90?s=128&d=identicon&r=PG", "display_name": "Anna", "link": "https://stackoverflow.com/users/1422010/anna"}, "edited": false, "score": 0, "creation_date": 1523285533, "post_id": 49735671, "comment_id": 86485545, "body": "Thank you for your effort and sorry for being unclear. I have a working solution with a line-by-line &quot;parser&quot;. I&#39;m curious to expand my regex knowledge."}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 1, "last_activity_date": 1523285016, "creation_date": 1523285016, "answer_id": 49735671, "question_id": 49735360, "link": "https://stackoverflow.com/questions/49735360/how-to-substitute-each-item-in-this-list/49735671#49735671", "title": "How to substitute each item in this list?", "body": "<p>The easiest way would be to read the data into a hash and then write out the data again with any new formatting attached: </p>\n\n<pre><code>#!perl\n\nuse strict;\nuse warnings;\n\nuse feature qw(say);\n\nmy %structured_list;\nmy @keys;\nmy $key;\n\n# read data in storing lists under associated keys as array references\nwhile (my $line = readline(*DATA)) {\n  chomp $line;\n\n  if ($line =~ /^\\*/) {\n    # this could be simplified\n    push @{$structured_list{$key}}, $line =~ s/^\\*\\s*//gr;\n  }\n  else {\n    $key = $line;\n    push @keys, $key;\n    $structured_list{$key} = [];\n  }\n}\n\n# read keys back out in order\nforeach my $list_key (@keys) {\n  if (@{$structured_list{$list_key}}) {\n    say $list_key;\n    say \"LIST\";\n    foreach my $val (@{$structured_list{$list_key}}) {\n      say \"+ $val\";\n    }\n    say \"END\";\n  }\n  else {\n   say $list_key;\n  }\n}\n\n__DATA__\nbla bla\n* a\n* list\n* here\nbla * bla\nbl**a\n* another\n* list\n</code></pre>\n\n<p>outputs: </p>\n\n<pre><code>\u279c  perl test.pl\nbla bla\nLIST\n+ a\n+ list\n+ here\nEND\nbla * bla\nbl**a\nLIST\n+ another\n+ list\nEND\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1523286947, "post_id": 49735885, "comment_id": 86486642, "body": "Well technically that&#39;s Perl, not regex. ;)"}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1523287342, "post_id": 49735885, "comment_id": 86486934, "body": "@simbabque regex term in the question refers to Perl regex, I think, not to what SO tag embraces. But I fixed the answer anyway."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1523340261, "post_id": 49735885, "comment_id": 86507069, "body": "@wolfrevokcats: Awesome. +1"}], "tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": true, "score": 8, "last_activity_date": 1523287133, "last_edit_date": 1523287133, "creation_date": 1523285590, "answer_id": 49735885, "question_id": 49735360, "link": "https://stackoverflow.com/questions/49735360/how-to-substitute-each-item-in-this-list/49735885#49735885", "title": "How to substitute each item in this list?", "body": "<p>The problem is indeed solvable with Perl regular expressions (regexes).<br>\nA nested <code>s///</code> does the trick: </p>\n\n<pre><code>$/=undef;\n$_=&lt;DATA&gt;;\ns{((^\\* .*\\n){2,})}{\n    \"LIST\\n$1END\\n\"=~s{^\\*}{+}mgr;\n}gme;\nprint ;\n\n__DATA__\nbla bla\n* a\n* list\n* here\nbla * bla\nbl**a\n* another\n* list \n</code></pre>\n\n<hr>\n\n<pre><code>bla bla\nLIST\n+ a\n+ list\n+ here\nEND\nbla * bla\nbl**a\nLIST\n+ another\n+ list\nEND\n</code></pre>\n"}], "owner": {"reputation": 2216, "user_id": 1422010, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0a57a087d07908ae751e8662b41bd90?s=128&d=identicon&r=PG", "display_name": "Anna", "link": "https://stackoverflow.com/users/1422010/anna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 1, "accepted_answer_id": 49735885, "answer_count": 2, "score": 3, "last_activity_date": 1523287133, "creation_date": 1523284047, "question_id": 49735360, "link": "https://stackoverflow.com/questions/49735360/how-to-substitute-each-item-in-this-list", "title": "How to substitute each item in this list?", "body": "<p>I'm trying to detect and change lists of the following format. Input string</p>\n\n<pre><code>bla bla\n* a\n* list\n* here\nbla * bla\nbl**a\n* another\n* list \n</code></pre>\n\n<p>Desired output:</p>\n\n<pre><code>bla bla\nLIST\n+ a\n+ list\n+ here\nEND\nbla * bla\nbl**a\nLIST\n+ another\n+ list \nEND\n</code></pre>\n\n<p>Working on this, I realised that I should use another kind of parser and that regex is not the best tool for the job. Still, it made me curious and I'd like to know if this problem is solvable with regular expressions. I can detect the list and add the LIST/END tokens:</p>\n\n<pre><code>s/((^\\* .*\\n){2,})/LIST\\n\\1\\nEND/gm;\n</code></pre>\n\n<p>However, how would I end change the individual items of the list? Is there some way to use these capture groups that are quantified? Doing another pass with <code>s/^\\* /+ /g</code> is not possible, since I'm only interested in lists of two items or more. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1523269021, "post_id": 49730536, "comment_id": 86474622, "body": "You&#39;ve got a syntax error in <code>my ($a,$b,$c=(1,2,3);</code>. There&#39;s a <code>)</code> missing. Also, <code>$a</code> and <code>$b</code> are reserved global variables for <code>sort</code>. Don&#39;t use them in code. I hope you&#39;re learning this for one-liners, because the code you are writing is <b>not good Perl</b>."}, {"owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1523269426, "post_id": 49730536, "comment_id": 86474849, "body": "Hi  simbabque , I&#39;ve corrected the declaration error. Thanks for spotting it, it&#39;s not like that in the code, i added when writing the question for brevity. I know $a &amp; $b are used for sort etc, however, this is a sample test.  Do you know the answer to my eval problem?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1523269752, "post_id": 49730536, "comment_id": 86475034, "body": "Your problem is not with <code>eval</code>. It&#39;s with misunderstanding the <code>map</code> operation. :)"}], "answers": [{"comments": [{"owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "edited": false, "score": 0, "creation_date": 1523269760, "post_id": 49730718, "comment_id": 86475039, "body": "Does the for not generate a list, i&#39;ve alway thought it did when used like this? e.g., my @aa=for 1..100;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "edited": false, "score": 1, "creation_date": 1523269851, "post_id": 49730718, "comment_id": 86475092, "body": "@hoffmeister no, that is a syntax error. <code>perl -e &#39;my @foo = for 1 .. 100;&#39; syntax error at -e line 1, near &quot;= for &quot;</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "edited": false, "score": 2, "creation_date": 1523270175, "post_id": 49730718, "comment_id": 86475315, "body": "@hoffmeister the <code>..</code> is the operator that creates the list. See <a href=\"http://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlop.html#Range-Operators</a> and <a href=\"http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators</a>."}, {"owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "edited": false, "score": 0, "creation_date": 1523271025, "post_id": 49730718, "comment_id": 86475822, "body": "Ok, i see how the map is working and my misunderstanding that for for loop does not make a list. but why does this not work? return 1 if eval &quot;$a$_$b==$c&quot; for qw &quot;+ - / *&quot;;      but this does eval &quot;$a$_$b==$c&quot; and return 1 for qw &quot;+ - / *&quot;; ?"}, {"owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "edited": false, "score": 0, "creation_date": 1523271158, "post_id": 49730718, "comment_id": 86475902, "body": "e.g., why is the if different to and?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1523271194, "post_id": 49730718, "comment_id": 86475930, "body": "<i>&quot;The code replaces every other digit in the number with an asterisk&quot;</i> No. It inserts an asterisk <code>*</code> between every pair of word characters (and every pair of non-word characters)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1523272908, "post_id": 49730718, "comment_id": 86476990, "body": "@Borodin right. I got that wrong. Butt it doesn&#39;t really matter what it does. I&#39;ll amend."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "edited": false, "score": 1, "creation_date": 1523273058, "post_id": 49730718, "comment_id": 86477078, "body": "@hoffmeister because Perl does not allow you to have two different postfix keywords in one statement. When would this return 1? It&#39;s ambiguous. Your <code>and</code> statement will only execute the <code>+</code>, then it returns from your function. Don&#39;t try to write code like this. It&#39;s not readable. It&#39;s not cool. It&#39;s a pain to maintain this, and it doesn&#39;t give you any benefit. It&#39;s not even concise or idiomatic."}, {"owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "edited": false, "score": 0, "creation_date": 1523273622, "post_id": 49730718, "comment_id": 86477429, "body": "Thanks  simbabque for your help, much appreciated. I agree it can make code hard to read, i do try to keep it clean on real programs. But also, i find this stuff the fun part of perl :-/"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "edited": false, "score": 1, "creation_date": 1523278078, "post_id": 49730718, "comment_id": 86480380, "body": "@hoffmeister I agree, it can be fun. But as someone who teaches Perl let me tell you that it&#39;s not the best approach to learn. The Perl programming language owes parts of its sometimes bad reputation to code like this, and we are working hard on improving that. Anyway, have fun learning! :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 7, "last_activity_date": 1523273087, "last_edit_date": 1523273087, "creation_date": 1523269440, "answer_id": 49730718, "question_id": 49730536, "link": "https://stackoverflow.com/questions/49730536/eval-loop-syntax/49730718#49730718", "title": "Eval loop syntax", "body": "<p>You misunderstand what your first example does.</p>\n\n<pre><code>my @a = map eval s/\\B/*/gr,  0 .. 10000;\n</code></pre>\n\n<p>This does not pass a list to <code>eval</code>. The <code>eval s/...//</code> is the argument to <code>map</code> in the non-block form. This becomes more clear when you add parentheses.</p>\n\n<pre><code>my @a = map( eval( s/\\B/*/gr ),  0 .. 10000 );\n</code></pre>\n\n<p>It will call the <code>eval</code> statement for every number, and return a list of results, which gets assigned to <code>@a</code>. The code adds an asterisk after every other digit and builds a list of the resulting strings.</p>\n\n<hr>\n\n<p>In this code, you again misunderstand what the <code>map</code> does.</p>\n\n<pre><code>my ($a, $b, $c) = @_;\n@aa=map eval \"$a $_ $b\", for qw \"+ - / *\";\n</code></pre>\n\n<p>The <code>map</code> is essentially an in-place <code>for</code> loop. Adding a <a href=\"https://en.wikipedia.org/wiki/Reverse_Polish_notation\" rel=\"nofollow noreferrer\"><em>postfix</em></a> <code>for</code> doesn't do anything useful here. <code>map</code> will already iterate all elements in your list. The list in this case is <code>\"+\", \"-\", \"/\", \"*\"</code>, which was created by the <code>qw//</code> operator.</p>\n\n<p>Get rid of the <code>for</code> and it will work.</p>\n\n<pre><code>my ( $x, $y ) = ( 1, 2 );\nmy @results = map eval \"$x $_ $y\", qw \"+ - / *\";\n</code></pre>\n\n<p>The results of this are:</p>\n\n<pre><code> 3,\n -1,\n 0.5,\n 2\n</code></pre>\n\n<p>I suggest you <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\">read up on <code>map</code></a>.</p>\n"}], "owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 49730718, "answer_count": 1, "score": 0, "last_activity_date": 1523273087, "creation_date": 1523268846, "last_edit_date": 1523269285, "question_id": 49730536, "link": "https://stackoverflow.com/questions/49730536/eval-loop-syntax", "title": "Eval loop syntax", "body": "<p>I'm practicing my Perl on codefights. </p>\n\n<p>I've seen someone in a previous task feed Eval a list to make an array. </p>\n\n<pre><code>@a = map eval s/\\B/*/gr,  0 .. 10000;\n</code></pre>\n\n<p>Yet, when i try and feed eval a list it give me an error</p>\n\n<pre><code>my ($a,$b,$c)=(1,2,3);\nreturn 1 if eval \"$a$_$b==$c\", for qw \"+ - / *\";\n</code></pre>\n\n<p>This line also does not work as expected.</p>\n\n<pre><code>my ($a, $b, $c) = @_;\n@aa=map eval \"$a $_ $b\", for qw \"+ - / *\";\n</code></pre>\n\n<p>However, this works</p>\n\n<pre><code>my ($a,$b,$c)=(1,2,3);\nfor (qw \"+ - / *\")\n{\n    return 1 if eval \"$a$_$b==$c\";\n}\n</code></pre>\n\n<p>Can someone explain what the difference between the statements is? </p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "visual-studio-code"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1523271685, "post_id": 49728724, "comment_id": 86476230, "body": "Downvoters, do not close. See &lt;<a href=\"https://stackoverflow.com/help/on-topic\">stackoverflow.com/help/on-topic</a>&gt; : &quot;software tools commonly used by programmers&quot;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1523361846, "post_id": 49728724, "comment_id": 86520812, "body": "Please <a href=\"https://stackoverflow.com/posts/49728724/edit\">edit</a> your question and include links to the tools you&#39;re using."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9173801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EW9nJ.png?s=128&g=1", "display_name": "a153", "link": "https://stackoverflow.com/users/9173801/a153"}, "edited": false, "score": 0, "creation_date": 1523369994, "post_id": 49755935, "comment_id": 86526982, "body": "I have vscode 1.22.1 and both .cgi and .pl are recognized as perl files."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 1, "last_activity_date": 1523369726, "creation_date": 1523369726, "answer_id": 49755935, "question_id": 49728724, "link": "https://stackoverflow.com/questions/49728724/vscode-extensions-code-outline-for-perl-cgi-files/49755935#49755935", "title": "VSCode extensions: code-outline for Perl .cgi files", "body": "<p>File extensions don't really matter.</p>\n\n<p>In the bottom right of the Visual Studio Code window will be a menu where you can pick the language you are working on.</p>\n\n<p>It won't default to Perl for files with a <code>.cgi</code> extension, but you can change that.</p>\n\n<p><a href=\"https://i.stack.imgur.com/d3RWM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d3RWM.png\" alt=\"The menu is between the End Of Line setting and the Feedback smiley face\"></a></p>\n"}], "owner": {"reputation": 51, "user_id": 9173801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EW9nJ.png?s=128&g=1", "display_name": "a153", "link": "https://stackoverflow.com/users/9173801/a153"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1064, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1526934368, "creation_date": 1523263019, "last_edit_date": 1524044174, "question_id": 49728724, "link": "https://stackoverflow.com/questions/49728724/vscode-extensions-code-outline-for-perl-cgi-files", "title": "VSCode extensions: code-outline for Perl .cgi files", "body": "<p>I'm trying to use <a href=\"https://code.visualstudio.com/\" rel=\"nofollow noreferrer\">Visual Studio Code</a> for Perl (on Debian 9). I have installed VSCode extensions:</p>\n\n<ul>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=patrys.vscode-code-outline\" rel=\"nofollow noreferrer\">Code Outline</a> (by Patryk Zawadzki);</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=henriiik.vscode-perl\" rel=\"nofollow noreferrer\">Perl</a> (by Henrik Sjooh).</li>\n</ul>\n\n<p>Extension <em>code-outline</em> works great for .pl files but doesn't for .cgi files (although both .pl and .cgi recognized as Perl files). I can't find any info for how to fix it. Maybe someone did the same already? How to make <em>code-outline</em> extension works for .cgi files too?</p>\n"}, {"tags": ["mongodb", "perl", "cpan", "moo", "bless"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1523261219, "post_id": 49727740, "comment_id": 86470143, "body": "You need to post a short piece of code that reproduces the problem. Without being able to debug it ourselves there is only a very slim chance that we can help you."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 4, "creation_date": 1523263736, "post_id": 49727740, "comment_id": 86471463, "body": "Please show the relevant code, at least the <code>My::Bulk::Update::Module::apply_bulk_update()</code> method and the inheritance structure of that module. The error seems to indicate that you are calling a class method on an instance, e.g. <code>$instance-&gt;foo</code> instead of <code>Package-&gt;foo</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1523275928, "post_id": 49727740, "comment_id": 86478921, "body": "I concur. Most likely suspect is <code>apply_bulk_update</code>. It calls <code>MongoDB::Collection::new($obj)</code> when that method expects <code>MongoDB::Collection::new($package)</code>."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1523283478, "post_id": 49727740, "comment_id": 86484119, "body": "See <a href=\"http://www.perlmonks.org/?node_id=859439\" rel=\"nofollow noreferrer\">this discussion</a>."}, {"owner": {"reputation": 158, "user_id": 6194845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/759b27faabc9c86f6602f8cfabfef492?s=128&d=identicon&r=PG", "display_name": "mshirlaw", "link": "https://stackoverflow.com/users/6194845/mshirlaw"}, "edited": false, "score": 0, "creation_date": 1523316406, "post_id": 49727740, "comment_id": 86500968, "body": "Thanks, I&#39;ve added more code to show what <code>apply_bulk_update</code> does but I doubt this will be helpful. I&#39;d love to be able to provide code that reproduces this error but I don&#39;t have any. I realise the chances of someone being able to help are slim..."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1523375371, "post_id": 49727740, "comment_id": 86530841, "body": "Can you verify in your code that <code>$self, $query, $params, $db</code> are all their expected values before the exception happens? E.g. the stack trace indicates that <code>apply_bulk_update()</code> is called as a method with no extra arguments, but expects a <code>$db</code> argument. By the way, \u201cWrapper around DBI module\u201d sounds suspicious. Is that class by chance called <code>DB</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 158, "user_id": 6194845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/759b27faabc9c86f6602f8cfabfef492?s=128&d=identicon&r=PG", "display_name": "mshirlaw", "link": "https://stackoverflow.com/users/6194845/mshirlaw"}, "is_accepted": true, "score": 4, "last_activity_date": 1523950056, "creation_date": 1523950056, "answer_id": 49872204, "question_id": 49727740, "link": "https://stackoverflow.com/questions/49727740/cryptic-moo-perl-error-attempt-to-bless-into-a-reference-at/49872204#49872204", "title": "Cryptic Moo (Perl) Error &quot;Attempt to bless into a reference at...&quot;", "body": "<p>Just in case anyone was interested...</p>\n\n<p>After a chunk of further debugging the error was traced to the exact point where <code>My::Bulk::Update::Module::apply_bulk_update</code> or <code>My::Bulk::Update::Module::_generate_query</code> was called but logging code inside these subroutines determined that they were not being executed as expected. </p>\n\n<p>To determine what was going on <code>B::Deparse</code> was used to rebuild the source code for the body of these subroutines (or at least the source code located at the memory address to which these subs were pointing)</p>\n\n<p>After using this library e.g.</p>\n\n<p><code>B::Deparse-&gt;new-&gt;coderef2text(\\&amp;My::Bulk::Update::_generate_query)</code> </p>\n\n<p>it became obvious that the error occurred when <code>My::Bulk::Update::_generate_query</code> was pointing at a memory location which contained something entirely different (i.e. <code>MongoDB::Collection::new</code> etc). </p>\n\n<p>This issue appears to have been solved upstream by the following commit in the <code>Sub::Defer</code> module (which is a dependency for <code>Moo</code>).</p>\n\n<p><a href=\"https://github.com/moose/Sub-Quote/commit/4a38f034366e79b76d29fec903d8e8d02ee01896\" rel=\"nofollow noreferrer\">https://github.com/moose/Sub-Quote/commit/4a38f034366e79b76d29fec903d8e8d02ee01896</a></p>\n\n<p>If you read the summary of the commit you can see the change that was made:</p>\n\n<blockquote>\n  <p><strong>Prevent defer_info and undefer_sub from operating on expired subs.</strong> Validate that the arguments to defer_info and undefer_sub refer to\n  actual live subs.  Use the weak refs we are storing to the deferred and\n  undeferred subs to make sure the original subs are still alive, and we\n  aren't returning data related to a reused memory address. Also make sure we don't expire data related to unnamed subs.  Since the\n  user can capture the undeferred sub via undefer_sub, we can't track the\n  expiry without using a fieldhash.  For now, avoid introducing that\n  complexity, since the amount we leak should not be that great.</p>\n</blockquote>\n\n<p>Upgrading the version of <code>Sub::Defer</code> appears to have solved the issue. </p>\n"}], "owner": {"reputation": 158, "user_id": 6194845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/759b27faabc9c86f6602f8cfabfef492?s=128&d=identicon&r=PG", "display_name": "mshirlaw", "link": "https://stackoverflow.com/users/6194845/mshirlaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 1, "accepted_answer_id": 49872204, "answer_count": 1, "score": 3, "last_activity_date": 1523950172, "creation_date": 1523259414, "last_edit_date": 1523950172, "question_id": 49727740, "link": "https://stackoverflow.com/questions/49727740/cryptic-moo-perl-error-attempt-to-bless-into-a-reference-at", "title": "Cryptic Moo (Perl) Error &quot;Attempt to bless into a reference at...&quot;", "body": "<p>Probably a long shot but I'm wondering if anyone has seen an error like this before, as I can not reproduce it outside of a production environment. Essentially the situation is as follows: </p>\n\n<ol>\n<li>I have a module called <code>My::Budget::Module</code> (renamed for simplicity) which is responsible for updating the \"budget\" for a given object in the application</li>\n<li>The <code>My::Budget::Module</code> uses a <code>Moo</code> object that I built called <code>My::Bulk::Update::Module</code> which does the following:\n\n<ul>\n<li>build up an array of database rows that need to be updated</li>\n<li>build a MySQL update query string / statement which will update all rows at once </li>\n<li>actually update all rows at once</li>\n</ul></li>\n<li>The <code>My::Bulk::Update::Module</code> will then perform the update and mark the rows that have been updated as \"stale\" so that they will not be cached</li>\n</ol>\n\n<p>The error always seems to occur somewhere after adding a row to be updated but before the code which actually applies the update returns. </p>\n\n<p>If you look at the stack trace that I have included below you can see that the error takes the form </p>\n\n<p><code>Attempt to bless into a reference at...</code> </p>\n\n<p>and the point at which this occurs is in the constructor of <code>Moo/Object.pm</code> which is <code>Version 2.003002</code> of <code>Moo</code> from <code>cpan</code>(see <a href=\"https://metacpan.org/pod/Moo\" rel=\"nofollow noreferrer\">here</a>).</p>\n\n<pre><code>Attempt to bless into a reference at /path/to/module/from/cpan/Moo/Object.pm line 25 at /path/to/module/from/cpan/Moo/Object.pm line 25.\nMoo::Object::new(My::Bulk::Update::Module=HASH(0xf784b50)) called at (eval 1808) line 28\nMongoDB::Collection::new(My::Bulk::Update::Module=HASH(0xf784b50)) called at /path/to/my/bulk/update/module line XXXX\nMy::Bulk::Update::Module::apply_bulk_update(My::Bulk::Update::Module=HASH(0xf784b50)) called at /path/to/my/budget/module line XXXX\nMy::Budget::Module::update_budget(My::Budget::Module=HASH(0xf699a38)) called at /path/to/my/budget/module line XXXX\n</code></pre>\n\n<p>Moving backwards through the stack trace leads to <code>MongoDB::Collection</code> &amp; this is where things start to get very weird. </p>\n\n<p><code>MongoDB::Collection</code> is also a <code>cpan</code> module but the module which appears at this point varies and I can't see a pattern here except that it is always a <code>Moo</code> object. Moreover, I'm unsure why this module is being instantiated as there is no call to <code>MongoDB::Collection::new</code> at the line mentioned. </p>\n\n<p>In addition, from the stack trace it looks like <code>MongoDB::Collection</code> and <code>Moo::Object</code> are instantiated with the first argument being <code>My::Bulk::Update::Module=HASH(0xf784b50)</code>. Given the application logic I do not believe <code>MongoDB::Collection</code> should be instantiated here nor should <code>My::Bulk::Update::Module</code> be passed to <code>MongoDB::Collection</code> at all. </p>\n\n<p>Other than the fact that it is a <code>Moo</code> object, <code>My::Bulk::Update::Module</code> does not extend any other module and is designed to be a stand alone \"utility\" module. It is only used at one place in the entire application.</p>\n\n<p>Has anyone seen something similar before?</p>\n\n<p><strong>EDIT:</strong> Adding some more code - <code>apply_bulk_update</code> doesn't do much at all. There is no call to <code>MongoDB::Collection</code> here and <code>MongoDB::Collection</code> just \"happens\" to be the moudule included in the stack trace in this particular example. This is not always <code>MongoDB::Collection</code> - I've also seen <code>MongoDB::Timestamp</code>, <code>MongoDB::Cursor</code>, <code>Search::Elasticsearch::Serializer::JSON</code>, <code>Search::Elasticsearch::Logger::LogAny</code> etc etc</p>\n\n<pre><code>sub apply_bulk_update\n{\n    my $self = shift;\n    my ($db) = @_; # wrapper around DBI module\n\n    my $query  = $self-&gt;_generate_query(); # string UPDATE table SET...\n    my $params = $self-&gt;_params; # arrayref\n\n    return undef unless $params &amp;&amp; scalar @$params;\n\n    $db-&gt;do($query, undef, @$params);        \n}\n</code></pre>\n\n<p>The code sometimes dies as soon as <code>apply_bulk_update</code> is called, sometimes on the call to <code>_generate_query</code> and sometimes after the query executes on the last line...</p>\n"}, {"tags": ["arrays", "perl", "scope"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1523254103, "post_id": 49726428, "comment_id": 86466680, "body": "Your use of <code>grep</code> is so wrong that this shouldn&#39;t compile."}, {"owner": {"reputation": 125, "user_id": 9105029, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e79d84e3e8d9216cd44f249a119feb62?s=128&d=identicon&r=PG&f=1", "display_name": "jrdev", "link": "https://stackoverflow.com/users/9105029/jrdev"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1523254144, "post_id": 49726428, "comment_id": 86466696, "body": "@zdim so how do i fix it?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1523254209, "post_id": 49726428, "comment_id": 86466721, "body": "Why not start by showing the code you actually run to get that error? If we work with this we are merely guessing."}, {"owner": {"reputation": 125, "user_id": 9105029, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e79d84e3e8d9216cd44f249a119feb62?s=128&d=identicon&r=PG&f=1", "display_name": "jrdev", "link": "https://stackoverflow.com/users/9105029/jrdev"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1523254260, "post_id": 49726428, "comment_id": 86466749, "body": "ok i thought my full code might be too confusing but ill add it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1523254430, "post_id": 49726428, "comment_id": 86466823, "body": "Thank you, but my point was that <code>grep</code> without LIST will not compile. It will not run. You must have <code>grep BLOCK LIST</code> or <code>grep EXPR, LIST</code> while what you are showing is only <code>grep EXPR</code>. I don&#39;t see how that code can print anything other than <code>Not enough arguments for grep ...</code> -- and not run at all."}, {"owner": {"reputation": 125, "user_id": 9105029, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e79d84e3e8d9216cd44f249a119feb62?s=128&d=identicon&r=PG&f=1", "display_name": "jrdev", "link": "https://stackoverflow.com/users/9105029/jrdev"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1523254768, "post_id": 49726428, "comment_id": 86466944, "body": "Is there another way without using grep? I was playing around with if statements before, but my issue is that i have no clue how to really loop through elements of an array to check for stuff Ike that without splitting it into another array ."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1523254772, "post_id": 49726428, "comment_id": 86466945, "body": "I suggest to check what you have that runs and prints the error you show.  As for the basics of what you are asking, <code>if (grep { &#47;[a-z]&#47;i } @fields[2..9]) { ... }</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1523254920, "post_id": 49726428, "comment_id": 86467016, "body": "Also, <code>for ($i=2, ...)</code> is not a good way to loop over a range of numbers; you would normally do <code>for my $i (2..9)</code> but that&#39;s most likely not needed here. I suggest a good tutorial on Perl, and for this question to fix it and someone might offer a review of basics."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1523255240, "post_id": 49726428, "comment_id": 86467144, "body": "Re &quot;<i>ok i thought my full code might be too confusing but ill add it.</i>&quot;, No, that&#39;s backwards!!! You should post the minimal, runnable code that demonstrates your problem. (See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1523256212, "post_id": 49726428, "comment_id": 86467589, "body": "Re &quot;<i>how to really loop through elements of an array</i>&quot; -- if you use <code>grep</code> you don&#39;t need to; it process a list (in the way I showed above). This does assume that I understand what you need (to find whether any of elements 2--9 of array <code>@fields</code> contains a letter)."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 5, "last_activity_date": 1523261380, "creation_date": 1523261380, "answer_id": 49728230, "question_id": 49726428, "link": "https://stackoverflow.com/questions/49726428/loop-through-elements-of-array-to-find-character-perl/49728230#49728230", "title": "loop through elements of array to find character perl", "body": "<p>OK, so the problem you've got here is that you're thinking of <code>grep</code> in Unix terms  - a text based thing. It doesn't work like that in perl - it operates on a list.</p>\n\n<p>Fortunately, this is pretty easy to handle in your case, because you can <code>split</code> your line into words.</p>\n\n<p>Without your source data, this is hopefully a proof of concept:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\n\nwhile ( &lt;DATA&gt; ) { \n\n   #split the current line on whitespace into an array. \n   #first two elements  get assigned to firstname lastname, and then the rest  \n   #goes into @values\n   my ( $firstname, $lastname, @values ) = split; #works on $_ implicitly.\n   #check every element in @values, and test the regex 'non-digit' against it. \n   my @errors = grep { /\\D/ } @values;\n   #output any matches e.g. things that contained 'non-digits' anywhere. \n   print Dumper \\@errors; \n\n   #an array in a scalar context evaluates as the number of elements. \n   #we need to use \"scalar\" here because print accepts list arguments. \n   print \"There were \", scalar @errors, \" errors\\n\";\n\n}\n\n__DATA__\nbob hankerman 2039 3232 23 232 645 64x3 324\n</code></pre>\n\n<p>Or reducing down the logic:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nwhile ( &lt;DATA&gt; ) { \n   #note - we don't need to explicity specify 'scalar' here,\n   #because assigning it to a scalar does that automatically. \n\n   #(split) splits the current line, and [2..8] skips the first two. \n   my $count_of_errors = grep { /\\D/ } (split)[2..8];       \n   print $count_of_errors;\n}\n\n__DATA__\nbob hankerman 2039 3232 23 232 645 64x3 324\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 8406244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e563dea83a0e7ae2718e290a984320ad?s=128&d=identicon&r=PG&f=1", "display_name": "Dipit Sethi", "link": "https://stackoverflow.com/users/8406244/dipit-sethi"}, "is_accepted": false, "score": 0, "last_activity_date": 1523359620, "creation_date": 1523359620, "answer_id": 49752451, "question_id": 49726428, "link": "https://stackoverflow.com/questions/49726428/loop-through-elements-of-array-to-find-character-perl/49752451#49752451", "title": "loop through elements of array to find character perl", "body": "<p>First : You don't need to use \"GREP\", Simply you can match the string with \"=~\" in perl and you can print matched value with $&amp;. </p>\n\n<p>Second : You should use $_ if and only if there is not other variable used in the loop. There is already $i used in the loop, you can write the loop as :</p>\n\n<pre><code>for my $i (2..9) {\n  print \"$i\\n\";\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>foreach(2..9) {\n  print \"$_\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 9105029, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e79d84e3e8d9216cd44f249a119feb62?s=128&d=identicon&r=PG&f=1", "display_name": "jrdev", "link": "https://stackoverflow.com/users/9105029/jrdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1523359620, "creation_date": 1523253590, "last_edit_date": 1523254337, "question_id": 49726428, "link": "https://stackoverflow.com/questions/49726428/loop-through-elements-of-array-to-find-character-perl", "title": "loop through elements of array to find character perl", "body": "<p>I have a perl array where I only want to loop through elements 2-8. </p>\n\n<p>The elements are only meant to contain numbers, so if any of those elements contain a letter, I want to set an <code>error flag = 1</code>, as well as some other variables as seen. </p>\n\n<p>The reason I have 2 error flag variables is due to scope rules within the loop.</p>\n\n<p>fields is an array, I created by splitting another irrelevant array by the \" \" key. </p>\n\n<p>So, when I try to print <code>error_line2, error_fname2</code> from outside the loop, I get this:</p>\n\n<pre><code>Use of uninitialized value $error_flag2 in numeric eq (==) \n</code></pre>\n\n<p>I don't know why, because I've initialized the value within the loop and created the variable outside the loop. \nNot sure if I'm even looping to find characters correctly, so then it's not setting the <code>error_flag2 = 1</code>.</p>\n\n<p><strong>Example line:</strong></p>\n\n<pre><code>bob hankerman 2039 3232 23 232 645 64x3 324\n</code></pre>\n\n<p>since element 7 has the letter 'x' , I want the flag to be set to 1.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Scalar::Util qw(looks_like_number);\n\nmy $players_file = $ARGV[0];\nmy @players_array;\n\nopen (my $file, \"&lt;\", \"$players_file\")\n    or die \"Failed to open file: $!\\n\";\nwhile(&lt;$file&gt;) {\n    chomp;\n    push @players_array, $_;\n}\nclose $file;\n#print join \"\\n\", @players_array;\n\nmy $num_of_players = @players_array;\nmy $error_flag;\nmy $error_line;\nmy $error_fname;\nmy $error_lname;\n\nmy $error_flag2=1;\nmy $error_line2;\nmy $error_fname2;\nmy $error_lname2;\nmy $i;\nforeach my $player(@players_array){\n    my @fields = split \" \", $player;\n    my $size2 = @fields;    \n\n        for($i=2; $i&lt;9; $i++){\n    print \"$fields[$i] \\n\";\n            if (grep $_ =~ /^[a-zA-Z]+$/){\n\n                my $errorflag2 = 1;\n                $error_flag2 = $errorflag2;\n                my $errorline2 = $player +1;\n                $error_line2 = $errorline2;\n                my $errorfname2 = $fields[0];\n                $error_fname2 = $errorfname2;               \n            }\n        }\n\n    if ($size2 ==  \"9\" ) {\n        my $firstname = $fields[0];\n        my $lastname = $fields[1];\n        my $batting_average = ($fields[4]+$fields[5]+$fields[6]+$fields[7]) / $fields[3];\n        my $slugging = ($fields[4]+($fields[5]*2)+($fields[6]*3)+($fields[7]*4)) / $fields[3];\n        my $on_base_percent = ($fields[4]+$fields[5]+$fields[6]+$fields[7] +$fields[8]) / $fields[2];\n\n        print \"$firstname \";\n        print \"$lastname \";\n        print \"$batting_average \";\n        print \"$slugging \";\n        print \"$on_base_percent\\n \";\n    }\n    else {\n        my $errorflag = 1;\n        $error_flag = $errorflag;\n        my $errorline = $player +1;\n        $error_line = $errorline;\n        my $errorfname = $fields[0];\n        $error_fname = $errorfname;\n        my $errorlname = $fields[1];\n        $error_lname = $errorlname;\n    }\n\n}\nif ($error_flag == \"1\"){\n        print \"\\n Line $error_line : \";\n    print \"$error_fname, \";\n        print \"$error_lname :\";\n    print \"Line contains not enough data.\\n\";\n}\n\nif ($error_flag2 == \"1\"){\n        print \"\\n Line $error_line2 : \";\n        print \"$error_fname2, \";\n\n        print \"Line contains bad data.\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "ipc"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1523245184, "post_id": 49724935, "comment_id": 86464271, "body": "What is <code>token=&quot;valid_tokens.txt&quot;</code>? I wouldn&#39;t expect that to be a valid use of &quot;named arguments.&quot;  How do you invoke that program from the command line? You can pass arguments to a program only in a way it&#39;s written to take them. As for the error you show, what is the relevant code in &quot;<i>ngram_calcs.PL</i>&quot; (simplified if need be)?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1523245514, "post_id": 49724935, "comment_id": 86464330, "body": "You are not &quot;<i>supplying a named argument to IPC::System::Simple</i>&quot;.  The module provides commands that replace the <code>system</code> builtin and which supply  to that program what is given to them."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1523245682, "post_id": 49724935, "comment_id": 86464357, "body": "I suggest that you edit the question and show how those programs are invoked on their own, from the command line, without the script you are writing. You&#39;d also want to show the code of the script you are writing."}], "answers": [{"comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 3, "creation_date": 1523259035, "post_id": 49725451, "comment_id": 86468999, "body": "<code>system</code> with a single string argument has the disadvantage that it may cause the command to be passed through the default shell, causing shell metacharacters to make a difference. Unless those interpolations are specifically desired, the multi-argument form of <code>system</code> is safer."}], "tags": [], "owner": {"reputation": 4840, "user_id": 1051441, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/XfVDj.png?s=128&g=1", "display_name": "Shuwn Yuan Tee", "link": "https://stackoverflow.com/users/1051441/shuwn-yuan-tee"}, "is_accepted": false, "score": 0, "last_activity_date": 1523247298, "creation_date": 1523247298, "answer_id": 49725451, "question_id": 49724935, "link": "https://stackoverflow.com/questions/49724935/run-perl-script-within-perl-script-using-named-arguments/49725451#49725451", "title": "Run perl script within perl script using named arguments", "body": "<p>Can you try this format?</p>\n\n<pre><code>system('/Users/cat/perl5/bin/statistic.pl  --token valid_tokens.txt  ll.pm  lab01_jav_bigrams.ll  /Users/cat/Perl_scripts/214_Final_project/lab01_java_bigrams.cnt');\n</code></pre>\n\n<p>But I check the source of the CPAN module, seems <code>token</code> is an option for <code>count.pl</code>, but not <code>statistic.pl</code>.</p>\n\n<p>Anyway, any options can be specified similar to <code>--token valid_tokens.txt</code>.</p>\n\n<p>Hope this help!</p>\n"}, {"comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1523262255, "post_id": 49727853, "comment_id": 86470657, "body": "The arguments to the script need to come after the script, not after <code>perl</code>. Also, <a href=\"https://stackoverflow.com/a/49728446/9300627\">as far as I can tell</a>, <code>token</code> needs two dashes and including the quotes in the argument would cause the target script to try and open a filename <i>including</i> those quotes."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1523262887, "last_edit_date": 1523262887, "creation_date": 1523259859, "answer_id": 49727853, "question_id": 49724935, "link": "https://stackoverflow.com/questions/49724935/run-perl-script-within-perl-script-using-named-arguments/49727853#49727853", "title": "Run perl script within perl script using named arguments", "body": "<p>Assuming your call to <code>statistic.pl</code> is broadly correct, the parameters to <code>system</code> need to look like this</p>\n\n<pre><code>system($^X,\n    \"/Users/cat/perl5/bin/statistic.pl\",\n    qq/token=\"valid_tokens.txt\"/,\n    \"ll.pm\",\n    \"lab01_jav_bigrams.ll\",\n    \"/Users/cat/Perl_scripts/214_Final_project/lab01_java_bigrams.cnt\"\n);\n</code></pre>\n\n<p>i.e. all parameters belong <em>after</em> the program file, and the whole of the named parameter string must be enclosed in quotes</p>\n\n<p>Please read the comment from <strong>haukex</strong> below for another potential error</p>\n"}, {"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 4, "last_activity_date": 1523262755, "last_edit_date": 1523262755, "creation_date": 1523262139, "answer_id": 49728446, "question_id": 49724935, "link": "https://stackoverflow.com/questions/49724935/run-perl-script-within-perl-script-using-named-arguments/49728446#49728446", "title": "Run perl script within perl script using named arguments", "body": "<p>I am confused about your <code>system</code> invocation. Looking at the sources of <a href=\"https://metacpan.org/source/TPEDERSE/Text-NSP-1.31/bin/statistic.pl\" rel=\"nofollow noreferrer\"><code>statistic.pl</code></a> and <a href=\"https://metacpan.org/source/TPEDERSE/Text-NSP-1.31/bin/count.pl\" rel=\"nofollow noreferrer\"><code>count.pl</code></a>, it seems that only the latter takes a <code>token</code> argument, but you don't seem to be running <code>count.pl</code>. <a href=\"http://perldoc.perl.org/perlvar.html#$%5EX\" rel=\"nofollow noreferrer\"><code>$^X</code></a> is the currently running Perl interpreter, which would normally be followed by any arguments to the <em>interpreter</em>, then the name of the script, then any arguments <em>to the script</em>, so placing the <code>token</code> argument before the script doesn't make sense to me.</p>\n\n<p>If you are for example trying to pipe the output of <code>count.pl</code> into <code>statistic.pl</code>, you'll have to explain further, because that is something that <a href=\"https://metacpan.org/pod/IPC::System::Simple\" rel=\"nofollow noreferrer\"><code>IPC::System::Simple</code></a> can't handle (at least not without invoking the shell, which I would recommend against), and you'd need a more advanced module like <a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"nofollow noreferrer\"><code>IPC::Run</code></a>. For now, I will assume you want to pass the <code>token</code> parameter to a script that supports it.</p>\n\n<p>Command line arguments are just strings. If from a *NIX shell you were to write something like <code>./script.pl token=\"test file\" foo bar</code>, then <em>the shell</em> would take over the interpretation of white space and quoting. <code>script.pl</code> will get a list of strings like <code>(\"token=test file\", \"foo\", \"bar\")</code> (note how the shell took care of the quotes there).</p>\n\n<p>This list of strings is what you need to pass to <code>system</code>, which is <em>not</em> necessarily the same as what you would type on the command line. It is up to the called program to interpret those arguments. The two scripts you are running use <a href=\"http://perldoc.perl.org/Getopt/Long.html\" rel=\"nofollow noreferrer\"><code>Getopt::Long</code></a>, and the named arguments need to be prefixed by two dashes. So something like this should work:</p>\n\n<pre><code>system($^X, \"/Users/cat/perl5/bin/count.pl\", \"--token=valid_tokens.txt\", ...);\n</code></pre>\n\n<p>As for how to pass arguments that include special characters like quotes (which does not apply in this case), there are various syntaxes in Perl: <code>\"--foo=\\\"bar\\\"\"</code>, <code>'--foo=\"bar\"'</code>, or <code>q{--foo=\"bar\"}</code> (see <a href=\"http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow noreferrer\">Quote and Quote-like Operators</a>).</p>\n"}], "owner": {"reputation": 99, "user_id": 6861805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ed0a1dc79b796101e924d55f7ce2501?s=128&d=identicon&r=PG&f=1", "display_name": "Catherine D", "link": "https://stackoverflow.com/users/6861805/catherine-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 0, "accepted_answer_id": 49728446, "answer_count": 3, "score": 3, "last_activity_date": 1523284845, "creation_date": 1523242543, "last_edit_date": 1523284845, "question_id": 49724935, "link": "https://stackoverflow.com/questions/49724935/run-perl-script-within-perl-script-using-named-arguments", "title": "Run perl script within perl script using named arguments", "body": "<p>I'm writing a Perl program that must run a few Perl scripts multiple times on different inputs.</p>\n\n<p>The scripts I'm trying to use are <code>count.pl</code> and <code>statistic.pl</code> from\n<a href=\"https://metacpan.org/pod/Text::NSP\" rel=\"nofollow noreferrer\"><code>Text::NSP</code></a>.\nI didn't write those myself so I don't want to try and refactor them into a module.</p>\n\n<p>I looked at\n<a href=\"https://stackoverflow.com/questions/364842/how-do-i-run-a-perl-script-from-within-a-perl-script\">a similar question</a>\nand figured out how to use the <code>system</code> method from\n<a href=\"https://metacpan.org/pod/IPC::System::Simple\" rel=\"nofollow noreferrer\"><code>IPC::System::Simple</code></a>.</p>\n\n<p>However, I want to make use of the named arguments in <code>count.pl</code> and <code>statistic.pl</code>. I haven't yet figured out how to do this. This is my current code:</p>\n\n<pre><code>system($^X, token=\"valid_tokens.txt\", \"/Users/cat/perl5/bin/statistic.pl\", \"ll.pm\", \"lab01_jav_bigrams.ll\",\n\"/Users/cat/Perl_scripts/214_Final_project/lab01_java_bigrams.cnt\");\n</code></pre>\n\n<p>And this is the error I get:</p>\n\n<blockquote>\n  <p>Can't modify constant item in scalar assignment at ngram_calcs.PL line 22, near \"\"valid_tokens.txt\",\" Bareword \"token\" not allowed while \"strict subs\" in use at ngram_calcs.PL line 22.</p>\n</blockquote>\n\n<p>It's worth noting that the code worked fine until I added the named argument. How do I supply a named argument to <code>IPC::System::Simple</code>? Or is there a better way to do what I'm trying to do?</p>\n\n<p>Edit: Thanks, Haukex, I did have the wrong parameters, and using \"--token=valid_tokens.txt\" worked.</p>\n\n<p>Even though the problem is solved, I'll share more context so that other people who see can benefit. On the commmand line I would type this:</p>\n\n<pre><code>count.pl -token validtokens.txt lab01_java_bigrams.cnt Users/cat/CS214/lab01_java.txt\nstatistic.pl -score 6.63 ll.pm lab01_java.ll lab01_java_bigrams.cnt\n</code></pre>\n\n<p>This is the correct perl code:</p>\n\n<pre><code>system($^X, \"/Users/cat/perl5/bin/count.pl\", \"--token=valid_tokens.txt\", \"lab01_java_bigrams.cnt\", $filename);\nsystem($^X, \"/Users/cat/perl5/bin/statistic.pl\", \"--score=6.63\", \"ll.pm\", \"lab01_java_bigrams.ll\", \"/Users/cat/Perl_scripts/214_Final_project/lab01_java_bigrams.cnt\");\n</code></pre>\n"}, {"tags": ["perl", "semantics"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1523208796, "post_id": 49720410, "comment_id": 86454497, "body": "I do not think there is something special with <code>do</code>. You could have used unqualified name <code>%h_test</code> in your first case also"}, {"owner": {"reputation": 1799, "user_id": 3618854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e8563fab07e0c27d82e18d8ba9aa8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yakov Dan", "link": "https://stackoverflow.com/users/3618854/yakov-dan"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1523209545, "post_id": 49720410, "comment_id": 86454759, "body": "apparently not, because I get &quot;Global symbol &quot;%h_test&quot; requires explicit package name&quot;. which makes sense when using strict."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1523209919, "post_id": 49720410, "comment_id": 86454889, "body": "Yes you are right. I also get the compile time error if I remove the package name qualifier. Strange. Anyway you could just put <code>our</code> in front of the declaration to get rid of the error"}, {"owner": {"reputation": 1799, "user_id": 3618854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e8563fab07e0c27d82e18d8ba9aa8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yakov Dan", "link": "https://stackoverflow.com/users/3618854/yakov-dan"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1523210457, "post_id": 49720410, "comment_id": 86455082, "body": "Sure I could. But the point is to understand, not to get rid of compile time errors :)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1523211052, "post_id": 49720410, "comment_id": 86455280, "body": "According to <a href=\"https://perldoc.perl.org/strict.html\" rel=\"nofollow noreferrer\">the documentation</a>  <code>use strict &#39;vars&#39;</code> does not generate an error if a name is fully qualified. So that should explain the behavior you see?"}, {"owner": {"reputation": 1799, "user_id": 3618854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e8563fab07e0c27d82e18d8ba9aa8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yakov Dan", "link": "https://stackoverflow.com/users/3618854/yakov-dan"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1523211393, "post_id": 49720410, "comment_id": 86455406, "body": "Indeed it would. It would not explain the behavior of &quot;do&quot;. What seems to happen is that &quot;do&quot; runs the provided block of code in a dynamically scoped package. However, I was unable to find any documentation of this behavior."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1523211586, "post_id": 49720410, "comment_id": 86455470, "body": "The same <a href=\"https://perldoc.perl.org/strict.html\" rel=\"nofollow noreferrer\">documentation</a> also says : <i>&quot;The effect of this pragma is limited to the current file or scope block&quot;</i> so that would explain why the <code>do</code> works since it is in another file?"}, {"owner": {"reputation": 1799, "user_id": 3618854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e8563fab07e0c27d82e18d8ba9aa8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yakov Dan", "link": "https://stackoverflow.com/users/3618854/yakov-dan"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1523211850, "post_id": 49720410, "comment_id": 86455562, "body": "I admit that I&#39;ve missed this sentence. However, this only half the picture, because when &quot;do&quot; runs, it places h_test in the correct scope, not in the global scope, as if the compilation were taking place where &quot;do&quot; appears (and thus use strict would still apply).   My current understanding of &quot;do&quot; semantics is the following:   1. run the block as if it appears in a separate file. 2. dynamic scoping still applies."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523212730, "post_id": 49720410, "comment_id": 86455889, "body": "I&#39;m unclear why you think <code>do</code> is in some way special, as its behaviour is very similar to that of comparable operators like <code>eval</code>, <code>require</code> etc. The ultimate answer to <i>&quot;how does it work?&quot;</i> is of course in the C source of <code>perl.exe</code>, but it&#39;s unclear what other sort of answer you would like. <code>do</code> is <i>certainly not</i> special in allowing unqualified names."}], "answers": [{"comments": [{"owner": {"reputation": 1799, "user_id": 3618854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e8563fab07e0c27d82e18d8ba9aa8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yakov Dan", "link": "https://stackoverflow.com/users/3618854/yakov-dan"}, "edited": false, "score": 0, "creation_date": 1523212829, "post_id": 49721352, "comment_id": 86455926, "body": "Ok, but do FILE still evaluates the code in the context of the correct package, i.e. h_test should be refereed to  as %bar::h_test everywhere else, even though it was evaluated with &quot;do&quot;.  It seems that this understanding is correct."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 5, "last_activity_date": 1523212727, "last_edit_date": 1523212727, "creation_date": 1523212424, "answer_id": 49721352, "question_id": 49720410, "link": "https://stackoverflow.com/questions/49720410/execution-rules-when-using-perls-do/49721352#49721352", "title": "Execution rules when using perl&#39;s do.", "body": "<p>The reason you do not get a compile time error when you do not declare <code>%h_test</code> with <code>our</code> in <code>test.pl</code>, is that the <code>use strict</code> that you have in your main script do not extend to the file <code>test.pl</code>. According to <a href=\"https://perldoc.perl.org/strict.html\" rel=\"noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n  <p>The <code>strict</code> pragma disables certain Perl expressions that could behave\n  unexpectedly or are difficult to debug, turning them into errors. The\n  effect of this pragma is limited to <strong>the current file</strong> or scope block.</p>\n</blockquote>\n\n<p>Also note that <a href=\"http://perldoc.perl.org/functions/do.html\" rel=\"noreferrer\">the documentation for <code>do</code></a> says:</p>\n\n<blockquote>\n  <p><code>do './stat.pl'</code> is largely like:  </p>\n\n<pre><code>eval `cat stat.pl`;\n</code></pre>\n  \n  <p>except that it's more concise, runs no external processes, and keeps\n  track of the current filename for error messages. It also differs in\n  that code evaluated with do FILE <strong>cannot see lexicals in the enclosing\n  scope</strong></p>\n</blockquote>\n\n<p>Also, according to <a href=\"https://perldoc.perl.org/strict.html\" rel=\"noreferrer\">the documentation</a> <code>use strict 'vars'</code> does not generate an error if a name is fully qualified. So that explains why you can write <code>%bar::h_test = ('b' =&gt; 'blah')</code> when using <code>strict</code> and whithout declaring the variable with <code>our</code>.</p>\n"}], "owner": {"reputation": 1799, "user_id": 3618854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e8563fab07e0c27d82e18d8ba9aa8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yakov Dan", "link": "https://stackoverflow.com/users/3618854/yakov-dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 49721352, "answer_count": 1, "score": 1, "last_activity_date": 1523212727, "creation_date": 1523206942, "question_id": 49720410, "link": "https://stackoverflow.com/questions/49720410/execution-rules-when-using-perls-do", "title": "Execution rules when using perl&#39;s do.", "body": "<p>I have a question about how perl executes the \"do\" function. </p>\n\n<p>suppose I have a function that goes something like this:</p>\n\n<pre><code>sub foo {\n    package bar;\n    %bar::h_test = ('b' =&gt; 'blah');\n}\n</code></pre>\n\n<p>when using strict and warnings, this will run just fine. \nnow suppose I have the following perl script, \"test.pl\":</p>\n\n<pre><code>%h_test = ('b' =&gt; 'blah');\n</code></pre>\n\n<p>now I can rewrite the previous function as follows:</p>\n\n<pre><code>sub foo {\n    package bar;\n    do ('test.pl');\n}\n</code></pre>\n\n<p>it seems that \"do\" lets me use unqualified names, as long as I keep them in a file. I understand why this makes sense from a design stand-point, since every script out there can't possibly be aware of whoever is calling it. However, I'm not sure what are the precise rules of running code with \"do\" that allow it.</p>\n\n<p>So, how does it work? Reading the perldoc didn't shed much light on the subject</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "edited": false, "score": 3, "creation_date": 1523194672, "post_id": 49718356, "comment_id": 86449701, "body": "What have you tried already?"}], "answers": [{"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 9, "last_activity_date": 1523194796, "creation_date": 1523194796, "answer_id": 49718459, "question_id": 49718356, "link": "https://stackoverflow.com/questions/49718356/reading-argv-array-input-as-a-string-followed-by-a-file-list/49718459#49718459", "title": "Reading @ARGV array input as a string followed by a file list", "body": "<p>The diamond operator works from the <code>@ARGV</code> array, so just <code>shift</code> off the first element of <code>@ARGV</code> before using <code>&lt;&gt;</code>:</p>\n\n<pre><code>my $first = shift(@ARGV);\n\nwhile (&lt;&gt;) {\n    # ...\n}\n</code></pre>\n\n<p>Or, since <code>shift</code> works on <code>@ARGV</code> by default when it's used outside of a subroutine, just this:</p>\n\n<pre><code>my $first = shift;\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9615221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5da19ecb8c5cb16296a8a44d8452535?s=128&d=identicon&r=PG&f=1", "display_name": "me_gone", "link": "https://stackoverflow.com/users/9615221/me-gone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 49718459, "answer_count": 1, "score": -1, "last_activity_date": 1523311954, "creation_date": 1523194121, "last_edit_date": 1523311954, "question_id": 49718356, "link": "https://stackoverflow.com/questions/49718356/reading-argv-array-input-as-a-string-followed-by-a-file-list", "title": "Reading @ARGV array input as a string followed by a file list", "body": "<p>I am reading .fasta format files from <code>@ARGV</code> input with <code>&lt;&gt;</code> construction. The problem is, that first array element has to be just string value, and all others are .fasta files. How should I use first array element as a string and ignore it/jump to the second element at the same time using <code>&lt;&gt;</code> construction without any errors(<code>&lt;&gt;</code> is necessary to use in my excercise).</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 9495076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0e20d815c07a771cbc3aab0e3328d?s=128&d=identicon&r=PG&f=1", "display_name": "F. Grela", "link": "https://stackoverflow.com/users/9495076/f-grela"}, "edited": false, "score": 0, "creation_date": 1523198141, "post_id": 49718580, "comment_id": 86450838, "body": "WOW! Its really fast and really smart! Im hobbyst, not professional coder. Im still learning. Can You recommend some sources about algorithms simillar to Your solution?"}, {"owner": {"reputation": 61, "user_id": 9495076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0e20d815c07a771cbc3aab0e3328d?s=128&d=identicon&r=PG&f=1", "display_name": "F. Grela", "link": "https://stackoverflow.com/users/9495076/f-grela"}, "edited": false, "score": 0, "creation_date": 1523199039, "post_id": 49718580, "comment_id": 86451108, "body": "Its working good but I dont understand why script print period date only one time. $row[0] != $expected is &quot;true&quot; more than one time... Can You explain how it work? How it get end date of period?"}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "reply_to_user": {"reputation": 61, "user_id": 9495076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0e20d815c07a771cbc3aab0e3328d?s=128&d=identicon&r=PG&f=1", "display_name": "F. Grela", "link": "https://stackoverflow.com/users/9495076/f-grela"}, "edited": false, "score": 0, "creation_date": 1523202630, "post_id": 49718580, "comment_id": 86452343, "body": "I can see only one gap in your data: from <code>1523186280</code> to <code>1523186640</code>. Why do you think the condition is true more than once? Is there something else that I am not seeing?"}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "reply_to_user": {"reputation": 61, "user_id": 9495076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0e20d815c07a771cbc3aab0e3328d?s=128&d=identicon&r=PG&f=1", "display_name": "F. Grela", "link": "https://stackoverflow.com/users/9495076/f-grela"}, "edited": false, "score": 0, "creation_date": 1523203254, "post_id": 49718580, "comment_id": 86452565, "body": "@F.Grela Sorry, I can&#39;t recommend any specific book or resource. The idea is much too simple so I doubt it would be addressed specifically by a book. Just find some introductory book on algorithms with examples (there are lots of questions about that in the internet). Read through problems and solutions and think how you could have approached them. That should teach you quickly to spot non-optimal code.   Perhaps if examples were in C that would be better because with C one have to be smart about data structures and everything else (not like Perl where a developer can be too relaxed)."}, {"owner": {"reputation": 61, "user_id": 9495076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0e20d815c07a771cbc3aab0e3328d?s=128&d=identicon&r=PG&f=1", "display_name": "F. Grela", "link": "https://stackoverflow.com/users/9495076/f-grela"}, "edited": false, "score": 0, "creation_date": 1523208530, "post_id": 49718580, "comment_id": 86454397, "body": "But its true every one minute in this period. I dont understand how script print only start and end period..."}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "reply_to_user": {"reputation": 61, "user_id": 9495076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0e20d815c07a771cbc3aab0e3328d?s=128&d=identicon&r=PG&f=1", "display_name": "F. Grela", "link": "https://stackoverflow.com/users/9495076/f-grela"}, "edited": false, "score": 1, "creation_date": 1523208849, "post_id": 49718580, "comment_id": 86454515, "body": "@F.Grela because the data in the database does not have records for every minute in a gap, it only has the start and the end records for a gap. See?"}], "tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": true, "score": 0, "last_activity_date": 1523195552, "creation_date": 1523195552, "answer_id": 49718580, "question_id": 49717944, "link": "https://stackoverflow.com/questions/49717944/find-missed-period-in-sql-database-records-by-perl-script/49718580#49718580", "title": "Find missed period in SQL database records by perl script", "body": "<p>You have obviously tried to decompose the problem into subtasks but that have gone awry because you apparently didn't encounter an example of a gap checking algorithm before.<br>\nConsider reading some book on algorithms, not necessarily in Perl, it will really help.</p>\n\n<p>In the end you've got  a lot of unnecessary code and excess database calls so no wonder it is slow as hell.</p>\n\n<p>A much shorter code doing the same:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse DBI;\nuse Data::Dumper;\nuse POSIX qw(strftime);\n\n#ZAKRES\nmy $dbtable = \"USD_BCH\";\nmy $dbh = DBI-&gt;connect(          \n\"dbi:SQLite:dbname=gekko/gdax-usd/history/gdax_0.1.db\", \n\"\",                          \n\"\",                          \n{ RaiseError =&gt; 1 },         \n) or die $DBI::errstr;\n\n\nmy $stmt = qq(SELECT start FROM candles_$dbtable ORDER BY start ASC;);\nmy $sth = $dbh-&gt;prepare( $stmt );\nmy $rv = $sth-&gt;execute() or die $DBI::errstr;\nmy $fmt='%Y-%m-%d %H:%M:%S';\nmy $expected;\nwhile (my @row=$sth-&gt;fetchrow_array())  {\n  if (defined $expected &amp;&amp; $row[0] != $expected) {\n    printf \"%s - %s\\n\", strftime($fmt, localtime $expected), strftime($fmt, localtime ($row[0]-60))\n  }\n  $expected=$row[0]+60\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 0, "last_activity_date": 1523197444, "creation_date": 1523197444, "answer_id": 49718894, "question_id": 49717944, "link": "https://stackoverflow.com/questions/49717944/find-missed-period-in-sql-database-records-by-perl-script/49718894#49718894", "title": "Find missed period in SQL database records by perl script", "body": "<p>I believe the speed problem is coming from the fact that you're fetching one record per loop iteration, when you could be fetching everything in one SQL statement. Also, I'm not entirely sure how correct your code is:</p>\n\n<ul>\n<li><p>I get a usage error from <code>POSIX::strftime</code> because you're passing it a UNIX timestamp, I have to send that through <code>localtime</code> first for it to work.</p></li>\n<li><p>When you print your gaps, you're printing <code>$empty[0]</code> as the start time, but you never empty the <code>@empty</code> array, so if there are multiple gaps in the data you always print the same start time for every gap.</p></li>\n</ul>\n\n<p>I was about to post an example solution, but @wolfrevokcats beat me to it \u263a So let me just add that <a href=\"https://stackoverflow.com/a/49718580/9300627\">wolfrevokcats's solution</a> finds the same gap in your sample data as your code, and on larger data (9000 rows) <a href=\"https://gist.github.com/haukex/a18a3021f139ce5317dc987e2c821fcb\" rel=\"nofollow noreferrer\">it runs roughly x2000 faster</a> (at least on my machine).</p>\n"}], "owner": {"reputation": 61, "user_id": 9495076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0e20d815c07a771cbc3aab0e3328d?s=128&d=identicon&r=PG&f=1", "display_name": "F. Grela", "link": "https://stackoverflow.com/users/9495076/f-grela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 49718580, "answer_count": 2, "score": 0, "last_activity_date": 1523197444, "creation_date": 1523191432, "last_edit_date": 1523192151, "question_id": 49717944, "link": "https://stackoverflow.com/questions/49717944/find-missed-period-in-sql-database-records-by-perl-script", "title": "Find missed period in SQL database records by perl script", "body": "<p>I am writing a script that checks if the database is complete. In the database SHOULD be records saved every minutes but I have some periods missed. The script must check do records / minutes are exists in database and print missed period (first and last missed minutes) in human date. I wrote something like this:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse DBI;\nuse Data::Dumper;\nuse POSIX qw(strftime);\n\nmy $lock = 0;\nmy @empty;\n\n#ZAKRES\nmy $dbtable = \"USD_BCH\";\nmy $dbh = DBI-&gt;connect(          \n\"dbi:SQLite:dbname=gekko/gdax-usd/history/gdax_0.1.db\", \n\"\",                          \n\"\",                          \n{ RaiseError =&gt; 1 },         \n) or die $DBI::errstr;\nmy $stmt = qq(SELECT start FROM candles_$dbtable ORDER BY start ASC LIMIT 1;);\nmy $sth = $dbh-&gt;prepare( $stmt );\nmy $rv = $sth-&gt;execute() or die $DBI::errstr;\nif($rv &lt; 0) {\n  print $DBI::errstr;\n}\n\nmy $start_all = $sth-&gt;fetchrow_array();\n\n$stmt = qq(SELECT start FROM candles_$dbtable ORDER BY start DESC LIMIT 1;);\n$sth = $dbh-&gt;prepare( $stmt );\n$rv = $sth-&gt;execute() or die $DBI::errstr;\nif($rv &lt; 0) {\n  print $DBI::errstr;\n}\n\nmy $end_all = $sth-&gt;fetchrow_array();\n\nfor (my $i = $start_all; $i &lt; $end_all; $i += 60) {\n\n#######\n\n\n$stmt = qq(SELECT start FROM candles_$dbtable WHERE start LIKE $i ORDER BY start ASC LIMIT 1;);\n$sth = $dbh-&gt;prepare( $stmt );\n$rv = $sth-&gt;execute() or die $DBI::errstr;\nif($rv &lt; 0) {\n  print $DBI::errstr;\n}\nmy $row;\n$row = $sth-&gt;fetchrow_array();\n\nif ($row) {\n  if ($lock == 1) {\n    my $firstempty = strftime \"%Y-%m-%d %H:%M:%S\", $empty[0];\n    my $lastempty = strftime \"%Y-%m-%d %H:%M:%S\", pop @empty;\n    print \"$firstempty-$lastempty\\n\";\n    $lock = 0;\n  }\n#print \"Pe\u0142ne: $row\\n\";\n}\nelse {\n  $lock = 1;\n  push @empty, $i;\n#print \"Pueste: @empty\\n\";\n}\n\n}\nif ($lock == 1) {\n  my $firstempty = strftime \"%Y-%m-%d %H:%M:%S\", $empty[0];\n  my $lastempty = strftime \"%Y-%m-%d %H:%M:%S\", pop @empty;\n  print \"$firstempty-$lastempty\\n\";\n  $lock = 0;\n}\n</code></pre>\n\n<p>Its example database records: </p>\n\n<pre><code>1523182500\n1523182560\n1523182620\n1523182680\n1523182740\n1523182800\n1523182860\n1523182920\n1523182980\n1523183040\n1523183100\n1523183160\n1523183220\n1523183280\n1523183340\n1523183400\n1523183460\n1523183520\n1523183580\n1523183640\n1523183700\n1523183760\n1523183820\n1523183880\n1523183940\n1523184000\n1523184060\n1523184120\n1523184180\n1523184240\n1523184300\n1523184360\n1523184420\n1523184480\n1523184540\n1523184600\n1523184660\n1523184720\n1523184780\n1523184840\n1523184900\n1523184960\n1523185020\n1523185080\n1523185140\n1523185200\n1523185260\n1523185320\n1523185380\n1523185440\n1523185500\n1523185560\n1523185620\n1523185680\n1523185740\n1523185800\n1523185860\n1523185920\n1523185980\n1523186040\n1523186100\n1523186160\n1523186220\n1523186280\n1523186640\n1523186700\n1523186760\n1523186820\n1523186880\n1523186940\n1523187000\n1523187060\n1523187120\n1523187180\n1523187240\n1523187300\n1523187360\n1523187420\n1523187480\n1523187540\n1523187600\n1523187660\n1523187720\n1523187780\n1523187840\n1523187900\n1523187960\n1523188020\n1523188080\n1523188140\n</code></pre>\n\n<p>The problem is that the tables in my database are very large (up to 100 MB). The above script is not very efficient, it takes up to 1 hour to check! What solution do you recommend that data validation takes less time?</p>\n"}, {"tags": ["perl", "hash", "initialization"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1523182261, "post_id": 49716417, "comment_id": 86446493, "body": "You could write my <code>%hash2 = CFG::hash1</code> (provided you did not use the strict pragma), but that would set <code>%hash2 = (CFG::hash1, undef)</code> where <code>CFG::hash1</code> is interpreted as a bareword and becomes a key in <code>%hash2</code>. If you want to copy the hash <code>%CFG::hash1</code> into <code>%hash2</code> you should do as you currently do in <code>bar()</code>: <code>my %hash2 = %CFG::hash1</code>"}, {"owner": {"reputation": 1799, "user_id": 3618854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e8563fab07e0c27d82e18d8ba9aa8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yakov Dan", "link": "https://stackoverflow.com/users/3618854/yakov-dan"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1523182831, "post_id": 49716417, "comment_id": 86446639, "body": "Thanks. At the end of your comment, didn&#39;t you mean to write &quot;my %hash2 = %{CFG::hash1}; &quot;(with the curly brackets) ?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1523183088, "post_id": 49716417, "comment_id": 86446693, "body": "I think there is no difference between writing <code>%CFG::hash1</code> and <code>%{CFG::hash1}</code> here. However if you had a <code>sub</code> <code>CFG::hash1()</code>  defined, for example <code>sub CFG::hash1 { return &quot;a&quot; }</code>, the assignment <code>%hash2 = CFG::hash1</code> would set <code>%hash2 = ( a =&gt; undef )</code>"}], "answers": [{"comments": [{"owner": {"reputation": 74715, "user_id": 471272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jSlyx.gif?s=128&g=1", "display_name": "tchrist", "link": "https://stackoverflow.com/users/471272/tchrist"}, "edited": false, "score": 5, "creation_date": 1523194422, "post_id": 49717315, "comment_id": 86449609, "body": "Although our new perl learner has probably not yet arrived at the point when he needs to know this, it may be worth mentioning copying one hash to another is technically a \u201cshallow\u201d copy insofar as the copying of values holding references. Therefore after <code>%h2 = %h1</code> both hose two hashes will now have the same keys and values, including if applicable shared references if any of the scalar values in <code>%h1</code> were actually (\u201chard\u201d) references instead of mere strings and/or numbers."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 4, "last_activity_date": 1523187108, "last_edit_date": 1523187108, "creation_date": 1523186683, "answer_id": 49717315, "question_id": 49716417, "link": "https://stackoverflow.com/questions/49716417/perl-hash-initialization-syntax/49717315#49717315", "title": "perl hash initialization syntax", "body": "<p>There are a couple of things going on here. First, from <a href=\"https://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\"><code>perldata</code></a>:</p>\n\n<blockquote>\n  <p>A word that has no other interpretation in the grammar will be treated\n  as if it were a quoted string. These are known as \"barewords\". As with \n  filehandles and labels, a bareword that consists entirely of lowercase\n  letters risks conflict with future reserved words [...]</p>\n  \n  <p>Some people may wish to outlaw barewords entirely. If you say</p>\n\n<pre><code>use strict 'subs';  \n</code></pre>\n  \n  <p>then any bareword that would NOT be interpreted as a subroutine call \n  produces a compile-time error instead.</p>\n</blockquote>\n\n<p>Also, if you enable the <a href=\"https://perldoc.perl.org/warnings.html\" rel=\"nofollow noreferrer\"><code>warnings</code></a> pragma, you will get a warning if you try to initialize a hash with an odd number of elements. From <a href=\"https://perldoc.perl.org/perldiag.html\" rel=\"nofollow noreferrer\"><code>perldiag</code></a>:</p>\n\n<blockquote>\n  <p><strong>Odd number of elements in hash assignment</strong><br>\n  (W misc) You specified an\n  odd number of elements to initialize a hash, which is odd, because\n  hashes come in key/value pairs.</p>\n</blockquote>\n\n<p>Finally, from <a href=\"https://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\"><code>perlref</code></a>:</p>\n\n<blockquote>\n  <p><strong>Not-so-symbolic references</strong><br>\n  Brackets around a symbolic reference can\n  simply serve to isolate an identifier or variable name from the rest\n  of an expression, just as they always have within a string. For\n  example,  </p>\n\n<pre><code>$push = \"pop on \";  \nprint \"${push}over\";\n</code></pre>\n  \n  <p>has always meant to print \"pop on over\", even though push\n  is a reserved word. \n  This is generalized to work the same without the enclosing double \n  quotes, so that</p>\n\n<pre><code>print ${push} . \"over\";  \n</code></pre>\n  \n  <p>will have the same effect. This construct is not considered to be a \n  symbolic reference when you're using strict refs:</p>\n</blockquote>\n\n<p>So when you write:</p>\n\n<pre><code>my %hash2 = CFG::hash1;\n</code></pre>\n\n<p>you are first trying to initialize a hash with an odd number of elements, and if you had <code>warnings</code> enabled you would get a warning about that. Second, since there are no <code>sub</code> with name <code>CFG::hash1</code>, the latter is an undefined bareword, and if you had used the <code>strict</code> pragma you would have got a compile time error</p>\n\n<pre><code>Bareword \"CFG::hash1\" not allowed while \"strict subs\" in use\n</code></pre>\n\n<p>Finally, declaring <code>%hash2</code> as <code>%CFG::hash1</code> or <code>%{CFG::hash1}</code> is equivalent. (But note that using the <code>%{ ... }</code> you could also write for example <code>%{ CFG::hash1() }</code> then we would try to call a <code>sub</code> with name <code>CFG::hash1()</code> and use its return value as the hash key instead.)</p>\n\n<p><strong>Conclusion</strong>: </p>\n\n<p>The syntax <code>my %h1 = %h2</code> (or <code>my %h1 = %{h2}</code>) copies a hash <code>%h2</code> to <code>%h1</code>. The other syntax in your question: <code>my %h1 = h2</code> creates a new hash (with a single key with undefined value as explained above).</p>\n"}], "owner": {"reputation": 1799, "user_id": 3618854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e8563fab07e0c27d82e18d8ba9aa8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yakov Dan", "link": "https://stackoverflow.com/users/3618854/yakov-dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 0, "accepted_answer_id": 49717315, "answer_count": 1, "score": 2, "last_activity_date": 1523187108, "creation_date": 1523179738, "question_id": 49716417, "link": "https://stackoverflow.com/questions/49716417/perl-hash-initialization-syntax", "title": "perl hash initialization syntax", "body": "<p>I'm reading a perl script and there's a line I don't fully understand. </p>\n\n<p>The code looks like this:</p>\n\n<pre><code>sub foo {\n    package CFG;\n    %hash1 = ...;\n}\n\nsub bar {\n   my %hash2 = %{CFG::hash1};\n}\n</code></pre>\n\n<p>here's my issue: why %hash2 is initialized as %{CFG::hash1} and not just my %hash2 = CFG::hash1. What's the difference between the two? </p>\n"}, {"tags": ["multithreading", "perl", "web-services", "parallel-processing", "mojolicious"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1523176854, "post_id": 49715474, "comment_id": 86445052, "body": "<a href=\"https://metacpan.org/pod/Mojo::IOLoop::ReadWriteFork\" rel=\"nofollow noreferrer\">metacpan.org/pod/Mojo::IOLoop::ReadWriteFork</a>"}], "answers": [{"comments": [{"owner": {"reputation": 510, "user_id": 2035207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/23407540c4b23ef4f9b4ef62677576ae?s=128&d=identicon&r=PG", "display_name": "h q", "link": "https://stackoverflow.com/users/2035207/h-q"}, "edited": false, "score": 0, "creation_date": 1523187836, "post_id": 49717407, "comment_id": 86447882, "body": "Thank you. I need to study your code further. I certainly do not have a <code>sleep</code> in my code. I was just trying to illustrate that (it takes time). I need to attempt your example code without <code>Mojo::IOLoop-&gt;timer</code>. I&#39;ll look into <code>Mojo::IOLoop-&gt;subprocess(...)</code> as well."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1523207389, "post_id": 49717407, "comment_id": 86454016, "body": "It would be useful to describe how to wait for a subprocess, to coordinate when to apply the power call."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1523209812, "post_id": 49717407, "comment_id": 86454846, "body": "@DavidO I updated with a subprocess example. You can keep using promises to run the code in the proper sequence."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1523251927, "post_id": 49717407, "comment_id": 86465933, "body": "@amon : Thanks for that. Given your example I took the additional step of divorcing the business logic code from the controller, so that the slow subs can live without modification, while still leveraging Mojo::IOLoop::subprocess and ::promise. See <a href=\"https://gist.github.com/daoswald/17c1c37de52c700d794dc867cae9ca49\" rel=\"nofollow noreferrer\">gist.github.com/daoswald/17c1c37de52c700d794dc867cae9ca49</a>"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1523264803, "post_id": 49717407, "comment_id": 86472076, "body": "@DavidO Where possible, it&#39;s better to go fully async instead of trying to parallelize synchronous operations. E.g. forking a subprocess is comparatively expensive and requires you to serialize the return values. Some resources (often, database connections) cannot be reused in the subprocess. In your case, you are accidentally still calling the <code>power()</code> function synchronously which blocks all requests! So I think your approach is viable as a migration strategy to fully async code, but it doesn&#39;t quite get the full benefits yet."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1523281835, "post_id": 49717407, "comment_id": 86483026, "body": "Totally agree that purpose built asynchronous calls will be more ideal in several regards, and it was intentional to call power synchronously in my example. I just wanted to see what it would look like if we have to assume the OP&#39;s methods are untouchable. Thanks for your answer, it was insightful."}, {"owner": {"reputation": 510, "user_id": 2035207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/23407540c4b23ef4f9b4ef62677576ae?s=128&d=identicon&r=PG", "display_name": "h q", "link": "https://stackoverflow.com/users/2035207/h-q"}, "edited": false, "score": 0, "creation_date": 1524211969, "post_id": 49717407, "comment_id": 86889622, "body": "Thank you @amon for your insightful solution. Thanks DavidO for your example."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 7, "last_activity_date": 1523209736, "last_edit_date": 1523209736, "creation_date": 1523187445, "answer_id": 49717407, "question_id": 49715474, "link": "https://stackoverflow.com/questions/49715474/fetching-data-simultaneously-in-mojolicious/49717407#49717407", "title": "Fetching data simultaneously in Mojolicious", "body": "<p>To avoid long waiting times, you can use the Mojolicious non-blocking operations. Instead of running a synchronous request to an external system, use non-blocking methods that instead run some callback upon completion. E.g. to avoid a <code>sleep</code>, we would use <code>Mojo::IOLoop-&gt;timer(...)</code>.</p>\n\n<p>Here is a variant of your code that uses non-blocking operations, and uses Promises to properly sequence the functions:</p>\n\n<pre><code>use Mojolicious::Lite;\nuse Benchmark qw(:hireswallclock);\n\n# example using non-blocking APIs\nsub add1 {\n    my ($a) = @_;\n    my $promise = Mojo::Promise-&gt;new;\n    Mojo::IOLoop-&gt;timer(1 =&gt; sub { $promise-&gt;resolve($a + 1) });\n    return $promise;\n}\n\n# example using blocking APIs in a subprocess\nsub mult2 {\n    my ($b) = @_;\n    my $promise = Mojo::Promise-&gt;new;\n    Mojo::IOLoop-&gt;subprocess(\n        sub {  # first callback is executed in subprocess\n            sleep 1;\n            return $b * 2;\n        },\n        sub {  # second callback resolves promise with subprocess result\n            my ($self, $err, @result) = @_;\n            return $promise-&gt;reject($err) if $err;\n            $promise-&gt;resolve(@result);\n        },\n    );\n    return $promise;\n}\n\nsub power {\n    my ($x, $y) = @_;\n    my $result = Mojo::Promise-&gt;new;\n    Mojo::IOLoop-&gt;timer(1 =&gt; sub { $result-&gt;resolve($x ** $y) });\n    return $result;\n}\n\nany '/' =&gt; sub {\n    my ( $self ) = @_;\n\n    my $n = int(rand(5));\n\n    my $t0 = Benchmark-&gt;new;\n    my $x_promise = mult2($n);\n    my $y_promise = add1($n);\n    my $z_promise = Mojo::Promise-&gt;all($x_promise, $y_promise)\n        -&gt;then(sub {\n            my ($x, $y) = map { $_-&gt;[0] } @_;\n            return power($x, $y);\n        });\n    Mojo::Promise-&gt;all($x_promise, $y_promise, $z_promise)\n        -&gt;then(sub {\n            my ($x, $y, $z) = map { $_-&gt;[0] } @_;\n            my $t1 = Benchmark-&gt;new;\n            my $t = timediff($t1, $t0)-&gt;real();\n\n            $self-&gt;render(text =&gt; \"n=$n, x=$x, y=$y, z=$z;\\nT=$t seconds\\n\");\n        })\n        -&gt;wait;\n};\n\napp-&gt;start;\n</code></pre>\n\n<p>This is a lot more complex than your code, but completes within two seconds instead of three seconds, and does not block other requests that happen at the same time. So you could request this route thirty times at once, and get thirty responses two seconds later!</p>\n\n<p>Note that <code>Promise-&gt;all</code> returns a promise with the values of all awaited promises, but puts the values of each promise into an array ref so we need to unpack those to get the actual values.</p>\n\n<p>If you cannot use non-blocking operations, you can run the blocking code in a subprocess, using <code>Mojo::IOLoop-&gt;subprocess(...)</code>. You can still coordinate the data flow through promises. E.g. see the above <code>mult2</code> function for an example.</p>\n"}, {"comments": [{"owner": {"reputation": 510, "user_id": 2035207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/23407540c4b23ef4f9b4ef62677576ae?s=128&d=identicon&r=PG", "display_name": "h q", "link": "https://stackoverflow.com/users/2035207/h-q"}, "edited": false, "score": 0, "creation_date": 1524209562, "post_id": 49742602, "comment_id": 86888215, "body": "Thank you so much. I agree with you, I won&#39;t be running mathematical operation, but fetch data from external systems. Would you be so kind to provide a working example?"}], "tags": [], "owner": {"reputation": 33, "user_id": 1753899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0498049861c4d03edd4bff809691a09?s=128&d=identicon&r=PG", "display_name": "Patrick Michael Mooney", "link": "https://stackoverflow.com/users/1753899/patrick-michael-mooney"}, "is_accepted": false, "score": 1, "last_activity_date": 1523312862, "creation_date": 1523312862, "answer_id": 49742602, "question_id": 49715474, "link": "https://stackoverflow.com/questions/49715474/fetching-data-simultaneously-in-mojolicious/49742602#49742602", "title": "Fetching data simultaneously in Mojolicious", "body": "<p><strong>Concurrent vs Parallel</strong></p>\n\n<p>In order for two events to occur simultaneously ( in parallel ) you require multiple processing units.</p>\n\n<p>For instance, with a single CPU you are only able to carry out a single mathematical operation at any single time so they will have to run in series regardless of the <strong>concurrent</strong> themes in your code.</p>\n\n<p>Non-mathematical operations such as input/output ( e.g. network, HDD ) can occur in <strong>parallel</strong> fashion as these are, in most part, independent of your single CPU (I'll leave multi-core systems out of the explanation as generally speaking Perl is not optimised for their use).</p>\n\n<p>Hypnotoad, Mojolicious' production web-server, relies on proper implementation of non-blocking IO. As such they have provided a non-blocking user-agent as part of your controller.</p>\n\n<pre><code>$controller-&gt;ua-&gt;get(\n    $the_url,\n    sub {\n        my ( $ua, $tx ) = @_;\n        if ( my $result = $tx-&gt;success ) {\n            # do stuff with the result\n        }\n        else {\n            # throw error\n        }\n    }\n);\n</code></pre>\n\n<p>You can implement Mojo::Promise here to improve the flow your code.</p>\n\n<p>If possible, I would recommend implementing a non-blocking UA when fetching data from \"external systems\". If you find that your Hypnotoad worker processes are blocking for too long ( 5 seconds ) they are likely to be killed off and replaced which may disrupt your system.</p>\n"}], "owner": {"reputation": 510, "user_id": 2035207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/23407540c4b23ef4f9b4ef62677576ae?s=128&d=identicon&r=PG", "display_name": "h q", "link": "https://stackoverflow.com/users/2035207/h-q"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 543, "favorite_count": 3, "accepted_answer_id": 49717407, "answer_count": 2, "score": 2, "last_activity_date": 1523312862, "creation_date": 1523172176, "question_id": 49715474, "link": "https://stackoverflow.com/questions/49715474/fetching-data-simultaneously-in-mojolicious", "title": "Fetching data simultaneously in Mojolicious", "body": "<p>I'm trying to run multiple subroutines in Parallel (to fetch data from external systems). To simulate, I use <code>sleep</code> in my example below. My question is: how can I achieve this in Mojolicious?</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse Mojolicious::Lite;\nuse Benchmark qw(:hireswallclock);\n\nsub  add1 { my $a = shift; sleep 1; return $a+1; }\nsub mult2 { my $b = shift; sleep 1; return $b*2; }\nsub power { my ($x, $y) = @_; sleep 1; return $x ** $y; }\n\nany '/' =&gt; sub {    \n    my ( $self ) = @_;\n\n    my $n = int(rand(5));\n\n    my $t0 = Benchmark-&gt;new;\n    my $x = mult2($n); # Need to run in parallel\n    my $y =  add1($n); # Need to run in parallel\n    my $z = power($x,$y);\n    my $t1 = Benchmark-&gt;new;\n    my $t = timediff($t1,$t0)-&gt;real();\n\n    $self-&gt;render(text =&gt; \"n=$n, x=$x, y=$y, z=$z;&lt;br&gt;T=$t seconds\");\n};\n\napp-&gt;start;\n</code></pre>\n\n<p>In other words, I'd like to reduce the time it takes to run down to 2 seconds (instead of 3) by running (<code>add1</code> &amp; <code>mult2</code>) in parallel.</p>\n\n<p>This <a href=\"https://stackoverflow.com/questions/16558940/parallel-requests-in-mojolicious-application\">thread</a> uses a <code>Mojo::IOLoop-&gt;timer</code> which doesn't seem relevant in my case? If so, I don't know how to use it. Thanks!</p>\n"}, {"tags": ["perl", "telnet", "gtk2"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1523106526, "post_id": 49706201, "comment_id": 86428693, "body": "Have you tried with other hosts?"}, {"owner": {"reputation": 165, "user_id": 6920800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8aad840893bf8dddaa9bae758c57b78?s=128&d=identicon&r=PG&f=1", "display_name": "lesrol", "link": "https://stackoverflow.com/users/6920800/lesrol"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1523111085, "post_id": 49706201, "comment_id": 86430069, "body": "Yes, I&#39;ve tried at least a dozen hosts, and I&#39;ve also tried those hosts with other telnet clients, to make sure the hosts are operational."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1523170572, "post_id": 49706201, "comment_id": 86443586, "body": "I replaced the method <code>put(...)</code> with <code>cmd(String =&gt; $cmd);</code> and had a conversation, created user name and password, etc.  But with a big bad &quot;glitch&quot;: every command I sent timed out first, and only then did I see the response. All that was shown in the window. I don&#39;t know why it times out -- perhaps you should be waiting for some particular sequence in their return? (This can then be a reason why <code>put</code> fails?)"}], "answers": [{"tags": [], "owner": {"reputation": 165, "user_id": 6920800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8aad840893bf8dddaa9bae758c57b78?s=128&d=identicon&r=PG&f=1", "display_name": "lesrol", "link": "https://stackoverflow.com/users/6920800/lesrol"}, "is_accepted": false, "score": 1, "last_activity_date": 1523262479, "creation_date": 1523262479, "answer_id": 49728555, "question_id": 49706201, "link": "https://stackoverflow.com/questions/49706201/minimal-perl-gtk2-telnet-client/49728555#49728555", "title": "Minimal Perl/Gtk2 telnet client", "body": "<p>Following the suggestions above, there are at least three working solutions to replace the faulty:</p>\n\n<pre><code>    $telnetObj-&gt;put(\n        String =&gt; $cmd,\n        Telnetmode =&gt; 0,        \n    );\n</code></pre>\n\n<p>And they are:</p>\n\n<pre><code># This works:\n$telnetObj-&gt;put(\n    String =&gt; $cmd . \"\\n\",\n    Telnetmode =&gt; 1,        \n);\n\n# This also works:\n$telnetObj-&gt;cmd(\n    String =&gt; $cmd,\n    Timeout =&gt; 0,\n);\n\n# This also works:\n$telnetObj-&gt;print($cmd);\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 6920800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8aad840893bf8dddaa9bae758c57b78?s=128&d=identicon&r=PG&f=1", "display_name": "lesrol", "link": "https://stackoverflow.com/users/6920800/lesrol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1523262479, "creation_date": 1523095591, "question_id": 49706201, "link": "https://stackoverflow.com/questions/49706201/minimal-perl-gtk2-telnet-client", "title": "Minimal Perl/Gtk2 telnet client", "body": "<p>This is a bare-bones telnet client, using Gtk2 and Perl's Net::Telnet.</p>\n\n<p>Incoming text is displayed, but typed commands can't be sent to the server. Either the server is not receiving typed commands or we aren't receiving the server's response. </p>\n\n<p>The code for handling typed commands is pretty simple:</p>\n\n<pre><code>$cmd = $entry-&gt;get_text();       # Gtk2::Entry\n\n$telnetObj-&gt;put(                 # Net::Telnet\n    String =&gt; $cmd,\n    Telnetmode =&gt; 0,        \n);\n</code></pre>\n\n<p>Nevertheless, this script is completely non-functional. Any ideas why?</p>\n\n<pre><code>#!/usr/bin/perl\n# Minimal telnet client\n\nuse strict;\nuse diagnostics;\nuse warnings;\n\nuse Glib qw(TRUE FALSE);\nuse Gtk2 '-init';\nuse Net::Telnet;\n\n# Connect to any old MUD\nmy $host = 'dead-souls.net';\nmy $port = 8000;\n# The Net::Telnet object\nmy $telnetObj;\n\n# Open a Gtk2 window, with a Gtk2::TextView to display incoming text, and a Gtk2::Entry for sending\n#   commands    \nmy $window = Gtk2::Window-&gt;new('toplevel');\n$window-&gt;set_title('Minimal telnet client');\n$window-&gt;set_position('center');\n$window-&gt;set_default_size(600, 400);\n$window-&gt;signal_connect('delete-event' =&gt; sub {\n\n    Gtk2-&gt;main_quit();\n    exit;\n});\n\nmy $vPaned = Gtk2::VPaned-&gt;new();\n$window-&gt;add($vPaned);\n$vPaned-&gt;set_position(350);\n\nmy $scrollWin = Gtk2::ScrolledWindow-&gt;new(undef, undef);\n$vPaned-&gt;add1($scrollWin);\n$scrollWin-&gt;set_policy('automatic', 'automatic');     \n$scrollWin-&gt;set_border_width(0);\n\nmy $textView = Gtk2::TextView-&gt;new;\n$scrollWin-&gt;add_with_viewport($textView);\n$textView-&gt;can_focus(FALSE);\n$textView-&gt;set_wrap_mode('word-char');\n$textView-&gt;set_justification('left');\nmy $buffer = $textView-&gt;get_buffer();\n\nmy $entry = Gtk2::Entry-&gt;new();\n$vPaned-&gt;add2($entry);\n$entry-&gt;signal_connect(activate =&gt; sub {\n\n    # When the user enters a command, empty the entry box and (if the connection is open), send the \n    #   command to the host, and display the command in the textview\n    my $cmd = $entry-&gt;get_text();\n    $entry-&gt;set_text('');\n\n    if ($telnetObj) {\n\n        $telnetObj-&gt;put(\n            String =&gt; $cmd,\n            Telnetmode =&gt; 0,        \n        );\n\n        my $iter = $buffer-&gt;get_end_iter();\n        $textView-&gt;get_buffer-&gt;insert_with_tags_by_name($iter, $cmd . \"\\n\");\n        Gtk2-&gt;main_iteration() while Gtk2-&gt;events_pending();\n    }\n});  \n\n$window-&gt;show_all();   \n\n# Set up a main loop\nmy $id = Glib::Timeout-&gt;add(100, sub{ &amp;mainLoop($telnetObj, $textView, $buffer) });\nif (! $id) {\n\n    exit;\n}\n\n# Open the connection\n$telnetObj = Net::Telnet-&gt;new(\n    Timeout =&gt; 15,\n);\n\n$telnetObj-&gt;open(\n    Host        =&gt; $host,\n    Port        =&gt; $port,\n    Errmode     =&gt; sub { &amp;disconnected(); },\n);\n\n# Start Gtk2's main loop\nGtk2-&gt;main();\n\n# ##################################################################################################\n\nsub mainLoop {\n\n    my ($telnetObj, $textView, $buffer) = @_;\n\n    my $text = $telnetObj-&gt;get(\n        Errmode =&gt; sub { },\n        Timeout =&gt; 0,\n    );\n\n    if ($text) {\n\n        # We've received some text from the host. Display it in the textview\n        my $iter = $buffer-&gt;get_end_iter();\n        $buffer-&gt;insert_with_tags_by_name($iter, $text);\n        Gtk2-&gt;main_iteration() while Gtk2-&gt;events_pending();\n    }\n\n    return 1;\n}\n\nsub disconnected {\n    print \"Disconnected\\.\\n\";\n    exit;\n}\n\nsub connectError {\n    print \"Connection error\\.\\n\";\n    exit;\n}\n</code></pre>\n"}, {"tags": ["perl", "runtime-error"], "answers": [{"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1523092883, "post_id": 49705810, "comment_id": 86424903, "body": "ah, <code>Indirect object call</code>. I missed that."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 4, "creation_date": 1523092974, "post_id": 49705810, "comment_id": 86424924, "body": "No, it&#39;s not an indirect object call in this case because <code>print</code> is not a method. It&#39;s simply an optional first parameter."}, {"owner": {"reputation": 74715, "user_id": 471272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jSlyx.gif?s=128&g=1", "display_name": "tchrist", "link": "https://stackoverflow.com/users/471272/tchrist"}, "edited": false, "score": 2, "creation_date": 1523195300, "post_id": 49705810, "comment_id": 86449903, "body": "@Borodin That&#39;s true enough but it&#39;s the very same underlying parsing rules that apply here which also allow for the invocant in the so-called &quot;indirect object&quot; method-dispatch syntax."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 10, "last_activity_date": 1523092837, "creation_date": 1523092837, "answer_id": 49705810, "question_id": 49705708, "link": "https://stackoverflow.com/questions/49705708/why-i-get-cant-use-an-undefined-value-as-a-symbol-reference-at-error/49705810#49705810", "title": "Why I get `Can&#39;t use an undefined value as a symbol reference at ...` error?", "body": "<p>The statement <code>print $i +0</code> is different because <code>$i</code> is potentially a valid file handle. But when perl tries to use it as one it fails because it is <code>undef</code></p>\n\n<p>The precise rules that perl uses to determine whether you are trying to use a file handle are arcane, but simply removing the space after <code>$i</code> thwarts this interpretation and prints the expression <code>$i+0</code> instead</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 595, "favorite_count": 1, "accepted_answer_id": 49705810, "answer_count": 1, "score": 1, "last_activity_date": 1523097401, "creation_date": 1523092026, "last_edit_date": 1523097401, "question_id": 49705708, "link": "https://stackoverflow.com/questions/49705708/why-i-get-cant-use-an-undefined-value-as-a-symbol-reference-at-error", "title": "Why I get `Can&#39;t use an undefined value as a symbol reference at ...` error?", "body": "<p>In my program I get error:</p>\n\n<pre><code>$ perl -e 'print $i +0'\nCan't use an undefined value as a symbol reference at -e line 1.\n</code></pre>\n\n<p>But next two works fine:</p>\n\n<pre><code>$ perl -e 'print $i'\n$ perl -e 'print 0 +$i'\n0\n</code></pre>\n\n<p><strong>What is wrong with first case?</strong></p>\n"}, {"tags": ["perl", "file"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1523062035, "post_id": 49702612, "comment_id": 86419144, "body": "What is a valid phone number? Just 10 digits and no separators? Based on the data you\u2019ve provided, it\u2019s impossible to know how much experience someone has\u2014we only have their ages!"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1523062213, "post_id": 49702612, "comment_id": 86419183, "body": "This code is severely broken and doesn\u2019t even compile."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1523062354, "post_id": 49702612, "comment_id": 86419204, "body": "\u201cPlease enlighten me with the correct syntax...\u201d No, that\u2019s <b>your</b> job. <a href=\"https://www.perl.org/learn.html\" rel=\"nofollow noreferrer\">perl.org/learn.html</a>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 4, "creation_date": 1523081537, "post_id": 49702612, "comment_id": 86422169, "body": "Add <code>use warnings; use strict;</code> to your code and then learn about how to read through a file correctly <a href=\"https://perldoc.perl.org/perlopentut.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlopentut.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 5, "last_activity_date": 1523085939, "creation_date": 1523085939, "answer_id": 49704995, "question_id": 49702612, "link": "https://stackoverflow.com/questions/49702612/how-to-implement-files/49704995#49704995", "title": "How to implement files?", "body": "<p>It appears that you are writing code by just guessing at syntax. And that's unlikely to work out well unless you get <strong>very</strong> lucky (and most of us just aren't that lucky).</p>\n\n<p>I suggest that you take a step back and find <a href=\"https://learn.perl.org/\" rel=\"noreferrer\">a good resource that can teach you the basics</a> of Perl syntax - as you're clearly having trouble with it currently.</p>\n\n<p>The first two errors in your existing code are caused by simple typos in the code. You open your file with this code:</p>\n\n<pre><code>open(f, &lt;Users);\n</code></pre>\n\n<p>But the file name and the open mode need to be in a quoted string.</p>\n\n<pre><code>open(f, '&lt;Users');\n</code></pre>\n\n<p>However, it's generally accepted as good practice to a) use a lexical variable as your file handle.</p>\n\n<pre><code>open(my $f, '&lt;Users');\n</code></pre>\n\n<p>b) Have the open mode and file name as separate arguments to <code>open()</code>.</p>\n\n<pre><code>open(my $f, '&lt;', 'Users');\n</code></pre>\n\n<p>And c) check the return value from <code>open()</code> and take appropriate action.</p>\n\n<pre><code>open(my $f, '&lt;', 'Users') or die \"Cannot open 'Users': $!\\n\";\n</code></pre>\n\n<p>Secondly, you try to read from your filehandle by just using its name.</p>\n\n<pre><code>... split /\\n/, f;\n</code></pre>\n\n<p>But you need to use the file input operator (<code>&lt; ... &gt;</code>) to read data from a filehandle.</p>\n\n<pre><code>... split /\\n/, &lt;f&gt;;\n</code></pre>\n\n<p>And if you use my advice and switch to using a lexical variable for a filehandle.</p>\n\n<pre><code>... split /\\n/, &lt;$f&gt;;\n</code></pre>\n\n<p>I highly recommend that you get into the habit of adding <code>use strict</code> and <code>use warnings</code> to all of your Perl code - and then understand and fix all of the problems they reveal.</p>\n"}], "owner": {"reputation": 61, "user_id": 9279464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0438010cdf63ebeb9bbe6f28338ca99?s=128&d=identicon&r=PG&f=1", "display_name": "Vijayachandran Chettiar", "link": "https://stackoverflow.com/users/9279464/vijayachandran-chettiar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1523085939, "creation_date": 1523060741, "last_edit_date": 1523081652, "question_id": 49702612, "link": "https://stackoverflow.com/questions/49702612/how-to-implement-files", "title": "How to implement files?", "body": "<p>Suppose I have some records in a file:</p>\n\n<pre><code>ID Name Age Salary Phone\n1  Ram  60  100   123456789000\n2  tam  30  200   7436674776\n3  sam  20  300   3734837837\n4  kim  30  400   2\n</code></pre>\n\n<p>How to display details of all people who have no valid phone number?</p>\n\n<p>This is what I have done: </p>\n\n<pre><code>open(f, &lt;Users);\nmy @col = map { (split)[4] } split /\\n/, f; # Phone numbers are stored in an array\n\nforeach my $i ( @col ) {\n\n    if ( grep -v /[[:digit:]]{10}/, @col ) {\n\n        print \"grep success\\n\";\n        print \"$i\";\n    }\n}\n</code></pre>\n\n<p>But I am getting many errors.</p>\n\n<p>I have other questions,  like how to I modify salary by 15% if the person has an experience > 20 years?</p>\n"}, {"tags": ["perl", "tree", "nodes"], "answers": [{"comments": [{"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1523127285, "post_id": 49702705, "comment_id": 86435261, "body": "Hi. I get different results for <code>The undirected graph has a cycle ...</code> for each run of your program. Can an undirected graph have cycles?"}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "reply_to_user": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1523129184, "post_id": 49702705, "comment_id": 86435822, "body": "I think <code>Graph</code> internally stores data in hashes without ordering, so <code>find_a_cycle</code> starts at a random node and reports the first found cycle, that&#39;s why results are different each time. An undirected graph can, of course, have a cycle:  [a,b], [b,c], [a,c]."}], "tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": false, "score": 4, "last_activity_date": 1523100717, "last_edit_date": 1523100717, "creation_date": 1523061693, "answer_id": 49702705, "question_id": 49702227, "link": "https://stackoverflow.com/questions/49702227/sorting-nodes-according-to-its-members/49702705#49702705", "title": "sorting nodes according to its members", "body": "<p>Since the main problem here is to check if the input data is consistent and does not have cycles, I recommend using some graph-theoretical module, for example <a href=\"http://search.cpan.org/~jhi/Graph-0.9704/\" rel=\"nofollow noreferrer\">Graph</a>.  </p>\n\n<p>If your data allows a child to have multiple parents you have to check if the <em>directed</em> graph produced from your data does not have a cycle.\nOtherwise, if your data should be a tree, you have to check that the <em>undirected</em> graph does not have a cycle.</p>\n\n<p>I sketched up a simple script, that implements these checks and outputs child/parent pairs, it is pretty self explanatory:  </p>\n\n<pre><code>use strict;use warnings;\n\nuse Graph;\nmy $g=Graph-&gt;new(directed=&gt;1);\nwhile(&lt;&gt;) {\n    chomp;\n    my @fields=split;\n    # this assumes that each line starts with a parent and goes down through its descendants\n    # adjust the logic to your needs\n    my $parent;\n    for my $child(@fields) {\n        $g-&gt;add_vertex($child);\n        if ($parent) {\n            $g-&gt;add_edge($child,$parent);\n        }\n        $parent=$child;\n    }\n}\n\n# check if we have a DAG\nmy @cycle = $g-&gt;find_a_cycle();\nif (@cycle) {\n    printf \"The directed graph has a cycle: %s\\n\", join ',', @cycle\n}\n\n# check if we have a tree\nmy $un_g = $g-&gt;undirected_copy();\n@cycle = $un_g-&gt;find_a_cycle();\nif (@cycle) {\n    printf \"The undirected graph has a cycle: %s\\n\", join ',', @cycle\n}\n\nprint \"child,parent\\n\";\nfor my $edge(sort { $a-&gt;[0] cmp $b-&gt;[0] } $g-&gt;edges) {\n    printf \"%s,%s\\n\", $edge-&gt;[0], $edge-&gt;[1];\n}\n</code></pre>\n\n<p>And the output for your data:</p>\n\n<pre><code>The undirected graph has a cycle: N179536,N171639,N208718\nchild,parent\nN115713,N96394\nN117904,N18574\nN140517,N171639\nN171639,N208718\nN171639,N18574\nN171639,N179536\nN171639,N210073\nN179536,N208718\nN18574,N80403\nN208718,N210073\nN210073,N226737\nN210073,N96585\nN210073,N3690\nN226737,N4647\nN4647,N80403\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6457508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d837024272db7c01f6ad581ce8d296?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Cooley", "link": "https://stackoverflow.com/users/6457508/michael-cooley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523100717, "creation_date": 1523057104, "last_edit_date": 1523061091, "question_id": 49702227, "link": "https://stackoverflow.com/questions/49702227/sorting-nodes-according-to-its-members", "title": "sorting nodes according to its members", "body": "<p>I don't know where to start. I have a long list of nodes comprised of descendant members, for which I want to make a linked tree, a plain text database in the form of child/parent. For example:</p>\n\n<p>N115713<br>\nN115713 N96394<br>\nN117904 N18574<br>\nN140517 N171639 N179536 N208718 N210073 N226737 N4647 N80403<br>\nN171639<br>\nN171639 N18574<br>\nN171639 N208718<br>\nN171639 N208718 N210073<br>\nN171639 N208718 N210073 N3690<br>\nN171639 N208718 N210073 N96585<br>\nN171639 N210073<br>\nN18574<br>\nN18574 N80403</p>\n\n<p>Obviously, \"N115713\" will go downstream of \"N115713 N96394\" but I seem unable to turn that recognition into an algorithm. There are several hundred nodes having up to several dozen members. Pointers to get started? I'm using perl.</p>\n\n<p>Thanks!</p>\n\n<p>UPDATE: Well, I have an idea but haven't been able to implement it yet. I'm searching each line in turn for the other lines it's a \"member\" of then selecting that result which has the next highest number of members as its parent.</p>\n"}, {"tags": ["perl", "moose"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 2, "creation_date": 1523037270, "post_id": 49697930, "comment_id": 86410135, "body": "I typically go the low-magic route and define a separate function that then in turns calls the Moose-provided &quot;has&quot; function. E.g. <code>sub has_private ($name, %args) { has $name =&gt; (init_arg =&gt; undef, builder =&gt; &quot;_set_$name&quot;, lazy =&gt; 1,%args) }</code>."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 4, "last_activity_date": 1523082503, "last_edit_date": 1523082503, "creation_date": 1523072808, "answer_id": 49703627, "question_id": 49697930, "link": "https://stackoverflow.com/questions/49697930/create-custom-moose-attribute-type/49703627#49703627", "title": "Create custom Moose attribute type", "body": "<p>According to <a href=\"https://metacpan.org/pod/Moose::Manual::Attributes#MULTIPLE-ATTRIBUTE-SHORTCUTS\" rel=\"nofollow noreferrer\"><code>Moose::Manual::Attribute</code></a>:</p>\n\n<blockquote>\n  <p>If you have a number of attributes that differ only by name, you can\n  declare them all at once:  </p>\n\n<pre><code>package Point;  \nuse Moose;\n\nhas [ 'x', 'y' ] =&gt; ( is =&gt; 'ro', isa =&gt; 'Int' );\n</code></pre>\n  \n  <p>Also, because <code>has</code> is just a function call, you can call it in a loop:</p>\n\n<pre><code>for my $name ( qw( x y ) ) {  \n    my $builder = '_build_' . $name;  \n    has $name =&gt; ( is =&gt; 'ro', isa =&gt; 'Int', builder =&gt; $builder );\n}\n</code></pre>\n</blockquote>\n\n<p>There is also a <code>lazy_build</code> attribute, see <a href=\"https://metacpan.org/pod/Moose::Meta::Attribute\" rel=\"nofollow noreferrer\"><code>Moose::Meta::Attribute</code></a>, but the documentaion says: <em>\"Note that use of this feature is strongly discouraged\"</em></p>\n\n<p>A last option is to use an extension package.\nI guess this already exists somewhere on CPAN already, but I could not find it, so here is my attempt to implement the <code>Moose</code> extension:</p>\n\n<pre><code>package MyMooseAttributeExtensions;\nuse strict;\nuse warnings;\n\nour %orig_has;  # save original 'has' sub routines here\n\nsub import {\n    my $callpkg = caller 0;\n    {\n        no strict 'refs';\n        no warnings 'redefine';\n        $orig_has{$callpkg} = *{$callpkg.\"::has\"}{CODE};\n        *{$callpkg.\"::has\"} = \\&amp;private_has;\n    }\n    return;\n}\n\nsub private_has {\n    my ($attr, %args) = @_;\n\n    my $callpkg = caller 0;\n    if (exists $args{private} ) {\n        delete $args{private};\n        %args = (\n            %args,\n            lazy     =&gt; 1,\n            init_arg =&gt; undef, # prevent from being set by constructor\n            builder  =&gt; \"_set_$attr\"\n        );\n    }\n    $orig_has{$callpkg}-&gt;($attr, %args);\n}\n\n1;\n</code></pre>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 1, "accepted_answer_id": 49703627, "answer_count": 1, "score": 1, "last_activity_date": 1523082503, "creation_date": 1523034801, "last_edit_date": 1523035152, "question_id": 49697930, "link": "https://stackoverflow.com/questions/49697930/create-custom-moose-attribute-type", "title": "Create custom Moose attribute type", "body": "<p>I am trying to simplify the definition of a class of attributes for my <code>Moose</code> classes. For example, consider a class of attributes that can be labeled as <code>private</code>, here is an example of one such attribute:</p>\n\n<pre><code>package MyPkg;\nuse Moose;\n\nhas some_attribute =&gt; (\n    is       =&gt; 'ro',\n    isa      =&gt; 'Str',\n    lazy     =&gt; 1,\n    init_arg =&gt; undef, # prevent from being set by constructor\n    builder  =&gt; \"_set_some_attribute\"\n);\n\nsub _set_some_attribute {\n    my ( $self ) = @_;\n\n    return \"value_of_some_attribute\";\n}\n\nsub some_method_that_uses_some_attribute {\n    my ( $self ) = @_;\n\n    return \"The value of some attribute: \" . $self-&gt;some_attribute;\n}\n\npackage main;\n\nuse feature qw(say);\nuse strict;\nuse warnings;\n\nmy $o = MyPkg-&gt;new();    \nsay $o-&gt;some_method_that_uses_some_attribute;\n</code></pre>\n\n<p>Imagine that the attribute <code>some_attribute</code> of the class <code>MyPkg</code> belongs to a group of attributes that can be labeled <code>private</code>, where all attributes with the type <code>private</code> is for example <code>lazy</code> and cannot be set by the constructor. That is, I would like to simplify:</p>\n\n<pre><code>package MyPkg;\nuse Moose;\nhas some_attribute =&gt; (\n    is       =&gt; 'ro',\n    isa      =&gt; 'Str',\n    lazy     =&gt; 1,\n    init_arg =&gt; undef, # prevent from being set by constructor\n    builder  =&gt; \"_set_some_attribute\"\n);\n</code></pre>\n\n<p>to something like this</p>\n\n<pre><code>package MyPkg;\nuse Moose;\nuse MyMooseAttributeExtensions; # &lt;-- some Moose extension that I have to write\nhas some_attribute =&gt; (is =&gt; 'ro', isa =&gt; 'Str', private =&gt; 1 );\n</code></pre>\n\n<p>Is this possible with <code>Moose</code>?</p>\n"}, {"tags": ["perl", "dbi", "dbm"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1523016012, "post_id": 49692328, "comment_id": 86396558, "body": "Does running query this on database throws error? or runs fine?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1523016142, "post_id": 49692328, "comment_id": 86396650, "body": "Does <code>temp_table</code> actually exist?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1523016270, "post_id": 49692328, "comment_id": 86396731, "body": "@AbhiNickz There is no real RDBMS involved. <a href=\"https://metacpan.org/pod/DBD::DBM#NAME\" rel=\"nofollow noreferrer\">DBD::DBM</a> is an SQL layer for DBM files."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1523020296, "post_id": 49692328, "comment_id": 86399600, "body": "Are you sure, you&#39;re using the right driver? Seems odd to specify a host for local file based driver"}], "answers": [{"comments": [{"owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 0, "creation_date": 1523068010, "post_id": 49693370, "comment_id": 86419945, "body": "how to connect to db using sid,host,port,uname and password , am a bit confused as i dont see the uasge of these in documentation too, and you are 100% correct that sid,host,port dont really ad any value as per ths code, but i need them to connect to DB , i usually use those values via sqldeveloper and never used them in perl .  and the tables i have specified in my code are very big tables in DB , though i am not sure if it has .pag and .dir files . please advice"}, {"owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 0, "creation_date": 1523068973, "post_id": 49693370, "comment_id": 86420091, "body": "well, my question is how to connect to the db with the uname,pwd   for accessing the table.in the above stmt we are creating a table and therefore can access it, what about the already available tables, i have around 100 different SID where i have to access, is this the right way . please suggest"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 0, "creation_date": 1523084573, "post_id": 49693370, "comment_id": 86422911, "body": "@LearningCpp: See the second update to my answer. I think you&#39;re on completely the wrong track here."}, {"owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 0, "creation_date": 1523084949, "post_id": 49693370, "comment_id": 86422999, "body": "Yeah I get it now , well I used this driver as oracle driver wasn\u2019t available on my box . Thought this does the same .  This seems to work only for file based DB ."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 0, "creation_date": 1523085220, "post_id": 49693370, "comment_id": 86423067, "body": "<i>I used this driver as oracle driver wasn\u2019t available on my box</i> &quot;I used a knife to eat this soup as a spoon wasn&#39;t available in my cutlery drawer.&quot; <i>Thought this does the same</i> Guessing at what things do isn&#39;t a good way to write code. Modules have documentation for a reason. <i>This seems to work only for file based DB</i> Yes. And a <b>specific type</b> of file-based database."}, {"owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 0, "creation_date": 1523107041, "post_id": 49693370, "comment_id": 86428861, "body": "It&#39;s very old technology and is rarely used these days. which ? The Relational DB or File based"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 0, "creation_date": 1523121429, "post_id": 49693370, "comment_id": 86433317, "body": "@LearningCpp: That sentence is at the end of a paragraph talking about DBM. So it&#39;s also talking about DBM. Which, as I&#39;ve tried to make clear, is <b>one specfic type</b> of file-based database."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 5, "last_activity_date": 1523099556, "last_edit_date": 1523099556, "creation_date": 1523019471, "answer_id": 49693370, "question_id": 49692328, "link": "https://stackoverflow.com/questions/49692328/error-while-using-dbi-drive-in-perl/49693370#49693370", "title": "Error while using DBI Drive in perl", "body": "<p>It appears that you get this error (and, I agree it's not a particularly useful error) if you try to connect to a DBM file that doesn't exist.</p>\n\n<p>In order for this code to work, you need to create a DBM file called <code>temp_table.pag</code> which contains the data that you want to use.</p>\n\n<p>As always, it is a good idea to read the documentation of the module that you are trying to use. The <a href=\"https://metacpan.org/pod/DBD::DBM\" rel=\"nofollow noreferrer\">DBD::DBM documentation</a> includes a sample program that I had to adapt lightly in order to get it working:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\nuse feature 'say';\n\nuse DBI;\n\nmy $dbh = DBI-&gt;connect('dbi:DBM:');\n$dbh-&gt;{RaiseError} = 1;\nfor my $sql( split /;\\n+/,\"\n    CREATE TABLE user ( user_name TEXT, phone TEXT );\n    INSERT INTO user VALUES ('Fred Bloggs','233-7777');\n    INSERT INTO user VALUES ('Sanjay Patel','777-3333');\n    INSERT INTO user VALUES ('Junk','xxx-xxxx');\n    DELETE FROM user WHERE user_name = 'Junk';\n    UPDATE user SET phone = '999-4444' WHERE user_name = 'Sanjay Patel';\n    SELECT * FROM user\n\"){\n    say $sql;\n    my $sth = $dbh-&gt;prepare($sql);\n    $sth-&gt;execute;\n    # It was the \"if\" clause that I had to change.\n    # Previously it was: if $sth-&gt;{NUM_OF_FIELDS}.\n    # I wonder if the behaviour of NUM_OF_FIELDS has changed.\n    $sth-&gt;dump_results if $sql =~ /\\bselect\\b/i;\n}\n$dbh-&gt;disconnect;\n</code></pre>\n\n<p>Having run this, I have files called <code>user.pag</code> and <code>user.dir</code>. I can then run a program that is very much like yours successfully.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\n\nuse DBI;\n\nmy $dbh = DBI-&gt;connect('dbi:DBM:');\nmy $sth = $dbh-&gt;prepare('SELECT user_name FROM user');\n$sth-&gt;execute;\nwhile (my $row = $sth-&gt;fetch) {\n  print \"$row-&gt;[0]\\n\";\n}\n$sth-&gt;execute();\n</code></pre>\n\n<p><strong>Update:</strong> I also meant to add that reading the documentation will tell you which options are valid for DBD::DBM. It looks to me like <code>sid</code> and <code>host</code> aren't doing anything useful here. Also, username and password are unlikely to be necessary for file-based DBDs.</p>\n\n<p><strong>Update 2:</strong> Are you using the right database driver here? DBD::DBM is for accessing DBM files that sit on your local system. A <a href=\"https://en.wikipedia.org/wiki/Dbm\" rel=\"nofollow noreferrer\">DBM file</a> is a really simple, single-table, file-based data file. It's not really a \"database\" as we would understand the term these days. It's very old technology and is rarely used these days.</p>\n\n<p>Your comments below make it look like you're trying to connect to a real relational database system. In that case, DBD::DBM is completely the wrong database driver to use. You need the database driver that matches the system that you are using. Your use of the term \"SID\" makes me think that you're using Oracle - so you would need <a href=\"https://metacpan.org/pod/DBD::Oracle\" rel=\"nofollow noreferrer\">DBD::Oracle</a>.</p>\n"}], "owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523099556, "creation_date": 1523015826, "last_edit_date": 1523068450, "question_id": 49692328, "link": "https://stackoverflow.com/questions/49692328/error-while-using-dbi-drive-in-perl", "title": "Error while using DBI Drive in perl", "body": "<p>below is the code </p>\n\n<pre><code> #!/usr/bin/perl\n use warnings;\n use strict;\n use DBI;\n my $dbh = DBI-&gt;connect('dbi:DBM:sid=upr18;host=abd-up3db1',\"user\", \"pass\");\n my $sth = $dbh-&gt;prepare(\"SELECT count(*) FROM temp_table\");\n $sth-&gt;execute();\n</code></pre>\n\n<p>While the connnect and prepare statements do notactually throw error and isee that the execute statement is erroring out.\nbelow is the error</p>\n\n<blockquote>\n  <p>DBD::DBM::st execute failed:  Cannot open ./temp_table.lck: No such file or directory at /usr/perl5/vendor_perl/5.8.4/i86pc-solaris-64int/DBD/File.pm line 574.\n   [for Statement \"SELECT count(*) FROM temp_table\"] at Test.pl line 8.</p>\n</blockquote>\n\n<p>Any suggestions where i went wrong.</p>\n"}, {"tags": ["xml", "perl", "post", "lwp"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523002429, "post_id": 49687228, "comment_id": 86387789, "body": "What would be the number of bytes in such a 100,000-line XML file? I can&#39;t imagine it being more than a couple of MB."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1523002519, "post_id": 49687228, "comment_id": 86387822, "body": "Why are you readying the xml line by line like that? Would it not be simpler to: <code>my $xml = do { local $&#47;; &lt;XMLFILE&gt;};</code> and read it all in one go?"}, {"owner": {"reputation": 573, "user_id": 4210950, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ae7dd9acf9746f6e7090ae2830af66a?s=128&d=identicon&r=PG&f=1", "display_name": "blackfury", "link": "https://stackoverflow.com/users/4210950/blackfury"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523005319, "post_id": 49687228, "comment_id": 86389592, "body": "@Borodin: its 10 - 50 MB"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1523005881, "post_id": 49687228, "comment_id": 86389935, "body": "Why have you named an <code>LWP::UserAgent</code> object <code>$curl</code>?"}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 2, "creation_date": 1523008279, "post_id": 49687228, "comment_id": 86391564, "body": "yeah, $ua instead of $curl would be a better choice I think."}], "answers": [{"tags": [], "owner": {"reputation": 1763, "user_id": 1016442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97080849fb073d925fee1b8c8b22d85?s=128&d=identicon&r=PG", "display_name": "nlu", "link": "https://stackoverflow.com/users/1016442/nlu"}, "is_accepted": false, "score": 2, "last_activity_date": 1523020481, "last_edit_date": 1523020481, "creation_date": 1523003646, "answer_id": 49688628, "question_id": 49687228, "link": "https://stackoverflow.com/questions/49687228/post-a-very-large-xml-to-url-using-lwp-perl/49688628#49688628", "title": "POST a very large xml to url using LWP Perl", "body": "<p>According to the man page of <a href=\"http://search.cpan.org/~oalders/libwww-perl-6.33/lib/LWP/UserAgent.pm#new\" rel=\"nofollow noreferrer\">LWP::UserAgent</a>, the parameter is called <code>timeout</code> and can be set via an <code>options</code> hash, so to set the timeout, say to 300, the line creating the user agent should read:\n<code>\nmy $curl = LWP::UserAgent-&gt;new( { timeout =&gt; 300 } );\n</code></p>\n"}, {"tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1523004543, "last_edit_date": 1523004543, "creation_date": 1523004238, "answer_id": 49688823, "question_id": 49687228, "link": "https://stackoverflow.com/questions/49687228/post-a-very-large-xml-to-url-using-lwp-perl/49688823#49688823", "title": "POST a very large xml to url using LWP Perl", "body": "<p>Those monks writes about timeout on <a href=\"http://www.perlmonks.org/bare/?node_id=896468\" rel=\"nofollow noreferrer\">http://www.perlmonks.org/bare/?node_id=896468</a></p>\n\n<p>Also I would check if the receiver can handle gzip-compressed data and if so use <code>gzip</code> to send only perhaps 5-10% the original number of bytes. The time savings could be similar.</p>\n\n<pre><code>open my $FH, \"gzip &lt; $_filename |\" or die;\nbinmode($FH);\n$_xml=do{local$/;&lt;$FH&gt;};\n...\nmy $response = $curl-&gt;post( $_url,\n                            'Content' =&gt; $_xml,\n                            'Content-Encoding'=&gt;'gzip',\n                            'Content-Type'=&gt;'text/xml' );\n</code></pre>\n\n<p>If the receiver can take <code>multipart/form-data</code> I would also check out:</p>\n\n<pre><code>system(qq(\n  gzip &lt; $_filename | curl -F\"file=@-;type=text/xml;filename=n.xml\" -H \"Content-Encoding: gzip\" $_url\n));\n</code></pre>\n\n<p>...with <code>file=</code> and <code>filename=</code> changed into what the receiver needs.</p>\n"}], "owner": {"reputation": 573, "user_id": 4210950, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ae7dd9acf9746f6e7090ae2830af66a?s=128&d=identicon&r=PG&f=1", "display_name": "blackfury", "link": "https://stackoverflow.com/users/4210950/blackfury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1523020481, "creation_date": 1522998377, "question_id": 49687228, "link": "https://stackoverflow.com/questions/49687228/post-a-very-large-xml-to-url-using-lwp-perl", "title": "POST a very large xml to url using LWP Perl", "body": "<p>I have a very large xml which i am trying to pass to a Spark on a particular port. Following is the code i am using to submit the xml using POST request.</p>\n\n<pre><code>my $_fileName = \"/home/temp/UTC+08_20180406_1414000_xyz\";\nopen (XMLFILE, $_fileName);\n    while (&lt;XMLFILE&gt;) {\n        $_xml.=$_;\n    }\n    close (XMLFILE);\n\nmy $_url=\"http://localhost:8100/request/UTC+08_20180406_1414000_xyz\";\nmy $curl = LWP::UserAgent-&gt;new();\nmy $response = $curl-&gt;post($_url, 'Content' =&gt; $_xml, 'Content-type'=&gt;'text/xml' );\nif ($response-&gt;is_success) \n{\n     print(\"new job created (requestId: $_requestId)\\n\");\n     return &amp;checkXMLStatus($response-&gt;decoded_content);\n}\nelse \n{\n     print(\"Job can't be processed: \".$response-&gt;status_line);\n     return (\"StatusRejected\", $response-&gt;status_line, 0);\n}\n</code></pre>\n\n<p>When the xml is small, then there is no issues. But when i submit a very large xml file say more than 100000 lines, then the request times out with the following error:</p>\n\n<p>\"500 read timeout\" exactly after 180 seconds.\nI checked CPAN page of LWP where there is a default timeout of 180.</p>\n\n<p>Is it possible to increase the timeout. And is there any limitation of not being able to send a very large xml file using POST request using LWP??</p>\n"}, {"tags": ["linux", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1522998414, "post_id": 49687147, "comment_id": 86385574, "body": "Welcome to Stack Overflow, please use CODE TAGS by using {} button for your samples in your post."}, {"owner": {"reputation": 105, "user_id": 7839296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUMy3.png?s=128&g=1", "display_name": "Amz", "link": "https://stackoverflow.com/users/7839296/amz"}, "edited": false, "score": 0, "creation_date": 1523006078, "post_id": 49687147, "comment_id": 86390055, "body": "cat test.txt | awk &#39;/S1:/{gsub(&quot;,&quot;,&quot;c1;&quot;,$0); print; next}{print $0}&#39; it will output S1:158c1;525 S6:17c1;322c1;534c1;536c1;546c1;598 S2:317c1;478c1;484c1;573 S7:313c1;513 S3:89c1;107c1;618c1;625c1;632 S8:305c1;327c1;336c1;408c1;592 S4:30c1;567c1;568c1;585c1;588 S5:333c1;617c1;619 S10:41c1;202c1;496c1;603"}, {"owner": {"reputation": 105, "user_id": 7839296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUMy3.png?s=128&g=1", "display_name": "Amz", "link": "https://stackoverflow.com/users/7839296/amz"}, "edited": false, "score": 0, "creation_date": 1523006260, "post_id": 49687147, "comment_id": 86390175, "body": "Please don&#39;t just simply minus point for this question, its disrespect. If I didn&#39;t respond for awhile then it means I&#39;m busy with my work."}, {"owner": {"reputation": 105, "user_id": 7839296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUMy3.png?s=128&g=1", "display_name": "Amz", "link": "https://stackoverflow.com/users/7839296/amz"}, "edited": false, "score": 0, "creation_date": 1523006353, "post_id": 49687147, "comment_id": 86390245, "body": "Very sorry for not replying. Anyway thanks for the help guys, I have found my own solution."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1523007159, "post_id": 49687147, "comment_id": 86390775, "body": "@Amz your awk solution is missing <code>c10</code> at the very end behind <code>603</code>, isn&#39;t it? (and c<i>n</i> at every last number)"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1523013660, "post_id": 49687147, "comment_id": 86395006, "body": "@Amz if you&#39;ve found a solution, please consider posting it as a reply ;)"}, {"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1523016621, "post_id": 49687147, "comment_id": 86397005, "body": "Sorry, this is not the way StackOverflow works. Questions of the form &quot;I want to do X, please give me tips and/or sample code&quot; are considered off-topic. Please visit the <a href=\"https://stackoverflow.com/help\">help center</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, and especially read <a href=\"http://meta.stackoverflow.com/q/284236\">Why is \u201cCan someone help me?\u201d not an actual question?</a>"}, {"owner": {"reputation": 105, "user_id": 7839296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUMy3.png?s=128&g=1", "display_name": "Amz", "link": "https://stackoverflow.com/users/7839296/amz"}, "edited": false, "score": 0, "creation_date": 1523083407, "post_id": 49687147, "comment_id": 86422606, "body": "my solution is very long and inefficient, so I&#39;m using solution from Mr. Kjetil S. instead. Thanks bro."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 7839296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUMy3.png?s=128&g=1", "display_name": "Amz", "link": "https://stackoverflow.com/users/7839296/amz"}, "edited": false, "score": 0, "creation_date": 1523083147, "post_id": 49689546, "comment_id": 86422540, "body": "Omg, this work perfectly! thanks Kjetil, you&#39;re awesome!"}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": true, "score": 3, "last_activity_date": 1523007240, "last_edit_date": 1523007240, "creation_date": 1523006741, "answer_id": 49689546, "question_id": 49687147, "link": "https://stackoverflow.com/questions/49687147/how-to-search-specific-prefix-and-add-new-character-to-its-every-number/49689546#49689546", "title": "How to search specific prefix and add new character to its every number?", "body": "<p>Works:</p>\n\n<pre><code>perl -pe's{S(\\d+):(\\S+)}{my$n=$1;\"S$n:\".$2=~s/\\d+/$&amp;c$n/gr=~s/,/;/gr}ge' test.txt\n</code></pre>\n\n<p>There are three regexp search-replaces involved here:</p>\n\n<ul>\n<li>The outer one <code>s{...}{...}ge</code> changes every <code>Sn:somethingnotspace</code></li>\n<li>The first inner one (<code>s/\\d+/$&amp;c$n/gr</code>) adds <code>c$n</code> to every integer number. $&amp; is the match and $n is obtaned from $1 in the outer search-replace.</li>\n<li>The second inner one (<code>s/,/;/gr</code>) chages all commas into semicolons.</li>\n</ul>\n\n<p>The /e regexp modifier (or <code>}ge</code> here) have a code block instead of a string for the replacement. Executes that code and uses the last statement of it as the replacement.</p>\n\n<p>The /r modifier (as in /gr here) returns the regexp-replaced string (without changing the variable, but that's not important here) instead of returning the number of changes it made (the default).</p>\n\n<p>The three /g modifiers search-replaces every match, not just the first.</p>\n\n<p>Need Perl version 5.14 or higher for the <code>/r</code> modifier to work (run <code>perl -v</code> to check version)</p>\n"}], "owner": {"reputation": 105, "user_id": 7839296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUMy3.png?s=128&g=1", "display_name": "Amz", "link": "https://stackoverflow.com/users/7839296/amz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 1, "closed_date": 1523007634, "accepted_answer_id": 49689546, "answer_count": 1, "score": 1, "last_activity_date": 1523007240, "creation_date": 1522998002, "last_edit_date": 1523005800, "question_id": 49687147, "link": "https://stackoverflow.com/questions/49687147/how-to-search-specific-prefix-and-add-new-character-to-its-every-number", "closed_reason": "Not suitable for this site", "title": "How to search specific prefix and add new character to its every number?", "body": "<p>I have this output in a test.txt</p>\n\n<pre><code>S1:158,525 S6:17,322,534,536,546,598 S2:317,478,484,573 S7:313,513 S3:89,107,618,625,632 S8:305,327,336,408,592 S4:30,567,568,585,588 S5:333,617,619 S10:41,202,496,603\n</code></pre>\n\n<p>How to make it be like this?:</p>\n\n<pre><code>S1:158c1;525c1 S6:17c6;322c6;534c6;536c6;546c6;598c6 S2:317c2;478c2;484c2;573c2 S7:313c7;513c7 S3:89c3;107c3;618c3;625c3;632c3 S8:305c8;327c8;336c8;408c8;592c8 S4:30c4;567c4;568c4;585c4;588c4 S5:333c5;617c5;619c5 S10:41c10;202c10;496c10;603c10\n</code></pre>\n\n<p>I want every S{n} that have numbers to output c{n},\n<br>\n<br>\nE.g:\n<br>\nS1:123,1234 become S1:123c1;1234c1\n<br>\n<br>\nPlease help me..\n<br>\n<br>\nThanks,\n<br>\nAm</p>\n"}, {"tags": ["perl", "hash"], "answers": [{"comments": [{"owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 0, "creation_date": 1523068272, "post_id": 49687194, "comment_id": 86419983, "body": "what if the file has 100million rows , will the first code work, or is there a way we keep deleting the columns from the array which has entire file data initially ."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 1, "creation_date": 1523085984, "post_id": 49687194, "comment_id": 86423229, "body": "@LearningCpp: TITS (Try It To See). Both programs keep only the hash of names of the empty columns so far in memory."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1523005102, "last_edit_date": 1523005102, "creation_date": 1522998204, "answer_id": 49687194, "question_id": 49686765, "link": "https://stackoverflow.com/questions/49686765/find-the-only-columns-with-empty-values-in-entire-file/49687194#49687194", "title": "find the only columns with empty values in entire file", "body": "<p>For CSV files with no quotes and escaping, just keep a hash of empty columns so far. Reading the file line by line, remove any non-empty column from the hash:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nchomp( my @column_names = split /,/, &lt;&gt; );\nmy %empty;\n@empty{ @column_names } = ();\n\nwhile (&lt;&gt;) {\n    chomp;\n    my @columns = split /,/;\n    for my $i (0 .. $#columns) {\n        delete $empty{ $column_names[$i] } if length $columns[$i];\n    }\n}\n\nsay for keys %empty;\n</code></pre>\n\n<p>For real CSV files, use <a href=\"http://p3rl.org/Text::CSV_XS\" rel=\"nofollow noreferrer\">Text::CSV_XS</a>, but the method is the same: populate a hash by column names, then remove the non empty ones:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nuse Text::CSV_XS qw{ csv };\n\nmy %empty;\n\ncsv(in      =&gt; shift,\n    out     =&gt; \\ 'skip',\n    headers =&gt; sub { undef $empty{ $_[0] }; $_[0] },\n    on_in   =&gt; sub {\n        my (undef, $columns) = @_;\n        delete @empty{ grep length $columns-&gt;{$_}, keys %$columns }\n    },\n);\n\nsay for keys %empty;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1523126017, "last_edit_date": 1523126017, "creation_date": 1522998645, "answer_id": 49687309, "question_id": 49686765, "link": "https://stackoverflow.com/questions/49686765/find-the-only-columns-with-empty-values-in-entire-file/49687309#49687309", "title": "find the only columns with empty values in entire file", "body": "<p>As rows are processed update an ancillary array which keeps track of each field's truth-value</p>\n\n<p>If any field in a new row is non-empty the corresponding element of the array flips to true; otherwise it stays false.  In the end indices of array's false elements identify indices of empty columns.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';    \nuse Text::CSV;\n\nmy $file = 'cols.csv';\nmy $csv = Text::CSV-&gt;new( { binary =&gt; 1 } ) \n    or die \"Cannot use CSV: \" . Text::CSV-&gt;error_diag (); \n\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nmy @col_names = @{ $csv-&gt;getline($fh) };\n\nmy @mask;\nwhile (my $line = $csv-&gt;getline($fh)) {\n    @mask = map { $mask[$_] || $line-&gt;[$_] ne '' } (0..$#$line);\n}\n\nfor (0..$#mask) {\n    say \"Column \\\"$col_names[$_]\\\" is empty\" if not $mask[$_];\n}\n</code></pre>\n\n<p>Syntax: <code>$#$line</code> is the index of the last element of arrayref <code>$line</code> (like <code>$#ary</code> is for <code>@ary</code>)</p>\n"}], "owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 49687194, "answer_count": 2, "score": 0, "last_activity_date": 1523126017, "creation_date": 1522996442, "question_id": 49686765, "link": "https://stackoverflow.com/questions/49686765/find-the-only-columns-with-empty-values-in-entire-file", "title": "find the only columns with empty values in entire file", "body": "<p>With the below csv data</p>\n\n<pre><code>name,place,animal\na,,\nb,,\na,,\n,b,\n</code></pre>\n\n<p>The name field is available in 3 rows but not available in 1 row<br>\n The place field is available in 1 row but not in 3 row<br>\n The animal field is empty in all the rows -> Get these column names1</p>\n\n<p>i would like to get the column names only if it empty in all the rows.</p>\n\n<p>I am trying to write a perl script for the same but not sure how to attack this problem.</p>\n\n<pre><code>step 1: Check all the columns in first row, if any column is not empty ,dont search it in next row\nstep2: keep repeating step1 in a loop  and finally we will get the output.and this brings down the complexity as we are not bothered about columns that have value even once.\n</code></pre>\n\n<p>i will implement the code and post it here.</p>\n\n<p>But if u have any new ideas, please advise me </p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1522983322, "post_id": 49684462, "comment_id": 86380497, "body": "Why do you expect to see only one filename? You have a <code>print</code> statement which will be executed for every file found."}, {"owner": {"reputation": 70, "user_id": 9605182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aacfc217c8e1c9a7c71a70eda2f6c78?s=128&d=identicon&r=PG&f=1", "display_name": "Claire", "link": "https://stackoverflow.com/users/9605182/claire"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1522983541, "post_id": 49684462, "comment_id": 86380547, "body": "I just have to put the <code>print</code> statement outside the <code>if</code> statement? Sorry I&#39;m new to Perl."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1522983644, "post_id": 49684462, "comment_id": 86380575, "body": "No, I&#39;m asking why you don&#39;t expect the code to print <code>sample2</code> and <code>sample3</code>  when all .txt files are treated the same."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1522983959, "creation_date": 1522983959, "answer_id": 49684635, "question_id": 49684462, "link": "https://stackoverflow.com/questions/49684462/how-to-store-filefindname-output-in-an-array/49684635#49684635", "title": "How to store File::Find::name output in an array", "body": "<p>You are storing each file name in <code>@sample</code>, but that array is declared in far too small a scope and is discarded at the end of the <code>if</code> block, right after the <code>print</code></p>\n\n<p>This should work rather better. It's also more concise and makes sure that the items found are files, not directories</p>\n\n<pre><code>my @sample;\n\nsub find_files {\n\n    return unless -f and /\\.txt\\z/i;\n\n    my ($file, $path, $ext) = fileparse($File::Find::name, qr/\\.[^.]*\\z/);\n\n    push @sample, $file;\n}\n\nfind(\\&amp;find_files, '/my/dir');\nprint \"$_\\n\" for @sample;\n</code></pre>\n"}], "owner": {"reputation": 70, "user_id": 9605182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aacfc217c8e1c9a7c71a70eda2f6c78?s=128&d=identicon&r=PG&f=1", "display_name": "Claire", "link": "https://stackoverflow.com/users/9605182/claire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 49684635, "answer_count": 1, "score": 0, "last_activity_date": 1522983959, "creation_date": 1522982679, "question_id": 49684462, "link": "https://stackoverflow.com/questions/49684462/how-to-store-filefindname-output-in-an-array", "title": "How to store File::Find::name output in an array", "body": "<p>I've managed to extract the filenames of my .txt files, but I'm having trouble storing it in an array.</p>\n\n<p>Filenames:</p>\n\n<blockquote>\n  <p>sample1.txt sample2.txt sample3.txt</p>\n</blockquote>\n\n<p>Code:</p>\n\n<pre><code>sub find_files {\n    my $getfile = $File::Find::name;\n\n    if ($getfile =~ m/txt$/) {\n         my @sample;\n\n         ($file, $path, $ext) = fileparse($getfile, qr/\\..*/);\n\n         push(@sample, \"$file\");\n         print \"$sample[0] \";\n     }\n}\n</code></pre>\n\n<p>Expected output:</p>\n\n<blockquote>\n  <p>sample1</p>\n</blockquote>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>sample1 sample2 sample3</p>\n</blockquote>\n"}, {"tags": ["multithreading", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1522976268, "post_id": 49682929, "comment_id": 86378941, "body": "<a href=\"https://metacpan.org/pod/LWP::Parallel\" rel=\"nofollow noreferrer\"><code>LWP::Parallel</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 6, "last_activity_date": 1523003504, "creation_date": 1523003504, "answer_id": 49688578, "question_id": 49682929, "link": "https://stackoverflow.com/questions/49682929/i-need-to-know-how-to-implement-multithreading/49688578#49688578", "title": "I need to know how to implement multithreading", "body": "<p>OK, so first off - there's some really quite icky looking things you're doing here, and I'd suggest you need to step back and review your code. It's looking a bit 'cargo-cult' thanks to things like:</p>\n\n<pre><code>use HTTP::Request::Common qw(POST);\nuse HTTP::Request::Common qw(GET);\n</code></pre>\n\n<p>Or: </p>\n\n<pre><code>my $ua = LWP::UserAgent-&gt;new;\n$ua    = LWP::UserAgent-&gt;new(keep_alive =&gt; 1);\n</code></pre>\n\n<p>... you're creating a new <code>LWP::UserAgent</code> instance, and then ... creating another one with a different parameter. </p>\n\n<p>You've also got a load of errors that you're not seeing because you didn't include the most important <code>use</code> items:</p>\n\n<pre><code>use strict;\nuse warnings qw ( all );\n</code></pre>\n\n<p>Turn these on first, and then fix the errors.</p>\n\n<p>But here for example:</p>\n\n<pre><code>push(@threads, threads-&gt;create (\\&amp;ask, \\&amp;baidu, $site));\n</code></pre>\n\n<p>What do you think this line is supposed to do? Because what's actually happening here is you try and invoke the <code>ask</code> sub, and then pass it arguments of a code reference to <code>baidu</code> sub, and a string <code>$site</code> - which is undefined at this point in the code. But that's academic, because you NEVER READ THEM in your subroutine. </p>\n\n<p>So it's not really a surprise your code isn't really working - it's nonsense. </p>\n\n<p>But that aside - <code>perl</code>s threading model is often misunderstood. It is not a lightweight thread like you might be thinking of in other programming languages - actually it's rather heavyweight.</p>\n\n<p>You're creating and spawning a thread per iteration, and that's not very efficient either. </p>\n\n<p>What you really want to be doing is using <code>Thread::Queue</code>.</p>\n\n<p>Spawn a small number of 'worker' threads per task, have them read from the queue, and do their work individually.</p>\n\n<p><code>end</code> the queue when it's done with, and let the threads exit and be reaped by the main process. </p>\n\n<p>Something like in this answer: <a href=\"https://stackoverflow.com/questions/26296206/perl-daemonize-with-child-daemons\">Perl daemonize with child daemons</a></p>\n\n<p>... but are you sure there isn't a module that does what you want anyway? </p>\n"}], "owner": {"reputation": 25, "user_id": 7944190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/149f94e13e4167f75ad334793c220203?s=128&d=identicon&r=PG&f=1", "display_name": "z&#233;tfe ege&#232;e", "link": "https://stackoverflow.com/users/7944190/z%c3%a9tfe-ege%c3%a8e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1523003504, "creation_date": 1522970228, "last_edit_date": 1522975581, "question_id": 49682929, "link": "https://stackoverflow.com/questions/49682929/i-need-to-know-how-to-implement-multithreading", "title": "I need to know how to implement multithreading", "body": "<p>I am trying to implement multithread functionality perl script for more speed\nI am trying to implement multithread functionality perl script for more speed\n</p>\n\n<p>I need to know how to implement multithreading for the following perl code</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse if $^O eq \"MSWin32\", Win32::Console::ANSI;\nuse Getopt::Long;\nuse HTTP::Request;\nuse LWP::UserAgent;\nuse IO::Select;\nuse HTTP::Headers;\nuse IO::Socket;\nuse HTTP::Response;\nuse Term::ANSIColor;\nuse HTTP::Request::Common qw(POST);\nuse HTTP::Request::Common qw(GET);\nuse URI::URL;\nuse IO::Socket::INET;\nuse Data::Dumper;\nuse LWP::Simple;\nuse LWP;\nuse URI;\nuse JSON qw( decode_json encode_json );\nuse threads;\n\nmy $ua = LWP::UserAgent-&gt;new;\n$ua    = LWP::UserAgent-&gt;new(keep_alive =&gt; 1);\n$ua-&gt;agent(\"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.63 Safari/537.31\");\n\n\n{\n    chomp($site);\n    push(@threads, threads-&gt;create (\\&amp;ask, \\&amp;baidu, $site));\n    sleep(1) while(scalar threads-&gt;list(threads::running) &gt;= 50);\n}\n\neval {\n    $_-&gt;join foreach @threads;\n    @threads = ();\n};\n\n########### ASK ###########\n\nsub ask {\n    for ( $i = 0; $i &lt; 20; $i += 1) {\n\n        my $url = \"https://www.ask.com/web?o=0&amp;l=dir&amp;qo=pagination&amp;q=site%3A*.fb.com+-www.fb.com&amp;qsrc=998&amp;page=$i\";\n\n        my $request  = $ua-&gt;get($url);\n        my $response = $request-&gt;content;\n\n        while( $response =~ m/((https?):\\/\\/([^\"\\&gt;]*))/g ) {\n\n            my $link = $1;\n\n            my $site = URI-&gt;new($link)-&gt;host;\n            if ( $site =~ /$s/ ) {\n                if ( $site !~ /&lt;/ ) {   \n                    print \"ask: $site\\n\";\n                }\n            } \n        }\n    } \n}\n\n\n########### Baidu ###########\n\nsub baidu {\n    for ( my $ii = 10; $ii &lt;= 760; $ii += 10 ) {\n\n        my $url = \"https://www.baidu.com/s?pn=$ii&amp;wd=site:fb.com&amp;oq=site:fb.com\";\n\n\n        my $request  = $ua-&gt;get($url);\n        my $response = $request-&gt;content;\n\n        while ( $response =~ m/(style=\"text-decoration:none;\"&gt;([^\\/]*))/g ) {\n            my $site = $1;\n            $site =~ s/style=\"text-decoration:none;\"&gt;//g;\n            if ( $site =~ /$s/ ) {\n                print \"baidu: $site\\n\";\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>If run this code I get only Result from <code>Ask.com</code>.\nHow I can fix this problem and thanks for all ?</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C:\\Users\\USER\\Desktop&gt;k.pl -d fb.com\nask: messenger.fb.com\nask: yourbusinessstory.fb.com\nask: research.fb.com\nask: communities.fb.com\nask: shemeansbusiness.fb.com\nask: nonprofits.fb.com\nask: messenger.fb.com\nask: yourbusinessstory.fb.com\nask: research.fb.com\nask: communities.fb.com\nask: shemeansbusiness.fb.com\nask: nonprofits.fb.com\nask: politics.fb.com\nask: communities.fb.com\nask: live.fb.com\nask: messenger.fb.com\nask: yourbusinessstory.fb.com\nask: research.fb.com\nask: communities.fb.com\nask: shemeansbusiness.fb.com\nask: nonprofits.fb.com\nask: politics.fb.com\nask: communities.fb.com\nask: live.fb.com\nask: techprep.fb.com\nask: newsroom.fb.com\nask: rightsmanager.fb.com    ask: messenger.fb.com\nask: yourbusinessstory.fb.com\nask: research.fb.com\nask: communities.fb.com\nask: shemeansbusiness.fb.com\nask: nonprofits.fb.com\nask: politics.fb.com\nask: communities.fb.com\nask: live.fb.com\nask: messenger.fb.com\nask: yourbusinessstory.fb.com\nask: research.fb.com\nask: communities.fb.com\nask: shemeansbusiness.fb.com\nask: nonprofits.fb.com\nask: politics.fb.com\nask: communities.fb.com\nask: live.fb.com\nask: techprep.fb.com\nask: newsroom.fb.com\nask: rightsmanager.fb.com\nask: politics.fb.com\nask: communities.fb.com\nask: live.fb.com\nask: messenger.fb.com\nask: yourbusinessstory.fb.com\nask: research.fb.com\nask: communities.fb.com\nask: shemeansbusiness.fb.com\nask: nonprofits.fb.com\nask: politics.fb.com\nask: communities.fb.com\nask: live.fb.com\nask: techprep.fb.com\nask: newsroom.fb.com\nask: rightsmanager.fb.com\n</code></pre>\n"}, {"tags": ["perl", "visual-studio-2017", "syntax-highlighting"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1522970241, "post_id": 49682775, "comment_id": 86377467, "body": "There are plugins available that provide syntax highlighting and debugger support (try Google) but nothing that offers <i>jump to definition</i>. What do you mean by <i>reference detection</i>?"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1523012306, "post_id": 49684560, "comment_id": 86394161, "body": "You might want to <a href=\"https://stackoverflow.com/posts/49684560/edit\">edit</a> your question and include a citation of the relevant part of the release note."}], "tags": [], "owner": {"reputation": 70, "user_id": 9605182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aacfc217c8e1c9a7c71a70eda2f6c78?s=128&d=identicon&r=PG&f=1", "display_name": "Claire", "link": "https://stackoverflow.com/users/9605182/claire"}, "is_accepted": true, "score": 4, "last_activity_date": 1523311744, "last_edit_date": 1523311744, "creation_date": 1522983339, "answer_id": 49684560, "question_id": 49682775, "link": "https://stackoverflow.com/questions/49682775/does-visual-studio-professional-support-perl/49684560#49684560", "title": "Does Visual Studio Professional support Perl?", "body": "<p>VS 2017 supports Perl syntax highlighting according to this <a href=\"https://docs.microsoft.com/en-us/visualstudio/releasenotes/vs2017-relnotes-v15.0\" rel=\"nofollow noreferrer\">release note</a>:</p>\n\n<blockquote>\n  <p>Language file types listed by support level:</p>\n\n<pre><code>Supports only Syntax Colorization and Autocomplete:\n    .., Objective-C, Perl, PowerShell, ...\nSupports Code Snippets (in addition to Syntax Colorization and Autocomplete):\n    ..., Lua, Perl, PHP, ...\nSupports Navigate To (in addition to Syntax Colorization and Autocomplete):\n    ...\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 463, "user_id": 1547214, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea9bd7fcb2ba1bd6246d92369751df8f?s=128&d=identicon&r=PG", "display_name": "Elle Fie", "link": "https://stackoverflow.com/users/1547214/elle-fie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 701, "favorite_count": 0, "accepted_answer_id": 49684560, "answer_count": 1, "score": 1, "last_activity_date": 1523311744, "creation_date": 1522969153, "last_edit_date": 1523293362, "question_id": 49682775, "link": "https://stackoverflow.com/questions/49682775/does-visual-studio-professional-support-perl", "title": "Does Visual Studio Professional support Perl?", "body": "<p>There appears to be no support for Perl projects in Visual Studio 2017 Professional. Is there an extension to bring syntax highlighting and reference detection (known as \"Navigate To\" in Visual Studio)?</p>\n"}, {"tags": ["perl", "dbix-class"], "answers": [{"comments": [{"owner": {"reputation": 322, "user_id": 300113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2e2857243a00c807abd5e6b5d9e3a6?s=128&d=identicon&r=PG", "display_name": "Hugh Barnard", "link": "https://stackoverflow.com/users/300113/hugh-barnard"}, "edited": false, "score": 0, "creation_date": 1578414472, "post_id": 49673475, "comment_id": 105426985, "body": "Note that <code>DBIx::Class::Report</code> is marked as being Alpha quality code. So I&#39;m avoiding and using <code>dbh_do</code>."}], "tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": true, "score": 3, "last_activity_date": 1535120679, "last_edit_date": 1535120679, "creation_date": 1522934529, "answer_id": 49673475, "question_id": 49672521, "link": "https://stackoverflow.com/questions/49672521/how-to-run-plain-arbitrary-sql-with-dbixclass/49673475#49673475", "title": "How to run plain/arbitrary SQL with DBIx::Class?", "body": "<p>Thanks to <code>mst</code> on #dbix-class IRC channel for help.</p>\n\n<p>I should use <a href=\"http://search.cpan.org/dist/DBIx-Class/lib/DBIx/Class/Storage/DBI.pm#dbh_do\" rel=\"nofollow noreferrer\"><code>dbh_do</code></a></p>\n\n<pre><code>  my @stuff = $schema-&gt;storage-&gt;dbh_do(\n    sub {\n      my ($storage, $dbh, @cols) = @_;\n      my $cols = join(q{, }, @cols);\n      $dbh-&gt;selectrow_array(\"SELECT $cols FROM foo\");\n    },\n    @column_list\n  );\n</code></pre>\n\n<p><strong>UPD</strong>  </p>\n\n<p><a href=\"https://metacpan.org/pod/DBIx::Class::Report\" rel=\"nofollow noreferrer\">DBIx::Class::Report</a> module suggest another way to run complex queries and get <code>DBIx::Class::Result</code> objects for rows as result</p>\n\n<p><strong>UPD</strong>  </p>\n\n<p>Possible <a href=\"https://metacpan.org/pod/DBIx::Raw\" rel=\"nofollow noreferrer\">DBIx::Raw</a> will be interesting too</p>\n"}, {"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1539433867, "creation_date": 1539433867, "answer_id": 52792950, "question_id": 49672521, "link": "https://stackoverflow.com/questions/49672521/how-to-run-plain-arbitrary-sql-with-dbixclass/52792950#52792950", "title": "How to run plain/arbitrary SQL with DBIx::Class?", "body": "<p>Another way to run plain sql and get <code>DBIx::Class</code> functionality is to use <a href=\"https://metacpan.org/pod/DBIx::Class::ResultSource::View\" rel=\"nofollow noreferrer\">::View</a></p>\n\n<pre><code>package MyApp::Schema::Result::Year2000CDs;\n\nuse base qw/DBIx::Class::Core/;\n\n__PACKAGE__-&gt;table_class('DBIx::Class::ResultSource::View');\n\n__PACKAGE__-&gt;table('year2000cds');\n__PACKAGE__-&gt;result_source_instance-&gt;is_virtual(1);\n__PACKAGE__-&gt;result_source_instance-&gt;view_definition(\n    # PUT HERE YOUR QUERY\n    \"SELECT cdid, artist, title FROM cd WHERE year ='2000'\"\n);\n__PACKAGE__-&gt;add_columns(\n  'cdid' =&gt; {\n    data_type =&gt; 'integer',\n    is_auto_increment =&gt; 1,\n  },\n  'artist' =&gt; {\n    data_type =&gt; 'integer',\n  },\n  'title' =&gt; {\n    data_type =&gt; 'varchar',\n    size      =&gt; 100,\n  },\n);\n</code></pre>\n\n<p>Here is <a href=\"http://blogs.perl.org/users/ovid/2014/04/views-in-dbixclass.html\" rel=\"nofollow noreferrer\">blog post</a> by Ovid</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 691, "favorite_count": 0, "accepted_answer_id": 49673475, "answer_count": 2, "score": -4, "last_activity_date": 1539433867, "creation_date": 1522931592, "last_edit_date": 1539433472, "question_id": 49672521, "link": "https://stackoverflow.com/questions/49672521/how-to-run-plain-arbitrary-sql-with-dbixclass", "title": "How to run plain/arbitrary SQL with DBIx::Class?", "body": "<p>I need to run plain SQL with DBIx::Class:</p>\n\n<pre><code>select proc_name();\n</code></pre>\n\n<p>Is there a way to do this with <code>DBIx::Class</code>?</p>\n\n<p><strong>UPD</strong><br>\nI know I can do different connection with <code>DBI</code> and then:</p>\n\n<pre><code>$dbh-&gt;do( 'select proc_name();' )\n</code></pre>\n\n<p>But I need to run it within same transaction</p>\n\n<p><strong>UPD</strong><br>\n<a href=\"http://search.cpan.org/~ribasushi/DBIx-Class-0.082841/lib/DBIx/Class/Manual/FAQ.pod\" rel=\"nofollow noreferrer\">FAQ</a> does not cover that</p>\n\n<p><strong>UPD</strong><br>\nFor downvoters: I know <code>DBIx::Class</code> is not for plain SQL. But from one side sometimes query is too complex to rewrite it as <code>DBIx::Class</code> understand, from the other side we need functionality of <code>DBIx::Class</code></p>\n"}, {"tags": ["perl", "getopt-long"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1522935084, "post_id": 49665761, "comment_id": 86357964, "body": "You mentioned in a comment you want multiple systems with multiple attributes. At this point, A JSON or YAML file sounds like the way to go."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8757355"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1522938011, "post_id": 49665761, "comment_id": 86360191, "body": "@ikegami thanks for your input but with the current implementation of my framework I can&#39;t go with file approach. As I&#39;m retrieving parameters from database and in a daemon I&#39;m running <code>testing.pl</code> perl script using system command by passing arguments that I got from database."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1522938101, "post_id": 49665761, "comment_id": 86360258, "body": "Nothing in that prevents the use of a file/pipe."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1522939088, "post_id": 49665761, "comment_id": 86361008, "body": "Should the command line arg be quoted? <code>--systems &quot;id=sys_1 ip_address=127.0.0.1 id=sys_2 ip_address=127.0.0.2&quot;</code>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8757355"}, "edited": false, "score": 0, "creation_date": 1522915946, "post_id": 49666996, "comment_id": 86344428, "body": "Thanks for your answer. I see with this approach I&#39;ve to strictly follow the convention of passing the argument. Means if I pass <code>ip_address</code> first and then <code>id</code> it will fail. Can we enhance it in such a way that it&#39;ll work irrespective of position"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8757355"}, "edited": false, "score": 0, "creation_date": 1522920722, "post_id": 49666996, "comment_id": 86347674, "body": "It may contain more than two sub arguments. I&#39;ve given only two for the sake of simplicity."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1522920799, "post_id": 49666996, "comment_id": 86347726, "body": "@Sadhu Ok, but how do you separate between sub arguments and system arguments? How do know which arguments belong to a given system?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8757355"}, "edited": false, "score": 0, "creation_date": 1522921737, "post_id": 49666996, "comment_id": 86348446, "body": "yes it is also a problem. The command line that I gave is what I understood so far from getopt, it doesn&#39;t mean that I&#39;ve to give command line options in that way. Basically at the end I want array of systems through getopts, irrespective of how we are giving command line options. Hope I didn&#39;t confuse you more. Thanks for bearing with me."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1522921931, "post_id": 49666996, "comment_id": 86348559, "body": "Have a look at the suggestion in the answer by @SimonShine. He suggest to add a new <code>--system</code> flag between each system argument group. In this way you can separate which sub arguments belong to each system"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8757355"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1522925503, "post_id": 49666996, "comment_id": 86351032, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/168292/discussion-between-sadhu-and-hakon-haegland\">continue this discussion in chat</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8757355"}, "edited": false, "score": 2, "creation_date": 1522952603, "post_id": 49666996, "comment_id": 86369618, "body": "thank you so much sir it&#39;s working. Thank you for devoting your precious time for me. I can&#39;t use chat because of less reputation, that&#39;s why I&#39;m commenting here."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1522999305, "post_id": 49666996, "comment_id": 86386043, "body": "@Sadhu You are welcome! Feel free to contact me by email if you want to discuss other coding issues. Have a nice day."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1522916332, "last_edit_date": 1522916332, "creation_date": 1522914856, "answer_id": 49666996, "question_id": 49665761, "link": "https://stackoverflow.com/questions/49665761/how-to-get-array-of-hash-arguments-using-getoptlong-lib-in-perl/49666996#49666996", "title": "How to get array of hash arguments using Getopt::Long lib in perl?", "body": "<p>Here is an attempt, there might be more elegant solutions:</p>\n\n<pre><code>GetOptions('systems=s{1,}' =&gt; \\my @temp );\n\nmy @systems;\nwhile (@temp) {\n    my $value1 = shift @temp;\n    $value1 =~ s/^(\\w+)=//; my $key1 = $1;\n    my $value2 = shift @temp;\n    $value2 =~ s/^(\\w+)=//; my $key2 = $1;\n    push @systems, { $key1 =&gt; $value1, $key2 =&gt; $value2 };\n}\n\nfor (@systems) {\n    print $_-&gt;{id},' ', $_-&gt;{ip_address}, \"\\n\";\n}\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>sys_1 127.0.0.1\nsys_2 127.0.0.2\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8757355"}, "edited": false, "score": 0, "creation_date": 1522917060, "post_id": 49667215, "comment_id": 86345132, "body": "Excuse me for not writing down the problem statement properly. Actually just for the sake of simplicity I&#39;ve given example with two sub arguments. Ideally it contains more than two and I&#39;m bit skeptical that it will work when argument is more than two"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8757355"}, "edited": false, "score": 0, "creation_date": 1522917434, "post_id": 49667215, "comment_id": 86345356, "body": "And also it may contain more than two systems."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1522929518, "post_id": 49667215, "comment_id": 86353874, "body": "Why are you passing longer lists of things via flags on command line? Would it not be way easier to feed them in via STDIN?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8757355"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1522938498, "post_id": 49667215, "comment_id": 86360598, "body": "@Sobrique, I can&#39;t because I&#39;m fetching parameters from database and converting them into command line and then passing it to the script using system command  <code>$cmd_lines_args = &#39;--system --id sys_1 --ip_address 127.0.0.0.1&#39;; system(&quot;perl testing.pl $cmd_lines_args&quot;);</code>  <code>$cmd_lines_args</code> I&#39;ll generate dynamically using for loop by reading from database."}, {"owner": {"reputation": 14543, "user_id": 235908, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rTstt.jpg?s=128&g=1", "display_name": "Simon Shine", "link": "https://stackoverflow.com/users/235908/simon-shine"}, "edited": false, "score": 1, "creation_date": 1522939307, "post_id": 49667215, "comment_id": 86361184, "body": "@Sadhu: All three suggestions work for more <code>--system</code>s than two. You could easily have tried this instead of being passively skeptical. The fact that your data comes from a database has nothing to do with what input scheme you use (stdin, or any of the suggested parameter schemes). Consider using <a href=\"http://search.cpan.org/~pjf/IPC-System-Simple-1.25/lib/IPC/System/Simple.pm#runx(),_systemx()_and_capturex()\" rel=\"nofollow noreferrer\"><code>IPC::System::Simple::systemx()</code></a> instead of <code>system()</code>."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1522941278, "post_id": 49667215, "comment_id": 86362777, "body": "OK. So <code>system(&quot;perl testing.pl...</code> makes this a classic XY problem. Don&#39;t use <code>system</code> and this problem goes away. Open it as a file handle:"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8757355"}, "edited": false, "score": 1, "creation_date": 1522951950, "post_id": 49667215, "comment_id": 86369228, "body": "@SimonShine I think you misunderstood my first comment. I said more than two sub arguments of a system viz,. <code>--systems id=sys_1 ip_address=1.1.1.1 conn_type=ssh os_type=ubuntu</code> etc.."}], "tags": [], "owner": {"reputation": 14543, "user_id": 235908, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rTstt.jpg?s=128&g=1", "display_name": "Simon Shine", "link": "https://stackoverflow.com/users/235908/simon-shine"}, "is_accepted": false, "score": 1, "last_activity_date": 1522924363, "last_edit_date": 1522924363, "creation_date": 1522915604, "answer_id": 49667215, "question_id": 49665761, "link": "https://stackoverflow.com/questions/49665761/how-to-get-array-of-hash-arguments-using-getoptlong-lib-in-perl/49667215#49667215", "title": "How to get array of hash arguments using Getopt::Long lib in perl?", "body": "<p>What you are describing,</p>\n\n<blockquote>\n<pre><code>--systems id=sys_1 ip_address=127.0.0.1 id=sys_2 ip_address=127.0.0.2\n</code></pre>\n</blockquote>\n\n<p>appears to be one option that takes a variable number of arguments that are pairs, and come in multiples of two. <a href=\"http://perldoc.perl.org/Getopt/Long.html#Options-with-multiple-values\" rel=\"nofollow noreferrer\"><code>Getopt::Long</code>'s \"Options with multiple values\"</a> lets you do the following:</p>\n\n<pre><code>GetOptions('systems=s{2,4}' =&gt; \\@systems);\n</code></pre>\n\n<p>This lets you specify 2, 3 or 4 arguments, but it does not have syntax for \"any even number of arguments\" (to cover an arbitrary number of pairs beyond two), and you still have to unpack the <code>id=sys_1</code> manually then. You can write a <a href=\"http://perldoc.perl.org/Getopt/Long.html#User-defined-subroutines-to-handle-options\" rel=\"nofollow noreferrer\">user-defined subroutine</a> that handles the processing of <code>--systems</code>' arguments (but does not take into account missing <code>id=...</code>s):</p>\n\n<pre><code>my $system;\nmy %systems;\n\nGetOptions('systems=s{,}' =&gt; sub {\n    my $option = shift;\n    my $pair = shift;\n    my ($key, $value) = split /=/, $pair;\n\n    $system = $value if $key eq 'id';\n    $systems{$system} = $value if $key eq 'ip_address';\n});\n</code></pre>\n\n<p>I would however prefer one of the following schemes:</p>\n\n<pre><code>--system sys_1 127.0.0.1 --system sys_2 127.0.0.1\n--system sys_1=127.0.0.1 --system sys_2=127.0.0.1\n</code></pre>\n\n<p>They're achieved with the following:</p>\n\n<pre><code>GetOptions('system=s{2}', \\@systems);\nGetOptions('system=s%', \\@systems);\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8757355"}, "edited": false, "score": 0, "creation_date": 1522938736, "post_id": 49673055, "comment_id": 86360768, "body": "Thanks for your answer. As  I mentioned I can&#39;t go with the file and also it is not only two arguments <code>id</code> and <code>ip_address</code>, it can be more."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1522941200, "post_id": 49673055, "comment_id": 86362703, "body": "<code>echo &quot;id=1 ip_address=1.1.1.1&quot; | perl testing.pl</code> will do the trick. Both of the above handle multiple instances of id/system pairs."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1522941449, "post_id": 49673055, "comment_id": 86362909, "body": "Also - building args and then embedding them in a <code>system</code> call is an awful approach to IPC."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1522941507, "post_id": 49673055, "comment_id": 86362954, "body": "@Sadhu: You haven&#39;t given a good reason why you can&#39;t use a file for input. <b>Sobrique</b> is correct: this is a misuse of command-line arguments."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8757355"}, "edited": false, "score": 0, "creation_date": 1522950541, "post_id": 49673055, "comment_id": 86368477, "body": "@Sobrique your solution is not working for me in many situations. <b>1.</b> It is position constraint, It will break if I use <code>ip_address</code> first and then <code>id</code>. <b>2.</b> If I give one more parameter for example <code>conn_type=ssh</code> and change the code accordingly it gives me  <code>{     &#39;ssh&#39; =&gt; undef,      &#39;sys_1&#39; =&gt; &#39;192.168.0.1&#39;   };</code> <b>3.</b> You are seeing only the half picture. I&#39;ve written <code>--systems</code> as main command and then defining sub arguments inside it because it will contain other arguments also, contd..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8757355"}, "edited": false, "score": 0, "creation_date": 1522950580, "post_id": 49673055, "comment_id": 86368497, "body": "... for example <code>perl testing.pl --fio rw=write direct=0 --systems id=sys_1 ip_address=1.1.1.1 --systems id=sys_2 ip_address=1.1.1.1</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1522962193, "post_id": 49673055, "comment_id": 86374744, "body": "If you&#39;re saying that you can&#39;t use a file or a pipe for the input because you haven&#39;t designed it that way, then your design needs changing. Seriously, don&#39;t go with this just because it&#39;s the first thing that came into your head. We&#39;ve been trying to tell you that it&#39;s a <b><i>bad approach</i></b> for several reasons."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1523002248, "post_id": 49673055, "comment_id": 86387685, "body": "If your problem is more complicated, then the way you get useful answers is to include that information in your question. There are other ways to deal with multiple/positional input. I&#39;ve just offered the simplest way of handling what you&#39;ve said you&#39;re trying to do. But if it&#39;s more complicated than that, I&#39;d suggest your IPC is best done via passing JSON into your script."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1522941407, "last_edit_date": 1522941407, "creation_date": 1522933201, "answer_id": 49673055, "question_id": 49665761, "link": "https://stackoverflow.com/questions/49665761/how-to-get-array-of-hash-arguments-using-getoptlong-lib-in-perl/49673055#49673055", "title": "How to get array of hash arguments using Getopt::Long lib in perl?", "body": "<p>I actually think this is a design problem, more than a problem with <code>GetOpt</code> - the notion of supporting multiple, paired arguments passed as command line arguments I think is something that you'd be far better off avoiding. </p>\n\n<p>There's a reason that <code>GetOpt</code> doesn't really support it - it's not a scalable solution really. </p>\n\n<p>How about instead just reading the values from <code>STDIN</code>?:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy %systems = do { local $/; &lt;DATA&gt; } =~ m/id=(\\w+) ip_address=([\\d\\.]+)/mg;\n\nprint Dumper \\%systems; \n</code></pre>\n\n<p>And then you'd be able to invoke your script as:</p>\n\n<pre><code>perl testing.pl &lt;filename_with_args&gt;\n</code></pre>\n\n<p>Or similar. </p>\n\n<p>And if you <em>really</em> must:</p>\n\n<pre><code>my %systems = \"@ARGV\" =~ m/id=(\\w+) ip_address=([\\d\\.]+)/g;\n</code></pre>\n\n<p>Both of the above work for multiple parameters.</p>\n\n<p>However, your comment on another post:</p>\n\n<blockquote>\n  <p>I can't because I'm fetching parameters from database and converting them into command line and then passing it to the script using system command <code>$cmd_lines_args = '--system --id sys_1 --ip_address 127.0.0.0.1'; system(\"perl testing.pl $cmd_lines_args\");</code> $cmd_lines_args I'll generate dynamically using for loop by reading from database</p>\n</blockquote>\n\n<p>.. that makes this an XY Problem. </p>\n\n<p>Don't do it like that:</p>\n\n<pre><code>open ( my $script, '|-', \"perl testing.pl\" );\nprint {$script} \"id=some_id ip_address=10.9.8.7\\n\";\nprint {$script} \"id=sys2 ip_address=10.9.8.7\\n\";\n</code></pre>\n\n<p>etc. </p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8757355"}, "edited": false, "score": 0, "creation_date": 1522953895, "post_id": 49675197, "comment_id": 86370396, "body": "Thanks for your answer.  How <code>print</code> statement will work?"}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1523001514, "post_id": 49675197, "comment_id": 86387256, "body": "(upvote is the best kind of thanks here - click that up arrow;-) Not sure if I understand <i>&#171;How <code>print</code> statement will work&#187;</i>) If you run my code you will see how. And you have the same <code>print</code> in your original query, except you used a <code>foreach</code> loop and I used a <code>for</code> statement modifier. In this case those are synonymous."}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1522939466, "creation_date": 1522939466, "answer_id": 49675197, "question_id": 49665761, "link": "https://stackoverflow.com/questions/49665761/how-to-get-array-of-hash-arguments-using-getoptlong-lib-in-perl/49675197#49675197", "title": "How to get array of hash arguments using Getopt::Long lib in perl?", "body": "<p>I would just parse the <code>--systems</code> arg and quote the \"hashes\" like this:</p>\n\n<pre><code>perl testing.pl --systems \"id=s1 ip_address=127.0.0.1 id=s2 ip_address=127.0.0.2\"\n</code></pre>\n\n<p>Parse like perhaps so:</p>\n\n<pre><code>my($systems,@systems);\nGetOptions('systems=s' =&gt; \\$systems);\nfor(split/\\s+/,$systems){\n    my($key,$val)=split/=/,$_,2;\n    push @systems, {} if !@systems or exists$systems[-1]{$key};\n    $systems[-1]{$key}=$val;\n}\nprint \"$_-&gt;{id} $_-&gt;{ip_address}\\n\" for @systems;\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>sys_1 127.0.0.1\nsys_2 127.0.0.2\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8757355"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 690, "favorite_count": 0, "accepted_answer_id": 49666996, "answer_count": 4, "score": 0, "last_activity_date": 1586051744, "creation_date": 1522910728, "last_edit_date": 1586051744, "question_id": 49665761, "link": "https://stackoverflow.com/questions/49665761/how-to-get-array-of-hash-arguments-using-getoptlong-lib-in-perl", "title": "How to get array of hash arguments using Getopt::Long lib in perl?", "body": "<p>I want to take arguments as an array of hashes by using <a href=\"https://metacpan.org/pod/Getopt::Long\" rel=\"nofollow noreferrer\">Getopt::Long</a> in my script. \nConsider the following command line example:</p>\n\n<pre><code>perl testing.pl --systems id=sys_1 ip_address=127.0.0.1 id=sys_2 ip_address=127.0.0.2\n</code></pre>\n\n<p>For the sake of simplicity, I'm using <strong>two systems</strong> and only <strong>two sub arguments</strong> of each system, i.e., <code>id</code> and <code>ip_address</code>. Ideally, the number of <code>systems</code> is dynamic; it may contain 1, 2 or more and so with the number of arguments of each system.</p>\n\n<p>My script should handle these arguments in such a way that it will store in <code>@systems</code> array and each element will be a hash containing <code>id</code> and <code>ip_address</code>. </p>\n\n<p>Is there any way in <a href=\"https://metacpan.org/pod/Getopt::Long\" rel=\"nofollow noreferrer\">Getopt::Long</a> to achieve this without parsing it myself?</p>\n\n<p>Following is pseudocode for what I'm trying to achieve:</p>\n\n<hr>\n\n<p><strong>testing.pl</strong></p>\n\n<pre><code>use Getopt::Long;\nmy @systems;\nGetOptions('systems=s' =&gt; \\@systems);\nforeach (@systems) {\n  print $_-&gt;{id},' ', $_-&gt;{ip_address};\n}\n</code></pre>\n"}, {"tags": ["perl", "internals", "opcode"], "comments": [{"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 1, "creation_date": 1522903787, "post_id": 49663071, "comment_id": 86338420, "body": "Or  <code>exit() if ($a &amp;&amp; $b)</code>"}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1522906120, "post_id": 49663071, "comment_id": 86339153, "body": "@Ring&#216; that doesn&#39;t create a useless lexical scope in not creating a useless lexical scope it serves to distract from my question."}], "answers": [{"tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": true, "score": 5, "last_activity_date": 1523030307, "last_edit_date": 1523030307, "creation_date": 1522982520, "answer_id": 49684439, "question_id": 49663071, "link": "https://stackoverflow.com/questions/49663071/what-is-null-vk-in-perl/49684439#49684439", "title": "What is `null vK` in Perl?", "body": "<p>The \"-\" at the beginning of the line indicates the op won't get executed, which can also be seen using <code>perl -MO=Concise,-exec</code>.</p>\n\n<p>That said, the <code>null vK...</code> or <code>null sK...</code> opcodes in B::Concise output doesn't mean that some ops have been optimized away. <code>perldoc</code> on B::Concise says clearly that such optimization is indicated by <code>ex-</code> in the output:</p>\n\n<blockquote>\n  <p>Nullops appear as \"ex-opname\", where <em>opname</em> is an op that has been\n  optimized away by perl. They're displayed with a sequence-number of '-',\n  because they are not executed (they don't appear in previous example),\n  they're printed here because they reflect the parse.</p>\n</blockquote>\n\n<p>For example:</p>\n\n<pre><code>&gt; perl  -MO=Concise -e \"$a\"\n4  &lt;@&gt; leave[1 ref] vKP/REFC -&gt;(end)\n1     &lt;0&gt; enter -&gt;2\n2     &lt;;&gt; nextstate(main 1 -e:1) v:{ -&gt;3\n-     **&lt;1&gt; ex-rv2sv vK/1 -&gt;4**\n3        &lt;#&gt; gvsv[*a] s -&gt;4\n</code></pre>\n\n<p>So what are those nulls then?</p>\n\n<p>They are the genuine nulls that come from the yacc grammar Perl uses to parse code, and they have not been intended for execution from the beginning.</p>\n\n<p>In your case the excess <code>null vk</code> comes directly from the following <code>do BLOCK</code> grammar rule (<a href=\"https://github.com/Perl/perl5/blob/be68a30e444b3213a95df511fb8e856b2107ce73/perly.y\" rel=\"nofollow noreferrer\">perly.y</a>): </p>\n\n<pre><code>termdo  :       DO term %prec UNIOP                     /* do $filename */\n            { $$ = dofile($2, $1);}\n    |   DO block    %prec '('               /* do { code */\n            { $$ = newUNOP(OP_NULL, OPf_SPECIAL, op_scope($2));}\n        ;\n</code></pre>\n\n<p>We can see it here:</p>\n\n<pre><code>&gt;perl -MO=Concise -e \"do{}\"\n4  &lt;@&gt; leave[1 ref] vKP/REFC -&gt;(end)\n1     &lt;0&gt; enter -&gt;2\n2     &lt;;&gt; nextstate(main 2 -e:1) v:{ -&gt;3\n-     &lt;1&gt; null vK*/1 -&gt;4\n-        &lt;@&gt; scope vK -&gt;-\n3           &lt;0&gt; stub v -&gt;4\n</code></pre>\n\n<p>In other cases nulls come from yacc actions.\nApparently, those nulls are used to help manage the op-tree, and since they are never executed, I think Perl developers don't bother about their presence.</p>\n\n<p>Here is an example of null op arising from parsing of a boolean expression:</p>\n\n<pre><code>&gt;perl  -MO=Concise -e \"$a||$b\"\n6  &lt;@&gt; leave[1 ref] vKP/REFC -&gt;(end)\n1     &lt;0&gt; enter -&gt;2\n2     &lt;;&gt; nextstate(main 1 -e:1) v:{ -&gt;3\n-     &lt;1&gt; null vK/1 -&gt;6\n4        &lt;|&gt; or(other-&gt;5) vK/1 -&gt;6\n-           &lt;1&gt; ex-rv2sv sK/1 -&gt;4\n3              &lt;#&gt; gvsv[*a] s -&gt;4\n-           &lt;1&gt; ex-rv2sv vK/1 -&gt;-\n5              &lt;#&gt; gvsv[*b] s -&gt;6\n</code></pre>\n\n<p>Why is a null here? Another snippet helps make it clear:</p>\n\n<pre><code>&gt;perl -MO=Concise -e \"!$a&amp;&amp;!$b\"\n7  &lt;@&gt; leave[1 ref] vKP/REFC -&gt;(end)\n1     &lt;0&gt; enter -&gt;2\n2     &lt;;&gt; nextstate(main 1 -e:1) v:{ -&gt;3\n6     &lt;1&gt; not vK/1 -&gt;7\n4        &lt;|&gt; or(other-&gt;5) sK/1 -&gt;6\n-           &lt;1&gt; ex-not sK/1 -&gt;4\n-              &lt;1&gt; ex-rv2sv sK/1 -&gt;-\n3                 &lt;#&gt; gvsv[*a] s -&gt;4\n-           &lt;1&gt; ex-not sK/1 -&gt;6\n-              &lt;1&gt; ex-rv2sv sK/1 -&gt;-\n5                 &lt;#&gt; gvsv[*b] s -&gt;6\n</code></pre>\n\n<p>It appears that <code>null vK</code> has become <code>not vK</code>.\nLooking carefully, we can see that Perl optimized <code>!$a&amp;&amp;!$b</code> into <code>!($a||$b)</code> with <code>not(!)</code> taking place of <code>null</code>.\nIt turns out that Perl always reserves a parent opcode for logical expressions,  and if an expression can be simplified with outer <code>not</code>\nPerl puts <code>not</code> into the parent opcode, and <code>null</code> otherwise.</p>\n\n<p>To summarize: NULL opcodes indicated by <code>ex-</code> in <code>B::Concise</code> output are made by the optimizer, and NULL opcodes indicated by <code>null</code> come from the grammar parser. Both of them are never executed and carry no performance penalties.</p>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 49684439, "answer_count": 1, "score": 4, "last_activity_date": 1523030307, "creation_date": 1522894058, "last_edit_date": 1522903351, "question_id": 49663071, "link": "https://stackoverflow.com/questions/49663071/what-is-null-vk-in-perl", "title": "What is `null vK` in Perl?", "body": "<p>Using Perl, I have two similar syntax's,</p>\n\n<pre><code>if ($a &amp;&amp; $b) { exit() }\ndo { exit() } if ($a &amp;&amp; $b)\n</code></pre>\n\n<p>These I believe are supposed to be the same thing, however the top one creates a <code>null vK</code> opcode,</p>\n\n<pre><code>&lt;1&gt; null vK*/1 -&gt;-\n</code></pre>\n\n<p>What is the significance of <code>null vK</code> and what does it do?</p>\n\n<pre><code>$ perl -MO=Concise -e'if ($a &amp;&amp; $b) { exit() }'\n8  &lt;@&gt; leave[1 ref] vKP/REFC -&gt;(end)\n1     &lt;0&gt; enter -&gt;2\n2     &lt;;&gt; nextstate(main 1 -e:1) v:{ -&gt;3\n-     &lt;1&gt; null vK/1 -&gt;8\n6        &lt;|&gt; and(other-&gt;7) vK/1 -&gt;8\n-           &lt;1&gt; null sK/1 -&gt;6\n4              &lt;|&gt; and(other-&gt;5) sK/1 -&gt;8\n-                 &lt;1&gt; ex-rv2sv sK/1 -&gt;4\n3                    &lt;#&gt; gvsv[*a] s -&gt;4\n-                 &lt;1&gt; ex-rv2sv sK/1 -&gt;-\n5                    &lt;#&gt; gvsv[*b] s -&gt;6\n-           &lt;@&gt; scope vK -&gt;-\n-              &lt;;&gt; ex-nextstate(main 3 -e:1) v -&gt;7\n7              &lt;0&gt; exit v* -&gt;8\n-e syntax OK\n</code></pre>\n\n<p>Verses the follow,</p>\n\n<pre><code>$ perl -MO=Concise -e'do { exit() } if ($a &amp;&amp; $b)'\n8  &lt;@&gt; leave[1 ref] vKP/REFC -&gt;(end)\n1     &lt;0&gt; enter -&gt;2\n2     &lt;;&gt; nextstate(main 1 -e:1) v:{ -&gt;3\n-     &lt;1&gt; null vK/1 -&gt;8\n6        &lt;|&gt; and(other-&gt;7) vK/1 -&gt;8\n-           &lt;1&gt; null sKP/1 -&gt;6\n4              &lt;|&gt; and(other-&gt;5) sK/1 -&gt;8\n-                 &lt;1&gt; ex-rv2sv sK/1 -&gt;4\n3                    &lt;#&gt; gvsv[*a] s -&gt;4\n-                 &lt;1&gt; ex-rv2sv sK/1 -&gt;-\n5                    &lt;#&gt; gvsv[*b] s -&gt;6\n-           &lt;1&gt; null vK*/1 -&gt;-\n-              &lt;@&gt; scope vK -&gt;-\n-                 &lt;;&gt; ex-nextstate(main 2 -e:1) v -&gt;7\n7                 &lt;0&gt; exit v* -&gt;8\n</code></pre>\n"}]