[{"tags": ["perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1562233015, "post_id": 56878144, "comment_id": 100317252, "body": "What have you tried? What problems are you having? Please show us your code."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11736518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df867032fdf35e0db1b8d223af1929ba?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/11736518/james"}, "edited": false, "score": 0, "creation_date": 1562191698, "post_id": 56878377, "comment_id": 100305561, "body": "Error GETing <a href=\"https://www.alphavantage.co/query?function=TIME_SERIES_DAILY_ADJUSTED&amp;datatype=csv&amp;outputsize=full&amp;apikey=1A4999U3ZOOGFQQZ&amp;symbol=IBM\" rel=\"nofollow noreferrer\">alphavantage.co/&hellip;</a>: Can&#39;t load &#39;C:/Strawberry/perl/vendor/lib/auto/Net/SSLeay/SSLeay.xs.dll&zwnj;&#8203;&#39; for module Net::SSLeay: load_file:The specified module could not be found (LWP::Protocol::https not installed) at stockscript.pl line 20."}, {"owner": {"reputation": 1, "user_id": 11736518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df867032fdf35e0db1b8d223af1929ba?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/11736518/james"}, "edited": false, "score": 0, "creation_date": 1562191814, "post_id": 56878377, "comment_id": 100305585, "body": "Thanks Choroba.  I ran the script but got the error I just posted above.  Is there a .dll missing or some other error??"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 1, "user_id": 11736518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df867032fdf35e0db1b8d223af1929ba?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/11736518/james"}, "edited": false, "score": 0, "creation_date": 1562191878, "post_id": 56878377, "comment_id": 100305598, "body": "Try installing <a href=\"http://p3rl.org/LWP::Protocol::https\" rel=\"nofollow noreferrer\">LWP::Protocol::https</a>"}, {"owner": {"reputation": 1, "user_id": 11736518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df867032fdf35e0db1b8d223af1929ba?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/11736518/james"}, "edited": false, "score": 0, "creation_date": 1562192811, "post_id": 56878377, "comment_id": 100305769, "body": "I installed the Strawberry Perl on my Windows 10 laptop today.  Should this include this library?  If not, what is the best way to go about downloading and installing this library?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 1, "user_id": 11736518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df867032fdf35e0db1b8d223af1929ba?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/11736518/james"}, "edited": false, "score": 0, "creation_date": 1562193022, "post_id": 56878377, "comment_id": 100305810, "body": "<code>cpan LWP::Protocol::https</code> should install the module. I&#39;m not on Strawberry so I don&#39;t know the details."}, {"owner": {"reputation": 1, "user_id": 11736518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df867032fdf35e0db1b8d223af1929ba?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/11736518/james"}, "edited": false, "score": 0, "creation_date": 1562193648, "post_id": 56878377, "comment_id": 100305959, "body": "Can&#39;t load &#39;C:/Strawberry/perl/vendor/lib/auto/Net/SSLeay/SSLeay.xs.dll&zwnj;&#8203;&#39; for module Net::SSLeay: load_file:The specified module could not be found (LWP::Protocol::https not installed) at stockscript2.pl line 20."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 0, "last_activity_date": 1562190849, "creation_date": 1562190849, "answer_id": 56878377, "question_id": 56878144, "link": "https://stackoverflow.com/questions/56878144/how-to-write-a-basic-perl-script-to-call-a-url-multiple-times-w-one-changing-pa/56878377#56878377", "title": "How to write a basic Perl script to call a URL multiple times w/ one changing parameter in the URL...?", "body": "<p>I usually use <a href=\"http://p3rl.org/WWW::Mechanize\" rel=\"nofollow noreferrer\">WWW::Mechanize</a> for similar tasks. I also prefer <a href=\"http://p3rl.org/URI\" rel=\"nofollow noreferrer\">URI</a> in case the symbol contains special characters.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse URI;\nuse WWW::Mechanize;\n\nmy $mech = 'WWW::Mechanize'-&gt;new;\nmy $uri = 'URI'-&gt;new('https://www.alphavantage.co/query');\nmy %params = (function   =&gt; 'TIME_SERIES_DAILY_ADJUSTED',\n              outputsize =&gt; 'full',\n              apikey     =&gt; '...',\n              datatype   =&gt; 'csv');\nwhile (my $symbol = &lt;&gt;) {\n    chomp $symbol;\n    my $url = $uri;\n    $url-&gt;query_form(%params, symbol =&gt; $symbol);\n    $mech-&gt;get($url);\n    $mech-&gt;save_content(\"$symbol.csv\");\n}\n</code></pre>\n\n<p>You might need to wrap the <code>get</code> call into an <code>eval</code> and maybe retry several times on failure. Also, if you really made your API key public, consider changing it.</p>\n"}], "owner": {"reputation": 1, "user_id": 11736518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df867032fdf35e0db1b8d223af1929ba?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/11736518/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562190849, "creation_date": 1562189238, "question_id": 56878144, "link": "https://stackoverflow.com/questions/56878144/how-to-write-a-basic-perl-script-to-call-a-url-multiple-times-w-one-changing-pa", "title": "How to write a basic Perl script to call a URL multiple times w/ one changing parameter in the URL...?", "body": "<p>I want to call the following URL in a loop format, calling it once for each Stock Symbol listed in a .TXT file.  Where \"MSFT\" is listed below, this would need to be a variable that would change for each value listed in the .TXT file (one Stock Symbol per line).</p>\n\n<p><a href=\"https://www.alphavantage.co/query?function=TIME_SERIES_DAILY_ADJUSTED&amp;symbol=MSFT&amp;outputsize=full&amp;apikey=1A4999U3ZOOGFQQZ&amp;datatype=csv\" rel=\"nofollow noreferrer\">https://www.alphavantage.co/query?function=TIME_SERIES_DAILY_ADJUSTED&amp;symbol=MSFT&amp;outputsize=full&amp;apikey=1A4999U3ZOOGFQQZ&amp;datatype=csv</a></p>\n\n<p>What would the PERL code look like to run this URL Loop?  Or is there a better scripting language to use to accomplish this?</p>\n\n<p>Thanks for your help.</p>\n\n<p>Just starting on this one</p>\n"}, {"tags": ["perl", "autoload"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1562187203, "post_id": 56877400, "comment_id": 100304108, "body": "Also consider using <a href=\"https://metacpan.org/pod/Module::Runtime\" rel=\"nofollow noreferrer\">Module::Runtime</a> if you are going to install something from CPAN as it does not suffer <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=106128\" rel=\"nofollow noreferrer\">the same design flaw</a>, and just call the import method yourself if you need it -- you will often need imports at compile time: <code>BEGIN { require_module $module; $module-&gt;import }</code> (this is of course incompatible with deciding whether to load the module at runtime)"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1562185727, "creation_date": 1562185727, "answer_id": 56877526, "question_id": 56877400, "link": "https://stackoverflow.com/questions/56877400/perl-moduleload-not-working-as-expected/56877526#56877526", "title": "Perl Module::Load not working as expected", "body": "<p>Version 0.24 of Module::Load didn't have the subroutine <code>autoload</code> (see <a href=\"https://metacpan.org/pod/release/BINGOS/Module-Load-0.24/lib/Module/Load.pm\" rel=\"nofollow noreferrer\">here</a>). Try using just <code>load</code> or try upgrading Module::Load.</p>\n"}], "owner": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 56877526, "answer_count": 1, "score": 0, "last_activity_date": 1562185727, "creation_date": 1562185152, "question_id": 56877400, "link": "https://stackoverflow.com/questions/56877400/perl-moduleload-not-working-as-expected", "title": "Perl Module::Load not working as expected", "body": "<p>Reading the docs for <a href=\"https://metacpan.org/pod/Module::Load#SYNOPSIS\" rel=\"nofollow noreferrer\">Module::Load</a>, I'm trying to reproduce the results shown in the Synopsis section.  But when I run:</p>\n\n<pre><code>perl -we 'use Module::Load;autoload Data::Dumper'\n</code></pre>\n\n<p>It complains:</p>\n\n<pre><code>Can't locate object method \"autoload\" via package \"Data::Dumper\" (perhaps you forgot to load \"Data::Dumper\"?) at -e line 1.\n</code></pre>\n\n<p>Setup:</p>\n\n<ul>\n<li>CentOS 7</li>\n<li>Perl 5.16.3</li>\n<li>Module::Load 0.24</li>\n<li>Data::Dumper 2.145</li>\n</ul>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "edited": false, "score": 0, "creation_date": 1562186317, "post_id": 56876827, "comment_id": 100303768, "body": "Try to find if there is an lwp ua object like <code>$s-&gt;ua</code> or something like that in the source code, that&#39;s probably your only chance or see the documentation of how LWP::UA works with this component"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11736091, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HK6F4IGJvXg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdBYVc3LbJBuUSzDF_rFd8R9nH33g/photo.jpg?sz=128", "display_name": "John Helms", "link": "https://stackoverflow.com/users/11736091/john-helms"}, "edited": false, "score": 0, "creation_date": 1562250349, "post_id": 56884624, "comment_id": 100326781, "body": "If that works, it would be awesome!  I&#39;ll test when I get back into the office.  Happy 4th, everybody!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1, "user_id": 11736091, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HK6F4IGJvXg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdBYVc3LbJBuUSzDF_rFd8R9nH33g/photo.jpg?sz=128", "display_name": "John Helms", "link": "https://stackoverflow.com/users/11736091/john-helms"}, "edited": false, "score": 0, "creation_date": 1562250973, "post_id": 56884624, "comment_id": 100327117, "body": "@JohnHelms: 4th what?"}, {"owner": {"reputation": 1, "user_id": 11736091, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HK6F4IGJvXg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdBYVc3LbJBuUSzDF_rFd8R9nH33g/photo.jpg?sz=128", "display_name": "John Helms", "link": "https://stackoverflow.com/users/11736091/john-helms"}, "edited": false, "score": 0, "creation_date": 1562333444, "post_id": 56884624, "comment_id": 100352810, "body": "Sorry, 4th of July.  American here."}, {"owner": {"reputation": 1, "user_id": 11736091, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HK6F4IGJvXg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdBYVc3LbJBuUSzDF_rFd8R9nH33g/photo.jpg?sz=128", "display_name": "John Helms", "link": "https://stackoverflow.com/users/11736091/john-helms"}, "edited": false, "score": 0, "creation_date": 1562335060, "post_id": 56884624, "comment_id": 100353602, "body": "Well, I have some bad news to report.  Setting that environment variable does not seem to force proxy use.  I&#39;m simulating the firewall config with an ACL on the end point, and I get the same 503 error with &amp; without the proxy variables:"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1, "user_id": 11736091, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HK6F4IGJvXg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdBYVc3LbJBuUSzDF_rFd8R9nH33g/photo.jpg?sz=128", "display_name": "John Helms", "link": "https://stackoverflow.com/users/11736091/john-helms"}, "edited": false, "score": 0, "creation_date": 1562598982, "post_id": 56884624, "comment_id": 100416203, "body": "@JohnHelms: Which version of LWP::UserAgent are you using? The code to automatically run <code>env_proxy()</code> was added in version 6.03. I got that info from the <a href=\"https://metacpan.org/source/OALDERS/libwww-perl-6.39/Changes\" rel=\"nofollow noreferrer\">Changes file</a>."}, {"owner": {"reputation": 1, "user_id": 11736091, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HK6F4IGJvXg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdBYVc3LbJBuUSzDF_rFd8R9nH33g/photo.jpg?sz=128", "display_name": "John Helms", "link": "https://stackoverflow.com/users/11736091/john-helms"}, "edited": false, "score": 0, "creation_date": 1562701169, "post_id": 56884624, "comment_id": 100457065, "body": "Thanks for checking back, Dave.  Looking through the modules included in the SDK, I&#39;m not even sure that it is using LWP::UserAgent.  The module that establishes the connection uses Socket, IO::Socket, and LWP::UserAgent, and it requires Net::SSLeay and IO::Select.  And it doesn&#39;t even seem to call UserAgent at all.  If I had to guess, I&#39;d say that it&#39;s using IO::Socket to make the connection.  And IO::Socket has no mention of a proxy.  I think I might be SOL here."}, {"owner": {"reputation": 1, "user_id": 11736091, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HK6F4IGJvXg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdBYVc3LbJBuUSzDF_rFd8R9nH33g/photo.jpg?sz=128", "display_name": "John Helms", "link": "https://stackoverflow.com/users/11736091/john-helms"}, "edited": false, "score": 0, "creation_date": 1562941387, "post_id": 56884624, "comment_id": 100550525, "body": "Giving this a shot: <a href=\"https://stackoverflow.com/questions/18610080/https-request-from-perl-over-proxy-with-iosocket-only\" title=\"https request from perl over proxy with iosocket only\">stackoverflow.com/questions/18610080/&hellip;</a>"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1562231946, "creation_date": 1562231946, "answer_id": 56884624, "question_id": 56876827, "link": "https://stackoverflow.com/questions/56876827/force-http-proxy-use-with-module-that-already-uses-lwpuseragent/56884624#56884624", "title": "Force http proxy use with module that already uses LWP::UserAgent?", "body": "<p>You've worked out that you need to call <code>env_proxy()</code> on the UserAgent object. But it seems that <code>NaServer</code> isn't a subclass of <code>LWP::UserAgent</code>, so you can't call the method on that class as you've tried in your example code.</p>\n\n<p>Let's look at <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow noreferrer\">the documentation for <code>LWP::UserAgent</code></a> for clues. The <a href=\"https://metacpan.org/pod/LWP::UserAgent#new\" rel=\"nofollow noreferrer\">section for <code>new()</code></a> has some interesting text.</p>\n\n<blockquote>\n  <p>If <code>env_proxy</code> isn't provided, the <code>PERL_LWP_ENV_PROXY</code> environment variable controls if \"env_proxy\" in LWP::UserAgent is called during initialization.</p>\n</blockquote>\n\n<p>It looks to me like this feature is provided for exactly this situation. If you don't have access to the constructor for the object, you can use this environment variable to control the use of proxies. The code in the constructor looks like this:</p>\n\n<pre><code>my $env_proxy = exists $cnf{env_proxy} ? delete $cnf{env_proxy} : $ENV{PERL_LWP_ENV_PROXY};\n</code></pre>\n\n<p>And, later,</p>\n\n<pre><code>$self-&gt;env_proxy if $env_proxy;\n</code></pre>\n\n<p>So the fix seems to be to add:</p>\n\n<pre><code>$ENV{PERL_LWP_ENV_PROXY} = 1;\n</code></pre>\n\n<p>to the top of your code.</p>\n\n<p>(N.B. I haven't had the time to test this.)</p>\n"}], "owner": {"reputation": 1, "user_id": 11736091, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HK6F4IGJvXg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdBYVc3LbJBuUSzDF_rFd8R9nH33g/photo.jpg?sz=128", "display_name": "John Helms", "link": "https://stackoverflow.com/users/11736091/john-helms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562231946, "creation_date": 1562182262, "question_id": 56876827, "link": "https://stackoverflow.com/questions/56876827/force-http-proxy-use-with-module-that-already-uses-lwpuseragent", "title": "Force http proxy use with module that already uses LWP::UserAgent?", "body": "<p>I would like to use a proxy server in conjunction with a third party SDK, but the SDK uses LWP::UserAgent internally and does not expose any proxy settings in its API.  I've tried setting an appropriate environment variable, but the module doesn't seem to recognize it.  Is there some way around this (without modifying the module itself)?</p>\n\n<pre><code>$ENV{HTTPS_PROXY} = 'http://$proxyip:$proxyport';\n\nmy $s = NaServer-&gt;new ($filer, 1, 20);\n$s-&gt;set_style(LOGIN);\n$s-&gt;set_transport_type(HTTPS);\n$s-&gt;set_server_type(FILER);\n$s-&gt;set_port(443);\n$s-&gt;set_admin_user($user, $pass);\n$s-&gt;env_proxy;\n</code></pre>\n\n<p>[john0839@478261-apps ~]$ ./netapp_command_proxy.pl filerip myuser mypass\nNo definition for API env-proxy found at netapp-manageability-sdk-9.4/lib/perl/NetApp/OntapClusterAPI.pm line 109445.</p>\n"}, {"tags": ["perl", "environment-variables", "conda", "environment", "conda-build"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1562192694, "post_id": 56875121, "comment_id": 100305739, "body": "How did you install the perl 5.26.2? Which scripts are you running? How are you running them?"}, {"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1562251584, "post_id": 56875121, "comment_id": 100327417, "body": "Perl installation : In the meta.yaml, I have <code>-perl</code> in my requirements <code>run&#47;host</code> field.  I run a test located in the t/ folder of my perl module. And I call it by running : <code>perl &lt;path_to_my_script.t&gt;</code>.  PS : I&#39;m gonna edit my question to add the build.sh and the meta.yaml file :)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1562255759, "post_id": 56875121, "comment_id": 100329373, "body": "Thanks for the update. I have not used <code>conda</code> before, but I would like to try it out. Can I download the conda package that you have created from somewhere? Then I can try install it on my machine"}, {"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1562256963, "post_id": 56875121, "comment_id": 100329811, "body": "I would have love to, but it&#39;s a perl module from my company. I can&#39;t share it to anyone..."}], "answers": [{"comments": [{"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 1, "creation_date": 1562338254, "post_id": 56898953, "comment_id": 100355228, "body": "Hey, Thank you for the time you take to help me with this issue. Your answer is very helpful ! I&#39;ll work around it to make my Perl module works."}, {"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 0, "creation_date": 1562615786, "post_id": 56898953, "comment_id": 100423571, "body": "I&#39;m struggling to understand the <code>path : ..&#47;src</code>. I keep having an error like saying it cannot copy the content of my perl module. I tried to follow your example. I don&#39;t have this issue in my situation though because the source comes from GitHub :) However I still cannot make it work and I try to reproduce your little tutorial but it seems that you put the path of the perl module relative to the recipe folder right ?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 0, "creation_date": 1562628229, "post_id": 56898953, "comment_id": 100427135, "body": "By using <code>path: ..&#47;src</code> I avoid having the source incorporated in the generated conda package. If I instead had the <code>src</code> folder in the same folder as <code>build.sh</code>, and then used <code>path: src</code> in <code>meta.yaml</code>, <code>conda-build</code> would have included the <code>src</code> folder in <code>info&#47;recipe</code> in the generated package."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 0, "creation_date": 1562669384, "post_id": 56898953, "comment_id": 100440345, "body": "@AntMau I have updated my answer to include installation from Anaconda Cloud. Now you could test my package using <code>conda install -c hakonhagland perl-hello3</code> if you like!"}, {"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 0, "creation_date": 1563475019, "post_id": 56898953, "comment_id": 100722619, "body": "Hello, I come back to you again. I followed your tutorial to install the package from scratch. I had been able to do it but I can&#39;t locate <code>Data::Dumper in @INC</code>. First if in the build.sh I have <code>perl ${PREFIX}&#47;bin&#47;cpanm Data::Dump</code>, the build fails saying that the file <code>cpanm</code> doesn&#39;t exist. I looked and effectively I have a <code>cpan</code> script but not a <code>cpanm</code> script. The build is working tough if I have instead <code>perl ${PREFIX}&#47;bin&#47;cpan Data::Dump</code> but after that if I try to test the module by running <code>$ perl -E &#39;use My::Module; hello&#39;</code>I have this error : <code>Can&#39;t locate Data&#47;Dump.pm in @INC</code>"}, {"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 0, "creation_date": 1563475277, "post_id": 56898953, "comment_id": 100722718, "body": "The module isn&#39;t installed I guess. The full error message is (I didn&#39;t have enough characters in the last comment) : <code>Can&#39;t locate Data&#47;Dump.pm in @INC (you may need to install the Data::Dump module) (@INC contains: &#47;home&#47;antoine&#47;anaconda2&#47;envs&#47;testPerlHello&#47;lib&#47;site_perl&#47;5.2&zwnj;&#8203;6.2&#47;x86_64-linux-thr&zwnj;&#8203;ead-multi &#47;home&#47;antoine&#47;anaconda2&#47;envs&#47;testPerlHello&#47;lib&#47;site_perl&#47;5.2&zwnj;&#8203;6.2 &#47;home&#47;antoine&#47;anaconda2&#47;envs&#47;testPerlHello&#47;lib&#47;5.26.2&#47;x86_64&zwnj;&#8203;-linux-thread-multi &#47;home&#47;antoine&#47;anaconda2&#47;envs&#47;testPerlHello&#47;lib&#47;5.26.2 .) at &#47;home&#47;antoine&#47;anaconda2&#47;envs&#47;testPerlHello&#47;lib&#47;site_perl&#47;5.2&zwnj;&#8203;6.2&#47;My&#47;Module.pm line 10.</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 0, "creation_date": 1563478929, "post_id": 56898953, "comment_id": 100724208, "body": "<i>&quot;I had been able to do it but I can&#39;t locate Data::Dumper in @INC&quot;</i> : Note: it is <code>Data::Dump</code> not <code>Data::Dumper</code>..."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 0, "creation_date": 1563479091, "post_id": 56898953, "comment_id": 100724281, "body": "Hi AntMau! <i>&quot;the build fails saying that the file cpanm doesn&#39;t exist&quot;</i> : The point is that the previous command in <code>build.sh</code>, i.e., this command  <code>PERL_MM_USE_DEFAULT=1 cpan App::cpanminus</code> installs the <code>cpanm</code> command in the <code>bin</code> folder, so it should exist if that command succeeded"}, {"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 0, "creation_date": 1563480288, "post_id": 56898953, "comment_id": 100724739, "body": "Yes indeed I can&#39;t find <code>Data::Dump</code> not <code>Data::Dumper</code>. I see during the build an ?error? =&gt; <code>Running install for module &#39;App::cpanminus&#39; Checksum for &#47;home&#47;antoine&#47;.cpan&#47;sources&#47;authors&#47;id&#47;M&#47;MI&#47;MIYAGAWA&#47;App-cpa&zwnj;&#8203;nminus-1.7044.tar.gz ok &#39;YAML&#39; not installed, will not store persistent state Configuring M&#47;MI&#47;MIYAGAWA&#47;App-cpanminus-1.7044.tar.gz with Makefile.PL Checking if your kit is complete... Looks good Generating a Unix-style Makefile Writing Makefile for App::cpanminus Writing MYMETA.yml and MYMETA.json</code>"}, {"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 0, "creation_date": 1563480298, "post_id": 56898953, "comment_id": 100724744, "body": "And then =&gt; <code>MIYAGAWA&#47;App-cpanminus-1.7044.tar.gz   &#47;.autofs$PREFIX&#47;bin&#47;perl Makefile.PL -- OK Running make for M&#47;MI&#47;MIYAGAWA&#47;App-cpanminus-1.7044.tar.gz   MIYAGAWA&#47;App-cpanminus-1.7044.tar.gz   &#47;home&#47;antoine&#47;anaconda2&#47;conda-bld&#47;perl-hello3_1563296734539&#47;&zwnj;&#8203;_h_env_placehold_pla&zwnj;&#8203;cehold_placehold_pla&zwnj;&#8203;cehold_placehold_pla&zwnj;&#8203;cehold_placehold_pla&zwnj;&#8203;cehold_placehold_pla&zwnj;&#8203;cehold_placehold_pla&zwnj;&#8203;cehold_placehold_pla&zwnj;&#8203;cehold_placehold_pla&zwnj;&#8203;cehold_placehold_pla&zwnj;&#8203;cehold_placehol&#47;bin&#47;&zwnj;&#8203;make -- NOT OK</code>"}, {"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 0, "creation_date": 1563480336, "post_id": 56898953, "comment_id": 100724756, "body": "It seems that make isn&#39;t find ? Then effectively the installation of cpanminus isn&#39;t complete ? Btw I have the same ?error? for the module Data::Dump"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 0, "creation_date": 1563480813, "post_id": 56898953, "comment_id": 100724954, "body": "Can you send me the <code>build.sh</code> script you are using? My email is in my profile. Then I will have a look at it"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1562669268, "last_edit_date": 1562669268, "creation_date": 1562313674, "answer_id": 56898953, "question_id": 56875121, "link": "https://stackoverflow.com/questions/56875121/updating-the-inc-variable-during-installation-of-a-conda-package/56898953#56898953", "title": "Updating the @INC variable during installation of a conda package", "body": "<p>Here is a simple example of how to create a conda package that installs a Perl module (which depends on a CPAN module) that might help you solve your issue:</p>\n\n<h2>Installing miniconda on Linux</h2>\n\n<pre><code>$ wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh\n$ bash Miniconda3-latest-Linux-x86_64.sh\n# NOTE: I answered \"yes\" on the question:\n#   \"Do you wish the installer to initialize Miniconda3 ?\" in the\n#   previous command. This will modify ~/.bashrc\n$ source ~/.bashrc # activates base environment\n# Next command: Do not automatically activate conda for every terminal window,\n# instead run \"conda activate\" from a given terminal window to\n# activate locally. The following command also creates ~/.condarc\n$ conda config --set auto_activate_base False\n</code></pre>\n\n<h2>Creating the package:</h2>\n\n<p><strong>perl-hello/meta.yaml</strong>:</p>\n\n<pre><code>package:\n  name: perl-hello3\n  version: \"1.0\"\n\nsource:\n  path: ../src # NOTE: if you had put \"src\" in same folder as \"meta.yaml\", \n               # conda-build would have include the src folder in info/recipe in \n               # the generated package. It is not necessary to include  the \n               # source code in the generated package.\n\nrequirements:\n  build:\n    - perl &gt;= 5.22\n    - make\n\n  run:\n    - perl &gt;= 5.22\n\nabout:\n  license: Artistic\n  summary: Simple perl function\n</code></pre>\n\n<p><strong>../src/</strong>:</p>\n\n<pre><code>$ tree ../src\n../src\n\u251c\u2500\u2500 lib\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 My\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 Module.pm\n\u2514\u2500\u2500 Makefile.PL\n</code></pre>\n\n<p><strong>../src/Makefile.PL</strong>:</p>\n\n<pre><code>use utf8;\nuse ExtUtils::MakeMaker;\n\nWriteMakefile(\n    MIN_PERL_VERSION =&gt; 5.022000,\n    NAME             =&gt; 'My::Module',\n    VERSION_FROM     =&gt; 'lib/My/Module.pm',\n    PREREQ_PM        =&gt;\n    {\n        'ExtUtils::MakeMaker' =&gt; '7.12',\n        'Data::Dump'          =&gt; 0,\n    },\n    ABSTRACT_FROM    =&gt; 'lib/My/Module.pm',\n    AUTHOR           =&gt; 'H\u00e5kon H\u00e6gland &lt;hakon.hagland@gmail.com&gt;',\n    LICENSE          =&gt; 'perl',\n);\n</code></pre>\n\n<p><strong>../src/lib/My/Module.pm</strong>:</p>\n\n<pre><code>package My::Module;\nour $VERSION = 0.01;\nuse strict;\nuse warnings;\nuse Exporter qw(import);\n\nour @EXPORT = qw(hello);\nour @EXPORT_OK = @EXPORT;\n\nuse Data::Dump;\nsub hello {\n    print \"Hello world!\\n\";\n    my $str = \"Testing Perl module Data::Dump\";\n    dd $str;\n}\n1;\n</code></pre>\n\n<p><strong>build.sh</strong>:</p>\n\n<pre><code># PERL_MM_USE_DEFAULT=1  -&gt; automatically answer \"yes\" on config questions\nPERL_MM_USE_DEFAULT=1 cpan App::cpanminus\nperl ${PREFIX}/bin/cpanm Data::Dump\nperl Makefile.PL INSTALLDIRS=site\nmake\nmake install\n</code></pre>\n\n<p>Note that I ran <code>cpanm</code> using <code>perl ${PREFIX}/bin/cpanm</code>. I was not able to simply run it as <code>cpanm</code>, see <a href=\"https://github.com/conda/conda-build/issues/3592\" rel=\"nofollow noreferrer\">Can you rely on the shebang of an installed command during build?</a> for more information.</p>\n\n<h2>Build the package</h2>\n\n<pre><code>$ conda-build .\n</code></pre>\n\n<p>(Take a note of the generated output, and determine the path of the generated package. In my case the path name was:</p>\n\n<pre><code>/home/hakon/miniconda3/conda-bld/linux-64/perl-hello3-1.0-pl526_0.tar.bz2\n</code></pre>\n\n<h2>Uploading the package to the anaconda server</h2>\n\n<ul>\n<li><p>Register a new user at <a href=\"https://anaconda.org/account/register\" rel=\"nofollow noreferrer\">Anaconda Cloud</a></p></li>\n<li><p>Install the client</p>\n\n<pre><code>$ conda install anaconda-client\n</code></pre></li>\n<li><p>Login to your account:</p>\n\n<pre><code>$ anaconda login\n</code></pre></li>\n<li><p>Upload the generated package:</p>\n\n<pre><code>$ anaconda upload /home/hakon/miniconda3/conda-bld/linux-64/perl-hello3-1.0-pl526_0.tar.bz2\n</code></pre></li>\n</ul>\n\n<h1>Testing the package (can be done from any linux machine):</h1>\n\n<ul>\n<li><p>Create a new enviroment:</p>\n\n<pre><code> $ conda create --name perltest\n $ conda activate perltest\n</code></pre></li>\n<li><p>Install the package in the new environment:</p>\n\n<pre><code> $ conda install -c hakonhagland perl-hello3 \n # Alternatively: You can test the package locally before uploading with\n #   \"conda install --use-local perl-hello3\"\n</code></pre></li>\n<li><p>Test the package:</p>\n\n<pre><code> $ perl -E 'use My::Module; hello'\n Hello world!\n \"Testing Perl module Data::Dump\"\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 675, "favorite_count": 1, "accepted_answer_id": 56898953, "answer_count": 1, "score": 2, "last_activity_date": 1562669268, "creation_date": 1562174055, "last_edit_date": 1562265321, "question_id": 56875121, "link": "https://stackoverflow.com/questions/56875121/updating-the-inc-variable-during-installation-of-a-conda-package", "title": "Updating the @INC variable during installation of a conda package", "body": "<p>I am trying to install a conda package of a Perl module. So far I'm able to create the package using <code>conda-build</code>. For that I have a recipe containing a <code>build.sh</code> and a <code>meta.yaml</code> files.</p>\n\n<p>I then install it using <code>conda-install</code> in a new environment, I'd like to be able able to run some Perl scripts located in the Perl module I just installed.</p>\n\n<p>All those steps work well but when I'm running some scripts I have an error saying :</p>\n\n<p><code>Can't locate PMP/util.pm in @INC (you may need to install the PMP::util module) (@INC contains: /.autofs/home/antoine/anaconda2/envs/testCustomChannel/lib/site_perl/5.26.2/x86_64-linux-thread-multi /.autofs/home/antoine/anaconda2/envs/testCustomChannel/lib/site_perl/5.26.2 /.autofs/home/antoine/anaconda2/envs/testCustomChannel/lib/5.26.2/x86_64-linux-thread-multi /.autofs/home/antoine/anaconda2/envs/testCustomChannel/lib/5.26.2 .)</code></p>\n\n<p>As you can see it seems that some module of my Perl module are not recognized when I execute Perl. I know that to fix this issue I can modify the @INC variable and add the bin/ to the PATH and the lib/ to the PERL5LIB but I need to automatize this process during the installation of the module.</p>\n\n<p>I don't really know where I should modify the environment variable. During the creation of the package by adding something in the <code>build.sh</code> for example ? Or should I manage that during the installation and if so, how could I do that ?</p>\n\n<p>Any suggestions would be greatly appreciated,</p>\n\n<p>Thanks</p>\n\n<p><strong>Edit :</strong></p>\n\n<p><strong>meta.yaml =></strong></p>\n\n<pre><code>{% set name = \"module_name\" %}\n{% set version = \"0.8.3\" %}\n\npackage:\n  name: \"{{ name }}\"\n  version: \"{{ version }}\"\n\nsource:\n  git_url: ssh://git@adress/bspcore/perl_module.git\n\nbuild:\n  number: 0\n\nrequirements:\n  host:\n    - perl\n    - perl-extutils-makemaker\n  run:\n    - perl\n\nabout:\n  home: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n  license: xxx\n  license_family: xxx\n  summary: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n</code></pre>\n\n<p><strong>Build.sh =></strong></p>\n\n<pre><code>#!/bin/bash\nif [ -f Build.PL ]; then\n    perl Build.PL\n    perl ./Build\n    # Make sure this goes in site\n    perl ./Build install --installdirs site\nelif [ -f Makefile.PL ]; then\n    # Make sure this goes in site\n    perl Makefile.PL INSTALLDIRS=site\n    make\n    make install\nelse\n    echo 'Unable to find Build.PL or Makefile.PL. You need to modify build.sh.'\n    exit 1\nfi\n\nchmod u+rwx $PREFIX/bin/*\necho \"${PREFIX}\"\n</code></pre>\n\n<p><strong>Edit 2 :</strong></p>\n\n<p>Another edit that could help you guys understand better my situation. I just realized that when I build the package the lib folder of my perl module in which I have <code>PMP::util</code> lives under <code>lib/site_perl/5.26.0/Perl_Module</code>. I'm pretty sure that if I'm able to install it directly under the <code>lib/</code> folder it will resolve this issue. However I'm not sure how to modify the build.sh file to modify the place where we build the perl module. </p>\n"}, {"tags": ["perl", "perlguts"], "comments": [{"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1562171202, "post_id": 56874215, "comment_id": 100297318, "body": "Are you having a problem with memory usage? If so, there might be other strategies to look at first before worrying about internal storage representations."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1562200002, "post_id": 56874215, "comment_id": 100307102, "body": "uh, this is the least of Perl&#39;s &quot;memory waste&quot;. You probably think a sub&#39;s scalars get deallocated when the sub is exited, don&#39;t you?"}, {"owner": {"reputation": 1973, "user_id": 1716999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06a58106c9a1013f1ca791c46579d664?s=128&d=identicon&r=PG", "display_name": "rubystallion", "link": "https://stackoverflow.com/users/1716999/rubystallion"}, "reply_to_user": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1562225334, "post_id": 56874215, "comment_id": 100313059, "body": "@AndyLester What strategies would that be? I have input files that can be several GB in size and arrange data from multiple input files into CSVs"}, {"owner": {"reputation": 1973, "user_id": 1716999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06a58106c9a1013f1ca791c46579d664?s=128&d=identicon&r=PG", "display_name": "rubystallion", "link": "https://stackoverflow.com/users/1716999/rubystallion"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1562225419, "post_id": 56874215, "comment_id": 100313104, "body": "@ikegami Yes, I would have thought so, or at least marked for garbage collection. What constraints keep Perl from doing that?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1562229638, "post_id": 56874215, "comment_id": 100315225, "body": "@rubystallion, To speed things up. Scalars can contain up to three memory blocks. Allocating and deallocating every time a sub is called would slow things down."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1562237062, "post_id": 56874215, "comment_id": 100319535, "body": "See also <a href=\"https://metacpan.org/pod/Packed::Array\" rel=\"nofollow noreferrer\">Packed::Array</a>. Another alternative that could save memory would be using <a href=\"https://perldoc.perl.org/functions/pack.html\" rel=\"nofollow noreferrer\">pack</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1562276442, "post_id": 56874215, "comment_id": 100335140, "body": "Maybe also PDL?"}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1562291210, "post_id": 56874215, "comment_id": 100337282, "body": "@rubystallion It&#39;s hard to say what to suggest without knowing anything about what it is you&#39;re trying to do."}], "answers": [{"comments": [{"owner": {"reputation": 1973, "user_id": 1716999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06a58106c9a1013f1ca791c46579d664?s=128&d=identicon&r=PG", "display_name": "rubystallion", "link": "https://stackoverflow.com/users/1716999/rubystallion"}, "edited": false, "score": 0, "creation_date": 1562224780, "post_id": 56874356, "comment_id": 100312799, "body": "Is that maybe dependent on the interpreter version? I tried your approach before posting on v5.26.1 with the command <code>perl -MDevel::Peek -MDevel::Size=size -E &#39;$a=&quot;1234567890&quot;;$b=1234567890;$a=0+$a;say size($a);say size($b);Dump($a);Dump($b)&#39;</code> and got the output (sorry that this doesn&#39;t format correctly)      48     24     SV = PVIV(0x55555597ce20) at 0x5555559811e8       REFCNT = 1       FLAGS = (IOK,pIOK)       IV = 1234567890       PV = 0     SV = IV(0x555555981130) at 0x555555981140       REFCNT = 1       FLAGS = (IOK,pIOK)       IV = 1234567890"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1973, "user_id": 1716999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06a58106c9a1013f1ca791c46579d664?s=128&d=identicon&r=PG", "display_name": "rubystallion", "link": "https://stackoverflow.com/users/1716999/rubystallion"}, "edited": false, "score": 1, "creation_date": 1562228486, "post_id": 56874356, "comment_id": 100314632, "body": "@rubystallion, That&#39;s because you copied the newly created <code>SVt_IV</code> scalar created by <code>0+$a</code> into the existing <code>SVt_PVIV</code> scalar."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 4, "last_activity_date": 1562176089, "last_edit_date": 1562176089, "creation_date": 1562170656, "answer_id": 56874356, "question_id": 56874215, "link": "https://stackoverflow.com/questions/56874215/how-can-i-make-perl-store-integers-as-numbers-instead-of-strings/56874356#56874356", "title": "How can I make Perl store integers as numbers instead of strings?", "body": "<p>Apply the \"numify operator\" <code>0+</code> to them.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Devel::Peek;\n\n# PVIVs (strings that were used in a numeric context)\nmy @values = grep 0+$_, qw/123 234/;\nmy %hash = ( \"key\" =&gt; [ @values ] );\nDump \\%hash;\n# make them just IVs\n%hash = ( \"key\" =&gt; [ map 0+$_, @values ] );\nDump \\%hash;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>SV = IV(0x7fcaf401d9d0) at 0x7fcaf401d9e0\n  REFCNT = 1\n  FLAGS = (TEMP,ROK)\n  RV = 0x7fcaf4025290\n  SV = PVHV(0x7fcaf400ac60) at 0x7fcaf4025290\n    REFCNT = 2\n    FLAGS = (SHAREKEYS)\n    ARRAY = 0x7fcaf3c1ad00  (0:7, 1:1)\n    hash quality = 100.0%\n    KEYS = 1\n    FILL = 1\n    MAX = 7\n    Elt \"key\" HASH = 0x11e2db55\n    SV = IV(0x7fcaf401d928) at 0x7fcaf401d938\n      REFCNT = 1\n      FLAGS = (ROK)\n      RV = 0x7fcaf401d908\n      SV = PVAV(0x7fcaf4005c58) at 0x7fcaf401d908\n        REFCNT = 1\n        FLAGS = ()\n        ARRAY = 0x7fcaf3c04550\n        FILL = 1\n        MAX = 1\n        FLAGS = (REAL)\n        Elt No. 0\n        SV = PVIV(0x7fcaf4021080) at 0x7fcaf401d920\n          REFCNT = 1\n          FLAGS = (IOK,POK,IsCOW,pIOK,pPOK)\n          IV = 123\n          PV = 0x7fcaf3c04900 \"123\"\\0\n          CUR = 3\n          LEN = 10\n          COW_REFCNT = 2\n        Elt No. 1\n        SV = PVIV(0x7fcaf4021098) at 0x7fcaf401d950\n          REFCNT = 1\n          FLAGS = (IOK,POK,IsCOW,pIOK,pPOK)\n          IV = 234\n          PV = 0x7fcaf3c0e2b0 \"234\"\\0\n          CUR = 3\n          LEN = 10\n          COW_REFCNT = 2\nSV = IV(0x7fcaf401d9d0) at 0x7fcaf401d9e0\n  REFCNT = 1\n  FLAGS = (TEMP,ROK)\n  RV = 0x7fcaf4025290\n  SV = PVHV(0x7fcaf400ac60) at 0x7fcaf4025290\n    REFCNT = 2\n    FLAGS = (SHAREKEYS)\n    ARRAY = 0x7fcaf3c1ad00  (0:7, 1:1)\n    hash quality = 100.0%\n    KEYS = 1\n    FILL = 1\n    MAX = 7\n    Elt \"key\" HASH = 0x11e2db55\n    SV = IV(0x7fcaf40252f8) at 0x7fcaf4025308\n      REFCNT = 1\n      FLAGS = (ROK)\n      RV = 0x7fcaf401d9f8\n      SV = PVAV(0x7fcaf4005ca8) at 0x7fcaf401d9f8\n        REFCNT = 1\n        FLAGS = ()\n        ARRAY = 0x7fcaf3c0c6d0\n        FILL = 1\n        MAX = 1\n        FLAGS = (REAL)\n        Elt No. 0\n        SV = IV(0x7fcaf401da78) at 0x7fcaf401da88\n          REFCNT = 1\n          FLAGS = (IOK,pIOK)\n          IV = 123\n        Elt No. 1\n        SV = IV(0x7fcaf401da60) at 0x7fcaf401da70\n          REFCNT = 1\n          FLAGS = (IOK,pIOK)\n          IV = 234\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1562230896, "post_id": 56883907, "comment_id": 100315982, "body": "I thought <code>undef $s;</code> (as opposed to <code>$s = undef;</code>) would downgrade, but it doesn&#39;t."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1562233678, "post_id": 56883907, "comment_id": 100317663, "body": "Do you know why we get size == 24 out of number? A C int type is typically only 4 bytes, so what are the 20 extra bytes used for? E.g.: <code>perl -MDevel::Size=size -E &#39;$k = 1; say size $k&#39;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1562234525, "post_id": 56883907, "comment_id": 100318168, "body": "@H&#229;konH&#230;gland A 64-bit int would be 8 bytes. But this isn&#39;t an <code>int</code>; this is a scalar. And a scalar needs to contain info about the type of the values or contains. Also, there are many types of scalars (to save memory), and Perl needs to be able to upgrade from one type to another without invalidating pointers to the scalar. This is done by having a head which contains a pointer to an upgradeable body. So that&#39;s three ints/pointers, or 24 bytes. <a href=\"https://st.aticpan.org/source/RURBAN/illguts-0.49/index.html\" rel=\"nofollow noreferrer\">st.aticpan.org/source/RURBAN/illguts-0.49/index.html</a>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1562308374, "last_edit_date": 1562308374, "creation_date": 1562229754, "answer_id": 56883907, "question_id": 56874215, "link": "https://stackoverflow.com/questions/56874215/how-can-i-make-perl-store-integers-as-numbers-instead-of-strings/56883907#56883907", "title": "How can I make Perl store integers as numbers instead of strings?", "body": "<p>First of all, if you're trying to save memory at this level, Perl is probably not the tool for you. Perl wantonly \"wastes\" memory when it provides a speed benefit.</p>\n\n<pre><code>$ perl -e'\n   use feature qw( say );\n   use Devel::Size qw( size );\n\n   sub f {\n      my $x;\n      say size($x);\n      $x = \"x\" x 100;\n      say size($x);\n   }\n\n   f() for 1..2;\n'\n24\n134\n134\n134\n</code></pre>\n\n<hr>\n\n<p>Both <code>0+$scalar</code> and <code>int($scalar)</code> return a scalar of type <code>SVt_IV</code> or <code>SVt_NV</code>. Either of these will do.</p>\n\n<pre><code>$ perl -e'\n   use feature qw( say );\n   use Devel::Size qw( size );\n   my $x = 1234567890;\n   my $y = \"1234567890\";\n   say size($x);\n   say size($y);\n   say size($0+$y);\n   say size(int($y));\n'\n24\n44\n24\n24\n</code></pre>\n\n<hr>\n\n<p>It's not possible to downgrade an existing scalar, but you could replace it through \"aliasing\".</p>\n\n<pre><code>$ perl -e'\n   use feature qw( say );\n   use experimental qw( refaliasing );\n   use Devel::Size qw( size );\n   my $x = 1234567890;\n   my $y = \"1234567890\";\n   say size($x);\n   say size($y);\n   \\$y = \\(0+$y);\n   say size($y);\n'\n24\n44\n24\n</code></pre>\n"}], "owner": {"reputation": 1973, "user_id": 1716999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06a58106c9a1013f1ca791c46579d664?s=128&d=identicon&r=PG", "display_name": "rubystallion", "link": "https://stackoverflow.com/users/1716999/rubystallion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 56883907, "answer_count": 2, "score": 3, "last_activity_date": 1562308374, "creation_date": 1562170113, "last_edit_date": 1562171138, "question_id": 56874215, "link": "https://stackoverflow.com/questions/56874215/how-can-i-make-perl-store-integers-as-numbers-instead-of-strings", "title": "How can I make Perl store integers as numbers instead of strings?", "body": "<p>I'm parsing many numbers from a text file into hash entries consisting of a key and corresponding reference to array of values. Using Devel::Peek and Devel::Size I noticed that the string representation of the numbers is stored along in this data structure, which wastes memory. How can I rid the memory of these string representations (in other words, how can I turn a PVIV into an IV)?</p>\n"}, {"tags": ["perl", "ibm-mq"], "answers": [{"tags": [], "owner": {"reputation": 2891, "user_id": 5502306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gxj7w.jpg?s=128&g=1", "display_name": "chughts", "link": "https://stackoverflow.com/users/5502306/chughts"}, "is_accepted": false, "score": 1, "last_activity_date": 1562168109, "creation_date": 1562168109, "answer_id": 56873631, "question_id": 56872805, "link": "https://stackoverflow.com/questions/56872805/sharing-queue-manager-connection-among-threads/56873631#56873631", "title": "Sharing queue manager connection among threads", "body": "<p>Based on the other language bindings it would be </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>    my $coption = {\n                  'ChannelName'    =&gt; $channel,\n                  'TransportType'  =&gt; 'TCP',\n                  'ConnectionName' =&gt; $host,\n                  'Options' =&gt; MQCNO_HANDLE_SHARE_NO_BLOCK\n                  };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 293, "user_id": 6212907, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/CxA43.jpg?s=128&g=1", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/6212907/andr%c3%a9"}, "edited": false, "score": 0, "creation_date": 1562228079, "post_id": 56878720, "comment_id": 100314450, "body": "Thanks, this works. I can now open two connections from from two threads."}, {"owner": {"reputation": 6202, "user_id": 4042083, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/65742aa944f8372503bd71d44023ba96?s=128&d=identicon&r=PG", "display_name": "Morag Hughson", "link": "https://stackoverflow.com/users/4042083/morag-hughson"}, "reply_to_user": {"reputation": 293, "user_id": 6212907, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/CxA43.jpg?s=128&g=1", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/6212907/andr%c3%a9"}, "edited": false, "score": 0, "creation_date": 1562239239, "post_id": 56878720, "comment_id": 100320680, "body": "Happy to hear this solution worked for you. Please remember to accept the answer if you are happy with it (the tick beside the answer). Cheers!"}, {"owner": {"reputation": 6202, "user_id": 4042083, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/65742aa944f8372503bd71d44023ba96?s=128&d=identicon&r=PG", "display_name": "Morag Hughson", "link": "https://stackoverflow.com/users/4042083/morag-hughson"}, "reply_to_user": {"reputation": 293, "user_id": 6212907, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/CxA43.jpg?s=128&g=1", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/6212907/andr%c3%a9"}, "edited": false, "score": 1, "creation_date": 1562239282, "post_id": 56878720, "comment_id": 100320709, "body": "P.S. I have tried to contact the owners of the quoted doc to get it fixed."}], "tags": [], "owner": {"reputation": 6202, "user_id": 4042083, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/65742aa944f8372503bd71d44023ba96?s=128&d=identicon&r=PG", "display_name": "Morag Hughson", "link": "https://stackoverflow.com/users/4042083/morag-hughson"}, "is_accepted": true, "score": 3, "last_activity_date": 1562193451, "last_edit_date": 1592644375, "creation_date": 1562193451, "answer_id": 56878720, "question_id": 56872805, "link": "https://stackoverflow.com/questions/56872805/sharing-queue-manager-connection-among-threads/56878720#56878720", "title": "Sharing queue manager connection among threads", "body": "<p>I don't know Perl and I haven't used the Perl MQSeries interface, but reading the <a href=\"https://metacpan.org/pod/MQSeries#MQCONNX\" rel=\"nofollow noreferrer\">help here</a>, it says the following:-</p>\n<blockquote>\n<p>The $ConnectOpts value is a hash reference, with keys corresponding to the fields of the MQCO structure. This is an input value only.</p>\n<p>With the $ConnectOpts, two interior data structures can be provided: ClientConn and SSLConfig. These provide access to the MQCNO and MQSCO options.</p>\n</blockquote>\n<p>This is unfortunately not very helpful, since there is no such thing as an MQCO structure. I think it might mean MQCNO. Then later where it says ClientConn provides access to the MQCNO structure, I think it might mean the MQCD structure which is hung off the MQCNO structure (since that is certainly what the contents of ClientConn looks like).</p>\n<p>Your question distils down to &quot;where do I put MQCNO_* option flags?&quot; and I don't think the answer is to put them into the MQCD ClientConn structure as that is not where they are found in the native MQ API.</p>\n<p>Given that I don't know how to program in Perl, and just using my MQ expertise on this, here is what I think the code should look like. I apologise in advance if it doesn't compile, but I hope this will lead you to a solution. Please feel free to edit my answer if it's close, but not quite right due to my Perl inadequacies.</p>\n<pre><code>sub connectToQueuemanager\n{\n    my ($host, $queuemanager, $channel) = @_;\n\n    my $coption = {\n                  'ChannelName'    =&gt; $channel,\n                  'TransportType'  =&gt; 'TCP',\n                  'ConnectionName' =&gt; $host\n                  };\n       \n    my $compcode = 0;\n    my $compres  = 0;\n    my $hconn    = MQCONNX ($queuemanager, {'ClientConn' =&gt; $coption,\n                                            'Options' =&gt; MQCNO_HANDLE_SHARE_NO_BLOCK},\n                                            $compcode, $compres);\n}\n</code></pre>\n"}], "owner": {"reputation": 293, "user_id": 6212907, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/CxA43.jpg?s=128&g=1", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/6212907/andr%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 1, "accepted_answer_id": 56878720, "answer_count": 2, "score": 1, "last_activity_date": 1562193451, "creation_date": 1562165422, "question_id": 56872805, "link": "https://stackoverflow.com/questions/56872805/sharing-queue-manager-connection-among-threads", "title": "Sharing queue manager connection among threads", "body": "<p>I'm connecting to an IBM MQSeries server using the Perl MQClient::MQSeries module on a MQSeries 9 client and server installation on a CentOS 7 system.</p>\n\n<p>I connect to the queue manager from two threads using</p>\n\n<pre><code>sub connectToQueuemanager\n{\n    my ($host, $queuemanager, $channel) = @_;\n\n    my $coption = {\n                  'ChannelName'    =&gt; $channel,\n                  'TransportType'  =&gt; 'TCP',\n                  'ConnectionName' =&gt; $host\n                  };\n\n    my $compcode = 0;\n    my $compres  = 0;\n    my $hconn    = MQCONNX ($queuemanager, {'ClientConn' =&gt; $coption}, $compcode, $compres);\n}\n</code></pre>\n\n<p>This works fine in the first thread, but not in the second - there I get code 2002 (\"Application already connected.\") as result. This problem did not appear with MQSeries version 6.</p>\n\n<p>As of <a href=\"https://www.ibm.com/support/knowledgecenter/en/SSFKSJ_7.5.0/com.ibm.mq.dev.doc/q025940_.htm\" rel=\"nofollow noreferrer\">https://www.ibm.com/support/knowledgecenter/en/SSFKSJ_7.5.0/com.ibm.mq.dev.doc/q025940_.htm</a> this could be solved by setting MQCNO_HANDLE_SHARE_NO_BLOCK in the connection options. The Perl module MQSeries.pm lists this as one of the known constants, but I found no way to set this in the MQCONNX connection call.</p>\n\n<p>How can I set this option in the MQCONNX call?</p>\n"}, {"tags": ["windows", "perl", "unix", "directory", "copy"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1562152943, "post_id": 56868926, "comment_id": 100286521, "body": "We need a lot more information in order to be very much help here. you can&#39;t just copy a file from a Unix directory to a Windows directory without there being some kind of networking between the two systems. We&#39;d need details of that. If the Windows shared drive is available to the Unix system, then Unix will see the drive with a Unix-style path. What is that? Oh, and which system does this code run on?"}, {"owner": {"reputation": 4912, "user_id": 2633803, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/d29f5808f5d282556b182abc44dfb30d?s=128&d=identicon&r=PG", "display_name": "ChangeMyName", "link": "https://stackoverflow.com/users/2633803/changemyname"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1562153032, "post_id": 56868926, "comment_id": 100286564, "body": "@DaveCross Hi Dave, sorry for the missing links. I&#39;m new to Unix and Perl so not sure what kind of information would be useful. Let me try to implement them."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1562155416, "post_id": 56868926, "comment_id": 100287962, "body": "Oh, one other thing. And this might just be that you&#39;re not showing us all of your code. In the code we see, you define a subroutine called <code>TestCopyFile()</code> but you never call that subroutine. So when you say your program runs successfully, that might well be because your program doesn&#39;t do anything. It loads a module, defines a subroutine and then exits without running the subroutine."}], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 1, "last_activity_date": 1562163134, "creation_date": 1562163134, "answer_id": 56872049, "question_id": 56868926, "link": "https://stackoverflow.com/questions/56868926/how-to-copy-a-file-from-unix-directory-to-a-windows-directory-using-perl/56872049#56872049", "title": "How to copy a file from Unix directory to a Windows directory using Perl?", "body": "<p>Not a <a href=\"/questions/tagged/perl\" class=\"post-tag\" title=\"show questions tagged &#39;perl&#39;\" rel=\"tag\">perl</a> question, really. Windows shared drive means <a href=\"https://en.wikipedia.org/wiki/Server_Message_Block\" rel=\"nofollow noreferrer\">SMB</a>. You need to install <a href=\"/questions/tagged/samba\" class=\"post-tag\" title=\"show questions tagged &#39;samba&#39;\" rel=\"tag\">samba</a> and <a href=\"https://en.wikipedia.org/wiki/Mount_%28Unix%29\" rel=\"nofollow noreferrer\">mount</a> the shared drive into your local file system tree.</p>\n\n<p>Example: <code>mount.cifs //the-workstation/the-share ~/mnt/the-workstation/the-share -o rw,vers=3.0,sec=ntlmssp,credentials=$HOME/.smbcredentials,cache=strict,uid=1000,forceuid,gid=100,forcegid,addr=172.xxx.xxx.xxx,file_mode=0644,dir_mode=0755,nounix,serverino,rsize=1048576,wsize=1048576,actimeo=1</code></p>\n\n<p>If that's too difficult to figure out in the beginning, you can browse the network with <a href=\"https://kde.org/applications/utilities/smb4k/\" rel=\"nofollow noreferrer\">smb4k</a>. Once you have found the correct share, it will tell you the appropriate command for mounting.</p>\n"}], "owner": {"reputation": 4912, "user_id": 2633803, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/d29f5808f5d282556b182abc44dfb30d?s=128&d=identicon&r=PG", "display_name": "ChangeMyName", "link": "https://stackoverflow.com/users/2633803/changemyname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562163134, "creation_date": 1562152647, "last_edit_date": 1562152954, "question_id": 56868926, "link": "https://stackoverflow.com/questions/56868926/how-to-copy-a-file-from-unix-directory-to-a-windows-directory-using-perl", "title": "How to copy a file from Unix directory to a Windows directory using Perl?", "body": "<p>I'm new to Perl and trying to copy a CSV file from UNIX directory to a Windows shared drive, without using FTP.</p>\n\n<p>Below is my code, in which the source is a CSV file in UNIX directory, whilst <code>\"C:/New folder\"</code> has been created to receive the file. I put the new folder here as a placeholder as I haven't figured out which shared drive should be used.</p>\n\n<pre><code>use File::Copy;\n\nsub TestCopyFile\n{\n    my $source = \"/home/user/somefolder/somefile.csv\";\n    my $target = \"C:/New folder\";\n\n    copy($source, $target);\n}\n</code></pre>\n\n<p>So when I tried to run this from PuTTY, I've been told it is successful. However, I couldn't find the file in the target folder.</p>\n\n<p>Is there anything wrong with my code? Any suggestion is appreciated.</p>\n"}, {"tags": ["perl", "command-line"], "answers": [{"comments": [{"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "edited": false, "score": 1, "creation_date": 1562155369, "post_id": 56869116, "comment_id": 100287934, "body": "Hi @H&#229;kon H&#230;gland, this works wonderfully. :) Thanks so much."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1562153325, "creation_date": 1562153325, "answer_id": 56869116, "question_id": 56868228, "link": "https://stackoverflow.com/questions/56868228/perl-search-for-unique-lines-and-corresponding-file-names/56869116#56869116", "title": "Perl search for unique lines and corresponding file names", "body": "<p>You can save the name of the file from <a href=\"https://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\"><code>$ARGV</code></a>. Here is an example where I put the name of the file in another hash <code>%n</code>:</p>\n\n<pre><code>perl -nE 'chomp; $h{$_}++; $n{$_}=$ARGV; \n  END {say for map {\"$n{$_}: $_\"} grep { $h{$_} == 1 } keys %h}' a.txt b.txt\n</code></pre>\n"}], "owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 56869116, "answer_count": 1, "score": 0, "last_activity_date": 1562153325, "creation_date": 1562150271, "last_edit_date": 1562152373, "question_id": 56868228, "link": "https://stackoverflow.com/questions/56868228/perl-search-for-unique-lines-and-corresponding-file-names", "title": "Perl search for unique lines and corresponding file names", "body": "<p>I was  using <code>perl -ne '$h{$_}++; END {print grep { $h{$_} == 1 } %h}' &lt;a.txt &lt;b.txt</code> to get the unique lines of both files. While it's printing all the unique lines of these two files, I want it to print the corresponding name of the file which contains these unique lines.</p>\n\n<p>Is there a way in perl command to accomplish this? </p>\n\n<p>p.s.Please forgive my poor English. I hope I got myself clear.:)</p>\n"}, {"tags": ["perl", "download", "cgi"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1562165794, "post_id": 56867736, "comment_id": 100294464, "body": "When I set this up on a new installation of Ubuntu and made a couple of tiny tweaks (because I don&#39;t have a file called <code>&#47;home&#47;netcool&#47;Maintenance_File.csv</code>), it worked exactly as expected. The problem is, therefore, in something that you don&#39;t show us. What system are you running this on? Is anything being written to the web server error log?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1562166034, "post_id": 56867736, "comment_id": 100294606, "body": "I mean, there are all sorts of improvements to the code that I could suggest (why aren&#39;t you using <code>use strict</code> and <code>use warnings</code>? why load CGI.pm and then not use it? why are you writing CGI programs in 2019?) but, basically, this approach works."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11733745, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gLBciz242Qw/AAAAAAAAAAI/AAAAAAAAAAA/4wM6m731pZ4/photo.jpg?sz=128", "display_name": "Saurabh Jain", "link": "https://stackoverflow.com/users/11733745/saurabh-jain"}, "edited": false, "score": 0, "creation_date": 1562170423, "post_id": 56873222, "comment_id": 100296928, "body": "Thanks @Dave Cross for your comment. The code is working now accept for the below change.  print header(   -type =&gt; &#39;text/csv&#39;,   -content_disposition =&gt; &quot;attachment;filename=$filename&quot;, );"}, {"owner": {"reputation": 13, "user_id": 11733745, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gLBciz242Qw/AAAAAAAAAAI/AAAAAAAAAAA/4wM6m731pZ4/photo.jpg?sz=128", "display_name": "Saurabh Jain", "link": "https://stackoverflow.com/users/11733745/saurabh-jain"}, "edited": false, "score": 0, "creation_date": 1562170566, "post_id": 56873222, "comment_id": 100296999, "body": "Now if suppose I have give two textboxes on the webpage and based on the inputs ,need to form the filename and then go for download.The below code is not working"}, {"owner": {"reputation": 13, "user_id": 11733745, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gLBciz242Qw/AAAAAAAAAAI/AAAAAAAAAAA/4wM6m731pZ4/photo.jpg?sz=128", "display_name": "Saurabh Jain", "link": "https://stackoverflow.com/users/11733745/saurabh-jain"}, "edited": false, "score": 0, "creation_date": 1562170913, "post_id": 56873222, "comment_id": 100297171, "body": "my $files_location = &quot;/home/netcool&quot;; my $first = $cgi-&gt;param(&#39;first_name&#39;); my $last = $cgi-&gt;param(&#39;last_name&#39;); print &quot;Content-type:text/html\\n\\n&quot;; print &lt;&lt;EndOfHTML; &lt;html&gt;&lt;head&gt;&lt;title&gt;Generating Self-Referential URLs&lt;/title&gt;&lt;/head&gt; &lt;body&gt; &lt;FORM action=&quot;Maintenance_Data.cgi&quot; method=&quot;POST&quot;&gt; Circle: &lt;input type=&quot;text&quot; name=&quot;first_name&quot;&gt;  &lt;br&gt; Technology: &lt;input type=&quot;text&quot; name=&quot;last_name&quot;&gt; &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt; &lt;/FORM&gt; &lt;/body&gt; EndOfHTML my $filename = $first . &#39;_&#39; . $last .&#39;.csv&#39;;"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 13, "user_id": 11733745, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gLBciz242Qw/AAAAAAAAAAI/AAAAAAAAAAA/4wM6m731pZ4/photo.jpg?sz=128", "display_name": "Saurabh Jain", "link": "https://stackoverflow.com/users/11733745/saurabh-jain"}, "edited": false, "score": 0, "creation_date": 1562228975, "post_id": 56873222, "comment_id": 100314895, "body": "@SaurabhJain: If someone has answered your question then you should accept their answer. If you have a follow-up question, then please ask it in a new post."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1562167417, "last_edit_date": 1562167417, "creation_date": 1562166724, "answer_id": 56873222, "question_id": 56867736, "link": "https://stackoverflow.com/questions/56867736/file-is-empty-after-downloading/56873222#56873222", "title": "File is empty after downloading", "body": "<p>Your code works. I don't know why it doesn't work in your environment, but it works as expected on mine. Perhaps you could share some more information about the environment you're running it on.</p>\n\n<ul>\n<li>What operating system are you using?</li>\n<li>What web server are you using?</li>\n<li>Is anything written to the web server error log?</li>\n</ul>\n\n<p>Your code uses a number of rather dated constructs. Rewritten to more modern Perl, it looks like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse CGI 'header';\nuse CGI::Carp qw(fatalsToBrowser);\n\nmy $files_location = \"/home/netcool\";\n\nmy $filename = 'Maintenance_File.csv';\n\nif (!$filename) {\n  die \"You must specify a file to download\";\n  exit;\n}\n\nprint header(\n  -type =&gt; 'application/octet-stream',\n  -content_disposition =&gt; \"attachment;filename=$filename\",\n);\n\nmy $fileloc = \"$files_location/$filename\";\nopen my $fh, '&lt;', $fileloc or Error('open', 'file', $!);\nprint while &lt;$fh&gt;;\nclose $fh or Error ('close', 'file' );\n\nsub Error {\n  die \"@_\";\n}\n</code></pre>\n\n<p>But none of my edits change the fundamental working of your code. I assume that my version will fail in the same way as your original one.</p>\n"}], "owner": {"reputation": 13, "user_id": 11733745, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gLBciz242Qw/AAAAAAAAAAI/AAAAAAAAAAA/4wM6m731pZ4/photo.jpg?sz=128", "display_name": "Saurabh Jain", "link": "https://stackoverflow.com/users/11733745/saurabh-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 56873222, "answer_count": 1, "score": 0, "last_activity_date": 1562167417, "creation_date": 1562148605, "last_edit_date": 1562164674, "question_id": 56867736, "link": "https://stackoverflow.com/questions/56867736/file-is-empty-after-downloading", "title": "File is empty after downloading", "body": "<p>I am trying to download csv file from server. File is getting downloaded however it is empty. Any suggestions are highly welcome. Filename is Maintenance_File.csv which is present in /home/netcool location.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse CGI ':standard';\nuse CGI::Carp qw(fatalsToBrowser);\n\nmy $files_location;\nmy $ID;\nmy @fileholder;\n\n$files_location = \"/home/netcool\";\n\n#$ID = param('file');\n$ID = \"Maintenance_File.csv\";\n#print \"Content-type: text/html\\n\\n\";\n#print \"ID =$ID\";\n\nif ($ID eq '') {\n  print \"You must specify a file to download.\";\n} else {\n  $fileloc=\"/home/netcool/\" . $ID;\n  open(DLFILE, \"$fileloc\") || Error('open', 'file');\n  @fileholder = &lt;DLFILE&gt;;\n  close (DLFILE) || Error ('close', 'file');\n  #print \"Files data = @fileholder\";\n  print \"Content-Type:application/octet-stream;\\n\";\n  print \"Content-Disposition:attachment;filename=\\\"$ID\\\"\\r\\n\\n\";\n  print @fileholder\n  #open(DLFILE, \"&lt; $fileloc\") || Error('open', 'file');\n  #while(read(DLFILE, $buffer, 100) ) {\n  #  print(\"$buffer\");\n  #}\n  #close (DLFILE) || Error ('close', 'file');\n\n}\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 1131, "user_id": 1281811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g0mh1.png?s=128&g=1", "display_name": "dralshehri", "link": "https://stackoverflow.com/users/1281811/dralshehri"}, "is_accepted": false, "score": 0, "last_activity_date": 1562147327, "creation_date": 1562147327, "answer_id": 56867343, "question_id": 56867146, "link": "https://stackoverflow.com/questions/56867146/regex-to-match-path-except-file-and-its-parent-directory/56867343#56867343", "title": "Regex to match path except file and its parent directory", "body": "<p>Try this pattern:</p>\n\n<pre><code>(.*)/\\w+\\/\\w+\\.\\w+\n</code></pre>\n\n<p>and then capture the 1st group.</p>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1562147336, "creation_date": 1562147336, "answer_id": 56867347, "question_id": 56867146, "link": "https://stackoverflow.com/questions/56867146/regex-to-match-path-except-file-and-its-parent-directory/56867347#56867347", "title": "Regex to match path except file and its parent directory", "body": "<p>The file or directory name can never contain a slash. So the last two parts of the path are <code>/[^/]+/[^/]+$</code>.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Test::More tests =&gt; 4;\n\nmy %test = (\n    'file/in/some/dir1/file1.txt'      =&gt; 'file/in/some',\n    'file/in/some/dir2/file1.txt'      =&gt; 'file/in/some',\n    'file/in/some/dir2/file2.txt'      =&gt; 'file/in/some',\n    'file/in/some/other/dir/file1.txt' =&gt; 'file/in/some/other');\n\nfor my $path (keys %test) {\n    is match($path), $test{$path}, $path;\n}\n\nsub match {\n    my ($path) = @_;\n    return ($path =~ m{(.*)/[^/]+/[^/]+$})[0]\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": true, "score": 2, "last_activity_date": 1562153843, "last_edit_date": 1562153843, "creation_date": 1562147355, "answer_id": 56867352, "question_id": 56867146, "link": "https://stackoverflow.com/questions/56867146/regex-to-match-path-except-file-and-its-parent-directory/56867352#56867352", "title": "Regex to match path except file and its parent directory", "body": "<p>You're very close with your \"matches the exact opposite\" regex, you just need to capture the <em>other</em> part of the string:</p>\n\n<pre><code>m{(.*)/\\w+/\\w+\\.\\w+$}\n</code></pre>\n\n<p>I've also modified it so that the non-captured part of the match has to start with a <code>/</code> (otherwise it gave wrong results), used <code>m{}</code> instead of <code>//</code> to delimit the regex so that the <code>/</code> characters in the regex don't need to be escaped (<code>\\/</code> - \"leaning toothpick syndrome\"), and anchored it to the end of the string (so that it will still work correctly if one of the directory names contains a <code>.</code>).</p>\n\n<p>Full test implementation:</p>\n\n<pre><code>#!/usr/bin/env perl    \n\nuse strict;\nuse warnings;\nuse 5.010;\n\nmy @paths = qw(\n  file/in/some/dir1/file1.txt\n  file/in/some/dir2/file1.txt\n  file/in/some/dir2/file2.txt\n  file/in/some/other/dir/file1.txt\n);\n\nfor my $path (@paths) {\n  $path =~ m{(.*)/\\w+/\\w+\\.\\w+$};\n  say $1;\n} \n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>file/in/some\nfile/in/some\nfile/in/some\nfile/in/some/other\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 1, "creation_date": 1562154032, "post_id": 56867354, "comment_id": 100287156, "body": "Note that this version, because it uses <code>s&#47;&#47;&#47;</code> (well, <code>s~~~</code>) instead of <code>m&#47;&#47;</code>, will modify the original strings, which may or may not be appropriate in the OP&#39;s use case."}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 0, "last_activity_date": 1562147362, "creation_date": 1562147362, "answer_id": 56867354, "question_id": 56867146, "link": "https://stackoverflow.com/questions/56867146/regex-to-match-path-except-file-and-its-parent-directory/56867354#56867354", "title": "Regex to match path except file and its parent directory", "body": "<p>Here is a way to do the job:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nwhile(&lt;DATA&gt;) {\n    chomp;\n    s~/[^/]+/[^/]+$~~;\n    say;\n}\n\n__DATA__\nfile/in/some/dir1/file1.txt\nfile/in/some/dir2/file1.txt\nfile/in/some/dir2/file2.txt\nfile/in/some/other/dir/file1.txt\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>file/in/some\nfile/in/some\nfile/in/some\nfile/in/some/other\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1562147650, "creation_date": 1562147650, "answer_id": 56867444, "question_id": 56867146, "link": "https://stackoverflow.com/questions/56867146/regex-to-match-path-except-file-and-its-parent-directory/56867444#56867444", "title": "Regex to match path except file and its parent directory", "body": "<p>Here is another approach assuming all data is in a string and using a lookahead regexp:</p>\n\n<pre><code>my $files = \"1: file/in/some/dir1/file1.txt\n2: file/in/some/dir2/file1.txt\n3: file/in/some/dir2/file2.txt\n4: file/in/some/other/dir/file1.txt\";\nmy @dirs = $files =~ m{((?:\\w+/)+)(?=\\w+\\/\\w+\\.\\w+)}g;\nsay for @dirs;\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>file/in/some/\nfile/in/some/\nfile/in/some/\nfile/in/some/other/\n</code></pre>\n"}], "owner": {"reputation": 80, "user_id": 10810447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd5ab60ad7af56e2a45730850b4d408?s=128&d=identicon&r=PG&f=1", "display_name": "J. Sch&#252;bel", "link": "https://stackoverflow.com/users/10810447/j-sch%c3%bcbel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1076, "favorite_count": 0, "accepted_answer_id": 56867352, "answer_count": 5, "score": 0, "last_activity_date": 1562153843, "creation_date": 1562146598, "question_id": 56867146, "link": "https://stackoverflow.com/questions/56867146/regex-to-match-path-except-file-and-its-parent-directory", "title": "Regex to match path except file and its parent directory", "body": "<p>I am trying write an expression that matches a filepath but exclude the filename and its parent directory. This is my test string:</p>\n\n<pre><code>file/in/some/dir1/file1.txt\nfile/in/some/dir2/file1.txt\nfile/in/some/dir2/file2.txt\nfile/in/some/other/dir/file1.txt\n</code></pre>\n\n<p>what I want the regex to match is:</p>\n\n<pre><code>file/in/some\nfile/in/some\nfile/in/some\nfile/in/some/other\n</code></pre>\n\n<hr>\n\n<p>I tried different kinds of negative look-aheads but I didn't succeed. All I could come up with is an expression that matches the exact opposite of my desired match: <code>(\\w+\\/\\w+\\.\\w+)</code>. With this I get the filename and it's parent directory but I don't know how to \"invert\" the result.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["linux", "perl", "encoding"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1562147945, "post_id": 56867056, "comment_id": 100283816, "body": "If you are not sure of the encoding of <code>ip.txt</code>, you can try <a href=\"https://metacpan.org/pod/Encode::Guess\" rel=\"nofollow noreferrer\">Encode::Guess</a>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1562177427, "post_id": 56867056, "comment_id": 100300161, "body": "Your title says &quot;<i>to utf-8</i>&quot;. Your first sentence says &quot;<i>to US-ASCII</i>&quot;. Which is it?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1562177872, "post_id": 56867056, "comment_id": 100300342, "body": "If you don&#39;t already know the encoding <code>ip.txt</code> is in, you have to guess. Depending on what it contains, such a guess might be impossible (or just uncertain). As for how to use <i><code>:raw:encoding():lf:utf8</code></i>: Why would I ever use that? It looks bizarre to me; I&#39;d have to study the reference documentation or even the source code to find out what exactly it does. I would expect <code>&lt;:encoding(FOO)</code> on <code>$myold</code> and <code>&gt;&gt;:encoding(BAR)</code> on <code>$mynew</code> (here <code>FOO</code> represents the source encoding, whatever that may turn out to be, and <code>BAR</code> the target encoding, either <code>UTF-8</code> or <code>US-ASCII</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 318, "user_id": 8795509, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-i9j6kNs3nXE/AAAAAAAAAAI/AAAAAAAAJw4/uq29m9GSfqY/photo.jpg?sz=128", "display_name": "Neeraj Bansal", "link": "https://stackoverflow.com/users/8795509/neeraj-bansal"}, "edited": false, "score": 0, "creation_date": 1562208017, "post_id": 56879427, "comment_id": 100308305, "body": "Yes you are right I was only guessing the encoding. Could you please tell me how to generalize it in perl ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 318, "user_id": 8795509, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-i9j6kNs3nXE/AAAAAAAAAAI/AAAAAAAAJw4/uq29m9GSfqY/photo.jpg?sz=128", "display_name": "Neeraj Bansal", "link": "https://stackoverflow.com/users/8795509/neeraj-bansal"}, "edited": false, "score": 0, "creation_date": 1562213499, "post_id": 56879427, "comment_id": 100309191, "body": "To be generic, you can use <code>&quot;&lt;:encoding($encoding)&quot;</code>. But you still need to know the encoding."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 0, "last_activity_date": 1562201433, "last_edit_date": 1562201433, "creation_date": 1562201110, "answer_id": 56879427, "question_id": 56867056, "link": "https://stackoverflow.com/questions/56867056/file-encoding-from-any-encoding-to-utf-8-in-linux-perl/56879427#56879427", "title": "file encoding from any encoding to utf-8 in linux perl", "body": "<p>It feels like you're just guessing at the file's encoding. Seeing as there are 100s, that's not likely to be productive. To get rid of the errors, provide the actual encoding of the file.</p>\n\n<hr>\n\n<blockquote>\n  <p><em>When I am trying raw:encoding(UTF-16LE) error are coming as <code>UTF-16LE:Partial character at script.perl line 10</code></em></p>\n</blockquote>\n\n<p>The file isn't encoded using UTF-16le.</p>\n\n<blockquote>\n  <p><em>when I am using <code>raw:encoding(US-ASCII)</code> errors are like <code>ascii \"\\xC0\" does not map to Unicode at script.perl line 10.</code></em></p>\n</blockquote>\n\n<p>The file isn't encoded using ASCII. (The input file contains byte <code>C0</code>, but the ASCII character set doesn't contain any such character.)</p>\n"}], "owner": {"reputation": 318, "user_id": 8795509, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-i9j6kNs3nXE/AAAAAAAAAAI/AAAAAAAAJw4/uq29m9GSfqY/photo.jpg?sz=128", "display_name": "Neeraj Bansal", "link": "https://stackoverflow.com/users/8795509/neeraj-bansal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 56879427, "answer_count": 1, "score": -1, "last_activity_date": 1562201433, "creation_date": 1562146277, "last_edit_date": 1562167498, "question_id": 56867056, "link": "https://stackoverflow.com/questions/56867056/file-encoding-from-any-encoding-to-utf-8-in-linux-perl", "title": "file encoding from any encoding to utf-8 in linux perl", "body": "<p>I want to convert text file ip.txt 's encoding to US-ASCII regardless of whatever ip.txt's encoding. </p>\n\n<p>When I am trying <code>raw:encoding(UTF-16LE)</code> error are coming as <strong><em>UTF-16LE:Partial character at script.perl line 10</em></strong> but when I am using</p>\n\n<p><code>raw:encoding(US-ASCII)</code> errors are like <strong><em>ascii \"\\xC0\" does not map to Unicode at script.perl line 10.</em></strong></p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $old= '/home/ip.txt';\nmy $new = '/home/out.txt';\nopen(my $myold, \"&lt;:raw:encoding(UTF-16LE):crlf:utf8\", $old) or\ndie \"Could not open file 1 $!\";\nopen(my $mynew, \"&gt;&gt;\", $new) or\ndie \"Could not open file 2 $!\";\nwhile( my $line = &lt;$myold&gt; )\n{\n    print {$mynew} $line;\n}\n\nclose($myold);\nclose($mynew);\n</code></pre>\n\n<p>Please suggest how to use :raw:encoding():lf:utf8? What does it work, please explain it too?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1562145406, "post_id": 56866694, "comment_id": 100282408, "body": "Which operator?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1562145750, "post_id": 56866694, "comment_id": 100282615, "body": "it is doing a <a href=\"https://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">global substitution</a> on the string <code>$dir</code>. The substring <code>__math_eqn__</code> is replaced by the hash value <code>$fun-&gt;{VAR}{math_eqn}</code>  (where <code>$fun</code> is a hash reference)"}, {"owner": {"reputation": 5, "user_id": 10305571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pHQ6Eh3WrkU/AAAAAAAAAAI/AAAAAAAAAGo/7I1BtePPSAE/photo.jpg?sz=128", "display_name": "shanuj garg", "link": "https://stackoverflow.com/users/10305571/shanuj-garg"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1562145852, "post_id": 56866694, "comment_id": 100282674, "body": "@simbabque &#39;__&#39; and -&gt;{}{} , these operators."}, {"owner": {"reputation": 5, "user_id": 10305571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pHQ6Eh3WrkU/AAAAAAAAAAI/AAAAAAAAAGo/7I1BtePPSAE/photo.jpg?sz=128", "display_name": "shanuj garg", "link": "https://stackoverflow.com/users/10305571/shanuj-garg"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1562145931, "post_id": 56866694, "comment_id": 100282716, "body": "@H&#229;konH&#230;gland what does $fun-&gt;{}{} do with &#39;VAR&#39; and &#39;math_eqn&#39;"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1562145984, "post_id": 56866694, "comment_id": 100282745, "body": "@shanujgarg It just looks up a hash value in the nested hash <code>%$fun</code>, see <a href=\"https://perldoc.perl.org/perlref.html#Using-References\" rel=\"nofollow noreferrer\">perldoc perlref</a> and <a href=\"https://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldoc perldsc</a>"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1562146668, "last_edit_date": 1562146668, "creation_date": 1562146313, "answer_id": 56867062, "question_id": 56866694, "link": "https://stackoverflow.com/questions/56866694/dir-s-math-eqn-fun-varmath-eqn-g-do-in-perl/56867062#56867062", "title": "$dir =~ s/__math_eqn__/$fun-&gt;{&#39;VAR&#39;}{&#39;math_eqn&#39;}/g; do in perl", "body": "<p>It is doing a <a href=\"https://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">global substitution</a> on the string <code>$dir</code>. \nThe substring <code>__math_eqn__</code> is replaced by the hash value <code>$fun-&gt;{VAR}{math_eqn}</code> (where <code>$fun</code> is a hash reference), for example:</p>\n\n<pre><code>my $fun = {\n    VAR =&gt; { math_eqn =&gt; \"2 + 2 = 4\" }\n};\nmy $dir = \"This is the example equation: __math_eqn__,  and \"\n  . \" here is the equation once more: __math_eqn__\";\n$dir =~ s/__math_eqn__/$fun-&gt;{'VAR'}{'math_eqn'}/g;\nsay $dir;\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>This is the example equation: 2 + 2 = 4,  and  here is the equation once more: 2 + 2 = 4\n</code></pre>\n\n<p>See <a href=\"https://perldoc.perl.org/perlref.html#Using-References\" rel=\"nofollow noreferrer\">perldoc perlref</a> and <a href=\"https://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldoc perldsc</a> for more information.</p>\n"}], "owner": {"reputation": 5, "user_id": 10305571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pHQ6Eh3WrkU/AAAAAAAAAAI/AAAAAAAAAGo/7I1BtePPSAE/photo.jpg?sz=128", "display_name": "shanuj garg", "link": "https://stackoverflow.com/users/10305571/shanuj-garg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1562146668, "creation_date": 1562145130, "question_id": 56866694, "link": "https://stackoverflow.com/questions/56866694/dir-s-math-eqn-fun-varmath-eqn-g-do-in-perl", "title": "$dir =~ s/__math_eqn__/$fun-&gt;{&#39;VAR&#39;}{&#39;math_eqn&#39;}/g; do in perl", "body": "<p>What does this command do? , I know this is for replacing but since I am unaware of the operator I am getting confused.</p>\n\n<p><code>$dir =~ s/__math_eqn__/$fun-&gt;{'VAR'}{'math_eqn'}/g;</code></p>\n"}, {"tags": ["perl", "epic"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1562528061, "post_id": 56864486, "comment_id": 100392711, "body": "I can confirm this behavior. Installed Eclipse 2019-03 on Ubuntu 19.04. Downloaded EPIC 0.7.7 from <a href=\"http://epic-ide.org/updates/testing/\" rel=\"nofollow noreferrer\">epic-ide.org/updates/testing</a> . I suggest you submit a bug report at <a href=\"https://sourceforge.net/p/e-p-i-c/bugs/\" rel=\"nofollow noreferrer\">the bug tracker</a>. You could also try have a look at the <a href=\"https://github.com/jploski/epic-ide\" rel=\"nofollow noreferrer\">java source code</a> and see if you can fix the bug (?) yourself."}, {"owner": {"reputation": 313, "user_id": 8671786, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212527820055324/picture?type=large", "display_name": "Massimo Di Saggio", "link": "https://stackoverflow.com/users/8671786/massimo-di-saggio"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1562542051, "post_id": 56864486, "comment_id": 100395195, "body": "I don&#39;t think this is a bug per se, but rather how the debugger is supposed to work by default. To be honest, I&#39;m wary of requesting features to the EPIC developers, since another feature I would&#39;ve found useful (a sorting strategy for variables that ignores sigils) has been rejected. If you add your comment as an answer I&#39;d gladly award you the bounty. :)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1562569324, "post_id": 56864486, "comment_id": 100400533, "body": "Hi Massimo. I added a <a href=\"https://sourceforge.net/p/e-p-i-c/bugs/704/\" rel=\"nofollow noreferrer\">ticket</a>"}], "owner": {"reputation": 313, "user_id": 8671786, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212527820055324/picture?type=large", "display_name": "Massimo Di Saggio", "link": "https://stackoverflow.com/users/8671786/massimo-di-saggio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1562505962, "creation_date": 1562136793, "question_id": 56864486, "link": "https://stackoverflow.com/questions/56864486/perl-epic-display-warnings-in-console-during-debug", "title": "Perl EPIC display warnings in console during debug", "body": "<p>Whenever I run a script using the Debug <em>scriptname</em> button, the console doesn't display warnings that would usually appear in the console when launching it with the Run <em>scriptname</em> button.<br/>\nIs there a way to change this behaviour?</p>\n"}, {"tags": ["perl", "comparison"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1562145297, "post_id": 56863816, "comment_id": 100282336, "body": "What perl version?  What timezone is your local time?"}, {"owner": {"reputation": 23, "user_id": 11732510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43d5e0bedf5abf4392ab8ea54984fdf?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/11732510/ben"}, "edited": false, "score": 0, "creation_date": 1562288660, "post_id": 56863816, "comment_id": 100336940, "body": "My perl version is 5.20. Active Perl. I solved my issue by specifying timezone in Time::Piece-&gt;strptime."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1562164145, "post_id": 56865902, "comment_id": 100293387, "body": "You can also cause strptime to work in the local time by calling it from a localtime object (it&#39;s <a href=\"https://github.com/Dual-Life/Time-Piece/issues/44\" rel=\"nofollow noreferrer\">kind of a hack</a>): <code>my $time = localtime-&gt;strptime(...)</code>"}, {"owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1562219745, "post_id": 56865902, "comment_id": 100310740, "body": "Good point! I just note that this doesn&#39;t work with a quite old <code>Time::Piece-&gt;VERSION</code>, e. g. 1.15; it works with e. g. 1.20_01."}, {"owner": {"reputation": 23, "user_id": 11732510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43d5e0bedf5abf4392ab8ea54984fdf?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/11732510/ben"}, "edited": false, "score": 1, "creation_date": 1562228335, "post_id": 56865902, "comment_id": 100314567, "body": "You&#39;re exactly right. It is as you said. I sorted out the issue late yesterday but didn&#39;t get a chance to come back here to post an update."}], "tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": true, "score": 0, "last_activity_date": 1562142355, "creation_date": 1562142355, "answer_id": 56865902, "question_id": 56863816, "link": "https://stackoverflow.com/questions/56863816/comparing-two-timepiece-objects/56865902#56865902", "title": "Comparing two Time::Piece objects", "body": "<p>The unexpected comparison result is probably due to different <em>timezone offsets</em> in <code>$time</code> and <code>$eod</code> - <code>Time::Piece-&gt;new</code> yields a local time, while the <code>Time::Piece-&gt;strptime</code> yields UTC.<br>\nThe simplest fix would be to always use UTC: replace <code>Time::Piece-&gt;new</code> with <code>Time::Piece-&gt;gmtime</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 11732510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43d5e0bedf5abf4392ab8ea54984fdf?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/11732510/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 56865902, "answer_count": 1, "score": 2, "last_activity_date": 1562142355, "creation_date": 1562133717, "question_id": 56863816, "link": "https://stackoverflow.com/questions/56863816/comparing-two-timepiece-objects", "title": "Comparing two Time::Piece objects", "body": "<p>I experimented with the Time::Piece and Time::Seconds packages and wrote the below script to compare two Time::Piece objects. What I'm trying to do is to determine if the current time of day is before or after a specific time of day. In this case I've set the specific time to be 10:30:00.</p>\n\n<p>I printed out the two Time::Piece values, and from that it looks like the codes to should work, but the result is not I'm expecting.</p>\n\n<p>Could anyone see what's wrong with my codes?</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Time::Piece;\nuse Time::Seconds;\n\nmy $settDate;\nmy $time = Time::Piece-&gt;new;\nmy $eod  = Time::Piece-&gt;strptime($time-&gt;date . \"T10:30:00\", '%Y-%m- %dT%H:%M:%S');\nprint \"Time is: ${time}, EOD is: ${eod}\\n\";\nif ($time &gt; $eod) {\n    print \"Yes, we've passed EOD.\\n\";\n    $settDate = $time-&gt;strftime('%Y/%m/%d');\n} else {\n    print \"No, we haven't passed EOD yet\\n\";\n    $settDate = ($time - ONE_DAY)-&gt;strftime('%Y/%m/%d');\n}\nprint \"Default date is: ${settDate}\\n\";\n</code></pre>\n\n<p>Output shows:</p>\n\n<pre><code>Time is: Wed Jul  3 15:44:26 2019, EOD is: Wed Jul  3 10:30:00 2019\nNo, we haven't passed EOD yet\nDefault date is: 2019/07/02\n</code></pre>\n"}, {"tags": ["perl", "ini"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1562116448, "post_id": 56861457, "comment_id": 100272973, "body": "You seemed to have forgotten to ask a question"}, {"owner": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 1, "creation_date": 1562122898, "post_id": 56861457, "comment_id": 100273951, "body": "Yes. We can check this."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1562124822, "post_id": 56861457, "comment_id": 100274286, "body": "INI is intentionally a very lenient self-correcting format like HTML. The first example is generally either a key named <code>zzz\\nname</code> or a key named <code>zzz</code> with no value, and the second is a key with an empty value. You could throw an error if any key contains a newline or any value is an empty string. Alternatively Config::INI::Reader is a bit stricter (but it will still accept the second example because that&#39;s a perfectly valid empty string value)."}, {"owner": {"reputation": 13, "user_id": 1550596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0804c1680759b9660b80c9c639482e27?s=128&d=identicon&r=PG", "display_name": "user1550596", "link": "https://stackoverflow.com/users/1550596/user1550596"}, "edited": false, "score": 0, "creation_date": 1562129874, "post_id": 56861457, "comment_id": 100275397, "body": "in this case zzz has no &#39;=&#39; sign will that consider a valid key, and it is separated with &#39;\\n&#39; with name. however Tiny config give me no warning and error."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 1550596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0804c1680759b9660b80c9c639482e27?s=128&d=identicon&r=PG", "display_name": "user1550596", "link": "https://stackoverflow.com/users/1550596/user1550596"}, "edited": false, "score": 0, "creation_date": 1562124171, "post_id": 56862359, "comment_id": 100274183, "body": "I am actually using Config Tiny parser for my work, however, i do not find anything that i can check on the syntax prior to use it, the parser will give me wrong data if the syntax is not right. that is the reason why i want to check it before feed into the parser."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 13, "user_id": 1550596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0804c1680759b9660b80c9c639482e27?s=128&d=identicon&r=PG", "display_name": "user1550596", "link": "https://stackoverflow.com/users/1550596/user1550596"}, "edited": false, "score": 0, "creation_date": 1562127525, "post_id": 56862359, "comment_id": 100274857, "body": "@user1550596 What exactly do you mean by &quot;the syntax is not right&quot;?"}, {"owner": {"reputation": 13, "user_id": 1550596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0804c1680759b9660b80c9c639482e27?s=128&d=identicon&r=PG", "display_name": "user1550596", "link": "https://stackoverflow.com/users/1550596/user1550596"}, "edited": false, "score": 0, "creation_date": 1562129784, "post_id": 56862359, "comment_id": 100275368, "body": "please check my example above like if zzz there is no &#39;=&#39; so this might not be right, but config tiny will not report any warning or error."}], "tags": [], "owner": {"reputation": 963, "user_id": 11117210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d5aa68aac6b9fe841dc9221c477dd8?s=128&d=identicon&r=PG&f=1", "display_name": "truth", "link": "https://stackoverflow.com/users/11117210/truth"}, "is_accepted": false, "score": 0, "last_activity_date": 1562122819, "creation_date": 1562122819, "answer_id": 56862359, "question_id": 56861457, "link": "https://stackoverflow.com/questions/56861457/ini-style-configuration-file-syntax-check-with-perl/56862359#56862359", "title": "INI style configuration file syntax check with Perl", "body": "<p>Use a parser!  There's quite a couple of INI-style config parsers at CPAN:</p>\n\n<p><a href=\"https://metacpan.org/search?q=config+ini\" rel=\"nofollow noreferrer\">https://metacpan.org/search?q=config+ini</a></p>\n"}], "owner": {"reputation": 13, "user_id": 1550596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0804c1680759b9660b80c9c639482e27?s=128&d=identicon&r=PG", "display_name": "user1550596", "link": "https://stackoverflow.com/users/1550596/user1550596"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 196, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1562122819, "creation_date": 1562113194, "last_edit_date": 1562118504, "question_id": 56861457, "link": "https://stackoverflow.com/questions/56861457/ini-style-configuration-file-syntax-check-with-perl", "title": "INI style configuration file syntax check with Perl", "body": "<p>Needs to ensure users provided INI file is clean from syntax error, such as </p>\n\n<p>a) Unexpected syntax</p>\n\n<pre><code>[general]zzz\nname=test\n</code></pre>\n\n<p>b) Non-filled column</p>\n\n<pre><code>[custom]\nname=\n</code></pre>\n\n<p>Can i know if anyway we can check this?</p>\n"}, {"tags": ["html", "perl", "file-conversion", "eml"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 3, "creation_date": 1562104444, "post_id": 56860448, "comment_id": 100270795, "body": "See also <a href=\"https://stackoverflow.com/q/34499393/2173773\">Perl Module Error - defined(%hash) is deprecated</a>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1562105432, "post_id": 56860448, "comment_id": 100271039, "body": "Try replacing all <code>defined(%variable_name)</code> by just <code>%variable_name</code>."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 1, "creation_date": 1562105665, "post_id": 56860448, "comment_id": 100271098, "body": "<code>defined(%hash)</code> is fatal since 5.22 ( <a href=\"https://www.perlmonks.org/?node_id=1225431\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1225431</a> ), so the 5.18 may work.  I don&#39;t have a Mac, unfortunately, but you could try <code>export PATH=&#47;usr&#47;bin:$PATH</code> and see what happened.  If you do, also try unsetting any environment variables that begin with <code>PERL</code>."}], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 1, "last_activity_date": 1618674377, "creation_date": 1618674377, "answer_id": 67140014, "question_id": 56860448, "link": "https://stackoverflow.com/questions/56860448/perl-cant-use-definedhash/67140014#67140014", "title": "Perl: Can&#39;t use &#39;defined(%hash)&#39;", "body": "<p>Perl v5.6.1 deprecated the use of <code>defined</code> on collections, but many things have been deprecated and sat there. Then, far later, the Perl developers started dealing with these deprecations. Perl v5.16 started warning about this, and v5.22 finally made it fatal.</p>\n<p>Fortunately, you have v5.18 installed as <em>/usr/bin/perl</em> (the system <em>perl</em>), so you can use that. However, you need to be careful that you are using v5.18 because the macOS system <em>perl</em> is actually two different versions (try <code>strings</code> on it sometime).</p>\n<pre><code>$ ls /usr/bin/perl5*\n/usr/bin/perl5.18   /usr/bin/perl5.28\n</code></pre>\n<p>By default, I get the earlier one (which supports but warns about <code>defined %hash</code>). This way, the macOS system can use the earlier <em>perl</em>, which they've had a long time to test and stabilize:</p>\n<pre><code>$ /usr/bin/perl -v\n\nThis is perl 5, version 18, subversion 4 (v5.18.4) built for darwin-thread-multi-2level\n(with 2 registered patches, see perl -V for more detail)\n</code></pre>\n<p>But, as a user, I can tell <em>perl</em> which version I want:</p>\n<pre><code>$ env VERSIONER_PERL_VERSION=5.28 /usr/bin/perl -v\n\nThis is perl 5, version 28, subversion 2 (v5.28.2) built for darwin-thread-multi-2level\n(with 2 registered patches, see perl -V for more detail)\n</code></pre>\n<p>I can also choose one as a default for my user (instead of system) processes:</p>\n<pre><code>$ defaults write com.apple.versioner.perl Version 5.28\n\n$ defaults read com.apple.versioner.perl Version\n5.28\n</code></pre>\n<p>But, also be aware that Apple has committed to <a href=\"https://developer.apple.com/documentation/macos-release-notes/macos-catalina-10_15-release-notes\" rel=\"nofollow noreferrer\">not distributing scripting language runtimes</a>. So far they haven't turned this off, but eventually you'll have to figure this out with a <em>perl</em> that you install yourself.</p>\n"}], "owner": {"reputation": 49, "user_id": 1773603, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-UZXqQyyTv38/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmjtkpUxrj9UY16bqdK3OfqQoGwmw/photo.jpg?sz=128", "display_name": "youpilat13", "link": "https://stackoverflow.com/users/1773603/youpilat13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 67140014, "answer_count": 1, "score": 3, "last_activity_date": 1618674377, "creation_date": 1562104202, "last_edit_date": 1618671860, "question_id": 56860448, "link": "https://stackoverflow.com/questions/56860448/perl-cant-use-definedhash", "title": "Perl: Can&#39;t use &#39;defined(%hash)&#39;", "body": "<p>On MacOS 10.13.6 High Sierra, I want to convert a list of mails that I have exported in eml format files (with Thunderbird), to HTML files.</p>\n<p>To perform this, I have installed the tool called &quot;mhonarc&quot;.</p>\n<p>But at the execution, when I do :</p>\n<pre><code>mhonarc -outdir /Users/peter/Mails_HTML /Users/peter/Mails\n</code></pre>\n<p>I get the following error :</p>\n<pre><code>Can't use 'defined(%hash)' (Maybe you should just omit the   defined()?) at /opt/local/lib/perl5/vendor_perl/5.28/darwin-thread-multi-2level/mhamain.pl line 1565.\nCompilation failed in require at /opt/local/bin/mhonarc line 39.\n</code></pre>\n<p>I don't know if I have the right Perl version. I have installed perl5.26 and perl5.28 via <code>macports</code> and the 3 following macports packages :</p>\n<pre><code>p5-mhonarc @2.6.19 (perl)\nMHonArc - mail and news munging\n\np5.26-mhonarc @2.6.19 (perl)\nMHonArc - mail and news munging\n\np5.28-mhonarc @2.6.19 (perl)\nMHonArc - mail and news munging\n</code></pre>\n<p>after having done : <code>sudo port searc mhonarc</code></p>\n<p>I think there are conflicts between the native Perl of High Sierra and the Perl package installed with <code>macports</code> but I am not sure.</p>\n<h2>Edit 1</h2>\n<p>If I do <code>which perl</code>, I get : <code>/opt/local/bin/perl</code>, so I infer that I am using a version installed from <code>macports</code>.</p>\n<p>Here the versions installed and potentially used by <code>mhonarc</code> :</p>\n<pre><code>$ /opt/local/bin/perl --version\n\nThis is perl 5, version 26, subversion 3 (v5.26.3) built for darwin-  thread-multi-2level\n\nCopyright 1987-2018, Larry Wall\n</code></pre>\n<p>and</p>\n<pre><code>$ /usr/bin/perl --version\n\nThis is perl 5, version 18, subversion 2 (v5.18.2) built for darwin-thread-multi-2level\n(with 2 registered patches, see perl -V for more detail)\n\nCopyright 1987-2013, Larry Wall\n</code></pre>\n<h2>Edit 2</h2>\n<p>I followed suggestion done by <code>@choroba</code>: I replaced all <code> all defined(%variable_name) by just %variable_name</code></p>\n<p>So the command <code>mhonarc -outdir /Users/peter/Mails_HTML /Users/peter/Mails</code> doesn't produce error but the issue now is that doesn't produce any mail under HTML format in the directory <code>/Users/peter/Mails_HTML</code></p>\n<p>I get the following output:</p>\n<pre><code>This is MHonArc v2.6.19, Perl 5.028002 darwin\nConverting messages to /Users/peter/Mails_HTML/\nReading /Users/peter/Mails \n\nWriting mail \nWriting /Users/peter/Mails_HTML//maillist.html ...\nWriting /Users/peter/Mails_HTML//threads.html ...\nWriting database ...\n0 total messages\n</code></pre>\n<p>What could be the origin of this behavior ?</p>\n<h2>Edit 3</h2>\n<p>Problem finally fixed by the modified command line :</p>\n<p><code>mhonarc -outdir /Users/peter/Mails_HTML /Users/peter/Mails/*</code></p>\n<p>which produces all HTML files in <code>/Users/peter/Mails_HTML</code>directory. there is just the dates of email that are missing, I am going to do research for adding this information.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1, "user_id": 11730572, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--w16bp45sIA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaqH-waZyXMeKVKoVWgC0Sq09eYw/photo.jpg?sz=128", "display_name": "user11730572", "link": "https://stackoverflow.com/users/11730572/user11730572"}, "edited": false, "score": 0, "creation_date": 1562090105, "post_id": 56857754, "comment_id": 100265571, "body": "using perl, version 5.005_03 built for sun4-solaris"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11730572, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--w16bp45sIA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaqH-waZyXMeKVKoVWgC0Sq09eYw/photo.jpg?sz=128", "display_name": "user11730572", "link": "https://stackoverflow.com/users/11730572/user11730572"}, "edited": false, "score": 0, "creation_date": 1562090731, "post_id": 56857870, "comment_id": 100265839, "body": "thanks Carlos its showing as &quot;&quot;/net/prihpwnfs02 does not exist&quot;&quot;"}, {"owner": {"reputation": 74, "user_id": 11729348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a1348e7707b63d01c154b338bc95ae?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Negron", "link": "https://stackoverflow.com/users/11729348/carlos-negron"}, "reply_to_user": {"reputation": 1, "user_id": 11730572, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--w16bp45sIA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaqH-waZyXMeKVKoVWgC0Sq09eYw/photo.jpg?sz=128", "display_name": "user11730572", "link": "https://stackoverflow.com/users/11730572/user11730572"}, "edited": false, "score": 0, "creation_date": 1562090944, "post_id": 56857870, "comment_id": 100265941, "body": "@user11730572 then you probably have a problem with the folder/directory. Try in another folder/directory. It could be a permissions problem maybe?"}, {"owner": {"reputation": 1, "user_id": 11730572, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--w16bp45sIA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaqH-waZyXMeKVKoVWgC0Sq09eYw/photo.jpg?sz=128", "display_name": "user11730572", "link": "https://stackoverflow.com/users/11730572/user11730572"}, "edited": false, "score": 0, "creation_date": 1562090946, "post_id": 56857870, "comment_id": 100265944, "body": "I have this folder from very long period and there are many user directories available inside it"}, {"owner": {"reputation": 1, "user_id": 11730572, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--w16bp45sIA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaqH-waZyXMeKVKoVWgC0Sq09eYw/photo.jpg?sz=128", "display_name": "user11730572", "link": "https://stackoverflow.com/users/11730572/user11730572"}, "edited": false, "score": 0, "creation_date": 1562090966, "post_id": 56857870, "comment_id": 100265951, "body": "For every other folder it is working except for this"}, {"owner": {"reputation": 1, "user_id": 11730572, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--w16bp45sIA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaqH-waZyXMeKVKoVWgC0Sq09eYw/photo.jpg?sz=128", "display_name": "user11730572", "link": "https://stackoverflow.com/users/11730572/user11730572"}, "edited": false, "score": 0, "creation_date": 1562091007, "post_id": 56857870, "comment_id": 100265962, "body": "permissions are &quot;&quot;drwxr-xr-x   4 root     root        4096 Jul  2 09:45 prihpwnfs02&quot;&quot;"}, {"owner": {"reputation": 1, "user_id": 11730572, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--w16bp45sIA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaqH-waZyXMeKVKoVWgC0Sq09eYw/photo.jpg?sz=128", "display_name": "user11730572", "link": "https://stackoverflow.com/users/11730572/user11730572"}, "edited": false, "score": 0, "creation_date": 1562093602, "post_id": 56857870, "comment_id": 100267050, "body": "Yes it works for /net but not for &quot;/net/prihpwnfs02&quot;"}, {"owner": {"reputation": 1, "user_id": 11730572, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--w16bp45sIA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaqH-waZyXMeKVKoVWgC0Sq09eYw/photo.jpg?sz=128", "display_name": "user11730572", "link": "https://stackoverflow.com/users/11730572/user11730572"}, "edited": false, "score": 0, "creation_date": 1562093745, "post_id": 56857870, "comment_id": 100267112, "body": "pwd command ooutput &quot;&quot;/net/prihpwnfs02&quot;&quot; Permissions for this folder drwxr-xr-x   4 root     root        4096 Jul  2 09:45 prihpwnfs02"}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1562119370, "post_id": 56857870, "comment_id": 100273388, "body": "Does <code>ls -la &#47;net&#47;prihpwnfs02</code> from the shell prompt list the contents of the folder? I&#39;m wondering if there&#39;s some weird character in the folder name (like a newline or a trailing space)"}, {"owner": {"reputation": 1, "user_id": 11730572, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--w16bp45sIA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaqH-waZyXMeKVKoVWgC0Sq09eYw/photo.jpg?sz=128", "display_name": "user11730572", "link": "https://stackoverflow.com/users/11730572/user11730572"}, "edited": false, "score": 0, "creation_date": 1562130966, "post_id": 56857870, "comment_id": 100275713, "body": "I checked and could not find any weird character in the folder"}, {"owner": {"reputation": 1, "user_id": 11730572, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--w16bp45sIA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaqH-waZyXMeKVKoVWgC0Sq09eYw/photo.jpg?sz=128", "display_name": "user11730572", "link": "https://stackoverflow.com/users/11730572/user11730572"}, "edited": false, "score": 0, "creation_date": 1562130987, "post_id": 56857870, "comment_id": 100275720, "body": "ls -la /net/prihpwnfs02 total 25 drwxr-xr-x   4 root     root        4096 Jul  2 09:45 . dr-xr-xr-x   5 root     root           5 Jun 11 10:38 .. drwxr-xr-x  24 root     root        4096 Jan 14 12:10 export"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1562224553, "post_id": 56857870, "comment_id": 100312675, "body": "<code>print &quot;$dir does not exist&quot;;</code> is incorrect. <code>-d</code> returning false doesn&#39;t necessary indicate the file doesn&#39;t exist."}], "tags": [], "owner": {"reputation": 74, "user_id": 11729348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a1348e7707b63d01c154b338bc95ae?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Negron", "link": "https://stackoverflow.com/users/11729348/carlos-negron"}, "is_accepted": false, "score": 0, "last_activity_date": 1562090432, "creation_date": 1562090432, "answer_id": 56857870, "question_id": 56857754, "link": "https://stackoverflow.com/questions/56857754/perl-not-identifying-the-folder/56857870#56857870", "title": "Perl not identifying the folder", "body": "<p>I don't know what are you trying to do, since you did not asked an actual question, but if you're trying to check whether a folder exists or not, you could use the following code:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\n\nmy $dir = '/net/prihpwnfs02'; \n\nif (-d $dir) {\n    print \"$dir exists\";\n} else {\n    print \"$dir does not exist\";\n}\n</code></pre>\n\n<p>Let me know if it helped!</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 11730572, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--w16bp45sIA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaqH-waZyXMeKVKoVWgC0Sq09eYw/photo.jpg?sz=128", "display_name": "user11730572", "link": "https://stackoverflow.com/users/11730572/user11730572"}, "edited": false, "score": 0, "creation_date": 1562146871, "post_id": 56859052, "comment_id": 100283242, "body": "Can&#39;t stat &quot;/net/prihpwnfs02&quot;: Value too large for defined data type It is showing this error"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 11730572, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--w16bp45sIA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaqH-waZyXMeKVKoVWgC0Sq09eYw/photo.jpg?sz=128", "display_name": "user11730572", "link": "https://stackoverflow.com/users/11730572/user11730572"}, "edited": false, "score": 0, "creation_date": 1562182285, "post_id": 56859052, "comment_id": 100302231, "body": "ok, that&#39;s a first for me! I&#39;ve updated my answer with an explanation of the message. In short, the fact that you&#39;re using an insanely outdated built of Perl is catching up to you."}, {"owner": {"reputation": 1, "user_id": 11730572, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--w16bp45sIA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaqH-waZyXMeKVKoVWgC0Sq09eYw/photo.jpg?sz=128", "display_name": "user11730572", "link": "https://stackoverflow.com/users/11730572/user11730572"}, "edited": false, "score": 0, "creation_date": 1562222560, "post_id": 56859052, "comment_id": 100311813, "body": "I dont want to upgrade perl because it is a very old Server don&#39;t we have any alternative"}, {"owner": {"reputation": 1, "user_id": 11730572, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--w16bp45sIA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaqH-waZyXMeKVKoVWgC0Sq09eYw/photo.jpg?sz=128", "display_name": "user11730572", "link": "https://stackoverflow.com/users/11730572/user11730572"}, "edited": false, "score": 0, "creation_date": 1562223688, "post_id": 56859052, "comment_id": 100312270, "body": "Is there any other alternate way of running the code using the existing older version of perl"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 11730572, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--w16bp45sIA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaqH-waZyXMeKVKoVWgC0Sq09eYw/photo.jpg?sz=128", "display_name": "user11730572", "link": "https://stackoverflow.com/users/11730572/user11730572"}, "edited": false, "score": 0, "creation_date": 1562224458, "post_id": 56859052, "comment_id": 100312618, "body": "No. The builtin <code>stat</code> (and <code>-d</code> by extension) won&#39;t work for that file."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 11730572, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--w16bp45sIA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaqH-waZyXMeKVKoVWgC0Sq09eYw/photo.jpg?sz=128", "display_name": "user11730572", "link": "https://stackoverflow.com/users/11730572/user11730572"}, "edited": false, "score": 0, "creation_date": 1562277262, "post_id": 56859052, "comment_id": 100335329, "body": "@user11730572, ouch!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1562182583, "last_edit_date": 1562182583, "creation_date": 1562096455, "answer_id": 56859052, "question_id": 56857754, "link": "https://stackoverflow.com/questions/56857754/perl-not-identifying-the-folder/56859052#56859052", "title": "Perl not identifying the folder", "body": "<p>You're not checking what error you got.</p>\n\n<pre><code>my $dir_qfn = '/net/prihpwnfs02';\ndefined( my $is_dir = -d $dir_qfn )\n   or die(\"Can't stat \\\"$dir_qfn\\\": $!\\n\");\n\nprint $is_dir ? \"GOOD :)\\n\" : \"BAD :(\\n\";\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $dir_qfn = '/net/prihpwnfs02';\nstat($dir_qfn)\n   or die(\"Can't stat \\\"$dir_qfn\\\": $!\\n\");\n\nprint -d _ ? \"GOOD :)\\n\" : \"BAD :(\\n\";\n</code></pre>\n\n<p>If you don't want to die if it doesn't exist,</p>\n\n<pre><code>my $dir_qfn = '/net/prihpwnfs02';\nstat($dir_qfn)\n   or $!{ENOENT} or die(\"Can't stat \\\"$dir_qfn\\\": $!\\n\");\n\nprint -d _ ? \"GOOD :)\\n\" : \"BAD :(\\n\";\n</code></pre>\n\n<hr>\n\n<p>The message \"<em>Value too large for defined data type</em>\" is associated with error <code>EOVERFLOW</code>. The <code>stat</code>(2) man page defines when it returns this error. On my system, it says the following:</p>\n\n<blockquote>\n  <p>[The argument] refers to a file whose size, inode number, or number of blocks cannot be represented in, respectively, the types <code>off_t</code>, <code>ino_t</code>, or <code>blkcnt_t</code>.  This error can occur when, for example, an application compiled on a 32-bit platform without <code>-D_FILE_OFFSET_BITS=64</code> calls <code>stat()</code> on a file whose size exceeds <code>(1&lt;&lt;31)-1</code> bytes.</p>\n</blockquote>\n\n<p>In short, the fact that you're using an insanely outdated build of Perl is catching up to you.</p>\n"}], "owner": {"reputation": 1, "user_id": 11730572, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--w16bp45sIA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcaqH-waZyXMeKVKoVWgC0Sq09eYw/photo.jpg?sz=128", "display_name": "user11730572", "link": "https://stackoverflow.com/users/11730572/user11730572"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1562182583, "creation_date": 1562089938, "last_edit_date": 1562091109, "question_id": 56857754, "link": "https://stackoverflow.com/questions/56857754/perl-not-identifying-the-folder", "title": "Perl not identifying the folder", "body": "<p>Perl is not detecting the existing folder, folder already exists but still it is not detecting at all.</p>\n\n<p>Below given is the simple code</p>\n\n<pre><code>my $dir = '/net/prihpwnfs02';\nif (-e $dir and -d $dir) {print \"GOOD :)\\n\";} else {print \"BAD :(\\n\";}\n</code></pre>\n"}, {"tags": ["code-coverage", "spawn", "perl", "devel-cover"], "answers": [{"comments": [{"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1562152773, "post_id": 56868058, "comment_id": 100286410, "body": "Paul, thanks!  Question edited re. <code>system</code>.  Is there any better/recommended/documented way to detect running under <code>cover</code> than my <code>eval &#39;Devel::Cover::get_coverage()&#39;</code>?"}, {"owner": {"reputation": 411, "user_id": 1030987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b766563b73ab8bac01ce0e3811c9cea7?s=128&d=identicon&r=PG", "display_name": "pjcj", "link": "https://stackoverflow.com/users/1030987/pjcj"}, "reply_to_user": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1562246167, "post_id": 56868058, "comment_id": 100324555, "body": "There is no documented way to know whether Devel::Cover is running, nor is there a recommended way.  My reasons are twofold.  First, I really don&#39;t want people to do anything special when collecting coverage - collecting coverage should, ideally, be transparent to the user.  And secondly, I don&#39;t remember ever coming across a case where I have thought that the only way, or even the superior way, to solve a problem is to do something different when collecting coverage.  As far as a better way is concerned, I would probably check for $Devel::Cover::VERSION but what you have is not bad.  ENOSPC"}], "tags": [], "owner": {"reputation": 411, "user_id": 1030987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b766563b73ab8bac01ce0e3811c9cea7?s=128&d=identicon&r=PG", "display_name": "pjcj", "link": "https://stackoverflow.com/users/1030987/pjcj"}, "is_accepted": true, "score": 3, "last_activity_date": 1562149691, "creation_date": 1562149691, "answer_id": 56868058, "question_id": 56856646, "link": "https://stackoverflow.com/questions/56856646/how-do-i-collect-coverage-from-child-processes-when-running-cover-test-and-n/56868058#56868058", "title": "How do I collect coverage from child processes when running `cover -test`, and not otherwise? (Devel::Cover)", "body": "<p>I think that this, or something similar, is probably about the best you can do.</p>\n\n<p>Devel::Cover is pretty much designed as a development tool and, as such, has the assumption that you will be testing one project at a time.  It seems that you are really wanting to test two projects here.  If that's not the case then perhaps there is a better way of combining the parts than using system?</p>\n\n<p>But if your current solution is the best way of combining this code then I'm not sure there's a better way to get complete coverage.  You could perhaps be explicit and set an environment variable if you want coverage, for example, or you could set $PERL5OPT rather than change the system call, but essentially that's the same solution.</p>\n"}], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 56868058, "answer_count": 1, "score": 6, "last_activity_date": 1570715907, "creation_date": 1562084724, "last_edit_date": 1562152975, "question_id": 56856646, "link": "https://stackoverflow.com/questions/56856646/how-do-i-collect-coverage-from-child-processes-when-running-cover-test-and-n", "title": "How do I collect coverage from child processes when running `cover -test`, and not otherwise? (Devel::Cover)", "body": "<p>(I think I've seen the answer to this, but I can't find it again.  The closest I have come across is <a href=\"https://stackoverflow.com/q/24420346/2877364\">this question</a>).</p>\n\n<p>I am hacking on <a href=\"https://metacpan.org/pod/distribution/App-PRT/script/prt\" rel=\"nofollow noreferrer\">prt</a> and am trying to get full coverage data for my changes.  Some of my new tests call <code>system($^X, 'prt', ...)</code> to run child processes.  I then test the output of those processes.  However, Devel::Cover does not collect coverage data in the child processes.  How do I collect that data, without causing Devel::Cover to run when I do a regular <code>make test</code>?  Currently I have an ugly workaround (see below), but I think there must be a simpler way.</p>\n\n<p>A full MCVE is <a href=\"https://github.com/cxw42/multi-process-devel-cover-test\" rel=\"nofollow noreferrer\">here</a>.  Command line to copy, for your convenience:</p>\n\n<pre><code>git clone https://github.com/cxw42/multi-process-devel-cover-test.git ; cd multi-process-devel-cover-test ; perl Makefile.PL ; make ; cover -test\n</code></pre>\n\n<p>Comment out line 11 of <code>t/01-help.t</code> for the workaround described below.</p>\n\n<p><strong>Edit</strong> The reason I am using <code>system</code> is to get to 100% coverage on <code>-h</code>/<code>--help</code>/<code>--version</code>.  Those switches are handled by <a href=\"https://metacpan.org/pod/Getopt::Long\" rel=\"nofollow noreferrer\">Getopt::Long</a>, which calls <code>exit()</code> automatically.  If necessary, I can use <code>-exitval=&gt;NOEXIT</code> and handle the exit in my own code.</p>\n\n<h3>Things that don't work</h3>\n\n<p><strong><code>PERL5OPT</code></strong></p>\n\n<pre><code>$ PERL5OPT=-MDevel::Cover=-silent,1 cover -test\n/home/cxw/perl5/perlbrew/perls/perlcygbrew-5.26.2-1/bin/cover shouldn't be run with coverage turned on.\n</code></pre>\n\n<p><strong><code>HARNESS_PERL_SWITCHES</code>+<code>cover</code></strong></p>\n\n<pre><code>$ HARNESS_PERL_SWITCHES=-MDevel::Cover=-silent,1 cover -test\n...\nt/01-help.t .. # Devel::Cover not covering\n...\n----- ------ ------ ------ ------ ------ ------ ------\nFile    stmt   bran   cond    sub    pod   time  total\n----- ------ ------ ------ ------ ------ ------ ------\nTotal    n/a    n/a    n/a    n/a    n/a    n/a    n/a\n----- ------ ------ ------ ------ ------ ------ ------\n</code></pre>\n\n<p><strong><code>HARNESS_PERL_SWITCHES</code>+EUMM <code>make test</code></strong></p>\n\n<pre><code>$ HARNESS_PERL_SWITCHES=-MDevel::Cover=-silent,1 make test\n...\nt/01-help.t .. # Devel::Cover not covering\n...\n$ (export HARNESS_PERL_SWITCHES=-MDevel::Cover=-silent,1 ; make test)\n...\nt/01-help.t .. # Devel::Cover not covering\n...\n</code></pre>\n\n<h3>Current workaround</h3>\n\n<p>At present, the only way I have found is to manually add <code>-MDevel::Cover</code> to the command line when I call <code>system</code>.  Inspired by <a href=\"https://stackoverflow.com/a/24429239/2877364\">this answer</a> and <a href=\"https://github.com/pjcj/Devel--Cover/blob/7f365d2e412675bc741adef43d6cc9353cf1885b/t/internal/criteria.t#L10-L18\" rel=\"nofollow noreferrer\">the corresponding tests</a>, I have the following workaround:</p>\n\n<pre><code># Detect whether Devel::Cover is running\nmy $is_covering = !!(eval 'Devel::Cover::get_coverage()');\nmy @perl = ($^X, $is_covering ? ('-MDevel::Cover=-silent,1') : ());\ndiag $is_covering ? 'Devel::Cover running' : 'Devel::Cover not covering';\n\n# Pass the Devel::Cover option, if any, to the child process\nsystem(@perl, 'prt', ...);\n</code></pre>\n\n<p>In the MCVE, the workaround is <a href=\"https://github.com/cxw42/multi-process-devel-cover-test/blob/5395b4f0894790db01773a4f90c4713110f39e63/t/01-help.t#L9-L12\" rel=\"nofollow noreferrer\">here</a> and it is used <a href=\"https://github.com/cxw42/multi-process-devel-cover-test/blob/5395b4f0894790db01773a4f90c4713110f39e63/t/01-help.t#L25\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": ["linux", "shell", "perl", "aix"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1562083008, "post_id": 56856138, "comment_id": 100262570, "body": "You could try use <a href=\"https://perldoc.perl.org/functions/flock.html\" rel=\"nofollow noreferrer\"><code>flock</code></a>, but it will only work if the other processes also respect the lock"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1562083112, "post_id": 56856138, "comment_id": 100262626, "body": "There is no mandatory file locking on Linux, so you cannot prevent other processes from accessing the file. You can only use cooperative locking, that means all affected processes have to use the same locking mechanism."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1562086328, "post_id": 56856138, "comment_id": 100264124, "body": "Aix or Linux? You have both OSes tagged..."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1562086668, "post_id": 56856138, "comment_id": 100264259, "body": "Linux, at least, <i>kind</i> of has mandatory file locking, but it requires jumping through a lot of hoops to set up, is all but officially deprecated, and shouldn&#39;t be used."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1562107883, "post_id": 56856138, "comment_id": 100271558, "body": "An alternative is to write to a <i>temporary</i> file and then append to the original when your write is done."}, {"owner": {"reputation": 788, "user_id": 7950519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8769c083cd0e90972fc1b58797e8126d?s=128&d=identicon&r=PG&f=1", "display_name": "syam", "link": "https://stackoverflow.com/users/7950519/syam"}, "edited": false, "score": 0, "creation_date": 1562136272, "post_id": 56856138, "comment_id": 100277610, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/24388009/linux-flock-how-to-just-lock-a-file\">Linux flock, how to &quot;just&quot; lock a file?</a>"}, {"owner": {"reputation": 47, "user_id": 6747560, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w0b4tVQThqg/AAAAAAAAAAI/AAAAAAAAB7A/ch0PRsynF8c/photo.jpg?sz=128", "display_name": "Balaji Dongare", "link": "https://stackoverflow.com/users/6747560/balaji-dongare"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1562164573, "post_id": 56856138, "comment_id": 100293666, "body": "@Shawn it&#39;s for both AIX and linux"}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 3, "last_activity_date": 1562106764, "last_edit_date": 1562106764, "creation_date": 1562083161, "answer_id": 56856246, "question_id": 56856138, "link": "https://stackoverflow.com/questions/56856138/how-to-prevent-others-for-read-write-on-the-file-while-it-is-writing/56856246#56856246", "title": "How to prevent others for read /write on the file, while it is writing", "body": "<p>The <a href=\"http://metacpan.org/pod/perlfunc#flock\" rel=\"nofollow noreferrer\"><code>flock</code></a> file locking mechanism in Perl is advisory. It can be used to exclude other processes from accessing a file <strong>if those other processes are also using flock</strong>. Even this mechanism will be flaky with some systems (I'm looking at <em>you</em>, NFS).</p>\n\n<p>It may be more reliable to operate with an anonymous, temporary file that other processes will not know about, and to rename your file when you are done with it.</p>\n\n<pre><code>use File::Temp;\n\nmy ($fh, $obscure_filename) = tempfile();\nprint $fh \"some data ...\\n\";\n...\nclose $fh;\nrename($obscure_filename, $the_real_name_of_the_file);\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 6747560, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w0b4tVQThqg/AAAAAAAAAAI/AAAAAAAAB7A/ch0PRsynF8c/photo.jpg?sz=128", "display_name": "Balaji Dongare", "link": "https://stackoverflow.com/users/6747560/balaji-dongare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562106764, "creation_date": 1562082749, "last_edit_date": 1562086362, "question_id": 56856138, "link": "https://stackoverflow.com/questions/56856138/how-to-prevent-others-for-read-write-on-the-file-while-it-is-writing", "title": "How to prevent others for read /write on the file, while it is writing", "body": "<p>I wanted to put a lock while one process is writing on the text file. so no other process can read or write.</p>\n"}, {"tags": ["python", "perl", "aws-lambda"], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 1803124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5170121ac0196b0f8bc59fa0efb7a337?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/1803124/ben"}, "edited": false, "score": 0, "creation_date": 1562137934, "post_id": 56861051, "comment_id": 100278482, "body": "I&#39;m sorry I can only upvote you once. Thank you! Thank you! Thank you!"}, {"owner": {"reputation": 611, "user_id": 1803124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5170121ac0196b0f8bc59fa0efb7a337?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/1803124/ben"}, "edited": false, "score": 2, "creation_date": 1562140568, "post_id": 56861051, "comment_id": 100279784, "body": "Just in case anybody else ends up here, the only amendment I had to make aside from @ysth suggestion was to change the shebang to point to <code>&#47;opt&#47;bin&#47;perl</code> as this is where the runtime keeps the interpreter."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 4, "last_activity_date": 1562109046, "creation_date": 1562109046, "answer_id": 56861051, "question_id": 56856009, "link": "https://stackoverflow.com/questions/56856009/running-perl-script-in-lambda-function-with-python3-6-runtime/56861051#56861051", "title": "Running perl script in lambda function with python3.6 runtime", "body": "<p>Try adding to your Referenced Layers one of the ARNs listed in <a href=\"https://p3rl.org/AWS::Lambda\" rel=\"nofollow noreferrer\">https://p3rl.org/AWS::Lambda</a> (there are instructions there).</p>\n\n<p>I haven't done this myself, but from everything I see it should work.</p>\n"}], "owner": {"reputation": 611, "user_id": 1803124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5170121ac0196b0f8bc59fa0efb7a337?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/1803124/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "accepted_answer_id": 56861051, "answer_count": 1, "score": 1, "last_activity_date": 1562109046, "creation_date": 1562082263, "question_id": 56856009, "link": "https://stackoverflow.com/questions/56856009/running-perl-script-in-lambda-function-with-python3-6-runtime", "title": "Running perl script in lambda function with python3.6 runtime", "body": "<p>I am trying to run an <a href=\"https://www.sno.phy.queensu.ca/~phil/exiftool/\" rel=\"nofollow noreferrer\">exiftool</a> for reading image meta data within a python script, as part of a lambda function on AWS.</p>\n\n<p>On an ec2 instance running amazon linux, <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html\" rel=\"nofollow noreferrer\">which is what the python3.6 runtime uses</a>, I can download the tool, extract it, then run it easily. However, trying to do this from my python script in the lambda function does not work.</p>\n\n<p>My lambda function is as follows:</p>\n\n<pre><code>import imageio\nimport subprocess\nimport utils\nimport os\nimport stat\nimport boto3\n\ns3_client = boto3.client('s3')\n\n# get exif tool\ns3_client.download_file(\n    'zipped.code',\n    'Image-ExifTool-11.53.tar.gz', \n    '/tmp/Image-ExifTool-11.53.tar.gz')\np = subprocess.run('tar -zxvf Image-ExifTool-11.53.tar.gz', cwd='/tmp', shell=True)\n\ndef get_meta_data(im):\n    p = subprocess.Popen(\n        '/tmp/Image-ExifTool-11.53/exiftool -',\n        stdout=subprocess.PIPE,\n        stdin=subprocess.PIPE,\n        stderr=subprocess.PIPE,\n        shell=True)\n    out, err = p.communicate(input=imageio.imwrite('&lt;bytes&gt;', im, format='jpg'))\n    print(out) # b''\n    print(err) # b'/bin/sh: /tmp/Image-ExifTool-11.53/exiftool: /usr/bin/perl: bad interpreter: No such file or directory\\n'\n\n\ndef lambda_handler(event, context):\n    src_key = event['src_key']\n    image = utils.download_image_to_memory(src_key)\n    print(get_meta_data(image))\n</code></pre>\n\n<p>I have ran this code locally and it works. If I print the contents of <code>/usr/bin</code> within the lambda function by <code>print(os.listdit('/usr/bin'))</code> there is no <code>perl</code> executable in there. However in the <code>/usr/bin</code> directory on an ec2 instance with amazon linux the <code>perl</code> executable is there.</p>\n\n<p>I suspect the problem is my lack of perl (the tool is written in perl), but why is there no perl interpretter given that lambdas are supposed to run with the amazon linux image?</p>\n"}, {"tags": ["html", "oracle", "perl"], "comments": [{"owner": {"reputation": 133386, "user_id": 295783, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/da548667c834109a7059b51060e53dff?s=128&d=identicon&r=PG", "display_name": "mplungjan", "link": "https://stackoverflow.com/users/295783/mplungjan"}, "edited": false, "score": 0, "creation_date": 1562076474, "post_id": 56854229, "comment_id": 100258696, "body": "You mean <code>&lt;td class=&#39;cell100 column2 $STATE&#39;&gt;$STATE&lt;&#47;td&gt;</code> and a css of <code>.DOWN { color : blue } .PM { color: yellow } .MDS { color: red }</code>"}, {"owner": {"reputation": 133386, "user_id": 295783, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/da548667c834109a7059b51060e53dff?s=128&d=identicon&r=PG", "display_name": "mplungjan", "link": "https://stackoverflow.com/users/295783/mplungjan"}, "edited": false, "score": 0, "creation_date": 1562076536, "post_id": 56854229, "comment_id": 100258737, "body": "Why not just make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> using HTML and CSS? Is there any need for us to see the perl and other server stuff?"}, {"owner": {"reputation": 133386, "user_id": 295783, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/da548667c834109a7059b51060e53dff?s=128&d=identicon&r=PG", "display_name": "mplungjan", "link": "https://stackoverflow.com/users/295783/mplungjan"}, "edited": false, "score": 0, "creation_date": 1562076838, "post_id": 56854229, "comment_id": 100258936, "body": "Also your HTML is invalid. You have loose <code>&lt;&#47;div&gt;</code>s and <code>&lt;&#47;tr&gt;</code>s flowing around and a quote and a dot too many in <code>data-target=&#39;&#39;.navbar-ex1-collapse&#39;&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 10100529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e832048030d543dbdd934c78045967?s=128&d=identicon&r=PG&f=1", "display_name": "Dc5nipe", "link": "https://stackoverflow.com/users/10100529/dc5nipe"}, "edited": false, "score": 0, "creation_date": 1562077637, "post_id": 56854496, "comment_id": 100259429, "body": "When the SQL runs it populates the table so there will be multiple rows which you can&#39;t tell which states will be on what row. I uploaded a picture above."}, {"owner": {"reputation": 133386, "user_id": 295783, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/da548667c834109a7059b51060e53dff?s=128&d=identicon&r=PG", "display_name": "mplungjan", "link": "https://stackoverflow.com/users/295783/mplungjan"}, "reply_to_user": {"reputation": 119, "user_id": 10100529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e832048030d543dbdd934c78045967?s=128&d=identicon&r=PG&f=1", "display_name": "Dc5nipe", "link": "https://stackoverflow.com/users/10100529/dc5nipe"}, "edited": false, "score": 0, "creation_date": 1562077707, "post_id": 56854496, "comment_id": 100259471, "body": "You dont need to -  just add it as a class: <code>&lt;td class=&#39;cell100 column2 $STATE&#39;&gt;$STATE&lt;&#47;td&gt; </code>"}], "tags": [], "owner": {"reputation": 133386, "user_id": 295783, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/da548667c834109a7059b51060e53dff?s=128&d=identicon&r=PG", "display_name": "mplungjan", "link": "https://stackoverflow.com/users/295783/mplungjan"}, "is_accepted": true, "score": 2, "last_activity_date": 1562078020, "last_edit_date": 1562078020, "creation_date": 1562076923, "answer_id": 56854496, "question_id": 56854229, "link": "https://stackoverflow.com/questions/56854229/formatting-data-to-be-a-certain-color/56854496#56854496", "title": "Formatting Data to be a certain color", "body": "<p>Just reuse the values as class names</p>\n\n<p><code>&lt;td class='cell100 column2 $STATE'&gt;$STATE&lt;/td&gt;</code></p>\n\n<p>I have fixed a few illegal HTML elements too</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.DOWN {\r\n  color: blue\r\n}\r\n\r\n.PM {\r\n  color: yellow\r\n}\r\n\r\n.MDS {\r\n  color: red\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css\" /&gt;\r\n&lt;div id='page-wrapper'&gt;\r\n  &lt;div class='row'&gt;\r\n    &lt;div class='col-lg-12'&gt;\r\n      &lt;h1&gt;Critical Dashboard &lt;small&gt;Metrology&lt;/small&gt;&lt;/h1&gt;\r\n\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n  &lt;div class='row'&gt;\r\n    &lt;div class='col-lg-12'&gt;\r\n      &lt;div class='panel panel-primary'&gt;\r\n        &lt;div class='panel-heading'&gt;\r\n          &lt;h3 class='panel-title'&gt;&lt;i class='fa fa-bar-chart-o'&gt;&lt;/i&gt; Fab Dashboard - DMOS5 &lt;/h3&gt;\r\n        &lt;/div&gt;\r\n        &lt;table class='table'&gt;\r\n          &lt;thead&gt;\r\n\r\n            &lt;tr&gt;\r\n\r\n              &lt;th&gt;MISTI&lt;/th&gt;\r\n              &lt;th&gt;STATE&lt;/th&gt;\r\n              &lt;th&gt;HRS&lt;/th&gt;\r\n\r\n            &lt;/tr&gt;\r\n          &lt;/thead&gt;\r\n          &lt;tbody&gt;\r\n            &lt;tr class='row100 body'&gt;\r\n              &lt;td class='cell100 column1'&gt;\r\n                &lt;form ACTION='http://d5lxgenwebapp01z.dal.make.ti.com/get_de1_de2_misti_comments.pl' METHOD='POST' target='_blank' NAME='userInput2'&gt;\r\n                  &lt;INPUT TYPE='hidden' NAME='eq' MAXLENGTH='8' VALUE='$MISTI' /&gt;\r\n                  &lt;INPUT TYPE='hidden' NAME='pages' SIZE='3' MAXLENGTH='2' VALUE='50' /&gt;\r\n                  &lt;INPUT TYPE='submit' NAME='submit' VALUE='$MISTI' /&gt;\r\n                &lt;/form&gt;\r\n              &lt;/td&gt;\r\n              &lt;td class='cell100 column2 DOWN'&gt;DOWN&lt;/td&gt;\r\n              &lt;td class='cell100 column3'&gt;$HRS&lt;/td&gt;\r\n\r\n            &lt;/tr&gt;\r\n            &lt;tr class='row100 body'&gt;\r\n              &lt;td class='cell100 column1'&gt;\r\n                &lt;form ACTION='http://d5lxgenwebapp01z.dal.make.ti.com/get_de1_de2_misti_comments.pl' METHOD='POST' target='_blank' NAME='userInput2'&gt;\r\n                  &lt;INPUT TYPE='hidden' NAME='eq' MAXLENGTH='8' VALUE='$MISTI' /&gt;\r\n                  &lt;INPUT TYPE='hidden' NAME='pages' SIZE='3' MAXLENGTH='2' VALUE='50' /&gt;\r\n                  &lt;INPUT TYPE='submit' NAME='submit' VALUE='$MISTI' /&gt;\r\n                &lt;/form&gt;\r\n              &lt;/td&gt;\r\n              &lt;td class='cell100 column2 PM'&gt;PM&lt;/td&gt;\r\n              &lt;td class='cell100 column3'&gt;$HRS&lt;/td&gt;\r\n\r\n            &lt;/tr&gt;\r\n            &lt;tr class='row100 body'&gt;\r\n              &lt;td class='cell100 column1'&gt;\r\n                &lt;form ACTION='http://d5lxgenwebapp01z.dal.make.ti.com/get_de1_de2_misti_comments.pl' METHOD='POST' target='_blank' NAME='userInput2'&gt;\r\n                  &lt;INPUT TYPE='hidden' NAME='eq' MAXLENGTH='8' VALUE='$MISTI' /&gt;\r\n                  &lt;INPUT TYPE='hidden' NAME='pages' SIZE='3' MAXLENGTH='2' VALUE='50' /&gt;\r\n                  &lt;INPUT TYPE='submit' NAME='submit' VALUE='$MISTI' /&gt;\r\n                &lt;/form&gt;\r\n              &lt;/td&gt;\r\n              &lt;td class='cell100 column2 MDS'&gt;MDS&lt;/td&gt;\r\n              &lt;td class='cell100 column3'&gt;$HRS&lt;/td&gt;\r\n\r\n            &lt;/tr&gt;\r\n\r\n\r\n\r\n          &lt;/tbody&gt;\r\n        &lt;/table&gt;\r\n      &lt;/div&gt;\r\n    &lt;/div&gt;\r\n\r\n  &lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1562078734, "creation_date": 1562078734, "answer_id": 56855003, "question_id": 56854229, "link": "https://stackoverflow.com/questions/56854229/formatting-data-to-be-a-certain-color/56855003#56855003", "title": "Formatting Data to be a certain color", "body": "<p>There are a few improvements that you can make to this code.</p>\n\n<ul>\n<li>Always have <code>use strict</code> and <code>use warnings</code> in your code. And fix the problems they reveal (mostly declaring variables with <code>my</code> by the looks of it).</li>\n<li>You have <code>use CGI /:standard/</code> which imports a load of CGI's functions into your namespace, but then you only call those functions as methods on your CGI object (in <code>$q</code>) so that import is unnecessary.</li>\n<li>You use indirect object notation (<code>new CGI</code>) to create your CGI object. This will work 99% of the time but in the rare cases when it breaks you will waste days tracking down the problem. Far better to use <code>CGI-&gt;new</code> instead.</li>\n<li>The HTML creation functions in CGI.pm (you use <code>start_html()</code>) have been <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#HTML-Generation-functions-should-no-longer-be-used\" rel=\"nofollow noreferrer\">deprecated for some time now</a>. Please don't use them.</li>\n<li>Having raw HTML in your Perl code is likely to be a maintenance problem (as you seem to have discovered, given the errors in your HTML). I strongly recommend moving your HTML out of your Perl code and into templates. <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">CGI::Alternatives</a> has some suggestions on ways to do this.</li>\n</ul>\n"}], "owner": {"reputation": 119, "user_id": 10100529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e832048030d543dbdd934c78045967?s=128&d=identicon&r=PG&f=1", "display_name": "Dc5nipe", "link": "https://stackoverflow.com/users/10100529/dc5nipe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 56854496, "answer_count": 2, "score": 0, "last_activity_date": 1562078734, "creation_date": 1562076043, "last_edit_date": 1562077610, "question_id": 56854229, "link": "https://stackoverflow.com/questions/56854229/formatting-data-to-be-a-certain-color", "title": "Formatting Data to be a certain color", "body": "<p>So the output works perfect but what I need help on is when the SQL outputs the data and I would like the data to be a certain color based on states. This query will pull all the states that ARE NOT \"PROD\" 'NM','TERM','NULL','IDLE', 'YER'. The states that it will display in the table are \"DOWN\", \"PM\", and \"MDS\". Colors I would like for it to output are BLUE, YELLOW, RED. Can someone please help me with this? Thank you in advance! <a href=\"https://i.stack.imgur.com/X86WT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X86WT.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>  #!/usr/bin/perl\nuse LWP::UserAgent;\nuse HTTP::Request::Common qw(POST GET);\nuse CGI qw/:standard /;\nuse DBI;\n\n$dbh = DBI-&gt;connect('DBI:ODBC:SMSDWDE2','admin','admin',{RaiseError =&gt;1, AutoCommit=&gt;1});\nmy $q = new CGI();\nprint $q-&gt;header;\nprint $q-&gt;start_html(-head=&gt;meta({-http_equiv =&gt; 'X-UA-Compatible',\n                       -content=&gt;'IE=edge,chrome=1'}),\n\n                       -style =&gt; {'src'=&gt;'css/eq - Copy1.css'},\n                                      {'src'=&gt;'vendor/perfect-scrollbar/perfect-scrollbar.css'},\n                                      {'src'=&gt;'vendor/bootstrap/css/bootstrap.min.css'},\n                                      {'src'=&gt;'fonts/font-awesome-4.7.0/css/font-awesome.min.css'},\n                                      {'src'=&gt;'vendor/animate/animate.css'},\n                                      {'src'=&gt;'vendor/select2/select2.min.css'},\n                                      {'src'=&gt;'css/util.css'},\n                                      {'src'=&gt;'css/main.css'},\n                                      -script =&gt;{'type'=&gt;'text/javascript','src'=&gt;'js/main.js'},\n                                      {'type'=&gt;'text/javascript','src'=&gt;'vendor/jquery/jquery-3.2.1.min.js'},\n                                      {'type'=&gt;'text/javascript','src'=&gt;'vendor/bootstrap/js/popper.js'},\n                                      {'type'=&gt;'text/javascript','src'=&gt;'vendor/bootstrap/js/bootstrap.min.js'},\n                                      {'type'=&gt;'text/javascript','src'=&gt;'vendor/select2/select2.min.js'},\n                                      {'type'=&gt;'text/javascript','src'=&gt;'vendor/perfect-scrollbar/perfect-scrollbar.min.js'},\n\n                                 -title=&gt;'MET IN PHOTO');\n\nprint \"             \n&lt;div id='wrapper'&gt;\n        &lt;nav class='navbar navbar-inverse navbar-fixed-top' role='navigation'&gt;\n            &lt;div class='navbar-header'&gt;\n                &lt;button type='button' class='navbar-toggle' data-toggle='collapse' data-target=''.navbar-ex1-collapse'&gt;\n                    &lt;span class='sr-only'&gt;Toggle navigation&lt;/span&gt;\n                    &lt;span class='icon-bar'&gt;&lt;/span&gt;\n                    &lt;span class='icon-bar'&gt;&lt;/span&gt;\n                    &lt;span class='icon-bar'&gt;&lt;/span&gt;\n                &lt;/button&gt;\n                &lt;a class='logo' href='#'&gt;\n                    &lt;img src='images/ti-logo.png' alt='CoolAdmin' /&gt;\n                &lt;/a&gt;\n                &lt;/div&gt;\n            &lt;div class='collapse navbar-collapse navbar-ex1-collapse'&gt;\n                &lt;ul id='active' class='nav navbar-nav side-nav'&gt;\n\n                    &lt;li&gt;&lt;a href='CriticalToolsMet.html'&gt;&lt;i class='fa fa-globe'&gt;&lt;/i&gt; METROLOGY&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href='CriticalToolsCMPIMP.html'&gt;&lt;i class='fa fa-globe'&gt;&lt;/i&gt; CMP/IMP&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href='CriticalToolsDIFFWET.html'&gt;&lt;i class='fa fa-globe'&gt;&lt;/i&gt; DIFF/WET&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href='CriticalToolsPHOTO.html'&gt;&lt;i class='fa fa-globe'&gt;&lt;/i&gt; PHOTO&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href='CriticalToolsPLASMA.html'&gt;&lt;i class='fa fa-globe'&gt;&lt;/i&gt; PLASMA&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href='CriticalToolsTHINFILM.html'&gt;&lt;i class='fa fa-globe'&gt;&lt;/i&gt; THINFILM&lt;/a&gt;&lt;/li&gt;\n                &lt;/ul&gt;\n                &lt;ul class='nav navbar-nav navbar-right navbar-user'&gt;\n                    &lt;li class='divider-vertical'&gt;&lt;/li&gt;\n                    &lt;li&gt;\n                        &lt;form class='navbar-search'&gt;\n                            &lt;input type='text' placeholder='Search' class='form-control'&gt;\n                        &lt;/form&gt;\n                    &lt;/li&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n        &lt;/nav&gt;\n        &lt;div id='page-wrapper'&gt;\n            &lt;div class='row'&gt;\n                &lt;div class='col-lg-12'&gt;\n                    &lt;h1&gt;Critical Dashboard &lt;small&gt;Metrology&lt;/small&gt;&lt;/h1&gt;\n\n                &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;div class='row'&gt;\n                &lt;div class='col-lg-12'&gt;\n                    &lt;div class='panel panel-primary'&gt;\n                        &lt;div class='panel-heading'&gt;\n                            &lt;h3 class='panel-title'&gt;&lt;i class='fa fa-bar-chart-o'&gt;&lt;/i&gt; Fab Dashboard - DMOS5 &lt;/h3&gt;\n                        &lt;/div&gt;\n                        &lt;table class='table'&gt;\n                            &lt;thead&gt;\n\n                            &lt;tr&gt;\n\n                                    &lt;th&gt;MISTI&lt;/th&gt;\n                                    &lt;th&gt;STATE&lt;/th&gt;\n                                    &lt;th&gt;HRS&lt;/th&gt;\n\n                                &lt;/tr&gt;\n                            &lt;/thead&gt;\n                    &lt;/div&gt;\";\n\n$sqlstr=\"Select \n       g.entity as MISTI,\n       t.cur_state      as STATE,\n       ROUND(((SYSDATE-t.cur_state_dttm)*24),2) AS HRS\n\nFrom Entity_Grp_Lst g\nleft outer join trk_id_def t\non g.facility = t.facility\nand g.grp_type = t.grp_type\nand g.entity=t.entity\nand g.grp_type = '720'\nWHERE t.cur_state NOT IN ('PROD','NM','TERM','NULL','IDLE', 'YER')\nand Entity_Grp_type = '041'\nand g.ENTITY_GRP in ('MET')\n-- add and g.entity in ('WSI04') to list all tools\n\nAND ROUND(((SYSDATE-t.cur_state_dttm)*24),2) &gt; 48  \norder by t.cur_state_DTTM desc\n\n\";\n$sth = $dbh-&gt;prepare($sqlstr);\n$sth-&gt;execute();\n$sth-&gt;bind_columns(undef, \\$MISTI, \\$STATE, \\$HRS);\nwhile($sth-&gt;fetch()) {\n\n   print \"\n\n                            &lt;tbody&gt;\n                                &lt;tr class='row100 body'&gt;\n                                    &lt;td class='cell100 column1'&gt;&lt;FORM ACTION='http://d5lxgenwebapp01z.dal.make.ti.com/get_de1_de2_misti_comments.pl' METHOD='POST' target='_blank' NAME='userInput2'&gt;\n        &lt;INPUT TYPE='hidden' NAME='eq' MAXLENGTH='8' VALUE='$MISTI'&gt;\n              &lt;INPUT TYPE='hidden' NAME='pages' SIZE='3' MAXLENGTH='2' VALUE='50'&gt;\n        &lt;INPUT TYPE='submit' NAME='submit' VALUE='$MISTI'&gt;&lt;/form&gt;&lt;/td&gt;\n                                    &lt;td class='cell100 column2'&gt;$STATE&lt;/td&gt;\n                                    &lt;td class='cell100 column3'&gt;$HRS&lt;/td&gt;\n\n                                &lt;/tr&gt;\n\n   &lt;/tr&gt;\";\n}\n\nprint \"&lt;/tbody&gt;\n                        &lt;/table&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\";\n$sth-&gt;finish();\n$dbh-&gt;disconnect();\n\nprint \"\n\n\n&lt;/body&gt;&lt;/html&gt;\";\n</code></pre>\n"}, {"tags": ["xml", "perl", "xml-libxml"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 1, "creation_date": 1562069752, "post_id": 56852212, "comment_id": 100254461, "body": "Voting to close as the problem is caused by a typo. The method is called <code>removeChild</code>, not <code>RemoveChild</code>."}, {"owner": {"reputation": 117, "user_id": 8065797, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ccf0cdde904fbc7795b54d48d0303c11?s=128&d=identicon&r=PG&f=1", "display_name": "JanFi86", "link": "https://stackoverflow.com/users/8065797/janfi86"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1562069899, "post_id": 56852212, "comment_id": 100254544, "body": "thank you @Quentin, when corrected error message is&gt; XML::LibXML::Node::removeChild() -- node is not a blessed SV reference at xmltransform.pl line 28."}, {"owner": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "edited": false, "score": 0, "creation_date": 1562070703, "post_id": 56852212, "comment_id": 100255013, "body": "@JanFi86 maybe this helps: <a href=\"https://ubuntuforums.org/showthread.php?t=299381\" rel=\"nofollow noreferrer\">ubuntuforums.org/showthread.php?t=299381</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1562071353, "post_id": 56852212, "comment_id": 100255445, "body": "@JanFi86: So someone fixes the problem that you posted and you respond by editing the question to ask a different question? That&#39;s a bit rude, really. Please revert your edit and ask your new question in a new post."}, {"owner": {"reputation": 117, "user_id": 8065797, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ccf0cdde904fbc7795b54d48d0303c11?s=128&d=identicon&r=PG&f=1", "display_name": "JanFi86", "link": "https://stackoverflow.com/users/8065797/janfi86"}, "edited": false, "score": 0, "creation_date": 1562072024, "post_id": 56852212, "comment_id": 100255914, "body": "@ Dave Cross, I&#39;m sorry, thank you for admonition. I thought that if the problem remains in the same line of the code, It&#39;&#39; be better to stay on the same question. But I should have definitely put there edit remark at least. I&#39;ll be more carefull next time, No bad intention. Thank you"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 8065797, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ccf0cdde904fbc7795b54d48d0303c11?s=128&d=identicon&r=PG&f=1", "display_name": "JanFi86", "link": "https://stackoverflow.com/users/8065797/janfi86"}, "edited": false, "score": 0, "creation_date": 1562074466, "post_id": 56853362, "comment_id": 100257435, "body": "Thank you @Dave Cross, now it worked. Just one more question ... what if  I do want delete not just <i>task</i> node but <i>workflowVertex</i>, it&#39;s parent node? I mean delete parent node based on the child node value ... would you help me with that too?"}, {"owner": {"reputation": 117, "user_id": 8065797, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ccf0cdde904fbc7795b54d48d0303c11?s=128&d=identicon&r=PG&f=1", "display_name": "JanFi86", "link": "https://stackoverflow.com/users/8065797/janfi86"}, "edited": false, "score": 0, "creation_date": 1562075109, "post_id": 56853362, "comment_id": 100257846, "body": "I think I  found the solution : <code>my $parent = $name-&gt; parentNode-&gt;parentNode; say $parent-&gt;removeChild($name-&gt;parentNode);</code>"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1562073316, "creation_date": 1562073316, "answer_id": 56853362, "question_id": 56852212, "link": "https://stackoverflow.com/questions/56852212/perl-removing-node/56853362#56853362", "title": "Perl removing node", "body": "<p>Here is the <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/Node.pod\" rel=\"nofollow noreferrer\">documentation for the <code>removeChild()</code> method</a>:</p>\n\n<blockquote>\n  <p><strong>removeChild</strong></p>\n\n<pre><code>$childnode = $node-&gt;removeChild( $childnode );\n</code></pre>\n  \n  <p>This will unbind the Child Node from its parent <code>$node</code>. The function returns\n  the unbound node. If <code>oldNode</code> is not a child of the given Node the function\n  will fail.</p>\n</blockquote>\n\n<p>(There's a typo there - where it says <code>oldNode</code>, I'm pretty sure it means <code>$childNode</code>.)</p>\n\n<p>It's not very clear, perhaps, but you need to pass <code>removeChild()</code> a node <strong>object</strong>, not just a string. You pass it the literal string \"task[preTask_L1]\" and I'm really not sure where you got that idea from.</p>\n\n<p>I think you've rather confused yourself by using bad names for your variables. Your <code>$name</code> variable contains a node object, not a name. And your <code>$node</code> variable contains the text from the node (which might be considered its \"name\").</p>\n\n<p>I think the simplest fix is to change your line of code to:</p>\n\n<pre><code>say $parent-&gt;removeChild($name);\n</code></pre>\n\n<p>But I really recommend fixing those variable names too. your maintenance programmer (who could well be you in six months time) will thank you :-)</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1562117228, "last_edit_date": 1562117228, "creation_date": 1562096917, "answer_id": 56859153, "question_id": 56852212, "link": "https://stackoverflow.com/questions/56852212/perl-removing-node/56859153#56859153", "title": "Perl removing node", "body": "<p>First of all, please use better variable names. Your horrible names (<code>$name</code> is a <code>task</code> node, <code>$node</code> isn't a node at all, it's not clear to whose parent <code>$parent</code> refers, etc.) makes your code extremely hard to read.</p>\n\n<hr>\n\n<p>You can use</p>\n\n<pre><code>$vertex_node-&gt;parent-&gt;removeChild($vertex_node);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$vertex_node-&gt;unbindNode;\n</code></pre>\n\n<p>to delete the node. Fixed:</p>\n\n<pre><code>my $dom = XML::LibXML-&gt;load_xml( location =&gt; $filename );\n\nfor my $task_node ($dom-&gt;findnodes('/workflowVertices/workflowVertex/task')) {\n    my $task_name = $task_node-&gt;textContent();\n    if ($task_name =~ /_L1/) {\n        my $vertex_node = $task_node-&gt;parent;\n        $vertex_node-&gt;unbindNode;\n        say \"Deleted task $task_name.\";\n    }\n}\n</code></pre>\n\n<p>Alternative approach:</p>\n\n<pre><code>my $dom = XML::LibXML-&gt;load_xml( location =&gt; $filename );\n\nfor my $vertex_node ($dom-&gt;findnodes('/workflowVertices/workflowVertex')) {\n    my $task_name = $vertex_node-&gt;findvalue('task/text()');\n    if ($task_name =~ /_L1/) {\n        $vertex_node-&gt;unbindNode;\n        say \"Deleted task $task_name.\";\n    }\n}\n</code></pre>\n\n<p>If you don't need to print out the task name, this can even be shrunk to the following:</p>\n\n<pre><code>my $dom = XML::LibXML-&gt;load_xml( location =&gt; $filename );\n\n$_-&gt;unbindNode\n    for $dom-&gt;findnodes('/workflowVertices/workflowVertex[contains(task/text(), \"_L1\")]');\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 8065797, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ccf0cdde904fbc7795b54d48d0303c11?s=128&d=identicon&r=PG&f=1", "display_name": "JanFi86", "link": "https://stackoverflow.com/users/8065797/janfi86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 56859153, "answer_count": 2, "score": -1, "last_activity_date": 1562117228, "creation_date": 1562069587, "last_edit_date": 1562070364, "question_id": 56852212, "link": "https://stackoverflow.com/questions/56852212/perl-removing-node", "title": "Perl removing node", "body": "<p>I'm starting with Perl, I know that there are some similiar questions answered, but (due to my lack of experiences) none of them was helpful.</p>\n\n<p>I have xml like this:</p>\n\n<pre><code>&lt;workflowVertices&gt;\n    &lt;workflowVertex&gt;\n    &lt;alias /&gt;\n    &lt;task&gt;Task_L2&lt;/task&gt;\n    &lt;vertexId&gt;128&lt;/vertexId&gt;\n&lt;/workflowVertex&gt;\n&lt;workflowVertex&gt;\n     &lt;alias /&gt;\n     &lt;task&gt;preTask_L1&lt;/task&gt;\n         &lt;vertexId&gt;129&lt;/vertexId&gt;\n   &lt;/workflowVertex&gt;\n&lt;/workflowVertices&gt;\n</code></pre>\n\n<p>I need to delete all workflowVertex nodes that has node task =~ m/_L1/</p>\n\n<p>What I have now:</p>\n\n<pre><code>my $dom = XML::LibXML-&gt;load_xml(location =&gt; $filename);\n\nforeach my $name ($dom-&gt;findnodes('workflowVertices/workflowVertex/task')) \n{\n#say $name-&gt;to_literal();\nif ($name-&gt;to_literal() =~ m/_L1/) {\n    say \"JobName: \" . $name-&gt;to_literal() . \" to be deleted\\n\";\n    my $node = $name-&gt;to_literal();\n    my $parent = $name-&gt; parentNode();\n    say $parent-&gt; removeChild(\"task[$node]\")\n    }\n}\n</code></pre>\n\n<p>But when I execute it it falls on error:</p>\n\n<pre><code>XML::LibXML::Node::removeChild() -- node is not a blessed SV reference at \n</code></pre>\n\n<p>xmltransform.pl line 28.</p>\n\n<p>Line 28. in my code is</p>\n\n<pre><code>say $parent-&gt; removeChild(\"task[$node]\")\n</code></pre>\n\n<p>Would anybody help me?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1562069174, "post_id": 56851933, "comment_id": 100254152, "body": "Because <code>&amp;&amp;</code> has much higher precedence than <code>and</code>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1562078397, "post_id": 56851933, "comment_id": 100259857, "body": "Specifically, it parses as <code>(print(&quot;$1&quot; &amp;&amp; exit)) if ...</code> rather than <code>(print(&quot;$1&quot;) and exit) if ...</code>. So the exit will run before the print, if $1 is non-empty and non-zero, and print will print out a false value (empty string) otherwise."}], "tags": [], "owner": {"reputation": 963, "user_id": 11117210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d5aa68aac6b9fe841dc9221c477dd8?s=128&d=identicon&r=PG&f=1", "display_name": "truth", "link": "https://stackoverflow.com/users/11117210/truth"}, "is_accepted": false, "score": 2, "last_activity_date": 1562068587, "creation_date": 1562068587, "answer_id": 56851933, "question_id": 56851836, "link": "https://stackoverflow.com/questions/56851836/print-the-capture-group-of-the-first-match-and-exit/56851933#56851933", "title": "Print the capture group of the first match and exit", "body": "<p>replace <code>&amp;&amp;</code> with <code>and</code>  </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>print \"$1\" and exit if m/([a-z]o)/\n</code></pre>\n"}], "owner": {"reputation": 3434, "user_id": 392986, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/d19d52745553f78f2a1fb39e93aacbf3?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/392986/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562068787, "creation_date": 1562068240, "last_edit_date": 1562068787, "question_id": 56851836, "link": "https://stackoverflow.com/questions/56851836/print-the-capture-group-of-the-first-match-and-exit", "title": "Print the capture group of the first match and exit", "body": "<p>I am trying to get the first match's first capture group from piped input to perl. For example this prints all matches:</p>\n\n<pre><code>$ printf \"hello\\nworld\" | perl -nle 'print \"$1\" if m/([a-z]o)/'\nlo\nwo\n</code></pre>\n\n<p>However,</p>\n\n<pre><code>$ printf \"hello\\nworld\" | perl -nle 'print \"$1\" &amp;&amp; exit if m/([a-z]o)/'\n</code></pre>\n\n<p>Does not work. How can I just get the first match?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 12672, "user_id": 1200821, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Cm117.jpg?s=128&g=1", "display_name": "Juan Diego Godoy Robles", "link": "https://stackoverflow.com/users/1200821/juan-diego-godoy-robles"}, "is_accepted": true, "score": 3, "last_activity_date": 1562065660, "last_edit_date": 1562065660, "creation_date": 1562060508, "answer_id": 56849556, "question_id": 56849284, "link": "https://stackoverflow.com/questions/56849284/select-file-by-filenamepattern/56849556#56849556", "title": "Select file by filenamepattern", "body": "<p>You just need a regex that matches your needs, example:</p>\n\n<pre><code>#!/usr/bin/perl\n\nmy $filename = \"2018_09_01_Filename.java\";\n\n\nif ($filename =~ m/\\D?20\\d{2}_\\d{2}_\\d{2}\\D?/) {\n    print \"match\\n\";\n}\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<ul>\n<li><p><code>\\D?</code> matches any character that's not a digit</p>\n\n<ul>\n<li><code>?</code> Quantifier \u2014 Matches between zero and one times, as many times as possible, giving back as needed (greedy)</li>\n</ul></li>\n<li><p><code>20</code> matches the characters 20 literally (case sensitive)</p></li>\n<li><p><code>\\d{2}</code> matches a digit</p>\n\n<ul>\n<li><code>{2}</code> Quantifier \u2014 Matches exactly 2 times</li>\n</ul></li>\n<li><p><code>_</code> matches the character <code>_</code> literally</p></li>\n<li><p><code>\\d{2}</code> matches a digit</p>\n\n<ul>\n<li><code>{2}</code> Quantifier \u2014 Matches exactly 2 times</li>\n</ul></li>\n<li><p><code>_</code> matches the character <code>_</code> literally</p></li>\n<li><p><code>\\d{2}</code> matches a digit</p>\n\n<ul>\n<li><code>{2}</code> Quantifier \u2014 Matches exactly 2 times</li>\n</ul></li>\n<li><p><code>\\D?</code> matches any character that's not a digit</p>\n\n<ul>\n<li><code>?</code> Quantifier \u2014 Matches between zero and one times, as many times as possible, giving back as needed (greedy)</li>\n</ul></li>\n</ul>\n\n<p>Check the <a href=\"https://regex101.com/r/nEUSPg/1/\" rel=\"nofollow noreferrer\"><em>demo</em></a></p>\n"}], "owner": {"reputation": 397, "user_id": 9892631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9270664e143242e154d99f1401acab12?s=128&d=identicon&r=PG&f=1", "display_name": "poisn", "link": "https://stackoverflow.com/users/9892631/poisn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 56849556, "answer_count": 1, "score": 1, "last_activity_date": 1562068119, "creation_date": 1562059605, "last_edit_date": 1562068119, "question_id": 56849284, "link": "https://stackoverflow.com/questions/56849284/select-file-by-filenamepattern", "title": "Select file by filenamepattern", "body": "<p>In my directory I've following filename pattern:</p>\n\n<blockquote>\n  <p><strong>1. Pattern</strong><br>\n  2018_09_01_Filename.java</p>\n</blockquote>\n\n<p>or</p>\n\n<blockquote>\n  <p><strong>2. Pattern</strong><br>\n  kit-deploy-190718_Filename.java</p>\n</blockquote>\n\n<p>Now I'm trying to select every file in the directory wich is matching with the first pattern (the date can be different but it's alway <strong>year_month_day</strong>). But I don't get any further.  </p>\n\n<p>I've been thinking that I could split the basename from the file so that I get the first ten characters. Then I'll look if this is matching with a pattern.</p>\n\n<pre><code>my $filename = basename($file);\n\nmy $chars = substr($filename, 0 , 10);\n\nif ($chars =~ m/2000_01_01/) {\n\n    print \"match\\n\";\n\n}\nelse {\n    print \"Don't match\";\n}\n</code></pre>\n\n<hr>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 963, "user_id": 11117210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d5aa68aac6b9fe841dc9221c477dd8?s=128&d=identicon&r=PG&f=1", "display_name": "truth", "link": "https://stackoverflow.com/users/11117210/truth"}, "is_accepted": true, "score": 3, "last_activity_date": 1562049060, "creation_date": 1562049060, "answer_id": 56846556, "question_id": 56846309, "link": "https://stackoverflow.com/questions/56846309/i-need-help-regarding-perl-hash-of-array/56846556#56846556", "title": "I need help regarding perl hash of array", "body": "<p>I understand you want <code>@a</code> to hold all values but last, and <code>$b</code> to just hold the last value.  How about:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use feature 'say';\nmy %abc = (0 =&gt; [1,2,3], 1 =&gt; [1,5]);\n\nfor my $key (keys %abc) {\n    my @a = @{$abc{$key}};\n    my $b = pop @a;\n    say \"@a / $b\"\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 963, "user_id": 11117210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d5aa68aac6b9fe841dc9221c477dd8?s=128&d=identicon&r=PG&f=1", "display_name": "truth", "link": "https://stackoverflow.com/users/11117210/truth"}, "edited": false, "score": 0, "creation_date": 1562065112, "post_id": 56850919, "comment_id": 100252016, "body": "there is more than one way to do it!"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1562068816, "last_edit_date": 1562068816, "creation_date": 1562065040, "answer_id": 56850919, "question_id": 56846309, "link": "https://stackoverflow.com/questions/56846309/i-need-help-regarding-perl-hash-of-array/56850919#56850919", "title": "I need help regarding perl hash of array", "body": "<p>I'd almost certainly use something like <a href=\"https://stackoverflow.com/a/56846556/7231\">the other solution here</a>. But here's a different solution that a) uses <code>values()</code> instead of <code>keys()</code> and b) uses <code>reverse()</code> to simplify(?!) the assignments. Don't do this :-)</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nmy %abc = (0 =&gt; [1,2,3], 1 =&gt; [1,5]);\n\nfor (values %abc) {\n  my ($b, @a) = reverse @$_;\n  @a = reverse @a;\n\n  say \"@a / $b\";\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 5035398, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aTRUoUpeyvQ/AAAAAAAAAAI/AAAAAAAAA3M/d1TDAyu_Wqc/photo.jpg?sz=128", "display_name": "Anupam Das", "link": "https://stackoverflow.com/users/5035398/anupam-das"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 56846556, "answer_count": 2, "score": -1, "last_activity_date": 1562068816, "creation_date": 1562047817, "question_id": 56846309, "link": "https://stackoverflow.com/questions/56846309/i-need-help-regarding-perl-hash-of-array", "title": "I need help regarding perl hash of array", "body": "<p>I have a hash of array and two variables -1 list and 1-scalar value</p>\n\n<p>How do I do this?</p>\n\n<p>I want two things out of this. First is a list for every key.\nSecond is I need $b to have the value of last array element of every key </p>\n\n<pre><code>  %abc=(\n        0=&gt;[1,2,3],\n        1=&gt;[1,5]\n        );\n    @a;\n    $b;\n</code></pre>\n\n<p>for key 0 i need @a to have [1,2] and for key 1 i need @a to have [1].\nfor 0 key i need $b to have value 3 and for key 1 i need $b to have value 5</p>\n"}, {"tags": ["perl", "floating-point"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1562042044, "post_id": 56845146, "comment_id": 100241865, "body": "What are &quot;floating point bits&quot;?"}, {"owner": {"reputation": 1, "user_id": 8432827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dab1b16394ad95848cfbf4de222a59be?s=128&d=identicon&r=PG&f=1", "display_name": "HackSMW", "link": "https://stackoverflow.com/users/8432827/hacksmw"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1562042222, "post_id": 56845146, "comment_id": 100241896, "body": "In Java, long s = Double.doubleToLongBits(3.14);"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1562044429, "post_id": 56845146, "comment_id": 100242356, "body": "faster?  do you think it isn&#39;t fast enough?  have you benchmarked it?  please show what you tried"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1562047318, "last_edit_date": 1562047318, "creation_date": 1562044675, "answer_id": 56845761, "question_id": 56845146, "link": "https://stackoverflow.com/questions/56845146/is-there-a-faster-way-to-get-floating-point-bits-than-pack-unpack-in-perl/56845761#56845761", "title": "Is there a faster way to get floating point bits than pack/unpack in Perl?", "body": "<p>Your question makes no sense. You're asking for the fast way to do something the slow way. If we knew what <a href=\"https://www.perlmonks.org/?node_id=542341\" rel=\"nofollow noreferrer\">you really wanted to do</a>, we could provide a better solution.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\n\nuse Inline C =&gt; &lt;&lt;'__EOS__';\n\n   void cast_double_to_uv(SV* sv) {\n      dXSARGS;\n\n      double d = (double)SvNV(sv);\n      UV uv;\n\n      if (sizeof(uv) &lt; sizeof(double))\n         croak(\"Integers too small to hold a double.\");\n\n      if (BYTEORDER == 0x1234) {\n         /* Little-endian */\n         memcpy(&amp;uv, &amp;d, sizeof(double));\n\n         if (sizeof(uv) &gt; sizeof(double))\n            memset(((char*)&amp;uv)+sizeof(double), 0, sizeof(double)-sizeof(uv));\n      } else {\n         /* Big-endian */\n         if (sizeof(uv) &gt; sizeof(double))\n            memset(&amp;uv, 0, sizeof(double)-sizeof(uv));\n\n         memcpy(((char*)&amp;uv)+sizeof(double)-sizeof(uv), &amp;d, sizeof(double));\n      }\n\n      XSRETURN_UV(uv);\n   }\n\n__EOS__\n\nsay cast_double_to_uv(5.5);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8432827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dab1b16394ad95848cfbf4de222a59be?s=128&d=identicon&r=PG&f=1", "display_name": "HackSMW", "link": "https://stackoverflow.com/users/8432827/hacksmw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1562047318, "creation_date": 1562040166, "question_id": 56845146, "link": "https://stackoverflow.com/questions/56845146/is-there-a-faster-way-to-get-floating-point-bits-than-pack-unpack-in-perl", "title": "Is there a faster way to get floating point bits than pack/unpack in Perl?", "body": "<p>Is there a faster way to get floating point bits than pack/unpack in Perl? It is not necessary to be IEEE754</p>\n"}, {"tags": ["arrays", "perl", "for-loop", "nested"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1562043555, "post_id": 56845141, "comment_id": 100242142, "body": "I&#39;ve formatted your matrices, please check whether they are correct."}, {"owner": {"reputation": 79, "user_id": 4926965, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/sDOxy.jpg?s=128&g=1", "display_name": "SadieRose", "link": "https://stackoverflow.com/users/4926965/sadierose"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1562044298, "post_id": 56845141, "comment_id": 100242313, "body": "Yes, better looking"}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 1, "creation_date": 1562045468, "post_id": 56845141, "comment_id": 100242614, "body": "check where <code>my @row = ()</code> appears in my answer. It needs to be inside the x loop - you need a separate variable for each iteration"}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 1, "creation_date": 1562097105, "post_id": 56845141, "comment_id": 100268340, "body": "Your most recent implementation of <code>maths</code> returns an array but you don&#39;t save it (eg. <code>my @matrixArray = maths(\\@array1, \\@array2);</code>). Your previous implementation updated the global variable as a side-effect (which is probably best avoided)."}, {"owner": {"reputation": 79, "user_id": 4926965, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/sDOxy.jpg?s=128&g=1", "display_name": "SadieRose", "link": "https://stackoverflow.com/users/4926965/sadierose"}, "edited": false, "score": 0, "creation_date": 1562173605, "post_id": 56845141, "comment_id": 100298485, "body": "OMG! Thank you so much!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1563007541, "post_id": 56845141, "comment_id": 100566186, "body": "Have a look at <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 4926965, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/sDOxy.jpg?s=128&g=1", "display_name": "SadieRose", "link": "https://stackoverflow.com/users/4926965/sadierose"}, "edited": false, "score": 0, "creation_date": 1562044362, "post_id": 56845608, "comment_id": 100242331, "body": "I love the simpler code. I especially love the maths sub. One question though, we are *required to pass references into the function. I&#39;m unsure if this will work as such.."}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "reply_to_user": {"reputation": 79, "user_id": 4926965, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/sDOxy.jpg?s=128&g=1", "display_name": "SadieRose", "link": "https://stackoverflow.com/users/4926965/sadierose"}, "edited": false, "score": 0, "creation_date": 1562044579, "post_id": 56845608, "comment_id": 100242392, "body": "It is a drop-in replacement. <code>@_</code> is the array of arguments. <code>$_[0]</code> is the first element. <code>@{ $_[0] }</code> converts the ref to a list."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1562047422, "post_id": 56845608, "comment_id": 100243254, "body": "The simpler code still makes needless copies of the arrays, and it still stupidly uses <code>my @a = ();</code>. <a href=\"https://pastebin.com/KJfb7mFu\" rel=\"nofollow noreferrer\">Better version</a>."}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1562074801, "post_id": 56845608, "comment_id": 100257660, "body": "thanks @ikegami, are you sure about the copies? I can&#39;t see any difference in -MO=Concise output (but that&#39;s really beyond my level). Declaring assumptions (explicitly initialising) seems like stylistic choice. Why do you say it is &quot;stupid&quot;?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1562093807, "post_id": 56845608, "comment_id": 100267140, "body": "Re &quot;<i>are you sure about the copies?</i>&quot;, Definitely. Easy to verify: Change <code>$array1[0]</code>, and it won&#39;t change <code>$_[0][0]</code>. Each scalar of the array is copied. Now, that&#39;s not that expensive, even for strings (because of COW in 5.20+), but still a complete waste."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1562094246, "post_id": 56845608, "comment_id": 100267302, "body": "Re &quot;<i>Why do you say it is &quot;stupid&quot;?</i>&quot;, Adding unncessarry costs to the reader/maintainer is the definition of a bad programming practice."}], "tags": [], "owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "is_accepted": false, "score": 2, "last_activity_date": 1562045813, "last_edit_date": 1562045813, "creation_date": 1562043605, "answer_id": 56845608, "question_id": 56845141, "link": "https://stackoverflow.com/questions/56845141/for-loop-issues-in-creating-nested-array/56845608#56845608", "title": "For Loop Issues in creating nested array", "body": "<p>The second program is mostly correct.</p>\n\n<p>The problem is that you didn't unpack the second level of the array.</p>\n\n<pre><code>foreach my $x (@matrixArray){\n    print \"$x \\n\";\n}\n</code></pre>\n\n<p>should be something like:</p>\n\n<pre><code>foreach my $x (@matrixArray) {\n    print join(\" \", @{$x}), \"\\n\";\n}\n\n# or just:\nprint join(\" \", @{$_}), \"\\n\" for @matrixArray;\n</code></pre>\n\n<hr>\n\n<p>Your <code>maths</code> function can be made shorter without losing legibility (it may actually make it more legible) by cutting out unnecessary temporary variables and indexing. For example:</p>\n\n<pre><code>sub maths {\n    my @array1 = @{ $_[0] };\n    my @array2 = @{ $_[1] }; # or: ... = @{ (shift) };\n    my @res = ();\n    for my $x (@array1) {\n        my @row = (); # &lt;-- bugfix of original code\n        for my $y (@array2) {\n            my $maths = $x * $y;\n            push @row, $maths;\n        }\n        push @res, \\@row;\n    }\n    return @res;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1562044441, "post_id": 56845679, "comment_id": 100242362, "body": "<code>dd \\@matrix;</code> ?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1562044670, "post_id": 56845679, "comment_id": 100242414, "body": "@jhnc A habit, as most of those printers take a reference.  Changed to array, since the docs do have an explicit example... thank you"}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1562044713, "post_id": 56845679, "comment_id": 100242429, "body": "No, I mean <code>matrix</code> v <code>factors</code>."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 4, "last_activity_date": 1562128367, "last_edit_date": 1562128367, "creation_date": 1562044124, "answer_id": 56845679, "question_id": 56845141, "link": "https://stackoverflow.com/questions/56845141/for-loop-issues-in-creating-nested-array/56845679#56845679", "title": "For Loop Issues in creating nested array", "body": "<p>It appears that you need a matrix with rows obtained by multiplying an array by elements of another.</p>\n\n<p>One way</p>\n\n<pre><code>use warnings;\nuse strict;    \nuse Data::Dump qw(dd);\n\nmy @ary     = (2, 4, 6);\nmy @factors = (1, 2, 3);\n\nmy @matrix = map {\n    my $factor = $_;\n    [ map { $_ * $factor } @ary ]\n} @factors;\n\ndd @matrix;\n</code></pre>\n\n<p>The array <code>@matrix</code>, formed by the outer <code>map</code>, has array references for each element and is thus (at least) a two-dimensional structure (a \"matrix\"). Those arrayrefs are built with <code>[ ]</code>, which creates an anonymous array out of a list inside. That list is generated by <code>map</code> over the <code>@ary</code>.</p>\n\n<p>I use <a href=\"https://metacpan.org/pod/Data::Dump\" rel=\"nofollow noreferrer\">Data::Dump</a> to nicely print complex data. In the core there is <code>Data::Dumper</code>.</p>\n\n<hr>\n\n<p>With a lot of work like this, and with large data, efficiency may matter.   The common wisdom would have it that direct iteration should be a bit faster than <code>map</code>, but here is a benchmark. This also serves to show more basic ways as well.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Benchmark qw(cmpthese);    \n\nmy $runfor = shift // 5;  # run each case for these many seconds\n\nsub outer_map {\n    my ($ary, $fact) = @_; \n    my @matrix = map {\n        my $factor = $_; \n        [ map { $_ * $factor } @$ary ]\n    } @$fact;\n    return \\@matrix;\n}\n\nsub outer {\n    my ($ary, $fact) = @_; \n    my @matrix; \n    foreach my $factor (@$fact) {\n        push @matrix, []; \n        foreach my $elem (@$ary) {\n            push @{$matrix[-1]}, $elem * $factor;\n        }\n    }   \n    return \\@matrix;\n}\n\nsub outer_tmp {\n    my ($ary, $fact) = @_;\n    my @matrix;\n    foreach my $factor (@$fact) {\n        my @tmp;\n        foreach my $elem (@$ary) {\n            push @tmp, $elem * $factor;\n        }\n        push @matrix, \\@tmp;\n    }\n    return \\@matrix;\n}\n\nmy @a1 = map { 2*$_ } 1..1_000;  # worth comparing only for large data\nmy @f1 = 1..1_000;\n\ncmpthese( -$runfor, {\n    direct =&gt; sub { my $r1 = outer(\\@a1, \\@f1) },\n    w_tmp  =&gt; sub { my $r2 = outer_tmp(\\@a1, \\@f1) },\n    w_map  =&gt; sub { my $r3 = outer_map(\\@a1, \\@f1) },\n});\n</code></pre>\n\n<p>On a nice machine with v5.16 this prints</p>\n\n<pre>\n         Rate direct  w_map  w_tmp\ndirect 11.0/s     --    -3%   -20%\nw_map  11.4/s     3%     --   -17%\nw_tmp  13.8/s    25%    21%     --\n</pre>\n\n<p>The results are rather similar on v5.29.2, and on an oldish laptop.</p>\n\n<p>So <code>map</code> is a touch faster than building a matrix directly, and 15-20% slower than the method using a temporary array for rows, which I'd also consider clearest. The explicit loops can be improved a little by avoiding scopes and scalars, and the \"direct\" method can perhaps be sped up some by using indices. But these are dreaded micro-optimizations, and for fringe benefits at best.</p>\n\n<p>Note that timings such as these make sense only with truly large amounts of data, what the above isn't. (I did test with both dimensions ten times as large, with very similar results.)</p>\n"}], "owner": {"reputation": 79, "user_id": 4926965, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/sDOxy.jpg?s=128&g=1", "display_name": "SadieRose", "link": "https://stackoverflow.com/users/4926965/sadierose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1562128367, "creation_date": 1562040120, "last_edit_date": 1562082466, "question_id": 56845141, "link": "https://stackoverflow.com/questions/56845141/for-loop-issues-in-creating-nested-array", "title": "For Loop Issues in creating nested array", "body": "<p>Creating a matrix of products for three element arrays. I understand Perl does not have multi-dimensional arrays and are flattened. I have been using refs but I can't seem to get past the for loop issue in getting three products into a single array and pushing that array into a different single array. And I could be way off too. Be nice, but I've spent too many hours on this.</p>\n\n<p>I have moved values inside and out of various places i.e. { }, printed out variables until I'm blue and used $last all over for debugging. I'm likely fried at this point.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @array1 = (1, 2, 3);\nmy @array2 = (2, 4, 6);\nmy @matrixArray = ();\nmy $matrixArray;\nmy @row; \n\nmy @finalArray = maths(\\@array1, \\@array2);\nprint @finalArray;\n\nsub maths{\n    my $array1ref = shift;\n    my $array2ref = shift;\n    my $value1;\n    my $value2;\n    my $maths;\n    my @row = ();\n\n    my @array1 = @{$array1ref};\n    my @array2 = @{$array2ref};\n    my $len1 = @array1;\n    my $len2 = @array2;\n\nfor my $x (0 ..($len1 -1)){\n    #iterate through first array at each value\n    $value1 = $array1[$x];\n        #print $value1, \" value1 \\n\";\n\n    for my $y (0 .. ($len2 -1)){\n    #iterate through second array at each value\n    $value2 = $array2[$y];\n            #print $value2, \" value2 \\n\";\n\n    #calculate new values\n    $maths = $value1 * $value2;\n            #exactly right here\n            #print $maths, \" maths \\n\" ;\n            push @row, $maths;\n    }\n}\n#and exactly right here but not set of arrays\n#print @row, \"\\n\";\nreturn @row;       \n}\n</code></pre>\n\n<p>Currently I'm able to get this: 246481261218. Which is the correct dumb math but...</p>\n\n<p>it should appear as a matrix:</p>\n\n<pre>\n2  4  6\n4  8 12\n6 12 18\n</pre>\n\n<p>I am not passing three arrays so it seems my issue is up in the sub routine before I can get on with anything else. This seems to be a theme that I often miss. So sorry if I sound inept.</p>\n\n<p>EDIT***\nThis was working but I couldn't unpack it</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @array1 = (1, 2, 3);\nmy @array2 = (2, 4, 6);\nmy @matrixArray = ();\n\nmaths(\\@array1, \\@array2);\nforeach my $x (@matrixArray){\n    print \"$x \\n\";\n}\n\nsub maths{\n    my $array1ref = shift;\n    my $array2ref = shift;\n    my $value1;\n    my $value2;\n    my $maths;\n    my @row = ();\n    my $row; \n\n    my @array1 = @{$array1ref};\n    my @array2 = @{$array2ref};\n    my $len1 = @array1;\n    my $len2 = @array2;\n\n    for my $x (0 ..($len1 -1)){\n        #iterate through first array at each value\n        $value1 = $array1[$x];\n\n        for my $y (0 .. ($len2 -1)){\n        #iterate through second array at each value\n        $value2 = $array2[$y];\n\n        #calculate new values\n        $maths = $value1 * $value2;\n        push @row, $maths;\n        $row  = \\@row;\n    }\n        push @matrixArray, $row;\n    }\n    return @matrixArray;\n}\n</code></pre>\n\n<p>The output right after the function call is this:</p>\n\n<pre>\nARRAY(0x55bbe2c667b0) \nARRAY(0x55bbe2c667b0) \nARRAY(0x55bbe2c667b0) \n</pre>\n\n<p>which would be the (line 10) print of $x.</p>\n\n<p>****EDIT\nThis Works (almost):</p>\n\n<pre><code>print join(\" \", @{$_}), \"\\n\" for @matrixArray;\n</code></pre>\n\n<p>Output is a bit wrong...</p>\n\n<p>2 4 6 4 8 12 6 12 18</p>\n\n<p>2 4 6 4 8 12 6 12 18</p>\n\n<p>2 4 6 4 8 12 6 12 18</p>\n\n<p>And of note: I knew $x was an array but I seemed to run into trouble trying to unpack it correctly. And I'm no longer a fan of Perl. I'm pining for the fjords of Python.</p>\n\n<p>And *****EDIT\nThis is working great and I get three arrays out of it:</p>\n\n<pre><code>sub maths{\nmy ($array1, $array2) = @_;\nmy @res;\nfor my $x (@$array1) {\n    my @row;\n    for my $y (@$array2) {\n        push @row, $x * $y;\n    }\n\n    push @res, \\@row;\n}\n    #This is the correct structure on print @res!\n    return @res;\n}\n</code></pre>\n\n<p>But, though it's putting it together correctly, I have no output after the call</p>\n\n<pre><code>maths(\\@array1, \\@array2);\n</code></pre>\n\n<p>NOTHING HERE...</p>\n\n<pre><code>print @res;\nprint join(\" \", @{$_}), \"\\n\" for @res;\n\nforeach my $x (@res){\n    print join(\" \", @{$x}), \"\\n\";\n}\n</code></pre>\n\n<p>And of course a million thanks! I regret taking this stupid course and fear my grade will eventually do me in. Still pining for Python!</p>\n"}, {"tags": ["perl", "raku"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1562052943, "post_id": 56844396, "comment_id": 100245687, "body": "Does using <code>return \\@monsters;</code> help?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1562054414, "post_id": 56844396, "comment_id": 100246386, "body": "<code>return \\@monsters</code> works  for me"}, {"owner": {"reputation": 480, "user_id": 7659520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab541977126b2cb1f5dea8b6b3d12db?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Brenner", "link": "https://stackoverflow.com/users/7659520/joseph-brenner"}, "edited": false, "score": 1, "creation_date": 1562079310, "post_id": 56844396, "comment_id": 100260441, "body": "ikegami: yes, returning the reference to \\@monsters can be made to work (with the code as is, I end up with an array in the first element of @stuff)."}], "answers": [{"comments": [{"owner": {"reputation": 480, "user_id": 7659520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab541977126b2cb1f5dea8b6b3d12db?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Brenner", "link": "https://stackoverflow.com/users/7659520/joseph-brenner"}, "edited": false, "score": 1, "creation_date": 1562108817, "post_id": 56859806, "comment_id": 100271737, "body": "Yes raiph is right, the story is a little more complicated than this:     use Inline::Perl5;    my $p5 = Inline::Perl5.new;     my $perl5_defsub = q:to/END/;       sub whadaya_want {           wantarray() ? &#39;LIST&#39; : &#39;SCALAR&#39;;       }    END     $p5.run: $perl5_defsub;     my $run_context  = $p5.run(  &#39;whadaya_want&#39; );    my $call_context = $p5.call( &#39;whadaya_want&#39; );          say &quot;run: &quot;, $run_context;    say &quot;call: &quot;, $call_context;    # run: SCALAR    # call: LIST"}, {"owner": {"reputation": 480, "user_id": 7659520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab541977126b2cb1f5dea8b6b3d12db?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Brenner", "link": "https://stackoverflow.com/users/7659520/joseph-brenner"}, "edited": false, "score": 0, "creation_date": 1562108876, "post_id": 56859806, "comment_id": 100271751, "body": "Okay, one more time:"}, {"owner": {"reputation": 480, "user_id": 7659520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab541977126b2cb1f5dea8b6b3d12db?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Brenner", "link": "https://stackoverflow.com/users/7659520/joseph-brenner"}, "edited": false, "score": 1, "creation_date": 1562108911, "post_id": 56859806, "comment_id": 100271759, "body": "Yes raiph is right, the story is a little more complicated than this:     <code>use Inline::Perl5;    my $p5 = Inline::Perl5.new;     my $perl5_defsub = q:to&#47;END&#47;;       sub whadaya_want {           wantarray() ? &#39;LIST&#39; : &#39;SCALAR&#39;;       }    END     $p5.run: $perl5_defsub;     my $run_context  = $p5.run(  &#39;whadaya_want&#39; );    my $call_context = $p5.call( &#39;whadaya_want&#39; );          say &quot;run: &quot;, $run_context;    say &quot;call: &quot;, $call_context;    # run: SCALAR    # call: LIST</code>"}, {"owner": {"reputation": 480, "user_id": 7659520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab541977126b2cb1f5dea8b6b3d12db?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Brenner", "link": "https://stackoverflow.com/users/7659520/joseph-brenner"}, "edited": false, "score": 1, "creation_date": 1562108962, "post_id": 56859806, "comment_id": 100271773, "body": "You know, I find it peculiar that some people don&#39;t get why not everyone likes stackoverflow.   I&#39;ll do another update of my question to get in my code in a readable fashion."}], "tags": [], "owner": {"reputation": 12324, "user_id": 14132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/579c95ecf03cf9f61e5e6637e57feebe?s=128&d=identicon&r=PG", "display_name": "moritz", "link": "https://stackoverflow.com/users/14132/moritz"}, "is_accepted": true, "score": 8, "last_activity_date": 1562100204, "creation_date": 1562100204, "answer_id": 56859806, "question_id": 56844396, "link": "https://stackoverflow.com/questions/56844396/list-return-from-inlineperl5-gives-a-count-of-items-not-the-list/56859806#56859806", "title": "list return from Inline:Perl5 gives a count of items, not the list", "body": "<p><code>Perl5::Inline</code> puts return values into scalar context.</p>\n\n<p>As background, in Perl 5, context flows inwards into routines, so a routine always knows which context it's in.</p>\n\n<p>In Perl 6, context flows outwards, so a routine returns an object that can behave differently in different context.</p>\n\n<p>This impedance mismatch between Perl 5 and Perl 6 means that <code>Inline::Perl5</code> has to decide to call Perl 5 routines in one context, and that's scalar.</p>\n\n<p>As ikegami pointed out, the proper solution is to return a proper scalar, aka reference (in Perl 5 speak). Limitations in <code>Inline::Perl5</code> might mean you need to explicitly dereference on the Perl 6 side.</p>\n"}, {"comments": [{"owner": {"reputation": 31843, "user_id": 1337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72de240484e389dbedb6a3e428b9f0c1?s=128&d=identicon&r=PG", "display_name": "Brad Gilbert", "link": "https://stackoverflow.com/users/1337/brad-gilbert"}, "edited": false, "score": 0, "creation_date": 1564680038, "post_id": 56875126, "comment_id": 101120153, "body": "I recommend waiting a day or so before posting an answer to your own question."}, {"owner": {"reputation": 516, "user_id": 7270649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ec3b94d0bc28315cba4749408e34a1?s=128&d=identicon&r=PG&f=1", "display_name": "jubilatious1", "link": "https://stackoverflow.com/users/7270649/jubilatious1"}, "edited": false, "score": 1, "creation_date": 1615604832, "post_id": 56875126, "comment_id": 117750067, "body": "I appreciate the Perl5 knowledge in this SO Question, and in the 2 (remaining?) answers. But any commentary regarding &quot;answering one&#39;s own question&quot; appears moot at this point in time."}, {"owner": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "reply_to_user": {"reputation": 516, "user_id": 7270649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ec3b94d0bc28315cba4749408e34a1?s=128&d=identicon&r=PG&f=1", "display_name": "jubilatious1", "link": "https://stackoverflow.com/users/7270649/jubilatious1"}, "edited": false, "score": 1, "creation_date": 1615935895, "post_id": 56875126, "comment_id": 117846004, "body": "@jubilatious1 Thanks. My bit about answering one&#39;s own question was moot when I wrote it too. What I meant was... Nevermind. :) Answer edited."}], "tags": [], "owner": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "is_accepted": false, "score": 9, "last_activity_date": 1615935712, "last_edit_date": 1615935712, "creation_date": 1562174067, "answer_id": 56875126, "question_id": 56844396, "link": "https://stackoverflow.com/questions/56844396/list-return-from-inlineperl5-gives-a-count-of-items-not-the-list/56875126#56875126", "title": "list return from Inline:Perl5 gives a count of items, not the list", "body": "<p>Moritz's answer is excellent and explains IP5's dilemma. But niner is ingenious, so IP5 provides all the variations one needs:</p>\n<hr />\n<ul>\n<li><p>Call a Perl <em><strong>sub</strong></em> in <em><strong>list</strong></em> context:</p>\n<pre><code>Inline::Perl5.new.call: 'subname', arg1, arg2 ...\n</code></pre>\n<p>See <a href=\"https://github.com/niner/Inline-Perl5#call-a-perl-5-function\" rel=\"nofollow noreferrer\">IP5: Call a Perl function</a>.</p>\n</li>\n</ul>\n<hr />\n<ul>\n<li><p>Call a Perl <em><strong>sub</strong></em> in <em><strong>scalar</strong></em> context:</p>\n<pre><code>Inline::Perl5.new.run: 'subname arg1, arg2 ...'\n</code></pre>\n<p>or</p>\n<pre><code>EVAL 'subname arg1, arg2 ...', :lang&lt;Perl5&gt;\n</code></pre>\n<p>See <a href=\"https://github.com/niner/Inline-Perl5#run-arbitrary-perl-5-code\" rel=\"nofollow noreferrer\">IP5: Run arbitrary Perl code</a>.</p>\n</li>\n</ul>\n<hr />\n<ul>\n<li><p>Call a Perl <em><strong>method</strong></em> in <em><strong>list</strong></em> context:</p>\n<p>Use regular Raku syntax:</p>\n<pre><code>$perl-object .foo: arg1, arg2 ...\n</code></pre>\n<p>to call the <code>foo</code> method on a Perl object held in <code>$perl-object</code> passing it <code>arg1</code> and <code>arg2</code> as its first two arguments (ignoring the invocant).</p>\n<p>See <a href=\"https://github.com/niner/Inline-Perl5#invoke-a-method-on-a-perl-5-object\" rel=\"nofollow noreferrer\">IP5: Invoke a method on a Perl object</a>.</p>\n</li>\n</ul>\n<hr />\n<ul>\n<li><p>Call a Perl <em><strong>method</strong></em> in <em><strong>scalar</strong></em> context:</p>\n<p>Use regular Raku syntax but insert <code>Scalar</code> as the first positional argument (ignoring the invocant):</p>\n<pre><code>$perl-object .foo: Scalar, arg1, arg2 ...\n</code></pre>\n<p>to call the <code>foo</code> method on a Perl object held in <code>$perl-object</code> passing it <code>arg1</code> and <code>arg2</code> as its first two arguments.</p>\n<p>IP5 removes the <code>Scalar</code> before calling the Perl method.</p>\n<p>See <a href=\"https://github.com/niner/Inline-Perl5#invoking-a-method-in-scalar-context\" rel=\"nofollow noreferrer\">IP5: Invoking a method in scalar context</a>.</p>\n</li>\n</ul>\n<hr />\n<h1>Dealing with the Inlines</h1>\n<p>I think Moritz's answer was a solid resolution of the question, and that mine has rounded it out.</p>\n<p>But what if you're reading this and are interested in, or dealing with, other Inline issues?</p>\n<p>The sections starting at <strong>What to expect when using foreign language adaptors</strong> of <a href=\"https://stackoverflow.com/a/54768361/1077672\">my answer to <strong>Raku: getting array ref for Perl Module</strong></a> are an attempt to outline a mini generic guide on what to expect, and how to deal with problems, relative to Raku's Inlines.</p>\n"}], "owner": {"reputation": 480, "user_id": 7659520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab541977126b2cb1f5dea8b6b3d12db?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Brenner", "link": "https://stackoverflow.com/users/7659520/joseph-brenner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 1, "accepted_answer_id": 56859806, "answer_count": 2, "score": 14, "last_activity_date": 1615935712, "creation_date": 1562032979, "last_edit_date": 1575574249, "question_id": 56844396, "link": "https://stackoverflow.com/questions/56844396/list-return-from-inlineperl5-gives-a-count-of-items-not-the-list", "title": "list return from Inline:Perl5 gives a count of items, not the list", "body": "<p>Some simple Inline::Perl5 code returns a list, but it seems to return the count of the items rather than the actual list.   </p>\n\n<p>Changing the number of items involved changes the count.   </p>\n\n<pre><code>use Inline::Perl5;                                             \nmy $p5 = Inline::Perl5.new;                                    \n\nmy $perl5_code = q:to/END/;                                    \n   sub p5_data {                                               \n      my @monsters = qw( godzilla blob tingler kong dorisday );\n      return @monsters;                                        \n   }                                                           \n\n   p5_data();                                                  \nEND                                                            \n\nmy @stuff = $p5.run: $perl5_code;                              \nsay @stuff; # [5]                                              \n</code></pre>\n\n<p>I thought I'd get the list of strings stored in the array, but instead it acts like something is switching it to scalar context.</p>\n\n<p>Update:</p>\n\n<p>ikeami points out that it works better to return the reference to\nthe array:</p>\n\n<pre><code>return \\@monsters;\n</code></pre>\n\n<p>Though, then you end up with an array in the first element of the\n@stuff array when you do this:</p>\n\n<pre><code>my @stuff = $p5.run: $perl5_code;                              \n</code></pre>\n\n<p>An alternate approach (from reading the Inline::Perl5 docs), is after doing a <code>$p5.run</code> to define the perl5 sub, to call it from perl6:</p>\n\n<pre><code>my @stuff = $p5.call('p5_data');  \n</code></pre>\n\n<p>Then the list return (<code>return @monsters;</code>) gets loaded into the\narray as I expected:</p>\n\n<pre><code>[godzilla blob tingler kong dorisday]\n</code></pre>\n\n<p>This is a recently installed Inline::Perl5 of version 0.40, on \n\"Rakudo Star version 2019.03.1 built on MoarVM version 2019.03 implementing\nPerl 6.d\".</p>\n\n<p>Update2: So, it seems that \"run\" implies a scalar context and \"call\" is a list context. </p>\n\n<pre><code>use Inline::Perl5;\nmy $p5 = Inline::Perl5.new;\n\nmy $perl5_defsub = q:to/END/;\n   sub whadaya_want {\n       wantarray() ? 'LIST' : 'SCALAR';\n   }\nEND\n\n$p5.run: $perl5_defsub;\n\nmy $run_context  = $p5.run(  'whadaya_want' );\nmy $call_context = $p5.call( 'whadaya_want' );  \n\nsay \"run: \", $run_context;\nsay \"call: \", $call_context;\n# run: SCALAR\n# call: LIST\n</code></pre>\n"}, {"tags": ["perl", "serialization", "pack", "unpack"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1562025576, "post_id": 56843728, "comment_id": 100239050, "body": "Re &quot;<i>I suppose I could pass a string with an enormous number of zero bytes</i>&quot;, That wouldn&#39;t work for <code>(a)*</code>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1562025981, "last_edit_date": 1562025981, "creation_date": 1562025644, "answer_id": 56843780, "question_id": 56843728, "link": "https://stackoverflow.com/questions/56843728/get-the-number-of-elements-for-a-perl-pack-unpack-template/56843780#56843780", "title": "Get the number of elements for a Perl pack/unpack template", "body": "<p>There's no builtin tool provided to do this.</p>\n\n<p>I doubt something exists on CPAN, but feel free to search there to see if there's something that can help you. (Module recommendations are off-topic.)</p>\n"}], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 56843780, "answer_count": 1, "score": 1, "last_activity_date": 1562025981, "creation_date": 1562025114, "last_edit_date": 1562025523, "question_id": 56843728, "link": "https://stackoverflow.com/questions/56843728/get-the-number-of-elements-for-a-perl-pack-unpack-template", "title": "Get the number of elements for a Perl pack/unpack template", "body": "<p>Given a template string for the <code>pack</code> or <code>unpack</code> function, is there a simple way to determine the minimum number of additional arguments expected by <code>pack</code>, and/or the minimum number of values that would be returned by a successful <code>unpack</code>?</p>\n\n<p>For example:</p>\n\n<pre><code>unpack_element_count(\"vVC16a16\") =&gt; 19 # a16 gives one string\npack_element_count(\"(VVVvx4)2\")  =&gt; 8  # x4 ignored, 4*2\npack_element_count(\"v*\")         =&gt; 0\n</code></pre>\n\n<p><code>$count =()= unpack($template, \"\");</code> doesn't sound good, since <a href=\"https://perldoc.perl.org/functions/unpack.html\" rel=\"nofollow noreferrer\">the documentation for <code>unpack</code></a> says on attempting to unpack a string which is too short, \"the result is not well defined\". I suppose I could pass a string with an enormous number of zero bytes, but that sounds rather inefficient, and possibly might not be valid for some fancier templates?</p>\n\n<p>If it helps, I'm mainly actually interested in just templates with fixed element counts, meaning no <code>*</code> counts, no <code>/</code> prefix-count-in-data formats, etc.  So an answer to this limited case will be helpful; an answer to the more general case (the minimum of a variable count) would be interesting.</p>\n"}, {"tags": ["bash", "perl", "sequence"], "answers": [{"comments": [{"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1562017457, "post_id": 56841270, "comment_id": 100237429, "body": "<i>I&#39;m not sure how you got 5 sequences associated with Cluster 2</i> Change <code>$results{$cluster}++;</code> to <code>$results{$cluster} += tr&#47;&gt;&#47;&#47;</code>"}], "tags": [], "owner": {"reputation": 727, "user_id": 2059832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8oSY3.gif?s=128&g=1", "display_name": "drmrgd", "link": "https://stackoverflow.com/users/2059832/drmrgd"}, "is_accepted": true, "score": 1, "last_activity_date": 1562008619, "creation_date": 1562008619, "answer_id": 56841270, "question_id": 56840793, "link": "https://stackoverflow.com/questions/56840793/how-to-count-sequences-that-belong-a-cluster-from-cd-hit-output/56841270#56841270", "title": "How to count sequences that belong a cluster? (from cd-hit output)", "body": "<p>Would be good for you to show us what you've tried, and also I'm not sure how you got 5 sequences associated with Cluster 2 (there are only 4 in your output, but I notice that #1 is missing from the list, so maybe it's a copy / paste error?).  But, one way to do it in Perl, since you've included that tag, is to read the file line by line, and if you see a 'Cluster' string make it a hash key, else (for subsequent lines), iterate the count like this:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse autodie;\n\nmy %results;\nmy $cluster;\n\nwhile (&lt;DATA&gt;) {\n    if ($_ =~ /Cluster/) {\n        chomp($cluster = $_);\n        $results{$cluster} = 0;\n    } else {\n        $results{$cluster}++;\n    }\n}\n\nprint \"$_\\t$results{$_}\\n\" for (sort { $a cmp $b } keys %results);\n\n__DATA__\nCluster 1\n0 33aa, &gt;abu-miR-101a:1-8... *\nCluster 2\n0 33aa, &gt;abu-miR-103:1-8... * 1 33aa, &gt;NODE_603086_length_... at 100.00%\n2 33aa, &gt;NODE_603086_length_... at 100.00%\n3 33aa, &gt;NODE_603086_length_... at 100.00%\n4 33aa, &gt;NODE_603086_length_... at 100.00%\nCluster 3\n0 33aa, &gt;abu-miR-10543:1-8... *\n1 33aa, &gt;abu-miR-10543:1-8... at 100.00%\nCluster 4\n0 33aa, &gt;abu-miR-10544:1-8... *\nCluster 5\n0 33aa, &gt;abu-miR-10545-5p:1-... *\n</code></pre>\n\n<p>I've made a lot of assumptions here (for example, new Clusters will always start with a line containing the string \"Cluster #\" followed by subsequent lines containing sequences related to each \"Cluster\").  This is just a basic example of one quick way to think about it, and you'll likely have to tweak this to meet your final needs.</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 11694193, "user_type": "registered", "profile_image": "https://graph.facebook.com/2621640947846736/picture?type=large", "display_name": "Jordana Oliveira", "link": "https://stackoverflow.com/users/11694193/jordana-oliveira"}, "is_accepted": false, "score": 0, "last_activity_date": 1562096282, "creation_date": 1562096282, "answer_id": 56859024, "question_id": 56840793, "link": "https://stackoverflow.com/questions/56840793/how-to-count-sequences-that-belong-a-cluster-from-cd-hit-output/56859024#56859024", "title": "How to count sequences that belong a cluster? (from cd-hit output)", "body": "<p>Perfect! It works! I just add a sort to obtain the results sorted by numbers. Like this:</p>\n\n<pre><code>perl count-cluster.pl | sort -k 2 -g | head\n</code></pre>\n\n<p>Then the head result:</p>\n\n<blockquote>\n  <p>Cluster 0  64<p>\n  Cluster 1  1<p>\n  Cluster 2  5<p>\n  Cluster 3  2<p>\n  Cluster 4  1<p>\n  Cluster 5  1<p>\n  Cluster 6  1<p>\n  Cluster 7  3<p>\n  Cluster 8  1<p>\n  Cluster 9  1<p></p>\n</blockquote>\n\n<p>Thank you so much! There are more than 3000 lines in my files, and I need this results for three differents conditions, that helps a lot! Thank you!</p>\n"}], "owner": {"reputation": 13, "user_id": 11694193, "user_type": "registered", "profile_image": "https://graph.facebook.com/2621640947846736/picture?type=large", "display_name": "Jordana Oliveira", "link": "https://stackoverflow.com/users/11694193/jordana-oliveira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 56841270, "answer_count": 2, "score": -1, "last_activity_date": 1562096282, "creation_date": 1562006138, "question_id": 56840793, "link": "https://stackoverflow.com/questions/56840793/how-to-count-sequences-that-belong-a-cluster-from-cd-hit-output", "title": "How to count sequences that belong a cluster? (from cd-hit output)", "body": "<p>I have the cd-hit output, I would like to obtain the number of sequences that belongs to a same cluster.</p>\n\n<p>My input:<p></p>\n\n<blockquote>\n  <p>Cluster 1<p>\n  0   33aa, >abu-miR-101a:1-8... *<p>\n  Cluster 2<p>\n  0   33aa, >abu-miR-103:1-8... *\n  1   33aa, >NODE_603086_length_... at 100.00%<p>\n  2   33aa, >NODE_603086_length_... at 100.00%<p>\n  3   33aa, >NODE_603086_length_... at 100.00%<p>\n  4   33aa, >NODE_603086_length_... at 100.00%<p>\n  Cluster 3<p>\n  0   33aa, >abu-miR-10543:1-8... *<p>\n  1   33aa, >abu-miR-10543:1-8... at 100.00%<p>\n  Cluster 4<p>\n  0   33aa, >abu-miR-10544:1-8... *<p>\n  Cluster 5<p>\n  0   33aa, >abu-miR-10545-5p:1-... *<p>\n  <p>\n  <p>\n  I would like this output:<p>\n  Cluster 1 1<p>\n  Cluster 2 5<p>\n  Cluster 3 2<p>\n  Cluster 4 1<p>\n  Cluster 5 1<p></p>\n</blockquote>\n\n<p>I just want the name of cluster in a first column and the number of sequences that this cluster contains in a second column.</p>\n"}, {"tags": ["azure", "rest", "perl", "storage"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1561994350, "post_id": 56838147, "comment_id": 100228955, "body": "<code>my $fdata = &lt;FILE&gt;;</code> will only read the first line of the file. <code>my $fdata = do { local $&#47;; &lt;FILE&gt; };</code> will read the whole thing. You probably also want to <a href=\"https://perldoc.pl/functions/binmode\" rel=\"nofollow noreferrer\">binmode</a> the handle so there are no layer conversions of the possibly binary data (e.g. line endings on Windows)."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1561994396, "post_id": 56838147, "comment_id": 100228974, "body": "You shouldn&#39;t need to specify Content-Length manually, as LWP should set it based on the content you provide."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1561994498, "post_id": 56838147, "comment_id": 100229018, "body": "Minor code style issues: you should <code>use warnings;</code>, you should use three-arg open, and you should use lexical filehandles not global barewords: <code>open my $fh, &#39;&lt;:raw&#39;, $fname or die ...; my $fdata = do { local $&#47;; &lt;$fh&gt; };</code> (the <code>:raw</code> layer is equivalent to calling binmode later with no layers)"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1561995471, "post_id": 56838147, "comment_id": 100229474, "body": "Or use <code>read_binary()</code> from <a href=\"https://metacpan.org/pod/File::Slurper\" rel=\"nofollow noreferrer\">File::Slurper</a>."}, {"owner": {"reputation": 113, "user_id": 10387670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdf786ab55696fdffc26afbab4a51cd1?s=128&d=identicon&r=PG&f=1", "display_name": "mifydnu", "link": "https://stackoverflow.com/users/10387670/mifydnu"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1561995474, "post_id": 56838147, "comment_id": 100229476, "body": "@Grinnz - thanks. This is a quick hack to see if I can get it working only. I used &#39;strict&#39; to prevent the most egregious errors. It&#39;s clearly not the cleanest code. :-)  Thanks for the comments: &lt;FILE&gt; is only a single line of text, I&#39;m aware. COntent-length is part of the signed hash so it has to match with LWP computes from the header (line 47 of the Perl code).  However... that did lead me to what&#39;s wrong..."}, {"owner": {"reputation": 98660, "user_id": 188096, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2hqrh.png?s=128&g=1", "display_name": "Gaurav Mantri", "link": "https://stackoverflow.com/users/188096/gaurav-mantri"}, "edited": false, "score": 0, "creation_date": 1561995545, "post_id": 56838147, "comment_id": 100229509, "body": "One issue I see is that in your <code>sendPut()</code> method, you&#39;re sending <code>POST</code> as HTTP method instead of <code>PUT</code>. That will <b>certainly</b> cause the request to fail. Please change that to <code>PUT</code> and see if the request is successful."}, {"owner": {"reputation": 113, "user_id": 10387670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdf786ab55696fdffc26afbab4a51cd1?s=128&d=identicon&r=PG&f=1", "display_name": "mifydnu", "link": "https://stackoverflow.com/users/10387670/mifydnu"}, "reply_to_user": {"reputation": 98660, "user_id": 188096, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2hqrh.png?s=128&g=1", "display_name": "Gaurav Mantri", "link": "https://stackoverflow.com/users/188096/gaurav-mantri"}, "edited": false, "score": 0, "creation_date": 1561995837, "post_id": 56838147, "comment_id": 100229651, "body": "@Gaurav Mantri - yup, that was one issue. Just saw it and corrected. Content length is the problem. For this file, LWP says 26, and I&#39;m computing 28. If I hardcode the 26 in the signature (and use PUT in the HTTP::Request) , the code works. Not sure how to correct this programmatically."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1561996751, "post_id": 56838703, "comment_id": 100230052, "body": "It&#39;s fine as there&#39;s no clear question-answer here, just a debugging process. It&#39;s why I did not submit an answer."}], "tags": [], "owner": {"reputation": 113, "user_id": 10387670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdf786ab55696fdffc26afbab4a51cd1?s=128&d=identicon&r=PG&f=1", "display_name": "mifydnu", "link": "https://stackoverflow.com/users/10387670/mifydnu"}, "is_accepted": false, "score": 2, "last_activity_date": 1562030187, "last_edit_date": 1562030187, "creation_date": 1561996379, "answer_id": 56838703, "question_id": 56838147, "link": "https://stackoverflow.com/questions/56838147/understanding-whats-wrong-with-my-authorization-header-using-perl-http-lwp/56838703#56838703", "title": "Understanding what&#39;s wrong with my authorization header using Perl, HTTP, LWP", "body": "<p>Resolved in comments. @Grinnz and @Guarav Mantri - you guys had it right.  </p>\n\n<ol>\n<li><p>I had a second line (a dot that I didn't see) in my testfile. So reading a single line from the file, but computing the entire filesize with -s was going to provide a mismatch. Now content-length is being computed correctly.</p></li>\n<li><p>I blindly type 'POST' in the HTTP::Request-new() call when PUT was used in the signature hash. Oops.</p></li>\n</ol>\n\n<p>Thanks guys. Not sure how to upvote two responses as both had portions of the answer.</p>\n"}], "owner": {"reputation": 113, "user_id": 10387670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdf786ab55696fdffc26afbab4a51cd1?s=128&d=identicon&r=PG&f=1", "display_name": "mifydnu", "link": "https://stackoverflow.com/users/10387670/mifydnu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1562030187, "creation_date": 1561993955, "question_id": 56838147, "link": "https://stackoverflow.com/questions/56838147/understanding-whats-wrong-with-my-authorization-header-using-perl-http-lwp", "title": "Understanding what&#39;s wrong with my authorization header using Perl, HTTP, LWP", "body": "<p>I have a piece of PHP code that creates a Blob storage PUT request to a container in my Azure storage account. After significant tinkering, I finally got the header right and all is good. Unfortunately, the app I want to use this in is written in Perl. So I thought it would be a relatively easy task to port it. It is proving more difficult than I had expected. </p>\n\n<p>I've compared everything (well, obviously not everything or it would freaking work) between the PHP code and the Perl code, but continue to receive an authentication error related to the header.</p>\n\n<p>The PHP script uses Curl to make the user agent request. I do not have that accessible as a direct replacement in my Perl installation. Not sure there's much I can do about that without a local install and C-compiler for Net::Curl. (Maybe I'm missing something there?)  As everything between the two versions (PHP and Perl) seems to match i.e. message, key, encoded/decoded versions of strings, hashed signatures (I hardcoded the date for validation between the two implementations), I'm at a loss as to what else to try. This is day 3 and I feel I'm probably spinning my wheels on a problem this group has already solved.</p>\n\n<p>The PHP Code which work just fine:</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>&lt;?php\n\ndate_default_timezone_set ( 'GMT' );\n$date = date ( \"D, d M Y H:i:s T\" );\n\n$version = \"2009-09-19\";\n\n$account_name = 'emiliolizardo';\n$account_key = \"uXwt+WJ14kkV6zDALOuiDCsJtqrGDMK7W5xtNhuXXUcsfP1HIC1s7IJ+PZS7dgyXPBufad46ncBSQQK5rNs6Qw==\";\n$container_name = 'containertest';\n\n$blobname = \"foobar.txt\";\n$fdata    = file_get_contents('testfile.txt');\n\n$utfStr = \"PUT\"\n        . \"\\n\\n\\n\"\n        . strlen($fdata)\n        . \"\\n\\n\"\n        . \"text/plain; charset=UTF-8\"\n        . \"\\n\\n\\n\\n\\n\\n\\n\"\n        . \"x-ms-blob-type:BlockBlob\"\n        . \"\\n\"\n        . \"x-ms-date:$date\"\n        . \"\\n\"\n        . \"x-ms-version:$version\"\n        . \"\\n\"\n        . \"/$account_name/$container_name/$blobname\";\n\n$utf8_encode_str = utf8_encode ( $utfStr );\n\necho \"utfStr : \" . $utfStr . \"\\n\";\necho \"utf8_encode_str:\" . $utf8_encode_str . \"\\n\";\n\n$signature_str = base64_encode(hash_hmac('sha256',    $utf8_encode_str, base64_decode($account_key), true));\n\necho \"signature_str:\" . $signature_str . \"\\n\";\n\n  $header = array (\n   \"x-ms-blob-type: BlockBlob\",\n   \"x-ms-date: \" . $date,\n   \"x-ms-version: \" . $version,\n   \"Authorization: SharedKey \" . $account_name . \":\" . $signature_str,\n   \"Content-Type: text/plain; charset=UTF-8\",\n   \"Content-Length: \" . strlen($fdata),\n   );\n\nprint_r($header);\n\n$url=\"https://$account_name.blob.core.windows.net/$container_name/$blobname\";\necho \"url:\" . $url . \"\\n\";\n\n# Check our variables\n#echo \"account_name: \" . $account_name . \"\\n\";\n#echo \"account_key : \" . $account_key . \"\\n\";\n#echo \"signature   : \" . $signature_str . \"\\n\";\n#echo \"url         : \" . $url . \"\\n\";\n#var_dump($header);\n\n# Execute curl commands to create container\n$ch = curl_init ();\n\ncurl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, false);\ncurl_setopt ($ch, CURLOPT_CUSTOMREQUEST, 'PUT' );\ncurl_setopt ($ch, CURLOPT_URL, $url );\ncurl_setopt ($ch, CURLOPT_RETURNTRANSFER, true );\ncurl_setopt ($ch, CURLOPT_HTTPHEADER, $header);\ncurl_setopt ($ch, CURLOPT_POSTFIELDS, $fdata);\ncurl_setopt ($ch, CURLOPT_HEADER, True );\n\n$result = curl_exec ( $ch );\n</code></pre>\n\n<p>And the Perl code, which comes close, but is missing something:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse DateTime;\nuse DateTime::TimeZone;\nuse Data::Dumper;\nuse Encode qw(decode encode);\nuse MIME::Base64 qw( encode_base64 decode_base64 );\nuse Digest::SHA qw(hmac_sha256 hmac_sha256_base64);\nuse HTTP::Request;\nuse LWP::UserAgent;\n\nmy $account_name = \"emiliolizardo\";\nmy $account_key  = \"uXwt+WJ14kkV6zDALOuiDCsJtqrGDMK7W5xtNhuXXUcsfP1HIC1s7IJ+PZS7dgyXPBufad46ncBSQQK5rNs6Qw==\";\nmy $container    = 'containertest';\n\n#my $file = 'YhJCUjrcEi0q.mp3';\nmy $file = 'testfile.txt';\n\n# -----------------------------------------------------------\n# --\n# -----------------------------------------------------------\nsub uploadblob {\n        my ($fname, $accname, $acckey, $cont) = @_;\n\n        my $date = `/bin/date -u +\"%a, %d %b %Y %T GMT\"`; chomp $date;\n#       my $date = 'Mon, 01 Jul 2019 13:14:43 GMT';     # -- JUST FOR TESTING\n\n#       my $version = \"2018-03-28\";\n        my $version = \"2009-09-19\";                     # -- JUST FOR TESTING TO MIMIC PHP CODE\n\n        my ($blobname, $ctype);\n        for ($fname) {\n                /\\.mp3$/i and do { $ctype = 'audio/mpeg'; last; };\n                /\\.wav$/i and do { $ctype = 'audio/wav'; last; };\n                /\\.txt$/i and do { $ctype = 'text/plain'; last; };\n                die \"Failed to match an acceptable extension\";\n        }\n        my $blobname = $fname;\n\n        open FILE, \"&lt; $fname\" or die \"Can't open file $fname for read: $!\";\n        my $fdata = &lt;FILE&gt;;\n        close FILE;\n\n        my $fsize = -s $fname;\n\n        my $str = qq{PUT\\n\\n\\n$fsize\\n\\n$ctype; charset=UTF-8\\n\\n\\n\\n\\n\\n\\nx-ms-blob-type:BlockBlob\\nx-ms-date:$date\\nx-ms-version:$version\\n/$accname/$cont/$blobname};\nprint \"utfStr : $str\\n\";\n\n        my $message = encode(\"UTF-8\", $str);\nprint \"utf8_encode_str:$message\\n\";\n\n        my $secret  = decode_base64($acckey);\n\n        my $signature_str = encode_base64( hmac_sha256($message, $secret) );\n        chomp $signature_str;\nprint \"signature_str:$signature_str\\n\";\n\n#       while(length($digest) %4) { $digest .= '='; }   # -- Is this necessary for the hmac_sha256 digest?\n\n        my $header = [\n                'x-ms-blob-type' =&gt; \"BlockBlob\",\n                'x-ms-date' =&gt; $date,\n                'x-ms-version' =&gt; $version,\n                'Authorization' =&gt; \"SharedKey $accname:$signature_str\",\n                'Content-Type' =&gt; \"$ctype; charset=UTF-8\",\n                'Content-Length' =&gt; $fsize\n        ];\n        my $url = \"https://$accname.blob.core.windows.net/$cont/$blobname\";\nprint \"url:$url\\n\";\n\n        sendPut($header,$url,$fdata);\n}\n\n\n# -----------------------------------------------------------\n# --\n# -----------------------------------------------------------\nsub sendPut {\n        my ($header,$url,$data) = @_;\nprint \"\\n\\nIn sendPut()\\n\\n\\n==============================================\\n\\n\\n\";\n\n        my $r = HTTP::Request-&gt;new('POST', $url, $header, $data);\n\n        my $ua = LWP::UserAgent-&gt;new();\n        my $res = $ua-&gt;request($r);\n\n        print \"res: \", Dumper $res, \"\\n\";\n}\n\nuploadblob($file, $account_name, $account_key, $container);\n</code></pre>\n\n<p>The error message gives me a hint of what <em>might</em> be the issue but I'm not sure how to correct it: content-length header was wrong, fixed. This seems to be an existing issue with LWP (or was in 2006 which was the reference I found).  </p>\n\n<p>Using Data::Dumper to look at the HTTP::Request object before I send it with LWP, it looks ok to me. Just like the PHP request object. At some point I will rewrite the old-school Perl code in PHP or Node.js or something current, but for the moment, I'd really like to get this working in Perl.</p>\n\n<p>Thanks in advance for any suggestions. Apologies if I've breached any SO etiquette -still pretty new here.</p>\n\n<p>Thanks - Andy</p>\n\n<p>Here's the complete response from the UserAgent->request:</p>\n\n<pre><code>Content-Length header value was wrong, fixed at /usr/share/perl5/vendor_perl/LWP/Protocol/http.pm line 189.\nres: $VAR1 = bless( {\n                 '_protocol' =&gt; 'HTTP/1.1',\n                 '_content' =&gt; '&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;Error&gt;&lt;Code&gt;AuthenticationFailed&lt;/Code&gt;&lt;Message&gt;Server failed to authenticate the request. Make sure the value of Authorization header is formed correctly including the signature.\nRequestId:62589eac-301e-00bd-3e1e-30c15e000000\nTime:2019-07-01T15:04:08.0485043Z&lt;/Message&gt;&lt;AuthenticationErrorDetail&gt;The MAC signature found in the HTTP request \\'PUUgk2meSoiB9o+inlYomIq96Bf13IdAQoIZ4BSu4sE=\\' is not the same as any computed signature. Server used following string to sign: \\'POST\n\n\n26\n\ntext/plain; charset=UTF-8\n\n\n\n\n\n\nx-ms-blob-type:BlockBlob\nx-ms-date:Mon, 01 Jul 2019 15:04:07 GMT\nx-ms-version:2009-09-19\n/emiliolizardo/containertest/testfile.txt\\'.&lt;/AuthenticationErrorDetail&gt;&lt;/Error&gt;',\n                 '_rc' =&gt; '403',\n                 '_headers' =&gt; bless( {\n                                        'client-response-num' =&gt; 1,\n                                        'date' =&gt; 'Mon, 01 Jul 2019 15:04:07 GMT',\n                                        'client-ssl-cert-issuer' =&gt; '/C=US/ST=Washington/L=Redmond/O=Microsoft Corporation/OU=Microsoft IT/CN=Microsoft IT TLS CA 4',\n                                        'client-ssl-cipher' =&gt; 'ECDHE-RSA-AES256-GCM-SHA384',\n                                        'client-peer' =&gt; '52.239.177.68:443',\n                                        'content-length' =&gt; '723',\n                                        'client-date' =&gt; 'Mon, 01 Jul 2019 15:04:08 GMT',\n                                        'client-ssl-warning' =&gt; 'Peer certificate not verified',\n                                        'content-type' =&gt; 'application/xml',\n                                        'x-ms-request-id' =&gt; '62589eac-301e-00bd-3e1e-30c15e000000',\n                                        'client-ssl-cert-subject' =&gt; '/CN=*.blob.core.windows.net',\n                                        'server' =&gt; 'Microsoft-HTTPAPI/2.0',\n                                        'client-ssl-socket-class' =&gt; 'IO::Socket::SSL'\n                                      }, 'HTTP::Headers' ),\n                 '_msg' =&gt; 'Server failed to authenticate the request. Make sure the value of Authorization header is formed correctly including the signature.',\n                 '_request' =&gt; bless( {\n                                        '_content' =&gt; 'Test file for blob upload\n',\n                                        '_uri' =&gt; bless( do{\\(my $o = 'https://emiliolizardo.blob.core.windows.net/containertest/testfile.txt')}, 'URI::https' ),\n                                        '_headers' =&gt; bless( {\n                                                               'user-agent' =&gt; 'libwww-perl/5.833',\n                                                               'x-ms-date' =&gt; 'Mon, 01 Jul 2019 15:04:07 GMT',\n                                                               'content-type' =&gt; 'text/plain; charset=UTF-8',\n                                                               'x-ms-version' =&gt; '2009-09-19',\n                                                               'x-ms-blob-type' =&gt; 'BlockBlob',\n                                                               'content-length' =&gt; 28,\n                                                               'authorization' =&gt; 'SharedKey emiliolizardo:PUUgk2meSoiB9o+inlYomIq96Bf13IdAQoIZ4BSu4sE='\n                                                             }, 'HTTP::Headers' ),\n                                        '_method' =&gt; 'POST',\n                                        '_uri_canonical' =&gt; $VAR1-&gt;{'_request'}{'_uri'}\n                                      }, 'HTTP::Request' )\n               }, 'HTTP::Response' );\n$VAR2 = '\n';\n</code></pre>\n"}, {"tags": ["regex", "perl", "pcre", "regex-lookarounds", "regex-negation"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 3, "creation_date": 1561993285, "post_id": 56837959, "comment_id": 100228401, "body": "These are two things regexes are not good at: balanced grammars, and nested negation. As a side note, it is much better to use an XML parser in your language of choice."}, {"owner": {"reputation": 196, "user_id": 4534918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UU8hS.jpg?s=128&g=1", "display_name": "z0lupka", "link": "https://stackoverflow.com/users/4534918/z0lupka"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1561993996, "post_id": 56837959, "comment_id": 100228785, "body": "@Grinnz \u0421learly. But after all specifically described problem looks simple. It cannot be solved in any way by regex?"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1561994003, "post_id": 56837959, "comment_id": 100228793, "body": "The question is tagged <code>perl</code>, so can we assume that a Perl solution is desired? If so, this sort of tricky regex issue is why the universe agrees that one should parse XML with XML parsers. See <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\">metacpan.org/pod/XML::LibXML</a> , for example."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1561994072, "post_id": 56837959, "comment_id": 100228825, "body": "&quot;<i>But after all specifically described problem looks simple.</i>&quot; -- Correct. Looks can be deceiving, and after this problem is solved there will be another, because you&#39;re reinventing what turns out to be a fairly complicated wheel."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1561994092, "post_id": 56837959, "comment_id": 100228837, "body": "@z0lupka It&#39;s almost always <i>possible</i> with a sufficiently featured regex engine. But the complexity required is almost never worthwhile. It&#39;s probably important if you specify what regex engine you are using (note in particular that PCRE is not Perl)."}, {"owner": {"reputation": 196, "user_id": 4534918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UU8hS.jpg?s=128&g=1", "display_name": "z0lupka", "link": "https://stackoverflow.com/users/4534918/z0lupka"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1561994462, "post_id": 56837959, "comment_id": 100229000, "body": "@DavidO The original goal was to make it purely PCRE regex. F.e. on regex101.com"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1561995327, "post_id": 56837959, "comment_id": 100229394, "body": "<a href=\"https://stackoverflow.com/a/4234491/716443\">stackoverflow.com/a/4234491/716443</a>"}, {"owner": {"reputation": 196, "user_id": 4534918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UU8hS.jpg?s=128&g=1", "display_name": "z0lupka", "link": "https://stackoverflow.com/users/4534918/z0lupka"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1561995556, "post_id": 56837959, "comment_id": 100229514, "body": "@DavidO <a href=\"https://stackoverflow.com/questions/37240408/regular-expressions-ensuring-b-doesnt-come-between-a-and-c\">This</a> helped ;)"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 2, "last_activity_date": 1562546144, "creation_date": 1562546144, "answer_id": 56927135, "question_id": 56837959, "link": "https://stackoverflow.com/questions/56837959/regex-match-everything-except-word/56927135#56927135", "title": "Regex match everything except word", "body": "<p>Since you're using one of Perl / PCRE, the fastest way to do it is like this:  </p>\n\n<p><code>/(?s)&lt;tag&gt;(?:&lt;\\/tag&gt;(*SKIP)(*FAIL)|.)*?ABC.*?&lt;\\/tag&gt;/</code>  </p>\n\n<p><a href=\"https://regex101.com/r/AoiwIH/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/AoiwIH/1</a>  </p>\n\n<p>Expanded  </p>\n\n<pre><code> (?s)\n &lt;tag&gt;  \n (?:\n      &lt;/tag&gt;\n      (*SKIP) (*FAIL) \n   |  \n      . \n )*?\n ABC\n .*? \n &lt;/tag&gt;\n</code></pre>\n\n<p>Benchmark compare with the <em>assertion</em> method  </p>\n\n<pre><code>Regex1:   (?s)&lt;tag&gt;(?:&lt;/tag&gt;(*SKIP)(*FAIL)|.)*?ABC.*?&lt;/tag&gt;\nCompleted iterations:   50  /  50     ( x 1000 )\nMatches found per iteration:   1\nElapsed Time:    0.25 s,   254.91 ms,   254905 \u00b5s\nMatches per sec:   196,151\n\n\nRegex2:   (?s)&lt;tag&gt;(?:(?!&lt;/tag&gt;).)*?ABC.*?&lt;/tag&gt;\nCompleted iterations:   50  /  50     ( x 1000 )\nMatches found per iteration:   1\nElapsed Time:    0.33 s,   329.10 ms,   329095 \u00b5s\nMatches per sec:   151,931\n</code></pre>\n"}], "owner": {"reputation": 196, "user_id": 4534918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UU8hS.jpg?s=128&g=1", "display_name": "z0lupka", "link": "https://stackoverflow.com/users/4534918/z0lupka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562546144, "creation_date": 1561993201, "question_id": 56837959, "link": "https://stackoverflow.com/questions/56837959/regex-match-everything-except-word", "title": "Regex match everything except word", "body": "<p>All QA about <strong><em>matching something except word</em></strong> with negative look-ahead that I found imply lines start/end(<code>^</code> <code>$</code>). But I can't figure out how can I match everything (any character like <code>.*</code>) except word before some other word in the middle of the processed text.</p>\n\n<p>I should match <code>ABC</code> inside <code>&lt;tag&gt;&lt;/tag&gt;</code>:</p>\n\n<pre><code>...&lt;tag&gt;a a.__aABC&amp;*&lt;/tag&gt;aaa&lt;tag&gt;ffff&lt;/tag&gt;...\n</code></pre>\n\n<p>but not outside (false-positive):</p>\n\n<pre><code>...&lt;tag&gt;a a.__a&amp;*&lt;/tag&gt;ABC&lt;tag&gt;ffff&lt;/tag&gt;...\n</code></pre>\n\n<p>So I think I should exclude tag closing (<code>&lt;/tag&gt;</code>) before <code>ABC</code>.\nI tried:</p>\n\n<pre><code>&lt;tag&gt;(?!&lt;\\/tag&gt;)ABC.*?&lt;\\/tag&gt;\n</code></pre>\n\n<p>but such way it doesn't allow to <strong><em>match <code>.*</code> except <code>&lt;/tag&gt;</code> before <code>ABC</code></em></strong>. How can I implement this?</p>\n\n<p>Useful links:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/6830796/regex-to-match-anything-but-two-words\">1</a>, <a href=\"https://stackoverflow.com/questions/2404010/match-everything-except-for-specified-strings/34448503\">2</a>.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1561965834, "post_id": 56831395, "comment_id": 100214974, "body": "Why do you think the output from <code>abs2rel</code> is incorrect?"}, {"owner": {"reputation": 7, "user_id": 9435629, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Hariharan Sivakumar", "link": "https://stackoverflow.com/users/9435629/hariharan-sivakumar"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1561968458, "post_id": 56831395, "comment_id": 100215998, "body": "@tripleee when I use abs2rel it is giving me some relative path but not specific to the source path it is generalized one.. ../../../sim/win this is what I&#39;m expecting but ../../../../sim/win this is what I got"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 3, "creation_date": 1561968897, "post_id": 56831395, "comment_id": 100216173, "body": "You will want to <a href=\"https://stackoverflow.com/posts/56831395/edit\">edit</a> your question into a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with exactly the values which produce this result. The general lack of explicitness is still problematic here."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1561991889, "post_id": 56831395, "comment_id": 100227696, "body": "Consider also <a href=\"https://metacpan.org/pod/Path::Tiny#relative\" rel=\"nofollow noreferrer\">relative from Path::Tiny</a> which handles some edge cases."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 9435629, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Hariharan Sivakumar", "link": "https://stackoverflow.com/users/9435629/hariharan-sivakumar"}, "edited": false, "score": 0, "creation_date": 1562055308, "post_id": 56836786, "comment_id": 100246819, "body": "thanks for the answer and I think this answer is very much capable for my problem and the above program is clear for the understanding, thank you so much for the quick help :)"}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 1, "last_activity_date": 1561988649, "creation_date": 1561988649, "answer_id": 56836786, "question_id": 56831395, "link": "https://stackoverflow.com/questions/56831395/i-have-two-source-and-destination-directories-i-need-to-find-how-to-create-the-r/56836786#56836786", "title": "i have two source and destination directories i need to find how to create the relative link from source to destination path", "body": "<p>Here's what I think your program is:</p>\n\n<pre><code>use v5.10;\nuse File::Spec;\n\nmy $modules_dir = \"/nfs/edu/lib/etc/sim/win\";\nmy $project_dir = \"/nfs/edu/lib/etc/ket/ops/nis\";\n\nmy $rel_path = File::Spec-&gt;abs2rel( $modules_dir, $project_dir );\nsay $rel_path;\n</code></pre>\n\n<p>The output is what you want:</p>\n\n<pre><code>../../../sim/win\n</code></pre>\n\n<p>However, you don't provide the program you're actually running so we don't have any hope of seeing why you get a different answer. Always post the minimal, complete, and actual code that demonstrates the issue.</p>\n\n<p>But, I suspect that you are going about this problem in the wrong way. Typically, I would rather have absolute paths instead of relative ones. If I know the absolute path I always know where something is going. If I have a relative path, I also have to know (and maybe constantly adjust) the current working directory.</p>\n\n<p>For example, in this program, I can be in any directory that I like and still move the file to the right place:</p>\n\n<pre><code>use v5.10;\nuse File::Spec;\n\nmy $modules_dir = \"/nfs/edu/lib/etc/sim/win\";\nmy $project_dir = \"/nfs/edu/lib/etc/ket/ops/nis\";\n\nmy $file = \"some_library.pl\";\n\nmy $source = File::Spec-&gt;catfile( $project_dir, $file );\nmy $dest   = File::Spec-&gt;catfile( $modules_dir, $file );\n\nrename $source =&gt; $dest or warn \"Could not rename file: $!\"; \n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 9435629, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Hariharan Sivakumar", "link": "https://stackoverflow.com/users/9435629/hariharan-sivakumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 56836786, "answer_count": 1, "score": -2, "last_activity_date": 1561988649, "creation_date": 1561965343, "last_edit_date": 1561987877, "question_id": 56831395, "link": "https://stackoverflow.com/questions/56831395/i-have-two-source-and-destination-directories-i-need-to-find-how-to-create-the-r", "title": "i have two source and destination directories i need to find how to create the relative link from source to destination path", "body": "<p>I have two directories in which source and destination is there</p>\n\n<p>For example,</p>\n\n<ul>\n<li><code>/nfs/edu/lib/etc/sim/win</code> --- this is my destination</li>\n<li><code>/nfs/edu/lib/etc/ket/ops/nis</code> ---- this is source</li>\n</ul>\n\n<p>I already tried Perl's <code>abs2rel</code> function to convert the above relpath from source but it is not giving the exact answer, it is giving me \n<code>../../../../sim/win</code> -- this is the output I'm getting now</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $rel_path = File::Spec-&gt;abs2rel( $modules_dir ,$project_dir) ;\n</code></pre>\n\n<p>The project directory is source and module directory is destination</p>\n\n<p>I need to create relative path from source to destination.\nMy output should be like <code>../../../sim/win</code> -- this is from source to destination.</p>\n"}, {"tags": ["regex", "bash", "macos", "shell", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1561965239, "post_id": 56831328, "comment_id": 100214769, "body": "Can&#39;t match across lines (<code>&#47;s</code>) unless you &quot;slurp&quot; the file, <code>perl -0777 -ne&#39;...&#39;</code>.  Your code works with that as it stands (the first example is also missing <code>-n</code>, perhaps a typo)"}, {"owner": {"reputation": 55634, "user_id": 983912, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/8bccd55617e47290df57895b2d57359e?s=128&d=identicon&r=PG", "display_name": "Leo Natan", "link": "https://stackoverflow.com/users/983912/leo-natan"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1561965441, "post_id": 56831328, "comment_id": 100214841, "body": "@zdim It works! Do you mind posting an explanation what that means as an answer?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1561965773, "post_id": 56831328, "comment_id": 100214955, "body": "I hope the marked dupe answers explain it well enough.  Your pattern to be matched is spread across multiple lines; in &#39;normal&#39; <code>-n</code> mode only one line at a time is available to the program, so it can&#39;t match.  With <code>-0777</code> the whole file goes into <code>$_</code> and then the regex works as intended"}, {"owner": {"reputation": 55634, "user_id": 983912, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/8bccd55617e47290df57895b2d57359e?s=128&d=identicon&r=PG", "display_name": "Leo Natan", "link": "https://stackoverflow.com/users/983912/leo-natan"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1561967462, "post_id": 56831328, "comment_id": 100215586, "body": "Thank you for the explanation and quick response!"}, {"owner": {"reputation": 55634, "user_id": 983912, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/8bccd55617e47290df57895b2d57359e?s=128&d=identicon&r=PG", "display_name": "Leo Natan", "link": "https://stackoverflow.com/users/983912/leo-natan"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1561968800, "post_id": 56831328, "comment_id": 100216139, "body": "<a href=\"https://stackoverflow.com/a/56487100/983912\">This answer</a> by @zdim was more helpful than the dup question. Thanks"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1562002516, "post_id": 56831328, "comment_id": 100232337, "body": "Leo Natan -- very glad that a post of mine helped, and thank you for saying it :).  Here is then <a href=\"https://stackoverflow.com/a/45597361/4653379\">another post</a> which spells this out (short and hopefully clear), and <a href=\"https://stackoverflow.com/a/40852382/4653379\">another one</a> with more detail and both a full program and one-liner versions."}], "owner": {"reputation": 55634, "user_id": 983912, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/8bccd55617e47290df57895b2d57359e?s=128&d=identicon&r=PG", "display_name": "Leo Natan", "link": "https://stackoverflow.com/users/983912/leo-natan"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 1, "closed_date": 1561965456, "answer_count": 0, "score": 0, "last_activity_date": 1561979867, "creation_date": 1561964991, "last_edit_date": 1561968437, "question_id": 56831328, "link": "https://stackoverflow.com/questions/56831328/named-capture-groups-from-command-line", "closed_reason": "Duplicate", "title": "Named capture groups from command line", "body": "<p>I've come up with the following regular expression:</p>\n\n<pre><code>\\[release(\\s+(?&lt;release_type&gt;.*))?\\]\\n+(?&lt;release_notes&gt;.*)\n</code></pre>\n\n<p>The idea is to parse a commit message for several params:</p>\n\n<pre><code>[release minor]\n\nHello world\n\n- asd\n- zxc\n</code></pre>\n\n<p>Matching should result <code>release_type = 'minor'</code>, <code>release_notes = 'Hello world\\n\u2026</code>.</p>\n\n<p>I'm trying to use perl due to old regex engines in macOS.</p>\n\n<p>I've tried:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>perl -ne 'print \"$+{release_notes}\" while /\\[release(\\s+(?&lt;release_type&gt;.*))?\\]\\n+(?&lt;release_notes&gt;.*)/gs;' msg.txt\n</code></pre>\n\n<p>But for some reason, this expression doesn't work as expected.</p>\n\n<p>In fact, even the simpler</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>perl -ne 'print \"$+{release_notes}\" while /\\n(?&lt;release_notes&gt;.*)/gs;' msg.txt \n</code></pre>\n\n<p>fails. </p>\n\n<p>This</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>perl -ne 'print \"$+{release_notes}\" while /(?&lt;release_notes&gt;.*)/gs;' msg.txt \n</code></pre>\n\n<p>succeeds and just returns the whole input.</p>\n\n<p>I'm probably missing something simple here, but not sure what it is.</p>\n"}, {"tags": ["perl", "ssh", "putty", "plink"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1561958962, "post_id": 56830362, "comment_id": 100212900, "body": "Do you connect to arbitrary hosts? If not, you can just say &quot;yes&quot; manually once and it will be saved."}, {"owner": {"reputation": 447, "user_id": 10202232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Avzwj.png?s=128&g=1", "display_name": "him", "link": "https://stackoverflow.com/users/10202232/him"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1561959061, "post_id": 56830362, "comment_id": 100212923, "body": "Yes, the hosts are machines on a network and they are arbitrary not one or two"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1561959186, "post_id": 56830362, "comment_id": 100212960, "body": "Does <code>plink -batch</code> just fail?"}, {"owner": {"reputation": 447, "user_id": 10202232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Avzwj.png?s=128&g=1", "display_name": "him", "link": "https://stackoverflow.com/users/10202232/him"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1561959368, "post_id": 56830362, "comment_id": 100213004, "body": "It says <code>connection abandoned</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1561959409, "post_id": 56830362, "comment_id": 100213016, "body": "Can you use a non-plink solution, e.g. <a href=\"https://metacpan.org/pod/Net::SSH2\" rel=\"nofollow noreferrer\">Net::SSH2</a> or <a href=\"https://metacpan.org/pod/Net::SSH::Perl\" rel=\"nofollow noreferrer\">Net::SSH::Perl</a>?"}, {"owner": {"reputation": 447, "user_id": 10202232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Avzwj.png?s=128&g=1", "display_name": "him", "link": "https://stackoverflow.com/users/10202232/him"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1561959495, "post_id": 56830362, "comment_id": 100213039, "body": "The problem is I neither do I have these modules in my system nor I can install them. Also, when I use <code>ssh</code> (instead of <code>plink</code>) it also prompts for a password"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1561959544, "post_id": 56830362, "comment_id": 100213060, "body": "Why can&#39;t you install them?"}, {"owner": {"reputation": 447, "user_id": 10202232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Avzwj.png?s=128&g=1", "display_name": "him", "link": "https://stackoverflow.com/users/10202232/him"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1561959632, "post_id": 56830362, "comment_id": 100213082, "body": "I&#39;m using Perl from some network location and don&#39;t have permissions to install modules there"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1561959736, "post_id": 56830362, "comment_id": 100213104, "body": "Wow, this is like layers of WTF."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1561961646, "post_id": 56830362, "comment_id": 100213608, "body": "I&#39;d expect <code>Expect</code> to help with this ...  (in case the hack you found ever fails you)"}, {"owner": {"reputation": 447, "user_id": 10202232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Avzwj.png?s=128&g=1", "display_name": "him", "link": "https://stackoverflow.com/users/10202232/him"}, "edited": false, "score": 0, "creation_date": 1561961786, "post_id": 56830362, "comment_id": 100213658, "body": "Are you sure, if we can use <code>Expect</code> on windows ?"}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 1, "creation_date": 1561963008, "post_id": 56830362, "comment_id": 100214032, "body": "See also <a href=\"https://stackoverflow.com/q/32335508/850848\">VBA Excel code using echo y with PLink</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1561965051, "post_id": 56830362, "comment_id": 100214711, "body": "&quot;<i>if we can use Expect on window</i>&quot; -- good point.  These days <a href=\"https://stackoverflow.com/a/47940226/4653379\">we can</a> (with Cygwin though)"}], "answers": [{"comments": [{"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1561962910, "post_id": 56830643, "comment_id": 100214005, "body": "So please do not post duplicate answers. Close your question as a duplicate."}, {"owner": {"reputation": 447, "user_id": 10202232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Avzwj.png?s=128&g=1", "display_name": "him", "link": "https://stackoverflow.com/users/10202232/him"}, "reply_to_user": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1561966944, "post_id": 56830643, "comment_id": 100215394, "body": "Well this is a workaround I found for my problem. But as I said there might be more Perl(ish) way of doing this thing which I don&#39;t know. Using <code>Expect</code> is one such way as suggested by @zdim - but I thought it was not compatible with windows."}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1561967620, "post_id": 56830643, "comment_id": 100215657, "body": "Well, the more Perlish way is to use a native Perl implementation of SSH, not Plink."}], "tags": [], "owner": {"reputation": 447, "user_id": 10202232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Avzwj.png?s=128&g=1", "display_name": "him", "link": "https://stackoverflow.com/users/10202232/him"}, "is_accepted": false, "score": 1, "last_activity_date": 1561960797, "creation_date": 1561960797, "answer_id": 56830643, "question_id": 56830362, "link": "https://stackoverflow.com/questions/56830362/using-putty-to-ssh-ignoring-all-warnings-in-perl/56830643#56830643", "title": "Using Putty to SSH ignoring all warnings in Perl", "body": "<p>I solved it using pipes to pass Y to <code>plink</code> when prompted - <code>echo Y | plink -ssh &lt;user&gt;@&lt;host&gt; -pw &lt;password&gt; &lt;command&gt;</code>.</p>\n\n<p>For more details refer to <a href=\"https://stackoverflow.com/a/13617603/10202232\">this answer</a>. Also note the answer by @clay where he says </p>\n\n<blockquote>\n  <p>For internal servers, the blind echo y | ... trick is probably adequate (and super simple). However, for external servers accessed over the internet, it is much more secure to accept the server host key once rather than blindly accepting every time.</p>\n</blockquote>\n\n<p>This was the case with me - I was using <code>plink</code> to ssh to internal servers.</p>\n"}], "owner": {"reputation": 447, "user_id": 10202232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Avzwj.png?s=128&g=1", "display_name": "him", "link": "https://stackoverflow.com/users/10202232/him"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 1, "closed_date": 1561992265, "answer_count": 1, "score": 3, "last_activity_date": 1561960797, "creation_date": 1561958714, "question_id": 56830362, "link": "https://stackoverflow.com/questions/56830362/using-putty-to-ssh-ignoring-all-warnings-in-perl", "closed_reason": "Duplicate", "title": "Using Putty to SSH ignoring all warnings in Perl", "body": "<p>I'm writing a Perl script to SSH into remote linux and maci machines from a windows. For that I'm running <a href=\"https://www.ssh.com/ssh/putty/putty-manuals/0.68/Chapter7.html\" rel=\"nofollow noreferrer\"><code>plink</code> (putty link)</a> command using <code>qx</code>. The  problem is that when I try to run the <code>plink</code> command it gives a prompt</p>\n\n<blockquote>\n  <p>The server's host key is not cached in the registry. You\n  have no guarantee that the server is the computer you\n  think it is. ......  If you do not trust this host, press Return to abandon the\n  connection. Store key in cache? (y/n)</p>\n</blockquote>\n\n<p>I have to automate the process of running a command remotely. So, I somehow want to bypass this warning.</p>\n\n<p>I could think of two ways of doing this but don't know how to accomplish these</p>\n\n<ul>\n<li>Somehow bypass this warning from putty itself through some command line options or other commands</li>\n<li>Some Perl way of passing input to <code>plink</code> when prompted</li>\n</ul>\n\n<p>Can anyone suggest how to do this either in one of above ways or some other solutions.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1561950213, "post_id": 56829488, "comment_id": 100211454, "body": "What defines <code>@keyword</code>? Add <code>use strict;</code> to the top of your script. also you may just want to join your keywords together with <code>|</code> for use in the regex without a <code>for</code> loop, it will be more efficient using alternation that way."}, {"owner": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1561950624, "post_id": 56829488, "comment_id": 100211513, "body": "Hi @DavidO sorry for inconvinience. I already update my code."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1561950874, "post_id": 56829488, "comment_id": 100211556, "body": "The updated code appears to work if you change <code>print OUTPUT &quot;$result\\n&quot;;</code> to <code>print &quot;$result\\n&quot;;</code> If you put <code>use warnings;</code> at the top you&#39;ll get &quot;print to unopened file handle&quot; warning."}, {"owner": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1561951062, "post_id": 56829488, "comment_id": 100211586, "body": "Sorry, i use to minimize the code, i already remove. still result is same"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1561951207, "post_id": 56829488, "comment_id": 100211600, "body": "The problem, then, is not demonstrated by the code you provided. Perhaps you are looking in a non-existent directory, or one that you don&#39;t have privs on. Change your <code>wanted</code> sub to just <code>print &quot;$File::Find::name\\n&quot; if -f $File::Find::name;</code>, and nothing else. Do you see any files listed? Anyway, we can&#39;t answer this question because it fails to demonstrate the problem you describe if used on paths that exist, and files that contain the trigger text. It&#39;s unanswerable."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1561951408, "post_id": 56829488, "comment_id": 100211627, "body": "By the way, on a Linux system or any system with GNU grep and find, you can solve this easily from the command line.  grep has the -l and -v options, for example."}, {"owner": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1561955135, "post_id": 56829488, "comment_id": 100212144, "body": "hi @DavidO , yes, there is file listed. But it listed all file including the file that have $keyword"}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "edited": false, "score": 0, "creation_date": 1561954460, "post_id": 56829709, "comment_id": 100212039, "body": "Thanks for sugesstion. but i need to use perl in this case"}], "tags": [], "owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "is_accepted": false, "score": 2, "last_activity_date": 1561951737, "creation_date": 1561951737, "answer_id": 56829709, "question_id": 56829488, "link": "https://stackoverflow.com/questions/56829488/find-file-that-does-not-contain-specific-string/56829709#56829709", "title": "Find file that does not contain specific string", "body": "<p>This doesn't address your code, but I'd like to point out that with the <code>grep</code> command on any Linux system you can do exactly what it looks like you're trying to do with this command:</p>\n\n<pre><code>grep -L Book -R ../../../experiment/\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1561955628, "creation_date": 1561955628, "answer_id": 56830031, "question_id": 56829488, "link": "https://stackoverflow.com/questions/56829488/find-file-that-does-not-contain-specific-string/56830031#56830031", "title": "Find file that does not contain specific string", "body": "<p>There's a simple logic error. The code goes through lines of each file</p>\n\n<pre><code>while (&lt;$in&gt;) {\n    if (/\\Q$keyword\\E/){\n        next;\n    } else {\n        push @result, $F;\n        return;          \n    }\n}\n</code></pre>\n\n<p>and as soon as <em>any one line</em> doesn't have <code>$keyword</code> it adds the file to <code>@result</code>.</p>\n\n<p>You need to check all lines and if <code>$keyword</code> is never found only then add a file.  The easiest way to do this is to <code>return</code> from the sub as soon as the thing is found</p>\n\n<pre><code>while (&lt;$in&gt;) {\n    return if /\\Q$keyword/;\n}\n\npush @result, $F;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1561991744, "creation_date": 1561991744, "answer_id": 56837618, "question_id": 56829488, "link": "https://stackoverflow.com/questions/56829488/find-file-that-does-not-contain-specific-string/56837618#56837618", "title": "Find file that does not contain specific string", "body": "<p><a href=\"https://metacpan.org/pod/Path::Iterator::Rule\" rel=\"nofollow noreferrer\">Path::Iterator::Rule</a> makes tasks like this really simple. As a side note, I would recommend resolving the directory to an absolute path before iterating.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Cwd 'abs_path';\nuse File::Basename;\nuse Path::Iterator::Rule;\n\nmy $dirname = abs_path \"../../../experiment/\";\nmy $keyword = \"Book\";\n\nmy $rule = Path::Iterator::Rule-&gt;new-&gt;not_dir-&gt;name(qr/txt$/)-&gt;not_line_match(qr/\\Q$keyword\\E/);\nmy $next = $rule-&gt;iter($dirname);\nwhile (defined(my $file = $next-&gt;())) {\n  print basename($file), \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 56830031, "answer_count": 3, "score": 1, "last_activity_date": 1561991744, "creation_date": 1561949037, "last_edit_date": 1561954400, "question_id": 56829488, "link": "https://stackoverflow.com/questions/56829488/find-file-that-does-not-contain-specific-string", "title": "Find file that does not contain specific string", "body": "<p>I want to find file that does not contain the specific string?\nThe listed file is like below</p>\n\n<pre><code>../../../experiment/fileA.txt (contain word 'Book')\n../../../experiment/fileB.txt (contain word 'Book')\n../../../experiment/fileC.txt (do not contain word 'Book')\n../../../experiment/fileD.txt (contain word 'Book')\n</code></pre>\n\n<p>Here is my code</p>\n\n<pre><code>use strict;\nuse warning;\n\nmy $dirname = \"../../../experiment/\";\nmy $keyword = \"Book\";\nmy @result;\n\nmy $find_file = sub {\n    my $F = $File::Find::name;\n    if ($F =~ /txt$/) {\n       open my $in, \"&lt;\", $F or die $!;\n       while(&lt;$in&gt;) {\n          if (/\\Q$keyword\\E/){\n             next;\n          }else{\n             push @result, $F;\n             return;          \n          }\n      }\n   }  \n};\n\nfind ({ wanted =&gt; $find_file, no_chdir=&gt;1}, $dirname );\nforeach my $result (@result){\n   chomp $result;\n   $result =~ s{.*/}{};\n   print \"$result\\n\";\n}   \n</code></pre>\n\n<p>But it seem does not work. It display all file whether it has the $keyword or not. I only want it to display only if the file does not have the $keyword</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 4, "creation_date": 1561942050, "post_id": 56828807, "comment_id": 100210450, "body": "What&#39;s wrong with installing modules?"}, {"owner": {"reputation": 3045, "user_id": 951615, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/32f59de3e1040fae90a803448e43316f?s=128&d=identicon&r=PG", "display_name": "smith", "link": "https://stackoverflow.com/users/951615/smith"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1561943057, "post_id": 56828807, "comment_id": 100210568, "body": "nothing wrong , i just expect this basic functionality to be on the core exactly like Text::CSV which considered basic functionality today which also not on the core"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1561946695, "post_id": 56828807, "comment_id": 100211019, "body": "The module is 175 lines of code with no external (non-core) dependencies. You could model a quick solution off of the source code. As for why it isn&#39;t in core, let&#39;s not be too hard on Perl. The only benefit the module provides above and beyond /usr/bin/which is portability for entire operating systems that lack the which utility (Windows for instance)."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1562006841, "post_id": 56828807, "comment_id": 100233969, "body": "For what it&#39;s worth, the Perl community has developed many solutions to make non-core modules work for more use cases. For example, <a href=\"https://metacpan.org/pod/App::FatPacker\" rel=\"nofollow noreferrer\">fatpack</a>, <a href=\"https://metacpan.org/pod/Carton\" rel=\"nofollow noreferrer\">Carton</a>, and <a href=\"https://metacpan.org/pod/pp\" rel=\"nofollow noreferrer\">PAR</a>."}, {"owner": {"reputation": 3045, "user_id": 951615, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/32f59de3e1040fae90a803448e43316f?s=128&d=identicon&r=PG", "display_name": "smith", "link": "https://stackoverflow.com/users/951615/smith"}, "edited": false, "score": 0, "creation_date": 1562021904, "post_id": 56828807, "comment_id": 100238399, "body": "i agree with you ,those tools are awesome if you want to bundle external library like plotting charts ,or some rest api ,but there are some specific use cases it will be more convienent if theya re on the core,like reading password from STDIN without echoing  and not depending on external module , if you compare Perl to Python or even Go the Perl core missing many daily tasks functionailtiy where you need all the time to install external libraries ,i am not against external modules ,there are many modules on cpan have high quality and better any other equivlant libraries from other languages ."}], "answers": [{"tags": [], "owner": {"reputation": 3045, "user_id": 951615, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/32f59de3e1040fae90a803448e43316f?s=128&d=identicon&r=PG", "display_name": "smith", "link": "https://stackoverflow.com/users/951615/smith"}, "is_accepted": true, "score": 1, "last_activity_date": 1561943228, "creation_date": 1561943228, "answer_id": 56829107, "question_id": 56828807, "link": "https://stackoverflow.com/questions/56828807/perl-core-function-like-filewhich/56829107#56829107", "title": "Perl Core function like File::Which", "body": "<p>I found the answer is can_run from this core module IPC::CMD which can do the above job</p>\n\n<p><a href=\"https://metacpan.org/pod/IPC::Cmd#\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/IPC::Cmd#</a>$path-=-can_run(-PROGRAM-)</p>\n\n<pre><code>use IPC::Cmd qw(can_run);\n\nmy $full_path = can_run('perl') or warn 'perl is not installed!';\n</code></pre>\n"}], "owner": {"reputation": 3045, "user_id": 951615, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/32f59de3e1040fae90a803448e43316f?s=128&d=identicon&r=PG", "display_name": "smith", "link": "https://stackoverflow.com/users/951615/smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 56829107, "answer_count": 1, "score": -2, "last_activity_date": 1561943228, "creation_date": 1561938656, "question_id": 56828807, "link": "https://stackoverflow.com/questions/56828807/perl-core-function-like-filewhich", "title": "Perl Core function like File::Which", "body": "<p>I am wondering if there are a perl core function/module which implements something like what File::Which (<a href=\"https://metacpan.org/pod/File::Which\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/File::Which</a>) on by using core Perl without installing any external library .</p>\n\n<p>for example if i want to check an executable on Perl </p>\n\n<p>my @paths = where 'perl' ->  will return all the exectuables of perl</p>\n\n<p>which could be good to check if library is installed on the system with Perl ?</p>\n\n<p>for example python3 offer such function on the core : <a href=\"https://docs.python.org/dev/library/shutil.html#shutil.which\" rel=\"nofollow noreferrer\">https://docs.python.org/dev/library/shutil.html#shutil.which</a></p>\n\n<p>do Perl have such function on core and didn't need to install any library or i am missing something?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 3, "creation_date": 1561932173, "post_id": 56828138, "comment_id": 100209175, "body": "It&#39;s a fair question, and it&#39;s well-founded. But that problem with the loop condition being re-evaluated is only a problem in languages that have C-style for loops. Perl technically supports C-style loops, but it strongly favors for-each loops, which don&#39;t have that problem in any language that has them."}, {"owner": {"reputation": 67, "user_id": 11609137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9f041d4422cac3b7eafdc2a2bf77f0?s=128&d=identicon&r=PG&f=1", "display_name": "\u041d\u0415\u0412\u0421\u041a\u0418\u0419 \u0411\u041b\u042f\u0414\u0418\u041d\u0410", "link": "https://stackoverflow.com/users/11609137/%d0%9d%d0%95%d0%92%d0%a1%d0%9a%d0%98%d0%99-%d0%91%d0%9b%d0%af%d0%94%d0%98%d0%9d%d0%90"}, "reply_to_user": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1561933066, "post_id": 56828138, "comment_id": 100209323, "body": "Thank you. What about the last example: <code>while $index &lt; $fruit.chars { ... }</code>? Is it good to call <i>chars()</i> method on each iteration? I read this example in Perl 6 book."}, {"owner": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 1, "creation_date": 1561933272, "post_id": 56828138, "comment_id": 100209345, "body": "<code>while</code> loops would still evaluate the condition at every iteration. So it depends on what <code>chars</code> does. If <code>chars</code> is a cheap operation, I would leave it as is, as I find it cleaner to write that way. If it&#39;s expensive, then yeah it should be moved. Of course, it&#39;s also possible that the <code>while</code> loop is removing elements, so we may actually <i>need</i> <code>chars</code> to be reevaluated each time. So, not necessarily, but it depends on the situation."}, {"owner": {"reputation": 67, "user_id": 11609137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9f041d4422cac3b7eafdc2a2bf77f0?s=128&d=identicon&r=PG&f=1", "display_name": "\u041d\u0415\u0412\u0421\u041a\u0418\u0419 \u0411\u041b\u042f\u0414\u0418\u041d\u0410", "link": "https://stackoverflow.com/users/11609137/%d0%9d%d0%95%d0%92%d0%a1%d0%9a%d0%98%d0%99-%d0%91%d0%9b%d0%af%d0%94%d0%98%d0%9d%d0%90"}, "reply_to_user": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1561934246, "post_id": 56828138, "comment_id": 100209474, "body": "<code>chars()</code> method returns the length of the string. It is Perl 6 equivalent of Perl 5 <code>length</code> operator. So it returns the same value each iteration. I don&#39;t know whether the Perl 6 compiler is smart enough to optimize this loop so the method will be called only one time. I&#39;m confused <a href=\"http://shop.oreilly.com/product/0636920065883.do\" rel=\"nofollow noreferrer\">the popular book</a> do not do any manual optimizations."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 11609137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9f041d4422cac3b7eafdc2a2bf77f0?s=128&d=identicon&r=PG&f=1", "display_name": "\u041d\u0415\u0412\u0421\u041a\u0418\u0419 \u0411\u041b\u042f\u0414\u0418\u041d\u0410", "link": "https://stackoverflow.com/users/11609137/%d0%9d%d0%95%d0%92%d0%a1%d0%9a%d0%98%d0%99-%d0%91%d0%9b%d0%af%d0%94%d0%98%d0%9d%d0%90"}, "edited": false, "score": 1, "creation_date": 1561932624, "post_id": 56828277, "comment_id": 100209252, "body": "Thank you. I came to Perl from C. In C there is another bahavior, no any condition precalculations so functions should not be called like that: <code>for (i = 0; i &lt; fn(); i++);</code>"}, {"owner": {"reputation": 67, "user_id": 11609137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9f041d4422cac3b7eafdc2a2bf77f0?s=128&d=identicon&r=PG&f=1", "display_name": "\u041d\u0415\u0412\u0421\u041a\u0418\u0419 \u0411\u041b\u042f\u0414\u0418\u041d\u0410", "link": "https://stackoverflow.com/users/11609137/%d0%9d%d0%95%d0%92%d0%a1%d0%9a%d0%98%d0%99-%d0%91%d0%9b%d0%af%d0%94%d0%98%d0%9d%d0%90"}, "edited": false, "score": 0, "creation_date": 1561932812, "post_id": 56828277, "comment_id": 100209281, "body": "Hope the Perl 5 interpeter and Perl 6 compiler are smart enough to do condition calculation only one time at start."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1561935695, "post_id": 56828277, "comment_id": 100209701, "body": "Perl has two unrelated types of loops that use the same <code>for</code> and <code>foreach</code> keywords (which are synonyms). If you construct it with the same syntax as you would in a C <code>for</code> loop, it is actually equivalent to a <code>while</code> loop which does evaluate its condition (the second statement) and iteration code (third statement) each iteration. The other form, more commonly referred to as a &quot;foreach loop&quot; though it can also use either keyword, does not have a condition but simply evaluates a list of items to iterate through once, and aliases each item to the iterator."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1561935723, "post_id": 56828277, "comment_id": 100209707, "body": "See the documentation for <a href=\"https://perldoc.pl/perlsyn#For-Loops\" rel=\"nofollow noreferrer\">For Loops</a> and <a href=\"https://perldoc.pl/perlsyn#Foreach-Loops\" rel=\"nofollow noreferrer\">Foreach Loops</a>. Perl 6/Raku is an unrelated language, I can&#39;t speak to how for or foreach (or other syntax it may have) work there."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 3, "last_activity_date": 1561931031, "creation_date": 1561931031, "answer_id": 56828277, "question_id": 56828138, "link": "https://stackoverflow.com/questions/56828138/conditions-in-perl-loops-and-performance/56828277#56828277", "title": "Conditions in Perl loops and performance", "body": "<p>The condition is only calculated initially (before the loop starts) so I do not think it would increase the speed to precalculate the array before the loop.. Example:</p>\n\n<pre><code>for my $key (get_keys()) {\n    say $key;\n}\n\nsub get_keys {\n    say \"Calculating keys..\";\n    return qw(a b c d);\n}\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>Calculating keys..\na\nb\nc\nd\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 11609137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9f041d4422cac3b7eafdc2a2bf77f0?s=128&d=identicon&r=PG&f=1", "display_name": "\u041d\u0415\u0412\u0421\u041a\u0418\u0419 \u0411\u041b\u042f\u0414\u0418\u041d\u0410", "link": "https://stackoverflow.com/users/11609137/%d0%9d%d0%95%d0%92%d0%a1%d0%9a%d0%98%d0%99-%d0%91%d0%9b%d0%af%d0%94%d0%98%d0%9d%d0%90"}, "edited": false, "score": 0, "creation_date": 1562000520, "post_id": 56828706, "comment_id": 100231563, "body": "Everything is clear now, many thanks for your long and detailed answer! If you have any information about the Perl 6 book examples, it would be great."}], "tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": false, "score": 3, "last_activity_date": 1561941112, "last_edit_date": 1561941112, "creation_date": 1561937152, "answer_id": 56828706, "question_id": 56828138, "link": "https://stackoverflow.com/questions/56828138/conditions-in-perl-loops-and-performance/56828706#56828706", "title": "Conditions in Perl loops and performance", "body": "<pre><code>foreach my $key (keys %hash) { ... }\nfor my $value (values %hash) { ... }\n</code></pre>\n\n<p>The <code>for</code> and the <code>foreach</code> are synonymous in Perl, so aside from the fact that your two example snippets are operating on different parts of the hash, they're the same thing.</p>\n\n<p>Ok, so here's what happens internally:  In each case all keys, or all values are calculated as a list, and then the looping construct iterates on that calculated list. There is an internal check, but that check is only to see if the loop has reached the offset of the last element in the list yet.  That is a cheap operation in the underlying C code.  To be clear, <code>keys</code> and <code>values</code> are <em>not</em> called on each iteration. The list of things iterated over is computed only once at the beginning of the loop.</p>\n\n<p>Also, <code>$key</code> and <code>$value</code> are aliases to the actual key or the actual value, not copies. So there is no per-iteration copy made.</p>\n\n<p>The nuance that is often missed is the fact that the iteration list is precomputed upon entering the loop.  That is why it's considered a terrible idea to do this:</p>\n\n<pre><code>foreach my $line (&lt;$file_handle&gt;) {...}\n</code></pre>\n\n<p>...because the entire file must be read and held in memory at once before the first line can be processed.  The fact that a list must be available internally first is typically an acceptable memory trade-off for things that are already held in memory to begin with. But for external sources such as a file there's no guarantee that available memory can hold the whole thing -- particularly if it's some endless stream. Consider this code:</p>\n\n<pre><code>open my $fh, '&lt;', '/dev/urandom';\nsay ord while &lt;$fh&gt;;\n</code></pre>\n\n<p>It will never terminate, but will emit a constant stream of ordinal values. However, it does not grow in memory usage.</p>\n\n<p>Now change the second line to this:</p>\n\n<pre><code>say ord for &lt;$fh&gt;;\n</code></pre>\n\n<p>This will appear to hang while it consumes all of the system's memory attempting to retrieve the entire contents of /dev/urandom (and endless stream). It must do this before it can start iterating, because that's how a range-based foreach loop works in Perl, and some other languages.</p>\n\n<p>So a range based foreach loop is inexpensive in its computational overhead, but in some cases potentially expensive in its memory footprint.</p>\n\n<p>Speaking to your final example: </p>\n\n<pre><code>my @array = keys %hash;\nforeach my $keys (@array) { ... } \n</code></pre>\n\n<p>It doesn't make an appreciable difference, and may actually be slower or consume more memory.  When I compare the two approaches with a hash of 100000 elements the difference between the two is only 2%, or within the margin of error:</p>\n\n<pre><code>         Rate   copy direct\ncopy   35.9/s     --    -2%\ndirect 36.7/s     2%     --\n</code></pre>\n\n<p>Here's the code:</p>\n\n<pre><code>use Benchmark qw(cmpthese);\n\nmy %hash;\n@hash{1..100000} = (1..100000);\n\n\nsub copy {\n    my @array = keys %hash;\n    my $b = 0;\n    $b += $_ foreach @array;\n    return $b;\n}\n\nsub direct {\n    my $b = 0;\n    $b += $_ foreach keys %hash;\n    return $b;\n}\n\ncmpthese(-5, {\n    copy =&gt; \\&amp;copy,\n    direct =&gt; \\&amp;direct,\n});\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 11609137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9f041d4422cac3b7eafdc2a2bf77f0?s=128&d=identicon&r=PG&f=1", "display_name": "\u041d\u0415\u0412\u0421\u041a\u0418\u0419 \u0411\u041b\u042f\u0414\u0418\u041d\u0410", "link": "https://stackoverflow.com/users/11609137/%d0%9d%d0%95%d0%92%d0%a1%d0%9a%d0%98%d0%99-%d0%91%d0%9b%d0%af%d0%94%d0%98%d0%9d%d0%90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1561941112, "creation_date": 1561929445, "question_id": 56828138, "link": "https://stackoverflow.com/questions/56828138/conditions-in-perl-loops-and-performance", "title": "Conditions in Perl loops and performance", "body": "<p>There are many idioms in Perl with the using of operators/functions/subprograms/methods in loop conditions. Books advice use them!\nBut as I understand these conditions are calculated each iteration. Am I right?</p>\n\n<p>Perl 5:</p>\n\n<pre><code>foreach my $key (keys %hash) { ... }\nfor my $value (values %hash) { ... }\n</code></pre>\n\n<p>Perl 6:</p>\n\n<pre><code>for 'words.txt'.IO.lines -&gt; $line { ... }\nwhile $index &lt; $fruit.chars { ... }\n</code></pre>\n\n<p>Why programmers don't assign condition to some variable before loop and use this variable in loop? It would increase speed. So the first example would look like this:</p>\n\n<pre><code>my @array = keys %hash;\nforeach my $keys (@array) { ... } \n</code></pre>\n"}, {"tags": ["perl", "tk"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1561917659, "post_id": 56826628, "comment_id": 100206250, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/56760432/how-do-i-change-the-data-in-a-label-in-perl-tk\">How do I change the data in a label in Perl Tk?</a>"}, {"owner": {"reputation": 175, "user_id": 10902967, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QuFnwmt5b1Q/AAAAAAAAAAI/AAAAAAAAADA/6vpTCfPYN_M/photo.jpg?sz=128", "display_name": "Blue-Maned Hawk", "link": "https://stackoverflow.com/users/10902967/blue-maned-hawk"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1561925955, "post_id": 56826628, "comment_id": 100208010, "body": "Nope.  That was me trying to get a label to appear at the push of a button.  This time, I&#39;m trying to store entry data in an array."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1561928298, "post_id": 56826628, "comment_id": 100208519, "body": "The basic issue is the same: You&#39;re treating a <code>Tk::Entry</code> widget as if it were the data the user entered. In either case you would need to call the <code>get</code> method to get the user input."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1561928360, "post_id": 56826628, "comment_id": 100208535, "body": "This comment from the other question also applies: <i>No, it doesn&#39;t even compile: <code>Global symbol &quot;$mw&quot; requires explicit package name (did you forget to declare &quot;my $mw&quot;?) at try.pl line 3.</code></i>"}, {"owner": {"reputation": 175, "user_id": 10902967, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QuFnwmt5b1Q/AAAAAAAAAAI/AAAAAAAAADA/6vpTCfPYN_M/photo.jpg?sz=128", "display_name": "Blue-Maned Hawk", "link": "https://stackoverflow.com/users/10902967/blue-maned-hawk"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1561928958, "post_id": 56826628, "comment_id": 100208644, "body": "Ooops.  I can fix it."}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 10902967, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QuFnwmt5b1Q/AAAAAAAAAAI/AAAAAAAAADA/6vpTCfPYN_M/photo.jpg?sz=128", "display_name": "Blue-Maned Hawk", "link": "https://stackoverflow.com/users/10902967/blue-maned-hawk"}, "edited": false, "score": 0, "creation_date": 1561950581, "post_id": 56826910, "comment_id": 100211505, "body": "This is great, but it won&#39;t work for my application.  I need something that con select multiple files or a directory, if at all possible.  I guess what I&#39;m looking for is something that can take the input from the entry and turn it into an array."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1561919458, "last_edit_date": 1561919458, "creation_date": 1561917346, "answer_id": 56826910, "question_id": 56826628, "link": "https://stackoverflow.com/questions/56826628/packing-an-array-causes-cant-locate-method-error-in-perl/56826910#56826910", "title": "Packing an array causes &quot;Can&#39;t locate method&quot; error in perl", "body": "<p>The <code>Entry</code> method returns a single object. You can find its documentation <a href=\"http://p3rl.org/Tk::Entry\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p><code>@filelist</code> is an array. You can't call methods on arrays, only on scalars.</p>\n\n<p>The standard way is to use the <a href=\"http://p3rl.org/Tk::getOpenFile\" rel=\"nofollow noreferrer\">Tk::getOpenFile</a> widget:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nuse Tk;\n\nmy $mw = MainWindow-&gt;new;\nmy $button = $mw-&gt;Button(\n    -text =&gt; 'Select Files',\n    -command =&gt; sub {\n        my $files = $mw-&gt;getOpenFile(-multiple =&gt; 1);\n        say for @$files;\n    },\n)-&gt;pack;\n\nMainLoop();\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 10902967, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QuFnwmt5b1Q/AAAAAAAAAAI/AAAAAAAAADA/6vpTCfPYN_M/photo.jpg?sz=128", "display_name": "Blue-Maned Hawk", "link": "https://stackoverflow.com/users/10902967/blue-maned-hawk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1561928972, "creation_date": 1561914619, "last_edit_date": 1561928972, "question_id": 56826628, "link": "https://stackoverflow.com/questions/56826628/packing-an-array-causes-cant-locate-method-error-in-perl", "title": "Packing an array causes &quot;Can&#39;t locate method&quot; error in perl", "body": "<p>I am trying to create a basic GUIed backup system in perl using Tk and Archive::Tar.  Nothing complicated, just a frontend for making .tar.bz2 files.  So, one of the arguments for an Archive::Tar command is an array.  To determine what is to be put in that array, I need to recieve information from an entry box, which I included with Tk.  However, the program doesn't compile, and produces a \"Can't locate method\" error at the line where the entry is packed.</p>\n\n<p>The following is an example (make sure the packages are installed!):</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict; use warnings;\n\nuse Tk;\n\nmy $mw = MainWindow -&gt; new;\n\n@filelist = $mw -&gt; Entry( -width = 30 );\n@filelist -&gt; pack;\n</code></pre>\n\n<p>How can I modify this code to create the desired effect?</p>\n"}, {"tags": ["bash", "perl", "pipe", "named-pipes"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1561897271, "post_id": 56824625, "comment_id": 100202031, "body": "I think <code>cat</code> is waiting for an <code>EOF</code> marker so it will not print anything before that arrives. Try press <code>CTRL-D</code> in <code>shell1</code>, then the output arrives in <code>shell2</code>"}], "answers": [{"comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1561900754, "post_id": 56824886, "comment_id": 100202599, "body": "Or just not use cat at all. <code>perl -ne &#39;blah&#39; ~&#47;myfifo</code>"}, {"owner": {"reputation": 13, "user_id": 10642367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6947c089e557696b87d8fc8e3c9fde72?s=128&d=identicon&r=PG&f=1", "display_name": "fusillator", "link": "https://stackoverflow.com/users/10642367/fusillator"}, "edited": false, "score": 1, "creation_date": 1561911621, "post_id": 56824886, "comment_id": 100205033, "body": "@H&#229;kon Brilliant. Brilliant, you solved my dubt. Thanks a lot for your help and time."}, {"owner": {"reputation": 13, "user_id": 10642367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6947c089e557696b87d8fc8e3c9fde72?s=128&d=identicon&r=PG&f=1", "display_name": "fusillator", "link": "https://stackoverflow.com/users/10642367/fusillator"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1561911633, "post_id": 56824886, "comment_id": 100205034, "body": "@Shawn The example was useless, just to prove the missing output."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1561898724, "last_edit_date": 1561898724, "creation_date": 1561898106, "answer_id": 56824886, "question_id": 56824625, "link": "https://stackoverflow.com/questions/56824625/redirect-a-named-pipe-in-a-perl-loop/56824886#56824886", "title": "Redirect a Named Pipe in a perl loop", "body": "<p>When the <code>STDOUT</code> of the Perl process is not connected to a tty, autoflushing is turned off. This is the case when piping the output from the Perl process to <code>cat</code> instead of printing it to the terminal. This causes the <code>cat</code> command to hang, waiting for input from the Perl process.</p>\n\n<p>You can fix this by turning on autoflush for STDOUT:  </p>\n\n<pre><code>cat ~/myfifo | perl -ane 'STDOUT-&gt;autoflush(1); print \"testa\\n\"' | cat \n</code></pre>\n\n<p>alternativly you can use the <a href=\"https://linux.die.net/man/1/unbuffer\" rel=\"nofollow noreferrer\"><code>unbuffer</code></a> command:</p>\n\n<pre><code>cat ~/myfifo | unbuffer -p perl -ane 'print \"testa\\n\"' | cat\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10642367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6947c089e557696b87d8fc8e3c9fde72?s=128&d=identicon&r=PG&f=1", "display_name": "fusillator", "link": "https://stackoverflow.com/users/10642367/fusillator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 56824886, "answer_count": 1, "score": 1, "last_activity_date": 1561903955, "creation_date": 1561895510, "last_edit_date": 1561903955, "question_id": 56824625, "link": "https://stackoverflow.com/questions/56824625/redirect-a-named-pipe-in-a-perl-loop", "title": "Redirect a Named Pipe in a perl loop", "body": "<p>Having a named pipe as a source</p>\n\n<pre><code>shell1&gt; mkfifo ~/myfifo\nshell1&gt; tee -a ~/myfifo\nciao\n</code></pre>\n\n<p>Why doesn't the following command print out any message?</p>\n\n<pre><code>shell2&gt; cat ~/myfifo | perl -ane 'print \"testa\\n\"' | cat\n</code></pre>\n\n<p>Whilst removing the last command all run as supposed</p>\n\n<pre><code>shell2&gt; cat ~/myfifo | perl -ane 'print \"testa\\n\"'\ntesta\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "edited": false, "score": 1, "creation_date": 1561869513, "post_id": 56822385, "comment_id": 100197584, "body": "Hi, Thanks for suggestion. The problem is on the second array, i want it have file extension."}], "tags": [], "owner": {"reputation": 798, "user_id": 3819047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yVKZn.jpg?s=128&g=1", "display_name": "Franco Roura", "link": "https://stackoverflow.com/users/3819047/franco-roura"}, "is_accepted": false, "score": 0, "last_activity_date": 1561869072, "creation_date": 1561869072, "answer_id": 56822385, "question_id": 56822241, "link": "https://stackoverflow.com/questions/56822241/perl-script-to-pair-two-array/56822385#56822385", "title": "Perl script to pair two array", "body": "<p>The problem is your algorithm. You're iterating all filenames and all dirnames at the same time.\nI mean, your code says \"For every directory, create every file\".</p>\n\n<p>Try something along the lines of this and you'll be fine:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code># WRITE TESTFILE\n    foreach my $filename (@filename){\n        chomp $filename;\n        if ( -e \"$filename/$filename\" and -d \"$filename/$filename\" ){\n            print \"File already exists\\n\";\n        }\n        else {\n            open ( TXT_FILE, \"&gt;$filename/$filename\" );\n\n            print TXT_FILE \"Hello World\";\n\n            close TXT_FILE;\n        }\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1561869502, "creation_date": 1561869502, "answer_id": 56822425, "question_id": 56822241, "link": "https://stackoverflow.com/questions/56822241/perl-script-to-pair-two-array/56822425#56822425", "title": "Perl script to pair two array", "body": "<p>I assume <code>input()</code> returns something like <code>('fileA', 'fileB')</code>.</p>\n\n<p>The problem with your code is the nested loop here:</p>\n\n<pre><code>foreach my $test_path (@test_path){\n    foreach my $testname (@testname){\n</code></pre>\n\n<p>This combines every <code>$test_path</code> with every possible <code>$testname</code>. You don't want that. Also, it doesn't make much sense to assign the result of <code>map</code> to a scalar: All you'll get is the number of elements in the list created by <code>map</code>.</p>\n\n<p>(Also, you have random <code>chomp</code> calls sprinkled throughout your code. None of those should be there.)</p>\n\n<p>You only need a single array and a single loop:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nsub input {\n    return ('fileA', 'fileB');\n}\n\nmy @input = input();\nmy $dirname = '../../../experiment';\n\nmy @files = map \"$dirname/$_/$_.txt\", @input;\n\nfor my $file (@files) {\n    print \"got $file\\n\";\n}\n</code></pre>\n\n<p>Here the loop is hidden in the <code>map ..., @input</code> call. If you want to write it as a <code>for</code> loop, it would look like this:</p>\n\n<pre><code>my @files;\nfor my $input (@input) {\n    push @files, \"$dirname/$input/$input.txt\";\n}\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 56822425, "answer_count": 2, "score": 0, "last_activity_date": 1561869502, "creation_date": 1561865592, "last_edit_date": 1561869446, "question_id": 56822241, "link": "https://stackoverflow.com/questions/56822241/perl-script-to-pair-two-array", "title": "Perl script to pair two array", "body": "<p>I want to pair two array and add char '/' between them. Let say, two arrays are like below</p>\n\n<pre><code>@array1 = (FileA .. FileZ);\n@array2 = (FileA.txt .. FileZ.txt);\n</code></pre>\n\n<p>The output that I want is like below</p>\n\n<pre><code>../../../experiment/fileA/fileA.txt\n.\n.\n../../../experiment/fileZ/fileZ.txt\n</code></pre>\n\n<p>here is my code</p>\n\n<pre><code>my @input_name = input();\nmy $dirname = \"../../../experiment/\";\n\n# CREATE FOLDER PATH\nmy @fileDir;\n   foreach my $input_name (@input_name){\n   chomp $input_name;\n   $_ = $dirname . $input_name;\n   push @fileDir, $_;\n  }\n\n# CREATE FILE NAME\nmy @filename;\nmy $extension = '.txt';\nforeach my $input_name (@input_name){\n      chomp $input_name;\n   $_ = $input_name . $extension;\n   push @filename, $_;\n}\n</code></pre>\n\n<p>The code that I'd try is like below. But it seem doesn't work</p>\n\n<pre><code>#CREATE FULL PATH\nforeach my $test_path (@test_path){\n    foreach my $testname (@testname){\n       my $test = map \"$test_path[$_]/$testname[$_]\", 0..$#test_path;\n       push @file, $test;\n   }\n}\n\n\nprint @file;\n</code></pre>\n"}, {"tags": ["regex", "perl", "newline", "eof", "negative-lookbehind"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561849687, "post_id": 56821245, "comment_id": 100195649, "body": "<code>-0</code> isn&#39;t slurp mode, <code>-0777</code> is"}], "answers": [{"tags": [], "owner": {"reputation": 206, "user_id": 10879350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f421e3656a00dd54ea54f08fb0678ec2?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Blankenhorn", "link": "https://stackoverflow.com/users/10879350/thomas-blankenhorn"}, "is_accepted": false, "score": 0, "last_activity_date": 1561889227, "last_edit_date": 1561889227, "creation_date": 1561849223, "answer_id": 56821388, "question_id": 56821245, "link": "https://stackoverflow.com/questions/56821245/perl-regex-negative-lookbehind-detect-file-lacking-final-linefeed/56821388#56821388", "title": "perl regex negative-lookbehind detect file lacking final linefeed", "body": "<p>Do you have a strong reason for using a regular expression for his job? Practicing regular expressions for example? If not, I think a simpler approach is to just use a <code>while</code> loop that tests for <code>eof</code> and remembers the latest character read. Something like this might do the job.</p>\n\n<pre><code> perl -le'while (!eof()) { $previous = getc(\\*ARGV) } \n          if ($previous ne \"\\n\") { print \"pathological last line!\" }'\n</code></pre>\n\n<p>PS: ikegami's comment about my solution being slow is well-taken. (Thanks for the helpful edit, too!) So I wondered if there's a way to read the file backwards. As it turns out, CPAN has a module for just that. After installing it, I came up with this:</p>\n\n<pre><code>perl -le 'use File::ReadBackwards; \n          my $bw = File::ReadBackwards-&gt;new(shift @ARGV);\n          print \"pathological last line\" if substr($bw-&gt;readline, -1) ne \"\\n\"'\n</code></pre>\n\n<p>That should work efficiently, even very large files. And when I come back to read it a year later, I will more likely understand it  than I would with the regular-expression approach.</p>\n"}, {"comments": [{"owner": {"reputation": 206, "user_id": 10879350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f421e3656a00dd54ea54f08fb0678ec2?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Blankenhorn", "link": "https://stackoverflow.com/users/10879350/thomas-blankenhorn"}, "edited": false, "score": 0, "creation_date": 1561887459, "post_id": 56821416, "comment_id": 100200247, "body": "Maybe explain that &quot;0777&quot; turns on slurp mode? You said so in your comment to the original question, but more readers will see it if you mention it in your answer. (Which would be a good thing because I, for one, did not know that.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1561852627, "last_edit_date": 1561852627, "creation_date": 1561849832, "answer_id": 56821416, "question_id": 56821245, "link": "https://stackoverflow.com/questions/56821245/perl-regex-negative-lookbehind-detect-file-lacking-final-linefeed/56821416#56821416", "title": "perl regex negative-lookbehind detect file lacking final linefeed", "body": "<p><code>/(?&lt;=\\n)$/</code> is a weird and expensive way of doing <code>/\\n$/</code>.</p>\n\n<p><code>/\\n$/</code> means <code>/\\n(?=\\n?\\z)/</code>, so it's a weird and expensive way of doing <code>/\\n\\z/</code>.</p>\n\n<p>A few approaches:</p>\n\n<pre><code>perl -n0777e'print \"pathological last line\\n\" if !/\\n\\z/'\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>perl -n0777e'print \"pathological last line\\n\" if /(?&lt;!\\n)\\z/'\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>perl -n0777e'print \"pathological last line\\n\" if substr($_, -1) ne \"\\n\"'\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>perl -ne'$ll=$_; END { print \"pathological last line\\n\" if $ll !~ /\\n\\z/ }'\n</code></pre>\n\n<p>The last solution avoids slurping the entire file.</p>\n\n<hr>\n\n<blockquote>\n  <p><em>Why does my regex always match, even when the end-of-file is preceded by newline?</em></p>\n</blockquote>\n\n<p>Because you mistakenly think that <code>$</code> only matches at the end of the string. Use <code>\\z</code> for that.</p>\n"}, {"tags": [], "owner": {"reputation": 914, "user_id": 1461307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zhYSU.png?s=128&g=1", "display_name": "Jacob Wegelin", "link": "https://stackoverflow.com/users/1461307/jacob-wegelin"}, "is_accepted": false, "score": 0, "last_activity_date": 1561948709, "creation_date": 1561948709, "answer_id": 56829465, "question_id": 56821245, "link": "https://stackoverflow.com/questions/56821245/perl-regex-negative-lookbehind-detect-file-lacking-final-linefeed/56829465#56829465", "title": "perl regex negative-lookbehind detect file lacking final linefeed", "body": "<p>The hidden context of my request was a perl script to \"clean\" a text file used in the TeX/LaTeX environment. This is why I wanted to slurp. \n(I mistakenly thought that \"laser focus\" on a problem, recommended by stackoverflow, meant editing out the context.)</p>\n\n<p>Thanks to the responses, here is an improved draft of the script:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict; use warnings; use 5.18.2;\n# Loop slurp: \n$/ = undef;     # input record separator: entire file is a single record.\n# a \"trivial line\" looks blank, consists exclusively of whitespace, but is not necessarily a pure newline=linefeed=LF.\nwhile (&lt;&gt;) {\n    s/^\\s*$/\\n/mg;          # convert any trivial line to a pure LF. Unlike \\z, $ works with /m multiline.\n    s/[\\n][\\n]+/\\n\\n/g; # exactly 2 blank lines (newlines) separate paragraphs. Like cat -s\n    s/^[\\n]+//;             # first line is visible or \"nontrivial.\"\n    s/[\\n]+\\z/\\n/;      # last  line is visible or \"nontrivial.\"\n    print STDOUT;\n    print \"\\n\" unless m/\\n\\z/; # IF detect pathological last line, i.e., not ending in LF, THEN append LF. \n}\n</code></pre>\n\n<p>And here is how it works, when named zz.pl. First a messy file, then how it looks after zz.pl gets through with it: </p>\n\n<pre><code>bash: printf '  \\n \\r   \\naaa\\n \\t \\n  \\n  \\nbb\\n\\n\\n\\n    \\t' \n\n\naaa\n\n\n\nbb\n\n\n\n        bash: \nbash: \nbash: printf '  \\n \\r   \\naaa\\n \\t \\n  \\n  \\nbb\\n\\n\\n\\n    \\t' | zz.pl\naaa\n\nbb\nbash: \n</code></pre>\n"}], "owner": {"reputation": 914, "user_id": 1461307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zhYSU.png?s=128&g=1", "display_name": "Jacob Wegelin", "link": "https://stackoverflow.com/users/1461307/jacob-wegelin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1561948709, "creation_date": 1561847243, "question_id": 56821245, "link": "https://stackoverflow.com/questions/56821245/perl-regex-negative-lookbehind-detect-file-lacking-final-linefeed", "title": "perl regex negative-lookbehind detect file lacking final linefeed", "body": "<p>The following code uses <code>tail</code> to test whether the last line of a file fails to culminate in a newline (linefeed, LF).</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>&gt; printf 'aaa\\nbbb\\n' | test -n \"$(tail -c1)\" &amp;&amp; echo pathological last line\n&gt; printf 'aaa\\nbbb'   | test -n \"$(tail -c1)\" &amp;&amp; echo pathological last line\npathological last line \n&gt;\n</code></pre>\n\n<p>One can test for the same condition by using perl, a positive lookbehind regex, and <code>unless</code>, as follows. This is based on the notion that, if a file ends with newline, the character immediately preceding end-of-file will be <code>\\n</code> by definition.</p>\n\n<p>(Recall that the <code>-n0</code> flag causes perl to \"slurp\" the entire file as a single record. Thus, there is only one <code>$</code>, the end of the file.)</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>&gt; printf 'aaa\\nbbb\\n' | perl -n0 -e 'print \"pathological last line\\n\" unless m/(?&lt;=\\n)$/;'\n&gt; printf 'aaa\\nbbb'   | perl -n0 -e 'print \"pathological last line\\n\" unless m/(?&lt;=\\n)$/;'\npathological last line\n&gt;\n</code></pre>\n\n<p>Is there a way to accomplish this using <code>if</code> rather than <code>unless</code>, and negative lookbehind? The following fails, in that the regex seems to <strong>always</strong> match:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>&gt; printf 'aaa\\nbbb\\n' | perl -n0 -e 'print \"pathological last line\\n\" if m/(?&lt;!\\n)$/;'\npathological last line\n&gt; printf 'aaa\\nbbb'   | perl -n0 -e 'print \"pathological last line\\n\" if m/(?&lt;!\\n)$/;'\npathological last line\n&gt;\n</code></pre>\n\n<p>Why does my regex always match, even when the end-of-file is preceded by newline? I am trying to test for an end-of-file that is <strong>not</strong> preceded by newline.</p>\n"}, {"tags": ["perl", "awk", "grep"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1561801214, "post_id": 56816500, "comment_id": 100186488, "body": "What is the expected output for the input you show? Also there are no curly brackets in your input"}, {"owner": {"reputation": 1029, "user_id": 6194597, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a0ad1da3ba0dfa777698c9f28fdd23a0?s=128&d=identicon&r=PG&f=1", "display_name": "Gregor Isack", "link": "https://stackoverflow.com/users/6194597/gregor-isack"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1561801455, "post_id": 56816500, "comment_id": 100186526, "body": "Edited. It&#39;s the same as the example shown input, as the actual input that doesn&#39;t have to keyword will be omitted. Put simply, I wanted to filter out the content that have the DEBUG: keyword (multiline or single line)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1561801523, "post_id": 56816500, "comment_id": 100186537, "body": "How do you separate a single line from a multiline case? For the multiline case, where does it end? With the a single closing parenthesis <code>)</code> ?"}, {"owner": {"reputation": 1029, "user_id": 6194597, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a0ad1da3ba0dfa777698c9f28fdd23a0?s=128&d=identicon&r=PG&f=1", "display_name": "Gregor Isack", "link": "https://stackoverflow.com/users/6194597/gregor-isack"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1561801556, "post_id": 56816500, "comment_id": 100186549, "body": "Sorry, just edited that too! Yes, it is"}, {"owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 0, "creation_date": 1561802105, "post_id": 56816500, "comment_id": 100186639, "body": "Perhaps you could use an expression like <a href=\"https://regex101.com/r/DDdwra/1/\" rel=\"nofollow noreferrer\">regex101.com/r/DDdwra/1</a> Can you add the code that you use to the question?"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1561803563, "last_edit_date": 1561803563, "creation_date": 1561803223, "answer_id": 56816704, "question_id": 56816500, "link": "https://stackoverflow.com/questions/56816500/extract-multiline-output-if-consist-certain-word-and-inside-a-bracket/56816704#56816704", "title": "Extract multiline output if consist certain word AND inside a bracket", "body": "<p>Here is an example of using a Regexp in Perl (but this should probably be handled more accurately by a parser like <a href=\"https://metacpan.org/pod/Regexp::Grammars\" rel=\"nofollow noreferrer\"><code>Regexp::Grammars</code></a>):</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nmy $data = do { local $/; &lt;&gt; };\nmy @lines = $data \n  =~ /\n         ^( (?:(?!$).)* DEBUG:\n             (?: \n                 (?: [^(]*? $ ) \n              | \n                 (?: (?:(?!$).)* \\( [^)]* \\) .*? $ )\n             )\n         )/gmsx;\n\nsay for @lines;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1029, "user_id": 6194597, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a0ad1da3ba0dfa777698c9f28fdd23a0?s=128&d=identicon&r=PG&f=1", "display_name": "Gregor Isack", "link": "https://stackoverflow.com/users/6194597/gregor-isack"}, "edited": false, "score": 1, "creation_date": 1561817414, "post_id": 56818105, "comment_id": 100189584, "body": "I didn&#39;t expect <code>awk</code> could do this especially if there&#39;s two conditions to be met (i.e. single and multiline), this is a very good solution as I intended to use it on terminal. If you don&#39;t mind could you explain briefly explain the syntax? Understanding it beyond me."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 1029, "user_id": 6194597, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a0ad1da3ba0dfa777698c9f28fdd23a0?s=128&d=identicon&r=PG&f=1", "display_name": "Gregor Isack", "link": "https://stackoverflow.com/users/6194597/gregor-isack"}, "edited": false, "score": 1, "creation_date": 1561817883, "post_id": 56818105, "comment_id": 100189678, "body": "OK, I added an explanation as pseudo code next to each statement. In UNIX for simplicy,  clarity, portability, etc. if you need to do <code>s&#47;old&#47;new</code> then use sed; if you need to do <code>g&#47;re&#47;p</code> then use grep, for any other text manipulation use awk, and for anything that&#39;s more than just text manipulation such as manipulating (creating/destroying/moving) files, manipulating processes, sockets, calling other tools, etc. that you&#39;d otherwise do in shell THEN consider perl, python, ruby, etc."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 2, "last_activity_date": 1561818454, "last_edit_date": 1561818454, "creation_date": 1561816570, "answer_id": 56818105, "question_id": 56816500, "link": "https://stackoverflow.com/questions/56816500/extract-multiline-output-if-consist-certain-word-and-inside-a-bracket/56818105#56818105", "title": "Extract multiline output if consist certain word AND inside a bracket", "body": "<p>With any awk in any shell on every UNIX box:</p>\n\n<pre><code>$ awk 'f; /\\)/{f=0} /DEBUG:/{print; f=/\\(/}' file\nJun 29 16:46:13 iPhone SomeThing[79987] &lt;Notice&gt;: [AppName] file.x:115 DEBUG: ClassNumberOne viewControllers: (\n    \"&lt;UINavigationController: 0x105031a00&gt;\",\n    \"&lt;UINavigationController: 0x10505ba00&gt;\",\n    \"&lt;UINavigationController: 0x10486fe00&gt;\",\n    \"&lt;UINavigationController: 0x105052600&gt;\",\n    \"&lt;UINavigationController: 0x105065c00&gt;\"\n)\nJun 29 16:46:13 iPhone SomeThing[79987] &lt;Notice&gt;: [AppName] file.x:151 DEBUG: ClassNumberTwo ARG2 2\n</code></pre>\n\n<p>Explanation:</p>\n\n<pre><code>awk '       # WHILE read line DO \nf;          #    IF the flag `f` is set THEN print the current line ENDIF\n/\\)/{f=0}   #    IF the current line contains `)` THEN clear the flag ENDIF\n/DEBUG:/ {  #    IF the current line contains `DEBUG:` THEN\n    print;  #        print the line\n    f=/\\(/  #        set the flag `f` to 1 if the line contains `(`, 0 otherwise\n}           #    ENDIF\n' file      # ENDWHILE\n</code></pre>\n"}], "owner": {"reputation": 1029, "user_id": 6194597, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a0ad1da3ba0dfa777698c9f28fdd23a0?s=128&d=identicon&r=PG&f=1", "display_name": "Gregor Isack", "link": "https://stackoverflow.com/users/6194597/gregor-isack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 56818105, "answer_count": 2, "score": 1, "last_activity_date": 1561986274, "creation_date": 1561801042, "last_edit_date": 1561986274, "question_id": 56816500, "link": "https://stackoverflow.com/questions/56816500/extract-multiline-output-if-consist-certain-word-and-inside-a-bracket", "title": "Extract multiline output if consist certain word AND inside a bracket", "body": "<p>I have an input of such:</p>\n\n<pre><code>Jun 29 16:46:13 iPhone SomeThing[79987] &lt;Notice&gt;: [AppName] file.x:115 DEBUG: ClassNumberOne viewControllers: (\n    \"&lt;UINavigationController: 0x105031a00&gt;\",\n    \"&lt;UINavigationController: 0x10505ba00&gt;\",\n    \"&lt;UINavigationController: 0x10486fe00&gt;\",\n    \"&lt;UINavigationController: 0x105052600&gt;\",\n    \"&lt;UINavigationController: 0x105065c00&gt;\"\n)\nJun 29 16:46:13 iPhone SomeThing[79987] &lt;Notice&gt;: [AppName] file.x:151 DEBUG: ClassNumberTwo ARG2 2\n</code></pre>\n\n<p>There's two case to be matched here, one is of multi-line, another is of single line. The criteria is that it must have the <code>DEBUG:</code> keyword. For multiline, if that line has the keyword and and a <code>(</code>, then it should match until the end of <code>)</code>. Each line is separated by a newline separator. I can't figure this out. Currently I'm using a simple <code>grep DEBUG:</code> and that's it. But for the multi-line scenario, everything is lost beside the first one. And I'm not familiar with <code>perl</code>, any idea? Thanks in advance!</p>\n\n<p>Note that I'm on iOS (jailbroken), thus another tool might be limited.</p>\n\n<p>EDIT:</p>\n\n<p>Expected output will be the whole line that matched the criteria, that's the same as the input example shown above. The actual input have tonnes of other lines that doesn't have the keyword <code>DEBUG:</code>, and thus will be ignored.</p>\n"}, {"tags": ["perl", "mojo-useragent"], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1561783887, "creation_date": 1561783887, "answer_id": 56815149, "question_id": 56813898, "link": "https://stackoverflow.com/questions/56813898/mojouseragent-and-local-address-method/56815149#56815149", "title": "Mojo::UserAgent and local_address method", "body": "<p>A HTTP connection is a TCP connection, which is a connection from a local address to a remote address. Usually the local address will be your loopback, and usually it's better not to specify it so the correct address can be chosen. This local_address attribute is passed through <a href=\"https://metacpan.org/pod/Mojo::IOLoop::Client#connect1\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Mojo::IOLoop::Client#connect1</a> and then to <a href=\"https://metacpan.org/pod/IO::Socket::IP#LocalHost-=%3E-STRING\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/IO::Socket::IP#LocalHost-=%3E-STRING</a>.</p>\n\n<p>So no, it does not affect the URL you request from (which by the way must use forward slashes as path separators and specify the protocol, like any absolute HTTP URL). A relative URL which omits the hostname and protocol will send a request to the <a href=\"https://metacpan.org/pod/Mojo::UserAgent#server\" rel=\"nofollow noreferrer\">server</a> attribute which is how <a href=\"https://metacpan.org/pod/Test::Mojo\" rel=\"nofollow noreferrer\">Test::Mojo</a> and the <a href=\"https://metacpan.org/pod/Mojolicious::Command::get\" rel=\"nofollow noreferrer\">get command</a> can query a local Mojolicious application, but this does not have anything to do with requesting remote servers.</p>\n"}], "owner": {"reputation": 75, "user_id": 10546869, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3_LmQqfkVxE/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCk5Nau3q6Zn2oOdR5W6HLTv-Rg3g/mo/photo.jpg?sz=128", "display_name": "jsor", "link": "https://stackoverflow.com/users/10546869/jsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1561783887, "creation_date": 1561762584, "question_id": 56813898, "link": "https://stackoverflow.com/questions/56813898/mojouseragent-and-local-address-method", "title": "Mojo::UserAgent and local_address method", "body": "<p>I am new to Mojo::UserAgent (<a href=\"https://metacpan.org/pod/Mojo::UserAgent\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Mojo::UserAgent</a>) , I am trying to explore its functions.</p>\n\n<p>I found this function on the docs :</p>\n\n<pre><code>local_address\nmy $address = $ua-&gt;local_address;\n$ua         = $ua-&gt;local_address('127.0.0.1');\n\nLocal address to bind to.\n</code></pre>\n\n<p>what is the use cases of using local_address method isn't this let you write shortcuts like this :</p>\n\n<pre><code>my $res = $ua-&gt;get('\\index.html')-&gt;result;\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>my $res = $ua-&gt;get('127.0.0.1:80\\index.html')-&gt;result;\n</code></pre>\n\n<p>or I am totally wrong and this method used on different use cases?</p>\n"}, {"tags": ["perl", "polygon", "cpan"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1561758438, "post_id": 56813227, "comment_id": 100181115, "body": "Are you using <code>use strict; use warnings;</code>? If not, you should."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 9965023, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215903089791205/picture?type=large", "display_name": "Michelle Bradley", "link": "https://stackoverflow.com/users/9965023/michelle-bradley"}, "edited": false, "score": 0, "creation_date": 1561759436, "post_id": 56813425, "comment_id": 100181335, "body": "Changing to  <code>my $bound = Math::Polygon-&gt;new(points =&gt; \\@poly);</code> ...appears to have worked.  Thanks  If I add the backslash to @this_loc, I get: Use of uninitialized value $y in numeric eq (==) at /usr/local/share/perl/5.18.2/Math/Polygon/Calc.pm line 286. Use of uninitialized value $y in numeric le (&lt;=) at /usr/local/share/perl/5.18.2/Math/Polygon/Calc.pm line 294. plus others for gt (&gt;) and gt(&gt;) also at line 294."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 19, "user_id": 9965023, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215903089791205/picture?type=large", "display_name": "Michelle Bradley", "link": "https://stackoverflow.com/users/9965023/michelle-bradley"}, "edited": false, "score": 0, "creation_date": 1561759516, "post_id": 56813425, "comment_id": 100181350, "body": "@MichelleBradley Great! Have you defined <code>$lat2</code> and <code>$lon2</code>?"}, {"owner": {"reputation": 19, "user_id": 9965023, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215903089791205/picture?type=large", "display_name": "Michelle Bradley", "link": "https://stackoverflow.com/users/9965023/michelle-bradley"}, "edited": false, "score": 0, "creation_date": 1561853248, "post_id": 56813425, "comment_id": 100196062, "body": "Yes, those were defined elsewhere.  This was just the relevant snippet of code."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 19, "user_id": 9965023, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215903089791205/picture?type=large", "display_name": "Michelle Bradley", "link": "https://stackoverflow.com/users/9965023/michelle-bradley"}, "edited": false, "score": 0, "creation_date": 1561881240, "post_id": 56813425, "comment_id": 100199205, "body": "Can you check again the <code>$lon2</code> is defined? You could also send me the code you are working on, and I will have a look at it (my email is in my profile)."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1561758043, "creation_date": 1561758043, "answer_id": 56813425, "question_id": 56813227, "link": "https://stackoverflow.com/questions/56813227/using-mathpolygon-to-determine-if-point-is-inside-a-polygon-not-working/56813425#56813425", "title": "Using Math::Polygon to determine if point is inside a polygon. Not working", "body": "<p>There seems to be (at least) two errors:</p>\n\n<pre><code>my $bound = Math::Polygon-&gt;new(points =&gt; @poly);\n</code></pre>\n\n<p>the constructor takes a reference to an array, not an array. So it should be:</p>\n\n<pre><code>my $bound = Math::Polygon-&gt;new(points =&gt; \\@poly);\n</code></pre>\n\n<p>Second, <code>$bound-&gt;contains( )</code> takes a reference to a point array, so it should be:</p>\n\n<pre><code>if($bound-&gt;contains( \\@this_loc )) { ... }\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 9965023, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215903089791205/picture?type=large", "display_name": "Michelle Bradley", "link": "https://stackoverflow.com/users/9965023/michelle-bradley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561758043, "creation_date": 1561756378, "question_id": 56813227, "link": "https://stackoverflow.com/questions/56813227/using-mathpolygon-to-determine-if-point-is-inside-a-polygon-not-working", "title": "Using Math::Polygon to determine if point is inside a polygon. Not working", "body": "<p>I am trying to determine if a certain point is inside of a polygon.  Trying to use Math::Polygon.  I have the boundary of the polygon in a mySQL table as one record per point for the polygon:\nexample:<br>\n1,38.33208,-75.51919<br> \n2,38.33286,-75.52265<br>\netc.<br>\n38,38.33208,-75.51919</p>\n\n<p>No matter what I do, the routine will not show the point inside the polygon despite the fact that the point would be truly inside the polygon.  </p>\n\n<p>Here's the relevant code</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use Math::Polygon;\n\nmy @poly = ();\n$sqlc = \"SELECT segment,lat,lon FROM boundary WHERE xxxxxxx \";\nmy $stcc = $dbh-&gt;prepare(qq{$sqlc});\n$stcc-&gt;execute();\nwhile(($seg,$slat,$slon) = $stcc-&gt;fetchrow_array())\n{\n    $poly[$seg] = ([$slat,$slon]);\n}\nmy $bound = Math::Polygon-&gt;new(points =&gt; @poly);\nmy @this_loc = ([$lat2,$lon2]);\n\nif($bound-&gt;contains( $this_loc ))\n{\n    # never reaches this point. \n}\n</code></pre>\n\n<p>No matter what, I can't get the ->contains() routine to ever return true.</p>\n\n<p>Any thoughts would be appreciated.  Thanks.</p>\n"}, {"tags": ["linux", "perl", "package", "conda", "conda-build"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1561743061, "post_id": 56808969, "comment_id": 100176359, "body": "Does your module not work with Perl 5.26? If so, why do your requirements say <code>&gt;=5.18.2</code> instead of just <code>5.18.2</code> or <code>5.18.*</code>?"}, {"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1561744304, "post_id": 56808969, "comment_id": 100176816, "body": "The module is not supported yet for Perl 5.26.2. If I only <code>perl 5.18.2</code> or <code>perl 5.18.*</code> I got this error message when trying to build the package : <code>conda_build.exceptions.DependencyNeedsBuildingError: Unsatisfiable dependencies for platform linux-64: set([&#39;perl=5.18.2&#39;]) </code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1561744559, "post_id": 56808969, "comment_id": 100176911, "body": "I don&#39;t know where conda is pulling packages from. Maybe they don&#39;t have a package for perl 5.18.2?"}, {"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1561744681, "post_id": 56808969, "comment_id": 100176960, "body": "Well the Perl I am using outside conda is under <code>usr&#47;bin&#47;perl</code> and it&#39;s the good version. I haven&#39;t found a way to linked locally my Perl inside the meta.yaml file. Could it be possible ? --- I have another option in mind which would be to download the Perl 5.18.2 package and put it in my local channel and precise in the meta.yaml to use this package as Perl but if it&#39;s possible I don&#39;t really know what could be the steps to follow."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1561744738, "post_id": 56808969, "comment_id": 100176985, "body": "No idea; I hadn&#39;t even heard of conda before this question. :-)"}], "answers": [{"tags": [], "owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "is_accepted": true, "score": 1, "last_activity_date": 1562163966, "last_edit_date": 1562163966, "creation_date": 1562163431, "answer_id": 56872140, "question_id": 56808969, "link": "https://stackoverflow.com/questions/56808969/how-to-precise-the-perl-version-when-creating-a-package-using-conda-build/56872140#56872140", "title": "How to precise the Perl version when creating a package using conda-build", "body": "<p>I have found a solution to my issue. I'm not sure it's the right way to do though.</p>\n\n<p>I download the conda package for Perl 5.18.2 here : <a href=\"https://anaconda.org/Nersc/perl/files\" rel=\"nofollow noreferrer\">https://anaconda.org/Nersc/perl/files</a></p>\n\n<p>I also indicate in the meta.yaml in the requirements field :</p>\n\n<pre><code>requirements:\n  run:\n    perl x.x\n</code></pre>\n\n<p>I put the package in my custom channel. Then I create the package using <code>conda-build &lt;path_to_Perl_module&gt;/recipe/ --perl=5.18.2</code>. When I install the package using <code>conda instal &lt;perl_module&gt;</code> I get this output :</p>\n\n<pre><code>The following packages will be downloaded:\n\n    package                    |            build\n    ---------------------------|-----------------\n    perl-5.18.2                |                3        14.2 MB  file:///home/usr/BSP-channel\n    pmp-0.8.2_BSP              |                0           5 KB  file:///home/usr/BSP-channel\n    ------------------------------------------------------------\n                                           Total:        14.2 MB\n\nThe following NEW packages will be INSTALLED:\n\n  perl               BSP-channel/linux-64::perl-5.18.2-3\n  pmp                BSP-channel/linux-64::pmp-0.8.2_BSP-0\n</code></pre>\n\n<p>If I create the module without indicating <code>--perl=5.18.2</code> we then look for the newest Perl version available in conda-forge.</p>\n\n<p>I hope it will help you if you are stuck with the same issue.</p>\n"}], "owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 1, "accepted_answer_id": 56872140, "answer_count": 1, "score": 2, "last_activity_date": 1562163966, "creation_date": 1561733171, "last_edit_date": 1561747255, "question_id": 56808969, "link": "https://stackoverflow.com/questions/56808969/how-to-precise-the-perl-version-when-creating-a-package-using-conda-build", "title": "How to precise the Perl version when creating a package using conda-build", "body": "<p>I am trying to create a package for a Perl module I have and then put it in a local channel to be able to install it in a conda environement. I am trying to follow the conda documentation but as it's the first time I'm trying to do that, I kind of lost myself.</p>\n\n<p>Doc to create a conda package from scratch : <a href=\"https://docs.conda.io/projects/conda-build/en/latest/user-guide/tutorials/build-pkgs.html\" rel=\"nofollow noreferrer\">https://docs.conda.io/projects/conda-build/en/latest/user-guide/tutorials/build-pkgs.html</a></p>\n\n<p>Doc to understand the metadata of a meta.yaml file : <a href=\"https://docs.conda.io/projects/conda-build/en/latest/resources/define-metadata.html#build-section\" rel=\"nofollow noreferrer\">https://docs.conda.io/projects/conda-build/en/latest/resources/define-metadata.html#build-section</a></p>\n\n<p>Doc to conda-build : <a href=\"https://conda.io/projects/conda-build/en/latest/resources/commands/conda-build.html\" rel=\"nofollow noreferrer\">https://conda.io/projects/conda-build/en/latest/resources/commands/conda-build.html</a></p>\n\n<p>So first I created a recipe with a meta.yaml file and a build.sh file. The version of Perl included in my conda is 5.26.2. However the Perl module has been written with Perl 5.18.2. I can't find a way to modify the version of Perl... </p>\n\n<p>I tried to :</p>\n\n<pre><code>$ conda-build &lt;path_to_perl_module&gt;/recipe --perl=5.18.2\n</code></pre>\n\n<p>I also tried to put in the meta.yaml file some specifications for Perl in the requirements section.</p>\n\n<pre><code>requirements:\n  host:\n    perl &gt;=5.18.2\n</code></pre>\n\n<p>But in both cases (I also tried to change the run/build section of the requirements with the same result) when I install the package in a conda environment, the console prompt :</p>\n\n<pre><code>The following packages will be downloaded:\n\n    package                    |            build\n    ---------------------------|-----------------\n    pmp-0.8.2_BSP              |                0           5 KB  file:///home/usr/BSP-channel\n    ------------------------------------------------------------\n                                           Total:           5 KB\n\nThe following NEW packages will be INSTALLED:\n\n  libgcc-ng          pkgs/main/linux-64::libgcc-ng-9.1.0-hdf63c60_0\n  perl               conda-forge/linux-64::perl-5.26.2-h516909a_1006\n  pmp                BSP-channel/linux-64::pmp-0.8.2_BSP-0\n</code></pre>\n\n<p>As you can see, the package manager wants to install Perl 5.26.2. I guess I don't do it the right way but the documentation doesn't really help me or I haven't found the corresponding part.</p>\n\n<p>Any leads would be greatly appreciate.</p>\n\n<p>Have a good day/night !</p>\n\n<p><strong>edit :</strong>\nWhat Could I do ?</p>\n\n<ol>\n<li><p>Use my local Perl located in usr/bin/Perl ?</p></li>\n<li><p>Download the Perl 5.18.2 package from : <a href=\"https://www.cpan.org/src/README.html\" rel=\"nofollow noreferrer\">https://www.cpan.org/src/README.html</a> and linked it somehow inside the meta.yaml file ?</p></li>\n</ol>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 1, "last_activity_date": 1561732901, "creation_date": 1561732901, "answer_id": 56808913, "question_id": 56808814, "link": "https://stackoverflow.com/questions/56808814/convert-comma-separated-values-to-key-value-pair-perl/56808913#56808913", "title": "Convert comma separated values to key value pair Perl", "body": "<p>Unless you need to keep this hash around for later use I think that simply looping through the elements two at a time would be simpler. You can accomplish this type of looping easily with <a href=\"https://perldoc.perl.org/functions/splice.html\" rel=\"nofollow noreferrer\"><code>splice</code></a>:</p>\n\n<pre><code>my @states = ('AL','Alabama','AK','Alaska','AR','Arkansas'...);\nwhile (my ($code, $name) = splice(@states, 0, 2)) {\n   # operations here\n}\n</code></pre>\n\n<p>Alternatively, you can use this same approach to create the data structure you want: </p>\n\n<pre><code>my @states = ('AL','Alabama','AK','Alaska','AR','Arkansas'...);\nmy @state_hashes = ();\nwhile (my ($code, $name) = splice(@states, 0, 2)) {\n   push @state_hashes, { $code =&gt; $name };\n}\n# do w/e you want with @state_hashes\n</code></pre>\n\n<p>Note: splice will remove elements from <code>@states</code></p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561755629, "post_id": 56808937, "comment_id": 100180510, "body": "Or <code>use List::Util 1.29 qw( pairmap ); @state_hashes = pairmap { +{ $a =&gt; $b } } @states;</code>. You can still import when specifying a version."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561756149, "post_id": 56808937, "comment_id": 100180637, "body": "@ikegami I&#39;m not a big fan of importing"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561756577, "post_id": 56808937, "comment_id": 100180736, "body": "Fair enough, but others are. (I like to import, but I like to list exactly what I import rather than importing the defaults like you did)"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 2, "last_activity_date": 1561733007, "creation_date": 1561733007, "answer_id": 56808937, "question_id": 56808814, "link": "https://stackoverflow.com/questions/56808814/convert-comma-separated-values-to-key-value-pair-perl/56808937#56808937", "title": "Convert comma separated values to key value pair Perl", "body": "<pre><code>use List::Util 1.29;\n@state_hashes = List::Util::pairmap { +{ $a =&gt; $b } } @states;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1561743077, "last_edit_date": 1561743077, "creation_date": 1561734908, "answer_id": 56809379, "question_id": 56808814, "link": "https://stackoverflow.com/questions/56808814/convert-comma-separated-values-to-key-value-pair-perl/56809379#56809379", "title": "Convert comma separated values to key value pair Perl", "body": "<p><a href=\"https://metacpan.org/pod/List::UtilsBy#bundle_by\" rel=\"nofollow noreferrer\">bundle_by from List::UtilsBy</a> can easily create this format:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse List::UtilsBy 'bundle_by';\nmy @states = ('AL', 'Alabama', 'AK', 'Alaska', 'AR', 'Arkansas', ... );\nmy @hashes = bundle_by { +{@_} } 2, @states;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "is_accepted": false, "score": 0, "last_activity_date": 1561744309, "creation_date": 1561744309, "answer_id": 56811301, "question_id": 56808814, "link": "https://stackoverflow.com/questions/56808814/convert-comma-separated-values-to-key-value-pair-perl/56811301#56811301", "title": "Convert comma separated values to key value pair Perl", "body": "<p><code>map</code> solution with a few perlish things</p>\n\n<pre><code>my @states = ('AL','Alabama','AK','Alaska','AR','Arkansas','VT','Vermont');\n\nmy %states;\nmap { $states{$states[$_]} = $states[$_+1] unless $_%2 } 0..$#states;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9013, "user_id": 230214, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d0f3ba56744ffc3654bbcf8f96f34626?s=128&d=identicon&r=PG", "display_name": "bessarabov", "link": "https://stackoverflow.com/users/230214/bessarabov"}, "edited": false, "score": 0, "creation_date": 1561929216, "post_id": 56813218, "comment_id": 100208693, "body": "Why do you use version in <code>use List::Util 1.29 qw( pairmap );</code>? Without version <code>use List::Util qw( pairmap );</code> on List::Util before 1.29 the code with fail <code>&quot;pairmap&quot; is not exported by the List::Util module</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 9013, "user_id": 230214, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d0f3ba56744ffc3654bbcf8f96f34626?s=128&d=identicon&r=PG", "display_name": "bessarabov", "link": "https://stackoverflow.com/users/230214/bessarabov"}, "edited": false, "score": 0, "creation_date": 1561940308, "post_id": 56813218, "comment_id": 100210225, "body": "1) The error message is better because it says how to fix the problem. 2) I don&#39;t actually put the version in the <code>use</code> statement; I place it in Makefile.PL/Build.PL. This communicates to the reader what version to place in Makefile.PL/Build.PL."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1561757119, "last_edit_date": 1561757119, "creation_date": 1561756255, "answer_id": 56813218, "question_id": 56808814, "link": "https://stackoverflow.com/questions/56808814/convert-comma-separated-values-to-key-value-pair-perl/56813218#56813218", "title": "Convert comma separated values to key value pair Perl", "body": "<p>Wouldn't the following make more sense for HTML::Template?</p>\n\n<pre><code>states =&gt; [ { id =&gt; 'AL', name =&gt; 'Alabama' }, ... ]\n</code></pre>\n\n<p>This would allow you to use the following template:</p>\n\n<pre><code>&lt;TMPL_LOOP NAME=states&gt;\n   &lt;TMPL_VAR NAME=name&gt; (&lt;TMPL_VAR NAME=id&gt;)\n&lt;/TMPL_LOOP&gt;\n</code></pre>\n\n<p>To achieve that, you can use the following:</p>\n\n<pre><code>use List::Util 1.29 qw( pairmap );\n\nstates =&gt; [ pairmap { +{ id =&gt; $a, name =&gt; $b } } @states ]\n</code></pre>\n\n<p>That said, you're probably generating HTML.</p>\n\n<pre><code>&lt;select name=\"state\"&gt;\n   &lt;TMPL_LOOP NAME=states&gt;\n      &lt;option value=\"&lt;TMPL_VAR NAME=id_html&gt;\"&gt;&lt;TMPL_VAR NAME=name_html&gt;&lt;/option&gt;\n   &lt;/TMPL_LOOP&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>To achieve that, you can use the following:</p>\n\n<pre><code>use List::Util 1.29 qw( pairmap );\n\n{\n   my %escapes = (\n      '&amp;' =&gt; '&amp;amp;',\n      '&lt;' =&gt; '&amp;lt;',\n      '&gt;' =&gt; '&amp;gt;',\n      '\"' =&gt; '&amp;quot;',\n      \"'\" =&gt; '&amp;#39;',\n   );\n\n   sub text_to_html(_) { $_[0] =~ s/([&amp;&lt;&gt;\"'])/$escapes{$1}/rg }\n}\n\nstates =&gt; [ pairmap { +{ id_html =&gt; $a, name_html =&gt; $b } } map text_to_html, @states ]\n</code></pre>\n"}], "owner": {"reputation": 138, "user_id": 10013290, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OJdm_xmOTQ4/AAAAAAAAAAI/AAAAAAAAAb8/CfK9VdvijTs/photo.jpg?sz=128", "display_name": "Austin Burke", "link": "https://stackoverflow.com/users/10013290/austin-burke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 56813218, "answer_count": 5, "score": 0, "last_activity_date": 1561757119, "creation_date": 1561732470, "last_edit_date": 1561754698, "question_id": 56808814, "link": "https://stackoverflow.com/questions/56808814/convert-comma-separated-values-to-key-value-pair-perl", "title": "Convert comma separated values to key value pair Perl", "body": "<p>I have an array of states in the format </p>\n\n<pre><code>('AL','Alabama','AK','Alaska','AR','Arkansas'...)\n</code></pre>\n\n<p>which I want formatted like:</p>\n\n<pre><code>[{'AL' =&gt; 'Alabama'},...]\n</code></pre>\n\n<p>This is primarily so that I can more easily loop through using the HTML::Template module (<a href=\"https://metacpan.org/pod/HTML::Template#TMPL_LOOP\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/HTML::Template#TMPL_LOOP</a>)</p>\n\n<p>I'm fairly new to perl, so unsure about how to do this sort of action and can't find something similar enough.</p>\n"}, {"tags": ["perl", "dll"], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1561731865, "post_id": 56808632, "comment_id": 100171476, "body": "It would probably be best to delete/move the whole `C:\\PerlLib` and reinstall everything that was there."}, {"owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1561733315, "post_id": 56808632, "comment_id": 100172204, "body": "@choroba I&#39;m very happy to know where the problem is located. I reinstalled first Date::Calc but still it did not work. Also I tried to install Date::Calc::XS (Using <code>perl -MCPAN -e shell</code>). It still gives the same errors. Which other package could be involved? @Grinnz: I&#39;m not so confident in Perl to remove the whole library. One question: Can I just install the packages or should I remove first the old packages?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1561733696, "post_id": 56808632, "comment_id": 100172414, "body": "Just rename it to PerlLib.backup, install the modules, run the tests. You can always rename it back to return to the (non working) old version."}, {"owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "edited": false, "score": 0, "creation_date": 1561748377, "post_id": 56808632, "comment_id": 100178246, "body": "@choroba Thanks, good idea and it works. The only thing is that it is not so clear what was the package name. In R, for example, package name is the name as the folder, in Perl it is not so clear."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561755419, "post_id": 56808632, "comment_id": 100180451, "body": "In Perl, <code>package Foo::Bar;</code> loads <code>Foo&#47;Bar.pm</code>. The directories in which Perl looks are given by <code>perl -le&#39;print for @INC;&#39;</code>"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1561731619, "creation_date": 1561731619, "answer_id": 56808632, "question_id": 56808134, "link": "https://stackoverflow.com/questions/56808134/perl-cant-load-xs-xs-dll-and-perl528-dll-is-missing/56808632#56808632", "title": "Perl Can&#39;t load XS.xs.dll and perl528.dll is missing", "body": "<p><a href=\"http://p3rl.org/Date::Calc\" rel=\"nofollow noreferrer\">Date::Calc</a> has an XS component <a href=\"http://p3rl.org/Date::Calc::XS\" rel=\"nofollow noreferrer\">Date::Calc::XS</a>, i.e. it needs to compile some C code. When you upgrade Perl, you need to recompile all the XS modules so they work with the new Perl version. The installed package is linked against a library that doesn't exist anymore (which is what the System Error window tells you).</p>\n\n<p>Reinstalling Date::Calc should fix the issue, but make sure all other XS modules are updated, too.</p>\n"}], "owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 56808632, "answer_count": 1, "score": 0, "last_activity_date": 1561731712, "creation_date": 1561729547, "last_edit_date": 1561731712, "question_id": 56808134, "link": "https://stackoverflow.com/questions/56808134/perl-cant-load-xs-xs-dll-and-perl528-dll-is-missing", "title": "Perl Can&#39;t load XS.xs.dll and perl528.dll is missing", "body": "<p>When I run the following command</p>\n\n<pre><code>D:\\05_project&gt;perl xml_export.pl  xml_20190626.xml\n</code></pre>\n\n<p>it produces xml-files from a MariaDB. It works very well the last 6 month. I used Perl version <strong>5.28</strong> on Windows 7/64bit. </p>\n\n<p>Last week I removed Perl 5.28 and installed Perl <strong>5.30</strong>. Many Perl-scripts works without causing problems but the <code>xml_export.pl</code> breaks after starting. The first what happenend is to give a system error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/mDGH2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mDGH2.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then the following message was put on the terminal:</p>\n\n<pre><code>Can't load 'C:\\PerlLib\\lib\\perl5/MSWin32-x64-multi-thread/auto/Date/Calc/XS/XS.xs.dll' \nfor module Date::Calc::XS: load_file:\nThe specified module could not befound at \nC:/Program2/Strawberry/perl/lib/DynaLoader.pm line 193.\n       at C:\\PerlLib\\lib\\perl5/Date/Calc.pm line 26.\n\nCompilation failed in require at C:\\PerlLib\\lib\\perl5/Date/Calc.pm line 26.\nBEGIN failed--compilation aborted at C:\\PerlLib\\lib\\perl5/Date/Calc.pm line 43.\nCompilation failed in require at xml_export.pl line 67.\nBEGIN failed--compilation aborted at xml_export.pl line 67.\n</code></pre>\n\n<p>I'm wondering what happened and how can I solve this problem. The package Date::Calc is installed. Perl is installed in drive C and I run perl scripts from drive c and d. As mentioned, I had no problem until I installed the new version of Perl. I reinstalled Perl 5.30 but the problem persists. Any idea?</p>\n\n<p><strong>Update 1:</strong></p>\n\n<p>If I comment out the package <code>Date::Calc</code> in <code>xml_export.pl</code></p>\n\n<pre><code># -- date computations                   # line 66 \n# use Date::Calc qw(:all);               # line 67 \n</code></pre>\n\n<p>The script works now. So, the question remains why it does not work when adding this package and why this strange system error (missing perl528.dll) is shown.</p>\n"}, {"tags": ["html", "regex", "xml", "perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1561674335, "post_id": 56799085, "comment_id": 100152835, "body": "Try <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"nofollow noreferrer\">Mojo::DOM</a>. It uses CSS rules to traverse HTML."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1561675055, "post_id": 56799085, "comment_id": 100153015, "body": "Do you have entities <code>&amp;lt;value&amp;gt;</code> (shown in code) or <code>&lt;value&gt;</code> (referred to in text) ?"}, {"owner": {"reputation": 49, "user_id": 5862301, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206500623540522/picture?type=large", "display_name": "Jose CastilLo Stronghold", "link": "https://stackoverflow.com/users/5862301/jose-castillo-stronghold"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1561676429, "post_id": 56799085, "comment_id": 100153279, "body": "@zdim i have <code>&amp;lt;value&amp;gt;</code> in the original response. Using decode_entities it transforms into &lt;value&gt;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561676614, "post_id": 56799085, "comment_id": 100153314, "body": "I haven&#39;t swallowed the Mojo pill yet --which is to I haven&#39;t even looked at it yet-- and I&#39;m a bigger fan of XPath selectors than CSS selectors, but I&#39;d definitely start with Mojo::DOM. The only other lax parser I know is HTML::Parser, and it&#39;s dated."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561676732, "post_id": 56799085, "comment_id": 100153342, "body": "(Of course, I assume you meant <code>XML::LibXML-&gt;new-&gt;parse_html_string</code> failed to handle it)"}, {"owner": {"reputation": 49, "user_id": 5862301, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206500623540522/picture?type=large", "display_name": "Jose CastilLo Stronghold", "link": "https://stackoverflow.com/users/5862301/jose-castillo-stronghold"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561677395, "post_id": 56799085, "comment_id": 100153478, "body": "@Ikegami both XML and HTML parsers give error for the tags: <code>HTML parser error : Tag value invalid</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561679313, "post_id": 56799085, "comment_id": 100153805, "body": "Well, what you posted doesn&#39;t result in those error --it results in <code>HTML parser error : Unexpected end tag : p</code> because a PRE element can&#39;t be inside of a P element-- but I suppose what you posted is not exactly representative."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1561681375, "post_id": 56799519, "comment_id": 100154094, "body": "<code>my $xml = Mojo::DOM-&gt;new($html)-&gt;at(&#39;pre&#39;)-&gt;text</code> should be sufficient (and include decoding entities), if there are other <code>&lt;pre&gt;</code> tags the CSS selector will need to be more specific."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1561743447, "post_id": 56799519, "comment_id": 100176479, "body": "An example of using Mojo::DOM to parse the XML (if you do this, it would be better to leave it decoded from the extraction): <code>for my $key_node (Mojo::DOM-&gt;new-&gt;xml(1)-&gt;parse($xml)-&gt;find(&#39;localconfig &gt; key&#39;)-&gt;each) { my $key = $key_node-&gt;{name}; my $val = $key_node-&gt;children(&#39;value&#39;)-&gt;first-&gt;text; ... }</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1561755506, "last_edit_date": 1561755506, "creation_date": 1561678944, "answer_id": 56799519, "question_id": 56799085, "link": "https://stackoverflow.com/questions/56799085/extract-text-from-html-xml-tags-in-perl/56799519#56799519", "title": "Extract text from HTMl/XML tags in Perl", "body": "<p>Once you've extracted the embedded XML document, you should use a proper XML parser.</p>\n\n<pre><code>use XML::LibXML qw( );\n\nmy $xml_doc = XML::LibXML-&gt;new-&gt;parse_string($xml);\n\nfor my $key_node ($xml_doc-&gt;findnodes(\"/localconfig/key\")) {\n   my $key = $key_node-&gt;getAttribute(\"name\");\n   my $val = $key_node-&gt;findvalue(\"value/text()\");\n   say \"$key: $val\";\n}\n</code></pre>\n\n<hr>\n\n<p>So that leaves us with the question how to extract the XML document.</p>\n\n<p><strong>Option 1: XML::LibXML</strong></p>\n\n<p>You could use XML::LibXML and simply tell it to ignore the error (the spurious <code>&lt;/p&gt;</code> tag).</p>\n\n<pre><code>my $html_doc = XML::LibXML-&gt;new( recover =&gt; 2 )-&gt;parse_html_fh($html);\nmy $xml = encode_utf8( $html_doc-&gt;findvalue('/html/body/pre/text()') =~ s/^[^&lt;]*//r );\n</code></pre>\n\n<p><strong>Option 2: Regex Match</strong></p>\n\n<p>You could probably get away with using a regex pattern match.</p>\n\n<pre><code>use HTML::Entities qw( decode_entities );\n\nmy $xml = decode_entities( ( $html =~ m{&lt;pre&gt;[^&amp;]*(.*?)&lt;/pre&gt;}s )[0] );\n</code></pre>\n\n<p><strong>Option 3: Mojo::DOM</strong></p>\n\n<p>You could use Mojo::DOM to extract the embedded XML document.</p>\n\n<pre><code>use Encode    qw( decode encode_utf8 );\nuse Mojo::DOM qw( );\n\nmy $decoded_html = decode($encoding, $html);\nmy $html_doc = Mojo::DOM-&gt;new($decoded_html);    \nmy $xml = encode_utf8( $html_doc-&gt;at('html &gt; body &gt; pre')-&gt;text =~ s/^[^&lt;]*//r );\n</code></pre>\n\n<p>The problem with Mojo::DOM is that you need to know the encoding of the document before you pass the document to the parser (because you must pass it decoded), but you need to parse the document in order to extract the encoding of the document form the document.</p>\n\n<p>(Of course, you could use Mojo::DOM to parse the XML too.)</p>\n\n<hr>\n\n<p>Note that the HTML fragment <code>&lt;p&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/p&gt;</code> means <code>&lt;p&gt;&lt;/p&gt;&lt;pre&gt;&lt;/pre&gt;</code>, and both XML::LibXML and Mojo::DOM handle this correctly.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561698138, "post_id": 56800341, "comment_id": 100156641, "body": "Your approach of decoding entities <i>before</i> parsing (not to mention mixing XML and HTML together) will break things! You should do it in two steps as shown earlier."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561699400, "post_id": 56800341, "comment_id": 100156964, "body": "@ikegami (1) Yeah, I am aware of problems and I warn. But this does give <i>some</i> handle on the (mixed!) data, which is the thorny part -- so I offer it, considering it still useful  (2) With entities decoded one gets good tags; how is that going to break things? (3) <i>All this is for (something like) this example</i>  (4) Altogether, there are problems with this but it gives them something to work with.  (That &quot;<i>Once you&#39;ve extracted</i>&quot; is the &quot;devil in the details,&quot; as there is no cleanly &quot;<i>embedded XML</i>&quot;.  The Mojo approach would also require one to hack at it by hand first)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561699770, "post_id": 56800341, "comment_id": 100157057, "body": "@ikegami &quot;<i>not to mention mixing XML and HTML together</i>&quot;  --- that is precisely why I posted this. That&#39;s the hard part, that it&#39;s <i>mixed</i>, practically randomly.  There&#39;s a price to pay, and the other option is regex (together with some other approach, like what you show).  I&#39;ll edit and make warnings more dire, and will show a sample of <code>Marpa</code> ... but I am afraid that there is no clean way, in general, to parse a document that uses arbitrary (XML-like) tags within HTML."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1561707484, "post_id": 56800341, "comment_id": 100159924, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/195671/discussion-between-ikegami-and-zdim\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1563521927, "last_edit_date": 1563521927, "creation_date": 1561689867, "answer_id": 56800341, "question_id": 56799085, "link": "https://stackoverflow.com/questions/56799085/extract-text-from-html-xml-tags-in-perl/56800341#56800341", "title": "Extract text from HTMl/XML tags in Perl", "body": "<p>The hard part of this problem is that the presented document mixes formats -- it has a valid HTML structure, but also with XML-like elements which appear \"tossed-in\" without a particular pattern. There are ways to disentangle these parts, even as they aren't bulletproof and come with trade-offs.</p>\n\n<p>In this case <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a> can do the whole job, as it <em>can</em> deal with bad data, but note warnings.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Encode qw(encode_utf8); \nuse XML::LibXML;\n\nmy $html_doc = XML::LibXML-&gt;new(recover =&gt; 2)-&gt;parse_html_fh(\\*DATA);\nmy $xml = encode_utf8( \n    $doc-&gt;findvalue('/html/body/pre/text()') =~ s/^[^&lt;]*//r \n);\nmy $xml_doc = XML::LibXML-&gt;new-&gt;parse_string($xml);\n\nsay for $xml_doc-&gt;findnodes('//key');  # node object stringifies\n\n__DATA__\n&lt;html&gt;\n    &lt;head&gt; \n        &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"/&gt;\n        &lt;title&gt;Some tittle &amp;lt;localconfig&amp;gt;\n  &amp;lt;key name=\"ssl_default\"&amp;gt;\n    &amp;lt;value&amp;gt;sha256&amp;lt;/value&amp;gt;\n  &amp;lt;/key&amp;gt;\n\n&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;h2&gt;Some h2&lt;/h2&gt;\n        &lt;p&gt;some text:\n\n            &lt;pre&gt;    text &amp;lt;localconfig&amp;gt;\n  &amp;lt;key name=\"ssl_default\"&amp;gt;\n    &amp;lt;value&amp;gt;sha256&amp;lt;/value&amp;gt;\n  &amp;lt;/key&amp;gt;\n  &amp;lt;key name=\"some variable\"&amp;gt;\n    &amp;lt;value&amp;gt;1024&amp;lt;/value&amp;gt;\n  &amp;lt;/key&amp;gt;\n&amp;lt;/localconfig&amp;gt;\n&lt;/pre&gt;\n        &lt;/p&gt;\n        &lt;hr&gt;\n        &lt;i&gt;\n            &lt;small&gt;Some text&lt;/small&gt;\n        &lt;/i&gt;\n        &lt;hr/&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>The <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/Parser.pod#recover\" rel=\"nofollow noreferrer\">parser option <code>recover</code></a> is what allows the above parsing to go through</p>\n\n<blockquote>\n  <p>A true value turns on recovery mode which allows one to parse broken XML or HTML data.  [...]</p>\n</blockquote>\n\n<p>As useful as this can be, it of course begs for extreme caution as we are willfully using bad data (or, rather, non-conforming data here). This case brings two such issues.</p>\n\n<ul>\n<li><p>Regex is needed for entities. The example deals with those under <code>&lt;pre&gt;</code>, but there may be more. We need to inspect input and may need code changes for different data.</p></li>\n<li><p>This makes use of the observation that the XML-like \"tags\" are given by entities (<code>&amp;lt;</code> etc), which are left as they are during parsing and only decoded later. However ...</p></li>\n<li><p>... this isn't a rule and if some <em>aren't</em> given that way (but rather as <code>&lt;key&gt;</code>), then those can make the library parse the document into a (slightly) <strong>different tree</strong>. This again requires inspection of input, and possibly code adjustments for any new data. </p></li>\n</ul>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> for bringing up the point of first parsing the data and only then dealing with the entities, for a discussion, and for the XML-code above. The original version of the XML-related code above first decoded and so ended up with a slightly different tree.</p>\n\n<p>Also note that <code>HTML::TreeBuilder</code> does process this data with <a href=\"https://metacpan.org/pod/HTML::TreeBuilder#ignore_unknown\" rel=\"nofollow noreferrer\">ignore_unknown</a> set.  Then the problem  is that these new \"tags\" (<code>&lt;key&gt;</code> etc) are just data for it, so any practical use of the obtained tree would probably have to rely on regex.</p>\n\n<hr>\n\n<p>One other way to deal with this data is with the flexible, high-level HTML parser, <a href=\"https://metacpan.org/pod/release/JKEGL/Marpa-HTML-0.112000/lib/Marpa/HTML.pm\" rel=\"nofollow noreferrer\">Marpa::HTML</a>.  </p>\n\n<p>A <em>very</em> basic demo</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Marpa::HTML qw(html);\nuse HTML::Entities qw(decode_entities);    \n\nmy $input = do { local $/; &lt;DATA&gt; };    \nmy $html = decode_entities($input);\n\nmy (@attrs, @cont);\n\nmy $marpa_key = Marpa::HTML::html( \n    \\$html,\n    {\n        'key' =&gt; sub {\n            push @attrs, Marpa::HTML::attributes();\n            push @cont, Marpa::HTML::contents();\n        },\n    }\n);\n\nfor my $i (0..$#cont) {\n    say \"For attribute \\\"name=$attrs[$i]-&gt;{name}\\\" the &lt;key&gt; has: $cont[$i]\"\n}\n\n__DATA__\n...the same as in the first example, data from the question...\n</code></pre>\n\n<p>This collects <a href=\"https://metacpan.org/pod/release/JKEGL/Marpa-HTML-0.112000/lib/Marpa/HTML.pm#VIEWS\" rel=\"nofollow noreferrer\">views</a> as it parses, using API for <code>attributes</code> and <code>contents</code>, for element <code>&lt;key&gt;</code>. </p>\n\n<p>It may <em>in principle</em> be suitable for your problem since it accepts the mere semantics of <code>&lt;...&gt;</code> as an element. But those aren't treated as XML, what may be one downside if your data relies on XML more than shown. And, of course, this is a different approach with its own rules.</p>\n\n<p>Note that the basic logic and use of the module is that each coderef <em><code>returns</code></em>, and this return is used for the element that it fired on; the rest of text is unchanged. So this is natural for changing particular elements of a document. </p>\n\n<p>I've used it differently above, only to collect information about the \"tags.\"  That code prints </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>For attribute \"name=ssl_default\" the &lt;key&gt; has: \n    &lt;value&gt;sha256&lt;/value&gt;\n\nFor attribute \"name=some variable\" the &lt;key&gt; has: \n    &lt;value&gt;1024&lt;/value&gt;\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 5862301, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206500623540522/picture?type=large", "display_name": "Jose CastilLo Stronghold", "link": "https://stackoverflow.com/users/5862301/jose-castillo-stronghold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 989, "favorite_count": 1, "accepted_answer_id": 56799519, "answer_count": 2, "score": 2, "last_activity_date": 1563521927, "creation_date": 1561674228, "question_id": 56799085, "link": "https://stackoverflow.com/questions/56799085/extract-text-from-html-xml-tags-in-perl", "title": "Extract text from HTMl/XML tags in Perl", "body": "<p>I have a HTTPS response like this</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"/&gt;\n        &lt;title&gt;Some tittle &amp;lt;localconfig&amp;gt;\n  &amp;lt;key name=\"ssl_default\"&amp;gt;\n    &amp;lt;value&amp;gt;sha256&amp;lt;/value&amp;gt;\n  &amp;lt;/key&amp;gt;\n\n&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;h2&gt;Some h2&lt;/h2&gt;\n        &lt;p&gt;some text:\n\n            &lt;pre&gt;    text &amp;lt;localconfig&amp;gt;\n  &amp;lt;key name=\"ssl_default\"&amp;gt;\n    &amp;lt;value&amp;gt;sha256&amp;lt;/value&amp;gt;\n  &amp;lt;/key&amp;gt;\n  &amp;lt;key name=\"some variable\"&amp;gt;\n    &amp;lt;value&amp;gt;1024&amp;lt;/value&amp;gt;\n  &amp;lt;/key&amp;gt;\n&amp;lt;/localconfig&amp;gt;\n&lt;/pre&gt;\n        &lt;/p&gt;\n        &lt;hr&gt;\n        &lt;i&gt;\n            &lt;small&gt;Some text&lt;/small&gt;\n        &lt;/i&gt;\n        &lt;hr/&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<ul>\n<li>The key's name are statics, and i need to use a variable to grab specific values.</li>\n<li>I'm using <strong>decide_entities</strong> to parse the text to html</li>\n<li>Sometimes the key is posted twice in the response, but it's the same value.</li>\n</ul>\n\n<p><code>XML::LibXML</code> don't help much here since it's not a correct XML file/string.</p>\n\n<p>I tried to use Regex to get it like this</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub get_key {\n    my $start = '&lt;key name=\"'.$_[0].'\"&gt;\\n&lt;value&gt;';\n    print $_[1];\n    my $end = \"&lt;/value&gt;\";\n    print \" [*] Trying to get $_[0]\\n\";\n    print \"Start: $start  --- End $end\";\n    if($_[1] =~ /\\b$start\\b(.*?)\\b$end\\b/s){\n        my $result = $1;\n        print $result, \"\\n\\n\";\n        return $result;\n    }\n}\n\nget_key(\"string_to_search\", $string_from_response);\n</code></pre>\n\n<p>I need to extract the key between the key and value</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;key name=\"variable\"&gt;\n &lt;value&gt;Grab me&lt;/value&gt;\n&lt;/key&gt;\n</code></pre>\n"}, {"tags": ["perl", "hashmap", "accessor"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1561671414, "post_id": 56798557, "comment_id": 100152082, "body": "No, &quot;nothing&quot; has changed in the way <code>tie</code> works. The code in the linked answer still works. The error is in your modifications. Did you forget to load Tie::Hash early enough?"}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561672438, "post_id": 56798557, "comment_id": 100152371, "body": "Dang.  Without thinking, I changed the <code>require;push @ISA</code> to <code>use parent</code>.  Apparently they aren&#39;t as &quot;the same&quot; as I thought.  Thanks."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1561672516, "post_id": 56798557, "comment_id": 100152393, "body": "That will make Tie::Hash the parent, not Tie::StdHash"}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561672707, "post_id": 56798557, "comment_id": 100152444, "body": "Doh!  Well, that&#39;s just sloppy reading on my part."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1561671201, "post_id": 56798701, "comment_id": 100152012, "body": "This is much faster than using <code>tie</code> (since it doesn&#39;t involve calling a Perl sub, something rather slow, for each access of the hash)."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1561671589, "post_id": 56798701, "comment_id": 100152132, "body": "<a href=\"https://metacpan.org/pod/Variable::Magic\" rel=\"nofollow noreferrer\">Variable::Magic</a> would also probably be much faster than tie, even though it would still involve sub call overhead."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1561672621, "post_id": 56798701, "comment_id": 100152411, "body": "Thanks!  The Hash::Util does just what I need.  I must investigate Variable::Magic, &#39;cause, well, it&#39;s magic."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1561673727, "post_id": 56798701, "comment_id": 100152687, "body": "Just to be clear... Hash::Util does error out if you try to read a key that isn&#39;t supposed to be there.  Since I&#39;m using this for typo protection, that&#39;s perfect.  If it&#39;s a &quot;valid&quot; key that doesn&#39;t <code>exists</code>, I&#39;ll deal with that in the program."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1561673840, "post_id": 56798701, "comment_id": 100152707, "body": "lock_hash does, but lock_keys (which still allows existing values to be changed) does not."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 2, "last_activity_date": 1561671211, "last_edit_date": 1561671211, "creation_date": 1561671109, "answer_id": 56798701, "question_id": 56798557, "link": "https://stackoverflow.com/questions/56798557/how-can-i-force-and-error-on-an-undefined-hash-key/56798701#56798701", "title": "How can I force and error on an undefined hash key?", "body": "<p>For a <em>nonexistent</em> hash key, which is different from a hash key that exists but has an undefined value, you can use lock_hash from <a href=\"https://perldoc.pl/Hash::Util#Restricted-hashes\" rel=\"nofollow noreferrer\">Hash::Util</a>. Note that it also restricts any values from changing. Unfortunately lock_keys, which otherwise is closer to what you ask for, does not cause an error on accessing a nonexistent key unless you try to set it.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Hash::Util 'lock_hash';\nmy %foo = (a =&gt; 1, b =&gt; 2);\nlock_hash %foo;\nprint $foo{c}; # error\n</code></pre>\n\n<p>This is the same underlying mechanism used by <a href=\"https://metacpan.org/pod/Const::Fast\" rel=\"nofollow noreferrer\">Const::Fast</a> for read-only hashes, but it is a bit confusing as it tries to act both as read-only (existing values can't be changed) and restricted (nonexistent keys can't be accessed).</p>\n"}], "owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 56798701, "answer_count": 1, "score": 0, "last_activity_date": 1561750806, "creation_date": 1561670146, "last_edit_date": 1561750806, "question_id": 56798557, "link": "https://stackoverflow.com/questions/56798557/how-can-i-force-and-error-on-an-undefined-hash-key", "title": "How can I force and error on an undefined hash key?", "body": "<p>I'm trying to use the code from <a href=\"https://stackoverflow.com/q/3381159\">make perl shout when trying to access undefined hash key</a>, but it doesn't work.</p>\n\n<p>I assume something has changed in the way <code>tie</code> works in the past 10 years.</p>\n\n<p>The error I get is:</p>\n\n<pre><code>Safe::Hash must define either a TIEHASH() or a new() method at /home/bennett/work/stock/Indicator.pm line 97.\n</code></pre>\n\n<p>I only need this for about 5% of the hashes I use, and I'm hoping to use something that doesn't change the interface (i.e. <code>$foo{bar}</code>). That is, I'd prefer not to use <code>Moose</code> or something involving accessor methods.</p>\n\n<p>Here's why: I want to turn it on for debugging and development, and turn it off, otherwise. The program and computer are slow enough as it is.</p>\n\n<p>Any fixed up code (see the link above), or other solutions are welcome.</p>\n\n<p>This is Perl 5, version 16, Subversion 3 (v5.16.3) built for x86_64-Linux-thread-multi</p>\n"}, {"tags": ["perl", "error-handling", "syntax-error"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 1, "creation_date": 1561666738, "post_id": 56797943, "comment_id": 100150538, "body": "This seems like something you should handle at install instead of trying to enforce in the application-level."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1561671521, "post_id": 56797943, "comment_id": 100152112, "body": "<code>use Tk</code> is not a valid expression. You can&#39;t do <code>use Tk or ...;</code> or <code>( use Tk ) + 4</code>  any more than you can do <code>while (1) { } or ...;</code> or <code>( while(1) { } ) + 4</code>."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1561671635, "post_id": 56798052, "comment_id": 100152143, "body": "Note that your alternate doesn&#39;t import like the original. The equivalent would actually be: <code>BEGIN { unless (eval(&quot;use Tk; 1&quot;)) { ... } }</code>"}, {"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 0, "creation_date": 1561671740, "post_id": 56798052, "comment_id": 100152167, "body": "You might need to <code>Tk-&gt;import()</code> to emulate <code>use</code> behavior. <a href=\"https://perldoc.perl.org/5.30.0/functions/use.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/5.30.0/functions/use.html</a>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1561672792, "post_id": 56798052, "comment_id": 100152464, "body": "Updated. String eval is not needed here, but the import does often need to happen at compile time, like in a BEGIN."}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1561702099, "post_id": 56798052, "comment_id": 100157752, "body": "What&#39;s the purpose of the <code>unless</code>? Why can&#39;t you just <code>BEGIN { eval { require Tk; Tk-&gt;import }; die &quot;...&quot; if $@ }</code>? (these are not rhetorical questions; I&#39;m genuinely curious why you did that)."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1561728876, "post_id": 56798052, "comment_id": 100169888, "body": "@mosvy <a href=\"https://metacpan.org/pod/Try::Tiny#BACKGROUND\" rel=\"nofollow noreferrer\">metacpan.org/pod/Try::Tiny#BACKGROUND</a> explains several reasons why relying on the value of <code>$@</code> to detection an exception state should be avoided. The return value of <code>eval</code> is reliable: when an exception has occurred, it returns undefined (in scalar context), so as long as it returns a true value at the end, it can reliably make the distinction."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1561729029, "post_id": 56798052, "comment_id": 100169987, "body": "<code>eval { ...; 1 } or die $@</code> is another way you could construct this particular idiom."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 8, "last_activity_date": 1561672766, "last_edit_date": 1561672766, "creation_date": 1561667029, "answer_id": 56798052, "question_id": 56797943, "link": "https://stackoverflow.com/questions/56797943/die-function-produces-syntax-error-when-used-with-use-function/56798052#56798052", "title": "die function produces syntax error when used with use function", "body": "<p>The <a href=\"https://perldoc.pl/functions/use\" rel=\"nofollow noreferrer\">use</a> statement is special, it does not work like a function call. It executes at compile time unlike most statements, and parses the remainder of the statement with a unique syntax - namely that the module name must be a bareword, and following that can be an optional module version followed by the list of arguments.</p>\n\n<p>Just <code>use Tk;</code> will already throw an exception if Tk is not found, you don't need to do any checking of your own. If you want to customize the error message, you can load it in a runtime statement with <a href=\"https://perldoc.pl/functions/require\" rel=\"nofollow noreferrer\">require</a> and trap the exception, but you should really include the contents of <code>@INC</code> or the original error message which contains that, for debugging where the module should be found:</p>\n\n<pre><code>use strict;\nuse warnings;\nBEGIN {\n  unless (eval { require Tk; Tk-&gt;import; 1 }) {\n    die \"You don't have the Tk module installed: $@\";\n  }\n}\n</code></pre>\n\n<p>Dependencies for a CPAN distribution are specified in metadata and by the configure script for the distribution, this ensures they are installed when the user tries to install your distribution with a CPAN client. See <a href=\"http://blogs.perl.org/users/neilb/2017/05/specifying-dependencies-for-your-cpan-distribution.html\" rel=\"nofollow noreferrer\">http://blogs.perl.org/users/neilb/2017/05/specifying-dependencies-for-your-cpan-distribution.html</a>. For code distributed outside of CPAN, a <a href=\"https://metacpan.org/pod/cpanfile\" rel=\"nofollow noreferrer\">cpanfile</a> provides a format for specifying dependencies that can easily be installed by the user with <a href=\"https://metacpan.org/pod/cpanm\" rel=\"nofollow noreferrer\">cpanm</a>.</p>\n"}], "owner": {"reputation": 175, "user_id": 10902967, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QuFnwmt5b1Q/AAAAAAAAAAI/AAAAAAAAADA/6vpTCfPYN_M/photo.jpg?sz=128", "display_name": "Blue-Maned Hawk", "link": "https://stackoverflow.com/users/10902967/blue-maned-hawk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 56798052, "answer_count": 1, "score": 1, "last_activity_date": 1561672766, "creation_date": 1561666359, "question_id": 56797943, "link": "https://stackoverflow.com/questions/56797943/die-function-produces-syntax-error-when-used-with-use-function", "title": "die function produces syntax error when used with use function", "body": "<p>I'm trying to create a backup system in Perl.  Eventually, I want to share it with the world.  But I want to make sure that people have the correct modules installed, so I want to have some exception handling in case they don't have the correct modules.  Ironically, the die function produces a syntax error when I use it in the following situation:</p>\n\n<pre><code>use strict; use warnings;\n\nuse Tk or die \"You don't have the Tk module installed.\"\n</code></pre>\n\n<p>How can I adjust this to get the desired effect?</p>\n"}, {"tags": ["perl", "case-sensitive"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1561656738, "post_id": 56796059, "comment_id": 100146646, "body": "Due to OS constraints you may need to rename it once to something else, then rename it back to the correct name. <code>aAaa</code> and <code>aaaa</code> may be considered the same name and a rename operation ends up not doing anything. Try <code>aAaa</code> -&gt; <code>aAaa_</code> -&gt; <code>aaaa</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7875136"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1561657727, "post_id": 56796059, "comment_id": 100147114, "body": "Is there a way that I can do a case insensitive search?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1561657894, "post_id": 56796059, "comment_id": 100147185, "body": "Why not do a case sensitive string comparison before renaming to be sure? Not 100% sure what you&#39;re asking for here. Are you saying &quot;reject arguments where the case doesn&#39;t match the filename&quot; or &quot;reject input with upper case letters&quot;?"}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1561661311, "post_id": 56796059, "comment_id": 100148616, "body": "What OS are you using? And, more importantly, what filesystem?"}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 4, "last_activity_date": 1561668181, "creation_date": 1561668181, "answer_id": 56798233, "question_id": 56796059, "link": "https://stackoverflow.com/questions/56796059/how-do-i-do-a-case-sensitive-rename-or-move-operation-in-perl/56798233#56798233", "title": "How do I do a case sensitive rename or move operation in perl?", "body": "<blockquote>\n  <p>needs to be a case-sensitive rename</p>\n</blockquote>\n\n<p>There is no such thing.</p>\n\n<blockquote>\n  <p>So Demo is NOT the same as demo.</p>\n</blockquote>\n\n<p>That depends entirely on the file system you're using. On a case insensitive file system, such as the ones commonly used on Mac OS (APFS) and Windows (NTFS), <code>Demo</code> is in fact the same file as <code>demo</code>. On a case sensitive file system, <code>Demo</code> and <code>demo</code> are different.</p>\n\n<p>This is a property of the file system in question, not any particular operation (such as <code>rename</code>).</p>\n\n<p>If you want your program to produce an error if the passed in name is not in canonical form (i.e. does not match the displayed case of the filename) even on case insensitive filesystems, you have to get the canonical name yourself and compare them with <code>eq</code>. The details depend on your OS.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561674437, "post_id": 56798303, "comment_id": 100152867, "body": "Re &quot;<i>once you have a <code>File.txt</code>, you cannot rename it to <code>file.txt</code></i>&quot;, <a href=\"https://pastebin.com/9w8Tc2gd\" rel=\"nofollow noreferrer\">That&#39;s not true at all!!!</a> You can easily rename it in Explorer (&quot;My Computer&quot; and such) too."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561674634, "post_id": 56798303, "comment_id": 100152923, "body": "My experience was with git. I guess it does not apply to more normal circumstances."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1561674885, "post_id": 56798303, "comment_id": 100152978, "body": "1) I don&#39;t think there&#39;s any ports of <code>git</code> to Windows. There is <code>git</code> for MSYS (a unix emulation environment) and <code>git</code> for Cygwin (a unix emulation environment) and of course <code>git</code> for Linux run through WSL (a unix emulation), but none for Windows itself as far as I know. 2) <a href=\"https://pastebin.com/6CsGSeJL\" rel=\"nofollow noreferrer\"><code>git</code> for Cygwin has no problem changing the case of file names either</a>, and I&#39;d be extremely surprised if the other two do. Case-insensitive file systems are common, and not just on Windows machines."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561675255, "post_id": 56798303, "comment_id": 100153060, "body": "More importantly, your &quot;answer&quot; doesn&#39;t address the question (how rename a file if it&#39;s name matches the argument, but fail otherwise)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561675735, "post_id": 56798303, "comment_id": 100153155, "body": "There is most certainly the official git for Windows. <a href=\"https://git-scm.com/download/win\" rel=\"nofollow noreferrer\">git-scm.com/download/win</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561676065, "post_id": 56798303, "comment_id": 100153225, "body": "Despite what the page says, what you linked is git for MSYS. It is not a native port of git; it runs in a unix emulation environment. The point is that emulations can have all kinds of problems, so there could be problems with the emulation. But there isn&#39;t any with Cygwin, so I doubt there&#39;s one with MSYS. Feel free to prove me wrong. Just follow the same steps I took in &quot;git-bash&quot;."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "is_accepted": false, "score": 1, "last_activity_date": 1561668615, "creation_date": 1561668615, "answer_id": 56798303, "question_id": 56796059, "link": "https://stackoverflow.com/questions/56796059/how-do-i-do-a-case-sensitive-rename-or-move-operation-in-perl/56798303#56798303", "title": "How do I do a case sensitive rename or move operation in perl?", "body": "<p>The entire thing depends on OS. On Windows, it's quite weird. The case composition of the file names is preserved but it is ignored for the search purposes. That produces really strange results: once you have a <code>File.txt</code>, you cannot rename it to <code>file.txt</code> because for <code>file.txt</code> is already in the directory. But if you do <code>DIR</code>, it's still <code>File.txt</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7875136"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1561698849, "creation_date": 1561656617, "question_id": 56796059, "link": "https://stackoverflow.com/questions/56796059/how-do-i-do-a-case-sensitive-rename-or-move-operation-in-perl", "title": "How do I do a case sensitive rename or move operation in perl?", "body": "<p>I have a question about renaming a directory in perl (caveat: needs to be a case-sensitive rename).</p>\n\n<p>I have a directory named Demo.  I have a script that renames the directory, but I need it to be case sensitive.</p>\n\n<p>So Demo is NOT the same as demo.</p>\n\n<p>For example, I have a directory named Demo.  I want to rename this to be CLIENT1. My script is called <code>perlDirRename arg1 arg2</code>. I want the code to pass if I provide the arguments Demo CLIENT1, and throw an error if I provide the arguments demo CLIENT1</p>\n\n<p>So to recap:</p>\n\n<p><code>./perlDirRename Demo CLIENT1</code> (pass)</p>\n\n<p><code>./perlDirRename demo CLIENT1</code> (fail)</p>\n\n<p>Here is a code snippet:</p>\n\n<pre><code>my $from_dir = $ARGV[0];\nmy $to_dir = $ARGV[1];\n\nif ($from_dir eq $to_dir) {\n  print(\"Arguments cannot be equal!\\n\");\n  exit(1);\n}\n\n\nmove(\"$dirHome/$from_dir\", \"$dirHome/$to_dir\") or die \"Move failed: $!\";\n</code></pre>\n\n<p>How do I do a case sensitive rename or move operation in perl?</p>\n"}, {"tags": ["r", "shell", "perl", "transpose"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1561656300, "post_id": 56795938, "comment_id": 100146468, "body": "I fixed your formatting (and removed the arbitrary-seeming &quot;arrays&quot; tag).   Please check.  Can you show what you have tried in order to solve your problem?"}, {"owner": {"reputation": 3, "user_id": 1740833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/945bf56fcee04b3462494ecdf3ed362f?s=128&d=identicon&r=PG", "display_name": "user1740833", "link": "https://stackoverflow.com/users/1740833/user1740833"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1561656698, "post_id": 56795938, "comment_id": 100146624, "body": "Thanks for formatting the text."}, {"owner": {"reputation": 470, "user_id": 11460314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6acd5a9514a859bf89474e8ca9392b3?s=128&d=identicon&r=PG&f=1", "display_name": "yoga", "link": "https://stackoverflow.com/users/11460314/yoga"}, "edited": false, "score": 0, "creation_date": 1561656735, "post_id": 56795938, "comment_id": 100146643, "body": "what you are trying to achieve is called normalization. what tools/technology you are using to achive this?"}, {"owner": {"reputation": 3, "user_id": 1740833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/945bf56fcee04b3462494ecdf3ed362f?s=128&d=identicon&r=PG", "display_name": "user1740833", "link": "https://stackoverflow.com/users/1740833/user1740833"}, "edited": false, "score": 0, "creation_date": 1561657485, "post_id": 56795938, "comment_id": 100147016, "body": "I will be trying R or Perl script to achieve this."}, {"owner": {"reputation": 3, "user_id": 1740833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/945bf56fcee04b3462494ecdf3ed362f?s=128&d=identicon&r=PG", "display_name": "user1740833", "link": "https://stackoverflow.com/users/1740833/user1740833"}, "edited": false, "score": 0, "creation_date": 1561718145, "post_id": 56795938, "comment_id": 100164741, "body": "Great! That solved my problem in a test."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 1740833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/945bf56fcee04b3462494ecdf3ed362f?s=128&d=identicon&r=PG", "display_name": "user1740833", "link": "https://stackoverflow.com/users/1740833/user1740833"}, "edited": false, "score": 0, "creation_date": 1561719688, "post_id": 56798475, "comment_id": 100165418, "body": "This works as well. Thanks you very much."}], "tags": [], "owner": {"reputation": 2049, "user_id": 9993361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/022293c2a3c75a69d236a0a9d021e046?s=128&d=identicon&r=PG&f=1", "display_name": "eastclintw00d", "link": "https://stackoverflow.com/users/9993361/eastclintw00d"}, "is_accepted": true, "score": 0, "last_activity_date": 1561669635, "creation_date": 1561669635, "answer_id": 56798475, "question_id": 56795938, "link": "https://stackoverflow.com/questions/56795938/conditional-columns-to-row/56798475#56798475", "title": "Conditional columns to row", "body": "<p>Assuming that your table is called <code>df</code> and the columns of your table are named <code>X1</code>, <code>X2</code>, <code>X3</code> try the following:</p>\n\n<pre><code>library(dplyr)\nlibrary(tidyr)\n\ndf %&gt;% \n  spread(X2, X3)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 1740833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/945bf56fcee04b3462494ecdf3ed362f?s=128&d=identicon&r=PG", "display_name": "user1740833", "link": "https://stackoverflow.com/users/1740833/user1740833"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1561718151, "accepted_answer_id": 56798475, "answer_count": 1, "score": -4, "last_activity_date": 1561669635, "creation_date": 1561656058, "last_edit_date": 1561657507, "question_id": 56795938, "link": "https://stackoverflow.com/questions/56795938/conditional-columns-to-row", "closed_reason": "Duplicate", "title": "Conditional columns to row", "body": "<p>I have the following table with more than 30,000 lines</p>\n\n<pre>\n1\n1   ne  A\n1   en  B\n1   hi  C\n2\n2   ne  D\n2   ew  E\n2   en  F\n2   hi  G\n3\n3   en  H\n3   ne  I\n3   ew  J\n</pre>\n\n<p>The result I'm trying to get is:</p>\n\n<pre>\n    en  ew  hi  ne\n1   B       C   A\n2   F   E   G   D\n3   H   J       I\n</pre>\n\n<p>Can any body help me?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1561644423, "post_id": 56792788, "comment_id": 100140221, "body": "It is not clear what you are trying to achieve. Is the goal to change the database format? Is the goal to make an output?"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1561645043, "creation_date": 1561645043, "answer_id": 56793073, "question_id": 56792788, "link": "https://stackoverflow.com/questions/56792788/how-to-convert-column-into-row-in-perl/56793073#56793073", "title": "how to convert column into row in perl", "body": "<p>Your output comes from this section of your code:</p>\n\n<pre><code>while(&lt;::DBCMD&gt;){\n  print \"$_\";\n}\n</code></pre>\n\n<p>The filehandle <code>::DBCMD</code> is connected to the output from your <code>sqsh</code> command. Your code reads each record from that filehandle and prints it to <code>STDOUT</code>.</p>\n\n<p>If you want to do something cleverer with the output, then you're going to have to store the data in some kind of data structure (probably an array in this case) and manipulate that.</p>\n\n<p>I expect you want something like this:</p>\n\n<pre><code>my @data;\n\nwhile (&lt;::DBCMD&gt;) {\n  chomp; # remove the newline\n  push @data, $_;\n}\n\n# And then:\nprint join(',', @data), \"\\n\";\n</code></pre>\n\n<p>To print the exact output that you ask for, you would need this:</p>\n\n<pre><code>print '(', join(',', map { qq[\"$_\"] } @data), \")\\n\";\n</code></pre>\n\n<p>But I have to ask... why are you making your life so difficult by manipulating data that comes back from <code>sqsh</code>? You should really look at Perl's database interface library, <a href=\"https://metacpan.org/pod/DBI\" rel=\"nofollow noreferrer\">DBI</a>. That will make your life far simpler.</p>\n\n<p>A few other tips:</p>\n\n<ul>\n<li>Always have <code>use strict</code> and <code>use warnings</code> in your code. And fix the issues they will reveal.</li>\n<li>Use Perl's built-in date and time tools instead of shelling out to <code>date</code>.</li>\n<li>Using <code>::</code> on your bareword filehandle achieves nothing. Just <code>DBCMD</code> works the same way and is less confusing.</li>\n</ul>\n"}], "owner": {"reputation": 45, "user_id": 6729257, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0749a19475bc4c0c693e4d93b22e1ea8?s=128&d=identicon&r=PG&f=1", "display_name": "Amol Murkute", "link": "https://stackoverflow.com/users/6729257/amol-murkute"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561645043, "creation_date": 1561644172, "question_id": 56792788, "link": "https://stackoverflow.com/questions/56792788/how-to-convert-column-into-row-in-perl", "title": "how to convert column into row in perl", "body": "<p>I am reading values from my sql database for a column. Now I want to convert columns values in row in comma(ex:-\"abc\",\"xyz\")</p>\n\n<pre><code>Source Data:-\namol\naakash\nshami\nkrishna\n\nOutput expected: ( \"amol\",\"aakash\",\"shami\",\"krishna\")\n</code></pre>\n\n<p>Code which I am trying:- </p>\n\n<pre><code>#!/usr/bin/env perl\n\n $t = `date`;\n #print $t;\n $GCMS_SERVER = $ENV{DSQUERY};\n $GCMS_USERNAME = $ENV{GCMS_USERNAME};\n $GCMS_PASSWORD = $ENV{GCMS_PASSWORD};\n $GCMS_DATABASE = $ENV{GCMS_DATABASE};\n\n #print \"test\\n\";\n my $query = \"SELECT Label FROM FeedGenSource WHERE BaseFileName ='aldgctna'\";\n #print \"SQL =$query\\n\";\n\n my $sqlcmd = (qq/\n     set nocount on\n     go\n     use $GCMS_DATABASE\n     go\n     $query\n     /);\n\n   open(::DBCMD, \"sqsh -S$GCMS_SERVER -U$GCMS_USERNAME -h -w100 -P-  &lt;&lt;EOF\n $GCMS_PASSWORD\n $sqlcmd\n go\n EOF\n     |\") || die(\"Could not communicate with DB \");\n\n while(&lt;::DBCMD&gt;){\n print \"$_\";\n }\n\n #print \"done\\n\";\n close ::DBCMD;\n exit\n</code></pre>\n\n<p>This is the perl script. I want to use output in query as in statement.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1561632023, "post_id": 56788718, "comment_id": 100132650, "body": "Also see: <a href=\"https://perlmonks.org/?node_id=1204017\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1204017</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1561648635, "post_id": 56789985, "comment_id": 100142884, "body": "There is another difference on EBCDIC platforms, where <code>\\x</code> will return the character represented by that byte in EBCDIC for bytes under FF, but <code>\\N{U+...}</code> will return the same codepoint regardless of the internal representation."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1561670708, "post_id": 56789985, "comment_id": 100151864, "body": "@Grinnz, Thanks. Given that Perl probably isn&#39;t used an EBCDIC machines (it was broken long ago as a result of a lack of testing platform, and it only recently became supported again), I&#39;ve leave the question as is. Your comment will suffice."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1561670881, "last_edit_date": 1561670881, "creation_date": 1561634692, "answer_id": 56789985, "question_id": 56788718, "link": "https://stackoverflow.com/questions/56788718/is-there-a-difference-between-x-and-nu/56789985#56789985", "title": "Is there a difference between \\x{..} and \\N{U+..}", "body": "<p><code>\"\\x{...}\"</code> and <code>\"\\N{U+...}\"</code> always produce exactly the same string, meaning <code>\"\\x{...}\" eq \"\\N{U+...}\"</code> will always be true (for the same number).</p>\n\n<p>However, since 5.12, the scalar created by <code>\"\\N{U+...}\"</code> is guaranteed to use the <code>UTF8=1</code> internal storage format<sup>[1]</sup>, while the scalar created by <code>\"\\x{...}\"</code> is not subject to any guarantee (and in fact uses the <code>UTF8=0</code> format when possible). This means that <code>utf8::upgrade</code> needs not be called on a scalar produced by <code>\"\\N{U+...}\"</code> before passing it to (builtin or XS) functions that suffer from The Unicode Bug.<sup>[2]</sup></p>\n\n<p>In short, <code>\"\\N{U+...}\"</code> is more likely to work correctly when dealing with Unicode Code Points, and <code>\"\\x{...}\"</code> is more likely to work correctly when dealing with bytes.</p>\n\n<hr>\n\n<ol>\n<li><p>The <code>UTF8=0</code> storage format support strings of 8-bit characters, while the <code>UTF8=1</code> storage format support strings of 32- or 64-bit characters (depending on the build). </p></li>\n<li><p>This refers to code that considers two identical strings to be different because one is stored using <code>UTF8=0</code> format, and one is stored using the <code>UTF8=1</code> format). Code that assigns semantics to the storage format is buggy because Perl can and does freely convert strings between the two formats.</p></li>\n</ol>\n"}], "owner": {"reputation": 33, "user_id": 11707823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2650aa1d7540321c0ad1570cbbd4a087?s=128&d=identicon&r=PG&f=1", "display_name": "Haf Linger", "link": "https://stackoverflow.com/users/11707823/haf-linger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 56789985, "answer_count": 1, "score": 3, "last_activity_date": 1561670881, "creation_date": 1561630071, "last_edit_date": 1561631991, "question_id": 56788718, "link": "https://stackoverflow.com/questions/56788718/is-there-a-difference-between-x-and-nu", "title": "Is there a difference between \\x{..} and \\N{U+..}", "body": "<p>Is there a difference in using either <code>\\x{..}</code> or <code>\\N{U+..}</code> in a print statement?\nTo me they look like 2 ways of doing the same thing.\nSo what is the difference - if there is any?</p>\n"}, {"tags": ["perl", "routing", "mojolicious", "mojolicious-lite"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1561630567, "post_id": 56787227, "comment_id": 100131845, "body": "Why do you have the CSS as a template? Normally you&#39;d have that in your public folder. Or you could just have folders for HTML and CSS inside your template folder."}, {"owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1561636120, "post_id": 56787227, "comment_id": 100134918, "body": "@simbabque I&#39;m new to the framework and I have not been able to find clear documentation on how should be that done. I&#180;ve just been able to have that code working but I would like to have another structure"}, {"owner": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "edited": false, "score": 0, "creation_date": 1561638889, "post_id": 56787227, "comment_id": 100136550, "body": "@nck maybe this helps: <a href=\"https://mojolicious.org/perldoc/Mojolicious/Guides/Tutorial#Static-files\" rel=\"nofollow noreferrer\">mojolicious.org/perldoc/Mojolicious/Guides/&hellip;</a>    &quot;External static files are not limited to a single file extension and will be served automatically from a public directory if it exists.&quot;"}, {"owner": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "edited": false, "score": 0, "creation_date": 1561639377, "post_id": 56787227, "comment_id": 100136867, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/34935367/serve-static-directory-from-mojolicious-other-than-public\">serve static directory from mojolicious other than /public</a>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1561744090, "post_id": 56787227, "comment_id": 100176729, "body": "Note that Mojolicious::Lite is a very tiny wrapper around Mojolicious, the only functionality unique to Lite is <code>group</code> which is needed to make the DSL work. So you can probably assume any examples for one will be usable for the other."}], "owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1561743990, "creation_date": 1561625003, "last_edit_date": 1561743990, "question_id": 56787227, "link": "https://stackoverflow.com/questions/56787227/how-to-change-templates-folder-in-perl-mojolicious-lite", "title": "How to change templates folder in perl Mojolicious lite?", "body": "<p>I would like to have the following strucutre in my project:</p>\n\n<pre><code>folder\n\\_script_1.pl\n  mojolicious_ui_script.pl\n  HTML\n  \\_website.html.ep\n  CSS\n  \\_website.css.ep\n</code></pre>\n\n<p>But I'm just able to get it to work using this default strucutre:</p>\n\n<pre><code>folder\n\\_script_1.pl\n  mojolicious_ui_script.pl\n  templates\n  \\_website.html.ep\n    website.css.ep\n</code></pre>\n\n<p>This is a simplified version of the mojolicious_ui_script.pl I\u00b4m using:</p>\n\n<pre><code>use utf8;\nuse open ':std', ':encoding(UTF-8)';\n\n\nuse Mojolicious::Lite;\n\n\n\nget \"/\" =&gt; 'website';\n\nget \"/website\\.css\" =&gt; { template =&gt; 'website', format =&gt; 'css'} =&gt; 'website-css';\n\n\n\n# app-&gt;secret('random string to turn off warnings about no secret');\n# app-&gt;mode('production'); # stop debug output\napp-&gt;start('daemon', '-l', 'http://*:3000');\n</code></pre>\n\n<p>I'm stucked finding a way to solve this, as the documentation between the lite version and normal Mojo is sometimes mixed and I don\u00b4t if something can be used on both sides, but anyway trying a lot of things with routes I have not been able to chagne this.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1561634223, "post_id": 56784927, "comment_id": 100133902, "body": "My Fite::Find::Closures module has several examples. It&#39;s designed such the you can lift the code directly into your own code without relying on the module."}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "edited": false, "score": 0, "creation_date": 1561616840, "post_id": 56785117, "comment_id": 100124274, "body": "but I want to use the array outside the subroutine"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "edited": false, "score": 0, "creation_date": 1561616914, "post_id": 56785117, "comment_id": 100124300, "body": "@daffodil You can."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1561617425, "last_edit_date": 1561617425, "creation_date": 1561616778, "answer_id": 56785117, "question_id": 56784927, "link": "https://stackoverflow.com/questions/56784927/how-to-store-result-from-findfile-into-array/56785117#56785117", "title": "How to store result from Find::File into array", "body": "<p>Sure, just <code>push</code> into an array declared outside:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse File::Find;\n\nmy $location = \"tmp\";\n\nmy @results;\nmy $find_txt = sub {\n    my $F = $File::Find::name;\n\n    if ($F =~ /txt$/ ) {\n        push @results, $F;\n    }\n};\n\n\nfind({ wanted =&gt; $find_txt, no_chdir=&gt;1}, $location);\nfor my $result (@results) {\n    print \"found $result\\n\";\n}\n</code></pre>\n\n<p>The return value of the <code>wanted</code> callback <a href=\"https://perldoc.pl/File::Find#The-wanted-function\" rel=\"nofollow noreferrer\">is ignored</a>. <code>find</code> itself has no documented or useful return value either.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1561635545, "creation_date": 1561635545, "answer_id": 56790192, "question_id": 56784927, "link": "https://stackoverflow.com/questions/56784927/how-to-store-result-from-findfile-into-array/56790192#56790192", "title": "How to store result from Find::File into array", "body": "<p>Replace</p>\n\n<pre><code>my @fileInDir = find({ wanted =&gt; \\&amp;find_txt, no_chdir=&gt;1}, $location);\n</code></pre>\n\n<p>with</p>\n\n<pre><code>my @fileInDir;\nfind({ wanted =&gt; sub { push @fileInDir, find_txt(); }, no_chdir=&gt;1 }, $location);\n</code></pre>\n\n<p>and add the missing</p>\n\n<pre><code>return;\n</code></pre>\n\n<p>aka</p>\n\n<pre><code>return ();\n</code></pre>\n\n<p>to <code>find_txt</code>. Unlike the solution in the earlier answer, this allows you to have reusable and conveniently located \"wanted\" subs. </p>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1561646910, "creation_date": 1561646910, "answer_id": 56793650, "question_id": 56784927, "link": "https://stackoverflow.com/questions/56784927/how-to-store-result-from-findfile-into-array/56793650#56793650", "title": "How to store result from Find::File into array", "body": "<p>For posterity, this is much more straightforward with <a href=\"https://metacpan.org/pod/Path::Iterator::Rule\" rel=\"nofollow noreferrer\">Path::Iterator::Rule</a>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Path::Iterator::Rule;\n\nmy $location = 'tmp';\nmy $rule = Path::Iterator::Rule-&gt;new-&gt;not_dir-&gt;name(qr/txt$/);\nmy @paths = $rule-&gt;all($location);\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 56785117, "answer_count": 3, "score": 0, "last_activity_date": 1561646910, "creation_date": 1561615881, "last_edit_date": 1561616930, "question_id": 56784927, "link": "https://stackoverflow.com/questions/56784927/how-to-store-result-from-findfile-into-array", "title": "How to store result from Find::File into array", "body": "<p>I want to list the file in directory and subdirectory. I use perl File::Find. Is it possible for me to store the result into an array?</p>\n\n<p>Here is the code</p>\n\n<pre><code>use warnings;\nuse strict;\nuse File::Find;\n\nmy $location=\"tmp\";\n\nsub find_txt {\n    my $F = $File::Find::name;\n\n    if ($F =~ /txt$/ ) {\n       push @filelist, $F;\n       return @filelist;\n    }\n}\n\n\nmy @fileInDir = find({ wanted =&gt; \\&amp;find_txt, no_chdir=&gt;1}, $location);\nprint OUTPUT @fileInDir\n</code></pre>\n\n<p>the code above doesn't display the output</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "is_accepted": true, "score": 2, "last_activity_date": 1561707559, "last_edit_date": 1561707559, "creation_date": 1561619717, "answer_id": 56785873, "question_id": 56784446, "link": "https://stackoverflow.com/questions/56784446/how-to-find-number-of-rows-column-wise-while-parsing-an-excel-sheet/56785873#56785873", "title": "How to find number of rows column-wise while parsing an excel sheet", "body": "<p>probably not the best solution, but it works:</p>\n\n<pre><code>my $parser   = Spreadsheet::ParseExcel-&gt;new();\nmy $workbook = $parser-&gt;parse('&lt;excel file name&gt;.xls');\n\nif ( !defined $workbook ) {\n    die $parser-&gt;error(), \".\\n\";\n}\n\nfor my $worksheet ( $workbook-&gt;worksheets() ) {\n    my ( $row_min, $row_max ) = $worksheet-&gt;row_range();\n    my $cells_col2 = 0;\n\n    for my $row ($row_min..$row_max){\n        if (!defined $worksheet-&gt;get_cell( $row, 1 )) { # 1 == col-2\n            last;\n        }\n        $cells_col2++;\n    }\n    print $cells_col2; # 2\n}\n</code></pre>\n\n<p>loop stops when it finds the first empty cell in this column</p>\n"}], "owner": {"reputation": 103, "user_id": 8348572, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/411d40ff9e191ce7a70d2c03fa75cee9?s=128&d=identicon&r=PG&f=1", "display_name": "sid", "link": "https://stackoverflow.com/users/8348572/sid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 56785873, "answer_count": 1, "score": 1, "last_activity_date": 1561707559, "creation_date": 1561613159, "question_id": 56784446, "link": "https://stackoverflow.com/questions/56784446/how-to-find-number-of-rows-column-wise-while-parsing-an-excel-sheet", "title": "How to find number of rows column-wise while parsing an excel sheet", "body": "<p>I have an excel sheet where there are two columns. Column 1 has 5 rows and Column 2 has 2 rows.</p>\n\n<pre><code>Column 1   Column 2\n\nAlpha      One\nBeta       Two\nCharlie\nGamma\nZeta\n</code></pre>\n\n<p>How can I get the maximum number of rows in Column 1 and Column 2.</p>\n\n<p>I have the below code to get the maximum number of rows in the sheet.</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse Spreadsheet::ParseExcel;\n\nmy $FILE = \"&lt;excel file name&gt;.xls\";\nmy $SHEETNAME = \"&lt;sheet name&gt;\";\n\nmy $COLUMN1 = 1;\nmy $COLUMN2 = 2;\n\nmy $excel = Spreadsheet::ParseExcel::Workbook-&gt;Parse($FILE);\nmy $sheet = $excel-&gt;Worksheet($SHEETNAME);\n\n$row_max = $sheet-&gt;{MaxRow};\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561612011, "post_id": 56782669, "comment_id": 100122663, "body": "I think you mean an empty string (as produced by <code>&#39;&#39;</code>), not a single space (as produced by <code>&#39; &#39;</code>). The empty string is false, but a space is true."}, {"owner": {"reputation": 3, "user_id": 11705846, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wY_6NjeAyGw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdLxpgpi-91CY3Lc-axkcSuESqmKg/photo.jpg?sz=128", "display_name": "Human Bean", "link": "https://stackoverflow.com/users/11705846/human-bean"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561656488, "post_id": 56782669, "comment_id": 100146545, "body": "You&#39;re right, I did mean it was returning <code>&#39;&#39;</code>, which was the value of <code>$var1</code> for some test cases."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11705846, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wY_6NjeAyGw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdLxpgpi-91CY3Lc-axkcSuESqmKg/photo.jpg?sz=128", "display_name": "Human Bean", "link": "https://stackoverflow.com/users/11705846/human-bean"}, "edited": false, "score": 0, "creation_date": 1561656450, "post_id": 56783367, "comment_id": 100146530, "body": "Thank you! I was missing adding the <code>defined()</code> for my first check. After adding that check, my unit tests are working as expected. :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3, "user_id": 11705846, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wY_6NjeAyGw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdLxpgpi-91CY3Lc-axkcSuESqmKg/photo.jpg?sz=128", "display_name": "Human Bean", "link": "https://stackoverflow.com/users/11705846/human-bean"}, "edited": false, "score": 0, "creation_date": 1561662801, "post_id": 56783367, "comment_id": 100149208, "body": "That doesn&#39;t mean they&#39;re correct. You should still apply one of the fixes I proposed. <code>perl -e&#39;use Test::More tests =&gt; 1; my $var1 = &quot;&quot;; is(defined($var1) &amp;&amp; $var1 eq &quot;someValue&quot;, 0)&#39;</code> fails just as badly as <code>perl -e&#39;use Test::More tests =&gt; 1; my $var1 = &quot;&quot;; is($var1 &amp;&amp; $var1 eq &quot;someValue&quot;, 0)&#39;</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1561612664, "last_edit_date": 1561612664, "creation_date": 1561604977, "answer_id": 56783367, "question_id": 56782669, "link": "https://stackoverflow.com/questions/56782669/how-to-handle-different-boolean-values-in-perl/56783367#56783367", "title": "How to handle different boolean values in Perl?", "body": "<p>If <code>$var1</code> is false, the sub will return the value of <code>$var1</code>.</p>\n\n<p>If <code>$var1</code> is true, but different than <code>$var2</code>, the sub will return a scalar that contains the integer <code>0</code>, the floating point number <code>0</code> and the empty string.</p>\n\n<p>But I wouldn't check for any of those values explicitly. They're all legit values, and it's too complicated to check for each one. </p>\n\n<p>Instead, you should normalize.</p>\n\n<pre><code>is(isVar1Valid($input) ? 1 : 0, 0);\n</code></pre>\n\n<p>Better yet, use <code>ok</code> instead of <code>is</code>.</p>\n\n<pre><code>ok(!isVar1Valid($input));\n</code></pre>\n\n<hr>\n\n<p>By the way, note that the following construct is a little weird:</p>\n\n<pre><code>$var1 &amp;&amp; $var1 eq $var2\n</code></pre>\n\n<p>The purpose of the first check is probably to avoid an \"uninitialized\" warning. If so, it would be best to communicate that to the reader by using the following instead:</p>\n\n<pre><code>defined($var1) &amp;&amp; $var1 eq $var2\n</code></pre>\n\n<p>This is important because the second version isn't equivalent to the second if <code>$var2</code> can be false.</p>\n"}], "owner": {"reputation": 3, "user_id": 11705846, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wY_6NjeAyGw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdLxpgpi-91CY3Lc-axkcSuESqmKg/photo.jpg?sz=128", "display_name": "Human Bean", "link": "https://stackoverflow.com/users/11705846/human-bean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 56783367, "answer_count": 1, "score": 0, "last_activity_date": 1561612664, "creation_date": 1561597546, "question_id": 56782669, "link": "https://stackoverflow.com/questions/56782669/how-to-handle-different-boolean-values-in-perl", "title": "How to handle different boolean values in Perl?", "body": "<p>I have an existing function that checks if an input variable is defined, and returns true if it is equal to another variable, and returns false otherwise:</p>\n\n<pre><code>sub isVar1Valid {\n    my ($self, $var1) = @_;\n    my $var2 = \"someValue\";   \n    return $var1 &amp;&amp; $var1 eq $var2;\n}\n</code></pre>\n\n<p>I'm writing unit tests for this function, and the expected output I'm looking for is false. In my unit test, I'm actually testing for <code>0</code>. However, my test is failing because the above method is returning <code>' '</code>, and that is not equal to <code>0</code>.</p>\n\n<p>My unit test looks something like.</p>\n\n<pre><code>my $actualOutput = isVar1Valid($input);\nis($actualOutput, 0);\n</code></pre>\n\n<p>Should I be testing for <code>' '</code> as an expected output in my unit test instead? Or should I be returning <code>0</code> in my main function instead?</p>\n\n<p>This is my first time working with Perl, so any guidance is appreciated.</p>\n"}]