[{"tags": ["perl", "perl-xs", "morbo"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1534965695, "post_id": 51973711, "comment_id": 90897944, "body": "You get this error when the module was installed by a different version of Perl than the one currently being used. These (and other things) must match"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1534966849, "post_id": 51973711, "comment_id": 90898469, "body": "The mismatch is not trivial. 5.16 and 5.20 are two major releases apart and Perl is generally not binary compatible across those."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1534967007, "post_id": 51973711, "comment_id": 90898535, "body": "If DBD::Pg loads under morbo, it&#39;s probably using a different perl. How many perls are there on your system? (Also, Module::Build is not a pragma.)"}, {"owner": {"reputation": 2444, "user_id": 584940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4fd36b5abead93bfd3575c08cd923e9?s=128&d=identicon&r=PG", "display_name": "Randall", "link": "https://stackoverflow.com/users/584940/randall"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1534967272, "post_id": 51973711, "comment_id": 90898647, "body": "@melpomene Wrong choice of terminolgy, then.  Aside from being a Perl module, what is it?  A convention? A paradigm?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1534967285, "post_id": 51973711, "comment_id": 90898655, "body": "It&#39;s just a module."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534969826, "post_id": 51973711, "comment_id": 90899770, "body": "It&#39;s used for installing modules, so you could call it an &quot;installer&quot; if you&#39;re looking for a purpose-related descriptor."}], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 3, "last_activity_date": 1534990157, "creation_date": 1534990157, "answer_id": 51977433, "question_id": 51973711, "link": "https://stackoverflow.com/questions/51973711/can-i-suppress-the-perl-api-version-s-of-s-does-not-match-s-error/51977433#51977433", "title": "Can I suppress the &quot;Perl API version %s of %s does not match %s&quot; error", "body": "<p>You can't copy non-pure Perl modules from one system to the next (or into one group of perl lib directories into another perl's). Generally the code in those modules is compiled against the specific perl binary. That binary could have linked to different libraries, changed how it does things, used a different compiler, and many other things. It may not even work if the <code>perl</code> versions are the same.</p>\n\n<p>Instead, install the <code>DBD::Pg</code> for each <code>perl</code> that needs to use it.</p>\n"}], "owner": {"reputation": 2444, "user_id": 584940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4fd36b5abead93bfd3575c08cd923e9?s=128&d=identicon&r=PG", "display_name": "Randall", "link": "https://stackoverflow.com/users/584940/randall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539732621, "creation_date": 1534965451, "last_edit_date": 1539732621, "question_id": 51973711, "link": "https://stackoverflow.com/questions/51973711/can-i-suppress-the-perl-api-version-s-of-s-does-not-match-s-error", "title": "Can I suppress the &quot;Perl API version %s of %s does not match %s&quot; error", "body": "<p>I copied a Perl module (<code>DBD::Pg</code>) from one system to another to run some quick checks on a Mojolicious project.  On the new system, it all works fine when I run it under <code>morbo</code> (the Mojolicious test web daemon).  But when I try to run the tests (via the <code>Module::Build</code> installer), I get the error:</p>\n\n<blockquote>\n  <p>Perl API version v5.16.0 of DBD::Pg does not match v5.20.0 at /usr/local/lib/perl/DynaLoader.pm line 216.</p>\n</blockquote>\n\n<p>I researched why I am getting this, and read the explanation in <a href=\"http://perldoc.perl.org/perldiag.html#Perl-API-version-%25s-of-%25s-does-not-match-%25s\" rel=\"nofollow noreferrer\">the perldoc</a>.  But since the project runs under <code>morbo</code>, that seems to imply to me that the version mismatch may be trivial in this case.  It looks like PerlXS does make some allowances for <a href=\"https://perldoc.perl.org/perlxs.html#The-VERSIONCHECK%3A-Keyword\" rel=\"nofollow noreferrer\">disabling VERSIONCHECK</a>, but I don't see how that can be applied when running a Perl script.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1534952437, "post_id": 51970385, "comment_id": 90891332, "body": "You can also do it in two steps before trying to super optimize it. You already extracted something, the date with all items from which you want only some. So apply a second regex on this new string. Or do a split on <code>:</code> and keep items at position 1 and 2."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1534952742, "post_id": 51970385, "comment_id": 90891528, "body": "That regex pattern with the data you show captures <code>20&#47;Aug&#47;2018:00:00:40 -0600</code>. How do you get <code>07:35</code> from that?"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 8061059, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a882f17a8db437caac0bfd148c3c69e4?s=128&d=identicon&r=PG&f=1", "display_name": "dabire", "link": "https://stackoverflow.com/users/8061059/dabire"}, "edited": false, "score": 0, "creation_date": 1534953841, "post_id": 51970650, "comment_id": 90892214, "body": "Thanks. Worked fine"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1534953018, "creation_date": 1534953018, "answer_id": 51970650, "question_id": 51970385, "link": "https://stackoverflow.com/questions/51970385/extracting-time-with-regex/51970650#51970650", "title": "Extracting time with regex", "body": "<p>If we are to believe your regex pattern match results rather than the input data you show, then</p>\n\n<pre><code>my ($time) = /:(\\d\\d:\\d\\d)/\n</code></pre>\n\n<p>should do the trick</p>\n"}], "owner": {"reputation": 65, "user_id": 8061059, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a882f17a8db437caac0bfd148c3c69e4?s=128&d=identicon&r=PG&f=1", "display_name": "dabire", "link": "https://stackoverflow.com/users/8061059/dabire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 51970650, "answer_count": 1, "score": -2, "last_activity_date": 1534953018, "creation_date": 1534952193, "last_edit_date": 1534952890, "question_id": 51970385, "link": "https://stackoverflow.com/questions/51970385/extracting-time-with-regex", "title": "Extracting time with regex", "body": "\n\n<p>I am trying to get just the time out of this line </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>10.11.17.31 - ldjfu [20/Aug/2018:00:00:40 -0600] GET /aghdj/shflf/heartbeat HTTP/1.0 200 650 - F5 Heartbeat EExL34L-CFYSLHwerKajtqP2Z8bf 0.006\n</code></pre>\n\n<p>Doing this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/^.*\\[(.*)\\].*/\n</code></pre>\n\n<p>gives me </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>20/Aug/2018:07:35:52 -0600\n</code></pre>\n\n<p>but I only want </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>07:35\n</code></pre>\n\n<p>I have tried to manipulate my regex pattern but no better eliminating the items I don't need.</p>\n"}, {"tags": ["perl", "reference"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 4, "creation_date": 1534946585, "post_id": 51968379, "comment_id": 90887554, "body": "Have you tried <code>print Dumper($Contents)</code> ?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1534947742, "post_id": 51968379, "comment_id": 90888323, "body": "When you say &quot;errors out&quot;, what <i>exactly</i> do you mean? Please <a href=\"https://stackoverflow.com/posts/51968379/edit\">edit your question</a> to add the text of the error message. It would also be helpful if you could include a cut-down version of your code that we could run to see the error."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1534949857, "post_id": 51968379, "comment_id": 90889805, "body": "I&#39;m always surprised by people who treat error or warning messages as if they were flies to be swatted away. <i>&quot;errors out&quot;</i> means that there was a <i>message</i> which more or less says exactly why your program failed. The contents of those messages are essential information if you are asking for help with your code, as is the code itself. Please read <a href=\"http://stackoverflow.com/help/mcve\"><i>How to create a Minimal, Complete, and Verifiable example</i></a> and try to understand that it is <i>essential</i> to provide as much information as possible."}, {"owner": {"reputation": 11, "user_id": 6268313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbed4112a65b10575c36abc9f6e91f7?s=128&d=identicon&r=PG&f=1", "display_name": "Jamie", "link": "https://stackoverflow.com/users/6268313/jamie"}, "edited": false, "score": 0, "creation_date": 1535097739, "post_id": 51968379, "comment_id": 90949034, "body": "Hi Dave, sorry the errors out was incorrect, I meant its not showing what I expected. Fixed in the question."}, {"owner": {"reputation": 11, "user_id": 6268313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbed4112a65b10575c36abc9f6e91f7?s=128&d=identicon&r=PG&f=1", "display_name": "Jamie", "link": "https://stackoverflow.com/users/6268313/jamie"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535128024, "post_id": 51968379, "comment_id": 90967310, "body": "@Borodin when I said error it was actually incorrect. There was no error. It wasnt doing what I expected, wrong wording in the original question which has since been fixed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535147574, "post_id": 51968379, "comment_id": 90975249, "body": "<i>&quot;It did&#39;nt show the sub hash values of Class and Category&quot;</i> You are mistaken. I can&#39;t think of any way that is possible, unless perhaps if <code>$Contents</code> is a tied hash."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535147715, "post_id": 51968379, "comment_id": 90975286, "body": "Your update isn&#39;t part of your question. Please use comments to comment on answers or on your question."}], "answers": [{"tags": [], "owner": {"reputation": 587, "user_id": 2245633, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/SLpQK.gif?s=128&g=1", "display_name": "CodeGorilla", "link": "https://stackoverflow.com/users/2245633/codegorilla"}, "is_accepted": false, "score": 4, "last_activity_date": 1534950105, "last_edit_date": 1534950105, "creation_date": 1534948374, "answer_id": 51969224, "question_id": 51968379, "link": "https://stackoverflow.com/questions/51968379/how-to-dump-the-data-behind-a-hash-reference/51969224#51969224", "title": "How to dump the data behind a hash reference", "body": "<p><code>%Contents</code>, <code>$Contents</code>, and <code>@Contents</code> are completely unrelated; after all their names are very different!</p>\n\n<p>You need simply <code>print Dumper $Contents</code></p>\n\n<p>It would help to use modern syntax and write the hash access as</p>\n\n<pre><code>$Contents-&gt;{Category}{$value}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6268313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbed4112a65b10575c36abc9f6e91f7?s=128&d=identicon&r=PG&f=1", "display_name": "Jamie", "link": "https://stackoverflow.com/users/6268313/jamie"}, "is_accepted": true, "score": 0, "last_activity_date": 1535151358, "last_edit_date": 1535151358, "creation_date": 1535128092, "answer_id": 52008456, "question_id": 51968379, "link": "https://stackoverflow.com/questions/51968379/how-to-dump-the-data-behind-a-hash-reference/52008456#52008456", "title": "How to dump the data behind a hash reference", "body": "<p>I didnt get exactly what I wanted, aka for Dumper to just output everything from the parent hash, but I did find a workaround by dumping the sub hashes. </p>\n\n<p>Doing the following didnt achieve what I needed</p>\n\n<pre><code>print Dumper $Contents\n</code></pre>\n\n<p>It didnt show the sub hash values of class and category. This I know as when I print Class and Category they have values that are not shown when Dumper prints the Contents var.</p>\n\n<p>However I have been able to output the individual hash values as follows:</p>\n\n<pre><code>print Dumper $Contents-&gt;{'Class'};\nprint Dumper $Category-&gt;{'Category'};\n</code></pre>\n\n<p>Not what I originally wanted to do, but it works.</p>\n"}], "owner": {"reputation": 11, "user_id": 6268313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbed4112a65b10575c36abc9f6e91f7?s=128&d=identicon&r=PG&f=1", "display_name": "Jamie", "link": "https://stackoverflow.com/users/6268313/jamie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "closed_date": 1535147233, "accepted_answer_id": 52008456, "answer_count": 2, "score": 0, "last_activity_date": 1535151358, "creation_date": 1534945670, "last_edit_date": 1535151346, "question_id": 51968379, "link": "https://stackoverflow.com/questions/51968379/how-to-dump-the-data-behind-a-hash-reference", "closed_reason": "Not suitable for this site", "title": "How to dump the data behind a hash reference", "body": "<p>I am trying to debug some legacy Perl code, and I am using <code>Data::Dumper</code> to help.</p>\n\n<p>I have the following variables and I'm not sure how to pass these to <code>Data::Dumper</code> to print their contents</p>\n\n<pre><code>$Class    = $$Contents{'Class'}{$value};     \n$Category = $$Contents{'Category'}{$value};\n</code></pre>\n\n<p>I want to dump out the <code>$Contents</code> hash reference. How do I do this?</p>\n\n<p>I want to see what values are present in the <code>$Class</code> hash and the <code>$Category</code> hash.</p>\n"}, {"tags": ["xml", "perl", "libxml2"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1534950509, "post_id": 51967810, "comment_id": 90890208, "body": "You probably can&#39;t change this. If the syntax of your XML is significant then you&#39;re not using it properly."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1534950634, "post_id": 51967810, "comment_id": 90890266, "body": "There&#39;s nothing in your code that produces hex character entities. Please show how you are seeing this unwanted behaviour."}], "answers": [{"tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": false, "score": 0, "last_activity_date": 1534970181, "creation_date": 1534970181, "answer_id": 51974729, "question_id": 51967810, "link": "https://stackoverflow.com/questions/51967810/xmllibxml-changing-character-entity-from-hex-to-decimal/51974729#51974729", "title": "XML::LibXML changing character entity from hex to decimal", "body": "<p>The string <code>&amp;#xA</code> would be encoded as <code>&amp;amp;#xA</code> in XML. <code>XML::LibXML</code> will automatically encode it. Printing the XML as a serialized string will yield the encoded character. To print the decoded character, use the <code>getAttribute</code> method.</p>\n\n<pre><code>use XML::LibXML;\n\nmy $doc = XML::LibXML::Document-&gt;new('1.0', 'utf-8');\nmy $string = '&amp;#xA';\nmy $node = $doc-&gt;createElement('Element');\n$node-&gt;setAttribute('attr', $string);\n\nprint $node-&gt;toString.\"\\n\"; # prints &lt;Element attr=\"&amp;amp;#xA\"/&gt;\nprint $node-&gt;getAttribute('attr').\"\\n\"; # prints &amp;#xA\n</code></pre>\n\n<p>Note that if your string were in the text content part of the element, you would use <code>$node-&gt;textContent</code> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": false, "score": 1, "last_activity_date": 1535640384, "creation_date": 1535640384, "answer_id": 52099871, "question_id": 51967810, "link": "https://stackoverflow.com/questions/51967810/xmllibxml-changing-character-entity-from-hex-to-decimal/52099871#52099871", "title": "XML::LibXML changing character entity from hex to decimal", "body": "<p>When parsing a document, <em>libxml2</em> loses the information whether a numeric character reference was provided in decimal or hex. For any sane application, it shouldn't matter which representation is chosen. But since hexadecimal character references happen to be the <a href=\"https://www.w3.org/TR/xml-c14n/#ProcessingModel\" rel=\"nofollow noreferrer\">canonical representation</a>, you could try to serialize with <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/Node.pod#toStringC14N\" rel=\"nofollow noreferrer\"><code>toStringC14N</code></a>.</p>\n\n<pre><code>print $doc-&gt;toStringC14N; # Will output &amp;#xA;\n</code></pre>\n\n<p>Note that this will normalize other parts of the XML document as well, which may or may not be what you need. Also see the documentation for other canonization methods and options.</p>\n"}], "owner": {"reputation": 11, "user_id": 6025442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c54536aac823c502bfafa5c58ddce0fa?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Kendrick", "link": "https://stackoverflow.com/users/6025442/robin-kendrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1535640384, "creation_date": 1534943840, "last_edit_date": 1592644375, "question_id": 51967810, "link": "https://stackoverflow.com/questions/51967810/xmllibxml-changing-character-entity-from-hex-to-decimal", "title": "XML::LibXML changing character entity from hex to decimal", "body": "<p>How can I stop Perl\n<a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\"><code>XML::LibXML</code></a>\nfrom changing special characters from decimal to hex, like <code>&amp;#xA</code> to <code>&amp;#10</code>?</p>\n<h3>Perl code</h3>\n<pre><code>use XML::LibXML;\n\nopen my $fh, '&lt;', $File;\nmy $doc = XML::LibXML-&gt;load_xml(IO =&gt; $fh);\nopen (my $fh, '&gt;', $File) or die $!;\nprint $fh $doc;\nclose $fh;\n</code></pre>\n<p>A third party tool(.net based) and Perl script needs to deal with same XML file.<br />\nXML generated by third party tools contains :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;content&gt;\n&lt;type sRemark=&quot;30 minutes.&amp;#xA;&amp;#xA;&quot;/&gt;\n&lt;/content&gt;\n</code></pre>\n<p>But, when Perl script try to update the same file it changes to :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;content&gt;\n&lt;type sRemark=&quot;30 minutes.&amp;#10;&amp;#10;&quot;/&gt;\n&lt;/content&gt;\n</code></pre>\n<p>How can I maintain the same content.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1534952186, "post_id": 51966043, "comment_id": 90891207, "body": "You&#39;re suggesting that a superfluous newline is represented by a question mark in the OP&#39;s diagnostic? It may be useful to say so."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1534952227, "post_id": 51966043, "comment_id": 90891230, "body": "Please discourage calling Perl subroutines with an ampersand <code>&amp;</code>."}, {"owner": {"reputation": 41, "user_id": 10255699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd91d402988b2f6bffbb3e7592291bc4?s=128&d=identicon&r=PG&f=1", "display_name": "JustMe", "link": "https://stackoverflow.com/users/10255699/justme"}, "edited": false, "score": 0, "creation_date": 1535007770, "post_id": 51966043, "comment_id": 90909710, "body": "@JGNI          Thank you for answer. It helped me to decide the problem."}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 3, "last_activity_date": 1534942267, "last_edit_date": 1534942267, "creation_date": 1534937975, "answer_id": 51966043, "question_id": 51965116, "link": "https://stackoverflow.com/questions/51965116/excess-symbol-after-reading-a-file/51966043#51966043", "title": "Excess symbol after reading a file", "body": "<p>When reading data from a file handle using <code>&lt;&gt;</code>, Perl splits the file into lines. What Perl thinks of as a line ending is the contents of the <code>$/</code> special variable. This value is <strong>not</strong> removed from the end of the line.</p>\n\n<p>You can use the <code>chomp()</code> function to remove the end of line marker, if it exists, from the end of a line. So change </p>\n\n<pre><code>while ($hostname = &lt;$CFILE_HANDLE&gt;) {\n    print $hostname;          #Here I debug and get clear output without ?\n    &amp;FindRunning($programname, $hostname); #Give my args in func\n}\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>while ($hostname = &lt;$CFILE_HANDLE&gt;) {\n    print $hostname;          #Here I debug and get clear output without ?\n    chomp $hostname;\n    &amp;FindRunning($programname, $hostname); #Give my args in func\n}\n</code></pre>\n\n<p>The <code>print</code> works because it's printing <code>machine01</code> followed by a new line character, which moves the next entry from your file onto the next line</p>\n"}], "owner": {"reputation": 41, "user_id": 10255699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd91d402988b2f6bffbb3e7592291bc4?s=128&d=identicon&r=PG&f=1", "display_name": "JustMe", "link": "https://stackoverflow.com/users/10255699/justme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 51966043, "answer_count": 1, "score": 1, "last_activity_date": 1534952048, "creation_date": 1534934748, "last_edit_date": 1534952048, "question_id": 51965116, "link": "https://stackoverflow.com/questions/51965116/excess-symbol-after-reading-a-file", "title": "Excess symbol after reading a file", "body": "<p>I'm trying to run a command after reading a file.</p>\n\n<p>when I use <code>$hostname</code> in the command I see</p>\n\n<pre><code>ssh machine? ps auxw -U myname 2&gt;&amp;1\n</code></pre>\n\n<p>So I have a superfluous <code>?</code> there.</p>\n\n<p>My host file consists of:</p>\n\n<pre><code>machine01\nmachine02\n</code></pre>\n\n<p>It is without any excess spaces and I have only pressed <code>Enter</code>.</p>\n\n<p>Please, check my example out:</p>\n\n<pre><code>sub CheckHosts {\n\n    my $programname   = $_[0];\n    my $HostsFileName = $ENV{'HOST_FILE'};\n\n    open my $CFILE_HANDLE, \"&lt; $HostsFileName\" or die \"Error: open file $HostsFileName--$!\\n\";\n\n    while ( $hostname = &lt;$CFILE_HANDLE&gt; ) {\n\n        print $hostname;    # Clear output without ?\n\n        &amp;FindRunning( $programname, $hostname );    #Give my args in func\n    }\n}\n</code></pre>\n\n<p>Next:</p>\n\n<pre><code>sub FindRunning {\n\n    my $programname = $_[0];\n    my $hostname    = $_[1];\n\n    print $hostname;    # Debug and get clear output without ?\n\n    my $logname = $ENV{'USER'};\n    my $rc = open PSFD, \"ssh $hostname ps auxw -U $logname 2&gt;&amp;1 |\";\n}\n</code></pre>\n\n<p>How can I understand where the <code>?</code> comes from?</p>\n\n<p>The process hangs on a machine, where I start to run the script. Then I use:</p>\n\n<pre><code>$ps ax\n</code></pre>\n\n<p>And see the line contains</p>\n\n<pre><code>sh -c ssh machine01? ps auxw -U user 2&gt;&amp;1`\n</code></pre>\n\n<p>How should I check this line, and why does an excess symbol appear?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1534927158, "post_id": 51962026, "comment_id": 90875916, "body": "Keep in mind that no regular expression will support back-quotes in your string arguments."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1534928075, "post_id": 51962026, "comment_id": 90876400, "body": "That is, no regex that you&#39;d want to write. It&#39;s certainly possible though. Witness this JSON parser: <a href=\"https://www.perlmonks.org/?node_id=995856\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=995856</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2517, "user_id": 2129097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f7076b34edaf161f394be22dbd7cbd?s=128&d=identicon&r=PG", "display_name": "Jan Myszkier", "link": "https://stackoverflow.com/users/2129097/jan-myszkier"}, "is_accepted": false, "score": 0, "last_activity_date": 1534927090, "creation_date": 1534927090, "answer_id": 51962858, "question_id": 51962026, "link": "https://stackoverflow.com/questions/51962026/how-to-use-a-capture-specific-strings-in-a-regular-expression/51962858#51962858", "title": "How to use a capture specific strings in a regular expression?", "body": "<p>really ugly version, but catches what you need:\n<code>Function1([^\\n]*\\n+)+(.*?)URL=(.*?)google.com(.*)([^\\n]*\\n+)+(.*)</code>\nhopefully others can improve this, but you have a starting point</p>\n"}, {"comments": [{"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1534929492, "post_id": 51962988, "comment_id": 90877176, "body": "What does <code>.*?</code>? A random character zero or more times. And this again zero or one time?"}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1534941357, "post_id": 51962988, "comment_id": 90883977, "body": "The <code>*</code> quantifier normally matches 0 or more times <i>greedily</i>... meaning it will consume as many characters as it can. Adding the question mark makes it a non-greedy match. For example, <code>&#39;ababa&#39; =~ &#47;(a.*ba)&#47;</code> matches the whole string, but <code>&#39;ababa&#39; =~ &#47;(a.*?ba)&#47;</code> only matches <code>aba</code>. Search <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a> for <code>*?</code>, as well as it&#39;s counter-point <code>*+</code> for more info."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 4, "last_activity_date": 1535030640, "last_edit_date": 1535030640, "creation_date": 1534927542, "answer_id": 51962988, "question_id": 51962026, "link": "https://stackoverflow.com/questions/51962026/how-to-use-a-capture-specific-strings-in-a-regular-expression/51962988#51962988", "title": "How to use a capture specific strings in a regular expression?", "body": "<p>I think I might do this with two patterns. The first extracts the stuff between the function parentheses and the second checks if that has <code>google</code> in it:</p>\n\n<pre><code>my $pattern = qr/\n    Function1\\( (.*?) LAST\\);\n        /sx;\n\nif( $string =~ $pattern and $1 =~ /google\\.com/ ) {\n    ...\n    }\nelse {\n    say \"No match!\";\n    }\n</code></pre>\n\n<p>The problem with the regex approach is that you have to work extra hard to ensure that the part of the pattern that ends the function call doesn't also appear in the data. That is, if <code>LAST);</code> can be in one of those fields, this may fail. At that point you'll have better luck with something that parses the string step-by-step.</p>\n\n<hr/>\n\n<p>Here's a much more complicated answer that uses a powerful but often neglected parsing feature of regular expressions.</p>\n\n<ul>\n<li>A global match, <code>/g</code>, in scalar context remembers its ending position in the string.</li>\n<li>You can see that position with <code>pos()</code></li>\n<li>The <code>\\G</code> anchors the next part of the match at <code>pos()</code></li>\n<li>The <code>/c</code> option tells the match operator to not reset the position if the match fails</li>\n<li>With multiple regexes and <code>/c</code> you can try different things until one of them works.</li>\n</ul>\n\n<p>Here's a small demonstration of that. There's an outer <code>if</code> that checks that you're inside a function call. Once inside that <code>if</code> block, keep looping (here with <code>redo</code>, but that's just one way) while additional patterns can match. When you match the pattern for the end of the function call, break out of the loop (<code>last</code>).</p>\n\n<p>The meat is the pattern that looks for things inside parentheses. That pattern starts and ends with <code>\"</code>, then looks for characters that aren't quotes or for escaped quotes. This is the improvement from my previous program because the pattern won't terminate earlier than you intended. Note that I adjusted the URL value to have escaped quotes and <code>LAST);</code>, which would cause my prior solution to fail (maybe as a false positive).</p>\n\n<p>There's another benefit. I know which key in the function call has which value and all that ends up in a hash. If keys other than <code>URL</code> contained the string <code>google</code> you might get other false positives with my prior solutions:</p>\n\n<pre><code>$_ = &lt;&lt;'HERE';\nFunction1(\"query\",\n    \"URL=https://\\\"LAST);clients1.goggle.com/tbproxy...\",\n    \"TargetFrame=\",\n    \"Resource=1\",\n    \"RecContentType=text/proto\",\n    \"Referer=\",\n    \"Snapshot=t103.inf\",\n    LAST);\nHERE\n\n\nmy %hash;\nif( / Function1 \\( \\s* /xg ) {\n    LOOP: {\n        if( / \\G LAST \\s* \\) \\s* ; /xgc ) {\n            say \"Matched end\";\n            last;\n            }\n\n        if( / \\G \" ( (?: [^\"] | \\\\ \" )+ ) \" , \\s* /xgc ) {\n            my $found = $1;\n            my( $field, $value ) = split /=/, $found, 2;\n            $hash{$field} = $value;\n            redo;\n            }\n\n        warn \"Shouldn't be here!\\n\";\n        }\n    }\n\nuse Data::Dumper;\nsay Dumper( \\%hash );\n</code></pre>\n\n<p>Improve that by hiding it all in a subroutine (a good practice no matter which solution you use).</p>\n\n<pre><code>if( is_google($string) ) { say \"Found Google\" }\nelse                     { say \"Didn't find Google\" }\n\nsub is_google {\n    my( $string ) = @_;\n\n    my %hash;\n    if( / Function1 \\( \\s* /xg ) {\n        LOOP: {\n            if( / \\G \" ( (?: [^\"] | \\\\ \" )+ ) \" , \\s* /xgc ) {\n                my $found = $1;\n                my( $field, $value ) = split /=/, $found, 2;\n                $hash{$field} = $value;\n                redo;\n                }\n\n            if( / \\G LAST \\s* \\) \\s* ; /xgc ) {\n                say \"Matched end\";\n                last;\n                }\n\n            warn \"Shouldn't be here!\\n\";\n            }\n        }\n\n    return $hash{URL} =~ /google\\.com/ ? 1 : ();\n    }\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 10258449, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-v-Qh5nOBfjk/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPCo3FP8Gu5YRf97AlfnR1xKrF5XQ/mo/photo.jpg?sz=128", "display_name": "George", "link": "https://stackoverflow.com/users/10258449/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1535030640, "creation_date": 1534923827, "last_edit_date": 1534956274, "question_id": 51962026, "link": "https://stackoverflow.com/questions/51962026/how-to-use-a-capture-specific-strings-in-a-regular-expression", "title": "How to use a capture specific strings in a regular expression?", "body": "<p>Below is my regular expression:</p>\n\n<pre><code>Function1(.*?)(google)((.|\\n|\\r)*?)LAST\\);\n</code></pre>\n\n<p>I want to capture this entire function that includes spaces,newlines etc. I have bunch of functions inside my script but want to specifically capture function that contains \"google\" from entire list.</p>\n\n<pre><code>Function1(\"query\", \n    \"URL=https://clients1.google.com/tbproxy/af/query?client=Google+Chrome&amp;q=Chc2LjEuMTcxNS4xNDQyL2VuIChHR0xMKRMZPd2PDK1PW1YjLQScNYckIy0DFGhXJCMt1XOH3CQjLd4_k74kIy1QDijrJCMtdQCYzyQjLRkUiZIkIy3xrEvRJCMtc6vwHyQjLa44BcEkIy0ghfciJCMtgsHVLSQU\", \n    \"TargetFrame=\", \n    \"Resource=1\", \n    \"RecContentType=text/proto\", \n    \"Referer=\", \n    \"Snapshot=t103.inf\", \n    LAST);\n</code></pre>\n"}, {"tags": ["windows", "perl", "batch-file"], "answers": [{"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 3, "last_activity_date": 1534921796, "creation_date": 1534921796, "answer_id": 51961488, "question_id": 51961200, "link": "https://stackoverflow.com/questions/51961200/how-to-export-environment-variable-set-in-perl-script-to-batch-shell/51961488#51961488", "title": "How to export environment variable set in perl script to batch shell?", "body": "<p>Changes to environment variables can not effect the parent process, it's part of how they work, so nothing you do in the Perl script can change the environment variables of the batch script. However any child process, started with <code>exec()</code>, <code>system()</code> or <code>``</code> will see the changes you made in the Perl script.</p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 4, "last_activity_date": 1534950294, "last_edit_date": 1534950294, "creation_date": 1534944482, "answer_id": 51968008, "question_id": 51961200, "link": "https://stackoverflow.com/questions/51961200/how-to-export-environment-variable-set-in-perl-script-to-batch-shell/51968008#51968008", "title": "How to export environment variable set in perl script to batch shell?", "body": "<p>The only way to do this is to have the Perl script output shell statements, and for the shell to evaluate the output.</p>\n\n<p>Bash example:</p>\n\n<pre><code>$ export FOO=123\n$ echo $FOO\n123\n$ perl -e 'print \"export FOO=456\\n\"' ; echo $FOO\n123\n$ $(perl -e 'print \"export FOO=789\\n\"') ; echo $FOO\n789\n</code></pre>\n\n<p>Edit: I see OP is using Windows, so this answer doesn't apply :-(</p>\n"}], "owner": {"reputation": 89, "user_id": 3469951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mppEk.jpg?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/3469951/abhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1933, "favorite_count": 0, "accepted_answer_id": 51961488, "answer_count": 2, "score": 1, "last_activity_date": 1534950294, "creation_date": 1534920672, "question_id": 51961200, "link": "https://stackoverflow.com/questions/51961200/how-to-export-environment-variable-set-in-perl-script-to-batch-shell", "title": "How to export environment variable set in perl script to batch shell?", "body": "<p>I am executing a perl script on windows, using a batch script.\nI am setting below variable in batch script:</p>\n\n<pre><code>SET PATH_VAR=C:\\Users\\\n</code></pre>\n\n<p>I am able to access <code>PATH_VAR</code> in perl as below:</p>\n\n<pre><code>my $path1 = $ENV{'PATH_VAR'}\n</code></pre>\n\n<p>I would like to also export environment variables set in perl to batch. Like the inverse of what I am doing now. \nIs there a way to do that?</p>\n\n<p>PS:\nI tried this, but it doesn't work:</p>\n\n<pre><code>$ENV{'PATH_Z'}=\"Hello World\";\n</code></pre>\n"}, {"tags": ["perl", "posix"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534900429, "post_id": 51958463, "comment_id": 90867637, "body": "Re &quot;<i>However when $date = &#39;12/30/1900&#39;, it return week 52 not week 53.</i>&quot;, As it should. <a href=\"https://www.timeanddate.com/calendar/?year=1900\" rel=\"nofollow noreferrer\">calendar</a> &quot;%U The week number of the current year as a decimal number, range 00 to 53, starting with the first Sunday as the first day of week 01.&quot;"}, {"owner": {"reputation": 55, "user_id": 4547498, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/303a774c9266cdde531e8832f5c2af99?s=128&d=identicon&r=PG&f=1", "display_name": "hhy", "link": "https://stackoverflow.com/users/4547498/hhy"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534900576, "post_id": 51958463, "comment_id": 90867659, "body": "@ikegami Could you please suggest me the solution for this one?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534900611, "post_id": 51958463, "comment_id": 90867667, "body": "You have yet to identify a problem"}, {"owner": {"reputation": 55, "user_id": 4547498, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/303a774c9266cdde531e8832f5c2af99?s=128&d=identicon&r=PG&f=1", "display_name": "hhy", "link": "https://stackoverflow.com/users/4547498/hhy"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534900739, "post_id": 51958463, "comment_id": 90867693, "body": "yes, I could not identify the problem. As I understand, 12/30/1900 is Sunday, so it will be the start of new week. It should be 53."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534900774, "post_id": 51958463, "comment_id": 90867706, "body": "It is the start of a new week, but it&#39;s the start of week 52."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1534900842, "post_id": 51958463, "comment_id": 90867720, "body": "1900 starts on a monday; week 1 doesn&#39;t start until 1900-01-07.  and week 52 starts on 1900-12-30; not every year has a week 0 or a week 53"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 4547498, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/303a774c9266cdde531e8832f5c2af99?s=128&d=identicon&r=PG&f=1", "display_name": "hhy", "link": "https://stackoverflow.com/users/4547498/hhy"}, "edited": false, "score": 0, "creation_date": 1534901182, "post_id": 51958656, "comment_id": 90867799, "body": "You can see 12/31/1900 (Mon, Dec 31) is not part of week 52. It is week 53. You can check with above code. It is strange."}, {"owner": {"reputation": 55, "user_id": 4547498, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/303a774c9266cdde531e8832f5c2af99?s=128&d=identicon&r=PG&f=1", "display_name": "hhy", "link": "https://stackoverflow.com/users/4547498/hhy"}, "edited": false, "score": 0, "creation_date": 1534901398, "post_id": 51958656, "comment_id": 90867831, "body": "Thanks for your info. But our date is later than 1970-00-00T00:00:00Z."}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "reply_to_user": {"reputation": 55, "user_id": 4547498, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/303a774c9266cdde531e8832f5c2af99?s=128&d=identicon&r=PG&f=1", "display_name": "hhy", "link": "https://stackoverflow.com/users/4547498/hhy"}, "edited": false, "score": 0, "creation_date": 1534901689, "post_id": 51958656, "comment_id": 90867878, "body": "@hhy NOT all the years have 53 weeks, A year has 52 weeks and some remainder. This remainder is carried forward. So in the case above, you get <code>1899,1905,1911,1916,1922,1928,1933</code> etc etc have 53 weeks. All the rest in between have 52 weeks. This is not a bug"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534906309, "post_id": 51958656, "comment_id": 90868792, "body": "Updated answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 6, "last_activity_date": 1534906757, "last_edit_date": 1592644375, "creation_date": 1534900678, "answer_id": 51958656, "question_id": 51958463, "link": "https://stackoverflow.com/questions/51958463/get-week-of-year-the-first-day-of-week-is-sunday-could-not-return-week-53/51958656#51958656", "title": "Get week of year (the first day of week is Sunday) could not return week 53", "body": "<blockquote>\n<p><code>%U</code></p>\n<p>The week number of the current year as a decimal number, range 00 to 53, starting with the first Sunday as the first day of week 01.  See also <code>%V</code> and <code>%W</code>.</p>\n</blockquote>\n<p>By that definition, 1900-12-30 is part of week 52.</p>\n<p>You can verify this yourself using a <a href=\"https://www.timeanddate.com/calendar/?year=1900\" rel=\"nofollow noreferrer\">calendar of 1900</a>.</p>\n<ul>\n<li>Week 0 of 1900: Mon, Jan 1, 1900 to Sat, Jan 6, 1900</li>\n<li>Week 1 of 1900: Sun, Jan 7, 1900 to Sat, Jan 13, 1900</li>\n<li>...</li>\n<li>Week 51 of 1900: Sun, Dec 23, 1900 to Sat, Dec 29, 1900</li>\n<li>Week 52 of 1900: Sun, Dec 30, 1900 to Mon, Dec 31, 1900</li>\n</ul>\n<hr />\n<p>That said, it's a fluke that you are getting the right answer (<code>52</code>). You are passing <code>0</code> (<code>$year - 1900</code>) as the last argument to <code>timelocal</code>, and that refers to the year 2000, not the year 1900.</p>\n<p>This explains why you were getting <code>53</code> for <code>12/31/1900</code>. While 1900-12-31 is in week 52, 2000-12-31 starts week 53.</p>\n<p>To fix this, replace</p>\n<pre><code>timelocal( 0, 0, 0, $day, $month - 1, $year - 1900 )\n</code></pre>\n<p>with</p>\n<pre><code>timelocal( 0, 0, 0, $day, $month - 1, $year )\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 4547498, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/303a774c9266cdde531e8832f5c2af99?s=128&d=identicon&r=PG&f=1", "display_name": "hhy", "link": "https://stackoverflow.com/users/4547498/hhy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1534906757, "creation_date": 1534898635, "question_id": 51958463, "link": "https://stackoverflow.com/questions/51958463/get-week-of-year-the-first-day-of-week-is-sunday-could-not-return-week-53", "title": "Get week of year (the first day of week is Sunday) could not return week 53", "body": "<pre><code>use strict;\nuse Time::Local;\nuse POSIX qw(strftime);\n\nmy $date = '12/31/1899';\nmy ($month, $day, $year) = split '/', $date;\n\nmy $epoch = timelocal( 0, 0, 0, $day, $month - 1, $year - 1900 );\nmy $week  = strftime( \"%U\", localtime( $epoch ) );\n</code></pre>\n\n<p>printf \"Date: %s Week: %s\\n\", $date, $week;</p>\n\n<p>=> Date: 12/31/1899 Week: 53</p>\n\n<p>However when $date = '12/30/1900', it return week 52 not week 53.</p>\n\n<p>Could you please help me to point out the problem? Thanks.</p>\n"}, {"tags": ["perl", "testing", "command", "cgi"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1534891119, "post_id": 51956908, "comment_id": 90865666, "body": "Welcome to Stack Overflow. As James says, if you contact Gabor directly he will probably explain it to you. But let&#39;s see what else we can do for you here."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1534891526, "post_id": 51956908, "comment_id": 90865764, "body": "One of the failures is because your <i>cgi.pl</i> file isn&#39;t marked as executable. <code>chmod +x cgi.pl</code> should fix that one."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1534892115, "post_id": 51956908, "comment_id": 90865907, "body": "@Shawn good call. It&#39;s not Windows like I assumed. My error is different. Meh."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1534892064, "post_id": 51957730, "comment_id": 90865886, "body": "On a side-note, you might want to use this opportunity to install a virtual machine, possibly Virtual Box, and try around with Linux. Installing a fresh Ubuntu is very easy, and it will give you some practice on that as well. You also might want to not do CGI for new projects. I recommend <a href=\"https://www.youtube.com/watch?v=jKOqtRMT85\" rel=\"nofollow noreferrer\">this talk by Sawyer X</a>, which is a humorous take on a very serious matter. This stuff is old, and really not a lot of fun to work with. Do something more modern instead and enjoy working with Perl. It&#39;s great. :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534895102, "post_id": 51957730, "comment_id": 90866638, "body": "Re &quot;<i>On Windows, it doesn&#39;t work like that, so you need to call the perl executable directly.</i>&quot;, Or create a file association"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1534892252, "last_edit_date": 1534892252, "creation_date": 1534891936, "answer_id": 51957730, "question_id": 51956908, "link": "https://stackoverflow.com/questions/51956908/why-does-my-perl-unit-test-for-a-cgi-program-fail-all-its-tests/51957730#51957730", "title": "Why does my Perl unit test for a CGI program fail all its tests?", "body": "<p>I just happen to be booted into my Windows right now, and I see a similiar failure.</p>\n\n<p>The problem is very hard to spot for a beginner, but really very simple.</p>\n\n<blockquote>\n<pre><code>my ($out, $err, $exit) = capture { system \"./cgi.pl\" };\n</code></pre>\n</blockquote>\n\n<p>The way that the program is called is clearly very Linux-y. If you change that to say <code>perl cgi.pl</code> it will work. This is because the <code>./</code> part of the command tells the Linux shell to run the program <code>cgi.pl</code> in the current directory. It does that by looking for the file, seeing whether it has the executable flag, and then looks in the first line of the file. There, it finds the <a href=\"https://en.wikipedia.org/wiki/Shebang_(Unix)\" rel=\"nofollow noreferrer\"><em>shebang</em></a> (<code>#!/usr/bin/perl</code>), which tells it what program to run the file with.</p>\n\n<p>On Windows, it doesn't work like that, so you need to call the <code>perl</code> executable directly. In your case however, it's because <strong>the file is not executable</strong>.</p>\n\n<p>You can just change it like I said above, or you can set the executable flag on your program. Run this in the command line. It will mark your program as executable, and the OS will know what to do.</p>\n\n<pre><code>$ chmod u+x cgi.pl\n</code></pre>\n\n<p>If you go with the code change, remember you need to change it in two places.</p>\n\n<hr>\n\n<p>You <em>could have</em> infered that from the test output. One of the failing tests shows us the return value for <code>$err</code>, which is the STDERR output channel of the command.</p>\n\n<blockquote>\n<pre><code>#   Failed test 'stderr is empty'\n#   at cgi.t line 23.\n#          got: 'Can't exec \"./cgi.pl\": Permission denied at cgi.t line 17.\n# '\n#     expected: ''\n</code></pre>\n</blockquote>\n\n<p>But it takes a lot of experience to actually not be frustrated by so much failing test output to actually read the whole thing and on top of it understand what it could mean. For what it's worth, I didn't read it all either. I glanced over the test output to see I get the same, then read the code and spotted the <code>./cgi.pl</code>, which made me wonder. For some reason I also remembered I am right now on Windows. Probably because it was hard work to run it in the first place.</p>\n"}, {"tags": [], "owner": {"reputation": 55, "user_id": 10231117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/992b6fda78d900576ae09088a53cdd79?s=128&d=identicon&r=PG&f=1", "display_name": "Ornot", "link": "https://stackoverflow.com/users/10231117/ornot"}, "is_accepted": false, "score": 1, "last_activity_date": 1534936943, "creation_date": 1534936943, "answer_id": 51965760, "question_id": 51956908, "link": "https://stackoverflow.com/questions/51956908/why-does-my-perl-unit-test-for-a-cgi-program-fail-all-its-tests/51965760#51965760", "title": "Why does my Perl unit test for a CGI program fail all its tests?", "body": "<p>Now all command line are succesfully with the solution of @simbabque</p>\n\n<pre><code>perl cgi.t\n</code></pre>\n\n<p>1..2</p>\n\n<h1>Subtest: get</h1>\n\n<pre><code>1..5\nok 1 - GET\nok 2 - name\nok 3 - email\nok 4 - stderr is empty\nok 5 - exit code is 0\n</code></pre>\n\n<p>ok 1 - get</p>\n\n<h1>Subtest: post</h1>\n\n<pre><code>1..5\nok 1 - POST\nok 2 - language\nok 3 - creator\nok 4 - stderr is empty\nok 5 - exit code is 0\n</code></pre>\n\n<p>ok 2 - post</p>\n\n<p>and with this command:</p>\n\n<pre><code>prove cgi.t\n</code></pre>\n\n<p>cgi.t .. ok</p>\n\n<p>All tests successful.</p>\n\n<p>Files=1, Tests=2,  1 wallclock secs ( 0.11 usr  0.02 sys +  0.64 cusr  0.08 csys =  0.85 CPU)</p>\n\n<p>Result: PASS</p>\n"}], "owner": {"reputation": 55, "user_id": 10231117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/992b6fda78d900576ae09088a53cdd79?s=128&d=identicon&r=PG&f=1", "display_name": "Ornot", "link": "https://stackoverflow.com/users/10231117/ornot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 51957730, "answer_count": 2, "score": 2, "last_activity_date": 1534936943, "creation_date": 1534886718, "last_edit_date": 1534892384, "question_id": 51956908, "link": "https://stackoverflow.com/questions/51956908/why-does-my-perl-unit-test-for-a-cgi-program-fail-all-its-tests", "title": "Why does my Perl unit test for a CGI program fail all its tests?", "body": "<p>i would like to test a little program in perl .cgi</p>\n\n<p>this program is at this url:</p>\n\n<p><a href=\"https://perlmaven.com/testing-perl-cgi\" rel=\"nofollow noreferrer\">https://perlmaven.com/testing-perl-cgi</a></p>\n\n<p>this program is a general test and he say:</p>\n\n<p>\"it is enough to show how to test any CGI-script\"</p>\n\n<p>then i copy/paste the 2 cgi in the same directory and try the command line:</p>\n\n<pre><code>prove cgi.t\n</code></pre>\n\n<p>normally all successfull</p>\n\n<p>the error is:</p>\n\n<pre><code>     Failed test 'GET'\n    #   at cgi.t line 20.\n    #                   ''\n    #     doesn't match '(?^:&lt;tr&gt;&lt;td&gt;request_method&lt;/td&gt;&lt;td&gt;GET&lt;/td&gt;&lt;/tr&gt;)'\n\n    #   Failed test 'name'\n    #   at cgi.t line 21.\n    #                   ''\n    #     doesn't match '(?^:&lt;tr&gt;&lt;td&gt;name&lt;/td&gt;&lt;td&gt;foo&lt;/td&gt;&lt;/tr&gt;)'\n\n    #   Failed test 'email'\n    #   at cgi.t line 22.\n    #                   ''\n    #     doesn't match '(?^:&lt;tr&gt;&lt;td&gt;email&lt;/td&gt;&lt;td&gt;bar\\@corp.com&lt;/td&gt;&lt;/tr&gt;)'\n\n    #   Failed test 'stderr is empty'\n    #   at cgi.t line 23.\n    #          got: 'Can't exec \"./cgi.pl\": Permission denied at cgi.t line 17.\n    # '\n    #     expected: ''\n\n    #   Failed test 'exit code is 0'\n    #   at cgi.t line 24.\n    #          got: '-1'\n    #     expected: '0'\n    # Looks like you failed 5 tests of 5.\ncgi.t .. 1/2\n#   Failed test 'get'\n#   at cgi.t line 25.\n\n    #   Failed test 'POST'\n    #   at cgi.t line 43.\n    #                   ''\n    #     doesn't match '(?^:&lt;tr&gt;&lt;td&gt;request_method&lt;/td&gt;&lt;td&gt;POST&lt;/td&gt;&lt;/tr&gt;)'\n\n    #   Failed test 'language'\n    #   at cgi.t line 44.\n    #                   ''\n    #     doesn't match '(?^:&lt;tr&gt;&lt;td&gt;language&lt;/td&gt;&lt;td&gt;Perl&lt;/td&gt;&lt;/tr&gt;)'\n\n    #   Failed test 'creator'\n    #   at cgi.t line 45.\n    #                   ''\n    #     doesn't match '(?^:&lt;tr&gt;&lt;td&gt;creator&lt;/td&gt;&lt;td&gt;TimToady&lt;/td&gt;&lt;/tr&gt;)'\n\n    #   Failed test 'stderr is empty'\n    #   at cgi.t line 46.\n    #          got: 'sh: ./cgi.pl: Permission denied\n    # '\n    #     expected: ''\n\n    #   Failed test 'exit code is 0'\n    #   at cgi.t line 47.\n    #          got: '32256'\n    #     expected: '0'\n    # Looks like you failed 5 tests of 5.\n\n#   Failed test 'post'\n#   at cgi.t line 48.\n# Looks like you failed 2 tests of 2.\ncgi.t .. Dubious, test returned 2 (wstat 512, 0x200)\nFailed 2/2 subtests\n\nTest Summary Report\n-------------------\ncgi.t (Wstat: 512 Tests: 2 Failed: 2)\n  Failed tests:  1-2\n  Non-zero exit status: 2\nFiles=1, Tests=2,  1 wallclock secs ( 0.12 usr  0.01 sys +  0.44 cusr  0.06 csys                                                                                                                                                              =  0.63 CPU)\nResult: FAIL\n</code></pre>\n\n<p>Thanks in advance,</p>\n\n<p>Ornot</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 1, "creation_date": 1534885922, "post_id": 51956732, "comment_id": 90864154, "body": "Your variable <code>$self-&gt;{&#39;shmJobDetails&#39;}</code> will have the same name instead any function where you passed <code>$self</code> so why do you rewrite the variable name? The compiler is telling you that you are using a variable <code>$shmJobDetails</code> which is never defined anywhere in your code, which is true, as this is not a variable, you just have <code>shmJobDetails</code> being one of the key inside the <code>$self</code> hash reference. Also <code>$self</code> smells about object orientation, so have a look at that."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1534886502, "post_id": 51956732, "comment_id": 90864327, "body": "Is that all they told you in your code review? You&#39;re missing a good deal of stuff."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1534886828, "post_id": 51956732, "comment_id": 90864433, "body": "Note: <code>sub func(...) {  }</code> is <i>not a signature</i>, as the term is understood in other languages.  These are <i>prototypes</i> and they are subtly and very seriously different.  Besides, they (prototypes) don&#39;t do anything in a class, what this appears to be related to, so there are far bigger questions."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534893591, "post_id": 51956732, "comment_id": 90866272, "body": "Tip: <code>if ( $#{ $self-&gt;{&#39;shmJobDetails&#39;} } &gt; -1 )</code> can also be written as <code>if ( @{ $self-&gt;{shmJobDetails} } )</code>"}], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 1, "last_activity_date": 1534887154, "last_edit_date": 1534887154, "creation_date": 1534886513, "answer_id": 51956880, "question_id": 51956732, "link": "https://stackoverflow.com/questions/51956732/perlissue-passing-self/51956880#51956880", "title": "Perl:Issue passing self", "body": "<p>There's no variable <code>$shmJobDetails</code> so you get the compilation error. Do the same thing that you were doing before:</p>\n\n<pre><code>sub storeShmcoreservJobsLogs {\n    my($self,$dbh)=@_;\n\n    if ( $#{ $self-&gt;{'shmJobDetails'} } &gt; -1 ) {\n</code></pre>\n\n<p>Now you're passing the complete object and the subroutine can use any part of the object it needs.</p>\n\n<p>You might want to make some object methods to answer the questions you'll ask it instead of accessing its internals. That method can do all the work to figure out true or false:</p>\n\n<pre><code>sub storeShmcoreservJobsLogs {\n    my($self,$dbh)=@_;\n\n    if ( $self-&gt;has_jobs ) {\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1534887671, "creation_date": 1534887671, "answer_id": 51957065, "question_id": 51956732, "link": "https://stackoverflow.com/questions/51956732/perlissue-passing-self/51957065#51957065", "title": "Perl:Issue passing self", "body": "<p>The use of a lexical variable called <code>$self</code> implies that you're using object-oriented methods, but your code is far from being object-oriented</p>\n\n<p>Are you sure that you understand the points being made in the code review? It's looking like you're writing a <em>method</em>, and the fields should be extracted from the hash <em>within the method</em> </p>\n\n<p>The method definition should be more like this</p>\n\n<pre><code>sub store_shmcoreserv_jobs_logs {\n    my $self = shift;\n    my ($id_map, $dbh) = @_;\n\n    my @fields = @{$self}{qw/ shmJobDetails nhcJobDetails cppDetails siteId /};\n\n    ...\n</code></pre>\n\n<p>while the call should look like this</p>\n\n<pre><code>$self-&gt;storeShmcoreservJobsLogs($neTypesIdMap, $dbh)\n</code></pre>\n\n<p>All of this is essential to Perl object-oriented programming. You should study <a href=\"https://perldoc.perl.org/perlobj.html\" rel=\"nofollow noreferrer\"><code>perlobj</code></a> together with the rest of the <a href=\"https://perldoc.perl.org/index-language.html\" rel=\"nofollow noreferrer\">Perl language reference</a></p>\n"}], "owner": {"reputation": 129, "user_id": 3414559, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1480602384/picture?type=large", "display_name": "Ray", "link": "https://stackoverflow.com/users/3414559/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1534887671, "creation_date": 1534885711, "last_edit_date": 1534886578, "question_id": 51956732, "link": "https://stackoverflow.com/questions/51956732/perlissue-passing-self", "title": "Perl:Issue passing self", "body": "<p>I'm having an issue with a recent code review. I've been advised to change the following function call:</p>\n\n<pre><code> storeShmcoreservJobsLogs(\n    $self-&gt;{'shmJobDetails'},\n    $self-&gt;{'nhcJobDetails'},\n    $self-&gt;{'cppDetails'},\n    $self-&gt;{'siteId'},\n    $neTypesIdMap,\n    $dbh\n);\n</code></pre>\n\n<p>To only use two arguments, being <code>$self</code> and <code>$dbh</code>. So I have coded as follows</p>\n\n<pre><code>storeShmcoreservJobsLogs($self, $dbh);\n</code></pre>\n\n<p>And the function signature as follows:</p>\n\n<pre><code>sub storeShmcoreservJobsLogs($$) {\n  my($self, $dbh) = @_;\n\n  if ( $#{$self-&gt;$shmJobDetails} &gt; -1 ) {\n</code></pre>\n\n<p>The <code>if</code> statement unfortunately throws an error with the value of <code>$shmJobDetails</code> when I test the change</p>\n\n<blockquote>\n  <p>Global symbol \"$shmJobDetails\" requires explicit package name at /data/ddp/current/analysis/TOR/elasticsearch/handlers/misc/Shm.pm line 148.</p>\n</blockquote>\n\n<p>So I must have misinterpreted the instruction. Is anything obvious wrong?</p>\n"}, {"tags": ["perl", "diff"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1534884899, "post_id": 51956524, "comment_id": 90863738, "body": "<a href=\"https://www.gnu.org/software/diffutils/manual/diffutils.html#Binary\" rel=\"nofollow noreferrer\">gnu.org/software/diffutils/manual/diffutils.html#Binary</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1534887172, "post_id": 51956524, "comment_id": 90864555, "body": "<i>Any</i> idea, clue, or suspicion of why that is there?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534894178, "post_id": 51956524, "comment_id": 90866397, "body": "With GNU <code>diff</code>, you can use <code>-a</code> or <code>--text</code> to force a text comparison (i.e. to get the usual output)."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 4, "last_activity_date": 1535003646, "last_edit_date": 1535003646, "creation_date": 1534886432, "answer_id": 51956861, "question_id": 51956524, "link": "https://stackoverflow.com/questions/51956524/tkdiff-and-diff-does-not-work-because-of-0-perl/51956861#51956861", "title": "tkdiff and diff does not work because of &quot;\\0&quot; [Perl]", "body": "<p>The code is padding the value with <a href=\"https://en.wikipedia.org/wiki/Null_character\" rel=\"nofollow noreferrer\">null characters</a>.  While they do have some uses I am not sure what they do for a living in a log file. </p>\n\n<p>As melpomene's link to <a href=\"https://www.gnu.org/software/diffutils/manual/diffutils.html#Binary\" rel=\"nofollow noreferrer\">diffutils#Binary</a> shows those tools are affected by the presence of these characters, and firstly by deciding that a file is binary. The manual offers <code>-a</code> switch under which <code>diff</code> still compares files as text, but this only helps by reporting differences in more detail; the files <em>are</em> different</p>\n\n<pre><code>perl -wE'say \"noway\"'   &gt; t1.out\nperl -wE'say \"no\\0way\"' &gt; t2.out\nwc -c t1.out t2.out              #--&gt; 6 and 7\n</code></pre>\n\n<p>So you'd have to remove those null characters.  </p>\n\n<p>If there is a good reason for them to be printed then this is one way to clean them out</p>\n\n<pre><code>perl -pe's/\\x00//g' t2.out &gt; nonull_t2.out\n</code></pre>\n\n<p>otherwise just change the print so that they are not there in the first place.</p>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 51956861, "answer_count": 1, "score": 1, "last_activity_date": 1539533428, "creation_date": 1534884619, "last_edit_date": 1539533428, "question_id": 51956524, "link": "https://stackoverflow.com/questions/51956524/tkdiff-and-diff-does-not-work-because-of-0-perl", "title": "tkdiff and diff does not work because of &quot;\\0&quot; [Perl]", "body": "<p>I stumbled upon the following piece of code in Perl:</p>\n\n<pre><code>my $val = $x-&gt;insertEl($data) or die $y-&gt;ErrorMessage();\nprint \"\\0$val\\0\";\n</code></pre>\n\n<p>What does <code>\\0</code> mean in this scenario?\nThis script creates a debug log which the <code>\\0$val\\</code> is written into this log (I changed the <code>debugFun()</code> into <code>print</code> so it will be easier to explain). If I try to tkdiff with some other file it will fail with the following error: </p>\n\n<pre><code>diff failed: Files file1 and file2 differ. Child process exited abnormally\n</code></pre>\n\n<p>Also if I use the regular diff command it will print:</p>\n\n<pre><code>diff failed: Files file1 and file2 differ.\n</code></pre>\n\n<p>If I'll remove the <code>\\0</code> it will print properly, and tkdiff and diff will work. So the problem is <code>\\0</code> but why?</p>\n"}, {"tags": ["arrays", "perl", "cgi"], "comments": [{"owner": {"reputation": 666, "user_id": 6362442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uQXZC.jpg?s=128&g=1", "display_name": "ya.ymer", "link": "https://stackoverflow.com/users/6362442/ya-ymer"}, "edited": false, "score": 0, "creation_date": 1534867061, "post_id": 51952558, "comment_id": 90855408, "body": "What are you need? Example of SQL query or example of parser?"}, {"owner": {"reputation": 1102, "user_id": 4208719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cd078e79ba74af02fe5692190dbc73d3?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro ", "link": "https://stackoverflow.com/users/4208719/pedro"}, "reply_to_user": {"reputation": 666, "user_id": 6362442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uQXZC.jpg?s=128&g=1", "display_name": "ya.ymer", "link": "https://stackoverflow.com/users/6362442/ya-ymer"}, "edited": false, "score": 0, "creation_date": 1534867210, "post_id": 51952558, "comment_id": 90855479, "body": "@ya.ymer how to read the values from the url :/"}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1534867565, "post_id": 51952558, "comment_id": 90855682, "body": "What framework/middlework do you use for your Perl program getting the HTTP request? Whatever it is it certainly has a method to retrieve all HTTP content, including the <code>id</code> parameter, you will get a string that you can then split on <code>.</code> for your needs."}, {"owner": {"reputation": 1102, "user_id": 4208719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cd078e79ba74af02fe5692190dbc73d3?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro ", "link": "https://stackoverflow.com/users/4208719/pedro"}, "reply_to_user": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1534868321, "post_id": 51952558, "comment_id": 90856117, "body": "@PatrickMevzek using CGi, I know that I can get the values using -&gt;param but I don&#39;t know how to loop thru them"}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 2, "creation_date": 1534868436, "post_id": 51952558, "comment_id": 90856185, "body": "Besides being a bad idea, did you look at <code>CGI.pm</code> manual (<code>perldoc CGI</code>) to stumble upon the <code>param</code> or <code>multi_param</code> methods? What is not clear about them? You do not loop, you get a string, you have to split it, see <code>perldoc -f split</code>. And then <code>for</code>, <code>foreach</code>, or <code>while</code> to loop."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1534871831, "last_edit_date": 1534871831, "creation_date": 1534870269, "answer_id": 51953378, "question_id": 51952558, "link": "https://stackoverflow.com/questions/51952558/how-to-read-multiple-ids-from-url-in-cgi/51953378#51953378", "title": "How to read multiple ids from URL in cgi", "body": "<p>There's only one value. Extract it, and split the string at the commas.</p>\n\n<pre><code>use URI             qw( );\nuse URI::QueryParam qw( );\n\nmy $url = URI-&gt;new('signout.cgi?id=98,100,50,3,2,5,6', 'http');\nmy $id_param = $url-&gt;query_param('id');\nmy @ids = split /,/, $id_param;\n</code></pre>\n\n<p>In the comments, you seem to be saying you don't have a URL at all, but a CGI.pm object.</p>\n\n<pre><code>use CGI qw( );\n\nmy $cgi = CGI-&gt;new();\nmy $id_param = $cgi-&gt;param('id');\nmy @ids = split /,/, $id_param;\n</code></pre>\n"}], "owner": {"reputation": 1102, "user_id": 4208719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cd078e79ba74af02fe5692190dbc73d3?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro ", "link": "https://stackoverflow.com/users/4208719/pedro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 51953378, "answer_count": 1, "score": -1, "last_activity_date": 1534871831, "creation_date": 1534867006, "last_edit_date": 1534868733, "question_id": 51952558, "link": "https://stackoverflow.com/questions/51952558/how-to-read-multiple-ids-from-url-in-cgi", "title": "How to read multiple ids from URL in cgi", "body": "<p>I'm passing thru a URL multiple values for id. and I'm trying to read all of those values and run a mysql query for each of the value.</p>\n\n<p>The values came from a select all option on a different page. </p>\n\n<p>This is my url</p>\n\n<pre><code>signout.cgi?id=98,100,50,3,2,5,6\n</code></pre>\n\n<p>How can I read the values from the url?</p>\n"}, {"tags": ["perl", "math", "probability"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1534864929, "post_id": 51951628, "comment_id": 90854126, "body": "I&#39;m voting to close this question as off-topic because it is not about a specific programming problem. It would be more appropriate on <i>Code Review</i>."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1534865352, "post_id": 51951628, "comment_id": 90854382, "body": "@Borodin I&#39;m guessing the question is how often you will get <i>all</i> correct pairs if you pull out all 20 socks 2 at a time?  but it certainly isn&#39;t clear, and that isn&#39;t quite what the code does"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1534865563, "post_id": 51951628, "comment_id": 90854493, "body": "I don&#39;t see why this bothers you. Having taken one sock, there are ten remaining socks which will match and nine which will not. The ratio is 10:9 or 1.11... But your code needs some work and you should submit it to <a href=\"https://codereview.stackexchange.com/\"><b><i>Code Review</i></b></a> to be put on-track to write better code. In particular, declaring <i>every</i> variable in a block at the top of your program is damaging and indicative of a very old-fashioned style. It pretty much nullifies the advantages of <code>use strict</code>, which should only ever be commented out in private and without fear of interruption!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1534865868, "post_id": 51951628, "comment_id": 90854665, "body": "@ysth: Ah I see. Thank you, I had become sheep-like and assumed another variant of all previous sock/ball/marble blind-draw problems. As you say the problem isn&#39;t properly defined. I guess <i>&quot;If they&#39;re paired randomly&quot;</i> needs elaboration. But not here!"}, {"owner": {"reputation": 41, "user_id": 5207891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTXux.jpg?s=128&g=1", "display_name": "Pete G", "link": "https://stackoverflow.com/users/5207891/pete-g"}, "edited": false, "score": 0, "creation_date": 1534865990, "post_id": 51951628, "comment_id": 90854758, "body": "I&#39;m not a programmer like you guys.  I&#39;m very happy to have the logic explained as mob did.  The code was essentially functional, and I was wondering if there were mathematical errors contained within it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1534871427, "post_id": 51951628, "comment_id": 90857626, "body": "@Pete: <i>&quot;I&#39;m not a programmer like you guys&quot;</i> Writing software makes you a programmer, and your questions on <i>Stack Overflow</i> are subject to the same scrutiny as anyone else&#39;s. You mustn&#39;t hide behind a &quot;not a real programmer&quot; shield in the hope of escaping critique. You have clearly learned a lot, and I suggest you continue your study so that you can better respect your own work. You should think of Stack Overflow as being like Wikipedia: it is a repository of question and answer facts, and you should be at least competent in your work."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1534876967, "post_id": 51951628, "comment_id": 90860211, "body": "I&#39;d encourage you to also work this out with pen and paper :)"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1534865004, "post_id": 51951731, "comment_id": 90854168, "body": "Perhaps it&#39;s better not to encourage off-topic questions?"}, {"owner": {"reputation": 41, "user_id": 5207891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTXux.jpg?s=128&g=1", "display_name": "Pete G", "link": "https://stackoverflow.com/users/5207891/pete-g"}, "edited": false, "score": 0, "creation_date": 1534865232, "post_id": 51951731, "comment_id": 90854319, "body": "I had reasoned that if I pull out an R and an L it would leave behind an equal number of Rs and Ls, so still equal odds of pairing next time. But if I pull out, say, 2x Rs it leaves an unbalanced remainder which would slightly favour an incorrect pairing.  My script pairs 2 at a time and then reshuffles."}, {"owner": {"reputation": 41, "user_id": 5207891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTXux.jpg?s=128&g=1", "display_name": "Pete G", "link": "https://stackoverflow.com/users/5207891/pete-g"}, "edited": false, "score": 0, "creation_date": 1534865451, "post_id": 51951731, "comment_id": 90854439, "body": "I can now see mob&#39;s logic and agree that&#39;s how it works.  Good enough for me.  Faulty logic on my part.  Cheers."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1534865917, "post_id": 51951731, "comment_id": 90854701, "body": "Also, perhaps it&#39;s better not to down-vote answers to off-topic questions?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 41, "user_id": 5207891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTXux.jpg?s=128&g=1", "display_name": "Pete G", "link": "https://stackoverflow.com/users/5207891/pete-g"}, "edited": false, "score": 0, "creation_date": 1534865976, "post_id": 51951731, "comment_id": 90854746, "body": "@Pete: <i>&quot;My script pairs 2 at a time and then reshuffles&quot;</i>. There is no need to reshuffle."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1534864204, "creation_date": 1534864204, "answer_id": 51951731, "question_id": 51951628, "link": "https://stackoverflow.com/questions/51951628/the-results-of-my-simulation-are-non-intuitive/51951731#51951731", "title": "The results of my simulation are non-intuitive", "body": "<p>Say you pick out an R sock from the drawer.</p>\n\n<p>Now there are 10 L socks left (which would make a correct pairing)</p>\n\n<p>and there are 9 R socks left (incorrect pairing)</p>\n\n<p>So 10 correct : 9 incorrect is about  1.11:1.</p>\n\n<p>You didn't say what number you were expecting but if your script says 1.12:1, that is close to the correct results.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 5207891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTXux.jpg?s=128&g=1", "display_name": "Pete G", "link": "https://stackoverflow.com/users/5207891/pete-g"}, "edited": false, "score": 0, "creation_date": 1534866623, "post_id": 51952272, "comment_id": 90855142, "body": "I wasn&#39;t actually meaning that.  I meant if blindfolded I paired all the 20 socks in the drawer, what would be the ratio of correct pairs to incorrect pairs?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 41, "user_id": 5207891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTXux.jpg?s=128&g=1", "display_name": "Pete G", "link": "https://stackoverflow.com/users/5207891/pete-g"}, "edited": false, "score": 0, "creation_date": 1534871505, "post_id": 51952272, "comment_id": 90857654, "body": "@Pete: That sounds exactly like what <b>ysth</b> has assumed. It&#39;s not what your question says. (I&#39;ve added an update to your question that reflects the words of your clarification here.)"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1534877954, "post_id": 51952272, "comment_id": 90860684, "body": "@Borodin no, sounds to me like I was wrong, and he does want total ratio of paired to unpaired socks, but for when you do remove all the pairs, not just the first (though from his results, the number is the same)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1534890911, "post_id": 51952272, "comment_id": 90865611, "body": "@ysth: I thought that was your original interpretation; it certainly sounds the same, but your code throws all socks back in the drawer before picking another pair."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 1, "last_activity_date": 1534866092, "creation_date": 1534866092, "answer_id": 51952272, "question_id": 51951628, "link": "https://stackoverflow.com/questions/51951628/the-results-of-my-simulation-are-non-intuitive/51952272#51952272", "title": "The results of my simulation are non-intuitive", "body": "<p>I'm guessing the question is how often you will get all correct pairs if you pull out all 20 socks 2 at a time? But it certainly isn't clear, and that isn't quite what the code does.  You seem to be totalling up good pairs and bad pairs found in your inner loop, intead of totalling up good results vs bad results after the inner loop.</p>\n\n<p>There is no point in reshuffling each time you've removed socks.</p>\n\n<p>Try to declare variables in the smallest scope possible.</p>\n\n<p>FWIW here's what I would have done:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse List::Util 'shuffle';\n\nmy $attempts = 1000000;\nmy $pairs = 10;\nmy @socks = (('R') x $pairs, ('L') x $pairs);\n\nmy $correct_pairings = 0;\nfor my $attempt (1..$attempts) {\n    my $picked_socks = join '', shuffle @socks;\n    ++$correct_pairings if $picked_socks =~ /^(?:(.)\\1){$pairs}/;\n}\nprint \"$correct_pairings correct pairings in $attempts attempts\\n\";\n</code></pre>\n\n<p>which shows getting 10 matched pairs less than .14% of the time.</p>\n"}], "owner": {"reputation": 41, "user_id": 5207891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTXux.jpg?s=128&g=1", "display_name": "Pete G", "link": "https://stackoverflow.com/users/5207891/pete-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1534870969, "creation_date": 1534863898, "last_edit_date": 1592644375, "question_id": 51951628, "link": "https://stackoverflow.com/questions/51951628/the-results-of-my-simulation-are-non-intuitive", "title": "The results of my simulation are non-intuitive", "body": "<p>A simple question has been bugging me and I don't know how to do the mathematics to prove it, so I wrote a simple Perl program to approximate an answer and I just don't agree with its results.</p>\n<p>Am I wrong or is my script lacking something?</p>\n<h3>Problem</h3>\n<p>10 pairs of identical socks, except they're either left or right. If they're paired randomly, what is the probability of a correct pairing versus an incorrect pairing?</p>\n<h3>Update</h3>\n<p><em>I meant if blindfolded I paired all the 20 socks in the drawer, what would be the ratio of correct pairs to incorrect pairs?</em></p>\n<p>My script indicates about 1.12 to 1 correct to incorrect ratio.</p>\n<p>Is it right?</p>\n<pre><code>#!/usr/bin/perl\n#SockCruncher\n\n#use strict;\nuse warnings;\nuse List::Util 'shuffle';\n\nmy @tumble_dryer = (R,R,R,R,R,R,R,R,R,R,L,L,L,L,L,L,L,L,L,L);\nmy @rand_socks = shuffle(@tumble_dryer);\nmy $sock_pop1;\nmy $sock_pop2;\nmy $pair_counter = 1;\nmy @rev_rand_socks;\nmy $good_pair = 0;\nmy $bad_pair = 0;\nmy $counter = 0;\n\nopen (OUT,'&gt;pairing.txt') or die (&quot;Can't open pairing.txt for writing\\n&quot;);\nprint OUT &quot;Sock Sorter\\n-----------\\n\\n&quot;;\nprint OUT &quot;10 pairs of socks all identical appart from them being either left or right.  10 left &amp; 10 right.\\n&quot;;\nprint OUT &quot;The 20 socks are shuffled in an array and the first 2 popped out.\\n&quot;;\nprint OUT &quot;The remaining socks are shuffled again and the first 2 popped out..... and so on.\\n\\n&quot;;\n\nwhile ($counter &lt; 100000) {\n\n    while ($pair_counter &lt;= 10) {\n        print OUT &quot;Socks : &quot;;\n        print OUT join(&quot;,&quot;, @rand_socks);\n        @rev_rand_socks = reverse @rand_socks;  #Just done so the output file looks better. The LHS 2 elements are popped and eventually spliced off.\n        $sock_pop1 = pop @rev_rand_socks;\n        $sock_pop2 = pop @rev_rand_socks;\n        print OUT &quot; (P$pair_counter : $sock_pop1.$sock_pop2)   &quot;;\n        if (($sock_pop1 eq &quot;L&quot;) &amp;&amp; ($sock_pop2 eq &quot;R&quot;)) {$good_pair = $good_pair +1;}\n        if (($sock_pop1 eq &quot;R&quot;) &amp;&amp; ($sock_pop2 eq &quot;L&quot;)) {$good_pair = $good_pair +1;}\n        if (($sock_pop1 eq &quot;L&quot;) &amp;&amp; ($sock_pop2 eq &quot;L&quot;)) {$bad_pair = $bad_pair +1;}\n        if (($sock_pop1 eq &quot;R&quot;) &amp;&amp; ($sock_pop2 eq &quot;R&quot;)) {$bad_pair = $bad_pair +1;}\n        splice @rand_socks, 0, 2;\n        @rand_socks = shuffle(@rand_socks);\n        $pair_counter = $pair_counter + 1;\n    }\n    print OUT &quot;  Good pairs : $good_pair   Bad pairs : $bad_pair\\n&quot;;\n    $counter = $counter + 1;\n    $pair_counter = 1;\n    @tumble_dryer = (R,R,R,R,R,R,R,R,R,R,L,L,L,L,L,L,L,L,L,L);\n    @rand_socks = shuffle(@tumble_dryer);\n}\nmy $ratio = $good_pair/$bad_pair;\nprint &quot;\\nGood pairs = $good_pair  Bad pairs = $bad_pair    Good pair to bad pair ratio : $ratio.\\n&quot;;\nclose (OUT);\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1534863483, "post_id": 51950036, "comment_id": 90853176, "body": "I recommend <a href=\"https://perldoc.perl.org/index-language.html\" rel=\"nofollow noreferrer\"><i>reading the documentation</i></a> for a language rather than guessing at its syntax, especially before asking the world for help. Perl uses <i>regular expressions</i> after the fashion of awk and sed. There is no reason to assume that a shell glob syntax is appropriate here."}], "answers": [{"tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": true, "score": 1, "last_activity_date": 1534918512, "last_edit_date": 1534918512, "creation_date": 1534860181, "answer_id": 51950488, "question_id": 51950036, "link": "https://stackoverflow.com/questions/51950036/perl-replace-string-in-file-using-wildcard/51950488#51950488", "title": "Perl replace string in file using wildcard", "body": "\n\n<p>Perl's <code>s///</code> uses a <em>regular expression pattern</em> to match the target, not a shell glob string.</p>\n\n<p>Instead of <code>*</code>, try <code>.*</code> like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>perl -pi -e 's/This.*/'\"This is a modified text file.\"'/g' $file\n</code></pre>\n\n<p><code>.*</code> matches zero or occurrences of any character except linefeed <code>LF</code> or <code>\"\\n\"</code>.</p>\n\n<p>Be careful, because it will match the substring <em>anywhere</em> in the string. So this string:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>If This is a text file\n</code></pre>\n\n<p>will become this string:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>If This is a modified text file\n</code></pre>\n\n<p>Therefore if you want to match beginning of line, then use an <em>anchor</em> <code>^</code> which insists that the rest of the pattern must match at the start of the string</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>perl -pi -e 's/^This.*/'\"This is a modified text file.\"'/g' $file\n</code></pre>\n"}], "owner": {"reputation": 515, "user_id": 9924807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f0f90953a0e6b0919eb84acedca3c6d?s=128&d=identicon&r=PG&f=1", "display_name": "user9924807", "link": "https://stackoverflow.com/users/9924807/user9924807"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1171, "favorite_count": 0, "accepted_answer_id": 51950488, "answer_count": 1, "score": 0, "last_activity_date": 1534918512, "creation_date": 1534858652, "question_id": 51950036, "link": "https://stackoverflow.com/questions/51950036/perl-replace-string-in-file-using-wildcard", "title": "Perl replace string in file using wildcard", "body": "<p>I'm new to Perl and trying to replace a line in a text file using a wildcard. Example file:</p>\n\n<pre><code>This is a text file.\n</code></pre>\n\n<p>My working (non-wildcard) example:</p>\n\n<pre><code>file=/home/test.user/test.txt\nperl -pi -e 's/This is a text file./'\"This is a modified text file.\"'/g' $file\n</code></pre>\n\n<p>Now trying to edit with a wildcard:</p>\n\n<pre><code>perl -pi -e 's/This*/'\"This is a modified text file.\"'/g' $file\n</code></pre>\n\n<p>This is incorrect, and outputs:</p>\n\n<pre><code>This is a modified text file. is a text file.\n</code></pre>\n\n<p>How can I use a wildcard search with <code>/This*/</code>?</p>\n"}, {"tags": ["perl", "compiler-errors", "syntax-error", "cgi"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 1, "creation_date": 1534858839, "post_id": 51950005, "comment_id": 90850013, "body": "remove the dereference <code>-&gt;</code>, you are trying to treat what is inside of <code>@{ }</code> as an array reference by de-referencing it with <code>-&gt;</code>."}, {"owner": {"reputation": 55, "user_id": 10231117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/992b6fda78d900576ae09088a53cdd79?s=128&d=identicon&r=PG&f=1", "display_name": "Ornot", "link": "https://stackoverflow.com/users/10231117/ornot"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1534860755, "post_id": 51950005, "comment_id": 90851360, "body": "@Hunter McMillen  thanks you for your prompt answer, it works fine immediately."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1534872165, "post_id": 51950005, "comment_id": 90857919, "body": "@Hunter: You&#39;re suggesting <code>@{$FORMAT{$name}}[1]</code>? I think that&#39;s very unlikely. <code>$FORMAT{$name}-&gt;[1]</code> or <code>$FORMAT{$name}[1]</code> are much more probable."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1534872312, "post_id": 51951190, "comment_id": 90858002, "body": "Note that <code>@{$FORMAT{$name}}[1]</code> is a single-element array slice, and should produce a warning. You probably meant <code>${$FORMAT{$name}}[1] </code>, and I think <code>$FORMAT{$name}[1]</code> is probably what is wanted."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1534885318, "last_edit_date": 1534885318, "creation_date": 1534862493, "answer_id": 51951190, "question_id": 51950005, "link": "https://stackoverflow.com/questions/51950005/cgi-error-cant-use-an-array-as-a-reference/51951190#51951190", "title": "CGI error Can&#39;t use an array as a reference", "body": "<p>As you say, the problem is here:</p>\n\n<pre><code>@{$FORMAT{$name}}-&gt;[1]\n</code></pre>\n\n<p>It appears that <code>$FORMAT{$name}</code> is expected to contain an array reference. And you want to get the second element from the referenced array. There are (at least!) two ways to do this.</p>\n\n<p>You can dereference the array reference to get an array and then use standard array indexing brackets:</p>\n\n<pre><code>@{$FORMAT{$name}}[1]\n</code></pre>\n\n<p>Or you can use the deferencing arrow along with array indexing brackets:</p>\n\n<pre><code>$FORMAT{$name}-&gt;[1]\n</code></pre>\n\n<p>What you can't do (as you've found) is to use both syntaxes simultaneously :-)</p>\n\n<p><strong>Update:</strong> As Borodin points out in a comment, my first solution is incorrect. When accessing a single element from an array, you should change the <code>@</code> to a <code>$</code>. So it should actually be:</p>\n\n<pre><code>${$FORMAT{$name}}[1]\n</code></pre>\n\n<p>And in my second solution, the arrow is actually optional (dereferencing arrows between two sets of brackets always are), so you can write:</p>\n\n<pre><code>$FORMAT{$name}[1]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 10231117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/992b6fda78d900576ae09088a53cdd79?s=128&d=identicon&r=PG&f=1", "display_name": "Ornot", "link": "https://stackoverflow.com/users/10231117/ornot"}, "edited": false, "score": 0, "creation_date": 1535563152, "post_id": 52082899, "comment_id": 91116194, "body": "on the windows server that is perl version 5.8.8 and on the debian stretch perl version 5.24.1"}], "tags": [], "owner": {"reputation": 55, "user_id": 10231117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/992b6fda78d900576ae09088a53cdd79?s=128&d=identicon&r=PG&f=1", "display_name": "Ornot", "link": "https://stackoverflow.com/users/10231117/ornot"}, "is_accepted": false, "score": 0, "last_activity_date": 1535562833, "creation_date": 1535562833, "answer_id": 52082899, "question_id": 51950005, "link": "https://stackoverflow.com/questions/51950005/cgi-error-cant-use-an-array-as-a-reference/52082899#52082899", "title": "CGI error Can&#39;t use an array as a reference", "body": "<p>my cgi called webadmin.cgi now is on ActivePerl with Xampp on my pc windows 7.</p>\n\n<p>this one works (run perfectly) in local test with the same error:</p>\n\n<pre><code>print &amp;select(\"$id-2\",\\@values,\\@values,@{$FORMAT{$name}}-&gt;[1]),\"&lt;br /&gt; \\n\";\n</code></pre>\n\n<p>and if install the same files on OS debian stretch (my dedicated server) finally:</p>\n\n<p>if i test with the same error of syntax it doesn't work (error 500)</p>\n\n<p>if i replace with twice solution, the program on line run but eject me.</p>\n\n<p>thanks for your patience,</p>\n\n<p>Ornot</p>\n"}], "owner": {"reputation": 55, "user_id": 10231117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/992b6fda78d900576ae09088a53cdd79?s=128&d=identicon&r=PG&f=1", "display_name": "Ornot", "link": "https://stackoverflow.com/users/10231117/ornot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "accepted_answer_id": 51951190, "answer_count": 2, "score": 1, "last_activity_date": 1535562833, "creation_date": 1534858570, "last_edit_date": 1534872069, "question_id": 51950005, "link": "https://stackoverflow.com/questions/51950005/cgi-error-cant-use-an-array-as-a-reference", "title": "CGI error Can&#39;t use an array as a reference", "body": "<p>My configuration is Debian Stretch</p>\n\n<p>I verify my Perl code with the command </p>\n\n<pre><code>line perl -wcT admin.cgi\n</code></pre>\n\n<p>I have an error in the code at this line: </p>\n\n<pre><code>print &amp;select(\"$id-2\",\\@values,\\@values,@{$FORMAT{$name}}-&gt;[1]),\"&lt;br /&gt; \\n\";\n</code></pre>\n\n<p>The error is:</p>\n\n<blockquote>\n  <p>Can't use an array as a reference</p>\n</blockquote>\n\n<p>I also tried with\n<a href=\"https://www.jdoodle.com/execute-perl-online\" rel=\"nofollow noreferrer\">this web editor</a></p>\n\n<p>It seems that the error is :</p>\n\n<pre><code>@{$FORMAT{$name}}-&gt;[1]\n</code></pre>\n"}, {"tags": ["string", "perl", "parsing"], "comments": [{"owner": {"reputation": 59, "user_id": 10254331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1142612e8f565823e34ab754aaee7c7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Nguyen", "link": "https://stackoverflow.com/users/10254331/hung-nguyen"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1534852659, "post_id": 51947225, "comment_id": 90845784, "body": "Sorry sir, i got your point, im just jump in small step to generate the address only."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1534862385, "post_id": 51950778, "comment_id": 90852465, "body": "In addition: <code>while ($in)</code> instead of <code>while (&lt;$in&gt;)</code> and <code>close $in</code> <i>inside</i> the <code>while</code> loop."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 3, "last_activity_date": 1534866404, "last_edit_date": 1534866404, "creation_date": 1534861177, "answer_id": 51950778, "question_id": 51947225, "link": "https://stackoverflow.com/questions/51947225/parsing-data-from-delimited-blocks/51950778#51950778", "title": "Parsing data from delimited blocks", "body": "<p>Most everything looks good but it's your start regex that's causing the first problem:</p>\n\n<pre><code>'^\\/begin CHECK\\n\\n'\n</code></pre>\n\n<p>You are reading lines from the file but then looking for two newlines in a row. That's not going to ever match because a line ends with exactly one newline (unless you change <code>$/</code>, but that's a different topic). If you want to match the send of a line, you can use the <code>$</code> (or <code>\\z</code>) anchor:</p>\n\n<pre><code>'^\\/begin CHECK$'\n</code></pre>\n\n<p>Here's the program I pared down. You can adjust it to do all the rest of the stuff that you need to do:</p>\n\n<pre><code>use v5.10;\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy ($start, $keyword, $end) = (qr{^/begin CHECK$}, qr(^ADDRESS ), qr(^/end CHECK));\n\nwhile (&lt;DATA&gt;) #For each line of input\n{\n    state @block;\n    chomp;\n    if (/$start/i .. /$end/i) #Block matching\n    {\n        push @block, $_ unless /^\\s*$/;\n    }\n\n    if( /$end/i )\n    {\n        print Dumper( \\@block );\n        @block = ();\n    }\n}\n</code></pre>\n\n<p>After that, you're not reading the data. You need to put the filehandle inside <code>&lt;&gt;</code> (the line input operator):</p>\n\n<pre><code> while ( &lt;$in&gt; )\n</code></pre>\n\n<p>The file handles will close themselves at the end of the program automatically. If you want to close them yourself that's fine but don't do that until you are done. Don't close <code>$in</code> until the <code>while</code> is finished.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -1, "last_activity_date": 1534874351, "last_edit_date": 1534874351, "creation_date": 1534862091, "answer_id": 51951070, "question_id": 51947225, "link": "https://stackoverflow.com/questions/51947225/parsing-data-from-delimited-blocks/51951070#51951070", "title": "Parsing data from delimited blocks", "body": "\n\n<p>Here are some of the issues with your code</p>\n\n<ul>\n<li><p>You have <code>while ($in)</code> instead of <code>while ( &lt;$in&gt; )</code>, so your program never reads from the input file</p></li>\n<li><p>You <code>close</code> your input file handle <em>inside</em> the <code>while</code> read loop, so you can only ever read one record</p></li>\n<li><p>Your <code>$start</code> regex pattern is <code>'^\\/begin CHECK\\n\\n'</code>. The single quotes make your program search for <code>backslash n backslash n</code> instead of <code>newline newline</code></p></li>\n<li><p>Your test <code>if (/\\s+ $keyword/)</code> looks for multiple space characters of any sort, followed by a space, followed by <code>ADDRESS</code>\u2014the contents of <code>$keyword</code>. There are no occurrences of <code>ADDRESS</code> preceded by whitespace anywhere in your data</p></li>\n</ul>\n\n<p>You have also written <em>far too much</em> without testing anything. You should start by writing your read loop on its own and make sure that the data is coming in correctly before proceeding by adding two or three lines of code at a time between tests. Writing 90% of the functionality before testing is a very bad approach.</p>\n\n<p>In future, to help you address problems like this, I would point you to the excellent resources linked on the Stack Overflow <a href=\"https://stackoverflow.com/tags/perl/info\"><strong>Perl tag information page</strong></a></p>\n\n<p>The only slightly obscure thing here is that the <em>range operator</em> <code>/$start/i .. /$end/i</code> returns a useful value; I have copied it into <code>$status</code>. The first time the operator matches, the result will be 1; the second time 2 etc. The last time is different because it is a string that uses engineering notation like <code>9E0</code>, so it still evaluates to the correct count but you can check for the last match using <code>/E/</code>. I've used <code>== 1</code> and <code>/E/</code> to avoid pushing the begin and end lines onto <code>@block</code></p>\n\n<p>I don't think there's anything else overly complex here that you can't find described in the <a href=\"https://perldoc.perl.org/index-language.html\" rel=\"nofollow noreferrer\"><em>Perl language reference</em></a></p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\nuse autodie;  # Handle bad IO status automatically\n\nuse List::Util 'max';\n\nmy ($input, $output) = qw/ input.log output.txt /;\n\nopen my $in_fh,  '&lt;', $input;\n\nmy ( @block, @vars );\n\nwhile ( &lt;$in_fh&gt; ) {\n\n    my $status = m{^/begin CHECK}i .. m{^/end CHECK}i;\n\n    if ( $status =~ /E/ ) { # End line\n\n        @block = grep /\\S/, @block;\n        chomp @block;\n\n        my $var = $block[0];\n        my $addr;\n        for ( @block ) {\n            if ( /^ADDRESS\\s+(0x\\w+)/ ) {\n                $addr = $1;\n                last;\n            }\n        }\n\n        push @vars, [ $var, $addr ];\n\n        @block = ();\n    }\n    elsif ( $status ) {\n        push @block, $_ unless $status == 1;\n    }\n}\n\n# Format and generate the output\n\nopen my $out_fh, '&gt;', $output;\n\nmy $w = max map { length $_-&gt;[0] } @vars;\nprintf $out_fh \"%-*s =&gt; %s\\n\", $w, @$_ for [qw/ Name Address / ], @vars;\n\nclose $out_fh;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Name    =&gt; Address\nVar_AAA =&gt; 0xFF0011\nVar_BBB =&gt; 0xFF0022\n</code></pre>\n\n<p><br/></p>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>For what it's worth, I would have written something like this. It produces the same output as above</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>use strict;\nuse warnings;\nuse autodie;  # Handle bad IO status automatically\n\nuse List::Util 'max';\n\nmy ($input, $output) = qw/ input.log output.txt /;\n\nmy $data = do {\n    open my $in_fh, '&lt;', $input;\n    local $/;\n    &lt;$in_fh&gt;;\n};\n\nmy @vars;\n\nwhile ( $data =~ m{^/begin CHECK$(.+?)^/end CHECK$}gms ) {\n    my $block = $1;\n    next unless $block =~ m{(\\w+).+?ADDRESS\\s+(0x\\w+)}ms;\n    push @vars, [ $1, $2 ];\n}\n\nopen my $out_fh, '&gt;', $output;\n\nmy $w = max map { length $_-&gt;[0] } @vars;\nprintf $out_fh \"%-*s =&gt; %s\\n\", $w, @$_ for [qw/ Name Address / ], @vars;\n\nclose $out_fh;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "is_accepted": false, "score": 1, "last_activity_date": 1534927944, "last_edit_date": 1534927944, "creation_date": 1534894167, "answer_id": 51958002, "question_id": 51947225, "link": "https://stackoverflow.com/questions/51947225/parsing-data-from-delimited-blocks/51958002#51958002", "title": "Parsing data from delimited blocks", "body": "<p>using the command prompt in windows. In MacOS or Unix will follow the same logic you can do:</p>\n\n<pre><code> perl -wpe \"$/='/end CHECK';s/^.*?(Var_\\S+).*?(ADDRESS \\S+).*$/$1 =&gt; $2\\n/s\" \"your_file.txt\"&gt;\"new.txt\n</code></pre>\n\n<p>first we set the endLine character to <code>$/ = \"/end CHECK\".</code></p>\n\n<p>we then pick only the first <code>Var_</code> and the first <code>ADDRESS.</code> while deleting everything else in single line mode ie Dot Matches line breaks \\n. <code>s/^.*?(Var_\\S+).*?(ADDRESS \\S+).*$/$1 =&gt; $2\\n/s</code>.</p>\n\n<p>We then write the results into a new file. ie >newfile.</p>\n\n<p>Ensure to use -w -p -e where -e is for executing the code, -p is for printing and -w is for warnings:</p>\n\n<p><a href=\"https://i.stack.imgur.com/WAeHi.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WAeHi.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>In this code, I did not write the values to a new file ie, did not include the <code>&gt;newfile.txt</code> prt so that you may be able to see the result. If you do include the part, just open the <code>newfile.txt</code> and everything will be printed there</p>\n"}], "owner": {"reputation": 59, "user_id": 10254331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1142612e8f565823e34ab754aaee7c7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Nguyen", "link": "https://stackoverflow.com/users/10254331/hung-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1534927944, "creation_date": 1534849299, "last_edit_date": 1534863094, "question_id": 51947225, "link": "https://stackoverflow.com/questions/51947225/parsing-data-from-delimited-blocks", "title": "Parsing data from delimited blocks", "body": "<p></p>\n\n<p>I have a log file content many blocks <code>/begin CHECK</code> ... <code>/end CHECK</code> like below:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/begin CHECK\n\nVar_AAA\n\"Description AAA\"\nDATATYPE UBYTE\nMax_Value 255.\nADDRESS 0xFF0011\n\n/end CHECK\n\n/begin CHECK\n\nVar_BBB\n\"Description BBB\"\nDATATYPE UBYTE\nMax_Value 255.\nADDRESS 0xFF0022\n\n/end CHECK\n...\n</code></pre>\n\n<p>I want to extract the variable name and its address, then write to a new file like this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Name    Address\nVar_AAA =&gt; 0xFF0011\nVar_BBB =&gt; 0xFF0022\n</code></pre>\n\n<p>I am just thinking about the <code>($start, $keyword, $end)</code> to check for each block and extract data after keyword only</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $input  = 'input.log';\nmy $output = 'output.out';\n\nmy ( $start, $keyword, $end ) = ( '^\\/begin CHECK\\n\\n', 'ADDRESS ', '\\/end CHECK' );\nmy @block;\n\n# open input file for reading\nopen( my $in, '&lt;', $input ) or die \"Cannot open file '$input' for reading: $!\";\n\n# open destination file for writing\nopen( my $out, '&gt;', $output ) or die \"Cannot open file '$output' for writing: $!\";\n\nprint( \"copying variable name and it's address from $input to $output \\n\" );\n\nwhile ( $in ) {    #For each line of input\n\n    if ( /$start/i .. /$end/i ) {    #Block matching\n        push @block, $_;\n    }\n\n    if ( /$end/i ) {\n\n        for ( @block ) {\n\n            if ( /\\s+ $keyword/ ) {\n                print $out join( '', @block );\n                last;\n            }\n        }\n\n        @block = ();\n    }\n\n    close $in or die \"Cannot close file '$input': $!\";\n}\n\nclose $out or die \"Cannot close file '$output': $!\";\n</code></pre>\n\n<p>But I got nothing after execution. Can anyone suggest me with sample idea?</p>\n"}, {"tags": ["perl", "soap", "wsdl", "soaplite"], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 9998415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f582fcef6ee949146244491721dcdc?s=128&d=identicon&r=PG&f=1", "display_name": "Kanewilliam", "link": "https://stackoverflow.com/users/9998415/kanewilliam"}, "edited": false, "score": 0, "creation_date": 1535519356, "post_id": 52036177, "comment_id": 91089439, "body": "Once after enable the debug. I get the below message. Review below url  <a href=\"https://www.perlmonks.org/?node_id=1220784\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1220784</a>"}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "reply_to_user": {"reputation": 199, "user_id": 9998415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f582fcef6ee949146244491721dcdc?s=128&d=identicon&r=PG&f=1", "display_name": "Kanewilliam", "link": "https://stackoverflow.com/users/9998415/kanewilliam"}, "edited": false, "score": 0, "creation_date": 1535639869, "post_id": 52036177, "comment_id": 91149930, "body": "@Kanewilliam if you want help here provide all relevant information here, not links."}], "tags": [], "owner": {"reputation": 41, "user_id": 5435872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16a6106925371c3e549175e6e99a5436?s=128&d=identicon&r=PG&f=1", "display_name": "rahed h", "link": "https://stackoverflow.com/users/5435872/rahed-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1535361690, "creation_date": 1535361690, "answer_id": 52036177, "question_id": 51945707, "link": "https://stackoverflow.com/questions/51945707/how-to-fix-the-wsdl-file-not-well-formed-invalid-token-issue/52036177#52036177", "title": "How to fix the WSDL file not well-formed (invalid token) issue", "body": "<p>Uncomment #use SOAP::Lite +trace => \u2018debug\u2019; line and see the resulting error.</p>\n"}], "owner": {"reputation": 199, "user_id": 9998415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f582fcef6ee949146244491721dcdc?s=128&d=identicon&r=PG&f=1", "display_name": "Kanewilliam", "link": "https://stackoverflow.com/users/9998415/kanewilliam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 450, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535361690, "creation_date": 1534844005, "question_id": 51945707, "link": "https://stackoverflow.com/questions/51945707/how-to-fix-the-wsdl-file-not-well-formed-invalid-token-issue", "title": "How to fix the WSDL file not well-formed (invalid token) issue", "body": "<p>I have created WSDL file connect the file with PERL soap method. After the exection i get the below error message </p>\n\n<p>\"<strong>not well-formed (invalid token) at line 1, column 1, byte 1 at /usr/lib/x86_64-linux-gnu/perl5/5.26/XML/Parser.pm line 187.</strong>\" .</p>\n\n<p>Please let me know have to fix the issue. Review below source code.</p>\n\n<p><strong>soap-client.pl</strong></p>\n\n<pre><code>#!/usr/bin/perl -w\n#use SOAP::Lite +trace =&gt; \u2018debug\u2019;\n\nuse SOAP::Lite;\nmy $client = SOAP::Lite\n-&gt;service('http://localhost/soap/perl/marketplace.wsdl');\nmy $result = $client-&gt;login( 'test_user', 'test_password' ); \n\n\n#~ my $result = $client-&gt;sayHello('');\n\nprint $result;\n</code></pre>\n\n<p><strong>soap-server.pl</strong> </p>\n\n<pre><code>#!/usr/bin/perl\n\nfunction login( $login, $password )\n{\n  return $login;\n}\n\nfunction doFilter( $params )\n{\n  return \"some string\";\n}\n</code></pre>\n\n<p><strong>marketplace.wsdl</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;definitions name=\"Marketplace\"\n             targetNamespace=\"urn:Marketplace\"\n             xmlns:tns=\"urn:Marketplace\"\n             xmlns:soap=\"http://schemas.xmlsoap.org/wsdl/soap/\"\n             xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n             xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"\n             xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\"\n             xmlns=\"http://schemas.xmlsoap.org/wsdl/\"&gt;\n\n\n    &lt;message name=\"LoginRequest\"&gt;\n        &lt;part name=\"login\" type=\"xsd:string\"/&gt;\n        &lt;part name=\"password\" type=\"xsd:string\"/&gt;\n    &lt;/message&gt;\n\n    &lt;message name=\"LoginResponse\"&gt;\n        &lt;part name=\"result\" type=\"xsd:string\"/&gt;\n    &lt;/message&gt;\n\n    &lt;portType name=\"LoginPort\"&gt;\n        &lt;operation name=\"login\"&gt;\n            &lt;input message=\"tns:LoginRequest\"/&gt;\n            &lt;output message=\"tns:LoginResponse\"/&gt;\n        &lt;/operation&gt;\n    &lt;/portType&gt;\n\n    &lt;binding name=\"LoginBinding\" type=\"tns:LoginPort\"&gt;\n        &lt;soap:binding style=\"rpc\" transport=\"http://schemas.xmlsoap.org/soap/http\"/&gt;\n\n        &lt;operation name=\"login\"&gt;\n            &lt;soap:operation soapAction=\"urn:LoginAction\"/&gt;\n            &lt;input&gt;\n                &lt;soap:body use=\"encoded\" namespace=\"urn:Marketplace\" encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\"/&gt;\n            &lt;/input&gt;\n            &lt;output&gt;\n                &lt;soap:body use=\"encoded\" namespace=\"urn:Marketplace\" encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\"/&gt;\n            &lt;/output&gt;\n        &lt;/operation&gt;\n    &lt;/binding&gt;\n\n    &lt;service name=\"WSDLService\"&gt;\n        &lt;port name=\"LoginPort\" binding=\"tns:LoginBinding\"&gt;\n            &lt;soap:address location=\"http://localhost/soap/perl/soap-server.pl\"/&gt;\n        &lt;/port&gt;\n    &lt;/service&gt;\n&lt;/definitions&gt;\n</code></pre>\n\n<p>finally run the soap-client.pl file return below error message.</p>\n\n<p>\"<strong>not well-formed (invalid token) at line 1, column 1, byte 1 at /usr/lib/x86_64-linux-gnu/perl5/5.26/XML/Parser.pm line 187.</strong>\" .</p>\n"}, {"tags": ["apache", "perl", "64-bit", "cgi", "solaris"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1534839391, "post_id": 51943691, "comment_id": 90838322, "body": "Does /local/perl5/bin/perl exist in the chroot jail?"}, {"owner": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1534840447, "post_id": 51943691, "comment_id": 90838863, "body": "Yes, of course :) It does not only exist, I have explicitly executed and verified its functionality in the chroot."}, {"owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "edited": false, "score": 0, "creation_date": 1534841195, "post_id": 51943691, "comment_id": 90839230, "body": "The <code>read()</code> on file descriptor 12 returns 0 (EOF). Can you find out what the descriptor is pointing to? And does it work outside of the chroot jail?"}, {"owner": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "reply_to_user": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "edited": false, "score": 0, "creation_date": 1534842471, "post_id": 51943691, "comment_id": 90839867, "body": "@GuidoFlohr How would I find out what the descriptor is pointing to? As for if it works outside the chroot - I need to think how I can test that, because everything around it is built for being executed only inside the chroot."}, {"owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "edited": false, "score": 1, "creation_date": 1534845207, "post_id": 51943691, "comment_id": 90841400, "body": "@Isaac The 12 must be the result of a prior call to <code>open()</code>. And do you know what the two PIDs are? 28911 is probably your worker and 28906 its parent process? And - probably a stupid suggestion - where does the trailling slash after &quot;/chroot/cgi-bin/&quot; come from? If it&#39;s a config file, try removing it."}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1534857775, "post_id": 51943691, "comment_id": 90849247, "body": "That error message <code>Premature end of script headers</code> suggests that no output is being provided by the script, as a print statement is the first thing in the script I suggest that the script hasn&#39;t actually been run. Can you add the command line parameters you passed to truss."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1534872944, "post_id": 51943691, "comment_id": 90858290, "body": "Note the lack of <code>exec</code> in the 64-bit version. What happens between the <code>chdir</code> and the <code>exec</code> in the source?"}, {"owner": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "reply_to_user": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "edited": false, "score": 0, "creation_date": 1534946250, "post_id": 51943691, "comment_id": 90887350, "body": "@GuidoFlohr I have added the <code>open()</code> call for descriptor 12 (<code>&#47;dev&#47;urandom</code>). I assume the PIDs are as follows: 28911 is the cgid, and 28906 is an apache worker.  @JGNI I have added the truss parameters (<code>-f -o logfile</code>). And I agree with your analysis, the script has not run, the question is why."}, {"owner": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "edited": false, "score": 0, "creation_date": 1534947282, "post_id": 51943691, "comment_id": 90888021, "body": "I can now confirm my assumption about the PIDs."}, {"owner": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534947558, "post_id": 51943691, "comment_id": 90888210, "body": "@ikegami Interesting question. How would I find out? The C source does not have the <code>chdir</code> and <code>execve</code> in the source code, so I assume these are compiler generated machine instructions (?)."}, {"owner": {"reputation": 27410, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1534950898, "post_id": 51943691, "comment_id": 90890440, "body": "Something seems to be missing from the posted <code>truss</code> output.  First, given <code>open(&quot;&#47;dev&#47;urandom&quot;, O_RDONLY)</code>, I don&#39;t think <code>read(12, 0x10034BB38, 8000)</code> should return 0.  Second, <code>8000</code> is an awfully large number of bytes to read from <code>&#47;dev&#47;urandom</code>.  Third, the <code>read(12, 0x10034BB38, 8000)</code> returning <code>0</code> happens immediately after <code>pollsys(0xFFFFFFFF747F7080, 1, 0xFFFFFFFF747F6FA0, 0x00000000) = 1</code>.  There&#39;d be no need to poll <code>&#47;dev&#47;urandom</code> in the first place, and it wouldn&#39;t return an <code>EOF</code> condition should it poll as active - there&#39;d be data to read."}, {"owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "edited": false, "score": 0, "creation_date": 1535004433, "post_id": 51943691, "comment_id": 90908197, "body": "What did you configure <code>ScriptSock</code> to be? Could there be a problem with opening the socket? And do you really have to use a threaded mpm and mod_cgid (instead of plain mod_cgi)?"}, {"owner": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "reply_to_user": {"reputation": 27410, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1535007817, "post_id": 51943691, "comment_id": 90909746, "body": "@AndrewHenle You are right, those were just excerpts from the truss output. I have added links to pastebin for the complete output"}, {"owner": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "reply_to_user": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "edited": false, "score": 0, "creation_date": 1535007929, "post_id": 51943691, "comment_id": 90909793, "body": "@GuidoFlohr threaded mpm and mod_cgid (instead of cgi) is a customer requirement.I need to check that <code>ScriptSock</code> thingy - however I would have expected an error for opening the socket, if that would be the problem."}, {"owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1535010861, "post_id": 51943691, "comment_id": 90911345, "body": "The call to <code>sigaction(SIGCLD, ...)</code> comes from <a href=\"https://github.com/apache/apr/blob/trunk/threadproc/unix/proc.c#L471\" rel=\"nofollow noreferrer\">github.com/apache/apr/blob/trunk/threadproc/unix/proc.c#L471</a>&zwnj;&#8203;. The next system call is <code>chdir()</code>, It then looks like it has to continue with <code>geteuid()</code> in line 481 but that was a little different in httpd-2.2. The only interesthing happening before the final call (@ikegami: your question) to <code>execve()</code> is then a call to <code>limit_proc()</code> which should actually trigger a call to <code>setrlimit()</code> but I cannot see that in your truss output. Still, could resource limits be the problem? And what is the 3rd process with pid 28904?"}, {"owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "edited": false, "score": 1, "creation_date": 1535011221, "post_id": 51943691, "comment_id": 90911555, "body": "@Isaac try to add some printf debugging after the call to <code>apr_signal()</code> and <code>chdir()</code>. But you have to be aware that that code is not only called from mod_cgid(). If you prefix the log output with <code>progname</code>, you should probably see whether it&#39;s the cgi stuff being executed."}, {"owner": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "reply_to_user": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "edited": false, "score": 0, "creation_date": 1535020737, "post_id": 51943691, "comment_id": 90917066, "body": "@GuidoFlohr I will give that printf debugging a shot  - thank you for pointing out the correct place in the source code, I would not have found that. It will take me a while."}], "answers": [{"comments": [{"owner": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "edited": false, "score": 0, "creation_date": 1535020173, "post_id": 51983580, "comment_id": 90916730, "body": "I am sorry to have posted missleading truss output - put the script is not the problem. I have tested both script in 32 and 64 bit. Both work in 32 bit, both do not work in 64 bit. I shall provide more accurate trussoutput."}, {"owner": {"reputation": 27410, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "edited": false, "score": 0, "creation_date": 1535020331, "post_id": 51983580, "comment_id": 90916828, "body": "@Isaac What are your <code>truss</code> options?  Are you running <code>truss</code> as <code>root</code>?  Can you?"}, {"owner": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "edited": false, "score": 0, "creation_date": 1535020410, "post_id": 51983580, "comment_id": 90916880, "body": "yes, truss is run as root. I run <code>truss -f -o outputfile.txt</code>. Here is the truss output for <code>cgi-test.cgi</code> in 64 bit: <a href=\"https://pastebin.com/Nz1jBjne\" rel=\"nofollow noreferrer\">pastebin.com/Nz1jBjne</a>"}, {"owner": {"reputation": 27410, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "edited": false, "score": 0, "creation_date": 1535021328, "post_id": 51983580, "comment_id": 90917396, "body": "@Isaac  Add the <code>-a -e -d</code> flags to <code>truss</code>.  I suspect your <code>LD_LIBRARY_PATH</code> and/or <code>LD_PRELOAD</code> set of envvals are set wrong and the <code>execve()</code> is getting a <code>SIGKILL</code> when it fails."}, {"owner": {"reputation": 27410, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "edited": false, "score": 0, "creation_date": 1535031907, "post_id": 51983580, "comment_id": 90924064, "body": "@Isaac  That last looks the same as the earlier 64-bit output."}, {"owner": {"reputation": 27410, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "edited": false, "score": 0, "creation_date": 1535037592, "post_id": 51983580, "comment_id": 90927873, "body": "This looks like a huge problem: <code>LD_LIBRARY_PATH=&#47;usr&#47;local&#47;lib&#47;sparcv9:&#47;usr&#47;local&#47;lib:&#47;usr&#47;l&zwnj;&#8203;ib:&#47;lib:&#47;opt&#47;csw&#47;lib&zwnj;&#8203;:&#47;usr&#47;sfw&#47;lib</code> That&#39;s mixing both 32- and 64-bit libraries into <code>LD_LIBRARY_PATH</code>. See both <a href=\"https://docs.oracle.com/cd/E23823_01/html/816-5165/ld.so.1-1.html\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E23823_01/html/816-5165/ld.so.1-1.html</a> and <a href=\"https://docs.oracle.com/cd/E26505_01/html/E26506/chapter6-63352.html#scrolltoc\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E26505_01/html/E26506/&hellip;</a>. Also, do all those directories exist under the <code>&#47;chroot&#47;instances&#47;myinstance.acme.com</code> directory used by <code>chroot</code>?"}, {"owner": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "edited": false, "score": 0, "creation_date": 1535110922, "post_id": 51983580, "comment_id": 90956581, "body": "While I agree that my use of <code>LD_LIBRARY_PATH</code> is far from optimal, it is not the problem. I have completely unset it, but the problem persists :( Also, the same messed up <code>LD_LIBRARY_PATH</code> does not disturb the 32 bit build."}, {"owner": {"reputation": 27410, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "edited": false, "score": 0, "creation_date": 1535115711, "post_id": 51983580, "comment_id": 90959664, "body": "@Isaac <i>While I agree that my use of LD_LIBRARY_PATH is far from optimal, <b>it is not the problem</b>.</i>  You can&#39;t know that, since you don&#39;t know why the CGI script doesn&#39;t run under the 64-bit process."}], "tags": [], "owner": {"reputation": 27410, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 0, "last_activity_date": 1535019749, "creation_date": 1535019749, "answer_id": 51983580, "question_id": 51943691, "link": "https://stackoverflow.com/questions/51943691/executing-perl-via-cgid-on-solaris-fails-in-64-bit-but-works-in-32-bit/51983580#51983580", "title": "Executing perl via cgid on solaris fails in 64 bit, but works in 32 bit", "body": "<p>Your 32- and 64-bit tests are not the same.  Per the posted <code>truss</code> output, the 32-bit process appears to run a Perl CGI script called <code>cgi-test.cgi</code>:</p>\n\n<pre><code>28415/25:   stat64(\"/local/content/apache/myinstance.acme.com/cgi-bin/cgi-test.cgi\", 0xFAFFBA18) = 0\n28415/25:   lstat64(\"/local\", 0xFAFFBA18)           = 0\n28415/25:   lstat64(\"/local/content\", 0xFAFFBA18)       = 0\n28415/25:   lstat64(\"/local/content/apache\", 0xFAFFBA18)    = 0\n28415/25:   lstat64(\"/local/content/apache/myinstance.acme.com\", 0xFAFFBA18) = 0\n28415/25:   lstat64(\"/local/content/apache/myinstance.acme.com/cgi-bin\", 0xFAFFBA18) = 0\n28415/25:   lstat64(\"/local/content/apache/myinstance.acme.com/cgi-bin/cgi-test.cgi\", 0xFAFFBA18) = 0\n28415/25:   open(\"/dev/urandom\", O_RDONLY)          = 12\n28415/25:   read(12, \"C3 E DB1 A03 5 kCBA8DF\\r\".., 64)  = 64\n28415/25:   close(12)                   = 0\n28415/25:   open(\"/dev/urandom\", O_RDONLY)          = 12\n28415/25:   read(12, \"E6 L _F3 uBC fA7E18AFC \\\".., 64)  = 64\n28415/25:   close(12)                   = 0\n28415/25:   so_socket(PF_UNIX, SOCK_STREAM, 0, \"\", SOV_DEFAULT) = 12\n28415/25:   connect(12, 0xFAFF7AA8, 110, SOV_DEFAULT)  \n ...\n28420:  sigaction(SIGCLD, 0xFFBFF6A8, 0xFFBFF748)   = 0\n28420:  chdir(\"/local/content/apache/myinstance.acme.com/cgi-bin/\") = 0\n28420:  execve(\"/local/content/apache/myinstance.acme.com/cgi-bin/cgi-test.cgi\", 0x00183DB8, 0x00183570)  argc = 3\n28420:      *** SUID: ruid/euid/suid = 50001 / 50001 / 50001  ***\n28420:      *** SGID: rgid/egid/sgid = 50001 / 50001 / 50001  ***\n</code></pre>\n\n<p>Note that the CGI script is run by PID 28420, where PID 28415 appears to be the \"controlling\" process.</p>\n\n<p>But for the 64-bit process, this is the corresponding output, with the CGI script being <code>test.pl</code>:</p>\n\n<pre><code>28906/21:   stat(\"/local/content/apache/myinstance.acme.com/cgi-bin/test.pl\", 0xFFFFFFFF747FB3E0) = 0\n28906/21:   lstat(\"/local\", 0xFFFFFFFF747FB3E0)     = 0\n28906/21:   lstat(\"/local/content\", 0xFFFFFFFF747FB3E0) = 0\n28906/21:   lstat(\"/local/content/apache\", 0xFFFFFFFF747FB3E0) = 0\n28906/21:   lstat(\"/local/content/apache/myinstance.acme.com\", 0xFFFFFFFF747FB3E0) = 0\n28906/21:   lstat(\"/local/content/apache/myinstance.acme.com/cgi-bin\", 0xFFFFFFFF747FB3E0) = 0\n28906/21:   lstat(\"/local/content/apache/myinstance.acme.com/cgi-bin/test.pl\", 0xFFFFFFFF747FB3E0) = 0\n28906/21:   open(\"/dev/urandom\", O_RDONLY)          = 12\n28906/21:   read(12, \"9C `9F9899 uAED9 `1CBE11\".., 64)  = 64\n28906/21:   close(12)                   = 0\n28906/21:   open(\"/dev/urandom\", O_RDONLY)          = 12\n28906/21:   read(12, \"C2F8FC11C31D = ! V ; O =\".., 64)  = 64\n28906/21:   close(12)                   = 0\n28906/21:   so_socket(PF_UNIX, SOCK_STREAM, 0, \"\", SOV_DEFAULT) = 12\n28906/21:   connect(12, 0xFFFFFFFF747F9560, 110, SOV_DEFAULT) = 0\n...\n28911:  sigaction(SIGCLD, 0xFFFFFFFF7FFFF150, 0xFFFFFFFF7FFFF250) = 0\n28911:  chdir(\"/local/content/apache/myinstance.acme.com/cgi-bin/\") = 0\n</code></pre>\n\n<p>Note the lack of an <code>execve()</code> call.  And then PID 28911 disappears until this:</p>\n\n<pre><code>28906/21:   kill(28911, SIGTERM)                Err#3 ESRCH\n28906/21:   kill(28911, SIG#0)              Err#3 ESRCH\n</code></pre>\n\n<p>There's not only no <code>execve()</code> call that actually executes the Perl script, there's no PID 28911 any more.</p>\n\n<p>The problem appears to be the <code>test.pl</code> script.  What are the permissions on the script?  What user/group owns it?  Does it have any ACLs attached?</p>\n"}, {"tags": [], "owner": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "is_accepted": true, "score": 0, "last_activity_date": 1535378580, "creation_date": 1535378580, "answer_id": 52041089, "question_id": 51943691, "link": "https://stackoverflow.com/questions/51943691/executing-perl-via-cgid-on-solaris-fails-in-64-bit-but-works-in-32-bit/52041089#52041089", "title": "Executing perl via cgid on solaris fails in 64 bit, but works in 32 bit", "body": "<p>First of all thank you to all who have made comments and suggestions.</p>\n\n<p>Finally it turns out that it was a permissions problem. Not in the script, but in the libraries. The way my chroot environment is built is that it gets is custom permissions applied inside the chroot. Now that mechanism was not yet adapted to 64 bit. 64 bit libraries live in different subdirectories of the standard locations for 32 bit backwards compatibility. Also, my httpd process runs as a non-root user. After correcting the permissions perl worked like a charm in 64 bit.</p>\n\n<p>But maybe more interesting for the general public is how I found this out: I added the <code>-X</code> flag to the apache startup command. That enables debug mode for apache, and finally produced the error message I needed:</p>\n\n<pre><code>env.pl: Cannot execute /lib/sparcv9/ld.so.1\ncgi-test.cgi: Cannot execute /lib/sparcv9/ld.so.1\n</code></pre>\n\n<p>After executing - inside the chroot of course - </p>\n\n<pre><code>chmod o+x /lib/sparcv9/ld.so.1\nchmod o+r /lib/sparcv9/*\n</code></pre>\n\n<p>my perl test scripts worked again.</p>\n"}], "owner": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 52041089, "answer_count": 2, "score": 1, "last_activity_date": 1535378580, "creation_date": 1534836679, "last_edit_date": 1535024719, "question_id": 51943691, "link": "https://stackoverflow.com/questions/51943691/executing-perl-via-cgid-on-solaris-fails-in-64-bit-but-works-in-32-bit", "title": "Executing perl via cgid on solaris fails in 64 bit, but works in 32 bit", "body": "<p>I have a custom build of apache's <code>httpd</code> version 2.2 together with <code>perl</code> version 5.22 on solaris 10. The httpd runs in a chroot environment, and the perl script is executed via httpd's <code>mod_cgid</code>. So far all was in 32 bit things worked. Now I have compiled everything in 64 bit (because another httpd module is only provided as a 64 bit binary), and now I cannot get the perl script to be executed via cgid.</p>\n\n<p>The http error log contains the line </p>\n\n<pre><code>Premature end of script headers.\n</code></pre>\n\n<p>So I tried to execute my test script without cgid, just using perl inside the chroot, and besides some warnings it just worked fine. Here is my script, if its of any interest:</p>\n\n<pre><code>#!/local/perl5/bin/perl\nprint \"Content-type: text/plain\\n\\n\";\nopendir(DIRHANDLE, \"/\");\n@filenames = readdir(DIRHANDLE);\nforeach $file (@filenames) { print \"$file\\n\"; }\nclosedir(DIRHANDLE);\n</code></pre>\n\n<p>(I know its not a great one :))</p>\n\n<p>The warnings were about the locale not being set, so I fixed that by adding <code>/usr/lib/locale</code> to the chroot. This fixed the warnings, but did not fix the original problem. So I assume this was not the root cause. Even more so, when I compared to the 32 bit build, I got the same warnings, however the script would execute fine via cgid.</p>\n\n<p>Next thing I did was to trace the systemcalls via <code>truss -f -o mylogfile.txt</code>. The full output can be found <a href=\"https://pastebin.com/k2ZsWDbx\" rel=\"nofollow noreferrer\">on pastebin (32 bit truss)</a>. Here is an excerpt for the <strong>32</strong> bit build (line 4296 on pastebin) - note that paths are not exactly the same as on pastebin, but the observed result is the same:</p>\n\n<pre><code>28420:  sigaction(SIGCLD, 0xFFBFF6A8, 0xFFBFF748)       = 0\n28420:  chdir(\"/path/to/my/chroot/cgi-bin/\") = 0\n28420:  execve(\"/path/to/my/chroot/cgi-bin/test.pl\", 0x00183DB8, 0x00183570)  argc = 3\n28420:      *** SUID: ruid/euid/suid = 50001 / 50001 / 50001  ***\n28420:      *** SGID: rgid/egid/sgid = 50001 / 50001 / 50001  ***\n28420:  sysinfo(SI_MACHINE, \"sun4u\", 257)               = 6\n</code></pre>\n\n<p>And here is the <a href=\"https://pastebin.com/iBhmyYgh\" rel=\"nofollow noreferrer\">truss output</a> for the <strong>64</strong> bit build. The following is an excerpt (line 4489), note I left out some lines, denoted by <code>[...]</code>:</p>\n\n<pre><code>28906/21:       open(\"/dev/urandom\", O_RDONLY)                  = 12\n[...]\n28911:  sigaction(SIGCLD, 0xFFFFFFFF7FFFF150, 0xFFFFFFFF7FFFF250) = 0\n28911:  chdir(\"/path/to/my/chroot/cgi-bin/\") = 0\n28906/21:       pollsys(0xFFFFFFFF747F7080, 1, 0xFFFFFFFF747F6FA0, 0x00000000) = 1\n28906/21:       read(12, 0x10034BB38, 8000)                     = 0\n28906/21:       close(12)                                       = 0\n[...]\n28906/21:       read(10, \"\\0\\0 pEF\", 4)                         = 4\n28906/21:       kill(28911, SIGTERM)                            Err#3 ESRCH\n28904:  close(4)                                        = 0\n</code></pre>\n\n<p>As Andrew Haenle noticed, I did not execute the same scripts in 32 bit vs 64 bit - at least in the truss output shown above. So here is the truss output for the failing 64 bit, where I execute the same script as in 32 bit: <a href=\"https://pastebin.com/Nz1jBjne\" rel=\"nofollow noreferrer\">https://pastebin.com/Nz1jBjne</a></p>\n\n<p>Here is some more truss output from the 64 bit build, with the additional flags <code>-a -e -d</code>: <a href=\"https://pastebin.com/4NMGD2aR\" rel=\"nofollow noreferrer\">https://pastebin.com/4NMGD2aR</a></p>\n\n<p>The way I interpret this is that after changing to the cgi-bin directory, cgid gets killed in 64 bit, vs. executing the script in 32 bit. \nPermissions are the same, so I do not see what is the problem here. At least it explains the message from the error log - since the script is not executed, no headers are ever printed.</p>\n\n<p>Anyway, I am a bit lost where to go from here. Any hints how to debug this further would be highly appreciated.</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1534819512, "post_id": 51940865, "comment_id": 90831515, "body": "<a href=\"https://stackoverflow.com/q/2933347/2864740\">stackoverflow.com/q/2933347/2864740</a> - I searched for <a href=\"https://stackoverflow.com/search?q=%5Bperl%5D+array+find+difference\">&quot;&#91;perl&#93; array find difference&quot;</a> and followed a &#39;Duplicate Question&#39; link.."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1534820256, "post_id": 51940865, "comment_id": 90831661, "body": "it&#39;s not actually an array difference that I&#39;m after"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1534820905, "post_id": 51940865, "comment_id": 90831785, "body": "<a href=\"https://metacpan.org/pod/Set::Array\" rel=\"nofollow noreferrer\">Set::Array</a> has a difference method that looks promising. You can also do something with hashes, I&#39;m sure."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1536560254, "last_edit_date": 1536560254, "creation_date": 1534821302, "answer_id": 51941085, "question_id": 51940865, "link": "https://stackoverflow.com/questions/51940865/items-in-array-a-that-are-not-in-array-b/51941085#51941085", "title": "items in array A that are not in array B", "body": "<p>If you know which array contains the other</p>\n\n<pre><code>my @small  = 10..12;\nmy @large  = 10..15;\n\nmy %ref = map { $_ =&gt; 1 } @small;\n\nmy @diff = grep { not exists $ref{$_} } @large;\n</code></pre>\n\n<p>Not quite one line but efficient. </p>\n\n<p>If it's not known which contains the other then one has to do it both ways.</p>\n\n<p>And then there are various modules for array/list manipulation that can help.  </p>\n\n<p>For one, <code>get_complement</code> from <a href=\"https://metacpan.org/pod/List::Compare\" rel=\"nofollow noreferrer\">List::Compare</a> does precisely what is needed.</p>\n\n<hr>\n\n<p>What you have can be done in one statement, using <a href=\"https://perldoc.perl.org/List/Util.html\" rel=\"nofollow noreferrer\">List::Util</a></p>\n\n<pre><code>use List::Util qw(none);\n\nmy @diff = grep { my $e = $_; none { $e eq $_ } @small } @large; \n</code></pre>\n\n<p>but this has <em>O(NM-M<sup>2</sup>/2)</em> complexity, where <em>N</em> (large) and <em>M</em> (small) are array sizes.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1534823656, "post_id": 51941098, "comment_id": 90832324, "body": "<code>@except{ @$second } = 1;</code> is misleading. How about using <code>@except{ @$second } = ();</code> instead."}, {"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534825892, "post_id": 51941098, "comment_id": 90832749, "body": "@ikegami do you think it&#39;s misleading because it might be misconstrued as a count instead of a truthy value?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1534826889, "post_id": 51941098, "comment_id": 90832990, "body": "It makes it look like the values are being set to  <code>1</code> when they&#39;re not."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1534826931, "post_id": 51941098, "comment_id": 90833001, "body": "Nah. I think my way looks better in cases where you just want to create a bunch of keys at once in a hash without caring what the values are (all but one of which will be <code>undef</code> of course). Using an empty list looks funny to me. Opinions obviously vary."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534838960, "post_id": 51941098, "comment_id": 90838120, "body": "Shawn if you answer someone directly in a comment, use the @ notifier i.e @ikegami else the user will not be informed that you left him/her a comment."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1534866177, "post_id": 51941098, "comment_id": 90854869, "body": "If you don&#39;t care what the values are, you sure go to a lot of trouble to pretend they are <code>1</code>. Assigning an empty list is what you are actually doing (except for the &quot;first&quot;), and you should make your code look like it does what it&#39;s doing. At the <i>very least</i>, use a false value instead of a true one."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 0, "last_activity_date": 1534821399, "creation_date": 1534821399, "answer_id": 51941098, "question_id": 51940865, "link": "https://stackoverflow.com/questions/51940865/items-in-array-a-that-are-not-in-array-b/51941098#51941098", "title": "items in array A that are not in array B", "body": "<p>Not a one liner, but this is likely to be faster than yours on big arrays:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse 5.012;\n\nsub difference {\n    my ($first, $second) = @_;\n    my %except;\n    @except{ @$second } = 1;\n    return [ grep { not exists $except{$_} } @$first ];\n}\n\nmy @anames = (\"one\", \"two\", \"three\", \"four\", \"five\");\nmy @hrefs = (\"two\", \"four\", \"six\");\n\nmy $d = difference \\@anames, \\@hrefs;\nsay \"@$d\";\n</code></pre>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "closed_date": 1534886190, "answer_count": 2, "score": 1, "last_activity_date": 1536560254, "creation_date": 1534819398, "last_edit_date": 1534821033, "question_id": 51940865, "link": "https://stackoverflow.com/questions/51940865/items-in-array-a-that-are-not-in-array-b", "closed_reason": "Duplicate", "title": "items in array A that are not in array B", "body": "<p>What is a quick way to determine items in array A that are not in array B?</p>\n\n<p>So far I have the following, but can it be done in one line?</p>\n\n<pre><code>for $aname (@anames)\n{\n   if (not grep { $_ eq $aname } @hrefs)\n   {\n        push @anamesremove, $aname;\n   }\n}\n</code></pre>\n"}, {"tags": ["linux", "bash", "perl"], "answers": [{"tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": true, "score": 6, "last_activity_date": 1534811862, "creation_date": 1534811862, "answer_id": 51940129, "question_id": 51940088, "link": "https://stackoverflow.com/questions/51940088/what-does-this-command-in-perl-do/51940129#51940129", "title": "What does this command in Perl do?", "body": "<p>The author's just being cute. There's no practical reason to write:</p>\n\n<pre><code>u$(perl -e 'print \"na\";')me\n</code></pre>\n\n<p>versus:</p>\n\n<pre><code>$(perl -e 'print \"uname\";')\n</code></pre>\n\n<p>They do the same thing. Really, there's no need for Perl at all when it comes down to it. In a real script you'd just write:</p>\n\n<pre><code>uname\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133, "user_id": 5231673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Am4GD.jpg?s=128&g=1", "display_name": "Joaqu&#237;n Ferrero", "link": "https://stackoverflow.com/users/5231673/joaqu%c3%adn-ferrero"}, "is_accepted": false, "score": 2, "last_activity_date": 1534840507, "creation_date": 1534840507, "answer_id": 51944712, "question_id": 51940088, "link": "https://stackoverflow.com/questions/51940088/what-does-this-command-in-perl-do/51944712#51944712", "title": "What does this command in Perl do?", "body": "<p>The author want to hide the word 'uname' from a grep search. Your intentions are not good...</p>\n"}], "owner": {"reputation": 53, "user_id": 8511335, "user_type": "registered", "profile_image": "https://graph.facebook.com/1420221784729979/picture?type=large", "display_name": "Nidal Fikri", "link": "https://stackoverflow.com/users/8511335/nidal-fikri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 51940129, "answer_count": 2, "score": 3, "last_activity_date": 1534840507, "creation_date": 1534811399, "last_edit_date": 1534811766, "question_id": 51940088, "link": "https://stackoverflow.com/questions/51940088/what-does-this-command-in-perl-do", "title": "What does this command in Perl do?", "body": "<p>An entire shell command can be executed like a function, returning its \noutput in place. This is done by surrounding the command with parentheses \nand prefixing a dollar sign:</p>\n\n<pre><code>u$(perl -e 'print \"na\";')me\n</code></pre>\n\n<p>Why do we type <code>u</code> + the command then followed by <code>me</code>? Why don't we just do this?</p>\n\n<pre><code>$(perl -e 'print \"uname\";')\n</code></pre>\n\n<p>What is the differences and the goal of the first method? </p>\n"}, {"tags": ["string", "perl", "unicode", "text-rendering"], "answers": [{"tags": [], "owner": {"reputation": 30488, "user_id": 22483, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b337d1e52bf3d796a7728def67a602fd?s=128&d=identicon&r=PG", "display_name": "Randal Schwartz", "link": "https://stackoverflow.com/users/22483/randal-schwartz"}, "is_accepted": false, "score": 4, "last_activity_date": 1534809337, "creation_date": 1534809337, "answer_id": 51939895, "question_id": 51939835, "link": "https://stackoverflow.com/questions/51939835/perl-program-to-print-unicode-from-hex-value/51939895#51939895", "title": "Perl Program to Print Unicode From Hex Value", "body": "<p>Yup.  You can't do that.  No variable interpolation allowed in the middle of a \\x like that.  You can use chr() to get that character though.</p>\n"}, {"tags": [], "owner": {"reputation": 9801, "user_id": 567650, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ccbc30c848110d05818d71e37ae8c8cf?s=128&d=identicon&r=PG", "display_name": "jwd", "link": "https://stackoverflow.com/users/567650/jwd"}, "is_accepted": false, "score": 1, "last_activity_date": 1534810409, "creation_date": 1534810409, "answer_id": 51940003, "question_id": 51939835, "link": "https://stackoverflow.com/questions/51939835/perl-program-to-print-unicode-from-hex-value/51940003#51940003", "title": "Perl Program to Print Unicode From Hex Value", "body": "<p><a href=\"https://stackoverflow.com/a/51939895/567650\">Randal's answer</a> is correct. For more info, you might want to read <a href=\"https://perldoc.perl.org/perluniintro.html#Creating-Unicode\" rel=\"nofollow noreferrer\">perluniintro</a>.</p>\n\n<p>From there, you can find, for example:</p>\n\n<blockquote>\n  <p>At run-time you can use:</p>\n</blockquote>\n\n<pre><code> use charnames ();\n my $hebrew_alef_from_name\n                      = charnames::string_vianame(\"HEBREW LETTER ALEF\");\n my $hebrew_alef_from_code_point = charnames::string_vianame(\"U+05D0\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 8, "last_activity_date": 1534956981, "last_edit_date": 1534956981, "creation_date": 1534811476, "answer_id": 51940093, "question_id": 51939835, "link": "https://stackoverflow.com/questions/51939835/perl-program-to-print-unicode-from-hex-value/51940093#51940093", "title": "Perl Program to Print Unicode From Hex Value", "body": "<p>Both <a href=\"http://perldoc.perl.org/functions/chr.html\" rel=\"nofollow noreferrer\"><code>chr($num)</code></a> and <a href=\"http://perldoc.perl.org/functions/pack.html\" rel=\"nofollow noreferrer\"><code>pack('W', $num)</code></a> produce a string consisting of the single character with the specified value, just like <code>\"\\x{XXXX}\"</code> does.</p>\n\n<p>As such, you can use</p>\n\n<pre><code>print(\"unicode of $i is \".chr(hex($hex)).\"\\n\");\n</code></pre>\n\n<p>or just</p>\n\n<pre><code>print(\"unicode of $i is \".chr($i).\"\\n\");\n</code></pre>\n\n<hr>\n\n<p>Note that your program makes no sense without</p>\n\n<pre><code>use open ':std', ':encoding(UTF-8)';\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 10131324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2754db92b56c7c2bfa845a158363e3f9?s=128&d=identicon&r=PG&f=1", "display_name": "Questioner", "link": "https://stackoverflow.com/users/10131324/questioner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 845, "favorite_count": 0, "accepted_answer_id": 51940093, "answer_count": 3, "score": 6, "last_activity_date": 1534956981, "creation_date": 1534808778, "question_id": 51939835, "link": "https://stackoverflow.com/questions/51939835/perl-program-to-print-unicode-from-hex-value", "title": "Perl Program to Print Unicode From Hex Value", "body": "<p>I am starting up with Perl and confused on how to render unicode characters given a hex string variable.     </p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\n\nforeach my $i (0..10000) {\n    my $hex = sprintf(\"%X\", $i);\n    print(\"unicode of $i is \\x{$hex}\\n\");\n}\nprint(\"\\x{2620}\\n\");\nprint(\"\\x{BEEF}\\n\");\n</code></pre>\n\n<p>Gives me the warning: <code>Illegal hexadecimal digit '$' ignored at perl.pl line 9.</code></p>\n\n<p>and no value prints for <code>\\x{$hex}</code></p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": false, "score": 3, "last_activity_date": 1534806569, "last_edit_date": 1534806569, "creation_date": 1534805494, "answer_id": 51939476, "question_id": 51939405, "link": "https://stackoverflow.com/questions/51939405/if-condition-based-look-up-not-working/51939476#51939476", "title": "If condition based look up not working", "body": "<p>In Perl the comparison operators for numbers are <code>&lt;</code>, <code>==</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;</code>. If you use the string operators (<code>le</code>, <code>ge</code>, etc) you are comparing the numbers as strings.  So, for example, <code>10</code> is greater than <code>1</code> but less than <code>4</code>.</p>\n\n<p>Also note that you're doing redundant testing.  Consider</p>\n\n<pre><code>    if($_[0] &lt; 1)            { you didn't cover this case }\n    elsif($_[0] &lt;= 4)        { $x_id = \"x.1\"; }\n    elsif($_[0] &lt;= 8)        { $x_id = \"x.2\"; }\n    elsif($_[0] &lt;= 12)       { $x_id = \"x.3\"; }\n    etc...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1534805843, "last_edit_date": 1534805843, "creation_date": 1534805524, "answer_id": 51939480, "question_id": 51939405, "link": "https://stackoverflow.com/questions/51939405/if-condition-based-look-up-not-working/51939480#51939480", "title": "If condition based look up not working", "body": "<p><code>le</code> and <code>ge</code> are for <em>string comparisons</em>. Replace them with <code>&lt;=</code> and <code>&gt;=</code></p>\n\n<p>Alternatively you can write your function like this</p>\n\n<pre><code>sub get_xid {\n\n    my ($v) = @_;\n\n    return $v &lt; 1 || $v &gt; 32 ? \"\" : 'x.'.int(($v+3)/4);\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code> i: 1, x_id: x.1\n i: 2, x_id: x.1\n i: 3, x_id: x.1\n i: 4, x_id: x.1\n i: 5, x_id: x.2\n i: 6, x_id: x.2\n i: 7, x_id: x.2\n i: 8, x_id: x.2\n i: 9, x_id: x.3\n i: 10, x_id: x.3\n i: 11, x_id: x.3\n i: 12, x_id: x.3\n i: 13, x_id: x.4\n i: 14, x_id: x.4\n i: 15, x_id: x.4\n i: 16, x_id: x.4\n i: 17, x_id: x.5\n i: 18, x_id: x.5\n i: 19, x_id: x.5\n i: 20, x_id: x.5\n i: 21, x_id: x.6\n i: 22, x_id: x.6\n i: 23, x_id: x.6\n i: 24, x_id: x.6\n i: 25, x_id: x.7\n i: 26, x_id: x.7\n i: 27, x_id: x.7\n i: 28, x_id: x.7\n i: 29, x_id: x.8\n i: 30, x_id: x.8\n i: 31, x_id: x.8\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4313337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/221458a43fe48f2ab9d6aaa256c07e53?s=128&d=identicon&r=PG&f=1", "display_name": "Userdijkstra", "link": "https://stackoverflow.com/users/4313337/userdijkstra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "closed_date": 1534811440, "answer_count": 2, "score": -6, "last_activity_date": 1534806569, "creation_date": 1534804940, "last_edit_date": 1534805352, "question_id": 51939405, "link": "https://stackoverflow.com/questions/51939405/if-condition-based-look-up-not-working", "closed_reason": "Not suitable for this site", "title": "If condition based look up not working", "body": "<p>I want to look up a range, and return group id, and though a simple if based lookup would work. But, it is not working, I am not sure why.\nCan somebody help please.</p>\n\n<pre><code>#!/usr/bin/perl\n\nsub get_xid {\n        my $x_id = \"\";\n\n        if(($_[0] ge 1) &amp;&amp; ($_[0] le 4))        { $x_id = \"x.1\"; }\n        if(($_[0] ge 5) &amp;&amp; ($_[0] le 8))        { $x_id = \"x.2\"; }\n        if(($_[0] ge 9) &amp;&amp; ($_[0] le 12))       { $x_id = \"x.3\"; }\n        if(($_[0] ge 13) &amp;&amp; ($_[0] le 16))      { $x_id = \"x.4\"; }\n        if(($_[0] ge 17) &amp;&amp; ($_[0] le 20))      { $x_id = \"x.5\"; }\n        if(($_[0] ge 21) &amp;&amp; ($_[0] le 24))      { $x_id = \"x.6\"; }\n        if(($_[0] ge 25) &amp;&amp; ($_[0] le 28))      { $x_id = \"x.7\"; }\n        if(($_[0] ge 29) &amp;&amp; ($_[0] le 32))      { $x_id = \"x.8\"; }\n\n        return $x_id;\n}\n\nfor($i=1;$i&lt;=31;$i++) {\n        $x_id = &amp;get_xid($i);\n        print \" i: $i, x_id: $x_id\\n\";\n}\n</code></pre>\n\n<p>result:</p>\n\n<pre><code> i: 1, x_id: x.1\n i: 2, x_id: x.5\n i: 3, x_id: x.8\n i: 4, x_id: x.1\n i: 5, x_id: x.2\n i: 6, x_id: x.2\n i: 7, x_id: x.2\n i: 8, x_id: x.2\n i: 9, x_id: \n i: 10, x_id: x.1\n i: 11, x_id: x.1\n i: 12, x_id: x.1\n i: 13, x_id: x.4\n i: 14, x_id: x.4\n i: 15, x_id: x.4\n i: 16, x_id: x.4\n i: 17, x_id: x.5\n i: 18, x_id: x.5\n i: 19, x_id: x.5\n i: 20, x_id: x.5\n i: 21, x_id: x.6\n i: 22, x_id: x.6\n i: 23, x_id: x.6\n i: 24, x_id: x.6\n i: 25, x_id: x.7\n</code></pre>\n"}, {"tags": ["amazon-web-services", "perl", "amazon-s3", "pre-signed-url"], "owner": {"reputation": 11, "user_id": 10251860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/143188e5534bf0fe1d56864d56082c2f?s=128&d=identicon&r=PG&f=1", "display_name": "taylork", "link": "https://stackoverflow.com/users/10251860/taylork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1534798523, "creation_date": 1534798523, "question_id": 51938353, "link": "https://stackoverflow.com/questions/51938353/can-you-get-presigned-urls-using-perl-paws", "title": "Can you get presigned URLs using Perl Paws?", "body": "<p>Is it possible to get presigned URLs using Perl Paws?</p>\n\n<p>I am trying to download objects from an S3 bucket to a local server and have not been successful yet. There is a method to use GetObject and read the body to a file but the Objects I am trying to receive are .gz files so they cannot be read via GetObject.</p>\n\n<p>Any suggestions on alternatives are welcome.</p>\n"}, {"tags": ["perl", "awk"], "answers": [{"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 3, "last_activity_date": 1534800074, "last_edit_date": 1534800074, "creation_date": 1534798770, "answer_id": 51938406, "question_id": 51938319, "link": "https://stackoverflow.com/questions/51938319/awk-perl-call-command-with-input-blocks/51938406#51938406", "title": "Awk / perl call command with input blocks", "body": "<p>with <code>awk</code></p>\n\n<pre><code>$ awk -v RS= '{cmd=\"processor.sh\"; \n               print | cmd; \n               close(cmd)}' file\n</code></pre>\n\n<p>one advantage is your records can be of varying length as long as there is at least one empty line separating them.</p>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1534799845, "post_id": 51938505, "comment_id": 90827329, "body": "Alternative without <code>IPC::Run</code>: <code>perl -00 -ne &#39;open my $fh, &quot;|-&quot;, &quot;processor.sh&quot; or die $!; print $fh $_&#39;</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1534799282, "creation_date": 1534799282, "answer_id": 51938505, "question_id": 51938319, "link": "https://stackoverflow.com/questions/51938319/awk-perl-call-command-with-input-blocks/51938505#51938505", "title": "Awk / perl call command with input blocks", "body": "<pre class=\"lang-sh prettyprint-override\"><code>perl -MIPC::Run=run -00ne'run [ \"processor.sh\" ], \"&lt;\", \\$_'\n</code></pre>\n\n<p>Or if you want the trailing lines removed:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>perl -MIPC::Run=run -00nle'run [ \"processor.sh\" ], \"&lt;\", \\\"$_\\n\"'\n</code></pre>\n"}], "owner": {"reputation": 2890, "user_id": 3821009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8c7fb1f9e34d1b461b185b16dd447cad?s=128&d=identicon&r=PG&f=1", "display_name": "levant pied", "link": "https://stackoverflow.com/users/3821009/levant-pied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 51938505, "answer_count": 2, "score": -2, "last_activity_date": 1534833549, "creation_date": 1534798299, "question_id": 51938319, "link": "https://stackoverflow.com/questions/51938319/awk-perl-call-command-with-input-blocks", "title": "Awk / perl call command with input blocks", "body": "<p>I have a script called <code>processor.sh</code> that processes stdin. It processes a block of lines, like this:</p>\n\n<pre><code>address: abc\nphone: 123\nuser: def\n</code></pre>\n\n<p>Consider that I have the following file:</p>\n\n<pre><code>address: a1\nphone: p1\nuser: u1\n\naddress: a2\nphone: p2\nuser: u2\n\naddress: a3\nphone: p3\nuser: u3\n</code></pre>\n\n<p>I'd like to call <code>processor.sh</code> multiple times, once per block, and provide it with the block of text as-is to its stdin.</p>\n\n<p>I know it can be done by splitting into temporary files using something like <a href=\"https://unix.stackexchange.com/questions/76929/how-to-split-a-file-by-using-keyword-boundaries\">this</a>. I'm looking to avoid having to create temporary files, i.e. use pipes only.</p>\n\n<p>Is there a short (i.e. something that can be reasonably called a one-liner) way to do this?</p>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 373, "user_id": 8845620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0082695b3d26ff97841bb1e65862a0a?s=128&d=identicon&r=PG&f=1", "display_name": "UncleCarl", "link": "https://stackoverflow.com/users/8845620/unclecarl"}, "edited": false, "score": 0, "creation_date": 1534802454, "post_id": 51937372, "comment_id": 90828158, "body": "Maybe I don&#39;t understand. max_connections is used for limiting concurrent connections. It defaults to 1,000 and you are setting it to 100. <a href=\"https://metacpan.org/pod/Mojo::IOLoop#max_connections\" rel=\"nofollow noreferrer\">metacpan.org/pod/Mojo::IOLoop#max_connections</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 373, "user_id": 8845620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0082695b3d26ff97841bb1e65862a0a?s=128&d=identicon&r=PG&f=1", "display_name": "UncleCarl", "link": "https://stackoverflow.com/users/8845620/unclecarl"}, "edited": false, "score": 0, "creation_date": 1534842573, "post_id": 51937372, "comment_id": 90839908, "body": "@UncleCarl it says <i>incoming connections</i>, not outgoing. This is a web crawler, not a web server."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1534842810, "post_id": 51937372, "comment_id": 90840041, "body": "This is not the full code. How does the <code>$loop</code> know what to run?"}, {"owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1534843352, "post_id": 51937372, "comment_id": 90840320, "body": "@simbabque - This <i>is</i> the full code, save for omittinug URLs and similar that would give away too much context. I&#39;ll confess to ignorance and cargo-culting. My goal is to recursively make requests to the API which gives me org-tree connections. However the API refuses to handle more than a certain amount of connections (probably ~100) concurrently - and that&#39;s what I&#39;m trying to throttle. Maybe in the wrong way - apologies."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1534843430, "post_id": 51937372, "comment_id": 90840368, "body": "Just add some example.org URLs. I don&#39;t understand how the program starts. With that, I might be able to help."}, {"owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1534858788, "post_id": 51937372, "comment_id": 90849988, "body": "@simbabque  added more code - hope that helps"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1534865823, "post_id": 51937372, "comment_id": 90854637, "body": "Are you trying to talk to an Exchange? Does the regular API client we have on CPAN not work for you? I&#39;ve used that productively and have some knowledge on how to extend it."}], "answers": [{"comments": [{"owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "edited": false, "score": 0, "creation_date": 1536416118, "post_id": 52206153, "comment_id": 91420777, "body": "Yeeeah! Just a second before I was about to implement it with a Minion queue. Thanks."}, {"owner": {"reputation": 490, "user_id": 117896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bd7962ff55bee4341e18225d8af7b43?s=128&d=identicon&r=PG", "display_name": "Dotan Dimet", "link": "https://stackoverflow.com/users/117896/dotan-dimet"}, "edited": false, "score": 0, "creation_date": 1562230231, "post_id": 52206153, "comment_id": 100315579, "body": "I recommend using the actual module, because this isn&#39;t the full code - it uses a tiny utility class (:::Queue) which isn&#39;t reproduced here. Also, the current version  (1.15) removed the use of state to create the queue, which had the weird side-effect of making your Mojo::UserAgent object into a singleton."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 1, "last_activity_date": 1536243446, "creation_date": 1536243446, "answer_id": 52206153, "question_id": 51937372, "link": "https://stackoverflow.com/questions/51937372/can-i-limit-the-number-of-connections-for-mojoioloop/52206153#52206153", "title": "Can I limit the number of connections for Mojo::IOLoop?", "body": "<p>It sounds like you want <a href=\"https://metacpan.org/pod/Mojo::UserAgent::Role::Queued\" rel=\"nofollow noreferrer\">Mojo::UserAgent::Role::Queued</a>, but here's the entire module:</p>\n\n<pre><code>package Mojo::UserAgent::Role::Queued;\nuse Mojo::Base '-role';\nuse Scalar::Util 'weaken';\n\nour $VERSION = \"1.10\";\nuse Mojo::UserAgent::Role::Queued::Queue;\n\nhas max_active =&gt; sub { shift-&gt;max_connections };\n\naround start =&gt; sub {\n  my ($orig, $self, $tx, $cb) = @_;\n  state $queue //= Mojo::UserAgent::Role::Queued::Queue-&gt;new(\n    max_active =&gt; $self-&gt;max_active,\n    callback   =&gt; sub { $self-&gt;$orig(@_); }\n  );\n  if ($cb) {\n    $tx-&gt;on(finish =&gt; sub { $queue-&gt;tx_finish(); });\n    $queue-&gt;on( queue_empty =&gt; sub { $self-&gt;emit('queue_empty') });\n    $queue-&gt;enqueue([$tx, $cb]);\n  }\n  else {\n    return $orig-&gt;($self, $tx);    # Blocking calls skip the queue\n  }\n};\n</code></pre>\n\n<p>It creates a queue that knows how many connections it can work on simultaneously. It wraps the <code>start</code> so it doesn't run until the connection count drops below your threshold.</p>\n\n<p>I've done similar things with rate limiting by counting the connections in the last time period.</p>\n"}], "owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 52206153, "answer_count": 1, "score": 1, "last_activity_date": 1536243446, "creation_date": 1534793493, "last_edit_date": 1534858762, "question_id": 51937372, "link": "https://stackoverflow.com/questions/51937372/can-i-limit-the-number-of-connections-for-mojoioloop", "title": "Can I limit the number of connections for Mojo::IOLoop?", "body": "<p>I'm using Mojo::UserAgent to make recursive calls to a web API.</p>\n\n<p>At some point this fails - I suspect because the API has a limit on the number of calls from one client.</p>\n\n<p>Is it possible to limit the number of concurrent calls that Mojo::IOLoop makes?</p>\n\n<p>I'd like to be able to either limit or count and wait.</p>\n\n<p>Here's the code that makes the calls:</p>\n\n<pre><code>my $ua = Mojo::UserAgent-&gt;new();\n\nmy $loop = Mojo::IOLoop-&gt;singleton;\n$loop-&gt;max_connections(100);\n$loop-&gt;max_accepts(100);\n\nmy $url = Mojo::URL-&gt;new('https://outlook.office365.com/EWS/Exchange.asmx');\n# authentication omitted\n\n# start navigating the org tree\ntree($ua, 'some.person@acme.com');\n\nsub tree {\n    my ($ua, $email) = @_;\n\n    my $xml = $mt-&gt;vars(1)-&gt;render($template, { name =&gt;  $email });\n\n    my $tx = $ua-&gt;build_tx(POST =&gt; $url =&gt;\n           {\n            'Content-Type' =&gt; 'text/xml', \n            'Accept-Encoding' =&gt; 'None' \n            }\n            =&gt; $xml);\n    my $p = $ua-&gt;start_p($tx);\n\n    $p-&gt;then(sub {\n         my $tx = shift;\n         my $dom = $tx-&gt;res-&gt;dom;\n         my $reports = $dom-&gt;find('DirectReports Mailbox EmailAddress');\n         if ($reports-&gt;size) {\n             my @reports = @{$reports-&gt;map(sub { shift-&gt;all_text })-&gt;to_array};\n             for (@reports) {\n             print $email, $_;\n             tree($ua, $_)\n             }\n         }\n         })\n    -&gt;catch(sub {\n            my $err = shift;\n            warn \"Connection error: $err\";\n            warn join ' ', @_;\n    });\n}\n\n$loop-&gt;start;\n</code></pre>\n\n<p>and this is the template that gets posted:</p>\n\n<pre><code>&lt;soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n           xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n           xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"\n               xmlns:t=\"http://schemas.microsoft.com/exchange/services/2006/types\"&gt;\n  &lt;soap:Header&gt;\n    &lt;t:RequestServerVersion Version=\"Exchange2013_SP1\" /&gt;\n  &lt;/soap:Header&gt;\n  &lt;soap:Body&gt;\n    &lt;ResolveNames xmlns=\"http://schemas.microsoft.com/exchange/services/2006/messages\"\n                  xmlns:t=\"http://schemas.microsoft.com/exchange/services/2006/types\"\n          SearchScope=\"ActiveDirectory\"\n          ContactDataShape=\"AllProperties\"\n                  ReturnFullContactData=\"true\"&gt;\n      &lt;UnresolvedEntry&gt;&lt;%= $name %&gt;&lt;/UnresolvedEntry&gt;\n    &lt;/ResolveNames&gt;\n  &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n\n<p>This returns an XML file which contains - among other things - the emails of all of the direct reports, which are then used to recurse further. Can't post that, obviously.</p>\n"}, {"tags": ["arrays", "loops", "perl", "foreach", "global-variables"], "comments": [{"owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "edited": false, "score": 0, "creation_date": 1534777301, "post_id": 51933343, "comment_id": 90817083, "body": "awk &#39;{print $2}&#39; file1 &gt; temp1 ; egrep -f temp1 file2 | awk &#39;{print $2,$1,$4}&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1534784211, "creation_date": 1534784211, "answer_id": 51935372, "question_id": 51933343, "link": "https://stackoverflow.com/questions/51933343/definition-error-when-using-columns-in-one-file-to-find-matching-columns-in-anot/51935372#51935372", "title": "Definition error when using columns in one file to find matching columns in another file with perl", "body": "<p>Fixed:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\n\nmy $in_qfn          = $ARGV[0];\nmy $out_qfn         = $ARGV[1];\nmy $transcripts_qfn = \"/path/TranscriptInfo\";\n\nmy @transcripts;\n{\n   open(my $transcripts_fh, \"&lt;\", $transcripts_qfn)\n      or die(\"Can't open \\\"$transcripts_qfn\\\": $!\\n\");\n   while (&lt;$transcripts_fh&gt;) {\n      chomp;\n      push @transcripts, [ split(/\\t/, $_, -1) ];\n   }    \n}\n\n{\n   open(my $in_fh, \"&lt;\", $in_qfn)\n      or die(\"Can't open \\\"$in_qfn\\\": $!\\n\");\n   open(my $out_fh, \"&gt;\", $out_qfn)\n      or die(\"Can't create \\\"$out_qfn\\\": $!\\n\");\n   while (&lt;$in_fh&gt;) {\n      chomp;\n      my ($strand, $chr) = split(/\\t/, $_, -1);\n      for my $transcript (@transcripts) {\n         my $ref_chr    = $transcript-&gt;[0];\n         my $ref_strand = $transcript-&gt;[1];\n         if ($chr eq $ref_chr &amp;&amp; $strand eq $ref_strand) {\n            my $info = $transcript-&gt;[2];\n            say $out_fh join(\"\\t\", $strand, $chr, $info);\n         }\n      }\n   }\n}\n</code></pre>\n\n<hr>\n\n<p>That said, the above is very inefficient. Let's call N the number of lines in $transcript_qfn, and let's call M the number of lines in $in_qfn. The inner loop executes a number of times equal to N*M. In fact, it needs only execute N times.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\n\nmy $in_qfn          = $ARGV[0];\nmy $out_qfn         = $ARGV[1];\nmy $transcripts_qfn = \"/path/TranscriptInfo\";\n\nmy %to_print;\n{\n   open(my $in_fh, \"&lt;\", $in_qfn)\n      or die(\"Can't open \\\"$in_qfn\\\": $!\\n\");\n   while (&lt;$in_fh&gt;) {\n      chomp;\n      my ($strand, $chr) = split(/\\t/, $_, -1);\n      ++$to_print{$strand}{$chr};\n   }    \n}\n\n{\n   open(my $transcript_fh, \"&lt;\", $transcript_qfn)\n      or die(\"Can't open \\\"$transcript_qfn\\\": $!\\n\");\n   open(my $out_fh, \"&gt;\", $out_qfn)\n      or die(\"Can't create \\\"$out_qfn\\\": $!\\n\");\n   while (&lt;$transcript_fh&gt;) {\n      chomp;\n      my ($ref_chr, $ref_strand, $info) = split(/\\t/, $_, -1);\n      next if !$to_print{$ref_strand};\n      next if !$to_print{$ref_strand}{$ref_chr};\n      say $out_fh join(\"\\t\", $ref_strand, $ref_chr, $info);\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 10250361, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cwPUWx1-vKI/AAAAAAAAAAI/AAAAAAAAABc/RDBakg5L_9M/photo.jpg?sz=128", "display_name": "Adam Whisnant", "link": "https://stackoverflow.com/users/10250361/adam-whisnant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 51935372, "answer_count": 1, "score": 1, "last_activity_date": 1573119299, "creation_date": 1534776589, "last_edit_date": 1573119299, "question_id": 51933343, "link": "https://stackoverflow.com/questions/51933343/definition-error-when-using-columns-in-one-file-to-find-matching-columns-in-anot", "title": "Definition error when using columns in one file to find matching columns in another file with perl", "body": "<p>I have a tab delimited input file in the format:</p>\n\n<pre><code>+    Chr1    www\n-    Chr2    zzz\n...\n</code></pre>\n\n<p>I would like to go line by line against a reference tab delimited file (TRANSCRIPTS in the code below) in the format of:</p>\n\n<pre><code>Chr1    +    xxx    UsefulInfo1\nChr2    -    yyy    UsefulInfo2\n...\n</code></pre>\n\n<p>And would like an output that looks like:</p>\n\n<pre><code>+    Chr1    UsefulInfo1\n-    Chr2    UsefulInfo2\n...\n</code></pre>\n\n<p>Here is my attempt to take variable names from the command line, grab certain info from the input file, and append the useful info from the reference file:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse diagnostics;\n\nmy $inFile = $ARGV[0];\nmy $outFile = $ARGV[1];\n\nopen(INFILE, \"&lt;$inFile\") || die(\"Couldn't open $inFile: $!\\n\");\nopen(OUTFILE, \"&gt;$outFile\") || die(\"Couldn't create $outFile: $!\\n\");\n\nopen(TRANSCRIPTS, \"&lt;/path/TranscriptInfo\") || die(\"Couldn't open reference file!\");\nmy @transcripts = split(/\\t+/, &lt;TRANSCRIPTS&gt;);\nchomp @transcripts;\n\n#Define desired information from input for later\nwhile (my @columns = split(/\\t+/, &lt;INFILE&gt;)) {\n    chomp @columns;\n    my $strand = $columns[0];\n    my $chromosome = $columns[1];\n\n    #Attempt to search reference file line by line for matching criteria and copying a column of matching lines\n    foreach my $reference(@transcripts) {\n        my $refChr = $reference[0]; #Error for this line\n        my $refStrand = $reference[1]; #Error for this line\n        if ($refChr eq $chromosome &amp;&amp; $refStrand eq $strand) {\n            my $info = $reference[3]; #Error for this line\n            print OUTFILE \"$strand\\t$chromosome\\t\\$info\\n\";\n        }\n    }\n}\n\nclose(OUTFILE); close(INFILE);\n</code></pre>\n\n<p>At the moment I receive \"Global symbol \"@reference\" requires explicit package name.\"  What is the proper way to define this?  I'm not even entirely sure my foreach loop functions as desired even once defining the symbol properly.</p>\n\n<p>Any general advice would also be appreciated.  Forgive my ignorance, long-time lurker and no formal coding training beyond what I can teach myself.</p>\n"}, {"tags": ["perl", "tie"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1534773537, "post_id": 51931784, "comment_id": 90814740, "body": "Can you include sample input and expected output as well please?"}, {"owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1534773676, "post_id": 51931784, "comment_id": 90814830, "body": "@simbabque Hi :) Input file is it just the same of this <a href=\"https://stackoverflow.com/q/51636352/1195443\">stackoverflow.com/q/51636352/1195443</a>"}, {"owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1534773696, "post_id": 51931784, "comment_id": 90814847, "body": "The output is  &quot;$y/$m/$d;$time;$action;$user\\n&quot;;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1534773843, "post_id": 51931784, "comment_id": 90814948, "body": "Has Dave actually solved your problem in that last question you just linked? If so, you might want to accept his answer, or tell us how it didn&#39;t help. We do pay attention to these things around here, and some of us feel unappreciated if you accept their free help but don&#39;t give them credit. ;)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1534773859, "post_id": 51931784, "comment_id": 90814958, "body": "Please show us <i>actual</i> literal output. I have no idea what&#39;s in those variables."}, {"owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1534774170, "post_id": 51931784, "comment_id": 90815143, "body": "@simbabque Dave did not solve the problem, I tried to explain myself but in the end the question took a bad turn, to get a short version of the script. In these two weeks I studied a bit of things, I improved the script and I think I can meet the requirements using this form (never used before)."}, {"owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1534774789, "post_id": 51931784, "comment_id": 90815519, "body": "@simbabque I only noticed now that if I use the tie function, the value of $. does not report the line read at that time. Probably the mistake is just that. (My literal output is empity right now, with tie function)"}], "answers": [{"comments": [{"owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 0, "creation_date": 1534781969, "post_id": 51934094, "comment_id": 90819656, "body": "Thanks your answer is really very informative and undoubtedly resolutive, I immediately run tests to integrate your logic to the script"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 0, "creation_date": 1534790905, "post_id": 51934094, "comment_id": 90823674, "body": "@clarkseth: There should be nothing to &quot;integrate&quot;. This code should be a complete solution. It does everything from all versions of your code."}, {"owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 0, "creation_date": 1534798294, "post_id": 51934094, "comment_id": 90826761, "body": "I&#39;m inserting the jump line method into this solution"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 0, "creation_date": 1534799585, "post_id": 51934094, "comment_id": 90827247, "body": "@clarkseth: It would be far better to record the date/time last read, and ignore blocks that are less than that when next reading the same file. It would amount to just another <code>next unless</code> in the <code>while</code> loop, together with code to store and retrieve the date/time from the most recent block. Perhaps you can even use the file you&#39;re already writing and read the last record from it?"}, {"owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 0, "creation_date": 1534800236, "post_id": 51934094, "comment_id": 90827445, "body": "I had skipped this solution because I thought it was computationally more complex. I do a test :) thanks"}, {"owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 0, "creation_date": 1534954525, "post_id": 51934094, "comment_id": 90892612, "body": "Thank you for all &lt;3 i&#39;ve completed today my script with more functionalities"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 1, "creation_date": 1534955920, "post_id": 51934094, "comment_id": 90893428, "body": "@clarkseth: You may want to submit your code to <a href=\"https://codereview.stackexchange.com\"><i>Code Review</i></a> as you&#39;re clearly not fluent with Perl yet and you may learn a lot from the feedback there. That applies especially if you&#39;re hesitant to reveal what you&#39;ve written!"}, {"owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 0, "creation_date": 1534968766, "post_id": 51934094, "comment_id": 90899269, "body": ":) ok, i&#39;ll write a post there on tomorrow. Thank you again"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1534790761, "last_edit_date": 1534790761, "creation_date": 1534779167, "answer_id": 51934094, "question_id": 51931784, "link": "https://stackoverflow.com/questions/51931784/get-value-from-next-n-rows-of-a-file/51934094#51934094", "title": "Get value from next N rows of a file", "body": "\n\n<p>It looks like you're getting very lost here. I've written a working program that processes the data you showed in your previous question; it should at least form a stable basis for you to continue your work. I think it's fairly straightforward, but ask if there's anything that's not obvious in the Perl documentation</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse feature 'say';\nuse autodie;  # Handle IO failures automatically\n\nuse constant IN_DIR =&gt; '/tmp/appo/log';\n\nchdir IN_DIR; # Change to input directory\n              # Status handled by autodie\n\nfor my $file ( glob 'logrotate_*.log' ) {\n\n    say $file;\n    say '-' x length $file;\n    say \"\";\n\n    open my $fh, '&lt;', $file; # Status handled by autodie\n\n    local $/ = \"\";           # Enable block mode\n\n    while ( &lt;$fh&gt; ) {\n\n        my @lines = split /\\n/;\n\n        next unless $lines[0] =~ /\n            ^\n            \\# \\d.\\d .+?\n            \\# (\\d\\d\\d\\d) \\s (\\d\\d) \\s (\\d\\d)\n            \\s\n            ( \\d\\d : \\d\\d : \\d\\d : \\d\\d\\d )\n        /x;\n        my ( $y, $m, $d, $time ) = ($1, $2, $3, $4);\n        $time =~ s/.*\\K:/./;  # Change decimal point to dot for seconds\n\n        next unless $lines[2] =~ /^(Log(?:in|out))/;\n        my $action = $1;\n\n        next unless $lines[3] =~ /^User:\\s+(.*\\S)/ and $1 ne 'Guest';\n        my $user = $1;\n\n        print \"$y/$m/$d;$time;$action;$user\\n\";\n    }\n\n    say \"\";\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>logrotate_0.0.log\n-----------------\n\n2018/05/24;11:05:04.011;Login;USER4\n2018/05/24;11:04:59.410;Login;USER4\n2018/05/24;11:05:07.100;Logout;USER3\n2018/05/24;11:07:21.314;Login;USER2\n2018/05/24;11:07:21.314;Login;USER2\n2018/05/26;10:48:02.458;Logout;USER2\n2018/05/28;10:00:25.000;Logout;USER0\n\nlogrotate_1.0.log\n-----------------\n\n2018/05/29;10:09:45.969;Login;USER4\n2018/05/29;11:51:06.541;Login;USER1\n2018/05/30;11:54:03.906;Login;USER4\n2018/05/30;11:59:59.156;Logout;USER3\n2018/05/30;08:32:11.348;Login;USER4\n2018/05/30;11:09:54.978;Login;USER2\n2018/06/01;08:11:30.008;Logout;USER2\n2018/06/01;11:11:29.658;Logout;USER1\n2018/06/02;12:05:00.465;Logout;USER9\n2018/06/02;12:50:00.065;Login;USER9\n2018/05/24;10:43:38.683;Login;USER1\n</code></pre>\n"}], "owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 51934094, "answer_count": 1, "score": 0, "last_activity_date": 1534790761, "creation_date": 1534771635, "last_edit_date": 1534777078, "question_id": 51931784, "link": "https://stackoverflow.com/questions/51931784/get-value-from-next-n-rows-of-a-file", "title": "Get value from next N rows of a file", "body": "<p>I'm having problems intercepting the contents of the lines above what I'm reading <code>$lines[0]</code> as following <code>foreach</code> loop</p>\n\n<pre><code>my $IN_DIR  = \"/tmp/appo/log\";              # Input Directories\nmy $jumprow = '&lt;number of row to skip&gt;';    # This is a value\n\nforeach my $INPUT ( glob( \"$IN_DIR/logrotate_*.log\" ) ) {\n\n    open( my $fh, '&lt;', $INPUT ) or die $!;\n\n    while ( &lt;$fh&gt; ) {\n\n        next unless $. &gt; $jumprow;\n\n        my @lines = split /\\n/;\n        my $i     = 0;\n\n        foreach my $lines ( @lines ) {\n\n            if ( $lines[$i] =~ m/\\A#\\d.\\d.+#\\d{4}\\s\\d{2}\\s\\d{2}\\s\\d{2}:\\d{2}:\\d{2}:\\d{3}#\\+\\d+#\\w+#\\/\\w+\\/\\w+\\/Authentication/ ) {\n\n                # Shows only LOGIN/LOGOUT access type and exclude GUEST users\n\n                if ( $lines[ $i + 2 ] =~ m/Login/ || $lines[ $i + 2 ] =~ m/Logout/ &amp;&amp; $lines[ $i + 3 ] !~ m/Guest/ ) {\n\n                    my ( $y, $m, $d, $time ) = $lines[$i] =~ /\\A#\\d.\\d.+#(\\d{4})\\s(\\d{2})\\s(\\d{2})\\s(\\d{2}:\\d{2}:\\d{2}:\\d{3})/;\n\n                    my ( $action ) = $lines[ $i + 2 ] =~ /\\A(\\w+)/;\n                    my ( $user )   = $lines[ $i + 3 ] =~ /\\w+:\\s(.+)/;\n\n                    print \"$y/$m/$d;$time;$action;$user\\n\";\n                }\n            }\n            else {\n                next;    # Is this next technically necessary according to you?\n            }\n\n            $i++;\n        }\n    }\n\n    close( $fh );\n}\n</code></pre>\n\n<p>The <a href=\"https://perldoc.perl.org/Tie/File.html\" rel=\"nofollow noreferrer\"><code>Tie::File</code></a>\nmodule could help me    </p>\n\n<pre><code>my $IN_DIR  = \"/tmp/appo/log\";              # Input Directories\nmy $jumprow = '&lt;number of row to skip&gt;';    # This is a value\n\nforeach my $INPUT ( glob( \"$IN_DIR/logrotate_*.log\" ) ) {\n\n    tie @lines, 'Tie::File', $INPUT, mode =&gt; O_RDONLY;\n            or die $!;\n\n    my $i = $.;\n\n    next unless $i &gt; $jumprow;\n\n    foreach my $lines ( @lines ) {\n\n        if ( $lines[$i] =~ m/\\A#\\d.\\d.+#\\d{4}\\s\\d{2}\\s\\d{2}\\s\\d{2}:\\d{2}:\\d{2}:\\d{3}#\\+\\d+#\\w+#\\/\\w+\\/\\w+\\/Authentication/ ) {\n\n            # Shows only LOGIN/LOGOUT access type and exclude GUEST users\n\n            if ( $lines[ $i + 2 ] =~ m/Login/ || $lines[ $i + 2 ] =~ m/Logout/ &amp;&amp; $lines[ $i + 3 ] !~ m/Guest/ ) {\n\n                my ( $y, $m, $d, $time ) = $lines[$i] =~ /\\A#\\d.\\d.+#(\\d{4})\\s(\\d{2})\\s(\\d{2})\\s(\\d{2}:\\d{2}:\\d{2}:\\d{3})/;\n\n                my ( $action ) = $lines[ $i + 2 ] =~ /\\A(\\w+)/;\n                my ( $user )   = $lines[ $i + 3 ] =~ /\\w+:\\s(.+)/;\n\n                print \"$y/$m/$d;$time;$action;$user\\n\";\n            }\n        }\n        else {\n            next;    # Is this next technically necessary according to you?\n        }\n\n        $i++;\n    }\n}\n</code></pre>\n\n<p>Could you tell me if my declaration with <code>Tie::File</code> is correct or not?\nThis is only a part of my master script as indicated in following guide <a href=\"https://stackoverflow.com/help/mcve\"><strong><em>mcve</em></strong></a></p>\n\n<p>Actually without <code>tie</code>, my master scripts works only with <code>$lines[0]</code>, it doesn't take value from <code>$lines[$i+2]</code> or <code>$lines[$i+3]</code></p>\n"}, {"tags": ["perl", "canvas", "gtk2"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 6920800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8aad840893bf8dddaa9bae758c57b78?s=128&d=identicon&r=PG&f=1", "display_name": "lesrol", "link": "https://stackoverflow.com/users/6920800/lesrol"}, "edited": false, "score": 0, "creation_date": 1534836742, "post_id": 51933590, "comment_id": 90836916, "body": "Alas, using Cairo instead of Gnome2::Canvas is not an option."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 165, "user_id": 6920800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8aad840893bf8dddaa9bae758c57b78?s=128&d=identicon&r=PG&f=1", "display_name": "lesrol", "link": "https://stackoverflow.com/users/6920800/lesrol"}, "edited": false, "score": 0, "creation_date": 1534840031, "post_id": 51933590, "comment_id": 90838655, "body": "I really think you should consider trying to upgrade your app to Gtk3 and Cairo. According to <a href=\"https://wiki.gnome.org/Projects/GTK-Perl\" rel=\"nofollow noreferrer\">the Perl GTK project page</a>, <code>Gnome2::Canvas</code> is considered deprecated which is also <a href=\"https://developer.gnome.org/libgnomecanvas/\" rel=\"nofollow noreferrer\">confirmed</a> by its backend library&#39;s (<code>libgnomecanvas</code>) home page. The transistion from GTK2 to GTK3 was done 8 years ago, and in that process <code>libgnomecanvas</code> was deprecated in favor of <code>libcairo</code>, see <a href=\"https://lists.debian.org/debian-devel-announce/2009/04/msg00002.html\" rel=\"nofollow noreferrer\">this discussion</a> for more information"}, {"owner": {"reputation": 165, "user_id": 6920800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8aad840893bf8dddaa9bae758c57b78?s=128&d=identicon&r=PG&f=1", "display_name": "lesrol", "link": "https://stackoverflow.com/users/6920800/lesrol"}, "edited": false, "score": 0, "creation_date": 1534846860, "post_id": 51933590, "comment_id": 90842308, "body": "I would be happy to upgrade to Gtk3. But it appears to be impossible to install gtk2-perl on MS Windows. The Win32 binaries available ten years ago are either missing or broken. The Sisyphusion repository contains some working binaries, but they only work with Gtk2, not Gtk3."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 165, "user_id": 6920800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8aad840893bf8dddaa9bae758c57b78?s=128&d=identicon&r=PG&f=1", "display_name": "lesrol", "link": "https://stackoverflow.com/users/6920800/lesrol"}, "edited": false, "score": 0, "creation_date": 1534849990, "post_id": 51933590, "comment_id": 90844225, "body": "Ok, I see the problem you have... I am not using Windows, so I&#39;m sorry I cannot give good advice here. Have you tried <a href=\"https://github.com/MaxPerl/perl-Gtk3-windows-installer\" rel=\"nofollow noreferrer\">this</a> Gtk3 installer for Window?"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1534777425, "creation_date": 1534777425, "answer_id": 51933590, "question_id": 51930259, "link": "https://stackoverflow.com/questions/51930259/vertical-text-on-a-gnome2canvas-perl-gtk2/51933590#51933590", "title": "Vertical text on a Gnome2::Canvas (Perl/Gtk2)", "body": "<p>I think the use of the <code>gravity</code> attribute in the Pango markup is not supported, at least I was not able to make it work. </p>\n\n<p>However, instead of using <code>Gnome2::Canvas</code>, you could try using the <code>rotate()</code> function in <code>Cairo::Context</code>. Here is an example using <code>Gtk3</code>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Gtk3 '-init';\nuse Glib qw/TRUE FALSE/;\nuse Cairo;\nuse Pango;\n\nuse constant PI     =&gt; 3.1415927;\n\nmy $window = Gtk3::Window-&gt;new('toplevel');\n$window-&gt;set_title(\"Cairo Basics\");\n$window-&gt;set_position(\"mouse\");\n$window-&gt;set_default_size(600, 400);\n$window-&gt;set_border_width(5);\n$window-&gt;signal_connect (delete_event =&gt; sub { Gtk3-&gt;main_quit });\n\nmy $frame = Gtk3::Frame-&gt;new(\"Cairo Drawings\");\n$window-&gt;add($frame);\nmy $drawable = Gtk3::DrawingArea-&gt;new;\n$drawable-&gt;signal_connect( draw =&gt; sub { cairo_draw($drawable, @_ ) });\n$frame-&gt;add($drawable);\n$window-&gt;show_all;\nGtk3-&gt;main;\n\nsub cairo_draw {\n    my ( $drawable, $widget, $context, $ref_status ) = @_;\n\n    my $pango_layout = $drawable-&gt;create_pango_layout(\"\");\n    $pango_layout-&gt;set_markup(\n        \"&lt;span foreground = '#FF4444'\"\n        .\" size = '20000' face='sans' style='normal' weight='bold'&gt;\"\n        . \"This is vertical&lt;/span&gt;\"\n    );\n    my $pango_context = $pango_layout-&gt;get_context();\n    $context-&gt;move_to(200, 100);\n    $context-&gt;rotate(PI*(90/180));\n    Pango::Cairo::show_layout( $context, $pango_layout );    \n    return FALSE;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/O7m0p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O7m0p.png\" alt=\"enter image description here\"></a></p>\n\n<p>Alternatively, you can skip the Pango markup altogether and only use Cairo:</p>\n\n<pre><code>sub cairo_draw {\n    my ( $drawable, $widget, $context, $ref_status ) = @_;\n\n    $context-&gt;set_source_rgba(1, 0.4, 0.4, 1);\n    $context-&gt;select_font_face( \"Sans\", \"normal\", \"bold\" );\n    $context-&gt;set_font_size( 35 );\n    $context-&gt;move_to(220, 50);\n    $context-&gt;rotate(PI*(90/180));\n    $context-&gt;show_text( \"This is vertical\");\n    return FALSE;\n}\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 6920800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8aad840893bf8dddaa9bae758c57b78?s=128&d=identicon&r=PG&f=1", "display_name": "lesrol", "link": "https://stackoverflow.com/users/6920800/lesrol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1534777425, "creation_date": 1534766272, "question_id": 51930259, "link": "https://stackoverflow.com/questions/51930259/vertical-text-on-a-gnome2canvas-perl-gtk2", "title": "Vertical text on a Gnome2::Canvas (Perl/Gtk2)", "body": "<p>Drawing on a Gnome2::Canvas, I want to draw X and Y axes, with a horizontal label and a vertical label.</p>\n\n<p>Gnome2::Canvas::Text objects allow Pango markup. A Pango tag like this should work, but doesn't.</p>\n\n<pre><code>&lt;span gravity=\"west\"&gt;...&lt;/span&gt;\n</code></pre>\n\n<p>Is there any way to overcome Gtk's reluctance to draw rotated text?</p>\n\n<pre><code>#!/usr/bin/perl\npackage vertical;\n\nuse strict;\nuse diagnostics;\nuse warnings;\n\nuse Gtk2 '-init';\nuse Gnome2::Canvas;\n\nmy $window = Gtk2::Window-&gt;new('toplevel');\n$window-&gt;set_title('Hello world');\n$window-&gt;set_position('center');\n$window-&gt;set_default_size(500, 500);\n$window-&gt;signal_connect('delete-event' =&gt; sub {\n\n    Gtk2-&gt;main_quit();\n    exit;\n});\n\nmy $canvasFrame = Gtk2::Frame-&gt;new(undef);\n$window-&gt;add($canvasFrame);\n$canvasFrame-&gt;set_border_width(3);\n\nmy $canvasScroller = Gtk2::ScrolledWindow-&gt;new();\n$canvasFrame-&gt;add($canvasScroller);\n$canvasScroller-&gt;set_border_width(3);\n$canvasScroller-&gt;set_policy('always','always');\n\nmy $canvas = Gnome2::Canvas-&gt;new();\n$canvasScroller-&gt;add($canvas);\n$canvas-&gt;set_scroll_region(0, 0, 400, 400);\n$canvas-&gt;set_center_scroll_region(1);\n\n# White background\nmy $canvasObj = Gnome2::Canvas::Item-&gt;new (\n    $canvas-&gt;root(),\n    'Gnome2::Canvas::Rect',\n    x1 =&gt; 0,\n    y1 =&gt; 0,\n    x2 =&gt; 400,\n    y2 =&gt; 400,\n    fill_color =&gt; '#FFFFFF',\n    outline_color =&gt; '#FFFFFF',\n);\n$canvasObj-&gt;lower_to_bottom();\n\n# Black text\nmy $canvasObj2 = Gnome2::Canvas::Item-&gt;new(\n    $canvas-&gt;root(),\n    'Gnome2::Canvas::Text',\n    x =&gt; 100,\n    y =&gt; 300,\n    fill_color =&gt; '#000000',\n    font =&gt; 'Sans',\n    size =&gt; 20000,\n    anchor =&gt; 'GTK_ANCHOR_W',\n    markup =&gt; \"this is &lt;span gravity=\\\"east\\\"&gt;not vertical&lt;/span&gt;\",\n);\n$canvasObj2-&gt;raise_to_top();\n\n$window-&gt;show_all();\n\nGtk2-&gt;main();\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 5, "creation_date": 1534748049, "post_id": 51925292, "comment_id": 90800208, "body": "Not sure what you want to understand, and not going to really post an answer as the question is off topic here and it is of no use to copy/paste documentation here, but in short. It assigns values to keys, pushes key/value pairs to hash <code>%LEX</code> by doing <code>push @{$LEX{$val}}, $key;</code> Then <code>foreach $val (keys %LEX)</code> you use the key/value pairs again. To understand it better see <a href=\"https://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\">perldoc</a>"}, {"owner": {"reputation": 594, "user_id": 1190328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4edafb7a4a3df3f9c971f61b31595968?s=128&d=identicon&r=PG", "display_name": "grunt", "link": "https://stackoverflow.com/users/1190328/grunt"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1534757742, "post_id": 51925292, "comment_id": 90805327, "body": "You are wrong. <code>push @{$LEX{$val}}, $key</code> pushes key/value pairs to a hash holding an array. This is the tricky point hinted to in the question name. otherwise it would be something like $LEX{$val}=$key."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 4, "creation_date": 1534757799, "post_id": 51925292, "comment_id": 90805353, "body": "I am not wrong, I gave a very short comment to your unclear question."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1534762292, "post_id": 51925292, "comment_id": 90807798, "body": "@grunt: Gerhard is describing the entire code sample correctly. Please be more polite."}], "answers": [{"tags": [], "owner": {"reputation": 2617, "user_id": 1184510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c3152289ebed501d45a3a3488b45720?s=128&d=identicon&r=PG", "display_name": "memowe", "link": "https://stackoverflow.com/users/1184510/memowe"}, "is_accepted": false, "score": 2, "last_activity_date": 1534748494, "creation_date": 1534748494, "answer_id": 51925550, "question_id": 51925292, "link": "https://stackoverflow.com/questions/51925292/understand-perl-snippet-with-and/51925550#51925550", "title": "Understand Perl snippet with @ and %", "body": "<p>Inside a <code>foreach</code> loop a local scalar variable is assigned each value of the list of values in the round brackets one after another:</p>\n\n<pre><code>for my $foo (1 .. 3) {\n    say \"-&gt; $foo\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>-&gt; 1\n-&gt; 2\n-&gt; 3\n</code></pre>\n\n<p>Here <code>keys %LEX</code> returns the <em>list</em> of keys of the Hash <code>%LEX</code>, so here <code>$val</code> contains a key of <code>%LEX</code> each time the loop is executed. In this case the variable is poorly named, I would consider <code>$key</code> instead.</p>\n\n<p>The next line, <code>$head = $LEX{$val}-&gt;[0];</code> implies, that the <em>values</em> of the hash <code>%LEX</code> are <em>array references</em>. <code>$LEX{$val}</code> is a single scalar value and the arrow operator dereferences the array. Then its first element is used.</p>\n\n<p>See <a href=\"http://p3rl.org/perlref\" rel=\"nofollow noreferrer\">perlref</a> and <a href=\"http://p3rl.org/perldata\" rel=\"nofollow noreferrer\">perldata</a> for details using references and nested data structures.</p>\n"}], "owner": {"reputation": 594, "user_id": 1190328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4edafb7a4a3df3f9c971f61b31595968?s=128&d=identicon&r=PG", "display_name": "grunt", "link": "https://stackoverflow.com/users/1190328/grunt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1534748494, "creation_date": 1534747303, "question_id": 51925292, "link": "https://stackoverflow.com/questions/51925292/understand-perl-snippet-with-and", "title": "Understand Perl snippet with @ and %", "body": "<p>I have following Perl code. I read @ is for array and % hash, so I'm a bit confused re what code does, especially the <code>foreach $pron (keys %LEX)</code> statement. What is the purpose of each element in this line &amp; is LEX an array or hash? </p>\n\n<pre><code>while ( $line = &lt;STDIN&gt; ) {\n     chomp $line;\n     ($key, $val) = split \" \", $line, 2;\n     $val = join(\" \", split(\" \", $val));\n     push @{$LEX{$val}}, $key;\n   }\n\n   open(MAP, \"| sort -u &gt; $ARGV[1]\") or die \"Cannot open $ARGV[1]\\n\";\n   foreach $val (keys %LEX) {\n     $head = $LEX{$val}-&gt;[0];\n     foreach $alt (@{$LEX{$val}}) {\n       print MAP \"$alt,$head\\n\";\n     }\n   }\n</code></pre>\n"}, {"tags": ["python", "perl", "pydoc", "perldoc"], "answers": [{"comments": [{"owner": {"reputation": 532, "user_id": 6623469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ebc0962a7ca106f4294fe9cd3ba0c3?s=128&d=identicon&r=PG&f=1", "display_name": "krish___na", "link": "https://stackoverflow.com/users/6623469/krish-na"}, "edited": false, "score": 0, "creation_date": 1534749163, "post_id": 51925480, "comment_id": 90800709, "body": "Scenario is my script expects some command line arguments. When I use either the way you suggested or pydoc, it&#39;s asking for those arguments. Ideally, it should only be displaying doc strings."}, {"owner": {"reputation": 532, "user_id": 6623469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ebc0962a7ca106f4294fe9cd3ba0c3?s=128&d=identicon&r=PG&f=1", "display_name": "krish___na", "link": "https://stackoverflow.com/users/6623469/krish-na"}, "edited": false, "score": 0, "creation_date": 1534750517, "post_id": 51925480, "comment_id": 90801431, "body": "It worked @Honie. Though I had to intend the entire code in this IF block. Thanks."}], "tags": [], "owner": {"reputation": 2137, "user_id": 7547749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b630b46900e59c5ceec524b6eed391c9?s=128&d=identicon&r=PG&f=1", "display_name": "PythonSherpa", "link": "https://stackoverflow.com/users/7547749/pythonsherpa"}, "is_accepted": true, "score": 2, "last_activity_date": 1534749529, "last_edit_date": 1534749529, "creation_date": 1534748196, "answer_id": 51925480, "question_id": 51924925, "link": "https://stackoverflow.com/questions/51924925/how-to-view-only-doc-text-with-pydoc/51925480#51925480", "title": "How to view only doc text with pydoc", "body": "<p>Probably the best way is to work in Python (instead of the command line). Let's take the module <code>sys</code> as an example. First import your module and then use <code>help()</code>, like this:</p>\n\n<pre><code>import sys\nhelp(sys)\n</code></pre>\n\n<p>If you want to see the docstrings:</p>\n\n<pre><code>print(sys.__doc__)\n</code></pre>\n\n<p>For modules you develop yourself, you can build in a guard so that the module is not executed, as described in the <a href=\"https://docs.python.org/3/library/pydoc.html\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>Note: In order to find objects and their documentation, pydoc imports the module(s) to be documented. Therefore, any code on module level will be executed on that occasion. Use an <code>if __name__ == '__main__':</code> guard to only execute code when a file is invoked as a script and not just imported.</p>\n</blockquote>\n"}], "owner": {"reputation": 532, "user_id": 6623469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ebc0962a7ca106f4294fe9cd3ba0c3?s=128&d=identicon&r=PG&f=1", "display_name": "krish___na", "link": "https://stackoverflow.com/users/6623469/krish-na"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 51925480, "answer_count": 1, "score": 1, "last_activity_date": 1534749529, "creation_date": 1534745220, "question_id": 51924925, "link": "https://stackoverflow.com/questions/51924925/how-to-view-only-doc-text-with-pydoc", "title": "How to view only doc text with pydoc", "body": "<p>Being a perl developer I am aware of the <strong>perldoc</strong> utility. I am new to python  and I was looking for same and found <strong>pydoc</strong>. \nBut the problem with pydoc is it is <strong>also executing my script</strong> while I want to see only doc written inside triple quotes.\nAny help would be appreciated.</p>\n"}, {"tags": ["perl", "file-exists"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1534742558, "post_id": 51923348, "comment_id": 90798489, "body": "The <code>while (&lt;&gt;)</code> that you try is a little special: The <code>&lt;&gt;</code> reads lines from files which are submitted to the program at start.  So if you say <code>script.pl file1 file2</code> then <code>while (&lt;&gt;)</code> in the progam <code>script.pl</code> will read <i>lines</i> from <code>file1</code> and <code>file2</code>, one after another.  Not what you want here. (Once you <code>opendir</code> then you can do as mob&#39;s answer shows.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1534743602, "post_id": 51923348, "comment_id": 90798741, "body": "(A bit more precisely, <code>&lt;&gt;</code> opens files which names are in <code>@ARGV</code> and reads them)"}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 1, "creation_date": 1534880016, "post_id": 51923348, "comment_id": 90861521, "body": "Hi @georgetovrea I do believe you have already asked this question, and I think it has been answered <a href=\"https://stackoverflow.com/questions/51832909/how-to-check-file-exists-and-get-file-size-by-substring/\" title=\"how to check file exists and get file size by substring\">stackoverflow.com/questions/51832909/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 3, "last_activity_date": 1534739909, "creation_date": 1534739909, "answer_id": 51924247, "question_id": 51923348, "link": "https://stackoverflow.com/questions/51923348/if-file-exists-with-wildcard/51924247#51924247", "title": "If file exists with wildcard?", "body": "<p>It looks like you are trying to use the <code>opendir</code>-<code>readdir</code> pattern, which would look like</p>\n\n<pre><code>opendir(DIR, \"/home/httpd/doc/$user/2018\") || die \"Unable to open log/location\";\nforeach my $file (readdir DIR) {\n    if ($file =~ /\\/2018-08-20-\\d+-\\d+-\\d+/) {\n        print \"file exists\\n\";\n    }\n}\nclosedir DIR;\n</code></pre>\n\n<p>but a more concise way (with more edge cases but would probably work in your case) would be to use <code>glob</code></p>\n\n<pre><code>if (glob(\"/home/httpd/doc/$user/2018/2018-08-20-*\")) {\n    print \"file exists\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1581, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1615467077, "creation_date": 1534730845, "last_edit_date": 1615467077, "question_id": 51923348, "link": "https://stackoverflow.com/questions/51923348/if-file-exists-with-wildcard", "title": "If file exists with wildcard?", "body": "<p>I need to verify if a file exists, but the file name changes. At least the last part of the file name does due to appending time (hh-mm-ss).</p>\n<p>So basically, I need to see if file yyyy-MM-dd-hh-mm-ss exists irrespective of what the  hh-mm-ss is.\nI'm trying to do a wildcard search but it doesn't find the file.\nFor example, I want to check if the file <code>/home/httpd/doc/$user/$year/2018-08-20-*</code> exists.</p>\n<p>Is it possible to use <code>*</code> for the filename variable? Or an other better way?</p>\n<p>I'm trying to check if a file exists, but with a wildcard.  Here is my code:</p>\n<pre><code>opendir(DIR, &quot;/home/httpd/doc/$user/2018&quot;) || die &quot;Unable to open log/location&quot;;\nwhile(&lt;&gt;){\n    if($_ =~ /\\/2018-08-20-\\d+-\\d+-\\d+/) {\n        print &quot;file exists\\n&quot;;\n      }\n }\n</code></pre>\n"}, {"tags": ["python", "perl"], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1534706644, "post_id": 51917834, "comment_id": 90791911, "body": "Or to keep the calling syntax: <code>test(); *test = sub { print &#39;here&#39;; };</code>."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 7, "last_activity_date": 1534682969, "creation_date": 1534682969, "answer_id": 51917834, "question_id": 51917662, "link": "https://stackoverflow.com/questions/51917662/perl-and-python-difference-in-predeclaring-functions/51917834#51917834", "title": "Perl and Python difference in predeclaring functions", "body": "<p>Perl uses a multi-phase compilation model. Subroutines are defined in an early phase before the actual run time, so no forward declarations are necessary.</p>\n\n<p>In contrast, Python executes function definitions at runtime. The variable which holds a function must be assigned (implicitly by the <code>def</code>) before it can be called as a function.</p>\n\n<p>If we translate these runtime semantics back to Perl, the code would look like:</p>\n\n<pre><code># at runtime:\n$test-&gt;();\n\nmy $test = \\&amp;test;\n\n# at compile time:\nsub test { print 'here' }\n</code></pre>\n\n<p>Note that the <code>$test</code> variable is accessed before it was declared and assigned.</p>\n"}], "owner": {"reputation": 39, "user_id": 10245944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682c4e709e8162cc36501012fa83ad4a?s=128&d=identicon&r=PG&f=1", "display_name": "Spyder", "link": "https://stackoverflow.com/users/10245944/spyder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1534706494, "creation_date": 1534681654, "last_edit_date": 1534706494, "question_id": 51917662, "link": "https://stackoverflow.com/questions/51917662/perl-and-python-difference-in-predeclaring-functions", "title": "Perl and Python difference in predeclaring functions", "body": "\n\n<h3>Perl</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code> test();\n\n sub test {\n   print 'here';\n }\n</code></pre>\n\n<h3>Output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>here\n</code></pre>\n\n<h3>Python</h3>\n\n<pre class=\"lang-python prettyprint-override\"><code>test()\n\ndef test():\n   print('here')\n   return\n</code></pre>\n\n<h3>Output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Traceback (most recent call last):\n  File \"pythontest\", line 2, in &lt;module&gt;\n    test()\nNameError: name 'test' is not defined\n</code></pre>\n\n<p>I understand that in Python we need to define functions before calling them and hence the above code doesn't work for Python.</p>\n\n<p>I thought it was same with Perl but it works!</p>\n\n<p>Could someone explain why is it working in the case of Perl?</p>\n"}, {"tags": ["arrays", "perl", "multidimensional-array", "arrayofarrays"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1534657741, "post_id": 51914432, "comment_id": 90779647, "body": "When you say &quot;delete&quot; do you mean to remove that element altogether (so that in the end the array has one element less), or to replace it with an empty string or <code>undef</code> (as the question itself says)?  (2) How large is your array, typically?"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 1, "creation_date": 1534662730, "post_id": 51914432, "comment_id": 90780678, "body": "<code>If</code> statements use <code>==</code> and <code>eq</code> and not single <code>=</code> :)"}, {"owner": {"reputation": 23, "user_id": 10237060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PEOaw.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/10237060/emma"}, "edited": false, "score": 0, "creation_date": 1534684345, "post_id": 51914432, "comment_id": 90785769, "body": "Hi Zdim. I wish to remove the element altogether. My arrays vary in size, but can be on average between hundred and thousands of elements in size. Thanks for the question."}, {"owner": {"reputation": 23, "user_id": 10237060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PEOaw.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/10237060/emma"}, "edited": false, "score": 0, "creation_date": 1534684377, "post_id": 51914432, "comment_id": 90785782, "body": "Hi Gerhard. Thanks for the information. I will update my code and question."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10237060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PEOaw.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/10237060/emma"}, "edited": false, "score": 0, "creation_date": 1534687197, "post_id": 51916370, "comment_id": 90786596, "body": "Hi zdim. Thank you for your response. I tried to use grep instead of the foreach loop. I came up against two issues: 1) @ary_to_del needed to be dereferenced and 2) it only kept the array I wanted to delete. How do I use this to eliminate only the array I wish to delete? The foreach loop did exactly as you said it would."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 23, "user_id": 10237060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PEOaw.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/10237060/emma"}, "edited": false, "score": 0, "creation_date": 1534708769, "post_id": 51916370, "comment_id": 90792408, "body": "@Emma  right -- (2) only those which <i>aren&#39;t</i> equal should pass so the condition need be negated.  (1) the method <code>compare</code> needs an array <i>reference</i>, as in the first use.  Fixed.  Sorry about that"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1534888815, "last_edit_date": 1534888815, "creation_date": 1534671520, "answer_id": 51916370, "question_id": 51914432, "link": "https://stackoverflow.com/questions/51914432/how-to-delete-a-specific-array-in-an-array-of-array-references/51916370#51916370", "title": "How to delete a specific array in an array of array references?", "body": "<p>Code such as</p>\n\n<pre><code>if (@array_1 == @array_2)   # same number of elements?\n</code></pre>\n\n<p>tests whether the arrays have the same number of elements.  This is because the <code>==</code> operator imposes the <a href=\"https://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">scalar context</a> on both sides, and in scalar context an array is evaluated to return the number of its elements.</p>\n\n<p>To test whether arrays are equal you need to compare their elements, with a few additional checks and refinements. As for many things in Perl, there are also modules that do that for us.</p>\n\n<p>With <a href=\"https://metacpan.org/pod/Array::Compare\" rel=\"nofollow noreferrer\">Array::Compare</a> for example, in its simplest usage:</p>\n\n<pre><code>use Array::Compare;\n\nmy $comp = Array::Compare-&gt;new;    \n...\nif ($comp-&gt;compare(\\@ary1, \\@ary2))  # they are equal\n</code></pre>\n\n<p>There is more that can be set up with the module, and there is a number of other modules for all kind of work with arrays and lists.</p>\n\n<p>The code in the question also uses <code>=</code> (assignment!) instead of comparison <code>==</code>.</p>\n\n<p>With a few simplifications</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Data::Dump qw(dd);  # to show complex data structures\n\nuse Array::Compare;\n\nmy $cobj = Array::Compare-&gt;new;\n\nmy @data = ( \n   ['CTCTTGCCTCAATCATATAT', 'CTCTTGCCTCATTGATATAT', ... ],\n   ['CACTTGCCTCAATGTAATAT', 'TATCATTGCCCAATTTAAGT', ... ],\n   ...\n);\n\nmy @ary_to_del = ('CACTTGCCTCAATGTAATAT', 'TATCATTGCCCAATTTAAGT', ...);\n\nforeach my $ra (@data) {\n    @$ra = () if $cobj-&gt;compare(\\@ary_to_del, $ra);\n}\n\ndd \\@data;\n</code></pre>\n\n<p>This \"empties\" the anonymous arrays in <code>@data</code> that are equal to <code>@ary_to_del</code>, as code in the question does, but their array references remain in <code>@data</code> even as there is nothing in them.  </p>\n\n<p>If you were rather to remove such elements altogether then overwrite the array</p>\n\n<pre><code>@data = grep { not $cobj-&gt;compare(\\@ary_to_del, $_) } @data;\n</code></pre>\n\n<p>instead of the <code>foreach</code> loop above.  This uses <a href=\"https://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\">grep</a> to filter the input list, whereby only elements for which the code block evaluates true are returned in the output list, assigned to <code>@data</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 10237060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PEOaw.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/10237060/emma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 51916370, "answer_count": 1, "score": 2, "last_activity_date": 1534888815, "creation_date": 1534652232, "question_id": 51914432, "link": "https://stackoverflow.com/questions/51914432/how-to-delete-a-specific-array-in-an-array-of-array-references", "title": "How to delete a specific array in an array of array references?", "body": "<p>I am interested in deleting a specific array from an array of array references. Towards this end I loop through the array references and look for a match. If a match is found, I attempt to delete this specific array reference by setting it to equal nothing. There are two strange things that happen in the script that I have written: \n1) The code seems to identify the presence of a match between the array of interest and an array reference, even before the array reference that matches it is processed. \n2) In trying to delete one specific array reference, I end up deleting all of them. Here is my code: </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @array_1 = ('CTCTTGCCTCAATCATATAT', 'CTCTTGCCTCATTGATATAT', 'CTCTTGCCTCAATCATATAT', 'CACTTGCCTCAATGAAATTT', 'GTCTTGCCTCATTGATAAAT', 'CACTTGCCTCAATGTAATAT', 'CTCTTCCCTCAATGATTTAA', 'CACTTGCCTCAATGATATAT', 'CTCTTGCCTCATTGATATAT', 'CTCTTGCCTCAATGTTATAT', 'CTGATGCCTCATTGATATAT', 'CTGTTGGCTCAATCATATAT');\nmy @array_2 = ('CACTTGCCTCAATGTAATAT', 'TATCATTGCCCAATTTAAGT', 'CACTTGCCTCAATGATATAT', 'CTCTTCCCTCAATGATTTAA', 'CTCTTGCCTCAATGTTATAT', 'CTGTTGGCTCAATCATATAT', 'CTGATGCCTCATTGATATAT', 'GTCTTGCCTCATTGATAAAT', 'CACTTGCCTCAATGAAATTT');\nmy @array_3 = ('TATCATTGCCCAATTTAAGT', 'TTTCTTTGCCGAATATAAGT', 'TTTCTATGCGCAATTTAAGT', 'TATCTTAGCCCAATTTTTGT', 'TTTCTTTGCCCAATATATGT', 'TTTCTTTGGCCTATTTTTGT', 'TTTGTTTGGCCATTTTATGT', 'TTTCTTTGGCGAATTTATCT', 'TTTCATTGCCCAATTATTGT', 'TTTCTTTGCCCAAAATAAGT', 'CACTTGCCTCAATGTAATAT');\nmy @array_4 = ('TTTCTTTGCCCAATATATGT', 'TTTCTTTGCCGAATATAAGT', 'TTTCTATGCGCAATTTAAGT', 'TATCTTAGCCCAATTTTTGT', 'TTTCTTTGGCCTATTTTTGT', 'TTTGTTTGGCCATTTTATGT', 'TTTCTTTGGCGAATTTATCT', 'TTTCATTGCCCAATTATTGT', 'TATCATTGCCCAATTTAAGT', 'TTTCTTTGCCCAAAATAAGT', 'CTCTTGCCTCAATCATATAT');\n\nmy $array_1_ref = \\@array_1;\nmy $array_2_ref = \\@array_2;\nmy $array_3_ref = \\@array_3;\nmy $array_4_ref = \\@array_4;\n\nmy @array_to_delete = ('CACTTGCCTCAATGTAATAT', 'TATCATTGCCCAATTTAAGT', 'CACTTGCCTCAATGATATAT', 'CTCTTCCCTCAATGATTTAA', 'CTCTTGCCTCAATGTTATAT', 'CTGTTGGCTCAATCATATAT', 'CTGATGCCTCATTGATATAT', 'GTCTTGCCTCATTGATAAAT', 'CACTTGCCTCAATGAAATTT');\nprint \"Array to delete: \", join(\", \", @array_to_delete), \"\\n\";\n\nmy @array_of_array_references = ($array_1_ref, $array_2_ref, $array_3_ref, $array_4_ref);\n\nfor (my $i = 0; $i &lt;= $#array_of_array_references; $i++){\n    print \"\\n\", \"A single array in the array of array references: \", join(\", \", @{$array_of_array_references[$i]}), \"\\n\";\n    if (@array_to_delete = @{$array_of_array_references[$i]}){\n            print \"Both arrays match!\\n\";\n            @{$array_of_array_references[$i]} = ();\n    }\n}\nfor (my $i = 0; $i &lt;= $#array_of_array_references; $i++){\n    print \"\\n\", \"A single array in the array of array references after removing one: \", join(\", \", @{$array_of_array_references[$i]}), \"\\n\";\n}\n</code></pre>\n\n<p>The output is: </p>\n\n<pre><code>Array to delete: CACTTGCCTCAATGTAATAT, TATCATTGCCCAATTTAAGT, CACTTGCCTCAATGATATAT, CTCTTCCCTCAATGATTTAA, CTCTTGCCTCAATGTTATAT, CTGTTGGCTCAATCATATAT, CTGATGCCTCATTGATATAT, GTCTTGCCTCATTGATAAAT, CACTTGCCTCAATGAAATTT\n\nA single array in the array of array references: CTCTTGCCTCAATCATATAT, CTCTTGCCTCATTGATATAT, CTCTTGCCTCAATCATATAT, CACTTGCCTCAATGAAATTT, GTCTTGCCTCATTGATAAAT, CACTTGCCTCAATGTAATAT, CTCTTCCCTCAATGATTTAA, CACTTGCCTCAATGATATAT, CTCTTGCCTCATTGATATAT, CTCTTGCCTCAATGTTATAT, CTGATGCCTCATTGATATAT, CTGTTGGCTCAATCATATAT\nBoth arrays match!\n\nA single array in the array of array references: CACTTGCCTCAATGTAATAT, TATCATTGCCCAATTTAAGT, CACTTGCCTCAATGATATAT, CTCTTCCCTCAATGATTTAA, CTCTTGCCTCAATGTTATAT, CTGTTGGCTCAATCATATAT, CTGATGCCTCATTGATATAT, GTCTTGCCTCATTGATAAAT, CACTTGCCTCAATGAAATTT\nBoth arrays match!\n\nA single array in the array of array references: TATCATTGCCCAATTTAAGT, TTTCTTTGCCGAATATAAGT, TTTCTATGCGCAATTTAAGT, TATCTTAGCCCAATTTTTGT, TTTCTTTGCCCAATATATGT, TTTCTTTGGCCTATTTTTGT, TTTGTTTGGCCATTTTATGT, TTTCTTTGGCGAATTTATCT, TTTCATTGCCCAATTATTGT, TTTCTTTGCCCAAAATAAGT, CACTTGCCTCAATGTAATAT\nBoth arrays match!\n\nA single array in the array of array references: TTTCTTTGCCCAATATATGT, TTTCTTTGCCGAATATAAGT, TTTCTATGCGCAATTTAAGT, TATCTTAGCCCAATTTTTGT, TTTCTTTGGCCTATTTTTGT, TTTGTTTGGCCATTTTATGT, TTTCTTTGGCGAATTTATCT, TTTCATTGCCCAATTATTGT, TATCATTGCCCAATTTAAGT, TTTCTTTGCCCAAAATAAGT, CTCTTGCCTCAATCATATAT\nBoth arrays match!\n\nA single array in the array of array references after removing one: \n\nA single array in the array of array references after removing one: \n\nA single array in the array of array references after removing one: \n\nA single array in the array of array references after removing one: \n</code></pre>\n\n<p>Expected output: </p>\n\n<pre><code>Array to delete: CACTTGCCTCAATGTAATAT, TATCATTGCCCAATTTAAGT, CACTTGCCTCAATGATATAT, CTCTTCCCTCAATGATTTAA, CTCTTGCCTCAATGTTATAT, CTGTTGGCTCAATCATATAT, CTGATGCCTCATTGATATAT, GTCTTGCCTCATTGATAAAT, CACTTGCCTCAATGAAATTT\n\nA single array in the array of array references: CTCTTGCCTCAATCATATAT, CTCTTGCCTCATTGATATAT, CTCTTGCCTCAATCATATAT, CACTTGCCTCAATGAAATTT, GTCTTGCCTCATTGATAAAT, CACTTGCCTCAATGTAATAT, CTCTTCCCTCAATGATTTAA, CACTTGCCTCAATGATATAT, CTCTTGCCTCATTGATATAT, CTCTTGCCTCAATGTTATAT, CTGATGCCTCATTGATATAT, CTGTTGGCTCAATCATATAT\n\nA single array in the array of array references: CACTTGCCTCAATGTAATAT, TATCATTGCCCAATTTAAGT, CACTTGCCTCAATGATATAT, CTCTTCCCTCAATGATTTAA, CTCTTGCCTCAATGTTATAT, CTGTTGGCTCAATCATATAT, CTGATGCCTCATTGATATAT, GTCTTGCCTCATTGATAAAT, CACTTGCCTCAATGAAATTT\nBoth arrays match!\n\nA single array in the array of array references: TATCATTGCCCAATTTAAGT, TTTCTTTGCCGAATATAAGT, TTTCTATGCGCAATTTAAGT, TATCTTAGCCCAATTTTTGT, TTTCTTTGCCCAATATATGT, TTTCTTTGGCCTATTTTTGT, TTTGTTTGGCCATTTTATGT, TTTCTTTGGCGAATTTATCT, TTTCATTGCCCAATTATTGT, TTTCTTTGCCCAAAATAAGT, CACTTGCCTCAATGTAATAT\n\nA single array in the array of array references: TTTCTTTGCCCAATATATGT, TTTCTTTGCCGAATATAAGT, TTTCTATGCGCAATTTAAGT, TATCTTAGCCCAATTTTTGT, TTTCTTTGGCCTATTTTTGT, TTTGTTTGGCCATTTTATGT, TTTCTTTGGCGAATTTATCT, TTTCATTGCCCAATTATTGT, TATCATTGCCCAATTTAAGT, TTTCTTTGCCCAAAATAAGT, CTCTTGCCTCAATCATATAT\n\nA single array in the array of array references after removing one: CTCTTGCCTCAATCATATAT, CTCTTGCCTCATTGATATAT, CTCTTGCCTCAATCATATAT, CACTTGCCTCAATGAAATTT, GTCTTGCCTCATTGATAAAT, CACTTGCCTCAATGTAATAT, CTCTTCCCTCAATGATTTAA, CACTTGCCTCAATGATATAT, CTCTTGCCTCATTGATATAT, CTCTTGCCTCAATGTTATAT, CTGATGCCTCATTGATATAT, CTGTTGGCTCAATCATATAT\n\nA single array in the array of array references after removing one: TATCATTGCCCAATTTAAGT, TTTCTTTGCCGAATATAAGT, TTTCTATGCGCAATTTAAGT, TATCTTAGCCCAATTTTTGT, TTTCTTTGCCCAATATATGT, TTTCTTTGGCCTATTTTTGT, TTTGTTTGGCCATTTTATGT, TTTCTTTGGCGAATTTATCT, TTTCATTGCCCAATTATTGT, TTTCTTTGCCCAAAATAAGT, CACTTGCCTCAATGTAATAT\n\nA single array in the array of array references after removing one: TTTCTTTGCCCAATATATGT, TTTCTTTGCCGAATATAAGT, TTTCTATGCGCAATTTAAGT, TATCTTAGCCCAATTTTTGT, TTTCTTTGGCCTATTTTTGT, TTTGTTTGGCCATTTTATGT, TTTCTTTGGCGAATTTATCT, TTTCATTGCCCAATTATTGT, TATCATTGCCCAATTTAAGT, TTTCTTTGCCCAAAATAAGT, CTCTTGCCTCAATCATATAT\n</code></pre>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1534660877, "post_id": 51914369, "comment_id": 90780287, "body": "See also <a href=\"https://stackoverflow.com/q/51004489/2173773\">How to call a function (defined in shell script) in a Perl script</a> and <a href=\"https://stackoverflow.com/q/27581085/2173773\">Running system command under interactive bash shell</a>"}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 3, "creation_date": 1534661575, "post_id": 51914369, "comment_id": 90780454, "body": "Its generally a bad idea to use aliases in a script because that means the behaviour can vary depending on where it is run, which is a support nightmare. It is better to use functions instead."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1534665757, "post_id": 51914369, "comment_id": 90781289, "body": "<code>$1</code> in the alias definition doesn&#39;t mean what you hope it means. Anyway, the only thing you really need to know about aliases is, use functions instead."}], "answers": [{"comments": [{"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1534652573, "post_id": 51914430, "comment_id": 90778831, "body": "Thanks. Where in the script does the shopt go? In the system call?"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1534653349, "post_id": 51914430, "comment_id": 90778950, "body": "I tried <code>system(&#39;source ~&#47;.bash_profile; shopt -s expand_aliases; &#39; . $cmd);</code> but the aliases are not working. I&#39;m probably doing it wrong. I also put shopt in the .bash_profile script."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1534663677, "post_id": 51914430, "comment_id": 90780873, "body": "The real beef is &quot;don&#39;t do that&quot;."}], "tags": [], "owner": {"reputation": 28476, "user_id": 6862601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ppP5k.jpg?s=128&g=1", "display_name": "codeforester", "link": "https://stackoverflow.com/users/6862601/codeforester"}, "is_accepted": false, "score": 1, "last_activity_date": 1534652230, "creation_date": 1534652230, "answer_id": 51914430, "question_id": 51914369, "link": "https://stackoverflow.com/questions/51914369/how-do-you-load-bash-profile-for-bash-commands-run-from-perl-script/51914430#51914430", "title": "How do you load bash_profile for bash commands run from perl script?", "body": "<p>You can't source in a Bash script into a Perl script.  The bash_profile has to be sourced in by the shell that executes the command.  When Perl runs <code>system</code>, it forks a new shell each time.</p>\n\n<p>You have to source in the bash_profile for each command that you run through <code>system</code>:</p>\n\n<pre><code>system('source ~/.bash_profile; ' + $cmd);\n</code></pre>\n\n<p>One more thing, <code>system</code> invokes a non-interactive shell.  So, your Bash aliases defined in .bash_profile won't work unless you invoke:</p>\n\n<pre><code>shopt -s expand_aliases\n</code></pre>\n\n<p>inside that script</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1534793760, "last_edit_date": 1534793760, "creation_date": 1534662854, "answer_id": 51915384, "question_id": 51914369, "link": "https://stackoverflow.com/questions/51914369/how-do-you-load-bash-profile-for-bash-commands-run-from-perl-script/51915384#51915384", "title": "How do you load bash_profile for bash commands run from perl script?", "body": "<p>The <a href=\"https://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">system</a> forks a process in which it runs a shell, which is non-login and non-interactive; so no initialization is done and you get no aliases. Also note that the shell used is <code>/bin/sh</code>, which is generally a link to another shell.  This is often <code>bash</code> but not always, so run <code>bash</code> explicitly.</p>\n\n<p>To circumvent this you need to source the file with aliases, but as <code>bash</code> man page says</p>\n\n<blockquote>\n  <p>Aliases are not expanded when the shell is not interactive, unless the expand_aliases shell option is set using shopt (see the description of shopt under SHELL BUILTIN COMMANDS below).</p>\n</blockquote>\n\n<p>Thus you need <code>shopt -s expand_aliases</code>, as mentioned. But there is another screw: on that same physical line aliases are not yet available; so it won't work like this in a one-liner.</p>\n\n<p>I'd also recommend to put aliases in <code>.bashrc</code>, or in a separate file that is sourced.</p>\n\n<p>Solutions</p>\n\n<ul>\n<li><p>Add <code>shopt -s expand_aliases</code> to your <code>~/.bashrc</code>, and <em>before the aliases are defined</em> (or the file with them sourced), and run <code>bash</code> as a login shell</p>\n\n<pre><code>system('/bin/bash', '-cl', 'source ~/.bashrc; command');\n</code></pre>\n\n<p>where <code>-l</code> is short for <code>--login</code>. </p>\n\n<p>In my tests the <code>source ~/.bashrc</code> wasn't needed; however, the man page says</p>\n\n<blockquote>\n  <p>When  bash  is  invoked  as an interactive login shell, or as a non-interactive shell with the --login option, it first reads and executes commands from the file <code>/etc/profile</code>, if that file exists.  After reading that  file, it  looks  for <code>~/.bash_profile</code>, <code>~/.bash_login</code>, and <code>~/.profile</code>, in that order, and reads and executes commands from the first one that exists and is readable.</p>\n</blockquote>\n\n<p>and goes on to specify that <code>~/.bashrc</code> is read when an interactive shel that is not login runs. So I added explicit sourcing.</p>\n\n<p>In my tests sourcing <code>.bashrc</code> (with <code>shopt</code> added) while not running as a login shell didn't work, and I am not sure why.  </p>\n\n<p>This is a little heavy-handed. Also, initialization may be undesirable to run from a script.</p></li>\n<li><p>Source <code>~/.bashrc</code> and issue <code>shopt</code> command, <em>and then a newline</em> before the command</p>\n\n<pre><code>system('/bin/bash', '-c', \n    'source ~/.bashrc; shopt -s expand_aliases\\ncommand');\n</code></pre>\n\n<p>Really. It works.</p></li>\n</ul>\n\n<p>Finally, is this necessary?  It asks for trouble, and there is probably a better design.</p>\n\n<p>Other comments</p>\n\n<ul>\n<li><p>The backticks (<a href=\"https://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\">qx</a>) is context-aware. If it's used in list context &ndash; its return assigned to an array, for example &ndash; then the command's output is returned as a list of lines. When you use it as the argument for <code>split</code> then it <em>is</em> in the scalar context so it does return all output in one string.  Just drop <code>split</code></p>\n\n<pre><code>my @last_commands = `bash -ic 'set -o history; history $lines`;\n</code></pre>\n\n<p>where I also use <code>history N</code> to get last <code>N</code> lines. In this case the newlines stay.</p></li>\n<li><p><code>history N</code> returns last <code>N</code> lines of history so there is no need to pipe to <code>last</code></p></li>\n<li><p>Regex substitution in a <code>map</code> can be done without changing the original</p>\n\n<pre><code>map { s/^\\s+\\d+\\s+//r } @last_commands;\n</code></pre>\n\n<p>With <code>/r</code> modifier the <code>s///</code> operator returns the new string, not changing the original.</p></li>\n<li><p>No need to explicitly use <code>$_</code> in the last <code>grep</code>, and no need for parenthesis in regex</p>\n\n<pre><code>grep { not /^r |^history |^rm ?/ } ...\n</code></pre>\n\n<p>or </p>\n\n<pre><code>grep { not /^(?:r|history|rm)[ ]?/ } ...\n</code></pre>\n\n<p>where parens are now needed, but as it is only for grouping the <code>?:</code> makes it not capture the match.  I use <code>[ ]</code> to emphasize that there is an intended space; this is not necessary.   </p>\n\n<p>I also added <code>?</code> to make space optional since <code>history</code> (and <code>r</code>?) may have no space.</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1534689773, "post_id": 51915489, "comment_id": 90787347, "body": "` eval &quot;$(printlast &quot;$1&quot;)&quot;` doesn&#39;t seem to work. I modified my perl script to return the commands separated by semicolons. The eval bash command returns <code>-bash: 2: command not found</code>"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 1, "creation_date": 1534699485, "post_id": 51915489, "comment_id": 90790029, "body": "@StevieD Thanks for the feedback, I didn&#39;t have a chance to test the code until now. I removed the quotes around the argument to <code>eval</code> (duh) and switched back to Perl for the <code>history</code> post-processing for portability and predictability."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1534717788, "post_id": 51915489, "comment_id": 90794295, "body": "Works now. My bash skills are non-existent and the quoting or not quoting of stuff confuses the hell out of me. I&#39;ve never tried to learn bash though. Guess it&#39;s time as I want to do more to automate things. I don&#39;t see any advantage to keeping things in bash as much as possible, though. Perl is great at these kinds of tasks and, I think, much more readable and easier to maintain."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1534741005, "post_id": 51915489, "comment_id": 90798113, "body": "The second paragraph explains in some detail why you <i>need</i> to solve this particular problem in Bash. I completely agree that modern scripting languages are much preferred for many things, though I now prefer Python over Perl."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1534741119, "post_id": 51915489, "comment_id": 90798145, "body": "I get why you need bash to output the result of the commands. I&#39;m just saying I would not try to replace the entire perl script with bash in this case."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1534741288, "post_id": 51915489, "comment_id": 90798186, "body": "The replacement I wrote which calls <code>history</code> in the curent shell avoids a number of complications with that approach, and is obviously much simpler. The shell trivially has access to its current history, while making it visible to a subprocess is contorted and not entirely robust."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1534741522, "post_id": 51915489, "comment_id": 90798230, "body": "Oh, I didn&#39;t see the perl one-liner. You changed the sed command you had there."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1534743445, "post_id": 51915489, "comment_id": 90798700, "body": "Yeah, it was hard to know whether it was failing for you because you have a different <code>sed</code> version or because I had a mistake there. It worked for me but refactoring it back to Perl made it entirely portable (because there are not multiple Perl dialects, and Perl is in practice installed everywhere anyway)."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1534745108, "post_id": 51915489, "comment_id": 90799185, "body": "Well, I learned a lot from this answer and the previous. Thanks for your help. Most importantly, I learned it&#39;s finally time to bone up on bash. )"}], "tags": [], "owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": false, "score": 2, "last_activity_date": 1534699322, "last_edit_date": 1534699322, "creation_date": 1534664032, "answer_id": 51915489, "question_id": 51914369, "link": "https://stackoverflow.com/questions/51914369/how-do-you-load-bash-profile-for-bash-commands-run-from-perl-script/51915489#51915489", "title": "How do you load bash_profile for bash commands run from perl script?", "body": "<p>The proper solution is to have your Perl script just <em>print</em> the commands, and make your current interactive shell <code>eval</code> the string printed from your history. (I would probably get rid of Perl entirely but that's beside the point here.)</p>\n\n<p>If the commands get evaluated in the current shell, you avoid many contextual problems which would be very hard or even intractable with <code>system()</code> or generally anything involving a new process. For example, a subprocess cannot have access to non-exported variables in the current shell. <code>var=\"foo\", echo \"$var\"; r 1</code> is going to be very hard to solve correctly with your current approach. Using the current interactive shell will also naturally and easily solve the problems you were having with trying to get a noninteractive subshell act like an interactive one.</p>\n\n<p>Aliases suck anyway, so let's redefine <code>r</code> as a function:</p>\n\n<pre><code>r(){\n    history -w\n    eval $(printlast \"$1\")\n}\n</code></pre>\n\n<p>... where refactoring <code>runlast</code> into a different script <code>printlast</code> is a trivial additional requirement. Or maybe just turn it into a (much simpler!) shell function:</p>\n\n<pre><code>printlast () {\n    history \"$1\" |\n    perl -ne 's/^\\s*\\d+\\s+\\*?//; print unless m/^(history|rm?)($|\\s)'\n}\n</code></pre>\n\n<p>With this, you can also get rid of <code>history -w</code> from the <code>r</code> definition.</p>\n\n<p>Notice how we are using Perl where it is useful; but the main functionality makes sense to keep in the shell when you're dealing with the shell.</p>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1896, "favorite_count": 1, "accepted_answer_id": 51915384, "answer_count": 3, "score": 3, "last_activity_date": 1534793760, "creation_date": 1534651509, "last_edit_date": 1534664451, "question_id": 51914369, "link": "https://stackoverflow.com/questions/51914369/how-do-you-load-bash-profile-for-bash-commands-run-from-perl-script", "title": "How do you load bash_profile for bash commands run from perl script?", "body": "<p><p>I wrote  simple command that lets me run the last N commands from terminal history. It looks like this: <code>$&gt; r 3</code> which will replay the last 3 commands.</p>\n\n<p>I have the following alias in my bash profile:\n<code>alias r=\"history -w; runlast $1\"</code></p>\n\n<p>And then the following simple perl script for the <code>runlast</code> command:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy $lines = $ARGV[0] || exit;\n\nmy @last_commands = split /\\n/, \n    `bash -ic 'set -o history; history' | tail -$lines`;\n\n@last_commands = \n    grep { $_ !~ /(^r |^history |^rm )/ } \n    map { local $_ = $_; s/^\\s+\\d+\\s+//; $_ } \n    @last_commands;\n\nforeach my $cmd (@last_commands) {\n  system(\"$cmd\");\n}\n</code></pre>\n\n<p>This works but my bash profile has aliases and other features (e.g. color output) I want the perl script to have access to. How do I load the bash profile for perl so it runs the bash commands with my bash profile? I read somewhere that if you \"source the bash profile\" for perl you can get it to work. So I tried adding <code>source ~/.bash_profile;</code> to my <code>r</code> command alias but that didn't have an effect. I'm not sure if I was doing that correctly, though.</p>\n"}, {"tags": ["perl", "network-programming"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534649405, "post_id": 51913720, "comment_id": 90778400, "body": "You&#39;ve provided absolutely no information about your problem. What makes you think it&#39;s wrong? What MAC address do you see? What network interfaces are on your machine?"}, {"owner": {"reputation": 9, "user_id": 10237508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4184624e7a51feb68ca9569bcebdf4cc?s=128&d=identicon&r=PG", "display_name": "pPointer", "link": "https://stackoverflow.com/users/10237508/ppointer"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534650799, "post_id": 51913720, "comment_id": 90778577, "body": "Hi ikegami, it&#39;s like the real mac-address: <code>00:50:56:b6:5e:17</code> but when packet received it&#39;s: <code>c0:bf:c0:89:6a:09</code>, i tried with different devices i installed ubuntu on my laptop and tested and same when recieve packet i find the source: <code>c0:bf:c0:89:6a:09</code>. Tested on ubuntu/debian and same issue. I&#39;m not sure if this module have something wrong so it fill them wrongly or what, i need help regarding this. you can try with simple code i posted to confirm this issue."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1534651023, "post_id": 51913720, "comment_id": 90778608, "body": "Wait, you&#39;re running tcpdump on the receiver? Is the received on the same LAN as the sender? If so, that&#39;s your issue. Are you aware that MAC addresses are only used when sending information over a LAN? If you&#39;re getting stuff from a router, you&#39;ll see the router&#39;s MAC address."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534651037, "post_id": 51913720, "comment_id": 90778610, "body": "IP packets don&#39;t have MAC addresses, so no, the module has nothing to do with it. It could be selecting a different interface thatn you are expecting, but that&#39;s it."}, {"owner": {"reputation": 9, "user_id": 10237508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4184624e7a51feb68ca9569bcebdf4cc?s=128&d=identicon&r=PG", "display_name": "pPointer", "link": "https://stackoverflow.com/users/10237508/ppointer"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534651436, "post_id": 51913720, "comment_id": 90778663, "body": "I&#39;m running a tcpdump on the receiver just i capature them as .pcap then check on wireshark and see that the source mac is wrong. I don&#39;t run tcpdump at the sender. Internet interface: Ethernet 01. I&#39;m not sure so if not the module who filling the source mac?"}, {"owner": {"reputation": 9, "user_id": 10237508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4184624e7a51feb68ca9569bcebdf4cc?s=128&d=identicon&r=PG", "display_name": "pPointer", "link": "https://stackoverflow.com/users/10237508/ppointer"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534651664, "post_id": 51913720, "comment_id": 90778692, "body": "It&#39;s not LAN. If you tried to send packet to any ip, it should include your right mac-address if i understand. In this case it include a wrong mac, i don&#39;t know much about this. Can you explain me?"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 10237508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4184624e7a51feb68ca9569bcebdf4cc?s=128&d=identicon&r=PG", "display_name": "pPointer", "link": "https://stackoverflow.com/users/10237508/ppointer"}, "edited": false, "score": 0, "creation_date": 1534652294, "post_id": 51914334, "comment_id": 90778780, "body": "I don&#39;t get you well, but i tried another software send a packet and i listen to it. It&#39;s same mac, so problem seems not in the module but as you explained."}], "tags": [], "owner": {"reputation": 3705, "user_id": 8334991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v0H6m.jpg?s=128&g=1", "display_name": "Alexandre Fenyo", "link": "https://stackoverflow.com/users/8334991/alexandre-fenyo"}, "is_accepted": true, "score": 1, "last_activity_date": 1534706262, "last_edit_date": 1534706262, "creation_date": 1534651098, "answer_id": 51914334, "question_id": 51913720, "link": "https://stackoverflow.com/questions/51913720/netrawip-fill-source-mac-address-wrongly-ubuntu/51914334#51914334", "title": "Net::RawIP fill source mac-address wrongly (Ubuntu)", "body": "<p>This is simply because the source MAC address you see with tcpdump is the one of the last router, just before the receiver. Not the one of the sending host: <strong>the receiving host is not on the same local network than the sender</strong>, so the IP packet that contains the UDP payload is routed. So the sender MAC address is lost just after the first router. And the one received is the one of the last router.</p>\n\n<p>Note that you could even have no MAC address at all, using another layer 2 interconnect than wired Ethernet or Wi-Fi (think of PPP, some VPN, ...).</p>\n\n<p>MAC addresses are only used by the local link layer. Not by the network layer.</p>\n"}], "owner": {"reputation": 9, "user_id": 10237508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4184624e7a51feb68ca9569bcebdf4cc?s=128&d=identicon&r=PG", "display_name": "pPointer", "link": "https://stackoverflow.com/users/10237508/ppointer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 51914334, "answer_count": 1, "score": -2, "last_activity_date": 1534706262, "creation_date": 1534641646, "question_id": 51913720, "link": "https://stackoverflow.com/questions/51913720/netrawip-fill-source-mac-address-wrongly-ubuntu", "title": "Net::RawIP fill source mac-address wrongly (Ubuntu)", "body": "<p>I'm trying send udp IP packet via <a href=\"https://metacpan.org/pod/Net::RawIP\" rel=\"nofollow noreferrer\">Net::RawIP module</a>, and then listen to tcpdump and when i check the source mac-address in the packet i find it not matching my device mac-address. I'm using ubuntu. I tried with 2 ubuntu devices but give same results (Wrong source mac address). Mac-address seems to be filled by something but not the right value. From diffrent devices it's filled with same source mac-address (wrong). What can cause this? How can we fix it to discover right value?</p>\n\n<p>Code example:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse Net::RawIP;\nuse strict;\nuse warnings;\n\nmy $ip_dst   = $ARGV[0];\nmy $port_dst = $ARGV[1];\n\nmy $payload  = \"TestingMac\";\n\nmy $packet = new Net::RawIP({udp =&gt; {}});\n\n$packet-&gt;set({\n            ip =&gt; {\n                    saddr =&gt; 0,\n                    daddr =&gt; $ip_dst\n                },\n            udp =&gt; {\n                     source =&gt; 50,\n                     dest   =&gt; $port_dst,\n                     data   =&gt; $payload\n                }\n});\n\n$packet-&gt;send;\n</code></pre>\n"}, {"tags": ["windows", "perl", "console"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 2, "creation_date": 1534575286, "post_id": 51905987, "comment_id": 90762657, "body": "It says <i>&quot;is no longer allowed&quot;</i> meaning it was deprecated. You can build a sub in that script to overcome it."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1534580137, "post_id": 51905987, "comment_id": 90763680, "body": "I could post an answer with a <code>sub</code> example but with untested code (on my phone and not close to laptop) which will get me downvotes. But also see <a href=\"https://perldoc.perl.org/perldiag.html\" rel=\"nofollow noreferrer\">perldiag</a> . Search for <b>Use of inherited AUTOLOAD for non-method %s() is deprecated</b> you could find the autoload code in the modules and replace it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534601789, "post_id": 51905987, "comment_id": 90769146, "body": "Re &quot;<i>How to make an inherited AUTOLOAD for non-method work?</i>&quot;, That question makes no sense. Inheritance is specific to methods."}, {"owner": {"reputation": 21019, "user_id": 198183, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/52f281a988bae754991af26224c796af?s=128&d=identicon&r=PG", "display_name": "sid_com", "link": "https://stackoverflow.com/users/198183/sid-com"}, "edited": false, "score": 0, "creation_date": 1534747900, "post_id": 51905987, "comment_id": 90800137, "body": "How could I change the question so that it makes sense?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1534781070, "last_edit_date": 1534781070, "creation_date": 1534601765, "answer_id": 51909554, "question_id": 51905987, "link": "https://stackoverflow.com/questions/51905987/how-to-make-an-inherited-autoload-for-non-method-work/51909554#51909554", "title": "How to make an inherited AUTOLOAD for non-method work?", "body": "<p>The problem is that you are calling a number of Win32::Console subs as if they were in My::Win32::Console.</p>\n\n<hr>\n\n<p>Solution 1: Properly reference the subs.</p>\n\n<ul>\n<li>Replace the five instances of <code>constant</code> with <code>Win32::Console::constant</code>.</li>\n<li>Replace the single instance of <code>_CreateConsoleScreenBuffer</code> with <code>Win32::Console::_CreateConsoleScreenBuffer</code>.</li>\n<li>Replace the single instance of <code>_CloseHandle</code> with <code>Win32::Console::_CloseHandle</code>.</li>\n</ul>\n\n<hr>\n\n<p>Solution 2: Import the needed subs.</p>\n\n<p>Add the following:</p>\n\n<pre><code>BEGIN {\n   *My::Win32::Console::constant                   = \\&amp;Win32::Console::constant;\n   *My::Win32::Console::_CreateConsoleScreenBuffer = \\&amp;Win32::Console::_CreateConsoleScreenBuffer;\n   *My::Win32::Console::_CloseHandle               = \\&amp;Win32::Console::_CloseHandle;\n}\n</code></pre>\n\n<hr>\n\n<p>That said, I think inheritance is inappropriate here (and poorly done). Monkey-patching would be preferred.</p>\n\n<pre><code>package Win32::Console::PatchForRT33513;\n\nuse strict;\nuse warnings;\n\nuse Win32::Console qw( );\n\n{\n    my $old_new = Win32::Console-&gt;can('new');\n    my $new_new = sub {\n        my ($class, $param1, $param2) = @_;\n        my $self = $old_new-&gt;(@_);\n        $self-&gt;{handle_is_std} = 1\n            if defined($param1)\n               &amp;&amp; (  $param1 == Win32::Console::constant(\"STD_INPUT_HANDLE\",  0)\n                  || $param1 == Win32::Console::constant(\"STD_OUTPUT_HANDLE\", 0)\n                  || $param1 == Win32::Console::constant(\"STD_ERROR_HANDLE\",  0)\n                  );\n\n        return $self;\n    };\n\n    no warnings qw( redefine );\n    *Win32::Console::new = $new_new;\n}\n\n{\n    my $old_DESTROY = Win32::Console-&gt;can('DESTROY');\n    my $new_DESTROY = sub {\n        my ($self) = @_;\n        Win32::Console::_CloseHandle($self-&gt;{handle}) if !$self-&gt;{handle_is_std};\n    };\n\n    no warnings qw( redefine );\n    *Win32::Console::DESTROY = $new_DESTROY;\n}\n\n1;\n</code></pre>\n\n<p>This way, modules that inherit from Win32::Console won't break, and you'll still be able to keep using </p>\n\n<pre><code>use Win32::Console qw( STD_OUTPUT_HANDLE );\nmy $c = Win32::Console-&gt;new(STD_OUTPUT_HANDLE);\n</code></pre>\n\n<p>as long as you do the following first:</p>\n\n<pre><code>use Win32::Console::PatchForRT33513;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534632294, "post_id": 51912547, "comment_id": 90776276, "body": "That doesn&#39;t actually help here since AUTOLOAD is simply masking the problem: The user is calling subs that don&#39;t exist (e.g. <code>constant</code>). Win32::Console&#39;s <code>AUTOLOAD</code> doesn&#39;t provide those subs, so your change simply changes the error to <code>Symbol Win32::Console::constant not defined, used at ...</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534632651, "post_id": 51912547, "comment_id": 90776342, "body": "You should still leave the answer up for others that might fall across it, but maybe add something to it acknowledging that it doesn&#39;t help the OP?"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 3, "last_activity_date": 1534626293, "creation_date": 1534626293, "answer_id": 51912547, "question_id": 51905987, "link": "https://stackoverflow.com/questions/51905987/how-to-make-an-inherited-autoload-for-non-method-work/51912547#51912547", "title": "How to make an inherited AUTOLOAD for non-method work?", "body": "<p>I don't know if I can explain it any better than <a href=\"https://metacpan.org/pod/distribution/perl/pod/perldiag.pod#Use-of-inherited-AUTOLOAD-for-non-method-%s::%s()-is-no-longer-allowed\" rel=\"nofollow noreferrer\"><code>perldiag</code></a> (what you'd see if you <code>use diagnostics</code>)</p>\n\n<blockquote>\n  <p>Use of inherited AUTOLOAD for non-method %s() is deprecated. </p>\n  \n  <p>This will be\n      fatal in Perl 5.28\n          (D deprecated) As an (ahem) accidental feature, \"AUTOLOAD\" subroutines\n          are looked up as methods (using the @ISA hierarchy) even when the\n          subroutines to be autoloaded were called as plain functions (e.g.\n          \"Foo::bar()\"), not as methods (e.g. \"Foo->bar()\" or \"$obj->bar()\").</p>\n  \n  <p>This bug will be rectified in future by using method lookup only for\n          methods' \"AUTOLOAD\"s. However, there is a significant base of existing\n          code that may be using the old behavior. So, as an interim step, Perl\n          currently issues an optional warning when non-methods use inherited\n          \"AUTOLOAD\"s.</p>\n  \n  <p>The simple rule is: Inheritance will not work when autoloading\n          non-methods. The simple fix for old code is: In any module that used\n          to depend on inheriting \"AUTOLOAD\" for non-methods from a base class\n          named \"BaseClass\", execute \"*AUTOLOAD = \\&amp;BaseClass::AUTOLOAD\" during\n          startup.</p>\n  \n  <p>In code that currently says \"use AutoLoader; @ISA = qw(AutoLoader);\"\n          you should remove AutoLoader from @ISA and change \"use AutoLoader;\" to\n          \"use AutoLoader 'AUTOLOAD';\".</p>\n  \n  <p>This feature was deprecated in Perl 5.004, and will be fatal in Perl\n          5.28.</p>\n</blockquote>\n\n<p>The quickest fix, if you are expecting to be able to use <code>AUTOLOAD</code> in this class, is to say</p>\n\n<pre><code>*My::Win32::Console::AUTOLOAD = \\&amp;Win32::Console::AUTOLOAD\n</code></pre>\n"}], "owner": {"reputation": 21019, "user_id": 198183, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/52f281a988bae754991af26224c796af?s=128&d=identicon&r=PG", "display_name": "sid_com", "link": "https://stackoverflow.com/users/198183/sid-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 756, "favorite_count": 1, "accepted_answer_id": 51909554, "answer_count": 2, "score": 3, "last_activity_date": 1534781070, "creation_date": 1534574337, "question_id": 51905987, "link": "https://stackoverflow.com/questions/51905987/how-to-make-an-inherited-autoload-for-non-method-work", "title": "How to make an inherited AUTOLOAD for non-method work?", "body": "<pre><code>package My::Win32::Console;\nuse warnings;\nuse strict;\nuse parent qw( Win32::Console );\n\nsub new {\n    my($class, $param1, $param2) = @_;\n    my $self = {};\n    if (defined($param1)\n    and ($param1 == constant(\"STD_INPUT_HANDLE\",  0)\n    or   $param1 == constant(\"STD_OUTPUT_HANDLE\", 0)\n    or   $param1 == constant(\"STD_ERROR_HANDLE\",  0)))\n    {\n        $self-&gt;{'handle'} = _GetStdHandle($param1);\n        # https://rt.cpan.org/Public/Bug/Display.html?id=33513#txn-577224:\n        $self-&gt;{'handle_is_std'} = 1;\n    }\n    else {\n        $param1 = constant(\"GENERIC_READ\", 0)    | constant(\"GENERIC_WRITE\", 0) unless $param1;\n        $param2 = constant(\"FILE_SHARE_READ\", 0) | constant(\"FILE_SHARE_WRITE\", 0) unless $param2;\n        $self-&gt;{'handle'} = _CreateConsoleScreenBuffer($param1, $param2,\n                                              constant(\"CONSOLE_TEXTMODE_BUFFER\", 0));\n    }\n    bless $self, $class;\n    return $self;\n}\n\nsub DESTROY {\n    my($self) = @_;\n    # https://rt.cpan.org/Public/Bug/Display.html?id=33513#txn-577224:\n    #_CloseHandle($self-&gt;{'handle'});\n    _CloseHandle($self-&gt;{'handle'}) unless $self-&gt;{'handle_is_std'};\n}\n\n1;\n__END__\n</code></pre>\n\n<p>When I try to apply this patch <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=33513#txn-577224\" rel=\"nofollow noreferrer\">https://rt.cpan.org/Public/Bug/Display.html?id=33513#txn-577224</a> with the help of this module I get this error message:</p>\n\n<pre><code># Use of inherited AUTOLOAD for non-method My::Win32::Console::constant()\n# is no longer allowed at C:/Strawberry/perl/site/lib/My/Win32/Console.pm line 10.\n</code></pre>\n\n<p>Is there a way to make this work?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534560028, "post_id": 51904693, "comment_id": 90760313, "body": "Please provide the output of <code>perl -v | grep This</code> and <code>perl -MJSON::backportPP -le&#39;print $JSON::backportPP::VERSION || $JSON::PP::VERSION&#39;</code> and <code>perl -MB -le&#39;print $B::VERSION&#39;</code> and <code>perl -mB -le&#39;my $value = 1; my $b_obj = B::svref_2object(\\$value); print $b_obj-&gt;FLAGS;&#39;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1534560306, "post_id": 51904693, "comment_id": 90760352, "body": "Note that I was able to duplicate using the last of the above commands, nor with your program (with <code>use JSON;</code> added). (I had to launch the program as follows to get the right module to be used: <code>PERL_JSON_BACKEND=JSON::backportPP perl a.pl</code>)"}, {"owner": {"reputation": 2819, "user_id": 1340097, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0914468667cea81f7c28d10cc4702f8a?s=128&d=identicon&r=PG", "display_name": "Gorkem Yurtseven", "link": "https://stackoverflow.com/users/1340097/gorkem-yurtseven"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534804611, "post_id": 51904693, "comment_id": 90828725, "body": "sorry for the late response just edited my question"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534811953, "post_id": 51904693, "comment_id": 90830199, "body": "hmmm. Can you confirm that <code>perl -MJSON -e&#39;my $integer = 200; JSON-&gt;new-&gt;allow_nonref-&gt;encode($integer);&#39;</code> produces the error?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534812048, "post_id": 51904693, "comment_id": 90830213, "body": "(Also, note that you said you were using 5.8, but you&#39;re actually using 5.10.1)"}], "owner": {"reputation": 2819, "user_id": 1340097, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0914468667cea81f7c28d10cc4702f8a?s=128&d=identicon&r=PG", "display_name": "Gorkem Yurtseven", "link": "https://stackoverflow.com/users/1340097/gorkem-yurtseven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1534804393, "creation_date": 1534558593, "last_edit_date": 1534804393, "question_id": 51904693, "link": "https://stackoverflow.com/questions/51904693/unexpected-behavior-with-cpan-json", "title": "Unexpected behavior with CPAN_JSON", "body": "<p>Trying to use CPAN_JSON in the following way:</p>\n\n<pre><code>my $integer = 200;\n\nJSON-&gt;new-&gt;allow_nonref-&gt;encode($integer);\n</code></pre>\n\n<p>and get the following error;</p>\n\n<pre><code>Can't locate object method \"FLAGS\" via package \"B::IV\"\n</code></pre>\n\n<p>Coming from:</p>\n\n<p><a href=\"https://metacpan.org/source/MAKAMAKA/JSON-2.90/lib/JSON/backportPP.pm#L408\" rel=\"nofollow noreferrer\">https://metacpan.org/source/MAKAMAKA/JSON-2.90/lib/JSON/backportPP.pm#L408</a></p>\n\n<p>Running perl 5.8, I thought <code>B</code> Core packages are always included. Any ideas why this is happening? </p>\n\n<p>Edit:</p>\n\n<p><code>perl -v | grep This</code></p>\n\n<p>This is perl, v5.10.1</p>\n\n<p><code>perl -MJSON::backportPP -le'print $JSON::backportPP::VERSION || $JSON::PP::VERSION'</code></p>\n\n<p>2.27200</p>\n\n<p><code>perl -mB -le'my $value = 1; my $b_obj = B::svref_2object(\\$value); print $b_obj-&gt;FLAGS;'</code></p>\n\n<p>266498</p>\n"}, {"tags": ["perl", "configuration", "installation", "cpan", "cpanm"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1534537149, "post_id": 51901890, "comment_id": 90755827, "body": "It sounds like you have <code>local::lib</code> installed to <code>bundle&#47;lib&#47;perl5</code>?"}, {"owner": {"reputation": 8200, "user_id": 79202, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/397f829eea921e02e35c37c22f9e6d3b?s=128&d=identicon&r=PG", "display_name": "theory", "link": "https://stackoverflow.com/users/79202/theory"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1534539575, "post_id": 51901890, "comment_id": 90756712, "body": "I&#39;m passing <code>-L bundle</code>, which builds things as if local::lib is set to <code>bundle</code>. It installs modules in <code>bundle&#47;lib&#47;perl5</code>, I think, because <code>$Config{installstyle}</code> is set to <code>lib&#47;perl5</code> and not <code>lib</code> \u2014 and that&#39;s true regardless of what local::lib is set to use."}], "answers": [{"tags": [], "owner": {"reputation": 8200, "user_id": 79202, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/397f829eea921e02e35c37c22f9e6d3b?s=128&d=identicon&r=PG", "display_name": "theory", "link": "https://stackoverflow.com/users/79202/theory"}, "is_accepted": true, "score": 2, "last_activity_date": 1534622416, "creation_date": 1534622416, "answer_id": 51912127, "question_id": 51901890, "link": "https://stackoverflow.com/questions/51901890/how-do-i-convince-cpanminus-to-install-modules-in-lib-instead-of-lib-perl5/51912127#51912127", "title": "How do I convince cpanminus to install modules in lib/ instead of lib/perl5?", "body": "<p>Trolling through the <a href=\"https://github.com/Perl-Toolchain-Gang/Module-Build/\" rel=\"nofollow noreferrer\">Module::Build source</a>, it <a href=\"https://github.com/Perl-Toolchain-Gang/Module-Build/blob/master/lib/Module/Build/Base.pm#L297\" rel=\"nofollow noreferrer\">looks like it's not possible</a> to install modules without the <code>perl5</code> part of the directory \u2014 at least not when using <code>install_base</code> (which cpanm's <code>--self-contained</code> implies). Judging from the comment, it appears that the decision was made to be consistent about always installing in <code>lib/perl5</code> when using <code>install_base</code>, so as to keep things as predictable as possible. It looks like <a href=\"https://github.com/Perl-Toolchain-Gang/ExtUtils-MakeMaker/blob/master/lib/ExtUtils/MM_Any.pm#L2195\" rel=\"nofollow noreferrer\">MakeMaker has it hard-coded</a>, too.</p>\n"}], "owner": {"reputation": 8200, "user_id": 79202, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/397f829eea921e02e35c37c22f9e6d3b?s=128&d=identicon&r=PG", "display_name": "theory", "link": "https://stackoverflow.com/users/79202/theory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 51912127, "answer_count": 1, "score": 3, "last_activity_date": 1534622416, "creation_date": 1534534654, "question_id": 51901890, "link": "https://stackoverflow.com/questions/51901890/how-do-i-convince-cpanminus-to-install-modules-in-lib-instead-of-lib-perl5", "title": "How do I convince cpanminus to install modules in lib/ instead of lib/perl5?", "body": "<p>I'm installing a bunch of modules listed in a <code>cpanfile</code> into a self-contained directory:</p>\n\n<pre><code> cpanm -L bundle --quiet --notest --self-contained --with-recommends --installdeps .\n</code></pre>\n\n<p>Afterward, all the modules are in <code>bundle/lib/perl5</code>. Which is almost exactly what I want. Is there an incantation to feed <code>cpanm</code> \u2014 or an environment variable to set \u2014 to get <code>cpanm</code> to tell the installer to put the files in <code>bundle/lib</code>, instead? I assume I'd need to do something to convince ExtUtils::MakeMaker and Module::Build to append a different value to the <code>install_base</code>, but I haven't been able to figure out how.</p>\n"}, {"tags": ["perl", "substitution"], "comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1534531439, "post_id": 51901197, "comment_id": 90753626, "body": "As in a space character? What language is this?"}, {"owner": {"reputation": 1744, "user_id": 1176037, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kt8kk.png?s=128&g=1", "display_name": "Alan Deep", "link": "https://stackoverflow.com/users/1176037/alan-deep"}, "edited": false, "score": 0, "creation_date": 1534531597, "post_id": 51901197, "comment_id": 90753693, "body": "what is the character between 1 and 2 for example? is it a tab ( \\t) ?"}, {"owner": {"reputation": 45, "user_id": 9980397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28cdfa6410804b00931d7e656704f83?s=128&d=identicon&r=PG&f=1", "display_name": "yueli", "link": "https://stackoverflow.com/users/9980397/yueli"}, "edited": false, "score": 0, "creation_date": 1534531750, "post_id": 51901197, "comment_id": 90753757, "body": "Thanks, Alan Deep.Yes tab (\\t)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1534532118, "post_id": 51901197, "comment_id": 90753917, "body": "Tip: Don&#39;t use <code>DATA</code>; it&#39;s the name of an existing file handle"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1534532145, "post_id": 51901197, "comment_id": 90753932, "body": "Tip: Don&#39;t use global variables for your file handles. Use lexical vars (<code>open(my $DATA, ...)</code>)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1534532523, "post_id": 51901197, "comment_id": 90754079, "body": "Please clarify how the space in e.g. <code>&quot;1   2           2&quot;</code> is coded. Is it only tabs: <code>&quot;1\\t2\\t\\t2&quot;</code> or is there ordinary white space <code>\\x{20}</code> in there also?"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 9980397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28cdfa6410804b00931d7e656704f83?s=128&d=identicon&r=PG&f=1", "display_name": "yueli", "link": "https://stackoverflow.com/users/9980397/yueli"}, "edited": false, "score": 0, "creation_date": 1534538037, "post_id": 51901477, "comment_id": 90756175, "body": "Hello, ikegami, Thank you so much for your great help. It works\uff01"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 45, "user_id": 9980397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28cdfa6410804b00931d7e656704f83?s=128&d=identicon&r=PG&f=1", "display_name": "yueli", "link": "https://stackoverflow.com/users/9980397/yueli"}, "edited": false, "score": 0, "creation_date": 1534538115, "post_id": 51901477, "comment_id": 90756223, "body": "No problem. If this answers your question, please check the mark next to it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 45, "user_id": 9980397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28cdfa6410804b00931d7e656704f83?s=128&d=identicon&r=PG&f=1", "display_name": "yueli", "link": "https://stackoverflow.com/users/9980397/yueli"}, "edited": false, "score": 0, "creation_date": 1534538229, "post_id": 51901477, "comment_id": 90756265, "body": "Added a missing <code>chomp</code>."}, {"owner": {"reputation": 45, "user_id": 9980397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28cdfa6410804b00931d7e656704f83?s=128&d=identicon&r=PG&f=1", "display_name": "yueli", "link": "https://stackoverflow.com/users/9980397/yueli"}, "edited": false, "score": 0, "creation_date": 1534538469, "post_id": 51901477, "comment_id": 90756349, "body": "Hello, ikegami. I can read through your code. May I ask you a quick question? Why there is &quot;-1&quot; in split (/\\t/,$_,-1)?Thanks again for your help!"}, {"owner": {"reputation": 45, "user_id": 9980397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28cdfa6410804b00931d7e656704f83?s=128&d=identicon&r=PG&f=1", "display_name": "yueli", "link": "https://stackoverflow.com/users/9980397/yueli"}, "edited": false, "score": 0, "creation_date": 1534538841, "post_id": 51901477, "comment_id": 90756469, "body": "It&#39;s perfect to add chomp! Thank you!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 45, "user_id": 9980397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28cdfa6410804b00931d7e656704f83?s=128&d=identicon&r=PG&f=1", "display_name": "yueli", "link": "https://stackoverflow.com/users/9980397/yueli"}, "edited": false, "score": 0, "creation_date": 1534547804, "post_id": 51901477, "comment_id": 90758668, "body": "@yueli Without the (optional) last argument <code>split</code> drops all empty trailing fields; when that argument is negative then all fields are returned, empty or not. See documentation: <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1534609545, "last_edit_date": 1534609545, "creation_date": 1534532590, "answer_id": 51901477, "question_id": 51901197, "link": "https://stackoverflow.com/questions/51901197/substitute-space-to-0/51901477#51901477", "title": "substitute space to 0", "body": "<pre><code>use strict;\nuse warnings qw( all );\nuse feature qw( say );\n\nwhile (&lt;&gt;) {\n   chomp;\n   my @fields = split(/\\t/, $_, -1);\n   for my $field (@fields) {\n      $field = 0 if $field eq \"\";\n   }\n\n   say join \"\\t\", @fields;\n}\n</code></pre>\n\n<p>It's not clear what you meant by <em>\"the space\"</em>. The above replaces <em>empty</em> fields with zero. Chose the most suitable of the following:</p>\n\n<ul>\n<li><code>if $field eq \"\"</code> (empty)</li>\n<li><code>if $field eq \" \"</code> (1 space)</li>\n<li><code>if $field =~ /^[ ]+\\z/</code> (1+ spaces)</li>\n<li><code>if $field =~ /^[ ]*\\z/</code> (0+ spaces)</li>\n<li><code>if $field =~ /^\\s+\\z/</code> (1+ whitespace)</li>\n<li><code>if $field =~ /^\\s*\\z/</code> (0+ whitespace)</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1744, "user_id": 1176037, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kt8kk.png?s=128&g=1", "display_name": "Alan Deep", "link": "https://stackoverflow.com/users/1176037/alan-deep"}, "reply_to_user": {"reputation": 45, "user_id": 9980397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28cdfa6410804b00931d7e656704f83?s=128&d=identicon&r=PG&f=1", "display_name": "yueli", "link": "https://stackoverflow.com/users/9980397/yueli"}, "edited": false, "score": 0, "creation_date": 1534536265, "post_id": 51901941, "comment_id": 90755466, "body": "@yueli I never used perl, but i read the docs to answer your question. <code>$filename</code> should be replaced by <code>&#39;temp01&#39;</code>. If temp01 is located in <code>C:&#47;</code> then replace $filename with <code>&#39;C:&#47;temp01&#39;</code>"}, {"owner": {"reputation": 45, "user_id": 9980397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28cdfa6410804b00931d7e656704f83?s=128&d=identicon&r=PG&f=1", "display_name": "yueli", "link": "https://stackoverflow.com/users/9980397/yueli"}, "edited": false, "score": 0, "creation_date": 1534536488, "post_id": 51901941, "comment_id": 90755561, "body": "Hello, Alan Deep, Thank you so much for your quick response. I replaced the file temp01. But, it comes out: Global symbol &quot;$temp01&quot; requires explicit package name at alan.pl line 4. Execution of alan.pl aborted due to compilation errors."}, {"owner": {"reputation": 1744, "user_id": 1176037, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kt8kk.png?s=128&g=1", "display_name": "Alan Deep", "link": "https://stackoverflow.com/users/1176037/alan-deep"}, "reply_to_user": {"reputation": 45, "user_id": 9980397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28cdfa6410804b00931d7e656704f83?s=128&d=identicon&r=PG&f=1", "display_name": "yueli", "link": "https://stackoverflow.com/users/9980397/yueli"}, "edited": false, "score": 0, "creation_date": 1534536517, "post_id": 51901941, "comment_id": 90755576, "body": "@yueli glad to help!"}, {"owner": {"reputation": 45, "user_id": 9980397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28cdfa6410804b00931d7e656704f83?s=128&d=identicon&r=PG&f=1", "display_name": "yueli", "link": "https://stackoverflow.com/users/9980397/yueli"}, "edited": false, "score": 0, "creation_date": 1534536732, "post_id": 51901941, "comment_id": 90755661, "body": "I was wondering that there may a readin file problem. I try to figure it out."}, {"owner": {"reputation": 1744, "user_id": 1176037, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kt8kk.png?s=128&g=1", "display_name": "Alan Deep", "link": "https://stackoverflow.com/users/1176037/alan-deep"}, "reply_to_user": {"reputation": 45, "user_id": 9980397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28cdfa6410804b00931d7e656704f83?s=128&d=identicon&r=PG&f=1", "display_name": "yueli", "link": "https://stackoverflow.com/users/9980397/yueli"}, "edited": false, "score": 0, "creation_date": 1534536933, "post_id": 51901941, "comment_id": 90755740, "body": "@yueli you may post another question for that for this will be out of question topic. (community guidelines)"}, {"owner": {"reputation": 1744, "user_id": 1176037, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kt8kk.png?s=128&g=1", "display_name": "Alan Deep", "link": "https://stackoverflow.com/users/1176037/alan-deep"}, "reply_to_user": {"reputation": 45, "user_id": 9980397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28cdfa6410804b00931d7e656704f83?s=128&d=identicon&r=PG&f=1", "display_name": "yueli", "link": "https://stackoverflow.com/users/9980397/yueli"}, "edited": false, "score": 0, "creation_date": 1534536969, "post_id": 51901941, "comment_id": 90755753, "body": "but check out this link: <a href=\"https://stackoverflow.com/questions/4087743/read-file-into-variable-in-perl\" title=\"read file into variable in perl\">stackoverflow.com/questions/4087743/&hellip;</a>"}, {"owner": {"reputation": 45, "user_id": 9980397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28cdfa6410804b00931d7e656704f83?s=128&d=identicon&r=PG&f=1", "display_name": "yueli", "link": "https://stackoverflow.com/users/9980397/yueli"}, "edited": false, "score": 0, "creation_date": 1534537058, "post_id": 51901941, "comment_id": 90755790, "body": "Thank you for your link. I replaced the temp01, but the result is the same as the input temp01 file    1\t2\t\t\t2\t\t5\t\t\t\t4 4\t4\t4\t\t\t4\t\t\t\t3\t \t\t4\t4\t\t\t1\t\t\t\t \t1\t5\t6\t\t4"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1534570172, "post_id": 51901941, "comment_id": 90761706, "body": "I edited the answer to correct filehandle path and error handling on die."}, {"owner": {"reputation": 1744, "user_id": 1176037, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kt8kk.png?s=128&g=1", "display_name": "Alan Deep", "link": "https://stackoverflow.com/users/1176037/alan-deep"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1534797761, "post_id": 51901941, "comment_id": 90826584, "body": "@GerhardBarnard Thank you!"}], "tags": [], "owner": {"reputation": 1744, "user_id": 1176037, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kt8kk.png?s=128&g=1", "display_name": "Alan Deep", "link": "https://stackoverflow.com/users/1176037/alan-deep"}, "is_accepted": false, "score": 2, "last_activity_date": 1534570102, "last_edit_date": 1534570102, "creation_date": 1534534917, "answer_id": 51901941, "question_id": 51901197, "link": "https://stackoverflow.com/questions/51901197/substitute-space-to-0/51901941#51901941", "title": "substitute space to 0", "body": "<p>Very easy, \njust store the content of the file in the variable $x then find the match and replace:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $filename = \"c:\\path\\to\\file.txt\";\nmy $x;\n    open(my $fh, '&lt;', $filename) or die \"cannot open file $filename: $!\";\n    {\n        local $/;\n        $x= &lt;$fh&gt;;\n    }\n    close($fh);\n\n\n$x=~s/(\\n )/\\n0/g;      #starting zeros\n$x=~s/( \\n)/ 0\\n/g;     #ending zeros\n$x=~s/( $)/ 0\\n/g;      #last zero if no end line on end of string\n$x=~s/(^ )/0/g;         #first zero at beginning of string\n$x=~s/(    )/   0/g;    #zeros within the matrix\n\nprint $x;\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 9980397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28cdfa6410804b00931d7e656704f83?s=128&d=identicon&r=PG&f=1", "display_name": "yueli", "link": "https://stackoverflow.com/users/9980397/yueli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 51901477, "answer_count": 2, "score": 2, "last_activity_date": 1534609545, "creation_date": 1534531227, "last_edit_date": 1534532631, "question_id": 51901197, "link": "https://stackoverflow.com/questions/51901197/substitute-space-to-0", "title": "substitute space to 0", "body": "<p>Using Perl, I just want to substitute the space to 0. Spaces were separated by tab (\\t). Thanks in advance! For example:</p>\n\n<pre><code>1   2           2       5               4\n4   4   4           4               3   \n        4   4           1               \n    1   5   6       4                   \n</code></pre>\n\n<p>To</p>\n\n<pre><code>1    2    0    0    2    0    5    0    0    0    4\n4    4    4    0    0    4    0    0    0    3    0\n0    0    4    4    0    0    1    0    0    0    0\n0    1    5    6    0    4    0    0    0    0    0\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>use strict;\nuse warnings;\nopen(DATA,\"DATA\")||die\"cannot open the file: $!\\n\";\n\n\nwhile( &lt;DATA&gt; )\n  {\n  s/(^|    \\K)(?!\\d)/0/g;\n  print;\n  }\n</code></pre>\n\n<p>It comes out:</p>\n\n<pre><code>1   2           2       5               4\n4   4   4           4               3   \n0       4   4           1               \n0   1   5   6       4                   \n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": true, "score": 1, "last_activity_date": 1534491256, "last_edit_date": 1534491256, "creation_date": 1534490363, "answer_id": 51890234, "question_id": 51889481, "link": "https://stackoverflow.com/questions/51889481/how-to-die-correctly-on-soaplite-in-perl/51890234#51890234", "title": "How to die Correctly on Soap::Lite in perl", "body": "<p><code>SOAP::Lite</code> queries will give a <code>fault</code> with a <code>faultstring</code> result if errors occur, something like this should work.</p>\n\n<pre><code>die $soap_respons-&gt;faultstring if ($soap_respons-&gt;fault);\nprint $soap_respons-&gt;result, \"\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "is_accepted": false, "score": 1, "last_activity_date": 1534494874, "creation_date": 1534494874, "answer_id": 51891412, "question_id": 51889481, "link": "https://stackoverflow.com/questions/51889481/how-to-die-correctly-on-soaplite-in-perl/51891412#51891412", "title": "How to die Correctly on Soap::Lite in perl", "body": "<p>You could set the <code>on_fault</code> callback. This way you wouldn't have to check every response.</p>\n\n<pre><code>$client-&gt;on_fault(sub { die($_[1]) });\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 51890234, "answer_count": 2, "score": 0, "last_activity_date": 1534494874, "creation_date": 1534486910, "last_edit_date": 1534489168, "question_id": 51889481, "link": "https://stackoverflow.com/questions/51889481/how-to-die-correctly-on-soaplite-in-perl", "title": "How to die Correctly on Soap::Lite in perl", "body": "<p>I have written a perl script that connects using <code>Soap::Lite</code> and collect data from a web-service and update a database. This works well, until the password gets locked out and I get a <code>server 500 error</code> which is where my question comes in. How do I let the <code>Soap::Lite</code> query <code>die</code> when it does not make a successful connection, so it does not continue with the rest of the script?</p>\n\n<pre><code>  .....\n  my $host   = \"hostname\";\n  my $user   = \"user\";\n  my $pass   = \"pass\";\n     $soap_proxy  = \"https://\" . $user . \":\" . $pass . \"@\" . $host . \":8090/services/ApiService\";\n     $uri    = \"http://api.config.common.com\";\n\n     $client                                    =  new SOAP::Lite\n       uri                                           =&gt; $uri,\n       proxy                                         =&gt; $soap_proxy,\n       autotype                                      =&gt; 0;\n  my $soap_respons = $client-&gt;getSomething();\n  ....\n</code></pre>\n\n<p>I have tried the usual <code>or die $!</code> but that does not <code>die</code> like other queries do and still continues with the remaining script.</p>\n\n<p>according to the <code>SOAP::Lite</code> examples on CPAN, you could use:</p>\n\n<pre><code>if ($@) {\n   die $@;\n }\n</code></pre>\n\n<p>But I do not know where to put this. I tried directly under <code>my $soap_respons</code> but still it does not die.</p>\n"}, {"tags": ["perl", "elasticsearch"], "answers": [{"comments": [{"owner": {"reputation": 178, "user_id": 1061754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AUlgo.jpg?s=128&g=1", "display_name": "Vijayakumar", "link": "https://stackoverflow.com/users/1061754/vijayakumar"}, "edited": false, "score": 0, "creation_date": 1534484243, "post_id": 51888708, "comment_id": 90728923, "body": "Thanks @Val. I have tried to add my custom header. It&#39;s not accepting it. Do we need to add anything for that... ?"}, {"owner": {"reputation": 178, "user_id": 1061754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AUlgo.jpg?s=128&g=1", "display_name": "Vijayakumar", "link": "https://stackoverflow.com/users/1061754/vijayakumar"}, "edited": false, "score": 0, "creation_date": 1534495801, "post_id": 51888708, "comment_id": 90734268, "body": "Thanks for your Swift Response"}], "tags": [], "owner": {"reputation": 163519, "user_id": 4604579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/reC2t.jpg?s=128&g=1", "display_name": "Val", "link": "https://stackoverflow.com/users/4604579/val"}, "is_accepted": true, "score": 1, "last_activity_date": 1534484374, "last_edit_date": 1534484374, "creation_date": 1534482471, "answer_id": 51888708, "question_id": 51888623, "link": "https://stackoverflow.com/questions/51888623/elastic-search-bulk-need-to-add-headers/51888708#51888708", "title": "Elastic Search bulk need to add headers", "body": "<p>You should be able to do it like this:</p>\n\n<pre><code> my $es = Search::Elasticsearch-&gt;new(nodes =&gt; [\n        \"$esloc\"],\n        timeout =&gt; 60,\n        no_refresh   =&gt; 0,\n        userinfo =&gt; 'username:password',\n        default_headers =&gt; { 'Content-Type' =&gt; 'application/ndjson' }\n    );\n</code></pre>\n"}], "owner": {"reputation": 178, "user_id": 1061754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AUlgo.jpg?s=128&g=1", "display_name": "Vijayakumar", "link": "https://stackoverflow.com/users/1061754/vijayakumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 51888708, "answer_count": 1, "score": 0, "last_activity_date": 1534484374, "creation_date": 1534481986, "question_id": 51888623, "link": "https://stackoverflow.com/questions/51888623/elastic-search-bulk-need-to-add-headers", "title": "Elastic Search bulk need to add headers", "body": "<p>Do we have the option to add header in the Search::Elasticsearch module.</p>\n\n<pre><code>    use Search::Elasticsearch; \n\n     my $esloc='abc.com';\n\n     my $es = Search::Elasticsearch-&gt;new(nodes =&gt; [\n            \"$esloc\"],\n            timeout =&gt; 60,\n            no_refresh   =&gt; 0,\n            userinfo =&gt; 'username:password'\n        );\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "sql", "perl", "cgi"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1534465324, "post_id": 51886332, "comment_id": 90725148, "body": "Perl cannot &quot;see&quot; anything from JavaScript unless you make an XMLHttpRequest / XHR / Ajax call back to it. Why not just do it all in Perl? Every web server has the ability to retrieve the remote address from the request."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1534467718, "post_id": 51886332, "comment_id": 90725551, "body": "Is that supposed to be Perl code with embedded here docs containing JavaScript? Aren&#39;t there missing initial <code>print &lt;&lt;&quot;To_Here&quot;</code> and ending <code>print &lt;&lt;&quot;To_Here</code> statements? And shouldn&#39;t <code>To_Here</code> be flush to the left margin? Or am I misunderstanding you completely?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1534468070, "post_id": 51886332, "comment_id": 90725615, "body": "Conventionally, Perl runs on the server system and JavaScript runs in the client browser. To pass the information in a hidden input field back to the server you would need to submit the form."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1534474809, "post_id": 51886332, "comment_id": 90726821, "body": "Please identify this &quot;JavaScript plugin&quot; so that we can better guess what you&#39;re trying to do."}], "answers": [{"tags": [], "owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "is_accepted": false, "score": 3, "last_activity_date": 1534535303, "creation_date": 1534535303, "answer_id": 51902016, "question_id": 51886332, "link": "https://stackoverflow.com/questions/51886332/how-to-pass-a-variable-value-from-javascript-to-perl/51902016#51902016", "title": "How to pass a variable value from javascript to perl", "body": "<p>On the JavaScript side you will need to send a GET request to the Perl script. I've only done this using jQuery (see <a href=\"http://api.jquery.com/jquery.ajax/\" rel=\"nofollow noreferrer\">docs</a>) so you'll need to adapt this if you want a pure JavaScript solution:</p>\n\n<pre><code>function getUserIp(ips) {\n\n    var ipString = ips.join(';');\n    $.ajax({\n        type: 'GET',\n        url: '/path/to/script.pl',\n        data: { user_ips : ipString },\n        statusCode: {\n            200: function(data, textStatus, jqXHR) {\n                $('#id').html(jqXHR.responseText);\n            }\n        }\n    });\n}\n</code></pre>\n\n<p>Note that the <code>ips</code> variable should be a string when you pass it to Perl. You can pass an array of params to Perl (see <a href=\"https://metacpan.org/pod/CGI#Fetching-the-names-of-all-the-parameters-passed-to-your-script\" rel=\"nofollow noreferrer\">CGI docs</a>), but I've found splitting a string after the fact to be the most reliable.</p>\n\n<p>I'll show how to capture the parameter using Perl CGI because its simple, but if you're planning on making a full website then I strongly recommend using a web framework. There are several for Perl, like <a href=\"http://www.catalystframework.org/\" rel=\"nofollow noreferrer\">Catalyst</a> and <a href=\"https://mojolicious.org/\" rel=\"nofollow noreferrer\">Mojolicious</a>, with varying learning curves. </p>\n\n<p>Using Perl's CGI module, you can capture parameters using the aptly-named <code>param()</code> method:</p>\n\n<pre><code>#! perl\n\nuse strict;\nuse warnings;\n\nuse CGI;\nuse CGI::Carp qw(fatalsToBrowser); # just to make it easier to see errors\n\nmy $cgi = CGI-&gt;new;\n\nmy $ip_string = $cgi-&gt;param('user_ips');\n\nmy @ips = split(';', $ip_string);\n\nmy $results;\nforeach my $ip (@ips) {\n    # do whatever here to populate $results\n}\n\n# send results back to jQuery\nprint $cgi-&gt;header( -type =&gt; 'text/plain', -status =&gt; '200' );\nprint $results;\nprint $cgi-&gt;end_html;\n\n1;\n</code></pre>\n\n<p>Make sure you add the appropriate header that corresponds to the <code>statusCode</code> in the <code>$.ajax()</code> method and also call <code>end_html()</code> at the end of the Perl script, otherwise the jQuery/JavaScript may not understand/capture the results.</p>\n"}], "owner": {"reputation": 31, "user_id": 10236751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432418bdff275219f8172736d167aca2?s=128&d=identicon&r=PG&f=1", "display_name": "Julio Castro", "link": "https://stackoverflow.com/users/10236751/julio-castro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1234, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1534535303, "creation_date": 1534460078, "last_edit_date": 1534467904, "question_id": 51886332, "link": "https://stackoverflow.com/questions/51886332/how-to-pass-a-variable-value-from-javascript-to-perl", "title": "How to pass a variable value from javascript to perl", "body": "<p>I'm using a JavaScript plugin to get the IP address. If the IP address starts with <code>10.15</code> I want to assign one value to a variable, and if the IP starts with <code>10.13</code> I want to assign a different value to the same variable.(I don't know if the variable has to be in Perl or JavaScript)</p>\n\n<p>I'm trying this but is not working.</p>\n\n<pre><code>my $propt = \"\";\n    getUserIP(function(ip) { \n        console.log('IP: ' + ip);  \n        const ips = ip.split('.');\n\n        var pro = document.getElementById('property');\n        console.log(pro);\n        if (ips[0] === \"10\" &amp;&amp; ips[1] === \"15\")  {\n          pro.value = \"propt1\";\n    To_Here\n      $propt = \"SRC\";\n    print &lt;&lt;\"To_Here\";      \n        }\n        else if(ips[0] === \"10\" &amp;&amp; ips[1] === \"13\") {\n            pro.value = \"propt2\";\n    To_Here\n      $propt = \"ACC\";\n    print &lt;&lt;\"To_Here\"; \n        }  \n        else {\n            pro.value = \"propt\";\n    To_Here\n      $propt = \"TAP\";\n    print &lt;&lt;\"To_Here\"; \n        }  \n        console.log(pro);\n</code></pre>\n\n<p>First I tried passing the value to an HTML input and reading the value of the input but I don't know if this is possible in Perl</p>\n\n<pre><code>&lt;input id=\"property\" type=\"hidden\" name=\"property\" value=\"\"/&gt;\n</code></pre>\n\n<p>The final step of what I'm trying to do is to run a query based on the property</p>\n\n<pre><code>$ql = \"Select from properties where property = '?????' &lt;---- \n</code></pre>\n"}, {"tags": ["perl", "scripting", "subroutine"], "comments": [{"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1534457180, "post_id": 51885859, "comment_id": 90723362, "body": "One way to tackle question like this, that is surely longer to do but with many more benefits: write unit tests that exercise your code, and do coverage to make sure that indeed all your branches are explored by some tests. Then change your code in any way you see fit. Then rerun the unit tests. You will then have the confidence of not having broken something. Of course in this specific case it is easier said than done since you will first need to abstract all your <code>rpm</code> calls, otherwise unit testing that will be hard..."}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1534457283, "post_id": 51885859, "comment_id": 90723397, "body": "Also, meta: I do not know about <code>rpm</code> but I know, if IIRC, that with <code>dpkg</code> you have specific commands to do exactly what you are trying to do in Perl, that is test if something is installed, with some specific version/release, etc. It may be worthwhile to explore that in the long term, if <code>rpm</code> provides the same kind of features, which should be &quot;natural&quot;. Because code like that using external tool not designed for such use is inherently brittle."}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 816645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/683076a6c1f49e2d16e81b54cd22e296?s=128&d=identicon&r=PG", "display_name": "dutsnekcirf", "link": "https://stackoverflow.com/users/816645/dutsnekcirf"}, "edited": false, "score": 0, "creation_date": 1534522878, "post_id": 51885888, "comment_id": 90749825, "body": "Marking this one as the answer since it does indeed answer the topic question as shown in the title."}], "tags": [], "owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "is_accepted": true, "score": 2, "last_activity_date": 1534456911, "creation_date": 1534456911, "answer_id": 51885888, "question_id": 51885859, "link": "https://stackoverflow.com/questions/51885859/does-perl-execute-code-that-appears-after-the-return-function/51885888#51885888", "title": "Does Perl execute code that appears after the return; function?", "body": "<p>No, Perl does not execute code after a <code>return</code>.  That's the whole point of <code>return</code>!</p>\n"}, {"comments": [{"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 1, "creation_date": 1534508107, "post_id": 51886010, "comment_id": 90740973, "body": "Do not return false. Just use an empty return: <code>return;</code> This will return <code>undef</code> (false) in scalar context and an empty list <code>()</code> in list context. An empty return is the same as: <code>return wantarray ? () : undef;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1534508214, "post_id": 51886010, "comment_id": 90741039, "body": "@shawn: It&#39;s the same as <code>return ()</code>! Evaluating an empty list in scalar context gives <code>undef</code>."}, {"owner": {"reputation": 107, "user_id": 816645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/683076a6c1f49e2d16e81b54cd22e296?s=128&d=identicon&r=PG", "display_name": "dutsnekcirf", "link": "https://stackoverflow.com/users/816645/dutsnekcirf"}, "edited": false, "score": 0, "creation_date": 1534523487, "post_id": 51886010, "comment_id": 90750168, "body": "@Borodin: Thank you for providing the very constructive criticism.  There is a lot I can learn from this and I will incorporate your code.  I did notice shortly afterward that my backtick strings had an extra &quot; character."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1534532565, "post_id": 51886010, "comment_id": 90754096, "body": "@Borodin Yes it does but evaluating an empty array in scalar context gives 0. One of the difference between lists and arrays.  For return, it&#39;s best to let Perl decide."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 2, "creation_date": 1534536641, "post_id": 51886010, "comment_id": 90755624, "body": "@shawnhcorey no.  that is commonly given advice, but it is very wrong.  a sub that is designed to return just a scalar should always do so, whether called in scalar or list context.  only subs that return lists should use bare <code>return;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1534541594, "post_id": 51886010, "comment_id": 90757282, "body": "@shawn: No one mentioned arrays and I can&#39;t see how they&#39;re related to this. Or are you thinking that <code>wantarray</code> actually relates to arrays? It really should be <code>wantlist</code>, as it says whether the call was made in <i>list context</i>."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1534571312, "post_id": 51886010, "comment_id": 90761899, "body": "@Borodin You mentioned arrays. <code>()</code> is an empty array. <code>return();</code> converts the empty array into a list to return it. The difference between arrays and lists is a difficult thing to learn in Perl."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1534590135, "post_id": 51886010, "comment_id": 90765979, "body": "@shawn: <code>()</code> is <i>absolutely not</i> an empty array, although <code>[]</code> <i>does</i> create an array and returns a reference to it. If <code>()</code> were an array then why can&#39;t I assign a list to it,  why is its value in scalar context not its size, why can I not take a reference to it, and why can I not <code>push</code>, <code>pop</code> and <code>splice</code> it? <i>&quot;The difference between arrays and lists is a difficult thing to learn in Perl&quot;</i> It definitely seems so, even for &quot;Perl Gurus&quot;!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1534457683, "creation_date": 1534457683, "answer_id": 51886010, "question_id": 51885859, "link": "https://stackoverflow.com/questions/51885859/does-perl-execute-code-that-appears-after-the-return-function/51886010#51886010", "title": "Does Perl execute code that appears after the return; function?", "body": "<ul>\n<li><p>Don't use prototypes on Perl subroutines. Just <code>sub TacacsInstalled { ... }</code> is correct</p></li>\n<li><p>Use <code>snake_case</code> in preference to <code>CamelCase</code> identifiers</p></li>\n<li><p>Declare all your variables as <em>late as possible</em>, never in a block at the top of your code</p></li>\n<li><p>Make proper use of Perl's statement modifiers</p></li>\n<li><p>None of your backtick strings look correct: you have a spare double quote at the end of each of them. And double quotes don't need escaping within backtick strings</p></li>\n</ul>\n\n<p>I would also say that returning Perl <em>true</em> or <em>false</em> values (<code>0</code>, <code>'0'</code>, and <code>undef</code> are false; anything else is true) is superior to returning <code>True</code> and <code>False</code> strings</p>\n\n<p>I would write this</p>\n\n<pre><code>sub tacacs_installed {\n\n    my $installed = `rpm -qa | grep tac_plus | wc -l`;\n    chomp $installed;\n\n    return 'False' if $installed == 0;    # Tacacs is not installed. Fresh install.\n\n    my $installed_version = `rpm -q tac_plus --queryformat \\\"%{VERSION}\\\"\"`;\n    chomp $installed_version;\n\n    my $new_version = `rpm -qp ./tac_plus*.x86_64.rpm --queryformat \\\"%{VERSION}\\\"\"`;\n    chomp $new_version;\n\n    return 'False' if $installed_version &lt; $new_version;  # Current installed version is too old, must update.\n\n    my $installed_release = `rpm -q tac_plus --queryformat \\\"%{RELEASE}\\\"\"`;\n    chomp $installed_release;\n\n    my $new_release = `rpm -qp ./tac_plus*.x86_64.rpm --queryformat \\\"%{RELEASE}\\\"\"`;\n    chomp $new_release;\n\n    return 'False' if $installed_release &lt; $new_release;  # Current installed release is too old, must update.\n\n    return 'True';\n}\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 816645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/683076a6c1f49e2d16e81b54cd22e296?s=128&d=identicon&r=PG", "display_name": "dutsnekcirf", "link": "https://stackoverflow.com/users/816645/dutsnekcirf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 51885888, "answer_count": 2, "score": 0, "last_activity_date": 1534457683, "creation_date": 1534456723, "question_id": 51885859, "link": "https://stackoverflow.com/questions/51885859/does-perl-execute-code-that-appears-after-the-return-function", "title": "Does Perl execute code that appears after the return; function?", "body": "<p>I have an ugly Perl subroutine that has a nested if statement that returns different values depending on the conditions.  It's ugly because I don't like nested if statements.  They're hard to follow so I want to break it up into separate if statements but I'm not sure if it'll change the way the subroutine performs.  The original subroutine follows: </p>\n\n<pre><code> sub TacacsInstalled(){\n\n    my $Installed;\n    my $InstalledVersion;\n    my $InstalledRelease;\n    my $NewVersion;\n    my $NewRelease;\n\n    $Installed = `rpm -qa | grep tac_plus | wc -l`;\n    chomp $Installed;\n\n    # Check to see if Tacacs is installed.\n    if ($Installed == 0){ # Tacacs is not installed. Fresh install.\n        return \"False\";\n    } else { # Tacacs is installed.  Is it an old version?\n        $InstalledVersion = `rpm -q tac_plus --queryformat \\\"%{VERSION}\\\"\"`;\n        chomp $InstalledVersion;\n        $NewVersion = `rpm -qp ./tac_plus*.x86_64.rpm --queryformat \\\"%{VERSION}\\\"\"`;\n        chomp $NewVersion;\n\n        if ($InstalledVersion &lt; $NewVersion) { # Current installed version is too old, must update.\n            return \"False\";\n        } else { # Maybe the release is newer.\n            $InstalledRelease = `rpm -q tac_plus --queryformat \\\"%{RELEASE}\\\"\"`;\n            chomp $InstalledRelease;\n            $NewRelease = `rpm -qp ./tac_plus*.x86_64.rpm --queryformat \\\"%{RELEASE}\\\"\"`;\n            chomp $NewRelease;\n\n            if ($InstalledRelease &lt; $NewRelease) { # Current installed release is too old, must update.\n                return \"False\";\n\n            } else { # Installed release is newer than or equal to what we're trying to install. Do nothing.\n                return \"True\";\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Could I improve this code by using the following instead?</p>\n\n<pre><code>sub TacacsInstalled(){\n\n    my $Installed;\n    my $InstalledVersion;\n    my $InstalledRelease;\n    my $NewVersion;\n    my $NewRelease;\n\n    $Installed = `rpm -qa | grep tac_plus | wc -l`;\n    chomp $Installed;\n\n    # Check to see if Tacacs is installed.\n    if ($Installed == 0){ return \"False\" }; # Tacacs is not installed perform a fresh install.\n\n    # If we got this far then Tacacs must be installed.  Is it an old version?\n    $InstalledVersion = `rpm -q tac_plus --queryformat \\\"%{VERSION}\\\"\"`;\n    chomp $InstalledVersion;\n    $NewVersion = `rpm -qp ./tac_plus*.x86_64.rpm --queryformat \\\"%{VERSION}\\\"\"`;\n    chomp $NewVersion;      \n\n    if ($InstalledVersion &lt; $NewVersion) { return \"False\" }; # Current installed version is too old, must update.\n\n    # The Version is the same so then is the release is newer?\n    $InstalledRelease = `rpm -q tac_plus --queryformat \\\"%{RELEASE}\\\"\"`;\n    chomp $InstalledRelease;\n    $NewRelease = `rpm -qp ./tac_plus*.x86_64.rpm --queryformat \\\"%{RELEASE}\\\"\"`;\n    chomp $NewRelease;\n\n    if ($InstalledRelease &lt; $NewRelease) { return \"False\" }; # Current installed release is too old, must update.\n\n    # Installed release is newer than or equal to what we're trying to install. Do nothing.\n    return \"True\";\n\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl", "sorting", "hash"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1534456542, "post_id": 51884903, "comment_id": 90723161, "body": "We need to see the code that&#39;s giving you problems."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1534456956, "last_edit_date": 1534456956, "creation_date": 1534456643, "answer_id": 51885849, "question_id": 51884903, "link": "https://stackoverflow.com/questions/51884903/sorting-hash-of-arrays-isolate-only-the-largest-arrays/51885849#51885849", "title": "Sorting hash of arrays: Isolate only the largest arrays", "body": "\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\n\nuse List::Util 'max';\nuse Data::Dump;\n\nmy %HoA = (\n    flintstones =&gt; [ qw/ fred   barney / ],\n    jetsons     =&gt; [ qw/ george jane  elroy / ],\n    simpsons    =&gt; [ qw/ homer  marge bart / ],\n);\n\nmy $max = max map { scalar @$_ } values %HoA;\n\ndd [ grep { @$_ == $max } values %HoA ];\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>[[\"george\", \"jane\", \"elroy\"], [\"homer\", \"marge\", \"bart\"]]\n</code></pre>\n\n<p>or, to exactly match your required output</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>while ( my ($k, $v) = each %HoA ) {\n    next unless @$v == $max;\n    printf \"key: %-10s Array: %s\\n\", $k, \"@$v\";\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>key: simpsons   Array: homer marge bart\nkey: jetsons    Array: george jane elroy\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 51885849, "answer_count": 1, "score": -1, "last_activity_date": 1534456956, "creation_date": 1534451404, "question_id": 51884903, "link": "https://stackoverflow.com/questions/51884903/sorting-hash-of-arrays-isolate-only-the-largest-arrays", "title": "Sorting hash of arrays: Isolate only the largest arrays", "body": "<p>I am able to sort a hash of arrays based on the size of the arrays according to the following code: </p>\n\n<pre><code>use strict; \nuse warnings; \n\nmy %HoA = (\nflintstones    =&gt; [ \"fred\", \"barney\" ],\njetsons        =&gt; [ \"george\", \"jane\", \"elroy\" ],\nsimpsons       =&gt; [ \"homer\", \"marge\", \"bart\" ],\n);\n\nfor my $key ( sort { @{$HoA{$b}} &lt;=&gt; @{$HoA{$a}} } keys %HoA ) {\n    print \"key: $key\\tArray: @{$HoA{$key}} \\n\";\n}\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>key: jetsons    Array: george jane elroy \nkey: simpsons   Array: homer marge bart \nkey: flintstones    Array: fred barney \n</code></pre>\n\n<p>I would like to isolate all of the arrays that are tied for being the largest for subsequent processing. In this case two arrays are tied for being the largest, each with size 3. My desired output would look something like: </p>\n\n<pre><code>key: jetsons    Array: george jane elroy \nkey: simpsons   Array: homer marge bart\n</code></pre>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1534453776, "post_id": 51880115, "comment_id": 90722239, "body": "I would probably just use <a href=\"https://metacpan.org/pod/local::lib\" rel=\"nofollow noreferrer\">local::lib</a> (or at least check how it does it)."}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 10234754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d9de59ed998c599384782083c7936e?s=128&d=identicon&r=PG&f=1", "display_name": "PaulM", "link": "https://stackoverflow.com/users/10234754/paulm"}, "edited": false, "score": 0, "creation_date": 1534438227, "post_id": 51880372, "comment_id": 90715338, "body": "How would I issue those command to see where they point to currently?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534440904, "post_id": 51880372, "comment_id": 90716665, "body": "<code>o conf</code> (all) or <code>o conf {name}</code> will show the current value, which is probably blank. Use <code>perl -V:&#39;.*inst.*&#39;</code> for the dirs <code>perl</code> will use by default"}, {"owner": {"reputation": 169, "user_id": 10234754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d9de59ed998c599384782083c7936e?s=128&d=identicon&r=PG&f=1", "display_name": "PaulM", "link": "https://stackoverflow.com/users/10234754/paulm"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534442239, "post_id": 51880372, "comment_id": 90717274, "body": "@ikegami sitelib=&#39;/usr/local/share/perl5&#39;;installsitelib=&#39;/usr/local/&zwnj;&#8203;share/perl5&#39;; makepl_arg         [INSTALLDIRS=site] mbuildpl_arg       [--installdirs site] Is this pointing all to /usr/local/share/perl5?"}, {"owner": {"reputation": 271, "user_id": 2017777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/269c3357e5daef3de2403d3261d9dcf8?s=128&d=identicon&r=PG", "display_name": "Michael Grant", "link": "https://stackoverflow.com/users/2017777/michael-grant"}, "edited": false, "score": 0, "creation_date": 1605387109, "post_id": 51880372, "comment_id": 114636172, "body": "The above did not quite work as expected for me.  I noticed that when I installed a module from CPAN, it was installing it in /usr/local/share/perl/5.30.3.  But I&#39;m worried that when Perl gets updated via apt that this module will get left behind.  So I figured, maybe I should install modules in somewhere a bit longer lasting for example /usr/share/perl5.  So I changed the PREFIX and install_base to that in the above.  But when I installed Mail::DMARC, it installed it in /usr/share/perl5/lib/perl5/Mail/DMARC!  What would I have to set these vars to to install in /usr/share/perl5?"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1534432559, "creation_date": 1534432559, "answer_id": 51880372, "question_id": 51880115, "link": "https://stackoverflow.com/questions/51880115/install-with-cpan-perl-modules-to-specific-directory-when-several-appear-in-us/51880372#51880372", "title": "Install, with CPAN, Perl modules to specific directory when several appear in use", "body": "<p>Here's how I have configured <code>cpan</code> to put all new modules in a specific directory:</p>\n\n<pre><code>o conf makepl_arg 'PREFIX=/usr/local/share/perl5 INSTALLMAN3DIR=/usr/local/share/perl5/man/man3'\no conf mbuild_arg '--install_base /usr/local/share/perl5'\no conf mbuild_install_arg '--install_base /usr/local/share/perl5'\no conf mbuildpl_arg '--install-base /usr/local/share/perl5'\n[o conf commit]\n</code></pre>\n\n<p>The first line addresses modules that use <code>ExtUtils::MakeMaker</code> and the next three lines are for modules that use <code>Module::Build</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "is_accepted": false, "score": 0, "last_activity_date": 1534513232, "creation_date": 1534513232, "answer_id": 51896717, "question_id": 51880115, "link": "https://stackoverflow.com/questions/51880115/install-with-cpan-perl-modules-to-specific-directory-when-several-appear-in-us/51896717#51896717", "title": "Install, with CPAN, Perl modules to specific directory when several appear in use", "body": "<p>You can also do this quite easily via <a href=\"https://metacpan.org/pod/App::cpm\" rel=\"nofollow noreferrer\">App::cpm</a>.</p>\n\n<pre><code> $ cpm install -L my-random-folder Open::This\n\n DONE install Path-Tiny-0.108 (using prebuilt)\n DONE install Try-Tiny-0.30 (using prebuilt)\n DONE install Module-Build-0.4224 (using prebuilt)\n DONE install Module-Runtime-0.016 (using prebuilt)\n DONE install Open-This-0.000008 (using prebuilt)\n 5 distributions installed.\n\n $ tree my-random-folder\n my-random-folder\n \u251c\u2500\u2500 bin\n \u2502\u00a0\u00a0 \u251c\u2500\u2500 config_data\n \u2502\u00a0\u00a0 \u2514\u2500\u2500 ot\n \u2514\u2500\u2500 lib\n      \u2514\u2500\u2500 perl5\n           \u251c\u2500\u2500 5.26.1\n           \u2502\u00a0\u00a0 \u2514\u2500\u2500 darwin-2level\n           \u251c\u2500\u2500 Module\n           \u2502\u00a0\u00a0 \u251c\u2500\u2500 Build\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 API.pod\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 Authoring.pod\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 Base.pm\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 Bundling.pod\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 Compat.pm\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 Config.pm\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 ConfigData.pm\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 Cookbook.pm\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 Dumper.pm\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 Notes.pm\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 PPMMaker.pm\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 Platform\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 Default.pm\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 MacOS.pm\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 Unix.pm\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 VMS.pm\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 VOS.pm\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 Windows.pm\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 aix.pm\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 cygwin.pm\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 darwin.pm\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 os2.pm\n           \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 PodParser.pm\n           \u2502\u00a0\u00a0 \u251c\u2500\u2500 Build.pm\n           \u2502\u00a0\u00a0 \u2514\u2500\u2500 Runtime.pm\n           \u251c\u2500\u2500 Open\n           \u2502\u00a0\u00a0 \u2514\u2500\u2500 This.pm\n           \u251c\u2500\u2500 Path\n           \u2502\u00a0\u00a0 \u2514\u2500\u2500 Tiny.pm\n           \u251c\u2500\u2500 Try\n           \u2502\u00a0\u00a0 \u2514\u2500\u2500 Tiny.pm\n           \u2514\u2500\u2500 darwin-2level\n                \u2514\u2500\u2500 auto\n                     \u251c\u2500\u2500 Module\n                     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Build\n                     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Runtime\n                     \u251c\u2500\u2500 Open\n                     \u2502\u00a0\u00a0 \u2514\u2500\u2500 This\n                     \u251c\u2500\u2500 Path\n                     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Tiny\n                     \u2514\u2500\u2500 Try\n                          \u2514\u2500\u2500 Tiny\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 10234754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d9de59ed998c599384782083c7936e?s=128&d=identicon&r=PG&f=1", "display_name": "PaulM", "link": "https://stackoverflow.com/users/10234754/paulm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1740, "favorite_count": 0, "closed_date": 1534514182, "answer_count": 2, "score": 2, "last_activity_date": 1534513232, "creation_date": 1534431623, "last_edit_date": 1534438276, "question_id": 51880115, "link": "https://stackoverflow.com/questions/51880115/install-with-cpan-perl-modules-to-specific-directory-when-several-appear-in-us", "closed_reason": "Duplicate", "title": "Install, with CPAN, Perl modules to specific directory when several appear in use", "body": "<p>Running the following command returns several paths:</p>\n\n<pre><code>perl -e 'print join(\"\\n\",@INC,\"\")'\n</code></pre>\n\n<p>Every path has modules installed within. I would want to install modules, as root, into the following directory:</p>\n\n<pre><code>/usr/local/share/perl5\n</code></pre>\n\n<p>What commands would I run to find where cpan,as root, currently installs modules? How would I alter it if it is not the path shown above?</p>\n"}, {"tags": ["perl", "file", "seek"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1534426211, "post_id": 51878166, "comment_id": 90707824, "body": "What do you mean by &quot;<i><code>seek $fh, 0, 0</code> doesn&#39;t seem to work</i>&quot;? Please explain why you think <code>seek</code> failed.  Don&#39;t make us do work for nothing!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1534426215, "post_id": 51878166, "comment_id": 90707827, "body": "If you wonder why seek failed, check for errors! <code>seek(...) or die(&quot;seek: $!\\n&quot;);</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1534426220, "post_id": 51878166, "comment_id": 90707830, "body": "Tip: Don&#39;t use global variables for nothing! Change <code>opendir(DIR, ... )</code> to <code>opendir(my $DIR, ...)</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1534426380, "post_id": 51878166, "comment_id": 90707940, "body": "<code>$.</code> isn&#39;t every useful if you <code>seek</code> around. It simply counts the number of times <code>&lt;&gt;</code> returned. (It&#39;s not like files have an index of lines.)"}, {"owner": {"reputation": 3, "user_id": 8155095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb92c8ea45883a313efc92e78f18fe27?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Lin", "link": "https://stackoverflow.com/users/8155095/vincent-lin"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534429845, "post_id": 51878166, "comment_id": 90710432, "body": "hi ikegami.I tried adding seek $txtfile, 0, 0 or die &quot;Can&#39;t seek $txtfile: $!&quot;;;  No error"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534429899, "post_id": 51878166, "comment_id": 90710475, "body": "You skipped over the first and more important part of my comment, which I now repeat: What makes you think <code>seek</code> isn&#39;t working?"}, {"owner": {"reputation": 3, "user_id": 8155095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb92c8ea45883a313efc92e78f18fe27?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Lin", "link": "https://stackoverflow.com/users/8155095/vincent-lin"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1534429929, "post_id": 51878166, "comment_id": 90710499, "body": "i thought $. gives me the line numbers and the output shows the second loop didn&#39;t start at line 1 as it should if seek works"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8155095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb92c8ea45883a313efc92e78f18fe27?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Lin", "link": "https://stackoverflow.com/users/8155095/vincent-lin"}, "edited": false, "score": 0, "creation_date": 1534434056, "post_id": 51879611, "comment_id": 90713028, "body": "Thanks for the help.  How should I make the code more efficient?  Load the entire text file into an array?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3, "user_id": 8155095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb92c8ea45883a313efc92e78f18fe27?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Lin", "link": "https://stackoverflow.com/users/8155095/vincent-lin"}, "edited": false, "score": 0, "creation_date": 1534434126, "post_id": 51879611, "comment_id": 90713065, "body": "No, a hash keyed by what you are searching"}, {"owner": {"reputation": 3, "user_id": 8155095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb92c8ea45883a313efc92e78f18fe27?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Lin", "link": "https://stackoverflow.com/users/8155095/vincent-lin"}, "edited": false, "score": 0, "creation_date": 1534434382, "post_id": 51879611, "comment_id": 90713222, "body": "The seek doesn&#39;t work because the result is different from closing and reopen the file again     close $txtfile;     open ($txtfile, $file) or die &quot;error opening $file\\n&quot;;      # seek $txtfile, 0, 0 or die &quot;Can&#39;t seek $txtfile: $!&quot;;;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3, "user_id": 8155095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb92c8ea45883a313efc92e78f18fe27?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Lin", "link": "https://stackoverflow.com/users/8155095/vincent-lin"}, "edited": false, "score": 0, "creation_date": 1534434506, "post_id": 51879611, "comment_id": 90713292, "body": "That makes no sense. <code>seek</code> shouldn&#39;t do the same as opening and closing the file. It should change the file pointer to the specified position. And it did."}, {"owner": {"reputation": 3, "user_id": 8155095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb92c8ea45883a313efc92e78f18fe27?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Lin", "link": "https://stackoverflow.com/users/8155095/vincent-lin"}, "edited": false, "score": 0, "creation_date": 1534451756, "post_id": 51879611, "comment_id": 90721458, "body": "You are right.  In a later section of the code I wanted to read through first 150 lines for dates.  For some reason the code stop at line 142 if I used &quot;seek&quot;.  I increase the number to 160 and it works now."}, {"owner": {"reputation": 3, "user_id": 8155095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb92c8ea45883a313efc92e78f18fe27?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Lin", "link": "https://stackoverflow.com/users/8155095/vincent-lin"}, "edited": false, "score": 0, "creation_date": 1534451951, "post_id": 51879611, "comment_id": 90721541, "body": "how do I use a hash to look for a partial match within each line of the file?  The examples I see (<a href=\"https://stackoverflow.com/questions/33373587/string-comparison-for-hash-keys-in-perl\" title=\"string comparison for hash keys in perl\">stackoverflow.com/questions/33373587/&hellip;</a>) only do full match"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3, "user_id": 8155095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb92c8ea45883a313efc92e78f18fe27?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Lin", "link": "https://stackoverflow.com/users/8155095/vincent-lin"}, "edited": false, "score": 0, "creation_date": 1534523399, "post_id": 51879611, "comment_id": 90750111, "body": "Not enough info provided. Also, not the place to ask new questions."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1534430153, "creation_date": 1534430153, "answer_id": 51879611, "question_id": 51878166, "link": "https://stackoverflow.com/questions/51878166/perl-how-come-seek-is-not-working/51879611#51879611", "title": "Perl: How come &quot;seek&quot; is not working", "body": "<p>Files don't have line numbers. They don't even have lines. Files just have bytes. That means you can't just ask the system \"What line of the file is at this position?\"</p>\n\n<p>But, since you're seeking to the start of the file, all you need is to reset <code>$.</code>.</p>\n\n<pre><code>use Fcntl qw( SEEK_SET );\n\nseek($txtfile, 0, SEEK_SET)\n   or die(\"seek: $!\\n\");\n\n$. = 0;\n</code></pre>\n\n<p>By the way, you program is insanely inefficient. Load the data into hashes or into a database!</p>\n"}], "owner": {"reputation": 3, "user_id": 8155095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb92c8ea45883a313efc92e78f18fe27?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Lin", "link": "https://stackoverflow.com/users/8155095/vincent-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "accepted_answer_id": 51879611, "answer_count": 1, "score": 0, "last_activity_date": 1534430153, "creation_date": 1534425847, "last_edit_date": 1534426283, "question_id": 51878166, "link": "https://stackoverflow.com/questions/51878166/perl-how-come-seek-is-not-working", "title": "Perl: How come &quot;seek&quot; is not working", "body": "<p>I'm trying to go through a bunch of text files twice to look for two different values.  However, the <code>seek $fh, 0, 0</code> doesn't seem to work.  Why?</p>\n\n<p>Please help</p>\n\n<p>My codes:</p>\n\n<pre><code> use strict;\n use warnings;\n ...\n read_in_data_employer();\n read_in_data_union();\n process_files ($FileFolder);\n close $FileHandle;\n ...\n sub process_files\n {\n         opendir (DIR, $FileFolder)\n                 or die \"Unable to open $FileFolder: $!\";\n         my @files = grep { /.pdf.txt/ } readdir (DIR);\n         closedir (DIR);\n         @files = map { $FileFolder . '/' . $_ } @files;\n         foreach my $file (@files)\n         {\n                 open (my $txtfile, $file) or die \"error opening $file\\n\";\n                 print \"$file\";\n                 LookForEmployer:\n                 {\n                         print $FileHandle \"\\t\";\n                         while (my $line=&lt;$txtfile&gt;)\n                         {\n                                 foreach (@InputData_Employers)\n                                 {\n                                         if ($line =~ /\\Q$_/i)\n                                         {\n                                                 print $FileHandle \"$_\";\n                                                 last LookForEmployer;\n                                         }\n                                 }\n                         }\n                 }\n                 seek ($txtfile, 0, 0);\n                 LookForUnion:\n                 {\n                         print $FileHandle \"\\t\";\n                         while (my $line=&lt;$txtfile&gt;)\n                         {\n                                 print \"$.\\n\";\n                                 foreach (@InputData_Unions)\n                                 {\n                                         if ($line =~ /\\Q$_/i)\n                                         {\n                                                 print $FileHandle \"$_\";\n                                                 last LookForUnion;\n                                         }\n                                 }\n                         }\n                 }\n                 close $txtfile\n         }\n }\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&gt;perl \"test.pl\" test \"employers.txt\" \"unions.txt\" output.txt\ntest/611-2643-03 (801-0741).pdf.txt12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\ntest/611-2643-05 (801-0741).pdf.txt\n7\n8\n9\n10\n11\n12\ntest/611-2732-21 (805-0083).pdf.txt\n2\n3\n4\n5\n6\n7\n8\ntest/611-2799-17 (801-0152).pdf.txt\n6\n7\n8\n9\n10\n11\n12\n13\n14\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "ftp"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1534447848, "post_id": 51874078, "comment_id": 90719933, "body": "<code>print map { &quot;$_\\n&quot;} @filelist</code> is a valid use of <code>map</code>, but is trying a bit too hard to be clever. <code>print &quot;$_\\n&quot; for @filelist</code> is shorter and more readable."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1534448040, "post_id": 51874078, "comment_id": 90720002, "body": "It would be cleaner to <code>chdir $localdir</code> and then <code>$ftp-&gt;get($filename)</code>, avoiding the construction of absolute file paths. The loop would become a simple <code>chdir $localdir; $ftp-&gt;get($_) for $ftp-&gt;ls($home);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 727, "user_id": 3521180, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/2f876ca95567d98a91df19c0cc7ca340?s=128&d=identicon&r=PG&f=1", "display_name": "user3521180", "link": "https://stackoverflow.com/users/3521180/user3521180"}, "edited": false, "score": 0, "creation_date": 1534413689, "post_id": 51874170, "comment_id": 90700166, "body": "if I use $filename in the for loop, then wouldn&#39;t I need some input in the variable before I use it in the loop? Initially I used $filename to hardcode my code with just single file name,but I removed it as I don&#39;t want to hard code the file name. Now with your suggested loop, what would be the value of $filename?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 727, "user_id": 3521180, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/2f876ca95567d98a91df19c0cc7ca340?s=128&d=identicon&r=PG&f=1", "display_name": "user3521180", "link": "https://stackoverflow.com/users/3521180/user3521180"}, "edited": false, "score": 0, "creation_date": 1534413762, "post_id": 51874170, "comment_id": 90700201, "body": "In each iteration of the loop, it will have the value of one of the elements of the array @filelist."}, {"owner": {"reputation": 727, "user_id": 3521180, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/2f876ca95567d98a91df19c0cc7ca340?s=128&d=identicon&r=PG&f=1", "display_name": "user3521180", "link": "https://stackoverflow.com/users/3521180/user3521180"}, "edited": false, "score": 0, "creation_date": 1534417404, "post_id": 51874170, "comment_id": 90702245, "body": "Thank you for your advice..It worked like a charm. Issue resolved"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1534412929, "creation_date": 1534412929, "answer_id": 51874170, "question_id": 51874078, "link": "https://stackoverflow.com/questions/51874078/why-am-i-not-able-to-download-multiple-files-from-ftp-to-local-directories-using/51874170#51874170", "title": "why am I not able to download multiple files from FTP to local directories using perl?", "body": "<p>You loop over the filelist, but you don't make any use of the iterator (i.e. each element of the list).</p>\n\n<pre><code>for my $filename (@filelist) {\n    $ftp-&gt;get($filename, \"$localdir/$filename\")\n        or die \"...\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1534446223, "creation_date": 1534446223, "answer_id": 51883810, "question_id": 51874078, "link": "https://stackoverflow.com/questions/51874078/why-am-i-not-able-to-download-multiple-files-from-ftp-to-local-directories-using/51883810#51883810", "title": "why am I not able to download multiple files from FTP to local directories using perl?", "body": "<blockquote>\n  <p>Now I came to know that <code>get</code> function is used when we need to download just single file and <code>mget</code> when we need to download multiple files</p>\n</blockquote>\n\n<p><code>mget</code> is a command available in some FTP clients (IBM, Microsoft, etc.) But does not exist in <a href=\"https://tools.ietf.org/html/rfc959\" rel=\"nofollow noreferrer\"><strong>RFC 959</strong></a>, the FTP specification. It is also not available from the <code>Net::FTP</code> module. It must be implemented using the <code>NLST</code> (name list) and <code>GET</code> commands, plus an internal inplementation of a <code>glob</code> filter if required.</p>\n\n<p>Note the the RFC says about <code>NLST</code></p>\n\n<blockquote>\n  <p>This command is intended\n              to return information that can be used by a program to\n              further process the files automatically.  For example, in\n              the implementation of a \"multiple get\" function.</p>\n</blockquote>\n"}], "owner": {"reputation": 727, "user_id": 3521180, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/2f876ca95567d98a91df19c0cc7ca340?s=128&d=identicon&r=PG&f=1", "display_name": "user3521180", "link": "https://stackoverflow.com/users/3521180/user3521180"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 51883810, "answer_count": 2, "score": -1, "last_activity_date": 1534446223, "creation_date": 1534412667, "last_edit_date": 1534413482, "question_id": 51874078, "link": "https://stackoverflow.com/questions/51874078/why-am-i-not-able-to-download-multiple-files-from-ftp-to-local-directories-using", "title": "why am I not able to download multiple files from FTP to local directories using perl?", "body": "<p>I have written the following code to connect to a ftp location and download a single file to my local filesystem.</p>\n\n<pre><code>#!/usr/local/bin/perl -w\n\nuse strict;\nuse Net::FTP;\n\nmy $hostname = 'mirror.anl.gov';\nmy $username = 'anonymous';\nmy $password = 'username@domain.com';\n\n# Hardcode the directory and filename to get\nmy $home = '/pub';\nmy $filename = 'motd';\n\n# Hardcode the local directory\nmy $localdir = '/home/boy/';\n\n# Open the connection to the host\n\nmy $ftp = Net::FTP-&gt;new($hostname)\n    or die \"Cannot connect to $hostname: $@\";     # Construct object\n\n$ftp-&gt;login($username, $password)\n    or die \"Cannot login \", $ftp-&gt;message;;       # Log in\n\n$ftp-&gt;cwd($home)\n    or die \"Cannot change working directory \", $ftp-&gt;message;# Change \n+directory\n\nmy @filelist=$ftp-&gt;ls($home);        \n\nprint map { \"$_\\n\"} @filelist;\n\n# Now get the file and leave\n$ftp-&gt;get($filename,$localdir.$filename)\n    or die \"Cannot get $filename: $@\"; \n\n$ftp-&gt;quit;\n</code></pre>\n\n<p>There is no issue at all, it is downloading and storing a single file on my LFS. But I have multiple files to download. So, I used <code>foreach</code> loop on <code>@filelist</code> as below</p>\n\n<pre><code>foreach(@filelist){    \nprint map { \"$_\\n\"} @filelist;\n\n    # Now get the file and leave\n    $ftp-&gt;get($filename,$localdir.$filename)\n        or die \"Cannot get $filename: $@\"; \n}\n</code></pre>\n\n<p>But now I am getting error on the last <code>die</code>. Since I had to get multiple files, so now I removed the <code>$filename</code> from my code, and now the <code>foreach</code> loop looks like below:</p>\n\n<pre><code>foreach(@filelist){    \nprint map { \"$_\\n\"} @filelist;\n\n# Now get the file and leave\n$ftp-&gt;get($localdir)\n    or die \"Cannot get $filename: $@\"; \n}\n</code></pre>\n\n<p>But again I got the same error. Now I came to know that <code>get</code> function is used when we need to download just single file and <code>mget</code> when we need to download multiple files. But when I used \u0300mget`, I am getting below error:</p>\n\n<pre><code>can not locate object method 'mget' via package NET::FTP\n</code></pre>\n\n<p>So how do we got about accomplishing my task?</p>\n"}, {"tags": ["html", "perl", "html-table"], "comments": [{"owner": {"reputation": 3700, "user_id": 4229270, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JL7am.png?s=128&g=1", "display_name": "Sinto", "link": "https://stackoverflow.com/users/4229270/sinto"}, "edited": false, "score": 0, "creation_date": 1534397101, "post_id": 51870091, "comment_id": 90691635, "body": "Please update the code with proper formatting. Use <code>{}</code> icon to format your code."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1534404758, "post_id": 51870091, "comment_id": 90694995, "body": "I cleaned up your table fragment. Please make efforts to format posts as expected."}], "answers": [{"comments": [{"owner": {"reputation": 401, "user_id": 10004688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lURyY.jpg?s=128&g=1", "display_name": "rikki", "link": "https://stackoverflow.com/users/10004688/rikki"}, "edited": false, "score": 0, "creation_date": 1534411833, "post_id": 51871646, "comment_id": 90699085, "body": "Actually the problem is i am working on a Company&#39;s server and it does not have TableExtract package installed and requesting installation for package will take atleast 2 weeks. I can&#39;t wait till then that&#39;s why i want some alternative"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1534433027, "post_id": 51871646, "comment_id": 90712470, "body": "I think I&#39;d prefer <code>next if none { defined() and &#47;Maximum_Capacity&#47; } @$row</code> or even just <code>next if none { $_ and &#47;Maximum_Capacity&#47; } @$row</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 401, "user_id": 10004688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lURyY.jpg?s=128&g=1", "display_name": "rikki", "link": "https://stackoverflow.com/users/10004688/rikki"}, "edited": false, "score": 1, "creation_date": 1534443186, "post_id": 51871646, "comment_id": 90717737, "body": "@rikki  The alternatives aren&#39;t pleasant. There are general X|HTML parsers (that come installed -- I think?) but using them on tables is <i>much</i> harder and will incur a lot more work. Another &quot;option&quot; is to parse the html text &quot;by hand&quot; but that&#39;s a picky and tricky affair with no good end, and I&#39;d strongly advise not to go there."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 401, "user_id": 10004688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lURyY.jpg?s=128&g=1", "display_name": "rikki", "link": "https://stackoverflow.com/users/10004688/rikki"}, "edited": false, "score": 1, "creation_date": 1534443253, "post_id": 51871646, "comment_id": 90717776, "body": "@rikki Why not install the module as a user?  You need absolutely no permissions for that.  Then you can develop your code, probably use it in production that way -- and once the package is installed by admins you have the code ready."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1534443628, "post_id": 51871646, "comment_id": 90717973, "body": "@Borodin Absolutely -- what I have processes the list twice; I got lulled by the earlier use of filtering.  Fixed (and i keep <code>defined</code>), thank you."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1534445024, "last_edit_date": 1534445024, "creation_date": 1534404125, "answer_id": 51871646, "question_id": 51870091, "link": "https://stackoverflow.com/questions/51870091/how-to-extract-a-specific-row-from-a-html-table-using-htmltreebuilder/51871646#51871646", "title": "How to extract a specific row from a html table using HTML::TreeBuilder", "body": "<p>Use <a href=\"https://metacpan.org/pod/distribution/HTML-TableExtract/lib/HTML/TableExtract.pm\" rel=\"nofollow noreferrer\">HTML::TableExtract</a> to process tables in an HTML document. It's an excellent tool.</p>\n\n<p>A very basic example</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse List::MoreUtils qw(none);\nuse HTML::TableExtract;\n\nmy $file = shift @ARGV;\ndie \"Usage: $0 html-file\\n\" if not $file or not -f $file;\n\nmy $html = do {  # read the whole file into $html string\n    local $/;\n    open my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n    &lt;$fh&gt;;\n};\n\nmy $te = HTML::TableExtract-&gt;new;\n$te-&gt;parse($page);\n\n# Print all tables in this html page\nforeach my $ts ($te-&gt;tables) {\n   say \"Table (\", join(',', $ts-&gt;coords), \"):\";\n   foreach my $row ($ts-&gt;rows) {\n      say \"\\t\", join ',', grep { defined } @$row;\n   }\n}\n\n# Assume that the table of interest is the second one\nmy $table = ($te-&gt;tables)[1];    \nforeach my $row ($table-&gt;rows) {\n    # Select the row you need; for example, identify distinct text in a cell\n    next if none { defined and /Maximum_Capacity/ } @$row;\n    say \"\\t\", join ',', grep { defined } @$row;\n}\n</code></pre>\n\n<p>The module provides many ways to set up parsing preferences, specify tables, retrieve elements, use headers, etc. Please see documentation and search this site for related posts.</p>\n\n<p>I used <code>none</code> from <a href=\"https://metacpan.org/pod/List::MoreUtils\" rel=\"nofollow noreferrer\">List::MoreUtils</a> to test if no elements of a list satisfy a condition.</p>\n"}], "owner": {"reputation": 401, "user_id": 10004688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lURyY.jpg?s=128&g=1", "display_name": "rikki", "link": "https://stackoverflow.com/users/10004688/rikki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1534445024, "creation_date": 1534396970, "last_edit_date": 1534404714, "question_id": 51870091, "link": "https://stackoverflow.com/questions/51870091/how-to-extract-a-specific-row-from-a-html-table-using-htmltreebuilder", "title": "How to extract a specific row from a html table using HTML::TreeBuilder", "body": "<p>I am very new to the perl programming and now got stuck very badly.Actually i have to parse a html file containing a single table and i have to extract a row from there whose one column entry is known to me.</p>\n\n<p>my html file looks like this-</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>many previous rows description in html format....\n\n&lt;td&gt;some_value_default&lt;/td&gt;\n&lt;td&gt;0x0&lt;/td&gt;\n&lt;td&gt;&lt;a href=\"something\" target=\"xyz\"&gt;something&lt;/a&gt;&lt;/td&gt;\n&lt;td&gt;abcd&lt;/td&gt;\n\n//*\n\n&lt;tr&gt;&lt;a name=\"Maximum_Capacity\"&gt;&lt;/a&gt;\n\n&lt;td&gt;some 23:4&lt;/td&gt;\n&lt;td&gt;some_27: 15&lt;/td&gt;\n&lt;td&gt;24:29&lt;/td&gt;\n&lt;td&gt;17&lt;/td&gt;\n&lt;td colspan=3&gt;Maximum_Capacity&lt;/td&gt;\n&lt;td colspan=5&gt;\nsome commonly use value are:  24:31|25:67|677:89|xyz abc    \n&lt;/td&gt;\n//*\n\n&lt;td&gt;some_value_default&lt;/td&gt;\n&lt;td&gt; 0x0&lt;/td&gt;\n&lt;td&gt;&lt;a href=\"something.html\" target=\"ren\"&gt;sometext&lt;/a&gt;&lt;/td&gt;\n&lt;td&gt;again some text&lt;/td&gt;\n\ndescription of many rows in html afterwards...\n</code></pre>\n\n<p>The line between //* is indicating a row which i want to fetch.I want to use information contained in it.How to fetch that row in an array such that each column entry is stored as an array element.</p>\n\n<p>please folks try to help me with that.</p>\n"}]