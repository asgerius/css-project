[{"tags": ["javascript", "jquery", "mysql", "json", "perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1488412069, "post_id": 42544117, "comment_id": 72224349, "body": "No one should have to wade through 150 (or whatever it is) LOC to try to help you. Can you distill the problem down to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for us?"}, {"owner": {"reputation": 19, "user_id": 7644187, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cNVZAhWVbDY/AAAAAAAAAAI/AAAAAAAAAY8/Jk7JVZDb5Zk/photo.jpg?sz=128", "display_name": "PrettyNeet", "link": "https://stackoverflow.com/users/7644187/prettyneet"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1488412276, "post_id": 42544117, "comment_id": 72224410, "body": "I described what my problem was in the intro. My code is there to understand what I have set up so far. I want to pass the user to another page."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1488412410, "post_id": 42544117, "comment_id": 72224455, "body": "Surely you could reproduce the problem more succinctly if you tried. A code dump and a request to debug your code for you and figure out what&#39;s wrong is lazy."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1488413345, "post_id": 42544117, "comment_id": 72224732, "body": "@Matt Jacob, Each file is very straightforward, and there&#39;s not much that can be removed from any of them. You should have no problem working with them."}, {"owner": {"reputation": 19, "user_id": 7644187, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cNVZAhWVbDY/AAAAAAAAAAI/AAAAAAAAAY8/Jk7JVZDb5Zk/photo.jpg?sz=128", "display_name": "PrettyNeet", "link": "https://stackoverflow.com/users/7644187/prettyneet"}, "edited": false, "score": 0, "creation_date": 1488413389, "post_id": 42544117, "comment_id": 72224749, "body": "The current code works, I just need a way to pass the UserID to new pages that they open"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488413481, "post_id": 42544117, "comment_id": 72224780, "body": "<code>window.open(&quot;&#47;cgi-bin&#47;portal.pl?userid=&quot; + encodeURIComponent(data.userid))</code>,but that would be very very bad. A user could change it to anything they wanted to (e.g. <code>admin</code>). Your system needs a complete redesign."}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 7644187, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cNVZAhWVbDY/AAAAAAAAAAI/AAAAAAAAAY8/Jk7JVZDb5Zk/photo.jpg?sz=128", "display_name": "PrettyNeet", "link": "https://stackoverflow.com/users/7644187/prettyneet"}, "is_accepted": false, "score": -1, "last_activity_date": 1488426343, "creation_date": 1488426343, "answer_id": 42546481, "question_id": 42544117, "link": "https://stackoverflow.com/questions/42544117/passing-json-string-to-perl-cgi/42546481#42546481", "title": "Passing JSON string to Perl CGI", "body": "<p>I was able to pass over CGI parameters with another Perl module, CGI:Session.</p>\n\n<p>by adding</p>\n\n<pre><code>my $session = new CGI::Session(undef, undef) or die CGI::Session-&gt;errstr;\n$session-&gt;param(\"username\", $username);\nmy $cookie = $cgi-&gt;cookie(CGISESSID =&gt; $session-&gt;id);\nprint $cgi-&gt;header( -cookie=&gt;$cookie );\n</code></pre>\n\n<p>to my <strong>login.pl</strong> file and adding the following block to my <strong>portal.cgi</strong></p>\n\n<pre><code>my $sid = $cgi-&gt;cookie('CGISESSID') || $cgi-&gt;param('CGISESSID') || undef; #loads previous cookie\nmy $session = load CGI::Session(undef, $sid);\nmy $user = $session-&gt;param(\"username\");\n</code></pre>\n\n<p>This creates a local cookie in the temp dir and is read to find the \"username\" variable I passed into it on the login.pl page</p>\n"}], "owner": {"reputation": 19, "user_id": 7644187, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cNVZAhWVbDY/AAAAAAAAAAI/AAAAAAAAAY8/Jk7JVZDb5Zk/photo.jpg?sz=128", "display_name": "PrettyNeet", "link": "https://stackoverflow.com/users/7644187/prettyneet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 680, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1488426343, "creation_date": 1488410912, "question_id": 42544117, "link": "https://stackoverflow.com/questions/42544117/passing-json-string-to-perl-cgi", "title": "Passing JSON string to Perl CGI", "body": "<p>I'm trying to create a login environment that has a user input their credentials, which is then checked against a <strong>MySQL DB</strong> (with appropriate errors returned if wrong credentials) with <strong>JS</strong> (using <strong>jquery</strong>,<strong>ajax</strong>, and <strong>Perl</strong>) which, on successful login, would display a dynamic page for the user (user portal)</p>\n\n<p>I can't pass the userID to the last cgi page.</p>\n\n<p>below are my codes:</p>\n\n<p><strong>login.html</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;title&gt;login&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" type=\"text/css\" media=\"screen, projection\" href=\"http://www.blueprintcss.org/blueprint/screen.css\" /&gt;\n    &lt;link rel=\"stylesheet\"  type=\"text/css\" media=\"screen, projection\" href=\"http://www.blueprintcss.org/blueprint/plugins/buttons/screen.css\" /&gt;\n    &lt;link rel=\"stylesheet\" type=\"text/css\" media=\"print\" href=\"http://www.blueprintcss.org/blueprint/print.css\" /&gt;\n    &lt;!--[if IE]&gt;&lt;link rel=\"stylesheet\" type=\"text/css\" media=\"screen, projection\" \n        href=\"http://www.blueprintcss.org/blueprint/ie.css\"&gt;&lt;![endif]--&gt;\n    &lt;script type=\"text/javascript\" src=\"js/jquery-3.1.1.min.js\"&gt;&lt;/script&gt;\n    &lt;script type=\"text/javascript\" src=\"login.js\"&gt;&lt;/script&gt;\n    &lt;style type=\"text/css\"&gt;\n    #loginContent { width: 350px; margin: 100px auto; }\n    button[type] { margin: 0.5em 0; }\n    #loginForm{\n        width:25%;\n        padding: 5px 5px;\n        margin:auto;\n    }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h2&gt;Please have pop-ups enabled for this site&lt;/h2&gt;\n    &lt;div id=\"loginResult\" style=\"display:none;\"&gt;&lt;/div&gt;\n    &lt;form id=\"loginForm\" name=\"loginForm\" method=\"post\" action=\"\"&gt;\n        &lt;fieldset&gt;\n        &lt;legend&gt;Enter Information&lt;/legend&gt;\n            &lt;p&gt;\n                &lt;label for=\"username\"&gt;Username&lt;/label&gt;\n                &lt;br /&gt;\n                &lt;input type=\"text\" id=\"username\" name=\"username\" class=\"text\" size=\"20\" /&gt;\n            &lt;/p&gt;\n            &lt;p&gt;\n                &lt;label for=\"password\"&gt;Password&lt;/label&gt;\n                &lt;br /&gt;\n                &lt;input type=\"password\" id=\"password\" name=\"password\" class=\"text\" size=\"20\" /&gt;\n            &lt;/p&gt;\n            &lt;p&gt;\n                &lt;button type=\"submit\" class=\"button positive\"&gt;Login&lt;/button&gt;\n            &lt;/p&gt;\n        &lt;/fieldset&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>login.js</strong></p>\n\n<pre><code>$(document).ready(function(){\n$(\"form#loginForm\").submit(function() { // loginForm is submitted\nvar username = document.getElementById(\"username\").value; //$('#username').attr('value'); // get username\nvar password = document.getElementById(\"password\").value; //$('#password').attr('value'); // get password\n\nif (username &amp;&amp; password) { // values are not empty\n  $.ajax({\n    type: \"GET\",\n    url: \"/cgi-bin/login.pl\", // URL of the Perl script\n    contentType: \"application/json; charset=utf-8\",\n    dataType: \"json\",\n    // send username and password as parameters to the Perl script\n    data: \"username=\" + username + \"&amp;password=\" + password,\n    // script call was *not* successful\n    error: function(XMLHttpRequest, textStatus, errorThrown) { \n      $('div#loginResult').text(\"responseText: \" + XMLHttpRequest.responseText \n        + \", textStatus: \" + textStatus \n        + \", errorThrown: \" + errorThrown);\n      $('div#loginResult').addClass(\"error\");\n    }, // error \n    // script call was successful \n    // data contains the JSON values returned by the Perl script\n    success: function(data){\n      if (data.error) { // script returned error\n        $('div#loginResult').text(\"data.error: \" + data.error);\n        $('div#loginResult').addClass(\"error\");\n      } // if\n      else { // login was successful\n        $('form#loginForm').hide();\n        $('div#loginResult').text(\"data.success: \" + data.success \n          + \", data.userid: \" + data.userid);\n        $('div#loginResult').addClass(\"success\");\n        window.open(\"/cgi-bin/portal.pl\");\n      } //else\n    } // success\n  }); // ajax\n} // if\nelse {\n  $('div#loginResult').text(\"enter username and password\");\n  $('div#loginResult').addClass(\"error\");\n} // else\n$('div#loginResult').fadeIn();\nreturn false;\n});\n});\n</code></pre>\n\n<p><strong>login.pl</strong></p>\n\n<pre><code>#!C:\\Strawberry\\perl\\bin\\perl.exe\nuse CGI;\nuse DBI;\nuse strict;\nuse warnings;\n\n# read the CGI params\nmy $cgi = CGI-&gt;new;\nmy $username = $cgi-&gt;param(\"username\");\nmy $password = $cgi-&gt;param(\"password\");\n\n# connect to the database\nmy $db = 'bakery_users';\nmy $host = 'localhost';\nmy $user = 'root';\nmy $pass = 'P@ssw0rd';\nmy $dbh   = DBI-&gt;connect (\"DBI:mysql:database=$db:host=$host\", $user, $pass) or die \"Can't connect to database: $DBI::errstr\\n\";\n# check the username and password in the database\nmy $statement = qq{SELECT id FROM users WHERE username=? and password=?};\nmy $sth = $dbh-&gt;prepare($statement)\n  or die $dbh-&gt;errstr;\n$sth-&gt;execute($username, $password)\n  or die $sth-&gt;errstr;\nmy ($userID) = $sth-&gt;fetchrow_array;\n\n# create a JSON string according to the database result\nmy $json = ($userID) ? \n  qq{{\"success\" : \"login is successful\", \"userid\" : \"$userID\"}} : \n  qq{{\"error\" : \"username or password is wrong\"}};\n\n# return JSON string\nprint $cgi-&gt;header(-type =&gt; \"application/json\", -charset =&gt; \"utf-8\");\nprint $json;\n</code></pre>\n\n<p>And this is the garbage portal cgi page that needs to know the user so I can serve some specific information</p>\n\n<pre><code>#!C:\\Strawberry\\perl\\bin\\perl.exe\nuse CGI;\nuse strict;\nuse warnings;\n\nmy $cgi = CGI-&gt;new; #new CGI routine\n\nprint $cgi-&gt;header('text/html'); #create HTTP header\n\nprint \"&lt;html&gt; &lt;head&gt;\\n\";\nprint \"&lt;title&gt;Hello, world!&lt;/title&gt;\";\nprint \"&lt;/head&gt;\\n\";\nprint \"&lt;body&gt;\\n\";\nprint \"&lt;h1&gt;Hello, world!&lt;/h1&gt;\\n\";\nprint \"&lt;/body&gt; &lt;/html&gt;\\n\";\n</code></pre>\n\n<p>Most of the login files are modified from the IBM developer page on <a href=\"https://www.ibm.com/developerworks/library/ws-simplelogin/\" rel=\"nofollow noreferrer\">simple CGI user login page with mySQL</a></p>\n"}, {"tags": ["perl", "perforce", "p4v"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1488408084, "post_id": 42543099, "comment_id": 72222816, "body": "What is the purpose of the three dots <code>...</code> after the path names?"}, {"owner": {"reputation": 299, "user_id": 4487866, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7b959ab22f48bfb11918060e2f8f3df5?s=128&d=identicon&r=PG&f=1", "display_name": "Shashank", "link": "https://stackoverflow.com/users/4487866/shashank"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1488408269, "post_id": 42543099, "comment_id": 72222899, "body": "Thats how that command is specified in the P4V documentation - <a href=\"https://www.perforce.com/perforce/r16.2/manuals/cmdref/p4_copy.html\" rel=\"nofollow noreferrer\">perforce.com/perforce/r16.2/manuals/cmdref/p4_copy.html</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1488410735, "post_id": 42543099, "comment_id": 72223869, "body": "@H&#229;kon H&#230;gland, p4 notation for &quot;all files here and in descendant subdirectories&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 176, "user_id": 4001527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f765bd11dcefcfa96fd44b26b55df7a5?s=128&d=identicon&r=PG", "display_name": "Drew Marold", "link": "https://stackoverflow.com/users/4001527/drew-marold"}, "edited": false, "score": 0, "creation_date": 1489775695, "post_id": 42543809, "comment_id": 72835895, "body": "findstr is like grep for Windows batch file programming. Every line that matches one of the strings specified with a /C: flag gets printed. He takes advantage of the fact that Description: is the last one printed, tacks on his description at the end and feeds it to p4 client -i."}, {"owner": {"reputation": 31669, "user_id": 3799759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5820aa24337a2f622b78e92c39e3e3d6?s=128&d=identicon&r=PG", "display_name": "Samwise", "link": "https://stackoverflow.com/users/3799759/samwise"}, "reply_to_user": {"reputation": 176, "user_id": 4001527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f765bd11dcefcfa96fd44b26b55df7a5?s=128&d=identicon&r=PG", "display_name": "Drew Marold", "link": "https://stackoverflow.com/users/4001527/drew-marold"}, "edited": false, "score": 0, "creation_date": 1489780912, "post_id": 42543809, "comment_id": 72838670, "body": "oh I see, and rather than picking out the number the regex removes everything that&#39;s NOT a number.  I guess that works?  Using &quot;-F&quot; and &quot;--field&quot; is much easier though.  :)"}], "tags": [], "owner": {"reputation": 31669, "user_id": 3799759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5820aa24337a2f622b78e92c39e3e3d6?s=128&d=identicon&r=PG", "display_name": "Samwise", "link": "https://stackoverflow.com/users/3799759/samwise"}, "is_accepted": false, "score": 2, "last_activity_date": 1489861467, "last_edit_date": 1489861467, "creation_date": 1488409402, "answer_id": 42543809, "question_id": 42543099, "link": "https://stackoverflow.com/questions/42543099/unable-to-move-files-from-one-folder-to-another-using-perforce-commands/42543809#42543809", "title": "Unable to move files from one folder to another using Perforce commands", "body": "<p>Seeing the output of the various commands you're running would be helpful -- if your changelist isn't getting submitted there'll be an error message in there somewhere.  I'd recommend trying this scenario out from the command line one command at a time so you have a good idea what the output of each command looks like before you try to script it.</p>\n\n<p>I'd do the changelist part something like this (off the top of my head, you might need to escape some of those characters and/or double check that %change% is the right field to grab from the <code>p4 -Ztag change</code> output):</p>\n\n<pre><code>$changenumber = `p4 --field \"Description=I moved it!\" change -o | p4 -Ztag -F %change% change -i`;\n</code></pre>\n\n<p>I'd also suggest using <code>move</code> instead of <code>copy -v</code>+<code>delete</code> if you want to have a local copy of the files without having to do a redundant sync (the <code>move</code> command will just move the files client-side if they're already synced):</p>\n\n<pre><code>p4 sync //depot/oldpath/...\np4 edit //depot/oldpath/...\np4 move //depot/oldpath/... //depot/newpath/...\np4 submit -d \"I moved it!\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 176, "user_id": 4001527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f765bd11dcefcfa96fd44b26b55df7a5?s=128&d=identicon&r=PG", "display_name": "Drew Marold", "link": "https://stackoverflow.com/users/4001527/drew-marold"}, "is_accepted": false, "score": 0, "last_activity_date": 1489776384, "creation_date": 1489776384, "answer_id": 42865058, "question_id": 42543099, "link": "https://stackoverflow.com/questions/42543099/unable-to-move-files-from-one-folder-to-another-using-perforce-commands/42865058#42865058", "title": "Unable to move files from one folder to another using Perforce commands", "body": "<p>Does any of this work at all? Does a changelist get created when you run it? You're capturing the output of each command, print it out and see what's happening.\nOne thing to check is if the environment the script runs in has the correct values for P4PORT, P4USER, etc.\nI would also concur with what Sam said, a move makes more sense than a copy/delete. Even though you're deleting the files, they still exist on the server taking up space. Plus move retains history, which copy does not.</p>\n"}], "owner": {"reputation": 299, "user_id": 4487866, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7b959ab22f48bfb11918060e2f8f3df5?s=128&d=identicon&r=PG&f=1", "display_name": "Shashank", "link": "https://stackoverflow.com/users/4487866/shashank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1489861467, "creation_date": 1488406322, "last_edit_date": 1488441632, "question_id": 42543099, "link": "https://stackoverflow.com/questions/42543099/unable-to-move-files-from-one-folder-to-another-using-perforce-commands", "title": "Unable to move files from one folder to another using Perforce commands", "body": "<p>I am trying to write some code to move sub-folders with specific names to another folder. I have used the change, copy, sync and delete commands but I am not sure what am I doing wrong.</p>\n\n<p>When I run this code, my Perl Tk GUI spits out \"Released xxx\", but the folders haven't actually moved. At the same time, when I run these commands it fails to identify even that the file exists in P4V.</p>\n\n<p>Here is the code snippet dealing with the move.</p>\n\n<pre><code>my $changelistnumber \n   = qx{(p4 change -o | findstr /C:Description: /C:Change: /C:Client: /C:User: /C:Status: &amp; echo    Released $folder) | p4 change -i};\n\n$changelistnumber =~ s/[^0-9]//g;\n\nmy $printOutput \n   = qx{p4 copy -c $changelistnumber -v //syseng/Libraries/Concept/request_for_approval/$libfolderUnreleased/$folder/...    //syseng/Libraries/Concept/released/$libfolder/$folder/...};\n\nprint \"Hello!\";\n\n$printOutput \n   = qx{p4 sync -k //syseng/Libraries/Concept/request_for_approval/$libfolderUnreleased/$folder/...};\n\nprint \"Hello1\";\n\n$printOutput \n   = qx{p4 delete -c $changelistnumber //syseng/Libraries/Concept/request_for_approval/$libfolderUnreleased/$folder/...};\n\nprint \"Hello2\";\n\n$printOutput = qx{p4 submit -c $changelistnumber};\n\n$d-&gt;Label(-text=&gt; \"Released $folder\" )-&gt;pack();\n</code></pre>\n"}, {"tags": ["perl", "shell", "ssh"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1488400634, "post_id": 42541405, "comment_id": 72218836, "body": "Have you tried to quote the heredoc? See <a href=\"http://stackoverflow.com/a/27921346/2173773\">How to avoid heredoc expanding variables?</a>"}, {"owner": {"reputation": 123, "user_id": 7638104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92011a3d60f3c202bc1ddf6c8752c19e?s=128&d=identicon&r=PG", "display_name": "fabreg", "link": "https://stackoverflow.com/users/7638104/fabreg"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1488401553, "post_id": 42541405, "comment_id": 72219373, "body": "Yes, with -T option and it returns this error: stdin: is not a tty syntax error at -e line 1, near &quot;( =&quot; syntax error at -e line 1, near &quot;( =&quot; Execution of -e aborted due to compilation errors."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488401734, "post_id": 42541405, "comment_id": 72219495, "body": "The third uses improper escaping. You are doing <code>ssh root@$IPSRV &quot;++($n = $1)&quot;</code> so are passing <code>...++( = )</code> to the remote host. Same issue with the second, actually."}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1488401764, "post_id": 42541405, "comment_id": 72219516, "body": "Do you attempt the remote execution from shell script or perl script?"}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1488401874, "post_id": 42541405, "comment_id": 72219588, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/31227601/here-document-no-parameter-expansion\">Here document: no parameter expansion</a>"}, {"owner": {"reputation": 123, "user_id": 7638104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92011a3d60f3c202bc1ddf6c8752c19e?s=128&d=identicon&r=PG", "display_name": "fabreg", "link": "https://stackoverflow.com/users/7638104/fabreg"}, "reply_to_user": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1488401981, "post_id": 42541405, "comment_id": 72219645, "body": "@Andrzej A. Filip from bash."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488406339, "post_id": 42541405, "comment_id": 72221981, "body": "Which machine&#39;s <code>$SITENAME</code> variable do you want to use?"}, {"owner": {"reputation": 123, "user_id": 7638104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92011a3d60f3c202bc1ddf6c8752c19e?s=128&d=identicon&r=PG", "display_name": "fabreg", "link": "https://stackoverflow.com/users/7638104/fabreg"}, "edited": false, "score": 0, "creation_date": 1488407308, "post_id": 42541405, "comment_id": 72222458, "body": "$SITENAME is local variable."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 7638104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92011a3d60f3c202bc1ddf6c8752c19e?s=128&d=identicon&r=PG", "display_name": "fabreg", "link": "https://stackoverflow.com/users/7638104/fabreg"}, "edited": false, "score": 0, "creation_date": 1488403227, "post_id": 42542003, "comment_id": 72220334, "body": "Basically this script execute many commands remotely and this perl substitution is one of the last command."}, {"owner": {"reputation": 123, "user_id": 7638104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92011a3d60f3c202bc1ddf6c8752c19e?s=128&d=identicon&r=PG", "display_name": "fabreg", "link": "https://stackoverflow.com/users/7638104/fabreg"}, "edited": false, "score": 0, "creation_date": 1488403918, "post_id": 42542003, "comment_id": 72220700, "body": "All commands, needs to be running remotely. so ssh root@$IPSRV &quot;first command second command third command ...&quot; and this perl substitution it&#39;s included in the commands"}, {"owner": {"reputation": 123, "user_id": 7638104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92011a3d60f3c202bc1ddf6c8752c19e?s=128&d=identicon&r=PG", "display_name": "fabreg", "link": "https://stackoverflow.com/users/7638104/fabreg"}, "edited": false, "score": 0, "creation_date": 1488405013, "post_id": 42542003, "comment_id": 72221332, "body": "to execute the substitution on a remote file"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 123, "user_id": 7638104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92011a3d60f3c202bc1ddf6c8752c19e?s=128&d=identicon&r=PG", "display_name": "fabreg", "link": "https://stackoverflow.com/users/7638104/fabreg"}, "edited": false, "score": 0, "creation_date": 1488406143, "post_id": 42542003, "comment_id": 72221884, "body": "You&#39;re telling me your have multiple commands to run because you want to perform substitutions on a remote file? What??? You&#39;re not making any sense. Do you have some kind of problem with the answer?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1488473497, "last_edit_date": 1488473497, "creation_date": 1488402168, "answer_id": 42542003, "question_id": 42541405, "link": "https://stackoverflow.com/questions/42541405/execute-a-perl-substitution-through-ssh-perl-one-oneliner-from-shell-script/42542003#42542003", "title": "Execute a perl substitution through ssh [perl one-oneliner from shell script]", "body": "<p>Improper escaping.</p>\n\n<p><code>ssh root@$IPSRV \"...++($n = $1)...\"</code> passes <code>...++( = )...</code> to the remote host. Same with the here-doc version. (The here-doc version also has a stray quote.)</p>\n\n<p>Handling multiple levels of escaping is complicated, so let's do the escaping programmatically. This also allows us to pass values from variables, as they need to be converted into shell literals.</p>\n\n<pre><code>quote() {\n    prefix=''\n    for p in \"$@\" ; do\n        printf \"$prefix\"\\'\n        printf %s \"$p\" | sed \"s/'/'\\\\\\\\''/g\"\n        printf \\'\n        prefix=' '\n    done\n}\n\nssh root@$IPSRV \"$( quote perl -i -pe'...' \"$SITENAME\" )\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>quote() {\n    perl -MString::ShellQuote=shell_quote -e'print(shell_quote(@ARGV))' \"$@\"\n}\n\nssh root@$IPSRV \"$( quote perl -i -pe'...' \"$SITENAME\" )\"\n</code></pre>\n\n<hr>\n\n<p>In case it's of help to others, the following shows how to use the remote machine's <code>$SITENAME</code> var instead:</p>\n\n<pre><code>quote() {\n    prefix=''\n    for p in \"$@\" ; do\n        printf \"$prefix\"\\'\n        printf %s \"$p\" | sed \"s/'/'\\\\\\\\''/g\"\n        printf \\'\n        prefix=' '\n    done\n}\n\nssh root@$IPSRV \"$( quote perl -i -pe'...' )\"' \"$SITENAME\"'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>quote() {\n    perl -MString::ShellQuote=shell_quote -e'print(shell_quote(@ARGV))' \"$@\"\n}\n\nssh root@$IPSRV \"$( quote perl -i -pe'...' )\"' \"$SITENAME\"'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>ssh localhost sh &lt;&lt;'EOI'       # Notice the quotes around the token.\nperl -i -pe'...' \"$SITENAME\"\nEOI\n</code></pre>\n\n<p>Or, since it doesn't need any local variables, you can do it manually rather easily. Take the remote command, replace every <code>'</code> with <code>'\\''</code>, then wrap the whole with quotes.</p>\n\n<p>Remote command:</p>\n\n<pre><code>perl -i -pe'...' \"$SITENAME\"\n</code></pre>\n\n<p>Local command:</p>\n\n<pre><code>ssh root@$IPSRV 'perl -i -pe'\\''...'\\'' \"$SITENAME\"'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 7638104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92011a3d60f3c202bc1ddf6c8752c19e?s=128&d=identicon&r=PG", "display_name": "fabreg", "link": "https://stackoverflow.com/users/7638104/fabreg"}, "edited": false, "score": 0, "creation_date": 1488489967, "post_id": 42555565, "comment_id": 72266488, "body": "Unfortunately this is not an option - the script is invoked by bash so if I want to use your solution I need to add the invocation of this perl script into the bash one. Thanks anyway!"}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "reply_to_user": {"reputation": 123, "user_id": 7638104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92011a3d60f3c202bc1ddf6c8752c19e?s=128&d=identicon&r=PG", "display_name": "fabreg", "link": "https://stackoverflow.com/users/7638104/fabreg"}, "edited": false, "score": 0, "creation_date": 1488535214, "post_id": 42555565, "comment_id": 72284563, "body": "... or you could rewrite the full script in Perl!"}], "tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": false, "score": 0, "last_activity_date": 1488473603, "last_edit_date": 1488473603, "creation_date": 1488457752, "answer_id": 42555565, "question_id": 42541405, "link": "https://stackoverflow.com/questions/42541405/execute-a-perl-substitution-through-ssh-perl-one-oneliner-from-shell-script/42555565#42555565", "title": "Execute a perl substitution through ssh [perl one-oneliner from shell script]", "body": "<p>Quoting by hand is hard an error prone. Let's Perl do all the work for you:</p>\n\n<pre><code>use Net::OpenSSH;\n\nmy $one_liner = &lt;&lt;'EOOL';\ns/nginx-cache\\K(\\d+)/ ++($n = $1) /e; s/MYSITE\\K(\\w+)/ ++($n = $1) /e\nEOOL\n\nmy $ssh = Net::OpenSSH-&gt;new(\"root\\@$ENV{IPSRV}\");\n$ssh-&gt;system('perl', '-i', '-pe', $one_liner, $ENV{SITENAME});\n$ssh-&gt;die_on_error;\n</code></pre>\n\n<p>Don't forget to <code>export</code> <code>$IPSRV</code> and <code>$SITENAME</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 123, "user_id": 7638104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92011a3d60f3c202bc1ddf6c8752c19e?s=128&d=identicon&r=PG", "display_name": "fabreg", "link": "https://stackoverflow.com/users/7638104/fabreg"}, "is_accepted": false, "score": 0, "last_activity_date": 1488586954, "creation_date": 1488586954, "answer_id": 42590575, "question_id": 42541405, "link": "https://stackoverflow.com/questions/42541405/execute-a-perl-substitution-through-ssh-perl-one-oneliner-from-shell-script/42590575#42590575", "title": "Execute a perl substitution through ssh [perl one-oneliner from shell script]", "body": "<p>After a lot of tries I got it working! ;-))</p>\n\n<p>The problem was related to the shell that tries to expand $n or $1 environmental variables prior to sending all this to remote SSH. And on remote side script turns into:</p>\n\n<pre><code>perl -i -pe 's/nginx-cache\\K(\\d+)/ ++( = ) /e; s/MYSITE\\K(\\w+)/ ++( = ) /e;'\n</code></pre>\n\n<p>which yields error on \"( = )\" places.\nJust escaping them as \\$n sends these string untouched:</p>\n\n<pre><code>perl -i -pe 's/nginx-cache\\\\K(\\\\d+)/ ++(\\$n = \\$1) /e; s/MYSITE\\\\K(\\\\w+)/ ++(\\$n = \\$1) /e;' $SITENAME\n</code></pre>\n\n<p>So, the complete answer:</p>\n\n<pre><code>ssh root@IPSRV \"\n  first command\n  second command\n  perl -i -pe 's/nginx-cache\\\\K(\\\\d+)/ ++(\\$n = \\$1) /e; s/MYSITE\\\\K(\\\\w+)/ ++(\\$n = \\$1) /e;' $SITENAME\n  \"\n</code></pre>\n\n<p>Thanks anyone for pointing me in the right direction!</p>\n"}], "owner": {"reputation": 123, "user_id": 7638104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92011a3d60f3c202bc1ddf6c8752c19e?s=128&d=identicon&r=PG", "display_name": "fabreg", "link": "https://stackoverflow.com/users/7638104/fabreg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1488586954, "creation_date": 1488400022, "last_edit_date": 1488490991, "question_id": 42541405, "link": "https://stackoverflow.com/questions/42541405/execute-a-perl-substitution-through-ssh-perl-one-oneliner-from-shell-script", "title": "Execute a perl substitution through ssh [perl one-oneliner from shell script]", "body": "<p>I'm trying to execute this script remotely:</p>\n\n<pre><code>perl -i -pe 's/nginx-cache\\K(\\d+)/ ++($n = $1) /e; s/MYSITE\\K(\\w+)/ ++($n = $1) /e;' $SITENAME\n</code></pre>\n\n<p>with the following solution:</p>\n\n<pre><code>ssh -T root@$IPSRV &lt;&lt;EOI\nperl -i -pe 's/nginx-cache\\K(\\d+)/ ++($n = $1) /e; s/MYSITE\\K(\\w+)/ ++($n = $1) /e;' /etc/nginx/sites-available/$SITENAME\"\nexit\nEOI\n</code></pre>\n\n<p>I tried also without the \"-T\" option of ssh</p>\n\n<pre><code>ssh root@$IPSRV \"\n&gt; perl -i -pe 's/nginx-cache\\K(\\d+)/ ++($n = $1) /e; s/MYSITE\\K(\\w+)/ ++($n = $1) /e;' /etc/nginx/sites-available/$SITENAME\"\n</code></pre>\n\n<p>but unfortunately it does not work:</p>\n\n<pre><code>syntax error at -e line 1, near \"( =\"\nsyntax error at -e line 1, near \"( =\"\nExecution of -e aborted due to compilation errors.\n</code></pre>\n\n<p>Could someone please suggest me a solution for running this command remotely?\nThanks in advance!</p>\n\n<p>Note that <code>$SITENAME</code> is a variable on the local machine.</p>\n\n<p><strong>[EDIT]</strong></p>\n\n<p>I have made some progress, based on the @ikegami's answer.\nI tried</p>\n\n<pre><code>root@$IPSRV 'perl -i -pe'\\''s/nginx-cache\\K(\\d+)/ ++($n = $1) /e; s/MYSITE\\K(\\w+)/ ++($n = $1) /e;'\\'' /etc/nginx/sites-available/\"$SITENAME\"'\nroot@192.168.1.100's password: \nCan't do in place edit: /etc/nginx/sites-available/ is not a regular file.\n</code></pre>\n\n<p>I think it's related to the missing substitution of $SITENAME variable.</p>\n\n<p>Another important thing to keep in mind is the use of single quote after ssh root@IPSRV - it should be replaced by quotes because I have other variables into the script and if I use single quote they are not translated.\nExample:</p>\n\n<pre><code>ssh root@$IPSRV \"mkdir $TESTDIR\n    cp /tmp/file $TESTDIR\"\n</code></pre>\n\n<p>This works, but if I try with single quote:</p>\n\n<pre><code>ssh root@$IPSRV 'mkdir $TESTDIR\n        cp /tmp/file $TESTDIR'\n</code></pre>\n\n<p>it does not. So I have to consider also this aspect if the only way for running the perl substitution is  'perl -i -pe'\\''s ...</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["multithreading", "perl", "subroutine", "processing-efficiency"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1488407714, "post_id": 42540530, "comment_id": 72222642, "body": "What is <code>$DataQueue</code>?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1488413435, "post_id": 42540530, "comment_id": 72224765, "body": "I don&#39;t see why you are doing it this way, but you can indeed return results by putting them on another queue. (I take it that <code>$DataQueue</code> is that.)  Then you can also fetch from that queue as soon as resultls are available, instead of after all <code>$thr</code> finish. (Sit in a loop as long as there workers out there, <code>dequeue</code>-ing.)   Above all, please explain what is what in your question."}, {"owner": {"reputation": 1033, "user_id": 1535666, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/82b3874f463469e9c48455b3bcf9c903?s=128&d=identicon&r=PG", "display_name": "sSmacKk", "link": "https://stackoverflow.com/users/1535666/ssmackk"}, "edited": false, "score": 0, "creation_date": 1488585109, "post_id": 42540530, "comment_id": 72312863, "body": "Yes it is a Thread::Queue, I figured it was obvious in this context. After a bit of playing around, I ended up dequeue-ing as soon as I got the result for each thread instead of doing it at the end."}], "owner": {"reputation": 1033, "user_id": 1535666, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/82b3874f463469e9c48455b3bcf9c903?s=128&d=identicon&r=PG", "display_name": "sSmacKk", "link": "https://stackoverflow.com/users/1535666/ssmackk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1488397167, "creation_date": 1488397167, "question_id": 42540530, "link": "https://stackoverflow.com/questions/42540530/handling-resulting-data-from-perl-threads", "title": "Handling resulting data from perl Threads", "body": "<p>I figured out how to create threads so I could perform multiple subroutine calls in parallel, but I'm unsure of my solution of retrieving the data returned by each of the parallel subroutines.</p>\n\n<p>My code below:</p>\n\n<pre><code>while( $int3 &lt;= scalar(@all_jobs) ) {\n my ($thr0) = threads-&gt;create(\\&amp;retrieveSCMList, $all_jobs[$int0]); \n my ($thr1) = threads-&gt;create(\\&amp;retrieveSCMList, $all_jobs[$int1]); \n my ($thr2) = threads-&gt;create(\\&amp;retrieveSCMList, $all_jobs[$int2]); \n my ($thr3) = threads-&gt;create(\\&amp;retrieveSCMList, $all_jobs[$int3]); \n $int0=$int0+4;\n $int1=$int1+4;\n $int2=$int2+4;\n $int3=$int3+4;\n $DataQueue-&gt;enqueue( $thr0-&gt;join() );\n $DataQueue-&gt;enqueue( $thr1-&gt;join() );\n $DataQueue-&gt;enqueue( $thr2-&gt;join() );\n $DataQueue-&gt;enqueue( $thr3-&gt;join() );\n}\n\nmy %all_scm;\nwhile( my $job_scm = $DataQueue-&gt;dequeue ) {\n $all_scm{$job_scm}=1;\n}\n</code></pre>\n\n<p>Where @all_jobs is an array of 20k+ strings and retrieveSCMList() is a subroutine that makes a cURL call, processes the call result and returns a string as output.</p>\n\n<p>I'm interested in knowing what the most efficient way of retrieving the data return by the concurrent subroutines and placing that into a hash.\nIs my solution above correct? or is there a more efficient less demanding way of doing it?</p>\n\n<p>Perhaps placing the dequeue right after the join statements inside the while loop, so that I extract the data from the queue as soon as it's filled?</p>\n\n<p>Thanks,\nCJ</p>\n"}, {"tags": ["perl", "parsing", "cgi", "query-string"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1488391080, "post_id": 42538579, "comment_id": 72213172, "body": "<a href=\"http://p3rl.org/JSON\" rel=\"nofollow noreferrer\">JSON</a>, <a href=\"http://p3rl.org/JSON::XS\" rel=\"nofollow noreferrer\">JSON::XS</a>..."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1488391111, "post_id": 42538579, "comment_id": 72213188, "body": "@choroba That&#39;s not JSON."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1488391315, "post_id": 42538579, "comment_id": 72213297, "body": "I know but isn&#39;t it possible to switch to JSON instead?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1488391497, "post_id": 42538579, "comment_id": 72213405, "body": "@choroba <a href=\"http://api.jquery.com/jQuery.param/\" rel=\"nofollow noreferrer\">This is something jQuery does to pass around JSON</a>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1488391823, "post_id": 42538579, "comment_id": 72213608, "body": "Do you control the JavaScript code? If so, convert your object to a JSON string, URL encode it, and send that. JSON is a language-independent standard, while jQuery&#39;s <code>.param</code> method is not. Also see <a href=\"http://stackoverflow.com/q/15872658\">stackoverflow.com/q/15872658</a>"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1488392125, "post_id": 42538579, "comment_id": 72213796, "body": "@ThisSuitIsBlackNot Better yet, skip all the URI encoding, query parsing, query param size limits, and security issues of sending data via GET and POST JSON."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1488392256, "post_id": 42538579, "comment_id": 72213866, "body": "@Schwern Even better!"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1488393526, "post_id": 42538579, "comment_id": 72214634, "body": "@Schwern Actually, I think you should make that an answer."}], "answers": [{"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 2, "creation_date": 1488392028, "post_id": 42538939, "comment_id": 72213732, "body": "Consider turning that into a module?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1488392719, "post_id": 42538939, "comment_id": 72214160, "body": "There&#39;s no spec, but the <a href=\"https://github.com/jquery/jquery/blob/5f35b5b406ae7d504de86a3f0a5647b2fdf4f2af/src/serialize.js#L55\" rel=\"nofollow noreferrer\">implementation</a> is pretty short. Of course, it&#39;s changed several times over the years..."}, {"owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "edited": false, "score": 0, "creation_date": 1488453446, "post_id": 42538939, "comment_id": 72242459, "body": "@ikegami I tried your function, but it says: <code>Can&#39;t use an undefined value as an ARRAY reference at test.pl line 25.</code> which is the line: <code>push @{ DiveVal(\\%data, @k) }, $v;</code> I can&#39;t say I understand what you are doing there so can you please help me correct it?"}, {"owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "edited": false, "score": 0, "creation_date": 1488456636, "post_id": 42538939, "comment_id": 72244610, "body": "@ikegamy also shouldn&#39;t the line <code>for (my $k_ = $k)</code> be: <code>for (my $_ = $k)</code> I think that&#39;s just a typo."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488468382, "post_id": 42538939, "comment_id": 72253045, "body": "If one could do <code>my $_ = $k;</code>, there wouldn&#39;t be any need for <code>for</code> at all. <code>for (my $k_ = $k) { ... }</code> is used as an alternative to <code>my $_ = $k; ...</code> meaning it creates a lexically-scoped <code>$_</code> that&#39;s a copy of <code>$k</code>."}, {"owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "edited": false, "score": 0, "creation_date": 1488477663, "post_id": 42538939, "comment_id": 72259327, "body": "Neat, I did not know about this. Unfortuantely the original problem still stands, the undefined value as ARRAY reference."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "edited": false, "score": 0, "creation_date": 1488478464, "post_id": 42538939, "comment_id": 72259804, "body": "@soger, huh? What version of Perl and Data::Diver do you use? Do you have better luck with <code>push @{ ${ DiveRef(\\%data, @k) } }, $v;</code>? (Don&#39;t forget to import <code>DiveRef</code>.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488478819, "post_id": 42538939, "comment_id": 72260008, "body": "Also, any reason you&#39;re not switching to JSON?"}, {"owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "edited": false, "score": 0, "creation_date": 1488537360, "post_id": 42538939, "comment_id": 72286037, "body": "@ikegami DiveRef did it, thank you. I have perl 5.14.2 so not the newest, that may be the problem, but I just installed Data::Diver from CPAN so that&#39;s the latest version. Update your response if you wish so it will work for more people. The reason I&#39;m not switching to JSON is because my company extensively uses jquery and php but some tasks are better suited for perl so and I need interoperability."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488561794, "post_id": 42538939, "comment_id": 72302254, "body": "That explanation makes no sense. Using JSON actually increases interoperability. JavaScript, PHP and Perl all handle JSON expertly. (<code>my $data =decode_json($json);</code>) Unlike this broken format you are asking about."}, {"owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "edited": false, "score": 0, "creation_date": 1488796995, "post_id": 42538939, "comment_id": 72375107, "body": "Well I didn&#39;t want to write a novel into the comment section but basically what I&#39;m doing is I&#39;m writing a specialized cache layer between already existing pages that display information on a map (based on postgres notifications it knows when the cache needs to be refreshed) and it&#39;s just easier to make my perl code compatible than to rewrite the other pages. And this is not the first time I needed something similar and your code is not that complicated so why not. I know there are better solutions but it&#39;s a huge already running project so I can&#39;t just rewrite anything I want."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488823610, "post_id": 42538939, "comment_id": 72392897, "body": "That makes no sense at all. You&#39;re obviously changing how you&#39;re calling the Perl script, so we&#39;re only talking about changing new code or code you&#39;re already changing. And even if the calls to <code>.ajax</code> are all over the place (which thye shouldn&#39;t be), it&#39;s trivial to apply <code>s&#47;data: \\K(\\w+)&#47;JSON.stringify($1)&#47;g</code> to your files."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1488562357, "last_edit_date": 1488562357, "creation_date": 1488391681, "answer_id": 42538939, "question_id": 42538579, "link": "https://stackoverflow.com/questions/42538579/how-can-i-parse-complex-query-strings-generated-by-jquery-ajax-in-perl/42538939#42538939", "title": "How can I parse complex query strings generated by jQuery.ajax() in Perl?", "body": "<p>Have you considered submitting your data as JSON instead? It's simply a question of replacing </p>\n\n<pre><code>data: data\n</code></pre>\n\n<p>with</p>\n\n<pre><code>data: JSON.stringify(data)\n</code></pre>\n\n<p>You could even switch to a <code>POST</code> to avoid URI-encoding, URI-decoding and query size limits (although POST semantics are different than GET semantics).</p>\n\n<pre><code>method:      \"POST\",\ncontentType: \"application/json; charset=UTF-8\",\ndata:        JSON.stringify(data)\n</code></pre>\n\n<hr>\n\n<p>Anyway, the following should do the trick:</p>\n\n<pre><code>use Data::Diver qw( DiveVal );\nuse List::Util  qw( pairs );  # 1.29+\nuse URI         qw( );\n\nmy $url = URI-&gt;new('?a[b][]=1&amp;a[b][]=2&amp;a[c]=3', 'http');\n\nmy %data;\nPAIR: for ( pairs( $url-&gt;query_form() ) ) {\n   my ($k, $v) = @$_;\n\n   my ( @k, $push );\n   for (my $k_ = $k) {  # Basically C&lt;&lt; my $_ = $k; &gt;&gt;\n      s/^(\\w+)//\n         or warn(\"Can't handle key $k\\n\"), next PAIR;\n\n      push @k, $1;\n      push @k, $1 while s/^\\[(\\w+)\\]//;\n      $push = s/^\\[\\]//;\n\n      $_ eq \"\"\n         or warn(\"Can't handle key $k\\n\"), next PAIR;\n   }\n\n   if ($push) {\n      push @{ DiveVal(\\%data, @k) }, $v;\n   } else {\n      DiveVal(\\%data, @k) = $v;\n   }\n}\n</code></pre>\n\n<p>Versions of Perl older than 5.16 need a workaround. Replace</p>\n\n<pre><code>use Data::Diver qw( DiveVal );\npush @{ DiveVal(\\%data, @k) }, $v;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>use Data::Diver qw( DiveRef DiveVal );\npush @{ ${ DiveRef(\\%data, @k) } }, $v;\n</code></pre>\n\n<p>Note that the format is ambiguous<sup>[1]</sup>. For example, the following two expressions produce the same result (<code>a[0][x]=3</code><sup>[2]</sup>):</p>\n\n<pre><code>jQuery.param( { a: [      { x: 3 } ] } )\n\njQuery.param( { a: { \"0\": { x: 3 } } } )\n</code></pre>\n\n<p>My code will reproduce the former. Numeric keys are always considered to be array indexes.</p>\n\n<hr>\n\n<ol>\n<li>Another reason to use JSON.</li>\n<li>Some escaping removed for readability.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1488392149, "creation_date": 1488392149, "answer_id": 42539067, "question_id": 42538579, "link": "https://stackoverflow.com/questions/42538579/how-can-i-parse-complex-query-strings-generated-by-jquery-ajax-in-perl/42539067#42539067", "title": "How can I parse complex query strings generated by jQuery.ajax() in Perl?", "body": "<p>PHP interprets a query string like <code>foo[]=123&amp;foo[]=234&amp;foo[]=345</code> differently than all of the Perl web frameworks. I once built a PHP plugin for Mojolicious and had to work out a lot of those differences. You can find a summary of those differences and some working code (working for up to 2-level hashes, anyway) to convert Perl params to PHP-style params <a href=\"https://metacpan.org/source/MOB/MojoX-Plugin-PHP-0.05/lib/MojoX/Template/PHP.pm#L349\" rel=\"nofollow noreferrer\">here</a>. Perhaps you could adapt it for your use case.</p>\n"}], "owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 42538939, "answer_count": 2, "score": 2, "last_activity_date": 1488562357, "creation_date": 1488390447, "last_edit_date": 1488392124, "question_id": 42538579, "link": "https://stackoverflow.com/questions/42538579/how-can-i-parse-complex-query-strings-generated-by-jquery-ajax-in-perl", "title": "How can I parse complex query strings generated by jQuery.ajax() in Perl?", "body": "<p><a href=\"http://api.jquery.com/jquery.ajax/\" rel=\"nofollow noreferrer\"><code>jQuery.ajax()</code></a> encodes complex JavaScript objects into a query string like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>?a[b][]=1&amp;a[b][]=2&amp;a[c]=3\n</code></pre>\n\n<p>I would like to decode this into a Perl data structure like this:</p>\n\n<pre><code>{ a=&gt;{ b=&gt;[1,2], c=&gt;3 } }\n</code></pre>\n\n<p>PHP does this by default. Is there a way to also do it in a Perl CGI script? Not necessarily using CGI.pm; I can install any library I want.</p>\n\n<p>So far I can only decode one-dimensional arrays because the CGI module's <code>param()</code> function can return an array.</p>\n"}, {"tags": ["bash", "perl", "awk"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1488384218, "post_id": 42536358, "comment_id": 72208614, "body": "Stating the obvious here, but the best option, if at all possible, is to fix the program that generates the bad data."}, {"owner": {"reputation": 752, "user_id": 5794310, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/DiqV9.jpg?s=128&g=1", "display_name": "Enrique", "link": "https://stackoverflow.com/users/5794310/enrique"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1488384427, "post_id": 42536358, "comment_id": 72208750, "body": "@ThisSuitIsBlackNot Yes, the bug was fixed but these files are from 2014.  The files from 2017 haven&#39;t got this problem."}, {"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 3, "creation_date": 1488384494, "post_id": 42536358, "comment_id": 72208798, "body": "@Enrique: Is this pattern fixed always, i,e. column 2 has those multiple <code>;</code> and column at 8 has a <code>;</code> or it can vary"}, {"owner": {"reputation": 752, "user_id": 5794310, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/DiqV9.jpg?s=128&g=1", "display_name": "Enrique", "link": "https://stackoverflow.com/users/5794310/enrique"}, "reply_to_user": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1488384609, "post_id": 42536358, "comment_id": 72208887, "body": "@Inian the main problem is with the last <code>;</code>, because it should not be there. I use the <code>,</code> of colum 2 to split the data with another application."}], "answers": [{"comments": [{"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 1, "creation_date": 1488384831, "post_id": 42536526, "comment_id": 72209038, "body": "Just in plain <i>awe</i>, how quickly you can pull things out of the air. Great stuff!"}], "tags": [], "owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "is_accepted": true, "score": 6, "last_activity_date": 1488463627, "last_edit_date": 1492086991, "creation_date": 1488384315, "answer_id": 42536526, "question_id": 42536358, "link": "https://stackoverflow.com/questions/42536358/how-can-i-remove-the-last-semicolon-in-a-string/42536526#42536526", "title": "How can I remove the last semicolon in a string?", "body": "<p>Using <a href=\"https://unix.stackexchange.com/a/187894/40596\">How do I replace the last occurrence of a character in a string using sed?</a> you can say:</p>\n\n<pre><code>sed -r 's/(.*);/\\1/' file\n</code></pre>\n\n<p>That is, match everything with <code>.*</code> until the last <code>;</code> is found. This works because sed is very greedy and will slurp everything until the last <code>;</code> is found.</p>\n\n<p>Together with your initial expression, you will have:</p>\n\n<pre><code>sed -re 's/;+/;/g' -e 's/(.*);/\\1/' file\n</code></pre>\n\n<hr>\n\n<p>Since your input file has so much data, it is hard to see the output. See it live with some dummy data:</p>\n\n<pre><code>$ cat file\nhello;;;;;how;are;you\ni;am;fine\n</code></pre>\n\n<p>Just remove the last semi colon:</p>\n\n<pre><code>$ sed -r 's/(.*);/\\1/' file\nhello;;;;;how;areyou\ni;amfine\n</code></pre>\n\n<p>Remove the last semi colon and squeeze multiple semi colons:</p>\n\n<pre><code>$ sed -re 's/;+/;/g' -e 's/(.*);/\\1/' file\nhello;how;areyou\ni;amfine\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12672, "user_id": 1200821, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Cm117.jpg?s=128&g=1", "display_name": "Juan Diego Godoy Robles", "link": "https://stackoverflow.com/users/1200821/juan-diego-godoy-robles"}, "edited": false, "score": 0, "creation_date": 1488386057, "post_id": 42536991, "comment_id": 72209937, "body": "Nice one, but I think he&#39;s lookin for <code>s&#47;.*\\K;&#47;&#47;;s&#47;;+&#47;;&#47;g</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 12672, "user_id": 1200821, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Cm117.jpg?s=128&g=1", "display_name": "Juan Diego Godoy Robles", "link": "https://stackoverflow.com/users/1200821/juan-diego-godoy-robles"}, "edited": false, "score": 2, "creation_date": 1488387265, "post_id": 42536991, "comment_id": 72210793, "body": "@klashxx: Sure. I was just answering the specific question <i>&quot;How could I remove the last semicolon?&quot;</i>. I think I&#39;d prefer <code>s&#47;;\\K;+&#47;&#47;g</code> to avoid replacing single semicolons, but it really doesn&#39;t matter."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1488392954, "post_id": 42536991, "comment_id": 72214304, "body": "@Borodin or y/;//s"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1488400596, "post_id": 42536991, "comment_id": 72218814, "body": "@ysth: Goodness. That&#39;s a corner of Perl that I had completely forgotten. Thank you."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1488385724, "creation_date": 1488385724, "answer_id": 42536991, "question_id": 42536358, "link": "https://stackoverflow.com/questions/42536358/how-can-i-remove-the-last-semicolon-in-a-string/42536991#42536991", "title": "How can I remove the last semicolon in a string?", "body": "<p>In Perl</p>\n\n<pre><code>perl -i -pe 's/.*\\K;//' myfile\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "is_accepted": false, "score": 1, "last_activity_date": 1488386642, "last_edit_date": 1488386642, "creation_date": 1488386019, "answer_id": 42537110, "question_id": 42536358, "link": "https://stackoverflow.com/questions/42536358/how-can-i-remove-the-last-semicolon-in-a-string/42537110#42537110", "title": "How can I remove the last semicolon in a string?", "body": "<p>Using <code>rev</code> and awk (and @fedorqui's example):</p>\n\n<pre><code>$ rev file | awk '{ sub(/;/, \"\") }1' | rev\nhello;;;;;how;areyou\ni;amfine\n</code></pre>\n\n<p>Use <code>rev</code> to reverse the records, delete the first <code>;</code> with <code>sub</code> instead and <code>rev</code> the records again. You can use <code>gsub</code> first to replace multiple <code>;</code>s with one:</p>\n\n<pre><code>$ rev file | awk '{ gsub(/\\;+/, \";\"); sub(/;/, \"\") }1' | rev\nhello;how;areyou\ni;amfine\n</code></pre>\n"}], "owner": {"reputation": 752, "user_id": 5794310, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/DiqV9.jpg?s=128&g=1", "display_name": "Enrique", "link": "https://stackoverflow.com/users/5794310/enrique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1575, "favorite_count": 0, "accepted_answer_id": 42536526, "answer_count": 3, "score": 2, "last_activity_date": 1488463627, "creation_date": 1488383875, "last_edit_date": 1488384419, "question_id": 42536358, "link": "https://stackoverflow.com/questions/42536358/how-can-i-remove-the-last-semicolon-in-a-string", "title": "How can I remove the last semicolon in a string?", "body": "<p>I'm working with many strings like with this structure:</p>\n\n<pre><code>=Cluster=\nSPEC    PRD000681;PRIDE_Exp_Complete_Ac_22493.xml;spectrum=4691 true    LHDEEIQELQAQIQEQHVQIDMDVSKPDLTAALR  3940.8833   1   9913        0.9988012901749596\nSPEC    PRD000681;PRIDE_Exp_Complete_Ac_22495.xml;spectrum=752  true    LHDEEIQELQAQIQEQHVQIDMDVSKPDLTAALR  3940.8833   1   9913        0.9988012901749596\n</code></pre>\n\n<p>Due to a bug in the program that generate the files, sometimes extra semicolons appear where should be just one, and appear where they should not appear. \nFor example: </p>\n\n<pre><code>=Cluster=\nSPEC    PRD000681;;;;;PRIDE_Exp_Complete_Ac_22493.xml;spectrum=4691 true    LHDEEIQELQAQIQEQHVQIDMDVSKPDLTAALR  3940.8833   1    9913   ;   0.9988012901749596\nSPEC    PRD000681;PRIDE_Exp_Complete_Ac_22495.xml;;;;spectrum=752   true    LHDEEIQELQAQIQEQHVQIDMDVSKPDLTAALR  3940.8833   1    9913   ;   0.9988012901749596\n</code></pre>\n\n<p>In order to fix this I am using regular expression <code>s/;+/;/g;</code> or <code>awk '{gsub(/[;]+/,\";\")}1'input &gt; output</code> but I have no idea how I remove remove the last semicolon without affecting the first ones.</p>\n\n<p>One good output would be something like this: </p>\n\n<pre><code>=Cluster=\nSPEC    PRD000681;PRIDE_Exp_Complete_Ac_22493.xml;spectrum=4691 true    LHDEEIQELQAQIQEQHVQIDMDVSKPDLTAALR  3940.8833   1   9913        0.9988012901749596\nSPEC    PRD000681;PRIDE_Exp_Complete_Ac_22495.xml;spectrum=752  true    LHDEEIQELQAQIQEQHVQIDMDVSKPDLTAALR  3940.8833   1   9913        0.9988012901749596\n</code></pre>\n\n<p>My question is: How could I remove the last semicolon without affecting the first semicolons?</p>\n"}, {"tags": ["perl", "autovivification"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1488372923, "post_id": 42532298, "comment_id": 72200302, "body": "What is your question?"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488373298, "post_id": 42532298, "comment_id": 72200586, "body": "@Borodin updated, my bad. Is this really Perl&#39;s behavior?"}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1488374109, "post_id": 42532298, "comment_id": 72201148, "body": "Yes, It creates the key with the autovivification feature."}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1488374235, "post_id": 42532298, "comment_id": 72201230, "body": "@AbhiNickz even on checking? E.g. <code>if ( defined $self-&gt;{&#39;unexisting_key&#39;})</code> .. &#39;cuz that would be sad.."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1488374355, "post_id": 42532298, "comment_id": 72201319, "body": "No, You can check this <a href=\"http://stackoverflow.com/questions/42376841/perl-math-with-duplicate-entries-in-array/42377203#42377203\">answer</a> to get the idea about autovivification."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1488383327, "post_id": 42532298, "comment_id": 72207942, "body": "@AbhiNickz, Huh, no autovivification happens in the code in that <a href=\"http://stackoverflow.com/questions/42376841/perl-math-with-duplicate-entries-in-array/42377203#42377203\">answer</a>. Did you link to the wrong answer?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1488383404, "post_id": 42532298, "comment_id": 72207998, "body": "@John Doe, Re &quot;<i>even on checking</i>&quot;, Only on deferencing. That snippet dereferences <code>$self</code>, so <code>$self</code> we be autovivified."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 10, "last_activity_date": 1488376175, "creation_date": 1488376175, "answer_id": 42533507, "question_id": 42532298, "link": "https://stackoverflow.com/questions/42532298/perl-auto-vivification-on-assignment/42533507#42533507", "title": "Perl auto-vivification on assignment", "body": "<blockquote>\n  <p>But never expected to work the other way arround, where :  <code>my\n  $weird_autovivification = $array-&gt;[3];</code> will also vivificate <code>$array[3]</code>.</p>\n</blockquote>\n\n<p>That's not how it works.</p>\n\n<pre><code>$ perl -MData::Dumper -E'$foo=$array-&gt;[3]; say Dumper $array'\n$VAR1 = [];\n</code></pre>\n\n<p>Executing that code has turned <code>$array</code> into an array reference (where, previously, it would have been undefined), but it hasn't set <code>$array-&gt;[3]</code> to anything.</p>\n\n<p>If we add another level of look-up, we get slightly different behaviour:</p>\n\n<pre><code>$ perl -MData::Dumper -E'$foo=$array-&gt;[0][3]; say Dumper $array'\n$VAR1 = [\n          []\n        ];\n</code></pre>\n\n<p>Here, Perl has created <code>$array-&gt;[0]</code> and set it to a reference to an empty array, but it hasn't affected <code>$array-&gt;[0][3]</code>.</p>\n\n<p>In general, as you're going through a chain of look-ups in a complex data structure, Perl will autovivify all but the last link in the chain. When you think about it, that makes a lot of sense. Perl needs to autovivify one link in the chain so that it can check the existence of the next one.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1488383562, "last_edit_date": 1488383562, "creation_date": 1488379109, "answer_id": 42534545, "question_id": 42532298, "link": "https://stackoverflow.com/questions/42532298/perl-auto-vivification-on-assignment/42534545#42534545", "title": "Perl auto-vivification on assignment", "body": "<blockquote>\n  <p><em>Does Perl real auto-vivifies key when the unexisting key is assigned to a variable?</em></p>\n</blockquote>\n\n<p>Perl autovivifies <em>variables</em> (including array elements and hash values) when they are <em>dereferenced</em>.</p>\n\n<pre><code>$foo-&gt;{bar}   [ $foo dereferenced as a hash   ]    \u2261    ( $foo //= {} )-&gt;{bar}\n$foo-&gt;[3]     [ $foo dereferenced as an array ]    \u2261    ( $foo //= [] )-&gt;[3]\n$$foo         [ $foo dereferenced as a scalar ]    \u2261    ${ $foo //= do { my \\$anon } }\netc\n</code></pre>\n\n<p>This means that</p>\n\n<pre><code>$self-&gt;{database}-&gt;{'my_key'}[0]\n</code></pre>\n\n<p>autovivifies</p>\n\n<ul>\n<li><code>$self</code> (to a hash ref if undefined)</li>\n<li><code>$self-&gt;{database}</code> (to a hash ref if undefined)</li>\n<li><code>$self-&gt;{database}-&gt;{'my_key'}</code> (to an array ref if undefined)</li>\n</ul>\n\n<p>but not</p>\n\n<ul>\n<li><code>$self-&gt;{database}-&gt;{'my_key'}[0]</code> (since it wasn't dereferenced)</li>\n</ul>\n\n<hr>\n\n<blockquote>\n  <p><em>But never expected to work the other way arround, where : <code>my $weird_autovivification = $array-&gt;[3];</code> will also vivify <code>$array-&gt;[3]</code>.</em></p>\n</blockquote>\n\n<p>Not quite. It autovivifies <code>$array</code>, the variable being dereferenced. Nothing was assigned to <code>$array-&gt;[3]</code> since it wasn't dereferenced.</p>\n\n<hr>\n\n<p>Tip: The <a href=\"http://search.cpan.org/perldoc?autovivification\" rel=\"noreferrer\">autovivification</a> pragma can be used to control when autovivification occurs.</p>\n"}], "owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 42534545, "answer_count": 2, "score": 0, "last_activity_date": 1488383562, "creation_date": 1488372802, "last_edit_date": 1488379573, "question_id": 42532298, "link": "https://stackoverflow.com/questions/42532298/perl-auto-vivification-on-assignment", "title": "Perl auto-vivification on assignment", "body": "<p>Does Perl real auto-vivifies key when the unexisting key is assigned to a variable?</p>\n\n<p>I have this code : </p>\n\n<p><code>my $variable = $self-&gt;{database}-&gt;{'my_key'}[0];</code></p>\n\n<p>The variable <code>$self-&gt;{database}-&gt;{'my_key'}[0]</code> is undefined in my hash, but if I print a Dumper after the assignment, I'm surprised that the <code>my_key</code> is created.</p>\n\n<p>I know the functionality for this case : </p>\n\n<pre><code>use Data::Dumper;\n\nmy $array;\n\n$array-&gt;[3] = 'Buster';  # autovivification\nprint Dumper( $array );\n</code></pre>\n\n<p>This will give me the results : </p>\n\n<p><code>$VAR1 = [\n          undef,\n          undef,\n          undef,\n          'Buster'\n        ];</code></p>\n\n<p>But never expected to work the other way arround, where : \n<code>my $weird_autovivification = $array-&gt;[3];</code> \nwill also vivify <code>$array-&gt;[3]</code>.</p>\n"}, {"tags": ["perl", "perlapi"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 2, "creation_date": 1488374393, "post_id": 42531519, "comment_id": 72201348, "body": "The struct <code>context</code> is defined in <a href=\"https://github.com/Perl/perl5/blob/a5c7cb08f7954af4accf63bfffaab1bd61f1dd68/cop.h#L831\" rel=\"nofollow noreferrer\"><code>cop.h</code></a>. And <code>caller_cx</code> is a macro that calls <a href=\"https://github.com/Perl/perl5/blob/9de2a80ffc0eefb4d60e13766baf4bad129e0a92/pp_ctl.c#L1810\" rel=\"nofollow noreferrer\"><code>Perl_caller_cx</code></a> (defined in <code>pp_ctl.c</code>). (not really an answer, just some help)"}], "answers": [{"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1488378935, "post_id": 42534348, "comment_id": 72204515, "body": "By inspecting that I see that there <code>HvNAME_HEK</code> is used. What is the difference in compare to <code>HvNAME</code>?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1488379318, "post_id": 42534348, "comment_id": 72204791, "body": "I am not sure. <code>HvNAME_HEK()</code> is defined at line 298 in <code>hv.h</code>. The comment on the line above says <i>&quot;This macro may go away without notice.&quot;</i>. <code>HvNAME()</code> is defined on line 280, and it just calls <code>HvNAME_get()</code> on line 300."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1488380503, "post_id": 42534348, "comment_id": 72205714, "body": "Also <code>HvNAME_HEK()</code> returns a <code>HEK *</code>, whereas <code>HvNAME()</code> returns a <code>char *</code>, see also <a href=\"http://perldoc.perl.org/perlapi.html#Hash-Manipulation-Functions\" rel=\"nofollow noreferrer\"><code>perlapi</code></a>"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1488408150, "post_id": 42534348, "comment_id": 72222847, "body": "Strange, but this code always print: <code>(nil)&lt;&lt;&lt;</code>. CODE: <code>const PERL_CONTEXT *cx =  caller_cx(0, NULL); printf( &quot;%p&lt;&lt;&lt;\\n&quot;, cx );</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1488409024, "post_id": 42534348, "comment_id": 72223219, "body": "I did a quick test of the method <a href=\"https://github.com/hakonhagland/caller_cx\" rel=\"nofollow noreferrer\">here</a>. It seems works as expected (it prints the caller&#39;s package name). You can try clone the repository and run the test script <code>p.pl</code> yourself if you like. I am using Ubuntu 16.10 and Perl v.5.24."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1488410781, "post_id": 42534348, "comment_id": 72223879, "body": "Yeah, your example works fine. But I call <code>caller_cx</code> from XS module. And it does not work. <a href=\"https://github.com/KES777/MyTest/blob/example/MyTest.xs\" rel=\"nofollow noreferrer\">REPO</a>. You also may clone it and <code>perl Makefile.PL &amp;&amp; make &amp;&amp; cd bin &amp;&amp; .&#47;xs.pl</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1488467576, "post_id": 42534348, "comment_id": 72252434, "body": "Yes your example gives me also a null pointer for <code>cx</code>. It is very strange, I have looked at the <code>.c</code> file produced by <code>Inline::C</code> and the one obtained by <code>make</code> from <code>perl Makefile.PL</code> and they look the same as far as I can see. However, I was not able to figure out how <code>Inline::C</code> loads the extension module <code>MyTest.so</code>, and what it puts instead of <code>lib&#47;MyTest.pm</code>.. Maybe there are some clues hidden there?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1488481870, "post_id": 42534348, "comment_id": 72261767, "body": "I think I found something. The xsub <code>MyTest::get_package()</code> is called from the top level <code>main::</code> namespace. When calling <code>caller()</code> or <code>caller_cx()</code> from the top level <code>main</code> package they will return undefined ( or NULL). <a href=\"https://github.com/hakonhagland/caller_cx_xs\" rel=\"nofollow noreferrer\">Here</a> is a new test that actually works. To run it: <code>cd lib&#47;My; perl Makefile.PL; make; cd ..&#47;..; p.pl</code>"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1488486730, "post_id": 42534348, "comment_id": 72264700, "body": "Maybe that because of <a href=\"http://perldoc.perl.org/functions/caller.html\" rel=\"nofollow noreferrer\"><code>caller</code></a>: <code>In scalar context, returns the caller&#39;s package name if there is a caller (that is, if we&#39;re in a subroutine or eval or require) and the undefined value otherwise. caller never returns XS subs and they are skipped</code>. Compare: <code>perl -e &#39;print +(caller)[0]&#39;</code> (like <code>test</code>. XS has no frames) and <code>perl -e &#39;sub{ print +(caller)[0] }-&gt;()&#39;</code> (like <code>test2</code>. sub call has frames)."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1488486768, "post_id": 42534348, "comment_id": 72264720, "body": "But anyway: <code>if we&#39;re in a subroutine or eval or require</code> the main script is eval&#39;ed, is not? so we should <b>always</b> be in eval and <code>print +(caller)[0]</code> should print &#39;main&#39;"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1488803574, "post_id": 42534348, "comment_id": 72379253, "body": "@EugenKonkov Hi Eugen. See update to ticket by Dave Mitchell <a href=\"https://rt.perl.org/Public/Bug/Display.html?id=130903\" rel=\"nofollow noreferrer\">rt.perl.org/Public/Bug/Display.html?id=130903</a>. Does that work for you?"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 1, "creation_date": 1488814116, "post_id": 42534348, "comment_id": 72386711, "body": "Thank you for tracking. That is same suggestion as mine: <code>perl -e &#39;print sub{ +(caller)[0] }-&gt;()&#39;</code>"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 6, "last_activity_date": 1488378584, "creation_date": 1488378584, "answer_id": 42534348, "question_id": 42531519, "link": "https://stackoverflow.com/questions/42531519/how-to-find-current-package-name-from-perl-xs/42534348#42534348", "title": "How to find current package name from perl XS?", "body": "<p>The <code>context</code> struct is defined <code>cop.h</code> as mentioned by @Dada in the comments:</p>\n\n<pre><code>struct context {\n    union {\n    struct block    cx_blk;\n    struct subst    cx_subst;\n    } cx_u;\n};\n</code></pre>\n\n<p>also the <code>block</code> structures are defined in <code>cop.h</code>.</p>\n\n<p>By inspecting the C implementation of the Perl <a href=\"http://perldoc.perl.org/functions/caller.html\" rel=\"noreferrer\"><code>caller</code></a> function in <code>pp_ctl.c</code> (line 1850), I think you can get the package name using the following code: </p>\n\n<pre><code>const PERL_CONTEXT *cx = caller_cx(0, NULL);\nchar *pack_name = HvNAME((HV*)CopSTASH(cx-&gt;blk_oldcop));\n</code></pre>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 1, "accepted_answer_id": 42534348, "answer_count": 1, "score": 9, "last_activity_date": 1488378584, "creation_date": 1488370701, "question_id": 42531519, "link": "https://stackoverflow.com/questions/42531519/how-to-find-current-package-name-from-perl-xs", "title": "How to find current package name from perl XS?", "body": "<p>To get current context I find <a href=\"http://perldoc.perl.org/perlapi.html#caller_cx\" rel=\"noreferrer\"><code>caller_cx</code></a> function in <code>perlapi</code>. But there is no description for structure. In perl source code <code>perl.h</code> I can find only this <code>typedef</code>:</p>\n\n<pre><code>typedef struct context PERL_CONTEXT;\n</code></pre>\n\n<p>Is there examples how to use this struct returned by <code>caller_cx</code> to find current package from XS?</p>\n"}, {"tags": ["perl", "function", "hash"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1488370291, "post_id": 42531304, "comment_id": 72198425, "body": "Try to <code>print Dumper($SVs);</code> see If that resolves your error or It will give you the idea about the returning data from sub."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1488370451, "post_id": 42531304, "comment_id": 72198533, "body": "Try adding reference dereference operator <code>-&gt;</code>: <code>my @vals = @{$SVs-&gt;{$_}}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1488374264, "post_id": 42531471, "comment_id": 72201244, "body": "OK great - why is it necessary to use <code>-&gt;</code>?"}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "reply_to_user": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1488374599, "post_id": 42531471, "comment_id": 72201507, "body": "Have a look at <a href=\"http://perldoc.perl.org/perlref.html#Using-References\" rel=\"nofollow noreferrer\">man perlref - Using references</a> point 3"}], "tags": [], "owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "is_accepted": true, "score": 3, "last_activity_date": 1488370554, "creation_date": 1488370554, "answer_id": 42531471, "question_id": 42531304, "link": "https://stackoverflow.com/questions/42531304/iterate-over-hash-of-arrays-from-function/42531471#42531471", "title": "Iterate over hash of arrays from function", "body": "<p>Your library function returns two hashrefs. If you now want to access the values you'll have to dereference the hashref:</p>\n\n<pre><code>my ($SVs, $info) = Library_SO::tum_norm_gt($file);\n\n#print Dumper \\%$SVs;\n# Easier and better readable:\nprint Dumper $SVs ;\n\n#print Dumper \\%$info;\n# Easier and better readable:\nprint Dumper $info ;\n\n\nfor (keys %{ $SVs } ){ # Better visual derefencing\n   say;\n   my @vals = @{$SVs-&gt;{$_}}; # it is not $SVs{..} but $SVs-&gt;{...}\n}\n</code></pre>\n"}], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 1, "accepted_answer_id": 42531471, "answer_count": 1, "score": 0, "last_activity_date": 1488370554, "creation_date": 1488370038, "question_id": 42531304, "link": "https://stackoverflow.com/questions/42531304/iterate-over-hash-of-arrays-from-function", "title": "Iterate over hash of arrays from function", "body": "<p>I have an input file: </p>\n\n<pre><code>id_1    10  15  20:a:4:c\nid_2    1   5   2:2:5:c\nid_3    0.4 3   12:1:4:1\nid_4    18  2   9:1:0/0:1\nid_5    a   b   c:a:foo:2\n</code></pre>\n\n<p>I have many files of this type that I want to parse in different programs, so I want to make a function that returns a hash with easily accessible. </p>\n\n<p>I've not written a function like this before, and I'm not sure how to properly access the returned hashes. Here's what I've got so far: </p>\n\n<p><strong>Library_SO.pm</strong></p>\n\n<pre><code>#!/urs/bin/perl\n\npackage Library_SO;\nuse strict;\nuse warnings;\n\nsub tum_norm_gt {\n\n    my $file = shift;\n    open my $in, '&lt;', $file or die $!;\n\n    my %SVs;\n    my %info;\n\n    while(&lt;$in&gt;){\n        chomp;\n\n        my ($id, $start, $stop, $score) = split;\n        my @vals = (split)[1..2];\n\n        my @score_fields = split(/:/, $score);\n\n        $SVs{$id} = [ $start, $stop, $score ];\n\n        push @{$info{$id}}, @score_fields ;\n    }\n    return (\\%SVs, \\%info);\n}\n\n1;\n</code></pre>\n\n<p>And my main script: \n<strong>get_vals.pl</strong></p>\n\n<pre><code>#!/urs/bin/perl\n\nuse Library_SO;\nuse strict;\nuse warnings;\n\nuse feature qw/ say /;\nuse Data::Dumper;\n\nmy $file = shift or die $!;\n\nmy ($SVs, $info) = Library_SO::tum_norm_gt($file);\n\nprint Dumper \\%$SVs;\nprint Dumper \\%$info;\n\n# for (keys %$SVs){\n#   say;\n#   my @vals = @{$SVs{$_}}; &lt;- line 20\n# }\n</code></pre>\n\n<p>I call this with:\n<code>perl get_vals.pl test_in.txt</code></p>\n\n<p>The <code>Dumper</code> output is what I was hoping for, but when I try to iterate over the returned hash(?) and access the values (e.g. as in the commented out section) I get: </p>\n\n<pre><code>Global symbol \"%SVs\" requires explicit package name at get_vals.pl line 20.\nExecution of get_vals.pl aborted due to compilation errors. \n</code></pre>\n\n<p>Have I got this totally upside down? </p>\n"}, {"tags": ["perl", "gunzip"], "answers": [{"comments": [{"owner": {"reputation": 1880, "user_id": 4281182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/teZv4.png?s=128&g=1", "display_name": "Sel&#231;uk Cihan", "link": "https://stackoverflow.com/users/4281182/sel%c3%a7uk-cihan"}, "reply_to_user": {"reputation": 3, "user_id": 2950672, "user_type": "registered", "profile_image": "https://graph.facebook.com/1279501941/picture?type=large", "display_name": "Matthias Diebels", "link": "https://stackoverflow.com/users/2950672/matthias-diebels"}, "edited": false, "score": 0, "creation_date": 1488372727, "post_id": 42531352, "comment_id": 72200183, "body": "Yeah my bad, edited. Single quotes will not interpolate the variable, it will take the string as it is literally."}], "tags": [], "owner": {"reputation": 1880, "user_id": 4281182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/teZv4.png?s=128&g=1", "display_name": "Sel&#231;uk Cihan", "link": "https://stackoverflow.com/users/4281182/sel%c3%a7uk-cihan"}, "is_accepted": true, "score": -1, "last_activity_date": 1488372595, "last_edit_date": 1488372595, "creation_date": 1488370176, "answer_id": 42531352, "question_id": 42530451, "link": "https://stackoverflow.com/questions/42530451/uncompress-log-gz-files/42531352#42531352", "title": "Uncompress log.gz files", "body": "<p><strong>You need to expand the scalar <code>$path</code>.</strong> In your case, you are telling gunzip to unzip a file named <code>path</code> into wild carded output. The error tells you that the <strong>string \"path\" does not contain any wild cards</strong>, yet you are referring to the matching wild card (which does not exist since there were no wild cards in \"path\" string).</p>\n\n<p>Try this:</p>\n\n<pre><code>gunzip \"&lt;$path&gt;\" =&gt; '&lt;#1.log&gt;' #unzip all .log.gz files\n        or die \"gunzip failed: $GunzipError\\n\";\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 2950672, "user_type": "registered", "profile_image": "https://graph.facebook.com/1279501941/picture?type=large", "display_name": "Matthias Diebels", "link": "https://stackoverflow.com/users/2950672/matthias-diebels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 42531352, "answer_count": 1, "score": 0, "last_activity_date": 1488372595, "creation_date": 1488367529, "last_edit_date": 1488372433, "question_id": 42530451, "link": "https://stackoverflow.com/questions/42530451/uncompress-log-gz-files", "title": "Uncompress log.gz files", "body": "<p>I wanted to uncompress multiple log.gz - files from yesterday.</p>\n\n<p>The Code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\nuse IO::Uncompress::Gunzip qw(gunzip $GunzipError) ;\nuse Time::Local;\n\n#yesterday\nmy ($sec, $min, $hour, $mday, $mon, $year) = (gmtime())[0..5];\n\nmy $yesterday_midday=timelocal($sec,$min,$hour,$mday,$mon,$year) - 24*60*60;\n\n($sec, $min, $hour, $mday, $mon, $year) = localtime($yesterday_midday);\n\n\nmy $path = sprintf \"..\\\\..\\\\history\\\\%d\\\\%02d\\\\%02d\\\\*.log.gz\",$year+1900, $mon+1, $mday;\nprint(\"PATH: $path\\n\");\n\ngunzip '&lt;path&gt;' =&gt; '&lt;#1.log&gt;' #unzip all .log.gz files\n        or die \"gunzip failed: $GunzipError\\n\";\n</code></pre>\n\n<p>The Error:</p>\n\n<pre><code>Max wild is #0, you tried #1 at D:/Perl64/lib/IO/Uncompress/Base.pm line 545\n</code></pre>\n"}, {"tags": ["perl", "sorting"], "answers": [{"comments": [{"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 1, "creation_date": 1488363233, "post_id": 42528758, "comment_id": 72193538, "body": "More precisely, the sort lambda should return &lt; 0, 0,or &gt; 0. Another approach would therefore be to replace <code>&lt;</code> with <code>-</code>."}, {"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "edited": false, "score": 1, "creation_date": 1488397183, "post_id": 42528758, "comment_id": 72216862, "body": "D&#39;oh! Working with different languages all day makes me forget the syntactic differences between data types in different languages. Also +1 for the Schwartzian Transform, very interesting!"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 11, "last_activity_date": 1488382415, "last_edit_date": 1488382415, "creation_date": 1488362854, "answer_id": 42528758, "question_id": 42528538, "link": "https://stackoverflow.com/questions/42528538/sorting-array-by-size-of-split/42528758#42528758", "title": "Sorting array by size of split", "body": "<p>You are mixing up a few things.</p>\n\n<p>You put an array reference into your <code>@dummy_arr</code>.</p>\n\n<blockquote>\n<pre><code>my @dummy_arr = [ '12345/3/365/45/12', '1/2', '3/2', '1/2/3', '2/3/4' ];\n</code></pre>\n</blockquote>\n\n<p>This is equal to:</p>\n\n<pre><code>my @dummy_arr =  ( [ '12345/3/365/45/12', '1/2', '3/2', '1/2/3', '2/3/4' ] );\n</code></pre>\n\n<p>In your <code>Dumper</code> output that's also visible.</p>\n\n<pre><code>$VAR1 = [                   # &lt;-- because of the ref \\@dummy_arr you pass to Dumper\n          [                 # &lt;-- first elem is already an array ref\n            '12345/3/365/45/12',\n            '1/2',\n            '3/2',\n            '1/2/3',\n            '2/3/4'\n          ]\n        ];\n</code></pre>\n\n<p>So when you did <code>sort { ... } @dummy_arr</code>, there was only one value passed to <code>sort</code>. Because <code>sort</code> is smart, it skips, as there is nothing to sort if there is only <code>$a</code>, but no <code>$b</code>. This becomes obvious when you put a <code>{ warn $a; scalar ... }</code> into the <code>sort</code> lambda. There is no warning, so it never gets called.</p>\n\n<p>But you're not sorting anyway. The <a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\"><code>sort</code> lambda</a> needs to return something similar to  <code>-1</code>, <code>0</code> or <code>1</code>.</p>\n\n<blockquote>\n  <p>If SUBNAME is specified, it gives the name of a subroutine that\n  returns an integer less than, equal to, or greater than 0 , depending\n  on how the elements of the list are to be ordered.</p>\n</blockquote>\n\n<p>But you're using <code>&lt;</code>, which only returns <code>1</code> or <code>0</code>. You need to use <a href=\"http://perldoc.perl.org/perlop.html#Equality-Operators\" rel=\"nofollow noreferrer\"><code>&lt;=&gt;</code> for numerical comparison</a>.</p>\n\n<pre><code>my @dummy_arr = ( '12345/3/365/45/12', '1/2', '3/2', '1/2/3', '2/3/4' );\n@dummy_arr = sort { scalar( split /\\//, $a ) &lt;=&gt; scalar( split /\\//, $b ) } \n   @dummy_arr;\n\nprint Dumper( \\@dummy_arr );\n\n__END__\n$VAR1 = [\n          '1/2',\n          '3/2',\n          '1/2/3',\n          '2/3/4',\n          '12345/3/365/45/12'\n        ];\n</code></pre>\n\n<hr>\n\n<p>Finally, because splitting is an expensive operation that needs to be repeated <em>a lot</em> if there are a lot of elements in the array, you might want to use <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"nofollow noreferrer\">a <em>Schwartzian Transform</em></a> for this.</p>\n\n<pre><code>my @dummy_arr = ( '12345/3/365/45/12', '1/2', '3/2', '1/2/3', '2/3/4' );\n@dummy_arr =\n    map  { $_-&gt;[0] }\n    sort { $a-&gt;[1] &lt;=&gt; $b-&gt;[1] }\n    map  { [ $_, scalar split( qr{/}, $_ ) ] } @dummy_arr;\n</code></pre>\n\n<p>This produces the same output, but trades memory for CPU, so it is way faster.</p>\n"}], "owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 2, "accepted_answer_id": 42528758, "answer_count": 1, "score": 3, "last_activity_date": 1488382415, "creation_date": 1488362144, "last_edit_date": 1488363731, "question_id": 42528538, "link": "https://stackoverflow.com/questions/42528538/sorting-array-by-size-of-split", "title": "Sorting array by size of split", "body": "<p>I am trying to sort an array by the size of the parts of its elements. The items follow a pattern <code>x/y[.../z]</code> and I want them sorted on the amount of items there are. E.g. <code>1/2</code> has two items after splitting on <code>/</code>, <code>12/365/85</code> has three. I can't seem to figure out what I am doing wrong in such a seemingly simple snippet.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy @dummy_arr = ['12345/3/365/45/12', '1/2', '3/2', '1/2/3', '2/3/4'];\n@dummy_arr = sort { scalar ( split /\\//, $a ) &lt; scalar ( split /\\//, $b ) } @dummy_arr;\n\nprint Dumper(\\@dummy_arr);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = [\n          [\n            '12345/3/365/45/12',\n            '1/2',\n            '3/2',\n            '1/2/3',\n            '2/3/4'\n          ]\n\n        ];\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>$VAR1 = [\n            '1/2',\n            '3/2',\n            '1/2/3',\n            '2/3/4',\n            '12345/3/365/45/12'\n        ];\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 688, "user_id": 2141046, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5147f276e7c11f3a1c7b99f0323d7ce1?s=128&d=identicon&r=PG", "display_name": "user2141046", "link": "https://stackoverflow.com/users/2141046/user2141046"}, "edited": false, "score": 0, "creation_date": 1488362557, "post_id": 42527874, "comment_id": 72193064, "body": "unix user, right? if so, you can find all directories using <code>find -type d</code> and <code>rename</code> them, if the dir name is at your list"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1488364040, "post_id": 42527874, "comment_id": 72194161, "body": "See also <a href=\"http://stackoverflow.com/q/39015527/2173773\">Is it safe to rename files while using readdir?</a>"}, {"owner": {"reputation": 688, "user_id": 2141046, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5147f276e7c11f3a1c7b99f0323d7ce1?s=128&d=identicon&r=PG", "display_name": "user2141046", "link": "https://stackoverflow.com/users/2141046/user2141046"}, "edited": false, "score": 0, "creation_date": 1488365350, "post_id": 42527874, "comment_id": 72195089, "body": "Sorry, but i don&#39;t have the time to put in it, but in general: <code>@dirs = `find . -type d`</code>, open your file and take the from, to you need <code>if (&#47;.*\\:(.*):(.*)&#47;) {...</code>, replace the first occurance of $2 to $1 and <code>map</code> the rest of the @dirs from $2 to $1"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1488368151, "post_id": 42527874, "comment_id": 72197005, "body": "Your code doesn&#39;t compile. Please don&#39;t post code that we can&#39;t run. Did you just add <code>use strict</code> to avoid being told off when you posted your code here? Even with out <code>use strict</code> you get two <code>Useless use of a variable in void context</code> warnings."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488368364, "post_id": 42527874, "comment_id": 72197155, "body": "Where is <code>prj1</code>? Is it a root directory?"}, {"owner": {"reputation": 47, "user_id": 6946809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de2dc545256dc36ecc3c9c003050cf69?s=128&d=identicon&r=PG&f=1", "display_name": "shuttle folks", "link": "https://stackoverflow.com/users/6946809/shuttle-folks"}, "edited": false, "score": 0, "creation_date": 1488378656, "post_id": 42527874, "comment_id": 72204328, "body": "prj1 is not root directory(the actual directory path will be /home/data/DEMO/PROJECT_SPACE/prj1/blk1/checklist1/rev/rev.c&zwnj;&#8203;onfig @ Borodin"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1488394699, "post_id": 42527874, "comment_id": 72215308, "body": "I&#39;m curious... what does the decision tree look like for creating a new account vs. using one of your many <a href=\"http://stackoverflow.com/users/7608729/find-data\">existing</a> <a href=\"http://stackoverflow.com/users/7341243/example-file\">accounts</a>? Is there a rhyme and reason to it, or is it completely random?"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 2, "last_activity_date": 1488366677, "last_edit_date": 1488366677, "creation_date": 1488366286, "answer_id": 42530031, "question_id": 42527874, "link": "https://stackoverflow.com/questions/42527874/how-to-rename-the-directory-structure-by-matching-the-text-file-using-perl/42530031#42530031", "title": "How to rename the directory structure by matching the text file using perl?", "body": "<p>You can try something like this, but be careful and take a backup before you experiment with this code:</p>\n\n<pre><code>#! /usr/bin/env perl\nuse feature qw(say);\nuse strict;\nuse warnings;\n\nuse Cwd qw(getcwd);\nuse File::Copy ();\n\nmy $dir_map = read_map( 'sample.txt' );\nmy $top_dir = '.';\n\nrename_dirs( $top_dir, $dir_map );\n\n sub rename_dirs {\n    my ( $top_dir, $dir_map ) = @_;\n\n    opendir (my $dh, $top_dir) or die \"Can't open $top_dir: $!\";\n    my $save_dir = getcwd();\n    chdir $top_dir;\n    while (my $dir = readdir $dh) {\n        next if ($dir eq '.') or ($dir eq '..'); \n        if ( exists $dir_map-&gt;{$dir} ) {\n            my $new_name = $dir_map-&gt;{$dir};\n            #say \"$save_dir: rename $dir $new_name\";\n            File::Copy::move( $dir, $new_name )\n                or die \"Could not rename '$dir' as '$new_name': $!\";\n            $dir = $new_name;\n        }\n        rename_dirs( $dir, $dir_map ) if -d $dir;\n    }\n    chdir $save_dir;\n}\n\nsub read_map {\n    my ( $fn ) = @_;\n\n    my %dir_map;\n\n    open( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\n    while( my $line = &lt;$fh&gt; ) {\n        chomp $line;\n        my @fields = split /:/, $line;\n        if ( @fields == 3 ) {\n            $dir_map{$fields[2]} = $fields[1];\n        }\n    }\n    close $fh;\n    return \\%dir_map;\n}\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 6946809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de2dc545256dc36ecc3c9c003050cf69?s=128&d=identicon&r=PG&f=1", "display_name": "shuttle folks", "link": "https://stackoverflow.com/users/6946809/shuttle-folks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1488366677, "creation_date": 1488360284, "question_id": 42527874, "link": "https://stackoverflow.com/questions/42527874/how-to-rename-the-directory-structure-by-matching-the-text-file-using-perl", "title": "How to rename the directory structure by matching the text file using perl?", "body": "<hr>\n\n<p>I have the following text file in which it has directory names .Now i should rename the directory names by matching the directory names with the text file using perl.</p>\n\n<p>sample.txt:</p>\n\n<pre><code>PROJ:DEMO\nPROJ:PROJECT_SPACE\nPROJ:project:prj1\nBLOCK:block:blk1\nCHECKLIST:design_check:checklist1\n</code></pre>\n\n<p>original directory structure</p>\n\n<pre><code>\u251c\u2500\u2500 prj1\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 blk1\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 checklist1\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 rev\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 rev.config\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 temp_rest\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2514\u2500\u2500 rev.config\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 block_status.config\n</code></pre>\n\n<p>Expected output directory structure:</p>\n\n<pre><code>\u251c\u2500\u2500 project\n\u2502   \u251c\u2500\u2500 block\n\u2502   \u2502   \u2514\u2500\u2500 design_check\n\u2502   \u2502       \u251c\u2500\u2500 rev\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 rev.config\n\u2502   \u2502       \u2514\u2500\u2500 temp_rest\n\u2502   \u2502           \u2514\u2500\u2500 rev.config\n\u2502   \u2514\u2500\u2500 block_status.config\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>#!/usr/local/bin/perl\nuse strict;\n@filename;\n$i = 0;\n$total;\nopen(INFILE,\"sample.txt\");\nwhile($filename[$i] = &lt;INFILE&gt;){\n  chop($filename[$i]);\n  $filename[$i] =~ s/\\*//g;\n  $i++;\n  $total++;\n}\n</code></pre>\n\n<p>Code Explanation:</p>\n\n<p>I tried to read the text file and used substitution and used increment operator to include the files.</p>\n\n<p>I had struck with further things to add to make the expected directory structure.</p>\n"}, {"tags": ["perl", "unix", "datastage"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1488358848, "post_id": 42525727, "comment_id": 72190415, "body": "See <a href=\"http://perldoc.perl.org/perlrecharclass.html\" rel=\"nofollow noreferrer\"><code>perlrecharclass</code></a>. The POSIX character classes have the form <code>[:class:]</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1488363068, "post_id": 42525727, "comment_id": 72193427, "body": "I&#39;m unclear what you mean. You ask how to <i>print</i> extended ASCII, but your code tries to <i>remove</i> non-ASCII (and non-printable) characters from a file."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1488383028, "last_edit_date": 1488383028, "creation_date": 1488382025, "answer_id": 42535690, "question_id": 42525727, "link": "https://stackoverflow.com/questions/42525727/how-to-print-extended-ascii-character-in-perl-command/42535690#42535690", "title": "How to print Extended ascii character in perl command", "body": "<p>Assuming a UTF-8 terminal,</p>\n\n<pre><code>perl -e'use open qw(:std :encoding(UTF-8)); CORE::say \"\\xE9\\x{2661}\";'\n\nperl -CSDA -e'CORE::say \"\\xE9\\x{2661}\";'\n\nperl -CSDA -Mutf8 -e'CORE::say \"\u00e9\u2661\";'\n</code></pre>\n\n<hr>\n\n<p>Tip: \"Extended ascii character\" is a poor way of saying \"non-ASCII character\".</p>\n\n<hr>\n\n<p>Your code uses <code>[:*ascii*:]</code> in a regex character class, but that makes no sense (\"<code>POSIX class [:*ascii*:] unknown in regex</code>\"). If you want to negate the <code>[:ascii:]</code> POSIX class, you can use <code>[^:ascii]</code>, so</p>\n\n<pre><code> s/[^[^:ascii:]]//g   # Strips everything except non-ASCII characters.\n s/[[:ascii:]]//g     # Same thing.\n</code></pre>\n\n<p>Is that what you are asking? If not, I don't see what the code you have posted has to do with the question you asked.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7309888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 696, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488383028, "creation_date": 1488353535, "last_edit_date": 1488358444, "question_id": 42525727, "link": "https://stackoverflow.com/questions/42525727/how-to-print-extended-ascii-character-in-perl-command", "title": "How to print Extended ascii character in perl command", "body": "<p>How can I print an extended ascii character in a perl command?</p>\n\n<p>I tried with below:</p>\n\n<p>1.</p>\n\n<pre><code>-i.bak -pe \"use open qw(:std :utf8);s/[^[:*ascii*:]]//g;\"  #PS_BULK_GP.LOCAL_WORKING_FOLDER##TARGET_TABLE#.ftm\n</code></pre>\n\n<p>2.</p>\n\n<pre><code>-i.bak -pe \"use open qw(:std :utf8);s/[^[:*print*:]]//g;\"  #PS_BULK_GP.LOCAL_WORKING_FOLDER##TARGET_TABLE#.ftm\n</code></pre>\n"}, {"tags": ["perl", "split"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 2, "creation_date": 1488348723, "post_id": 42524444, "comment_id": 72185070, "body": "And where is your problem?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 5, "creation_date": 1488349469, "post_id": 42524444, "comment_id": 72185384, "body": "Are you sure you don&#39;t actually want a hash? Because... it sounds like you probably want a hash."}], "answers": [{"comments": [{"owner": {"reputation": 406, "user_id": 6726492, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eAMm5FnaLrI/AAAAAAAAAAI/AAAAAAAAAC0/WAfxmxfxUS8/photo.jpg?sz=128", "display_name": "Vida Wang", "link": "https://stackoverflow.com/users/6726492/vida-wang"}, "reply_to_user": {"reputation": 1, "user_id": 7639415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1761a42ce1769220f4826c8861d8db7e?s=128&d=identicon&r=PG&f=1", "display_name": "Sida Zhang", "link": "https://stackoverflow.com/users/7639415/sida-zhang"}, "edited": false, "score": 0, "creation_date": 1488349941, "post_id": 42524582, "comment_id": 72185586, "body": "@SidaZhang the symbol <b>&amp;</b> is Bitwise operation, and wiki <a href=\"https://en.wikipedia.org/wiki/Bitwise_operation\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Bitwise_operation</a>"}, {"owner": {"reputation": 406, "user_id": 6726492, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eAMm5FnaLrI/AAAAAAAAAAI/AAAAAAAAAC0/WAfxmxfxUS8/photo.jpg?sz=128", "display_name": "Vida Wang", "link": "https://stackoverflow.com/users/6726492/vida-wang"}, "reply_to_user": {"reputation": 1, "user_id": 7639415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1761a42ce1769220f4826c8861d8db7e?s=128&d=identicon&r=PG&f=1", "display_name": "Sida Zhang", "link": "https://stackoverflow.com/users/7639415/sida-zhang"}, "edited": false, "score": 0, "creation_date": 1488350953, "post_id": 42524582, "comment_id": 72186024, "body": "@SidaZhang Sure, My hometown is HangZhou."}, {"owner": {"reputation": 1, "user_id": 7639415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1761a42ce1769220f4826c8861d8db7e?s=128&d=identicon&r=PG&f=1", "display_name": "Sida Zhang", "link": "https://stackoverflow.com/users/7639415/sida-zhang"}, "edited": false, "score": 0, "creation_date": 1488354838, "post_id": 42524582, "comment_id": 72188033, "body": "\u6211\u662f\u5c71\u897f\u4eba \u54c8\u54c8\uff0c\u6211\u662f\u4e2a\u65b0\u624b...\u4e0d\u592a\u4f1a\u7f16\u7a0b"}], "tags": [], "owner": {"reputation": 406, "user_id": 6726492, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eAMm5FnaLrI/AAAAAAAAAAI/AAAAAAAAAC0/WAfxmxfxUS8/photo.jpg?sz=128", "display_name": "Vida Wang", "link": "https://stackoverflow.com/users/6726492/vida-wang"}, "is_accepted": false, "score": 1, "last_activity_date": 1488351058, "last_edit_date": 1488351058, "creation_date": 1488349160, "answer_id": 42524582, "question_id": 42524444, "link": "https://stackoverflow.com/questions/42524444/split-an-array-into-two-arrays-in-perl/42524582#42524582", "title": "Split an array into two arrays in perl", "body": "<p>It seems most reliable to view <code>@products</code> as a list of pairs, so I'd split the values based on the index in <code>@products</code>.</p>\n\n<pre><code>my (@diag, @product);\nfor my $i (0..$#products){\n    if($i &amp; 1 == 1){\n        push(@diag,$products[$i]);\n    }else {\n        push(@product,$products[$i]);\n    }\n}\nprint \"\\@diag:\".join(\";\",@diag).\"\\n\";\nprint \"\\@product:\".join(\";\",@product).\"\\n\";\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>@diag:759230;272616;267112;987456;231948;898923;123997;231223;235442;124409;029399\n@product:Diapers;TrashBags;ToiletPaper;Condoms;Pencils;Pillows;Crayons;Sheets;Paper;Cups;Napkins\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 124, "user_id": 7208743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2087289e2d292c565a792961070ec894?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Motani", "link": "https://stackoverflow.com/users/7208743/sagar-motani"}, "is_accepted": true, "score": 2, "last_activity_date": 1488350867, "last_edit_date": 1488350867, "creation_date": 1488349489, "answer_id": 42524662, "question_id": 42524444, "link": "https://stackoverflow.com/questions/42524444/split-an-array-into-two-arrays-in-perl/42524662#42524662", "title": "Split an array into two arrays in perl", "body": "<p>You can either iterate array using for,</p>\n\n<pre><code>foreach (@products){\n    if(/\\d/){\n        push(@digits,$_);\n    }else{\n        push(@product,$_);\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Alternatively, you can <code>grep</code> from the array</p>\n\n<pre><code>my(@product) = grep { !/\\d/ } @products;\nmy(@digits) = grep { /\\d/ } @products;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488351655, "post_id": 42525088, "comment_id": 72186388, "body": "@ikegami Didn&#39;t I cover that when I said &quot;If you don&#39;t care about the order...&quot;?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488351903, "post_id": 42525088, "comment_id": 72186527, "body": "First of all, feel free to revert. Yes, you said that, but it&#39;s not quite right. Not all order is lost by losing the hash method. More specifically, the pairing is not lost when using a hash, when you implied it was. If that&#39;s all the order one cares about, then one can use care about order and use the hash method."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488352582, "post_id": 42525088, "comment_id": 72186852, "body": "@ikegami Ok, yes, maybe I assumed too much, and it&#39;s probably worthwhile to point out that <code>keys</code> and <code>values</code> are guaranteed to return things in the same order for a given hash."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 5, "last_activity_date": 1488351566, "last_edit_date": 1488351566, "creation_date": 1488351148, "answer_id": 42525088, "question_id": 42524444, "link": "https://stackoverflow.com/questions/42524444/split-an-array-into-two-arrays-in-perl/42525088#42525088", "title": "Split an array into two arrays in perl", "body": "<p>Assuming the following for both examples below:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @products = qw/Diapers 759230 TrashBags 272616 ToiletPaper 267112 Condoms 987456 Pencils 231948 Pillows 898923 Crayons 123997 Sheets 231223 Paper 235442 Cups 124409 Napkins 029399/;\n</code></pre>\n\n<p>If you don't care about the order, exploit the properties of a hash:</p>\n\n<pre><code>my %hash = @products;\nmy @digits = values(%hash);\nmy @product = keys(%hash);\n</code></pre>\n\n<p>The name and the number of a given product will be at same index in both <code>@product</code> and <code>@digits</code>, but the order of the products in <code>@product</code>/<code>@digits</code> will be different than the order in <code>@products</code>.</p>\n\n<p>If you want the order to be the same, slice the even and odd array indices:</p>\n\n<pre><code>my @digits = @products[ grep { ! ($_ % 2) } 0 .. $#products ];\nmy @product = @products[ grep { $_ % 2 } 0 .. $#products ];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1488352194, "last_edit_date": 1488352194, "creation_date": 1488351755, "answer_id": 42525256, "question_id": 42524444, "link": "https://stackoverflow.com/questions/42524444/split-an-array-into-two-arrays-in-perl/42525256#42525256", "title": "Split an array into two arrays in perl", "body": "<p>Looks to me like <code>@products</code> contains <code>2</code> values for each product. To iterate over the products, you can use <code>natatime</code> from the must-have List::MoreUtils module.</p>\n\n<pre><code>use List::MoreUtils qw( natatime );\n\nmy $iter = natatime(2, @products);\nwhile (my @product = $iter-&gt;()) {\n   ...\n}\n</code></pre>\n\n<p>So, to answer your question, you can use the following:</p>\n\n<pre><code>use List::MoreUtils qw( natatime );\n\nmy (@product_names, @product_ids);\nmy $iter = natatime(2, @products);\nwhile (my @product = $iter-&gt;()) {\n   push @product_names, $product[0];\n   push @product_ids,   $product[1];\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1488362597, "creation_date": 1488362597, "answer_id": 42528670, "question_id": 42524444, "link": "https://stackoverflow.com/questions/42524444/split-an-array-into-two-arrays-in-perl/42528670#42528670", "title": "Split an array into two arrays in perl", "body": "<p>Simply<code>push</code> each value onto one or the other array according to whether its index is even or odd</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy @products = qw/\n    Diapers     759230\n    TrashBags   272616\n    ToiletPaper 267112\n    Condoms     987456\n    Pencils     231948\n    Pillows     898923\n    Crayons     123997\n    Sheets      231223\n    Paper       235442\n    Cups        124409\n    Napkins     029399\n/;\n\nmy ( @product, @digits );\n\npush @{$_ % 2 ? \\@digits : \\@product}, $products[$_] for 0 .. $#products;\n\nprint \"@product\\n\\n\";\nprint \"@digits\\n\\n\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>Diapers TrashBags ToiletPaper Condoms Pencils Pillows Crayons Sheets Paper Cups Napkins\n\n759230 272616 267112 987456 231948 898923 123997 231223 235442 124409 029399\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7639415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1761a42ce1769220f4826c8861d8db7e?s=128&d=identicon&r=PG&f=1", "display_name": "Sida Zhang", "link": "https://stackoverflow.com/users/7639415/sida-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1747, "favorite_count": 1, "accepted_answer_id": 42524662, "answer_count": 5, "score": 0, "last_activity_date": 1488362597, "creation_date": 1488348588, "last_edit_date": 1488349460, "question_id": 42524444, "link": "https://stackoverflow.com/questions/42524444/split-an-array-into-two-arrays-in-perl", "title": "Split an array into two arrays in perl", "body": "<p>I am trying to split the array into two different arrays. \nThe first one will be <code>@product</code>,\nAnd the second one will be <code>@digit</code>.</p>\n\n<pre><code>@products = qw/Diapers 759230 TrashBags 272616 ToiletPaper 267112 Condoms 987456 Pencils 231948 Pillows 898923 Crayons 123997 Sheets 231223 Paper 235442 Cups 124409 Napkins 029399/;\n</code></pre>\n\n<p>the result for print @product would be:\nDiapersTrashBagsToiletPaperCondomsPencilsPillowsCrayonsSheetsPaperCupsNapkins\n...</p>\n"}, {"tags": ["perl", "websocket"], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 5, "last_activity_date": 1488345945, "creation_date": 1488345945, "answer_id": 42523849, "question_id": 42523419, "link": "https://stackoverflow.com/questions/42523419/simple-websocket-server-from-scratch-is-not-working/42523849#42523849", "title": "Simple websocket server from scratch is not working", "body": "<p>From the <a href=\"https://metacpan.org/pod/Digest::SHA1#sha1_base64($data,...)\" rel=\"noreferrer\">documentation of sha1_bas64</a>:</p>\n\n<blockquote>\n  <p>Note that the base64 encoded string returned is <strong>not padded</strong> to be a multiple of 4 bytes long. If you want interoperability with other base64 encoded sha1 digests you might want to <strong>append the redundant string \"=\" to the result</strong>.</p>\n</blockquote>\n\n<p>And adding '=' as described is what your code is missing.</p>\n"}], "owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 2, "accepted_answer_id": 42523849, "answer_count": 1, "score": 4, "last_activity_date": 1488380741, "creation_date": 1488343694, "last_edit_date": 1488380741, "question_id": 42523419, "link": "https://stackoverflow.com/questions/42523419/simple-websocket-server-from-scratch-is-not-working", "title": "Simple websocket server from scratch is not working", "body": "<p>Created a simple websocket server using perl from scratch, when pointing to it from Chrome (by using <a href=\"http://www.websocket.org/echo.html\" rel=\"nofollow noreferrer\">echo test</a>), got error <code>Error during WebSocket handshake: Incorrect 'Sec-WebSocket-Accept' header value</code>.</p>\n\n<p>Pretty sure the key returned for websocket handshake is correct.  Any ideas?</p>\n\n<pre><code>use IO::Socket;\nuse IO::Select;\nuse Digest::SHA1  qw(sha1 sha1_hex sha1_base64);\n\n\n$servSock = IO::Socket::INET-&gt;new( Proto    =&gt; 'tcp',\n                                 LocalPort =&gt; 8080,\n                                Reuse     =&gt; 1,\n                                Listen    =&gt; 500\n   ) || die \"failed to setup outsock $@\\n\";\n$s = IO::Select-&gt;new();\n$s -&gt; add ($servSock);\nmy @readySocks;\nwhile (1) {\n   @readySocks = $s-&gt;can_read(5);\n   foreach $sock (@readySocks) {\n      if ($sock eq $servSock)\n      {\n          #print \"inSock\\n\";\n          $clientSock = $servSock-&gt;accept();\n          setsockopt($clientSock, IPPROTO_TCP, TCP_NODELAY, 1);\n          $s-&gt;add ($clientSock);\n      } else\n      {\n         #print \"outsock\\n\";\n        $buff = \"\";\n         $fromAddr = recv $sock, $buff, 1470, 0;\n         if (length($buff) &lt;= 0)\n         {\n             $s-&gt;remove($sock);\n             close $sock; $numOfConns --;\n             next;\n         }\n         printf \"recved %d bytes\\n\", length($buff);\n         if ($buff =~ /Sec-WebSocket-Key: (\\S+)/) {\n             $str = $1;\n             print \"key is $str|\\n\";\n             my $str = sha1_base64($str . \"258EAFA5-E914-47DA-95CA-C5AB0DC85B11\");\n             send ($sock, qq{HTTP/1.1 101 Switching Protocols\\r\nConnection: Upgrade\\r\nUpgrade: websocket\\r\nSec-Websocket-Accept: $str\\r\n\\r\\n}, 0);\n         }\n      }\n   }\n}\n</code></pre>\n\n<p>Note: I need to create one from scratch as part of another project. </p>\n\n<p><strong>Update</strong></p>\n\n<p>Thanks to the suggestion from @steffen-ullrich,  changed it from </p>\n\n<pre><code>send ($sock, qq{HTTP/1.1 101 Switching Protocols\\r\nConnection: Upgrade\\r\nUpgrade: websocket\\r\nSec-Websocket-Accept: $str\\r\n\\r\\n}, 0);\n</code></pre>\n\n<p>to (note there <code>$str</code> is now <code>$str=</code>)</p>\n\n<pre><code>send ($sock, qq{HTTP/1.1 101 Switching Protocols\\r\nConnection: Upgrade\\r\nUpgrade: websocket\\r\nSec-Websocket-Accept: $str=\\r\n\\r\\n}, 0);\n</code></pre>\n\n<p>made it work.</p>\n"}, {"tags": ["perl", "dbi", "fedora20"], "comments": [{"owner": {"reputation": 179, "user_id": 7638701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/386aeaa315533b862e2aa02c0155777b?s=128&d=identicon&r=PG&f=1", "display_name": "adamz88", "link": "https://stackoverflow.com/users/7638701/adamz88"}, "reply_to_user": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1488336353, "post_id": 42522227, "comment_id": 72181235, "body": "Using fedora 20, can you recommend me a C compiler and installation procedure? I verified that &quot;make&quot; is installed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1488361630, "post_id": 42522227, "comment_id": 72192405, "body": "Erm, <a href=\"https://gcc.gnu.org/install/\" rel=\"nofollow noreferrer\">gcc</a>?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1488382709, "post_id": 42522227, "comment_id": 72207446, "body": "You should almost never use the force option. All it does is skip failing tests, which means that even if the installation succeeds, it&#39;s probably broken."}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 7638701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/386aeaa315533b862e2aa02c0155777b?s=128&d=identicon&r=PG&f=1", "display_name": "adamz88", "link": "https://stackoverflow.com/users/7638701/adamz88"}, "edited": false, "score": 0, "creation_date": 1488338328, "post_id": 42522408, "comment_id": 72181742, "body": "That did it. Thanks."}], "tags": [], "owner": {"reputation": 146, "user_id": 7408563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U871e.jpg?s=128&g=1", "display_name": "asthman", "link": "https://stackoverflow.com/users/7408563/asthman"}, "is_accepted": true, "score": 5, "last_activity_date": 1488337274, "creation_date": 1488337274, "answer_id": 42522408, "question_id": 42522227, "link": "https://stackoverflow.com/questions/42522227/error-when-installing-dbi-perl-module/42522408#42522408", "title": "Error When Installing DBI Perl Module", "body": "<p>The error message:</p>\n\n<pre><code>    /bin/sh: gcc: command not found\n</code></pre>\n\n<p>so you need to install gcc</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1488362123, "creation_date": 1488362123, "answer_id": 42528529, "question_id": 42522227, "link": "https://stackoverflow.com/questions/42522227/error-when-installing-dbi-perl-module/42528529#42528529", "title": "Error When Installing DBI Perl Module", "body": "<p>As you have already seen, installing <code>gcc</code> will fix the problem.</p>\n\n<p>But I wonder why you don't use the pre-packaged version.</p>\n\n<pre><code>$ sudo yum install perl-DBI\n</code></pre>\n\n<p>Also, do you realise that Fedora 20 is now unsupported? I strongly suggest that you upgrade to a supported version (Fedora 24 or 25).</p>\n"}], "owner": {"reputation": 179, "user_id": 7638701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/386aeaa315533b862e2aa02c0155777b?s=128&d=identicon&r=PG&f=1", "display_name": "adamz88", "link": "https://stackoverflow.com/users/7638701/adamz88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2132, "favorite_count": 0, "accepted_answer_id": 42522408, "answer_count": 2, "score": 1, "last_activity_date": 1488362123, "creation_date": 1488336033, "question_id": 42522227, "link": "https://stackoverflow.com/questions/42522227/error-when-installing-dbi-perl-module", "title": "Error When Installing DBI Perl Module", "body": "<p>Here is my output, any suggestions? I've tried installing by  perl -MCPAN -e shell and then force install DBI.</p>\n\n<pre><code>cpan[10]&gt; force install DBI\nRunning install for module 'DBI'\nRunning make for T/TI/TIMB/DBI-1.636.tar.gz\n  Has already been unwrapped into directory /root/.cpan/build/DBI-1.636-sGWX9V\n\n  CPAN.pm: Building T/TI/TIMB/DBI-1.636.tar.gz\n\ngcc -c   -D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic   -DVERSION=\\\"1.636\\\" -DXS_VERSION=\\\"1.636\\\" -fPIC \"-I/usr/lib64/perl5/CORE\"  -W -Wall -Wpointer-arith -Wbad-function-cast -Wno-comment -Wno-sign-compare -Wno-cast-qual -Wmissing-noreturn -Wno-unused-parameter Perl.c\n/bin/sh: gcc: command not found\nmake: *** [Perl.o] Error 127\n  TIMB/DBI-1.636.tar.gz\n  /bin/make -- NOT OK\nRunning make test\n  Can't test without successful make\nRunning make install\n  Make had returned bad status, install seems impossible\nFailed during this command:\n TIMB/DBI-1.636.tar.gz                        : make NO\n</code></pre>\n"}, {"tags": ["bash", "perl", "nginx", "awk", "sed"], "comments": [{"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 3, "creation_date": 1488322378, "post_id": 42520141, "comment_id": 72177457, "body": "Perl increments letters.  I suggest you&#39;re going to want <code>perl -p -e</code> solutions.  Add the tag if you&#39;re open to it."}], "answers": [{"comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1488346490, "post_id": 42520930, "comment_id": 72184146, "body": "Replacing long runs of <code>grep | sed | awk | sed</code> with a single Awk script might be more easily within reach without learning a new language.  In general, if you are using Awk, you should need <code>grep</code> or <code>sed</code> in the same pipeline only very rarely and very sparingly.  But in this particular case, Perl seems like a good fit, because it supports the behavior the OP describes right out of the box."}, {"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 1, "creation_date": 1488389889, "post_id": 42520930, "comment_id": 72212448, "body": "You can also use the <code>..</code> operator with letters or zero-padded integers. (<code>&#39;A&#39;..&#39;Z&#39;</code>) There is a lot of string manipulation functionality hidden in operators where you might not expect it."}, {"owner": {"reputation": 123, "user_id": 7638104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92011a3d60f3c202bc1ddf6c8752c19e?s=128&d=identicon&r=PG", "display_name": "fabreg", "link": "https://stackoverflow.com/users/7638104/fabreg"}, "edited": false, "score": 1, "creation_date": 1488393497, "post_id": 42520930, "comment_id": 72214613, "body": "Thank you all guys for brilliant solution! I tried the @Borodin&#39;s one and it works perfectly!"}], "tags": [], "owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "is_accepted": false, "score": 2, "last_activity_date": 1488372632, "last_edit_date": 1495542312, "creation_date": 1488326420, "answer_id": 42520930, "question_id": 42520141, "link": "https://stackoverflow.com/questions/42520141/replace-and-increment-letters-and-numbers-with-awk-or-sed/42520930#42520930", "title": "Replace and increment letters and numbers with awk or sed", "body": "<p>Note: The <strong>solution below is needlessly complicated</strong>, because as <a href=\"https://stackoverflow.com/a/42528116/45375\">Borodin's helpful answer</a> demonstrates (and @stevesliva's comment on the question hinted at), <strong>Perl <em>directly</em> supports incrementing letters alphabetically</strong> in the manner described in the question, by applying the <code>++</code> operator to a variable containing a letter (sequence); e.g.:</p>\n\n<pre><code>$ perl -E '$letters = \"ZZ\"; say ++$letters'\nAAA\n</code></pre>\n\n<p>The solution below <em>may</em> still be of interest as an annotated showcase of how Perl's power can be harnessed from the shell, showing techniques such as:</p>\n\n<ul>\n<li>use of <code>s///e</code> to determine the replacement string with an expression.</li>\n<li>splitting a string into a character array (<code>split //, \"....\"</code>)</li>\n<li>use of the <code>ord</code> and <code>chr</code> functions to get the codepoint of a char., and convert a(n incremented) codepoint back to a char.</li>\n<li>string replication (<code>x</code> operator)</li>\n<li>array indexing and slices: \n\n<ul>\n<li>getting an array's last element (<code>$chars[-1]</code>)</li>\n<li>getting all but the last element of an array (<code>@chars[0..$#chars-1]</code>)</li>\n</ul></li>\n</ul>\n\n<hr>\n\n<p>A <code>perl</code> solution (in effect a re-implementation of what <code>++</code> can do directly):</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>perl -pe 's/\\bMYSITE\\K([A-Z]+)/\n  @chars = split qr(), $1; $chars[-1] eq \"Z\" ? \n    \"A\" x (1 + scalar @chars)\n    :\n    join \"\", @chars[0..$#chars-1], chr (1 + ord $chars[-1])\n/e'  &lt;&lt;'EOF'\n...=MYSITEP:...\n...=MYSITEZP:...\n...=MYSITEZZ:...\nEOF\n</code></pre>\n\n<p>yields:</p>\n\n<pre><code>...=MYSITEQ:...    # P -&gt; Q\n...=MYSITEZQ:...   # ZP -&gt; ZQ\n...=MYSITEAAA:...  # ZZ -&gt; AAA\n</code></pre>\n\n<p>You can use <code>perl</code>'s <code>-i</code> option to replace the input file with the result<br>\n(<code>perl -i -pe '...' \"$SITENAME\"</code>).</p>\n\n<p><sup>As Borodin's answer demonstrates, it's not hard to solve <em>all</em> tasks in the question using <code>perl</code> alone.</sup></p>\n\n<p>The <code>s</code> function's <code>/e</code> option allows use of a Perl <em>expression</em> for determining the replacement string, which enables sophisticated replacements:</p>\n\n<ul>\n<li><p><code>$1</code> references the current <code>MYSITE</code> suffix in the expression.</p></li>\n<li><p><code>@chars = split qr(), $1</code> splits the suffix into a character array.</p></li>\n<li><p><code>$chars[-1] eq \"Z\"</code> tests if the last suffix char. is <code>Z</code></p>\n\n<ul>\n<li><p>If so: The suffix is replaced with all <code>A</code>s, with an additional <code>A</code> appended<br>\n(<code>\"A\" x (1 + scalar @chars)</code>).</p></li>\n<li><p>Otherwise: The last suffix char. is replaced with the following letter in the alphabet<br>\n(<code>join \"\", @chars[0..$#chars-1], chr (1 + ord $chars[-1])</code>)</p></li>\n</ul></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 7638104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92011a3d60f3c202bc1ddf6c8752c19e?s=128&d=identicon&r=PG", "display_name": "fabreg", "link": "https://stackoverflow.com/users/7638104/fabreg"}, "edited": false, "score": 0, "creation_date": 1488393369, "post_id": 42528116, "comment_id": 72214538, "body": "Wow! This is a really nice solution! Everything in one line! It works like a charm. Thank you very much @Borodin!!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1488361361, "last_edit_date": 1488361361, "creation_date": 1488360934, "answer_id": 42528116, "question_id": 42520141, "link": "https://stackoverflow.com/questions/42520141/replace-and-increment-letters-and-numbers-with-awk-or-sed/42528116#42528116", "title": "Replace and increment letters and numbers with awk or sed", "body": "<p>Perl's autoincrement will work on letters as well as digits, in exactly the manner you describe</p>\n\n<p>We may as well tidy your <code>nginx-cache</code> increment as well while we're at it</p>\n\n<p>I assume <code>SITENAME</code> holds the name of the file to be modified?</p>\n\n<p>It would look like this. I have to assign the capture <code>$1</code> to an ordinary variable <code>$n</code> to increment it, as <code>$1</code> is read-only</p>\n\n<pre><code>perl -i -pe 's/nginx-cache\\K(\\d+)/ ++($n = $1) /e; s/MYSITE\\K(\\w+)/ ++($n = $1) /e;' $SITENAME\n</code></pre>\n\n<p>If you wish, this can be done in a single substitution, like this</p>\n\n<pre><code>perl -i -pe 's/(?:nginx-cache|MYSITE)\\K(\\w+)/ ++($n = $1) /ge' $SITENAME\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 7638104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92011a3d60f3c202bc1ddf6c8752c19e?s=128&d=identicon&r=PG", "display_name": "fabreg", "link": "https://stackoverflow.com/users/7638104/fabreg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 725, "favorite_count": 1, "accepted_answer_id": 42528116, "answer_count": 2, "score": 2, "last_activity_date": 1488372632, "creation_date": 1488321874, "last_edit_date": 1488351979, "question_id": 42520141, "link": "https://stackoverflow.com/questions/42520141/replace-and-increment-letters-and-numbers-with-awk-or-sed", "title": "Replace and increment letters and numbers with awk or sed", "body": "<p>I have a string that contains</p>\n\n<pre><code>fastcgi_cache_path /var/run/nginx-cache15 levels=1:2 keys_zone=MYSITEP:100m inactive=60m;\n</code></pre>\n\n<p>One of the goals of this script is to increment <em>nginx-cache</em> two digits based on the value find on previous file. For doing that I used this code:</p>\n\n<pre><code># Replace cache_path\n\nPREV=$(ls -t /etc/nginx/sites-available | head -n1) #find the previous cache_path number\nCACHE=$(grep fastcgi_cache_path $PREV | awk '{print $2}' |cut -d/ -f4) #take the string to change\nSUB=$(echo $CACHE |sed \"s/nginx-cache[0-9]*[0-9]/&amp;@/g;:a {s/0@/1/g;s/1@/2/g;s/2@/3/g;s/3@/4/g;s/4@/5/g;s/5@/6/g;s/6@/7/g;s/7@/8/g;s/8@/9/g;s/9@/@0/g;t a};s/@/1/g\") #increment number\nsed -i \"s/nginx-cache[0-9]*/$SUB/g\" $SITENAME #replace number\n</code></pre>\n\n<p>Maybe not so elegant, but it works.</p>\n\n<p>The other goal is to increment last letter of all occurrences of <em>MYSITE<strong>x</em></strong> (<em>MYSITEP</em>, in that case, should become MYSITE<strong>Q</strong>, after MYSITE<strong>P</strong>, etc. etc and once MYSITE<strong>Z</strong> will be reached add another letter, like MYSITE<strong>AA</strong>, MYSITE<strong>AB</strong>, etc. etc.</p>\n\n<p>I thought something like:</p>\n\n<pre><code>sed -i \"s/MYSITEP[A-Z]*/MYSITEGG/g\" $SITENAME\n</code></pre>\n\n<p>but it can't works cause MYSITEGG is a static value and can't be used.\nHow can I calculate the last letter, increment it to the next one and once the last Z letter will be reached, add another letter?</p>\n\n<p>Thank you! </p>\n"}, {"tags": ["regex", "perl", "file", "debugging"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1488320390, "post_id": 42519738, "comment_id": 72176573, "body": "There might be empty lines in the file, then field #4 won&#39;t be defined"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1488323030, "post_id": 42519738, "comment_id": 72177734, "body": "If you&#39;re on Linux, something like <a href=\"https://metacpan.org/pod/Linux::Info::DiskStats\" rel=\"nofollow noreferrer\">Linux::Info::DiskStats</a> might be useful."}], "answers": [{"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 2, "last_activity_date": 1488320489, "creation_date": 1488320489, "answer_id": 42519825, "question_id": 42519738, "link": "https://stackoverflow.com/questions/42519738/use-of-uninitialized-value-in-pattern-match-m-at/42519825#42519825", "title": "Use of uninitialized value in pattern match (m//) at", "body": "<p>When I issue <code>cat /proc/partitions</code> then the 2nd line is empty:</p>\n\n<pre><code>$ cat /proc/partitions \nmajor minor  #blocks  name\n\n   1        0      65536 ram0\n   1        1      65536 ram1\n ...\n</code></pre>\n\n<p>I guess so is yours. Insert a <code>next unless /\\S/;</code> right after the <code>while</code> to skip empty lines:</p>\n\n<pre><code>while (&lt;PART&gt;) {\n    next unless /\\S/;   # skip empty lines\n    my @field = split;\n    ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": true, "score": 2, "last_activity_date": 1488320502, "creation_date": 1488320502, "answer_id": 42519830, "question_id": 42519738, "link": "https://stackoverflow.com/questions/42519738/use-of-uninitialized-value-in-pattern-match-m-at/42519830#42519830", "title": "Use of uninitialized value in pattern match (m//) at", "body": "<p>Check number of fields detected/generated by split or assume default value of the checked field.</p>\n\n<pre><code>#  \"@field &lt;4\" - less than four fields \nnext if @field &lt;4 || $field[3] =~ /^ram/;\n</code></pre>\n"}], "owner": {"reputation": 638, "user_id": 2103312, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6008140e285ec0d3a4705d2a1a7905cf?s=128&d=identicon&r=PG", "display_name": "JavaRed", "link": "https://stackoverflow.com/users/2103312/javared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1292, "favorite_count": 0, "accepted_answer_id": 42519830, "answer_count": 2, "score": 0, "last_activity_date": 1488320502, "creation_date": 1488320113, "question_id": 42519738, "link": "https://stackoverflow.com/questions/42519738/use-of-uninitialized-value-in-pattern-match-m-at", "title": "Use of uninitialized value in pattern match (m//) at", "body": "<p>I try to skip all the devices starting by /dev/raw in the file in /proc/partitions file if exists and store others to an array. So I have a block of code like:</p>\n\n<pre><code>sub get_proc_partitions {\n    my ($self, $device_name) = @_;\n    my @partitions;\n\n    open(PART, \"/proc/partitions\") || die \"can't open /proc/partitions: $!\";\n    while (&lt;PART&gt;) {\n        my @field = split;\n        # Skip this line if the fourth field starts with 'ram'\n        next if $field[3] =~ /^ram/;\n        # this regex matches lines like the following.\n        # in this example it will capture hdb\n        #   3    64   78150744 hdb 157 735 2168 1720 1745 437 17432 \n        if (/^\\s*(?:\\d+\\s+){3}(\\S+)\\s.*/) {\n            my $part = $1;\n            if ( defined $device_name ) {\n                push(@partitions, $part) if ($part =~ /$device_name/);\n            } else {\n                push(@partitions, $part);\n            } \n         }\n      }\nclose(PART);\nreturn \\@partitions;\n}\n</code></pre>\n\n<p>And this code will return me an error like:</p>\n\n<pre><code> Use of uninitialized value in pattern match (m//) at &lt;filename&gt; line 928, &lt;PART&gt; line 2\n</code></pre>\n\n<p>And this line refers to:</p>\n\n<pre><code>next if $field[3] =~ /^ram/;\n</code></pre>\n"}, {"tags": ["perl", "oop", "moose", "coercion"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1488314793, "post_id": 42517460, "comment_id": 72173675, "body": "You&#39;re not giving up, are you? :D"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1488318004, "post_id": 42517460, "comment_id": 72175367, "body": "I don&#39;t see the connection between the <code>VarcharRange</code> and the <code>Varchar</code>."}, {"owner": {"reputation": 137, "user_id": 2454025, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cdf738ba6122adf3df31306e076a2a55?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/2454025/bob"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1488318420, "post_id": 42517460, "comment_id": 72175571, "body": "See the commented lines inside the <code>Varchar</code> code. Essentially, when I parametrize <code>Varchar</code> by the ArrayRef, I actually, under the hood, want to parametrize <code>Varchar</code> by the <code>VarcharRange</code> (which can be coerced from ArrayRef)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1488318647, "post_id": 42517460, "comment_id": 72175683, "body": "And then what? You just want to validate if a string is inside of that length bounds?"}, {"owner": {"reputation": 137, "user_id": 2454025, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cdf738ba6122adf3df31306e076a2a55?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/2454025/bob"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1488319556, "post_id": 42517460, "comment_id": 72176176, "body": "Basically yes. And I can do it. But I want to have two things:  1) have intermediate class for range. Because it sounds right - string must care about the range. It must not care how to generate the range.  2) have sugar of parametrizing string with arrayref.  I can make string with range check working.  The challenge is to have it working with requirements I described."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1488321308, "post_id": 42517460, "comment_id": 72176985, "body": "Well, those types are not classes. They are types."}], "answers": [{"tags": [], "owner": {"reputation": 137, "user_id": 2454025, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cdf738ba6122adf3df31306e076a2a55?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/2454025/bob"}, "is_accepted": false, "score": 0, "last_activity_date": 1503397072, "last_edit_date": 1503397072, "creation_date": 1488554151, "answer_id": 42582498, "question_id": 42517460, "link": "https://stackoverflow.com/questions/42517460/parametrizing-type-with-another-type-using-typetiny/42582498#42582498", "title": "Parametrizing type with another type using Type::Tiny", "body": "<p>That's what I ended up with. Had to introduce an extra class. It works, and I'll probably stop here.</p>\n\n<p>Class for string length range:</p>\n\n<pre><code>package VarcharRange;\n\nuse strict;\nuse warnings;\nuse Moose;\nuse Moose::Util::TypeConstraints;\n\nsubtype 'AuxRange', as 'HashRef[Int]', where {\n    foreach my $range_id ( keys %{$_} ) {\n        return 0 if ( $range_id ne 'min' &amp;&amp; $range_id ne 'max' );\n        return 0 if ( $_-&gt;{$range_id} &lt; 0 );\n    }\n    return ( $_-&gt;{min} &lt;= $_-&gt;{max} )\n      if ( defined $_-&gt;{max} &amp;&amp; defined $_-&gt;{min} );\n    return 1;\n}, message {\n    'invalid VarcharRange'\n};\n\ncoerce 'AuxRange', from 'ArrayRef[Int]', via {\n    my $result;\n    my @keys = qw(min max);\n    foreach my $val ( reverse @$_ ) {\n        my $key = pop @keys // 'bad_range';\n        $result-&gt;{$key} = $val;\n    }\n    return $result;\n};\n\nhas range =&gt; (\n    isa     =&gt; 'AuxRange',\n    traits  =&gt; ['Hash'],\n    coerce  =&gt; 1,\n    handles =&gt; {\n        'max' =&gt; [ get =&gt; 'max' ],\n        'min' =&gt; [ get =&gt; 'min' ],\n    },\n);\n\n1;\n</code></pre>\n\n<p>Parametrizable type:</p>\n\n<pre><code>package MyTypesTiny;\n\nuse strict;\nuse warnings;\n\nuse Type::Library\n  -base,\n  -declare =&gt; qw( Varchar );\n\nuse Type::Utils -all;\nuse Types::Standard -types;\n\nuse VarcharRange;\n\ndeclare Varchar, as Str, where {\n    1;\n}, inline_as {\n    my ( $constraint, $varname ) = @_;\n    return $constraint-&gt;parent-&gt;inline_check($varname);\n}, constraint_generator =&gt; sub {\n    my $range = VarcharRange-&gt;new( range =&gt; \\@_ );\n    return sub {\n        my $len = length($_);\n        return 0 if ( $range-&gt;min() &amp;&amp; $len &lt; $range-&gt;min() );\n        return 0 if ( $range-&gt;max() &amp;&amp; $len &gt; $range-&gt;max() );\n        return 1;\n    };\n}, inline_generator =&gt; sub {\n    my $range = VarcharRange-&gt;new( range =&gt; \\@_ );\n    return sub {\n        my ( $constraint, $varname ) = @_;\n        my $check_line;\n        $check_line .= \"length('$varname') &gt;= $range-&gt;min()\"\n          if ( $range-&gt;min() );\n        if ( $range-&gt;max() ) {\n            $check_line .= ' &amp;&amp; ' if ( $range-&gt;min() );\n            $check_line .= \"length('$varname') &lt;= $range-&gt;max()\";\n        }\n        return $check_line;\n    };\n};\n\n1;\n</code></pre>\n\n<p>And test template to play with:</p>\n\n<pre><code>#!/usr/bin/env perl\n\npackage MyClass;\n\nuse Moose;\nuse MyTypesTiny qw( Varchar );\n\n# Varchar        means no length limitation\n# Varchar[1, 1]  means min length is 1, max is 1\n# Varchar[15]    means min length is 0, max is 15\n# Varchar[1, 15] means min length is 1, max is 15\n\n# put your parametrization here\nhas 'my_string' =&gt; ( isa =&gt; Varchar [ 9, 10 ], is =&gt; 'ro' );\n\npackage main;\nuse MyClass;\n\n# put your test string here\nmy $check = MyClass-&gt;new( my_string =&gt; 'ASDef45F%',);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11684, "user_id": 1990570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B1hso.png?s=128&g=1", "display_name": "tobyink", "link": "https://stackoverflow.com/users/1990570/tobyink"}, "edited": false, "score": 1, "creation_date": 1532858383, "post_id": 45852261, "comment_id": 90123627, "body": "Exactly how I&#39;d do it. Also, not Types::Common::String (bundled with Type::Tiny) includes a <code>StrLength</code> type which does exactly this from version 1.004000 onwards."}], "tags": [], "owner": {"reputation": 1399, "user_id": 3857002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d723ed492dde5408b8839a82ef472cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed.", "link": "https://stackoverflow.com/users/3857002/ed"}, "is_accepted": false, "score": 1, "last_activity_date": 1503689388, "last_edit_date": 1503689388, "creation_date": 1503543758, "answer_id": 45852261, "question_id": 42517460, "link": "https://stackoverflow.com/questions/42517460/parametrizing-type-with-another-type-using-typetiny/45852261#45852261", "title": "Parametrizing type with another type using Type::Tiny", "body": "<p>This is an answer that gives you the ability to give parameters to the \"Varchar\" type. The magic that enables parameterised types is to provide a <code>constraint_generator</code> to the type. This solution does not have the intermediate hashref, and it only has one type.</p>\n\n<p>MyTypesTiny.pm:</p>\n\n<pre><code>package MyTypesTiny;\n\nuse Types::Standard -all;\nuse Type::Library -base, -declare =&gt; qw(Varchar);\nuse Type::Utils -all;\n\nsub _get_varchar_args {\n  die \"can only give 0-2 parameters\" if @_ &gt; 2;\n  map assert_Int($_), @_;\n  return @_ == 1 ? (0, @_) : @_;\n}\n\ndeclare \"Varchar\",\n  as Str,\n  constraint_generator =&gt; sub {\n    my ($min_length, $max_length) = _get_varchar_args(@_);\n    return sub {\n      length($_) &gt;= $min_length and length($_) &lt;= $max_length;\n    };\n  },\n  inline_generator =&gt; sub {\n    my ($min_length, $max_length) = _get_varchar_args(@_);\n    return sub {\n      my ($constraint, $varname) = @_;\n      return sprintf(\n        'length(%s) &gt;= %d and length(%s) &lt;= %d',\n        $varname,\n        $min_length,\n        $varname,\n        $max_length,\n      );\n    };\n  };\n\n1;\n</code></pre>\n\n<p>MyClass.pm:</p>\n\n<pre><code>package MyClass;\n\nuse Moo;\nuse MyTypesTiny -all;\n\nhas my_string  =&gt; (\n  is =&gt; 'ro',\n  isa =&gt; Varchar[9, 10],\n);\n\n1;\n</code></pre>\n\n<p>tester.pl:</p>\n\n<pre><code>#!perl\nuse MyClass;\nmy $check = MyClass-&gt;new( my_string =&gt; 'ASDef45F%'); # length 9, ok\n$check = MyClass-&gt;new( my_string =&gt; 'f45F%'); # length 5, not ok\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 2454025, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cdf738ba6122adf3df31306e076a2a55?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/2454025/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1503689388, "creation_date": 1488311103, "question_id": 42517460, "link": "https://stackoverflow.com/questions/42517460/parametrizing-type-with-another-type-using-typetiny", "title": "Parametrizing type with another type using Type::Tiny", "body": "<p>I want to create a type, based on the string, which will have upper length limit, and - optionally - lower length limit. I.e., parameterized type, where length range would be a parameter.\n<BR>What I want in my implementation:</p>\n\n<ul>\n<li>A separate type for string length range.</li>\n<li>Not using MooseX::Types::Parameterizable</li>\n<li>A sugar of parametrizing the type straight with arrayref, NOT hashref:\n\n<ul>\n<li>This:     <code>isa=&gt;Varchar[1, 15]</code></li>\n<li>Not this: <code>isa=&gt;Varchar[{min=&gt;1, max=&gt;15,}]</code></li>\n</ul></li>\n</ul>\n\n<p><BR>That's what I have so far:\n<BR>File MyTypesTiny.pm</p>\n\n<pre><code>package MyTypesTiny;\n\nuse strict;\nuse warnings;\n\nuse Type::Library\n    -base,\n    -declare =&gt; qw( VarcharRange Varchar );\n\nuse Type::Utils -all;\nuse Types::Standard -types;\nuse MooseX::Types::Common::Numeric qw( PositiveOrZeroInt );\n\ndeclare VarcharRange,\n  as HashRef [PositiveOrZeroInt],\n  where {\n    return 0 if ( grep { $_ ne 'min' &amp;&amp; $_ ne 'max' } keys %{$_} );\n    return ( $_-&gt;{min} &lt;= $_-&gt;{max} )\n      if ( defined $_-&gt;{max} &amp;&amp; defined $_-&gt;{min} );\n    return 1;\n  }, message { \"$_\" };\n\ncoerce VarcharRange, from ArrayRef [PositiveOrZeroInt], via {\n    my $result;\n    my @keys = qw(min max);\n    foreach my $val ( reverse @$_ ) {\n        my $key = pop @keys // 'bad_range';\n        $result-&gt;{$key} = $val;\n    }\n    return $result;\n};\n\n1;\n</code></pre>\n\n<p>File test_varchar.pl</p>\n\n<pre><code>#!/usr/bin/env perl\n\npackage MyClass;\n\nuse Moose;\nuse MyTypesTiny qw( VarcharRange );\n\nhas 'my_range' =&gt; (isa=&gt;VarcharRange, is=&gt;'ro', coerce=&gt;1);\n\npackage main;\nuse MyClass;\n\nmy $check = MyClass-&gt;new( \n    my_range =&gt; [1, 15],     # works, as expected\n    # my_range =&gt; [1, 0],    # fails, as expected\n    # my_range =&gt; [0, 1, 2], # fails, as expected  \n);\n</code></pre>\n\n<p>Ok, VarcharRange works.\nNow I have to add Varchar itself. And that's where I get stuck instantly:\n<BR>added to MyTypesTiny.pm:</p>\n\n<pre><code>declare Varchar, as Str, where {}, constraint_generator =&gt; sub {\n    # here I have @_ which is an ArrayRef\n    # and I want to create a VarcharRange object $range from it\n    # but what exactly should I do?\n    return sub {\n        my $len = length($_);\n        return 0 if ( $range-&gt;{min} &amp;&amp; $len &lt; $range-&gt;{min} );\n        return 0 if ( $range-&gt;{max} &amp;&amp; $len &gt; $range-&gt;{max} );\n        return 1;\n    };\n};\n</code></pre>\n\n<p>My brain is boiling. I have my ArrayRef ready. All I need is a VarcharRange (which is basically a HashRef) object to be made from it. But VarcharRange is a type - a name marking set of constraints and coercion rules. It does not correspond to an object per se. Objects for types are created when class attributes are created, but I don't have any class in play here.</p>\n"}, {"tags": ["perl", "floating-point", "integer", "integer-arithmetic"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1488300945, "post_id": 42513578, "comment_id": 72166252, "body": "Enlightenment: <code>perl -e &#39;$x=1;printf&quot;%.20f\\n&quot;,8458.8*($x*=10) for 1..8</code>"}, {"owner": {"reputation": 87, "user_id": 1925412, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6b8b70966f85cd06b99eb842758400f8?s=128&d=identicon&r=PG", "display_name": "ftumsh", "link": "https://stackoverflow.com/users/1925412/ftumsh"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1488302509, "post_id": 42513578, "comment_id": 72167225, "body": "perl -e &#39;$x=1;printf&quot;%.20f\\n&quot;,8458.8*($x*=10) for 1..8&#39; 84588.00000000000000000000 845880.00000000000000000000 8458800.00000000000000000000 84588000.00000000000000000000 845880000.00000000000000000000 8458800000.00000000000000000000 84588000000.00000000000000000000 845880000000.00000000000000000000"}, {"owner": {"reputation": 87, "user_id": 1925412, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6b8b70966f85cd06b99eb842758400f8?s=128&d=identicon&r=PG", "display_name": "ftumsh", "link": "https://stackoverflow.com/users/1925412/ftumsh"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1488302533, "post_id": 42513578, "comment_id": 72167244, "body": "84588.00000000000000000000 845879.99999999988358467817 8458800.00000000000000000000 84588000.00000000000000000000 845879999.99999988079071044922 8458799999.99999904632568359375 84588000000.00000000000000000000 845879999999.99987792968750000000"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1488472111, "post_id": 42513578, "comment_id": 72255655, "body": "This is your compulsory &quot;that Perl is 10 years old&quot; comment. :)"}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 1925412, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6b8b70966f85cd06b99eb842758400f8?s=128&d=identicon&r=PG", "display_name": "ftumsh", "link": "https://stackoverflow.com/users/1925412/ftumsh"}, "edited": false, "score": 0, "creation_date": 1488447420, "post_id": 42515299, "comment_id": 72238402, "body": "The above code is replicating what happens in production code. The quotes are use to approximate a value coming from an xml parse."}, {"owner": {"reputation": 87, "user_id": 1925412, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6b8b70966f85cd06b99eb842758400f8?s=128&d=identicon&r=PG", "display_name": "ftumsh", "link": "https://stackoverflow.com/users/1925412/ftumsh"}, "edited": false, "score": 0, "creation_date": 1488449965, "post_id": 42515299, "comment_id": 72240165, "body": "The B::Deparse is interesting. Thanks for that."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 6, "last_activity_date": 1488303311, "creation_date": 1488303311, "answer_id": 42515299, "question_id": 42513578, "link": "https://stackoverflow.com/questions/42513578/perl-integer-arithmetic-giving-floating-point-answer/42515299#42515299", "title": "perl integer arithmetic giving floating point answer", "body": "<p>That isn't integer arithmetic. Both equations contain floating point numbers.</p>\n\n<pre><code>my $linetotalinclusive = \"8458.80\" * 1_000_000;\n                         ^^^^^^^^^    \nmy $c = \"7980.00\" * 1_000_000;\n        ^^^^^^^^^\n</code></pre>\n\n<p>Sometimes Perl gets smart and notices that the floating point number can be stored as an integer, but it seems to have trouble when there's a string conversion.</p>\n\n<pre><code>Dump 7980.00 + 1_000_000_000_000;\nDump \"7980.00\" + 1_000_000_000_000;\n\nSV = IV(0x7fd55401c8e0) at 0x7fd55401c8f0\n  REFCNT = 1\n  FLAGS = (PADTMP,IOK,READONLY,pIOK)\n  IV = 1000000007980\nSV = NV(0x7fd553831200) at 0x7fd553844990\n  REFCNT = 1\n  FLAGS = (PADTMP,NOK,READONLY,pNOK)\n  NV = 1000000007980\n</code></pre>\n\n<p>There's other things going on: <a href=\"https://en.wikipedia.org/wiki/Constant_folding\" rel=\"noreferrer\">constant folding</a>. If an expression contains nothing but constants, Perl will often perform the math at compile time. If you run your code through <a href=\"http://metacpan.org/pod/B::Deparse\" rel=\"noreferrer\">B::Deparse</a> which reconstructs the code from the compiled opcodes, you see that your equations have been turned into constants.</p>\n\n<pre><code>my $linetotalinclusive = 8458799999.9999990463;\nmy $c = 7980000000;\n</code></pre>\n\n<p>The first has suffered from floating point error. The second has not.</p>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1488319273, "post_id": 42515775, "comment_id": 72176023, "body": "??? that won&#39;t fix the problem.  it may change which numbers end up with a .999...999... and convert to int &quot;incorrectly&quot;"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1488319666, "post_id": 42515775, "comment_id": 72176234, "body": "No, but it does &quot;fix&quot; the &quot;problem&quot;."}, {"owner": {"reputation": 87, "user_id": 1925412, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6b8b70966f85cd06b99eb842758400f8?s=128&d=identicon&r=PG", "display_name": "ftumsh", "link": "https://stackoverflow.com/users/1925412/ftumsh"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1488448621, "post_id": 42515775, "comment_id": 72239246, "body": "I&#39;ve put some more info into the question. @ysth, when you say it changes the numbers, do you mean it will still happen, but at larger values? If so, given the perl that &quot;works&quot;, what might those values be, please?"}, {"owner": {"reputation": 87, "user_id": 1925412, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6b8b70966f85cd06b99eb842758400f8?s=128&d=identicon&r=PG", "display_name": "ftumsh", "link": "https://stackoverflow.com/users/1925412/ftumsh"}, "edited": false, "score": 0, "creation_date": 1488449882, "post_id": 42515775, "comment_id": 72240110, "body": "The perl is stock redhat. Looks like I&#39;ll be building a new server, ffs."}, {"owner": {"reputation": 87, "user_id": 1925412, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6b8b70966f85cd06b99eb842758400f8?s=128&d=identicon&r=PG", "display_name": "ftumsh", "link": "https://stackoverflow.com/users/1925412/ftumsh"}, "edited": false, "score": 0, "creation_date": 1488449901, "post_id": 42515775, "comment_id": 72240120, "body": "Thank you all for your time."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1488467971, "post_id": 42515775, "comment_id": 72252741, "body": "Added what I think is a better answer."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1488304994, "creation_date": 1488304994, "answer_id": 42515775, "question_id": 42513578, "link": "https://stackoverflow.com/questions/42513578/perl-integer-arithmetic-giving-floating-point-answer/42515775#42515775", "title": "perl integer arithmetic giving floating point answer", "body": "<p>If you can build your perl from source, the parameter to pass to the configure script is <code>-Duselongdouble</code></p>\n\n<pre><code>$ ./Configure -des -Duselongdouble\n...\n$ make\n...\n$ ./perl -Ilib -V:[in]vsize\nivsize='8';\nnvsize='16';\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 1925412, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6b8b70966f85cd06b99eb842758400f8?s=128&d=identicon&r=PG", "display_name": "ftumsh", "link": "https://stackoverflow.com/users/1925412/ftumsh"}, "edited": false, "score": 0, "creation_date": 1488534358, "post_id": 42559179, "comment_id": 72283950, "body": "Thank you. Spot on!"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 4, "last_activity_date": 1488477087, "last_edit_date": 1488477087, "creation_date": 1488467839, "answer_id": 42559179, "question_id": 42513578, "link": "https://stackoverflow.com/questions/42513578/perl-integer-arithmetic-giving-floating-point-answer/42559179#42559179", "title": "perl integer arithmetic giving floating point answer", "body": "<p>Simplifying a little, floating point numbers are stored in binary; that is, each number internally is stored as a certain number of bits of mantissa (significant digits) (commonly 53) and an exponent that shows what power of 2 to multiply that mantissa by.</p>\n\n<p>Most decimal numbers are not exactly representable in this format.  For instance, 8458.8 might be represented as 0b10000100001010110011001100110011001100110011001100110 * 2**-39.  This is a number that is slightly smaller than 8458.8, but is the closest possible representable number.  Because it is smaller, if you multiply it by 100 and then int it, you will get 845879, not 845880.</p>\n\n<p>You multiplying your input by a large power of ten, which, if numbers were exactly stored, would give an integer.  Because you know it should be an integer, you should round it at that point; then numbers represented as either slightly smaller or slightly larger than the exact number will come out correct:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $linetotalinclusive = int( \"8458.80\" * 1_000_000 + .5 );\n\n$linetotalinclusive = $linetotalinclusive;\n\nmy $c = int( \"7980.00\" * 1_000_000 + .5 );\n\nmy $data = $linetotalinclusive - $c;\n\nprint \"$linetotalinclusive - $c = $data \\n\";\n</code></pre>\n\n<p>Or alternatively, round after your computations.</p>\n\n<p>The suggestion to compile perl with uselongdouble will (if your machine supports it) use 64 bits of precision instead of 53.  This will affect whether particular numbers are represented as larger or smaller than the exact value, but there will still be some numbers that go each way.</p>\n"}], "owner": {"reputation": 87, "user_id": 1925412, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6b8b70966f85cd06b99eb842758400f8?s=128&d=identicon&r=PG", "display_name": "ftumsh", "link": "https://stackoverflow.com/users/1925412/ftumsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 42559179, "answer_count": 3, "score": 4, "last_activity_date": 1488477087, "creation_date": 1488298022, "last_edit_date": 1488448418, "question_id": 42513578, "link": "https://stackoverflow.com/questions/42513578/perl-integer-arithmetic-giving-floating-point-answer", "title": "perl integer arithmetic giving floating point answer", "body": "<p>The below code mimics actual production code. double quotes are used as the actual data comes from an XML file, parsed using <code>XML:Twig</code>:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse diagnostics;\nuse Devel::Peek;\n\nmy $linetotalinclusive = \"8458.80\" * 1_000_000;\n\n$linetotalinclusive = $linetotalinclusive;\n\nmy $c = \"7980.00\" * 1_000_000;\n\nmy $data = $linetotalinclusive - $c;\n\nprint Dump $c;\n\nprint Dump $linetotalinclusive;\n\nprint \"$linetotalinclusive - $c = $data \\n\";\n</code></pre>\n\n<p>Gives the following result:</p>\n\n<pre><code>SV = PVNV(0x22885f0) at 0x21984f8\n  REFCNT = 1\n  FLAGS = (PADMY,IOK,NOK,pIOK,pNOK)\n  IV = 7980000000\n  NV = 7980000000\n  PV = 0\nSV = PVNV(0x2288650) at 0x21984c8\n  REFCNT = 1\n  FLAGS = (PADMY,NOK,pIOK,pNOK)\n  IV = 8458799999\n  NV = 8458800000\n  PV = 0\n\n8458800000 - 7980000000 = 478799999.999999\n</code></pre>\n\n<p>When run on my laptop and on our production server. (the above is from my laptop)\nHowever, when I run it on another production machine, it works fine.\n<code>use integer;</code> on the above code makes it work. But I am unable to do that to production code (easily). So, I was would like to know...</p>\n\n<ol>\n<li>Why is the above happening.</li>\n<li>What compile option is missing from the perl interpreter that would fix it.</li>\n</ol>\n\n<p>Further info:\nThis is from the broken machine:</p>\n\n<pre><code>This is perl 5, version 18, subversion 1 (v5.18.1) built for x86_64-linux-thread-multi\nperl -MPOSIX -le 'print LONG_MAX'\n9223372036854775807\n\nperl -V:[in]vsize\nivsize='8';\nnvsize='8';\n</code></pre>\n\n<p>This is from the machine that works:</p>\n\n<pre><code>This is perl, v5.8.9 built for x86_64-linux-ld\n\nperl -MPOSIX -le 'print LONG_MAX'\n9223372036854775807\n\nperl -V:[in]vsize\nivsize='8';\nnvsize='16';\n</code></pre>\n\n<p>This gives the expected answer:</p>\n\n<pre><code>Summary of my perl5 (revision 5 version 8 subversion 9) configuration:\n  Platform:\n    osname=linux, osvers=2.6.32-431.3.1.el6.x86_64, archname=x86_64-linux-ld\n    uname='linux 553291-amon-sul2.firstb2b.net 2.6.32-431.3.1.el6.x86_64 #1 smp sat jan 4 02:04:49 est 2014 x86_64 x86_64 x86_64 gnulinux '\n    config_args=''\n    hint=recommended, useposix=true, d_sigaction=define\n    usethreads=undef use5005threads=undef useithreads=undef usemultiplicity=undef\n    useperlio=define d_sfio=undef uselargefiles=define usesocks=undef\n    use64bitint=define use64bitall=define uselongdouble=define\n    usemymalloc=n, bincompat5005=undef\n  Compiler:\n    cc='cc', ccflags ='-fno-strict-aliasing -pipe -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm',\n    optimize='-O2',\n    cppflags='-fno-strict-aliasing -pipe -I/usr/local/include -I/usr/include/gdbm'\n    ccversion='', gccversion='4.4.7 20120313 (Red Hat 4.4.7-4)', gccosandvers=''\n    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678\n    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16\n    ivtype='long', ivsize=8, nvtype='long double', nvsize=16, Off_t='off_t', lseeksize=8\n    alignbytes=16, prototype=define\n  Linker and Libraries:\n    ld='cc', ldflags =' -L/usr/local/lib'\n    libpth=/usr/local/lib /lib /usr/lib /lib64 /usr/lib64 /usr/local/lib64\n    libs=-lnsl -lgdbm -ldb -ldl -lm -lcrypt -lutil -lc\n    perllibs=-lnsl -ldl -lm -lcrypt -lutil -lc\n    libc=, so=so, useshrplib=false, libperl=libperl.a\n    gnulibc_version='2.12'\n  Dynamic Linking:\n    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags='-Wl,-E'\n    cccdlflags='-fPIC', lddlflags='-shared -O2 -L/usr/local/lib'\n\n\nCharacteristics of this binary (from libperl): \n  Compile-time options: PERL_MALLOC_WRAP USE_64_BIT_ALL USE_64_BIT_INT\n                        USE_FAST_STDIO USE_LARGE_FILES USE_LONG_DOUBLE\n                        USE_PERLIO\n</code></pre>\n\n<p>This one doesn't:</p>\n\n<pre><code>Summary of my perl5 (revision 5 version 8 subversion 8) configuration:\n  Platform:\n    osname=linux, osvers=2.6.18-194.26.1.el5, archname=x86_64-linux-thread-multi\n    uname='linux x86-002.build.bos.redhat.com 2.6.18-194.26.1.el5 #1 smp fri oct 29 14:21:16 edt 2010 x86_64 x86_64 x86_64 gnulinux '\n    config_args='-des -Doptimize=-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -Dversion=5.8.8 -Dmyhostname=localhost -Dperladmin=root@localhost -Dcc=gcc -Dcf_by=Red Hat, Inc. -Dinstallprefix=/usr -Dprefix=/usr -Dlibpth=/usr/local/lib64 /lib64 /usr/lib64 -Dprivlib=/usr/lib/perl5/5.8.8 -Dsitelib=/usr/lib/perl5/site_perl/5.8.8 -Dvendorlib=/usr/lib/perl5/vendor_perl/5.8.8 -Darchlib=/usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi -Dsitearch=/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi -Dvendorarch=/usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi -Darchname=x86_64-linux-thread-multi -Dvendorprefix=/usr -Dsiteprefix=/usr -Duseshrplib -Dusethreads -Duseithreads -Duselargefiles -Dd_dosuid -Dd_semctl_semun -Di_db -Ui_ndbm -Di_gdbm -Di_shadow -Di_syslog -Dman3ext=3pm -Duseperlio -Dinstallusrbinperl=n -Ubincompat5005 -Uversiononly -Dpager=/usr/bin/less -isr -Dd_gethostent_r_proto -Ud_endhostent_r_proto -Ud_sethostent_r_proto -Ud_endprotoent_r_proto -Ud_setprotoent_r_proto -Ud_endservent_r_proto -Ud_setservent_r_proto -Dinc_version_list=5.8.7 5.8.6 5.8.5 -Dscriptdir=/usr/bin'\n    hint=recommended, useposix=true, d_sigaction=define\n    usethreads=define use5005threads=undef useithreads=define usemultiplicity=define\n    useperlio=define d_sfio=undef uselargefiles=define usesocks=undef\n    use64bitint=define use64bitall=define uselongdouble=undef\n    usemymalloc=n, bincompat5005=undef\n  Compiler:\n    cc='gcc', ccflags ='-D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm',\n    optimize='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic',\n    cppflags='-D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/local/include -I/usr/include/gdbm'\n    ccversion='', gccversion='4.1.2 20080704 (Red Hat 4.1.2-50)', gccosandvers=''\n    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678\n    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16\n    ivtype='long', ivsize=8, nvtype='double', nvsize=8, Off_t='off_t', lseeksize=8\n    alignbytes=8, prototype=define\n  Linker and Libraries:\n    ld='gcc', ldflags =''\n    libpth=/usr/local/lib64 /lib64 /usr/lib64\n    libs=-lresolv -lnsl -lgdbm -ldb -ldl -lm -lcrypt -lutil -lpthread -lc\n    perllibs=-lresolv -lnsl -ldl -lm -lcrypt -lutil -lpthread -lc\n    libc=, so=so, useshrplib=true, libperl=libperl.so\n    gnulibc_version='2.5'\n  Dynamic Linking:\n    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags='-Wl,-E -Wl,-rpath,/usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/CORE'\n    cccdlflags='-fPIC', lddlflags='-shared -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic'\n\n\nCharacteristics of this binary (from libperl): \n  Compile-time options: MULTIPLICITY PERL_IMPLICIT_CONTEXT\n                        PERL_MALLOC_WRAP USE_64_BIT_ALL USE_64_BIT_INT\n                        USE_ITHREADS USE_LARGE_FILES USE_PERLIO\n                        USE_REENTRANT_API\n</code></pre>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1488292377, "post_id": 42511365, "comment_id": 72159990, "body": "<code>if (grep{&#47;$server&#47;i} &lt;SERVERLISTE&gt;)</code> Please try in this way."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1488294733, "post_id": 42511752, "comment_id": 72161827, "body": "@Sobrique: Sorry, thanks for pointing that out. The duplicate keys were just for testing and I forgot to take them out. The structure is just an anonymous hash, so later occurrences of the same key override any preceding ones."}, {"owner": {"reputation": 63, "user_id": 5668358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a23781ea9f3120e82a3305df964276dd?s=128&d=identicon&r=PG&f=1", "display_name": "audioslave", "link": "https://stackoverflow.com/users/5668358/audioslave"}, "edited": false, "score": 0, "creation_date": 1488294838, "post_id": 42511752, "comment_id": 72161912, "body": "That looks good. Thank you very much! The background is, that I&#39;m importing a list of servers in my Ansible-Tower database. The servers come from a scanning script that looks for Linux servers in a given subnet. But there are also hosts like network-switches, appliances etc. that are recognized as Linux hosts, but not manageable with Ansible. So I&#39;m building a blacklist with this hosts and the import scripts needs to ignore this hosts. If you have a better idea about how to achieve this, I&#39;m happy to hear it :)"}, {"owner": {"reputation": 63, "user_id": 5668358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a23781ea9f3120e82a3305df964276dd?s=128&d=identicon&r=PG&f=1", "display_name": "audioslave", "link": "https://stackoverflow.com/users/5668358/audioslave"}, "edited": false, "score": 0, "creation_date": 1488294897, "post_id": 42511752, "comment_id": 72161963, "body": "The &quot;BLACK_LISTE  =&gt; &#39;black.list&#39;,&quot; is redundant, by the way :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 63, "user_id": 5668358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a23781ea9f3120e82a3305df964276dd?s=128&d=identicon&r=PG&f=1", "display_name": "audioslave", "link": "https://stackoverflow.com/users/5668358/audioslave"}, "edited": false, "score": 0, "creation_date": 1488296244, "post_id": 42511752, "comment_id": 72162953, "body": "Ah okay. I think you should do <i>that</i> by adding a <code>blacklist</code> table to your database instead of keeping the list as a text file. Then you can just write <code>SELECT * FROM servers WHERE servers.name NOT IN ( SELECT name FROM blacklist )</code> or the equivalent."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 63, "user_id": 5668358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a23781ea9f3120e82a3305df964276dd?s=128&d=identicon&r=PG&f=1", "display_name": "audioslave", "link": "https://stackoverflow.com/users/5668358/audioslave"}, "edited": false, "score": 0, "creation_date": 1488296318, "post_id": 42511752, "comment_id": 72163014, "body": "That file name was a mistake. See my comment to <b>Sobrique</b> above. I&#39;ve fixed my answer."}, {"owner": {"reputation": 63, "user_id": 5668358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a23781ea9f3120e82a3305df964276dd?s=128&d=identicon&r=PG&f=1", "display_name": "audioslave", "link": "https://stackoverflow.com/users/5668358/audioslave"}, "edited": false, "score": 0, "creation_date": 1488357799, "post_id": 42511752, "comment_id": 72189751, "body": "Not a bad idea with the blacklist table. But I would have to combine it with the insert into. The new servers, that should be added to the db, are in the textfile. When they don&#39;t already exist in the db AND NOT in the blacklist, then they I want to add them to the db. It&#39;s a long time ago, that I&#39;ve worked with SQL. Is it possible to combine this where clause you stated before with a insert into?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 63, "user_id": 5668358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a23781ea9f3120e82a3305df964276dd?s=128&d=identicon&r=PG&f=1", "display_name": "audioslave", "link": "https://stackoverflow.com/users/5668358/audioslave"}, "edited": false, "score": 0, "creation_date": 1488358209, "post_id": 42511752, "comment_id": 72190004, "body": "@audioslave: How about you just add <i>all</i> the new servers and then <code>DELETE FROM servers WHERE servers.name IN ( SELECT name FROM blacklist )</code>?"}, {"owner": {"reputation": 63, "user_id": 5668358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a23781ea9f3120e82a3305df964276dd?s=128&d=identicon&r=PG&f=1", "display_name": "audioslave", "link": "https://stackoverflow.com/users/5668358/audioslave"}, "edited": false, "score": 0, "creation_date": 1488359721, "post_id": 42511752, "comment_id": 72190997, "body": "I&#39;ve found a way:  <code>#!&#47;usr&#47;bin&#47;perl -w  use strict; use warnings &#39;all&#39;;   my $rv = qx(grep -iF -f &#47;home&#47;ansible&#47;serverscan&#47;black.list &#47;home&#47;ansible&#47;serverscan&#47;scan_results&#47;serverliste_22.02.17.t&zwnj;&#8203;xt);  my @lines = split &#47;\\n&#47;, $rv;</code>  This way all the hostnames that are new servers, but not in the blacklist, are stored in the array. From there I can add them to the DB. Thanks a lot to all of you! :)"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1488294647, "last_edit_date": 1488294647, "creation_date": 1488293128, "answer_id": 42511752, "question_id": 42511365, "link": "https://stackoverflow.com/questions/42511365/grep-case-insensitively-for-a-string-in-a-text-file/42511752#42511752", "title": "grep case-insensitively for a string in a text file", "body": "<p>The better question would be to ask how to get Perl's <code>grep</code> to do what you wanted. It is almost always a better route to write Perl code instead of creating a whole new shell process to do something simple like this. I am certain it is possible, but I cannot correct your misconceptions if you don't explain</p>\n\n<p>The problem is that you don't use <code>chomp</code> to remove the line endings from the records you read from either of the files. Putting a newline in the middle of a shell command will terminate the command at that point, so it looks like <code>grep -i '$server</code></p>\n\n<p>I would build a hash of blacklisted servers, and check it for each server in the list</p>\n\n<p>The code would look something like this. It uses the case folding <code>fc</code> operator to compare case-insensitively, and so requires the feature to be enabled</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature qw/ fc say /;\n\nuse constant {\n    SERVER_LISTE =&gt; '/home/ansible/serverscan/scan_results/serverliste_22.02.17.txt',\n    BLACK_LISTE  =&gt; '/home/ansible/serverscan/black.list',\n};\n\nmy %blacklist = do {\n    open my $fh, '&lt;', BLACK_LISTE or die $!;\n    my @blacklist = &lt;$fh&gt;;\n    chomp @blacklist;\n    map { fc $_ =&gt; 1 } @blacklist;\n};\n\nopen my $server_liste, '&lt;', SERVER_LISTE or die $!;\n\nwhile ( my $server = &lt;$server_liste&gt; ) {\n\n    chomp $server;\n\n    say \"server $server is blacklisted\" if $blacklist{ fc $server };\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "is_accepted": false, "score": 0, "last_activity_date": 1488293474, "creation_date": 1488293474, "answer_id": 42511876, "question_id": 42511365, "link": "https://stackoverflow.com/questions/42511365/grep-case-insensitively-for-a-string-in-a-text-file/42511876#42511876", "title": "grep case-insensitively for a string in a text file", "body": "<p>I see 2 problems in your code: $server contains a trailing \"\\n\". You should chomp it. In the call to grep, you have a \\ before the $.</p>\n"}, {"tags": [], "owner": {"reputation": 2494, "user_id": 1921546, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fe4ac75c43b846d9665f422cdac5cb03?s=128&d=identicon&r=PG", "display_name": "pii_ke", "link": "https://stackoverflow.com/users/1921546/pii-ke"}, "is_accepted": true, "score": 0, "last_activity_date": 1488294966, "last_edit_date": 1488294966, "creation_date": 1488294197, "answer_id": 42512173, "question_id": 42511365, "link": "https://stackoverflow.com/questions/42511365/grep-case-insensitively-for-a-string-in-a-text-file/42512173#42512173", "title": "grep case-insensitively for a string in a text file", "body": "<pre><code> grep -iF -f blacklist serverlist\n</code></pre>\n\n<p>The above command prints all lines in <code>serverlist</code> that match any of the lines in <code>blacklist</code> case insensitively.</p>\n\n<p>If you want to remove lines from <code>serverlist</code> that matches any line in <code>blacklist</code> use:</p>\n\n<pre><code> grep -viF -f blacklist serverlist\n</code></pre>\n\n<p>You can grab output inside perl using back ticks.</p>\n\n<pre><code>$not_blacklisted=`grep -viF -f blacklist serverlist`;\n</code></pre>\n\n<p>More readable commands:</p>\n\n<pre><code>grep --ignore-case --fixed-strings --file=blacklist serverlist\n</code></pre>\n\n<p>or</p>\n\n<pre><code>grep --invert-match --ignore-case --fixed-strings --file=blacklist serverlist\n</code></pre>\n\n<p>I tried this with GNU grep 2.25.</p>\n"}], "owner": {"reputation": 63, "user_id": 5668358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a23781ea9f3120e82a3305df964276dd?s=128&d=identicon&r=PG&f=1", "display_name": "audioslave", "link": "https://stackoverflow.com/users/5668358/audioslave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 42512173, "answer_count": 3, "score": 1, "last_activity_date": 1488294966, "creation_date": 1488292119, "last_edit_date": 1488292623, "question_id": 42511365, "link": "https://stackoverflow.com/questions/42511365/grep-case-insensitively-for-a-string-in-a-text-file", "title": "grep case-insensitively for a string in a text file", "body": "<p>I'm writing a Perl script but I don't get a part of it.</p>\n\n<p>There's a text file with host names, one per line.</p>\n\n<p>I need to search a second file with host names (a blacklist) for the hostname read from the first one. To be sage the search should be done case insensitive.</p>\n\n<p>My first approach was using the Perl <code>grep</code>, but I read about it and it seems not quite usable for what I needed it to. So I  thought about using the shell <code>grep</code>.</p>\n\n<p>As far as I know, it could be executed with <code>system</code>, <code>qx</code>, backticks and <code>open</code>. </p>\n\n<p>I decided to use <code>system</code>, so that I can get the exit status code of the <code>grep</code> and use it in a <code>if</code> statement to do the rest of the work the script is intended to. My code looks like this (test script with the <code>grep</code>):</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $blacklist_server = \"de9899svc\";\nmy $server = undef;\nmy $exit_value = undef;\n\n open(SERVERLISTE,\"/home/ansible/serverscan/scan_results/serverliste_22.02.17.txt\") or die \"$!\";\n\nOUTER: while (&lt;SERVERLISTE&gt;) {\n    $server = $_;\n\n    system(\"grep -i '\\$server' /home/ansible/serverscan/black.list\");\n    $exit_value  = $? &gt;&gt; 8;\n    print \"$exit_value\\n\";\n}\n\nclose SERVERLISTE;\n</code></pre>\n\n<p>The problem is, that <code>$exit_value</code> is always 1, regardless of whether the host names match or not. So can somebody please tell me what I'm missing :)</p>\n"}, {"tags": ["regex", "perl", "pcre", "regex-greedy"], "comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1488284030, "post_id": 42508475, "comment_id": 72154250, "body": "Can you provide some input data for your regex?"}, {"owner": {"reputation": 939, "user_id": 434268, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad52c92c5229b6439072b7c57d3a24a7?s=128&d=identicon&r=PG", "display_name": "Searle", "link": "https://stackoverflow.com/users/434268/searle"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1488284132, "post_id": 42508475, "comment_id": 72154309, "body": "@JohnDoe: the input is &quot;#link showcatalog=123 text=blurb&quot;. The expected output is &quot;[ match ]&quot; if it matches and &quot;[ undef ]&quot; if not."}, {"owner": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 1, "creation_date": 1488284203, "post_id": 42508475, "comment_id": 72154351, "body": "So your real question is about <code>select regexp_matches(&#39;#link showcatalog=123 text=blurb&#39;, &#39;(?:showcatalog=([0-9]+))?&#39;);</code> in postgresql, right ? I think all this perl stuff doesn&#39;t make the question clearer."}, {"owner": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 1, "creation_date": 1488284311, "post_id": 42508475, "comment_id": 72154433, "body": "<b>Why</b> did you add this <code>?</code>? It means it also matches if the group is not here. Can you explain the real goal ?"}, {"owner": {"reputation": 939, "user_id": 434268, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad52c92c5229b6439072b7c57d3a24a7?s=128&d=identicon&r=PG", "display_name": "Searle", "link": "https://stackoverflow.com/users/434268/searle"}, "reply_to_user": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 0, "creation_date": 1488284478, "post_id": 42508475, "comment_id": 72154539, "body": "@DenysS&#233;guret: I want it to work in postgresql, yes. I expressed it in perl to show that it&#39;s not a postgresql-specific question rather then a regex-question. Ah well, perhaps i should remove the postgresql reference to avoid confusion..."}, {"owner": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 0, "creation_date": 1488284527, "post_id": 42508475, "comment_id": 72154579, "body": "There&#39;s no pure &quot;regex-question&quot;. A regex question is always dependent of the tool or language."}, {"owner": {"reputation": 939, "user_id": 434268, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad52c92c5229b6439072b7c57d3a24a7?s=128&d=identicon&r=PG", "display_name": "Searle", "link": "https://stackoverflow.com/users/434268/searle"}, "reply_to_user": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 0, "creation_date": 1488284532, "post_id": 42508475, "comment_id": 72154583, "body": "@DenysS&#233;guret: I need the regex always to be matching. really, i do."}, {"owner": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 0, "creation_date": 1488284600, "post_id": 42508475, "comment_id": 72154624, "body": "So why not <code>(?:showcatalog=([0-9]*))</code> ?"}, {"owner": {"reputation": 939, "user_id": 434268, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad52c92c5229b6439072b7c57d3a24a7?s=128&d=identicon&r=PG", "display_name": "Searle", "link": "https://stackoverflow.com/users/434268/searle"}, "reply_to_user": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 0, "creation_date": 1488284676, "post_id": 42508475, "comment_id": 72154681, "body": "@DenysS&#233;guret: I hoped the question is clear: Why does the supplied perl one liner doesn&#39;t output the expected value. What is my misunderstanding with the greediness of &#39;?&#39;"}, {"owner": {"reputation": 939, "user_id": 434268, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad52c92c5229b6439072b7c57d3a24a7?s=128&d=identicon&r=PG", "display_name": "Searle", "link": "https://stackoverflow.com/users/434268/searle"}, "reply_to_user": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 0, "creation_date": 1488284721, "post_id": 42508475, "comment_id": 72154713, "body": "@DenysS&#233;guret: Because I always need it tho match. really, really."}, {"owner": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 0, "creation_date": 1488284944, "post_id": 42508475, "comment_id": 72154875, "body": "What result do you want when the input string is for exemple <code>&quot;nothing&quot;</code>? Please clarify your need."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1488285635, "post_id": 42508475, "comment_id": 72155367, "body": "What&#39;s the source text you&#39;re trying to parse here? It looks like it might be something structured, like XML or HTML. If so, a parser is probably better than a regex."}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 0, "creation_date": 1488285756, "post_id": 42508475, "comment_id": 72155438, "body": "@Searle , can I rewrite your question? It seems that no one understands what you&#39;re asking"}, {"owner": {"reputation": 939, "user_id": 434268, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad52c92c5229b6439072b7c57d3a24a7?s=128&d=identicon&r=PG", "display_name": "Searle", "link": "https://stackoverflow.com/users/434268/searle"}, "reply_to_user": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 0, "creation_date": 1488285807, "post_id": 42508475, "comment_id": 72155465, "body": "@DenysS&#233;guret: I added another example. For &quot;nothing&quot; the expected output would be &quot;[ undef ]&quot;"}, {"owner": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 0, "creation_date": 1488286002, "post_id": 42508475, "comment_id": 72155590, "body": "@Searle I saw that. It looks more like a perl problem than a regex one, here as the question seems to be <i>&quot;How to coalesce <code>[]</code> into <code>[undef]</code>?&quot;</i>"}, {"owner": {"reputation": 939, "user_id": 434268, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad52c92c5229b6439072b7c57d3a24a7?s=128&d=identicon&r=PG", "display_name": "Searle", "link": "https://stackoverflow.com/users/434268/searle"}, "reply_to_user": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 0, "creation_date": 1488286123, "post_id": 42508475, "comment_id": 72155661, "body": "@sidyll: Maybe it is confusing. All i want is &quot;[ number ]&quot;, if the showcatalog attribute is given and &quot;[ undef ]&quot; if it is not. However choroba&#39;s answer explains my misconception, but I still don&#39;t know if there is a regex solution."}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 0, "creation_date": 1488286176, "post_id": 42508475, "comment_id": 72155694, "body": "@Searle yes there is a regex solution...I posted it. Can I change your question wording a little? I think the programmers here are not understanding it correctly."}, {"owner": {"reputation": 939, "user_id": 434268, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad52c92c5229b6439072b7c57d3a24a7?s=128&d=identicon&r=PG", "display_name": "Searle", "link": "https://stackoverflow.com/users/434268/searle"}, "reply_to_user": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 1, "creation_date": 1488286317, "post_id": 42508475, "comment_id": 72155793, "body": "@sidyll: Feel free!"}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 0, "creation_date": 1488286584, "post_id": 42508475, "comment_id": 72155966, "body": "@Searle thanks. Please refresh the page, it is here. About it returning undef if nothing matched, don&#39;t worry, it will happen automatically if there is no match anyway."}, {"owner": {"reputation": 939, "user_id": 434268, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad52c92c5229b6439072b7c57d3a24a7?s=128&d=identicon&r=PG", "display_name": "Searle", "link": "https://stackoverflow.com/users/434268/searle"}, "reply_to_user": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 0, "creation_date": 1488286909, "post_id": 42508475, "comment_id": 72156190, "body": "@sidyll: Much better, thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1488284260, "post_id": 42508569, "comment_id": 72154397, "body": "<code>?:</code> isn&#39;t a look ahead"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1488284278, "post_id": 42508569, "comment_id": 72154409, "body": "It&#39;s a non-capturing grouping"}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1488285582, "post_id": 42508569, "comment_id": 72155323, "body": "Sorry @Dada and thanks for noticing, I completely misread that"}, {"owner": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 0, "creation_date": 1488286559, "post_id": 42508569, "comment_id": 72155952, "body": "This doesn&#39;t seem to answer the question. Did you check the updated perl commands were giving the expected result ?"}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "reply_to_user": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 0, "creation_date": 1488286651, "post_id": 42508569, "comment_id": 72156018, "body": "@DenysS&#233;guret Yes"}, {"owner": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 0, "creation_date": 1488286700, "post_id": 42508569, "comment_id": 72156054, "body": "Well... so please write the complete perl commands and their output because on my system your regex isn&#39;t better than OP&#39;s one (the whole point and only difficulty being to get  <code>[undef]</code> instead of <code>[]</code>."}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "reply_to_user": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 0, "creation_date": 1488286980, "post_id": 42508569, "comment_id": 72156236, "body": "@DenysS&#233;guret Updated"}, {"owner": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 0, "creation_date": 1488287035, "post_id": 42508569, "comment_id": 72156270, "body": "It still returns <code>[]</code> instead of <code>[undef]</code>."}, {"owner": {"reputation": 939, "user_id": 434268, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad52c92c5229b6439072b7c57d3a24a7?s=128&d=identicon&r=PG", "display_name": "Searle", "link": "https://stackoverflow.com/users/434268/searle"}, "edited": false, "score": 0, "creation_date": 1488287868, "post_id": 42508569, "comment_id": 72156794, "body": "Thanks for your insights. I thought &quot;greedy&quot; automatically means &quot;longest match&quot;, which seems to be wrong. I only use [0-9] on the command line so I don&#39;t have to think about how many backslashes to use in the current situation. And I didn&#39;t know about \\K, thanks for that too. I still don&#39;t know how a regex has to look like to get [ undef ] instead of [], so I guess I&#39;ll have to make my query dumber and postprocess the query result."}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "reply_to_user": {"reputation": 939, "user_id": 434268, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad52c92c5229b6439072b7c57d3a24a7?s=128&d=identicon&r=PG", "display_name": "Searle", "link": "https://stackoverflow.com/users/434268/searle"}, "edited": false, "score": 0, "creation_date": 1488289081, "post_id": 42508569, "comment_id": 72157644, "body": "@Searle Exactly, they are greedy when possible. The ultimate goal is still to match the expression, and this is done step by step. If in one of the steps <code>?</code> has two possibilities (zero or one) it will be greedy and choose one. But if only one possibility, that is the logical choice to attend the ultimate goal. Regarding it return a single element set to undef, that&#39;s a very interesting question and one that I do recommend you posting separately to the Perl section. Why <code>&#47;(gibberish)?&#47;</code> returns <code>(undef)</code> but <code>&#47;(?=gibberish)&#47;</code> returns <code>()</code>?"}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "reply_to_user": {"reputation": 939, "user_id": 434268, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad52c92c5229b6439072b7c57d3a24a7?s=128&d=identicon&r=PG", "display_name": "Searle", "link": "https://stackoverflow.com/users/434268/searle"}, "edited": false, "score": 0, "creation_date": 1488289125, "post_id": 42508569, "comment_id": 72157681, "body": "@Searle In a more real world usage though, in a script, you&#39;d be saving the matched text in a variable similar to my updated code, right? In that case, you&#39;d get what you&#39;re trying to achieve."}, {"owner": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 0, "creation_date": 1488289927, "post_id": 42508569, "comment_id": 72158341, "body": "@sidyll Good. Undownvoted, then (and more). I think this shouldn&#39;t be done, it&#39;s more a trick solving an XY problem than a proper parsing, but it looks like you answered the question now."}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "reply_to_user": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 0, "creation_date": 1488290332, "post_id": 42508569, "comment_id": 72158615, "body": "@DenysS&#233;guret thanks, and yes, agreed. Indeed a bit XY, a lot of factors involved here and this back and forth editing to add details about multiple problems at once actually makes me tired :D sorry that I didn&#39;t catch what you meant earlier. I was paying more attention to the initial <code>?</code> greediness problem."}, {"owner": {"reputation": 939, "user_id": 434268, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad52c92c5229b6439072b7c57d3a24a7?s=128&d=identicon&r=PG", "display_name": "Searle", "link": "https://stackoverflow.com/users/434268/searle"}, "edited": false, "score": 0, "creation_date": 1488293296, "post_id": 42508569, "comment_id": 72160687, "body": "&#161;Ay, caramba!, so simple. I didn&#39;t think of consequently putting the &#39;.*&#39; <i>inside</i> the paranthesis. This solves it, thanks! And now I&#39;ll lock myself into the study, practising asking questions propely..."}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "reply_to_user": {"reputation": 939, "user_id": 434268, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad52c92c5229b6439072b7c57d3a24a7?s=128&d=identicon&r=PG", "display_name": "Searle", "link": "https://stackoverflow.com/users/434268/searle"}, "edited": false, "score": 0, "creation_date": 1488293416, "post_id": 42508569, "comment_id": 72160789, "body": "@Searle LOL, we did a big round till reaching this, didn&#39;t we... :D Anyway, was we were saying this seems to be more a trick rather than a parsing &quot;implementation&quot;. I don&#39;t know your inner details though. If it works for now, then all good :)"}], "tags": [], "owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "is_accepted": true, "score": 1, "last_activity_date": 1488301899, "last_edit_date": 1488301899, "creation_date": 1488284213, "answer_id": 42508569, "question_id": 42508475, "link": "https://stackoverflow.com/questions/42508475/regex-trouble-why-does-this-not-match/42508569#42508569", "title": "Regex trouble: Why does this not match?", "body": "<p>It is correct that <code>?</code> is greedy, but it matches zero or one times until the condition is satisfied. Greedy is under this \"zero or one\" condition. In your case, since the whole regex is optional (surrounded by <code>?</code>), the \"zero\" times is given preference since it is the first possibility.</p>\n\n<p>The engine goes step by step, trying to match your expression. In the first caracter of your string the zero match is already possible, so nothing is returned. In this sense, <code>?</code> is greedy if zero or one is possible (it will opt for one) but if the match already satisfied it is returned. Greedy does not take precedence over matching the whole expression or not. If refers to: if there is the possibility to take zero or one take one. </p>\n\n<p>Your <code>[0-9]</code> is just <code>\\d</code>. So if you need to extract the number you can use this:</p>\n\n<pre><code>/showcatalog=(\\d+)/\n</code></pre>\n\n<p>To extract the whole text (<code>showcatalog</code> and numbers) just use</p>\n\n<pre><code>/(showcatalog=\\d+)/\n</code></pre>\n\n<p>Similar to your command:</p>\n\n<pre><code>perl -e 'use Data::Dumper; print Dumper([ \"#link showcatalog=123 text=blurb\" =~ /showcatalog=(\\d+)/ ]);'\n</code></pre>\n\n<p>In a Perl script:</p>\n\n<pre><code>my $string1 = \"#link showcatalog=123 text=blurb\";\nmy ($number1) = $string1 =~ /showcatalog=(\\d+)/;\nprint Dumper([ $number1 ]);\n\nmy $string2 = \"#link text=blurb\";\nmy ($number2) = $string2 =~ /showcatalog=(\\d+)/;\nprint Dumper([ $number2 ]);\n</code></pre>\n\n<p>You can <em>force</em> a <code>undef</code> to appear anyway if you use something like:</p>\n\n<pre><code>/(?:.*showcatalog=(\\d+))?/\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1488284988, "post_id": 42508662, "comment_id": 72154907, "body": "<code>Can&#39;t find string terminator &quot;&#39;&quot; anywhere before EOF at -e line 1.</code> Just I want to know why I am getting this error while checking the above code <code>perl -e &#39;use Data::Dumper; print Dumper([ &quot;#link showcatalog=123 text=blurb&quot; =~ &#47;(?:showcatalog=([0-9]+))?&#47;g ]);&#39;</code> in windows 7 cmd"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1488285077, "post_id": 42508662, "comment_id": 72154981, "body": "@ssr1012: In windows, you must use outer double quotes in the command line."}, {"owner": {"reputation": 939, "user_id": 434268, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad52c92c5229b6439072b7c57d3a24a7?s=128&d=identicon&r=PG", "display_name": "Searle", "link": "https://stackoverflow.com/users/434268/searle"}, "edited": false, "score": 0, "creation_date": 1488285334, "post_id": 42508662, "comment_id": 72155142, "body": "Ah, now I understand the behaviour, thanks for stopping me scratching my head. Do you know how to express a regex to achieve the expected outputs?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 939, "user_id": 434268, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad52c92c5229b6439072b7c57d3a24a7?s=128&d=identicon&r=PG", "display_name": "Searle", "link": "https://stackoverflow.com/users/434268/searle"}, "edited": false, "score": 0, "creation_date": 1488285537, "post_id": 42508662, "comment_id": 72155286, "body": "@Searle: Frankly, I don&#39;t understand what you want to achieve. What input is possible, what output is expected?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1488288321, "post_id": 42508662, "comment_id": 72157140, "body": "Thanks a lot. I understood."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1488285025, "last_edit_date": 1488285025, "creation_date": 1488284514, "answer_id": 42508662, "question_id": 42508475, "link": "https://stackoverflow.com/questions/42508475/regex-trouble-why-does-this-not-match/42508662#42508662", "title": "Regex trouble: Why does this not match?", "body": "<p>The problem is that you're only getting the first match, where the <code>(?:...)?</code> group is empty thanks to the final <code>?</code>. It can match at any position in the string; to see all possible matches, use the <code>/g</code> modifier:</p>\n\n<pre><code>perl -e 'use Data::Dumper; print Dumper([ \"#link showcatalog=123 text=blurb\" =~ /(?:showcatalog=([0-9]+))?/g ]);'\n$VAR1 = [\n          undef,\n          undef,\n          undef,\n          undef,\n          undef,\n          undef,\n          '123',\n          undef,\n          undef,\n          undef,\n          undef,\n          undef,\n          undef,\n          undef,\n          undef,\n          undef,\n          undef,\n          undef,\n          undef\n        ];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 939, "user_id": 434268, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad52c92c5229b6439072b7c57d3a24a7?s=128&d=identicon&r=PG", "display_name": "Searle", "link": "https://stackoverflow.com/users/434268/searle"}, "edited": false, "score": 0, "creation_date": 1488294310, "post_id": 42511368, "comment_id": 72161498, "body": "That&#39;s clever, thanks. I hope you&#39;re ok with me accepting sidyll&#39;s answer, as he posted his solution earlier..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 939, "user_id": 434268, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad52c92c5229b6439072b7c57d3a24a7?s=128&d=identicon&r=PG", "display_name": "Searle", "link": "https://stackoverflow.com/users/434268/searle"}, "edited": false, "score": 0, "creation_date": 1488295730, "post_id": 42511368, "comment_id": 72162571, "body": "@Searle: It&#39;s entirely up to you which one you choose, but I can&#39;t see any of sidyll&#39;s several answers that work. Which one did you pick?"}, {"owner": {"reputation": 939, "user_id": 434268, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad52c92c5229b6439072b7c57d3a24a7?s=128&d=identicon&r=PG", "display_name": "Searle", "link": "https://stackoverflow.com/users/434268/searle"}, "edited": false, "score": 0, "creation_date": 1488303262, "post_id": 42511368, "comment_id": 72167660, "body": "The one with /(?:.*showcatalog=(\\d+))?/ - the trick (for me) was adding the .* to the non capturing group."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1488292122, "creation_date": 1488292122, "answer_id": 42511368, "question_id": 42508475, "link": "https://stackoverflow.com/questions/42508475/regex-trouble-why-does-this-not-match/42511368#42511368", "title": "Regex trouble: Why does this not match?", "body": "<p>You need to use this pattern</p>\n\n<pre><code> /.*showcatalog=([0-9]+)|/\n</code></pre>\n\n<p>The <code>.*</code> forces a backtrack to find <code>showcatalog=([0-9]+)</code> anywhere in the string, and the <code>|</code> also allows the null string to match (which it always will) if the first alternative fails, leaving <code>$1</code> set to <code>undef</code></p>\n\n<pre><code>perl -MData::Dumper -e 'print Dumper [ \"#link showcatalog=123 text=blurb\" =~ /.*showcatalog=([0-9]+)|/ ]'\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>$VAR1 = [\n          '123'\n        ];\n</code></pre>\n\n\n\n<pre><code>perl -MData::Dumper -e 'print Dumper [ \"#link xxx=123 text=blurb\" =~ /.*showcatalog=([0-9]+)|/ ]'\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>$VAR1 = [\n          undef\n        ];\n</code></pre>\n"}], "owner": {"reputation": 939, "user_id": 434268, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad52c92c5229b6439072b7c57d3a24a7?s=128&d=identicon&r=PG", "display_name": "Searle", "link": "https://stackoverflow.com/users/434268/searle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 42508569, "answer_count": 3, "score": 1, "last_activity_date": 1488301899, "creation_date": 1488283936, "last_edit_date": 1488286541, "question_id": 42508475, "link": "https://stackoverflow.com/questions/42508475/regex-trouble-why-does-this-not-match", "title": "Regex trouble: Why does this not match?", "body": "<p>I need the an <strong>always matching (!)</strong> regex to extract data in Postgresql (with regexp_matches).</p>\n\n<p>This is an example input:</p>\n\n<pre><code>#link showcatalog=123 text=blurb\n</code></pre>\n\n<p>And my regex:</p>\n\n<pre><code>/(?:showcatalog=([0-9]+))?/\n</code></pre>\n\n<p>I tried this with Perl:</p>\n\n<pre><code>perl -e 'use Data::Dumper; print Dumper([ \"#link showcatalog=123 text=blurb\" =~ /(?:showcatalog=([0-9]+))?/ ]);'\n</code></pre>\n\n<p>And expected a <code>$VAR1 = [ 123 ]</code> but got a <code>$VAR1 = [ undef ]</code>. I don't understand, because '?' is greedy, and it's not behaving as such. What didn't I understand? I tried regex101.com which didn't help me. How to get the expected result?</p>\n\n<p>Shouldn't it give preference to match the text, being greedy?</p>\n\n<p>If there is nothing, to match, such as in</p>\n\n<pre><code>#link text=blurb\"\n</code></pre>\n\n<p>I just want to get <code>$VAR1 = [ undef ]</code></p>\n"}, {"tags": ["windows", "perl", "cpan", "sqitch"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1488278785, "post_id": 42505949, "comment_id": 72150764, "body": "You should have the <code>bin</code> directory from your Strawberry installtion in your <code>PATH</code>. All the scripts that come with Perl modules (just like <code>perl</code> itself, or <code>prove</code>), go there."}, {"owner": {"reputation": 1980, "user_id": 666176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mHOjo.png?s=128&g=1", "display_name": "Cortlendt", "link": "https://stackoverflow.com/users/666176/cortlendt"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1488279215, "post_id": 42505949, "comment_id": 72151053, "body": "@simbabque Yes, I actually have 3 bins from Strawberry in path. That does not help."}], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1488278782, "post_id": 42506551, "comment_id": 72150762, "body": "The problem is Cortlendt doesn&#39;t know where to find the command."}, {"owner": {"reputation": 1980, "user_id": 666176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mHOjo.png?s=128&g=1", "display_name": "Cortlendt", "link": "https://stackoverflow.com/users/666176/cortlendt"}, "edited": false, "score": 0, "creation_date": 1488279181, "post_id": 42506551, "comment_id": 72151032, "body": "Exactly &gt;sqitch &#39;sqitch&#39; is not recognized as an internal or external command, operable program or batch file."}, {"owner": {"reputation": 1980, "user_id": 666176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mHOjo.png?s=128&g=1", "display_name": "Cortlendt", "link": "https://stackoverflow.com/users/666176/cortlendt"}, "edited": false, "score": 0, "creation_date": 1488280829, "post_id": 42506551, "comment_id": 72152088, "body": "@Dr.Avalanche the update is a bit cryptic, I don&#39;t understand. There is no <i>sqitch</i>.* on my disk."}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "reply_to_user": {"reputation": 1980, "user_id": 666176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mHOjo.png?s=128&g=1", "display_name": "Cortlendt", "link": "https://stackoverflow.com/users/666176/cortlendt"}, "edited": false, "score": 0, "creation_date": 1488281154, "post_id": 42506551, "comment_id": 72152317, "body": "@Cortlendt I posted a link to download the file you don&#39;t have, it&#39;s just a perl script as you can see."}, {"owner": {"reputation": 1980, "user_id": 666176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mHOjo.png?s=128&g=1", "display_name": "Cortlendt", "link": "https://stackoverflow.com/users/666176/cortlendt"}, "edited": false, "score": 0, "creation_date": 1488283171, "post_id": 42506551, "comment_id": 72153683, "body": "Trying to run said file as a Perl Script: &gt;perl sqitch Too late for &quot;-CAS&quot; option at sqitch line 1."}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1488283420, "post_id": 42506551, "comment_id": 72153868, "body": "read the docs: &quot;Note: Since perl 5.10.1, if the -C option is used on the &quot;#!&quot; line, it must be specified on the command line as well, since the standard streams are already set up at this point in the execution of the perl interpreter.&quot; <a href=\"http://perldoc.perl.org/perlrun.html#%2a-C-%5B_number/list_%5D%2a\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlrun.html#%2a-C-%5B_number/list_%5D%2a</a> a google search would have found this for you"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1488287488, "post_id": 42506551, "comment_id": 72156546, "body": "@Dr.Avalanche: It&#39;s generally not very helpful to offer people bits and pieces of your own installation. For one thing it may be specific to your own build, and for another, Windows installations create a .bat file and running the Perl code directly is incorrect."}], "tags": [], "owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "is_accepted": false, "score": -1, "last_activity_date": 1488279487, "last_edit_date": 1488279487, "creation_date": 1488278602, "answer_id": 42506551, "question_id": 42505949, "link": "https://stackoverflow.com/questions/42505949/install-sqitch-perl-cpan-module-on-windows/42506551#42506551", "title": "Install Sqitch Perl CPAN module on Windows", "body": "<p>The <a href=\"https://metacpan.org/pod/App::Sqitch\" rel=\"nofollow noreferrer\">module</a> provides the <code>sqitch</code> command, which is <a href=\"https://metacpan.org/pod/distribution/App-Sqitch/lib/sqitch.pod\" rel=\"nofollow noreferrer\">documented here</a>, call it from the command line like so:</p>\n\n<pre><code>sqitch [&lt;options&gt;] &lt;command&gt; [&lt;command-options&gt;] [&lt;args&gt;]\n</code></pre>\n\n<p>Note that the documentation has links to associated tutorials and other references to learn how to use it.</p>\n\n<p>sqitch installed here by default:</p>\n\n<pre><code>root@test:~# which sqitch\n/usr/local/bin/sqitch\n</code></pre>\n\n<p>Try searching for the file from the command line of Windows.\nJust grab it from here and place it in your path:</p>\n\n<p><a href=\"https://github.com/theory/sqitch/blob/master/bin/sqitch\" rel=\"nofollow noreferrer\">https://github.com/theory/sqitch/blob/master/bin/sqitch</a></p>\n"}, {"comments": [{"owner": {"reputation": 1980, "user_id": 666176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mHOjo.png?s=128&g=1", "display_name": "Cortlendt", "link": "https://stackoverflow.com/users/666176/cortlendt"}, "edited": false, "score": 0, "creation_date": 1488287527, "post_id": 42509618, "comment_id": 72156577, "body": "Please take a look, I&#39;ve did a reinstall and run Perl Commandline with administrator. It seems one of the dependencies fails to intstall."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1980, "user_id": 666176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mHOjo.png?s=128&g=1", "display_name": "Cortlendt", "link": "https://stackoverflow.com/users/666176/cortlendt"}, "edited": false, "score": 0, "creation_date": 1488291081, "post_id": 42509618, "comment_id": 72159128, "body": "@Cortlendt: Yes. I had problems with <code>Locale::Messages</code> and <code>Locale::TextDomain</code>. <code>Type::Tiny::XS</code> is also &quot;recommended&quot;. I fixed it by using <code>cpan</code> to get the <code>cpan&gt; </code> prompt and then using <code>install Locale::Messages</code> etc. to install them individually. It all seemed okay like that. Don&#39;t forget to <code>install App::Sqitch</code> as well when you&#39;re done."}, {"owner": {"reputation": 1980, "user_id": 666176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mHOjo.png?s=128&g=1", "display_name": "Cortlendt", "link": "https://stackoverflow.com/users/666176/cortlendt"}, "edited": false, "score": 0, "creation_date": 1488357641, "post_id": 42509618, "comment_id": 72189656, "body": "It works if you run CPAN&gt; from bash console.It has &quot;cat&quot;  command."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1488287359, "creation_date": 1488287359, "answer_id": 42509618, "question_id": 42505949, "link": "https://stackoverflow.com/questions/42505949/install-sqitch-perl-cpan-module-on-windows/42509618#42509618", "title": "Install Sqitch Perl CPAN module on Windows", "body": "<p>I have just installed <code>App::Sqitch</code> on my copy of Strawberry Perl</p>\n\n<p>It has created this file</p>\n\n<pre><code>C:\\Strawberry\\perl\\site\\bin\\sqitch.bat\n</code></pre>\n\n<p>If you don't have that file then it sounds like your installation didn't work properly</p>\n\n<p>If you do have that file, but you cannot run it without providing the full path, then <code>C:\\Strawberry\\perl\\site\\bin</code> isn't in your PATH</p>\n"}], "owner": {"reputation": 1980, "user_id": 666176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mHOjo.png?s=128&g=1", "display_name": "Cortlendt", "link": "https://stackoverflow.com/users/666176/cortlendt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 576, "favorite_count": 1, "accepted_answer_id": 42509618, "answer_count": 2, "score": 1, "last_activity_date": 1488287601, "creation_date": 1488277005, "last_edit_date": 1488287601, "question_id": 42505949, "link": "https://stackoverflow.com/questions/42505949/install-sqitch-perl-cpan-module-on-windows", "title": "Install Sqitch Perl CPAN module on Windows", "body": "\n\n<p>I'm trying to install sqitch on Windows 10 after installing it with CPAN using latest Strawberry Perl.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>cat NEWS &gt;ReleaseNotes\n'cat' is not recognized as an internal or external command,\noperable program or batch file.\ndmake.exe:  Error code 129, while making 'ReleaseNotes'\nGUIDO/libintl-perl-1.26.tar.gz\nC:\\Projects\\STRAWB~1\\c\\bin\\dmake.exe -- NOT OK\nStopping: 'install' failed for 'Locale::Messages'.\n</code></pre>\n\n<p>Unfortunately dependency Locale::Messages fails to install. Is it trying to invoke linux \"cat\" command on Windows? Is there a workaround?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1488277012, "post_id": 42505899, "comment_id": 72149525, "body": "<code>$output =`perl $test_script`; print $output.</code>"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1488277100, "post_id": 42505899, "comment_id": 72149581, "body": "see this <a href=\"http://stackoverflow.com/questions/3200801/how-can-i-call-a-shell-command-in-my-perl-script\">question</a>"}, {"owner": {"reputation": 688, "user_id": 2141046, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5147f276e7c11f3a1c7b99f0323d7ce1?s=128&d=identicon&r=PG", "display_name": "user2141046", "link": "https://stackoverflow.com/users/2141046/user2141046"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1488277845, "post_id": 42505899, "comment_id": 72150105, "body": "@mkHun took the words right out of my keyboard. use <code>system()</code> to call the 2nd script. Please close the question if the answer satisfies you."}, {"owner": {"reputation": 25, "user_id": 6704645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/377d2a81776707a9c45075caf47a4581?s=128&d=identicon&r=PG&f=1", "display_name": "gollusingh09", "link": "https://stackoverflow.com/users/6704645/gollusingh09"}, "edited": false, "score": 0, "creation_date": 1488279410, "post_id": 42505899, "comment_id": 72151186, "body": "Thanks mkHun &amp; user2141046 for your answers. It worked both the ways. Apologies for the duplicate question."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488280504, "post_id": 42505899, "comment_id": 72151853, "body": "<code>print `perl $test_script`</code>"}], "owner": {"reputation": 25, "user_id": 6704645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/377d2a81776707a9c45075caf47a4581?s=128&d=identicon&r=PG&f=1", "display_name": "gollusingh09", "link": "https://stackoverflow.com/users/6704645/gollusingh09"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "closed_date": 1488278510, "answer_count": 0, "score": 0, "last_activity_date": 1488276865, "creation_date": 1488276865, "question_id": 42505899, "link": "https://stackoverflow.com/questions/42505899/invoke-perl-script-from-another-perl-script", "closed_reason": "Duplicate", "title": "Invoke perl script from another perl script", "body": "<p>I am using perl (v5.24.0) on a 64 bit windows machine.</p>\n\n<p>I have two perl scripts \"Test1.pl\" and \"Test2.pl\" and I am trying to call \"Test2.pl\" from \"Test1.pl\". But I am not seeing the output of the script \"Test2\"</p>\n\n<p>Test2.pl:---></p>\n\n<pre><code>print \"Test2\\n\";\n</code></pre>\n\n<p>Test1.pl:----></p>\n\n<pre><code>my $iCount = 5;\nwhile($iCount&gt;0)\n{\n    print \"Test1\\n\";\n    sleep(1);\n    $iCount--;\n}\n\nmy $test_script = \"C:\\\\Tests\\\\Test2.pl\";\n`perl $test_script`;\n\n$iCount = 5;\nwhile($iCount&gt;0)\n{\n    print \"Test1\\n\";\n    sleep(1);\n    $iCount--;\n}\n</code></pre>\n\n<p>In the output: I see only Test1 and not Test2.</p>\n\n<p>Note : I have placed both the scripts at the same location.</p>\n\n<p>Any help is appreciated.Thanks in advance!</p>\n"}, {"tags": ["perl", "perl-module"], "answers": [{"comments": [{"owner": {"reputation": 385, "user_id": 3774994, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab06f00248afe2eefaa2a280761088c4?s=128&d=identicon&r=PG&f=1", "display_name": "depsai", "link": "https://stackoverflow.com/users/3774994/depsai"}, "edited": false, "score": 0, "creation_date": 1488274144, "post_id": 42503365, "comment_id": 72147477, "body": "Thanks a lot Dave, It works fine."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488280413, "post_id": 42503365, "comment_id": 72151800, "body": "I wonder if &quot;ninteen&quot; really works!"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1488281071, "post_id": 42503365, "comment_id": 72152266, "body": "15 billion, 6 million, and ninteen <code>15006000019</code>"}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488294891, "post_id": 42503365, "comment_id": 72161960, "body": "@Borodin - The original version of my answer included a comment that he might need to fix the spelling of &quot;hundared&quot; before it would work. Then I saw in the documentation that <i>&quot;Various mispellings of numbers are understood.&quot;</i>"}], "tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": true, "score": 6, "last_activity_date": 1488269500, "creation_date": 1488269500, "answer_id": 42503365, "question_id": 42503136, "link": "https://stackoverflow.com/questions/42503136/perl-convert-string-to-numeric-number/42503365#42503365", "title": "Perl convert string to numeric number", "body": "<p>One of the best parts of Perl is CPAN and, sure enough, a couple minutes of poking around on <a href=\"https://metacpan.org/\" rel=\"noreferrer\">metacpan</a> turned up the <a href=\"https://metacpan.org/pod/Lingua::EN::Words2Nums\" rel=\"noreferrer\">Lingua::EN::Words2Nums</a> module:</p>\n\n<pre><code>use Lingua::EN::Words2Nums;\n$num=words2nums(\"two thousand and one\");\n$num=words2nums(\"twenty-second\");\n$num=words2nums(\"15 billion, 6 million, and ninteen\");\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 3774994, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab06f00248afe2eefaa2a280761088c4?s=128&d=identicon&r=PG&f=1", "display_name": "depsai", "link": "https://stackoverflow.com/users/3774994/depsai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "closed_date": 1488273526, "accepted_answer_id": 42503365, "answer_count": 1, "score": 0, "last_activity_date": 1488279778, "creation_date": 1488268629, "last_edit_date": 1488279778, "question_id": 42503136, "link": "https://stackoverflow.com/questions/42503136/perl-convert-string-to-numeric-number", "closed_reason": "Needs more focus", "title": "Perl convert string to numeric number", "body": "<p>I want to convert a string ordinal to a number in perl \nI have searched but not get exact answer.</p>\n\n<p>Example: if the input is</p>\n\n<pre><code>one it should be 1.\nfive hundred it should be 500.\nthree hundred it should be 300.\n</code></pre>\n\n<p>Is there any module to do this?</p>\n"}, {"tags": ["arrays", "perl", "compare"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1488270229, "post_id": 42502652, "comment_id": 72145017, "body": "What type of comparison do you have in mind? To check whether the data structures are identical? All array elements are equal, and all hash keys matches?"}, {"owner": {"reputation": 59, "user_id": 2219195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7166d0c45f9270ead65b28728a8b2a0a?s=128&d=identicon&r=PG", "display_name": "user2219195", "link": "https://stackoverflow.com/users/2219195/user2219195"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1488274797, "post_id": 42502652, "comment_id": 72147939, "body": "yes, comparing if all items/hashes have the same key/values. All arrays containing the same elements order-insensitive.  the method gets 2 references(much like Test::Deep) and figures out the type, nesting and topology itself. The differences should be available a return or at least logged."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1488279133, "post_id": 42502652, "comment_id": 72151004, "body": "Can the arrays contain other things than scalars? I.e. sub arrays or hashes? If so, how can you determine the correct order? E.g. which array ref should be compared to which array ref?"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1488291270, "post_id": 42507112, "comment_id": 72159251, "body": "Note that the <code>sort</code> may need to be changed to use <code>cmp</code> instead of <code>&lt;=&gt;</code> if the data is string and not numeric."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 2, "last_activity_date": 1488280119, "creation_date": 1488280119, "answer_id": 42507112, "question_id": 42502652, "link": "https://stackoverflow.com/questions/42502652/compare-deeply-nested-data-structures-ignoring-array-order/42507112#42507112", "title": "Compare deeply nested data structures ignoring array order", "body": "<p>If the arrays only can contain scalars. You could try use <a href=\"https://metacpan.org/pod/Data::Compare\" rel=\"nofollow noreferrer\"><code>Data::Compare</code></a>. Here is an example with numerical arrays. You need to write a plugin for <code>Data::compare</code>, see <a href=\"https://metacpan.org/pod/distribution/Data-Compare/lib/Data/Compare/Plugins.pod\" rel=\"nofollow noreferrer\"><code>Data::Compare::Plugins</code></a> for more information.</p>\n\n<p><strong>test.pl</strong>:</p>\n\n<pre><code>use lib '.';\nuse strict;\nuse warnings;\nuse Data::Compare;\n\nmy $h1 = { a =&gt; {b =&gt; [2, 1, 3] }, c =&gt; 3};\nmy $h2 = { a =&gt; {b =&gt; [1, 2, 3] }, c =&gt; 3};\n\nprint 'The structures $h1 and $h2 are ',\n  Compare($h1, $h2) ? \"\" : \"not \", \"identical.\\n\";\n</code></pre>\n\n<p><strong>./Data/Compare/Plugins/ArrayBag.pm</strong>:</p>\n\n<pre><code>package Data::Compare::Plugins::ArrayBag;\n\nuse strict;\nuse warnings;\nuse Data::Compare;\n\nsub _register {\n    return [\n        ['ARRAY', 'ARRAY', \\&amp;array_compare],\n    ];\n}\n\nsub array_compare {\n    my($a1, $a2) = @_;\n\n    return 0 if (scalar @$a1) != (scalar @$a2);\n    my @ar1 = sort { $a &lt;=&gt; $b } @$a1;\n    my @ar2 = sort { $a &lt;=&gt; $b } @$a2;\n    for my $i (0..$#ar1 ) {\n        return 0 if $ar1[$i] != $ar2[$i];\n    }\n    return 1;\n}\n\n_register();\n</code></pre>\n\n<p><strong>Output</strong> from running <code>test.pl</code>:</p>\n\n<pre><code>The structures $h1 and $h2 are identical.\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 2219195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7166d0c45f9270ead65b28728a8b2a0a?s=128&d=identicon&r=PG", "display_name": "user2219195", "link": "https://stackoverflow.com/users/2219195/user2219195"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1488280119, "creation_date": 1488266923, "question_id": 42502652, "link": "https://stackoverflow.com/questions/42502652/compare-deeply-nested-data-structures-ignoring-array-order", "title": "Compare deeply nested data structures ignoring array order", "body": "<p>I need to compare deeply nested data structures using perl.\nThe structures can contain scalars, arrays and hashes.\nI would prefer a XS implementation.\nThe data originally arrives as JSON. </p>\n\n<p>In the data schema the item order inside arrays is not guaranteed and makes it hard to compare.</p>\n\n<p>I tried with Test::Deep. The Approach is easy when the only array is at top level, but is heavy when the order-insensitive array is nested deeper in the structure.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 78237, "user_id": 2025923, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zYYVM.png?s=128&g=1", "display_name": "Tushar", "link": "https://stackoverflow.com/users/2025923/tushar"}, "edited": false, "score": 0, "creation_date": 1488264830, "post_id": 42502059, "comment_id": 72142272, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/22937618/reference-what-does-this-regex-mean\">Reference - What does this regex mean?</a>"}, {"owner": {"reputation": 78237, "user_id": 2025923, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zYYVM.png?s=128&g=1", "display_name": "Tushar", "link": "https://stackoverflow.com/users/2025923/tushar"}, "edited": false, "score": 0, "creation_date": 1488264874, "post_id": 42502059, "comment_id": 72142286, "body": "<code>^</code>: Start of line, ` *` means any number of spaces, <code>$</code>: End of Line."}, {"owner": {"reputation": 697, "user_id": 3002444, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Sx6Ce.gif?s=128&g=1", "display_name": "8bra1nz", "link": "https://stackoverflow.com/users/3002444/8bra1nz"}, "reply_to_user": {"reputation": 78237, "user_id": 2025923, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zYYVM.png?s=128&g=1", "display_name": "Tushar", "link": "https://stackoverflow.com/users/2025923/tushar"}, "edited": false, "score": 0, "creation_date": 1488264938, "post_id": 42502059, "comment_id": 72142314, "body": "<code>$</code> doesn&#39;t match any character as far as I know, that doesn&#39;t include <code>\\n</code>. Or does it ?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1488265462, "post_id": 42502059, "comment_id": 72142561, "body": "you are correct; <code>$</code> is always a zero-width match; it does not match a <code>\\n</code>.  But it can match before one."}], "answers": [{"comments": [{"owner": {"reputation": 697, "user_id": 3002444, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Sx6Ce.gif?s=128&g=1", "display_name": "8bra1nz", "link": "https://stackoverflow.com/users/3002444/8bra1nz"}, "edited": false, "score": 0, "creation_date": 1488265413, "post_id": 42502169, "comment_id": 72142537, "body": "Thanks that clarified things. Everywhere they say it&#39;s just &quot;end of line&quot; and I got the wrong idea."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 697, "user_id": 3002444, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Sx6Ce.gif?s=128&g=1", "display_name": "8bra1nz", "link": "https://stackoverflow.com/users/3002444/8bra1nz"}, "edited": false, "score": 2, "creation_date": 1488267110, "post_id": 42502169, "comment_id": 72143386, "body": "@nikachx, Be careful of what documentation you read. There are many regex engine, and they all have their differences. For example, <code>$</code> is indeed the end of &lt;strike&gt;line&lt;/strike&gt;string in some other engines. In Perl, that&#39;s <code>\\z</code>. In Perl, <code>$</code> is equivalent to <code>(?=\\n\\z|\\z)</code> (without the <code>m</code> modifier) or <code>(?=\\n|\\z)</code> (with the <code>m</code> modifier)."}, {"owner": {"reputation": 697, "user_id": 3002444, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Sx6Ce.gif?s=128&g=1", "display_name": "8bra1nz", "link": "https://stackoverflow.com/users/3002444/8bra1nz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488268073, "post_id": 42502169, "comment_id": 72143883, "body": "@ikegami I am reading <code>Advanced Regular Expressions</code> of O`Relly. It is&#39;t really a reference I just came up with this expression that worked unexpectedly."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 5, "last_activity_date": 1488265217, "creation_date": 1488265217, "answer_id": 42502169, "question_id": 42502059, "link": "https://stackoverflow.com/questions/42502059/perl-match-blank-lines-with-m/42502169#42502169", "title": "Perl match blank lines with m/^ *$/", "body": "<p><code>$</code> matches at either the end of a string or before a newline at the end of a string.</p>\n"}], "owner": {"reputation": 697, "user_id": 3002444, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Sx6Ce.gif?s=128&g=1", "display_name": "8bra1nz", "link": "https://stackoverflow.com/users/3002444/8bra1nz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 652, "favorite_count": 0, "accepted_answer_id": 42502169, "answer_count": 1, "score": -1, "last_activity_date": 1488265617, "creation_date": 1488264768, "last_edit_date": 1488265617, "question_id": 42502059, "link": "https://stackoverflow.com/questions/42502059/perl-match-blank-lines-with-m", "title": "Perl match blank lines with m/^ *$/", "body": "<p>This is the perl script:</p>\n\n<pre><code>while ($line = &lt;&gt;)\n{\n        if ($line =~ m/^ *$/)\n        {\n                $line = \"--blank\\n\";\n        }\n        print($line);\n}\n</code></pre>\n\n<p>That replaces all blank lines in file with <code>--blank\\n</code>.</p>\n\n<p>I don't get why it is working. Why does this regex <code>m/^ *$/</code> matches blank lines ? Because there is newline character at the end of line it must not match.</p>\n\n<p>UPDATE:</p>\n\n<p>I assume: <code>^</code> is the beginning of line, <code>*</code> is no or as many spaces as possible, <code>$</code> end of line.</p>\n\n<p>Empty line must be something like this: <code>[ ][ ][ ]\\n</code> that is <code>^</code> then <code>[ ]*</code> then <code>\\n</code> and <code>$</code>.</p>\n\n<p>Why do they match ?</p>\n"}, {"tags": ["perl", "multidimensional-array", "hash", "dereference"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1488263407, "post_id": 42499710, "comment_id": 72141567, "body": "<a href=\"http://perlmonks.org/?node=References+quick+reference\" rel=\"nofollow noreferrer\">perlmonks.org/?node=References+quick+reference</a>"}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 2526200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000504414583/picture?type=large", "display_name": "SJPRO", "link": "https://stackoverflow.com/users/2526200/sjpro"}, "edited": false, "score": 0, "creation_date": 1488259001, "post_id": 42499896, "comment_id": 72139838, "body": "Hi, doesn&#39;t work, it doesn&#39;t even execute the foreach loop."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488262418, "post_id": 42499896, "comment_id": 72141121, "body": "Fixed. You were accessing the hash <code>%argument</code> rather than the hash referenced by <code>$argument</code>."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1488262818, "last_edit_date": 1488262818, "creation_date": 1488254019, "answer_id": 42499896, "question_id": 42499710, "link": "https://stackoverflow.com/questions/42499710/perl-how-to-access-an-array-thats-inside-of-3-hashes-passed-to-subroutine-by-re/42499896#42499896", "title": "Perl: How to access an array thats inside of 3 hashes passed to subroutine by reference", "body": "<p>Just use dereference <code>@{ ... }</code>:</p>\n\n<pre><code>foreach $item (@{ $argument-&gt;{data}{fulldraw} })\n</code></pre>\n\n<p>You can use <a href=\"http://p3rl.org/Data::Dumper\" rel=\"nofollow noreferrer\">Data::Dumper</a> to visualize complex structures:</p>\n\n<pre><code>use Data::Dumper;\nprint Dumper($argument);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 181, "user_id": 2526200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000504414583/picture?type=large", "display_name": "SJPRO", "link": "https://stackoverflow.com/users/2526200/sjpro"}, "edited": false, "score": 0, "creation_date": 1488261494, "post_id": 42501024, "comment_id": 72140774, "body": "Hi, I am still trying, and some minutes ago I came up with:  foreach $item (@{$$argument{&quot;data&quot;}{&quot;fulldraw&quot;}})  and this worked right. What you say is the same?"}, {"owner": {"reputation": 181, "user_id": 2526200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000504414583/picture?type=large", "display_name": "SJPRO", "link": "https://stackoverflow.com/users/2526200/sjpro"}, "edited": false, "score": 0, "creation_date": 1488261652, "post_id": 42501024, "comment_id": 72140825, "body": "It worked the same. Now I have another question if I can ask you."}, {"owner": {"reputation": 146, "user_id": 7408563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U871e.jpg?s=128&g=1", "display_name": "asthman", "link": "https://stackoverflow.com/users/7408563/asthman"}, "reply_to_user": {"reputation": 181, "user_id": 2526200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000504414583/picture?type=large", "display_name": "SJPRO", "link": "https://stackoverflow.com/users/2526200/sjpro"}, "edited": false, "score": 0, "creation_date": 1488261845, "post_id": 42501024, "comment_id": 72140909, "body": "@SJPRO same. $argument is a hashref, not hash, so need to dereference or use another syntax."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 181, "user_id": 2526200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000504414583/picture?type=large", "display_name": "SJPRO", "link": "https://stackoverflow.com/users/2526200/sjpro"}, "edited": false, "score": 0, "creation_date": 1488262462, "post_id": 42501024, "comment_id": 72141138, "body": "@SJPRO, <code>$$argument{&quot;data&quot;}</code> is a less readable way of writing <code>$argument-&gt;{&quot;data&quot;}</code>, which is a less readable way of writing <code>$argument-&gt;{data}</code>"}], "tags": [], "owner": {"reputation": 146, "user_id": 7408563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U871e.jpg?s=128&g=1", "display_name": "asthman", "link": "https://stackoverflow.com/users/7408563/asthman"}, "is_accepted": true, "score": 2, "last_activity_date": 1488260478, "creation_date": 1488260478, "answer_id": 42501024, "question_id": 42499710, "link": "https://stackoverflow.com/questions/42499710/perl-how-to-access-an-array-thats-inside-of-3-hashes-passed-to-subroutine-by-re/42501024#42501024", "title": "Perl: How to access an array thats inside of 3 hashes passed to subroutine by reference", "body": "<pre><code>@{ ... } # dereference\n</code></pre>\n\n<p>Maybe $argument is a hashref; you need to use </p>\n\n<pre><code>foreach $item (@{ $argument-&gt;{data}-&gt;{fulldraw} })\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 2526200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000504414583/picture?type=large", "display_name": "SJPRO", "link": "https://stackoverflow.com/users/2526200/sjpro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 42501024, "answer_count": 2, "score": 0, "last_activity_date": 1488262818, "creation_date": 1488252814, "last_edit_date": 1488258877, "question_id": 42499710, "link": "https://stackoverflow.com/questions/42499710/perl-how-to-access-an-array-thats-inside-of-3-hashes-passed-to-subroutine-by-re", "title": "Perl: How to access an array thats inside of 3 hashes passed to subroutine by reference", "body": "<p>I have a code that is something like this:</p>\n\n<pre><code>foreach $item (@total_data)\n{\n    setinfo($item);\n} # @total_data contains an array of references to hashes (\\%hash1 ... \\%hashN)\n</code></pre>\n\n<p>In the subrutine goes something like this:</p>\n\n<pre><code>sub setinfo\n{\n\n    my ($argument) = @_;\n\n    my $i = 0;\n\n\n    #inside original hash $argument{\"data\"}{\"fulldraw\"} there is an [array]\n    #that  contains numbers of the form XYYZ and I want to split them into\n    #the following pairs XY YY YZ but that code works ok#\n\n    foreach $item (${$argument{\"data\"}{\"fulldraw\"}})\n    {\n        my $match;\n        my $matchedstr;\n\n        if ($item =~ /^\\d{4}$/) \n        { \n\n                          ...\n        }\n        else\n        {\n            print STDERR \"DISCARDED: $item\\n\";\n        }\n    }\n\n\n}\n</code></pre>\n\n<p>I know I am probably making the mistake in how I am dereferencing it, but couldn't figure it out with all the articles I've read on the internet.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["bash", "perl", "awk", "sed"], "answers": [{"comments": [{"owner": {"reputation": 2522, "user_id": 2965599, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/4f1II.jpg?s=128&g=1", "display_name": "Andrew Cassidy", "link": "https://stackoverflow.com/users/2965599/andrew-cassidy"}, "edited": false, "score": 0, "creation_date": 1488247032, "post_id": 42498821, "comment_id": 72136643, "body": "great suggestion, but my sentence might not always be preceding by the space. echo &quot;365 guys and some extra junk&quot; is also a valid input. I&#39;ll make the question more robust. Thank you though!"}], "tags": [], "owner": {"reputation": 28476, "user_id": 6862601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ppP5k.jpg?s=128&g=1", "display_name": "codeforester", "link": "https://stackoverflow.com/users/6862601/codeforester"}, "is_accepted": false, "score": 1, "last_activity_date": 1488246928, "creation_date": 1488246928, "answer_id": 42498821, "question_id": 42498783, "link": "https://stackoverflow.com/questions/42498783/how-to-overcome-greedy-match-everything-when-looking-for-a-particular-string-lat/42498821#42498821", "title": "How to overcome greedy match everything when looking for a particular string later?", "body": "<p>Since your number is preceded by a blank, you can make it a part of the regex:</p>\n\n<pre><code>echo \"A number is about to show up 1 and now I want to parse 365 guys and some extra junk\"  | sed -E 's/.* ([0-9]+) guys.*/\\1/g'\n\n# =&gt; 365\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "is_accepted": false, "score": 2, "last_activity_date": 1488306120, "last_edit_date": 1495535390, "creation_date": 1488247358, "answer_id": 42498862, "question_id": 42498783, "link": "https://stackoverflow.com/questions/42498783/how-to-overcome-greedy-match-everything-when-looking-for-a-particular-string-lat/42498862#42498862", "title": "How to overcome greedy match everything when looking for a particular string later?", "body": "<p>With <strong><em>GNU</em> <code>grep</code></strong>:</p>\n\n<pre><code>$ grep -Po '\\b[0-9]+(?= guys\\b)' &lt;&lt;&lt;\"365 guys or 366 guys, but not foo12 guys.\"\n365\n366\n</code></pre>\n\n<ul>\n<li><code>-P</code> actives support for <a href=\"http://www.pcre.org/original/doc/html/pcre.html\" rel=\"nofollow noreferrer\">PCREs</a>, which enables advanced regex features.</li>\n<li><code>-o</code> specifies that only the matching parts of input lines should be printed.</li>\n<li><code>\\b</code> matches only on a word boundary, including at the start of a line;<br>\nthis prevents matching numbers that aren't stand-alone numbers but part of other words, such as in <code>foo365 guys</code>, and words that <em>start</em> with <code>guys</code>, such as <code>guysanddolls</code>.</li>\n<li><code>(?= guys)</code> is a look-ahead assertion that matches the enclosed subexpression without including it in the matched string returned.</li>\n</ul>\n\n<p>As demonstrated, this may match <em>multiple</em> patterns on a given line, with each number extracted printed on its own output line.<br>\nIf that is undesired, <code>grep</code> cannot be used, because <code>-o</code> <em>invariably</em> returns all of a line's matches; see the <code>perl</code> command below for a solution.</p>\n\n<hr>\n\n<p>Inspired by <a href=\"https://stackoverflow.com/users/2566198/sobrique\">Sobrique</a>'s comment on choroba's answer, here is the <strong><code>perl</code> equivalent</strong> of the above <code>grep</code> command:</p>\n\n<pre><code>$ perl -lne 'print for m/\\b(\\d+) guys\\b/g' &lt;&lt;&lt;\"365 guys or 366 guys, but not foo12 guys.\"\n365\n366\n</code></pre>\n\n<p>Simply omit the <code>g</code> to only match at most <em>1</em> number per line.</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488271694, "post_id": 42498870, "comment_id": 72145887, "body": "There&#39;s no reason for <code>.*</code> to be there at all"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488271787, "post_id": 42498870, "comment_id": 72145944, "body": "@Borodin: There is, you want to replace it. Of course there are other ways how to approach the problem."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488271866, "post_id": 42498870, "comment_id": 72145983, "body": "Ah, I hadn&#39;t spotted that this was a substitution"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1488286221, "post_id": 42498870, "comment_id": 72155726, "body": "I would also offer perlishly <code>perl -lne &#39;m&#47;(\\d+) guys&#47; and print $1&#39;</code>"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1488249160, "last_edit_date": 1488249160, "creation_date": 1488247428, "answer_id": 42498870, "question_id": 42498783, "link": "https://stackoverflow.com/questions/42498783/how-to-overcome-greedy-match-everything-when-looking-for-a-particular-string-lat/42498870#42498870", "title": "How to overcome greedy match everything when looking for a particular string later?", "body": "<p>Use the \"frugal\" quantifier <code>*?</code> in Perl:</p>\n\n<pre><code>perl -pe 's/.*?([0-9]+) guys.*/$1/'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 0, "last_activity_date": 1488256116, "creation_date": 1488256116, "answer_id": 42500242, "question_id": 42498783, "link": "https://stackoverflow.com/questions/42498783/how-to-overcome-greedy-match-everything-when-looking-for-a-particular-string-lat/42500242#42500242", "title": "How to overcome greedy match everything when looking for a particular string later?", "body": "<p>with standard <code>sed</code> regex you can benefit from greedy match if you reverse the string and matching</p>\n\n<pre><code>echo ... | rev | sed -E 's/.*syug ([0-9]+).*/\\1/g' | rev\n</code></pre>\n\n<p>obviously this is a hack, but desperate times...</p>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 1, "last_activity_date": 1488258291, "last_edit_date": 1488258291, "creation_date": 1488257686, "answer_id": 42500482, "question_id": 42498783, "link": "https://stackoverflow.com/questions/42498783/how-to-overcome-greedy-match-everything-when-looking-for-a-particular-string-lat/42500482#42500482", "title": "How to overcome greedy match everything when looking for a particular string later?", "body": "<p>In Bash:</p>\n\n<pre><code>$ s=\"A number is about to show up 1 and now I want to parse 365 guys and some extra junk\"\n$ [[ $s =~ ([0-9]+)\\ +guys.*$ ]] &amp;&amp; echo ${BASH_REMATCH[1]}\n365\n</code></pre>\n\n<p>Or, with awk:</p>\n\n<pre><code>$ echo \"$s\" | awk '/guys/{for (i=1;i&lt;=NF;i++) if ($i==\"guys\" &amp;&amp; $(i-1)+0==$(i-1)) print $(i-1)}'\n365\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 0, "last_activity_date": 1488259473, "creation_date": 1488259473, "answer_id": 42500803, "question_id": 42498783, "link": "https://stackoverflow.com/questions/42498783/how-to-overcome-greedy-match-everything-when-looking-for-a-particular-string-lat/42500803#42500803", "title": "How to overcome greedy match everything when looking for a particular string later?", "body": "<p>@Andrew Cassidy: @try:</p>\n\n<pre><code>   echo \"A number is about to show up 1 and now I want to parse 365 guys and some extra junk\"  |\nawk '/guys/{print VAL;exit} {VAL=$0}' RS=\" \"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1488294391, "creation_date": 1488294391, "answer_id": 42512236, "question_id": 42498783, "link": "https://stackoverflow.com/questions/42498783/how-to-overcome-greedy-match-everything-when-looking-for-a-particular-string-lat/42512236#42512236", "title": "How to overcome greedy match everything when looking for a particular string later?", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code> sed -r 's/.*\\b([0-9]+) guys.*/\\1/' file\n</code></pre>\n\n<p>or perhaps:</p>\n\n<pre><code> sed -r 's/.*\\&lt;([0-9]+) guys.*/\\1/' file\n</code></pre>\n\n<p>Make the numeric part of the pattern match a word boundary.</p>\n"}], "owner": {"reputation": 2522, "user_id": 2965599, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/4f1II.jpg?s=128&g=1", "display_name": "Andrew Cassidy", "link": "https://stackoverflow.com/users/2965599/andrew-cassidy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 1, "accepted_answer_id": 42498870, "answer_count": 7, "score": 2, "last_activity_date": 1488306120, "creation_date": 1488246732, "last_edit_date": 1488247147, "question_id": 42498783, "link": "https://stackoverflow.com/questions/42498783/how-to-overcome-greedy-match-everything-when-looking-for-a-particular-string-lat", "title": "How to overcome greedy match everything when looking for a particular string later?", "body": "<pre><code>echo \"A number is about to show up 1 and now I want to parse 365 guys and some extra junk\"  | sed -E 's/.*([0-9]+) guys.*/\\1/g'\n</code></pre>\n\n<p>The above command currently outputs just <code>5</code>. Essentially I'd like to parse the number of \"guys\" in a random sentence that could have numbers (or not.. I'd also like to parse just <code>echo \"365 guys\"</code>) preceding the number of guys. My <code>.*</code> is matching the <code>36</code> and preventing it from appearing in the <code>\\1</code>. How can I write a sed command (or any other regex/perl/awk) to accomplish what I want?</p>\n"}, {"tags": ["multithreading", "perl", "file", "stdin"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1488255954, "post_id": 42498617, "comment_id": 72138918, "body": "The prints from your threads hit the target without any synchronization and sometimes overlap.  You can&#39;t (reliably) print to the same place from multiple threads/processes. Store results for each thread (in an array, say) and print from the parent, or write from each thread to a separate file, which are then joined."}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1488279374, "post_id": 42498617, "comment_id": 72151168, "body": "Thank you for your reply. Intensifying my research, I found Thread::Semaphore library. I don&#39;t know how reliable this is, but it seems to be working. Do you know any caveat of using this @zdim ?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1488311600, "post_id": 42498617, "comment_id": 72172025, "body": "For all I know it&#39;s a standard tool and I don&#39;t know of any specific caveats. (In general, just respect the normal warning to use Perl&#39;s interpreter threads suitably -- so to bear in mind that they aren&#39;t exactly lightweight. Using <code>Thread::Queue</code> supports that but doesn&#39;t do it all for us.)  I&#39;d say that the question is about what you do in your application. The prints you aksed about are clearly placeholders for real work. What kind of work? How much communication does it need? Etc.  That would determine whether or not you need semaphores (or what else you may or not need)."}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1488315877, "post_id": 42498617, "comment_id": 72174263, "body": "I&#39;m reading the input lines and filter some words from them (simplifying the problem here). Then I should write the result lines into a file, in order to the next process can read it and make new work with them. @zdim"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1488316201, "post_id": 42498617, "comment_id": 72174438, "body": "And it doesn&#39;t matter that the output is no longer in order?"}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1488316374, "post_id": 42498617, "comment_id": 72174543, "body": "@PerlDuck No, it doesn&#39;t matter, in fact, they are unsorted"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1488316495, "post_id": 42498617, "comment_id": 72174602, "body": "@Iv&#225;nRodr&#237;guezTorres  I see. Then you can either have each thread write to its own file, which then need be merged -- or (better, I&#39;d say) as <a href=\"http://stackoverflow.com/a/42517799/4653379\">PelrDuck says</a> (in a comment) push results to a queue which is printed by a separate thread.  You&#39;ll have serial writing but I don&#39;t see a way to avoid that.  (If you turn off buffering and start locking threads it&#39;s going to slow down <i>a lot</i>.)  Also, you can set the writing to go along with processing, as soon as messages are on their queue."}], "answers": [{"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 4, "last_activity_date": 1488315071, "last_edit_date": 1488315071, "creation_date": 1488312491, "answer_id": 42517799, "question_id": 42498617, "link": "https://stackoverflow.com/questions/42498617/missing-characters-while-reading-input-with-threads/42517799#42517799", "title": "Missing characters while reading input with threads", "body": "<p>I tried your program and got similar (wrong) results. Instead of <code>Thread::Semaphore</code> I used <code>lock</code> from <a href=\"http://perldoc.perl.org/threads/shared.html\" rel=\"nofollow noreferrer\"><code>threads::shared</code></a> around the <code>print</code> as it's simpler to use than T::S, i.e.:</p>\n\n<pre><code>use threads;\nuse threads::shared;\n...\nmy $mtx : shared;\n\nsub worker\n{\n    my ($job) = @_;\n    for (@$job) {\n        lock($mtx); # (b)locks\n        print $_;\n                    # autom. unlocked here\n    }\n}\n...\n</code></pre>\n\n<p>The global variable <code>$mtx</code> serves as a mutex. Its value doesn't matter, even <code>undef</code> (like here) is ok.\nThe call to <code>lock</code> blocks and returns only if no other threads currently holds the lock on that variable.\nIt automatically unlocks (and thus makes <code>lock</code> return) when it goes out of scope. In this sample that happens\nafter every single iteration of the <code>for</code> loop; there's no need for an extra <code>{\u2026}</code> block.</p>\n\n<p>Now we have syncronized the <code>print</code> calls\u2026</p>\n\n<p><strong>But</strong> this didn't work either, because <code>print</code> does buffered I/O (well, only O). So I forced unbuffered output:</p>\n\n<pre><code>use threads;\nuse threads::shared;\n...\nmy $mtx : shared;\n$| = 1;  # force unbuffered output\n\nsub worker\n{\n    # as above\n}\n...\n</code></pre>\n\n<p>and then it worked. To my surprise I could then remove the <code>lock</code> and it still worked. Perhaps by accident. Note that your script will run significantly slower without buffering.</p>\n\n<p>My conclusion is: you're <a href=\"http://perl.plover.com/FAQs/Buffering.html\" rel=\"nofollow noreferrer\">suffering from buffering</a>.</p>\n"}], "owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 1, "accepted_answer_id": 42517799, "answer_count": 1, "score": 3, "last_activity_date": 1488315071, "creation_date": 1488245221, "last_edit_date": 1495540450, "question_id": 42498617, "link": "https://stackoverflow.com/questions/42498617/missing-characters-while-reading-input-with-threads", "title": "Missing characters while reading input with threads", "body": "<p>Let's say we have a script which open a file, then read it line by line and print the line to the terminal. We have a sigle thread  and a multithread version.</p>\n\n<p><strong>The problem is than the resulting output of both scripts is almost the same, but not exactly</strong>. In the multithread versions there are about ten lines which missed the first 2 chars. I mean, if the real line is something line \"Stackoverflow rocks\", I obtain \"ackoverflow rocks\". </p>\n\n<p>I think that this is related to some race condition since if I adjust the parameters to create a lot of little workers, I get more faults than If I use less and bigger workers.</p>\n\n<p>The single thread is like this:</p>\n\n<pre><code>$file = \"some/file.txt\";\nopen (INPUT, $file) or die \"Error: $!\\n\";\n\nwhile ($line = &lt;STDIN&gt;) {\n    print $line;\n}\n</code></pre>\n\n<p>The multithread version make's use of the thread queue and this implementation is based on the <a href=\"https://stackoverflow.com/users/589924/ikegami\">@ikegami</a> approach:</p>\n\n<pre><code>use threads            qw( async );\nuse Thread::Queue 3.01 qw( );\n\nuse constant NUM_WORKERS    =&gt; 4;\nuse constant WORK_UNIT_SIZE =&gt; 100000;\n\nsub worker {\n    my ($job) = @_;\n    for (@$job) {\n        print $_;\n    }\n}\n\nmy $q = Thread::Queue-&gt;new();\n\n\nasync { while (defined( my $job = $q-&gt;dequeue() )) { worker($job); } }\n    for 1..NUM_WORKERS;\n\nmy $done = 0;    \n\nwhile (!$done) {\n    my @lines;\n\n    while (@lines &lt; WORK_UNIT_SIZE) {\n        my $line = &lt;&gt;;\n        if (!defined($line)) {\n            $done = 1;\n            last;\n        }\n\n    push @lines, $line;\n}\n\n$q-&gt;enqueue(\\@lines) if @lines;\n}\n\n$q-&gt;end();\n$_-&gt;join for threads-&gt;list;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1488240947, "post_id": 42497984, "comment_id": 72135363, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/8372443/creating-an-array-reference-to-hash-values\">Creating an array reference to hash values</a>"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1488241088, "post_id": 42497984, "comment_id": 72135406, "body": "Another possible dup target: <a href=\"http://stackoverflow.com/questions/2065579/how-do-i-return-a-list-as-an-array-reference-in-perl\">How do I return a list as an array reference in Perl?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 537, "user_id": 4889818, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6eff6321f38676111fedcac92f91a2b?s=128&d=identicon&r=PG&f=1", "display_name": "newguy", "link": "https://stackoverflow.com/users/4889818/newguy"}, "edited": false, "score": 0, "creation_date": 1488247881, "post_id": 42498026, "comment_id": 72136859, "body": "Thanks, that&#39;s what I was looking for!"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 4, "last_activity_date": 1488240154, "creation_date": 1488240154, "answer_id": 42498026, "question_id": 42497984, "link": "https://stackoverflow.com/questions/42497984/perl-assign-list-returned-by-func-as-a-ref-in-a-hashmap-value/42498026#42498026", "title": "perl: assign list returned by func as a ref in a hashmap value", "body": "<p>You are looking for the construction</p>\n\n<pre><code>my %hashmap =\n(\n  \"stuff\" =&gt; [ glob(\"foo\") ]\n);\n</code></pre>\n"}], "owner": {"reputation": 537, "user_id": 4889818, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6eff6321f38676111fedcac92f91a2b?s=128&d=identicon&r=PG&f=1", "display_name": "newguy", "link": "https://stackoverflow.com/users/4889818/newguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 42498026, "answer_count": 1, "score": 0, "last_activity_date": 1488240154, "creation_date": 1488239910, "question_id": 42497984, "link": "https://stackoverflow.com/questions/42497984/perl-assign-list-returned-by-func-as-a-ref-in-a-hashmap-value", "title": "perl: assign list returned by func as a ref in a hashmap value", "body": "<p>What I am trying to do is assign the list returned to me by glob to a value in a hashmap. I am aware value is scalar and therefore it must be assigned as a reference. For example this would work:</p>\n\n<pre><code>my @stuff = glob(\"foo\");\nmy %hashmap =\n(\n  \"stuff\" =&gt; \\@stuff\n);\n</code></pre>\n\n<p>However I want to do it all at once. Is that possible? This doesn't work:</p>\n\n<pre><code>my %hashmap =\n(\n  \"stuff\" =&gt; \\@{glob(\"foo\")}\n);\n</code></pre>\n"}, {"tags": ["linux", "perl", "shell", "awk", "sed"], "comments": [{"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 1, "creation_date": 1488225174, "post_id": 42494316, "comment_id": 72128320, "body": "What is more than one error code in one line has error description in <code>a.txt</code>?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1488227200, "post_id": 42494316, "comment_id": 72129399, "body": "And if you don&#39;t at least <i>try</i> to do it with your limited scripting skills, how will you ever get any better?"}, {"owner": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "edited": false, "score": 0, "creation_date": 1488232876, "post_id": 42494316, "comment_id": 72132330, "body": "@ Matt Jacob, I have posted this question with an intention of getting ideas to approach this problem in the proper manner. I am just being honest in my above question that without some tips I tend to fall in the trap of using loops to read line by line."}, {"owner": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "edited": false, "score": 0, "creation_date": 1488233077, "post_id": 42494316, "comment_id": 72132432, "body": "@ anubhava, the file a.txt is something I got to create via my script, it will always contain one error code and a description in each line."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1488236554, "post_id": 42494316, "comment_id": 72133957, "body": "On SO, people like to see some effort or attempt at solving the problem on the part of the person asking the question. Even if it&#39;s just a list of steps that you think you <i>might</i> take, something is better than nothing. The way your question is currently written sounds like a requirements document for someone you&#39;ve hired to do the work for you."}, {"owner": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "edited": false, "score": 0, "creation_date": 1488236863, "post_id": 42494316, "comment_id": 72134069, "body": "Okay Matt Jocob, I do understand your view, I will edit the question I posted tomorrow, to include the solution direction I was trying too :)"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "edited": false, "score": 0, "creation_date": 1488234329, "post_id": 42494585, "comment_id": 72133049, "body": "@ Akshay Hedge, thank you very much for pointing the typo in the sample input file. I am very interested in trying the &quot;Looking for exact match&quot; solution direction."}, {"owner": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "edited": false, "score": 0, "creation_date": 1488234420, "post_id": 42494585, "comment_id": 72133094, "body": "The &quot;Looking for just error code&quot; idea is not robust since the numbers  in the substr can be the same for 2 different error codes"}, {"owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "reply_to_user": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "edited": false, "score": 0, "creation_date": 1488250224, "post_id": 42494585, "comment_id": 72137468, "body": "@DineshKumar: Ok if that is the case 1st will do your job, I deleted second one"}, {"owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "reply_to_user": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "edited": false, "score": 0, "creation_date": 1488250279, "post_id": 42494585, "comment_id": 72137475, "body": "Downvoters I willl be glad if you can throw your comment as well, why voted down ?"}, {"owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "reply_to_user": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "edited": false, "score": 0, "creation_date": 1488251019, "post_id": 42494585, "comment_id": 72137646, "body": "@DineshKumar: there is one more typo <code>MN-2564</code> in your <code>b.txt</code>, I just fixed it"}, {"owner": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "edited": false, "score": 0, "creation_date": 1488273800, "post_id": 42494585, "comment_id": 72147235, "body": "Hi Akshay Hedge, the solution worked like a charm for me. Thank you so much.  Would you be able to explain this part of your solution, <code>FNR==NR{error[$1]=$NF;next}</code>I would like to use it elsewhere in my script"}, {"owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "reply_to_user": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "edited": false, "score": 0, "creation_date": 1488275670, "post_id": 42494585, "comment_id": 72148534, "body": "@DineshKumar: added explanation"}, {"owner": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "edited": false, "score": 1, "creation_date": 1488276327, "post_id": 42494585, "comment_id": 72149007, "body": "@ Akshay Hedge, Thank you very much, now I can use this idea for a similar problem I am facing with a different set of data."}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 1, "creation_date": 1488310638, "post_id": 42494585, "comment_id": 72171580, "body": "@Akshay: regarding downvotes, two useful tips: (1) downvoters who have not commented will very rarely come back to explain their reasoning. They have chosen to remain anonymous, will likely wish to remain that way, and will not see your question to them anyway. (2) We can however guess why an answer is downvoted. Your work looks extremely helpful, so my guess is that a reader was frustrated that you helped someone who may not have made any effort themselves at all, and who correctly believes that someone will do free work for them."}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 1, "creation_date": 1488310832, "post_id": 42494585, "comment_id": 72171685, "body": "Ultimately it is up to you whether you answer a question, and sometimes a question asker is so stuck that it is just nice to give them the assistance they need. However, we try to balance this out by trying <i>not</i> to encourage the idea that Stack Overflow is a platform for specifying requirements and expecting volunteers to complete the whole thing."}, {"owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "reply_to_user": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1488342418, "post_id": 42494585, "comment_id": 72182867, "body": "@halfer: Whatever you said is true, but for right solution if you receive downvote, it is really discouraging, as you know we all are volunteer here, not paid to help anyone, during our free time, or we make our time free to help someone,  it is very bad  if reader shows his frustration on us.  even if you give complete solution you get downvote, and incomplete partial solution also you get downvote, may be someone is targeting me as a anonymous user, ultimately either I should stop answering or I should delete answer which given already."}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 1, "creation_date": 1488356618, "post_id": 42494585, "comment_id": 72188978, "body": "@Akshay: you&#39;re worrying about DVs too much - don&#39;t take them personally. You&#39;ve received 35+ and 2- so you have profited just fine from this answer. Even if you make a loss, there is satisfaction to be had in knowing you helped someone, right? <code>:-)</code>"}, {"owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "reply_to_user": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 1, "creation_date": 1488358323, "post_id": 42494585, "comment_id": 72190081, "body": "@halfer: True, thanks for encouraging, your encourage means a lot for me."}], "tags": [], "owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "is_accepted": true, "score": 1, "last_activity_date": 1488275586, "last_edit_date": 1488275586, "creation_date": 1488225194, "answer_id": 42494585, "question_id": 42494316, "link": "https://stackoverflow.com/questions/42494316/match-pattern-in-file-and-use-found-strings-to-extract-lines-containing-the-stri/42494585#42494585", "title": "Match pattern in file and use found strings to extract lines containing the strings in another file, in GNU/Linux", "body": "<p><strong>Looks for exact match</strong></p>\n\n<pre><code>awk -F'[,:]' -v OFS=',' '\n FNR==NR{error[$1]=$NF;next}\n { \n     for(i=1; i&lt;=NF;i++)if($i in error)$i=$i\":\"error[$i]\n }1' a.txt b.txt &gt;c.txt\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<pre><code>awk -F'[,:]' -v OFS=',' '                 # Call awk, set input field sep\n                                          # , and : awk supports multiple field sep\n                                          # and output field sep as comma\n\n # Here we read file a.txt\n\n FNR==NR{                                 # this is true when awk reads first file\n                                          # When awk reads from the multiple input file, \n                                          # NR variable will give the total number \n                                          # of records relative to all the input file. \n                                          # FNR will give you number of records \n                                          # for each input file.\n\n           error[$1]=$NF;                 # populate array named error\n                                          # such that array index is col1\n                                          # and array value is last field of record\n                                          # NF gives no of fields in current record\n\n           next                           # The next statement forces awk to immediately \n                                          # stop processing the current record and \n                                          # go on to the next record \n\n }\n\n # Here we read file b.txt\n\n {\n     # NF gives no fields in current record,\n     # start loop from first field/column to last field/column( NF )\n     # increment by 1 \n\n     for(i=1; i&lt;=NF;i++)\n\n             # check if column value exists in array error\n\n              if($i in error)\n\n                     # if above if statement is true, then we \n                     # have error description so\n                     # modify current column \n                     # current column = current column : and your description\n                     # which exists in error array\n\n                     $i=$i\":\"error[$i]\n\n }1                  # 1 at then does default operation print $0 (print current row/record)\n ' a.txt b.txt &gt;c.txt\n</code></pre>\n\n<p><strong>Input</strong></p>\n\n<pre><code>$ cat a.txt \nEU-1568: system not initializing\nER-55R8: fatal error on platform xx22\nMM-2564: Driver not initialized\nLO-24DE: Lot failed\nSY-FC25: System error on domain\netc etc.....\n\n$ cat b.txt \nLO-5645,SE-DH68,MY-2255,MI-9878,SY-FC25,\nER-55R8,LO-5645,\nEU-1C07,ER-9871,EY-5523,MM-2564,\nFO-D389,XU-2659,EU-1568,\netc etc....\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ awk -F'[,:]' -v OFS=',' '\nFNR==NR{error[$1]=$NF;next}\n{ \n     for(i=1; i&lt;=NF;i++)if($i in error)$i=$i\":\"error[$i]\n}1' a.txt b.txt\nLO-5645,SE-DH68,MY-2255,MI-9878,SY-FC25: System error on domain,\nER-55R8: fatal error on platform xx22,LO-5645,\nEU-1C07,ER-9871,EY-5523,MM-2564: Driver not initialized,\nFO-D389,XU-2659,EU-1568: system not initializing,\netc etc....\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 42494585, "answer_count": 1, "score": -1, "last_activity_date": 1488310411, "creation_date": 1488224297, "last_edit_date": 1488310411, "question_id": 42494316, "link": "https://stackoverflow.com/questions/42494316/match-pattern-in-file-and-use-found-strings-to-extract-lines-containing-the-stri", "title": "Match pattern in file and use found strings to extract lines containing the strings in another file, in GNU/Linux", "body": "<p>I am a newbie to the awesome world of shell scripting.</p>\n\n<p>File <code>b.txt</code> contains error codes in comma separated text format. The error codes can be matched with this pattern - '<code>[A-Z]\\{2\\}-[A-Z0-9]\\{4\\}</code>'. Example of <code>b.txt</code></p>\n\n<pre><code>LO-5645,SE-DH68,MY-2255,MI-9878,SY-FC25,\nER-55R8,LO-5645,\nEU-1C07,ER-9871,EY-5523,MM-2564,\nFO-D389,XU-2659,EU-1568,\netc etc....\n</code></pre>\n\n<p>File <code>a.txt</code> contains in each line a error code and a description of the error code. Example of <code>a.txt</code>:</p>\n\n<pre><code>EU-1568: system not initializing\nER-55R8: fatal error on platform xx22\nMM-2564: Driver not initialized\nLO-24DE: Lot failed\nSY-FC25: System error on domain\netc etc.....\n</code></pre>\n\n<p>I want to combine info in these two files such that I can create a file <code>c.txt</code>, that contains the comma seperated errors along with description of the error message extracted from <code>b.txt</code>.</p>\n\n<p>Example of intended result in <code>c.txt</code></p>\n\n<pre><code>LO-5645,SE-DH68,MY-2255,MI-9878,SY-FC25: System error on domain,\nER-55R8: fatal error on platform xx22,LO-5645,\nEU-1C07,ER-9871,EY-5523,MM-2564: Driver not initialized,\nFO-D389,XU-2659,EU-1568: system not initializing,\netc etc...\n</code></pre>\n\n<p>My idea to approach this problem: I was trying to use a while loop to read line by line b.txt, and use <code>grep -o</code> to match exactly the pattern of the error codes into a array variable. Then using a internal <code>For</code> loop I try to read one element of this array at a time and match lines containing the error code in a.txt.</p>\n\n<p>It would be great if I can get some of your ideas on how I can approach this solution in a better way.</p>\n\n<p>Awk, Sed, grep, perl, cut are all welcome.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1488224132, "post_id": 42494021, "comment_id": 72127715, "body": "Do you want encryption (meaning you&#39;d have to store a key) or just obfuscation (you don&#39;t need a key, just a decoder)?"}, {"owner": {"reputation": 3199, "user_id": 2759385, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e5fbf51ed249b017926f975b2999d2d?s=128&d=identicon&r=PG&f=1", "display_name": "Ahdee", "link": "https://stackoverflow.com/users/2759385/ahdee"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488226466, "post_id": 42494021, "comment_id": 72129032, "body": "@ikegami yes that is the more correct term obfuscation - that is what I was intending. Thanks."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488228886, "post_id": 42494021, "comment_id": 72130364, "body": "Then install <code>rot13</code>, or write your own: <code>perl -e&#39;my %map; @map{&quot;a&quot;..&quot;z&quot;, &quot;A&quot;..&quot;Z&quot;} = (&quot;n&quot;..&quot;z&quot;, &quot;a&quot;..&quot;m&quot;, &quot;N&quot;..&quot;Z&quot;, &quot;A&quot;..&quot;M&quot;); print s&#47;([a-zA-Z])&#47;$map{$1}&#47;rg while &lt;&gt;;&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1488228168, "last_edit_date": 1488228168, "creation_date": 1488225634, "answer_id": 42494698, "question_id": 42494021, "link": "https://stackoverflow.com/questions/42494021/scramble-text-in-perl/42494698#42494698", "title": "Scramble text in PERL", "body": "<p>Usage:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ echo abcdef &gt;file\n\n$ crypt genkey &gt;key\n\n$ crypt encrypt --key \"$( cat key )\" file &gt;file.aes\n\n$ crypt decrypt --key \"$( cat key )\" file.aes\nabcdef\n</code></pre>\n\n<p><code>crypt</code> uses AES with proper padding, salting and chaining:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature qw( say );\n\nuse Crypt::CBC     qw( );\nuse File::Basename qw( basename );\nuse Getopt::Long   qw( );\n\n\nuse constant KEY_LENGTH =&gt; 32;\n\n\nsub random_bytes {\n    my $n = shift;\n    open(my $fh, '&lt;:raw', '/dev/urandom')\n        or die(\"Can't generate random bytes: Can't open /dev/urandom: $!\\n\");\n\n    read($fh, my $buf, $n)\n        or die(\"Can't generate random bytes: Error reading from /dev/urandom: $!\\n\");\n\n    close($fh)\n        or die(\"Can't generate random bytes: Error reading from /dev/urandom: $!\\n\");\n\n    length($buf) == $n\n        or die(\"Internal error\");\n\n    return $buf;\n}\n\n\nsub random_bytes_hex {\n    my $n = shift;\n    return unpack('H*', random_bytes($n));\n}\n\n\n# $key_hex = generate_aes_key_hex();\nsub generate_aes_key_hex {\n    return random_bytes_hex(KEY_LENGTH);\n}\n\n\n# my $ciphertext_bin = aes_encrypt($key_bin_or_hex, $plaintext_bin);\nsub aes_encrypt {\n    my  $key                         =    shift;     # 32 random bytes, or 64 random hex characters.\n    our $plaintext; local *plaintext = \\( shift );   # Bytes (e.g. UTF-8) to encrypt.\n\n    if (length($key) == 2*KEY_LENGTH &amp;&amp; $key =~ /^[0-9a-fA-F]*\\z/) {\n        $key = pack('H*', $key);\n    }\n\n    length($key) == KEY_LENGTH\n        or die(\"Invalid key\\n\");\n\n    utf8::downgrade($plaintext, 1)\n        or die(\"Plaintext contains non-bytes\\n\");\n\n    my $cipher = Crypt::CBC-&gt;new(\n        -cipher =&gt; 'Rijndael',\n        -key    =&gt; $key,\n        -header =&gt; 'salt',\n    );\n\n    return $cipher-&gt;encrypt($plaintext);\n}\n\n\n# my $plaintext_bin = aes_decrypt($key_bin_or_hex, $ciphertext_bin);\nsub aes_decrypt {\n    my  $key                           =    shift;     # 32 random bytes, or 64 random hex characters.\n    our $ciphertext; local *ciphertext = \\( shift );   # Bytes to decrypt.\n\n    if (length($key) == 2*KEY_LENGTH &amp;&amp; $key =~ /^[0-9a-fA-F]*\\z/) {\n        $key = pack('H*', $key);\n    }\n\n    length($key) == KEY_LENGTH\n        or die(\"Invalid key\\n\");\n\n    utf8::downgrade($ciphertext, 1)\n        or die(\"Ciphertext contains non-bytes\\n\");\n\n    my $cipher = Crypt::CBC-&gt;new(\n        -cipher =&gt; 'Rijndael',\n        -key    =&gt; $key,\n        -header =&gt; 'salt',\n    );\n\n    return $cipher-&gt;decrypt($ciphertext);\n}\n\n\nsub genkey {\n    say generate_aes_key_hex();\n}\n\n\nsub encrypt {\n    my $key_hex = shift;\n\n    local $/;\n    my $plaintext;\n    while ( my $file = &lt;&gt; ) {\n        $plaintext .= $file;\n    }\n\n    say aes_encrypt($key_hex, $plaintext);\n}\n\n\nsub decrypt {\n    my $key_hex = shift;\n\n    local $/;\n    my $ciphertext;\n    while ( my $file = &lt;&gt; ) {\n        $ciphertext .= $file;\n    }\n\n    print aes_decrypt($key_hex, $ciphertext);\n}\n\n\nsub usage {\n    my $prog = basename($0);\n\n    if ( my ($msg) = @_ ) {\n        chomp($msg);\n        warn(\"$msg\\n\");\n    }\n\n    warn(\"Use $prog --help for more information\\n\");\n    exit(1);\n}\n\n\nsub help {\n    my $prog = basename($0);\n\n    print(\"usage: $prog [options] genkey [genkey_options] [--]\\n\");\n    print(\"       $prog [options] encrypt [encrypt_options] [--] [file]\\n\");\n    print(\"       $prog [options] decrypt [decrypt_options] [--] [file]\\n\");\n    print(\"       $prog --help\\n\");\n    print(\"\\n\");\n    print(\"       genkey: Generate a key. It's output to stdout.\\n\");\n    print(\"\\n\");\n    print(\"       encrypt: Encrypts the contents of the named file or stdin.\\n\");\n    print(\"       The encrypted contents are output to stdout\\n\");\n    print(\"\\n\");\n    print(\"       decrypt: Decrypt the contents of the named file or stdin.\\n\");\n    print(\"       The decrypted contents are output to stdout\\n\");\n    print(\"\\n\");\n    print(\"Global options:\\n\");\n    print(\"    [none at this time]\\n\");\n    print(\"\\n\");\n    print(\"\\\"genkey\\\" options:\\n\");\n    print(\"    [none at this time]\\n\");\n    print(\"\\n\");\n    print(\"\\\"encrypt\\\" options:\\n\");\n    print(\"    --key key_hex  (Required)\\n\");\n    print(\"\\n\");\n    print(\"\\\"decrypt\\\" options:\\n\");\n    print(\"    --key key_hex  (Required)\\n\");\n    exit(0);\n}\n\n\n{\n    Getopt::Long::Configure(qw( posix_default no_ignore_case ));\n    Getopt::Long::GetOptions(\n        'help|h|?' =&gt; \\&amp;help,\n    )\n        or usage();\n\n    defined( my $op = shift(@ARGV) )\n        or usage(\"Invalid number of arguments\");\n\n    if ($op eq 'genkey') {\n        my $key;\n        Getopt::Long::GetOptions(\n        )\n            or usage();\n\n        @ARGV == 0\n            or usage(\"Invalid number of arguments\");\n\n        genkey();\n    }\n    elsif ($op eq 'encrypt') {\n        my $key;\n        Getopt::Long::GetOptions(\n            'key|k=s' =&gt; \\$key,\n        )\n            or usage();\n\n        defined($key)\n            or usage(\"Key required\");\n\n        chomp($key);\n        length($key) == 2*KEY_LENGTH &amp;&amp; $key =~ /^[0-9a-fA-F]*\\z/\n            or usage(\"Invalid key\");\n\n        encrypt($key);\n    }\n    elsif ($op eq 'decrypt') {\n        my $key;\n        Getopt::Long::GetOptions(\n            'key|k=s' =&gt; \\$key,\n        )\n            or usage();\n\n        defined($key)\n            or usage(\"Key required\");\n\n        length($key) == 2*KEY_LENGTH &amp;&amp; $key =~ /^[0-9a-fA-F]*\\z/\n            or usage(\"Invalid key\");\n\n        decrypt($key);\n    }\n    else {\n        usage(\"Invalid operation\");\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3199, "user_id": 2759385, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e5fbf51ed249b017926f975b2999d2d?s=128&d=identicon&r=PG&f=1", "display_name": "Ahdee", "link": "https://stackoverflow.com/users/2759385/ahdee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1488228168, "creation_date": 1488223144, "last_edit_date": 1488226513, "question_id": 42494021, "link": "https://stackoverflow.com/questions/42494021/scramble-text-in-perl", "title": "Scramble text in PERL", "body": "<p>is there an automatic way to generate a decoder key and scramble the text (in ASCII) and be able to retrieve it? For example, </p>\n\n<pre><code>the dog ran to the fox \n</code></pre>\n\n<p>I could make a hash key for a decoder </p>\n\n<pre><code>    my %hash = {\n    'a' =&gt; 'Z\"... so on for all the alphabet \n    }\n    and do a regex substitution so the the sentence is \nsimply being replaced with a 1:1 alphabet key.\n</code></pre>\n\n<p>but I'm wondering if there has already been a module that can build a key at random, encode and be able to decode easily in the future?<br>\nAs pointed out below what I want is more of obfuscation instead of encryption.\nthanks! \nAhdee</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1488216383, "post_id": 42491804, "comment_id": 72123297, "body": "Note that one shouldn&#39;t use <code>$a</code> and <code>$b</code>. It can interfere with <code>sort</code> and other subs."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1488228584, "last_edit_date": 1488228584, "creation_date": 1488215980, "answer_id": 42491911, "question_id": 42491804, "link": "https://stackoverflow.com/questions/42491804/xor-calculator-in-perl-array-with-output-from-xor-cal/42491911#42491911", "title": "XOR calculator in perl array with output from xor cal", "body": "<p>Using xor on strings:</p>\n\n<pre><code>my $x_hex = '08 F6';\nmy $y_hex = '4C 6E';\n\nmy $x = pack('(H2)*', split(' ', $x_hex));   # my $x = \"\\x08\\xF6\";\nmy $y = pack('(H2)*', split(' ', $y_hex));   # my $y = \"\\x4C\\x6E\";\n\nmy $z = $x ^ $y;                             # my $z = \"\\x44\\x98\";\n\nmy $z_hex = join(' ', unpack('(H2)*', $z));  # my $z_hex = \"44 98\";\n</code></pre>\n\n<p>Using xor on numbers:</p>\n\n<pre><code>my $x_hex = '08 F6';\nmy $y_hex = '4C 6E';\n\nmy @x = map { hex($_) } split(' ', $x_hex);            # my @x = ( 0x08, 0xF6 );\nmy @y = map { hex($_) } split(' ', $y_hex);            # my @y = ( 0x4C, 0x6E );\n\nmy @z = map { $x[$_] ^ $y[$_] } 0..$#x;                # my @z = ( 0x44, 0x98 );\n\nmy $z_hex = join ' ', map { sprintf(\"%02X\", $_) } @z;  # my $z_hex = \"44 98\";\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 7631111, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206552597732614/picture?type=large", "display_name": "Prayoga Antaras", "link": "https://stackoverflow.com/users/7631111/prayoga-antaras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 42491911, "answer_count": 1, "score": -2, "last_activity_date": 1488228584, "creation_date": 1488215660, "last_edit_date": 1488216201, "question_id": 42491804, "link": "https://stackoverflow.com/questions/42491804/xor-calculator-in-perl-array-with-output-from-xor-cal", "title": "XOR calculator in perl array with output from xor cal", "body": "<p>how to make basic function for xor with array</p>\n\n<p>example:\nmy $a = \"08 F6\";\nmy $b = \"4C 6E\";</p>\n\n<p>output should be = 44 98</p>\n\n<p>like <a href=\"http://xor.pw/\" rel=\"nofollow noreferrer\">http://xor.pw/</a>?</p>\n"}, {"tags": ["perl", "csv"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488224598, "post_id": 42491425, "comment_id": 72127989, "body": "I don&#39;t see how your &quot;challenge&quot; differs from what your program already does. What do you mean by &quot;static content&quot;, and if the files don&#39;t have data appended from the CSV file then where does it come from?"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 7611688, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/575079da403f0c1cf947d5a5daf22779?s=128&d=identicon&r=PG&f=1", "display_name": "B. Juice", "link": "https://stackoverflow.com/users/7611688/b-juice"}, "edited": false, "score": 0, "creation_date": 1488317798, "post_id": 42491696, "comment_id": 72175268, "body": "I used a variation of this approach to accomplish my goal...thank you for the help!"}], "tags": [], "owner": {"reputation": 1143, "user_id": 869942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed28d50e20aae7b2559e39884bf419ae?s=128&d=identicon&r=PG", "display_name": "Bret Weinraub", "link": "https://stackoverflow.com/users/869942/bret-weinraub"}, "is_accepted": true, "score": 1, "last_activity_date": 1488215359, "creation_date": 1488215359, "answer_id": 42491696, "question_id": 42491425, "link": "https://stackoverflow.com/questions/42491425/how-to-extract-unique-fields-from-a-csv-file-using-a-perl-script/42491696#42491696", "title": "How to extract unique fields from a CSV file using a Perl script", "body": "<p>In perl you can a get a list of keys from an associative array like:</p>\n\n<pre><code>my @keys = keys %hash;\n</code></pre>\n\n<p>So something like this will work;</p>\n\n<pre><code>my %unique_first_values;\n</code></pre>\n\n<p>Then later in the loop.</p>\n\n<pre><code>$my_unique_first_values{$fields[0]} = 1;\n</code></pre>\n\n<p>You can then call 'keys' on the hash to get the unique values.   </p>\n\n<pre><code>@unique = keys %my_unique_virst_values;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "is_accepted": false, "score": 0, "last_activity_date": 1488215921, "creation_date": 1488215921, "answer_id": 42491884, "question_id": 42491425, "link": "https://stackoverflow.com/questions/42491425/how-to-extract-unique-fields-from-a-csv-file-using-a-perl-script/42491884#42491884", "title": "How to extract unique fields from a CSV file using a Perl script", "body": "<p>In order to \"create my second set of files while the inputs.csv file is open\" you're going to want to know if you've seen a value before.</p>\n\n<p>The conventional way to do this in Perl is to create a hash to store previously-seen values, and check-then-set in order to determine whether you've seen it, record that it has been seen, and go on. </p>\n\n<pre><code>if (exists($seen_before{$key})) {\n    # seen it\n} \nelse {\n    # new key!\n    $seen_before{$key} = 1;\n}\n</code></pre>\n\n<p>Given that you're going to be opening files and appending data, it might make sense to store a <strong>file handle</strong> in the hash instead of a <code>1</code>. That way, your <code># new key!</code> code could just be opening the file, and your <code># seen it</code> code could be a default condition (fall-through) writing the fields out. Something like this:</p>\n\n<pre><code>unless (exists($file_handle{$key})) {\n    $file_handle{$key} = open ... or die ...\n}\n\n# now we know it's in the hash, write the data:\nprint $file_handle{$key} ...\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 7611688, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/575079da403f0c1cf947d5a5daf22779?s=128&d=identicon&r=PG&f=1", "display_name": "B. Juice", "link": "https://stackoverflow.com/users/7611688/b-juice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 42491696, "answer_count": 2, "score": 0, "last_activity_date": 1488215921, "creation_date": 1488214688, "last_edit_date": 1488215378, "question_id": 42491425, "link": "https://stackoverflow.com/questions/42491425/how-to-extract-unique-fields-from-a-csv-file-using-a-perl-script", "title": "How to extract unique fields from a CSV file using a Perl script", "body": "<p>I have a CSV file with data that looks similar to this:</p>\n\n<pre><code>alpha,a,foo,bar\nalpha,b,foo,bar\nalpha,c,foo,bar\nbeta,d,foo,bar\nbeta,e,foo,bar   \n</code></pre>\n\n<p>I'm able to use the following code to successfully create two new files using the data:</p>\n\n<pre><code>open (my $FH, '&lt;', '/home/&lt;username&gt;/inputs.csv') || die \"ERROR Cannot read file\\n\";\nwhile (my $line = &lt;$FH&gt;) {\n    chomp $line;\n\n    my @fields = split \",\" , $line;\n    my $file = \"ziggy.$fields[0]\";\n    open (my $FH2, '&gt;&gt;', $file) || die \"ERROR Cannot open file\\n\";\n    print $FH2 \"$fields[1]\\n\";\n    print $FH2 \"$fields[2]\\n\";\n    print $FH2 \"$fields[3]\\n\\n\";\n    close $FH2;\n}\n</code></pre>\n\n<p>Basically, this code reads through the rows in the CSV file and creates content in files that are named based on the first field. So, the \"ziggy.alpha\" file has nine lines of content, while the \"ziggy.beta\" file has six lines of content. Note that I'm appending data to these files as the rows are being read via the \"while\" loop.</p>\n\n<p>My challenge: </p>\n\n<p>Following the data set example cited, I need to create a second pair of files that use the same \"first field\" naming convention (something like \"zaggy.alpha\" and \"zaggy.beta\"). The files will only be created once with static content written to them, and will not have additional data appended to them from the CSV file. </p>\n\n<p>My question:</p>\n\n<p>Is there a way to identify the unique values in the first field (\"alpha\" and \"beta\"), store them in a hash, then reference them in a \"while\" loop in order to create my second set of files while the inputs.csv file is open?</p>\n\n<p>Thanks in advance for any insight that can be provided!</p>\n"}, {"tags": ["perl", "variables", "warnings"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488211266, "post_id": 42488646, "comment_id": 72119930, "body": "Re &quot;<i>I don&#39;t think there is a way to detect that you have specified a non-existent variable <code>$BAR::foo</code></i>&quot;, No, that&#39;s not it. If Perl can tell that the variable wasn&#39;t used, it can do so whether no matter how it&#39;s named in the code."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 9, "last_activity_date": 1488210630, "last_edit_date": 1592644375, "creation_date": 1488206818, "answer_id": 42488646, "question_id": 42488473, "link": "https://stackoverflow.com/questions/42488473/why-does-perl-not-warn-if-using-an-undeclared-variable-in-another-namespace-an/42488646#42488646", "title": "Why does Perl not warn if using an undeclared variable in another namespace - and how can I be warned about this?", "body": "<p>When you fully specify the namespace in which a variable belongs, <code>perl</code> assumes you know what you are doing. See <a href=\"http://perldoc.perl.org/strict.html\" rel=\"noreferrer\"><code>perldoc strict</code></a>:</p>\n<blockquote>\n<h3><code>strict vars</code></h3>\n<p>This generates a compile-time error if you access a variable that was neither explicitly declared (using any of <code>my</code>, <code>our</code>, <code>state</code>, or <code>use vars</code>) nor fully qualified.</p>\n</blockquote>\n<p>I don't think there is a way to detect that you have specified a non-existent variable <code>$BAR::foo</code>. However, if the <code>BAR</code> package is under your control, you can avoid using package variables in the first place by mediating access to the state of <code>foo</code> using accessors, and hiding the variable from other modules.</p>\n<p>The answer to problems created by using global variables is not to use global variables.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1488213071, "last_edit_date": 1592644375, "creation_date": 1488211205, "answer_id": 42490239, "question_id": 42488473, "link": "https://stackoverflow.com/questions/42488473/why-does-perl-not-warn-if-using-an-undeclared-variable-in-another-namespace-an/42490239#42490239", "title": "Why does Perl not warn if using an undeclared variable in another namespace - and how can I be warned about this?", "body": "<blockquote>\n<h3><code>strict vars</code></h3>\n<p>This generates a compile-time error if you access a variable that was neither explicitly declared (using any of <code>my</code>, <code>our</code>, <code>state</code>, or <code>use vars</code>) nor fully qualified.</p>\n</blockquote>\n<p>Perl &quot;trusts&quot; users when they use fully-qualified var names. I suspect it's to allow users to sets config variables in modules that don't use <code>use strict;</code>.</p>\n<p>For example, let's look at the following snippet using Data::Dumper:</p>\n<pre><code>local $Data::Dumper::Useqq = 1;\nprint(Dumper($s));\n</code></pre>\n<p>Even long after <code>use strict;</code> was introduced, Data::Dumper didn't declare <code>$Useqq</code>. There wouldn't even have been a mechanism to do so before <code>use strict;</code>! So the above snippet would be using an undeclared variable. That means strict code would not have been able to use Data::Dumper in the above fashion if <code>strict vars</code> was enforced covered fully-qualified names.</p>\n<p>It doesn't make sense to prevent strict code from using modules that aren't strict-safe, so <code>strict vars</code> doesn't cover fully-qualified names. These are rare enough and easily-identifiable enough to simply have programmers take more care when using them.</p>\n<hr />\n<blockquote>\n<p><em>I am wondering if it is possible to make Perl me warn about using undeclared variables in other namespaces, too.</em></p>\n</blockquote>\n<p>I don't know of existing solutions. It might be possible to hook into Perl to do that, but it would be very hard.</p>\n<p>Keep in mind that Perl already warns you if you only use a package variable once, so this should help you catch typos.</p>\n"}], "owner": {"reputation": 35370, "user_id": 180275, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4GALY.jpg?s=128&g=1", "display_name": "Ren&#233; Nyffenegger", "link": "https://stackoverflow.com/users/180275/ren%c3%a9-nyffenegger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 42488646, "answer_count": 2, "score": 3, "last_activity_date": 1488213071, "creation_date": 1488206400, "question_id": 42488473, "link": "https://stackoverflow.com/questions/42488473/why-does-perl-not-warn-if-using-an-undeclared-variable-in-another-namespace-an", "title": "Why does Perl not warn if using an undeclared variable in another namespace - and how can I be warned about this?", "body": "<p>I am using <code>strict</code> and <code>warning</code> in my Perl scripts to be notified if I am using undeclared variables. Thus, the interpreter will warn that <code>$foo</code> is undeclared in the following scriptlet:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\n$foo = 'bar';\nprint ($foo);\n</code></pre>\n\n<p>However, if I use an undeclared variable in another namespace, I am not warned. The following scriptlet runs without warning whatsoever.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\n$BAR::foo = 'bar';\nprint ($BAR::foo);\n</code></pre>\n\n<p>Why is this difference?</p>\n\n<p>Since I have lost quite some time figuring out exactly this problem, albeit in a much larger context, I am wondering if it is possible to make Perl me warn about using undeclared variables in other namespaces, too.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1488201638, "post_id": 42486716, "comment_id": 72113165, "body": "Try put a star in front of <code>STDOUT</code>, i.e. use a <a href=\"http://perldoc.perl.org/perldata.html#Typeglobs-and-Filehandles\" rel=\"nofollow noreferrer\">typeglob</a>: <code>print { $OK ? *STDOUT : *STDERR } &quot;stuff\\n&quot;;</code>"}, {"owner": {"reputation": 197, "user_id": 3485767, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d2770a5ff50ccf523cfd329f69c74280?s=128&d=identicon&r=PG&f=1", "display_name": "Mazze", "link": "https://stackoverflow.com/users/3485767/mazze"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1488201843, "post_id": 42486716, "comment_id": 72113292, "body": "Thank you, this solved it :) How am I supposed now to &quot;close&quot; the question?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1488201981, "post_id": 42486716, "comment_id": 72113386, "body": "See also <a href=\"http://stackoverflow.com/q/2242812/2173773\">Why do I have to use a * in front of a Perl bareword filehandle?</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1488202144, "post_id": 42486716, "comment_id": 72113529, "body": "Where in the docs did you find this? Please give us a link."}, {"owner": {"reputation": 197, "user_id": 3485767, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d2770a5ff50ccf523cfd329f69c74280?s=128&d=identicon&r=PG&f=1", "display_name": "Mazze", "link": "https://stackoverflow.com/users/3485767/mazze"}, "edited": false, "score": 0, "creation_date": 1488202379, "post_id": 42486716, "comment_id": 72113727, "body": "I did <code>perldoc -f print</code>. I found it on the web now at <a href=\"http://perldoc.perl.org/functions/print.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/print.html</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1488204244, "post_id": 42486716, "comment_id": 72114961, "body": "I&#39;ve submitted a patch to fix this - <a href=\"https://rt.perl.org/Public/Bug/Display.html?id=130880\" rel=\"nofollow noreferrer\">rt.perl.org/Public/Bug/Display.html?id=130880</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1488436825, "post_id": 42486716, "comment_id": 72232167, "body": "This will be fixed in an upcoming version of Perl - <a href=\"https://github.com/Perl/perl5/commit/83cad6954f449afbbab19c7edd8045745aae6345\" rel=\"nofollow noreferrer\">github.com/Perl/perl5/commit/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": true, "score": 10, "last_activity_date": 1488201913, "creation_date": 1488201913, "answer_id": 42486942, "question_id": 42486716, "link": "https://stackoverflow.com/questions/42486716/inline-selection-of-fd-as-in-docs-does-not-work-with-strict-refs/42486942#42486942", "title": "Inline selection of FD as in docs does not work with strict refs", "body": "<p>Try this:</p>\n\n<pre><code>print { $OK ? *STDOUT : *STDERR } \"stuff\\n\";\n</code></pre>\n\n<p>The asterisk means the typeglob. Since there is no sigils to denote a file handle, you have to use the typeglob sigil, the asterisk, instead.</p>\n"}, {"tags": [], "owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "is_accepted": false, "score": 5, "last_activity_date": 1488201942, "creation_date": 1488201942, "answer_id": 42486952, "question_id": 42486716, "link": "https://stackoverflow.com/questions/42486716/inline-selection-of-fd-as-in-docs-does-not-work-with-strict-refs/42486952#42486952", "title": "Inline selection of FD as in docs does not work with strict refs", "body": "<p>To prevent the error message <code>Bareword \"STDOUT\" not allowed while \"strict subs\" in use at ...</code> you'll have to use a typeglob:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict ;\nuse warnings ;\n\nmy $OK = 1 ;\n\nprintf { $OK ? *STDOUT : *STDERR } \"stuff\\n\" ;\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 3485767, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d2770a5ff50ccf523cfd329f69c74280?s=128&d=identicon&r=PG&f=1", "display_name": "Mazze", "link": "https://stackoverflow.com/users/3485767/mazze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 42486942, "answer_count": 2, "score": 5, "last_activity_date": 1611166737, "creation_date": 1488201201, "last_edit_date": 1611166737, "question_id": 42486716, "link": "https://stackoverflow.com/questions/42486716/inline-selection-of-fd-as-in-docs-does-not-work-with-strict-refs", "title": "Inline selection of FD as in docs does not work with strict refs", "body": "<p>In <a href=\"http://perldoc.perl.org/functions/print.html\" rel=\"nofollow noreferrer\">the perldoc for <code>print</code></a>, it says this should work:</p>\n<pre><code>print { $OK ? STDOUT : STDERR } &quot;stuff\\n&quot;;\n</code></pre>\n<p>But it does not with <code>use strict</code>, and when I then use quotes like</p>\n<pre><code>print { $OK ? &quot;STDOUT&quot; : &quot;STDERR&quot; } &quot;stuff\\n&quot;;\n</code></pre>\n<p>I get</p>\n<pre><code>Can't use string (&quot;STDOUT&quot;) as a symbol ref while &quot;strict refs&quot; in use ...\n</code></pre>\n<p>How can I get this structure to work without doing away with <code>use strict</code>?</p>\n"}, {"tags": ["arrays", "perl", "reference", "dereference"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488201005, "post_id": 42486223, "comment_id": 72112724, "body": "Why did you assign an array reference to an array in the first place?"}], "answers": [{"tags": [], "owner": {"reputation": 5417, "user_id": 7607970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3K8Ke.png?s=128&g=1", "display_name": "Psi", "link": "https://stackoverflow.com/users/7607970/psi"}, "is_accepted": true, "score": 1, "last_activity_date": 1488200049, "creation_date": 1488200049, "answer_id": 42486314, "question_id": 42486223, "link": "https://stackoverflow.com/questions/42486223/perl-reference-dereferencing-for-var1-a-b/42486314#42486314", "title": "Perl reference Dereferencing for @var1 = [($a, $b)]", "body": "<p>@var1 is an array of an array. So its only content is another array containing two values, $a and $b. </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$a2 = $var1[0][0];\n$b2 = $var1[0][1];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1488201002, "post_id": 42486628, "comment_id": 72112721, "body": "I started my answer with basically the same first sentence... :)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1488204353, "post_id": 42486628, "comment_id": 72115017, "body": "I&#39;d love to know why this answer has received a couple of downvotes."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1488201960, "last_edit_date": 1488201960, "creation_date": 1488200975, "answer_id": 42486628, "question_id": 42486223, "link": "https://stackoverflow.com/questions/42486223/perl-reference-dereferencing-for-var1-a-b/42486628#42486628", "title": "Perl reference Dereferencing for @var1 = [($a, $b)]", "body": "<p><code>@var1</code> is an array containing a single element. That single element (<code>$var[0]</code>) contains a reference to another array. That referenced array has two elements, containing the values of the variables <code>$a</code> and <code>$b</code>.</p>\n\n<p>So <code>$var[0]</code> contains an array reference. To get from an array reference to the elements of the referenced array, we use the look-up arrow, <code>-&gt;</code>.</p>\n\n<pre><code>print $var[0]-&gt;[0]; # The first element in the referenced array\nprint $var[0]-&gt;[1]; # The second element in the referenced array\n</code></pre>\n\n<p>There's one extra syntactic nicety that we can use here. When we have two sets of look-up brackets separated by only a look-up arrow, we can omit that arrow. So the expressions become.</p>\n\n<pre><code>print $var[0][0];\nprint $var[0][1];\n</code></pre>\n\n<p>Two points about your code:</p>\n\n<ul>\n<li><code>$a</code> and <code>$b</code> are special variables that are used in sorting subroutines. It is a bad idea to use them anywhere else.</li>\n<li>In your original assignment expression (<code>@var1 = [($a, $b)]</code>) the parentheses are unnecessary. Just <code>@var1 = [$a, $b]</code> would have done the same thing.</li>\n</ul>\n"}], "owner": {"reputation": 124, "user_id": 5752927, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oF0tN.jpg?s=128&g=1", "display_name": "Raghvendra", "link": "https://stackoverflow.com/users/5752927/raghvendra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "closed_date": 1488210155, "accepted_answer_id": 42486314, "answer_count": 2, "score": -3, "last_activity_date": 1488201960, "creation_date": 1488199759, "question_id": 42486223, "link": "https://stackoverflow.com/questions/42486223/perl-reference-dereferencing-for-var1-a-b", "closed_reason": "Needs details or clarity", "title": "Perl reference Dereferencing for @var1 = [($a, $b)]", "body": "<p>I have below expression in perl</p>\n\n<pre><code>@var1 = [($a, $b)]\n</code></pre>\n\n<p>Can anyone help me to deference the value stored in var1.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1488195950, "post_id": 42484915, "comment_id": 72109418, "body": "What is your question? Do you have a problem? Please indent your code properly so that it is readable."}, {"owner": {"reputation": 39, "user_id": 7364753, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9e35cb4543e9ca0b2f6915c42941575c?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/7364753/rim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488196376, "post_id": 42484915, "comment_id": 72109698, "body": "i didn&#39;t have a true result !!!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1488196465, "post_id": 42484915, "comment_id": 72109757, "body": "Okay. Please describe the result you get and how it is different from what you want. Thank you for tidying your program."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1488197340, "post_id": 42484915, "comment_id": 72110279, "body": "what the file1 and file2 contains?"}, {"owner": {"reputation": 39, "user_id": 7364753, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9e35cb4543e9ca0b2f6915c42941575c?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/7364753/rim"}, "edited": false, "score": 0, "creation_date": 1488197564, "post_id": 42484915, "comment_id": 72110421, "body": "i&#39;m sorry this is the first time that i publish a question in this forum, so file1 contains Stop words list, file2 is my text, i hope remove from my text (file2) all words existing in file1.. i hope that&#39;s clear now"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1488197673, "post_id": 42484915, "comment_id": 72110481, "body": "sample content is main role to understand the process hence could you please try to update the question with similar samples for further understand."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1488198483, "last_edit_date": 1488198483, "creation_date": 1488197909, "answer_id": 42485667, "question_id": 42484915, "link": "https://stackoverflow.com/questions/42484915/how-to-compare-two-arrays-string/42485667#42485667", "title": "how to compare two arrays string", "body": "<p>This problem would be easier to solve if you showed us the format of your two input files. But as you don't, this will be guesswork.</p>\n\n<p>I guess that your file of stopwords contains a single word on each line. In that case, each element in <code>@tabStopWords</code> and, therefore, each key in <code>%temp</code> will have newline at the end of them. This makes it extremely unlikely that any of the words in your source file will match these keys.</p>\n\n<p>You probably want to add:</p>\n\n<pre><code>chomp @tabStopWords;\n</code></pre>\n\n<p>to your code.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1488198843, "last_edit_date": 1488198843, "creation_date": 1488198028, "answer_id": 42485707, "question_id": 42484915, "link": "https://stackoverflow.com/questions/42484915/how-to-compare-two-arrays-string/42485707#42485707", "title": "how to compare two arrays string", "body": "<p>There are a couple of problems</p>\n\n<ul>\n<li><p>You don't <code>chomp</code> the contents of <code>@tabStopWords</code>, so each entry has a newline at the end</p></li>\n<li><p>You overwrite the contents of <code>@words</code> each time around the <code>while</code> loop with <code>@words = split(/ /, $_)</code> instead of adding to it</p></li>\n</ul>\n\n<p>This program will do what you want. I have added <code>use autodie</code> to avoid having to check the result of every <code>open</code>, and I have removed a couple of unused variables. Local variable names are better written using just lower-case letters and underscores, especially for readers whose first language isn't English</p>\n\n<p>I've used <code>split</code> on both files to reduce them both to individual words. Because <code>split</code> also removes newline characters there is no need for <code>chomp</code></p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse autodie;\n\nuse constant FICHIER_STOP_WORD =&gt; '/home/lenovo/Bureau/MesTravaux/LeskAlgo/DemoLesk/StopWordsList.txt';\nuse constant FICHIER_TEXTE     =&gt; '/home/lenovo/Bureau/MesTravaux/LeskAlgo/text1.txt';\nuse constant FICHIER_RESULAT   =&gt; '/home/lenovo/Bureau/MesTravaux/LeskAlgo/OriginalLeskResult';\n\n\nmy @tab_stop_words = do {\n    open my $fh1, \"&lt;:utf8\", FICHIER_STOP_WORD;\n    map { split } &lt;$fh1&gt;;\n};\n\nmy @words = do {\n    open my $fh1, \"&lt;:utf8\", FICHIER_TEXTE;\n    map { split } &lt;$fh1&gt;;\n};\n\nmy %words = map { $words[$_] =&gt; $_ } 0 .. $#words;\n\nopen my $fh_resultat, '&gt;:utf8', FICHIER_RESULAT;\n\nfor my $word ( @words ) {\n\n    my $position = $words{$word};\n\n    if ( defined $position ) {\n        print \"$word est pr\u00e9sent dans tab1 \u00e0 la position $position.\\n\";\n    }\n    else {\n        print \"$word n'est pas dans tab1.\\n\";\n        print $fh_resultat \"$word\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 124, "user_id": 7208743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2087289e2d292c565a792961070ec894?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Motani", "link": "https://stackoverflow.com/users/7208743/sagar-motani"}, "is_accepted": false, "score": 0, "last_activity_date": 1488356217, "creation_date": 1488356217, "answer_id": 42526496, "question_id": 42484915, "link": "https://stackoverflow.com/questions/42484915/how-to-compare-two-arrays-string/42526496#42526496", "title": "how to compare two arrays string", "body": "<p>We can get the difference using smart match operator (~~),</p>\n\n<pre><code>my(@words_arr) = (\"is\",\"a\");\nmy(@input_arr) = (\"This\",\"is\",\"a\",\"example\",\"code\");\nmy (@diff)  = grep { not $_ ~~ @words_arr} @input_arr;\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 7364753, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9e35cb4543e9ca0b2f6915c42941575c?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/7364753/rim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1488356217, "creation_date": 1488195733, "last_edit_date": 1488199625, "question_id": 42484915, "link": "https://stackoverflow.com/questions/42484915/how-to-compare-two-arrays-string", "title": "how to compare two arrays string", "body": "<p>I have two files as input, a file containing a list of words StopWordsList.txt, I want to remove from StopWordsList.txt the words that are in StopWordsList.txt, here is my code:</p>\n\n<pre><code>my $FichierResulat = '/home/lenovo/Bureau/MesTravaux/LeskAlgo/OriginalLeskResult';\n\nopen( my $FhResultat, '&gt;:utf8', $FichierResulat );\n\nopen( my $fh1, \"&lt;:utf8\", '/home/lenovo/Bureau/MesTravaux/LeskAlgo/DemoLesk/StopWordsList.txt' ) \n        or die \"Failed to open file: $!\\n\"; #file contains stop words\n\nopen( my $fh2, \"&lt;:utf8\", '/home/lenovo/Bureau/MesTravaux/LeskAlgo/text1.txt' ) #file contains text\n        or die \"Failed to open file: $!\\n\";\n\nmy @tabStopWords = &lt;$fh1&gt;;\n\nmy @tab_contexte;\nmy @words;\n\nwhile ( &lt;$fh2&gt; ) {\n    chomp;\n    next if m/^$/;\n    my $context = $_;\n    @words = split( / /, $_ );\n}\n#compare: remove from @words the words existing in @tabStopWords\nmy %temp;\n\n@temp{@tabStopWords} = 0 .. $#tabStopWords;\n\nfor my $val ( @words ) {\n\n    if ( exists $temp{$val} ) {\n        print \"$val est pr\u00e9sent dans tab1 \u00e0 la position $temp{$val}.\\n\";\n    }\n    else {\n        print \"$val n'est pas dans tab1.\\n\";\n        push @tab_sans_SW, $val;\n    }\n}\n\nforeach my $value ( @tab_sans_SW ) {\n    print $FhResultat \"$value\\n\";\n}\n</code></pre>\n\n<p>but in the result file i have all the words existing in @words without removing the word that exist in @tabStopWords..\nI hope tha can you help me.</p>\n\n<p>my sotpwords file : \n\u0627\u0644 \n\u0627\u0644\u0622\u0646 \n\u0627\u0644\u062a\u064a \n\u0627\u0644\u0630\u064a \n\u0627\u0644\u0630\u064a\u0646 \n\u0627\u0644\u0644\u0627\u062a\u064a \n\u0627\u0644\u0644\u0627\u0626\u064a \n\u0627\u0644\u0644\u062a\u0627\u0646 \n\u0627\u0644\u0644\u062a\u064a\u0646 </p>\n\n<p>my texte file : \n\u0648\u0645\u0648\u0627\u0635\u0644\u0627\u062a \u0628\u0645\u0627 \u0641\u064a\u0647 \u0645\u0646 \u0628\u0631\u064a\u062f \u0648\u0646\u0648\u0631 \u0648\u0645\u064a\u0627\u0647 \u0648\u0635\u0646\u0627\u0639\u0627\u062a \u0648\u0639\u0644\u0648\u0645 \u0648\u0645\u0639\u0627\u0631\u0641 \u0648\u062d\u064a\u0646\u0645\u0627 \u064a\u0631\u0643\u0628 \u0627\u062d\u062f\u0646\u0627 \u0642\u0637\u0627\u0631\u0627 \u0641\u0625\u0646\u0647 \u064a\u0631\u0643\u0628 \u0641\u064a \u0646\u0641\u0633 \u0627\u0644\u0648\u0642\u062a \u0639\u0644\u0649 \u062d\u0631\u064a\u0629 \u062c\u0627\u0647\u0632\u0629 \u0627\u0639\u062f\u0647\u0627 \u0644\u0647 \u0622\u0644\u0627\u0641 \u0627\u0644\u0639\u0645\u0627\u0644 \u0648\u0627\u0644\u0645\u062e\u062a\u0631\u0639\u064a\u0646 \u0648\u0627\u0644\u0645\u0647\u0646\u062f\u0633\u064a\u0646 \u0641\u064a</p>\n"}, {"tags": ["perl", "cpan", "xml-libxml", "cpanm"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1601162620, "last_edit_date": 1601162620, "creation_date": 1490879602, "answer_id": 43118961, "question_id": 42484675, "link": "https://stackoverflow.com/questions/42484675/cpanm-use-custom-libs-and-cflags/43118961#43118961", "title": "cpanm use custom libs and cflags", "body": "<p>From the distro's <a href=\"https://github.com/shlomif/perl-XML-LibXSLT/blob/493fba3f854b20d74a3c081492f185aaec7b4f3b/README#L27\" rel=\"nofollow noreferrer\">README</a>,</p>\n<blockquote>\n<p>The Makefile.PL tries to determine the correct compiler and linker\nflags for its library dependencies using pkg-config and\nxslt-config. If this fails, you may override the values like this</p>\n</blockquote>\n<blockquote>\n<pre><code>perl Makefile.PL INC=&quot;...&quot; LIBS=&quot;...&quot;\n</code></pre>\n</blockquote>\n<blockquote>\n<p>where INC contains flags for the compiler (such as -I/some_path/include etc.) and LIBS contains linker flags (such as -L/some_path/lib -llibsomething ...).</p>\n</blockquote>\n<p>It might be simpler to forgo <code>cpanm</code> and install the module yourself.</p>\n<pre><code>curl -L -o - http://search.cpan.org/CPAN/authors/id/S/SH/SHLOMIF/XML-LibXSLT-1.95.tar.gz | tar xz\ncd XML-LibXSLT-1.95\nperl Makefile.PL INC=&quot;...&quot; LIBS=&quot;...&quot;\nmake test\nmake install\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 527, "user_id": 4896937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b849b641ff3f8495ba3ce610fbd6e6f3?s=128&d=identicon&r=PG", "display_name": "chrstphrchvz", "link": "https://stackoverflow.com/users/4896937/chrstphrchvz"}, "is_accepted": false, "score": 2, "last_activity_date": 1560361182, "creation_date": 1560361182, "answer_id": 56567673, "question_id": 42484675, "link": "https://stackoverflow.com/questions/42484675/cpanm-use-custom-libs-and-cflags/56567673#56567673", "title": "cpanm use custom libs and cflags", "body": "<p>I think you were missing quotes around the <code>--cflags</code> argument (needed in order to group multiple space-separated arguments together):</p>\n\n<pre><code>--configure-args=\"--cflags='-I/usr/local/libxslt-1.1.29/include -I/usr/include/libxml2 -I/usr/local/MyLibs/libxml2-2.9.2/include/libxml2'\"\n</code></pre>\n\n<p>However <code>--cflags</code> and <code>--libs</code> are just examples from the cpanm documentation, and might not even be recognized by a distribution's Makefile.PL. As the other answer points out, the arguments to use for XML::LibXSLT are <code>INC=\"\u2026\"</code> and <code>LIBS=\"\u2026\"</code>; I think providing those to cpanm's <code>--configure-args</code> should work:</p>\n\n<pre><code>cpanm --configure-args=\"INC='\u2026' LIBS='\u2026'\"\n</code></pre>\n"}], "owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1017, "favorite_count": 0, "accepted_answer_id": 43118961, "answer_count": 2, "score": 2, "last_activity_date": 1601162760, "creation_date": 1488195002, "last_edit_date": 1601162760, "question_id": 42484675, "link": "https://stackoverflow.com/questions/42484675/cpanm-use-custom-libs-and-cflags", "title": "cpanm use custom libs and cflags", "body": "<p>On my mac OS X machine <code>Darwin maci 15.6.0 Darwin Kernel Version 15.6.0</code></p>\n<p>I have installed libxml2 and libxslt in following custom directory</p>\n<p><code>/usr/local/MyLibs/libxml2-2.9.2</code></p>\n<p>and libxslt</p>\n<p><code>/usr/local/MyLibs/libxslt-1.1.29</code></p>\n<p>Now I want to use these libs to build my CPANM module <a href=\"https://metacpan.org/release/XML-LibXSLT\" rel=\"nofollow noreferrer\">XML::LibXSLT</a>.</p>\n<p><a href=\"https://metacpan.org/pod/distribution/App-cpanminus/bin/cpanm#OPTIONS\" rel=\"nofollow noreferrer\">This</a> tells me that I can do so using <code>--configure-args</code> (its still experimental). So I do something like,</p>\n<pre><code>cpanm http://search.cpan.org/CPAN/authors/id/S/SH/SHLOMIF/XML-LibXSLT-1.94.tar.gz --configure-args=&quot;--cflags=-I/usr/local/libxslt-1.1.29/include -I/usr/include/libxml2 -I/usr/local/MyLibs/libxml2-2.9.2/include/libxml2 --libs=-L/usr/local/libxslt-1.1.29/lib -lxslt -lxml2 -lz -lpthread -licucore -lm -L/usr/local/MyLibs/libxml2-2.9.2/lib -lxml2 -lz -lpthread -liconv -lm&quot; --force\n</code></pre>\n<p>However, the build log says that it did not use the libraries installed in my custom location.</p>\n<p>Is there something that I am not doing correctly?</p>\n"}, {"tags": ["regex", "windows", "perl", "numbers", "text-files"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1371, "user_id": 5798435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46e85c028ee4f738679c57821206d870?s=128&d=identicon&r=PG&f=1", "display_name": "Mukesh Ingham", "link": "https://stackoverflow.com/users/5798435/mukesh-ingham"}, "edited": false, "score": 0, "creation_date": 1488195084, "post_id": 42484581, "comment_id": 72108832, "body": "@MukeshIngham: Why do you think so?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488195125, "post_id": 42484581, "comment_id": 72108865, "body": "Are the commas <code>,</code> that you show really in the data?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1488195233, "post_id": 42484581, "comment_id": 72108936, "body": "<code>perl -pe &quot;s&#47;(\\s*=\\s*)(\\d+)$&#47;$1.($2+19)&#47;egs&quot; file1.txt</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1371, "user_id": 5798435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46e85c028ee4f738679c57821206d870?s=128&d=identicon&r=PG&f=1", "display_name": "Mukesh Ingham", "link": "https://stackoverflow.com/users/5798435/mukesh-ingham"}, "edited": false, "score": 2, "creation_date": 1488195287, "post_id": 42484581, "comment_id": 72108977, "body": "@MukeshIngham: No, I don&#39;t trust you. The <code>&#47;e</code> modifier allows you to specify an <i>expression</i> for the replacement string."}, {"owner": {"reputation": 1913, "user_id": 2899885, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZJfu0.png?s=128&g=1", "display_name": "Cybran", "link": "https://stackoverflow.com/users/2899885/cybran"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488195413, "post_id": 42484581, "comment_id": 72109073, "body": "@Borodin the commas really are in the data."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1371, "user_id": 5798435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46e85c028ee4f738679c57821206d870?s=128&d=identicon&r=PG&f=1", "display_name": "Mukesh Ingham", "link": "https://stackoverflow.com/users/5798435/mukesh-ingham"}, "edited": false, "score": 2, "creation_date": 1488197556, "post_id": 42484581, "comment_id": 72110414, "body": "@MukeshIngham: You are completely wrong about the power of regexes (particularly their Perl implementation). Using <code>&#47;e</code>, then this problem becomes trivial."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1488242168, "post_id": 42484581, "comment_id": 72135723, "body": "On Windows, you typically need to use double quotes in command-line arguments, i.e. <code>perl -pe &quot;s&#47;(\\d+)$&#47;19+$1&#47;e&quot; file1.txt</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1913, "user_id": 2899885, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZJfu0.png?s=128&g=1", "display_name": "Cybran", "link": "https://stackoverflow.com/users/2899885/cybran"}, "edited": false, "score": 0, "creation_date": 1488195360, "post_id": 42484725, "comment_id": 72109030, "body": "Thanks, that&#39;s working perfectly! Could you include a (very brief) explanation of what the <code>g</code> and <code>s</code> switches do?"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "reply_to_user": {"reputation": 1913, "user_id": 2899885, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZJfu0.png?s=128&g=1", "display_name": "Cybran", "link": "https://stackoverflow.com/users/2899885/cybran"}, "edited": false, "score": 1, "creation_date": 1488195539, "post_id": 42484725, "comment_id": 72109146, "body": "I removed <code>s</code>, it&#39;s not needed, but <code>g</code> means replace all occurrences in each line. Without <code>g</code> only the first occurrence will be replaced"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488195773, "post_id": 42484725, "comment_id": 72109306, "body": "Are you sure the OP wants <i>all</i> numbers in a line to be altered? I know that&#39;s what they said, but it seems unlikely that the <code>$</code> was added accidentally"}, {"owner": {"reputation": 1913, "user_id": 2899885, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZJfu0.png?s=128&g=1", "display_name": "Cybran", "link": "https://stackoverflow.com/users/2899885/cybran"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488195825, "post_id": 42484725, "comment_id": 72109337, "body": "@Borodin I really wanted <i>all</i> numbers to be altered, and yes, the <code>$</code> was unfortunately a mistake."}, {"owner": {"reputation": 520, "user_id": 2956053, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/1664383831/picture?type=large", "display_name": "MikeMayer67", "link": "https://stackoverflow.com/users/2956053/mikemayer67"}, "edited": false, "score": 0, "creation_date": 1488198382, "post_id": 42484725, "comment_id": 72110978, "body": "Not trying to be snarky here, but your question about the /g and /e modifiers is answered quite thoroughly in the documentation.   If you are not already familiar with it, do yourself a favor and learn about perldoc.  In this case, you want to read through the perlre docs.  Type &#39;perldoc perlre&#39; at the command line.  You can learn a LOT about perl from perldoc!"}], "tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": true, "score": 3, "last_activity_date": 1488195499, "last_edit_date": 1488195499, "creation_date": 1488195139, "answer_id": 42484725, "question_id": 42484581, "link": "https://stackoverflow.com/questions/42484581/using-perl-for-incrementing-numbers-in-text-file/42484725#42484725", "title": "Using perl for incrementing numbers in text file", "body": "<p>It should work, try this:</p>\n\n<pre><code>perl -pe \"s/(\\d+)/19+$1/eg\" file1.txt\n</code></pre>\n\n<p>Your regex <code>(\\d+)$</code> matched only digits at the end of a string, so that won't match <code>1,</code></p>\n\n<p>If you want to match only <code>\" = &lt;digits&gt;,\"</code>, then use something like this</p>\n\n<pre><code>perl -pe \"s/ = (\\d+),/' = '.(19+$1).','/eg\" file1.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1488195672, "creation_date": 1488195672, "answer_id": 42484890, "question_id": 42484581, "link": "https://stackoverflow.com/questions/42484581/using-perl-for-incrementing-numbers-in-text-file/42484890#42484890", "title": "Using perl for incrementing numbers in text file", "body": "<p>If you want to alter numbers at the <em>ends</em> of the lines in the file, and those numbers are always followed by commas, then you can use tnis</p>\n\n<pre><code>S/(\\d+)(?=,\\s*$)/$1+19/e\n</code></pre>\n\n<p>It uses a look-ahead to check that the number is followed by a comma, optional white space, and the end of the line</p>\n"}], "owner": {"reputation": 1913, "user_id": 2899885, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZJfu0.png?s=128&g=1", "display_name": "Cybran", "link": "https://stackoverflow.com/users/2899885/cybran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 0, "accepted_answer_id": 42484725, "answer_count": 2, "score": 1, "last_activity_date": 1488195672, "creation_date": 1488194688, "question_id": 42484581, "link": "https://stackoverflow.com/questions/42484581/using-perl-for-incrementing-numbers-in-text-file", "title": "Using perl for incrementing numbers in text file", "body": "<p>I want to batch-process text files from the command line by adding a static offset to all numbers contained in said files using perl.</p>\n\n<p>For example, if the file contained the line: <code>AN_IDENTIFIER_TOKEN = 1,</code> and the offset is <code>19</code> then this line should be transformed to <code>AN_IDENTIFIER_TOKEN = 20,</code></p>\n\n<p>I tried to use <code>perl -pe 's/(\\d+)$/19+$1/e' file1.txt</code> but that did produce the same output as input (no numbers were changed). What is the correct command to pass to perl?</p>\n\n<p>Using ActiveState Perl 5.24.1 on Windows.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 5, "creation_date": 1488191306, "post_id": 42483296, "comment_id": 72106204, "body": "Why are you asking about line 14 of an 11 line program? What error is it giving? Why are you not using <code>use strict;</code> and <code>use warnings;</code>? Why aren&#39;t you following the instructions Stackoverflow provides for formatting code?"}, {"owner": {"reputation": 1, "user_id": 4953654, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gBaHBoUXeWo/AAAAAAAAAAI/AAAAAAAAACE/RDi8tdYOvWo/photo.jpg?sz=128", "display_name": "Saumik Satapathy", "link": "https://stackoverflow.com/users/4953654/saumik-satapathy"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1488191367, "post_id": 42483296, "comment_id": 72106249, "body": "syntax error at salar.pl line 14, near &quot;&quot;My Hexadecimal Number: $my_hex\\n&quot;:&quot; Execution of salar.pl aborted due to compilation errors. Press any key to continue . . ."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 6, "creation_date": 1488191458, "post_id": 42483296, "comment_id": 72106300, "body": "And what is the last character on that line?"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 4, "last_activity_date": 1488194455, "last_edit_date": 1488194455, "creation_date": 1488191608, "answer_id": 42483457, "question_id": 42483296, "link": "https://stackoverflow.com/questions/42483296/why-its-giving-error-at-line-number-14/42483457#42483457", "title": "Why it&#39;s giving error at line number 14?", "body": "<pre><code>print \"My Hexadecimal Number: $my_hex\\n\":\n                                     ---^\n</code></pre>\n\n<p>Syntax error - it should be a semicolon. </p>\n\n<p>Also: Turn on <code>use strict;</code> and <code>use warnings;</code> You can also format your code on Stack Overflow by selecting it and pressing <kbd>ctrl</kbd> + <kbd>k</kbd> (whilst in edit mode). However if you are getting an error - it's useful to include that in your post. </p>\n"}], "owner": {"reputation": 1, "user_id": 4953654, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gBaHBoUXeWo/AAAAAAAAAAI/AAAAAAAAACE/RDi8tdYOvWo/photo.jpg?sz=128", "display_name": "Saumik Satapathy", "link": "https://stackoverflow.com/users/4953654/saumik-satapathy"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "closed_date": 1488198133, "answer_count": 1, "score": -6, "last_activity_date": 1488194455, "creation_date": 1488191191, "last_edit_date": 1488191653, "question_id": 42483296, "link": "https://stackoverflow.com/questions/42483296/why-its-giving-error-at-line-number-14", "closed_reason": "Not suitable for this site", "title": "Why it&#39;s giving error at line number 14?", "body": "<pre><code>#!/usr/bin/perl\n$rank=1;\n$name=\"Saumik\";\n$tot_money=55555555.55;\n$my_oct=0167;\n$my_hex=0xabe;\nprint \"Name: $name\\n\";\nprint \"Rank $rank\\n\";\nprint \"Total Prize Money: $tot_money\\n\";\nprint \"My Octal Number: $my_oct\\n\";\nprint \"My Hexadecimal Number: $my_hex\\n\":\n</code></pre>\n\n<blockquote>\n  <p>syntax error at salar.pl line 14, near \"\"My Hexadecimal Number: $my_hex\\n\":\" Execution of salar.pl aborted due to compilation errors. Press any key to continue </p>\n</blockquote>\n"}, {"tags": ["perl", "utf-8"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1488189339, "post_id": 42482088, "comment_id": 72104847, "body": "Is the base64 that goes into the DB the same? What DB are you using? What data type does the field have? What does the <code>Dump</code> look like if you un-json it immediately after you converted it, skipping the database entirely."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1488189557, "post_id": 42482088, "comment_id": 72105013, "body": "Also, what does the <code>Dump</code> on the data look like before you <code>encode_base64</code> it? <a href=\"https://metacpan.org/pod/JSON::XS#latin1-or-ascii-flags-enabled\" rel=\"nofollow noreferrer\">The JSON::XS docs</a> say <i>With latin1 (or ascii) enabled, encode will escape characters with ordinal values &gt; 255 (&gt; 127 with ascii) and encode the remaining characters as specified by the utf8 flag.</i>. That might be the case here."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1488192213, "post_id": 42482088, "comment_id": 72106801, "body": "@simbabque thanks for the replies. I&#39;ve updated my opening question with those tests. It seems like it does encode is turning it into utf8, even when I explicitly tell it not to. I wonder if there is a work around?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1488192441, "post_id": 42482088, "comment_id": 72106962, "body": "Is it already utf8 when it goes in? It seems like you expect it to downgrade it to latin1, but that&#39;s not what JSON::XS is supposed to do. You&#39;d have to do that with Encode first. You can see that the characters are from above the ASCII (latin1) range in your <i>before</i> output and your <i>after</i> output. Before, they are Perl&#39;s character representation, they are high, and there are only three. Afterwards they have been encoded as utf8, so now they are are two bytes, but represented individually. If you want to convert your French accented letters to their latin1 representation, use Encode."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1488192607, "post_id": 42482088, "comment_id": 72107094, "body": "@simbabque It&#39;s sent via jQuery&#39;s $.ajax request, so in utf8 format, and then I decode it in the perl script as <code>$in-&gt;{$_} = Unicode::MapUTF8::from_utf8({-string =&gt; $in-&gt;{$_}, -charset =&gt; &#39;ISO-8859-1&#39;});</code>.  .. that should be the correct way to do it, no? I would love to just convfert the whole site to use utf8 (even the DB), but its a beast of a site and is setup with iso-8859-1 encoding in both the DB and pages."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1488192652, "post_id": 42482088, "comment_id": 72107126, "body": "That&#39;s the most crucial part of the question. <a href=\"https://stackoverflow.com/posts/42482088/edit\">Edit</a> it in!"}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1488192823, "post_id": 42482088, "comment_id": 72107261, "body": "@simbabque sorry - added in"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 1, "creation_date": 1488192943, "post_id": 42482088, "comment_id": 72107354, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/136740/discussion-between-simbabque-and-andrew-newby\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 0, "creation_date": 1488200470, "post_id": 42486406, "comment_id": 72112381, "body": "Thanks - and thanks for taking the time to work that through with me. I was losing my hair!"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1488200300, "creation_date": 1488200300, "answer_id": 42486406, "question_id": 42482088, "link": "https://stackoverflow.com/questions/42482088/converting-string-to-is0-8859-1-saving-to-database-as-base64-but-when-decoded/42486406#42486406", "title": "Converting string to is0-8859-1, saving to database as base64, but when decoded comes out as utf8", "body": "<p>JSON::XS is doing some encoding on the data, as it wants stuff to be in utf8. If you do not need the JSON, but you only want to persist the data to retrieve it later, you can just use a different way of serializing that doesn't mess with your encoding.</p>\n\n<p>The <a href=\"https://metacpan.org/pod/Storable\" rel=\"nofollow noreferrer\">Storable</a> module, which comes with core Perl, lets you convert Perl data structures to a binary representation that you can save in your database. A BLOB field would make sense.</p>\n\n<pre><code>use Storable;\n\nmy $binary = freeze($data_structure);\n\n# somewhere else...\n\nmy $data_structure = thaw($binary)\n</code></pre>\n"}], "owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 42486406, "answer_count": 1, "score": 2, "last_activity_date": 1488200300, "creation_date": 1488187787, "last_edit_date": 1488192803, "question_id": 42482088, "link": "https://stackoverflow.com/questions/42482088/converting-string-to-is0-8859-1-saving-to-database-as-base64-but-when-decoded", "title": "Converting string to is0-8859-1, saving to database as base64, but when decoded comes out as utf8", "body": "<p>I'm really confused with this one! So here is what is happening. I'm using <code>MIME::Base64</code> to encrypt a hashref into a string, using:</p>\n\n<pre><code>encode_base64(JSON::XS-&gt;new-&gt;latin1-&gt;encode($vars))\n</code></pre>\n\n<p>One of the variables in <code>$vars</code> is called <code>comment</code> ... so <code>$vars-&gt;{comment}</code></p>\n\n<p>When I get the text out of the database, the contents are:</p>\n\n<pre><code>eyJwaG9uZSI6InNkZnNkZnNmZCIsImNvbW1lbnRzIjoi7fPpIHRlc3QgYWNjZW50cyB4eHh4eCIs\nInJvb21zIjpbeyJkZXBvc2l0X2NhbmNlbF9wZXJpb2RfdGVybXMiOiJE6XD0dCByZXF1aXM6IDEw\nJTxicj5cblx0XHRcdFx0XHRcdFx0ICBQ6XJpb2RlIGQnYW5udWxhdGlvbjogNiBtb2lzIiwiYnJl\nYWtmYXN0X2F2YWlsYWJsZSI6MSwidXNlcl9pZF9mayI6ImFuZHkxIiwicm9vbV9uYW1lX3Nob3ci\nOiJDaGFtYnJlIGJsZXUg7fPpIC8gQ2hhbWJyZSBEb3VibGUiLCJwZW9wbGUiOiIyIiwiYnJlYWtm\nYXN0X3ByaWNlIjowLCJkZXBvc2l0X3BlcmNlbnRhZ2UiOiIxMCIsInByaWNlIjo3NSwiZGVwb3Np\ndF9jYW5jZWxfcGVyaW9kIjoiMTgwIiwicm9vbV9pZCI6IjIyMiIsImRlcG9zaXRfY2FuY2VsX3Bl\ncmlvZF9jYW50IjoxLCJkZXBvc2l0IjoiNy41MCJ9XSwidG90YWxfZHVlIjoiNzUuMDAiLCJlbWFp\nbCI6ImFuZHkubmV3YnlAZ21haWwuY29tIiwicmVtYWluaW5nX2R1ZSI6IjY3LjUwIiwibnVtX3Bl\nb3BsZSI6MiwidG8iOiIyMDE3MDQwMSIsImZyb20iOiIyMDE3MDMzMSIsImRlcG9zaXQiOiI3LjUw\nIn0=\n</code></pre>\n\n<p>Doing a <strong>Devel::Peek::Dump</strong> on the base64 coming out, the flag look perfect:</p>\n\n<pre><code>SV = PV(0x2e419b8) at 0x1eece38\n  REFCNT = 1\n  FLAGS = (PADMY,POK,pPOK)\n  PV = 0x2eeaf70 \"eyJwaG9uZSI6InNkZnNkZnNmZCIsImNvbW1lbnRzIjoi7fPpIHRlc3QgYWNjZW50cyB4eHh4eCIs\\nInJvb21zIjpbeyJkZXBvc2l0X2NhbmNlbF9wZXJpb2RfdGVybXMiOiJE6XD0dCByZXF1aXM6IDEw\\nJTxicj5cblx0XHRcdFx0XHRcdFx0ICBQ6XJpb2RlIGQnYW5udWxhdGlvbjogNiBtb2lzIiwiYnJl\\nYWtmYXN0X2F2YWlsYWJsZSI6MSwidXNlcl9pZF9mayI6ImFuZHkxIiwicm9vbV9uYW1lX3Nob3ci\\nOiJDaGFtYnJlIGJsZXUg7fPpIC8gQ2hhbWJyZSBEb3VibGUiLCJwZW9wbGUiOiIyIiwiYnJlYWtm\\nYXN0X3ByaWNlIjowLCJkZXBvc2l0X3BlcmNlbnRhZ2UiOiIxMCIsInByaWNlIjo3NSwiZGVwb3Np\\ndF9jYW5jZWxfcGVyaW9kIjoiMTgwIiwicm9vbV9pZCI6IjIyMiIsImRlcG9zaXRfY2FuY2VsX3Bl\\ncmlvZF9jYW50IjoxLCJkZXBvc2l0IjoiNy41MCJ9XSwidG90YWxfZHVlIjoiNzUuMDAiLCJlbWFp\\nbCI6ImFuZHkubmV3YnlAZ21haWwuY29tIiwicmVtYWluaW5nX2R1ZSI6IjY3LjUwIiwibnVtX3Bl\\nb3BsZSI6MiwidG8iOiIyMDE3MDQwMSIsImZyb20iOiIyMDE3MDMzMSIsImRlcG9zaXQiOiI3LjUw\\nIn0=\\n\"\\0\n  CUR = 775\n  LEN = 776\n</code></pre>\n\n<p>I am then decoding it with:</p>\n\n<pre><code>my $vars = JSON::XS-&gt;new-&gt;latin1-&gt;decode(decode_base64($base64));\n</code></pre>\n\n<p>However, upon decoding it if I do:</p>\n\n<pre><code>Dump($vars-&gt;{comments});\n</code></pre>\n\n<p>I get this in the <code>Dump()</code> ;</p>\n\n<pre><code>SV = PV(0x31c06b8) at 0x2f4f208\n  REFCNT = 1\n  FLAGS = (POK,pPOK,UTF8)\n  PV = 0x32635f0 \"\\303\\255\\303\\263\\303\\251 test accents xxxxx\"\\0 [UTF8 \"\\x{ed}\\x{f3}\\x{e9} test accents xxxxx\"]\n  CUR = 25\n  LEN = 32\n</code></pre>\n\n<p>As you can see, it has the UTF8 flag still. I'm stumped as to why it would be doing this.</p>\n\n<p>Has anyone got some ideas on what I can try? </p>\n\n<p><strong>UPDATE:</strong>  As suggested, I have done a dump before encoding, and after decoding (right away, skipping the database). As suggested, it looks like it <strong>is</strong> converting it into utf8 :/</p>\n\n<pre><code>BEFORE ENCODING:\n\nSV = PVMG(0x2a19a40) at 0x2a66588\n  REFCNT = 1\n  FLAGS = (POK,pPOK)\n  IV = 0\n  NV = 0\n  PV = 0x2320af0 \"\\355\\363\\351 test accents xxxxx\"\\0\n  CUR = 22\n  LEN = 24\n\nAFTER DECODING STRAIGHT AFTER:\nSV = PV(0x2a64b08) at 0x2a6b730\n  REFCNT = 1\n  FLAGS = (POK,pPOK,UTF8)\n  PV = 0x2ab2200 \"\\303\\255\\303\\263\\303\\251 test accents xxxxx\"\\0 [UTF8 \"\\x{ed}\\x{f3}\\x{e9} test accents xxxxx\"]\n  CUR = 25\n  LEN = 32\n</code></pre>\n\n<p>Any ideas on what I can do to stop it doing that? </p>\n\n<p><strong>UPDATE 2:</strong></p>\n\n<p>The data coming in comes from a jQuery <code>$.ajax()</code> request, and thus in <em>utf8</em> format. So what I'm doing is converting it to <em>iso-8859-1</em> format:</p>\n\n<pre><code>$in-&gt;{$_} = Unicode::MapUTF8::from_utf8({-string =&gt; $in-&gt;{$_}, -charset =&gt; 'ISO-8859-1'});\n</code></pre>\n\n<p>Unfortunatly all the website and database are in iso-8859-1 format, so I can't use UTF8 for any of the data (which is why I'm converting)</p>\n"}, {"tags": ["xml", "perl", "csv"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1488188271, "post_id": 42482078, "comment_id": 72104162, "body": "What are you doing after creating <code>$table</code>? Is it giving <i>Out of Memory</i> Error in this line or After creating the table where you are doing operations on data?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 4, "creation_date": 1488188548, "post_id": 42482078, "comment_id": 72104334, "body": "If the XML file is large, you can&#39;t load it into memory. Search for streaming processing of XML, i.e. <a href=\"http://p3rl.org/XML::LibXML::Reader\" rel=\"nofollow noreferrer\">XML::LibXML::Reader</a> or <a href=\"http://p3rl.org/XML::SAX\" rel=\"nofollow noreferrer\">XML::SAX</a>. I&#39;m not sure the deprecated AnyData can use either."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 6, "creation_date": 1488189104, "post_id": 42482078, "comment_id": 72104692, "body": "XML::Twig is also great at chunked processing."}, {"owner": {"reputation": 33, "user_id": 7287206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a260588be213fc0295e555544e11456?s=128&d=identicon&r=PG&f=1", "display_name": "odelys", "link": "https://stackoverflow.com/users/7287206/odelys"}, "edited": false, "score": 0, "creation_date": 1488189470, "post_id": 42482078, "comment_id": 72104939, "body": "Thank you for your answers. It is giving the Out of Memory Error <b>while</b> processing the creation of the table. I am not able to do anything with the data as the program collapses before already..."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1488198172, "post_id": 42482078, "comment_id": 72110822, "body": "That&#39;s because it tries to read a lot of data. How big is that file, in bytes?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488201940, "post_id": 42482078, "comment_id": 72113355, "body": "Your sample output contains values from the attributes of only the <code>MktDataFull</code> and <code>Instrmt</code> elements. Do you not want the values from <code>Full</code> elements as well?"}, {"owner": {"reputation": 33, "user_id": 7287206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a260588be213fc0295e555544e11456?s=128&d=identicon&r=PG&f=1", "display_name": "odelys", "link": "https://stackoverflow.com/users/7287206/odelys"}, "edited": false, "score": 0, "creation_date": 1488205278, "post_id": 42482078, "comment_id": 72115656, "body": "Yes, I need them all, but the data from &quot;Full&quot; is needed in another file separately. I think I could really use XML::Twig, but I don&#39;t know the syntax to get this done..."}, {"owner": {"reputation": 33, "user_id": 7287206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a260588be213fc0295e555544e11456?s=128&d=identicon&r=PG&f=1", "display_name": "odelys", "link": "https://stackoverflow.com/users/7287206/odelys"}, "edited": false, "score": 0, "creation_date": 1488205332, "post_id": 42482078, "comment_id": 72115697, "body": "The file is 270 MB"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7287206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a260588be213fc0295e555544e11456?s=128&d=identicon&r=PG&f=1", "display_name": "odelys", "link": "https://stackoverflow.com/users/7287206/odelys"}, "edited": false, "score": 0, "creation_date": 1488277122, "post_id": 42488707, "comment_id": 72149601, "body": "Thanks Sobrique, that&#39;s exactly what I need! Problem solved"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 4, "last_activity_date": 1488207335, "last_edit_date": 1488207335, "creation_date": 1488206950, "answer_id": 42488707, "question_id": 42482078, "link": "https://stackoverflow.com/questions/42482078/out-of-memory-error-while-converting-xml-to-csv/42488707#42488707", "title": "Out of memory error while converting XML to CSV", "body": "<p>Ok, so the problem with XML is that you can realistically assume that in memory, it's about 10x the size as 'on disk'. </p>\n\n<p>So reading the whole thing, and then dumping it out is very memory inefficient, and for larger files - well, as you've see, that's a big problem.</p>\n\n<p>For this sort of task (and to be fair, most XML tasks - I'm a huge fanboy) I like <code>XML::Twig</code>, because it lets you use <code>twig_handlers</code> to parse a file and discard 'processed' bits as you go - this keeps the memory footprint down. </p>\n\n<p>So for your example:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse XML::Twig; \n\nmy @keys = qw ( RptID BizDt Sym StrkValu Mult MatDt CFI StrkCcy MMY StrkPx );\n\n\nsub process_data {\n    my ( $twig, $data ) = @_; \n   # print join \",\", map { $data -&gt; get_xpath(\".//*[\\@$_]\",0 )-&gt; text } @keys;\n\n    my %atts = map { %{$_-&gt;atts} } $data , $data -&gt; children;\n    print join \",\", (map { $atts{$_} // '' } @keys),\"\\n\";\n    $data -&gt; purge;\n}\n\nprint join \",\", @keys, \"\\n\";\nXML::Twig -&gt; new ( twig_handlers =&gt; { 'MktDataFull' =&gt; \\&amp;process_data } ) -&gt; parse (\\*DATA);\n\n__DATA__\n&lt;FIXML r=\"20030618\" s=\"20040109\" v=\"4.4\" xr=\"FIA\" xv=\"1\" xmlns=\"http://www.fixprotocol.org/FIXML-4-4\"&gt;\n&lt;Batch&gt;\n&lt;MktDataFull RptID=\"23520135\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20171215\" MatDt=\"2017-12-15\" CFI=\"OCASPS\" StrkPx=\"100\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"5.7367\" Ccy=\"USD\" PxDelta=\"0.5\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;MktDataFull RptID=\"30818621\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20180615\" MatDt=\"2018-06-15\" CFI=\"OCASPS\" StrkPx=\"100\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"7.3603\" Ccy=\"USD\" PxDelta=\"0.52\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;MktDataFull RptID=\"31165289\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20170317\" MatDt=\"2017-03-17\" CFI=\"OCASPS\" StrkPx=\"101\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"1.7973\" Ccy=\"USD\" PxDelta=\"0.46\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;MktDataFull RptID=\"31165443\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20170317\" MatDt=\"2017-03-17\" CFI=\"OCASPS\" StrkPx=\"102\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"1.2775\" Ccy=\"USD\" PxDelta=\"0.35\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;MktDataFull RptID=\"31165368\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20170317\" MatDt=\"2017-03-17\" CFI=\"OCASPS\" StrkPx=\"103\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"0.8861\" Ccy=\"USD\" PxDelta=\"0.25\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;MktDataFull RptID=\"31165483\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20170317\" MatDt=\"2017-03-17\" CFI=\"OCASPS\" StrkPx=\"104\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"0.5858\" Ccy=\"USD\" PxDelta=\"0.25\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;MktDataFull RptID=\"25807539\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20170616\" MatDt=\"2017-06-16\" CFI=\"OCASPS\" StrkPx=\"105\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"1.321\" Ccy=\"USD\" PxDelta=\"0.26\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;MktDataFull RptID=\"30818579\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20180615\" MatDt=\"2018-06-15\" CFI=\"OCASPS\" StrkPx=\"105\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"4.7838\" Ccy=\"USD\" PxDelta=\"0.4\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;MktDataFull RptID=\"32444397\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20170616\" MatDt=\"2017-06-16\" CFI=\"OCASPS\" StrkPx=\"106\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"1.0134\" Ccy=\"USD\" PxDelta=\"0.26\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;MktDataFull RptID=\"32868839\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20170120\" MatDt=\"2017-01-20\" CFI=\"OCASPS\" StrkPx=\"107\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"0.0079\" Ccy=\"USD\" PxDelta=\"0\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;MktDataFull RptID=\"32444384\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20170616\" MatDt=\"2017-06-16\" CFI=\"OCASPS\" StrkPx=\"109\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"0.4888\" Ccy=\"USD\" PxDelta=\"0.11\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;/Batch&gt;\n&lt;/FIXML&gt;\n</code></pre>\n\n<p>Now, you probably want to use:</p>\n\n<pre><code>XML::Twig -&gt; new ( ... ) -&gt; parsefile ('your_xml_file'); \n</code></pre>\n\n<p>And maybe open a file handle to <code>print</code> that output to (at the moment it'll go to <code>STDOUT</code>, for illustration purposes)</p>\n\n<p>But the important point in the above is that <code>purge</code> call, which tells <code>XML::Twig</code> that you're done parsing, and to vacate the 'processed' data from memory. </p>\n\n<p>So should do what you want with a MUCH lower footprint. </p>\n"}], "owner": {"reputation": 33, "user_id": 7287206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a260588be213fc0295e555544e11456?s=128&d=identicon&r=PG&f=1", "display_name": "odelys", "link": "https://stackoverflow.com/users/7287206/odelys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 42488707, "answer_count": 1, "score": 3, "last_activity_date": 1488207335, "creation_date": 1488187756, "last_edit_date": 1488189072, "question_id": 42482078, "link": "https://stackoverflow.com/questions/42482078/out-of-memory-error-while-converting-xml-to-csv", "title": "Out of memory error while converting XML to CSV", "body": "<p>I want to convert an XML file into CSV using Anydata-0.12. The XML file is looking like this:</p>\n\n<pre><code>&lt;FIXML r=\"20030618\" s=\"20040109\" v=\"4.4\" xr=\"FIA\" xv=\"1\" xmlns=\"http://www.fixprotocol.org/FIXML-4-4\"&gt;\n&lt;Batch&gt;\n&lt;MktDataFull RptID=\"23520135\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20171215\" MatDt=\"2017-12-15\" CFI=\"OCASPS\" StrkPx=\"100\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"5.7367\" Ccy=\"USD\" PxDelta=\"0.5\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;MktDataFull RptID=\"30818621\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20180615\" MatDt=\"2018-06-15\" CFI=\"OCASPS\" StrkPx=\"100\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"7.3603\" Ccy=\"USD\" PxDelta=\"0.52\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;MktDataFull RptID=\"31165289\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20170317\" MatDt=\"2017-03-17\" CFI=\"OCASPS\" StrkPx=\"101\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"1.7973\" Ccy=\"USD\" PxDelta=\"0.46\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;MktDataFull RptID=\"31165443\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20170317\" MatDt=\"2017-03-17\" CFI=\"OCASPS\" StrkPx=\"102\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"1.2775\" Ccy=\"USD\" PxDelta=\"0.35\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;MktDataFull RptID=\"31165368\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20170317\" MatDt=\"2017-03-17\" CFI=\"OCASPS\" StrkPx=\"103\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"0.8861\" Ccy=\"USD\" PxDelta=\"0.25\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;MktDataFull RptID=\"31165483\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20170317\" MatDt=\"2017-03-17\" CFI=\"OCASPS\" StrkPx=\"104\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"0.5858\" Ccy=\"USD\" PxDelta=\"0.25\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;MktDataFull RptID=\"25807539\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20170616\" MatDt=\"2017-06-16\" CFI=\"OCASPS\" StrkPx=\"105\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"1.321\" Ccy=\"USD\" PxDelta=\"0.26\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;MktDataFull RptID=\"30818579\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20180615\" MatDt=\"2018-06-15\" CFI=\"OCASPS\" StrkPx=\"105\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"4.7838\" Ccy=\"USD\" PxDelta=\"0.4\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;MktDataFull RptID=\"32444397\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20170616\" MatDt=\"2017-06-16\" CFI=\"OCASPS\" StrkPx=\"106\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"1.0134\" Ccy=\"USD\" PxDelta=\"0.26\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;MktDataFull RptID=\"32868839\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20170120\" MatDt=\"2017-01-20\" CFI=\"OCASPS\" StrkPx=\"107\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"0.0079\" Ccy=\"USD\" PxDelta=\"0\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n&lt;MktDataFull RptID=\"32444384\" BizDt=\"2016-12-09\"&gt;&lt;Instrmt Sym=\"OEF\" MMY=\"20170616\" MatDt=\"2017-06-16\" CFI=\"OCASPS\" StrkPx=\"109\" StrkMult=\"1\" StrkValu=\"100\" Mult=\"100\" StrkCcy=\"USD\"/&gt;&lt;Full Typ=\"5\" Px=\"0.4888\" Ccy=\"USD\" PxDelta=\"0.11\" Dt=\"2016-12-09\"/&gt;&lt;Full Typ=\"D\" Px=\"100.15\" Dt=\"2016-12-09\"/&gt;&lt;/MktDataFull&gt;\n....\n....\n&lt;/Batch&gt;\n&lt;/FIXML&gt;\n</code></pre>\n\n<p>The CSV file contains parts of the XML. It should have the column headers used in the XML file and look like this:</p>\n\n<pre><code>RptID,BizDt,StrkMult,Sym,StrkValu,Mult,MatDt,CFI,StrkCcy,MMY,StrkPx\n23520135,2016-12-09,1,OEF,100,100,2017-12-15,OCASPS,USD,20171215,100\n30818621,2016-12-09,1,OEF,100,100,2018-06-15,OCASPS,USD,20180615,100\n31165289,2016-12-09,1,OEF,100,100,2017-03-17,OCASPS,USD,20170317,101\n31165443,2016-12-09,1,OEF,100,100,2017-03-17,OCASPS,USD,20170317,102\n31165368,2016-12-09,1,OEF,100,100,2017-03-17,OCASPS,USD,20170317,103\n31165483,2016-12-09,1,OEF,100,100,2017-03-17,OCASPS,USD,20170317,104\n...\n</code></pre>\n\n<p>I am running this code:</p>\n\n<pre><code>use AnyData;\nmy $input_xml = \"oc170120.xml\"; #name of the XML file\nmy $output_csv = \"test3.csv\"; #name of the output file\n$flags-&gt;{record_tag} = 'Instrmt';\nmy $table = adTie( 'XML', $input_xml, 'r', $flags );\n....\n</code></pre>\n\n<p>It is working and with a small file for test purposes everything is fine. But after a while I am getting</p>\n\n<p><strong>Out of Memory!</strong></p>\n\n<p>as <code>adtie()</code> tries to read the entire file into the memory and the XML file has more than 400000 records.</p>\n\n<p>I am using Perl 5.24.1 on a 64bit system.</p>\n"}, {"tags": ["arrays", "list", "perl"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1488184333, "post_id": 42480818, "comment_id": 72101744, "body": "First <code>close IN;</code> should be under <code>for</code> loop where you are opening a txt file."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1488184566, "post_id": 42480818, "comment_id": 72101887, "body": "I am perfectly able to store all the lines in a array using your exact code!! What are you getting in <code>@ID</code>?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1488209465, "post_id": 42480818, "comment_id": 72118635, "body": "Why are you reinventing <code>cat</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "is_accepted": false, "score": 0, "last_activity_date": 1488185008, "creation_date": 1488185008, "answer_id": 42481194, "question_id": 42480818, "link": "https://stackoverflow.com/questions/42480818/add-multiples-files-to-an-array-in-perl/42481194#42481194", "title": "add multiples files to an array in perl", "body": "<p>I guess you have a problem with line terminators. Try</p>\n\n<pre><code>open IN, '&lt;:crlf', $file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1047, "user_id": 1191999, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8a5575da1a4d6205f568754e55294cfb?s=128&d=identicon&r=PG", "display_name": "Ram", "link": "https://stackoverflow.com/users/1191999/ram"}, "is_accepted": false, "score": 3, "last_activity_date": 1488185667, "creation_date": 1488185667, "answer_id": 42481385, "question_id": 42480818, "link": "https://stackoverflow.com/questions/42480818/add-multiples-files-to-an-array-in-perl/42481385#42481385", "title": "add multiples files to an array in perl", "body": "<p>If you are anyway reading entire stuff into memory ( not usually the best use of RAM ) then you could do this ...  perl TIMTOWTDI</p>\n\n<pre><code>my @ID;\n{\n    local(@ARGV) =  glob(\"*.txt\");\n    @ID=&lt;&gt;;\n}\nprint \"@ID\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 124, "user_id": 7208743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2087289e2d292c565a792961070ec894?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Motani", "link": "https://stackoverflow.com/users/7208743/sagar-motani"}, "is_accepted": false, "score": 1, "last_activity_date": 1488357035, "creation_date": 1488357035, "answer_id": 42526748, "question_id": 42480818, "link": "https://stackoverflow.com/questions/42480818/add-multiples-files-to-an-array-in-perl/42526748#42526748", "title": "add multiples files to an array in perl", "body": "<p>By initializing default input separator as undef this can be solved,</p>\n\n<pre><code>use strict;\nmy @files = glob(\"*.txt\");\nmy @ID;\n\nfor my $file(@files) {\n    open IN, '&lt;', $file or die \"$!\";\n    while (&lt;IN&gt;) {\n        my $fields = do{local $/; &lt;IN&gt;};\n        push @ID, $fields;\n    }\n}\n\nforeach (@ID){\n    print \"$_\\n\";\n}\nclose IN;\nexit;\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 9097452, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8073dda6ba748ee30788aed8a1e82f0d?s=128&d=identicon&r=PG", "display_name": "abraham", "link": "https://stackoverflow.com/users/9097452/abraham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1488357035, "creation_date": 1488183742, "last_edit_date": 1488188176, "question_id": 42480818, "link": "https://stackoverflow.com/questions/42480818/add-multiples-files-to-an-array-in-perl", "title": "add multiples files to an array in perl", "body": "<p>I have some txt files with a huge list of lines like: </p>\n\n<pre><code>file_1.txt        file_2.txt      file_3.txt\nXP_001703830.1    XP_001703820.1  XP_001703810.1\nXP_001703836.1    XP_001703815.1  XP_001703805.1\nXP_001703844.1    XP_001703834.1  XP_001703844.1\n</code></pre>\n\n<p>let's say that I have 10 or more files in a folder, and I want to read all of them and store the content in a array, I have used this code, but it just store one line of a file, and not all the lines !!  </p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\n\nmy @files = glob(\"*.txt\");\nmy @ID;\n\nfor my $file(@files) {\n    open IN, '&lt;', $file or die \"$!\";\n        while (&lt;IN&gt;) {\n            my $fields = $_;\n            push @ID, $fields;\n        }\n}\n\nforeach (@ID){\n    print \"$_\\n\";\n}\nclose IN;\nexit;\n</code></pre>\n\n<p>what I want is store all the lines in a  array like: </p>\n\n<pre><code>XP_001703830.1      \nXP_001703836.1      \nXP_001703844.1      \nXP_001703820.1\nXP_001703815.1\nXP_001703834.1\nXP_001703810.1\nXP_001703805.1\nXP_001703844.1\n</code></pre>\n\n<p>Thanks So Much !!! </p>\n"}, {"tags": ["linux", "perl", "proxy", "root", "sudo"], "comments": [{"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1488182662, "post_id": 42480496, "comment_id": 72100970, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/583216/run-a-linux-system-command-as-a-superuser-using-a-python-script\">Run a linux system command as a superuser, using a python script</a> or <a href=\"https://stackoverflow.com/questions/16178015/how-can-i-run-a-perl-script-which-needs-root?rq=1\">how can I run a perl script which needs root?</a>"}, {"owner": {"reputation": 109, "user_id": 7510504, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a53bd17cbe70c7bf9be7ca0cf478cf8?s=128&d=identicon&r=PG&f=1", "display_name": "Eva Cheung", "link": "https://stackoverflow.com/users/7510504/eva-cheung"}, "reply_to_user": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1488183194, "post_id": 42480496, "comment_id": 72101184, "body": "Thanks, but a bit different. I should change the account to root and export proxy by using perl scripts and cannot change the profile/config files or using \u201csudo command\u201d instead."}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1488228063, "post_id": 42480496, "comment_id": 72129893, "body": "Recent versions of <code>sudo</code> can be made to read the password from <code>stdin</code> by passing then the flag <code>-S</code>. Read the <a href=\"https://www.sudo.ws/man/1.8.18/sudo.man.html\" rel=\"nofollow noreferrer\">man page</a> for the details!"}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 7510504, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a53bd17cbe70c7bf9be7ca0cf478cf8?s=128&d=identicon&r=PG&f=1", "display_name": "Eva Cheung", "link": "https://stackoverflow.com/users/7510504/eva-cheung"}, "edited": false, "score": 0, "creation_date": 1488248445, "post_id": 42481486, "comment_id": 72136985, "body": "Thanks, but I think the function of system &quot;&quot;; is nearly same as the backticks?  I actually don&#39;t want to get the output of the commands above, I just hope these two commands can be executed."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "is_accepted": false, "score": 0, "last_activity_date": 1488186587, "last_edit_date": 1488186587, "creation_date": 1488186025, "answer_id": 42481486, "question_id": 42480496, "link": "https://stackoverflow.com/questions/42480496/in-linux-how-to-change-user-to-root-in-perl-and-continue-to-run-this-script-ho/42481486#42481486", "title": "In Linux, how to change user to root in perl and continue to run this script? How to export proxy in perl?", "body": "<p>perhaps try backticks?</p>\n\n<pre><code>my $sudo = `echo \\\"$password\\\" | sudo -S su root`;\n</code></pre>\n\n<p>also similar for the export.</p>\n\n<pre><code>my $exp = `export http_proxy=http://proxy.companyname.com:8080`;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 109, "user_id": 7510504, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a53bd17cbe70c7bf9be7ca0cf478cf8?s=128&d=identicon&r=PG&f=1", "display_name": "Eva Cheung", "link": "https://stackoverflow.com/users/7510504/eva-cheung"}, "edited": false, "score": 0, "creation_date": 1488248583, "post_id": 42481997, "comment_id": 72137022, "body": "Thanks for your reply, but I cannot install Net::SSH::Perl."}], "tags": [], "owner": {"reputation": 3410, "user_id": 5138923, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-frypbyRLIu0/AAAAAAAAAAI/AAAAAAAAAHQ/u-HRmLjKRuQ/photo.jpg?sz=128", "display_name": "rakesh", "link": "https://stackoverflow.com/users/5138923/rakesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1488187521, "creation_date": 1488187521, "answer_id": 42481997, "question_id": 42480496, "link": "https://stackoverflow.com/questions/42480496/in-linux-how-to-change-user-to-root-in-perl-and-continue-to-run-this-script-ho/42481997#42481997", "title": "In Linux, how to change user to root in perl and continue to run this script? How to export proxy in perl?", "body": "<p>If you have to execute other scripts to be executed with root and you have perl ssh module installed then you can open a ssh session to the localhost with root user and start executing your scripts from there.</p>\n\n<pre><code>my $ssh = Net::SSH::Perl-&gt;new(\"host1\");\n$ssh-&gt;login(\"root\", \"pass1\");\n$ssh-&gt;cmd(\"sh /opt/...\");\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 7510504, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a53bd17cbe70c7bf9be7ca0cf478cf8?s=128&d=identicon&r=PG&f=1", "display_name": "Eva Cheung", "link": "https://stackoverflow.com/users/7510504/eva-cheung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1029, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1488187521, "creation_date": 1488182462, "question_id": 42480496, "link": "https://stackoverflow.com/questions/42480496/in-linux-how-to-change-user-to-root-in-perl-and-continue-to-run-this-script-ho", "title": "In Linux, how to change user to root in perl and continue to run this script? How to export proxy in perl?", "body": "<p>My perl scripts should be able to change the common account to root account during execution and then continue to the rest commands. But I don't know how to do:</p>\n\n<ol>\n<li><p>Change to root account and able to automatically pass authentication, I used following code, but failed.</p>\n\n<pre><code>system \"echo \\\"$password\\\" | sudo -S su root\";\n</code></pre></li>\n<li><p>Able to continue to do the rest scriptsI found when using scripts to change account (simply try system \"sudo su\";) , it is not able to execute rest scripts</p></li>\n<li><p>I need to export proxy, but when i using the following code, it does not work:</p>\n\n<pre><code>system \"export http_proxy=http://proxy.companyname.com:8080\"; \n</code></pre></li>\n</ol>\n"}, {"tags": ["regex", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 10642, "user_id": 6309601, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RNsPk.png?s=128&g=1", "display_name": "P....", "link": "https://stackoverflow.com/users/6309601/p"}, "edited": false, "score": 1, "creation_date": 1490612529, "post_id": 42479344, "comment_id": 73173347, "body": "If any of the following answer helped you in your goal please accept/upvote the answer for closure by ticking right sign besides the answer."}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 7417672, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2ad237af02e20c5e05e2fc22985bf646?s=128&d=identicon&r=PG&f=1", "display_name": "MrAZ", "link": "https://stackoverflow.com/users/7417672/mraz"}, "edited": false, "score": 0, "creation_date": 1488178736, "post_id": 42479387, "comment_id": 72099080, "body": "Thanks for this sed command, it give me an idea...but the string after which is -log xxx0202.&#39;$DotDate&#39;.log -AgentName xxx0202 are disappeared after run this command."}, {"owner": {"reputation": 10642, "user_id": 6309601, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RNsPk.png?s=128&g=1", "display_name": "P....", "link": "https://stackoverflow.com/users/6309601/p"}, "reply_to_user": {"reputation": 199, "user_id": 7417672, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2ad237af02e20c5e05e2fc22985bf646?s=128&d=identicon&r=PG&f=1", "display_name": "MrAZ", "link": "https://stackoverflow.com/users/7417672/mraz"}, "edited": false, "score": 0, "creation_date": 1488178793, "post_id": 42479387, "comment_id": 72099106, "body": "@Azizul , in the command I have provided only partial input , you need to update the text after <code>\\1 </code> as per your need."}, {"owner": {"reputation": 199, "user_id": 7417672, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2ad237af02e20c5e05e2fc22985bf646?s=128&d=identicon&r=PG&f=1", "display_name": "MrAZ", "link": "https://stackoverflow.com/users/7417672/mraz"}, "edited": false, "score": 0, "creation_date": 1488179128, "post_id": 42479387, "comment_id": 72099268, "body": "Thanks, it helps =)"}], "tags": [], "owner": {"reputation": 10642, "user_id": 6309601, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RNsPk.png?s=128&g=1", "display_name": "P....", "link": "https://stackoverflow.com/users/6309601/p"}, "is_accepted": false, "score": 1, "last_activity_date": 1488179248, "last_edit_date": 1488179248, "creation_date": 1488177939, "answer_id": 42479387, "question_id": 42479344, "link": "https://stackoverflow.com/questions/42479344/weird-character-after-do-changes-using-perl-command/42479387#42479387", "title": "Weird character after do changes using perl command", "body": "<pre><code>sed -r 's/(^.*-queues)(.*)/\\1 winall,process,winconfig,vmscpu,vmstat,dustat/' inputfile\njava ${AGENT_JAVAOPTS} -Xmx2560m com.xxx.xxx.xxx.AgentXX -inifile ${XXX_AGENT_INI} -queues winall,process,winconfig,vmscpu,vmstat,dustat\n</code></pre>\n\n<p>Here, the line is divided into two chunks using backrefrencing, 1st is from start till <code>-queues</code> and 2nd is from that point until the end. </p>\n\n<p>Or you can use <code>awk</code> to store the text into a variable and use it while replacement. Here you can change the text by changing the value of variable <code>var</code> .</p>\n\n<pre><code>awk -v FS='-queues' -v var='winall,process,winconfig,vmscpu,vmstat,dustat' '{print $1 FS var}' inputfile\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 199, "user_id": 7417672, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2ad237af02e20c5e05e2fc22985bf646?s=128&d=identicon&r=PG&f=1", "display_name": "MrAZ", "link": "https://stackoverflow.com/users/7417672/mraz"}, "edited": false, "score": 0, "creation_date": 1488179146, "post_id": 42479534, "comment_id": 72099278, "body": "Thanks @choroba , it helps =)"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1488178575, "creation_date": 1488178575, "answer_id": 42479534, "question_id": 42479344, "link": "https://stackoverflow.com/questions/42479344/weird-character-after-do-changes-using-perl-command/42479534#42479534", "title": "Weird character after do changes using perl command", "body": "<p><code>tr///</code> is the transliteration, not substitution.</p>\n\n<p>It replaces the first character of SEARCHLIST with the first character of REPLACEMENTLIST (similar to <code>y///</code> in <code>sed</code>), and so on. What you need is the substitution <code>s///</code>. See <a href=\"http://p3rl.org/perlop\" rel=\"nofollow noreferrer\">perlop</a> for details.</p>\n"}], "owner": {"reputation": 199, "user_id": 7417672, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2ad237af02e20c5e05e2fc22985bf646?s=128&d=identicon&r=PG&f=1", "display_name": "MrAZ", "link": "https://stackoverflow.com/users/7417672/mraz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 42479534, "answer_count": 2, "score": 0, "last_activity_date": 1488179248, "creation_date": 1488177780, "last_edit_date": 1488178859, "question_id": 42479344, "link": "https://stackoverflow.com/questions/42479344/weird-character-after-do-changes-using-perl-command", "title": "Weird character after do changes using perl command", "body": "<p>Good day.</p>\n\n<p>Let say my file content as below::</p>\n\n<pre><code>java ${AGENT_JAVAOPTS} -Xmx2560m com.xxx.xxx.xxx.AgentXX   -inifile ${XXX_AGENT_INI}  -queues winall,dustat,envstat,netstat,iostat,winconfig,netwarestat,netwareconfig,pawmin,paw15,db2,sqlserver,vmstatvmw2,vmstatvm2,netstatvm,netstatvmw,vmstatvm,vmstatvmw,iostatvm,iostatvmw,envstatvm,envstatvmw,vmscpu,vmsdisk,vmsmem,vmstatvcw,process,winprocess  -log xxx0202.'$DotDate'.log -AgentName xxx0202\n</code></pre>\n\n<p>Then, I try to change the strings after '-queue' to \"winall,process,winconfig,vmscpu,vmstat,dustat\", which I using below command in UNIX::</p>\n\n<pre><code>perl -pi -e 'tr/winall,dustat,envstat,netstat,iostat,winconfig,netwarestat,netwareconfig,pawmin,paw15,db2,sqlserver,vmstatvmw2,vmstatvm2,netstatvm,netstatvmw,vmstatvm,vmstatvmw,iostatvm,iostatvmw,envstatvm,envstatvmw,vmscpu,vmsdisk,vmsmem,vmstatvcw,process,winprocess/winall,process,winconfig,vmscpu,vmstat,dustat/' file\n</code></pre>\n\n<p>However, it produced an output with a weird character as below::</p>\n\n<pre><code>jaia ${AGENT_JAVAOPTS} -Xtxtt60t u,t.itt.ott.cotau,.At,ncDP   -iniail, ${SRM_AGENT_INI}  -tr,r,o winall,procac,,niocac,n,cocac,i,ocac,winu,nait,n,cwat,ocac,n,cwat,u,nait,tawtin,tawtt,ptt,otlo,ti,t,itocacitwt,itocacitt,n,cocacit,n,cocacitw,itocacit,itocacitw,i,ocacit,i,ocacitw,,niocacit,,niocacitw,itoutr,itopiot,itot,t,itocaciuw,tt,u,oo,wintt,u,oo  -l,t tlp0t0t.'$D,cDac,'.l,t -At,ncNat, tlp0t0t\n</code></pre>\n\n<p>How come it produce the output like above?</p>\n\n<p>The output suppose to be as:</p>\n\n<pre><code>java ${AGENT_JAVAOPTS} -Xmx2560m com.xxx.xxx.xxx.AgentXX   -inifile ${XXX_AGENT_INI} -queues winall,process,winconfig,vmscpu,vmstat,dustat -log xxx0202.'$DotDate'.log -AgentName xxx0202\n</code></pre>\n\n<p>Need assistance for this issue.</p>\n"}, {"tags": ["perl", "cgi"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 7344661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-D9AelVM4jsg/AAAAAAAAAAI/AAAAAAAAAEE/CtOqFh_LmZE/photo.jpg?sz=128", "display_name": "Tarun Vikash", "link": "https://stackoverflow.com/users/7344661/tarun-vikash"}, "edited": false, "score": 0, "creation_date": 1488193589, "post_id": 42479353, "comment_id": 72107778, "body": "The second method worked perfectly fine. Thanks a lot @ikegami for helping with this problem."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1488213426, "last_edit_date": 1488213426, "creation_date": 1488177805, "answer_id": 42479353, "question_id": 42479268, "link": "https://stackoverflow.com/questions/42479268/how-do-i-handle-in-perl-cgi-url-parameter-where-the-parameter-value-contains/42479353#42479353", "title": "how do I handle &#39;&amp;&#39; in perl cgi url parameter where the parameter value contains an &#39;&amp;&#39; sign", "body": "<p>You don't have to do anything special to handle param values that contain <code>&amp;</code>.  For example, <code>$cgi-&gt;param('brand')</code> would return <code>Bell &amp; Ross</code> for</p>\n\n<pre><code>http://someurl/?brand=Bell%20%26%20Ross&amp;category=Wrist%20Watch%20Dealers&amp;qq_cat_id=8798798\n                             ^^^\n</code></pre>\n\n<p>The problem is that the url in the OP wasn't properly constructed; the <code>brand</code> parameter wasn't set to <code>Bell &amp; Ross</code>. All of the following will correctly construct the url:</p>\n\n<pre><code>use URI::Escape qw( uri_escape );\n\nmy $url = 'http://someurl/';\n$url .= \"?\" . join('&amp;', \n   join('=', map { uri_escape($_) } brand     =&gt; $brand),\n   join('=', map { uri_escape($_) } category  =&gt; $category),\n   join('=', map { uri_escape($_) } qq_cat_id =&gt; $qq_cat_id),\n);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use URI qw( );\n\nmy $url = URI-&gt;new('http://someurl/');\n$url-&gt;query_form(\n   brand     =&gt; $brand,\n   category  =&gt; $category,\n   qq_cat_id =&gt; $qq_cat_id,\n);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use URI             qw( );\nuse URI::QueryParam qw( );\n\nmy $url = URI-&gt;new('http://someurl/');\n$url-&gt;query_param_append( brand     =&gt; $brand );\n$url-&gt;query_param_append( category  =&gt; $category );\n$url-&gt;query_param_append( qq_cat_id =&gt; $qq_cat_id );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488213272, "post_id": 42482466, "comment_id": 72121257, "body": "No, the OP&#39;s url is perfectly valid."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488214499, "post_id": 42482466, "comment_id": 72122045, "body": "Yeah, I suppose you&#39;re right. It&#39;s valid; it just doesn&#39;t mean what they think it means."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1488214597, "last_edit_date": 1488214597, "creation_date": 1488188954, "answer_id": 42482466, "question_id": 42479268, "link": "https://stackoverflow.com/questions/42479268/how-do-i-handle-in-perl-cgi-url-parameter-where-the-parameter-value-contains/42482466#42482466", "title": "how do I handle &#39;&amp;&#39; in perl cgi url parameter where the parameter value contains an &#39;&amp;&#39; sign", "body": "<p>Your URL doesn't mean what you think it means. And it doesn't mean what the person who created it thought it meant. The <code>&amp;</code> character has a special meaning in URLs - it separates different parameters. Any URL parser that encounters your URL would split the parameters at that point (which is why you're getting \"Bell \" rather than \"Bell &amp; Ross\").</p>\n\n<p>If you want a <code>&amp;</code> in a URL that isn't treated as a separator, then you need to URL-encode the <code>&amp;</code> (which will turn it into <code>%26</code>).</p>\n\n<p>The problem is not with the code that is processing the URL. The problem is with the code that is generating the URL. That's what needs to be fixed.</p>\n\n<p>(<strong>Updated:</strong> I originally claimed that the URL was invalid. That's not true.)</p>\n"}], "owner": {"reputation": 45, "user_id": 7344661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-D9AelVM4jsg/AAAAAAAAAAI/AAAAAAAAAEE/CtOqFh_LmZE/photo.jpg?sz=128", "display_name": "Tarun Vikash", "link": "https://stackoverflow.com/users/7344661/tarun-vikash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 42479353, "answer_count": 2, "score": 1, "last_activity_date": 1488214597, "creation_date": 1488177446, "question_id": 42479268, "link": "https://stackoverflow.com/questions/42479268/how-do-i-handle-in-perl-cgi-url-parameter-where-the-parameter-value-contains", "title": "how do I handle &#39;&amp;&#39; in perl cgi url parameter where the parameter value contains an &#39;&amp;&#39; sign", "body": "<p>I am trying to pass parameters in URL and reading the parameters with param().\none of my parameter values contain an '&amp;' sign, hence while reading the value through param() it skips the part after '&amp;'.\nIs there any way I can use this method without compromising the value that contain '&amp;'?</p>\n\n<p>Example:</p>\n\n<p><a href=\"http://someurl/?brand=Bell%20&amp;%20Ross&amp;category=Wrist%20Watch%20Dealers&amp;qq_cat_id=8798798\" rel=\"nofollow noreferrer\">http://someurl/?brand=Bell%20&amp;%20Ross&amp;category=Wrist%20Watch%20Dealers&amp;qq_cat_id=8798798</a></p>\n\n<p>The value for the parameter brand is coming \"Bell\" rather than \"Bell &amp; Ross\".</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 0, "creation_date": 1488172142, "post_id": 42478119, "comment_id": 72096663, "body": "<code>if ($lines =~ &#47;^AC\\s+(.*)&#47;)</code> ?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488179300, "post_id": 42478119, "comment_id": 72099359, "body": "Is it <code>$line</code> or <code>$lines</code>? And the regex pattern you show won&#39;t match that string because <code>^</code> anchors to the start of the string and <code>AC</code> doesn&#39;t appear at the start."}], "answers": [{"tags": [], "owner": {"reputation": 1090, "user_id": 2756517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a4b72e0834488e9d88e845c21657a4b?s=128&d=identicon&r=PG", "display_name": "Yaman Jain", "link": "https://stackoverflow.com/users/2756517/yaman-jain"}, "is_accepted": true, "score": 0, "last_activity_date": 1488172252, "creation_date": 1488172252, "answer_id": 42478213, "question_id": 42478119, "link": "https://stackoverflow.com/questions/42478119/how-to-not-match-whitespace-in-certain-parts-of-a-line-in-perl/42478213#42478213", "title": "how to not match whitespace in certain parts of a line in perl", "body": "<p>Exclude one or more whitespaces.</p>\n\n<pre><code>if ($lines =~ /^AC\\s+(.*)/)\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 7508921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3597cbe10171c947ec16f81ce7a53260?s=128&d=identicon&r=PG&f=1", "display_name": "tmoneyz", "link": "https://stackoverflow.com/users/7508921/tmoneyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 42478213, "answer_count": 1, "score": 1, "last_activity_date": 1488205408, "creation_date": 1488171689, "last_edit_date": 1488205408, "question_id": 42478119, "link": "https://stackoverflow.com/questions/42478119/how-to-not-match-whitespace-in-certain-parts-of-a-line-in-perl", "title": "how to not match whitespace in certain parts of a line in perl", "body": "<p>I have a line:</p>\n\n<pre><code>$lines = AC   P00450; Q14063;\n</code></pre>\n\n<p>I need to use regex to match only part of the string that comes after AC. I use the following code:</p>\n\n<pre><code>if ($lines =~ /^AC(.*)/) {\n    print $1, \"\\n\";\n}\n</code></pre>\n\n<p>and it gives me the following output:</p>\n\n<pre><code>   P00450; Q14063;\n</code></pre>\n\n<p>how do I adjust my regex so that it doesn't match the whitespace after AC, before P00450 and just returns me P00450; Q14063; without the whitespace in the front? I understand that I am getting my output because .* matches any type of character. That is essentially what I want but without the whitespace before P00450. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 0, "creation_date": 1488176711, "post_id": 42477703, "comment_id": 72098286, "body": "Remove everything after the last <code>&#47;</code> and check to see if the path-string still contains a dot (<code>.</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1488175062, "last_edit_date": 1495541811, "creation_date": 1488171125, "answer_id": 42478032, "question_id": 42477703, "link": "https://stackoverflow.com/questions/42477703/how-to-omit-the-hidden-directories-files-using-perl/42478032#42478032", "title": "How to omit the hidden directories files using perl?", "body": "<p>The documentation has an example to skipping CSV directories. In this case, you need to do a bit more work, because <code>.*</code> matches <code>.</code> as well:</p>\n\n<pre><code>my $rule = File::Find::Rule-&gt;new;\n\n$rule-&gt;or( $rule-&gt;new\n                -&gt;directory\n                -&gt;name( '.*' )\n                -&gt;not_name( '.' )\n                -&gt;prune\n                -&gt;discard,\n           $rule-&gt;new\n                -&gt;file\n                -&gt;name( '*.config' ));\n\nmy @files = $rule-&gt;in( $ENV{HOME} );\n</code></pre>\n\n<p>As <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> mentions in a comment, the <code>name-&gt;not_name</code> can be simplified by</p>\n\n<pre><code>-&gt;name( '.?*' )\n</code></pre>\n\n<p>or</p>\n\n<pre><code>-&gt;name( qr/^\\../ )\n</code></pre>\n\n<p>i.e. dot followed by anything.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1488179570, "creation_date": 1488179570, "answer_id": 42479780, "question_id": 42477703, "link": "https://stackoverflow.com/questions/42477703/how-to-omit-the-hidden-directories-files-using-perl/42479780#42479780", "title": "How to omit the hidden directories files using perl?", "body": "<p>You can use a regex pattern instead of a glob pattern in <code>name</code>, like so</p>\n\n<pre><code>my @files = File::Find::Rule-&gt;file()\n        -&gt;name(  qr/^[^.].*\\.config$/ )\n        -&gt;in( '/home/rsa/MODE/' )\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7608729"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 42478032, "answer_count": 2, "score": 0, "last_activity_date": 1598206230, "creation_date": 1488168688, "last_edit_date": 1598206230, "question_id": 42477703, "link": "https://stackoverflow.com/questions/42477703/how-to-omit-the-hidden-directories-files-using-perl", "title": "How to omit the hidden directories files using perl?", "body": "<p>I tried to fetch .config files from the particular location using perl.But i like to omit the same extension files from hidden directories.How can result to code as expected output:</p>\n<p>code which i have tried:</p>\n<pre><code>use strict;\nuse warnings;\nuse File::Find::Rule;\nmy @files = File::Find::Rule-&gt;file()\n                            -&gt;name( '*.config' )\n                            -&gt;in( '/home/rsa/MODE/' );\nfor my $file (@files) {\n    print &quot;file: $file\\n&quot;;\n}\n</code></pre>\n<p>Output for above code:</p>\n<pre><code>file:/home/rsa/MODE/p_s/p1/b1/c3/r1/rev.config\nfile:/home/rsa/MODE/p_s/p1/b1/c3/r5/.bhat/rev.config\nfile:/home/rsa/MODE/p_s/p1/b1/c3/r5/.lrayan/rev.config\n</code></pre>\n<p>Expected output:</p>\n<p>I should result the output without taking the hidden directories files extension.</p>\n<pre><code>file:/home/rsa/MODE/p_s/p1/b1/c3/r1/rev.config\n</code></pre>\n"}, {"tags": ["perl", "apache2", "mod-perl"], "answers": [{"tags": [], "owner": {"reputation": 21904, "user_id": 1019753, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/v68rq.jpg?s=128&g=1", "display_name": "Diode", "link": "https://stackoverflow.com/users/1019753/diode"}, "is_accepted": false, "score": 2, "last_activity_date": 1488237373, "last_edit_date": 1488237373, "creation_date": 1488184630, "answer_id": 42481087, "question_id": 42477644, "link": "https://stackoverflow.com/questions/42477644/apache-mod-perl-unknown-authz-provider-access/42481087#42481087", "title": "Apache - Mod Perl - Unknown Authz provider &#39;access&#39;", "body": "<p>After researching for a few hours I found out that this is because of changes in the latest versions of Apache and mod_perl. </p>\n\n<p>From the <a href=\"https://metacpan.org/release/Apache-AuthCookie\" rel=\"nofollow noreferrer\">Apache-AuthCookie documentation</a> and <a href=\"https://metacpan.org/pod/distribution/Apache-AuthCookie/README.apache-2.4.pod\" rel=\"nofollow noreferrer\">Apache 2.4 porting notes</a>, I learned that Apache 2.4 needs mod_perl version 2.0.9 or higher.</p>\n\n<p>Also, a custom Authz Provider has to be added using <code>PerlAddAuthzProvider</code>. I was able to solve my issue by doing</p>\n\n<pre><code>PerlAddAuthzProvider access security::AuthCookieHandler-&gt;access\n...\n...\n&lt;Directory /srv/webapp&gt;\n    ...\n    ...\n    require access\n&lt;/Directory&gt;\n</code></pre>\n"}], "owner": {"reputation": 21904, "user_id": 1019753, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/v68rq.jpg?s=128&g=1", "display_name": "Diode", "link": "https://stackoverflow.com/users/1019753/diode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1488237373, "creation_date": 1488168280, "last_edit_date": 1488173410, "question_id": 42477644, "link": "https://stackoverflow.com/questions/42477644/apache-mod-perl-unknown-authz-provider-access", "title": "Apache - Mod Perl - Unknown Authz provider &#39;access&#39;", "body": "<p>I am trying to set up and run an old Web application(written in 2010) in a new Linux environment. The Apache server is not starting because of the error <code>Unknown Authz provider access</code>, caused by the configuration given below.</p>\n\n<pre><code>&lt;Directory /srv/webapp&gt;\n    Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch\n    SetOutputFilter DEFLATE\n    ExpiresActive On\n    ExpiresDefault \"3 Months\"\n    AuthType security::AuthCookieHandler\n    AuthName Maxio\n    PerlAuthenHandler security::AuthCookieHandler-&gt;authenticate\n    PerlAuthzHandler security::AuthCookieHandler-&gt;authorize\n    require access\n&lt;/Directory&gt;\n</code></pre>\n\n<p>I couldn't find any documentation for this, or any apache module that defines <code>access</code> , but <code>security::AuthCookieHandler</code> has </p>\n\n<pre><code>sub access\n{\n...\n...\n}\n</code></pre>\n\n<p>I understand that this is <code>mod_perl</code> based authentication, but haven't worked on this before. Apache starts if this authentication is disabled, and the application loads in the browser. </p>\n\n<p>So the questions are </p>\n\n<ol>\n<li>Is <code>require access</code> supposed to get the return value from <code>sub access</code> ?</li>\n<li>If so, why <code>sub access</code> is not visible to the configuration ?</li>\n<li>If not so, what is <code>access</code> here ?</li>\n</ol>\n"}, {"tags": ["regex", "perl", "awk", "sed", "ksh"], "answers": [{"comments": [{"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1488167583, "post_id": 42477453, "comment_id": 72095409, "body": "<code>\\b</code> appears to be GNU-only. This solution doesn&#39;t work in OS X or *BSD."}, {"owner": {"reputation": 199, "user_id": 7417672, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2ad237af02e20c5e05e2fc22985bf646?s=128&d=identicon&r=PG&f=1", "display_name": "MrAZ", "link": "https://stackoverflow.com/users/7417672/mraz"}, "edited": false, "score": 0, "creation_date": 1488168814, "post_id": 42477453, "comment_id": 72095705, "body": "Thanks @karakfa this helps a lot,  however this only works in the GNU sed...but not working in my sed which under AIX...=("}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488180228, "post_id": 42477453, "comment_id": 72099829, "body": "This won&#39;t remove the superfluous leading or trailing comma if <code>process</code> appears at the start or end of the list."}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 0, "last_activity_date": 1488204462, "last_edit_date": 1488204462, "creation_date": 1488166820, "answer_id": 42477453, "question_id": 42477192, "link": "https://stackoverflow.com/questions/42477192/deleting-a-word-from-a-string/42477453#42477453", "title": "Deleting a word from a string", "body": "<p>you can do in three steps</p>\n\n<pre><code>sed 's/,process,/,/g;s/^process,//;s/,process$//'   \n</code></pre>\n\n<p>testing for positions,: in-between, beginning or at the end.</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 7627694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cca34f8bca4d3ff0485f892f9704f83?s=128&d=identicon&r=PG&f=1", "display_name": "Pankaj Basliyal", "link": "https://stackoverflow.com/users/7627694/pankaj-basliyal"}, "is_accepted": true, "score": 0, "last_activity_date": 1488170383, "last_edit_date": 1488170383, "creation_date": 1488167141, "answer_id": 42477490, "question_id": 42477192, "link": "https://stackoverflow.com/questions/42477192/deleting-a-word-from-a-string/42477490#42477490", "title": "Deleting a word from a string", "body": "<p>If it's comma separated use them to your advantage for making it a word. </p>\n\n<pre><code>perl -pi -e \"s/, \\s* process\\s* , /, /g filename \n</code></pre>\n\n<p>If there is not going to be spaces after or before comma then remove \\s*</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1502430025, "last_edit_date": 1502430025, "creation_date": 1488167200, "answer_id": 42477499, "question_id": 42477192, "link": "https://stackoverflow.com/questions/42477192/deleting-a-word-from-a-string/42477499#42477499", "title": "Deleting a word from a string", "body": "<p>Use auto-splitting (<code>-a</code>) by comma (<code>-F,</code>), to avoid the comma-problem altogether</p>\n\n<pre><code>perl -F, -lane 'print join \",\", grep { not /^process$/ } @F' input  &gt; output\n</code></pre>\n\n<p>Input is broken up by <code>,</code> into <code>@F</code>. The <code>grep</code> filters out the word and the rest is joined back by <code>,</code></p>\n\n<p>In order to change the input file in place add <code>-i</code> and drop <code>&gt; output</code></p>\n\n<p>See <a href=\"http://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\">Command switches in perlrun</a></p>\n\n<hr>\n\n<p>The problem is that the first and last word have one comma, which needs to go if they are removed, while others have two commas where one needs to stay. One way with regex is to make two passes, removing the word and then extra commas (still be careful with first and last). </p>\n\n<p>Or run code in the replacement part to select cases suitably</p>\n\n<pre><code>echo \"go,stay,ago,go,got,end,go\" | \n\n    perl -pe's/(,)?\\bgo\\b(,)?/$1 &amp;&amp; $2 &amp;&amp; \",\"/ge'\n</code></pre>\n\n<p>Prints: <code>stay,ago,got,end</code>.  The <a href=\"http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\"><code>/e</code></a> evaluates the replacement side as Perl code.</p>\n\n<p>If both commas are there (<code>$1 &amp;&amp; $2</code>) then (<code>&amp;&amp;</code>) we replace with comma (<code>\",\"</code>).  </p>\n\n<p>This works because in Perl <a href=\"http://perldoc.perl.org/perlop.html#Logical-Defined-Or\" rel=\"nofollow noreferrer\"><code>&amp;&amp;</code> returns the value</a></p>\n\n<blockquote>\n  <p>The <code>||</code>, <code>//</code> and <code>&amp;&amp;</code> operators return the last value evaluated (unlike C's <code>||</code> and <code>&amp;&amp;</code>, which return 0 or 1).</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "is_accepted": false, "score": 1, "last_activity_date": 1488175523, "last_edit_date": 1488175523, "creation_date": 1488167779, "answer_id": 42477575, "question_id": 42477192, "link": "https://stackoverflow.com/questions/42477192/deleting-a-word-from-a-string/42477575#42477575", "title": "Deleting a word from a string", "body": "<p>Here's an <code>awk</code> solution.</p>\n\n<pre><code>awk 'BEGIN{OFS=FS=\",\"} {for(i=1;i&lt;=NF;i++) if($i==\"process\") $i=\"\"} 1' file\n</code></pre>\n\n<p>This sets your field separator to comma for both input and output, and then steps through your fields, checking for equivalence against the string you're interested in and emptying the field if it matches.  The <code>1</code> at the end is awk short-hand for \"print the current line\".</p>\n\n<hr>\n\n<p>Similarly, one could slice up input data by record instead of by field:</p>\n\n<pre><code>awk 'BEGIN{ORS=RS=\",\"} /^process$/{next} 1' file\n</code></pre>\n\n<p>or</p>\n\n<pre><code>awk 'BEGIN{ORS=RS=\",\"} $0==\"process\"{next} 1' file\n</code></pre>\n\n<p>This walks through your input using the comma as a RECORD separator (RS), so that individual words can be evaluated using awk's record-awareness. You can do your evaluation via regex or not -- regex is ever so slightly slower, but appears to save you two characters of typing. :-)</p>\n\n<p>The strategy using RS/ORS eliminates the problem you noticed with the field being emptied but not removed. When the comma is a record separator, then a skipped record causes the record separator not to be shown, which is closer to the \"ideal\" output you've included in your question.</p>\n\n<hr>\n\n<p>Last option might be to do this right inside your shell (ksh). This will have the advantage of greatest portability (you won't have to worry about perl version, whether awk/sed are GNU or BSD or something else). The disadvantage is that with the method below, your file size will be limited by your system memory (and perhaps configurable limits).</p>\n\n<pre><code>$ IFS=, read -A arr &lt; file\n$ for i in \"${!arr[@]}\"; do [[ \"${arr[$i]}\" == \"process\" ]] &amp;&amp; unset arr[$i]; done\n$ output=$(printf \"%s,\" \"${arr[@]}\")\n$ echo \"${output%,}\"\n-queues winall,dustat,envstat,netstat,iostat,winconfig,netwarestat,netwareconfig,pawmin,paw15,db2,sqlserver,vmstatvmw2,vmstatvm2,netstatvm,netstatvmw,vmstatvm,vmstatvmw,iostatvm,iostatvmw,envstatvm,envstatvmw,vmscpu,vmsdisk,vmsmem,vmstatvcw,winprocess\n</code></pre>\n\n<p>Note that the <code>$output</code> variable is only required in order to strip the trailing comma generated by <code>printf</code>. Another option might be to set <code>$IFS</code> more globally:</p>\n\n<pre><code>$ IFS=,\n$ echo \"${arr[*]}\"\n-queues winall,dustat,envstat,netstat,iostat,winconfig,netwarestat,netwareconfig,pawmin,paw15,db2,sqlserver,vmstatvmw2,vmstatvm2,netstatvm,netstatvmw,vmstatvm,vmstatvmw,iostatvm,iostatvmw,envstatvm,envstatvmw,vmscpu,vmsdisk,vmsmem,vmstatvcw,winprocess\n</code></pre>\n\n<p>I should point out that despite appearances, the <code>printf</code> option doesn't really spawn external commands, because ksh implements <code>printf</code> as a built-in.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1488180704, "creation_date": 1488180704, "answer_id": 42480055, "question_id": 42477192, "link": "https://stackoverflow.com/questions/42477192/deleting-a-word-from-a-string/42480055#42480055", "title": "Deleting a word from a string", "body": "<p>Like this perhaps?</p>\n\n<p>It  searches for all occurrences of <code>process</code>, using word boundaries to ensure that it isn't found as part of another word, and also matching optional commas <code>,</code> before and after. The match is replaced by a single comma if two commas were found (<code>process</code> was found in the middle of the list) and deleted if there was only one (<code>process</code> appears only at the beginning or end of the list)</p>\n\n<pre><code>perl -pi -e 's/ ,? \\b process \\b ,? ) / $1 =~ tr/,// &gt; 1 ? ',' : '' /xge' agent_file.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1371, "user_id": 5056806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfa01ad122fc89b571651ffbbc34ce37?s=128&d=identicon&r=PG&f=1", "display_name": "Claes Wikner", "link": "https://stackoverflow.com/users/5056806/claes-wikner"}, "is_accepted": false, "score": 0, "last_activity_date": 1488236286, "creation_date": 1488236286, "answer_id": 42497325, "question_id": 42477192, "link": "https://stackoverflow.com/questions/42477192/deleting-a-word-from-a-string/42497325#42497325", "title": "Deleting a word from a string", "body": "<pre><code>awk '{sub(/process,/,\"\")}1' file\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 7417672, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2ad237af02e20c5e05e2fc22985bf646?s=128&d=identicon&r=PG&f=1", "display_name": "MrAZ", "link": "https://stackoverflow.com/users/7417672/mraz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 42477490, "answer_count": 6, "score": 0, "last_activity_date": 1502430025, "creation_date": 1488164874, "last_edit_date": 1488180912, "question_id": 42477192, "link": "https://stackoverflow.com/questions/42477192/deleting-a-word-from-a-string", "title": "Deleting a word from a string", "body": "<p>I want to delete a specific word from a file.</p>\n\n<p>Let's say the file name <code>agent_file.txt</code> contains below string</p>\n\n<pre><code>-queues winall,dustat,envstat,netstat,iostat,winconfig,netwarestat,netwareconfig,pawmin,paw15,db2,sqlserver,vmstatvmw2,vmstatvm2,netstatvm,netstatvmw,vmstatvm,vmstatvmw,iostatvm,iostatvmw,envstatvm,envstatvmw,vmscpu,vmsdisk,vmsmem,vmstatvcw,process,winprocess\n</code></pre>\n\n<p>I want to delete character or the word <code>process</code> only in this file, so I use below command under Unix</p>\n\n<pre><code>perl -pi -e 's/process//g' agent_file.txt\n</code></pre>\n\n<p>The output will be</p>\n\n<pre><code>-queues winall,dustat,envstat,netstat,iostat,winconfig,netwarestat,netwareconfig,pawmin,paw15,db2,sqlserver,vmstatvmw2,vmstatvm2,netstatvm,netstatvmw,vmstatvm,vmstatvmw,iostatvm,iostatvmw,envstatvm,envstatvmw,vmscpu,vmsdisk,vmsmem,vmstatvcw,,win\n</code></pre>\n\n<p>The word is deleted, but it also deletes part of <code>winprocess</code>.</p>\n\n<p>How can I delete only <code>process</code> as well as a preceding comma <code>,</code> if there is one?</p>\n\n<p>The output should be</p>\n\n<pre><code>-queues winall,dustat,envstat,netstat,iostat,winconfig,netwarestat,netwareconfig,pawmin,paw15,db2,sqlserver,vmstatvmw2,vmstatvm2,netstatvm,netstatvmw,vmstatvm,vmstatvmw,iostatvm,iostatvmw,envstatvm,envstatvmw,vmscpu,vmsdisk,vmsmem,vmstatvcw,winprocess\n</code></pre>\n"}, {"tags": ["perl", "dancer"], "answers": [{"tags": [], "owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "is_accepted": true, "score": 2, "last_activity_date": 1488184475, "creation_date": 1488184475, "answer_id": 42481041, "question_id": 42476079, "link": "https://stackoverflow.com/questions/42476079/dancer2plugin-creation/42481041#42481041", "title": "Dancer2::Plugin creation", "body": "<p>Dancer has done a complete overhaul with their plugins, please see their <a href=\"https://metacpan.org/pod/Dancer2::Plugin\" rel=\"nofollow noreferrer\" title=\"Dancer2::Plugin documentation\">Dancer2::Plugin documentation</a>.</p>\n\n<p>Here I show you a simple example:</p>\n\n<pre><code>package Dancer2::Plugin::Test;\n\nuse strict;\nuse warnings;\n\nuse Dancer2::Plugin;\n\nhas dictionary =&gt; (\n    is             =&gt; 'ro',\n    from_config    =&gt; 'dict',\n    plugin_keyword =&gt; 'foo',\n);\n\n1;\n</code></pre>\n\n<p>and inside the <code>config.yml</code>:</p>\n\n<pre><code>plugins:\n    Test:\n        dict:\n            foo: 1\n            bar: 2\n            baz: 3\n</code></pre>\n\n<p>This way, you can use 'plugin top-level' configuration, from which I would assume you 'know' the keys; a config from which you do not know what keys are there would be a bit difficult to parse. In that top-level I created a dictionary key <code>dict</code>, which on its turn can hold an unknown list of key-value pairs.</p>\n\n<p>Inside your plugin, you can use <code>$plugin-&gt;dictionary</code> to access the (internal) hash.</p>\n\n<p>Inside a Dancer route, you can simply use <code>foo()</code>, as you have declared is to be a keyword.</p>\n\n<p>I think the developers have done well, making the plugins look very clean!</p>\n"}], "owner": {"reputation": 140, "user_id": 3452713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05fd97300b34ae2140877ab5a8f463bf?s=128&d=identicon&r=PG&f=1", "display_name": "user3452713", "link": "https://stackoverflow.com/users/3452713/user3452713"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 42481041, "answer_count": 1, "score": 1, "last_activity_date": 1488184475, "creation_date": 1488155908, "question_id": 42476079, "link": "https://stackoverflow.com/questions/42476079/dancer2plugin-creation", "title": "Dancer2::Plugin creation", "body": "<p>I am trying to create a plugin for Dancer2, and set the options in the config.yml file. \nMy config.yml file looks like this:</p>\n\n<pre><code> plugins:\n      Test:\n        foo: 1\n        bar: 2\n        baz: 3\n</code></pre>\n\n<p>I am trying to read these values via plugin_setting(), without success. In the line:</p>\n\n<pre><code>my $settings = plugin_setting();\n</code></pre>\n\n<p>$settings gets no value. I expect to get foo: 1, bar: 2, baz: 3.</p>\n\n<p>My code is the following:</p>\n\n<pre><code>package Dancer2::Plugin::Test;\n\nuse Dancer2::Plugin;\nuse Data::Dumper;\n\nour $VERSION = 0.01;\n\nmy $settings = plugin_setting();\n\nregister foo =&gt; sub {\n    return my $settings = _get_settings();\n};\n\nregister_plugin for_versions =&gt; [ 2 ] ;\n\nsub _get_settings {\n    my $args = {};\n    for (qw/foo bar baz/) {\n        if (exists $settings-&gt;{$_}) {\n        open A, q[&gt;], 'settings.txt';\n            $args-&gt;{$_} = $settings-&gt;{$_};\n        }\n    }\n    print A Dumper $args;close A;\n    return $args;\n}\n1;\n</code></pre>\n\n<p>Anyone could help me?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 0, "creation_date": 1488154502, "post_id": 42475864, "comment_id": 72092346, "body": "I&#39;m not aware of any flags like that in Perl. Probably have to <code>split</code> the read line, and then take the right element from the resulting array. Except if it&#39;s a one-liner from command line, then you can use the option <code>-a</code>."}, {"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 0, "creation_date": 1488156532, "post_id": 42475864, "comment_id": 72092782, "body": "Are you looking for a script or a one-liner?"}, {"owner": {"reputation": 333, "user_id": 7002733, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pr9b8.jpg?s=128&g=1", "display_name": "Reubens4Dinner", "link": "https://stackoverflow.com/users/7002733/reubens4dinner"}, "reply_to_user": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 0, "creation_date": 1488159230, "post_id": 42475864, "comment_id": 72093413, "body": "@AntonH Sorry yeah good question. I&#39;m making a whole script. The columns after the name are skills. If the skills reach a certain threshold, the person will be &quot;hired.&quot; The purpose of fetching information from the columns is to run tests after reading each line in, such as  <code>if (k2 &gt; 5) then... else...</code> etc."}, {"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 0, "creation_date": 1488163293, "post_id": 42475864, "comment_id": 72094389, "body": "To my knowledge, there are no flags of the kind. Best is, if the line is in a scalar variable, like <code>$str</code>, you would have to split and capture that in an array, like so: <code>@myArray = split &#47;\\s+&#47;, $str;</code>. Then access the elements like an ordinary array."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1488164267, "post_id": 42475864, "comment_id": 72094587, "body": "Or, in short, <code>while (&lt;$fh&gt;) { if (split)[1] &gt; 5) { ... } }</code>.  Here <code>$fh</code> is the filehandle with which you opened the file, and <code>while</code> then iterates over lines, one at a time. The <code>[1]</code> selects the second field from the line, which <code>split</code> has split by whitespace. This assumes that you know for fact that <i>each</i> line has that information in the second column. It doesn&#39;t deal with possibly empty lines, checking whether a line has the expected format, etc. So it will test the second field on every line (second &quot;column&quot;) for whether it&#39;s larger than 5.  Is this what you need?"}, {"owner": {"reputation": 333, "user_id": 7002733, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pr9b8.jpg?s=128&g=1", "display_name": "Reubens4Dinner", "link": "https://stackoverflow.com/users/7002733/reubens4dinner"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1488170286, "post_id": 42475864, "comment_id": 72096086, "body": "@zdim Thank you this is helpful. It&#39;s late here so I will try this tomorrow morning. I&#39;m curious, though, does split delimit on whitespace by default? or do I have to do some funky /\\s/ syntax?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1488170477, "post_id": 42475864, "comment_id": 72096148, "body": "The default for <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a> is -- <code>split &#39; &#39;, $_</code>, where <code>&#39; &#39;</code> means any amount of any whitespace and <a href=\"http://perldoc.perl.org/perlvar.html#General-Variables\" rel=\"nofollow noreferrer\">$_ variable</a> is default for many things. For one, it is the line currently processed by <code>while &lt;$fh&gt;</code>.  So all you should need is <code>split;</code>, which returns the list. Then you take an element, say the second one by <code>(split)[1]</code>. Try it out and if there are problems edit the question so ask about them."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1488170569, "post_id": 42475864, "comment_id": 72096178, "body": "The code I posted in my previous comment should be <code>if ((split)[1] &gt; 5)</code> (one more parenthesis)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 3, "creation_date": 1488181099, "post_id": 42475864, "comment_id": 72100255, "body": "@AntonH: If you&#39;re writing  <code>split &#47;\\s+&#47;</code> then you almost certainly want <code>split &#39; &#39;</code> instead"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1488181532, "post_id": 42475864, "comment_id": 72100442, "body": "The <code>-a</code> flag automatically splits the input and allow you to access the column through <code>@F</code> array (I let you look it up). However, it&#39;s conveninient for one liners (or very small scripts), but I don&#39;t recommend using it in a full script."}, {"owner": {"reputation": 333, "user_id": 7002733, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pr9b8.jpg?s=128&g=1", "display_name": "Reubens4Dinner", "link": "https://stackoverflow.com/users/7002733/reubens4dinner"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1488222973, "post_id": 42475864, "comment_id": 72127088, "body": "@zdim thank you. I used your suggestion and it works perfectly."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1488223627, "post_id": 42475864, "comment_id": 72127446, "body": "@javacplusplus  Great! You did it yourself :) Thank you for feedback :)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1488237464, "post_id": 42475864, "comment_id": 72134269, "body": "Can you please write up your solution as an answer?"}], "answers": [{"tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 1, "last_activity_date": 1489976325, "creation_date": 1489976325, "answer_id": 42894844, "question_id": 42475864, "link": "https://stackoverflow.com/questions/42475864/k-column-number-in-perl/42894844#42894844", "title": "k/Column number in Perl", "body": "<p>In case you want to do it for exactly one column and want to avoid maintaining the result of \"split\" in array shape. (Otherwise use split as mentioned in the comments.)</p>\n\n<pre><code>perl -ne\"/(?:\\w+\\s+){1}(\\w+\\b)/;print $1.\\\"\\n\\\"\"\n</code></pre>\n\n<p>Will print the column of word-like characters between space-like characters, identified by the number inside \"{}\", in this case \"1\"; counting columns starting with 0.\nE.g. it prints \"6\" for the input example, using \"1\".  </p>\n\n<p>How:<br>\nMake a regular expression for a column followed by space,</p>\n\n<pre><code>(?:\\w+\\s+)\n</code></pre>\n\n<p>require it a number of times,</p>\n\n<pre><code>{1}\n</code></pre>\n\n<p>then grab a regular expression for a colum followed by anything not word-like (including end of line)</p>\n\n<pre><code>(\\w+\\b)\n</code></pre>\n\n<p>The desired column is found in the grabbed string</p>\n\n<pre><code>$1\n</code></pre>\n\n<p>I did this in a command line one liner which expects standard input, to be able to test it.\nPlease just adapt it into your script. </p>\n"}, {"comments": [{"owner": {"reputation": 333, "user_id": 7002733, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pr9b8.jpg?s=128&g=1", "display_name": "Reubens4Dinner", "link": "https://stackoverflow.com/users/7002733/reubens4dinner"}, "edited": false, "score": 0, "creation_date": 1552582219, "post_id": 55168003, "comment_id": 97075316, "body": "Better late than never, I guess. Hopefully this can be of use to future readers."}], "tags": [], "owner": {"reputation": 333, "user_id": 7002733, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pr9b8.jpg?s=128&g=1", "display_name": "Reubens4Dinner", "link": "https://stackoverflow.com/users/7002733/reubens4dinner"}, "is_accepted": true, "score": 1, "last_activity_date": 1552592051, "last_edit_date": 1552592051, "creation_date": 1552582165, "answer_id": 55168003, "question_id": 42475864, "link": "https://stackoverflow.com/questions/42475864/k-column-number-in-perl/55168003#55168003", "title": "k/Column number in Perl", "body": "<p>This will check the second column:    </p>\n\n<pre><code>(split)[1]\n</code></pre>\n\n<p>Sample script:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $filename = 'input';\nopen(FILE, $filename) or die \"Can not open $filename.\";\n\nprint \"\\n\";\nwhile(&lt;FILE&gt;)\n{\n        #The test\n        if ((split)[1] &lt; 10)\n        {\n                print \"The second column is less than ten\\n\";\n        }\n        elsif ((split)[1] &gt; 10)\n        {\n                print \"The second column is more than ten\\n\";\n        }\n        else\n        {\n                print \"The second column is equal to ten\\n\";\n        }\n}\n</code></pre>\n\n<p>Input:</p>\n\n<pre><code>#Input file\n0 5 0\n0 10 0\n0 15 0\n0 20 0\n0 1 0\n0 10 0\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>The second column is less than ten\nThe second column is equal to ten\nThe second column is more than ten\nThe second column is more than ten\nThe second column is less than ten\nThe second column is equal to ten\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 2, "last_activity_date": 1552592701, "creation_date": 1552592701, "answer_id": 55170858, "question_id": 42475864, "link": "https://stackoverflow.com/questions/42475864/k-column-number-in-perl/55170858#55170858", "title": "k/Column number in Perl", "body": "<p>You can try with the command line Perl as well</p>\n\n<p>with the inputs</p>\n\n<pre><code>$ cat reubens.txt\n0 5 0\n0 10 0\n0 15 0\n0 20 0\n0 1 0\n0 10 0\n\n$  perl -lane ' print  \"The second column is \", $F[1] &lt; 10 ? \"less than 10\": $F[1]==10 ? \"equal to 10\" : \"more than 10\"  '  reubens.txt\nThe second column is less than 10\nThe second column is equal to 10\nThe second column is more than 10\nThe second column is more than 10\nThe second column is less than 10\nThe second column is equal to 10\n\n$\n</code></pre>\n"}], "owner": {"reputation": 333, "user_id": 7002733, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pr9b8.jpg?s=128&g=1", "display_name": "Reubens4Dinner", "link": "https://stackoverflow.com/users/7002733/reubens4dinner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 55168003, "answer_count": 3, "score": 1, "last_activity_date": 1552594736, "creation_date": 1488154069, "last_edit_date": 1552594736, "question_id": 42475864, "link": "https://stackoverflow.com/questions/42475864/k-column-number-in-perl", "title": "k/Column number in Perl", "body": "<p>So I'm sure this is somewhere on the site, but as <em>always</em>, I have looked high and low before asking a question.</p>\n\n<p>In Bash, you can use certain flags on some commands (such as <code>k[number]</code> on <code>sort</code>) to grab a certain column from a text file. What is the method for doing this in Perl? For an example from my input file:</p>\n\n<pre><code>Jess 6 8 25000\n</code></pre>\n\n<p>Say that I want to run a statement </p>\n\n<pre><code>if (k2 =&lt; 6)\n{\n   print \"foo\";\n}\n</code></pre>\n\n<p>Of course, k2 doesn't work in Perl. May someone show me (or link me to) how this is done?</p>\n"}, {"tags": ["html", "perl", "cgi"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1488151856, "post_id": 42474587, "comment_id": 72091670, "body": "See alos <a href=\"https://metacpan.org/pod/Lingua::Concordance\" rel=\"nofollow noreferrer\">Lingua::Concordance</a>"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1488168849, "post_id": 42474587, "comment_id": 72095715, "body": "So... you&#39;ve written 100+ lines of code---which you&#39;ve dumped here in its entirety---but you couldn&#39;t even make an attempt at using something like <a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\"><code>glob</code></a> or <a href=\"http://perldoc.perl.org/functions/readdir.html\" rel=\"nofollow noreferrer\"><code>readdir</code></a> to scan a directory?"}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1488177436, "post_id": 42474587, "comment_id": 72098544, "body": "@Matt, your answer is not helpful either. Deep Shah has had trouble enough a month and a half ago, trying to get his CGI working, and gets stuck again. That is where his massive code dump has come from. Hopefully your <code>readdir</code> suggestion might get some progress... but @Matt can do better than that - grtzzz"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1488181511, "post_id": 42474587, "comment_id": 72100428, "body": "Before you do anything else you should go and accept an answer to each of your previous questions that has been resolved."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1488215881, "post_id": 42474587, "comment_id": 72122973, "body": "@vanHoesel I didn&#39;t provide an answer! And I won&#39;t provide an answer to a question that shows no research effort or attempt to solve the problem. As it&#39;s currently written, this is not a good question for SO."}, {"owner": {"reputation": 15, "user_id": 6453374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5890302852eb03de7464e985b4284b7c?s=128&d=identicon&r=PG&f=1", "display_name": "Deep Shah", "link": "https://stackoverflow.com/users/6453374/deep-shah"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1488364894, "post_id": 42474587, "comment_id": 72194778, "body": "@MattJacob I am totally new to Perl and in fact this is actually my first Perl script so am still learning how to do things in Perl."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 6453374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5890302852eb03de7464e985b4284b7c?s=128&d=identicon&r=PG&f=1", "display_name": "Deep Shah", "link": "https://stackoverflow.com/users/6453374/deep-shah"}, "edited": false, "score": 0, "creation_date": 1488364164, "post_id": 42482122, "comment_id": 72194263, "body": "Thanks a lot for your help"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1488187909, "creation_date": 1488187909, "answer_id": 42482122, "question_id": 42474587, "link": "https://stackoverflow.com/questions/42474587/input-multiple-txt-files-in-perl/42482122#42482122", "title": "input multiple .txt files in Perl", "body": "<p>The <code>glob()</code> function will return a list of files which match a pattern.</p>\n\n<pre><code>my @text_files = glob('*.txt');\n</code></pre>\n\n<p>Of course, you probably don't need the intermediate <code>@text_files</code> variable.</p>\n\n<pre><code>while (my $file = glob('*.txt')) {\n  open my $fh, '&lt;', $file or die \"$file: $!\";\n  # do something with the filehandle\n}\n</code></pre>\n\n<p>Some other suggestions for your code.</p>\n\n<ul>\n<li><code>-w</code> was largely replaced with <code>use warnings</code> when Perl 5.6 was released in 2000.</li>\n<li><code>new CGI</code> is far better written as <code>CGI-&gt;new</code>.</li>\n<li>Changes to special variables (like <code>$/</code>) should always be localised.</li>\n<li>Please use lexical filehandles and the three-arg version of <code>open()</code> (as demonstrated in my example above).</li>\n<li>If you're using CGI.pm, then why not use its <code>header()</code> method as well?</li>\n</ul>\n\n<p>But, most importantly, please reconsider your use of CGI. Please read <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">CGI::Alternatives</a> for some better (by which I mean simpler and more powerful) suggestions.</p>\n"}], "owner": {"reputation": 15, "user_id": 6453374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5890302852eb03de7464e985b4284b7c?s=128&d=identicon&r=PG&f=1", "display_name": "Deep Shah", "link": "https://stackoverflow.com/users/6453374/deep-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 42482122, "answer_count": 1, "score": -2, "last_activity_date": 1488187909, "creation_date": 1488145296, "question_id": 42474587, "link": "https://stackoverflow.com/questions/42474587/input-multiple-txt-files-in-perl", "title": "input multiple .txt files in Perl", "body": "<p>I have an online Perl concordance that searches for a target word in a particular text file and prints the sorted output. The test code presently searches for the keyword only in a single text file and prints the output. But I would like to do the same for all the text files present in the folder and not only a single text file. Any suggestion regarding this would be very helpful.!</p>\n\n<p>Here is the code for my online Concordance:</p>\n\n<pre><code>#!/usr/bin/perl -wT\n\n# require\nuse strict;\nuse diagnostics;\nuse CGI;\n\n# sanity check\nmy $q = new CGI;\nmy $target = $q-&gt;param(\"keyword\");\nmy $radius = $q-&gt;param(\"span\");\nmy $ordinal = $q-&gt;param(\"ord\");\nmy $width = 2*$radius;\nmy $file    = 'DISS.G.HB.002.txt';\nif ( ! $file or ! $target ) {\n\n    print \"Usage: $0 &lt;file&gt; &lt;target&gt;\\n\";\n    exit;\n\n}\n\n# initialize\nmy $count   = 0;\nmy @lines   = ();\n$/          = \"\"; # Paragraph read mode\n\n# open the file, and process each line in it\nopen(FILE, \" &lt; $file\") or die(\"Can not open $file ($!).\\n\");\nwhile(&lt;FILE&gt;){\n\n    # re-initialize\n    my $extract = '';\n\n    # normalize the data\n    chomp;\n    s/\\n/ /g;        # Replace new lines with spaces\n    s/\\b--\\b/ -- /g; # Add spaces around dashes\n\n    # process each item if the target is found\n    while ( $_ =~ /\\b$target\\w*/gi ){\n\n        # find start position\n        my $match = $1;\n        my $pos   = pos;\n        my $start = $pos - $radius - length($match);\n\n        # extract the snippets\n        if ($start &lt; 0){\n            $extract = substr($_, 0, $width+$start+length($match));\n            $extract = (\" \" x -$start) . $extract;\n        }else{\n            $extract = substr($_, $start, $width+length($match));\n            my $deficit = $width+length($match) - length($extract);\n            if ($deficit &gt; 0) {\n                $extract .= (\" \" x $deficit);\n            }\n\n        }\n\n        # add the extracted text to the list of lines, and increment\n        $lines[$count] = $extract;\n        ++$count;\n\n    }\n\n}\n\nsub removePunctuation {\n    my $string = $_[0];\n    $string = lc($string); # Convert to lowercase\n    $string =~ s/[^-a-z ]//g; # Remove non-aplhabetic characters \n    $string =~ s/--+/ /g; #Remove 2+ hyphens with a space \n    $string =~s/-//g; # Remove hyphens\n    $string =~ s/\\s=/ /g;\n    return($string);\n\n}\n\nsub onLeft {\n    #USAGE: $word = onLeft($string, $radius, $ordinal);\n    my $left = substr($_[0], 0, $_[1]);\n    $left = removePunctuation($left);\n    my @word = split(/\\s+/, $left);\n    return($word[-$_[2]]);\n}\n\nsub byLeftWords {\n    my $left_a = onLeft($a, $radius, $ordinal);\n    my $left_b = onLeft($b, $radius, $ordinal);\n    lc($left_a) cmp lc($left_b);\n}\n\n\n# process each line in the list of lines\n\nprint \"Content-type: text/plain\\n\\n\";\nmy $line_number = 0;\n\nforeach my $x (sort byLeftWords @lines){\n    ++$line_number;\n    printf \"%5d\",$line_number;\n    print \" $x\\n\\n\";\n}\n\n# done\nexit;\n</code></pre>\n"}, {"tags": ["perl", "dancer"], "answers": [{"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 0, "last_activity_date": 1488143692, "last_edit_date": 1488143692, "creation_date": 1488140457, "answer_id": 42473765, "question_id": 42471623, "link": "https://stackoverflow.com/questions/42471623/why-do-i-get-internal-server-error-when-i-try-to-return-an-object-from-a-dance/42473765#42473765", "title": "Why do I get &quot;Internal Server Error&quot; when I try to return an object from a Dancer2 route with the JSON serializer?", "body": "<p>Dancer2 doesn't support returning arbitrary objects from route handlers. You can only return objects of the <a href=\"https://metacpan.org/source/XSAWYERX/Dancer2-0.204004/lib/Dancer2/Core/Route.pm#L135\" rel=\"nofollow noreferrer\">following types</a>:</p>\n\n<ul>\n<li>Plack::Response</li>\n<li>Dancer2::Core::Response</li>\n<li>Dancer2::Core::Response::Delayed</li>\n</ul>\n\n<p>The type is checked before serialization, so the serializer is never even invoked if the object type is unsupported.</p>\n\n<p>It looks like arbitrary objects were <a href=\"http://lists.preshweb.co.uk/pipermail/dancer-users/2015-July/004671.html\" rel=\"nofollow noreferrer\">supported at one point</a>, but not any more. The workaround is to return a non-blessed reference, as you've already discovered.</p>\n"}], "owner": {"reputation": 349, "user_id": 2773127, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fef172929e808d472f63d56950a4b62?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Staab", "link": "https://stackoverflow.com/users/2773127/peter-staab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1488209102, "creation_date": 1488129262, "last_edit_date": 1488209102, "question_id": 42471623, "link": "https://stackoverflow.com/questions/42471623/why-do-i-get-internal-server-error-when-i-try-to-return-an-object-from-a-dance", "title": "Why do I get &quot;Internal Server Error&quot; when I try to return an object from a Dancer2 route with the JSON serializer?", "body": "<p>I have a Dancer2 application that I want to return a serialized version of an object using the JSON serializer.  Here's a small version of it:</p>\n\n<pre><code>{\n  package User;\n\n  use Moo;\n  use Types::Standard qw/Str/;\n  has name =&gt; (is=&gt;'ro',isa =&gt;Str, default =&gt; \"\");\n\n  sub TO_JSON { return { %{ shift() } };}\n}\n\nuse Dancer2;\nset serializer =&gt; 'JSON';\nset engines=&gt;{serializer=&gt;{JSON=&gt;{allow_blessed=&gt;1,convert_blessed=&gt;1}}};\n\nget '/hello/:name' =&gt; sub {\n  my $user = User-&gt;new({name=&gt;route_parameters-&gt;{name}});\n  return $user-&gt;TO_JSON;  ## error if the TO_JSON method is not explicitly called. \n};\ndance;\n1;\n</code></pre>\n\n<p>If the <code>TO_JSON</code> method is explicitly called, then obviously the object is returned as a hash ref and then serialized as:</p>\n\n<pre><code>{\"name\":\"fred\"}\n</code></pre>\n\n<p>as an example.  If the last line in the GET is </p>\n\n<pre><code>return $user;\n</code></pre>\n\n<p>then the following error is returned:</p>\n\n<pre><code>{\"title\":\"Error 500 - Internal Server Error\",\"message\":\"\",\"status\":500,\"exception\":\"Unrecognized response type from route: User.\\n\"}\n</code></pre>\n\n<p>I thought that setting the <code>allow_blessed</code> and <code>convert_blessed</code> would handle calling <code>TO_JSON</code> automatically, however I can't find the documentation on this for Dancer2.  Is this something that was dropped? </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 322, "user_id": 300113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2e2857243a00c807abd5e6b5d9e3a6?s=128&d=identicon&r=PG", "display_name": "Hugh Barnard", "link": "https://stackoverflow.com/users/300113/hugh-barnard"}, "edited": false, "score": 1, "creation_date": 1488128777, "post_id": 42471466, "comment_id": 72083402, "body": "That will be <code>cp</code> not <code>copy</code>, at least. I didn&#39;t check the rest of it, though."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1488130026, "post_id": 42471466, "comment_id": 72083874, "body": "<code>use File::Copy;</code> ...then: <code>copy $file $dest or die $!;</code>. Also, what if you have multiple files with the same name? You&#39;ll overwrite them in the dest directory."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 322, "user_id": 300113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2e2857243a00c807abd5e6b5d9e3a6?s=128&d=identicon&r=PG", "display_name": "Hugh Barnard", "link": "https://stackoverflow.com/users/300113/hugh-barnard"}, "edited": false, "score": 0, "creation_date": 1488130166, "post_id": 42471466, "comment_id": 72083917, "body": "What OS are you using? As @HughBarnard already said: under Unix it will be <code>cp</code> instead of <code>copy</code>, but IIRC Windows uses <code>copy</code>. To get around that, use <code>File::Copy</code> as it&#39;s independant of the underlying OS. Also, your code copies only the files in the given directory, not recursively."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1488130319, "post_id": 42471466, "comment_id": 72083972, "body": "Oops, I just noticed the error message <code>sh: copy...</code>. So  assume it&#39;s some kind of Unix."}, {"owner": {"reputation": 322, "user_id": 300113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2e2857243a00c807abd5e6b5d9e3a6?s=128&d=identicon&r=PG", "display_name": "Hugh Barnard", "link": "https://stackoverflow.com/users/300113/hugh-barnard"}, "edited": false, "score": 0, "creation_date": 1488130518, "post_id": 42471466, "comment_id": 72084057, "body": "Yes, sorry, I guessed as Unix/Linux etc. based on the <code>sh</code> on the output but that was naughty. Thanks!"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 322, "user_id": 300113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2e2857243a00c807abd5e6b5d9e3a6?s=128&d=identicon&r=PG", "display_name": "Hugh Barnard", "link": "https://stackoverflow.com/users/300113/hugh-barnard"}, "edited": false, "score": 0, "creation_date": 1488130781, "post_id": 42471466, "comment_id": 72084144, "body": "No, @HughBarnard, no need to be sorry. I think you were perfectly right. I was just too quick with my 1st comment."}, {"owner": {"reputation": 47, "user_id": 6946809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de2dc545256dc36ecc3c9c003050cf69?s=128&d=identicon&r=PG&f=1", "display_name": "shuttle folks", "link": "https://stackoverflow.com/users/6946809/shuttle-folks"}, "edited": false, "score": 0, "creation_date": 1488130876, "post_id": 42471466, "comment_id": 72084192, "body": "After changing copy to cp .i was followed by above error@PerlDuck"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1488131268, "post_id": 42471466, "comment_id": 72084355, "body": "<i>&quot;After changing copy to cp&quot;</i> you invalidated all the comments and posed another question. Unix uses <b>forward slashes</b>, i.e. use <code>&#47;home&#47;radar&#47;sample&#47;project_status.config</code> instead of <code>\u2026sample\\\\project\u2026</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1488132955, "post_id": 42471466, "comment_id": 72084986, "body": "Why are you running <code>cp</code>, capturing its output in a string, then running that string as another command?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1488133947, "post_id": 42471466, "comment_id": 72085369, "body": "This is much simpler written as <code>copy $_, $destination for glob &#39;*.config&#39;</code>"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488134542, "post_id": 42471466, "comment_id": 72085636, "body": "@Borodin \u2026 given <code>use File::Copy;</code> is engaged."}], "owner": {"reputation": 47, "user_id": 6946809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de2dc545256dc36ecc3c9c003050cf69?s=128&d=identicon&r=PG&f=1", "display_name": "shuttle folks", "link": "https://stackoverflow.com/users/6946809/shuttle-folks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488133744, "creation_date": 1488128388, "last_edit_date": 1488133744, "question_id": 42471466, "link": "https://stackoverflow.com/questions/42471466/how-to-copy-all-config-files-from-current-folder-and-subfolders-into-another-ne", "title": "How to copy all .config files from current folder and subfolders into another new location", "body": "<p>I tried to copy all .config files from my current folder and subfolders into a new location using Perl.</p>\n\n<p>Code which I tried:</p>\n\n<pre><code>    use strict;\n    use warnings;\n\n    my $pwd         = \"/home/radar/sample\";\n    my $destination = \"/home/radar/proj\";\n\n    opendir(DIR, \"$pwd\") or die \"Error\";\n    my @files = readdir(DIR);\n    closedir(DIR);\n\n    foreach my $file ( @files ) {\n        next if ($file !~ /\\.config$/i);  # filtered only file with extension .config\n        system(`cp \\\"$pwd\\\\$file\\\" \\\"$destination\\\"`); \n    }\n</code></pre>\n\n<p>Error:</p>\n\n<blockquote>\n  <p>cp: cannot stat \u2018/home/radar/sample\\project_status.config\u2019</p>\n</blockquote>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1488181657, "last_edit_date": 1488181657, "creation_date": 1488133435, "answer_id": 42472370, "question_id": 42471311, "link": "https://stackoverflow.com/questions/42471311/appfatpacker-on-windows/42472370#42472370", "title": "App::FatPacker on Windows", "body": "<p>I would say that <code>packlists-for</code> isn't finding any .packlist files</p>\n\n<p>The documentation for <code>fatpack</code> says this</p>\n\n<blockquote>\n  <p><strong>packlists-for</strong> </p>\n\n<pre><code>$ fatpack packlists-for Module1 Module2 Module3\n</code></pre>\n  \n  <p>Searches your perl's @INC for .packlist files containing the .pm files for the modules requested and emits a list of unique packlist files to STDOUT.</p>\n  \n  <p>These packlists will, in a pure cpan-installation environment, be all non-core distributions required for those modules.</p>\n  \n  <p>Unfortunately most vendors strip the .packlist files so if you installed modules via e.g. apt-get you may be missing those modules; installing your dependencies into a\u00a0<code>local::lib</code>\u00a0first is the preferred workaround.</p>\n</blockquote>\n\n<p>I think that's useful advice that may well fix your problem</p>\n"}], "owner": {"reputation": 3045, "user_id": 951615, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/32f59de3e1040fae90a803448e43316f?s=128&d=identicon&r=PG", "display_name": "smith", "link": "https://stackoverflow.com/users/951615/smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1488181657, "creation_date": 1488127679, "last_edit_date": 1488132908, "question_id": 42471311, "link": "https://stackoverflow.com/questions/42471311/appfatpacker-on-windows", "title": "App::FatPacker on Windows", "body": "<p>I have a script on Windows which uses multiple pure Perl modules from CPAN.\nI am trying to ship this script without the need to reinstall those modules from CPAN using <code>App::FatPacker</code>.</p>\n\n<p>I installed <code>App::FatPacker</code>  ( up to date (0.010007) version ) on Portable Strawberry Perl 5.24 .</p>\n\n<p>When I run the following command</p>\n\n<pre><code>fatpack pack myscript.pl &gt; myscript.packed.pl\n</code></pre>\n\n<p>I get</p>\n\n<blockquote>\n  <p>syntax OK</p>\n</blockquote>\n\n<p>but the fatlib is empty and when I run my script it fails.</p>\n\n<p>I tried to use this script which does nothing but load <code>Geo::IP::PurePerl</code></p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Geo::IP::PurePerl;\n</code></pre>\n\n<p>and run again this command :</p>\n\n<pre><code>fatpack pack myscript.pl &gt; myscript.packed.pl\n</code></pre>\n\n<p>Then I ran <code>myscript.packed.pl</code> on another instance of Strawberry Perl 5.24, I get the following error: </p>\n\n<blockquote>\n  <p>Can't locate Geo/IP/PurePerl.pm in @INC (you may need to install the Geo::IP::PurePerl module</p>\n</blockquote>\n\n<p>I tried to debug it by building step by step</p>\n\n<p>The fatpack trace creates a trace list as expected, including <code>Geo::IP::PurePerl</code></p>\n\n<p>The fatpack packlists-for finished successfully but the fatlib is empty.</p>\n\n<p>Any idea?</p>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1488126892, "post_id": 42471050, "comment_id": 72082730, "body": "Check how other scripts do it, for example in the <code>App::</code> namespace."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1488128285, "post_id": 42471050, "comment_id": 72083211, "body": "Good examples are App::cpanminus, App::cpanminus::reporter or CPAN::Uploader. Don&#39;t publish anything that starts with a small  letter in the first part of the namespace. Those are reserved for pragmas."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488132481, "post_id": 42471050, "comment_id": 72084821, "body": "Write all your documentation as POD in the source itself. Noone reads README files."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1488151280, "post_id": 42471050, "comment_id": 72091501, "body": "Re &quot;<i>CPAN seems to be taking the version from the module rather than the script as well</i>&quot;, With both MM and MB, you can specify which file to take the version from"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1488151319, "post_id": 42471050, "comment_id": 72091513, "body": "Re &quot;<i>a module (lib/unifdefplus.pm)</i>&quot;, Don&#39;t put on CPAN modules with a root namesapce"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1488163679, "post_id": 42471050, "comment_id": 72094466, "body": "@ikegami has a very important point, and I&#39;ve updated my answer with this information. All new CPAN authors should always read <a href=\"https://pause.perl.org/pause/query?ACTION=pause_namingmodules\" rel=\"nofollow noreferrer\">On the naming of modules</a>."}, {"owner": {"reputation": 434, "user_id": 2766918, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b30ed3dc92a395952309d65497b3b872?s=128&d=identicon&r=PG&f=1", "display_name": "user2766918", "link": "https://stackoverflow.com/users/2766918/user2766918"}, "edited": false, "score": 0, "creation_date": 1488237652, "post_id": 42471050, "comment_id": 72134331, "body": "Sorry, the actual module is code::UnifdefPlus, which does start with a capital, but also has camel case (hope that&#39;s OK).    I&#39;m using a Build.PL to create the tarball, where the files are <code>script&#47;unifdef+.pl</code>, <code>lib&#47;UnifdefPlus.pm</code>, <code>Build.PL</code>, <code>README</code>, and some generated files.  I&#39;m not sure what MM or MB are?"}], "answers": [{"comments": [{"owner": {"reputation": 434, "user_id": 2766918, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b30ed3dc92a395952309d65497b3b872?s=128&d=identicon&r=PG&f=1", "display_name": "user2766918", "link": "https://stackoverflow.com/users/2766918/user2766918"}, "edited": false, "score": 0, "creation_date": 1488285484, "post_id": 42471424, "comment_id": 72155242, "body": "Ok, just to be clear, you&#39;re suggesting I move my module from code::UnifdefPlus to App::Unifdefplus.   I&#39;m using the perl <code>Module::Build</code> utility to generate the file.   I&#39;ll see if it has an equivalent to MakeMaker&#39;s EXE_FILES option."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 434, "user_id": 2766918, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b30ed3dc92a395952309d65497b3b872?s=128&d=identicon&r=PG&f=1", "display_name": "user2766918", "link": "https://stackoverflow.com/users/2766918/user2766918"}, "edited": false, "score": 0, "creation_date": 1488287094, "post_id": 42471424, "comment_id": 72156300, "body": "Yes, that&#39;s what I&#39;m saying."}, {"owner": {"reputation": 434, "user_id": 2766918, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b30ed3dc92a395952309d65497b3b872?s=128&d=identicon&r=PG&f=1", "display_name": "user2766918", "link": "https://stackoverflow.com/users/2766918/user2766918"}, "edited": false, "score": 0, "creation_date": 1488374737, "post_id": 42471424, "comment_id": 72201630, "body": "Ok, thanks.  I&#39;ve moved it to App.   There didn&#39;t seem to be an EXE_FILES equivalent in Module::Build, so I&#39;m hoping that moving it to App is sufficient.   Thanks for the help."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 6, "last_activity_date": 1488164636, "last_edit_date": 1488164636, "creation_date": 1488128207, "answer_id": 42471424, "question_id": 42471050, "link": "https://stackoverflow.com/questions/42471050/perl-cpan-how-to-distribute-script-rather-than-module/42471424#42471424", "title": "Perl/CPAN how to distribute script rather than module", "body": "<p>Right off the bat, please read <a href=\"https://pause.perl.org/pause/query?ACTION=pause_namingmodules\" rel=\"nofollow noreferrer\">On the naming of modules</a> from the PAUSE admins. If you still have questions, or you're still unsure, reach out to <code>modules &lt;at&gt; perl.org</code>.</p>\n\n<p>The simplest way is to use a name in the <code>App::</code> namespace, such as <code>App::MyMod</code>.</p>\n\n<p>Typically, I'd keep the script and module documentation within their separate files, but near the top of the module documentation, clearly link to the script's documentation, and state that most users will want to read that for normal use.</p>\n\n<p>To build the <code>README</code> from the script documentation:</p>\n\n<pre><code>pod2readme bin/my_script\n</code></pre>\n\n<p>Likewise, if you change your mind and want <code>README</code> to reference the module instead:</p>\n\n<pre><code>pod2readme lib/App/MyMod.pm\n</code></pre>\n\n<p>Assuming you're using <a href=\"https://metacpan.org/pod/ExtUtils::MakeMaker\" rel=\"nofollow noreferrer\">ExtUtils::MakeMaker</a> for your builds, you can ensure that the script is installed by adding a directive:</p>\n\n<pre><code>EXE_FILES =&gt; [\n    'bin/my_script'\n],\n</code></pre>\n\n<p>With of course your script in the top-level <code>bin</code> directory of your distribution. Other build systems have similar directives.</p>\n"}], "owner": {"reputation": 434, "user_id": 2766918, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b30ed3dc92a395952309d65497b3b872?s=128&d=identicon&r=PG&f=1", "display_name": "user2766918", "link": "https://stackoverflow.com/users/2766918/user2766918"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 42471424, "answer_count": 1, "score": 6, "last_activity_date": 1488164636, "creation_date": 1488126510, "question_id": 42471050, "link": "https://stackoverflow.com/questions/42471050/perl-cpan-how-to-distribute-script-rather-than-module", "title": "Perl/CPAN how to distribute script rather than module", "body": "<p>I just published my first perl program, unifdef+ (code::unifdefplus, v0.5.3), but I'm not sure if I've done it properly.   The program is broken into two parts -- a script (script/unifdef+.pl), and a module (lib/unifdefplus.pm).   The script is basically a wrapper for the module.   This is supposed to act as a command line utility (which is in reality what I wanted to publish).</p>\n\n<p>The README file I included documents the script, not the module.   CPAN seems to be taking the version from the module rather than the script as well (which is undefined at the moment).   </p>\n\n<p>So, my questions is: if I want this to be indexed as a script rather than a module, do I need to do anything differently?  Also, I'm taking it I should write some documentation for the module as well -- in which case I'm assuming it should be a README file in the lib directory?</p>\n\n<p>Again, I apologize, but this is the first time I've done this, and I want to make sure I've done it right.</p>\n"}, {"tags": ["xml", "perl", "serialization", "moose"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1488083247, "post_id": 42464465, "comment_id": 72071286, "body": "The <a href=\"http://search.cpan.org/~ether/MooseX-Storage-0.52/lib/MooseX/Storage.pm\" rel=\"nofollow noreferrer\">MooseX::Storage</a> does it by using <a href=\"http://search.cpan.org/~ether/MooseX-Storage-0.52/lib/MooseX/Storage/Format/JSON.pm\" rel=\"nofollow noreferrer\">MooseX::Storage::Format::JSON</a> role.  From what I can see, it&#39;s the only <code>MooseX::Storage::Format</code> serialization role our there.  Perhaps write your own? Code for <code>Format::JSON</code> is a few dozen lines (using a module). I don&#39;t know what exactly you need to serialize, but maybe <a href=\"http://search.cpan.org/~mikewong/XML-Dumper-0.81/Dumper.pm\" rel=\"nofollow noreferrer\">XML::Dumper</a> can help. It claims to be able to work with objects."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1488089803, "post_id": 42464465, "comment_id": 72072456, "body": "@zdim, Re &quot;<i>From what I can see, it&#39;s the only MooseX::Storage::Format serialization role our there</i>&quot;, MooseX::Storage::Format::JSON, ...::YAML, and ...::Storable all come with MooseX::Storage."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488089862, "post_id": 42464465, "comment_id": 72072466, "body": "@Blaise Pascal, So write MooseX::Storage::Format::XML."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488090091, "post_id": 42464465, "comment_id": 72072525, "body": "@ikegami  Right. I meant to say that I didn&#39;t see any other modules under <code>MooseX::Storage::Format</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1488105818, "post_id": 42464465, "comment_id": 72076103, "body": "Something you have to take into account when working with MooseX::Storage is what when you for example keep objects in a key/value store (e.g. product objects in an ecom application), and you have lots of different sub-classes for different product types, you have to load all of these sub-classes somewhere in the application, because MooseX::Storage cannot do that for you. You could teach it to do that of course, but it&#39;s easier to just load all those classes, e.g. in your main application class."}, {"owner": {"reputation": 845, "user_id": 260307, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1c1745cafe7a2ff1ffddb287eb71e812?s=128&d=identicon&r=PG", "display_name": "Blaise Pascal", "link": "https://stackoverflow.com/users/260307/blaise-pascal"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1488222730, "post_id": 42464465, "comment_id": 72126951, "body": "@ikegami If only I were being paid to write it."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1488105693, "post_id": 42465412, "comment_id": 72076066, "body": "This is a really nice guide. If XML is desired specifically we can assume that the OP knows their way around XML, so instead of XML::Dumper, maybe XML::Compile could be an alternative. If they write an actual XML schema and feed it into XML::Compile along with the data, they can even easily accept data from external sources to create objects from directly just by giving out the schema."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1488164560, "post_id": 42465412, "comment_id": 72094659, "body": "@simbabque  Thank you. It was meant to be basic. I didn&#39;t want to touch the <code>XML</code> processing, as that is another problem. That is a nice idea that you offer. Perhaps the OP should ask about <code>XML</code> as a separate question, with a description of what they are doing and why they chose that format."}, {"owner": {"reputation": 845, "user_id": 260307, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1c1745cafe7a2ff1ffddb287eb71e812?s=128&d=identicon&r=PG", "display_name": "Blaise Pascal", "link": "https://stackoverflow.com/users/260307/blaise-pascal"}, "edited": false, "score": 0, "creation_date": 1488223642, "post_id": 42465412, "comment_id": 72127457, "body": "I&#39;m dealing with legacy code/legacy data, so I didn&#39;t choose the XML format, merely inherited it from someone who made that decision a decade or two ago. Unfortunately, this means that <code>XML::Dumper</code> can&#39;t be used, as it doesn&#39;t dump the right format.  The existing <code>MooseX::Storage::Format</code> modules basically encapsulate an existing dumper like <code>XML::Dumper</code>, but don&#39;t give any control over the format. That&#39;s not what I need."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 845, "user_id": 260307, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1c1745cafe7a2ff1ffddb287eb71e812?s=128&d=identicon&r=PG", "display_name": "Blaise Pascal", "link": "https://stackoverflow.com/users/260307/blaise-pascal"}, "edited": false, "score": 0, "creation_date": 1488223857, "post_id": 42465412, "comment_id": 72127573, "body": "@BlaisePascal  Hang on ... in the above code you can plug in any <code>XML</code> processing that you want.  (For example, your/theirs existing libraries, if they work.) It gives you the <i>framework to switch to Moose</i>, which is what you aks about in my understanding.  That&#39;s why I didn&#39;t touch <code>XML</code> -- I used <code>XML::Dumper</code> as a place-holder for details of the specific <code>XML</code> processing.  Am I misunderstanding the question?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 845, "user_id": 260307, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1c1745cafe7a2ff1ffddb287eb71e812?s=128&d=identicon&r=PG", "display_name": "Blaise Pascal", "link": "https://stackoverflow.com/users/260307/blaise-pascal"}, "edited": false, "score": 0, "creation_date": 1488224207, "post_id": 42465412, "comment_id": 72127757, "body": "@BlaisePascal  There are no &quot;<i>existing <code>MooseX::Storage::Format</code> modules</i>&quot; for <code>XML</code> (as far as I can tell).  But the whole <code>MooseX::Storage</code> is written so that it is easy to plug in &quot;roles&quot; for any desrired format, which is what I meant to show above.  Then you write/use suitable code for your particular purpose.  Again, I am following the &quot;<i>want to convert to being Moose-based</i>&quot; -- you add a role using existing code (if it works)."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1522133729, "last_edit_date": 1522133729, "creation_date": 1488090026, "answer_id": 42465412, "question_id": 42464465, "link": "https://stackoverflow.com/questions/42464465/how-do-i-serialize-moose-objects-to-xml/42465412#42465412", "title": "How do I serialize Moose objects to XML?", "body": "<p>The <a href=\"http://search.cpan.org/~ether/MooseX-Storage-0.52/lib/MooseX/Storage.pm\" rel=\"nofollow noreferrer\">MooseX::Storage</a> serializes data in <code>JSON</code> by using <a href=\"http://search.cpan.org/~ether/MooseX-Storage-0.52/lib/MooseX/Storage/Format/JSON.pm\" rel=\"nofollow noreferrer\">MooseX::Storage::Format::JSON</a> <em>role</em>, which is a good example for how to plug in other formats.   I cannot see any roles for <code>XML</code> serialization, but it is easy to write your own and the module provides a hook for it.</p>\n\n<p>This minimal example shows how to write a <em>role</em> and <em>consume</em> (use) it in a class. A role is a class-like package which never gets instantiated on its own but is rather absorbed by classes that use it. It can be used by multiple classes. At the end it is shown how to hook the new role into <code>MooseX::Storage</code> and thus use that in your class.</p>\n\n<p>It uses <a href=\"http://search.cpan.org/~mikewong/XML-Dumper-0.81/Dumper.pm\" rel=\"nofollow noreferrer\">XML::Dumper</a> for serialization itself, mostly as a placeholder for custom code (if needed).</p>\n\n<p><strong>Point.pm</strong></p>\n\n<pre><code>package Point;    \n\nuse Moose;\n\nuse overload  q(\"\") =&gt; sub { \n    my $self = shift; \n    return '(' . $self-&gt;x . ', ' . $self-&gt;y . ')' \n};  \n\nhas 'x' =&gt; (is =&gt; 'rw', isa =&gt; 'Int', required =&gt; 1, default =&gt; 0); \nhas 'y' =&gt; (is =&gt; 'rw', isa =&gt; 'Int', required =&gt; 1, default =&gt; 0); \n\nwith 'SerializeXML';\n\nsub BUILD { print \"Created a Point $_[0]\\n\" }\n\n__PACKAGE__-&gt;meta-&gt;make_immutable;    \n1;\n</code></pre>\n\n<p>The only specific statement here is the line <code>with 'SerializeXML';</code></p>\n\n<p><strong>SerializeXML.pm</strong></p>\n\n<pre><code>package SerializeXML;\n\nuse Moose::Role;    \nuse XML::Dumper;\n\nsub to_xml {\n    my ($self) = shift;\n    return XML::Dumper-&gt;new-&gt;pl2xml($self);  # or use custom code\n}\n\nsub from_xml {\n    my ($self, $xml) = @_; \n    return XML::Dumper-&gt;new-&gt;xml2pl($xml);\n}\n\nno Moose::Role;\n1;\n</code></pre>\n\n<p>The construction of an object from <code>XML</code> should be done via <code>new</code>, and/or as a class method.</p>\n\n<p><strong>main</strong></p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Point;\n\nmy $pt = Point-&gt;new(x =&gt; 10, y =&gt; 12);\n\nmy $obj_xml = $pt-&gt;to_xml;\nprint \"$obj_xml\\n\";\n\nmy $obj = $pt-&gt;from_xml($obj_xml);\nprint \"Object via role: $obj\\n\";\n</code></pre>\n\n<p>This prints</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Created a Point (10, 12)\n&lt;perldata&gt;\n &lt;hashref blessed_package=\"Point\" memory_address=\"0x1691438\"&gt;\n  &lt;item key=\"x\"&gt;10&lt;/item&gt;\n  &lt;item key=\"y\"&gt;12&lt;/item&gt;\n &lt;/hashref&gt;\n&lt;/perldata&gt;\nObject via role: (10, 12)\n</code></pre>\n\n<p>Methods for writing to and loading from a file can be added. But now you have a ready role which can be hooked to <code>MooseX::Storage</code>, as shown below.</p>\n\n<p>I don't know nor have tested how well <code>XML::Dumper</code> works with <code>Moose</code>. Please test and if it doesn't cut it for your needs swap calls to it with your own code that does what you need.</p>\n\n<hr>\n\n<p>The remaining step is to integrate this in <code>MooseX::Storage</code>, if desired.</p>\n\n<p>There are two necessary small changes to make in the above code. Use role in <code>Point</code> as</p>\n\n<pre><code>use MooseX::Storage;\n\nwith Storage(format =&gt; '=SerializeXML', io =&gt; 'File');\n</code></pre>\n\n<p>and rename <code>to_xml</code> and <code>from_xml</code> to <code>freeze</code> and <code>thaw</code> (or add these, with same code).</p>\n\n<p>Then you can use <code>store</code> and <code>load</code> in <code>main</code> in order to write to <code>$file</code> and load from it</p>\n\n<pre><code>$pt-&gt;store($file);\nmy $pt_new = Point-&gt;load($file);\n</code></pre>\n\n<p>The syntax <code>=PackageName</code> is for a namespace prefix other than <code>MooseX::Storage::Format::</code></p>\n\n<p>For roles see <a href=\"http://search.cpan.org/~ether/Moose-2.2004/lib/Moose/Manual/Roles.pod\" rel=\"nofollow noreferrer\">Moose::Manual::Roles</a> and <a href=\"http://search.cpan.org/search?query=+Moose%3A%3ACookbook%3A%3ARoles%3A%3A&amp;mode=all\" rel=\"nofollow noreferrer\">Moose::Cookbook::Roles::</a> namespace (examples).</p>\n"}, {"tags": [], "owner": {"reputation": 4383, "user_id": 2264756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72ca0434d6998fb97198f278926c6abf?s=128&d=identicon&r=PG", "display_name": "perigrin", "link": "https://stackoverflow.com/users/2264756/perigrin"}, "is_accepted": false, "score": 1, "last_activity_date": 1510171008, "creation_date": 1510171008, "answer_id": 47188574, "question_id": 42464465, "link": "https://stackoverflow.com/questions/42464465/how-do-i-serialize-moose-objects-to-xml/47188574#47188574", "title": "How do I serialize Moose objects to XML?", "body": "<p>So one of the reasons why <code>MooseX::Storage</code> doesn't have a XML storage format is that as you've discovered, most people have a legacy format for XML that they need to write to. XML and Perl actually have very different ways of representing data and figuring that out the right way to translate between the two isn't actually something you can do automatically.</p>\n\n<p>You're not going to find an \"off the shelf\" option per-se. As  simbabque mentions in a comment if you have or can easily build a Schema for your data then <code>XML::Compile</code> or 'XML::Pastor<code>might work for you (</code>XML::Compile<code>is better maintained). If you're willing to do some grunt work</code>XML::Toolkit<code>is designed to translate an example document into a series of Moose classes that it can then later re-serialize. However I haven't touched</code>XML::Toolkit` in a <em>long</em> time so YMMV on what it needs to get running.</p>\n\n<p>I think that ultimately you'll find that the simplest solution is the one you already have, hand-built <code>toXML</code> methods. Moose doesn't stop you from doing that, and in fact gives you a bunch of tools to figure out how to make it more maintainable. Look at how MooseX::Storage itself is implemented to see a good path forward.</p>\n"}], "owner": {"reputation": 845, "user_id": 260307, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1c1745cafe7a2ff1ffddb287eb71e812?s=128&d=identicon&r=PG", "display_name": "Blaise Pascal", "link": "https://stackoverflow.com/users/260307/blaise-pascal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1522133729, "creation_date": 1488080361, "question_id": 42464465, "link": "https://stackoverflow.com/questions/42464465/how-do-i-serialize-moose-objects-to-xml", "title": "How do I serialize Moose objects to XML?", "body": "<p>I have a bunch of legacy modules I want to convert to being Moose-based. The modules currently have \"toXML\" methods, which are hand-coded using XML::LibXML.</p>\n\n<p>Is there a module or technique for serializing Moose objects to XML?</p>\n\n<p>I have looked at MooseX::Storage, but that handles JSON, YAML, and Storage, not XML. A google search for Moose and XML yields lots of references to XML::Rabbit, which seems to be good for parsing XML into Moose classes, but there's not a lot out there for taking Moose objects and serializing them to XML. </p>\n\n<p>The 6-year-old thread at <a href=\"http://grokbase.com/t/perl/moose/11akp809sr/java-annotation-net-attributes-in-moose\" rel=\"nofollow noreferrer\">http://grokbase.com/t/perl/moose/11akp809sr/java-annotation-net-attributes-in-moose</a> is extremely close to what I want to do, but there doesn't seem to be any followup on it.</p>\n"}, {"tags": ["perl", "range", "intervals"], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "edited": false, "score": 0, "creation_date": 1488135182, "post_id": 42464412, "comment_id": 72085913, "body": "Thanks! Fantastic. I was wondering how is this working. Please explain to me."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "edited": false, "score": 0, "creation_date": 1488154028, "post_id": 42464412, "comment_id": 72092238, "body": "Added explanation"}, {"owner": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "edited": false, "score": 0, "creation_date": 1488417949, "post_id": 42464412, "comment_id": 72226040, "body": "Thanks, I got it."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1488308996, "last_edit_date": 1488308996, "creation_date": 1488079718, "answer_id": 42464412, "question_id": 42464026, "link": "https://stackoverflow.com/questions/42464026/perl-fast-checking-of-overlapping-intervals/42464412#42464412", "title": "Perl fast checking of overlapping intervals?", "body": "<p>You never need the numbers in between the bounds!!!! Just check against the bounds.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>         S---------E\n L-----H                      No overlap\n      L-----H                 Overlap\n           L-----H            Overlap\n                L-----H       Overlap\n                     L----H   No overlap\n      L---------------H       Overlap\n</code></pre>\n\n<p>So they overlap except when H&lt;S or L&gt;E.</p>\n\n<pre><code>while ( my $line = &lt;DATA&gt; ) {\n    chomp $line;\n    my ($lo, $hi) = split \"\\t\", $line;\n    if ( $lo &lt;= $end &amp;&amp; $hi &gt;= $start ) {\n        print \"$start to $end found in $line\\n\";\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "edited": false, "score": 0, "creation_date": 1488135631, "post_id": 42470057, "comment_id": 72086084, "body": "Sorry, I am not able to understand."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "edited": false, "score": 0, "creation_date": 1488135669, "post_id": 42470057, "comment_id": 72086099, "body": "What don&#39;t you understand?"}, {"owner": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "edited": false, "score": 0, "creation_date": 1488149174, "post_id": 42470057, "comment_id": 72090810, "body": "This may be simple but I feel stupid here. How the <code>unless</code> here checking each overlap between two intervals?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "edited": false, "score": 0, "creation_date": 1488178640, "post_id": 42470057, "comment_id": 72099036, "body": "@SSh: The two ranges are <code>$start</code> to <code>$end</code> and <code>$low</code> to <code>$high</code>. The only ways that the two can <i>not</i> overlap is if the end of the first range comes <i>before</i> the beginning of the second, or if the beginning of the first range comes <i>after</i> the end of the second. In all other cases the two overlap. If you don&#39;t like <code>unless</code> then you could use <code>if ( not ... )</code> or invert the expression to <code>if ( $high &gt;= $start and $low &lt;= $end )</code> but I think that&#39;s much less intuitive. It&#39;s comparable to the answer from <b>ikegami</b> but doesn&#39;t use unnecessary comparisons."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1488121284, "creation_date": 1488121284, "answer_id": 42470057, "question_id": 42464026, "link": "https://stackoverflow.com/questions/42464026/perl-fast-checking-of-overlapping-intervals/42470057#42470057", "title": "Perl fast checking of overlapping intervals?", "body": "<p></p>\n\n<p>There's no need to check every value between <code>$start</code> and <code>$end</code>; you can simply compare the limits of the two ranges. I think this code is fairly straightforward</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\nmy $start = 1000;\nmy $end   = 5000;\n\nwhile ( my $line = &lt;DATA&gt; ) {\n\n    my ($low, $high) = split ' ', $line;\n\n    unless ( $high &lt; $start or $low &gt; $end ) {\n        chomp $line;\n        print qq{$start to $end found in \"$line\"\\n};\n    }\n}\n\n__DATA__\n780895  781139\n3707570 3707794\n13753925    13754168\n2409582 2409790\n6360880 6361084\n8261045 8261250\n4133539 4133772\n7731897 7732188\n8660252 8660539\n12156253    12156504\n9136875 9137168\n16657849    16658107\n5000    6000\n4133539 4133772\n7731897 7732188\n8660252 8660539\n4999    10000\n12156253    12156504\n3707570 3707794\n13753925    13754168\n2409582 2409790\n6360880 6361084\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>1000 to 5000 found in \"5000    6000\"\n1000 to 5000 found in \"4999    10000\"\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 515, "favorite_count": 0, "accepted_answer_id": 42464412, "answer_count": 2, "score": 3, "last_activity_date": 1488308996, "creation_date": 1488075952, "question_id": 42464026, "link": "https://stackoverflow.com/questions/42464026/perl-fast-checking-of-overlapping-intervals", "title": "Perl fast checking of overlapping intervals?", "body": "<p>I am trying to find overlapping of intervals. I have an interval 1000 to 5000 (just given one for example). This is checked in intervals given below. This script does work but is very slow with thousands of intervals to check. Is there any way to make this faster? Thanks</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse v5.16;\nuse List::MoreUtils qw/ any /;\n\nmy $start = 1000;\nmy $end   = 5000;\n\nwhile ( my $line = &lt;DATA&gt; ) {\n    chomp $line;\n    my @element = split \"\\t\", $line;\n    my @checking_array = \"\";\n    for my $checking_no ( $element[0] .. $element[1] ) {\n        push @checking_array, $checking_no;\n    }\n    for my $value ( $start .. $end ) {\n        if ( any { $_ eq $value } @checking_array ) {\n            print \"$start to $end found in $line\\n\";\n            last;\n        }\n        else { next }\n    }\n}\n\n__DATA__\n780895  781139\n3707570 3707794\n13753925    13754168\n2409582 2409790\n6360880 6361084\n8261045 8261250\n4133539 4133772\n7731897 7732188\n8660252 8660539\n12156253    12156504\n9136875 9137168\n16657849    16658107\n5000    6000\n4133539 4133772\n7731897 7732188\n8660252 8660539\n4999    10000\n12156253    12156504\n3707570 3707794\n13753925    13754168\n2409582 2409790\n6360880 6361084\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>1000 to 5000 found in 5000  6000\n1000 to 5000 found in 4999  10000\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1488063346, "post_id": 42461046, "comment_id": 72067279, "body": "Instead of changing your original regex, it would&#39;ve been better to just edit your post showing the changes you made (your second attempt) as a whole new set of code."}], "answers": [{"comments": [{"owner": {"reputation": 620, "user_id": 6641380, "user_type": "registered", "accept_rate": 97, "profile_image": "https://lh4.googleusercontent.com/-xpKbsD1iVLg/AAAAAAAAAAI/AAAAAAAAAGg/MAO7biFVz9I/photo.jpg?sz=128", "display_name": "Shankhadeep Mukerji", "link": "https://stackoverflow.com/users/6641380/shankhadeep-mukerji"}, "edited": false, "score": 0, "creation_date": 1488057838, "post_id": 42461438, "comment_id": 72065707, "body": "Can you please also rectify me whats wrong in my code, will hlp me to learn better"}], "tags": [], "owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "is_accepted": true, "score": 0, "last_activity_date": 1488055875, "creation_date": 1488055875, "answer_id": 42461438, "question_id": 42461046, "link": "https://stackoverflow.com/questions/42461046/how-to-swap-using-substitution-regex-in-perl/42461438#42461438", "title": "How to swap using substitution regex in perl", "body": "<p>In simple code example, You could read each line of your data and use this regex on each line:</p>\n\n<pre><code>$line =~ s/(.*) \\[(\\w)(\\w+) (\\w+)\\] user at (\\w+)/\\[$4\\.$2\\] user at $5 $1/;\n</code></pre>\n\n<p>Substitution regex example on this <a href=\"https://regex101.com/r/ZjW6IU/1\" rel=\"nofollow noreferrer\">link</a> with the above data.</p>\n"}, {"comments": [{"owner": {"reputation": 620, "user_id": 6641380, "user_type": "registered", "accept_rate": 97, "profile_image": "https://lh4.googleusercontent.com/-xpKbsD1iVLg/AAAAAAAAAAI/AAAAAAAAAGg/MAO7biFVz9I/photo.jpg?sz=128", "display_name": "Shankhadeep Mukerji", "link": "https://stackoverflow.com/users/6641380/shankhadeep-mukerji"}, "edited": false, "score": 0, "creation_date": 1488068681, "post_id": 42462838, "comment_id": 72068614, "body": "Thanks...it is helpful"}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 1, "last_activity_date": 1488065015, "creation_date": 1488065015, "answer_id": 42462838, "question_id": 42461046, "link": "https://stackoverflow.com/questions/42461046/how-to-swap-using-substitution-regex-in-perl/42462838#42462838", "title": "How to swap using substitution regex in perl", "body": "<p><code>(\\w)\\s(\\w+)</code> will never match your 'name' data. <code>(\\w)\\w+\\s(\\w+)</code> works (provided there are no middle names, initials and no endings like 'Jr.' or 'III').</p>\n\n<p>Your capture of the 'time' field works, but could be more safely written as <code>(\\d\\d?:\\d\\d?:\\d\\d?)</code></p>\n\n<p><code>$/\\[$3\\.$2\\] $4 $1/gxi;</code></p>\n\n<p>No need to escape the '[  ]' brackets above (every thing in the replacement side of the substitution is treated as an ordinary double quoted string). The <code>i</code> modifier isn't necessary here (no case items in the string. None of the  matches needs to identify an upper/lower case letter). And you need the <code>m</code> modifier so that <code>^ and $</code> match at the beginning and ending of the line (<em>not</em> the begin and end of the <em>string</em>) (Your <code>$log</code> variable is one string with 3 <em>lines</em>).</p>\n\n<p>With these changes, the substitution expression might be written:</p>\n\n<pre><code> $log =~ s/^\n            (\\d\\d?:\\d\\d?:\\d\\d?) # capture 'time' stamp\n            \\s                  # space\n            \\[                  # opening bracket\n               (\\w)\\w+\\s(\\w+)   # capture first initial and last name\n            \\]                  # close bracket\n            (.+)$               # remaining to end of 'line'\n            /[$3.$2]$4$1/mgx;\n</code></pre>\n"}], "owner": {"reputation": 620, "user_id": 6641380, "user_type": "registered", "accept_rate": 97, "profile_image": "https://lh4.googleusercontent.com/-xpKbsD1iVLg/AAAAAAAAAAI/AAAAAAAAAGg/MAO7biFVz9I/photo.jpg?sz=128", "display_name": "Shankhadeep Mukerji", "link": "https://stackoverflow.com/users/6641380/shankhadeep-mukerji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 42461438, "answer_count": 2, "score": 0, "last_activity_date": 1488065015, "creation_date": 1488053381, "last_edit_date": 1488058092, "question_id": 42461046, "link": "https://stackoverflow.com/questions/42461046/how-to-swap-using-substitution-regex-in-perl", "title": "How to swap using substitution regex in perl", "body": "<p>I have a data like </p>\n\n<pre><code>3:12:19 [Sam Peters] user at X\n11:1:17 [Roger Fernandes] user at Y\n10:9:25 [Harry Dsouza] user at Z\n</code></pre>\n\n<p>I want my output to be</p>\n\n<pre><code> [Peters.S] user at X 3:12:19\n [Fernandes.R] user at Y 11:1:17\n [Dsouza.H] user at Z 10:9:25\n</code></pre>\n\n<p>My code is not working. This is my script</p>\n\n<pre><code>#!/usr/bin/perl/\nuse warnings;\nuse strict;\n\nmy $log = \"3:12:19 [Sam Peters] user at X \\n11:1:17 [Roger Fernandes] user at Y \\n10:9:25 [Harry Dsouza] user at Z \\n\";\nprint \"$log \\n\";\n$log =~ s/ ^\n        (.*)     #First group time\n        \\s                                 #whitespace\n        \\[                                  #start bracket\n           (\\w)\\s(\\w+)                            #name in square barckets\n        \\]                                  #end brackets\n        \\s\n        (.*)                                #everything else\n       $/\\[$3\\.$2\\] $4 $1/gxi;\n\nprint \"$log \\n\";\n</code></pre>\n\n<p>I am just a beginner at Perl.I am getting the output same as the input, no change.</p>\n"}, {"tags": ["xml", "perl", "xpath"], "comments": [{"owner": {"reputation": 137664, "user_id": 252228, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3ea75023c3c487f36257090d420b7c50?s=128&d=identicon&r=PG", "display_name": "Martin Honnen", "link": "https://stackoverflow.com/users/252228/martin-honnen"}, "edited": false, "score": 2, "creation_date": 1488051569, "post_id": 42460636, "comment_id": 72063677, "body": "I don&#39;t know that API but try printing <code>$node-&gt;getNodeValue()</code> instead of a string representation of the node itself."}, {"owner": {"reputation": 3, "user_id": 5220893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/325a763623d699b21269bfd4453bb1eb?s=128&d=identicon&r=PG&f=1", "display_name": "Rick DeLong", "link": "https://stackoverflow.com/users/5220893/rick-delong"}, "reply_to_user": {"reputation": 137664, "user_id": 252228, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3ea75023c3c487f36257090d420b7c50?s=128&d=identicon&r=PG", "display_name": "Martin Honnen", "link": "https://stackoverflow.com/users/252228/martin-honnen"}, "edited": false, "score": 0, "creation_date": 1491330531, "post_id": 42460636, "comment_id": 73501469, "body": "Thanks for the responses.  I realized today that I hadn&#39;t followed up with this post.  For some reason, XML:Xpath was very, very slow for me.  Instead, I&#39;m using XML:Twig to navigate my XML and eventually XHTML files.  This is much faster and gives me the results that I need."}], "answers": [{"tags": [], "owner": {"reputation": 89878, "user_id": 1945651, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9J4D8.png?s=128&g=1", "display_name": "JLRishe", "link": "https://stackoverflow.com/users/1945651/jlrishe"}, "is_accepted": true, "score": 2, "last_activity_date": 1488052783, "creation_date": 1488052783, "answer_id": 42460944, "question_id": 42460636, "link": "https://stackoverflow.com/questions/42460636/xml-special-characters-using-xmlxpath-get-nodelist/42460944#42460944", "title": "XML special characters using XML::XPath get_nodelist", "body": "<p>It looks like <code>XML::XPath::XMLParser::as_string</code> returns an XML representation of the node. Since you've got attributes in this case, you should try using <code>getNodeValue</code> to get the value:</p>\n\n<pre><code>print $node-&gt;getNodeValue . \"\\n\";\n</code></pre>\n\n<p>For element and text nodes, it looks like you can use <code>$node-&gt;string_value</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 5220893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/325a763623d699b21269bfd4453bb1eb?s=128&d=identicon&r=PG&f=1", "display_name": "Rick DeLong", "link": "https://stackoverflow.com/users/5220893/rick-delong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 42460944, "answer_count": 1, "score": 0, "last_activity_date": 1488052783, "creation_date": 1488050873, "question_id": 42460636, "link": "https://stackoverflow.com/questions/42460636/xml-special-characters-using-xmlxpath-get-nodelist", "title": "XML special characters using XML::XPath get_nodelist", "body": "<p>I'm trying to figure out why I'm getting XML special characters in my results when I want to original text string.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse XML::XPath;\n\nmy $xp = XML::XPath-&gt;new(ioref =&gt; \\*DATA);\n\nmy $names = $xp-&gt;find('/category/event/@name');\n\nforeach my $node ( $names-&gt;get_nodelist ) {\n  print XML::XPath::XMLParser::as_string( $node ) . \"\\n\";\n}\n\n__DATA__\n  &lt;category name=\"a\"&gt;\n    &lt;event name=\"cat1 &gt; cat3\" /&gt;  \n    &lt;event name=\"cat2\" /&gt;  \n    &lt;event name=\"cat3\" /&gt;  \n    &lt;event name=\"cat4\" /&gt;  \n    &lt;event name=\"cat5\" /&gt;  \n  &lt;/category&gt;\n</code></pre>\n\n<p>Here are my results:</p>\n\n<pre><code> name=\"cat1 &amp;gt; cat3\"\n name=\"cat2\"\n name=\"cat3\"\n name=\"cat4\"\n name=\"cat5\"\n</code></pre>\n\n<p>What I want is this:</p>\n\n<pre><code> name=\"cat1 &gt; cat3\"\n name=\"cat2\"\n name=\"cat3\"\n name=\"cat4\"\n name=\"cat5\"\n</code></pre>\n"}, {"tags": ["perl", "perlapi"], "answers": [{"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1488158884, "post_id": 42476037, "comment_id": 72093327, "body": "Thank you. Now I have <a href=\"http://stackoverflow.com/a/42476409/4632019\"><code>answer</code></a> to my question."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1488159606, "post_id": 42476037, "comment_id": 72093499, "body": "I don&#39;t see how that helped answer your other question, but awesome! Is it something you learned from autovivification?"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1488161331, "post_id": 42476037, "comment_id": 72093935, "body": "No, I have not look at autovivification and done that by manual tracing. (See <a href=\"https://github.com/KES777/perl/commit/b6e28567043f7deb474285fb40253573a88b589a#diff-0ca05518d51a09e56cb1dcfd96386a4bR9274\" rel=\"nofollow noreferrer\">example</a>) But now I see VERY USEFULL comment there: <code>Sadly, the padsv OPs we are interested in don&#39;t trigger the padsv check function</code> with the clue above. And based on this I probably resolve another my <a href=\"http://stackoverflow.com/questions/42434132/how-to-tie-every-variable-in-perl-script\">question</a>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1488155622, "creation_date": 1488155622, "answer_id": 42476037, "question_id": 42460572, "link": "https://stackoverflow.com/questions/42460572/where-i-can-find-the-types-of-op-that-are-filtered-by-pl-check/42476037#42476037", "title": "Where I can find the types of op that are filtered by PL_check?", "body": "<p>You can check all types of op. Like the above says, it's an array indexed by opcode.</p>\n\n<p>If you want to know what ops have a checker, that can vary based on what modules you have loaded. For example, <a href=\"http://search.cpan.org/perldoc?autovivification\" rel=\"nofollow noreferrer\">autovivification</a> adds checkers for \n<code>OP_PADANY</code>,\n<code>OP_PADSV</code>,\n<code>OP_AELEM</code>,\n<code>OP_HELEM</code>,\n<code>OP_RV2SV</code>,\n<code>OP_RV2AV</code>,\n<code>OP_RV2HV</code>,\n<code>OP_ASLICE</code>,\n<code>OP_HSLICE</code>,\n<code>OP_EXISTS</code>,\n<code>OP_DELETE</code>,\n<code>OP_KEYS</code> and \n<code>OP_VALUES</code>. \n(Some of those may already have checkers, in which case autovivifaction's new checker will call the old checker.)</p>\n\n<p>You can find which ops have a built-in checker by looking at the definition of <a href=\"https://perl5.git.perl.org/perl.git/blob/443bd156a6baaf7a8fe6b6b05fcf6c4178140ed2:/opcode.h#l1364\" rel=\"nofollow noreferrer\"><code>PL_check</code></a> in <code>opcode.h</code> (which is generated by <code>opcode.pl</code>).</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 42476037, "answer_count": 1, "score": 0, "last_activity_date": 1488236263, "creation_date": 1488050560, "last_edit_date": 1488236263, "question_id": 42460572, "link": "https://stackoverflow.com/questions/42460572/where-i-can-find-the-types-of-op-that-are-filtered-by-pl-check", "title": "Where I can find the types of op that are filtered by PL_check?", "body": "<p><a href=\"http://perldoc.perl.org/perlapi.html#PL_check\" rel=\"nofollow noreferrer\"><code>PL_check</code></a> is a variable exposed by the Perl public API:</p>\n\n<blockquote>\n  <p>Array, indexed by opcode, of functions that will be called for the \"check\" phase of optree building during compilation of Perl code. For most (but not all) types of op, once the op has been initially built and populated with child ops it will be filtered through the check function referenced by the appropriate element of this array.</p>\n</blockquote>\n\n<p>Where in the source code can I see which types of opcode will be filtered?</p>\n"}, {"tags": ["android", "linux", "perl", "apk", "mechanize"], "answers": [{"tags": [], "owner": {"reputation": 124, "user_id": 7208743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2087289e2d292c565a792961070ec894?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Motani", "link": "https://stackoverflow.com/users/7208743/sagar-motani"}, "is_accepted": false, "score": 0, "last_activity_date": 1488358919, "creation_date": 1488358919, "answer_id": 42527366, "question_id": 42459037, "link": "https://stackoverflow.com/questions/42459037/accessing-android-app-using-perl/42527366#42527366", "title": "Accessing Android App using Perl", "body": "<p>Yes you can access web based android apps using perl\nYou need a web debugger like charles to debug the URLs</p>\n\n<p>You can follow the steps from the following url \n<a href=\"https://community.tealiumiq.com/t5/Tealium-for-Android/Setting-up-Charles-to-Proxy-your-Android-Device/ta-p/5121\" rel=\"nofollow noreferrer\">https://community.tealiumiq.com/t5/Tealium-for-Android/Setting-up-Charles-to-Proxy-your-Android-Device/ta-p/5121</a></p>\n\n<p>After the proxy setup completes web relative post or get calls can be viewed on proxy debugger</p>\n\n<p>The same can be used to traverse through the app you want to using www::mechanize </p>\n"}], "owner": {"reputation": 59, "user_id": 7261395, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cb8db032eea597474e83a16939c3ec29?s=128&d=identicon&r=PG&f=1", "display_name": "user7261395", "link": "https://stackoverflow.com/users/7261395/user7261395"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488358919, "creation_date": 1488042627, "question_id": 42459037, "link": "https://stackoverflow.com/questions/42459037/accessing-android-app-using-perl", "title": "Accessing Android App using Perl", "body": "<p>Is there a way to access an APK / Android App using Perl like the way www::mechanize does it for websites? (like having an emulator running the app under Linux and parsing App screens like websites using www::mechanize?)</p>\n\n<p>What would be the best way here?</p>\n"}, {"tags": ["perl", "perlapi"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1488152085, "post_id": 42456152, "comment_id": 72091744, "body": "<code>newSVpv</code> starts with a REFCNT of 1. You can view this as <code>test()</code> gaining ownership of a reference. As the owner of the reference, <code>test()</code> must either reduce the var&#39;s REFCNT or transfer ownership of the var before exiting. So yes, <code>SvREFCNT_dec</code> should be called by <code>test()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1488030005, "post_id": 42456256, "comment_id": 72056098, "body": "So when using <code>sv_2mortal()</code> it does not matter if the variable is returned on the stack or not, it will work anyway? And Perl is going to free the variable when <code>test()</code> returns ( but before the <code>say &quot;Finished.&quot;</code> statement in my example)? Since <code>perlguts</code> says <i>&quot;An xV that is mortal has had its reference count marked to be decremented, but not actually decremented, until &quot;a short time later&quot;. Generally the term &quot;short time later&quot; means a single Perl statement&quot;</i>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1488151948, "post_id": 42456256, "comment_id": 72091701, "body": "Re &quot;<i>So when using sv_2mortal() it does not matter if the variable is returned on the stack or not, it will work anyway?&quot;</i> Yes. /// Re &quot;<i>And Perl is going to free the variable when test() returns</i>&quot;, If you use <code>SvREFCNT_dec</code>, it will be freed immediately (assuming no other reference to it exists). If you use <code>sv_2mortal</code>, it will be freed right after the caller has a chance to copy it (it if had been returned). /// Re &quot;<i>but before the say &quot;Finished.&quot; statement in my example</i>&quot;, Yes."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1488152231, "post_id": 42456256, "comment_id": 72091802, "body": "Re &quot;<i>But note that your code structure isn&#39;t exception safe</i>&quot;, C doesn&#39;t have exceptions, so that&#39;s not really an issue. There are <code>longjmps</code>, but if you&#39;re using those, you know to use the equivalent of <code>try</code>/<code>catch</code> to clean up after yourself. No reason to use <code>sv_2mortal</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1488182514, "post_id": 42456256, "comment_id": 72100885, "body": "Note that in situation where a callback is called multiple times in a row, the code doing the calls might postpone the deallocation of temps (mortals) to speed up the loop operation. (i.e. It might handle the temps once after all calls rather than after every call.)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1488470459, "post_id": 42456256, "comment_id": 72254540, "body": "@ikegami The perl internals themselves use <code>longjmp</code>. E.g. if you call a function that (indirectly) triggers a warning and warnings have been fatalized (or there is a custom <code>__WARN__</code> handler that <code>die</code>s), a Perl exception is thrown, which manifests as a <code>longjmp</code>."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 4, "last_activity_date": 1488026976, "creation_date": 1488026976, "answer_id": 42456256, "question_id": 42456152, "link": "https://stackoverflow.com/questions/42456152/should-i-call-svrefcnt-dec-on-a-sv-that-is-not-going-to-be-returned-to-perl-on/42456256#42456256", "title": "Should I call SvREFCNT_dec() on a SV that is not going to be returned to Perl on the stack?", "body": "<p>Yes, you should decrement the refcount. (If you don't, there are no immediate bad effects, but you've created a memory leak.)</p>\n\n<p>perlguts probably says this normally isn't necessary because most SVs aren't just used internally in C functions; they're part of structures reachable from Perl space or put on the stack.</p>\n\n<p>But note that your code structure isn't exception safe: If any function in <code>// do something</code> throws, <code>sv_variable</code> will leak (because <code>SvREFCNT_dec</code> is never reached). This can be fixed by doing:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>SV *sv_variable = sv_2mortal(newSVpv(\"test\", 0));\n</code></pre>\n\n<p><a href=\"https://metacpan.org/pod/distribution/perl/pod/perlguts.pod#Reference-Counts-and-Mortality\" rel=\"nofollow noreferrer\"><code>sv_2mortal</code></a> is like a deferred <code>SvREFCNT_dec</code>: It will decrement the reference count some time \"later\".</p>\n\n<p>(If you're creating an SV from a string literal, <code>newSVpvs(\"test\")</code> is better than <code>newSVpv</code> because it doesn't have to compute the length at runtime.)</p>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 42456256, "answer_count": 1, "score": 4, "last_activity_date": 1488031213, "creation_date": 1488026278, "last_edit_date": 1488031213, "question_id": 42456152, "link": "https://stackoverflow.com/questions/42456152/should-i-call-svrefcnt-dec-on-a-sv-that-is-not-going-to-be-returned-to-perl-on", "title": "Should I call SvREFCNT_dec() on a SV that is not going to be returned to Perl on the stack?", "body": "<p>When calling a C function from Perl, for example using <a href=\"https://metacpan.org/pod/distribution/Inline-C/lib/Inline/C.pod\" rel=\"nofollow noreferrer\"><code>Inline::C</code></a>:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\nuse Inline C =&gt; './test.c';\n\nsay \"Calling test()..\";\ntest();\nsay \"Finished.\";\n</code></pre>\n\n<p>where <code>test.c</code> is:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void test() \n{\n    SV *sv_variable = newSVpv(\"test\", 0);\n\n    // do something..\n\n    //SvREFCNT_dec(sv_variable); // free variable\n    printf( \"Returning from test()..\\n\");\n    return;\n\n}\n</code></pre>\n\n<p>The script seems to work fine whether I call <code>SvREFCNT_dec(sv_variable)</code> or not. According to <a href=\"https://metacpan.org/pod/distribution/perl/pod/perlguts.pod#Working-with-SVs\" rel=\"nofollow noreferrer\"><code>perlguts</code></a>:</p>\n\n<blockquote>\n  <p>To free an SV that you've created, call SvREFCNT_dec(SV*). Normally\n  this call is not necessary</p>\n</blockquote>\n"}, {"tags": ["perl", "perlapi"], "answers": [{"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": true, "score": 2, "last_activity_date": 1488786869, "last_edit_date": 1488786869, "creation_date": 1488158773, "answer_id": 42476409, "question_id": 42455755, "link": "https://stackoverflow.com/questions/42455755/why-callback-is-not-called/42476409#42476409", "title": "Why callback is not called?", "body": "<p>I have find out next thing. I should do </p>\n\n<pre><code>wrap_op_checker(OP_PADANY, my_check, &amp;old_checker);\n</code></pre>\n\n<p>Instead of:</p>\n\n<pre><code>wrap_op_checker(OP_PADSV, my_check, &amp;old_checker);\n</code></pre>\n\n<p>Because OP of this type <strong>is not created</strong>. At that step it is <code>OP_PADANY</code> and <strong>is transformed</strong> into <code>OP_PADSV</code> at <code>Perl_newSVREF</code> which is called somewhere from <a href=\"https://github.com/Perl/perl5/blob/blead/perly.y#L1144\" rel=\"nofollow noreferrer\"><code>Perl_yyparse+0x1834</code></a>.</p>\n\n<p>So because of this transformation we can not hook <code>OP_PADSV</code></p>\n\n<p><strong>UPD</strong><br>\nThis behavior do not correspond to the <a href=\"http://perldoc.perl.org/perlguts.html#Compile-pass-1%3a-check-routines\" rel=\"nofollow noreferrer\">DOC</a></p>\n\n<blockquote>\n  <p>A check routine is called when the node is fully constructed</p>\n</blockquote>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 1, "accepted_answer_id": 42476409, "answer_count": 1, "score": 4, "last_activity_date": 1488786869, "creation_date": 1488023836, "last_edit_date": 1488033188, "question_id": 42455755, "link": "https://stackoverflow.com/questions/42455755/why-callback-is-not-called", "title": "Why callback is not called?", "body": "<p>I have the example script from <a href=\"https://metacpan.org/pod/B::OPCheck#SYNOPSIS\" rel=\"nofollow noreferrer\">B::OPCheck</a> module with modified <code>PL_op_name</code> to <a href=\"https://github.com/Perl/perl5/blob/blead/opcode.h#L158\" rel=\"nofollow noreferrer\"><code>padsv</code></a></p>\n\n<pre><code>use B::Generate;\n\nuse B::OPCheck padsv =&gt; check =&gt; sub {\n    my $op = shift;\n    print \"HERE\";\n};\n\nmy $x;\n1;\n</code></pre>\n\n<p>But callback is not called. </p>\n\n<p>When deparsing this program I can see this <code>OP</code>:</p>\n\n<pre><code>$perl -Ilib -Iblib/arch -MO=Terse ~/tmp/xs.pl\n\nLISTOP (0x19828f0) leave [1] \n    OP (0x1c27ef0) enter \n    COP (0x1982938) nextstate \n    OP (0x1982998) padsv [1]           &lt;&lt;&lt;&lt; HERE IT IS\n    COP (0x1c27f38) nextstate \n    OP (0x1c27f98) null [5] \n</code></pre>\n\n<p>Why callback is not called?</p>\n\n<p><strong>UPD</strong><br>\nIt seems <a href=\"http://perldoc.perl.org/perlapi.html#PL_check\" rel=\"nofollow noreferrer\">here</a> is the answer:</p>\n\n<blockquote>\n  <p>For most (but not all) types of op, once the op has been initially built and populated with child ops it will be filtered through the check function referenced by the appropriate element of this array</p>\n</blockquote>\n\n<p>But where to find the list of ops which will be filtered through the check function?</p>\n"}, {"tags": ["perl", "unicode", "character-encoding", "utf-16", "byte-order-mark"], "comments": [{"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1487979827, "post_id": 42449973, "comment_id": 72044063, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/24390034/remove-bom-from-string-with-perl\">Remove BOM from string with Perl</a>"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1487979973, "post_id": 42449973, "comment_id": 72044104, "body": "Also <a href=\"http://www.larshaendler.com/2014/03/14/remove-bom-while-reading-file-with-perl/\" rel=\"nofollow noreferrer\">larshaendler.com/2014/03/14/&hellip;</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1487981156, "post_id": 42449973, "comment_id": 72044453, "body": "@DavidO, That removes the UTF-8 encoding of the BOM."}, {"owner": {"reputation": 74715, "user_id": 471272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jSlyx.gif?s=128&g=1", "display_name": "tchrist", "link": "https://stackoverflow.com/users/471272/tchrist"}, "edited": false, "score": 0, "creation_date": 1488151182, "post_id": 42449973, "comment_id": 72091468, "body": "This cannot be answered unless you tell us whether you have bytes or characters first."}], "answers": [{"comments": [{"owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 0, "creation_date": 1488151721, "post_id": 42450304, "comment_id": 72091628, "body": "+1, though if I may be a bit pedantic, I think that &quot;UTF-16BE&quot; and &quot;UTF-16LE&quot; are really supposed to refer to the two versions of UTF-16 that do <i>not</i> allow a byte order mark. The UTF-16 that <i>does</i> allow a BOM, and can therefore have either endianness (defaulting to BE if there&#39;s no BOM), is supposed to be called just &quot;UTF-16&quot;. (See <a href=\"http://unicode.org/faq/utf_bom.html#gen7.\" rel=\"nofollow noreferrer\">unicode.org/faq/utf_bom.html#gen7.</a>)"}, {"owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 0, "creation_date": 1488152953, "post_id": 42450304, "comment_id": 72091987, "body": "I agree that &quot;UTF-16 that&#39;s encoded in little-endian byte order&quot; is too long-winded, but I don&#39;t know why you suggest that as the alternative. What&#39;s wrong with &quot;little-endian UTF-16&quot;?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 0, "creation_date": 1488153254, "post_id": 42450304, "comment_id": 72092060, "body": "Actually, nothing in the passage you linked says that UTF-16le and UTF-16be can&#39;t have a BOM. (It just says that UTF-16 may have one.)"}, {"owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 0, "creation_date": 1488153712, "post_id": 42450304, "comment_id": 72092155, "body": "Right, because that&#39;s just a convenient FAQ, not a formal spec. For the latter, see <a href=\"https://tools.ietf.org/html/rfc2781\" rel=\"nofollow noreferrer\">RFC 2781</a>, which specifies that &quot;Systems labelling UTF-16BE text MUST NOT prepend a BOM to the text&quot; and so on."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 0, "creation_date": 1488154292, "post_id": 42450304, "comment_id": 72092294, "body": "That passage explains what it means when an application says it expects &quot;UTF-16le&quot; or &quot;UTF-16be&quot;. It&#39;s not relevant here. Read on to 4.1. A BOM can still lead UTF-16le and UTF-16be. It just doesn&#39;t effect how the stream is processed."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 0, "creation_date": 1488155900, "post_id": 42450304, "comment_id": 72092637, "body": "In other words, if I say I require UTF-16le, and you produce something starting with <code>FE FF</code>, it&#39;s still going to be treated as UTF-16le. The usage in my answer is therefore in line with the RFC. It&#39;s technically the OP in error by calling it a BOM instead of a ZWNBS"}, {"owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 0, "creation_date": 1488157612, "post_id": 42450304, "comment_id": 72093034, "body": "I think you have that backward. It&#39;s generally the producer, not the consumer, that specifies the character-set (e.g. as part of an HTTP <code>Content-Type</code> header). So if I send a document marked as <code>UTF16-LE</code> or <code>UTF-16BE</code>, then the RFC is saying that I <i>must not</i> include a BOM."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 0, "creation_date": 1488229155, "post_id": 42450304, "comment_id": 72130510, "body": "Makes no diff. Like I said, if it&#39;s not a BOM, then it&#39;s a ZWNBS, and the answer remains the same."}, {"owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 0, "creation_date": 1488233148, "post_id": 42450304, "comment_id": 72132468, "body": "But then how did you decide that it&#39;s not a BOM? Nothing in the original question suggests that the OP is using &quot;UTF-16BE&quot; or &quot;UTF-16LE&quot;."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 0, "creation_date": 1488233683, "post_id": 42450304, "comment_id": 72132782, "body": "@ruakh, The question isn&#39;t encoding detection. The OP didn&#39;t ask to detect if they have UTF-16le + BOM or UTF-16be + BOM, so they must therefore know which one they have. In fact, the OP tagged the question UTF-16le (subsequently removed by tchrist). If they need BOM-based encoding detection, they should use File::BOM as I mentioned, or just <code>open(my $fh, &#39;&lt;:encoding(UTF-16)&#39;, ...)</code>"}, {"owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 0, "creation_date": 1488235727, "post_id": 42450304, "comment_id": 72133641, "body": "Ah, OK. Fair enough."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1487980974, "creation_date": 1487980974, "answer_id": 42450304, "question_id": 42449973, "link": "https://stackoverflow.com/questions/42449973/remove-utf-16-bom-from-string-with-perl/42450304#42450304", "title": "Remove UTF-16 BOM from string with Perl", "body": "<p>What's in <code>$readline</code>?</p>\n\n<p>If you have UTF-16be,</p>\n\n<pre><code>s/^\\xFE\\xFF//\n</code></pre>\n\n<p>If you have UTF-16le,</p>\n\n<pre><code>s/^\\xFF\\xFE//\n</code></pre>\n\n<p>If you have Unicode Code Points (decoded text),</p>\n\n<pre><code>s/^\\x{FEFF}//\ns/^\\N{BOM}//\n</code></pre>\n\n<hr>\n\n<p>Alternatively, you can also use <a href=\"http://search.cpan.org/perldoc?File::BOM\" rel=\"nofollow noreferrer\">File::BOM</a> to both remove the mark and decode the stream.</p>\n"}], "owner": {"reputation": 11, "user_id": 7619695, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--mdD9crJCYI/AAAAAAAAAAI/AAAAAAAAAFg/uJ94QNylTjg/photo.jpg?sz=128", "display_name": "Jeffrey Strong", "link": "https://stackoverflow.com/users/7619695/jeffrey-strong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1488151206, "creation_date": 1487978862, "last_edit_date": 1488151206, "question_id": 42449973, "link": "https://stackoverflow.com/questions/42449973/remove-utf-16-bom-from-string-with-perl", "title": "Remove UTF-16 BOM from string with Perl", "body": "<p>I'm looking for the correct syntax to remove the BOM from a UTF-16 text file  I have successfully done it for UTF-8.  Please see below for syntax I have tried:</p>\n\n<pre><code>$readline =~ s/^\\N{ZERO WIDTH NO-BREAK SPACE}//;\n$readline =~ s/^\\N{BYTE ORDER MARK}//;\n$readline =~ s/^\\N{BOM}//;\n$readline =~ s/^\\x{FEFF}//;\n$readline =~ s/^\\0x{FEFF}//;\n$readline =~ s/^\\x{FE}\\x{FF}//;\n$readline =~ s/^\\xFE\\xFF//;\n$readline =~ s/^\\0xFE\\0xFF//;\n</code></pre>\n\n<p>As you can see these are repetitive but I was trying anything I could find.  To open the file I used the encoding function.  Any help would be greatly appreciated.</p>\n"}, {"tags": ["arrays", "json", "perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1487974397, "post_id": 42449122, "comment_id": 72042137, "body": "If you&#39;re trying to build a JSON string, use the <a href=\"https://metacpan.org/pod/JSON\" rel=\"nofollow noreferrer\">JSON</a> module (or <a href=\"https://metacpan.org/pod/JSON::XS\" rel=\"nofollow noreferrer\">JSON::XS</a>)."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1487974696, "post_id": 42449122, "comment_id": 72042275, "body": "Also, you&#39;re escaping too much in your strings. <code>print &quot;\\&quot;&quot;.$row[1].&quot;\\&quot;\\},&quot;;</code> is better written <code>print &quot;\\&quot;&quot;.$row[1].&quot;\\&quot;},&quot;;</code> is better written <code>print &quot;\\&quot;$row[1]\\&quot;},&quot;;</code> is better written <code>print qq(&quot;$row[1]&quot;},);</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1487975341, "post_id": 42449122, "comment_id": 72042530, "body": "Also, this <code>print &quot;&quot;.$_.&quot;,&quot;;</code> is just <code>print &quot;$_,&quot;</code>.  The four prints in the loop can feasibly be written as one, specially using <a href=\"http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow noreferrer\">qq</a> as in ThisSuitIsBlackNot comment."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1487979291, "post_id": 42449122, "comment_id": 72043909, "body": "So <code>print qq( {&quot;data&quot;:$_,&quot;label&quot;:&quot;$row[1]&quot;}, );</code>. To me this is clearer than when split up."}, {"owner": {"reputation": 79, "user_id": 4816773, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/463afffec2a879c7c0d87537cabe8fad?s=128&d=identicon&r=PG&f=1", "display_name": "Barry P", "link": "https://stackoverflow.com/users/4816773/barry-p"}, "edited": false, "score": 0, "creation_date": 1488219171, "post_id": 42449122, "comment_id": 72124958, "body": "This doesn&#39;t quite do it....my output is still --          array here--[{&quot;data&quot;:2943,&quot;label&quot;:&quot;&quot;},{&quot;data&quot;:CDI3,&quot;label&quot;:&quot;&quot;},          {&quot;data&quot;:1,&quot;label&quot;:&quot;&quot;},{&quot;data&quot;:COS-COS2,&quot;label&quot;:&quot;&quot;},          {&quot;data&quot;:1087,&quot;label&quot;:&quot;&quot;},{&quot;data&quot;:COS1,&quot;label&quot;:&quot;&quot;},         {&quot;data&quot;:5183,&quot;label&quot;:&quot;&quot;},{&quot;data&quot;:COS2,&quot;label&quot;:&quot;&quot;}, {&quot;data&quot;:2731,&quot;label&quot;:&quot;&quot;},{&quot;data&quot;:CULB,&quot;label&quot;:&quot;&quot;},{&quot;data&quot;:1,&zwnj;&#8203;&quot;label&quot;:&quot;&quot;}, {&quot;data&quot;:EQUIT,&quot;label&quot;:&quot;&quot;},{&quot;data&quot;:4474,&quot;label&quot;:&quot;&quot;}, {&quot;data&quot;:Network,&quot;label&quot;:&quot;&quot;},]    labels still not in quotes and associated with data"}, {"owner": {"reputation": 79, "user_id": 4816773, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/463afffec2a879c7c0d87537cabe8fad?s=128&d=identicon&r=PG&f=1", "display_name": "Barry P", "link": "https://stackoverflow.com/users/4816773/barry-p"}, "edited": false, "score": 0, "creation_date": 1488232470, "post_id": 42449122, "comment_id": 72132150, "body": "I probably didn&#39;t make it completely clear. I am pulling in a JSON string. What I am specifically trying to do in that JSON string is escape the quotes around the number values (only) returned."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1488300599, "post_id": 42449122, "comment_id": 72166056, "body": "I don&#39;t see quotes around any of the numbers in that JSON string. Also, <code>&quot;data&quot;:CDI3</code> is wrong, <code>CDI3</code> is a string so it needs to be quoted: <code>&quot;data&quot;:&quot;CDI3&quot;</code>. Please explain why you think you need to escape quotes and where this broken JSON is coming from. What are you trying to do, in a broader sense?"}, {"owner": {"reputation": 79, "user_id": 4816773, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/463afffec2a879c7c0d87537cabe8fad?s=128&d=identicon&r=PG&f=1", "display_name": "Barry P", "link": "https://stackoverflow.com/users/4816773/barry-p"}, "edited": false, "score": 0, "creation_date": 1488466616, "post_id": 42449122, "comment_id": 72251704, "body": "^^^ - correct, but the other label strings do not have quotes in this instance, and they actually need them. i.e. the ones showing {&quot;data&quot;:1087,&quot;label&quot;:&quot;&quot;},{&quot;data&quot;:COS1,&quot;label&quot;:&quot;&quot;}, the COS1 string should be in quotes, and it should go next to the label key, which is somehow rendering a null value, rather than the label value. A raw JSON string has this - [{&quot;data&quot;:&quot;2829&quot;,&quot;label&quot;:&quot;CDI3&quot;},{&quot;data&quot;:&quot;1&quot;,&quot;label&quot;:&quot;COS-COS&zwnj;&#8203;2&quot;},{&quot;data&quot;:&quot;1070&quot;,&quot;&zwnj;&#8203;label&quot;:&quot;COS1&quot;},{&quot;dat&zwnj;&#8203;a&quot;:&quot;5090&quot;,&quot;label&quot;:&quot;C&zwnj;&#8203;OS2&quot;},{&quot;data&quot;:&quot;2817&quot;&zwnj;&#8203;,&quot;label&quot;:&quot;CULB&quot;},{&quot;d&zwnj;&#8203;ata&quot;:&quot;1&quot;,&quot;label&quot;:&quot;EQ&zwnj;&#8203;UIT&quot;},{&quot;data&quot;:&quot;4443&quot;&zwnj;&#8203;,&quot;label&quot;:&quot;Network&quot;}]&zwnj;&#8203;-nums in quotes here"}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 4816773, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/463afffec2a879c7c0d87537cabe8fad?s=128&d=identicon&r=PG&f=1", "display_name": "Barry P", "link": "https://stackoverflow.com/users/4816773/barry-p"}, "edited": false, "score": 0, "creation_date": 1490907458, "post_id": 42449220, "comment_id": 73335181, "body": "Sorry, I tried the above, and I&#39;m still getting a regular JSON string with all the array items returned in quotes. I&#39;m trying to simply parse the quotes around the data array items being returned. Thanks!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 79, "user_id": 4816773, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/463afffec2a879c7c0d87537cabe8fad?s=128&d=identicon&r=PG&f=1", "display_name": "Barry P", "link": "https://stackoverflow.com/users/4816773/barry-p"}, "edited": false, "score": 0, "creation_date": 1490923028, "post_id": 42449220, "comment_id": 73339986, "body": "No idea what ate are talking about. 1) you specifically asked to place the elements in quotes, so why are you complaining about it now? 2) There&#39;s nothing related to parsing in your question."}, {"owner": {"reputation": 79, "user_id": 4816773, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/463afffec2a879c7c0d87537cabe8fad?s=128&d=identicon&r=PG&f=1", "display_name": "Barry P", "link": "https://stackoverflow.com/users/4816773/barry-p"}, "edited": false, "score": 0, "creation_date": 1491233773, "post_id": 42449220, "comment_id": 73450604, "body": "no idea what I&#39;m talking about? I&#39;m talking about trying to PARSE the quotes around the data item in the array? I.e. instead of  [{&quot;data&quot;:&quot;2943&quot;,... like above I&#39;m trying to return it as [{&quot;data&quot;:2943,... Sorry, I thought it was pretty clear."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 79, "user_id": 4816773, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/463afffec2a879c7c0d87537cabe8fad?s=128&d=identicon&r=PG&f=1", "display_name": "Barry P", "link": "https://stackoverflow.com/users/4816773/barry-p"}, "edited": false, "score": 0, "creation_date": 1491233894, "post_id": 42449220, "comment_id": 73450676, "body": "Ah, my confusion is from your misuse of &quot;parsing&quot;. Parsing is to take a string, turn it into tokens, and assign meaning to those tokens. You want the opposite. You&#39;re trying to <i>serialize</i>. Specifically, the issue is that you want the numbers in <code>data</code> to be serialized as JSON numbers. Adjusted my answer."}, {"owner": {"reputation": 79, "user_id": 4816773, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/463afffec2a879c7c0d87537cabe8fad?s=128&d=identicon&r=PG&f=1", "display_name": "Barry P", "link": "https://stackoverflow.com/users/4816773/barry-p"}, "edited": false, "score": 0, "creation_date": 1491239513, "post_id": 42449220, "comment_id": 73453975, "body": "Apologies. I&#39;m used to parsing meaning strip out, but I&#39;m probably (incorrectly) applying the term here to Perl when it shouldn&#39;t be. But yes! Thank you much! I&#39;ll check it out!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 79, "user_id": 4816773, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/463afffec2a879c7c0d87537cabe8fad?s=128&d=identicon&r=PG&f=1", "display_name": "Barry P", "link": "https://stackoverflow.com/users/4816773/barry-p"}, "edited": false, "score": 0, "creation_date": 1491239974, "post_id": 42449220, "comment_id": 73454222, "body": "No, that&#39;s not right either. There&#39;s no quotes in your data to strip out (remove)."}, {"owner": {"reputation": 79, "user_id": 4816773, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/463afffec2a879c7c0d87537cabe8fad?s=128&d=identicon&r=PG&f=1", "display_name": "Barry P", "link": "https://stackoverflow.com/users/4816773/barry-p"}, "edited": false, "score": 0, "creation_date": 1491242945, "post_id": 42449220, "comment_id": 73455905, "body": "HOLY SMOKES! That did it ikegami. Thank you so much!"}, {"owner": {"reputation": 79, "user_id": 4816773, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/463afffec2a879c7c0d87537cabe8fad?s=128&d=identicon&r=PG&f=1", "display_name": "Barry P", "link": "https://stackoverflow.com/users/4816773/barry-p"}, "edited": false, "score": 0, "creation_date": 1491243922, "post_id": 42449220, "comment_id": 73456418, "body": "Actually, one little thing I noticed. It&#39;s skipping the first record for some reason. Like from above, [{&quot;data&quot;:2943,&quot;label&quot;:&quot;CDI3&quot;} is getting skipped, but all others coming in fine. Trying to troubleshoot that one."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 79, "user_id": 4816773, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/463afffec2a879c7c0d87537cabe8fad?s=128&d=identicon&r=PG&f=1", "display_name": "Barry P", "link": "https://stackoverflow.com/users/4816773/barry-p"}, "edited": false, "score": 1, "creation_date": 1491247033, "post_id": 42449220, "comment_id": 73458145, "body": "Nope, <a href=\"https://pastebin.com/FZTC7LZH\" rel=\"nofollow noreferrer\">not so</a>. Perhaps you have a fetch outside of the loop?"}, {"owner": {"reputation": 79, "user_id": 4816773, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/463afffec2a879c7c0d87537cabe8fad?s=128&d=identicon&r=PG&f=1", "display_name": "Barry P", "link": "https://stackoverflow.com/users/4816773/barry-p"}, "edited": false, "score": 0, "creation_date": 1491340548, "post_id": 42449220, "comment_id": 73506877, "body": "Thanks, with your pastebin help I was able to get it resolved! Many thanks!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1491234549, "last_edit_date": 1491234549, "creation_date": 1487974621, "answer_id": 42449220, "question_id": 42449122, "link": "https://stackoverflow.com/questions/42449122/perl-array-trying-to-parse-quotes-in-proper-array-elements/42449220#42449220", "title": "Perl array - trying to parse quotes in proper array elements", "body": "<pre><code>use JSON::XS qw( encode_json );\n\nmy @data;\nwhile ( my $row = $query_handle-&gt;fetchrow_hashref('NAME_lc') ) {  \n   # If $row-&gt;{data} is a number,\n   # make sure it's stored as a number\n   # so that it gets serialized as a number.\n   $row-&gt;{data} += 0 if $row-&gt;{data} =~ /^\\d+\\z/;\n\n   push @data, $row;\n}\n\nprint(encode_json(\\@data));\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>my $data = $query_handle-&gt;fetchall_arrayref({ data =&gt; 1, label =&gt; 1 });\nfor my $row (@$data) {\n   $row-&gt;{data} += 0 if $row-&gt;{data} =~ /^\\d+\\z/;\n}\n\nprint(encode_json($data));\n</code></pre>\n\n<p>Or if you ensure the fields names are returned as lowercase<sup>[1]</sup>,</p>\n\n<pre><code>my $data = $query_handle-&gt;fetchall_arrayref({});\nfor my $row (@$data) {\n   $row-&gt;{data} += 0 if $row-&gt;{data} =~ /^\\d+\\z/;\n}\n\nprint(encode_json($data));\n</code></pre>\n\n<hr>\n\n<ol>\n<li>This can be done using <code>$dbh-&gt;{FetchHashKeyName} = 'NAME_lc';</code> or <code>AS `label`</code>.</li>\n</ol>\n"}], "owner": {"reputation": 79, "user_id": 4816773, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/463afffec2a879c7c0d87537cabe8fad?s=128&d=identicon&r=PG&f=1", "display_name": "Barry P", "link": "https://stackoverflow.com/users/4816773/barry-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 42449220, "answer_count": 1, "score": 1, "last_activity_date": 1491234549, "creation_date": 1487974126, "last_edit_date": 1491234263, "question_id": 42449122, "link": "https://stackoverflow.com/questions/42449122/perl-array-trying-to-parse-quotes-in-proper-array-elements", "title": "Perl array - trying to parse quotes in proper array elements", "body": "<p>I have been struggling with this for a while in a Perl script I have. Probably a slam dunk for you Perl experts, and probably should be easier, but I can't quite crack the nut on this. I might be needing to split this, not sure.</p>\n\n<p>My array code as is follows.</p>\n\n<pre><code>while ( my $row = $query_handle-&gt;fetchrow_hashref('NAME_lc') ){  \n    push @query_output, $row; \n    push (@{portfo-&gt;{label}},$row-&gt;{data},$row-&gt;{label}); \n}   \n</code></pre>\n\n<p>And then my print of the array is as follows:</p>\n\n<pre><code>    print \"array here--\";\nprint \"[\";\nforeach (@{portfo-&gt;{label}}) {\n    #(@{portfo-&gt;{label}},$row-&gt;{data});\n    print \"\\{\\\"data\\\":\";\n    print \"\".$_.\",\";\n    print \"\\\"label\\\":\";\n    print \"\\\"\".$row[1].\"\\\"\\},\";\n}\nprint \"]\";\nprint \"\\n\";\n</code></pre>\n\n<p>And then my output looks like this:</p>\n\n<pre><code>[{\"data\":2943,\"label\":\"\"},{\"data\":CDI3,\"label\":\"\"}, \n{\"data\":1,\"label\":\"\"},{\"data\":COS-COS2,\"label\":\"\"}, \n{\"data\":1087,\"label\":\"\"},{\"data\":COS1,\"label\":\"\"},\n{\"data\":5183,\"label\":\"\"},{\"data\":COS2,\"label\":\"\"},\n{\"data\":2731,\"label\":\"\"},{\"data\":CULB,\"label\":\"\"},{\"data\":1,\"label\":\"\"},\n{\"data\":EQUIT,\"label\":\"\"},{\"data\":4474,\"label\":\"\"},\n{\"data\":Network,\"label\":\"\"},]\n</code></pre>\n\n<p>I am trying to make the apha-num string array items like CDI3, COS1, COS2, etc in quotes, in the label part. Somehow I'm getting it separated. Meanwhile, I do want the numeric values left with the \"data\" name pair. </p>\n\n<pre><code>[{\"data\":2943,\"label\":\"\"},{\"data\":\"CDI3\",\"label\":\"\"}, \n{\"data\":1,\"label\":\"\"},{\"data\":\"COS-COS2\",\"label\":\"\"}, \n{\"data\":1087,\"label\":\"\"},{\"data\":\"COS1\",\"label\":\"\"},\n{\"data\":5183,\"label\":\"\"},{\"data\":\"COS2\",\"label\":\"\"},\n{\"data\":2731,\"label\":\"\"},{\"data\":\"CULB\",\"label\":\"\"},{\"data\":1,\"label\":\"\"},\n{\"data\":\"EQUIT\",\"label\":\"\"},{\"data\":4474,\"label\":\"\"},\n{\"data\":\"Network\",\"label\":\"\"}]\n</code></pre>\n\n<p>I'm sure it's a simpler fix that I'm making it but so far no luck. Any tips would be greatly appreciated!</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl", "variables", "hash"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1487961626, "post_id": 42446002, "comment_id": 72035579, "body": "Can you post your actual code and not a (mostly) textual description of it? Which piece of your scalar is supposed to be the key? Which the value?"}, {"owner": {"reputation": 23, "user_id": 6504653, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-OGB-cuCvPyY/AAAAAAAAAAI/AAAAAAAAAFQ/cX8vYDOSRf4/photo.jpg?sz=128", "display_name": "Mike Addison", "link": "https://stackoverflow.com/users/6504653/mike-addison"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1487962897, "post_id": 42446002, "comment_id": 72036313, "body": "The value that&#39;s suppose to be the key is the IP with the value being the url."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1487965010, "post_id": 42446002, "comment_id": 72037372, "body": "@MikeAddison: How did you derive from the documentation that that is something that may work? You are creating a hash <code>%HOSTNAME</code> with one element that has a key of <code>100.20.31.00, ThisBigSite-Fun</code> and a value of <code>undef</code>. Strings don&#39;t spontaneously split into two. And please don&#39;t use Stack Overflow as a replacement for reading the language documentation and learning it."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6504653, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-OGB-cuCvPyY/AAAAAAAAAAI/AAAAAAAAAFQ/cX8vYDOSRf4/photo.jpg?sz=128", "display_name": "Mike Addison", "link": "https://stackoverflow.com/users/6504653/mike-addison"}, "edited": false, "score": 0, "creation_date": 1487963428, "post_id": 42446338, "comment_id": 72036547, "body": "Excellent!  Worked like a charm!  Thanks!"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 23, "user_id": 6504653, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-OGB-cuCvPyY/AAAAAAAAAAI/AAAAAAAAAFQ/cX8vYDOSRf4/photo.jpg?sz=128", "display_name": "Mike Addison", "link": "https://stackoverflow.com/users/6504653/mike-addison"}, "edited": false, "score": 3, "creation_date": 1487964422, "post_id": 42446338, "comment_id": 72037036, "body": "Please don&#39;t prompt the asker to accept your answer. Let them decide themselves. I found it a good habit to wait a couple of hours or even days before marking an answer as <i>accepted</i> for two reasons: a) questions without accepted answers usually attract more people, and b) perhaps other (better?) answers will then show up. @MikeAddison Refer to <i><a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a></i> and don&#39;t get in a hurry. (btw: this particular answer is correct, so I upvoted it.)"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1487964755, "post_id": 42446338, "comment_id": 72037217, "body": "Don&#39;t take it personally. I learned the same way as @PerlDuck pointed out, but the explanation I got was much more terse and aggressive. He did a nice job of explaining why :)"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1487965320, "post_id": 42446338, "comment_id": 72037546, "body": "Thank you, @stevieb but now I have bad conscience and feel a bit as if I&#39;d stolen reputation from Nullman :-( Sorry. Also, I do not understand why someone downvoted this answer."}, {"owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1487965494, "post_id": 42446338, "comment_id": 72037627, "body": "@PerlDuck dont worry about it, im not taking it personally or anything. im still new here and apparently made a faux pas, we live and learn"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1487973020, "post_id": 42446338, "comment_id": 72041525, "body": "@PerlDuck Don&#39;t fret it. As I&#39;m sure we all are aware, SO is not the easiest place to integrate into at first, so I just felt that your explanation was much more reasonable to explaining the situation than I&#39;ve seen in the past. Keep up the good work."}], "tags": [], "owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "is_accepted": false, "score": 1, "last_activity_date": 1487963481, "last_edit_date": 1487963481, "creation_date": 1487962826, "answer_id": 42446338, "question_id": 42446002, "link": "https://stackoverflow.com/questions/42446002/how-to-assign-ip-addresses-contained-in-a-perl-variable-to-a-hash/42446338#42446338", "title": "How to assign ip addresses contained in a Perl Variable, to a hash", "body": "<p>assuming you have a string '100.20.31.00, ThisBigSite-Fun' and you want to turn it into a hash where the ip is the key and the hostname is the value it will look something like this:</p>\n\n<pre><code>my ($ip, $host) = split /,\\s*/, $your_string;\n$HOSTNAME{$ip} = $host\n</code></pre>\n\n<p>or if you want it the other way around</p>\n\n<pre><code>$HOSTNAME{$host} = $ip\n</code></pre>\n\n<p>note that while your hash is <code>%hostname</code> to access a key you need to use <code>$</code></p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 6504653, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-OGB-cuCvPyY/AAAAAAAAAAI/AAAAAAAAAFQ/cX8vYDOSRf4/photo.jpg?sz=128", "display_name": "Mike Addison", "link": "https://stackoverflow.com/users/6504653/mike-addison"}, "edited": false, "score": 0, "creation_date": 1487964663, "post_id": 42446580, "comment_id": 72037157, "body": "Excellent!  Works like a charm!  Thanks!"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1487978295, "post_id": 42446580, "comment_id": 72043614, "body": "if the lines contain newlines, you may need to do <code>chomp @lines;</code>"}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": true, "score": 0, "last_activity_date": 1487963770, "creation_date": 1487963770, "answer_id": 42446580, "question_id": 42446002, "link": "https://stackoverflow.com/questions/42446002/how-to-assign-ip-addresses-contained-in-a-perl-variable-to-a-hash/42446580#42446580", "title": "How to assign ip addresses contained in a Perl Variable, to a hash", "body": "<p>There are couple problems with your current approach: </p>\n\n<pre><code>my %HOSTNAME; \nforeach my $n (@lines) { \n  my $holder = (splice(@lines,0,1)); \n  %HOSTNAME = $holder;\n}\n</code></pre>\n\n<ol>\n<li>no <code>use strict;</code> or <code>use warnings;</code>. </li>\n<li><code>$n</code> which holds the current element from the <code>@lines</code> array (the current line) is totally ignored. Instead on each iteration you cut the first element from <code>@lines</code> out and store it in <code>$holder</code></li>\n<li>the value of <code>%HOSTNAME</code> is overwritten on each iteration of the loop if you were to inspect <code>%HOSTNAME</code> after the loop completed it would only have a single entry (the last assigned entry)</li>\n</ol>\n\n<p>A correct implementation would parse the IP address and Hostname from your string and then assign them (as different keys) into <code>%HOSTNAME</code>:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy %HOSTNAMES;\nmy @lines = (\n  '100.20.31.00, ThisBigSite-Fun',\n  '100.20.31.02, ThisBigSite-Fun2',\n  '100.20.31.03, ThisBigSite-Fun3',\n  '100.20.31.04, ThisBigSite-Fun4',\n  '100.20.31.05, ThisBigSite-Fun5',\n);\n\nforeach my $line (@lines) {\n  my ($ip, $host) = split /,\\s*/, $line;\n\n  $HOSTNAMES{$ip} = $host;\n}\n\nprint Dumper \\%HOSTNAMES;\n#$VAR1 = {\n#          '100.20.31.00' =&gt; 'ThisBigSite-Fun',\n#          '100.20.31.03' =&gt; 'ThisBigSite-Fun3',\n#          '100.20.31.05' =&gt; 'ThisBigSite-Fun5',\n#          '100.20.31.02' =&gt; 'ThisBigSite-Fun2',\n#          '100.20.31.04' =&gt; 'ThisBigSite-Fun4'\n#        };\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6504653, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-OGB-cuCvPyY/AAAAAAAAAAI/AAAAAAAAAFQ/cX8vYDOSRf4/photo.jpg?sz=128", "display_name": "Mike Addison", "link": "https://stackoverflow.com/users/6504653/mike-addison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "accepted_answer_id": 42446580, "answer_count": 2, "score": -2, "last_activity_date": 1487970460, "creation_date": 1487961541, "last_edit_date": 1487963165, "question_id": 42446002, "link": "https://stackoverflow.com/questions/42446002/how-to-assign-ip-addresses-contained-in-a-perl-variable-to-a-hash", "title": "How to assign ip addresses contained in a Perl Variable, to a hash", "body": "<p>I have a variable that contains an IP Address, and the URL that goes with that IP Address, in a Perl variable called $holder.  I'm trying to populate a hash called <code>%HOSTNAMES</code>.  $holder contains:  <code>100.20.31.00, ThisBigSite-Fun</code>.  I've tried:</p>\n\n<pre><code>%HOSTNAME = $holder;\n</code></pre>\n\n<p>But it gives me the wrong key value pairs.  Is there a better way to assign a multiple value variable to a hash?</p>\n\n<pre><code># lines contained a list of IP, URL-Addresses\nmy %HOSTNAME; \nforeach my $n (@lines) { \n  my $holder = (splice(@lines,0,1)); \n  %HOSTNAME = $holder;\n}\n</code></pre>\n"}, {"tags": ["multithreading", "perl", "crontab"], "comments": [{"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1487955151, "post_id": 42444072, "comment_id": 72031852, "body": "It would be really helpful if you could come up with a minimal, compilable code snippet that reproduces the problem you&#39;re having."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1487956365, "post_id": 42444072, "comment_id": 72032578, "body": "And that&#39;s why I asked for a <i>minimal snippet</i> that still reproduces the problem. Because the problem likely has something to do with the code."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7618024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0288796c4ef6652ca998ae9c8494c29c?s=128&d=identicon&r=PG&f=1", "display_name": "elbrabra94", "link": "https://stackoverflow.com/users/7618024/elbrabra94"}, "edited": false, "score": 0, "creation_date": 1487960446, "post_id": 42445346, "comment_id": 72034930, "body": "I already do this modification and it&#39;s worse. The script doesn&#39;t work when I launch it manually.  [root@SERVER]# ./test_ping.sh &lt;stuck here, it doesnt give me access to the prompt again&gt;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 7618024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0288796c4ef6652ca998ae9c8494c29c?s=128&d=identicon&r=PG&f=1", "display_name": "elbrabra94", "link": "https://stackoverflow.com/users/7618024/elbrabra94"}, "edited": false, "score": 0, "creation_date": 1487960500, "post_id": 42445346, "comment_id": 72034962, "body": "@elbrabra94, Again, you&#39;re asking why <code>process</code> doesn&#39;t return, but you didn&#39;t show <code>process</code>. I can only fix the problems you didn&#39;t ask about."}, {"owner": {"reputation": 1, "user_id": 7618024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0288796c4ef6652ca998ae9c8494c29c?s=128&d=identicon&r=PG&f=1", "display_name": "elbrabra94", "link": "https://stackoverflow.com/users/7618024/elbrabra94"}, "edited": false, "score": 0, "creation_date": 1487960544, "post_id": 42445346, "comment_id": 72034986, "body": "Ho sorry I a add the process function on my main post"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 7618024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0288796c4ef6652ca998ae9c8494c29c?s=128&d=identicon&r=PG&f=1", "display_name": "elbrabra94", "link": "https://stackoverflow.com/users/7618024/elbrabra94"}, "edited": false, "score": 0, "creation_date": 1487960573, "post_id": 42445346, "comment_id": 72035001, "body": "So I was right. You never told your threads to exit, so it&#39;s just a question of doing so as I detailed."}, {"owner": {"reputation": 1, "user_id": 7618024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0288796c4ef6652ca998ae9c8494c29c?s=128&d=identicon&r=PG&f=1", "display_name": "elbrabra94", "link": "https://stackoverflow.com/users/7618024/elbrabra94"}, "edited": false, "score": 0, "creation_date": 1487961222, "post_id": 42445346, "comment_id": 72035362, "body": "Ouch you have changed a lot of thing."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 7618024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0288796c4ef6652ca998ae9c8494c29c?s=128&d=identicon&r=PG&f=1", "display_name": "elbrabra94", "link": "https://stackoverflow.com/users/7618024/elbrabra94"}, "edited": false, "score": 0, "creation_date": 1487961358, "post_id": 42445346, "comment_id": 72035458, "body": "Yeah, I did lots of cleaning. (I just improved the explanation of these changes a bit.) Those changes aren&#39;t necessary, but it&#39;s far cleaner code."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1487961277, "last_edit_date": 1487961277, "creation_date": 1487959208, "answer_id": 42445346, "question_id": 42444072, "link": "https://stackoverflow.com/questions/42444072/multithreading-perl-script-and-crontab-init-script/42445346#42445346", "title": "Multithreading Perl script and crontab/init script", "body": "<p>First of all, don't detach your threads. When you do, you can't wait for them to finish.</p>\n\n<pre><code>for (my $i= 0; $i &lt; $thread_num; $i++) {\n    threads-&gt;create(\\&amp;process) -&gt; detach();\n}\n\n...\n\nfor my $thread (threads-&gt;list) {\n    $thread-&gt;detach();\n}  \n</code></pre>\n\n<p>should be</p>\n\n<pre><code>for (1..$thread_num) {\n    threads-&gt;create(\\&amp;process);\n}\n\n...\n\n... Tell the threads to finish up ...\n\nfor my $thread (threads-&gt;list) {\n    $thread-&gt;join();\n}  \n</code></pre>\n\n<hr>\n\n<p>Now on the question: Why don't your threads finish? Well, you never tell them to exit, so they never do! You need to ask to them to exit, and that can be achieved by adding the following:</p>\n\n<pre><code>$q_queue-&gt;end();\n</code></pre>\n\n<hr>\n\n<p>What follows is what you get after you apply the above fixes. I've also moved all thread-related code out of <code>process</code>, since it doesn't belong there. Finally, I removed the reliance on <code>$index</code> by moving the output code into its own thread.</p>\n\n<pre><code>sub process {\n   my ($q_line) = @_;\n   ...\n   return join(\"|\", $q_index, $q_name, $q_type, $q_query, @$r_tab{qw( min med avg max dev loss err )});\n}\n\nmy $request_q  = Thread::Queue-&gt;new();\nmy $response_q = Thread::Queue-&gt;new();\n\nmy @worker_threads;\nfor (1..$thread_num) {\n   push @worker_threads, async {\n      while (defined( my $request = $request_q-&gt;dequeue() )) {\n         $response_q-&gt;enqueue( process($request) );\n      }\n   };\n}\n\nmy $output_thread = do {\n   my $datestring = localtime();\n\n   open(my $fh, '&gt;', $output_file)\n      or die(\"Can't create file \\\"$output_file\\\": $!\\n\");\n\n   async {\n      while (defined( my $response = $response_q-&gt;dequeue() )) {\n         print($fh \"$datestring|$response\\n\");\n      }\n   }\n};\n\n{    \n   my %protos = map { $_ =&gt; 1 } qw( icmp tcp ldap dig );\n\n   open(my $fh, '&lt;', $data_file)\n      or die(\"Can't open file \\\"$data_file\\\": $!\\n\");\n\n   my $index = 0;\n   while (&lt;$fh&gt;) {\n      s/^\\s+//;\n      s/\\s+\\z//;\n      next if $_ eq \"\" || /^#/;\n\n      my ($proto) = split /\\|/;\n      next if !$protos{$proto};\n\n      $request_q-&gt;enqueue(++$index .\"|\". $_);\n   }\n}\n\n$request_q-&gt;end();\n$_-&gt;join() for @worker_threads;\n\n$response_q-&gt;end();\n$output_threads-&gt;join();\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7618024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0288796c4ef6652ca998ae9c8494c29c?s=128&d=identicon&r=PG&f=1", "display_name": "elbrabra94", "link": "https://stackoverflow.com/users/7618024/elbrabra94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487961277, "creation_date": 1487955022, "last_edit_date": 1487960277, "question_id": 42444072, "link": "https://stackoverflow.com/questions/42444072/multithreading-perl-script-and-crontab-init-script", "title": "Multithreading Perl script and crontab/init script", "body": "<p>I have an issue with a <code>Perl</code> script using thread.</p>\n\n<p>It works fine when I launch it manually but when I launch it using crontab I have this feedback:</p>\n\n<p>Perl exited with active threads:</p>\n\n<pre><code>    0 running and unjoined\n    1 finished and unjoined\n    0 running and detached\n</code></pre>\n\n<p>The <code>PATH</code> variable and <code>SHELL</code> variable are correct on the crontad.</p>\n\n<p>I try to make a init script (to launch as a service) and same error:</p>\n\n<blockquote>\n  <p>Feb 24 08:04:48 SERVER kernel: perl[103293]: segfault at 4a8 ip\n  00007f6cfd075dd9 sp 00007fffb93437c0 error 4 in\n  libperl.so[7f6cfcfdf000+183000] Feb 24 08:04:49 SERVER\n  test_ping[102238]: Perl exited with active threads: Feb 24 08:04:49\n  SERVER test_ping[102238]: 0 running and unjoined Feb 24 08:04:49\n  SERVER test_ping[102238]: 1 finished and unjoined Feb 24 08:04:49\n  SERVER test_ping[102238]: 0 running and detached</p>\n</blockquote>\n\n<p>So I have also tried to modified the perl with:</p>\n\n<pre><code>for my $thread (threads-&gt;list) {                                                                                                                \n$thread-&gt;join();                                                                               \n}\n</code></pre>\n\n<p>Instead of</p>\n\n<pre><code>for my $thread (threads-&gt;list) {                                                                                                                \n$thread-&gt;detach();                                                                               \n}\n</code></pre>\n\n<p>And after this modification when I launch manually the script, this one seems to be stuck/freezing.</p>\n\n<p>So to resume this is all my check:</p>\n\n<ol>\n<li>Executed manually it work</li>\n<li>Via crontab it doesn't work, check of PATH variable and SHELL\nvariable are ok</li>\n<li>Via init script, doesn't work</li>\n<li>Try to modify the perl script to join all thread but it the script\nis freezing after that.</li>\n</ol>\n\n<p>Anyone has a suggestion ? Something else to check/do ?</p>\n\n<p>Thk</p>\n\n<pre><code> use lib '/usr/local/perf/lib';\nuse lib '/usr/share/perl5';\nuse threads;\nuse Thread::Queue;\nuse SNMP::Persist qw(&amp;define_oid &amp;start_persister &amp;define_subtree);\nuse Schedule::ByClock;\nuse Time::HiRes qw( usleep ualarm gettimeofday tv_interval );\n\nuse strict;\n#use warnings;\nuse constant DEBUG =&gt; 0;\nuse constant DEBUG2 =&gt; 1;\n\nif ($#ARGV + 1 != 2) {\n print \"usage: test_ping.pl OUTPUTFILE INPUTFILE \\n\";\n exit;\n}\n\nmy $output_file=$ARGV[0];\nmy $data_file=$ARGV[1];\nshift @ARGV;\nshift @ARGV;\n\n#start the thread serving answers\nstart_persister();\n\n#create queue for processing commands\nmy $q_queue = new Thread::Queue;\nmy $r_queue = new Thread::Queue;\n\n#create threads for processing queues\nfor(my $i= 0; $i &lt; $thread_num; $i++) {\n        threads-&gt;create(\\&amp;process) -&gt; detach();\n}\n        my $datestring=localtime();\n\n        my %subtree;\n        my @raw_data;\n\n        my ($q_line, @q_split);\n        my ($r_line, @r_split);\n        my $index=0;\n\n        # open file to get data\n        open(DAT, $data_file) || die(\"Could not open file!\");\n        @raw_data=&lt;DAT&gt;;\n        close(DAT);\n\n        # enqueue all lines to be process by threads\n        foreach $q_line (@raw_data) {\n                chomp($q_line);\n                $q_line =~ s/^\\s+//;\n                $q_line =~ s/\\s+$//;\n                next if ($q_line =~ /^#.*/);\n                next if ($q_line eq \"\");\n                next if ($q_line =~ /^\\|/);\n\n                @q_split=split(/\\|/,$q_line);\n                next if (!($q_split[0] eq \"icmp\" || $q_split[0] eq \"tcp\" || $q_split[0] eq \"ldap\" || $q_split[0] eq \"dig\" ));\n\n                $q_queue-&gt;enqueue(++$index .\"|\". $q_line);\n        }\n\n        while ($index != 0 &amp;&amp; ($r_line = $r_queue-&gt;dequeue)) {\n\n                open(my $fh, '&gt;&gt;', $output_file) or die \"Could not open file '$output_file' $!\";\n                print $fh $datestring.\"|\";\n                print $fh $r_line.\"\\n\";\n                close $fh;\n                @r_split=split(/\\|/,$r_line);\n                $index--;\n        }\n\n        for my $thread (threads-&gt;list) {                                                                                                                \n            $thread-&gt;detach();                                                                               \n    }  \n</code></pre>\n\n<p>Below the process fonction:</p>\n\n<pre><code>sub process {\n    # my @hotefqdn = split(/\\./, `hostname`);\n    # my $hote=$hotefqdn[0];\n    my ($q_line,@q_split,$q_index,$q_query);\n    my ($q_module,$q_type,$q_name,$q_host,$q_port,$q_ssl,$q_send,$q_expect,$q_quit);\n    my ($q_lookup,$q_record);\n    my ($q_base_dn,$q_attr,$q_binddn,$q_password,$q_warn_time,$q_crit_time,$q_timeout);\n    my ($r_tab);\n\n    while ($q_line = $q_queue-&gt;dequeue) { \n\n            @q_split=split(/\\|/,$q_line);\n\n            $q_index=$q_split[0];\n            $q_module=$q_split[1];\n\n            if ($q_module eq \"icmp\") {\n                    $q_type=$q_split[2];\n                    $q_name=$q_split[3];\n                    $q_host=$q_split[4];\n                    $q_query=\"$q_host (ping)\";\n                    print \"query=$q_query\\n\" if(DEBUG);\n                    $r_tab=icmp_query($q_host);\n            }\n            elsif ($q_module eq \"tcp\") {\n                    $q_type=$q_split[2];\n                    $q_name=$q_split[3];\n                    $q_query=\"$q_host ($q_type:$q_port)\";\n                    print \"query=$q_query\\n\" if(DEBUG);\n                    $r_tab=tcp_query($q_host,$q_port,$q_ssl,$q_send,$q_expect,$q_quit);\n            }\n            elsif ($q_module eq \"ldap\") {\n                    $q_type=$q_split[2];\n                    $q_name=$q_split[3];\n                    print \"query=$q_query\\n\" if(DEBUG);\n                    $r_tab=ldap_query($q_host,$q_base_dn,$q_port,$q_attr,$q_binddn,$q_password,$q_warn_time,$q_crit_time,$q_timeout);\n            }\n            elsif ($q_module eq \"dig\") {\n                    $q_type=$q_split[2];\n                    $q_name=$q_split[3];\n                    $q_query=\"$q_lookup($q_record) @\".$q_host;\n                    print \"query=$q_query\\n\" if(DEBUG);\n                    $r_tab=dig_query($q_host,$q_port,$q_lookup,$q_record,$q_expect);\n            }\n\n            $r_queue-&gt;enqueue($q_index.\"|\".$q_name.\"|\".$q_type.\"|\".$q_query.\"|\".$r_tab-&gt;{'min'}.\"|\".$r_tab-&gt;{'med'}.\"|\".$r_tab-&gt;{'avg'}.\"|\".$r_tab-&gt;{'max'}.\"|\".$r_tab-&gt;{'dev'}.\"|\".$r_tab-&gt;{'loss'}.\"|\".$r_tab-&gt;{'err'});\n    }\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["perl", "oop", "moose", "coercion", "moosex-types"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1487960173, "post_id": 42443934, "comment_id": 72034767, "body": "I tidied your question so that I could read it, and in the process suffered some culture shock! I had never heard of the spelling <i>parametrize</i>; in England it is only <i>parameterise</i> and your spelling jarred. Given that the types module is called <code>MooseX::Types::Parameterizable</code> I copied that spelling throughout. I&#39;m happy to concede your <code>z</code> (&quot;zed&quot;) instead of our <code>s</code>. I hope you&#39;re happy with the changes."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1487974824, "post_id": 42443934, "comment_id": 72042332, "body": "@Borodin that comment made me literally laugh out loud. :)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1487975257, "post_id": 42443934, "comment_id": 72042493, "body": "@Borodin I had never seen that spelling either, but <a href=\"http://english.stackexchange.com/questions/79847/parametrise-or-parameterise-a-curve\">apparently it&#39;s correct</a>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1487976247, "post_id": 42443934, "comment_id": 72042879, "body": "I can&#39;t install MooseX::Types::Parameterizable because there&#39;s a test failing. Someone opened <a href=\"https://github.com/jjn1056/MooseX-Types-Parameterizable/pull/9\" rel=\"nofollow noreferrer\">a PR in 2015</a> to deprecate it and skip the failing tests. Maybe you should look at Type::Tiny instead."}, {"owner": {"reputation": 137, "user_id": 2454025, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cdf738ba6122adf3df31306e076a2a55?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/2454025/bob"}, "edited": false, "score": 0, "creation_date": 1488311434, "post_id": 42443934, "comment_id": 72171942, "body": "Gentlemen, thanks for the comments. I&#39;m now trying to approach the same task via Type::Tiny ,not MooseX::Types::Parametrizable, and <a href=\"http://stackoverflow.com/questions/42517460/parametrizing-type-with-another-type-using-typetiny\">reposted the question here</a>"}], "owner": {"reputation": 137, "user_id": 2454025, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cdf738ba6122adf3df31306e076a2a55?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/2454025/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1487959791, "creation_date": 1487954592, "last_edit_date": 1487959791, "question_id": 42443934, "link": "https://stackoverflow.com/questions/42443934/parameterizing-a-moose-subtype-by-another-subtype-via-coercion", "title": "Parameterizing a Moose subtype by another subtype via coercion", "body": "<p>I'm unsuccessfully trying to create a type <code>_Varchar</code> which would use another type <code>_VarcharRange</code> as a parameter. <code>_VarcharRange</code>, in turn, can be coerced from one of the Moose base types.</p>\n\n<p>Let me start with <code>_Varchar_Range</code> as an example</p>\n\n<pre><code>package MyTypes;\n\nuse strict;\nuse warnings;\n\nuse Moose;\nuse MooseX::Types::Moose qw(Str Int ArrayRef HashRef);\nuse MooseX::Types::Common::Numeric qw( PositiveOrZeroInt );\nuse MooseX::Types::Parameterizable qw(Parameterizable);\nuse MooseX::Types -declare=&gt;[qw(_VarcharRange)];\n\nsubtype _VarcharRange,\n\n    as HashRef[PositiveOrZeroInt], # Must ask for it from MooseX\n\n    where {\n        return 0 if ( grep {$_ ne 'min' &amp;&amp; $_ ne 'max' } keys %{$_});\n        return ( $_-&gt;{min} &lt;= $_-&gt;{max} ) if ( defined $_-&gt;{max} &amp;&amp; defined $_-&gt;{min} );\n        return 1;\n    },\n\n    message {\"Trololo\"};\n\ncoerce _VarcharRange,\n\n  from ArrayRef[PositiveOrZeroInt],\n\n  via {\n    my $result;\n    my @keys = qw(min max);\n\n    foreach my $val (reverse @$_) {\n        my $key = pop @keys // 'bad_range';\n        $result-&gt;{$key} = $val;\n    }\n\n    return $result;\n  };\n\nhas 'my_range' =&gt; ( isa =&gt; _VarcharRange, is =&gt; 'ro', coerce =&gt; 1 );\n\n1;\n</code></pre>\n\n<p>And the corresponding test file:</p>\n\n<pre><code>!/usr/bin/env perl\n\nuse MyTypes qw(_VarcharRange);\n\nmy $check = MyTypes-&gt;new(\n    #my_range =&gt; [5, 10],   # works fine\n    #my_range =&gt; [1, 0],    # fails, as expected\n    #my_range =&gt; [0, 1, 2], # fails, as expected\n    #my_range =&gt; [10],      # works fine\n);\n</code></pre>\n\n<p>So far so good, but now I try to add a type <code>_Varchar</code> parameterizable by <code>_VarcharRange</code>. Adding it to <code>MyTypes.pm</code>:</p>\n\n<pre><code>subtype _Varchar,\n\n    as Parameterizable[Str, _VarcharRange],\n\n    where {\n        my ( $string, $range ) = @_;\n        my $len = length($string);\n        return 0 if ($range-&gt;{min} &amp;&amp; $len &lt; $range-&gt;{min});\n        return 0 if ($range-&gt;{max} &amp;&amp; $len &gt; $range-&gt;{max});\n        return 1;\n    },\n\n    message { \"'$_[0]' length is not within range $_[1]-&gt;{min} - $_[1]-&gt;{max}\" };\n\n    has 'my_string' =&gt; ( isa =&gt; _Varchar[ [1, 10] ], is =&gt; 'ro' );\n</code></pre>\n\n<p>And this does not work.</p>\n\n<p>What I expected is that <code>_VarcharRange</code> would be implicitly created by coercion from <code>[1, 10]</code> array reference. But looks like my code does not even proceed to creating <code>_VarcharRange</code>, since I'm trying to parameterize my <code>_Varchar</code> directly with <code>ArrayRef</code>.</p>\n\n<p>Is there a way to achieve what I want? Pass an array reference as a parameter, but have intermediate type <code>_VarcharRange</code> coerced from it and actually be used for parameterization.</p>\n\n<p>I don't want to parameterize <code>_Varchar</code> directly from <code>ArrayRef</code> because it is not very object-oriented. It feels like having an independent type for a range is the correct way.</p>\n"}, {"tags": ["linux", "perl", "sed"], "comments": [{"owner": {"reputation": 31, "user_id": 3977568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba7380876b10642273d0e7fae65aacff?s=128&d=identicon&r=PG&f=1", "display_name": "manoj", "link": "https://stackoverflow.com/users/3977568/manoj"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1487953351, "post_id": 42443410, "comment_id": 72030679, "body": "Sorry. i want to replace with another patten. eg : DEFGHI with ABCDEF"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1487953555, "post_id": 42443410, "comment_id": 72030817, "body": "This is non-trivial. Can the pattern occur more than once per line?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1487953815, "post_id": 42443410, "comment_id": 72030987, "body": "@toolic You&#39;re assuming there is exactly one match in every line (i.e. it&#39;ll break if it&#39;s more or less)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1487954867, "post_id": 42443410, "comment_id": 72031647, "body": "I&#39;m voting to close this question as off-topic because the task description is unclear and OP is not responding to requests for clarification. (In particular: Can the pattern appear more than once in a single line? Can the pattern appear less than once in a line (that is, are there lines that don&#39;t match at all)?)"}, {"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 1, "creation_date": 1487956425, "post_id": 42443410, "comment_id": 72032617, "body": "<code>perl -pi -e&#39;s&#47;DEFGHI&#47;ABCDEF&#47; and $i++ if $i&lt;3&#39; &#47;home&#47;user&#47;test.txt</code>.  Extremely difficult to do with sed."}, {"owner": {"reputation": 31, "user_id": 3977568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba7380876b10642273d0e7fae65aacff?s=128&d=identicon&r=PG&f=1", "display_name": "manoj", "link": "https://stackoverflow.com/users/3977568/manoj"}, "edited": false, "score": 0, "creation_date": 1487957880, "post_id": 42443410, "comment_id": 72033441, "body": "sorry for not clear. pattern will be only once and for some lines the pattern will not match.. thanks for your hints"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1487962003, "post_id": 42443410, "comment_id": 72035790, "body": "Have a look at <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 14395, "user_id": 1344961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7ad173373ce2a48950108f5adc4b6d?s=128&d=identicon&r=PG", "display_name": "SLePort", "link": "https://stackoverflow.com/users/1344961/sleport"}, "is_accepted": false, "score": 0, "last_activity_date": 1487960670, "last_edit_date": 1487960670, "creation_date": 1487958546, "answer_id": 42445146, "question_id": 42443410, "link": "https://stackoverflow.com/questions/42443410/sed-find-and-replace-for-only-specific-number-of-occurrences/42445146#42445146", "title": "sed find and replace for only specific number of occurrences", "body": "<p>You can replace the first occurrence found three times:</p>\n\n<pre><code>sed -i '0,/DEFGHI/s//ABCDEF/;0,/DEFGHI/s//ABCDEF/;0,/DEFGHI/s//ABCDEF/' file\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>ABCABCDEFJKLMN\nABCABCDEFJKLMN\nABCABCDEFJKLMN\nABCDEFGHIJKLMN\nABCDEFGHIJKLMN\nABCDEFGHIJKLMN\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1487960921, "post_id": 42445306, "comment_id": 72035196, "body": "The (deleted) answer by @sidyll has the right idea and was helpful, thanks"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1488564610, "last_edit_date": 1488564610, "creation_date": 1487959088, "answer_id": 42445306, "question_id": 42443410, "link": "https://stackoverflow.com/questions/42443410/sed-find-and-replace-for-only-specific-number-of-occurrences/42445306#42445306", "title": "sed find and replace for only specific number of occurrences", "body": "<p>This replaces the given pattern three times, whichever way they're distributed over lines</p>\n\n<pre><code>perl -0777 -pe'$i += s/DEF/xxx/ while $i &lt; 3' &lt; data.txt  &gt; out.txt\n</code></pre>\n\n<p>It assumes that the pattern is not broken over lines. It makes passes over the string, searching from the beginning each time. This comes with a caveat explained below and is ineffcient but it is simple.</p>\n\n<p>If the replacement itself recreates the pattern when combined with the surrounding text, this will also be replaced in the next pass. Such a replacement would have to contain parts of the pattern itself and in a specific way. Still, if this is a concern let me know.</p>\n\n<p>Handling of possible overlapping patterns is not specified in the problem. If there are any this solution will replace the first so in the next pass the overlapping one will have been gone.</p>\n"}, {"comments": [{"owner": {"reputation": 7747, "user_id": 4086774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa70eacd799b083b10a8a43b418e2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Lars Fischer", "link": "https://stackoverflow.com/users/4086774/lars-fischer"}, "reply_to_user": {"reputation": 14395, "user_id": 1344961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7ad173373ce2a48950108f5adc4b6d?s=128&d=identicon&r=PG", "display_name": "SLePort", "link": "https://stackoverflow.com/users/1344961/sleport"}, "edited": false, "score": 1, "creation_date": 1487960600, "post_id": 42445597, "comment_id": 72035018, "body": "@SLePort You are right. I inverted the sequence. Thanks."}, {"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1488562855, "post_id": 42445597, "comment_id": 72302798, "body": "+1 for the sed+shell combo which works well for arbitrary values other than 3.  This &quot;brace expansion&quot; though, to be clear... bash?  So it&#39;s GNU sed+bash and bashlike shells."}], "tags": [], "owner": {"reputation": 7747, "user_id": 4086774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa70eacd799b083b10a8a43b418e2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Lars Fischer", "link": "https://stackoverflow.com/users/4086774/lars-fischer"}, "is_accepted": false, "score": 2, "last_activity_date": 1565096449, "last_edit_date": 1565096449, "creation_date": 1487960089, "answer_id": 42445597, "question_id": 42443410, "link": "https://stackoverflow.com/questions/42443410/sed-find-and-replace-for-only-specific-number-of-occurrences/42445597#42445597", "title": "sed find and replace for only specific number of occurrences", "body": "<p>This can be done using bash and GNU sed like this:</p>\n\n<pre><code>sed -z -i \"$(echo s/DEFGHI/ABCDEF/{3..1}\\;)\" yourfile\n</code></pre>\n\n<ul>\n<li>The <code>{3..1}</code> results in the the <code>s</code> part repeated three time with flag 3 to 1. Each <code>s</code> command replaces only the third, second and first occurence. The inverted order is necessary, so that the counting and replacing do not mix up.</li>\n<li><code>-z</code> takes all the input lines at once, thus the counting is not per line but per file.</li>\n</ul>\n\n<p>For your reference, here is what the command substitution around the echo produces:</p>\n\n<pre><code>echo s/DEFGHI/ABCDEF/{3..1}\\;\n&gt; s/DEFGHI/ABCDEF/3; s/DEFGHI/ABCDEF/2; s/DEFGHI/ABCDEF/1;\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 3977568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba7380876b10642273d0e7fae65aacff?s=128&d=identicon&r=PG&f=1", "display_name": "manoj", "link": "https://stackoverflow.com/users/3977568/manoj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1596, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1565096449, "creation_date": 1487953097, "last_edit_date": 1487962664, "question_id": 42443410, "link": "https://stackoverflow.com/questions/42443410/sed-find-and-replace-for-only-specific-number-of-occurrences", "title": "sed find and replace for only specific number of occurrences", "body": "<p>I have the following problem.</p>\n\n<p>I have a file with sequence and I want to find a specific pattern and replace it with another pattern, but only for a specific number of times.</p>\n\n<p>eg:</p>\n\n<pre><code>ABCDEFGHIJKLMN\nABCDEFGHIJKLMN\nABCDEFGHIJKLMN\nABCDEFGHIJKLMN\nABCDEFGHIJKLMN\nABCDEFGHIJKLMN\n</code></pre>\n\n<p>I want to find \"DEFGHI\" and replace it with \"ABCDEF\" for only 3 times.</p>\n\n<pre><code>sed -i 's/DEFGHI/ABCDEF/g' /home/user/test.txt\n</code></pre>\n\n<p>I don't want to replace globally; instead I want to replace only 3 times.</p>\n"}, {"tags": ["perl", "mailgun", "mojo-useragent"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1487950511, "post_id": 42442341, "comment_id": 72028811, "body": "Can you show your LWP::UserAgent script as well please?"}, {"owner": {"reputation": 2313, "user_id": 194547, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9daed16ecfea23c493a3b79603c51069?s=128&d=identicon&r=PG", "display_name": "varnie", "link": "https://stackoverflow.com/users/194547/varnie"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1487950662, "post_id": 42442341, "comment_id": 72028913, "body": "@simbabque I updated my question."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1487950750, "post_id": 42442341, "comment_id": 72028967, "body": "The <code>from</code> field has different content."}, {"owner": {"reputation": 2313, "user_id": 194547, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9daed16ecfea23c493a3b79603c51069?s=128&d=identicon&r=PG", "display_name": "varnie", "link": "https://stackoverflow.com/users/194547/varnie"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1487950779, "post_id": 42442341, "comment_id": 72028986, "body": "yes, I tried that &quot;format&quot;, it had no impact."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1487950816, "post_id": 42442341, "comment_id": 72029006, "body": "Please make sure you have the exact same thing in both versions so we don&#39;t waste time trying things you already tried."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 3, "creation_date": 1487951163, "post_id": 42442341, "comment_id": 72029238, "body": "Apart from different <code>from</code> field the Mojo version uses a JSON body while the LWP version behaves like a form submission, i.e. <code>application&#47;x-www-form-urlencoded</code>. I cannot see from the documentation that a JSON submission is accepted at all."}, {"owner": {"reputation": 2313, "user_id": 194547, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9daed16ecfea23c493a3b79603c51069?s=128&d=identicon&r=PG", "display_name": "varnie", "link": "https://stackoverflow.com/users/194547/varnie"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1487951836, "post_id": 42442341, "comment_id": 72029675, "body": "@SteffenUllrich I already tried <code>my $tx = $ua-&gt;post($url, $headers, form =&gt; $params);</code> instead, it didn&#39;t change anything at all. Please correct me if I am submitting a form improperly."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1487952680, "post_id": 42442341, "comment_id": 72030250, "body": "@varnie: I just pointed out that your non-working Mojo version does  obviously different things than the working LWP version. I recommend that you let it do exactly the same things (i.e. same from etc) first so that you can better find out what difference causes the problems. Finding the cause of a problem when changing lots of things at the same time is much harder than finding it when only changing few things."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1487953531, "post_id": 42442341, "comment_id": 72030800, "body": "It might also be helpful to dump out the full request with headers and body for both of the programs and compare."}, {"owner": {"reputation": 2313, "user_id": 194547, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9daed16ecfea23c493a3b79603c51069?s=128&d=identicon&r=PG", "display_name": "varnie", "link": "https://stackoverflow.com/users/194547/varnie"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1488028677, "post_id": 42442341, "comment_id": 72055621, "body": "@simbabque I provided the dumped data."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1488029621, "post_id": 42442341, "comment_id": 72055968, "body": "The mojo request doesn&#39;t have a body, but it has a content length header. Did you forget to copy that or is it missing?"}, {"owner": {"reputation": 2313, "user_id": 194547, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9daed16ecfea23c493a3b79603c51069?s=128&d=identicon&r=PG", "display_name": "varnie", "link": "https://stackoverflow.com/users/194547/varnie"}, "edited": false, "score": 0, "creation_date": 1488029765, "post_id": 42442341, "comment_id": 72056021, "body": "Ouch, my bad. I forgot to paste it. Updated again."}], "owner": {"reputation": 2313, "user_id": 194547, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9daed16ecfea23c493a3b79603c51069?s=128&d=identicon&r=PG", "display_name": "varnie", "link": "https://stackoverflow.com/users/194547/varnie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1488029739, "creation_date": 1487950031, "last_edit_date": 1592644375, "question_id": 42442341, "link": "https://stackoverflow.com/questions/42442341/unable-to-post-messages-using-mailbox-api-and-mojouseragent", "title": "Unable to post messages using Mailbox API and Mojo::UserAgent", "body": "<p>According to the API docs (<a href=\"https://documentation.mailgun.com/api-sending.html\" rel=\"nofollow noreferrer\">https://documentation.mailgun.com/api-sending.html</a>) all the relevant parameters are supplied, but it gives me</p>\n<blockquote>\n<p>400 response: BAD REQUEST</p>\n</blockquote>\n<p>Here's my piece of code:</p>\n<pre><code>#!/usr/bin/perl\n\nuse Mojo::UserAgent;\nuse MIME::Base64;\nuse JSON qw(to_json);\n\nuse strict;\nuse warnings;\nuse v5.10;\n\nmy $ua = Mojo::UserAgent-&gt;new;\nmy $endpoint = 'https://api.mailgun.net/v3/sandbox2ad5b70fd744416ea7ff3d5422YYYYYY.mailgun.org/messages';\n\nmy $key = 'key-d3d8d350d4ef9c92349df62208XXXXXX';\nmy $headers = { 'Authorization' =&gt; 'Basic ' . encode_base64('api:' . $key)  };\nmy $params = {\n    'to' =&gt; 'abc@domain.ru',\n    'subject' =&gt; 'testing',\n    'text' =&gt; 'some text',\n    'from' =&gt; 'postmaster@sandbox2ad5b70fd744416ea7ff3d5422YYYYYY.mailgun.org'\n};\n\nmy $tx = $ua-&gt;post($endpoint, $headers, json =&gt; $params);\nmy $res = $tx-&gt;success;\nif ($res) {\n    say $res-&gt;body;\n} else {\n    my $err = $tx-&gt;error;\n    die &quot;$err-&gt;{code} response: $err-&gt;{message}&quot; if $err-&gt;{code};\n    die &quot;Connection error: $err-&gt;{message}&quot;;\n}\n</code></pre>\n<p>I have Mojo version as follows:</p>\n<blockquote>\n<p>CORE</p>\n<p>Perl        (v5.22.1, linux)</p>\n<p>Mojolicious (7.26, Doughnut)</p>\n<p>OPTIONAL</p>\n<p>EV 4.0+                 (4.22)</p>\n<p>IO::Socket::Socks 0.64+ (0.67)</p>\n<p>IO::Socket::SSL 1.94+   (2.024)</p>\n<p>Net::DNS::Native 0.15+  (n/a)</p>\n</blockquote>\n<p>I wrote another version of this script using <code>LWP::UserAgent</code> and it works fine.</p>\n<p>Are there some Mojo::UserAgent experts who might have an idea of what is wrong with the script?</p>\n<p><strong>UPDATED</strong></p>\n<p>Here's my <code>LWP::UserAgent</code> version which works without problems:</p>\n<pre><code>my ($key, $domain, $from, $from_name, $to, $subject, $comments) = @_;\n\nmy $url = 'https://api.mailgun.net/v3';\n$url = $url . '/' . $domain . '/messages';  \n\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;default_header('Authorization' =&gt; 'Basic ' . encode_base64('api:' . $key));\n\nmy $data = {\n      to =&gt; $to,\n      subject =&gt; $subject,\n      text =&gt; $comments,\n      from =&gt;  $from_name . '&lt;' . $from . '&gt;'        \n};\n\nmy $r = $ua-&gt;post($url, Content =&gt; $data);\nmy $rc = $r-&gt;code; \nif ($rc == 200) {\n    my $hash = from_json($r-&gt;decoded_content);\n    say $hash-&gt;{id};\n    say $hash-&gt;{message};       \n} else {\n    return { error =&gt; $rc };\n}\n</code></pre>\n<p><strong>UPDATED ON 25.02.2017</strong></p>\n<p>I used fake requests to my <code>localhost:9000</code>. Here's what I've traced using <code>nc -l 9000</code>:</p>\n<pre><code>POST / HTTP/1.1\nTE: deflate,gzip;q=0.3\nConnection: TE, close\nAuthorization: Basic YXBpOmtleS1kM2Q4ZDM1MGQ0ZWY5YzkyMzQ5ZGY2MjIwOGRXXXXXX== \nHost: localhost:9000\nUser-Agent: libwww-perl/6.15\nContent-Length: 144\nContent-Type: application/x-www-form-urlencoded\n\ntext=%3Chtml%3E%3Cbody%3E%3Cp%3Etest%3C%2Fp%3E%3C%2Fbody%3E%3C%2Fhtml%3E&amp;from=John%3Clala%40ya.ru%3E&amp;to=zozoba29a%40yandex.ru&amp;subject=My+Subject\n</code></pre>\n<p>And:</p>\n<pre><code>POST / HTTP/1.1\nHost: localhost:9000\nAccept-Encoding: gzip\nContent-Type: application/x-www-form-urlencoded\nAuthorization: Basic YXBpOmtleS1kM2Q4ZDM1MGQ0ZWY5YzkyMzQ5ZGY2MjIwOGRjXXXXXX==\n\nContent-Length: 144\nUser-Agent: Mojolicious (Perl)\n\nfrom=John%3Clala%40ya.ru%3E&amp;subject=My+Subject&amp;text=%3Chtml%3E%3Cbody%3E%3Cp%3Etest%3C%2Fp%3E%3C%2Fbody%3E%3C%2Fhtml%3E&amp;to=zozoba29a%40yandex.ru\n</code></pre>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 4, "creation_date": 1487945067, "post_id": 42440490, "comment_id": 72025019, "body": "See <a href=\"http://www.cpan.org/modules/01modules.index.html\" rel=\"nofollow noreferrer\">index of uploaded modules</a>, <a href=\"http://www.cpan.org/modules/00modlist.long.html\" rel=\"nofollow noreferrer\">Perl5 registered modules list</a> and <a href=\"https://pause.perl.org/pause/query?ACTION=pause_namingmodules\" rel=\"nofollow noreferrer\">On The Naming of Modules</a>."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1487951406, "post_id": 42440770, "comment_id": 72029410, "body": "<code>PAUSE::Packages</code> is enormous! It&#39;s not as bad as, say, <code>Moose</code>, but you could almost fill your time sheet for the day with <i>installing <code>PAUSE::Packages</code></i>! Also note that the author <b>Neil Bowers</b> said <i>&quot;NOTE: this is very much an alpha release&quot;</i> back in October 2015."}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1487951799, "post_id": 42440770, "comment_id": 72029648, "body": "installed in less than a minute here. Also, why not kick off module installs and check them when they&#39;re done, rather than &#39;fill your time sheet for the day&#39; watching things happen?"}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1487951889, "post_id": 42440770, "comment_id": 72029706, "body": "it&#39;s not been updated since 2015, it&#39;s been in alpha for a while. Is it abandoned? Who knows. I provided a link to the data they need for easy access."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1487964337, "post_id": 42440770, "comment_id": 72036988, "body": "I was simply adding information. I didn&#39;t expect you to take it as a personal attack!"}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1488210708, "post_id": 42440770, "comment_id": 72119538, "body": "@Borodin I didn&#39;t, simply replied to your comment, and the edit"}], "tags": [], "owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "is_accepted": false, "score": 4, "last_activity_date": 1487945397, "creation_date": 1487945397, "answer_id": 42440770, "question_id": 42440490, "link": "https://stackoverflow.com/questions/42440490/simplest-way-to-get-a-comprehensive-listing-of-package-names-available-in-cpan/42440770#42440770", "title": "Simplest way to get a comprehensive listing of package names available in CPAN?", "body": "<p><a href=\"https://metacpan.org/pod/PAUSE::Packages\" rel=\"nofollow noreferrer\">PAUSE::Packages</a> can do what you want, however you probably want to use <a href=\"http://www.cpan.org/modules/01modules.index.html\" rel=\"nofollow noreferrer\">this list</a>, but <a href=\"http://prepan.org/\" rel=\"nofollow noreferrer\">http://prepan.org/</a> can provide advice/review before submission to cpan, with of course reading <a href=\"https://pause.perl.org/pause/query?ACTION=pause_namingmodules\" rel=\"nofollow noreferrer\">on the naming of modules</a> first.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1487951122, "last_edit_date": 1487951122, "creation_date": 1487945408, "answer_id": 42440775, "question_id": 42440490, "link": "https://stackoverflow.com/questions/42440490/simplest-way-to-get-a-comprehensive-listing-of-package-names-available-in-cpan/42440775#42440775", "title": "Simplest way to get a comprehensive listing of package names available in CPAN?", "body": "<p>Are you sure that's a thing you want? There are 33,623 <em>distributions</em> on CPAN at the time of writing. Within <code>cpan</code> you can enter</p>\n\n<pre><code>cpan&gt; d /./\n</code></pre>\n\n<p>That's <code>d</code> for <em>distributions</em> followed by a regex pattern that matches the names you're interested in</p>\n\n<p>If you're really interested in <em>packages</em> -- and a distribution may contain multiple package names -- you need</p>\n\n<pre><code>cpan&gt; m/./\n</code></pre>\n\n<p>where <code>m</code> is for <em>modules</em>. There are 163,136 of those, which means there's an average of four or five packages per distribution, and it takes <code>cpan</code> a few minutes to generate the list. (I'm sorry, I didn't monitor the exact time.)</p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 4, "last_activity_date": 1487960231, "last_edit_date": 1487960231, "creation_date": 1487947039, "answer_id": 42441317, "question_id": 42440490, "link": "https://stackoverflow.com/questions/42440490/simplest-way-to-get-a-comprehensive-listing-of-package-names-available-in-cpan/42441317#42441317", "title": "Simplest way to get a comprehensive listing of package names available in CPAN?", "body": "<p>If you have run <code>cpan</code> before, you have downloaded a comprehensive package and distribution list under <code>&lt;cpan-home&gt;/sources/modules/02packages.details.txt.gz</code>.</p>\n\n<p>A fresh copy is available on any CPAN mirror, e.g.\n<a href=\"http://www.cpan.org/modules/02packages.details.txt.gz\" rel=\"nofollow noreferrer\">http://www.cpan.org/modules/02packages.details.txt.gz</a> .</p>\n"}, {"tags": [], "owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "is_accepted": false, "score": 0, "last_activity_date": 1487952873, "creation_date": 1487952873, "answer_id": 42443335, "question_id": 42440490, "link": "https://stackoverflow.com/questions/42440490/simplest-way-to-get-a-comprehensive-listing-of-package-names-available-in-cpan/42443335#42443335", "title": "Simplest way to get a comprehensive listing of package names available in CPAN?", "body": "<p>You could use <a href=\"https://metacpan.org/pod/MetaCPAN::Client\" rel=\"nofollow noreferrer\">MetaCPAN::Client</a></p>\n\n<p>I found this <a href=\"http://blogs.perl.org/users/neilb/2016/12/working-with-the-metacpan-api.html\" rel=\"nofollow noreferrer\">article</a> which gives the idea about using this module.</p>\n\n<pre><code>#!/usr/bin/perl \nuse strict; use warnings; use MetaCPAN::Client;\nmy $mcpan  = MetaCPAN::Client-&gt;new();\nmy $release_results = $mcpan-&gt;release({ status =&gt; 'latest' } );\nwhile ( my $release = $release_results-&gt;next ) {\n    printf \"%s v%s\\n\", $release-&gt;distribution, $release-&gt;version;\n}\n</code></pre>\n\n<p>Currently this gave me <strong>32601</strong> result like this:</p>\n\n<pre><code>Proc-tored v0.11\nLocale-Utils-PlaceholderBabelFish v0.004\nPerinci-To-Doc v0.83\nMojolicious-Plugin-Qooxdoo v0.905\nApp-cdnget v0.05\nBaal-Parser v0.01\nAcme-DoOrDie v0.001\nNet-Shadowsocks v0.9.0\nMetaCPAN-Client v2.006000\n</code></pre>\n\n<p>This modules also gives information about <strong>release, module, author, and file</strong> &amp; uses <strong>Elasticsearch</strong>.</p>\n\n<p>It also get updated regularly on every MetaCPAN API change.</p>\n"}], "owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 42441317, "answer_count": 4, "score": 5, "last_activity_date": 1487960231, "creation_date": 1487944665, "question_id": 42440490, "link": "https://stackoverflow.com/questions/42440490/simplest-way-to-get-a-comprehensive-listing-of-package-names-available-in-cpan", "title": "Simplest way to get a comprehensive listing of package names available in CPAN?", "body": "<p>Suppose that, as a private project, I have implemented a Perl package, and tested it, both formally and through extensive everyday use.  I find the package useful and solid enough to warrant submitting it to CPAN.</p>\n\n<p>Up to this point, since the package has been a private project, I have not worried too much about the package's name, but now that I want to submitted to CPAN, however, I would like the package's name to fit well within the ecology of package names already in CPAN.</p>\n\n<p>In order to find a suitable \"CPAN name\" for my package, I would have to inspect a comprehensive listing of all these package names<sup>1</sup>.</p>\n\n<blockquote>\n  <p>What is the simplest way to get this comprehensive listing of names of packages in CPAN?</p>\n</blockquote>\n\n<hr>\n\n<p><strong>ObPedantry</strong></p>\n\n<p>(IOW, if the question above is already clear enough for you, you may safely ignore what follows.)</p>\n\n<p>I don't think that I can give a technically correct formal definition of what I mean here by \"package name\", so let me at least give an \"operational definition\".</p>\n\n<p>If, for example, the one-liner</p>\n\n<pre><code>$ perl -MFoo::Bar::Baz -c -e 1\n</code></pre>\n\n<p>fails with an error beginning with</p>\n\n<pre><code>Can't locate Foo/Bar/Baz.pm in @INC ...\n</code></pre>\n\n<p>..., but after installing some distributions from CPAN, the same oneliner succeeds with</p>\n\n<pre><code>-e syntax OK\n</code></pre>\n\n<p>...then I'll say that <em>\"<code>Foo::Bar::Baz</code> is a package name in CPAN\"</em>.</p>\n\n<p>(We could split hairs over the package/module distinction, and consider scenarios in which the distinction matters, but please let's not.)</p>\n\n<p>Furthermore, if after inspecting the list this question asks about I discover that, on the one hand, there are in fact many eminent package names in CPAN that begin with the prefix <code>Foo::Bar::</code>, and on the other, there are none (or negligibly few) that begin with the prefix <code>Fubar::</code>, then this would be a good enough reason for me to change the name of my <code>Fubar::Frobozz</code> package to <code>Foo::Bar::Frobozz</code> before submitting it to CPAN.</p>\n\n<hr>\n\n<p><sup><sup>1</sup> Of course, after inspecting such a list, I may discover that my package does not add sufficiently new functionality relative to what's already available in CPAN to warrant submitting my package to CPAN after all.</sup></p>\n"}, {"tags": ["perl", "build"], "answers": [{"tags": [], "owner": {"reputation": 434, "user_id": 2766918, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b30ed3dc92a395952309d65497b3b872?s=128&d=identicon&r=PG&f=1", "display_name": "user2766918", "link": "https://stackoverflow.com/users/2766918/user2766918"}, "is_accepted": false, "score": 0, "last_activity_date": 1487958177, "creation_date": 1487958177, "answer_id": 42445038, "question_id": 42439437, "link": "https://stackoverflow.com/questions/42439437/perl-invalid-version-format-from-compat-pm/42445038#42445038", "title": "Perl Invalid version format from Compat.pm", "body": "<p>Ok, figured it out (sort of).  I'm posting an answer, as I assume others will run into the same problem, and hopefully this will help them.  My Build.PL script was a cut/paste/modify from an example on the web.  I had the following:</p>\n\n<pre><code>use 5.010000; # NOT 5.8.8 - needed by CPAN testers\n\nuse Module::Build;\n\nmy $builder = Module::Build-&gt;new( module_name =&gt; 'code::unifdef+'\n       , license =&gt; 'perl'\n       , requires =&gt; { perl =&gt; '&gt;= 5.10.0' }   #hmm, this doesn't work...\n       , dist_version =&gt; '0.005.001'\n       , dist_author =&gt; 'John Ulvr &lt;perldev@ulvr.com&gt;'\n       , dist_abstract =&gt; 'processes conditional parts of makefiles, c/c++ and kconfig files'\n       , create_readme =&gt; 0\n       , create_makefile_pl =&gt; 'traditional'\n     );\n$builder-&gt;create_build_script;  #generate Build\n</code></pre>\n\n<p>The <code>requires</code> line was causing the problem.   I'm not sure why though, as I've seen other similar examples on the web of the requires clause, so either everyone is wrong, or there's some sort of bug in in Compat.pm.   Removing the requires line fixes the problem (I have requires in the .pl file itself, so it should catch out-of-date issues).</p>\n"}], "owner": {"reputation": 434, "user_id": 2766918, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b30ed3dc92a395952309d65497b3b872?s=128&d=identicon&r=PG&f=1", "display_name": "user2766918", "link": "https://stackoverflow.com/users/2766918/user2766918"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1487958177, "creation_date": 1487941643, "question_id": 42439437, "link": "https://stackoverflow.com/questions/42439437/perl-invalid-version-format-from-compat-pm", "title": "Perl Invalid version format from Compat.pm", "body": "<p>I'm trying to publish a module, and am running into a lot of weird errors, the latest of which is as follows:</p>\n\n<pre><code>C:\\Shared\\John\\Perl\\unifdef+.0.5.1&gt;build disttest\nCreating Makefile.PL\nInvalid version format (non-numeric data) at C:/perl/lib/Module/Build/Compat.pm\nline 134.\n</code></pre>\n\n<p>The code at the specified line is:</p>\n\n<pre><code>if ( my $minimum_perl = $requires-&gt;{perl} ) {\n    my $min_ver = version-&gt;new($minimum_perl)-&gt;numify;\n    print {$fh} \"require $min_ver;\\n\";\n}\n</code></pre>\n\n<p>so it looks like <code>$minimum_perl</code> is corrupted.   I do have the line:</p>\n\n<pre><code>require 5.10.0;\n</code></pre>\n\n<p>In the code, but that should be OK according to the documentation I've read.</p>\n\n<p>I tried upgrading various modules, and finally I tried a <code>cpan upgrade</code>, and upgraded my entire cpan, but I'm still getting the error.   Can anyone tell me what I'm doing wrong?  I am running perl 5.24.1</p>\n"}, {"tags": ["regex", "perl", "pcre"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1487938522, "post_id": 42437747, "comment_id": 72020733, "body": "<code>[A-Za-z0-9_]</code> is generally written as <code>\\w</code> if the character set is plain ASCII"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1487958222, "post_id": 42437747, "comment_id": 72033621, "body": "Is this a Perl or PCRE question? You seem to use them interchangeably, but they are different engines"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1487938605, "post_id": 42437879, "comment_id": 72020776, "body": "Your second alternative matches something different. I think you should explain it."}], "tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": false, "score": 1, "last_activity_date": 1487938791, "last_edit_date": 1487938791, "creation_date": 1487936874, "answer_id": 42437879, "question_id": 42437747, "link": "https://stackoverflow.com/questions/42437747/pcre-negative-lookahead-gives-unexpected-match/42437879#42437879", "title": "PCRE negative lookahead gives unexpected match", "body": "<p>Just add <code>\\b</code> before the negative lookahead which ensures that there is an word boundary exisst and also don't forget to add <code>:</code> in the first negative lookahead. Otherwise it would match the second part.</p>\n\n<pre><code>((?&lt;![:\\w])([A-Za-z0-9_]+)::([A-Za-z0-9_]+))\\b(?!:)\n</code></pre>\n\n<p>OR</p>\n\n<p>This would match the import string only if it's not preceded by a non-space character.</p>\n\n<pre><code>(?&lt;!\\S)([A-Za-z0-9_]+)::([A-Za-z0-9_]+)\\b(?!:)\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/gbk31C/1\" rel=\"nofollow noreferrer\">DEMO</a></p>\n"}, {"tags": [], "owner": {"reputation": 7975, "user_id": 3836111, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc8e3526756540925b0536455b280205?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Proske", "link": "https://stackoverflow.com/users/3836111/sebastian-proske"}, "is_accepted": false, "score": 1, "last_activity_date": 1487937671, "creation_date": 1487937671, "answer_id": 42438139, "question_id": 42437747, "link": "https://stackoverflow.com/questions/42437747/pcre-negative-lookahead-gives-unexpected-match/42438139#42438139", "title": "PCRE negative lookahead gives unexpected match", "body": "<p>Other than <code>\\b</code> you could also:</p>\n\n<ul>\n<li>use possessive matching to avoid backtracking into <code>foo</code>: <code>((?&lt;!\\w)([A-Za-z0-9_]+)::([A-Za-z0-9_]++))(?!:)</code></li>\n<li>add the word character class to the lookahead, so it can't backtrack into <code>foo</code>: <code>((?&lt;!\\w)([A-Za-z0-9_]+)::([A-Za-z0-9_]+))(?![:\\w])</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1487939247, "last_edit_date": 1495541811, "creation_date": 1487938946, "answer_id": 42438540, "question_id": 42437747, "link": "https://stackoverflow.com/questions/42437747/pcre-negative-lookahead-gives-unexpected-match/42438540#42438540", "title": "PCRE negative lookahead gives unexpected match", "body": "<p>This solution uses a <em>possessive quantifer</em> on the <code>foo</code> part of the pattern <code>\\w++</code>. That means it will refuse to backtrack after finding a series of \"word\" characters, even if the rest of the pattern -- the negative look-ahead -- then fails. I've also had to change the negative look-behind to reject word characters <em>or colons <code>:</code></em> to prevent things like <code>baz::std::foo</code> from matching</p>\n\n<p>It is mostly a tidy-up of <a href=\"https://stackoverflow.com/a/42438139/622310\">the answer from <strong>Sebastian Proske</strong></a>. It uses <code>\\w</code> instead of the literal character class, adds layout using the <code>/x</code> modifier, and removes unnecessary parentheses. It also provides a working example</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $s = 'match std::foo but not match std::foo::bar.';\n\nsay $1 while $s =~ / (?&lt;![\\w:]) ( \\w+::\\w++) (?!:) /gx;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>std::foo\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1487945891, "post_id": 42439225, "comment_id": 72025592, "body": "<code>[::]{2}</code> is nothing more than <code>::</code>. But regardless, I don&#39;t see how this regex answers the question."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1487958290, "post_id": 42439225, "comment_id": 72033651, "body": "Or more precisely, <code>[::]{2}</code> is a weird way of writing <code>[:]{2}</code>, which is a weird way of writing <code>:{2}</code>, which is  a weird way of writing <code>::</code>."}], "tags": [], "owner": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "is_accepted": false, "score": -1, "last_activity_date": 1487940925, "creation_date": 1487940925, "answer_id": 42439225, "question_id": 42437747, "link": "https://stackoverflow.com/questions/42437747/pcre-negative-lookahead-gives-unexpected-match/42439225#42439225", "title": "PCRE negative lookahead gives unexpected match", "body": "<p>To match this whole string <code>std::foo::bar</code> instead of partial values\nWe can use this regex</p>\n\n<p><code>((\\b(.+)\\b)+?[::]{2}.+)</code></p>\n\n<p>It will give you two matches</p>\n\n<ul>\n<li><code>std::foo</code></li>\n<li><code>std::foo::bar</code></li>\n</ul>\n"}], "owner": {"reputation": 29435, "user_id": 458742, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ee0a7599f30c29076a3c9a2c022e473b?s=128&d=identicon&r=PG", "display_name": "spraff", "link": "https://stackoverflow.com/users/458742/spraff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 42438540, "answer_count": 4, "score": 4, "last_activity_date": 1487940925, "creation_date": 1487936457, "question_id": 42437747, "link": "https://stackoverflow.com/questions/42437747/pcre-negative-lookahead-gives-unexpected-match", "title": "PCRE negative lookahead gives unexpected match", "body": "<p>I want a Perl regular expression to match <code>std::foo</code> but not match <code>std::foo::bar</code>. This is what I have so far:</p>\n\n<pre><code>/((?&lt;!\\w)([A-Za-z0-9_]+)::([A-Za-z0-9_]+))(?!:)/\n</code></pre>\n\n<p>This matches <code>std::foo::bar</code> as far as <code>std::fo</code>, but I want the whole match to fail for this input, not give a partial match.</p>\n\n<p>What regex to I actually want?</p>\n"}, {"tags": ["perl", "legend", "rrdtool", "rrd"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1487935610, "post_id": 42437160, "comment_id": 72018931, "body": "Looks like because your data has different width you cannot properly anticipate the individual widths. That makes the <code>\\t</code>s a problem."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1487936552, "post_id": 42437160, "comment_id": 72019547, "body": "I think this is because you need a fixed-width font, and Arial isn&#39;t."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1487940728, "post_id": 42437160, "comment_id": 72022148, "body": "Arial has both variable and monospaced."}], "answers": [{"comments": [{"owner": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "edited": false, "score": 1, "creation_date": 1487937384, "post_id": 42437841, "comment_id": 72020031, "body": "hmm, I believe I can&#39;t use sprintf with RRDTOOL/RRDs, or at least don&#39;t now how I would do that."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "edited": false, "score": 0, "creation_date": 1487937527, "post_id": 42437841, "comment_id": 72020115, "body": "@taiko it uses <code>sprintf</code> internally. Those patterns you pass in get fed into <code>sprintf</code>. You can see that from the <code>%6.3lf %s</code>. It creates a floating point number <code>%f</code> in <code>l</code> (interpret integer as C type &quot;long&quot;) with six digits and three decimals <code>%6.3</code> and the <code>%s</code> is for the <code>k</code>. Just try."}, {"owner": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "edited": false, "score": 0, "creation_date": 1487938305, "post_id": 42437841, "comment_id": 72020603, "body": "but I still have to change the font in the same time, to have everything properly aligned, or not ?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "edited": false, "score": 1, "creation_date": 1487939313, "post_id": 42437841, "comment_id": 72021193, "body": "@taiko yes. Changing the font is the first thing you have to do. It might be enough but if you have a twelve combination of very small and very large numbers you might still end up with a mess. So I would not only change the font but change the patterns too."}, {"owner": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "edited": false, "score": 0, "creation_date": 1487939548, "post_id": 42437841, "comment_id": 72021346, "body": "see it already. I&#39;m almost there. The values in the legend are nice and tidy , but I&#39;m still busy with header of the legend, which is plotted with COMMENT instruction, where I can&#39;t use sprintf I believe"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "edited": false, "score": 0, "creation_date": 1487939665, "post_id": 42437841, "comment_id": 72021427, "body": "@taiko now you know exactly how wide it is because you set it. So that&#39;s easy. Also the <code>x</code> operator is your friend. <code>q{-} x 20</code>"}, {"owner": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "edited": false, "score": 0, "creation_date": 1487940169, "post_id": 42437841, "comment_id": 72021749, "body": "Not really, for the first part (2GRAN) I couldn&#39;t use formatting and also I&#39;m not sure, I can use any code inside COMMENT"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "edited": false, "score": 0, "creation_date": 1487940209, "post_id": 42437841, "comment_id": 72021782, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/136547/discussion-between-simbabque-and-taiko\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1487945118, "last_edit_date": 1610973431, "creation_date": 1487936747, "answer_id": 42437841, "question_id": 42437160, "link": "https://stackoverflow.com/questions/42437160/how-can-i-align-the-fields-in-the-legend-of-an-rrdtool-graph-with-perl/42437841#42437841", "title": "How can I align the fields in the legend of an RRDtool graph with Perl?", "body": "<p>You have two problems.</p>\n<h2>The font</h2>\n<p>The first problem is that <strong>the Arial font is <a href=\"https://en.wikipedia.org/wiki/Typeface#Proportion\" rel=\"nofollow noreferrer\">proportional</a></strong>. Every glyph has a different width. That looks nice in a book, but doesn't work for reports.</p>\n<p>You need to use a <a href=\"https://en.wikipedia.org/wiki/Monospaced_font\" rel=\"nofollow noreferrer\">monospaced</a> font (like <em>Courier New</em>) for this to work at all.</p>\n<h2>The tabs</h2>\n<p>Your second problem are the <code>\\t</code>s.</p>\n<p>If stuff is too wide, you might have one <code>\\t</code> too much. That's why you are seeing things being one set of 8 spaces too far left. To fix this, don't use whitespace and tabs directly. The <a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"nofollow noreferrer\">underlying <code>sprintf</code></a> has  syntax to create columns.</p>\n<p>You can do <code>%-20s</code> to make a right-aligned column of width 20 characters that will always be filled up with spaces. You can also do <code>% 15s</code> to make\na 15 character column that is left-aligned.</p>\n<p>If we put that into practice, we'll get:</p>\n<pre><code>my @cols = (\n    sprintf( '%-20s',     '2GRAN' ),\n    sprintf( '% 15.3lf', 10_754 ),\n    sprintf( '% 15.3lf', 48_964 ),\n    sprintf( '% 15.3lf', 12_812 ),\n);\n\nprint join '', @cols;\n</code></pre>\n<p>This creates:</p>\n<pre><code>2GRAN                     10754.000      48964.000      12812.000\n</code></pre>\n<p>Now if we do multiple lines, it still looks nice.</p>\n<pre><code>foreach my $row (\n    [qw/ 2GRAN  10754 48964 12812 /],\n    [qw/ ASDFLONGERSTUFF  123 4444444 12312313 /],\n)\n{\n    CORE::say join '',\n        sprintf( '%-20s',    $row-&gt;[0] ),\n        sprintf( '% 15.3lf', $row-&gt;[1] ),\n        sprintf( '% 15.3lf', $row-&gt;[2] ),\n        sprintf( '% 15.3lf', $row-&gt;[3] );\n}\n\n__END__\n2GRAN                     10754.000      48964.000      12812.000\nASDFLONGERSTUFF             123.000    4444444.000   12312313.000\n</code></pre>\n<hr />\n<p>Remember that all this stuff that you showed in your question is also just Perl code. Part of this is from the question, and another part is <a href=\"https://chat.stackoverflow.com/rooms/136547/discussion-between-simbabque-and-taiko\">from chat</a>.</p>\n<blockquote>\n<pre><code>sub process_all_regions { \nmy ($region, $start,$end,$description) = @_; \nRRDs::graph &quot;$img/$region-$description-$start-days.png&quot;, \n&quot;-s -$start d&quot;, \n&quot;-e -$end d&quot;, \n#&quot;-s -1$duration*86400&quot;, \n&quot;--font&quot;,&quot;TITLE:18:Arial&quot;, \n&quot;--font&quot;,&quot;AXIS:11:Arial&quot;, \n&quot;--font&quot;,&quot;LEGEND:14:Courier New&quot;,\n &quot;COMMENT:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\\\\n&quot;,\n &quot;COMMENT:\\t\\t\\t\\t\\t\\t\\tMinimum\\t\\t\\tMaximum\\t\\t\\tAverage\\t\\t\\t\\tCurrent\\\\n&quot;,\n &quot;COMMENT:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\\\\n&quot;,\n &quot;LINE2:e2gran#DF01D7:\\t2GRAN\\t\\t\\t\\t&quot;,\n &quot;GPRINT:e2gmin:\\t%6.3lf %s\\t\\t&quot;,\n &quot;GPRINT:e2gmax:\\t%6.3lf %s\\t\\t&quot;,\n &quot;GPRINT:e2gaver:\\t%6.3lf %s\\t\\t&quot;,\n &quot;GPRINT:e2glast:\\t%6.3lf %s\\\\n&quot;,\n</code></pre>\n</blockquote>\n<p>All of those lines with the <code>sprintf</code> patterns are just arguments to <code>graph()</code>. You don't have to put the verbatim into your code. You can create them programmatically. So if you wanted to have the header the with the same column width as the data, you can just use <code>sprintf</code> yourself to construct that.</p>\n<pre><code>sprintf('COMMENT:%s\\\\n', '-' x 80),\nsprintf('COMMENT:% 35s%15s%15s%15s\\n', qw/Minimum Maximum Average Current/),\nsprintf('COMMENT:%s\\\\n', '-' x 80),\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "is_accepted": false, "score": 2, "last_activity_date": 1492083788, "last_edit_date": 1495540928, "creation_date": 1488009286, "answer_id": 42453464, "question_id": 42437160, "link": "https://stackoverflow.com/questions/42437160/how-can-i-align-the-fields-in-the-legend-of-an-rrdtool-graph-with-perl/42453464#42453464", "title": "How can I align the fields in the legend of an RRDtool graph with Perl?", "body": "<p>Thanks to the great help and hints from <a href=\"https://stackoverflow.com/users/1331451/simbabque%20%22simbabque\">simbabque</a>, I managed to use this (in the RRD:graph declaration):</p>\n\n<pre><code>\"--font\",\"LEGEND:14:Courier New\",\nsprintf('COMMENT:%s\\\\n', '-' x 110),\nsprintf('COMMENT:% 35s%18s%19s%19s\\n', qw/Minimum Maximum Average Current/),\nsprintf('COMMENT:%s\\\\n', '-' x 110),\nsprintf('LINE2:e2gran#DF01D7:%-11s','2GRAN'),\n\"GPRINT:e2gmin:% 19.0lf\",\n\"GPRINT:e2gmax:% 16.0lf\",\n\"GPRINT:e2gaver:% 16.0lf\",\n\"GPRINT:e2glast:% 16.0lf\\\\n\",\n</code></pre>\n\n<p>to get this\n<img src=\"https://i.stack.imgur.com/vlLUx.png\" alt=\"Well-aligned RRDtool graph legend\">\nwhich is much better than before.</p>\n"}], "owner": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2082, "favorite_count": 0, "accepted_answer_id": 42437841, "answer_count": 2, "score": 2, "last_activity_date": 1492083788, "creation_date": 1487934600, "last_edit_date": 1488211235, "question_id": 42437160, "link": "https://stackoverflow.com/questions/42437160/how-can-i-align-the-fields-in-the-legend-of-an-rrdtool-graph-with-perl", "title": "How can I align the fields in the legend of an RRDtool graph with Perl?", "body": "<p>I'm plotting graphs with Perl using <a href=\"https://oss.oetiker.ch/rrdtool/prog/RRDs.en.html\" rel=\"nofollow noreferrer\">RRDs</a>/RRDtool. I'm able to generate a graph with a legend, but I'm struggling to align the fields in the legend.</p>\n\n<p>The code I'm using is:</p>\n\n<pre><code>\"COMMENT:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\\\\n\",\n\"COMMENT:\\t\\t\\t\\t\\t\\t\\tMinimum\\t\\t\\tMaximum\\t\\t\\tAverage\\t\\t\\t\\tCurrent\\\\n\",\n\"COMMENT:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\\\\n\",\n\n\"LINE2:e2gran#DF01D7:\\t2GRAN\\t\\t\\t\\t\",\n\"GPRINT:e2gmin:\\t%6.3lf %s\\t\\t\",\n\"GPRINT:e2gmax:\\t%6.3lf %s\\t\\t\",\n\"GPRINT:e2gaver:\\t%6.3lf %s\\t\\t\",\n\"GPRINT:e2glast:\\t%6.3lf %s\\\\n\",\n\n\"LINE2:e3gran#0000FF:\\t3GRAN\\t\\t\\t\\t\",\n\"GPRINT:e3gmin:\\t%6.3lf %s\\t\\t\",\n\"GPRINT:e3gmax:\\t%6.3lf %s\\t\\t\",\n\"GPRINT:e3gaver:\\t%6.3lf %s\\t\\t\",\n\"GPRINT:e3glast:\\t%6.3lf %s\\\\n\",\n\n\"LINE2:e4gran#FF8000:\\t4GRAN\\t\\t\\t\\t\",\n\"GPRINT:e4gmin:\\t%6.3lf %s\\t\\t\",\n\"GPRINT:e4gmax:\\t%6.3lf %s\\t\\t\",\n\"GPRINT:e4gaver:\\t%6.3lf %s\\t\\t\",\n\"GPRINT:e4glast:\\t%6.3lf %s\\\\n\",\n\n\"LINE2:e2gtran#FFFF00:\\t2GTRAN\\t\\t\\t\",\n\"GPRINT:e2gtmin:\\t%6.3lf %s\\t\\t\",\n\"GPRINT:e2gtmax:\\t%6.3lf %s\\t\\t\",\n\"GPRINT:e2gtaver:\\t%6.3lf %s\\t\\t\",\n\"GPRINT:e2gtlast:\\t%6.3lf %s\\\\n\",\n\n\"LINE2:allregmax#FF0000:\\tALL_REGIONS\\t\\t\",\n\"GPRINT:allmin:%6.3lf%s\\t\\t\",\n\"GPRINT:allmax:%6.3lf%s\\t\\t\",\n\"GPRINT:allaver:%6.3lf%s\\t\\t\",\n\"GPRINT:alllast:%6.3lf%s\\\\n\",\n\n\"LINE3:wrongdata#000000:\\\\tINCOMPLETE DATA\\\\n\",\n</code></pre>\n\n<p>The font used for the legend is Arial. The output looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/DmG4s.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DmG4s.png\" alt=\"Legend with fields not aligned in columns\"></a></p>\n\n<p>While I'm aiming for something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/zCY9l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zCY9l.png\" alt=\"Legend with fields nicely aligned in columns\"></a></p>\n\n<p>I have tried <code>TEXTALIGN</code>, fiddling with spaces and tabs, and checked the RRDtool docs and different tutorials, but I just can't figure this out.</p>\n"}, {"tags": ["perl", "tie"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487925707, "post_id": 42434132, "comment_id": 72012698, "body": "You might want to put these all in an associative array and tie that instead so that it&#39;s clear in your code where the magic lies."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1487925740, "post_id": 42434132, "comment_id": 72012712, "body": "Variables are &quot;<i>created</i>&quot; in BEGIN phase. So I don&#39;t see how to track that via these methods ... ?"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1487926799, "post_id": 42434132, "comment_id": 72013327, "body": "@zdim: I thought I may use: <code>BEGIN { *CORE::GLOBAL::my =  sub{ apply_magic_to_new_variable( shift ) } }</code> However <code>my</code> maybe called as bareword only. It will be very handy if called with the reference to new variable when this hook supplied"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1487927133, "post_id": 42434132, "comment_id": 72013509, "body": "@tadman: I want to create module for <a href=\"https://metacpan.org/pod/Devel::DebugHooks\" rel=\"nofollow noreferrer\"><code>debugger</code></a> which will show all variables which are created in one scope, but accessed/destroyed from others. So I draw dataflow with Graphviz for thirdparty modules. Just running: <code>perl -d:DebugHooks::DataFlow script.pl</code>"}], "answers": [{"tags": [], "owner": {"reputation": 985, "user_id": 1437501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee2d65100a83f4e213217cd04546f312?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1437501/matthias"}, "is_accepted": false, "score": 2, "last_activity_date": 1500380423, "creation_date": 1500380423, "answer_id": 45166647, "question_id": 42434132, "link": "https://stackoverflow.com/questions/42434132/how-to-tie-every-variable-in-perl-script/45166647#45166647", "title": "How to tie every variable in perl script?", "body": "<p>You can take a look at B::Xref which generates a cross reference listing of all variables in your application. Basically, you need to walk the byte code to find all variable declarations/initializations. You can also alter the byte code, i.e. add code to tie the variables. However, I cannot point you to an example, because this is rarely done.</p>\n\n<p>As an alternative, you could use a code filter to add the tie() instructions. However, code filters are not guaranteed to correctly identify variable declarations/initializations.</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1500380423, "creation_date": 1487925565, "question_id": 42434132, "link": "https://stackoverflow.com/questions/42434132/how-to-tie-every-variable-in-perl-script", "title": "How to tie every variable in perl script?", "body": "<p>I want to see every place when variable in perl script is created/accessed/destroyed</p>\n\n<p>It is easily reachable using <code>tie</code> or <a href=\"https://metacpan.org/pod/Variable::Magic\" rel=\"noreferrer\"><code>Variable::Magic</code></a></p>\n\n<p>But how to apply this magic automatically when variable is created?</p>\n"}, {"tags": ["perl", "endpoint", "chaining", "catalyst"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1487928547, "post_id": 42433554, "comment_id": 72014391, "body": "Where is <code>&#47;regulatory&#47;species&#47;*&#47;id&#47;*</code> defined?"}], "answers": [{"tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 3, "last_activity_date": 1488012131, "last_edit_date": 1488012131, "creation_date": 1487929239, "answer_id": 42435262, "question_id": 42433554, "link": "https://stackoverflow.com/questions/42433554/perl-catalyst-controller-chains/42435262#42435262", "title": "Perl Catalyst Controller chains", "body": "<p>Yes, it's possible, your problem is just that you don't have an <em>endpoint</em> for microarray_single. You probably want</p>\n\n<pre><code>sub microarray_list :Chained('species') PathPart('microarray')\n                     ActionClass('REST') { }\n\n# this is the chain midpoint, it can load the microarray for the endpoints to use\nsub microarray :Chained('species') PathPart('microarray')\n                CaptureArgs(1) { }\n\n# this is an endpoint with the same path as the midpoint it chains off of\nsub microarray_single :Chained('microarray') PathPart('')\n                       Args(0) ActionClass('REST') { }\n\n# and this is an endpoint that adds .../probe/*\nsub microarray_probe :Chained('microarray') PathPart('probe')\n                      Args(1) ActionClass('REST') { }\n</code></pre>\n\n<p>if there are other things that can come after <code>.../microarray/*/probe/*</code> then you would do likewise, changing <code>microarray_probe</code> from <code>Args(1) ActionClass('REST')</code> (endpoint) to <code>CaptureArgs(1)</code>, and then adding an endpoint with <code>:Chained('microarray_probe') PathPart('') Args(0) ActionClass('REST')</code> to handle the case where there are no additional path parts.</p>\n\n<p>The important thing to keep in mind is that only chain <em>endpoints</em> (i.e. actions without <code>CaptureArgs</code>) correspond to valid URL paths.</p>\n"}], "owner": {"reputation": 191, "user_id": 1520203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/85edc8f7b2e989c91e1be8cdd7fd5bfb?s=128&d=identicon&r=PG", "display_name": "juettemann", "link": "https://stackoverflow.com/users/1520203/juettemann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 42435262, "answer_count": 1, "score": 3, "last_activity_date": 1488012131, "creation_date": 1487923531, "last_edit_date": 1487928511, "question_id": 42433554, "link": "https://stackoverflow.com/questions/42433554/perl-catalyst-controller-chains", "title": "Perl Catalyst Controller chains", "body": "<p>I am having trouble creating a 'flexible' endpoints. Is something along these lines possible:</p>\n\n<pre><code># 1) List all Microarrays for this species\n/regulatory/species/:species/microarray\nsub microarray_list: Chained('species') PathPart('microarray') ActionClass('REST') { }\n\n# 2) Information about a specific array\n/regulatory/species/:species/microarray/:microarray\nsub microarray_single: Chained('species') PathPart('microarray') CaptureArgs(1) ActionClass('REST') { }\n\n# 3) Information about a probe on the array\n/regulatory/species/:species/microarray/:microarray/probe/:probe\nsub microarray_probe: Chained('microarray_single') PathPart('probe') Args(1) ActionClass('REST')\n</code></pre>\n\n<p>At startup 1) is not registered:</p>\n\n<pre><code>| /regulatory/species/*/id/*          | /regulatory/species (1)              |\n|                                     | =&gt; /regulatory/id (1)                |\n| /regulatory/species/*/microarray    | /regulatory/species (1)              |\n|                                     | =&gt; /regulatory/microarray_list (...) |\n| /regulatory/species/*/microarray/*- | /regulatory/species (1)              |\n| /probe/*                            | \n</code></pre>\n\n<p>Any help should be greatly appreciated!</p>\n"}, {"tags": ["regex", "perl", "match"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 6831640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de100ceb0c44396a957282310aaccbce?s=128&d=identicon&r=PG&f=1", "display_name": "Chemistry for Computers", "link": "https://stackoverflow.com/users/6831640/chemistry-for-computers"}, "edited": false, "score": 0, "creation_date": 1487909687, "post_id": 42430621, "comment_id": 72006436, "body": "Although it would be better if I could avoid using $x = &#39;1.0&#39;"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 77, "user_id": 6831640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de100ceb0c44396a957282310aaccbce?s=128&d=identicon&r=PG&f=1", "display_name": "Chemistry for Computers", "link": "https://stackoverflow.com/users/6831640/chemistry-for-computers"}, "edited": false, "score": 1, "creation_date": 1487913789, "post_id": 42430621, "comment_id": 72007661, "body": "@ChemistryandComputers Better in what way? This is starting to sound like an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 77, "user_id": 6831640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de100ceb0c44396a957282310aaccbce?s=128&d=identicon&r=PG&f=1", "display_name": "Chemistry for Computers", "link": "https://stackoverflow.com/users/6831640/chemistry-for-computers"}, "edited": false, "score": 0, "creation_date": 1487925592, "post_id": 42430621, "comment_id": 72012631, "body": "@ChemistryandComputers: You need to explain why you would prefer to avoid the quotes. There are probably many ways around this, but we can&#39;t really help you without understanding your situation. Perhaps you should answer a new question about it."}], "tags": [], "owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "is_accepted": false, "score": 0, "last_activity_date": 1487911425, "last_edit_date": 1487911425, "creation_date": 1487909434, "answer_id": 42430621, "question_id": 42430566, "link": "https://stackoverflow.com/questions/42430566/using-match-with-letters-and-a-variable/42430621#42430621", "title": "Using match with letters and a variable", "body": "<p>probably this bit:</p>\n\n<p><code>my $x = 1.0;</code></p>\n\n<p>should be</p>\n\n<p><code>my $x = '1.0';</code></p>\n\n<p>this happens because perl saves <code>1.0</code> as <code>1</code></p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1487925343, "post_id": 42431314, "comment_id": 72012499, "body": "It would be nice if you would explain your <code>use 5.010</code>"}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 2, "last_activity_date": 1487916393, "last_edit_date": 1495541811, "creation_date": 1487913575, "answer_id": 42431314, "question_id": 42430566, "link": "https://stackoverflow.com/questions/42430566/using-match-with-letters-and-a-variable/42431314#42431314", "title": "Using match with letters and a variable", "body": "<p>You have two issues:</p>\n\n<ol>\n<li>You need to quote the string literal <code>1.0</code> as Nullman <a href=\"https://stackoverflow.com/a/42430621/82262\">pointed out</a></li>\n<li>You need to properly <a href=\"http://perldoc.perl.org/perlre.html#Quoting-metacharacters\" rel=\"nofollow noreferrer\">quote any metacharacters</a> contained inside <code>$x</code>. For example, do you want <code>info.ph1x0.dat_0</code> or <code>info.ph1*0.dat_0</code> to also match? Well, they will, because the unescaped dot in <code>1.0</code> matches any character.</li>\n</ol>\n\n<p>Revised code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nmy $x = '1.0';\n\nwhile (&lt;DATA&gt;) {\n    if (/ph\\Q$x/) {\n        say;\n    }\n}\n\n__DATA__\ninfo.ph1.0.dat_0\ninfo.ph1.5.dat_1\ninfo.ph2.0.dat_2\ninfo.ph1x0.dat_0\ninfo.ph1*0.dat_0\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>info.ph1.0.dat_0\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 6831640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de100ceb0c44396a957282310aaccbce?s=128&d=identicon&r=PG&f=1", "display_name": "Chemistry for Computers", "link": "https://stackoverflow.com/users/6831640/chemistry-for-computers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487925255, "creation_date": 1487909046, "last_edit_date": 1487925255, "question_id": 42430566, "link": "https://stackoverflow.com/questions/42430566/using-match-with-letters-and-a-variable", "title": "Using match with letters and a variable", "body": "<p>I provide some variables and try using them for matching with the input, but I have problems matching how I want to match.  </p>\n\n<pre><code>my $x = 1.0;\n\nforeach ( @data ) { # see sample data below\n\n    my $input = $_; # I know, I know...\n\n    if ( $input =~ m/ph${x}/ ) {\n        print \"$input \\n\"; \n    }\n}\n</code></pre>\n\n<h3>Input (content of @data):</h3>\n\n<pre><code>info.ph1.0.dat_0\ninfo.ph1.5.dat_1\ninfo.ph2.0.dat_2\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre><code>info.ph1.0.dat_0 \ninfo.ph1.5.dat_1 \n</code></pre>\n\n<h3>The desired output is</h3>\n\n<pre><code>info.ph1.0.dat_0\n</code></pre>\n\n<p><code>$x</code> will always be something like <code>1.0</code>, <code>1.1</code>, <code>1.2</code> etc.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 620, "user_id": 6641380, "user_type": "registered", "accept_rate": 97, "profile_image": "https://lh4.googleusercontent.com/-xpKbsD1iVLg/AAAAAAAAAAI/AAAAAAAAAGg/MAO7biFVz9I/photo.jpg?sz=128", "display_name": "Shankhadeep Mukerji", "link": "https://stackoverflow.com/users/6641380/shankhadeep-mukerji"}, "edited": false, "score": 0, "creation_date": 1487906717, "post_id": 42430018, "comment_id": 72005631, "body": "Thanks, that was helpful. Are you using substitution here? s//// Didnt get that part."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1487907915, "post_id": 42430018, "comment_id": 72005924, "body": "This <code>&#47;([a-z]+ar)&#47;</code>  will not capture <code>parked</code>, nor will it match words that <i>start</i> with <code>ar</code> (it requires a letter before <code>ar</code>)."}], "tags": [], "owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "is_accepted": false, "score": 2, "last_activity_date": 1487908132, "last_edit_date": 1487908132, "creation_date": 1487905362, "answer_id": 42430018, "question_id": 42429970, "link": "https://stackoverflow.com/questions/42429970/print-the-matched-word-in-perl-regex/42430018#42430018", "title": "print the matched word in perl regex", "body": "<p>For multiple matches, use a <code>while</code> loop.  Also, I surrounded the quantity you want to capture with parentheses to indicate that it is a <em>capture</em> group.</p>\n\n<pre><code>while ($line =~ /([a-z]*ar[a-z]*)/gi ) {\n    print \"$1 \\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 620, "user_id": 6641380, "user_type": "registered", "accept_rate": 97, "profile_image": "https://lh4.googleusercontent.com/-xpKbsD1iVLg/AAAAAAAAAAI/AAAAAAAAAGg/MAO7biFVz9I/photo.jpg?sz=128", "display_name": "Shankhadeep Mukerji", "link": "https://stackoverflow.com/users/6641380/shankhadeep-mukerji"}, "edited": false, "score": 0, "creation_date": 1487905887, "post_id": 42430037, "comment_id": 72005425, "body": "Can you please kindly explain a bit more, How are these two different in working?  if ($line =~ /([a-z]ar)i/) { print &quot;$1\\n&quot; }           if($line =~ /[a-z]ar/gi) {       print &quot;$1 \\n&quot;;   }"}, {"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1487905936, "post_id": 42430037, "comment_id": 72005435, "body": "One is a global match (<code>g</code>), the other is not."}, {"owner": {"reputation": 620, "user_id": 6641380, "user_type": "registered", "accept_rate": 97, "profile_image": "https://lh4.googleusercontent.com/-xpKbsD1iVLg/AAAAAAAAAAI/AAAAAAAAAGg/MAO7biFVz9I/photo.jpg?sz=128", "display_name": "Shankhadeep Mukerji", "link": "https://stackoverflow.com/users/6641380/shankhadeep-mukerji"}, "edited": false, "score": 0, "creation_date": 1487905994, "post_id": 42430037, "comment_id": 72005445, "body": "No, I mean the capturing part How are you doing it?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 620, "user_id": 6641380, "user_type": "registered", "accept_rate": 97, "profile_image": "https://lh4.googleusercontent.com/-xpKbsD1iVLg/AAAAAAAAAAI/AAAAAAAAAGg/MAO7biFVz9I/photo.jpg?sz=128", "display_name": "Shankhadeep Mukerji", "link": "https://stackoverflow.com/users/6641380/shankhadeep-mukerji"}, "edited": false, "score": 0, "creation_date": 1487906020, "post_id": 42430037, "comment_id": 72005451, "body": "@ShankhadeepMukerji  Yes ... I thought I did in the answer.  With <code>&#47;[a-z]ar&#47;</code> you match, so the <code>if</code> returns true.  But the match isn&#39;t <i>captured</i>, so there is nothing in <code>$1</code>.  The <code>$n</code> variables get filled with things that are <i>captured</i> (by parenthesis).  Is this what you are asking?"}, {"owner": {"reputation": 620, "user_id": 6641380, "user_type": "registered", "accept_rate": 97, "profile_image": "https://lh4.googleusercontent.com/-xpKbsD1iVLg/AAAAAAAAAAI/AAAAAAAAAGg/MAO7biFVz9I/photo.jpg?sz=128", "display_name": "Shankhadeep Mukerji", "link": "https://stackoverflow.com/users/6641380/shankhadeep-mukerji"}, "edited": false, "score": 0, "creation_date": 1487906122, "post_id": 42430037, "comment_id": 72005479, "body": "Yes, I did not know about parenthesis doing the capture. Thanks."}, {"owner": {"reputation": 620, "user_id": 6641380, "user_type": "registered", "accept_rate": 97, "profile_image": "https://lh4.googleusercontent.com/-xpKbsD1iVLg/AAAAAAAAAAI/AAAAAAAAAGg/MAO7biFVz9I/photo.jpg?sz=128", "display_name": "Shankhadeep Mukerji", "link": "https://stackoverflow.com/users/6641380/shankhadeep-mukerji"}, "edited": false, "score": 0, "creation_date": 1487906388, "post_id": 42430037, "comment_id": 72005542, "body": "So, how to capture parked and near?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 620, "user_id": 6641380, "user_type": "registered", "accept_rate": 97, "profile_image": "https://lh4.googleusercontent.com/-xpKbsD1iVLg/AAAAAAAAAAI/AAAAAAAAAGg/MAO7biFVz9I/photo.jpg?sz=128", "display_name": "Shankhadeep Mukerji", "link": "https://stackoverflow.com/users/6641380/shankhadeep-mukerji"}, "edited": false, "score": 0, "creation_date": 1487906454, "post_id": 42430037, "comment_id": 72005565, "body": "@ShankhadeepMukerji  The second example gets all of them and puts them in <code>@words</code>.  Is that OK?  I am adding a capture-as-you-go way as well ..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 620, "user_id": 6641380, "user_type": "registered", "accept_rate": 97, "profile_image": "https://lh4.googleusercontent.com/-xpKbsD1iVLg/AAAAAAAAAAI/AAAAAAAAAGg/MAO7biFVz9I/photo.jpg?sz=128", "display_name": "Shankhadeep Mukerji", "link": "https://stackoverflow.com/users/6641380/shankhadeep-mukerji"}, "edited": false, "score": 1, "creation_date": 1487907126, "post_id": 42430037, "comment_id": 72005729, "body": "@ShankhadeepMukerji I&#39;ve added a more complete description/commentary. Will edit more as I review."}, {"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 1, "creation_date": 1487907170, "post_id": 42430037, "comment_id": 72005740, "body": "This is <i>massive</i> overkill for such a simple question."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 2, "creation_date": 1487907725, "post_id": 42430037, "comment_id": 72005876, "body": "@TimBiegeleisen Well, perhaps.  I keep failing to provide <i>minimal</i> answers.  I mean, they ask about how to capture globally.   It is probably the most used feature of regex, and it is complex. I feel like I&#39;d leave them shorthanded, almost cheated, if i just gave the direct answer in one line of code."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1487961704, "post_id": 42430037, "comment_id": 72035624, "body": "@TimBiegeleisen  Thank you for the response (and for the vote)! Of course, you raised a perfectly good point, of getting the best-fitting extent of the answer, and keeping it as concise as feasible.  I just don&#39;t yet know how to get that measure right."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 4, "last_activity_date": 1574667011, "last_edit_date": 1574667011, "creation_date": 1487905487, "answer_id": 42430037, "question_id": 42429970, "link": "https://stackoverflow.com/questions/42429970/print-the-matched-word-in-perl-regex/42430037#42430037", "title": "print the matched word in perl regex", "body": "<p>First, you didn't <em>capture</em> anything, which is how <code>$n</code> variables are populated. Put parenthesis around what you want to be captured into <code>$1</code></p>\n\n<pre><code>if ($line =~ /([a-z]ar)i/) { print \"$1\\n\" }\n</code></pre>\n\n<p>I've removed the <code>/g</code> which is unneeded (and with potential for trouble<sup>&dagger;</sup>) here.</p>\n\n<p>Next, your pattern requires and captures one letter followed by literal <code>ar</code>, no more no less. That won't capture <code>near</code>, nor will it capture <code>parked</code> (it'll get <code>par</code> only).  It will not even match a word that <em>starts</em> with <code>ar</code>, since it requires that there is a letter before <code>ar</code>. You need to use <a href=\"http://perldoc.perl.org/perlretut.html#Matching-repetitions\" rel=\"nofollow noreferrer\">quantifiers</a>, to tell it how many times to match a letter. And you also want to find all matches.</p>\n\n<p>One way is to scoop them all up by providing the <em>list <a href=\"http://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">context</em></a> and <code>/g</code> (<em>global</em>) <a href=\"https://perldoc.perl.org/perlre.html#Modifiers\" rel=\"nofollow noreferrer\">modifier</a></p>\n\n<pre><code>my @words = $line =~ /([a-z]*ar[a-z]*)/gi;\n\nprint \"$_\\n\" for @words;\n</code></pre>\n\n<p>The <code>[a-z]*</code> means to match a letter, zero-or-more times. So an optional string of letters. We also added an optional string of letters after <code>ar</code>. The <code>/g</code> makes it continue through the string after a match, to find all such patterns. In the list context the list of matches is returned.</p>\n\n<p>Or, you can match in <em>scalar context</em> like in the first example, but in a <code>while</code> loop</p>\n\n<pre><code>while ($line =~ /([a-z]*ar[a-z]*)/gi) { print \"$1\\n\" }\n</code></pre>\n\n<p>Here <code>/g</code> does something different. It matches a pattern once and returns true, the <code>while</code> condition is true and we print. Then it comes back and looks for a match <em>from where it matched previously</em> ... and keeps doing this until there are no more matches. </p>\n\n<p>This is complex behavior altogether. From <a href=\"http://perldoc.perl.org/5.8.9/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">Regexp Quote-Like Operators in perlop</a></p>\n\n<blockquote>\n  <p>The <code>/g</code> modifier specifies global pattern matching--that is, matching as many times as possible within the string. How it behaves depends on the context. In list context, it returns a list of the substrings matched by any capturing parentheses in the regular expression. If there are no parentheses, it returns a list of all the matched strings, as if there were parentheses around the whole pattern.  </p>\n  \n  <p>In scalar context, each execution of <code>m//g</code> finds the next match, returning true if it matches, and false if there is no further match. &nbsp; [...]</p>\n</blockquote>\n\n<p>Read about this in more detail and in a tutorial manner <a href=\"http://perldoc.perl.org/5.8.9/perlretut.html#Using-regular-expressions-in-Perl\" rel=\"nofollow noreferrer\">in perlretut</a>, under \"<em>Global matching</em>.\"</p>\n\n<hr>\n\n<p><sup>&dagger;</sup> <em>Note on using <code>/g</code> modifier in scalar context</em>  </p>\n\n<p>I've used that above, in <code>while (/.../g)</code>, what is a very common way to hop over all occurrences of the pattern in a string, each time giving us control in the <code>while</code> body.</p>\n\n<p>While this use is intended and idiomatic, the use of <code>/g</code> in scalar context can bring subtle trouble when not in the loop condition: the next regex with <code>/g</code> on this variable  will continue from the previous match, not from the string's beginning, what may be unexpected.  </p>\n\n<p>That \"next regex\" may also simply be that same expression -- in the next pass of some larger loop in which our expression happens to be, and this holds across function calls as well. Consider </p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $s = q(one two three);\n\nsub func { say $1 if $_[0] =~ /(\\w+)/g };  # /g may be of great consequence!\n\nfor (1..4) {\n    # ... perhaps much, much later ...\n    func($s);\n}\n</code></pre>\n\n<p>This loop prints lines <code>one</code>, then <code>two</code>, then <code>three</code>, and that's that.  This (working) example is so bare bones that it is artificial bit I hope that it conveys that <code>/g</code> in scalar context may surprise.</p>\n\n<p>For one thing, it is not uncommon to see <code>/g</code> on a regex in an <code>if</code> condition being plain wrong.</p>\n"}], "owner": {"reputation": 620, "user_id": 6641380, "user_type": "registered", "accept_rate": 97, "profile_image": "https://lh4.googleusercontent.com/-xpKbsD1iVLg/AAAAAAAAAAI/AAAAAAAAAGg/MAO7biFVz9I/photo.jpg?sz=128", "display_name": "Shankhadeep Mukerji", "link": "https://stackoverflow.com/users/6641380/shankhadeep-mukerji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4899, "favorite_count": 0, "accepted_answer_id": 42430037, "answer_count": 2, "score": 0, "last_activity_date": 1574667011, "creation_date": 1487905013, "last_edit_date": 1495542306, "question_id": 42429970, "link": "https://stackoverflow.com/questions/42429970/print-the-matched-word-in-perl-regex", "title": "print the matched word in perl regex", "body": "<p>I need to print all my matched strings from a stored line in perl. I have seen various posts on this \n<a href=\"https://stackoverflow.com/questions/32404125/print-the-matched-string-using-perl\">Print the matched string using perl</a>\n<a href=\"https://stackoverflow.com/questions/5617314/perl-regex-print-the-matched-value\">Perl Regex - Print the matched value</a></p>\n\n<p>and I experimented to first try to print the first word. But I get a build error</p>\n\n<pre><code>Use of uninitialized value $1 in concatenation (.) or string at rg.pl line 10.\n</code></pre>\n\n<p>I have tried with split and arrays and it works, but while printing $1, it throws error.</p>\n\n<p>My code is here</p>\n\n<pre><code>#!/usr/bin/perl/\nuse warnings;\nuse strict;\n\n\n#my $line = \"At a far distance near the bar, was a parked car. Star were shining in the night. The boy in the car had scar and he was at war with his enemy. \\n\";\n\nmy $line = \"At a far distance near the bar, was a parked car. \\n\";\nif($line =~ /[a-z]ar/gi)\n{       print \"$1 \\n\";   }\n\n$_ = $line;\n</code></pre>\n\n<p>I want my output for this code to be </p>\n\n<pre><code>far\n</code></pre>\n\n<p>and subsequently print all the words containing ar,</p>\n\n<pre><code>far\nnear\nbar\nparked \ncar\n</code></pre>\n\n<p>I even tried changing my code, as below but that didnt work, same error</p>\n\n<pre><code>if($line =~ /[a-z]ar/gi)  {\n        my $match = $1;\n        print \"$match \\n\"; }\n</code></pre>\n"}, {"tags": ["perl", "popen3"], "answers": [{"comments": [{"owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "edited": false, "score": 0, "creation_date": 1487896865, "post_id": 42428483, "comment_id": 72003121, "body": "The fooling is fine, but I still cannot get it to read the file twice."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "edited": false, "score": 2, "creation_date": 1487899119, "post_id": 42428483, "comment_id": 72003692, "body": "Like I already explained, what you are trying to do is timing dependent, meaning it will only happen if the timing is just right. This was the case with your original program too. You&#39;re really shouldn&#39;t be doing what you are trying to do! To avoid the randomness, I replaced <code>fork();</code> with <code>my $pid = fork(); waitpid($pid, 0) if $fork;</code> when testing. That ensured that one process (the parent) only called <code>seek</code> after the other (the child) had finished reading, and thus ensured the double-printing."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1487899276, "last_edit_date": 1487899276, "creation_date": 1487894526, "answer_id": 42428483, "question_id": 42428182, "link": "https://stackoverflow.com/questions/42428182/perl-let-open3-inherit-stdin-stdout-stderr/42428483#42428483", "title": "Perl: let open3 inherit STDIN, STDOUT, STDERR", "body": "<p>First of all, the proper notation to inherit the handles is:</p>\n\n<pre><code>open3(\"&lt;&amp;STDIN\", \"&gt;&amp;STDOUT\", \"&gt;&amp;STDERR\", \"cat\")\n</code></pre>\n\n<hr>\n\n<p>But printing 1..10 twice? You shouldn't rely on that happening! It will only happen if the timing is just right. In fact, it very rarely happens for me, even for your original program. The problems stem from the fact that both the parent and the child processes share the same file pointer.</p>\n\n<p>Maybe to avoid having people rely on this extremely unreliable behaviour, <code>open3</code> closes the first handle when it's a dup it created. It's possible to fool it as follows:</p>\n\n<pre><code>open(local *CHILD_STDIN, \"&lt;&amp;\", \\*STDIN) or die $!;\nopen3(\"&lt;&amp;CHILD_STDIN\", \"&gt;&amp;STDOUT\", \"&gt;&amp;STDERR\", \"cat\")\n</code></pre>\n\n<p>That way, <code>open3</code> will close the dup CHILD_STDIN, but not STDIN itself. With this change, you will get the list printed twice when you're lucky.</p>\n"}], "owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1487899276, "creation_date": 1487892892, "question_id": 42428182, "link": "https://stackoverflow.com/questions/42428182/perl-let-open3-inherit-stdin-stdout-stderr", "title": "Perl: let open3 inherit STDIN, STDOUT, STDERR", "body": "<p>This print 1..10 twice:</p>\n\n<pre><code>seq 10 &gt; /tmp/ten\nperl -e 'fork();seek(STDIN,0,0); print &lt;STDIN&gt;' &lt;/tmp/ten\n</code></pre>\n\n<p>I would like to do the same using IPC::Open3, but I cannot get that to work:</p>\n\n<pre><code>perl -MIPC::Open3 -e 'fork();seek(STDIN,0,0); open3(0,1,2,\"cat\");' &lt; /tmp/ten\nperl -MIPC::Open3 -e 'fork();seek(STDIN,0,0); open3(STDIN,STDOUT,STDERR,\"cat\");' &lt; /tmp/ten\nperl -MIPC::Open3 -e 'fork();seek(STDIN,0,0); open3(*STDIN,*STDOUT,*STDERR,\"cat\");' &lt; /tmp/ten\nperl -MIPC::Open3 -e 'fork();seek(STDIN,0,0); open3(\\*STDIN,\\*STDOUT,\\*STDERR,\"cat\");' &lt; /tmp/ten\n</code></pre>\n"}, {"tags": ["ajax", "perl", "catalyst"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1487937335, "post_id": 42427730, "comment_id": 72020001, "body": "Someone voted to close with <i>more code needed</i>. I&#39;m not sure which code they meant, but maybe you can include how you call this, or a full dump of <code>$params</code>. I think for a start this has a lot of good information already, but it&#39;s not obvious to me what&#39;s wrong."}, {"owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1487949672, "post_id": 42427730, "comment_id": 72028199, "body": "Well, having to add more code actually pointed out the problem! There was an additional /s in the html name for mandatory_med_yes. Shame on me."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1487950478, "post_id": 42427730, "comment_id": 72028785, "body": "And there we have the rubber duck. :)"}], "answers": [{"tags": [], "owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "is_accepted": false, "score": 0, "last_activity_date": 1487955337, "creation_date": 1487955337, "answer_id": 42444180, "question_id": 42427730, "link": "https://stackoverflow.com/questions/42427730/dbic-ajax-why-is-my-array-undef/42444180#42444180", "title": "DBIC-AJAX: Why is my array &quot;undef&quot;?", "body": "<p>There's an extra space when defining the name for the problematic parameter... heh...</p>\n\n<p><em>cry</em></p>\n"}], "owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1488210416, "creation_date": 1487890440, "last_edit_date": 1488210416, "question_id": 42427730, "link": "https://stackoverflow.com/questions/42427730/dbic-ajax-why-is-my-array-undef", "title": "DBIC-AJAX: Why is my array &quot;undef&quot;?", "body": "<p>I'm using ajax to retrieve some values in a form. The backend uses a catalyst app. A specific field is giving me a hard time retrieving the values and I have no idea why... </p>\n\n<p>Consider 4 fields containing several values each, sent via ajax. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;input name=\"precedents_mandatory_no\" type=\"checkbox\" value=\"[% precedent.precedent_id -%]\"&gt;\r\n&lt;input name=\"precedents_mandatory_yes\" type=\"checkbox\" value=\"[% precedent.precedent_id -%]\"&gt;\r\n&lt;input name=\"mandatory_med_no\" type=\"checkbox\" value=\"[% precedent.precedent_id -%]\"&gt;\r\n&lt;input name=\"mandatory_med_yes\" type=\"checkbox\" value=\"[% precedent.precedent_id -%]\"&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>They are all sent and received properly, according to my debugs:</p>\n\n<pre><code>[debug] \"POST\" request for \"subjects/add\" from \"127.0.0.1\"\n[debug] Body Parameters are:\n.-------------------------------------+--------------------------------------.\n| Parameter                           | Value                                |\n+-------------------------------------+--------------------------------------+\n| mandatory_med_no                    | 6, 7, 23                             |\n| mandatory_med_yes                   | 8, 19                                                              |\n| precedents_mandatory_no             | 6, 7                                 |\n| precedents_mandatory_yes            | 8, 19, 23                            |\n\n'-------------------------------------+--------------------------------------'\n</code></pre>\n\n<p>Now, to capture these values, I use Catalyst::Parameters like this.</p>\n\n<pre><code>my $req = $c-&gt;request;\nmy $params = $req-&gt;parameters;\n\nmy @mandatory_precedent           = ref $params-&gt;{precedents_mandatory_yes} ? @{$params-&gt;{precedents_mandatory_yes}} : $params-&gt;{precedents_mandatory_yes};\nmy @mandatory_precedent_treatment = ref $params-&gt;{mandatory_med_yes} ? @{$params-&gt;{mandatory_med_yes}} : $params-&gt;{mandatory_med_yes};\n</code></pre>\n\n<p>To the best of my knowledge, this should allow to create an array containing all the elements in both \"mandatory_med_yes\" and \"precedents_mandatory_yes\" parameters.</p>\n\n<p>However, only <strong>@mandatory_precedent</strong> seems to be filled with the values, while <strong>@mandatory_precedent_treatment</strong> is undef. The following debug:</p>\n\n<pre><code>    print STDERR \"DEBUG predecedents: \\n\".Dumper(@mandatory_precedent);\n    print STDERR \"DEBUG treatments: \\n\".Dumper(@mandatory_precedent_treatment);\n</code></pre>\n\n<p>Produces an output like:</p>\n\n<pre><code>DEBUG params: \n$VAR1 = {\n          'mandatory_med_no' =&gt; [\n                                '6',\n                                '7',\n                                '23'\n                              ],\n          'mandatory_med_yes ' =&gt; [\n                                  '8',\n                                  '19'\n                                ],\n          'precedents_mandatory_yes' =&gt; [\n                                        '8',\n                                        '19',\n                                        '23'\n                                      ],\n          'precedents_mandatory_no' =&gt; [\n                                       '6',\n                                       '7'\n                                     ],\n        };\nDEBUG predecedents: \n$VAR1 = '8';\n$VAR2 = '19';\n$VAR3 = '23';\nDEBUG treatments: \n$VAR1 = undef;\n</code></pre>\n\n<p>So... any ideas why?</p>\n"}, {"tags": ["linux", "bash", "perl", "shell", "postgresql-9.1"], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1487921377, "post_id": 42428590, "comment_id": 72010684, "body": "Instead of Expect and a command line utility, it would be better to just use DBI."}], "tags": [], "owner": {"reputation": 1529, "user_id": 7600334, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cbdcd16db25660265573fac86e88f885?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Ginsburg", "link": "https://stackoverflow.com/users/7600334/mark-ginsburg"}, "is_accepted": false, "score": 0, "last_activity_date": 1488322439, "last_edit_date": 1488322439, "creation_date": 1487895230, "answer_id": 42428590, "question_id": 42427522, "link": "https://stackoverflow.com/questions/42427522/how-to-create-a-postgresql-case-sensitive-database-role-using-a-perl-script/42428590#42428590", "title": "How to create a postgresql case-sensitive database role using a perl script", "body": "<p>Don't bother contorting yourself trying to escape various literals.  </p>\n\n<p>Instead, enclose exactly what you want to pass to the database as follows:</p>\n\n<pre><code>qq|insert your stuff here, no escapes|\n</code></pre>\n\n<p>Also, when doing a </p>\n\n<pre><code>=~ s\n</code></pre>\n\n<p>operation, choose some other delimiter to start and end the expression besides / and it will look much cleaner since you are dealing with slashes and backslashes inside the expression. </p>\n\n<p>Another important detail:  don't use a system call to try to pass in a password.  Instead use the Perl DBI module.  </p>\n"}], "owner": {"reputation": 3, "user_id": 6388369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed444a4a7cbc2bedd3d4fec3b221589d?s=128&d=identicon&r=PG&f=1", "display_name": "Jan-Erik", "link": "https://stackoverflow.com/users/6388369/jan-erik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488322439, "creation_date": 1487889464, "question_id": 42427522, "link": "https://stackoverflow.com/questions/42427522/how-to-create-a-postgresql-case-sensitive-database-role-using-a-perl-script", "title": "How to create a postgresql case-sensitive database role using a perl script", "body": "<p>In a linux environment, I'm attempting to use a perl script (createRole.pl) to create a new role in the postgresql database.  There is an existing role (Role1) which is there as a result of the initdb command.</p>\n\n<p>Now I want to create a new role without using a db migration and using the psql command because I want both the role name and password set.</p>\n\n<p>From a bash shell (terminal), it is possible to create the new role (with the proper upper case) using the psql command like this (this method prompts for the Role1 password):</p>\n\n<pre><code>[root@MYPC bin]# ./psql -p 1234 dbname -U Role1 -e -c \"CREATE ROLE \\\"Role2\\\" WITH SUPERUSER LOGIN PASSWORD 'password';\"\nPassword for user Role1: \nCREATE ROLE \"Role2\" WITH SUPERUSER LOGIN PASSWORD 'password';\nCREATE ROLE\n</code></pre>\n\n<p>But it does not work via a perl script like this:</p>\n\n<pre><code>use strict:\n\nmy $dbCreateRole = '$newDBdir/bin/psql -A -p 1234 dbname -U Role1 -q -c \"CREATE ROLE \\\"Role2\\\" WITH SUPERUSER CREATEDB CREATEROLE REPLICATION LOGIN PASSWORD \\'password\\';\"';\nif ($whoami eq 'root') {\n    $dbCreateRole =~ s/\\\"/\\\\\\\"/g;\n    $dbCreateRole = \"su $appropriateUser -c \\\"$dbCreateRole\\\"\";\n}\nsystem(\"export PGPASSWORD=password 2&gt; /dev/null\");\nsystem(\"$dbCreateRole 2&gt; /dev/null\") == 0 || die(\"Unable to create Role2 database role.\\n\");\n</code></pre>\n\n<p>I have tried various combinations of outer double quotes and escaped inner single quotes and double quotes to no avail.</p>\n\n<p>Any suggestions will be appreciated.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1487887820, "post_id": 42427058, "comment_id": 71999811, "body": "What is your expected output?"}, {"owner": {"reputation": 397, "user_id": 946874, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/XoQpx.jpg?s=128&g=1", "display_name": "Andr&#233; Pontes", "link": "https://stackoverflow.com/users/946874/andr%c3%a9-pontes"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1487887933, "post_id": 42427058, "comment_id": 71999862, "body": "My expected output would be <code>[[[[], 3], 1]]</code>"}, {"owner": {"reputation": 397, "user_id": 946874, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/XoQpx.jpg?s=128&g=1", "display_name": "Andr&#233; Pontes", "link": "https://stackoverflow.com/users/946874/andr%c3%a9-pontes"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1487888320, "post_id": 42427058, "comment_id": 72000032, "body": "The expected output for <code>list_str(remove_fives($list))</code> would be &#39;1;3&#39;"}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1487888347, "post_id": 42427058, "comment_id": 72000046, "body": "Why are you trying to implement a &quot;linked list&quot; in Perl? Linked lists are generally considered a low-level data structure; they aren&#39;t appropriate in a language which already has higher-level data structures as primitive types."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1487888454, "post_id": 42427058, "comment_id": 72000103, "body": "@duskwuff, Poppycock. It&#39;s not primitive. Simple, maybe, not primitive. It&#39;s just rarely needed. LL have the unusual property that deleting an item is O(1) (having previously found the item). In contrast, this would be O(N) for an array."}, {"owner": {"reputation": 1127, "user_id": 532744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c25e9e50c654c5091c6aa63214ebee?s=128&d=identicon&r=PG", "display_name": "Chris Rasys", "link": "https://stackoverflow.com/users/532744/chris-rasys"}, "edited": false, "score": 0, "creation_date": 1487888654, "post_id": 42427058, "comment_id": 72000209, "body": "You know, because hashes totally aren&#39;t a thing"}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1487888930, "post_id": 42427058, "comment_id": 72000335, "body": "@ikegami The &quot;primitives&quot; I&#39;m referring to are Perl&#39;s arrays and hashes - not in the sense that they are crude, but that they are basic language types. My point is that using an array to build a worse array is a bit circular. :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1487891255, "post_id": 42427058, "comment_id": 72001252, "body": "@duskwuff, Tired. Pretend I said low-level instead of primitive."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1127, "user_id": 532744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c25e9e50c654c5091c6aa63214ebee?s=128&d=identicon&r=PG", "display_name": "Chris Rasys", "link": "https://stackoverflow.com/users/532744/chris-rasys"}, "edited": false, "score": 0, "creation_date": 1487891305, "post_id": 42427058, "comment_id": 72001277, "body": "@Chris Rasys, But hashes can&#39;t maintain an order like a LL can, so you can&#39;t necessarily replace a LL with a hash either."}, {"owner": {"reputation": 397, "user_id": 946874, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/XoQpx.jpg?s=128&g=1", "display_name": "Andr&#233; Pontes", "link": "https://stackoverflow.com/users/946874/andr%c3%a9-pontes"}, "edited": false, "score": 0, "creation_date": 1487891584, "post_id": 42427058, "comment_id": 72001377, "body": "The array can double the size with just a single push operation. This can be harmful in same cases. In contrast, a LL will always perform a push in  O(1)."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1487891608, "last_edit_date": 1495542306, "creation_date": 1487888357, "answer_id": 42427288, "question_id": 42427058, "link": "https://stackoverflow.com/questions/42427058/how-to-delete-an-item-from-a-linked-list-in-perl/42427288#42427288", "title": "How to delete an item from a Linked List in Perl?", "body": "<p><code>$last</code> points to the current node, and <code>$node</code> points to the next node.</p>\n\n<p><code>$last</code> should point to the previous node, and <code>$node</code> should point to the current node.</p>\n\n<p>Conveniently, the list itself has the same format as a node, so we don't need <a href=\"https://stackoverflow.com/a/42213449/589924\">trickery</a>.</p>\n\n<pre><code>use Data::Dumper qw( Dumper );\n\nsub remove_fives {\n    my $list = shift;\n    my $last = $list;\n    while (1) {\n        my $node = $last-&gt;[0];\n        last if !$node;\n\n        if ($node-&gt;[1] == 5) {\n           $last-&gt;[0] = $node-&gt;[0];\n        } else {\n           $last = $node;\n        }\n    }\n}\n\nmy $list = [[[[undef, 3], 5], 1]];\nremove_fives($list);\n\nlocal $Data::Dumper::Indent = 0;\nlocal $Data::Dumper::Terse  = 1;\nprint(Dumper($list), \"\\n\");   # [[[undef,3],1]]\n</code></pre>\n\n<hr>\n\n<p>If the list didn't have the same format as a node, this is what the code would look like:</p>\n\n<pre><code>sub delete_node {\n   my $node_ptr_ptr = shift;\n   $$node_ptr_ptr = $$node_ptr_ptr-&gt;next;\n}\n\nsub remove_fives {\n    my $list = shift;\n    my $node_ptr_ptr = \\( $list-&gt;{head} );\n    while ($$node_ptr_ptr) {\n        if ($$node_ptr_ptr-&gt;{val} == 5) {\n           delete_node($$node_ptr_ptr);\n        } else {\n           $node_ptr_ptr = \\( $$node_ptr_ptr-&gt;{next} );\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 397, "user_id": 946874, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/XoQpx.jpg?s=128&g=1", "display_name": "Andr&#233; Pontes", "link": "https://stackoverflow.com/users/946874/andr%c3%a9-pontes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 42427288, "answer_count": 1, "score": 0, "last_activity_date": 1487891608, "creation_date": 1487887411, "last_edit_date": 1487888168, "question_id": 42427058, "link": "https://stackoverflow.com/questions/42427058/how-to-delete-an-item-from-a-linked-list-in-perl", "title": "How to delete an item from a Linked List in Perl?", "body": "<p>I must be missing something in my implementation of remove item from a linked list in Perl.</p>\n\n<p>The code below would remove all the nodes with value = 5.</p>\n\n<p>But when I call <code>remove_fives([[[[[], 3], 5], 1]])</code>, it is deleting the last element, 3, instead of 5. </p>\n\n<p>Any Help ? </p>\n\n<pre><code>sub remove_fives {\n my $list = shift;\n my $node = $list-&gt;[0];\n while ( $node-&gt;[0] ) {\n    my $last = $node;\n    ( $node, my $value ) = @$node;\n\n    if ($value == 5) {\n      $last-&gt;[0] = $node-&gt;[0];\n    }\n }\n\n return $list;\n}\n</code></pre>\n\n<p>This is my following code that I used to test:</p>\n\n<pre><code>sub list_str {\n my $list   = shift;\n my $result = '';\n my $node   = $list-&gt;[0];\n my $first  = 1;\n while ( $node-&gt;[0] ) {\n    ( $node, my $value ) = @$node;\n\n    if ( !$first ) {\n        $result .= ';';\n    }\n\n    $result .= $value;\n    $first = 0;\n }\n\n return $result;\n}\n\nmy $list = [[[[[], 3], 5], 1]];\nprint \"\\n Original linked list: \" . list_str($list);       # 1;5;3\nprint \"\\n After remove: \" . list_str(remove_fives($list)); # 1;5\n</code></pre>\n"}, {"tags": ["perl", "ubuntu", "cpanm"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1487885947, "post_id": 42426564, "comment_id": 71998828, "body": "When that happens to me, I just tell cpanm to install the missing dependencies directly one by one, then afterwards do the main one again. I don&#39;t know why it happens though."}, {"owner": {"reputation": 11, "user_id": 7613576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4482fdb1cf68b8a5c300e23b233697?s=128&d=identicon&r=PG&f=1", "display_name": "Bennett Wineholt", "link": "https://stackoverflow.com/users/7613576/bennett-wineholt"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1487887054, "post_id": 42426564, "comment_id": 71999399, "body": "When I tried that myself I hit dependencies of those dependencies failing to install.  I managed to break cpanm on the first server so I can no longer reproduce, but a fresh server actually worked so I&#39;m moving on."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1487889626, "post_id": 42426564, "comment_id": 72000624, "body": "Personally, I find <a href=\"https://perlbrew.pl/\" rel=\"nofollow noreferrer\">perlbrew</a>/<a href=\"https://github.com/tokuhirom/plenv\" rel=\"nofollow noreferrer\">plenv</a> to be much easier than messing with local::lib."}, {"owner": {"reputation": 322, "user_id": 300113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2e2857243a00c807abd5e6b5d9e3a6?s=128&d=identicon&r=PG", "display_name": "Hugh Barnard", "link": "https://stackoverflow.com/users/300113/hugh-barnard"}, "edited": false, "score": 0, "creation_date": 1488129394, "post_id": 42426564, "comment_id": 72083631, "body": "Also with regard to <b>general procedure</b>, I try use the modules that are packaged up for Debian style distributions <code>libwww-perl</code> etc. rather than use cpan. This means that they are in the package registry. Clearly, if you are building for a specific user, this does not apply though."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1487917095, "post_id": 42426947, "comment_id": 72008928, "body": "Why are you using local::lib if you&#39;re root?"}], "tags": [], "owner": {"reputation": 11, "user_id": 7613576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4482fdb1cf68b8a5c300e23b233697?s=128&d=identicon&r=PG&f=1", "display_name": "Bennett Wineholt", "link": "https://stackoverflow.com/users/7613576/bennett-wineholt"}, "is_accepted": false, "score": 0, "last_activity_date": 1487886984, "creation_date": 1487886984, "answer_id": 42426947, "question_id": 42426564, "link": "https://stackoverflow.com/questions/42426564/cpanm-does-not-install-modules/42426947#42426947", "title": "cpanm does not install modules", "body": "<p>On a fresh server this procedure worked</p>\n\n<pre><code>sudo apt-get update\nsudo apt-get install unzip make cmake perl build-essential curl cpanminus\necho $?\nsudo ln -s /usr/bin/unzip /bin/unzip\nmkdir -p /home/ubuntu/perl5\nchown -R ubuntu:ubuntu /home/ubuntu/perl5\ncpanm --local-lib=/home/ubuntu/perl5 local::lib &amp;&amp; eval $(perl -I /home/ubuntu/perl5/lib/perl5/ -Mlocal::lib)\necho \"cpanm --local-lib=/home/ubuntu/perl5 local::lib &amp;&amp; eval $(perl -I /home/ubuntu/perl5/lib/perl5/ -Mlocal::lib)\" &gt;&gt; /home/ubuntu/.bashrc\ncpanm File::Copy::Recursive\ncpanm --skip-installed LWP::Simple\necho $?\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7613576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4482fdb1cf68b8a5c300e23b233697?s=128&d=identicon&r=PG&f=1", "display_name": "Bennett Wineholt", "link": "https://stackoverflow.com/users/7613576/bennett-wineholt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1532, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487886984, "creation_date": 1487885514, "question_id": 42426564, "link": "https://stackoverflow.com/questions/42426564/cpanm-does-not-install-modules", "title": "cpanm does not install modules", "body": "<p>I am a brand new perl user attempting to install perl modules and their dependencies.</p>\n\n<p>I am trying to install the perl dependencies I need on a fresh Ubuntu 16.10 cloud server instance but they do not register as installed.</p>\n\n<p>For example</p>\n\n<pre><code>cpanm --skip-installed LWP::Simple\n</code></pre>\n\n<p>shows</p>\n\n<pre><code>--&gt; Working on LWP::Simple\nFetching http://www.cpan.org/authors/id/O/OA/OALDERS/libwww-perl-6.21.tar.gz ... OK\nConfiguring libwww-perl-6.21 ... OK\n==&gt; Found dependencies: WWW::RobotRules, Net::HTTP, File::Listing, HTTP::Daemon, Test::RequiresInternet, Test::Fatal, HTTP::Negotiate, HTTP::Cookies\n--&gt; Working on WWW::RobotRules\nFetching http://www.cpan.org/authors/id/G/GA/GAAS/WWW-RobotRules-6.02.tar.gz ... OK\nConfiguring WWW-RobotRules-6.02 ... OK\nBuilding and testing WWW-RobotRules-6.02 ... OK\nSuccessfully installed WWW-RobotRules-6.02\n--&gt; Working on Net::HTTP\nFetching http://www.cpan.org/authors/id/O/OA/OALDERS/Net-HTTP-6.13.tar.gz ... OK\nConfiguring Net-HTTP-6.13 ... OK\nBuilding and testing Net-HTTP-6.13 ... OK\nSuccessfully installed Net-HTTP-6.13\n\n...\n\n! Installing the dependencies failed: Module 'File::Listing' is not installed, Module 'HTTP::Daemon' is not installed, Module 'Test::RequiresInternet' is not installed, Module 'HTTP::Cookies' is not installed, Module 'Test::Fatal' is not installed, Module 'HTTP::Negotiate' is not installed, Module 'WWW::RobotRules' is not installed, Module 'Net::HTTP' is not installed\n! Bailing out the installation for libwww-perl-6.21.\n8 distributions installed\n</code></pre>\n\n<p>Am I using the right tool?\nWhere can I find or produce more detailed error logs?</p>\n\n<p>Below are selections from my install procedure, but experimentation might mean it is not precisely representative.</p>\n\n<pre><code>sudo apt-get install unzip make cmake perl build-essential curl cpanminus\ncpanm --self-upgrade --sudo\nsudo ln -s /usr/bin/unzip /bin/unzip\nexport PERL_INSTALL_ROOT=/home/ubuntu/perl5\nexport PERL5LIB=/home/ubuntu/perl5\nexport PERL_CPANM_OPT=\"--local-lib=/home/ubuntu/perl5\"\nmkdir -p /home/ubuntu/perl5\nchown -R ubuntu:ubuntu /home/ubuntu/perl5\nchown -R ubuntu:ubuntu /home/ubuntu/.cpanm\ncpanm --local-lib=/home/ubuntu/perl5 local::lib &amp;&amp; eval $(perl -I /home/ubuntu/perl5/lib/perl5/ -Mlocal::lib)\ncpanm File::Copy::Recursive\ncpanm Archive::Zip\ncpanm --skip-installed LWP::Simple\n</code></pre>\n"}, {"tags": ["perl", "function", "recursion", "error-handling", "parameter-passing"], "comments": [{"owner": {"reputation": 21, "user_id": 3529763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CszdN.png?s=128&g=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/3529763/tibor"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1487884821, "post_id": 42426080, "comment_id": 71998280, "body": "Reply to &quot;why not the same if/else&quot;: The java is from a course example. (so the braces). C++, my test after Perl had failed. (but I like to do away with braces for simple expressions). In Perl, the equivalent &quot;no braces&quot; solution is when the conditional clause comes last."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1487890746, "post_id": 42426080, "comment_id": 72001068, "body": "Your statement about the error message prior to using <code>croak</code> does not match the code in your question. If you called <code>factorial()</code>, <code>$n</code> would be <code>undef</code>, and the warning would be about &quot;uninitialized $n in numeric eq&quot;. (But <code>undef</code> would implicitly get converted to 0, and the function would still return 1.) The real question is: why are you calling the function with an undefined/null value and expecting it to work in Perl when it wouldn&#39;t work in other languages!"}, {"owner": {"reputation": 21, "user_id": 3529763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CszdN.png?s=128&g=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/3529763/tibor"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1487964795, "post_id": 42426080, "comment_id": 72037246, "body": "@MattJacob you are  absolutely right. it was not simply &quot;without&quot; but with &quot;|| return&quot;. It was meant to help me when there was  no command line argument. (I am going to edit the question and add your comment.)"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1487886631, "post_id": 42426180, "comment_id": 71999164, "body": "You might also add that <code>&#47;&#47;</code> and <code>||</code> have a higher binding than <code>or</code>, so in fact the <code>$n = shift || croak</code> actually assigns the return value of <code>croak</code> to <code>$n</code>. Since <code>croak</code> is a <code>die</code>, there&#39;s no return value because it never returns, but this still matters."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1487918250, "post_id": 42426180, "comment_id": 72009380, "body": "@simbabque, You&#39;re warning us that Perl is actually doing exactly what we want it to do. When using <code>or</code>, the assignment needlessly happens, and we indirectly examine what we want to examine by examining the result of the assignment.  When using <code>||</code> or <code>&#47;&#47;</code>, the actual thing that needs to be checked is checked, and the assignment <i>doesn&#39;t</i> needlessly happen as with <code>or</code>. That&#39;s actually the ideal situation, not something to be warned about!"}, {"owner": {"reputation": 21, "user_id": 3529763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CszdN.png?s=128&g=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/3529763/tibor"}, "edited": false, "score": 0, "creation_date": 1487964406, "post_id": 42426180, "comment_id": 72037026, "body": "It seemed to be a curious omission in the tutorials and  materials I used that they did not have this operator, so I made a little historical search. The <i>defined-or</i> operator (//), as it is called in the book (Learning Perl, 5th Edition) where I managed to find it first, was introduced with Perl 5.10."}, {"owner": {"reputation": 21, "user_id": 3529763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CszdN.png?s=128&g=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/3529763/tibor"}, "edited": false, "score": 0, "creation_date": 1487966200, "post_id": 42426180, "comment_id": 72038028, "body": "Reference to the relevant help page (and bookmark) under the name <a href=\"http://perldoc.perl.org/perlop.html#Logical-Defined-Or\" rel=\"nofollow noreferrer\">logical defined-or operator</a>."}], "tags": [], "owner": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "is_accepted": true, "score": 6, "last_activity_date": 1506310356, "last_edit_date": 1506310356, "creation_date": 1487883984, "answer_id": 42426180, "question_id": 42426080, "link": "https://stackoverflow.com/questions/42426080/error-when-factorial-recursion-reaches-zero/42426180#42426180", "title": "Error when factorial recursion reaches zero", "body": "<p>Perl has some rather unorthodox rules for what is considered true.</p>\n\n<p>In particularly, the number 0 is considered to be false when used in a Boolean expression. So when you say this</p>\n\n<pre><code>my $n = shift || croak \"null value for argument\";\n</code></pre>\n\n<p>If <code>shift</code> pulls 0 as the argument, then it gets seen as false, which means the <code>||</code> operator needs to evaluate its second operand.</p>\n\n<p>Fortunately, the writers of Perl anticipated this sort of use case, so they defined an alternative or-operator. Whereas <code>||</code> checks whether the first value is truthy, <code>//</code> checks whether the first value is defined.</p>\n\n<pre><code>my $n = shift // croak \"null value for argument\";\n</code></pre>\n\n<p>This will do what you intend, unless there is the possibility that <code>$n</code> is the literal value <code>undef</code>. In that case, you'll need some more complex introspection to check whether the argument exists, but for the purposes of this factorial function, this should suffice.</p>\n"}], "owner": {"reputation": 21, "user_id": 3529763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CszdN.png?s=128&g=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/3529763/tibor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 42426180, "answer_count": 1, "score": 1, "last_activity_date": 1506310356, "creation_date": 1487883614, "last_edit_date": 1488053571, "question_id": 42426080, "link": "https://stackoverflow.com/questions/42426080/error-when-factorial-recursion-reaches-zero", "title": "Error when factorial recursion reaches zero", "body": "<p>Why does the following recursive factorial fails in Perl, even if it works in C++ and Java?</p>\n\n<p>Java:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static long factorial(int n) {\n  if (n == 0) {\n    return 1;\n  } else {\n    return factorial(n-1) * n;\n  }\n}\n</code></pre>\n\n<p>C++:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>long factorial(int n) {\n  if (n == 0)\n    return 1;\n  else\n    return n * factorial(n-1);\n}\n</code></pre>\n\n<p>But this one fails in Perl (<code>use Carp;</code>):</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub factorial {\n    my $n = shift || croak \"null value for argument\";\n    return 1 if $n == 0;  # base case\n    return  $n * factorial($n-1);\n}\n</code></pre>\n\n<p>Error message (line 10 is where the function is called in <code>main()</code>, line 16 is the second <code>return</code> statement):</p>\n\n<pre><code> null value for argument at ./fact1.pl line 14.\n        main::factorial(0) called at ./fact1.pl line 16\n        main::factorial(1) called at ./fact1.pl line 10\n</code></pre>\n\n<p>(The following has been edited thanks to Matt Jacob pointing out my omission in the original version.)</p>\n\n<p>The original version, without carp, but with <code>|| return</code>, the error message was:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Use of uninitialized value in multiplication (*) at ./fact1.pl line 16.\n</code></pre>\n\n<p>which was the result of an attempt to make the script silent when there was no command line argument. (No complaint about <code>uninitialized value</code>.)</p>\n\n<p>A small modification of the base case makes it work in Perl too:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub factorial {\n    my $n = shift || croak \"null value for argument\";\n    return 1 if $n == 1;  # base case\n    return $n * factorial($n-1);\n}\n</code></pre>\n\n<p>(Of course, at the expense of doing away with handling <code>0</code> (zero) input.)</p>\n\n<hr />\n\n<p><strong>Lessons Learnt</strong></p>\n\n<ol>\n<li>The problem was at a different location where I thought\n\n<ul>\n<li>the Perl code had the error in the part that it attempted to do more than the C++ or Java code snippets (a really crude approach)</li>\n<li>the different error messages should have given me  a hint</li>\n</ul></li>\n<li>The following could have helped me localise the issue:\n\n<ul>\n<li>delete all after <code>shift;</code></li>\n<li>remember that <code>0</code> (zero) means <code>false</code></li>\n</ul></li>\n<li><a href=\"http://perldoc.perl.org/perlop.html#Logical-Defined-Or\" rel=\"nofollow noreferrer\">Logical Defined-Or</a> exists in Perl since version 5.10</li>\n<li>As for proper error handling, <a href=\"http://www.perl.com/pub/2002/11/14/exception.html\" rel=\"nofollow noreferrer\">this page</a> provides a good overview.</li>\n</ol>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1487881428, "post_id": 42425345, "comment_id": 71996275, "body": "Please show a full but minimal example that demonstrates what you&#39;ve already tried and isn&#39;t working."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1487881747, "post_id": 42425345, "comment_id": 71996466, "body": "Pull the array out (just for easier syntax), then <code>my @sorted = sort { (keys %$a)[0] cmp (keys %$b)[0] } @arr;</code>. It seems a little awkward to have a single-pair hash in an array ... which is probably why you hava a problem. You can use <a href=\"http://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\">Data::Dumper</a> or <a href=\"http://search.cpan.org/~gaas/Data-Dump-1.23/lib/Data/Dump.pm\" rel=\"nofollow noreferrer\">Data::Dump</a> or similiar to easily see complex data structures like this (it prints them out nicely). Please read up on <a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">sort</a>.  And please next time show what you&#39;ve done before you &quot;<i>gave up</i>&quot;"}, {"owner": {"reputation": 31, "user_id": 7571955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e20b7a0ed78a19e22b1f91259d100c?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7571955/adrian"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1487881881, "post_id": 42425345, "comment_id": 71996541, "body": "@zdim will this work on the same <code>@arr</code>? What I mean is will this work if i say something like this : 1@arr = sort { (keys %$a)[0] cmp (keys %$b)[0] } @arr;` ?"}, {"owner": {"reputation": 31, "user_id": 7571955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e20b7a0ed78a19e22b1f91259d100c?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7571955/adrian"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1487881889, "post_id": 42425345, "comment_id": 71996548, "body": "@zdim Thanks a lot!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1487882129, "post_id": 42425345, "comment_id": 71996696, "body": "Yes it will, it will overwrite the <code>@arr</code>.  However, that wouldn&#39;t update the reference in your <code>$structure</code>.  For that, get the input list directly from it, like in <a href=\"http://stackoverflow.com/a/42425595/4653379\">Jim Garrison answer</a> and assign (the reference of it) back to where it goes in <code>$structure</code>.  You can take a reference on the fly by <code>[ sort ... ]</code>, for example."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7571955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e20b7a0ed78a19e22b1f91259d100c?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7571955/adrian"}, "edited": false, "score": 0, "creation_date": 1487882117, "post_id": 42425595, "comment_id": 71996686, "body": "Can I store it in the same array? <code>@{$structure[$endpoint][1]} = sort {  (keys %$a)[0] cmp (keys %$b)[0] } @{$structure[$endpoint][1]};</code>"}, {"owner": {"reputation": 31, "user_id": 7571955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e20b7a0ed78a19e22b1f91259d100c?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7571955/adrian"}, "edited": false, "score": 0, "creation_date": 1487882164, "post_id": 42425595, "comment_id": 71996714, "body": "What I mean is that I want to keep the structure and sort it"}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "reply_to_user": {"reputation": 31, "user_id": 7571955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e20b7a0ed78a19e22b1f91259d100c?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7571955/adrian"}, "edited": false, "score": 0, "creation_date": 1487882249, "post_id": 42425595, "comment_id": 71996763, "body": "You can assign it back to the same variable, yes."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 31, "user_id": 7571955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e20b7a0ed78a19e22b1f91259d100c?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7571955/adrian"}, "edited": false, "score": 0, "creation_date": 1487886151, "post_id": 42425595, "comment_id": 71998931, "body": "@Adrian yes, of course. <code>@arr = sort { ... } @arr</code> is perfectly fine."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1487886250, "post_id": 42425595, "comment_id": 71998969, "body": "Please make sure that example programs in your answer include <code>use strict</code> and <code>use warnings</code> and compile with both pragmata turned on. We&#39;re trying very hard to keep the quality up here so that future readers learn how to use Perl in a modern fashion. Thanks. :)"}], "tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": true, "score": 1, "last_activity_date": 1487882222, "last_edit_date": 1487882222, "creation_date": 1487881783, "answer_id": 42425595, "question_id": 42425345, "link": "https://stackoverflow.com/questions/42425345/how-can-i-sort-an-array-of-hashes-by-the-hashes-name/42425595#42425595", "title": "How can I sort an array of hashes by the hashes name?", "body": "<p>Try</p>\n\n<pre><code>@sorted = sort {  (keys %$a)[0] cmp (keys %$b)[0] } @{$structure[$endpoint][1]};\n</code></pre>\n\n<p>This sorts the elements of the array (which are hash references) according to the first (only) key of each hash.  If the keys are numeric use <code>&lt;=&gt;</code> instead.</p>\n\n<p>Test code:</p>\n\n<pre><code>%a = ( 'a' =&gt; 1 );\n%b = ( 'zz' =&gt; 2 );\n%c = ( 'g' =&gt; 3);\n@arr = (\\%a, \\%b, \\%c);\n\nprint \"Unsorted\\n\";\nfor (@arr)\n{\n    printf \"%s\\n\",((keys %$_)[0]);\n}\n\n@sorted = sort { (keys %$a)[0] cmp (keys %$b)[0] } @arr;\n\nprint \"\\nSorted\\n\";\nfor (@sorted)\n{\n    printf \"%s\\n\",((keys %$_)[0]);\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7571955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e20b7a0ed78a19e22b1f91259d100c?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7571955/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 42425595, "answer_count": 1, "score": -2, "last_activity_date": 1487882222, "creation_date": 1487880884, "question_id": 42425345, "link": "https://stackoverflow.com/questions/42425345/how-can-i-sort-an-array-of-hashes-by-the-hashes-name", "title": "How can I sort an array of hashes by the hashes name?", "body": "<p>I want to sort an array of hashes by the hashes key, how could I do that in Perl?\nThe structure is created like this : </p>\n\n<p><code>push (@{$structure[$endpoint][1]}, \\%temp_hash);</code><br>\n<code>%temp_hash</code> is a simple hash with <code>key-&gt;value</code>.\nAnd now I want to sort that array by the hashes key, there is only one key->value in each hash... been fighting with it for 2 hours already and I gave up..</p>\n"}, {"tags": ["arrays", "list", "perl", "newline", "qiime"], "comments": [{"owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 1, "creation_date": 1487877035, "post_id": 42424129, "comment_id": 71993816, "body": "<code>\\s</code> includes <code>\\n</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1487877495, "post_id": 42424129, "comment_id": 71994073, "body": "Never use <code>if (&#47;...&#47;g)</code>*. Makes absolutely no sense, and behaves subtly different than <code>if (&#47;...&#47;)</code>. Use <code>if (&#47;...&#47;)</code>!  (* - Unless you&#39;re unrolling a while loop.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1487877568, "post_id": 42424129, "comment_id": 71994114, "body": "I don&#39;t know what your question is, but I suspect you&#39;re wondering why <code>$id_list</code> doesn&#39;t contain more than one line even though you&#39;ve only put one line in it?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1487877571, "post_id": 42424129, "comment_id": 71994117, "body": "@toolic And <code>\\t</code>!"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1487877611, "post_id": 42424129, "comment_id": 71994143, "body": "What is the question?"}, {"owner": {"reputation": 311, "user_id": 9097452, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8073dda6ba748ee30788aed8a1e82f0d?s=128&d=identicon&r=PG", "display_name": "abraham", "link": "https://stackoverflow.com/users/9097452/abraham"}, "edited": false, "score": 0, "creation_date": 1487877645, "post_id": 42424129, "comment_id": 71994160, "body": "I used without \\n (if ($id_list =~ m/\\s|\\t|\\,|\\;/g)) but the only file that don&#39;t work with, is the list file !!!! ... Thanks !!"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1487877740, "post_id": 42424129, "comment_id": 71994210, "body": "Does that mean your question is answered, or...? What exactly is the question?"}, {"owner": {"reputation": 311, "user_id": 9097452, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8073dda6ba748ee30788aed8a1e82f0d?s=128&d=identicon&r=PG", "display_name": "abraham", "link": "https://stackoverflow.com/users/9097452/abraham"}, "edited": false, "score": 0, "creation_date": 1487877804, "post_id": 42424129, "comment_id": 71994251, "body": "the question is how to add the list of ids to an array (@list_id ) using 6 different formats, the only one that don&#180;t work is the last file:                                 List_delimited file"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1487878161, "post_id": 42424129, "comment_id": 71994425, "body": "You are reading the file <i>line by line</i>.  What you call &quot;<i>list delimited</i>&quot; format is broken up into multiple lines and thus can&#39;t be parsed that way -- you aren&#39;t going to get the whole &quot;<i>list</i>&quot; per filehandle read, but just one line of it.  Best do that format separately, since it is substantially different."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1487878463, "post_id": 42424129, "comment_id": 71994577, "body": "Is the only time you get more than one line when is when you have a so-called &quot;list-delimited&quot; file?"}], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 9097452, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8073dda6ba748ee30788aed8a1e82f0d?s=128&d=identicon&r=PG", "display_name": "abraham", "link": "https://stackoverflow.com/users/9097452/abraham"}, "edited": false, "score": 0, "creation_date": 1488183836, "post_id": 42439470, "comment_id": 72101493, "body": "thanks so much, it works with some of your modifications !! : ))"}], "tags": [], "owner": {"reputation": 727, "user_id": 2059832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8oSY3.gif?s=128&g=1", "display_name": "drmrgd", "link": "https://stackoverflow.com/users/2059832/drmrgd"}, "is_accepted": false, "score": 0, "last_activity_date": 1487941764, "creation_date": 1487941764, "answer_id": 42439470, "question_id": 42424129, "link": "https://stackoverflow.com/questions/42424129/adding-a-list-to-an-array-from-different-file-format-in-perl/42439470#42439470", "title": "Adding a list to an array from different file format in perl", "body": "<p>I think you can simply your code a bit since there are some redundant regexes in there.  You really just need to run a <code>split</code> function on each line in the file with a character class matching the possibilities I think.  I might simplify it to this:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse autodie;\n\nmy $file = shift;\n\nmy @list_ids;\nopen(my $fh, \"&lt;\", $file);\nwhile (&lt;$fh&gt;) {\n    next if m/^[\\#\\$]/;\n    my @elems = split(/[\\s+,;]/);\n    # maybe another next regex / string comparison filter if $otus_tag?\n    #next if $otus_tag and ! /.../;  ?\n    #next unless $otus_tag eq $elems[0]; ?\n    push(@list_ids, $_) for @elems;\n}\n\nprint \"$_\\n\" for @list_ids;\n</code></pre>\n\n<p>This outputs the following after running through the 6 different file types:</p>\n\n<pre><code>$ for f in files/*file; do echo $f; ./parse_file.pl $f; echo; done\nfiles/comma.file\nY4.SW08.DCM.X4a_1386\nY4.SW08.DCM.X4a_1457\nY4.SW08.DCM.X4a_1590\n\nfiles/list.file\nY4.SW08.DCM.X4a_1386\nY4.SW08.DCM.X4a_1457\nY4.SW08.DCM.X4a_1590\n\nfiles/semicolon.file\nY4.SW08.DCM.X4a_1386\nY4.SW08.DCM.X4a_1457\nY4.SW08.DCM.X4a_159\n\nfiles/space.file\nY4.SW08.DCM.X4a_1386\nY4.SW08.DCM.X4a_1457\nY4.SW08.DCM.X4a_1590\n\nfiles/tab.file\nY4.SW08.DCM.X4a_1386\nY4.SW08.DCM.X4a_1457\nY4.SW08.DCM.X4a_15\n\nfiles/tab2.file\nA100B1\nY4.SW08.DCM.X4a_1386\nY4.SW08.DCM.X4a_1457\nY4.SW08.DCM.X4a_159\n</code></pre>\n\n<p>I don't know what an otus_tag is and what you're trying to get at with that variable. But I put in a couple ideas for filtering on that, if that's what you're trying to do. The one I indicated as 'tab2.file' is what I think is the otus_tag file requiring extra filtering, but your code suggests that we keep the different string in the output, so I don't know what you want to do there. </p>\n\n<p>When I run your script, after putting in some dummy variable since we don't know what $otus_tag is for example, I get the same answer as my script.  So, I'm not entirely sure what's going wrong for you.  Maybe some example output of what you're getting and some sample output of what you really want would be helpful.</p>\n"}], "owner": {"reputation": 311, "user_id": 9097452, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8073dda6ba748ee30788aed8a1e82f0d?s=128&d=identicon&r=PG", "display_name": "abraham", "link": "https://stackoverflow.com/users/9097452/abraham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487941764, "creation_date": 1487876753, "question_id": 42424129, "link": "https://stackoverflow.com/questions/42424129/adding-a-list-to-an-array-from-different-file-format-in-perl", "title": "Adding a list to an array from different file format in perl", "body": "<pre><code>open(IN_FILE, $id_file) or die \"Cant open $id_file file\";\n\nwhile (my $id_list= &lt;IN_FILE&gt;) {\n    chomp $id_list;\n\n    if ($id_list =~ m/^#|^$/g) {\n        next;\n    }\n        # This Works WELL\n        # if the file comes in QIIME format \n    elsif($otus_tag){\n        if ($id_list =~ m/^$otus_tag\\t/g) {\n            @list_id = split /\\t/, $id_list;\n\n        }\n\n    }\n        # This is the section that I want to FIX !!!!\n        # if the format are in space, tab, semicolon, comma or in new line.\n\n    elsif(!$otus_tag){\n        if ($id_list =~ m/\\s|\\t|\\,|\\;/g) {\n             @list_id = split /\\s|\\t|\\,|\\;/, $id_list;\n        }\n\n\n    } \n}\n</code></pre>\n\n<p>I have this a section of a perl script to extract a list of ids from files with 6 different formats:</p>\n\n<pre><code>    Tab_delimited file:\n    Y4.SW08.DCM.X4a_1386    Y4.SW08.DCM.X4a_1457    Y4.SW08.DCM.X4a_1590\n\n    Tab_delimited_QIIME file:\n    A100B1      Y4.SW08.DCM.X4a_1386    Y4.SW08.DCM.X4a_1457    Y4.SW08.DCM.X4a_1590\n\n    Space_delimited file:\n    Y4.SW08.DCM.X4a_1386 Y4.SW08.DCM.X4a_1457 Y4.SW08.DCM.X4a_1590\n\n    Comma_delimited file:\n    Y4.SW08.DCM.X4a_1386,Y4.SW08.DCM.X4a_1457,Y4.SW08.DCM.X4a_1590\n\n    Semicolon_delimited file:\n    Y4.SW08.DCM.X4a_1386;Y4.SW08.DCM.X4a_1457;Y4.SW08.DCM.X4a_1590\n\n    List_delimited file:\n    Y4.SW08.DCM.X4a_1386\n    Y4.SW08.DCM.X4a_1457\n    Y4.SW08.DCM.X4a_1590\n</code></pre>\n\n<p>the code works well at the moment to add the ids to an array, except with the last format, the list delimited file, I have tried to add a \\n to the next 2 lines:</p>\n\n<pre><code>if ($id_list =~ m/\\s|\\t|\\,|\\;|\\n/g)\n@list_id = split /\\s|\\t|\\,|\\;|\\n/, $id_list;\n</code></pre>\n\n<p>But it do not add the ids to the array when the file format is a list !!! ...... Any Idea ??? </p>\n\n<p>Thanks So Much </p>\n"}, {"tags": ["regex", "perl", "regex-lookarounds"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1487868643, "creation_date": 1487868643, "answer_id": 42421714, "question_id": 42421525, "link": "https://stackoverflow.com/questions/42421525/perl-regex-getting-text-before-and-after-match/42421714#42421714", "title": "Perl Regex - Getting Text Before and After Match", "body": "<p>You can still split the input, then map the words to indices, and use than use the indices corresponding to the matches to extract the neighbouring cells:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nmy @matches = qw( phylum domain );\n\nwhile (&lt;&gt;) {\n    chomp;\n    my @cells = split /\\t/;\n    my %indices;\n    @indices{ @cells } = 0 .. $#cells;\n    for my $match (@matches) {\n        if (defined( my $index = $indices{$match} )) {\n            say join \"\\t\", @cells[ $index - 1 .. $index + 1 ];\n        }\n    }\n}\n</code></pre>\n\n<p>What's missing:</p>\n\n<ol>\n<li>You should handle the case when $index == 0 or $index == $#cells.</li>\n<li>You should handle the case where some words are repeated in one line.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 4183, "user_id": 7275984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xwrdn.jpg?s=128&g=1", "display_name": "m87", "link": "https://stackoverflow.com/users/7275984/m87"}, "edited": false, "score": 1, "creation_date": 1487870574, "post_id": 42421844, "comment_id": 71990166, "body": "@cooldood3490 check updated answer. now you can match space and tab at the same time"}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1564699846, "post_id": 42421844, "comment_id": 101127120, "body": "tabs are matched by <code>\\s</code>, and you don&#39;t need a char class if just matching <code>\\s</code>, so both <code>[\\s\\t]</code> can be replaced by <code>\\s</code>."}], "tags": [], "owner": {"reputation": 4183, "user_id": 7275984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xwrdn.jpg?s=128&g=1", "display_name": "m87", "link": "https://stackoverflow.com/users/7275984/m87"}, "is_accepted": false, "score": 2, "last_activity_date": 1487870458, "last_edit_date": 1487870458, "creation_date": 1487869030, "answer_id": 42421844, "question_id": 42421525, "link": "https://stackoverflow.com/questions/42421525/perl-regex-getting-text-before-and-after-match/42421844#42421844", "title": "Perl Regex - Getting Text Before and After Match", "body": "<p>You can just simply use the following <em>regex</em> to capture the words <code>before</code> and <code>after</code> of a matched word:</p>\n\n<pre><code>(?&lt;LSH&gt;[\\w.]+)[\\s\\t](?&lt;MATCH&gt;.*?)[\\s\\t](?&lt;RHS&gt;[\\w.]+)\n</code></pre>\n\n<p>see <a href=\"https://regex101.com/r/4K4d6Y/2\" rel=\"nofollow noreferrer\">demo / explanation</a></p>\n"}, {"comments": [{"owner": {"reputation": 2167, "user_id": 2237387, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f10bc46df3b1fa41b60201ac9af5da39?s=128&d=identicon&r=PG", "display_name": "cooldood3490", "link": "https://stackoverflow.com/users/2237387/cooldood3490"}, "edited": false, "score": 0, "creation_date": 1487869831, "post_id": 42421892, "comment_id": 71989677, "body": "how do I modify the regex you wrote above to match words on a tab delimited line? In the example I wrote, the words are separated only by 1 space"}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": true, "score": 1, "last_activity_date": 1487870064, "last_edit_date": 1487870064, "creation_date": 1487869157, "answer_id": 42421892, "question_id": 42421525, "link": "https://stackoverflow.com/questions/42421525/perl-regex-getting-text-before-and-after-match/42421892#42421892", "title": "Perl Regex - Getting Text Before and After Match", "body": "<p>You could do:</p>\n\n<pre><code>#!/usr/bin/perl\nuse Modern::Perl;\n\nmy @words = qw(phylum domain);\nwhile(&lt;DATA&gt;) {\n    chomp;\n    for my $word (@words) {\n        my ($before, $after) = $_ =~ /(\\S+)(?:\\t\\Q$word\\E\\t)(\\S+)/i;\n        say \"word: $word\\tbefore: $before\\tafter: $after\";\n    }\n}\n\n__DATA__\nRoot rootrank 1 Bacteria domain .72 Firmicutes phylum 1 Clostridia class 1 etc.\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>word: phylum    before: Firmicutes  after: 1\nword: domain    before: Bacteria    after: .72\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 6150882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf315b3487524264d79bfc2d34b5ff8e?s=128&d=identicon&r=PG&f=1", "display_name": "superuser33", "link": "https://stackoverflow.com/users/6150882/superuser33"}, "is_accepted": false, "score": 3, "last_activity_date": 1487874528, "creation_date": 1487874528, "answer_id": 42423483, "question_id": 42421525, "link": "https://stackoverflow.com/questions/42421525/perl-regex-getting-text-before-and-after-match/42423483#42423483", "title": "Perl Regex - Getting Text Before and After Match", "body": "<pre><code> my $file = \"file2.txt\";\n open my $fh, '&lt;', $file or die \"Unable to Open the file $file for reading: $!\\n\";\n while (my $line = &lt;$fh&gt;) {\n     chomp $line;\n     while ($line =~ /(\\w+)\\s+(\\w+)\\s+(\\.?\\d+)/g) {\n     my ($before, $match, $after) = ($1, $2, $3);\n     print \"Before: $before  Match: $match  After: $after\\n\";\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 2167, "user_id": 2237387, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f10bc46df3b1fa41b60201ac9af5da39?s=128&d=identicon&r=PG", "display_name": "cooldood3490", "link": "https://stackoverflow.com/users/2237387/cooldood3490"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1335, "favorite_count": 0, "accepted_answer_id": 42421892, "answer_count": 4, "score": 1, "last_activity_date": 1487874528, "creation_date": 1487868084, "question_id": 42421525, "link": "https://stackoverflow.com/questions/42421525/perl-regex-getting-text-before-and-after-match", "title": "Perl Regex - Getting Text Before and After Match", "body": "<p>I am parsing a tab delimited file line by line:</p>\n\n<pre><code>Root rootrank 1 Bacteria domain .72 Firmicutes phylum 1 Clostridia class 1 etc.\n</code></pre>\n\n<p>=</p>\n\n<pre><code>while (my $line = &lt;$fh&gt;) {\n    chomp($line);\n}\n</code></pre>\n\n<p>On every line, I want to capture the 1st entry before and after a particular match. For example, for the match <code>phylum</code>, I want to capture the entries <code>Firmicutes</code> and <code>1</code>. For the match <code>domain</code>, I want to capture the entries <code>Bacteria</code> and <code>.72</code>. How would I write the regex to do this?</p>\n\n<p>Sidenote: I can't simply split the line by tab into an array and use the index because sometimes a category is missing or there are extra categories, and that causes the entries to be shifted by one or two indices. And I want to avoid writing blocks of if statements. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1487867546, "post_id": 42420855, "comment_id": 71987987, "body": "Your code does not compile because you have <code>strict</code> but the first two variables are never declared. You&#39;re talking about <code>result.txt</code> but your code only writes to a <code>result.html</code>. You also have lots of HTML that you write to that file, but the output and expected output you show us is plain-text. If you want to make something bold in HTML, put it into a <code>&lt;b&gt;&lt;&#47;b&gt;</code> tag."}, {"owner": {"reputation": 47, "user_id": 6946809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de2dc545256dc36ecc3c9c003050cf69?s=128&d=identicon&r=PG&f=1", "display_name": "shuttle folks", "link": "https://stackoverflow.com/users/6946809/shuttle-folks"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1487868255, "post_id": 42420855, "comment_id": 71988491, "body": "Here i tried to copy that ouput in table format but it copied as text@simbabque"}, {"owner": {"reputation": 47, "user_id": 6946809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de2dc545256dc36ecc3c9c003050cf69?s=128&d=identicon&r=PG&f=1", "display_name": "shuttle folks", "link": "https://stackoverflow.com/users/6946809/shuttle-folks"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1487868301, "post_id": 42420855, "comment_id": 71988527, "body": "I tried the above code so that the output is generated.i did copy of the generated output here@simbabque"}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 3, "creation_date": 1487870328, "post_id": 42420855, "comment_id": 71989984, "body": "I didn&#39;t downvote, but I am guessing reading the links in <a href=\"https://stackoverflow.com/questions/42400948/how-to-convert-txt-file-contents-into-html-format-using-perl#comment71949061_42400948\">this comment</a> will help, if you haven&#39;t already :) .  Also, the <a href=\"http://stackoverflow.com/help/formatting\">formatting help page</a> may help with the issue you had trying to paste your results in.  If you indent each line of your pasted HTML with four spaces, it should come through as source rather than as rendered output."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1487877600, "post_id": 42420855, "comment_id": 71994137, "body": "@cxw: There is no HTML markup in the question&#39;s source!"}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1487879857, "post_id": 42420855, "comment_id": 71995389, "body": "@Borodin agreed.  I am guessing based on <a href=\"http://stackoverflow.com/questions/42420855/how-to-bold-the-row-in-the-html-page-using-perl?noredirect=1#comment71988491_42420855\">the OP&#39;s comment</a> that the OP tried to paste HTML and had formatting problems.  It&#39;s just a guess, though!"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1487877723, "post_id": 42422379, "comment_id": 71994197, "body": "<code>split &#47;:&#47;, $line</code> is already in <code>@data</code>; there is no need to recalculate it in the <code>print</code> statement. I would also prefer to see <code>print &quot;&lt;td&gt;$_&lt;&#47;td&gt;\\n&quot; for @data</code> instead of the <code>join</code>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1487916168, "post_id": 42422379, "comment_id": 72008552, "body": "@Borodin: Thanks. I really shouldn&#39;t rush these answers just before leaving work :-) I&#39;ve fixed the <code>split</code>/<code>@data</code> error. But I&#39;ve left your other suggestion, as I was trying to make as small a change as possible. Obviously, I&#39;d really do this with a template."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1487924833, "post_id": 42422379, "comment_id": 72012235, "body": "That&#39;s fine. One of the core principles of Stack Overflow is that we are here to fix one-another&#39;s oversights. And my second point was purely personal preference; your answer is fine as it is."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1487915957, "last_edit_date": 1487915957, "creation_date": 1487870601, "answer_id": 42422379, "question_id": 42420855, "link": "https://stackoverflow.com/questions/42420855/how-to-bold-the-row-in-the-html-page-using-perl/42422379#42422379", "title": "How to bold the row in the html page using perl?", "body": "<p>The best way to embolden text in HTML is to use <a href=\"https://en.wikipedia.org/wiki/Cascading_Style_Sheets\" rel=\"nofollow noreferrer\">Cascading Style Sheets</a>. You should change your code to insert a class in the <code>&lt;tr&gt;</code> elements that need to be bold. Instead of this:</p>\n\n<pre><code>print $HTML '&lt;tr&gt;&lt;td&gt;' . join('&lt;/td&gt;&lt;td&gt;', split(/:/,$line)) . \"&lt;/td&gt;&lt;/tr&gt;\\n\";\n</code></pre>\n\n<p>I would suggest something like this:</p>\n\n<pre><code>my @data = split /:/, $line;\nmy $class = $data[0] ? 'bold' : 'normal';\nprint $HTML qq[&lt;tr class=\"$class\"&gt;&lt;td&gt;] . join('&lt;/td&gt;&lt;td&gt;', @data) . \"&lt;/td&gt;&lt;/tr&gt;\\n\";\n</code></pre>\n\n<p>And then a CSS file that contains a rule like this:</p>\n\n<pre><code>.bold {\n  font-weight: bold;\n}\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 6946809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de2dc545256dc36ecc3c9c003050cf69?s=128&d=identicon&r=PG&f=1", "display_name": "shuttle folks", "link": "https://stackoverflow.com/users/6946809/shuttle-folks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "closed_date": 1487877499, "accepted_answer_id": 42422379, "answer_count": 1, "score": -2, "last_activity_date": 1487915957, "creation_date": 1487866293, "last_edit_date": 1487877335, "question_id": 42420855, "link": "https://stackoverflow.com/questions/42420855/how-to-bold-the-row-in-the-html-page-using-perl", "closed_reason": "Needs details or clarity", "title": "How to bold the row in the html page using perl?", "body": "<p></p>\n\n<p>I tried to highlight rows without serial number to bold.I used the following code to convert the row to bold using perl.</p>\n\n<h3>My code:</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/local/bin/perl\n\nuse strict;\nuse warnings;\n\nopen my $HTML, '&gt;', 'result.html' or die $!;\n\nprint $HTML &lt;&lt;'_END_HEADER_';\n&lt;html&gt;\n&lt;head&gt;&lt;title&gt;welcome&lt;/title&gt;&lt;/head&gt;\n&lt;body&gt;\n&lt;table border=10&gt;\n&lt;th&gt;SL.NO&lt;/th&gt;&lt;th&gt;CHECKLIST ITEM&lt;/th&gt;&lt;th&gt;VALUE&lt;/th&gt;&lt;th&gt;COMMENTS&lt;/th&gt;&lt;th&gt;CONFIRMATION&lt;/th&gt;\n_END_HEADER_\n\nopen my $IN, '&lt;', 'result.txt' or die $!;\n\nwhile ( my $line = &lt;$IN&gt; ) {\n    chomp $line;\n    #$line=~ s/COMMENT//g;\n    $line =~ s/[\\\\\\_\\@\\_]//g;\n    $line =~ s/COMMENT//g;\n    # print $line;\n    print $HTML '&lt;tr&gt;&lt;td&gt;' . join( '&lt;/td&gt;&lt;td&gt;', split( /:/, $line ) ) . \"&lt;/td&gt;&lt;/tr&gt;\\n\";\n}\n\nclose $IN or die $!;\n\nprint $HTML &lt;&lt;'_END_FOOTER_';\n&lt;/table&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n_END_FOOTER_\n\nclose $HTML or die $!;\n</code></pre>\n\n<h3>result.txt</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>CREATED_BY=ME\n1:Is Synopsys RM flow used?:Yes:INCORRECT:To Be Done\nCOMMENT:Full Planned_\\@_\n2:Any Blockages Used?:Yes:INCORRECT:To Be Done\nCOMMENT:CTS_\\@_\n</code></pre>\n\n<h3>Output Generated:(i.e result.html)</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>SL.NO   CHECKLIST_ITEM  VALUE   COMMENTS    CONFIRMATION\nCREATEDBY=ME                \n1   Is flow is used?    YES     INCORRECT   To Be Done\n    Full Planned            \n2   Any Blockages Used? Yes INCORRECT   To Be Done\n    CTS         \n</code></pre>\n\n<h3>Expected output:</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>CREATEDBY=ME\n\nSL.NO   CHECKLIST_ITEM  VALUE   COMMENTS    CONFIRMATION\n1   Is flow is used?    YES     INCORRECT   To Be Done\n    Full Planned            \n2   Any Blockages Used? Yes INCORRECT   To Be Done\n    CTS         \n</code></pre>\n\n<p>Here I like to highlight the unserial number rows(i.e Full planned and CTS) to be highlighted.</p>\n"}, {"tags": ["perl", "mojolicious", "mojolicious-lite"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1487866177, "post_id": 42420322, "comment_id": 71986997, "body": "Do you want to dynamically install a new route? Your code looks like this. I think that&#39;s unlikely and you probably want to just do an internal forward, essentially calling <code>&#47;process_name</code>. Is that correct?"}, {"owner": {"reputation": 57, "user_id": 6816866, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0c3ae36284be856f2bac5fb220cf5974?s=128&d=identicon&r=PG&f=1", "display_name": "Maresia", "link": "https://stackoverflow.com/users/6816866/maresia"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1487866832, "post_id": 42420322, "comment_id": 71987466, "body": "Yes, I have several internal routes that needs to communicate like that."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 6816866, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0c3ae36284be856f2bac5fb220cf5974?s=128&d=identicon&r=PG&f=1", "display_name": "Maresia", "link": "https://stackoverflow.com/users/6816866/maresia"}, "edited": false, "score": 0, "creation_date": 1487868532, "post_id": 42421284, "comment_id": 71988716, "body": "I like  the second approach since I am converting an app from &quot;standard perl&quot; to a  framework style. But that is rising  a question to me, when should a sub routine in perl needs to be converted into a router using Mojolicious::Lite?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 57, "user_id": 6816866, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0c3ae36284be856f2bac5fb220cf5974?s=128&d=identicon&r=PG&f=1", "display_name": "Maresia", "link": "https://stackoverflow.com/users/6816866/maresia"}, "edited": false, "score": 0, "creation_date": 1487873201, "post_id": 42421284, "comment_id": 71991724, "body": "@Maresia I would only convert the direct access points to <i>routes</i> (not <i>router</i>, that&#39;s the thing that handles incoming requests). So every entry point has a sub. Mojo calls those <i>controllers</i> (that&#39;s why there is a <code>$c</code>). Typically you keep those flat. I would go so far as to create separate packages for the business logic and call the functions from there. Or make them objects."}, {"owner": {"reputation": 57, "user_id": 6816866, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0c3ae36284be856f2bac5fb220cf5974?s=128&d=identicon&r=PG&f=1", "display_name": "Maresia", "link": "https://stackoverflow.com/users/6816866/maresia"}, "edited": false, "score": 0, "creation_date": 1487874732, "post_id": 42421284, "comment_id": 71992601, "body": "Sorry about  the &quot;router&quot; typo. What you said makes sense. Entry point a route, from the route a call to a sub to process data and so on. The documentation is every where, to wide, would you recommend some site with more explanation on this topic?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 57, "user_id": 6816866, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0c3ae36284be856f2bac5fb220cf5974?s=128&d=identicon&r=PG&f=1", "display_name": "Maresia", "link": "https://stackoverflow.com/users/6816866/maresia"}, "edited": false, "score": 0, "creation_date": 1487875145, "post_id": 42421284, "comment_id": 71992819, "body": "@Maresia I don&#39;t really use Mojolicious. I work with Catalyst and Dancer2. But the strategy is the same everywhere. Read up on <a href=\"https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller#Use_in_web_applications\" rel=\"nofollow noreferrer\">the mvc pattern</a>, especially how it&#39;s used for web applications. If you keep your business logic out of the actual web layer you can easily write tests for it, and it&#39;s more portable."}, {"owner": {"reputation": 57, "user_id": 6816866, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0c3ae36284be856f2bac5fb220cf5974?s=128&d=identicon&r=PG&f=1", "display_name": "Maresia", "link": "https://stackoverflow.com/users/6816866/maresia"}, "edited": false, "score": 0, "creation_date": 1487876327, "post_id": 42421284, "comment_id": 71993415, "body": "Need to get some more training on this thing, but thanks for the info."}, {"owner": {"reputation": 57, "user_id": 6816866, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0c3ae36284be856f2bac5fb220cf5974?s=128&d=identicon&r=PG&f=1", "display_name": "Maresia", "link": "https://stackoverflow.com/users/6816866/maresia"}, "edited": false, "score": 0, "creation_date": 1487879670, "post_id": 42421284, "comment_id": 71995299, "body": "Can I ask you one more question related to converting &quot;standard perl&quot; . In a dispatch table that calls 2 subs how would you approach converting the code into routes? my %data = ( more_data =&gt; sub { address( addr =&gt; $q-&gt;param(&#39;addr&#39;), ), acc( zip =&gt; $q-&gt;param(&#39;zip&#39;), ) }, );  my $process = $data{&#39;more_data&#39;}; $process-&gt;();"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 57, "user_id": 6816866, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0c3ae36284be856f2bac5fb220cf5974?s=128&d=identicon&r=PG&f=1", "display_name": "Maresia", "link": "https://stackoverflow.com/users/6816866/maresia"}, "edited": false, "score": 0, "creation_date": 1487885866, "post_id": 42421284, "comment_id": 71998789, "body": "@Maresia there is no standard Perl. All of this is Perl, it&#39;s just different frameworks. You have a CGI script now, and you want to turn it into an MVC-ish application. Think about what the application did before, and how closely you want to map that to your new application. Every entry point is one route. Everything else is business logic. If you don&#39;t have the business logic encapsulated yet, maybe doing that first in the old code is a good start. Then you can transfer it step by step. But that&#39;s getting very broad and does not fit this question."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1487867439, "creation_date": 1487867439, "answer_id": 42421284, "question_id": 42420322, "link": "https://stackoverflow.com/questions/42420322/pass-value-from-one-router-to-another-using-mojoliciouslite/42421284#42421284", "title": "Pass value from one router to another using Mojolicious::Lite", "body": "<p>You need to look up the routes through your <a href=\"https://metacpan.org/pod/Mojolicious::Routes#lookup\" rel=\"nofollow noreferrer\">Mojolicious::Routes</a> object inside of your <code>app</code>. The name for the <code>lookup</code> is auto-generated by Mojolicious::Lite from the path-part of the URI, so <code>/process_name</code> has the name <code>process_name</code>.</p>\n\n<p>You get back a <a href=\"https://metacpan.org/pod/Mojolicious::Routes::Route#render\" rel=\"nofollow noreferrer\">Mojolicious::Routes::Route</a>, which has a <code>render</code> method and you can pass your parameters along there.</p>\n\n<pre><code>use Mojolicious::Lite;\n\nget '/foundname' =&gt; sub {\n    my $c = shift;\n\n    my $name_on = $c-&gt;req-&gt;query_params-&gt;param('name');\n\n    if( $name_on ) {\n        my $process_name = app-&gt;routes-&gt;lookup('process_name')-&gt;render( { searched =&gt; $name_on } );\n        $c-&gt;render( text =&gt; $process_name );\n    }\n};\n\nget '/process_name' =&gt; sub {\n   my $c = shift;\n   my $got_name = $c-&gt;req-&gt;query_params-&gt;param('searched');\n\n   $c-&gt;render( text =&gt; $got_name );\n};\n\napp-&gt;start;\n</code></pre>\n\n<p>When you curl this you get the parameter back as a response.</p>\n\n<pre><code>$ curl localhost:3000/foundname?name=foo\n/process_name\n</code></pre>\n\n<hr>\n\n<p>However, this is probably not the right approach. If you want to implement business logic, you should not use internal or hidden routes for that. Remember that your application is still just Perl. You can write a <code>sub</code> and call that.</p>\n\n<pre><code>use Mojolicious::Lite;\n\nget '/foundname' =&gt; sub {\n    my $c = shift;\n\n    my $name_on = $c-&gt;req-&gt;query_params-&gt;param('name');\n\n    if( $name_on ) {\n        my $got_name = process_name( $name_on );\n        $c-&gt;render( text =&gt; $got_name );\n    }\n};\n\nsub process_name {\n    my ( $got_name ) = @_;\n\n    # do stuff with $got_name\n\n    return uc $got_name;\n};\n\napp-&gt;start;\n</code></pre>\n\n<p>This will output</p>\n\n<pre><code>$ curl localhost:3000/foundname?name=foo\nFOO\n</code></pre>\n\n<p>It's the more portable approach, as you can easily unit-test these functions. If you want to have <code>$c</code>, you have to pass it along. You also have the <code>app</code> keyword available in any <code>sub</code> you define.</p>\n"}, {"tags": [], "owner": {"reputation": 14762, "user_id": 282475, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/OZWIJ.jpg?s=128&g=1", "display_name": "shaneburgess", "link": "https://stackoverflow.com/users/282475/shaneburgess"}, "is_accepted": false, "score": 0, "last_activity_date": 1488149749, "last_edit_date": 1495541376, "creation_date": 1488149749, "answer_id": 42475261, "question_id": 42420322, "link": "https://stackoverflow.com/questions/42420322/pass-value-from-one-router-to-another-using-mojoliciouslite/42475261#42475261", "title": "Pass value from one router to another using Mojolicious::Lite", "body": "<p>For the original question, I would use </p>\n\n<pre><code>$c-&gt;redirect_to()\n</code></pre>\n\n<p>See this question for details on passing the variable over:\n<a href=\"https://stackoverflow.com/questions/9622247/passing-arguments-to-redirect-to-in-mojolicious-and-using-them-in-the-target-con\">Passing arguments to redirect_to in mojolicious and using them in the target controller</a></p>\n\n<p>======</p>\n\n<p>But, I would look more into writing subs (as others have said).\nIf you have existing logic then you can wrap it in a helper or just toss the logic in a helper and call that.</p>\n\n<pre><code>helper('process_name'=&gt; sub{\n    my $self,$args = @_;\n\n    # Do some logic with $args-&gt;{'name'}\n    return $something;\n});\n\nget '/foundname' =&gt; sub {\n    my $c = shift;\n\n    my $name_on = $c-&gt;req-&gt;query_params-&gt;param('name');\n\n    if( $name_on ) {\n        my $process_name = $c-&gt;process_name({name =&gt; $name_on});\n        $c-&gt;render( text =&gt; $process_name );\n    }else{\n      $c-&gt;redner(text =&gt; 'Error',status=&gt;500);\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 6816866, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0c3ae36284be856f2bac5fb220cf5974?s=128&d=identicon&r=PG&f=1", "display_name": "Maresia", "link": "https://stackoverflow.com/users/6816866/maresia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1488149749, "creation_date": 1487864893, "question_id": 42420322, "link": "https://stackoverflow.com/questions/42420322/pass-value-from-one-router-to-another-using-mojoliciouslite", "title": "Pass value from one router to another using Mojolicious::Lite", "body": "<p>from an ajax form this router foundname gets called, I need to process the value and pass it to another router, I can't figured it out how to do it, here is a sample of how I am trying:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse Mojolicious::Lite;\n\nget '/foundname' =&gt; sub {\n\n  my $c = shift;\n  # Here I get the value from the form\n  my $name_on = $c-&gt;req-&gt;query_params-&gt;param('name');\n\n  if($name_on) {\n    # call another router and pass the name value to it\n    # It gives an error \"Can't locate object method \"get\" \", I might not need to use \"get\", just don't know how to pass the value.\n    $c-&gt;get('/process_name')-&gt;to( searched =&gt; $name_on);\n   }\n\n};\n\n get '/process_name' =&gt; sub {\n\n   my $c = shift;\n   my $got_name = $c-&gt;req-&gt;query_params-&gt;param('searched');\n   ...\n };\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1487862351, "post_id": 42419365, "comment_id": 71984079, "body": "<a href=\"http://perldoc.perl.org/perlfaq1.html#What&#39;s-the-difference-between-%22perl%22-and-%22Perl%22%3f\" rel=\"nofollow noreferrer\">perldoc.perl.org/&hellip;</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1487862779, "post_id": 42419365, "comment_id": 71984416, "body": "Tip: <code>my $id = $row[0]; my $hash = $row[1];</code> can be written as <code>my ($id, $hash) = @row;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1487862831, "post_id": 42419365, "comment_id": 71984466, "body": "Tip: <code>opendir</code> is fairly likely to fail, so adding at least a minimal <code>or die $!</code> can be useful."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1487862387, "creation_date": 1487862387, "answer_id": 42419420, "question_id": 42419365, "link": "https://stackoverflow.com/questions/42419365/script-to-move-files-wont-work-in-perl/42419420#42419420", "title": "Script to move files won&#39;t work in Perl", "body": "<p>Check the code:</p>\n\n<pre><code>my $from = $output_direction . \"/\" . \"$file\";\nmove($from, $output_direction);\n</code></pre>\n\n<p>You probably wanted to use <code>$input_direction</code> on the former line.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1487862571, "creation_date": 1487862571, "answer_id": 42419490, "question_id": 42419365, "link": "https://stackoverflow.com/questions/42419365/script-to-move-files-wont-work-in-perl/42419490#42419490", "title": "Script to move files won&#39;t work in Perl", "body": "<pre><code>my $from = $output_direction . \"/\" . \"$file\";\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>my $from = $input_direction. \"/\" . \"$file\";\n</code></pre>\n\n<p>Better yet:</p>\n\n<pre><code>my $from = $input_direction. \"/\" . $file;\n</code></pre>\n"}], "owner": {"reputation": 2964, "user_id": 4485955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d31f821e9c645e34ff7ee6f729843076?s=128&d=identicon&r=PG&f=1", "display_name": "prgrm", "link": "https://stackoverflow.com/users/4485955/prgrm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 42419490, "answer_count": 2, "score": 0, "last_activity_date": 1487862645, "creation_date": 1487862249, "last_edit_date": 1487862645, "question_id": 42419365, "link": "https://stackoverflow.com/questions/42419365/script-to-move-files-wont-work-in-perl", "title": "Script to move files won&#39;t work in Perl", "body": "<p>I have this script to move files but it keeps saying that the files are identical and therefore they cannot be written</p>\n\n<pre><code>while (my @row = $sth-&gt;fetchrow_array) {\n    my $id = $row[0];\n    my $hash = $row[1];\n    my $input_direction = '/home/input/' . $hash;\n    my $output_direction = '/var/storage/'.$id;\n\n    opendir(my $dir, $input_direction);\n\n    while(my $file = readdir $dir){\n        next if ($file eq \".\" or $file eq \"..\");\n        my $from = $output_direction . \"/\" . \"$file\";\n        move($from, $output_direction);\n    }\n}\n</code></pre>\n\n<p>Here are the errors:</p>\n\n<pre><code>'/var/storage/5/.bashrc' and '/var/storage/5/.bashrc' are identical (not copied) at Move_Files.pl line 38.\nUse of uninitialized value $atime in utime at /usr/share/perl5/File/Copy.pm line 393.\nUse of uninitialized value $mtime in utime at /usr/share/perl5/File/Copy.pm line 393.\n</code></pre>\n\n<p>This repeats itself a few times with each file and nothing gets copies.</p>\n\n<p>Any idea?</p>\n"}, {"tags": ["mysql", "perl", "csv", "dbi"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1487862315, "post_id": 42419295, "comment_id": 71984056, "body": "You are never telling Text::CSV to write to <code>$FH</code>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1487863676, "post_id": 42419295, "comment_id": 71985053, "body": "If you&#39;re not actually manipulating the data with Perl, you can dump query results to CSV directly with MySQL using <a href=\"https://dev.mysql.com/doc/refman/5.7/en/select-into.html\" rel=\"nofollow noreferrer\"><code>SELECT ... INTO OUTFILE</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 7611688, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/575079da403f0c1cf947d5a5daf22779?s=128&d=identicon&r=PG&f=1", "display_name": "B. Juice", "link": "https://stackoverflow.com/users/7611688/b-juice"}, "edited": false, "score": 0, "creation_date": 1487866321, "post_id": 42419485, "comment_id": 71987106, "body": "Thanks for the guidance! This is now working as I anticipated."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1487862923, "last_edit_date": 1487862923, "creation_date": 1487862557, "answer_id": 42419485, "question_id": 42419295, "link": "https://stackoverflow.com/questions/42419295/issue-with-using-csv-xs-and-dbi-in-perl-to-write-sql-query-results/42419485#42419485", "title": "Issue with using CSV_XS and DBI in Perl to write SQL query results", "body": "<h2>Writing to the file</h2>\n\n<p>You need to tell Text::CSV_XS that it should write to your file.</p>\n\n<pre><code>if ($csv-&gt;combine(@row)) {\n   print $csv-&gt;string;\n}\n</code></pre>\n\n<p>This prints to the screen. Instead, print to <code>$FH</code>.</p>\n\n<pre><code>if ($csv-&gt;combine(@row)) {\n   print $FH $csv-&gt;string;\n}\n</code></pre>\n\n<p>It's probably better to use <a href=\"https://metacpan.org/pod/Text::CSV_XS#print\" rel=\"nofollow noreferrer\"><code>$csv-&gt;print</code></a> directly as that is more efficient.</p>\n\n<pre><code>$csv-&gt;print($FH, \\@row);\n</code></pre>\n\n<p>In that case, <code>error_input</code> is <code>undef</code> so you can't use it for displaying debugging information.</p>\n\n<h2>Removing double quotes</h2>\n\n<p>I don't think those come from the database. You set your <code>escape_char</code> to <code>\"</code>, and the data contains a comma <code>,</code>, so Text::CSV_XS correctly adds quotes around the value. If you don't want that, but actually want to treat the value in <code>$row[2]</code> like multiple values, <code>split</code> it on comma.</p>\n\n<pre><code>while (my @row = $sth-&gt;fetchrow_array) {\n    $csv-&gt;print($FH, [ @row[0, 1], split /,/, $row[2] ] );\n}\n</code></pre>\n\n<p>The <code>@row[1, 2]</code> is an array slice. It's the same as saying <code>$row[0], $row[1]</code>.</p>\n"}], "owner": {"reputation": 51, "user_id": 7611688, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/575079da403f0c1cf947d5a5daf22779?s=128&d=identicon&r=PG&f=1", "display_name": "B. Juice", "link": "https://stackoverflow.com/users/7611688/b-juice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 42419485, "answer_count": 1, "score": 1, "last_activity_date": 1487862923, "creation_date": 1487862063, "question_id": 42419295, "link": "https://stackoverflow.com/questions/42419295/issue-with-using-csv-xs-and-dbi-in-perl-to-write-sql-query-results", "title": "Issue with using CSV_XS and DBI in Perl to write SQL query results", "body": "<p>I'm attempting to use the following Perl script to write the results of a SQL query to a CSV file:</p>\n\n<pre><code>#!/usr/bin/perl\n#\nuse DBI;\nuse Text::CSV_XS;\nuse strict;\n\nmy $dbh = DBI-&gt;connect('DBI:mysql:dbname', 'username', 'password') ||\n    die \"Cannot connect to database\\n\", $DBI::errstr;\n\nmy $sth = $dbh-&gt;prepare(\"SELECT g.factGroupName, b.CI, a.Config\n                    FROM alpha a\n                    INNER JOIN beta b ON a.TypeId = b.MetricType\n                    INNER JOIN gamma g ON g.factGroupId = b.Factgroup\n                    WHERE a.ToolName = 2 AND a.TypeName = 'inputs.conf' AND a.Deploy = 'Y'\");\n$sth-&gt;execute || die \"failed to execute:\\n \", $DBI::errstr;\n\n\nmy $csv = Text::CSV_XS-&gt;new({ 'quote_char'  =&gt; '\"',\n                       'escape_char' =&gt; '\"',\n                       'sep_char'    =&gt; ',',\n                       'binary'      =&gt; 0,\n                       'eol'         =&gt; \"\\r\\n\"\n                     });\n\nopen (my $FH, '&gt;', '/home/XXXXX/inputs.csv') || die \"Cannot open file\\n\";\n\nwhile (my @row = $sth-&gt;fetchrow_array) {\n  if ($csv-&gt;combine(@row)) {\n    print $csv-&gt;string;\n  } else {\nmy $err = $csv-&gt;error_input;\nprint \"combine() failed on argument: \", $err, \"\\r\\n\";\n  }\n}\n\nclose $FH;\n\n$dbh-&gt;disconnect;\n</code></pre>\n\n<p>When I execute the script, this is the output I receive on my display:</p>\n\n<pre><code>oem,/opt/oracle/product/gc_inst1/em/EMGC_OMS*/sysman/log/emctl.log,\"sourcetype=servicelog2,index=oem_prod\"\noem,/opt/oracle/product/gc_inst1/em/EMGC_OMS*/sysman/log/emoms.log,\"sourcetype=servicelog2,index=oem_prod\"\noem,/opt/oracle/product/gc_inst1/user_projects/domains/GCDomain/servers/EMGC_OMS*/logs/EMGC_OMS*.log,\"sourcetype=Bealog,index=oem_prod\"\n</code></pre>\n\n<p>Only problem is, it's not writing to the inputs.csv that I cited in the script; that file exists in the given directory, but has a filesize of zero. </p>\n\n<p>The other issue is that the third field (\"a.Config\") being returned in each line of output has double quotes that I'd like to remove before it's written to the CSV file. The field contains two strings separated by a comma, and is stored using a GLOB configuration in the MySQL database with no quotes used; my guess is that the DBI query is adding the double quotes as part of its operation.</p>\n\n<p>Any assistance would be greatly appreciated!</p>\n"}, {"tags": ["macos", "perl", "nginx"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1487861641, "post_id": 42418812, "comment_id": 71983512, "body": "You don&#39;t use any http_perl_module features???"}], "answers": [{"comments": [{"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "edited": false, "score": 0, "creation_date": 1487862054, "post_id": 42419206, "comment_id": 71983843, "body": "If I enable that line, it gives: 502 Bad Gateway so I disabled that line."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "edited": false, "score": 0, "creation_date": 1487862221, "post_id": 42419206, "comment_id": 71983978, "body": "Is your FCGI daemon running? Is it listening at <code>127.0.0.1:8999</code>? Or did you stop halfway through the <a href=\"http://nginxlibrary.com/perl-fastcgi/\" rel=\"nofollow noreferrer\">instructions</a>. Or if the daemon is running, it could be that your script isn&#39;t sending a response (in which case you should check the fcgi damon&#39;s error log)."}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "edited": false, "score": 0, "creation_date": 1488148236, "post_id": 42419206, "comment_id": 72090496, "body": "I tried to run FCGI daemon by entering ./perl-fcgi start but it returned: Can&#39;t load &#39;/Users/&lt;shortened&gt;/darwin-2level/auto/FCGI/FCGI.bundle&#39; for module FCGI: &lt;...&gt; Symbol not found: _PL_curcop &lt;...&gt; Compilation failed in require at /usr/bin/fastcgi-wrapper.pl line 4. I installed FCGI with cpanm so it&#39;s up to date. (0.78)"}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "edited": false, "score": 0, "creation_date": 1489955482, "post_id": 42419206, "comment_id": 72885016, "body": "Hello, the problem turned out to be the missing daemon called fastcgi-wrapper.pl as stated on the instructions page you&#39;ve given. I&#39;ve installed a shell script called perl-fcgi on nginx folder and the fastcgi-wrapper.pl on /usr/bin and nginx works with perl now. Problem&#39;s solved but if you only post an updated answer I can select it as the solution. Thanks."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "edited": false, "score": 0, "creation_date": 1489956276, "post_id": 42419206, "comment_id": 72885293, "body": "I can&#39;t add it to my Answer because that&#39;s not the solution the Question you posted; that&#39;s the solution to the question you asked in the comments. As for the question you asked in the comments, I answered it almost a month ago. As you just confirmed now, the problem was that you hadn&#39;t followed the <a href=\"http://nginxlibrary.com/perl-fastcgi/\" rel=\"nofollow noreferrer\">instructions</a> all the way through."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1489956458, "last_edit_date": 1489956458, "creation_date": 1487861808, "answer_id": 42419206, "question_id": 42418812, "link": "https://stackoverflow.com/questions/42418812/nginx-with-http-perl-module-doesnt-execute-perl-scripts-just-downloads-them/42419206#42419206", "title": "nginx with http_perl_module doesn&#39;t execute perl scripts just downloads them", "body": "<p>The scripts are being sent to the browser because that's the default manner in which request files are handled, and you don't override this (say by using <code>fastcgi_pass</code>). Please follow the <a href=\"http://nginxlibrary.com/perl-fastcgi/\" rel=\"nofollow noreferrer\">instructions</a>.</p>\n"}], "owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 866, "favorite_count": 1, "accepted_answer_id": 42419206, "answer_count": 1, "score": 0, "last_activity_date": 1489956458, "creation_date": 1487860812, "question_id": 42418812, "link": "https://stackoverflow.com/questions/42418812/nginx-with-http-perl-module-doesnt-execute-perl-scripts-just-downloads-them", "title": "nginx with http_perl_module doesn&#39;t execute perl scripts just downloads them", "body": "<p>On my Mac OSX 10.7.4 with Perlbrew's Perl-5.16.0 I have this <strong>nginx.conf</strong>:</p>\n\n<pre><code>server {\n   listen 1234;\n   server_name MyPHPPerlServer;\n   root \"/Library/WebServer/servdir\"; \n\nlocation / {\nfancyindex on;\n}\n\nlocation ~ \\.php$ {\n         fastcgi_pass  127.0.0.1:9000;\n         fastcgi_index index.php;\n         fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;\n         include fastcgi_params;\n         }\n\nlocation ~ \\.pl$ {\n         try_files $uri =404;\n         gzip off;\n     #fastcgi_pass  127.0.0.1:8999;\n         fastcgi_index index.pl;\n         fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;\n         include fastcgi_params;\n         } \n}\n</code></pre>\n\n<p>For this configuration to run the PHP scripts, I compiled and ran  <code>php-fpm</code>, and it runs PHP fine now. </p>\n\n<p>To run the Perl scripts, I compiled nginx with\n<code>./configure --add-module=../ngx-fancyindex --with-http_perl_module</code> and nginx runs fine with this configuration but when I browse to <code>http://localhost:1234/index.pl</code> it doesn't execute the Perl script, it just downloads it. </p>\n\n<p>As a check, I shut down the nginx and start Apache with the <strong>cgi_module</strong> on and it runs the index.pl perfectly.</p>\n\n<p>What should I do to make nginx run the Perl scripts? Thank you.</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1487857527, "post_id": 42417407, "comment_id": 71980241, "body": "Good job using <code>strict</code>! :)"}], "answers": [{"tags": [], "owner": {"reputation": 3086, "user_id": 874748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12b78d49d360733968a5287a190a9f6e?s=128&d=identicon&r=PG", "display_name": "Russell Shingleton", "link": "https://stackoverflow.com/users/874748/russell-shingleton"}, "is_accepted": true, "score": 5, "last_activity_date": 1487857340, "creation_date": 1487857340, "answer_id": 42417451, "question_id": 42417407, "link": "https://stackoverflow.com/questions/42417407/checking-if-a-directory-exists-with-perl/42417451#42417451", "title": "Checking if a directory exists with Perl", "body": "<pre><code>my $direction = '/home/users/' . $hash\n</code></pre>\n\n<p>This line is missing a semi-colon, causing a compile error.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1487857852, "creation_date": 1487857852, "answer_id": 42417669, "question_id": 42417407, "link": "https://stackoverflow.com/questions/42417407/checking-if-a-directory-exists-with-perl/42417669#42417669", "title": "Checking if a directory exists with Perl", "body": "<p>If you ever get a syntax error at the start of the BLOCK (<code>near \") {\"</code>) of an <code>if</code>, <code>unless</code>, <code>while</code>, <code>until</code>, <code>for</code>, <code>foreach</code> or <code>when</code> statement, check if the previous statement is missing its semi-colon (<code>;</code>).</p>\n\n<p>Similarly, if you ever get a syntax error at the semi-colon (<code>near \"&lt;something&gt;;\"</code>) of a C-style for statement (<code>for (...; ...; ...;) { ... }</code>), check if the previous statement is missing its semi-colon (<code>;</code>).</p>\n\n<hr>\n\n<p>If you mean to write</p>\n\n<pre><code>f();\nif (g()) { h() }\n</code></pre>\n\n<p>but you write</p>\n\n<pre><code>f()\nif (g()) { h() }\n</code></pre>\n\n<p>Perl thinks you're missing a semi-colon before the BLOCK</p>\n\n<pre><code>f()\nif (g()) HERE { h() }\n</code></pre>\n\n<p>because the following is valid Perl:</p>\n\n<pre><code>f() if (g())\n</code></pre>\n"}], "owner": {"reputation": 2964, "user_id": 4485955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d31f821e9c645e34ff7ee6f729843076?s=128&d=identicon&r=PG&f=1", "display_name": "prgrm", "link": "https://stackoverflow.com/users/4485955/prgrm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 598, "favorite_count": 0, "accepted_answer_id": 42417451, "answer_count": 2, "score": 0, "last_activity_date": 1487861596, "creation_date": 1487857233, "last_edit_date": 1487861596, "question_id": 42417407, "link": "https://stackoverflow.com/questions/42417407/checking-if-a-directory-exists-with-perl", "title": "Checking if a directory exists with Perl", "body": "<p>I am trying to check if a directory exists in a UNIX system with Perl.</p>\n\n<pre><code>while (my @row = $sth-&gt;fetchrow_array) {\n    my $id = $row[0];\n    my $hash = $row[1];\n    my $direction = '/home/users/' . $hash\n\n    if(-d $direction){\n        print \"$direction exists\";\n    }\n\n}\n</code></pre>\n\n<p>But I get this error:</p>\n\n<blockquote>\n  <p>Global symbol \"$direction\" requires explicit package name at\n  Perl.pl line 31. syntax error at Perl.pl line 31, near\n  \"){\" syntax error at Perl.pl line 35, near \"}\" Execution of\n  Perl.pl aborted due to compilation errors.</p>\n</blockquote>\n\n<p>Line 31 in this case is:</p>\n\n<pre><code>if(-d $direction)\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["linux", "bash", "perl", "shell"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1487854588, "post_id": 42416253, "comment_id": 71978012, "body": "And what happens if you remove the <code>cd</code> line?"}, {"owner": {"reputation": 177, "user_id": 5334665, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/47230cd899a7f56d69da94747fe6990c?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/5334665/jakub"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1487854893, "post_id": 42416253, "comment_id": 71978221, "body": "If I do so, then &quot;perl DisplayGroupedByArtist.pl&quot; is not going to work at all, returning &quot;Can&#39;t open perl script &quot;DisplayGroupedByArtist.pl&quot;: No such file or directory&quot;."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1487854982, "post_id": 42416253, "comment_id": 71978285, "body": "Fix the path to the script, then. <code>perl &quot;$(dirname &quot;$0&quot;)&quot;&#47;DisplayGroupedByArtist.pl &quot;$@&quot;</code>."}, {"owner": {"reputation": 177, "user_id": 5334665, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/47230cd899a7f56d69da94747fe6990c?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/5334665/jakub"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1487855320, "post_id": 42416253, "comment_id": 71978543, "body": "Unfortunately - doesn&#39;t fix the problem. Still the exact same behaviour."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1487855386, "post_id": 42416253, "comment_id": 71978587, "body": "Which behaviour? No such file or directory, or not finding the files?"}, {"owner": {"reputation": 177, "user_id": 5334665, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/47230cd899a7f56d69da94747fe6990c?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/5334665/jakub"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1487855428, "post_id": 42416253, "comment_id": 71978628, "body": "Not finding the files - acts exactly the same as with cd line."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1487855537, "post_id": 42416253, "comment_id": 71978710, "body": "It&#39;s the shell that expands wildcards, so you must use the correct path to the files. Otherwise, the shell won&#39;t expand them, and Perl will see the asterisk. If you want to expand a wildcard in Perl, see <a href=\"http://p3rl.org/glob\" rel=\"nofollow noreferrer\">glob</a>."}, {"owner": {"reputation": 177, "user_id": 5334665, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/47230cd899a7f56d69da94747fe6990c?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/5334665/jakub"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1487855673, "post_id": 42416253, "comment_id": 71978823, "body": "Thank you for the link. But what I don&#39;t get is - why does it work with no issues, expanding the asterisk and passing files to Perl, if I execute the bash script from its directory and doesn&#39;t work in the case I explained in my post..."}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1487856010, "post_id": 42416253, "comment_id": 71979062, "body": "The <code>bash</code> script never sees <code>*.mp3</code> if the pattern matches; it sees the list of files that <code>*.mp3</code> expands <i>to</i> after the calling shell processes it."}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 5334665, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/47230cd899a7f56d69da94747fe6990c?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/5334665/jakub"}, "edited": false, "score": 0, "creation_date": 1487855157, "post_id": 42416568, "comment_id": 71978408, "body": "The problem is... my teacher expects the script to work exactly the same in both situations:  test/bash_script.sh *.mp3  and  cd test bash_script.sh *.mp3"}, {"owner": {"reputation": 396, "user_id": 172627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e4f593c295278eb258729579ccbbf0?s=128&d=identicon&r=PG", "display_name": "Steven", "link": "https://stackoverflow.com/users/172627/steven"}, "edited": false, "score": 1, "creation_date": 1487855553, "post_id": 42416568, "comment_id": 71978723, "body": "Are you sure? This is standard unix behaviour. Your teacher may be assuming this is equivalent."}, {"owner": {"reputation": 177, "user_id": 5334665, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/47230cd899a7f56d69da94747fe6990c?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/5334665/jakub"}, "edited": false, "score": 0, "creation_date": 1487855813, "post_id": 42416568, "comment_id": 71978934, "body": "Unfortunately I am... He sent me a message saying that he wants to run it like: test/bash_script.sh *.mp3 and expects it to list mp3 files from test directory."}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1487855908, "post_id": 42416568, "comment_id": 71978998, "body": "Then you need to either quote the pattern and have your <code>bash</code> script concatenate it with the correct directory and expand it (which, frankly, is not something you can safely do in <code>bash</code>), or pass the concatenated directory/pattern to the Perl script (which does have a function for expanding a glob). <code>test&#47;bash_script &#39;*.mp3&#39;</code>."}, {"owner": {"reputation": 177, "user_id": 5334665, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/47230cd899a7f56d69da94747fe6990c?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/5334665/jakub"}, "edited": false, "score": 0, "creation_date": 1487856366, "post_id": 42416568, "comment_id": 71979321, "body": "Thank you for the reply. The main problem here though is the fact that if I run the script like <code>bash_script.sh *.mp3</code> - it passes the file list to Perl script with no issues, whilst if I execute it like <code>test&#47;bash_script.sh *.mp3</code>, the value passed to Perl is simply a string &quot;*.mp3&quot;, not a list of files."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 177, "user_id": 5334665, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/47230cd899a7f56d69da94747fe6990c?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/5334665/jakub"}, "edited": false, "score": 0, "creation_date": 1487857565, "post_id": 42416568, "comment_id": 71980274, "body": "@Jakub: That&#39;s because before running the command, shell tries to expand the wildcards."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1487859716, "post_id": 42416568, "comment_id": 71981972, "body": "Re &quot;<i>the value passed to Perl is simply a string &quot;</i>.mp3&quot;, not a list of files*&quot;, Exactly. You don&#39;t want to pass a list of files to <code>glob</code>."}], "tags": [], "owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 1, "last_activity_date": 1487855042, "creation_date": 1487855042, "answer_id": 42416568, "question_id": 42416253, "link": "https://stackoverflow.com/questions/42416253/passing-filename-arguments-from-bash-to-perl/42416568#42416568", "title": "Passing filename arguments from Bash to Perl", "body": "<p>You have to adjust the argument; <code>Samples/*.mp3</code> is relative to where the script is called <em>from</em>, not to the location of the script.</p>\n\n<pre><code>tests/bash_script.sh ../Samples/*.mp3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 0, "last_activity_date": 1487858683, "creation_date": 1487858683, "answer_id": 42417986, "question_id": 42416253, "link": "https://stackoverflow.com/questions/42416253/passing-filename-arguments-from-bash-to-perl/42417986#42417986", "title": "Passing filename arguments from Bash to Perl", "body": "<p>This is not a Perl problem, but a problem of the calling shell. Assuming that your shell is bash (but note that your teacher's shell might be something differently), a wild card pattern such as Samples/*.mp3 is usually expanded by the shell into a list of files; now what exactly happens if no file matches the pattern, depends on the shell and how it is configured. For example, the default in bash is that the string representing a pattern is passed unchanged to the application, but the shell could also be configured so that the pattern is simply removed, or that an error message is printed. </p>\n\n<p>You have no idea how the teacher's shell is configured, and if your teacher uses a different shell from bash, the behaviour might even be different.</p>\n\n<p>When you define an interface to a program, you never specify \"how it is typed in the calling shell\", because this doesn't mean much. You specify, what parameters the program accepts (i.e. the contents of ARGV) and how the these parameters affect the execution of the program. What the caller (yourself, or the teacher) exactly has to type so that your program receives the arguments in the correct form, is <strong>not</strong> part of an interface specification.</p>\n\n<p>For example, you can allow relative pathes to be passed, and define a search order where to look for the files. You can also allow that the strings passed to your command contain wildcards. You can even allow regular expressions or what else comes to your mind, but never forget: You have no access to the sequence of characters, which the caller has actually typed, so you can't do any interpretation on them.</p>\n"}], "owner": {"reputation": 177, "user_id": 5334665, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/47230cd899a7f56d69da94747fe6990c?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/5334665/jakub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487858683, "creation_date": 1487854218, "last_edit_date": 1487856590, "question_id": 42416253, "link": "https://stackoverflow.com/questions/42416253/passing-filename-arguments-from-bash-to-perl", "title": "Passing filename arguments from Bash to Perl", "body": "<p>I'm working on my University assignment and I've stumbled upon an issue I can't fix by myself, perhaps somebody here will be able to help, since I'm out of ideas...</p>\n\n<p>I have to pass filenames specified as a list of arguments passed to my main script (Bash) and later process these files in another script (Perl).</p>\n\n<p>This is how I am doing it in Bash:</p>\n\n<pre><code>perl DisplayGroupedByArtist.pl \"$@\"\n</code></pre>\n\n<p>Then in perl I iterate over the files like that:</p>\n\n<pre><code>my @files = @ARGV;\nforeach $file (@files)\n{\n  #some stuff here\n}\n</code></pre>\n\n<p>The problem is - it's working just fine as long as I don't invoke the script from outside the directory.</p>\n\n<pre><code>test/bash_script.sh Samples/*.mp3\n</code></pre>\n\n<p>Then, instead of something like \"Samples/01 Lycia - Frozen.mp3 Samples/01 Slowdive - Alison.mp3 Samples/01 The Cure - Plainsong.mp3\", the value passed to my Perl script is simply \"Samples/*.mp3\".</p>\n\n<p>I guess it's worth mentioning that in my Bash script I have this line to ensure that I'm invoking Perl script from the correct directory:</p>\n\n<pre><code>cd \"$(dirname \"$0\")\"\n</code></pre>\n\n<p><strong>Update:</strong>\nTo make things clear: The main problem here is the fact that if I run the script like <code>bash_script.sh *.mp3</code> - it passes the file list to Perl script with no issues, whilst if I execute it like <code>test/bash_script.sh *.mp3</code>, the value passed to Perl is simply a string \"*.mp3\", not a list of files. </p>\n"}, {"tags": ["perl", "loops"], "comments": [{"owner": {"reputation": 95, "user_id": 7522582, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ogQgj.png?s=128&g=1", "display_name": "yankel", "link": "https://stackoverflow.com/users/7522582/yankel"}, "edited": false, "score": 0, "creation_date": 1487853843, "post_id": 42416069, "comment_id": 71977445, "body": "Afterwards there is still in target services      DB&lt;3&gt; x @target_services     0  3400000000000011"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1487853870, "post_id": 42416069, "comment_id": 71977466, "body": "<code>shift @target_services</code>: never modify the size of the array you iterate over."}, {"owner": {"reputation": 95, "user_id": 7522582, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ogQgj.png?s=128&g=1", "display_name": "yankel", "link": "https://stackoverflow.com/users/7522582/yankel"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1487853937, "post_id": 42416069, "comment_id": 71977510, "body": "yes it does, it takes out the left most item?? that&#39;s what shift does...?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1487854013, "post_id": 42416069, "comment_id": 71977566, "body": "How can it loop over something that&#39;s not there anymore?"}, {"owner": {"reputation": 396, "user_id": 172627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e4f593c295278eb258729579ccbbf0?s=128&d=identicon&r=PG", "display_name": "Steven", "link": "https://stackoverflow.com/users/172627/steven"}, "edited": false, "score": 0, "creation_date": 1487854101, "post_id": 42416069, "comment_id": 71977651, "body": "<code>my $ts_id  = shift @target_services;</code> this removes the first element of the array. So there is no second element to loop over"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 8, "last_activity_date": 1487855240, "last_edit_date": 1487855240, "creation_date": 1487854142, "answer_id": 42416222, "question_id": 42416069, "link": "https://stackoverflow.com/questions/42416069/perl-quits-loop-early/42416222#42416222", "title": "perl quits loop early", "body": "<p>It's documented in <a href=\"http://p3rl.org/perlsyn\" rel=\"noreferrer\">perlsyn</a>:</p>\n\n<blockquote>\n  <p>If any part of LIST is an array, <code>foreach</code> will get very confused if you add or remove elements within the loop body, for example with <code>splice</code>.   So don't do that.</p>\n</blockquote>\n\n<p>That's exactly what you did:</p>\n\n<pre><code>foreach my $i (@target_services){\n    # ...\n    my $ts_id  = shift @target_services;\n</code></pre>\n\n<p>Instead use</p>\n\n<pre><code>foreach my $ts_id (@target_services){\n    # ...\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 7522582, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ogQgj.png?s=128&g=1", "display_name": "yankel", "link": "https://stackoverflow.com/users/7522582/yankel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 42416222, "answer_count": 1, "score": 0, "last_activity_date": 1487855240, "creation_date": 1487853721, "question_id": 42416069, "link": "https://stackoverflow.com/questions/42416069/perl-quits-loop-early", "title": "perl quits loop early", "body": "<p>my program has 2 variables in the target_services array</p>\n\n<pre><code>DB&lt;1&gt; x @target_services\n0  3400000000000012\n1  3400000000000011\n</code></pre>\n\n<p>this is the code it hits</p>\n\n<pre><code> foreach my $i (@target_services){\n        my $vl    = shift @values  || \"\";\n        my $dp    = shift @descriptions || \"\";\n        my $ts_id  = shift @target_services;\n        my $lp    = shift @lp_values;\n        if (get_lp($ts_id,$lp) eq 'YES'){\n            print \"ts id $ts_id already has $lp LP. Aborting addition of this LP for this TS\\n\";\n            next;\n        }\n        my $temp_query = $sql3;\n        $temp_query =~ s/TS/$ts_id/;\n        $temp_query =~ s/LP/$lp/;\n        $temp_query =~ s/VL/$vl/;\n        $temp_query =~ s/DP/$dp/;\n        my $sth3 = get_sth($temp_query);\n        $count_lps+=$sth3-&gt;get_count();\n        $count_ts++;\n    }\n</code></pre>\n\n<p>the debugger implies that it goes through the loop once, gets to the next; and then jumps to my print statement. and never goes through the loop a second time.</p>\n\n<p>please explain why this is</p>\n"}, {"tags": ["sql-server", "database", "perl", "odbc", "special-characters"], "comments": [{"owner": {"reputation": 9919, "user_id": 599180, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/afdc79c6e1d9fe76cd075fb1cf50f15f?s=128&d=identicon&r=PG", "display_name": "Sean B", "link": "https://stackoverflow.com/users/599180/sean-b"}, "edited": false, "score": 0, "creation_date": 1487853272, "post_id": 42414609, "comment_id": 71977037, "body": "Is your sql table field nvarchar?  If not, try that."}, {"owner": {"reputation": 396, "user_id": 172627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e4f593c295278eb258729579ccbbf0?s=128&d=identicon&r=PG", "display_name": "Steven", "link": "https://stackoverflow.com/users/172627/steven"}, "edited": false, "score": 0, "creation_date": 1487853329, "post_id": 42414609, "comment_id": 71977072, "body": "Can you show your code?"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 9919, "user_id": 599180, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/afdc79c6e1d9fe76cd075fb1cf50f15f?s=128&d=identicon&r=PG", "display_name": "Sean B", "link": "https://stackoverflow.com/users/599180/sean-b"}, "edited": false, "score": 0, "creation_date": 1487853739, "post_id": 42414609, "comment_id": 71977357, "body": "@SeanB Yep. My sql table is <code>nvarchar</code> type only."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1487863447, "post_id": 42414609, "comment_id": 71984899, "body": "What character encoding does the table and/or database have?"}, {"owner": {"reputation": 1530, "user_id": 2264956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5a7410a06675e9d42a06e2e3a74c3dae?s=128&d=identicon&r=PG", "display_name": "erg", "link": "https://stackoverflow.com/users/2264956/erg"}, "edited": false, "score": 0, "creation_date": 1488276673, "post_id": 42414609, "comment_id": 72149295, "body": "What is the encoding of the content of the variable $name?"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 1530, "user_id": 2264956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5a7410a06675e9d42a06e2e3a74c3dae?s=128&d=identicon&r=PG", "display_name": "erg", "link": "https://stackoverflow.com/users/2264956/erg"}, "edited": false, "score": 0, "creation_date": 1488276871, "post_id": 42414609, "comment_id": 72149429, "body": "@erg For example, <code>J&#228;rjest&#246;myyr&#228;</code> this is content of <code>$name</code>"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1488276906, "post_id": 42414609, "comment_id": 72149456, "body": "@ChrisTurner It is UTF8 ."}], "answers": [{"tags": [], "owner": {"reputation": 1530, "user_id": 2264956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5a7410a06675e9d42a06e2e3a74c3dae?s=128&d=identicon&r=PG", "display_name": "erg", "link": "https://stackoverflow.com/users/2264956/erg"}, "is_accepted": false, "score": 0, "last_activity_date": 1488278887, "last_edit_date": 1488278887, "creation_date": 1488277779, "answer_id": 42506266, "question_id": 42414609, "link": "https://stackoverflow.com/questions/42414609/how-to-insert-the-special-character-in-db/42506266#42506266", "title": "How to insert the special character in DB?", "body": "<p>Convert the utf-8 into utf-16 before inserting it into a nvarchar column.</p>\n\n<p>And back to utf-8 when reading it.</p>\n\n<p>Or use a varbinary column and store the plain utf-8 bytes in there. Storing utf-8 encoded data in a nvarchar column is wrong.</p>\n"}, {"tags": [], "owner": {"reputation": 435, "user_id": 6084558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2087d6b608bdb7ab571ce1416c5d5b61?s=128&d=identicon&r=PG&f=1", "display_name": "Venu", "link": "https://stackoverflow.com/users/6084558/venu"}, "is_accepted": false, "score": 0, "last_activity_date": 1488617238, "creation_date": 1488617238, "answer_id": 42593999, "question_id": 42414609, "link": "https://stackoverflow.com/questions/42414609/how-to-insert-the-special-character-in-db/42593999#42593999", "title": "How to insert the special character in DB?", "body": "<p>Can you try changing your code like this?</p>\n\n<pre><code>$insert_query = \"INSERT INTO table_name (name) values(?)\";\nmy $sth = $dbh-&gt;prepare($insert_query);\n$sth-&gt;bind_param(1, $name, DBI::SQL_WVARCHAR);\n$sth-&gt;execute() or $DB_Error=$DBI::errstr;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1550, "user_id": 1899439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/VRVcf.jpg?s=128&g=1", "display_name": "Marcio", "link": "https://stackoverflow.com/users/1899439/marcio"}, "is_accepted": false, "score": 0, "last_activity_date": 1488737933, "creation_date": 1488737933, "answer_id": 42612142, "question_id": 42414609, "link": "https://stackoverflow.com/questions/42414609/how-to-insert-the-special-character-in-db/42612142#42612142", "title": "How to insert the special character in DB?", "body": "<p>Convert the field to <code>utf8_unicode_ci</code></p>\n\n<p>Example: <code>ALTER TABLE t CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;</code></p>\n\n<p>Or if it is a query: </p>\n\n<pre><code>SELECT * FROM `INFORMATION_SCHEMA.COLUMNS`\nWHERE TABLE_SCHEMA = 'dbname' AND CHARACTER_SET_NAME = 'latin1'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10771, "user_id": 2427065, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/f0RVn.jpg?s=128&g=1", "display_name": "Sagar V", "link": "https://stackoverflow.com/users/2427065/sagar-v"}, "is_accepted": false, "score": 0, "last_activity_date": 1488780111, "creation_date": 1488780111, "answer_id": 42618559, "question_id": 42414609, "link": "https://stackoverflow.com/questions/42414609/how-to-insert-the-special-character-in-db/42618559#42618559", "title": "How to insert the special character in DB?", "body": "<p>From your question, It is not clear when the issue comes.</p>\n\n<p>If it is from perl, You can simply encode it using the <code>url escape function</code></p>\n\n<pre><code>use URI::Escape; \nmy $string = \"J\u00e4rjest\u00f6myyr\u00e4\";\nmy $encode = uri_escape($string); \nmy $decode = uri_unescape($encode);\n</code></pre>\n\n<p>A JavaScript alternative for preview is here </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var a=\"J\u00e4rjest\u00f6myyr\u00e4\";\r\nvar b=encodeURIComponent(a);\r\nconsole.log(\"Encode  : \"+b);\r\nconsole.log(\"Decode : \"+decodeURIComponent(b));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>If the issue is coming when you try to insert directly to DataBase,</p>\n\n<p>Then you have to alter the table structure and set the <code>CHARSET to latin1</code></p>\n\n<pre><code>ALTER TABLE table_name ALTER COLUMN name  varchar(20) COLLATE Latin1_General_CI_AS NOT NULL;\n</code></pre>\n\n<p>These links will help you with this : </p>\n\n<p>1: <a href=\"http://kunststube.net/frontback/\" rel=\"nofollow noreferrer\">http://kunststube.net/frontback/</a><br>\n2: <a href=\"https://msdn.microsoft.com/en-us/library/ms190920.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/ms190920.aspx</a></p>\n"}, {"tags": [], "owner": {"reputation": 6544, "user_id": 451601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164602d512ce01f188e5a50593b46c5f?s=128&d=identicon&r=PG", "display_name": "James K. Lowden", "link": "https://stackoverflow.com/users/451601/james-k-lowden"}, "is_accepted": false, "score": 1, "last_activity_date": 1501220400, "creation_date": 1501220400, "answer_id": 45365638, "question_id": 42414609, "link": "https://stackoverflow.com/questions/42414609/how-to-insert-the-special-character-in-db/45365638#45365638", "title": "How to insert the special character in DB?", "body": "<p>Hmm.  I added <code>iconv</code> support to FreeTDS and in some sense am responsible for that error message.  I have three questions and one suggestion.  </p>\n\n<ol>\n<li><p>What is the encoding of the target column, <code>table_name.name</code>?  Does that encoding support the characters you're trying to insert?  I bet not.  </p></li>\n<li><p>Does the client charset in <code>freetds.conf</code> match the character set reflected in <strong>locale</strong>(1)?  </p></li>\n<li><p>Are you sure you're not using the old TDS protocol version 4.1?  </p></li>\n</ol>\n\n<p>FreeTDS converts SQL text to UTF-16.  When you interpolate the data into the SQL <code>insert</code> statement, FreeTDS converts the whole statement, data and all.  If the client encoding is incorrectly described, the data can't be converted.  If the server encoding can't represent the character, the data can't be converted.  And if the protocol is ancient, there's no support for Unicode in sight.  </p>\n\n<p>It's hard to tell from your error message, but it looks to me like the client side succeeded and the server side failed.  That is, FreeTDS correctly converted the data to UTF-16, but the server could not insert the data into the <code>name</code> column, because it's <code>varchar</code>, not <code>nvarchar</code>, and the \"code page\" for the database (or column, if specified) is not one that can represent those characters.  </p>\n\n<p>My suggestion is to use TDS_DUMP and join the FreeTDS mailing list. The TDS_DUMP log will answer all the questions I posed.  And you'll get better support on the mailing list, because it's specialized.  </p>\n\n<p>Well you may ask why DBeaver seems to work.  I don't know; I never heard of it until now.  I can tell you that there are ways to insert data (for example, with parameterized queries in ODBC) where the server simply inserts the data verbatim.  Strangely enough, it doesn't verify that they are valid for the declared encoding.  </p>\n\n<p>I've helped many people with problems like that.  The database is set up for, say, CP-1252, but the data aren't correctly encoded.  The application can insert mis-encoded data, and later retrieve them and render them correctly, slipping under the radar as it were.  But let the DBA try to query the data or inspect them with normal admin tools, and they look <em>funny</em>.  The server <em>assumes</em> the data in its database are encoded per the database definition.  When that's not the case hilarity ensues!  </p>\n\n<p>If that's your case, you can easily test for it.  Use DBeaver to insert the data.  Use the SQL Server admin application, or good old isql, to retrieve it on Windows.  Odds are you will not be amused.  </p>\n"}], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8339, "favorite_count": 1, "answer_count": 5, "score": 7, "last_activity_date": 1501220400, "creation_date": 1487849557, "last_edit_date": 1495541831, "question_id": 42414609, "link": "https://stackoverflow.com/questions/42414609/how-to-insert-the-special-character-in-db", "title": "How to insert the special character in DB?", "body": "<p>I'm working on Ubuntu and I'm using <code>DBeaver</code> for DB access. I'm trying to insert the Latin character into a database (MSSQL) and it throws an error. But if I insert the same special character with <code>DBeaver</code>, it is not throwing any error and it is working. I have already seen <a href=\"https://stackoverflow.com/questions/2286912/how-to-insert-latin-characters-into-mysql-from-the-command-line-shell\">this</a> question. But I haven't got any idea.</p>\n\n<p>It is throwing the following error:</p>\n\n<pre><code>DBD::ODBC::st execute failed: [unixODBC][FreeTDS][SQL Server]Error converting characters into server's character set. Some character(s) could not be converted (SQL-HY000) at expert.fi_review.pl line 243.\n</code></pre>\n\n<p>And data in db is <code>J\ufffdrjest\ufffdmyyr\ufffd</code>. But the actual data is <code>J\u00e4rjest\u00f6myyr\u00e4</code>. </p>\n\n<p>Sample code:</p>\n\n<pre><code>my ($dsn,$dbh);\n&amp;DB_Connect;\n\n$insert_query = \"INSERT INTO table_name (name) values(N'$name')\";\nmy $sth = $dbh-&gt;prepare($insert_query);\n$sth-&gt;execute() or $DB_Error=$DBI::errstr;\n\nsub DB_Connect\n{\n    $dsn = \"dbi:ODBC:driver={SQL Server};Server=$Server_name,$port;database=$Database_name;driver=FreeTDS;tds_version=8.0;\";\n    reconnect: $dbh = DBI-&gt;connect($dsn, $db_user_id, $db_pwd ,{AutoCommit =&gt; 1}) or goto reconnect;\n    $dbh-&gt; {'LongTruncOk'} = 1;\n    $dbh-&gt; {'LongReadLen'} = 90000;\n}\n</code></pre>\n"}]