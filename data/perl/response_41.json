[{"tags": ["json", "perl", "hash"], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 5, "last_activity_date": 1445462957, "creation_date": 1445462957, "answer_id": 33269593, "question_id": 33269449, "link": "https://stackoverflow.com/questions/33269449/encoding-an-array-of-hashes-in-perl/33269593#33269593", "title": "Encoding an array of hashes in Perl", "body": "<p><code>JSON::encode</code> just expects a single argument, not a list. Use <code>$json-&gt;encode( $query )</code>.</p>\n"}], "owner": {"reputation": 514, "user_id": 2847079, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cb214e9e25b8c54e66a1082b3fced5fc?s=128&d=identicon&r=PG", "display_name": "Bruno P&#233;rel", "link": "https://stackoverflow.com/users/2847079/bruno-p%c3%a9rel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1445462957, "creation_date": 1445462340, "question_id": 33269449, "link": "https://stackoverflow.com/questions/33269449/encoding-an-array-of-hashes-in-perl", "title": "Encoding an array of hashes in Perl", "body": "<p>I'm trying to do something that seems to be very simple, but I can't figure out how to do it in Perl : I want to output a JSON-formatted array of hashes.</p>\n\n<p>The array of hashes in question is actually an array of <code>DBIx::MyParse Item</code>s object instances. Here is my code :</p>\n\n<pre><code>use strict;\nuse DBIx::MyParse;\nuse JSON::PP;\nmy $json = JSON::PP-&gt;new-&gt;ascii-&gt;pretty-&gt;allow_nonref;\n\nour $parser = DBIx::MyParse-&gt;new( database =&gt; \"test\", datadir =&gt; \"/tmp/myparse\" );\nour $query = $parser-&gt;parse(\"UPDATE table1 SET field1 = 1;\");\n\n$json-&gt;convert_blessed(1);\nprint $json-&gt;encode(@{$query} );\n</code></pre>\n\n<p>And this is what this script outputs : </p>\n\n<pre><code>\"SQLCOM_UPDATE\"\n</code></pre>\n\n<p>Which is actually the first element of the array that I want to output as a whole. Here is the content of the array that I see when I step-by-step debug the script :\n<a href=\"https://i.stack.imgur.com/uKl0f.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uKl0f.png\" alt=\"Query debug value\"></a></p>\n\n<p>I would like to have the whole structure in my JSON output. How can I achieve this ?</p>\n"}, {"tags": ["xml", "perl", "xml-simple"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1445492843, "post_id": 33267765, "comment_id": 54348908, "body": "It also may be interesting to hear pros/cons for <a href=\"https://metacpan.org/pod/XML::Fast\" rel=\"nofollow noreferrer\">metacpan.org/pod/XML::Fast</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1445501262, "post_id": 33267765, "comment_id": 54352826, "body": "Are you creating a knowledge-base article that you can link to on your quest to kill XML::Simple? :D"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445502048, "post_id": 33267765, "comment_id": 54353283, "body": "Who me? Although, if anyone knows how to request add/remove from &#39;core&#39;, that would be interesting.... (As &#39;it&#39;s core&#39; is the major argument <i>for</i> XML::Simple. Just like CGI before it, I think that should change)."}, {"owner": {"reputation": 485, "user_id": 171538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/329600368015bb34d8a2f93948498a7e?s=128&d=identicon&r=PG", "display_name": "stu42j", "link": "https://stackoverflow.com/users/171538/stu42j"}, "edited": false, "score": 7, "creation_date": 1445529216, "post_id": 33267765, "comment_id": 54370822, "body": "XML::Simple is not in the Perl core and never has been. In fact, there are no XML parsing modules in Perl core."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445529320, "post_id": 33267765, "comment_id": 54370902, "body": "OK. Fair point. I would quite like a &quot;core&quot; XML parser. &#39;spect it might not be so easy though."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1445529650, "post_id": 33267765, "comment_id": 54371130, "body": "@EvanCarroll - I&#39;m referencing a quote from the docs on <code>XML::Simple</code>. But I&#39;ll happily accept dissenting opinions as to why the docs are wrong, and it <i>shouldn&#39;t</i> be &quot;discouraged&quot;. (I hold this view about perl threads)."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1445531071, "post_id": 33267765, "comment_id": 54371911, "body": "I&#39;ve submitted as an answer instead, because you&#39;re actually asking for an explanation I&#39;ll assume that you&#39;re considering it as an answer to the question."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445537604, "post_id": 33267765, "comment_id": 54375687, "body": "Yes, that&#39;s marvellous. Thank you."}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 13, "creation_date": 1459977230, "post_id": 33267765, "comment_id": 60536841, "body": "As the author of XML::Simple, I discourage its use because there are better solutions which are actually easier to use.  I personally use and recommend XML::LibXML and have written a tutorial to help people get started - <a href=\"http://grantm.github.io/perl-libxml-by-example/\" rel=\"nofollow noreferrer\">XML::LibXML by example</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1476179573, "post_id": 33267765, "comment_id": 67228227, "body": "Just came back here and read the comments. If you want something to be included in core, you can always suggest in on the p5p mailing list. If you have good arguments, they might go for it."}], "answers": [{"comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 4, "creation_date": 1445458594, "post_id": 33267766, "comment_id": 54337904, "body": "<i>Sadly it&#39;s not a default install.</i> If by &quot;default install&quot; you mean core module, then yes, I agree with you. But if instead you mean bundled with a Perl distribution, Strawberry Perl has included pre-installed XML modules (XML::LibXML, \tXML::Parser, XML::Twig, etc.) since at least <a href=\"http://strawberryperl.com/release-notes/5.20.0.1-32bit.html\" rel=\"nofollow noreferrer\">May 2014</a>, maybe longer."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 7, "creation_date": 1445459213, "post_id": 33267766, "comment_id": 54338266, "body": "IMO it largely boils down to that ForceArray should have defaulted to 1 (and that can&#39;t be changed without breaking most existing uses).  If XML::Simple meets your needs, there&#39;s no reason not to use it."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445459622, "post_id": 33267766, "comment_id": 54338496, "body": "I agree, but narrowly scope &quot;meeting my needs&quot; to &quot;if I can&#39;t install one of the other modules&quot;, and if a regex hack won&#39;t do. Because honestly, I consider it very similar to regular expressions, for the same reason. It will work provided you have a very controlled scope of your input XML. And it might break one day, for no apparent reason. It does solve a problem, and it is a core module.  But it is a poor solution when much better options exist"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 5, "creation_date": 1445484529, "post_id": 33267766, "comment_id": 54346666, "body": "@Sobrique: I started to edit your solution, but when I got to the final paragraph and list I had to give up. Your stated aim was to explain why <code>XML::Simple</code> is such a poor choice, but you ended up writing fan mail for <code>XML::Twig</code>. If you want to go beyond explaining the problems with <code>XML::Simple</code> then you need to consider far more than just <code>XML::Twig</code> and <code>XML::LibXML</code>, and I don&#39;t believe this is the place for such extended analysis"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1445497681, "post_id": 33267766, "comment_id": 54350941, "body": "As I dislike offering &quot;don&#39;t do X&quot; without offering a suitable alternative, I was trying to offer some positive reasons to switch.  Ideally ones that assist a business case. I am a fan of XML::Twig. I think that if they &quot;simply&quot; dropped XML::simple from core, it would be a good replacement.  Not least because &quot;simplify&quot; allows you to retain backwards compatibility. That is straying somewhat into opinion I know - there are plenty of other option that are good."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 54, "last_activity_date": 1450699231, "last_edit_date": 1450699231, "creation_date": 1445456203, "answer_id": 33267766, "question_id": 33267765, "link": "https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged/33267766#33267766", "title": "Why is XML::Simple Discouraged?", "body": "<p>The real problem is that what <code>XML::Simple</code> primarily tries to do is take XML, and represent it as a perl data structure. </p>\n\n<p>As you'll no doubt be aware from <a href=\"http://perldoc.perl.org/perldata.html\"><code>perldata</code></a> the two key data structures you have available is the <code>hash</code> and the <code>array</code>. </p>\n\n<ul>\n<li>Arrays are ordered scalars. </li>\n<li>hashes are unordered key-value pairs.</li>\n</ul>\n\n<p>And XML doesn't do either really. It has elements which are:</p>\n\n<ul>\n<li>non uniquely named (which means hashes don't \"fit\").</li>\n<li>.... but are 'ordered' within the file. </li>\n<li>may have attributes (Which you could insert into a hash)</li>\n<li>may have content (But might not, but could be a unary tag)</li>\n<li>may have children (Of any depth)</li>\n</ul>\n\n<p>And these things don't map directly to the available perl data structures - at a simplistic level, a nested hash of hashes might fit - but it can't cope with elements with duplicated names. Nor can you differentiate easily between attributes and child nodes. </p>\n\n<p>So <code>XML::Simple</code> tries to guess based on the XML content, and takes 'hints' from the various option settings, and then when you try and <em>output</em> the content, it (tries to) apply the same process in reverse. </p>\n\n<p>As a result, for anything other than the most <em>simple</em> XML, it becomes unwieldy at best, or loses data at worst. </p>\n\n<p>Consider:</p>\n\n<pre><code>&lt;xml&gt;\n   &lt;parent&gt;\n       &lt;child att=\"some_att\"&gt;content&lt;/child&gt;\n   &lt;/parent&gt;\n   &lt;another_node&gt;\n       &lt;another_child some_att=\"a value\" /&gt;\n       &lt;another_child different_att=\"different_value\"&gt;more content&lt;/another_child&gt;\n   &lt;/another_node&gt;\n&lt;/xml&gt;\n</code></pre>\n\n<p>This - when parsed through <code>XML::Simple</code> gives you:</p>\n\n<pre><code>$VAR1 = {\n          'parent' =&gt; {\n                      'child' =&gt; {\n                                 'att' =&gt; 'some_att',\n                                 'content' =&gt; 'content'\n                               }\n                    },\n          'another_node' =&gt; {\n                            'another_child' =&gt; [\n                                               {\n                                                 'some_att' =&gt; 'a value'\n                                               },\n                                               {\n                                                 'different_att' =&gt; 'different_value',\n                                                 'content' =&gt; 'more content'\n                                               }\n                                             ]\n                          }\n        };\n</code></pre>\n\n<p>Note - now you have under <code>parent</code> - just anonymous hashes, but under <code>another_node</code> you have an array of anonymous hashes. </p>\n\n<p>So in order to access the content of <code>child</code>:</p>\n\n<pre><code>my $child = $xml -&gt; {parent} -&gt; {child} -&gt; {content};\n</code></pre>\n\n<p>Note how you've got a 'child' node, with a 'content' node beneath it, which isn't because it's ... content. </p>\n\n<p>But to access the content beneath the first <code>another_child</code> element:</p>\n\n<pre><code> my $another_child = $xml -&gt; {another_node} -&gt; {another_child} -&gt; [0] -&gt; {content};\n</code></pre>\n\n<p>Note how - because of having multiple <code>&lt;another_node&gt;</code> elements, the XML has been parsed into an array, where it wasn't with a single one. (If you did have an element called <code>content</code> beneath it, then you end up with something else yet). You can change this by using <code>ForceArray</code> but then you end up with a hash of arrays of hashes of arrays of hashes of arrays - although it is at least consistent in it's handling of child elements.  Edit: Note, following discussion - this is a bad default, rather than a flaw with XML::Simple. </p>\n\n<p>You should set:</p>\n\n<pre><code>ForceArray =&gt; 1, KeyAttr =&gt; [], ForceContent =&gt; 1\n</code></pre>\n\n<p>If you apply this to the XML as above, you get instead:</p>\n\n<pre><code>$VAR1 = {\n          'another_node' =&gt; [\n                            {\n                              'another_child' =&gt; [\n                                                 {\n                                                   'some_att' =&gt; 'a value'\n                                                 },\n                                                 {\n                                                   'different_att' =&gt; 'different_value',\n                                                   'content' =&gt; 'more content'\n                                                 }\n                                               ]\n                            }\n                          ],\n          'parent' =&gt; [\n                      {\n                        'child' =&gt; [\n                                   {\n                                     'att' =&gt; 'some_att',\n                                     'content' =&gt; 'content'\n                                   }\n                                 ]\n                      }\n                    ]\n        };\n</code></pre>\n\n<p>This will give you consistency, because you will no longer have single node elements handle differently to multi-node. </p>\n\n<p>But you still:</p>\n\n<ul>\n<li>Have a 5 reference deep tree to get at a value. </li>\n</ul>\n\n<p>E.g.: </p>\n\n<pre><code>print $xml -&gt; {parent} -&gt; [0] -&gt; {child} -&gt; [0] -&gt; {content};\n</code></pre>\n\n<p>You still have <code>content</code> and <code>child</code> hash elements treated as if they were attributes, and because hashes are unordered, you simply cannot reconstruct the input. So basically, you have to parse it, then run it through <code>Dumper</code> to figure out where you need to look. </p>\n\n<p>But with an <code>xpath</code> query, you get at that node with: </p>\n\n<pre><code>findnodes(\"/xml/parent/child\"); \n</code></pre>\n\n<p>What you don't get in <code>XML::Simple</code> that you do in <a href=\"http://search.cpan.org/dist/XML-Twig/Twig.pm\"><code>XML::Twig</code></a> (and I presume <code>XML::LibXML</code> but I know it less well):</p>\n\n<ul>\n<li><code>xpath</code> support. <code>xpath</code> is an XML way of expressing a path to a node. So you can 'find' a node in the above with <code>get_xpath('//child')</code>. You can even use attributes in the <code>xpath</code> - like <code>get_xpath('//another_child[@different_att]')</code> which will select exactly which one you wanted. (You can iterate on matches too). </li>\n<li><code>cut</code> and <code>paste</code> to move elements around</li>\n<li><code>parsefile_inplace</code> to allow you to modify <code>XML</code> with an in place edit. </li>\n<li><code>pretty_print</code> options, to format <code>XML</code>. </li>\n<li><code>twig_handlers</code> and <code>purge</code> - which allows you to process really big XML without having to load it all in memory. </li>\n<li><code>simplify</code> if you really must make it backwards compatible with <code>XML::Simple</code>. </li>\n<li>the code is generally way simpler than trying to follow daisy chains of references to hashes and arrays, that can never be done consistently because of the fundamental differences in structure. </li>\n</ul>\n\n<p>It's also widely available - easy to download from <code>CPAN</code>, and distributed as an installable package on many operating systems. (Sadly it's not a default install. Yet)</p>\n\n<p>See: <a href=\"http://xmltwig.org/xmltwig/quick_ref.html\">XML::Twig quick reference</a></p>\n\n<p>For the sake of comparison:</p>\n\n<pre><code>my $xml = XMLin( \\*DATA, ForceArray =&gt; 1, KeyAttr =&gt; [], ForceContent =&gt; 1 );\n\nprint Dumper $xml;\nprint $xml -&gt;{parent}-&gt;[0]-&gt;{child}-&gt;[0]-&gt;{content};\n</code></pre>\n\n<p>Vs. </p>\n\n<pre><code>my $twig = XML::Twig-&gt;parse( \\*DATA );\nprint $twig -&gt;get_xpath( '/xml/parent/child', 0 )-&gt;text;\nprint $twig -&gt;root-&gt;first_child('parent')-&gt;first_child_text('child');\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1174, "user_id": 412175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd3b70ed5998a15139eb9dcab36f3851?s=128&d=identicon&r=PG", "display_name": "nicomen", "link": "https://stackoverflow.com/users/412175/nicomen"}, "edited": false, "score": 0, "creation_date": 1445523547, "post_id": 33273488, "comment_id": 54366762, "body": "XML::TreePP seems to me to not have the magic guessing XML::Simple has. But you can tell it how to behave exactly. It also is massively simpler to deal with than XML::LibXML and its family.   For creating XML I would use XML::TreePP, for parsing external XML content perhaps XML::LibXML if you have giant XMLs and speed is an issue."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1174, "user_id": 412175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd3b70ed5998a15139eb9dcab36f3851?s=128&d=identicon&r=PG", "display_name": "nicomen", "link": "https://stackoverflow.com/users/412175/nicomen"}, "edited": false, "score": 1, "creation_date": 1445524564, "post_id": 33273488, "comment_id": 54367430, "body": "@nicomen, Assuming you use <code>$tpp-&gt;set( force_array =&gt; [ &#39;*&#39; ] );</code>, you need at least <code>my @eles; if ($doc-&gt;{root} &amp;&amp; $doc-&gt;{root}[0]{eles} &amp;&amp; $doc-&gt;{root}[0]{eles}[0]{ele}) { @eles = @{ $doc-&gt;{root}[0]{eles}[0]{ele} } }</code> to get the <code>&#47;root&#47;eles&#47;ele</code> nodes, and that&#39;s assuming there can&#39;t be multiple <code>eles</code> nodes. That&#39;s no different than an optimally configured XML::Simple. (It&#39;s way worse without <code>force_array =&gt; [ &#39;*&#39; ]</code>.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1174, "user_id": 412175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd3b70ed5998a15139eb9dcab36f3851?s=128&d=identicon&r=PG", "display_name": "nicomen", "link": "https://stackoverflow.com/users/412175/nicomen"}, "edited": false, "score": 1, "creation_date": 1445525014, "post_id": 33273488, "comment_id": 54367752, "body": "@nicomen, You say you&#39;d use XML::TreePP over XML::LibXML for large documents. Why???? That sounds ludicrous to me, but I could be missing something. I haven&#39;t benchmarked XML::TreePP, but I suspect it doesn&#39;t come near XML::LibXML, large document or otherwise. The issue with large documents is memory, not speed. XML::LibXML does provide an option for large docs (a pull parser) whereas XML::TreePP doesn&#39;t. That said, XML::Twig is far better at it."}, {"owner": {"reputation": 1174, "user_id": 412175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd3b70ed5998a15139eb9dcab36f3851?s=128&d=identicon&r=PG", "display_name": "nicomen", "link": "https://stackoverflow.com/users/412175/nicomen"}, "edited": false, "score": 0, "creation_date": 1445597570, "post_id": 33273488, "comment_id": 54400014, "body": "I might have been unclear, I meant XML::LibXML was good for heavy duty and large documents. For easy writing, and reading I prefer XML::TreePP, but yes, you need to set some sane defaults."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1445844928, "post_id": 33273488, "comment_id": 54477006, "body": "For XML::LibXML users, XML::LibXML::Reader might be easier to use than XML::Twig."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1445868445, "post_id": 33273488, "comment_id": 54490869, "body": "@choroba, Maybe, but probably not. XML::Twig&#39;s <code>twig_handlers</code> returns provides the subtree of the matching elements, whereas XML::LibXML::Reader is barely more than a tokenizer. XML::LibXML::Reader is closer to XML::Parser (the underlying parser used by XML::Twig) rather than XML::Twig."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1445894930, "post_id": 33273488, "comment_id": 54507785, "body": "@ikegami: copyCurrentNode(1) returns what you know from XML::LibXML."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1445957132, "post_id": 33273488, "comment_id": 54536476, "body": "@choroba, ah! nice! Updated answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 33, "last_activity_date": 1571087114, "last_edit_date": 1571087114, "creation_date": 1445488639, "answer_id": 33273488, "question_id": 33267765, "link": "https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged/33273488#33273488", "title": "Why is XML::Simple Discouraged?", "body": "<h2>XML::Simple is the most complex XML parser available</h2>\n\n<p>The main problem with XML::Simple is that the resulting structure is extremely hard to navigate correctly. <code>$ele-&gt;{ele_name}</code> can return any of the following (even for elements that follow the same spec):</p>\n\n<pre><code>[ { att =&gt; 'val', ..., content =&gt; [ 'content', 'content' ] }, ... ]\n[ { att =&gt; 'val', ..., content =&gt; 'content' }, ... ]\n[ { att =&gt; 'val', ..., }, ... ]\n[ 'content', ... ]\n{ 'id' =&gt; { att =&gt; 'val', ..., content =&gt; [ 'content', 'content' ] }, ... }\n{ 'id' =&gt; { att =&gt; 'val', ..., content =&gt; 'content' }, ... }\n{ 'id' =&gt; { att =&gt; 'val', ... }, ... }\n{ 'id' =&gt; { content =&gt; [ 'content', 'content' ] }, ... }\n{ 'id' =&gt; { content =&gt; 'content' }, ... }\n{ att =&gt; 'val', ..., content =&gt; [ 'content', 'content' ] }\n{ att =&gt; 'val', ..., content =&gt; 'content' }\n{ att =&gt; 'val', ..., }\n'content'\n</code></pre>\n\n<p>This means that you have to perform all kinds of checks to see what you actually got. But the sheer complexity of this encourages developers to make very bad assumptions instead. This leads to all kinds of problems slipping into production, causing live code to fail when corner cases are encountered.</p>\n\n<h2>The options for making a more regular tree fall short</h2>\n\n<p>You can use the following options to create a more regular tree:</p>\n\n<pre><code>ForceArray =&gt; 1, KeyAttr =&gt; [], ForceContent =&gt; 1\n</code></pre>\n\n<p>But even with these options, many checks are still needed to extract information from a tree. For example, getting the <code>/root/eles/ele</code> nodes from a document is a common operation that should be trivial to perform, but the following is required when using XML::Simple:</p>\n\n<pre><code># Requires: ForceArray =&gt; 1, KeyAttr =&gt; [], ForceContent =&gt; 1, KeepRoot =&gt; 0\n# Assumes the format doesn't allow for more than one /root/eles.\n# The format wouldn't be supported if it allowed /root to have an attr named eles.\n# The format wouldn't be supported if it allowed /root/eles to have an attr named ele.\nmy @eles;\nif ($doc-&gt;{eles} &amp;&amp; $doc-&gt;{eles}[0]{ele}) {\n    @eles = @{ $doc-&gt;{eles}[0]{ele} };\n}\n</code></pre>\n\n<p>In another parser, one would use the following:</p>\n\n<pre><code>my @eles = $doc-&gt;findnodes('/root/eles/ele');\n</code></pre>\n\n<h2>XML::Simple imposes <em>numerous</em> limitations, and it lacks common features</h2>\n\n<ul>\n<li><p>It's completely useless for producing XML. Even with <code>ForceArray =&gt; 1, ForceContent =&gt; 1, KeyAttr =&gt; [], KeepRoot =&gt; 1</code>, there are far too many details that can't be controlled.</p></li>\n<li><p>It doesn't preserve the relative order of children with different names.</p></li>\n<li><p>It has limited (with XML::SAX backend) or no (with XML::Parser backend) support for namespaces and namespace prefixes.</p></li>\n<li><p>Some backends (e.g. XML::Parser) are unable to handle encodings not based on ASCII (e.g. UTF-16le).</p></li>\n<li><p>An element can't have a child element and an attribute with the same name.</p></li>\n<li><p>It can't create XML documents with comments.</p></li>\n</ul>\n\n<p>Ignoring the major issues previously mentioned, XML::Simple could still be usable with these limitations. But why go to the trouble of checking if XML::Simple can handle your document format and risk having to switch to another parser later? You could simply use a better parser for all your documents from the start.</p>\n\n<p>Not only do some other parsers not subject you to these limitations, they provide loads of other useful features in addition. The following are a few features they might have that XML::Simple doesn't:</p>\n\n<ul>\n<li><p>Speed. XML::Simple is extremely slow, especially if you use a backend other than XML::Parser. I'm talking orders of magnitude slower than other parsers.</p></li>\n<li><p>XPath selectors or similar.</p></li>\n<li><p>Support for extremely large documents.</p></li>\n<li><p>Support for pretty printing.</p></li>\n</ul>\n\n<h2>Is XML::Simple ever useful?</h2>\n\n<p>The only format for which XML::Simple is simplest is one where no element is optional. I've had experience with countless XML formats, and I've never encountered such a format.</p>\n\n<p>This fragility and complexity alone are reasons enough to warrant staying away from XML::Simple, but there are others.</p>\n\n<h2>Alternatives</h2>\n\n<p>I use XML::LibXML. It's an extremely fast, full-featured parser. If I ever needed to handle documents that didn't fit into memory, I'd use XML::LibXML::Reader (and its <code>copyCurrentNode(1)</code>) or XML::Twig (using <code>twig_roots</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 54937, "user_id": 16587, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9ed3482ccbb461fbf8796b251caf8f4d?s=128&d=identicon&r=PG", "display_name": "George Stocker", "link": "https://stackoverflow.com/users/16587/george-stocker"}, "edited": false, "score": 0, "creation_date": 1445610789, "post_id": 33285874, "comment_id": 54408575, "body": "Comments are not for extended discussion; this conversation has been <a href=\"http://chat.stackoverflow.com/rooms/93181/discussion-on-answer-by-evan-carroll-why-is-xmlsimple-discouraged\">moved to chat</a>."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445880202, "post_id": 33285874, "comment_id": 54499192, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/93394/discussion-between-evan-carroll-and-ikegami\">continue this discussion in chat</a>."}, {"owner": {"reputation": 168160, "user_id": 19679, "user_type": "moderator", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/52a2ffb44b1c11ab9001cb67e0a0021c?s=128&d=identicon&r=PG", "display_name": "Brad Larson", "link": "https://stackoverflow.com/users/19679/brad-larson"}, "edited": false, "score": 0, "creation_date": 1445880774, "post_id": 33285874, "comment_id": 54499571, "body": "I&#39;ve removed the unnecessary meta-commentary targeted at another user. That doesn&#39;t really need to be part of the answer, and if you want to hash this out, take it to chat."}], "tags": [], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "is_accepted": false, "score": 5, "last_activity_date": 1445880712, "last_edit_date": 1445880712, "creation_date": 1445531025, "answer_id": 33285874, "question_id": 33267765, "link": "https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged/33285874#33285874", "title": "Why is XML::Simple Discouraged?", "body": "<h1>I disagree with the docs</h1>\n\n<p>I'll dissent and say that <code>XML::Simple</code> is just that.. simple. And, it's always been easy and enjoyable for me to use. Test it with the input you're receiving. So long as the input does not change, you're good. The same people that complain about using <code>XML::Simple</code> complain about using <code>JSON::Syck</code> to serialize Moose. The docs are wrong because they take into account correctness over efficiency. If you only care about the following, you're good:</p>\n\n<ul>\n<li>not throwing away data</li>\n<li>building to a format supplied and not an abstract schema</li>\n</ul>\n\n<p>If you're making an abstract parser that isn't defined by application but by spec, I'd use something else. I worked at a company one time and we had to accept 300 different schemas of XML none of which had a spec. <code>XML::Simple</code> did the job easily. The other options would have required us to actually hire someone to get the job done. Everyone thinks XML is something that is sent in a rigid all encompassing spec'ed format such that if you write one parser you're good. If that's the case don't use <code>XML::Simple</code>. XML, before JSON, was just a \"dump this and walk\" format from one language to another. People actually used things like <code>XML::Dumper</code>. No one actually knew what was outputted. Dealing with that scenario <code>XML::Simple</code> is greattt! Sane people still dump to JSON without spec to accomplish the same thing. It's just how the world works.</p>\n\n<p>Want to read the data in, and not worry about the format? Want to traverse Perl structures and not XML possibilities? Go <code>XML::Simple</code>.</p>\n\n<h1>By extension...</h1>\n\n<p>Likewise, for <em>most</em> applications <code>JSON::Syck</code> is sufficient to <em>dump this and walk.</em> Though if you're sending to lots of people, I'd <em>highly</em> suggest not being a douche nozzle and making a spec which you export to. But, you know what.. Sometime you're going to get a call from someone you don't want to talk to who wants his data that you don't normally export. And, you're going to pipe it through <code>JSON::Syck</code>'s voodoo and let them worry about it. If they want XML? Charge them $500 more and fire up ye' ole <code>XML::Dumper</code>.</p>\n\n<h1>Take away</h1>\n\n<p>It may be less than perfect, but <code>XML::Simple</code> is damn efficient. Every hour saved in this arena you can potentially spend in a more useful arena. That's a real world consideration.</p>\n\n<h1>The other answers</h1>\n\n<p>Look XPath has some upsides. Every answer here boils down to preferring <em>XPath</em> over Perl. That's fine. If you would rather use an a standardized XML domain specific language to access your XML, have at it!</p>\n\n<p>Perl doesn't provide for an easy mechanism to access deeply nested optional structures.</p>\n\n<pre><code>var $xml = [ { foo =&gt; 1 } ];  ## Always w/ ForceArray.\n\nvar $xml = { foo =&gt; 1 };\n</code></pre>\n\n<p>Getting the value of <code>foo</code> here in these two contexts can be tricky. <code>XML::Simple</code> knows this and that's why you can force the former.. However, that even with <code>ForceArray</code>, if the element isn't there you'll throw an error..</p>\n\n<pre><code>var $xml = { bar =&gt; [ { foo =&gt; 1 } ] };\n</code></pre>\n\n<p>now, if <code>bar</code> is optional, You're left accessing it <code>$xml-&gt;{bar}[0]{foo}</code> and <code>@{$xml-&gt;{bar}}[0]</code> will throw an error. Anyway, that's just perl. This has 0 to do with <code>XML::Simple</code> imho. And, I admitted that <code>XML::Simple</code> is not good for building to spec. Show me data, and I can access it with XML::Simple. </p>\n"}], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11865, "favorite_count": 8, "accepted_answer_id": 33267766, "answer_count": 3, "score": 58, "last_activity_date": 1586792379, "creation_date": 1445456203, "last_edit_date": 1592644375, "question_id": 33267765, "link": "https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged", "title": "Why is XML::Simple Discouraged?", "body": "<p>From the documentation of <a href=\"https://metacpan.org/pod/XML::Simple#STATUS-OF-THIS-MODULE\" rel=\"noreferrer\"><code>XML::Simple</code></a>:</p>\n<blockquote>\n<p>The use of this module in new code is discouraged. Other modules are available which provide more straightforward and consistent interfaces. In particular, XML::LibXML is highly recommended.</p>\n<p>The major problems with this module are the large number of options and the arbitrary ways in which these options interact - often with unexpected results.</p>\n</blockquote>\n<p>Can someone clarify for me what the key reasons for this are?</p>\n"}, {"tags": ["perl", "random", "scripting"], "comments": [{"owner": {"reputation": 96704, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 3, "creation_date": 1445455671, "post_id": 33267608, "comment_id": 54336401, "body": "<code>random.shuffle(list(range(10)))</code>"}, {"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "edited": false, "score": 0, "creation_date": 1445455923, "post_id": 33267608, "comment_id": 54336537, "body": "Thanks, will that only be a shuffled list of 0..9? because my experiment involves generating UNTIL all digits are hit, not just shuffle 0..9, that is [0,0,0,0,1,2,3,4,5,6,7,8,8,9] is possible."}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 1, "creation_date": 1445456026, "post_id": 33267608, "comment_id": 54336595, "body": "What does &quot;really unhappy&quot; mean for you?"}, {"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "reply_to_user": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1445456108, "post_id": 33267608, "comment_id": 54336639, "body": "@Wolf seems like a very clumsy way to approach the problem, I feel like there is a more elegant way to approach it that does not need as many checks, un-needed additional lists(for checking what is still needed to be found). I merely mean that this approach does not feel correct/I am not satisfied with it."}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1445456224, "post_id": 33267608, "comment_id": 54336699, "body": "I&#39;d search for a map (hash/dict) and count the keys. Not sure if this is possible in the languages you address..."}], "answers": [{"tags": [], "owner": {"reputation": 1581, "user_id": 5227791, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TVf5M.jpg?s=128&g=1", "display_name": "ryanmc", "link": "https://stackoverflow.com/users/5227791/ryanmc"}, "is_accepted": false, "score": 0, "last_activity_date": 1445456952, "last_edit_date": 1445456952, "creation_date": 1445456427, "answer_id": 33267828, "question_id": 33267608, "link": "https://stackoverflow.com/questions/33267608/generate-random-numbers-until-every-digit-0-9-is-generated/33267828#33267828", "title": "Generate random numbers until every digit [0, 9] is generated", "body": "<p>This should work (python):</p>\n\n<pre><code>import random\nnums = []\nwhile any([ i not in set(nums) for i in range(1,11)]):\n    nums.append(random.randrange(1, 11, 1))\n</code></pre>\n\n<p>or more specific to what you are trying to do:</p>\n\n<pre><code>import random\n\nlengths = []\nfor i in range(1000):\n    nums = []\n    while any([ i not in set(nums) for i in set(range(1,11))]):\n        nums.append(random.randrange(1, 11, 1))\n    lengths.append(len(nums))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "edited": false, "score": 0, "creation_date": 1445457664, "post_id": 33267869, "comment_id": 54337421, "body": "Thanks! So from my understanding, the cleanest solution to doing this, is through using dictionary and fill it until it has 10 unique keys."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "edited": false, "score": 0, "creation_date": 1445457950, "post_id": 33267869, "comment_id": 54337576, "body": "Depends what you mean by &quot;clean&quot; really. If the code is clear what it&#39;s doing, and the algorithm isn&#39;t absurdly inefficient, then that is what matters. Everything else is premature optimisation - let the compilers worry about that, and if it actually matters, get a code profiler out to see where you need to worry."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445459566, "post_id": 33267869, "comment_id": 54338465, "body": "Could use an array instead of a hash. The following should be a little faster (and way easier to implement in C): <code>my @nums; my @seen; my $remaining = 10; while (!$remaining) {    push @nums, int rand 10;    --$remaining if !$seen[$nums[-1]]++; }</code>"}, {"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445461194, "post_id": 33267869, "comment_id": 54339330, "body": "@ikegami Shouldn&#39;t it be <code>while ($remaining)</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 0, "creation_date": 1445461283, "post_id": 33267869, "comment_id": 54339383, "body": "@Benjamin W., woops, yeah"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 5, "last_activity_date": 1445457260, "last_edit_date": 1445457260, "creation_date": 1445456557, "answer_id": 33267869, "question_id": 33267608, "link": "https://stackoverflow.com/questions/33267608/generate-random-numbers-until-every-digit-0-9-is-generated/33267869#33267869", "title": "Generate random numbers until every digit [0, 9] is generated", "body": "<p>Well, the problem is if you 'roll randomly' you don't actually know how many iterations you're going to need - in theory it could be infinite. </p>\n\n<p>If you're doing it in <code>perl</code> you're probably much better off using the <code>List::Util</code> module and <code>shuffle</code> - feed it a list of elements you want to shuffle. </p>\n\n<p>E.g.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict; \nuse warnings;\n\nuse List::Util qw( shuffle );\n\nmy @shuffled = shuffle ( 0..9 );\n\nprint @shuffled;\n</code></pre>\n\n<p>You could reproduce this quite easily, but why bother when <code>List::Util</code> is core as of 5.7.3</p>\n\n<p>However it does sound like you're trying to generate a list, that <em>might</em> contain repeats, until you hit a terminate condition. </p>\n\n<p>I'm not entirely sure why, but that would be best done using a hash, and counting occurences. (And terminate when your 'keys' is complete).</p>\n\n<p>E.g.: </p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict; \nuse warnings;\n\nmy %seen;\nmy @list_of_numbers;\n\nwhile ( keys %seen &lt; 10 ) {\n   my $gen = int rand ( 10 );\n   $seen{$gen}++; \n   push ( @list_of_numbers, $gen );\n}\n\nprint @list_of_numbers;\n</code></pre>\n\n<p>Note - there's actually an extremely small chance of this rolling extremely long sequences, because of the nature of 'random' - it means in theory you might have a very long 'streak' of not rolling a 6. </p>\n\n<p>For bonus points in <code>%seen</code> you have a frequency spread of your generated numbers. </p>\n"}, {"tags": [], "owner": {"reputation": 7089, "user_id": 1038264, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/eb306f9556cb777b52c80f24ae879c2c?s=128&d=identicon&r=PG", "display_name": "tdc", "link": "https://stackoverflow.com/users/1038264/tdc"}, "is_accepted": false, "score": 1, "last_activity_date": 1445456568, "creation_date": 1445456568, "answer_id": 33267871, "question_id": 33267608, "link": "https://stackoverflow.com/questions/33267608/generate-random-numbers-until-every-digit-0-9-is-generated/33267871#33267871", "title": "Generate random numbers until every digit [0, 9] is generated", "body": "<p>A python implementation:</p>\n\n<pre><code>from random import randint\n\ns = set(range(10))\ndef f():\n    result = []\n    t = set()\n    while 1:\n        n = randint(0, 9)\n        result.append(n)\n        t.add(n)\n        if t == s:\n             return result\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>for i in range(10):\n    print(len(f()))\n   ....:     \n20\n34\n69\n22\n23\n25\n20\n29\n30\n32\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "is_accepted": false, "score": 0, "last_activity_date": 1445456961, "creation_date": 1445456961, "answer_id": 33267999, "question_id": 33267608, "link": "https://stackoverflow.com/questions/33267608/generate-random-numbers-until-every-digit-0-9-is-generated/33267999#33267999", "title": "Generate random numbers until every digit [0, 9] is generated", "body": "<p>This approach counts the iterations needed to fill a dictionary of digits:</p>\n\n<pre><code>import random\n\nc = 0\nd = dict()\nwhile len(d.keys()) &lt;10:\n    d[random.randint(0,9)] = 1\n    c += 1\n\nprint c\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "edited": false, "score": 0, "creation_date": 1446009226, "post_id": 33268170, "comment_id": 54560078, "body": "its fine, i wanted ideas/solutions in any script, I was just suggested to stick to one."}], "tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1445457594, "creation_date": 1445457594, "answer_id": 33268170, "question_id": 33267608, "link": "https://stackoverflow.com/questions/33267608/generate-random-numbers-until-every-digit-0-9-is-generated/33268170#33268170", "title": "Generate random numbers until every digit [0, 9] is generated", "body": "<p>Wrote this before you switched to just Perl...</p>\n\n<pre><code>from random import randrange\n\ndef F():\n    todo = set(range(10))\n    nums = []\n    while todo:\n        r = randrange(10)\n        nums.append(r)\n        todo.discard(r)\n    return nums\n\n&gt;&gt;&gt; F()\n[8, 2, 2, 3, 1, 0, 3, 9, 3, 4, 7, 4, 7, 5, 0, 9, 5, 5, 6]\n</code></pre>\n\n<p>Another:</p>\n\n<pre><code>def F():\n    done = 0\n    nums = []\n    while done &lt; 1023:\n        r = randrange(10)\n        nums.append(r)\n        done |= 1 &lt;&lt; r\n    return nums\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "is_accepted": false, "score": 0, "last_activity_date": 1445533049, "last_edit_date": 1445533049, "creation_date": 1445458148, "answer_id": 33268320, "question_id": 33267608, "link": "https://stackoverflow.com/questions/33267608/generate-random-numbers-until-every-digit-0-9-is-generated/33268320#33268320", "title": "Generate random numbers until every digit [0, 9] is generated", "body": "<p>Here is a possible Perl implementation that counts the iterations needed to fill a hash with the 10 digts:</p>\n\n<pre><code>#!/usr/bin/perl\n\nmy $count = 0;\nmy %dict = ();\n\nwhile (scalar keys %dict &lt; 10) {\n    $dict{int(rand(10))} = 1;\n    $count ++;\n}\n\nprint $count;\n</code></pre>\n\n<p>(see <a href=\"https://ideone.com/ArYQNU\" rel=\"nofollow\">online demo</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 9855, "user_id": 7780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf9668c1ebea8ecea9f1ac4474236b5e?s=128&d=identicon&r=PG", "display_name": "dsm", "link": "https://stackoverflow.com/users/7780/dsm"}, "is_accepted": false, "score": 0, "last_activity_date": 1445534877, "last_edit_date": 1445534877, "creation_date": 1445485102, "answer_id": 33272991, "question_id": 33267608, "link": "https://stackoverflow.com/questions/33267608/generate-random-numbers-until-every-digit-0-9-is-generated/33272991#33272991", "title": "Generate random numbers until every digit [0, 9] is generated", "body": "<p>In clojure (though probably not the most elegant):</p>\n\n<pre><code>(loop [n []\n       s (set (range 0 10))]\n  (if (= s (set n))\n    n\n    (recur (conj n (rand-int 10)) s)))\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>user=&gt; (loop [n [] s (set (range 0 10))] (if (= s (set n)) n (recur (conj n (rand-int 10)) s)))\n[0 6 2 8 5 2 0 0 9 3 0 3 0 1 7 5 0 4]\nuser=&gt; (loop [n [] s (set (range 0 10))] (if (= s (set n)) n (recur (conj n (rand-int 10)) s)))\n[2 1 7 7 3 2 8 8 4 7 5 0 1 3 0 3 0 4 0 0 3 7 3 4 5 8 1 3 8 5 3 5 5 9 4 0 2 1 2 7 8 3 9 7 8 6]\nuser=&gt; (loop [n [] s (set (range 0 10))] (if (= s (set n)) n (recur (conj n (rand-int 10)) s)))\n[7 1 8 3 1 1 0 6 8 4 9 7 0 0 2 7 4 0 1 1 8 8 4 3 9 8 4 2 8 3 2 8 4 6 0 9 9 7 2 3 0 3 0 4 2 4 0 5]\nuser=&gt; (loop [n [] s (set (range 0 10))] (if (= s (set n)) n (recur (conj n (rand-int 10)) s)))\n[9 1 9 0 9 5 3 0 3 8 4 0 1 6 3 0 1 8 0 3 8 3 5 4 3 9 8 8 8 8 2 2 8 9 9 3 9 2 5 1 1 3 4 6 3 1 4 0 2 6 7]\nuser=&gt; (loop [n [] s (set (range 0 10))] (if (= s (set n)) n (recur (conj n (rand-int 10)) s)))\n[4 1 5 5 5 5 2 2 5 5 3 1 5 3 5 1 4 2 4 2 3 1 4 7 1 9 3 8 0 8 4 0 9 3 4 9 9 1 8 8 0 6]\nuser=&gt; (loop [n [] s (set (range 0 10))] (if (= s (set n)) n (recur (conj n (rand-int 10)) s)))\n[0 4 0 9 1 8 4 8 6 6 6 9 8 4 9 0 9 3 3 7 6 1 4 3 8 1 1 4 9 5 1 4 1 2]\nuser=&gt; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13032, "user_id": 785864, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b760aaaec82c275c5c805fffe58d5191?s=128&d=identicon&r=PG", "display_name": "Nicolas Modrzyk", "link": "https://stackoverflow.com/users/785864/nicolas-modrzyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1445493844, "creation_date": 1445493844, "answer_id": 33274342, "question_id": 33267608, "link": "https://stackoverflow.com/questions/33267608/generate-random-numbers-until-every-digit-0-9-is-generated/33274342#33274342", "title": "Generate random numbers until every digit [0, 9] is generated", "body": "<p>In Clojure, I am keeping track of both the random list and the existing values, thus avoiding a search on the growing list.</p>\n\n<pre><code>    (defn random-list [ up-to ]\n     (loop [ n [] tries [] ]\n      (if (&gt; (count n) (dec up-to))\n        tries\n        (let [i (rand-int up-to) n-tries (conj tries i)]\n          (if (some #{i} n )\n            (recur n n-tries)\n            (recur (conj n i) n-tries))))))\n</code></pre>\n\n<p>We can define similar functions:</p>\n\n<pre><code>    (defn random-list-to-10 []\n      (random-list 10))\n\n    (random-list-to-10)\n    ; [3 6 9 0 8 0 5 7 3 8 1 8 4 3 4 2]\n</code></pre>\n\n<p>We can also take only a few random elements:</p>\n\n<pre><code>    (take 5 (random-list 10))\n    ; (6 1 0 9 5)\n</code></pre>\n"}], "owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 711, "favorite_count": 0, "accepted_answer_id": 33267869, "answer_count": 8, "score": 0, "last_activity_date": 1445534877, "creation_date": 1445455628, "last_edit_date": 1445456326, "question_id": 33267608, "link": "https://stackoverflow.com/questions/33267608/generate-random-numbers-until-every-digit-0-9-is-generated", "title": "Generate random numbers until every digit [0, 9] is generated", "body": "<p>I want to make an experiment where I create a list of many lists of randomly generated sequences that all contain every digit 0 to 9 inclusive, that is, the generation function is to generate random numbers and place them in a list of integers while there is at least 1 digit not found in the list.</p>\n\n<p>The intention for the experiment is to try to make some generalizations about things like expected number # of digits in such a function, how long can a sequence get(can my program loop indefinitely and never find that last digit?), and other interesting things(for me).</p>\n\n<p>I am using PERL for the experiment.</p>\n\n<p>The idea seemed simple at first, I sat down, created a list, and figured I can just make a loop that runs an arbitrary amount of times (I decided to choose 100 times), which calls a function generate_sequence(input: none, output: list of numbers that contains at least 1 of every digit) and adds it to the list.</p>\n\n<p>I quickly realized that I struggle cleanly specifying what it means, pragmatically, to generate a list of numbers that contains one of every digit. </p>\n\n<p>My original attempt was to make a list of digits(0..9), and as I generate numbers, I would search the list for that digit if it is in the list, and remove it. This way, it would generate numbers until the list of digits \"still needed\" is empty. This approach seems unappealing and can involve a lot of redundant tasks such as checking whether the digit generated is in the list of digits needed every single time a number is generated...</p>\n\n<p>Is there a more elegant solution to such a problem? I am really unhappy with the way I am approaching the function.</p>\n\n<p><strong>In general, I need a function F that accepts nothing, and returns a list of randomly generated numbers that contains every digit 1..9, that is, it stops as soon as every digit from 1 to 9 inclusive is generated.</strong></p>\n\n<p>Thanks ahead of time.</p>\n"}, {"tags": ["perl", "recursion", "ftp"], "comments": [{"owner": {"reputation": 3361, "user_id": 5395288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pw0Jz.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5395288/michael"}, "edited": false, "score": 0, "creation_date": 1445451106, "post_id": 33266275, "comment_id": 54333857, "body": "I don&#39;t see why it would treat zip files any differently to any other files. They are, after all, just files... If you ftp manually and try to get the zip files does that work?"}, {"owner": {"reputation": 21, "user_id": 5472676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7f7514cd827035dfadfda09b943664?s=128&d=identicon&r=PG&f=1", "display_name": "user5472676", "link": "https://stackoverflow.com/users/5472676/user5472676"}, "reply_to_user": {"reputation": 3361, "user_id": 5395288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pw0Jz.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5395288/michael"}, "edited": false, "score": 0, "creation_date": 1445451712, "post_id": 33266275, "comment_id": 54334194, "body": "Yes, I am able to retrieve them manually."}, {"owner": {"reputation": 3361, "user_id": 5395288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pw0Jz.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5395288/michael"}, "edited": false, "score": 2, "creation_date": 1445453610, "post_id": 33266275, "comment_id": 54335271, "body": "Perhaps turning on debug will help illuminate the problem? my $ftp = Net::FTP::Recursive-&gt;new(&#39;host name&#39;, &#39;Debug&#39; =&gt; 1);"}], "owner": {"reputation": 21, "user_id": 5472676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7f7514cd827035dfadfda09b943664?s=128&d=identicon&r=PG&f=1", "display_name": "user5472676", "link": "https://stackoverflow.com/users/5472676/user5472676"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 275, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1445450821, "creation_date": 1445450729, "last_edit_date": 1445450821, "question_id": 33266275, "link": "https://stackoverflow.com/questions/33266275/netftprecursive-perl", "title": "Net::FTP::Recursive perl", "body": "<p>I am trying to retrieve contents of a directory from a FTP server using Net::FTP::Recursive module's rget function. When the remote directory has zip files, rget is not able to retrieve them, it does not throw any error. \nI am able to list all the zip files on remote directory just before calling rget too.</p>\n\n<p>Is there a different way to handle zip files using rget?</p>\n\n<p>Pseudo code:</p>\n\n<pre><code>my $ftp = Net::FTP::Recursive-&gt;new('host name');\n$ftp-&gt;login('username', 'password');\n$ftp-&gt;cwd('dir');\n$ftp-&gt;rget();\n</code></pre>\n\n<p>on a different note, is there a way to specify directory name to rget function.</p>\n\n<p>I appreciate your help!</p>\n\n<p>Thanks,\nNA</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 2, "creation_date": 1445443605, "post_id": 33264082, "comment_id": 54329427, "body": "use <code>+</code> instead of <code>*</code> for your pattern. <code>+</code> matches 1 or more where as <code>*</code> matches 0 or more."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1445444741, "post_id": 33264082, "comment_id": 54330116, "body": "As was said you are matching <code>&gt;&lt;</code> and that&#39;s where the <i>blanks</i> come from. As a side, does this <code>m(&gt;(.*?)&lt;)</code> even compile ?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445445589, "post_id": 33264082, "comment_id": 54330658, "body": "Yes. Perl allows brackets as regex separators."}, {"owner": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "edited": false, "score": 0, "creation_date": 1445448043, "post_id": 33264082, "comment_id": 54332062, "body": "Using a &quot;+&quot; does populate the array with the correct amount of elements however the elements also now contain the &lt;state&gt; and &lt;title&gt; tags.  Printing the array yields this: SWCR000178 &lt;state&gt;Approved &lt;title&gt;Something is broken.  I could strip that out of the array I suppose but there has to be a cleaner way to do it within the Regexp.  Am I wrong?  Thank you!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445448132, "post_id": 33264082, "comment_id": 54332117, "body": "@Sobrique - That&#39;s one thing I never had the guts to do in Perl, use parenthesis as delimiters."}, {"owner": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "edited": false, "score": 0, "creation_date": 1445448159, "post_id": 33264082, "comment_id": 54332135, "body": "SLN, yes the following compiles just fine: m(&gt;(.*?)&lt;).  Yields the wrong answer but it does compile and run just fine :)"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1445453397, "post_id": 33264082, "comment_id": 54335137, "body": "@sln, it can improve readability. I especially like <code>s{xxx}{yyy}</code> -- pairs of matching delimiters"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1445453920, "post_id": 33264082, "comment_id": 54335465, "body": "@glennjackman - I use <code>s{}{}x</code> sometimes with big regex when I want to span lines. But, to me, anything I see at first glance like <code>(...)</code> is going to say <i>list</i>, so, just for grins I stay away from <code>m()</code> most of the time."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "edited": false, "score": 0, "creation_date": 1445449417, "post_id": 33264214, "comment_id": 54332893, "body": "@ Sobrique - I have been digesting your response and greatly appreciate the great ideas.  I turned on strict and warnings.  I also edited my open command to have three arguments.   However, this:my @fieldvalues =  $inFileLine =~ m(&gt;([^&lt;]+)&lt;)g; returns nothing.  The array is not populated as it cannot find a match.  Have any ideas where I could troubleshoot that?  Also, totally agree that I have been tripping over using regex with XML and am very sore :)  Thank you sir!"}, {"owner": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "edited": false, "score": 0, "creation_date": 1445450066, "post_id": 33264214, "comment_id": 54333271, "body": "@ Sobrique - Thank you for the data dumper dumper code as well.  I&#39;m going through that now."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "edited": false, "score": 0, "creation_date": 1445450349, "post_id": 33264214, "comment_id": 54333433, "body": "Certainly worked in the sample I quoted. But only on the one line. Turning on &quot;use re &#39;debug&#39;;&quot; might help troubleshooting"}, {"owner": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "edited": false, "score": 0, "creation_date": 1445456839, "post_id": 33264214, "comment_id": 54337014, "body": "@ Sobrique - Ofcourse you are right.  I stared at this for over and hour and then it hit me.  When I implemented what you suggested I forgot that our variable names were different (capital letter).  Thus my script was printing blank values.  Did you invent PERL?  You&#39;re the wizard!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "edited": false, "score": 0, "creation_date": 1445457022, "post_id": 33264214, "comment_id": 54337114, "body": "Hardly. Just spent 15 years screwing around with it, since I outgrew &#39;ordinary&#39; shell scripts."}, {"owner": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "edited": false, "score": 0, "creation_date": 1445457935, "post_id": 33264214, "comment_id": 54337570, "body": "Well, I have 15 minutes under my belt now so I am gaining on you quick :)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "edited": false, "score": 0, "creation_date": 1445468410, "post_id": 33264214, "comment_id": 54342446, "body": "Stack Overflow is quite good for grinding experience. Good questions or answers help formulate your own understanding."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1445444480, "last_edit_date": 1495542214, "creation_date": 1445443804, "answer_id": 33264214, "question_id": 33264082, "link": "https://stackoverflow.com/questions/33264082/regexp-code-pushes-unwanted-blank-elements-into-array/33264214#33264214", "title": "Regexp Code Pushes Unwanted Blank Elements Into Array", "body": "<p>(Note: usual advice would be 'use a parser' but as this is almost certainly with reference to:  <a href=\"https://stackoverflow.com/questions/33244688/populate-array-from-xml-end-tags\">Populate array from XML end tags</a> where such is not available) </p>\n\n<p>The problem you've got, is you're capturing \"zero or more\" characters between <code>&gt;&lt;</code>.</p>\n\n<p>So you're getting a match here:</p>\n\n<pre><code>&lt;/record&gt;&lt;state&gt;\n</code></pre>\n\n<p>And it's empty. This might do the trick though:</p>\n\n<pre><code>my @fieldvalues =  $inFileLine =~ m(&gt;([^&lt;]+)&lt;)g;\nprint @fieldvalues;\n</code></pre>\n\n<p>Because it captures 'one or more' characters that are anything <em>other</em> than <code>&lt;</code>. </p>\n\n<pre><code>$VAR1 = [\n          'SWCR000178',\n          'Approved',\n          'Something is broken'\n        ];\n</code></pre>\n\n<p>I'd suggest too</p>\n\n<ul>\n<li>turn on <code>strict</code> and <code>warnings</code>.</li>\n<li>use 3 arg open with lexical filehandles: <code>open ( my $input, '&lt;', \"filename_here\") or die $!;</code></li>\n</ul>\n\n<p>And this is actually a rather handy place to use a hash:</p>\n\n<pre><code>#!c:\\Strawberry\\perl\\bin\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy @records; \n\nwhile ( &lt;DATA&gt; ) {\n   my %record = m/(\\w+)        #capture one or more words \n                    \\&gt;         #literal\n                    ([^&lt;]+)    #capture one or more 'something that isn't a &lt;'\n                 /gx;          #repeat capture; ignore whitespace so I can format.\n   push ( @records, \\%record ); \n}\n\nprint Dumper \\@records;\n\n__DATA__\n&lt;record&gt;SWCR000178&lt;/record&gt;&lt;state&gt;Approved&lt;/state&gt;&lt;title&gt;Something is broken&lt;/title&gt;\n</code></pre>\n\n<p>This gives us and array of hashes containing your data. </p>\n\n<pre><code>$VAR1 = [\n          {\n            'state' =&gt; 'Approved',\n            'title' =&gt; 'Something is broken',\n            'record' =&gt; 'SWCR000178'\n          }\n        ];\n</code></pre>\n\n<p>More seriously though - you've just been tripped over by yet another of the reasons why parsing <code>XML</code> with regex isn't a good idea.... </p>\n"}], "owner": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 33264214, "answer_count": 1, "score": 0, "last_activity_date": 1445444480, "creation_date": 1445443431, "last_edit_date": 1445443590, "question_id": 33264082, "link": "https://stackoverflow.com/questions/33264082/regexp-code-pushes-unwanted-blank-elements-into-array", "title": "Regexp Code Pushes Unwanted Blank Elements Into Array", "body": "<p>I am populating an array of data per the example below and getting extra blank elements.  You guys helped me with a regular expression yesterday that I ran with and have been using in many different functions.  I tried to use the same logic you taught me but can't figure out why I am getting extra blank elements when extracting data between a \">\" and \"&lt;\".</p>\n\n<p>Thank you very much!\n-Matt </p>\n\n<p>Data present in inputFile.txt:</p>\n\n<pre><code>&lt;record&gt;SWCR000178&lt;/record&gt;&lt;state&gt;Approved&lt;/state&gt;&lt;title&gt;Something is broken&lt;/title&gt;\n</code></pre>\n\n<p>Perl code:</p>\n\n<pre><code>open $inFile, $inputFile or die $!;\n\nwhile ($inFileLine = &lt;$inFile&gt;) {   \n@fieldNames = $inFileLine =~ m(&lt;\\/(.*?)&gt;)g;\n**@fieldValues = $inFileLine =~ m(&gt;(.*?)&lt;)g; #This packs array with blank elements**\n$recordNumber = @fieldValues[0];\n\nprint \"Field Names: @fieldNames\\n\";\n    $fieldNamesArraySize = @fieldNames;\n    print \"Field Names Array Size: $fieldNamesArraySize\\n\";\nprint \"Field Values: @fieldValues\\n\";\n    $fieldValuesArraySize = @fieldValues;\n    print \"Field Values Array Size: $fieldValuesArraySize\\n\";\nprint \"Record Number: $recordNumber\";\n\n}\n\nclose $inFile;\n</code></pre>\n"}, {"tags": ["arrays", "perl", "subroutine"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445442244, "post_id": 33263571, "comment_id": 54328511, "body": "This would really benefit from some sample data. And using <code>strict</code> and <code>warnings</code>. As it is, it&#39;s really hard to tell if there&#39;s a even a problem in this piece of code you&#39;ve quoted, as it could easily just not be there."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 0, "last_activity_date": 1445442554, "creation_date": 1445442554, "answer_id": 33263755, "question_id": 33263571, "link": "https://stackoverflow.com/questions/33263571/modifications-to-array-also-change-other-array/33263755#33263755", "title": "Modifications to array also change other array", "body": "<p>That's because it's an array of arrays. The first level array stores only references to the inner arrays, if you modify the inner array, it's changed in both arrays - they both refer to the same array. <a href=\"http://p3rl.org/Clone\" rel=\"nofollow\">Clone</a> the deep copy instead of creating a shallow one.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1445442969, "last_edit_date": 1445442969, "creation_date": 1445442627, "answer_id": 33263782, "question_id": 33263571, "link": "https://stackoverflow.com/questions/33263571/modifications-to-array-also-change-other-array/33263782#33263782", "title": "Modifications to array also change other array", "body": "<p>I think your problem will <em>probably</em> be this:</p>\n\n<pre><code>$p0e[$i] = $p[$f{\"rank\"}{$r}]; # save chromosome\n</code></pre>\n\n<p>Because it looks like <code>@p</code> is a multi-dimensional array.</p>\n\n<p>The problem is - the way perl 'does' multi dimensional arrays is via arrays of references. So if you copy an inner array, you do so by reference. </p>\n\n<p>E.g.:</p>\n\n<pre><code>#!c:\\Strawberry\\perl\\bin\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy @list = ( [ 1, 2, 3 ],\n             [ 4, 5, 6 ],\n             [ 7, 8, 9 ], );\n\n             print Dumper \\@list; \n\nmy @other_list;\npush ( @other_list, @list[0,1] ); #make a sub list of two rows;\nprint Dumper \\@other_list; \n\n\n### all looks good.\n## but if we:\n\nprint \"List:\\n\";\nprint join (\"\\n\",@list),\"\\n\";\nprint \"Other List:\\n\";\nprint join (\"\\n\", @other_list),\"\\n\";\n\n$list[1][1] = 9;\n\nprint Dumper \\@other_list;\n</code></pre>\n\n<p>You will see that by changing an element in <code>@list</code> we also modify <code>@other_list</code> - and if we just <code>print</code> them we get:</p>\n\n<pre><code>List:\nARRAY(0x2ea384)\nARRAY(0x12cef34)\nARRAY(0x12cf024)\nOther List:\nARRAY(0x2ea384)\nARRAY(0x12cef34)\n</code></pre>\n\n<p>Note the duplicate numbers - that means you have the same reference. </p>\n\n<p>The easiest way of working around this is by using <code>[]</code> judicously:</p>\n\n<pre><code>push ( @other_list, [@{$list[0]}], [@{$list[1]}] ); #make a sub list of two rows;\n</code></pre>\n\n<p>This will then insert anonymous arrays (new ones) containing the dereferenced elements of the list.</p>\n\n<p>Whilst we're at it though - please turn on <code>strict</code> and <code>warnings</code>. They will save you a lot of pain in the long run. </p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 2, "last_activity_date": 1445442729, "creation_date": 1445442729, "answer_id": 33263817, "question_id": 33263571, "link": "https://stackoverflow.com/questions/33263571/modifications-to-array-also-change-other-array/33263817#33263817", "title": "Modifications to array also change other array", "body": "<pre><code>$j = $f{\"rank\"}{$r};\n$p0e[$i] = $p[$j];\n</code></pre>\n\n<p><code>$p[$j]</code> is an array <em>reference</em>, which you can think of as pointing to a particular list of data at a particular memory address. The assignment to <code>$p0e[$i]</code> also tells Perl to let the <code>$i</code>-th row of <code>@p0e</code> also refer to that same block of memory. So when you later make a change to <code>$p0e[$i][$k]</code>, you'll find the value of <code>$p[$j][$k]</code> has changed too.</p>\n\n<p>To fix this, you'll want to assign a <em>copy</em> of <code>$p[$j]</code>. Here is one way you can do that:</p>\n\n<pre><code>$p0e[$i] = [ @{$p[$j]} ];\n</code></pre>\n\n<p><code>@{$p[$j]}</code> deferences the array reference and <code>[...]</code> creates a new reference for it, so after this statement <code>$p0e[$i]</code> will have the same contents with the same values as <code>$p[$j]</code> but point to a different block of memory.</p>\n"}], "owner": {"reputation": 1510, "user_id": 1184934, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/283cb558c14cd2b49411ac4bb1eb1d5d?s=128&d=identicon&r=PG", "display_name": "charles hendry", "link": "https://stackoverflow.com/users/1184934/charles-hendry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 33263817, "answer_count": 3, "score": 1, "last_activity_date": 1445443615, "creation_date": 1445442015, "last_edit_date": 1445443615, "question_id": 33263571, "link": "https://stackoverflow.com/questions/33263571/modifications-to-array-also-change-other-array", "title": "Modifications to array also change other array", "body": "<p>I have two global multidimensional arrays <code>@p</code> and <code>@p0e</code> in Perl. This is part of a genetic algorith where I want to save certain keys from <code>@p</code> to <code>@p0e</code>. Modifications are then made to <code>@p</code>. There are several subroutines that make modifications to <code>@p</code>, but there's a certain subroutine where on occasion (not on every iteration) a modification to <code>@p</code> also leads to <code>@p0e</code> being modified (it receives the same keys) although <code>@p0e</code> should not be affected.</p>\n\n<pre><code># this is the sub where part of @p is copied to @p0e\nsub saveElite {\n    @p0e = (); my $i = 0;\n\n    foreach my $r (sort({$a&lt;=&gt;$b} keys $f{\"rank\"})) {\n        if ($i&lt;$elN) {\n            $p0e[$i] = $p[$f{\"rank\"}{$r}]; # save chromosome\n        }\n        else {last;}\n        $i++;\n    }\n}\n\n# this is the sub that then sometimes changes @p0e\nsub mutation {\n    for (my $i=0; $i&lt;@p; $i++) {\n        for (my $j=0; $j&lt;@{$p[$i]}; $j++) {\n            if (rand(1)&lt;=$mut) { # mutation\n                $p[$i][$j] = mutate($p[$i][$j]);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I thought maybe I'd somehow created a reference to the original array rather than a copy, but because this unexpected behaviour doesn't happen on every iteration this shouldn't be the case.</p>\n"}, {"tags": ["linux", "perl", "system-calls", "mount"], "answers": [{"comments": [{"owner": {"reputation": 5667, "user_id": 784669, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e2fa0d64ff94bb8f99068c033a9f6fa7?s=128&d=identicon&r=PG", "display_name": "josch", "link": "https://stackoverflow.com/users/784669/josch"}, "edited": false, "score": 0, "creation_date": 1445445200, "post_id": 33264052, "comment_id": 54330398, "body": "You sir/madam just made my day! I now see that the docs of <code>syscall</code> say &quot;You can&#39;t use a string literal (or other read-only string) as an argument&quot;... silly me, I should&#39;ve RTFM... Nevertheless, since you just saved me many headaches I wish you many upvotes :)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 8, "last_activity_date": 1445445793, "last_edit_date": 1445445793, "creation_date": 1445443354, "answer_id": 33264052, "question_id": 33263510, "link": "https://stackoverflow.com/questions/33263510/executing-mount-system-call-from-perl/33264052#33264052", "title": "Executing mount system call from perl", "body": "<p><a href=\"http://perldoc.perl.org/functions/syscall.html\" rel=\"noreferrer\"><code>syscall</code></a> refuses to pass a pointer to the string buffer of a constant since it has no idea if the argument is <code>char *</code> or <code>const char *</code>.</p>\n\n<blockquote>\n  <p>You can't use a string literal (or other read-only string) as an argument to syscall because Perl has to assume that any string pointer might be written through</p>\n</blockquote>\n\n<p>The solution is simple. Just copy the constant into a variable first.</p>\n\n<pre><code>my $ret = syscall(&amp;SYS_mount, my $s=\"/proc\", my $t=\"/path/to/my/mount/point\", 0, 0, 0);\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>$ perl -E'\n   require \"syscall.ph\";\n   my $ret = syscall(&amp;SYS_mount, \"/proc\", \"/path/to/my/mount/point\", 0, 0, 0);\n   say $ret;\n'\nModification of a read-only value attempted at -e line 3.\n\n$ perl -E'\n   require \"syscall.ph\";\n   my $ret = syscall(&amp;SYS_mount, my $s=\"/proc\", my $t=\"/path/to/my/mount/point\", 0, 0, 0);\n   say $ret;\n'\n-1\n\n$ strace perl -e'\n   require \"syscall.ph\";\n   syscall(&amp;SYS_mount, my $s=\"/proc\", my $t=\"/path/to/my/mount/point\", 0, 0, 0);\n' 2&gt;&amp;1 | grep mount\nmount(\"/proc\", \"/path/to/my/mount/point\", NULL, 0, NULL) = -1 ENOENT (No such file or directory)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 645, "user_id": 1507619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3361ffe35af2b9095ccdb5b4e56d61f3?s=128&d=identicon&r=PG", "display_name": "Nuxwin", "link": "https://stackoverflow.com/users/1507619/nuxwin"}, "is_accepted": false, "score": 1, "last_activity_date": 1506083728, "last_edit_date": 1506083728, "creation_date": 1473016794, "answer_id": 39320617, "question_id": 33263510, "link": "https://stackoverflow.com/questions/33263510/executing-mount-system-call-from-perl/39320617#39320617", "title": "Executing mount system call from perl", "body": "<p>You can find a full implementation in Perl here: <a href=\"https://github.com/i-MSCP/imscp/blob/1.5.x/engine/PerlLib/iMSCP/Mount.pm\" rel=\"nofollow noreferrer\">https://github.com/i-MSCP/imscp/blob/1.5.x/engine/PerlLib/iMSCP/Mount.pm</a></p>\n"}], "owner": {"reputation": 5667, "user_id": 784669, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e2fa0d64ff94bb8f99068c033a9f6fa7?s=128&d=identicon&r=PG", "display_name": "josch", "link": "https://stackoverflow.com/users/784669/josch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 952, "favorite_count": 1, "accepted_answer_id": 33264052, "answer_count": 2, "score": 5, "last_activity_date": 1506083728, "creation_date": 1445441848, "last_edit_date": 1445455907, "question_id": 33263510, "link": "https://stackoverflow.com/questions/33263510/executing-mount-system-call-from-perl", "title": "Executing mount system call from perl", "body": "<p>How can the <code>mount</code> system call be done from perl? The following:</p>\n\n<pre><code>$ret = syscall(&amp;SYS_mount, \"/proc\", \"/path/to/my/mount/point\", 0, 0, 0);\n</code></pre>\n\n<p>results in:</p>\n\n<pre><code>Modification of a read-only value attempted at ...\n</code></pre>\n\n<p>I cannot call the <code>mount</code> program using <code>system</code> because I need to make a <code>mount()</code> system call that the <code>mount</code> program doesn't seem to be capable of. More specifically, I need to call:</p>\n\n<pre><code>mount(\"/proc\", \"/path/to/my/mpoint/point\", NULL, MS_REC|MS_PRIVATE|MS_BIND, NULL);\n</code></pre>\n\n<p>But if I try to run the following with an unprivileged unshared mount linux namespace:</p>\n\n<pre><code>mount --make-rprivate --bind /proc /path/to/my/mountpoint\n</code></pre>\n\n<p>Then I get the following error:</p>\n\n<pre><code>mount: wrong fs type, bad option, bad superblock on /proc,\n       missing codepage or helper program, or other error\n\n       In some cases useful info is found in syslog - try\n       dmesg | tail or so.\n</code></pre>\n\n<p>Using <code>strace</code> reveals that what the <code>mount</code> program actually does is to call:</p>\n\n<pre><code>mount(\"/proc\", \"/path/to/my/mountpoint\", ..., MS_MGC_VAL|MS_BIND, NULL);\nmount(\"none\", \"/path/to/my/mointpoint\", NULL, MS_REC|MS_PRIVATE, NULL);\n</code></pre>\n\n<p>But this splitting of options does not work. I need <code>MS_BIND</code> and <code>MS_REC|MS_PRIVATE</code> in a single call to the <code>mount</code> system call for it to work in an unprivileged unshared mount namespace.</p>\n\n<p>So how can I do my initial system call in perl without the error message about an attempt of a modification of a read-only value?</p>\n\n<p><strong>edit</strong>:</p>\n\n<p>Thankfully ikegami was quick to point out what i did wrong when trying to use perl's <code>syscall</code> function but in case somebody finds this when searching for how to bind mount a directory from within an unprivileged mount namespace with just the <code>mount</code> command line utility, here is how:</p>\n\n<pre><code>mount --rbind /proc /path/to/my/mountpoint\n</code></pre>\n\n<p>This in turn will call the following syscall internally:</p>\n\n<pre><code>mount(\"proc\", \"/path/to/my/mountpoint\", ..., MS_MGC_VAL|MS_BIND|MS_REC, 0);\n</code></pre>\n\n<p>The <code>MS_MGC_VAL</code> flag just seems to be for backwards compatibility with kernel versions prior to 2.4. The important bits are <code>MS_BIND</code> (for doing the bind mounting itself) and <code>MS_REC</code> (for doing it recursively so that directories that have their content hidden by other mounts being done into them do not have their content exposed in the mount namespace).</p>\n\n<p>So now I have to decide whether I go with a perl <code>system</code> function call or just do the <code>mount</code> systemcall because both work just as well :)</p>\n"}, {"tags": ["perl", "sqlite"], "answers": [{"comments": [{"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1445499962, "post_id": 33263048, "comment_id": 54352095, "body": "Doing the explicit <code>decode_utf8</code> helps but I have no idea why. What happens during a <code>decode_utf8</code> on a system where the locale is set to UTF-8 and where the DBI target also wants UTF-8?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1445517176, "post_id": 33263048, "comment_id": 54362593, "body": "That&#39;s the thing. It&#39;s not quite UTF-8 DBI wants"}, {"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1445519088, "post_id": 33263048, "comment_id": 54363764, "body": "I spend almost the whole morning reading about obscure Perl Unicode problems. And what I understood so far is, that <code>decode_utf8</code> enables Perl&#39;s UTF-8 flag. And that is what DBI seems to want. Maybe the reason might be that the default for Perl source code was in the past Latin-1 and most SQL statements are part of the Perl source. And this could be the reason why DBI treats every string as Latin-1. This would make it necessary to turn on the UTF-8 flag to prevent the default. But this are just conjectures. The problem seems to be Sqlite specific. MySQL does not seem to have the problem."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1445519271, "post_id": 33263048, "comment_id": 54363875, "body": "Decoded strings should be what it excepts. It&#39;s actually more complicated than that, but I don&#39;t want to go into the details of The Unicode Bug today."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1445461416, "last_edit_date": 1445461416, "creation_date": 1445440487, "answer_id": 33263048, "question_id": 33262748, "link": "https://stackoverflow.com/questions/33262748/how-to-pass-unicode-correctly-to-perls-dbi-layer/33263048#33263048", "title": "How to pass Unicode correctly to Perl&#39;s DBI layer?", "body": "<p>The first question you need to ask yourself is:</p>\n\n<blockquote>\n  <p>Should the query be encoded (and if so, in which encoding), or should it be decoded (i.e. Unicode Code Points)?</p>\n</blockquote>\n\n<p>This should be based on <code>sqlite_unicode</code>, but it's not. That only affects returned strings. I suspect that DBD::SQLite, like most/all DBDs, suffer from The Unicode Bug, which means the answer to the question is based on internal details of how the string is stored.</p>\n\n<p>In a UTF-8 system, it usually \"just works\", and I'm surprised it doesn't here. Please try</p>\n\n<pre><code>use Encode qw( decode_utf8 );\n\nmy $sql = decode_utf8(shift);\n</code></pre>\n\n<p>If that doesn't work, please provide the output the following (before you shift the query out of <code>@ARGV</code>):</p>\n\n<pre><code>use Devel::Peek qw( Dump );\nDump($ARGV[0]);\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p><em>When I mask the '\u00fc' it seems to work, although I am not sure, if the <code>\\x{fc}</code> means Latin 1 FC or Unicode <code>U+00FC</code>.</em></p>\n</blockquote>\n\n<p>The question doesn't make any sense. In both iso-latin-1 and Unicode, <code>FC</code> is \"\u00fc\". I believe you are actually asking</p>\n\n<blockquote>\n  <p>Are the returned strings encoded using iso-latin-1, or are they decoded strings (i.e. Unicode Code Points)?</p>\n</blockquote>\n\n<p>With <code>sqlite_unicode</code>, they are the latter. You'll need to encode your output. You can do so as follows:</p>\n\n<pre><code>use open ':std', ':encoding(UTF-8)';\n</code></pre>\n"}], "owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 759, "favorite_count": 0, "accepted_answer_id": 33263048, "answer_count": 1, "score": 3, "last_activity_date": 1445461416, "creation_date": 1445439633, "question_id": 33262748, "link": "https://stackoverflow.com/questions/33262748/how-to-pass-unicode-correctly-to-perls-dbi-layer", "title": "How to pass Unicode correctly to Perl&#39;s DBI layer?", "body": "<p>I have the following simple Perl wrapper for a Sqlite database:</p>\n\n<pre><code>#! /usr/bin/perl\n\nuse strict;\nuse warnings;\nuse DBI;\nuse Data::Dumper;\n\nmy $sql = shift;\n\nmy $dbh = DBI-&gt;connect(\n    \"dbi:SQLite:dbname=data.sqlite3\",\n    \"\", # no user\n    \"\", # no pw\n    {\n        RaiseError =&gt; 1,\n        sqlite_unicode =&gt; 1\n    },\n) || die $DBI::errstr;\n\nmy $sth = $dbh-&gt;prepare($sql);\n$sth-&gt;execute();\n\nprint Dumper ($sth-&gt;fetchall_arrayref({}));\n\n$sth-&gt;finish();\n$dbh-&gt;disconnect();\n</code></pre>\n\n<p>Although I have set <code>sqlite_unicode</code> flag, <a href=\"http://search.cpan.org/~ishigaki/DBD-SQLite-1.48/lib/DBD/SQLite.pm#Unicode_handling\" rel=\"nofollow\">as explained in the documentation</a>, I can not execute queries containing Unicode characters:</p>\n\n<pre><code>$ ./sqlite.pl \"select * from person where lastname = 'Sch\u00fctte'\"\n$VAR1 = [];\n</code></pre>\n\n<p>When I mask the '\u00fc' it seems to work, although I am not sure, if the <code>\\x{fc}</code> means <a href=\"https://en.wikipedia.org/wiki/%C3%9C#Computing_codes\" rel=\"nofollow\">Latin 1 <code>FC</code> or Unicode <code>U+00FC</code></a>.</p>\n\n<pre><code>$ ./sqlite.pl \"select * from person where lastname like 'Sch%tte'\"\n$VAR1 = [\n          {\n            'id' =&gt; 8,\n            'firstname' =&gt; undef,\n            'lastname' =&gt; \"Sch\\x{fc}tte\"\n          }\n        ];\n</code></pre>\n\n<p>When I do the same with the Sqlite command line tool it works fine:</p>\n\n<pre><code>$ sqlite3 data.sqlite3 \"select * from person where lastname = 'Sch\u00fctte'\"\n8||Sch\u00fctte\n</code></pre>\n\n<p>Did I forget anything to tell the DBI layer to support Unicode characters?</p>\n\n<p>My local encoding is UTF-8:</p>\n\n<pre><code>$ locale\nLANG=de_DE.utf8\nLANGUAGE=\nLC_CTYPE=\"de_DE.utf8\"\nLC_NUMERIC=\"de_DE.utf8\"\nLC_TIME=\"de_DE.utf8\"\nLC_COLLATE=\"de_DE.utf8\"\nLC_MONETARY=\"de_DE.utf8\"\nLC_MESSAGES=\"de_DE.utf8\"\nLC_PAPER=\"de_DE.utf8\"\nLC_NAME=\"de_DE.utf8\"\nLC_ADDRESS=\"de_DE.utf8\"\nLC_TELEPHONE=\"de_DE.utf8\"\nLC_MEASUREMENT=\"de_DE.utf8\"\nLC_IDENTIFICATION=\"de_DE.utf8\"\nLC_ALL=\n</code></pre>\n"}, {"tags": ["perl", "syslog"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1445434433, "post_id": 33260192, "comment_id": 54322542, "body": "In the source code there is no such <code>END</code> block. The /eg and the /t don&#39;t seem to have anything in that regard either. Have you tried it?"}, {"owner": {"reputation": 14059, "user_id": 16777, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e5c5dd043eb3a8c0b3639fd41844d30e?s=128&d=identicon&r=PG", "display_name": "Kev", "link": "https://stackoverflow.com/users/16777/kev"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1445434837, "post_id": 33260192, "comment_id": 54322800, "body": "@simbabque, I didn&#39;t see any either.  What are the /eg and the /t?  Also I&#39;m not sure exactly what happens if closelog() is not run that would indicate to me whether it worked or not; hence my asking here.  How would you test for it?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1445435029, "post_id": 33260192, "comment_id": 54322956, "body": "Well, it&#39;s a Perl module, even if it&#39;s in core. So it&#39;s on CPAN. There you can browse it: <a href=\"https://metacpan.org/source/SAPER/Sys-Syslog-0.33\" rel=\"nofollow noreferrer\">metacpan.org/source/SAPER/Sys-Syslog-0.33</a> - I don&#39;t know a good way to test it unfortunately as I don&#39;t really know what it does. Maybe get a clean virtual machine and just try opening the log, writing something and making the program <code>die</code>. You&#39;ll see what happens. :)"}, {"owner": {"reputation": 14059, "user_id": 16777, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e5c5dd043eb3a8c0b3639fd41844d30e?s=128&d=identicon&r=PG", "display_name": "Kev", "link": "https://stackoverflow.com/users/16777/kev"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1445435818, "post_id": 33260192, "comment_id": 54323574, "body": "@simbabque I did look at the source, but I wasn&#39;t sure if there was another way it might be accomplishing this.  What are /eg and /t?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1445435920, "post_id": 33260192, "comment_id": 54323657, "body": "The <code>&#47;t</code> directory is where the tests are in the distribution. <code>&#47;eg</code> is sometimes there too. It contains examples. See the browse distribution feature on metacpan from the link in my above comment."}, {"owner": {"reputation": 3361, "user_id": 5395288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pw0Jz.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5395288/michael"}, "edited": false, "score": 0, "creation_date": 1445468684, "post_id": 33260192, "comment_id": 54342535, "body": "Just call closelog() before you exit for the sake of finickity cleaning up, and if you crash, don&#39;t worry about it. Everything will be fine."}], "answers": [{"comments": [{"owner": {"reputation": 14059, "user_id": 16777, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e5c5dd043eb3a8c0b3639fd41844d30e?s=128&d=identicon&r=PG", "display_name": "Kev", "link": "https://stackoverflow.com/users/16777/kev"}, "edited": false, "score": 0, "creation_date": 1445516175, "post_id": 33280261, "comment_id": 54361940, "body": "What&#39;s meant by &#39;most cases&#39;?"}, {"owner": {"reputation": 149, "user_id": 5470067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5ece1b9d92664f27aad6660b248daab?s=128&d=identicon&r=PG&f=1", "display_name": "Mike.pm", "link": "https://stackoverflow.com/users/5470067/mike-pm"}, "reply_to_user": {"reputation": 14059, "user_id": 16777, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e5c5dd043eb3a8c0b3639fd41844d30e?s=128&d=identicon&r=PG", "display_name": "Kev", "link": "https://stackoverflow.com/users/16777/kev"}, "edited": false, "score": 1, "creation_date": 1445520634, "post_id": 33280261, "comment_id": 54364737, "body": "&#39;most cases&#39; means cases with ordinary scripts when the Perl interpreter terminates on exit/die of your script. Exclusions are special environments like mod_perl for example: process doesn&#39;t exit if your script dies."}], "tags": [], "owner": {"reputation": 149, "user_id": 5470067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5ece1b9d92664f27aad6660b248daab?s=128&d=identicon&r=PG&f=1", "display_name": "Mike.pm", "link": "https://stackoverflow.com/users/5470067/mike-pm"}, "is_accepted": true, "score": 1, "last_activity_date": 1445520981, "last_edit_date": 1445520981, "creation_date": 1445514365, "answer_id": 33280261, "question_id": 33260192, "link": "https://stackoverflow.com/questions/33260192/does-syssyslog-call-closelog-for-you-if-your-script-dies/33280261#33280261", "title": "Does Sys::Syslog call closelog() for you if your script die()s?", "body": "<p>Sys::Syslog <strong>doesn't</strong> call <code>closelog()</code> on exit. Look at <code>closelog()</code> or <code>disconnect_log()</code> calls in <a href=\"https://metacpan.org/source/SAPER/Sys-Syslog-0.33/Syslog.pm\" rel=\"nofollow\">https://metacpan.org/source/SAPER/Sys-Syslog-0.33/Syslog.pm</a>.</p>\n\n<p>But in most cases it's safe to omit <code>closelog()</code> on exit/die in your script: descriptors will be closed on process exit anyway.</p>\n\n<p><em>most cases</em> means cases with ordinary scripts when the Perl interpreter terminates on exit/die of your script. Exclusions are special environments like mod_perl for example: process doesn't exit if your script dies.</p>\n"}], "owner": {"reputation": 14059, "user_id": 16777, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e5c5dd043eb3a8c0b3639fd41844d30e?s=128&d=identicon&r=PG", "display_name": "Kev", "link": "https://stackoverflow.com/users/16777/kev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 33280261, "answer_count": 1, "score": 1, "last_activity_date": 1445520981, "creation_date": 1445432815, "last_edit_date": 1445434013, "question_id": 33260192, "link": "https://stackoverflow.com/questions/33260192/does-syssyslog-call-closelog-for-you-if-your-script-dies", "title": "Does Sys::Syslog call closelog() for you if your script die()s?", "body": "<p>This is maybe a point of grammar, but anyhow, just to clarify... <a href=\"http://perldoc.perl.org/Sys/Syslog.html#THE-RULES-OF-SYS::SYSLOG\" rel=\"nofollow\">perldoc on Sys::Syslog</a> states:</p>\n\n<blockquote>\n  <p>The Third Rule of Sys::Syslog is: The program crashes, dies, calls\n  closelog , the log is over.</p>\n</blockquote>\n\n<p>If 'the program' refers to the whole thing, my script and Sys::Syslog included, does that mean Sys::Syslog does the closelog() calling for me?</p>\n\n<p>If not, does this mean I should put <code>closelog()</code> in an END block?</p>\n"}, {"tags": ["html", "mysql", "perl", "encode", "utf8-decode"], "comments": [{"owner": {"reputation": 3744, "user_id": 5139222, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g8Gvu.jpg?s=128&g=1", "display_name": "KuKeC", "link": "https://stackoverflow.com/users/5139222/kukec"}, "edited": false, "score": 1, "creation_date": 1445432077, "post_id": 33259166, "comment_id": 54320818, "body": "You need to check your ETL process because it dumps data into new database in wrong encoding . That should fix your problem"}, {"owner": {"reputation": 344, "user_id": 1254174, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/2416cff2f4d8dd65a5bf52228d86208a?s=128&d=identicon&r=PG", "display_name": "Ash_and_Perl", "link": "https://stackoverflow.com/users/1254174/ash-and-perl"}, "reply_to_user": {"reputation": 3744, "user_id": 5139222, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g8Gvu.jpg?s=128&g=1", "display_name": "KuKeC", "link": "https://stackoverflow.com/users/5139222/kukec"}, "edited": false, "score": 0, "creation_date": 1445870348, "post_id": 33259166, "comment_id": 54492239, "body": "As suggested by @KuKeC, I tried looking into the DB side, Found this approach in one of the discussion in this website. Link: <a href=\"http://stackoverflow.com/questions/9407834/mysql-convert-latin1-characters-on-a-utf8-table-into-utf8\">link</a>. what do you think about the solution in this link."}], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1445439340, "post_id": 33260877, "comment_id": 54326351, "body": "<code>say join &#39; &#39;, map { sprintf &#39;%04X&#39;, ord } split &#47;&#47;, $xx;</code> could be simplified somewhat using <code>printf &quot;%*v04X\\n&quot;, &quot; &quot;, $xx;</code>"}, {"owner": {"reputation": 344, "user_id": 1254174, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/2416cff2f4d8dd65a5bf52228d86208a?s=128&d=identicon&r=PG", "display_name": "Ash_and_Perl", "link": "https://stackoverflow.com/users/1254174/ash-and-perl"}, "edited": false, "score": 0, "creation_date": 1445870294, "post_id": 33260877, "comment_id": 54492200, "body": "@Borodin Thanks for the detailed explanation. I was searching for other solution where I can handle it. As suggested by KuKeC, I tried looking into the DB side, Found this approach in one of the discussion in this website. Link: <a href=\"http://stackoverflow.com/questions/9407834/mysql-convert-latin1-characters-on-a-utf8-table-into-utf8\">link</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 344, "user_id": 1254174, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/2416cff2f4d8dd65a5bf52228d86208a?s=128&d=identicon&r=PG", "display_name": "Ash_and_Perl", "link": "https://stackoverflow.com/users/1254174/ash-and-perl"}, "edited": false, "score": 0, "creation_date": 1445871273, "post_id": 33260877, "comment_id": 54492893, "body": "@Ash_and_Perl: I&#39;m sorry if I was unclear. There are many ways that your data could have got into that state, because there are many steps on the way from your original database insert, through the internet, to my copy and paste from your question. It&#39;s possible that a simple <code>mysql_set_charset(&#39;utf8&#39;)</code> would fix things, but pointing the finger at the ETL process is a very narrow choice. I can add that the data that you show coming from your Star database looks like it has been <i>double-encoded</i> in UTF-8, as UTF-8 encoding tends to <i>increase</i> the number of bytes in a string"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 344, "user_id": 1254174, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/2416cff2f4d8dd65a5bf52228d86208a?s=128&d=identicon&r=PG", "display_name": "Ash_and_Perl", "link": "https://stackoverflow.com/users/1254174/ash-and-perl"}, "edited": false, "score": 0, "creation_date": 1445871450, "post_id": 33260877, "comment_id": 54493010, "body": "@Ash_and_Perl: My suggestion was to start debugging this by displaying the text directly after the fetch from the original database using the code fragment that I showed you. Rendering the contents of the string in hex prevents it from being corrupted by any subsequent encode or decode, or transmission over the internet, so you could publish your findings -- perhaps in a further question -- with certain knowledge that we can see exactly the data you are dealing with"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1445482759, "last_edit_date": 1445482759, "creation_date": 1445434678, "answer_id": 33260877, "question_id": 33259166, "link": "https://stackoverflow.com/questions/33259166/do-i-need-to-encode-or-decode/33260877#33260877", "title": "Do I need to encode or decode?", "body": "<p>In general, the rule is that you should <em>decode</em> text coming from an external source, and <em>encode</em> text being sent to en external sink. In your case you are fetching what looks like UTF-8-encoded data from a database, so you should be <em>decoding</em> it as such. But it looks like it has been partially decoded. Take a look at this program</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use utf8;\nuse strict;\nuse warnings;\nuse feature 'say';\n\nmy $xx = '\u00d8\u00a3\u00d8\u00ae\u00d9\u201e\u00d8\u00a7\u00d9\u201a\u00d9\u0160\u00d8\u00a7\u00d8\u00aa \u00d8\u00a7\u00d9\u201e\u00d8\u00a3\u00d8\u00b9\u00d9\u2026\u00d8\u00a7\u00d9\u201e \u00d8\u00a7\u00d9\u201e\u00d9\u2026\u00d9\u02c6\u00d8\u00b6\u00d9\u02c6\u00d8\u00b9';\nmy $yy = '\u0623\u062e\u0644\u0627\u0642\u064a\u0627\u062a \u0627\u0644\u0623\u0639\u0645\u0627\u0644 \u0627\u0644\u0645\u0648\u0636\u0648\u0639';\nutf8::encode($yy);\n\nsay length $xx;\nsay join ' ', map { sprintf '%04X', ord } split //, $xx;\n\nsay length $yy;\nsay join ' ', map { sprintf '%04X', ord } split //, $yy;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>46\n00D8 00A3 00D8 00AE 00D9 201E 00D8 00A7 00D9 201A 00D9 0160 00D8 00A7 00D8 00AA 0020 00D8 00A7 00D9 201E 00D8 00A3 00D8 00B9 00D9 2026 00D8 00A7 00D9 201E 0020 00D8 00A7 00D9 201E 00D9 2026 00D9 02C6 00D8 00B6 00D9 02C6 00D8 00B9\n46\n00D8 00A3 00D8 00AE 00D9 0084 00D8 00A7 00D9 0082 00D9 008A 00D8 00A7 00D8 00AA 0020 00D8 00A7 00D9 0084 00D8 00A3 00D8 00B9 00D9 0085 00D8 00A7 00D9 0084 0020 00D8 00A7 00D9 0084 00D9 0085 00D9 0088 00D8 00B6 00D9 0088 00D8 00B9\n</code></pre>\n\n<p>This shows the Unicode code points for each character in the string you are fetching directly from the database, and the Arabic text that it should represent <em>encoded in UTF-8 bytes</em>. As you can see, everything matches nicely except for the occasional values between 0x82 and 0x8A, which are replaced in the database text by wide other wide Unicode characters like this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>0082 =&gt; 201A,\n0084 =&gt; 201E,\n0085 =&gt; 2026,\n0088 =&gt; 02C6,\n008A =&gt; 0160,\n</code></pre>\n\n<p>It's clear that what you are retrieving from your database is supposed to be UTF-8-encoded text, so it should be nothing but byte values, so I'm struggling to understand what those wide characters are doing in there</p>\n\n<p>So the short answer is that you should <code>use Encode</code> and <code>decode_utf8</code> the strings that you fetch from the database. But those wide characters will break that approach so you need to find out why you're getting them</p>\n\n<p>I suggest you use the line from my program that dumps a string in hex values, and apply it directly after the string is pulled from the database.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>say join ' ', map { sprintf '%04X', ord } split //, $value;\n</code></pre>\n\n<p>That way we can see what is happening first-hand. As it is there is a lot of encoding/decoding going on between your program, via the Stack Overflow server to my desktop, and any of those stages may be the culprit</p>\n"}, {"tags": [], "owner": {"reputation": 158, "user_id": 1259625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf5c60de73f1d44149fee543d8cec19c?s=128&d=identicon&r=PG", "display_name": "Csson", "link": "https://stackoverflow.com/users/1259625/csson"}, "is_accepted": false, "score": 0, "last_activity_date": 1445722576, "creation_date": 1445722576, "answer_id": 33323627, "question_id": 33259166, "link": "https://stackoverflow.com/questions/33259166/do-i-need-to-encode-or-decode/33323627#33323627", "title": "Do I need to encode or decode?", "body": "<p>I'm not sure if Arabic is affected by this, but MySql's <code>utf8</code> encoding is not always what one wants. After reading <a href=\"https://mathiasbynens.be/notes/mysql-utf8mb4\" rel=\"nofollow\">this</a> I always use the <code>utf8mb4</code> encoding.</p>\n\n<p>If nothing else works it might be worth trying that on a local copy.</p>\n"}], "owner": {"reputation": 344, "user_id": 1254174, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/2416cff2f4d8dd65a5bf52228d86208a?s=128&d=identicon&r=PG", "display_name": "Ash_and_Perl", "link": "https://stackoverflow.com/users/1254174/ash-and-perl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1445722576, "creation_date": 1445430019, "question_id": 33259166, "link": "https://stackoverflow.com/questions/33259166/do-i-need-to-encode-or-decode", "title": "Do I need to encode or decode?", "body": "<p>I have a very strange situation.\nIn our application which is built in perl and mysql. we have legacy tables which are of latin1 charset. one of the user has entered arabic data into this table.\nwhen I run the query to fetch the details from this table, it appears like this.</p>\n\n<p>\u00d8\u00a3\u00d8\u00ae\u00d9\u201e\u00d8\u00a7\u00d9\u201a\u00d9\u0160\u00d8\u00a7\u00d8\u00aa \u00d8\u00a7\u00d9\u201e\u00d8\u00a3\u00d8\u00b9\u00d9\u2026\u00d8\u00a7\u00d9\u201e \u00d8\u00a7\u00d9\u201e\u00d9\u2026\u00d9\u02c6\u00d8\u00b6\u00d9\u02c6\u00d8\u00b9</p>\n\n<p>In the application we have a page where this is displayed and it is displaying Arabic characters correctly.</p>\n\n<p>\u0623\u062e\u0644\u0627\u0642\u064a\u0627\u062a \u0627\u0644\u0623\u0639\u0645\u0627\u0644 \u0627\u0644\u0645\u0648\u0636\u0648\u0639</p>\n\n<p>We have a ETL (Extract, Transform and Load) process which dumps this data to another DB which is of Star architecture. here this data is saved in tables which are UTF-8 charset.</p>\n\n<p>Now when I query this table, the same field appears like this</p>\n\n<p>\u00c3\u02dc\u00c2\u00a3\u00c3\u02dc\u00c2\u00ae\u00c3\u2122\u00e2\u20ac\u017e\u00c3\u02dc\u00c2\u00a7\u00c3\u2122\u00e2\u20ac\u0161\u00c3\u2122\u00c5\u00a0\u00c3\u02dc\u00c2\u00a7\u00c3\u02dc\u00c2\u00aa \u00c3\u02dc\u00c2\u00a7\u00c3\u2122\u00e2\u20ac\u017e\u00c3\u02dc\u00c2\u00a3\u00c3\u02dc\u00c2\u00b9\u00c3\u2122\u00e2\u20ac\u00a6\u00c3\u02dc\u00c2\u00a7\u00c3\u2122\u00e2\u20ac\u017e \u00c3\u02dc\u00c2\u00a7\u00c3\u2122\u00e2\u20ac\u017e\u00c3\u2122\u00e2\u20ac\u00a6\u00c3\u2122\u00cb\u2020\u00c3\u02dc\u00c2\u00b6\u00c3\u2122\u00cb\u2020\u00c3\u02dc\u00c2\u00b9</p>\n\n<p>In the UI, we have another page which displays the data from the new table. Here the Arabic characters are not appearing correctly. This is how it is displayed in the front end.</p>\n\n<p>\u00d8\u00a3\u00d8\u00ae\u00d9\u201e\u00d8\u00a7\u00d9\u201a\u00d9\u0160\u00d8\u00a7\u00d8\u00aa \u00d8\u00a7\u00d9\u201e\u00d8\u00a3\u00d8\u00b9\u00d9\u2026\u00d8\u00a7\u00d9\u201e \u00d8\u00a7\u00d9\u201e\u00d9\u2026\u00d9\u02c6\u00d8\u00b6\u00d9\u02c6\u00d8\u00b9</p>\n\n<p>The above text is similar or same as to the initial input that I saw in the MYSQL DB latin1 table.</p>\n\n<p>How do I get to display the Arabic characters correctly in the page.\nPlease help.</p>\n"}, {"tags": ["perl", "tor"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1445425556, "post_id": 33256934, "comment_id": 54316352, "body": "The first question is probably better suited to the TOR community. I believe it will be very popular there. The actual Perl question with your algorithm described below might be very domain-specific and even a bit broad. I&#39;m not going to close-vote as I think it&#39;s on-topic, but I&#39;m also not very confident about a lot of help here. Best of luck. :)"}], "answers": [{"comments": [{"owner": {"reputation": 64787, "user_id": 892493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UxAIF.png?s=128&g=1", "display_name": "drew010", "link": "https://stackoverflow.com/users/892493/drew010"}, "edited": false, "score": 0, "creation_date": 1445462953, "post_id": 33269565, "comment_id": 54340277, "body": "You picked the correct method, to do it programatically you have to open a connection to the control port and issue the <code>SIGNAL NEWNYM</code> command as you did."}], "tags": [], "owner": {"reputation": 7788, "user_id": 1302716, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/LrNqp.png?s=128&g=1", "display_name": "Hubert Sch&#246;lnast", "link": "https://stackoverflow.com/users/1302716/hubert-sch%c3%b6lnast"}, "is_accepted": false, "score": 4, "last_activity_date": 1445462811, "creation_date": 1445462811, "answer_id": 33269565, "question_id": 33256934, "link": "https://stackoverflow.com/questions/33256934/new-identity-for-tor-using-perl-on-linux/33269565#33269565", "title": "new identity for TOR using perl on linux", "body": "<p>After crawling through manny different documentations I found a solution:</p>\n\n<pre><code>if (my $socket = new IO::Socket::INET(\n            'PeerHost' =&gt; '127.0.0.1',\n            'PeerPort' =&gt; '9051',\n            'Proto'    =&gt; 'tcp')) {\n    my @requ = ('authenticate \"\"','SIGNAL NEWNYM','QUIT');\n    foreach my $requ (@requ) {\n        print $socket $requ.\"\\n\";\n        my $dummy = &lt;$socket&gt;;\n    }\n    $socket-&gt;close();\n    print \"OK: New circuit established\\n\";\n} else {\n    print \"ERROR: couldn't connect with socket\\n\";\n}\n</code></pre>\n\n<p>Explanation:</p>\n\n<pre><code>my $socket = new IO::Socket::INET(\n            'PeerHost' =&gt; '127.0.0.1',\n            'PeerPort' =&gt; '9051',\n            'Proto'    =&gt; 'tcp')\n</code></pre>\n\n<p>creates a new socket object. If this did work, it returns the socket, otherwise <em>undef</em>.</p>\n\n<p>I embedded this statement in an <em>if</em>-Statement. Its first block will be executed if the socket could be created, the second block prints an error message.</p>\n\n<p>In the <em>if</em>-Block, I send this three commants through the socket to TOR:</p>\n\n<ol>\n<li>authenticate \"\"</li>\n<li>SIGNAL NEWNYM</li>\n<li>QUIT</li>\n</ol>\n\n<p>1 performs the null-authentification<br>\n2 does what I really want: This command tells TOR to establish a new circuit.<br>\n3 quits the conversation</p>\n\n<p>At the end I close the socket and print a message.</p>\n\n<p>I don't analyze TOR's response, but I have to read it (with <code>$dummy = &lt;$socket&gt;;</code>). One could check, if TOR really answers three times with \"250\", and react if not. But I decided to hope, that it always works.</p>\n"}, {"tags": [], "owner": {"reputation": 346, "user_id": 1816477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BxDgw.jpg?s=128&g=1", "display_name": "Jinxed", "link": "https://stackoverflow.com/users/1816477/jinxed"}, "is_accepted": false, "score": 0, "last_activity_date": 1603040897, "creation_date": 1603040897, "answer_id": 64416050, "question_id": 33256934, "link": "https://stackoverflow.com/questions/33256934/new-identity-for-tor-using-perl-on-linux/64416050#64416050", "title": "new identity for TOR using perl on linux", "body": "<p>If you do not strictly need it to be Perl, a shell one-liner would do the trick, too:</p>\n<p>Depending on your means of authentication (possibly a control_auth_cookie-file in data/tor), you could issue this one-liner (and by doing that also check that you got a new external ip, just to be sure), e.g.:</p>\n<pre><code>printf &quot;AUTHENTICATE \\&quot;$(cat &lt;&lt;location of your control_auth_cookie file&gt;&gt;)\\&quot;\\r\\nSIGNAL NEWNYM\\r\\n&quot; | nc localhost 9151; curl --socks5-host localhost:9150 http://myexternalip.com/raw\n</code></pre>\n<p>You will need to adjust <code>9151</code> to the actual service port number in your setup.</p>\n"}], "owner": {"reputation": 7788, "user_id": 1302716, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/LrNqp.png?s=128&g=1", "display_name": "Hubert Sch&#246;lnast", "link": "https://stackoverflow.com/users/1302716/hubert-sch%c3%b6lnast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 801, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1603040897, "creation_date": 1445423314, "last_edit_date": 1492088351, "question_id": 33256934, "link": "https://stackoverflow.com/questions/33256934/new-identity-for-tor-using-perl-on-linux", "title": "new identity for TOR using perl on linux", "body": "<p>I am running a perl script to read data for many different websites via the <a href=\"https://www.torproject.org\" rel=\"nofollow noreferrer\">TOR network</a>. But some of this sites have blacklisted some TOR exit nodes and send the http-status 403 instead of the expected response. In this cases I want to send a command to my local TOR process to change its circuit/identity.</p>\n\n<p>This leads me to my first (minor important) question:</p>\n\n<blockquote>\n  <p>Do \u00bb<strong>circuit</strong>\u00ab and \u00bb<strong>identity</strong>\u00ab mean the same when talking about TOR?  </p>\n</blockquote>\n\n<p>But my more important question is this:</p>\n\n<blockquote>\n  <p>How can I send a \u00bb<em>change identity</em>\u00ab command to a local running TOR process from a perl script?</p>\n</blockquote>\n\n<p>(As far as I know by now this command is <code>signal newnym</code>, but how can I send it?)</p>\n\n<p><a href=\"https://tor.stackexchange.com/questions/8844/control-tor-via-perl-script\">I asked this question already on TOR-StackExchange</a>, and was told to execute the system call</p>\n\n<pre><code>pkill -SIGHUP tor  \n</code></pre>\n\n<p>which should force TOR to reload its config files and then establish a new circuit, but this does not work. I guess it is because my socks-connection still is open and tor even after -SIGHUP keeps using the same identities for still open connections. (just guessing)</p>\n\n<p>And I think it is some kind of overload to force TOR to reload its config files just for creating a new circuit. I think there must be a more elegant solution, like</p>\n\n<ol>\n<li>create a connection to TOR's control port</li>\n<li>send \u00bbchange identity\u00ab (<code>signal newnym</code>)</li>\n<li>close connection</li>\n</ol>\n\n<p>How can this three steps be written in perl?</p>\n\n<p>While reading some documentation I did read, that you have to enable the usage of the control port in some config file, and that you have to use a password. Please tell me how to do this all! - Thanx</p>\n"}, {"tags": ["perl", "perl-module", "strawberry-perl", "activestate", "padre"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1445413893, "post_id": 33253558, "comment_id": 54308952, "body": "I&#39;ve installed modules without problems on both ActiveState Perl and Strawberry Perl. I don&#39;t know if there even is a business license for ActiveState Perl (there definitely isn&#39;t one for Strawberry). That sounds more like a proxy problem or something."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1445429023, "post_id": 33253558, "comment_id": 54318727, "body": "What happens when you try to install modules in strawberry with cpan?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1445433761, "post_id": 33253558, "comment_id": 54322064, "body": "That error means you&#39;re not connecting to CPAN. Check your proxy settings"}, {"owner": {"reputation": 834, "user_id": 1433338, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/dm4lD.jpg?s=128&g=1", "display_name": "Murali Uppangala", "link": "https://stackoverflow.com/users/1433338/murali-uppangala"}, "edited": false, "score": 0, "creation_date": 1445434371, "post_id": 33253558, "comment_id": 54322493, "body": "how to check proxy setting? is that perl module installation specific?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1445440417, "post_id": 33253558, "comment_id": 54327214, "body": "It means that for some reason - you&#39;re host is not able to directly reach the internet. The most common reason for this is that you&#39;re going through a proxy server to reach it from a corporate/campus network. Look in your browser settings and you should see something that tells you what they are. Then set this via <code>o conf http_proxy</code> in your CPAN shell."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1445452198, "post_id": 33253558, "comment_id": 54334435, "body": "@melpomene, AS only provides AS-built packages for free to the two most recent versions of Perl. Doesn&#39;t stop you from using <code>ppm</code> to install packages built by anyone else, or from using <code>cpan</code>. But yeah, the problem he&#39;s now experiencing is a lack of access to the internet."}, {"owner": {"reputation": 834, "user_id": 1433338, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/dm4lD.jpg?s=128&g=1", "display_name": "Murali Uppangala", "link": "https://stackoverflow.com/users/1433338/murali-uppangala"}, "edited": false, "score": 0, "creation_date": 1445573792, "post_id": 33253558, "comment_id": 54389075, "body": "Yes that was a proxy settings problem!!. I did copy those packages zfrom different machine where all needed packages installed. Just works fine."}], "answers": [{"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 1, "last_activity_date": 1566590888, "last_edit_date": 1566590888, "creation_date": 1445413965, "answer_id": 33253781, "question_id": 33253558, "link": "https://stackoverflow.com/questions/33253558/does-installing-perl-modules-require-a-paid-license/33253781#33253781", "title": "Does installing Perl modules require a paid license?", "body": "<p>The community edition of ActivePerl provides support to only the latest versions of Perl, and access to the packages ActiveState built for older versions is available in Business and Enterprise edition.</p>\n\n<p>If you install Perl 5.18.4, 5.20.2 or 5.22.0 then you'll not get a 401 error.</p>\n\n<p>Alternate solution: Use CPAN instead of ppm to install Perl modules.</p>\n\n<p>See more at: <em><a href=\"http://activestate.com/activeperl/downloads\" rel=\"nofollow noreferrer\">Download and Install Perl: ActivePerl</a></em></p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1566591015, "last_edit_date": 1566591015, "creation_date": 1445417116, "answer_id": 33254731, "question_id": 33253558, "link": "https://stackoverflow.com/questions/33253558/does-installing-perl-modules-require-a-paid-license/33254731#33254731", "title": "Does installing Perl modules require a paid license?", "body": "<p>ActiveState is a commercial company. They release a community edition, but they make money from support. Part of that means they only offer \"free\" the newest versions. Which is why you get the error you do - upgrade to a newer Perl, and they'll let you update.</p>\n\n<p>More broadly - technically each module can be licensed separately. There's no requirement to release Perl code (including modules) under any sort of FLOSS license.</p>\n\n<p>However, bear in mind that the <a href=\"http://www.activestate.com/activeperl/license-agreement\" rel=\"nofollow noreferrer\">ActiveState community edition</a> isn't the same license as CPAN modules would be. CPAN modules are <a href=\"http://www.cpan.org/misc/cpan-faq.html#How_is_Perl_licensed\" rel=\"nofollow noreferrer\">\"Mostly GNU\"</a>. But ActiveState CE has some additional terms.</p>\n\n<p>For example,</p>\n\n<blockquote>\n  <p>The use of the Software is unsupported and is for non-commercial or non-production use.</p>\n</blockquote>\n\n<p>You should make a point of reviewing licenses, because it really is a bit of a minefield if you're not careful.</p>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 2, "last_activity_date": 1445434349, "creation_date": 1445434349, "answer_id": 33260732, "question_id": 33253558, "link": "https://stackoverflow.com/questions/33253558/does-installing-perl-modules-require-a-paid-license/33260732#33260732", "title": "Does installing Perl modules require a paid license?", "body": "<p>It looks like you are using Strawberry Perl. That requires no license or other special steps to use. It's ready to go.</p>\n\n<p>One of the top lines of output in your picture is \"Can't connect to cpan.strawberryperl.com:80\". It then tries to connect to other sites and has the same failure. It looks like a network issue. </p>\n"}], "owner": {"reputation": 834, "user_id": 1433338, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/dm4lD.jpg?s=128&g=1", "display_name": "Murali Uppangala", "link": "https://stackoverflow.com/users/1433338/murali-uppangala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1081, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1566591015, "creation_date": 1445413149, "last_edit_date": 1566590690, "question_id": 33253558, "link": "https://stackoverflow.com/questions/33253558/does-installing-perl-modules-require-a-paid-license", "title": "Does installing Perl modules require a paid license?", "body": "<p>I need to work on a Perl script that has some tasks, like reading/writing Excel sheets, connection to an Oracle database, etc.</p>\n\n<p>First I used <a href=\"https://en.wikipedia.org/wiki/ActivePerl\" rel=\"nofollow noreferrer\">ActivePerl</a>. On installing modules, ActivePerl threw an error:</p>\n\n<blockquote>\n  <p>Authorization required 401</p>\n</blockquote>\n\n<p>(I.e., it requires a business licence for adding modules.)</p>\n\n<p>Then I tried the same with Strawberry Perl, but I still could not install.</p>\n\n<p>What I have tried:</p>\n\n<ol>\n<li>CPAN</li>\n<li>ppm</li>\n<li>Download a module and install using it nmake</li>\n<li>Install modules using the <a href=\"https://en.wikipedia.org/wiki/Padre_(software)\" rel=\"nofollow noreferrer\">Padre Perl IDE</a>.</li>\n</ol>\n\n<p>Is this a license issue? Or am I missing something here? Is Perl a free distribution for development?</p>\n\n<p>The image shows installing DBD::Oracle on Strawberry Perl v5.22.0:</p>\n\n<p><a href=\"https://i.stack.imgur.com/SXIPg.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SXIPg.jpg\" alt=\"Enter image description here\"></a></p>\n"}, {"tags": ["perl", "cmd"], "answers": [{"tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": true, "score": 1, "last_activity_date": 1445411246, "creation_date": 1445411246, "answer_id": 33252984, "question_id": 33252795, "link": "https://stackoverflow.com/questions/33252795/how-to-switch-different-strings-from-file-in-a-while-loop-using-perl/33252984#33252984", "title": "How to switch different strings from file in a while loop using Perl", "body": "<p>Try this:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nopen my $fh, \"&lt;\", \"file.txt\" or die $!;\n\nwhile (my $line = &lt;$fh&gt;)\n{\n    chomp $line;\n\n    #Here you can replace 'XXX.XXX.XXX' with '$line'. Modify below line as per your requirement. \n    my $cmd = `c:\\\\putty\\\\putty.exe -ssh \"root\\@$line\" -pw \"password\" -m \"c:\\\\putty\\\\putty.txt\"`;\n}\nclose $fh;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1445421448, "post_id": 33255204, "comment_id": 54313751, "body": "Its good practice to use lexical filehandle $FH, and if file size will be big, its not a good idea of taking whole file contents into memory."}], "tags": [], "owner": {"reputation": 1808, "user_id": 5397845, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-h5AyAVbZoqI/AAAAAAAAAAI/AAAAAAAAALA/pyUGY5qhrl4/photo.jpg?sz=128", "display_name": "Swadhikar", "link": "https://stackoverflow.com/users/5397845/swadhikar"}, "is_accepted": false, "score": 1, "last_activity_date": 1445418540, "creation_date": 1445418540, "answer_id": 33255204, "question_id": 33252795, "link": "https://stackoverflow.com/questions/33252795/how-to-switch-different-strings-from-file-in-a-while-loop-using-perl/33255204#33255204", "title": "How to switch different strings from file in a while loop using Perl", "body": "<p>More detailed version would be:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $file = \"file_of_strings.file\";\n\n# Open file and read contents before closing handle\nopen(FH, \"&lt;\", $file) or die \"Unable to open \\\"$file\\\" $!\";\nchomp(my @users = &lt;FH&gt;);\nclose(FH);\n\nfor my $user (@users) { \n    # Frame remote command\n    my $cmd = \"c:\\putty\\putty.exe -ssh 'root\\@${user}' -pw 'password' -m 'c:\\putty\\putty.txt'\";\n\n    if (system $cmd != 0) {    # system command returns 0 on successful execution\n        print \"Successfully executed command: $cmd\\n\";\n    } else {    \n        print \"Failed to execute command: $cmd exited $? $!\\n\"; # Better to log the exit code ($?) and error message, if any($!).\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 230, "user_id": 1166630, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a6324242475381fd29d3c4e38a0f385?s=128&d=identicon&r=PG", "display_name": "Buzi", "link": "https://stackoverflow.com/users/1166630/buzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 33252984, "answer_count": 2, "score": 1, "last_activity_date": 1445418540, "creation_date": 1445410468, "last_edit_date": 1445411322, "question_id": 33252795, "link": "https://stackoverflow.com/questions/33252795/how-to-switch-different-strings-from-file-in-a-while-loop-using-perl", "title": "How to switch different strings from file in a while loop using Perl", "body": "<p>I have a question, it is probably an easy one, but I haven't found the answer for it.  </p>\n\n<p>I have a file of strings (each string in a separate line, and I need to use each string (line) in the cmd. </p>\n\n<p>I'm using a 'while' loop, but I don't know how to append each string to the loop.  </p>\n\n<p>I need to run the following when the XXX.XXX.XXX is the string that needs to be changed in the loop.  </p>\n\n<pre><code>c:\\putty\\putty.exe -ssh \"root@XXX.XXX.XXX.XXX\" -pw \"password\" -m \"c:\\putty\\putty.txt\"\n</code></pre>\n"}, {"tags": ["perl", "overriding"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1445378196, "post_id": 33247411, "comment_id": 54297342, "body": "not clear what the failing code actually looks like; can you post the relevant parts of MyCode.pm and your test script?"}, {"owner": {"reputation": 2624, "user_id": 393262, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/49a7ee5012c5ee27f94f16be6cd13d1b?s=128&d=identicon&r=PG", "display_name": "Philippe A.", "link": "https://stackoverflow.com/users/393262/philippe-a"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1445443841, "post_id": 33247411, "comment_id": 54329591, "body": "I rewrote my question from scratch with a complete demo of my problem."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1445630172, "post_id": 33247411, "comment_id": 54419802, "body": "Why not use <a href=\"https://metacpan.org/pod/Sub::Override\" rel=\"nofollow noreferrer\"><code>Sub::Override</code></a> ?"}, {"owner": {"reputation": 2624, "user_id": 393262, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/49a7ee5012c5ee27f94f16be6cd13d1b?s=128&d=identicon&r=PG", "display_name": "Philippe A.", "link": "https://stackoverflow.com/users/393262/philippe-a"}, "edited": false, "score": 0, "creation_date": 1445704807, "post_id": 33247411, "comment_id": 54439123, "body": "I have constraints on the modules and Perl version I can use."}], "answers": [{"comments": [{"owner": {"reputation": 1808, "user_id": 5397845, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-h5AyAVbZoqI/AAAAAAAAAAI/AAAAAAAAALA/pyUGY5qhrl4/photo.jpg?sz=128", "display_name": "Swadhikar", "link": "https://stackoverflow.com/users/5397845/swadhikar"}, "edited": false, "score": 0, "creation_date": 1445419441, "post_id": 33255418, "comment_id": 54312337, "body": "*need not change use to require unless you want to import File::Copy::move at runtime. Cheers!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445439899, "post_id": 33255418, "comment_id": 54326811, "body": "That &quot;solution&quot; breaks the code that did work, and does nothing to address the code that didn&#39;t work. This answer is completely wrong."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445444667, "post_id": 33255418, "comment_id": 54330084, "body": "No, the issue isn&#39;t that I don&#39;t understand your answer; it&#39;s that you don&#39;t understand the question. It has been updated to be clearer, so have another read."}], "tags": [], "owner": {"reputation": 1808, "user_id": 5397845, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-h5AyAVbZoqI/AAAAAAAAAAI/AAAAAAAAALA/pyUGY5qhrl4/photo.jpg?sz=128", "display_name": "Swadhikar", "link": "https://stackoverflow.com/users/5397845/swadhikar"}, "is_accepted": false, "score": 1, "last_activity_date": 1445419228, "creation_date": 1445419228, "answer_id": 33255418, "question_id": 33247411, "link": "https://stackoverflow.com/questions/33247411/how-to-override-filecopymove/33255418#33255418", "title": "How to override File::Copy::move?", "body": "<p>Making use of full path (File::Copy::move) works perfectly fine. Just need to change 'use' to 'require' to import at runtime.</p>\n\n<pre><code>use strict;\nuse warnings;\n\n# use File::Copy;\nrequire File::Copy;\nuse Errno;\n\n{\n  no warnings 'redefine';\n  local *move = sub { \n    eval {      \n      $! = Errno::EREMMO;\n      die \"oops ($!)\";\n    };\n  };\n\nFile::Copy::move(\"d:\\\\swadhi\\\\perl\\\\a.txt.bak\", \"D:\\\\swadhi\\\\perl\\\\bakkkkkup.txt\") || print $@;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445444192, "post_id": 33262775, "comment_id": 54329784, "body": "Update my answer for the change to the question."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1445445737, "post_id": 33262775, "comment_id": 54330746, "body": "the warning is only semi-spurious; there exists an IO::File::open but no IO::File::close; IO::File inherits close from IO::Handle."}, {"owner": {"reputation": 2624, "user_id": 393262, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/49a7ee5012c5ee27f94f16be6cd13d1b?s=128&d=identicon&r=PG", "display_name": "Philippe A.", "link": "https://stackoverflow.com/users/393262/philippe-a"}, "edited": false, "score": 0, "creation_date": 1445445957, "post_id": 33262775, "comment_id": 54330879, "body": "Looks like I should be reading on namespaces. Is it correct to say the call to <code>move</code> from MyCode creates an alias <code>MyCode::move</code> pointing to <code>File::Copy::move</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1445446125, "post_id": 33262775, "comment_id": 54330994, "body": "@ysth, This instance is safe to ignore, so by definition it&#39;s spurious. No idea what you mean by semi-spurious or what distinction you are trying to make."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2624, "user_id": 393262, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/49a7ee5012c5ee27f94f16be6cd13d1b?s=128&d=identicon&r=PG", "display_name": "Philippe A.", "link": "https://stackoverflow.com/users/393262/philippe-a"}, "edited": false, "score": 0, "creation_date": 1445446176, "post_id": 33262775, "comment_id": 54331020, "body": "@Philippe A., No. <code>use File::Copy;</code> calls File::Copy&#39;s <code>import</code>, which copies <code>&amp;File::Copy::move</code> (meaning the subroutine named associated with symbol <code>File::Copy::move</code>) into <code>&amp;MySub::move</code>, and <code>move()</code> is short for <code>MySub::move()</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1445444757, "last_edit_date": 1445444757, "creation_date": 1445439707, "answer_id": 33262775, "question_id": 33247411, "link": "https://stackoverflow.com/questions/33247411/how-to-override-filecopymove/33262775#33262775", "title": "How to override File::Copy::move?", "body": "<blockquote>\n  <p><em>It will successfully override IO::File::open, IO::File::close but not File::Copy::move. Why?</em></p>\n</blockquote>\n\n<p>It does override <code>File::Copy::move</code>. The issue is that you don't call <code>File::Copy::move</code>, but <code>MyCode::move</code>. As such, you need to use</p>\n\n<pre><code>local *MyCode::move = sub { ... };\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p><em>I'd like to know also why I am getting [the warning <code>Name \"IO::File::close\" used only once: possible typo</code>].</em></p>\n</blockquote>\n\n<p>The warning exists to help find typos. It's emitted when package symbols are only encountered once during the compilation. In this case, it's a spurious warning (just like the redefined warnings you disabled).</p>\n\n<p>Replace</p>\n\n<pre><code>no warnings 'redefine';\n</code></pre>\n\n<p>with</p>\n\n<pre><code>no warnings 'once';\n</code></pre>\n"}], "owner": {"reputation": 2624, "user_id": 393262, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/49a7ee5012c5ee27f94f16be6cd13d1b?s=128&d=identicon&r=PG", "display_name": "Philippe A.", "link": "https://stackoverflow.com/users/393262/philippe-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 0, "accepted_answer_id": 33262775, "answer_count": 2, "score": 2, "last_activity_date": 1445444757, "creation_date": 1445377737, "last_edit_date": 1445443034, "question_id": 33247411, "link": "https://stackoverflow.com/questions/33247411/how-to-override-filecopymove", "title": "How to override File::Copy::move?", "body": "<p>Consider the following simple module MyCode.pm. It contains a single function <code>my_function</code> touching a file and then renaming it. </p>\n\n<pre><code>#!/usr/bin/perl\n\npackage MyCode;\n\nuse strict;\nuse warnings;\n\nuse IO::File;\nuse File::Copy;\n\nsub my_function {\n  # touch /tmp/a\n  my $fh = IO::File-&gt;new();\n  $fh-&gt;open(\"&gt;/tmp/a\") || die \"open failed ($!)\";  \n  $fh-&gt;close() || die \"close failed ($!)\";\n  unlink(\"/tmp/aa\"); # ignore errors; we want file removed\n  move(\"/tmp/a\", \"/tmp/aa\") || die \"move failed ($!)\";\n}\n\n1;\n</code></pre>\n\n<p>Now consider the following test program. It will successfully override <code>IO::File::open</code>, <code>IO::File::close</code> but not <code>File::Copy::move</code>. Why?</p>\n\n<pre><code>#!/usr/bin/perl -l\n\nuse strict;\nuse warnings;\n\nuse IO::File;\nuse File::Copy;\n\nuse MyCode;\n\n{\n  no warnings 'redefine';\n  local *IO::File::open = sub  { \n    eval {      \n      $! = 44; # random value for illustration purposes\n      die;\n    };\n  };\n\n  eval {\n    MyCode::my_function() \n  };\n  print $@ if $@;\n}\n\n{\n  no warnings 'redefine';\n  local *IO::File::close = sub {\n    eval {\n      $! = 33; # random value for illustration purposes\n      die;\n    };\n  };\n\n  eval {\n    MyCode::my_function() \n  };\n  print $@ if $@;\n}\n\n{\n  no warnings 'redefine';\n  local *File::Copy::move = sub {\n    eval {\n      $! = 22; # random value for illustration purposes\n      die;\n    };\n  };\n\n  eval {\n    MyCode::my_function() \n  };\n  print $@ if $@;\n}\n</code></pre>\n\n<p>Program output below. There is no output for the <code>move</code> override, which means it does not kick in. Why? I'd like to know also why I am getting that warning.</p>\n\n<pre><code>Name \"IO::File::close\" used only once: possible typo at ./test.pl line 28.\nopen failed (Channel number out of range) at MyCode.pm line 14.\n\nclose failed (Numerical argument out of domain) at MyCode.pm line 15.\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 831, "user_id": 4777385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3bdf3e8b842567e14e4ce908f583fb1?s=128&d=identicon&r=PG&f=1", "display_name": "james jelo4kul", "link": "https://stackoverflow.com/users/4777385/james-jelo4kul"}, "edited": false, "score": 0, "creation_date": 1445376557, "post_id": 33247089, "comment_id": 54296520, "body": "You can use this <code>(? &lt;=&#47;) \\w+$</code>"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1445378975, "post_id": 33247089, "comment_id": 54297687, "body": "If you&#39;re manipulating paths, you should use a path manipulation module, not a regex. Pick one: <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a>, <a href=\"https://metacpan.org/pod/Path::Class\" rel=\"nofollow noreferrer\">Path::Class</a>, <a href=\"https://metacpan.org/pod/File::Spec\" rel=\"nofollow noreferrer\">File::Spec</a>."}], "answers": [{"tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 1, "last_activity_date": 1445376492, "creation_date": 1445376492, "answer_id": 33247119, "question_id": 33247089, "link": "https://stackoverflow.com/questions/33247089/how-to-extract-filesystem-name-only-without/33247119#33247119", "title": "How to extract filesystem name only without /", "body": "<p>You can use this negation basedregex in MULTILINE mode:</p>\n\n<pre><code>/[^\\/]+$/m\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/nL3hU9/1\" rel=\"nofollow\">RegEx Demo</a></p>\n\n<p><code>[^\\/]+$</code> will match 1 or more of any char that is not <code>/</code> before line end.</p>\n"}, {"tags": [], "owner": {"reputation": 20787, "user_id": 1251660, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UaQAA.jpg?s=128&g=1", "display_name": "slayedbylucifer", "link": "https://stackoverflow.com/users/1251660/slayedbylucifer"}, "is_accepted": false, "score": 0, "last_activity_date": 1445400216, "creation_date": 1445400216, "answer_id": 33250745, "question_id": 33247089, "link": "https://stackoverflow.com/questions/33247089/how-to-extract-filesystem-name-only-without/33250745#33250745", "title": "How to extract filesystem name only without /", "body": "<p>Here is a simple bash way (although bash is not tagged in the question)</p>\n\n<pre><code>$ cat test \n/root                      \n/dev/data1                 \n/dev/data1/data3\n/usr/local/oravg/oradat\n\n$ while read line; do echo ${line##*/}; done &lt; test \nroot\ndata1\ndata3\noradat\n</code></pre>\n\n<p>Refer <a href=\"http://wiki.bash-hackers.org/syntax/pe#substring_removal\" rel=\"nofollow\">Bash Substring Removal</a> for details.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1445401452, "last_edit_date": 1445401452, "creation_date": 1445401097, "answer_id": 33250867, "question_id": 33247089, "link": "https://stackoverflow.com/questions/33247089/how-to-extract-filesystem-name-only-without/33250867#33250867", "title": "How to extract filesystem name only without /", "body": "<p>Perl:</p>\n\n<pre><code>use File::Basename qw( basename );\n\nmy $fn = basename($qfn);\n</code></pre>\n\n<p>bash:</p>\n\n<pre><code>fn=\"$( basename \"$qfn\" )\"\n</code></pre>\n\n<p>bash (pipeline):</p>\n\n<pre><code>... | xargs -n 1 basename | ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1808, "user_id": 5397845, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-h5AyAVbZoqI/AAAAAAAAAAI/AAAAAAAAALA/pyUGY5qhrl4/photo.jpg?sz=128", "display_name": "Swadhikar", "link": "https://stackoverflow.com/users/5397845/swadhikar"}, "is_accepted": false, "score": 0, "last_activity_date": 1445435606, "creation_date": 1445435606, "answer_id": 33261228, "question_id": 33247089, "link": "https://stackoverflow.com/questions/33247089/how-to-extract-filesystem-name-only-without/33261228#33261228", "title": "How to extract filesystem name only without /", "body": "<p>Guess this would be more self explanatory:</p>\n\n<pre><code>use File::Basename;\n\nmy @paths = qw (/root                      \n                /dev/data1                 \n                /dev/data1/data3\n                /usr/local/oravg/oradat);   \n\nfor my $path (@paths) {\n    my $dirname  = dirname ($path);\n    my $filename = basename ($path);\n    print \"$path:\\n\\tFile: $filename\\n\\tDirectory: $dirname\\n\\n\";\n}\n\n1;\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>/root:\n        File: root\n        Directory: /\n\n/dev/data1:\n        File: data1\n        Directory: /dev\n\n/dev/data1/data3:\n        File: data3\n        Directory: /dev/data1\n\n/usr/local/oravg/oradat:\n        File: oradat\n        Directory: /usr/local/oravg\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1445437744, "creation_date": 1445437744, "answer_id": 33262069, "question_id": 33247089, "link": "https://stackoverflow.com/questions/33247089/how-to-extract-filesystem-name-only-without/33262069#33262069", "title": "How to extract filesystem name only without /", "body": "<p>Just anchor you selection to the end of the line and disallow any slash character <code>/</code>.</p>\n\n<pre><code>[^/]*$\n</code></pre>\n\n<p>See <a href=\"https://regex101.com/r/gC1wW6/1\" rel=\"nofollow\">demo</a></p>\n"}], "owner": {"reputation": 51, "user_id": 1318497, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/243a3a14a3af958f754c6e3a25eafbea?s=128&d=identicon&r=PG", "display_name": "mali184", "link": "https://stackoverflow.com/users/1318497/mali184"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 33247119, "answer_count": 5, "score": 1, "last_activity_date": 1445437744, "creation_date": 1445376350, "question_id": 33247089, "link": "https://stackoverflow.com/questions/33247089/how-to-extract-filesystem-name-only-without", "title": "How to extract filesystem name only without /", "body": "<p>For following Sample data and program provided below , please help me to find correct regex . </p>\n\n<pre><code>#cat df.dat\n/root                      \n/dev/data1                 \n/dev/data1/data3\n/usr/local/oravg/oradat\n</code></pre>\n\n<p>what pattern to use to extract root, data1, data3 and oradat without \"/\"</p>\n\n<p>$ perl grepperl.pl -pattern=' ' df.dat</p>\n\n<pre><code>$ cat grepperl.pl\n#! /usr/bin/perl -s -wnl\nBEGIN {\n# -pattern='RE' switch is required\n$pattern or\nwarn \"Usage: $0 -pattern='RE' [ file1 ... ]\\n\" and\nexit 255;\n}\n/$pattern/ and print;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1445378305, "post_id": 33246879, "comment_id": 54297400, "body": "what problem did you have trying to use Time::HiRes?  re extension: what is $time_value?"}, {"owner": {"reputation": 784, "user_id": 2548443, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d7857d55926ffec7c0d703dcd9ee26f4?s=128&d=identicon&r=PG", "display_name": "Kedar Joshi", "link": "https://stackoverflow.com/users/2548443/kedar-joshi"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1445382159, "post_id": 33246879, "comment_id": 54298838, "body": "I am new to Perl, so I am not sure about how to use Time::HiRes for this particular case. I am able to use it as per the documentation but not for this case."}], "answers": [{"comments": [{"owner": {"reputation": 784, "user_id": 2548443, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d7857d55926ffec7c0d703dcd9ee26f4?s=128&d=identicon&r=PG", "display_name": "Kedar Joshi", "link": "https://stackoverflow.com/users/2548443/kedar-joshi"}, "edited": false, "score": 0, "creation_date": 1445384095, "post_id": 33248387, "comment_id": 54299300, "body": "This code gave me output as: 2015-10-20 23:34:10.000000 Anything missing since we are getting all 0s at the end?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 784, "user_id": 2548443, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d7857d55926ffec7c0d703dcd9ee26f4?s=128&d=identicon&r=PG", "display_name": "Kedar Joshi", "link": "https://stackoverflow.com/users/2548443/kedar-joshi"}, "edited": false, "score": 0, "creation_date": 1445390097, "post_id": 33248387, "comment_id": 54300666, "body": "@KedarJoshi Ahh. The format is correct, but <code>DateTime-&gt;now</code> isn&#39;t using microseconds. I&#39;ll put up a better example."}, {"owner": {"reputation": 784, "user_id": 2548443, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d7857d55926ffec7c0d703dcd9ee26f4?s=128&d=identicon&r=PG", "display_name": "Kedar Joshi", "link": "https://stackoverflow.com/users/2548443/kedar-joshi"}, "edited": false, "score": 0, "creation_date": 1447283206, "post_id": 33248387, "comment_id": 55096702, "body": "@Schewern : I am trying to get a timestamp using  my $mtime = (stat $filename)[10]; how do i convert this into required format any idea?"}, {"owner": {"reputation": 784, "user_id": 2548443, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d7857d55926ffec7c0d703dcd9ee26f4?s=128&d=identicon&r=PG", "display_name": "Kedar Joshi", "link": "https://stackoverflow.com/users/2548443/kedar-joshi"}, "edited": false, "score": 0, "creation_date": 1447283647, "post_id": 33248387, "comment_id": 55096892, "body": "The problem is stat function returns mtime as seconds since epoch time.. how do i get microseconds here?"}, {"owner": {"reputation": 784, "user_id": 2548443, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d7857d55926ffec7c0d703dcd9ee26f4?s=128&d=identicon&r=PG", "display_name": "Kedar Joshi", "link": "https://stackoverflow.com/users/2548443/kedar-joshi"}, "edited": false, "score": 0, "creation_date": 1447284168, "post_id": 33248387, "comment_id": 55097099, "body": "Nevermind, got it. Time::HiRes has a &quot;stat&quot; function itself"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 4, "last_activity_date": 1445399857, "last_edit_date": 1445399857, "creation_date": 1445382770, "answer_id": 33248387, "question_id": 33246879, "link": "https://stackoverflow.com/questions/33246879/how-to-get-micro-seconds-with-time-stamp-in-perl/33248387#33248387", "title": "How to get micro seconds with time stamp in Perl?", "body": "<p>The way most similar to how Python does it is to install and use <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow\">DateTime</a>.  Note that microseconds are not a part of the standard <code>strptime</code> format.  DateTime uses <code>%N</code> for fractional seconds.  <code>%6N</code> means factional seconds to 6 places (microseconds).</p>\n\n<pre><code># `DateTime-&gt;now` uses seconds, so we have to supply our own\n# hires time.\nuse Time::HiRes qw(time);\nuse DateTime;\n\nprint DateTime-&gt;from_epoch( epoch =&gt; time )-&gt;strftime('%Y-%m-%d %H:%M:%S.%6N');\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1445390246, "post_id": 33248834, "comment_id": 54300708, "body": "<code>from_epoch</code> will take fractional seconds."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 2, "last_activity_date": 1445391922, "last_edit_date": 1445391922, "creation_date": 1445385841, "answer_id": 33248834, "question_id": 33246879, "link": "https://stackoverflow.com/questions/33246879/how-to-get-micro-seconds-with-time-stamp-in-perl/33248834#33248834", "title": "How to get micro seconds with time stamp in Perl?", "body": "<p>Using Time::Piece, which doesn't support fractional seconds, by tacking them on at the end:</p>\n\n<pre><code>use 5.014;\nuse warnings;\nuse Time::Piece;\nuse Time::HiRes;\n\nmy ($seconds,$microseconds) = Time::HiRes::gettimeofday;\nmy $str = sprintf '%s.%06d', gmtime($seconds)-&gt;strftime('%Y-%m-%d %H:%M:%S'), $microseconds;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1445400832, "last_edit_date": 1445400832, "creation_date": 1445399808, "answer_id": 33250679, "question_id": 33246879, "link": "https://stackoverflow.com/questions/33246879/how-to-get-micro-seconds-with-time-stamp-in-perl/33250679#33250679", "title": "How to get micro seconds with time stamp in Perl?", "body": "<pre><code>$ perl -E'\n   use DateTime qw( );\n\n   my $time = 1445400376.20984;\n\n   my $dt = DateTime-&gt;from_epoch( epoch =&gt; $time, time_zone =&gt; \"local\" );\n   say $dt-&gt;strftime(\"%Y-%m-%d %H:%M:%S.%6N\");\n'\n2015-10-20 21:06:16.209840\n</code></pre>\n\n<p>(Remove <code>time_zone =&gt; \"local\"</code> for UTC.)</p>\n\n<p>But DateTime is a bit heavy. POSIX offers the lightest solution.</p>\n\n<pre><code>$ perl -E'\n   use POSIX qw( strftime );\n\n   my $time = 1445400376.20984;\n\n   my $microsecs = ($time - int($time)) * 1e6;\n   say sprintf(\"%s.%06.0f\", strftime(\"%Y-%m-%d %H:%M:%S\", localtime($time)), $microsecs);\n'\n2015-10-20 21:06:16.209840\n</code></pre>\n\n<p>(Change <code>localtime</code> to <code>gmtime</code> for UTC.)</p>\n\n<p>If you don't already have the time, you can use Time::HiRes's <code>time</code> in the first snippet and <code>gettimeofday</code> for the second.</p>\n"}, {"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1445623097, "post_id": 33266095, "comment_id": 54416126, "body": "That module looks like the DateTime alternative I&#39;ve been looking for."}, {"owner": {"reputation": 759, "user_id": 2118804, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ZZ6Vy.jpg?s=128&g=1", "display_name": "Robie Nayak", "link": "https://stackoverflow.com/users/2118804/robie-nayak"}, "edited": false, "score": 1, "creation_date": 1479198752, "post_id": 33266095, "comment_id": 68445167, "body": "Now, I can add time-stamp to my log files and precisely monitor the time of event occurred at miliseconds."}], "tags": [], "owner": {"reputation": 2317, "user_id": 711515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5b6edf26acc698b27a585417bb9bb6?s=128&d=identicon&r=PG", "display_name": "chansen", "link": "https://stackoverflow.com/users/711515/chansen"}, "is_accepted": false, "score": 4, "last_activity_date": 1445450089, "creation_date": 1445450089, "answer_id": 33266095, "question_id": 33246879, "link": "https://stackoverflow.com/questions/33246879/how-to-get-micro-seconds-with-time-stamp-in-perl/33266095#33266095", "title": "How to get micro seconds with time stamp in Perl?", "body": "<p>You could also use <a href=\"https://metacpan.org/pod/Time::Moment\" rel=\"nofollow\">Time::Moment</a>. In the interest of full disclosure, I am the author of Time::Moment.</p>\n\n<p><strong>Local time:</strong></p>\n\n<pre><code>$ perl -MTime::Moment -E'\nsay Time::Moment-&gt;now    \n                -&gt;strftime(\"%Y-%m-%d %H:%M:%S.%6N\");\n'\n2015-10-21 19:48:56.333887\n</code></pre>\n\n<p><strong>UTC time:</strong></p>\n\n<pre><code>$ perl -MTime::Moment -E'                                                                                       \nsay Time::Moment-&gt;now_utc\n                -&gt;strftime(\"%Y-%m-%d %H:%M:%S.%6N\");\n'\n2015-10-21 17:48:57.805921\n</code></pre>\n"}], "owner": {"reputation": 784, "user_id": 2548443, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d7857d55926ffec7c0d703dcd9ee26f4?s=128&d=identicon&r=PG", "display_name": "Kedar Joshi", "link": "https://stackoverflow.com/users/2548443/kedar-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7031, "favorite_count": 0, "accepted_answer_id": 33248387, "answer_count": 4, "score": 4, "last_activity_date": 1445450089, "creation_date": 1445375574, "last_edit_date": 1445382218, "question_id": 33246879, "link": "https://stackoverflow.com/questions/33246879/how-to-get-micro-seconds-with-time-stamp-in-perl", "title": "How to get micro seconds with time stamp in Perl?", "body": "<p>This might be a silly question but I am not able to find answer to it:</p>\n\n<p>I have a Python code which is printing time-stamp like this:</p>\n\n<pre><code>2015-05-19 22:27:00.688441\n</code></pre>\n\n<p>The code which produces this string looks something like this:</p>\n\n<pre><code>print str(datetime.datetime.strptime(time_value, '%Y-%m-%d %H:%M:%S.%f'))\n</code></pre>\n\n<p>I would like to do the same in Perl (version 5.14). I can get all parts of this string except the last fractional part <code>(%f)</code>.</p>\n\n<p>How do I get exact same string in Perl?</p>\n\n<p>PS: I tried using <code>Time::HiRes</code> module.</p>\n\n<pre><code>use Time::HiRes;\nmy ($seconds, $microseconds) = gettimeofday;\n</code></pre>\n\n<p>If somehow I can use <code>$seconds</code> to <code>localtime()</code>, is it possible? If so, then how?</p>\n\n<p>Extension to original question: If I have a variable <code>$time_value</code> -- lets assume that I have retrieved a time stamp string in this variable from somewhere, how can I format this to required format i.e. time stamp with microseconds?</p>\n"}, {"tags": ["perl", "selenium"], "comments": [{"owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1445395304, "post_id": 33246861, "comment_id": 54302002, "body": "Have you tried <code>$ret = $driver-&gt;find_element(&#39;user2@user2&#39;, &#39;link_text&#39;);</code>?"}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 1, "creation_date": 1445429703, "post_id": 33246861, "comment_id": 54319171, "body": "You&#39;re testing whether the value of the <code>href</code> attribute contains <code>&quot;user2&quot;</code>. It doesn&#39;t. Test the <code>text</code> inside the <code>a</code> element instead."}, {"owner": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "reply_to_user": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1445447782, "post_id": 33246861, "comment_id": 54331925, "body": "@JeffC, in the WWW::Selenium documentation, there is no <code>find_element</code> function but there is a <code>get_attribute</code> which didn&#39;t work."}, {"owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1445458058, "post_id": 33246861, "comment_id": 54337637, "body": "Sorry, I&#39;m not familiar with WWW::Selenium so I repurposed an answer below without looking at the docs. But... I did look at the docs and found  that one of the locators is by link text, e.g. <code>link=textPattern:Select the link (anchor) element which contains text matching the specified pattern. link=The link text</code>. You should be able to look for the link text, &quot;user2@user2&quot;, with this method."}], "answers": [{"tags": [], "owner": {"reputation": 346, "user_id": 5468228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f5e1efad46a432395117e956aeb840c?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Cox", "link": "https://stackoverflow.com/users/5468228/joseph-cox"}, "is_accepted": false, "score": 0, "last_activity_date": 1445377789, "last_edit_date": 1445377789, "creation_date": 1445377055, "answer_id": 33247249, "question_id": 33246861, "link": "https://stackoverflow.com/questions/33246861/searching-for-text-in-selenium-using-perl/33247249#33247249", "title": "Searching for text in Selenium using Perl", "body": "<p>I am sorry as I do not know Perl.</p>\n\n<p>In java I would use the getText() on the locator to get the username you are looking for.</p>\n\n<p>Use the code inside your click and set the locator to that path.</p>\n\n<p>Edit Try this:</p>\n\n<pre><code>$mylocator= $driver-&gt;find_element('//a[contains(@href,\"#\")]');\n</code></pre>\n\n<p>Then use getText() on that element.</p>\n\n<p>This may be in Perl:</p>\n\n<pre><code>$username= $mylocator-&gt;get_text();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "is_accepted": false, "score": 0, "last_activity_date": 1445447924, "creation_date": 1445447924, "answer_id": 33265469, "question_id": 33246861, "link": "https://stackoverflow.com/questions/33246861/searching-for-text-in-selenium-using-perl/33265469#33265469", "title": "Searching for text in Selenium using Perl", "body": "<p>After carefully reviewing the module's documentation of WWW::Selenium, there is a function I overlooked, below is the code and function that resolved my issue.</p>\n\n<pre><code>$sel-&gt;is_text_present(\"user2\\@store2\");\n</code></pre>\n"}], "owner": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1445447924, "creation_date": 1445375507, "question_id": 33246861, "link": "https://stackoverflow.com/questions/33246861/searching-for-text-in-selenium-using-perl", "title": "Searching for text in Selenium using Perl", "body": "<p>In order to ensure a user has authenticated successfully on this web page I'm writing tests for, his/her login id will be displayed -- below is the HTML using firepath when the user successfully authenticates.</p>\n\n<pre><code>&lt;a href=\"#\"&gt;\n user2@user2\n ::after\n&lt;/a&gt;\n</code></pre>\n\n<p>Below is the HTML using page source</p>\n\n<pre><code>&lt;a href=\"#\"&gt;\n user2@store2\n&lt;/a&gt;\n</code></pre>\n\n<p>The reason why I posted two sources of HTML because I'm not quite sure which source will aid in the troubleshooting. The error I am getting is</p>\n\n<pre><code>Timed out after 30000ms\n</code></pre>\n\n<p>Below is the Perl code I'm using. I'm using the WWW::Selenium module.</p>\n\n<pre><code>my $locator = q{//a[contains(@href, \"user2\")]};\nmy $ret = $sel-&gt;wait_for_text_present($locator, 2000);\n</code></pre>\n\n<p>Below partially works but I would like to see the user's login ID and I don't want to use click.</p>\n\n<pre><code>ret = $sel-&gt;click('//a[contains(@href,\"#\")]');\n</code></pre>\n\n<p>Thank you in advance for any tips.</p>\n"}, {"tags": ["perl", "osx-elcapitan", "nvm"], "answers": [{"tags": [], "owner": {"reputation": 563, "user_id": 4650410, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-i72ftMTic94/AAAAAAAAAAI/AAAAAAAAAXs/GcruoF1mB4Y/photo.jpg?sz=128", "display_name": "sebbulon", "link": "https://stackoverflow.com/users/4650410/sebbulon"}, "is_accepted": false, "score": 0, "last_activity_date": 1508439790, "creation_date": 1508439790, "answer_id": 46837071, "question_id": 33246616, "link": "https://stackoverflow.com/questions/33246616/nvm-perl-error-after-el-capitan-upgrade/46837071#46837071", "title": "Nvm perl error after El Capitan upgrade", "body": "<p>I had the same problem - for some reason, on my Mac I had at least 2 versions of Perl, if not 3 - 5.16, 5.18 and I think also 5.18.2.\nThis broke many of the Perl libraries and command line tools, some of them used by homebrew, such as shasum.</p>\n\n<p>I believe this could have happened during an XCode upgrade, because this could have changed the Perl installation.</p>\n\n<p>I fixed it by re-installing a new version of Perl manually. I chose the latest one and followed these instructions:</p>\n\n<p>I had the same problem, no idea how it happened. I suspect it somehow happened during an XCode Update. I fixed this by re-installing Perl on my Mac manually. I used the latest version as described here:</p>\n\n<pre><code>  curl -O http://www.cpan.org/src/perl-5.26.1.tar.gz\n  tar -xzf perl-5.26.1.tar.gz\n  cd perl-5.26.1\n  ./Configure -des -Dprefix=/usr/local/\n  make\n  make test\n  sudo make install\n</code></pre>\n\n<p>See also <a href=\"http://search.cpan.org/~shay/perl/README.macosx\" rel=\"nofollow noreferrer\">http://search.cpan.org/~shay/perl/README.macosx</a></p>\n"}], "owner": {"reputation": 495, "user_id": 3827809, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e6f6ef2b9858022fde43a785df750b17?s=128&d=identicon&r=PG&f=1", "display_name": "mikeLspohn", "link": "https://stackoverflow.com/users/3827809/mikelspohn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 229, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1508439790, "creation_date": 1445374457, "last_edit_date": 1445437975, "question_id": 33246616, "link": "https://stackoverflow.com/questions/33246616/nvm-perl-error-after-el-capitan-upgrade", "title": "Nvm perl error after El Capitan upgrade", "body": "<p>I upgraded to El Capitan on two laptops. For some reason on one I am having trouble installing any node versions with nvm (installed through homebrew). If I <code>nvm install v0.12.7</code> this is what I get:</p>\n\n<pre><code>######################################################################## 100.0%\nperl version 5.18.2 can't run /USR/BIN/shasum.  Try the alternative(s):\n\n/USR/BIN/shasum5.16 (uses perl 5.16)\n/USR/BIN/shasum5.18 (uses perl 5.18)\n\nRun \"man perl\" for more information about multiple version support in\nMac OS X.\nChecksums do not match.\nBinary download failed, trying source.\nDownloading https://nodejs.org/dist/v0.12.7/node-v0.12.7.tar.gz...\n######################################################################## 100.0%\nperl version 5.18.2 can't run /USR/BIN/shasum.  Try the alternative(s):\n\n/USR/BIN/shasum5.16 (uses perl 5.16)\n/USR/BIN/shasum5.18 (uses perl 5.18)\n\nRun \"man perl\" for more information about multiple version support in\nMac OS X.\nChecksums do not match.\n</code></pre>\n\n<p>I don't know what happened, but I've looked into the error message and various mentions of how to fix the Perl issue but have came up with nothing.</p>\n"}, {"tags": ["regex", "perl", "shell", "scripting"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1445369175, "post_id": 33245195, "comment_id": 54292575, "body": "<code>perl -MO=Deparse -pi -e &#39;s&#47;pattern&#47;replacement&#47;g&#39; &gt; my-string-replacing-script.pl</code> will get you most of the way there"}], "answers": [{"comments": [{"owner": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "edited": false, "score": 0, "creation_date": 1445369677, "post_id": 33245306, "comment_id": 54292869, "body": "Thank you, I meant an easy way of doing this."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "edited": false, "score": 4, "creation_date": 1445369694, "post_id": 33245306, "comment_id": 54292876, "body": "That&#39;s not easy enough?! Put it in a function."}, {"owner": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "edited": false, "score": 0, "creation_date": 1445369789, "post_id": 33245306, "comment_id": 54292928, "body": "I could guess it on my own, just wanted to check if there is any easier way."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1445370103, "post_id": 33245306, "comment_id": 54293119, "body": "I get it, you want something like <code>rewrite { s&#47;foo&#47;bar&#47; } $file</code>. It doesn&#39;t exist, but it&#39;s easy to write."}, {"owner": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "edited": false, "score": 0, "creation_date": 1445370116, "post_id": 33245306, "comment_id": 54293129, "body": "Why is this better then call with a system?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1445370191, "post_id": 33245306, "comment_id": 54293177, "body": "For all the same reasons you want to avoid doing things in <code>system</code> that you can do in Perl. It&#39;s faster (no forking and loading a new Perl process). There&#39;s no shell escapes to worry about. There&#39;s no potential security hole. There&#39;s no cross platform quoting issues. There&#39;s no problem calling the wrong thing named <code>perl</code> in your <code>PATH</code> (use <code>$^X</code> instead)."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445373312, "post_id": 33245306, "comment_id": 54294820, "body": "I&#39;d also note - this doesn&#39;t work on Windows, because Unix can cope with an &#39;open&#39; but &#39;deleted&#39; file, but Windows can&#39;t."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445373882, "post_id": 33245306, "comment_id": 54295114, "body": "@Sobrique It would be interesting to know how <code>-i</code> is implemented on Windows. Maybe a temp file?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445376218, "post_id": 33245306, "comment_id": 54296339, "body": "Far as I am aware, simply by requiring an extension for the backup."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 5, "last_activity_date": 1445369823, "last_edit_date": 1445369823, "creation_date": 1445369545, "answer_id": 33245306, "question_id": 33245195, "link": "https://stackoverflow.com/questions/33245195/how-to-replace-string-in-a-file-with-perl-in-script-not-in-command-line/33245306#33245306", "title": "How to replace string in a file with Perl in script (not in command line)", "body": "<p><code>-i</code> takes advantage that you can still read an unlinked filehandle, you can see the code it uses in <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow\">perlrun</a>. Do the same thing yourself.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;\n\nsub rewrite_file {\n    my $file = shift;\n\n    # You can still read from $in after the unlink, the underlying\n    # data in $file will remain until the filehandle is closed.\n    # The unlink ensures $in and $out will point at different data.\n    open my $in, \"&lt;\", $file;\n    unlink $file;\n\n    # This creates a new file with the same name but points at\n    # different data.\n    open my $out, \"&gt;\", $file;\n\n    return ($in, $out);\n}\n\nmy($in, $out) = rewrite_file($in, $out);\n\n# Read from $in, write to $out as normal.\nwhile(my $line = &lt;$in&gt;) {\n    $line =~ s/foo/bar/g;\n    print $out $line;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445372992, "post_id": 33245409, "comment_id": 54294673, "body": "What is the advantage of this over the perl in the OP?"}, {"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445375449, "post_id": 33245409, "comment_id": 54295937, "body": "@Sobrique: No advantage in mixing languages, I would prefer Perl. The OP said <code>but I want to do it with a script</code> which is a bad solution. Good that the OP accepted the Perl answer! I just added the answer for someone who finds a Perl solution in a shell script and is wondering about a solution without Perl."}], "tags": [], "owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1445369940, "creation_date": 1445369940, "answer_id": 33245409, "question_id": 33245195, "link": "https://stackoverflow.com/questions/33245195/how-to-replace-string-in-a-file-with-perl-in-script-not-in-command-line/33245409#33245409", "title": "How to replace string in a file with Perl in script (not in command line)", "body": "<p>You can use </p>\n\n<pre><code>sed 's/pattern/replacement/g' file &gt; /tmp/file$$ &amp;&amp; mv /tmp/file$$ file\n</code></pre>\n\n<p>Some sed versions support the -i command, so you won't need a tmpfile. The -i option will make the temp file and move for you, basicly it is the same solution.  </p>\n\n<p>Another solution (Solaris/AIX) can be using a here construction in combination with vi:</p>\n\n<pre><code>vi file 2&gt;&amp;1 &gt;/dev/null &lt;@\n1,$ s/pattern/replacement/g\n:wq\n@\n</code></pre>\n\n<p>I do not like the vi solution. When your pattern has a / or another special character, it will be hard debugging what went wrong. When <code>replacement</code> is given by a shell variable, you might want to check the contents first.</p>\n"}, {"comments": [{"owner": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "edited": false, "score": 1, "creation_date": 1445370514, "post_id": 33245536, "comment_id": 54293359, "body": "I saw almost the same code when used this &quot;perl -MO=Deparse -pi -e &#39;s/pattern/replacement/g&#39; &gt; my-string-replacing-script.pl&quot;, but I don&#39;t understand how this code works, I don&#39;t know advanced Perl topics."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "edited": false, "score": 2, "creation_date": 1445372437, "post_id": 33245536, "comment_id": 54294397, "body": "@Curiosity, Schwern tells you how it works, and you ask for something simpler. Sean gives you something simpler, and say you want to know how it works. What do you want?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445373150, "post_id": 33245536, "comment_id": 54294731, "body": "But &#39;explain this&#39; might be a completely separate question."}], "tags": [], "owner": {"reputation": 27022, "user_id": 182693, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7e4422dd860fce9b9f3c024c8655c7d2?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/182693/sean"}, "is_accepted": false, "score": 2, "last_activity_date": 1445370342, "creation_date": 1445370342, "answer_id": 33245536, "question_id": 33245195, "link": "https://stackoverflow.com/questions/33245195/how-to-replace-string-in-a-file-with-perl-in-script-not-in-command-line/33245536#33245536", "title": "How to replace string in a file with Perl in script (not in command line)", "body": "<p>You can duplicate what Perl does with the <code>-i</code> switch easily enough.</p>\n\n<pre><code>{\n    local ($^I, @ARGV) = (\"\", 'file');\n    while (&lt;&gt;) { s/foo/bar/; print; }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "edited": false, "score": 0, "creation_date": 1445453927, "post_id": 33256458, "comment_id": 54335472, "body": "Yes, this is almost what I want, Thank you!"}], "tags": [], "owner": {"reputation": 1808, "user_id": 5397845, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-h5AyAVbZoqI/AAAAAAAAAAI/AAAAAAAAALA/pyUGY5qhrl4/photo.jpg?sz=128", "display_name": "Swadhikar", "link": "https://stackoverflow.com/users/5397845/swadhikar"}, "is_accepted": false, "score": 1, "last_activity_date": 1445422049, "creation_date": 1445422049, "answer_id": 33256458, "question_id": 33245195, "link": "https://stackoverflow.com/questions/33245195/how-to-replace-string-in-a-file-with-perl-in-script-not-in-command-line/33256458#33256458", "title": "How to replace string in a file with Perl in script (not in command line)", "body": "<p>You can try the below simple method. See if it suits your requirement best.</p>\n\n<pre><code>use strict;\nuse warnings;\n\n# Get file to process\nmy ($file, $pattern, $replacement) = @ARGV;\n\n# Read file\nopen my $FH, \"&lt;\", $file or die \"Unable to open $file for read exited $? $!\";\nchomp (my @lines = &lt;$FH&gt;);\nclose $FH;\n\n# Parse and replace text in same file\nopen $FH, \"&gt;\", $file or die \"Unable to open $file for write exited $? $!\";\nfor (@lines){\n    print {$FH} $_ if (s/$pattern/$replacement/g);\n}\nclose $FH;\n\n1;\n</code></pre>\n\n<p>file.txt:</p>\n\n<pre><code>Hi Java, This is Java Programming.\n</code></pre>\n\n<p>Execution:</p>\n\n<pre><code>D:\\swadhi\\perl&gt;perl module.pl file.txt Java Source\n</code></pre>\n\n<p>file.txt</p>\n\n<pre><code>Hi Source, This is Source Programming.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3623, "user_id": 1241736, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/35bf1a675228d3dcb33e81c94818bdb7?s=128&d=identicon&r=PG", "display_name": "henry", "link": "https://stackoverflow.com/users/1241736/henry"}, "is_accepted": false, "score": 0, "last_activity_date": 1562535639, "last_edit_date": 1562535639, "creation_date": 1562535278, "answer_id": 56926286, "question_id": 33245195, "link": "https://stackoverflow.com/questions/33245195/how-to-replace-string-in-a-file-with-perl-in-script-not-in-command-line/56926286#56926286", "title": "How to replace string in a file with Perl in script (not in command line)", "body": "<p>You can handle the use case in the question without recreating the <code>-i</code> flag's functionality or creating throwaway variables. Add the flag to the shebang of a Perl script and read STDIN:</p>\n\n<pre><code>#!/usr/bin/env perl -i\n\nwhile (&lt;&gt;) {\n    s/pattern/replacement/g;\n    print;\n}\n</code></pre>\n\n<p>Usage: save the script, make it executable (with <code>chmod +x</code>), and run</p>\n\n<pre><code>path/to/the/regex-script test.txt\n</code></pre>\n\n<p>(or <code>regex-script test.txt</code> if the script is saved to a directory in your $PATH.)</p>\n\n<hr>\n\n<p>Going beyond the question:</p>\n\n<p>If you need to run multiple sequential replacements, that's</p>\n\n<pre><code>#!/usr/bin/env perl -i\n\nwhile (&lt;&gt;) {\n    s/pattern/replacement/g;\n    s/pattern2/replacement2/g;\n    print;\n}\n</code></pre>\n\n<p>As in the question's example, the source file will not be backed up. Exactly like in an <code>-e</code> oneliner, you can back up to <code>file.&lt;backupExtension&gt;</code> by adding a backupExtension to the <code>-i</code> flag. For example,</p>\n\n<pre><code>#!/usr/bin/env perl -i.bak\n</code></pre>\n"}], "owner": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6454, "favorite_count": 1, "accepted_answer_id": 33245306, "answer_count": 5, "score": 0, "last_activity_date": 1562535639, "creation_date": 1445369096, "last_edit_date": 1445372337, "question_id": 33245195, "link": "https://stackoverflow.com/questions/33245195/how-to-replace-string-in-a-file-with-perl-in-script-not-in-command-line", "title": "How to replace string in a file with Perl in script (not in command line)", "body": "<p>I want to replace a string in a file. Of course I can use </p>\n\n<pre><code> perl -pi -e 's/pattern/replacement/g' file\n</code></pre>\n\n<p>but I want to do it with a script. </p>\n\n<p>Is there any other way to do that instead of <code>system(\"perl -pi -e s/pattern/replacement/g' file\")</code>?</p>\n"}, {"tags": ["regex", "perl", "xml-parsing"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1445369025, "post_id": 33244688, "comment_id": 54292484, "body": "Does your source file really have end tags with slashes that go the wrong way?"}, {"owner": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1445373823, "post_id": 33244688, "comment_id": 54295078, "body": "Hi Andy, I can make the slashes and tags anyway I want because I control the script that dumps this data out of the database.  During the export I provide the delimiter and thought that providing XML like delimiters which are really just the field names would help me parse the data later.  The export file isn&#39;t true XML.  I just thought it was close enough to give you guys an idea without bombarding you with info.  Stupid of me to make such a basic mistake."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1445374091, "post_id": 33244688, "comment_id": 54295227, "body": "Wait... the data is already in a database?! Why don&#39;t we just start there instead of going through this intermediate hocus-pocus?"}, {"owner": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1445374679, "post_id": 33244688, "comment_id": 54295534, "body": "Yes the data is exported from ClearQuest database into the format shown above, transferred to another network, and then will be uploaded.  I&#39;m actually writing the import script and step one for me is to parse the first line of the export file to populate an array with field names.  Once I have the field names I can use them in my SQL insert statements."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445374686, "post_id": 33244688, "comment_id": 54295538, "body": "XML would be a good DB output if you had a parser available. As you don&#39;t, do you have other options? Setting a single delimiter and handling it like comma-separated might work better, because you don&#39;t then have to tag match."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445374739, "post_id": 33244688, "comment_id": 54295565, "body": "(And can &#39;parse&#39; basic comma-sep with <code>split</code>)."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1445374835, "post_id": 33244688, "comment_id": 54295603, "body": "So, can you export the data in a delimited format? You might be able to skip Perl altogether if you&#39;re able to export in a format the target database can understand."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445377364, "post_id": 33244688, "comment_id": 54296938, "body": "And if you can&#39;t, key=value pairs are very easy to parse into perl data structures"}, {"owner": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "edited": false, "score": 0, "creation_date": 1445381920, "post_id": 33244688, "comment_id": 54298774, "body": "Yes I can output in delimited format which is the way a co-worker suggested.  The problem I have though is that I need the field names to do a SQL insert which I already have figured out.  If I can&#39;t get the field names from the output file then I will need to hard-code the field names into the SQL statement for the insert.  I was hoping to grab the field names from the first row of output data, then build a SQL statement to insert the data into another database."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445421505, "post_id": 33244688, "comment_id": 54313793, "body": "As long as the field ordering is consistent, and they&#39;re all matching the same column headings, this is also pretty easy to parse using hash slices."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "edited": false, "score": 0, "creation_date": 1445374026, "post_id": 33246139, "comment_id": 54295193, "body": "Sobrique, the version of PERL I have access to (cqperl) is part of the IBM ClearQuest installation and is listed as version 5.8.6.  I was told that this version is stripped down and I can see that the XML:Twig package is not included.  For contract security reasons I can&#39;t easily update PERL packages."}, {"owner": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "edited": false, "score": 0, "creation_date": 1445374137, "post_id": 33246139, "comment_id": 54295242, "body": "My first question is turning out to be an embarrassment because I didn&#39;t frame my question well and provide important details.  I apologize for that.  I basically have a test file which includes hundreds of records in this format:"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1445374240, "post_id": 33246139, "comment_id": 54295291, "body": "Cool, an 11-year-old version of Perl!"}, {"owner": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "edited": false, "score": 0, "creation_date": 1445374496, "post_id": 33246139, "comment_id": 54295425, "body": "Yes sir and my Dad still drives his 1969 jeep :)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445374528, "post_id": 33246139, "comment_id": 54295439, "body": "Yeah, ok. I know how that goes. But <code>regex</code> is still the wrong tool for the job. See: <a href=\"http://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags\">parsing XHTML with regex</a> - HTML/XML is fundamentally more complex than <code>regex</code> supports.  I&#39;d suggest a change request for a new(er) perl and a couple of libraries is the <i>right</i> way of doing it, because regex is only going to be a dirty hack at best. (Sometimes hacking is the only option though :/)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445374866, "post_id": 33246139, "comment_id": 54295620, "body": "I still have some really old bits of computer hardware knocking around. I think Iv&#39;e got an 8inch floppy drive somewhere. I don&#39;t think I&#39;d be keen to use it for anything other than <a href=\"https://www.youtube.com/watch?v=Xk_XaJ7gE4Q\" rel=\"nofollow noreferrer\">playing music</a> though."}, {"owner": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "edited": false, "score": 0, "creation_date": 1445374909, "post_id": 33246139, "comment_id": 54295650, "body": "Sobrique I appreciate the link and will go check that out now.  I thought this would be simple because I&#39;m simply trying to find the text between &quot;&lt;/ and &gt;&quot; and then push it into a array one match at a time."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445374987, "post_id": 33246139, "comment_id": 54295692, "body": "For that, you just need a non-greedy match. <code>m,&lt;&#47;(.*?)&gt;,</code> - but I&#39;d still urge not using something that looks a bit like XML that isn&#39;t, because that will make your future maintenance programmers very sad."}, {"owner": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "edited": false, "score": 0, "creation_date": 1445375032, "post_id": 33246139, "comment_id": 54295722, "body": "That&#39;s an antique ..... you might be able to get big money for it one day....or at least a nice donation to a museum."}, {"owner": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "edited": false, "score": 0, "creation_date": 1445375188, "post_id": 33246139, "comment_id": 54295803, "body": "Ok understood....and I am a PM just helping one of my buddies who is a developer because he is overwhelmed with work right now.  I&#39;ll look for a better way to indicate a stop and start of field data in my output file.  Thanks for the match example....I&#39;ll try to get that going in my script."}, {"owner": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "edited": false, "score": 0, "creation_date": 1445385758, "post_id": 33246139, "comment_id": 54299698, "body": "Thank you so much.  This worked perfectly.  Now I am going to go and study all of the responses so I understand better.  Again, I really appreciate the guidance and time you spent to answer my question especially since Im a complete stranger.  That was extremely nice of all of you."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "edited": false, "score": 0, "creation_date": 1445447171, "post_id": 33246139, "comment_id": 54331581, "body": "@Matt, I love how your contract allows code from SO, but not code from CPAN. Weird. Especially since the same people submit code to both."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445447883, "post_id": 33246139, "comment_id": 54331970, "body": "Change control and security policies definitely do impose constraints for reasons that might seem irrational."}, {"owner": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445457361, "post_id": 33246139, "comment_id": 54337274, "body": "@ikegami - I don&#39;t want to give you bad information but I think I am pretty close here.  We use CQPERL which is a modified version of PERL to support the IBM ClearQuest database tools.  This version of PERL runs on our production machines and we are free to code to it.  We are not allowed to install packages from the net without a million security checks and such.  Also, I&#39;m not sure if it is even possible to install PERL packages with CQPERL since it is a special flavor of PERL from IBM to use with their database packages.  I could be wrong there and I will investigate."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445458756, "post_id": 33246139, "comment_id": 54338000, "body": "Re &quot;We are not allowed to install packages from the net without a million security checks and such.&quot; Except if they come from SO, apparently. How stupid that is! If anything, that&#39;s backwards. Widely used code is being subject a million more checks than off-the-cuff code, but it&#39;s off-the-cuff code that&#39;s more dangerous."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445459373, "post_id": 33246139, "comment_id": 54338342, "body": "Sadly that is exactly the case. Code typed in is seen as &quot;just a script&quot; and so mostly harmless. Something installed - without a support contract - is seen as dangerous and risky. We know that it is actually more likely that malicious code on CPAN will get spotted, but it is a conversation that if you have it with a change approver, they realise that scripts are more dangerous than they thought, so they lock those down _too_rather than the other way around. It is daft, but it has also been the case at several places I have worked."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1445375498, "last_edit_date": 1445375498, "creation_date": 1445372535, "answer_id": 33246139, "question_id": 33244688, "link": "https://stackoverflow.com/questions/33244688/populate-array-from-xml-end-tags/33246139#33246139", "title": "Populate array from XML end tags", "body": "<p>Your sample data isn't XML. Your slashes are backwards. Assuming it <em>is</em> XML you're trying to parse, the answer is 'don't use regular expressions'. </p>\n\n<p>They're simply not able to cope with the recursion and nesting to the degree necessary.</p>\n\n<p>So with that in mind - assuming your sample data is actually well formed XML and that is a typo, something like <code>XML::Twig</code> will do it quite handily:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $twig = XML::Twig -&gt; parse ( \\*DATA );\n\n#extract a single field value\nprint $twig -&gt; root -&gt; first_child_text('title'),\"\\n\";\n#get a field name\nprint $twig -&gt; root -&gt; first_child -&gt; tag,\"\\n\";\n#can also use att() if you have attributes\n\n\nprint \"Field names:\\n\";\n#children() returns all the children of the current (in this case root) node\n#We use map to access all, and tag to read their 'name'. \n#att or trimmed_text would do other parts of the XML. \nprint join ( \"\\n\", map { $_ -&gt; tag } $twig -&gt; root -&gt; children );\n\n__DATA__\n&lt;XML&gt;\n&lt;record&gt;DEFECT000179&lt;/record&gt;&lt;state&gt;Approved&lt;/state&gt;&lt;title&gt;Something is broken&lt;/title&gt;\n&lt;/XML&gt;\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>Something is broken\nrecord\nField names:\nrecord\nstate\ntitle\n</code></pre>\n\n<p>You also have a variety of other really useful tools, such as <code>pretty_print</code> for formatting your output XML, <code>twig_handlers</code> that let you manipulate XML as you parse (particularly handy for <code>purge</code>), <code>cut</code> and <code>paste</code> to move nodes around, and <code>get_xpath</code> to let you use an xpath expression to find elements based on path and attributes. </p>\n\n<p>Edit: Based on comments, if you really want to extract data from:</p>\n\n<pre><code>&lt;/something&gt;\n</code></pre>\n\n<p>The thing that's going wrong in your thingy is that <code>.*</code> is greedy. You either need to use a negated match - like:</p>\n\n<pre><code>m,&lt;/[^&gt;]&gt;,g \n</code></pre>\n\n<p>Or a nongreedy match:</p>\n\n<pre><code>m,&lt;/(.*?)&gt;,g\n</code></pre>\n\n<p>Oh, and given you've a backslash - you need to escape it:</p>\n\n<pre><code>my $firstLineOfXMLFile = '&lt;record&gt;DEFECT000179&lt;\\record&gt;&lt;state&gt;Approved&lt;\\state&gt;&lt;title&gt;Something is broken&lt;\\title&gt;';\nmy @fieldNames = $firstLineOfXMLFile =~ m(&lt;\\\\(.*?)&gt;)g;\nprint @fieldNames;\n</code></pre>\n\n<p>Will do the trick. (but seriously - deliberately creating something that looks like XML that isn't is a really bad thing to do)</p>\n"}], "owner": {"reputation": 69, "user_id": 5468512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b33ba522e4b75ce1f633b255cbd3234?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5468512/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 1, "accepted_answer_id": 33246139, "answer_count": 1, "score": -1, "last_activity_date": 1445375498, "creation_date": 1445367433, "last_edit_date": 1445369680, "question_id": 33244688, "link": "https://stackoverflow.com/questions/33244688/populate-array-from-xml-end-tags", "title": "Populate array from XML end tags", "body": "<p>I am trying to create an array of field names that I can use later in my script.  Regular expressions are kicking my butt.  I haven't written code in a long time.  The field names are embedded in the XML tags so I figured I could extract them from the ending tag of my first row of data.  I can't see to populate the array properly.....can anyone shed some light for me?    </p>\n\n<pre><code>my $firstLineOfXMLFile = &lt;record&gt;DEFECT000179&lt;\\record&gt;&lt;state&gt;Approved&lt;\\state&gt;&lt;title&gt;Something is broken&lt;\\title&gt;\n\nmy @fieldNames = $firstLineOfXMLFile =~ m(&lt;\\(.*)&gt;)g; #problem, can't seem to grab the text within the end tags.\n\nprint @fieldNames;\n</code></pre>\n\n<p>Thanks so much!\n-Matt</p>\n"}, {"tags": ["perl", "google-sheets"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1445366707, "post_id": 33244332, "comment_id": 54291160, "body": "Is that really code you ran? That code fails with a run-time exception because <code>$agent</code> isn&#39;t defined. You&#39;re missing <code>my $agent = LWP::UserAgent-&gt;new();</code> Always use <code>use strict; use warnings;</code>! Otherwise, please post the code you actually used, and the result of <code>$response-&gt;as_string</code>. (Don&#39;t forget to obfuscate the key should it appear in the output)"}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445366743, "post_id": 33244332, "comment_id": 54291177, "body": "it&#39;s an extract from a lrager body of code. <code>HTTP&#47;1.1 405 Method Not Allowed</code> and then a bunch of stuff. hmmm maybe POST is not allowed on a public sheet?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445366832, "post_id": 33244332, "comment_id": 54291237, "body": "Do you have a link to the API&#39;s documentation?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445366889, "post_id": 33244332, "comment_id": 54291272, "body": "Off-topic tip: You can have string literals that span lines, so you could have used <code>my $xml = &#39; ... entire XML spread over multiple lines ... &#39;;</code>"}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445367105, "post_id": 33244332, "comment_id": 54291400, "body": "thank you for the extra tips but I&#39;m really just trying to get the POST request right. I&#39;m just at the testing stage so I won&#39;t be using this exact code. rather I am trying to learn how to do it in the abstract so I can apply it later to my real project."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445367448, "post_id": 33244332, "comment_id": 54291617, "body": "see edited OP for documentation"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1445367883, "post_id": 33244332, "comment_id": 54291854, "body": "Sorry, I can&#39;t help."}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 3848751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e21f562f44f3c28edecab9cbe5442329?s=128&d=identicon&r=PG&f=1", "display_name": "Sergun_spb", "link": "https://stackoverflow.com/users/3848751/sergun-spb"}, "is_accepted": false, "score": 0, "last_activity_date": 1445426525, "creation_date": 1445426525, "answer_id": 33258035, "question_id": 33244332, "link": "https://stackoverflow.com/questions/33244332/posting-to-google-sheets-with-perl-lwp/33258035#33258035", "title": "POSTing to Google Sheets with Perl LWP", "body": "<p>From this documentation <a href=\"https://developers.google.com/google-apps/spreadsheets/worksheets#add_a_worksheet\" rel=\"nofollow\" title=\"Lint to Google docs\">link to Google docs</a>    <a href=\"https://spreadsheets.google.com/feeds/worksheets/key/\" rel=\"nofollow\">https://spreadsheets.google.com/feeds/worksheets/key/</a><strong>private</strong>/full  - is correct url . </p>\n\n<p>Please try change url  from <a href=\"https://spreadsheets.google.com/feeds/worksheets/\" rel=\"nofollow\">https://spreadsheets.google.com/feeds/worksheets/</a>$key/<strong>public</strong>/full to <a href=\"https://spreadsheets.google.com/feeds/worksheets/key/\" rel=\"nofollow\">https://spreadsheets.google.com/feeds/worksheets/key/</a><strong>private</strong>/full</p>\n"}], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1445426525, "creation_date": 1445366296, "last_edit_date": 1445367373, "question_id": 33244332, "link": "https://stackoverflow.com/questions/33244332/posting-to-google-sheets-with-perl-lwp", "title": "POSTing to Google Sheets with Perl LWP", "body": "<p>I would like to add worksheets to an existing Google spreadsheet, but am not getting very far. The below does not work for me. Is the below POST request incorrect?</p>\n\n<p>note: My worksheet is indeed public and published on the web. This is confirmed due to the ability to successfully GET request.    </p>\n\n<p><a href=\"https://developers.google.com/google-apps/spreadsheets/worksheets#add_a_worksheet\" rel=\"nofollow\">link to Google documentation</a> </p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\nuse LWP::UserAgent;\n\nmy $agent = LWP::UserAgent-&gt;new;\n\nmy $key = \"some key\";\nmy $url = \"https://spreadsheets.google.com/feeds/worksheets/$key/public/full\"\nmy $xml = join \"\\n\", \n    '&lt;entry xmlns=\"http://www.w3.org/2005/Atom\"',\n            'xmlns:gs=\"http://schemas.google.com/spreadsheets/2006\"&gt;',\n        '&lt;title&gt;Expenses&lt;/title&gt;',\n        '&lt;gs:rowCount&gt;50&lt;/gs:rowCount&gt;',\n        '&lt;gs:colCount&gt;10&lt;/gs:colCount&gt;',\n    '&lt;/entry&gt;';\n\nmy $response = $agent-&gt;post(\n    $url, \n    'Content-Type' =&gt; 'application/atom+xml', \n    'Content' =&gt; $xml\n);\n$response-&gt;is_success &amp;&amp; say \"OK\";\n$response-&gt;is_error &amp;&amp; say \"error\";\n</code></pre>\n"}, {"tags": ["linux", "bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "edited": false, "score": 1, "creation_date": 1445353817, "post_id": 33240263, "comment_id": 54283310, "body": "Some good solutions here: <a href=\"http://unix.stackexchange.com/q/137643/67817\">unix.stackexchange.com/q/137643/67817</a>"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1445354735, "post_id": 33240263, "comment_id": 54283925, "body": "<code>sed &#39;&#47;pqr&#47;{:1;N;&#47;para3&#47;!b1;s&#47;[0-9]* *$&#47;newval&#47;}&#39; file</code>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5376052, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1c05b6852b99ea2b5b267931c6f9608d?s=128&d=identicon&r=PG&f=1", "display_name": "Vignesh Jei", "link": "https://stackoverflow.com/users/5376052/vignesh-jei"}, "edited": false, "score": 0, "creation_date": 1445415940, "post_id": 33240659, "comment_id": 54310082, "body": "Hi Anubhava , PFB the output for your command bash-2.03$ awk -v RS= -v ORS=&#39;\\n\\n&#39; &#39;/^&#91;pqr&#93;/{sub(/para2=[^\\n]*/, &quot;para2=foobar&quot;)} 1&#39; tmp.ini awk: syntax error near line 1 awk: bailing out near line 1"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 23, "user_id": 5376052, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1c05b6852b99ea2b5b267931c6f9608d?s=128&d=identicon&r=PG&f=1", "display_name": "Vignesh Jei", "link": "https://stackoverflow.com/users/5376052/vignesh-jei"}, "edited": false, "score": 0, "creation_date": 1445427976, "post_id": 33240659, "comment_id": 54318008, "body": "What is your awk version?"}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 1, "last_activity_date": 1445354822, "creation_date": 1445354822, "answer_id": 33240659, "question_id": 33240263, "link": "https://stackoverflow.com/questions/33240263/linuxawkshell-script-modification-of-line-with-same-name-in-many-blocks/33240659#33240659", "title": "linux|awk|shell script modification of line with same name in many blocks", "body": "<p>Try this <code>awk</code>:</p>\n\n<pre><code>awk -v RS= -v ORS='\\n\\n' '/^\\[pqr\\]/{sub(/para2=[^\\n]*/, \"para2=foobar\")} 1' file\n[abc]\npara1=123\npara2=456\npara3=111\n\n[pqr]\npara1=333\npara2=foobar\npara3=1345\n\n[xyz]\npara1=888\npara2=236\npara3=964\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 5376052, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1c05b6852b99ea2b5b267931c6f9608d?s=128&d=identicon&r=PG&f=1", "display_name": "Vignesh Jei", "link": "https://stackoverflow.com/users/5376052/vignesh-jei"}, "edited": false, "score": 0, "creation_date": 1445416590, "post_id": 33241466, "comment_id": 54310509, "body": "Hi Seco, bash-2.03$ awk &#39;/^&#91;/{b=0} /^&#91;pqr&#93;/{b=1} /^para2=/{if(b) {sub(/=.*/, &quot;=newvalue&quot;)}} 1&#39; tmp.ini awk: syntax error near line 1 awk: illegal statement near line 1 awk: syntax error near line 1 awk: bailing out near line 1 this is the error i am getting. Please advice"}, {"owner": {"reputation": 409, "user_id": 5422420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363aad4b3382d58cfdbff0217320b94?s=128&d=identicon&r=PG&f=1", "display_name": "secolive", "link": "https://stackoverflow.com/users/5422420/secolive"}, "reply_to_user": {"reputation": 23, "user_id": 5376052, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1c05b6852b99ea2b5b267931c6f9608d?s=128&d=identicon&r=PG&f=1", "display_name": "Vignesh Jei", "link": "https://stackoverflow.com/users/5376052/vignesh-jei"}, "edited": false, "score": 0, "creation_date": 1445438449, "post_id": 33241466, "comment_id": 54325657, "body": "You need to make sure the square brackets are properly escaped with a backslash, e.g. /^&#91; and not /^[ as you pasted"}], "tags": [], "owner": {"reputation": 409, "user_id": 5422420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363aad4b3382d58cfdbff0217320b94?s=128&d=identicon&r=PG&f=1", "display_name": "secolive", "link": "https://stackoverflow.com/users/5422420/secolive"}, "is_accepted": false, "score": 1, "last_activity_date": 1445357082, "creation_date": 1445357082, "answer_id": 33241466, "question_id": 33240263, "link": "https://stackoverflow.com/questions/33240263/linuxawkshell-script-modification-of-line-with-same-name-in-many-blocks/33241466#33241466", "title": "linux|awk|shell script modification of line with same name in many blocks", "body": "<p>I usually use something like this <code>awk</code> command:</p>\n\n<pre><code>$ awk '/^\\[/{b=0} /^\\[pqr\\]/{b=1} /^para2=/{if(b) {sub(/=.*/, \"=newvalue\")}} 1' t\n[abc]\npara1=123\npara2=456\npara3=111\n\n[pqr]\npara1=333\npara2=newvalue\npara3=1345\n\n[xyz]\npara1=888\npara2=236\npara3=964\n</code></pre>\n\n<p>The idea is to use a boolean variable (here <code>b</code>) that gets set to 1 when we enter the right \"block\" and gets set back to 0 when you enter another block. </p>\n\n<p>Then it's only a matter of verifying you're in the correct block in subsequent operations by checking the value of <code>b</code>, in this case replacing the value of para2. I also use this technique to simply extract one particular \"block\" from config files.</p>\n"}, {"tags": [], "owner": {"reputation": 5295, "user_id": 847099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EzCC1.jpg?s=128&g=1", "display_name": "Julian Fondren", "link": "https://stackoverflow.com/users/847099/julian-fondren"}, "is_accepted": false, "score": 0, "last_activity_date": 1445357528, "creation_date": 1445357528, "answer_id": 33241612, "question_id": 33240263, "link": "https://stackoverflow.com/questions/33240263/linuxawkshell-script-modification-of-line-with-same-name-in-many-blocks/33241612#33241612", "title": "linux|awk|shell script modification of line with same name in many blocks", "body": "<p>I would only ever use Perl for this.  One statement to keep track of the current group.  One statement to skip modifications except for a particular group.  One statement to replace everything after a key= with a new value.</p>\n\n<pre><code>perl -i -ple '$group = $1 if /^\\[(.*?)\\]/; next unless $group eq \"pqr\"; s/(?&lt;=^para2=).*/newvalue/' file.conf\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 5376052, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1c05b6852b99ea2b5b267931c6f9608d?s=128&d=identicon&r=PG&f=1", "display_name": "Vignesh Jei", "link": "https://stackoverflow.com/users/5376052/vignesh-jei"}, "edited": false, "score": 0, "creation_date": 1445416517, "post_id": 33242037, "comment_id": 54310463, "body": "Hi Sobrique, i am getting syntax error. Please see output below... bash-2.03$ perl -pe &#39;s/BEGIN { $/ = &quot;\\n\\n&quot; } para2=\\d+/para2=9999/m if  m/^&#91;pqr&#93;/;&#39; tmp.ini Bareword found where operator expected at -e line 1, near &quot;s/BEGIN { $/ = &quot;\\n\\n&quot; } para2=\\d+/para2&quot; syntax error at -e line 1, near &quot;s/BEGIN { $/ = &quot;\\n\\n&quot; } para2=\\d+/para2&quot; Search pattern not terminated at -e line 1."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 23, "user_id": 5376052, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1c05b6852b99ea2b5b267931c6f9608d?s=128&d=identicon&r=PG&f=1", "display_name": "Vignesh Jei", "link": "https://stackoverflow.com/users/5376052/vignesh-jei"}, "edited": false, "score": 0, "creation_date": 1445417190, "post_id": 33242037, "comment_id": 54310919, "body": "For some reason I lost part of the text when I pasted. Edited: <code>perl -pe &#39;BEGIN { $&#47; = &quot;\\n\\n&quot; } s&#47;para2=\\d+&#47;para2=9999&#47;m if  m&#47;^\\[pqr\\]&#47;;&#39;</code>  `"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1445417151, "last_edit_date": 1445417151, "creation_date": 1445358844, "answer_id": 33242037, "question_id": 33240263, "link": "https://stackoverflow.com/questions/33240263/linuxawkshell-script-modification-of-line-with-same-name-in-many-blocks/33242037#33242037", "title": "linux|awk|shell script modification of line with same name in many blocks", "body": "<p>With perl:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\n#separate records with double line feed. \nlocal $/ = \"\\n\\n\"; \n\n#iterate stdin or file names specified on command line \nwhile ( &lt;&gt; ) { \n    #replace if the block starts [pqr]\n    s/para2=\\d+/para2=9999/m if  m/^\\[pqr\\]/; \n    print;\n}\n</code></pre>\n\n<p>This one-liner-ifies as;</p>\n\n<pre><code>perl -pe 'BEGIN { $/ = \"\\n\\n\" } s/para2=\\d+/para2=9999/m if  m/^\\[pqr\\]/;'\n</code></pre>\n\n<p>And gives (for your input):</p>\n\n<pre><code>[abc]  \npara1=123  \npara2=456  \npara3=111  \n\n[pqr]  \npara1=333    \npara2=9999    \npara3=1345    \n\n[xyz]    \npara1=888    \npara2=236    \npara3=964 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1371, "user_id": 5056806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfa01ad122fc89b571651ffbbc34ce37?s=128&d=identicon&r=PG&f=1", "display_name": "Claes Wikner", "link": "https://stackoverflow.com/users/5056806/claes-wikner"}, "is_accepted": false, "score": 1, "last_activity_date": 1445360516, "creation_date": 1445360516, "answer_id": 33242571, "question_id": 33240263, "link": "https://stackoverflow.com/questions/33240263/linuxawkshell-script-modification-of-line-with-same-name-in-many-blocks/33242571#33242571", "title": "linux|awk|shell script modification of line with same name in many blocks", "body": "<pre><code>awk -v RS=  -v ORS='\\n\\n' '/pqr/{sub(/para2=765/,\"para2=new\")}1' file\n[abc]  \npara1=123  \npara2=456  \npara3=111  \n\n[pqr]  \npara1=333    \npara2=new    \npara3=1345    \n\n[xyz]    \npara1=888    \npara2=236    \npara3=964    \n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5376052, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1c05b6852b99ea2b5b267931c6f9608d?s=128&d=identicon&r=PG&f=1", "display_name": "Vignesh Jei", "link": "https://stackoverflow.com/users/5376052/vignesh-jei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 1, "answer_count": 5, "score": -2, "last_activity_date": 1445417151, "creation_date": 1445353690, "question_id": 33240263, "link": "https://stackoverflow.com/questions/33240263/linuxawkshell-script-modification-of-line-with-same-name-in-many-blocks", "title": "linux|awk|shell script modification of line with same name in many blocks", "body": "<pre><code>My input file has blocks like below. \n\n[abc]  \npara1=123  \npara2=456  \npara3=111  \n\n[pqr]  \npara1=333    \npara2=765    \npara3=1345    \n\n[xyz]    \npara1=888    \npara2=236    \npara3=964    \n</code></pre>\n\n<p>now how do i modify the value of para2 inside the block pqr alone without the value being changed in other blocks or the first block alone.Please help me achieve this with awk or perl or sed commands.Thanks in advance</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1445352840, "post_id": 33239868, "comment_id": 54282583, "body": "Is the whitespace difference in input and output on purpose?"}, {"owner": {"reputation": 109, "user_id": 5378649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32ef77179c153a5943408fd2ff13b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vetri", "link": "https://stackoverflow.com/users/5378649/vetri"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1445357348, "post_id": 33239868, "comment_id": 54285657, "body": "@simbabque I can&#39;t understand. What are you saying?"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1445357371, "post_id": 33239868, "comment_id": 54285664, "body": "I would go through the file line by line, store numbers in hash with textid as key, then store all the unique ids there too, then build your output from that. You can of course also slurp as you are doing, then grab all textids into array and so forth, but I would find line by line simpler."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1445357411, "post_id": 33239868, "comment_id": 54285693, "body": "The indentation is different."}, {"owner": {"reputation": 109, "user_id": 5378649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32ef77179c153a5943408fd2ff13b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vetri", "link": "https://stackoverflow.com/users/5378649/vetri"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1445358178, "post_id": 33239868, "comment_id": 54286162, "body": "@bytepusher If it is possible to provide the MWE is easy to understand the logic."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445359524, "post_id": 33239868, "comment_id": 54286979, "body": "I know it would be nice to get someone to do it for you, but Stack Overflow isn&#39;t a free coding service. We&#39;ll help you with problems you&#39;re having in your code."}, {"owner": {"reputation": 109, "user_id": 5378649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32ef77179c153a5943408fd2ff13b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vetri", "link": "https://stackoverflow.com/users/5378649/vetri"}, "edited": false, "score": 0, "creation_date": 1445361144, "post_id": 33239868, "comment_id": 54287911, "body": "Please ignore the indentation. I will make a mistake past the content."}, {"owner": {"reputation": 109, "user_id": 5378649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32ef77179c153a5943408fd2ff13b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vetri", "link": "https://stackoverflow.com/users/5378649/vetri"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445361586, "post_id": 33239868, "comment_id": 54288173, "body": "@Sobrique Ok fine. I understand. Thanks for your support"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 0, "last_activity_date": 1445360118, "last_edit_date": 1495539886, "creation_date": 1445360118, "answer_id": 33242437, "question_id": 33239868, "link": "https://stackoverflow.com/questions/33239868/how-to-declare-string-compare-infinite-loop/33242437#33242437", "title": "How to declare string compare infinite loop?", "body": "<blockquote>\n  <p>The string compare eq function is not working for infinite loop like (while or do-while)</p>\n</blockquote>\n\n<p>It wouldn't. You're not actually changing the values of <code>$textid</code> or <code>$citeid</code> within your loop, so your condition is <em>always</em> true. </p>\n\n<p>I assume you're having a similar problem to your previous question: <a href=\"https://stackoverflow.com/questions/33213162/how-to-match-the-two-same-id-and-import-the-required-ids\">How to match the two same id and import the required ids</a></p>\n\n<p>But the problem remains the same. A <code>while</code> loop continues to execute until the condition it's testing is no longer satisfied. </p>\n\n<p>Because you don't change <code>$textid</code> or <code>$citeid</code> within your loop, you're just applying the same text transform over and over to <code>$String_Match</code> (maybe. If it never matches in the first place, the transform isn't even applied, you just go around in circles doing nothing at all. </p>\n\n<p>In fact, it's rather hard to say in the first place what you're intending your <code>while</code> (or <code>if</code>) loop to <em>actually do</em> in the first place. </p>\n\n<p>What it may be useful to know, is that perl has <code>hash</code>es. You can read about them in <a href=\"http://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\"><code>perldata</code></a> - they let you associate a keys and values.</p>\n\n<p>Like, for example:</p>\n\n<pre><code>my $input_text = '&lt;ref uniqueid=\"j_zna-2014-0260_ref_001\"&gt;&lt;citeid=\"Narain:1982\"&gt;&lt;/ref&gt;';\n\nmy ( $cite_id ) = $input_text =~ m/citeid=\"(.*?)\"/;\nmy ( $unique_id ) = $input_text =~ m/uniqueid=\"(.*?)\"/;\n\nmy %unique_id_for;\n$unique_id_for{$cite_id} = $unique_id; \n</code></pre>\n\n<p>This will construct you a hash associating 'cite IDs' and 'unique ids' from your reference list. </p>\n\n<pre><code>'Narain:1982' =&gt; 'j_zna-2014-0260_ref_001'\n</code></pre>\n\n<p>Which you can then use in the rest of your script as part of a search and replace. </p>\n"}], "owner": {"reputation": 109, "user_id": 5378649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32ef77179c153a5943408fd2ff13b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vetri", "link": "https://stackoverflow.com/users/5378649/vetri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 33242437, "answer_count": 1, "score": -1, "last_activity_date": 1445360118, "creation_date": 1445352587, "question_id": 33239868, "link": "https://stackoverflow.com/questions/33239868/how-to-declare-string-compare-infinite-loop", "title": "How to declare string compare infinite loop?", "body": "<p>I am compare the two strings like <code>(textid, citeid)</code>. </p>\n\n<p>If the two ids <code>(textid, citeid)</code> are equal the corresponding <code>uniqueid</code> should be replaced in <code>textid</code> in throughout the <strong>Text Citation Part</strong>.</p>\n\n<p>MWE:</p>\n\n<pre><code>#!C:\\Strawberry\\perl\\bin\\perl\n\nuse strict;\nuse warnings;\nuse 5.010;\nopen(IN,\"$ARGV[0]\\.html\")||die(\"Input LaTeX filename without .html extension\\n\");\nlocal $/;\nmy $String_Match=&lt;IN&gt;;\n\nmy ($textid) = $String_Match =~ m/textid=\"(.*?)\"/;\nmy ($citeid) = $String_Match =~ m/citeid=\"(.*?)\"/;\nmy ($uniqueid) = $String_Match =~ m/ref uniqueid=\"(.*?)\"/;\n\nif ($textid eq $citeid)\n{\n        if ($String_Match=~m/textid=\"(.*?)\"/s)\n                {\n                $String_Match =~ s/textid=\"(.*?)\"/textid=\"$uniqueid\"/si;\n                }\n}\n\nprint $String_Match;\n</code></pre>\n\n<p>The string compare <code>eq</code> function is not working for infinite loop like (while or do-while)</p>\n\n<p>The above MWE execute the condition only one time. But my required output <code>textid</code> should be replaced <code>uniqueid</code> throughout the file. </p>\n\n<p><strong>My Input File:</strong></p>\n\n<pre><code> Text Citation Part\n    &lt;xref textid=\"Narain:1982\"&gt;1&lt;/xref&gt;\n    &lt;xref textid=\"Nasir:2012\"&gt;2&lt;/xref&gt;\n    &lt;xref textid=\"Yao:2011\"&gt;3&lt;/xref&gt;\n    &lt;xref textid=\"Cogley:1968\"&gt;4&lt;/xref&gt;\n\n    Reference Citation Part\n    &lt;ref uniqueid=\"j_zna-2014-0260_ref_001\"&gt;&lt;citeid=\"Narain:1982\"&gt;&lt;/ref&gt;\n    &lt;ref uniqueid=\"j_zna-2014-0260_ref_002\"&gt;&lt;citeid=\"Nasir:2012\"&gt;&lt;/ref&gt;\n    &lt;ref uniqueid=\"j_zna-2014-0260_ref_003\"&gt;&lt;citeid=\"Yao:2011\"&gt;&lt;/ref&gt;\n    &lt;ref uniqueid=\"j_zna-2014-0260_ref_004\"&gt;&lt;citeid=\"Cogley:1968\"&gt;&lt;/ref&gt;\n</code></pre>\n\n<p>My Required Output File: >out.txt</p>\n\n<pre><code>Text Citation Part\n&lt;xref textid=\"j_zna-2014-0260_ref_001\"&gt;1&lt;/xref&gt;\n&lt;xref textid=\"j_zna-2014-0260_ref_002\"&gt;2&lt;/xref&gt;\n&lt;xref textid=\"j_zna-2014-0260_ref_003\"&gt;3&lt;/xref&gt;\n&lt;xref textid=\"j_zna-2014-0260_ref_004\"&gt;4&lt;/xref&gt;\n\nReference Citation Part\n&lt;ref uniqueid=\"j_zna-2014-0260_ref_001\"&gt;&lt;citeid=\"Narain:1982\"&gt;&lt;/ref&gt;\n&lt;ref uniqueid=\"j_zna-2014-0260_ref_002\"&gt;&lt;citeid=\"Nasir:2012\"&gt;&lt;/ref&gt;\n&lt;ref uniqueid=\"j_zna-2014-0260_ref_003\"&gt;&lt;citeid=\"Yao:2011\"&gt;&lt;/ref&gt;\n&lt;ref uniqueid=\"j_zna-2014-0260_ref_004\"&gt;&lt;citeid=\"Cogley:1968\"&gt;&lt;/ref&gt;\n</code></pre>\n\n<p>Please advice how to execute the logic.....</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1445349536, "post_id": 33238631, "comment_id": 54280125, "body": "You want the program you are creating to decide when the files should be edited in place, and <i>not</i> the user? That doesn&#39;t sound like a good idea."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1445349944, "post_id": 33238631, "comment_id": 54280410, "body": "Well, actually I&#39;m going to control it with commandline options :-)"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1445350016, "post_id": 33238631, "comment_id": 54280462, "body": "So let me get this straight... you want to avoid using command line options, so that you can use your own command line options....? That makes a lot of sense."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1445350245, "post_id": 33238631, "comment_id": 54280641, "body": "@TLP, try handling the command line options of a script that you run by typing <code>myscript</code>, and you&#39;ll understand."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1445350671, "post_id": 33238631, "comment_id": 54280965, "body": "Another way to put it: If there was a way to pass a commandline option from my script to the running perl interpreter, it would solve my problem."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1445350678, "post_id": 33238631, "comment_id": 54280976, "body": "Generally speaking, I think that the in-place edit should be used sparingly, and only as a shortcut. If you always print to standard output, you can simply redirect output where you want it, e.g. <code>myscript foo.txt &gt; bar.txt</code>"}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1445350853, "post_id": 33238631, "comment_id": 54281126, "body": "@TLP Generally speaking, I agree. That&#39;s why I wanted to control it, instead of putting <code>#!&#47;usr&#47;bin&#47;perl -i.bak</code> in the script."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1445351035, "post_id": 33238631, "comment_id": 54281280, "body": "Sometimes people think just because a backup is made, their data is safe, but <code>-i.bak</code> is really just as much of a loaded gun as <code>-i</code> is, when it comes to shooting yourself in the foot. Running the script twice, for example, overwrites your backup. Writing your own backup handler would be preferable, especially if you have novice users that will be using your program."}], "answers": [{"comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1445350836, "post_id": 33238728, "comment_id": 54281107, "body": "I&#39;ve tried experimenting with this a bit, and trying to toggle in-place editing during runtime gives some... interesting results."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1445351496, "post_id": 33238728, "comment_id": 54281619, "body": "@ysth Yes. It works if I activate it after the first read, but not the other way around, disable it after the first read. Then it continues to print to the first file with the content from the second."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1445359670, "post_id": 33238728, "comment_id": 54287075, "body": "@TLP, that&#39;s good to know. Sounds like a straight-up bug, even if it&#39;s simply a consequence of the implementation. I&#39;m just enabling the flag before any file i/o, which must be the use case it was designed for; I haven&#39;t noticed any weirdness yet."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 2, "creation_date": 1445360508, "post_id": 33238728, "comment_id": 54287549, "body": "@TLP: I would only expect it to have any effect at the moment a new file is opened (implicitly by readline ARGV) and that sounds consistent with what you are saying"}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1445369589, "post_id": 33238728, "comment_id": 54292819, "body": "@ysth, If you start an in-place edit with file 1, then turn off <code>$^I</code>, and go on to file 2, I would expect either (a) file 2 goes to stdout as intended, or (b) file 2 is edited in place (change to <code>$^I</code> is ignored). Appending file 2 to file 1 is a consequence of the implementation: <i>no $^I = assume stdout = assume no need to redirect output.</i> These assumptions are wrong."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1445349485, "creation_date": 1445349485, "answer_id": 33238728, "question_id": 33238631, "link": "https://stackoverflow.com/questions/33238631/how-can-i-enable-disable-perls-edit-in-place-feature/33238728#33238728", "title": "How can I enable/disable perl&#39;s edit-in-place feature?", "body": "<p>See the <code>$^I</code> variable in <a href=\"http://p3rl.org/perlvar#%24INPLACE_EDIT\" rel=\"noreferrer\">perlvar</a>.</p>\n"}], "owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 33238728, "answer_count": 1, "score": 0, "last_activity_date": 1445349485, "creation_date": 1445349264, "question_id": 33238631, "link": "https://stackoverflow.com/questions/33238631/how-can-i-enable-disable-perls-edit-in-place-feature", "title": "How can I enable/disable perl&#39;s edit-in-place feature?", "body": "<p>If I invoke perl with the <code>-i</code> flag, it will edit input files in place; <code>i.bak</code> will create a backup with the extension <code>.bak</code>. But this requires me to either put <code>#!/usr/bin/perl -i</code> in my script, or explicitly use <code>perl -i</code> on the command line.</p>\n\n<p>I would like my script itself to control if/when this happens. Is there a way to programmatically activate this perl feature, e.g., by modifying perl's idea of how it was invoked, or by setting a special variable?</p>\n\n<p>Two workarounds I already know about:</p>\n\n<ul>\n<li><p>I could invoke perl from the command line: <code>perl -i.bak ~/bin/myscript</code>. But I want to be able to just type <code>myscript</code>.</p></li>\n<li><p>I could implement in-place editing from scratch. If there's no way to trigger the built-in version, this is what I'll probably do.</p></li>\n</ul>\n"}, {"tags": ["perl", "ssl", "soap", "soaplite"], "comments": [{"owner": {"reputation": 750, "user_id": 328969, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a48eff360be55cc80d9737d593fac433?s=128&d=identicon&r=PG", "display_name": "Narthring", "link": "https://stackoverflow.com/users/328969/narthring"}, "edited": false, "score": 0, "creation_date": 1445353079, "post_id": 33238562, "comment_id": 54282785, "body": "Similar question that may help:  <a href=\"http://stackoverflow.com/questions/14839098/perl-cannot-access-web-service-with-ssl\" title=\"perl cannot access web service with ssl\">stackoverflow.com/questions/14839098/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 538, "user_id": 3947414, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/QuxB0.jpg?s=128&g=1", "display_name": "Nevo", "link": "https://stackoverflow.com/users/3947414/nevo"}, "edited": false, "score": 0, "creation_date": 1445364749, "post_id": 33243650, "comment_id": 54289994, "body": "You&#39;re right; in that one test case, the handshake doesn&#39;t get attempted. In the other test cases, the handshake does complete enough for the client to return a &#39;certificate verify failed&#39; error. In addition, when I use the first commented line that you quoted, the client does successfully connect to the server, but of course doesn&#39;t do certificate validation checks."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 538, "user_id": 3947414, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/QuxB0.jpg?s=128&g=1", "display_name": "Nevo", "link": "https://stackoverflow.com/users/3947414/nevo"}, "edited": false, "score": 0, "creation_date": 1445370420, "post_id": 33243650, "comment_id": 54293302, "body": "@Nevo: could you please call your code with the correct SSL_ca_file and additionally with <code>perl -MIO::Socket::SSL=debug4 program.pl</code> and add the debug output to your question?"}, {"owner": {"reputation": 538, "user_id": 3947414, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/QuxB0.jpg?s=128&g=1", "display_name": "Nevo", "link": "https://stackoverflow.com/users/3947414/nevo"}, "edited": false, "score": 0, "creation_date": 1445372192, "post_id": 33243650, "comment_id": 54294270, "body": "Steffen, see the update to the original post. Thank you for that. I&#39;m researching the output of the debug command now."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 538, "user_id": 3947414, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/QuxB0.jpg?s=128&g=1", "display_name": "Nevo", "link": "https://stackoverflow.com/users/3947414/nevo"}, "edited": false, "score": 0, "creation_date": 1445373247, "post_id": 33243650, "comment_id": 54294784, "body": "<code>SSL structure creation failed</code> is really strange. Can you please make sure that the code you have published <i>exactly</i> reflects what you use for testing, that you <code>use strict;</code> and <code>use warnings;</code> and that you use ssl_opts with a hash and not an array as in your code example."}, {"owner": {"reputation": 538, "user_id": 3947414, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/QuxB0.jpg?s=128&g=1", "display_name": "Nevo", "link": "https://stackoverflow.com/users/3947414/nevo"}, "edited": false, "score": 0, "creation_date": 1445444204, "post_id": 33243650, "comment_id": 54329793, "body": "Steffen, I added use strict; and use warnings; and verified that my code is accurately reflected in what I posted. I&#39;m not using any ssl_opts in my default test case.I uncommented the proxy line that specifies the SSL_ca_file and put it in curly braces instead of square brackets and the issue is the same.   Uncommenting the line that specifies SSL_verify_mode=&gt;0 works when the ssl_opts is in square brackets but I get the same SSL structure creation failed when I put it in curly braces."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 538, "user_id": 3947414, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/QuxB0.jpg?s=128&g=1", "display_name": "Nevo", "link": "https://stackoverflow.com/users/3947414/nevo"}, "edited": false, "score": 0, "creation_date": 1445449990, "post_id": 33243650, "comment_id": 54333232, "body": "@Nevo: It is still really strange for me what happens, especially that for you an array with <code>ssl_opts</code> works while an hash(<code>{}</code>) not. What I see from the code in SOAP::Lite and LWP it says that it should croak when <code>ssl_opts</code> is used with an array (<code>[]</code>). I suggest that you make sure that all of the packages you use are recent and please document the versions you use. Also, if I could reproduce the problem I might help you but for this I need the full example, not only the parts from it you consider relevant for the question."}, {"owner": {"reputation": 538, "user_id": 3947414, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/QuxB0.jpg?s=128&g=1", "display_name": "Nevo", "link": "https://stackoverflow.com/users/3947414/nevo"}, "edited": false, "score": 0, "creation_date": 1445526632, "post_id": 33243650, "comment_id": 54369017, "body": "I installed Eclipse and EPIC and found that the error is happening at line 430 in SSL.pm version 1.965. This is a call to Net::SSLeay::new. When I single-step in the debugger, I&#39;m immediately taken to sub error on line 1386 of SSL.pm. I expected to be stepped into Net::SSLeay::new. I don&#39;t understand enough about Perl to know why I was taken to sub error instead of into the SSLeay code. If I could get the debugger to step into SSLeay I might be able to provide more clues, or even figure this out for myself."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 538, "user_id": 3947414, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/QuxB0.jpg?s=128&g=1", "display_name": "Nevo", "link": "https://stackoverflow.com/users/3947414/nevo"}, "edited": false, "score": 0, "creation_date": 1445531195, "post_id": 33243650, "comment_id": 54371987, "body": "@Nevo: I think your problem is a CA file in the wrong format. See edited response."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 0, "last_activity_date": 1445531171, "last_edit_date": 1445531171, "creation_date": 1445364091, "answer_id": 33243650, "question_id": 33238562, "link": "https://stackoverflow.com/questions/33238562/soaplite-connection-to-ssl-server/33243650#33243650", "title": "SOAP::Lite connection to SSL Server", "body": "<blockquote>\n  <p>When I run the code as posted, I get error \"500 Can't connect to TestServer:443 at line 36.\" A network trace on the server side shows the client sends a SYN, server sends a SYN/ACK, client sends and ACK, then the client immediately sends a FIN/ACK.</p>\n</blockquote>\n\n<p>If this is really like you describe it then no data gets exchanged which means th client does not even attempt to do an SSL handshake. This means that probably the way you called it is wrong:</p>\n\n<pre><code>#        -&gt; proxy($proxy, ssl_opts =&gt; [ SSL_verify_mode =&gt; 0 ] )\n#        -&gt; proxy($proxy, ssl_opts =&gt; [SSL_ca_file =&gt; $ServerCACert])\n</code></pre>\n\n<p>I'm pretty sure that ssl_opts does not need an array (<code>[...]</code>) but a hash (<code>{...}</code>). </p>\n\n<p>EDIT:\nIt looks like you need an array and not a hash because <code>ssl_opts</code> are handled in a special way by SOAP::Lite, i.e. they are not directly given to the constructor of LWP::UserAgent as the documentation would imply. I've <a href=\"https://rt.cpan.org/Ticket/Display.html?id=107924\" rel=\"nofollow\">filed a bug about it</a>.</p>\n\n<blockquote>\n<pre><code>DEBUG: .../IO/Socket/SSL.pm:1388: SSL structure creation failed\n</code></pre>\n</blockquote>\n\n<p>Based on the code I got from you I could reproduce the problem, but only if the given CA file was corrupt. I expect that this is the case for you. Note that the file must look like this:</p>\n\n<pre><code>-----BEGIN CERTIFICATE-----\nMIIDKDCCApGgAwIBAgIJAOetiwdVihcnMA0GCSqGSIb3DQEBBQUAMGwxCzAJBgNV\n.... more base64 encoded stuff ...\nM0LUhtV8z6OcURDEfnQBsgLCPODc9Mg4FEViDGVaZ1i233ZeAlLzXSZeXL8=\n-----END CERTIFICATE-----\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 538, "user_id": 3947414, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/QuxB0.jpg?s=128&g=1", "display_name": "Nevo", "link": "https://stackoverflow.com/users/3947414/nevo"}, "is_accepted": false, "score": 0, "last_activity_date": 1445534311, "creation_date": 1445534311, "answer_id": 33286847, "question_id": 33238562, "link": "https://stackoverflow.com/questions/33238562/soaplite-connection-to-ssl-server/33286847#33286847", "title": "SOAP::Lite connection to SSL Server", "body": "<p>Steffen provided the correct solution to the problem. When I originally exported the CA cert from the Windows CA, I exported it in \"DER encoded binary X.509\" format. This is what failed.</p>\n\n<p>I re-exported the certificate in \"Base-64 encoded X.509\" format and used that in my Perl script and now things are working properly.</p>\n"}], "owner": {"reputation": 538, "user_id": 3947414, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/QuxB0.jpg?s=128&g=1", "display_name": "Nevo", "link": "https://stackoverflow.com/users/3947414/nevo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1925, "favorite_count": 0, "accepted_answer_id": 33243650, "answer_count": 2, "score": 0, "last_activity_date": 1445534311, "creation_date": 1445349097, "last_edit_date": 1445372165, "question_id": 33238562, "link": "https://stackoverflow.com/questions/33238562/soaplite-connection-to-ssl-server", "title": "SOAP::Lite connection to SSL Server", "body": "<p>I am completely new to Perl. I have written a web service in C# running on a Windows box and am calling it from a Perl script on a Linux box using SOAP::Lite. My code works fine using the <code>http://</code> handler. I'm now trying to get it to work with <code>https://</code></p>\n\n<p>The code is:</p>\n\n<pre><code>    use SOAP::Lite;\n    use POSIX;\n\n    #Tell Perl to trust the testserver's cert\n    #$ENV{HTTPS_CA_DIR} = '/usr/local/share/ca-certificates';\n    $ENV{HTTPS_CA_FILE} = '/home/myusername/TestServer_CA_Cert.cer';\n    #$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;\n\n\n    my $uri = 'http://Automation/';\n    my $proxy = 'https://TestServer/ToolsAutomation/AutomationInterface.asmx';\n    my $method = SOAP::Data-&gt;name('SubmitAutomationJob')-&gt;attr({xmlns =&gt; $uri});\n\n    #-Code that sets us @params deleted for readability-\n\n    my $myServer = SOAP::Lite\n        -&gt; on_action(sub {join '', $uri, $_[1]})\n        -&gt; proxy($proxy)\n    #        -&gt; proxy($proxy, ssl_opts =&gt; [ SSL_verify_mode =&gt; 0 ] )\n    #        -&gt; proxy($proxy, ssl_opts =&gt; [SSL_ca_file =&gt; $ServerCACert])\n            ;\n\n    my $myCALL = $myServer #This is line 36 in the original script\n                -&gt; call($method =&gt; @params);\n\n    print 'Result: ' . $myCALL-&gt;result;\n</code></pre>\n\n<p>When I run the code as posted, I get error \"500 Can't connect to TestServer:443 at line 36.\" A network trace on the server side shows the client sends a SYN, server sends a SYN/ACK, client sends and ACK, then the client immediately sends a FIN/ACK.</p>\n\n<p>I have tried various things to get this to work. I have tried:</p>\n\n<ul>\n<li>Uncommenting the line <code>#$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;</code> results in \"500 Can't connect to TestServer:443 (certificate verify failed). Network trace shows that at least part of HTTPS negotiation is working.</li>\n<li>Uncommenting the line <code>proxy($proxy, ssl_opts =&gt; [ SSL_verify_mode =&gt; 0 ] )</code> works, but of course this doesn't verify the server's identity.</li>\n<li>Uncommenting the line <code>-&gt; proxy($proxy, ssl_opts =&gt; [SSL_ca_file =&gt; $ServerCACert])</code> also gives a \"certificate verify failed\" error.</li>\n<li>Changing the path to <code>$ENV{HTTPS_CA_FILE}</code> gives an error \"SSL_ca_file /home/myusername/TestServer_CA_cert.ceeer does not exist\" at the line 36. I take this as a good sign; the code is finding the certificate I tell it to use for server auth.</li>\n<li>Uncommenting both the <code>$ENV{HTTPS_CA_DIR}</code> and the <code>$ENV{HTTPS_CA_FILE}</code> lines gives the error \"only SSL_ca_path or SSL_ca_file should be given.\"</li>\n</ul>\n\n<p>I have imported my CA's cert into Firefox on the Linux machine and have successfully browsed to my testserver without getting an SSL warning, and then removed the cert from Firefox and browsed back and received the SSL warning, so I'm reasonably confident that the cert file I have is good.</p>\n\n<p>Does anyone have any ideas on how to fix this code? Is there some attribute of the CA's cert itself that I should check? I find it puzzling that Firefox has no problem trusting a server whose SSL cert is signed with this CA's cert, but I can't convince Perl to do the same.</p>\n\n<p>Any feedback is appreciated. And do remember: I'm an absolute Perl n00b. Before I Googled how to call a web service from Perl, the only think I knew about Perl was \"Larry Wall.\"</p>\n\n<p>Thanks!</p>\n\n<p>UPDATE:</p>\n\n<p>At the request of  Steffen Ullrich below, I ran the following:</p>\n\n<pre><code>perl -MIO::Socket::SSL=debug4 program.pl\n</code></pre>\n\n<p>The output I received is:</p>\n\n<pre><code>me@myMachine:~$ perl -MIO::Socket::SSL=debug4 ./program.pl \nDEBUG: .../IO/Socket/SSL.pm:402: socket not yet connected\nDEBUG: .../IO/Socket/SSL.pm:404: socket connected\nDEBUG: .../IO/Socket/SSL.pm:422: ssl handshake not started\nDEBUG: .../IO/Socket/SSL.pm:1388: SSL structure creation failed\n</code></pre>\n"}, {"tags": ["perl", "object", "reference", "perl-module", "subroutine"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1445347252, "post_id": 33236556, "comment_id": 54278354, "body": "When you say you have a package <code>Main</code> do you just mean it&#39;s your program? It should be in a <code>*.pl</code> file"}, {"owner": {"reputation": 203, "user_id": 1340960, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/76dafbfea8e8836f77d60136ce42f1e3?s=128&d=identicon&r=PG", "display_name": "dzookatz", "link": "https://stackoverflow.com/users/1340960/dzookatz"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1445347531, "post_id": 33236556, "comment_id": 54278556, "body": "@Borodin A program, I&#39;ll amend the question."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1445349416, "post_id": 33236556, "comment_id": 54280014, "body": "<i>&quot;(method is pre-written to handle parameters by reference or value)&quot;</i> It is exactly the same with Perl. If you pass an object by reference (although it is a strange thing to do) then you have to treat it as such in the method. If you pass <code>\\$log</code> then you would have to write <code>${$log}-&gt;write( ... )</code> (assuming you had already pulled <code>$log</code> out of the paremeters with <code>my $log = $_[1]</code>)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445352595, "post_id": 33236556, "comment_id": 54282400, "body": "Re &quot;In C#, this is handled in a different way - you can send a parameter to a method by value or by reference&quot;, Perl always passes by reference"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 6, "last_activity_date": 1445345898, "creation_date": 1445345898, "answer_id": 33237312, "question_id": 33236556, "link": "https://stackoverflow.com/questions/33236556/manipulate-perl-object-by-reference-in-subroutine/33237312#33237312", "title": "Manipulate Perl object by reference in subroutine", "body": "<p>Objects are references. References are scalar values.</p>\n\n<p>If you want to pass arrays or hashes into a subroutine then you usually want to pass references to them - because Perl parameter passing works far better with scalar values.</p>\n\n<p>But <code>$log</code> is already a reference to your object. Therefore you don't need to take a reference to it. You end up passing a reference to a reference. So when you copy that parameter into <code>$log</code> inside your subroutine you have an extra, unnecessary, level of references.</p>\n\n<p>The fix is to just pass the <code>$log</code> scalar into the subroutine.</p>\n\n<pre><code>$worker-&gt;subFromWorker($scalar, $log, \\@array); # $log, not \\$log\n</code></pre>\n\n<p>Everything else will then work fine.</p>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1445347731, "post_id": 33237425, "comment_id": 54278710, "body": "I like: <code>my $self = shift; my ($scalar, $log_ref, $array) = @_;</code> because a) it emphasises that <code>$self</code> is a special parameter and b) it leaves <code>@_</code> containing the actual list of parameters."}, {"owner": {"reputation": 203, "user_id": 1340960, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/76dafbfea8e8836f77d60136ce42f1e3?s=128&d=identicon&r=PG", "display_name": "dzookatz", "link": "https://stackoverflow.com/users/1340960/dzookatz"}, "edited": false, "score": 0, "creation_date": 1445347897, "post_id": 33237425, "comment_id": 54278826, "body": "Thanks for the suggestion, but like I wrote in the question, I saw solutions with <code>@_</code> and the other method is more user friendly, at least to myself."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1445349646, "post_id": 33237425, "comment_id": 54280204, "body": "@DaveCross a good point, but I happen to like doing it this way. I do sometimes use <code>shift</code> especially when I have a sub that is going to delegate all of its work to another sub (maybe a private one): <code>sub public { my $self = shift; return $self-&gt;_private(@_); }</code>"}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 0, "last_activity_date": 1445346215, "creation_date": 1445346215, "answer_id": 33237425, "question_id": 33236556, "link": "https://stackoverflow.com/questions/33236556/manipulate-perl-object-by-reference-in-subroutine/33237425#33237425", "title": "Manipulate Perl object by reference in subroutine", "body": "<p>A more common pattern is to use List assignment to unpack <code>@_</code> into multiple variables all at once:</p>\n\n<pre><code>sub subFromWorker {\n   my ($self, $scalar, $log_ref, $array) = @_;\n   ...\n}\n</code></pre>\n\n<p>In reference to your specific problem:</p>\n\n<pre><code>my $log = Log-&gt;new();\n</code></pre>\n\n<p><code>$log</code> is <em>already</em> a reference to your object, using <code>\\$log</code> creates a reference to that reference which is not probably not what you want. You can handle this two ways:</p>\n\n<ol>\n<li>only pass <code>$log</code>: \n\n<ul>\n<li><code>$worker-&gt;subFromWorker($scalar, $log, \\@array);</code></li>\n</ul></li>\n<li>dereference <code>$log</code> in <code>subFromWorker</code> before calling functions on it:\n\n<ul>\n<li><code>$$log_ref-&gt;write('...');</code></li>\n</ul></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1461494819, "last_edit_date": 1461494819, "creation_date": 1445348447, "answer_id": 33238277, "question_id": 33236556, "link": "https://stackoverflow.com/questions/33236556/manipulate-perl-object-by-reference-in-subroutine/33238277#33238277", "title": "Manipulate Perl object by reference in subroutine", "body": "<p>You have read about the issues that prevent your program from working, but there are a few other things you should be aware of</p>\n\n<ul>\n<li><p>Perl lexical identifiers and subroutine/method names consist of alphanumerics and underscore. Capital letters are reserved for global identifiers, such as package names like <code>Worker</code> and <code>Log</code>.</p></li>\n<li><p>Packages that you <code>use</code> or <code>require</code> should end with the statement <code>1;</code> so as to return a <em>true</em> value when they are imported, otherwise your program may fail to compile.</p></li>\n<li><p>If a subroutine that you are writing happens to be a <em>method</em>, then it is clearest to start it by shifting off the <code>$self</code> parameter and making a copy of the rest:</p>\n\n<pre><code>my $self = shift;\nmy ($p1, $p2, $p3) = @_;\n</code></pre>\n\n<p>It is rare to use elements of <code>@_</code> directly unless you're desperate for the minimal speed bonus</p></li>\n<li><p>It is usually best to work directly with an array reference rather than copying the array, especially if it may be large.</p></li>\n</ul>\n\n<p>Here is how I would code your program and associated modules:</p>\n\n<h3>program.pl</h3>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Worker;\nuse Log;\n\nmy $log    = Log-&gt;new;\nmy $worker = Worker-&gt;new;\n\nmy $scalar = 'SomeURLhere';\nmy @array  = qw/ red blue white /;\n\n$worker-&gt;worker_method($scalar, $log, \\@array);\n</code></pre>\n\n<h3>Worker.pm</h3>\n\n<pre><code>use strict;\nuse warnings;\n\npackage Worker;\n\nsub new {\n    my $class = shift;\n    my $self  = {};\n    bless $self, $class;\n    return $self;\n}\n\nsub worker_method {\n    my $self   = shift;\n    my ($scalar, $log, $array) = @_;\n\n    foreach my $item (@$array) {\n        print $item, \"\\n\";\n    }\n\n    $log-&gt;write(\"The items from URL $scalar are printed.\");\n}\n\n1;\n</code></pre>\n\n<h3>Log.pm</h3>\n\n<pre><code>use strict;\nuse warnings;\n\npackage Log;\n\nsub new {\n    my $class = shift;\n    bless {}, $class;\n}\n\nsub write {\n    my $self   = shift;\n    my ($text) = @_;\n\n    print \"Logging: $text\\n\"\n}\n\n1;\n</code></pre>\n\n<h3>Output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>red\nblue\nwhite\nLogging: The items from URL SomeURLhere are printed.\n</code></pre>\n"}], "owner": {"reputation": 203, "user_id": 1340960, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/76dafbfea8e8836f77d60136ce42f1e3?s=128&d=identicon&r=PG", "display_name": "dzookatz", "link": "https://stackoverflow.com/users/1340960/dzookatz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2702, "favorite_count": 0, "accepted_answer_id": 33237312, "answer_count": 3, "score": 3, "last_activity_date": 1461494819, "creation_date": 1445343701, "last_edit_date": 1495542233, "question_id": 33236556, "link": "https://stackoverflow.com/questions/33236556/manipulate-perl-object-by-reference-in-subroutine", "title": "Manipulate Perl object by reference in subroutine", "body": "<p>I have a Perl program and packages <code>Worker</code> and <code>Log</code>.</p>\n\n<p>The Worker does almost all calculations, and I want to pass an object by reference to the Worker subroutine, as well as some other parameters (scalar and an array). I have seen examples like <a href=\"https://stackoverflow.com/questions/9683370/how-should-i-pass-objects-to-subroutines\">this</a> and <a href=\"https://stackoverflow.com/questions/8592033/can-one-pass-perl-object-references-between-modules\">this</a>.</p>\n\n<p>They handle this by putting <code>@_</code> in subs, then manipulating the object. I also found a way to manipulate them by using the index, like <code>@{$_[i]}</code>. Problem is, when I try the code like so, I get an error:\n<code>Can't call method \"write\" on unblessed reference at ...</code></p>\n\n<p>Code snippets below.</p>\n\n<p>Main:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Log;\nuse Worker;\n\nmy $log = Log-&gt;new();\nmy $worker = Worker-&gt;new();\nmy $scalar = \"SomeURLhere\";\nmy @array = ('red','blue','white');\n\n# I do some stuff with $log object\n#...\n# Now I want to pass data to the Worker\n$worker-&gt;subFromWorker($scalar, \\$log, \\@array);\n</code></pre>\n\n<h3>Worker:</h3>\n\n<pre><code>use strict;\nuse warnings;\npackage Worker;\n\nsub new {\n    my $class = shift;\n    my $self = {};\n    bless $self, $class;\n    return $self;\n}\n\nsub subFromWorker{\n    my ($self) = shift;\n    my $scalar = $_[0];\n    #my ($log) = $_[1];\n    my @array = @{$_[2]};\n\n    foreach my $item (@array){\n        print $item;\n    }\n\n    $_[1]-&gt;write(\"The items from url $scalar are printed.\");\n\n    #Same thing happens if I use $log here\n}\n</code></pre>\n\n<p>In C#, this is handled in a different way - you can send a parameter to a method by value or by reference, and then do what you want in a specialized method (method is pre-written to handle parameters by reference or value). I thought that in Perl sending using <code>\\parameter</code> will send the reference. </p>\n"}, {"tags": ["xml", "perl", "xml-simple"], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1445339539, "last_edit_date": 1445339539, "creation_date": 1445338163, "answer_id": 33234647, "question_id": 33234530, "link": "https://stackoverflow.com/questions/33234530/perl-remove-xml-node/33234647#33234647", "title": "Perl, Remove XML node", "body": "<p>Edit: The below was posted <em>before</em> the 'Please don't suggest I use other libraries' was added to the question. I'm leaving it, because I still think the correct answer is \"don't use <code>XML::Simple</code>\". You can use a hammer to put screws in the wall all you like, but it doesn't change the fact that however hard you hit it, the results are going to be messy. </p>\n\n<p>Don't use <a href=\"http://search.cpan.org/~grantm/XML-Simple-2.20/lib/XML/Simple.pm\" rel=\"nofollow\"><code>XML::Simple</code></a> and this is really easy. Even <code>XML::Simple</code> says:</p>\n\n<blockquote>\n  <p>The use of this module in new code is discouraged. Other modules are available which provide more straightforward and consistent interfaces. </p>\n</blockquote>\n\n<p>The fundamental problem is that only trivial (simple!) XML can be represented directly via hashes and arrays. If you think about it - XML allows for duplicate nodes beneath the same parent, but with differing attributes and content. It also allows unary tags. </p>\n\n<p>How about using <a href=\"http://search.cpan.org/dist/XML-Twig/Twig.pm\" rel=\"nofollow\"><code>XML::Twig</code></a> instead:</p>\n\n<pre><code>#!/urs/bin/env perl\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $twig = XML::Twig -&gt; new ('pretty_print' =&gt; 'indented_a' ) -&gt; parsefile ( 'your_xml' ); \nforeach my $element ( $twig -&gt; get_xpath('person[@name=\"Jane\"]') ) {\n   $element -&gt; delete;\n}\n\n$twig -&gt; print; \n</code></pre>\n\n<p>You can - if want - also do this via an inplace edit using <code>parsefile_inplace</code>. Otherwise open a new file and output your new XML via <code>$twig -&gt; sprint</code>. </p>\n\n<p>e.g.:</p>\n\n<pre><code>XML::Twig-&gt;new(\n    'pretty_print'  =&gt; 'indented_a',\n    'twig_handlers' =&gt; {\n        'person[@name=\"Jane\"]' =&gt; sub { $_-&gt;delete }\n    }\n)-&gt;parsefile_inplace('xml_filename.xml');\n</code></pre>\n\n<p>If you're intent on using a hammer for your screws - this should do it with your initial code and <code>XML::Simple</code>:</p>\n\n<pre><code>$xml-&gt;{people}[0]{person} = \n     [ grep { not $_-&gt;{name} eq $remove_person }\n                      @{ $xml-&gt;{people}[0]{person} } ];\n</code></pre>\n\n<p>Replaces the array in question with a filtered array on the <code>name</code> attribute. </p>\n\n<p>Outputs:</p>\n\n<pre><code>&lt;people&gt;\n  &lt;person name=\"John\"&gt;\n    &lt;param name=\"age\" value=\"21\" /&gt;\n  &lt;/person&gt;\n&lt;/people&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1824, "user_id": 2086839, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/xK91o.jpg?s=128&g=1", "display_name": "Simon.", "link": "https://stackoverflow.com/users/2086839/simon"}, "edited": false, "score": 0, "creation_date": 1445342454, "post_id": 33235766, "comment_id": 54275082, "body": "The delete function is advised to not be used ( ironic in my case as its written in stone i use ::Simple ). The end product of my question is a telephony system script which, without, the system cannot run. Provided correct index checking was in place, could i assume that using delete wouldn&#39;t cause any &#39;unexpected behavior&#39; as warned in the perl documentation?  (I&#39;ve already got enough difficulty with ::Simple, so i&#39;d prefer to reduce any additional difficulty/risk )"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 1824, "user_id": 2086839, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/xK91o.jpg?s=128&g=1", "display_name": "Simon.", "link": "https://stackoverflow.com/users/2086839/simon"}, "edited": false, "score": 1, "creation_date": 1445342820, "post_id": 33235766, "comment_id": 54275329, "body": "@Simon. <code>delete</code> shouldn&#39;t be used for arrays. I used it for a hash which is OK."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 0, "last_activity_date": 1445341822, "last_edit_date": 1495535230, "creation_date": 1445341471, "answer_id": 33235766, "question_id": 33234530, "link": "https://stackoverflow.com/questions/33234530/perl-remove-xml-node/33235766#33235766", "title": "Perl, Remove XML node", "body": "<p>As you have been already <a href=\"https://stackoverflow.com/a/33171028/1030675\">told</a>, the point of <a href=\"http://p3rl.org/XML::Simple\" rel=\"nofollow noreferrer\">XML::Simple</a> is to use Perl data structures instead of string manipulation. So, forget <code>s///</code> and try</p>\n\n<pre><code>my $xml = XMLin($data, ForceArray =&gt; 1, KeepRoot =&gt; 1);\nmy $remove = 'Jane';\ndelete $xml-&gt;{people}[0]{person}{$remove};\nprint XMLout($xml, KeepRoot =&gt; 1);\n</code></pre>\n\n<p>or, with empty <code>KeyAttr</code></p>\n\n<pre><code>my $xml = XMLin($data, ForceArray =&gt; 1, KeepRoot =&gt; 1, KeyAttr =&gt; []);\n@{ $xml-&gt;{people}[0]{person} } = grep $_-&gt;{name} ne $remove,\n                                 @{ $xml-&gt;{people}[0]{person} };\nprint XMLout($xml, KeepRoot =&gt; 1);\n</code></pre>\n\n<p>For comparison, the same task in <a href=\"http://p3rl.org/XML::XSH2\" rel=\"nofollow noreferrer\">XML::XSH2</a>:</p>\n\n<pre><code> open data.xml ;\n my $remove = 'Jane' ;\n delete /people/person[@name=$remove] ;\n save :b ;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112, "user_id": 2377794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMGYS.jpg?s=128&g=1", "display_name": "Lyr", "link": "https://stackoverflow.com/users/2377794/lyr"}, "is_accepted": false, "score": 0, "last_activity_date": 1449218063, "creation_date": 1449218063, "answer_id": 34083954, "question_id": 33234530, "link": "https://stackoverflow.com/questions/33234530/perl-remove-xml-node/34083954#34083954", "title": "Perl, Remove XML node", "body": "<p>Sadly I ended up in roughtly the same issue, I had to edit some XML on AIX without additionnal libraries. I ended up removing stuff like this</p>\n\n<pre><code>perl -0777 -p -i -e \"s;(&lt;HARDWARE&gt;.*)&lt;DESCRIPTION&gt;.*&lt;\\/DESCRIPTION&gt;(.*&lt;\\/HARDWARE&gt;);\\$1\\$2;s\" my.xml\n</code></pre>\n\n<p>This is ugly. I don't like it. But it worked then, and provided you know how to write a regexpr that should do now and then.</p>\n"}], "owner": {"reputation": 1824, "user_id": 2086839, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/xK91o.jpg?s=128&g=1", "display_name": "Simon.", "link": "https://stackoverflow.com/users/2086839/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1378, "favorite_count": 0, "accepted_answer_id": 33235766, "answer_count": 3, "score": -3, "last_activity_date": 1449218063, "creation_date": 1445337812, "last_edit_date": 1445338281, "question_id": 33234530, "link": "https://stackoverflow.com/questions/33234530/perl-remove-xml-node", "title": "Perl, Remove XML node", "body": "<p><b>Data.xml</b></p>\n\n<pre><code>&lt;people&gt;\n  &lt;person name=\"John\"&gt;\n     &lt;param name=\"age\" value=\"21\" /&gt;\n  &lt;/person&gt;\n  &lt;person name=\"Jane\"&gt;\n     &lt;param name=\"age\" value=\"25\" /&gt;\n  &lt;/person&gt;\n&lt;/people&gt;\n</code></pre>\n\n<p>I have this piece of XML. I'm working on a script to append <code>&lt;person&gt;</code> nodes to the <code>&lt;people&gt;</code> node. I'm using XML::Simple <br><br><b>(Please refrain from suggesting that i use another library, i'm aware of its difficulties). </b><br><br></p>\n\n<pre><code>my $remove_person = \"Jane\";\n\nmy $xml = XMLin('data.xml', ForceArray =&gt; 1, KeepRoot =&gt; 1, KeyAttr =&gt; []);\nif(exists $xml-&gt;{people}[0]{person}){\n        my $var = $xml-&gt;{people}[0]{person};\n        my $count = @$var;\n        my $person_index = 0;\n        for(my $i = 0; $i &lt; $count; $i++){\n                if($xml-&gt;{people}[0]{person}[$i]-&gt;{name} eq $remove_person){\n                        print \"Person found at \" . $person_index . \" index\";\n                        $person_index = $i;\n                        $person_to_remove = $xml-&gt;{people}[0]{person}[$i];\n                }\n        }\n} else {\n        print \"Person not found in data.xml\\r\";\n}\n</code></pre>\n\n<p>The above piece of code will give me the index of the node i wish to remove.\nIts from this point that i'm having my trouble. I cannot figure a correct way to remove this index from the data. <br>So far i've tried a method of using <code>splice</code>, which returned the section of XML i want to remove, then i used <code>XMLout()</code>to convert the array back to XML. Using <code>=~ s///g</code>, i was able to edit node changes (<code>&lt;person&gt;</code> became <code>&lt;opt&gt;</code>). Once i'd <code>XMLout()'ed</code> the original data.xml structure, i attempted to string replace the variable of the removable section of XML, with empty string of the original structure.<br><br> Obviously, this didn't work. </p>\n\n<pre><code>my $new_xml    = XMLout($xml, KeepRoot =&gt; 1);\nmy $remove_xml = XMLout($person_to_remove, KeepRoot =&gt; 1);\n\n$remove_xml =~ s/opt/person/g;\n$new_xml =~ s/($remove_xml)//g; # facepalm, i know\n</code></pre>\n\n<p><b>How</b> would i remove this section of XML, either by array data removal, or plain file text removal so as to write back to the original data.xml file the new structure? </p>\n"}, {"tags": ["perl", "legacy-code"], "answers": [{"comments": [{"owner": {"reputation": 1007, "user_id": 1288120, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/f73d7fb82a257fe648b351096ec71098?s=128&d=identicon&r=PG", "display_name": "Bharat", "link": "https://stackoverflow.com/users/1288120/bharat"}, "edited": false, "score": 0, "creation_date": 1445337341, "post_id": 33234328, "comment_id": 54271686, "body": "can you please provide a ref link for that, I am unable to find it on google as it don&#39;t support special characters in it."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 1007, "user_id": 1288120, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/f73d7fb82a257fe648b351096ec71098?s=128&d=identicon&r=PG", "display_name": "Bharat", "link": "https://stackoverflow.com/users/1288120/bharat"}, "edited": false, "score": 1, "creation_date": 1445337358, "post_id": 33234328, "comment_id": 54271699, "body": "Yeah, just tracking it down. <a href=\"http://perldoc.perl.org/perlsub.html#Prototypes\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlsub.html#Prototypes</a>"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 4, "last_activity_date": 1445337864, "last_edit_date": 1445337864, "creation_date": 1445337205, "answer_id": 33234328, "question_id": 33234300, "link": "https://stackoverflow.com/questions/33234300/in-perl-subroutine-definition/33234328#33234328", "title": "$$ in perl subroutine definition", "body": "<p>It's a <a href=\"http://perldoc.perl.org/perlsub.html#Prototypes\" rel=\"nofollow\">prototype</a>. An advanced perl feature that is generally not a good idea to use. It allow you to specify constraints on arguments to the subroutine.</p>\n\n<p>In the above example, it specifies this subroutine takes two mandatory scalar parameters, and one optional scalar. </p>\n\n<p>E.g.:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nsub with_proto($$;$) {\n    print @_;\n}\n\nwith_proto(\"A\");\nwith_proto(\"A\",\"B\");\nwith_proto(\"A\",\"B\",\"C\");\nwith_proto(\"A\",\"B\",\"C\",\"D\");\n</code></pre>\n\n<p>Errors with:</p>\n\n<pre><code>Not enough arguments for main::with_proto, line 9, near \"\"A\")\"\nToo many arguments for main::with_proto, line 12, near \"\"D\")\"\n</code></pre>\n\n<p>Note though - this also errors:</p>\n\n<pre><code>my @args = ( \"A\", \"B\", \"C\" );\nwith_proto(@args);\n</code></pre>\n\n<p>Because despite having 3 elements in the list, the prototype says 'scalars'. </p>\n\n<pre><code>with_proto(@args, \"A\", \"B\");\n</code></pre>\n\n<p>Will print:</p>\n\n<pre><code>3AB\n</code></pre>\n\n<p>Because the prototype says 'scalar' it takes <code>@args</code> in a scalar context. Where you might expect if you'd done it like <em>this</em>:</p>\n\n<pre><code>sub without_proto {\n    print @_;\n}\n\nmy @args = ( \"A\", \"B\", \"C\" );\nwithout_proto (@args, \"A\", \"B\");\n</code></pre>\n\n<p>You would get \"ABCAB\". </p>\n\n<p>So at best, it's a feature that's just not as clear as it might seem, and isn't particularly similar to \"prototypes\" as you might know them in other languages. </p>\n"}], "owner": {"reputation": 1007, "user_id": 1288120, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/f73d7fb82a257fe648b351096ec71098?s=128&d=identicon&r=PG", "display_name": "Bharat", "link": "https://stackoverflow.com/users/1288120/bharat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 0, "closed_date": 1445347534, "accepted_answer_id": 33234328, "answer_count": 1, "score": -1, "last_activity_date": 1445337864, "creation_date": 1445337099, "last_edit_date": 1445337364, "question_id": 33234300, "link": "https://stackoverflow.com/questions/33234300/in-perl-subroutine-definition", "closed_reason": "Duplicate", "title": "$$ in perl subroutine definition", "body": "<p>This could be a duplicate question.\nI know perl doesn't restrict users on no of arguments and their types.\nBut what does $,$$ and ; stands for in below code.</p>\n\n<pre><code>sub run($$;$) {\n    my ( $x, $y, $z ) = @_;\n....\n}\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "perl", "otrs"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1445336415, "post_id": 33233961, "comment_id": 54271152, "body": "Looks like a jquery issue. <code>$()</code> most likely is the jquery function, and <code>.tabs()</code> is supposed to be a function as well, but it&#39;s not. Maybe a jquery plugin is not loaded or your custom jquery doesn&#39;t include the plugin you need."}], "answers": [{"tags": [], "owner": {"reputation": 1602, "user_id": 3322344, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100000477838161/picture?type=large", "display_name": "Navnish Bhardwaj", "link": "https://stackoverflow.com/users/3322344/navnish-bhardwaj"}, "is_accepted": false, "score": 0, "last_activity_date": 1445336713, "creation_date": 1445336713, "answer_id": 33234155, "question_id": 33233961, "link": "https://stackoverflow.com/questions/33233961/cmdb-tabs-is-not-a-function/33234155#33234155", "title": "CMDB $(...).tabs is not a function", "body": "<p>This issue usually takes place when application is not able to find relative paths to javascript files:</p>\n\n<pre><code>javascript/jquery-ui-1.9.2.custom.min.js\n</code></pre>\n\n<p>Change them to absolute paths</p>\n\n<pre><code>/javascript/jquery-ui-1.9.2.custom.min.js\n</code></pre>\n\n<p>because its having linking with <strong>mod_rewrite module</strong></p>\n"}], "owner": {"reputation": 1, "user_id": 5466471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b93e330d690847a18820dedc57e5a933?s=128&d=identicon&r=PG&f=1", "display_name": "A. Tajane", "link": "https://stackoverflow.com/users/5466471/a-tajane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1445336713, "creation_date": 1445336199, "last_edit_date": 1445336349, "question_id": 33233961, "link": "https://stackoverflow.com/questions/33233961/cmdb-tabs-is-not-a-function", "title": "CMDB $(...).tabs is not a function", "body": "<p>I just installed OTRS and adding pakages of KIX4OTRS and I got a weird bug when zooming on a ConfigItem in our CMDB.</p>\n\n<blockquote>\n  <p><code>$(...).tabs</code> is not a function </p>\n</blockquote>\n\n<p>Anyone else had this issue or can give me an hand to fix it? Im really green with OTRS :)</p>\n"}, {"tags": ["regex", "string", "perl", "split"], "comments": [{"owner": {"reputation": 71156, "user_id": 1190388, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5391819cc4abe0cb43587c9ef1808dbd?s=128&d=identicon&r=PG", "display_name": "hjpotter92", "link": "https://stackoverflow.com/users/1190388/hjpotter92"}, "edited": false, "score": 0, "creation_date": 1445334440, "post_id": 33233166, "comment_id": 54269869, "body": "The regex should be <code>&#47;:\\s*(.*)\\s*$&#47;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 10, "last_activity_date": 1445334237, "creation_date": 1445334237, "answer_id": 33233261, "question_id": 33233166, "link": "https://stackoverflow.com/questions/33233166/extract-string-after-a-symbol-in-perl/33233261#33233261", "title": "Extract string after a symbol in Perl", "body": "<p>That's because pattern matches in a scalar context are boolean tests. If you want to capture bracket content (capture groups), you need a list context. It's ok if the list is only one element though:</p>\n\n<p>try this:</p>\n\n<pre><code> my ( $substring ) = $string=~ /(\\:.*)\\s*$/;\n</code></pre>\n\n<p>Difference maybe a bit subtle, but basically - we are assigning 'all the hits' from the pattern match to a list... that comprises one element. </p>\n\n<p>Note - that's so you can do:</p>\n\n<pre><code>my @matches = $string =~ m/(.)/g; \n</code></pre>\n\n<p>And get multiple 'hits' returned. If you do as above, you will only get the first match - which is irrelevant given your pattern, but you can do:</p>\n\n<pre><code>my ( $key, $value ) = $string =~ m/(\\w+)=(\\w+)/; \n</code></pre>\n\n<p>for example. </p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 5391906, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-d6vmng6XOXU/AAAAAAAAAAI/AAAAAAAAABY/XdVov0-iKFE/photo.jpg?sz=128", "display_name": "Ekaterina Klishina", "link": "https://stackoverflow.com/users/5391906/ekaterina-klishina"}, "is_accepted": false, "score": 3, "last_activity_date": 1445335578, "creation_date": 1445335578, "answer_id": 33233743, "question_id": 33233166, "link": "https://stackoverflow.com/questions/33233166/extract-string-after-a-symbol-in-perl/33233743#33233743", "title": "Extract string after a symbol in Perl", "body": "<p>I usually use parentheses to extract a part from text and then refer to the result stored in $1 variable.</p>\n\n<p>look at example:</p>\n\n<pre><code>my $text = \"day1: string over here\";\n\nprint $1 if ($text =~ /:\\s*(.+)$/);\n</code></pre>\n\n<p>but similar result may be recieved with this code too: </p>\n\n<pre><code>my $text = \"day1: string over here\"; \n\nmy ($a) = $text =~ /:\\s*(.+)$/;\nprint $a;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445411581, "post_id": 33234785, "comment_id": 54307578, "body": "I am not clear why you capture two groups in the regex example, but then ignore one of them."}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445417811, "post_id": 33234785, "comment_id": 54311301, "body": "OP wanted to extract the string after colon, so I ignored first one."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445420078, "post_id": 33234785, "comment_id": 54312794, "body": "Granted. But you could just omit the leading <code>(.*)</code> entirely, and just access <code>$1</code>. Or am I missing something?"}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445421133, "post_id": 33234785, "comment_id": 54313523, "body": "I wanted to show OP where is the first part and how capturing group works, so I didn&#39;t omit the leading part."}], "tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 1, "last_activity_date": 1445338585, "creation_date": 1445338585, "answer_id": 33234785, "question_id": 33233166, "link": "https://stackoverflow.com/questions/33233166/extract-string-after-a-symbol-in-perl/33234785#33234785", "title": "Extract string after a symbol in Perl", "body": "<p>You can achieve desire substring by using <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow\">split</a> function also:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $string = \"day1: string over here\";\n\nmy (undef, $substring) = split(':\\s*', $string);\n\nprint $substring, \"\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>string over here\n</code></pre>\n\n<p>Or you can get this by using capturing group <code>()</code> in regex:</p>\n\n<pre><code>my $string = \"day1: string over here\";\n$string =~ m/(.*)\\:\\s+(.*)$/;\nmy $substring = $2;\nprint $substring, \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 5103952, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/10f8944baa9ad1347c73c1e033e31127?s=128&d=identicon&r=PG&f=1", "display_name": "smiikr", "link": "https://stackoverflow.com/users/5103952/smiikr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16309, "favorite_count": 0, "accepted_answer_id": 33233261, "answer_count": 3, "score": 3, "last_activity_date": 1445338775, "creation_date": 1445333976, "last_edit_date": 1445338775, "question_id": 33233166, "link": "https://stackoverflow.com/questions/33233166/extract-string-after-a-symbol-in-perl", "title": "Extract string after a symbol in Perl", "body": "<p>How can I extract string after a symbol in Perl?</p>\n\n<p>I tried doing some searches but even the code I found didn't work.</p>\n\n<p>I'm trying to extract the string after a colon. So I want to show everything after the colon.</p>\n\n<p>Example:</p>\n\n<pre><code>string = day1: string over here\n\nsubstring = string over here\n</code></pre>\n\n<p>So far I have tried:</p>\n\n<pre><code>$substring = $string=~ /(\\:.*)\\s*$/;\n</code></pre>\n\n<p>But it only outputs the number 1 over and over.</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 11, "user_id": 4331644, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6e5ebb9836c4fe3f4cf8a56804667302?s=128&d=identicon&r=PG&f=1", "display_name": "Karthikeyan M", "link": "https://stackoverflow.com/users/4331644/karthikeyan-m"}, "edited": false, "score": 0, "creation_date": 1445329350, "post_id": 33231540, "comment_id": 54266613, "body": "Am getting Can&#39;t use string (&quot;XXXX&quot;) as a HASH ref while &quot;strict refs&quot; in use at"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1445329444, "post_id": 33231540, "comment_id": 54266670, "body": "What did you try to get that error?"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1445329453, "post_id": 33231540, "comment_id": 54266675, "body": "<code>$foo{&#39;a&#39;}{&#39;c&#39;}{&#39;d&#39;}</code>?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1445333060, "post_id": 33231540, "comment_id": 54268957, "body": "@KarthikeyanM: You should really show us what you&#39;ve tried."}], "answers": [{"comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1445329517, "post_id": 33231594, "comment_id": 54266711, "body": "Commonly known as a &quot;hohoho&quot; ;)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1445329602, "post_id": 33231594, "comment_id": 54266751, "body": "Having said that - part of this depends where the missing brackets go."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1445329672, "post_id": 33231594, "comment_id": 54266790, "body": "You probably didn&#39;t mean to write <code>$a</code> there."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1445329774, "post_id": 33231594, "comment_id": 54266841, "body": "No, amended. and added some examples of hash declaration to clarify."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1445329883, "post_id": 33231594, "comment_id": 54266906, "body": "@TLP it&#39;s not time for the hats yet... :)"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1445331913, "post_id": 33231594, "comment_id": 54268206, "body": "You could add the hashref case, too, it&#39;s not clear from the question what the input really is."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1445329756, "last_edit_date": 1445329756, "creation_date": 1445329484, "answer_id": 33231594, "question_id": 33231540, "link": "https://stackoverflow.com/questions/33231540/how-to-retrieve-values-from-the-hash/33231594#33231594", "title": "How to retrieve values from the hash?", "body": "<p>You've a 3 level deep hash - assuming you've a typo and your hash looks like:</p>\n\n<pre><code>my %hash = (\n    'a' =&gt; {\n        'b' =&gt; {},\n        'c' =&gt; { 'd' =&gt; 'e' }\n    }\n    );\n\nprint $hash{a}{c}{d};\n</code></pre>\n\n<p>If that bracket is at the end though:</p>\n\n<pre><code>my %hash = ( 'a' =&gt; { 'b' =&gt; { 'c' =&gt; { 'd' =&gt; 'e' } } } );\n\nprint $hash{a}{b}{c}{d};\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4331644, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6e5ebb9836c4fe3f4cf8a56804667302?s=128&d=identicon&r=PG&f=1", "display_name": "Karthikeyan M", "link": "https://stackoverflow.com/users/4331644/karthikeyan-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1445330861, "creation_date": 1445329305, "last_edit_date": 1445330861, "question_id": 33231540, "link": "https://stackoverflow.com/questions/33231540/how-to-retrieve-values-from-the-hash", "title": "How to retrieve values from the hash?", "body": "<p>How to retrieve value of <code>d</code> in this hash:  </p>\n\n<pre><code>'a' =&gt; {    \n        'b' =&gt; {    \n        'c' =&gt; {    \n                'd' =&gt; 'e'   \n       }\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1445325175, "post_id": 33230015, "comment_id": 54264336, "body": "Its not <code>out</code>, its <code>our</code>."}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1445326921, "post_id": 33230015, "comment_id": 54265282, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/7542120/perl-how-to-make-variables-from-requiring-script-available-in-required-script\">Perl: how to make variables from requiring script available in required script</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1445327598, "post_id": 33230015, "comment_id": 54265658, "body": "Actually that question doesn&#39;t have <code>warnings</code>."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 6, "last_activity_date": 1445326312, "creation_date": 1445326312, "answer_id": 33230582, "question_id": 33230015, "link": "https://stackoverflow.com/questions/33230015/how-do-i-use-a-variable-in-another-perl-script/33230582#33230582", "title": "How do I use a variable in another Perl script?", "body": "<p>You need to declare the variables with <code>our</code> in both scripts.</p>\n\n<pre><code># test1.pl\nuse strict;\nuse warnings;\n\nour ( $foo );\n\n$foo = 'bar';\n\n# test2.pl\nuse strict;\nuse warnings;\n\nour ( $foo );\nrequire 'test1.pl';\n\nprint $foo; # bar\n</code></pre>\n\n<p>Your script <code>test2.pl</code> starts out in the <code>main</code> package because there is no <code>package</code> declaration. When you <code>require</code> a script that has no <code>package</code> in it, all the code will be loaded at the point where the <code>require</code> statement is. It will end up in the same package as the <code>require</code> line. So what's in <code>test1.pl</code> also ends up in the <code>main</code> package of the same Perl instance.</p>\n\n<p><code>our</code> declares a package <em>variable</em>. That means it's available as <code>$foo</code> inside of your package, and it's visible outside. And that is the trick here.</p>\n\n<p>Stuff that is declared with <code>my $bar</code> inside of the <code>script1.pl</code> will end up in its own <em>scope</em> when the file is required, so the outer scope <code>script2.pl</code> cannot see that variable. But if you make it a package variable, it will be put into the package namespace, which is bigger. </p>\n\n<p>We declare the package variable <code>our $foo</code> first, and then <code>require 'test1.pl'</code>. Inside of the other script, we do <code>our $foo</code> again, so there is no <em><code>$foo</code> used only once</em> warning. The value of <code>'bar'</code> will end up in the package <code>$foo</code> (which is actually <code>$main::foo</code>, or <code>$::foo</code> if you ommit the name of the package. From there, it will be accessed later when printing <code>$foo</code>.</p>\n\n<p>The order of the <code>our</code> and <code>require</code> doesn't really matter. But if you use globals, it makes sense to stick to some conventions, like listing all the global variables at the top of the script.</p>\n\n<hr>\n\n<p>A word of advice: while this stuff seems to be <em>easy</em>, it is pretty outdated. Of course it works for small things, but it is hard to maintain.  Only use this stuff in legacy applications if it's already there and rewriting is too costly. You know about packages already. Use them instead!</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 8, "last_activity_date": 1445328624, "creation_date": 1445328624, "answer_id": 33231325, "question_id": 33230015, "link": "https://stackoverflow.com/questions/33230015/how-do-i-use-a-variable-in-another-perl-script/33231325#33231325", "title": "How do I use a variable in another Perl script?", "body": "<p>This is all far easier if you create a \"real\" module. Requiring libraries like that was a Perl 4 trick.</p>\n\n<p>In DBName.pm, you have:</p>\n\n<pre><code>package DBName;\n\nuse strict;\nuse warnings;\n\nuse base 'Exporter';\nour @EXPORT = qw[$DBName];\n\nour $DBName = 'xxyz';\n\n1;\n</code></pre>\n\n<p>And in the calling program:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse DBName;\n\nsub testing {\n  say $DBName;\n}\n\ntesting();\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 5267179, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0292f49bf60e0fa739a1dafca67c1a66?s=128&d=identicon&r=PG&f=1", "display_name": "Shreyas Bhargav", "link": "https://stackoverflow.com/users/5267179/shreyas-bhargav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5458, "favorite_count": 0, "accepted_answer_id": 33230582, "answer_count": 2, "score": 2, "last_activity_date": 1445328624, "creation_date": 1445324430, "last_edit_date": 1445325500, "question_id": 33230015, "link": "https://stackoverflow.com/questions/33230015/how-do-i-use-a-variable-in-another-perl-script", "title": "How do I use a variable in another Perl script?", "body": "<p>I know how to use a variable from one package to another in Perl. I am trying to use a global variable declared in <code>test1.pl</code> in another Perl script <code>test2.pl</code>. I am using <code>require</code> to load the perl file.</p>\n\n<pre><code>#!usr/bin/perl    #test1.pl\nuse strict;\nuse warnings;\n\nout $db_name;   #global variable to be used in another script\n\nfun();\n\nsub fun\n{\n$db_name = 'xxyy';\n}\n\n\n\n\n#!usr/bin/perl    #test2.pl\nrequire 'test1.pl';    #require is used to include the perl script like we use \"use\" for importing packages\nmy $database = $db_name;    #global variable from previous script\nuse strict;\nuse warnings;\n\ntesting();\n\nsub testing\n{\nprint \"$database\\n\";\n}\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1445330295, "post_id": 33229970, "comment_id": 54267151, "body": "Please don&#39;t use regular expressions for this job. They are the wrong tool to use. Seriously. They&#39;re not very good at &#39;handling&#39; tagged languages like XML and HTML. See: <a href=\"http://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454\">Parsing (X)HTML with regex</a>  Use a parser. If this is HTML, use a HTML parser. If it&#39;s XML, an XML parser.  (there&#39;s some commonality, XML is stricter)"}, {"owner": {"reputation": 585, "user_id": 5147246, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12lQb.jpg?s=128&g=1", "display_name": "klaar", "link": "https://stackoverflow.com/users/5147246/klaar"}, "edited": false, "score": 0, "creation_date": 1445330924, "post_id": 33229970, "comment_id": 54267555, "body": "Agreed, the OP is explaining what he wants to do, but not why he wants to do it. We need this info first to be able to give proper advice."}], "answers": [{"comments": [{"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 2, "creation_date": 1445326543, "post_id": 33230419, "comment_id": 54265068, "body": "Don&#39;t forget the /s modifier to the regexp if your input contains newlines. Another idea: why do this by hand at all? Modules like <code>Mojo::DOM</code> exist that make this really easy and fairly safe. Simple hand-crafted regexps are usually brittle and only a good idea if you know your inputs well and speed is very important."}, {"owner": {"reputation": 889, "user_id": 1505752, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f115c18fc65d4914c7ae1dac7997308c?s=128&d=identicon&r=PG", "display_name": "VSr", "link": "https://stackoverflow.com/users/1505752/vsr"}, "edited": false, "score": 0, "creation_date": 1445330401, "post_id": 33230419, "comment_id": 54267214, "body": "I have tried to identify the first <code>&lt;p&gt;&lt;&#47;p&gt;</code> set by making variable into 1 like <code>$i=1; $i = $i+1; if $i=1</code> then its first. But I can&#39;t find the last set. Is there any idea to find in this way?"}, {"owner": {"reputation": 585, "user_id": 5147246, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12lQb.jpg?s=128&g=1", "display_name": "klaar", "link": "https://stackoverflow.com/users/5147246/klaar"}, "edited": false, "score": 0, "creation_date": 1445330964, "post_id": 33230419, "comment_id": 54267584, "body": "I don&#39;t really understand what you mean; my regexp will span across the complete set of <code>&lt;p&gt;</code>aragraphs in one single attempt."}], "tags": [], "owner": {"reputation": 585, "user_id": 5147246, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12lQb.jpg?s=128&g=1", "display_name": "klaar", "link": "https://stackoverflow.com/users/5147246/klaar"}, "is_accepted": false, "score": -1, "last_activity_date": 1445326684, "last_edit_date": 1445326684, "creation_date": 1445325809, "answer_id": 33230419, "question_id": 33229970, "link": "https://stackoverflow.com/questions/33229970/find-first-and-last-occurence-of-the-matched-string-in-perl/33230419#33230419", "title": "find first and last occurence of the matched string in perl", "body": "<p>Just span your regexp from the very first <code>&lt;p&gt;</code> to the very last <code>&lt;/p&gt;</code> and put the <code>&lt;div&gt;</code>s around it: <code>s#(&lt;p&gt;.*&lt;/p&gt;)#&lt;div&gt;\\n$1\\n&lt;/div&gt;#s</code>.</p>\n\n<p>edit: as @mbethke has noticed, to be able to let <code>.</code> span accross newlines, you must use the <a href=\"http://perldoc.perl.org/perlre.html#s\" rel=\"nofollow\">s-modifier</a>.</p>\n"}], "owner": {"reputation": 889, "user_id": 1505752, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f115c18fc65d4914c7ae1dac7997308c?s=128&d=identicon&r=PG", "display_name": "VSr", "link": "https://stackoverflow.com/users/1505752/vsr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1445326684, "creation_date": 1445324258, "question_id": 33229970, "link": "https://stackoverflow.com/questions/33229970/find-first-and-last-occurence-of-the-matched-string-in-perl", "title": "find first and last occurence of the matched string in perl", "body": "<p>Want to insert opening and closing element for set of <code>&lt;p&gt;</code> tags.</p>\n\n<p>input</p>\n\n<pre><code>&lt;p&gt;Para1&lt;/p&gt;\n&lt;p&gt;Para2&lt;/p&gt;\n&lt;p&gt;Para3&lt;/p&gt;\n</code></pre>\n\n<p>expected output</p>\n\n<pre><code> &lt;div&gt;\n   &lt;para&gt;Para1&lt;/para&gt;\n   &lt;para&gt;Para2&lt;/para&gt;\n   &lt;para&gt;Para3&lt;/para&gt;\n &lt;/div&gt;\n</code></pre>\n\n<p>How to find the first and last occurrence of <code>&lt;p&gt;(.[^\\&lt;]*)&lt;\\/p&gt;</code> and insert <code>&lt;div&gt;</code></p>\n"}, {"tags": ["php", "perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1445327345, "post_id": 33229056, "comment_id": 54265534, "body": "This looks very similar to <a href=\"http://stackoverflow.com/questions/33216268/equivalent-for-mb-convert-encoding-in-perl/33218899\">this question</a>. Are you two working together?"}], "answers": [{"tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 1, "last_activity_date": 1445323117, "creation_date": 1445323117, "answer_id": 33229639, "question_id": 33229056, "link": "https://stackoverflow.com/questions/33229056/remove-windows-character-from-file-or-string-from-php-perl/33229639#33229639", "title": "Remove windows character (\ufffd) from file or string from php/perl", "body": "<p>Try this:</p>\n\n<pre><code>$str = mb_convert_encoding($str, 'UTF-8', 'UTF-8');\n</code></pre>\n\n<p>It will remove invalid characters.</p>\n"}], "owner": {"reputation": 11, "user_id": 5465635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5cf3b1926c723186e6e6111569d26c2?s=128&d=identicon&r=PG&f=1", "display_name": "Govind", "link": "https://stackoverflow.com/users/5465635/govind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1445323175, "creation_date": 1445320660, "last_edit_date": 1445323175, "question_id": 33229056, "link": "https://stackoverflow.com/questions/33229056/remove-windows-character-from-file-or-string-from-php-perl", "title": "Remove windows character (\ufffd) from file or string from php/perl", "body": "<p>I want to remove windows junk character(\ufffd) from <em>csv</em> file and maintain <em>utf</em> characters.<br>\nI tried below things but did not work. </p>\n\n<pre><code>mb_convert_encoding.\npreg_replace('/[^\\p{L}\\s]/u','',$str);\nutf8_encode\n</code></pre>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1445319381, "post_id": 33228746, "comment_id": 54261681, "body": "This is not possible. JSON objects/Perl hashes are unordered by definition. You can sort the keys, though, which might still get you what you want. If you need an ordered collection, an array is what you want."}, {"owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "edited": false, "score": 1, "creation_date": 1445342113, "post_id": 33228746, "comment_id": 54274854, "body": "for(sort { $h-&gt;{$a} &lt;=&gt; $h-&gt;{$b} } keys %$h) { print &quot;$_\\n&quot; } if you need sorted output. Sorted hash isn&#39;t possible"}], "answers": [{"comments": [{"owner": {"reputation": 770, "user_id": 2763551, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/09eb7a50a9ba2e15ba30d4f56e5da43b?s=128&d=identicon&r=PG&f=1", "display_name": "Soorajlal K G", "link": "https://stackoverflow.com/users/2763551/soorajlal-k-g"}, "edited": false, "score": 0, "creation_date": 1445320653, "post_id": 33228847, "comment_id": 54262168, "body": "JSON data may vary. Actually i want output in the order key-value pair added."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 770, "user_id": 2763551, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/09eb7a50a9ba2e15ba30d4f56e5da43b?s=128&d=identicon&r=PG&f=1", "display_name": "Soorajlal K G", "link": "https://stackoverflow.com/users/2763551/soorajlal-k-g"}, "edited": false, "score": 1, "creation_date": 1445321634, "post_id": 33228847, "comment_id": 54262556, "body": "@SoorajlalKG It&#39;s an object. An object is an unordered set of name/value pairs. <b>There is no order.</b>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445330520, "post_id": 33228847, "comment_id": 54267290, "body": "You can output your JSON by setting <code>canonical</code>."}], "tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 1, "last_activity_date": 1445319727, "creation_date": 1445319727, "answer_id": 33228847, "question_id": 33228746, "link": "https://stackoverflow.com/questions/33228746/perl-json-decoding-and-print-key-from-key-value-pair/33228847#33228847", "title": "Perl JSON decoding and print key from key value pair", "body": "<p>I guess using <code>sort</code> will give you expected output:</p>\n\n<pre><code>foreach my $key(sort keys %$text) {\n    print \"$key\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 770, "user_id": 2763551, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/09eb7a50a9ba2e15ba30d4f56e5da43b?s=128&d=identicon&r=PG&f=1", "display_name": "Soorajlal K G", "link": "https://stackoverflow.com/users/2763551/soorajlal-k-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3265, "favorite_count": 0, "closed_date": 1445319559, "answer_count": 1, "score": 1, "last_activity_date": 1445323449, "creation_date": 1445319250, "last_edit_date": 1445323449, "question_id": 33228746, "link": "https://stackoverflow.com/questions/33228746/perl-json-decoding-and-print-key-from-key-value-pair", "closed_reason": "Duplicate", "title": "Perl JSON decoding and print key from key value pair", "body": "<p>I am a Perl newbie and want to loop over JSON data.<br>\nThis is my code:</p>\n\n<pre><code>use JSON::XS;\nmy $jsonxx = '{\"a\":1,\"b\":2,\"c\":3,\"d\":4,\"e\":5}';\nmy $text = decode_json($jsonxx);\nforeach my $key(keys %$text) {\n    print \"$key\\n\";\n}\n</code></pre>\n\n<p>and output is:</p>\n\n<pre><code>e\nc\na\nb\nd\n</code></pre>\n\n<p>But I want output in the order of key-value pair given.</p>\n\n<p>Expected Output:</p>\n\n<pre><code>a\nb\nc\nd\ne\n</code></pre>\n\n<p>Can anyone please help?</p>\n"}, {"tags": ["regex", "perl", "parsing", "text-parsing"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1445318818, "post_id": 33228351, "comment_id": 54261439, "body": "If you had <code>use strict</code> and <code>use warnings</code> turned on, you&#39;d get a compilation error about <code>$line</code>. It&#39;s not the source of your problem, but still."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1445319281, "post_id": 33228351, "comment_id": 54261637, "body": "The real problem is that you were a little overzealous with the parentheses, and you ended up with too many capture groups as a result. <code>my @matches = $_ =~ m&#47;^((\\d)+)\\s[\\S]\\s(([\\s\\d\\w])+)$&#47;; dd(\\@matches);</code> produces <code>[84404167, 7, &quot;NAME ONE OF SILVA&quot;, &quot;A&quot;]</code>. Also, in the future, instead of saying that you don&#39;t see the correct value, you should provide the output you <i>are</i> seeing."}], "answers": [{"comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1445318683, "post_id": 33228594, "comment_id": 54261394, "body": "You could split on <code>&#47;\\s*-\\s*&#47;</code> to clean up those surrounding spaces."}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1445319082, "post_id": 33228594, "comment_id": 54261541, "body": "@MattJacob: Done. Thanks! :)"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1445319260, "post_id": 33228594, "comment_id": 54261629, "body": "You beat me to the answer by about 15 seconds. My answer was essentially the same, except with the <code>\\s*</code>, so no need to post it again. ;-)"}], "tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 1, "last_activity_date": 1445319056, "last_edit_date": 1445319056, "creation_date": 1445318554, "answer_id": 33228594, "question_id": 33228351, "link": "https://stackoverflow.com/questions/33228351/parsing-a-file-and-use-perl-regex-to-match-fields-in-the-file/33228594#33228594", "title": "Parsing a file and use perl regex to match fields in the file", "body": "<p>Instead of regex you can use <code>split</code> function:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nopen my $fin, \"&lt;\", \"abc.txt\" or die \"cannot open input.txt: $!\";\n\nwhile (my $line1 = &lt;$fin&gt;)\n{\n    chomp $line1;\n    if ($. == 1)     # line 1\n    {   \n        my ($codigo, $nome) = split (/\\s*-\\s*/, $line1);\n        print \"codigo: $codigo nome: $nome\\n\";\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>codigo: 84404167 nome: NAME ONE OF SILVA\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5465484, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t6c_2yE8huw/AAAAAAAAAAI/AAAAAAAAAgc/8vuBv5w3N3s/photo.jpg?sz=128", "display_name": "Claudio Junior", "link": "https://stackoverflow.com/users/5465484/claudio-junior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1445319439, "creation_date": 1445317312, "last_edit_date": 1445319439, "question_id": 33228351, "link": "https://stackoverflow.com/questions/33228351/parsing-a-file-and-use-perl-regex-to-match-fields-in-the-file", "title": "Parsing a file and use perl regex to match fields in the file", "body": "<p>I have a file with the format bellow and I need to use Perl and regex to get the values to insert a database. I try to use regex, but I have errors. Follow the script I use to get the first value:</p>\n\n<pre><code># line 1\nopen(my $fin, \"&lt;\", \"input.txt\") \n    or die \"cannot open &lt; input.txt: $!\";\nmy $line1 = &lt;$fin&gt;;\nchomp $line1;\nprint \"$line\\n\";\n\nmy ($codigo, $nome) = ($line1 =~ m/^((\\d)+)\\s[\\S]\\s(([\\s\\d\\w])+)$/);\nprint \"#$codigo#$nome#\\n\";\n\n# line 2\n$line2 = &lt;$fin&gt;;\nchomp $line2;\n..\n</code></pre>\n\n<p>But I don\u00b4t see the correct value of \"codigo\" and \"nome\".</p>\n\n<p>The format of file is:</p>\n\n<pre>\n84404167 -\u00a0NAME ONE OF SILVA\nR NONONONO, 143334, HOUSE - REGION - CITY - 81280400\nRes:\u00a0(22)5555.4543\u00a0Cel:\u00a0(33)5555.8659\u00a0Ou:\u00a0\nIn\u00edcio:\u00a017/12/2013 -\u00a0Data de aniv.:\u00a023/02/1955\nCr\u00e9dito:\u00a01440 -\u00a0Cr\u00e9dito Dispon\u00edvel:\u00a01152 -\u00a0Status:\u00a0ATIVA\u00a0\n\n96071311 -\u00a0NAME SECOND OF JOSE\nR SECRET ADDRESS NONONNO, 433, ap 232 b azaleia - fazendinha - CURITIBA - 81320420\nRes:\u00a0\u00a0Cel:\u00a0(22)5555.9776\u00a0Ou:\u00a0(33)5555.2352\nIn\u00edcio:\u00a022/01/2015 -\u00a0Data de aniv.:\u00a010/05/1981\nCr\u00e9dito:\u00a0764 -\u00a0Cr\u00e9dito Dispon\u00edvel:\u00a0516 -\u00a0Status:\u00a0ATIVA\u00a0\n</pre>\n"}, {"tags": ["php", "html", "regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1445301721, "post_id": 33226071, "comment_id": 54256851, "body": "The short version of the answer is yes, except that the original page must be fetched <i>as well</i> as the linked pages. There is no way to know what URLs a pages links to without fetching it first"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1445303138, "post_id": 33226071, "comment_id": 54257227, "body": "There&#39;s no need to use HTML entities within code sections on  Stack Overflow. We use a version of <a href=\"https://daringfireball.net/projects/markdown/\" rel=\"nofollow noreferrer\"><b><i>Markdown</i></b></a> and there is a page here on <a href=\"http://stackoverflow.com/editing-help\"><b><i>Markdown Editing Help</i></b></a>"}, {"owner": {"reputation": 3, "user_id": 5464905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c89ca80165b9305e21e2c47a7727eb2a?s=128&d=identicon&r=PG&f=1", "display_name": "user5464905", "link": "https://stackoverflow.com/users/5464905/user5464905"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1445361572, "post_id": 33226071, "comment_id": 54288163, "body": "Sorry - I was trying to describe how the pattern is consistent across these links and thought that would make it easier to visualize."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1445361732, "post_id": 33226071, "comment_id": 54288265, "body": "What I mean is that <i>markdown</i> allows you to add preformatted data that may include HTML tags which are displayed literally. Look at how I&#39;ve edited your question"}, {"owner": {"reputation": 3, "user_id": 5464905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c89ca80165b9305e21e2c47a7727eb2a?s=128&d=identicon&r=PG&f=1", "display_name": "user5464905", "link": "https://stackoverflow.com/users/5464905/user5464905"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1445452672, "post_id": 33226071, "comment_id": 54334706, "body": "Got it - I had to edit several times to get it to where I had it originally."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5464905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c89ca80165b9305e21e2c47a7727eb2a?s=128&d=identicon&r=PG&f=1", "display_name": "user5464905", "link": "https://stackoverflow.com/users/5464905/user5464905"}, "edited": false, "score": 0, "creation_date": 1445361495, "post_id": 33226330, "comment_id": 54288122, "body": "Thanks. This wouldn&#39;t get implemented at my end and I don&#39;t know what the other side looks like - I just know that they access my pages as part of a user transaction (presenting terms from my side for acceptance as part of a download). I told a third party I&#39;d try to find out if it&#39;s possible to do such a thing even though I wouldn&#39;t be the one doing it. I figured it probably was possible and is in fact fairly simple, but it&#39;s beyond my basic HTML knowledge. I&#39;ll let him know there are tools that can facilitate it and leave it to him to deal with whoever needs to implement it at the other end."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1445302624, "creation_date": 1445302624, "answer_id": 33226330, "question_id": 33226071, "link": "https://stackoverflow.com/questions/33226071/can-i-parse-html-at-a-target-page-and-jump-to-a-link-inside-it-instead/33226330#33226330", "title": "Can I parse HTML at a target page and jump to a link inside it instead?", "body": "<p>You don't give very much detail, but yes, it sounds like this is possible</p>\n\n<p>Traditionally, PHP is a server-side language while Perl is more often used on the client side. It would be a bad idea to implement this on a web server system, but if you are thinking of an HTTP <em>client</em> then it is feasible in pretty much any language</p>\n\n<p>If you don't understand the distinction between <strong>client</strong> and <strong>server</strong> then please ask</p>\n"}], "owner": {"reputation": 3, "user_id": 5464905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c89ca80165b9305e21e2c47a7727eb2a?s=128&d=identicon&r=PG&f=1", "display_name": "user5464905", "link": "https://stackoverflow.com/users/5464905/user5464905"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 33226330, "answer_count": 1, "score": 0, "last_activity_date": 1445302624, "creation_date": 1445300677, "last_edit_date": 1445302193, "question_id": 33226071, "link": "https://stackoverflow.com/questions/33226071/can-i-parse-html-at-a-target-page-and-jump-to-a-link-inside-it-instead", "title": "Can I parse HTML at a target page and jump to a link inside it instead?", "body": "<p>The short version of my question is whether code can be written so that, instead of opening a page, it parses that page and opens a link on it instead? I've read a little bit about using PHP or Perl or other tools to parse HTML; is this something that could be done with tools like that?</p>\n\n<p>I maintain some pages that include links to a fixed list of language-specific documents. The format is consistent along the lines of this (in generic fashion) with the line commented out if that document is not yet posted:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;ul&gt;\n    &lt;li&gt;&lt;a href=\"(en_US link)\"&gt;English&lt;/a&gt;&lt;/li&gt;\n    &lt;!-- &lt;li&gt;&lt;a href=\"(bg_BG link)\"&gt;Bulgarian&lt;/a&gt;&lt;/li&gt; --&gt; \n    &lt;!-- &lt;li&gt;&lt;a href=\"(zh_CN link)\"&gt;Chinese - Simplified&lt;/a&gt;&lt;/li&gt; --&gt; \n    &lt;li&gt;&lt;a href=\"(zn_TW link)\"&gt;Chinese - Traditional&lt;/a&gt;&lt;/li&gt; \n    ... etc.\n&lt;/ul&gt;\n</code></pre>\n\n<p>Someone else has links to these pages.</p>\n\n<p>Given one of these and knowing the language desired, could they find that link in the page and jump to it instead if that line is not commented out? Writing a regex would be easy because these embedded URLs all end with <code>xx_XX.pdf</code> using whatever the language/locale is.</p>\n\n<p>I'm not trying to figure out what the code would be, just whether that's something one could write if they have the right tools and right knowledge.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1445296598, "post_id": 33225441, "comment_id": 54255510, "body": "You want <code>split</code> and a hash, not a regular expression. What have you tried so far?"}, {"owner": {"reputation": 409, "user_id": 2052681, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/d24090495cd4592a9493725bf758b42e?s=128&d=identicon&r=PG", "display_name": "sanforyou", "link": "https://stackoverflow.com/users/2052681/sanforyou"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1445296767, "post_id": 33225441, "comment_id": 54255561, "body": "Can&#39;t I use regex and substitute nothing after occurrence of third &#39;/&#39; character?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1445296862, "post_id": 33225441, "comment_id": 54255587, "body": "You can, but you shouldn&#39;t. It&#39;s not just <code>&#47;</code>---it&#39;s also all the stuff in between the slashes that you want to keep. Also, is your example output even correct? It looks like there are still duplicate lines for <code>libA&#47;cellC&#47;view1</code>."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1445296982, "post_id": 33225441, "comment_id": 54255624, "body": "Since you updated your post with what you&#39;ve tried so far (I guess... but a single malformed regex match isn&#39;t really going to do anything), I&#39;ll point out that you probably also need some code to process your input file line by line and make some decisions based on what you find."}, {"owner": {"reputation": 409, "user_id": 2052681, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/d24090495cd4592a9493725bf758b42e?s=128&d=identicon&r=PG", "display_name": "sanforyou", "link": "https://stackoverflow.com/users/2052681/sanforyou"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1445297149, "post_id": 33225441, "comment_id": 54255679, "body": "Sorry I update the post to correct example output. Thanks for your help"}, {"owner": {"reputation": 409, "user_id": 2052681, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/d24090495cd4592a9493725bf758b42e?s=128&d=identicon&r=PG", "display_name": "sanforyou", "link": "https://stackoverflow.com/users/2052681/sanforyou"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1445298910, "post_id": 33225441, "comment_id": 54256143, "body": "I just update main post with the code I&#39;m trying right now, I still have a issue with below print line:print OUTFILE ($lib/$cell/$view/n);"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1447179138, "post_id": 33225441, "comment_id": 55047386, "body": "Did my answer solve your problem?"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445376679, "post_id": 33225932, "comment_id": 54296575, "body": "Could maybe pop parts, so it copes with different path lengths."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 1, "last_activity_date": 1445299619, "creation_date": 1445299619, "answer_id": 33225932, "question_id": 33225441, "link": "https://stackoverflow.com/questions/33225441/parse-a-text-file-suing-regex-in-perl/33225932#33225932", "title": "parse a text file suing regex in perl", "body": "<p>Save as <code>script.pl</code> (or whatever) and invoke like so: <code>perl script.pl input.txt</code></p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %unique;\n\nwhile (&lt;&gt;) {\n    my @parts = split(/\\//, $_);\n    my $key = join('/', @parts[0 .. 2]);\n\n    if (!$unique{$key}++) {\n        print $key;\n    }\n\n    print \"\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 4978958, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-n_1T6oSAxfk/AAAAAAAAAAI/AAAAAAAACRk/kD_4-xW1Nqg/photo.jpg?sz=128", "display_name": "rcedillo", "link": "https://stackoverflow.com/users/4978958/rcedillo"}, "is_accepted": false, "score": 0, "last_activity_date": 1445299863, "creation_date": 1445299863, "answer_id": 33225969, "question_id": 33225441, "link": "https://stackoverflow.com/questions/33225441/parse-a-text-file-suing-regex-in-perl/33225969#33225969", "title": "parse a text file suing regex in perl", "body": "<p>It's something like this</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>my %unique = ();\nmy @fields = undef;\nwhile(&lt;DATA&gt;){\n    chomp;\n    @fields = split /\\//, $_;\n    if (not $unique{\"$fields[0]/$fields[1]/$fields[2]\"}++){\n        print \"$fields[0]/$fields[1]/$fields[2]\"\n    }else{\n        print \"\\n\";\n    }\n}\n#map {print $_.\"\\n\"} keys %unique;\n\n__DATA__\nlibA/cellA/view1/data.dm#1 - edit default\nlibA/cellA/view1/master.tag#1 - edit defau\nlibA/cellA/view1/sch.oa#1 - edit default c\nlibA/cellA/view1/thumbnail_128x128.png#1 -\nlibA/cellB/view1/data.dm#1 - edit default\nlibA/cellB/view1/master.tag#1 - edit defau\nlibA/cellB/view1/sch.oa#1 - edit default c\nlibA/cellB/view1/thumbnail_128x128.png#1 -\nlibA/cellB/symbol/master.tag#1 - edit defa\nlibA/cellB/symbol/symbol.oa#1 - edit defau\nlibA/cellB/symbol/thumbnail_128x128.png#1\nlibA/cellC/view1/data.dm#1 - edit default\nlibA/cellC/view1/master.tag#1 - edit defau\nlibA/cellC/view1/sch.oa#1 - edit default c\nlibA/cellC/view1/thumbnail_128x128.png#1 -\nlibA/cellD/veriloga/data.dm#1 - edit defau\nlibA/cellD/veriloga/master.tag#1 - edit de\nlibA/cellD/veriloga/netlist.oa#1 - edit de\nlibA/cellD/veriloga/veriloga.va#1 - edit d\nlibA/cellE/view1/data.dm#1 - edit default\nlibA/cellE/view1/master.tag#1 - edit defau\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>libA/cellA/view1\n\n\nlibA/cellB/view1\n\n\nlibA/cellB/symbol\n\nlibA/cellC/view1\n\n\nlibA/cellD/veriloga\n\n\nlibA/cellE/view1\n</code></pre>\n"}], "owner": {"reputation": 409, "user_id": 2052681, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/d24090495cd4592a9493725bf758b42e?s=128&d=identicon&r=PG", "display_name": "sanforyou", "link": "https://stackoverflow.com/users/2052681/sanforyou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1445299863, "creation_date": 1445296159, "last_edit_date": 1445298866, "question_id": 33225441, "link": "https://stackoverflow.com/questions/33225441/parse-a-text-file-suing-regex-in-perl", "title": "parse a text file suing regex in perl", "body": "<p>Hi I have a text file that I need to parse</p>\n\n<pre><code>libA/cellA/view1/data.dm#1 - edit default \nlibA/cellA/view1/master.tag#1 - edit defau\nlibA/cellA/view1/sch.oa#1 - edit default c\nlibA/cellA/view1/thumbnail_128x128.png#1 -\nlibA/cellB/view1/data.dm#1 - edit default \nlibA/cellB/view1/master.tag#1 - edit defau\nlibA/cellB/view1/sch.oa#1 - edit default c\nlibA/cellB/view1/thumbnail_128x128.png#1 -\nlibA/cellB/symbol/master.tag#1 - edit defa\nlibA/cellB/symbol/symbol.oa#1 - edit defau\nlibA/cellB/symbol/thumbnail_128x128.png#1 \nlibA/cellC/view1/data.dm#1 - edit default \nlibA/cellC/view1/master.tag#1 - edit defau\nlibA/cellC/view1/sch.oa#1 - edit default c\nlibA/cellC/view1/thumbnail_128x128.png#1 -\nlibA/cellD/veriloga/data.dm#1 - edit defau\nlibA/cellD/veriloga/master.tag#1 - edit de\nlibA/cellD/veriloga/netlist.oa#1 - edit de\nlibA/cellD/veriloga/veriloga.va#1 - edit d\nlibA/cellE/view1/data.dm#1 - edit default \nlibA/cellE/view1/master.tag#1 - edit defau\n</code></pre>\n\n<p>Step1:In above text file I only want to keep text until third occurance of '/' character. for example output should be as below:</p>\n\n<pre><code>libA/cellA/view1\nlibA/cellA/view1\nlibA/cellA/view1\nlibA/cellA/view1\nlibA/cellB/view1\nlibA/cellB/view1\nlibA/cellB/view1\nlibA/cellB/view1\nlibA/cellB/view2\nlibA/cellB/view2\nlibA/cellB/view2\nlibA/cellC/view1\nlibA/cellC/view1\nlibA/cellC/view1\nlibA/cellC/view1\nlibA/cellD/view3\nlibA/cellD/view3\nlibA/cellD/view3\nlibA/cellD/view3\nlibA/cellE/view1\nlibA/cellE/view1\n</code></pre>\n\n<p>Setp2: Then I would like to delete duplicate lines retaining empty line in between:</p>\n\n<pre><code>libA/cellA/view1\n\n\n\nlibA/cellB/view1\n\n\n\nlibA/cellB/view2\n\n\nlibA/cellC/view1\n\n\nlibA/cellD/view3\n\n\n\n\nlibA/cellE/view1\n</code></pre>\n\n<p>any pointer on how to do this in Perl?\nI'm trying something like this: </p>\n\n<pre><code>#!/usr/bin/perl\n# File: parse.pl\n\nunless (open(MYFILE, \"sample.txt\")) \n{\n    die (\"cannot open input file file1\\n\");\n}\n\nunless (open(OUTFILE, \"&gt;outfile.txt\")) \n{\n    die (\"cannot open output file outfile\\n\");\n}\n\n\n# if the program gets this far, the file was\n# opened successfully\n$line = &lt;MYFILE&gt;;\nwhile ($line ne \"\") \n{\n  #print ($line);\n\n my ($lib, $cell, $view) = split /:/, $line;\n #print \"$lib\\n\";\n #print \"$cell\\n\";\n #print \"$view\\n\";\n print OUTFILE ($lib/$cell/$view/n);\n  $line = &lt;MYFILE&gt;;\n\n}\n</code></pre>\n"}, {"tags": ["perl", "dependencies", "yum", "rhel6"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 2, "creation_date": 1445294115, "post_id": 33224915, "comment_id": 54254673, "body": "Did you add the EPEL release package like the guide said?"}, {"owner": {"reputation": 446, "user_id": 2608693, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NdTTB.jpg?s=128&g=1", "display_name": "tbenz9", "link": "https://stackoverflow.com/users/2608693/tbenz9"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1445294723, "post_id": 33224915, "comment_id": 54254890, "body": "I&#39;ve updated the question with the repolist."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1445295099, "post_id": 33224915, "comment_id": 54255018, "body": "I&#39;m not very familiar with red hat packaging, but it looks offhand like you have perl installed via some other mechanism than yum.  in which case, you need to figure out <i>why</i> that is before doing anything about it."}, {"owner": {"reputation": 446, "user_id": 2608693, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NdTTB.jpg?s=128&g=1", "display_name": "tbenz9", "link": "https://stackoverflow.com/users/2608693/tbenz9"}, "edited": false, "score": 0, "creation_date": 1445295369, "post_id": 33224915, "comment_id": 54255117, "body": "Thank you for your comment.   If I do &quot;yum install perl&quot; it reports <code>Package 4:perl-5.10.1-141.el6.x86_64 already installed and latest version</code>"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1445296345, "post_id": 33224915, "comment_id": 54255443, "body": "That&#39;s the official perl package. The perfSONAR stuff is coming from the Internet2 repo but that&#39;s expected given the directions (though those packages probably shouldn&#39;t be marked <code>el6</code>). The question is what should be providing things like <code>perl(Params::Validate)</code> and <code>perl(Module::Load)</code> and those two at least are provided by perl packages provided by CentOS itself. You appear to be missing the normal CentOS base and updates repositories. What files are present in <code>&#47;etc&#47;yum.repos.d</code>? What does <code>rpm -q centos-release</code> report? You appear to have a slightly busted installation of CentOS."}], "answers": [{"tags": [], "owner": {"reputation": 446, "user_id": 2608693, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NdTTB.jpg?s=128&g=1", "display_name": "tbenz9", "link": "https://stackoverflow.com/users/2608693/tbenz9"}, "is_accepted": true, "score": 2, "last_activity_date": 1445299316, "creation_date": 1445299316, "answer_id": 33225891, "question_id": 33224915, "link": "https://stackoverflow.com/questions/33224915/missing-multiple-perl-dependencies/33225891#33225891", "title": "Missing multiple perl dependencies", "body": "<p>Thanks to @Etan Reisner for the tip to get me headed in the right direction.</p>\n\n<p>The RHEL 6 installation was missing it's base repo.  I opted to add the centos base repo since that's what perfSONAR is expecting.  While this may not be the *best solution it was able to fix my problem.</p>\n\n<p>Copy the following into /etc/yum.repos.d/centos.repo</p>\n\n<pre><code>[centos]\nname=CentOS $releasever - $basearch\nbaseurl=http://ftp.heanet.ie/pub/centos/6/os/$basearch/\nenabled=1\ngpgcheck=0\n</code></pre>\n\n<p>Then do a yum clean all and the yum install perfSonar worked!</p>\n"}], "owner": {"reputation": 446, "user_id": 2608693, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NdTTB.jpg?s=128&g=1", "display_name": "tbenz9", "link": "https://stackoverflow.com/users/2608693/tbenz9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 821, "favorite_count": 0, "accepted_answer_id": 33225891, "answer_count": 1, "score": 1, "last_activity_date": 1445299316, "creation_date": 1445293184, "last_edit_date": 1445294591, "question_id": 33224915, "link": "https://stackoverflow.com/questions/33224915/missing-multiple-perl-dependencies", "title": "Missing multiple perl dependencies", "body": "<p>I'm trying to install perfSONAR using their official instructions <a href=\"http://docs.perfsonar.net/install_centos.html\" rel=\"nofollow\">here</a>.\nWhen I run <code>yum install perfSONAR-Bundles-Complete</code> I get dozens of errors like the following:</p>\n\n<pre><code>Error: Package: perl-perfSONAR_PS-Toolkit-ntp-3.5.0.5-1.pSPS.noarch (Internet2)\n           Requires: perl(Params::Validate)\nError: Package: perl-perfSONAR_PS-Toolkit-3.5.0.5-1.pSPS.noarch (Internet2)\n           Requires: perl(Template)\nError: Package: perl-perfSONAR-graphs-3.5.0.1-1.pSPS.noarch (Internet2)\n           Requires: perl(Data::UUID)\nError: Package: perl-perfSONAR_PS-RegularTesting-3.5-1.pSPS.noarch (Internet2)\n           Requires: perl(Data::UUID)\nError: Package: perl-perfSONAR_PS-Toolkit-Library-3.5.0.5-1.pSPS.noarch (Internet2)\n           Requires: perl(Params::Validate)\nError: Package: perl-perfSONAR_PS-LSCacheDaemon-3.4.2-1.pSPS.noarch (Internet2)\n           Requires: perl(Params::Validate)\nError: Package: perl-perfSONAR_PS-RegularTesting-3.5-1.pSPS.noarch (Internet2)\n           Requires: perl(Module::Load)\nError: Package: perl-DateTime-Format-ISO8601-0.07-7.el6.noarch (epel)\n           Requires: perl(DateTime)\n</code></pre>\n\n<p>Perl Version:</p>\n\n<pre><code># perl --version\nThis is perl, v5.10.1 (*) built for x86_64-linux-thread-multi\n</code></pre>\n\n<p>Repositories:</p>\n\n<pre><code># yum repolist\nLoaded plugins: changelog, priorities, ps, security\nrepo id                     repo name                                                              status\nInternet2                   Internet2 RPM Repository - software.internet2.edu - main                 333\nepel                        Extra Packages for Enterprise Linux 6 - x86_64                         11796\nepel-debuginfo              Extra Packages for Enterprise Linux 6 - x86_64 - Debug                  2216\nepel-source                 Extra Packages for Enterprise Linux 6 - x86_64 - Source                    0\nrepolist: 17413\n</code></pre>\n\n<p>I'm running this on a RHEL 6 machine.</p>\n\n<p><strong>The Quesion:</strong> What do I need to do to resolve the many perl dependency problems listed above?</p>\n"}, {"tags": ["c++", "bash", "perl", "c-preprocessor"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1445284401, "post_id": 33222721, "comment_id": 54250049, "body": "<i>&quot; I am too embarrased to post this code.&quot;</i> Well, no fix available then. We&#39;re not a free code writing service, sorry."}, {"owner": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1445284811, "post_id": 33222721, "comment_id": 54250275, "body": "Yes, you are right - I am coming off that way, aren&#39;t I? At any rate I am hoping there is some very easy way to do this, some sort of regex magick that does exactly this sort of thing for C++ #define since I must not be the first person to want to configure preprocessors via command-line. I have posted the code."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "edited": false, "score": 0, "creation_date": 1445285084, "post_id": 33222856, "comment_id": 54250410, "body": "Essentially reading from command line is not what is desired here. I will be recompiling regardless and simply need to change the configuration."}], "tags": [], "owner": {"reputation": 674, "user_id": 2843331, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f4607c2756f99ce71aa142a697b21e9b?s=128&d=identicon&r=PG", "display_name": "Husain", "link": "https://stackoverflow.com/users/2843331/husain"}, "is_accepted": false, "score": 1, "last_activity_date": 1445284760, "last_edit_date": 1495541296, "creation_date": 1445284760, "answer_id": 33222856, "question_id": 33222721, "link": "https://stackoverflow.com/questions/33222721/script-to-find-cpp-macro-object-and-replace-token/33222856#33222856", "title": "Script to Find CPP Macro Object and Replace Token", "body": "<p>This might answer your question in general: <a href=\"https://stackoverflow.com/questions/18483166/override-macro-from-the-command-line\">Override macro from the command line</a></p>\n\n<p>But, one thing you probably can do is to define</p>\n\n<pre><code>#define VARIABLE_A argument\nint argument;\n</code></pre>\n\n<p>Then read argument from the command line.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "edited": false, "score": 0, "creation_date": 1445347654, "post_id": 33225608, "comment_id": 54278646, "body": "This is useful and helpful, unfortunately not an option for myself on this particular project due to the build process not being within my control to change."}, {"owner": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "reply_to_user": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "edited": false, "score": 0, "creation_date": 1445436710, "post_id": 33225608, "comment_id": 54324284, "body": "What aspects of the project do you have the ability to change?  Can you move the <code>#define VARIABLE_A</code> into a header file by itself, and replace the original define with an include?  Then at least you just have to replace a one-line file to change VARIABLE_A."}, {"owner": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "edited": false, "score": 0, "creation_date": 1445446095, "post_id": 33225608, "comment_id": 54330972, "body": "Impossible; it is complicated, I will spare you the details. What if I re-phrase this problem and remove the fact that is inside a cpp file? As in I have &quot;define bar 67&quot; inside of a file and I wish to have a script that allows me to replace this with &quot;define bar 72&quot; upon running &quot;change_bar 72&quot;."}, {"owner": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "reply_to_user": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "edited": false, "score": 1, "creation_date": 1445447447, "post_id": 33225608, "comment_id": 54331760, "body": "For what it&#39;s worth, I&#39;ve noticed that giving more details will often let people find solutions that you weren&#39;t expecting.  That said, it sounds like you have access to that one file and only that file, so you need to change just that line, and no other.  If so, the fact this is in C++ is not actually critical, and what you really want is a targeted search-and-replace script that you can run from the command line.  You might want to just use sed."}, {"owner": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "edited": false, "score": 0, "creation_date": 1445451026, "post_id": 33225608, "comment_id": 54333816, "body": "Aye, I am being very general simply because much of the work is such that I could get into some trouble for posting any hint of source code on the Internet. Regardless, sed looks like it will work nicely, and for this I thank you kindly. I&#39;ll be sure to include the solution I ended up using once I have it working."}], "tags": [], "owner": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "is_accepted": true, "score": 4, "last_activity_date": 1445297239, "creation_date": 1445297239, "answer_id": 33225608, "question_id": 33222721, "link": "https://stackoverflow.com/questions/33222721/script-to-find-cpp-macro-object-and-replace-token/33225608#33225608", "title": "Script to Find CPP Macro Object and Replace Token", "body": "<p>When you recompile, you can use the -D option to set a value on the command line (at least in gcc and clang; presumably others).  So the simplest solution is to just define VARIABLE_A on the command line.</p>\n\n<pre><code>gcc -D VARIABLE_A=123 file.cc\n</code></pre>\n\n<p>If you want to have a default, you just need to have something in your code to define VARIABLE_A when it hasn't been set on the command line.</p>\n\n<pre><code>#ifndef VARIABLE_A\n#define VARIABLE_A 32\n#endif\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5000825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l2Pnl.jpg?s=128&g=1", "display_name": "insomniacjunkie", "link": "https://stackoverflow.com/users/5000825/insomniacjunkie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 33225608, "answer_count": 2, "score": 0, "last_activity_date": 1467819824, "creation_date": 1445284259, "last_edit_date": 1467819824, "question_id": 33222721, "link": "https://stackoverflow.com/questions/33222721/script-to-find-cpp-macro-object-and-replace-token", "title": "Script to Find CPP Macro Object and Replace Token", "body": "<p>Okay, I have tried to do this in Perl and have had little to no success...</p>\n\n<p>Inside of a .cpp file I have the following text...</p>\n\n<pre><code>#define VARIABLE_A    32\n</code></pre>\n\n<p>And I wish to replace this with some other number</p>\n\n<pre><code>#define VARIABLE_A    123\n</code></pre>\n\n<p>I would like to be able to run this through my command-line such as:</p>\n\n<pre><code>change_variable_a 123\n</code></pre>\n\n<p>What is the easiest way to achieve this? BASH or Perl preferred. </p>\n\n<p>The code I have now is garbage. I am going about it completely wrong trying to pass parameters through a bash script into a perl one-liner.</p>\n\n<p>Okay here is what I have. </p>\n\n<pre><code> perl -MPOSIX -pe's/(\\d+)/@ARGV[0]/e if /define\\s+VARIABLE_A\\s+\\d+/' file.h &gt; file.h.2\n mv -f file.h.2 file.h\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 0, "creation_date": 1445339084, "post_id": 33222611, "comment_id": 54272840, "body": "Definitely consider using <code>Term::Size</code> there. That&#39;s a far better way to ask the terminal how big it is."}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": true, "score": 2, "last_activity_date": 1445284151, "last_edit_date": 1445284151, "creation_date": 1445283832, "answer_id": 33222611, "question_id": 33222553, "link": "https://stackoverflow.com/questions/33222553/regular-expression-to-extract-pairs-of-values-from-stty-a-output/33222611#33222611", "title": "Regular expression to extract pairs of values from stty -a output", "body": "<p>Something like:</p>\n\n<pre><code>my $var = `stty -a`;\nif (my ($rows, $cols) = $var =~ /rows\\s+(\\d+);\\s+columns\\s+(\\d+)/) {\n  print \"$rows\\n\";\n  print \"$cols\\n\";\n}\n</code></pre>\n\n<p>The <code>+</code> in the regex means \"one or more of the preceding.\" It makes the regex much simpler than trying to handle it like <code>\\d\\d|\\d\\d\\d</code>. If you really want \"two or three of the preceding\" you can write expressions like <code>\\d{2,3}</code>.</p>\n\n<p>If you're looking for a more standard way of determining the size of the current terminal window, you might take a look at the various <code>Term::Size</code> modules on CPAN. </p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1445285751, "creation_date": 1445285751, "answer_id": 33223141, "question_id": 33222553, "link": "https://stackoverflow.com/questions/33222553/regular-expression-to-extract-pairs-of-values-from-stty-a-output/33223141#33223141", "title": "Regular expression to extract pairs of values from stty -a output", "body": "<p>You should process the output of <code>stty</code> as a general string</p>\n\n<p>Here's an example that processes your sample string. I have used <code>Data::Dump</code> to display the hash that is built from the pattern match, and the two columns -- <code>rows</code> and <code>columns</code> -- that you seem to be interested in are also shown</p>\n\n<pre><code>#! /usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse feature 'say';\n\nuse Data::Dump;\n\n#my $var = `stty -a`;\nmy $var = 'speed 38400 baud; rows 20; columns 96; line = 0;';\n\nmy %comms = do {\n    my @comms = grep $_, split /\\s*;\\s*/, $var;\n    map /(\\S*) [\\s=]* (.*) /x, @comms;\n};\n\ndd \\%comms;\n\nsay $comms{rows};\nsay $comms{columns};\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>{ columns =&gt; 96, line =&gt; 0, rows =&gt; 20, speed =&gt; \"38400 baud\" }\n20\n96\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 1318497, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/243a3a14a3af958f754c6e3a25eafbea?s=128&d=identicon&r=PG", "display_name": "mali184", "link": "https://stackoverflow.com/users/1318497/mali184"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 33222611, "answer_count": 2, "score": 0, "last_activity_date": 1445285751, "creation_date": 1445283626, "last_edit_date": 1445284443, "question_id": 33222553, "link": "https://stackoverflow.com/questions/33222553/regular-expression-to-extract-pairs-of-values-from-stty-a-output", "title": "Regular expression to extract pairs of values from stty -a output", "body": "<p>I am sure there is better way to extract rows and columns from a string</p>\n\n<p>This is an example of what <code>$var</code> may be set to</p>\n\n<pre><code>my $var = \"speed 38400 baud; rows 20; columns 96; line = 0;\"\n</code></pre>\n\n<p>The following program works, but I'm looking for a better regular expression</p>\n\n<pre><code>#! /usr/bin/perl\n\n#use strict;\n#use warnings;\n\nmy $var = `stty -a`;\n\nif ( $var =~ /speed\\s+38400\\s+baud\\;\\s+rows\\s+(\\d\\d)\\;\\s+columns\\s+(\\d\\d\\d|\\d\\d)/ ) {\n    printf $1;\n    printf \"\\n\";\n    print \"$2\\n\";\n}\n</code></pre>\n\n<h3>output:</h3>\n\n<pre><code>20\n\n96\n</code></pre>\n"}, {"tags": ["perl", "selenium"], "comments": [{"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1445282859, "post_id": 33222271, "comment_id": 54249170, "body": "not sure, but you may have to escape the <code>\\?</code>, also, you can try just with <code>organization_id=2</code> and see if it works."}, {"owner": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "reply_to_user": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1445283640, "post_id": 33222271, "comment_id": 54249621, "body": "Thank you, I tried both: escaping the ? and just organization_id=2, same issue."}, {"owner": {"reputation": 473, "user_id": 3034376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf5c2b956d696ccca8af619fb547fe92?s=128&d=identicon&r=PG&f=1", "display_name": "AutomatedOrder", "link": "https://stackoverflow.com/users/3034376/automatedorder"}, "edited": false, "score": 0, "creation_date": 1445286438, "post_id": 33222271, "comment_id": 54251147, "body": "Would it be possible to simply use the xPath?"}, {"owner": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "edited": false, "score": 0, "creation_date": 1445288442, "post_id": 33222271, "comment_id": 54252236, "body": "Ok, I&#39;m using an xpath locator from firefox, it says that link has an xpath of <b><code>id(&#39;menu-main-menu&#39;)&#47;x:li[3]&#47;x:a</code></b> I will modify the code and post the results."}, {"owner": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "edited": false, "score": 0, "creation_date": 1445292371, "post_id": 33222271, "comment_id": 54254023, "body": "The xpath <b><code>id(&#39;menu-main-menu&#39;)&#47;x:li[3]&#47;x:a</code></b> caused the same error."}, {"owner": {"reputation": 437, "user_id": 475949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e246f630a53e0a68382acc07d55838d?s=128&d=identicon&r=PG", "display_name": "rac2030", "link": "https://stackoverflow.com/users/475949/rac2030"}, "edited": false, "score": 0, "creation_date": 1445292797, "post_id": 33222271, "comment_id": 54254201, "body": "Haven&#39;t tested but escaping the ? should do the trick... Have you tried using &amp;#63; instead of ? making the string to &quot;/auctions&amp;#63;organization_id=2&quot;"}, {"owner": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "edited": false, "score": 0, "creation_date": 1445293238, "post_id": 33222271, "comment_id": 54254350, "body": "<code>ERROR: Element &#47;&#47;a[contains(@href, &quot;&#47;auctions&amp;#63;organization_id=2&quot;)] not found</code> I got the same error."}, {"owner": {"reputation": 10414, "user_id": 1251354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/650becb7843763fb2a7e8f7135d9ef5e?s=128&d=identicon&r=PG", "display_name": "rutter", "link": "https://stackoverflow.com/users/1251354/rutter"}, "edited": false, "score": 0, "creation_date": 1445297661, "post_id": 33222271, "comment_id": 54255819, "body": "Other common problems... Does the page contain iframes? Is the element in question visible/active at the time of the search? If there are scripts populating page content, have they finished?"}, {"owner": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "reply_to_user": {"reputation": 10414, "user_id": 1251354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/650becb7843763fb2a7e8f7135d9ef5e?s=128&d=identicon&r=PG", "display_name": "rutter", "link": "https://stackoverflow.com/users/1251354/rutter"}, "edited": false, "score": 1, "creation_date": 1445306888, "post_id": 33222271, "comment_id": 54258233, "body": "Thank you @rutter. I added Perl code <code>sleep 5;</code> before the element causing the issue and the issue is resolved. The page wasn&#39;t loaded by the time the test executed which cased the error <b>not found</b>."}], "answers": [{"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 1, "last_activity_date": 1445314972, "creation_date": 1445314972, "answer_id": 33227961, "question_id": 33222271, "link": "https://stackoverflow.com/questions/33222271/wwwselenium-cant-find-element/33227961#33227961", "title": "WWW::Selenium &#39;cant find element&#39;", "body": "<p>Instead of using hard-coded <code>sleep</code> I would suggest using <code>wait_for_element_present</code>.</p>\n\n<pre><code>my $locator = q{//a[contains(@href, \"/auctions?organization_id=2\")]};\n$sel-&gt;wait_for_element_present($locator, $timeout)\n$sel-&gt;click($locator);\n</code></pre>\n"}], "owner": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1445314972, "creation_date": 1445282643, "last_edit_date": 1445299259, "question_id": 33222271, "link": "https://stackoverflow.com/questions/33222271/wwwselenium-cant-find-element", "title": "WWW::Selenium &#39;cant find element&#39;", "body": "<p>I'm having trouble with WWW::Selenium finding an href.</p>\n\n<p>Here is the HTML element I'm looking for.</p>\n\n<pre><code>&lt;a href=\"/auctions?organization_id=2\"&gt;Sell Products&lt;/a&gt;\n</code></pre>\n\n<p>Here is the Perl code I'm using.</p>\n\n<pre><code>$sel-&gt;click('//a[contains(@href, \"/auctions?organization_id=2\")]');\n</code></pre>\n\n<p>Here is the error that WWW::Selenium is outputting.</p>\n\n<pre><code>Error requesting http://localhost:4444/selenium-server/driver/:\nERROR: Element //a[contains(@href, \"/auctions?organization_id=2\")] not found\n</code></pre>\n\n<p>Any tips/help will be greatly appreciated.</p>\n\n<p>EDIT\nAdding the surrounding HTML to aid in the troubleshooting.</p>\n\n<pre><code>    &lt;li class=\"menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children\"&gt;\n        &lt;a href=\"/auctions?organization_id=2\"&gt;Sell Products&lt;/a&gt;\n    &lt;/li&gt;\n&lt;/ul&gt;\n&lt;ul class=\"sub-menu\"&gt;\n    &lt;li class=\"menu-item menu-item-type-custom menu-item-object-custom\"&gt;\n        &lt;a href=\"/dashboard?_tab=seller\"&gt;Seller Dashboard&lt;/a&gt;\n    &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1445277017, "post_id": 33220595, "comment_id": 54245870, "body": "The default for any command is to interpret relative file names relative to the current directory, i.e. exactly what you seem to be asking."}, {"owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "edited": false, "score": 0, "creation_date": 1445293195, "post_id": 33220595, "comment_id": 54254336, "body": "Need some clarification:  Are you asking how to do what you ask from within the Perl script &quot;script.pl&quot; or from an O/S command-line?  If you are asking to do it from the Perl script, then I agree with toolic that showing the relevant Perl code would be helpful.  Thx."}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "edited": false, "score": 0, "creation_date": 1445447285, "post_id": 33222632, "comment_id": 54331651, "body": "It is not where the executable is. Please check  the modified question. I tried to make this more clear. Thanks."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "edited": false, "score": 0, "creation_date": 1445533269, "post_id": 33222632, "comment_id": 54373210, "body": "Despite your revisions, this answer is still correct."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1445532830, "last_edit_date": 1445532830, "creation_date": 1445283908, "answer_id": 33222632, "question_id": 33220595, "link": "https://stackoverflow.com/questions/33220595/how-to-output-files-in-same-folder-where-the-command-is-executed-in-perl/33222632#33222632", "title": "How to output files in same folder where the command is executed in perl", "body": "<p>If I understand correctly, if the input file is <code>../r1.fastq</code>, you want the output file to be <code>r1.fastq-trimmed.fq</code>.</p>\n\n<pre><code>use File::Basename qw( basename );\n\nmy $input_qfn = '../r1.fastq';\nmy $output_qfn = basename($input_qfn) . '-trimmed.fq';\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 33222632, "answer_count": 1, "score": -4, "last_activity_date": 1445533132, "creation_date": 1445276307, "last_edit_date": 1445533132, "question_id": 33220595, "link": "https://stackoverflow.com/questions/33220595/how-to-output-files-in-same-folder-where-the-command-is-executed-in-perl", "title": "How to output files in same folder where the command is executed in perl", "body": "<p>I have <code>fastq_trimmer_command_line.pl</code>. It has <code>chmod 755</code> and is located in a directory in the <code>PATH</code>. I am running this script from the directory in which I want the output (<code>~/data/output</code>), and input files are in different folder (<code>~/data</code>).</p>\n\n<p>The command:</p>\n\n<pre><code>~/data/output$ fastq_trimmer_command_line.pl -f ../r1.fastq -r ../r2.fastq -c 22\n</code></pre>\n\n<p><code>fastq_trimmer_command_line.pl</code>:</p>\n\n<pre><code>...important details omitted...\nopen OUT_R1, \"&gt;\", \"$R1_file-trimmed.fq\";\n</code></pre>\n\n<p>The output file is created in folder <code>~/data</code>, where the input file is. How do I create <code>r1.fastq--trimmed.fq</code> in <code>~/data/output</code>, the directory from which the command was executed?</p>\n"}, {"tags": ["perl", "http-headers", "wget", "lwp", "content-disposition"], "comments": [{"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "edited": false, "score": 0, "creation_date": 1445267874, "post_id": 33217577, "comment_id": 54240423, "body": "Not a direct answer, but you can also get good LWP debugging info via <a href=\"https://metacpan.org/pod/LWP::ConsoleLogger::Easy\" rel=\"nofollow noreferrer\">metacpan.org/pod/LWP::ConsoleLogger::Easy</a>"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1445268460, "creation_date": 1445268460, "answer_id": 33218290, "question_id": 33217577, "link": "https://stackoverflow.com/questions/33217577/using-content-disposition-with-lwpuseragent-on-a-google-drive-document/33218290#33218290", "title": "Using content-disposition with LWP::UserAgent on a Google Drive document", "body": "<p>The reason for the difference is this:</p>\n\n<pre><code>HTTP request sent, awaiting response... 302 Moved Temporarily\nLocation: https://doc-0s-2s-docs.googleusercontent.com/docs/securesc/ha0ro937gcuc7l7deffksulhg5h7mbp1/unidk5uvfpl9kut1rl3hb5lqcvis8vdq/1445263200000/06380472059566149580/*/0B6vqTWO9kmdmdzk5ejhDSXgzMDg?e=download [following]\n</code></pre>\n\n<p>Your initial URL is getting redirected - so the thing you're getting headers for, isn't the file <code>wget</code> is downloading. Try reading the <code>status_line</code> off your head request, and see what you get. </p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1445269830, "creation_date": 1445269830, "answer_id": 33218777, "question_id": 33217577, "link": "https://stackoverflow.com/questions/33217577/using-content-disposition-with-lwpuseragent-on-a-google-drive-document/33218777#33218777", "title": "Using content-disposition with LWP::UserAgent on a Google Drive document", "body": "<p>The difference is that you're not doing a <code>HEAD</code> with wget. If you look at the status of the response in your Perl code you're getting</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>503 Service Unavailable\n</code></pre>\n\n<p>which could refer to many things, but in this case means that <code>HEAD</code> isn't supported. Change that for a <code>GET</code> and all is well</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse feature 'say';\n\nuse LWP::UserAgent;\n\nmy $str = 'https://drive.google.com/file/d/0B6vqTWO9kmdmdzk5ejhDSXgzMDg/view?usp=sharing';\ndie unless $str =~ m{file/d/(\\w+)};\n\nmy $url = \"https://drive.google.com/uc?export=download&amp;id=$1\";\n\nmy $ua = LWP::UserAgent-&gt;new;\n\nmy $resp = $ua-&gt;get($url);\n\nsay $resp-&gt;status_line;\n\nsay $resp-&gt;header('Content-Disposition');\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>200 OK\nattachment;filename=\"testdoc.txt\";filename*=UTF-8''testdoc.txt\n</code></pre>\n"}], "owner": {"reputation": 5328, "user_id": 1305947, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/660bcd99a216234e04adb27125cbf0a3?s=128&d=identicon&r=PG", "display_name": "Joel G Mathew", "link": "https://stackoverflow.com/users/1305947/joel-g-mathew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 701, "favorite_count": 0, "accepted_answer_id": 33218777, "answer_count": 2, "score": 0, "last_activity_date": 1445269830, "creation_date": 1445266384, "last_edit_date": 1445269158, "question_id": 33217577, "link": "https://stackoverflow.com/questions/33217577/using-content-disposition-with-lwpuseragent-on-a-google-drive-document", "title": "Using content-disposition with LWP::UserAgent on a Google Drive document", "body": "<p>I'm trying to save a Google Drive shared file using its actual filename received from the server (content-disposition):</p>\n\n<p>I tried to analyze the header:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\nuse LWP::UserAgent qw( );\nmy $str = 'https://drive.google.com/file/d/0B6vqTWO9kmdmdzk5ejhDSXgzMDg/view?usp=sharing';\n$str =~ /file\\/d\\/(\\w+)/;\nmy $url = 'https://drive.google.com/uc?export=download&amp;id='.$1;\nmy $ua = LWP::UserAgent-&gt;new();\nmy $response = $ua-&gt;head($url)-&gt;{'_headers'};\nprint Dumper( $response );\n</code></pre>\n\n<p>I got this:</p>\n\n<pre><code>$VAR1 = bless( {\n'client-ssl-cert-subject' =&gt; '/C=US/ST=California/L=Mountain View/O=Google Inc/CN=*.googleusercontent.com',\n'connection' =&gt; 'close',\n'date' =&gt; 'Mon, 19 Oct 2015 14:45:45 GMT',\n'content-type' =&gt; 'text/html; charset=UTF-8',\n'x-guploader-uploadid' =&gt; 'AEnB2UrQJIoJUIIhWnKz9HAlW_2XKApLe_0IDMZjS0gGQOMdRaF68Od2xsxssp7mBdQP9kNrjvDueWUP5pSa1eHbprSjbPvfbA',\n'alternate-protocol' =&gt; '443:quic,p=1',\n'expires' =&gt; 'Mon, 19 Oct 2015 14:45:45 GMT',\n'::std_case' =&gt; {\n   'client-ssl-socket-class' =&gt; 'Client-SSL-Socket-Class',\n   'client-ssl-cert-subject' =&gt; 'Client-SSL-Cert-Subject',\n   'client-ssl-cipher' =&gt; 'Client-SSL-Cipher',\n   'client-peer' =&gt; 'Client-Peer',\n   'x-guploader-uploadid' =&gt; 'X-GUploader-UploadID',\n   'alternate-protocol' =&gt; 'Alternate-Protocol',\n   'alt-svc' =&gt; 'Alt-Svc',\n   'client-ssl-cert-issuer' =&gt; 'Client-SSL-Cert-Issuer',\n   'client-date' =&gt; 'Client-Date',\n   'client-response-num' =&gt; 'Client-Response-Num'\n },\n'client-ssl-cert-issuer' =&gt; '/C=US/O=Google Inc/CN=Google Internet Authority G2',\n'server' =&gt; 'UploadServer',\n'client-date' =&gt; 'Mon, 19 Oct 2015 14:45:55 GMT',\n'client-ssl-socket-class' =&gt; 'IO::Socket::SSL',\n'client-ssl-cipher' =&gt; 'ECDHE-ECDSA-AES128-GCM-SHA256',\n'client-peer' =&gt; '2a00:1450:400c:c08::84:443',\n'alt-svc' =&gt; 'quic=\":443\"; p=\"1\"; ma=604800',\n'cache-control' =&gt; 'private, max-age=0',\n'client-response-num' =&gt; 1\n}, 'HTTP::Headers' );\n</code></pre>\n\n<p>I expected to find the content-disposition header within the above.\nOn the other hand, wget correctly gives the filename:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>#wget --content-disposition \"https://drive.google.com/uc?export=download&amp;id=0B6vqTWO9kmdmdzk5ejhDSXgzMDg\"\n--2015-10-19 20:21:37--  https://drive.google.com/uc?export=download&amp;id=0B6vqTWO9kmdmdzk5ejhDSXgzMDg\nResolving drive.google.com (drive.google.com)... 2a00:1450:400c:c04::64, 74.125.206.139, 74.125.206.101, ...\nConnecting to drive.google.com (drive.google.com)|2a00:1450:400c:c04::64|:443... connected.\nHTTP request sent, awaiting response... 302 Moved Temporarily\nLocation: https://doc-0s-2s-docs.googleusercontent.com/docs/securesc/ha0ro937gcuc7l7deffksulhg5h7mbp1/unidk5uvfpl9kut1rl3hb5lqcvis8vdq/1445263200000/06380472059566149580/*/0B6vqTWO9kmdmdzk5ejhDSXgzMDg?e=download [following]\nWarning: wildcards not supported in HTTP.\n--2015-10-19 20:21:37--  https://doc-0s-2s-docs.googleusercontent.com/docs/securesc/ha0ro937gcuc7l7deffksulhg5h7mbp1/unidk5uvfpl9kut1rl3hb5lqcvis8vdq/1445263200000/06380472059566149580/*/0B6vqTWO9kmdmdzk5ejhDSXgzMDg?e=download\nResolving doc-0s-2s-docs.googleusercontent.com (doc-0s-2s-docs.googleusercontent.com)... 2a00:1450:400c:c08::84, 74.125.140.132\nConnecting to doc-0s-2s-docs.googleusercontent.com (doc-0s-2s-docs.googleusercontent.com)|2a00:1450:400c:c08::84|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 16 [text/plain]\nSaving to: \u2018testdoc.txttestdoc.txt\u2019\n\ntestdoc.txttestdoc.txt                              100%[====================================================================================================================&gt;]      16  --.-KB/s   in 0s\n\n2015-10-19 20:21:38 (550 KB/s) - \u2018testdoc.txttestdoc.txt\u2019 saved [16/16]\n</code></pre>\n\n<p>How can I get the correct filename from the server using perl?</p>\n"}, {"tags": ["php", "perl", "utf-8"], "comments": [{"owner": {"reputation": 128254, "user_id": 13508, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c9e1d852b4d287027fe76f794e506878?s=128&d=identicon&r=PG", "display_name": "&#193;lvaro Gonz&#225;lez", "link": "https://stackoverflow.com/users/13508/%c3%81lvaro-gonz%c3%a1lez"}, "edited": false, "score": 1, "creation_date": 1445270456, "post_id": 33216268, "comment_id": 54242203, "body": "<code>mb_convert_encoding()</code> does not &quot;remove&quot; characters; it converts between two encodings. And you first need to know your input and output encodings. Also, what&#39;s a &quot;Windows&quot; character and why is it a problem if you accept the rest of the Unicode catalogue?"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1445270259, "creation_date": 1445270259, "answer_id": 33218899, "question_id": 33216268, "link": "https://stackoverflow.com/questions/33216268/equivalent-for-mb-convert-encoding-in-perl/33218899#33218899", "title": "equivalent for mb_convert_encoding() in perl", "body": "<p>The <code>from_to()</code> function from <a href=\"https://metacpan.org/pod/Encode\" rel=\"nofollow\">Encode</a> seems to be a pretty close match for <a href=\"https://metacpan.org/pod/Encode\" rel=\"nofollow\"><code>mb_convert_encoding()</code></a>.</p>\n\n<p>But it sounds like you have a file where some of it is encoded in <a href=\"https://en.wikipedia.org/wiki/Windows-1252\" rel=\"nofollow\">CP1252</a> and some of it is in <a href=\"https://en.wikipedia.org/wiki/UTF-8\" rel=\"nofollow\">UTF8</a>. That seems strange and I'm not sure how you'd tell which bit of the file has each encoding.</p>\n"}], "owner": {"reputation": 1047, "user_id": 1191999, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8a5575da1a4d6205f568754e55294cfb?s=128&d=identicon&r=PG", "display_name": "Ram", "link": "https://stackoverflow.com/users/1191999/ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1445270259, "creation_date": 1445262758, "question_id": 33216268, "link": "https://stackoverflow.com/questions/33216268/equivalent-for-mb-convert-encoding-in-perl", "title": "equivalent for mb_convert_encoding() in perl", "body": "<p>I need to remove windows characters from a csv file before parsing into a database. These are characters like the \"long hyphen\" or \"word inverted commas\" </p>\n\n<p>In php I can remove with mb_convert_encoding(), How can I do the same in perl ?</p>\n\n<p>I need to remove only windows characters , not utf-8 characters </p>\n"}, {"tags": ["windows", "perl", "signals"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445269283, "post_id": 33215758, "comment_id": 54241363, "body": "This explanation is wrong. The deferral process documented in Deferred Signals is not used for Windows signals."}, {"owner": {"reputation": 13, "user_id": 2091227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6de30bd60b42f8aa94bc2157c8dcc75?s=128&d=identicon&r=PG", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u0414\u0443\u0446", "link": "https://stackoverflow.com/users/2091227/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b0%d0%bd%d0%b4%d1%80-%d0%94%d1%83%d1%86"}, "edited": false, "score": 0, "creation_date": 1445334650, "post_id": 33215758, "comment_id": 54270013, "body": "What I found in this explanation is that I can&#39;t handle signal during IO operation."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 0, "last_activity_date": 1445261397, "creation_date": 1445261397, "answer_id": 33215758, "question_id": 33215485, "link": "https://stackoverflow.com/questions/33215485/perl-signal-handlers-and-windows/33215758#33215758", "title": "Perl signal handlers and WIndows", "body": "<p>I would be wary of use of 'kill' signals on Windows, as they're a <code>POSIX</code> thing. <a href=\"http://perldoc.perl.org/functions/kill.html\" rel=\"nofollow\">http://perldoc.perl.org/functions/kill.html</a> </p>\n\n<p>But I think the problem here will <em>probably</em> be because of <a href=\"http://perldoc.perl.org/perlipc.html#Deferred-Signals-(Safe-Signals)\" rel=\"nofollow\"><code>Deferred Signals</code></a>. Specifically if you send a signal to a process, the interpreter will wait until it's \"safe\" to process it. In the middle of \"some.exe\" is unlikely to be. </p>\n\n<p>Using <code>kill</code> signals in this way isn't a particularly good form of IPC. See <a href=\"http://www.perlmonks.org/?node_id=997094\" rel=\"nofollow\"><code>perlmonks: Signals Vs. Windows</code></a> for some useful discussion. </p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445270426, "post_id": 33216565, "comment_id": 54242188, "body": "<code>kill TERM =&gt; $pid</code> <a href=\"http://perl5.git.perl.org/perl.git/blob/3ec400f5ce53ea1a56d283bc6bf59e75762df058:/win32/win32.c#l1258\" rel=\"nofollow noreferrer\">sends Ctrl-Break</a>, which can be <a href=\"http://perl5.git.perl.org/perl.git/blob/3ec400f5ce53ea1a56d283bc6bf59e75762df058:/win32/win32.c#l2142\" rel=\"nofollow noreferrer\">handled</a>.  [I can&#39;t verify this, because I can&#39;t manage to handle any signals for some reason.]"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1445263584, "creation_date": 1445263584, "answer_id": 33216565, "question_id": 33215485, "link": "https://stackoverflow.com/questions/33215485/perl-signal-handlers-and-windows/33216565#33216565", "title": "Perl signal handlers and WIndows", "body": "<p>Signals on Windows are very idiosyncratic. You may have better luck with the <code>INT</code> or <code>QUIT</code> signals than <code>TERM</code>. My extensive research into how Perl and Windows handle signals is summarized <a href=\"https://metacpan.org/source/MOB/Forks-Super-0.80/lib/Forks/Super/Job/OS/Win32.pm#L261\" rel=\"nofollow\">here</a>.</p>\n\n<p>TL;DR: On Windows, <code>TERM</code> can terminate a process in Windows, but it cannot be handled. <code>INT</code> and <code>QUIT</code> can be handled, and their default behavior is to terminate the process. If you use Windows pseudo-processes (which is what you get if you call <code>fork</code> in Windows), then things quickly get more complicated.</p>\n"}], "owner": {"reputation": 13, "user_id": 2091227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6de30bd60b42f8aa94bc2157c8dcc75?s=128&d=identicon&r=PG", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u0414\u0443\u0446", "link": "https://stackoverflow.com/users/2091227/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b0%d0%bd%d0%b4%d1%80-%d0%94%d1%83%d1%86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 676, "favorite_count": 0, "accepted_answer_id": 33215758, "answer_count": 2, "score": 1, "last_activity_date": 1445340373, "creation_date": 1445260670, "last_edit_date": 1445340373, "question_id": 33215485, "link": "https://stackoverflow.com/questions/33215485/perl-signal-handlers-and-windows", "title": "Perl signal handlers and WIndows", "body": "<p>I am on Windows with Strawberry perl. I have some GUI.pl application which run <em>script.pl</em> which run <em>some.exe</em>. The perl script works as a proxy for STDIN/OUT/ERR between GUI application and some.exe.\nThe problem is that I can't kill some.exe process in chain GUI.pl -> script.pl -> some.exe.</p>\n\n<p><em>GUI.pl</em> sends TERM to <em>script.pl</em> </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code># GUI.pl\nmy $pid = open my $cmd, '-|', 'script.pl';\nsleep 1;\nkill 'TERM', $pid;\n</code></pre>\n\n<p><em>script.pl</em> catch 'TERM' and trying to kill <em>some.exe</em></p>\n\n<pre><code># script.pl\n$SIG{TERM} = \\&amp;handler;\nmy $pid = open my $cmd, '-|', 'some.exe';\nsub handler {\n    kill 'TERM', $pid;\n}\n</code></pre>\n\n<p>With this scheme, the process of some.exe continues to be executed. I've already learned a lot about the signals but still do not understand how to resolve this problem.</p>\n\n<p>Thank in advance.</p>\n\n<hr>\n\n<p>And one of the solutions it is using of <a href=\"http://perldoc.perl.org/threads.html\" rel=\"nofollow\">threads</a>:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code># script.pl\nuse threads;\nuse threads::shared;\n\n$SIG{BREAK} = \\&amp;handler;\n\nmy $pid :shared;\n\nasync {\n    $pid = open my $cmd, '-|', 'some.exe'\n}-&gt;detach;\n\n# 1 second for blocking opcode. After sleep handler will be applied\nsleep 1;     \n\nsub handler {\n    kill 'TERM', $pid;\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 0, "creation_date": 1445256682, "post_id": 33213979, "comment_id": 54232091, "body": "Deine Frage ist nicht klar. Willst du den Benutzer immer den Name und das Passwort fragen, bis sie richtig sind?/Your question is not clear. Do you want to keep asking the user for name and password until they are correct?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1445257119, "post_id": 33213979, "comment_id": 54232351, "body": "Your question isn&#39;t very clear. What problem are you having?"}, {"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 0, "creation_date": 1445257176, "post_id": 33213979, "comment_id": 54232392, "body": "He wants to repeatedly ask user for input until the name and password are right"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445257217, "post_id": 33213979, "comment_id": 54232415, "body": "That <code>if</code> test is applied before the <code>password</code> is read. That won&#39;t work very well!"}, {"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 1, "creation_date": 1445257966, "post_id": 33213979, "comment_id": 54232917, "body": "Im Bild: &quot;Geben Sie deine Passwort&quot; und &quot;Geben Sie deine Name&quot;. Die Grammatik ist hier komisch. (The German grammar is a little off?)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 1, "creation_date": 1445258454, "post_id": 33213979, "comment_id": 54233264, "body": "@Arc676 obviously OP is neither fluent in German nor English. We&#39;re not proof-reading.SE ;)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1445263250, "post_id": 33213979, "comment_id": 54236804, "body": "I rolled your question back to the mixed/German version. It&#39;s fine like that. You don&#39;t have to have English text in your code. But next time please post the code as code, not as a screenshot. It&#39;s nice and colorful, but we cannot copy and run it. ;)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1445263261, "post_id": 33213979, "comment_id": 54236810, "body": "Also, Welcome to Stack Overflow and to the Perl tag! :)"}, {"owner": {"reputation": 49, "user_id": 5462683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-1Wx7lkBR4t8/AAAAAAAAAAI/AAAAAAAAFIo/ntksApZlMyw/photo.jpg?sz=128", "display_name": "Markus", "link": "https://stackoverflow.com/users/5462683/markus"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1445332073, "post_id": 33213979, "comment_id": 54268309, "body": "@simbabque Thank you for welcome. I&#39;m feeling well for the welcome to and stack overflow perl tag! After I need to asked stack overflow always. Stack Overflow is helpful really. Happines. :-)"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1445257149, "creation_date": 1445257149, "answer_id": 33214219, "question_id": 33213979, "link": "https://stackoverflow.com/questions/33213979/perl-while-stdin-dont-understand-still/33214219#33214219", "title": "Perl While STDIN.... Don&#39;t understand still", "body": "<p>Your code is doing something odd.</p>\n\n<p>You loop while \"name\" doesn't match \"fullname\". </p>\n\n<p>But you test the password <em>before</em> you ask for the passsword.:</p>\n\n<pre><code>if ($sceret ne $sceretpassword){\n    print (\"Falsch Passwort!\\n\");\n    $sceret = &lt;STDIN&gt;;\n    chomp ($sceret);\n}\n</code></pre>\n\n<p>That'll technically work, because if you:</p>\n\n<ul>\n<li>login with the correct password - it will fail. </li>\n<li>then login again - the previous password will still be 'stored' and it'll work. </li>\n</ul>\n\n<p>That's a bit strange. </p>\n\n<p>Perhaps you meant:</p>\n\n<pre><code>while ($name ne $fullname\n    or $sceret ne $sceretpassword ) {\n    print (\"Incorrect login\\n\");\n    print \"name:\\n\";\n    $name = &lt;STDIN&gt;;\n    chomp ($name);\n    print \"Password:\\n\";\n    $sceret = &lt;STDIN&gt;;\n    chomp ($sceret);\n}\n</code></pre>\n\n<p>This will continue to loop until someone gets the right combination of name and password. </p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 5462683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-1Wx7lkBR4t8/AAAAAAAAAAI/AAAAAAAAFIo/ntksApZlMyw/photo.jpg?sz=128", "display_name": "Markus", "link": "https://stackoverflow.com/users/5462683/markus"}, "edited": false, "score": 0, "creation_date": 1445259723, "post_id": 33214463, "comment_id": 54234139, "body": "Thanks! That&#39;s good! Name is correct, then the Password is wrong. But stay the Password ask further. Name is stay correct without repetition. I did try this further."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1445260689, "post_id": 33214463, "comment_id": 54234875, "body": "I find the mix of German and English incredibly hard to read. Maybe the answer would be better to understand if you separate the English and the German in two parts, put the full answer in English first and start with a &quot;Deutsch siehe unten&quot;. It&#39;s nice to try to include answers in a common language when you feel OP is strugling with English, but keep in mind that others should benefit from the content too. I have had situations where I wanted to include explanation in German, but have decided against it because it&#39;s just too messy. SO is not designed for that. Chat might help though."}, {"owner": {"reputation": 49, "user_id": 5462683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-1Wx7lkBR4t8/AAAAAAAAAAI/AAAAAAAAFIo/ntksApZlMyw/photo.jpg?sz=128", "display_name": "Markus", "link": "https://stackoverflow.com/users/5462683/markus"}, "edited": false, "score": 0, "creation_date": 1445261564, "post_id": 33214463, "comment_id": 54235457, "body": "simbabque , i understand! i&#39;will change german to english. there&#39;s no problem. I hope there helpful. thank you. :-)"}, {"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1445261644, "post_id": 33214463, "comment_id": 54235531, "body": "@simbabque Just out of curiosity, do you speak German? If you want, you can edit my answer, possibly improving the word choice. I myself am far from fluent. Markus: I think he meant my answer, not your original question."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 49, "user_id": 5462683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-1Wx7lkBR4t8/AAAAAAAAAAI/AAAAAAAAFIo/ntksApZlMyw/photo.jpg?sz=128", "display_name": "Markus", "link": "https://stackoverflow.com/users/5462683/markus"}, "edited": false, "score": 0, "creation_date": 1445261703, "post_id": 33214463, "comment_id": 54235582, "body": "@Markus yes, I meant the answer. Your question was in English, that&#39;s all fine. And it&#39;s obvious you are not German either. :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1445261781, "post_id": 33214463, "comment_id": 54235651, "body": "The point I was trying to make is that it&#39;s noble to try to help someone by switching to their language, but legibility should come first. I&#39;ll give the edit a try. If you don&#39;t like it, please roll it back."}, {"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1445262485, "post_id": 33214463, "comment_id": 54236184, "body": "@simbabque Thanks for the edit. I can get some good vocab from it, in case another German question pops up."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1445262669, "post_id": 33214463, "comment_id": 54236329, "body": "No problem, though I&#39;m not used to writing technical in German. I avoid it. All my <code>$work</code> stuff is in English because I think all those <i>Anglizismen</i> are horrible and it hurts when I read to many of them. On the other hand, I constantly use them when I talk. Hmm."}], "tags": [], "owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "is_accepted": false, "score": 1, "last_activity_date": 1445262280, "last_edit_date": 1445262280, "creation_date": 1445257877, "answer_id": 33214463, "question_id": 33213979, "link": "https://stackoverflow.com/questions/33213979/perl-while-stdin-dont-understand-still/33214463#33214463", "title": "Perl While STDIN.... Don&#39;t understand still", "body": "<h1>F\u00fcr deutsche \u00dcbersetzung siehe unten.</h1>\n\n<p>You can use a <code>while</code> loop to repeat until a condition is met.</p>\n\n<p>You checked if the password was correct before you asked the user for it. </p>\n\n<p>Here, two loops are used. In the other answer, only one is used. It's shorter, but you need <code>next</code> to ask the user again in between if any data is wrong.  </p>\n\n<pre><code>print \"Enter name: \";\n$name = &lt;STDIN&gt;;\nchomp $name;\n\n# if the name is correct the first time, this won't run\nwhile ($name ne $fullname){\n    print \"Wrong. Enter again: \";\n    $name = &lt;STDIN&gt;;\n    chomp $name;\n}\nprint \"Enter password: \";\n$secret = &lt;STDIN&gt;;\nchomp $secret;\nwhile ($secret ne $secretpassword){\n    print \"Wrong. Enter again: \";\n    $secret = &lt;STDIN&gt;;\n    chomp $secret;\n}\n# if you are here, the name and password are correct\n</code></pre>\n\n<p>Using <code>next</code> and <code>last</code>:</p>\n\n<pre><code># Infinite loop\nwhile (1){\n    print \"Enter name: \";\n    $name = &lt;STDIN&gt;;\n    chomp $name;\n    if ($name ne $fullname){\n        print \"Wrong.\\n\";\n        # jumps to the next _round_ in the while (1) loop\n        next;\n    }\n    print \"Enter password: \";\n    $secret = &lt;STDIN&gt;;\n    chomp $secret;\n    if ($secret ne $secretpassword){\n        print \"Wrong.\\n\";\n        next;\n    }\n    # break out of the loop\n    last;\n}\n# name and password are correct\n</code></pre>\n\n<hr>\n\n<p>Du kannst <code>while</code> benutzen, um etwas zu tun, bis es <code>wahr</code> ist.</p>\n\n<p>Du hast das Passwort kontrolliert bevor du es abgefragt hast. Hier wird <code>while</code> zweimal benutzt. In der anderen Antwort wirst es nur einmal benutzt. Sie ist k\u00fcrzer, aber du brauchst <code>next</code>, um den Benutzer die Daten zu fragen, wenn etwas inzwischen falsch ist.</p>\n\n<pre><code>print \"Name eingeben: \";\n$name = &lt;STDIN&gt;;\nchomp $name;\n\n# wenn der Name richtig ist, wird die Schleife gar nicht ausgefuehrt\nwhile ($name ne $fullname){\n    print \"Falscher Name. Nochmal: \";\n    $name = &lt;STDIN&gt;;\n    chomp $name;\n}\nprint \"Passwort eingeben: \";\n$secret = &lt;STDIN&gt;;\nchomp $secret;\nwhile ($secret ne $secretpassword){\n    print \"Falsches Passwort. Nochmal: \";\n    $secret = &lt;STDIN&gt;;\n    chomp $secret;\n}\n# wenn wir hier ankommen war beides richtig\n</code></pre>\n\n<p>Wenn du lieber <code>next</code> und <code>last</code> benutzen willst:</p>\n\n<pre><code># Endlosschleife\nwhile (1){\n    print \"Name eingeben: \";\n    $name = &lt;STDIN&gt;;\n    chomp $name;\n    if ($name ne $fullname){\n        print \"Falsch.\\n\";\n        # zur naechsten _Runde_ in der while (1)-Schleife\n        next;\n    }\n    print \"Passwort eingeben: \";\n    $secret = &lt;STDIN&gt;;\n    chomp $secret;\n    if ($secret ne $secretpassword){\n        print \"Falsch.\\n\";\n        next;\n    }\n    # aus der while-Schleife herausspringen\n    last;\n}\n# wenn wir hier ankommen war beides richtig\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 5462683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-1Wx7lkBR4t8/AAAAAAAAAAI/AAAAAAAAFIo/ntksApZlMyw/photo.jpg?sz=128", "display_name": "Markus", "link": "https://stackoverflow.com/users/5462683/markus"}, "is_accepted": true, "score": 1, "last_activity_date": 1445326351, "last_edit_date": 1445326351, "creation_date": 1445321215, "answer_id": 33229179, "question_id": 33213979, "link": "https://stackoverflow.com/questions/33213979/perl-while-stdin-dont-understand-still/33229179#33229179", "title": "Perl While STDIN.... Don&#39;t understand still", "body": "<p>Thanks you ver much for helpful! But I found a good code. It's good function.</p>\n\n<pre><code>my $fullname = \"Markus Buergi\";\nmy $sceretpassword = \"Alpiq\";\nmy $get_name = \"Hello, your Name is \";\nmy $get_password = \"Password is correct!\";\nmy $wrong_name = \"Wrong, Name again: \";\nmy $wrong_password = \"Wrong, Password: \";\n</code></pre>\n\n<h1>Second Name is correct, further this</h1>\n\n<pre><code>else{\n    print $wrong_name;\n    $name = &lt;STDIN&gt;;\n    chomp ($name);\n    while ($name ne $fullname){\n        print $wrong_name;\n        $name = &lt;STDIN&gt;;\n        chomp ($name);\n    }\n\n    print $get_name, $name, \"\\n\";\n\n    do {\n        print $wrong_password;\n        $sceret = &lt;STDIN&gt;;\n        chomp ($sceret);\n    }\n    until ($sceret eq $sceretpassword);\n    print $get_password, \"\\n\";\n    exit;   \n}\n</code></pre>\n\n<p>It's looked good function.</p>\n"}], "owner": {"reputation": 49, "user_id": 5462683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-1Wx7lkBR4t8/AAAAAAAAAAI/AAAAAAAAFIo/ntksApZlMyw/photo.jpg?sz=128", "display_name": "Markus", "link": "https://stackoverflow.com/users/5462683/markus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 33229179, "answer_count": 3, "score": 1, "last_activity_date": 1445326351, "creation_date": 1445256409, "last_edit_date": 1445263197, "question_id": 33213979, "link": "https://stackoverflow.com/questions/33213979/perl-while-stdin-dont-understand-still", "title": "Perl While STDIN.... Don&#39;t understand still", "body": "<p>I don't understand. That's but don't work with function.</p>\n\n<pre><code>else{\n    print (\"Falsch. Bitte nochmals geben Sie es!\\n\");\n    $name = &lt;STDIN&gt;;\n    chomp ($name);\n    while ($name ne $fullname){\n        print (\"Falsch. Bitte nochmals geben Sie es!\\n\");\n        $name = &lt;STDIN&gt;;\n        chomp ($name);\n        if ($sceret ne $sceretpassword){\n            print (\"Falsch Passwort!\\n\");\n            $sceret = &lt;STDIN&gt;;\n            chomp ($sceret);\n        }\n    }\n}\n</code></pre>\n\n<p>Hm. What should i this just? pls help me. thankful very much!</p>\n\n<p><a href=\"https://i.stack.imgur.com/hDCgu.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hDCgu.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["string", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1445254237, "post_id": 33213162, "comment_id": 54230535, "body": "First - <code>use strict;</code> <code>use warnings;</code> should be the first line of your program.  Your &quot;shebang&quot; line is wrong - but this doesn&#39;t matter, because it&#39;s Windows. (You should be supplying the path to the interpreter, e.g. <code>C:\\Strawberry\\perl\\bin\\perl</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 5378649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32ef77179c153a5943408fd2ff13b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vetri", "link": "https://stackoverflow.com/users/5378649/vetri"}, "edited": false, "score": 0, "creation_date": 1445262628, "post_id": 33213526, "comment_id": 54236300, "body": "I am using perl program  to clean the file in post process stage. I am getting the output html to xml through the perl program. My input file is not maintained unique id. But the xml output wants to maintain the unique ids. My requirement is ref id = &quot; &quot; should be replaced rid=&quot; &quot; .  I will try to match the text and reference part $rid and $matchid variable. This two ids is matched $rid, $matchid the corresponding ref id=&quot; &quot; should be replaced on the rid=&quot; &quot;. I don&#39;t know how get this output"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 109, "user_id": 5378649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32ef77179c153a5943408fd2ff13b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vetri", "link": "https://stackoverflow.com/users/5378649/vetri"}, "edited": false, "score": 0, "creation_date": 1445262704, "post_id": 33213526, "comment_id": 54236354, "body": "What are you using to do the XML?"}, {"owner": {"reputation": 109, "user_id": 5378649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32ef77179c153a5943408fd2ff13b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vetri", "link": "https://stackoverflow.com/users/5378649/vetri"}, "edited": false, "score": 0, "creation_date": 1445263439, "post_id": 33213526, "comment_id": 54236938, "body": "I follow your instruction but how to execute the while loop. The program is not compile. I edit and save my question"}, {"owner": {"reputation": 109, "user_id": 5378649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32ef77179c153a5943408fd2ff13b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vetri", "link": "https://stackoverflow.com/users/5378649/vetri"}, "edited": false, "score": 0, "creation_date": 1445263730, "post_id": 33213526, "comment_id": 54237154, "body": "I am using LaTeX to convert tex to html document. Using perl html to xml process."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 109, "user_id": 5378649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32ef77179c153a5943408fd2ff13b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vetri", "link": "https://stackoverflow.com/users/5378649/vetri"}, "edited": false, "score": 0, "creation_date": 1445264143, "post_id": 33213526, "comment_id": 54237466, "body": "Yes. It won&#39;t compile when there are errors in it - that&#39;s the point of <code>strict</code> and <code>warnings</code> - they refuse to let you run shoddy code. Which is good. If annoying. Converting from HTML to XML is potentially difficult. Can you output directly as XML from LaTeX? Also - your code update - you&#39;ve still got that <code>while</code> loop, which is broken, because it&#39;s <code>=</code> not <code>eq</code>."}, {"owner": {"reputation": 109, "user_id": 5378649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32ef77179c153a5943408fd2ff13b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vetri", "link": "https://stackoverflow.com/users/5378649/vetri"}, "edited": false, "score": 0, "creation_date": 1445264513, "post_id": 33213526, "comment_id": 54237791, "body": "I can&#39;t understand the strict and warnings concepts. This is more sticky to understand. If it is possible to provide a sample program. That is helpful for me"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 109, "user_id": 5378649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32ef77179c153a5943408fd2ff13b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vetri", "link": "https://stackoverflow.com/users/5378649/vetri"}, "edited": false, "score": 0, "creation_date": 1445265295, "post_id": 33213526, "comment_id": 54238439, "body": "I can&#39;t, because I can&#39;t understand your program logic. That <code>while</code> loop simply doesn&#39;t make sense. However I have edited something so far:"}, {"owner": {"reputation": 109, "user_id": 5378649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32ef77179c153a5943408fd2ff13b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vetri", "link": "https://stackoverflow.com/users/5378649/vetri"}, "edited": false, "score": 0, "creation_date": 1445265969, "post_id": 33213526, "comment_id": 54239020, "body": "Two ids are same like rid and matchid.   First i match this two id for your ideas like <code>my ($rid) = $TeX2html =~ m&#47;rid=&quot;(.*?)&quot;&#47;; my ($matchid) = $TeX2html =~ m&#47;matchid=&quot;(.*?)&quot;&#47;;</code>. I am struggle to pick the <code>ref id=&quot; &quot;</code> and past the corresponding <code>rid=&quot; &quot;</code>"}, {"owner": {"reputation": 109, "user_id": 5378649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32ef77179c153a5943408fd2ff13b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vetri", "link": "https://stackoverflow.com/users/5378649/vetri"}, "edited": false, "score": 0, "creation_date": 1445266337, "post_id": 33213526, "comment_id": 54239311, "body": "If you not understand what i say?. Please check and compare the <b>input html</b>  and in my required <b>output xml</b>  code in my question. Please advice what i do to get the required output."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 109, "user_id": 5378649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32ef77179c153a5943408fd2ff13b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vetri", "link": "https://stackoverflow.com/users/5378649/vetri"}, "edited": false, "score": 0, "creation_date": 1445267868, "post_id": 33213526, "comment_id": 54240420, "body": "Sorry, I&#39;m not going to. What you&#39;re trying to do in that <code>while</code> loop is considerably more complicated than it looks, and I&#39;m not prepared to try and figure out an algorithm for you. Not when your starting point is code that simply doesn&#39;t work in the first place."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 4, "last_activity_date": 1445265417, "last_edit_date": 1445265417, "creation_date": 1445255048, "answer_id": 33213526, "question_id": 33213162, "link": "https://stackoverflow.com/questions/33213162/how-to-match-the-two-same-id-and-import-the-required-ids/33213526#33213526", "title": "How to match the two same id and import the required ids", "body": "<ul>\n<li><p><code>use strict;</code> <code>use warnings;</code> should be the first lines of your program. </p></li>\n<li><p>Your \"shebang\" line is wrong - but this doesn't matter, because it's Windows. (You should be supplying the path to the interpreter, e.g. <code>C:\\Strawberry\\perl\\bin\\perl</code>)</p></li>\n<li><p>Why are you setting <code>$/</code> to <code>chr(26)</code>? If you're reading the whole file, either use <code>File::Slurp</code> or <code>local $/;</code> which will set it to <code>undef</code>. </p></li>\n<li><p>This doesn't do anything:</p>\n\n<pre><code>$rid = rid=\"(.*?)\";\n$matchid = matchid=\"(.*?)\";\n</code></pre></li>\n</ul>\n\n<p><code>strict</code> and <code>warnings</code> would tell you this.</p>\n\n<p>If you're trying to regex match your content, you need <code>m/$regex/</code> if you're working with <code>$_</code> (inside a while loop) or specify what you're operating on:</p>\n\n<pre><code>my ($rid) = $TeX2html =~ m/rid=\"(.*?)\"/;\nmy ($matchid) = $TeX2html =~ m/matchid=\"(.*?)\"/;\n</code></pre>\n\n<ul>\n<li><p><code>while($rid = $matchid) {</code> isn't a conditional, it's an assignment. You probably mean <code>==</code> for numeric, and <code>eq</code> for string based. It'll be infinite looping though, as a result. (<code>strict</code> and <code>warnings</code> would tell you this too)</p></li>\n<li><p><code>if( $rid =~ s/ref id=\"(.*?)\"/rid=$1/ig ) {</code> - is nonsense, because <code>$rid</code> is something else entirely.  You're capturing the text <code>Vajravelu:1978</code> in the first regex (in both). So your <code>s</code>earch and replace pattern ... isn't going to match <em>anything</em> on the left hand side, so is never going to replace anything, so is going to infinite loop. (Even with the right sort of <code>while</code> conditional).</p></li>\n</ul>\n\n<p>Maybe you meant to change <code>$TeX2html</code> rather than <code>$rid</code>? (not entirely sure though, because now I'm getting lost with what you're trying to do. </p>\n\n<p>Edit: What I have so far for reference:</p>\n\n<pre><code>#!c:\\Strawberry\\perl\\bin\nuse strict;\nuse warnings;\n\nlocal $/;\nmy $TeX2html=&lt;DATA&gt;;\n\nmy ($rid) = $TeX2html =~ m/rid=\"(.*?)\"/;\nmy ($matchid) = $TeX2html =~ m/matchid=\"(.*?)\"/;\n\nprint $rid;\nprint $matchid;\n\n#sorry - no idea what this is trying to do.\n#if ($rid eq $matchid) {\n#        if( $rid =~ s/ref id=\"(.*?)\"/rid=$1/ig ) {\n#                  print \"$rid\";\n#        }\n# }\n\nprint $TeX2html;\n\n\n__DATA__\n&lt;p&gt;The sample ID [[&lt;xref ref-type=\"bibr\" rid=\"Vajravelu:1978\"&gt;1&lt;/xref&gt;, &lt;xref ref-type=\"bibr\" rid=\"Adesanya:2014\"&gt;2&lt;/xref&gt;]]&lt;/p&gt;\n\n    &lt;ref id=\"j_zna-2014-0260_ref_001\"&gt;&lt;label&gt;&lt;matchid=\"Vajravelu:1978\"&gt;[1]&lt;/label&gt;&lt;mixed-citation&gt;&lt;fnm&gt;K.&lt;/fnm&gt; &lt;snm&gt;Vajravelu&lt;/snm&gt; and &lt;fnm&gt;K. S.&lt;/fnm&gt; Sastri, J. Fluid Mech. &lt;volume&gt;&lt;bold&gt;86&lt;/bold&gt;&lt;/volume&gt;, 365 (1978).&lt;/mixed-citation&gt;&lt;/ref&gt;\n    &lt;ref id=\"j_zna-2014-0260_ref_002\"&gt;&lt;label&gt;&lt;matchid=\"Narain:1982\"&gt;[2]&lt;/label&gt;&lt;mixed-citation&gt;A. Narain and D. D. Joseph, Rheol. Acta. &lt;bold&gt;21&lt;/bold&gt;, 228 (1982).&lt;/mixed-citation&gt;&lt;/ref&gt;\n</code></pre>\n\n<p>But really - I don't understand that <code>while</code> loop logic, so I can't really help. </p>\n"}], "owner": {"reputation": 109, "user_id": 5378649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32ef77179c153a5943408fd2ff13b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Vetri", "link": "https://stackoverflow.com/users/5378649/vetri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1445265417, "creation_date": 1445253867, "last_edit_date": 1445263050, "question_id": 33213162, "link": "https://stackoverflow.com/questions/33213162/how-to-match-the-two-same-id-and-import-the-required-ids", "title": "How to match the two same id and import the required ids", "body": "<p>I need to match the two same ids like <code>rid=\"Vajravelu:1978\"</code> and <code>matchid=\"Vajravelu:1978\"</code>.</p>\n\n<p>The perl programme working below mentioned logic</p>\n\n<p>Step 1 \nFirst mathcing the two same id <code>rid=\"Vajravelu:1978\"</code> and <code>matchid=\"Vajravelu:1978\"</code> </p>\n\n<p>Step 2\nIf the two ids are same matchid=\"Vajravelu:1978 corresponding reference id like <code>id=\"j_zna-2014-0260_ref_001\"</code> to be stored in one variable.</p>\n\n<p>Step 3\nThis Stored reference id varible should be written in rid='j_zna-2014-0260_ref_001'  </p>\n\n<p>Step 4\nFinally the match id should be removed</p>\n\n<p>My Input html File:</p>\n\n<pre><code>&lt;p&gt;The sample ID [[&lt;xref ref-type=\"bibr\" rid=\"Vajravelu:1978\"&gt;1&lt;/xref&gt;, &lt;xref ref-type=\"bibr\" rid=\"Adesanya:2014\"&gt;2&lt;/xref&gt;]]&lt;/p&gt;\n\n    &lt;ref id=\"j_zna-2014-0260_ref_001\"&gt;&lt;label&gt;&lt;matchid=\"Vajravelu:1978\"&gt;[1]&lt;/label&gt;&lt;mixed-citation&gt;&lt;fnm&gt;K.&lt;/fnm&gt; &lt;snm&gt;Vajravelu&lt;/snm&gt; and &lt;fnm&gt;K. S.&lt;/fnm&gt; Sastri, J. Fluid Mech. &lt;volume&gt;&lt;bold&gt;86&lt;/bold&gt;&lt;/volume&gt;, 365 (1978).&lt;/mixed-citation&gt;&lt;/ref&gt;\n    &lt;ref id=\"j_zna-2014-0260_ref_002\"&gt;&lt;label&gt;&lt;matchid=\"Narain:1982\"&gt;[2]&lt;/label&gt;&lt;mixed-citation&gt;A. Narain and D. D. Joseph, Rheol. Acta. &lt;bold&gt;21&lt;/bold&gt;, 228 (1982).&lt;/mixed-citation&gt;&lt;/ref&gt;\n</code></pre>\n\n<p>My Required output xml file:</p>\n\n<pre><code>&lt;p&gt;The sample ID [[&lt;xref ref-type=\"bibr\" rid=\"j_zna-2014-0260_ref_001\"&gt;1&lt;/xref&gt;, &lt;xref ref-type=\"bibr\" rid=\"j_zna-2014-0260_ref_002\"&gt;2&lt;/xref&gt;]]&lt;/p&gt;\n\n&lt;ref id=\"j_zna-2014-0260_ref_001\"&gt;&lt;label&gt;[1]&lt;/label&gt;&lt;mixed-citation&gt;&lt;fnm&gt;K.&lt;/fnm&gt; &lt;snm&gt;Vajravelu&lt;/snm&gt; and &lt;fnm&gt;K. S.&lt;/fnm&gt; Sastri, J. Fluid Mech. &lt;volume&gt;&lt;bold&gt;86&lt;/bold&gt;&lt;/volume&gt;, 365 (1978).&lt;/mixed-citation&gt;&lt;/ref&gt;\n&lt;ref id=\"j_zna-2014-0260_ref_002\"&gt;&lt;label&gt;[2]&lt;/label&gt;&lt;mixed-citation&gt;A. Narain and D. D. Joseph, Rheol. Acta. &lt;bold&gt;21&lt;/bold&gt;, 228 (1982).&lt;/mixed-citation&gt;&lt;/ref&gt;\n</code></pre>\n\n<p>I am beginner of the perl programming. I will try this below mentioned code. But this code is not working. Please advice</p>\n\n<pre><code>  #!C:\\Strawberry\\perl\\bin\\perl\nuse strict;\nuse warnings;\nopen(IN,\"$ARGV[0]\\.html\")||die(\"Input LaTeX filename without .html extension\\n\");\nlocal $/;\nmy $TeX2html=&lt;IN&gt;;\nmy ($rid) = $TeX2html =~ m/rid=\"(.*?)\"/;\nmy ($matchid) = $TeX2html =~ m/matchid=\"(.*?)\"/;\n\nwhile($rid = $matchid) {\n                       $TeX2html =~ s/ref id=\"(.*?)/rid=$1/si;\n                       }\nprint $TeX2html;\nclose(IN);\n</code></pre>\n\n<p>I am using the command to execute the above mentioned program <code>stack.pl sample &gt;out.xml</code></p>\n"}, {"tags": ["perl", "intellij-idea", "ide"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1445253162, "post_id": 33212749, "comment_id": 54229827, "body": "Which plugin? Camelcade?"}, {"owner": {"reputation": 1007, "user_id": 1288120, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/f73d7fb82a257fe648b351096ec71098?s=128&d=identicon&r=PG", "display_name": "Bharat", "link": "https://stackoverflow.com/users/1288120/bharat"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1445253786, "post_id": 33212749, "comment_id": 54230225, "body": "@choroba : yes Camelcade"}], "answers": [{"tags": [], "owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "is_accepted": false, "score": 0, "last_activity_date": 1457699774, "creation_date": 1457699774, "answer_id": 35940462, "question_id": 33212749, "link": "https://stackoverflow.com/questions/33212749/integrate-perl-documentation-in-perl5-plugin-for-intellij-idea/35940462#35940462", "title": "Integrate perl documentation in Perl5 plugin for IntelliJ IDEA", "body": "<p>You can't for now. But you may post a feature request on the github.</p>\n"}], "owner": {"reputation": 1007, "user_id": 1288120, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/f73d7fb82a257fe648b351096ec71098?s=128&d=identicon&r=PG", "display_name": "Bharat", "link": "https://stackoverflow.com/users/1288120/bharat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457699774, "creation_date": 1445252653, "last_edit_date": 1445255045, "question_id": 33212749, "link": "https://stackoverflow.com/questions/33212749/integrate-perl-documentation-in-perl5-plugin-for-intellij-idea", "title": "Integrate perl documentation in Perl5 plugin for IntelliJ IDEA", "body": "<p>I am using Perl5 plugin (<a href=\"https://plugins.jetbrains.com/plugin/7796\" rel=\"nofollow\">Camelcade</a>) for IntelliJ IDEA, how can I integrate perldoc in it?</p>\n"}, {"tags": ["perl", "unix"], "comments": [{"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 0, "creation_date": 1445249587, "post_id": 33211800, "comment_id": 54227719, "body": "Escape the character with a backslash? <code>`sed &#39;\\$d&#39; file`;</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1445250071, "post_id": 33211800, "comment_id": 54227993, "body": "Why are you trying to <code>sed</code> from within <code>perl</code> anyway? This feels like an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>"}, {"owner": {"reputation": 11, "user_id": 5435448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b96b16241f2a666daa8c0b5ce257507?s=128&d=identicon&r=PG&f=1", "display_name": "Iyshwarya", "link": "https://stackoverflow.com/users/5435448/iyshwarya"}, "edited": false, "score": 0, "creation_date": 1445251186, "post_id": 33211800, "comment_id": 54228583, "body": "I want to read a file and delete the first and last lines, and use the remaining lines for doing some processing. Is there a way that I can use both the commands together"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1445251445, "post_id": 33211800, "comment_id": 54228744, "body": "Deleting the last line of a file is a strange thing to do. Why was it written in the first place?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1445252612, "post_id": 33211800, "comment_id": 54229472, "body": "Do you want to modify the file, or do you just want to ignore those lines when you process it?"}, {"owner": {"reputation": 11, "user_id": 5435448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b96b16241f2a666daa8c0b5ce257507?s=128&d=identicon&r=PG&f=1", "display_name": "Iyshwarya", "link": "https://stackoverflow.com/users/5435448/iyshwarya"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1445318412, "post_id": 33211800, "comment_id": 54261300, "body": "@Borodin , I don&#39;t want to modify the file, I just want to skip those lines while processing."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1445250937, "post_id": 33212023, "comment_id": 54228449, "body": "<code>pop @lines</code> is better, as <code>delete $lines[$i]</code> won&#39;t work for anything other than the last element of the array. You also need <code>untie @lines</code> to flush the change back to the file"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "edited": false, "score": 0, "creation_date": 1445251322, "post_id": 33212023, "comment_id": 54228666, "body": "@F.Hauri: From the module&#39;s documentation: <b>The file is</b> <b><i>not</i></b> <b>loaded into memory, so this will work even for gigantic files.</b>"}, {"owner": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1445252038, "post_id": 33212023, "comment_id": 54229126, "body": "@Borodin ... but <code>Tie::File</code> could&#39;nt work with <code>STDIN</code>!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "edited": false, "score": 0, "creation_date": 1445252292, "post_id": 33212023, "comment_id": 54229291, "body": "@F.Hauri: If STDIN is opened to a <i>file</i> then it will work fine. If not then deleting the last line makes no sense"}, {"owner": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1445252349, "post_id": 33212023, "comment_id": 54229328, "body": "@Borodin Yes it could make sens is STDIN is piped from another command."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "edited": false, "score": 0, "creation_date": 1445252446, "post_id": 33212023, "comment_id": 54229388, "body": "@F.Hauri: You can&#39;t delete data from a pipe as it is read only. Besides, the OP explicitly says a <i>file</i>"}, {"owner": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1445262493, "post_id": 33212023, "comment_id": 54236191, "body": "@Borodin When you pipe to pipe, <i>deleting lines</i> make sens, like <code>sed -e 1d;25d;$d</code>"}], "tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 5, "last_activity_date": 1445250236, "creation_date": 1445250236, "answer_id": 33212023, "question_id": 33211800, "link": "https://stackoverflow.com/questions/33211800/delete-the-last-line-of-a-file-using-perl/33212023#33212023", "title": "Delete the last line of a file using perl", "body": "<p>Don't know why are you using <code>sed</code> into Perl. Perl itself have standard module to delete last line from a file.</p>\n\n<p>Use the standard (as of v5.8) <code>Tie::File</code> module and delete the last element from the tied array:</p>\n\n<pre><code>use Tie::File;\n\ntie @lines, Tie::File, $file or die \"can't update $file: $!\";\ndelete $lines[-1];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "is_accepted": false, "score": 5, "last_activity_date": 1445277606, "last_edit_date": 1445277606, "creation_date": 1445250512, "answer_id": 33212115, "question_id": 33211800, "link": "https://stackoverflow.com/questions/33211800/delete-the-last-line-of-a-file-using-perl/33212115#33212115", "title": "Delete the last line of a file using perl", "body": "<h3>Last line only</h3>\n\n<p>The closest syntax seem to be:</p>\n\n<pre><code>perl -ne 'print unless eof()'\n</code></pre>\n\n<p>This will act like <code>sed</code>, ie: without the requirement of reading the whole file into memory and could work with <em>FIFO</em> like <code>STDIN</code>.</p>\n\n<p>See:</p>\n\n<pre><code>perl -ne 'print unless eof()' &lt; &lt;(seq 1 3)\n1\n2\n</code></pre>\n\n<p>or maybe:</p>\n\n<pre><code>perl -pe '$_=undef if eof()' &lt; &lt;(seq 1 3)\n1\n2\n</code></pre>\n\n<h3>First and last lines</h3>\n\n<pre><code>perl -pe '\n    BEGIN {\n        chomp(my $first= &lt;&gt;);\n        print \"Something special with $first\\n\";\n    };\n    do {\n        chomp;\n        print \"Other speciality with $_\\n\";\n        undef $_;\n    } if eof();\n  ' &lt; &lt;(seq 1 5)\n</code></pre>\n\n<p>will render:</p>\n\n<pre><code>Something special with 1\n2\n3\n4\nOther speciality with 5\n</code></pre>\n\n<h3>Shortest: first and last line:</h3>\n\n<pre><code>perl -pe 's/^/Something... / if$.==1||eof' &lt; &lt;(seq 1 5)\n</code></pre>\n\n<p>will render:</p>\n\n<pre><code>Something... 1\n2\n3\n4\nSomething... 5\n</code></pre>\n\n<p>Try this:</p>\n\n<pre><code>perl -pe 'BEGIN{$s=join\"|\",qw|1 3 7 21|;};\n          if ($.=~/^($s)$/||eof){s/^/---/}else{s/$/.../}' &lt; &lt;(seq 1 22)\n</code></pre>\n\n<p>... something like <code>sed</code> command:</p>\n\n<pre><code>sed '1ba;3ba;7ba;21ba;$ba;s/$/.../;bb;:a;s/^/---/;:b' &lt; &lt;(seq 1 22)\n</code></pre>\n\n<h3>In a script file:</h3>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\n\nsub something {\n    chomp;\n    print \"Something special with $_.\\n\";\n}\n\n$_=&lt;&gt;;\nsomething;\n\nwhile (&lt;&gt;)  {\n    if (eof) { something; }\n    else { print; };\n}\n</code></pre>\n\n<p>will give:</p>\n\n<pre><code>/tmp/script.pl &lt; &lt;(seq 1 5)\nSomething special with 1.\n2\n3\n4\nSomething special with 5.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1808, "user_id": 5397845, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-h5AyAVbZoqI/AAAAAAAAAAI/AAAAAAAAALA/pyUGY5qhrl4/photo.jpg?sz=128", "display_name": "Swadhikar", "link": "https://stackoverflow.com/users/5397845/swadhikar"}, "edited": false, "score": 0, "creation_date": 1445336814, "post_id": 33215831, "comment_id": 54271366, "body": "Well.. thanks for directing.. the below line will also work if we remove $i. next if ($. == 1 or eof);"}], "tags": [], "owner": {"reputation": 1808, "user_id": 5397845, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-h5AyAVbZoqI/AAAAAAAAAAI/AAAAAAAAALA/pyUGY5qhrl4/photo.jpg?sz=128", "display_name": "Swadhikar", "link": "https://stackoverflow.com/users/5397845/swadhikar"}, "is_accepted": false, "score": -1, "last_activity_date": 1445262438, "last_edit_date": 1445262438, "creation_date": 1445261614, "answer_id": 33215831, "question_id": 33211800, "link": "https://stackoverflow.com/questions/33211800/delete-the-last-line-of-a-file-using-perl/33215831#33215831", "title": "Delete the last line of a file using perl", "body": "<p>Hope you are trying to execute the 'sed' command from the middle of a perl script. I would recommend not to use this approach because it will work only in non-windows systems. Below is a perl'ish approach in which you can process first and last lines only rather than spending effort to delete file contents. Thank you. </p>\n\n<p>Assuming \"myfile.txt\" as the input file:</p>\n\n<pre><code>open (FH, \"&lt;\", \"myfile.txt\") or die \"Unable to open \\\"myfile.txt\\\": $! \\n\";\n\n$i = 1;\n\nwhile(&lt;FH&gt;){\n    next if ($i++ == 1 or eof);\n    # Process other lines\n    print \"\\nProcessing Line: $_\";    \n}\n\nclose (FH);\n\nprint \"\\n\";\n1;\n</code></pre>\n\n<p>myfile.txt -</p>\n\n<pre><code># First line\nThis is the beginning of comment free file.\nHope this is also the line to get processed!\n# last line\n</code></pre>\n\n<p>Result -</p>\n\n<pre><code>Processing Line: This is the beginning of comment free file.\n\nProcessing Line: Hope this is also the line to get processed!\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5435448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b96b16241f2a666daa8c0b5ce257507?s=128&d=identicon&r=PG&f=1", "display_name": "Iyshwarya", "link": "https://stackoverflow.com/users/5435448/iyshwarya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3365, "favorite_count": 1, "answer_count": 3, "score": -1, "last_activity_date": 1445277606, "creation_date": 1445249497, "last_edit_date": 1445250346, "question_id": 33211800, "link": "https://stackoverflow.com/questions/33211800/delete-the-last-line-of-a-file-using-perl", "title": "Delete the last line of a file using perl", "body": "<pre><code>sed '$d' $file; \n</code></pre>\n\n<p>Using this command doesn't seem to work, as <code>$</code> is a reserved symbol in Perl.</p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1445246739, "post_id": 33210837, "comment_id": 54226044, "body": "What function do you mean? A Javascript one?"}, {"owner": {"reputation": 19, "user_id": 4929101, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/39f38ef8716cfbd90233d01e258a0c14?s=128&d=identicon&r=PG&f=1", "display_name": "gettingthere", "link": "https://stackoverflow.com/users/4929101/gettingthere"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1445246818, "post_id": 33210837, "comment_id": 54226085, "body": "@choroba A function within my Perl script"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1445248475, "post_id": 33210837, "comment_id": 54227065, "body": "How have you implemented the search?"}], "answers": [{"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 1, "last_activity_date": 1445246982, "creation_date": 1445246982, "answer_id": 33211014, "question_id": 33210837, "link": "https://stackoverflow.com/questions/33210837/hyperlinking-text-to-a-function-perl-cgi/33211014#33211014", "title": "Hyperlinking text to a function perl CGI", "body": "<p>No. The functions don't exist outside of the Perl, which runs on the server.</p>\n\n<p>The browser can only interact with the Perl by requesting URLs from the server.</p>\n\n<p>You need to map the URLs on to the functions you want to run.</p>\n\n<p>If you're doing this by hand, you would typically do something like:</p>\n\n<pre><code>my $action = $q-&gt;param('action');\nif ($action eq \"show_user\") {\n    show_user();\n}\n</code></pre>\n\n<p>Frameworks such as <a href=\"https://metacpan.org/pod/Catalyst\" rel=\"nofollow\">Catalyst</a>, <a href=\"https://metacpan.org/pod/Dancer\" rel=\"nofollow\">Dancer</a>, and <a href=\"https://metacpan.org/pod/Web::Simple\" rel=\"nofollow\">Web::Simple</a> provide routing systems to make this easier.</p>\n\n<p>For example, in Catalyst (probably the most complex of the options I suggested above, but the one I'm most familiar with) you might do something like:</p>\n\n<pre><code>sub show_user : Local : Args(1) {\n    # code to run in http://example.com/show_user/gettingthere is requested\n    my ($self, $c, $username) = @_;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1445251021, "creation_date": 1445251021, "answer_id": 33212278, "question_id": 33210837, "link": "https://stackoverflow.com/questions/33210837/hyperlinking-text-to-a-function-perl-cgi/33212278#33212278", "title": "Hyperlinking text to a function perl CGI", "body": "<p>Firstly, you can't put links in plain text. So I suspect that you're actually returning HTML.</p>\n\n<p>Secondly, I'm not sure why you think that CSS would be the right too for changing how your links work. CSS is for changing appearance, not behaviour.</p>\n\n<p>On most social media web sites, each user has a profile page and that page has a URL. So shouldn't your search results just include those profile page links rather than a call to some Perl function?</p>\n\n<p>All in all, you seem rather confused. I think you should probably have another go at explaining what you're doing - as currently it's really not very clear. Perhaps include some code - that usually clarifies things.</p>\n"}], "owner": {"reputation": 19, "user_id": 4929101, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/39f38ef8716cfbd90233d01e258a0c14?s=128&d=identicon&r=PG&f=1", "display_name": "gettingthere", "link": "https://stackoverflow.com/users/4929101/gettingthere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1445251021, "creation_date": 1445246521, "last_edit_date": 1445246768, "question_id": 33210837, "link": "https://stackoverflow.com/questions/33210837/hyperlinking-text-to-a-function-perl-cgi", "title": "Hyperlinking text to a function perl CGI", "body": "<p>I have an option on my social media website to search for users.</p>\n\n<p>After searching for users I display the searched users name and username in plain text. <strong>I want to make it so the user can click on the plain text and be redirected to the user's profile they searched for</strong>.</p>\n\n<p>So far I searched for CSS which would help me achieve this but <strong>all of them link to a url but I want to call a function instead. Is this possible?</strong></p>\n"}, {"tags": ["perl", "foreach", "makepp"], "owner": {"reputation": 43, "user_id": 5209724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rpyOQE6q1f0/AAAAAAAAAAI/AAAAAAAAAC0/ZK4ag_8Y4q0/photo.jpg?sz=128", "display_name": "abhishek taur", "link": "https://stackoverflow.com/users/5209724/abhishek-taur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1445245512, "creation_date": 1445245512, "question_id": 33210525, "link": "https://stackoverflow.com/questions/33210525/can-two-foreach-loop-be-used-simultaneously-in-one-rule-in-a-makeppfile", "title": "Can two foreach loop be used simultaneously in one rule in a makeppfile?", "body": "<p>I have two variables which are basically List of Clients and other variable is the clock domains of those clients.\nThe first variable is the list of clients</p>\n\n<pre><code>$CLIENTS\n</code></pre>\n\n<p>and the second variable are the clock domains of the corresponding clients</p>\n\n<pre><code>$CLIENTS_CLOCK_DOMAIN\n</code></pre>\n\n<p>I want to write a rule like this where $(SOME_PATH) is just a path where the .o files are there</p>\n\n<pre><code>MV_$(foreach)_ACI_$(foreach).c:$(SOME_PATH)/$(foreach)_X_$(foreach).o:foreach $CLIENTS foreach $CLIENTS_CLOCK_DOMAIN\n    $(CC) $(foreach)_X_$(foreach).o $&lt;  &gt; $@\n</code></pre>\n\n<p>here the first foreach loop should start for $CLIENTS and the second one for $CLIENTS_CLOCK_DOMAIN</p>\n\n<p>Is it possible by any means or if any one can tell an alternate method?</p>\n"}, {"tags": ["perl", "jmeter"], "comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1445239656, "post_id": 33208755, "comment_id": 54222023, "body": "<code>not that useful?</code> What exactly do you want in output in case code goes to <code>else</code> block?"}, {"owner": {"reputation": 19, "user_id": 4052908, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a848a50f3bb4c89de36dd0ba04a9984f?s=128&d=identicon&r=PG&f=1", "display_name": "Bhushan Patil", "link": "https://stackoverflow.com/users/4052908/bhushan-patil"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1445239945, "post_id": 33208755, "comment_id": 54222203, "body": "It should send the terminate signal to the jmeter autoshell in else blcok"}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1445244650, "post_id": 33208755, "comment_id": 54224807, "body": "Won&#39;t the shell terminate automatically once you <code>exit</code> the script? Then it may be good enough to return a non-zero exit value (by passing it to <code>exit</code>)."}, {"owner": {"reputation": 263, "user_id": 4544319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5d424615459eed99418ce56f93de90?s=128&d=identicon&r=PG", "display_name": "The Sidhekin", "link": "https://stackoverflow.com/users/4544319/the-sidhekin"}, "edited": false, "score": 0, "creation_date": 1445258262, "post_id": 33208755, "comment_id": 54233126, "body": "Perhaps if someone who knows jmeter could tell those of us who know Perl what &quot;the terminate signal to the jmeter autoshell&quot; is, we could tell you how to send it from Perl."}, {"owner": {"reputation": 19, "user_id": 4052908, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a848a50f3bb4c89de36dd0ba04a9984f?s=128&d=identicon&r=PG&f=1", "display_name": "Bhushan Patil", "link": "https://stackoverflow.com/users/4052908/bhushan-patil"}, "edited": false, "score": 0, "creation_date": 1445258615, "post_id": 33208755, "comment_id": 54233377, "body": "ok.. let some jmeter expert to get back on this"}], "answers": [{"tags": [], "owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "is_accepted": false, "score": 0, "last_activity_date": 1445248597, "creation_date": 1445248597, "answer_id": 33211529, "question_id": 33208755, "link": "https://stackoverflow.com/questions/33208755/terminate-signal-from-remote-to-local-machine-jmeter-machine-in-perl/33211529#33211529", "title": "Terminate signal from remote to local machine( jmeter machine) in perl", "body": "<p>I normally use this:</p>\n\n<pre><code>} else {\n    print \"Error: Wallet Balance in CDR and DB is not matching\\n\";\n    exit(1);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 4052908, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a848a50f3bb4c89de36dd0ba04a9984f?s=128&d=identicon&r=PG&f=1", "display_name": "Bhushan Patil", "link": "https://stackoverflow.com/users/4052908/bhushan-patil"}, "edited": false, "score": 0, "creation_date": 1445327050, "post_id": 33219359, "comment_id": 54265365, "body": "Hi Dmitri.. Thanks for your response.. it is quite useful...as you said I think we are not calling Script via OS process sampler, also your third point is valid I am thinking , I am doing it based on return 1 and return 0 from my perl script but in response assertion where I will compare return values and with whom"}, {"owner": {"reputation": 19, "user_id": 4052908, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a848a50f3bb4c89de36dd0ba04a9984f?s=128&d=identicon&r=PG&f=1", "display_name": "Bhushan Patil", "link": "https://stackoverflow.com/users/4052908/bhushan-patil"}, "edited": false, "score": 0, "creation_date": 1445327104, "post_id": 33219359, "comment_id": 54265404, "body": "One more thing is Perl script is at remote machine and I am calling it from local machine, I am calling the script using autoshell command of jmeter, my point is Jmeter doesn&#39;t have control on perl script , if it returns the success or failure,  jmeter is ignoring the result and going ahead with other execution."}, {"owner": {"reputation": 116880, "user_id": 2897748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d278f6ada8828c902a13ee8a5e523cce?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitri T", "link": "https://stackoverflow.com/users/2897748/dmitri-t"}, "reply_to_user": {"reputation": 19, "user_id": 4052908, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a848a50f3bb4c89de36dd0ba04a9984f?s=128&d=identicon&r=PG&f=1", "display_name": "Bhushan Patil", "link": "https://stackoverflow.com/users/4052908/bhushan-patil"}, "edited": false, "score": 0, "creation_date": 1445357639, "post_id": 33219359, "comment_id": 54285840, "body": "What is &quot;autoshell&quot; command of JMeter?  I don&#39;t see anything regarding it in documentation/source"}, {"owner": {"reputation": 19, "user_id": 4052908, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a848a50f3bb4c89de36dd0ba04a9984f?s=128&d=identicon&r=PG&f=1", "display_name": "Bhushan Patil", "link": "https://stackoverflow.com/users/4052908/bhushan-patil"}, "edited": false, "score": 0, "creation_date": 1445359836, "post_id": 33219359, "comment_id": 54287162, "body": "It is shell command only.. which I am passing in my test case"}, {"owner": {"reputation": 19, "user_id": 4052908, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a848a50f3bb4c89de36dd0ba04a9984f?s=128&d=identicon&r=PG&f=1", "display_name": "Bhushan Patil", "link": "https://stackoverflow.com/users/4052908/bhushan-patil"}, "edited": false, "score": 0, "creation_date": 1445359999, "post_id": 33219359, "comment_id": 54287253, "body": "&quot;sh cdr.pl&quot; which will connect to remote machine and execute the things over there"}, {"owner": {"reputation": 19, "user_id": 4052908, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a848a50f3bb4c89de36dd0ba04a9984f?s=128&d=identicon&r=PG&f=1", "display_name": "Bhushan Patil", "link": "https://stackoverflow.com/users/4052908/bhushan-patil"}, "edited": false, "score": 0, "creation_date": 1445411742, "post_id": 33219359, "comment_id": 54307667, "body": "Hi Dmitri. Any comments on this.. please help"}, {"owner": {"reputation": 116880, "user_id": 2897748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d278f6ada8828c902a13ee8a5e523cce?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitri T", "link": "https://stackoverflow.com/users/2897748/dmitri-t"}, "reply_to_user": {"reputation": 19, "user_id": 4052908, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a848a50f3bb4c89de36dd0ba04a9984f?s=128&d=identicon&r=PG&f=1", "display_name": "Bhushan Patil", "link": "https://stackoverflow.com/users/4052908/bhushan-patil"}, "edited": false, "score": 0, "creation_date": 1445445198, "post_id": 33219359, "comment_id": 54330397, "body": "I don&#39;t have any other ideas apart form listed in the original answer. How do you call this <code>sh cdr.pl</code> script from your JMeter test?"}], "tags": [], "owner": {"reputation": 116880, "user_id": 2897748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d278f6ada8828c902a13ee8a5e523cce?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitri T", "link": "https://stackoverflow.com/users/2897748/dmitri-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1445271819, "creation_date": 1445271819, "answer_id": 33219359, "question_id": 33208755, "link": "https://stackoverflow.com/questions/33208755/terminate-signal-from-remote-to-local-machine-jmeter-machine-in-perl/33219359#33219359", "title": "Terminate signal from remote to local machine( jmeter machine) in perl", "body": "<ol>\n<li>You can send <code>Shutdown</code> message via UDP to the host where JMeter is running at port 4445. Not sure how to properly do it in Perl, you can see <a href=\"http://svn.apache.org/repos/asf/jmeter/trunk/src/core/org/apache/jmeter/util/ShutdownClient.java\" rel=\"nofollow\">ShutdownClient.java</a> for Java implementation</li>\n<li>If you call your script via JMeter's <a href=\"http://jmeter.apache.org/usermanual/component_reference.html#OS_Process_Sampler\" rel=\"nofollow\">OS Process sampler</a>, it has \"Check Return Code\" option</li>\n<li>If JMeter can read STDOUT and/or STDERR you can use <a href=\"http://jmeter.apache.org/usermanual/component_reference.html#Response_Assertion\" rel=\"nofollow\">Response Assertion</a> to check script output. JMeter provides several more <a href=\"https://blazemeter.com/blog/how-use-jmeter-assertions-3-easy-steps\" rel=\"nofollow\">assertion types</a> which allow to set pass/fail criteria quite flexibly.  </li>\n</ol>\n"}], "owner": {"reputation": 19, "user_id": 4052908, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a848a50f3bb4c89de36dd0ba04a9984f?s=128&d=identicon&r=PG&f=1", "display_name": "Bhushan Patil", "link": "https://stackoverflow.com/users/4052908/bhushan-patil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1445326861, "creation_date": 1445239380, "last_edit_date": 1445326861, "question_id": 33208755, "link": "https://stackoverflow.com/questions/33208755/terminate-signal-from-remote-to-local-machine-jmeter-machine-in-perl", "title": "Terminate signal from remote to local machine( jmeter machine) in perl", "body": "<p>I have Perl script, which is at remote machine and I am calling it from local system (I am calling the remote script by using autoshell property of Jmeter). There is no issue in the perl script. I want to Implement the new functionality, without changing anything in local machine rather I have to do some changes in perl script. I am just posting small part of script.</p>\n\n<pre><code>if($BALANCE_N == $newWalletBalance){\n    print \"Previous wallet Balance was:$prevWalletBalance  New walletBalance is:$newWalletBalance\\n\";\n    print \"Total cost and sale price respectively: $totalCostPrice and $totalSalePrice\\n\\n\";\n    return 0;\n}\nelse{\n    print \"Error: Wallet Balance in CDR and DB is not matching\\n\";\n    return 1;\n}\n</code></pre>\n\n<p>if \"if statement is successful, it should go ahead in the script make it pass\", if it entered into else part then my script should return some terminate kind of signal to local machine and should mark the script as failed. I have tried with return and exit statement but it is not that useful, any other way in the Perl to implement my functionality.</p>\n"}, {"tags": ["perl", "file", "dd", "fallocate"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1445238412, "last_edit_date": 1445238412, "creation_date": 1445237563, "answer_id": 33208297, "question_id": 33208070, "link": "https://stackoverflow.com/questions/33208070/dd-fallocate-smiliar-function-in-perl/33208297#33208297", "title": "dd/fallocate-smiliar function in perl", "body": "<p>Your question amounts to the following:</p>\n\n<blockquote>\n  <p><em>How can I create a 1,000 MiB file of NUL bytes in Perl?</em></p>\n</blockquote>\n\n<p>You could use the following:</p>\n\n<pre><code>open(my $fh, '&gt;', $qfn)\n   or die(\"Can't create \\\"$qfn\\\": $!\\n\");\n\nfor (1..1000) {\n   print($fh \"\\0\" x (1024*1024))\n      or die(\"Error writing to \\\"$qfn\\\": $!\\n\");\n}\n\nclose($fh)\n   or die(\"Error writing to \\\"$qfn\\\": $!\\n\");\n</code></pre>\n\n<p>(Ok, so that's really equivalent to <code>bs=1024k count=1KB</code>, but the result is the same, and it's faster than <code>bs=1KB count=1024k</code> for both <code>dd</code> and for <code>perl</code>.)</p>\n"}, {"tags": [], "owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "is_accepted": true, "score": 2, "last_activity_date": 1445241725, "creation_date": 1445241725, "answer_id": 33209394, "question_id": 33208070, "link": "https://stackoverflow.com/questions/33208070/dd-fallocate-smiliar-function-in-perl/33209394#33209394", "title": "dd/fallocate-smiliar function in perl", "body": "<p><code>fallocate(1)</code> has the advantage of being much faster than the pure-Perl way of writing out a gigabyte of zero bytes. It uses a Linux-specific syscall that does have a POSIX equivalent but unfortunately that's not implemented by the <code>POSIX</code> module.\nIf you can use sparse files (the only application I can think of right now that really doesn't like them is using the files as swap space), the easiest way is to call <code>truncate($fh, $size)</code>. But of course you do need to open the file for writing first -- why didn't this work?</p>\n"}], "owner": {"reputation": 486, "user_id": 4115884, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/zbzXF.jpg?s=128&g=1", "display_name": "yoko", "link": "https://stackoverflow.com/users/4115884/yoko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "accepted_answer_id": 33209394, "answer_count": 2, "score": 0, "last_activity_date": 1445241725, "creation_date": 1445236741, "question_id": 33208070, "link": "https://stackoverflow.com/questions/33208070/dd-fallocate-smiliar-function-in-perl", "title": "dd/fallocate-smiliar function in perl", "body": "<p>I have a line like <code>dd if=/dev/zero of=myImg.img bs=1KB count=1024k</code> , which I have to do several times in my script. Therefore i wanted to integrate this line in my perl script, not by doing a <code>system('...');</code> call, but by creating a funktion. Is there a good way to do so? </p>\n\n<p>I've tried it with <a href=\"http://perldoc.perl.org/ExtUtils/MakeMaker.html\" rel=\"nofollow\">MakeMaker</a>, but i didn't find a proper way to set my filelength/offset the right way, or anything similar to the <code>-o -l</code> from <code>fallocate</code>. \nAnd of course, the obvious way <code>open(FH,\"&gt;/myFolder/MyImg.img\");</code> didn't work, either.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1671, "user_id": 4600983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d236a59e7d7e6871716bc25752dae6?s=128&d=identicon&r=PG&f=1", "display_name": "svsd", "link": "https://stackoverflow.com/users/4600983/svsd"}, "edited": false, "score": 0, "creation_date": 1445227244, "post_id": 33205081, "comment_id": 54217379, "body": "The include path you&#39;re trying to add looks suspicious. Can you remove <code>${project_loc}&#47;</code> and see if the path gets added after clicking on &#39;Add to List&#39;? To see if the correct include path is being used, you can create a simple Perl script which just does <code>print &quot;@INC&quot;</code> and check if the output has the correct paths listed."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445227267, "post_id": 33205081, "comment_id": 54217384, "body": "Note: <code>$FindBin::RealBin</code> is far better than <code>$FindBin::Bin</code> as it handles shortcuts to your script too."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1445227481, "post_id": 33205081, "comment_id": 54217427, "body": "does <code>${project_loc}&#47;&quot;C:\\SVN\\BuildToolWorkspace\\BuildToolPerfProj&quot;</code> look anything like a valid path to you? It doesn&#39;t to me. It combines two pathname conventions and has a drive letter in the middle."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445227511, "post_id": 33205081, "comment_id": 54217434, "body": "And quotes. Paths don&#39;t have quotes."}, {"owner": {"reputation": 589, "user_id": 915783, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d66b5abf197657a0e012a3e5c4f4adf1?s=128&d=identicon&r=PG", "display_name": "user915783", "link": "https://stackoverflow.com/users/915783/user915783"}, "edited": false, "score": 0, "creation_date": 1445228510, "post_id": 33205081, "comment_id": 54217641, "body": "added quotes as I read in some posts that if full path has space, better to add quotes."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445227423, "post_id": 33205148, "comment_id": 54217413, "body": "That&#39;s what <code>use lib</code> does, which is fine for when they run the script, but programmatic changes to <code>@INC</code> aren&#39;t picked up by EPIC&#39;s syntax checker, which is why it needs to be added to the project. The OP was on the right track, but fell short."}], "tags": [], "owner": {"reputation": 78, "user_id": 5458323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a9970caab522e64944f95748f302bd4?s=128&d=identicon&r=PG&f=1", "display_name": "Laserbeak", "link": "https://stackoverflow.com/users/5458323/laserbeak"}, "is_accepted": false, "score": 0, "last_activity_date": 1445217225, "creation_date": 1445217225, "answer_id": 33205148, "question_id": 33205081, "link": "https://stackoverflow.com/questions/33205081/use-perl-module-not-working-as-not-able-to-add-path-to-module-in-epic/33205148#33205148", "title": "use &#39;perl module&quot; not working as not able to add path to module in Epic", "body": "<p>Have you tried putting the directory into @INC? I think you have to do that in a BEGIN block.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 589, "user_id": 915783, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d66b5abf197657a0e012a3e5c4f4adf1?s=128&d=identicon&r=PG", "display_name": "user915783", "link": "https://stackoverflow.com/users/915783/user915783"}, "edited": false, "score": 0, "creation_date": 1445229737, "post_id": 33206432, "comment_id": 54218008, "body": "Q1) It probably only does a syntax check at startup and when you change the file. Q2) Don&#39;t know. Does it say what the error is? If it&#39;s till for the same error, trying changing the file."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 0, "last_activity_date": 1445227207, "creation_date": 1445227207, "answer_id": 33206432, "question_id": 33205081, "link": "https://stackoverflow.com/questions/33205081/use-perl-module-not-working-as-not-able-to-add-path-to-module-in-epic/33206432#33206432", "title": "use &#39;perl module&quot; not working as not able to add path to module in Epic", "body": "<p>According to the screenshot, you didn't add any paths to the list. Your list is blank.</p>\n\n<p>According to the screenshot, you were about to add a string that's garbage.</p>\n\n<p>The path you want is <code>${project_loc}/BuildToolPerlProj</code><sup>[1]</sup>, and don't forget to actually click \"Add to List\" this time.</p>\n\n<hr>\n\n<ol>\n<li><code>C:\\SVN\\BuildToolWorkspace\\BuildToolPerlProj</code> (no quotes) should also work, but since the path is within the project, it's far better to give a path relative to the project as shown above.</li>\n</ol>\n"}], "owner": {"reputation": 589, "user_id": 915783, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d66b5abf197657a0e012a3e5c4f4adf1?s=128&d=identicon&r=PG", "display_name": "user915783", "link": "https://stackoverflow.com/users/915783/user915783"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 33206432, "answer_count": 2, "score": 0, "last_activity_date": 1445231830, "creation_date": 1445216629, "last_edit_date": 1445231830, "question_id": 33205081, "link": "https://stackoverflow.com/questions/33205081/use-perl-module-not-working-as-not-able-to-add-path-to-module-in-epic", "title": "use &#39;perl module&quot; not working as not able to add path to module in Epic", "body": "<p>I have Active state Perl 5.20.2 (32 bit) installed in my Win 7 machine. I am using Eclipse Release (4.5.1) and Epic add-on for Perl.<br>\n<em>I am using PERl,Eclipse and Epic for the first time.</em></p>\n\n<p>I have following structure for workspace and projects:</p>\n\n<blockquote>\n  <p>C:\\SVN\\BuildToolWorkspace        -> workspace path<br>\n  C:\\SVN\\BuildToolWorkspace\\BuildToolPerlProj   ->project path<br>\n  C:\\SVN\\BuildToolWorkspace\\BuildToolPerlProj\\adsp2mk.pl  -> Perl file<br>\n  C:\\SVN\\BuildToolWorkspace\\BuildToolPerlProj\\adsp2common.pm                                -> Perl module</p>\n</blockquote>\n\n<p>I see red cross in front of main Perl file adsp2mk.pl and the project.\nhovering over the code show following:\n<a href=\"https://i.stack.imgur.com/8cHSV.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8cHSV.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I add the path to Perl include folder/file as\n<a href=\"https://i.stack.imgur.com/ssYzw.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ssYzw.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>As I close project peoperties and open them again, the path is gone and I still have the error for the project and inside the file.</p>\n\n<p><strong>Note/Update</strong>:after reading the comments I did following:</p>\n\n<p><a href=\"https://i.stack.imgur.com/qgHFy.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qgHFy.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>However, even after refresh, I was still getting error at line 35.\nClosed and opened Eclipse <em>and it is gone.</em>\nHowever, in the navigator window, I still have Red cross in front of the project and the script as</p>\n\n<p><a href=\"https://i.stack.imgur.com/uN81g.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uN81g.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Q1) Is this probably due to some other error picked up by syntax check?\n    I don't see any red wavy line inside the script code to suggest that.<br>\nQ2) Why didn't refresh remove the error in line 35 , and I had to exit and reopen eclipse?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5071768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93253788d5837f30c86372bbb36ca376?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandre", "link": "https://stackoverflow.com/users/5071768/alexandre"}, "edited": false, "score": 0, "creation_date": 1445236403, "post_id": 33206158, "comment_id": 54220335, "body": "It seems that signals are process context and not thread context... I would like to stop thread because that will be code after while that must be executed after read breaking..."}, {"owner": {"reputation": 240629, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 21, "user_id": 5071768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93253788d5837f30c86372bbb36ca376?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandre", "link": "https://stackoverflow.com/users/5071768/alexandre"}, "edited": false, "score": 0, "creation_date": 1445252376, "post_id": 33206158, "comment_id": 54229341, "body": "@Alexandre: I haven&#39;t looked into things in perl, but the underlying Unix system-call interface certainly allows sending signals to threads.  See <a href=\"http://linux.die.net/man/3/pthread_kill\" rel=\"nofollow noreferrer\">linux.die.net/man/3/pthread_kill</a>"}], "tags": [], "owner": {"reputation": 240629, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 0, "last_activity_date": 1445225070, "creation_date": 1445225070, "answer_id": 33206158, "question_id": 33204573, "link": "https://stackoverflow.com/questions/33204573/read-serial-port-how-to-interrupt-read-blocking-operation/33206158#33206158", "title": "Read serial port: how to interrupt read blocking operation", "body": "<p><a href=\"http://search.cpan.org/dist/Device-SerialPort/SerialPort.pm\" rel=\"nofollow\">http://search.cpan.org/dist/Device-SerialPort/SerialPort.pm</a> isn't very clear on how to do non-blocking I/O.  It sounds like it uses perl's <code>select</code> internally to see if characters are available.</p>\n\n<p>I haven't written a multi-threaded perl program before.  Can you send a signal to another thread, which would interrupt a system call?</p>\n\n<p>If you just want to stop the thread, not get it to break out of a read and do something else, that should be easier.  Just kill it normally.</p>\n"}], "owner": {"reputation": 21, "user_id": 5071768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93253788d5837f30c86372bbb36ca376?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandre", "link": "https://stackoverflow.com/users/5071768/alexandre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 391, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1445225070, "creation_date": 1445212229, "question_id": 33204573, "link": "https://stackoverflow.com/questions/33204573/read-serial-port-how-to-interrupt-read-blocking-operation", "title": "Read serial port: how to interrupt read blocking operation", "body": "<p>I have a PERL app that launches a thread for serial communication...\nI am using lib use Device::SerialPort;</p>\n\n<pre><code>while($bRun)\n{\n    print \"Waiting for serial port data...\";\n\n    my ($count,$msg)=$SerialPort-&gt;read(255); # will read _up to_ 255 chars\n\n    if ($count &gt; 0) \n    {\n            #Process\n    }\n\n    #sleep(1);\n}\n</code></pre>\n\n<p>But it must be possible to stop that thread even during read operation.</p>\n\n<p>I already have a method to put bRun to false but how to unblock thread if it is in the read operation?</p>\n\n<p>Thanks a lot</p>\n\n<p>Alex</p>\n"}, {"tags": ["perl", "wxwidgets"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4718912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39292f08f1124e41be16bbde12490b90?s=128&d=identicon&r=PG&f=1", "display_name": "Nate Wells", "link": "https://stackoverflow.com/users/4718912/nate-wells"}, "edited": false, "score": 0, "creation_date": 1445216990, "post_id": 33204872, "comment_id": 54215000, "body": "I had not thought about that.  I am trying several different programming languages for fun, and I know a number of them install there own gnu compiler toolchains.  I did think that was the issue and installed the latest mingw_64 release.  But let me work through my path variables and see if thats the issue."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 23, "user_id": 4718912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39292f08f1124e41be16bbde12490b90?s=128&d=identicon&r=PG&f=1", "display_name": "Nate Wells", "link": "https://stackoverflow.com/users/4718912/nate-wells"}, "edited": false, "score": 0, "creation_date": 1445217147, "post_id": 33204872, "comment_id": 54215036, "body": "@NateWells: You should make sure that the whole tool chain needed to build the module comes from the Strawberry Perl installation, including <code>perl.exe</code> and <code>dmake.exe</code>, otherwise you may end up with an incompatible module"}, {"owner": {"reputation": 23, "user_id": 4718912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39292f08f1124e41be16bbde12490b90?s=128&d=identicon&r=PG&f=1", "display_name": "Nate Wells", "link": "https://stackoverflow.com/users/4718912/nate-wells"}, "edited": false, "score": 0, "creation_date": 1445219009, "post_id": 33204872, "comment_id": 54215456, "body": "Beautiful....  Yes that was the issue.  I am simply going to create some batch scripts to set my path correctly when I work in different languages.  Thank you."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1445214650, "creation_date": 1445214650, "answer_id": 33204872, "question_id": 33204558, "link": "https://stackoverflow.com/questions/33204558/unable-to-install-wx-strawberry-perl-on-windows-10/33204872#33204872", "title": "Unable to Install Wx - Strawberry Perl on Windows 10", "body": "<p>The core problem is the line</p>\n\n<pre><code>sorry, unimplemented: 64-bit mode not compiled in\n</code></pre>\n\n<p>so you are using the <code>-m64</code> option on a gcc that doesn't support 64-bit</p>\n\n<p>Ordinarily I would expect the only gcc in your path to be the one that comes with Strawberry Perl, so are you using Cygwin or something that is causing the build to pick up the wrong compiler?</p>\n"}], "owner": {"reputation": 23, "user_id": 4718912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39292f08f1124e41be16bbde12490b90?s=128&d=identicon&r=PG&f=1", "display_name": "Nate Wells", "link": "https://stackoverflow.com/users/4718912/nate-wells"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1005, "favorite_count": 0, "accepted_answer_id": 33204872, "answer_count": 1, "score": 2, "last_activity_date": 1445214650, "creation_date": 1445212088, "last_edit_date": 1445212366, "question_id": 33204558, "link": "https://stackoverflow.com/questions/33204558/unable-to-install-wx-strawberry-perl-on-windows-10", "title": "Unable to Install Wx - Strawberry Perl on Windows 10", "body": "<p>While trying to install Wx for Strawberry Perl I am receiving the following error:  </p>\n\n<blockquote>\n  <p>gcc -c -o gcc_mswudll\\wxregex_regcomp.o  -O2 -mthreads  -DHAVE_W32API_H -DNDEBUG -I....\\include -I....\\lib\\gcc_dll\\mswu -D__WXMSW__  -D_UNICODE -m64  -MTgcc_mswudll\\wxregex_regcomp.o -MFgcc_mswudll\\wxregex_regcomp.o.d -MD -MP ../../src/regex/regcomp.c\n      ../../src/regex/regcomp.c:1:0: sorry, unimplemented: 64-bit mode not compiled in \n      makefile.gcc:5702: recipe for target 'gcc_mswudll\\wxregex_regcomp.o' failed gmake: *** [gcc_mswudll\\wxregex_regcomp.o] Error 1\n      system: gmake -f makefile.gcc all  UNICODE=1 MSLU=0 BUILD=release SHARED=1  DEBUG_INFO=default DEBUG_FLAG=1 LDFLAGS=\" -m64\" CPPFLAGS=\"-m64\": 512 at inc/My/Build/Win32.pm line 284.\n        MDOOTSON/Alien-wxWidgets-0.67.tar.gz\n        D:\\Perl\\perl\\bin\\perl.exe ./Build -- NOT OK\n      Stopping: 'install' failed for 'Alien::wxWidgets'.</p>\n</blockquote>\n\n<p>So this actually seems to be in the compile itself?  Using CPAN to install.  Not sure where to go from here.  Any help is appreciated.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 27022, "user_id": 182693, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7e4422dd860fce9b9f3c024c8655c7d2?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/182693/sean"}, "is_accepted": false, "score": 2, "last_activity_date": 1445212148, "creation_date": 1445212148, "answer_id": 33204563, "question_id": 33204546, "link": "https://stackoverflow.com/questions/33204546/perl-regex-quantifier-matches-makes-unexpected-match/33204563#33204563", "title": "perl regex quantifier matches makes unexpected match", "body": "<p>An unescaped period in a regular expression means \"any character except newline.\"  You'll need to escape it to match an actual, literal period in the input.</p>\n\n<pre><code>  if( $line =~ /(\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})/ ){...}\n</code></pre>\n\n<p>And that's the <code>poop</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1808, "user_id": 5397845, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-h5AyAVbZoqI/AAAAAAAAAAI/AAAAAAAAALA/pyUGY5qhrl4/photo.jpg?sz=128", "display_name": "Swadhikar", "link": "https://stackoverflow.com/users/5397845/swadhikar"}, "is_accepted": false, "score": 0, "last_activity_date": 1445242981, "creation_date": 1445242981, "answer_id": 33209767, "question_id": 33204546, "link": "https://stackoverflow.com/questions/33204546/perl-regex-quantifier-matches-makes-unexpected-match/33209767#33209767", "title": "perl regex quantifier matches makes unexpected match", "body": "<p>I think the best option would be to match the regex to starting with '^' and ending with '$'.  The \"^\" operator denotes the start of an expression while \"$\" denotes the end. </p>\n\n<p>Example: (\\d{1,3}). \\ would match strings \"123.\" and \"11123.\" as 1 to 3 digits are true for both cases. </p>\n\n<p>I have used the below program to list the valid ip addresses. From my list of four. Try removing ^ and $ and you could see weird results of 4 digit IPs as well.</p>\n\n<pre><code>my $ip1 = \"127.0.0.1\";\nmy $ip2 = \"1.02.003.1234\";\nmy $ip3 = \"127.0.0.10\";\nmy $ip4 = \"1267.0.0.1\";    \nmy @ips = ($ip1, $ip2, $ip3, $ip4);\n\nfor (@ips) {\n    if ($_ =~ /^(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})$/){\n        print \"$_\\n\";\n    }   \n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>127.0.0.1\n127.0.0.10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 0, "last_activity_date": 1445244117, "creation_date": 1445244117, "answer_id": 33210074, "question_id": 33204546, "link": "https://stackoverflow.com/questions/33204546/perl-regex-quantifier-matches-makes-unexpected-match/33210074#33210074", "title": "perl regex quantifier matches makes unexpected match", "body": "<p>You have to add <a href=\"http://www.regular-expressions.info/wordboundaries.html\" rel=\"nofollow\">word boundary</a> around your regex:</p>\n\n<pre><code>if( $line =~ /\\b(\\d{1,3}.\\d{1,3}.\\d{1,3}.\\d{1,3})\\b/ ){\n#      here __^^                      and here __^^\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1445244890, "creation_date": 1445244890, "answer_id": 33210323, "question_id": 33204546, "link": "https://stackoverflow.com/questions/33204546/perl-regex-quantifier-matches-makes-unexpected-match/33210323#33210323", "title": "perl regex quantifier matches makes unexpected match", "body": "<p>If your regex is being weird, then the thing you want is (aside from 'your problem is probably not a good one for a regex anyway'): </p>\n\n<pre><code>use re 'debug'; \n</code></pre>\n\n<p>This gives you (for your last example, otherwise it's a bit too verbose):</p>\n\n<pre><code>Compiling REx \"(\\d{1,3}.\\d{1,3}.\\d{1,3}.\\d{1,3})\"\nFinal program:\n   1: OPEN1 (3)\n   3:   CURLY {1,3} (6)\n   5:     POSIXU[\\d] (0)\n   6:   REG_ANY (7)\n   7:   CURLY {1,3} (10)\n   9:     POSIXU[\\d] (0)\n  10:   REG_ANY (11)\n  11:   CURLY {1,3} (14)\n  13:     POSIXU[\\d] (0)\n  14:   REG_ANY (15)\n  15:   CURLY {1,3} (18)\n  17:     POSIXU[\\d] (0)\n  18: CLOSE1 (20)\n  20: END (0)\nstclass POSIXU[\\d] minlen 7 \nMatching REx \"(\\d{1,3}.\\d{1,3}.\\d{1,3}.\\d{1,3})\" against \"1234.41.123.0\"\nMatching stclass POSIXU[\\d] against \"1234.41\" (7 bytes)\n   0 &lt;&gt; &lt;1234.41.12&gt;         |  1:OPEN1(3)\n   0 &lt;&gt; &lt;1234.41.12&gt;         |  3:CURLY {1,3}(6)\n                                  POSIXU[\\d] can match 3 times out of 3...\n   3 &lt;123&gt; &lt;4.41.123.0&gt;      |  6:  REG_ANY(7)\n   4 &lt;1234&gt; &lt;.41.123.0&gt;      |  7:  CURLY {1,3}(10)\n                                    POSIXU[\\d] can match 0 times out of 3...\n                                    failed...\n   2 &lt;12&gt; &lt;34.41.123.&gt;       |  6:  REG_ANY(7)\n   3 &lt;123&gt; &lt;4.41.123.0&gt;      |  7:  CURLY {1,3}(10)\n                                    POSIXU[\\d] can match 1 times out of 3...\n   4 &lt;1234&gt; &lt;.41.123.0&gt;      | 10:    REG_ANY(11)\n   5 &lt;1234.&gt; &lt;41.123.0&gt;      | 11:    CURLY {1,3}(14)\n                                      POSIXU[\\d] can match 2 times out of 3...\n   7 &lt;234.41&gt; &lt;.123.0&gt;       | 14:      REG_ANY(15)\n   8 &lt;234.41.&gt; &lt;123.0&gt;       | 15:      CURLY {1,3}(18)\n                                        POSIXU[\\d] can match 3 times out of 3...\n  11 &lt;234.41.123&gt; &lt;.0&gt;       | 18:        CLOSE1(20)\n  11 &lt;234.41.123&gt; &lt;.0&gt;       | 20:        END(0)\nMatch successful!\npoop\n1234.41.123.0A match is: 1234.41.123 \nFreeing REx: \"(\\d{1,3}.\\d{1,3}.\\d{1,3}.\\d{1,3})\"\n</code></pre>\n\n<p>As you can see - the gotcha is that line 6 - \"REG_ANY\". </p>\n\n<p>The situation is worse than you think though, because your regex is actually matching: </p>\n\n<pre><code>1234.41.123 \n</code></pre>\n\n<p>And ignoring the trailing <code>.0</code> anyway. But you're also not anchoring your pattern - so if you do escape the <code>.</code>:</p>\n\n<pre><code>/(\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})/\n</code></pre>\n\n<p>That compiles up as:</p>\n\n<pre><code>Final program:\n   1: OPEN1 (3)\n   3:   CURLY {1,3} (6)\n   5:     POSIXU[\\d] (0)\n   6:   EXACT &lt;.&gt; (8)\n   8:   CURLY {1,3} (11)\n  10:     POSIXU[\\d] (0)\n  11:   EXACT &lt;.&gt; (13)\n  13:   CURLY {1,3} (16)\n  15:     POSIXU[\\d] (0)\n  16:   EXACT &lt;.&gt; (18)\n  18:   CURLY {1,3} (21)\n  20:     POSIXU[\\d] (0)\n  21: CLOSE1 (23)\n  23: END (0)\n</code></pre>\n\n<p>Bit closer, but because we don't have any anchors, that's allowed to match;</p>\n\n<pre><code>234.41.123.0 \n</code></pre>\n\n<p>You may want to include either <code>^</code> and <code>$</code> in your regex (start/end of line anchors) or word boundary anchors (<code>\\b</code>). </p>\n"}], "owner": {"reputation": 101, "user_id": 4974813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/569f65c281673aba28d1374e6be100a0?s=128&d=identicon&r=PG&f=1", "display_name": "entimaniac", "link": "https://stackoverflow.com/users/4974813/entimaniac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1445244890, "creation_date": 1445211939, "question_id": 33204546, "link": "https://stackoverflow.com/questions/33204546/perl-regex-quantifier-matches-makes-unexpected-match", "title": "perl regex quantifier matches makes unexpected match", "body": "<p>I'm working on learning perl and attempting exercises in book. I also don't have strong experience with regular expressions. </p>\n\n<p>I'm attempting to find IP addresses in a file. I wrote a random log.txt file with some IP \"addresses\" I'm not exactly attempting to validate quite yet but I'm trying to match four sets of 1 to 3 digits separated by a '.'</p>\n\n<p>My code takes a file name and runs line by line in that file and pulls out a match for an IP address.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nprint \"poop\\n\";\n\nforeach my $arg(@ARGV) {\n        print \"$arg\\n\";\n}\n\nprint \"The file name is: $ARGV[0]\\n\";\n$file = $ARGV[0];\nopen my $info, $file or die \"Could not open $file: $!\";\n\nwhile ( $line =  &lt;$info&gt; )  {\nprint $line;\n  if( $line =~ /(\\d{1,3}.\\d{1,3}.\\d{1,3}.\\d{1,3})/ ){\n\n    my $digit = $1;\n    print \"A match is: $digit \\n\";\n  }\n}\n\nclose $info;\n</code></pre>\n\n<p>Here is my log file: </p>\n\n<pre><code>a b c d e f g h i j k l m n o p q r s t u v w x y z\n1 2 3 4 5 6 7 8 9 0\napple\ncat\nbanana\nchariot\nzebra\nyellow\n123.543.98.32\n2.2.3.4\n1.3.4.55\n1.2.3.454\n1.1.1.1\n22.22.22.22\n333.333.333.333\n012.345.678.910\n012.345.678.91\n012.345.678.9\nthis shouldn't work!!::::\n1234.41.123.0\n</code></pre>\n\n<p>And here are my run results:</p>\n\n<pre><code>$ perl stringsTest.pl ./log.txt\npoop\n./log.txt\nThe file name is: ./log.txt\na b c d e f g h i j k l m n o p q r s t u v w x y z\n1 2 3 4 5 6 7 8 9 0\nA match is: 1 2 3 4 \napple\ncat\nbanana\nchariot\nzebra\nyellow\n123.543.98.32\nA match is: 123.543.98.32 \n2.2.3.4\nA match is: 2.2.3.4 \n1.3.4.55\nA match is: 1.3.4.55 \n1.2.3.454\nA match is: 1.2.3.454 \n1.1.1.1\nA match is: 1.1.1.1 \n22.22.22.22\nA match is: 22.22.22.22 \n333.333.333.333\nA match is: 333.333.333.333 \n012.345.678.910\nA match is: 012.345.678.910 \n012.345.678.91\nA match is: 012.345.678.91 \n012.345.678.9\nA match is: 012.345.678.9 \nthis shouldn't work!!::::\n1234.41.123.0\nA match is: 1234.41.123 \n</code></pre>\n\n<p>This last match is the one I'm confused by. </p>\n\n<p>I thought the quantifiers that I use should limit the match to 1 to 3 digits. I suspect greediness is a suspect. Can someone explain to me why this matches while leaving off the \".0\" ?</p>\n\n<pre><code>1234.41.123.0\nA match is: 1234.41.123 \n</code></pre>\n"}, {"tags": ["perl", "extract"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1445202518, "post_id": 33203205, "comment_id": 54211249, "body": "How about a <code>split</code> on <code>|</code> and print the 0th field?"}, {"owner": {"reputation": 237, "user_id": 4991942, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/905abcb6fad9972a27b72013bdff9d95?s=128&d=identicon&r=PG&f=1", "display_name": "technerdius", "link": "https://stackoverflow.com/users/4991942/technerdius"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1445203133, "post_id": 33203205, "comment_id": 54211444, "body": "I read &#39;man split&#39; and am unsure how to use split to do this.  I tried, split &#39;[^|.*]&#39; ALLEMAILS6.out.test &gt; ALLEMAILS6.out.test.tmp, but this yielded, split: cannot open `[^|.*]&#39; for reading: No such file or directory. Can you give me an example of what I should use?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1445204639, "post_id": 33203205, "comment_id": 54211972, "body": "You haven&#39;t told Perl to auto-split (<code>-a</code>) or what the field delimiter is (<code>-F &#39;\\|&#39;</code>), and you&#39;d need to access <code>$F[0]</code> even if you had done both those. To the extent it filters, your code will read anything up to the first <code>@</code>, the <code>@</code>, and anything except an <code>@</code> or <code>,</code> or <code>&quot;</code> afterwards.  That means it prints the whole line on the example input. If that&#39;s what you see, it is working correctly according to the program you gave it. Maybe <code>perl -la -F&#39;\\|&#39; -e &#39;print $1 if $F[0] =~ &#47;^\\s*([^,#&quot;]+@[^@,&quot;]+?)\\s*$&#47;&#39;</code> is what you&#39;re after.  The <code>&#39;\\|&#39;</code> is necessary; otherwise Perl splits each character."}, {"owner": {"reputation": 237, "user_id": 4991942, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/905abcb6fad9972a27b72013bdff9d95?s=128&d=identicon&r=PG&f=1", "display_name": "technerdius", "link": "https://stackoverflow.com/users/4991942/technerdius"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1445319987, "post_id": 33203205, "comment_id": 54261903, "body": "Thank you @Jonathan Leffler"}, {"owner": {"reputation": 237, "user_id": 4991942, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/905abcb6fad9972a27b72013bdff9d95?s=128&d=identicon&r=PG&f=1", "display_name": "technerdius", "link": "https://stackoverflow.com/users/4991942/technerdius"}, "edited": false, "score": 0, "creation_date": 1446227646, "post_id": 33203205, "comment_id": 54672387, "body": "FYI, I tried this on a csv file and changed the &#39;\\|&#39; to &#39;,&#39; and it did not put anything in the output file. Are there any other things I need to change? Thank you very much!"}], "answers": [{"tags": [], "owner": {"reputation": 237, "user_id": 4991942, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/905abcb6fad9972a27b72013bdff9d95?s=128&d=identicon&r=PG&f=1", "display_name": "technerdius", "link": "https://stackoverflow.com/users/4991942/technerdius"}, "is_accepted": false, "score": 0, "last_activity_date": 1445203728, "creation_date": 1445203728, "answer_id": 33203453, "question_id": 33203205, "link": "https://stackoverflow.com/questions/33203205/extract-all-emails-from-a-file-with-n-delimiter/33203453#33203453", "title": "Extract all emails from a file with \\n delimiter", "body": "<p>I forgot about the cut command:</p>\n\n<p>Input:</p>\n\n<pre><code> cut -d\\| -f1 input &gt; output\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   22012784522fsdjtw5shaqq3w50ttj@fkhvenxh.net\n   20peterl@parishnational.com\n   20amsaafd@snds.com\n   342lhau@cmuvm.csv.cmich.edu\n   2mf41nguolw@5cdu6on7wj.com\n   343qazu@cmuvm.bitnet\n   32ec69db3444001@mhbs.lsil.com\n   2uon4eq@aneti.edu.pl\n   21juniora@attbi.com\n   22sqrbean@midsouth.rr.com\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 0, "last_activity_date": 1445205350, "creation_date": 1445205350, "answer_id": 33203713, "question_id": 33203205, "link": "https://stackoverflow.com/questions/33203205/extract-all-emails-from-a-file-with-n-delimiter/33203713#33203713", "title": "Extract all emails from a file with \\n delimiter", "body": "<p>No need for a regex since you're dealing with a delimited format that makes things nice and simple.</p>\n\n<pre><code>while (&lt;&gt;) {\n    my @fields = split(/\\|/, $_);\n    print \"$fields[0]\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 237, "user_id": 4991942, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/905abcb6fad9972a27b72013bdff9d95?s=128&d=identicon&r=PG&f=1", "display_name": "technerdius", "link": "https://stackoverflow.com/users/4991942/technerdius"}, "edited": false, "score": 0, "creation_date": 1445301249, "post_id": 33204325, "comment_id": 54256723, "body": "Thanks. I&#39;m assuming that works with other delimiters by replacing the ^| with ^, or ^&quot; for example, correct?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 237, "user_id": 4991942, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/905abcb6fad9972a27b72013bdff9d95?s=128&d=identicon&r=PG&f=1", "display_name": "technerdius", "link": "https://stackoverflow.com/users/4991942/technerdius"}, "edited": false, "score": 0, "creation_date": 1445301422, "post_id": 33204325, "comment_id": 54256767, "body": "@technerdius: That&#39;s correct, yes. Although you would have to be careful to escape square brackets"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1445210261, "creation_date": 1445210261, "answer_id": 33204325, "question_id": 33203205, "link": "https://stackoverflow.com/questions/33203205/extract-all-emails-from-a-file-with-n-delimiter/33204325#33204325", "title": "Extract all emails from a file with \\n delimiter", "body": "<p>In one line of Perl:</p>\n\n<pre><code>perl -lne \"print /([^|]+)/\" myfile\n</code></pre>\n\n<p>It works by printing the first sequence of non-pipe characters it find in each line of data</p>\n"}], "owner": {"reputation": 237, "user_id": 4991942, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/905abcb6fad9972a27b72013bdff9d95?s=128&d=identicon&r=PG&f=1", "display_name": "technerdius", "link": "https://stackoverflow.com/users/4991942/technerdius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 33204325, "answer_count": 3, "score": 0, "last_activity_date": 1445210261, "creation_date": 1445202056, "question_id": 33203205, "link": "https://stackoverflow.com/questions/33203205/extract-all-emails-from-a-file-with-n-delimiter", "title": "Extract all emails from a file with \\n delimiter", "body": "<p>I have a file with results of a script as follows:</p>\n\n<pre><code> 22012784522fsdjtw5shaqq3w50ttj@fkhvenxh.net|FAIL|DNS failure: NXDOMAIN|net|fkhvenxh.net|22012784522fsdjtw5shaqq3w50ttj|22012784522fsdjtw5shaqq3w50ttj\n20peterl@parishnational.com|FAIL|DNS timeout|com|parishnational.com|20peterl|20peterl\n20amsaafd@snds.com|FAIL|DNS failure: NOERROR|com|snds.com|20amsaafd|20amsaaf\n.342lhau@cmuvm.csv.cmich.edu|FAIL|DNS failure: NXDOMAIN|edu|cmuvm.csv.cmich.edu|342lhau|342lhau\n2mf41nguolw@5cdu6on7wj.com|FAIL|DNS failure: NXDOMAIN|com|5cdu6on7wj.com|2mf41nguolw|2mf41nguolw\n343qazu@cmuvm.bitnet|FAIL|DNS failure: NXDOMAIN|bitnet|cmuvm.bitnet|343qazu|343qazu\n32ec69db3444001@mhbs.lsil.com|FAIL|DNS failure: NXDOMAIN|com|mhbs.lsil.com|32ec69db3444001|32ec69db3444001\n2uon4eq@aneti.edu.pl|FAIL|DNS failure: NXDOMAIN|pl|aneti.edu.pl|2uon4eq|2uon4eq\n 21juniora@attbi.com|FAIL|DNS failure: NOERROR|com|attbi.com|21juniora|21juniora\n22sqrbean@midsouth.rr.com|FAIL|DNS failure: NXDOMAIN|com|midsouth.rr.com|22sqrbean|22sqrbean\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>  perl -lne 'print $1 if /([^,@\"]+@[^,@\"]+)/' input &gt; output\n</code></pre>\n\n<p>But it did not extract the emails or change anything in the file. </p>\n\n<p>Please help me. Thank you! </p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "edited": false, "score": 0, "creation_date": 1445200225, "post_id": 33202048, "comment_id": 54210540, "body": "In practice one needs this sort of thing only when one does <b>not</b> know until runtime the function that will be called; e.g., when this function is a callback.  <code>getpwuid</code> was just a concrete example to illustrate my point.  Of course, if one knows the function one is calling ahead of time, then the problem of passing arguments to this function in a way that is agnostic its signature becomes an idle academic exercise.  I&#39;ll edit my post to make this clearer."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "reply_to_user": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "edited": false, "score": 1, "creation_date": 1445204049, "post_id": 33202048, "comment_id": 54211772, "body": "Since you must make the decision at runtime, use the <code>prototype</code> function to introspect, or use goto. Easc has its own problems. Goto will never return to the parent sub, just to the original caller. Prototype will fail for some core functions."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 3, "creation_date": 1445209464, "post_id": 33202048, "comment_id": 54213306, "body": "You can just pass <code>@_[0..$#_]</code>, too"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1445209529, "post_id": 33202048, "comment_id": 54213321, "body": "That&#39;s also a nice point, @ysth.  :)  A simple solution with no ugly side-effects."}], "tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": true, "score": 7, "last_activity_date": 1445205612, "last_edit_date": 1445205612, "creation_date": 1445195299, "answer_id": 33202048, "question_id": 33201910, "link": "https://stackoverflow.com/questions/33201910/how-can-a-function-pass-all-the-arguments-it-received-transparently-to-another-f/33202048#33202048", "title": "How can a function pass all the arguments it received transparently to another function?", "body": "<p>The problem you are facing is because <code>getpwuid</code> has a prototype of <code>$</code>, which causes it to interpret its parameter in scalar context.</p>\n\n<p>You can see this from the following one-liner:</p>\n\n<pre><code>perl -e 'print prototype(\"CORE::getpwuid\"), \"\\n\"'\n</code></pre>\n\n<p>...which prints <code>$</code>.</p>\n\n<p>So when you pass <code>@_</code> to <code>getpwuid</code>, you are correct; it's being taken in scalar context and passing a count of how many elements <code>@_</code> contains.</p>\n\n<p>One solution is to use the subroutine form of <code>goto</code>, which calls its operand with the same call stack and parameters that were passed to its caller.</p>\n\n<p>Here's an example in the form of a one-liner:</p>\n\n<pre><code>perl -e 'print getpwuid(5), \"\\n\"; print sub{ getpwuid(@_) }-&gt;(5), \"\\n\"; print sub { goto &amp;CORE::getpwuid }-&gt;(5), \"\\n\";'\n</code></pre>\n\n<p>In this example, the first and third calls will pass '5' to <code>getpwuid</code>, but the second call will pass <code>scalar(@_)</code>, which is <code>1</code> in this case.</p>\n\n<p>Another hackish option would be to detect whether the function you are calling has a prototype using the <code>prototype</code> function, and react accordingly.  But that's problematic. First, you already know you're calling <code>getpwuid</code> -- no need to detect at runtime. And even if you had to detect at runtime for some reason, some <code>CORE::</code> functions will return <code>undef</code> for their prototype because they use one that cannot be expressed in terms of the prototype options available to us (<code>system</code>, for example).</p>\n\n<p>In this specific case since you already know what function you are calling, and already know its prototype, it's probably just easiest to do this:</p>\n\n<pre><code>perl -e 'print sub { getpwuid(shift) }-&gt;(5), \"\\n\";'\n</code></pre>\n\n<p><strong>Update:</strong> Where the subroutine being called isn't known until runtime <code>goto</code> may be a good means. One of the things you have to look out for with <code>goto</code>, however, is that you never return back to the parent sub; the subroutine being gone-to will return directly to the caller of the parent sub.</p>\n\n<p>Another option is to call the target sub with the <code>&amp;</code> prefix and no parameters. This also serves to pass <code>@_</code> through to it, but in a way that bypasses prototypes.  Here's an example:</p>\n\n<pre><code>perl -e 'print sub { &amp;CORE::getpwuid }-&gt;(5)'\n</code></pre>\n\n<p>This will appear similar to the <code>goto</code> approach, but will not tinker with the call stack, and will return back to the parent sub.</p>\n"}], "owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 33202048, "answer_count": 1, "score": 1, "last_activity_date": 1445205612, "creation_date": 1445194434, "last_edit_date": 1445200435, "question_id": 33201910, "link": "https://stackoverflow.com/questions/33201910/how-can-a-function-pass-all-the-arguments-it-received-transparently-to-another-f", "title": "How can a function pass all the arguments it received transparently to another function?", "body": "<p>The title of this post says it all.  The point is that the calling function <code>X</code> should be agnostic about the signature of the called function <code>Y</code>.  IOW, <code>X</code> should just pass to <code>Y</code>, <em>en masse</em>, all the arguments it (<code>X</code>) received, at leave it up to <code>Y</code> to complain if the signature is off.</p>\n\n<hr>\n\n<p>I thought this was just a matter of</p>\n\n<pre><code>sub X {\n  return Y( @_ );\n}\n</code></pre>\n\n<p>...but apparently not:</p>\n\n<pre><code>sub getpwuid_wrapper {\n  return getpwuid( @_ );\n}\n</code></pre>\n\n<p>The wrapper above is doing more than merely wrapping:</p>\n\n<pre><code>  DB&lt;7&gt; p getpwuid( 5 )\ngamesx560games/usr/games/usr/sbin/nologin\n  DB&lt;8&gt; p getpwuid_wrapper( 5 )\ndaemonx11daemon/usr/sbin/usr/sbin/nologin\n</code></pre>\n\n<p>The next bit gives a clue to what may be going on:</p>\n\n<pre><code>  DB&lt;9&gt; p getpwuid( 1 )\ndaemonx11daemon/usr/sbin/usr/sbin/nologin\n</code></pre>\n\n<p>I figure that <code>getpwuid( @_ )</code> is getting interpreted as <code>getpwuid( scalar @_ )</code>, for reasons beyond my comprehension.</p>\n\n<p><strong>NOTE:</strong> <code>getpwuid</code> is just an example to illustrate the problem.  In practice one needs this sort of pass-through functionality primarily when the function that will be called <em>is not known until runtime</em>; e.g. when this function is a callback.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "edited": false, "score": 2, "creation_date": 1445194177, "post_id": 33201742, "comment_id": 54208358, "body": "<code>function_taking_callback(sub { getpwuid(@_) });</code> is shorter."}, {"owner": {"reputation": 4111, "user_id": 23033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b6c69cae4d2061cafe851676f8d262?s=128&d=identicon&r=PG", "display_name": "Dre", "link": "https://stackoverflow.com/users/23033/dre"}, "reply_to_user": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "edited": false, "score": 0, "creation_date": 1445195608, "post_id": 33201742, "comment_id": 54208853, "body": "@Elyse but not equivalent."}, {"owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "edited": false, "score": 1, "creation_date": 1445196599, "post_id": 33201742, "comment_id": 54209252, "body": "Use an anonymous sub as a wrapper.  That way if there is an error, you&#39;ll get a helpful line number in the stacktrace."}, {"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "reply_to_user": {"reputation": 4111, "user_id": 23033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b6c69cae4d2061cafe851676f8d262?s=128&d=identicon&r=PG", "display_name": "Dre", "link": "https://stackoverflow.com/users/23033/dre"}, "edited": false, "score": 0, "creation_date": 1445196952, "post_id": 33201742, "comment_id": 54209379, "body": "@Dre: care to elaborate?"}, {"owner": {"reputation": 4111, "user_id": 23033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b6c69cae4d2061cafe851676f8d262?s=128&d=identicon&r=PG", "display_name": "Dre", "link": "https://stackoverflow.com/users/23033/dre"}, "edited": false, "score": 0, "creation_date": 1445197044, "post_id": 33201742, "comment_id": 54209416, "body": "@kjo You got the answer as to why they&#39;re not equivalent in your other question ( <a href=\"http://stackoverflow.com/questions/33201910/how-can-a-function-pass-all-the-arguments-it-received-transparently-to-another-f\" title=\"how can a function pass all the arguments it received transparently to another f\">stackoverflow.com/questions/33201910/&hellip;</a> )"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 2, "creation_date": 1445199394, "post_id": 33201742, "comment_id": 54210258, "body": "@kjo <code>getpwuid</code> is prototyped, so <code>getpwuid(@_)</code> will pass it the <i>number of elements</i> in <code>@_</code>, not the value(s) in <code>@_</code>."}, {"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1445199697, "post_id": 33201742, "comment_id": 54210347, "body": "@hobbs: sorry, I missed the <code>@_</code> in Elyse&#39;s form; I thought that the non-equivalence that Dre was referring to had to do with the presence/absence of <code>return</code>."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 1, "creation_date": 1445199750, "post_id": 33201742, "comment_id": 54210368, "body": "@kjo nope. You can definitely remove <code>return</code> :)"}], "answers": [{"tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 6, "last_activity_date": 1445193871, "creation_date": 1445193871, "answer_id": 33201815, "question_id": 33201742, "link": "https://stackoverflow.com/questions/33201742/how-to-pass-a-built-in-function-as-a-callback-argument/33201815#33201815", "title": "How to pass a built-in function as a callback argument?", "body": "<p>On Perl 5.16 (2012) and newer, you can reference it as <code>\\&amp;CORE::getpwuid</code> \u2014 see the documentation for <a href=\"http://perldoc.perl.org/CORE.html\">CORE</a>.</p>\n\n<p>On older perls, the <code>CORE::</code> syntax exists, but there isn't an actual sub at <code>CORE::getpwuid</code> to take a reference to, so your sub wrapper is the best way to go.</p>\n"}], "owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 33201815, "answer_count": 1, "score": 3, "last_activity_date": 1445193871, "creation_date": 1445193389, "question_id": 33201742, "link": "https://stackoverflow.com/questions/33201742/how-to-pass-a-built-in-function-as-a-callback-argument", "title": "How to pass a built-in function as a callback argument?", "body": "<p>OK, I know that I can always wrap a built-in function in a <code>sub</code>:</p>\n\n<pre><code>function_taking_callback( sub { return getpwuid( $_[ 0 ] ); } );\n</code></pre>\n\n<p>...but I find it hard to believe that Perl would require this sort of thing.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1445228237, "last_edit_date": 1445228237, "creation_date": 1445227930, "answer_id": 33206503, "question_id": 33201543, "link": "https://stackoverflow.com/questions/33201543/decode-hashmultivalue-inplace-in-perl/33206503#33206503", "title": "Decode Hash::MultiValue inplace in perl", "body": "<p>Sounds like you're asking if you can change the key (i.e. decode it) without removing the original element and reinserting it. If so, the answer is no. For hashes, a mathematical function (the hashing function) converts the key into an index. Changing the key can change the index, so changing the key requires moving the value from the old index to the new index, so changing the key requires removal and reinsertion of the value.</p>\n"}], "owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 33206503, "answer_count": 1, "score": 1, "last_activity_date": 1445228237, "creation_date": 1445192219, "last_edit_date": 1445192562, "question_id": 33201543, "link": "https://stackoverflow.com/questions/33201543/decode-hashmultivalue-inplace-in-perl", "title": "Decode Hash::MultiValue inplace in perl", "body": "<p>Having an <a href=\"https://metacpan.org/pod/Hash::MultiValue\" rel=\"nofollow\">Hash::MultiValue</a> object. The <code>keys</code> and <code>values</code> could be utf8 encoded byte-strings. Need decode them <em>inplace</em>.</p>\n\n<p>The following does what I want:</p>\n\n<pre><code>use 5.014;\nuse warnings;\nuse Hash::MultiValue;\nuse Encode;\n\nmy $hm = make_demo_data(); # the $hm is Hash::MultiValue\n                           # the keys and values are utf8 encoded byte-strings\n$hm-&gt;each(sub { print \"$_[0]: $_[1]\\n\" });\n\ndecodehm($hm); #decode the $hm inplace\n\nsay \"--decoded--\";    \nbinmode(STDOUT, ':utf8');\n$hm-&gt;each(sub { print \"$_[0]: $_[1]\\n\" });\n\nsub decodehm {\n    my $hm = shift;\n    #make copy - but decoded\n    my $new = Hash::MultiValue-&gt;new( map Encode::decode_utf8($_), $hm-&gt;flatten );\n    $hm-&gt;clear; #clear the original\n    $new-&gt;each( sub { $hm-&gt;add($_[0], $_[1]) });    #set each element in the original $hm\n}\n\nsub make_demo_data { #utf8 encoded byte-strings\n    return Hash::MultiValue-&gt;new(\n        \"k1\\x{c3}\\x{a1}\" =&gt; \"v1a\\x{c3}\\x{a1}\",\n        \"k1\\x{c3}\\x{a1}\" =&gt; \"v1b\\x{c3}\\x{a1}\",\n        \"k2a\" =&gt; \"v2aa\",\n        \"k3\\x{c3}\\x{a1}\" =&gt; \"v3a\\x{c3}\\x{a1}\",\n    );\n}\n</code></pre>\n\n<p>eg. on the utf8 terminal prints the wanted result</p>\n\n<pre><code>k1\u00e1: v1a\u00e1\nk1\u00e1: v1b\u00e1\nk2a: v2aa\nk3\u00e1: v3a\u00e1\n--decoded--\nk1\u00e1: v1a\u00e1\nk1\u00e1: v1b\u00e1\nk2a: v2aa\nk3\u00e1: v3a\u00e1\n</code></pre>\n\n<p>but the sub <code>decodehm</code> - isn't \"nice\". Is possible solve the problem in more \"elegant\" form?</p>\n"}, {"tags": ["windows", "perl", "sockets"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445185729, "post_id": 33199699, "comment_id": 54205396, "body": "<code>select</code> (used by <code>can_read</code>) works fine with sockets on Windows. If fact, that&#39;s the only type of handles on which it works in Windows"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445185860, "post_id": 33199699, "comment_id": 54205434, "body": "Might want to add <code>$| = 1;</code> if you&#39;re going to print partial lines"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445189861, "post_id": 33199699, "comment_id": 54206820, "body": "might try adding a line feed after your print - it might just be not printing your output."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1445270809, "last_edit_date": 1445270809, "creation_date": 1445224717, "answer_id": 33206116, "question_id": 33199699, "link": "https://stackoverflow.com/questions/33199699/how-can-i-deteremine-if-id-read-something-from-a-socket/33206116#33206116", "title": "How can I deteremine if I&#39;d read something from a socket?", "body": "<p>When using <code>select</code> (used by <code>can_read</code>), it defies the purpose to follow up with blocking IO. You must also avoid buffering IO because the system (i.e. <code>select</code>) doesn't know about any data in your library's buffers. This means you can't mix <code>select</code> with <code>read</code>, <code>readline</code> (aka <code>&lt;&gt;</code> and <code>&lt;$fh&gt;</code>) and <code>eof</code>. You must use <code>sysread</code>.</p>\n\n<pre><code>my %clients;\nfor my $fh ($select-&gt;can_read()) {\n   my $client = $clients{$fh} //= {};\n   our $buf; local *buf = $client-&gt;{buf} //= '';   # alias my $buf = $client-&gt;{buf};\n   my $rv = sysread($sock, $buf, 64*1024, length($buf));\n   if (!defined($rv)) {\n      my $error = $!;\n      $select-&gt;remove($fh);\n      delete($clients{$fh});\n      # ... Handle error ...\n      next;\n   }\n\n   if (!$rv) {\n      $select-&gt;remove($fh);\n      delete($clients{$fh});\n      # ... Handle EOF ...         # Don't forget to check if there's anything in $buf.\n      next;\n   }\n\n   ... remove any complete messages from $buf and handle them ...\n}\n</code></pre>\n\n<p>If you want to read a line at a time, you'd use</p>\n\n<pre><code>while ($buf =~ s/^([^\\n]*)\\n//) {\n   process_msg($client, $1);\n}\n</code></pre>\n"}], "owner": {"reputation": 35370, "user_id": 180275, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4GALY.jpg?s=128&g=1", "display_name": "Ren&#233; Nyffenegger", "link": "https://stackoverflow.com/users/180275/ren%c3%a9-nyffenegger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 33206116, "answer_count": 1, "score": 0, "last_activity_date": 1445270809, "creation_date": 1445181855, "question_id": 33199699, "link": "https://stackoverflow.com/questions/33199699/how-can-i-deteremine-if-id-read-something-from-a-socket", "title": "How can I deteremine if I&#39;d read something from a socket?", "body": "<p>The following piece of code is supposed to read a few, undetermined in number, lines from a socket. </p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse IO::Socket::INET;\n\nmy $server = shift;\nmy $port   = shift;\n\nmy $sock  = new IO::Socket::INET (\n               PeerAddr    =&gt; $server,\n               PeerPort    =&gt; $port,\n               Proto       =&gt; 'tcp',\n               Timeout     =&gt;  1,\n               Blocking    =&gt;  0\n           ) \n           or die \"Could not connect\";\n\nwhile (my $in = &lt;$sock&gt;) {\n  print \"$in\";\n}\n\nprint \"Received last line\\n\";\n</code></pre>\n\n<p>Unfortunately, the <code>$in = &lt;$sock&gt;</code> part is blocking although I have set <code>Blocking =&gt; 0</code> and the server does not send any more text. Hence, <code>Received last line</code> won't be printed.</p>\n\n<p>So, I tried to improve the behavior with <code>use IO::Select</code>:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse IO::Socket::INET;\nuse IO::Select;\n\nmy $server = shift;\nmy $port   = shift;\n\nmy $sock  = new IO::Socket::INET (\n               PeerAddr    =&gt; $server,\n               PeerPort    =&gt; $port,\n               Proto       =&gt; 'tcp',\n               Timeout     =&gt;  1,\n               Blocking    =&gt;  1\n           ) \n           or die \"Could not connect\";\n\nmy $select = new IO::Select;\n$select -&gt; add($sock);\n\nsleep 1;\nwhile ($select -&gt; can_read) {\n  my $in = &lt;$sock&gt;;\n  print $in;\n}\n</code></pre>\n\n<p>This second approach only prints the first sent line, then seems to block for ever.</p>\n\n<p>Since I have seen such examples working, I believe the problem is Windows, on which I am trying to run these scripts.</p>\n\n<p>Is there a way how I can achieve a non blocking read?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1445165405, "post_id": 33196968, "comment_id": 54199270, "body": "Could you please add more info in the context of the question? How to use it with <code>Email::Sender::Transport::SMTPS</code>? (seems like the <code>Email::Sender::Transport::SMTPS</code> doesn&#39;t accepts the <code>SSL_verify_mod =&gt; &#39;SSL_VERIFY_NONE&#39;</code>."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1445167274, "post_id": 33196968, "comment_id": 54199792, "body": "That would not trusting the certificate but disabling any kind of validation and thus implicitly trusting anything."}, {"owner": {"reputation": 1057, "user_id": 993553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/663cafef8493817f8f918e6d54c0462e?s=128&d=identicon&r=PG", "display_name": "user993553", "link": "https://stackoverflow.com/users/993553/user993553"}, "edited": false, "score": 0, "creation_date": 1445168497, "post_id": 33196968, "comment_id": 54200104, "body": "You can copy the cert to you trusted store on the client."}], "tags": [], "owner": {"reputation": 1057, "user_id": 993553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/663cafef8493817f8f918e6d54c0462e?s=128&d=identicon&r=PG", "display_name": "user993553", "link": "https://stackoverflow.com/users/993553/user993553"}, "is_accepted": false, "score": 0, "last_activity_date": 1445169898, "last_edit_date": 1445169898, "creation_date": 1445164764, "answer_id": 33196968, "question_id": 33196891, "link": "https://stackoverflow.com/questions/33196891/trust-self-signed-certificate-for-emailsendertransportsmtps-in-perl/33196968#33196968", "title": "Trust self-signed certificate for Email::Sender::Transport::SMTPS in perl", "body": "<p>You can control the SSL usage with the options of new() constructor method</p>\n\n<pre><code>\"SSL_verify_mode\"=&gt;'SSL_VERIFY_NONE'\n</code></pre>\n\n<p>IN Email/Sender/Transport/SMTPS.pm</p>\n\n<pre><code>  # compatible\n  my $ssl = $self-&gt;ssl;\n  $ssl = 'ssl' if $self-&gt;ssl and $self-&gt;ssl ne 'starttls';\n\n  return (\n    $self-&gt;host,\n    Port    =&gt; $self-&gt;port,\n    Timeout =&gt; $self-&gt;timeout,\n    defined $ssl             ? (doSSL     =&gt; $ssl)             : (),\n    defined $self-&gt;helo      ? (Hello     =&gt; $self-&gt;helo)      : (),\n    defined $self-&gt;localaddr ? (LocalAddr =&gt; $self-&gt;localaddr) : (),\n    defined $self-&gt;localport ? (LocalPort =&gt; $self-&gt;localport) : (),\n    defined $self-&gt;debug     ? (Debug     =&gt; $self-&gt;debug) : (),\n    \"SSL_verify_mode\"=&gt;'SSL_VERIFY_NONE',#ADDED LINE\n  );\n</code></pre>\n\n<p>EDIT: This is really bad, because as per comments you trust everything. Instead if on linux/*nix </p>\n\n<pre><code>  cat tobetrusted.crt &gt;&gt; /etc/ssl/cert.pem \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1445171798, "post_id": 33197496, "comment_id": 54200968, "body": "The <code>set_args_filter_hack</code> method <code>just works</code>. :) Easy to implement and allows only specific fingerprint. Thank you."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1445168184, "last_edit_date": 1592644375, "creation_date": 1445168184, "answer_id": 33197496, "question_id": 33196891, "link": "https://stackoverflow.com/questions/33196891/trust-self-signed-certificate-for-emailsendertransportsmtps-in-perl/33197496#33197496", "title": "Trust self-signed certificate for Email::Sender::Transport::SMTPS in perl", "body": "<p>There is no direct way to give  Email::Sender::Transport::SMTPS SSL specific arguments. But, since ultimately <a href=\"https://metacpan.org/pod/IO::Socket::SSL\" rel=\"nofollow noreferrer\">IO:Socket::SSL</a> is used you can hack your way around this limitation. From the man page:</p>\n<blockquote>\n<p>This is a list of typical errors seen with the use of IO::Socket::SSL:. ....</p>\n<ul>\n<li><p>Make SSL settings inacessible by the user, together with bad builtin settings.</p>\n<p>Some modules use IO::Socket::SSL, but don't make the SSL settings available to the user. This is often combined with bad builtin settings or defaults (like switching verification off). Thus the user needs to hack around these restrictions by using set_args_filter_hack or similar.</p>\n</li>\n</ul>\n</blockquote>\n<p>Thus what you could do is</p>\n<pre><code>IO::Socket::SSL::set_args_filter_hack( sub {\n    my ($is_server,$args) = @_;\n    $args-&gt;{SSL_fingerprint} = 'sha1$437104....'\n});\n</code></pre>\n<p>With this option you could make certificate pinning trust a certificate as long as it's fingerprint matches the given one. You can get the fingerprint for instance with:</p>\n<pre><code>openssl s_client -connect mail.example.org:25 -starttls smtp  |\\\n openssl x509 -fingerprint -noout\n</code></pre>\n<p>Alternative ways would be to use the certificate as trusted with the <code>SSL_ca_file</code> option. You could also set <code>SSL_verify_mode</code> to 0 (<code>SSL_VERFY_NONE</code>) but since this disables any kind of validation you should only use this for testing.</p>\n<p>Please note that <code>set_args_filter_hack</code> is global, that is it affects all IO::Socket::SSL objects in your program. Thus depending on the program you should only set it directly before you establish the connection with Email::Sender::Transport::SMTPS and reset it immediately afterwards.</p>\n<p>For more information about these options please read the <a href=\"https://metacpan.org/pod/IO::Socket::SSL\" rel=\"nofollow noreferrer\">documentation of IO::Socket::SSL</a>.</p>\n"}], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1143, "favorite_count": 0, "accepted_answer_id": 33197496, "answer_count": 2, "score": 1, "last_activity_date": 1445169898, "creation_date": 1445164318, "question_id": 33196891, "link": "https://stackoverflow.com/questions/33196891/trust-self-signed-certificate-for-emailsendertransportsmtps-in-perl", "title": "Trust self-signed certificate for Email::Sender::Transport::SMTPS in perl", "body": "<p>Trying to use <a href=\"https://metacpan.org/pod/Email::Sender::Transport::SMTPS\" rel=\"nofollow\">Email::Sender::Transport::SMTPS</a> for sending email. My transport is:</p>\n\n<pre><code>    my $transport = Email::Sender::Transport::SMTPS-&gt;new({\n            host =&gt; $smtpserver,\n            ssl =&gt; 'starttls',\n            sasl_username =&gt; $smtpuser,\n            sasl_password =&gt; $smtppassword,\n            debug =&gt; 1,\n    });\n</code></pre>\n\n<p>When trying send the email, the debug says:</p>\n\n<pre><code>Net::SMTPS=GLOB(0x7f893b2b00f0)&lt;&lt;&lt; 250-SIZE 52428800\nNet::SMTPS=GLOB(0x7f893b2b00f0)&lt;&lt;&lt; 250-8BITMIME\nNet::SMTPS=GLOB(0x7f893b2b00f0)&lt;&lt;&lt; 250-PIPELINING\nNet::SMTPS=GLOB(0x7f893b2b00f0)&lt;&lt;&lt; 250-STARTTLS\nNet::SMTPS=GLOB(0x7f893b2b00f0)&lt;&lt;&lt; 250 HELP\nNet::SMTPS=GLOB(0x7f893b2b00f0)&gt;&gt;&gt; STARTTLS\nNet::SMTPS=GLOB(0x7f893b2b00f0)&lt;&lt;&lt; 220 TLS go ahead\nDEBUG: .../IO/Socket/SSL.pm:735: local error: SSL connect attempt failed error:14090086:SSL routines:ssl3_get_server_certificate:certificate verify failed\nDEBUG: .../IO/Socket/SSL.pm:738: fatal SSL error: SSL connect attempt failed error:14090086:SSL routines:ssl3_get_server_certificate:certificate verify failed\nunable to establish SMTP connection\n</code></pre>\n\n<p>Probably because the server using <code>self-signed</code> certificate. (When using the same setting in the Thunderbird it is needed to add the \"trust this certificate\" setting.)</p>\n\n<p>The question is: How to add the \"trust this certificate\" for the <code>Email::Sender::Transport::SMTPS</code> - thus allow sending email.</p>\n"}, {"tags": ["bash", "perl", "shell"], "comments": [{"owner": {"reputation": 1395, "user_id": 252489, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f5f3c9e216adc1a98897f99ec581853a?s=128&d=identicon&r=PG", "display_name": "Gowtham", "link": "https://stackoverflow.com/users/252489/gowtham"}, "edited": false, "score": 0, "creation_date": 1445153987, "post_id": 33195428, "comment_id": 54196289, "body": "bash&#39;s <a href=\"http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_08_02.html\" rel=\"nofollow noreferrer\">read</a> built-in may help."}, {"owner": {"reputation": 411, "user_id": 5458950, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fb2b553cce267f4db596aef25327f61c?s=128&d=identicon&r=PG", "display_name": "Chaos", "link": "https://stackoverflow.com/users/5458950/chaos"}, "reply_to_user": {"reputation": 1395, "user_id": 252489, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f5f3c9e216adc1a98897f99ec581853a?s=128&d=identicon&r=PG", "display_name": "Gowtham", "link": "https://stackoverflow.com/users/252489/gowtham"}, "edited": false, "score": 0, "creation_date": 1445154303, "post_id": 33195428, "comment_id": 54196363, "body": "@Gowtham Thanks, I&#39;m not very familiar with bash as well, I mostly based my code from some examples I have read about. I&#39;m not really sure how I would go about implementing read"}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1445154947, "post_id": 33195428, "comment_id": 54196497, "body": "<code>wget -O file http:&#47;&#47;www.example.com&#47;file</code>?"}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1445159452, "post_id": 33195428, "comment_id": 54197646, "body": "If you want to get rid of <code>nc</code>, take a look at: <a href=\"http://unix.stackexchange.com/a/83927/74329\">how to download a file using just bash and nothing else (no curl, wget, perl, etc.)</a>"}, {"owner": {"reputation": 411, "user_id": 5458950, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fb2b553cce267f4db596aef25327f61c?s=128&d=identicon&r=PG", "display_name": "Chaos", "link": "https://stackoverflow.com/users/5458950/chaos"}, "reply_to_user": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1445180849, "post_id": 33195428, "comment_id": 54203797, "body": "@Cyrus thanks, anyway that could be one line?"}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1445181777, "post_id": 33195428, "comment_id": 54204100, "body": "Sorry, I don&#39;t know."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445190153, "post_id": 33195428, "comment_id": 54206938, "body": "Or you could do it all in <code>perl</code> which is ubiquitous. (And this is probably doable entirely with <code>curl</code> or <code>wget</code>."}], "answers": [{"comments": [{"owner": {"reputation": 411, "user_id": 5458950, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fb2b553cce267f4db596aef25327f61c?s=128&d=identicon&r=PG", "display_name": "Chaos", "link": "https://stackoverflow.com/users/5458950/chaos"}, "edited": false, "score": 0, "creation_date": 1445156337, "post_id": 33195603, "comment_id": 54196846, "body": "If I wanted to edit this command down even further to be just using shell/bash would there be anything I could use to replace nc as not all systems may have it installed? Thank you for you comment btw, this answers my question I am just asking for a bit more information."}, {"owner": {"reputation": 109227, "user_id": 641955, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/Hg2nO.jpg?s=128&g=1", "display_name": "janos", "link": "https://stackoverflow.com/users/641955/janos"}, "reply_to_user": {"reputation": 411, "user_id": 5458950, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fb2b553cce267f4db596aef25327f61c?s=128&d=identicon&r=PG", "display_name": "Chaos", "link": "https://stackoverflow.com/users/5458950/chaos"}, "edited": false, "score": 0, "creation_date": 1445156647, "post_id": 33195603, "comment_id": 54196947, "body": "Erm... Yes... On closer look, as @Cyrus pointed out, looks like you can simply replace all that with a simple <code>curl</code> or <code>wget</code>... See my update at the end"}, {"owner": {"reputation": 411, "user_id": 5458950, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fb2b553cce267f4db596aef25327f61c?s=128&d=identicon&r=PG", "display_name": "Chaos", "link": "https://stackoverflow.com/users/5458950/chaos"}, "edited": false, "score": 0, "creation_date": 1445156703, "post_id": 33195603, "comment_id": 54196965, "body": "the point of this is to not use packages that might not be included in some systems like wget or curl. @janos"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445156846, "post_id": 33195603, "comment_id": 54197005, "body": "<code>curl</code> and <code>wget</code> will also handle chunked responses, which aren&#39;t uncommon. (They&#39;ll also handle compressed responses, but you&#39;re unlikely to encounter one of those without requesting it.)"}], "tags": [], "owner": {"reputation": 109227, "user_id": 641955, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/Hg2nO.jpg?s=128&g=1", "display_name": "janos", "link": "https://stackoverflow.com/users/641955/janos"}, "is_accepted": true, "score": 4, "last_activity_date": 1445156580, "last_edit_date": 1495540719, "creation_date": 1445154992, "answer_id": 33195603, "question_id": 33195428, "link": "https://stackoverflow.com/questions/33195428/changing-a-perl-while-loop-to-shell/33195603#33195603", "title": "Changing a perl while loop to shell", "body": "<p>What does this do?</p>\n\n<blockquote>\n<pre><code>perl -pe 'BEGIN { while (&lt;&gt;) { last if $_ eq \"\\r\\n\"; } }'\n</code></pre>\n</blockquote>\n\n<p>It removes everything at the beginning until a line that contains only <code>\\r\\n</code>. This Sed will do the same:</p>\n\n<pre><code>sed -e '1,/^'$'\\r''$/d'\n</code></pre>\n\n<p>What this does, it deletes the range from the first line until the line that contains a <code>\\r</code> (the <code>\\n</code> is not part of the line in Sed).</p>\n\n<p>If the input had UNIX style line endings it could be a lot simpler:</p>\n\n<pre><code>sed -e '1,/^$/d'\n</code></pre>\n\n<h3>Changing a perl while loop to shell</h3>\n\n<p>If you mean changing that Perl to pure Bash,\nwithout even Sed or Awk, here's one way to do it:</p>\n\n<pre><code>strip_until_first_blank() {\n    seen_blank=\n    while read line; do\n        if [ \"$seen_blank\" ]; then\n            echo $line\n        elif ! [ \"$line\" ]; then\n            seen_blank=1\n        fi\n    done\n}\n</code></pre>\n\n<p>You can replace the Perl command in the pipeline with <code>strip_until_first_blank</code>.</p>\n\n<p>You <em>could</em> also write that on a single line, but it will be hard to read:</p>\n\n<pre><code>{ seen_blank=; while read line; do if [ \"$seen_blank\" ]; then echo $line; elif ! [ \"$line\" ]; then seen_blank=1; fi; done; }\n</code></pre>\n\n<h3>... or use <code>curl</code> or <code>wget</code> ...</h3>\n\n<p>As <a href=\"https://stackoverflow.com/users/3776858/cyrus\">@Cyrus</a> pointed out in a comment,\nyou can actually replace the entire pipeline with <code>curl</code> or <code>wget</code>:</p>\n\n<pre><code>wget -O file http://www.example.com/file\ncurl -o file http://www.example.com/file\n</code></pre>\n"}], "owner": {"reputation": 411, "user_id": 5458950, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fb2b553cce267f4db596aef25327f61c?s=128&d=identicon&r=PG", "display_name": "Chaos", "link": "https://stackoverflow.com/users/5458950/chaos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 2, "accepted_answer_id": 33195603, "answer_count": 1, "score": 2, "last_activity_date": 1445156580, "creation_date": 1445153469, "last_edit_date": 1445153941, "question_id": 33195428, "link": "https://stackoverflow.com/questions/33195428/changing-a-perl-while-loop-to-shell", "title": "Changing a perl while loop to shell", "body": "<p>I'm not very familiar with shell and have the following perl script inside a bash file to run to get a file from my webserver:</p>\n\n<pre><code>perl -pe 'BEGIN { while (&lt;&gt;) { last if $_ eq \"\\r\\n\"; } }'\n</code></pre>\n\n<p>Is there a way to change this over to shell so that I may become independent of having perl?</p>\n\n<p>Here is the full script example:</p>\n\n<pre><code>echo -ne \"GET /file HTTP/1.0\\r\\nHost: www.example.com\\r\\n\\r\\n\" | nc www.example.com 80 | perl -pe 'BEGIN { while (&lt;&gt;) { last if $_ eq \"\\r\\n\"; } }' &gt; file\n</code></pre>\n\n<p>Thanks for any help you have to offer.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1057, "user_id": 993553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/663cafef8493817f8f918e6d54c0462e?s=128&d=identicon&r=PG", "display_name": "user993553", "link": "https://stackoverflow.com/users/993553/user993553"}, "edited": false, "score": 1, "creation_date": 1445146448, "post_id": 33194618, "comment_id": 54194801, "body": "Do you know Net::Ping <a href=\"http://perldoc.perl.org/Net/Ping.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/Net/Ping.html</a>, i do not know if it has hires timeouts but it has timeouts.."}, {"owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "reply_to_user": {"reputation": 1057, "user_id": 993553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/663cafef8493817f8f918e6d54c0462e?s=128&d=identicon&r=PG", "display_name": "user993553", "link": "https://stackoverflow.com/users/993553/user993553"}, "edited": false, "score": 0, "creation_date": 1445147104, "post_id": 33194618, "comment_id": 54194922, "body": "I did not. Thanks. It does still look like if I want to do multiple pings in parallel or concurrently using this module, I&#39;d have to use multiple processes."}, {"owner": {"reputation": 18565, "user_id": 10593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3eeb7653c4df9b0f1332b9b0ec201ec?s=128&d=identicon&r=PG", "display_name": "Max Lybbert", "link": "https://stackoverflow.com/users/10593/max-lybbert"}, "edited": false, "score": 0, "creation_date": 1445148622, "post_id": 33194618, "comment_id": 54195166, "body": "You can call <code>select</code> ( select-RBITS,WBITS,EBITS,TIMEOUT ) or <code>IO::Select</code> ( <a href=\"http://perldoc.perl.org/IO/Select.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/IO/Select.html</a> ).  To get the fastest k responses, call it in a loop and keep track of how many responses you&#39;ve gotten each time through."}, {"owner": {"reputation": 1671, "user_id": 4600983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d236a59e7d7e6871716bc25752dae6?s=128&d=identicon&r=PG&f=1", "display_name": "svsd", "link": "https://stackoverflow.com/users/4600983/svsd"}, "edited": false, "score": 1, "creation_date": 1445152357, "post_id": 33194618, "comment_id": 54195901, "body": "Using <code>Net::Ping</code> with threads or <code>Parallel::ForkManager</code> would work well actually."}, {"owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "reply_to_user": {"reputation": 18565, "user_id": 10593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3eeb7653c4df9b0f1332b9b0ec201ec?s=128&d=identicon&r=PG", "display_name": "Max Lybbert", "link": "https://stackoverflow.com/users/10593/max-lybbert"}, "edited": false, "score": 0, "creation_date": 1445185279, "post_id": 33194618, "comment_id": 54205237, "body": "@MaxLybbert how do you keep track of which handle is which when using IO::Select? In the original example I am relying on each handles position in the array to identify which host the output is associated with. Edit: Evidently I can just use a refhash."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445190741, "post_id": 33194618, "comment_id": 54207141, "body": "I&#39;d be thinking using <code>Parallel::ForkManager</code> and just bail out when you&#39;ve found the 5 you want."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1445192075, "last_edit_date": 1445192075, "creation_date": 1445191743, "answer_id": 33201441, "question_id": 33194618, "link": "https://stackoverflow.com/questions/33194618/perl-attempt-to-read-line-from-filehandle-without-blocking/33201441#33201441", "title": "Perl attempt to read line from filehandle without blocking", "body": "<p>I think I might tackle your problem a bit like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $wait_for = 3; #wait for first 3\nmy @host_list = qw ( server1 server2 server3 server4 ); \n\nmy %host_for; \n\nforeach my $host ( @host_list ) {\n   my $pid = fork; \n   if ( $pid ) { \n       $host_for{$pid} = $host;\n   } \n   else {\n       my $result = `ping -w 1 -c 5 $host`; \n       last; #so we don't fork bomb \n   }\n}\n\nfor ( 1..$wait_for ) {\n   my $return_pid  = waitpid ( -1, 0 );\n   print \"Process $return_pid for $host_for{$return_pid} returned\\n\"; \n}\n\n$SIG{'CHLD'} = 'IGNORE'; #we no longer care about return codes of any still running forks. \n</code></pre>\n\n<p>There's probably a bit of optimisation there still - I suspect you can use an <code>exec</code> to reduce process overhead when forked, rather than using backticks. \n(or Net::Ping)</p>\n\n<p>But the idea is hopefully clear - fork a bunch of times, reap N forks, and then match their pids up with a hash to do your IPC, rather than having to worry about passing back return codes. Although you should probably check the return code of the fork, just to make sure the ping didn't fail entirely. </p>\n\n<p>Waitpid will give you $? which will allow you to test success. </p>\n"}], "owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 33201441, "answer_count": 1, "score": 1, "last_activity_date": 1445192075, "creation_date": 1445145837, "question_id": 33194618, "link": "https://stackoverflow.com/questions/33194618/perl-attempt-to-read-line-from-filehandle-without-blocking", "title": "Perl attempt to read line from filehandle without blocking", "body": "<p>I am writing a simple utility that tests the round trip time to a few hosts and picks the one that's fastest on average. However, doing this serially instead of in parallel takes a while, so I am spawning one ping process per host and reading from them. For my use case the <code>scalar &lt;$fh&gt;</code> operation which blocks until the line is read is good enough, since I can't avoid waiting until the slowest host times out. But if I want to get just the fastest <em>k</em> hosts and don't care about the rest this is a bad approach. Is there a way to attempt to read a complete line with a certain time limit, and fail without consuming any bytes if the time limit passes?</p>\n\n<pre><code>use strict;\nuse warnings FATAL =&gt; 'all';\n\n# generate command to get average \n# round trip length to hostname.\n# we know in advance that each command only\n# emits one line\nsub command {\n    my $host = shift;\n    qq(ping -w 1 -c 5 '$host' |) . \n    q(tail -n 1 |) .\n    q(sed 's/^.*= //;s/ ms//' |) .\n    q(awk -F '/' 'END {print $2}');\n}\n\n# launch each ping in its own process and create\n# a filehandle that reads from it\nsub filehandles {\n    my @handles;\n    for my $command (@_) {\n        open my $fh, '-|', $command or\n        die \"cannot open file ($!) associated with $command\";\n    push @handles, $fh;\n    }\n    @handles;\n}\n\nmy @commands = map command($_), qw[google.com cnn.com wikipedia.org];\nmy @fhs = filehandles(@commands);\n\n# read line from each of the ping processes sequentially\nfor my $fh (@fhs) {\n    my $line = scalar &lt;$fh&gt;;\n    chomp $line;\n    printf \"%s\\n\", $line || '+INF';\n}\n</code></pre>\n"}, {"tags": ["perl", "download", "fetch"], "comments": [{"owner": {"reputation": 1858, "user_id": 4799193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a87fb12a6ad909323fb42a48e78b3f28?s=128&d=identicon&r=PG&f=1", "display_name": "ramana_k", "link": "https://stackoverflow.com/users/4799193/ramana-k"}, "edited": false, "score": 1, "creation_date": 1445138512, "post_id": 33193888, "comment_id": 54193593, "body": "This particular url seem to work with http as well as https. That may be used as work around."}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 1, "last_activity_date": 1445138242, "creation_date": 1445138242, "answer_id": 33193941, "question_id": 33193888, "link": "https://stackoverflow.com/questions/33193888/deciphering-filefetch-error/33193941#33193941", "title": "Deciphering File::Fetch error", "body": "<p>Going into <code>File::Fetch::fetch()</code> with the debugger, the problem is File::Fetch failed to find a way to deal with the <code>https</code> scheme. It appears to have <a href=\"https://metacpan.org/pod/File::Fetch#HOW-IT-WORKS\" rel=\"nofollow\">no support for <code>https</code></a>. It correctly returned false, but it did not populate its error field.</p>\n\n<p>You are correct in assuming it should consider missing a scheme an error. You can <a href=\"https://rt.cpan.org/Public/Dist/Display.html?Name=File-Fetch\" rel=\"nofollow\">report a bug here</a>.</p>\n"}], "owner": {"reputation": 5328, "user_id": 1305947, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/660bcd99a216234e04adb27125cbf0a3?s=128&d=identicon&r=PG", "display_name": "Joel G Mathew", "link": "https://stackoverflow.com/users/1305947/joel-g-mathew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 33193941, "answer_count": 1, "score": 1, "last_activity_date": 1445138242, "creation_date": 1445137621, "question_id": 33193888, "link": "https://stackoverflow.com/questions/33193888/deciphering-filefetch-error", "title": "Deciphering File::Fetch error", "body": "<p>I was trying to use File::Fetch in a simple script to download a file. Unfortunately, it errors out and I can't seem to find why.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse File::Fetch;\nmy $url = 'https://ftp.mozilla.org/pub/firefox/releases/42.0b7/linux-i686/en-US/firefox-42.0b7.tar.bz2';\nmy $ff = File::Fetch-&gt;new(uri =&gt; $url);\nmy $where = $ff-&gt;fetch( to =&gt; '/tmp' ) or die $ff-&gt;error;\nprint \"Downloaded to \".$where.\"\\n\";\n</code></pre>\n\n<p>At execution:</p>\n\n<pre><code>#./filefetch.pl\nUse of uninitialized value in die at ./filefetch.pl line 12.\nDied at ./filefetch.pl line 12.\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 0, "creation_date": 1445120836, "post_id": 33192162, "comment_id": 54190269, "body": "If you know the index you want to split on, you shouldn&#39;t have to mess about with the length of the string.  <code>substr($foo, 0, $index), substr($foo, $index)</code> would get you the first <code>$index</code> characters and the remainder."}], "answers": [{"tags": [], "owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "is_accepted": false, "score": 0, "last_activity_date": 1445120723, "creation_date": 1445120723, "answer_id": 33192235, "question_id": 33192162, "link": "https://stackoverflow.com/questions/33192162/perl-split-string-at-exact-index/33192235#33192235", "title": "perl: split string at exact index", "body": "<p>I'd recommend using <code>substr</code>.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $string = 'abcde';\n\nmy $element1 = $string;\nmy $element0 = substr $element1, 0, 2, '';\n\nuse Data::Dump;\n\ndd($element0, $element1);\n</code></pre>\n\n<p>However, you can use a regex:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $string = 'abcde';\n\nmy @array = $string =~ /(.{2})(.*)/s or die \"failed to match, booo\";\n\nuse Data::Dump;\n\ndd @array;\n</code></pre>\n\n<p>Or use <code>split</code>:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $string = 'abcde';\n\nmy @array = split /(?&lt;=.{2})/s, $string, 2;\n\nuse Data::Dump;\n\ndd @array;\n</code></pre>\n\n<p>All techniques output:</p>\n\n<pre><code>(\"ab\", \"cde\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1445126031, "creation_date": 1445126031, "answer_id": 33192844, "question_id": 33192162, "link": "https://stackoverflow.com/questions/33192162/perl-split-string-at-exact-index/33192844#33192844", "title": "perl: split string at exact index", "body": "<p>Since you seem to always want both parts of the string, and since your idea of a character position is one off from the Perl standard, it seems best to wrap this in a subroutine</p>\n\n<p>Here are two methods, using <code>substr</code> and <code>unpack</code>. The former is probably clearer, but the latter may be a little faster if you're interested in speed. But in that case you should benchmark them and avoid copying the string from the stack</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nsay join ' ', map \"{$_}\", split_at('abcde', 1);\nsay join ' ', map \"{$_}\", split_at_2('abcde', 1);\n\n\nsub split_at {\n    my ($str, $n) = @_;\n    ++$n;\n    substr($str, 0, $n), substr($str, $n);\n}\n\nsub split_at_2 {\n    my ($str, $n) = @_;\n    ++$n;\n    unpack \"A$n A*\", $str;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>{ab} {cde}\n{ab} {cde}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40406, "user_id": 459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db193fbf6f0929c49dd9704698204ff?s=128&d=identicon&r=PG", "display_name": "dlamblin", "link": "https://stackoverflow.com/users/459/dlamblin"}, "is_accepted": false, "score": 0, "last_activity_date": 1445127104, "creation_date": 1445127104, "answer_id": 33192975, "question_id": 33192162, "link": "https://stackoverflow.com/questions/33192162/perl-split-string-at-exact-index/33192975#33192975", "title": "perl: split string at exact index", "body": "<p>I'm not sure how split <code>'abcde'</code> at index 1 means <code>('ab','cde')</code> instead of <code>('a','bcde')</code>. Here's something that does it:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse v5.22;\nuse feature qw(signatures);\nno warnings qw(experimental::signatures);\n\nsub split_ind($str, $i) {\n  my $x = $i + 1;\n  return (substr($str, 0, $x), substr($str, $x));\n}\n\nmy $in = \"abcde\";\nsay Dumper($in, split_ind($in, 1));\n</code></pre>\n\n<p>And the output is:</p>\n\n<pre><code>$ ./string_split.pl\n$VAR1 = 'abcde';\n$VAR2 = 'ab';\n$VAR3 = 'cde';\n</code></pre>\n"}], "owner": {"reputation": 3400, "user_id": 3552806, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2963605ebb83176c812447bb678d3c28?s=128&d=identicon&r=PG&f=1", "display_name": "Biswajit_86", "link": "https://stackoverflow.com/users/3552806/biswajit-86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2978, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1445127104, "creation_date": 1445120182, "question_id": 33192162, "link": "https://stackoverflow.com/questions/33192162/perl-split-string-at-exact-index", "title": "perl: split string at exact index", "body": "<p>I am looking for a perl function that can split a string at a certain index position into an array of 2 strings</p>\n\n<p>For ex : splitting <code>abcde</code> at index 1 will give an array <code>{ab} {cde}</code></p>\n\n<p>I suppose I can find out the length of a string , and then get the first offset at <code>substr $str, -$index</code> and the second offset as <code>$substr $str,0 $length-$index</code>. However , I want to know if there is an existing perl function that does this. </p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1445118276, "post_id": 33191555, "comment_id": 54189560, "body": "you are not adding a text element to the $new_tag you are adding, and you are not removing the text element for para1 information. So &lt;para&gt; still has text and &lt;head&gt; does not."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445120926, "post_id": 33192188, "comment_id": 54190293, "body": "Don&#39;t need the <code>if</code>; the &quot;else&quot; clause works even when <code>@children</code> is empty."}, {"owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445121090, "post_id": 33192188, "comment_id": 54190329, "body": "That&#39;s true, although the condition would need to be prefixed with <code>!@children ||</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445125372, "post_id": 33192188, "comment_id": 54191324, "body": "Right, missed that it was an <code>elsif</code>. So what I meant is that you could have used <code>if ( !@children || $children[0]-&gt;nodeName ne &#39;head&#39; ) {         $node-&gt;insertBefore( $newnode, $children[0] );     }</code>"}], "tags": [], "owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "is_accepted": false, "score": 1, "last_activity_date": 1445120372, "creation_date": 1445120372, "answer_id": 33192188, "question_id": 33191555, "link": "https://stackoverflow.com/questions/33191555/how-to-use-perl-to-add-a-new-child-node-in-xml-in-the-start-of-the-node-value/33192188#33192188", "title": "How to use Perl to add a new child node in XML in the start of the node value", "body": "<p>You're looking for the <code>insertBefore</code> and <code>addChild</code> methods of <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/Node.pod\" rel=\"nofollow\"><code>XML::LibXML::Node</code></a></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse feature qw(say);\n\nuse XML::LibXML;\n\nmy $dom = XML::LibXML-&gt;load_xml( IO =&gt; \\*DATA );\n\nfor my $node ( $dom-&gt;findnodes(\"//para | //subpara\") ) {\n    my $newnode = XML::LibXML-&gt;load_xml( string =&gt; '&lt;head value=\"PARA HEADING\"/&gt;' )-&gt;findnodes('//*')-&gt;[0];\n\n    my @children = $node-&gt;childNodes();\n\n    if ( !@children ) {\n        $node-&gt;addChild($newnode);\n    } elsif ( $children[0]-&gt;nodeName ne 'head' ) {\n        $node-&gt;insertBefore( $newnode, $children[0] );\n    }\n}\n\nprint $dom-&gt;toString;\n\n__DATA__\n&lt;root&gt;\n&lt;book&gt;\n&lt;title&gt;\nTest title for xml\n&lt;/title&gt;\n&lt;para n=\"1\"&gt; para1 information &lt;/para&gt;\n&lt;para n=\"2\"&gt;&lt;head value=\"PARA HEADING\"/&gt;para2 information&lt;subpara i=\"1\"&gt;subpara Info&lt;/subpara&gt;&lt;xyz/&gt;&lt;/para&gt;\n&lt;/book&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;root&gt;\n&lt;book&gt;\n&lt;title&gt;\nTest title for xml\n&lt;/title&gt;\n&lt;para n=\"1\"&gt;&lt;head value=\"PARA HEADING\"/&gt; para1 information &lt;/para&gt;\n&lt;para n=\"2\"&gt;&lt;head value=\"PARA HEADING\"/&gt;para2 information&lt;subpara i=\"1\"&gt;&lt;head value=\"PARA HEADING\"/&gt;subpara Info&lt;/subpara&gt;&lt;xyz/&gt;&lt;/para&gt;\n&lt;/book&gt;\n&lt;/root&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1445124904, "last_edit_date": 1445124904, "creation_date": 1445122082, "answer_id": 33192384, "question_id": 33191555, "link": "https://stackoverflow.com/questions/33191555/how-to-use-perl-to-add-a-new-child-node-in-xml-in-the-start-of-the-node-value/33192384#33192384", "title": "How to use Perl to add a new child node in XML in the start of the node value", "body": "<p>You're making things very difficult for yourself! For instance, there's no need to involve <code>XML::LibXML::XPathContext</code> unless your XML data has non-default namespaces, which your sample doesn't. Also, the \nvalues of the attributes to the <code>para</code> and <code>subpara</code> elements like <code>n=1</code> should have quotes around them, giving <code>n=\"1\"</code> and so on</p>\n\n<p>Here's a solution that uses an XPath expression to find all <code>para</code> or <code>subpara</code> elements, and uses <code>exists</code> to check whether each of them already has a <code>head</code> child. The scalar <code>$head</code> is set up with the data that you want to insert, and a clone of it is inserted before the first child of each element that was found</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse XML::LibXML;\n\nmy $parser = XML::LibXML-&gt;new;\n\nmy $doc = $parser-&gt;parse_fh(*DATA);\n\nmy $head = $parser-&gt;parse_balanced_chunk('&lt;head value=\"PARA HEADING\"/&gt;');\n\nfor my $para ( $doc-&gt;findnodes('//para | //subpara') ) {\n    if ( not $para-&gt;exists('head') ) {\n        $para-&gt;insertBefore($head-&gt;cloneNode(1), $para-&gt;firstChild);\n    }\n}\n\nprint $doc;\n\n\n\n__DATA__\n&lt;root&gt;\n&lt;book&gt;\n&lt;title&gt;\nTest title for xml\n&lt;/title&gt;\n&lt;para n=\"1\"&gt; para1 information &lt;/para&gt;\n&lt;para n=\"2\"&gt;&lt;head value=\"PARA HEADING\"/&gt;para2 information&lt;subpara i=\"1\"&gt;subpara Info&lt;/subpara&gt;&lt;xyz/&gt;&lt;/para&gt;\n&lt;/book&gt;\n&lt;/root&gt;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;root&gt;\n&lt;book&gt;\n&lt;title&gt;\nTest title for xml\n&lt;/title&gt;\n&lt;para n=\"1\"&gt;&lt;head value=\"PARA HEADING\"/&gt; para1 information &lt;/para&gt;\n&lt;para n=\"2\"&gt;&lt;head value=\"PARA HEADING\"/&gt;para2 information&lt;subpara i=\"1\"&gt;&lt;head value=\"PARA HEADING\"/&gt;subpara Info&lt;/subpara&gt;&lt;xyz/&gt;&lt;/para&gt;\n&lt;/book&gt;\n&lt;/root&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "is_accepted": false, "score": -1, "last_activity_date": 1445131155, "creation_date": 1445131155, "answer_id": 33193349, "question_id": 33191555, "link": "https://stackoverflow.com/questions/33191555/how-to-use-perl-to-add-a-new-child-node-in-xml-in-the-start-of-the-node-value/33193349#33193349", "title": "How to use Perl to add a new child node in XML in the start of the node value", "body": "<p>Additionally, you can run an XSLT tranformation using its <code>&lt;xsl:when&gt;</code> and <code>&lt;xsl:otherwise&gt;</code> logic. As information, <a href=\"http://www.w3schools.com/xsl/\" rel=\"nofollow\">XSLT</a> is declarative, special-purpose programming language (same type as SQL is but with databases) used specifically to transform, style, re-format, or re-structure XML documents.</p>\n\n<p><strong>Perl</strong> (<em><a href=\"http://docstore.mik.ua/orelly/perl4/cook/ch22_08.htm\" rel=\"nofollow\">generic script</a></em>)</p>\n\n<pre><code>use XML::LibXML;\nuse XML::LibXSLT;\n\nmy $xml_parser  = XML::LibXML-&gt;new();\nmy $xml_doc     = $xml_parser-&gt;parse_file($XML_FILENAME);\n\nmy $xslt_parser = XML::LibXSLT-&gt;new;    \nmy $xsl_doc     = $xml_parser-&gt;parse_file($XSL_FILENAME);\n\nmy $stylesheet  = $xslt_parser-&gt;parse_stylesheet($xsl_doc);\nmy $results     = $stylesheet-&gt;transform($xml_doc);\nmy $output      = $stylesheet-&gt;output_string($results);\n\nprint $stylesheet-&gt;output_string($results);\n</code></pre>\n\n<p><strong>XSLT</strong> (<em>save as .xsl file to be used above</em>)</p>\n\n<pre><code>&lt;?xml version=\"1.0\" ?&gt; \n&lt;xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" version=\"1.0\"&gt;  \n  &lt;xsl:output method=\"xml\" indent=\"yes\"/&gt;\n\n    &lt;xsl:template match=\"@*|node()\"&gt;\n      &lt;xsl:copy&gt;\n        &lt;xsl:apply-templates select=\"@*|node()\"/&gt;\n      &lt;/xsl:copy&gt;\n    &lt;/xsl:template&gt;\n\n    &lt;xsl:template match=\"para\" name=\"paratemplate\"&gt;      \n      &lt;xsl:choose&gt;        \n        &lt;xsl:when test=\"string-length(head/@value)&gt;0\"&gt;\n          &lt;xsl:copy&gt;\n            &lt;xsl:apply-templates select=\"@*|node()\"/&gt;\n          &lt;/xsl:copy&gt; \n        &lt;/xsl:when&gt;\n        &lt;xsl:otherwise&gt;\n          &lt;para&gt;\n            &lt;xsl:apply-templates select=\"@*\"/&gt;\n            &lt;xsl:element name=\"head\"&gt;\n              &lt;xsl:attribute name=\"value\"&gt;PARA HEADING&lt;/xsl:attribute&gt;\n            &lt;/xsl:element&gt;\n            &lt;xsl:apply-templates select=\"text()\"/&gt;\n          &lt;/para&gt;          \n        &lt;/xsl:otherwise&gt;\n      &lt;/xsl:choose&gt;      \n    &lt;/xsl:template&gt;\n\n  &lt;xsl:template match=\"subpara\" name=\"subparatemplate\"&gt;      \n      &lt;xsl:choose&gt;        \n        &lt;xsl:when test=\"string-length(head/@value)&gt;0\"&gt;\n          &lt;xsl:copy&gt;\n            &lt;xsl:apply-templates select=\"@*|node()\"/&gt;\n          &lt;/xsl:copy&gt; \n        &lt;/xsl:when&gt;\n        &lt;xsl:otherwise&gt;\n          &lt;subpara&gt;\n            &lt;xsl:apply-templates select=\"@*\"/&gt;  \n            &lt;xsl:element name=\"head\"&gt;            \n              &lt;xsl:attribute name=\"value\"&gt;PARA HEADING&lt;/xsl:attribute&gt;              \n            &lt;/xsl:element&gt;\n            &lt;xsl:apply-templates select=\"text()\"/&gt;  \n          &lt;/subpara&gt;          \n        &lt;/xsl:otherwise&gt;\n      &lt;/xsl:choose&gt;      \n    &lt;/xsl:template&gt;\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;root&gt;\n  &lt;book&gt;\n    &lt;title&gt;\nTest title for xml\n&lt;/title&gt;\n    &lt;para n=\"1\"&gt;&lt;head value=\"PARA HEADING\"/&gt; para1 information &lt;/para&gt;\n    &lt;para n=\"2\"&gt;&lt;head value=\"PARA HEADING\"/&gt;para2 information&lt;subpara i=\"1\"&gt;&lt;head value=\"PARA HEADING\"/&gt;subpara Info&lt;/subpara&gt;&lt;xyz/&gt;&lt;/para&gt;\n  &lt;/book&gt;\n&lt;/root&gt;\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 4128659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86e408351985500e407bdbfb8575c10d?s=128&d=identicon&r=PG&f=1", "display_name": "Mahe", "link": "https://stackoverflow.com/users/4128659/mahe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1174, "favorite_count": 0, "accepted_answer_id": 33192384, "answer_count": 3, "score": 1, "last_activity_date": 1445131155, "creation_date": 1445115834, "last_edit_date": 1445124278, "question_id": 33191555, "link": "https://stackoverflow.com/questions/33191555/how-to-use-perl-to-add-a-new-child-node-in-xml-in-the-start-of-the-node-value", "title": "How to use Perl to add a new child node in XML in the start of the node value", "body": "<p>I am trying to add a child element to a node in XML in the start of the node value using <a href=\"http://metacpan.org/module/XML::LibXML\" rel=\"nofollow\"><code>XML::LibXML</code></a> in Perl. My XML is:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;root&gt;\n&lt;book&gt;\n&lt;title&gt;\nTest title for xml\n&lt;/title&gt;\n&lt;para n=1&gt; para1 information &lt;/para&gt;\n&lt;para n=2&gt;&lt;head value=\"PARA HEADING\"/&gt;para2 information&lt;subpara i=1&gt;subpara Info&lt;/subpara&gt;&lt;xyz/&gt;&lt;/para&gt;\n&lt;/book&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>and the output I want is:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;root&gt;\n&lt;book&gt;\n&lt;title&gt;\nTest title for xml\n&lt;/title&gt;\n&lt;para n=1&gt;&lt;head value=\"PARA HEADING\"/&gt;para1 information &lt;/para&gt;\n&lt;para n=2&gt;&lt;head value=\"PARA HEADING\"/&gt;para2 information&lt;subpara i=1&gt;&lt;head value=\"PARA HEADING\"/&gt;Subpara Info&lt;/subpara&gt;&lt;xyz/&gt;&lt;/para&gt;\n&lt;/book&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>I want to add a child node 'head' as above if it is not present in 'para' or 'subpara'. </p>\n\n<p>I have tried this code:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/local/bin/perl5.8.8\n\nuse XML::LibXML;\n\nmy $xml_parser = XML::LibXML-&gt;new();\nmy $xml_doc    = $xml_parser-&gt;parse_file( xml_file . xml );\nmy $root       = $xml_doc-&gt;getDocumentElement();\nmy $xml_xc     = XML::LibXML::XPathContext-&gt;new( $root );\n\nmy @array_list = ( para, deck );\n\nforeach my $xml_sections ( $xml_xc-&gt;findnodes( '//*' ) ) {\n\n    if ( $xml_sections-&gt;nodeName ne \"head\" ) {\n\n        my $marker_flag = 0;\n\n        foreach my $first_child ( $xml_sections-&gt;childNodes() ) {\n\n            if ( $first_child-&gt;nodeName eq \"head\" ) {\n                $marker_flag = 1;\n                last;\n            }\n        }\n\n        if ( !$marker_flag ) {\n\n            foreach my $array_elt ( @array_list ) {\n\n                if ( $array_elt eq $xml_sections-&gt;nodeName ) {\n                    my $new_tag = $xml_doc-&gt;createElement( \"head\" );\n                    my $value   = \"PARA HEADING\";\n                    my $att1    = $xml_doc-&gt;createAttribute( \"value\", \"$value\" );\n                    $new_tag-&gt;setAttributeNode( $att1 );\n                    $xml_sections-&gt;addChild( $new_tag );\n                }\n            }\n        }\n    }\n}\n\nprint $root-&gt;toString();\n\nexit 0;\n</code></pre>\n\n<p>My output is:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;root&gt;\n&lt;book&gt;\n&lt;title&gt;\nTest title for xml\n&lt;/title&gt;\n&lt;para n=1&gt;para1 information &lt;head value=\"PARA HEADING\"/&gt;&lt;/para&gt;\n&lt;para n=2&gt;&lt;head value=\"PARA HEADING\"/&gt;para2 information&lt;subpara i=1&gt;subpara Info&lt;head value=\"PARA HEADING\"/&gt;&lt;/subpara&gt;&lt;xyz/&gt;&lt;/para&gt;\n&lt;/book&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>How can I achieve this? </p>\n"}, {"tags": ["perl", "windows-7", "tkx"], "comments": [{"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 1, "creation_date": 1445100491, "post_id": 33188675, "comment_id": 54183949, "body": "No, you&#39;re not using it correctly.  Have you read the documentation? <a href=\"http://search.cpan.org/~srezic/Tk-804.033/pod/chooseDirectory.pod\" rel=\"nofollow noreferrer\">search.cpan.org/~srezic/Tk-804.033/pod/chooseDirectory.pod</a>"}, {"owner": {"reputation": 1671, "user_id": 4600983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d236a59e7d7e6871716bc25752dae6?s=128&d=identicon&r=PG&f=1", "display_name": "svsd", "link": "https://stackoverflow.com/users/4600983/svsd"}, "reply_to_user": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 1, "creation_date": 1445119080, "post_id": 33188675, "comment_id": 54189798, "body": "@RonBergin That documentation is for the <code>Tk</code> module but the requestor is using <code>Tkx</code>, so it may not apply to them."}, {"owner": {"reputation": 1671, "user_id": 4600983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d236a59e7d7e6871716bc25752dae6?s=128&d=identicon&r=PG&f=1", "display_name": "svsd", "link": "https://stackoverflow.com/users/4600983/svsd"}, "edited": false, "score": 1, "creation_date": 1445119340, "post_id": 33188675, "comment_id": 54189880, "body": "Does a very basic script such as <code>use Tkx; print Tkx::tk___chooseDirectory();</code>  work?"}, {"owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "edited": false, "score": 0, "creation_date": 1445294114, "post_id": 33188675, "comment_id": 54254672, "body": "Seems like that should work.  Can we see your entire program / code that you are using, please?  Thx."}, {"owner": {"reputation": 311, "user_id": 4263190, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ce5c932ed5c003e91525b1ba673b5778?s=128&d=identicon&r=PG&f=1", "display_name": "epsilon_j", "link": "https://stackoverflow.com/users/4263190/epsilon-j"}, "reply_to_user": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "edited": false, "score": 0, "creation_date": 1445539271, "post_id": 33188675, "comment_id": 54376580, "body": "@tale852150 I have updated my original post."}, {"owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "edited": false, "score": 0, "creation_date": 1448061770, "post_id": 33188675, "comment_id": 55440761, "body": "Hi epsilonjon, If you haven&#39;t already done so, see my answer below.  I used your code stub in a simple Perl program and it seemed to work as I described in my answer. HTH"}, {"owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "edited": false, "score": 0, "creation_date": 1449263066, "post_id": 33188675, "comment_id": 55946886, "body": "epsilonjon, did u ever get this to work?"}], "answers": [{"tags": [], "owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "is_accepted": false, "score": 0, "last_activity_date": 1445565983, "last_edit_date": 1445565983, "creation_date": 1445550244, "answer_id": 33291307, "question_id": 33188675, "link": "https://stackoverflow.com/questions/33188675/how-to-get-a-choose-directory-dialog-box-using-perl-tkx-on-windows-7/33291307#33291307", "title": "How to get a &quot;choose directory&quot; dialog box using Perl Tkx on Windows 7?", "body": "<p>Your script worked fine, without errors, using the code you provided, running under Windows 7 Professional 64-bit with ActivePerl 5.20.2 64-bit.  See image below (blacked-out items are potentially sensitive data):</p>\n\n<p><a href=\"https://i.stack.imgur.com/u1B7p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u1B7p.png\" alt=\"enter image description here\"></a></p>\n\n<p>Could it be possible that the Tkx screen is being displayed behind another screen?  Try running the code your provided from the MS-DOS prompt.\nAlso, Tk.pm must be installed since Tkx is a wrapper for Tk.  But I am making the assumption here that other Tkx widgets are working correctly and therefore Tk is installed correctly.</p>\n\n<p>HTH</p>\n"}], "owner": {"reputation": 311, "user_id": 4263190, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ce5c932ed5c003e91525b1ba673b5778?s=128&d=identicon&r=PG&f=1", "display_name": "epsilon_j", "link": "https://stackoverflow.com/users/4263190/epsilon-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 525, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1445565983, "creation_date": 1445097813, "last_edit_date": 1445515919, "question_id": 33188675, "link": "https://stackoverflow.com/questions/33188675/how-to-get-a-choose-directory-dialog-box-using-perl-tkx-on-windows-7", "title": "How to get a &quot;choose directory&quot; dialog box using Perl Tkx on Windows 7?", "body": "<p>I'm trying to invoke Windows 7's \"choose directory\" dialog box using Perl Tkx. This is what I'm using:</p>\n\n<pre><code>my $dirname = Tkx::tk___chooseDirectory();\n</code></pre>\n\n<p>However, this doesn't display any dialog box, but instead causes my program to hang without providing any error messages. Am I using the function incorrectly? How do I get the dialog box to display?</p>\n\n<p>Thanks for your help.</p>\n\n<p>UPDATE:</p>\n\n<p>I won't paste in my full script as it's too long, but simply running the following causes perl to hang for me:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Tkx;\n\nmy $dirname = Tkx::tk___chooseDirectory();\n</code></pre>\n"}, {"tags": ["xml", "perl", "xml-parsing"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1445095822, "post_id": 33188067, "comment_id": 54182405, "body": "Put simply, <a href=\"http://metacpan.org/module/XML::Simple\" rel=\"nofollow noreferrer\">XML::Simple</a> is dreadful. Don&#39;t use it. Its own documnetation says <i>The use of this module in new code is discouraged. Other modules are available which provide more straightforward and consistent interfaces.</i>"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1445098984, "last_edit_date": 1445098984, "creation_date": 1445098543, "answer_id": 33188787, "question_id": 33188067, "link": "https://stackoverflow.com/questions/33188067/perl-preserving-whitespace-in-empty-cdata-block-in-xml-file/33188787#33188787", "title": "Perl: preserving whitespace in empty CDATA block in xml file", "body": "<p>Here is your problem:</p>\n\n<blockquote>\n  <p>I am using <code>XML::Simple</code> to parse this:</p>\n</blockquote>\n\n<p>Don't. <a href=\"http://search.cpan.org/~grantm/XML-Simple-2.20/lib/XML/Simple.pm\" rel=\"nofollow\"><code>XML::Simple</code></a> even says 'don't use this module'. </p>\n\n<blockquote>\n  <p>The use of this module in new code is discouraged. Other modules are available which provide more straightforward and consistent interfaces. </p>\n</blockquote>\n\n<p>The reason is quite simple - only very trivial (or indeed - simple) pieces of XML can be directly represented via arrays and hashes. </p>\n\n<p>How about <a href=\"http://search.cpan.org/dist/XML-Twig/Twig.pm\" rel=\"nofollow\"><code>XML::Twig</code></a>:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $twig = XML::Twig-&gt;new( 'pretty_print' =&gt; 'indented_a' )-&gt;parse( \\*DATA );\n\n$twig-&gt;print;\n\nmy $content = $twig-&gt;root-&gt;first_child('content')-&gt;text;\nprint \"Content is :\\\"\", $content, \"\\\"\\n\";\n\n__DATA__\n&lt;element&gt;\n    &lt;id&gt;ID&lt;/id&gt;\n    &lt;content&gt;\n        &lt;![CDATA[ \n\n\n\n        ]]&gt;\n    &lt;/content&gt;\n&lt;/element&gt;\n</code></pre>\n\n<p>Which prints:</p>\n\n<pre><code>&lt;element&gt;\n  &lt;id&gt;ID&lt;/id&gt;\n  &lt;content&gt;&lt;![CDATA[ \n\n\n\n        ]]&gt;&lt;/content&gt;\n&lt;/element&gt;\nContent is :\" \n\n\n\n        \"\n</code></pre>\n\n<p>Of course, from there, the next question is - what do you want to <em>do</em> with that content. </p>\n"}], "owner": {"reputation": 63, "user_id": 1774531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c71f6622f7e1d100ec72e08331a78914?s=128&d=identicon&r=PG", "display_name": "peph", "link": "https://stackoverflow.com/users/1774531/peph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1445098984, "creation_date": 1445094310, "last_edit_date": 1445094668, "question_id": 33188067, "link": "https://stackoverflow.com/questions/33188067/perl-preserving-whitespace-in-empty-cdata-block-in-xml-file", "title": "Perl: preserving whitespace in empty CDATA block in xml file", "body": "<p>so as my title suggests: i have an XML file with the following relevant content</p>\n\n<pre><code>&lt;element&gt;\n    &lt;id&gt;ID&lt;/id&gt;\n    &lt;content&gt;\n        &lt;![CDATA[ \n\n\n\n        ]]&gt;\n    &lt;/content&gt;\n&lt;/element&gt;\n</code></pre>\n\n<p>I am using XML::Simple to parse this:</p>\n\n<pre><code>$localElement = XMLin( $localElementXML, NoAttr=&gt;1, SuppressEmpty=&gt;'' )\n</code></pre>\n\n<p>which results in this perl hash:</p>\n\n<pre><code>{\n  'content' =&gt; '',\n  'id' =&gt; 'ID'\n};\n</code></pre>\n\n<p>If I insert anything other than whitespace in the middle of that empty CDATA block, all the whitespace is preserved:</p>\n\n<pre><code>{\n  'content' =&gt; '\n\n\n    --\n\n\n',\n  'id' =&gt; 'ID'\n};\n</code></pre>\n\n<p>What I need to achieve is for the whitespace to be preserved (in basically a long, empty string) even if there are no other characters in the middle of it. Yes, I am using \"SuppressEmpty\", but I'm thinking that element isn't empty, it's a CDATA-block full of spaces, linebreaks, etc. Am I missing something? How can I get this to work? I haven't found any obvious options for XML::Simple to change this behaviour.</p>\n\n<p>Thanks a lot.</p>\n"}, {"tags": ["perl", "modulino"], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1445071929, "post_id": 33179388, "comment_id": 54175550, "body": "Note that there could be a problem using this call when also using <code>Getopt::Long::GetOptions</code>, see <a href=\"http://stackoverflow.com/questions/26508899/error-panic-attempt-to-copy-freed-scalar-when-using-getoptlong\">Error \u201cpanic: attempt to copy freed scalar\u201d when using Getopt::Long</a>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1445144954, "post_id": 33179388, "comment_id": 54194552, "body": "@H&#229;konH&#230;gland a modulino (also sometimes called a progmod) shouldn&#39;t be calling GetOptions in the code that is run when it is used as a module, not a program.  But your point is taken: passing globals in general is a bad idea because they can change out from under you."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 6, "last_activity_date": 1445028870, "creation_date": 1445028870, "answer_id": 33179388, "question_id": 33179275, "link": "https://stackoverflow.com/questions/33179275/modulino-package-name-added-to/33179388#33179388", "title": "Modulino package name added to @_", "body": "<p>You mean why is \"Toto\" in @_?  Because you are calling it as a class method, so it implicitly passes the class as the first parameter.  If you don't want to do that, just do <code>run(@ARGV) unless caller()</code> instead.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445030252, "post_id": 33179503, "comment_id": 54166597, "body": "You could also remove the line and replace <code>sub main</code> with <code>if (caller)</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1445029376, "creation_date": 1445029376, "answer_id": 33179503, "question_id": 33179275, "link": "https://stackoverflow.com/questions/33179275/modulino-package-name-added-to/33179503#33179503", "title": "Modulino package name added to @_", "body": "<pre><code>__PACKAGE__-&gt;run(@ARGV)\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>Toto-&gt;run(1,2,3)\n</code></pre>\n\n<p>This is a class method call. Method calls pass the invocant (the value to which the LHS of the <code>-&gt;</code> evaluated) as the first argument. This differs from</p>\n\n<pre><code>Toto::run(1,2,3)\n</code></pre>\n\n<p>which is a simple sub call. The following will call <code>run</code> as a sub:</p>\n\n<pre><code>run(@ARGV) unless caller();\n</code></pre>\n"}], "owner": {"reputation": 2624, "user_id": 393262, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/49a7ee5012c5ee27f94f16be6cd13d1b?s=128&d=identicon&r=PG", "display_name": "Philippe A.", "link": "https://stackoverflow.com/users/393262/philippe-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 33179503, "answer_count": 2, "score": 1, "last_activity_date": 1445171465, "creation_date": 1445028361, "last_edit_date": 1445171465, "question_id": 33179275, "link": "https://stackoverflow.com/questions/33179275/modulino-package-name-added-to", "title": "Modulino package name added to @_", "body": "<p>Consider the following basic Perl modulino:</p>\n\n<pre><code>#!/usr/bin/perl -l\npackage Toto;\n\n__PACKAGE__-&gt;run(@ARGV) unless caller();\n\nsub run \n{\n  print \"@ARGV\";\n  print \"@_\";\n}\n\n1;\n</code></pre>\n\n<p>If I run it on the command line, I get:</p>\n\n<pre><code>$ ./Toto.pm 1 2 3\n1 2 3\nToto 1 2 3\n</code></pre>\n\n<p>If I call it from a test:</p>\n\n<pre><code>$ perl -MToto -le 'Toto::run(1,2,3)'    \n#first line blank - no ARGV set\n1 2 3\n</code></pre>\n\n<p>In other words, the contents of @_ inside run() changes depending on how the function is called.  </p>\n\n<p>Can you explain what is going on? </p>\n"}, {"tags": ["perl", "moose"], "answers": [{"tags": [], "owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "is_accepted": false, "score": 1, "last_activity_date": 1445045867, "creation_date": 1445045867, "answer_id": 33181828, "question_id": 33179047, "link": "https://stackoverflow.com/questions/33179047/testwwwseleniummore-with-moose/33181828#33181828", "title": "Test::WWW::Selenium::More with Moose", "body": "<p>You're not setting up your Moose attributes correctly.  Try following this pattern:</p>\n\n<pre><code>has host =&gt; (\n    is      =&gt; 'ro',\n    isa     =&gt; 'Str',\n    default =&gt; 'localhost',\n);\n</code></pre>\n\n<p>I see you're already doing this for <code>browser_url</code>.  Just make sure you set up all of your attributes in this way.</p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1445086191, "last_edit_date": 1495542216, "creation_date": 1445086191, "answer_id": 33186822, "question_id": 33179047, "link": "https://stackoverflow.com/questions/33179047/testwwwseleniummore-with-moose/33186822#33186822", "title": "Test::WWW::Selenium::More with Moose", "body": "<p>In addition to <a href=\"https://stackoverflow.com/a/33181828/1331451\">oalders' answer</a>, if you want to add stuff to an existing object, you need to use the <code>has +foo</code> notation. It looks like <code>host</code> and <code>port</code> are already attributes and you just want to change their default value.</p>\n\n<pre><code>has '+host' =&gt; ( default =&gt; 'localhost' );\n</code></pre>\n\n<p>Also <a href=\"https://metacpan.org/pod/Moose#has-name-options\" rel=\"nofollow noreferrer\">see the Moose doc on <code>has</code> and <code>has +</code></a>.</p>\n"}], "owner": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1445086191, "creation_date": 1445027317, "question_id": 33179047, "link": "https://stackoverflow.com/questions/33179047/testwwwseleniummore-with-moose", "title": "Test::WWW::Selenium::More with Moose", "body": "<p>I'm attempting to use 'Test::WWW::Selenium::More' and 'Moose' while creating my own class called 'MySelenium' in Perl.</p>\n\n<p>This is the Moose error when I run the program:</p>\n\n<pre><code>You must pass an even number of attribute options at /Library/Perl/5.18   /darwin-thread-multi-2level/Moose/Exporter.pm line 422\nMoose::has('host', 'localhost') called at MySelenium.pm line 5\nrequire MySelenium.pm at x.pl line 5\nmain::BEGIN at MySelenium.pm line 0\neval {...} at MySelenium.pm line 0\nCompilation failed in require at ./x.pl line 5, &lt;DATA&gt; line 438.\nBEGIN failed--compilation aborted at ./x.pl line 5, &lt;DATA&gt; line 438.\n</code></pre>\n\n<p>Here is the program:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\n\nuse MySelenium;\nuse Test::Most;\n\nmy $x = MySelenium-&gt;new;\n\n$x-&gt;open_ok('/');\n\ndone_testing;\n</code></pre>\n\n<p>Here is my class called 'MySelenium'</p>\n\n<pre><code>package MySelenium;\nuse Moose;\nextends 'Test::WWW::Selenium::More';\n\nhas host        =&gt; 'localhost';\nhas port        =&gt; 4444;\nhas browser     =&gt; 'firefox';\nhas browser_url =&gt; (is =&gt; 'rw', isa =&gt; 'Str',\ndefault =&gt; 'http://www.google.com');\n\n    sub login_ok {\n    my ($self, $username, $password) = @_;\n    $self-&gt;open_ok('/login');\n    $self-&gt;is_text_present_ok('Please login thanks');\n    $self-&gt;type_ok('username' =&gt; $username);\n    $self-&gt;type_ok('password' =&gt; $password);\n    $self-&gt;follow_link_ok('login');\n}\n\nno Moose;\n</code></pre>\n\n<p>Any help will be greatly appreciated.</p>\n"}, {"tags": ["arrays", "perl", "sorting", "hash"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1445020009, "post_id": 33177210, "comment_id": 54161505, "body": "Have you tried anything?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1445020229, "post_id": 33177210, "comment_id": 54161639, "body": "You can&#39;t sort a hash. The only thing you can sort is a list, so step 1 would be to think about what list you&#39;re trying to sort."}], "answers": [{"comments": [{"owner": {"reputation": 583, "user_id": 1237693, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/TC0Um.png?s=128&g=1", "display_name": "Scottie", "link": "https://stackoverflow.com/users/1237693/scottie"}, "edited": false, "score": 0, "creation_date": 1445021767, "post_id": 33177474, "comment_id": 54162472, "body": "Thank you for your answer and code, but informations about <code>DIRECTORY_NAME</code> (hash keys) are important for me, so I little edited my two questions."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 583, "user_id": 1237693, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/TC0Um.png?s=128&g=1", "display_name": "Scottie", "link": "https://stackoverflow.com/users/1237693/scottie"}, "edited": false, "score": 0, "creation_date": 1445022093, "post_id": 33177474, "comment_id": 54162680, "body": "Adjusted my answer for the changes to the question."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1445022076, "last_edit_date": 1445022076, "creation_date": 1445020888, "answer_id": 33177474, "question_id": 33177210, "link": "https://stackoverflow.com/questions/33177210/how-to-sort-hashes-of-2-d-arrays-simple-example/33177474#33177474", "title": "How to sort Hashes of 2-D Arrays (simple example)", "body": "<p>As melpomene said, you can't sort a hash. The only thing you can sort is a list, so step 1 would be to think about what list you're trying to sort.</p>\n\n<p>In this case, the output is a list that contains all the information we need for sorting, so let's start by gathering the info we need to output, then it should be easy to sort.</p>\n\n<p>Specifically, let's generate </p>\n\n<pre><code>[ 'DIR_XYZ',        'filename_xyz.log', 2048 ],\n[ 'DIR_XYZ',        'filename_abc.txt', 1024 ],\n[ 'DIR_ABC',        'filename_987.log', 4096 ],\n[ 'DIR_ABC',        'filename_123.txt', 2048 ],\n[ 'DIRECTORY_NAME', 'filename.txt',     1024 ],\n</code></pre>\n\n<p>This can be done as follows:</p>\n\n<pre><code>my @files = map { [ $_, @{ $hash{$_} } ] } keys(%hash);\n</code></pre>\n\n<p>Sorting the elements of <code>@files</code> in the first order:</p>\n\n<pre><code>sort { $a-&gt;[1] cmp $b-&gt;[1]  ||  $a-&gt;[2] &lt;=&gt; $b-&gt;[2] } @files\n</code></pre>\n\n<p>Sorting the elements of <code>@files</code> in the second order:</p>\n\n<pre><code>sort { $a-&gt;[2] &lt;=&gt; $b-&gt;[2]  ||  $a-&gt;[1] cmp $b-&gt;[1] } @files\n</code></pre>\n"}], "owner": {"reputation": 583, "user_id": 1237693, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/TC0Um.png?s=128&g=1", "display_name": "Scottie", "link": "https://stackoverflow.com/users/1237693/scottie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 33177474, "answer_count": 1, "score": 0, "last_activity_date": 1445024836, "creation_date": 1445019882, "last_edit_date": 1445021660, "question_id": 33177210, "link": "https://stackoverflow.com/questions/33177210/how-to-sort-hashes-of-2-d-arrays-simple-example", "title": "How to sort Hashes of 2-D Arrays (simple example)", "body": "<p>I have following hash with <code>DIRECTORY_NAMES</code> as keys, and 2-D arrays as data (<code>filename</code> and <code>size</code> of the file).</p>\n\n<pre><code>$hash{'DIRECTORY_NAME'} = [ \n                            ['filename.txt', 1024]\n                          ];\n</code></pre>\n\n<p>It looks something like this: </p>\n\n<p><img src=\"https://i.imgur.com/KRpNZAX.png\" alt=\"Valid XHTML\"></p>\n\n<p>Here is my code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nmy %hash = (\n    'DIR_XYZ' =&gt; [\n                   [\n                     'filename_xyz.log',\n                     2048 \n                   ],\n                   [\n                     'filename_abc.txt',\n                     1024\n                   ]\n                 ],\n    'DIR_ABC' =&gt; [\n                   [\n                     'filename_987.log',\n                     4096 \n                   ],\n                   [\n                     'filename_123.txt',\n                     2048\n                   ]\n                 ],\n);\n$hash{'DIRECTORY_NAME'} = [ \n                            ['filename.txt', 1024]\n                          ];\n\nprint Dumper \\%hash;\n</code></pre>\n\n<p><strong>My questions:</strong></p>\n\n<p>1) How to sort data in the <code>%hash</code> first by filename then by filesize and no matter of the hash keys? But information about directory name is important, can't be ignored and must be occured on the otutput. So, the output should look like this:</p>\n\n<pre><code>filename.txt        1024   (DIRECTORY_NAME)\nfilename_123.txt    2048   (DIR_ABC)\nfilename_987.log    4096   (DIR_ABC)\nfilename_abc.txt    1024   (DIR_XYZ)\nfilename_xyz.log    2048   (DIR_XYZ)\n</code></pre>\n\n<p>2) How to sort data in the <code>%hash</code> first by filesize then by filename and no matter of the hash keys? But information about directory names is important, can't be ignored and must be occured on the otutput. So, the output should look like this:</p>\n\n<pre><code>filename.txt        1024   (DIRECTORY_NAME)\nfilename_abc.txt    1024   (DIR_XYZ)\nfilename_123.txt    2048   (DIR_ABC)\nfilename_xyz.log    2048   (DIR_XYZ)\nfilename_987.log    4096   (DIR_ABC)\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 5, "creation_date": 1445044869, "post_id": 33176681, "comment_id": 54170466, "body": "I&#39;ve seen a lot of comments on self-evident code, but <code># if statement</code> has to be the best ever!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1445084418, "post_id": 33176681, "comment_id": 54178945, "body": "I think I saw &quot;set x to 10&quot; once."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 6, "last_activity_date": 1445018307, "creation_date": 1445018307, "answer_id": 33176758, "question_id": 33176681, "link": "https://stackoverflow.com/questions/33176681/script-doesnt-recognize-global-variables/33176758#33176758", "title": "Script doesn&#39;t recognize global variables", "body": "<p><code>$menu_sections-&gt;{$section}</code> accesses an element of the hash referenced by the reference in scalar <code>$menu_sections</code>. You meant to access an element of the hash <code>%menu_sections</code>. You should have used <code>$menu_sections{$section}</code>.</p>\n\n<p>The other error is the same.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5420071"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1445025390, "creation_date": 1445018092, "last_edit_date": 1445025390, "question_id": 33176681, "link": "https://stackoverflow.com/questions/33176681/script-doesnt-recognize-global-variables", "title": "Script doesn&#39;t recognize global variables", "body": "<p>I have a program below, which I am trying to test:   </p>\n\n<pre><code>#! usr/bin/perl    \n#MOA is our company module    \n#the perl is running for windows 7    \n\nuse strict;    \nuse warnings;    \n\nuse Getopt::Long;    \nuse MOA::CLSUtils;    \nuse MOA::PamReport;    \nuse MOA::PamJobs;    \nuse Data::Dumper;    \nuse Time::HiRes qw(gettimeofday);    \nuse Date::Pcalc;    \nuse File::Path  qw(make_path remove_tree);    \n\n#declare global varibles \n\nmy (%menu_sections, %menu_section, %menu_items, %menu_index);  \n\n#initialize global variables\n%menu_sections = (\n\n#initialize hash\n     );    \n%menu_items =(#initialize hash);    \nmy $TERM_WIDTH = 44;    #declare variables and initialize\nmy ($section, $item, $knote);    \nmy $count = 1;    \nmy $submenu=\"N\";    \n\n#foreach loop compare keys\n#the code below is trying to print menu for users\nforeach  $section (sort {$a cmp $b} keys %{menu_sections}) {    \nif (($count == 1) &amp;&amp; ($submenu eq \"N\")) {    #if statement\n}    \nelse {    #else statement\n    $knote = \"\";    \n}    \n    #print on the screen using category function\nprint \"\\n\\t\", category($section, $knote), \"\\n\", \"\\t\", \"-\" x length($section), \"\\n\";   \n    #the second key print using category function \nforeach $item (@{$menu_sections-&gt;{$section}}) {    #line 36 go through  hash and code don't recognize hash\n\n    printf(\"\\t%3s )   %-15s  %-30s\\n\", $item, $menu_items-&gt;{$item}-&gt;[0], $menu_items-&gt;{$item}-&gt;[1]);    #line 38 print menu\n}    \n$count++;    #count lines\n}    #end of the code\n</code></pre>\n\n<p>when I run it, I get messages:</p>\n\n<pre><code>Global symbol \"$menu_sections\" requires explicit package name at test.pl line 36\nGlobal symbol \"$menu_items\" requires explicit package name at test.pl line 38    \nGlobal symbol \"$menu_items\" requires explicit package name at test.pl line 38\nExecution of test.pl aborted due to compilation errors.\n</code></pre>\n\n<p>I don't understand, why Perl does not recognize global variables</p>\n"}, {"tags": ["perl", "find"], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1445009101, "post_id": 33174099, "comment_id": 54155702, "body": "<code>\\Q</code> might be needed, and a newline in print."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1445009119, "last_edit_date": 1445009119, "creation_date": 1445009010, "answer_id": 33174099, "question_id": 33174031, "link": "https://stackoverflow.com/questions/33174031/how-do-i-find-the-line-a-word-is-on-when-the-user-enters-text-in-perl/33174099#33174099", "title": "How do I find the line a word is on when the user enters text in Perl?", "body": "<p>Tool for the job is <code>grep</code>.</p>\n\n<pre><code> chomp ( $line ); #remove linefeeds \n print \"$line is in list\\n\" if grep { m/^\\Q$line\\E$/g } @list; \n</code></pre>\n\n<p>You could also transform your <code>@list</code> into a hash, and test that, using <code>map</code>:</p>\n\n<pre><code> my %cities = map { $_ =&gt; 1 } @list; \n if ( $cities{$line} ) { print \"$line is in list\\n\";}\n</code></pre>\n\n<p>Note - the above, because of the presence of <code>^</code> and <code>$</code> is an exact match (and case sensitive). You can easily adjust it to support fuzzier scenarios. </p>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445010379, "post_id": 33174338, "comment_id": 54156486, "body": "Indeed. <code>while</code> is also preferable to slurping in an array for memory reasons generally. Of course, if you&#39;re  doing the job twice, then it&#39;s a different sort of tradeoff."}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1445015302, "post_id": 33174338, "comment_id": 54159210, "body": "The standard approach so ++"}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": true, "score": 6, "last_activity_date": 1445009721, "creation_date": 1445009721, "answer_id": 33174338, "question_id": 33174031, "link": "https://stackoverflow.com/questions/33174031/how-do-i-find-the-line-a-word-is-on-when-the-user-enters-text-in-perl/33174338#33174338", "title": "How do I find the line a word is on when the user enters text in Perl?", "body": "<p>An alternative solution that reads only the parts of the file until a result is found, or the file is exhausted:</p>\n\n<pre><code>use strict;\nuse warnings; \n\nprint \"Enter a US state to search for: \\n\";\nmy $line = &lt;STDIN&gt;;\nchomp($line);\n\n# open file with 3 argument open (safer)\nopen my $fh, '&lt;', 'WordList.txt'\n   or die \"Unable to open 'WordList.txt' for reading: $!\";\n\n# read the file until result is found or the file is exhausted\nmy $found = 0;\nwhile ( my $row = &lt;$fh&gt; ) {\n   chomp($row);\n   next unless $row eq $line;\n\n   # $. is a special variable representing the line number \n   # of the currently(most recently) accessed filehandle\n   print \"Found '$line' on line# $.\\n\"; \n   $found =  1;  # indicate that you found a result\n   last;         # stop searching\n}\nclose($fh);\n\nunless ( $found ) { \n   print \"'$line' was not found\\n\";\n}\n</code></pre>\n\n<p>General notes:</p>\n\n<ul>\n<li><p>always <code>use strict;</code> and <code>use warnings;</code> they will save you from a wide range of bugs</p></li>\n<li><p>3 argument open is generally preferred, as well as the <code>or die ...</code> statement. If you are unable to open the file, reading from the filehandle will fail</p></li>\n<li><p>$. documentation can be found in <a href=\"http://perldoc.perl.org/perlvar.html#Variables-related-to-filehandles\"><code>perldoc perlvar</code></a></p></li>\n</ul>\n"}], "owner": {"reputation": 111, "user_id": 3831362, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/7479fba86a8df20addacfb9b62fee147?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Kraemer", "link": "https://stackoverflow.com/users/3831362/joseph-kraemer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 33174338, "answer_count": 2, "score": -1, "last_activity_date": 1445015475, "creation_date": 1445008811, "question_id": 33174031, "link": "https://stackoverflow.com/questions/33174031/how-do-i-find-the-line-a-word-is-on-when-the-user-enters-text-in-perl", "title": "How do I find the line a word is on when the user enters text in Perl?", "body": "<p>I have a simple text file that includes all 50 states. I want the user to enter a word and have the program return the line the specific state is on in the file or otherwise display a \"word not found\" message. I do not know how to use find. Can someone assist with this? This is what I have so far.</p>\n\n<pre><code>#!/bin/perl -w\n\nopen(FILENAME,\"&lt;WordList.txt\");             #opens WordList.txt\nmy(@list) = &lt;FILENAME&gt;;                     #read file into list\nmy($state);                                 #create private \"state\"     variable\nprint \"Enter a US state to search for: \\n\"; #Print statement\n$line = &lt;STDIN&gt;;                            #use of STDIN to read input from user\n\n\nclose (FILENAME);\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1445008766, "post_id": 33173900, "comment_id": 54155488, "body": "Is there a reason this must be done in perl?  Looks like a straightforward sed script to me..."}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1548629176, "post_id": 33173900, "comment_id": 95598868, "body": "@Toby Speight: So, how would it look like, then?"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1445008738, "creation_date": 1445008738, "answer_id": 33174002, "question_id": 33173900, "link": "https://stackoverflow.com/questions/33173900/delete-previous-and-next-lines-in-perl/33174002#33174002", "title": "delete previous and next lines in perl", "body": "<p>Yes. Start with looking at <code>$/</code> and set it so you can work on a chunk at a time. I would suggest you can treat <code>@</code> as a record separator in your example.</p>\n\n<p>Then iterate your records using a <code>while</code> loop. E.g. <code>while ( &lt;&gt; ) {</code></p>\n\n<p>Use split on <code>\\n</code> to turn the current chunk into an array of lines. </p>\n\n<p>Perform your test on the appropriate lines, and either <code>print</code> - or not - depending on whether it passed. </p>\n\n<p>If you get stuck with that, then I'm sure a specific question including your code and where you're having problems will be well received here. </p>\n"}, {"comments": [{"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1548629451, "post_id": 33174090, "comment_id": 95598926, "body": "I see one portability problem with this code: You are assuming an &quot;empty line&quot; has length 1 (<code>&quot;\\n&quot;</code>, I guess). Some OSes use <code>&quot;\\r\\n&quot;</code> as line ends."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1548667788, "post_id": 33174090, "comment_id": 95608590, "body": "@U.Windl: No, they use <code>&quot;\\n&quot;</code> but interpret it differently. The problem only occurs when you&#39;re processing a MSWin file on a *nix."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1445008977, "creation_date": 1445008977, "answer_id": 33174090, "question_id": 33173900, "link": "https://stackoverflow.com/questions/33173900/delete-previous-and-next-lines-in-perl/33174090#33174090", "title": "delete previous and next lines in perl", "body": "<p>Keep an array buffer of the last four lines. When it's full, check the second line, print the lines or not, empty the buffer, repeat.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy @buffer;\n\nsub output {\n    print @buffer unless 1 == length $buffer[1];\n    @buffer = ();\n}\n\nwhile (&lt;&gt;) {\n    if (4 == @buffer) {\n        output();\n    }\n    push @buffer, $_;\n}\noutput();  # Don't forget to process the last four lines.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1445012106, "creation_date": 1445012106, "answer_id": 33175085, "question_id": 33173900, "link": "https://stackoverflow.com/questions/33173900/delete-previous-and-next-lines-in-perl/33175085#33175085", "title": "delete previous and next lines in perl", "body": "<p>If you chunk the data correctly, this becomes almost trivial.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\n# Use '@TWEETY' as the record separator to make it\n# easy to chunk the data.\nlocal $/ = '@TWEETY';\n\nwhile (&lt;DATA&gt;) {\n  # The first entry will be empty (as the separator\n  # is the first thing in the file). Skip that record.\n  next unless /\\S/;\n\n  # Skip any records with two consecutive newlines\n  # (as they will be the ones with the empty line 2)\n  next if /\\n\\n/;\n\n  # Print the remaining records\n  # (with $/ stuck back on the front)\n  print \"$/$_\";\n}\n\n__DATA__\n@TWEETY:150:000000000-ACFKE:1:2104:27858:17965\nAAATTAGCAAAAAACAATAACAAAACTGGGAAAATGCAATTTAACAACGAAAATTTTCCGAGAACTTGAAAGCGTACGAAAACGATACGCTCC\n+\nD1FFFB11FDG00EE0FFFA1110FAA1F/ABA0FGHEGDFEEFGDBGGGGFEHBFDDG/FE/EGH1@GF@F0AEEEEFHGGFEFFCEC/&gt;EE\n@TWEETY:150:000000000-ACFKE:1:1105:22044:20029\nAAAAAATATTAAAACTACGAATGCATAAATTATTTCGTTCGAAATAAACTCACACTCGTAACATTGAACTACGCGCTCC\n+\nCCFDDDFGGGGGGGGGGHGGHHHHGHHHHHHHHHHHHHHHGHHGHHHHHHHHHHHHHGHGHGGHHHHHHGHHEGGGGGG\n@TWEETY:150:000000000-ACFKE:1:2113:14793:7182\nTATATAAAGCGAGAGTAGAAACTTTTTAATTGACGCGGCGAGAAAGTATATAGCAACAAGCGAGCACCCGCTCC\n+\nBBFFFFFGGGGFFGGFGHHHHHHHHHHHHHHHHHGGAEEEAFGGGHHFEGHHGHHHHHGHHGGGGFHHGG?EEG\n@TWEETY:150:000000000-ACFKE:1:2109:5013:22093\nAAAAAAATAATTCATATCGCCATATCGACTGACAGATAATCTATCTATAATCATAACTTTTCCCTCGCTCC\n+\nDAFAADDGF1EAGG3EG3A00ECGDFFAEGFCHHCAGHBGEAGBFDEDGGHBGHGFGHHFHHHBDG?/FA/\n@TWEETY:150:000000000-ACFKE:1:2106:25318:19875\n\n+\nCCCCCCCCCCCCGGGGGGGGGGGGGGGGGGGGGGGGFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 5454336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e23632ab78c582b10706a43c62f00738?s=128&d=identicon&r=PG", "display_name": "Mila", "link": "https://stackoverflow.com/users/5454336/mila"}, "is_accepted": false, "score": 0, "last_activity_date": 1445246322, "creation_date": 1445246322, "answer_id": 33210780, "question_id": 33173900, "link": "https://stackoverflow.com/questions/33173900/delete-previous-and-next-lines-in-perl/33210780#33210780", "title": "delete previous and next lines in perl", "body": "<p>Thanks everyone for the feedback!\nIt was all really useful. Thanks to your suggestions, I explored all the options and learned the unless statement. \nThe easiest solution given my existing code, was just to add an unless statement at the end.</p>\n\n<pre><code>### Write to output, but remove non-desired Gs\nopen OUT, \"&gt;$outfile\";\n\nmy @accorder = @{$store0{\"accorder\"}};\nforeach my $acc (@accorder){\n# retrieve seq(2nd line) and qual(4th line)\nmy $seq = $store0{$acc}{\"seq\"};\nmy $qual = $store0{$acc}{\"qual\"};\n\n# clean out polyG at end\n$seq =~ s/G{3,}.{0,1}$//;\nmy $lenseq = length($seq);\nmy $lenqual = length($qual);   \nmy $startqual = $lenqual - $lenseq;\n$qual = substr($qual, 0, $lenseq); \n\n#the above was in order to remove multiple G characters at the end of the\n#second line, which is what led to empty lines (lines that were made up of\n#only Gs got cut out)\n\n# print to output, unless sequence has become empty\nunless($lenseq == 0){  #this is the unless statement I added\nprint OUT \"\\@$acc\\n$seq\\n+\\n$qual\\n\";\n}\n}\nclose(OUT);\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5454336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e23632ab78c582b10706a43c62f00738?s=128&d=identicon&r=PG", "display_name": "Mila", "link": "https://stackoverflow.com/users/5454336/mila"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1445246322, "creation_date": 1445008408, "last_edit_date": 1445010839, "question_id": 33173900, "link": "https://stackoverflow.com/questions/33173900/delete-previous-and-next-lines-in-perl", "title": "delete previous and next lines in perl", "body": "<p>I have the following file:</p>\n\n<pre><code>@TWEETY:150:000000000-ACFKE:1:2104:27858:17965\nAAATTAGCAAAAAACAATAACAAAACTGGGAAAATGCAATTTAACAACGAAAATTTTCCGAGAACTTGAAAGCGTACGAAAACGATACGCTCC\n+\nD1FFFB11FDG00EE0FFFA1110FAA1F/ABA0FGHEGDFEEFGDBGGGGFEHBFDDG/FE/EGH1@GF@F0AEEEEFHGGFEFFCEC/&gt;EE\n@TWEETY:150:000000000-ACFKE:1:1105:22044:20029\nAAAAAATATTAAAACTACGAATGCATAAATTATTTCGTTCGAAATAAACTCACACTCGTAACATTGAACTACGCGCTCC\n+\nCCFDDDFGGGGGGGGGGHGGHHHHGHHHHHHHHHHHHHHHGHHGHHHHHHHHHHHHHGHGHGGHHHHHHGHHEGGGGGG\n@TWEETY:150:000000000-ACFKE:1:2113:14793:7182\nTATATAAAGCGAGAGTAGAAACTTTTTAATTGACGCGGCGAGAAAGTATATAGCAACAAGCGAGCACCCGCTCC\n+\nBBFFFFFGGGGFFGGFGHHHHHHHHHHHHHHHHHGGAEEEAFGGGHHFEGHHGHHHHHGHHGGGGFHHGG?EEG\n@TWEETY:150:000000000-ACFKE:1:2109:5013:22093\nAAAAAAATAATTCATATCGCCATATCGACTGACAGATAATCTATCTATAATCATAACTTTTCCCTCGCTCC\n+\nDAFAADDGF1EAGG3EG3A00ECGDFFAEGFCHHCAGHBGEAGBFDEDGGHBGHGFGHHFHHHBDG?/FA/\n@TWEETY:150:000000000-ACFKE:1:2106:25318:19875\n\n+\nCCCCCCCCCCCCGGGGGGGGGGGGGGGGGGGGGGGGFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\n</code></pre>\n\n<p>The lines are in groups of four (each time there is a name, starting with @TWEETY, a string of letters, a + character, and another string of letters).</p>\n\n<p>The second and fourth lines should have the same number of characters.\nBut there are cases where the second line is empty, as in the last four lines.</p>\n\n<p>In these cases, I would like to get rid of the whole block (the previous line before the empty line and the next two lines).\nI have just started perl and have been trying to write a script for my problem, but am having a hard time. Does anyone have some feedback?\nThanks!</p>\n"}, {"tags": ["xml", "perl", "xml-simple"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1445004646, "post_id": 33170323, "comment_id": 54152574, "body": "I can&#39;t think of a reason why better XML modules could be unavailable to you, unless someone is holding your family hostage. Would you like to explain the problem?"}, {"owner": {"reputation": 1824, "user_id": 2086839, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/xK91o.jpg?s=128&g=1", "display_name": "Simon.", "link": "https://stackoverflow.com/users/2086839/simon"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1445006112, "post_id": 33170323, "comment_id": 54153617, "body": "Not particularly. There are many reasons why alternative libraries are unavailable in this issue. Since when was stackoverflow a site for interrogation?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445008508, "post_id": 33170323, "comment_id": 54155294, "body": "Note: While XML::Simple is quite bad for parsing XML, it&#39;s positively awful for writing XML. It will generate XML that&#39;s different from the XML you read in. Avoid this deprecated module."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445000177, "post_id": 33171028, "comment_id": 54149621, "body": "That&#39;s really the worst bit of XML::Simple - most of the requests we see are <i>insanely easy</i> with the various options available from the other parsers."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1445000223, "last_edit_date": 1445000223, "creation_date": 1445000036, "answer_id": 33171028, "question_id": 33170323, "link": "https://stackoverflow.com/questions/33170323/parse-xml-data-and-append-a-new-element-using-xmlsimple/33171028#33171028", "title": "Parse XML data and append a new element using XML::Simple", "body": "<p>The point of using <a href=\"http://p3rl.org/XML::Simple\" rel=\"nofollow\">XML::Simple</a> is to use Perl data structures, not XML in your code.</p>\n\n<p>Your problems show exactly why the module is discouraged. You have to use <code>ForceArray</code> to be able to easily change the number of the elements in a parent, and you have to clear <code>KeyAttr</code> to block a special handling of the <code>name</code> attribute.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse XML::Simple;\n\nmy $xml = &lt;&lt; '__XML__';\n&lt;person&gt;\n  &lt;appearance&gt;\n     &lt;param name=\"height\" value=\"6,3\"/&gt;\n  &lt;/appearance&gt;\n&lt;/person&gt;\n__XML__\n\nmy $simple = XMLin($xml, ForceArray =&gt; 1,\n                         KeepRoot   =&gt; 1,\n                         KeyAttr    =&gt; [],\n                  );\n\npush @{ $simple-&gt;{person}[0]{appearance}[0]{param} }, { name  =&gt; 'age',\n                                                        value =&gt; 22,\n                                                      };\nprint XMLout($simple, KeepRoot =&gt; 1);\n</code></pre>\n\n<p>For comparison, the same task in <a href=\"http://p3rl.org/XML::XSH2\" rel=\"nofollow\">XML::XSH2</a>, a wrapper around <a href=\"http://p3rl.org/XML::LibXML\" rel=\"nofollow\">XML::LibXML</a>:</p>\n\n<pre><code>open file.xml ;\nmy $p := insert element param append /person/appearance ;\nset $p/@name 'age' ;\nset $p/@value 22 ;\nsave :b ;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5453700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sZuvj.jpg?s=128&g=1", "display_name": "wenpeng", "link": "https://stackoverflow.com/users/5453700/wenpeng"}, "is_accepted": false, "score": 0, "last_activity_date": 1445004982, "last_edit_date": 1445004982, "creation_date": 1445004583, "answer_id": 33172562, "question_id": 33170323, "link": "https://stackoverflow.com/questions/33170323/parse-xml-data-and-append-a-new-element-using-xmlsimple/33172562#33172562", "title": "Parse XML data and append a new element using XML::Simple", "body": "<p>1.The reason you lose  tags is \"XMLin() normally discards the root element name. Setting the 'KeepRoot' option to '1' will cause the root element name to be retained.\"</p>\n\n<p>2.After reading xml from file, should operate the variable as perl data structure.</p>\n\n<pre><code>#! /usr/bin/perl\n\nuse strict;\nuse XML::Simple qw(:strict);\nuse Data::Dumper;\n\nmy $xml = XMLin('xml_import.xml', KeepRoot =&gt; 1, KeyAttr =&gt; [\"param\"], ForceArray =&gt; [\"param\"]);\nprint '-----$xml-----', \"\\n\", Dumper($xml), \"\\n\";\n\nmy $new_node = {'name' =&gt; 'age', 'value' =&gt; '22'};\npush $xml-&gt;{person}-&gt;{appearance}-&gt;{param}, $new_node;\nprint '-----Insert a new node to $xml-----', \"\\n\", Dumper($xml), \"\\n\";\n\nmy $new_xml = XMLout($xml, NoAttr =&gt; 1, NoEscape =&gt; 1, KeepRoot =&gt; 1, KeyAttr =&gt; []);\nprint '-----$new_xml-----', \"\\n\", $new_xml, \"\\n\";\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>#! /usr/bin/perl\n\nuse strict;\nuse XML::Simple qw(:strict);\nuse Data::Dumper;\n\nmy $xml = XMLin('xml_import.xml', KeepRoot =&gt; 1, KeyAttr =&gt; {param =&gt; \"+name\"}, ForceArray =&gt; [\"param\"]);\nprint '-----$xml-----', \"\\n\", Dumper($xml), \"\\n\";\n\nmy $new_node = {'name' =&gt; 'age', 'value' =&gt; '22'};\n$xml-&gt;{person}-&gt;{appearance}-&gt;{param}-&gt;{age} = $new_node;\nprint '-----Insert a new node to $xml-----', \"\\n\", Dumper($xml), \"\\n\";\n\nmy $new_xml = XMLout($xml, NoAttr =&gt; 1, NoEscape =&gt; 1, KeepRoot =&gt; 1, KeyAttr =&gt; {param =&gt; \"+name\"});\nprint '-----$new_xml-----', \"\\n\", $new_xml, \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 1824, "user_id": 2086839, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/xK91o.jpg?s=128&g=1", "display_name": "Simon.", "link": "https://stackoverflow.com/users/2086839/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 847, "favorite_count": 0, "accepted_answer_id": 33171028, "answer_count": 2, "score": -1, "last_activity_date": 1445004982, "creation_date": 1444997837, "last_edit_date": 1445004281, "question_id": 33170323, "link": "https://stackoverflow.com/questions/33170323/parse-xml-data-and-append-a-new-element-using-xmlsimple", "title": "Parse XML data and append a new element using XML::Simple", "body": "<p>I'm using <a href=\"http://metacpan.org/module/XML::Simple\" rel=\"nofollow\"><code>XML::Simple</code></a> and <a href=\"http://metacpan.org/module/XML::Dumper\" rel=\"nofollow\"><code>XML::Dumper</code></a>. I'm well aware of the issues surrounding the former module. If I could use an alternative library, I would.</p>\n\n<p>What I want to achieve is to load the XML, then append lines to it. This is my XML structure before the script has run.</p>\n\n<pre><code>&lt;person&gt;\n  &lt;appearance&gt;\n     &lt;param name=\"height\" value=\"6,3\"/&gt;\n  &lt;/appearence&gt;\n&lt;/person&gt;\n</code></pre>\n\n<p>The script, or what I intended to code, should load this XML from a file, then append a <code>&lt;param&gt;</code> element onto <code>&lt;appearence&gt;</code>. I've attempted it using this code:</p>\n\n<pre><code>use warnings;\n\nuse XML::Simple;\nuse XML::Dumper;\n\nmy $xml = XMLin('xml_import.xml');\n\n$xml-&gt;{appearence} .= qq{&lt;param name=\"age\" value=\"22\" /&gt;};\nmy $new_xml = XMLout($xml, noattr =&gt; 1, NoEscape =&gt; 1);\n\nopen(FILE, \"&gt;xml_import.xml\");\nprint FILE $new_xml;\nclose FILE;\n</code></pre>\n\n<p>Unfortunately the output is this:</p>\n\n<pre><code>&lt;opt&gt;\n  &lt;appearence&gt;HASH(0x1722190)&lt;param name=\"age\" value=\"22\" /&gt;&lt;/appearence&gt;\n&lt;/opt&gt;\n</code></pre>\n\n<p>Not only do I lose my original <code>&lt;person&gt;</code> tags to <code>&lt;opt&gt;</code> but that <code>HASH</code> string replaces what I assume what was the existing <code>&lt;param&gt;</code> element. I've read over the documentation for <code>XML::Simple</code> but I cannot spot what argument should be used to prevent this from happening.</p>\n"}, {"tags": ["string", "perl", "numeric", "data-conversion"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 5, "creation_date": 1444998038, "post_id": 33169386, "comment_id": 54148249, "body": "Seems strange that you would ask this as a question rather than just trying it out."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1444997642, "post_id": 33169499, "comment_id": 54148008, "body": "I think that about sums it up! Shame you let <code>dualvars</code> out of its cage though"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1445003598, "post_id": 33169499, "comment_id": 54151877, "body": "If someone wants new ways of shooting themselves in the foot, then who am I to argue?"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 9, "last_activity_date": 1445194295, "last_edit_date": 1445194295, "creation_date": 1444995292, "answer_id": 33169499, "question_id": 33169386, "link": "https://stackoverflow.com/questions/33169386/numeric-to-string-conversion-in-perl/33169499#33169499", "title": "Numeric to String conversion in Perl", "body": "<p>If you turn on <code>strict</code> and <code>warnings</code> - like you really should - it will warn you. </p>\n\n<p>Which is good, because it's a bad idea. </p>\n\n<p>If you try your code, you'll see your second example gives:</p>\n\n<pre><code>my $val=\"12fred34\"*\" 3\"   ;\nprint $val;\n</code></pre>\n\n<p>Gives:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Argument \"12fred34\" isn't numeric in multiplication (*)\n36\n</code></pre>\n\n<p><code>perl</code> is \"finding\" the 12, and using that, discarding the rest.</p>\n\n<p>Your first example by the way - also warns:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Argument \"120.43sunil\" isn't numeric in addition (+)\n</code></pre>\n\n<p>But really - this is just a bad idea. </p>\n\n<p><code>perl</code> implicitly converts string to number when it can, but will warn if it can't. That's because in your second case, it's ambiguous. Should the text be zero? Ignored? Is this even one number, or is it two? </p>\n\n<p>If you really need to convert to a number a part of a string, you should really parse the string first, and extract the values you want. That can be as simple as </p>\n\n<pre><code>$val =~ s/\\D//g; \n</code></pre>\n\n<p>But it might be:</p>\n\n<pre><code>@vals = $str =~ m/(\\d+)/g; \n</code></pre>\n\n<p>And if you really want to do fruity things with numbers and strings, look at <a href=\"http://perldoc.perl.org/Scalar/Util.html#dualvar\" rel=\"nofollow noreferrer\"><code>dualvar</code></a>*:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Scalar::Util qw ( dualvar ); \n\nmy $val = dualvar ( 120.43, \"sunil\" );\n\nprint $val,\"\\n\";\nprint $val + 0; #force numeric context;\n</code></pre>\n\n<p>And whilst we're at it - don't use <code>$a</code> or <code>$b</code> - they are variables with a specific use in <code>perl</code> - <code>sort</code>ing. You shouldn't really use single letter variables anyway, it's a bad coding habit. </p>\n\n<p>* I wouldn't actually recommend messing around with <code>dualvars</code> - they're really cool, but can make some really horrible code if used badly, which is what'll <em>probably</em> happen if you're \"kind a new to perl programming\"</p>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1445005632, "post_id": 33169952, "comment_id": 54153284, "body": "<code>&#39;0 but true&#39;</code> is also a special case"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445069067, "post_id": 33169952, "comment_id": 54174914, "body": "0 but true is where I might be tempted to break out Contextual::Return which lets you tell the difference between boolean and scalar contexts."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445082371, "post_id": 33169952, "comment_id": 54178349, "body": "@Sobrique Contextual::Return is an awful idea and (like all Damian modules) should not be used except in toy programs IMHO."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1445084118, "post_id": 33169952, "comment_id": 54178846, "body": "Probably, but it is one way of handling 0 but true cases."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 0, "last_activity_date": 1445019349, "last_edit_date": 1445019349, "creation_date": 1444996684, "answer_id": 33169952, "question_id": 33169386, "link": "https://stackoverflow.com/questions/33169386/numeric-to-string-conversion-in-perl/33169952#33169952", "title": "Numeric to String conversion in Perl", "body": "<p>String to number conversion in Perl works a lot like the C function <code>strtod</code>. That is, Perl expects optional leading whitespace, an optional sign (<code>+</code> or <code>-</code>), some digits (optionally containing <code>.</code>), and an optional exponent (<code>e</code> or <code>E</code>, an optional sign (<code>+</code> or <code>-</code>), some more digits).</p>\n\n<p>As special cases, the words <code>NaN</code> and <code>Inf</code> (case insensitive) are also recognized as numbers.</p>\n\n<p>If the string contains more characters after that, they are ignored but trigger a warning (if warnings are enabled). There's one exception: The string <code>\"0 but true\"</code> converts to <code>0</code> without warning.</p>\n\n<p>If the string doesn't begin with a valid number, it returns <code>0</code> (and also warns).</p>\n"}], "owner": {"reputation": 3766, "user_id": 3276292, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1626123588/picture?type=large", "display_name": "TRomesh", "link": "https://stackoverflow.com/users/3276292/tromesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6613, "favorite_count": 1, "accepted_answer_id": 33169499, "answer_count": 2, "score": 1, "last_activity_date": 1445194295, "creation_date": 1444994928, "last_edit_date": 1444995118, "question_id": 33169386, "link": "https://stackoverflow.com/questions/33169386/numeric-to-string-conversion-in-perl", "title": "Numeric to String conversion in Perl", "body": "<p>According to my knowledge when ever a string like     </p>\n\n<pre><code>$a=\"120.43sunil\"+5;    \n</code></pre>\n\n<p>it will give a result like </p>\n\n<pre><code>$a=125.43     \n</code></pre>\n\n<p>since string is not a number the \"sunil\" part will be omitted.\nwhat if we get some thing like    </p>\n\n<pre><code>$a=\"12fred34\"*\" 3\"   \n</code></pre>\n\n<p>will the string be converted to 1234 or 12034 ?\nim kind a new to perl programming.  </p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1444992949, "post_id": 33168747, "comment_id": 54145165, "body": "Without more information, it&#39;s hard to say. But probably not. Backtrack a bit and explain your problem and what you&#39;ve tried as a solution, and we might be able to give an answer. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 19, "user_id": 4929101, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/39f38ef8716cfbd90233d01e258a0c14?s=128&d=identicon&r=PG&f=1", "display_name": "gettingthere", "link": "https://stackoverflow.com/users/4929101/gettingthere"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1444993248, "post_id": 33168747, "comment_id": 54145323, "body": "@Sobrique My problem is restarting the script and the solution I tried is <code>exec($^X, $0, @ARGV);</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1444993497, "post_id": 33168747, "comment_id": 54145485, "body": "That sounds an awful lot like an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> - it doesn&#39;t make a lot of sense to restart a script like that, especially not when in a <code>cgi</code> context where scripts are spawned by your httpd."}, {"owner": {"reputation": 19, "user_id": 4929101, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/39f38ef8716cfbd90233d01e258a0c14?s=128&d=identicon&r=PG&f=1", "display_name": "gettingthere", "link": "https://stackoverflow.com/users/4929101/gettingthere"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1444994923, "post_id": 33168747, "comment_id": 54146358, "body": "@Sobrique Ah, I see what you mean. I am coding a game which has the option to play again. Basically when they click play again I want the script to restart. Is using the aforementioned approach correct?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1444995403, "post_id": 33168747, "comment_id": 54146631, "body": "But on a web page? Why not instead just refresh the page, because that&#39;ll start a new instance of the script anyway. If you&#39;re not doing it via a web page, then a <code>while</code> loop is much more efficient."}, {"owner": {"reputation": 19, "user_id": 4929101, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/39f38ef8716cfbd90233d01e258a0c14?s=128&d=identicon&r=PG&f=1", "display_name": "gettingthere", "link": "https://stackoverflow.com/users/4929101/gettingthere"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1444996519, "post_id": 33168747, "comment_id": 54147329, "body": "@Sobrique Thanks got it"}], "answers": [{"tags": [], "owner": {"reputation": 2847, "user_id": 5049185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46f0d2dc8ee06f428e43d0d115a57c4f?s=128&d=identicon&r=PG&f=1", "display_name": "syck", "link": "https://stackoverflow.com/users/5049185/syck"}, "is_accepted": false, "score": 2, "last_activity_date": 1445005797, "last_edit_date": 1445005797, "creation_date": 1444993246, "answer_id": 33168874, "question_id": 33168747, "link": "https://stackoverflow.com/questions/33168747/restarting-perl-cgi-script/33168874#33168874", "title": "Restarting perl cgi script", "body": "<p>The first time you output it, it is used as a header (and not displayed), the second time as part of the content.</p>\n\n<p>Add a parameter to @ARGV so that you can check whether the script was already restarted and therefore the header should not be sent anymore.</p>\n\n<p>EDIT: I have just seen what is your intended use for this script. In an online game context, it would of course be preferable to refresh, redirect or simply provide a link or form submission to run the script again.</p>\n\n<p>Solutions like this, where you restart a script (or run another) within the same http connection rather make sense for workhorse or surveillance scripts, for example to keep the memory footprint low. But it is a very rarely seen animal.</p>\n"}], "owner": {"reputation": 19, "user_id": 4929101, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/39f38ef8716cfbd90233d01e258a0c14?s=128&d=identicon&r=PG&f=1", "display_name": "gettingthere", "link": "https://stackoverflow.com/users/4929101/gettingthere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1445005797, "creation_date": 1444992869, "last_edit_date": 1444993207, "question_id": 33168747, "link": "https://stackoverflow.com/questions/33168747/restarting-perl-cgi-script", "title": "Restarting perl cgi script", "body": "<p>After searching around I found this command <code>exec($^X, $0, @ARGV);</code> which restarts a perl script. However when I do this my script runs normally but has <code>Content-Type: text/html</code> infront of the expected output. I was wondering if this was the correct way to restart my perl cgi script.</p>\n\n<p>EDIT:</p>\n\n<pre><code>elsif (defined param(\"again\")){\n    exec($^X, $0, @ARGV);\n    exit;\n}\n</code></pre>\n\n<p>When the script restarts it's supposed to print <code>My guess is: 50</code> but it prints <code>Content-Type: text/html My guess is: 50</code></p>\n"}, {"tags": ["javascript", "perl", "pdf", "perl-module"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5453700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sZuvj.jpg?s=128&g=1", "display_name": "wenpeng", "link": "https://stackoverflow.com/users/5453700/wenpeng"}, "is_accepted": false, "score": 1, "last_activity_date": 1445011435, "creation_date": 1445011435, "answer_id": 33174861, "question_id": 33167636, "link": "https://stackoverflow.com/questions/33167636/processing-pdf-files-with-javascript-enhanced-forms-using-perl/33174861#33174861", "title": "Processing PDF files with Javascript-enhanced forms using Perl", "body": "<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse PDF::Reuse;\n\nprFile('output.pdf');\n\nmy $left_page = 1;\nmy $page_number = 1;\n\nwhile ($left_page) {\n    prForm(\"form.pdf\", $page_number);\n    # Fill data\n    prText(100, 100, localtime) if $page_number == 1;\n\n    $left_page = prSinglePage(\"form.pdf\");\n    $page_number ++\n}\n\nprEnd();\n</code></pre>\n"}], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1445011435, "creation_date": 1444989603, "question_id": 33167636, "link": "https://stackoverflow.com/questions/33167636/processing-pdf-files-with-javascript-enhanced-forms-using-perl", "title": "Processing PDF files with Javascript-enhanced forms using Perl", "body": "<p><strong>Task:</strong> Add some data (say localtime) to PDF file (This PDF file contains form)  </p>\n\n<p><strong>Sample file:</strong> <a href=\"http://www.immihelp.com/nri/forms/passport-application-form.pdf\" rel=\"nofollow noreferrer\">http://www.immihelp.com/nri/forms/passport-application-form.pdf</a></p>\n\n<p>I have tried 3 popular modules so far. <a href=\"https://metacpan.org/pod/PDF::API2\" rel=\"nofollow noreferrer\">PDF::API2</a>, <a href=\"https://metacpan.org/pod/CAM::PDF\" rel=\"nofollow noreferrer\">CAM::PDF</a> and <a href=\"https://metacpan.org/pod/PDF::Reuse\" rel=\"nofollow noreferrer\">PDF::Reuse</a>.</p>\n\n<p><strong>Try 1:</strong> <a href=\"https://metacpan.org/pod/PDF::API2\" rel=\"nofollow noreferrer\">PDF::API2</a></p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse PDF::API2;\nmy $pdf = PDF::API2-&gt;open('form.pdf');\n</code></pre>\n\n<blockquote>\n  <p>Error: The PDF file uses a cross-reference stream, which is not yet\n  supported (see Know n Issues in the PDF::API2 documentation) at\n  C:\\Perl\\site\\lib/PDF/API2/Basic/PDF/ File.pm line 1048.</p>\n</blockquote>\n\n<p><strong>Try 2:</strong> <a href=\"https://metacpan.org/pod/CAM::PDF\" rel=\"nofollow noreferrer\">CAM::PDF</a></p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dump qw(dump);\nuse CAM::PDF;\nmy $pdf = CAM::PDF-&gt;new('form.pdf') or die \"failed\";\n$pdf-&gt;appendPageContent(1, localtime);\n$pdf-&gt;save();\n</code></pre>\n\n<blockquote>\n  <p>Error: This stream is too complex for me to write... Giving up</p>\n</blockquote>\n\n<p>I checked the code and found this module does not support complex streams at the moment</p>\n\n<p><a href=\"https://metacpan.org/source/CDOLAN/CAM-PDF-1.60/lib/CAM/PDF.pm\" rel=\"nofollow noreferrer\">From PDF.pm</a></p>\n\n<pre><code># TODO: Handle more complex streams ...\n die \"This stream is too complex for me to write... Giving up\\n\";\n</code></pre>\n\n<p>When I tried <code>cleanoutput</code> method instead of <code>save</code> it worked correctly, but on opening PDF I get the below message. I also observed that now I'm unable to enter data into the form.</p>\n\n<p>Full image URL: <a href=\"https://i.stack.imgur.com/anAMW.png\" rel=\"nofollow noreferrer\">http://i.stack.imgur.com/anAMW.png</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/anAMW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/anAMW.png\" alt=\"enter image description here\"></a> </p>\n\n<p><strong>Try 3:</strong> <a href=\"https://metacpan.org/pod/PDF::Reuse\" rel=\"nofollow noreferrer\">PDF::Reuse</a></p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse PDF::Reuse;\nprFile('output.pdf');\nprForm(\"form.pdf\");\nprPage();\nprText(100,100, localtime);\nprEnd();\n</code></pre>\n\n<p><strong>Issue:</strong> Above code correctly adds the data but 2nd page of the original PDF is no longer available in <code>output.pdf</code>. </p>\n\n<p>I noticed that Merlyn (Randal L Schwartz) had also asked similar question on perlmonks (<a href=\"http://www.perlmonks.org/?node_id=556764\" rel=\"nofollow noreferrer\">http://www.perlmonks.org/?node_id=556764</a>).</p>\n"}, {"tags": ["perl", "redirect", "mojolicious"], "comments": [{"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 1, "creation_date": 1444988699, "post_id": 33167200, "comment_id": 54142579, "body": "Have you tried anything? Can you show us code?"}, {"owner": {"reputation": 570, "user_id": 847338, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fdb1040cbc167fe242c38f628b1b3bfe?s=128&d=identicon&r=PG", "display_name": "Franz Kafka", "link": "https://stackoverflow.com/users/847338/franz-kafka"}, "reply_to_user": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1444990492, "post_id": 33167200, "comment_id": 54143752, "body": "No, I haven&#39;t tried anything because I&#39;m not really sure where to start on this. I was thinking about grabbing referer from the header and then doing a redirect_to on that, but I&#39;m not really sure that&#39;s the best method for doing this.  I really don&#39;t see why you need to see any code for this question."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1444991539, "post_id": 33167200, "comment_id": 54144321, "body": "Checking the headers is a fine start. Alternatively you could add some parameter to the login form that is set on each page, and then send the user back to that page."}, {"owner": {"reputation": 570, "user_id": 847338, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fdb1040cbc167fe242c38f628b1b3bfe?s=128&d=identicon&r=PG", "display_name": "Franz Kafka", "link": "https://stackoverflow.com/users/847338/franz-kafka"}, "edited": false, "score": 0, "creation_date": 1444993052, "post_id": 33167200, "comment_id": 54145224, "body": "Out of curiosity, are there are pros and cons of one option vs the other? I&#39;m not asking for code, I understand how to do the code part, just trying to understand the best way to accomplish this."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1444997629, "post_id": 33167200, "comment_id": 54147998, "body": "Well, the parameter requires you to always have that parameter. That&#39;s something visible to the user. But a lot of websites do it. So no problem there. The referrer will basically do the same, but without that visibility. In each case, make sure to check if it&#39;s there and if it&#39;s local, and decide what to do if not. E.g. the user might have bookmarked the login page."}], "answers": [{"comments": [{"owner": {"reputation": 1474, "user_id": 751910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4d4ee1e65bd8c86f66c43eecfe42a3e6?s=128&d=identicon&r=PG", "display_name": "alexk", "link": "https://stackoverflow.com/users/751910/alexk"}, "edited": false, "score": 1, "creation_date": 1445070765, "post_id": 33169008, "comment_id": 54175320, "body": "Unless the referer is the login page itself, as might be the case if you type in wrong username/password and get redirected back to the login page."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 1, "creation_date": 1480357448, "post_id": 33169008, "comment_id": 68918567, "body": "Also do not forget to check that you refer back to your site and not to third party"}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 9, "last_activity_date": 1444993683, "creation_date": 1444993683, "answer_id": 33169008, "question_id": 33167200, "link": "https://stackoverflow.com/questions/33167200/redirecting-to-previous-page-after-login-mojolicious/33169008#33169008", "title": "Redirecting to previous page after login? Mojolicious", "body": "<p>You could check referrer. </p>\n\n<pre><code>$controller-&gt;redirect_to($controller-&gt;req-&gt;headers-&gt;referrer);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 497, "user_id": 668247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753585e9c97a4009c17adffe41f9f47?s=128&d=identicon&r=PG", "display_name": "vikin9", "link": "https://stackoverflow.com/users/668247/vikin9"}, "is_accepted": false, "score": 2, "last_activity_date": 1446107975, "creation_date": 1446107975, "answer_id": 33409433, "question_id": 33167200, "link": "https://stackoverflow.com/questions/33167200/redirecting-to-previous-page-after-login-mojolicious/33409433#33409433", "title": "Redirecting to previous page after login? Mojolicious", "body": "<p>It is maybe not as beautiful solution as the one above, but I use a parameter to pass the url of 'previous' page (back_url). If the parameter is empty, I can setup a default page to land on.</p>\n\n<pre><code>my $self = shift;\nmy $back_url = $self-&gt;param('back_url');\n$back_url = '/publications' if $back_url eq $self-&gt;req-&gt;url-&gt;to_abs or $back_url eq '';\n# code here\n$self-&gt;redirect_to($back_url);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2262, "user_id": 1681985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XfTOr.jpg?s=128&g=1", "display_name": "arhak", "link": "https://stackoverflow.com/users/1681985/arhak"}, "is_accepted": false, "score": 0, "last_activity_date": 1589796321, "last_edit_date": 1589796321, "creation_date": 1589794496, "answer_id": 61866595, "question_id": 33167200, "link": "https://stackoverflow.com/questions/33167200/redirecting-to-previous-page-after-login-mojolicious/61866595#61866595", "title": "Redirecting to previous page after login? Mojolicious", "body": "<p>based on <a href=\"https://stackoverflow.com/a/33169008/1681985\">Chankey's answer</a> , <a href=\"https://stackoverflow.com/q/33167200/#comment54175320_33169008\">alexk's comment</a> and <a href=\"https://stackoverflow.com/q/33167200/#comment68918567_33169008\">Eugen's comment</a></p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$app-&gt;helper(redirect_to_referrer_or_homepage =&gt; sub {\n    my ($c) = @_;\n\n    if (my $r = $c-&gt;req-&gt;headers-&gt;referrer) {\n        $c-&gt;app-&gt;log-&gt;debug('Referrer: ' . $r);\n\n        # both to_abs for comparison\n        $r = Mojo::URL-&gt;new($r)-&gt;to_abs;\n        my $login = $c-&gt;url_for('login')-&gt;to_abs;\n\n        # Eugen's: check that you refer back to your site and not to third party\n        if ($r-&gt;host eq $login-&gt;host) {\n\n            # alexk's: Unless the referer is the login page itself\n            unless ($r eq $login) {\n                $c-&gt;redirect_to($r);\n                return; # bail\n            }\n        }\n    }\n\n    $c-&gt;redirect_to('/');\n});\n</code></pre>\n\n<p>to be used like:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$r-&gt;get('/login' =&gt; sub {\n    my $c = shift;\n    if (...) {\n        $c-&gt;redirect_to_referrer_or_homepage();\n        return; # bail\n    }\n    else {\n        ...\n    }\n})-&gt;name('login');\n</code></pre>\n"}], "owner": {"reputation": 570, "user_id": 847338, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fdb1040cbc167fe242c38f628b1b3bfe?s=128&d=identicon&r=PG", "display_name": "Franz Kafka", "link": "https://stackoverflow.com/users/847338/franz-kafka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 847, "favorite_count": 1, "accepted_answer_id": 33169008, "answer_count": 3, "score": 4, "last_activity_date": 1589796321, "creation_date": 1444988510, "question_id": 33167200, "link": "https://stackoverflow.com/questions/33167200/redirecting-to-previous-page-after-login-mojolicious", "title": "Redirecting to previous page after login? Mojolicious", "body": "<p>The title pretty much summarizes exactly my problem. I have my login controller, and I'd like to redirect to previous page after login. E.g., If I am viewing the Contact Us page, then I log in, I'd like to be redirected back to the Contact Us page. Just wondering the best way to achieve this.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1444985901, "creation_date": 1444985901, "answer_id": 33166327, "question_id": 33166075, "link": "https://stackoverflow.com/questions/33166075/perl-regular-expression-pattern-matching/33166327#33166327", "title": "perl regular expression pattern matching", "body": "<p>You don't capture the column after <code>\\d+</code>. Add parentheses to do so.</p>\n\n<p><code>.*</code> is <em>greedy</em>, i.e. it matches as much as it can. Add a <code>?</code> to make it <em>frugal</em>:</p>\n\n<pre><code>if ($line =~ /^(CUSTEVSUMMROW_GPRS|CUSTEVSUMMROW).*?\\s(.*?)\\|(\\d+)\\|(.*?)\\|/)\n</code></pre>\n\n<p>You can also rewrite the alternative as</p>\n\n<pre><code>(CUSTEVSUMMROW(?:_GPRS)?)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1444986412, "last_edit_date": 1444986412, "creation_date": 1444985981, "answer_id": 33166357, "question_id": 33166075, "link": "https://stackoverflow.com/questions/33166075/perl-regular-expression-pattern-matching/33166357#33166357", "title": "perl regular expression pattern matching", "body": "<p>Given what you have there:</p>\n\n<pre><code>if($line=~m/^(CUSTEVSUMMROW_GPRS|CUSTEVSUMMROW).*?\\s(.*?)\\|(\\d+)\\|(.*?)\\|(.*?)$/)\n{\n    $tag=$1;\n    $lineTxt=$2;\n    $usage = $3;\n    $units = $4;\n    $amt = $5;\n}\n</code></pre>\n\n<p>But I'd suggest that's not the best way to approach this problem - I'd be thinking using <code>split</code> and processing your first field separately. </p>\n\n<p>Something like this maybe:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy @fields = qw ( tag lineTxt usage units amt );\n\nwhile (&lt;DATA&gt;) {\n    my ( $first_field, @record )  = split '\\|';\n\n    #split the first field on _just_ the first space.\n    unshift( @record, $first_field =~ m/^(\\w+) (.*)$/ );\n\n    #use a hash slice to put that record into a hash of named keys.\n    my %data;\n    @data{@fields} = @record;\n    print Dumper \\%data;\n\n    # can of course, make this an array of hashes quite easily. \n}\n\n\n__DATA__\nCUSTEVSUMMROW_GPRS GPRS - Nova Subscriber Non-Smartphone Package|3126|GB| | \nCUSTEVSUMMROW_GPRS GPRS - Nova Subscriber Smartphone Package|3126|GB| | \nCUSTEVSUMMROW_GPRS GPRS - Nova Subscriber Non-Smartphone Package -  Charged|3126|GB|7500000|234446\n</code></pre>\n\n<p>This prints each record as:</p>\n\n<pre><code>$VAR1 = {\n          'units' =&gt; 'GB',\n          'tag' =&gt; 'CUSTEVSUMMROW_GPRS',\n          'amt' =&gt; '7500000',\n          'usage' =&gt; '3126',\n          'lineTxt' =&gt; 'GPRS - Nova Subscriber Non-Smartphone Package -  Charged'\n        };\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5303630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e09426b1ab759084727901e7f2d637f8?s=128&d=identicon&r=PG&f=1", "display_name": "RAVJI", "link": "https://stackoverflow.com/users/5303630/ravji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 33166357, "answer_count": 2, "score": 0, "last_activity_date": 1444986412, "creation_date": 1444985077, "last_edit_date": 1444985301, "question_id": 33166075, "link": "https://stackoverflow.com/questions/33166075/perl-regular-expression-pattern-matching", "title": "perl regular expression pattern matching", "body": "<p>Input as GMF File :</p>\n\n<pre><code>CUSTEVSUMMROW_GPRS GPRS - Nova Subscriber Non-Smartphone Package|3126|GB| | \nCUSTEVSUMMROW_GPRS GPRS - Nova Subscriber Smartphone Package|3126|GB| | \nCUSTEVSUMMROW_GPRS GPRS - Nova Subscriber Non-Smartphone Package -  Charged|3126|GB|7500000|234446\n</code></pre>\n\n<p>In the perl code, I am using the below to extract the strings from the line</p>\n\n<pre><code>if($line=~m/^(CUSTEVSUMMROW_GPRS|CUSTEVSUMMROW).*?\\s(.*?)\\|(\\d+)\\|.*\\|(.*?)$/)\n{\n    $tag=$1;\n    $lineTxt=$2;\n    $usage = $3;\n    $amt = $4;\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>tag :: CUSTEVSUMMROW_GPRS  lineTxt :: GPRS - Nova Subscriber Non-Smartphone Package  usage :: 3126  amt ::\ntag :: CUSTEVSUMMROW_GPRS  lineTxt :: GPRS - Nova Subscriber Smartphone Package  usage :: 3126  amt ::\ntag :: CUSTEVSUMMROW_GPRS  lineTxt :: GPRS - Nova Subscriber Non-Smartphone Package - Charged usage :: 3126 amt :: 234446\n</code></pre>\n\n<p>How can I retrieve/print the units used is MB or GB .Can anyone please help me out.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1444979216, "post_id": 33163584, "comment_id": 54137483, "body": "thanks for your coding. However I couldn&#39;t print the values in text files. I don&#39;t where is my mistake. Added in the summary..."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1444980572, "post_id": 33163584, "comment_id": 54138165, "body": "Add <code>use encoding &#39;utf-8&#39;;</code>."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1444981183, "post_id": 33163584, "comment_id": 54138477, "body": "&#240;\u201d\u201e, : its replacing some of the junks."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1444981591, "post_id": 33163584, "comment_id": 54138661, "body": "I have no idea what you just said, sorry."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 1, "last_activity_date": 1444975800, "creation_date": 1444975800, "answer_id": 33163584, "question_id": 33163472, "link": "https://stackoverflow.com/questions/33163472/convert-non-ascii-into-unicode-characters/33163584#33163584", "title": "Convert Non-Ascii into unicode characters", "body": "<pre><code>use utf8;\nuse feature 'unicode_strings';\n\nprintf \"%x\\n\", ord('\ud835\udeb2');\n# =&gt; 1D6B2\n</code></pre>\n\n<p>More details on Unicode in Perl: <a href=\"http://perldoc.perl.org/perlunicode.html\" rel=\"nofollow\">perlunicode</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1444986164, "creation_date": 1444986164, "answer_id": 33166412, "question_id": 33163472, "link": "https://stackoverflow.com/questions/33163472/convert-non-ascii-into-unicode-characters/33166412#33166412", "title": "Convert Non-Ascii into unicode characters", "body": "<p>You need to ensure that your program expects the input to be utf8 bytes and that the output filehandle expects to receive utf8 bytes.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\n# Automatically decode data from filehandles\nuse open ':encoding(utf8)';\n\n# Tell STDOUT we'll be writing utf8\nbinmode STDOUT, ':utf8';\n\nopen my $utf8_fh, '&lt;', 'utf8.txt' or die $!;\n\nwhile (&lt;$utf8_fh&gt;) {\n  chomp;\n\n  foreach my $c (split) {\n    printf \"$c: %x\\n\", ord($c);\n  }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>\ud835\udc9c: 1d49c\n\ud835\udc9e: 1d49e\n\ud835\udc9f: 1d49f\n\ud835\udca2: 1d4a2\n\ud835\udca5: 1d4a5\n...\n</code></pre>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 33163584, "answer_count": 2, "score": 2, "last_activity_date": 1444986164, "creation_date": 1444975231, "last_edit_date": 1444979165, "question_id": 33163472, "link": "https://stackoverflow.com/questions/33163472/convert-non-ascii-into-unicode-characters", "title": "Convert Non-Ascii into unicode characters", "body": "<p>I need to convert Non-ASCII characters into Unicode Values using perl programming:</p>\n\n<p>\ud835\udeb2,     \ud835\udec0,     \ud835\udebd,     \ud835\udeb7,     \ud835\udebf,     \ud835\udeba,     \ud835\udeaf,     \ud835\udebc,     \ud835\udeb5,     \ud835\udec2,     \ud835\udec3,     \ud835\uded8,     \ud835\udec5,     \ud835\udec6,     \ud835\udedc,     \ud835\udec8,     \ud835\udec4,     \ud835\udfcb,     \ud835\udeca,     \ud835\udecb,     \ud835\udede,     \ud835\udecc,     \ud835\udecd,     \ud835\udece,     \ud835\udeda,     \ud835\uded7,     \ud835\udedf,     \ud835\uded1,     \ud835\udee1,     \ud835\uded9,     \ud835\uded2,     \ud835\udee0,     \ud835\uded4,     \ud835\uded3,     \ud835\uded5,     \ud835\udec9,     \ud835\udedd,     \ud835\uded6,     \ud835\udecf,     \ud835\udec7</p>\n\n<p>\ud835\udeb2 = \\U+1D6B2 (&amp;#x1D6B2) ....</p>\n\n<p>The above characters are in double-struck or fraktur however I could not able convert these into Unicode values. If any modules available please point out.</p>\n\n<p>Some one could help me on this one.</p>\n\n<pre><code>my @arry = qw(\ud835\udc9c \ud835\udc9e \ud835\udc9f \ud835\udca2 \ud835\udca5 \ud835\udca6 \ud835\udca9 \ud835\udcaa \ud835\udcab \ud835\udcac \ud835\udcae \ud835\udcaf \ud835\udcb0 \ud835\udcb1 \ud835\udcb2 \ud835\udcb3 \ud835\udcb4 \ud835\udcb5 \ud835\udcb6 \ud835\udcb7 \ud835\udcb8 \ud835\udcb9 \ud835\udcbb \ud835\udcbd \ud835\udcbe \ud835\udcbf \ud835\udcc0 \ud835\udcc1 \ud835\udcc2 \ud835\udcc3 \ud835\udcc5 \ud835\udcc6 \ud835\udcc7 \ud835\udcc8 \ud835\udcc9 \ud835\udcca \ud835\udccb \ud835\udccc \ud835\udccd \ud835\udcce \ud835\udccf \ud835\udd04 \ud835\udd05 \ud835\udd07 \ud835\udd08 \ud835\udd09 \ud835\udd0a \ud835\udd0d \ud835\udd0e \ud835\udd0f \ud835\udd10 \ud835\udd11 \ud835\udd12 \ud835\udd13 \ud835\udd14 \ud835\udd16 \ud835\udd17 \ud835\udd18 \ud835\udd19 \ud835\udd1a \ud835\udd1b \ud835\udd1c \ud835\udd1e \ud835\udd1f \ud835\udd20 \ud835\udd21 \ud835\udd22 \ud835\udd23 \ud835\udd24 \ud835\udd25 \ud835\udd26 \ud835\udd27 \ud835\udd28 \ud835\udd29 \ud835\udd2a \ud835\udd2b \ud835\udd2c \ud835\udd2d \ud835\udd2e \ud835\udd2f \ud835\udd30 \ud835\udd31 \ud835\udd32 \ud835\udd33 \ud835\udd34 \ud835\udd35 \ud835\udd36 \ud835\udd37 \ud835\udd38 \ud835\udd39 \ud835\udd3b \ud835\udd3c \ud835\udd3d \ud835\udd3e \ud835\udd40 \ud835\udd41 \ud835\udd42 \ud835\udd43 \ud835\udd44 \ud835\udd46 \ud835\udd4a \ud835\udd4b \ud835\udd4c \ud835\udd4d \ud835\udd4e \ud835\udd4f \ud835\udd50 \ud835\udd52 \ud835\udd53 \ud835\udd54 \ud835\udd55 \ud835\udd56 \ud835\udd57 \ud835\udd58 \ud835\udd59 \ud835\udd5a \ud835\udd5b \ud835\udd5c \ud835\udd5d \ud835\udd5e \ud835\udd5f \ud835\udd60 \ud835\udd61 \ud835\udd62 \ud835\udd63 \ud835\udd64 \ud835\udd65 \ud835\udd66 \ud835\udd67 \ud835\udd68 \ud835\udd69 \ud835\udd6a \ud835\udd6b \ud835\udeaa \ud835\udeab \ud835\udeaf \ud835\udeb2 \ud835\udeb5 \ud835\udeb7 \ud835\udeba \ud835\udebc \ud835\udebd \ud835\udebf \ud835\udec0 \ud835\udec2 \ud835\udec3 \ud835\udec4 \ud835\udec5 \ud835\udec6 \ud835\udec7 \ud835\udec8 \ud835\udec9 \ud835\udeca \ud835\udecb \ud835\udecc \ud835\udecd \ud835\udece \ud835\udecf \ud835\uded1 \ud835\uded2 \ud835\uded3 \ud835\uded4 \ud835\uded5 \ud835\uded6 \ud835\uded7 \ud835\uded8 \ud835\uded9 \ud835\udeda \ud835\udedc \ud835\udedd \ud835\udede \ud835\udedf \ud835\udee0 \ud835\udee1 \ud835\udfca \ud835\udfcb);\n\nforeach my $sng(@arry)\n{\n    my $newsng =  ord($sng);\n    #print \"$sng\\t$newsng\\t\";\n    $newsng = sprintf(\"%x\", $newsng);\n    #print \"$newsng\\n\";\n    $incnt=~s/$sng/$newsng/esg || print \"NOT: $sng\\n\";\n}\n\nprint $incnt;\n</code></pre>\n\n<p>Its not printing the unicode values.</p>\n"}, {"tags": ["python", "perl", "subprocess"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1444974523, "post_id": 33162173, "comment_id": 54135372, "body": "When I want to do this sort of thing, I do it with a pipe at the shell level."}, {"owner": {"reputation": 1671, "user_id": 4600983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d236a59e7d7e6871716bc25752dae6?s=128&d=identicon&r=PG&f=1", "display_name": "svsd", "link": "https://stackoverflow.com/users/4600983/svsd"}, "edited": false, "score": 0, "creation_date": 1444975780, "post_id": 33162173, "comment_id": 54135807, "body": "Do you want to just send data to the child process or do you also want to read from it?"}, {"owner": {"reputation": 31843, "user_id": 1337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72de240484e389dbedb6a3e428b9f0c1?s=128&d=identicon&r=PG", "display_name": "Brad Gilbert", "link": "https://stackoverflow.com/users/1337/brad-gilbert"}, "edited": false, "score": 0, "creation_date": 1445194709, "post_id": 33162173, "comment_id": 54208546, "body": "You do realize that the Perl program may realize it isn&#39;t attached to a tty and expect a different format right? It may just be easier to edit the Perl program"}, {"owner": {"reputation": 93, "user_id": 5240400, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10207309073554648/picture?type=large", "display_name": "Scott", "link": "https://stackoverflow.com/users/5240400/scott"}, "edited": false, "score": 0, "creation_date": 1445229040, "post_id": 33162173, "comment_id": 54217789, "body": "I&#39;ve figured it out thanks to the suggestions posted here.  Turns out (as I expected) that I didn&#39;t fully understand how to send communications to the Perl program."}], "answers": [{"tags": [], "owner": {"reputation": 1671, "user_id": 4600983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d236a59e7d7e6871716bc25752dae6?s=128&d=identicon&r=PG&f=1", "display_name": "svsd", "link": "https://stackoverflow.com/users/4600983/svsd"}, "is_accepted": false, "score": 1, "last_activity_date": 1444978206, "last_edit_date": 1592644375, "creation_date": 1444978206, "answer_id": 33164176, "question_id": 33162173, "link": "https://stackoverflow.com/questions/33162173/getting-python-to-emulate-user-inputs-in-an-interactive-perl-script/33164176#33164176", "title": "Getting Python to emulate user inputs in an interactive Perl script", "body": "<p>Pipes are one way for multiple processes to communicate and are widely used for that. A pipe is a pair of file descriptors with one opened for writing and the other for reading. If data is written to the former, reading from the latter will return back the same data.</p>\n<p>Popen can create pipes for the standard input (stdin), standard output (stdout) and standard error (stderr) file descriptors of the process it executes - but you have to explicitly ask for it. This way, you can write something to the <code>stdin</code> pipe which will be passed on to the <code>stdin</code> of the child. Similarly, if you want to read the output of the child process, you can read from the <code>stdout</code> pipe. This serves your purpose well and hence your approach is correct.</p>\n<p>Now let's see your code:</p>\n<pre><code>subprocess.Popen(&quot;run_command.command -f a&quot;, shell=True)\n</code></pre>\n<p>This will execute the command, but won't create the pipes to allow communication with the child process. If you look at the <a href=\"https://docs.python.org/3/library/subprocess.html#popen-constructor\" rel=\"nofollow noreferrer\">documentation</a>, it says that you need to explicitly ask it to create pipes through keyword arguments such as <code>stdin=subprocess.PIPE</code>.</p>\n<pre><code>time.sleep(3)\n</code></pre>\n<p>Generally, scripts that take input line-by-line don't care about when they receive input. So you should be able to safely remove this.</p>\n<pre><code>Popen.communicate(input=&quot;1&quot;)\n</code></pre>\n<p>Look at the <a href=\"https://docs.python.org/3/library/subprocess.html#subprocess.Popen.communicate\" rel=\"nofollow noreferrer\">documentation</a> again:</p>\n<blockquote>\n<p>Popen.communicate(input=None, timeout=None)</p>\n<p>Interact with process: Send data to stdin. Read data from stdout and stderr, until end-of-file is reached. Wait for process to terminate.</p>\n</blockquote>\n<p>You can call <code>communicate()</code> only once and you must pass in all the input as one string and it returns the data printed by the child process once it terminates. This also means that the calls to <code>wait()</code> are unncessary. Note that <code>communicate()</code> returns the a tuple with contents of what the child printed to <code>stdout</code> and <code>stderr</code>. You may need these.</p>\n"}, {"tags": [], "owner": {"reputation": 343895, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "is_accepted": true, "score": 1, "last_activity_date": 1444999927, "last_edit_date": 1495542594, "creation_date": 1444999927, "answer_id": 33170992, "question_id": 33162173, "link": "https://stackoverflow.com/questions/33162173/getting-python-to-emulate-user-inputs-in-an-interactive-perl-script/33170992#33170992", "title": "Getting Python to emulate user inputs in an interactive Perl script", "body": "<p>To run a command for each file from a given directory:</p>\n\n<pre><code>#!/usr/bin/env python\nimport os\nfrom subprocess import Popen, PIPE\n\nworking_dir = b\"/home/MTS/Dropbox/dir/In_Files\"\nfor filename in os.listdir(working_dir):\n    print(\"Performing calculations on {filename!r}...\".format(**vars()))\n    p = Popen([\"run_command.command\", \"-f\", \"a\"], cwd=working_dir, stdin=PIPE)\n    p.communicate(input=b\"\\n\".join([b\"1\", filename, b\"4\"]))\n    if p.returncode != 0: # non-zero exit status may indicate failure\n        raise Error\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/a/33164176/4279\">@skmrx's answer</a>  for the explanation of why your current code fails.</p>\n"}], "owner": {"reputation": 93, "user_id": 5240400, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10207309073554648/picture?type=large", "display_name": "Scott", "link": "https://stackoverflow.com/users/5240400/scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 756, "favorite_count": 0, "accepted_answer_id": 33170992, "answer_count": 2, "score": 1, "last_activity_date": 1444999927, "creation_date": 1444966755, "question_id": 33162173, "link": "https://stackoverflow.com/questions/33162173/getting-python-to-emulate-user-inputs-in-an-interactive-perl-script", "title": "Getting Python to emulate user inputs in an interactive Perl script", "body": "<p>I'm new to programming and have been wrestling this problem for a while now...</p>\n\n<p>I'm writing a Python script to automate an interactive command-line based Perl script so that it may run on every file in a specified directory.  I can get the program to boot with <code>subprocess.call</code> and <code>subprocess.Popen</code>, but from there I either open the program and it sits there waiting in the shell for a user input, or I open it an infinite amount of times.  I need the Perl script to open once per file, accept user inputs (with something similar to \"enter\" being pressed after each input, of course, and a command including the name of the file, which should be <code>str(files)</code> in the example code below), begin the Perl script's calculations with a user input of <code>\"4\"</code>, and then have it close.</p>\n\n<p>I know this is possible, but I've tried 1000 different approaches to no avail.  Could someone give me an \"explain it like I'm 5\" as to how I can get this Python and Perl script talking to each other as if a user was inputting commands?</p>\n\n<p>Here's what I have so far:</p>\n\n<pre><code>for files in os.listdir(\"In_Files\"):\n    print \"Performing calculations on \" + str(files) + \" ...\"\n    os.chdir(\"/home/MTS/Dropbox/dir/In_Filess\")\n    subprocess.Popen(\"run_command.command -f a\", shell=True) #this boots up the Perl script\n    time.sleep(3) #waits for the script to open...\n    Popen.communicate(input=\"1\") #user inputs begin here\n    Popen.wait(0) #am I trying to set a return value here so that the inputs may proceed once the previous one has been accepted?\n    Popen.communicate(input=str(files)) #this is where the name of the file the Perl script is working on is entered\n    Popen.wait(0)\n    Popen.communicate(input=\"4\")\n    Popen.wait(0)\n</code></pre>\n\n<p>I keep reading a lot about stdin pipes but don't quite understand them.  Are they used for this problem or should another approach be used?  Also, I've already looked at Pexpect but that doesn't seem to be working.</p>\n\n<p>Your help is immensely appreciated.  </p>\n"}, {"tags": ["json", "perl", "parsing", "markup", "steam-web-api"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1444964634, "post_id": 33161737, "comment_id": 54132443, "body": "It looks like JSON without the separators! As far as I can see it&#39;s all hashes -- there don&#39;t appear to be any arrays. Should be easy to parse recursively"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1444970465, "post_id": 33161737, "comment_id": 54134019, "body": "If you read the <a href=\"https://developer.valvesoftware.com/wiki/Steam_Web_API\" rel=\"nofollow noreferrer\">Steam Web API documentation</a> you will see that what you have here is <i>VDF</i> or <i>Valve Data Format</i>, and you can get your data in JSON format (or XML) by adding <code>format=json</code> to the query parameters of the URL"}], "answers": [{"comments": [{"owner": {"reputation": 823, "user_id": 2245659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1578538114990c5befcd20552a2b3620?s=128&d=identicon&r=PG", "display_name": "dusz", "link": "https://stackoverflow.com/users/2245659/dusz"}, "edited": false, "score": 0, "creation_date": 1444968306, "post_id": 33162234, "comment_id": 54133434, "body": "Hacky indeed, I though it would be a much simpler task, I guess not!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 823, "user_id": 2245659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1578538114990c5befcd20552a2b3620?s=128&d=identicon&r=PG", "display_name": "dusz", "link": "https://stackoverflow.com/users/2245659/dusz"}, "edited": false, "score": 0, "creation_date": 1444969842, "post_id": 33162234, "comment_id": 54133853, "body": "As parsing goes, that&#39;s pretty trivial. There are only three possible tokens: a string, an opening brace, and a closing brace. My program just checks which of those comes next and handles each case in two or three lines of code. I used a separate stack array to eliminate the recursion caused by the nested hashes"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1444978528, "post_id": 33162234, "comment_id": 54137152, "body": "It is much simpler if you just request XML or JSON in the first place as mentioned in the comments."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1445008939, "post_id": 33162234, "comment_id": 54155607, "body": "You can handle the whitespace in one place using <code>$data =~ &#47; \\G \\s+ &#47;xgc</code> instead of handling it in front of every token."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1444969971, "last_edit_date": 1444969971, "creation_date": 1444967163, "answer_id": 33162234, "question_id": 33161737, "link": "https://stackoverflow.com/questions/33161737/parse-json-like-markup-in-perl/33162234#33162234", "title": "Parse JSON-like markup in perl", "body": "<p>This will process your data, It's a bit hacky but it does the job!</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;\n\nuse Data::Dump;\nuse LWP::Simple qw/ mirror /;\n\nuse constant URL    =&gt; 'https://steamcdn-a.akamaihd.net/apps/730/scripts/items/items_game.d8a302f03758b99ab65b60b3a4a11d73ca4738bd.txt';\nuse constant MIRROR =&gt; 'steamcdn.txt';\n\nmy $data = do {\n    mirror URL, MIRROR;\n    open my $fh, '&lt;', MIRROR;\n    local $/;\n    &lt;$fh&gt;;\n};\n\nmy ($hash, $key);\nmy @stack;\n\nwhile ( ) {\n\n    if ( $data =~ / \\G \\s* \" ([^\"]*) \" /gcx ) {\n        if ( defined $key ) {\n            $hash-&gt;{$key} = $1;\n            $key = undef;\n        }\n        else {\n            $key = $1;\n        }\n    }\n    elsif ( $data =~ / \\G \\s* \\{ /gcx ) {\n        push @stack, [ $hash, $key ];\n        $key = $hash = undef;\n    }\n    elsif ( $data =~ / \\G \\s* \\} /gcx ) {\n        die \"Structure unbalanced\" if defined $key or @stack == 0;\n        my ($parent, $key) = @{ pop @stack };\n        $parent-&gt;{$key} = $hash;\n        $hash = $parent;\n\n    }\n    else {\n        last;\n    }\n}\n\ndie \"Structure unbalanced\" if @stack;\n\ndd $hash;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>{\n  items_game =&gt; {\n    alternate_icons2        =&gt; {\n                                 weapon_icons =&gt; {\n                                   65604    =&gt; {\n                                                 icon_path =&gt; \"econ/default_generated/weapon_deagle_hy_ddpat_urb_light\",\n                                               },\n                                   65605    =&gt; {\n                                                 icon_path =&gt; \"econ/default_generated/weapon_deagle_hy_ddpat_urb_medium\",\n                                               },\n                                   65606    =&gt; {\n                                                 icon_path =&gt; \"econ/default_generated/weapon_deagle_hy_ddpat_urb_heavy\",\n                                               },\n                                   65684    =&gt; {\n                                                 icon_path =&gt; \"econ/default_generated/weapon_deagle_aa_flames_light\",\n                                               },\n                                   65685    =&gt; {\n                                                 icon_path =&gt; \"econ/default_generated/weapon_deagle_aa_flames_medium\",\n                                               },\n                                   65686    =&gt; {\n                                                 icon_path =&gt; \"econ/default_generated/weapon_deagle_aa_flames_heavy\",\n                                               },\n                                   65696    =&gt; {\n                                                 icon_path =&gt; \"econ/default_generated/weapon_deagle_so_night_light\",\n                                               },\n                                   65697    =&gt; {\n                                                 icon_path =&gt; \"econ/default_generated/weapon_deagle_so_night_medium\",\n                                               },\n                                   65698    =&gt; {\n                                                 icon_path =&gt; \"econ/default_generated/weapon_deagle_so_night_heavy\",\n                                               },\n                                   65780    =&gt; {\n                                                 icon_path =&gt; \"econ/default_generated/weapon_deagle_aa_vertigo_light\",\n                                               },\n                                   65781    =&gt; {\n                                                 icon_path =&gt; \"econ/default_generated/weapon_deagle_aa_vertigo_medium\",\n                                               },\n                                   65782    =&gt; {\n                                                 icon_path =&gt; \"econ/default_generated/weapon_deagle_aa_vertigo_heavy\",\n                                               },\n                                   65896    =&gt; {\n                                                 icon_path =&gt; \"econ/default_generated/weapon_deagle_hy_mottled_sand_light\",\n                                               },\n                                   65897    =&gt; {\n                                                 icon_path =&gt; \"econ/default_generated/weapon_deagle_hy_mottled_sand_medium\",\n                                               },\n                                   65898    =&gt; {\n                                                 icon_path =&gt; \"econ/default_generated/weapon_deagle_hy_mottled_sand_heavy\",\n                                               },\n                                   66276    =&gt; {\n                                                 icon_path =&gt; \"econ/default_generated/weapon_deagle_am_scales_bravo_light\",\n                                               },\n                                   66277    =&gt; {\n                                                 icon_path =&gt; \"econ/default_generated/weapon_deagle_am_scales_bravo_medium\",\n                                               },\n                                   66278    =&gt; {\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 823, "user_id": 2245659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1578538114990c5befcd20552a2b3620?s=128&d=identicon&r=PG", "display_name": "dusz", "link": "https://stackoverflow.com/users/2245659/dusz"}, "edited": false, "score": 0, "creation_date": 1454808289, "post_id": 33174687, "comment_id": 58210987, "body": "Hi @ikegami, do you have a working example of this code with my example? I have an issue with Borodin&#39;s example now with a similar file, my guess is a unsupported feature."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 823, "user_id": 2245659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1578538114990c5befcd20552a2b3620?s=128&d=identicon&r=PG", "display_name": "dusz", "link": "https://stackoverflow.com/users/2245659/dusz"}, "edited": false, "score": 0, "creation_date": 1454822269, "post_id": 33174687, "comment_id": 58213427, "body": "There was a small error. Fixed. Now works with the example in the Question."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1454822228, "last_edit_date": 1454822228, "creation_date": 1445010818, "answer_id": 33174687, "question_id": 33161737, "link": "https://stackoverflow.com/questions/33161737/parse-json-like-markup-in-perl/33174687#33174687", "title": "Parse JSON-like markup in perl", "body": "<pre><code>my $file = do { local $/; &lt;&gt; };\n\nmy @stack = [];\nmy %handlers = (\n   '\"' =&gt; sub {\n      /\\G ([^\"]*) \" /xgc\n         or die(\"Unterminated \\\"\\n\");\n      push(@{ $stack[-1] }, $1);\n   },\n   '{' =&gt; sub {\n      die(\"Expected string\\n\") if @{ $stack[-1] } % 2 == 0;\n      push(@stack, []);\n   },\n   '}' =&gt; sub {\n      die(\"Unmatched \\\"}\\\"\\n\") if @stack == 1;\n      my $hash = pop(@stack);\n      die(\"Missing value\\n\") if @$hash % 2 == 1;\n      push(@{ $stack[-1] }, { @$hash });\n   },\n);\n\nmy $data;\nfor ($file) {\n   while (1) {\n      my $next_char = /\\G \\s* (\\S) /gcx ? $1 : last;\n      my $handler = $handlers{$next_char}\n         or die(\"Unrecognized character \\\"$next_char\\\"\\n\");\n      $handler-&gt;();\n   }\n\n   die(\"Unmatched \\\"{\\\"\\n\") if @stack &gt; 1;\n   my $hash = pop(@stack);\n   die(\"Missing value\\n\") if @$hash % 2 == 1;\n   $data = { @$hash };\n}\n</code></pre>\n\n<p>Aside from a simpler stack than Borodin's and the use of a dispatch table instead of a long sequence of \"if\", this version provides proper error detection. This will detect truncated documents as well as unsupported features.</p>\n"}], "owner": {"reputation": 823, "user_id": 2245659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1578538114990c5befcd20552a2b3620?s=128&d=identicon&r=PG", "display_name": "dusz", "link": "https://stackoverflow.com/users/2245659/dusz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 33162234, "answer_count": 2, "score": 0, "last_activity_date": 1454822228, "creation_date": 1444963629, "question_id": 33161737, "link": "https://stackoverflow.com/questions/33161737/parse-json-like-markup-in-perl", "title": "Parse JSON-like markup in perl", "body": "<p>I am not sure what markup this is to be honest, I though at first JSON but using <code>parse_json</code> from <code>JSON::Parse</code> fails with: <code>JSON error at line 2, byte 15/1380740: Unexpected character '{' parsing initial state: expecting whitespace: '\\n', '\\r', '\\t', ' ' at ....\n</code></p>\n\n<p>This is what I parse into an hash: <a href=\"https://steamcdn-a.akamaihd.net/apps/730/scripts/items/items_game.d8a302f03758b99ab65b60b3a4a11d73ca4738bd.txt\" rel=\"nofollow\">https://steamcdn-a.akamaihd.net/apps/730/scripts/items/items_game.d8a302f03758b99ab65b60b3a4a11d73ca4738bd.txt</a>.</p>\n\n<p>What I tried:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse LWP::UserAgent;\nuse JSON::Parse 'parse_json';\n\nmy $ua = LWP::UserAgent-&gt;new;\nmy $response = $ua-&gt;get( \"https://steamcdn-a.akamaihd.net/apps/730/scripts/items/items_game.d8a302f03758b99ab65b60b3a4a11d73ca4738bd.txt\" );\nif ( $response-&gt;is_success ) {\n     my $game_items = parse_json( $response-&gt;content );\n     # ... do stuff\n}\n</code></pre>\n\n<p>Am I doing something wrong? Is this JSON or must I create some hack-ish solution to parse this?</p>\n\n<p>I could not find any suggestions through the \"Questions that may already have your answer\" section though I think it would be easier if I knew the name of this markup.</p>\n"}, {"tags": ["bash", "perl", "awk", "ksh"], "answers": [{"tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": true, "score": 0, "last_activity_date": 1444959479, "last_edit_date": 1495542214, "creation_date": 1444959479, "answer_id": 33161199, "question_id": 33160705, "link": "https://stackoverflow.com/questions/33160705/how-to-print-or-align-menu-at-the-middle-of-screen-using-perl/33161199#33161199", "title": "How to print or align menu at the middle of screen using perl", "body": "<p>You can do this using the Curses::UI package, and (if you are using ncurses underneath), handle the resulting KEY_RESIZE inputs.</p>\n\n<p>A similar question was asked in <em><a href=\"https://stackoverflow.com/questions/9769723/how-to-get-with-curses-the-window-size-from-a-resized-window\">How to get with Curses the window-size from a resized window?</a></em>, where the accepted answer seems to agree with that.</p>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 5384164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/915d1997617a7f7cac627959d6c054d1?s=128&d=identicon&r=PG&f=1", "display_name": "Yaswanth Gelli", "link": "https://stackoverflow.com/users/5384164/yaswanth-gelli"}, "is_accepted": false, "score": 0, "last_activity_date": 1444977630, "creation_date": 1444977630, "answer_id": 33164033, "question_id": 33160705, "link": "https://stackoverflow.com/questions/33160705/how-to-print-or-align-menu-at-the-middle-of-screen-using-perl/33164033#33164033", "title": "How to print or align menu at the middle of screen using perl", "body": "<p>Try getting number of columns in current terminal using <code>stty -a</code> command and use that value to determine position of the menu. (We can use printf to do left/right padding).</p>\n\n<p>Before you print menu, determine the screen width using <code>stty -a</code> command everytime so that menu can be aligned accordingly.</p>\n"}], "owner": {"reputation": 51, "user_id": 1318497, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/243a3a14a3af958f754c6e3a25eafbea?s=128&d=identicon&r=PG", "display_name": "mali184", "link": "https://stackoverflow.com/users/1318497/mali184"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 33161199, "answer_count": 2, "score": -2, "last_activity_date": 1444977630, "creation_date": 1444955577, "last_edit_date": 1444956865, "question_id": 33160705, "link": "https://stackoverflow.com/questions/33160705/how-to-print-or-align-menu-at-the-middle-of-screen-using-perl", "title": "How to print or align menu at the middle of screen using perl", "body": "<p>I want to align this menu at the middle of screen using perl and also want to get  input at center of screen .\n    Menu code  as follow</p>\n\n<pre><code>while(1){ // \n        printf \"Please select from one of expense catagories\";\n        printf \"1 - House \\n\";\n        printf \"2 - Grocery \\n\";\n        printf \"3 - Car \\n\";\n        printf \"4 - Hospital \\n\";\n        printf \"5 - Others \\n\";\n        printf \"q - quit \\n\";\n        my $input = &lt;STDIN&gt;;\n        if ($input =~ /q/) {\n        exit;\n        }// \n</code></pre>\n\n<p>I tried using tabs but when I resize screen its not properly aligned . So want to know the way to print at particular location on screen .</p>\n\n<p>Currently output is as follow :</p>\n\n<pre><code>Please select from one of expense catagories\n1 - House\n2 - Grocery\n3 - Car\n4 - Hospital\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1444948875, "post_id": 33159655, "comment_id": 54128364, "body": "<a href=\"https://metacpan.org/pod/JSON\" rel=\"nofollow noreferrer\"><code>JSON</code></a> perhaps?"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1444950045, "post_id": 33159655, "comment_id": 54128720, "body": "more specifically, <a href=\"https://metacpan.org/pod/JSON#from_json\" rel=\"nofollow noreferrer\">from_json</a> does what you need."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 5, "creation_date": 1444951269, "post_id": 33159655, "comment_id": 54129116, "body": "That&#39;s not JSON. Missing commas between <code>}{</code>, and missing <code>[]</code> around the whole thing."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5404654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kCT3c.jpg?s=128&g=1", "display_name": "chinarulezzz", "link": "https://stackoverflow.com/users/5404654/chinarulezzz"}, "is_accepted": false, "score": 0, "last_activity_date": 1444951344, "last_edit_date": 1444951344, "creation_date": 1444950740, "answer_id": 33160025, "question_id": 33159655, "link": "https://stackoverflow.com/questions/33159655/how-can-i-create-a-hash-from-json-response-in-perl/33160025#33160025", "title": "How can I create a hash from json response in perl", "body": "<pre><code>use Data::Dumper;\n\nmy @data = &lt;DATA&gt;;\n\ns/[\\r\\n\\s{}\",]//g, s/(ext|int)Id:|type:Map// for @data;\n\nmy %hash = grep length, @data;\n\nprint Dumper \\%hash;\n\n__DATA__\n\n{  \n  \"extId\" : \"abc:3\",\n  \"intId\" : \"val:0500019141EBE54B\",\n  \"type\" : \"Map\"\n}{\n  \"extId\" : \"abc:4\",\n  \"intId\" : \"val:0500012BEA8FEC15\",\n  \"type\" : \"Map\"\n}{  \n  \"extId\" : \"abc:3\",\n  \"intId\" : \"val:0500019141EBE54B\",\n  \"type\" : \"Map\"\n}\n</code></pre>\n\n<p>Note that fields (extId, intId) are obligatory.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1444984206, "creation_date": 1444984206, "answer_id": 33165828, "question_id": 33159655, "link": "https://stackoverflow.com/questions/33159655/how-can-i-create-a-hash-from-json-response-in-perl/33165828#33165828", "title": "How can I create a hash from json response in perl", "body": "<p>What you haven't posted isn't JSON. Given you said it's from a JSON response, I'm going to make a guess it's a transposition error. If that's <em>not</em> the case, this won't work - but you should probably poke the people giving you the JSON and tell them they're doing it wrong. </p>\n\n<p>You should also note - the hash you request - you have duplicate keys in <code>intId</code>. You will therefore lose one of them if you convert that to a hash. </p>\n\n<p>However with the above assumptions:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse JSON;\nuse Data::Dumper;\n\nmy $JSON_text = '[\n   {\n      \"extId\" : \"abc:3\",\n      \"type\" : \"Map\",\n      \"intId\" : \"val:0500019141EBE54B\"\n   },\n   {\n      \"intId\" : \"val:0500012BEA8FEC15\",\n      \"type\" : \"Map\",\n      \"extId\" : \"abc:4\"\n   },\n   {\n      \"intId\" : \"val:0500019141EBE54B\",\n      \"type\" : \"Map\",\n      \"extId\" : \"abc:3\"\n   }\n]';\n\n#turn JSON into a perl data structure. \n#In this case, an array of anon hashes. \nmy $json_obj =  decode_json ( $JSON_text );\nprint Dumper \\$json_obj;\n\n#process that perl data structure, and extract the keys\n# use the fact that a list of paired values can be \n#assigned to a hash as if they were key-value pairs:\nmy %int_ext = map { $_ -&gt; {extId}, \n                    $_ -&gt; {intId} }\n                            @{$json_obj};\nprint Dumper \\%int_ext;\n</code></pre>\n\n<p>This makes our <code>%int_ext</code> hash:</p>\n\n<pre><code>$VAR1 = {\n          'abc:3' =&gt; 'val:0500019141EBE54B',\n          'abc:4' =&gt; 'val:0500012BEA8FEC15'\n        };\n</code></pre>\n\n<p>Note - as you have two <code>abc:3</code> keys, you \"lose\" one of them. (The first one is overwritten, not that that matters in this case). </p>\n"}], "owner": {"reputation": 1, "user_id": 5451667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f5210df5b787d1656ac715c8f8cd87?s=128&d=identicon&r=PG&f=1", "display_name": "rddyk", "link": "https://stackoverflow.com/users/5451667/rddyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1444984206, "creation_date": 1444948458, "last_edit_date": 1444948674, "question_id": 33159655, "link": "https://stackoverflow.com/questions/33159655/how-can-i-create-a-hash-from-json-response-in-perl", "title": "How can I create a hash from json response in perl", "body": "<p>I have a json response such as</p>\n\n<pre><code>{  \n  \"extId\" : \"abc:3\",\n  \"intId\" : \"val:0500019141EBE54B\",\n  \"type\" : \"Map\"\n}{\n  \"extId\" : \"abc:4\",\n  \"intId\" : \"val:0500012BEA8FEC15\",\n  \"type\" : \"Map\"\n}{  \n  \"extId\" : \"abc:3\",\n  \"intId\" : \"val:0500019141EBE54B\",\n  \"type\" : \"Map\"\n}\n</code></pre>\n\n<p>I want to create a hash such as <code>$hash{abc:3} = val:0500019141EBE54B</code>, so that I can verify that the same <code>intId</code> is being created for the same <code>extId</code>. Thanks for help.   </p>\n"}, {"tags": ["python", "perl", "rest", "encoding", "sandbox"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1444940853, "post_id": 33157747, "comment_id": 54124722, "body": "Did you read the documentation for <a href=\"https://metacpan.org/pod/HTTP::Request::Common\" rel=\"nofollow noreferrer\">HTTP::Request::Common</a>? It tells you exactly what you need to do, including the part where it says to specify a content type of <code>form-data</code> as a request header."}, {"owner": {"reputation": 3, "user_id": 5451141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c492a84df1d9b28b110b1b66c459f647?s=128&d=identicon&r=PG&f=1", "display_name": "greenPlanet", "link": "https://stackoverflow.com/users/5451141/greenplanet"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1444950173, "post_id": 33157747, "comment_id": 54128763, "body": "@MattJacob Thanks for the hint. After a second read, I understood it better."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5451141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c492a84df1d9b28b110b1b66c459f647?s=128&d=identicon&r=PG&f=1", "display_name": "greenPlanet", "link": "https://stackoverflow.com/users/5451141/greenplanet"}, "edited": false, "score": 0, "creation_date": 1444949333, "post_id": 33157922, "comment_id": 54128510, "body": "Thanks a lot! It worked with a little change. As the $file should be an array reference to be treated as file Part specification."}, {"owner": {"reputation": 3, "user_id": 5451141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c492a84df1d9b28b110b1b66c459f647?s=128&d=identicon&r=PG&f=1", "display_name": "greenPlanet", "link": "https://stackoverflow.com/users/5451141/greenplanet"}, "edited": false, "score": 0, "creation_date": 1444950025, "post_id": 33157922, "comment_id": 54128713, "body": "It worked after replacing $file scalar with an array reference. So I first declare an array and make the $file scalar the only element of that array. Then used the array_ref instead of $file in your above code. I now better understand the instruction &quot;If one of the values in the $form_ref is an array reference, then it is treated as a file part specification&quot; mentioned at [<a href=\"https://metacpan.org/pod/HTTP::Request::Common]\" rel=\"nofollow noreferrer\">metacpan.org/pod/HTTP::Request::Common]</a>"}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 0, "last_activity_date": 1445008278, "last_edit_date": 1445008278, "creation_date": 1444940849, "answer_id": 33157922, "question_id": 33157747, "link": "https://stackoverflow.com/questions/33157747/multipart-encoded-file-content-in-perl/33157922#33157922", "title": "multipart encoded file content in perl", "body": "<p>As explained in module documentation <a href=\"https://metacpan.org/pod/HTTP::Request::Common\" rel=\"nofollow\"><code>HTTP::Request::Common</code></a></p>\n\n<pre><code>$ua-&gt;post($REST_URL,\n  Content_Type =&gt; 'form-data',\n  Content      =&gt; [\n    file =&gt; [$file]\n  ],\n);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5451141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c492a84df1d9b28b110b1b66c459f647?s=128&d=identicon&r=PG&f=1", "display_name": "greenPlanet", "link": "https://stackoverflow.com/users/5451141/greenplanet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 33157922, "answer_count": 1, "score": 0, "last_activity_date": 1445008278, "creation_date": 1444940240, "question_id": 33157747, "link": "https://stackoverflow.com/questions/33157747/multipart-encoded-file-content-in-perl", "title": "multipart encoded file content in perl", "body": "<p>I want to make a POST Request to a REST API service from Perl. As a POST Form parameter, the service expects a multipart encoded file. </p>\n\n<pre><code>use HTTP::Request::Common;\nuse LWP::UserAgent;\n\nmy $file=\"/path/to/file\";\nmy $REST_URL = \"/path/to/REST/service\";\nmy $ua = LWP::UserAgent-&gt;new;\nmy $response= $ua-&gt;post($REST_URL, ['file' =&gt; $file]);\n</code></pre>\n\n<p>I wrote the above code. But obviously the REST server could not understand the POST Request as I have only send the file path to the REST service instead of a multipart encoded file content. Could anyone please let me know how can I make a file multipart encoded and send it as POST Request to a REST service which expect a multipart encoded file as a Form Parameter?</p>\n\n<p>As a side note, I actually want to write the equivalent Perl code of the Python code below.</p>\n\n<pre><code>REST_URL = \"/path/to/REST/service\"\nSAMPLE_FILE = \"/path/to/file\"\n\nwith open(SAMPLE_FILE, \"rb\") as sample:\n   multipart_file = {\"file\": (\"temp_file_name\", sample)}\n   request = requests.post(REST_URL, files=multipart_file)\n</code></pre>\n\n<p>But, for my limited knowledge of Python, I didn't understand the line <code>multipart_file = {\"file\": (\"temp_file_name\", sample)}</code>. Explanation of what this line is exactly doing will help me as well, I think.</p>\n"}, {"tags": ["perl", "svn", "svn-hooks", "slack"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1444938277, "post_id": 33156655, "comment_id": 54123293, "body": "Are the characters added as ISO-8859-2 or UTF-8 or something else?"}, {"owner": {"reputation": 1401, "user_id": 2111274, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oF6os.jpg?s=128&g=1", "display_name": "Jan Richter", "link": "https://stackoverflow.com/users/2111274/jan-richter"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1444938463, "post_id": 33156655, "comment_id": 54123391, "body": "I think the environment has no information of the character encoding since its empty, that is what I am trying to figure out."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1444938644, "post_id": 33156655, "comment_id": 54123477, "body": "<a href=\"http://p3rl.org/Encode::Guess\" rel=\"nofollow noreferrer\">Encode::Guess</a> might help with unknown encodings."}, {"owner": {"reputation": 1401, "user_id": 2111274, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oF6os.jpg?s=128&g=1", "display_name": "Jan Richter", "link": "https://stackoverflow.com/users/2111274/jan-richter"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1444942322, "post_id": 33156655, "comment_id": 54125475, "body": "@choroba: Edited the comment the way you provided, check edit"}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1444994668, "post_id": 33156655, "comment_id": 54146195, "body": "But it&#39;s already the svn commit which failed. How should the post commit hook fix that?"}, {"owner": {"reputation": 1401, "user_id": 2111274, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oF6os.jpg?s=128&g=1", "display_name": "Jan Richter", "link": "https://stackoverflow.com/users/2111274/jan-richter"}, "edited": false, "score": 0, "creation_date": 1445025089, "post_id": 33156655, "comment_id": 54164153, "body": "I have the confirmation from my colleague that even if the commit was successful, the string is faulty. (Commiting via TortoiseSVN @ Windows)"}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1445075686, "post_id": 33156655, "comment_id": 54176500, "body": "@falnyr And what happens if you&#39;re going to use TortoiseSVN entirely to commit a file and view its log history? Are you able to use TortoiseSVN with Czech characters?"}, {"owner": {"reputation": 1401, "user_id": 2111274, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oF6os.jpg?s=128&g=1", "display_name": "Jan Richter", "link": "https://stackoverflow.com/users/2111274/jan-richter"}, "reply_to_user": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1445084243, "post_id": 33156655, "comment_id": 54178888, "body": "@yacc czech characters are fine, the whole work with TortoiseSVN and the repository works for years now, I dont know if the problem could be that I am commiting via console, but the same result to Slack was with TortoiseSVN commit, so I suppose it has something to do with the script."}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1445085433, "post_id": 33156655, "comment_id": 54179241, "body": "@falnyr Maybe I&#39;m wrong, but to me it seems you&#39;re dealing with two problems here. If svn defies Czech chars but Tortoise not, it seems that Tortoise uses a precommit alteration of the string. It would be interesting to have a look at the final value in the repos. And then, to stop Slack from hiccuping you&#39;d have to mimic T&#39;s transformation."}, {"owner": {"reputation": 1401, "user_id": 2111274, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oF6os.jpg?s=128&g=1", "display_name": "Jan Richter", "link": "https://stackoverflow.com/users/2111274/jan-richter"}, "reply_to_user": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1445088145, "post_id": 33156655, "comment_id": 54180016, "body": "@yacc I don`t think there is a TortoiseSVN pre-commit alteration since I am using a SVN plugin in SublimeText to commit on Ubuntu with czech characters without a problem. What does it mean to mimic T&#39;s transformation?"}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1445091503, "post_id": 33156655, "comment_id": 54181092, "body": "@falnyr What happens if you try <code>$log = qx|&#47;usr&#47;bin&#47;svnlook log -r $ARGV[1] $ARGV[0]|;</code> in above hook? And could you add this directly after previous line: <code>$log=join(&quot;,&quot;,$log,unpack(&#39;H*&#39;,$log));</code>"}, {"owner": {"reputation": 1401, "user_id": 2111274, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oF6os.jpg?s=128&g=1", "display_name": "Jan Richter", "link": "https://stackoverflow.com/users/2111274/jan-richter"}, "reply_to_user": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1445114607, "post_id": 33156655, "comment_id": 54188603, "body": "@yacc added the lines you provided, updated question ^ (no result so far)"}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1445171279, "post_id": 33156655, "comment_id": 54200820, "body": "@falnyr Ok, sure that&#39;s no progress so far but we&#39;re on track. What do you get if you add another line: <code>$log=pack(&#39;H*&#39;,&#39;c59865c59969636861&#39;).&quot; &quot;.unpack(&#39;H*&#39;,&quot;\u0158e\u0159icha&quot;);</code>"}, {"owner": {"reputation": 1401, "user_id": 2111274, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oF6os.jpg?s=128&g=1", "display_name": "Jan Richter", "link": "https://stackoverflow.com/users/2111274/jan-richter"}, "reply_to_user": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1445204936, "post_id": 33156655, "comment_id": 54212043, "body": "@yacc the output is: 18 - falnyr - &#197;e&#197;icha c59865c59969636861"}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1445246681, "post_id": 33156655, "comment_id": 54225994, "body": "And if you do this entirely in the console: <code>svn commit -m &quot;\u0158e\u0159icha&quot;; svnlook log -r x file.txt</code> (take care of the right revision and path)."}, {"owner": {"reputation": 1401, "user_id": 2111274, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oF6os.jpg?s=128&g=1", "display_name": "Jan Richter", "link": "https://stackoverflow.com/users/2111274/jan-richter"}, "reply_to_user": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1445266822, "post_id": 33156655, "comment_id": 54239673, "body": "@yacc Committed revision 19. svnlook: E000020: Can&#39;t open file &#39;qwerty.txt/format&#39;: Not a directory"}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1445267261, "post_id": 33156655, "comment_id": 54239986, "body": "@falnyr That&#39;s not the right path. Could you add this to the hook script (similar to the previous additions): <code>$log = &quot;@ARGV&quot;;</code> so we get the exact arguments used for svnlook."}, {"owner": {"reputation": 1401, "user_id": 2111274, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oF6os.jpg?s=128&g=1", "display_name": "Jan Richter", "link": "https://stackoverflow.com/users/2111274/jan-richter"}, "reply_to_user": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1445271441, "post_id": 33156655, "comment_id": 54242824, "body": "@yacc Slack output: 24: falnyr - /var/svn/test 24"}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1445271965, "post_id": 33156655, "comment_id": 54243134, "body": "Then you should do this in the console: <code>export LC_ALL=&quot;cs_CZ.UTF-8&quot;; svnlook log -r 24 &#47;var&#47;svn&#47;test</code>"}, {"owner": {"reputation": 1401, "user_id": 2111274, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oF6os.jpg?s=128&g=1", "display_name": "Jan Richter", "link": "https://stackoverflow.com/users/2111274/jan-richter"}, "reply_to_user": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1445274100, "post_id": 33156655, "comment_id": 54244326, "body": "@yacc export LC_ALL=&quot;cs_CZ.UTF-8&quot;; svnlook log -r 24 /var/svn/test \u0158e\u0159icha"}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1445276198, "post_id": 33156655, "comment_id": 54245420, "body": "Then put this into the hook: <code>$log = qx|export LC_ALL=&quot;cs_CZ.UTF-8&quot;; &#47;usr&#47;bin&#47;svnlook log -r $ARGV[1] $ARGV[0]|;</code> followed by <code>$log=$log.&quot; &quot;.unpack(&#39;H*&#39;,$log);</code> and observe the slack message. I hope it&#39;s UTF8 now. From there you need a way to pass the UTF8 string safely down the slack line. I&#39;m off for today, bye."}, {"owner": {"reputation": 1401, "user_id": 2111274, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oF6os.jpg?s=128&g=1", "display_name": "Jan Richter", "link": "https://stackoverflow.com/users/2111274/jan-richter"}, "reply_to_user": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1445289387, "post_id": 33156655, "comment_id": 54252681, "body": "@yacc added the code you provided, still bad encoding in slack (check updated question)"}], "answers": [{"tags": [], "owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "is_accepted": true, "score": 1, "last_activity_date": 1445334762, "creation_date": 1445334762, "answer_id": 33233430, "question_id": 33156655, "link": "https://stackoverflow.com/questions/33156655/perl-svn-hook-with-czech-characters/33233430#33233430", "title": "Perl SVN hook with czech characters", "body": "<p>Add the following lines to your hook. Slack should now be able to talk Czech. :)</p>\n\n<pre><code>use Encode qw(decode_utf8);\n...\nmy $log = qx|export LC_ALL=\"cs_CZ.UTF-8\"; /usr/bin/svnlook log -r $ARGV[1] $ARGV[0]|;\n$log = decode_utf8($log);\n</code></pre>\n"}], "owner": {"reputation": 1401, "user_id": 2111274, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oF6os.jpg?s=128&g=1", "display_name": "Jan Richter", "link": "https://stackoverflow.com/users/2111274/jan-richter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 1, "accepted_answer_id": 33233430, "answer_count": 1, "score": 2, "last_activity_date": 1445334762, "creation_date": 1444936420, "last_edit_date": 1445289344, "question_id": 33156655, "link": "https://stackoverflow.com/questions/33156655/perl-svn-hook-with-czech-characters", "title": "Perl SVN hook with czech characters", "body": "<p>I downloaded the sample SVN post-commit hook provided by Slack integration.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\n\nuse HTTP::Request::Common qw(POST);\nuse HTTP::Status qw(is_client_error);\nuse LWP::UserAgent;\nuse JSON;\n\nmy $repository = \"myrepo\";\nmy $websvn = \"websvn.mydomain.com\";\nmy $opt_domain = \"myteam.slack.com\";\nmy $opt_token = \"mytoken\";\n\nmy $log = qx|export LC_ALL=\"cs_CZ.UTF-8\"; /usr/bin/svnlook log -r $ARGV[1] $ARGV[0]|;\nmy $log = $log.\" \".unpack('H*',$log);\n\nmy $who = `/usr/bin/svnlook author -r $ARGV[1] $ARGV[0]`;\nmy $url = \"http://${websvn}/revision.php?repname=${repository}&amp;rev=$ARGV[1]\";\nchomp $who;\n\nmy $payload = {\n    'revision'  =&gt; $ARGV[1],\n    'url'       =&gt; $url,\n    'author'    =&gt; $who,\n    'log'       =&gt; $log,\n};\n\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;timeout(15);\n\nmy $req = POST( \"https://${opt_domain}/services/hooks/subversion?token=${opt_token}\", ['payload' =&gt; encode_json($payload)] );\nmy $s = $req-&gt;as_string;\nprint STDERR \"Request:\\n$s\\n\";\n\nmy $resp = $ua-&gt;request($req);\n$s = $resp-&gt;as_string;\nprint STDERR \"Response:\\n$s\\n\";\n</code></pre>\n\n<p>(full file here: <a href=\"https://github.com/tinyspeck/services-examples/blob/master/subversion.pl\" rel=\"nofollow\">https://github.com/tinyspeck/services-examples/blob/master/subversion.pl</a>)</p>\n\n<p>Now the problem is, that if I want to commit message containing special characters (Czech), the string is unable to translate properly and the resulting message in slack channel looks like this:</p>\n\n<pre><code>25: falnyr - \u00c5e\u00c5icha\nc59865c5996963686120746573746f766163c3ad20636f6d6d69740a\n</code></pre>\n\n<p>I have read about the isolated (vacuum) SVN hook environment, so I assume I need to declare the locale inside the script, but since I am untouched by Perl, I really don`t know how.</p>\n\n<p>My commit attempt:</p>\n\n<pre><code>falnyr@cap:test $ export LC_ALL=\"cs_CZ.UTF-8\"\nfalnyr@cap:test $ touch file.txt\nfalnyr@cap:test $ svn add file.txt\nA         file.txt\nfalnyr@cap:test $ svn commit -m \"\u0158e\u0159icha\"\nStore password unencrypted (yes/no)? no\nAdding         file.txt\nTransmitting file data .\nCommitted revision x.\nfalnyr@cap:test $\n</code></pre>\n"}, {"tags": ["regex", "perl", "awk", "header-files"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1444937950, "post_id": 33156526, "comment_id": 54123097, "body": "Is that the output or is that the input, or a combination of both ?"}], "answers": [{"comments": [{"owner": {"reputation": 877, "user_id": 4830221, "user_type": "registered", "accept_rate": 51, "profile_image": "https://graph.facebook.com/10204799712886824/picture?type=large", "display_name": "Nicolas Scotto Di Perto", "link": "https://stackoverflow.com/users/4830221/nicolas-scotto-di-perto"}, "edited": false, "score": 0, "creation_date": 1444939492, "post_id": 33156800, "comment_id": 54123957, "body": "Ok, as I am new too perl I didn&#39;t know that syntax, but now I have the Llama with me ! Thank you"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 877, "user_id": 4830221, "user_type": "registered", "accept_rate": 51, "profile_image": "https://graph.facebook.com/10204799712886824/picture?type=large", "display_name": "Nicolas Scotto Di Perto", "link": "https://stackoverflow.com/users/4830221/nicolas-scotto-di-perto"}, "edited": false, "score": 0, "creation_date": 1444941730, "post_id": 33156800, "comment_id": 54125187, "body": "@NicolasScottoDiPerto - You probably don&#39;t need to learn a lot for this. It&#39;s just a shorthand way of saying <code>if ( $_ =~ &#47;...&#47; ) { print $1,&quot;\\n&quot;;}</code>"}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 4, "last_activity_date": 1444936964, "creation_date": 1444936964, "answer_id": 33156800, "question_id": 33156526, "link": "https://stackoverflow.com/questions/33156526/why-is-more-data-printed-than-i-expect/33156800#33156800", "title": "Why is more data printed than I expect?", "body": "<p>Because you're not making the <code>print</code> command <strong>conditional</strong> upon matching the regex. Try this:</p>\n\n<pre><code>perl -ne '/([\\w*]+\\s+[\\w*]+\\s*\\(.*?\\))/i and print $1 . \";\\n\"' dict3.c\n# .......................................^^^\n</code></pre>\n\n<p>For every line, you were printing the matched text from the <em>last successful match</em>.</p>\n"}], "owner": {"reputation": 877, "user_id": 4830221, "user_type": "registered", "accept_rate": 51, "profile_image": "https://graph.facebook.com/10204799712886824/picture?type=large", "display_name": "Nicolas Scotto Di Perto", "link": "https://stackoverflow.com/users/4830221/nicolas-scotto-di-perto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1445008608, "creation_date": 1444936043, "last_edit_date": 1495541029, "question_id": 33156526, "link": "https://stackoverflow.com/questions/33156526/why-is-more-data-printed-than-i-expect", "title": "Why is more data printed than I expect?", "body": "<p>It's the next part of another problem I have just yesterday <a href=\"https://stackoverflow.com/questions/33134957/awk-doesnt-match-all-match-all-my-entries\">Awk doesn&#39;t match all match all my entries</a>. \nI want to replace awk with perl and my first goal is to extract my declarations of functions in a .c and put it in a .h. So I came up with this :</p>\n\n<pre><code>cat dict3.c | perl -ne '/([a-z_*]+[[:space:]]+[a-z_*]+[[:space:]]*\\(.*?\\))/i; print $1 . \";\\n\"'\n</code></pre>\n\n<p>But the output is that :</p>\n\n<pre><code>    ;\n;\n;\n;\n;\n;\n;\n;\ndictent_t* dictentcreate(const char * key, const char * val);\ndictent_t* dictentcreate(const char * key, const char * val);\ndictent_t* dictentcreate(const char * key, const char * val);\ndictent_t* dictentcreate(const char * key, const char * val);\ndictent_t* dictentcreate(const char * key, const char * val);\ndictent_t* dictentcreate(const char * key, const char * val);\ndictent_t* dictentcreate(const char * key, const char * val);\ndictent_t* dictentcreate(const char * key, const char * val);\ndictent_t* dictentcreate(const char * key, const char * val);\ndictent_t* dictentcreate(const char * key, const char * val);\ndictent_t* dictentcreate(const char * key, const char * val);\ndictent_t* dictentcreate(const char * key, const char * val);\ndictent_t* dictentcreate(const char * key, const char * val);\ndictent_t* dictentcreate(const char * key, const char * val);\ndictent_t* dictentcreate(const char * key, const char * val);\ndictent_t* dictentcreate(const char * key, const char * val);\ndictent_t* dictentcreate(const char * key, const char * val);\ndictent_t* dictentcreate(const char * key, const char * val);\ndict_t* dictcreate();\ndict_t* dictcreate();\ndict_t* dictcreate();\ndict_t* dictcreate();\ndict_t* dictcreate();\ndict_t* dictcreate();\ndict_t* dictcreate();\ndict_t* dictcreate();\ndict_t* dictcreate();\ndict_t* dictcreate();\ndict_t* dictcreate();\ndict_t* dictcreate();\ndict_t* dictcreate();\ndict_t* dictcreate();\ndict_t* dictcreate();\ndict_t* dictcreate();\nvoid dictdestroy(*dict_t d);\nvoid dictdestroy(*dict_t d);\nvoid dictdestroy(*dict_t d);\nvoid dictdestroy(*dict_t d);\nvoid dictdestroy(*dict_t d);\nvoid dictdestroy(*dict_t d);\nvoid dictdestroy(*dict_t d);\nvoid dictdestroy(*dict_t d);\nvoid dictdestroy(*dict_t d);\nvoid dictdestroy(*dict_t d);\nvoid dictdestroy(*dict_t d);\nvoid dictdestroy(*dict_t d);\nvoid dictdestroy(*dict_t d);\nvoid dictdestroy(*dict_t d);\nvoid dictdestroy(*dict_t d);\nvoid dictdestroy(*dict_t d);\nvoid dictdump(dict_t *d);\nvoid dictdump(dict_t *d);\nvoid dictdump(dict_t *d);\nvoid dictdump(dict_t *d);\nvoid dictdump(dict_t *d);\nvoid dictdump(dict_t *d);\nvoid dictdump(dict_t *d);\nvoid dictdump(dict_t *d);\nvoid dictdump(dict_t *d);\nvoid dictdump(dict_t *d);\nvoid dictdump(dict_t *d);\nvoid dictdump(dict_t *d);\nint dictlook(dict_t *d, const char * key);\nint dictlook(dict_t *d, const char * key);\nint dictlook(dict_t *d, const char * key);\nint dictlook(dict_t *d, const char * key);\nint dictlook(dict_t *d, const char * key);\nint dictlook(dict_t *d, const char * key);\nint dictlook(dict_t *d, const char * key);\nint dictlook(dict_t *d, const char * key);\nint dictlook(dict_t *d, const char * key);\nint dictlook(dict_t *d, const char * key);\nint dictlook(dict_t *d, const char * key);\nint dictlook(dict_t *d, const char * key);\nint dictlook(dict_t *d, const char * key);\nint dictlook(dict_t *d, const char * key);\nint dictget(char* s, dict_t *d, const char *key);\nint dictget(char* s, dict_t *d, const char *key);\nint dictget(char* s, dict_t *d, const char *key);\nint dictget(char* s, dict_t *d, const char *key);\nint dictget(char* s, dict_t *d, const char *key);\nint dictget(char* s, dict_t *d, const char *key);\nint dictget(char* s, dict_t *d, const char *key);\nint dictget(char* s, dict_t *d, const char *key);\nint dictget(char* s, dict_t *d, const char *key);\nint dictget(char* s, dict_t *d, const char *key);\nint dictget(char* s, dict_t *d, const char *key);\nint dictget(char* s, dict_t *d, const char *key);\nint dictget(char* s, dict_t *d, const char *key);\nint dictget(char* s, dict_t *d, const char *key);\nint dictget(char* s, dict_t *d, const char *key);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t* dictadd(dict_t* d, const char * key, const char * val);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t dictup(dict_t d, const char * key, const char * newval);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\ndict_t* dictrm(dict_t* d, const char * key);\n</code></pre>\n\n<p>Whereas there's just one declaration for each function in the file.\nI have no clue what it could be because the number of repetitions is not the same for each printed line so it can't be just one loop...</p>\n"}, {"tags": ["xml", "perl", "parsing", "children"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5450864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84bf39c9216836ee49f787e8caa1ae21?s=128&d=identicon&r=PG&f=1", "display_name": "Ppoc", "link": "https://stackoverflow.com/users/5450864/ppoc"}, "edited": false, "score": 0, "creation_date": 1444944033, "post_id": 33156155, "comment_id": 54126331, "body": "I am amazed at how efficiently this is done! Wow. Thank you! Is there another way I can do it without using twig_handlers as I have others part of the document that I need to parse as well?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 33, "user_id": 5450864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84bf39c9216836ee49f787e8caa1ae21?s=128&d=identicon&r=PG&f=1", "display_name": "Ppoc", "link": "https://stackoverflow.com/users/5450864/ppoc"}, "edited": false, "score": 0, "creation_date": 1444946509, "post_id": 33156155, "comment_id": 54127432, "body": "The whole point of using XML::Twig is large file support through <code>twig_handlers</code>"}, {"owner": {"reputation": 33, "user_id": 5450864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84bf39c9216836ee49f787e8caa1ae21?s=128&d=identicon&r=PG&f=1", "display_name": "Ppoc", "link": "https://stackoverflow.com/users/5450864/ppoc"}, "edited": false, "score": 0, "creation_date": 1444946573, "post_id": 33156155, "comment_id": 54127468, "body": "So you wouldn&#39;t suggest using XML::Twig if I had to parse the entire file? I had one more question. What does $_-&gt;name() ne &#39;#PCDATA&#39;  do?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 33, "user_id": 5450864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84bf39c9216836ee49f787e8caa1ae21?s=128&d=identicon&r=PG&f=1", "display_name": "Ppoc", "link": "https://stackoverflow.com/users/5450864/ppoc"}, "edited": false, "score": 0, "creation_date": 1444946851, "post_id": 33156155, "comment_id": 54127577, "body": "It&#39;s not bad. Very slow, and cimmol&#232;rent mishandles namespaces,  but the code isn&#39;t too bad with the notable exception encountered in this Answer.  #PCDATA is returned for text nodes"}, {"owner": {"reputation": 33, "user_id": 5450864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84bf39c9216836ee49f787e8caa1ae21?s=128&d=identicon&r=PG&f=1", "display_name": "Ppoc", "link": "https://stackoverflow.com/users/5450864/ppoc"}, "edited": false, "score": 0, "creation_date": 1444963879, "post_id": 33156155, "comment_id": 54132251, "body": "Thank you! I slightly edited my question. Could you help me with this? How can I modify my #row to display this?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 33, "user_id": 5450864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84bf39c9216836ee49f787e8caa1ae21?s=128&d=identicon&r=PG&f=1", "display_name": "Ppoc", "link": "https://stackoverflow.com/users/5450864/ppoc"}, "edited": false, "score": 0, "creation_date": 1444964150, "post_id": 33156155, "comment_id": 54132322, "body": "Create a handler for Rating. Loop over its children (C1, C2 and C3). In the loop, loop over their children"}, {"owner": {"reputation": 33, "user_id": 5450864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84bf39c9216836ee49f787e8caa1ae21?s=128&d=identicon&r=PG&f=1", "display_name": "Ppoc", "link": "https://stackoverflow.com/users/5450864/ppoc"}, "edited": false, "score": 0, "creation_date": 1445001342, "post_id": 33156155, "comment_id": 54150435, "body": "Ikegami I tried this. Works well. But I have 20 routines like rating with different nested levels and children. Having a different twig handler for these is taking a lot of time to finish processing. Any way of manipulating the hash row to do this?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 33, "user_id": 5450864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84bf39c9216836ee49f787e8caa1ae21?s=128&d=identicon&r=PG&f=1", "display_name": "Ppoc", "link": "https://stackoverflow.com/users/5450864/ppoc"}, "edited": false, "score": 0, "creation_date": 1445003102, "post_id": 33156155, "comment_id": 54151550, "body": "You can use multiple twig handlers, or just for the base element + digging on your own. Whatever you find best. Not sure what you mean by time, or to what hash you are referring"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1444937043, "last_edit_date": 1444937043, "creation_date": 1444934671, "answer_id": 33156155, "question_id": 33155963, "link": "https://stackoverflow.com/questions/33155963/how-to-display-descendants-in-xml-with-perls-xmltwig/33156155#33156155", "title": "How to display descendants in XML with Perl&#39;s XML::Twig?", "body": "<p>So you want the nodes matching XPath</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>descendant:*[count(*)=0]\n</code></pre>\n\n<p>aka</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>.//*[count(*)=0]\n</code></pre>\n\n<p>relative to an <code>elt</code> element. I use XML::LibXML, so I'd do</p>\n\n<pre><code>$elt_node-&gt;findnodes(\"descendant:*[count(*)=0]\")\n</code></pre>\n\n<p>A similar solution should be possible with XML::Twig. (It does have <code>findnodes</code>.)</p>\n\n<hr>\n\n<p>ug, I forgot how bad XML::Twig's support for XPath is. It doesn't know about <code>count</code>, and <code>*</code> matches non-elements. No problem, we'll just have to do the work ourselves.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\n\nuse XML::Twig qw( );\n\nmy @eles = qw( Book Snap Line1 Line2 Line3 Line4 Line5 C1 C2 C3 );\n\nmy $twig = XML::Twig-&gt;new(\n   twig_handlers =&gt; {\n      '/APP:Report/library/elt' =&gt; sub {\n         my ($twig, $ele) = @_;\n\n         my %row =\n            map { $_-&gt;name() =&gt; $_-&gt;text() // '' }\n               # $ele-&gt;findnodes(\"descendant:*[count(*)=0]\")\n               grep { $_-&gt;name() ne '#PCDATA' &amp;&amp; ( grep { $_-&gt;name() ne '#PCDATA' } $_-&gt;children ) == 0 }\n                  $ele-&gt;descendants();\n\n         say join '|', @row{@eles};\n\n         $twig-&gt;purge();  # Free unneeded memory.\n      },\n   },\n);\n\nsay join '|', @eles;    \n$twig-&gt;parsefile('my_big.xml');\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Book|Snap|Line1|Line2|Line3|Line4|Line5|C1|C2|C3\nThe book of pages||The Beginning|We ceased to exist|Accept it|Now we live|We reject it|6.1|8.9|9.4\nThe song||This is how we do it|I hope this works|Please do|Begging you|Bye|2.3|9.9|4.5\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5450864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84bf39c9216836ee49f787e8caa1ae21?s=128&d=identicon&r=PG&f=1", "display_name": "Ppoc", "link": "https://stackoverflow.com/users/5450864/ppoc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "accepted_answer_id": 33156155, "answer_count": 1, "score": -1, "last_activity_date": 1445001190, "creation_date": 1444933965, "last_edit_date": 1445001190, "question_id": 33155963, "link": "https://stackoverflow.com/questions/33155963/how-to-display-descendants-in-xml-with-perls-xmltwig", "title": "How to display descendants in XML with Perl&#39;s XML::Twig?", "body": "<p>I am a 2 week old Perl user and I am trying to parse a 300 mb nested XML file. So please excuse my lack of knowledge. The file follows a similar format as below</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n   &lt;APP:Report xsi:schemaLocation=\"WWW\" xmlns:xsi=\"WWW\" xmlns:APP=\"WWW\"&gt;\n   &lt;library&gt;\n    &lt;elt&gt;\n     &lt;Book&gt;The book of pages&lt;/Book&gt;\n     &lt;Snap&gt;&lt;/Snap&gt;\n     &lt;Line1&gt;The Beginning&lt;/Line1&gt;\n     &lt;Line2&gt;We ceased to exist&lt;/Line2&gt;\n     &lt;Line3&gt;Accept it&lt;/Line3&gt;\n     &lt;Line4&gt;Now we live&lt;/Line4&gt;\n     &lt;Line5&gt;We reject it&lt;/Line5&gt;\n     &lt;Rating&gt;\n      &lt;C1&gt;6.1&lt;/C1&gt;\n      &lt;C2&gt;8.9&lt;/C2&gt;\n      &lt;C3&gt;9.4&lt;/C3&gt;\n     &lt;/Rating&gt;\n    &lt;/elt&gt;\n    &lt;Author&gt;Sally&lt;/Author&gt;\n    &lt;Publisher&gt;Penguin&lt;/Publisher&gt;\n    &lt;elt&gt;\n     &lt;Book&gt;The song&lt;/Book&gt;\n     &lt;Snap&gt;&lt;/Snap&gt;\n     &lt;Line1&gt;This is how we do it&lt;/Line1&gt;\n     &lt;Line2&gt;I hope this works&lt;/Line2&gt;\n     &lt;Line3&gt;Please do&lt;/Line3&gt;\n     &lt;Line4&gt;Begging you&lt;/Line4&gt;\n     &lt;Line5&gt;Bye&lt;/Line5&gt;\n     &lt;Rating&gt;\n      &lt;C1&gt;2.3&lt;/C1&gt;\n      &lt;C2&gt;9.9&lt;/C2&gt;\n      &lt;C3&gt;4.5&lt;/C3&gt;\n     &lt;/Rating&gt;\n    &lt;/elt&gt;\n    &lt;Author&gt;Justin&lt;/Author&gt;\n    &lt;Publisher&gt;Victoria&lt;/Publisher&gt;\n   &lt;/library&gt;\n  &lt;/APP:Report&gt;\n</code></pre>\n\n<p>I want to be able to able to display Book, Snap, Line1, Line2, line3, Line4, line5, C1, C2 and C3 in different columns of the first row, Author in row 2 and Publisher in row 3. This is just a sample of the big file that I have. I do not want to access a specific child to display. I want to be able to display all its descendants.</p>\n\n<p>Currently it is printing all my data row 1 column 1. My code snippet is enclosed below. What would be the best way to do this? I would gratefully appreciate any advice. Thank you! </p>\n\n<pre><code>    my $twig= new XML::Twig();\n$twig-&gt;parsefile( $_);    # build the twig \n  foreach my $elt ($twig-&gt;root-&gt;children)\n  {\n  print $fout1 $elt-&gt;text.\"\\n\";\n}\n</code></pre>\n\n<p>Edited the question: What if I had nested children within nested children? What would be the most efficient to do it? For example how do I access the elements of elt for each C? My 2nd question is about how I could display these elements like </p>\n\n<pre><code>  The book of pages|Snap|Line1|Line2|Line3|Line4|Line5|C1.X|\n  The book of pages|Snap|Line1|Line2|Line3|Line4|Line5|C1.Y|\n  The book of pages|Snap|Line1|Line2|Line3|Line4|Line5|C2.X|\n  The book of pages|Snap|Line1|Line2|Line3|Line4|Line5|C2.Y|\n  The book of pages|Snap|Line1|Line2|Line3|Line4|Line5|C3.X|\n  The book of pages|Snap|Line1|Line2|Line3|Line4|Line5|C3.Y|\n  .\n  .\n  .\n  .\n  .\n  The song|Snap|Line1|Line2|Line3|Line4|Line5|C2.X|\n  The song|Snap|Line1|Line2|Line3|Line4|Line5|C2.Y|\n  Example \n    &lt;Rating&gt;\n      &lt;C1&gt;\n        &lt;elt&gt;\n         &lt;X&gt;&lt;/X&gt;\n         &lt;X&gt;&lt;/X&gt;\n         &lt;/elt&gt;\n        &lt;elt&gt;\n        &lt;elt&gt;\n      &lt;/C1&gt;\n      &lt;C2&gt;\n        &lt;elt&gt;\n        &lt;elt&gt;\n        &lt;elt&gt;\n      &lt;/C2&gt;\n      &lt;C3&gt;\n        &lt;elt&gt;\n        &lt;elt&gt;\n        &lt;elt&gt;\n      &lt;/C3&gt;\n     &lt;/Rating&gt;\n</code></pre>\n\n<p>Like ikegami suggested, the easiest way to do this would be to create a handler for rating. But the issue is the time taken to parse this. The file I want to parse is 300 mb and has around 20 such routines like ratings. So I parse the big routine once, and then parse a part of the big routine 20 times. Is there another way to do this? Is there another XML module that can be more helpful than XML::Twig?</p>\n"}, {"tags": ["git", "perl", "svn", "git-svn"], "comments": [{"owner": {"reputation": 1034879, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 0, "creation_date": 1454400366, "post_id": 33154790, "comment_id": 58014944, "body": "Git 2.7.1 (February 2016) should fix the issue. See <a href=\"http://stackoverflow.com/a/35148001/6309\">my answer below</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2345, "user_id": 1904815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0d91993986d41cc2e45871433d6fa31?s=128&d=identicon&r=PG", "display_name": "JonnyJD", "link": "https://stackoverflow.com/users/1904815/jonnyjd"}, "is_accepted": false, "score": 0, "last_activity_date": 1452940456, "last_edit_date": 1452940456, "creation_date": 1444929792, "answer_id": 33154791, "question_id": 33154790, "link": "https://stackoverflow.com/questions/33154790/git-svn-commands-fail-with-value-is-not-a-string-or-undef-at-usr-share-per/33154791#33154791", "title": "&quot;git svn&quot; commands fail with &quot;Value is not a string (or undef) at /usr/share/perl5/vendor_perl/Git/SVN/Ra.pm line 96&quot;", "body": "<p>I am still not sure what piece of software needs to change (if any), but with the perl code I could pinpoint the problem to my configuration.</p>\n\n<p>To keep subversion from storing passwords I had in <code>~/.subversion/config</code>:</p>\n\n<pre><code>[auth]\nstore-passwords = no\n</code></pre>\n\n<p>Commenting the line (<code># store-passwords = no</code>) made <code>git svn</code> work again.\nStarting with subversion 1.6 specifying this setting in the file <code>config</code> was <a href=\"http://svnbook.red-bean.com/en/1.7/svn.advanced.confarea.html#svn.advanced.confarea.opts.config\" rel=\"nofollow\">deprecated</a> (but worked).\nHowever, subversion 1.9.x (probably starting with 1.9) seems to remove this option altogether (I couldn't find the 1.9 Documentation, <a href=\"http://svnbook.red-bean.com\" rel=\"nofollow\">http://svnbook.red-bean.com</a> still features 1.8 as \"nightly\"). This didn't break subversion, but it did break <code>git svn</code> for me.</p>\n\n<p>Starting with Subversion 1.6 this option can be given in <code>~/.subversion/servers</code> instead:</p>\n\n<pre><code>[global]\nstore-passwords = no\n</code></pre>\n\n<p>This might be a bug in the subversion perl files that is triggered by git-svn. However, I am not fluent enough in perl to make a good bug report about that. Additionally, my configuration is wrong (for subversion 1.9) and I wouldn't have found out about that if it didn't break in some way. Might be good to break in a \"better\" way though.</p>\n\n<p>EDIT:\nThere is now a patch for git-svn available at\n<a href=\"https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=797705;msg=15\" rel=\"nofollow\">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=797705;msg=15</a></p>\n"}, {"tags": [], "owner": {"reputation": 1034879, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 1, "last_activity_date": 1454400341, "creation_date": 1454400341, "answer_id": 35148001, "question_id": 33154790, "link": "https://stackoverflow.com/questions/33154790/git-svn-commands-fail-with-value-is-not-a-string-or-undef-at-usr-share-per/35148001#35148001", "title": "&quot;git svn&quot; commands fail with &quot;Value is not a string (or undef) at /usr/share/perl5/vendor_perl/Git/SVN/Ra.pm line 96&quot;", "body": "<p>Git 2.7.1 should soon (February 2016) fix this issue.</p>\n\n<p>See <a href=\"https://github.com/git/git/commit/0b6641557ccfdbd855c88b7980c1a24224b83c74\" rel=\"nofollow\">commit 0b66415</a> (16 Jan 2016) by <a href=\"https://github.com/ele828\" rel=\"nofollow\">Eric Wong (<code>ele828</code>)</a>.<br>\n<sup>(Merged by <a href=\"https://github.com/gitster\" rel=\"nofollow\">Junio C Hamano -- <code>gitster</code> --</a> in <a href=\"https://github.com/git/git/commit/6d579a0de63157b771958c30c0d8a28cfafa7574\" rel=\"nofollow\">commit 6d579a0</a>, 01 Feb 2016)</sup>  </p>\n\n<h1><code>git-svn</code>: fix <code>auth</code> parameter handling on SVN 1.9.0+</h1>\n\n<blockquote>\n  <p>For users with \"<code>store-passwords = no</code>\" set in the \"<code>[auth]</code>\" section of their <code>~/.subversion/config</code>, SVN 1.9.0+ would fail with the following message when attempting to call <code>svn_auth_set_parameter</code>:</p>\n</blockquote>\n\n<pre><code>Value is not a string (or undef) at Git/SVN/Ra.pm\n</code></pre>\n\n<blockquote>\n  <p>Ironically, this breakage was caused by r1553823 in subversion:</p>\n  \n  <h3>\"Make <code>svn_auth_set_parameter()</code> usable from Perl bindings.\"</h3>\n  \n  <p>Since 2007 (<a href=\"https://github.com/git/git/commit/602015e0e6ec5d3d79b71b0d5e2583fd015417e6\" rel=\"nofollow\">602015e</a>), <code>git-svn</code> has used a workaround to make <code>svn_auth_set_parameter</code> usable internally.<br>\n  However this workaround breaks under SVN 1.9+, which deals properly with the type mapping and fails to recognize our workaround.</p>\n  \n  <p>For pre-1.9.0 SVN, we continue to use the existing workaround for the lack of proper type mapping in the bindings.</p>\n  \n  <p>Tested under subversion 1.6.17 and 1.9.3.</p>\n  \n  <p>I've also verified r1553823 was not backported to SVN 1.8.x:</p>\n</blockquote>\n\n<pre><code>BRANCH=http://svn.apache.org/repos/asf/subversion/branches/1.8.x\nsvn log -v $BRANCH/subversion/bindings/swig/core.i\n</code></pre>\n\n<p>ref: <a href=\"https://bugs.debian.org/797705\" rel=\"nofollow\">https://bugs.debian.org/797705</a></p>\n"}], "owner": {"reputation": 2345, "user_id": 1904815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0d91993986d41cc2e45871433d6fa31?s=128&d=identicon&r=PG", "display_name": "JonnyJD", "link": "https://stackoverflow.com/users/1904815/jonnyjd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 35148001, "answer_count": 2, "score": 0, "last_activity_date": 1454400341, "creation_date": 1444929792, "last_edit_date": 1446398987, "question_id": 33154790, "link": "https://stackoverflow.com/questions/33154790/git-svn-commands-fail-with-value-is-not-a-string-or-undef-at-usr-share-per", "title": "&quot;git svn&quot; commands fail with &quot;Value is not a string (or undef) at /usr/share/perl5/vendor_perl/Git/SVN/Ra.pm line 96&quot;", "body": "<p>I have a git repository created with <code>git svn clone</code> from an upstream SVN repository. The repository was created and configured some time ago (1 or 2 years). Pulling (<code>git svn fetch</code>/<code>git svn rebase</code>) and pushing (<code>git svn dcommit</code>) worked fine before. I stopped using the repository for a couple of months and using any of these commands now fails with:</p>\n\n<pre><code>Value is not a string (or undef) at /usr/share/perl5/vendor_perl/Git/SVN/Ra.pm line 96\n</code></pre>\n\n<p>So I am not able to use git-svn. How can I make it work again?</p>\n\n<p>I am running Arch Linux so there is a good chance there was an update to either Subversion or Git that somehow broke my setup. However, I didn't find anything related when searching for the error message.\nThe perl line in question looks like this in my current git version (since line 96 might be different in other versions):</p>\n\n<pre><code>SVN::_Core::svn_auth_set_parameter($baton,\n    $SVN::_Core::SVN_AUTH_PARAM_DONT_STORE_PASSWORDS,\n    bless (\\$dont_store_passwords, \"_p_void\"));\n</code></pre>\n\n<p>I am currently using subversion 1.9.2 and git 2.6.1</p>\n\n<p>EDIT: The same problem is tracked in <a href=\"https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=797705\" rel=\"nofollow\">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=797705</a></p>\n"}, {"tags": ["perl", "awk", "text-processing"], "comments": [{"owner": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "edited": false, "score": 2, "creation_date": 1444928624, "post_id": 33154377, "comment_id": 54118061, "body": "why don&#39;t you use <code>sort</code> command in bash ?"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 5415142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e9770f28cb247c7eeadbda98f778e7?s=128&d=identicon&r=PG&f=1", "display_name": "Hamed Ghadimi", "link": "https://stackoverflow.com/users/5415142/hamed-ghadimi"}, "edited": false, "score": 0, "creation_date": 1444929142, "post_id": 33154478, "comment_id": 54118324, "body": "row 5 must be: 2 11 and row 6 must be: 2 10"}, {"owner": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "reply_to_user": {"reputation": 29, "user_id": 5415142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e9770f28cb247c7eeadbda98f778e7?s=128&d=identicon&r=PG&f=1", "display_name": "Hamed Ghadimi", "link": "https://stackoverflow.com/users/5415142/hamed-ghadimi"}, "edited": false, "score": 0, "creation_date": 1444929973, "post_id": 33154478, "comment_id": 54118774, "body": "@HamedGhadimi <code>sort -k1n -s file.txt</code>"}, {"owner": {"reputation": 2570, "user_id": 251947, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/80f18fe71d6fc0940ab8b7a036dd056e?s=128&d=identicon&r=PG", "display_name": "Chris Koknat", "link": "https://stackoverflow.com/users/251947/chris-koknat"}, "reply_to_user": {"reputation": 29, "user_id": 5415142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e9770f28cb247c7eeadbda98f778e7?s=128&d=identicon&r=PG&f=1", "display_name": "Hamed Ghadimi", "link": "https://stackoverflow.com/users/5415142/hamed-ghadimi"}, "edited": false, "score": 0, "creation_date": 1444930120, "post_id": 33154478, "comment_id": 54118854, "body": "@HamedGhadimi - I don&#39;t understand why &quot;2 11&quot; should be before &quot;2 10&quot;"}, {"owner": {"reputation": 29, "user_id": 5415142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e9770f28cb247c7eeadbda98f778e7?s=128&d=identicon&r=PG&f=1", "display_name": "Hamed Ghadimi", "link": "https://stackoverflow.com/users/5415142/hamed-ghadimi"}, "reply_to_user": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "edited": false, "score": 0, "creation_date": 1444930619, "post_id": 33154478, "comment_id": 54119114, "body": "@JoseRicardoBustosM. Thank you it works."}, {"owner": {"reputation": 36625, "user_id": 2449905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zBnOo.jpg?s=128&g=1", "display_name": "Dan Lowe", "link": "https://stackoverflow.com/users/2449905/dan-lowe"}, "edited": false, "score": 0, "creation_date": 1444955989, "post_id": 33154478, "comment_id": 54130398, "body": "@ChrisKoknat This seems to be an indexed series. So the point is to take all <code>1</code> entries <i>in the order they are now</i> first, then all <code>2</code> entries, <i>in the order they are now</i> next..."}], "tags": [], "owner": {"reputation": 2570, "user_id": 251947, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/80f18fe71d6fc0940ab8b7a036dd056e?s=128&d=identicon&r=PG", "display_name": "Chris Koknat", "link": "https://stackoverflow.com/users/251947/chris-koknat"}, "is_accepted": false, "score": 1, "last_activity_date": 1444928788, "creation_date": 1444928788, "answer_id": 33154478, "question_id": 33154377, "link": "https://stackoverflow.com/questions/33154377/how-to-sort-a-text-file-with-awk/33154478#33154478", "title": "How to sort a text file with awk?", "body": "<p><code>sort -k1,2 file.txt</code></p>\n\n<p>produces</p>\n\n<pre><code>1 10\n1 10\n1 11\n2 10\n2 10\n2 11\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1444930156, "creation_date": 1444930156, "answer_id": 33154893, "question_id": 33154377, "link": "https://stackoverflow.com/questions/33154377/how-to-sort-a-text-file-with-awk/33154893#33154893", "title": "How to sort a text file with awk?", "body": "<p>For this is better to use <code>sort</code> command</p>\n\n<pre><code>sort -k1n -s file.txt\n</code></pre>\n\n<p>Another solution using <code>Gnu-awk</code> 4, <a href=\"https://www.gnu.org/software/gawk/manual/html_node/Controlling-Scanning.html\" rel=\"nofollow\">Controlling Scanning</a></p>\n\n<pre><code>gawk '\n{d[$1][length(d[$1])+1]=$0}\nEND{\n    PROCINFO[\"sorted_in\"] = \"@val_num_asc\"; \n    for(key in d){\n        for(i=1; i&lt;=length(d[key]); ++i) {\n            print d[key][i]\n        }\n    }\n}' file.txt\n</code></pre>\n\n<p>you get,</p>\n\n<pre>\n1 10\n1 10\n1 11\n2 10\n2 11\n2 10\n</pre>\n"}, {"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 2, "last_activity_date": 1444931810, "creation_date": 1444931810, "answer_id": 33155350, "question_id": 33154377, "link": "https://stackoverflow.com/questions/33154377/how-to-sort-a-text-file-with-awk/33155350#33155350", "title": "How to sort a text file with awk?", "body": "<p>This will maintain the order of the lines within each grouping:</p>\n\n<pre><code>perl -ane '\n    push @{$lines{$F[0]}}, $_;\n   } {\n    print join \"\", map {join \"\", @{$lines{$_}}} sort keys %lines;\n' &lt;&lt;END\n1 a\n2 a\n1 b\n1 a\n2 c\n2 b\nEND\n</code></pre>\n\n\n\n<pre><code>1 a\n1 b\n1 a\n2 a\n2 c\n2 b\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5415142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e9770f28cb247c7eeadbda98f778e7?s=128&d=identicon&r=PG&f=1", "display_name": "Hamed Ghadimi", "link": "https://stackoverflow.com/users/5415142/hamed-ghadimi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 1, "closed_date": 1445184361, "answer_count": 3, "score": -1, "last_activity_date": 1444931810, "creation_date": 1444928453, "last_edit_date": 1444928987, "question_id": 33154377, "link": "https://stackoverflow.com/questions/33154377/how-to-sort-a-text-file-with-awk", "closed_reason": "Duplicate", "title": "How to sort a text file with awk?", "body": "<p>I would like to reorder a whole file.</p>\n\n<p>file.txt looks like this:</p>\n\n<pre>\n1 10\n1 10\n2 10\n1 11\n2 11\n2 10\n</pre>\n\n<p>I would like it to look like this:</p>\n\n<pre>\n1 10\n1 10\n1 11\n2 10\n2 11\n2 10\n</pre>\n"}, {"tags": ["perl", "include", "export"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1444924773, "post_id": 33153161, "comment_id": 54115769, "body": "Maybe add that those freshly-made shells are immediately discarded."}, {"owner": {"reputation": 21, "user_id": 4042495, "user_type": "registered", "profile_image": "https://graph.facebook.com/563118309/picture?type=large", "display_name": "Ankur Chaturvedi", "link": "https://stackoverflow.com/users/4042495/ankur-chaturvedi"}, "edited": false, "score": 0, "creation_date": 1444924855, "post_id": 33153161, "comment_id": 54115834, "body": "Many thanks. It worked although the python command in system within the single quote also works fine. So am not lcear about the shell you mentioned about."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1444927888, "post_id": 33153161, "comment_id": 54117667, "body": "I&#39;m talking about the shells spawned to executed your shell commands. How do you think the shell command you pass to <code>system</code> gets executed? <code>system($shell_cmd)</code> is short for <code>system(&#39;sh&#39;, &#39;-c&#39;, $shell_command)</code>. It&#39;s a waste, and a potential source of problem. it makes it easy to add shell injection vulnerabilities. It complicates signaling, and it prevents you from accurately determining how <code>python</code> exited. So no, it&#39;s not fine; it&#39;s adequate at best."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1444924526, "creation_date": 1444924526, "answer_id": 33153161, "question_id": 33152785, "link": "https://stackoverflow.com/questions/33152785/export-library-path-include-in-perl/33153161#33153161", "title": "Export Library path &amp; include in perl", "body": "<p>You're setting the env vars of freshly-made shells, not of the Perl process that is to parent <code>python</code>. For that, you need the following:</p>\n\n<pre><code>$ENV{LIBRARY_PATH} = '/opt/htslib/lib/';\n$ENV{LD_LIBRARY_PATH} = '/opt/htslib/lib/';\n$ENV{INCLUDE_PATH} = '/opt/htslib/include/';\n</code></pre>\n\n<p>The last line of your code is better written as follows, since it avoids a needless shell:</p>\n\n<pre><code>system(\"python\", \"/opt/Platypus_0.8.1/Platypus.py\", \"callVariants\", \"--help\");\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4042495, "user_type": "registered", "profile_image": "https://graph.facebook.com/563118309/picture?type=large", "display_name": "Ankur Chaturvedi", "link": "https://stackoverflow.com/users/4042495/ankur-chaturvedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444924526, "creation_date": 1444923528, "question_id": 33152785, "link": "https://stackoverflow.com/questions/33152785/export-library-path-include-in-perl", "title": "Export Library path &amp; include in perl", "body": "<p>I have a query with regards to exporting library path &amp; include for Platypus variant caller. The htslib it requires and platypus are installed on the server and I don't have sudo permissions to change them.</p>\n\n<p>I am trying the following code to export library &amp; include for running the caller. Am i missing osmething because am not able to execute it?</p>\n\n<p>Code:</p>\n\n<pre><code>#!usr/perl-w\nuse strict;\nuse warnings;\n\n`export LIBRARY_PATH=/opt/htslib/lib/`;\n`export LD_LIBRARY_PATH=/opt/htslib/lib/`;\n`export INCLUDE_PATH=/opt/htslib/include/`;\nsystem (\"python /opt/Platypus_0.8.1/Platypus.py callVariants --help\");\n</code></pre>\n\n<p>Any sort of help would be appreciated. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6529, "user_id": 4252320, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-_DAs7Dtci9U/AAAAAAAAAAI/AAAAAAAAIf8/96ZNJAUF2Xk/photo.jpg?sz=128", "display_name": "ergonaut", "link": "https://stackoverflow.com/users/4252320/ergonaut"}, "edited": false, "score": 0, "creation_date": 1444923464, "post_id": 33152670, "comment_id": 54114890, "body": "you could just use vi and type :%s/^word.*\\n.*\\n.*\\n//g or you could use this in a multiline regex to replace."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1444923797, "post_id": 33152670, "comment_id": 54115103, "body": "<code>grep -v -a2 &quot;word&quot;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 4, "last_activity_date": 1444923525, "creation_date": 1444923525, "answer_id": 33152784, "question_id": 33152670, "link": "https://stackoverflow.com/questions/33152670/perl-script-to-delete-lines-from-file/33152784#33152784", "title": "perl script to delete lines from file", "body": "<p>I'd do it something like this:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\n#iterate one line at a time. \nwhile ( &lt;DATA&gt; ) {\n    #if we hit the delimiter, read and discard two more line. \n    if ( m/word/ ) { &lt;DATA&gt;; &lt;DATA&gt; ; }  \n    #otherwise print it. \n    else { print; };\n}\n\n__DATA__\n1\n2\n3\nword\n321\n3213\n412\nword\n132\n1231\n</code></pre>\n\n<p>Which gives:</p>\n\n<pre><code>1\n2\n3\n412\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1444932500, "last_edit_date": 1444932500, "creation_date": 1444929710, "answer_id": 33154764, "question_id": 33152670, "link": "https://stackoverflow.com/questions/33152670/perl-script-to-delete-lines-from-file/33154764#33154764", "title": "perl script to delete lines from file", "body": "<p>The excellent <a href=\"http://metacpan.org/module/Tie::File\" rel=\"nofollow\"><code>Tie::File</code></a> module often seems to be forgotten. It is ideal for this sort of thing</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse File::Copy qw/ copy /;\nuse Tie::File;\n\nmy $local_dir = '.';\n\ncopy \"$local_dir/x.txt\", 'y.txt';\ntie my @file, 'Tie::File', 'y.txt';\n\nfor ( my $i = 0; $i &lt; @file; ) {\n  if ( $file[$i] eq 'word' ) {\n    splice @file, $i, 3;\n  }\n  else {\n    ++$i;\n  }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>1\n2\n3\n412\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3858383, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000809471624/picture?type=large", "display_name": "Popescu Emanuel", "link": "https://stackoverflow.com/users/3858383/popescu-emanuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1495, "favorite_count": 0, "accepted_answer_id": 33154764, "answer_count": 2, "score": 1, "last_activity_date": 1444932500, "creation_date": 1444923196, "last_edit_date": 1444923445, "question_id": 33152670, "link": "https://stackoverflow.com/questions/33152670/perl-script-to-delete-lines-from-file", "title": "perl script to delete lines from file", "body": "<p>I have a file that I want to read it and for each 'word' found to delete the next 2 lines including the line with the 'word'.\n the structure of the file is somekind line this:</p>\n\n<pre><code>1\n2\n3\nword\n321\n3213\n412\nword\n132\n1231\n</code></pre>\n\n<p>this is what I have until now:</p>\n\n<pre><code>open FILE, \"$localDir\\\\x.txt\" or die $!;\n@fileLines = &lt;FILE&gt;;\nclose FILE;\n\n$output = 'y.txt';\nopen my $outfile, '&gt;', $output or die \"Can't write to $output: $!\";\n\nfor ($i = 0; $i &lt; scalar(@fileLines); $i++) {\n       next if ($fileLines[$i] =~ /'word/);\n         print $outfile $_ ;\n\n\n}\n</code></pre>\n\n<p>thanks</p>\n"}, {"tags": ["perl", "devel-nytprof"], "answers": [{"tags": [], "owner": {"reputation": 1033, "user_id": 77193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82705f5ab43c73273ab5d690866b3?s=128&d=identicon&r=PG", "display_name": "Tim Bunce", "link": "https://stackoverflow.com/users/77193/tim-bunce"}, "is_accepted": true, "score": 5, "last_activity_date": 1444937677, "last_edit_date": 1592644375, "creation_date": 1444937677, "answer_id": 33157017, "question_id": 33152542, "link": "https://stackoverflow.com/questions/33152542/how-to-use-nytprof-when-there-are-multiple-processes/33157017#33157017", "title": "How to use NYTProf when there are multiple processes", "body": "<p>The <a href=\"https://metacpan.org/pod/Devel::NYTProf#PROFILING\" rel=\"noreferrer\">PROFILING section of the documentation</a> gives an example:</p>\n<blockquote>\n<p>PERL5OPT=-d:NYTProf</p>\n<p>That's also very handy when you can't alter the perl command line being used to run the script you want to profile. Usually you'll want to enable the &quot;addpid=1&quot; option to ensure any nested invocations of perl don't overwrite the profile.</p>\n</blockquote>\n<p>The docs for the <a href=\"https://metacpan.org/pod/Devel::NYTProf#addpid-1\" rel=\"noreferrer\">addpid option</a> explain that:</p>\n<blockquote>\n<p>Append the current process id to the end of the filename. This avoids concurrent, or consecutive, processes from overwriting the same file. If a fork is detected during profiling then the child process will automatically add the process id to the filename.</p>\n</blockquote>\n<p>You say that you &quot;merged the results&quot;. I presume you mean using <a href=\"https://metacpan.org/pod/distribution/Devel-NYTProf/bin/nytprofmerge\" rel=\"noreferrer\">nytprofmerge</a>. That should only be used to merge multiple result files made by exactly the same source code. E.g., by a process that forked to create child processes, or multiple runs of an unchanged script. In your case you're generating profiles from different scripts so each profile output should be used to generate a separate report without merging.</p>\n<p>You say that &quot;all the profiling information relating to the functions is missing&quot;. I'll need more information about exactly how you're profiling the code and generating the reports before I can help you there.</p>\n"}, {"tags": [], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "is_accepted": false, "score": 0, "last_activity_date": 1558532653, "creation_date": 1558532653, "answer_id": 56258304, "question_id": 33152542, "link": "https://stackoverflow.com/questions/33152542/how-to-use-nytprof-when-there-are-multiple-processes/56258304#56258304", "title": "How to use NYTProf when there are multiple processes", "body": "<p>Adding on to the <a href=\"https://stackoverflow.com/a/33157017/2877364\">answer by @TimBunce</a>, here's the step-by-step of how I used <code>addpid</code> to generate a report (tested in <code>bash</code>, with Devel::NYTProf 6.06).  </p>\n\n<p>In my case, I was doing multiple runs of the same code.  Since this is the question that comes up at the top of the Google results for that situation, I am adding this answer in case it helps future readers.</p>\n\n<pre><code># Clean any old output\nrm -rf nytprof*\n\n# Run the program with addpid=1.\n#   `{1..10}` =&gt; ten runs\n#   `foo.pl` =&gt; whatever your program name and other Perl options are\n# This makes files `nytprof.out.####`, where `####` is the PID.\n(export NYTPROF=addpid=1 ; for i in {1..10} ; do perl -d:NYTProf foo.pl ; done ; )    \n\n# Merge the result files.  This produces `nytprof-merged.out`.\nnytprofmerge -v nytprof.out.*\n\n# Make the HTML report into `nytprof/`\nnytprofhtml -f nytprof-merged.out\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 3462712, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/be734467ac93968d93395a8452a3e768?s=128&d=identicon&r=PG&f=1", "display_name": "rvkreddy", "link": "https://stackoverflow.com/users/3462712/rvkreddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "accepted_answer_id": 33157017, "answer_count": 2, "score": 4, "last_activity_date": 1558532653, "creation_date": 1444922846, "last_edit_date": 1444939927, "question_id": 33152542, "link": "https://stackoverflow.com/questions/33152542/how-to-use-nytprof-when-there-are-multiple-processes", "title": "How to use NYTProf when there are multiple processes", "body": "<p>In my application, I have multiple processes. Initially I start one Perl process by running .pl file, it in turn calls two more .pl scripts creating 2 new processes.\nHow to use Profile such a code.\nI did NYTProf, merged the results and opened with html but all the profiling information relating to the functions is missing.\nInformation to profile this kind of application will help?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 5, "creation_date": 1444922571, "post_id": 33152359, "comment_id": 54114250, "body": "<code>[@temp]</code> makes shallow copy of @temp and returns array reference. <code>return \\@temp</code> is the same but without copying. Check <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlreftut.html</a> if you&#39;re not familiar with perl references."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5420071"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1444922682, "post_id": 33152359, "comment_id": 54114343, "body": "Thank you, didn&#39;t know that."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1444922730, "post_id": 33152359, "comment_id": 54114381, "body": "That&#39;s be a good thing to turn in to an actual answer :)"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1444923038, "post_id": 33152359, "comment_id": 54114575, "body": "@Sobrique it&#39;s not an answer, it&#39;s more a reference to perldoc. :)"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1444923125, "post_id": 33152359, "comment_id": 54114645, "body": "It might interest you to know that that whole quasi argument checking is completely useless. It tried to check if <code>$cls_option</code> contains a comma, presumably to check for multiple arguments. But <code>split</code> will not return a different answer anyway, so the exercise is completely redundant."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1444923230, "post_id": 33152359, "comment_id": 54114719, "body": "But it does answer the question as asked, and expands by including a reference source. That&#39;s a better answer than I&#39;ve seen to many questions."}], "answers": [{"tags": [], "owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "is_accepted": false, "score": 1, "last_activity_date": 1444923437, "creation_date": 1444923437, "answer_id": 33152762, "question_id": 33152359, "link": "https://stackoverflow.com/questions/33152359/when-return-array-can-be-in-brackets/33152762#33152762", "title": "when return array can be in brackets?", "body": "<p>The <code>[ ... ]</code> notation creates an array reference, a scalar value. For example:</p>\n\n<pre><code>my $aref = [ 1, 2, 3 ];\n</code></pre>\n\n<p>This is similar to doing this:</p>\n\n<pre><code>my @array = (1, 2, 3);\nmy $aref = \\@array;\n</code></pre>\n\n<p>So it is more convenient to use sometimes. In this case, it is not a good idea. The better option would be to simply return <code>\\@temp</code>, since it is a lexical variable and will go out of scope when the subroutine is exited.</p>\n\n<p>You might also be interested in know that this part:</p>\n\n<pre><code>@temp = split /\\,/,$cls_option if ( $cls_option =~ /\\,/ ); \n$temp[0] = $cls_option if ( $cls_option !~ /\\,/ );    \n</code></pre>\n\n<p>...is completely redundant and can be reduced to</p>\n\n<pre><code>@temp = split /,/, $cls_option;\n</code></pre>\n\n<p>Since <code>split</code> will never return a different value if the string does not contain the delimiter <code>,</code>. Also, <code>,</code> does not need to be escaped.</p>\n\n<p>You can also reduce your code further. And I would change the name of your hash to indicate what it does.</p>\n\n<pre><code># dedupe arguments\nmy ( $cls_option ) = @_;   \nmy %seen;    \n\n$seen{$_}++ for split /,/, $cls_option;\n\nreturn [ sort keys %seen ];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1444928708, "post_id": 33154386, "comment_id": 54118099, "body": "That will result in different output if the input is an empty string, but I don&#39;t think that&#39;s a problem."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1444928484, "creation_date": 1444928484, "answer_id": 33154386, "question_id": 33152359, "link": "https://stackoverflow.com/questions/33152359/when-return-array-can-be-in-brackets/33154386#33154386", "title": "when return array can be in brackets?", "body": "<p>I suggest that your subroutine would be better (and more Perlishly) written like this</p>\n\n<pre><code>sub unique_csv {\n    my %uniq = map { $_ =&gt; 1 } split /,/, shift;\n    [ sort keys %uniq ];\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1444928600, "creation_date": 1444928600, "answer_id": 33154423, "question_id": 33152359, "link": "https://stackoverflow.com/questions/33152359/when-return-array-can-be-in-brackets/33154423#33154423", "title": "when return array can be in brackets?", "body": "<pre><code>return [ @temp ];\n</code></pre>\n\n<p>is basically the same as</p>\n\n<pre><code>my @anon = @temp;\nreturn \\@anon;\n</code></pre>\n\n<p>There's no need to make that copy here (since <code>@temp</code> would otherwise cease to exist), so the author should have used</p>\n\n<pre><code>return \\@temp;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5420071"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1444928600, "creation_date": 1444922331, "last_edit_date": 1444922920, "question_id": 33152359, "link": "https://stackoverflow.com/questions/33152359/when-return-array-can-be-in-brackets", "title": "when return array can be in brackets?", "body": "<p>I have a function, which is not mine. Below is the code  </p>\n\n<pre><code>my ( $cls_option ) = @_;   \nmy ( %temp, @temp );    \n@temp = split /\\,/,$cls_option if ( $cls_option =~ /\\,/ ); \n$temp[0] = $cls_option if ( $cls_option !~ /\\,/ );    \n\nforeach my $temp (@temp) {  \n    $temp{$temp}++;    \n}    \n@temp = sort keys %temp; \n\nreturn[@temp];    \n</code></pre>\n\n<p>why return array in brackets?    </p>\n"}, {"tags": ["perl", "file", "hash"], "comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1444922428, "post_id": 33151362, "comment_id": 54114160, "body": "Without using cpan modules, keyboard, and left hands?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5376684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/72d8ec43f6808e4bfd46e2778c28bdc4?s=128&d=identicon&r=PG&f=1", "display_name": "Perl", "link": "https://stackoverflow.com/users/5376684/perl"}, "edited": false, "score": 0, "creation_date": 1444923932, "post_id": 33151945, "comment_id": 54115197, "body": "Since, I am perl basic user I am unable to understand the concept clearly. You asked me to use temp file so that means i have read line by line from input file and copy it to output file (except when encoountered the &quot;&quot; i can replace with name?) isit? I shall try this now.Thanks"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 13, "user_id": 5376684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/72d8ec43f6808e4bfd46e2778c28bdc4?s=128&d=identicon&r=PG&f=1", "display_name": "Perl", "link": "https://stackoverflow.com/users/5376684/perl"}, "edited": false, "score": 0, "creation_date": 1444924022, "post_id": 33151945, "comment_id": 54115262, "body": "The long and short of it is - you cannot do what you want with <code>+&lt;</code> because it&#39;s a text file. So write your output to a new file, and when you&#39;re done, copy it over the original."}, {"owner": {"reputation": 13, "user_id": 5376684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/72d8ec43f6808e4bfd46e2778c28bdc4?s=128&d=identicon&r=PG&f=1", "display_name": "Perl", "link": "https://stackoverflow.com/users/5376684/perl"}, "edited": false, "score": 0, "creation_date": 1444924302, "post_id": 33151945, "comment_id": 54115460, "body": "ok Sobrique I am trying that now.I am copying line by line(only editing the required line) from input file to output file."}, {"owner": {"reputation": 13, "user_id": 5376684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/72d8ec43f6808e4bfd46e2778c28bdc4?s=128&d=identicon&r=PG&f=1", "display_name": "Perl", "link": "https://stackoverflow.com/users/5376684/perl"}, "edited": false, "score": 0, "creation_date": 1444924443, "post_id": 33151945, "comment_id": 54115547, "body": "In internet I found some complicated code where they are using tempfile(UNLINK=&gt;1) . If I want to understand this concept can you please refer me to any good reference or website. where they explain in easy way please?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 13, "user_id": 5376684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/72d8ec43f6808e4bfd46e2778c28bdc4?s=128&d=identicon&r=PG&f=1", "display_name": "Perl", "link": "https://stackoverflow.com/users/5376684/perl"}, "edited": false, "score": 0, "creation_date": 1444924592, "post_id": 33151945, "comment_id": 54115643, "body": "Don&#39;t need to get that complicated. Just <code>open ( my $output, &#39;&gt;&#39;, &quot;new_file.txt&quot; ) or die $!;</code> then instead of <code>print $file ...</code> you can <code>print {$output} ....</code> Once you&#39;re done, copy it over the original."}, {"owner": {"reputation": 13, "user_id": 5376684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/72d8ec43f6808e4bfd46e2778c28bdc4?s=128&d=identicon&r=PG&f=1", "display_name": "Perl", "link": "https://stackoverflow.com/users/5376684/perl"}, "edited": false, "score": 0, "creation_date": 1444925577, "post_id": 33151945, "comment_id": 54116316, "body": "Yes I tried the following open(my $FILE,&#39;&lt;&#39;,$studentfile); open(my $output,&#39;&gt;&#39;,&quot;outputfile.txt&quot;);  while(&lt;$FILE&gt;){ if($_ =~ /&quot;&quot;/) { print {$output} &quot;I am empty&quot; ; } else  {  print {$output} $_ ; } } close($FILE); close($output);      but the formatting has changed."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 13, "user_id": 5376684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/72d8ec43f6808e4bfd46e2778c28bdc4?s=128&d=identicon&r=PG&f=1", "display_name": "Perl", "link": "https://stackoverflow.com/users/5376684/perl"}, "edited": false, "score": 0, "creation_date": 1444925665, "post_id": 33151945, "comment_id": 54116372, "body": "You may be missing line feeds in that case. Hard to say based on content in comments."}, {"owner": {"reputation": 13, "user_id": 5376684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/72d8ec43f6808e4bfd46e2778c28bdc4?s=128&d=identicon&r=PG&f=1", "display_name": "Perl", "link": "https://stackoverflow.com/users/5376684/perl"}, "edited": false, "score": 0, "creation_date": 1444925789, "post_id": 33151945, "comment_id": 54116444, "body": "Ya it came to normal when I used the following                                      if($_ =~ /&quot;&quot;/) { my $replace = $_; $replace =~ s/&quot;&quot;/&quot;I am empty&quot;/;     but the actual hash thing i have to do but no problem i shall try that...thanks for your help"}, {"owner": {"reputation": 13, "user_id": 5376684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/72d8ec43f6808e4bfd46e2778c28bdc4?s=128&d=identicon&r=PG&f=1", "display_name": "Perl", "link": "https://stackoverflow.com/users/5376684/perl"}, "edited": false, "score": 0, "creation_date": 1444925913, "post_id": 33151945, "comment_id": 54116515, "body": "hash thing means.... I have to save the previous line of file then compare with an element in hash then if current line is &quot;&quot; I have to finally get the an other element from hash and insert it in text file. (I have put this requirement in my question). I shall try that now."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 13, "user_id": 5376684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/72d8ec43f6808e4bfd46e2778c28bdc4?s=128&d=identicon&r=PG&f=1", "display_name": "Perl", "link": "https://stackoverflow.com/users/5376684/perl"}, "edited": false, "score": 0, "creation_date": 1444925944, "post_id": 33151945, "comment_id": 54116531, "body": "It&#39;s because your <code>while</code> loop is getting <code>\\n</code> as part of the line. So when you <code>print</code> it there&#39;s a line feed. But if you print <code>&quot;I am empty&quot;</code> there is no linefeed. But you don&#39;t need to use <code>$replace</code> - ` s/&quot;&quot;/&quot;I am empty&quot;/;` will modify <code>$_</code>  by default and then you can just print it."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 13, "user_id": 5376684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/72d8ec43f6808e4bfd46e2778c28bdc4?s=128&d=identicon&r=PG&f=1", "display_name": "Perl", "link": "https://stackoverflow.com/users/5376684/perl"}, "edited": false, "score": 0, "creation_date": 1444925992, "post_id": 33151945, "comment_id": 54116556, "body": "Don&#39;t change your question - ask a new one. But that&#39;s pretty easy - you can use a hash element in the RHS of a replace."}, {"owner": {"reputation": 13, "user_id": 5376684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/72d8ec43f6808e4bfd46e2778c28bdc4?s=128&d=identicon&r=PG&f=1", "display_name": "Perl", "link": "https://stackoverflow.com/users/5376684/perl"}, "edited": false, "score": 0, "creation_date": 1444927170, "post_id": 33151945, "comment_id": 54117260, "body": "No I am not changing the question that is what I am after. I have now accomplished my task (I have traversed through hash and used the regex with replace). Thanks a lot."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1444921486, "last_edit_date": 1444921486, "creation_date": 1444921171, "answer_id": 33151945, "question_id": 33151362, "link": "https://stackoverflow.com/questions/33151362/how-to-read-and-write-on-same-text-file-using-perl/33151945#33151945", "title": "How to Read and write on same text file using Perl", "body": "<p>There's a fundamental problem with using <code>while ( &lt;$fh&gt; )</code> at the same time as trying to rewrite. Because that <code>while</code> is reading chunks of file based on a delimiter <code>$/</code>. But files work in <em>bytes</em>.</p>\n\n<p>from <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow\"><code>perldoc open</code></a>: </p>\n\n<blockquote>\n  <p>You can't usually use either read-write mode for updating textfiles, since they have variable-length records. See the -i switch in <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow\"><code>perlrun</code></a> for a better approach.</p>\n</blockquote>\n\n<p>So if you write a different length line, everything goes a bit baffy. It just doesn't work very well for text files, because you have variable length \"records\". </p>\n\n<p>You can use <code>seek</code> to navigate around the file, but bear in mind that you're essentially doing overwrites on a per byte (character) basis. </p>\n\n<p>Or just use a temp file and copy it over your source when you're done. This is what <code>-i</code> does. (Which also means you've a much lower risk of corrupting your data, because you can bail out gracefully if there's a problem)</p>\n"}], "owner": {"reputation": 13, "user_id": 5376684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/72d8ec43f6808e4bfd46e2778c28bdc4?s=128&d=identicon&r=PG&f=1", "display_name": "Perl", "link": "https://stackoverflow.com/users/5376684/perl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 33151945, "answer_count": 1, "score": 0, "last_activity_date": 1444922830, "creation_date": 1444919710, "last_edit_date": 1444922830, "question_id": 33151362, "link": "https://stackoverflow.com/questions/33151362/how-to-read-and-write-on-same-text-file-using-perl", "title": "How to Read and write on same text file using Perl", "body": "<p>I am opening a file in Read Write mode ( +&lt; ) and traversing through each line saving previous line.Based on previous line I am trying to modify current line which doesn't seem to work.</p>\n\n<p><strong>My INPUTS:</strong>  I have a student hash where name,address and DOB are present. I have a file where student information placed between begin(local or international) and end tags.</p>\n\n<p>Please find below my input txt file:</p>\n\n<pre><code>+++++++++++++++++++++++++++ViSHWASCHOOL++++++++++++++++++++++++++\nstudent database system.... xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++  \nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx \nsome text here.... filled with xxx\nfor school data security ++++++\nXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n\n\n/begin Local\n         Karen\n         \"\"\n         mothername Mawna\n         fathername Gildixon\n         total_marks 400 \n         percent 90%  /end Local\n\n/begin Local\n         John\n         \"\"\n         fathername Alister\n         mothername Linda\n         total_marks 320 \n         percent 72%  /end Local        \n\n/begin Local\n         Katie\n         \"24 lenin street florida us\"\n         mothername Sandra\n         fathername Manwel\n         total_marks 450 \n         percent 95%        /end Local\n\n/begin International\n         Boris\n         \"\"\n         mothername laumra\n         fathername deaol\n         total_marks 490 \n         percent 98%  /end International\n\n/begin International\n         hawo binco\n         \"honko , china\"\n         mothername \"\"\n         fathername \"\"\n         total_marks 500 \n         percent 100%  /end International\n</code></pre>\n\n<p><strong>Task:</strong> Now what I want to do is fill all the addresses in the student file where ever it find empty \"\" just after the student name.preserving all spaces and format of student file as is. </p>\n\n<p><strong>My Perl Code:</strong> </p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nmy %student_hash;\nmy $student_report = \"StudentReport.csv\";\n\n         %student_hash = (\n                'RollNummber1' =&gt; {\n                                   'studentname' =&gt; 'Boris',\n                                   'address' =&gt; ['Vietnam',\n                                                 'local'\n                                                ],\n                                   'DOB' =&gt; '5june2000'\n\n                                   },\n                'RollNummber2' =&gt; {\n                                   'studentname' =&gt; 'John',\n                                   'address' =&gt; [ \n                                                 '4th/floor',\n                                                 'Culverdown/Street',\n                                                 'WestHam',\n                                                 'UK.',\n                                                ],\n                                   'DOB' =&gt; '2feb2000'\n\n                                   },\n                'RollNummber3' =&gt; {\n                                   'studentname' =&gt; 'Karen',\n                                   'DOB' =&gt; '5march2000'\n\n                                  }\n               );\n\n\n\nmy $studentfile = \"testfile.txt\";\nmy @studenttype = ('International', 'Local');\n\nforeach my $type (@studenttype) {\n      process_studentfile( $type, $studentfile );\n   }\nprint \"\\nStudent Files are now filled with addresses\\n\";\n\nsub process_studentfile {\n\nmy $type = shift;\nmy $studentfile = shift;\nopen(my $file,'+&lt;',$studentfile);\n\nmy $previous_line = \"\";\nwhile(my $current_line = &lt;$file&gt;){\n   if($current_line =~ /\"\"/) {\n   foreach my $key(%student_hash) {\n       foreach my $name(keys %{$student_hash{$key}}) {\n            if($previous_line =~ /$student_hash{$key}{'studentname'}/) {\n                print $file join(\",\",@{$student_hash{$key}-&gt;{address}});\n            }\n       }\n    }\n    $previous_line = $_; \n    }\n   }\n   close $file;\n}\n</code></pre>\n\n<p>**Note:**I tired this in different ways but still fail to complete the task.Can some one please help without using any cpan modules,standard modules are allowed?</p>\n"}, {"tags": ["perl", "for-loop", "split", "find"], "answers": [{"tags": [], "owner": {"reputation": 237, "user_id": 4991942, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/905abcb6fad9972a27b72013bdff9d95?s=128&d=identicon&r=PG&f=1", "display_name": "technerdius", "link": "https://stackoverflow.com/users/4991942/technerdius"}, "is_accepted": false, "score": 1, "last_activity_date": 1444927189, "last_edit_date": 1444927189, "creation_date": 1444923127, "answer_id": 33152651, "question_id": 33149989, "link": "https://stackoverflow.com/questions/33149989/split-all-of-the-files-in-a-directory-by-1000-lines-and-process-them-through-a-p/33152651#33152651", "title": "Split all of the files in a directory by 1000 lines and process them through a perl script", "body": "<p>So, the answers to my questions are:</p>\n\n<pre><code>for f in *.txt.*; do echo \"Professing $f file...\"; split -l 1000 $f 1split.ALLEMAILS.txt. ; done\n</code></pre>\n\n<p>and </p>\n\n<pre><code>mv *searchcriteria /new/directory/path/\n</code></pre>\n\n<p>I did not need a find command for this after all. So, combining both of these would have done the trick:</p>\n\n<pre><code>for f in *.txt.*; do echo \"Professing $f file...\"; split -l 1000 $f 1split.ALLEMAILS.txt. ; done\nmv *searchcriteria /new/directory/path/ | echo \"done.\"\n</code></pre>\n\n<p>---later on...</p>\n\n<p>I found that this basically took 1 file and processed it. </p>\n\n<p>I fixed that with a small shell script:</p>\n\n<pre><code>#!/bin/sh\n\nfor f in /file/path/*searchcriteria ; ## this was 'split.*' in my case\n\n  do echo \"Processing $f in /file/path/...\" ;\n\n  perl script.pl --script=options $f &gt; output.file ;\n\n  done ;\n\necho \"done.\"\n</code></pre>\n"}], "owner": {"reputation": 237, "user_id": 4991942, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/905abcb6fad9972a27b72013bdff9d95?s=128&d=identicon&r=PG&f=1", "display_name": "technerdius", "link": "https://stackoverflow.com/users/4991942/technerdius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1028, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444927237, "creation_date": 1444915983, "last_edit_date": 1444927237, "question_id": 33149989, "link": "https://stackoverflow.com/questions/33149989/split-all-of-the-files-in-a-directory-by-1000-lines-and-process-them-through-a-p", "title": "Split all of the files in a directory by 1000 lines and process them through a perl script", "body": "<p>I used this line to try and split all of the files in a directory into smaller files and put them in a new directory.</p>\n\n<pre><code>cd /path/to/files/ &amp;&amp; find . -maxdepth 1 -type f -exec split -l 1000 '{}' \"path/to/files/1/prefix {}\" \\;\n</code></pre>\n\n<p>The result was 'no file found', so how do I make this work so that I split all of the files in a directory into smaller 1000-line files and place them in a new directory?</p>\n\n<p>Later on...</p>\n\n<p>I tried many variations and this is not working. I read another article that split cannot operate on multiple files. Do I need to make a shell script, or how do I do this?</p>\n\n<p>I had a bright idea to use a loop. So, I researched the 'for' loop and the following worked:</p>\n\n<pre><code>for f in *.txt.*; do echo \"Professing $f file...\"; split -l 1000 $f 1split.ALLEMAILS.txt. ; done\n</code></pre>\n\n<p><em>.txt.</em> is in all of the files in the working directory. the 'echo' command was optional. for the 'split' command, instead of naming one file, I replaced that with $f as defined by the 'for' line. </p>\n\n<p>The only thing I would like to have been able to do is move all of these to another directory in the command. </p>\n\n<p>Right now, I am stuck on the find command for moving all matching files. This is what I have done so far that is not working:</p>\n\n<pre><code>find . -type f -name '1split.*' -exec mv {} new/directory/{} \\;\n</code></pre>\n\n<p>I get the error ' not a directory ' ; or I tried:</p>\n\n<pre><code>find . -type f -name '1split.*' -exec mv * . 1/ \\;\n</code></pre>\n\n<p>and I get ' no such file or directory '</p>\n\n<p>Any ideas?</p>\n\n<p>I found that this command moved ALL of the files to the new directory instead of the ones specifically meeting the criteria '1split.*'</p>\n"}]