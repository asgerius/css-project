[{"tags": ["html", "forms", "perl", "cgi"], "comments": [{"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1556150114, "post_id": 55839960, "comment_id": 98343594, "body": "&quot;<code>my $mailFrom = email@email&#39;;</code>&quot; that line misses an opening quote. And that one, &quot;<code>my $subjectLine = &quot;Sample Subject:l</code>&quot; a closing quote and a terminating semicolon. And the <code>%</code> in here, &quot;<code>sendmail %mail</code>&quot; gets interpreted as the modulo operator, which doesn&#39;t seem to be your intention... But apart from that, you didn&#39;t ask an actual question, so what would it be?"}, {"owner": {"reputation": 11, "user_id": 11407844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b56d285cb6b6e4e2f74908bab7d0df5?s=128&d=identicon&r=PG&f=1", "display_name": "Vanessa Harper", "link": "https://stackoverflow.com/users/11407844/vanessa-harper"}, "reply_to_user": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1556150248, "post_id": 55839960, "comment_id": 98343616, "body": "Okay thank you. I put it in putty and when I wanted to make the code live. The form did not response when I tried to submitted. And because of that I am unable to get a responses that states - Thank you for submitting your Name, Email and message."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1556181289, "post_id": 55839960, "comment_id": 98352366, "body": "There are quite a few typos in your code. Could you please double-check it and fix them?"}], "answers": [{"tags": [], "owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "is_accepted": false, "score": 0, "last_activity_date": 1556152042, "creation_date": 1556152042, "answer_id": 55840237, "question_id": 55839960, "link": "https://stackoverflow.com/questions/55839960/i-am-trying-to-create-a-form-with-perl-cgi-and-i-would-like-to-process-the-data/55840237#55840237", "title": "I am trying to create a form with PERL/CGI, and I would like to process the data introduced in that form within the same CGI file", "body": "<p>All of your input fields must be between the opening <code>&lt;form&gt;</code> and closing <code>&lt;/form&gt;</code> tags.</p>\n\n<p>Also, the form method should be \"post\", not \"get\".</p>\n\n<p>The form action you have as <code>form.cgi</code>.  Where does this file live on your server?  In typical setups, it might be in the cgi-bin directory, in which case you may want to try <code>action=\"/cgi-bin/form.cgi\"</code>.</p>\n\n<p>Hope those suggestions help.  </p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1556182254, "creation_date": 1556182254, "answer_id": 55845329, "question_id": 55839960, "link": "https://stackoverflow.com/questions/55839960/i-am-trying-to-create-a-form-with-perl-cgi-and-i-would-like-to-process-the-data/55845329#55845329", "title": "I am trying to create a form with PERL/CGI, and I would like to process the data introduced in that form within the same CGI file", "body": "<p>You are using a lot of variables that don't have values - <code>$mailTo</code>, <code>$subjectLine</code>, <code>$message</code>. I guess that you're used to PHP where variables like those are filled in automatically for you. That's not the case in Perl. You need to extract the form field data yourself.</p>\n\n<p>As you're writing a CGI program, your easiest solution is probably to use the <code>param()</code> function from the CGI module to do this.</p>\n\n<pre><code>use CGI 'param';\n\nmy $subjectLine = param('subjectLine'); # etc...\n</code></pre>\n\n<p>Also, a CGI program needs to send a \"Content-type\" header before sending any real output. As you are writing plain text, you should use <code>text/plain</code>. The CGI module also has a <code>header()</code> function that will help you here.</p>\n\n<pre><code># Load both of the functions you're going to use\nuse CGI ('header', 'param');\n\n# Run this before any other print statements\nprint header(-type =&gt; 'text/plain');\n</code></pre>\n\n<p>If you're going to be writing CGI programs, then it will be a good idea to take the time to read the <a href=\"https://metacpan.org/pod/CGI\" rel=\"nofollow noreferrer\">documentation for the CGI module</a>. But I'd also recommend reading <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">CGI::Alternatives</a> as CGI is no longer the best way to write web programs in Perl.</p>\n\n<p>Also, in your HTML, your closing <code>&lt;/form&gt;</code> tag should come <strong>after</strong> all of the form inputs.</p>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1557754873, "post_id": 56093542, "comment_id": 98860756, "body": "There is no need to use the <code>:standard</code> tag when loading the CGI library if you&#39;re always using the OO syntax (as you are here). Also, it&#39;s a really bad idea to put raw HTML in your Perl code. Far better to use a templating system."}, {"owner": {"reputation": 616, "user_id": 7922428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vINFX.png?s=128&g=1", "display_name": "Bman70", "link": "https://stackoverflow.com/users/7922428/bman70"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1557778236, "post_id": 56093542, "comment_id": 98871623, "body": "Thanks for the tips @Dave Cross. Yes I would look to use templates if it was a comprehensive multi page website, but I thought it was easier to see what was happening at a glance in this example. Plus I&#39;m not super great with templating yet. Also, we haven&#39;t even touched on security and sanitizing, which <i>should</i> be implemented in any mail form used by the public."}], "tags": [], "owner": {"reputation": 616, "user_id": 7922428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vINFX.png?s=128&g=1", "display_name": "Bman70", "link": "https://stackoverflow.com/users/7922428/bman70"}, "is_accepted": false, "score": 0, "last_activity_date": 1557602876, "last_edit_date": 1557602876, "creation_date": 1557602404, "answer_id": 56093542, "question_id": 55839960, "link": "https://stackoverflow.com/questions/55839960/i-am-trying-to-create-a-form-with-perl-cgi-and-i-would-like-to-process-the-data/56093542#56093542", "title": "I am trying to create a form with PERL/CGI, and I would like to process the data introduced in that form within the same CGI file", "body": "<p>It's easy to have a perl CGI form call itself, <a href=\"https://scriptbarrel.com/form.cgi\" rel=\"nofollow noreferrer\">here's a small example</a> using your HTML code. (By the way, all the form fields have to be enclosed within the <code>&lt;form&gt;</code> tags, not the way yours is. And yes the form method is POST.)</p>\n\n<p>This CGI file has to function differently depending on how it's accessed. First it needs to print out HTML with empty form fields. This is the \"$html\" variable in the code. Then when it's submitted, it needs to receive the form parameters, and do something with the data. To email it, call the <b>mailForm</b> subroutine. I don't have sendmail on my server, so I just print out the form data in the example. The code below mails it.</p>\n\n<p>The CGI script needs to tell the difference between just being visited as a web page, and being called as a form action. To do this, it checks for a hidden form field called \"check.\" If \"check\" is defined, that means the form was submitted and there's data to collect and process. If \"check\" isn't defined, it just prints out the empty form fields. </p>\n\n<p>There are probably more elegant ways to do this, but I just wanted to demonstrate a CGI file processing its own submitted data, in case anyone is interested in the future. Make sure the file has the same name as the form's <b>action</b>. Here's my sample code, <a href=\"https://scriptbarrel.com/form.cgi\" rel=\"nofollow noreferrer\"><em>form.cgi</em></a>:</p>\n\n<pre><code>#!/usr/bin/perl        \nuse CGI::Carp qw(fatalsToBrowser set_message warningsToBrowser);\nuse CGI qw(:standard);\nuse strict;                     \nuse warnings;   \n\nprint header(); \n\nmy $cgi = CGI-&gt;new();\n\nmy $check;\n$check = $cgi-&gt;param('check') if defined $cgi-&gt;param('check');\n\nmy $newhtml = '';\n\nif ($check eq \"yes\") { #collect form data and build email subroutine\nmy $fromemail = $cgi-&gt;param('mailFrom');\nmy $toemail = $cgi-&gt;param('mailTo');\nmy $subject = $cgi-&gt;param('subjectLine');\nmy $message = $cgi-&gt;param('messageBody');\n\n$newhtml = qq{\n&lt;html&gt;\n&lt;body&gt;\n&lt;b&gt;Email sent!&lt;/b&gt;\n&lt;br&gt;\nThe from email is from $fromemail&lt;br&gt;\nThe to email is to $toemail&lt;br&gt;\nThe subject is $subject&lt;br&gt;\nThe message is $message&lt;br&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n };\n\nsub mailForm {\nopen(MAIL, \"|/usr/sbin/sendmail -t\");\n\nprint MAIL \"To: $toemail\\n\";\nprint MAIL \"From: $fromemail\\n\";\nprint MAIL \"Subject: $subject\\n\\n\";\n\nprint MAIL $message;\n\nclose(MAIL);\n}\n\n\n} #end of if check\n\nmy $html = qq{\n&lt;html&gt;\n&lt;body&gt;\n   &lt;form action=\"form.cgi\" method=\"POST\"&gt;\n\n&lt;h1&gt;Feedback Form&lt;/h1&gt;\n&lt;p&gt;Please fill out the entire feedback form.&lt;/p&gt;\n&lt;table&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;b&gt;To (recipient's e-mail address):&lt;/b&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;input type = \"text\" name = \"mailTo\" size = \"40\" maxlength = \"50\"  /&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;b&gt;From (your e-mail address):&lt;/b&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;input type = \"text\" name = \"mailFrom\" size = \"40\" maxlength = \"50\" /&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;b&gt;Enter a subject:&lt;/b&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;input type = \"text\" name = \"subjectLine\" size = \"40\" maxlength = \"50\"&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;b&gt;Enter your message:&lt;/b&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;textarea name = \"messageBody\" rows = \"10\" cols = \"50\" maxlength = \"300\"&gt;&lt;/textarea&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;input type = \"submit\" name = \"sbutton\" value = \"Submit\" /&gt;\n&lt;input type = \"reset\" value = \"Reset\" /&gt;\n&lt;input type = \"hidden\" name = \"check\" value = \"yes\"&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/table&gt;\n\n&lt;/form&gt;\n\n&lt;br&gt;\n\n&lt;/body&gt;&lt;/html&gt;\n};\n\n#this prints the regular page if no form is submitted\nif (!defined $check) {\nprint $html;\n}\n\n#this mails the form data and prints a confirmation page\nelse {\nprint $newhtml; \nmailForm();\n}\n\nexit 0;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11407844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b56d285cb6b6e4e2f74908bab7d0df5?s=128&d=identicon&r=PG&f=1", "display_name": "Vanessa Harper", "link": "https://stackoverflow.com/users/11407844/vanessa-harper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1557602876, "creation_date": 1556149491, "last_edit_date": 1556181254, "question_id": 55839960, "link": "https://stackoverflow.com/questions/55839960/i-am-trying-to-create-a-form-with-perl-cgi-and-i-would-like-to-process-the-data", "title": "I am trying to create a form with PERL/CGI, and I would like to process the data introduced in that form within the same CGI file", "body": "<p>' I am trying to create a form with PERL/CGI, and I would like to process the data introduced in that form within the same CGI file. This is what I have for my code on the HTML5 side\u2026.' </p>\n\n<pre><code>&lt;body&gt;\n   &lt;form action=\"form.cgi\" method=\"get\"&gt;\n&lt;/form&gt;\n\n&lt;h1&gt;Feedback Form&lt;/h1&gt;\n&lt;p&gt;Please fill out the entire feedback form.&lt;/p&gt;\n&lt;table&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;b&gt;To (recipient's e-mail address):&lt;/b&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;input type = \"text\" name = \"mailTo\" size = \"40\"  /&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;b&gt;From (your e-mail address):&lt;/b&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;input type = \"text\" name = \"mailFrom\" size = \"40\" /&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;b&gt;Enter a subject:&lt;/b&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;input type = \"text\" name = \"subjectLine\" size = \"40\" /&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;b&gt;Enter your message:&lt;/b&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;textarea name = \"message\" rows = \"10\" cols = \"50\"&gt;&lt;/textarea&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;input type = \"submit\" name = \"sbutton\" value = \"Submit\" /&gt;\n&lt;input type = \"reset\" value = \"Reset\" /&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/table&gt;\n\n&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt; \n\n\n\n&lt;/div&gt;\n&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>PERL/CGI form CODE       </p>\n\n<pre><code>#!/usr/bin/perl\nuse Modern:: Perl;\nuse Mail::Sendmail; \n\nmy $mailFrom = email@email'; \n\nmy $subjectLine = \"Sample Subject:l \nmy $message = \"Sample Message!\"; \nmy %mail = ( To      =&gt; $mailTo, \n             From    =&gt; $mailFrom, \n             Subject =&gt; $subjectLine,\n             Message =&gt; $message, \n             'Content-Type' =&gt; 'text/plain' \n           ); \n\nif ( sendmail %mail ) \n{\n  print \"Sucessfully sent mail to $mailTo. Check you box! \\n\";\n}\nelse \n{\n  print \"Error sending mail: $Mail::Sendmail::error \\n\";\n}\n</code></pre>\n\n<p>I have spent over a couple of hours trying to figure out this code. Please can anyone help me out. I had made two different files for these two different codes. I feel that I am missing something or if I am missing something small. </p>\n\n<p>Thank you :)</p>\n"}, {"tags": ["rest", "perl", "theforeman"], "comments": [{"owner": {"reputation": 541, "user_id": 196096, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2a96f55ea446d1e9c2e5b4286bf432ee?s=128&d=identicon&r=PG", "display_name": "Mose", "link": "https://stackoverflow.com/users/196096/mose"}, "edited": false, "score": 0, "creation_date": 1556152165, "post_id": 55837177, "comment_id": 98343900, "body": "I&#39;ve tried many combinations with headers, even making sure the headers matched the curl headers precisely. No matter what I try I get the same output. What makes matters worse, is I don&#39;t know what the output is to have an idea as to what is causing it so that I can research possible solutions.  This problem certainly makes no sense to me and I&#39;m unsure where to start."}, {"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "edited": false, "score": 0, "creation_date": 1556179931, "post_id": 55837177, "comment_id": 98351626, "body": "What does the result of <code>$client-&gt;GET($host)-&gt;{_res}-&gt;as_string</code> look like?"}, {"owner": {"reputation": 541, "user_id": 196096, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2a96f55ea446d1e9c2e5b4286bf432ee?s=128&d=identicon&r=PG", "display_name": "Mose", "link": "https://stackoverflow.com/users/196096/mose"}, "reply_to_user": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "edited": false, "score": 0, "creation_date": 1556221754, "post_id": 55837177, "comment_id": 98374720, "body": "@TFBW I posted the output in the original question, still see garbage output."}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1556228778, "post_id": 55837177, "comment_id": 98377315, "body": "The dumped response object includes a header indicating that the content uses GZIP encoding. Does <code>$client-&gt;GET($host)-&gt;{_res}-&gt;decoded_content</code> give you anything sensible?"}, {"owner": {"reputation": 541, "user_id": 196096, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2a96f55ea446d1e9c2e5b4286bf432ee?s=128&d=identicon&r=PG", "display_name": "Mose", "link": "https://stackoverflow.com/users/196096/mose"}, "reply_to_user": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1556230052, "post_id": 55837177, "comment_id": 98377723, "body": "@GrantMcLean Yes it does! Now to figure out how to get that returned from <code>REST::Client</code>  I&#39;m wondering why <code>Encode::decode</code> didn&#39;t yield the same result.."}, {"owner": {"reputation": 541, "user_id": 196096, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2a96f55ea446d1e9c2e5b4286bf432ee?s=128&d=identicon&r=PG", "display_name": "Mose", "link": "https://stackoverflow.com/users/196096/mose"}, "edited": false, "score": 0, "creation_date": 1556234407, "post_id": 55837177, "comment_id": 98378778, "body": "Looking through all of the docs, specifically <code>HTTP::Message</code>, I think the <code>REST::Client</code> and <code>LWP::UserAgent</code> modules are not handing this API because the API is not setting the Content-Encoding response header..."}], "answers": [{"comments": [{"owner": {"reputation": 541, "user_id": 196096, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2a96f55ea446d1e9c2e5b4286bf432ee?s=128&d=identicon&r=PG", "display_name": "Mose", "link": "https://stackoverflow.com/users/196096/mose"}, "edited": false, "score": 0, "creation_date": 1556294998, "post_id": 55866488, "comment_id": 98402662, "body": "I agree. I think the root cause is that the server is not passing the <code>Content-Encoding</code> Response Header, so libraries are not attempting to use the appropriate logic to return the <code>decoded_content</code> method. I even modified the code in <code>REST::Client</code> to return <code>decoded_content</code> instead of <code>content</code> and verified it works.  I&#39;m going to try to find where in the stack this is being evaluated and see if I can introduce a method override to verify the result is encoded and return the appropriate method response upstream, as well as request the vendor add  headers to the API Response object."}, {"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "reply_to_user": {"reputation": 541, "user_id": 196096, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2a96f55ea446d1e9c2e5b4286bf432ee?s=128&d=identicon&r=PG", "display_name": "Mose", "link": "https://stackoverflow.com/users/196096/mose"}, "edited": false, "score": 0, "creation_date": 1556295339, "post_id": 55866488, "comment_id": 98402840, "body": "The server <i>is</i> passing the <code>Content-Encoding</code> response header. You can see it in the output from the <code>as_string</code> method, just above <code>Content-Length</code>. The problem is that REST::Client uses the <code>-&gt;content</code> method to return the data, which is specifically the raw body data bytes before decoding. You&#39;d have to perform the extra steps to do the decoding."}], "tags": [], "owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "is_accepted": true, "score": 3, "last_activity_date": 1556277441, "creation_date": 1556277441, "answer_id": 55866488, "question_id": 55837177, "link": "https://stackoverflow.com/questions/55837177/perl-restclient-garbage-data-in-response/55866488#55866488", "title": "Perl REST::Client - Garbage data in response", "body": "<p>Based on the comments attached to your question, we can say the problem is that the server is responding with gzip compressed data, and the REST::Client package simply returns the raw data without decoding it first. You can access the underlying HTTP::Response object directly using <code>$client-&gt;{_res}</code> on your REST::Client object, and you can get the properly unzipped and charset-converted data using the <code>-&gt;decoded_content</code> method on that. Note that you'll need to use <code>JSON::from_json()</code> rather than <code>JSON::decode_json()</code> on the decoded content, because it's already been converted from a UTF-8 byte sequence to a Unicode string as part of the decoding.</p>\n\n<p>In short, then, what you want is the following.</p>\n\n<pre><code>print Dumper JSON::from_json($client-&gt;GET($host)-&gt;{_res}-&gt;decoded_content);\n</code></pre>\n\n<p>Directly accessing the underlying object isn't pretty, but unless you want to patch REST::Client, it's the easiest way to get the result you want.</p>\n"}], "owner": {"reputation": 541, "user_id": 196096, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2a96f55ea446d1e9c2e5b4286bf432ee?s=128&d=identicon&r=PG", "display_name": "Mose", "link": "https://stackoverflow.com/users/196096/mose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 748, "favorite_count": 0, "accepted_answer_id": 55866488, "answer_count": 1, "score": 0, "last_activity_date": 1556277441, "creation_date": 1556133730, "last_edit_date": 1556221711, "question_id": 55837177, "link": "https://stackoverflow.com/questions/55837177/perl-restclient-garbage-data-in-response", "title": "Perl REST::Client - Garbage data in response", "body": "<p>I'm having issues getting a valid response from Perl <code>REST::Client</code> against <a href=\"http://%20https://access.redhat.com/documentation/en-us/red_hat_satellite/6.3/html-single/api_guide/index\" rel=\"nofollow noreferrer\">Red Hat Satellite REST API</a>. I'm getting the following encoded response:</p>\n\n<pre><code>$VAR1 = '\ufffd\ufffd\ufffdj\ufffd0\ufffd\ufffd~\n\ufffdg9\ufffd\ufffd   \ufffd\ufffd\ufffd#\ufffd9\ufffd`dIm\ufffdm\ufffd-\ufffd\ufffd\ufffduJ\n        \ufffd\ufffd\ufffd\ufffd\ufffdf4U\ufffd@\u2592\ufffd\ufffd\n                     \ufffd\ufffd\ufffdF\ufffd\ufffdx\u06ab X\ufffd;\ufffd\\'r\ufffd\ufffd/\ufffd\ufffd\ufffd3R\ufffds\ufffdC\ufffdu\ufffd*\ufffd2_N\ufffd\ufffd\u0667\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdf\\\\\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdWA0\ufffd\ufffd\ufffd\ufffd\u0646p\ufffd\ufffdT\u0356\ufffdl\ufffd\u2592P\u0223}\ufffdx\ufffd\ufffd8\ufffd&amp;\ufffdd\ufffdn\ufffd\ufffd\u07e6`\ufffd\ufffd.\ufffd\ufffd\ufffdT\u0199\ufffdV\ufffdc\ufffd&amp;\ufffd\ufffd\ufffd\ufffda\ufffd\ufffd\ufffd%\ufffdZH\u00b7\ufffdaJ\ufffd0\ufffdyT\ufffd\ufffdq\ufffd \ufffdJz\ufffd\ufffd\u0573MO\ufffd\\\\\ufffd\ufffd\ufffd\ufffd\ufffd'\n</code></pre>\n\n<p>And when I decode it via <code>Encode::decode_utf8</code>, it likewise appears to be garbled:</p>\n\n<pre><code>$VAR1 = \"\\x{fffd\\x{fffd}\\x{fffd}\\x{fffd}j\\x{fffd}0\\x{fffd}\\x{fffd}~\n\\x{fffd}g9\\x{fffd}\\x{fffd}      \\x{fffd}\\x{fffd}\\x{fffd}#\\x{fffd}9\\x{fffd}`dIm\\x{fffd}m\\x{fffd}-\\x{fffd}\\x{fffd}\\x{fffd}uJ\n        \\x{fffd}\\x{fffd}\\x{fffd}\\x{fffd}\\x{fffd}f4U\\x{fffd}\\@\u2592\\x{fffd}\\x{1a0220}\n                                                                                \\x{fffd}\\x{fffd}\\x{fffd}F\\x{fffd}\\x{fffd}x\\x{6ab} X\\x{fffd};\\x{fffd}'r\\x{fffd}\\x{fffd}/\\x{fffd}\\x{fffd}\\x{fffd}3R\\x{fffd}s\\x{fffd}C\\x{fffd}u\\x{fffd}*\\x{fffd}2_N\\x{fffd}\\x{fffd}\\x{667}\\x{fffd}\\x{fffd}\\x{fffd}\\x{fffd}\\x{fffd}\\x{fffd}\\x{fffd}f\\\\\\x{fffd}\\x{fffd}\\x{fffd}\\x{fffd}\\x{fffd}\\x{fffd}\\x{fffd}WA0\\x{fffd}\\x{fffd}\\x{fffd}\\x{fffd}\\x{646}p\\x{fffd}\\x{fffd}T\\x{356}\\x{fffd}l\\x{fffd}\u2592P\\x{223}}\\x{fffd}x\\x{fffd}\\x{fffd}8\\x{fffd}&amp;\\x{fffd}d\\x{fffd}n\\x{fffd}\\x{fffd}\\x{7e6}`\\x{fffd}\\x{fffd}.\\x{fffd}\\x{fffd}\\x{fffd}T\\x{199}\\x{fffd}V\\x{fffd}c\\x{fffd}&amp;\\x{fffd}\\x{fffd}\\x{fffd}\\x{fffd}a\\x{fffd}\\x{fffd}\\x{fffd}%\\x{fffd}ZH\\x{b7}\\x{fffd}aJ\\x{fffd}0\\x{fffd}yT\\x{fffd}\\x{fffd}q\\x{fffd} \\x{fffd}Jz\\x{fffd}\\x{fffd}\\x{573}MO\\x{fffd}\\\\\\x{fffd}\\x{fffd}\\x{fffd}\\x{fffd}\\x{fffd}\";\n</code></pre>\n\n<p>The script I am using to test:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse 5.010;\nuse REST::Client;\nuse Data::Dumper;\n\nrequire JSON;\nrequire MIME::Base64;\nrequire HTTP::Cookies;\n\nmy $host        = 'https://sat.example.com/api/v2/domains';\nmy $client      = REST::Client-&gt;new({useragent =&gt; LWP::UserAgent-&gt;new(cookie_jar =&gt; HTTP::Cookies-&gt;new)});\nmy $headers     = {\n        'Authorization'         =&gt; 'Basic XXXXXXXXX',\n        'Accept-Encoding'       =&gt; scalar HTTP::Message::decodable,\n        #'Content-Type'         =&gt; 'application/json',\n        'Content-Type'          =&gt; 'application/json;charset=utf8',\n        'Connection'            =&gt; 'keep-alive',\n        'Accept'                =&gt; 'application/json',\n        'Host'                  =&gt; URI-&gt;new($host)-&gt;canonical-&gt;host_port,\n        #'Charset'              =&gt; 'UTF-8'\n};\n\n$client-&gt;addHeader($_, $headers-&gt;{$_}) for keys %{$headers};\n$client-&gt;setCa('/var/www/html/pub/katello-server-ca.crt');\n\nprint Dumper JSON::decode_json($client-&gt;GET($host)-&gt;responseContent);\n\n#print Dumper $client-&gt;GET($host);\n__END__\n</code></pre>\n\n<p>When I look at the <code>REST::Client</code> object via <code>Data::Dumper</code> all headers appear to be set properly and are readable. The only thing that is not readable is the actual content.</p>\n\n<p>I am able query the API using curl commands from the same server:</p>\n\n<pre><code>$ curl -\\# -X GET -v -H 'Accept: application/json' -H 'Authorization: Basic XXXXXXXXX' --cacert katello-server-ca.crt https://sat.example.com/api/v2/domains -o /dev/null \n* About to connect() to sat.example.com port 443 (#0)\n*   Trying 192.168.0.1...\n* Connected to sat.example.com (192.168.0.1) port 443 (#0)\n* Initializing NSS with certpath: sql:/etc/pki/nssdb\n*   CAfile: katello-server-ca.crt\n  CApath: none\n* NSS: client certificate not found (nickname not specified)\n* SSL connection using TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\n* Server certificate:\n*       subject: CN=sat.example.com,OU=SomeOrgUnit,O=Katello,ST=North Carolina,C=US\n*       start date: Oct 11 20:24:12 2018 GMT\n*       expire date: Jan 17 20:24:12 2038 GMT\n*       common name: sat.example.com\n*       issuer: CN=sat.example.com,OU=SomeOrgUnit,O=Katello,L=Raleigh,ST=North Carolina,C=US\n&gt; GET /api/v2/domains HTTP/1.1\n&gt; User-Agent: curl/7.29.0\n&gt; Host: sat.example.com\n&gt; Accept: application/json\n&gt; Authorization: Basic XXXXXXXXX\n&gt; \n&lt; HTTP/1.1 200 OK\n&lt; Date: Wed, 24 Apr 2019 18:50:34 GMT\n&lt; Server: Apache/2.4.6 (Red Hat Enterprise Linux)\n&lt; Foreman_version: 1.15.6.48\n&lt; Foreman_api_version: 2\n&lt; Apipie-Checksum: 2a54cbc5a3f59fad6e7e697ec609cda8\n&lt; Cache-Control: max-age=0, private, must-revalidate\n&lt; X-Request-Id: 57672b22-6a4f-4b3a-83fb-6b1a54747d67\n&lt; X-Runtime: 0.036638\n&lt; Content-Security-Policy: default-src 'self'; child-src 'self'; connect-src 'self' ws: wss:; img-src 'self' data: *.gravatar.com; script-src 'unsafe-eval' 'unsafe-inline' 'self'; style-src 'unsafe-inline' 'self'\n&lt; Strict-Transport-Security: max-age=631152000; includeSubdomains\n&lt; X-Content-Type-Options: nosniff\n&lt; X-Download-Options: noopen\n&lt; X-Frame-Options: sameorigin\n&lt; X-Permitted-Cross-Domain-Policies: none\n&lt; X-XSS-Protection: 1; mode=block\n&lt; X-Powered-By: Phusion Passenger 4.0.18\n&lt; Set-Cookie: _session_id=d35c9df0bce80baeca85b0ad38298ee8; path=/; secure; HttpOnly\n&lt; ETag: W/\"0eeb7a2c131e780c72202cf712c972e3\"\n&lt; Status: 200 OK\n&lt; Vary: Accept-Encoding\n&lt; Transfer-Encoding: chunked\n&lt; Content-Type: application/json; charset=utf-8\n&lt; \n{ [data not shown]\n######################################################################## 100.0%* Connection #0 to host sat.example.com left intact\n</code></pre>\n\n<p>I've used <code>REST::Client</code> against may different API's with no issue, this is the first API that has really given me any grief. I'm not sure where to start troubleshooting after decoding the response. Any suggestions would be helpful.</p>\n\n<p>Output of <code>print Dumper $client-&gt;GET($host)-&gt;{_res}-&gt;as_string;</code></p>\n\n<pre><code>$VAR1 = 'HTTP/1.1 200 OK\nCache-Control: max-age=0, private, must-revalidate\nConnection: close\nDate: Thu, 25 Apr 2019 19:45:48 GMT\nETag: W/\"0eeb7a2c131e780c72202cf712c972e3-gzip\"\nServer: Apache/2.4.6 (Red Hat Enterprise Linux)\nVary: Accept-Encoding\nContent-Encoding: gzip\nContent-Length: 242\nContent-Type: application/json; charset=utf-8\nApipie-Checksum: 2a54cbc5a3f59fad6e7e697ec609cda8\nClient-Date: Thu, 25 Apr 2019 19:45:53 GMT\nClient-Peer: 192.168.0.1:443\nClient-Response-Num: 1\nClient-SSL-Cert-Issuer: /C=US/ST=North Carolina/L=Raleigh/O=Katello/OU=SomeOrgUnit/CN=sat.example.com\nClient-SSL-Cert-Subject: /C=US/ST=North Carolina/O=Katello/OU=SomeOrgUnit/CN=sat.example.com\nClient-SSL-Cipher: ECDHE-RSA-AES128-GCM-SHA256\nClient-SSL-Socket-Class: IO::Socket::SSL\nContent-Security-Policy: default-src \\'self\\'; child-src \\'self\\'; connect-src \\'self\\' ws: wss:; img-src \\'self\\' data: *.gravatar.com; script-src \\'unsafe-eval\\' \\'unsafe-inline\\' \\'self\\'; style-src \\'unsafe-inline\\' \\'self\\'\nForeman_api_version: 2\nForeman_version: 1.15.6.48\nSet-Cookie: _session_id=ea51c42b7a65478d27b21c2fb02e4c4a; path=/; secure; HttpOnly\nStatus: 200 OK\nStrict-Transport-Security: max-age=631152000; includeSubdomains\nX-Content-Type-Options: nosniff\nX-Download-Options: noopen\nX-Frame-Options: sameorigin\nX-Permitted-Cross-Domain-Policies: none\nX-Powered-By: Phusion Passenger 4.0.18\nX-Request-Id: 528535f3-c8cf-4d8b-91db-1572e94a974a\nX-Runtime: 4.600748\nX-XSS-Protection: 1; mode=block\n\n???j?0??~\n?g9??   ???#?9?`dIm?m?-???uJ\n    ???f4U?@?????\n                     ???F??x\u06ab X?;?\\'r??/??3R?s?C?u?*?2_N??\u0667??????f\\\\???????WA0????\u0646p??T\u0356?l?P\u0223}?x??8?&amp;?d?n??\u07e6`??.???T\u0199?V?c?&amp;????a???%?ZH\u00b7?aJ?0?yT?q? ?Jz??\u0573MO?\\\\?????\n';\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1556113890, "post_id": 55831652, "comment_id": 98327982, "body": "I think <code>gms</code> is the key."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556114224, "post_id": 55831652, "comment_id": 98328231, "body": "<code>&#47;^QWWK(.*?)KWWQ$&#47;s</code> will match <code>QWWK PQXY KWWQ</code> and <code>QWWK QWWK KWWQ</code>"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1556115106, "post_id": 55831652, "comment_id": 98328848, "body": "<code>&#47;^QWWK(.*?)KWWQ$&#47;s</code> is not the whole regexp, just a part of it I separated out for explanation."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1556115172, "post_id": 55831652, "comment_id": 98328908, "body": "<code>&#47;^QWWK(?!.*PQXY)(?!.*KWWQ[^\\n])(.*?)KWWQ$&#47;gms</code> is equally broken. Fails against <code>&quot;QWWK KWWQ\\naKWWQb&quot;</code>"}, {"owner": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1556132136, "post_id": 55831652, "comment_id": 98337850, "body": "@mob i  checked in sublime text for &quot;QWWK KWWQ\\naKWWQb&quot;. <code>^QWWK(?!.*PQXY)(.*?)KWWQ$</code> shows the match as <code>QWWK KWWQ\\n</code> where as with <code>(?s)^QWWK(?!.*PQXY)(.*?)KWWQ$</code> nothing is matched. Can you explain the reason. Because irrespective of multiple lines it should match"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1556113683, "creation_date": 1556113683, "answer_id": 55831652, "question_id": 55830169, "link": "https://stackoverflow.com/questions/55830169/perl-regex-help-needed-to-replace-text-within-two-words-with-certain-conditions/55831652#55831652", "title": "perl: regex help needed to replace text within two words with certain conditions", "body": "<p>Through some trial and error, I came up with this regex:</p>\n\n<pre><code>/^QWWK(?!.*PQXY)(?!.*KWWQ[^\\n])(.*?)KWWQ$/gms\n</code></pre>\n\n<p>The <code>/m</code> modifier means the input is multi-line and <code>^</code> matches the beginning of <em>any</em> line and <code>$</code> matches the end of <em>any</em> line</p>\n\n<p>With the <code>/s</code> modifier, the <code>.</code> metacharacter means any character <em>including</em> newline characters</p>\n\n<pre><code>/^QWWK .../m\n</code></pre>\n\n<p>Find a substring that begins with <code>QWWK</code> at the start of a line</p>\n\n<pre><code>/... KWWQ$/m\n</code></pre>\n\n<p>and ends with <code>KWWQ</code> at the end of a line</p>\n\n<pre><code>/^QWWK(?!.*PQXY)/s\n</code></pre>\n\n<p>The match fails if <code>QWWK</code> is followed by any number of characters (including new lines) and the text <code>PQXY</code>.</p>\n\n<pre><code>/^QWWK ... (?!.KWWQ[^\\n]) ... /s\n</code></pre>\n\n<p>The match also fails if <code>QWWK</code> is followed by any number of characters, the text <code>KWWQ</code>, and any character that is not a new line.</p>\n\n<pre><code>/^QWWK(.*?)KWWQ$/s\n</code></pre>\n\n<p>Put any text between <code>QWWK</code> and <code>KWWQ</code>, including new lines, in a capture group. Use the non-greedy modifier <code>?</code> so that the regexp will not try to capture from an early <code>QWWK</code> observation to the latest possible <code>KWWQ</code> observation.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556115787, "post_id": 55831699, "comment_id": 98329354, "body": "Slurp mode is <code>-0777</code>, not <code>-0</code>."}, {"owner": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556131064, "post_id": 55831699, "comment_id": 98337407, "body": "changed it to <code>(?!PQXY).)</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556164066, "post_id": 55831699, "comment_id": 98346068, "body": "Now it matches the whole of <code>&quot;QWWK\\nQWWK\\nKWWQ\\n&quot;</code>, and it probably shouldn&#39;t"}], "tags": [], "owner": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "is_accepted": false, "score": -1, "last_activity_date": 1556131040, "last_edit_date": 1556131040, "creation_date": 1556113793, "answer_id": 55831699, "question_id": 55830169, "link": "https://stackoverflow.com/questions/55830169/perl-regex-help-needed-to-replace-text-within-two-words-with-certain-conditions/55831699#55831699", "title": "perl: regex help needed to replace text within two words with certain conditions", "body": "<p>I read this post <a href=\"https://stackoverflow.com/questions/1030787/multiline-search-replace-with-perl\">Multiline search replace with Perl</a></p>\n\n<p>I tried the below and looks to be working:</p>\n\n<pre><code>$ perl -0pe 's/^QWWK(?:(?!PQXY).)*?KWWQ\\n/sometext/gms' sample.txt &gt; sample_mod.txt \n</code></pre>\n\n<p>Then only condition 4 is replaced and others remain intact</p>\n"}, {"comments": [{"owner": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1556131127, "post_id": 55831827, "comment_id": 98337420, "body": "whats the difference between $ (end of line) and \\n (newline)  since KWWQ$ and KWWQ\\n serves the same purpose"}, {"owner": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1556131295, "post_id": 55831827, "comment_id": 98337493, "body": "whats the difference between gms and xms"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1556160407, "post_id": 55831827, "comment_id": 98345364, "body": "<code>&#47;g</code> is used to find more than one match. <code>&#47;x</code> is allows whitespace to be used meaninglessly in the pattern"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1556163965, "post_id": 55831827, "comment_id": 98346047, "body": "<code>$</code> with <code>&#47;m</code> matches zero characters at a a newline or at end of string. <code>\\n</code> matches a newline."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1556115920, "last_edit_date": 1556115920, "creation_date": 1556114164, "answer_id": 55831827, "question_id": 55830169, "link": "https://stackoverflow.com/questions/55830169/perl-regex-help-needed-to-replace-text-within-two-words-with-certain-conditions/55831827#55831827", "title": "perl: regex help needed to replace text within two words with certain conditions", "body": "<p><code>/m</code> alters the definition of <code>^</code> and <code>$</code> to be start of line and end of line respectively.</p>\n\n<p>What you asked for:</p>\n\n<pre><code>/^QWWK(?:(?!PQXY).)*KWWQ$/msg\n</code></pre>\n\n<p>What you probably want:</p>\n\n<pre><code>/^QWWK(?:(?!QWWK|PQXY|KWWQ).)*KWWQ$/msg\n</code></pre>\n\n<p>Optimized: (Reduces the number of lookarounds performed)</p>\n\n<pre><code>/\n   ^ QWWK\n   [^KPQ]*+\n   (?: (?: K (?!WWQ)\n       |   P (?!QXY)\n       |   Q (?!WWK)\n       )\n       [^KPQ]*+\n   )*+\n   KWWQ $\n/xmg\n</code></pre>\n"}], "owner": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 55831827, "answer_count": 3, "score": 2, "last_activity_date": 1556131040, "creation_date": 1556109226, "last_edit_date": 1556112780, "question_id": 55830169, "link": "https://stackoverflow.com/questions/55830169/perl-regex-help-needed-to-replace-text-within-two-words-with-certain-conditions", "title": "perl: regex help needed to replace text within two words with certain conditions", "body": "<p>This question seems to be the same as <a href=\"https://stackoverflow.com/questions/55744007/negative-lookahead-with-awk-or-sed-not-possible-but-only-perl-supports/55814498#55814498\">Negative lookahead with awk or sed not possible but only perl supports</a> But its not the same.</p>\n\n<p>In this question i want to know how to solve more conditions for my search</p>\n\n<p>I have the following text (sample.txt)</p>\n\n<blockquote>\n  <p><em>Condition 1: contains PQXY in between QWWK and KWWQ so not wanted</em></p>\n</blockquote>\n\n<pre><code>QWWK erly jointure  PQXY In said devonshire \nDrift allow green son walls years for blush.\nacceptance son KWWQ\n</code></pre>\n\n<blockquote>\n  <p><em>Condition 2: QWWK does not start at the beginnig of the line, so not wanted</em></p>\n</blockquote>\n\n<pre><code>other QWWK get him his projection ar saw fat sudden edward\nsociable felicity supplied mr. September\nay now many. Alte KWWQ\n</code></pre>\n\n<blockquote>\n  <p><em>Condition 3: KWWQ is not at the end of the line, so not wanted</em></p>\n</blockquote>\n\n<pre><code>QWWK ble formerly six but hand\nr way now many. Alteration you \noccasion ham for  KWWQ other\n</code></pre>\n\n<blockquote>\n  <p><em>Condition 4: QWWK begins at the starting and KWWQ ends at the last and there is no PQXY, so this is what wanted</em></p>\n</blockquote>\n\n<pre><code>QWWK n zealously arranging fr\neal park so rest we on. Ignorant d\nhe possession insensible sympathi KWWQ\n.......\n</code></pre>\n\n<blockquote>\n  <p>Kindly the note the words QWWK PQXY and KWWQ</p>\n</blockquote>\n\n<p><em>My text goes multiple lines.</em></p>\n\n<pre><code>I want to match text between QWWK and KWWQ\n\nCondition 1: should not contain the word PQXY inbetween\n\nCondition 2: QWWK should start at the beginning of the line\n\nCondition 3: KWWQ should be at the end of the line\n</code></pre>\n\n<p>In sublime text i match using:</p>\n\n<pre><code>(?s)(^QWWK(?:(?!QWWK).)*?KWWQ\\n) \n</code></pre>\n\n<p>and it matches  condition 4</p>\n\n<pre><code>QWWK n zealously arranging fr\n\neal park so rest we on. Ignorant d\n\n he possession insensible sympathi KWWQ\n</code></pre>\n\n<p>So it does not match condition 1, condition 2 and condition 3.</p>\n\n<p>I am trying with perl to replace condition 4 with sometext i am trying</p>\n\n<pre><code>$ perl -0777pe 's/^QWWK(?!QWWK).*?KWWQ\\n/sometext/gs' sample.txt &gt; sample_mod.txt \n</code></pre>\n\n<p>But sample_mod.txt did not replace the codition 4</p>\n\n<p>I also tried</p>\n\n<pre><code>$ perl -0777pe 's/\\nQWWK(?!QWWK).*?KWWQ\\n/sometext/gs' sample.txt &gt; sample_mod.txt \n</code></pre>\n\n<p>It removes both condition 1 and condition4</p>\n"}, {"tags": ["perl", "crypt"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 5, "creation_date": 1556100341, "post_id": 55827306, "comment_id": 98319662, "body": "<a href=\"https://metacpan.org/pod/Crypt::Eksblowfish::Bcrypt\" rel=\"nofollow noreferrer\">metacpan.org/pod/Crypt::Eksblowfish::Bcrypt</a>?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1556100373, "post_id": 55827306, "comment_id": 98319684, "body": "By definition encryption comes with the ability to decrypt, as long as you have the key. If you want one-way, you need hashing, not encryption."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1556100534, "post_id": 55827306, "comment_id": 98319797, "body": "&quot;<i>Unfortunately it has limitations where the length of the string to be encrypted cannot be longer than 8 characters.</i>&quot; That depends entirely on your platform. On common Linux systems, hash implementations other than DES are exposed through <code>crypt()</code> (and available from Perl). For example, bcrypt is often available (look for hashes starting with <code>$2a$</code>)."}, {"owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 0, "creation_date": 1556102634, "post_id": 55827306, "comment_id": 98320967, "body": "Simple encrypt and and throw away the key ;-)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 0, "creation_date": 1556113406, "post_id": 55827306, "comment_id": 98327692, "body": "@Michael G., That would introduce the minor problem of being unable to validate passwords..."}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1556123994, "post_id": 55827306, "comment_id": 98334174, "body": "The documentation you linked points you at two families of options: <a href=\"https://metacpan.org/search?q=Crypt\" rel=\"nofollow noreferrer\">Crypt</a> and <a href=\"https://metacpan.org/search?q=Digest\" rel=\"nofollow noreferrer\">Digest</a>."}], "answers": [{"comments": [{"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1556242663, "post_id": 55830424, "comment_id": 98380272, "body": "The point of storing $salt and $crypted instead of $password is so intruders who get hold of those strings shouldn&#39;t be able find the passwords by brute force. The problem with sha1 and md5 (or sha256) just once like this is that they enables needlessly fast brute forcing. Bcrypt (like Crypt::Eksblowfish::Bcrypt) with a high cost setting is better because it lets you decide how slow=secure you want your $crypted to be. Just don&#39;t set it too slow or your users will suffer from slow login. Alternatively you could <code>my $crypted=$password; $crypted=sha256_base64($salt.$crypted) for 1..2**$cost</code>"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1556115846, "last_edit_date": 1556115846, "creation_date": 1556110036, "answer_id": 55830424, "question_id": 55827306, "link": "https://stackoverflow.com/questions/55827306/alternative-to-perl-crypt-that-can-be-used-in-a-production-environment/55830424#55830424", "title": "Alternative to Perl crypt() that can be used in a production environment", "body": "<p>There are several one-way encryption tools available that can serve the same function as <code>crypt</code>, and many are easy to use. The salt and password can be of arbitrary length.</p>\n\n<pre><code>use Digest::SHA 'sha1_base64';\n$crypted = sha1_base64($salt . $password);\n\nuse Digest::MD5 'md5_base64';\n$crypted = md5_base64($salt . $password);\n</code></pre>\n\n<p>See <a href=\"https://metacpan.org/pod/Digest\" rel=\"nofollow noreferrer\"><code>Digest</code></a> for many other suggestions.</p>\n"}], "owner": {"reputation": 809, "user_id": 2870624, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/XbhzQ.jpg?s=128&g=1", "display_name": "gpwr", "link": "https://stackoverflow.com/users/2870624/gpwr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 333, "favorite_count": 0, "closed_date": 1556183439, "answer_count": 1, "score": 0, "last_activity_date": 1556115846, "creation_date": 1556099784, "last_edit_date": 1556100407, "question_id": 55827306, "link": "https://stackoverflow.com/questions/55827306/alternative-to-perl-crypt-that-can-be-used-in-a-production-environment", "closed_reason": "Duplicate", "title": "Alternative to Perl crypt() that can be used in a production environment", "body": "<p>Perl's crypt() function is a very quick and easy to use encryption routine. Unfortunately it has limitations where the length of the string to be encrypted cannot be longer than 8 characters. This limitation does not make it useful when you use it for something serious (The Perl reference/documentation for this function is <a href=\"https://perldoc.perl.org/functions/crypt.html\" rel=\"nofollow noreferrer\">here</a>) </p>\n\n<p><strong>I'm looking for an alternative to crypt() that you actually can use for something serious, but still have it be very easy to use like the standard crypt() function.</strong></p>\n\n<p>It would also need to have to be a function that encrypts strings that cannot be decrypted. If it is very easy to use I can frequently incorporate it in many sections of my code without writing many bothersome lines of code.</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1556087327, "post_id": 55822038, "comment_id": 98312633, "body": "Can you share the excepted output.? I am not able to understand. From which array you have to compare. Why you are splting with <code>_</code> and assigning to an array. are you searching for <a href=\"https://perldoc.perl.org/functions/push.html\" rel=\"nofollow noreferrer\">push</a>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1556094460, "post_id": 55822038, "comment_id": 98316188, "body": "You should always use <code>use strict</code> and <code>use warnings</code> in all your Perl programs, and declare your variables with <code>my</code>. Your variable names are very hard to read, and <code>strict</code> will tell you when you have typos."}, {"owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 0, "creation_date": 1556110951, "post_id": 55822038, "comment_id": 98325975, "body": "Why not just use a hash?"}], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 11370241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48242f71cd27664cbd1ef6174eca424f?s=128&d=identicon&r=PG&f=1", "display_name": "perl_noob", "link": "https://stackoverflow.com/users/11370241/perl-noob"}, "is_accepted": false, "score": 1, "last_activity_date": 1556121756, "creation_date": 1556121756, "answer_id": 55834243, "question_id": 55822038, "link": "https://stackoverflow.com/questions/55822038/compare-two-2d-array-to-match-the-string/55834243#55834243", "title": "Compare two 2D array to match the string", "body": "<p>I think you may be over complicating your problem, to answer your original question of comparing two lists I have a script that will compare two lists and tell you what doesn't exist in each. If this inst exactly what you need let me know and we can change it up to fit your use. As with just about anything in Perl there is probably a module that will do all this for you.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse List::Util qw(any);\n\nmy @list1 = ('prescc_ux_aux_clk',\n'prescc_ux_prim_clk',\n'usb2_phy_side_clk',\n'usb3_phy_side_clk',\n'ux_prim_clk',\n'ux_side_clk',\n'ux_xtal_frm_refclk',\n'uxd_aux_clk',\n'uxd_pgcb_clk',\n'uxd_prescc_aux_clk',\n'uxd_prim_clk',\n'uxd_side_clk',\n'uxd_suspend_clk'\n);\n\nmy @list2 = ('ccu_ux_xtal_frm_refclk_ack',\n'ibbs_ux_prim_clkack',\n'sbr_ux_side_clkack',\n'uxd_aux_clkack',\n'uxd_pgcb_clkack',\n'uxd_prim_clkack',\n'uxd_side_clkack'\n);\n\nprint \"\\n==== LIST 1 TO LIST 2 COMPARISON, Does not exist in list 2 ====\\n\";\nforeach my $first (@list1) { \n    if ( any { $_ eq $first} @list2) { next; }\n        else { print $first . \"\\n\"; }\n}\n\nprint \"\\n==== LIST 2 TO LIST 1 COMPARISON, Does not exist in list 1 ====\\n\";\nforeach my $first (@list2) { \n    if ( any {$_ eq $first} @list1) { next; }\n        else { print $first . \"\\n\"; }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11402678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87cdf8678e6f6d0827d217d052551240?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie95", "link": "https://stackoverflow.com/users/11402678/newbie95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556162161, "creation_date": 1556076948, "last_edit_date": 1556162161, "question_id": 55822038, "link": "https://stackoverflow.com/questions/55822038/compare-two-2d-array-to-match-the-string", "title": "Compare two 2D array to match the string", "body": "<p>I want to compare string in two 2D array but the size are not the same. So, I want to shift the element in one of the array to match with all of the element in another array but i run out of idea on how the looping should be. </p>\n\n<p>This is my first time using perl language. I learned c language before.</p>\n\n<pre><code>#!/usr/intel/pkgs/perl/5.14.1/bin/perl\n\nuse Data::Dumper qw(Dumper);\n\n@clk = (\n'prescc_ux_aux_clk',\n'prescc_ux_prim_clk',\n'usb2_phy_side_clk',\n'usb3_phy_side_clk',\n'ux_prim_clk',\n'ux_side_clk',\n'ux_xtal_frm_refclk',\n'uxd_aux_clk',\n'uxd_pgcb_clk',\n'uxd_prescc_aux_clk',\n'uxd_prim_clk',\n'uxd_side_clk',\n'uxd_suspend_clk');\n\n@clkack = (\n'ccu_ux_xtal_frm_refclk_ack',\n'ibbs_ux_prim_clkack',\n'sbr_ux_side_clkack',\n'uxd_aux_clkack',\n'uxd_pgcb_clkack',\n'uxd_prim_clkack',\n'uxd_side_clkack');\n\n\n\nforeach(@clk){\n    @clkline = map {[split /_/,$_]} @clk;\n    }\nforeach(@clkack){\n    @clkackline = map{[split /_/,$_]} @clkack;\n    }\n\n#print Dumper @clkline;\n\n$match = 0;\n\n$clkack_row = @clkackline; #no. of row in clkackline\n$clk_row = @clkline;\n\nfor ($i=0; $i&lt;$clkack_row; $i++){\n    $clkackcolumn = @{$clkackline[$i]};\n\n    for ($j=0; $j&lt;$clkackcolumn; $j++){\n\n        for ($m=0; $m&lt;$clk_row; $m++){\n            $clkcolumn = @{$clkline[$m]};\n\n            for ($n=0; $n&lt;$clkcolumn; $n++){\n                if ($clkline[$i][$j] eq $clkacline[$m][$n]){\n                    $match = $match + 1;\n                    print \"$match\\n\";\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I expect it to loop the @clkackline array and compare it with the @clkline array. If it's matching then it will give how many match it have, hence the $match variable.</p>\n\n<p>Edited:</p>\n\n<p>I need to split it by '_' so that i can get the element divided by only the word inside another array. \nEg: </p>\n\n<pre><code>$clk[0] = ux_prim_clk will result in;\n$clkline[0][0] = ux,  $clkline[0][1] = prim, $clkline[0][2] = clk. \n</code></pre>\n\n<p>Then i need to compare with the @clkackline array element by element but in sequential order. \nEg:</p>\n\n<pre><code>$clkline[0][0] = $clkackline[0][0], \n$clkline[0][1] = $clkackline[0][1], \n$clkline[0][2] = $clkackline[0][2]. \n</code></pre>\n\n<p>But another problem is i need to compare @clkline with all of the element in clkackline. But since the size will be the constraint, then i need to shift the @clkackline to match with @clkline or vice versa.</p>\n\n<p>Eg:\nFirst check:</p>\n\n<pre><code>$clkline[1][0] = $clkackline[0][0], \n$clkline[1][1] = $clkackline[0][1], \n$clkline[1][2] = $clkackline[0][2].\n</code></pre>\n\n<p>Second check:</p>\n\n<pre><code>$clkline[1][0] = $clkackline[0][1], \n$clkline[1][1] = $clkackline[0][2], \n$clkline[1][2] = $clkackline[0][3].\n</code></pre>\n\n<p>This is just an example of course, but you can see that i need it to delete the first column in $clkackline[0]. </p>\n\n<p>Then i need to calculate the percentage of how much it will match. </p>\n\n<p>Eg:</p>\n\n<pre><code>ux_prim_clk vs  uxd_prim_clkack will return 33.33%.\n</code></pre>\n\n<p>Then store the element with highest match inside another array (eg: @clknew)</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1556074146, "post_id": 55821583, "comment_id": 98309305, "body": "Remember that <i>empty string</i> (zero length) and <i>blank string</i> (all space-type characters) are two different things. Test for <code>&#47;\\S+&#47;</code> to find strings with content."}, {"owner": {"reputation": 963, "user_id": 11117210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d5aa68aac6b9fe841dc9221c477dd8?s=128&d=identicon&r=PG&f=1", "display_name": "truth", "link": "https://stackoverflow.com/users/11117210/truth"}, "edited": false, "score": 0, "creation_date": 1556074824, "post_id": 55821583, "comment_id": 98309431, "body": "If you don&#39;t want empty strings in your array, why are you putting them there?  Remove both <code>else { push @data, &#39;&#39; }</code> clauses and see if the data looks more useful to you."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1556074999, "post_id": 55821583, "comment_id": 98309458, "body": "The &quot;<i>output result</i>&quot; is unclear -- how do you get an empty line between six and seven? There was nothing in between these two lines in input."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1556075136, "post_id": 55821583, "comment_id": 98309477, "body": "<code>my @new_data = grep { &#47;\\S&#47; and !&#47;;&#47; } @data;</code>, or an equivalent, should give what you seem to expect but again some things aren&#39;t clear in the question."}, {"owner": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "reply_to_user": {"reputation": 963, "user_id": 11117210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d5aa68aac6b9fe841dc9221c477dd8?s=128&d=identicon&r=PG&f=1", "display_name": "truth", "link": "https://stackoverflow.com/users/11117210/truth"}, "edited": false, "score": 0, "creation_date": 1556075617, "post_id": 55821583, "comment_id": 98309579, "body": "hi @truth i already remove it, but it doesn&#39;t work"}, {"owner": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1556075885, "post_id": 55821583, "comment_id": 98309627, "body": "hi @tadman, can you explain more"}, {"owner": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1556076121, "post_id": 55821583, "comment_id": 98309670, "body": "hi @zdim, i already explain in first paragraph. there is element between it"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1556079410, "post_id": 55821583, "comment_id": 98310256, "body": "&quot;<i>there is element between</i>&quot;  --- no, not between six and seven, there isn&#39;t."}, {"owner": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1556086480, "post_id": 55821583, "comment_id": 98312314, "body": "Hi @zdim, sorry for confusion. I already update my question"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1556087129, "post_id": 55821583, "comment_id": 98312548, "body": "Thank you -- but now there is an empty line instead of line with &quot;seven,&quot; while I don&#39;t see a reason to remove it and I don&#39;t see that the code removes it.  Can you check and post consistent/correct data samples?   --- Then, did you try the code from my comment above?"}, {"owner": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "edited": false, "score": 0, "creation_date": 1556087470, "post_id": 55821583, "comment_id": 98312695, "body": "Sorry for trouble, the result is same as mine. There is still blank newline"}, {"owner": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "edited": false, "score": 0, "creation_date": 1556155451, "post_id": 55821583, "comment_id": 98344445, "body": "Hi all, I already updated my problem. Maybe can give you guys clear understanding."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1556174729, "post_id": 55821583, "comment_id": 98349071, "body": "Again: did you try  <code>my @new_data = grep { &#47;\\S&#47; and !&#47;;&#47; } @data;</code> ?"}, {"owner": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "edited": false, "score": 0, "creation_date": 1556176261, "post_id": 55821583, "comment_id": 98349796, "body": "Yes, I already try it. there is still blank newline there"}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "edited": false, "score": 0, "creation_date": 1556085960, "post_id": 55822622, "comment_id": 98312102, "body": "Hi abdan, thanks for the suggestion, but it doesn&#39;t work for me"}, {"owner": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "edited": false, "score": 0, "creation_date": 1556087221, "post_id": 55822622, "comment_id": 98312582, "body": "from that code, it only remove the special character. I want to remove all the line and replace the line with element after it"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1556087478, "last_edit_date": 1556087478, "creation_date": 1556081389, "answer_id": 55822622, "question_id": 55821583, "link": "https://stackoverflow.com/questions/55821583/how-to-remove-entire-array-that-have-specific-character/55822622#55822622", "title": "How to remove entire array that have specific character", "body": "<p>let's get your data gist</p>\n\n<pre><code>@data=(\"one a\", \"two b\",\"three c\", \";four d\",\"five e\",\"six e\",\"seven g\",\"eight h\")\nfor(@data){\ns/^;.*//;              # // &lt;-- Put Replacer here between `//` , leave it to remove line\npush(@new_data,$_)}\nprint \"$_\\n\" for @new_data\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 0, "last_activity_date": 1556087815, "creation_date": 1556087815, "answer_id": 55823756, "question_id": 55821583, "link": "https://stackoverflow.com/questions/55821583/how-to-remove-entire-array-that-have-specific-character/55823756#55823756", "title": "How to remove entire array that have specific character", "body": "<p>I hope you are looking for <a href=\"https://perldoc.perl.org/functions/next.html\" rel=\"nofollow noreferrer\">next</a></p>\n\n<pre><code>use warnings;\nuse strict;\n\n@data=(\"one a\", \"two b\",\"three c\", \";four d\",\"five e\",\"six e\",\"seven g\",\"eight h\")\nfor(@data){\n    next if (/^;/);\n    print $_,\"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 55823756, "answer_count": 2, "score": 3, "last_activity_date": 1556155398, "creation_date": 1556073262, "last_edit_date": 1556155398, "question_id": 55821583, "link": "https://stackoverflow.com/questions/55821583/how-to-remove-entire-array-that-have-specific-character", "title": "How to remove entire array that have specific character", "body": "<p>I have a perl code that extract from .xls file. My .xls file is as below</p>\n\n<pre><code>NUMBER    NAME    ALPHABET\none       Jane        a\ntwo       Adam        b\nthree     Josh        c\n;four  \nfive      Agnes       e \nsix       Mary        f\n;seven \neight     Lara        h        \n</code></pre>\n\n<p>I want to extract the info and only take column 1 and 2. My perl code is as below. </p>\n\n<pre><code>     #!/usr/bin/perl\n\n     use warnings;\n     use strict;\n     use Spreadsheet::ParseExcel;\n\n     main ();\n\n     sub main {\n\n        my $filename = 'Book1.xls';\n        my $parser   = Spreadsheet::ParseExcel-&gt;new();\n        my $workbook = $parser-&gt;parse( $filename );\n\n        if ( !defined $workbook ) {\n           die \"-E-: cannot parse &lt;$filename&gt;.\\n \", $parser-&gt;error(), \".\\n\";\n        }\n\n        my $worksheet             = $workbook -&gt; Worksheet ( 'a' ) || die \"-E-: cannot parse family pin list.\\n\";   \n        my ( $row_min, $row_max ) = $worksheet-&gt; row_range();\n\n        open ( my $file,\"&gt; output.txt\");\n\n        for my $row ( 1 .. $row_max ) {\n\n           my @data;\n\n           for my $col ( 0 ) {\n              my $number = $worksheet-&gt; get_cell( $row, $col );\n              if ( $number ) {\n                 push @data, $number-&gt; value();\n              }\n              else {\n                 push @data, '';\n              }\n            }\n\n            for my $col ( 2 ) {\n               my $alphabet = $worksheet-&gt;get_cell( $row, $col );\n               if ( $alphabet ) {\n                  push @data, $alphabet-&gt;value();\n                  print $file  \"@data\\n\";\n               }\n               else {\n               push @data, '';\n               }\n            }     \n\n     }\n\n     close $file;\n\n      print \"done\\n\";\n     }\n</code></pre>\n\n<p>The result is</p>\n\n<pre><code>    one a\n    two b\n    three c\n    ;four \n    five e\n    six f\n    ;seven \n    eight h\n</code></pre>\n\n<p>I want to remove the entire array that start with string \";\". I extend my code like below</p>\n\n<pre><code>        open ( my $file,\"&gt; output.txt\");\n\n        for my $row ( 1 .. $row_max ) {\n\n           my @data;\n\n           for my $col ( 0 ) {\n              my $number = $worksheet-&gt; get_cell( $row, $col );\n              if ( $number ) {\n                 push @data, $number-&gt; value();\n              }\n              else {\n                 push @data, '';\n              }\n            }\n\n            for my $col ( 11 ) {\n               my $alphabet = $worksheet-&gt;get_cell( $row, $col );\n               if ( $alphabet ) {\n                  push @data, $alphabet-&gt;value();\n               }\n               else {\n               push @data, '';\n               }\n            }\n\n\n      my @new_data = grep(!/;/, @data);\n      my @latest_data = grep ( $_ ne '', @new_data);\n      print $file  \"@latest_data\\n\";\n\n\n     }\n\n     close $file;\n\n      print \"done\\n\";\n     }\n</code></pre>\n\n<p>The output result produce like below.</p>\n\n<pre><code>     one a\n     two b\n     three c\n\n     five e\n     six f\n\n     eight h\n</code></pre>\n\n<p>I don't want to be empty space. How i want to eliminate the empty space that produce result as below?</p>\n\n<pre><code>     one a\n     two b\n     three c\n     five e\n     six f\n     eight h\n</code></pre>\n\n<p>I also try doing like this, but the result is same.</p>\n\n<pre><code>     for my $index (reverse 0..$#data) {\n        if ( $data[$index] =~ /^;/ ) {\n        splice(@data, $index, 1);\n       }\n     }\n     print $file \"@data\\n\";\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 3, "creation_date": 1556063245, "post_id": 55820695, "comment_id": 98307867, "body": "There&#39;s a difference between <code>=~</code> and <code>= ~</code>..."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1556063554, "post_id": 55820695, "comment_id": 98307924, "body": "You should <code>use warnings;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 694059, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/aaa4515141170cd1430404a936a13999?s=128&d=identicon&r=PG", "display_name": "mickeyj", "link": "https://stackoverflow.com/users/694059/mickeyj"}, "edited": false, "score": 0, "creation_date": 1556132518, "post_id": 55820897, "comment_id": 98338031, "body": "Thank you so much!"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1556063935, "creation_date": 1556063935, "answer_id": 55820897, "question_id": 55820695, "link": "https://stackoverflow.com/questions/55820695/substitution-on-string-in-perl-changes-string-to-an-integer-value/55820897#55820897", "title": "Substitution on string in perl changes string to an integer value", "body": "<p>The proper solution is</p>\n\n<pre><code>$line =~ s/[\\s\\\\]+//g;\n</code></pre>\n\n<p>Note:</p>\n\n<ul>\n<li><code>g</code> flag to substitute all occurrences</li>\n<li>no space between <code>=</code> and <code>~</code></li>\n</ul>\n\n<p><code>=~</code> is a single operator, binding the substitution operator <code>s</code> to the target variable <code>$line</code>.</p>\n\n<p>Inserting a space (as in your code) means <code>s</code> binds to the default target, <code>$_</code>, because there is no explicit target, and then the return value (which is the number of substitutions made) has all its bits inverted (unary <code>~</code> is bitwise complement) and is assigned to <code>$line</code>.</p>\n\n<p>In other words,</p>\n\n<pre><code>$line = ~ s/...//\n</code></pre>\n\n<p>parses as</p>\n\n<pre><code>$line = ~(s/...//)\n</code></pre>\n\n<p>which is equivalent to</p>\n\n<pre><code>$line = ~($_ =~ s/...//)\n</code></pre>\n\n<p>If you had enabled <code>use warnings</code>, you would've gotten the following message:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Use of uninitialized value $_ in substitution (s///) at prog.pl line 6.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1556547456, "last_edit_date": 1556547456, "creation_date": 1556539513, "answer_id": 55903028, "question_id": 55820695, "link": "https://stackoverflow.com/questions/55820695/substitution-on-string-in-perl-changes-string-to-an-integer-value/55903028#55903028", "title": "Substitution on string in perl changes string to an integer value", "body": "<p>You've already accepted an answer, but I thought it would be useful to give you a few more details.</p>\n\n<p>As you now know,</p>\n\n<pre><code>$line = ~s/\\s+//;\n</code></pre>\n\n<p>is completely different to:</p>\n\n<pre><code>$line =~ s/\\s+//;\n</code></pre>\n\n<p>You wanted the second, but you typed the first. So what did you end up with?</p>\n\n<p><code>~</code> is \"bitwise negation operator\". That is, it converts its argument to a binary number and then bit-flips that number - all the zeroes become ones and all the ones become zeros.</p>\n\n<p>So you're asking for the bitwise negation of <code>s/\\s+//</code>. Which means the bitwise negation works on the value returned by <code>s/\\s+//</code>. And the value returned by a substitution is the number of substitutions made.</p>\n\n<p>We can now work out all of the details.</p>\n\n<ul>\n<li><code>s/\\s+//</code> carries out your substitution and returns the number of substitutions made (an integer).</li>\n<li><code>~s/\\s+//</code> returns the bitwise negation of the integer returned by the substitution (which is also an integer).</li>\n<li><code>$line = ~s/\\s+//</code> takes that second integer and assigns it to the variable <code>$line</code>.</li>\n</ul>\n\n<p>Probably, the first step returns 1 (you don't use <code>/g</code> on your <code>s/.../.../</code>, so only one substitution will be made). It's easy enough to get the bitwise negation of 1.</p>\n\n<pre><code>$ perl -E'say ~1'\n18446744073709551614\n</code></pre>\n\n<p>So that might well be the integer that you're seeing (although it might be different on a 32-bit system).</p>\n"}], "owner": {"reputation": 71, "user_id": 694059, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/aaa4515141170cd1430404a936a13999?s=128&d=identicon&r=PG", "display_name": "mickeyj", "link": "https://stackoverflow.com/users/694059/mickeyj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 55820897, "answer_count": 2, "score": 0, "last_activity_date": 1556547456, "creation_date": 1556062081, "last_edit_date": 1556063616, "question_id": 55820695, "link": "https://stackoverflow.com/questions/55820695/substitution-on-string-in-perl-changes-string-to-an-integer-value", "title": "Substitution on string in perl changes string to an integer value", "body": "<p>I am trying to do delete some characters matching a regex in perl and when I do that it returns an integer value.</p>\n\n<p>I have tried substituting multiple spaces in a string with empty string or basically deleting the space.</p>\n\n<pre><code>#! /usr/intel/bin/perl\n\nmy $line = \"foo/\\\\bar car\"; \nprint \"$line\\n\";\n#$line = ~s/(\\\\|(\\s)+)+//; &lt;--Ultimately need this, where backslash and space needs to be deleted. Tried this, returns integer value\n$line = ~s/\\s+//; &lt;-- tried this, returns integer value\nprint \"$line\\n\"; \n</code></pre>\n\n<p>Expected results:<br>\nFirst print: <code>foo/\\bar car</code><br>\nSecond print: <code>foo/barcar</code></p>\n\n<p>Actual result:<br>\nFirst print: <code>foo/\\\\bar car</code><br>\nSecond print: <code>18913234908</code></p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1556116543, "post_id": 55819998, "comment_id": 98329876, "body": "5.10.1 made some major changes to it. (Yeah, in a maint release. They really dropped the ball when it came to smartmatch.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1556117037, "post_id": 55819998, "comment_id": 98330223, "body": "Smartmatch was going to be removed from 5.28 --a patch was even submitted-- but too many people are using this broken feature. The way forward is unclear, but smartmatching remains unchanged (and subject to change/removal at any time) for now."}], "answers": [{"comments": [{"owner": {"reputation": 6118, "user_id": 106769, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qsZek.png?s=128&g=1", "display_name": "Conspicuous Compiler", "link": "https://stackoverflow.com/users/106769/conspicuous-compiler"}, "edited": false, "score": 1, "creation_date": 1556059741, "post_id": 55820345, "comment_id": 98307093, "body": "I hope you&#39;ll excuse my ignorance, but it sounds like you&#39;re referring to yourself as part of the team developing perl.  Is there any chance you can mention your role in the project in your answer here?"}, {"owner": {"reputation": 6118, "user_id": 106769, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qsZek.png?s=128&g=1", "display_name": "Conspicuous Compiler", "link": "https://stackoverflow.com/users/106769/conspicuous-compiler"}, "edited": false, "score": 2, "creation_date": 1556061233, "post_id": 55820345, "comment_id": 98307398, "body": "Hrm, tried to find <a href=\"https://www.nntp.perl.org/group/perl.perl5.porters/\" rel=\"nofollow noreferrer\">a concise summary of smart match at the archives of perl5.porters</a>.  I&#39;m glad you provided a summary here, as I didn&#39;t find distillation terribly easy through the web interface to the archives."}, {"owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 0, "creation_date": 1556188336, "post_id": 55820345, "comment_id": 98356474, "body": "I will reluctantly sign this off. Essentially, it appears my belief that smartwatch has been removed from 5.27 was just a rumour. If implemented it forces removal from current code (we have no option). Questions remain as to what was so wrong with smartmatch and whilst I heard a rumour Damian Conway never liked it (just a rumour), its not clear why there is such negativity."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 1, "creation_date": 1558325969, "post_id": 55820345, "comment_id": 99049329, "body": "@MichaelG. &quot;<i>what was so wrong with smartmatch</i>&quot; -- it&#39;s a lot and it goes deep, so it&#39;s hard to fix. Its design is extremely complicated (and inconsistent), what makes it difficult (actually <i>difficult</i>) to figure out what it&#39;s going to do in many cases, or how to use it correctly. You can work with it as you&#39;d expect (a feature to be used) only for the most basic uses -- while it&#39;s packed with ten times more. Hindsight&#39;s easy as we know, but this really isn&#39;t good and shouldn&#39;t be used."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 1, "creation_date": 1558326124, "post_id": 55820345, "comment_id": 99049352, "body": "@MichaelG.  Some resources: <a href=\"https://stackoverflow.com/q/16927024/4653379\">this page</a>,  comments/links under <a href=\"https://stackoverflow.com/q/49328308/4653379\">this question</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 6118, "user_id": 106769, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qsZek.png?s=128&g=1", "display_name": "Conspicuous Compiler", "link": "https://stackoverflow.com/users/106769/conspicuous-compiler"}, "edited": false, "score": 0, "creation_date": 1558326575, "post_id": 55820345, "comment_id": 99049443, "body": "@ConspicuousCompiler  &quot;<i>tried to find</i>&quot; -- here&#39;s <a href=\"https://www.nntp.perl.org/group/perl.perl5.porters/2017/08/msg245769.html\" rel=\"nofollow noreferrer\">a summary of sorts</a>   that popped up while I was putting together above comments.  Those links have more."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8549967"}, "is_accepted": true, "score": 6, "last_activity_date": 1556059299, "creation_date": 1556059299, "answer_id": 55820345, "question_id": 55819998, "link": "https://stackoverflow.com/questions/55819998/smartmatch-from-5-27-vs/55820345#55820345", "title": "Smartmatch from 5.27 ~~ vs =~", "body": "<p>Smart match is still experimental.</p>\n\n<p>If we had time machines, most people working on the development of perl would go back in time, and remove smart match from perl5. The only thing smart match has done is showing clearly that taking something from perl6 and trying to bolt that into perl5 isn't going to work if it's anything more complicated than <code>say</code>.</p>\n\n<p>Noone knows what the future of smart match in perl5 will be. There's no agreement on what it should be. If it wasn't for the dreaded \"backwards compatability\", smart match would have been dead and buried years ago.</p>\n\n<p>Save yourself a world of pain, and don't use smart match.</p>\n"}], "owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 55820345, "answer_count": 1, "score": 5, "last_activity_date": 1556059299, "creation_date": 1556056868, "last_edit_date": 1556057587, "question_id": 55819998, "link": "https://stackoverflow.com/questions/55819998/smartmatch-from-5-27-vs", "title": "Smartmatch from 5.27 ~~ vs =~", "body": "<p>I'm using Perl 5.24 right now and smartmatch is a great, versatile operator, for example,</p>\n\n<pre><code>%foobar ~~ @foo; \n</code></pre>\n\n<p>and all the intricacies therein.</p>\n\n<p>I understand from 5.27 onwards its functionality will be reduced to smartwatches involving, </p>\n\n<pre><code>$foo = qr/foo/; \n</code></pre>\n\n<p>Okay so I'm going to have to rewrite my data pipelines to be compliant.</p>\n\n<p>My question is, if confirmed what is the different between,</p>\n\n<pre><code>'foo' ~~ $foo;\n</code></pre>\n\n<p>and, </p>\n\n<pre><code> 'foo' =~ /$foo/;\n</code></pre>\n\n<p>It strikes me that smartmatch is being removed in all but name. Am I right, and if not what am I missing? </p>\n\n<p><strong>History</strong></p>\n\n<p>It has an unusual history, and it must be stressed its classed as experimental. I'm charting what I know. I guess many of you will know more, any input would be helpful because its an example (to students) of language evolution:</p>\n\n<ul>\n<li>5.10 first introduced </li>\n<li>5.14 introduced %foobar ~~ @foo type matches</li>\n<li>5.27 Removed in all but name only? Still experimental?</li>\n</ul>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1556052196, "post_id": 55817531, "comment_id": 98304640, "body": "Related: <a href=\"https://stackoverflow.com/q/49950421\">stackoverflow.com/q/49950421</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1556047563, "post_id": 55817555, "comment_id": 98302654, "body": "For reference, the reserved stash values are documented here: <a href=\"https://metacpan.org/pod/Mojolicious::Controller#stash\" rel=\"nofollow noreferrer\">metacpan.org/pod/Mojolicious::Controller#stash</a>"}], "tags": [], "owner": {"reputation": 165, "user_id": 5484640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/taCdn.jpg?s=128&g=1", "display_name": "tempus71", "link": "https://stackoverflow.com/users/5484640/tempus71"}, "is_accepted": false, "score": 2, "last_activity_date": 1556045051, "creation_date": 1556045051, "answer_id": 55817555, "question_id": 55817531, "link": "https://stackoverflow.com/questions/55817531/mojolicious-need-all-the-time-out-time-for-load-a-page-on-production-with-hypnot/55817555#55817555", "title": "mojolicious need all the time out time for load a page on production with hypnotoad", "body": "<p>The reason of the problem is that I was using a reserved stash word 'status'.</p>\n\n<p>The solution is change the name of the variable on stash and in the template:</p>\n\n<pre><code>   $s-&gt;stash(\n        namePlan =&gt; $plan-&gt;name,\n        monthDuration =&gt; $plan-&gt;monthDuration,\n        amount =&gt; $plan-&gt;amount,\n        end =&gt; $subscription-&gt;end,\n\n        subStatus =&gt; $subscription-&gt;status,\n\n        signupDate =&gt; $customer-&gt;signupDate,\n        endTrial =&gt; $customer-&gt;endTrial,\n        diffTrial =&gt; $customer-&gt;diffTrial,\n        trialDays =&gt; $customer-&gt;trialDays,\n        startSubscription =&gt; $subscription-&gt;start,\n        discount =&gt; $plan-&gt;discount,\n        newsletter =&gt; $newsletter,\n    );\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 5484640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/taCdn.jpg?s=128&g=1", "display_name": "tempus71", "link": "https://stackoverflow.com/users/5484640/tempus71"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1556045086, "creation_date": 1556044930, "last_edit_date": 1556045086, "question_id": 55817531, "link": "https://stackoverflow.com/questions/55817531/mojolicious-need-all-the-time-out-time-for-load-a-page-on-production-with-hypnot", "title": "mojolicious need all the time out time for load a page on production with hypnotoad", "body": "<p>There is one page on my Mojolicious project that loads correctly but then the connections doesn't finish until arrive to the timeout time.</p>\n\n<p>I got the problem only with hypnotoad on production server.</p>\n\n<p>I couldn't replicate the problem on development.</p>\n\n<p>I have been one day investigating the issue due the page was doing and api request to an external service.</p>\n\n<p>Initially I was thinking it was due to some Mojo::UserAgent problem and I have been trying multiple combinations of Promise and IOLoop and anyone was working.</p>\n\n<p>the code simplified is:</p>\n\n<pre><code>sub show {\n    my $s = shift;\n\n    my $customer = Model::Customers-&gt;new();\n    $customer-&gt;id( $s-&gt;session('id') );\n    $customer-&gt;get();\n\n    my $subscription = Model::Customers::Subscriptions-&gt;new();\n    $subscription-&gt;id( $s-&gt;session('id') );\n    $subscription-&gt;get();\n\n    my $plan = Model::Plans-&gt;new();\n    $plan-&gt;id( $subscription-&gt;idPlan );\n    $plan-&gt;get;\n\n\n    $s-&gt;stash(\n        namePlan =&gt; $plan-&gt;name,\n        monthDuration =&gt; $plan-&gt;monthDuration,\n        amount =&gt; $plan-&gt;amount,\n        end =&gt; $subscription-&gt;end,\n        status =&gt; $subscription-&gt;status,\n        signupDate =&gt; $customer-&gt;signupDate,\n        endTrial =&gt; $customer-&gt;endTrial,\n        diffTrial =&gt; $customer-&gt;diffTrial,\n        trialDays =&gt; $customer-&gt;trialDays,\n        startSubscription =&gt; $subscription-&gt;start,\n        discount =&gt; $plan-&gt;discount,\n        newsletter =&gt; $newsletter,\n    );\n\n    $s-&gt;render();\n\n}\n</code></pre>\n\n<p>I don't share template code because isn't necessary.</p>\n\n<p>The page and template load correctly but the browser, chrome, stay loading until arrive to the timeout. (15s default)</p>\n"}, {"tags": ["perl", "file-handling"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1556043243, "post_id": 55816616, "comment_id": 98300916, "body": "Tip: Don&#39;t needless use of global vars! Use <code>open(my $MAIL, ...)</code> instead of <code>open(MAIL, ...)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1556043081, "creation_date": 1556043081, "answer_id": 55817107, "question_id": 55816616, "link": "https://stackoverflow.com/questions/55816616/how-to-read-continuously-updating-log-file-match-particular-pattern-in-perl-sc/55817107#55817107", "title": "How to read continuously updating log file &amp; match particular pattern in perl script", "body": "<p>Use <a href=\"http://search.cpan.org/perldoc?File::Tail\" rel=\"nofollow noreferrer\">File::Tail</a>.</p>\n\n<pre><code>use File::Tail qw( );\n\nmy $tail = File::Tail-&gt;new( name =&gt; $qfn );\nwhile (defined( my $line = $tail-&gt;read() )) {\n   if ($line =~ /The connection is closed\\./) {\n      ...\n   }\n}\n</code></pre>\n\n<p>If you need the preceding lines,</p>\n\n<pre><code>use File::Tail qw( );\n\nmy $tail = File::Tail-&gt;new( name =&gt; $qfn );\nmy @buf;\nwhile (defined( my $line = $tail-&gt;read() )) {\n   push @buf, $line;\n   if ($line =~ /The connection is closed\\./) {\n      ...\n      @buf = ();\n   }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556044349, "post_id": 55817185, "comment_id": 98301387, "body": "The first approach hammers the CPU and file system. It also doesn&#39;t handle log rotations."}, {"owner": {"reputation": 69, "user_id": 11370241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48242f71cd27664cbd1ef6174eca424f?s=128&d=identicon&r=PG&f=1", "display_name": "perl_noob", "link": "https://stackoverflow.com/users/11370241/perl-noob"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556044568, "post_id": 55817185, "comment_id": 98301468, "body": "It does handle log rotations. it will reset a log file counter if the total file count is less than the previous run and reset the counter to 0. Also each File::Tail reads the entire file as well CPU/Disk usage will be basically the same."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556045195, "post_id": 55817185, "comment_id": 98301714, "body": "That&#39;s not true. F::T has delays built in to avoid this specifically and it does a far better job at detecting log rotations than you do. Your method doesn&#39;t always work. (It&#39;s weird that you make this claim because your F::T example shows you overriding the default values used by the mechanisms that address both of these issues!!!)"}, {"owner": {"reputation": 69, "user_id": 11370241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48242f71cd27664cbd1ef6174eca424f?s=128&d=identicon&r=PG&f=1", "display_name": "perl_noob", "link": "https://stackoverflow.com/users/11370241/perl-noob"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556045558, "post_id": 55817185, "comment_id": 98301865, "body": "interval is default, max interval is halved (60 -&gt; 30) and adjust after is also halved ( 10-&gt; 5) that&#39;s hardly changing anything rather then my scripts response time to new lines. My use case was for a smile sized log file that is rotated daily."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556164109, "post_id": 55817185, "comment_id": 98346078, "body": "What are you trying to demonstrate by mentioning that? I don&#39;t see your point."}], "tags": [], "owner": {"reputation": 69, "user_id": 11370241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48242f71cd27664cbd1ef6174eca424f?s=128&d=identicon&r=PG&f=1", "display_name": "perl_noob", "link": "https://stackoverflow.com/users/11370241/perl-noob"}, "is_accepted": false, "score": -1, "last_activity_date": 1556044080, "last_edit_date": 1556044080, "creation_date": 1556043463, "answer_id": 55817185, "question_id": 55816616, "link": "https://stackoverflow.com/questions/55816616/how-to-read-continuously-updating-log-file-match-particular-pattern-in-perl-sc/55817185#55817185", "title": "How to read continuously updating log file &amp; match particular pattern in perl script", "body": "<p>I have solved this problem 2 different ways.</p>\n\n<p>With no modules you can do something like:</p>\n\n<pre><code>-Check if line count file exists and read into variable\n-loop through file line by line, increment counter\n-if $loop_line_count &lt; $line_count_previous_run : skip\n-if $total_line_count &lt; $line_count_previous_run : reset file count to 0\n-write total_line_count to file\n</code></pre>\n\n<p>With File::Tail</p>\n\n<pre><code>my $file=File::Tail-&gt;new( name=&gt;\"$log_file\",internal=&gt;10, maxinterval=&gt;30, adjustafter=&gt;5);\n\nwhile (defined(my $line=$file-&gt;read)) {\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7294932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85622041ce4a5bfdc3d7975f9946f5f5?s=128&d=identicon&r=PG&f=1", "display_name": "Renuka", "link": "https://stackoverflow.com/users/7294932/renuka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 55817107, "answer_count": 2, "score": 0, "last_activity_date": 1556044080, "creation_date": 1556040841, "question_id": 55816616, "link": "https://stackoverflow.com/questions/55816616/how-to-read-continuously-updating-log-file-match-particular-pattern-in-perl-sc", "title": "How to read continuously updating log file &amp; match particular pattern in perl script", "body": "<p>I want to read continuously updating log file. If I get particular pattern then I should be able to send a mail which I  am able to do.</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $line;\nmy $to = 'abc@abc.com';\nmy $from = 'xyz@abc.com';\nmy $subject = 'Connection Pool Issue';\nmy $message = 'There is connection pool issue. Please check Logs for more details';\n\nopen my $fh, '&lt;', 'error.txt';\nmy @file = &lt;$fh&gt;;\nclose $fh;\n\nforeach my $line (@file) {\n\n\n if ($line =~ /The connection is closed./) \n\n { \n\n    open(MAIL, \"|/usr/sbin/sendmail -t\");\n    print MAIL \"To: $to\\n\";\n    print MAIL \"From: $from\\n\";\n    print MAIL \"Subject: $subject\\n\\n\";\n    # Email Body\n    print MAIL $message;\n\n    close(MAIL);\n    print \"Email Sent Successfully\\n\";\n\n    last;\n  }\n}\n</code></pre>\n\n<p>I don't want to read file from file handler 0 that means from starting position. </p>\n\n<p>I expect to read a file from current file handler position.\nIt should not include already read lines.</p>\n\n<p>Please suggest.\nThank you</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1556040564, "post_id": 55816022, "comment_id": 98299702, "body": "This doesn&#39;t seem like the right place to ask. <a href=\"https://rt.cpan.org/Dist/Display.html?Name=Scalar-List-Utils\" rel=\"nofollow noreferrer\">Try the bugtracker?</a> Regardless, it&#39;s unlikely to change as now it would be a backcompat breakage for no real benefit."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1556046256, "post_id": 55816022, "comment_id": 98302128, "body": "Why should it return a reftype when the input is not a reference? Seems nonsensical to me, and using undef to indicate the absence of a value seems perfectly fine. Arguably the problem isn&#39;t reftype() but how Perl&#39;s comparison operators handle undef."}, {"owner": {"reputation": 81, "user_id": 2052531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a0fd87f4c35e51fdabe7a3ade1147b3?s=128&d=identicon&r=PG", "display_name": "dd-b", "link": "https://stackoverflow.com/users/2052531/dd-b"}, "edited": false, "score": 0, "creation_date": 1618171891, "post_id": 55816022, "comment_id": 118515694, "body": "Obviously it can&#39;t change, no. I was looking to ask this myself (but found this question already here)...I was kind of hoping there&#39;d be <i>some good reason</i> which I could learn and then it wouldn&#39;t bother me much.  Right now, if doing input validation on something that&#39;s supposed to be an array ref, I have to remember that the comparison will fail if what&#39;s passed in isn&#39;t a reference at all, and do the checking in two steps instead of one. I care about &quot;hash ref&quot; vs. &quot;everything else&quot;, since the second case gets a carp()."}, {"owner": {"reputation": 81, "user_id": 2052531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a0fd87f4c35e51fdabe7a3ade1147b3?s=128&d=identicon&r=PG", "display_name": "dd-b", "link": "https://stackoverflow.com/users/2052531/dd-b"}, "edited": false, "score": 0, "creation_date": 1618172173, "post_id": 55816022, "comment_id": 118515763, "body": "It should return a value easily checkable, rather than a value hard to check, to indicate that it&#39;s not a reference. Having to do the check in two stages is annoying and easily forgotten and many people don&#39;t even realize they need to for years."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 2052531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a0fd87f4c35e51fdabe7a3ade1147b3?s=128&d=identicon&r=PG", "display_name": "dd-b", "link": "https://stackoverflow.com/users/2052531/dd-b"}, "edited": false, "score": 0, "creation_date": 1618172041, "post_id": 55817354, "comment_id": 118515734, "body": "This argument fails to apply, it seems to me, in exactly the place where I most often use reftype -- namely when I&#39;m validating inputs. I expect a hash ref, if I get anything else I&#39;m issuing a carp() or croak() or something. Having that code fail on the undef warning instead makes my error reporting less good, and I have to remember to add extra code in every single case. Well, or just turn off the undef warning; that&#39;s probably really the better solution."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 81, "user_id": 2052531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a0fd87f4c35e51fdabe7a3ade1147b3?s=128&d=identicon&r=PG", "display_name": "dd-b", "link": "https://stackoverflow.com/users/2052531/dd-b"}, "edited": false, "score": 0, "creation_date": 1618185920, "post_id": 55817354, "comment_id": 118518641, "body": "@dd-b You are mistaken. The argument is that it only warns in buggy code, and your code is buggy. Using <code>reftype</code> in the circumstance you describe is wrong as it will sometimes give the wrong answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1556044185, "creation_date": 1556044185, "answer_id": 55817354, "question_id": 55816022, "link": "https://stackoverflow.com/questions/55816022/why-scalarutilreftype-return-undef-instead-of-empty-string/55817354#55817354", "title": "Why Scalar::Util::reftype return `undef` instead of empty string?", "body": "<p>Generally speaking, bad input results in <code>undef</code> (if not an exception), which (eventually) results in a warning so that the error can be found.</p>\n\n<p>The most controversial warning is the uninitialized warning because there's no immediate benefit. But when one considers it part of the larger error framework, one realizes it's a key component of Perl's error detection and debugging system. Having functions return undef on bad input is another component of that system.</p>\n\n<p>I dispute your claim that it makes code smaller. For starters, one should never use <code>reftype</code> as it breaks Perl's data model. (This is why <code>keys $ref</code> was always a bad idea, and never went past the experimental stage.) This means the amount of code in question is quite small.</p>\n\n<p>Still, it can make sense to produce data that requires its use, as long as certain limits are guaranteed. (For example, the output of <code>decode_json</code> can requires it's use, and it can be used safely because <code>decode_json</code> will never produce objects or magical variables.) When it is needed, a number of checks are usually performed, so returning an empty string doesn't really help.</p>\n\n<pre><code>my $type = reftype($val);\nif (!defined($type)) { ... }\nelsif ($type eq 'HASH') { ... }\nelsif ($type eq 'ARRAY') { ... }\n...\n</code></pre>\n\n<p>Note that changing <code>reftype</code> would breaks this code, so changing <code>reftype</code> is not an option. I was going to say you could ask the author for an alternate sub that behaves the way you want, but you could just as easily produce that sub yourself.</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 55817354, "answer_count": 1, "score": 3, "last_activity_date": 1556044185, "creation_date": 1556038434, "question_id": 55816022, "link": "https://stackoverflow.com/questions/55816022/why-scalarutilreftype-return-undef-instead-of-empty-string", "title": "Why Scalar::Util::reftype return `undef` instead of empty string?", "body": "<p><code>ref</code> returns empty string for scalar values.</p>\n\n<p><strong>Why <code>Scalar::Util::reftype</code> return <code>undef</code> instead of empty string like <code>ref</code> does?</strong></p>\n\n<p>What is the benefit of <code>undef</code>? In compare, the benefit of empty string is less coding while doing:</p>\n\n<pre><code>reftype $data eq 'HASH'\n</code></pre>\n\n<p>When <code>undef</code> is returned we will get <code>Use of uninitialized value while eq at ...</code> and we should do:</p>\n\n<pre><code>(reftype($data) //'') eq 'HASH'\n</code></pre>\n"}, {"tags": ["apache", "perl", "odbc", "informix"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1556042508, "post_id": 55814564, "comment_id": 98300565, "body": "It&#39;s only a decade or more since I last did anything with httpd (it would have been 1.3, I think, possibly earlier), but \u2026 Getting environment variables set in httpd requires the correct settings in the config file(s), I believe.  Do you have the configuration backed up from before the update?  Have you looked for differences in the configurations?  Do you have <a href=\"https://httpd.apache.org/docs/current/mod/mod_env.html\" rel=\"nofollow noreferrer\">mod_env</a> installed/enabled?  Does <a href=\"https://stackoverflow.com/questions/3638637/how-to-use-the-setenv-variable-in-apache\">How to use the setEnv variable in Apache?</a> help?"}, {"owner": {"reputation": 406, "user_id": 1879794, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hOga3.jpg?s=128&g=1", "display_name": "MrCleanX", "link": "https://stackoverflow.com/users/1879794/mrcleanx"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1556047063, "post_id": 55814564, "comment_id": 98302444, "body": "Done all of that. Set vars in all the usual places, even a few weird ones just to see (/etc/profile, /etc/environment). No luck. Tired both InformixSDK 3.7 ans 4.1. Very frustrating."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1556058918, "post_id": 55814564, "comment_id": 98306900, "body": "I don&#39;t know whether it is possible for you, but do things start working again if you revert to the old 2.4.6 version of <code>httpd</code>?  Have you scanned the release notes for version 2.4.7 through 2.4.34 to see if there&#39;s anything in there that would be screwing things up?  When you run at the command line, you have all sorts of environment stuff (such as a terminal) that may not apply when run in background. Did you move your Informix software?  By default, DBD::Informix records the value of INFORMIXDIR when it is built and uses that to locate things.  If you move INFORMIXDIR, you may have issues."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1556059143, "post_id": 55814564, "comment_id": 98306959, "body": "There is a build-time environment variable for DBD::Informix called DBD_INFORMIX_RELOCATABLE_INFORMIXDIR which is treated as 0/off by default.  Maybe looking at that will help.  If it used to be able to find <code>libifsql.so</code> and can no longer do so, something has changed \u2014 the key to resolving your problem is determining what has changed.  You may end up having to show which environment variables are set correctly \u2014 because there&#39;s a fairly good chance that at least one of them is not.  Are you using CGI or FastCGI or some other technology for executing the Perl scripts?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1556059450, "post_id": 55814564, "comment_id": 98307038, "body": "Did you change the version of Perl?  The command-line vs background change of behaviour should be studied hard.  Try running the same environment-logging script in the old and new environments to see what&#39;s different."}, {"owner": {"reputation": 1653, "user_id": 7761106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643f7850e7d773cacc701f8b090e13f?s=128&d=identicon&r=PG&f=1", "display_name": "jsagrera", "link": "https://stackoverflow.com/users/7761106/jsagrera"}, "edited": false, "score": 0, "creation_date": 1556094744, "post_id": 55814564, "comment_id": 98316330, "body": "Apache may not be passing LD_LIBRARY_PATH to the module. Just for testing purposes, why not set $INFORMIXDIR/lib and $INFORMIXDIR/lib/esql directories in the /etc/ld.so.conf file (or similar)? At least is will tell you if is just an env problem."}], "answers": [{"tags": [], "owner": {"reputation": 406, "user_id": 1879794, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hOga3.jpg?s=128&g=1", "display_name": "MrCleanX", "link": "https://stackoverflow.com/users/1879794/mrcleanx"}, "is_accepted": true, "score": 0, "last_activity_date": 1557428343, "last_edit_date": 1557428343, "creation_date": 1556135835, "answer_id": 55837668, "question_id": 55814564, "link": "https://stackoverflow.com/questions/55814564/redhat-with-httpd24-connecting-to-informix-using-dbi/55837668#55837668", "title": "Redhat with httpd24 connecting to Informix using DBI", "body": "<p>It would no longer use the LD_LIBRARY_PATH environment variable I was setting in httpd.conf.</p>\n\n<blockquote>\n  <p>Services are started in a fresh environment without any influence of user's environment (like environment variable values). As a consequence, information of all enabled collections will be lost during service start up.</p>\n</blockquote>\n\n<p>Newer versions of httpd have stopped bringing the user environment in when the service is started. I found this little blurb in /opt/rh/httpd24/service-environment.</p>\n\n<pre><code>grep -r \"LD_LIBRARY_PATH\" /opt/rh/httpd24/\n/opt/rh/httpd24/enable:export LD_LIBRARY_PATH=/opt/rh/httpd24/root/usr/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}\n</code></pre>\n\n<p>I prepended the standard informix paths in /opt/rh/httpd24/enable.</p>\n\n<pre><code>export LD_LIBRARY_PATH=/opt/IBM/informix/lib:/opt/IBM/informix/lib/esql:/opt/rh/httpd24/root/usr/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}\n</code></pre>\n\n<p>And everything is back to normal.  Woohoo!</p>\n"}], "owner": {"reputation": 406, "user_id": 1879794, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hOga3.jpg?s=128&g=1", "display_name": "MrCleanX", "link": "https://stackoverflow.com/users/1879794/mrcleanx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 55837668, "answer_count": 1, "score": 2, "last_activity_date": 1557428343, "creation_date": 1556033068, "last_edit_date": 1556042304, "question_id": 55814564, "link": "https://stackoverflow.com/questions/55814564/redhat-with-httpd24-connecting-to-informix-using-dbi", "title": "Redhat with httpd24 connecting to Informix using DBI", "body": "<p>I'm at my wits' end on this. I have 2 RH7 boxes that I just installed httpd24 (v2.4.34) on.  They were running httpd (v2.4.6) without any connection problems. Now when I try and run Perl scripts from the browser, they fail with...</p>\n\n<pre><code>install_driver(Informix) failed: Can't load '/usr/local/lib64/perl5/auto/DBD/Informix/Informix.so' for module DBD::Informix: libifsql.so: cannot open shared object file: No such file or directory at /usr/lib64/perl5/DynaLoader.pm line 190.\n at (eval 5) line 3.\nCompilation failed in require at (eval 5) line 3.\nPerhaps a required shared library or dll isn't installed where expected\n at /var/www/html/app/cgi-bin/test_informix_odbc.cgi line 35.\n</code></pre>\n\n<p>But when I run the same script from the command line, as 'apache', it runs just fine. All the ENV vars are set correctly.</p>\n\n<p>Anyone run into anything similar before?</p>\n"}, {"tags": ["regex", "bash", "perl"], "comments": [{"owner": {"reputation": 5555, "user_id": 1547699, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DfkK6.jpg?s=128&g=1", "display_name": "Sumudu", "link": "https://stackoverflow.com/users/1547699/sumudu"}, "edited": false, "score": 0, "creation_date": 1556030872, "post_id": 55813744, "comment_id": 98294428, "body": "What do you want, value after H?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1556030938, "post_id": 55813744, "comment_id": 98294472, "body": "You need to give us more detail. For this line of input, what output do you want?"}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "edited": false, "score": 0, "creation_date": 1556031244, "post_id": 55813744, "comment_id": 98294668, "body": "I need to get the atom ID (here is H) and bond length between  H and the target atom (here is oxygen)."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1556031351, "post_id": 55813744, "comment_id": 98294743, "body": "I ask again. For this line of input, what output do you want?"}, {"owner": {"reputation": 5555, "user_id": 1547699, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DfkK6.jpg?s=128&g=1", "display_name": "Sumudu", "link": "https://stackoverflow.com/users/1547699/sumudu"}, "edited": false, "score": 0, "creation_date": 1556031448, "post_id": 55813744, "comment_id": 98294817, "body": "@Leon Always post a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>"}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "edited": false, "score": 0, "creation_date": 1556032191, "post_id": 55813744, "comment_id": 98295306, "body": "I want to find the location of H. This is the first step for me to further analyze my data. In this question, I want to find hydrogen bond. So, first, I need to find the location of H. And then i can get the atom ID and related bond length. I tried to avoid the loop, because the time cost is O(n)."}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "reply_to_user": {"reputation": 5555, "user_id": 1547699, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DfkK6.jpg?s=128&g=1", "display_name": "Sumudu", "link": "https://stackoverflow.com/users/1547699/sumudu"}, "edited": false, "score": 0, "creation_date": 1556032725, "post_id": 55813744, "comment_id": 98295678, "body": "@Anubis, thanks for your suggestion. I added the codes to show what I want to do."}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1556032897, "post_id": 55813744, "comment_id": 98295783, "body": "@Dave Cross, thanks for your question, I relied you. I want to get the location of H in an array. I need to locate H location first, and then I can get the bondlength and atom ID."}, {"owner": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "edited": false, "score": 0, "creation_date": 1556033220, "post_id": 55813744, "comment_id": 98295981, "body": "Use of regex will increase the complexity. Anyways, input line will be looped through no matter what tool/algorithm you choose"}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "reply_to_user": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "edited": false, "score": 0, "creation_date": 1556033409, "post_id": 55813744, "comment_id": 98296080, "body": "@oguzismail Thanks for your comment. How about using hash table which has O(1)? I am not sure how to assign a splitted data into a hash. Any suggestion?"}, {"owner": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "edited": false, "score": 0, "creation_date": 1556033651, "post_id": 55813744, "comment_id": 98296217, "body": "Splitting data involves at least one loop."}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "edited": false, "score": 0, "creation_date": 1556033843, "post_id": 55813744, "comment_id": 98296336, "body": "Yes. I understand that. My goal is to reduce those unnecessary loops. For an instance, if I split the string into a harsh table (if I  could, I am searching the history questions and solutions), and then I can search the H in O(1). Any suggestion?"}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "reply_to_user": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "edited": false, "score": 0, "creation_date": 1556034430, "post_id": 55813744, "comment_id": 98296645, "body": "@oguzismail Yes. The function is same to my codes listed in my question. Anyway, thanks for your discussion."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1556042809, "last_edit_date": 1556042809, "creation_date": 1556035071, "answer_id": 55815139, "question_id": 55813744, "link": "https://stackoverflow.com/questions/55813744/how-to-locate-the-data-column-instead-of-character-position-not-using-loop-to-se/55815139#55815139", "title": "How to locate the data column instead of character position NOT using loop to search in Perl and Bash?", "body": "<pre><code>open(FH, \"data.txt\") or die \"Can\u2019t open data.txt: $!\";\n\nwhile(&lt;FH&gt;)\n{\n if (@d=/\\bO\\s+(\\d+)\\s+H\\s+(1\\.[5-9]\\d*|[2-9][\\d.]*)/) {print \"$_\\n\" for @d}\n$ID=$d[0]\n$len=$d[1]\n}\n</code></pre>\n\n<p>each data line only results in ID, put in <code>$d[0]</code>, and bond length, in <code>$d[1]</code> if is greater/equal to 1.5, of <code>@d</code> array</p>\n"}, {"comments": [{"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "edited": false, "score": 0, "creation_date": 1556038001, "post_id": 55815245, "comment_id": 98298549, "body": "Thanks for your reformation. Yes. It becomes clearer in this case. Unfortunately, this is not what I want. I hope to find another way to improve the code efficiency. This search is O(n). For an individual search, it is not a problem. However, for millions of data, it would cost more time. That is why I want to find another way to avoid such searching loop."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1556115853, "last_edit_date": 1556115853, "creation_date": 1556035480, "answer_id": 55815245, "question_id": 55813744, "link": "https://stackoverflow.com/questions/55813744/how-to-locate-the-data-column-instead-of-character-position-not-using-loop-to-se/55815245#55815245", "title": "How to locate the data column instead of character position NOT using loop to search in Perl and Bash?", "body": "<p>Here's your code, reformatted slightly for readability (whitespace is not in short supply!)</p>\n\n<pre><code>$line = \"FRAM_#     20000000      5000000(fs)  CN= 1  PRMRYTGT     16652      O      16654      H  1.036      8140     CA  2.586      7319     AL  1.963\";\n\n@values = split(/\\s+/, $line);\n\nmy ($bondlength, $neighbor_ID);\n\nfor (my $i = 10; $i &lt;= $#values; $i += 3) {\n  if ($values[$i] eq 'H') {\n    $neighbor_ID = $values[$i-1];\n    $bondlength = $values[$i+1];\n  }\n  else {\n    next;\n  }\n}\n</code></pre>\n\n<p>The <code>else</code> clause in your loop is completely unnecessary. The loop will just go on to the next iteration anyway.</p>\n\n<p>One obvious optimisation is to stop looking once you've found the hydrogen atom. So your code would look like this:</p>\n\n<pre><code>$line = \"FRAM_#     20000000      5000000(fs)  CN= 1  PRMRYTGT     16652      O      16654      H  1.036      8140     CA  2.586      7319     AL  1.963\";\n\n@values = split(/\\s+/, $line);\n\nmy ($bondlength, $neighbor_ID);\n\nfor (my $i = 10; $i &lt;= $#values; $i = $+3) {\n  if ($values[$i] eq 'H') {\n    $neighbor_ID = $values[$i-1];\n    $bondlength = $values[$i+1];\n    last; # stop looking once you've found it\n  }\n}\n</code></pre>\n\n<p>I don't know if it's enough of an optimisation to solve all of your problems, but it's a start.</p>\n"}, {"tags": [], "owner": {"reputation": 5555, "user_id": 1547699, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DfkK6.jpg?s=128&g=1", "display_name": "Sumudu", "link": "https://stackoverflow.com/users/1547699/sumudu"}, "is_accepted": false, "score": 0, "last_activity_date": 1556037723, "creation_date": 1556037723, "answer_id": 55815865, "question_id": 55813744, "link": "https://stackoverflow.com/questions/55813744/how-to-locate-the-data-column-instead-of-character-position-not-using-loop-to-se/55815865#55815865", "title": "How to locate the data column instead of character position NOT using loop to search in Perl and Bash?", "body": "<p>It is not clear what exactly the expected result for the given input.\nIf it is the pair of numbers before and after letter <code>H</code>, following will do.</p>\n\n<pre><code>sed -E 's/.*\\s+(\\S+)\\s+H\\s+(\\S+)\\s.*/\\1,\\2/' &lt; input.txt\n</code></pre>\n\n<p>Sample input:</p>\n\n<pre><code>FRAM_#     20000000      5000000(fs)  CN= 1 PRMRYTGT     16652      O      16654      H  1.036      8140     CA  2.586      7319     AL  1.963\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>16654,1.036\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 1, "last_activity_date": 1556053650, "last_edit_date": 1556053650, "creation_date": 1556053295, "answer_id": 55819383, "question_id": 55813744, "link": "https://stackoverflow.com/questions/55813744/how-to-locate-the-data-column-instead-of-character-position-not-using-loop-to-se/55819383#55819383", "title": "How to locate the data column instead of character position NOT using loop to search in Perl and Bash?", "body": "<p>perl: use <code>firstidx</code> from <a href=\"https://metacpan.org/pod/List::MoreUtils\" rel=\"nofollow noreferrer\"><code>List::MoreUtils</code></a></p>\n\n<pre><code>use List::MoreUtils  qw/ firstidx /;\n\nmy $line = '...';\nmy @values = split ' ', $line;\nmy $h_idx = firstidx {$_ eq 'H'} @values;\nprint \"H appears at index $h_idx\\n\";\n</code></pre>\n\n<p>This will use a loop <a href=\"https://metacpan.org/source/REHSACK/List-MoreUtils-0.428/lib/List/MoreUtils/PP.pm#L202\" rel=\"nofollow noreferrer\">under the hood</a>. I don't see how you can avoid it. If your list was sorted, you could use a binary search, but your list is not sorted.</p>\n\n<p>On the other hand, you don't need to split your line in to a list at all, which should save you some time:</p>\n\n<pre><code>my ($neighbour_id, $bond_length) = $line =~ /(\\d+) \\s+ H \\s+ (\\S+)/x;\nreturn $neighbour_id if $bond_length &gt; 1.5;\n</code></pre>\n"}], "owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1556115853, "creation_date": 1556030581, "last_edit_date": 1556038574, "question_id": 55813744, "link": "https://stackoverflow.com/questions/55813744/how-to-locate-the-data-column-instead-of-character-position-not-using-loop-to-se", "title": "How to locate the data column instead of character position NOT using loop to search in Perl and Bash?", "body": "<p>What I want to know is how to locate atom H location (as column number instead of character number) in a string/array using PERL or Bash? I tried to avoid unnecessary loops to search the H because my data has more than million lines. </p>\n\n<p>I have research data shown below</p>\n\n<pre><code>FRAM_#     20000000      5000000(fs)  CN= 1 PRMRYTGT     16652      O      16654      H  1.036      8140     CA  2.586      7319     AL  1.963\n</code></pre>\n\n<p>Where, there are O,H,CA,and AL atoms. The first atom is target atom oxygen, and the rest of them are neighbors which bond with the target oxygen. Except for the first atom (oxygen), the integer number before each atom is the atom ID, and the float number after it is the bond length with the first atom O(ID=16652). </p>\n\n<pre><code>$line = 'FRAM_#     20000000      5000000(fs)  CN= 1    PRMRYTGT     16652'\n        . '      O     16654      H  1.036      8140     CA  2.586'\n        . '     7319     AL  1.963';\n@values = split(/\\s+/, $line);\nmy $bondlength;\nmy $neighbor_ID;\nfor (my $i = 10; $i &lt;= $#values; $i = $+3) {\n  if ($values[$i] eq 'H') {\n    $neighbor_ID = $values[$i-1];\n    $bondlength = $values[$i+1];\n  } else {\n    next;\n  }\n</code></pre>\n\n<p>I can use loop to search the position of H in the array @values. However, is there any other way (not loop), like regex or BASH scripts, to get the position of H in the array? I highly appreciate it if you could provide me extra suggestion and help.</p>\n\n<p>I want to find the hydrogen bond (bond length is longer than 1.5 angstrom) between H and target oxygen. So, I have to get the atom ID of H and related bond length. So, first, I need to find the location of H. And then locate the atom ID and related bond length. And then I can do further data analysis. </p>\n\n<p>NOTE: I have data lines more than 1 million, thus, I have to consider the code efficiency. H is my target atom in this example. In the data lines, the amount of H may be various.</p>\n"}, {"tags": ["xml", "perl", "xslt"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556029556, "post_id": 55813207, "comment_id": 98293641, "body": "It&#39;s literally the first thing mentioned in the docs for XML::LibXSLT"}, {"owner": {"reputation": 25477, "user_id": 1058419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/b5acg.jpg?s=128&g=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/1058419/sam-b"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556029813, "post_id": 55813207, "comment_id": 98293773, "body": "@ikegami I tried this &quot;XML::LibXSLT-&gt;max_depth(1000);&quot; and this is what is thrown to me in my perl run &quot;syntax error at perl_xslt_translator.pl line 6, near &quot;use XML::LibXSLT-&gt;max_depth&quot; BEGIN not safe after errors--compilation aborted at perl_xslt_translator.pl line 7.&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556032447, "post_id": 55813207, "comment_id": 98295503, "body": "No, you didn&#39;t do <code>XML::LibXSLT-&gt;max_depth(1000);</code>. According to the error message, there was a <code>use</code> in there."}, {"owner": {"reputation": 25477, "user_id": 1058419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/b5acg.jpg?s=128&g=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/1058419/sam-b"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556033079, "post_id": 55813207, "comment_id": 98295896, "body": "@ikegami please see my updated question above. I added your suggestion and get another error."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556033403, "post_id": 55813207, "comment_id": 98296076, "body": "Seriously! You&#39;re still not using <code>XML::LibXSLT-&gt;max_depth(1000);</code>."}, {"owner": {"reputation": 1831, "user_id": 11102282, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a4ukS.jpg?s=128&g=1", "display_name": "Alejandro", "link": "https://stackoverflow.com/users/11102282/alejandro"}, "edited": false, "score": 0, "creation_date": 1556038438, "post_id": 55813207, "comment_id": 98298767, "body": "Besides the configuration to allow more space for execution stack, thus more posible recursion, the transformation itself <b>(not shown)</b> is missing some important code design as <a href=\"https://en.wikipedia.org/wiki/Divide-and-conquer_algorithm\" rel=\"nofollow noreferrer\">D&amp;C</a>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1556033217, "creation_date": 1556033217, "answer_id": 55814603, "question_id": 55813207, "link": "https://stackoverflow.com/questions/55813207/perl-adjust-xsltmaxdepth-maxdepth-error/55814603#55814603", "title": "Perl adjust xsltMaxDepth (--maxdepth) error", "body": "<p>As per the docs, simply add the following to your program:</p>\n\n<pre><code>XML::LibXSLT-&gt;max_depth(1000);\n</code></pre>\n\n<p>Do not change <code>use XML::LibXSLT;</code></p>\n\n<p>Do not change <code>my $xslt = XML::LibXSLT-&gt;new();</code></p>\n"}], "owner": {"reputation": 25477, "user_id": 1058419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/b5acg.jpg?s=128&g=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/1058419/sam-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 55814603, "answer_count": 1, "score": 0, "last_activity_date": 1556033217, "creation_date": 1556028687, "last_edit_date": 1556033039, "question_id": 55813207, "link": "https://stackoverflow.com/questions/55813207/perl-adjust-xsltmaxdepth-maxdepth-error", "title": "Perl adjust xsltMaxDepth (--maxdepth) error", "body": "<p>I have simple perl program that reads in an xml file and xslt file and run the transforms against it like this</p>\n\n<p>COMMAND:</p>\n\n<pre><code>perl perl_xslt_translator.pl C000143.xml 04_TestStylesheet.xsl C000143_04.xml PROG123\n</code></pre>\n\n<p>The perl code looks like this. </p>\n\n<p>CODE:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dump qw(dump);\nuse XML::LibXML;\nuse XML::Simple;\nuse XML::LibXSLT;\nuse XML::LibXML;\nuse Data::Dumper;\n\nprint \"Perl Starting ... \\n\\n\"; \n\n#\n# This reads the filename as an argument\n#\n# store the 1st argument into the variable\nmy ($XML_FILE, $XSLT_FILE, $OUTPUT_FILE, $PROGRAM_NAME) = @ARGV;\n\nprint \"XML File: $XML_FILE ... \\n\";\nprint \"XSLT File: $XSLT_FILE ... \\n\";\nprint \"PRGM Name: $PROGRAM_NAME ... \\n\";\nprint \"Output File: $OUTPUT_FILE ... \\n\";\n\n#create output file\nopen(my $output_xml_file_name, '&gt;', $OUTPUT_FILE);\n\nmy %in_params = (\n  PROGRAM      =&gt; \"$PROGRAM_NAME\",\n);\n\n\nmy $parser = XML::LibXML-&gt;new();\nmy $xslt = XML::LibXSLT-&gt;new();\n\nprint \"Reading files ... \\n\\n\";\nmy $source_xml = $parser-&gt;parse_file($XML_FILE);\nmy $xslt_doc = $parser-&gt;parse_file($XSLT_FILE);\n\nmy $stylesheet = $xslt-&gt;parse_stylesheet($xslt_doc);\n\nprint \"Transforming XML ... \\n\\n\";\nmy $results = $stylesheet-&gt;transform($source_xml, XML::LibXSLT::xpath_to_string(%in_params));\n\n\nprint \"Saving XML ... \\n\\n\";\nprint $output_xml_file_name \"$results\";\n\nprint \"\\nPerl End ... \\n\\n\"; \n</code></pre>\n\n<p>The problem I have is that for very large XML files that are 500MB I get the following error. With smaller files of 70 - 100MB it works fine. How can I adjust the maxdepth from 250 to lets say 5000?</p>\n\n<p>OUPUT ERROR:</p>\n\n<pre><code>runtime error: file 04_TestStylesheet.xsl element param\nxsltApplyXSLTTemplate: A potential infinite template recursion was detected.\nYou can adjust xsltMaxDepth (--maxdepth) in order to raise the maximum number of nested template cal\nls and variables/params (currently set to 250).\n</code></pre>\n\n<p>Per one of the user's suggestion below I changed this line to</p>\n\n<pre><code>my $xslt = XML::LibXSLT-&gt;new()-&gt;max_depth(1000);\n</code></pre>\n\n<p>but now I get this error.</p>\n\n<pre><code>Can't locate object method \"parse_stylesheet\" via package \"250\" (perhaps you forgot to load \"250\"?)\nat perl_xslt_translator.pl line 38.\n\nHere line38# my $stylesheet = $xslt-&gt;parse_stylesheet($xslt_doc);\n</code></pre>\n"}, {"tags": ["windows", "perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "edited": false, "score": 0, "creation_date": 1556116730, "post_id": 55812942, "comment_id": 98330012, "body": "try install Msys ~109 mb <a href=\"https://sourceforge.net/projects/mingwbundle/files/latest/download\" rel=\"nofollow noreferrer\">sourceforge.net/projects/mingwbundle/files/latest/download</a> ,  perl 5.28 ~51 mb , if add cpan ~281 mb.. easy linux \\n newline"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556028504, "post_id": 55813048, "comment_id": 98292986, "body": "You could also use <a href=\"https://sourceforge.net/projects/dos2unix/\" rel=\"nofollow noreferrer\"><code>dos2unix</code></a>"}, {"owner": {"reputation": 671, "user_id": 7737781, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aAdetGA1ucY/AAAAAAAAAAI/AAAAAAAAAAo/UxFBJQMwA3g/photo.jpg?sz=128", "display_name": "Quinn Mortimer", "link": "https://stackoverflow.com/users/7737781/quinn-mortimer"}, "edited": false, "score": 0, "creation_date": 1556028914, "post_id": 55813048, "comment_id": 98293253, "body": "Yeah, initially it seemed easier since I already had Perl installed to run a simple substitution."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1556041332, "post_id": 55813048, "comment_id": 98300068, "body": "According to the <a href=\"https://perldoc.pl/PerlIO\" rel=\"nofollow noreferrer\">PerlIO docs</a>, you could set <code>PERLIO=raw</code> in the environment to prevent the default crlf layer. Layers are <i>really</i> strange, and I don&#39;t have a Windows machine to test if it works."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1556028590, "last_edit_date": 1556028590, "creation_date": 1556028151, "answer_id": 55813048, "question_id": 55812942, "link": "https://stackoverflow.com/questions/55812942/perl-writes-lf-as-crlf-on-windows/55813048#55813048", "title": "Perl writes LF as CRLF on Windows", "body": "<p>Windows builds of Perl adds a <code>:crlf</code> layer to handles by default. This converts CRLF to LF on read, and LF to CRLF on write. (Some other languages do something similar.)</p>\n\n<p>You need to tell Perl it's not a text file. Unfortunately, one can't do that with ARGV, the special handle you are using.</p>\n\n<pre><code>perl -pe\"BEGIN { binmode STDOUT }\" example.txt &gt;example.new.txt\nmove example.new.txt example.txt\n</code></pre>\n"}], "owner": {"reputation": 671, "user_id": 7737781, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aAdetGA1ucY/AAAAAAAAAAI/AAAAAAAAAAo/UxFBJQMwA3g/photo.jpg?sz=128", "display_name": "Quinn Mortimer", "link": "https://stackoverflow.com/users/7737781/quinn-mortimer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 55813048, "answer_count": 1, "score": 0, "last_activity_date": 1556028590, "creation_date": 1556027864, "question_id": 55812942, "link": "https://stackoverflow.com/questions/55812942/perl-writes-lf-as-crlf-on-windows", "title": "Perl writes LF as CRLF on Windows", "body": "<p>I have gotten some stray Windows-style line endings in a couple of files and I am trying to resolve it on my Windows machine with the following command:</p>\n\n<pre><code>perl -pi -e s/\\R/\\n/ example.txt\n</code></pre>\n\n<p>After running this all line endings in the files this was run on have been changed to CRLF, which is the opposite of my intention. Why is perl doing this, and is there anything I can change to make this work as I expect it to?</p>\n\n<p>I am using Strawberry Perl version 5.28.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1556015628, "post_id": 55806990, "comment_id": 98285813, "body": "<a href=\"https://perldoc.perl.org/perlfaq8.html#How-do-I-add-a-directory-to-my-include-path-(%40INC)-at-runtime%3f\" rel=\"nofollow noreferrer\">perldoc.perl.org/&hellip;</a>"}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1556031077, "post_id": 55806990, "comment_id": 98294562, "body": "Why not just normally install the CPAN modules your code depends on?"}, {"owner": {"reputation": 1811, "user_id": 9808098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9c44d685cabf03d0555543896b4ba1?s=128&d=identicon&r=PG&f=1", "display_name": "vesii", "link": "https://stackoverflow.com/users/9808098/vesii"}, "reply_to_user": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1556031360, "post_id": 55806990, "comment_id": 98294752, "body": "@robert They are installed but in a different area."}], "answers": [{"comments": [{"owner": {"reputation": 1811, "user_id": 9808098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9c44d685cabf03d0555543896b4ba1?s=128&d=identicon&r=PG&f=1", "display_name": "vesii", "link": "https://stackoverflow.com/users/9808098/vesii"}, "edited": false, "score": 0, "creation_date": 1556015769, "post_id": 55807211, "comment_id": 98285885, "body": "I meant that if I have the following structure: <code>&#47;tools&#47;main&#47;dir1&#47;JSON.pm</code> and <code>&#47;tools&#47;main&#47;dir2&#47;Data.pm</code> I cant use <code>setenv PERL5LIB &#47;tools&#47;main</code> because it fails to find those modules. I have to set the exact path (like <code>&#47;tools&#47;main&#47;dir1&#47;</code> for the first module). I think that its a problem of Perl versions. I use <code>5.14.1</code> and the user uses <code>5.7.1</code>. What configuration to change in order to set the right version from Linux perspective?"}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1556021754, "post_id": 55807211, "comment_id": 98288969, "body": "<code>5.7.1</code>? Are you sure. That version is 18 years old from April 2001 ..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1556023298, "post_id": 55807211, "comment_id": 98289744, "body": "5.7.1 isn&#39;t even production release; it&#39;s a development version meant to allow developers to spot problems with the then-upcoming 5.8 production release before it actually came out."}, {"owner": {"reputation": 1811, "user_id": 9808098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9c44d685cabf03d0555543896b4ba1?s=128&d=identicon&r=PG&f=1", "display_name": "vesii", "link": "https://stackoverflow.com/users/9808098/vesii"}, "edited": false, "score": 0, "creation_date": 1556031431, "post_id": 55807211, "comment_id": 98294801, "body": "I&#39;m sorry, I meant <code>5.8.7</code>. Not sure why I said <code>5.7.1</code>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 1811, "user_id": 9808098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9c44d685cabf03d0555543896b4ba1?s=128&d=identicon&r=PG&f=1", "display_name": "vesii", "link": "https://stackoverflow.com/users/9808098/vesii"}, "edited": false, "score": 0, "creation_date": 1556040724, "post_id": 55807211, "comment_id": 98299774, "body": "@vesii No you are correct. Paths in <code>@INC</code> must be the root directory where modules are installed, they are not recursive - this is important for modules with multiple name components that are stored in subdirectories. So in your case, you must add both <code>&#47;tools&#47;main&#47;dir1</code> and <code>&#47;tools&#47;main&#47;dir2</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1811, "user_id": 9808098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9c44d685cabf03d0555543896b4ba1?s=128&d=identicon&r=PG&f=1", "display_name": "vesii", "link": "https://stackoverflow.com/users/9808098/vesii"}, "edited": false, "score": 0, "creation_date": 1556043111, "post_id": 55807211, "comment_id": 98300845, "body": "@vesii  Is there a problem with adding both? Note, this (<code>PERL5LIB</code>) is a shell variable which your user sets for their account, in their configuration files. You set it as needed for yourself in your files.  So there should be no conflict."}, {"owner": {"reputation": 1811, "user_id": 9808098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9c44d685cabf03d0555543896b4ba1?s=128&d=identicon&r=PG&f=1", "display_name": "vesii", "link": "https://stackoverflow.com/users/9808098/vesii"}, "edited": false, "score": 0, "creation_date": 1556043497, "post_id": 55807211, "comment_id": 98301031, "body": "The problem with <code>PERL5LIB</code> is because the user will have to set every time he will want to run the script. I think that the user should update his Perl version to <code>5.14.1</code> so he could use all of the modules I use, but how to do it?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1811, "user_id": 9808098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9c44d685cabf03d0555543896b4ba1?s=128&d=identicon&r=PG&f=1", "display_name": "vesii", "link": "https://stackoverflow.com/users/9808098/vesii"}, "edited": false, "score": 0, "creation_date": 1556043702, "post_id": 55807211, "comment_id": 98301131, "body": "@vesii  (1)  Well, yes, it is best that the user updates their Perl. They are more than 15 years behind.  (2) If that isn&#39;t possible, they can set <code>PERL5LIB</code> <i>in their shell configuration file</i>  ---  then every Perl program they run will have those directories (that are listed in the <code>PERL5LIB</code> variable) added to its list of directories to search for modules.  They don&#39;t need to &quot;<i>set [it] every time</i>&quot;."}, {"owner": {"reputation": 1811, "user_id": 9808098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9c44d685cabf03d0555543896b4ba1?s=128&d=identicon&r=PG&f=1", "display_name": "vesii", "link": "https://stackoverflow.com/users/9808098/vesii"}, "edited": false, "score": 0, "creation_date": 1556055923, "post_id": 55807211, "comment_id": 98306069, "body": "Oh, I see. Where can I read more about the configuration file?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1811, "user_id": 9808098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9c44d685cabf03d0555543896b4ba1?s=128&d=identicon&r=PG&f=1", "display_name": "vesii", "link": "https://stackoverflow.com/users/9808098/vesii"}, "edited": false, "score": 0, "creation_date": 1556056695, "post_id": 55807211, "comment_id": 98306309, "body": "@vesii I meant the <code>.bashrc</code> (or <code>.tcshrc</code> in your&#39;re in tcsh shell) file.  That&#39;s where you set environment variables, along with many other needs and goodies."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1811, "user_id": 9808098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9c44d685cabf03d0555543896b4ba1?s=128&d=identicon&r=PG&f=1", "display_name": "vesii", "link": "https://stackoverflow.com/users/9808098/vesii"}, "edited": false, "score": 0, "creation_date": 1556057098, "post_id": 55807211, "comment_id": 98306426, "body": "@vesii So if open your <code>.bashrc</code> (or <code>.tcshrc</code> if you&#39;re in tcsh) and add <code>export TEST=value</code> (<code>setenv TEST value</code> in tcsh), then in the future that variable will always be there. Try: once you add that to your <code>.bashrc</code> (or <code>.tcshrc</code>) close that terminal, open another one, and type <code>echo $TEST</code>.  (Instead of closing and opening you can type <code>source .bashrc</code> and the configuration is read in). That&#39;s an environment variable.  That&#39;s what you do with <code>PERL5LIB</code> and it&#39;s always set up as you log in.  So when a Perl program starts it&#39;s there for it."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1556087886, "last_edit_date": 1556087886, "creation_date": 1556008391, "answer_id": 55807211, "question_id": 55806990, "link": "https://stackoverflow.com/questions/55806990/adding-a-path-to-inc-but-not-within-the-perl-script/55807211#55807211", "title": "Adding a path to @INC but not within the Perl script", "body": "<p>From what I can gather of your description, the <code>PERL5LIB</code> seems to be a good solution. </p>\n\n<p>I don't know what you mean by \"<em><code>PERL5LIB</code> checks the modules in the directory but not recursive</em>\", but <code>PERL5LIB</code> is a shell variable, normally set in your shell configuration files (while this can also be done  dynamically), to a <em>list</em> of directories. From <a href=\"https://perldoc.perl.org/perlrun.html#ENVIRONMENT\" rel=\"nofollow noreferrer\">Environment (perlrun)</a>, the <code>PERL5LIB</code> is</p>\n\n<blockquote>\n  <p>A list of directories in which to look for Perl library files before looking in the standard library and the current directory. [...]</p>\n</blockquote>\n\n<p>So you can set it to a suitable list of directories that covers all that is needed.</p>\n\n<p>Make sure that it is an <em>environment</em> variable, by using <a href=\"https://www.tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_02.html#sect_03_02_03\" rel=\"nofollow noreferrer\"><code>export</code> in [ba]sh</a></p>\n\n<pre><code>export PERL5LIB=\"/path/to/dir1:/other/path/dir2:$HOME/inhome/dir3\"\n</code></pre>\n\n<p>where the quotes are there in case there are spaces in directory names.  This line is normally entered in the file <code>~/.bashrc</code></p>\n\n<p>Or, use <code>setenv</code> if in <code>[t]csh</code>, with a following line to add to <code>~/.tcshrc</code></p>\n\n<pre><code>setenv PERL5LIB \"/path/to/dir1:/other/path/dir2:$HOME/inhome/dir3\" \n</code></pre>\n"}], "owner": {"reputation": 1811, "user_id": 9808098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9c44d685cabf03d0555543896b4ba1?s=128&d=identicon&r=PG&f=1", "display_name": "vesii", "link": "https://stackoverflow.com/users/9808098/vesii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2063, "favorite_count": 0, "accepted_answer_id": 55807211, "answer_count": 1, "score": 1, "last_activity_date": 1556126575, "creation_date": 1556007557, "last_edit_date": 1556126575, "question_id": 55806990, "link": "https://stackoverflow.com/questions/55806990/adding-a-path-to-inc-but-not-within-the-perl-script", "title": "Adding a path to @INC but not within the Perl script", "body": "<p>I'm an owner of a tool written in Perl and Java. One of the scripts uses modules like <code>JSON</code> and <code>Data::Dumper</code>.\nMy environment and my <code>@INC</code> know where those modules are located. But a user which uses my tool has an error:</p>\n\n<pre><code>Can't locate JSON.pm in @INC (@INC contains: &lt;PATHS&gt; .) at /tools/bin/myscript.pl line 15.\n</code></pre>\n\n<p>I understand how <code>@INC</code> works and I just wonder what would be the right way to solve this issue. We work at the same company (different regions) so the user does have permissions to the area which contain those modules.\nFrom my side, the scripts works fine because my <code>@INC</code> does contain a path to an area with those modules in it. </p>\n\n<p>From previous threads I have learned that I can set <code>PERL5LIB</code> with the area which contains (not recursive) the package. But that problem feels not good enough because then I'll have to specify multi paths (because JSON and Data::Dumper are not in the same area and <code>PERL5LIB</code> checks the modules in the directory but not recursive).</p>\n\n<p>Also, from previous threads I have learned that I can run <code>perl -I myscript.pl</code> but it does not help because my the tool is mostly Java which executes Perl. Furthermore, I prefer not to change anything at the script itself, rather at the user's environment.</p>\n\n<p>What would be the way to solve that kind of issue? Is there a way to \"push\" a path to <code>@INC</code> from Linux? How to prevent problems like that in the future?</p>\n"}, {"tags": ["perl", "oop", "object", "object-composition"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 1443403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49105adf67076ed2ed6081da1b2fdc70?s=128&d=identicon&r=PG", "display_name": "Nazar", "link": "https://stackoverflow.com/users/1443403/nazar"}, "edited": false, "score": 0, "creation_date": 1555993678, "post_id": 55804296, "comment_id": 98276576, "body": "Could you please tell me following: Is &quot;{ %args, lwp =&gt; LWP::UserAGent-&gt;new }&quot; the same as following code? <code>$args{lwp} = LWP::UserAgent-&gt;new; return bless(\\%args, $class); </code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 35, "user_id": 1443403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49105adf67076ed2ed6081da1b2fdc70?s=128&d=identicon&r=PG", "display_name": "Nazar", "link": "https://stackoverflow.com/users/1443403/nazar"}, "edited": false, "score": 0, "creation_date": 1555994038, "post_id": 55804296, "comment_id": 98276642, "body": "@Nazar Yes, and doing <code>\\%args</code> is a (bit) more efficient than copying it with <code>{ %args }</code>.  However, this is done <i>once</i> per object&#39;s lifetime.  Just how many objects does that code create?  I&#39;d write it out nicely -- i think you really have to, in order to check the user input (the <code>%args</code>)."}, {"owner": {"reputation": 35, "user_id": 1443403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49105adf67076ed2ed6081da1b2fdc70?s=128&d=identicon&r=PG", "display_name": "Nazar", "link": "https://stackoverflow.com/users/1443403/nazar"}, "edited": false, "score": 0, "creation_date": 1555994505, "post_id": 55804296, "comment_id": 98276764, "body": "I don&#39;t think I will create more than 2-3 objects. But just to be flexible I decided to move this logic out of class to instance.  I use Params::ValidationCompiler to validate user* input but not lwp object. Since lwp object is internal and I don&#39;t want user to modify it on constructor step."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 35, "user_id": 1443403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49105adf67076ed2ed6081da1b2fdc70?s=128&d=identicon&r=PG", "display_name": "Nazar", "link": "https://stackoverflow.com/users/1443403/nazar"}, "edited": false, "score": 0, "creation_date": 1555995105, "post_id": 55804296, "comment_id": 98276924, "body": "@Nazar Ah, OK, you have (even proper!) validation in place.  (I don&#39;t know the module but I can expect that it&#39;s good.)"}, {"owner": {"reputation": 35, "user_id": 1443403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49105adf67076ed2ed6081da1b2fdc70?s=128&d=identicon&r=PG", "display_name": "Nazar", "link": "https://stackoverflow.com/users/1443403/nazar"}, "edited": false, "score": 0, "creation_date": 1555995392, "post_id": 55804296, "comment_id": 98277001, "body": "Yep :) Thanks again for your help!"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 4, "last_activity_date": 1555993600, "last_edit_date": 1555993600, "creation_date": 1555993401, "answer_id": 55804296, "question_id": 55804212, "link": "https://stackoverflow.com/questions/55804212/perl-oop-how-to-create-object-of-class-b-in-constructor-of-class-a/55804296#55804296", "title": "Perl/OOP: How to create object of &quot;Class B&quot; in constructor of &quot;Class A&quot;", "body": "<p>Then you need to construct that object as an attribute</p>\n\n<pre><code>use LWP::UserAgent;\n\nsub new {\n    my ($class, %args) = @_;\n\n    return bless { %args, lwp =&gt; LWP::UserAgent-&gt;new }, $class;\n}\n</code></pre>\n\n<p>and now every object of class A will have for attribute <code>lwp</code> its own <code>LWP::UserAgent</code> object.</p>\n\n<p>I would of course expect that in reality this is written out nicely with all requisite error checking.</p>\n"}], "owner": {"reputation": 35, "user_id": 1443403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49105adf67076ed2ed6081da1b2fdc70?s=128&d=identicon&r=PG", "display_name": "Nazar", "link": "https://stackoverflow.com/users/1443403/nazar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 55804296, "answer_count": 1, "score": 1, "last_activity_date": 1591697165, "creation_date": 1555992797, "last_edit_date": 1591697165, "question_id": 55804212, "link": "https://stackoverflow.com/questions/55804212/perl-oop-how-to-create-object-of-class-b-in-constructor-of-class-a", "title": "Perl/OOP: How to create object of &quot;Class B&quot; in constructor of &quot;Class A&quot;", "body": "<p>I have Class A with following constructor:</p>\n\n<pre><code>sub new {\n    my ($class, %args) = @_;\n\n    return bless(\\%args, $class);\n}\n</code></pre>\n\n<p>I have another class, LWP::UserAgent, which I want to use in my Class A.\nI could solve the problem by doing this:</p>\n\n<pre><code>ua = LWP::UserAgent-&gt;new;\n\nsub new {\n    my ($class, %args) = @_;\n\n    return bless(\\%args, $class);\n}\n</code></pre>\n\n<p>But in this case I will have 1 object of UserAgent, but I want a <em>unique</em> object for each instance of my Class A.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1555988213, "post_id": 55803604, "comment_id": 98275549, "body": "This code works for me in a Linux terminal, as it stands.  And it works as intended :).  I have no clue why it doesn&#39;t run for you.  Where do you run it? Can you run any (<i>simplest</i>) program the way you are trying to run this?"}, {"owner": {"reputation": 11, "user_id": 9672826, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156209696122829/picture?type=large", "display_name": "Randy Curtis", "link": "https://stackoverflow.com/users/9672826/randy-curtis"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1555988493, "post_id": 55803604, "comment_id": 98275602, "body": "No, for some reason, I can not get anything to run on my pc, no clue why. I had this issue last lab as well, it ran on school PC&#39;s but not mine, I&#39;m glad I can submit it at least, thank you for that."}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 4, "creation_date": 1555989334, "post_id": 55803604, "comment_id": 98275728, "body": "The quotation marks on the second line (<code>@username = (\u2026)</code>) look like \u201csmart quotes\u201d (<code>\u201c\u201d</code>, not <code>&quot;&quot;</code>). Disable this option in your text editor and retype those characters."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1555993717, "post_id": 55803604, "comment_id": 98276582, "body": "@duskwuff Right, I forgot to mention that I had to fix that.  But, it throws an error and prints it loud and clear?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1555993883, "post_id": 55803604, "comment_id": 98276614, "body": "&quot;<i>I&#39;m glad I can submit it at least, thank you for that.</i>&quot;  -- um, please don&#39;t just take my word for it :).  Yes, it runs, and I checked your menu as well, but I didn&#39;t test properly (and we aren&#39;t even talking about the program design).  Plus, you absolutely do want to fix that.  I don&#39;t use Windows regularly and I don&#39;t know what to suggest :("}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1556030308, "post_id": 55803604, "comment_id": 98294066, "body": "I&#39;ve removed the &quot;padre&quot; tag. The editor that you&#39;re using here is a complete red herring. (Also, Padre has been abandoned - I don&#39;t recommend using it.)"}, {"owner": {"reputation": 48744, "user_id": 40468, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/43722cb1e955874a8eb721e9dfe101d1?s=128&d=identicon&r=PG", "display_name": "Ether", "link": "https://stackoverflow.com/users/40468/ether"}, "edited": false, "score": 1, "creation_date": 1556473745, "post_id": 55803604, "comment_id": 98442687, "body": "You are making things much harder for yourself by not including <code>use strict; use warnings;</code> at the top of your program. You should also add <code>use diagnostics;</code> for more verbose error messages."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1556524994, "post_id": 55803604, "comment_id": 98454534, "body": "<i>it ran on school PC&#39;s but not mine</i> Just a quick, random, thought. Do you have Perl installed on your PC?"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1556016507, "creation_date": 1556016507, "answer_id": 55809567, "question_id": 55803604, "link": "https://stackoverflow.com/questions/55803604/simple-menu-with-array-homework-problem-wont-execute/55809567#55809567", "title": "Simple menu with array homework problem wont execute", "body": "<p>It sounds like you're double-clicking the program in some kind of directory list which starts the program in a command window and then immediately closes - not giving you time to see what message it displays. The solution is, surely, to open your own command window and then type <code>perl your_program_name.pl</code> at the prompt. An already-open command window will not close when the program exits and you will be able to see the error.</p>\n\n<p>(But if I had to guess, I'd suggest that the problem was the \"smart quotes\" in the line where you define <code>@username</code>.)</p>\n"}], "owner": {"reputation": 11, "user_id": 9672826, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156209696122829/picture?type=large", "display_name": "Randy Curtis", "link": "https://stackoverflow.com/users/9672826/randy-curtis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556030240, "creation_date": 1555987649, "last_edit_date": 1556030240, "question_id": 55803604, "link": "https://stackoverflow.com/questions/55803604/simple-menu-with-array-homework-problem-wont-execute", "title": "Simple menu with array homework problem wont execute", "body": "<p>My final lab for my programming and logic intro course will not execute, it has a quick CMD flash on the screen then nothing happens. I'm not sure if it is a syntax error or what. Thank you very much for any help.  </p>\n\n<pre><code>#Part 2 Insert 1.0\n@username=(\u201cfirst\u201d,\u201clast\u201d);\nprint \"Please enter your first name: \";\n$username[0] = &lt;STDIN&gt;;\nchomp $username[0];\n\nprint \"Please enter your last name: \";\n$username[1] = &lt;STDIN&gt;;\nchomp $username[1];\n\nprint \"Your name is:\\n\";\nprint \"$username[0]\\n$username[1]\\n\";\n\nprint \"Please enter a number\\n\";\n$number1 = &lt;STDIN&gt;;\nchomp $number1;\n#Part 2 Insert 1.0 - END\n\n\nprint \"Please enter a second number\\n\";\n$number2 = &lt;STDIN&gt;;\nchomp $number2;\n\nwhile ( $number2 == 0 )\n{\n  print \"You entered $number2\\nPlease enter a non-zero number\\n\";\n  $number2 = &lt;STDIN&gt;;\n  chomp $number2;\n}\n\nprint \"Please enter your first name\\n\";\n$name=&lt;STDIN&gt;;\nchomp $name;\n\nprint \"$name, how many times do you want to run your program?\\n\";\n$total_loops=&lt;STDIN&gt;;\nchomp $total_loops;\n\nprint \"\\n$name, you entered $number1 and $number2\\n\";\n\nfor($ctr=1; $ctr &lt;= $total_loops; $ctr++)\n{\n  print(\"\\nDisplaying $ctr of $total_loops loops \\n\\n\");\n  print(\"Please make a selection using the menu below\\n\");\n  print \"1 - Subtract \\n\";\n  print \"2 - Divide\\n\";\n  print \"3 - Modulus\\n\";\n  print \"4 - Exit\\n\";\n  $answer = &lt;STDIN&gt;;\n  chomp $answer;\n\n#next line edited to use lab4 part 2 array\n  print \"$username[0] $username[1] You selected $answer as your menu choice\\n\\n\";\n\nif($answer == 1)\n{\n  $sub = $number1 - $number2;\n  print(\"$number1 - $number2 is $sub\");\n }\nelsif($answer == 2)\n{\n  $quot = $number1/$number2;\n  print \"$number1 / $number2 is $quot\";\n}\nelsif($answer == 3)\n{\n   $mod=$number1 % $number2;\n   print \"$number1 % $number2 is $mod\";\n }\nelsif($answer == 4)\n{\n    print \"Exiting program\";\n    exit 0;\n }\nelse\n {\n    print \"$answer is not a valid menu choice! Please retry.\";\n  }\n  print (\"\\n\"); #blank line\n}\n</code></pre>\n\n<p>Expected - \nprompt for name and assign to array\nprompt for numbers\nmenu for operation selection \nprint results with assigned name from array</p>\n\n<p>Actual- Quick CMD window flash then nothing</p>\n"}, {"tags": ["perl", "gmp", "pi"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1556028778, "post_id": 55801898, "comment_id": 98293169, "body": "I tested this and I can confirm that it only seems to work for <code>n=7</code> and <code>n=8</code>, when <code>n</code> is greater than 8, the result is not accurate. Your algorithm does not look like the <a href=\"https://en.wikipedia.org/wiki/Chudnovsky_algorithm\" rel=\"nofollow noreferrer\">Python algorithm</a> though.. Have you checked if your algorithm is correct?"}, {"owner": {"reputation": 73, "user_id": 8824214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45321c4b9a3b8d755482ef0322b07958?s=128&d=identicon&r=PG&f=1", "display_name": "K.Minoda", "link": "https://stackoverflow.com/users/8824214/k-minoda"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1556037624, "post_id": 55801898, "comment_id": 98298348, "body": "I believe my algorithm is correct because pi is output correctly when $n is less than 8. I suspect it is failed to convert mpz to mpf. see bellow.      my $x = sr(640320,$n);     $q = mpf($q,$n);     $t = mpf($t,$n);"}, {"owner": {"reputation": 73, "user_id": 8824214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45321c4b9a3b8d755482ef0322b07958?s=128&d=identicon&r=PG&f=1", "display_name": "K.Minoda", "link": "https://stackoverflow.com/users/8824214/k-minoda"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1556053653, "post_id": 55801898, "comment_id": 98305283, "body": "I confirmed I wrote incorrect algorithm... Sorry."}], "owner": {"reputation": 73, "user_id": 8824214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45321c4b9a3b8d755482ef0322b07958?s=128&d=identicon&r=PG&f=1", "display_name": "K.Minoda", "link": "https://stackoverflow.com/users/8824214/k-minoda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1555980835, "creation_date": 1555972125, "last_edit_date": 1555980835, "question_id": 55801898, "link": "https://stackoverflow.com/questions/55801898/why-is-incorrect-value-of-pi-output", "title": "Why is incorrect value of pi output?", "body": "<p>I'm trying to calculate pi using following code that uses Chudnovsky algorithm. When $n is increased, then number of digits after the decimal point. However when $n is small, it can calculate correct value of pi (3.141592...) is output, but when $n is increased, it calculate incorrect value of pi. Why?</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse GMP qw(:all);\nuse GMP::Mpf qw(:all);\nuse GMP::Mpz qw(:all);\nuse GMP::Mpq qw(:all);\n\nmy $n = shift; $n = $n&lt;7?7:$n;\n$n *= 8;\nmy $l = int($n/7) + 1;\n\nmy $fmt = '%.' . $n . 'f';\n\nmy ($p0, $q0, $t0) = (1, 1, 0);\n\n$p0 = mpz($p0);\n$q0 = mpz($q0);\n$t0 = mpz($t0);\n\nmy ($p, $q, $t, $a) = (0, 0, 0, 0);\n\n$p = mpz($p);\n$q = mpz($q);\n$t = mpz($t);\n$t = mpz($a);\n\nfor my $loop (1 .. $l){\n    $p = (2*$loop -1)*(6*$loop -1)*(6*$loop -5);\n    $q = ($loop**3)*(640320**3)/24;\n    $a = (-1)**$loop + (13591409 + 545140134*$loop);\n    $p *= $p0;\n    $q *= $q0;\n    $t = $t0*$p + $a*$p;\n\n    $p0 = $p;\n    $q0 = $q;\n    $t0 = $t;\n}\n\nmy $x = sr(640320,$n);\n$q = mpf($q,$n);\n$t = mpf($t,$n);\n\nmy $pi = mpf(640320,$n)*sr(mpf(640320,$n),$n)*$q;\n$pi /= mpf(12,$n)*($t + mpf(13591409,$n)*$q);\n\nprint $pi . \"\\n\";\n\nsub sr{\n    my ($x,$i) = @_;\n\n    my $s = mpf(0.0,$i);\n    my $s0 = mpf($x,$i);\n\n    for (1 .. $n){\n        $s = 1/$s0;\n        $s *= $x;\n        $s0 = ($s + $s0)/mpf(2.0,$i);\n    }\n    return $s;\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1555940629, "post_id": 55795307, "comment_id": 98259623, "body": "you could try <code>print if &#47;(?:WJ|DS|AP):&#47;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555943059, "post_id": 55795814, "comment_id": 98260772, "body": "Had it negated. Fixed."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1555942797, "last_edit_date": 1555942797, "creation_date": 1555942480, "answer_id": 55795814, "question_id": 55795307, "link": "https://stackoverflow.com/questions/55795307/perl-printing-set-from-another-set/55795814#55795814", "title": "Perl printing set from another set", "body": "<pre><code>next if !/^(?:AP|DS|WJ):\\z/;\n</code></pre>\n\n<hr>\n\n<p>What if we didn't want to hardcode the list.</p>\n\n<p>Prep:</p>\n\n<pre><code>my @to_keep = qw( AP DS WJ );\nmy $to_keep_alt = join '|', map quotemeta, @to_keep;\nmy $to_keep_re = qr/^(?:$to_keep_alt):\\z/;\n</code></pre>\n\n<p>In loop:</p>\n\n<pre><code>next if !/$to_keep_re/;\n</code></pre>\n\n<hr>\n\n<p>A faster way alternative that doesn't require hardcoding the list.</p>\n\n<p>Prep:</p>\n\n<pre><code>my @to_keep = qw( AP DS WJ );\nmy %to_keep = map { \"$_:\" =&gt; 1 } @to_keep;\n</code></pre>\n\n<p>In loop:</p>\n\n<pre><code>next if !$to_keep{$_};\n</code></pre>\n"}], "owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1555942797, "creation_date": 1555940391, "last_edit_date": 1555942688, "question_id": 55795307, "link": "https://stackoverflow.com/questions/55795307/perl-printing-set-from-another-set", "title": "Perl printing set from another set", "body": "<p>I have this script which pretty much just prints a data set from vertical to horizontal. </p>\n\n<p>I was it to skip over some names where are not part of the set that I want. \nHowerver I want to print out just select Initials, while retaining the orders. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper ;\n\nmy $filename = shift @ARGV ;\nopen(my $fh, '&lt;', $filename) or die \"Could not open file $filename $!\";\nwhile (&lt;$fh&gt;) {\n        next if /^$/;\n        chomp $_ ;\n        print $_ ;\n}\n</code></pre>\n\n<p>Pseudocode</p>\n\n<pre><code>if $_ (is one of these WJ: DS: AP: ) \n   print $_\n   else \n   skip, don't print \n</code></pre>\n\n<p>So from this set - </p>\n\n<pre><code>LC:\nNW:\nDS:\nAP:\nII:\nNW:\nKB:\nJK:\nLC:\nDS:\nTM:\nAP: \nWJ: \n</code></pre>\n\n<p>These would NOT get printed to terminal</p>\n\n<pre><code>LC:\nNW:\nII:\nNW:\nKB:\nJK:\nTM:\n</code></pre>\n\n<p>These would get printed to terminal - horizontally with order retained </p>\n\n<pre><code>DS: AP: AP: WJ: \n</code></pre>\n"}, {"tags": ["regex", "string", "file", "perl"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 2, "creation_date": 1555932040, "post_id": 55793117, "comment_id": 98255975, "body": "Why can&#39;t you do <code>perl -nE &#39;BEGIN{open $FH, &quot;&lt;&quot;, &quot;file.txt&quot;; $ex = join &quot;|&quot;, map { quotemeta } split &quot; &quot;, &lt;$FH&gt;;}say &quot;OK&quot; if &#47;^(?!.*(?:$ex)).*$&#47;</code> or something like that? I can&#39;t see any good reason to compact everything inside the regex. Don&#39;t think that &quot;one-liner&quot; == &quot;single regex&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 8665448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69792de021fcee2f29dd73456d5e62c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Kalantas", "link": "https://stackoverflow.com/users/8665448/nikos-kalantas"}, "edited": false, "score": 0, "creation_date": 1555931703, "post_id": 55793382, "comment_id": 98255855, "body": "yes but my big problem is to find a way how to read the content of a local file (.txt) using a one-line perl Regex. If i find that then the difficult part of my problem is over. For example if i have a txt in path [ C:/data.txt ] that contains the word &quot;banned&quot; and i can read it and use it my problem solved by 90%"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 85, "user_id": 8665448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69792de021fcee2f29dd73456d5e62c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Kalantas", "link": "https://stackoverflow.com/users/8665448/nikos-kalantas"}, "edited": false, "score": 0, "creation_date": 1555932170, "post_id": 55793382, "comment_id": 98256013, "body": "A regex pattern defines a set of strings, and a regex match operator checks if a string is in a set of strings defined by a regex pattern. Neither reads files. You&#39;ll have to continue reading the files outside of the match as you are currently doing."}, {"owner": {"reputation": 85, "user_id": 8665448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69792de021fcee2f29dd73456d5e62c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Kalantas", "link": "https://stackoverflow.com/users/8665448/nikos-kalantas"}, "edited": false, "score": 0, "creation_date": 1555932971, "post_id": 55793382, "comment_id": 98256356, "body": "So there is no way to read content from file using a regex pattern?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1555932261, "last_edit_date": 1555932261, "creation_date": 1555931190, "answer_id": 55793382, "question_id": 55793117, "link": "https://stackoverflow.com/questions/55793117/perl-regular-expression-how-to-read-a-string-from-a-file-using/55793382#55793382", "title": "Perl Regular Expression | How to read a string from a file using", "body": "<p>You want to check that every position isn't the start of one of your words, so you actually want</p>\n\n<pre><code>^(?:(?!WORD1|WORD2|...).)*\\z\n</code></pre>\n\n<p>so</p>\n\n<pre><code>my $good_re = qr/^(?:(?!$exclude).)*\\z/s;\n\nif ($string =~ $good_re) {\n   # Good\n} else {\n   # Bad\n}\n</code></pre>\n\n<p>But instead of checking if the string is \"safe\", it's more efficient to check if it's unsafe (then simply invert the result).</p>\n\n<pre><code>my $bad_re = qr/$exclude/;\n\nif ($string =~ $bad_re) {\n   # Bad\n} else {\n   # Good\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 8665448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69792de021fcee2f29dd73456d5e62c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Kalantas", "link": "https://stackoverflow.com/users/8665448/nikos-kalantas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1555932261, "creation_date": 1555929953, "last_edit_date": 1555930237, "question_id": 55793117, "link": "https://stackoverflow.com/questions/55793117/perl-regular-expression-how-to-read-a-string-from-a-file-using", "title": "Perl Regular Expression | How to read a string from a file using", "body": "<p>I'm working on a new project that uses Perl Regular Expression and I'm searching a way to retrieve text from a local-file using a one-line Perl Regular pattern.</p>\n\n<p>I want the regular expression to be in a one line form and note to a coding one like : </p>\n\n<pre><code>         ^(?!.....(?:........)).*$\n</code></pre>\n\n<p>I don't want to have a \"code-like\" form like:</p>\n\n<pre><code>       use warnings;\n       use strict;\n       use feature qw(say);\n\n       use Path::Tiny;\n       my $file = shift // die \"Usage: $0 file\\n\";  #/\n       my @words = split ' ', path($file)-&gt;slurp;\n       my $exclude = join '|', map { quotemeta } @words;\n       foreach my $string (qw(a1testtre orangesh1 apleship3)) \n       { \n           ........\n           ........ \n           }\n        }\n</code></pre>\n\n<p>My final goal is to search (<strong>with one-line Perl regex !!</strong>) the strings of a  txt file and then check if one of them are part of a the string that I'm testing. \nSo far i have create a Perl Regular Expression </p>\n\n<pre><code>  -&gt;        ^(?!.*(?:banned)).*$\n</code></pre>\n\n<p>that check if the string that I'm testing contains the word \"banned\" inside it.</p>\n\n<p>See example here: <a href=\"https://regex101.com/r/toQpCb/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/toQpCb/1</a></p>\n\n<p>now if i can with some way replace the \"banned\" world with the content of the local file (txt) that i want i will be ready. A suitable solution could be something like: </p>\n\n<pre><code>    ^(?!.*(?:\\someway_the_string_from_me_local_txt_file\\)).*$\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 6, "creation_date": 1555923466, "post_id": 55791233, "comment_id": 98252793, "body": "Fight back against these requirements.  They make for passwords that are hard for people to remember but easy for computers to guess.  In particular, junk the 2 classes required and maximum length."}], "answers": [{"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1555925966, "post_id": 55791556, "comment_id": 98253760, "body": "I&#39;m really not a fan of using <code>... and&#47;or return 0</code> rather than <code>if (...) { return 0 }</code> in that context. (otherwise, I agree that using a statement per requirement is better than trying to fit them all in a single regex)"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1555926265, "post_id": 55791556, "comment_id": 98253901, "body": "<code>return 0 if ...;</code> and <code>return 0 unless ...;</code> is nicer, more idiomatic notation too."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1555927844, "post_id": 55791556, "comment_id": 98254490, "body": "@Shawn I disagree. The test is more important, so it comes first. <code>return 0</code> is pretty boring in comparison. (See also: <a href=\"https://perldoc.pl/perlstyle\" rel=\"nofollow noreferrer\">perlstyle</a>)"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1555928399, "post_id": 55791556, "comment_id": 98254702, "body": "See, I think in cases like this, returning an error <i>is</i> the important part."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1555946835, "post_id": 55791556, "comment_id": 98262607, "body": "trying a password cracker is not likely to be feasible in a set-a-password-UI.  there are entropy/blacklist checking libraries that would be good instead, e.g. <a href=\"https://metacpan.org/pod/Data::Password::zxcvbn\" rel=\"nofollow noreferrer\">metacpan.org/pod/Data::Password::zxcvbn</a> (a perl port of the javascript zxcvbn library; see <a href=\"https://lowe.github.io/tryzxcvbn/\" rel=\"nofollow noreferrer\">lowe.github.io/tryzxcvbn</a>)"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 1, "last_activity_date": 1555999814, "last_edit_date": 1555999814, "creation_date": 1555922456, "answer_id": 55791556, "question_id": 55791233, "link": "https://stackoverflow.com/questions/55791233/validate-password-using-regex/55791556#55791556", "title": "Validate password using regex", "body": "<p>The best way to do this is not to use a regex.</p>\n\n<p>A subroutine with separate conditions is much easier to read and maintain:</p>\n\n<pre><code>sub is_password_valid {\n    my ($pw) = @_;\n    $pw =~ m{[^a-zA-Z0-9!\\#+,\\-./:=\\@_]}\n        and return 0;\n    length($pw) &gt;= 10 &amp;&amp; length($pw) &lt;= 32\n        or return 0;\n    $pw =~ /(.)\\1{9}/s\n        and return 0;\n    $pw =~ /^[a-zA-Z0-9]/\n        or return 0;\n    ($pw =~ /[a-zA-Z]/ + $pw =~ /[0-9]/ + $pw =~ /[^a-zA-Z0-9]/) &gt;= 2\n        or return 0;\n    return 1;\n}\n</code></pre>\n\n<p>Or alternatively, since this is basically just one big condition:</p>\n\n<pre><code>sub is_password_valid {\n    my ($pw) = @_;\n    return\n        $pw !~ m{[^a-zA-Z0-9!\\#+,\\-./:=\\@_]} &amp;&amp;\n        length($pw) &gt;= 10 &amp;&amp;\n        length($pw) &lt;= 32 &amp;&amp;\n        $pw !~ /(.)\\1{9}/s &amp;&amp;\n        $pw =~ /^[a-zA-Z0-9]/ &amp;&amp;\n        ($pw =~ /[a-zA-Z]/ + $pw =~ /[0-9]/ + $pw =~ /[^a-zA-Z0-9]/) &gt;= 2\n    ;\n}\n</code></pre>\n\n<hr>\n\n<p>If this isn't a toy validator for a homework exercise, you should change your requirements. It doesn't make sense to \"validate\" passwords with a regex.</p>\n\n<p>You should instead require a minimum length, have a much higher maximum length (maybe 255 characters or so), and not restrict the character set used.</p>\n\n<p>If you want to protect against weak passwords, check against <a href=\"https://haveibeenpwned.com/API/v2#PwnedPasswords\" rel=\"nofollow noreferrer\">haveibeenpwned</a> and let a password cracker (e.g. <a href=\"https://hashcat.net/hashcat/\" rel=\"nofollow noreferrer\">hashcat</a>) have a go at it.</p>\n"}, {"comments": [{"owner": {"reputation": 29866, "user_id": 647053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FyZJb.png?s=128&g=1", "display_name": "Ram Ghadiyaram", "link": "https://stackoverflow.com/users/647053/ram-ghadiyaram"}, "edited": false, "score": 0, "creation_date": 1556035899, "post_id": 55814210, "comment_id": 98297428, "body": "please add some explanation. code only answers are discouraged in SO"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1556032021, "creation_date": 1556032021, "answer_id": 55814210, "question_id": 55791233, "link": "https://stackoverflow.com/questions/55791233/validate-password-using-regex/55814210#55814210", "title": "Validate password using regex", "body": "<pre><code>print \"Enter your password please: \";\n$p=&lt;STDIN&gt;;chomp $p;\n\nif ( $p =~ /(?!^[\\s!#+,-./:=@_])(?=^[\\w!#+,-./:=@]{10,32}$)(?=.*[A-Za-z])(?=.*[0-9])(?=.*[!#+,-./:=@_])(?!.*(.)\\1{9,}).{10,32}/ ) {print \"Welcome\"; f=1}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1556306718, "last_edit_date": 1556306718, "creation_date": 1556248924, "answer_id": 55860387, "question_id": 55791233, "link": "https://stackoverflow.com/questions/55791233/validate-password-using-regex/55860387#55860387", "title": "Validate password using regex", "body": "<p>Instead of creating a sub returning true for valid password, an opposite sub can instead return zero or more error messages.</p>\n\n<p>The advantage is of course that the error messages could be presented to the user to pinpoint exactly which rules are broken if any.</p>\n\n<pre><code>sub pwerr {\n  local $_=pop;\n  my $s='!#+,-./:=@_'; #allowed special chars\n  grep $_,\n  /^[a-z\\d$s]+$/i        ? 0 : \"Password must be just nums, letters and special chars $s\",\n  length()&gt;=10           ? 0 : \"Minimum length of the password is 10\",\n  length()&lt;=32           ? 0 : \"Maximum length of the password is 32\",\n  !/(.)\\1{9}/            ? 0 : \"Same char 10 or more in a row\",\n  /^[a-zA-Z0-9]/         ? 0 : \"First character can not be special character\",\n  1&lt;/[a-z]/i+/\\d/+/[$s]/ ? 0 : \"At least 2 char classes of letters, numbers or special $s\";\n}\n\nuse strict; use warnings; use Test::More tests =&gt; 7;\nsub _test_string { join(\"+\",map{/^(\\S+)/;$1}pwerr(shift()))||undef }\nis(_test_string($$_[0]), $$_[1]) for map[split],grep/\\w/,split/\\n/,q(\n1A!~                               Password+Minimum\nabc                                Minimum+At\nabcd12345-\nabcd12345.\n-abcd12345                         First\nabcd4444444444                     Same\nabcd12345.abcd12345.abcd12345.xyz  Maximum\n);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11393792, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SaiR4kfoihI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY4SRrYRRdwc0QTFbHtmD3epEnFUg/mo/photo.jpg?sz=128", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/11393792/abhishek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1556306718, "creation_date": 1555920769, "last_edit_date": 1556270392, "question_id": 55791233, "link": "https://stackoverflow.com/questions/55791233/validate-password-using-regex", "title": "Validate password using regex", "body": "<p><strong>I am writing a regex to validate the password.</strong> </p>\n\n<p>Below are the password policies that i want to cover : </p>\n\n<ol>\n<li><p>Password can only contain numbers,letters and special character .</p></li>\n<li><p>Minimum length of the password is 10 and maximum length of the password is 32.</p></li>\n<li><p>Same character should not appear consecutively 10 or more times.</p></li>\n<li><p>First character can not be special character.</p></li>\n<li><p>At least 2 character classes are required.(letters, numbers or special characters)</p></li>\n<li><p>Special characters allowed - <code>!#+,-./:=@_</code></p></li>\n</ol>\n\n<p>Regex that will satisfy first 4 conditions except 5th point : </p>\n\n<pre><code>^(?!.*(.)\\1{7})[A-Za-z0-9][\\w!#+,./:=@-]{7,23}\n</code></pre>\n\n<p>How i can validate all the policies together in java ?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 284, "user_id": 5651151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e1679acd3a3d317fa8cae19a7b8deb?s=128&d=identicon&r=PG&f=1", "display_name": "jimav", "link": "https://stackoverflow.com/users/5651151/jimav"}, "edited": false, "score": 1, "creation_date": 1555901662, "post_id": 55788554, "comment_id": 98247302, "body": "Just to clarify: I don&#39;t necessarily have control of the file containing the _<i>DATA_</i> so any tricks which use special code in that file are not feasible.  The information must be obtainable from wherever the filehandle is being read, which may be in another module (e.g. reading from filehandle otherpackagename::DATA)."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555936450, "post_id": 55789086, "comment_id": 98257834, "body": "1) Don&#39;t need to reopen; just seek to 0."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555936524, "post_id": 55789086, "comment_id": 98257860, "body": "2) Note that this approach can give you a false positive (e.g. in the extremely rare even that <code>\\n__DATA__\\n</code> exists in a mutli-line string literal)."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 7, "last_activity_date": 1555907099, "creation_date": 1555907099, "answer_id": 55789086, "question_id": 55788554, "link": "https://stackoverflow.com/questions/55788554/can-a-perl-program-know-the-line-number-where-data-begins/55789086#55789086", "title": "Can a Perl program know the line number where __DATA__ begins?", "body": "<p>In systems that support <code>/proc/&lt;pid&gt;</code> virtual filesystems (e.g., Linux), you can do:</p>\n\n<pre><code># find the file where &lt;DATA&gt; handle is read from\nmy $DATA_FILE = readlink(\"/proc/$$/fd/\" . fileno(*DATA));\n\n# find the line where DATA begins\nopen my $THIS, \"&lt;\", $DATA_FILE;\nmy @THIS = &lt;$THIS&gt;;\nmy ($DATA_LINE) = grep { $THIS[$_] =~ /^__DATA__\\b/ } 0 .. $#THIS;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1555940049, "last_edit_date": 1555940049, "creation_date": 1555936951, "answer_id": 55794613, "question_id": 55788554, "link": "https://stackoverflow.com/questions/55788554/can-a-perl-program-know-the-line-number-where-data-begins/55794613#55794613", "title": "Can a Perl program know the line number where __DATA__ begins?", "body": "<p>File don't actually have lines; they're just sequences of bytes. The OS doesn't even offer the capability of getting a line from a file, so it has no concept of line numbers.</p>\n\n<p>Perl, on the other hand, does keep track of a line number for each handle. It is accessed via <a href=\"https://perldoc.perl.org/perlvar.html#$.\" rel=\"nofollow noreferrer\"><code>$.</code></a>.</p>\n\n<p>However, the Perl handle <code>DATA</code> is created from a file descriptor that's already been moved to the start of the data &mdash;it's the file descriptor that Perl itself uses to load and parse the file&mdash; so there's no record of how many lines have already been read. So the line 1 of <code>DATA</code> is the first line after <code>__DATA__</code>.</p>\n\n<p>To correct the line count, one must seek back to the start of the file, and read it line by line until the file handle is back at the same position it started.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings qw( all );\n\nuse Fcntl qw( SEEK_SET );\n\n# Determines the line number at the current file position without using \u00ab$.\u00bb.\n# Corrects the value of \u00ab$.\u00bb and returns the line number.\n# Sets \u00ab$.\u00bb to \u00ab1\u00bb and returns \u00abundef\u00bb if unable to determine the line number.\n# The handle is left pointing to the same position as when this was called, or this dies.\nsub fix_line_number {\n   my ($fh) = @_;\n   ( my $initial_pos = tell($fh) ) &gt;= 0\n      or return undef;\n   seek($fh, 0, SEEK_SET)\n      or return undef;\n\n   $. = 1;\n   while (&lt;$fh&gt;) {\n      ( my $pos = tell($fh) ) &gt;= 0\n         or last;\n\n      if ($pos &gt;= $initial_pos) {\n         if ($pos &gt; $initial_pos) {\n            seek($fh, $initial_pos, SEEK_SET) \n               or die(\"Can't reset handle: $!\\n\");\n         }\n\n         return $.;\n      }\n   }\n\n   seek($fh, $initial_pos, SEEK_SET)\n      or die(\"Can't reset handle: $!\\n\");\n\n   $. = 1;\n   return undef;\n}\n\nmy $prefix = fix_line_number(\\*DATA) ? \"\" : \"+\";\n\nwhile (&lt;DATA&gt;) {\n   printf \"%s:%s: %s\", __FILE__, \"$prefix$.\", $_;\n}\n\n__DATA__\nfoo\nbar\nbaz\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ ./a.pl\n./a.pl:48: foo\n./a.pl:49: bar\n./a.pl:50: baz\n\n$ perl &lt;( cat a.pl )\n/dev/fd/63:+1: foo\n/dev/fd/63:+2: bar\n/dev/fd/63:+3: baz\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556024907, "post_id": 55804899, "comment_id": 98290716, "body": "perl will set the <code>gp_line</code> field of a <code>GV</code> (the line num which appears in error messages and such) to the first line which brings it into existence -- and if you don&#39;t use the <code>eval</code> in the last snippet, the line will be set to 2 instead of 5."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556027809, "post_id": 55804899, "comment_id": 98292543, "body": "For most people, the &quot;all could be easily done with&quot; solution is probably sufficient, and the best solution presented. Pity it&#39;s hidden. (It doesn&#39;t appear to be sufficient for the OP, however.)"}], "tags": [], "owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "is_accepted": true, "score": 2, "last_activity_date": 1556025334, "last_edit_date": 1592644375, "creation_date": 1555997626, "answer_id": 55804899, "question_id": 55788554, "link": "https://stackoverflow.com/questions/55788554/can-a-perl-program-know-the-line-number-where-data-begins/55804899#55804899", "title": "Can a Perl program know the line number where __DATA__ begins?", "body": "<p>Perl keeps track of the file and line at which each symbol is created. A symbol is normally created when the parser/compiler first encounters it. But if <code>__DATA__</code> is encountered before <code>DATA</code> is otherwise created, this will create the symbol. We can take advantage of this to set the line number associated with the file handle in <code>DATA</code>.</p>\n<p>For the case where the <code>Package::DATA</code> handle is <strong>not</strong> used in <code>Package.pm</code> itself, the line number of the <code>__DATA__</code> token could be obtained via <a href=\"https://perldoc.perl.org/B.html#B%3a%3aGV-Methods\" rel=\"nofollow noreferrer\"><code>B::GV-&gt;LINE</code></a> on the <code>DATA</code> handle:</p>\n<pre><code>$ cat Foo.pm\npackage Foo;\n\n1;\n__DATA__\ngood\nbad\n</code></pre>\n<pre><code>$ perl -I. -MFoo -MB -e '\n   my $ln = B::svref_2object(\\*Foo::DATA)-&gt;LINE;\n   warn &quot;__DATA__ at line $ln\\n&quot;;\n   Foo::DATA-&gt;input_line_number($ln);\n   while(&lt;Foo::DATA&gt;){ die &quot;no good&quot; unless /good/ }\n'\n__DATA__ at line 4\nno good at -e line 1, &lt;DATA&gt; line 6.\n</code></pre>\n<hr />\n<p>In the case where the <code>DATA</code> handle is referenced in the file itself, a possible kludge would be to use an <a href=\"https://perldoc.perl.org/functions/require.html\" rel=\"nofollow noreferrer\"><code>@INC</code> hook</a>:</p>\n<pre><code>$ cat DH.pm\npackage DH;\n\nunshift @INC, sub {\n        my ($sub, $fname) = @_;\n        for(@INC){\n                if(open my $fh, '&lt;', my $fpath = &quot;$_/$fname&quot;){\n                        $INC{$fname} = $fpath;\n                        return \\'', $fh, sub {\n                                our (%ln, %pos);\n                                if($_){ $pos{$fname} += length; ++$ln{$fname} }\n                        }\n                }\n        }\n};\n</code></pre>\n<pre><code>$ cat Bar.pm\npackage Bar;\n\nprint while &lt;DATA&gt;;\n\n1;\n__DATA__\ngood\nbad\n</code></pre>\n<pre><code>$ perl -I. -MDH -MBar -e '\n    my $fn = &quot;Bar.pm&quot;;\n    warn &quot;__DATA__ at line $DH::ln{$fn} pos $DH::pos{$fn}\\n&quot;;\n    seek Bar::DATA, $DH::pos{$fn}, 0;\n    Bar::DATA-&gt;input_line_number($DH::ln{$fn});\n    while (&lt;Bar::DATA&gt;){ die &quot;no good&quot; unless /good/ }\n'\ngood\nbad\n__DATA__ at line 6 pos 47\nno good at -e line 6, &lt;DATA&gt; line 8.\n</code></pre>\n<hr />\n<p>Just for the sake of completion, in the case where you <em>do</em> have control over the file, all could be easily done with:</p>\n<pre><code>print &quot;$.: $_&quot; while &lt;DATA&gt;;\nBEGIN { our $ln = __LINE__ + 1; DATA-&gt;input_line_number($ln) }\n__DATA__\n...\n</code></pre>\n<p>You can also use the first <code>B::GV</code> solution, provided that you reference the <code>DATA</code> handle via an <code>eval</code>:</p>\n<pre><code>use B;\nmy ($ln, $data) = eval q{B::svref_2object(\\*DATA)-&gt;LINE, \\*DATA}; die $@ if $@;\n$data-&gt;input_line_number($ln);\nprint &quot;$.: $_&quot; while &lt;$data&gt;;\n__DATA__\n...\n</code></pre>\n<p>None of these solutions assumes that the source file are seekable (except if you want to read the <code>DATA</code> more than once, as I did in the second example), or try to reparse your files, etc.</p>\n"}, {"tags": [], "owner": {"reputation": 2349, "user_id": 6794384, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153707640356246/picture?type=large", "display_name": "drclaw", "link": "https://stackoverflow.com/users/6794384/drclaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1556005151, "creation_date": 1556005151, "answer_id": 55806404, "question_id": 55788554, "link": "https://stackoverflow.com/questions/55788554/can-a-perl-program-know-the-line-number-where-data-begins/55806404#55806404", "title": "Can a Perl program know the line number where __DATA__ begins?", "body": "<p>Comparing the end of the file to itself in reverse might do what you want:</p>\n\n<pre><code>#!/usr/bin/perl\nopen my $f, \"&lt;\", $0;\nmy @lines;\nmy @dataLines;\npush @lines ,$_ while &lt;$f&gt;;\nclose $f;\npush @dataLines, $_ while &lt;DATA&gt;;\n\nmy @revLines= reverse @lines;\nmy @revDataLines=reverse @dataLines;\nmy $count=@lines;\nmy $offset=0;\n\n$offset++ while ($revLines[$offset] eq $revDataLines[$offset]);\n$count-=$offset;\n\nprint \"__DATA__ section is at line $count\\n\";\n\n__DATA__\nHello there\n\"Some other __DATA__\nlkjasdlkjasdfklj\nljkasdf\n</code></pre>\n\n<p>Running give a output of :</p>\n\n<pre><code>__DATA__ section is at line 19\n</code></pre>\n\n<p>The above script reads itself (using <code>$0</code> for file name) into the <code>@lines</code> array and reads the DATA file into the <code>@dataLines</code> array.</p>\n\n<p>The arrays are reversed and then compared element by element until they are different. The number of lines are tracked in <code>$offset</code> and this is subtracted from the <code>$count</code> variable which is the number of lines in the file.</p>\n\n<p>The result is the line number the DATA section starts at. Hope that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 284, "user_id": 5651151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e1679acd3a3d317fa8cae19a7b8deb?s=128&d=identicon&r=PG&f=1", "display_name": "jimav", "link": "https://stackoverflow.com/users/5651151/jimav"}, "is_accepted": false, "score": 0, "last_activity_date": 1556043441, "creation_date": 1556043441, "answer_id": 55817181, "question_id": 55788554, "link": "https://stackoverflow.com/questions/55788554/can-a-perl-program-know-the-line-number-where-data-begins/55817181#55817181", "title": "Can a Perl program know the line number where __DATA__ begins?", "body": "<p>Thank you @mosvy for the clever and general idea.</p>\n\n<p>Below is a consolidated solution which works anywhere. It uses a symbolic reference instead of eval to avoid mentioning \"DATA\" at compile time, but otherwise uses the same ideas as mosvy.</p>\n\n<p>The important point is that code in a package containing __DATA__ must not refer to the DATA symbol by name so that that symbol won't be created until the compiler sees the __DATA__ token.  The way to avoid mentioning DATA is to use a filehandle ref created at run-time.</p>\n\n<pre><code># Get the DATA filehandle for a package (default: the caller's), \n# fixed so that \"$.\" provides the actual line number in the \n# original source file where the last-read line of data came\n# from, rather than counting from 1.\n#\n# In scalar context, returns the fixed filehandle.\n# In list context, returns ($fh, $filename)\n#\n# For this to work, a package containing __DATA__ must not \n# explicitly refer to the DATA symbol by name, so that the \n# DATA symbol (glob) will not yet be created when the compiler \n# encounters the __DATA__ token.\n#\n# Therefore, use the filehandle ref returned by this \n# function instead of DATA!\n#\nsub get_DATA_fh(;$) {\n  my $pkg = $_[0] // caller;\n\n  # Using a symbolic reference to avoid mentioning \"DATA\" at\n  # compile time, in case we are reading our own module's __DATA__\n  my $fh = do{ no strict 'refs'; *{\"${pkg}::DATA\"} };\n\n  use B;\n  $fh-&gt;input_line_number( B::svref_2object(\\$fh)-&gt;LINE );\n\n  wantarray ? ($fh, B::svref_2object(\\$fh)-&gt;FILE) : $fh\n}\n</code></pre>\n\n<p>Usage examples:</p>\n\n<pre><code>my $fh = get_DATA_fh;  # read my own __DATA__\nwhile (&lt;$fh&gt;) { print \"$. : $_\"; }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my ($fh,$fname) = get_DATA_fh(\"Otherpackage\");\nwhile (&lt;$fh&gt;) {  \n    print \" $fname line $. : $_\";\n}\n</code></pre>\n"}], "owner": {"reputation": 284, "user_id": 5651151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e1679acd3a3d317fa8cae19a7b8deb?s=128&d=identicon&r=PG&f=1", "display_name": "jimav", "link": "https://stackoverflow.com/users/5651151/jimav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 3, "accepted_answer_id": 55804899, "answer_count": 5, "score": 12, "last_activity_date": 1556043441, "creation_date": 1555900920, "question_id": 55788554, "link": "https://stackoverflow.com/questions/55788554/can-a-perl-program-know-the-line-number-where-data-begins", "title": "Can a Perl program know the line number where __DATA__ begins?", "body": "<p>Is there a way to get the line number (and maybe filename) where a <strong>__DATA__</strong> token was coded?  Or some other way to know the actual line number in the original source file where a line of data read from the <em>DATA</em> filehandle came from?</p>\n\n<p>Note that <code>$.</code> counts from 1 when reading from the <code>DATA</code> filehandle.  So if the line number of the <code>__DATA__</code> token were added to <code>$.</code> it would be what I'm looking for.</p>\n\n<p>For example:</p>\n\n<pre><code>#!/usr/bin/perl\nwhile (&lt;DATA&gt;) {\n  my $n = $. + WHAT??;\n  die \"Invalid data at line $n\\n\" if /bad/;\n}\n\n__DATA__\nsomething good\nsomething bad\n</code></pre>\n\n<p>I want this to say \"Invalid data at line 9\", not \"line 2\" (which is what you get if <code>$.</code> is used by itself).</p>\n"}, {"tags": ["perl", "regex-negation", "regex-lookarounds"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555893740, "post_id": 55787648, "comment_id": 98246195, "body": "In your example, the pattern matches at position 0. Position 0 isn&#39;t immediately preceded by <code>golang</code>, and it is the start of a string that matches <code>.*github</code>"}, {"owner": {"reputation": 362892, "user_id": 256196, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d84b558fd67be10d5a718fb94231909d?s=128&d=identicon&r=PG", "display_name": "Bohemian", "link": "https://stackoverflow.com/users/256196/bohemian"}, "edited": false, "score": 0, "creation_date": 1555894366, "post_id": 55787648, "comment_id": 98246286, "body": "Does it need to match <code>&quot;java is a language used in github, but golang is not&quot;</code> (where github <i>precedes</i> golang)?"}], "answers": [{"tags": [], "owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "is_accepted": false, "score": 3, "last_activity_date": 1555896430, "last_edit_date": 1555896430, "creation_date": 1555891147, "answer_id": 55787778, "question_id": 55787648, "link": "https://stackoverflow.com/questions/55787648/look-behind-regex-in-one-liner-perl/55787778#55787778", "title": "Look behind regex in one-liner perl", "body": "<p>Your expression matches all strings with the word \"<code>github</code>\" in them. Let's see why:</p>\n\n<pre><code>/(?&lt;!golang).*github/\n</code></pre>\n\n<p>will match as long as Perl can adjust the <code>.*</code> to match just enough characters to not run into a situation where it's immediately preceded by <code>golang</code>. Regexes being greedy, the <code>.*</code> will match as much as it can while still having the rest of the pattern match.</p>\n\n<p>So if your string is</p>\n\n<pre><code>golang is a language used in github\n</code></pre>\n\n<p>The regex can match by assigning string to different parts:</p>\n\n<ul>\n<li><code>(?&lt;!golang)</code> matches at the beginning of the string</li>\n<li><code>.*</code> gets \"<code>golang is a language used in</code>\"</li>\n<li><code>github</code> gets \"<code>github</code>\"</li>\n</ul>\n\n<p>A potentially costly way to accomplish what you wanted is:</p>\n\n<pre><code>/^(?:(?!golang).)*github/\n</code></pre>\n\n<p>It works by making sure none of the characters preceding \"<code>github</code>\" begin the sequence \"<code>golang</code>\".</p>\n\n<p>So</p>\n\n<pre><code>echo \"java is a language used in github\" | perl -ne 'print q!Not golang: !, /^(?:(?!golang).)*github/ ? q!true! : q!false!'\n</code></pre>\n\n<p>will print out <code>Not golang: true</code> while</p>\n\n<pre><code>echo \"golang is a language used in github\" | perl -ne 'print q!Not golang: !, /^(?:(?!golang).)*github/ ? q!true! : q!false!'\n</code></pre>\n\n<p>will print out <code>Not golang: false</code>.</p>\n\n<hr>\n\n<p>Another (less obfuscated) way is to do two consecutive tests:</p>\n\n<pre><code>/^(.*)github/  and  $1 !~ /golang/\n</code></pre>\n\n<p>If you're doing tens or hundreds of thousands of lines, maybe test both ways to find which is faster?</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555893582, "post_id": 55787824, "comment_id": 98246178, "body": "That will incorrectly fail to match <code>github golang</code>."}], "tags": [], "owner": {"reputation": 362892, "user_id": 256196, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d84b558fd67be10d5a718fb94231909d?s=128&d=identicon&r=PG", "display_name": "Bohemian", "link": "https://stackoverflow.com/users/256196/bohemian"}, "is_accepted": false, "score": -1, "last_activity_date": 1555891739, "creation_date": 1555891739, "answer_id": 55787824, "question_id": 55787648, "link": "https://stackoverflow.com/questions/55787648/look-behind-regex-in-one-liner-perl/55787824#55787824", "title": "Look behind regex in one-liner perl", "body": "<p>Just use a negative look ahead anchored to start:</p>\n\n<pre><code>^(?!.*golang).*github\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1555904330, "creation_date": 1555904330, "answer_id": 55788851, "question_id": 55787648, "link": "https://stackoverflow.com/questions/55787648/look-behind-regex-in-one-liner-perl/55788851#55788851", "title": "Look behind regex in one-liner perl", "body": "<p>improving Bohemian's,</p>\n\n<pre><code>/^(?!.*golang.*github).*github/\n</code></pre>\n"}], "owner": {"reputation": 451, "user_id": 481895, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/85a841e83d9f9ee74ffcbd898a7b2c5d?s=128&d=identicon&r=PG", "display_name": "sebelk", "link": "https://stackoverflow.com/users/481895/sebelk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1555904330, "creation_date": 1555889588, "last_edit_date": 1555893354, "question_id": 55787648, "link": "https://stackoverflow.com/questions/55787648/look-behind-regex-in-one-liner-perl", "title": "Look behind regex in one-liner perl", "body": "<p>I'm trying to make a one-liner script that prints when <code>github</code> is <strong>not</strong> behind <code>golang</code>.</p>\n\n<p>For example, <code>java is a language used in github</code> should match, but <code>golang is a language used in github</code> shouldn't match.</p>\n\n<p>I've tried the expression <code>/(?&lt;!golang).*github/</code>, but it doesn't work.</p>\n\n<pre><code>echo \"golang is a language used in github\" |\n    perl -nle'print /(?&lt;!golang).*github/ ? \"match\" : \"no match\"'\n</code></pre>\n\n<p>This prints <code>match</code> instead of <code>no match</code>.</p>\n\n<p>How can I do that using \"negative look-behind\" in Perl?</p>\n\n<p>(Using Perl v5.28.1)</p>\n"}, {"tags": ["perl", "sftp", "file-transfer", "net-sftp"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555877322, "post_id": 55785130, "comment_id": 98243254, "body": "1) Command lines aren&#39;t secure. Other users on the machine can see your commands including the arguments. As such, tools don&#39;t (shouldn&#39;t) accept passwords as arguments, at least not directly."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555877343, "post_id": 55785130, "comment_id": 98243256, "body": "2) There&#39;s no point in providing a password non-interactively. It would effectively becomes an alternate but weaker key, and it would mean you now have two keys to secure."}, {"owner": {"reputation": 33, "user_id": 11009753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c56ca07bb17f678f8e6abc537b8ca20?s=128&d=identicon&r=PG&f=1", "display_name": "Perl_Devloper", "link": "https://stackoverflow.com/users/11009753/perl-devloper"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555879137, "post_id": 55785130, "comment_id": 98243667, "body": "Exactly, I don&#39;t see any use of password authentication where we are authenticating through keys. I can still acknowledge client&#39;s requirement through Net::SFTP but it only accept publickey, password preferred authentication but client wants to authenticate first with password and then with key. Therefore looking some workaround to implement the same."}], "answers": [{"tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": true, "score": 2, "last_activity_date": 1556005513, "creation_date": 1556005513, "answer_id": 55806484, "question_id": 55785130, "link": "https://stackoverflow.com/questions/55785130/trying-to-implement-dual-authentication-in-sftp/55806484#55806484", "title": "Trying to implement Dual Authentication in SFTP", "body": "<p>Net::SFTP::Foreign tries to detect the case where you set <code>PreferredAuthentications</code> yourself in order to let it pass unchanged. Just that the detection code is not very sophisticated and sometimes it fails. Try doing it as follows:</p>\n\n<pre><code>$sftp=Net::SFTP::Foreign-&gt;new(\"xyz.com\",\n                              user =&gt; \"pqr\",                            \n                              password =&gt; \"1234\",\n                              port =&gt; 2222,                                 \n                              key_path =&gt; \"/home/ddd/.ssh/id_rsa\",\n                              more =&gt; ['-v',\n                                       -o =&gt; 'StrictHostKeyChecking=no',\n                                       -o =&gt; 'UserKnownHostsFile=/dev/null',\n                                       -o =&gt; 'PreferredAuthentications=password,publickey,keyboard-interactive']);\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 11009753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c56ca07bb17f678f8e6abc537b8ca20?s=128&d=identicon&r=PG&f=1", "display_name": "Perl_Devloper", "link": "https://stackoverflow.com/users/11009753/perl-devloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 55806484, "answer_count": 1, "score": 1, "last_activity_date": 1556005513, "creation_date": 1555868244, "last_edit_date": 1556004612, "question_id": 55785130, "link": "https://stackoverflow.com/questions/55785130/trying-to-implement-dual-authentication-in-sftp", "title": "Trying to implement Dual Authentication in SFTP", "body": "<p>As per my client's requirement, I am trying to implement dual authentication (password, key) in SFTP file transfer and the preferred authentication must be in an order of password, public key, keyboard-interaction.</p>\n\n<p>I have tried to achieve this in two ways :</p>\n\n<p>1) Using NET::SFTP::Foreign\nBut this module has default preferred authentication as public key, password and doesn't allow me to override the same with a password, public key even if I am explicitly mentioning in command.</p>\n\n<pre><code>$sftp=Net::SFTP::Foreign-&gt;new(\"xyz.com\",\n                              user=&gt; pqr,                            \n                              password=&gt;1234,\n                              port=&gt;2222,                                 \n                              key_path=&gt;/home/ddd/.ssh/id_rsa,\n                              more=&gt;[-vo=&gt;'StrictHostKeyChecking=no',\n                                     -o=&gt;\"ProxyCommand=/usr/bin/ssh \" .\n                                         \"-o UserKnownHostsFile=/dev/null \".\n                                         \"-o StrictHostKeyChecking=no \".\n                                         \"-oPreferredAuthentications=password,publickey,keyboard-interactive \" .\n                                         \"-oNumberOfPasswordPrompts=1 \" .\n                                         \"-i /home/nnn/.ssh/flsftp \" .\n                                         \"-l flsftp proxyserver.com \" .\n                                         \"nc xyz.com 2222\"]);\n</code></pre>\n\n<p>2) Using SFTP command\nI am able to make the connection manually using SFTP command and enter the password when it prompts but to automate it through Perl I am not able to find a way to pass the password in the command line. I came to know some ways like sshpass or expect but due to security reasons, I can not use either.</p>\n\n<pre><code>sftp -o UserKnownHostsFile=/dev/null \\\n     -o StrictHostKeyChecking=no \\\n     -i /home/ddd/.ssh/id_rsa \\\n     -o PreferredAuthentications=password,publickey,keyboard-interactive \\\n     -o NumberOfPasswordPrompts=1 \\\n     -o 'ProxyCommand=/usr/bin/ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -i /home/nnn/.ssh/flsftp -l flsftp proxyserver.com nc xyz.com 2222' \\\n     pqr@xyz.com\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555791695, "post_id": 55777356, "comment_id": 98226930, "body": "<code>u002c</code> should be <code>\\x{002c}</code> or <code>\\x2c</code> or <code>,</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555791705, "post_id": 55777356, "comment_id": 98226933, "body": "<code>u002e</code> should be <code>\\x{002e}</code> or <code>\\x2e</code> or <code>.</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1555950590, "post_id": 55777356, "comment_id": 98264232, "body": "Note that to print unicode characters properly you will either need to encode it to your terminal&#39;s encoding (most likely UTF-8) or set an encoding layer on STDOUT (<code>use open &#39;:std&#39;, &#39;:encoding(UTF-8)&#39;</code> or <code>-CS</code> on the commandline)."}], "answers": [{"comments": [{"owner": {"reputation": 1643, "user_id": 3552178, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/ykSxS.jpg?s=128&g=1", "display_name": "user3552178", "link": "https://stackoverflow.com/users/3552178/user3552178"}, "edited": false, "score": 0, "creation_date": 1555793094, "post_id": 55777406, "comment_id": 98227217, "body": "Not easy, for period, 4 of them, U+3002\t\u3002\t\te3 80 82\tIDEO&#173;GRAPHIC FULL STOP\tIDEOGRAPHIC PERIOD U+FE52\t\ufe52\t\tef b9 92\tSMALL FULL STOP\tSMALL PERIOD U+FF0E\t\uff0e\t\tef bc 8e\tFULLWIDTH FULL STOP\tFULLWIDTH PERIOD U+FF61\t\uff61\t\tef bd a1\tHALFWIDTH IDEO&#173;GRAPHIC FULL STOP\tHALFWIDTH IDEOGRAPHIC PERIOD"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1555792582, "last_edit_date": 1555792582, "creation_date": 1555791568, "answer_id": 55777406, "question_id": 55777356, "link": "https://stackoverflow.com/questions/55777356/how-to-keep-the-unicode-comma-in-perl-5/55777406#55777406", "title": "How to keep the unicode comma in Perl 5?", "body": "<p>The character in question is U+FF0C FULLWIDTH COMMA</p>\n\n<p>You can use it literally.</p>\n\n<pre><code>s/[^a-zA-Z ,\uff0c.]+//g\n</code></pre>\n\n<p>Alternatively, you can use one of the following in double-quoted and regex literals:</p>\n\n<pre><code>\\N{U+FF0C}\n\\N{FULLWIDTH COMMA}\n\\x{FF0C}\n</code></pre>\n\n<p>For example,</p>\n\n<pre><code>s/[^a-zA-Z ,\\N{U+FF0C}.]+//g\n</code></pre>\n"}], "owner": {"reputation": 1643, "user_id": 3552178, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/ykSxS.jpg?s=128&g=1", "display_name": "user3552178", "link": "https://stackoverflow.com/users/3552178/user3552178"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 55777406, "answer_count": 1, "score": 1, "last_activity_date": 1555792683, "creation_date": 1555791218, "last_edit_date": 1555792683, "question_id": 55777356, "link": "https://stackoverflow.com/questions/55777356/how-to-keep-the-unicode-comma-in-perl-5", "title": "How to keep the unicode comma in Perl 5?", "body": "<p>The $line contains unicode comma.</p>\n\n<pre><code>use strict;\nuse utf8;\n\nmy $line = \"Spy\uff0cqqq\uff0cIwm\";\n\n$line =~ s/[^a-zA-Z u002cu002e]+//g;\nprint $line.\"\\n\";\n</code></pre>\n\n<p>When i run it, i get\n$ perl 1.pl </p>\n\n<p>SpyqqqIwm</p>\n\n<p>Any suggestions ?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 96909, "user_id": 3030305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En2fP.png?s=128&g=1", "display_name": "John1024", "link": "https://stackoverflow.com/users/3030305/john1024"}, "edited": false, "score": 1, "creation_date": 1555788955, "post_id": 55776849, "comment_id": 98226261, "body": "Regular expressions come in many dialects.  You need to specify which one you are using."}, {"owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 0, "creation_date": 1555831403, "post_id": 55776849, "comment_id": 98232589, "body": "I think the second one also matches <code>page 26</code> <a href=\"https://regex101.com/r/GoYcHo/1\" rel=\"nofollow noreferrer\">regex101.com/r/GoYcHo/1</a>"}, {"owner": {"reputation": 173, "user_id": 11154224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mzs3z.jpg?s=128&g=1", "display_name": "B Luthra", "link": "https://stackoverflow.com/users/11154224/b-luthra"}, "edited": false, "score": 0, "creation_date": 1555833941, "post_id": 55776849, "comment_id": 98233047, "body": "you are missing a question mark.It got deleted in the edit"}, {"owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "edited": false, "score": 1, "creation_date": 1555834127, "post_id": 55776849, "comment_id": 98233080, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2301285/what-do-lazy-and-greedy-mean-in-the-context-of-regular-expressions\">What do &#39;lazy&#39; and &#39;greedy&#39; mean in the context of regular expressions?</a>"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 1, "last_activity_date": 1555824034, "last_edit_date": 1555824034, "creation_date": 1555806669, "answer_id": 55778902, "question_id": 55776849, "link": "https://stackoverflow.com/questions/55776849/usage-of-lazy-expressions/55778902#55778902", "title": "Usage of lazy expressions", "body": "<p>Bash regex doesn't support lazy quantifier after <code>*, +, ?</code>, so <code>*? +? ??</code> will outrightly fail<br>\nbut, if () group is referred back by <code>${BASH_REMATCH[1]}</code> command, such;</p>\n\n<pre><code>$ [[ \"apples \" =~ (apples?) ]] &amp;&amp; echo ${BASH_REMATCH[1]}\n</code></pre>\n\n<p><code>apples</code></p>\n\n<pre><code>$ [[ \"page 26\" =~ (.*[0-9]+) ]] &amp;&amp; echo ${BASH_REMATCH[1]}\n</code></pre>\n\n<p><code>page 26</code></p>\n\n<pre><code>$ [[ \"page 26\" =~ .*\\ ([0-9]+) ]] &amp;&amp; echo ${BASH_REMATCH[1]}\n</code></pre>\n\n<p><code>26</code></p>\n\n<p>works</p>\n"}, {"comments": [{"owner": {"reputation": 173, "user_id": 11154224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mzs3z.jpg?s=128&g=1", "display_name": "B Luthra", "link": "https://stackoverflow.com/users/11154224/b-luthra"}, "edited": false, "score": 0, "creation_date": 1555842694, "post_id": 55781714, "comment_id": 98234871, "body": "in  <b>.*?[0-9]*</b> why is this [0-9]* optional .This is not a lazy expression .i thought when when going through the string page 26 when [0-9] returns no value then it should pass expressions on to .*? which should match page too ."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 173, "user_id": 11154224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mzs3z.jpg?s=128&g=1", "display_name": "B Luthra", "link": "https://stackoverflow.com/users/11154224/b-luthra"}, "edited": false, "score": 0, "creation_date": 1555842847, "post_id": 55781714, "comment_id": 98234910, "body": "@BLuthra <code>*</code> means &quot;0 or more&quot;, so it&#39;s effectively optional because it can match 0 times. On the other hand, <code>+</code> means &quot;1 or more&quot;. <code>A+</code> is equivalent to <code>AA*</code>."}, {"owner": {"reputation": 173, "user_id": 11154224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mzs3z.jpg?s=128&g=1", "display_name": "B Luthra", "link": "https://stackoverflow.com/users/11154224/b-luthra"}, "edited": false, "score": 0, "creation_date": 1555845867, "post_id": 55781714, "comment_id": 98235505, "body": "but 0 or more but as it&#39;s greedy won&#39;t it prefer max string over 0 string"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 173, "user_id": 11154224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mzs3z.jpg?s=128&g=1", "display_name": "B Luthra", "link": "https://stackoverflow.com/users/11154224/b-luthra"}, "edited": false, "score": 0, "creation_date": 1555845911, "post_id": 55781714, "comment_id": 98235515, "body": "@BLuthra Yes, but <code>p</code> is not a digit, so the longest possible match at this point is 0."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555847002, "post_id": 55781714, "comment_id": 98235709, "body": "Re &quot;<i>This is a bit pointless because the outer loop already does exactly that.</i>&quot;, Indeed. You can imagine every pattern being preceded by an implicit <code>\\G.*?\\K</code>."}, {"owner": {"reputation": 173, "user_id": 11154224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mzs3z.jpg?s=128&g=1", "display_name": "B Luthra", "link": "https://stackoverflow.com/users/11154224/b-luthra"}, "edited": false, "score": 0, "creation_date": 1555864151, "post_id": 55781714, "comment_id": 98239877, "body": "@melpomene i am again confused in the usage lazy expression  e.g.: o.*?a to find highlighted text in string foobaraz .The answer came out ooba .Shouldn&#39;t it match nothing as it will prefer nothing over one or anything"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 173, "user_id": 11154224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mzs3z.jpg?s=128&g=1", "display_name": "B Luthra", "link": "https://stackoverflow.com/users/11154224/b-luthra"}, "edited": false, "score": 0, "creation_date": 1555864315, "post_id": 55781714, "comment_id": 98239928, "body": "@BLuthra <code>.*?</code> will start by matching nothing, But then <code>a</code> in the regex wants to match an &#39;a&#39;, which fails (the current character is &#39;o&#39;). So then <code>.*?</code> will slowly expand to match more and more until <code>a</code> is satisfied, which happens when <code>.*?</code> matches <code>ob</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555864671, "post_id": 55781714, "comment_id": 98240031, "body": "Re &quot;<i>Shouldn&#39;t it match nothing</i>&quot;, No, it matches the least possible <b>to successfully match at the current position</b>. <code>o.*?a</code> can successfully match <code>ooba</code> at position 0, and to do so, the <code>.*?</code> must match <code>ob</code>."}, {"owner": {"reputation": 173, "user_id": 11154224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mzs3z.jpg?s=128&g=1", "display_name": "B Luthra", "link": "https://stackoverflow.com/users/11154224/b-luthra"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555866781, "post_id": 55781714, "comment_id": 98240557, "body": "@ikegami as I&#39;m using * it&#39;s least is nothing(0 or more ) so why didn&#39;t it match nothing"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555866894, "post_id": 55781714, "comment_id": 98240586, "body": "@B Luthra, It can&#39;t match nothing because the first <code>o</code> isn&#39;t followed by <code>a</code>. So the engine then tries having <code>.*?</code> match one character. The  pattern then still fails to match. So the engine now tries having <code>.*?</code> match two characters. Finally, the pattern matches."}, {"owner": {"reputation": 173, "user_id": 11154224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mzs3z.jpg?s=128&g=1", "display_name": "B Luthra", "link": "https://stackoverflow.com/users/11154224/b-luthra"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555867061, "post_id": 55781714, "comment_id": 98240630, "body": "@ikegami then why didn&#39;t it match page when using /.*?[0-9]*/ as least match should be page"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555867188, "post_id": 55781714, "comment_id": 98240663, "body": "At position 0, the engine tries having <code>.*?</code> match 0 zero characters. So far so good. Still at position 0, the engine matches as many digits as possible. It succeeds in matching zero of them (since there&#39;s a <code>p</code> at position 0). We have a match!"}, {"owner": {"reputation": 173, "user_id": 11154224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mzs3z.jpg?s=128&g=1", "display_name": "B Luthra", "link": "https://stackoverflow.com/users/11154224/b-luthra"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555867475, "post_id": 55781714, "comment_id": 98240734, "body": "@ikegami i am trying to use <b>/.*?[0-9]*/</b> to match the string page 26 but it only matches 26 .in this e.g. it&#39;s(<b>.*?</b>) minimum is 0 but in this o.*?a it&#39;s minimum value become one match .Why"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555867851, "post_id": 55781714, "comment_id": 98240826, "body": "Re &quot;<i>i am trying to use <code>&#47;.*?[0-9]*&#47;</code> to match the string page 26 but it only matches 26</i>&quot;, You are mistaken. It matches zero characters at position 0."}, {"owner": {"reputation": 173, "user_id": 11154224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mzs3z.jpg?s=128&g=1", "display_name": "B Luthra", "link": "https://stackoverflow.com/users/11154224/b-luthra"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555868018, "post_id": 55781714, "comment_id": 98240866, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/192178/discussion-between-b-luthra-and-ikegami\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 2, "last_activity_date": 1555840727, "creation_date": 1555840727, "answer_id": 55781714, "question_id": 55776849, "link": "https://stackoverflow.com/questions/55776849/usage-of-lazy-expressions/55781714#55781714", "title": "Usage of lazy expressions", "body": "<p><code>?</code> means many different things in a regex, depending on context.</p>\n\n<p>When used as a quantifier it means \"optional\". For example, <code>[0-9]?</code> matches 0 or 1 digits (an optional digit).</p>\n\n<p>However, when applied to another quantifier, it means \"non-greedy\". Normal quantifiers try to match as many times as possible (giving up matches only if the rest of the regex would fail otherwise). Non-greedy matching inverts this: It first tries to match as few times as possible and only matches more if the rest of the regex would fail otherwise.</p>\n\n<p>For example, <code>a[a-z]*b</code> applied to <code>abcdebafcbad</code> matches <code>abcdebafcb</code> (or <code>(abcdebafcb)ad</code>(using parentheses to mark the match)). <code>[a-z]*</code> will first consume the whole string, only giving back characters until the following <code>b</code> can match.</p>\n\n<p>However, <code>a[a-z]*?b</code> applied to <code>abcdebafcbad</code> matches <code>ab</code> (or <code>(ab)cdebafcbad</code>(using parentheses to mark the match)). <code>[a-z]*?</code> first starts out by matching no characters at all, and because <code>b</code> is able to match immediately, that's where the regex stops.</p>\n\n<p>As for your examples:</p>\n\n<p>The first thing you need to understand about regexes is the outer loop. There is a loop that tries to invoke the regex engine at every position in the input string, from left to right. If a match is found, the loop stops and reports success. If all positions are exhausted without finding a match, the loop stops and reports failure.</p>\n\n<p>(Strictly speaking we're not looping over the characters in the input string, but over the gaps between characters. <code>ab</code> has 3 possible match positions: before <code>a</code>, between <code>a</code> and <code>b</code>, and after <code>b</code>.)</p>\n\n<p>Your first regex, <code>apples??</code>, is equivalent to <code>apple(?:|s)</code>. We match <code>apple</code> followed by either an empty string or <code>s</code> (i.e. we try to match nothing first). Since the empty regex always matches and this is the end of the regex, there's nothing that could come later on and force us to revisit this decision. The regex is equivalent to just <code>apple</code>.</p>\n\n<p>Your second regex, <code>.*?[0-9]*</code>, is a bit curious. The first thing you should notice is that all parts of it are optional, i.e. it can match a string of length 0. Because an empty string can be matched anywhere in the input and the outer loop mentioned above starts at offset 0, this regex will always match at the beginning of the input string.</p>\n\n<p>The second thing to notice is that it attempts to reimplement the outer loop within the regex: <code>.*?</code> will consume 0 characters at first, then (if the rest of the regex doesn't match) 1 characters, then 2, ... until a match is found. This is a bit pointless because the outer loop already does exactly that.</p>\n\n<p>If the input string is <code>page 26</code>, <code>.*?</code> will start out by matching as few characters as possible, i.e. none. Then <code>[0-9]*</code> will try to match as many digits as possible, but <code>p</code> is not a digit, so \"as many as possible\" is also none. Thus <code>.*?[0-9]*</code> matches the empty string at the beginning of <code>page 26</code>: <code>()page26</code> (using parentheses to mark the match).</p>\n\n<p>Your third regex, <code>.*?[0-9]+</code>, still contains that redundant explicit loop at the beginning, <code>.*?</code>. But now the digits part is not optional: <code>[0-9]+</code> requires at least one digit to match.</p>\n\n<p>If the input string is <code>page 26</code>, <code>.*?</code> will start out by matching as few characters as possible, i.e. none. Then <code>[0-9]+</code> will try to match as many digits as possible, but at least one. This fails because <code>p</code> is not a digit. Because <code>[0-9]+</code> failed, we backtrack into <code>.*?</code> and try to consume one more character (<code>p</code>). Then we try <code>[0-9]+</code> against the remaining input string, <code>age 26</code>. This also fails; we backtrack and consume one more character in <code>.*?</code> (<code>pa</code>). Then we try <code>[0-9]+</code> against <code>ge 26</code>, which still fails. ...</p>\n\n<p>This continues until <code>.*?</code> has consumed <code>page&nbsp;</code>. At this point <code>[0-9]+</code> finally finds a digit to match, <code>2</code>. Because <code>+</code> is greedy, we consume all available digits at this position, <code>26</code>. The final match is <code>(page 26)</code> (i.e. the whole input string) with <code>.*?</code> matching <code>page&nbsp;</code> and <code>[0-9]+</code> matching <code>26</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1555892611, "last_edit_date": 1555892611, "creation_date": 1555868055, "answer_id": 55785106, "question_id": 55776849, "link": "https://stackoverflow.com/questions/55776849/usage-of-lazy-expressions/55785106#55785106", "title": "Usage of lazy expressions", "body": "<p>[ <em>This complements the existing answers rather than being an answer in of itself.</em> ]</p>\n\n<p>The following shows the matching process for the examples you provided. (The regex engine may actually take invisible shortcuts to increase performance.)</p>\n\n<hr>\n\n<pre><code>#0123456\n\"apples\" =~ /apples??/\n</code></pre>\n\n<ol>\n<li>At position 0, <code>apple</code> matches 5 characters \u21d2 Position 5.\n\n<ol>\n<li>At position 5, <code>s??</code> matches 0 characters* \u21d2 Position 5.\n\n<ol>\n<li>Success! Pattern matches 5 characters starting at position 0 (<code>\"apple\"</code>)!</li>\n</ol></li>\n</ol></li>\n</ol>\n\n<hr>\n\n<pre><code>#01234567\n\"page 26\" =~ /.*?[0-9]*/\n</code></pre>\n\n<ol>\n<li>At position 0, <code>.*?</code> matches 0 characters* \u21d2 Position 0.\n\n<ol>\n<li>At position 0, <code>[0-9]*</code> matches 0 characters \u21d2 Position 0.\n\n<ol>\n<li>Success! Pattern matches 0 characters starting at position 0 (<code>\"\"</code>)!</li>\n</ol></li>\n</ol></li>\n</ol>\n\n<hr>\n\n<pre><code>#01234567\n\"page 26\" =~ /.*?[0-9]+/\n</code></pre>\n\n<ol>\n<li>At position 0, <code>.*?</code> matches 0 characters* \u21d2 Position 0.\n\n<ol>\n<li>At position 0, <code>[0-9]+</code> fails to match \u21d2 Backtrack!</li>\n</ol></li>\n<li>At position 0, <code>.*?</code> matches 1 character \u21d2 Position 1.\n\n<ol>\n<li>At position 1, <code>[0-9]+</code> fails to match \u21d2 Backtrack!</li>\n</ol></li>\n<li>At position 0, <code>.*?</code> matches 2 character \u21d2 Position 2.\n\n<ol>\n<li>At position 2, <code>[0-9]+</code> fails to match \u21d2 Backtrack!</li>\n</ol></li>\n<li>At position 0, <code>.*?</code> matches 3 character \u21d2 Position 3.\n\n<ol>\n<li>At position 3, <code>[0-9]+</code> fails to match \u21d2 Backtrack!</li>\n</ol></li>\n<li>At position 0, <code>.*?</code> matches 4 character \u21d2 Position 4.\n\n<ol>\n<li>At position 4, <code>[0-9]+</code> fails to match \u21d2 Backtrack!</li>\n</ol></li>\n<li>At position 0, <code>.*?</code> matches 5 character \u21d2 Position 5.\n\n<ol>\n<li>At position 5, <code>[0-9]+</code> matches 2 characters \u21d2 Position 7.\n\n<ol>\n<li>Success! Pattern matches 7 characters starting at position 0 (<code>\"page 26\"</code>)!</li>\n</ol></li>\n</ol></li>\n</ol>\n\n<hr>\n\n<pre><code>#01234\n\"ooba\" =~ /o.*?a/\n</code></pre>\n\n<ol>\n<li>At position 0, <code>o</code> matches 1 character \u21d2 Position 1.\n\n<ol>\n<li>At position 1, <code>.*?</code> matches 0 characters* \u21d2 Position 1.\n\n<ol>\n<li>At position 1, <code>a</code> fails to match \u21d2 Backtrack!</li>\n</ol></li>\n<li>At position 1, <code>.*?</code> matches 1 characters \u21d2 Position 2.\n\n<ol>\n<li>At position 2, <code>a</code> fails to match \u21d2 Backtrack!</li>\n</ol></li>\n<li>At position 1, <code>.*?</code> matches 2 characters \u21d2 Position 3.\n\n<ol>\n<li>At position 3, <code>a</code> matches 1 character \u21d2 Position 4.\n\n<ol>\n<li>Success! Pattern matches 4 characters starting at position 0 (<code>\"ooba\"</code>)!</li>\n</ol></li>\n</ol></li>\n</ol></li>\n</ol>\n\n<hr>\n\n<p>* &mdash;  Non-greedy because of the <code>?</code>, so start by trying to match the least possible at the current position.</p>\n"}], "owner": {"reputation": 173, "user_id": 11154224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mzs3z.jpg?s=128&g=1", "display_name": "B Luthra", "link": "https://stackoverflow.com/users/11154224/b-luthra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 1, "accepted_answer_id": 55781714, "answer_count": 3, "score": 0, "last_activity_date": 1555892611, "creation_date": 1555787522, "last_edit_date": 1555833907, "question_id": 55776849, "link": "https://stackoverflow.com/questions/55776849/usage-of-lazy-expressions", "title": "Usage of lazy expressions", "body": "<p>I am trying to learn regex and I fail to understand the differences in the usage of many code </p>\n\n<pre><code>/apples??/\n</code></pre>\n\n<pre><code>/.*?[0-9]*/\n</code></pre>\n\n<pre><code>/.*?[0-9]+/\n</code></pre>\n\n<p>On the result I understood that if I use <code>?</code> with  any thing it makes that step optional (or just neglecting it)</p>\n\n<p>e.g.:\nthe first command will only match <code>apple</code> and not <code>apples</code>\nthe second command will match <code>26</code> in <code>page 26</code></p>\n\n<p>I expected that the 3rd command will do the same but it matched the whole <code>page 26</code> string.</p>\n"}, {"tags": ["perl", "system", "diff"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555785331, "post_id": 55776574, "comment_id": 98225415, "body": "Algorithm::Diff does the work for Text::Diff, and it&#39;s written in Perl. It&#39;s not going to be faster"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1555786191, "post_id": 55776574, "comment_id": 98225625, "body": "@ikegami There is also <a href=\"https://metacpan.org/pod/Algorithm::Diff::XS\" rel=\"nofollow noreferrer\">Algorithm::Diff::Xs</a>"}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1555786222, "post_id": 55776574, "comment_id": 98225634, "body": "@ikegami If the files are all really small, running the comparison in-process might still be an improvement. This would be especially true if the OP is on an operating system which is slow to launch processes, like Windows."}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 6, "last_activity_date": 1555785221, "creation_date": 1555785221, "answer_id": 55776574, "question_id": 55776492, "link": "https://stackoverflow.com/questions/55776492/perl-need-to-call-systemdiff-over-and-over/55776574#55776574", "title": "Perl - Need to call system(&#39;diff&#39;) over and over", "body": "<blockquote>\n  <p>I'm wondering if there's some way to make the shell or program persistent (or something) such that it doesn't have the big overhead every time.</p>\n</blockquote>\n\n<p>Not really. <code>diff</code> is kind of inherently a one-shot tool; it doesn't have any persistent mode.</p>\n\n<p>What you may want to have a look at, though, is the <a href=\"https://metacpan.org/pod/Text::Diff\" rel=\"noreferrer\">Text::Diff</a> module. It can generate output in the same format as the <code>diff</code> utility.</p>\n"}], "owner": {"reputation": 195, "user_id": 10305221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa08ecccef1aae6a730f3806d9784727?s=128&d=identicon&r=PG&f=1", "display_name": "Duke Leto", "link": "https://stackoverflow.com/users/10305221/duke-leto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 55776574, "answer_count": 1, "score": 2, "last_activity_date": 1555785221, "creation_date": 1555784625, "question_id": 55776492, "link": "https://stackoverflow.com/questions/55776492/perl-need-to-call-systemdiff-over-and-over", "title": "Perl - Need to call system(&#39;diff&#39;) over and over", "body": "<p>I have a batch processing system that needs to run the same shell command over and over again.</p>\n\n<pre><code>while (x)\n{\n  if (y)\n  {\n    $diff = `diff $f1 $f2`;\n    ...\n  }\n  else\n  {\n    ...\n...\n</code></pre>\n\n<p>This is a bit slow so I'm wondering if there's some way to make the shell or program persistent (or something) such that it doesn't have the big overhead every time.</p>\n\n<p>Note that I cannot really consider writing my own <code>diff</code> function as the actual output needs to look like it did come from that program.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "perl", "ssl", "tcp"], "comments": [{"owner": {"reputation": 157, "user_id": 964263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5ac34bc43f10d280e7fbdf459a0d443?s=128&d=identicon&r=PG", "display_name": "manchicken", "link": "https://stackoverflow.com/users/964263/manchicken"}, "edited": false, "score": 0, "creation_date": 1555820828, "post_id": 55769264, "comment_id": 98231078, "body": "If this is only for that one server, how have you ruled out that they aren&#39;t just trying to prevent this sort of thing?"}, {"owner": {"reputation": 173, "user_id": 5587018, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16ec6e1761227fb76e04356f9aa55d29?s=128&d=identicon&r=PG&f=1", "display_name": "philippe_44", "link": "https://stackoverflow.com/users/5587018/philippe-44"}, "reply_to_user": {"reputation": 157, "user_id": 964263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5ac34bc43f10d280e7fbdf459a0d443?s=128&d=identicon&r=PG", "display_name": "manchicken", "link": "https://stackoverflow.com/users/964263/manchicken"}, "edited": false, "score": 0, "creation_date": 1555912579, "post_id": 55769264, "comment_id": 98249245, "body": "I&#39;m waiting for their answer, but I&#39;m 99% sure they don&#39;t. It&#39;s not I&#39;m trying to speed download, it&#39;s just streaming at normal speed (in average)"}], "owner": {"reputation": 173, "user_id": 5587018, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16ec6e1761227fb76e04356f9aa55d29?s=128&d=identicon&r=PG&f=1", "display_name": "philippe_44", "link": "https://stackoverflow.com/users/5587018/philippe-44"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1555820496, "creation_date": 1555720857, "last_edit_date": 1555820496, "question_id": 55769264, "link": "https://stackoverflow.com/questions/55769264/ssl-connection-fails-when-stalled-every-5s", "title": "SSL connection fails when stalled every ~5s", "body": "<p>I have a Perl streaming application that GET some file through HTTPS (for RadioParadise). The TCP flow is often paused for a few seconds because the player buffers a lot. As a result, the connection very often breaks/ends early. </p>\n\n<p>I've taken various TCP logs and wireshark seems to be all confused and whines about Changing Cipher Spec and Ignored Unknown records. Obviously, the Change Cipher packets are wrong and do not match re-handshaking, there is something funny in the packets. What the logs surely shows is in the case of early termination, the server is closing the TCP connection (proper FIN frame)</p>\n\n<p>I've written a small Perl example that throttles the download by using varous length pauses to show what happens. If the download is not paused by more than 1 sec, then this does not happen. When it is paused by 5s, it always happens at some point of the download. Server's openSSL is 1.0.2k and I've tried client 1.1.0j and various version from 0.9.8 to 1.0.2. I've tried also various Perl versions, no change</p>\n\n<p>(it's just an example that actually shows the problem, not supposed to be proper code)</p>\n\n<p>I've also written the same application in C to eliminate Perl as a potential problem and got exactly the same result. </p>\n\n<p>I've also tried other HTTPS server and they do not have the same problem, it seems to be related to RP's. Maybe somebody would have an idea of what I should look at for further investigation as currently, I don't know in what direction to continue. Some general advice on why pausing for 5 sec would make any difference at TCP or SSL level (it's not a SO_KEEPALIVE issue).</p>\n\n<p>NB: there is no packet lost by kernel in my tcpdump</p>\n\n<pre><code>\nuse IO::Socket::SSL;\nuse Net::SSLeay;\nuse IO::Select;\n\n$IO::Socket::SSL::DEBUG = 3;\n$Net::SSLeay::trace = 3;\n\nmy $sock = IO::Socket::SSL-&gt;new(\n        Timeout  =&gt; 15,\n        PeerAddr =&gt; '23.29.117.2',\n        PeerPort =&gt; 443,\n        SSL_startHandshake =&gt; 1,\n        SSL_verify_mode =&gt; Net::SSLeay::VERIFY_NONE()       # SSL_VERIFY_NONE isn't recognized on some platforms?!?, and 0x00 isn't always \"right\"\n    ) or do {\n        print(\"Couldn't create socket binding to $!\");\n        return undef;\n    };\n\n\nmy $sel = IO::Select-&gt;new($sock);   \nmy $start = time;\n\nuse constant SLEEP =&gt; 5;\n\nsyswrite ($sock, \"GET /blocks/chan/0/4/1835801-1835807.flac HTTP/1.0\\r\\n\\r\\n\");\nsysread( $sock, my $data, 512 );\nprint $data;\n\n$sock-&gt;blocking(0);\n\nmy $total;\nmy $sum;\n\nwhile (1) {\n    my $bytes = sysread( $sock, my $data, 8192 );\n\n    next if !defined $bytes;\n    last if !$bytes;\n\n    $total += $bytes;\n    $sum += $bytes;\n    print \"$total \", int ($total/(time() - $start)/1000), \" kB/s       \\r\" if  time() - $start;\n    if ($sum &gt; SLEEP*1024*1024/8) {\n        sleep(SLEEP);\n        $sum = 0;\n    }\n}\n\nprint(\"\\nfinished $total\\n\");\n$sock-&gt;close();\n</code></pre>\n"}, {"tags": ["perl", "systemd"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555801716, "post_id": 55769057, "comment_id": 98228789, "body": "&quot;Nothing seems to happen on boot&quot; is not an adequate description of a problem. Did you even check if the script is run? If so, it would have created a file or generated an error message at the very least."}, {"owner": {"reputation": 157, "user_id": 964263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5ac34bc43f10d280e7fbdf459a0d443?s=128&d=identicon&r=PG", "display_name": "manchicken", "link": "https://stackoverflow.com/users/964263/manchicken"}, "edited": false, "score": 0, "creation_date": 1555822501, "post_id": 55769057, "comment_id": 98231283, "body": "This seems <i>very</i> risky from a security perspective. How are you going to mitigate the risk of everybody being able to write to that path?"}, {"owner": {"reputation": 19, "user_id": 11386236, "user_type": "registered", "profile_image": "https://graph.facebook.com/10103519092457554/picture?type=large", "display_name": "Sarah Foster", "link": "https://stackoverflow.com/users/11386236/sarah-foster"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555951473, "post_id": 55769057, "comment_id": 98264639, "body": "@ikegami, the script doesn&#39;t run as far as I can tell. journalctl yields: ``` -- Reboot -- Apr 22 16:35:31 &lt;hostname&gt; systemd[1]: Cannot add dependency job for unit onetimerun.service, ignoring: Unit not found. Apr 22 16:35:31 &lt;hostname&gt; systemd[1]: Cannot add dependency job for unit onetimerun.service, ignoring: Unit not found. ``` I put a script in the relevant directory to plop something in my homedir, but it did nothing. As far as I can tell, though, the way I&#39;m targeting things isn&#39;t unusual."}, {"owner": {"reputation": 19, "user_id": 11386236, "user_type": "registered", "profile_image": "https://graph.facebook.com/10103519092457554/picture?type=large", "display_name": "Sarah Foster", "link": "https://stackoverflow.com/users/11386236/sarah-foster"}, "reply_to_user": {"reputation": 157, "user_id": 964263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5ac34bc43f10d280e7fbdf459a0d443?s=128&d=identicon&r=PG", "display_name": "manchicken", "link": "https://stackoverflow.com/users/964263/manchicken"}, "edited": false, "score": 1, "creation_date": 1555951623, "post_id": 55769057, "comment_id": 98264713, "body": "@manchicken: You&#39;re not wrong; it&#39;s definitely a bit sketch. The only thing that makes it secure-ish is that I&#39;m using it myself, setting it up, and immediately rebooting. Idea being that I can do a thing, stage something to happen immediately after reboot, then reboot to complete it. A savvy malicious actor would watch for changes in that dir and write something to it between the script run and the reboot, but that will be seconds at most and the service deletes itself once completed. (The whole goal is to leave the system config untouched post-exec.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555951704, "post_id": 55769057, "comment_id": 98264756, "body": "Re &quot;<i>the script doesn&#39;t run as far as I can tell</i>&quot;, In that case, this isn&#39;t a Perl problem. It&#39;s not even a programming problem, so you&#39;re not even on the right site. Most importantly, you&#39;ve provide no information about the problem. (What system, why you think it should be executed at startup, etc)"}, {"owner": {"reputation": 19, "user_id": 11386236, "user_type": "registered", "profile_image": "https://graph.facebook.com/10103519092457554/picture?type=large", "display_name": "Sarah Foster", "link": "https://stackoverflow.com/users/11386236/sarah-foster"}, "edited": false, "score": 0, "creation_date": 1555954361, "post_id": 55769057, "comment_id": 98265952, "body": "This is certainly not the only sysadmin-y problem on this site, and there are certainly concerns around syntax for which I am requesting help. If you don&#39;t have the familiarity with systemd to understand, given where I&#39;m putting the script and how I&#39;m enabling it from within the Perl, why I&#39;d expect it to work on boot then that&#39;s fine, but this is absolutely a reasonable place for this. I&#39;ve even given details regarding the fact that it does work when I fire it off manually. This would be sufficient detail for anyone working meaningfully with systemd."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555962617, "post_id": 55769057, "comment_id": 98269356, "body": "Re &quot;<i>This is certainly not the only sysadmin-y problem on this site</i>&quot;, Irrelevant. HOWEVER. What you didn&#39;t make clear is that there are two scripts, one that sets up the other to run on reboot. In that case, it could be a Perl problem. But if so, you didn&#39;t say which step is failing. Is that the case? Is one of the steps failing (A programming problem), or is it a question of not knowing what to do? I can help you with the former but not the latter. (Note that it&#39;s a fluke that I noticed your reply because you didn&#39;t tag me.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555962623, "post_id": 55769057, "comment_id": 98269357, "body": "As an aside, using <code>tmp</code> seems really weird. On some of the machines I&#39;ve used, that gets wiped on reboot. And others didn&#39;t allow executables as a security precaution."}, {"owner": {"reputation": 19, "user_id": 11386236, "user_type": "registered", "profile_image": "https://graph.facebook.com/10103519092457554/picture?type=large", "display_name": "Sarah Foster", "link": "https://stackoverflow.com/users/11386236/sarah-foster"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556040957, "post_id": 55769057, "comment_id": 98299890, "body": "@ikegami, good note on /tmp/; I&#39;ve tried setting the new directory to live in /etc/. I still get the &quot;cannot add dependency&quot; error. When I fire it off manually using systemctl, I get: <code>Apr 23 17:30:47 &lt;nope&gt; systemd[1]: Starting one-time executor for ad-hoc boot scripts...</code> <code>Apr 23 17:30:47 &lt;nope&gt; runwrangler.pl[5710]: $VAR1 = &#39;&#47;etc&#47;one-time-run&#47;scripts&#47;testThing.sh&#39;;</code> <code>Apr 23 17:30:47 &lt;nope&gt; runwrangler.pl[5710]: Failed to run &#47;etc&#47;one-time-run&#47;scripts&#47;testThing.sh</code> <code>Apr 23 17:30:47 &lt;nope&gt; systemd[1]: Started one-time executor for ad-hoc boot scripts.</code> This looks like a systemd issue."}], "owner": {"reputation": 19, "user_id": 11386236, "user_type": "registered", "profile_image": "https://graph.facebook.com/10103519092457554/picture?type=large", "display_name": "Sarah Foster", "link": "https://stackoverflow.com/users/11386236/sarah-foster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1555718321, "creation_date": 1555718321, "question_id": 55769057, "link": "https://stackoverflow.com/questions/55769057/making-a-one-time-boot-script", "title": "Making a One-Time Boot Script", "body": "<p>In systemd, I need to be able to create a script, stage it, and execute it on next boot, deleting it once it's been executed and removing the service.</p>\n\n<p>I've created some Perl to build the unit file and to stage the script that will execute and clean the other parts. For some reason, I can <code>sudo systemctl start onetimerun</code> and the relevant thing happens immediately. However, even after a <code>sudo systemctl enable onetimerun</code> it still fails to start on boot.</p>\n\n<p>This is the Perl code I have that should build the relevant environment for running the script in /tmp/one-time-run/scripts/</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/local/bin/perl -w\n\nmy $unitFile = &lt;&lt;'END_MESSAGE';\n[Unit]\nDescription=Ooe-time executor for ad-hoc boot scripts\nAfter=basic.target rescue.service rescue.target\n\n[Service]\nType=oneshot\nExecStart=/tmp/one-time-run/runwrangler.pl\n\n[Install]\nWantedBy=multi-user.target\nEND_MESSAGE\n\nmy $runScript = &lt;&lt;'END_MESSAGE';\n#!/usr/local/bin/perl -w\nuse Data::Dumper;\nmy @scriptFiles = map { $_ =~ s/\\s//gr } `for i in \\$(ls /tmp/one-time-run/scripts/*.sh); do test -x \"\\$i\" -a ! -d \"\\$i\" &amp;&amp; echo \"\\$i\"; done;`;\nprint Dumper @scriptFiles;\nforeach my $file (@scriptFiles) {\n  if(!(system(\"$file\"))) {\n     print \"Failed to run $file\\n\";\n  }\n  else {\n    system(\"rm $file\");\n  }\n}\nsystem('rm /tmp/one-time-run/runwrangler.pl');\nsystem('rm /run/systemd/system/onetimerun.service');\nEND_MESSAGE\n\nunless(open UNITFILE, '&gt;/run/systemd/system/onetimerun.service') {\n  die \"\\nUnable to create unit file.\\n\";\n}\n\nprint UNITFILE $unitFile;\nclose UNITFILE;\n\nsystem('mkdir /tmp/one-time-run/');\n\nunless(open WRANGLER, '&gt;/tmp/one-time-run/runwrangler.pl') {\n  die \"\\nUnable to create wrangler script.\\n\";\n}\n\nprint WRANGLER $runScript;\nclose WRANGLER;\n\nsystem('chmod +x /tmp/one-time-run/runwrangler.pl');\nsystem('systemctl daemon-reload');\nsystem('systemctl enable onetimerun');\n</code></pre>\n\n<p>I expect any script in /tmp/one-time-run/scripts/ to be run and subsequently removed before deleting the unit file and the wrangler deleted.</p>\n\n<p>Instead, nothing seems to happen on boot.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1555726971, "post_id": 55768847, "comment_id": 98213057, "body": "It looks like you&#39;re using a Perl version installed in your home directory, and I bet <code>sudo cpan</code> is using the OS Perl installation. So the module is installed for that copy, but not for the copy your program is using."}, {"owner": {"reputation": 135, "user_id": 10952047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267b8e42cbfbf2b73e684a11e10e613a?s=128&d=identicon&r=PG&f=1", "display_name": "jonny jeep", "link": "https://stackoverflow.com/users/10952047/jonny-jeep"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1555743044, "post_id": 55768847, "comment_id": 98215236, "body": "Ok... can you suggest me a way to fix it?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1555748639, "post_id": 55768847, "comment_id": 98216321, "body": "If that is indeed the issue, the module needs to be installed via your local copy of perl."}, {"owner": {"reputation": 135, "user_id": 10952047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267b8e42cbfbf2b73e684a11e10e613a?s=128&d=identicon&r=PG&f=1", "display_name": "jonny jeep", "link": "https://stackoverflow.com/users/10952047/jonny-jeep"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1555749228, "post_id": 55768847, "comment_id": 98216428, "body": "Sorry, I&#39;m learning so I don&#39;t know hot to DO it..could you to help me ? What is the next step to do?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1555750180, "post_id": 55768847, "comment_id": 98216625, "body": "Depends on how you installed your local copy... perlbrew or something else?"}, {"owner": {"reputation": 135, "user_id": 10952047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267b8e42cbfbf2b73e684a11e10e613a?s=128&d=identicon&r=PG&f=1", "display_name": "jonny jeep", "link": "https://stackoverflow.com/users/10952047/jonny-jeep"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1555751752, "post_id": 55768847, "comment_id": 98216957, "body": "Maybe. I&#39;m using a laboratory pc. How can I check it?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1555754500, "post_id": 55768847, "comment_id": 98217527, "body": "You have sudo access on a lab pc? Should probably talk to the sysadmins about installing it, anyways..."}, {"owner": {"reputation": 135, "user_id": 10952047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267b8e42cbfbf2b73e684a11e10e613a?s=128&d=identicon&r=PG&f=1", "display_name": "jonny jeep", "link": "https://stackoverflow.com/users/10952047/jonny-jeep"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1555764622, "post_id": 55768847, "comment_id": 98219899, "body": "Ok, Thank you very much, anyway"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555769127, "post_id": 55768847, "comment_id": 98220969, "body": "Please provide the output of <code>head -n 1 .&#47;RepeatMasker; type perl; type cpan; head -n 1 &quot;$( which cpan )&quot;; echo &#39;o conf&#39; | cpan 2&gt;&amp;1 | perl -ne&#39;print if &#47;make|mbuild&#47;&#39;; perl -le&#39;print &quot;$_: $ENV{$_}&quot; for sort grep &#47;^PERL&#47;, keys %ENV;&#39;; perl -le&#39;print for @INC&#39;</code>"}, {"owner": {"reputation": 135, "user_id": 10952047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267b8e42cbfbf2b73e684a11e10e613a?s=128&d=identicon&r=PG&f=1", "display_name": "jonny jeep", "link": "https://stackoverflow.com/users/10952047/jonny-jeep"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555771181, "post_id": 55768847, "comment_id": 98221537, "body": "@ikegami : head: errore leggendo &#39;./RepeatMasker&#39;: &#200; una directory perl &#232; /home/fragua/anaconda/bin/perl cpan &#232; /home/fragua/anaconda/bin/cpan #!/usr/bin/perl Please make sure that the configuration variable     make               [/usr/bin/make]     make_arg           []     make_install_arg   []     make_install_make_command [/usr/bin/make]     makepl_arg         [INSTALLDIRS=site]     ."}, {"owner": {"reputation": 135, "user_id": 10952047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267b8e42cbfbf2b73e684a11e10e613a?s=128&d=identicon&r=PG&f=1", "display_name": "jonny jeep", "link": "https://stackoverflow.com/users/10952047/jonny-jeep"}, "edited": false, "score": 0, "creation_date": 1555771187, "post_id": 55768847, "comment_id": 98221540, "body": "mbuild_arg         []     mbuild_install_arg []     mbuild_install_build_command [./Build]     mbuildpl_arg       [--installdirs site] /home/fragua/anaconda/lib/site_perl/5.26.2/x86_64-linux-thre&zwnj;&#8203;ad-multi /home/fragua/anaconda/lib/site_perl/5.26.2 /home/fragua/anaconda/lib/5.26.2/x86_64-linux-thread-multi /home/fragua/anaconda/lib/5.26.2"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555777015, "post_id": 55768847, "comment_id": 98223095, "body": "hum, you changed directory! Please run <code>head -n 1 ~&#47;RM&#47;RepeatMasker&#47;RepeatMasker</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555777092, "post_id": 55768847, "comment_id": 98223114, "body": "1) It looks like you have two builds of Perl installed: <code>&#47;usr&#47;bin&#47;perl</code> and <code>&#47;home&#47;fragua&#47;anaconda&#47;bin&#47;perl</code>. The latter is first in your PATH. This is fine."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555777117, "post_id": 55768847, "comment_id": 98223118, "body": "2) <code>&#47;home&#47;fragua&#47;anaconda&#47;bin&#47;cpan</code> uses <code>&#47;usr&#47;bin&#47;perl</code>, and therefore installs for  and therefore installs for <code>&#47;usr&#47;bin&#47;perl</code>. That&#39;s not right. Could you edit <code>&#47;home&#47;fragua&#47;anaconda&#47;bin&#47;cpan</code> so the firs tline is <code>#!&#47;home&#47;fragua&#47;anaconda&#47;bin&#47;cpan</code>. Then do <code>cpan Text::Soundex</code> (no <code>sudo</code>)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555778296, "post_id": 55768847, "comment_id": 98223446, "body": "That should fix the issue if <code>RepeatMasker</code> uses <code>&#47;home&#47;fragua&#47;anaconda&#47;bin&#47;perl</code> (directly, or via <code>env</code>)"}, {"owner": {"reputation": 135, "user_id": 10952047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267b8e42cbfbf2b73e684a11e10e613a?s=128&d=identicon&r=PG&f=1", "display_name": "jonny jeep", "link": "https://stackoverflow.com/users/10952047/jonny-jeep"}, "edited": false, "score": 0, "creation_date": 1555796671, "post_id": 55768847, "comment_id": 98227933, "body": "fragua@picci:~$ #!/home/fragua/anaconda/bin/cpan fragua@picci:~$ cpan Text::SoundexLoading internal null logger. Install Log::Log4perl for logging messages Reading &#39;/home/fragua/.cpan/Metadata&#39;   Database was generated on Fri, 19 Apr 2019 22:17:03 GMT Running install for module &#39;Text::Soundex&#39; Checksum for /home/fragua/.cpan/sources/authors/id/R/RJ/RJBS/Text-Soundex&zwnj;&#8203;-3.05.tar.gz ok"}, {"owner": {"reputation": 135, "user_id": 10952047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267b8e42cbfbf2b73e684a11e10e613a?s=128&d=identicon&r=PG&f=1", "display_name": "jonny jeep", "link": "https://stackoverflow.com/users/10952047/jonny-jeep"}, "edited": false, "score": 0, "creation_date": 1555796711, "post_id": 55768847, "comment_id": 98227943, "body": "==&gt; Couldn&#39;t mkdir &#39;/home/fragua/.cpan/build/tmp-8585&#39;: Permission denied  ==&gt; Cannot continue: Please find the reason why I cannot make the &lt;== ==&gt; directory                                                     &lt;== ==&gt; /home/fragua/.cpan/build/tmp-8585                             &lt;== ==&gt; and fix the problem, then retry.                              &lt;=="}, {"owner": {"reputation": 135, "user_id": 10952047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267b8e42cbfbf2b73e684a11e10e613a?s=128&d=identicon&r=PG&f=1", "display_name": "jonny jeep", "link": "https://stackoverflow.com/users/10952047/jonny-jeep"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555796837, "post_id": 55768847, "comment_id": 98227973, "body": "@ikegami this is the message that appears. Can I try with sudo?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555796901, "post_id": 55768847, "comment_id": 98227988, "body": "You probably created directories inside of /home/fragua as root. Fix the owership and permissions"}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 964263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5ac34bc43f10d280e7fbdf459a0d443?s=128&d=identicon&r=PG", "display_name": "manchicken", "link": "https://stackoverflow.com/users/964263/manchicken"}, "edited": false, "score": 1, "creation_date": 1555822748, "post_id": 55778490, "comment_id": 98231319, "body": "Using <code>&#47;usr&#47;bin&#47;env perl</code> is a best practice. It makes a script more portable, and allows you to better control your runtime without code changes.  It would be better to control this with either a direct path to the <code>perl</code> binary, or to bump the desired Perl path upward in the <code>$PATH</code> environment variable. Changing the shebang here doesn&#39;t seem like the best way to do this."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 157, "user_id": 964263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5ac34bc43f10d280e7fbdf459a0d443?s=128&d=identicon&r=PG", "display_name": "manchicken", "link": "https://stackoverflow.com/users/964263/manchicken"}, "edited": false, "score": 1, "creation_date": 1555848005, "post_id": 55778490, "comment_id": 98235916, "body": "@manchicken, Your so-called best practice --it isn&#39;t-- fails on system with multiple Perls such as this one. You end up with scripts that are missing modules and scripts that use the wrong version of modules. <a href=\"https://pastebin.com/2y19BU04\" rel=\"nofollow noreferrer\">The script should already have the shebang line I mentioned.</a> This is something done automatically by ExtUtils::MakeMaker and Module::Build when it installs a script. (It&#39;s not specific to <code>cpan</code>, and it has nothing to do with <code>perlbrew</code>.) The script wasn&#39;t properly installed, and <b>the fix I proposed simply completes the standard installation process.</b>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1555865738, "last_edit_date": 1555865738, "creation_date": 1555801375, "answer_id": 55778490, "question_id": 55768847, "link": "https://stackoverflow.com/questions/55768847/cant-locate-text-soundex-pm-in-inc/55778490#55778490", "title": "Can&#39;t locate Text/Soundex.pm in @INC", "body": "<p>You have two builds of Perl installed:</p>\n\n<ul>\n<li><code>/usr/bin/perl</code></li>\n<li><code>/home/fragua/anaconda/bin/perl</code>.</li>\n</ul>\n\n<p><code>/home/fragua/anaconda/bin/perl</code> is first in your PATH. This means that programs with the following shebang (<code>#!</code>) line will use <code>/home/fragua/anaconda/bin/perl</code>:</p>\n\n<pre><code>#!/usr/bin/env perl\n</code></pre>\n\n<p><code>RepeatMasker</code> appears to be such a program.</p>\n\n<p>All of this is fine.</p>\n\n<p><strong>The Problem</strong></p>\n\n<p><code>/home/fragua/anaconda/bin</code> contains the scripts installed by <code>/home/fragua/anaconda/bin/perl</code>. As part of the installation process of these scripts, the shebang line of these scripts should have been rewritten to specify <code>/home/fragua/anaconda/bin/perl</code>.</p>\n\n<p>However, the shebang line of <code>/home/fragua/anaconda/bin/cpan</code> references <code>/usr/bin/perl</code>. This means that using <code>/home/fragua/anaconda/bin/cpan</code> would install modules for <code>/usr/bin/perl</code>, not <code>/home/fragua/anaconda/bin/perl</code>.</p>\n\n<p><strong>The Workaround</strong></p>\n\n<p>You could avoid relying on the shebang line and explicitly specify the correct <code>perl</code>.</p>\n\n<pre><code>/home/fragua/anaconda/bin/perl /home/fragua/anaconda/bin/cpan Text::Soundex\n</code></pre>\n\n<p>Or, given your <code>$PATH</code>,</p>\n\n<pre><code>perl /home/fragua/anaconda/bin/cpan Text::Soundex\n</code></pre>\n\n<p><strong>The Fix</strong></p>\n\n<p>To fix this problem in an ongoing manner requires changing the shebang lines of the scripts to be what they should be. In every file in <code>/home/fragua/anaconda/bin</code> (and in particular for <code>cpan</code>), replace</p>\n\n<pre><code>#!/usr/bin/perl\n</code></pre>\n\n<p>with </p>\n\n<pre><code>#!/home/fragua/anaconda/bin/perl\n</code></pre>\n\n<p>You could do this use the following (which does a backup of the files it changes):</p>\n\n<pre><code>perl -0777ne'print \"$ARGV\\n\" if m{^#!\\s*/usr/bin/perl\\b}' /home/fragua/anaconda/bin/* \\\n   | xargs perl -i~ -0777pe's{^#!\\s*/usr/bin/perl\\b}{#!/home/fragua/anaconda/bin/perl}'\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 10952047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267b8e42cbfbf2b73e684a11e10e613a?s=128&d=identicon&r=PG&f=1", "display_name": "jonny jeep", "link": "https://stackoverflow.com/users/10952047/jonny-jeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1173, "favorite_count": 0, "accepted_answer_id": 55778490, "answer_count": 1, "score": 2, "last_activity_date": 1555865738, "creation_date": 1555716029, "question_id": 55768847, "link": "https://stackoverflow.com/questions/55768847/cant-locate-text-soundex-pm-in-inc", "title": "Can&#39;t locate Text/Soundex.pm in @INC", "body": "<p>I was installing repeatsmasker and it apparently seems to work because it shows \"Congratulations! RepeatMasker is now ready to use.\"\n But when I run it it reports \"Can't locate Text/Soundex.pm...\". so I installed the module by \"sudo cpan Text::Soundex\", and by the end it tells me \"Text::Soundex is up to date (3.05).\" It seems the module is already installed, but RepeatMasker still has the same problem, as I'll show you in this code:</p>\n\n<pre><code>fragua@picci:~/RM/RepeatMasker$ sudo cpan Text::Soundex\nLoading internal null logger. Install Log::Log4perl for logging messages\nReading '/home/fragua/.cpan/Metadata'\n Database was generated on Fri, 19 Apr 2019 22:17:03 GMT\nText::Soundex is up to date (3.05).\n\nfragua@picci:~/RM/RepeatMasker$ ./RepeatMasker -s -lib /home/fragua/RepeatScout-1.0.5/ObiINK5k_repeats_filtered1.fasta /home/fragua/Documenti/Workdirectory/ObiINC5k.fa\nCan't locate Text/Soundex.pm in @INC (you may need to install the Text::Soundex module) (@INC contains: /home/fragua/RM/RepeatMasker /home/fragua/perl5/lib/perl5 /home/fragua/anaconda/lib/site_perl/5.26.2/x86_64-linux-thread-multi /home/fragua/anaconda/lib/site_perl/5.26.2 /home/fragua/anaconda/lib/5.26.2/x86_64-linux-thread-multi /home/fragua/anaconda/lib/5.26.2 .) at /home/fragua/RM/RepeatMasker/Taxonomy.pm line 80.\nBEGIN failed--compilation aborted at /home/fragua/RM/RepeatMasker/Taxonomy.pm line 80.\nCompilation failed in require at ./RepeatMasker line 310.\nBEGIN failed--compilation aborted at ./RepeatMasker line 310.\n</code></pre>\n\n<p>I installed RepeatMasker in another computer without problems, but I don't know why now I encontered this problem</p>\n"}, {"tags": ["perl", "encoding", "utf-8"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1555730585, "post_id": 55768777, "comment_id": 98213470, "body": "As stated in <a href=\"https://metacpan.org/pod/distribution/Proc-Daemon/lib/Proc/Daemon.pod\" rel=\"nofollow noreferrer\">the documentation</a>, that module closes stdin etc. and reopens them. I don&#39;t know for sure, but I bet the <code>open</code> pragma is lexically scoped like most others; setting it in one package doesn&#39;t change how other packages work."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555755687, "post_id": 55770152, "comment_id": 98217785, "body": "<code>use open</code> is lexically-scoped. (Except the <code>:std</code> part, which causes <code>binmode</code> to be called immediately)"}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 2, "last_activity_date": 1555733454, "last_edit_date": 1555733454, "creation_date": 1555733138, "answer_id": 55770152, "question_id": 55768777, "link": "https://stackoverflow.com/questions/55768777/why-is-the-utf8-io-layer-stripped-when-spawning-a-daemon-process/55770152#55770152", "title": "Why is the utf8 IO layer stripped when spawning a daemon process?", "body": "<p>Consider this example:</p>\n\n<p>Foo.pm:</p>\n\n<pre><code>package Foo;\nuse warnings;\nuse strict;\nsub test {\n  close STDIN;\n  open \\*STDIN, \"&lt;\", \"/dev/null\";\n}\n1;\n</code></pre>\n\n<p>test.pl:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse feature qw/say/;\nuse open qw/:std IN :encoding(UTF-8) OUT :encoding(UTF-8)/;\nuse lib qw/./;\nuse Foo;\n\n$, = ' ';\nsay \"Original STDIN:\", PerlIO::get_layers(\\*STDIN);\nclose STDIN;\nopen \\*STDIN, \"&lt;\", \"/dev/null\";\nsay \"Reopened STDIN:\", PerlIO::get_layers(\\*STDIN);\nFoo::test();\nsay \"Reopened STDIN in different package:\", PerlIO::get_layers(\\*STDIN);\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>$ perl test.pl\nOriginal STDIN: unix perlio encoding(utf-8-strict) utf8\nReopened STDIN: unix perlio encoding(utf-8-strict) utf8\nReopened STDIN in different package: unix perlio\n</code></pre>\n\n<p>Looks like <code>use open</code> is like other pragmas and only applies to the file it's in it. So when <code>Proc::Daemon</code> closes standard input, output, and error, and reopens them, it naturally doesn't see the extra layers.</p>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 55770152, "answer_count": 1, "score": 2, "last_activity_date": 1555733454, "creation_date": 1555715385, "question_id": 55768777, "link": "https://stackoverflow.com/questions/55768777/why-is-the-utf8-io-layer-stripped-when-spawning-a-daemon-process", "title": "Why is the utf8 IO layer stripped when spawning a daemon process?", "body": "<p>The following code works as expected:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\nuse open qw/:std IN :encoding(utf-8) OUT :utf8/; \n\nsay  join ' ', (PerlIO::get_layers(\\*STDOUT));\nmy $pid = fork();\ndie \"fork() failed: $!\" unless defined $pid;\nif ($pid == 0) {\n    say  join ' ', (PerlIO::get_layers(\\*STDOUT));\n}\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>unix perlio utf8\nunix perlio utf8\n</code></pre>\n\n<p>But if I use a daemon process instead of a regular fork:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\nuse open qw/:std IN :encoding(utf-8) OUT :utf8/; \nuse Cwd qw(getcwd);\nuse Proc::Daemon;\n\nmy $work_dir = getcwd;    \nmy $daemon = Proc::Daemon-&gt;new(\n    work_dir     =&gt; $work_dir,\n    child_STDOUT =&gt; 'stdout.txt',\n    child_STDERR =&gt; 'stderr.txt',\n    pid_file     =&gt; 'pid.txt',\n);\nmy $pid = $daemon-&gt;Init();\nif ( $pid == 0 ) {\n    say  join ' ', (PerlIO::get_layers(\\*STDOUT));\n}\n</code></pre>\n\n<p>The output to the file <code>stdout.txt</code> is:</p>\n\n<pre><code>unix perlio\n</code></pre>\n\n<p>so the <code>utf8</code> IO layer has been stripped off.</p>\n"}, {"tags": ["perl", "cgi"], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 11370241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48242f71cd27664cbd1ef6174eca424f?s=128&d=identicon&r=PG&f=1", "display_name": "perl_noob", "link": "https://stackoverflow.com/users/11370241/perl-noob"}, "is_accepted": true, "score": 0, "last_activity_date": 1555949721, "creation_date": 1555949721, "answer_id": 55797465, "question_id": 55767529, "link": "https://stackoverflow.com/questions/55767529/store-radio-button-selection-as-variable-perl-cgi-script/55797465#55797465", "title": "Store Radio Button selection as variable perl cgi script", "body": "<p>You should read up on CGI and fetching params, it has a few different methods for fetching params you will be interested in from very simple to advanced, also a few things you need to be aware of if this is going to be used in any production type environment. <a href=\"https://metacpan.org/pod/CGI\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/CGI</a></p>\n\n<p>When you create a new CGI object ( my $q = new CGI; ) it will build a list of parameters passed to it. To access the parameters you can call the param method on your CGI object.</p>\n\n<p>Something simple like:</p>\n\n<pre><code>if ($q-&gt;param('timeselect')) {\n    my $value = $q-&gt;param('timeselect');\n    if ( $value eq 'localtime' ) {\n        print localtime;\n    } elsif ( $value eq 'uptime' ) {\n        print `/usr/bin/uptime`;\n    }\n}\n</code></pre>\n\n<p>Will work fine for you, personally I would get rid of your uptime and localtime variables at the top to avoid them being called when there is no params passed.</p>\n\n<p>Also another quick note on comparisons. When comparing strings you want to use eq and when comparing numbers you want to use ==.</p>\n\n<p>Take care.</p>\n"}], "owner": {"reputation": 19, "user_id": 8268057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93d444d5263ee1bffff880278c3b5f43?s=128&d=identicon&r=PG&f=1", "display_name": "hanktank45", "link": "https://stackoverflow.com/users/8268057/hanktank45"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 55797465, "answer_count": 1, "score": 0, "last_activity_date": 1555949721, "creation_date": 1555705899, "question_id": 55767529, "link": "https://stackoverflow.com/questions/55767529/store-radio-button-selection-as-variable-perl-cgi-script", "title": "Store Radio Button selection as variable perl cgi script", "body": "<p>I have a perl script utilizing cgi where I have 2 radio buttons \"uptime\" and \"localtime\". When the submit button is selected I am looking to display the unix command uptime if the uptime radio button is selected and the perl function localtime if the \"localtime\" radio button is selected.</p>\n\n<p>Below is what I have:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse CGI qw/:standard/;\n\nmy $loctime = localtime;\nmy $utime = qx( /usr/bin/uptime );\nmy $q = new CGI;\n\nprint $q-&gt;header;\n\nprint $q-&gt;start_html(-title =&gt; 'A time select');\n\nprint $q-&gt;radio_group(\n        -name =&gt; 'timeselect',\n        -values =&gt; ['uptime', 'localtime'],\n        -default =&gt; 'uptime',\n        -columns =&gt; 2,\n        -rows =&gt; 1,\n        );\n\nprint $q-&gt;submit(\n        -name =&gt; 'submit_form',\n        -value =&gt; 'Submit',\n);\n</code></pre>\n\n<p>I am assuming I need a subroutine or something along those lines that executes when the Submit button is clicked. Something like below</p>\n\n<pre><code>sub time_select {\n      if (radio_button = uptime)\n          {\n          print $utime\n          }\n      else \n          {\n          print $loctime\n          }\n</code></pre>\n\n<p>I am not sure how to pass in what radio button is selected into my subroutine. Still new to perl and CGI so any help is appreciated</p>\n"}, {"tags": ["r", "perl"], "comments": [{"owner": {"reputation": 41871, "user_id": 6530970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c261ba0849b06fa0b34a50df358d7fe6?s=128&d=identicon&r=PG&f=1", "display_name": "Maurits Evers", "link": "https://stackoverflow.com/users/6530970/maurits-evers"}, "edited": false, "score": 2, "creation_date": 1555683744, "post_id": 55763291, "comment_id": 98201092, "body": "<i>&quot;I have some arcane perl code that computes a distance between two strings.&quot;</i> Why not let R do the string distance computation? Can you share some details on what string distance metric you&#39;re using? There is also <a href=\"https://cran.r-project.org/web/packages/stringdist/stringdist.pdf\" rel=\"nofollow noreferrer\"><code>stringdist</code></a> that offers &quot;various string distances based on edits (Damerau-Levenshtein, Hamming, Levenshtein, optimal sting alignment), qgrams (qgram, cosine, jaccard distance) or heuristic metrics (Jaro, Jaro-Winkler).&quot;"}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1555683934, "post_id": 55763291, "comment_id": 98201169, "body": "Seconded. Also, when it matters, Rcpp has often come to the rescue for text processing.  Examples are on the Rcpp Gallery and in various CRAN packages."}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 3, "creation_date": 1555684060, "post_id": 55763291, "comment_id": 98201219, "body": "Otherwise, trivially:  <i>&quot;I can&#39;t figure out how to make R simply send all commands to the same shell&quot;.</i>  That is not how <code>system()</code> works.  You need to rework the logic.  Maybe you can spill out the loop parameters and write a new Perl (meta-script) that loops and calls the other code.  In short, you have a bazillion <code>system()</code> calls with so ... just don&#39;t call <code>system()</code> a bazillion times."}, {"owner": {"reputation": 385, "user_id": 8478404, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-o94O1NTQ36M/AAAAAAAAAAI/AAAAAAAABGM/LEEm2I9DRyw/photo.jpg?sz=128", "display_name": "petyar", "link": "https://stackoverflow.com/users/8478404/petyar"}, "edited": false, "score": 1, "creation_date": 1555684155, "post_id": 55763291, "comment_id": 98201268, "body": "Rewriting the perl script in R <i>is</i> the straightforward thing to do. Unfortunately, it&#39;s a 1000-line monster and I&#39;m not much of a perl ninja. So I can&#39;t do it. That&#39;s why I was trying to cheat my way out of this."}], "answers": [{"comments": [{"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1555777131, "post_id": 55764996, "comment_id": 98223121, "body": "I wonder if it would be too complicated to wrap the &#39;maintop&#39; of the Perl script in just one extra layer and read in the &#39;bazillion-line&#39; txt file"}], "tags": [], "owner": {"reputation": 385, "user_id": 8478404, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-o94O1NTQ36M/AAAAAAAAAAI/AAAAAAAABGM/LEEm2I9DRyw/photo.jpg?sz=128", "display_name": "petyar", "link": "https://stackoverflow.com/users/8478404/petyar"}, "is_accepted": false, "score": 2, "last_activity_date": 1555691997, "creation_date": 1555691997, "answer_id": 55764996, "question_id": 55763291, "link": "https://stackoverflow.com/questions/55763291/calling-perl-from-r-using-system-a-lot/55764996#55764996", "title": "Calling Perl from R using system _a lot_", "body": "<p>Following up on the suggestion of <a href=\"https://stackoverflow.com/users/143305/dirk-eddelbuettel\">Dirk Eddelbuettel</a> I wrote all the possible argument pairs into a bazillion-line txt file and used a bash script to go through the txt file and run the perl script on each line. Since the arguments are strings this is a possible solution here. In the end it does work.</p>\n"}], "owner": {"reputation": 385, "user_id": 8478404, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-o94O1NTQ36M/AAAAAAAAAAI/AAAAAAAABGM/LEEm2I9DRyw/photo.jpg?sz=128", "display_name": "petyar", "link": "https://stackoverflow.com/users/8478404/petyar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1555691997, "creation_date": 1555683621, "question_id": 55763291, "link": "https://stackoverflow.com/questions/55763291/calling-perl-from-r-using-system-a-lot", "title": "Calling Perl from R using system _a lot_", "body": "<p>I have some arcane perl code that computes a distance between two strings. \nI have R code that creates and aligns strings etc. I need to call the Perl code from R tens of thousands of times. I use <code>system()</code>.</p>\n\n<p>It looks like every time I call <code>system('perl ...')</code> from R, R opens a new shell. I can't figure out how to make R simply send all commands to the same shell or close the shell immediately after opening it and running the <code>system</code> call. Eventually, I get a <code>too many open files</code> message and everything falls apart.</p>\n\n<p>This is a simple example with a theoretical Hello World script:</p>\n\n<pre><code>for (i in seq_along(1:10000)){\n  system('perl hello.pl')\n}\n</code></pre>\n\n<ul>\n<li>showConnections(all=T) doesn't show an extra connection open after running <code>system(perl...)</code> once. </li>\n<li>system2 doesn't work at all (though I'm not sure it would help).</li>\n</ul>\n\n<p>I'm on macos v10.13.2, R v3.5.2, Rstudio v1.1.456.</p>\n\n<p>How do I get R to not run out of space and run all calls to Perl? (This might not even be the precise question to ask.)</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 31, "user_id": 11384050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4ScXZFC896Q/AAAAAAAAAAI/AAAAAAAACIs/8wVY3YGHx-Y/photo.jpg?sz=128", "display_name": "Perlstudent", "link": "https://stackoverflow.com/users/11384050/perlstudent"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1555678950, "post_id": 55762240, "comment_id": 98199088, "body": "Ok I did, but then I get a 500 internal server error"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1555679373, "post_id": 55762240, "comment_id": 98199274, "body": "which way you are running the perl script"}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1555687715, "post_id": 55762240, "comment_id": 98202811, "body": "Check the server logs when you get an internal server error."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1555693048, "post_id": 55762240, "comment_id": 98204909, "body": "<code>print = ...</code> should be <code>print ...</code>. Voting to close as typo."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11384050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4ScXZFC896Q/AAAAAAAAAAI/AAAAAAAACIs/8wVY3YGHx-Y/photo.jpg?sz=128", "display_name": "Perlstudent", "link": "https://stackoverflow.com/users/11384050/perlstudent"}, "edited": false, "score": 0, "creation_date": 1555684096, "post_id": 55763050, "comment_id": 98201238, "body": "Hey thank you very much! I have changed it but now I get an error at the following line: print header();  The error I get is: Undefined subroutine &amp;main::header called at test.cgi line 12. What could this be?"}, {"owner": {"reputation": 31, "user_id": 11384050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4ScXZFC896Q/AAAAAAAAAAI/AAAAAAAACIs/8wVY3YGHx-Y/photo.jpg?sz=128", "display_name": "Perlstudent", "link": "https://stackoverflow.com/users/11384050/perlstudent"}, "edited": false, "score": 1, "creation_date": 1555685296, "post_id": 55763050, "comment_id": 98201779, "body": "I found the solution. I added the following line: use CGI qw/:all/;"}, {"owner": {"reputation": 1550, "user_id": 158787, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfe163077b96d47a0fcbe69c56bf5365?s=128&d=identicon&r=PG", "display_name": "GoinOff", "link": "https://stackoverflow.com/users/158787/goinoff"}, "reply_to_user": {"reputation": 31, "user_id": 11384050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4ScXZFC896Q/AAAAAAAAAAI/AAAAAAAACIs/8wVY3YGHx-Y/photo.jpg?sz=128", "display_name": "Perlstudent", "link": "https://stackoverflow.com/users/11384050/perlstudent"}, "edited": false, "score": 0, "creation_date": 1555685849, "post_id": 55763050, "comment_id": 98202017, "body": "I added that to my post..Glad to see it worked for you."}], "tags": [], "owner": {"reputation": 1550, "user_id": 158787, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfe163077b96d47a0fcbe69c56bf5365?s=128&d=identicon&r=PG", "display_name": "GoinOff", "link": "https://stackoverflow.com/users/158787/goinoff"}, "is_accepted": false, "score": 2, "last_activity_date": 1555685730, "last_edit_date": 1555685730, "creation_date": 1555682400, "answer_id": 55763050, "question_id": 55762240, "link": "https://stackoverflow.com/questions/55762240/cant-modify-print-in-scalar-assignment-error/55763050#55763050", "title": "Can&#39;t modify print in scalar assignment error", "body": "<p>Since this is a cgi script meant to return output to a web browser, you're missing (print header() and html):</p>\n\n<pre><code>use CGI qw/:standard/;  # or qw/:all/\nprint header();  #print out html header\nprint \"&lt;html&gt;&lt;body&gt;The diameter is \"  . $diameter . \"&lt;/body&gt;&lt;/html&gt;\"\n</code></pre>\n\n<p>For more information on header() see <a href=\"https://perldoc.perl.org/CGI.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/CGI.html</a></p>\n"}], "owner": {"reputation": 31, "user_id": 11384050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4ScXZFC896Q/AAAAAAAAAAI/AAAAAAAACIs/8wVY3YGHx-Y/photo.jpg?sz=128", "display_name": "Perlstudent", "link": "https://stackoverflow.com/users/11384050/perlstudent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1555685730, "creation_date": 1555678630, "last_edit_date": 1555680289, "question_id": 55762240, "link": "https://stackoverflow.com/questions/55762240/cant-modify-print-in-scalar-assignment-error", "title": "Can&#39;t modify print in scalar assignment error", "body": "<p>I'm new to Perl and experiencing a problem with my script. I hope somebody can tell me what I'm doing wrong.</p>\n\n<p>My browser gives me the following error output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Can't modify print in scalar assignment at test.cgi line 12, near \"\"\";\"\nExecution of test.cgi aborted due to compilation errors.\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse CGI;\nuse CGI::Carp qw(fatalsToBrowser);\n\nuse strict;\nuse diagnostics;\n\nmy $radius = 5;\nmy $diameter = $radius * 2;\n\nprint = \"The diameter is \"  . $diameter . \"\";\n</code></pre>\n"}, {"tags": ["regex", "perl", "authentication", "qregularexpression"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1555677680, "post_id": 55761957, "comment_id": 98198547, "body": "Could you please explain your real problem? What is the regex?  I suspect you just want to add  a restriction to its beginning, that the string cannot contain 3 or more repeated consecutive chars. You need to make sure the capturing group and the backreferences correspond: <code>^(?!(?:\\w*(.)\\1){3}).....</code>. If you want to check for any chars, replace <code>\\w*</code> with <code>.*</code>. The regex will be very inefficient."}, {"owner": {"reputation": 85, "user_id": 8665448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69792de021fcee2f29dd73456d5e62c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Kalantas", "link": "https://stackoverflow.com/users/8665448/nikos-kalantas"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1555677895, "post_id": 55761957, "comment_id": 98198633, "body": "REGEX: Regular Expression | my real problem is that like i can combine these two different regular Expressions  (?=^(?:(.)(?!\\1))$) and (?=^(?:(.)(?!(?:.?\\1){4}))*$) into one like i show you at the end of the post. I want to make the combination  of ^(?!(?:\\w*(.)\\1){3}).+$ and  (?=^(?:(.)(?!(?:.?\\1){4}))*$)"}, {"owner": {"reputation": 85, "user_id": 8665448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69792de021fcee2f29dd73456d5e62c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Kalantas", "link": "https://stackoverflow.com/users/8665448/nikos-kalantas"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1555678055, "post_id": 55761957, "comment_id": 98198702, "body": "@WiktorStribi\u017cew Stribi\u017cew Its very clear... Try to run (?=^(?:(.)(?!\\1))*$)(?=^(?:(.)(?!(?:.*?\\1){4}))*$) that exclude string with (one pair) and not (4 repetitions of a same character ). This one runs... Now try to run (?=^(?!(?:\\w*(.)\\1){3}).+$)(?=^(?:(.)(?!(?:.*?\\1){4}))*$)  that i want to exclude string with (thee pairs)and not (4 repetitions of a same character ). This one NOT runs"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1555678540, "post_id": 55761957, "comment_id": 98198905, "body": "Something <a href=\"https://regex101.com/r/wtmBQE/1\" rel=\"nofollow noreferrer\">like this</a>? <code>^(?=(?:.*(.)\\1){3})(?!(?:.*(.)\\2){4})</code>? You have two <i>capturing</i> groups now and the backreference in one is <code>\\1</code> and in the other it must be <code>\\2</code>."}, {"owner": {"reputation": 85, "user_id": 8665448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69792de021fcee2f29dd73456d5e62c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Kalantas", "link": "https://stackoverflow.com/users/8665448/nikos-kalantas"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1555679198, "post_id": 55761957, "comment_id": 98199207, "body": "@Wiktor Stribi\u017cew In this link it work if there are 3 pairs of chars (i need no to work if there are no 3 pairs inside my String), also the second expression not worked.                             For example i want the strings    &quot;M@yttesst11&quot;  to fail because there are 3 pairs inside,  also in the string &quot;@M@yte@st1@&quot; must fail too because even there are not 3 pairs of chars there are 4 repetitions of a char (the second expression).As an example a string that i want to pass is : M@Ytteest --&gt; not over 3 times a pair, not over 4 times a repetition of a char. Thanks for the help by the way"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1555679861, "post_id": 55761957, "comment_id": 98199488, "body": "Try <code>^(?!.*(.)(?:.*?\\1){3})(?!(?:.*(.)\\2){3}).*</code>, see <a href=\"https://regex101.com/r/wtmBQE/2\" rel=\"nofollow noreferrer\">regex101.com/r/wtmBQE/2</a>"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1555726561, "creation_date": 1555726561, "answer_id": 55769680, "question_id": 55761957, "link": "https://stackoverflow.com/questions/55761957/perl-regural-expression-how-to-use-negative-lookahead-inside-a-non-capturi/55769680#55769680", "title": "Perl Regural Expression | How to use negative lookahead(?!) inside a non capturing group (?:)", "body": "<p>if you mean by 'combine' is AND</p>\n\n<pre><code>^(?!(\\S)\\1)(?!(\\S)(?:\\S*?\\2){4})\\S+ \n</code></pre>\n\n<p>if you mean by 'combine' is OR</p>\n\n<pre><code>^(?!(\\S)\\1|(\\S)(?:\\S*?\\2){4})\\S+ \n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 8665448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69792de021fcee2f29dd73456d5e62c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Kalantas", "link": "https://stackoverflow.com/users/8665448/nikos-kalantas"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "closed_date": 1582413831, "answer_count": 1, "score": 0, "last_activity_date": 1555726561, "creation_date": 1555677296, "last_edit_date": 1555678164, "question_id": 55761957, "link": "https://stackoverflow.com/questions/55761957/perl-regural-expression-how-to-use-negative-lookahead-inside-a-non-capturi", "closed_reason": "Duplicate", "title": "Perl Regural Expression | How to use negative lookahead(?!) inside a non capturing group (?:)", "body": "<p>I want to use a negative look-ahead inside a non capturing group in Perl Regex. So far i have create an expression that not allows 3 \"pairs of characters\" into a string</p>\n\n<pre><code>CASE 1: ^(?!(?:\\w*(.)\\1){3}).+$\n\nFor example the string: Mytte!3sttStrring  | Not pass - 3 pairs | \"tt\",\"tt\",\"rr\"\n</code></pre>\n\n<p>If you see there is a negative look-ahead before the group, i want to add this expression into a group. To understand this i will present you an other example that disallows only one pair or chars.</p>\n\n<pre><code>CASE 2 : no match if there is a pair in string:   (?=^(?:(.)(?!\\1))*$)\n</code></pre>\n\n<p>If you test these 2 expressions in <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">https://regex101.com/</a> you will see that for the string \"MySampleString\" on the <strong>CASE 2</strong> I have 2 Match Information. (Full Match and Group 1 Match).\nNow if you run the first pattern (<strong>CASE 1</strong>) you will see only the Full Match at Match Information.</p>\n\n<p>In my try add grouping match option in the CASE 1 putting brackets around: </p>\n\n<pre><code>CASE 1 my try:   (^(?!(?:\\w*(.)\\1){3}).+$)\n</code></pre>\n\n<p>but now the expression inside doesn't work :/</p>\n\n<p>I want to find a way that ^(?!(?:\\w*(.)\\1){3}).+$ will work (with Full Match and Group1 Match). I have to add this option to a very long regular expression that I'm working on and it cant work as a full match group. \nTo make it cleaner i will show you an example that the String must not have a \"pair of chars\" and at the same time not to include 4 repetitions of any letter.</p>\n\n<pre><code>        (?=^(?:(.)(?!\\1))*$)(?=^(?:(.)(?!(?:.*?\\1){4}))*$)\n</code></pre>\n\n<p>These 2 expressions   (?=^(?:(.)(?!\\1))<em>$) and (?=^(?:(.)(?!(?:.</em>?\\1){4}))*$) combined because both have a grouping match.</p>\n"}, {"tags": ["regex", "perl", "interpolation"], "answers": [{"comments": [{"owner": {"reputation": 5096, "user_id": 3646587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb1e27fe3d6e271ac02a47709e042d7c?s=128&d=identicon&r=PG&f=1", "display_name": "user0721090601", "link": "https://stackoverflow.com/users/3646587/user0721090601"}, "edited": false, "score": 0, "creation_date": 1555700740, "post_id": 55761170, "comment_id": 98207545, "body": "+1 I feel like I should have known it already but I didn&#39;t: you can just drop a regex var into <code>&lt; ... &gt;</code> and have it function as an inserted regex.  And to think I&#39;ve been generating complex escaped strings to dump in with <code>&lt;{ ... }&gt;</code>.  D&#39;oh."}, {"owner": {"reputation": 2078, "user_id": 9671780, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Valle Lukas", "link": "https://stackoverflow.com/users/9671780/valle-lukas"}, "edited": false, "score": 0, "creation_date": 1555704124, "post_id": 55761170, "comment_id": 98208732, "body": "From the &quot;traps to avoid&quot; <a href=\"https://docs.perl6.org/language/traps#%3C%7B%24x%7D%3E_vs_%24%28%24x%29%3A_Implicit_EVAL\" rel=\"nofollow noreferrer\">documentation</a>: Internally &lt;{\u2026}&gt; EVAL-s the given string inside an anonymous regex, while $(\u2026) lexically interpolates the given string. So &lt;{\u2026}&gt; immediately breaks with more complicated inputs.  and later  &gt; Therefore, try not to use &lt;{}&gt; unless you really need EVAL."}], "tags": [], "owner": {"reputation": 4159, "user_id": 804005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03be16b1311b73194e81ab62c3c8c241?s=128&d=identicon&r=PG", "display_name": "timotimo", "link": "https://stackoverflow.com/users/804005/timotimo"}, "is_accepted": true, "score": 9, "last_activity_date": 1555673488, "creation_date": 1555673488, "answer_id": 55761170, "question_id": 55760914, "link": "https://stackoverflow.com/questions/55760914/how-to-interpolate-a-variable-into-a-regex-pattern-in-the-regex-part-of-a-substi/55761170#55761170", "title": "How to interpolate a variable into a regex-pattern in the regex part of a substitution?", "body": "<p>The problem is that interpolating a regex into another regex via the <code>&lt;$regex&gt;</code> syntax will not install a result in the match variable. There's two ways to get around this:</p>\n\n<ul>\n<li>The easiest way is to just use the regex directly in subst, i.e. <code>$str .= subst($regex, { $0 });</code></li>\n<li>Give the interpolated regex an explicit name and access the result via that, i.e. <code>$str .= subst( / &lt;foo=$regex&gt; /, { $&lt;foo&gt;[0] });</code></li>\n</ul>\n\n<p>Both of these should work fine.</p>\n"}], "owner": {"reputation": 21019, "user_id": 198183, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/52f281a988bae754991af26224c796af?s=128&d=identicon&r=PG", "display_name": "sid_com", "link": "https://stackoverflow.com/users/198183/sid-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 55761170, "answer_count": 1, "score": 9, "last_activity_date": 1575810658, "creation_date": 1555672093, "last_edit_date": 1575810658, "question_id": 55760914, "link": "https://stackoverflow.com/questions/55760914/how-to-interpolate-a-variable-into-a-regex-pattern-in-the-regex-part-of-a-substi", "title": "How to interpolate a variable into a regex-pattern in the regex part of a substitution?", "body": "<p>What do I have to change here to make it work?   </p>\n\n<pre><code>my $str = \"start middle end\";\nmy $regex = / start ( .+ ) end /;\n$str.=subst( / &lt;$regex&gt; /, { $0 } ); # dies: Use of Nil in string context\nsay \"[$str]\";\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1555669253, "post_id": 55760304, "comment_id": 98195439, "body": "Why not use named capturing groups?"}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1555670000, "post_id": 55760304, "comment_id": 98195746, "body": "We use named groups in the code later but it&#39;s part of already existing code that has exactly reversed output, on previous GPG versions."}, {"owner": {"reputation": 36931, "user_id": 225757, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e7140b12949e4652885f6bb02b435f42?s=128&d=identicon&r=PG", "display_name": "Roland Illig", "link": "https://stackoverflow.com/users/225757/roland-illig"}, "edited": false, "score": 0, "creation_date": 1555672779, "post_id": 55760304, "comment_id": 98196701, "body": "You should probably mention in the question why you need to swap these groups at all. Maybe there is an entirely different solution to your problem."}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1555673132, "post_id": 55760304, "comment_id": 98196833, "body": "In Webmin we need to support multiple versions of GPG command output to parse data out of it. We could change the initial code but the interesting part would be to achieve this without doing it, using only regex. There might be different kind of output changes in the future. Changing/adding new regex is the best and easiest solution."}], "answers": [{"comments": [{"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1555672439, "post_id": 55760806, "comment_id": 98196578, "body": "I have tried your regex, thanks a lot by the way. The date is missing though: <a href=\"https://regex101.com/r/Jwpp5d/1\" rel=\"nofollow noreferrer\">regex101.com/r/Jwpp5d/1</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1555673346, "post_id": 55760806, "comment_id": 98196913, "body": "Misplaced the parens. Fixed."}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1555673649, "post_id": 55760806, "comment_id": 98197022, "body": "Thanks. Is there a better way to catch last 8 chars of the key string (the one that is 40 chars)? The regex is failing in my Perl script, returning empty, while it works okay in 101regex. I need to do more tests. Is there a way to strip out from results <code>[ unknown]</code> or any text in brackets including the brackets?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1555673864, "post_id": 55760806, "comment_id": 98197093, "body": "Re &quot;<i>The regex is failing in my Perl script</i>&quot;, That would suggest a difference in the data."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 1, "creation_date": 1555673942, "post_id": 55760806, "comment_id": 98197121, "body": "Re &quot;<i>Is there a way to strip out from results [...] any text in brackets including the brackets?</i>&quot;, Only if it&#39;s at the start/end of a field. (It&#39;s not in your example.) Then you could start capturing later or stop capturing sooner."}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1555674315, "post_id": 55760806, "comment_id": 98197256, "body": "Okay, thanks a lot for the explanations and your help! \u263a"}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1555675716, "post_id": 55760806, "comment_id": 98197726, "body": "I am not sure what I am missing but in Perl script, the key is missing (returns empty)? :/ In the code it&#39;s clear as day, that second matching group is assigned. <a href=\"https://github.com/webmin/webmin/blob/master/webmin/gnupg-lib.pl#L32\" rel=\"nofollow noreferrer\">github.com/webmin/webmin/blob/master/webmin/gnupg-lib.pl#L32</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1555675860, "post_id": 55760806, "comment_id": 98197779, "body": "That&#39;s not the proper way to ask a question. I&#39;m not even sure how it relates to this question!"}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1555676017, "post_id": 55760806, "comment_id": 98197830, "body": "Okay, I agree. Apologies. Thanks again."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1555762154, "last_edit_date": 1555762154, "creation_date": 1555671610, "answer_id": 55760806, "question_id": 55760304, "link": "https://stackoverflow.com/questions/55760304/perl-regex-swap-matched-groups/55760806#55760806", "title": "Perl regex swap matched groups", "body": "<p>The captured strings are returned in the order encountered in which the captures are found in the pattern.</p>\n\n<p>It is possible to change the order using lookaheads.</p>\n\n<pre><code>/\n   ^ pub \\s+ (\\S+) \\s+ \n   (?=  \\S+  \\s+ .* \\s+ .{0,32}(.*) \\s+  .*  &lt; \\S+ &gt; )\n       (\\S+) \\s+ .* \\s+ .{0,32} .*  \\s+ (.*) &lt;(\\S+)&gt;\n/x\n</code></pre>\n\n<p>If we express that in terms of lines, we get the following:</p>\n\n<pre><code>/\n   ^ pub \\h++ (\\S++) \\h++       # Line 1 (part 1)\n   (?= .*+ \\n                   # Line 1 (part 2)\n       \\h*+ \\S*(\\S{8})          # Line 2\n   )\n   (\\S++) .*+ \\n                # Line 1 (part 2)\n   .*+ \\n                       # Line 2\n   (.*\\S) \\s++ &lt;([^&lt;&gt;\\s]++)&gt;    # Line 3\n/x\n</code></pre>\n\n<p>(I also made it so match failures fail to match faster out of habit.)</p>\n\n<p>(<code>\\S{32}</code> would be faster than <code>\\S*</code> if that's acceptable.)</p>\n\n<p>(I also made it so the fourth capture doesn't have trailing spaces.)</p>\n\n<hr>\n\n<p>That said, a far better solution is to fix the order after the fact.</p>\n\n<pre><code>@captures = @captures[0,2,1,3,4];\n</code></pre>\n\n<p>or</p>\n\n<pre><code>@captures[1,2] = @captures[2,1];\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1556148356, "creation_date": 1556148356, "answer_id": 55839848, "question_id": 55760304, "link": "https://stackoverflow.com/questions/55760304/perl-regex-swap-matched-groups/55839848#55839848", "title": "Perl regex swap matched groups", "body": "<p>if your data in <code>d</code> file</p>\n\n<pre><code>perl -ane 'if($F[1]==2) {$n=&lt;&gt;;@k=split /\\s+/,$n;@j=split /\\s+/;s/$j[3]/$k[3]/;$n=~s/$k[3]/$j[3]/;print \"$_$n\" } else {s/\\[.*\\].+//;print}' d\n</code></pre>\n"}], "owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 55760806, "answer_count": 2, "score": 2, "last_activity_date": 1556148356, "creation_date": 1555669122, "question_id": 55760304, "link": "https://stackoverflow.com/questions/55760304/perl-regex-swap-matched-groups", "title": "Perl regex swap matched groups", "body": "<p>I've come up with a regex that parses output of GPG command.</p>\n\n<p><strong>Regex:</strong></p>\n\n<pre><code>^pub\\s+(\\S+)\\s+(\\S+)\\s+.*\\s+.{0,32}(.*)\\s+(.*)&lt;(\\S+)&gt;\n</code></pre>\n\n<p><strong>Text to match:</strong></p>\n\n<pre><code>pub   dsa1024 2018-02-28 [SCA]\n      0019003A003E5A22E2337044D955066111F63B00\nuid           [ unknown] John Doe &lt;jogn@doe.name&gt;\nsub   elg1024 2018-02-28 [E]\n\n</code></pre>\n\n<p><strong>Current output:</strong></p>\n\n<pre><code>Group 1.    6-13    dsa1024\nGroup 2.    14-24   2018-02-28\nGroup 3.    69-77   11F63B00\nGroup 4.    78-112  uid           [ unknown] John Doe \nGroup 5.    113-126 jogn@doe.name\n</code></pre>\n\n<hr>\n\n<p><strong>Problem:</strong></p>\n\n<p>How do I swap <em>Group 2</em> and <em>Group 3</em>, only using regex, so <em>Group 2</em> would have as a value <em>11F63B00</em> and <em>Group 3</em> would have as a value <em>2018-02-28</em>. Besides, I would also like to get rid of the text in square brackets (<em>Group 4</em>), including brackets itself.</p>\n\n<p><a href=\"https://regex101.com/r/h9g9mE/1\" rel=\"nofollow noreferrer\">Online example.</a></p>\n"}, {"tags": ["perl", "crypt"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 3, "creation_date": 1555660921, "post_id": 55758301, "comment_id": 98192414, "body": "The standard DES <code>crypt(3)</code> function on unix systems (That perl&#39;s <code>crypt</code> is a wrapper for) only looks at the first 8 bytes, yes. (Plus the salt is only two characters). If you want better security, you have to use something else."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1555661685, "post_id": 55758301, "comment_id": 98192657, "body": "To give more sources to the comment from Shawn: From <code>perldoc -f crypt</code>: <i>&quot;Creates a digest string exactly like the crypt(3) function in the C library... &quot;</i>. <code>man 3 crypt</code>: <i>&quot;...By taking the lowest 7 bits of each <b>of the first eight characters</b> of the key...&quot;</i>. Thus like he said: if you need something more secure don&#39;t use <code>crypt</code>."}, {"owner": {"reputation": 809, "user_id": 2870624, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/XbhzQ.jpg?s=128&g=1", "display_name": "gpwr", "link": "https://stackoverflow.com/users/2870624/gpwr"}, "edited": false, "score": 1, "creation_date": 1555662342, "post_id": 55758301, "comment_id": 98192836, "body": "The pessimist in me would say, rather do not include &#39;crypt&#39; in the modern Perl distributions because people will read the manual entry for &#39;crypt&#39; and skip the parts about how secure it is. A car that comes out of the factory with only one break pad will probably be a very bad idea. Humans love making mistakes and are notorious for skipping bits or &#39;miss&#39; important sections of documents that they should have read... My 2 cents."}], "answers": [{"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 1, "last_activity_date": 1555662002, "creation_date": 1555662002, "answer_id": 55758753, "question_id": 55758301, "link": "https://stackoverflow.com/questions/55758301/how-to-get-perl-crypt-to-encrypt-more-than-8-characters/55758753#55758753", "title": "How to get Perl crypt to encrypt more than 8 characters?", "body": "<p>To quote from <a href=\"https://perldoc.perl.org/functions/crypt.html\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n  <p>Traditionally the result is a string of 13 bytes: two first bytes of the salt, followed by 11 bytes from the set <code>[./0-9A-Za-z]</code>, and only the first eight bytes of PLAINTEXT mattered. But alternative hashing schemes (like MD5), higher level security schemes (like C2), and implementations on non-Unix platforms may produce different strings.</p>\n</blockquote>\n\n<p>So the exact return value of <code>crypt</code> is system dependent, but it often uses an algorithm that only looks at the first 8 byte of the password. These two things combined make it a poor choice for portable password encryption. If you're using a system with a stronger encryption routine and don't try to check those passwords on incompatible systems, you're fine. But it sounds like you're using an OS with the old crappy DES routine.</p>\n\n<p>So a better option is to use a module off of CPAN that does the encryption in a predictable, more secure way.</p>\n\n<p>Some searching gives a few promising looking options (That I haven't used and can't recommend one over another; I just looked for promising keywords on metacpan):</p>\n\n<ul>\n<li><a href=\"https://metacpan.org/pod/Crypt::SaltedHash\" rel=\"nofollow noreferrer\">Crypt::SaltedHash</a></li>\n<li><a href=\"https://metacpan.org/pod/Authen::Passphrase::SaltedDigest\" rel=\"nofollow noreferrer\">Authen::Passphrase::SaltedDigest</a></li>\n<li><a href=\"https://metacpan.org/pod/Crypt::Bcrypt::Easy\" rel=\"nofollow noreferrer\">Crypt::Bcrypt::Easy</a></li>\n<li><a href=\"https://metacpan.org/pod/Crypt::Password::Util\" rel=\"nofollow noreferrer\">Crypt::Password::Util</a></li>\n</ul>\n"}], "owner": {"reputation": 809, "user_id": 2870624, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/XbhzQ.jpg?s=128&g=1", "display_name": "gpwr", "link": "https://stackoverflow.com/users/2870624/gpwr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1555662002, "creation_date": 1555659627, "question_id": 55758301, "link": "https://stackoverflow.com/questions/55758301/how-to-get-perl-crypt-to-encrypt-more-than-8-characters", "title": "How to get Perl crypt to encrypt more than 8 characters?", "body": "<p>Only the first 8 characters is encrypted when the Perl <strong>crypt</strong> function is used. Is there a way to get it to use more characters?</p>\n\n<p>As an example: </p>\n\n<pre><code>$crypted_password = crypt (\"PassWord\", \"SALT\");\n</code></pre>\n\n<p>and </p>\n\n<pre><code>$crypted_password = crypt (\"PassWord123\", \"SALT\");\n</code></pre>\n\n<p>returns exactly the same result. <strong>$crypted_password</strong> has exactly the same value.</p>\n\n<p>Would love to use <strong>crypt</strong> because it is a quick and easy solution to some none reversible encryption but this limit does not make it useful for anything serious.</p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1555640614, "post_id": 55755797, "comment_id": 98187649, "body": "please show examples of what you expect to store in <code>$loctime</code> and <code>$utime</code>"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1555640635, "post_id": 55755797, "comment_id": 98187653, "body": "Where is <code>uptime</code> defined in your code?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1555640756, "post_id": 55755797, "comment_id": 98187676, "body": "You <i>really</i> need to <code>use strict;</code> (and <code>use warnings;</code> instead of <code>-w</code> on the command line... Are you learning from a seriously outdated source?)"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1555640840, "post_id": 55755797, "comment_id": 98187693, "body": "Plus of course, there&#39;s <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#HTML-Generation-functions-should-no-longer-be-used\" rel=\"nofollow noreferrer\">this warning about CGI.pm html generation functions</a>.."}, {"owner": {"reputation": 19, "user_id": 8268057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93d444d5263ee1bffff880278c3b5f43?s=128&d=identicon&r=PG&f=1", "display_name": "hanktank45", "link": "https://stackoverflow.com/users/8268057/hanktank45"}, "edited": false, "score": 0, "creation_date": 1555641254, "post_id": 55755797, "comment_id": 98187767, "body": "loctime will display localtime (i.e. Thu Apr 18 22:29:07 2019) and utime will display uptime (i.e. 22:33:57 up 454 days, 18:12,  2 users,  load average: 0.00, 0.00, 0.00)"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 8268057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93d444d5263ee1bffff880278c3b5f43?s=128&d=identicon&r=PG&f=1", "display_name": "hanktank45", "link": "https://stackoverflow.com/users/8268057/hanktank45"}, "edited": false, "score": 0, "creation_date": 1555642493, "post_id": 55755964, "comment_id": 98187993, "body": "$utime = qx( /usr/bin/uptime ); works perfectly. From what I was reading online I though &quot;uptime&quot; was a perl function, but as you pointed out it is a unix command. That is what was throwing me off. Thank you"}], "tags": [], "owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "is_accepted": true, "score": 2, "last_activity_date": 1555642031, "creation_date": 1555642031, "answer_id": 55755964, "question_id": 55755797, "link": "https://stackoverflow.com/questions/55755797/cgi-file-utilizing-perl-to-find-uptime/55755964#55755964", "title": "cgi file utilizing perl to find uptime", "body": "<p>The relevant lines of the code are:</p>\n\n<pre><code>$loctime = localtime;\n$utime = uptime;\n</code></pre>\n\n<p>These behave somewhat differently.</p>\n\n<p>The first calls the Perl function \"localtime\" and assigns its result to the variable. Because it is called in scalar context, the function returns a human readable string.</p>\n\n<p>The second line should produce a warning of some sort unless you have defined <code>uptime</code> somewhere in your program. Perhaps:</p>\n\n<blockquote>\n  <p>Unquoted string \"uptime\" may clash with future reserved word</p>\n</blockquote>\n\n<p>This explains why <code>$utime</code> ends up contains the word \"uptime\".</p>\n\n<p>It seems you want to call the unix command <code>uptime</code> and assign its output to the variable. For this, one would normally use some variant of <code>qx//</code> (aka backticks):</p>\n\n<pre><code>$utime = `/usr/bin/uptime`;\n\n$utime = qx( /usr/bin/uptime );\n</code></pre>\n\n<p>See <a href=\"https://perldoc.perl.org/functions/qx.html\" rel=\"nofollow noreferrer\"><code>perldoc -f qx</code></a> for details.</p>\n"}], "owner": {"reputation": 19, "user_id": 8268057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93d444d5263ee1bffff880278c3b5f43?s=128&d=identicon&r=PG&f=1", "display_name": "hanktank45", "link": "https://stackoverflow.com/users/8268057/hanktank45"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 55755964, "answer_count": 1, "score": 0, "last_activity_date": 1555642530, "creation_date": 1555640270, "last_edit_date": 1555642530, "question_id": 55755797, "link": "https://stackoverflow.com/questions/55755797/cgi-file-utilizing-perl-to-find-uptime", "title": "cgi file utilizing perl to find uptime", "body": "<p>I have a cgi file using perl where I want to display localtime and uptime. I cannot seem to get uptime to work correctly</p>\n\n<p>I am trying to set variable $utime = uptime but this does not work currently. I tried using /proc/uptime as well and that did not work. Below is what I have tried so far</p>\n\n<pre><code>#!/usr/bin/perl -w\n#Script Name: sysInfo.cgi\n\nuse CGI \":standard\";\n\n$loctime = localtime;\n$utime = uptime;\n\nprint header,\n        start_html(\"Localtime and Uptime\"),\n        h1(\"$loctime\"),\n        h1(\"$utime\"),\n        end_html;\n</code></pre>\n\n<p>I am sure I am missing something simple but I just keep getting uptime as a string when executing in my browser.</p>\n"}, {"tags": ["perl", "vmware"], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 1222307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e4593780df11bb64273008c2f8925227?s=128&d=identicon&r=PG", "display_name": "abatie", "link": "https://stackoverflow.com/users/1222307/abatie"}, "edited": false, "score": 0, "creation_date": 1555699113, "post_id": 55756618, "comment_id": 98206969, "body": "ManagedObjectReference is just a base class: <code>Symbols in &#39;ManagedObjectReference&#39; namespace: \tBEGIN \tISA \tdeserialize \tget_property_list \tproperty_list \tserialize \ttype</code>"}, {"owner": {"reputation": 149, "user_id": 1222307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e4593780df11bb64273008c2f8925227?s=128&d=identicon&r=PG", "display_name": "abatie", "link": "https://stackoverflow.com/users/1222307/abatie"}, "edited": false, "score": 0, "creation_date": 1555719010, "post_id": 55756618, "comment_id": 98212136, "body": "I poked around in the perl modules, and CreateNasDatastore is in VIM25Runtime, which was included in the latest 6.7 SDK, but when I use it instead of VIRuntime, I get <code>Use of inherited AUTOLOAD for non-method Opts::get_option() is deprecated at &#47;usr&#47;share&#47;perl5&#47;VMware&#47;VICommon.pm line 440. connected to vcenter01.ad.casco.net Vim::find_entity_view called, but no global session is defined at .&#47;mkds line 34.</code>"}, {"owner": {"reputation": 149, "user_id": 1222307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e4593780df11bb64273008c2f8925227?s=128&d=identicon&r=PG", "display_name": "abatie", "link": "https://stackoverflow.com/users/1222307/abatie"}, "edited": false, "score": 0, "creation_date": 1555723055, "post_id": 55756618, "comment_id": 98212585, "body": "Further investigation found that VIRuntime checks the server sdk version (apparently 2.5) and loads VIM25Runtime itself, so this was a red herring"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1555648055, "creation_date": 1555648055, "answer_id": 55756618, "question_id": 55755571, "link": "https://stackoverflow.com/questions/55755571/how-to-access-createnasdatastore-in-the-vmware-sdk/55756618#55756618", "title": "How to access CreateNasDatastore in the vmware sdk?", "body": "<p>The document you link to is not about a Perl SDK, and it's possible that the Perl bindings would look slightly different (different case conventions, different order of inputs, stuff like that) or even very different from the bindings for another language.</p>\n\n<p>So here's a general tip. To see the methods supported by the <code>ManagedObjectReference</code> tip, inspect the stash variable <code>%ManagedObjectReference::</code>.</p>\n\n<pre><code>print \"Symbols in 'ManagedObjectReference' namespace:\\n\\t\";\nprint join(\"\\n\\t\", sort keys %ManagedObjectReference::);\n</code></pre>\n\n<p>That will list the symbols in the namespace, some of which will be method names, and maybe they will give you a hint about the correct spelling of the method you are looking for.</p>\n"}, {"tags": [], "owner": {"reputation": 149, "user_id": 1222307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e4593780df11bb64273008c2f8925227?s=128&d=identicon&r=PG", "display_name": "abatie", "link": "https://stackoverflow.com/users/1222307/abatie"}, "is_accepted": false, "score": 0, "last_activity_date": 1555724189, "last_edit_date": 1555724189, "creation_date": 1555723477, "answer_id": 55769449, "question_id": 55755571, "link": "https://stackoverflow.com/questions/55755571/how-to-access-createnasdatastore-in-the-vmware-sdk/55769449#55769449", "title": "How to access CreateNasDatastore in the vmware sdk?", "body": "<blockquote>\n  <p>I found that some of the command line tools installed with the SDK are perl, and found this solution in vicfg-nas (it shows how to build the argument structure too):</p>\n</blockquote>\n\n<pre><code>use VMware::VIRuntime;\nuse VMware::VIExt;\n...\neval {\n    Vim::login( user_name =&gt; $esx_user, password =&gt; $esx_pw, service_url =&gt; \"https://$server/sdk\");\n};\n...\nmy $datacenter_view = Vim::find_entity_view(view_type =&gt; 'Datacenter');\nmy $host_views = Vim::find_entity_views(view_type =&gt; 'HostSystem',\n                                        begin_entity =&gt; $datacenter_view);\nforeach my $host_view (@$host_views) {\n    my $host = $host_view-&gt;{'name'};\n    eval {\n        Vim::login( user_name =&gt; $esx_user, password =&gt; $esx_pw, service_url =&gt; \"https://$host/sdk\");\n    };\n\n    my $ds_view = Vim::get_view(mo_ref =&gt; $host_view-&gt;{'configManager.datastoreSystem'});\n\n    my $hostNasVolSpec = new HostNasVolumeSpec (remoteHost =&gt; $fileserver, \n                                               remotePath =&gt; $share, \n                                               localPath =&gt; $label,\n                                               accessMode =&gt; $accessMode); \n    $ds_view-&gt;CreateNasDatastore(spec =&gt; $hostNasVolSpec);\n}\n\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 1222307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e4593780df11bb64273008c2f8925227?s=128&d=identicon&r=PG", "display_name": "abatie", "link": "https://stackoverflow.com/users/1222307/abatie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1555724189, "creation_date": 1555637905, "question_id": 55755571, "link": "https://stackoverflow.com/questions/55755571/how-to-access-createnasdatastore-in-the-vmware-sdk", "title": "How to access CreateNasDatastore in the vmware sdk?", "body": "<p>I'm trying to use the Vmware Perl SDK to mount an nfs datastore, and the docs are...challenging...but while I thought I had it worked out, I get:</p>\n\n<p>Can't locate object method \"CreateNasDatastore\" via package \"ManagedObjectReference\" at ./mkds line 65.</p>\n\n<p>I've updated to the latest Perl SDK (6.7) as well...</p>\n\n<p>According to <a href=\"https://pubs.vmware.com/vi3/sdk/ReferenceGuide/vim.host.DatastoreSystem.html\" rel=\"nofollow noreferrer\">https://pubs.vmware.com/vi3/sdk/ReferenceGuide/vim.host.DatastoreSystem.html</a></p>\n\n<p>CreateNasDatastore is a method in the Managed Object HostDatastoreSystem, which is a property of HostConfigManager, so for each host, I get the HostSystem view and then use the configManager->datastoreSystem object:</p>\n\n<pre><code>...\nforeach my $host_view (@$host_views) {\n...\n    print \"connected to $host\\n\";\n\n    my $cf_views = Vim::find_entity_views(view_type =&gt; 'HostSystem');\n    foreach my $cfv (@$cf_views) {\n        my $ds = $cfv-&gt;configManager-&gt;datastoreSystem;\n        print Dumper($ds);\n        # no arguments yet, just trying to find out how to invoke it\n        $ds-&gt;CreateNasDatastore();\n        exit 0;\n    }\n}\n</code></pre>\n\n<pre><code>connected to vcenter01.ad.casco.net\nHosts found:\n1: cvo-esx5.ad.casco.net\nconnected to cvo-esx5.ad.casco.net\n$VAR1 = bless( {\n                 'value' =&gt; 'ha-datastoresystem',\n                 'type' =&gt; 'HostDatastoreSystem'\n               }, 'ManagedObjectReference' );\nCan't locate object method \"CreateNasDatastore\" via package \"ManagedObjectReference\" at ./mkds line 65.\n</code></pre>\n\n<p>I'm not sure how else to access it, and hoping someone else understands this structure better than I do...</p>\n"}, {"tags": ["perl", "closures"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1555617190, "post_id": 55752813, "comment_id": 98182269, "body": "don&#39;t have a 5.16.2 to try, but you should be able to add (after your <code>use warnings;</code>) <code>use warnings FATAL =&gt; &#39;exiting&#39;;</code>"}, {"owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1555619797, "post_id": 55752813, "comment_id": 98183200, "body": "Unfortunately that only works if it is given at every site where <code>tx_exec</code> is called. Imagine it as a library routine which is included as a perl module from some middleware. There are hundreds of sites calling <code>tx_exec</code>, passing it a subroutine, and I&#39;d like to catch them all at the <code>tx_exec</code> site. (As I said, with about 5-6 lines of code, it can be done manually, just exploring possibilities of a <i>saner</i> Perl)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1555620058, "post_id": 55752813, "comment_id": 98183291, "body": "Can implement it in the <code>WARN</code> hook in the sub, say <code>local $SIG{__WARN__} = sub {  die @_ if $_[0] =~ &#47;Exiting subroutine via (?:last|next)&#47;; warn @_ };</code>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1555621003, "post_id": 55752813, "comment_id": 98183638, "body": "you should be able to put it inside your eval; have <code>eval { use warnings FATAL =&gt; &#39;exiting&#39;; { ... } }</code> where ... is your existing code.  (The added bare block around it is important)"}, {"owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555621541, "post_id": 55752813, "comment_id": 98183842, "body": "Interesting. It works, but this time the error is not printed, so it&#39;s kind of shooting me in the foot by masking the original error... Why is the bare block that important. Out of curiosity I tried and saw that it is indeed essential."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1555621615, "post_id": 55752813, "comment_id": 98183866, "body": "&quot;<i>but this time the error is not printed</i>&quot;  -- I get it printed, with a line number and all (see my answer) ?"}, {"owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555622590, "post_id": 55752813, "comment_id": 98184152, "body": "I&#39;ll have to take my comment back, it is indeed printed with my own example (after splitting it into a <code>.pm</code> and a <code>.pl</code>). It is not getting printed in my production environment with the actual middleware exhibiting the problem -- I guess I have some other factors at play that would suppress that output there. Thanks."}, {"owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555624950, "post_id": 55752813, "comment_id": 98184797, "body": "I managed to reproduce my issue: if the calling site doesn&#39;t have the warning enabled, the warning isn&#39;t printed. Try it with a <code>.pl</code> with no warnings, calling <code>tx_exec</code> from an imported <code>.pm</code> module which does have the warnings."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1555628548, "post_id": 55752813, "comment_id": 98185650, "body": "A bare block is a loop, so next/last apply to it.  It wouldn&#39;t stop e.g. <code>next SOMELABEL</code> if that existed."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1555652348, "post_id": 55752813, "comment_id": 98189765, "body": "Re &quot;<i>but I&#39;m hoping for a more idiomatic approach</i>&quot;, Turning on warnings is the idiomatic approach. Trying to support code that doesn&#39;t do this is a bad idea. If they want to hang themselves, let them. Them using <code>next</code>/<code>last</code> incorrectly is not your problem."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1555652364, "post_id": 55752813, "comment_id": 98189767, "body": "The warnings in the caller fire merely on code <code>sub { last; }</code> that is <i>in the caller</i>. There&#39;s still plenty to work with in your module even if the caller turns off warnings (what you shouldn&#39;t fight against, btw)."}, {"owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555661742, "post_id": 55752813, "comment_id": 98192676, "body": "@ikegami It&#39;s always more complicated than that :) The person who wrote the bad client code is on the same team that wrote the library code. It&#39;s a mistake. And it led to an infinite loop in production, producing huge log files under sensitive circumstances -- unacceptable stuff. In the end, it <i>is</i> my problem, if client code clobbers my library code."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555661886, "post_id": 55752813, "comment_id": 98192711, "body": "Nonsense. That actually makes it simpler! You can actually have them fix the problems (the first being the lack of warnings). And you can make the warning fatal on the other side"}, {"owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1555662701, "post_id": 55752813, "comment_id": 98192954, "body": "@ysth It seems that I can flag that the sub returned properly within the bare block, and check it just after the bare block to determine if the return from the sub was caused by <code>next&#47;last</code>. This comes closest to an <i>idiomatic</i> solution: it&#39;s succinct and very localized. If you post this as an answer, I&#39;ll accept it."}], "answers": [{"comments": [{"owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555622638, "post_id": 55753522, "comment_id": 98184163, "body": "The <code>local $SIG</code> solution seems as the most useful to me. It localizes the handling to one place and allows me to emit custom diagnostics/actions when this happens."}, {"owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555623156, "post_id": 55753522, "comment_id": 98184293, "body": "Ooops. None of the solutions work if the calling site has no warnings enabled, which returns us to the starting point... Try the code with a module and a script, and make sure the script calling <code>tx_exec</code> has no warnings enabled. This is also the reason why I originally said that I get nothing printed. Adding the bare block modifies the behavior, but if no warnings are enabled at call site, I get no warning output. Can the imported module force the warning at the call site?"}, {"owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555662016, "post_id": 55753522, "comment_id": 98192737, "body": "Let&#39;s take a step back: I don&#39;t care about the &quot;Can&#39;t next/last&quot; from a proper function. That will raise an exception any time, which will properly terminate the eval. The problem is <i>only</i> when client using next/last skips the rest of the loop in library code. I only care about the next/last from a closure that doesn&#39;t <code>die</code> under normal circumstances, and doesn&#39;t <code>warn</code> without warnings enabled. So far it seems that I can&#39;t force the warning in client code (could I actually do that?) unless the client is using warnings by themselves. This makes my library less robust."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555662240, "post_id": 55753522, "comment_id": 98192809, "body": "@Irfy OK, I don&#39;t understand.  You have <code>$sub-&gt;($args);</code> under <code>eval</code>, what runs client&#39;s code (which has <code>last</code> in a sub).  So it throws, it&#39;s handled by eval, and it&#39;s available right under <code>unless ($ok)</code>.  So if you test <code>$@</code> you&#39;ll see whether <code>last</code> happened, etc.  No?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555662339, "post_id": 55753522, "comment_id": 98192833, "body": "@Irfy The client&#39;s bad code (with <code>last</code> in a sub) runs in your <code>rx_exec</code> and throws an exception; you have on your hands all you need. No?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555662492, "post_id": 55753522, "comment_id": 98192882, "body": "@Irfy &quot;<i>The problem is only when client using next/last skips the rest of the loop in library code.</i>&quot;  --- how do they do that?  If they have <code>next</code> or <code>last</code> there&#39;ll be an exception and you&#39;re in business."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555662584, "post_id": 55753522, "comment_id": 98192913, "body": "@Irfy  &quot;<i>from a closure</i>&quot; -- I don&#39;t see any closures?  ...  &quot;<i>that doesn&#39;t <code>die</code> under normal circumstances, and doesn&#39;t warn without warnings enabled.</i>&quot;  -- but, how? The code you show <i>does</i> &quot;die&quot; (but is <code>eval</code>-ed), due to that next/last."}, {"owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555703370, "post_id": 55753522, "comment_id": 98208452, "body": "When passed a function, a bare <code>next&#47;last</code> will die and I can catch it. But in my problem definition, <code>$sub</code> is a closure (there are four closures passed from the main part of the script in my example). Yes, it runs in <code>tx_exec</code>, but it doesn&#39;t throw an exception if the module/script that defines the closure has no fatal warnings. To illustrate, run the code from my git gist <b>verbatim</b> (so two files, using either of the two non-working approaches there, except the manual approach) and you will understand my point immediately."}, {"owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555703515, "post_id": 55753522, "comment_id": 98208516, "body": "I used <i>subroutine</i> and <i>closure</i> as synonyms in my question, sorry about that -- perl uses <i>subroutine</i> to mean <i>closure</i> in its warning message, that&#39;s why. When <code>next&#47;last</code> is executed in a function, it dies and prints a different message altogether. <b>That case is trivial, and not the subject matter of my question</b> (sorry for not making it clear in the beginning)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555720669, "post_id": 55753522, "comment_id": 98212339, "body": "@Irfy Oh, I got it. I&#39;m not crazy and neither are you: question code, verbatim, does not throw, but with a <i>slight</i> tweak (that I have) it does! It&#39;s not about a closure (which you don&#39;t use), but about there being-or-not a &quot;loop block&quot; <i>anywhere</i> up the scope (so it seems); if there isn&#39;t it dies. This is interesting. I&#39;ll figure out a nice solution."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555731306, "post_id": 55753522, "comment_id": 98213566, "body": "@Irfy Updated.  My previous tests never had an enclosing loop (like your <code>while (1)</code>) since I didn&#39;t think I needed it ... so I got the exception; one doesn&#39;t with a loopy block anywhere in any higher scope. Sorry about that.  Fixed: by calling the passed code outside of any loops you get the exception for (their use of) <code>last&#47;next</code>, what allows you to handle it.  I&#39;ve implemented it by running the coderef outside of <code>while</code> the first time.  I think that using interpreter&#39;s exception and handling that in a separate sub is a good solution. There sure are other ways to do this.  Let me know"}, {"owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555879248, "post_id": 55753522, "comment_id": 98243693, "body": "Now the solution seems to work :) One important nitpick though: <i>it also means that we can run ... directly in the while (1), since we have checked for bad use of last/next on the first run</i>. Imagine a concurrent system with some sort of locking. If we fail to lock early the first time and return, we retry and could succeed the second time and later trigger our erroneous <code>next&#47;last</code> -- perfectly valid, no &quot;going out of our way&quot; scenario, that could make things go awry, so I would stick to calling the <code>$sub</code> in a <code>sub</code> <b>always</b>. But nice approach, +1."}, {"owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555883513, "post_id": 55753522, "comment_id": 98244621, "body": "I spoke to soon again :( As stated in my last comment, if we run <code>run_coderef</code> always inside the loop, the <code>next&#47;last</code> will still &quot;see&quot; that there is a loop around the calling sub and will still not fail with exception! In other words, your solution doesn&#39;t work, even if we keep the first run before the loop, if by (legitimate) chance, the second run triggers a <code>next&#47;last</code>. This is horrible :( Thanks for your effort, but even this doesn&#39;t work (at least not up to the standard of robustness I&#39;m going for). I think @ysth&#39;s local bare block with manual detection is the way to go."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555918793, "post_id": 55753522, "comment_id": 98251220, "body": "@Irfy  &quot;<i>the second run triggers a <code>next&#47;last</code></i>&quot;  -- Well, this is what I meant by &quot;<i>... go out of their way</i>&quot;, and I don&#39;t see how it is &quot;<i>by (legitimate) chance,</i>&quot;. Sorry if I didn&#39;t explain it well : your sub receives their coderef. It runs it, and then <i>your sub decides</i> that the run failed, and runs it (the same coderef) again.  That coderef would have to <i>know that it has been run once</i> and to change what it&#39;s doing on the second run!  Nah, not &quot;legitimate.&quot;   Can do it, sure, but that&#39;d be malicious code.  (What still is a possibility, thus the &quot;out of their way&quot; note.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555918870, "post_id": 55753522, "comment_id": 98251252, "body": "@Irfy Note: I am just discussing code, not trying to persuade you one way or the other. You do (and in particular &quot;accept&quot;) whatever suits you best of course"}, {"owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555931332, "post_id": 55753522, "comment_id": 98255695, "body": "I&#39;m talking here about a very simple, legitimate thing. We try to get a lock in a concurrent system in the beginning of our code and fail =&gt; retry. On our second attempt, we get it, and later trigger the (unintended/mistaken) <code>next&#47;last</code>. Another legitimate example in a concurrent system would be that the state in a database has changed, causing a different code path in our coderef to be taken on retry, triggering the <code>next&#47;last</code> in that path. We would have to pretend that real-world code has no &quot;alternative control paths that can be taken due to changes in the system in different executions&quot;."}, {"owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555931475, "post_id": 55753522, "comment_id": 98255741, "body": "Having argued about this a bit, please keep in mind that I majorly appreciate your attempts, analysis and potential solutions to my problem, I&#39;m sure to have learned from your answer, in any case :) It just so turns out that Perl is the culprit here, with its <code>setjmp&#47;longjmp</code>-like-semantics in it cross-sub-jumping <code>next&#47;last&#47;redo</code> making all those attempts not sufficiently robust for my environment. Thanks a lot!"}, {"owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555933023, "post_id": 55753522, "comment_id": 98256369, "body": "I went out of my way to present, in pseudo-code, some realistic conditions applicable to production systems, to corroborate my &quot;legitimately only on second try&quot; argument: <a href=\"https://gist.github.com/Irfy/5543b32efdb88777b61aa249f94894cc\" rel=\"nofollow noreferrer\">gist.github.com/Irfy/5543b32efdb88777b61aa249f94894cc</a> This pseudo-code is vaguely similar to the actual production code that prompted me to dive deeper into the issue and post this question in the first place. The original reason for the <code>next</code> to be there, is because this code was migrated from an older system that didn&#39;t have such coderef-within-transaction concept and <code>next</code> was the tool of choice for flow control."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555955369, "post_id": 55753522, "comment_id": 98266412, "body": "@Irfy Oh yes, those are good use cases; I wasn&#39;t thinking straight.  Don&#39;t even need concurrency, just dynamical decisions to <code>last</code>/<code>next</code>-or-not. I&#39;ll think a little more."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555955384, "post_id": 55753522, "comment_id": 98266418, "body": "@Irfy   Btw, there is <i>nothing</i> wrong with catching it manually with an extra block like you have it now -- let it play, allow it to do its <code>next</code>/<code>last</code> thing and detect that. I like that, in particular in the light of your explanation that the problem <i>is</i> due to (the original) flow control. (I was puzzled as to why that coderef gives you bare <code>next</code>.) I&#39;m just trying to find an interpreter-managed solution as well."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "edited": false, "score": 0, "creation_date": 1555955916, "post_id": 55753522, "comment_id": 98266642, "body": "@Irfy  &quot;<i>to present, in pseudo-code, some realistic conditions ... pseudo-code is vaguely similar to the actual production code</i>&quot;  -- yes, this is good and makes the point.  Btw, curious code I must say (the production-alike code you show)."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1555780270, "last_edit_date": 1555780270, "creation_date": 1555620368, "answer_id": 55753522, "question_id": 55752813, "link": "https://stackoverflow.com/questions/55752813/how-can-i-force-exiting-a-perl-subroutine-closure-via-last-next-to-fail-the-prog/55753522#55753522", "title": "How can I force exiting a perl subroutine/closure via last/next to fail the program automatically?", "body": "<p><strong>Short</strong> &nbsp; Using <code>next</code>/<code>last</code> in the sub (that caller passes as coderef) triggers an exception, if not within a \"loop block.\" This affords an easy handling of such use, with a small change of <code>tx_exec()</code>.</p>\n\n<hr>\n\n<p>The wrong use of <code>last</code>/<code>next</code> raised in the question is a little nuanced. First, from <a href=\"https://perldoc.perl.org/functions/last.html\" rel=\"nofollow noreferrer\">last</a></p>\n\n<blockquote>\n  <p><code>last</code> cannot be used to exit a block that returns a value such as <code>eval {}</code>, <code>sub {}</code>, or <code>do {}</code>, and should not be used to exit a <code>grep</code> or <code>map</code> operation.</p>\n</blockquote>\n\n<p>and for doing this in a sub or <code>eval</code> we get a warning</p>\n\n<pre>\nExiting subroutine via last at ...\n</pre>\n\n<p>(and for \"eval\"), and similarly for <code>next</code>. These are classified as <code>W</code> in <a href=\"https://perldoc.perl.org/perldiag.html\" rel=\"nofollow noreferrer\">perldiag</a> and can be controlled by using/not the <code>warnings</code> pragma.<sup>&dagger;</sup> This fact foils attempts to make such use fatal by <code>FATAL =&gt; 'exiting'</code> warning or by <code>$SIG{__WARN__}</code> hook.</p>\n\n<p>However, if such use of <code>next</code> or <code>last</code> (in a sub or <code>eval</code>) <em>has no \"loop block\" in any enclosing scope (or call stack) then it also raises an exception</em>.<sup>&Dagger;</sup> The message is</p>\n\n<pre>\nCan't \"last\" outside a loop block...\n</pre>\n\n<p>and similarly for <code>next</code>.  It is found in <a href=\"https://perldoc.perl.org/perldiag.html\" rel=\"nofollow noreferrer\">perldiag</a> (search for <code>outside a loop</code>), classified as <code>F</code>.</p>\n\n<p>Then one solution for the posed problem is to run the coderef passed by caller <em>outside of loop blocks</em>, and we get the interpreter to check for and alert us to (raise exception) the offending use.  As the <code>while (1)</code> loop is there only to be able to try multiple times this can be implemented.</p>\n\n<p>The coderef can be run and tested against this exception in a utility routine</p>\n\n<pre><code>sub run_coderef {\n    my ($sub, @args) = @_; \n\n    my $sub_ret;\n    my $ok = eval { $sub_ret = $sub-&gt;(@args); 1 };\n    if (not $ok) { \n        if ($@ =~ /^Can't \"(?:next|last)\"/) {  #'\n            die $@;                            # disallow such use\n        }\n        else { return }                        # other error, perhaps retry\n    }   \n    else { return $sub_ret }\n}\n</code></pre>\n\n<p>which can be used like</p>\n\n<pre><code>sub tx_exec {\n    my ($sub, @args) = @_; \n\n    my $sub_ret = run_coderef($sub, @args);\n\n    my $run_again = (defined $sub_ret) ? 0 : 1;\n\n    if ($run_again) { \n        my $MAX_TRIES = 3;\n        my $try = 0;\n\n        while (1) { \n            ++$try;\n            $sub_ret = run_coderef($sub, @args);\n\n            if ( not defined $sub_ret ) {  # \"other error\", run again\n                if ($try &gt;= $MAX_TRIES) { \n                    print \"failed after $try tries\\n\";\n                   return (undef, undef);\n                }\n                print \"try #$try failed, retrying...\\n\";\n                next;\n            }\n            ...\n        }\n    }\n}   \n</code></pre>\n\n<p>This approach makes perfect sense design wise: it allows an exception to be raised for the disallowed use, and it localizes the handling in its own sub.</p>\n\n<p>The disallowed behavior is checked for really only on the first run, since after that <code>run_coderef</code> is called out of a loop, in which case (this) exception isn't thrown. This is fine since the repeated runs (for \"allowed\" failures) are executed with that same sub so it is enough to check the first use.</p>\n\n<p>On the other hand, it also means that we can  </p>\n\n<ul>\n<li><p>run <code>eval { $sub_ret = $sub-&gt;(@args) ... }</code> directly in the <code>while (1)</code>, since we <em>have</em> checked for bad use of <code>last</code>/<code>next</code> on the first run</p></li>\n<li><p>Can add further cases to check for in <code>run_coderef</code>, making it a more rounded checker/enforcer. The first example is the <code>Exiting</code> warnings, which we can make fatal and check for them as well. This will be useful if warnings in the caller are enabled</p></li>\n</ul>\n\n<p>This approach <em>can</em> be foiled but the caller would have to go out of their way toward that end.</p>\n\n<p>Tested with v5.16.3 and v5.26.2.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup>&thinsp;Btw, you can't fight a caller's decision to turn off warnings. Let them be. It's their code.</p>\n\n<p><sup>&Dagger;</sup>&thinsp;This can be checked with</p>\n\n<pre><code>perl -wE'sub tt { last }; do { tt() }; say \"done\"'\n</code></pre>\n\n<p>where we get</p>\n\n<pre>\nExiting subroutine via last at -e line 1.\nCan't \"last\" outside a loop block at -e line \n</pre>\n\n<p>while if there is a \"loopy\" block</p>\n\n<pre><code>perl -wE'sub tt { last }; { do { tt() } }; say \"done\"'\n</code></pre>\n\n<p>we get to see the end of the program, no exception</p>\n\n<pre>\nExiting subroutine via last at -e line 1.\ndone\n</pre>\n\n<p>The extra block <code>{ ... }</code> \"<em>semantically identical to a loop that executes once</em>\" (<a href=\"https://perldoc.perl.org/functions/next.html\" rel=\"nofollow noreferrer\">next</a>).</p>\n\n<p>This can be checked for <code>eval</code> by printing its message in <code>$@</code>.</p>\n\n<hr>\n\n<p><em>The original post, based on the expectation that only warnings are emitted</em></p>\n\n<p>The <a href=\"https://perldoc.perl.org/warnings.html\" rel=\"nofollow noreferrer\">warnings pragma</a> is lexical, so adding per ysth comment</p>\n\n<pre><code>use warnings FATAL =&gt; 'exiting';\n</code></pre>\n\n<p>in the sub itself (or in <code>eval</code> to scope it more tightly) should work under the restrictions</p>\n\n<pre><code>sub tx_exec { \n    use warnings FATAL =&gt; \"exiting\"; \n\n    my ($sub, $args) = @_; \n    $sub-&gt;($args);        \n}; \n</code></pre>\n\n<p>since the warning fires inside the <code>tx_exec</code> scope. In my test the call to this with a coderef not doing <code>last/next</code> first runs fine, and it dies only for a later call with them.</p>\n\n<p>Or, can implement it using <code>$SIG{__WARN__}</code> <a href=\"https://perldoc.perl.org/perlvar.html#%SIG\" rel=\"nofollow noreferrer\">\"signal\" (hook)</a></p>\n\n<pre><code>sub tx_exec {   \n    local $SIG{__WARN__} = sub { \n        die @_ if $_[0] =~ /^Exiting subroutine via (?:last|next)/; \n        warn @_ \n    };\n\n    my ($sub, $args) = @_;\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "is_accepted": false, "score": 1, "last_activity_date": 1555662304, "creation_date": 1555662304, "answer_id": 55758827, "question_id": 55752813, "link": "https://stackoverflow.com/questions/55752813/how-can-i-force-exiting-a-perl-subroutine-closure-via-last-next-to-fail-the-prog/55758827#55758827", "title": "How can I force exiting a perl subroutine/closure via last/next to fail the program automatically?", "body": "<p>This is the <em>manual</em> approach I was mentioning in the question. So far this was the only approach that helped me cleanly handle misbehaving client code, without any assumptions or expectations.</p>\n\n<p>I'd prefer, and will gladly consider, a <em>more idiomatic</em> approach, like the <code>local $SIG</code> or <code>use warnings FATAL =&gt; 'exiting'</code>, <strong>if they work without any expectation from client code</strong> (specifically that it has warnings enabled in any form).</p>\n\n<p><strong><em>tx_exec.pl</em></strong>:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\n# no warnings!\n\nuse tx_exec qw(tx_exec);\n\ntx_exec (\"normal\", sub { return \"foobar\"; });\ntx_exec (\"die\", sub { die \"barbaz\\n\"; });\ntx_exec (\"last\", sub { last; });\ntx_exec (\"next\", sub { next; });\n</code></pre>\n\n<p><strong><em>tx_exec.pm</em></strong>:</p>\n\n<pre><code>package tx_exec;\n\nuse strict;\nuse warnings;\n\nrequire Exporter;\nour @ISA = qw(Exporter);\nour @EXPORT_OK = qw(tx_exec);\n\nmy $MAX_TRIES = 3;\n\nsub tx_exec {\n    my ($desc, $sub, $args) = @_;\n    print \"\\ntx_exec($desc):\\n\";\n    my $try = 0;\n    my $running = 0;\n    while (1) {\n        $try++;\n        my $sub_ret;\n        my $ok = eval {\n            # start transaction\n            die \"Usage of `next` disallowed in closure passed to tx_exec\\n\" if $running;\n            $running = 1;\n            $sub_ret = $sub-&gt;($args);\n            print \"sub returned properly\\n\";\n            # commit transaction\n            1;\n        };\n\n        $running = 0;\n\n        unless ($ok) {\n            if ($@ =~ /^Usage of `next`/) {\n                print $@;\n                return (undef, undef); # don't retry\n            }\n            print \"failed with error: $@\";\n            # rollback transaction\n            if ($try &gt;= $MAX_TRIES) {\n                print \"failed after $try tries\\n\";\n                return (undef, undef);\n            }\n            print \"try #$try failed, retrying...\\n\";\n            next;\n        }\n        # some cleanup\n        print \"returning (1, \".($sub_ret//'&lt;undef&gt;').\")\\n\";\n        return (1, $sub_ret);\n    }\n    print \"Usage of `last` disallowed in closure passed to tx_exec\\n\";\n    return (undef, undef);\n}\n</code></pre>\n\n<p><strong><em>output</em></strong>:</p>\n\n<pre><code>tx_exec(normal):\nsub returned properly\nreturning (1, foobar)\n\ntx_exec(die):\nfailed with error: barbaz\ntry #1 failed, retrying...\nfailed with error: barbaz\ntry #2 failed, retrying...\nfailed with error: barbaz\nfailed after 3 tries\n\ntx_exec(last):\nUsage of `last` disallowed in closure passed to tx_exec\n\ntx_exec(next):\nUsage of `next` disallowed in closure passed to tx_exec\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "is_accepted": true, "score": 0, "last_activity_date": 1555884068, "creation_date": 1555884068, "answer_id": 55787134, "question_id": 55752813, "link": "https://stackoverflow.com/questions/55752813/how-can-i-force-exiting-a-perl-subroutine-closure-via-last-next-to-fail-the-prog/55787134#55787134", "title": "How can I force exiting a perl subroutine/closure via last/next to fail the program automatically?", "body": "<p>For lack of @ysth's involvement in writing an answer, I'm writing the best solution I found so far, inspired by his first attempt from the comments to the question. (I will re-accept ysth's answer if he posts it later).</p>\n\n<hr>\n\n<p>The <code>eval</code> calling the coderef needs to look like this:</p>\n\n<pre><code>my $ok = eval {\n    # start transaction\n    my $proper_return = 0;\n    {\n        $sub_ret = $sub-&gt;($args);\n        $proper_return = 1;\n    }\n    die \"Usage of `next` or `last` disallowed in coderef passed to tx_exec\\n\" unless $proper_return;\n    # commit transaction\n    1;\n};\n</code></pre>\n\n<p>The bare block is acting as a loop which will immediately exit on either <code>next</code> or <code>last</code>, so whether we land after the bare block, or within it, from calling the coderef, we can deduce whether the coderef executed <code>next/last</code> and act appropriately.</p>\n\n<p>More on bare block semantics and their interaction with <code>next/last</code> can be found <a href=\"https://docstore.mik.ua/orelly/perl3/prog/ch04_05.htm\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p><em>It is left as an exercise for the reader to handle the rarely seen <code>redo</code> in the code above.</em></p>\n"}], "owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 650, "favorite_count": 0, "accepted_answer_id": 55787134, "answer_count": 3, "score": 4, "last_activity_date": 1555884068, "creation_date": 1555616708, "last_edit_date": 1555703948, "question_id": 55752813, "link": "https://stackoverflow.com/questions/55752813/how-can-i-force-exiting-a-perl-subroutine-closure-via-last-next-to-fail-the-prog", "title": "How can I force exiting a perl subroutine/closure via last/next to fail the program automatically?", "body": "<p>Given the following fully functional perl script and module:</p>\n\n<p><strong><em>tx_exec.pl</em></strong>:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict; # make sure $PWD is in your PERL5LIB\n# no warnings!\n\nuse tx_exec qw(tx_exec);\n\ntx_exec (\"normal\", sub { return \"foobar\"; });\ntx_exec (\"die\", sub { die \"barbaz\\n\"; });\ntx_exec (\"last\", sub { last; });\ntx_exec (\"next\", sub { next; });\n</code></pre>\n\n<p><strong><em>tx_exec.pm</em></strong>:</p>\n\n<pre><code>package tx_exec;\n\nuse strict;\nuse warnings;\n\nrequire Exporter;\nour @ISA = qw(Exporter);\nour @EXPORT_OK = qw(tx_exec);\n\nmy $MAX_TRIES = 3;\n\nsub tx_exec {\n    my ($desc, $sub, $args) = @_;\n    print \"\\ntx_exec($desc):\\n\";\n    my $try = 0;\n    while (1) {\n        $try++;\n        my $sub_ret;\n        my $ok = eval {\n            # start transaction\n            $sub_ret = $sub-&gt;($args);\n            # commit transaction\n            1;\n        };\n\n        unless ($ok) {\n            print \"failed with error: $@\";\n            # rollback transaction\n            if ($try &gt;= $MAX_TRIES) {\n                print \"failed after $try tries\\n\";\n                return (undef, undef);\n            }\n            print \"try #$try failed, retrying...\\n\";\n            next;\n        }\n        # some cleanup\n        print \"returning (1, \".($sub_ret//'&lt;undef&gt;').\")\\n\";\n        return (1, $sub_ret);\n    }\n}\n</code></pre>\n\n<p>I get the following output:</p>\n\n<pre><code>$ ./tx_exec.pl\ntx_exec(normal):\nreturning (1, foobar)\n\ntx_exec(die):\nfailed with error: barbaz\ntry #1 failed, retrying...\nfailed with error: barbaz\ntry #2 failed, retrying...\nfailed with error: barbaz\nfailed after 3 tries\n\ntx_exec(last):\n\ntx_exec(next):\n# infinite loop\n</code></pre>\n\n<p>I understand what is happening, and I'm getting a warning about it if I turn on warnings in the script defining the closures. However, can I force the program to fail/die automatically/idiomatically, when next/last would exit a closure-subroutine like here, under the following strict circumstances:</p>\n\n<ul>\n<li>The <code>$sub</code> being passed is a closure and not a simple function (a simple function dies on bare <code>next/last</code> anyway, which is trivial to handle)</li>\n<li>The library code (<code>tx_exec</code>) and the client code (invoking it) are in separate compilation units and the client <strong>does not use warnings</strong>.</li>\n</ul>\n\n<p>Using perl 5.16.2 (without possibility of upgrading).</p>\n\n<p>Here is a <a href=\"https://gist.github.com/Irfy/b41264f0067c921b3a25dd0bc6504dcd\" rel=\"nofollow noreferrer\">github gist</a> documenting all the approaches so far:</p>\n\n<ul>\n<li><code>use warnings FATAL =&gt; qw(exiting)</code> doesn't make a difference in library code</li>\n<li><code>local $SIG</code> handler doesn't work if the call site doesn't have <code>FATAL =&gt; qw(exiting)</code> warning enabled</li>\n<li><em>manual</em> detection works, but is somewhat cumbersome and all over the place (nonlocalized)</li>\n<li>ysth's approach with a bare block works best, as it catches the last/next, fully localizing manual detection and guaranteeing that nothing can go wrong (except next/last with labels, which is easier to avoid).</li>\n</ul>\n"}, {"tags": ["perl", "environment-variables"], "comments": [{"owner": {"reputation": 39, "user_id": 3358338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5663a09e3cbb757109c7a420ebd4ba54?s=128&d=identicon&r=PG&f=1", "display_name": "user3358338", "link": "https://stackoverflow.com/users/3358338/user3358338"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1555622382, "post_id": 55752593, "comment_id": 98184087, "body": "No, I don&#39;t see it when I run &quot;env&quot;.  But I do see it with &quot;echo $env&quot;."}, {"owner": {"reputation": 39, "user_id": 3358338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5663a09e3cbb757109c7a420ebd4ba54?s=128&d=identicon&r=PG&f=1", "display_name": "user3358338", "link": "https://stackoverflow.com/users/3358338/user3358338"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1555627838, "post_id": 55752593, "comment_id": 98185483, "body": "Yes, I should.  I was told &quot;you display the value of environment variable &#39;foo&#39; by typing &#39;echo $foo&#39;, and apparently that was too simplistic an explanation.  Is env a &quot;local shell variable,&quot; as zdim indicates below?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1556430925, "post_id": 55752593, "comment_id": 98432333, "body": "&quot;<i>too simplistic ...</i>&quot; --- indeed, <code>echo $foo</code> displays the value of <i>any</i> shell variable, local or environment. But <code>env</code> (or <code>printenv</code>) shows only environment variables (all of them)."}], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1555617109, "post_id": 55752614, "comment_id": 98182234, "body": "In bash, <code>printenv</code> will list all exported environment variables (that would be inherited by a child process), and <code>set</code> will list all variables including local environment variables in your shell."}, {"owner": {"reputation": 39, "user_id": 3358338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5663a09e3cbb757109c7a420ebd4ba54?s=128&d=identicon&r=PG&f=1", "display_name": "user3358338", "link": "https://stackoverflow.com/users/3358338/user3358338"}, "edited": false, "score": 0, "creation_date": 1555621462, "post_id": 55752614, "comment_id": 98183805, "body": "We use csh here, and I got &quot;export: Command not found.&quot;  /bin/env shows most (but not all) of my environment variables.  &quot;echo $env&quot; returns opsd, while &quot;env | grep env&quot; returns nothing."}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 3, "last_activity_date": 1555615809, "creation_date": 1555615809, "answer_id": 55752614, "question_id": 55752593, "link": "https://stackoverflow.com/questions/55752593/weird-environment-variables-that-arent-in-perls-env-hash/55752614#55752614", "title": "Weird environment variables that aren&#39;t in Perl&#39;s ENV hash", "body": "<p>Try <code>export</code>ing your variable from the shell. This will move it from the shell's variable list to the environment that all subprocesses will be able to see.</p>\n\n<pre><code>export env\nperl -E 'say $ENV{env}'\n</code></pre>\n\n<p>This should get it to show up.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1555621903, "post_id": 55753111, "comment_id": 98183958, "body": "@user3358338 Updated in relation to a shell other than <code>bash</code>"}, {"owner": {"reputation": 39, "user_id": 3358338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5663a09e3cbb757109c7a420ebd4ba54?s=128&d=identicon&r=PG&f=1", "display_name": "user3358338", "link": "https://stackoverflow.com/users/3358338/user3358338"}, "edited": false, "score": 0, "creation_date": 1555622189, "post_id": 55753111, "comment_id": 98184035, "body": "Is there a csh equivalent to &quot;export&quot;?  Even if there is, it&#39;s not a very good solution...  I wouldn&#39;t want users of my Perl script to have to &quot;export env&quot; before they run the script."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 39, "user_id": 3358338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5663a09e3cbb757109c7a420ebd4ba54?s=128&d=identicon&r=PG&f=1", "display_name": "user3358338", "link": "https://stackoverflow.com/users/3358338/user3358338"}, "edited": false, "score": 0, "creation_date": 1555622317, "post_id": 55753111, "comment_id": 98184071, "body": "@user3358338 No (not that I know of) -- in csh/tcsh it&#39;s either <code>set</code> or <code>setenv</code>.  As for what the users would do ... it they expect your script to know about a variable, they must either make it global or pass it to the script.  Can you explain a little more?"}, {"owner": {"reputation": 39, "user_id": 3358338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5663a09e3cbb757109c7a420ebd4ba54?s=128&d=identicon&r=PG&f=1", "display_name": "user3358338", "link": "https://stackoverflow.com/users/3358338/user3358338"}, "edited": false, "score": 0, "creation_date": 1555634503, "post_id": 55753111, "comment_id": 98186743, "body": "I&#39;m not the person who gave $env the value of opsd.  I just log in and find it in that condition.  I don&#39;t doubt that it was done with <code>set env = &quot;opsd&quot;</code>, as you say.  I would like my Perl script to be able to make use of that value.  I find it strange that csh has access to that value (with <code>echo $env</code>), but there&#39;s no way that Perl, launched from the csh that has access to that value, can have access to that value."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 39, "user_id": 3358338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5663a09e3cbb757109c7a420ebd4ba54?s=128&d=identicon&r=PG&f=1", "display_name": "user3358338", "link": "https://stackoverflow.com/users/3358338/user3358338"}, "edited": false, "score": 0, "creation_date": 1555657663, "post_id": 55753111, "comment_id": 98191336, "body": "@user3358338 Yeah, got that. But <code>set env =...</code> creates a <i>local</i> variable which just isn&#39;t seen by processes forked from that script. That&#39;s how it is. One can: (1) make it global instead (2) Call the script and pass it the value. This, I think, makes perfect sense. They call your script and they invoke it as appropriate."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 39, "user_id": 3358338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5663a09e3cbb757109c7a420ebd4ba54?s=128&d=identicon&r=PG&f=1", "display_name": "user3358338", "link": "https://stackoverflow.com/users/3358338/user3358338"}, "edited": false, "score": 0, "creation_date": 1555658279, "post_id": 55753111, "comment_id": 98191539, "body": "@user3358338 Added a comment, and a few relevant links, to the end."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1556430637, "last_edit_date": 1556430637, "creation_date": 1555618238, "answer_id": 55753111, "question_id": 55752593, "link": "https://stackoverflow.com/questions/55752593/weird-environment-variables-that-arent-in-perls-env-hash/55753111#55753111", "title": "Weird environment variables that aren&#39;t in Perl&#39;s ENV hash", "body": "<p>From <a href=\"https://perldoc.perl.org/perlvar.html#%ENV\" rel=\"nofollow noreferrer\">%ENV in perlvar</a> \n &thinsp; (my emphasis)</p>\n\n<blockquote>\n  <p>The hash <code>%ENV</code> contains your current <strong>environment</strong>.</p>\n</blockquote>\n\n<p>The <em>environment</em> is inherited from the process that started the Perl process, here the shell.</p>\n\n<p>However, <a href=\"https://www.tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_02.html#sect_03_02_01\" rel=\"nofollow noreferrer\">shell variables</a> can be <em>local</em>, which aren't passed to child processes, or global, that form the environment and are inherited by child processes. The global ones are mostly read from configuration files at startup, but if they are to be added later then they need be <a href=\"https://www.tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_02.html#sect_03_02_03\" rel=\"nofollow noreferrer\">exported</a></p>\n\n<blockquote>\n  <p>A variable created like the ones in the example above is only available to the current shell. It is a local variable: child processes of the current shell will not be aware of this variable. In order to pass variables to a subshell, we need to export them using the <code>export</code> built-in command. Variables that are exported are referred to as <strong>environment variables</strong>. Setting and exporting is usually done in one step:        </p>\n\n<pre><code>export VARNAME=\"value\" \n</code></pre>\n</blockquote>\n\n<p>(my emphasis) &thinsp; By your description it seems that <code>$env</code> is added as a local variable (with <code>set</code>), which then also need be exported (<code>export env</code>) in order to be seen in the one-liner.</p>\n\n<p>Environment variables can be listed with <code>env</code> or <code>printenv</code>, while <code>set</code> lists all variables, both local and environment ones.</p>\n\n<hr>\n\n<p>The above refers to the <code>bash</code> shell. The notion of \"environment\" is the same in other shells, and the same reasoning applies there as well; for a variable to be seen in child processes we need to make it global (\"environment variable\"). The difference is in how to do this.  </p>\n\n<p>In <code>csh</code>/<code>tcsh</code> use </p>\n\n<pre><code>setenv env \"value\"\n</code></pre>\n\n<p>instead of <code>set var = \"value\"</code>, what would create a local variable.</p>\n\n<hr>\n\n<p>Apart from using a global (\"environment\") variable instead of a local one, one can pass the variable to Perl code.  See <a href=\"https://stackoverflow.com/a/51713578/4653379\">this post</a> and <a href=\"https://stackoverflow.com/a/54059744/4653379\">this post</a> for examples of doing that with one-liners.  If an actual script is invoked then make it take arguments; the standard, and nicest, way is with <a href=\"https://perldoc.perl.org/Getopt/Long.html\" rel=\"nofollow noreferrer\">Getopt::Long</a>,</p>\n\n<p>This isn't a special requirement on the users; they use your script and need to invoke it suitably.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1555660340, "last_edit_date": 1555660340, "creation_date": 1555658434, "answer_id": 55758069, "question_id": 55752593, "link": "https://stackoverflow.com/questions/55752593/weird-environment-variables-that-arent-in-perls-env-hash/55758069#55758069", "title": "Weird environment variables that aren&#39;t in Perl&#39;s ENV hash", "body": "<p>Just like Perl has private variables (<code>my $x</code>) and environment variables (<code>$ENV{Y}</code>), so does the shell.</p>\n\n<pre><code>$ perl &lt;&lt;'.'\nmy $x = \"x\";\n$ENV{Y}=\"Y\";\nsystem 'echo \"&lt;$x&gt; &lt;$Y&gt;\"';\n.\n&lt;&gt; &lt;Y&gt;\n\n$ sh &lt;&lt;'.'\nx=x\nexport Y=Y\nperl -le'print \"&lt;$x&gt; &lt;$ENV{Y}&gt;\";'\n.\n&lt;&gt; &lt;Y&gt;\n\n$ csh &lt;&lt;'.'\nset x x\nsetenv Y Y\nperl -le'print \"&lt;$x&gt; &lt;$ENV{Y}&gt;\";'\n.\n&lt;&gt; &lt;Y&gt;\n</code></pre>\n\n<p>Having support for private variables is a good thing, not a strange thing. </p>\n\n<p>In your example, <code>$HOST</code> is an environment variable (uppercase by convention), while <code>$env</code> is a private variable (lowercase by convention).</p>\n\n<hr>\n\n<p><strong><code>sh</code> and <code>bash</code></strong></p>\n\n<p>These shells use the same mechanism to assign to private variables and environment variables.</p>\n\n<p>To create an environment variable, one promotes a private variable to an environment using <code>export</code>.</p>\n\n<pre><code>VAR=val\nexport VAR\nperl -e'...$ENV{VAR}...'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>export VAR\nVAR=val\nperl -e'...$ENV{VAR}...'\n</code></pre>\n\n<p>The promotion and assignment can be combined.</p>\n\n<pre><code>export VAR=val\nperl -e'...$ENV{VAR}...'\n</code></pre>\n\n<p>The above approaches change the environment for the shell, and all subsequent children it creates. The following approach can be used to change a specific child's environment:</p>\n\n<pre><code>VAR=val perl -e'...$ENV{VAR}...'\n</code></pre>\n\n<p>That approach can also be used to effectively promote a private variable:</p>\n\n<pre><code>var=val\nVAR=\"$var\" perl -e'...$ENV{VAR}...'\n</code></pre>\n\n<hr>\n\n<p><strong><code>csh</code> and <code>tcsh</code></strong></p>\n\n<p>These shells use different syntax for setting private variables and environment variables.</p>\n\n<p>To set a private variable, one uses <code>set</code>.</p>\n\n<pre><code>set var val\n</code></pre>\n\n<p>To set an environment variable, one uses <code>setenv</code>.</p>\n\n<pre><code>setenv VAR val\nperl -e'...$ENV{VAR}...'\n</code></pre>\n\n<p>The above approaches change the environment for the shell, and all subsequent children it creates.</p>\n"}], "owner": {"reputation": 39, "user_id": 3358338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5663a09e3cbb757109c7a420ebd4ba54?s=128&d=identicon&r=PG&f=1", "display_name": "user3358338", "link": "https://stackoverflow.com/users/3358338/user3358338"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1556430637, "creation_date": 1555615686, "last_edit_date": 1555615863, "question_id": 55752593, "link": "https://stackoverflow.com/questions/55752593/weird-environment-variables-that-arent-in-perls-env-hash", "title": "Weird environment variables that aren&#39;t in Perl&#39;s ENV hash", "body": "<p>Perl has access to some environment variables:</p>\n\n<pre><code>&gt; echo $HOST\nxtt006\n&gt; perl -E 'say $ENV{HOST}'\nxtt006\n&gt; perl -E 'say `echo \\$HOST`'\nxtt006\n</code></pre>\n\n<p>But apparently there's another class of environment variables that aren't in the ENV hash:</p>\n\n<pre><code>&gt; echo $env\nopsd\n&gt; perl -E 'say $ENV{env}'\n(no response from Perl)\n&gt; perl -E 'say `echo \\$env`'\n(no response from Perl)\n</code></pre>\n\n<p>What's up with that?  Is there another technique by which Perl can obtain the value of $env?</p>\n"}, {"tags": ["regex", "perl", "authentication", "blacklist"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555596904, "post_id": 55747209, "comment_id": 98172730, "body": "As an aside, the first pattern has a boat-load of problems. It should be <code>^(?=.*{4,})(?=.\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[\\W_])</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555597374, "post_id": 55747209, "comment_id": 98173038, "body": "As an aside, the second pattern is wrong too. I don&#39;t know what you are trying to match, though."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555597453, "post_id": 55747209, "comment_id": 98173080, "body": "What problem are you having?"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1555655061, "creation_date": 1555655061, "answer_id": 55757497, "question_id": 55747209, "link": "https://stackoverflow.com/questions/55747209/perl-regex-how-to-use-localfile-txt-for-matching/55757497#55757497", "title": "Perl Regex- how to use localFile(.txt) for matching", "body": "<pre><code>(((?=.{4,})((?=.\\d)(?=.[a-z])(?=.[A-Z])|(?=.\\d)(?=.[a-zA-Z])(?=.[\\W_])|(?=.[a-z])(?=.[A-Z])(?=.[\\W_])).))\n</code></pre>\n\n<p>I am of one mind with Abigail, simply doesn't make sense\nif you appreciate rearrange and rewrite your problem neatly</p>\n\n<p><code>... (?=.[a-z])(?=.[A-Z]) ...</code>is it possible ?... isn't it <code>(?i)</code> or <code>(?-i)</code> default case sensitive etc..</p>\n"}], "owner": {"reputation": 85, "user_id": 8665448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69792de021fcee2f29dd73456d5e62c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Kalantas", "link": "https://stackoverflow.com/users/8665448/nikos-kalantas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1555655061, "creation_date": 1555594527, "question_id": 55747209, "link": "https://stackoverflow.com/questions/55747209/perl-regex-how-to-use-localfile-txt-for-matching", "title": "Perl Regex- how to use localFile(.txt) for matching", "body": "<p>I'm working on a project that requires to add some Password Authentication using Perl Regular Expressions.</p>\n\n<p>The only thing that i have is a line textblock ,imagine something like this: <a href=\"https://rubular.com/r/9OZvpmtUpP\" rel=\"nofollow noreferrer\">https://rubular.com/r/9OZvpmtUpP</a>. And for that reason i can put programming code there but only regular expressions <em>[for example :^abc$]</em>.</p>\n\n<p>Also i can use only one textblock so i have to combine all the expressions in \"one\" line.</p>\n\n<p>So far i complete 2 requirements:</p>\n\n<ol>\n<li>match if at least 3 types of chars included</li>\n</ol>\n\n<p><em>(((?=.{4,})((?=.</em>\\d)(?=.<em>[a-z])(?=.</em>[A-Z])|(?=.<em>\\d)(?=.</em>[a-zA-Z])(?=.<em>[\\W_])|(?=.</em>[a-z])(?=.<em>[A-Z])(?=.</em>[\\W_])).<em>))</em></p>\n\n<ol start=\"2\">\n<li>containing many(4 max) of the same characters</li>\n</ol>\n\n<p>(?=^(?:(.)(?!(?:.<em>?\\1){4}))</em>$)</p>\n\n<p>and i combine them like this:</p>\n\n<pre><code>(((?=.{4,})((?=.*\\d)(?=.*[a-z])(?=.*[A-Z])|(?=.*\\d)(?=.*[a-zA-Z])(?=.*[\\W_])|(?=.*[a-z])(?=.*[A-Z])(?=.*[\\W_])).*))(?=^(?:(.)(?!(?:.*?\\1){4}))*$)\n</code></pre>\n\n<p>Now i have 2 requirements to go. The first one is to read a blacklist from a local file (.txt) words that included [one row one word] and not to match with them) </p>\n\n<pre><code>     for example :    |  BadWord\n   path/myText.txt    |  TestingWord\n  have these 3 words  |  TestingBlacklist\n</code></pre>\n\n<p>These words must not my Included in a password </p>\n\n<p>The second requirement is that the password except these 3 req above must not have over 2  times a char repetition </p>\n\n<pre><code>     for example :    Z@2gmacaiooi*77    Match - 2 times a char reppeated\n                      982iuionjna%$sd    Match - 0 times a char reppeated\n                      88asf$$1233ada4  NO MatcH- 3 times a char reppeated\n</code></pre>\n\n<p>Its important that the regex is in this format so i can make the join in one regex line. Thank you</p>\n"}, {"tags": ["perl", "cgi", "hash-of-hashes", "perl-hash", "hash-reference"], "comments": [{"owner": {"reputation": 139, "user_id": 1056018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62c1c32446af16d5ff2e56d87e00dba?s=128&d=identicon&r=PG", "display_name": "programmingzeal", "link": "https://stackoverflow.com/users/1056018/programmingzeal"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1555583828, "post_id": 55744057, "comment_id": 98165195, "body": "@SteffenUllrich; sorry I made a mistake and edited my question. Please comment now."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555591591, "post_id": 55744057, "comment_id": 98169502, "body": "@Steffen Ullrich, Returning just one might not be a problem. I just thought it should be documented."}], "answers": [{"comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1555586865, "post_id": 55744870, "comment_id": 98166822, "body": "It is unclear what you are trying to achieve with this in the first place since the return value is different from what you want in your question and you don&#39;t describe what it should do. Also, it can not handle arbitrary deep nested hashes which looked like a requirement for me from your question but maybe its not."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1555587813, "post_id": 55744870, "comment_id": 98167320, "body": "@Steffen Ullrich, Re &quot;<i>Also, it can not handle arbitrary deep nested hashes</i>&quot;, There&#39;s no indication this is necessary. Quite the opposite, this seems unwanted."}, {"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 2, "creation_date": 1555606876, "post_id": 55744870, "comment_id": 98178041, "body": "Hi, please add some explanation to why this is a solution. Thanks"}, {"owner": {"reputation": 139, "user_id": 1056018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62c1c32446af16d5ff2e56d87e00dba?s=128&d=identicon&r=PG", "display_name": "programmingzeal", "link": "https://stackoverflow.com/users/1056018/programmingzeal"}, "reply_to_user": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1555853766, "post_id": 55744870, "comment_id": 98237160, "body": "@d_kennetz; First we use keys function to get all keys of the above hash pointed by order. Then we used the specific key to get the hash value which is/are other hashes and then on the same line used the values function to get the values of the deepest hash. The values are numeric so we applied sort function which sorts hashes by values. In order to sort in ascending order we used $a=&gt;$b, special variables. Had we required descending we would have used $b=&gt;$a.  So we got the highest value of every key in deepest hash so we assigned it to a hash and returned its reference."}], "tags": [], "owner": {"reputation": 139, "user_id": 1056018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62c1c32446af16d5ff2e56d87e00dba?s=128&d=identicon&r=PG", "display_name": "programmingzeal", "link": "https://stackoverflow.com/users/1056018/programmingzeal"}, "is_accepted": false, "score": 0, "last_activity_date": 1555586530, "last_edit_date": 1555586530, "creation_date": 1555586232, "answer_id": 55744870, "question_id": 55744057, "link": "https://stackoverflow.com/questions/55744057/how-can-i-iterate-through-nested-hash-of-hash-without-knowing-its-key/55744870#55744870", "title": "How can I iterate through nested hash of hash without knowing its key?", "body": "<pre><code>sub max_gate_order {\n\n    my %hash =();\n    foreach my $k (keys %{$gates_info{'order'}}) {\n        my @arr = (sort {$a &lt;=&gt; $b} values %{$gates_info{'order'}-&gt;{$k}});\n        $hash{$k} = $arr[-1];       \n    }   \n    return \\%hash;\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1555587888, "last_edit_date": 1555587888, "creation_date": 1555587536, "answer_id": 55745230, "question_id": 55744057, "link": "https://stackoverflow.com/questions/55744057/how-can-i-iterate-through-nested-hash-of-hash-without-knowing-its-key/55745230#55745230", "title": "How can I iterate through nested hash of hash without knowing its key?", "body": "<p><a href=\"http://perldoc.perl.org/functions/keys.html\" rel=\"nofollow noreferrer\"><code>keys</code></a> will give you those keys.</p>\n\n<pre><code>sub max_gate_order {\n   my ($gates_info) = @_;\n   my $max_order;\n   my @gates;\n   for my $gate_type (keys %{ $gates_info-&gt;{order} }) {\n      for my $gate_id (keys %{ $gates_info-&gt;{order}{$gate_type} }) {\n         my $order = $gates_info-&gt;{order}{$gate_type}{$gate_id};\n         $max_order //= $order;\n         if ($order &gt;= $max_order) {\n            if ($order &gt; $max_order) {\n               $max_order = $order;\n               @gates = ();\n            }\n\n            push @gates, $gate_id;\n         }\n      }\n   }\n\n   return @gates;\n}\n\nmy @gates = max_gate_order(\\%gates_info);\n</code></pre>\n\n<p>The above returns all the gates with the highest order.</p>\n\n<p>If you want both the gate type and the gate id, replace</p>\n\n<pre><code>push @gates, $gate_id;\n</code></pre>\n\n<p>with </p>\n\n<pre><code>push @gates, [ $gate_type, $gate_id ];\n</code></pre>\n\n<p>or</p>\n\n<pre><code>push @gates, [ $gate_type, $gate_id, $order ];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 616, "user_id": 7922428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vINFX.png?s=128&g=1", "display_name": "Bman70", "link": "https://stackoverflow.com/users/7922428/bman70"}, "is_accepted": false, "score": 2, "last_activity_date": 1557688711, "last_edit_date": 1557688711, "creation_date": 1557615920, "answer_id": 56094923, "question_id": 55744057, "link": "https://stackoverflow.com/questions/55744057/how-can-i-iterate-through-nested-hash-of-hash-without-knowing-its-key/56094923#56094923", "title": "How can I iterate through nested hash of hash without knowing its key?", "body": "<p>This is a longer, more redundant solution, more of an exercise really. But you might find it interesting to examine the structure of the hash iteration this way. (I know I do!) This could be useful if you <b>only</b> have the main hash name (<code>%gates_info</code>), and none of the keys under that. Which is what your question implies is the case. This pulls out all the key and value names as deep as the hash goes, in case any of those might be useful. I also uploaded a <a href=\"https://www.scriptbarrel.com/hashnest.pl\" rel=\"nofollow noreferrer\">working example</a>. (Note this does require knowing how many levels deep your hash is.)</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\n\nmy %gates_info=(\n    'order' =&gt; {\n        'nand' =&gt; {\n            'nand2_1' =&gt;2,\n            'nand2_5' =&gt;-1,\n            'nand2_4' =&gt;2,\n            'nand2_6' =&gt;-1,\n            'nand2_2' =&gt;2,\n            'nand2_3' =&gt;3\n        },\n        'and' =&gt; {\n            'and2'=&gt;1,\n            'and3'=&gt;2,\n        },\n    }\n);\nprint Dumper %gates_info;\nprint \"\\n\\n\";\n\nmy @gate;\nmy $hival; \n\nforeach my $gate (sort keys %gates_info) {\n foreach my $gatekey (sort keys %{$gates_info{$gate}}) {\n   foreach my $deepkey (sort keys %{$gates_info{$gate}{$gatekey}}) {\n   my $deepvalue = $gates_info{$gate}-&gt;{$gatekey}-&gt;{$deepkey};\npush @gate, $deepvalue;\n@gate = sort @gate;\n$hival = $gate[@gate - 1];\nprint \"Gate is $gate, gatekey is $gatekey, deepkey is $deepkey, deepvalue is $deepvalue\\n\"; \n  } \nprint \"\\nGatekey is $gatekey, highest value is $hival\\n\\n\";\n@gate = (); #empty gate array\n } \n}\n\nexit 0;\n</code></pre>\n\n<p>The output of the code is:</p>\n\n<pre><code>$VAR1 = 'order';\n$VAR2 = {\n          'and' =&gt; {\n                     'and2' =&gt; 1,\n                     'and3' =&gt; 2\n                   },\n          'nand' =&gt; {\n                      'nand2_3' =&gt; 3,\n                      'nand2_6' =&gt; -1,\n                      'nand2_4' =&gt; 2,\n                      'nand2_5' =&gt; -1,\n                      'nand2_2' =&gt; 2,\n                      'nand2_1' =&gt; 2\n                    }\n        };\n\n\nGate is order, gatekey is and, deepkey is and2, deepvalue is 1\nGate is order, gatekey is and, deepkey is and3, deepvalue is 2\n\nGatekey is and, highest value is 2\n\nGate is order, gatekey is nand, deepkey is nand2_1, deepvalue is 2\nGate is order, gatekey is nand, deepkey is nand2_2, deepvalue is 2\nGate is order, gatekey is nand, deepkey is nand2_3, deepvalue is 3\nGate is order, gatekey is nand, deepkey is nand2_4, deepvalue is 2\nGate is order, gatekey is nand, deepkey is nand2_5, deepvalue is -1\nGate is order, gatekey is nand, deepkey is nand2_6, deepvalue is -1\n\nGatekey is nand, highest value is 3\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 1056018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62c1c32446af16d5ff2e56d87e00dba?s=128&d=identicon&r=PG", "display_name": "programmingzeal", "link": "https://stackoverflow.com/users/1056018/programmingzeal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1557688711, "creation_date": 1555583114, "last_edit_date": 1555585885, "question_id": 55744057, "link": "https://stackoverflow.com/questions/55744057/how-can-i-iterate-through-nested-hash-of-hash-without-knowing-its-key", "title": "How can I iterate through nested hash of hash without knowing its key?", "body": "<p>I have a hash of hashes, that is, hash and hash references in my data structure. Can I iterate through the deepest hash when I only have the main hash name and no key of the deepest hash?</p>\n\n<pre><code>my %gates_info=(\n    'order' =&gt; {\n        'nand' =&gt; {\n            'nand2_1' =&gt;2,\n            'nand2_5' =&gt;-1,\n            'nand2_4' =&gt;2,\n            'nand2_6' =&gt;-1,\n            'nand2_2' =&gt;2,\n            'nand2_3' =&gt;3\n        },\n        'and' =&gt; {\n            'and2'=&gt;1,\n            'and3'=&gt;2,\n        },\n    }\n);\n\nsub max_gate_order {\n    print values (%{$gates_info{'order'}});\n    my @arr = (sort {$a &lt;=&gt; $b} values %{$gates_info{'order'}});\n    return $arr[-1];\n}\n</code></pre>\n\n<p>I want to iterate over the whole hash when I have just its name %gates_info and no keys such as \"nand\" or \"and\". What I am trying to achieve is to get the highest numeric value in each of the gates by sorting. Such as 3 in nand case and 2 in and case. Sub max_gate_order is used for sorting and returning highest value. Thanks</p>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1555584061, "post_id": 55744007, "comment_id": 98165339, "body": "That perl command works just need a small change <code>perl -n0e &#39;s&#47;(?s)(======(?:(?!======).)*?&lt;&lt;&lt;&lt;&lt;&lt;)&#47;&#47;g; print&#39; file</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555593403, "post_id": 55745406, "comment_id": 98170536, "body": "@ikegami indeed. I&#39;m not arguing, I&#39;ve read enough of your answers over the years not to doubt your Perl knowledge. I was just confused at first myself (<a href=\"https://unix.stackexchange.com/q/192485/22222\">and not for the first time</a>). Also, I had always assumed that <code>-00</code> was setting <code>$&#47;=&quot;\\n\\n&quot;</code> (which it doesn&#39;t, as you said and as my test confirmed). So I guess <code>$&#47;=undef</code> is treated the same way as <code>$&#47;=&quot;\\n\\n&quot;</code> internally? Why do they both seem to have the same result? Or should I ask a question about this instead?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555593447, "post_id": 55745406, "comment_id": 98170562, "body": "<code>$&#47; = undef;</code> (<code>-0777</code>) causes readline to read the whole file (&quot;slurp mode&quot;)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555593491, "post_id": 55745406, "comment_id": 98170591, "body": "<code>$&#47; = &quot;\\n\\n&quot;;</code> causes readline to return a line when it finds two subsequent line feeds or EOF."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555593502, "post_id": 55745406, "comment_id": 98170600, "body": "<code>$&#47; = &quot;&quot;;</code> (<code>-00</code>) causes readline to return a line when it finds 2+ subsequent line feeds or EOF (&quot;paragraph mode&quot;)."}, {"owner": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1556105064, "post_id": 55745406, "comment_id": 98322467, "body": "if i have <code>======  ...  ====== ....  &lt;&lt;&lt;&lt;&lt;&lt;</code>  then it will remove both <code>======</code> I only want  <code>====== ....  &lt;&lt;&lt;&lt;&lt;&lt;</code> to be removed but not <code>======  ...  ====== ....  &lt;&lt;&lt;&lt;&lt;&lt;</code>"}], "tags": [], "owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "is_accepted": true, "score": 2, "last_activity_date": 1555595454, "last_edit_date": 1555595454, "creation_date": 1555588097, "answer_id": 55745406, "question_id": 55744007, "link": "https://stackoverflow.com/questions/55744007/negative-lookahead-with-awk-or-sed-not-possible-but-only-perl-supports/55745406#55745406", "title": "Negative lookahead with awk or sed not possible but only perl supports", "body": "<p>Yes, neither awk nor sed support lookarounds. More specifically, the regex flavors they use don't support them. </p>\n\n<p>Your perl command failed because you need to tell it that this is a multiline string (the <code>s</code>) modifier. But that would still fail because <code>perl</code> reads input line by line, and would apply the replacement operator to each line. If you want it to match across the entire file, you need to slurp it with <code>-0777</code>. This does what you need:</p>\n\n<pre><code>$ perl -0777pe 's/======.*?&lt;&lt;&lt;&lt;&lt;&lt;//gs' file \n    ... someabove text\n\n  jpqpq uyuuey\n\n    ... middle text\n\n  jhasjh  alallal\n\n    ... someend text\n</code></pre>\n\n<p>The <code>-0777</code> causes perl to slurp the entire file. The <code>-p</code> makes it print each line and the <code>-e</code> gives it what you want it to do. I also simplified your regex since there seems no reason to use such a complex approach. <code>======.*?&lt;&lt;&lt;&lt;&lt;&lt;</code> will match <code>======</code>, then the <code>.*?&lt;&lt;&lt;&lt;&lt;&lt;</code> means \"as few characters as possible until the <code>&lt;&lt;&lt;&lt;&lt;&lt;</code>. Finally, the <code>/sg</code> at the end will activate multiline strings (<code>s</code>, allowing the <code>.</code> to match newlines) and will make the replacement operator work globally (<code>g</code>) so it will replace all occurrences.</p>\n\n<hr>\n\n<p>In <code>sed</code>, if your markers were on lines by themselves, that is if you wanted to delete everything on the <code>======</code> and <code>&lt;&lt;&lt;&lt;&lt;&lt;</code> lines, you could do this:</p>\n\n<pre><code>$ sed '/======/,/&lt;&lt;&lt;&lt;&lt;&lt;/d' file \n    ... someabove text\n\n\n    ... middle text\n\n\n    ... someend text\n</code></pre>\n\n<p>But that wont' work for you here.</p>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 0, "last_activity_date": 1555614293, "last_edit_date": 1555614293, "creation_date": 1555613963, "answer_id": 55752279, "question_id": 55744007, "link": "https://stackoverflow.com/questions/55744007/negative-lookahead-with-awk-or-sed-not-possible-but-only-perl-supports/55752279#55752279", "title": "Negative lookahead with awk or sed not possible but only perl supports", "body": "<p>Right you don't get looka-whatever with sed or awk but you also don't need it, it's just syntactic sugar. With GNU awk for multi-char RS:</p>\n\n<pre><code>$ awk -v RS='&lt;&lt;&lt;&lt;&lt;&lt;' -v ORS= 'RT{sub(/======.*/,\"\")} 1' file\n    ... someabove text\n\n  jpqpq uyuuey\n\n    ... middle text\n\n  jhasjh  alallal\n\n    ... someend text\n</code></pre>\n\n<p>and with GNU sed for <code>-z</code>:</p>\n\n<pre><code>$ sed -z 's/@/@A/g; s/{/@B/g; s/}/@C/g; s/======/{/g; s/&lt;&lt;&lt;&lt;&lt;&lt;/}/g;\n          s/{[^{}]*}//g;\n          s/}/&lt;&lt;&lt;&lt;&lt;&lt;/g; s/======/{/g; s/@C/}/g; s/@B/{/g; s/@A/@/g\n' file\n    ... someabove text\n\n  jpqpq uyuuey\n\n    ... middle text\n\n  jhasjh  alallal\n\n    ... someend text\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1556033841, "last_edit_date": 1556033841, "creation_date": 1556032851, "answer_id": 55814498, "question_id": 55744007, "link": "https://stackoverflow.com/questions/55744007/negative-lookahead-with-awk-or-sed-not-possible-but-only-perl-supports/55814498#55814498", "title": "Negative lookahead with awk or sed not possible but only perl supports", "body": "<p>if no <code>&lt;</code> character within ===== till &lt;&lt;&lt;&lt;&lt; in data 'd' file, tried on gnu sed</p>\n\n<pre><code>sed -Ez 's/={6}[^&lt;]*&lt;{6}//g' d\n</code></pre>\n"}], "owner": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 55745406, "answer_count": 3, "score": 2, "last_activity_date": 1556033841, "creation_date": 1555582953, "last_edit_date": 1555583575, "question_id": 55744007, "link": "https://stackoverflow.com/questions/55744007/negative-lookahead-with-awk-or-sed-not-possible-but-only-perl-supports", "title": "Negative lookahead with awk or sed not possible but only perl supports", "body": "<p>I have text which spans multiple lines</p>\n\n<pre><code>    ... someabove text\n\n  jpqpq====== mcvnmcv\n\n    .... s;ql[[pw]]\n\n    &lt;&lt;&lt;&lt;&lt;&lt; uyuuey\n\n    ... middle text\n\n  jhasjh  ======dsadsas\n\n    .... grqywtrt\n\n  klklk  &lt;&lt;&lt;&lt;&lt;&lt;alallal\n\n    ... someend text\n</code></pre>\n\n<p>I want to remove all the text from <code>====== till &lt;&lt;&lt;&lt;&lt;&lt;</code> </p>\n\n<p>In <code>sublime text</code> i use</p>\n\n<p>find: <code>(?s)(======(?:(?!======).)*?&lt;&lt;&lt;&lt;&lt;&lt;)</code></p>\n\n<p>replace : </p>\n\n<p>and all the occurences are removed and output looks</p>\n\n<pre><code>    ... someabove text\n\n  jpqpq     uyuuey\n\n    ... middle text\n\n  jhasjh  alallal\n\n    ... someend text\n</code></pre>\n\n<p>Now i want to do this using command line using <code>sed or awk or anything</code>. Because everytime to open the file and do replace is tedious</p>\n\n<p>But i searched for sed and awk, i found that they dont support non zero regex. and perl is used in these cases</p>\n\n<p>Can someone confirm that sed and awk cant use such patterns like this <code>(======(?:(?!======).)*?&lt;&lt;&lt;&lt;&lt;&lt;)</code> and have to try some indirect ways.</p>\n\n<p>Still i am looking for how to do this with sed and awk (even indirect) and also perl (if lookahead is allowed) </p>\n\n<p>with perl also it didnt work</p>\n\n<pre><code>perl -ne 's/\"(======(?:(?!======).)*?&lt;&lt;&lt;&lt;&lt;&lt;)\"/\"\"/g; print' file\n</code></pre>\n\n<p>blank output</p>\n"}]