[{"tags": ["perl", "centos", "set", "cpanel"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 4289832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f74ce44d525090632fb3429ba224b473?s=128&d=identicon&r=PG&f=1", "display_name": "vdawg", "link": "https://stackoverflow.com/users/4289832/vdawg"}, "edited": false, "score": 0, "creation_date": 1525318961, "post_id": 50145202, "comment_id": 87311317, "body": "Thanks.  I will contact cPanel to ask for further clarification about their Process Manager.  Like I said, when i called setpriority with a value of 19 (which I thought was lowest based on the Perl docs for setpriority, it showed up as 19 in Process Manager, whose docs say: &quot;Priority: A number between -20 and 20 that describes how much time the system uses to work on the process. -20 is the least CPU intensive, while 20 is the most CPU intensive.&quot; which appears to be the opposite of the setpriority value range."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 73, "user_id": 4289832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f74ce44d525090632fb3429ba224b473?s=128&d=identicon&r=PG&f=1", "display_name": "vdawg", "link": "https://stackoverflow.com/users/4289832/vdawg"}, "edited": false, "score": 0, "creation_date": 1525319126, "post_id": 50145202, "comment_id": 87311367, "body": "cPanel is returning the priority you set, so it&#39;s simply is docs that are incorrect. Use the code I provided to set the lowest priority (least CPU)."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1525306640, "last_edit_date": 1525306640, "creation_date": 1525306323, "answer_id": 50145202, "question_id": 50144699, "link": "https://stackoverflow.com/questions/50144699/perl-setpriority-function-on-centos-server/50145202#50145202", "title": "Perl setpriority function on CentOS server", "body": "<p>You have it backwards. On modern Linux systems, the range is -20 to 19, where -20 is <em>highest</em> priority and 19 is the <em>lowest</em>. (It can go to 20 on some other systems.)</p>\n\n<p>You were accidentally attempting to increase the priority when you provided negative numbers, but a lack of permissions (fortunately) prevented you from doing so, which is why the priority remained at the default 0. The first thing you have should have done is check for errors!</p>\n\n<pre><code>use constant PRIO_PROCESS =&gt; 0;\n\n# $userland_priority ranges from -20 (highest) to 19 (lowest).\nmy $userland_priority = 19;\n\nsetpriority(PRIO_PROCESS, $$, $userland_priority)\n   or die(\"setpriority: $!\\n\");\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 4289832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f74ce44d525090632fb3429ba224b473?s=128&d=identicon&r=PG&f=1", "display_name": "vdawg", "link": "https://stackoverflow.com/users/4289832/vdawg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1551105383, "creation_date": 1525301886, "last_edit_date": 1551105383, "question_id": 50144699, "link": "https://stackoverflow.com/questions/50144699/perl-setpriority-function-on-centos-server", "title": "Perl setpriority function on CentOS server", "body": "<p>I use CentOS 7 and cPanel on my server.  I am trying to figure out how to prioritize a Perl task to be LOW priority.  </p>\n\n<p>When I call setpriority(PRIO_PROCESS, $$, 19), the task shows up in cPanel's Task Manager (TOP) list with a priority of 19.  But cPanel documentation says that Task Manager shows values from -20 to 20, where -20 is the lowest CPU utilization for that task.  So I try calling setpriority(PRIO_PROCESS, $$, -19) but the task shows up in cPanel Task Manager as priority 0. </p>\n\n<p>So I try calling getpriority(PRIO_PROCESS, $$) right after setpriority.   If I call setpriority with a priority value of anything negative, getpriority returns a 0 for the current process.   If I call setpriority with any positive value, getpriority returns with the value I just specified.</p>\n\n<p>It seems that Task Manager displays the same positive values I use in setpriority, but ignores any negative values I send in setpriority.</p>\n\n<p>Is it possible to tell CentOS to prioritize the current process very LOW; that is, so it shows up in Task Manager with something like a -19 priority, which is very low according to the cPanel documentation? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1525294836, "post_id": 50143466, "comment_id": 87305154, "body": "What about... <code>s&#47;^\\D+&#47;&#47;</code>?"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1525294961, "post_id": 50143466, "comment_id": 87305197, "body": "@MattJacob:Won&#39;t that remove <code>.</code> too?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1525295002, "post_id": 50143466, "comment_id": 87305216, "body": "Does the version ever start with a dot?"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1525295196, "post_id": 50143466, "comment_id": 87305303, "body": "@MattJacob:Ah I understand now. Yes it does not"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525301122, "post_id": 50143466, "comment_id": 87307398, "body": "But <code>SOMEPREFIX10.1.1</code> has a version number with four digits. What exactly do you mean?"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525333516, "post_id": 50143466, "comment_id": 87316910, "body": "@Borodin:My bad. I mean 2 or 3 components. I corrected post. I hope it is clear"}], "answers": [{"comments": [{"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1525333533, "post_id": 50144629, "comment_id": 87316922, "body": "How is that different from <code>s&#47;^\\D+&#47;&#47;</code>? I mean seems to achieve the same result"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1525308862, "last_edit_date": 1525308862, "creation_date": 1525301345, "answer_id": 50144629, "question_id": 50143466, "link": "https://stackoverflow.com/questions/50143466/remove-everything-except-specific-part-of-string/50144629#50144629", "title": "Remove everything except specific part of string", "body": "<p>Your question is very imprecise, but it sounds like you just need to capture all decimal digits and dots at the end of the string</p>\n\n<pre><code>if ( my ($version) = /([\\d.]+)$/ ) {\n\n    # use $version\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7, "user_id": 5576424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a045999c9077ee16990517f348d78cde?s=128&d=identicon&r=PG&f=1", "display_name": "Asasapd", "link": "https://stackoverflow.com/users/5576424/asasapd"}, "is_accepted": false, "score": -1, "last_activity_date": 1527176364, "creation_date": 1527176364, "answer_id": 50513278, "question_id": 50143466, "link": "https://stackoverflow.com/questions/50143466/remove-everything-except-specific-part-of-string/50513278#50513278", "title": "Remove everything except specific part of string", "body": "<p>If SOMEPREFIX include some number you whould match until the first combination of numbers and dot without match it than you could use positive lookahead like:</p>\n\n<pre><code>my $result = 'SOME3PREFIX11.1.0';\n$result =~  s/^.*?(?=(\\d+\\.))//;\n\nprint $result;\n\n__DATA__\n11.1.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 8487363, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a94a542ecd275fa20b9c60056e103037?s=128&d=identicon&r=PG&f=1", "display_name": "kart1657", "link": "https://stackoverflow.com/users/8487363/kart1657"}, "is_accepted": false, "score": 0, "last_activity_date": 1527242052, "creation_date": 1527242052, "answer_id": 50526403, "question_id": 50143466, "link": "https://stackoverflow.com/questions/50143466/remove-everything-except-specific-part-of-string/50526403#50526403", "title": "Remove everything except specific part of string", "body": "<p>Assuming that your string starts with only alphabets and ends with version number, below script will work for you.</p>\n\n<p>Below script worked for below strings</p>\n\n<pre><code>SOMEPREFIX10.1.1 \nSOMEPREFIXajdgcjhadjh134.1.1 \nSOMEPREFIX11.2 \nSOMEPREFIXajdgcjhadjh134.1.1.657.34.5\n</code></pre>\n\n<p>script:</p>\n\n<pre><code>#!/usr/bin/perl\n\nmy @reg=qw(SOMEPREFIX10.1.1 SOMEPREFIXajdgcjhadjh134.1.1 SOMEPREFIX11.2 SOMEPREFIXajdgcjhadjh134.1.1.657.34.5);\n\nforeach (@reg)\n{\n        $_=~ /([a-zA-Z]+)(.*)/;\n\n        print \"$2\\n\";\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>10.1.1\n134.1.1\n11.2\n134.1.1.657.34.5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 560, "user_id": 10850601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3R2h7RDJ9yU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYNkQa9HPTd778Jo28o4mlsEFPJpw/mo/photo.jpg?sz=128", "display_name": "Ed Grimm", "link": "https://stackoverflow.com/users/10850601/ed-grimm"}, "is_accepted": false, "score": 0, "last_activity_date": 1547864832, "creation_date": 1547864832, "answer_id": 54263592, "question_id": 50143466, "link": "https://stackoverflow.com/questions/50143466/remove-everything-except-specific-part-of-string/54263592#54263592", "title": "Remove everything except specific part of string", "body": "<p>You want to match two or three octet numbers at the end of the string, and if you get them, remove everything else in the string?</p>\n\n<p>Right.</p>\n\n<pre><code>s/.*?(\\d+(?:\\.\\d+){1,2})$/$1/\n</code></pre>\n\n<p>I'm figuring you know when and how to use the <code>=~</code> operator.</p>\n"}], "owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1547864832, "creation_date": 1525294661, "last_edit_date": 1525333482, "question_id": 50143466, "link": "https://stackoverflow.com/questions/50143466/remove-everything-except-specific-part-of-string", "title": "Remove everything except specific part of string", "body": "<p>I have a string that ends with a version number, which could have two or three version parts.</p>\n\n<pre><code>SOMEPREFIX10.1.1\n</code></pre>\n\n<p>or</p>\n\n<pre><code>SOMEPREFIX11.2\n</code></pre>\n\n<p>I would like to remove the prefix of the version number but in a generic way.</p>\n\n<p>I can do something like this</p>\n\n<pre><code>$result =~ s/SOMEPREFIX//\n</code></pre>\n\n<p>This works, but if the <code>SOMEPREFIX</code> changes I need to modify the regex pattern.</p>\n\n<p>How could I remove everything except what matches the version number (I guess <code>(\\d+\\.(\\d.)?\\d)</code>?)</p>\n"}, {"tags": ["perl", "moose"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 9731411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeea351d79e88e944f4d209fa1fb3e8d?s=128&d=identicon&r=PG&f=1", "display_name": "bif", "link": "https://stackoverflow.com/users/9731411/bif"}, "edited": false, "score": 0, "creation_date": 1525373670, "post_id": 50144777, "comment_id": 87341986, "body": "If you can&#39;t change the class (i.e., &#39;Note&#39;) to add <code>MooseX::Traits</code>, you can get the same effect by composing the new class using <code>Moose::Util qw(with_traits)</code> and <code>my $note_class = with_traits(Note =&gt; &#39;JSONFiler&#39;);</code>"}], "tags": [], "owner": {"reputation": 35, "user_id": 9731411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeea351d79e88e944f4d209fa1fb3e8d?s=128&d=identicon&r=PG&f=1", "display_name": "bif", "link": "https://stackoverflow.com/users/9731411/bif"}, "is_accepted": false, "score": 1, "last_activity_date": 1525302531, "creation_date": 1525302531, "answer_id": 50144777, "question_id": 50142663, "link": "https://stackoverflow.com/questions/50142663/passing-dynamic-parameters-to-a-parameterized-moose-role/50144777#50144777", "title": "Passing dynamic parameters to a parameterized Moose role", "body": "<p>You can create a new role (<code>JSONFiler</code>) that composes the Storage behaviors, then apply that role dynamically using <code>with_traits</code>:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>package Note;\nuse Moose;\nuse namespace::autoclean;\nuse MooseX::StrictConstructor;\n\nhas title   =&gt; (is =&gt; 'ro', isa =&gt; 'Str');\nhas body    =&gt; (is =&gt; 'rw', isa =&gt; 'Str');\n\nwith 'MooseX::Traits';\n\n__PACKAGE__-&gt;meta-&gt;make_immutable;\n\npackage JSONFiler;\nuse Moose::Role;\nuse MooseX::Storage;\n\nwith Storage(format =&gt; 'JSON', io =&gt; 'File');\n\npackage main;\nuse warnings;\nuse strict;\nuse feature 'say';\n\n## create a new Note class with the Storage traits\nmy $note_class = Note-&gt;with_traits('JSONFiler');\n\n## make a new note and store it\nmy $note = $note_class-&gt;new(title =&gt; 'Note 1');\n$note-&gt;body(\"Here is the note\");\n$note-&gt;store($note-&gt;title . \".json\");\n\n## load the stored note\nundef $note;\n$note = $note_class-&gt;load(\"Note 1.json\");\nsay $note-&gt;body;\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 9731411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeea351d79e88e944f4d209fa1fb3e8d?s=128&d=identicon&r=PG&f=1", "display_name": "bif", "link": "https://stackoverflow.com/users/9731411/bif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1525302531, "creation_date": 1525291360, "last_edit_date": 1525298938, "question_id": 50142663, "link": "https://stackoverflow.com/questions/50142663/passing-dynamic-parameters-to-a-parameterized-moose-role", "title": "Passing dynamic parameters to a parameterized Moose role", "body": "<p>I want to consume the <code>MooseX::Storage</code> parameterized role, but I also want to allow parameters to be supplied through the constructor. Here is the \"static\" version which works as expected:</p>\n\n\n\n<pre class=\"lang-perl prettyprint-override\"><code>package Note;\nuse Moose;\nuse namespace::autoclean;\nuse MooseX::StrictConstructor;\nuse MooseX::Storage;\n\nhas title   =&gt; (is =&gt; 'ro', isa =&gt; 'Str');\nhas body    =&gt; (is =&gt; 'rw', isa =&gt; 'Str');\n\nwith Storage(format =&gt; 'JSON', io =&gt; 'File');\n\n__PACKAGE__-&gt;meta-&gt;make_immutable;\n\npackage main;\nuse warnings;\nuse strict;\nuse feature 'say';\n\n## make a new note and store it\nmy $note = Note-&gt;new(title =&gt; 'Note 1');\n$note-&gt;body(\"Here is the note\");\n$note-&gt;store($note-&gt;title . \".json\");\n\n## load the stored note\nundef $note;\n$note = Note-&gt;load(\"Note 1.json\");\nsay $note-&gt;body;\n</code></pre>\n\n<p>But I want to make the Storage options dynamic. I thought of using a trait as described in <a href=\"https://metacpan.org/pod/MooseX::Traits\" rel=\"nofollow noreferrer\">MooseX::Traits</a>, something like this:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>package Note;\nuse Moose;\nuse namespace::autoclean;\nuse MooseX::StrictConstructor;\n\nhas title   =&gt; (is =&gt; 'ro', isa =&gt; 'Str');\nhas body    =&gt; (is =&gt; 'rw', isa =&gt; 'Str');\n\nwith 'MooseX::Traits';\n\n__PACKAGE__-&gt;meta-&gt;make_immutable;\n\npackage main;\nuse warnings;\nuse strict;\nuse feature 'say';\nuse MooseX::Storage;\n\n## make a new note; set the storage format dynamically\nmy $note = Note-&gt;with_traits(Storage =&gt; {format =&gt; 'JSON', io =&gt; 'File'})-&gt;new(title =&gt; 'Note 1');\n$note-&gt;body(\"Here is the note\");\n$note-&gt;store($note-&gt;title . \".json\");\n\n## load the stored note\nundef $note;\n$note = Note-&gt;load(\"Note 1.json\");\nsay $note-&gt;body;\n</code></pre>\n\n<p>But I get an error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Can't locate Storage.pm in @INC\n</code></pre>\n\n<p>I've tried to <code>use MooseX::Storage</code> in both classes, etc. I've looked at <code>meta-&gt;apply</code> and <code>apply_all_roles</code>, but neither of those seems to play well with parameterized roles.</p>\n\n<p>There's something I'm not grasping about parameterized roles. I'm wondering if I should wrap the parameterized role in a non-parameterized role (e.g., <code>StorageWithJSONFile</code>) and use that a trait. Would that be a good approach?</p>\n\n<p>What's an appropriate way to set the parameters of this role during object construction? Or is there a better way to give an object a parameterized role?</p>\n\n<p><strong>Edit:</strong> I've learned that the <code>Storage()</code> function that <code>MooseX::Storage</code> exports <em>returns</em> a list of roles when it is invoked. This cleared up a few thing for me, so I try this:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>package Note;\nuse Moose;\nuse namespace::autoclean;\nuse MooseX::StrictConstructor;\nuse MooseX::Storage;\nuse Moose::Util 'apply_all_roles';\n\nhas title   =&gt; (is =&gt; 'ro', isa =&gt; 'Str');\nhas body    =&gt; (is =&gt; 'rw', isa =&gt; 'Str');\nhas storage =&gt; (is =&gt; 'ro', isa =&gt; 'HashRef[Str]');\n\nsub BUILD {\n    my ($self) = @_;\n    apply_all_roles($self, Storage(%{$self-&gt;storage}));\n}\n\n__PACKAGE__-&gt;meta-&gt;make_immutable;\n\npackage main;\nuse warnings;\nuse strict;\nuse feature 'say';\n\n## make a new note and store it: this works!\nmy $note = Note-&gt;new(title =&gt; 'Note 1', storage =&gt; {format =&gt; 'JSON', io =&gt; 'File'});\n$note-&gt;body(\"Here is the note\");\n$note-&gt;store($note-&gt;title . \".json\");\n\n## load the stored note: this does not work: Can't locate object method \"load\" via package \"Note\" at test4.pl line 32.\nundef $note;\n$note = Note-&gt;load(\"Note 1.json\");  ## where are the roles?\nsay $note-&gt;body;\n</code></pre>\n\n<p>The contents of <code>Note 1.json</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>{\"__CLASS__\":\"Moose::Meta::Class::__ANON__::SERIAL::2\",\"body\":\"Here is the note\",\"storage\":{\"format\":\"JSON\",\"io\":\"File\"},\"title\":\"Note 1\"}\n</code></pre>\n\n<p>I seem to have a chicken-egg problem: <code>load()</code> applies to the class after <code>BUILD</code> runs; <code>BUILD</code> won't run until <code>load()</code> is called.</p>\n\n<p>I think what I need is a new class with the role composed in. I may be overthinking this.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 6335661, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9jQqgf-UmH8/AAAAAAAAAAI/AAAAAAAAAZs/Oc10yUgd6d8/photo.jpg?sz=128", "display_name": "Aritra Kundu", "link": "https://stackoverflow.com/users/6335661/aritra-kundu"}, "edited": false, "score": 0, "creation_date": 1525328755, "post_id": 50143317, "comment_id": 87314594, "body": "I did think of this straight forward approach. But as you can imagine this might make the code bulky and unreadable should the json data not contain certain key/values, or is too complex a json structure, etc. I wanted to know if there was some generic way by which this can be handled?"}, {"owner": {"reputation": 3169, "user_id": 1532338, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e25d5b8f2e0b8c6bb9ddf6e585b6527e?s=128&d=identicon&r=PG", "display_name": "Abhishek Kulkarni", "link": "https://stackoverflow.com/users/1532338/abhishek-kulkarni"}, "reply_to_user": {"reputation": 75, "user_id": 6335661, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9jQqgf-UmH8/AAAAAAAAAAI/AAAAAAAAAZs/Oc10yUgd6d8/photo.jpg?sz=128", "display_name": "Aritra Kundu", "link": "https://stackoverflow.com/users/6335661/aritra-kundu"}, "edited": false, "score": 0, "creation_date": 1525380848, "post_id": 50143317, "comment_id": 87345403, "body": "If you have such a complex json structure then you will have to flatten the hash in any case. There is no straight forward way. I am playing with huge python dictionaries these days and I have written a recursive function to flatten dictionaries/hash to have only single level key/val pairs and then print sql like tabular output"}, {"owner": {"reputation": 3169, "user_id": 1532338, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e25d5b8f2e0b8c6bb9ddf6e585b6527e?s=128&d=identicon&r=PG", "display_name": "Abhishek Kulkarni", "link": "https://stackoverflow.com/users/1532338/abhishek-kulkarni"}, "reply_to_user": {"reputation": 75, "user_id": 6335661, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9jQqgf-UmH8/AAAAAAAAAAI/AAAAAAAAAZs/Oc10yUgd6d8/photo.jpg?sz=128", "display_name": "Aritra Kundu", "link": "https://stackoverflow.com/users/6335661/aritra-kundu"}, "edited": false, "score": 1, "creation_date": 1525381267, "post_id": 50143317, "comment_id": 87345550, "body": "You can use <a href=\"http://search.cpan.org/~bbc/Hash-Flatten-1.19/lib/Hash/Flatten.pm\" rel=\"nofollow noreferrer\"><code>Hash::Flatten</code></a>  module to flatten key/val pair and then its very easy without parsing keys."}], "tags": [], "owner": {"reputation": 3169, "user_id": 1532338, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e25d5b8f2e0b8c6bb9ddf6e585b6527e?s=128&d=identicon&r=PG", "display_name": "Abhishek Kulkarni", "link": "https://stackoverflow.com/users/1532338/abhishek-kulkarni"}, "is_accepted": false, "score": 0, "last_activity_date": 1525294344, "last_edit_date": 1525294344, "creation_date": 1525294021, "answer_id": 50143317, "question_id": 50142175, "link": "https://stackoverflow.com/questions/50142175/json-to-tsv-from-a-schema/50143317#50143317", "title": "Json to TSV from a schema", "body": "<p>Here is the solution -</p>\n\n<h2>table.pl</h2>\n\n<pre><code>use JSON;\nuse Text::Table;\nbinmode STDOUT, \":utf8\";\nuse utf8;\n\nmy $json;\n{\n    local $/;    #Enable 'slurp'\n    open my $fh, \"&lt;\", \"data.json\";\n    $json = &lt;$fh&gt;;\n    close $fh;\n}\nmy $json_data = decode_json($json);\n\nmy $table = Text::Table-&gt;new( \"customerId\", \"customerName\", \"customerAge\",\n\"creationTime\" );\n\nforeach my $record (@$json_data) {\n    $table-&gt;load(\n        [\n            $record-&gt;{\"customerId\"},\n            $record-&gt;{\"customerData\"}{\"name\"},\n            $record-&gt;{\"customerData\"}{\"age\"},\n            $record-&gt;{\"creationTime\"}\n        ]\n    );\n}\n\nprint $table;\n</code></pre>\n\n<h2>data.json</h2>\n\n<pre><code>[\n    {\n        \"customerId\":\"001\",\n        \"creationTime\":\"1519343062945\",\n        \"customerData\": {\n            \"name\": \"John Rambo\",\n            \"age\": \"50\"\n        }\n    },\n    {\n        \"customerId\":\"002\",\n        \"creationTime\":\"1519343062945\",\n        \"customerData\": {\n            \"name\": \"James Bond\",\n            \"age\": \"45\"\n        }\n    }\n]\n</code></pre>\n\n<h2>Output</h2>\n\n<pre><code>[root@localhost tmp]# perl table.pl\ncustomerId  customerName  customerAge  creationTime\n001         John Rambo    50           1519343062945\n002         James Bond    45           1519343062945\n</code></pre>\n\n<p>You can also use <a href=\"https://metacpan.org/pod/Text::ANSITable\" rel=\"nofollow noreferrer\">Text::ANSITable</a> for colorful tables with borders and shading options on console.</p>\n"}], "owner": {"reputation": 75, "user_id": 6335661, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9jQqgf-UmH8/AAAAAAAAAAI/AAAAAAAAAZs/Oc10yUgd6d8/photo.jpg?sz=128", "display_name": "Aritra Kundu", "link": "https://stackoverflow.com/users/6335661/aritra-kundu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525294344, "creation_date": 1525289420, "question_id": 50142175, "link": "https://stackoverflow.com/questions/50142175/json-to-tsv-from-a-schema", "title": "Json to TSV from a schema", "body": "<p>I have the below json </p>\n\n<pre><code>{  \n    \"customerId\":\"customer-1\",\n    \"creationTime\":\"1519343062945\",\n    \"customerData\": {\n        \"name\": \"customer-1-name\",\n        \"age\": \"customer-1-age\"\n    }\n}\n</code></pre>\n\n<p>I would want this to be converted to a TSV in the format below:</p>\n\n<blockquote>\n  <p>customerId | creationTime | customerName | customerAge</p>\n</blockquote>\n\n<p>Could this be created out of a schema, something that would define how the tsv is to be generated. May be something along the lines of..</p>\n\n<pre><code>&lt;DATA DELIMITER=\"\\t\"&gt;\n    &lt;COLUMNS&gt;\n        &lt;COLUMN ID=\"customerId\" DATA_TYPE=\"STRING\"/&gt;\n        &lt;COLUMN ID=\"creationTime\" DATA_TYPE=\"NUMBER\"/&gt;\n        &lt;COLUMN ID=\"customerName\" DATA_TYPE=\"STRING\" ACCESS=\"customerData.name\"/&gt;\n        &lt;COLUMN ID=\"customerAge\" DATA_TYPE=\"NUMBER\" ACCESS=\"customerData.age/&gt;\n    &lt;/COLUMNS&gt;\n&lt;/DATA&gt;\n</code></pre>\n\n<p>I randomly made up this schema. So I was wondering if there is any perl library out there that can ease the conversion of a json to tsv following the schema approach or something of that sort. </p>\n"}, {"tags": ["php", "perl", "iis"], "comments": [{"owner": {"reputation": 622, "user_id": 5215609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94dee0d66cf90574511eb23f7291bb3f?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Avila", "link": "https://stackoverflow.com/users/5215609/diego-avila"}, "edited": false, "score": 0, "creation_date": 1525277133, "post_id": 50138912, "comment_id": 87296265, "body": "Use full path to execute the script."}, {"owner": {"reputation": 622, "user_id": 5215609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94dee0d66cf90574511eb23f7291bb3f?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Avila", "link": "https://stackoverflow.com/users/5215609/diego-avila"}, "edited": false, "score": 0, "creation_date": 1525277151, "post_id": 50138912, "comment_id": 87296281, "body": "example: exec(&quot;/usr/bin/perl /full/path/to/Script.pl $username $password&quot;,$output);"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1525277207, "post_id": 50138912, "comment_id": 87296321, "body": "You can&#39;t make your server run code on the client outside of what the browser does (e.g. JavaScript or XSLT). That&#39;s not how the web works."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1525277287, "post_id": 50138912, "comment_id": 87296362, "body": "How did you come to the conclusion that it uses the client&#39;s Perl? Do you have any error messages or log entries? Please <a href=\"https://stackoverflow.com/posts/50138912/edit\">edit</a> your question and add these things."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525277465, "post_id": 50138912, "comment_id": 87296461, "body": "Also, where do <code>$dest</code> and <code>$mail</code> come from? If they come out of parameters to your PHP program and you have not properly sanitised them, you could introduce a massive security problem. A malicious person could for example submit the string <code>&quot; &amp;&amp; rm -rf foo #&quot;</code>, where <code>foo</code> could be any directory. This is similar to <a href=\"http://bobby-tables.com/\" rel=\"nofollow noreferrer\">SQL injection</a>, but potentially way worse as an attacker could delete potentially your whole server."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1525277966, "post_id": 50138912, "comment_id": 87296802, "body": "IIS uses the Perl installed on the server, if it can find it. It cannot use software installed on the client."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 622, "user_id": 5215609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94dee0d66cf90574511eb23f7291bb3f?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Avila", "link": "https://stackoverflow.com/users/5215609/diego-avila"}, "edited": false, "score": 0, "creation_date": 1525287608, "post_id": 50138912, "comment_id": 87301625, "body": "@Tegito: An HTTP server will not mistake the client file system for the server file system just because it has been given relative paths. Please withdraw your misleading comments."}, {"owner": {"reputation": 307, "user_id": 4731046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0558d7546615d5a57ace2036217037ea?s=128&d=identicon&r=PG&f=1", "display_name": "Giovanni De Ciantis", "link": "https://stackoverflow.com/users/4731046/giovanni-de-ciantis"}, "reply_to_user": {"reputation": 622, "user_id": 5215609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94dee0d66cf90574511eb23f7291bb3f?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Avila", "link": "https://stackoverflow.com/users/5215609/diego-avila"}, "edited": false, "score": 0, "creation_date": 1525290425, "post_id": 50138912, "comment_id": 87303060, "body": "@Tegito : I tried the full path both of Perl exe and script but with no luck."}, {"owner": {"reputation": 307, "user_id": 4731046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0558d7546615d5a57ace2036217037ea?s=128&d=identicon&r=PG&f=1", "display_name": "Giovanni De Ciantis", "link": "https://stackoverflow.com/users/4731046/giovanni-de-ciantis"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525290546, "post_id": 50138912, "comment_id": 87303123, "body": "@simbabque : thank you for the suggestion."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525451462, "post_id": 50138912, "comment_id": 87376061, "body": "<i>&quot;It is definitely a permission issue&quot;</i> Does that mean you have this fixed, or at least know enough to fix it?"}, {"owner": {"reputation": 307, "user_id": 4731046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0558d7546615d5a57ace2036217037ea?s=128&d=identicon&r=PG&f=1", "display_name": "Giovanni De Ciantis", "link": "https://stackoverflow.com/users/4731046/giovanni-de-ciantis"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525689016, "post_id": 50138912, "comment_id": 87441019, "body": "@Borodin I&#39;ve found that adminstrators could write and execute in the folder i create to run the script. Normal user who execute the script run under nt authority\\network service. This user can&#39;t execute or write. I&#39;m following this thread <a href=\"https://stackoverflow.com/questions/21666449\">stackoverflow.com/questions/21666449</a> that appears to have same issue."}], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 4731046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0558d7546615d5a57ace2036217037ea?s=128&d=identicon&r=PG&f=1", "display_name": "Giovanni De Ciantis", "link": "https://stackoverflow.com/users/4731046/giovanni-de-ciantis"}, "edited": false, "score": 0, "creation_date": 1525290210, "post_id": 50141673, "comment_id": 87302955, "body": "The only thing that make me suppose IIS was running client side Perl is that only user with Perl installed on their pc can run correctly the script. Server (windows server ) and client are separated. I thought of permission issue but all user can write into the folder where the script is."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 307, "user_id": 4731046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0558d7546615d5a57ace2036217037ea?s=128&d=identicon&r=PG&f=1", "display_name": "Giovanni De Ciantis", "link": "https://stackoverflow.com/users/4731046/giovanni-de-ciantis"}, "edited": false, "score": 1, "creation_date": 1525290932, "post_id": 50141673, "comment_id": 87303299, "body": "@Giovanni: It doesn&#39;t matter whether it&#39;s IIS or something else. One system cannot cause a program to be executed on another system without something specially coded to do that. You need to explain why you think this is happening."}, {"owner": {"reputation": 307, "user_id": 4731046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0558d7546615d5a57ace2036217037ea?s=128&d=identicon&r=PG&f=1", "display_name": "Giovanni De Ciantis", "link": "https://stackoverflow.com/users/4731046/giovanni-de-ciantis"}, "edited": false, "score": 0, "creation_date": 1525327189, "post_id": 50141673, "comment_id": 87313959, "body": "I only supposed that cause I can\u2019t figure out why on some clients it is not working. Is there something to check or to post that I could do?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1525287447, "creation_date": 1525287447, "answer_id": 50141673, "question_id": 50138912, "link": "https://stackoverflow.com/questions/50138912/call-perl-script-from-php/50141673#50141673", "title": "Call Perl script from PHP", "body": "<p>There is no possibility that the IIS server is running <code>perl.exe</code> on the client machine. The HTTP protocol doesn't provide for anything like that</p>\n\n<p>You don't say <em>why</em> you think this is happening, so we can't help you any further</p>\n\n<p>I can only suggest that you're using the same machine for both client and server and have confused yourself</p>\n"}], "owner": {"reputation": 307, "user_id": 4731046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0558d7546615d5a57ace2036217037ea?s=128&d=identicon&r=PG&f=1", "display_name": "Giovanni De Ciantis", "link": "https://stackoverflow.com/users/4731046/giovanni-de-ciantis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 512, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525337627, "creation_date": 1525276865, "last_edit_date": 1525337627, "question_id": 50138912, "link": "https://stackoverflow.com/questions/50138912/call-perl-script-from-php", "title": "Call Perl script from PHP", "body": "<p>I am using the following statements to execute a Perl script from a web site using PHP.</p>\n\n\n\n<pre><code>$perl = shell_exec('perl '.$dest.'/script.pl 2&gt;&amp;1 '.$mail.' '.str_replace(\"/\", \"\\\\\", $dest));\n</code></pre>\n\n<p>I want to run the script server side, but it seems that it uses the Perl that is installed on the client so someone that has not installed Perl could not run the script.</p>\n\n<p>I can't figure out what I am missing.</p>\n\n<p>EDIT:\nI run:</p>\n\n<blockquote>\n  <p>$perl = shell_exec('C:\\Perl\\bin\\perl.exe -v');</p>\n</blockquote>\n\n<p>and figure out that was Perl server side running. So now I have to understand why some clients can't execute script.</p>\n\n<p>EDIT 2:\nIt is definitely a permission issue, only administrator could write. I' ll manage the permission.</p>\n"}, {"tags": ["xml", "perl", "xslt"], "answers": [{"comments": [{"owner": {"reputation": 137664, "user_id": 252228, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3ea75023c3c487f36257090d420b7c50?s=128&d=identicon&r=PG", "display_name": "Martin Honnen", "link": "https://stackoverflow.com/users/252228/martin-honnen"}, "edited": false, "score": 1, "creation_date": 1525263419, "post_id": 50134455, "comment_id": 87286754, "body": "Additionally <code>&lt;xsl:value-of select=&#39;$QueryResult[@ac_name=current( )&#47;ID]&#47;@obj_license&#39;&#47;&gt;</code> should be <code>&lt;xsl:value-of select=&#39;$QueryResult[ac_name=current( )&#47;ID]&#47;obj_license&#39;&#47;&gt;</code> as there elements like <code>ac_name</code> in the input and not attributes."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 137664, "user_id": 252228, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3ea75023c3c487f36257090d420b7c50?s=128&d=identicon&r=PG", "display_name": "Martin Honnen", "link": "https://stackoverflow.com/users/252228/martin-honnen"}, "edited": false, "score": 0, "creation_date": 1525263518, "post_id": 50134455, "comment_id": 87286817, "body": "@MartinHonnen I don&#39;t remember enough XSLT to verify that without research. I trust you&#39;re right, but I&#39;m not going to edit it into my answer, as that&#39;s about something else really. If you know a way to turn OP&#39;s template into version 1, please post your own answer. :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1525263322, "creation_date": 1525263322, "answer_id": 50134455, "question_id": 50134353, "link": "https://stackoverflow.com/questions/50134353/xslt-1-0-external-file-lookup-table/50134455#50134455", "title": "XSLT 1.0 - external file lookup table", "body": "<p>There are several different versions of XSLT. Your stylesheet is of the version 2 flavor, </p>\n\n<blockquote>\n<pre><code>&lt;xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" version=\"2.0\"&gt;\n</code></pre>\n</blockquote>\n\n<p>but the Perl module you are using to apply the XSLT stylesheet does not support that.</p>\n\n<blockquote>\n<pre><code>xsl:version: only 1.0 features are supported\n</code></pre>\n</blockquote>\n\n<p>It looks like you do know that already though.</p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 2123929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e031b861d14b206c2843a984542c0bc?s=128&d=identicon&r=PG", "display_name": "Andreas F", "link": "https://stackoverflow.com/users/2123929/andreas-f"}, "edited": false, "score": 0, "creation_date": 1525264375, "post_id": 50134578, "comment_id": 87287370, "body": "Thank you for your comments. I did the change but it still does not produce the desired output (same as before). Is that because this is a XSLT &quot;2.0&quot; solution and I am using an XSLT &quot;1.0&quot; tool?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 125, "user_id": 2123929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e031b861d14b206c2843a984542c0bc?s=128&d=identicon&r=PG", "display_name": "Andreas F", "link": "https://stackoverflow.com/users/2123929/andreas-f"}, "edited": false, "score": 1, "creation_date": 1525264724, "post_id": 50134578, "comment_id": 87287625, "body": "@AndreasF if you removed all mentions of version 2.0 you should not get an error message that refers to version 2.0. Are you sure you changed the correct template file? Is there some other template involved that you are missing?"}, {"owner": {"reputation": 137664, "user_id": 252228, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3ea75023c3c487f36257090d420b7c50?s=128&d=identicon&r=PG", "display_name": "Martin Honnen", "link": "https://stackoverflow.com/users/252228/martin-honnen"}, "edited": false, "score": 1, "creation_date": 1525264784, "post_id": 50134578, "comment_id": 87287664, "body": "So you have changed the version to <code>1.0</code> but still get that error <code>only 1.0 features are supported</code>? I would first try to run the code outside of Perl with xsltproc to check it is working, then you can try using Perl to execute the XSLT. Using relative URLs like <code>document(&quot;lookup.xml&quot;)</code> is obviously only possible if the base URI is available, I don&#39;t know whether <code>XML::LibXML-&gt;load_xml</code> manages that. But that shouldn&#39;t give that error about the version features."}, {"owner": {"reputation": 125, "user_id": 2123929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e031b861d14b206c2843a984542c0bc?s=128&d=identicon&r=PG", "display_name": "Andreas F", "link": "https://stackoverflow.com/users/2123929/andreas-f"}, "edited": false, "score": 0, "creation_date": 1525265162, "post_id": 50134578, "comment_id": 87287939, "body": "I was imprecise: The error message from XML::LibXSLT &quot;only 1.0 features are supported&quot; is gone, but the XML output is the same:"}, {"owner": {"reputation": 137664, "user_id": 252228, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3ea75023c3c487f36257090d420b7c50?s=128&d=identicon&r=PG", "display_name": "Martin Honnen", "link": "https://stackoverflow.com/users/252228/martin-honnen"}, "edited": false, "score": 0, "creation_date": 1525265334, "post_id": 50134578, "comment_id": 87288052, "body": "See the edit, there was another path not selecting the input structure from your samples, now corrected."}], "tags": [], "owner": {"reputation": 137664, "user_id": 252228, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3ea75023c3c487f36257090d420b7c50?s=128&d=identicon&r=PG", "display_name": "Martin Honnen", "link": "https://stackoverflow.com/users/252228/martin-honnen"}, "is_accepted": true, "score": 3, "last_activity_date": 1525265305, "last_edit_date": 1525265305, "creation_date": 1525263780, "answer_id": 50134578, "question_id": 50134353, "link": "https://stackoverflow.com/questions/50134353/xslt-1-0-external-file-lookup-table/50134578#50134578", "title": "XSLT 1.0 - external file lookup table", "body": "<p>If you want to use XSLT 1 (and your stylesheet doesn't use any XSLT 2 features) then use <code>version=\"1.0\"</code> on the <code>xsl:stylesheet</code> or <code>xsl:transform</code> root element of the XSLT code as I think libxslt otherwise refuses to run the code.</p>\n\n<p>Additionally if you want to select elements and not attributes you need paths like <code>ac_name</code> and not <code>@ac_name</code> so correct </p>\n\n<pre><code>&lt;xsl:value-of select='$QueryResult[@ac_name=current( )/ID]/@obj_license'/&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>&lt;xsl:value-of select='$QueryResult[ac_name=current( )/ID]/obj_license'/&gt;\n</code></pre>\n\n<p>And another path is also wrong, the complete stylesheet with all corrections is</p>\n\n<pre><code>&lt;xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" version=\"1.0\"&gt;\n    &lt;xsl:strip-space elements=\"*\"/&gt;\n    &lt;xsl:output method=\"xml\" indent=\"yes\"/&gt;\n\n    &lt;xsl:variable name='QueryResult' select='document(\"test2018050202.xml\")/QueryResult/Result'/&gt;\n    &lt;xsl:template match='Invoice'&gt;\n        &lt;Invoice&gt;\n            &lt;xsl:apply-templates select='AdditionalDocumentReference'/&gt;\n        &lt;/Invoice&gt;\n    &lt;/xsl:template&gt;\n\n    &lt;!-- By default, copy everything --&gt;\n    &lt;xsl:template match=\"*|@*|text()|/\"&gt;\n        &lt;xsl:copy&gt;\n            &lt;xsl:apply-templates select=\"*|@*|text()\"/&gt;\n        &lt;/xsl:copy&gt;\n    &lt;/xsl:template&gt;\n\n    &lt;!-- AdditionalDocumentReference with documentType=AKV should be replaced \n        with AdditionalDocumentReference DocumentType=ABZ and the ID should \n        replaced with the correct obj_license --&gt; \n    &lt;xsl:template match=\"AdditionalDocumentReference[DocumentType='AKV']\"&gt; \n        &lt;xsl:copy&gt;\n            &lt;DocumentType&gt;ABZ&lt;/DocumentType&gt;\n            &lt;ID&gt;&lt;xsl:value-of select='$QueryResult[ac_name = current()/ID]/obj_license'/&gt;&lt;/ID&gt;\n        &lt;/xsl:copy&gt;\n    &lt;/xsl:template&gt;\n\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 2123929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e031b861d14b206c2843a984542c0bc?s=128&d=identicon&r=PG", "display_name": "Andreas F", "link": "https://stackoverflow.com/users/2123929/andreas-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "accepted_answer_id": 50134578, "answer_count": 2, "score": 0, "last_activity_date": 1525265305, "creation_date": 1525263008, "last_edit_date": 1525263182, "question_id": 50134353, "link": "https://stackoverflow.com/questions/50134353/xslt-1-0-external-file-lookup-table", "title": "XSLT 1.0 - external file lookup table", "body": "<p>I am using Perl and the CPAN module <a href=\"http://search.cpan.org/~shlomif/XML-LibXSLT-1.96/LibXSLT.pm\" rel=\"nofollow noreferrer\">XML::LibXSLT</a> to perform XML transformations (thus restricted to XSLT version 1.0). I am completely new to XSLT transformations, but I find it interesting and potentially very powerful. I want to convert a number into another using an external file for lookup, but so far I'm unable to get the desired results: </p>\n\n<pre><code>D:\\&gt;perl\nuse warnings;\nuse strict;\nuse XML::LibXSLT;\nuse XML::LibXML;\nmy $xslt = XML::LibXSLT-&gt;new();\nmy $source = XML::LibXML-&gt;load_xml(location =&gt; 'invoice.xml');\nmy $style_doc = XML::LibXML-&gt;load_xml(location=&gt;'akv2abz.xsl', no_cdata=&gt;1);\nmy $stylesheet = $xslt-&gt;parse_stylesheet($style_doc);\nmy $results = $stylesheet-&gt;transform($source);\nprint $stylesheet-&gt;output_as_bytes($results);\n__END__\ncompilation error: file akv2abz.xsl element stylesheet\nxsl:version: only 1.0 features are supported\n&lt;?xml version=\"1.0\"?&gt;\n&lt;Invoice&gt;\n  &lt;AdditionalDocumentReference&gt;\n    &lt;DocumentType&gt;ABZ&lt;/DocumentType&gt;\n    &lt;ID/&gt;\n  &lt;/AdditionalDocumentReference&gt;\n&lt;/Invoice&gt;\n</code></pre>\n\n<p>Expected output: </p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;Invoice&gt;\n  &lt;AdditionalDocumentReference&gt;\n    &lt;DocumentType&gt;ABZ&lt;/DocumentType&gt;\n    &lt;ID&gt;ABC123&lt;/ID&gt;\n  &lt;/AdditionalDocumentReference&gt;\n&lt;/Invoice&gt;\n</code></pre>\n\n<p>The lookup file: </p>\n\n<pre><code>D:\\&gt;type lookup.xml\n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;QueryResult&gt;\n  &lt;Result&gt;\n    &lt;ac_name&gt;80186780&lt;/ac_name&gt;\n    &lt;obj_license&gt;ABC123&lt;/obj_license&gt;\n  &lt;/Result&gt;\n  &lt;Result&gt;\n    &lt;ac_name&gt;60521933&lt;/ac_name&gt;\n    &lt;obj_license&gt;DEF567&lt;/obj_license&gt;\n  &lt;/Result&gt;\n  &lt;Result&gt;\n    &lt;ac_name&gt;60606508&lt;/ac_name&gt;\n    &lt;obj_license&gt;GHI890&lt;/obj_license&gt;\n  &lt;/Result&gt;\n&lt;/QueryResult&gt;\n</code></pre>\n\n<p>The source document:</p>\n\n<pre><code>D:\\&gt;type invoice.xml\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Invoice&gt;\n    &lt;AdditionalDocumentReference&gt;\n        &lt;ID&gt;80186780&lt;/ID&gt;\n        &lt;DocumentType&gt;AKV&lt;/DocumentType&gt;\n    &lt;/AdditionalDocumentReference&gt;\n&lt;/Invoice&gt;\n\nD:\\&gt;\n</code></pre>\n\n<p>The stylesheet:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" version=\"2.0\"&gt;\n    &lt;xsl:strip-space elements=\"*\"/&gt;\n    &lt;xsl:output method=\"xml\" indent=\"yes\"/&gt;\n\n    &lt;xsl:variable name='QueryResult' select='document(\"lookup.xml\")/Result'/&gt;\n    &lt;xsl:template match='Invoice'&gt;\n        &lt;Invoice&gt;\n            &lt;xsl:apply-templates select='AdditionalDocumentReference'/&gt;\n        &lt;/Invoice&gt;\n    &lt;/xsl:template&gt;\n\n    &lt;!-- By default, copy everything --&gt;\n    &lt;xsl:template match=\"*|@*|text()|/\"&gt;\n        &lt;xsl:copy&gt;\n            &lt;xsl:apply-templates select=\"*|@*|text()\"/&gt;\n        &lt;/xsl:copy&gt;\n    &lt;/xsl:template&gt;\n\n    &lt;!-- AdditionalDocumentReference with documentType=AKV should be replaced \n        with AdditionalDocumentReference DocumentType=ABZ and the ID should \n        replaced with the correct obj_license --&gt; \n    &lt;xsl:template match=\"AdditionalDocumentReference[DocumentType='AKV']\"&gt; \n        &lt;xsl:copy&gt;\n            &lt;DocumentType&gt;ABZ&lt;/DocumentType&gt;\n            &lt;ID&gt;&lt;xsl:value-of select='$QueryResult[@ac_name=current( )/ID]/@obj_license'/&gt;&lt;/ID&gt;\n        &lt;/xsl:copy&gt;\n    &lt;/xsl:template&gt;\n\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n\n<p>Am I on to something here?</p>\n"}, {"tags": ["r", "regex", "perl", "stringr"], "comments": [{"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1525245580, "post_id": 50128017, "comment_id": 87275975, "body": "<code>!rowSums(adist(paste0(dat$activity_id,&quot;}&quot;),dat$activity_ids,&zwnj;&#8203;partial = T))</code>"}], "answers": [{"tags": [], "owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "is_accepted": false, "score": 3, "last_activity_date": 1525241333, "last_edit_date": 1525241333, "creation_date": 1525241017, "answer_id": 50128060, "question_id": 50128017, "link": "https://stackoverflow.com/questions/50128017/how-to-extract-integers-within-curly-braces-in-r/50128060#50128060", "title": "How to extract integers within curly braces in R?", "body": "<p>Using a base R option, <code>sub</code> can work here:</p>\n\n<pre><code>df &lt;- data.frame(activity_id=c(227, 252),\n                 activity_ids=c(\"{227,32,33,34,35,252}\", \"{227,32,33,34,35,252}\"))\n\ndf$last_activity &lt;- df$activity_id == sub(\".*,(\\\\d+)\\\\}$\", \"\\\\1\", df$activity_ids)\ndf\n\n      activity_id          activity_ids last_activity\n1             227 {227,32,33,34,35,252}         FALSE\n2             252 {227,32,33,34,35,252}          TRUE\n</code></pre>\n\n<p><a href=\"http://rextester.com/YUF76362\" rel=\"nofollow noreferrer\"><h2>Demo</h2></a></p>\n"}, {"tags": [], "owner": {"reputation": 273555, "user_id": 3962914, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/tGgv6.jpg?s=128&g=1", "display_name": "Ronak Shah", "link": "https://stackoverflow.com/users/3962914/ronak-shah"}, "is_accepted": false, "score": 2, "last_activity_date": 1525243619, "last_edit_date": 1525243619, "creation_date": 1525242182, "answer_id": 50128294, "question_id": 50128017, "link": "https://stackoverflow.com/questions/50128017/how-to-extract-integers-within-curly-braces-in-r/50128294#50128294", "title": "How to extract integers within curly braces in R?", "body": "<p><strong>EDIT</strong></p>\n\n<p>I just realised that the original approach has an issue when the <code>activity_ids</code> contain extra bit of information. For example, </p>\n\n<pre><code>df$activity_ids[6] &lt;- \"{227,32,33,34,35,2521}\"\n\nmapply(function(x, y) grepl(y, tail(x, 1), fixed = TRUE),\n       strsplit(df$activity_ids, \",\"), df$activity_id)\n\n#[1] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE\n</code></pre>\n\n<p>would still return <code>TRUE</code> which is wrong. </p>\n\n<p>To overcome that we can instead extract the numeric part of the last value and then compare it with <code>activity_id</code></p>\n\n<pre><code>mapply(function(x, y) y == sub(\"[^0-9]\",\"\",tail(x, 1)),\n       strsplit(df$activity_ids, \",\"), df$activity_id)\n\n#[1] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE\n\ndf$activity_ids[6] &lt;- \"{227,32,33,34,35,2521}\"\n\nmapply(function(x, y) y == sub(\"[^0-9]\",\"\",tail(x, 1)),\n      strsplit(df$activity_ids, \",\"), df$activity_id)\n\n#[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n</code></pre>\n\n<p><strong>Original Answer</strong></p>\n\n<p>A non-regex option would be splitting the string on \",\" and take the last value using <code>tail</code> and check if it exists in <code>activity_id</code> with <code>grepl</code>. </p>\n\n<pre><code>df$last_activity &lt;- mapply(function(x, y) grepl(y, tail(x, 1), fixed = TRUE),\n                    strsplit(df$activity_ids, \",\"), df$activity_id)\n\n#   activity_id          activity_ids last_activity\n#1          227 {227,32,33,34,35,252}         FALSE\n#2           32 {227,32,33,34,35,252}         FALSE\n#3           33 {227,32,33,34,35,252}         FALSE\n#4           34 {227,32,33,34,35,252}         FALSE\n#5           35 {227,32,33,34,35,252}         FALSE\n#6          252 {227,32,33,34,35,252}          TRUE\n#7          227 {227,32,33,34,35,252}         FALSE\n#8           32 {227,32,33,34,35,252}         FALSE\n#9           33 {227,32,33,34,35,252}         FALSE\n#10          34 {227,32,33,34,35,252}         FALSE\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 273555, "user_id": 3962914, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/tGgv6.jpg?s=128&g=1", "display_name": "Ronak Shah", "link": "https://stackoverflow.com/users/3962914/ronak-shah"}, "is_accepted": false, "score": 1, "last_activity_date": 1525243739, "creation_date": 1525243739, "answer_id": 50128649, "question_id": 50128017, "link": "https://stackoverflow.com/questions/50128017/how-to-extract-integers-within-curly-braces-in-r/50128649#50128649", "title": "How to extract integers within curly braces in R?", "body": "<p>A regex approach would be to extract the last number from the string using <code>stri_extract_last_regex</code> from <code>stringi</code> package and compare it with <code>activity_id</code></p>\n\n<pre><code>library(stringi)\ndf$activity_id == stri_extract_last_regex(df$activity_ids, \"[0-9]+\")\n\n#[1] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "is_accepted": false, "score": 0, "last_activity_date": 1525244869, "last_edit_date": 1525244869, "creation_date": 1525244551, "answer_id": 50128837, "question_id": 50128017, "link": "https://stackoverflow.com/questions/50128017/how-to-extract-integers-within-curly-braces-in-r/50128837#50128837", "title": "How to extract integers within curly braces in R?", "body": "<p>Base R:</p>\n\n<pre><code>transform(dat,s=Vectorize(grepl)(paste0(activity_id,\"}\"),activity_ids))\n   activity_id          activity_ids     s\n1          227 {227,32,33,34,35,252} FALSE\n2           32 {227,32,33,34,35,252} FALSE\n3           33 {227,32,33,34,35,252} FALSE\n4           34 {227,32,33,34,35,252} FALSE\n5           35 {227,32,33,34,35,252} FALSE\n6          252 {227,32,33,34,35,252}  TRUE\n7          227 {227,32,33,34,35,252} FALSE\n8           32 {227,32,33,34,35,252} FALSE\n9           33 {227,32,33,34,35,252} FALSE\n10          34 {227,32,33,34,35,252} FALSE\n</code></pre>\n\n<p>For faster computation use the package <code>stringi</code></p>\n\n<pre><code>stringi::stri_detect_fixed(dat$activity_ids,paste0(dat$activity_id,\"}\"))\n [1] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": false, "score": 0, "last_activity_date": 1525262246, "last_edit_date": 1525262246, "creation_date": 1525252427, "answer_id": 50131009, "question_id": 50128017, "link": "https://stackoverflow.com/questions/50128017/how-to-extract-integers-within-curly-braces-in-r/50131009#50131009", "title": "How to extract integers within curly braces in R?", "body": "<p>Another approach using <code>apply()</code> column-wise in base <code>R</code>:</p>\n\n<pre><code>cols &lt;- c('activity_id', 'activity_ids')\ndf$last_activity &lt;- apply(df[cols], 1, function(col) {\n  x &lt;- unlist(strsplit(col['activity_ids'], \"[{},]\"))\n  return(col['activity_id'] == x[length(x)])\n})\n</code></pre>\n\n<p>Or using <code>mapply()</code>:</p>\n\n<pre><code>df$last_activity &lt;- mapply(function(x,y) {x == y[length(y)]}, \n       x = df$activity_id, \n       y = strsplit(df$activity_ids, \"[{},]\")\n)\n</code></pre>\n\n<p>Both will yield</p>\n\n<pre><code>   activity_id          activity_ids last_activity\n1          227 {227,32,33,34,35,252}         FALSE\n2           32 {227,32,33,34,35,252}         FALSE\n3           33 {227,32,33,34,35,252}         FALSE\n4           34 {227,32,33,34,35,252}         FALSE\n5           35 {227,32,33,34,35,252}         FALSE\n6          252 {227,32,33,34,35,252}          TRUE\n7          227 {227,32,33,34,35,252}         FALSE\n8           32 {227,32,33,34,35,252}         FALSE\n9           33 {227,32,33,34,35,252}         FALSE\n10          34 {227,32,33,34,35,252}         FALSE\n11         212              somejunk         FALSE\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 8804093, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zcIAIfEckR0/AAAAAAAAAAI/AAAAAAAABRU/Q4J7eXqYqMc/photo.jpg?sz=128", "display_name": "Mohamad Sahil", "link": "https://stackoverflow.com/users/8804093/mohamad-sahil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1525276156, "creation_date": 1525240825, "question_id": 50128017, "link": "https://stackoverflow.com/questions/50128017/how-to-extract-integers-within-curly-braces-in-r", "title": "How to extract integers within curly braces in R?", "body": "<p>I have a sample data frame <code>act</code> with two variables that looks somewhat like this:</p>\n\n<pre><code>   activity_id          activity_ids\n1          227 {227,32,33,34,35,252}\n2           32 {227,32,33,34,35,252}\n3           33 {227,32,33,34,35,252}\n4           34 {227,32,33,34,35,252}\n5           35 {227,32,33,34,35,252}\n6          252 {227,32,33,34,35,252}\n7          227 {227,32,33,34,35,252}\n8           32 {227,32,33,34,35,252}\n9           33 {227,32,33,34,35,252}\n10          34 {227,32,33,34,35,252}\n</code></pre>\n\n<p><code>activity_id</code> is the integer variable and <code>activity_ids</code> is the character variable.</p>\n\n<p>Now, I want to add a new boolean variable say <code>last_activity</code> which returns true or false by checking if the value of <code>activity_id</code> is the last number among the set of numbers within curly braces of <code>activity_ids</code> variable. For this sample data, this new variable <code>last_activity</code> should return <code>TRUE</code> only for the 6th row (since 252 is the last number) and return <code>FALSE</code> for all other rows. Also, in this sample data, <code>activity_ids</code> variable has 6 numbers within braces. It could have any number of values within braces. So, I'd need a code that could be generalized for any number of values.  </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1525209145, "post_id": 50123655, "comment_id": 87265934, "body": "Are you sure <code>1.9</code> goes before <code>1.1.1</code>?"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1525209286, "post_id": 50123655, "comment_id": 87265990, "body": "@choroba:hm you are right. I am messing something up since it outputs 1.9 before 1.1.1 but it should be the reverse"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1525209656, "post_id": 50123655, "comment_id": 87266127, "body": "@choroba:good catch! Thank you. I updated post"}, {"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 2, "creation_date": 1525209899, "post_id": 50123655, "comment_id": 87266236, "body": "If you have GNU <code>sort</code>, you can use its version sort with <code>-V</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1525209126, "post_id": 50123856, "comment_id": 87265927, "body": "That is why I use perl. Because I need to handle 2 <b>and</b> 3-digit version numbers."}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1525209168, "post_id": 50123856, "comment_id": 87265941, "body": "If there is another way I am open as long as it handles 2 and 3 digits"}, {"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 1, "creation_date": 1525209928, "post_id": 50123856, "comment_id": 87266244, "body": "Or use <code>sort -V</code> if you have GNU sort."}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "reply_to_user": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 0, "creation_date": 1525210066, "post_id": 50123856, "comment_id": 87266301, "body": "@BenjaminW.: That is the problem. I don&#39;t have that available and I am looking for a replacement that would work for Mac"}, {"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "reply_to_user": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 2, "creation_date": 1525211307, "post_id": 50123856, "comment_id": 87266713, "body": "@Jim You can use GNU coreutils via homebrew: <code>brew install coreutils</code>"}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1525242566, "post_id": 50123856, "comment_id": 87274500, "body": "But... This does work with 2 <b>and</b> 3-digit version numbers."}], "tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": false, "score": 0, "last_activity_date": 1525242592, "last_edit_date": 1525242592, "creation_date": 1525208919, "answer_id": 50123856, "question_id": 50123655, "link": "https://stackoverflow.com/questions/50123655/pipe-to-perl-for-sort-and-pipe-to-other-command/50123856#50123856", "title": "Pipe to perl for sort and pipe to other command", "body": "<p>You don't necessarily need to use Perl here. You could use <code>sort</code>, specifying <code>.</code> as a field delimeter, and then sorting each field <code>n</code>umerically</p>\n\n<pre><code>numbers_generator | sort -t. -k 1,1n -k 2,2n -k 3,3n | other_command\n</code></pre>\n\n<p>Note this is for <em>up to</em> 3-digit version numbers.</p>\n\n<p>Edit: <em>up to</em></p>\n"}, {"comments": [{"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1525209783, "post_id": 50123987, "comment_id": 87266180, "body": "So comparing with <code>undef</code> will give correct results? And how would I &quot;plug&quot; this within a pipe sequence?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1525210321, "post_id": 50123987, "comment_id": 87266392, "body": "<code>undef</code> will evaluate as 0 in a numeric comparison, so it could give incorrect results if the other input might be a negative number"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1525613402, "post_id": 50123987, "comment_id": 87417016, "body": "Why would I need to disable warnings. Wouldn&#39;t the following work to avoid warnings? <code>|| ($left[2] || 0 ) &lt;=&gt; ($right[2] || 0 )</code>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1525843732, "post_id": 50123987, "comment_id": 87509574, "body": "@Jim: You don&#39;t need to. Using || works well, but is less readable and more to type."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1525211021, "last_edit_date": 1525211021, "creation_date": 1525209604, "answer_id": 50123987, "question_id": 50123655, "link": "https://stackoverflow.com/questions/50123655/pipe-to-perl-for-sort-and-pipe-to-other-command/50123987#50123987", "title": "Pipe to perl for sort and pipe to other command", "body": "<p>Comparing lengths of the arrays makes no sense.</p>\n\n<p>Comparing the first pair, or the second one if the first one is equal, and the same for the third one, should be enough:</p>\n\n<pre><code>   return $left[0] &lt;=&gt; $right[0]\n       || $left[1] &lt;=&gt; $right[1]\n       || $left[2] &lt;=&gt; $right[2]\n</code></pre>\n\n<p>You need to disable warnings so you don't get \"Use of uninitialized value\" when comparing two versions of different lengths.</p>\n\n<p>So, the pipeline would look like</p>\n\n<pre><code>numbers_generator \\\n| perl -e 'print sort { @l = split /\\./, $a; @r = split /\\./, $b; $l[0] &lt;=&gt; $r[0] || $l[1] &lt;=&gt; $r[1] || $l[2] &lt;=&gt; $r[2] } &lt;&gt;' \\\n| other_command\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1525246470, "post_id": 50124381, "comment_id": 87276478, "body": "1) Do I need to have a script and not have it part of a pipe sequence?"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1525246490, "post_id": 50124381, "comment_id": 87276489, "body": "2) Is the <code>versions</code> module part of perl or extra install lib?"}, {"owner": {"reputation": 341, "user_id": 4951980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7e3d14a650ca28c6163781baa4fad1?s=128&d=identicon&r=PG", "display_name": "Frank F&#246;rster", "link": "https://stackoverflow.com/users/4951980/frank-f%c3%b6rster"}, "reply_to_user": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 1, "creation_date": 1525248634, "post_id": 50124381, "comment_id": 87277573, "body": "Version module is part of the core modules since Perl v5.9.0 @Jim (command to find core modules is <code>corelist version</code>)"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 1, "creation_date": 1525249720, "post_id": 50124381, "comment_id": 87278163, "body": "@Jim 1) Pipes don&#39;t care if you&#39;re using a oneliner or a script. It&#39;s better to put this in a script if you&#39;re going to use it more than once for readability, testing, and maintenance. 2) version has come standard with Perl for the last 10 years."}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1525615703, "post_id": 50124381, "comment_id": 87417723, "body": "I was wondering why should I prefer <code>version</code> that the simple comparison suggested by @choroba? Is there any corner cases I would miss or am I overlooking something?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1525640737, "post_id": 50124381, "comment_id": 87426024, "body": "@Jim For all the reasons you use an existing, well tested module rather than writing your own code. Corner cases, like <code>1.2.3.4</code> or <code>v1.2.3.4</code>, are one, plus all the other cases we haven&#39;t thought of but the people working on version over the years have. And all those bugs you don&#39;t have to worry about. As important is maintainability. <code>version-&gt;parse</code> is easy to understand at a glance, it&#39;s well documented, and <code>version</code> can solve other problems. In contrast, hand written code must be studied to be understood: what does it do; what are its limits; does it have bugs; how do I reuse it?"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 5, "last_activity_date": 1525212124, "last_edit_date": 1525212124, "creation_date": 1525211620, "answer_id": 50124381, "question_id": 50123655, "link": "https://stackoverflow.com/questions/50123655/pipe-to-perl-for-sort-and-pipe-to-other-command/50124381#50124381", "title": "Pipe to perl for sort and pipe to other command", "body": "<p>You can do this easier and more reliably with the standard <a href=\"https://metacpan.org/pod/version\" rel=\"noreferrer\">version module</a>.</p>\n\n<pre><code>sort { version-&gt;parse($a) &lt;=&gt; version-&gt;parse($b) } @versions\n</code></pre>\n\n<p>As for a pipe, that depends on what is receiving this. You can accept them as command line arguments (ie. <code>@ARGV</code>) or as lines to stdin. You can output space separated, or on separate lines.</p>\n\n<p>Here it is taking the versions as lines on stdin and outputting as separate lines.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse v5.10;\nuse version;\n\nsay join \"\\n\",\n    sort {\n      version-&gt;parse($a) &lt;=&gt; version-&gt;parse($b)\n    }\n    map { chomp; $_ }\n    &lt;STDIN&gt;;\n</code></pre>\n\n<p>And it would be used like so.</p>\n\n<pre><code>$ echo -e '19.0\\n2.9\\n0.1.23.45' | sort_versions \n0.1.23.45\n2.9\n19.0\n</code></pre>\n\n<p>Then the other end reads versions from STDIN line by line.</p>\n\n<hr>\n\n<p>But if you have GNU sort, you should use <code>sort -V</code> as <a href=\"https://stackoverflow.com/questions/50123655/pipe-to-perl-for-sort-and-pipe-to-other-command/50124381#comment87266236_50123655\">Benjamin W. suggested</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1525246546, "post_id": 50126113, "comment_id": 87276524, "body": "The <code>version</code> is that extra lib or part of perl defaults?"}, {"owner": {"reputation": 341, "user_id": 4951980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7e3d14a650ca28c6163781baa4fad1?s=128&d=identicon&r=PG", "display_name": "Frank F&#246;rster", "link": "https://stackoverflow.com/users/4951980/frank-f%c3%b6rster"}, "edited": false, "score": 0, "creation_date": 1525248784, "post_id": 50126113, "comment_id": 87277655, "body": "See comment above. It is a core module"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1525615688, "post_id": 50126113, "comment_id": 87417719, "body": "I was wondering why should I prefer <code>version</code> that the simple comparison suggested by @choroba? Is there any corner cases I would miss or am I overlooking something?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1525271464, "last_edit_date": 1525271464, "creation_date": 1525225777, "answer_id": 50126113, "question_id": 50123655, "link": "https://stackoverflow.com/questions/50123655/pipe-to-perl-for-sort-and-pipe-to-other-command/50126113#50126113", "title": "Pipe to perl for sort and pipe to other command", "body": "<pre><code>numbers_generator |\nperl -Mversion -le'\n   chomp( @a = &lt;&gt; );\n   print for sort { version-&gt;parse($a) cmp version-&gt;parse($b) } @a;\n' |\nother_command\n</code></pre>\n"}], "owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1525271464, "creation_date": 1525207867, "last_edit_date": 1525209642, "question_id": 50123655, "link": "https://stackoverflow.com/questions/50123655/pipe-to-perl-for-sort-and-pipe-to-other-command", "title": "Pipe to perl for sort and pipe to other command", "body": "<p>The following snippet sorts version numbers.  I tested it in a script and it seems to be correct.  </p>\n\n<pre><code>sort {\n       my @left  = split( /\\./, $a );\n       my @right = split( /\\./, $b );\n\n       if ( $left[0] &lt;=&gt; $right[0] ) {\n          return $left[0] &lt;=&gt; $right[0];\n       }\n\n       if ( $left[1] &lt;=&gt; $right[1] ) {\n            return $left[1] &lt;=&gt; $right[1] \n        }\n        elsif ( @left &lt; @right ) {\n            return -1;\n        }\n\n        return @left &lt; @right ? -1 : 1;\n} @versions  \n</code></pre>\n\n<p>How can I make this more succinct/less verbose and run it in a pipe sequence.<br>\nI.e. <code>numbers_generator | perl -e SORT_HERE | other_command</code> </p>\n"}, {"tags": ["perl", "sorting", "datetime"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1525191434, "post_id": 50119939, "comment_id": 87257418, "body": "What kind of output do you expect? Please <a href=\"https://stackoverflow.com/posts/50119939/edit\">edit</a> your question and tell us what the expected order is. At the moment you are doing an ascii-betical sort on the first element of that array reference. If that date is in <code>YY&#47;M&#47;D</code> order that will probably work."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1525191883, "post_id": 50119939, "comment_id": 87257648, "body": "But given that &#39;M&#39; is single digit in some cases, it won&#39;t :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1525191966, "post_id": 50119939, "comment_id": 87257697, "body": "Right. I&#39;d say parse the values to sort. Time for some Schwartzian transform."}, {"owner": {"reputation": 63, "user_id": 5305236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6a8e379d94224ab91d98bb67ccfb7f7?s=128&d=identicon&r=PG&f=1", "display_name": "D.Karthikeyan", "link": "https://stackoverflow.com/users/5305236/d-karthikeyan"}, "edited": false, "score": 0, "creation_date": 1525192566, "post_id": 50119939, "comment_id": 87257998, "body": "Thank you , I added my data &amp; expected output"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525193296, "post_id": 50119939, "comment_id": 87258368, "body": "Can you also tell us what the date format is? Is the first value the year or the day?"}, {"owner": {"reputation": 63, "user_id": 5305236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6a8e379d94224ab91d98bb67ccfb7f7?s=128&d=identicon&r=PG&f=1", "display_name": "D.Karthikeyan", "link": "https://stackoverflow.com/users/5305236/d-karthikeyan"}, "edited": false, "score": 0, "creation_date": 1525193794, "post_id": 50119939, "comment_id": 87258631, "body": "The first value is year. The date format is &#39;YY/MM/DD&#39; or &#39;YY/M/D&#39;."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525193974, "post_id": 50119939, "comment_id": 87258729, "body": "Thanks for editing."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 5305236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6a8e379d94224ab91d98bb67ccfb7f7?s=128&d=identicon&r=PG&f=1", "display_name": "D.Karthikeyan", "link": "https://stackoverflow.com/users/5305236/d-karthikeyan"}, "edited": false, "score": 0, "creation_date": 1525195901, "post_id": 50120766, "comment_id": 87259651, "body": "Thank you. The solution is working perfect for my problem."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 5, "last_activity_date": 1525194651, "creation_date": 1525194651, "answer_id": 50120766, "question_id": 50119939, "link": "https://stackoverflow.com/questions/50119939/sorting-hashof-array-of-datetime-string-in-perl/50120766#50120766", "title": "Sorting hashof array of datetime string in Perl", "body": "<h2>What your code does</h2>\n\n<pre><code>foreach my $key ( \n    sort { $hashofarrays{$a}[0] cmp $hashofarrays{$b}[0] }\n    keys %hashofarrays \n) {\n    print \"$key =&gt;\", join (\", \", @{$hashofarrays{$key}}), \"\\n\";\n}\n</code></pre>\n\n<p>This uses the keys of the hash to sort the elements of the hash on the first element of the array reference that's inside of that key in the hash. It uses <code>cmp</code>, which is an <em>ascii-betical</em> sorting rather than a numerical one. That means that <code>10</code> will come before <code>2</code> because <code>1</code> is a lower character than <code>2</code>.</p>\n\n<p>For date sorting, this makes sense. But because your date format is not consistently with two digits for months and days, it will not sort properly.</p>\n\n<pre><code>18/5/1    # sorted last\n18/10/1   # sorted first\n</code></pre>\n\n<p>For those two dates, the later October date will be sorted first which is wrong.</p>\n\n<h2>What you need to do instead</h2>\n\n<p>If you cannot clean up the input data, you need to process it to figure out the value behind the date instead of relying on the presentation for sorting. Parsing dates is its own problem, and we'll use <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"noreferrer\">Time::Piece</a> to do it, which has been in the Perl core for a while now.</p>\n\n<p>We could do it like this pseudo-code:</p>\n\n<pre><code>sort { parse($a) &lt;=&gt; parse($b) } ...\n</code></pre>\n\n<p>That would work, but would be slow, especially for a larger number of records, because it parses the date with every comparison. If you don't know how sorting works internally, it compares values to each other, maybe changes position of the two values, and repeats.</p>\n\n<p>There is a way of making this more efficient, but it's a bit more complex.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Time::Piece;\n\nmy %values = ( 'joe tribiani' =&gt; [ '16/3/28 13:42', 'XII', '99.93%' ],\n               'Ross'         =&gt; [ '16/3/28 13:43', 'XII', '76.93%' ],\n               'sue grace'    =&gt; [ '11/7/5 12:07',  'VI',  '77.58%' ], );\n\nmy @sorted_keys = map { $_-&gt;[1] }\n    sort { $a-&gt;[0] &lt;=&gt; $b-&gt;[0] }\n    map {\n        [ Time::Piece-&gt;strptime( $values{$_}-&gt;[0], '%y/%m/%d %H:%M' )-&gt;epoch, $_ ]\n    }\n    keys %values;\n\nuse Data::Dumper;\nprint Dumper @sorted_keys;\n</code></pre>\n\n<p>This is called the <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"noreferrer\">Schwartzian transform</a>. It essentially processes the values once, puts them into another array reference, together with the actual values that are being sorted. It then sorts on the pre-processed values, and then puts them back.</p>\n\n<p>This is way more efficient, and because of the parsing it will work on all dates that might show up in your values without sorting them in the wrong way.</p>\n\n<p>Note we need to use the numerical comparison operator <code>&lt;=&gt;</code> now, because we are sorting on <em>epoch</em> values, which are just numbers (lots of seconds from <code>1970-01-01T00:00:00</code>).</p>\n"}], "owner": {"reputation": 63, "user_id": 5305236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6a8e379d94224ab91d98bb67ccfb7f7?s=128&d=identicon&r=PG&f=1", "display_name": "D.Karthikeyan", "link": "https://stackoverflow.com/users/5305236/d-karthikeyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 766, "favorite_count": 0, "accepted_answer_id": 50120766, "answer_count": 1, "score": 0, "last_activity_date": 1525264475, "creation_date": 1525191093, "last_edit_date": 1525264475, "question_id": 50119939, "link": "https://stackoverflow.com/questions/50119939/sorting-hashof-array-of-datetime-string-in-perl", "title": "Sorting hashof array of datetime string in Perl", "body": "<p>I was trying to sort datetimes in Perl. The datetime string is in a hash of arrays. After lots of googling I used Perl's sort function. To my surprise it worked. My code &amp; input is below:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %hashofarrays;\n\n$hashofarrays{'joe tribiani'} = ['16/3/28 13:42','XII','99.93%'];\n$hashofarrays{'Ross'} = ['16/3/28 13:43','XII','76.93%'];\n$hashofarrays{'sue grace'} = ['11/7/5 12:07','VI','77.58%'];\n\nforeach my $key (   sort{$hashofarrays{$a}[0] cmp $hashofarrays{$b}[0]}      keys %hashofarrays ) {\nprint \"$key =&gt;\", join (\", \", @{$hashofarrays{$key}}), \"\\n\";\n}\n</code></pre>\n\n<p>Am I doing this correctly? If I am, how is this working?</p>\n\n<p>If it is wrong then what should I do to sort the date time string?</p>\n\n<p>The result should list records sorted in ascending order by datetime.</p>\n\n<p>The datetime format is 'YY/MM/DD' or 'YY/M/D'</p>\n\n<p>My data:</p>\n\n<pre><code>joe tribiani, 16/3/28 13:42,XII,99.93%\nRoss,16/3/28 13:43,XII,95.93%\nsue grace,11/7/5 12:07,VI,77.58%\n</code></pre>\n\n<p>My excepted output:</p>\n\n<pre><code>sue grace =&gt;11/7/5 12:07, VI, 77.58%\njoe tribiani =&gt;16/3/28 13:42, XII, 99.93%\nRoss =&gt;16/3/28 13:43, XII, 76.93%\n</code></pre>\n"}, {"tags": ["bash", "perl", "awk", "sed", "grep"], "comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 2, "creation_date": 1525189220, "post_id": 50119375, "comment_id": 87256202, "body": "Prefix your code/data with four white spaces. Please take a look at <a href=\"http://stackoverflow.com/editing-help\">editing-help</a>."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 2, "creation_date": 1525189768, "post_id": 50119375, "comment_id": 87256482, "body": "&quot;Ignore the numbers in the servername lines&quot; doesn&#39;t make sense here -- your sample output still has numbers in it. Please try to be sure the textual description and the example are consistent."}, {"owner": {"reputation": 33, "user_id": 5950624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4697a57fbc8b54f3e6d7383aa741b2?s=128&d=identicon&r=PG", "display_name": "beastx", "link": "https://stackoverflow.com/users/5950624/beastx"}, "edited": false, "score": 0, "creation_date": 1525247729, "post_id": 50119375, "comment_id": 87277083, "body": "thanks cyrus Charles, i was trying to explain that the script/code should not search for the number ranges within the servername area."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1525269328, "post_id": 50119375, "comment_id": 87290890, "body": "If it&#39;s not <i>always</i> every 3rd row, you should ensure your sample input only sometimes contains the extra whitespace."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1525270184, "post_id": 50119375, "comment_id": 87291542, "body": "Ahh, I see how that happened -- if you look at the original post at <a href=\"https://stackoverflow.com/revisions/82717234-daa2-49d7-854c-f5283e33dfdf\">stackoverflow.com/revisions/&hellip;</a>, the way the site rendered it merged the linebreaks, so that was my editing trying to infer where you <i>really</i> wanted them to be and getting it wrong; what you really wanted was for the source to look equivalent to the relevant section of <a href=\"https://stackoverflow.com/revisions/82717234-daa2-49d7-854c-f5283e33dfdf/view-source\">stackoverflow.com/revisions/&hellip;</a>."}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 2, "creation_date": 1525325830, "post_id": 50119375, "comment_id": 87313423, "body": "Please take a look at: <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1525347598, "post_id": 50119375, "comment_id": 87325783, "body": "Your &quot;extra input example&quot; should still be paired with sample output. Right now, we don&#39;t know what output should be in the two-names-one-number case."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1525359317, "post_id": 50119375, "comment_id": 87333956, "body": "The new extra output doesn&#39;t line up with the extra input -- for example, the &quot;extra output&quot; contains a <code>a1t0091 88</code>, but there&#39;s no <code>88</code> in the input at all."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5950624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4697a57fbc8b54f3e6d7383aa741b2?s=128&d=identicon&r=PG", "display_name": "beastx", "link": "https://stackoverflow.com/users/5950624/beastx"}, "edited": false, "score": 0, "creation_date": 1525248039, "post_id": 50119483, "comment_id": 87277238, "body": "this also seems to miss some values, possible due to my edit failure mentioned in above comments"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 33, "user_id": 5950624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4697a57fbc8b54f3e6d7383aa741b2?s=128&d=identicon&r=PG", "display_name": "beastx", "link": "https://stackoverflow.com/users/5950624/beastx"}, "edited": false, "score": 1, "creation_date": 1525270280, "post_id": 50119483, "comment_id": 87291629, "body": "Indeed, that&#39;s a critical distinction (so is that those blank lines are only <i>sometimes</i> present -- the much shorter/easier revision to handle them just adds a <code>&amp;&amp; read blank</code> to the <code>while</code> loop and thus assumes they&#39;ll always be there). See this answer as-edited working at <a href=\"https://ideone.com/5AhkTX\" rel=\"nofollow noreferrer\">ideone.com/5AhkTX</a>"}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 1, "creation_date": 1525326244, "post_id": 50119483, "comment_id": 87313579, "body": "In awk this would be a one-liner, in bash it is so huge, are you sure there is something to consider here?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1525347239, "post_id": 50119483, "comment_id": 87325532, "body": "@bipll, a one-liner if you write it as unreadable awk. If you write it as well-formatted, commented awk (as I&#39;ve written it as well-formatted, commented bash), it&#39;ll still be spread over multiple lines. Similarly, it could be made into a one-liner in bash as well, at a cost of unreadability and unmaintainability -- but that&#39;s valuing the wrong things. Terseness is only a virtue when it makes code easier to read and maintain."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 33, "user_id": 5950624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4697a57fbc8b54f3e6d7383aa741b2?s=128&d=identicon&r=PG", "display_name": "beastx", "link": "https://stackoverflow.com/users/5950624/beastx"}, "edited": false, "score": 1, "creation_date": 1525348106, "post_id": 50119483, "comment_id": 87326130, "body": "@beastx see <a href=\"https://ideone.com/ZPnz16\" rel=\"nofollow noreferrer\">ideone.com/ZPnz16</a> for an extended version of this (that handles &quot;pairs&quot; that actually have multiple names before a number) handling your &quot;extended input example&quot;. (In the future, examples should try to follow <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> rules -- the shortest input that exercises all necessary behavior provided with the question up-front; this is turning into what we call a &quot;chameleon question&quot;, constantly edited after a correct answer turns out not to meet the OP&#39;s true needs; those tend to be frowned on here)."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1525349170, "post_id": 50119483, "comment_id": 87326825, "body": "(That the awk community values one-liners that sacrifice readability in favor of conserving vertical whitespace -- as if that were somehow at a premium -- is something I&#39;ll never understand. Aren&#39;t <a href=\"https://gist.github.com/charles-dyfis-net/aecf9ae69de83573c9a54d37cfa4b654\" rel=\"nofollow noreferrer\">these multi-line versions of the <code>awk</code> scripts given by Cyrus and karakfa</a> much easier to understand than the originals?)."}, {"owner": {"reputation": 33, "user_id": 5950624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4697a57fbc8b54f3e6d7383aa741b2?s=128&d=identicon&r=PG", "display_name": "beastx", "link": "https://stackoverflow.com/users/5950624/beastx"}, "edited": false, "score": 0, "creation_date": 1525353051, "post_id": 50119483, "comment_id": 87329476, "body": "@charles I can&#39;t seem to get your solution working. It simply shows an empty screen."}, {"owner": {"reputation": 33, "user_id": 5950624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4697a57fbc8b54f3e6d7383aa741b2?s=128&d=identicon&r=PG", "display_name": "beastx", "link": "https://stackoverflow.com/users/5950624/beastx"}, "edited": false, "score": 0, "creation_date": 1525353142, "post_id": 50119483, "comment_id": 87329532, "body": "Yes the formatting and suchlike for asking a question like this has been a new experience for me and the request for a one liner is more for possible future automated usage, but currently full script or one-liner works."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 33, "user_id": 5950624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4697a57fbc8b54f3e6d7383aa741b2?s=128&d=identicon&r=PG", "display_name": "beastx", "link": "https://stackoverflow.com/users/5950624/beastx"}, "edited": false, "score": 0, "creation_date": 1525359035, "post_id": 50119483, "comment_id": 87333779, "body": "@beastx, the whole reason I&#39;ve provided ideone links is so you can <i>actually see the code work</i>; see the &quot;stdout&quot; near the bottom of the page -- that&#39;s the output of the code when the copy of bash run by ideone.com invoked it. If you have questions about how to make automated usage of a multi-line script, feel free to ask such a question if you can&#39;t find it already in the knowledgebase -- there&#39;s literally no case where you can use a one-liner but can&#39;t use a script."}], "tags": [], "owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "is_accepted": false, "score": 3, "last_activity_date": 1525277207, "last_edit_date": 1525277207, "creation_date": 1525189366, "answer_id": 50119483, "question_id": 50119375, "link": "https://stackoverflow.com/questions/50119375/how-can-a-grep-sed-awk-script-merging-line-pairs-be-more-cleanly-implement/50119483#50119483", "title": "How can a &quot;grep | sed | awk&quot; script merging line pairs be more cleanly implemented?", "body": "<p>Consider implementing this in native bash, as in the following (which can be seen running with your sample input -- including sporadically-present blank lines -- at <a href=\"http://ideone.com/Qtfmrr\" rel=\"nofollow noreferrer\">http://ideone.com/Qtfmrr</a>):</p>\n\n<pre><code>#!/bin/bash\nname=; number=\nwhile IFS= read -r line; do\n  [[ $line ]] || continue                       # skip blank lines\n  [[ -z $name ]] &amp;&amp; { name=$line; continue; }   # first non-blank line becomes name\n  number=$line                                  # second one becomes number\n  if (( number &gt;= 80 &amp;&amp; number &lt; 200 )); then\n    name=${name%%-*}                            # prune everything after first \"-\"\n    printf '%s %s\\n' \"$name\" \"$number\"          # emit our output\n  fi\n  name=; number=                                # clear the variables\ndone &lt;inputfile.txt\n</code></pre>\n\n<p>The above uses no external commands whatsoever -- so whereas it might be slower to run over large input than a well-implemented <code>awk</code> or <code>perl</code> script, it also has far shorter startup time since no interpreter other than the already-running shell is required.</p>\n\n<p>See:</p>\n\n<ul>\n<li><a href=\"http://mywiki.wooledge.org/BashFAQ/001\" rel=\"nofollow noreferrer\">BashFAQ #1</a> - <em>How can I read a file (data stream, variable) line-by-line (and/or field-by-field)?</em>, describing the <code>while read</code> idiom.</li>\n<li><a href=\"http://mywiki.wooledge.org/BashFAQ/100\" rel=\"nofollow noreferrer\">BashFAQ #100</a> - <em>How do I do string manipulations in bash?</em>; or <a href=\"http://wiki.bash-hackers.org/syntax/pe\" rel=\"nofollow noreferrer\">The Bash-Hackers' Wiki on parameter expansion</a>, describing how <code>name=${name%%-*}</code> works.</li>\n<li><a href=\"http://wiki.bash-hackers.org/syntax/arith_expr\" rel=\"nofollow noreferrer\">The Bash-Hackers' Wiki on arithmetic expressions</a>, describing the <code>(( ... ))</code> syntax used for numeric comparisons.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1525189834, "creation_date": 1525189834, "answer_id": 50119608, "question_id": 50119375, "link": "https://stackoverflow.com/questions/50119375/how-can-a-grep-sed-awk-script-merging-line-pairs-be-more-cleanly-implement/50119608#50119608", "title": "How can a &quot;grep | sed | awk&quot; script merging line pairs be more cleanly implemented?", "body": "<pre><code>perl -nle's/-.*//; $n=&lt;&gt;; print \"$_ $n\" if 80&lt;=$n &amp;&amp; $n&lt;=199' inputfile.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 5950624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4697a57fbc8b54f3e6d7383aa741b2?s=128&d=identicon&r=PG", "display_name": "beastx", "link": "https://stackoverflow.com/users/5950624/beastx"}, "edited": false, "score": 0, "creation_date": 1525247825, "post_id": 50119687, "comment_id": 87277138, "body": "Apologies, not used to editing correctly, the input file has extra white spaces, normally every 3rd row, but not always the case, so this seems to break your code"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "reply_to_user": {"reputation": 33, "user_id": 5950624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4697a57fbc8b54f3e6d7383aa741b2?s=128&d=identicon&r=PG", "display_name": "beastx", "link": "https://stackoverflow.com/users/5950624/beastx"}, "edited": false, "score": 1, "creation_date": 1525345230, "post_id": 50119687, "comment_id": 87324291, "body": "Your input file format changed a lot, the updated script depends on the record structure, otherwise if the file is not structured consistently you need to fall back to pattern matching.  You didn&#39;t mention what happens when there are two text lines followed with one number as in your latest example."}, {"owner": {"reputation": 33, "user_id": 5950624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4697a57fbc8b54f3e6d7383aa741b2?s=128&d=identicon&r=PG", "display_name": "beastx", "link": "https://stackoverflow.com/users/5950624/beastx"}, "edited": false, "score": 0, "creation_date": 1525345429, "post_id": 50119687, "comment_id": 87324412, "body": "Karafka, yes looking deeper into the input file along with the lessons learned in asking a question like this has changed the initial quests a bit.  But this single liner does seem to be going in the right direction"}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 3, "last_activity_date": 1525260791, "last_edit_date": 1525260791, "creation_date": 1525190118, "answer_id": 50119687, "question_id": 50119375, "link": "https://stackoverflow.com/questions/50119375/how-can-a-grep-sed-awk-script-merging-line-pairs-be-more-cleanly-implement/50119687#50119687", "title": "How can a &quot;grep | sed | awk&quot; script merging line pairs be more cleanly implemented?", "body": "<p>another <code>awk</code></p>\n\n<pre><code>$ awk -F- 'NR%2{p=$1; next} 80&lt;=$1 &amp;&amp; $1&lt;=199 {print p,$1}' file\n\nal12t5683 88\nal12t5684 100\nal12t5686 91\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>for the empty line record delimiter</p>\n\n<pre><code>$ awk -v RS= '80&lt;=$2 &amp;&amp; $2&lt;=199{sub(/-.*/,\"\",$1); print}' file\n\nal12t5683 88\nal12t5684 100\nal12t5686 91\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2285, "user_id": 8592975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56fea54eef1c73000439a2c38b53d422?s=128&d=identicon&r=PG&f=1", "display_name": "ctac_", "link": "https://stackoverflow.com/users/8592975/ctac"}, "edited": false, "score": 0, "creation_date": 1525194377, "post_id": 50119984, "comment_id": 87258915, "body": "@Anonymous Downvoter Sure sed isn&#39;nt the best tool for this task but I get the espected result. Perhaps you can tell that in a comment to explain."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1525205475, "post_id": 50119984, "comment_id": 87264336, "body": "My assumption (as someone who got a downvote at about the same time) is that the person was dinging answers they saw as overly complex or hard for readers to follow, since the question was asking for a clean or simple solution. Of course, <i>if</i> that was truly their objection, &quot;hard to follow&quot; can be countered by adding comments, a prose description of function, links, &amp;c; I&#39;ve tried to edit my own answer towards that end."}], "tags": [], "owner": {"reputation": 2285, "user_id": 8592975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56fea54eef1c73000439a2c38b53d422?s=128&d=identicon&r=PG&f=1", "display_name": "ctac_", "link": "https://stackoverflow.com/users/8592975/ctac"}, "is_accepted": false, "score": 0, "last_activity_date": 1525191254, "creation_date": 1525191254, "answer_id": 50119984, "question_id": 50119375, "link": "https://stackoverflow.com/questions/50119375/how-can-a-grep-sed-awk-script-merging-line-pairs-be-more-cleanly-implement/50119984#50119984", "title": "How can a &quot;grep | sed | awk&quot; script merging line pairs be more cleanly implemented?", "body": "<p>With gnu sed</p>\n\n<pre><code>sed -E '\nN\n/\\n[8-9][0-9]$/bA\n/\\n1[0-9]{2}$/!d\n:A\ns/([^-]*).*\\n([0-9]+$)/\\1 \\2/\n' infile\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5950624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4697a57fbc8b54f3e6d7383aa741b2?s=128&d=identicon&r=PG", "display_name": "beastx", "link": "https://stackoverflow.com/users/5950624/beastx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1525442011, "creation_date": 1525188967, "last_edit_date": 1525442011, "question_id": 50119375, "link": "https://stackoverflow.com/questions/50119375/how-can-a-grep-sed-awk-script-merging-line-pairs-be-more-cleanly-implement", "title": "How can a &quot;grep | sed | awk&quot; script merging line pairs be more cleanly implemented?", "body": "<p>I have a little script to extract specific data and cleanup the output a little. It seems overly messy and i'm wondering if the script can be trimmed down a bit.</p>\n\n<hr>\n\n<ul>\n<li>The input file contains of pairs of lines -- names, followed by numbers.</li>\n<li>Line pairs where the numeric value is not between 80 and 199 should be discarded.</li>\n<li>Pairs may sometimes, but will not always, be preceded or followed by blank lines, which should be ignored.</li>\n</ul>\n\n<p><strong>Example input file:</strong></p>\n\n<pre><code>al12t5682-heapmemusage-latest.log\n38\n\nal12t5683-heapmemusage-latest.log\n88\nal12t5684-heapmemusage-latest.log\n100\nal12t5685-heapmemusage-latest.log\n0\n\nal12t5686-heapmemusage-latest.log\n91\n</code></pre>\n\n<p><strong>Example/wanted output:</strong></p>\n\n<pre><code>al12t5683 88\nal12t5684 100\nal12t5686 91\n</code></pre>\n\n<p><strong>Current script:</strong></p>\n\n<pre><code>grep --no-group-separator -PxB1 '([8,9][0-9]|[1][0-9][0-9])' inputfile.txt \\\n  | sed 's/-heapmemusage-latest.log//' \\\n  | awk '{$1=$1;printf(\"%s \",$0)};NR%2==0{print \"\"}'\n</code></pre>\n\n<p><strong>Extra input example</strong></p>\n\n<pre><code>al14672-heapmemusage-latest.log\n38\n\nal14671-heapmemusage-latest.log\n5\n\ng4t5534-heapmemusage-latest.log\n100\n\nal1t0000-heapmemusage-latest.log\n0\nal1t5535-heapmemusage-latest.log\nal1t4676-heapmemusage-latest.log\n127\n\nal1t4674-heapmemusage-latest.log\n53\n\nA1t5540-heapmemusage-latest.log\n54\n\nG4t9981-heapmemusage-latest.log\n45\n\nal1c4678-heapmemusage-latest.log\n81\n\nB4t8830-heapmemusage-latest.log\n76\n\na1t0091-heapmemusage-latest.log\n88\n\nal1t4684-heapmemusage-latest.log\n91\n</code></pre>\n\n<p><strong>Extra Example expected output:</strong></p>\n\n<pre><code>g4t5534 100\nal1t4676 127\nal1c4678 81\na1t0091 88\nal1t4684 91\n</code></pre>\n"}, {"tags": ["perl", "attributes", "moose"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1525186141, "post_id": 50118578, "comment_id": 87254517, "body": "It&#39;s usually enough to have them all lazy and to use them within each other in the correct order."}, {"owner": {"reputation": 5431, "user_id": 1076249, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1e36accf16beec462771dae979f3e9ae?s=128&d=identicon&r=PG", "display_name": "Mark Leighton Fisher", "link": "https://stackoverflow.com/users/1076249/mark-leighton-fisher"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525187588, "post_id": 50118578, "comment_id": 87255314, "body": "Agreed - but you might want to initialize your logger before you would normally tend to your configuration file. (I usually want loggers set up really, really early.)"}], "tags": [], "owner": {"reputation": 5431, "user_id": 1076249, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1e36accf16beec462771dae979f3e9ae?s=128&d=identicon&r=PG", "display_name": "Mark Leighton Fisher", "link": "https://stackoverflow.com/users/1076249/mark-leighton-fisher"}, "is_accepted": false, "score": 1, "last_activity_date": 1525185866, "creation_date": 1525185866, "answer_id": 50118578, "question_id": 50118577, "link": "https://stackoverflow.com/questions/50118577/perl-moose-with-multiple-mutually-dependent-attributes/50118578#50118578", "title": "Perl Moose with multiple mutually-dependent attributes", "body": "<p>You can use the <code>before</code> method modifier (method hook) to force the attributes to build in a specific order:</p>\n\n<pre><code>package Z;\nuse Moose;\n\nhas config =&gt; (\n    isa     =&gt; 'HashRef',\n    is      =&gt; 'ro',\n    lazy    =&gt; 1,\n    default =&gt; sub { print STDERR \"called 'config'\\n\"; return { a =&gt; 'b' }; },\n);\n\nhas logger =&gt; (\n    isa     =&gt; 'Str',\n    is      =&gt; 'ro',\n    lazy    =&gt; 1,\n    default =&gt; sub { print STDERR \"called 'logger'\\n\"; return 'Fred'; }\n);\n\nbefore 'logger' =&gt; sub {\n    my $self = shift;\n    print STDERR \"called before 'logger'\\n\";\n    die \"No logger!: $!\\n\" if !defined $self-&gt;config;\n    return;\n};\n\npackage A;\n\nmy $z = Z-&gt;new();\n\nprint \"logger: \", $z-&gt;logger, \"\\n\";\nprint \"config{a}: \", $z-&gt;config-&gt;{a}, \"\\n\";\n</code></pre>\n\n<p>The output of this sample code, showing that <code>config</code> is built before <code>logger</code> via the <code>before</code> method modifier:</p>\n\n<pre><code>called before 'logger'\ncalled 'config'\ncalled 'logger'\nlogger: Fred\nconfig{a}: b\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 8, "last_activity_date": 1525191291, "last_edit_date": 1525191291, "creation_date": 1525189032, "answer_id": 50119393, "question_id": 50118577, "link": "https://stackoverflow.com/questions/50118577/perl-moose-with-multiple-mutually-dependent-attributes/50119393#50119393", "title": "Perl Moose with multiple mutually-dependent attributes", "body": "<p>If the initialization is truly mutually-dependent, you have a problem, since one of the attributes must necessarily be initialized before the other. But nothing about your description supports this. It sounds like creating the logger requires the config file, and that's it.</p>\n\n<p>Just make the creation of <code>logger</code> lazy, giving <code>config</code> a chance to be set.</p>\n\n<pre><code>package Class;\n\nuse Moose;\n\nhas config =&gt; ( ... );\n\nhas logger =&gt; (\n    isa     =&gt; 'Str',\n    is      =&gt; 'ro',\n    lazy    =&gt; 1,\n    default =&gt; sub {\n        my $self = shift;\n        my $config = $self-&gt;config\n            or die(...);\n\n        return Log::Log4perl-&gt;get_logger( $config-&gt;{logger} );\n    },\n    handles =&gt; [qw( info warn error fatal )],\n);\n</code></pre>\n\n<p>Sample usage</p>\n\n<pre><code>my $o = Class-&gt;new( config =&gt; \"...\" );\n$o-&gt;warn(\"...\");\n</code></pre>\n\n<p>or</p>\n\n<pre><code># Assuming config isn't required=&gt;1.\nmy $o = Class-&gt;new();\n$o-&gt;config(\"...\");\n$o-&gt;warn(\"...\");\n</code></pre>\n"}], "owner": {"reputation": 5431, "user_id": 1076249, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1e36accf16beec462771dae979f3e9ae?s=128&d=identicon&r=PG", "display_name": "Mark Leighton Fisher", "link": "https://stackoverflow.com/users/1076249/mark-leighton-fisher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1526254137, "creation_date": 1525185866, "last_edit_date": 1526254137, "question_id": 50118577, "link": "https://stackoverflow.com/questions/50118577/perl-moose-with-multiple-mutually-dependent-attributes", "title": "Perl Moose with multiple mutually-dependent attributes", "body": "<p>How can I create my Perl Moose class such that multiple mutually-dependent attributes are built in the proper order? In my case, I want to configure my Log::Log4perl object from a configuration file that is specified in my main configuration file.</p>\n"}, {"tags": ["perl", "sorting", "insertion-sort"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1525176498, "creation_date": 1525176498, "answer_id": 50116208, "question_id": 50115881, "link": "https://stackoverflow.com/questions/50115881/is-this-a-valid-form-of-insertion-sort/50116208#50116208", "title": "Is this a valid form of insertion sort?", "body": "<p>Yes. It's identical to the first algorithm shown <a href=\"https://en.m.wikipedia.org/wiki/Insertion_sort\" rel=\"nofollow noreferrer\"><em>on Wikipedia</em></a></p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 9725271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8109f47b68bb9966b8146dc33f6a53ec?s=128&d=identicon&r=PG&f=1", "display_name": "Leon Schulze", "link": "https://stackoverflow.com/users/9725271/leon-schulze"}, "edited": false, "score": 0, "creation_date": 1525188401, "post_id": 50118369, "comment_id": 87255749, "body": "Great! Thank you so much! :D"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1525189513, "last_edit_date": 1525189513, "creation_date": 1525185154, "answer_id": 50118369, "question_id": 50115881, "link": "https://stackoverflow.com/questions/50115881/is-this-a-valid-form-of-insertion-sort/50118369#50118369", "title": "Is this a valid form of insertion sort?", "body": "<p>Yes, but it needlessly revisits elements that have already been sorted. Fixed:</p>\n\n<pre><code>for my $i (1..#$arr) {\n    my $j = $i;\n    while ( $j &gt; 0 &amp;&amp; $arr[$j] &lt; $arr[$j-1] ) {\n        ($arr[$j], $arr[$j-1]) = ($arr[$j-1], $arr[$j]);\n        $j--;\n    }\n}\n</code></pre>\n\n<p>I added <code>my $j = $i;</code>, and switched from <code>$i</code> to <code>$j</code> in the inner loop. The change to the for loop isn't a functional change; it's just cleaner and faster.</p>\n\n<p>Now, the algorithm is identical to the first algorithm shown on <a href=\"https://en.wikipedia.org/wiki/Insertion_sort#Algorithm_for_insertion_sort\" rel=\"nofollow noreferrer\">Wikipedia</a>.</p>\n\n<p>Basically, think of <code>@arr</code> as two arrays. The leading elements form the sorted array, and the trailing elements form the unsorted array of elements to insert. <code>$i</code> is index of the first element of the unsorted elements, and the inner loop inserts <code>$arr[$i]</code> into the proper spot.</p>\n"}], "owner": {"reputation": 21, "user_id": 9725271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8109f47b68bb9966b8146dc33f6a53ec?s=128&d=identicon&r=PG&f=1", "display_name": "Leon Schulze", "link": "https://stackoverflow.com/users/9725271/leon-schulze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "accepted_answer_id": 50118369, "answer_count": 2, "score": 1, "last_activity_date": 1525189513, "creation_date": 1525174926, "last_edit_date": 1525175548, "question_id": 50115881, "link": "https://stackoverflow.com/questions/50115881/is-this-a-valid-form-of-insertion-sort", "title": "Is this a valid form of insertion sort?", "body": "<p>Does the following code represent a valid implementation of <em>insertion sort</em>?</p>\n\n<pre><code>use warnings;\n\n@arr = (5, 2, 4, 6, 1, 3);\n$size = @arr;\nprint \"\\nUnsorted array: @arr\\n\";\n\nfor ( $i = 1; $i &lt; $size; $i++ ) {\n\n    while ( $i &gt; 0 &amp;&amp; $arr[$i] &lt; $arr[$i-1] ) {\n\n        ($arr[$i], $arr[$i-1]) = ($arr[$i-1], $arr[$i]);\n        $i--;\n    }\n}\n\nprint \"Sorted Array:   @arr\\n\";\n</code></pre>\n"}, {"tags": ["regex", "perl", "xml-parsing", "xml-twig"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525167879, "post_id": 50114268, "comment_id": 87245677, "body": "Did you write that XML example in Word? There are ellipsis characters in it... :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525167914, "post_id": 50114268, "comment_id": 87245695, "body": "Can you please <a href=\"https://stackoverflow.com/posts/50114268/edit\">edit</a> and provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that we can copy and run?"}, {"owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525168181, "post_id": 50114268, "comment_id": 87245810, "body": "Yes. I copied the example into Word and modified to just show where I got stuck :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1525168879, "post_id": 50114268, "comment_id": 87246128, "body": "Sorry, I might have not made myself clear. I&#39;d appreciate a full example program that&#39;s reduced to only the problem at hand, but includes the parsing to reproduce the problem. Like, stick the XML in a <code>__DATA__</code> section, do the reading and parsing, so that it&#39;s easy to take that scaffold and add code."}, {"owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525169061, "post_id": 50114268, "comment_id": 87246216, "body": "I have edited the example. Can you please see if it works?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525169263, "post_id": 50114268, "comment_id": 87246307, "body": "Is the format of that text always the same? One line per bit, and the lines without bits are the overall long description?"}, {"owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525169567, "post_id": 50114268, "comment_id": 87246416, "body": "One/multiple lines per bit. And yes, the lines without bits are the overall long description."}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1525169686, "post_id": 50114268, "comment_id": 87246459, "body": "Where does <code>width</code> come from? And what&#39;s with <code>Bit 4-1</code>? Can you describe the format of these entries more clearly?"}, {"owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "edited": false, "score": 0, "creation_date": 1525169998, "post_id": 50114268, "comment_id": 87246594, "body": "Width comes from &lt;Field&gt;&lt;Size&gt;. Or if it&#39;s <code>Bit 5</code>, the width is 1. If it&#39;s <code>Bit 4-1</code>, it&#39;s for Bit 4,3,2,1 and the width is 4."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525174664, "post_id": 50114268, "comment_id": 87248723, "body": "Please never let your code or data anywhere near document editors like Word or PDFEdit. You need to use a simple text editor such as Notepad."}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1525350118, "post_id": 50114268, "comment_id": 87327436, "body": "As the description of a bit can continue on subsequent lines, how can one determine if lines following the last bit belong to the description of this last bit or are part of the overall description of the register?"}, {"owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "reply_to_user": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1525379517, "post_id": 50114268, "comment_id": 87344780, "body": "That&#39;s how the owner created it. I agree with you @sticky bit, it can be possible. But in my files, there are no such cases."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "edited": false, "score": 0, "creation_date": 1525328945, "post_id": 50115865, "comment_id": 87314667, "body": "Many thanks @sticky bit. This works for me except Bit <i>number</i> has multiple lines in <code>$description_in</code>."}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "reply_to_user": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "edited": false, "score": 0, "creation_date": 1525342753, "post_id": 50115865, "comment_id": 87322765, "body": "@Nee: Sorry I don&#39;t really understand what that means. Can you explain the format in greater detail regarding your comment in an edit of the question? May then I&#39;ll get this."}, {"owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "edited": false, "score": 0, "creation_date": 1525349202, "post_id": 50115865, "comment_id": 87326841, "body": "Please see &#39;Edits&#39; at the end of the question."}], "tags": [], "owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "is_accepted": true, "score": 1, "last_activity_date": 1525431311, "last_edit_date": 1525431311, "creation_date": 1525174854, "answer_id": 50115865, "question_id": 50114268, "link": "https://stackoverflow.com/questions/50114268/perl-how-to-split-paragraph-keeping-last-sentences-into-another-array/50115865#50115865", "title": "Perl: How to split paragraph keeping last sentences into another array?", "body": "<p>If I got everything right, you could look at the whole text block line by line.</p>\n\n<p>Use a regular expression, to check if a line matches the pattern for a bit. Capture the relevant parts. Cache bit by bit in an array holding hashes storing the details of each bit.</p>\n\n<p>Buffer lines that don't contain the bit pattern. If another line follows, that contains a bit pattern, the buffer must belong to the recent bit. Append it there. All other lines must be part of the overall description. <strong>Note:</strong> This doesn't distinguish between any additional lines of the description for the last bit. If there is such a bit, its additional lines will make the beginning of the overall description. (But you said such things aren't in your data.)</p>\n\n<p>Proof of concept:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $description_in = 'Bit 6  random description\n                    Bla bla additional line bla bla\n                    bla bla\n                    Bit 5 msg octet 2\n                    Empty line below\n\n                    Bla bla set to gain instant world domination bla bla\n                    Bit 4-1\n                    Bit 0 msg octet 4\n                    These registers containpart of the Upstream Message.\n                    They should be written only after the cleared by hardware.\n\n                    Empty line above\n                    Bla bla bla...';\n\nmy @bits = ();\nmy $description_overall = '';\n\nmy $line_buffer = '';\nforeach my $line (split(\"\\n\", $description_in)) {\n  # if line\n  #  begins with optional white spaces\n  #  followed by \"Bit\"\n  #  followed by at least one white space\n  #  followed by at least one digit (we capture the digits)\n  #  followed by an optional sequence of optional white spaces, \"-\", optional white spaces and at least one digit (we capture the digits)\n  #  followed by an optional sequence of at least one white space and any characters (we capture the characters)\n  #  followed by the end of the line\n  if ($line =~ m/^\\s*Bit\\s+(\\d+)(?:\\s*-\\s*(\\d+))?(?:\\s+(.*?))?$/) {\n    my ($position_begin, $position_end, $description) = ($1, $2, $3);\n    my $width;\n\n    # if there already are bits we've processed\n    if (scalar(@bits)) {\n      # the lines possibly buffered belong to the bit before the current one, so append them to its description\n      $bits[$#bits]-&gt;{description} .= (length($bits[$#bits]-&gt;{description}) ? \"\\n\" : '') . $line_buffer;\n      # and reset the line buffer to collect the additional lines of the current bit;\n      $line_buffer = '';\n    }\n\n    # $position_end is defined only if it was a \"Bit n-m\"\n    # otherwise set it to $position_begin\n    $position_end = defined($position_end) ? $position_end : $position_begin;\n\n    $width = abs($position_end - $position_begin) + 1;\n\n    # set description to the empty string if not defined (i.e. no description was found)\n    $description = defined($description) ? $description : '';\n\n    # push a ref to a new hash with the keys position, description and width into the list of bits\n    push(@bits, { position =&gt; (sort({$a &lt;=&gt; $b} ($position_begin, $position_end)))[0], # always take the lower position\n                  description =&gt; $description,\n                  width =&gt; $width });\n  }\n  else {\n    # it's not a bit pattern, so just buffer the line\n    $line_buffer .= (length($line_buffer) ? \"\\n\" : '') . $line;\n  }\n}\n# anything still in the buffer must belong to the overall description\n$description_overall .= $line_buffer;\n\nprint(\"&lt;Register&gt;\\n  &lt;long_description&gt;\\n$description_overall\\n  &lt;/long_description&gt;\\n\");\nforeach my $bit (@bits) {\n  print(\"  &lt;bit_field position=\\\"$bit-&gt;{position}\\\" width=\\\"$bit-&gt;{width}\\\"&gt;\\n    &lt;long_description&gt;\\n$bit-&gt;{description}\\n    &lt;/long_description&gt;\\n  &lt;/bit_field&gt;\\n\")\n}\nprint(\"&lt;/Register&gt;\\n\");\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>&lt;Register&gt;\n  &lt;long_description&gt;\n                        These registers containpart of the Upstream Message.\n                        They should be written only after the cleared by hardware.\n\n                        Empty line above\n                        Bla bla bla...\n  &lt;/long_description&gt;\n  &lt;bit_field position=\"6\" width=\"1\"&gt;\n    &lt;long_description&gt;\nrandom description\n                        Bla bla additional line bla bla\n                        bla bla\n    &lt;/long_description&gt;\n  &lt;/bit_field&gt;\n  &lt;bit_field position=\"5\" width=\"1\"&gt;\n    &lt;long_description&gt;\nmsg octet 2\n                        Empty line below\n\n                        Bla bla set to gain instant world domination bla bla\n    &lt;/long_description&gt;\n  &lt;/bit_field&gt;\n  &lt;bit_field position=\"1\" width=\"4\"&gt;\n    &lt;long_description&gt;\n\n    &lt;/long_description&gt;\n  &lt;/bit_field&gt;\n  &lt;bit_field position=\"0\" width=\"1\"&gt;\n    &lt;long_description&gt;\nmsg octet 4\n    &lt;/long_description&gt;\n  &lt;/bit_field&gt;\n&lt;/Register&gt;             \n</code></pre>\n\n<p>I wrote it as stand alone script, so that I could test it. You'll have to adapt it into your script.</p>\n\n<p>Maybe add some processing of the overall description eliminating those long sequences of white spaces.</p>\n\n<p>First I tried using a continuing pattern (<code>while ($x =~ m/^...$/gc)</code>) but that somehow ate the line endings away resulting in only matching every second line. Lookarounds, to keep them out of the actual match, didn't work (said it wasn't implemented; I guess, I'll have to check my Perl on this computer?), so the explicit splitting into lines is a work around.</p>\n\n<p>It might also be possible to shorten it using <code>grep()</code>s, <code>map()</code>s or the like. But the verbose version better demonstrates the ideas, I think. So I didn't even look into that.</p>\n"}], "owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 50115865, "answer_count": 1, "score": 0, "last_activity_date": 1525431311, "creation_date": 1525167341, "last_edit_date": 1525349129, "question_id": 50114268, "link": "https://stackoverflow.com/questions/50114268/perl-how-to-split-paragraph-keeping-last-sentences-into-another-array", "title": "Perl: How to split paragraph keeping last sentences into another array?", "body": "<p>I am trying to split <code>&lt;Description&gt;</code> text by <code>Bit</code> <em>number</em> and to put into particular <code>Bit</code> <em>number</em> element. Here is the file, I am parsing.</p>\n\n<pre><code>        &lt;Register&gt;\n                &lt;Name&gt;abc&lt;/Name&gt;\n                &lt;Abstract&gt;&lt;/Abstract&gt;\n                &lt;Description&gt;Bit 6  random description\n                    Bit 5 msg octet 2\n                    Bit 4-1 \n                    Bit 0 msg octet 4\n                    These registers containpart of the Upstream Message. \n                    They should be written only after the cleared by hardware.\n                    &lt;/Description&gt;\n        &lt;Field&gt;\n        &lt;Name&gt;qwe&lt;/Name&gt;\n\n        &lt;Description&gt;&lt;/Description&gt;\n        &lt;BitFieldOffset&gt;6&lt;/BitFieldOffset&gt;\n        &lt;Size&gt;1&lt;/Size&gt;\n        &lt;AccessMode&gt;Read/Write&lt;/AccessMode&gt;\n\n        &lt;/Field&gt;\n    &lt;Field&gt;\n        &lt;Name&gt;qwe&lt;/Name&gt;\n\n        &lt;Description&gt;&lt;/Description&gt;\n        &lt;BitFieldOffset&gt;5&lt;/BitFieldOffset&gt;\n        &lt;Size&gt;1&lt;/Size&gt;\n        &lt;AccessMode&gt;Read/Write&lt;/AccessMode&gt;\n\n        &lt;/Field&gt;\n&lt;Field&gt;\n....\n&lt;/Field&gt;\n                &lt;/Register&gt;\n            &lt;Register&gt;\n                &lt;Name&gt;xyz&lt;/Name&gt;\n                &lt;Abstract&gt;&lt;/Abstract&gt;\n                &lt;Description&gt;Bit 3  msg octet 1\n                    Bit 2 msg octet 2\n                    Bit 1 msg octet 3\n                    Bit 0 msg octet 4\n                    These registers. \n                    They should be written only after the cleared by hardware.\n                &lt;/Description&gt;\n&lt;Field&gt;\n....\n&lt;/Field&gt;\n&lt;Field&gt;\n....\n&lt;/Field&gt;\n            &lt;/Register&gt;\n</code></pre>\n\n<p>The expected output would be:</p>\n\n<pre><code>Expected output:\n\n&lt;Register&gt;\n&lt;long_description&gt;\nThese registers containpart of the Upstream Message. \n    They should be written only after the cleared by hardware.\n&lt;/long_description&gt;\n\n&lt;bit_field position=\"6\" width=\" 1\"&gt;\n&lt;long_description&gt;\n&lt;p&gt; random description&lt;/p&gt;\n&lt;/long_description&gt;\n&lt;bit_field position=\"5\" width=\" 1\"&gt;\n&lt;long_description&gt;\n&lt;p&gt;...&lt;/p&gt;\n&lt;/long_description&gt;\n&lt;bit_field position=\"1\" width=\" 4\"&gt;\n&lt;long_description&gt;\n&lt;p&gt;...&lt;/p&gt;\n&lt;/long_description&gt;\n\n&lt;/Register&gt;\n\n&lt;Register&gt;\n.\n.\n.\n&lt;/Register&gt;\n</code></pre>\n\n<p>I am using XML-Twig package to parse this file but got stuck into the splitting. </p>\n\n<pre><code>foreach my $register ( $twig-&gt;get_xpath('//Register') ) # get each &lt;Register&gt;\n    {\n\n        my $reg_description= $register-&gt;first_child('Description')-&gt;text;\n        .\n        .\n        .\n          foreach my $xml_field ($register-&gt;get_xpath('Field'))\n          {\n             .\n             .\n             my @matched = split ('Bit\\s+[0-9]', $reg_description);\n             .\n             .\n           }\n   }\n</code></pre>\n\n<p>I do not know how to create <code>&lt;bit_field&gt;</code> accordingly and keep text except <code>Bit</code> into <code>&lt;Register&gt; &lt;long_description&gt;</code>. Can anyone please help here?</p>\n\n<p><strong>Edits</strong>:\nThe <code>Bit</code> in <code>&lt;Description&gt;</code> can have multiple lines. e.g in following example, <code>Bit 10-9</code>'s description is till starting of <code>Bit 8</code></p>\n\n<pre><code>&lt;Description&gt;Bit 11 GOOF \nBit 10-9 Clk Selection:\n 00 :  8 MHz\n 01 :  4 MHz\n 10 :  2 MHz\n 11 :  1 MHz\nBit 8 Clk Enable : 1 = Enable CLK\n&lt;Description&gt;\n</code></pre>\n"}, {"tags": ["python", "bash", "perl", "awk", "grep"], "comments": [{"owner": {"reputation": 15501, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "edited": false, "score": 3, "creation_date": 1525167148, "post_id": 50114200, "comment_id": 87245337, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 29, "user_id": 1989534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ea5a6f427e98651cedf502e4711f12e?s=128&d=identicon&r=PG", "display_name": "the sudhakar", "link": "https://stackoverflow.com/users/1989534/the-sudhakar"}, "reply_to_user": {"reputation": 15501, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "edited": false, "score": 0, "creation_date": 1525167879, "post_id": 50114200, "comment_id": 87245676, "body": "The description of the above link says &quot;When asking a question about a problem caused by your code..&quot;. But this is not a problem in my code. I want a solution for my problem as I do not have any code to show."}, {"owner": {"reputation": 15501, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "edited": false, "score": 0, "creation_date": 1525168198, "post_id": 50114200, "comment_id": 87245816, "body": "And this is not a code writing service. But assuming I was willing to write the code for you (after all it is one or two lines), how can I verify it does what you&#39;re trying to do without even an input/output example?"}], "answers": [{"tags": [], "owner": {"reputation": 884, "user_id": 9009404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6be791318ce35f7966345ff4964a2025?s=128&d=identicon&r=PG&f=1", "display_name": "Uprooted", "link": "https://stackoverflow.com/users/9009404/uprooted"}, "is_accepted": true, "score": 0, "last_activity_date": 1525170041, "creation_date": 1525170041, "answer_id": 50114840, "question_id": 50114200, "link": "https://stackoverflow.com/questions/50114200/how-to-print-n-words-of-context-while-searching-text/50114840#50114840", "title": "how to print n words of context while searching text", "body": "<p>If you can slurp whole input:</p>\n\n<pre><code>perl -e'undef$/;\n        $a=&lt;&gt;;\n        print \"$_\\n\" for $a=~m/(?:\\b\\S+\\b\\s+){5}your regexp(?:\\s+\\b\\S+\\b){5}/sg\n      ' &lt;input\n</code></pre>\n\n<p>-- 5 words of context.</p>\n"}], "owner": {"reputation": 29, "user_id": 1989534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ea5a6f427e98651cedf502e4711f12e?s=128&d=identicon&r=PG", "display_name": "the sudhakar", "link": "https://stackoverflow.com/users/1989534/the-sudhakar"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1525182274, "accepted_answer_id": 50114840, "answer_count": 1, "score": -7, "last_activity_date": 1525170041, "creation_date": 1525167075, "last_edit_date": 1525167929, "question_id": 50114200, "link": "https://stackoverflow.com/questions/50114200/how-to-print-n-words-of-context-while-searching-text", "closed_reason": "Needs details or clarity", "title": "how to print n words of context while searching text", "body": "<p>By way of analogy, I have used grep with -C many times. But it prints n lines of context. Instead I want n words. Any solution using perl / bash / any other commonly available tools is welcome. </p>\n"}, {"tags": ["perl", "redis", "mojolicious"], "answers": [{"comments": [{"owner": {"reputation": 960, "user_id": 1690835, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c614449df29422a914209c7d600e351?s=128&d=identicon&r=PG", "display_name": "Akhilesh", "link": "https://stackoverflow.com/users/1690835/akhilesh"}, "edited": false, "score": 1, "creation_date": 1525168377, "post_id": 50114041, "comment_id": 87245892, "body": "Thanks. I used json to save the data."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 960, "user_id": 1690835, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c614449df29422a914209c7d600e351?s=128&d=identicon&r=PG", "display_name": "Akhilesh", "link": "https://stackoverflow.com/users/1690835/akhilesh"}, "edited": false, "score": 1, "creation_date": 1525168800, "post_id": 50114041, "comment_id": 87246089, "body": "@user1690835 just keep in mind that with JSON you can&#39;t persist Perl objects without adding additional work. Only data."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1525166336, "creation_date": 1525166336, "answer_id": 50114041, "question_id": 50113851, "link": "https://stackoverflow.com/questions/50113851/how-to-save-hash-value-in-mojoredis2/50114041#50114041", "title": "How to save hash value in Mojo::Redis2?", "body": "<p>You misunderstand what <a href=\"https://redis.io/commands/hset\" rel=\"nofollow noreferrer\"><code>HSET</code> does in Redis</a>. It's not for saving a whole Perl data structure. It's for saving a single value under a specific key inside the <em>hash</em> data structure that Redis offers. That's different from a normal key/value store operation insofar that you can then use other Redis hash related operations on it.</p>\n\n<p>It seems what you want to do is save a complete Perl data structure for later use, without operating on the data inside it from within Redis.</p>\n\n<p>You can use a regular <code>SET</code> operation for that, but you need to <a href=\"https://en.wikipedia.org/wiki/Serialization\" rel=\"nofollow noreferrer\"><em>serialise</em></a> your Perl data structure for that. Essentially that means to turn the memory that your Perl program uses to store these values into character data that other programs can understand. </p>\n\n<p>Common tools for serialising and deserialising data in Perl are <a href=\"https://metacpan.org/pod/Storable\" rel=\"nofollow noreferrer\">Storable</a> or <a href=\"https://metacpan.org/pod/Sereal\" rel=\"nofollow noreferrer\">Sereal</a>. The latter is more powerful, but probably only makes sense on large data structures.</p>\n\n<p>If your data only contains text, any JSON implementation would also work, which would give you the added benefit of programs in other languages being able to read and write this data, increasing interoperability, at the cost of needing more memory.</p>\n\n<p>Giving a full implementation of this would be outside of the scope of this answer, but effectively what you need to do is this:</p>\n\n<pre><code># to store\n$self-&gt;app-&gt;redis-&gt;set('namespace:key', serealise(\\%HoH));\n\n# to retrieve\nmy $hashref_of_hashes = deserialise($self-&gt;app-&gt;redis-&gt;get('namespace:key'));\n</code></pre>\n\n<p>Where <code>serealise()</code> and <code>deserealise()</code> are synonymous for a <em>freezing</em> and <em>thawing</em> (turning into a string or back) mechanism.</p>\n\n<hr>\n\n<p>You might also want to take a look at the cache interface <a href=\"https://p3rl.org/CHI\" rel=\"nofollow noreferrer\">CHI</a>.</p>\n"}], "owner": {"reputation": 960, "user_id": 1690835, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c614449df29422a914209c7d600e351?s=128&d=identicon&r=PG", "display_name": "Akhilesh", "link": "https://stackoverflow.com/users/1690835/akhilesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 50114041, "answer_count": 1, "score": 3, "last_activity_date": 1525166429, "creation_date": 1525165422, "last_edit_date": 1525166429, "question_id": 50113851, "link": "https://stackoverflow.com/questions/50113851/how-to-save-hash-value-in-mojoredis2", "title": "How to save hash value in Mojo::Redis2?", "body": "<p>I am trying to save hash value in <a href=\"https://metacpan.org/pod/Mojo::Redis2\" rel=\"nofollow noreferrer\">Mojo::Redis2</a>. The sample hash value is given below.</p>\n\n<pre><code>'user' =&gt; {\n          'manage-detail' =&gt; {\n                               '46' =&gt; 'edit',\n                               '45' =&gt; 'list',\n                               '44' =&gt; 'create',\n                               '48' =&gt; 'delete',\n                               '47' =&gt; 'search'\n                             },\n          'manage-procedure' =&gt; {\n                                    '27' =&gt; 'search',\n                                    '25' =&gt; 'list',\n                                    '24' =&gt; 'create',\n                                    '26' =&gt; 'edit'\n                                  }\n            }\n</code></pre>\n\n<p>I am saving and reading from redis using the code below.</p>\n\n<pre><code>$self-&gt;app-&gt;redis-&gt;hset('test', %HoH);\nmy %res = $self-&gt;app-&gt;redis-&gt;hget(\"test\",'user');\n</code></pre>\n\n<p>But it is not working. When reading the hash value is empty.</p>\n"}, {"tags": ["regex", "perl", "hash-of-hashes"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 3, "creation_date": 1525161447, "post_id": 50113096, "comment_id": 87243336, "body": "Could you please show the code you tried?"}, {"owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "edited": false, "score": 0, "creation_date": 1525163261, "post_id": 50113096, "comment_id": 87243919, "body": "do you accept other solutions than perl?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525165391, "post_id": 50113096, "comment_id": 87244648, "body": "You can easily solve this with sqlite if you know a little bit of SQL. That might be easier for you than writing a program. Look for how to <i>import</i> a CSV file, and then how to group columns together and <i>sum up</i> only if a column is a certain value."}, {"owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "edited": false, "score": 0, "creation_date": 1525229865, "post_id": 50113096, "comment_id": 87271036, "body": "Advice to newcomers: If an answer solves your problem,  please accept it by clicking the large check mark (\u2713) next to it and optionally also up-vote it  (up-voting requires at least 15 reputation points).  If you found other answers helpful, please up-vote them. Accepting and up-voting helps future readers.  Please see [the relevant help-center article][1] [1]: <a href=\"http://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "is_accepted": false, "score": -1, "last_activity_date": 1525163666, "creation_date": 1525163666, "answer_id": 50113506, "question_id": 50113096, "link": "https://stackoverflow.com/questions/50113096/combination-of-two-columns-from-text-file-and-finding-count-with-reference-to-th/50113506#50113506", "title": "Combination of two columns from text file and finding count with reference to third column in Perl", "body": "<p>This is not a <code>perl</code> solution, but this works fine with <code>awk</code>:</p>\n\n<p><strong>AWK 1-liner</strong>:</p>\n\n<pre><code>awk 'BEGIN{FS=OFS=\",\";print \"Account,Template,Active,NotActive\"}NR&gt;1{if($3==\"Y\"){a[$2 FS $1]++}else{b[$2 FS $1]++}}END{for(i in a){print i OFS a[i] OFS b[i]+0}for(u in b){if(b[u] &amp;&amp; !a[u]){print u OFS a[u]+0 OFS b[u]}}}' input_file | sort -n\n</code></pre>\n\n<p><strong>AWK script</strong>:</p>\n\n<pre><code># BEGIN rule(s)\n\nBEGIN {\n        FS = OFS = \",\" #defines input/output field separator as ,\n        print \"Account,Template,Active,NotActive\" #print the header\n}\n\n# Rule(s)\n\nNR &gt; 1 { # from the 2nd line of the file\n        if ($3 == \"Y\") { # if the 3rd field is at Y\n                a[$2 FS $1]++ #increment the array  indexed by $2 FS $1 \n        } else {\n                b[$2 FS $1]++ #do the same when N with the other array\n        }\n}\n\n# END rule(s)\n\nEND {\n        for (i in a) { # loop on all values of the arrays and print the content\n                print i OFS a[i] OFS (b[i] + 0)\n        }\n        for (u in b) {\n                if (b[u] &amp;&amp; ! a[u]) { # do the same with the nonactive array and avoid double printing\n                        print u OFS (a[u] + 0) OFS b[u]\n                }\n        }\n} #pipe the output to a numerical sort to perform the proper ordering of the output\n</code></pre>\n\n<p><strong>DEMO:</strong></p>\n\n<p>Input:</p>\n\n<pre><code>$ cat input_file \nTemplate,Account,Active\n123456,123,N\n123456,456,Y\n321478,456,Y\n123456,123,N\n321478,456,Y\n123457,125,N\n123457,125,Y\n</code></pre>\n\n<p><strong>output:</strong></p>\n\n<pre><code>Account,Template,Active,NotActive\n123,123456,0,2\n125,123457,1,1\n456,123456,1,0\n456,321478,2,0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 34, "user_id": 5944077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o3OsQ.jpg?s=128&g=1", "display_name": "rav", "link": "https://stackoverflow.com/users/5944077/rav"}, "edited": false, "score": 1, "creation_date": 1525176910, "post_id": 50116288, "comment_id": 87249706, "body": "pleasw check the answer...i have written and its working as expected"}, {"owner": {"reputation": 34, "user_id": 5944077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o3OsQ.jpg?s=128&g=1", "display_name": "rav", "link": "https://stackoverflow.com/users/5944077/rav"}, "edited": false, "score": 1, "creation_date": 1525182329, "post_id": 50116288, "comment_id": 87252463, "body": "hi Rajneesh...please provide feedback on the answer provided"}], "tags": [], "owner": {"reputation": 34, "user_id": 5944077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o3OsQ.jpg?s=128&g=1", "display_name": "rav", "link": "https://stackoverflow.com/users/5944077/rav"}, "is_accepted": true, "score": 1, "last_activity_date": 1525176849, "creation_date": 1525176849, "answer_id": 50116288, "question_id": 50113096, "link": "https://stackoverflow.com/questions/50113096/combination-of-two-columns-from-text-file-and-finding-count-with-reference-to-th/50116288#50116288", "title": "Combination of two columns from text file and finding count with reference to third column in Perl", "body": "<pre><code>my $filename = 'input.txt';\nmy %yhash;\nmy %nhash;\nif (open(my $ifh, '&lt;:encoding(UTF-8)', $filename)) {\n    while (my $row = &lt;$ifh&gt;) {\n    next if ($row =~ /^#/m);\n    chomp $row;\n    my @values = split(',',$row);\n    my $value = join '',@values ;\n    my $lastchar = substr $value , -1;\n    my $firstval = substr $value ,0,9;\n    if ($lastchar eq \"N\"){\n              if (exists($nhash{firstval})){ $nhash{firstval}++; }\n              $nhash{$firstval}++;\n    }elsif($lastchar eq \"Y\"){\n              if (exists($yhash{firstval})){ $yhash{firstval}++; }\n              $yhash{$firstval}++;\n    }else{\n             print \"nothin\\n\";\n\n    }\n    }\n    close $ifh;\n    } else {\n    warn \"Could not open file '$filename' $!\";\n    }\n\n\n   open(FH, '&gt;', 'out.txt') or die $!;\n   print FH \"Account,Template,Active,NotActive\\n\";\n   while (my ($key, $value) = each(%nhash)) {\n    my $account = substr $key ,6,3;\n    my $template = substr $key ,0,6;\n    my $active = \"0\";\n    my $notactive = \"$value\";\n    print FH \"$account,$template,$active,$notactive \\n\";\n   }\n  while (my ($key, $value) = each(%yhash)) {\n    my $account = substr $key ,6,3;\n    my $template = substr $key ,0,6;\n    my $active = \"$value\";\n    my $notactive = \"0\";\n    print FH \"$account,$template,$active,$notactive \\n\";\n  }\n  close (FH);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": 4, "last_activity_date": 1525195121, "last_edit_date": 1525195121, "creation_date": 1525185069, "answer_id": 50118350, "question_id": 50113096, "link": "https://stackoverflow.com/questions/50113096/combination-of-two-columns-from-text-file-and-finding-count-with-reference-to-th/50118350#50118350", "title": "Combination of two columns from text file and finding count with reference to third column in Perl", "body": "<p>This works as well:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %data;\nopen my $fh, \"&lt;\", \"in.txt\" or die $!;\nwhile (my $line = &lt;$fh&gt;) {\n    chomp $line;\n    next if($line =~ /Account/);\n    my @line = split ',', $line;\n    $data{$line[1]}{$line[0]}{'Y'} = 0 if(!defined $data{$line[1]}{$line[0]}{'Y'});\n    $data{$line[1]}{$line[0]}{'N'} = 0 if(!defined $data{$line[1]}{$line[0]}{'N'});\n    $data{$line[1]}{$line[0]}{$line[2]} ++;\n}\nclose $fh;\nopen my $FH, \"&gt;\", \"out.txt\" or die $!;\n    print $FH \"Account,Template,Active,NotActive\\n\";\n    foreach my $key (sort keys %data) {\n        foreach my $key2 (sort keys %{$data{$key}}) {\n            print $FH \"$key,$key2,$data{$key}{$key2}{'Y'},$data{$key}{$key2}{'N'}\\n\";\n        }\n    }\nclose $FH;\n</code></pre>\n\n<p>You can also replace these two lines</p>\n\n<pre><code>$data{$line[1]}{$line[0]}{'Y'} = 0 if(!defined $data{$line[1]}{$line[0]}{'Y'});\n$data{$line[1]}{$line[0]}{'N'} = 0 if(!defined $data{$line[1]}{$line[0]}{'N'});\n</code></pre>\n\n<p>with </p>\n\n<pre><code>$data{$line[1]}{$line[0]}{$_} //= 0 foreach ('Y', 'N');\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 9259206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1693714d152d6947dad4e247bbb7686?s=128&d=identicon&r=PG&f=1", "display_name": "Rajneesh", "link": "https://stackoverflow.com/users/9259206/rajneesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 50116288, "answer_count": 3, "score": 1, "last_activity_date": 1525195121, "creation_date": 1525161195, "last_edit_date": 1525161339, "question_id": 50113096, "link": "https://stackoverflow.com/questions/50113096/combination-of-two-columns-from-text-file-and-finding-count-with-reference-to-th", "title": "Combination of two columns from text file and finding count with reference to third column in Perl", "body": "<p>I am trying to read the in.txt file and generate an output file out.txt Using Perl. I tried with Hashes but not getting exact output.</p>\n\n<p>Is there a way to do this in Perl.</p>\n\n<p>Combination of two columns and providing comments on the basis of third column.</p>\n\n<p><strong>in.txt</strong></p>\n\n<pre><code>Template,Account,Active\n123456,123,N\n123456,456,Y\n321478,456,Y\n123456,123,N\n321478,456,Y\n</code></pre>\n\n<p><strong>out.txt</strong></p>\n\n<pre><code>Account,Template,Active,NotActive\n123,123456,0,2\n456,321478,2,0\n456,123456,1,0\n</code></pre>\n"}, {"tags": ["perl", "grammar", "marpa", "regexp-grammars"], "answers": [{"comments": [{"owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "edited": false, "score": 0, "creation_date": 1525124816, "post_id": 50108640, "comment_id": 87234625, "body": "my $input3 = &quot;&#39;foo&#39;&#39;&#39;; If you give input like this, still slash come in the output ."}, {"owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "edited": false, "score": 0, "creation_date": 1525125488, "post_id": 50108640, "comment_id": 87234850, "body": "also, if you give input as : my $input3 = &quot;\\&quot;foo1\\&quot;&quot;; here also in output it doesnt show slash. So, why it shows in the third one?"}], "tags": [], "owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "is_accepted": false, "score": 0, "last_activity_date": 1525124663, "creation_date": 1525124663, "answer_id": 50108640, "question_id": 50108574, "link": "https://stackoverflow.com/questions/50108574/parse-single-quoted-string-using-marpar2-perl/50108640#50108640", "title": "Parse single quoted string using Marpa:r2 perl", "body": "<p>Your result doesn't contain <code>\\'</code>, it contains <code>'</code>.  <code>Dumper</code> merely formats the result like that so it's clear what's inside the string and what isn't.</p>\n\n<p>You can test this behavior for yourself:</p>\n\n<pre><code>use Data::Dumper;\n\nmy $tick = chr(39);\nmy $back = chr(92);\n\nprint \"Tick Dumper: \" . Dumper($tick);\nprint \"Tick Print:  \" . $tick . \"\\n\";\nprint \"Backslash Dumper: \" . Dumper($back);\nprint \"Backslash Print:  \" . $back . \"\\n\";\n</code></pre>\n\n<p>You can see a demo here: <a href=\"https://ideone.com/d1V8OE\" rel=\"nofollow noreferrer\">https://ideone.com/d1V8OE</a></p>\n\n<p>If you don't want the output to contain single quotes, you'll probably need to remove them from the input yourself.</p>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1525163585, "creation_date": 1525163585, "answer_id": 50113488, "question_id": 50108574, "link": "https://stackoverflow.com/questions/50108574/parse-single-quoted-string-using-marpar2-perl/50113488#50113488", "title": "Parse single quoted string using Marpa:r2 perl", "body": "<p>I am not so familar with <code>Marpa::R2</code>, but could you try to use an action on the <code>Expression</code> rule:</p>\n\n<pre><code>Expression ::= Param action =&gt; strip_quotes\n</code></pre>\n\n<p>Then, implement a simple quote stripper like:</p>\n\n<pre><code>sub MyActions::strip_quotes {\n    @{$_[1]}[0] =~ s/^'|'$//gr;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 2, "last_activity_date": 1525167487, "creation_date": 1525167487, "answer_id": 50114296, "question_id": 50108574, "link": "https://stackoverflow.com/questions/50108574/parse-single-quoted-string-using-marpar2-perl/50114296#50114296", "title": "Parse single quoted string using Marpa:r2 perl", "body": "<p>The other answer regarding Data::Dumper output is correct. However, your grammar does not work the way you expect it to.</p>\n\n<p>When you parse the input <code>'foo'</code>, Marpa will consider the three <code>Param</code> alternatives. The predicted lexemes at that position are:</p>\n\n<ul>\n<li><code>Unquoted      ~ [^\\s\\/\\(\\),&amp;:\\\"~]+</code></li>\n<li><code>'\"'</code></li>\n<li><code>') Quoted ('</code></li>\n</ul>\n\n<p>Yes, the last is literally <code>) Quoted (</code>, not anything containing a single quote.</p>\n\n<p>Even if it were <code>([']) Quoted (['])</code>: Due to longest token matching, the Unquoted lexeme will match the entire input, including the single quote.</p>\n\n<p>What would happen for an input like <code>\" foo \"</code> (with double quotes)? Now, only the <code>'\"'</code> lexeme would match, then any whitespace would be discarded, then the Quoted lexeme matches, then any whitespace is discarded, then closing <code>\"</code> is matched.</p>\n\n<p>To prevent this whitespace-skipping behaviour and to prevent the Unquoted rule from being preferred due to LATM, it makes sense to describe quoted strings as lexemes. For example:</p>\n\n<pre><code>Param ::= Unquoted | Quoted\nUnquoted ~ [^'\"]+\nQuoted ~ DQ | SQ\nDQ ~ '\"' DQ_Body '\"'  DQ_Body ~ [^\"]*\nSQ ~ ['] SQ_Body [']  SQ_Body ~ [^']*\n</code></pre>\n\n<p>These lexemes will then include any quotes and escapes, so you need to post-process the lexeme contents. You can either do this using the event system (which is conceptually clean, but a bit cumbersome to implement), or adding an action that performs this processing during parse evaluation.</p>\n\n<p>Since lexemes cannot have actions, it is usually best to add a proxy production:</p>\n\n<pre><code>Param ::= Unquoted | Quoted\nUnquoted ~ [^'\"]+\nQuoted ::= Quoted_Lexeme action =&gt; process_quoted\nQuoted_Lexeme ~ DQ | SQ\nDQ ~ '\"' DQ_Body '\"'  DQ_Body ~ [^\"]*\nSQ ~ ['] SQ_Body [']  SQ_Body ~ [^']*\n</code></pre>\n\n<p>The action could then do something like:</p>\n\n<pre><code>sub process_quoted {\n  my (undef, $s) = @_;\n  # remove delimiters from double-quoted string\n  return $1 if $s =~ /^\"(.*)\"$/s;\n  # remove delimiters from single-quoted string\n  return $1 if $s =~ /^'(.*)'$/s;\n  die \"String was not delimited with single or double quotes\";\n}\n</code></pre>\n"}], "owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 50114296, "answer_count": 3, "score": 2, "last_activity_date": 1525167487, "creation_date": 1525124293, "last_edit_date": 1525148943, "question_id": 50108574, "link": "https://stackoverflow.com/questions/50108574/parse-single-quoted-string-using-marpar2-perl", "title": "Parse single quoted string using Marpa:r2 perl", "body": "<p>How to parse single quoted string using Marpa:r2?\nIn my below code, the single quoted strings appends '\\' on parsing.</p>\n\n<p>Code:</p>\n\n<pre><code>use strict;\nuse Marpa::R2;\nuse Data::Dumper;\n\n\nmy $grammar = Marpa::R2::Scanless::G-&gt;new(\n   {  default_action =&gt; '[values]',\n      source         =&gt; \\(&lt;&lt;'END_OF_SOURCE'),\n  lexeme default = latm =&gt; 1\n\n:start ::= Expression\n\n# include begin\n\nExpression ::= Param\nParam ::= Unquoted                                         \n        | ('\"') Quoted ('\"') \n        | (') Quoted (')\n\n:discard      ~ whitespace \nwhitespace    ~ [\\s]+\n\nUnquoted      ~ [^\\s\\/\\(\\),&amp;:\\\"~]+\nQuoted        ~ [^\\s&amp;:\\\"~]+\n\nEND_OF_SOURCE\n   });\n\nmy $input1 = 'foo';\n#my $input2 = '\"foo\"';\n#my $input3 = '\\'foo\\'';\n\nmy $recce = Marpa::R2::Scanless::R-&gt;new({ grammar =&gt; $grammar });\n\nprint \"Trying to parse:\\n$input1\\n\\n\";\n$recce-&gt;read(\\$input1);\nmy $value_ref = ${$recce-&gt;value};\nprint \"Output:\\n\".Dumper($value_ref);\n</code></pre>\n\n<p>Output's:</p>\n\n<pre><code>Trying to parse:\nfoo\n\nOutput:\n$VAR1 = [\n          [\n            'foo'\n          ]\n        ];\n\nTrying to parse:\n\"foo\"\n\nOutput:\n$VAR1 = [\n          [\n            'foo'\n          ]\n        ];\n\nTrying to parse:\n'foo'\n\nOutput:\n$VAR1 = [\n          [\n            '\\'foo\\''\n          ]\n        ]; (don't want it to be parsed like this)\n</code></pre>\n\n<p>Above are the outputs of all the inputs, i don't want 3rd one to get appended with the '\\' and single quotes.. I want it to be parsed like OUTPUT2. Please advise.</p>\n\n<p>Ideally, it should just pick the content between single quotes according to Param ::= (') Quoted (')</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1525122716, "post_id": 50107745, "comment_id": 87233867, "body": "If you&#39;re ever about to write <code>split &#47;\\s&#47;</code> then you should probably change it to <code>split &quot; &quot;</code> instead. This is a special case, and avoids an initial empty string in the resulting list if there happened to be leading whitespace in the object of the <code>split</code>. It is also the default value, so if you are also splitting the default value <code>$_</code> then you can write just <code>split</code> to  do <code>split &quot; &quot;, $_</code> which is a very common construct."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1525124514, "post_id": 50107745, "comment_id": 87234532, "body": "I suggest that you should use Perl itself to do the wildcarding, especially if portability is an issue. Note also that there is a module <code>File::Zglob</code> which will do the heavy lifting for you. (It has a problem with Perl v5.26 because it depends on <code>@INC</code> containing <code>.</code>, but there is an interim fix in the form of <code>Code::TidyAll::Zglob</code>.)"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1525125198, "post_id": 50107745, "comment_id": 87234736, "body": "Thanks, especially for the 2nd comment.  I&#39;ll definitely check this out."}], "answers": [{"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1525125119, "post_id": 50108068, "comment_id": 87234710, "body": "See my updated question:  I tried the string vs array thing, basically, although I may have misunderstood the required syntax (I still often do)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1525125188, "post_id": 50108068, "comment_id": 87234734, "body": "@zzxyz Oh -- don&#39;t take reference if it&#39;s a string, just <code>run3($cmd, ...)</code>."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1525125309, "post_id": 50108068, "comment_id": 87234773, "body": "ah...ok..then I get <code>sh: 1: Syntax error: &quot;(&quot; unexpected</code>.  And I&#39;m assuming at this point it&#39;s using the system default shell rather than mine?  <code>*(.)</code> is <code>zsh</code>-specific"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1525125475, "post_id": 50108068, "comment_id": 87234845, "body": "@zzxyz  Is the syntax <code>*(.)</code> valid in some shells? (What does the <code>.</code> mean there?) The <code>system</code>, which <code>IPC::Run3</code> uses, will use <code>sh</code> or whatever is used for it, most often <code>bash</code> on Linux.  In that shell you&#39;d say <code>*</code> for all files."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1525125697, "post_id": 50108068, "comment_id": 87234921, "body": "In <code>zsh</code> <code>()</code> is a glob qualifier, and <code>.</code> means I just want plain files (not directories, links, etc.).  (that&#39;s from <code>man zshexpn</code>)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1525125904, "post_id": 50108068, "comment_id": 87234996, "body": "@zzxyz Heh, there you go ... I don&#39;t know that one can do that in bash.  You can start the <code>$cmd</code> with <code>zsh -c</code>, but then you are on your own with quoting things that you want to ensure are not interpolated. Reinforces my suggestion to consider a design whereby things are prepared (for an external command) in Perl (see edit to my answer).  In principle, I suggest do outside of Perl only what is necessary."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1525126308, "post_id": 50108068, "comment_id": 87235115, "body": "Yeah, this gets nasty very quickly because <code>zsh -c </code> requires the command be quoted and therefore if the user tries to use the same quotes...badness results.  I&#39;ll check out the perl globbing for sure."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1525126455, "post_id": 50108068, "comment_id": 87235162, "body": "@zzxyz  (thank you for attribution)  Globbing is quite trivial.  For example, for what you said, one way: <code>my @files = grep { -f } glob &quot;$dir&#47;*&quot;;</code>. Add <code>use File::Glob &#39;:bsd_glob&#39;;</code> so that spaces in names are handled. See <a href=\"https://perldoc.perl.org/File/Glob.html\" rel=\"nofollow noreferrer\">File::Glob</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1525135737, "post_id": 50108068, "comment_id": 87237408, "body": "@zzxyz, If you have a <code>zsh</code> command, you will need to invoke <code>zsh</code> instead of <code>sh</code>. <code>run3 $cmd, ...</code> is effectively short for <code>run3 [ &#39;&#47;bin&#47;sh&#39;, &#39;-c&#39;, $cmd ], ...</code>, so you want <code>run3 [ &#39;zsh&#39;, &#39;-c&#39;, $cmd ], ...</code>"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525137538, "post_id": 50108068, "comment_id": 87237743, "body": "@ikegami - thanks.  I ended up using globbing for the local files and then <code>&#39;ssh&#39;, &#39;host&#39;, &#39;md5sum file1 file2 file3&#39;</code> after retrieving a remote listing.  That was tricky to get right.  But now the client is just passing local and remote paths and a host name so less breakage potential (although plenty still, I&#39;m sure).  (Injection would be a huge issue if this program weren&#39;t for just me)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 2, "creation_date": 1525137798, "post_id": 50108068, "comment_id": 87237802, "body": "@zzxyz, I hope you actually used <code>shell_quote(&#39;md5sum&#39;, &#39;--&#39;, @files)</code> instead of <code>&quot;md5sum @files&quot;</code>"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1577997773, "last_edit_date": 1577997773, "creation_date": 1525121580, "answer_id": 50108068, "question_id": 50107745, "link": "https://stackoverflow.com/questions/50107745/correct-way-to-have-perl-arguments-interpreted-by-current-shell/50108068#50108068", "title": "&#39;Correct&#39; way to have perl arguments interpreted by current shell", "body": "<p>The <a href=\"http://search.cpan.org/~rjbs/IPC-Run3-0.048/lib/IPC/Run3.pm\" rel=\"nofollow noreferrer\">IPC::Run3</a> docs say that one can pass a string instead of an arrayref for the command</p>\n\n<blockquote>\n<pre><code>run3($cmd, $stdin, $stdout, $stderr, \\%options)\n</code></pre>\n  \n  <p>...  </p>\n  \n  <p><strong>$cmd</strong></p>\n  \n  <p>Usually $cmd will be an ARRAY reference and the child is invoked via</p>\n\n<pre><code>system @$cmd;\n</code></pre>\n  \n  <p>But $cmd may also be a string in which case the child is invoked via  </p>\n\n<pre><code>system $cmd;\n</code></pre>\n</blockquote>\n\n<p>In this case the string <code>$cmd</code> is passed to the shell if it contains shell metacharacters. So take input without splitting it, <code>$cmd = $ARGV[0]</code>, or join it after validation, <code>$cmd = join ' ', @cmd;</code>  </p>\n\n<p>Even in general this is <em>not</em> the preferred way, and the docs warn to see <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">system</a> for \"<em>pitfalls</em>\" of it.</p>\n\n<p>Things are yet much worse here since you'd be passing user input directly for execution!  Never mind possible nefarious intents, just think of what a good typo can do. Even without that, there is simply a difference between typing a command at the terminal and passing it to a script, which may edit it, may get modified, pick up bugs, etc. </p>\n\n<p>If nothing else, I'd urge to add code for substantial checks of submitted input.   An analysis may involve identifying the known and accepted metacharacters while suitably quoting parts of input that <em>shouldn't</em> be interpreted, for example using <a href=\"http://search.cpan.org/~rosch/String-ShellQuote-1.03/ShellQuote.pm\" rel=\"nofollow noreferrer\">String::ShellQuote</a>.</p>\n\n<p>But I'd really suggest to reconsider the design, so to not submit complete commands to the script. Rather, specify with keywords what should happen. Things like globbing (assembling a file list) are done from Perl really nicely and with a lot of control. Do outside only what is necessary; generally there'll be no need for the shell then.</p>\n"}], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 50108068, "answer_count": 1, "score": 1, "last_activity_date": 1577997773, "creation_date": 1525120127, "last_edit_date": 1525125045, "question_id": 50107745, "link": "https://stackoverflow.com/questions/50107745/correct-way-to-have-perl-arguments-interpreted-by-current-shell", "title": "&#39;Correct&#39; way to have perl arguments interpreted by current shell", "body": "<p>Sorry, this is pretty basic, and I suspect a duplicate, but after some searching I'm coming up empty:</p>\n\n<p>Given the following script:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse IPC::Run3;\nmy $stdout2;\nprint $ARGV[0];\nprint \"\\n\";\nmy @cmd1 = split /\\s+/,  $ARGV[0] ;\nrun3 (\\@cmd1, \\undef, \\$stdout2, \\$stdout2);\nprint $stdout2\n</code></pre>\n\n<p>And running it like so:</p>\n\n<pre><code>\u00a3 perl comp.pl \"md5sum *(.)\"\nmd5sum *(.)\nmd5sum: '*(.)': No such file or directory\n</code></pre>\n\n<p>Fair enough.  The <code>*(.)</code> isn't being intrepreted by the shell and probably most would consider this a feature.  But I would like it to be intepreted by the current shell (or <code>zsh</code> specifically would be fine).  </p>\n\n<p>The question is how I can do this <em>without</em> complicating the shell command to run the perl script.</p>\n\n<p>Prepending <code>\"zsh\"</code> and <code>\"-c\"</code> to <code>cmd1</code> is ok if that's a reasonable way to do it.  It just seems like...it isn't.</p>\n\n<p>My intention is also to pass slightly more complex commands to this script eventually, like so:</p>\n\n<pre><code>perl comp.pl 'md5sum *(.)' 'ssh remoteHost \"md5sum *(.)\"'\n</code></pre>\n\n<p>I have no objection to non-perl answers to the problem you can probably infer I'm trying to solve (I suspect <code>rsync</code> could do this) but I'm primarily interested in solving this through Perl as there'll eventually be business-specific logic in this comparison.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I tried various forms of:</p>\n\n<pre><code>my $cmd = $ARGV[0];\nrun3 (\\$cmd, \\undef, \\$stdout2, \\$stdout2);\n</code></pre>\n\n<p>the documentation seems to think this would be ok, but I get:</p>\n\n<pre><code>Not an ARRAY reference at /usr/local/share/perl/5.22.1/IPC/Run3.pm line 320.\n</code></pre>\n"}, {"tags": ["perl", "run-length-encoding"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1525118687, "post_id": 50107417, "comment_id": 87232167, "body": "<code>1&quot;</code> is a syntax error."}, {"owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 3, "creation_date": 1525118704, "post_id": 50107417, "comment_id": 87232174, "body": "Sounds like you&#39;re looking for <a href=\"https://en.wikipedia.org/wiki/Run-length_encoding\" rel=\"nofollow noreferrer\">run-length encoding</a>.  Also, StackOverflow questions should only contain one question, not multiple.  You might consider moving your second question to a separate post."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525119288, "post_id": 50107417, "comment_id": 87232429, "body": "You might find certain posts on <a href=\"https://codegolf.stackexchange.com\">Code Golf</a> very helpful."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1525121389, "post_id": 50107417, "comment_id": 87233295, "body": "Essentially you want to analyse the string, count how often each character is there, and then repeat it <code>n</code> times. That&#39;s on the level of an exercise from the <i>Learning Perl</i> book I would say."}, {"owner": {"reputation": 1029, "user_id": 8729103, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fbd4857a5525dc8930a313b7035a639b?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/8729103/harry"}, "edited": false, "score": 0, "creation_date": 1525165654, "post_id": 50107417, "comment_id": 87244753, "body": "I&#39;d go with an existing zip library instead of implementing my own compressor/encoder..."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1525165493, "last_edit_date": 1525165493, "creation_date": 1525134950, "answer_id": 50109974, "question_id": 50107417, "link": "https://stackoverflow.com/questions/50107417/perl-convert-ascii-art-to-use-x-operator/50109974#50109974", "title": "Perl - convert ASCII art to use x operator", "body": "<pre><code>print '                \u2588\u2588   \u2588\u2588\u2588\u2588   \u2588' x 1;\n</code></pre>\n\n<p>Personally, I'd only meet one of your requirements.</p>\n\n<p>Single-line:</p>\n\n<pre><code>print '                \u2588\u2588   \u2588\u2588\u2588\u2588   \u2588';\n</code></pre>\n\n<p>Using <code>x</code>:</p>\n\n<pre><code>print(\n   ' ' x 16, '\u2588' x  2,\n   ' ' x  3, '\u2588' x  4,\n   ' ' x  3, '\u2588' x  1,\n);\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1525165493, "creation_date": 1525118468, "last_edit_date": 1525119730, "question_id": 50107417, "link": "https://stackoverflow.com/questions/50107417/perl-convert-ascii-art-to-use-x-operator", "title": "Perl - convert ASCII art to use x operator", "body": "<p>I would like to convert ASCII art to something that takes less bytes. I have string like this:</p>\n\n<pre><code>my $string = '                \u2588\u2588   \u2588\u2588\u2588\u2588   \u2588';\n</code></pre>\n\n<p>And I would convert this to something like this:</p>\n\n<pre><code>print \"\u2588\" x 1.\"\u2588\" x 1.\"\u2588\" x 1\"\u2588\" x 1\"\u2588\" x 1;\n</code></pre>\n\n<p>So I would write this in one line and convert to using <code>x</code> operator. How can achieve this?</p>\n"}, {"tags": ["r", "perl", "ubuntu", "perl-module", "rstudio-server"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525114371, "post_id": 50106342, "comment_id": 87230246, "body": "It sounds like the perl that you used to install the modules is different from the one that RStudio uses to run the command. Is there anything in <code>.bashrc</code> that changes the contents of <code>PATH</code>?"}, {"owner": {"reputation": 75, "user_id": 7211667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e43a1ef3c7431288a3656fd06f9d1dc?s=128&d=identicon&r=PG&f=1", "display_name": "anajacintafernandes", "link": "https://stackoverflow.com/users/7211667/anajacintafernandes"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525114541, "post_id": 50106342, "comment_id": 87230322, "body": "yes! .bashrc contains      `PATH=&quot;/home/acjfernandes/perl5/bin${PATH:+:${PATH}}&quot;; export PATH; PERL5LIB=&quot;/home/acjfernandes/perl5/lib/perl5${PERL5LIB:+:${P&zwnj;&#8203;ERL5LIB}}&quot;; export PERL5LIB; PERL_LOCAL_LIB_ROOT=&quot;/home/acjfernandes/perl5${PERL_LOCAL_LI&zwnj;&#8203;B_ROOT:+:${PERL_LOCA&zwnj;&#8203;L_LIB_ROOT}}&quot;; export PERL_LOCAL_LIB_ROOT; PERL_MB_OPT=&quot;--install_base \\&quot;/home/acjfernandes/perl5\\&quot;&quot;; export PERL_MB_OPT;  PERL_MM_OPT=&quot;INSTALL_BASE=/home/acjfernandes/perl5&quot;; export PERL_MM_OPT;"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525114708, "post_id": 50106342, "comment_id": 87230395, "body": "Okay, then you need to persuade RStudio to use the same perl, or you need to install the modules you need in the one RStudio uses."}, {"owner": {"reputation": 75, "user_id": 7211667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e43a1ef3c7431288a3656fd06f9d1dc?s=128&d=identicon&r=PG&f=1", "display_name": "anajacintafernandes", "link": "https://stackoverflow.com/users/7211667/anajacintafernandes"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525115082, "post_id": 50106342, "comment_id": 87230566, "body": "How so? by installing it system-wide instead of locally?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1525115366, "post_id": 50106342, "comment_id": 87230690, "body": "I don&#39;t know anything about R or how your system is set up. If you install the modules you need <i>without</i> first running <code>.bashrc</code> then you should be using the same perl as RStudio. That will be a good start."}, {"owner": {"reputation": 3424, "user_id": 2355634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fa032e3da89338b3bc5bd63b9ce9c6?s=128&d=identicon&r=PG", "display_name": "Katia", "link": "https://stackoverflow.com/users/2355634/katia"}, "edited": false, "score": 0, "creation_date": 1525123638, "post_id": 50106342, "comment_id": 87234226, "body": "Try to specify the path to where you install perl: system(&quot;/your/path/to/perl -MBio::TreeIO -e 1&quot;)"}], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 3, "last_activity_date": 1525145660, "creation_date": 1525145660, "answer_id": 50111024, "question_id": 50106342, "link": "https://stackoverflow.com/questions/50106342/source-bashrc-in-rstudio/50111024#50111024", "title": "Source .bashrc in Rstudio", "body": "<p>According to the documentation, accessed by running <code>help(Startup)</code> in the R shell, you should create a file <code>.Renviron</code> in your home directory which will be read when starting up a new R session.  For example:</p>\n\n<p><strong>.Renviron</strong></p>\n\n<pre><code>FOOBAR=/foo/bar/foo/bar\n</code></pre>\n\n<p><strong>R shell</strong></p>\n\n<pre><code>R\nR version 3.2.3 (2015-12-10) -- \"Wooden Christmas-Tree\"\nCopyright (C) 2015 The R Foundation for Statistical Computing\nPlatform: x86_64-pc-linux-gnu (64-bit)\n...\n\n&gt; cat(Sys.getenv(\"FOOBAR\"), \"\\n\")\n/foo/bar/foo/bar \n</code></pre>\n\n<p>So just create your <code>.Renviron</code> file with the <code>PERL5LIB</code> variable set to your local perl package installation directory.</p>\n"}], "owner": {"reputation": 75, "user_id": 7211667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e43a1ef3c7431288a3656fd06f9d1dc?s=128&d=identicon&r=PG&f=1", "display_name": "anajacintafernandes", "link": "https://stackoverflow.com/users/7211667/anajacintafernandes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1108, "favorite_count": 1, "accepted_answer_id": 50111024, "answer_count": 1, "score": 2, "last_activity_date": 1525207105, "creation_date": 1525113557, "last_edit_date": 1525207105, "question_id": 50106342, "link": "https://stackoverflow.com/questions/50106342/source-bashrc-in-rstudio", "title": "Source .bashrc in Rstudio", "body": "<p>I have just installed some Perl modules locally in Ubuntu 18.04 LTS.</p>\n\n<p>When calling them using the RStudio Server like this</p>\n\n<pre><code>system(\"perl -MBio::TreeIO -e 1\")\n</code></pre>\n\n<p>I get the following error</p>\n\n<blockquote>\n  <p>Can't locate Bio/TreeIO.pm in @INC (you may need to install the Bio::TreeIO module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.26.1 /usr/local/share/perl/5.26.1 /usr/lib/x86_64-linux-gnu/perl5/5.26 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.26 /usr/share/perl/5.26 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base)</p>\n</blockquote>\n\n<p>When I <code>source ~/.bashrc</code> in the terminal everything's ok.</p>\n\n<p>I tried creating a <code>~/.Rprofile</code> containing:</p>\n\n<pre><code>system(\". ~/.bashrc\")\n</code></pre>\n\n<p>but no good.    </p>\n"}, {"tags": ["perl", "csv", "parsing"], "comments": [{"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 1, "creation_date": 1525109890, "post_id": 50104588, "comment_id": 87228213, "body": "Do you have the file anywhere we can look at?"}, {"owner": {"reputation": 584, "user_id": 7903952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/126870117857799/picture?type=large", "display_name": "Daniel Foust", "link": "https://stackoverflow.com/users/7903952/daniel-foust"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1525110444, "post_id": 50104588, "comment_id": 87228469, "body": "@Andrey I cannot share the data im using, but to reproduce just create  a CSV with 2 columns, the first being serial numbers and the second being a short description (I used lorem ipsum).  I created a short 7 row csv file with random 10 digit numbers and lorem ipsum and it is still getting me the same result."}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1525110748, "post_id": 50104588, "comment_id": 87228604, "body": "do you have issues with files missing header or with all the files?"}, {"owner": {"reputation": 584, "user_id": 7903952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/126870117857799/picture?type=large", "display_name": "Daniel Foust", "link": "https://stackoverflow.com/users/7903952/daniel-foust"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1525110815, "post_id": 50104588, "comment_id": 87228635, "body": "@Andrey it is just with the files missing headers.  I created a temporary download link for the test csv file I made.   <a href=\"https://expirebox.com/download/eb9bf54d625a5ac6c2832972359b107a.html\" rel=\"nofollow noreferrer\">expirebox.com/download/eb9bf54d625a5ac6c2832972359b107a.html</a>"}, {"owner": {"reputation": 584, "user_id": 7903952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/126870117857799/picture?type=large", "display_name": "Daniel Foust", "link": "https://stackoverflow.com/users/7903952/daniel-foust"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1525111282, "post_id": 50104588, "comment_id": 87228835, "body": "@Andrey I copied that test file and added headers and it still returned undefined.  I also copied the headers and first 7 rows out of a working file and pasted them in and it also didn&#39;t work."}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1525112254, "post_id": 50104588, "comment_id": 87229298, "body": "what is the end goal? You just need to parse all rows from CSV files and ...?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525112907, "post_id": 50104588, "comment_id": 87229593, "body": "So you have some CSV files that work and some that don&#39;t, and now you think it&#39;s unrelated to the headers?"}], "answers": [{"tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": -1, "last_activity_date": 1525112836, "creation_date": 1525112836, "answer_id": 50106166, "question_id": 50104588, "link": "https://stackoverflow.com/questions/50104588/parsecsv-parsing-file-without-headers/50106166#50106166", "title": "Parse::CSV, parsing file without headers", "body": "<p>The code below parses the test.csv file you poste:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Text::CSV_XS;\nmy $csv = Text::CSV_XS-&gt;new ({ binary =&gt; 1, auto_diag =&gt; 1, sep_char =&gt; ',', allow_whitespace =&gt; 1, allow_loose_quotes =&gt; 1});\nopen my $fh, \"&lt;\", 'test.csv' or die \"Unable to open test.csv: $!\";\nwhile (my $row = $csv-&gt;getline ($fh)) {\n    foreach my $filed (@$row) {\n        print \"[$filed]\";\n    }\n    print \"\\n\";\n}\nclose $fh;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 584, "user_id": 7903952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/126870117857799/picture?type=large", "display_name": "Daniel Foust", "link": "https://stackoverflow.com/users/7903952/daniel-foust"}, "edited": false, "score": 0, "creation_date": 1525114225, "post_id": 50106313, "comment_id": 87230174, "body": "The Dumper line inside the error else block now outputs the first row, but it&#39;s still not making it into the while loop."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1525113767, "last_edit_date": 1525113767, "creation_date": 1525113445, "answer_id": 50106313, "question_id": 50104588, "link": "https://stackoverflow.com/questions/50104588/parsecsv-parsing-file-without-headers/50106313#50106313", "title": "Parse::CSV, parsing file without headers", "body": "<p>Your constructor specifies <code>quote_char =&gt; \"'\"</code> whereas your sample data file uses double quotes <code>\"</code></p>\n\n<p>If you have no headers in the CSV data then you should use <code>names =&gt; 0</code> to get the module to return arrays of data instead hashes keyed by column name</p>\n\n<p>I also suggest that you <code>open</code> the file explicitly and check that it succeeded. Then you can pass what you know is a valid file handle in the <code>file</code> parameter instead of a path string</p>\n"}], "owner": {"reputation": 584, "user_id": 7903952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/126870117857799/picture?type=large", "display_name": "Daniel Foust", "link": "https://stackoverflow.com/users/7903952/daniel-foust"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 50106313, "answer_count": 2, "score": -1, "last_activity_date": 1525113767, "creation_date": 1525105774, "last_edit_date": 1525113611, "question_id": 50104588, "link": "https://stackoverflow.com/questions/50104588/parsecsv-parsing-file-without-headers", "title": "Parse::CSV, parsing file without headers", "body": "<p>The data I've been given is a dump from a mysql database and some of the files are missing column headers.  </p>\n\n<p>When I try to fetch a row, <strong><em>say Dumper $parser->fetch;</em></strong> returns undefined on the files without column headers.  I've done an if (-e $file) and it sees the file.  I've also tried </p>\n\n<p><strong>names => 1</strong> </p>\n\n<p>and </p>\n\n<p><strong>names => ['id', 'description']</strong> </p>\n\n<p>and both times the output was undef, though for the latter $parser->names did output <em>id</em> and <em>description</em> (the names, not the column values).</p>\n\n<p>Am I assigning the column names correctly?  If so, why is it returning undefined?</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse v5.24.3;\nuse strict;\nuse warnings;\n\n# Modules\nuse Data::Dump;                                     # dd \\%hash\nuse Data::Dumper;                                   # say Dumper(\\%hash)                        \nuse Spreadsheet::ParseXLSX;\nuse Text::CSV_XS;\nuse Parse::CSV;\n\nmy $path    = './path/to/data/';\nmy $vendor  = 'fwd';\nmy $ext     = '.csv';\nmy @f       = (\n    'spring_categories',\n    'prod_descriptions',\n    'feature_bullets',\n    'category_mapping'\n);\nmy $file = $path . $vendor . '/' . $f[1] . $ext;\n\nmy $parser = Parse::CSV-&gt;new(\n    \"file\"        =&gt; $file,                                       \n    \"names\"       =&gt; ['id', 'description'],\n    \"csv_attr\"    =&gt; {\n        \"sep_char\" =&gt; ',',\n        \"quote_char\" =&gt; \"'\"\n    }\n);\n\n# Not triggering error\nif ( $parser-&gt;errstr )\n{\n    say \"There was an error\";\n}\nelse\n{\n    say $parser-&gt;names;             # outputs | iddescription\n    say Dumper $parser-&gt;fetch;      # outputs | $VAR1 = undef\n\n    # Doesn't reach while\n    while ( my $value = $parser-&gt;fetch )\n    {\n        say Dumper $value;\n        say $parser-&gt;row;\n\n        # my @names = $parser-&gt;names;\n        # dd \\@names;\n        # say $names[0];\n\n        die;\n    }\n</code></pre>\n\n<p>Here is a temporary test file I made to share without confidential data that has the same issue for me.</p>\n\n<pre><code>4732947234,\"Lorem ipsum dolor sit amet, consectetur adipiscing elit\"\n6732947274,\"Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo\"\n7657657274,Nemo enim ipsam voluptatem quia voluptas\u00a0\n3993007274,magnam aliquam quaerat voluptatem\n2449049474,\"laboriosam, nisi ut aliquid ex ea commodi consequatur\"\n4732947273,\"laboriosam, nisi ut aliquid ex ea commodi consequatur\"\n8732947270,\"ntium doloremque laudantium, totam rem aperiam, eaque ipsa\u00a0\"\n</code></pre>\n"}, {"tags": ["perl", "stdout"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525103957, "post_id": 50103707, "comment_id": 87225414, "body": "How do you call <code>script2.pl</code> from within <code>script.pl</code>?"}, {"owner": {"reputation": 916, "user_id": 1825704, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ceb3733f78aae17d1f95940aa1412208?s=128&d=identicon&r=PG", "display_name": "KT_", "link": "https://stackoverflow.com/users/1825704/kt"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525105047, "post_id": 50103707, "comment_id": 87225980, "body": "Currently I&#39;m just using <code>`script2.pl`</code> in backticks."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525105779, "post_id": 50104539, "comment_id": 87226331, "body": "It might be that I misunderstood your question. In that case, please clarify."}, {"owner": {"reputation": 916, "user_id": 1825704, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ceb3733f78aae17d1f95940aa1412208?s=128&d=identicon&r=PG", "display_name": "KT_", "link": "https://stackoverflow.com/users/1825704/kt"}, "edited": false, "score": 0, "creation_date": 1525105941, "post_id": 50104539, "comment_id": 87226400, "body": "No, I think you got me. I appreciate the clarification. I thought since I&#39;d turned off buffering in both with <code>$|++</code> and since they were being executed in the same console, I&#39;d see it \u2014 but I guess it makes sense that they&#39;re not technically the same stdout. Thanks for this answer."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 916, "user_id": 1825704, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ceb3733f78aae17d1f95940aa1412208?s=128&d=identicon&r=PG", "display_name": "KT_", "link": "https://stackoverflow.com/users/1825704/kt"}, "edited": false, "score": 0, "creation_date": 1525106022, "post_id": 50104539, "comment_id": 87226430, "body": "@KT_ if you&#39;ve got it turned on in both scripts it should be working. However if you shell out from <code>script.pl</code> to <code>script2.pl</code> it really doesn&#39;t matter whether <code>script2.pl</code> has <code>$|++</code> or not."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 916, "user_id": 1825704, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ceb3733f78aae17d1f95940aa1412208?s=128&d=identicon&r=PG", "display_name": "KT_", "link": "https://stackoverflow.com/users/1825704/kt"}, "edited": false, "score": 0, "creation_date": 1525115146, "post_id": 50104539, "comment_id": 87230595, "body": "@KT_: Running a program using backticks stores the output <b><i>instead</i></b> of printing it to the screen. You can print the result after the run finishes, but you will get the whole thing at once."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1525105542, "creation_date": 1525105542, "answer_id": 50104539, "question_id": 50103707, "link": "https://stackoverflow.com/questions/50103707/perl-script-called-from-perl-doesnt-seem-to-flush-stdout/50104539#50104539", "title": "Perl script called from Perl doesn&#39;t seem to flush stdout", "body": "<p>Calling with backticks will spawn a new <code>perl</code> process, and for that process, the auto-flushing will be set. That means that whatever output comes out of <code>script2.pl</code> will come out as soon as it gets printed. Of course doing</p>\n\n<pre><code>my $output = `perl script2.pl`;\n</code></pre>\n\n<p>will mean you are not actually reading it while it's being output, but rather you're asking for all the output to end up in <code>$output</code> when it's done.</p>\n\n<p>The <code>$|</code> in the <code>perl</code> process that runs <code>script2.pl</code> has <strong>no influence</strong> on <code>script.pl</code>. If you want your <code>script.pl</code> process to have unbuffered output, turn off buffering there.</p>\n\n<hr>\n\n<p>An alternative might be to not run <code>script2.pl</code> as a separate process, but rather to refactor it to be a module and call it properly, or use <code>do</code> or <code>require</code> to call it once. In either case the change to <code>$|</code> would then happen within the same Perl interpreter, and thus would have an effect. </p>\n\n<p>Of course it's not a good idea if an internal part of your application messes with your application's output buffering. The best way would be to refactor this to be a module without changing the buffering in that module, and in your program where you use it, set the buffering to what you need it to be <em>for that specific program</em>. Always let the consumer decide what they want, even if that's only yourself.</p>\n"}], "owner": {"reputation": 916, "user_id": 1825704, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ceb3733f78aae17d1f95940aa1412208?s=128&d=identicon&r=PG", "display_name": "KT_", "link": "https://stackoverflow.com/users/1825704/kt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 50104539, "answer_count": 1, "score": 3, "last_activity_date": 1525105542, "creation_date": 1525102355, "question_id": 50103707, "link": "https://stackoverflow.com/questions/50103707/perl-script-called-from-perl-doesnt-seem-to-flush-stdout", "title": "Perl script called from Perl doesn&#39;t seem to flush stdout", "body": "<p>I have two Perl scripts \u2014\u00a0let's call them <code>script.pl</code> and <code>script2.pl</code>.</p>\n\n<p><code>script2.pl</code> updates to the command line, as in:</p>\n\n<pre><code>print \"Progress $progress percent...\\r\";\n</code></pre>\n\n<p>In order to get this to work I had to turn on autoflush at the start of <code>script2.pl</code>:</p>\n\n<pre><code>$|++;\n</code></pre>\n\n<p>Now, the problem arises because I have to have <code>script2.pl</code> called from <code>script.pl</code>, and this \u2014 the updating/flushing \u2014\u00a0only seems to work when <code>script2.pl</code> is run directly, not when it's called from <code>script.pl</code>.</p>\n\n<p>I've tried various ways of calling <code>script2.pl</code>, from <code>system()</code> to backticks and in no case does the updating happen.</p>\n\n<p>Am I missing something about handling stdout output when one Perl script is called from another?</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1525103364, "post_id": 50103690, "comment_id": 87225070, "body": "Refresh my memory; what&#39;s the <code>perl</code> command supposed to do? There&#39;s almost certainly a simpler way to do this in <code>bash</code> alone."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1525168506, "post_id": 50103690, "comment_id": 87245957, "body": "Or <code>perl</code> alone :). But that perl matches the RE. If it matches, it prints &quot;The string matched by the last successful pattern match&quot;. (Which is what <code>$&amp;</code> means)"}], "answers": [{"tags": [], "owner": {"reputation": 95060, "user_id": 89817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df253c3b6533949ea94f31f328f3e769?s=128&d=identicon&r=PG", "display_name": "Gordon Davisson", "link": "https://stackoverflow.com/users/89817/gordon-davisson"}, "is_accepted": false, "score": 1, "last_activity_date": 1525103553, "last_edit_date": 1525103553, "creation_date": 1525103342, "answer_id": 50103973, "question_id": 50103690, "link": "https://stackoverflow.com/questions/50103690/trying-to-use-regex-result-in-variable-in-bash/50103973#50103973", "title": "Trying to use regex result in variable in bash", "body": "<p>Three things: you still need the <code>echo</code> in the pipeline, you need <code>$( )</code> to capture the output from the pipeline so you can assign it to a variable, and you should use double-quotes around variable references (to prevent possible parsing oddities):</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>for filename in ./unsent_xmls/*.xml; do\n    package=$(echo \"$filename\" |  perl -lne 'print $&amp; if /(\\d{4})(?=-)/')\n    echo \"$package\"\ndone\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 3, "last_activity_date": 1525104264, "last_edit_date": 1525104264, "creation_date": 1525103553, "answer_id": 50104036, "question_id": 50103690, "link": "https://stackoverflow.com/questions/50103690/trying-to-use-regex-result-in-variable-in-bash/50104036#50104036", "title": "Trying to use regex result in variable in bash", "body": "<p>There are two problems.</p>\n\n<ol>\n<li><code>package=$filename</code> produces no output to be piped to <code>perl</code></li>\n<li><code>package</code> is only set in the subshell that runs the left-hand side of the pipeline; it's not set after the pipeline completes.</li>\n</ol>\n\n<p>If all you want are the 4 digits preceding the first <code>-</code> in the file name, use</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>for filename in ./unset_xmls/*.xml; do\n    [[ $filename =~ ([[:digit:]]{4})- ]] &amp;&amp; package=${BASH_REMATCH[1]}\n    echo \"$package\"\ndone\n</code></pre>\n"}], "owner": {"reputation": 950, "user_id": 3052403, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/63wC8.jpg?s=128&g=1", "display_name": "GeneralBear", "link": "https://stackoverflow.com/users/3052403/generalbear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 50104036, "answer_count": 2, "score": 0, "last_activity_date": 1525104264, "creation_date": 1525102310, "last_edit_date": 1525103608, "question_id": 50103690, "link": "https://stackoverflow.com/questions/50103690/trying-to-use-regex-result-in-variable-in-bash", "title": "Trying to use regex result in variable in bash", "body": "<p>I've been following the guidance here:\n<a href=\"https://stackoverflow.com/questions/13373249/extract-substring-using-regexp-in-plain-bash\">Extract Substring Using RegExp in Plain Bash</a></p>\n\n<p>I can't seem to get my code to work properly:</p>\n\n<p>This echoes correctly:</p>\n\n\n\n<pre class=\"lang-sh prettyprint-override\"><code>for filename in ./unsent_xmls/*.xml; do\n    echo $filename |  perl -lne 'print $&amp; if /(\\d{4})(?=-)/'\ndone\n</code></pre>\n\n<p>but when I try this it prints an empty result:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>for filename in ./unsent_xmls/*.xml; do\n    package=$filename |  perl -lne 'print $&amp; if /(\\d{4})(?=-)/'\n    echo $package\ndone\n</code></pre>\n\n<p>I've tried a number of different iterations.</p>\n"}, {"tags": ["perl", "module", "sftp", "message"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 5, "creation_date": 1525094680, "post_id": 50101490, "comment_id": 87219649, "body": "Have you tried the <code>stderr_fh</code> option?"}, {"owner": {"reputation": 63, "user_id": 2028672, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMssM.jpg?s=128&g=1", "display_name": "Till1234", "link": "https://stackoverflow.com/users/2028672/till1234"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1525094967, "post_id": 50101490, "comment_id": 87219812, "body": "Thank you! This did the trick!"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1525095042, "creation_date": 1525095042, "answer_id": 50101612, "question_id": 50101490, "link": "https://stackoverflow.com/questions/50101490/perl-using-netsftpforeign-get-rid-of-server-welcome-message/50101612#50101612", "title": "Perl using Net::SFTP::Foreign get rid of server welcome message", "body": "<p>Use the <code>stderr_fh</code> option as documented:</p>\n\n<blockquote>\n  <p><strong>stderr_fh => $fh</strong></p>\n  \n  <p>redirects the output sent to stderr by the SSH subprocess to the given file handle.</p>\n  \n  <p>It can be used to suppress banners:</p>\n\n<pre><code>open my $ssherr, '&gt;', '/dev/null' or die \"unable to open /dev/null\";\nmy $sftp = Net::SFTP::Foreign-&gt;new($host,\n                               stderr_fh =&gt; $ssherr);\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 63, "user_id": 2028672, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMssM.jpg?s=128&g=1", "display_name": "Till1234", "link": "https://stackoverflow.com/users/2028672/till1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 50101612, "answer_count": 1, "score": 2, "last_activity_date": 1525095042, "creation_date": 1525094574, "question_id": 50101490, "link": "https://stackoverflow.com/questions/50101490/perl-using-netsftpforeign-get-rid-of-server-welcome-message", "title": "Perl using Net::SFTP::Foreign get rid of server welcome message", "body": "<p>when I connect to a proFTP Server I get the welcome message printed to stdout.</p>\n\n<pre><code>my $sftp = Net::SFTP::Foreign-&gt;new($sftserver);\n</code></pre>\n\n<p>Everything works fine, but how can I get rid of this message?</p>\n\n<p>I don't want to pipe the whole script output to /dev/null  and I don't have access to the server's config.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "edited": false, "score": 1, "creation_date": 1525075878, "post_id": 50096306, "comment_id": 87208990, "body": "By the wise words of Homer Simpson. <b>DOH!</b> I actually had the <code>%unique</code> declaration before the loop at one stage, but funny enough I never checked the results when I ran it to see if it will fix the issue. The second option however is better for me as I can then eliminate the <code>0</code>. Thanks very much."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "edited": false, "score": 0, "creation_date": 1525076302, "post_id": 50096306, "comment_id": 87209184, "body": "oh wait, I see you added <code>+1</code> at <code>my $number</code> which also eliminates the <code>0</code> :). Thanks again."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 2, "creation_date": 1525088857, "post_id": 50096306, "comment_id": 87216226, "body": "It&#39;s not very important, but you might want to add parenthesis (around <code>join</code>&#39;s arguments) to remove the <code>\\t</code> before each <code>\\n</code>."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 6, "last_activity_date": 1525086539, "last_edit_date": 1525086539, "creation_date": 1525075276, "answer_id": 50096306, "question_id": 50096223, "link": "https://stackoverflow.com/questions/50096223/how-to-create-a-completely-unique-number-set-in-perl/50096306#50096306", "title": "How to create a completely unique number set in Perl", "body": "<p>Move the declaration of <code>%unique</code> outside the first loop, and it'll work. </p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nmy %unique;\nfor ( 1 .. 5 ) {\n   my @numbers;\n\n   for ( 1 .. 5 ) {\n      my $number = int rand(49) + 1;\n      redo if $unique{$number}++;\n      push @numbers, $number;\n   }\n   print join( \"\\t\", @numbers ), \"\\n\";\n}\n</code></pre>\n\n<p>By declaring it inside the loop, you create a new one each time, so numbers will only be unique per line. </p>\n\n<p>Your other problem is - you seem not to want <code>0</code> in the mix - so you actually just need to add 1 to everything. </p>\n\n<p>You could also use <code>List::Util</code>s <code>shuffle</code> function:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse List::Util qw ( shuffle );\n\nmy @pick_list = shuffle( 1 .. 50 );\n\nfor ( 1 .. 5 ) {\n   print join \"\\t\", splice( @pick_list, 0, 5 ), \"\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1525087125, "creation_date": 1525087125, "answer_id": 50099435, "question_id": 50096223, "link": "https://stackoverflow.com/questions/50096223/how-to-create-a-completely-unique-number-set-in-perl/50099435#50099435", "title": "How to create a completely unique number set in Perl", "body": "<p>There is no need to keep testing for uniqueness: the usual way to select multiple random non-repeating subsets from a list of values is to <code>shuffle</code> that list first. Then the subsets can be taken from the list without replacement to achieve the desired result</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse List::Util 'shuffle';\n\nmy @list = shuffle 1 .. 50;\n\nprint join(\"\\t\", splice @list, 0, 5), \"\\n\" for 1 .. 5;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>36  18  14  32  22\n6   38  1   19  33\n27  9   45  34  12\n26  49  10  43  37\n28  8   21  39  11\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 50096306, "answer_count": 2, "score": 2, "last_activity_date": 1525087125, "creation_date": 1525074945, "question_id": 50096223, "link": "https://stackoverflow.com/questions/50096223/how-to-create-a-completely-unique-number-set-in-perl", "title": "How to create a completely unique number set in Perl", "body": "<p>I am trying to write a <code>perl</code> script that creates a complete set of unique, random numbers.</p>\n\n<p>let's say I have numbers <code>1</code> to <code>50</code> I want to create <code>5</code> sets with <code>5</code> unique numbers per set, but not repeating a number in any set. The below script does generate the numbers randomly and unique per line, but numbers are repeated in the other lines. So the <strong>current result</strong> will be something like:</p>\n\n<pre><code>20  11  28   5  10\n 5  23  20  42  14\n 1  38   6   7   9\n25   0  16  35  17\n23   0  42   5   8\n</code></pre>\n\n<p>As the above result demonstrates, numbers <code>5</code>, <code>0</code> and <code>23</code> etc. were repeated. I actually want to completely exclude <code>0</code>s and not repeat a single number. The below <strong>expected</strong> result demonstrates the desired output.</p>\n\n<pre><code> 2  20  12  15  9\n19  10  42  13  3\n 7  38  50   1 33\n 6  22  49   4 21\n48   8  25  11  3\n</code></pre>\n\n<p>The above does not have <code>0</code> and no numbers are repeated.</p>\n\n<p>Here is my current script.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nfor (1..5) {\nmy @numbers;\nmy %unique;\n\nfor (1..5) {\n    my $number = int rand(50);\n    redo if $unique{$number}++;\n    push @numbers, $number;\n }\n print join('  ', @numbers), \"\\n\";\n}\n</code></pre>\n\n<p>I would greatly appreciate any possible assistance and sincerely hope that my question is understandable.</p>\n"}, {"tags": ["perl", "crc32"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525079585, "post_id": 50096186, "comment_id": 87211005, "body": "Seems to be a different representation."}, {"owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "edited": false, "score": 0, "creation_date": 1525125359, "post_id": 50096186, "comment_id": 87234795, "body": "There are many 32-bit CRC definitions. You need to determine which one you need based on what protocol or format you are dealing with."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 9582481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ERv3a.jpg?s=128&g=1", "display_name": "nawanTSL", "link": "https://stackoverflow.com/users/9582481/nawantsl"}, "edited": false, "score": 0, "creation_date": 1525079906, "post_id": 50097402, "comment_id": 87211203, "body": "Yeah, just found out that the result from String::CRC32 is crc32b. Do you know how to make result in crc32 with String::CRC32 ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 85, "user_id": 9582481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ERv3a.jpg?s=128&g=1", "display_name": "nawanTSL", "link": "https://stackoverflow.com/users/9582481/nawantsl"}, "edited": false, "score": 0, "creation_date": 1525136240, "post_id": 50097402, "comment_id": 87237483, "body": "@nawanTSL That would involve replacing String/CRC32.pm with something that does something completely different."}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 4, "last_activity_date": 1525079669, "creation_date": 1525079669, "answer_id": 50097402, "question_id": 50096186, "link": "https://stackoverflow.com/questions/50096186/different-result-when-converting-string-to-crc-32/50097402#50097402", "title": "Different result when converting string to CRC-32", "body": "<p>The result from <code>String::CRC32</code> corresponds to the decimal value of the output from the <a href=\"http://www.timestampgenerator.com/tools/crc32b-generator/\" rel=\"nofollow noreferrer\">crc32b</a> version of that website.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse String::CRC32;\n\nmy $resi = \"nawan\";\nprint sprintf(\"Decimal: %d, Hex: %x\\n\",crc32($resi), crc32($resi));\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>Decimal: 3840460347, Hex: e4e8c63b\n</code></pre>\n\n<p><strong>e4e8c63b</strong> corresponds to the crc32b hash of 'nawan' obtained on that website.</p>\n"}], "owner": {"reputation": 85, "user_id": 9582481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ERv3a.jpg?s=128&g=1", "display_name": "nawanTSL", "link": "https://stackoverflow.com/users/9582481/nawantsl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 50097402, "answer_count": 1, "score": 2, "last_activity_date": 1525079669, "creation_date": 1525074826, "last_edit_date": 1525079014, "question_id": 50096186, "link": "https://stackoverflow.com/questions/50096186/different-result-when-converting-string-to-crc-32", "title": "Different result when converting string to CRC-32", "body": "<p>I am trying to convert string to CRC-32 with perl. And i found String::CRC32. But result from that module is different with online converter. Here is my code :</p>\n\n<pre><code>use strict;\nuse warnings;\nuse String::CRC32;\n\nmy $resi = \"nawan\";\nprint crc32($resi) . \"\\n\"; # --output : 3840460347\n</code></pre>\n\n<p>And output from that code is <strong>3840460347</strong>.</p>\n\n<p>But when i try to convert \"nawan\" with online converter (<a href=\"http://www.timestampgenerator.com/tools/crc32-generator/\" rel=\"nofollow noreferrer\">this online converter</a>), result from that online converter is <strong>f082b8df</strong>.</p>\n\n<p>Is there something i miss about CRC-32? Why the result is different?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["perl", "cron"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 2, "creation_date": 1525081424, "post_id": 50095782, "comment_id": 87212059, "body": "Have a look at the examples.  I think you need the <code>0&#47;2</code> syntax instead.  It says very clearly that it is not compatible with unix cron in the Bugs and Limitations section."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1525092886, "post_id": 50095782, "comment_id": 87218501, "body": "@xxfelixxx I tried that, but it didn&#39;t seem to work properly either. I tried to get the <code>0&#47;n 30 * * *</code> with <code>n</code> as <code>2</code>, <code>3</code>, <code>4</code> and <code>5</code> at 9:20 but it kept giving me <code>9:30</code> as the next one. The code was too convoluted to quickly grasp, so I stopped after reading it for a minute. It might not be implemented for hours."}], "answers": [{"tags": [], "owner": {"reputation": 532, "user_id": 6623469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ebc0962a7ca106f4294fe9cd3ba0c3?s=128&d=identicon&r=PG&f=1", "display_name": "krish___na", "link": "https://stackoverflow.com/users/6623469/krish-na"}, "is_accepted": false, "score": 0, "last_activity_date": 1525534100, "creation_date": 1525534100, "answer_id": 50191095, "question_id": 50095782, "link": "https://stackoverflow.com/questions/50095782/datetimeeventcronquartz-does-not-handle-2-hour/50191095#50191095", "title": "DateTime::Event::Cron::Quartz does not handle */2 hour", "body": "<p>Actually, I found the solution. I was putting * in place of minute. Changing it to 0 solved the problem.</p>\n"}], "owner": {"reputation": 532, "user_id": 6623469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ebc0962a7ca106f4294fe9cd3ba0c3?s=128&d=identicon&r=PG&f=1", "display_name": "krish___na", "link": "https://stackoverflow.com/users/6623469/krish-na"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525534100, "creation_date": 1525073080, "last_edit_date": 1525081561, "question_id": 50095782, "link": "https://stackoverflow.com/questions/50095782/datetimeeventcronquartz-does-not-handle-2-hour", "title": "DateTime::Event::Cron::Quartz does not handle */2 hour", "body": "<p>I am trying to find next run time using <a href=\"http://search.cpan.org/~vad/DateTime-Event-Cron-Quartz-0.05/lib/DateTime/Event/Cron/Quartz.pm\" rel=\"nofollow noreferrer\">DateTime::Event::Cron::Quartz</a> module in perl. In shell <code>*/2</code> value in place of hour field means <code>in every 2 hour</code>. But same is not working in perl. Thanks in advance. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1525085352, "post_id": 50095571, "comment_id": 87214270, "body": "Obligatory link to <a href=\"https://perl.plover.com/varvarname.html\" rel=\"nofollow noreferrer\">perl.plover.com/varvarname.html</a> . You almost always want a hash or array instead."}], "answers": [{"comments": [{"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 2, "creation_date": 1525082604, "post_id": 50096399, "comment_id": 87212777, "body": "In your array example your indices are one off ... it should be <code>for my $count (0 .. 1) {</code>"}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 1, "creation_date": 1525162105, "post_id": 50096399, "comment_id": 87243529, "body": "Well-spotted, @dgw ! I added a dummy value to the array to fill the 0 spot rather than changing the loop because I want the indexes to match the OP&#39;s existing code (which starts with <code>$name1</code>, not <code>$name0</code>)."}], "tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": true, "score": 4, "last_activity_date": 1525162018, "last_edit_date": 1525162018, "creation_date": 1525075732, "answer_id": 50096399, "question_id": 50095571, "link": "https://stackoverflow.com/questions/50095571/assign-a-variable-to-another-variable-by-concatenating-a-string-and-an-int/50096399#50096399", "title": "Assign a variable to another variable by concatenating a string and an int", "body": "<p>What you're describing is called a \"symbolic reference\" in Perl lingo and it's generally frowned upon as a very, very, very... <em>very</em> bad practice because it only works with global variables (which are generally best avoided in their own right) and it's one of the easiest ways to create bugs which are nearly-impossible to find.</p>\n\n<p>But it can be done.  And, since you're asking for the sake of maintaining legacy code which is probably already just as bad, I'll show you how:</p>\n\n<pre><code>perl -e '$count14 = 42; $sref = \"count14\"; print $$sref . \"\\n\"'\n</code></pre>\n\n<p>It's as simple as that.</p>\n\n<p>But, really, don't do it if you can avoid it.</p>\n\n<p>The general-case solution for avoiding symbolic references is to use a hash instead:</p>\n\n<pre><code>my %values = (name1 =&gt; 'Alice', name2 =&gt; 'Bob');\nfor my $count (1 .. 2) {\n  my $name = $values{'name' . $count};\n  print \"$name\\n\";\n}\n</code></pre>\n\n<p>In the specific case of a bunch of variables named <code>foo1</code>, <code>foo2</code>, etc., though, you probably want an array instead:</p>\n\n<pre><code>my @names = qw( . Alice Bob ); # '.' is a dummy to fill index 0 so the names start at 1\nfor my $count (1 .. 2) {\n  my $name = $names[$count];\n  print \"$name\\n\";\n}\n</code></pre>\n\n<p>I would <em><strong>strongly</strong></em> advise using one of these other techniques instead of symbolic references unless the existing code heavily depends on having <code>$name1</code>, <code>$name2</code>, etc. available.  If you can afford the time to replace all of those with arrays and test that the array-based version still works, you'll have improved the quality of the code for future maintainers (which will probably include yourself).</p>\n"}], "owner": {"reputation": 144, "user_id": 6155139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c09d1f850551b06ef91daa250c86a8?s=128&d=identicon&r=PG", "display_name": "Fashim", "link": "https://stackoverflow.com/users/6155139/fashim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 982, "favorite_count": 0, "accepted_answer_id": 50096399, "answer_count": 1, "score": 1, "last_activity_date": 1525162018, "creation_date": 1525072258, "question_id": 50095571, "link": "https://stackoverflow.com/questions/50095571/assign-a-variable-to-another-variable-by-concatenating-a-string-and-an-int", "title": "Assign a variable to another variable by concatenating a string and an int", "body": "<p>Holy cats man,</p>\n\n<p>I'm maintaining some pretty awful legacy code and there is a part for adding some values to the database from a HTML form created by a loop and increments the names of the variables it submits to 14, I'm changing the loop to the amount of rows it selects before creating the HTML.</p>\n\n<p>But the issue is with how it inserts the HTML form back into the database.</p>\n\n<p>Here's an ad-hoc version of the way it handles the database inserts</p>\n\n<pre><code>while (my $count &lt;= 14) {\n  if ($count == 1) {\n    $name = $name1;\n    $email = $email1;\n  }\n  # ...\n  if ($count == 14) {\n    $name = $name14;\n    $email = $email14;\n  }\n\n  my $sth = $dbh-&gt;prepare(\"INSERT INTO table SET name = ? AND email = ?\");\n  $sth-&gt;execute($name, $email);\n  $count++;\n}\n</code></pre>\n\n<p>While I'm probably just going to rewrite this entire section, I'm curious if you could add something like;</p>\n\n<pre><code>elsif ($count &gt; 14) {\n  # Say count is 15 and we want to assign\n  # $name to $name15 using a string and the $count variable here.\n  $name = \"name\".$count;\n\n  $email = \"email\".$count;\n}\n</code></pre>\n\n<p>Is that technically feasible?</p>\n"}, {"tags": ["perl", "xml-parsing", "xml-twig"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1525076713, "post_id": 50095539, "comment_id": 87209384, "body": "I agree they should be children, but they aren&#39;t. No amount of &quot;considering&quot; (whatever that means) is going to change that fact. Being siblings instead of children, isn&#39;t it simply a question of using <code>next_sibling</code> instead of <code>first_child</code>?"}, {"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "edited": false, "score": 0, "creation_date": 1525077724, "post_id": 50095539, "comment_id": 87209940, "body": "as ikegami says, <code>Register</code> and <code>Field</code> are not children of <code>Partition</code>. Also you seem to be loading the whole file in memory anyway. If the file is really big, what you could do is set up <code>twig_handlers</code> on all 3 tags, output/store the information based on the current element and the previous one(s), and purge the tree when you find a new <code>Partition</code>. Note that without proper test data it&#39;s difficult to give you a code example (notably I wonder if the parent/child relationship should not be defined by the <code>ParentName</code> element instead of the location of the elements in the XML)"}, {"owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "edited": false, "score": 0, "creation_date": 1525083596, "post_id": 50095539, "comment_id": 87213324, "body": "That&#39;s good idea. How can I rewrite this file as parent-child relationship?"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "edited": false, "score": 0, "creation_date": 1525148892, "post_id": 50100965, "comment_id": 87239876, "body": "Thanks mirod! I am facing this error: junk after document element at line 11, column 0, byte 333 at C:/Perl64/lib/XML/Parser.pm line 187.  <code>1. &lt;Partition&gt; 2. &lt;Name&gt;PP&lt;&#47;Name&gt; 3. &lt;Abstract&gt;&lt;&#47;Abstract&gt; 4. &lt;Description&gt;&lt;&#47;Description&gt; 5. &lt;ParentName&gt;sec&lt;&#47;ParentName&gt; 6. &lt;StructureTag&gt;&lt;&#47;StructureTag&gt; 7. &lt;AddressOffset&gt;64&lt;&#47;AddressOffset&gt; 8. &lt;NumberOfPartitions&gt;1&lt;&#47;NumberOfPartitions&gt; 9. &lt;IntervalBetweenPartitions&gt;0&lt;&#47;IntervalBetweenPartitions&gt; 10. &lt;&#47;Partition&gt; 11. &lt;Partition&gt; 12. &lt;Name&gt;control_alarm_status&lt;&#47;Name&gt; 13. &lt;Abstract&gt;&lt;&#47;Abstract&gt; 14. &lt;Description&gt;#&lt;&#47;Description&gt;</code>"}, {"owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "edited": false, "score": 0, "creation_date": 1525149789, "post_id": 50100965, "comment_id": 87240037, "body": "Okay. It&#39;s resolved. Root element tag was missing in my file. Thanks @mirod."}], "tags": [], "owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "is_accepted": true, "score": 0, "last_activity_date": 1525106445, "last_edit_date": 1525106445, "creation_date": 1525092720, "answer_id": 50100965, "question_id": 50095539, "link": "https://stackoverflow.com/questions/50095539/perl-how-to-consider-next-xml-tag-as-child-tag-of-previous-one/50100965#50100965", "title": "Perl: How to consider next XML tag as child tag of previous one?", "body": "<p>As per your comment, if you want to rewrite the file with <code>Register</code> and <code>Field</code> elements as children of <code>Partition</code> elements, here is what you could do:</p>\n\n<p>simplest solution, the whole file is loaded in memory:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $test_file= 'test.xml';\n\nXML::Twig-&gt;new( twig_handlers =&gt; { 'Register|Field' =&gt; \\&amp;child,\n                                 },\n                pretty_print =&gt; 'indented',\n              )\n          -&gt;parsefile( $test_file)\n          -&gt;print;\n\nsub child\n  { my( $t, $child)= @_;\n    $child-&gt;move( last_child =&gt; $child-&gt;prev_sibling( 'Partition'));\n  }\n</code></pre>\n\n<p>Since you mentioned that the file can be very large, below is a slightly more complex version that only keeps in memory 2 <code>Partition</code> elements (including the new children of the first one). When a <code>Partition</code> is parsed it uses <code>flush_up_to</code> to flush the tree, up to the previous <code>Partition</code>:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $test_file= 'test.xml';\n\nXML::Twig-&gt;new( twig_handlers =&gt; { 'Partition' =&gt; \\&amp;parent,\n                                   'Register|Field' =&gt; \\&amp;child,\n                                 },\n                pretty_print =&gt; 'indented',\n              )\n          -&gt;parsefile( $test_file);\n\nsub child\n  { my( $t, $child)= @_;\n    $child-&gt;move( last_child =&gt; $child-&gt;prev_sibling( 'Partition'));\n  }\n\nsub parent\n  { my( $t, $partition)= @_;\n    if( my $prev_partition = $partition-&gt;prev_sibling( 'Partition'))\n      { $t-&gt;flush_up_to( $prev_partition); }\n  }\n</code></pre>\n\n<p>Note that since <code>flush_up_to</code> is used, at the end of the parsing the rest of the tree is automatically flushed</p>\n\n<p>If you need to write the XML to a specific file, instead of STDOUT, you can also pass a filehandle to <code>flush_up_to</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "is_accepted": false, "score": 0, "last_activity_date": 1525149351, "creation_date": 1525149351, "answer_id": 50111389, "question_id": 50095539, "link": "https://stackoverflow.com/questions/50095539/perl-how-to-consider-next-xml-tag-as-child-tag-of-previous-one/50111389#50111389", "title": "Perl: How to consider next XML tag as child tag of previous one?", "body": "<p>Btw, I have written very basic code to convert <code>Field</code> as a child to <code>Register</code> and <code>Register</code> as child to <code>Partition</code>:</p>\n\n<pre><code>use strict;\n#use warnings;\nuse XML::Twig;\nuse Data::Dumper; \nuse Data::Alias;\n\nmy $input_xml_file = \"gpon.xml\";\n\nopen (IN_FILE,$input_xml_file);\nmy @input_file = &lt;IN_FILE&gt;;\n\n\nfor (my $line=0;$line&lt;@input_file;$line++)\n{\n\n            if ($input_file[$line] =~ /&lt;\\/Partition&gt;/ &amp;&amp; $input_file[$line+1] =~ /&lt;Register&gt;/)\n            {\n                $input_file[$line] = '';\n\n            }\n            if ($input_file[$line] =~ /&lt;\\/Field&gt;/ &amp;&amp; $input_file[$line+1] =~ /&lt;Partition&gt;/)\n            {\n                $input_file[$line] = \"&lt;/Field&gt;\n&lt;/Register&gt;\n&lt;/Partition&gt;\n\";\n\n            }\n            if ($input_file[$line] =~ /&lt;\\/Field&gt;/ &amp;&amp; $input_file[$line+1] =~ /&lt;Register&gt;/)\n            {\n                $input_file[$line] = \"&lt;/Field&gt;\n&lt;/Register&gt;\n\";\n\n            }\n            if ($input_file[$line] =~ /&lt;\\/Register&gt;/ &amp;&amp; $input_file[$line+1] =~ /&lt;Field&gt;/ )\n            {\n                $input_file[$line] = '';\n\n            }\n\n}\n#print OUT_FILE \"&lt;/Register&gt;\";\n\n\nclose(IN_FILE);\nopen (OUT_FILE,'&gt;gpon_modified.xml');\nforeach (@input_file)\n{\n     print OUT_FILE \"$_\";\n}\nprint OUT_FILE \"&lt;/Register&gt;\n&lt;/Partition&gt;\";\nclose (OUT_FILE);\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 50100965, "answer_count": 2, "score": 0, "last_activity_date": 1525149351, "creation_date": 1525072147, "question_id": 50095539, "link": "https://stackoverflow.com/questions/50095539/perl-how-to-consider-next-xml-tag-as-child-tag-of-previous-one", "title": "Perl: How to consider next XML tag as child tag of previous one?", "body": "<p>In following data file, I want to consider each <code>&lt;Field&gt;</code> tag as child tag of <code>&lt;Register&gt;</code> and each <code>&lt;Register&gt;</code> as child of <code>&lt;Partition&gt;</code>. so, basically, I am trying to extract each <code>&lt;Partition&gt;</code> details with corresponding <code>&lt;Register&gt;</code> and <code>&lt;Field&gt;</code>. Since all these tags are separate and not as child-parent relationship, how can I get my desired output?</p>\n\n<p>Since the file is very large, I do not want to make it as child-parent relationship as it will require find/replace and manual intervention.</p>\n\n<pre><code>&lt;Partition&gt;\n    &lt;Name&gt;1&lt;/Name&gt;\n    &lt;Abstract&gt;2&lt;/Abstract&gt;\n    &lt;Description&gt;3&lt;/Description&gt;\n    &lt;ParentName&gt;4&lt;/ParentName&gt;\n\n    &lt;/Partition&gt;\n    &lt;Partition&gt;\n    &lt;Name&gt;8&lt;/Name&gt;\n    &lt;Abstract&gt;&lt;/Abstract&gt;\n    &lt;Description&gt;9&lt;/Description&gt;\n    &lt;ParentName&gt;10&lt;/ParentName&gt;\n\n    &lt;/Partition&gt;\n    &lt;Register&gt;\n    &lt;Name&gt;12&lt;/Name&gt;\n    &lt;Abstract&gt;&lt;/Abstract&gt;\n    &lt;Description&gt;13&lt;/Description&gt;\n    &lt;ParentName&gt;14&lt;/ParentName&gt;\n\n    &lt;Size&gt;32&lt;/Size&gt;\n    &lt;AccessMode&gt;15&lt;/AccessMode&gt;\n    &lt;Type&gt;16&lt;/Type&gt;\n\n\n    &lt;/Register&gt;\n    &lt;Field&gt;\n    &lt;Name&gt;17&lt;/Name&gt;\n    &lt;Abstract&gt;&lt;/Abstract&gt;\n    &lt;Description&gt;&lt;/Description&gt;\n    &lt;ParentName&gt;&lt;/ParentName&gt;\n\n\n    &lt;/Field&gt;\n    &lt;Field&gt;\n    .\n    .\n    .\n    &lt;/Field&gt;\n    &lt;Register&gt;\n    .\n    .\n    .\n\n    &lt;/Register&gt;\n    &lt;Field&gt;\n    .\n    .\n    .\n\n    &lt;/Field&gt;\n    &lt;Field&gt;\n    .\n    .\n    .\n    &lt;/Field&gt;\n    &lt;Partition&gt;\n        &lt;Name&gt;88&lt;/Name&gt;\n        &lt;Abstract&gt;&lt;/Abstract&gt;\n        &lt;Description&gt;&lt;/Description&gt;\n        &lt;ParentName&gt;55&lt;/ParentName&gt;\n\n    &lt;/Partition&gt;\n    &lt;Register&gt;\n        .\n        .\n        .\n\n    &lt;/Register&gt;\n    &lt;Field&gt;\n        .\n        .\n        .\n\n    &lt;/Field&gt;\n    &lt;Partition&gt;\n        .\n        .\n        .\n    &lt;/Partition&gt;\n    &lt;Partition&gt;\n        .\n        .\n        .\n    &lt;/Partition&gt;\n    &lt;Partition&gt;\n       .\n       .\n       .\n    &lt;/Partition&gt;\n    &lt;Register&gt;\n        .\n        .\n        .\n    &lt;/Register&gt;\n</code></pre>\n\n<p>I am using <code>XML::Twig</code> package and here is my code snippet: </p>\n\n<pre><code>foreach my $register ( $twig-&gt;get_xpath('//Register') ) # get each &lt;Register&gt;\n    {\n        #print $register, \"\\n\";\n        my $reg_name = $register-&gt;first_child('Name')-&gt;text;\n        my $reg_abstract= $register-&gt;first_child('Abstract')-&gt;text;\n        my $reg_description= $register-&gt;first_child('Description')-&gt;text;\n       .\n       .\n       .\n          foreach my $xml_field ($register-&gt;get_xpath('Field'))\n          {\n            my $reg_field_name= $xml_field-&gt;first_child('Name')-&gt;text;\n            my $reg_field_abstract= $xml_field-&gt;first_child('Abstract')-&gt;text;\n            #print \"$reg_field_name \\n\";\n            .\n            .\n            .\n\n          }\n  }\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1525067891, "post_id": 50094696, "comment_id": 87205487, "body": "Are you issuing a <code>die</code> yourself?  To suppress line/file info add a newline, <code>die &quot;$string\\n&quot;;</code>. Otherwise you can set a hook for it, <code>$SIG{__DIE__} = sub { ...}</code>, and format it inside as you please. See <a href=\"https://perldoc.perl.org/perlvar.html#%SIG\" rel=\"nofollow noreferrer\">%SIG in perlvar</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "edited": false, "score": 1, "creation_date": 1525920456, "post_id": 50094996, "comment_id": 87547505, "body": "That seems fine for user code, but I&#39;m trying to write a library that catches, inspects, and possibly rethrows exceptions. I&#39;d like to be able to rethrow exactly the exception I was handed, even if the exception object has been set to a non-newline delimited string in an XS module or something like that."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 5, "last_activity_date": 1525069456, "last_edit_date": 1592644375, "creation_date": 1525069456, "answer_id": 50094996, "question_id": 50094696, "link": "https://stackoverflow.com/questions/50094696/perl-die-with-string-without-appending-file-name-and-line-number/50094996#50094996", "title": "Perl die with string without appending file name and line number", "body": "<p><a href=\"http://perldoc.perl.org/functions/die.html\" rel=\"noreferrer\"><code>perldoc -f die</code></a>:</p>\n<blockquote>\n<p><strong>die LIST</strong></p>\n<p><code>die</code> raises an exception. [...]</p>\n<p>If the last element of LIST does not end in a newline, the current script line number and input line number (if any) are also printed, and a newline is supplied.</p>\n</blockquote>\n<p>If you want to suppress the addition of file name and line number, make sure your error message ends with <code>&quot;\\n&quot;</code>.</p>\n<p>To rethrow an existing exception, you can simply use <code>die $@</code>. Either <code>$@</code> is an exception object (then it won't get mangled anyway), or it is a string ending with <code>&quot;\\n&quot;</code> (because the previous <code>die</code> will have made sure to add one if there wasn't one to begin with).</p>\n"}], "owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 347, "favorite_count": 0, "accepted_answer_id": 50094996, "answer_count": 1, "score": 1, "last_activity_date": 1525069456, "creation_date": 1525067709, "question_id": 50094696, "link": "https://stackoverflow.com/questions/50094696/perl-die-with-string-without-appending-file-name-and-line-number", "title": "Perl die with string without appending file name and line number", "body": "<p>Is there a way of <code>die</code>ing in Perl in such a way that <code>$@</code> is not modified? As far as I can tell, <code>die</code> mangles the contents of <code>$@</code> under certain circumstances and \"throws\", transferring control non-locally. I just want to do the latter.</p>\n\n<p>When <code>die</code> is a string appends the file name and line number to <code>$@</code> when the exceptionish object passed to <code>die</code> is a string (or undef).</p>\n\n<p>For example,</p>\n\n<pre><code>#!/usr/bin/env perl\n# foo.pl\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\neval { die '1'; };\nmy $hash_ref = {\n    msg =&gt; $@,\n};\n\nprint Dumper($hash_ref);\n</code></pre>\n\n<p>prints:</p>\n\n<pre><code>$VAR1 = {\n          'msg' =&gt; '1 at foo.pl line 7.\n'\n        };\n</code></pre>\n\n<p>But if the argument is not a string (or undef) it isn't modified.</p>\n\n<pre><code>#!/usr/bin/env perl\n# foo2.pl\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\neval { die ['string-inside-arrayref']; };\nmy $hash_ref = {\n    msg =&gt; $@,\n};\n\nprint Dumper($hash_ref);\n</code></pre>\n\n<p>This snippet produces:</p>\n\n<pre><code>$VAR1 = {\n          'msg' =&gt; [\n                     'string-inside-arrayref'\n                   ]\n        };\n</code></pre>\n"}, {"tags": ["arrays", "perl", "formatting"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4283009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfaddf1d586d86f68129c7bd92ef00a5?s=128&d=identicon&r=PG&f=1", "display_name": "Derek", "link": "https://stackoverflow.com/users/4283009/derek"}, "edited": false, "score": 0, "creation_date": 1525106647, "post_id": 50094409, "comment_id": 87226738, "body": "In retrospect, my question was probably not well worded. I think in the end, the thing I didn&#39;t realize I needed was the perl &quot;map&quot; keyword. That&#39;s where I was failing. Your post helped me realize that and you went way above and beyond. Thanks"}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 1, "last_activity_date": 1525065910, "creation_date": 1525065910, "answer_id": 50094409, "question_id": 50093711, "link": "https://stackoverflow.com/questions/50093711/multi-dimensional-array-formatted-to-console-grid-columns/50094409#50094409", "title": "Multi-dimensional array formatted to console grid/columns", "body": "<p>You can use <a href=\"http://search.cpan.org/~shlomif/Text-Table-1.133/lib/Text/Table.pm\" rel=\"nofollow noreferrer\">Text::Table</a> to accomplish this, as it handles variable numbers of rows and columns.  Although the documentation leaves a lot to be desired, you can usually look to the test files or examples to show you how the library should actually get used.  I've adapted <a href=\"https://github.com/shlomif/Text-Table/blob/master/Text-Table/examples/Text-Table-UTF8-example.pl\" rel=\"nofollow noreferrer\">example.pl</a> to illustrate this:</p>\n\n<p><strong>table.pl</strong></p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse utf8;\n\nuse Text::Table;\n\nbinmode STDOUT, ':utf8';\n\nmy ($rows, $cols) = @ARGV;\n$rows ||= 5;\n$cols ||= 7;\n\nmy @cols = map { \"column \" . $_} ( 1..$cols );\nmy $sep = \\'\u2502';\n\nmy $major_sep = \\'\u2551';\nmy $tb = Text::Table-&gt;new($sep,  \" Number \", $major_sep,\n                          (map { +(\" $_ \", $sep) } @cols)\n    );\n\nmy $num_cols = @cols;\n\nfor my $row (1..$rows) {\n    $tb-&gt;load([ \"row $row\", map { \"r$row,c$_\" } ( 1..$cols ) ]);\n}\n\nmy $make_rule = sub {\n    my ($args) = @_;\n\n    my $left = $args-&gt;{left};\n    my $right = $args-&gt;{right};\n    my $main_left = $args-&gt;{main_left};\n    my $middle = $args-&gt;{middle};\n\n    return $tb-&gt;rule(\n        sub {\n            my ($index, $len) = @_;\n\n            return ('\u2500' x $len);\n        },\n        sub {\n            my ($index, $len) = @_;\n\n            my $char =\n                (     ($index == 0) ? $left\n                      : ($index == 1) ? $main_left\n                      : ($index == $num_cols+1) ? $right\n                      : $middle\n                );\n\n            return $char x $len;\n        },\n        );\n};\n\nmy $start_rule = $make_rule-&gt;(\n    {\n        left =&gt; '\u250c',\n        main_left =&gt; '\u2565',\n        right =&gt; '\u2510',\n        middle =&gt; '\u252c',\n    }\n    );\n\nmy $mid_rule = $make_rule-&gt;(\n    {\n        left =&gt; '\u251c',\n        main_left =&gt; '\u256b',\n        right =&gt; '\u2524',\n        middle =&gt; '\u253c',\n    }\n    );\n\nmy $end_rule = $make_rule-&gt;(\n    {\n        left =&gt; '\u2514',\n        main_left =&gt; '\u2568',\n        right =&gt; '\u2518',\n        middle =&gt; '\u2534',\n    }\n    );\n\n\nprint $start_rule, $tb-&gt;title,\n    (map { $mid_rule, $_, } $tb-&gt;body()), $end_rule;\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>perl table.pl 3 5\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2565\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Number \u2551 column 1 \u2502 column 2 \u2502 column 3 \u2502 column 4 \u2502 column 5 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502row 1   \u2551r1,c1     \u2502r1,c2     \u2502r1,c3     \u2502r1,c4     \u2502r1,c5     \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502row 2   \u2551r2,c1     \u2502r2,c2     \u2502r2,c3     \u2502r2,c4     \u2502r2,c5     \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502row 3   \u2551r3,c1     \u2502r3,c2     \u2502r3,c3     \u2502r3,c4     \u2502r3,c5     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2568\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 0, "last_activity_date": 1525637386, "last_edit_date": 1525637386, "creation_date": 1525066899, "answer_id": 50094550, "question_id": 50093711, "link": "https://stackoverflow.com/questions/50093711/multi-dimensional-array-formatted-to-console-grid-columns/50094550#50094550", "title": "Multi-dimensional array formatted to console grid/columns", "body": "<p>While modules offer easier control and features, if you only need to print it out as a grid</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy @ary = ([1..3], [10..12], [100..102]);\n\nforeach my $row (@ary) { \n    printf \"%7.3f  \", $_ for @$row; \n    say ''\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre>\n  1.000    2.000    3.000  \n 10.000   11.000   12.000  \n100.000  101.000  102.000  \n</pre>\n\n<p>Choose your specifier (<code>%7.3f</code> above) accordingly to what data you have. See <a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"nofollow noreferrer\">sprintf</a></p>\n\n<p>If the first row is headers, <code>shift</code> it off of the array and print with the same width but using <code>%s</code></p>\n\n<pre><code>my @ary = ([qw(one two three)], [1..3], [10..12], [100..102]); \n\nprintf \"%7s  \", $_ for @{shift @ary};\nsay '';\n\nforeach my $row (@ary) { \n    printf \"%7.3f  \", $_ for @$row; \n    say ''\n}\n</code></pre>\n\n<p>This prints the same as above but with (aligned) column names in the first row.</p>\n\n<p>If \"<em>grid of data</em>\" means numeric data, then the code can discover whether there is a header line, with a reasonable assumption that the first line contains <em>something</em> non-numeric </p>\n\n<pre><code>use List::Util qw(any);\n\nmy $have_header = any { /[^0-9.+-]/ } @{$ary[0]};\n</code></pre>\n\n<p>what also assumes the absence of <code>NaN</code> and <code>1e02</code> or such on the first line. </p>\n\n<p>Better yet, use <code>looks_like_number</code> from <a href=\"https://perldoc.perl.org/5.8.9/Scalar/Util.html\" rel=\"nofollow noreferrer\">Scalar::Util</a></p>\n\n<pre><code>use List::Util qw(any);\nuse Scalar::Util qw(looks_like_number);\n\nmy $have_header = any { not looks_like_number($_) } @{$ary[0]};\n</code></pre>\n\n<p>This uses Perl's <a href=\"https://perldoc.perl.org/5.8.9/perlapi.html#looks_like_number\" rel=\"nofollow noreferrer\">internal sense of what a number is</a>, and accounts for <code>NaN</code> and exponential notation, among other things.</p>\n\n<hr>\n\n<p>If the program needs to find out the width of columns, or they differ a lot, there is more to do for a nice output since we need the maximum width of each column.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';    \nuse List::Util qw(max);\n\nmy $file = shift @ARGV || 'data.txt';\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\nmy @ary = map { [ split ] } &lt;$fh&gt;;\n\nmy @maxw = (1) x @{$ary[0]};   \nfor my $r (@ary) {\n    for (0..$#$r) {\n        my $len = length $r-&gt;[$_];\n        $maxw[$_] = $len if $len &gt; $maxw[$_]\n    }\n};\n\nmy $hdr = shift @ary;\nprintf \"%$maxw[$_]s  \", $hdr-&gt;[$_] for 0..$#$hdr;\nsay '';\n\nfor my $i (0..$#ary) {\n    printf \"%$maxw[$_].2f  \", $ary[$i]-&gt;[$_] for 0..$#{$ary[$i]};\n    say '';\n}\n</code></pre>\n\n<p>This expects numbers, except for the header. A few other reasonable assumptions are made. </p>\n\n<p>With input <code>data.txt</code> file used to populate the array</p>\n\n<pre>\none      two      three  \n1.12   1.1   12  \n1.00  10.00  102.000\n</pre>\n\n<p>the program prints</p>\n\n<pre>\n one    two    three  \n1.12   1.10    12.00  \n1.00  10.00   102.00  \n</pre>\n\n<p>Note.  If the numbers are computed in the program those scalars are used as numbers and the length of the string representing them in print should be queried as <code>length sprintf \"%s\", $num</code>.  When they are read from a file they are taken as strings, what is used above for simplicity.</p>\n"}], "owner": {"reputation": 25, "user_id": 4283009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfaddf1d586d86f68129c7bd92ef00a5?s=128&d=identicon&r=PG&f=1", "display_name": "Derek", "link": "https://stackoverflow.com/users/4283009/derek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 50094409, "answer_count": 2, "score": -1, "last_activity_date": 1525637386, "creation_date": 1525060446, "last_edit_date": 1525062296, "question_id": 50093711, "link": "https://stackoverflow.com/questions/50093711/multi-dimensional-array-formatted-to-console-grid-columns", "title": "Multi-dimensional array formatted to console grid/columns", "body": "<p>Using Text::Table or Text::ANSITable, or something similar...</p>\n\n<p>If I have a two-dimensional array (which represents a grid of data), where the first row can be the column headers, how can I apply that data and format it into a command line grid with columns.</p>\n\n<p>Something like this: <a href=\"https://stackoverflow.com/questions/25209959/perl-how-to-create-table-from-an-array\">PERL : How to create table from an array?</a></p>\n\n<p>Except that the number of rows and columns is variable depending on the array setup and needs to automatically output as such.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "tree", "output", "heapsort"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1525091358, "post_id": 50093631, "comment_id": 87217605, "body": "What is the content of <code>data.txt</code>?"}, {"owner": {"reputation": 21, "user_id": 7455065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VyLUR.jpg?s=128&g=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/7455065/dom"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1525092031, "post_id": 50093631, "comment_id": 87217961, "body": "The content of the data.txt is 10,4,5,2,1,7"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1525094645, "post_id": 50093631, "comment_id": 87219619, "body": "Note that the nested sub <code>max()</code> is not private to <code>down_heap()</code>, see <a href=\"https://stackoverflow.com/q/10192228/2173773\">Nested subroutines and Scoping in Perl</a> for more information. However, lexical subroutines are available beginning from Perl version 5.18, see <a href=\"https://perldoc.perl.org/perlsub.html#Lexical-Subroutines\" rel=\"nofollow noreferrer\"><code>perdoc perlsub</code></a>."}, {"owner": {"reputation": 21, "user_id": 7455065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VyLUR.jpg?s=128&g=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/7455065/dom"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1525104959, "post_id": 50093631, "comment_id": 87225942, "body": "oh! Oh my gosh, Sorry max() wasn&#39;t suppose to be that far indented like that, I just looked at it vs the code I had."}, {"owner": {"reputation": 21, "user_id": 7455065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VyLUR.jpg?s=128&g=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/7455065/dom"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1525105796, "post_id": 50093631, "comment_id": 87226341, "body": "And I was wrong about the content of the data.txt. it&#39;s 10 4 5 2 1 7"}, {"owner": {"reputation": 21, "user_id": 7455065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VyLUR.jpg?s=128&g=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/7455065/dom"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1525106185, "post_id": 50093631, "comment_id": 87226518, "body": "And should I nest it? The heap sort works(as it&#39;s sorting just about everything I throw at it) but I&#39;m not getting the correct output with this module."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1525111123, "post_id": 50093631, "comment_id": 87228765, "body": "Hello @Dom. No need to nest the <code>max()</code> sub routine. I wonder what is the purpose of this line:  <code>$root-&gt;new_daughter-&gt;name($_) for (&#39;1&#39;..&#39;10&#39;)</code> ? Why are you adding 10 daughter nodes?"}, {"owner": {"reputation": 21, "user_id": 7455065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VyLUR.jpg?s=128&g=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/7455065/dom"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1525120893, "post_id": 50093631, "comment_id": 87233072, "body": "Hey @H&#229;konH&#230;gland. I put that in as filler when I was writing as when I tried to reference anything else, it wouldn&#39;t accept it as something to display."}, {"owner": {"reputation": 21, "user_id": 7455065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VyLUR.jpg?s=128&g=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/7455065/dom"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1525133802, "post_id": 50093631, "comment_id": 87236983, "body": "@H&#229;konH&#230;gland I&#39;ve been messing around with this module some more, and managed to get it to display certain numbers depending on their potion in the list. I think I just need to code a way to compare to nodes and also swap them while also comparing new inserts with stuff already in the tree."}], "owner": {"reputation": 21, "user_id": 7455065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VyLUR.jpg?s=128&g=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/7455065/dom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1525094236, "creation_date": 1525059826, "last_edit_date": 1525094236, "question_id": 50093631, "link": "https://stackoverflow.com/questions/50093631/using-treedag-node-to-print-list-heap-into-tree-format", "title": "Using Tree::DAG_Node to print list heap into tree-format", "body": "<p>To make it simple, I am trying to get this heap to print in a tree like format. It's close but I know I am missing stuff, but I just can't wrap my head around this module. I know there is tree::simple and I think just Tree? But I can't really find any tutorials on how to actually use with a list or a array. The heap sort is right, cause it's sorting the list after the tree has been posted but I can't figure how to draw the tree correctly, then again outputting has never been my strong suit on any language. I think it's not grabbing the data from the file? least that is my idea but i'm not confident enough to be sure. here is my code so far.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.006;\nuse strict;\nuse warnings;\nuse Tree::DAG_Node;\n\nprocess_data(read_file('data.txt'));\nprocess_data((3,1,4,1,5,9,2,6,5,3,6));\n\nsub read_file{\n    my($filename)=@_;\n    my @data=();\n    my @words;\n    open(my $fh, \"&lt;\", $filename)\n        or die \"Could not open file: $!\\n\";\n    while(&lt;$fh&gt;){\n        chomp;\n        @words = split(' ');\n        foreach my $word(@words) {\n            push @data, $word;\n        }\n    }\n    close $fh;\n    return @data;\n}\n\n\nsub heap_sort {\n    my ($a) = @_;\n    my $n = @$a;\n    for (my $i = ($n - 2) / 2; $i &gt;= 0; $i--) {\n        down_heap($a, $n, $i);\n    }\n    for (my $i = 0; $i &lt; $n; $i++) {\n        my $t = $a-&gt;[$n - $i - 1];\n        $a-&gt;[$n - $i - 1] = $a-&gt;[0];\n        $a-&gt;[0] = $t;\n        down_heap($a, $n - $i - 1, 0);\n    }\n}\n\nsub down_heap {\n    my ($a, $n, $i) = @_;\n    while (1) {\n        my $j = max($a, $n, $i, 2 * $i + 1, 2 * $i + 2);\n        last if $j == $i;\n        my $t = $a-&gt;[$i];\n        $a-&gt;[$i] = $a-&gt;[$j];\n        $a-&gt;[$j] = $t;\n        $i = $j;\n    }\n\n    sub max {\n        my ($a, $n, $i, $j, $k) = @_;\n        my $m = $i;\n        $m = $j if $j &lt; $n &amp;&amp; $a-&gt;[$j] &gt; $a-&gt;[$m];\n        $m = $k if $k &lt; $n &amp;&amp; $a-&gt;[$k] &gt; $a-&gt;[$m];\n        return $m;\n    }\n}\n\nsub draw_tree{\n    my(@data)=@_;\n    my $root = Tree::DAG_Node-&gt;new;\n    $root-&gt;name($_[0]);\n    $root-&gt;new_daughter-&gt;name($_) for ('1'..'10');\n    my @names = @data;\n    my $count =0;\n    for my $n ($root-&gt;daughters) {\n        for (split //, $names[$count++]) {\n            $n-&gt;new_daughter-&gt;name($_)\n        }\n    }\n    print map \"$_\\n\", @{$root-&gt;draw_ascii_tree};\n}\n\nsub process_data{\n    my(@data)=@_;\n    my @a = @data;\n    print \"@a\\n\";\n    print \"\\n\";\n    heap_sort(\\@a);\n    print \"\\n\";\n    print \"@a\\n\";\n    print \"\\n\";\n    draw_tree(@a);\n} \n</code></pre>\n\n<p>and here is the output I am getting so far.</p>\n\n<pre><code>10,4,5,2,1,7\n\nUse of uninitialized value in split at HEAPSORTtree.pl line 77.\nUse of uninitialized value in split at HEAPSORTtree.pl line 77.\nUse of uninitialized value in split at HEAPSORTtree.pl line 77.\nUse of uninitialized value in split at HEAPSORTtree.pl line 77.\nUse of uninitialized value in split at HEAPSORTtree.pl line 77.\nUse of uninitialized value in split at HEAPSORTtree.pl line 77.\nUse of uninitialized value in split at HEAPSORTtree.pl line 77.\nUse of uninitialized value in split at HEAPSORTtree.pl line 77.\nUse of uninitialized value in split at HEAPSORTtree.pl line 77.\n                                                       |\n\n                                                 &lt;10,4,5,2,1,7&gt;\n\n                                     /---------------------------------------+--\n-+---+---+---+---+---+---+---\\\n                                     |                                       |\n |   |   |   |   |   |   |   |\n                                    &lt;1&gt;                                     &lt;2&gt;\n&lt;3&gt; &lt;4&gt; &lt;5&gt; &lt;6&gt; &lt;7&gt; &lt;8&gt; &lt;9&gt; &lt;10&gt;\n /-----------------+-----------------+---+---+---+---+---+---+---+---+---\\\n\n |                 |                 |   |   |   |   |   |   |   |   |   |\n\n&lt;1&gt; &lt;Tree::DAG_Node=HASH(0x4b32dc)&gt; &lt;,&gt; &lt;4&gt; &lt;,&gt; &lt;5&gt; &lt;,&gt; &lt;2&gt; &lt;,&gt; &lt;1&gt; &lt;,&gt; &lt;7&gt;\n\n\n10,4,5,2,1,7\n\n3 1 4 1 5 9 2 6 5 3 6\n\n                   |\n                  &lt;1&gt;\n /---+---+---+---+---+---+---+---+---\\\n |   |   |   |   |   |   |   |   |   |\n&lt;1&gt; &lt;2&gt; &lt;3&gt; &lt;4&gt; &lt;5&gt; &lt;6&gt; &lt;7&gt; &lt;8&gt; &lt;9&gt; &lt;10&gt;\n |   |   |   |   |   |   |   |   |   |\n&lt;1&gt; &lt;1&gt; &lt;2&gt; &lt;3&gt; &lt;3&gt; &lt;4&gt; &lt;5&gt; &lt;5&gt; &lt;6&gt; &lt;9&gt;\n\n1 1 2 3 3 4 5 5 6 9 6\n\nPress any key to continue . . .\n</code></pre>\n\n<p>the output I want is similar to this</p>\n\n<pre><code>|               \n            &lt;root&gt;             \n     /-------+-------+-------\\ \n     |       |       |       | \n    &lt;1&gt;     &lt;d&gt;     &lt;e&gt;     &lt;f&gt;\n /---+---\\           |         \n |   |   |          &lt;3&gt;        \n&lt;a&gt; &lt;b&gt; &lt;c&gt;      /---+---\\     \n                 |   |   |     \n                &lt;g&gt; &lt;h&gt; &lt;i&gt;   \n</code></pre>\n"}, {"tags": ["linux", "database", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "edited": false, "score": 1, "creation_date": 1525057110, "post_id": 50093390, "comment_id": 87202882, "body": "have you tried anything so far?"}, {"owner": {"reputation": 61, "user_id": 9719368, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GlZOG.jpg?s=128&g=1", "display_name": "bigbuddha", "link": "https://stackoverflow.com/users/9719368/bigbuddha"}, "reply_to_user": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "edited": false, "score": 0, "creation_date": 1525057429, "post_id": 50093390, "comment_id": 87202926, "body": "@SufiyanGhori yes, please see my updated question but I just stucked with the paste part."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 9719368, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GlZOG.jpg?s=128&g=1", "display_name": "bigbuddha", "link": "https://stackoverflow.com/users/9719368/bigbuddha"}, "edited": false, "score": 0, "creation_date": 1525058388, "post_id": 50093428, "comment_id": 87203123, "body": "You&#39;re the best! Works like a charm, thank you very much!"}], "tags": [], "owner": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "is_accepted": true, "score": 2, "last_activity_date": 1525058039, "last_edit_date": 1525058039, "creation_date": 1525057450, "answer_id": 50093428, "question_id": 50093390, "link": "https://stackoverflow.com/questions/50093390/extract-domain-then-paste-into-the-same-line-using-sed-awk-grep-perl/50093428#50093428", "title": "Extract domain then paste into the same line using sed/awk/grep/perl", "body": "<p>If you have the following data in a file named, <code>file1</code>,</p>\n\n<pre><code> something@nothing.tld|:|george|-|\n anything@another.tld|:|thomas|-|\n third@address.tld|:|kelly|-|\n</code></pre>\n\n<p>you can use <code>:</code> and <code>@</code> as delimiters and add data after it using awk, then save it to a new file,</p>\n\n<pre><code>awk -F '[@:]' '{ print $1\"@\"$2 \":|\" $2\"--\" $3 }' file1 &gt; file2\n</code></pre>\n\n<p>Above command saves following data in a file called <code>file2</code>,</p>\n\n<pre><code>something@nothing.tld|:|nothing.tld|--|george|-|\nanything@another.tld|:|another.tld|--|thomas|-|\nthird@address.tld|:|address.tld|--|kelly|-|\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38442, "user_id": 1331399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a22763d295c9d45db0dd0c692bb4051?s=128&d=identicon&r=PG", "display_name": "Thor", "link": "https://stackoverflow.com/users/1331399/thor"}, "is_accepted": false, "score": 0, "last_activity_date": 1525082291, "creation_date": 1525082291, "answer_id": 50098111, "question_id": 50093390, "link": "https://stackoverflow.com/questions/50093390/extract-domain-then-paste-into-the-same-line-using-sed-awk-grep-perl/50098111#50098111", "title": "Extract domain then paste into the same line using sed/awk/grep/perl", "body": "<p>You can do it like this with <code>sed</code>:</p>\n\n<pre><code>sed -E 's/@([^|]+)\\|:\\|/&amp;\\1|--|/' infile\n</code></pre>\n\n<p>Note the use of a negated-group (<code>[^|]</code>), i.e. match anything except this character group.</p>\n\n<p>Output:</p>\n\n<pre><code>something@nothing.tld|:|nothing.tld|--|george|-|\nanything@another.tld|:|another.tld|--|thomas|-|\nthird@address.tld|:|address.tld|--|kelly|-|\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 1, "last_activity_date": 1525095489, "creation_date": 1525095489, "answer_id": 50101731, "question_id": 50093390, "link": "https://stackoverflow.com/questions/50093390/extract-domain-then-paste-into-the-same-line-using-sed-awk-grep-perl/50101731#50101731", "title": "Extract domain then paste into the same line using sed/awk/grep/perl", "body": "<p>With GNU awk for gensub():</p>\n\n<pre><code>$ awk 'BEGIN{FS=OFS=\"|\"} {print $1, $2, gensub(/.*@/,\"\",1,$1), \"--\", $3, $4, $5}' file\nsomething@nothing.tld|:|nothing.tld|--|george|-|\nanything@another.tld|:|another.tld|--|thomas|-|\nthird@address.tld|:|address.tld|--|kelly|-|\n</code></pre>\n\n<p>With any awk:</p>\n\n<pre><code>$ awk 'BEGIN{FS=OFS=\"|\"} {d=$1; sub(/.*@/,\"\",d); print $1, $2, d, \"--\", $3, $4, $5}' file\nsomething@nothing.tld|:|nothing.tld|--|george|-|\nanything@another.tld|:|another.tld|--|thomas|-|\nthird@address.tld|:|address.tld|--|kelly|-|\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9719368, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GlZOG.jpg?s=128&g=1", "display_name": "bigbuddha", "link": "https://stackoverflow.com/users/9719368/bigbuddha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 50093428, "answer_count": 3, "score": 3, "last_activity_date": 1525095489, "creation_date": 1525056970, "last_edit_date": 1525059026, "question_id": 50093390, "link": "https://stackoverflow.com/questions/50093390/extract-domain-then-paste-into-the-same-line-using-sed-awk-grep-perl", "title": "Extract domain then paste into the same line using sed/awk/grep/perl", "body": "<p>I've started my tech adventure not so long ago - as you will feel from question - but now I'm stucked because after almost a whole day thinking and searching I don't know the proper solution for my problem.</p>\n\n<p>Briefly, I got a file with thousand lines which contains email and firstname. The thing is I really need another column just with the domain name itself for example next to the email address. Please take a look at the examples below. </p>\n\n<p>This is how it looks now:    </p>\n\n<pre>\n\n    something@nothing.tld|:|george|-|\n    anything@another.tld|:|thomas|-|\n    third@address.tld|:|kelly|-|\n\n</pre>\n\n<p>How I wanted to look like:    </p>\n\n<pre>\n\n    something@nothing.tld|:|nothing.tld|--|george|-|\n    anything@another.tld|:|another.tld|--|thomas|-|\n    third@address.tld|:|address.tld|--|kelly|-|\n\n</pre>\n\n<p>My best guess was using sed to start the process and extract the domain but how can I paste that extracted domain within the same line that's where I stucked.</p>\n\n<pre>\n\n    sed -e 's/.*@\\(.*\\)|:|*/\\1/'\n\n</pre>\n\n<p>If you could also give a short explanation along with a solution that would be really helpful.</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["string", "perl", "substring", "perl-critic"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1525043525, "post_id": 50092032, "comment_id": 87200481, "body": "<a href=\"https://stackoverflow.com/questions/50091407/perl-critic-error-on-splitting-string-into-array-using-regexp#comment87200376_50091571\" title=\"perl critic error on splitting string into array using regexp%23comment87200376_50091571\">stackoverflow.com/questions/50091407/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1525672572, "last_edit_date": 1525672572, "creation_date": 1525046105, "answer_id": 50092425, "question_id": 50092032, "link": "https://stackoverflow.com/questions/50092032/perl-critic-policy-violation-in-checking-index-of-substring-in-a-string/50092425#50092425", "title": "Perl critic policy violation in checking index of substring in a string", "body": "<p>In this case the analyzer either found a bug or is plain wrong in flagging your code.</p>\n\n<p>Are you looking for a literal \"<em>$n</em>\" in <code>$item</code>, or for what <code>$n</code> variable evaluates to?</p>\n\n<ul>\n<li><p>If you want to find the literal <em>$n</em> characters then there is nothing wrong with your code</p></li>\n<li><p>If you expect <code>$item</code> to contain the value stored in <code>$n</code> variable then allow it to be evaluated,</p>\n\n<pre><code>if (index($item, $n)  != -1)\n</code></pre>\n\n<p>If this is indeed the case but <code>$n</code> may also contain yet other escaped sequences or encodings which you need as literal characters (so to suppress their evaluation) then you may need to do a bit more, depending of what exactly may be in that variable.</p></li>\n</ul>\n\n<p>In case you do need to find characters <code>$</code> followed by <code>n</code> (what would explain a deliberate act of putting single quotes around a variable) you need to handle the warning.</p>\n\n<p>For the particular policy that is violated see <a href=\"http://search.cpan.org/dist/Perl-Critic/lib/Perl/Critic/Policy/ValuesAndExpressions/RequireInterpolationOfMetachars.pm\" rel=\"nofollow noreferrer\">Perl::Critic::Policy::ValuesAndExpressions</a></p>\n\n<blockquote>\n  <p>This policy warns you if you use single-quotes or q// with a string that has unescaped metacharacters that may need interpolation.</p>\n</blockquote>\n\n<p>To satisfy the policy you'd need to use double quotes and escape the <code>$</code>, for example <code>qq(\\$n)</code>. In my opinion this would change the fine original code segment into something strange to look at.</p>\n\n<p>If you end up wanting to simply silence the warning see documentation, in <a href=\"http://search.cpan.org/~petdance/Perl-Critic-1.130/lib/Perl/Critic.pm#BENDING_THE_RULES\" rel=\"nofollow noreferrer\">Bending The Rules</a></p>\n\n<p>A comment. The <em>tool</em> <a href=\"http://search.cpan.org/~petdance/Perl-Critic-1.130/lib/Perl/Critic.pm\" rel=\"nofollow noreferrer\">perlcritic</a> is useful but you have to use it right. It's a static code analyzer and it doesn't know what your program is doing, so to say; it can catch bad practices but can't tell you how to write programs.  Many of its \"policies\" are unsuitable for particular code. </p>\n\n<p>The <a href=\"http://shop.oreilly.com/product/9780596001735.do\" rel=\"nofollow noreferrer\">book that it is based on</a> says all this very nicely in its introduction.    Use sensibly. </p>\n\n<hr>\n\n<p>When I look at the <a href=\"https://stackoverflow.com/q/50091407/4653379\">question</a> where this comes from it appears that you are looking for index at which substrings were matched, so you need the content of <code>$n</code> variable, not literal \"<em>$n</em>\". Then <code>perlcritic</code> identified a bug in the code, good return for using it!</p>\n"}], "owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1525672572, "creation_date": 1525042178, "last_edit_date": 1525042394, "question_id": 50092032, "link": "https://stackoverflow.com/questions/50092032/perl-critic-policy-violation-in-checking-index-of-substring-in-a-string", "title": "Perl critic policy violation in checking index of substring in a string", "body": "<pre><code>for my $item (@array) {\n    if (index($item, '$n') != -1) {\n       print \"HELLO\\n\";\n    }\n} \n</code></pre>\n\n<p>Problem is: Perl critic gives below policy violation.</p>\n\n<blockquote>\n  <p>String may require interpolation at line 168, near '$item, '$n''. (Severity: 1)</p>\n</blockquote>\n\n<p>Please advise how do I fix this?</p>\n"}, {"tags": ["arrays", "regex", "perl", "split", "perl-critic"], "answers": [{"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 2, "last_activity_date": 1525292455, "last_edit_date": 1525292455, "creation_date": 1525037832, "answer_id": 50091551, "question_id": 50091407, "link": "https://stackoverflow.com/questions/50091407/perl-critic-error-on-splitting-string-into-array-using-regexp/50091551#50091551", "title": "Perl critic error on splitting string into array using regexp", "body": "<p>The first one is IMO a false positive, since <code>while</code> is acting as the conditional here - the <code>push @array, $1</code> won't get executed unless the regexp matched, which is what the policy wants (add <code>--verbose 11</code> to the <code>perlcritic</code> invocation to see the explanations). This is a case where I think it's safe to suppress the policy, as I show below.</p>\n\n<p>The second one is easy to fix, simply replace <code>$n =~ /.../xg</code> with <code>$n =~ m{...}xg</code>.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>push @array, $1  ## no critic (ProhibitCaptureWithoutTest)\n    while $n =~ m{ ... }xg;\n</code></pre>\n\n<p>That suppresses those two messages.</p>\n\n<p>As a side note, running <code>perlcritic</code> at <code>brutal</code> severity is IMO a little extreme, and it'll complain about a lot of other stuff in that snippet. Personally, when I use it, I run <code>perlcritic</code> at <code>harsh</code> (<code>-3</code>) with a few policies at customized levels.</p>\n\n<p><em>Edit:</em> As for your third <code>perlcritic</code> message, which you added to your post later, it looks like that's been answered in <a href=\"https://stackoverflow.com/q/50092032/9300627\">your other post</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "edited": false, "score": 0, "creation_date": 1525039356, "post_id": 50091571, "comment_id": 87199630, "body": "please check the edited question, when i loop around that array and look for string $n in the item of an array, perl critic gives one more error."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "edited": false, "score": 2, "creation_date": 1525042962, "post_id": 50091571, "comment_id": 87200376, "body": "Perl critic gives no errors. It just tells you <code>$n</code> looks like a variable, but won&#39;t be interpolated in single quotes. If your process needs to silent severity 1 warnings, add a <code>## no critic (ValuesAndExpressions::RequireInterpolationOfMetachars)</code> comment plus explanation why <code>$n</code> shouldn&#39;t be interpolated here."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "edited": false, "score": 2, "creation_date": 1525043017, "post_id": 50091571, "comment_id": 87200388, "body": "Also, next time, use a new question to ask a new question. You may link to the previous one if you think their relevance is important."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1525037999, "creation_date": 1525037999, "answer_id": 50091571, "question_id": 50091407, "link": "https://stackoverflow.com/questions/50091407/perl-critic-error-on-splitting-string-into-array-using-regexp/50091571#50091571", "title": "Perl critic error on splitting string into array using regexp", "body": "<p>Perl Critic doesn't give any errors. It gives policy violations.</p>\n\n<p>To fix the first one, change the loop from modifier to normal while loop and name the variable:</p>\n\n<pre><code>    while ($n =~ /\n        ...\n\n    /xg) {\n        my $match = $1;\n        push @array, $match;\n    }\n</code></pre>\n\n<p>To fix the second one, just change <code>/.../</code> to <code>m{...}</code>.</p>\n\n<p>In my opinion, it makes little sense to use policies you don't understand well. Sometimes, there might be very good reasons to break some of them;  blindly following Perl Critic (especially at more stern levels) doesn't bring you anything.</p>\n"}], "owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 50091571, "answer_count": 2, "score": -1, "last_activity_date": 1525292455, "creation_date": 1525036615, "last_edit_date": 1525060045, "question_id": 50091407, "link": "https://stackoverflow.com/questions/50091407/perl-critic-error-on-splitting-string-into-array-using-regexp", "title": "Perl critic error on splitting string into array using regexp", "body": "<pre><code>sub func {\n    my ($n) = @_;\n    return unless ($n);\n    my @array;\n    push @array, $1 while $n =~ /\n            ((?:\n              [^(),]+ |\n              ( \\(\n                (?: [^()]+ | (?2) )*\n              \\) )\n            )+)\n            (?: ,\\s* | $)\n            /xg;\n\n    return \\@array;\n    }\n\n    for my $item (@array) {\n        if (index($item, '$n') != -1) {\n           print \"HELLO\\n\";\n        }\n} \n</code></pre>\n\n<p>I have above regex to split some string into array. It works fine.</p>\n\n<p>Problem is :</p>\n\n<p>Perl critic gives below errors. Please advise how do i fix this.</p>\n\n<pre>\nCapture variable used outside conditional at line 150, \n    near 'push @array, $1 while $n =~ /'.  (Severity: 3)\n</pre>\n\n<pre>\nUse '{' and '}' to delimit multi-line regexps at line 150, \n    near 'push @input_expression, $1 while $n =~ /'.  (Severity: 1)\n</pre>\n\n<pre>\nString *may* require interpolation at line 168, \n    near '$item, '$n''.  (Severity: 1)\n</pre>\n"}, {"tags": ["r", "perl", "docker", "containers"], "comments": [{"owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "edited": false, "score": 3, "creation_date": 1525016869, "post_id": 50088448, "comment_id": 87192712, "body": "Have a look at alpine linux"}, {"owner": {"reputation": 341, "user_id": 4951980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7e3d14a650ca28c6163781baa4fad1?s=128&d=identicon&r=PG", "display_name": "Frank F&#246;rster", "link": "https://stackoverflow.com/users/4951980/frank-f%c3%b6rster"}, "edited": false, "score": 1, "creation_date": 1525024491, "post_id": 50088448, "comment_id": 87195253, "body": "It is always better to implement a solution, before optimizing it. Therefore, if you are comfortable with Ubuntu, go ahead and collect your required modules and install Perl, GNU R, and all requirements."}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 3, "creation_date": 1525026742, "post_id": 50088448, "comment_id": 87196008, "body": "A most basic R container -- such as <a href=\"https://hub.docker.com/_/r-base/\" rel=\"nofollow noreferrer\">r-base</a> which I co-maintain as part of the <a href=\"https://www.rocker-project.org/\" rel=\"nofollow noreferrer\">Rocker Project</a> -- is already 700mb give or take.  You then need to add some more Perl and R modules.  So Alpine is IMHO a distraction."}, {"owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1525103124, "post_id": 50088448, "comment_id": 87224913, "body": "@DirkEddelbuettel I didn&#39;t know that R is so big. In this situation it really doesn&#39;t make sense to perhaps save some 10s of MB and on the other side have Alpine potentially mess up what runs just fine on Debian"}, {"owner": {"reputation": 217, "user_id": 4126888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a735c1272ac626479eec6d6a4d7ec1b2?s=128&d=identicon&r=PG&f=1", "display_name": "aqua", "link": "https://stackoverflow.com/users/4126888/aqua"}, "edited": false, "score": 0, "creation_date": 1525106820, "post_id": 50088448, "comment_id": 87226828, "body": "Thanks for help, so I won&#39;t be able to leave out ubuntu."}], "owner": {"reputation": 217, "user_id": 4126888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a735c1272ac626479eec6d6a4d7ec1b2?s=128&d=identicon&r=PG&f=1", "display_name": "aqua", "link": "https://stackoverflow.com/users/4126888/aqua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1525026536, "creation_date": 1525016745, "last_edit_date": 1525026536, "question_id": 50088448, "link": "https://stackoverflow.com/questions/50088448/building-docker-container-with-perl-and-r-modules", "title": "Building docker container with perl and R modules", "body": "<p>I have bash, perl and R scripts that I would like to build docker container for; they are a small pipeline (the bash runs the others in correct order). The R and perl scripts require some modules. Besides using the pipeline, I would like to practice creating docker containers, as I am a beginner in the field of containers.</p>\n\n<p>However, I am stuck at the beginning, and am wondering if there are other options for base images aside from ubuntu. As far as I know, it takes about ~190Mb, and I feel it is a bit overkill for the task. Do you have any idea how could I build it to be more lightweight?</p>\n\n<p>Thank you for any suggestions!</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 453, "user_id": 5983598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d539e9b534f278c139ce01cadf7b70?s=128&d=identicon&r=PG", "display_name": "mr_ron", "link": "https://stackoverflow.com/users/5983598/mr-ron"}, "edited": false, "score": 0, "creation_date": 1525016689, "post_id": 50087911, "comment_id": 87192648, "body": "One reason &quot;Why?&quot; is regex backtracking: <a href=\"http://perldoc.perl.org/perlre.html#Backtracking\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlre.html#Backtracking</a>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525017780, "post_id": 50087984, "comment_id": 87193065, "body": "I don&#39;t understand what you mean by <i>&quot;anchor to the beginning and/or end of the string (or line, under <code>&#47;m</code>) with <code>^</code> resp. <code>$</code>&quot;</i> What is the abbreviation <code>resp.</code>?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525020427, "post_id": 50087984, "comment_id": 87193953, "body": "@Borodin I meant <a href=\"https://www.merriam-webster.com/dictionary/resp\" rel=\"nofollow noreferrer\">&quot;resp.&quot; = &quot;respectively&quot;</a>, although in English I guess &quot;... with <code>^</code> or <code>$</code>, respectively&quot; may be better; I may have used it too much <a href=\"https://dict.tu-chemnitz.de/dings.cgi?service=de-en&amp;query=bzw\" rel=\"nofollow noreferrer\">like</a> the German &quot;<a href=\"https://en.wiktionary.org/wiki/bzw.\" rel=\"nofollow noreferrer\">bzw.</a>&quot;."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 4, "last_activity_date": 1525015561, "last_edit_date": 1525015561, "creation_date": 1525014168, "answer_id": 50087984, "question_id": 50087911, "link": "https://stackoverflow.com/questions/50087911/how-1-works-in-perl-regular-expressions/50087984#50087984", "title": "How \\1 works in perl regular expressions?", "body": "<p>Try <code>print $1;</code> or <code>print $&amp;;</code> - <a href=\"https://regex101.com/r/qUjhJQ/1\" rel=\"nofollow noreferrer\"><code>/([a-zA-Z]+) is \\1/</code></a> matches the <code>a is a</code> substring of <code>anna is ann</code>. If you want to restrict the match, you might want to anchor to the beginning and/or end of the string (or line, under <a href=\"http://perldoc.perl.org/perlre.html#Modifiers\" rel=\"nofollow noreferrer\"><code>/m</code></a>) with <code>^</code> resp. <code>$</code>, or use the word boundary <a href=\"http://perldoc.perl.org/perlrebackslash.html#%5Cb%7B%7D,-%5Cb,-%5CB%7B%7D,-%5CB\" rel=\"nofollow noreferrer\"><code>\\b</code></a> if you want to match within a longer string. So:</p>\n\n<p><a href=\"https://regex101.com/r/j2axE3/1\" rel=\"nofollow noreferrer\"><code>/^([a-zA-Z]+) is \\1$/</code></a> will match <code>\"anna is anna\"</code> but not <code>\"anna is ann\"</code> or <code>\"anna is anna \"</code>.</p>\n\n<p><a href=\"https://regex101.com/r/7XKrru/1\" rel=\"nofollow noreferrer\"><code>/\\b([a-zA-Z]+) is \\1\\b/</code></a> will match <code>\"x anna is anna y\"</code> and <code>\"sue-ann is ann-marie\"</code> but not <code>\"anna is ann\"</code>, <code>\"anna is anne\"</code>, or <code>\"anna is annabelle\"</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1525055023, "last_edit_date": 1525055023, "creation_date": 1525035917, "answer_id": 50091311, "question_id": 50087911, "link": "https://stackoverflow.com/questions/50087911/how-1-works-in-perl-regular-expressions/50091311#50091311", "title": "How \\1 works in perl regular expressions?", "body": "<p>It matches 6 chars starting at pos 3 (<code>a is a</code>). Perhaps you should have used</p>\n\n<pre><code>/^([a-zA-Z]+) is \\1\\z/\n</code></pre>\n\n<hr>\n\n<ol>\n<li>Starting a pos 0.\n\n<ol>\n<li><code>[a-zA-Z]+</code> matches 4 chars at pos 0.\n\n<ol>\n<li><code> is </code> matches 4 chars at pos 4.</li>\n<li><code>\\1</code> doesn't match at pos 8: Backtrack.</li>\n</ol></li>\n<li><code>[a-zA-Z]+</code> matches 3 chars at pos 0.\n\n<ol>\n<li><code> is </code> doesn't match at pos 3: Backtrack.</li>\n</ol></li>\n<li><code>[a-zA-Z]+</code> matches 2 chars at pos 0.\n\n<ol>\n<li><code> is </code> doesn't match at pos 2: Backtrack.</li>\n</ol></li>\n<li><code>[a-zA-Z]+</code> matches 1 chars at pos 0.\n\n<ol>\n<li><code> is </code> doesn't match at pos 1: Backtrack.</li>\n</ol></li>\n</ol></li>\n<li>Starting a pos 1.\n\n<ol>\n<li><code>[a-zA-Z]+</code> matches 3 chars at pos 1.\n\n<ol>\n<li><code> is </code> matches 4 chars at pos 4.</li>\n<li><code>\\1</code> doesn't match at pos 8: Backtrack.</li>\n</ol></li>\n<li><code>[a-zA-Z]+</code> matches 2 chars at pos 1.\n\n<ol>\n<li><code> is </code> doesn't match at pos 3: Backtrack.</li>\n</ol></li>\n<li><code>[a-zA-Z]+</code> matches 1 chars at pos 1.\n\n<ol>\n<li><code> is </code> doesn't match at pos 2: Backtrack.</li>\n</ol></li>\n</ol></li>\n<li>Starting a pos 2.\n\n<ol>\n<li><code>[a-zA-Z]+</code> matches 2 chars at pos 2.\n\n<ol>\n<li><code> is </code> matches 4 chars at pos 4.</li>\n<li><code>\\1</code> doesn't match at pos 8: Backtrack.</li>\n</ol></li>\n<li><code>[a-zA-Z]+</code> matches 1 chars at pos 2.\n\n<ol>\n<li><code> is </code> doesn't match at pos 3: Backtrack.</li>\n</ol></li>\n</ol></li>\n<li>Starting a pos 3.\n\n<ol>\n<li><code>[a-zA-Z]+</code> matches 1 char at pos 3.\n\n<ol>\n<li><code> is </code> matches 4 chars at pos 4.</li>\n<li><code>\\1</code> matches 1 char at pos 8.</li>\n<li>Match! (6 chars starting at pos 3)</li>\n</ol></li>\n</ol></li>\n</ol>\n"}], "owner": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 50087984, "answer_count": 2, "score": 3, "last_activity_date": 1525055023, "creation_date": 1525013756, "question_id": 50087911, "link": "https://stackoverflow.com/questions/50087911/how-1-works-in-perl-regular-expressions", "title": "How \\1 works in perl regular expressions?", "body": "<p>I'm trying to match a string like (something is something).</p>\n\n<pre><code>$_ = \"anna is ann\";\nif (/([a-zA-Z]+) is \\1/) {\n    print \"matched\\n\";\n}\n</code></pre>\n\n<p>I expected this not to work, but it works. Why?</p>\n"}, {"tags": ["perl", "subroutine", "plack", "psgi"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1525002229, "post_id": 50085988, "comment_id": 87187958, "body": "You shouldn&#39;t nest one <code>sub</code> declaration inside another, that&#39;s usually wrong. Also, <code>my $number</code> is declared in the <code>sub</code>, so it will disappear every time the <code>sub</code> finishes executing. But more importantly: What do you want to count? Is it a global counter, a per-session value, etc.? Also, how are you running your app? If the server is running multiple copies of the app (e.g. threads/fork), and you want the counter to be global, that needs to be implemented differently (e.g. a database or other global store)."}, {"owner": {"reputation": 542, "user_id": 5195778, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/76625f2105397904d15891d665a9a2fc?s=128&d=identicon&r=PG&f=1", "display_name": "JOhnlw009a", "link": "https://stackoverflow.com/users/5195778/johnlw009a"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1525002801, "post_id": 50085988, "comment_id": 87188149, "body": "Thanks so far. Do I have to pass the variables instead like $number = &amp;count_number(%args) - that would complicate things up. Yesterday I already thought about multiprocessing environments, also including a load balancer. What would be a good internal (just having one external user cookie, like session id) storage solution for multiple threads and servers?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1525004082, "post_id": 50085988, "comment_id": 87188514, "body": "I think at this point all I can say is: it depends on what you need, which you haven&#39;t really described fully. I&#39;ve used <a href=\"https://metacpan.org/release/Starman\" rel=\"nofollow noreferrer\">Starman</a>, and heard good things about <a href=\"https://www.nginx.com/\" rel=\"nofollow noreferrer\">nginx</a>+<a href=\"http://uwsgi-docs.readthedocs.io/en/latest/Perl.html\" rel=\"nofollow noreferrer\">uWSGI</a>. Mojolicious supports <a href=\"https://mojolicious.org/perldoc/Mojolicious/Guides/Tutorial#Sessions\" rel=\"nofollow noreferrer\">sessions</a>. <a href=\"https://stackoverflow.com/a/9411254\">See also</a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1525004297, "post_id": 50085988, "comment_id": 87188586, "body": "@hauk: Ordinarily, <code>$number</code> would be prevented from disappearing by the way Perl&#39;s reference counting works. Even after subroutine <code>$app</code> exits, <code>$number</code> still has a reference from within <code>count_number</code> so it is not removed. This isn&#39;t working here because subroutine <code>count_number</code> is created at compile time when there is no <code>$number</code> variable to refer to."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525004488, "post_id": 50085988, "comment_id": 87188647, "body": "@Borodin Yes, that&#39;s that good point, thanks for the correction. Although none of this really helps the OP yet if the Plack app is being run in a multithreaded or forked server :-)"}, {"owner": {"reputation": 542, "user_id": 5195778, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/76625f2105397904d15891d665a9a2fc?s=128&d=identicon&r=PG&f=1", "display_name": "JOhnlw009a", "link": "https://stackoverflow.com/users/5195778/johnlw009a"}, "edited": false, "score": 0, "creation_date": 1525005099, "post_id": 50085988, "comment_id": 87188820, "body": "Yes, I am using uWSGI and nginx. What would be a good way storing data when using multithreading? I don&#39;t want to select and update a session table every time though, reflecting on a high traffic website."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525005274, "post_id": 50085988, "comment_id": 87188883, "body": "@JOhn: Does my answer below not help at all?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1525005463, "post_id": 50085988, "comment_id": 87188943, "body": "Above, I gave you <a href=\"https://stackoverflow.com/a/9411254\">this link</a>, which links to <a href=\"https://metacpan.org/pod/Cache::FastMmap\" rel=\"nofollow noreferrer\"><code>Cache::FastMmap</code></a>, whose documentation includes several other similar modules."}, {"owner": {"reputation": 542, "user_id": 5195778, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/76625f2105397904d15891d665a9a2fc?s=128&d=identicon&r=PG&f=1", "display_name": "JOhnlw009a", "link": "https://stackoverflow.com/users/5195778/johnlw009a"}, "edited": false, "score": 0, "creation_date": 1525005584, "post_id": 50085988, "comment_id": 87188975, "body": "Didn&#39;t see it. Thanks a lot!"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1525005421, "last_edit_date": 1525005421, "creation_date": 1525003902, "answer_id": 50086430, "question_id": 50085988, "link": "https://stackoverflow.com/questions/50085988/calling-subroutines-in-perl-plack-return-nothing/50086430#50086430", "title": "calling subroutines in perl plack return nothing", "body": "<p>If I fix the quotes on the string in the <code>return</code> statement (you are missing a closing double-quote) then I get the warning</p>\n\n<blockquote>\n  <p>Variable \"$number\" is not available at source_file.pl line 7.</p>\n</blockquote>\n\n<p>The reason is that lexical values <code>$app</code> and <code>$number</code> are defined at run time, whereas the subroutine <code>count_number</code> is defined much earlier during compilation</p>\n\n<p>The solution is to defer definition of <code>count_number</code> to run time by making it an <em>anonymous</em> subroutine instead. The call <code>$count_number-&gt;()</code> also needs to be moved to <em>after</em> the definition</p>\n\n<pre><code>my $app = sub {\n\n    my $number = 10;\n\n    my $count_number = sub {\n        $number +=10;\n    };\n\n    $count_number-&gt;();\n\n    return [\n        '200',\n        [ 'Content-Type' =&gt; 'application/json' ],\n        [ \"{\\\"number\\\":$number}\" ]\n    ];     \n};\n\n\nuse Data::Dumper;\nprint Dumper $app-&gt;();\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>$VAR1 = [\n            '200',\n            [\n                'Content-Type',\n                'application/json'\n            ],\n            [\n                '{\"number\":20}'\n            ]\n        ];\n</code></pre>\n\n<p>There is a related warning</p>\n\n<blockquote>\n  <p>Variable \"$number\" will not stay shared</p>\n</blockquote>\n\n<p>with a similar solution. You can read about both in\n<a href=\"https://perldoc.perl.org/perldiag.html\" rel=\"nofollow noreferrer\"><code>perldoc perldiag</code></a>. The messages are listed and described in alphabetical order</p>\n"}, {"comments": [{"owner": {"reputation": 542, "user_id": 5195778, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/76625f2105397904d15891d665a9a2fc?s=128&d=identicon&r=PG&f=1", "display_name": "JOhnlw009a", "link": "https://stackoverflow.com/users/5195778/johnlw009a"}, "edited": false, "score": 0, "creation_date": 1525005541, "post_id": 50086434, "comment_id": 87188962, "body": "Clear data flow is totally appreciated. When when having the same code fragment 10 times in the code, it would be easier to have it just once in order to update parts of the code. I&#39;ll try your code now."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 0, "last_activity_date": 1525003918, "creation_date": 1525003918, "answer_id": 50086434, "question_id": 50085988, "link": "https://stackoverflow.com/questions/50085988/calling-subroutines-in-perl-plack-return-nothing/50086434#50086434", "title": "calling subroutines in perl plack return nothing", "body": "<p>The <code>my</code> operator has two effects:</p>\n\n<ul>\n<li>at compile time, it introduces a scalar variable.</li>\n<li>at run time, it creates a fresh scalar object for that variable.</li>\n</ul>\n\n<p>Essentially, these two scalars are different variables, although they have the same name.</p>\n\n<p>The <code>sub name { ... }</code> operator only has a compile time effect. It assigns the subroutine at compile time to the given name. So when the sub is compiled, it sees the original compile-time variable, not the run-time variable which is created much later.</p>\n\n<p>Therefore, you should not nest named subs. In fact, if you <code>use warnings</code> you get a warning about this: \u201cVariable \"$number\" will not stay shared\u201d.</p>\n\n<p>You have two options:</p>\n\n<ul>\n<li><p>You can use a closure that sees the runtime variable. This uses anonymous subroutines:</p>\n\n<pre><code>...\nmy $number = 10;\nmy $count_number = sub {\n  $number += 10;\n};\n\n$count_number-&gt;();\n\n...\n</code></pre></li>\n<li><p>Or, you pass the values as explicit parameters to a separate subroutine. Yes, that does complicate things a bit, but it also keeps separate things separate. Clear data flow is a characteristic of good design.</p></li>\n</ul>\n"}], "owner": {"reputation": 542, "user_id": 5195778, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/76625f2105397904d15891d665a9a2fc?s=128&d=identicon&r=PG&f=1", "display_name": "JOhnlw009a", "link": "https://stackoverflow.com/users/5195778/johnlw009a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 50086430, "answer_count": 2, "score": 0, "last_activity_date": 1525005421, "creation_date": 1525000763, "question_id": 50085988, "link": "https://stackoverflow.com/questions/50085988/calling-subroutines-in-perl-plack-return-nothing", "title": "calling subroutines in perl plack return nothing", "body": "<p>I am new to perl plack/psgi. I want to access a subroutine within the perl plack/psgi loop, but it looks like if the subroutine is not being executed. Every parent variable like $number should being passed automatically like when writing a regular perl script. Do I miss something here, is that possible?</p>\n\n<pre><code>..\nmy $app = sub {\n\n  my $number = 10;\n\n  &amp;count_number;\n  sub count_number {\n    $number +=10;\n  }\n\n\n  return ['200',[  'Content-Type' =&gt; 'application/json' ],\n  [ \"{\\\"number\\\":$number} ]];     \n\n}\n.. \n</code></pre>\n\n<p>10 is being returned instead of 20 :(</p>\n"}, {"tags": ["perl", "line", "readfile"], "comments": [{"owner": {"reputation": 3719, "user_id": 2550406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GhBMm.png?s=128&g=1", "display_name": "lucidbrot", "link": "https://stackoverflow.com/users/2550406/lucidbrot"}, "edited": false, "score": 0, "creation_date": 1524998495, "post_id": 50085667, "comment_id": 87186996, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4505381/perl-read-line-by-line\">Perl read line by line</a>"}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 2, "creation_date": 1524998522, "post_id": 50085667, "comment_id": 87187001, "body": "What is the purpose of the regex there? What is <code>$line1</code>, where does it get a value from? What is up with your indentation?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 7, "creation_date": 1525002426, "post_id": 50085667, "comment_id": 87188017, "body": "<code>while(&lt;file_E&gt;)</code> will read each line into <code>$_</code>, but you are printing <code>$line1</code>. I suggest you <code>use warnings; use strict;</code> and check <code>open</code> for errors. Please read <a href=\"http://perldoc.perl.org/perlintro.html\" rel=\"nofollow noreferrer\">perlintro</a> - it will show you the basics that you need."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 2, "creation_date": 1525003418, "post_id": 50085667, "comment_id": 87188337, "body": "It is reading all lines; you&#39;re just not doing anything with them."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1525025665, "post_id": 50089592, "comment_id": 87195627, "body": "Using two-argument open is a bad idea. Better: <code>open my $input_fh_e, &quot;&lt;&quot;, $file_E or die ...</code>"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1525063793, "post_id": 50089592, "comment_id": 87204261, "body": "Thanks @melpomene, not sure how I allowed myself a 2-arg open. Fixed."}], "tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": false, "score": 1, "last_activity_date": 1525063762, "last_edit_date": 1525063762, "creation_date": 1525024197, "answer_id": 50089592, "question_id": 50085667, "link": "https://stackoverflow.com/questions/50085667/reading-a-file-line-by-line-in-perl/50089592#50089592", "title": "Reading a file line by line in Perl", "body": "<p>Let's start by looking at your code.</p>\n\n<pre><code>open(file_E, $file_E);\n\nwhile ( &lt;file_E&gt; ) {\n    /([^\\n]*)/;\n    print $line1;\n}\n\nclose($file_E);\n</code></pre>\n\n<p>On the first line you open a file named in <code>$file_E</code> using the bareword filehandle <code>file_E</code>. This should work so long as the file successfully opens. It would be better to also check the success of this operation one of two ways: Either put <code>use autodie;</code> at the top of your script (but then risk applying its semantics in places where your code is incompatible with this level of error handling), or change your <code>open</code> to look like this:</p>\n\n<pre><code>open(file_E, $file_E) or die \"Failed to open $file_E: $!\\n\";\n</code></pre>\n\n<p>Now if you fail to open the file you will get an error message that will help track down the problem.</p>\n\n<p>Next lets look at the <code>while</code> loop, because it's here where you have an issue that is causing the bug you are experiencing.  On the first line of the <code>while</code> loop you have this:</p>\n\n<pre><code>while ( &lt;file_E&gt; ) {\n</code></pre>\n\n<p>By consulting <a href=\"http://perldoc.perl.org/perlsyn.html#Loop-Control\" rel=\"nofollow noreferrer\"><code>perldoc perlsyn</code></a> you will see that line is special-cased to actually do this:</p>\n\n<pre><code>while (defined($_ = &lt;file_E&gt;)) {\n</code></pre>\n\n<p>So your code is implicitly assigning each line to <code>$_</code> on successive iterations.  Also by consulting <a href=\"http://perldoc.perl.org/perlop.html#Binding-Operators\" rel=\"nofollow noreferrer\"><code>perldoc perlop</code></a> you'll find that when the match operator (<code>/.../</code> or <code>m/.../</code>) is invoked without binding the match explicitly using <code>=~</code>, the match will bind against <code>$_</code>.  Still then, so far so good.  However, you are not actually doing anything useful with the match.  The match operator will return Boolean truth / falsehood for whether or not the match succeeded.  And because your pattern contains capturing parenthesis, it will capture something into the capture variable <code>$1</code>.  But you are never testing for match success, nor are you ever referring to <code>$1</code> again.</p>\n\n<p>On the line that follows, you do this: <code>print $line1</code>.  Where, in your code, is <code>$line1</code> being assigned a value?  Because it is never being assigned a value in what you've shown us.</p>\n\n<p>I can only guess that your intent is to iterate over the lines of the file, capture the line but without the trailing newline, and then print it.  It seems that you wish to print it without any newlines, so that all of the input file is printed as a single line of output.</p>\n\n<pre><code>open my $input_fh_e, '&lt;', $file_E or die \"Failed to open $file_E: $!\\n\";\n\nwhile(my $line = &lt;$input_fh_e&gt;) {\n    chomp $line;\n    print $line;\n}\n\nclose $input_fh_e or die \"Failed to close $file_E: $!\\n\";\n</code></pre>\n\n<p>No need to capture anything -- if all that the capture is doing is just grabbing everything up to the newline, you can simply strip off the newline with <code>chomp</code> to begin with.</p>\n\n<p>In my example I used a lexical filehandle (a file handle that is lexically scoped, declared with <code>my</code>). This is generally a better practice in modern Perl as it avoids using a bareword, avoids possible namespace collisions, and assures that the handle will get closed as soon as the lexical scope closes.</p>\n\n<p>I also used the 'three arg' version of <code>open</code>, which is safer because it eliminates the potential for <code>$file_E</code> to be used to open a pipe or do some other nefarious or simply unintended shell manipulation.</p>\n\n<p>I suggest also starting your script with <code>use strict;</code>, because had you done so, you would have gotten an error message at compiletime telling you that <code>$line1</code> was never declared.  Also start your script with <code>use warnings</code>, so that you would get a warning when you try to print <code>$line1</code> before assigning a value to it.</p>\n\n<p>Most of the issues in your code will be discussed in <a href=\"http://perldoc.perl.org/perlintro.html\" rel=\"nofollow noreferrer\"><code>perldoc perlintro</code></a>, which you can arrive at from your command line simply by typing <code>perldoc perlintro</code>, assuming you have Perl installed.  It typically takes 20-40 minutes to read through <code>perlintro</code>. If ever there were a document that should constitute required reading before getting started writing Perl code, that reading would probably include <code>perlintro</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 1540909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9cf395b423153786185c2d1cb7542e?s=128&d=identicon&r=PG", "display_name": "yuen23", "link": "https://stackoverflow.com/users/1540909/yuen23"}, "is_accepted": false, "score": -1, "last_activity_date": 1525052136, "creation_date": 1525052136, "answer_id": 50092945, "question_id": 50085667, "link": "https://stackoverflow.com/questions/50085667/reading-a-file-line-by-line-in-perl/50092945#50092945", "title": "Reading a file line by line in Perl", "body": "<p>Another alternative, note that $_ will include newline so you will need to chomp it if you don't want the newline in $line:</p>\n\n<pre><code>open(file_E, $file_E);\n\nwhile ( &lt;file_E&gt; ) {\n    my $line = $_;\n    print $line;\n}\n\nclose($file_E);\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 9657089, "user_type": "registered", "profile_image": "https://graph.facebook.com/1637368176313030/picture?type=large", "display_name": "Ernesta Petraityt\u0117", "link": "https://stackoverflow.com/users/9657089/ernesta-petraityt%c4%97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4698, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1525063762, "creation_date": 1524998321, "last_edit_date": 1592644375, "question_id": 50085667, "link": "https://stackoverflow.com/questions/50085667/reading-a-file-line-by-line-in-perl", "title": "Reading a file line by line in Perl", "body": "<p>I want to read a file by one line, but it's reading just the first line. How to read all lines?</p>\n<h3>My code:</h3>\n<pre><code>open(file_E, $file_E);\n\nwhile ( &lt;file_E&gt; ) {\n    /([^\\n]*)/;\n    print $line1;\n}\n\nclose($file_E);\n</code></pre>\n"}, {"tags": ["android", "shell", "perl", "awk", "adb"], "comments": [{"owner": {"reputation": 26831, "user_id": 1778421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HIUgI.png?s=128&g=1", "display_name": "Alex P.", "link": "https://stackoverflow.com/users/1778421/alex-p"}, "edited": false, "score": 0, "creation_date": 1525008229, "post_id": 50083163, "comment_id": 87189818, "body": "the fact that some tool is not available to you is not the reason to put it in the title and list it as a tag."}], "answers": [{"comments": [{"owner": {"reputation": 26831, "user_id": 1778421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HIUgI.png?s=128&g=1", "display_name": "Alex P.", "link": "https://stackoverflow.com/users/1778421/alex-p"}, "edited": false, "score": 1, "creation_date": 1525008604, "post_id": 50084705, "comment_id": 87189943, "body": "OP can not tell a part consecutive spaces from tabs. What he wanted was <code>grep wlan &#47;proc&#47;net&#47;dev | tr -s &#39; &#39; | cut -d&#39; &#39; -f3</code>."}, {"owner": {"reputation": 2010, "user_id": 6020610, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/hw0hk.jpg?s=128&g=1", "display_name": "Amarjit Dhillon", "link": "https://stackoverflow.com/users/6020610/amarjit-dhillon"}, "edited": false, "score": 0, "creation_date": 1525014768, "post_id": 50084705, "comment_id": 87191971, "body": "@jjmerelo : the output of <code>cat &#47;proc&#47;net&#47;dev | grep wlan   | cut -f3 </code> is same as that of <code>cat &#47;proc&#47;net&#47;dev |grep wlan </code>"}, {"owner": {"reputation": 2010, "user_id": 6020610, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/hw0hk.jpg?s=128&g=1", "display_name": "Amarjit Dhillon", "link": "https://stackoverflow.com/users/6020610/amarjit-dhillon"}, "reply_to_user": {"reputation": 26831, "user_id": 1778421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HIUgI.png?s=128&g=1", "display_name": "Alex P.", "link": "https://stackoverflow.com/users/1778421/alex-p"}, "edited": false, "score": 0, "creation_date": 1525014956, "post_id": 50084705, "comment_id": 87192025, "body": "@AlexP. : you are right, your script worked, you can provide it as an answer.  Can you please tell me how can I select both <code>-f3</code> and <code>-f11</code>"}, {"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "reply_to_user": {"reputation": 26831, "user_id": 1778421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HIUgI.png?s=128&g=1", "display_name": "Alex P.", "link": "https://stackoverflow.com/users/1778421/alex-p"}, "edited": false, "score": 0, "creation_date": 1525018014, "post_id": 50084705, "comment_id": 87193150, "body": "@AlexP. The OP mentions &#39;\\t&#39; in one of his/her examples, and talks about &quot;cut the tab&quot;. Your code is OK as  long as it&#39;s only spaces and not tabs."}, {"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "reply_to_user": {"reputation": 2010, "user_id": 6020610, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/hw0hk.jpg?s=128&g=1", "display_name": "Amarjit Dhillon", "link": "https://stackoverflow.com/users/6020610/amarjit-dhillon"}, "edited": false, "score": 0, "creation_date": 1525018052, "post_id": 50084705, "comment_id": 87193167, "body": "@AmarjitSingh That would happen if, as said above, it&#39;s spaces and not tabs. I just thought it was tabs as mentioned there."}], "tags": [], "owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "is_accepted": false, "score": -1, "last_activity_date": 1524990513, "creation_date": 1524990513, "answer_id": 50084705, "question_id": 50083163, "link": "https://stackoverflow.com/questions/50083163/select-tabbed-data-in-adb-shell-without-using-awk-as-using-awk-gives-awk-not-f/50084705#50084705", "title": "Select tabbed data in adb shell without using awk, as using awk gives `awk not found error`", "body": "<p>I guess one of the solutions would be to try and install awk and/or perl, but I guess that can't be done for some reason. Anyway, <a href=\"https://www.computerhope.com/unix/ucut.htm\" rel=\"nofollow noreferrer\">tab is the default separator character in <code>cut</code></a>. So this should work</p>\n\n<pre><code>cat /proc/net/dev | grep wlan   | cut -f3\n</code></pre>\n"}], "owner": {"reputation": 2010, "user_id": 6020610, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/hw0hk.jpg?s=128&g=1", "display_name": "Amarjit Dhillon", "link": "https://stackoverflow.com/users/6020610/amarjit-dhillon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 573, "favorite_count": 0, "closed_date": 1525008022, "answer_count": 1, "score": 0, "last_activity_date": 1524990513, "creation_date": 1524973272, "last_edit_date": 1524979618, "question_id": 50083163, "link": "https://stackoverflow.com/questions/50083163/select-tabbed-data-in-adb-shell-without-using-awk-as-using-awk-gives-awk-not-f", "closed_reason": "Duplicate", "title": "Select tabbed data in adb shell without using awk, as using awk gives `awk not found error`", "body": "<p>I can get Receive and Transmit bytes for an android device as follows</p>\n\n<pre><code>130|sailfish:/ $ cat /proc/net/dev\nInter-|   Receive                                                |  Transmit\n face |bytes    packets errs drop fifo frame compressed multicast|bytes    packets errs drop fifo colls carrier compressed\nrmnet_ipa0:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0\nr_rmnet_data7:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0\nr_rmnet_data4:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0\nrmnet_data1:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0\nrmnet_data3:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0\n wlan0: 6720980481 66560024    0    0    0     0          0         0 355572166 1127583    0    2    0     0       0          0\nrmnet_data5:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0\nr_rmnet_data1:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0\n</code></pre>\n\n<p>Further, I am trying to filter the received and transmit bytes for an Android device using</p>\n\n<p><code>cat /proc/net/dev |grep wlan | awk {'print $1'}</code></p>\n\n<p>but I get the following error</p>\n\n<pre><code>/system/bin/sh: awk: not found\n</code></pre>\n\n<p>Any alternative way to select the appropriate columns?</p>\n\n<hr>\n\n<p>I tried Perl as well as</p>\n\n<pre><code>cat /proc/net/dev | grep wlan   | perl -lane 'print $F[1]' \n</code></pre>\n\n<p>which gave </p>\n\n<pre><code>/system/bin/sh: perl: not found\n</code></pre>\n\n<hr>\n\n<p>using cut as</p>\n\n<pre><code>cat /proc/net/dev | grep wlan   | cut  -d' ' -f3  \n</code></pre>\n\n<p>gives</p>\n\n<pre><code>6720980481\n</code></pre>\n\n<p>but the issues is that I want to cut the tab instead of space as I want to select other tabs as well</p>\n\n<p>I tried</p>\n\n<pre><code>cat /proc/net/dev | grep wlan   | cut  -d'\\t' -f3   \n</code></pre>\n\n<p>and </p>\n\n<pre><code>cat /proc/net/dev | grep wlan   | cut  -d'    ' -f3 \n</code></pre>\n\n<p>but it gives</p>\n\n<pre><code>cut: the delimiter must be a single character\n</code></pre>\n"}, {"tags": ["perl", "ssh", "hostname"], "comments": [{"owner": {"reputation": 1421, "user_id": 9672954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/50jXz.jpg?s=128&g=1", "display_name": "runwuf", "link": "https://stackoverflow.com/users/9672954/runwuf"}, "edited": false, "score": 0, "creation_date": 1524967185, "post_id": 50082687, "comment_id": 87181273, "body": "Are you on the same network as the work linux box? or using vpn? or your work machine is exposed to the internet? when you only use the hostname you are assuming your current box is on the same domain.  Make sure you are in the network that is reachable to your work linux box, you might want to use FQDN or just use IP.  You can find your IP on the work linux box with <code>hostname -i</code> or <code>ip a</code>"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 3, "creation_date": 1524972515, "post_id": 50082687, "comment_id": 87182007, "body": "Does <code>ssh myusername-lnx</code> from the command line work?"}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 4, "last_activity_date": 1524972758, "creation_date": 1524972758, "answer_id": 50083127, "question_id": 50082687, "link": "https://stackoverflow.com/questions/50082687/ssh2-connecthost-how-can-i-find-what-host-should-be/50083127#50083127", "title": "$ssh2-&gt; connect(&#39;host&#39;) how can I find what host should be?", "body": "<p>According to <a href=\"https://metacpan.org/pod/Net::SSH2\" rel=\"nofollow noreferrer\">the documentation for Net::SSH2</a>, connect does take a hostname. You can get a better error message like so:</p>\n\n<pre><code>$ssh2-&gt;connect('myusername-lnx') or $ssh2-&gt;die_with_error;\n</code></pre>\n\n<blockquote>\n  <p><em>I'm trying to connect to my work linux box...</em></p>\n</blockquote>\n\n<p>Try a normal <code>ssh myusername-lnx</code>. If that doesn't work then Net::SSH2 isn't going to work either.</p>\n\n<p>If you're not at work, it's likely your local machine doesn't know what host <code>myusername-lnx</code> is. <code>hostname</code> returns what the machine calls itself, but that isn't necessarily what anything else knows it as. The hostname probably needs to be fully qualified, that is it needs the domain part like <code>myusername-lnx.somehost.com</code>. It's kind of like asking for \"Janice\". There might be only one \"Janice\" at work, but outside of work there's lots of Janices, so you'll have to be more specific.</p>\n\n<p>It's even possible (in fact, probable) your work machine cannot be contacted from outside the work network. You might need to use a <a href=\"https://en.wikipedia.org/wiki/Virtual_private_network\" rel=\"nofollow noreferrer\">VPN</a> to get into the network.</p>\n\n<p>You'll need to figure out what hostname or IP address to use. Unfortunately we can't tell you that. You should ask your network administrator at work how you access a work machine outside of work.</p>\n"}], "owner": {"reputation": 1, "user_id": 6243169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e054227feb66553d5a172d20bbc8d2d1?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/6243169/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524972758, "creation_date": 1524966823, "question_id": 50082687, "link": "https://stackoverflow.com/questions/50082687/ssh2-connecthost-how-can-i-find-what-host-should-be", "title": "$ssh2-&gt; connect(&#39;host&#39;) how can I find what host should be?", "body": "<p>I'm trying to connect to my work linux box with perl SSH2 using this code I found off the internet.  When I run it it returns unable to connect to host.  Can somebody tell me how to find the host to put into the ssh2 -> connect.  I assume myusername-lnx is correct because that is what I get when I run >hostname on my linux box.  Should I be using the output form >hostname or something else.  If the output from hostname is the correct thing to be using any other suggestions on what I might be doing wrong that would cause the ssh2->connect not to work.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse Net::SSH2;\n\nmy $ssh2 = Net::SSH2-&gt;new();\n\n$ssh2-&gt;connect('myusername-lnx') or die \"Unable to connect Host \\n\";\n$ssh2-&gt;auth_password('my_username','my_password') or die \"Unable to login \\n\";\n</code></pre>\n"}, {"tags": ["regex", "perl", "regex-lookarounds", "parentheses", "brackets"], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524978868, "post_id": 50083473, "comment_id": 87182939, "body": "@W.Flores You removed the inner possessive quantifier. This gives me bad vibes."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9485065"}, "edited": false, "score": 0, "creation_date": 1524979117, "post_id": 50083473, "comment_id": 87182984, "body": "changed to reflect your original answer (with the two + signs instead of one). However, this goes beyond my knowledge, i just picked the more greedy one. How this could be bad?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9485065"}, "edited": false, "score": 0, "creation_date": 1524979164, "post_id": 50083473, "comment_id": 87182990, "body": "Yes, that looks very nice :) Covers my cases and even more! Thanks. I will put this as the accepted solution since it does what i asked.   <code>(\\[(?&gt;[^\\[\\]\\\\]++|\\\\.|(?1))*+\\])</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9485065"}, "edited": false, "score": 0, "creation_date": 1524982332, "post_id": 50083473, "comment_id": 87183475, "body": "It should match, since what it matters is that the contents inside [ ] are captured. To this is ok to match. In fact, the idea is not to &quot;avoid&quot; matching but do not consider escaped brackets to do the balance.  So <code>[\\\\]</code> is ok.   <code>[a \\\\ ]</code> should match the whole thing, as <code>[a \\[ ]</code>. Both of the solutions works, except for that particular case when <code>[\\\\]</code> is involved  I wasn&#39;t specific about <code>[\\\\]</code> in particular but indeed i am happy to have both regexps to compare, since i can think of a use case for that specific use :)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524982741, "post_id": 50083473, "comment_id": 87183538, "body": "@W.Flores It&#39;s not just <code>[\\\\]</code> in particular. The general issue is whether it should be possible to escape the escape character (and I don&#39;t see why not; it wouldn&#39;t be much of an escape character otherwise)."}, {"owner": {"reputation": 1641, "user_id": 410484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SrHst.jpg?s=128&g=1", "display_name": "jaytea", "link": "https://stackoverflow.com/users/410484/jaytea"}, "edited": false, "score": 1, "creation_date": 1524991462, "post_id": 50083473, "comment_id": 87185317, "body": "@melpomene Just to put your mind at ease :) The inner possessive quantifier serves no purpose because backtracking cannot occur due to the atomic nature of the outer group. This too is redundant due to the possessive nature of the group&#39;s quantifier. So you can safely use <code>(\\[ (?: [^\\[\\]\\\\]+ | \\\\. | (?1) )*+ \\] )</code> with no worries."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 1, "last_activity_date": 1524977247, "creation_date": 1524977247, "answer_id": 50083473, "question_id": 50082425, "link": "https://stackoverflow.com/questions/50082425/need-to-escape-unbalanced-brackets-in-my-perl-regular-expression/50083473#50083473", "title": "Need to escape unbalanced brackets in my perl regular expression", "body": "<p>Here's a possible solution:</p>\n\n<pre><code>m{ ( \\[ (?&gt; [^\\[\\]\\\\]++ | \\\\. | (?1) )*+ \\] ) }xs\n</code></pre>\n\n<p>Changes:</p>\n\n<ul>\n<li>added <code>x</code> flag to make it more readable</li>\n<li>made all quantifiers possessive because why not (otherwise I would feel uneasy about the nested quantifiers (<code>+</code> directly inside of a <code>*</code>))</li>\n<li>added <code>\\</code> to the first character class to prevent it from being matched (like <code>[</code> and <code>]</code>, <code>\\</code> has a special meaning to our regex)</li>\n<li>added a branch for escaped characters (<code>\\</code> followed by any character is matched but otherwise ignored)</li>\n</ul>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9485065"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 1, "accepted_answer_id": 50083473, "answer_count": 1, "score": 2, "last_activity_date": 1524984197, "creation_date": 1524963463, "last_edit_date": 1524978262, "question_id": 50082425, "link": "https://stackoverflow.com/questions/50082425/need-to-escape-unbalanced-brackets-in-my-perl-regular-expression", "title": "Need to escape unbalanced brackets in my perl regular expression", "body": "<ul>\n<li>Edit: I added  a link to a live regex tool to check the regex in action: <a href=\"https://regex101.com/r/906a6D/4\" rel=\"nofollow noreferrer\">https://regex101.com/r/906a6D/4</a> </li>\n</ul>\n\n<hr>\n\n<p>I have the following perl regular expression</p>\n\n<pre><code>/(\\[(?&gt;[^\\[\\]]+|(?1))*\\])/sg\n</code></pre>\n\n<p>This works fine and matches all these strings completely</p>\n\n<pre><code>[a ] \n\n[ a] \n\n[a [b\n]] \n\n[code sub t{\n   my ($o,$k) = @_;\n   my $c = 0;\n   my $r;\n   for(split //,$t){\n     $r .= $_ unless(($c+($k-$o)) % $k);\n     []\n     $c++\n   }\n   $r =~ s/[^a-z]//g;\n   return $r\n }]\n</code></pre>\n\n<p>However, i need to escape the brackets. If there are unbalanced ones, this won't work so i would like to escape them like this <code>\\]</code> or maybe like this <code>{{- ] -}}</code>. </p>\n\n<p>This should match until the last ] bracket.</p>\n\n<pre><code>[a \\] ]        \n</code></pre>\n\n<p>This should match too until the last <code>]</code>.</p>\n\n<pre><code>[a \\]\\[ ]      \n</code></pre>\n\n<p>This too</p>\n\n<pre><code>[a \\\\ ]        \n</code></pre>\n\n<p>I have also tried to use lookaround assertions <code>(?&gt;!)</code>, <code>(?&lt;=)</code> in front of  the outer brackets and with the inner ignored brackets, but then strings like this</p>\n\n<pre><code>[a \\[ ]    \n</code></pre>\n\n<p>Are completely ignored, totally unmatched, not even one character.</p>\n\n<p><strong>I need these escaped brackets to be ignored when balancing the brackets, but still match the regexp and be captured.</strong></p>\n"}, {"tags": ["arrays", "perl", "duplicates"], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524959028, "post_id": 50081947, "comment_id": 87180032, "body": "Perhaps track indices (<code>0..$#array</code>) instead, so to keep the order?  Anyway, I wish that your opening paragraph is etched on top of every page here."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524960769, "post_id": 50081947, "comment_id": 87180309, "body": "@zdim: There&#39;s becoming a division between advocates of my sentiment and others who think it is out of line with the Stack Overflow <b><i>Be Nice</i></b> policy. I am certain that simply giving all questioners everything they ask for is not useful to anyone. Some of the reasons are considered in a new blog post <a href=\"https://stackoverflow.blog/2018/04/26/stack-overflow-isnt-very-welcoming-its-time-for-that-to-change/\"><i>Stack Overflow Isn\u2019t Very Welcoming. It\u2019s Time for That to Change.</i></a> and I suggest that you take a look. It looks like things I&#39;ve seen several times already, but any hew hope is worthwhile."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524960828, "post_id": 50081947, "comment_id": 87180321, "body": "@zdim: That sounds possible. If, instead of the actual value, the hash used the index of the first occurrence of that value in the array, we could retain the order. I may write that tomorrow but I should be asleep right now. Please post your own answer if you feel so inclined."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524961113, "post_id": 50081947, "comment_id": 87180382, "body": "@zdim: If you&#39;re interested then your English should look like <i>&quot;, I wish that your opening paragraph</i> <b><i>were</i></b> <i>etched on top of every page here&quot;</i>. It&#39;s a very common mistake, even amongst native English speakers, but people usually choose <b><i>was</i></b>, rather than <b><i>is</i></b>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524967628, "post_id": 50081947, "comment_id": 87181344, "body": "Very interested and thank you very much for correcting me. I wish my language weren&#39;t affected when I am tired; I&#39;ve known my conditionals and tenses for some 20 years now :(. (Interestingly, I read over that sentence a few times. It was itching.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1524971701, "post_id": 50081947, "comment_id": 87181912, "body": "Yeah, be nice. I am all for being nice and I hope that my posts show that.  (As for the article, there&#39;d be a lot to discuss there. Thank you.) While it does bother me when questions are treated with hostility, sarcasm &amp; Co., there is so much more to it. For one, we are swamped by brutal attempts  to simply extract something. On the other hand, many honestly don&#39;t realize what they are doing when they ask and <i>telling them that</i> may well be useful for them.  So I think that we should say what need be said. It will help a lot if the site improves in this regard."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1525005099, "post_id": 50081947, "comment_id": 87188821, "body": "@zdim: I thought you&#39;d want to know. There aren&#39;t many people whom I&#39;d correct like that, but you are always careful with your written English."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1524958628, "last_edit_date": 1524958628, "creation_date": 1524957852, "answer_id": 50081947, "question_id": 50081862, "link": "https://stackoverflow.com/questions/50081862/remove-even-amounts-of-duplicates-from-an-array/50081947#50081947", "title": "Remove even amounts of duplicates from an array", "body": "<p>This really isn't difficult, and it is very bad form to show no attempt at all at solving it yourself. I would like someone who posted questions like this to describe how they feel comfortable getting someone else to do their work for them. Even difficult crosswords don't get this flood of requests for a solution, but in this case presumably you are being paid for a solution written by someone else? Why is that not a problem to you?</p>\n\n<ul>\n<li><p>Build a hash to calculate the current count for each value</p></li>\n<li><p>use <code>$_ % 2</code> do determine the new final count</p></li>\n<li><p>Deconstruct the hash to a new array</p></li>\n</ul>\n\n\n\n<pre><code>my $array = [ 1, 0, 0, 0, 5, 2, 4, 5, 2, 2 ];\n\nmy @new_array = do {\n\n    my %counts;\n\n    ++$counts{$_} for @$array;\n\n    map {\n        ( $_ ) x ( $counts{$_} % 2 )\n    } sort { $a &lt;=&gt; $b } keys %counts;\n};\n\nuse Data::Dump;\ndd \\@new_array;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>[0, 1, 2, 4]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524961849, "post_id": 50082162, "comment_id": 87180510, "body": "&quot;ahead of&quot; (and &quot;behind&quot;) are ambiguous when dealing with iterators: <i>before</i> and <i>after</i> usually fare better."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524962160, "post_id": 50082162, "comment_id": 87180569, "body": "It is best to replace <code>for ( my $i = 0; $i &lt; scalar(@a); ) { ... }</code> with <code>my $i = 0; while ( $i &lt; @a ) { ... }</code>. The missing third clause of the <code>for</code> will rarely be noticed by even the best engineers."}], "tags": [], "owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "is_accepted": false, "score": 1, "last_activity_date": 1524960352, "creation_date": 1524960352, "answer_id": 50082162, "question_id": 50081862, "link": "https://stackoverflow.com/questions/50081862/remove-even-amounts-of-duplicates-from-an-array/50082162#50082162", "title": "Remove even amounts of duplicates from an array", "body": "<p>See the comments, to see how this possible solution does it.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy @a = qw(1 0 0 0 5 2 4 5 2 2);\n\n# Move through the array.\nfor (my $i = 0; $i &lt; scalar(@a); ) {\n  # Move through the positions at and ahead of current position $i\n  # and collect all positions $j, that share the value at the\n  # current position $i.\n  my @indexes;\n  for (my $j = $i; $j &lt; scalar(@a); $j++) {\n    if ($a[$j] == $a[$i]) {\n      push(@indexes, $j);\n    }\n  }\n\n  if (scalar(@indexes) % 2) {\n    # If the number of positions collected is odd remove the first\n    # position from the collection. The number of positions in the\n    # collection is then even afterwards.\n    shift(@indexes);\n    # As we will keep the value at the current position $i no new\n    # value will move into that position. Hence we have to advance\n    # the current position.\n    $i++;\n  }\n\n  # Move through the collected positions.\n  for (my $k = 0; $k &lt; scalar(@indexes); $k++) {\n    # Remove the element at the position as indicated by the\n    # $k'th element of the collect positions.\n    # We have to subtract $k from the collected position, to\n    # compensate for the movement of the remaining elements to the\n    # left.\n    splice(@a, $indexes[$k] - $k, 1);\n  }\n}\n\nprint(\"@a\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1524987358, "last_edit_date": 1524987358, "creation_date": 1524975521, "answer_id": 50083338, "question_id": 50081862, "link": "https://stackoverflow.com/questions/50081862/remove-even-amounts-of-duplicates-from-an-array/50083338#50083338", "title": "Remove even amounts of duplicates from an array", "body": "<p>Removing duplicates is usually done as follows:</p>\n\n<pre><code>use List::Util 1.44 qw( uniqnum );\n\n@a = uniqnum @a;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my %seen;\n@a = grep { !$seen{$_}++ } @a;\n</code></pre>\n\n<hr>\n\n<p>To achieve what you want, we simply need chain <code>grep</code> that removes the other undesired elements.</p>\n\n<pre><code>use List::Util 1.44 qw( uniqnum );\n\n@a = uniqnum grep { $counts{$_} % 2 } @a;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my %seen;\n@a = grep { !$seen{$_}++ } grep { $counts{$_} % 2 } @a;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my %seen;\n@a = grep { ( $counts{$_} % 2 ) &amp;&amp; !$seen{$_}++ } @a;\n</code></pre>\n\n<hr>\n\n<p>The above solutions rely on having the count of each value. To obtain that, we can use the following:</p>\n\n<pre><code>my %counts;\n++$counts{$_} for @a;\n</code></pre>\n\n<hr>\n\n<p>All together:</p>\n\n<pre><code>my ( %counts, %seen );\n++$counts{$_} for @a;\n@a = grep { ( $counts{$_} % 2 ) &amp;&amp; !$seen{$_}++ } @a;\n</code></pre>\n\n<p>Note that these methods of removing duplicates preserve the order of the elements (keeping the first duplicate). This is more efficient (O(N)) then involving <code>sort</code> (O(N log N)) to avoid producing something non-deterministic.</p>\n"}, {"tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": false, "score": 0, "last_activity_date": 1525051258, "creation_date": 1525051258, "answer_id": 50092867, "question_id": 50081862, "link": "https://stackoverflow.com/questions/50081862/remove-even-amounts-of-duplicates-from-an-array/50092867#50092867", "title": "Remove even amounts of duplicates from an array", "body": "<p>You have a bunch of answers, here's another:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $input = [ 1, 0, 0, 0, 5, 2, 4, 5, 2, 2 ];\nmy $output = dedupe_evens($input);\n\nprint Data::Dumper-&gt;Dump([$input, $output], ['$input', '$output']);\n\nexit;\n\n\nsub dedupe_evens {\n    my($input) = @_;\n\n    my %seen;\n    $seen{$_}++ foreach @$input;\n    my @output = grep {\n        my $count = delete $seen{$_};  # only want first occurrence\n        $count &amp;&amp; $count % 2;\n    } @$input;\n\n    return \\@output;\n}\n</code></pre>\n\n<p>Which produces this output (reformatted for brevity):</p>\n\n<pre><code>$input  = [ 1, 0, 0, 0, 5, 2, 4, 5, 2, 2 ];\n$output = [ 1, 0, 2, 4 ];\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 5373538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-GxkXfmMS09k/AAAAAAAAAAI/AAAAAAAAAVE/5swI3yJ70nE/photo.jpg?sz=128", "display_name": "genesi5", "link": "https://stackoverflow.com/users/5373538/genesi5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 1, "accepted_answer_id": 50081947, "answer_count": 4, "score": 0, "last_activity_date": 1525051258, "creation_date": 1524956790, "last_edit_date": 1524961637, "question_id": 50081862, "link": "https://stackoverflow.com/questions/50081862/remove-even-amounts-of-duplicates-from-an-array", "title": "Remove even amounts of duplicates from an array", "body": "<p>I have an array</p>\n\n<pre><code>[ 1, 0, 0, 0, 5, 2, 4, 5, 2, 2 ]\n</code></pre>\n\n<p>I need to delete even amounts of duplicates.</p>\n\n<p>That means, if a value appears an even number of times in the array then remove them all, but if it appears an odd number of times then keep just one.</p>\n\n<p>The result from the array above should be</p>\n\n<pre><code>[ 1, 0, 2, 4 ]\n</code></pre>\n\n<p>How can I do that?</p>\n"}, {"tags": ["perl", "grep"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1524947127, "post_id": 50080668, "comment_id": 87177390, "body": "What would you like to do if there was more than one match?"}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 3, "last_activity_date": 1524947153, "creation_date": 1524947153, "answer_id": 50080742, "question_id": 50080668, "link": "https://stackoverflow.com/questions/50080668/how-to-search-a-string-in-an-array-using-grep/50080742#50080742", "title": "How to search a string in an array using grep?", "body": "<p>If you want to know which elements matched, you need to do something with the return value of <code>grep</code>:</p>\n\n<pre><code>my @matched = grep { /$str/ } @arr;\nfor my $x (@matched) {\n    print $x, \"\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1524947258, "creation_date": 1524947258, "answer_id": 50080757, "question_id": 50080668, "link": "https://stackoverflow.com/questions/50080668/how-to-search-a-string-in-an-array-using-grep/50080757#50080757", "title": "How to search a string in an array using grep?", "body": "<p>You presumably want the file name in the list that matches?</p>\n\n<p>That looks like this</p>\n\n<pre><code>my ($match) = grep /\\Q$str/, @arr\n\nprint $match, \"\\n\" if defined $match\n</code></pre>\n\n<p>This will show the <em>first</em> matching name. Any others will be ignored</p>\n"}], "owner": {"reputation": 341, "user_id": 1428625, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/cdbf40982f128ff48171913a544dc405?s=128&d=identicon&r=PG", "display_name": "chanti", "link": "https://stackoverflow.com/users/1428625/chanti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1524968325, "creation_date": 1524946598, "last_edit_date": 1524968325, "question_id": 50080668, "link": "https://stackoverflow.com/questions/50080668/how-to-search-a-string-in-an-array-using-grep", "title": "How to search a string in an array using grep?", "body": "<p>I have an array which contains some file names. I'm trying to grep the particular file name which matches the string.</p>\n\n<pre><code>@arr=qw(INS.INPUT01.S7779902 INS.INPUT01.S7779903 INS.INPUT01.S7779904);\n$str = \"7779902\";\n\nif (grep{$_=~ /$str/} @arr){\n    print $_;\n}\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "perl", "cgi"], "comments": [{"owner": {"reputation": 16872, "user_id": 3412322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MPf7.jpg?s=128&g=1", "display_name": "Daniel Beck", "link": "https://stackoverflow.com/users/3412322/daniel-beck"}, "edited": false, "score": 0, "creation_date": 1524933230, "post_id": 50078606, "comment_id": 87173444, "body": "that is the actual output of your database query? A list of strings like \u201cA\\C\\C1\\C2\u201d?"}, {"owner": {"reputation": 404, "user_id": 9714968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/535f442b24358d417ba0c303497f6345?s=128&d=identicon&r=PG&f=1", "display_name": "Surajit Mitra", "link": "https://stackoverflow.com/users/9714968/surajit-mitra"}, "reply_to_user": {"reputation": 16872, "user_id": 3412322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MPf7.jpg?s=128&g=1", "display_name": "Daniel Beck", "link": "https://stackoverflow.com/users/3412322/daniel-beck"}, "edited": false, "score": 0, "creation_date": 1524935168, "post_id": 50078606, "comment_id": 87174046, "body": "Yes Daniel. The output will be like this what I posted earlier.  &quot;A&quot; is the parent folder and others all are sub folders.  To be more specific I am trying to replicate HPQC test lab folder structure in my web page. So I am querying HPQC database for test lab folder structure with a sql query and the query returns in this format. For each folder it returns the path like this From Root to End divided by &quot;\\&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 404, "user_id": 9714968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/535f442b24358d417ba0c303497f6345?s=128&d=identicon&r=PG&f=1", "display_name": "Surajit Mitra", "link": "https://stackoverflow.com/users/9714968/surajit-mitra"}, "edited": false, "score": 0, "creation_date": 1525005558, "post_id": 50080435, "comment_id": 87188966, "body": "Thanks a lot for answering my question. This works great. If you can give me the idea how to toggle this UL and LI based on the user click that would be great. Because after opening the webpage the whole list already expanded."}, {"owner": {"reputation": 16872, "user_id": 3412322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MPf7.jpg?s=128&g=1", "display_name": "Daniel Beck", "link": "https://stackoverflow.com/users/3412322/daniel-beck"}, "reply_to_user": {"reputation": 404, "user_id": 9714968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/535f442b24358d417ba0c303497f6345?s=128&d=identicon&r=PG&f=1", "display_name": "Surajit Mitra", "link": "https://stackoverflow.com/users/9714968/surajit-mitra"}, "edited": false, "score": 0, "creation_date": 1525007565, "post_id": 50080435, "comment_id": 87189599, "body": "There are a number of different ways to do that; here&#39;s one: <a href=\"https://stackoverflow.com/questions/31508500/dead-simple-collapsable-list-function-for-deep-and-shallow-nested-ul-li-lists-j\" title=\"dead simple collapsable list function for deep and shallow nested ul li lists j\">stackoverflow.com/questions/31508500/&hellip;</a>"}], "tags": [], "owner": {"reputation": 16872, "user_id": 3412322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MPf7.jpg?s=128&g=1", "display_name": "Daniel Beck", "link": "https://stackoverflow.com/users/3412322/daniel-beck"}, "is_accepted": true, "score": 2, "last_activity_date": 1524944712, "creation_date": 1524944712, "answer_id": 50080435, "question_id": 50078606, "link": "https://stackoverflow.com/questions/50078606/display-the-folder-structure-in-bootstrap-or-html-page-if-i-give-the-folders-pat/50080435#50080435", "title": "Display the folder structure in bootstrap or HTML Page if I give the folders path defined", "body": "<p>Here are two functions:</p>\n\n<p><code>convert()</code> will transform your input strings into an object representing the folder structure (the object key names represent the folder names; nested folders will be child objects.)   (Note that <code>\\</code> is an escape character in javascript; if you want to use it as a delimiter you'll need to escape that character (<code>\\\\</code>) as I've done here; or it may be more convenient to use a forward slash instead.  I've started with your input already converted into an array of paths -- if necessary you may need to split your input on newlines to get to that point.)</p>\n\n<p><code>drawFolders()</code> takes that object and draws it into the DOM as a set of nested lists.  This is as bare-bones a display as possible, but should be enough as a starting point for more elaborate display options.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>// Converts your input data into an object:\r\nvar convert = function(input) {\r\n  var output = {};\r\n  // iterate through each path in the input array:\r\n  input.forEach(function(path) {\r\n    var folders = path.split(\"\\\\\"); // convert this path into an array of folder names\r\n    // \"parent\" serves as a marker in the output object pointing to the current folder\r\n    var parent = output; // the topmost folder will be a child of the output root\r\n    folders.forEach(function(f) {\r\n      parent[f] = parent[f] || {}; // add a folder object if there isn't one already\r\n      parent = parent[f]; // the next part of the path will be a child of this part\r\n    });\r\n  });\r\n  return (output);\r\n}\r\n\r\n// Draws nested lists for the folder structure\r\nvar drawFolders = function(input) {\r\n  var output = \"&lt;ul&gt;\";\r\n  Object.keys(input).forEach(function(k) { \r\n    output += \"&lt;li&gt;\" + k; // draw this folder\r\n    if (Object.keys(input[k]).length) {\r\n      output += drawFolders(input[k]); // recurse for child folders\r\n    }\r\n    output += \"&lt;/li&gt;\";\r\n  });\r\n  output += \"&lt;/ul&gt;\";\r\n  return output;\r\n}\r\n\r\nvar input = [\r\n  \"A\\\\A1\\\\A2\\\\A3\",\r\n  \"A\\\\B\\\\B1\\\\B2\",\r\n  \"A\\\\B\\\\B4\\\\B5\\\\B5\",\r\n  \"A\\\\C\\\\C1\\\\C2\"\r\n];\r\ndocument.getElementById(\"output\").innerHTML = drawFolders(convert(input));</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div id=\"output\"&gt;&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 404, "user_id": 9714968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/535f442b24358d417ba0c303497f6345?s=128&d=identicon&r=PG&f=1", "display_name": "Surajit Mitra", "link": "https://stackoverflow.com/users/9714968/surajit-mitra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4427, "favorite_count": 0, "accepted_answer_id": 50080435, "answer_count": 1, "score": 1, "last_activity_date": 1579290011, "creation_date": 1524932332, "last_edit_date": 1579290011, "question_id": 50078606, "link": "https://stackoverflow.com/questions/50078606/display-the-folder-structure-in-bootstrap-or-html-page-if-i-give-the-folders-pat", "title": "Display the folder structure in bootstrap or HTML Page if I give the folders path defined", "body": "<p>I am reading folder paths from a file or by querying a database and the output will be as follows:</p>\n\n<p>Consider below <code>A</code> as the parent folder and the remaining are the child folders of it.</p>\n\n<pre><code>A\\A1\\A2\\A3\nA\\B\\B1\\B2\nA\\B\\B4\\B5\\B5\nA\\C\\C1\\C2\n</code></pre>\n\n<p>I want to display the folder structure in a web page by reading the paths.</p>\n\n<p>Is there any JavaScript or jquery or any function which will automatically sort and display in a structural way?</p>\n\n<p>I am using CGI script (Perl &amp; HTML) to display the structure. So the idea to sort and display using Perl will also be a solution.</p>\n"}, {"tags": ["perl", "nagios", "icinga2"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1524953762, "post_id": 50077504, "comment_id": 87179074, "body": "Even in <a href=\"http://search.cpan.org/~jhi/Time-HiRes-1.9721/HiRes.pm\" rel=\"nofollow noreferrer\">version 1.9721</a>, the second argument (if provided), must be an array reference. It seems the only change in behaviour is the addition of input validation. <code>process_perfdata.pl</code> is buggy, and newer versions of Time::HiRes let you know it."}], "tags": [], "owner": {"reputation": 2473, "user_id": 3788685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0153b937db548cca172e6a78e71eabe3?s=128&d=identicon&r=PG&f=1", "display_name": "user3788685", "link": "https://stackoverflow.com/users/3788685/user3788685"}, "is_accepted": true, "score": 2, "last_activity_date": 1525011274, "last_edit_date": 1525011274, "creation_date": 1524925079, "answer_id": 50077504, "question_id": 50077503, "link": "https://stackoverflow.com/questions/50077503/npcd-error-executed-command-exits-with-return-code-255/50077504#50077504", "title": "NPCD: ERROR: Executed command exits with return code &#39;255&#39;", "body": "<p>It appears that the current version of <code>Time::HiRes</code> was/is the issue. <code>cpan</code> offers <code>Time-HiRes-1.9758</code> as an update but this appears to be the version causing the issue.</p>\n\n<p>In order to stop the error I had to downgrade that module by doing the following;</p>\n\n<p><code>make clean</code> in the folder of the installed version (Mine was at <code>.cpan/build/Time-HiRes-1.9758</code>) then fetching the specific version from cpan;</p>\n\n<p><code>cpan JHI/Time-HiRes-1.9721.tar.gz</code> which installed the older (1.9721) version. </p>\n\n<p>Restarted <code>npcd</code> and the errors where gone.</p>\n\n<p>I'm not sure which version of <code>Time-HiRes</code> introduced this error/change in behaviour as I've not been through them and am not 100% certain where the issue may actually lay (npcd/Time-HiRes/somewhere else). Hopefully this points someone else in the right direction.</p>\n\n<p>From <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami's</a> comment </p>\n\n<blockquote>\n  <p>\"Even in version 1.9721, the second argument (if provided), must be an\n  array reference. It seems the only change in behaviour is the addition\n  of input validation. <code>process_perfdata.pl</code> is buggy, and newer\n  versions of <code>Time::HiRes</code> let you know it.\"</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 3421823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496a1eb5b19b70ca3240ccd6ec021002?s=128&d=identicon&r=PG&f=1", "display_name": "user3421823", "link": "https://stackoverflow.com/users/3421823/user3421823"}, "is_accepted": false, "score": 0, "last_activity_date": 1533531503, "creation_date": 1533531503, "answer_id": 51700797, "question_id": 50077503, "link": "https://stackoverflow.com/questions/50077503/npcd-error-executed-command-exits-with-return-code-255/51700797#51700797", "title": "NPCD: ERROR: Executed command exits with return code &#39;255&#39;", "body": "<p>This is a problem even in the latest version of pnp4nagios. \nIf you need a quick workaround you can modify the pnp4nagios script process_perfdata.pl so that it does always pass an array reference, as follows (diff output):</p>\n\n<pre><code> sub main {\n     my $job = shift;\n     my $t0 = [gettimeofday];\n-    my $t1;\n+    my @t1=();\n+    my $t1=\\@t1;\n     my $rt;\n     my $lines = 0;\n     # Gearman Worker\n</code></pre>\n\n<p>I've done this and it seems to work ok and remove the very frequent error message. I'll post back here if it seems to cause issues.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12767301, "user_type": "registered", "profile_image": "https://graph.facebook.com/10218187848502585/picture?type=large", "display_name": "Tomas Balazsik", "link": "https://stackoverflow.com/users/12767301/tomas-balazsik"}, "is_accepted": false, "score": 0, "last_activity_date": 1579808837, "last_edit_date": 1579808837, "creation_date": 1579768733, "answer_id": 59874380, "question_id": 50077503, "link": "https://stackoverflow.com/questions/50077503/npcd-error-executed-command-exits-with-return-code-255/59874380#59874380", "title": "NPCD: ERROR: Executed command exits with return code &#39;255&#39;", "body": "<p>The problem is with the newest library Time:HiRes 1.9758 and the second value from tv_interval bounds. According to manual if ommited, the actual time is used - what is exactly what it does. So you need to apply this command to script process_perfdata.pl:</p>\n\n<p>sed -s 's/tv_interval $t0, $t1/tv_interval $t0/g' -i process_perfdata.pl</p>\n\n<p>After that everything will work as it should.\nI experienced the problem with CentOS8 which is not providing older versions of HiRes library. Another symptom is that npcd cannot create .pnp-internal folder.</p>\n"}], "owner": {"reputation": 2473, "user_id": 3788685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0153b937db548cca172e6a78e71eabe3?s=128&d=identicon&r=PG&f=1", "display_name": "user3788685", "link": "https://stackoverflow.com/users/3788685/user3788685"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 774, "favorite_count": 0, "accepted_answer_id": 50077504, "answer_count": 3, "score": 1, "last_activity_date": 1579808837, "creation_date": 1524925079, "question_id": 50077503, "link": "https://stackoverflow.com/questions/50077503/npcd-error-executed-command-exits-with-return-code-255", "title": "NPCD: ERROR: Executed command exits with return code &#39;255&#39;", "body": "<p>After updating modules in <code>cpan</code> pnp4nagios/NPCD started logging the following in my syslog every time the script was called;</p>\n\n<pre><code>NPCD[19673]: ERROR: Executed command exits with return code '255'\nNPCD[19673]: ERROR: Command line was '/etc/pnp4nagios/libexec/process_perfdata.pl -n --bulk /var/spool/icinga2/perfdata/host-perfdata.1524923929'\n</code></pre>\n\n<p>There didn't appear to be any loss in functionality or data and my graphs where populating as expected - but I was being spammed by this.</p>\n\n<p>Running the script from the cli gave this result;</p>\n\n<pre><code>bash-4.1$ /etc/pnp4nagios/libexec/process_perfdata.pl -n --bulk /var/spool/icinga2/perfdata/host-perfdata.1524919009 \ntv_interval() 2nd argument should be an array reference at /etc/pnp4nagios/libexec/process_perfdata.pl line 218, &lt;PDFILE&gt; line 111\n</code></pre>\n\n<p>The only useful <a href=\"https://www.google.co.uk/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwikwOm9kt3aAhUDalAKHa-ZCLYQFggnMAA&amp;url=https%3A%2F%2Fperldoc.perl.org%2FTime%2FHiRes.html&amp;usg=AOvVaw25hDFmDe0Kc6NnsmDjneL6\" rel=\"nofollow noreferrer\">google</a> result to that error points at the <code>Time::HiRes</code> module.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 2, "creation_date": 1524911672, "post_id": 50075161, "comment_id": 87167280, "body": "That code works fine on my end. Please provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524947996, "post_id": 50075161, "comment_id": 87177640, "body": "Examples, please. What does your data look like?"}, {"owner": {"reputation": 560, "user_id": 10850601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3R2h7RDJ9yU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYNkQa9HPTd778Jo28o4mlsEFPJpw/mo/photo.jpg?sz=128", "display_name": "Ed Grimm", "link": "https://stackoverflow.com/users/10850601/ed-grimm"}, "edited": false, "score": 0, "creation_date": 1547868238, "post_id": 50075161, "comment_id": 95351629, "body": "I feel like there&#39;s a communication gap in this post.  It could just be you used &quot;words&quot; instead of &quot;lines&quot;, but it also could be you&#39;re using words in a different way than I&#39;m used to.  Like if you were trying to match all of the terms that started with those 1-3 words, and the terms don&#39;t necessarily start a line, then the answer you received might not be so horribly wrong.  The missing examples of what should and should not be matched that currently isn&#39;t or is being matched would do nicely to clarify this."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1524942119, "post_id": 50077044, "comment_id": 87176051, "body": "Using <code>&#47;g</code> in a boolean check tends to be a bug."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524950805, "post_id": 50077044, "comment_id": 87178367, "body": "@melpomene: I&#39;d be inclined to say that it&#39;s <i>always</i> a bug. Perhaps <code>if ( s&#47;&#47;&#47;g )</code> has a purpose, but not the <code>if ( m&#47;&#47;g )</code> that we have here."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524952457, "post_id": 50077044, "comment_id": 87178762, "body": "@Borodin I&#39;ve used <code>if ( m&#47;&#47;g )</code> in parsers, but yeah, not in this context."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524953597, "post_id": 50077044, "comment_id": 87179019, "body": "@melpomene: Okay, I wonder what your reason was for that choice? The only other thing I can think of is that you may achieve a side-effect using <code>(?{ ... })</code> etc. that you want applied at every match, but ultimately extract a boolean value to say whether <i>any</i> matches were found."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524974400, "post_id": 50077044, "comment_id": 87182286, "body": "@Borodin ... OK, that comment makes no sense to me. Are you sure you know what <code>&#47;g</code> does in scalar context?"}], "tags": [], "owner": {"reputation": 3388, "user_id": 9534819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdbae473f8d26eb6a10d85ab897e91e?s=128&d=identicon&r=PG&f=1", "display_name": "Matt.G", "link": "https://stackoverflow.com/users/9534819/matt-g"}, "is_accepted": false, "score": -4, "last_activity_date": 1524940517, "last_edit_date": 1524940517, "creation_date": 1524922007, "answer_id": 50077044, "question_id": 50075161, "link": "https://stackoverflow.com/questions/50075161/perl-match-multiple-words-with-space/50077044#50077044", "title": "perl match multiple words with space", "body": "<p>change the regex to remove the <code>^</code> and add <code>/g</code> (global) like:</p>\n\n<pre><code>/(Delta Asset Management|Viger|Double binding|Base camp lift)/g\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/A6B8uf/1\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<p>or, if you need to keep the <code>^</code>, add <code>/m</code> (multiline option) like:</p>\n\n<pre><code>/^(Delta Asset Management|Viger|Double binding|Base camp lift)/gm\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/A6B8uf/2\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 95, "user_id": 1239079, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f2e004d0160be23972c8887020800bf4?s=128&d=identicon&r=PG", "display_name": "naf", "link": "https://stackoverflow.com/users/1239079/naf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1524940517, "creation_date": 1524908978, "question_id": 50075161, "link": "https://stackoverflow.com/questions/50075161/perl-match-multiple-words-with-space", "title": "perl match multiple words with space", "body": "<p>i am trying to find all matching words which start with the following and ignore them</p>\n\n<pre><code>Delta Asset Management\nViger\nDouble binding\nBase camp lift\n</code></pre>\n\n<p>i tried it via this regex but  not getting right result.</p>\n\n<pre><code>if ($row =~ m/^(Delta Asset Management|Viger|Double binding|Base camp lift)/){ return undef; }\n</code></pre>\n"}, {"tags": ["perl", "ftp", "initialization"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1524881938, "post_id": 50072129, "comment_id": 87161219, "body": "The message seems to refer to <code>$ftp-&gt;message</code>, that it&#39;s returning an <code>undef</code>.  What is that method supposed to do, and where does its &quot;message&quot; come from?"}, {"owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524882628, "post_id": 50072129, "comment_id": 87161332, "body": "The method gives the ftp message if the statement fails, I&#39;m extremely new to perl and don&#39;t know the quirks yet. But this code is almost verbatim from <a href=\"https://perldoc.perl.org/Net/FTP.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/Net/FTP.html</a>"}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1524886408, "post_id": 50072129, "comment_id": 87161843, "body": "The documentation on the module isn&#39;t very enlightening for me, but I guess <code>$ftp-&gt;message</code> may contain the message, that the server sends, when a command failed. Possibly it&#39;s <code>undef</code> when the server didn&#39;t or couldn&#39;t send a message, e.g. due to an interrupted connection. That strange behaviour, that it works the second time might further indicate some weird network problem (something &quot;woke up&quot; along the path by the first attempt). Maybe you can connect, plug the cable, try issuing a command and see if <code>$ftp-&gt;message</code> is <code>undef</code> in that case?"}, {"owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 0, "creation_date": 1524886625, "post_id": 50072129, "comment_id": 87161873, "body": "What do you mean, &quot;plug the cable&quot;?"}, {"owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "reply_to_user": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1524887357, "post_id": 50072129, "comment_id": 87161967, "body": "@stickybit I think you&#39;re right. I really don&#39;t think it has anything to do with the script. When I test it on my personal servers it works fine. So that makes me think... Do you or anyone else know of a way to retry the ftp if it fails the first time.. I could just rewrite the logic over again after the first attempt but that would be messy as it would upload the file twice (overriding the first) if the first try was indeed successful. This is probably very simple but I&#39;m very new to perl so maybe you know of an efficient way to do this."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1524889749, "post_id": 50072129, "comment_id": 87162282, "body": "Did you check that <code>-f $fpath1</code> is true before trying to <code>put</code> it?  The documentation says that <code>$ftp-&gt;put</code> returns the remote filename upon success, so maybe you aren&#39;t allowed to put files there?"}, {"owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1524890696, "post_id": 50072129, "comment_id": 87162450, "body": "@xxfelixxx No I&#39;m definitely allowed as it works when I run the script the second time. I think it is something to do with the server... Would there be an easy way in perl to retry if the put fails?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1524892020, "post_id": 50072129, "comment_id": 87162651, "body": "You could roll your own, or use a library for it, such as Retry: <a href=\"http://search.cpan.org/~tjc/Retry-1.01/lib/Retry.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~tjc/Retry-1.01/lib/Retry.pm</a>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1524892093, "post_id": 50072129, "comment_id": 87162666, "body": "Or Attempt: <a href=\"http://search.cpan.org/~markf/Attempt-1.01/lib/Attempt.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~markf/Attempt-1.01/lib/Attempt.pm</a>"}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 1, "creation_date": 1524892093, "post_id": 50072129, "comment_id": 87162667, "body": "You could use a <code>for</code> loop decrementing a counter, say from e.g. 3 down. Inside execute <code>$ftp-&gt;put($fpath1)</code> if it succeeded exit the loop with <code>last</code>. Otherwise the loop will continue with another attempt. And end when the end of the counter is reached. Then it failed for good."}, {"owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "reply_to_user": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1524892524, "post_id": 50072129, "comment_id": 87162730, "body": "@stickybit You\u2019ve been a great help. Can you basically state what you said in your comments in an answer and if you have time provide a simple code example? I believe you solved my problem."}], "answers": [{"tags": [], "owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "is_accepted": true, "score": 3, "last_activity_date": 1524893890, "last_edit_date": 1592644375, "creation_date": 1524893890, "answer_id": 50073237, "question_id": 50072129, "link": "https://stackoverflow.com/questions/50072129/perl-use-of-uninitialized-variable-ftp/50073237#50073237", "title": "Perl - Use of uninitialized variable $ftp", "body": "<p>Maybe it is caused by some network issue, like an aborted connection. Then <code>$ftp-&gt;message</code> might be <code>undef</code> as the server cannot send any message here. But that's just a guess, the <a href=\"http://search.cpan.org/%7Eshay/libnet-3.11/lib/Net/FTP.pm\" rel=\"nofollow noreferrer\">documentation</a> isn't clear about where <code>$ftp-&gt;message</code> actually comes from.</p>\n<p>The phenomenon, that it works in the second attempt might reinforce that conjecture. Faulty network equipment sometimes &quot;wakes up&quot; after some traffic, which initially failed.</p>\n<p>If you want to retry it a few time times, here's a sketch (untested, but should demonstrate the idea):</p>\n<pre><code>print(&quot;put\\n&quot;);\nfor (my $counter = 3; $counter; $counter--) {\n  if (!$ftp-&gt;put($fpath1)) {\n    if (defined($ftp-&gt;message)) {\n      print(&quot;Error. Message: $ftp-&gt;message\\n&quot;);\n    }\n    else {\n      print(&quot;Error. Message: undef\\n&quot;);\n    }\n    print(&quot;retrying...\\n&quot;);\n  }\n  else {\n    last;\n  }\n}\nif (!$counter) {\n  print(&quot;gave up.\\n&quot;);\n  # further error handling goes here... e.g. abort the script...\n}\n</code></pre>\n<p>You can remove the</p>\n<pre><code>    if (defined($ftp-&gt;message)) {\n      ...\n    }\n    else {\n      ...\n    }\n</code></pre>\n<p>,</p>\n<pre><code>if (!$counter) {\n  ...\n}\n</code></pre>\n<p>and the <code>print()</code>s if you don't want to handle that or have that output respectively.</p>\n<p>Also lower or raise the initial counter value as needed.</p>\n"}], "owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 50073237, "answer_count": 1, "score": 1, "last_activity_date": 1524902786, "creation_date": 1524880668, "last_edit_date": 1524902786, "question_id": 50072129, "link": "https://stackoverflow.com/questions/50072129/perl-use-of-uninitialized-variable-ftp", "title": "Perl - Use of uninitialized variable $ftp", "body": "<p>I am getting an error when running the below perl script. The error reads:</p>\n\n<blockquote>\n  <p>Use of uninitialized value in die at AfterGauss.pl line 54.</p>\n</blockquote>\n\n<p>Line 54 is <code>$ftp-&gt;put($fpath1) || die $ftp-&gt;message;</code>. Is there something that anyone sees wrong with my code. I've tried removing the die statements and the 1st ftp just fails. If I rerun the script it runs fine on the second time, but the first always throws me this error.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Net::FTP;\n\n\n#proper date.ini file with fully qualified path\nmy $dateFile = \"C:\\\\CompOps\\\\PostApps\\\\ini\\\\pDate.ini\";\n\nmy $date;\n\n#Get Date\nopen FILE, $dateFile || die \"could not open $dateFile\";\nwhile(&lt;FILE&gt;) {\n    $date = $_;\n}\nclose FILE;\n\n#Trim Date\n$date =~ s/^\\s+|\\s+$//g;\n\n#rdc original filename with path\nmy $fileName1 = \"Y:\\\\PRODUCTS\\\\XML\\\\RDCX$date.XML\";\n#rdc new filename with path\nmy $newFileName1 = \"Y:\\\\PRODUCTS\\\\XML\\\\rdcx$date.xml\";\n#rdc new filename with path to $archiveFile1\nmy $archiveFile1 = \"Y:\\\\PRODUCTS\\\\XML\\\\Archive\\\\rdcx$date.xml\";\n#rom original filename with path\nmy $fileName2 = \"W:\\\\BBSDATA\\\\ROMX$date.ZIP\";\n#rom new filename with path\nmy $newFileName2 = \"W:\\\\BBSDATA\\\\romx$date.zip\";\n\n#rdc file with path to post from\nmy $fpath1 = $newFileName1;\n#rom file with path to post from\nmy $fpath2 = $newFileName2;\n\n#rename RDC file to lowercase\nrename($fileName1, $newFileName1) || die \"Cannot rename $fileName1: $!\\n\";\n\n#rename ROM file to lowercase\nrename($fileName2, $newFileName2) || die \"Cannot rename $fileName2: $!\\n\";\n\n# FTP credentials\nmy $host = \"HOST\";\nmy $user = \"USERNAME\";\nmy $pass = \"PASSWORD\";\n#directory to post to\nmy $dir = \"/content-inbound-to-rdc\";\n\n#ftp rdc file\nmy $ftp = Net::FTP-&gt;new($host) || die \"Can't open $host: $@\\n\";\n$ftp-&gt;login($user, $pass) || die $ftp-&gt;message;\n$ftp-&gt;cwd($dir);\n$ftp-&gt;put($fpath1) || die $ftp-&gt;message;\n$ftp-&gt;quit;\nprint \"rdc ftp successful! \";\nprint $ftp-&gt;message;\n\n#move rdc file to $archive\nrename($newFileName1, $archiveFile1) || die \"Cannot move rdc file to archive \\n\";\n\n#update credentials\n$host = \"HOST\";\n$user = \"USERNAME\";\n$pass = \"PASSWORD\";\n#update post to path\n$dir = '/cedrom';\n#ftp rdc file\n$ftp = Net::FTP-&gt;new($host) || die \"Can't open $host: $@\\n\";\n$ftp-&gt;login($user, $pass) || die $ftp-&gt;message;\n$ftp-&gt;cwd($dir);\n$ftp-&gt;put($fpath2) || die $ftp-&gt;message;\n$ftp-&gt;quit;\nprint \"rom ftp successful! \";\nprint $ftp-&gt;message;\n</code></pre>\n"}, {"tags": ["perl", "copy", "file-handling"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1524879898, "post_id": 50071973, "comment_id": 87160901, "body": "I don&#39;t understand your description of what&#39;s wrong.  The code you show will print to <code>$oh</code> the string <code>$user</code> as many times as there are lines on <code>$fh</code> (and without any newlines)."}, {"owner": {"reputation": 69, "user_id": 6132816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb1848bbf8584c4cc3ab4ef9d2974d3?s=128&d=identicon&r=PG&f=1", "display_name": "masral", "link": "https://stackoverflow.com/users/6132816/masral"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524880162, "post_id": 50071973, "comment_id": 87160935, "body": "Pardon, let me try and clarify. Its supposed to take something lets say from the file data.txt while the data in the file just contains &quot;BCD&quot;  run the cipher on it which would cause it spit back &quot;ABC&quot; and then save that into the file named data.txt.dec however its not saving anything there. Does that help?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1524880167, "post_id": 50071973, "comment_id": 87160936, "body": "Btw,  generally one wants to <code>chomp</code> user input. While it may not matter, here you get inconsistent returns: the original input with the newline if there is no match, but the changed string without the newline if there is a match."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1524880253, "post_id": 50071973, "comment_id": 87160952, "body": "Ah.  If the file has <i>one line</i>, that&#39;s gone after the first <code>&lt;$fh&gt;</code> and there&#39;s nothing left to read on the <code>$fh</code> for the <code>while (&lt;$fh&gt;)</code>.  So the print to <code>$oh</code> never runs.  If there were more lines the <code>while</code> would go through them but <code>$user</code> has been only made once. Perhaps move <code>my $user = ...</code> into the <code>while</code> loop?  Like <code>print $oh decodecaesar($_,1)</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524880932, "post_id": 50071973, "comment_id": 87161070, "body": "(the file gets truncated once it&#39;s <code>open</code>ed for writing, regardless of whether it was written to)"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1524987771, "last_edit_date": 1524987771, "creation_date": 1524880587, "answer_id": 50072123, "question_id": 50071973, "link": "https://stackoverflow.com/questions/50071973/my-file-isnt-copying-properly-in-perl/50072123#50072123", "title": "My file isnt copying properly in perl", "body": "<p>If you mean to \"translate\" from input to output line by line you need to do that inside the loop</p>\n\n<pre><code>while (my $userinput = &lt;$fh&gt;) {\n    chomp $userinput;\n    print $oh decodecaesar($userinput, 1);\n}\n</code></pre>\n\n<p>Note that using <code>$line</code> is a common and good convention for naming a variable that takes a line from a file.  I left <code>$userinput</code> from the OP in case it is meant to convey that the file contains user input in some specific sense. Still, I recommend to reconsider. </p>\n\n<p>In this case you can also make use of the <a href=\"https://perldoc.perl.org/perlvar.html#$_\" rel=\"nofollow noreferrer\"><em>default input and pattern-searching space</em>, <code>$_</code></a></p>\n\n<pre><code>while (&lt;$fh&gt;) {\n    chomp;\n    print $oh decodecaesar($_, 1);\n}\n</code></pre>\n\n<p>I am not suggesting this, just noting it.  There is <em>nothing</em> wrong with a nicely named variable.</p>\n\n<hr>\n\n<p>A few notes on the code</p>\n\n<ul>\n<li><p>No need to declare (<code>my $userinput;</code>) and assign separately (<code>$userinput = ...</code>)</p></li>\n<li><p>No need to double-quote a variable like <code>\"$ARGV[0]\"</code> (and it may lead to subtle trouble)</p></li>\n<li><p>Always check input, <code>my $input = $ARGV[0] || usage();</code> (or provide default)</p></li>\n<li><p>Note the <a href=\"https://perldoc.perl.org/open.html\" rel=\"nofollow noreferrer\">open pragma</a></p>\n\n<pre><code>use open ':std', ':encoding(UTF-8)';\n</code></pre>\n\n<p>and now all streams will be encoded/decoded so you don't have to do it for each <code>open</code>. This can be overridden as needed.</p></li>\n</ul>\n"}], "owner": {"reputation": 69, "user_id": 6132816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb1848bbf8584c4cc3ab4ef9d2974d3?s=128&d=identicon&r=PG&f=1", "display_name": "masral", "link": "https://stackoverflow.com/users/6132816/masral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 50072123, "answer_count": 1, "score": 1, "last_activity_date": 1524987771, "creation_date": 1524878921, "question_id": 50071973, "link": "https://stackoverflow.com/questions/50071973/my-file-isnt-copying-properly-in-perl", "title": "My file isnt copying properly in perl", "body": "<p>I'm writing a program that is supposed to get data from another file that's put in at the command line, run a cipher on it, then copy what data it outputs to another file but it isn't saving the data properly. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy $userinput;\nmy $filename = \"$ARGV[0]\";\nopen(my $fh, '&lt;:encoding(UTF-8)', $filename) or die \"Couldn't open '$filename' $!\";\nopen(my $oh, '&gt;:encoding(UTF-8)', \"$filename.dec\") or die \"Couldn't save '$filename' $!\";\n$userinput= &lt;$fh&gt;;\nsub decodecaesar {\n    my ($message, $key) = @_;\n    $key = 26 - $key;\n    $message =~ s/([A-Z])/chr(((ord(uc $1) - 65 + $key) % 26) + 65)/geir;\n }\n my $user = decodecaesar($userinput, 1);\n print \"$user\";\n\n while(&lt;$fh&gt;){\n    print $oh $user;\n }\n close($fh);\n close($oh);\n</code></pre>\n\n<p>It is copying something to the file as whenever I put something into the file it gets overwritten with an empty file while the file its reading from is not empty and works properly. Where did I screw up?</p>\n"}, {"tags": ["perl", "hash", "perlscript"], "comments": [{"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1524890896, "post_id": 50071201, "comment_id": 87162487, "body": "Are you really using PerlScript? (That&#39;s something different than a script written in Perl.) If not, consider removing the tag."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1524905412, "post_id": 50071201, "comment_id": 87165599, "body": "<a href=\"https://www.perlmonks.org/?node_id=1213705\" rel=\"nofollow noreferrer\">Crossposted to PerlMonks</a>."}], "answers": [{"tags": [], "owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "is_accepted": false, "score": 2, "last_activity_date": 1524925670, "last_edit_date": 1524925670, "creation_date": 1524890694, "answer_id": 50072930, "question_id": 50071201, "link": "https://stackoverflow.com/questions/50071201/how-to-change-a-name-in-a-file-for-another-in-perl-with-hash/50072930#50072930", "title": "How to change a name in a file for another in perl with hash?", "body": "<p>Well you were in the right direction, I guess. But somewhere along the path you we're lost and it seems like randomly tried to run in any direction. There are a lot of things wrong in your code.</p>\n\n<p>For instance it's funny how you can have those two lines</p>\n\n<pre><code>        if ( /%lista2[i]/ ) {    \n            print OA \"$_ $lista2{$key}\\n\" ;\n</code></pre>\n\n<p>having one correct attempt accessing a has value (<code>$lista2{$key}</code>) and a totally wrong one (<code>%lista2[i]</code>) so close together.</p>\n\n<p>Then, since you're only printing to <code>OA</code> if (<code>\"/$lista2{$key}/\"</code>), you'd completely eradicate all other lines in the output. Your example indicates, you don't want that.</p>\n\n<p>Furthermore change the loop nesting. Instead of opening the file over and over again, open it once, iterate over the lines and in each such iteration iterate over the hash keys. Your way wasn't strictly wrong but opening and closing files doesn't come cheap, you know. And speaking of closing files: You didn't close <code>SAL</code> in the body of your outer loop, but that's where you reopen it.</p>\n\n<p>And use at least some very basic error handling. Check if <code>open</code> has failed. A wrong file name and the program fails without any indication why. Make your life easier.</p>\n\n<p>Why use <code>chomp()</code> if you later append an <code>\\n</code> to the output anyway and make a line of it again? Skip that.</p>\n\n<p>I don't know how to interpret these lines:</p>\n\n<pre><code>        @w = split(\"\\t\");   \n        $r = 0;\n        s/\\;//g;\n</code></pre>\n\n<p>Is that some leftovers? They don't do anything useful.</p>\n\n<p>Last but not least it's recommended to <code>use strict;</code> and possibly <code>use warnings;</code> to get pointers on problematic spots.</p>\n\n<p>Here's one that passes your example.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy %lista2 =\n(\n  1  =&gt; \"CAT00.3\",\n  2  =&gt; \"CAT43.1\",\n  3  =&gt; \"CAT40.3\"\n);\n\nif (!open(OA, \"&gt;file2.txt\")) {\n die($!);\n}\nif (!open(SAL, \"file.txt\")) {\n  die($!);\n}\n\nforeach my $line (&lt;SAL&gt;) {\n  foreach my $key (keys(%lista2)) {\n    if ($line =~ s/^&gt;;$key;$/&gt;$lista2{$key}/) {\n      last;\n    }\n  }\n  print(OA $line);\n}\n\nclose(SAL);\nclose(OA);\n</code></pre>\n\n<p>In fact, in the core it can be simplified to a pattern replacement. No splitting or anything is needed. But patterns might be confusing if you're a beginner.</p>\n\n<p>I also raised the level of verbosity to make things clearer.</p>\n"}], "owner": {"reputation": 21, "user_id": 9693428, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5BRKWLy0IP0/AAAAAAAAAAI/AAAAAAAACso/ibiVbg5c3dU/photo.jpg?sz=128", "display_name": "armando acosta", "link": "https://stackoverflow.com/users/9693428/armando-acosta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1524925670, "creation_date": 1524869669, "last_edit_date": 1524875262, "question_id": 50071201, "link": "https://stackoverflow.com/questions/50071201/how-to-change-a-name-in-a-file-for-another-in-perl-with-hash", "title": "How to change a name in a file for another in perl with hash?", "body": "<p>I have a file like this.</p>\n\n<pre><code>&gt;;1;\nAACTCTGGGACAATGGCACACGGGAAACAGATAATGAACGATCAGCACAGGGAACTAGCG\n&gt;;2;\nAACTCTGGGACAATGGCACACGGGAAACAGATAATGAACGATCAGCACAGGGAACTAGCG\n&gt;;3;\nAACTCTGGGACAATGGCACACGGGAAACAGATAATGAACGATCAGCACAGGGAACTAGCG\n</code></pre>\n\n<p>I would like to change each number to a corresponding string.</p>\n\n<p>I wrote the following Perl program but I don't know what is wrong with it.</p>\n\n<pre><code>%lista2 = (\n    1  =&gt; \"CAT00.3\",\n    2  =&gt; \"CAT43.1\",\n    3  =&gt; \"CAT40.3\"\n);\n\nopen(OA, \"&gt;file2.txt\");\n\nforeach $key ( keys %lista2 ) {\n\n    open(SAL, \"file.txt\");\n\n    while ( &lt;SAL&gt; ) {\n        chomp;\n\n        if( /&gt;/ ) {\n\n            @w = split(\"\\t\");   \n            $r = 0;\n            s/\\;//g;\n\n            if ( /%lista2[i]/ ) {    \n                print OA \"$_ $lista2{$key}\\n\" ;\n                $r = 1;\n            }\n        }\n    }\n}\n\nclose(SAL);\nclose(OA);\n</code></pre>\n\n<p>I want to get this</p>\n\n<pre><code>&gt;CAT00.3\nAACTCTGGGACAATGGCACACGGGAAACAGATAATGAACGATCAGCACAGGGAACTAGCG\n&gt;CAT43.1\nAACTCTGGGACAATGGCACACGGGAAACAGATAATGAACGATCAGCACAGGGAACTAGCG\n&gt;CAT40.3\nAACTCTGGGACAATGGCACACGGGAAACAGATAATGAACGATCAGCACAGGGAACTAGCG\n</code></pre>\n\n<p>But I don't know how do that.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 4, "last_activity_date": 1524856128, "creation_date": 1524856128, "answer_id": 50068867, "question_id": 50068720, "link": "https://stackoverflow.com/questions/50068720/how-to-bind-a-json-object-in-mysql/50068867#50068867", "title": "How to bind a JSOn object in MySQL", "body": "<p>There is no such SQL type as <code>JSON_TYPE</code>.</p>\n\n<p>MySQL treats JSON values as strings with extra semantics. Since you're already encoding the structure as a JSON string, you don't need to do anything special when binding it as a parameter -- you can safely leave off the third argument to <code>bind_param</code>.</p>\n"}], "owner": {"reputation": 9, "user_id": 7799920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/154cacbbe88b7e8187f7290517121efc?s=128&d=identicon&r=PG&f=1", "display_name": "Nam Nguyen", "link": "https://stackoverflow.com/users/7799920/nam-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1524856128, "creation_date": 1524855518, "last_edit_date": 1524855893, "question_id": 50068720, "link": "https://stackoverflow.com/questions/50068720/how-to-bind-a-json-object-in-mysql", "title": "How to bind a JSOn object in MySQL", "body": "<p>I have a <strong>MySQL</strong> stored procedure sp_foo() that has the following codes:</p>\n\n<pre><code>CREATE DEFINER=`root`@`localhost` PROCEDURE `sp_foo`(\nin p_env varchar(45),\nin p_host varchar(45),\nin FDs JSON)\n</code></pre>\n\n<p>In Perl, how would I bind a <strong><em>Perl</em></strong> JSON object to the corresponding stored procedure's JSON <strong>FDs</strong> object?</p>\n\n<p>I've tried different type (including <strong><em>JSON_TYPE</em></strong>) but to no avail:</p>\n\n<pre><code>my $logFD = {\nuid =&gt; 'iib',\n  pid =&gt; 29115,\n  fdCount =&gt; 477,\n  fdCountMax =&gt; 10240,\n  program =&gt; 'DataFlowEngine',\n  parameters =&gt; 'DFIB01 da3e3470-a044-4ba6-bf92-f153d1398fdc Logger'\n};\nmy $logFD_json = encode_json $logFD;\n$sth-&gt;bind_param( $i++, $logFD_json, JSON_TYPE); # &lt;-- this line\n</code></pre>\n\n<p>The error I got would look like:<br>\n<code>Bareword \"JSON_TYPE\" not allowed while \"strict subs\"</code></p>\n"}, {"tags": ["bash", "perl", "file", "unix"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1524852272, "post_id": 50067877, "comment_id": 87152299, "body": "Download the file and manipulate it somewhere with better tools and more disk space? Install better tools, even if only in your home directory?"}, {"owner": {"reputation": 31452, "user_id": 435559, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b7df6df16b0af400a1a7be5032152a5?s=128&d=identicon&r=PG&f=1", "display_name": "Vishwanath Dalvi", "link": "https://stackoverflow.com/users/435559/vishwanath-dalvi"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1524852415, "post_id": 50067877, "comment_id": 87152373, "body": "@Schwern I&#39;ve only terminal access with a few permissions. Thanks."}, {"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1524852617, "post_id": 50067877, "comment_id": 87152469, "body": "@mr_eclair: What about just <code>perl -ne &#39;print unless $. == 10&#39;</code>? where <code>10</code> being the line number, you could use it for any line of choice. Or for in-place <code>perl -i -ne &#39;print unless $. == 10&#39;</code>"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 3, "creation_date": 1524852692, "post_id": 50067877, "comment_id": 87152502, "body": "@Inian That writes a new file and they don&#39;t have the space."}, {"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1524852732, "post_id": 50067877, "comment_id": 87152521, "body": "@Schwern: Yes updated comment with in-place option"}, {"owner": {"reputation": 31452, "user_id": 435559, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b7df6df16b0af400a1a7be5032152a5?s=128&d=identicon&r=PG&f=1", "display_name": "Vishwanath Dalvi", "link": "https://stackoverflow.com/users/435559/vishwanath-dalvi"}, "reply_to_user": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1524852753, "post_id": 50067877, "comment_id": 87152534, "body": "@Inian already tried this solution, got an error &quot;disk full&quot; in between."}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 9, "creation_date": 1524852762, "post_id": 50067877, "comment_id": 87152538, "body": "<code>perl -i</code> isn&#39;t really in-place; it writes a temp file and replaces the original after the script is done."}, {"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "reply_to_user": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1524852807, "post_id": 50067877, "comment_id": 87152567, "body": "@chepner: Yes I was aware of that, but not sure how else a in-place edit could be done considering the disk constraints"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 3, "creation_date": 1524853911, "post_id": 50067877, "comment_id": 87153034, "body": "UNIX doesn&#39;t support this in general -- the filesystem primitives don&#39;t let you do in-place deletes without actually needing to rewrite everything past the point where the deletion takes place. Linux has some new kernel-level primitives (supported by only a very small number of filesystems) to do in-place inserts and deletes of blocks, but even then, your changes need to align to 4kb pages."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1524854004, "post_id": 50067877, "comment_id": 87153085, "body": "Do you really need to <b>delete</b> the line, and not just replace it with NULs? In-place replacement is easy and cheap; it&#39;s backfilling the space with content from later in the file that isn&#39;t (unless the edit is close to the end)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1524856768, "post_id": 50067877, "comment_id": 87154333, "body": "Re &quot;<i>other options like saving the file to temporary file isn&#39;t working because I&#39;ve 20 GB (12 GB already used by text file) space available</i>&quot;, Do you have 20 GB available (which is plenty for using a temporary file, or did you mean to say you only have 8 GB available?"}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 3, "creation_date": 1524857920, "post_id": 50067877, "comment_id": 87154864, "body": "How about a 16GB USB Memory Stick for $20?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 3, "creation_date": 1524858197, "post_id": 50067877, "comment_id": 87155002, "body": "Is there enough memory (RAM) to read the whole thing? Or, rather, how much is there?"}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 1, "creation_date": 1524858880, "post_id": 50067877, "comment_id": 87155305, "body": "Is this a one-time operation or will it be an ongoing process?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524860309, "post_id": 50067877, "comment_id": 87155904, "body": "Is the line to be deleted always identified by just its line number within the file? Why did you say <i>&quot;Didn&#39;t work&quot;</i> to <b>toolic&#39;s</b> suggestion that you <code>splice</code> the tied array? What happened that was wrong?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1524861763, "post_id": 50067877, "comment_id": 87156502, "body": "Deleting the <i>last</i> N lines off the end is trivial, because you don&#39;t need to backfill -- one could just use <code>truncate()</code> to perform it in constant time, after calculating the offset. It&#39;s not an example that can be extended to the general-case operation of removing content from anywhere in a file."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524877199, "post_id": 50067877, "comment_id": 87160466, "body": "This information really should be in a database. A 12GB file will take 30mins just to read through it, and that&#39;s not a reasonable access time for most information."}, {"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1524908183, "post_id": 50067877, "comment_id": 87166321, "body": "Can you use <code>awk</code>? You can probably <a href=\"https://stackoverflow.com/questions/2112469/delete-specific-line-numbers-from-a-text-file-using-sed\">do this</a> then."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1524915084, "post_id": 50067877, "comment_id": 87168214, "body": "What about zipping the file and then <code>zcat $file | sed ... | gzip &gt; $new_file.gz</code> followed by <code>mv new_file.gz file.gz; gunzip new_file.gz</code>? This could work if the zipped file is smaller than 8GB."}], "answers": [{"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 2, "creation_date": 1524869855, "post_id": 50068760, "comment_id": 87159117, "body": "&quot;<i>You need the number of lines in the file...</i>&quot; damn, you&#39;re right. Even if you avoid it in the <code>for</code> loop, <code>splice</code> calls <code>FETCHSIZE</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1524874092, "post_id": 50068760, "comment_id": 87159922, "body": "@Schwern, Simply visiting a line is enough to cache its position, and the OP invariably needs to visit every line (either as part of finding the line to remove, or as part of shifting every line after the &quot;deleted&quot; line). So while avoiding <code>FETCHSIZE</code> would save you from reading the file twice, it won&#39;t save you any memory."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1524890530, "post_id": 50068760, "comment_id": 87162420, "body": "Interesting approach! I am curious why would the last version be faster than the second? Is it because it uses <code>read</code> with a buffer size of 4MB   instead of <code>readline</code> which I assume uses a buffersize of 8KB?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1524928254, "post_id": 50068760, "comment_id": 87171946, "body": "@H&#229;konH&#230;gland, <code>read</code> and <code>readline</code> are both buffered io, so both should use the same buffer. (8 KiB in newer Perls.) /// I meant to use <code>sysread</code>, though you should still get savings from using <code>read</code>. Fewer scalars built, and more time in C/less time in Perl. Will switch to <code>sysread</code> when I can test."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 12, "last_activity_date": 1524949927, "last_edit_date": 1524949927, "creation_date": 1524855715, "answer_id": 50068760, "question_id": 50067877, "link": "https://stackoverflow.com/questions/50067877/delete-a-specific-line-from-a-12gb-file/50068760#50068760", "title": "Delete a specific line from a 12GB file", "body": "<p>Tie::File is never the answer.</p>\n\n<ul>\n<li>It's <em>insanely</em> slow.</li>\n<li>It can use up more memory than just slurping the entire file into memory, even if you limit the size of its buffer.</li>\n</ul>\n\n<p>You are encountering both of those problems. You encounter every line of the file, so Tie::File will read the entire file and store the index of every line in memory. This takes 28 bytes per line on a 64-bit build of Perl (not counting any overhead in the memory allocator).</p>\n\n<hr>\n\n<p>To delete the last 9 lines of the file, you can use the following:</p>\n\n<pre><code>use File::ReadBackwards qw( );\n\nmy $qfn = '...';\n\nmy $pos;\n{\n   my $bw = File::ReadBackwards-&gt;new($qfn)\n      or die(\"Can't open \\\"$qfn\\\": $!\\n\");\n\n   for (1..9) {\n      defined( my $line = $bw-&gt;readline() )\n         or last;\n   }\n\n   $pos = $bw-&gt;tell();\n}\n\n# Can't use $bw-&gt;get_handle because it's a read-only handle.\ntruncate($qfn, $pos)\n   or die(\"Can't truncate \\\"$qfn\\\": $!\\n\");\n</code></pre>\n\n<hr>\n\n<p>To delete an arbitrary line, you can use the following:</p>\n\n<pre><code>my $qfn = '...';\n\nopen(my $fh_src, '&lt;:raw', $qfn)\n   or die(\"Can't open \\\"$qfn\\\": $!\\n\");    \nopen(my $fh_dst, '+&lt;:raw', $qfn)\n   or die(\"Can't open \\\"$qfn\\\": $!\\n\");\n\nwhile (&lt;$fh_src&gt;) {\n   next if $. == 9;  # Or \"if /keyword/\", or whatever condition you want.\n\n   print($fh_dst $_)\n      or die($!);\n}\n\ntruncate($fh_dst, tell($fh_dst))\n   or die($!);    \n</code></pre>\n\n<p>The following optimized version assumes there's only one line (or block of lines) to remove:</p>\n\n<pre><code>use Fcntl qw( SEEK_CUR SEEK_SET );\n\nuse constant BLOCK_SIZE =&gt; 4*1024*1024;\n\nmy $qfn = 'file';\n\nopen(my $fh_src, '&lt;:raw', $qfn)\n   or die(\"Can't open \\\"$qfn\\\": $!\\n\");\nopen(my $fh_dst, '+&lt;:raw', $qfn)\n   or die(\"Can't open \\\"$qfn\\\": $!\\n\");\n\nmy $dst_pos;\nwhile (1) {\n   $dst_pos = tell($fh_src);\n   defined( my $line = &lt;$fh_src&gt; )\n      or do {\n         $dst_pos = undef;\n         last;\n      };\n\n   last if $. == 9;  # Or \"if /keyword/\", or whatever condition you want.\n}\n\nif (defined($dst_pos)) {\n   # We're switching from buffered I/O to unbuffered I/O,\n   # so we need to move the system file pointer from where the\n   # buffered read left off to where we actually finished reading.\n   sysseek($fh_src, tell($fh_src), SEEK_SET)\n      or die($!);\n\n   sysseek($fh_dst, $dst_pos, SEEK_SET)\n      or die($!);\n\n   while (1) {\n      my $rv = sysread($fh_src, my $buf, BLOCK_SIZE);\n      die($!) if !defined($rv);\n      last if !$rv;\n\n      my $written = 0;\n      while ($written &lt; length($buf)) {\n         my $rv = syswrite($fh_dst, $buf, length($buf)-$written, $written);\n         die($!) if !defined($rv);\n         $written += $rv;\n      }\n   }\n\n   # Must use sysseek instead of tell with sysread/syswrite.    \n   truncate($fh_dst, sysseek($fh_dst, 0, SEEK_CUR))\n      or die($!);\n}\n</code></pre>\n"}], "owner": {"reputation": 31452, "user_id": 435559, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b7df6df16b0af400a1a7be5032152a5?s=128&d=identicon&r=PG&f=1", "display_name": "Vishwanath Dalvi", "link": "https://stackoverflow.com/users/435559/vishwanath-dalvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 2, "accepted_answer_id": 50068760, "answer_count": 1, "score": 9, "last_activity_date": 1524949927, "creation_date": 1524851902, "last_edit_date": 1524859549, "question_id": 50067877, "link": "https://stackoverflow.com/questions/50067877/delete-a-specific-line-from-a-12gb-file", "title": "Delete a specific line from a 12GB file", "body": "<p>I'm trying to delete a specific line from a 12GB text file.</p>\n\n<p>I do not have the <code>sed -i</code> option available on HP-UX, and other options like saving to a temporary file aren't working because I have only 20GB space available with 12 GB already used by the text file.</p>\n\n<p>Considering the space requirement I'm trying to do this using Perl.</p>\n\n<p>This solution works to delete last 9 lines from a file of 12 GB.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Tie::File;\n\ntie my @lines, 'Tie::File', 'test.txt' or die \"$!\\n\";\n$#lines -= 9;\nuntie @lines;\n</code></pre>\n\n<p>I want to modify the above code to delete any specific line number.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524847650, "post_id": 50066838, "comment_id": 87150342, "body": "This is a shell problem. Use <code>&#39;...&#39;</code> around your code, not <code>&quot;...&quot;</code>."}, {"owner": {"reputation": 87, "user_id": 5119439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V6GcM.png?s=128&g=1", "display_name": "Hiago Prata", "link": "https://stackoverflow.com/users/5119439/hiago-prata"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1525090532, "post_id": 50066838, "comment_id": 87217161, "body": "@melpomene, this is really a thing. I have totally forgotten this could mess with the command. Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 5119439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V6GcM.png?s=128&g=1", "display_name": "Hiago Prata", "link": "https://stackoverflow.com/users/5119439/hiago-prata"}, "edited": false, "score": 0, "creation_date": 1525090831, "post_id": 50066920, "comment_id": 87217338, "body": "Yeah, as @melpomene stated, the misquoting was really an issue. But the <code>\\1</code> is used to replace the matched group with the same text. That was just a workaround for not knowing the <code>m&#47;&#47;</code> command. And your command does not work."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 87, "user_id": 5119439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V6GcM.png?s=128&g=1", "display_name": "Hiago Prata", "link": "https://stackoverflow.com/users/5119439/hiago-prata"}, "edited": false, "score": 0, "creation_date": 1525114682, "post_id": 50066920, "comment_id": 87230380, "body": "@HiagoPrata No, if you want to refer to the matched text, use <code>$1</code>, not <code>\\1</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 87, "user_id": 5119439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V6GcM.png?s=128&g=1", "display_name": "Hiago Prata", "link": "https://stackoverflow.com/users/5119439/hiago-prata"}, "edited": false, "score": 0, "creation_date": 1525114790, "post_id": 50066920, "comment_id": 87230440, "body": "@HiagoPrata There was a typo in the pattern. I changed <code>\\S</code> to <code>\\s</code> and now it works."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1525134132, "post_id": 50066920, "comment_id": 87237066, "body": "Thanks @melpomene"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1525136384, "last_edit_date": 1525136384, "creation_date": 1524847461, "answer_id": 50066920, "question_id": 50066838, "link": "https://stackoverflow.com/questions/50066838/regex-to-match-string-after-last-space-and-before-a-square-bracket/50066920#50066920", "title": "Regex to match string after last space and before a square bracket", "body": "<p>Four issues:</p>\n\n<ul>\n<li>You are misquoting the command, causing the shell to interpolate <code>$1</code>.</li>\n<li>You are using <code>\\1</code> outside of a regular expression, which makes no sense.</li>\n<li>You are using a substitution when it makes no sense to do so.</li>\n<li>You rely on Perl internals to find the correct match rather than using an accurate pattern.</li>\n</ul>\n\n<p>Fix:</p>\n\n<pre><code>perl -nle'print $1 if / \\s ( [^\\s\\[]+ ) \\[ /x' file\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1524850374, "post_id": 50067294, "comment_id": 87151445, "body": "yep, you&#39;re right. im missing single quotes. missed that. corrected"}, {"owner": {"reputation": 87, "user_id": 5119439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V6GcM.png?s=128&g=1", "display_name": "Hiago Prata", "link": "https://stackoverflow.com/users/5119439/hiago-prata"}, "edited": false, "score": 0, "creation_date": 1525090936, "post_id": 50067294, "comment_id": 87217391, "body": "the first command you posted worked well. The later one did not. Thank you!"}], "tags": [], "owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "is_accepted": true, "score": 0, "last_activity_date": 1524850389, "last_edit_date": 1524850389, "creation_date": 1524849227, "answer_id": 50067294, "question_id": 50066838, "link": "https://stackoverflow.com/questions/50066838/regex-to-match-string-after-last-space-and-before-a-square-bracket/50067294#50067294", "title": "Regex to match string after last space and before a square bracket", "body": "<p>You're getting match and replace confused. the match is right and you repalce with with capture group one. however, you do not replace the text after and including group 2 \"([)\". </p>\n\n<p>you either want to match and print </p>\n\n<pre><code>cat file-containing-pattern.txt | perl -ne 'm/.*\\s(.*)\\[/ and print $1;'\n</code></pre>\n\n<p>or you can replace everything but the match</p>\n\n<pre><code> cat file-containing-pattern.txt | perl -pe 's/.*\\s(.*)\\[.*/$1/;'\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 5119439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V6GcM.png?s=128&g=1", "display_name": "Hiago Prata", "link": "https://stackoverflow.com/users/5119439/hiago-prata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 50067294, "answer_count": 2, "score": 0, "last_activity_date": 1525136384, "creation_date": 1524847083, "question_id": 50066838, "link": "https://stackoverflow.com/questions/50066838/regex-to-match-string-after-last-space-and-before-a-square-bracket", "title": "Regex to match string after last space and before a square bracket", "body": "<p>I have some text following the pattern bellow:</p>\n\n<blockquote>\n  <p>Some text with many spaces[some text inside square brackets].</p>\n</blockquote>\n\n<p>I wanted a regular expression that matches the word after the last space character, and before the opening square bracket. In this example, it would be 'spaces'.</p>\n\n<p>After trying this regex <strong>.*\\s(.*)\\[</strong> on this <a href=\"https://regex101.com/r/9wsmd3/1/\" rel=\"nofollow noreferrer\">online tester</a>, I gave it a try using a Perl inline  </p>\n\n<pre><code>$ cat file-containing-pattern.txt | perl -ne \"print $1 if s/.*\\s(.*)(\\[)/\\1/\"\n</code></pre>\n\n<p>but it prints:</p>\n\n<blockquote>\n  <p>spacessome text inside square brackets].</p>\n</blockquote>\n\n<p>Any idea of how to solve this?</p>\n"}, {"tags": ["perl", "substring"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1524844165, "post_id": 50065415, "comment_id": 87148588, "body": "Welcome to Stack Overflow and the Perl tag. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. If you already have code to do this for your whole string, that&#39;s good. Please <a href=\"https://stackoverflow.com/posts/50065415/edit\">edit</a> your question and include that. We are much more inclined to help with a concrete problem than with what reads mostly like a list of requirements. Please also explain in more detail what you mean by <i>over 50%</i>. Is that the number of characters that are lower-case, in relation to all characters?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1524844281, "post_id": 50065415, "comment_id": 87148637, "body": "As a general suggestion, it sounds like you might want to do this with a regular expression. You don&#39;t always have to do everything in a complicated regex. I&#39;d probably split the string up into regions, and process each one completely individually. If you do that, your solution for the whole string should just work."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524846474, "post_id": 50065415, "comment_id": 87149801, "body": "Split the problem into steps that you can solve using <code>my @blocks = $string =~ &#47;.*&gt;&#47;g</code> You know the rest from there."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1524847229, "post_id": 50066146, "comment_id": 87150144, "body": "While this is an approximation to an answer, there are number of issues. The OP says that <i>&quot;Data blocks begins with &quot;a number&quot; and end with &gt;&quot;</i> yet your data blocks begin with a <code>&gt;</code> and numbers are ignored. This unnecessarily perverts the concept and provides no advantages. Your <code>@targets</code> array contains a superfluous final element with the value <code>&gt;</code> which obviously contains no letters of either case. Also, it is unconventional to use <code>s&#47;&#47;&#47;</code> replacing characters with themselves to count characters in a string: the canonical way is to use <code>tr&#47;&#47;&#47;</code>, as in <code>$target_lc = $target =~ tr&#47;a-z&#47;&#47;</code> etc."}, {"owner": {"reputation": 70, "user_id": 5660161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0ae7c973292d4cf79688567a90d2a0?s=128&d=identicon&r=PG&f=1", "display_name": "dkwan33", "link": "https://stackoverflow.com/users/5660161/dkwan33"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524847844, "post_id": 50066146, "comment_id": 87150418, "body": "Borodin is absolutely right. I have edited the solution to be more correct."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1524848098, "post_id": 50066146, "comment_id": 87150514, "body": "Your update is incorrect. <code>tr&#47;&#47;&#47;</code> does not use regular expressions, so square brackets <code>[</code> and <code>]</code> will be counted as well."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524848258, "post_id": 50066146, "comment_id": 87150570, "body": "There is no need for an elaborate <code>split</code> call when a simple global capture will do fine: <code>my @targets = $string =~ &#47;\\d.*?&gt;&#47;g</code>. You also know nothing about the contents of the substrings between the number and the <code>&gt;</code>, so it is wrong to assume that it will match <code>\\w+</code>. Either <code>.*?</code> or <code>[^&gt;]*</code>would be fine."}], "tags": [], "owner": {"reputation": 70, "user_id": 5660161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0ae7c973292d4cf79688567a90d2a0?s=128&d=identicon&r=PG&f=1", "display_name": "dkwan33", "link": "https://stackoverflow.com/users/5660161/dkwan33"}, "is_accepted": true, "score": 0, "last_activity_date": 1524848266, "last_edit_date": 1524848266, "creation_date": 1524844497, "answer_id": 50066146, "question_id": 50065415, "link": "https://stackoverflow.com/questions/50065415/count-matches-between-specific-substrings/50066146#50066146", "title": "Count matches between specific substrings", "body": "<p>You can separate each target section of the string into an array using split.\nThen iterate through the array and do your count.</p>\n\n<pre><code>my $string = 'AAAAaaa&gt;1BBbbbbbbb&gt;2CCCCCCCCccccc&gt;3DDDDDDDDDddd&gt;4FFFFfffffff&gt;';\n\nmy @targets = split(/(?=\\d+\\w+&gt;)/, $string);\nmy $successes = 0;\n\nforeach my $target (@targets){\n    my $target_lc = $target =~ tr/a-z//;\n    my $target_uc = $target =~ tr/A-Z//;\n\n    if($target_lc &gt; $target_uc){\n        $successes++;\n    }\n}\n\nprint $successes;\n</code></pre>\n\n<p>OUTPUT = 2</p>\n"}], "owner": {"reputation": 3, "user_id": 9711072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bbf6b30883c6b953de0add8e0aef024?s=128&d=identicon&r=PG&f=1", "display_name": "mrkvmz", "link": "https://stackoverflow.com/users/9711072/mrkvmz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 50066146, "answer_count": 1, "score": -5, "last_activity_date": 1524848266, "creation_date": 1524841968, "last_edit_date": 1524847387, "question_id": 50065415, "link": "https://stackoverflow.com/questions/50065415/count-matches-between-specific-substrings", "title": "Count matches between specific substrings", "body": "<p>I have a string</p>\n\n<pre><code>1AAAAaaa&gt;###_1BBbbbbbbb&gt;###_2CCCCCCCCccccc\n</code></pre>\n\n<p>Data blocks begins with \"a number\" and end with <code>&gt;</code>.</p>\n\n<p>I need to calculate in how many of those blocks lower case letters outnumber upper case.</p>\n\n<p>As an answer I want to get</p>\n\n<pre><code>there are x places between number and &gt;, where lowercase is over 50%.\n</code></pre>\n\n<p>I understand how to do it for the whole string, but not for the separate regions.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1524841844, "post_id": 50065305, "comment_id": 87147317, "body": "Perl doesn&#39;t use PCRE."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524841891, "post_id": 50065305, "comment_id": 87147343, "body": "You forgot to enable warnings."}, {"owner": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524842567, "post_id": 50065305, "comment_id": 87147746, "body": "What warnings? Okay. I checked this. So what standard of regex use Perl? Own?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1524844067, "post_id": 50065305, "comment_id": 87148536, "body": "Warnings as in <code>use warnings;</code> (and <code>use strict;</code>, of course). Perl should have told you something about your code."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524844155, "post_id": 50065305, "comment_id": 87148584, "body": "What do you mean, &quot;standard&quot;? There&#39;s a POSIX standard for regexes (two of them, actually (basic/extended)), but everyone ignores it. All tools behave slightly differently when it comes to regexes (unless they use the same regex library internally). Perl has its own. PCRE is an independent library (written in C++, I think?) that tries to mimic Perl&#39;s regexes."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "edited": false, "score": 0, "creation_date": 1524845040, "post_id": 50066031, "comment_id": 87149039, "body": "Its work. But how do if statement for my example? To do substitiution only when pattern havent &quot; &quot;"}, {"owner": {"reputation": 3388, "user_id": 9534819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdbae473f8d26eb6a10d85ab897e91e?s=128&d=identicon&r=PG&f=1", "display_name": "Matt.G", "link": "https://stackoverflow.com/users/9534819/matt-g"}, "reply_to_user": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "edited": false, "score": 0, "creation_date": 1524845554, "post_id": 50066031, "comment_id": 87149300, "body": "not sure if I understood your question correctly. could you please elaborate? Thanks."}, {"owner": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "edited": false, "score": 0, "creation_date": 1524845863, "post_id": 50066031, "comment_id": 87149457, "body": "I add ifs statements to my question near my substitution. &quot;IF&quot; should mean when match 1..30:1 without &quot; around."}, {"owner": {"reputation": 3388, "user_id": 9534819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdbae473f8d26eb6a10d85ab897e91e?s=128&d=identicon&r=PG&f=1", "display_name": "Matt.G", "link": "https://stackoverflow.com/users/9534819/matt-g"}, "reply_to_user": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "edited": false, "score": 0, "creation_date": 1524846059, "post_id": 50066031, "comment_id": 87149586, "body": "if we need to do negative lookbehind and negative look ahead try this <code>(?&lt;!&quot;)\\b(\\d+\\.\\.\\d+(?::\\d+)*)\\b(?!&quot;)</code> <a href=\"https://regex101.com/r/BuP83q/2\" rel=\"nofollow noreferrer\">Demo</a>"}, {"owner": {"reputation": 3388, "user_id": 9534819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdbae473f8d26eb6a10d85ab897e91e?s=128&d=identicon&r=PG&f=1", "display_name": "Matt.G", "link": "https://stackoverflow.com/users/9534819/matt-g"}, "reply_to_user": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "edited": false, "score": 0, "creation_date": 1524849105, "post_id": 50066031, "comment_id": 87150914, "body": "with the regex in the comment above, you might not need the if condition"}, {"owner": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "edited": false, "score": 0, "creation_date": 1524850136, "post_id": 50066031, "comment_id": 87151346, "body": "Work with substitution from my question. But why dont work with this: if <code>($substitute =~ &#47;(?&lt;!&quot;)\\b([-\\d+\\.]*\\.\\.[-\\d+\\.]*:[-\\d+\\.]*)&#47;)</code> ?"}, {"owner": {"reputation": 3388, "user_id": 9534819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdbae473f8d26eb6a10d85ab897e91e?s=128&d=identicon&r=PG&f=1", "display_name": "Matt.G", "link": "https://stackoverflow.com/users/9534819/matt-g"}, "reply_to_user": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "edited": false, "score": 0, "creation_date": 1524850735, "post_id": 50066031, "comment_id": 87151609, "body": "see the <a href=\"https://regex101.com/r/BuP83q/3\" rel=\"nofollow noreferrer\">demo</a> with the regex inside the if condition. see its explanation: <code>Match a single character present in the list below [-\\d+\\.]* * Quantifier \u2014 Matches between zero and unlimited times, as many times as possible, giving back as needed (greedy) - matches the character - literally (case sensitive) \\d matches a digit (equal to [0-9]) + matches the character + literally (case sensitive) \\. matches the character . literally (case sensitive)</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524931696, "post_id": 50066031, "comment_id": 87172964, "body": "This is a question about Perl, not sed. Please substitute with <code>$1</code> rather than <code>\\1</code>, which means a single character with a code point of 1."}], "tags": [], "owner": {"reputation": 3388, "user_id": 9534819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdbae473f8d26eb6a10d85ab897e91e?s=128&d=identicon&r=PG&f=1", "display_name": "Matt.G", "link": "https://stackoverflow.com/users/9534819/matt-g"}, "is_accepted": false, "score": -2, "last_activity_date": 1524844104, "creation_date": 1524844104, "answer_id": 50066031, "question_id": 50065305, "link": "https://stackoverflow.com/questions/50065305/perl-how-to-apply-negative-lookbehing-lookahead-on-pattern/50066031#50066031", "title": "Perl - How to apply negative lookbehing/lookahead on pattern?", "body": "<p>Try Regex:</p>\n\n<pre><code>\"*(\\d+\\.\\.\\d+(?::\\d+)*)\"*\n</code></pre>\n\n<p>substituting with:</p>\n\n<pre><code>\"\\1\"\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/BuP83q/1\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1524845791, "creation_date": 1524841584, "last_edit_date": 1524845791, "question_id": 50065305, "link": "https://stackoverflow.com/questions/50065305/perl-how-to-apply-negative-lookbehing-lookahead-on-pattern", "title": "Perl - How to apply negative lookbehing/lookahead on pattern?", "body": "<p>I have problem to implement my regex. Below is string:</p>\n\n<pre><code>my $substitute = q(lalalla = 10..32:1\n[thrdddholds]\nbbbb = \"40..45:1\"\ncccc = 2..10:5\neqaeaeaea = 5\n\n[bss]\nTad1=3\nNbdfas43p =1..30:1\nNbDe524v_1231n= 1);\n</code></pre>\n\n<p>Substitution with pattern:</p>\n\n<pre><code>if ($substitute =~ /(?:(?:[\\d-\\.]+[, ]+)+[\\d-\\.]+)|([-\\d+\\.]*\\.\\.[-\\d+\\.]*:[-\\d+\\.]*)/) {\n  if ($substitute !~ /(\")(?:(?:[\\d-\\.]+[, ]+)+[\\d-\\.]+)(\")/g) {\n  $substitute =~ s/([-\\d+\\.]*\\.\\.[-\\d+\\.]*:[-\\d+\\.]*)/\"\\1\"/g;\n  }\n}\n</code></pre>\n\n<p>My result</p>\n\n<pre><code>lalalla = \"10..32:1\"\n\n[thrdddholds]\nbbbb = \"\"40..45:1\"\"\ncccc = \"2..10:5\"\neqaeaeaea = 5\n\n[bss]\nTad1=3\nNbdfas43p =\"1..30:1\"\nNbDe524v_1231n= 1\n</code></pre>\n\n<p>Problem is in line <code>bbbb = \"\"40..45:1\"\"</code> instead <code>\"\"</code> should be <code>\"</code> so fixed line should look like: <code>bbbb = \"40..45:1\"</code></p>\n\n<p>All expected result:</p>\n\n<pre><code>lalalla = \"10..32:1\"\n\n[thrdddholds]\nbbbb = \"40..45:1\"\ncccc = \"2..10:5\"\neqaeaeaea = 5\n\n[bss]\nTad1=3\nNbdfas43p =\"1..30:1\"\nNbDe524v_1231n= 1\n</code></pre>\n\n<p>How achieve it? I tried with negative look ahead and behind, but it work only on one char, not all string.</p>\n"}, {"tags": ["perl", "automated-tests", "perl-prove"], "owner": {"reputation": 65, "user_id": 5508051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1215450155138332/picture?type=large", "display_name": "Sudhir Mishra", "link": "https://stackoverflow.com/users/5508051/sudhir-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1524841901, "creation_date": 1524830074, "last_edit_date": 1524841901, "question_id": 50061874, "link": "https://stackoverflow.com/questions/50061874/tapharnessjunit-does-not-flush-output-to-stdout", "title": "TAP::Harness::JUnit does not flush output to STDOUT", "body": "<p>I am running a test script using the \n<a href=\"https://perldoc.perl.org/prove.html\" rel=\"nofollow noreferrer\"><code>prove</code></a> utility\nand\n<a href=\"https://metacpan.org/pod/TAP::Harness::JUnit\" rel=\"nofollow noreferrer\"><code>TAP::Harness::JUnit</code></a>.</p>\n\n<p>The output is getting buffered and not flushed immediately as compared to running with perl.</p>\n\n<pre><code>prove -v --timer --harness=TAP::Harness::JUnit &lt;script name&gt;\n</code></pre>\n\n<p>The same works fine when run locally on the machine itself. Is there any option available in prove or <code>TAP::Harness::JUnit</code> to flush the output on <code>STDOUT</code> as well as capture in an XML file</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524818708, "post_id": 50058308, "comment_id": 87133595, "body": "Why do you have two capture groups in your regex?"}, {"owner": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524819059, "post_id": 50058308, "comment_id": 87133784, "body": "I dont know... :D Propably to avoid matching strings without &#39;,&#39; in line. I dont need two groups."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1524819402, "post_id": 50058308, "comment_id": 87133996, "body": "See <a href=\"https://perldoc.perl.org/perlfaq4.html#How-do-I-determine-whether-a-scalar-is-a-number%2fwhole%2finteger%2ffloat%3f\" rel=\"nofollow noreferrer\">How do I determine whether a scalar is a number/whole/integer/float?</a> and <a href=\"https://metacpan.org/pod/Regexp::Common::number\" rel=\"nofollow noreferrer\">Regexp::Common::number</a>."}, {"owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "edited": false, "score": 0, "creation_date": 1524821619, "post_id": 50058308, "comment_id": 87135237, "body": "Based on your data (i&#39;m guessing you dont want commas saved), i would do &quot;my @match = $string =~ /[\\d.-]+/sg;&quot;however, you&#39;ll need to remove the unwanted lines from $string before you start (which you seem to have done but not show) ."}, {"owner": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "edited": false, "score": 0, "creation_date": 1524823222, "post_id": 50058308, "comment_id": 87136168, "body": "I need commas to create array of array in next step. ` foreach (@match) {           $_ =~ s/ //g;           my @dupa = split /,/, $_;           push @aoa, [@dupa];         }`"}], "answers": [{"tags": [], "owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "is_accepted": false, "score": 1, "last_activity_date": 1524819233, "creation_date": 1524819233, "answer_id": 50058759, "question_id": 50058308, "link": "https://stackoverflow.com/questions/50058308/perl-request-for-improvement-my-regex-match-only-with-positive-negative-intege/50058759#50058759", "title": "Perl: Request for improvement my REGEX (match only with positive/negative integers/decimals and commas)", "body": "<p>You have two parentheses groups, one inside the other. The inner one is yielding every second result. You should use <a href=\"https://stackoverflow.com/questions/3512471/what-is-a-non-capturing-group-what-does-do\">a non-capturing group</a> for the inner grouping.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "edited": false, "score": 0, "creation_date": 1524821894, "post_id": 50058771, "comment_id": 87135410, "body": "Its not matching first line values in my perl script:<code>$VAR1 = [           &#39;0.236, 0.382, 0.500, 0.618, 0.764, 1.000&#39;,           &#39;25,27,30, 32&#39;,           &#39;0.236, 0.382, 0.5, 0.764&#39;,           &#39;0.0125 , 0.0236, 0.0382, 0.05, 0.0764, 0.1&#39;         ]; </code>"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "edited": false, "score": 0, "creation_date": 1524823161, "post_id": 50058771, "comment_id": 87136128, "body": "Are you sure the string is as you have it in the question as I get all 5 blocks of numbers when I use that regex. The only real difference should be the inner capture group won&#39;t be appear in <code>@match</code>"}, {"owner": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "edited": false, "score": 0, "creation_date": 1524823628, "post_id": 50058771, "comment_id": 87136404, "body": "Okay. I had `  if ($string =~ /(?:(?:[\\d\\.-]+[, ]+)+[\\-\\d-\\.]+)/sg)` before matching. Its reason. Thanks for answer."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 1, "last_activity_date": 1524819298, "creation_date": 1524819298, "answer_id": 50058771, "question_id": 50058308, "link": "https://stackoverflow.com/questions/50058308/perl-request-for-improvement-my-regex-match-only-with-positive-negative-intege/50058771#50058771", "title": "Perl: Request for improvement my REGEX (match only with positive/negative integers/decimals and commas)", "body": "<p>Rather than using capture groups, you want to use clustering to group those parts of your regex together. Clustering is done by doing <code>(?:whatever)</code> rather than <code>(whatever)</code> so your code would become...</p>\n\n<pre><code>my @match = $string =~ /(?:(?:[\\d-\\.]+[, ]+)+[\\d-\\.]+)/sg;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1524846296, "last_edit_date": 1524846296, "creation_date": 1524844061, "answer_id": 50066014, "question_id": 50058308, "link": "https://stackoverflow.com/questions/50058308/perl-request-for-improvement-my-regex-match-only-with-positive-negative-intege/50066014#50066014", "title": "Perl: Request for improvement my REGEX (match only with positive/negative integers/decimals and commas)", "body": "<p>At a guess, this string is the contents of a file that you have read in its entirety to make things \"easier\". Unfortunately it means that you must explicitly cater for newline characters, which complicates things a lot</p>\n\n<p>Here's an example of what I would do using the <code>DATA</code> file handle. Buliding <code>@aoa</code> is reduced to a single statement. Of course you may open a file and use the handle from that instead</p>\n\n<p>Mistakes in your code have caused lines with only a single number (and no comma) to be ignored. It's possible that you need that behaviour, but I have \"fixed\" it here</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy @aoa = map { /-?\\d+(?:\\.\\d+)?/g } &lt;DATA&gt;;\n\nuse Data::Dumper;\nprint Dumper \\@aoa;\n\n__DATA__\nmin_entry = -0.236, 0, 0.236 , 0.382, 0.500, 0.618, 0.764\nmax_entry=0.236, 0.382, 0.500, 0.618, 0.764, 1.000\n#jakis komentarz\nrsi_confirm= 25,27,30, 32\nslope3 = 0.236, 0.382, 0.5, 0.764\nmin_tp=0.0125 , 0.0236, 0.0382, 0.05, 0.0764, 0.1\ninterval = 14\n\n[thresholds]\nlow = 40\nhigh = 40\npersistence = 9\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>$VAR1 = [\n          [\n            '-0.236',\n            '0',\n            '0.236',\n            '0.382',\n            '0.500',\n            '0.618',\n            '0.764'\n          ],\n          [\n            '0.236',\n            '0.382',\n            '0.500',\n            '0.618',\n            '0.764',\n            '1.000'\n          ],\n          [],\n          [\n            '25',\n            '27',\n            '30',\n            '32'\n          ],\n          [\n            '3',\n            '0.236',\n            '0.382',\n            '0.5',\n            '0.764'\n          ],\n          [\n            '0.0125',\n            '0.0236',\n            '0.0382',\n            '0.05',\n            '0.0764',\n            '0.1'\n          ],\n          [\n            '14'\n          ],\n          [],\n          [],\n          [\n            '40'\n          ],\n          [\n            '40'\n          ],\n          [\n            '9'\n          ]\n        ];\n</code></pre>\n\n<p>I also suspect that even this is not the best solution to your problem as you are discarding all the data labels so you have no idea which list of numbers belongs to which category except by position</p>\n\n<p>This alternative builds a hash of arrays so that the value is retained</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy %data;\n\nwhile ( &lt;DATA&gt; ) {\n     next unless /=/;\n     my ($key, @values) = /[-\\w.]+/g;\n     $data{$key} = \\@values;\n}\n\nuse Data::Dumper;\n\nprint Dumper \\%data;\n\n\n__DATA__\nmin_entry = -0.236, 0, 0.236 , 0.382, 0.500, 0.618, 0.764\nmax_entry=0.236, 0.382, 0.500, 0.618, 0.764, 1.000\n#jakis komentarz\nrsi_confirm= 25,27,30, 32\nslope3 = 0.236, 0.382, 0.5, 0.764\nmin_tp=0.0125 , 0.0236, 0.0382, 0.05, 0.0764, 0.1\ninterval = 14\n\n[thresholds]\nlow = 40\nhigh = 40\npersistence = 9\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>$VAR1 = {\n          'high' =&gt; [\n                      '40'\n                    ],\n          'interval' =&gt; [\n                          '14'\n                        ],\n          'slope3' =&gt; [\n                        '0.236',\n                        '0.382',\n                        '0.5',\n                        '0.764'\n                      ],\n          'persistence' =&gt; [\n                             '9'\n                           ],\n          'low' =&gt; [\n                     '40'\n                   ],\n          'min_tp' =&gt; [\n                        '0.0125',\n                        '0.0236',\n                        '0.0382',\n                        '0.05',\n                        '0.0764',\n                        '0.1'\n                      ],\n          'min_entry' =&gt; [\n                           '-0.236',\n                           '0',\n                           '0.236',\n                           '0.382',\n                           '0.500',\n                           '0.618',\n                           '0.764'\n                         ],\n          'max_entry' =&gt; [\n                           '0.236',\n                           '0.382',\n                           '0.500',\n                           '0.618',\n                           '0.764',\n                           '1.000'\n                         ],\n          'rsi_confirm' =&gt; [\n                             '25',\n                             '27',\n                             '30',\n                             '32'\n                           ]\n        };\n</code></pre>\n\n<p>This is the best I can do for you without understanding the full problem</p>\n"}], "owner": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 50058771, "answer_count": 3, "score": 1, "last_activity_date": 1524846296, "creation_date": 1524817569, "last_edit_date": 1524823477, "question_id": 50058308, "link": "https://stackoverflow.com/questions/50058308/perl-request-for-improvement-my-regex-match-only-with-positive-negative-intege", "title": "Perl: Request for improvement my REGEX (match only with positive/negative integers/decimals and commas)", "body": "<p>Its hard to describe what I would do. So I show it on example. </p>\n\n<p>My string:</p>\n\n<pre><code>my $string = q(\nmin_entry = -0.236, 0, 0.236 , 0.382, 0.500, 0.618, 0.764\nmax_entry=0.236, 0.382, 0.500, 0.618, 0.764, 1.000\n#jakis komentarz\nrsi_confirm= 25,27,30, 32\nslope3 = 0.236, 0.382, 0.5, 0.764\nmin_tp=0.0125 , 0.0236, 0.0382, 0.05, 0.0764, 0.1\ninterval = 14\n\n[thresholds]\nlow = 40\nhigh = 40\npersistence = 9\n</code></pre>\n\n<p>My match pattern:</p>\n\n<pre><code>my @match = $string =~ /(([\\d-\\.]+[, ]+)+[\\d-\\.]+)/sg;\nprint Dumper \\@match;\n</code></pre>\n\n<p>My results:</p>\n\n<pre><code>$VAR1 = [\n          '-0.236, 0, 0.236 , 0.382, 0.500, 0.618, 0.764',\n          '0.618, ',\n          '0.236, 0.382, 0.500, 0.618, 0.764, 1.000',\n          '0.764, ',\n          '25,27,30, 32',\n          '30, ',\n          '0.236, 0.382, 0.5, 0.764',\n          '0.5, ',\n          '0.0125 , 0.0236, 0.0382, 0.05, 0.0764, 0.1',\n          '0.0764, '\n        ];\n</code></pre>\n\n<p>I dont know why or how elemens with index 1( value '0.618, ',), 3 (value '0.764, ',), 5, 7, 9 are added with my regex. But I dont need it.</p>\n\n<p>Result I would like to achieve:</p>\n\n<pre><code>print Dumper \\@match;\n$VAR1 = [\n          '-0.236, 0, 0.236 , 0.382, 0.500, 0.618, 0.764',\n          '0.236, 0.382, 0.500, 0.618, 0.764, 1.000',\n          '25,27,30, 32',\n          '0.236, 0.382, 0.5, 0.764',\n          '0.0125 , 0.0236, 0.0382, 0.05, 0.0764, 0.1',\n        ]\n</code></pre>\n\n<p>Answer please base on my regex. The only repeating string identifying characters are \"=\" or \"= \" (before pattern) and \",\" (in the middle of the pattern)</p>\n"}, {"tags": ["bash", "perl", "awk", "hash"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1524808593, "post_id": 50055922, "comment_id": 87128583, "body": "To group things, use a hash"}], "answers": [{"comments": [{"owner": {"reputation": 1791, "user_id": 2300940, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d4e0c6ced7160325289bac815c9c4fb8?s=128&d=identicon&r=PG", "display_name": "user2300940", "link": "https://stackoverflow.com/users/2300940/user2300940"}, "edited": false, "score": 0, "creation_date": 1524819584, "post_id": 50056421, "comment_id": 87134080, "body": "Only got 0 in my output counts ??"}, {"owner": {"reputation": 1791, "user_id": 2300940, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d4e0c6ced7160325289bac815c9c4fb8?s=128&d=identicon&r=PG", "display_name": "user2300940", "link": "https://stackoverflow.com/users/2300940/user2300940"}, "edited": false, "score": 0, "creation_date": 1524819752, "post_id": 50056421, "comment_id": 87134163, "body": "I have ASCII text"}, {"owner": {"reputation": 1791, "user_id": 2300940, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d4e0c6ced7160325289bac815c9c4fb8?s=128&d=identicon&r=PG", "display_name": "user2300940", "link": "https://stackoverflow.com/users/2300940/user2300940"}, "edited": false, "score": 0, "creation_date": 1524820849, "post_id": 50056421, "comment_id": 87134771, "body": "&gt;CAAAAACTGCGATTACTTTTGC\t2&lt; &gt;CTGCCCTGCGGATGCTGTCCTGGACCTGTTGGCACCACAGACA\t4&lt;"}, {"owner": {"reputation": 12672, "user_id": 1200821, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Cm117.jpg?s=128&g=1", "display_name": "Juan Diego Godoy Robles", "link": "https://stackoverflow.com/users/1200821/juan-diego-godoy-robles"}, "reply_to_user": {"reputation": 1791, "user_id": 2300940, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d4e0c6ced7160325289bac815c9c4fb8?s=128&d=identicon&r=PG", "display_name": "user2300940", "link": "https://stackoverflow.com/users/2300940/user2300940"}, "edited": false, "score": 0, "creation_date": 1524821334, "post_id": 50056421, "comment_id": 87135055, "body": "Do you have <code>tabs</code> as separators?? try: <code>FS=&#39;_| |\\t&#39;</code>"}], "tags": [], "owner": {"reputation": 12672, "user_id": 1200821, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Cm117.jpg?s=128&g=1", "display_name": "Juan Diego Godoy Robles", "link": "https://stackoverflow.com/users/1200821/juan-diego-godoy-robles"}, "is_accepted": true, "score": 1, "last_activity_date": 1524810052, "creation_date": 1524810052, "answer_id": 50056421, "question_id": 50055922, "link": "https://stackoverflow.com/questions/50055922/total-one-column-of-a-file-grouped-by-two-other-columns/50056421#50056421", "title": "Total one column of a file grouped by two other columns", "body": "<p>Using <code>awk</code>:</p>\n\n<pre><code>awk '{a[$1]+=$NF}END{for (i in a){print i,a[i]}}' FS='_| ' file\n</code></pre>\n\n<p><strong>Result</strong></p>\n\n<pre><code>URS0000003804-lncRNA 6\nURS0000001D42-antisense 232\nURS0000003CBA-antisense 14\nURS0000003F61-antisense 59\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1791, "user_id": 2300940, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d4e0c6ced7160325289bac815c9c4fb8?s=128&d=identicon&r=PG", "display_name": "user2300940", "link": "https://stackoverflow.com/users/2300940/user2300940"}, "edited": false, "score": 0, "creation_date": 1524820950, "post_id": 50056663, "comment_id": 87134823, "body": "How do you change the output to have tab between the name and the count?"}, {"owner": {"reputation": 1791, "user_id": 2300940, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d4e0c6ced7160325289bac815c9c4fb8?s=128&d=identicon&r=PG", "display_name": "user2300940", "link": "https://stackoverflow.com/users/2300940/user2300940"}, "edited": false, "score": 0, "creation_date": 1524821147, "post_id": 50056663, "comment_id": 87134951, "body": "Like this?: print &quot;$k\\t$v\\n&quot;;"}], "tags": [], "owner": {"reputation": 2307, "user_id": 1611362, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f5ea82b95c95ab14034a879cfaedb79e?s=128&d=identicon&r=PG", "display_name": "pitseeker", "link": "https://stackoverflow.com/users/1611362/pitseeker"}, "is_accepted": false, "score": 1, "last_activity_date": 1524822904, "last_edit_date": 1524822904, "creation_date": 1524811132, "answer_id": 50056663, "question_id": 50055922, "link": "https://stackoverflow.com/questions/50055922/total-one-column-of-a-file-grouped-by-two-other-columns/50056663#50056663", "title": "Total one column of a file grouped by two other columns", "body": "<p>Using a perl hash:</p>\n\n<p>Script:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nwhile (my ($key, $value) = &lt;&gt; =~ /^(.+)_.+\\s+(\\d+)/) {\n  $hash{$key} += $value;\n}\n\nwhile(my($k, $v) = each %hash) { \n  print \"$k\\t$v\\n\";\n}\n</code></pre>\n\n<p>Calling it:</p>\n\n<pre><code>$ script.pl &lt; file\nURS0000003CBA-antisense:  14\nURS0000003F61-antisense:  59\nURS0000003804-lncRNA:  6\nURS0000001D42-antisense:  232\n$\n</code></pre>\n\n<p>Probably can be done shorter, too. ;-)</p>\n\n<p>And <a href=\"https://stackoverflow.com/questions/7610445/reading-an-entire-file-into-a-hash-in-perl\">here's</a> another question for a very similar task with lots of answers.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1524851058, "creation_date": 1524851058, "answer_id": 50067679, "question_id": 50055922, "link": "https://stackoverflow.com/questions/50055922/total-one-column-of-a-file-grouped-by-two-other-columns/50067679#50067679", "title": "Total one column of a file grouped by two other columns", "body": "<p>Here's a Perl solution</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy %data;\n\nwhile ( &lt;DATA&gt; ) {\n    my ( $f1, $f2, $seq, $n ) = m/[^-_\\s]+/g;\n    $data{$f1}{$f2} += $fields[3];\n}\n\nfor my $f1 ( keys %data ) {\n\n    for my $f2 ( keys %{ $data{$f1} } ) {\n        printf \"%s-%s %d\\n\", $f1, $f2, $data{$f1}{$f2};\n    }\n}\n\n__DATA__\nURS0000001D42-antisense_ATTTCGGTTGGGGAA 208\nURS0000001D42-antisense_CATGCTCATAAGGAA 24\nURS0000003804-lncRNA_GAGATCCTGGGTTTT    6\nURS0000003CBA-antisense_CTGGGCTAGTGAACGCGGCGAAGT        14\nURS0000003F61-antisense_AAAGTGCACTTGGACG        55\nURS0000003F61-antisense_AAAGTGCACTTGGACGAA      4\n</code></pre>\n\n<h2>output</h2>\n\n<pre><code>URS0000003CBA-antisense 14\nURS0000001D42-antisense 232\nURS0000003804-lncRNA 6\nURS0000003F61-antisense 59\n</code></pre>\n\n<p>The output is unordered because Perl hashes have no inherent order. It is a little more difficult to keep the output in the same order as the input data, as it is necessary to keep an array for each hash that keeps track of the order that the keys were created</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy ( %data, @keys );\n\nwhile ( &lt;DATA&gt; ) {\n\n    my ( $f1, $f2, $seq, $n ) =/ [^-_\\s]+/g;\n\n    push @keys, $f1 unless $data{$f1};\n\n    my $h2 = $data{$f1} //= {};\n\n    push @{ $h2-&gt;{''} }, $f2 unless $h2-&gt;{$f2};\n\n    $h2-&gt;{$f2} += $n;\n}\n\nfor my $f1 ( @keys ) {\n\n    for my $f2 ( @{ $data{$f1}{''} } ) {\n        printf \"%s-%s %d\\n\", $f1, $f2, $data{$f1}{$f2};\n    }\n}\n\n__DATA__\nURS0000001D42-antisense_ATTTCGGTTGGGGAA 208\nURS0000001D42-antisense_CATGCTCATAAGGAA 24\nURS0000003804-lncRNA_GAGATCCTGGGTTTT    6\nURS0000003CBA-antisense_CTGGGCTAGTGAACGCGGCGAAGT        14\nURS0000003F61-antisense_AAAGTGCACTTGGACG        55\nURS0000003F61-antisense_AAAGTGCACTTGGACGAA      4\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>URS0000001D42-antisense 232\nURS0000003804-lncRNA 6\nURS0000003CBA-antisense 14\nURS0000003F61-antisense 59\n</code></pre>\n"}], "owner": {"reputation": 1791, "user_id": 2300940, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d4e0c6ced7160325289bac815c9c4fb8?s=128&d=identicon&r=PG", "display_name": "user2300940", "link": "https://stackoverflow.com/users/2300940/user2300940"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 50056421, "answer_count": 3, "score": -1, "last_activity_date": 1524851171, "creation_date": 1524807697, "last_edit_date": 1524851171, "question_id": 50055922, "link": "https://stackoverflow.com/questions/50055922/total-one-column-of-a-file-grouped-by-two-other-columns", "title": "Total one column of a file grouped by two other columns", "body": "<p>I want to sum rows based on similar string before the first \"-\" sign. I have tried R, but the file is too big. </p>\n\n<p>in  </p>\n\n<pre><code>URS0000001D42-antisense_ATTTCGGTTGGGGAA 208\nURS0000001D42-antisense_CATGCTCATAAGGAA 24\nURS0000003804-lncRNA_GAGATCCTGGGTTTT    6\nURS0000003CBA-antisense_CTGGGCTAGTGAACGCGGCGAAGT        14\nURS0000003F61-antisense_AAAGTGCACTTGGACG        55\nURS0000003F61-antisense_AAAGTGCACTTGGACGAA      4\n</code></pre>\n\n<p>out </p>\n\n<pre><code>URS0000001D42-antisense 232\nURS0000003804-lncRNA 6\nURS0000003CBA-antisense 14\nURS0000003F61-antisense 59\n</code></pre>\n"}, {"tags": ["perl", "conditional"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1524807158, "post_id": 50053826, "comment_id": 87128110, "body": "Please see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 134, "user_id": 9678193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4fea879a99e77e9f3f59410018d5e1d?s=128&d=identicon&r=PG&f=1", "display_name": "Viqtoh", "link": "https://stackoverflow.com/users/9678193/viqtoh"}, "edited": false, "score": 0, "creation_date": 1524794415, "post_id": 50053918, "comment_id": 87124854, "body": "It sure did! Thanks a lot!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524807046, "post_id": 50053918, "comment_id": 87128075, "body": "To split hairs: (1) &quot;<i>assigning each to <code>$n</code></i>&quot; in the code comment should be <i>aliasing each to <code>$n</code></i>. If <code>$n</code> gets changed in the loop the array element does, too. (2) the <code>qw( ... )</code> returns strings, not numbers.  They&#39;ll be used as numbers in the right context but making a point of assigning <code>qw(..)</code> to <code>@numbers</code> may be a little itchy.  Why not use a list, <code>(12, 45, ...)</code>?"}], "tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": true, "score": 3, "last_activity_date": 1524793220, "last_edit_date": 1524793220, "creation_date": 1524792098, "answer_id": 50053918, "question_id": 50053826, "link": "https://stackoverflow.com/questions/50053826/need-help-creating-a-conditional-statement-with-array/50053918#50053918", "title": "Need help creating a conditional statement with array", "body": "<p>You need to use a <code>for</code> (or <code>foreach</code>) loop.</p>\n\n<pre><code>for my $n (@numbers) {    # Loops over @numbers, assigning each to $n\n    if ( $n % 2 == 0 ) {\n        print \"$n is even\"\n    }\n}\n</code></pre>\n\n<p>Additionally, this is rather un-idiomatic</p>\n\n<pre><code>my $numbers='23 45 34 12 9 3 56';\nchomp $numbers;\nmy @getnum= (split(/ /, $numbers));\n</code></pre>\n\n<p>If you have a string you wish to split on whitespace, there is a special way to do that in Perl</p>\n\n<pre><code>split( ' ', $string );\n</code></pre>\n\n<p>This will split on arbitrary whitespace (and will strip leading and trailing whitespace), eg.</p>\n\n<pre><code>my @words = split( ' ', '   one two    three  ' );\n# @words is ('one', 'two', 'three')\n</code></pre>\n\n<p>But if you are just hardcoding the number in your script itself, you can bypass the <code>split</code> all-together and use the 'quote-words' syntax</p>\n\n<pre><code>my @numbers = qw( 23 45 34 12 9 3 56 );\n</code></pre>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 134, "user_id": 9678193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4fea879a99e77e9f3f59410018d5e1d?s=128&d=identicon&r=PG&f=1", "display_name": "Viqtoh", "link": "https://stackoverflow.com/users/9678193/viqtoh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "accepted_answer_id": 50053918, "answer_count": 1, "score": 0, "last_activity_date": 1524793220, "creation_date": 1524791092, "question_id": 50053826, "link": "https://stackoverflow.com/questions/50053826/need-help-creating-a-conditional-statement-with-array", "title": "Need help creating a conditional statement with array", "body": "<p>I wanted to create a conditional statement that would say if an element of an array is odd or even after getting the elements of the array from a line. Here's the code:</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\nmy $numbers='23 45 34 12 9 3 56';\nchomp $numbers;\nmy @getnum= (split(/ /, $numbers));\nmy $a;\nif($getnum[0]&gt;10){\n  $a=$getnum[0];\n  }\nif($a%2==0){\n  print $a, \" is even\";\n  }\nelse{\nprint $a, \" is odd\";\n}\n</code></pre>\n\n<p>Now the problem is I only did it for the first element. Is there a way I can do this for all elements without creating a conditional statement for each? Thanks for your help!</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1524781239, "creation_date": 1524781239, "answer_id": 50052645, "question_id": 50052595, "link": "https://stackoverflow.com/questions/50052595/how-to-get-values-from-a-line-in-perl/50052645#50052645", "title": "How to get values from a line in perl", "body": "<p>Use the diamond operator or <a href=\"http://p3rl.org/readline\" rel=\"nofollow noreferrer\">readline</a>.</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nmy @numbers = split ' ', &lt;&gt;;\nfor my $number (@numbers) {\n    print \"$number is even.\\n\" if $number &gt; 10\n                               &amp;&amp; $number % 2 == 0;\n}\n</code></pre>\n\n<ul>\n<li><a href=\"http://p3rl.org/split\" rel=\"nofollow noreferrer\">split</a> turns the input string like <code>12 13 14</code> into a list of numbers (12, 13, and 14).</li>\n<li><code>%</code> is the modulo operator. Even numbers have the remainder of 0 when divided by 2.</li>\n</ul>\n"}], "owner": {"reputation": 134, "user_id": 9678193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4fea879a99e77e9f3f59410018d5e1d?s=128&d=identicon&r=PG&f=1", "display_name": "Viqtoh", "link": "https://stackoverflow.com/users/9678193/viqtoh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524785692, "creation_date": 1524780933, "question_id": 50052595, "link": "https://stackoverflow.com/questions/50052595/how-to-get-values-from-a-line-in-perl", "title": "How to get values from a line in perl", "body": "<p>I'm still very new in perl and I wanted to  get numbers from a line and check if they are even when greater than 10 but I'm stuck at where I have to get the values from a line. Thanks for your help!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1524775808, "post_id": 50051282, "comment_id": 87119566, "body": "Instead of an array, why not just use another hash? Changing the <code>push</code> to <code>$name_hash{$st_name}{$end_name}++</code> should get you what you want..."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1524775724, "creation_date": 1524775724, "answer_id": 50051609, "question_id": 50051282, "link": "https://stackoverflow.com/questions/50051282/array-within-hash-in-perl/50051609#50051609", "title": "Array within hash in perl", "body": "<p>Use a hash to count the repeated names:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy %name_hash = (\n    firstname =&gt; [qw[\n        lastname1 lastname1 lastname1\n        lastname2 lastname2 lastname2\n        lastname3 lastname3 ]]);\n\nfor my $first_name (sort keys %name_hash) {\n    my %count;\n    ++$count{$_} for @{ $name_hash{$first_name} };\n    print \"$first_name : $_ : $count{$_}\\n\" for sort keys %count;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 825, "user_id": 5893468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcb7551f9c6af39046f24142ae1c42e1?s=128&d=identicon&r=PG&f=1", "display_name": "pamcevoy", "link": "https://stackoverflow.com/users/5893468/pamcevoy"}, "is_accepted": false, "score": 0, "last_activity_date": 1525192346, "creation_date": 1525192346, "answer_id": 50120249, "question_id": 50051282, "link": "https://stackoverflow.com/questions/50051282/array-within-hash-in-perl/50120249#50120249", "title": "Array within hash in perl", "body": "<pre><code># setup data for testing\nsub _GetNamesHash {\n    my $names_hash = {\n        'James' =&gt; [qw(Smith Jones Smith Adams Baldwin Kirk Smith)],\n        'John'  =&gt; [qw(Smith Adams Smith Adams Henry Hancock)],\n    };\n    return $names_hash;\n}\n\n# count the last names for each first name\nsub _CountNames {\n    # start with a hash of first_name =&gt; arrayref of last_name\n    my $names_hash = _GetNamesHash();\n\n    # put into a hash of first_name =&gt;\n    # arrayref of hashref of last_name =&gt; count\n    my $name_counts = {};\n    foreach my $first_name (keys %$names_hash) {\n        $name_counts-&gt;{$first_name} = {}; # hash of last_name =&gt; count\n        foreach my $last_name (@{ $names_hash-&gt;{$first_name} }) {\n            $name_counts-&gt;{$first_name}-&gt;{$last_name}++; # count this last_name\n        }\n    }\n\n    # show counts\n    foreach my $first_name (sort keys %$name_counts) {\n        my $last_name_counts = $name_counts-&gt;{$first_name};\n        foreach my $last_name (sort keys %$last_name_counts) {\n            my $count = $last_name_counts-&gt;{$last_name};\n            printf(\"%s : %s : %d\\n\", $first_name, $last_name, $count);\n        }\n    }\n\n    return;\n}\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 4417286, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/3dcwY.jpg?s=128&g=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/4417286/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 50051609, "answer_count": 2, "score": 0, "last_activity_date": 1525192346, "creation_date": 1524774236, "question_id": 50051282, "link": "https://stackoverflow.com/questions/50051282/array-within-hash-in-perl", "title": "Array within hash in perl", "body": "<p>How I can sort the value of hash and count them for related key.</p>\n\n<p>For example : \npush @{$name_hash{$st_name}},$end_name;</p>\n\n<pre><code> $VAR1 = 'firstname')';\n    $VAR2 = [\n      'lastname1',\n      'lastname1',\n      'lastname1',\n      'lastname2',\n      'lastname2',\n      'lastname2',\n      'lastname3',\n      'lastname3',\n       ] \n</code></pre>\n\n<p>I need table like</p>\n\n<pre><code>    `firstname : lastname1 : 3`  \n\n    `firstname : lastname2 : 3`\n\n    `firstname : lastname3 : 2`\n</code></pre>\n\n<p>I tried  using some counter but its failing either at start where I am having only value multiple time or  at the end of the last value (in this case lastname3). </p>\n\n<pre><code>foreach $n (sort keys %name_hash) {\n    $ecounter =0; $temp2 = \"NA\"; $tcount =0; $p =0;\n    foreach $lastn (sort values @{$name_hash{$n}}) {\n        $ecounter ++ if ($lastn eq $temp2);\n        $tcount++;\n        if (($tcount) &gt; ($ecounter+1) ){\n        print \" $n : $temp2 : $ecounter+1\\n\";\n        $ecounter=0; $tcount=1;\n        $p =1 ;\n        }\n        $temp2 = $lastn ;\n\n       }\n\n    print \"$n : $temp2 : $ecounter+1\\n\" if (!$p);\n\n    }\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524774987, "post_id": 50051396, "comment_id": 87119219, "body": "IIRC <code>&amp;{!0}</code> doing nothing is an implementation detail (possibly related to <code>Foo::Bar-&gt;import</code> never being an error, even if there is no import method) leaking through."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 3, "last_activity_date": 1524774754, "creation_date": 1524774754, "answer_id": 50051396, "question_id": 50051150, "link": "https://stackoverflow.com/questions/50051150/whats-the-role-of-in-this-perl-script/50051396#50051396", "title": "What&#39;s the role of &quot;* *&quot; in this Perl script?", "body": "<p>The first <code>*</code> of each pair is multiplication; the second is a glob dereference.  So nothing very useful.</p>\n\n<p>With <code>&amp; &amp;</code> the first is bitwise and and the second is a subroutine dereference (and call).  I don't know why using the canonical true value (returned by print) as a code ref and calling it doesn't error; I would have expected <code>&amp;{!0}</code> to error like <code>&amp;{\"1\"}</code> does with <code>Undefined subroutine &amp;main::1</code>; instead it seems to be a no-op.</p>\n"}], "owner": {"reputation": 181, "user_id": 9682035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wi7up.png?s=128&g=1", "display_name": "69 420 1970", "link": "https://stackoverflow.com/users/9682035/69-420-1970"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 50051396, "answer_count": 1, "score": 2, "last_activity_date": 1585261406, "creation_date": 1524773602, "last_edit_date": 1585261406, "question_id": 50051150, "link": "https://stackoverflow.com/questions/50051150/whats-the-role-of-in-this-perl-script", "title": "What&#39;s the role of &quot;* *&quot; in this Perl script?", "body": "<p>I have this shell script: </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>eval{print \"Just \";} * * {print \"Another \";} * * {print \"Perl \";} * * {print \"Hacker\\n\";}\n</code></pre>\n\n<p>and more variants:</p>\n\n<pre><code>@${print \"Just \";} * * {print \"Another \";} * * {print \"Perl \";} * * {print \"Hacker\\n\";}\n$${print \"Just \";} * * {print \"Another \";} * * {print \"Perl \";} * * {print \"Hacker\\n\";}\ndo{print \"Just \";} * * {print \"Another \";} * * {print \"Perl \";} * * {print \"Hacker\\n\";}\n$#{print \"Just \";} * * {print \"Another \";} * * {print \"Perl \";} * * {print \"Hacker\\n\";}\n</code></pre>\n\n<p>What does <code>* *</code> do? (It also works if I change <code>* *</code> to <code>&amp; &amp;</code>.) </p>\n"}, {"tags": ["perl", "csv"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 4, "creation_date": 1524767687, "post_id": 50049589, "comment_id": 87115799, "body": "<code>$row</code> is an array reference. You assigned it to the return value of the <code>getline</code> method on the previous line."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524769759, "post_id": 50049589, "comment_id": 87116850, "body": "How do you imagine that <code>@$row</code> might be the same variable as <code>$_</code>? Also, <code>getline</code> has no <i>&quot;default output&quot;</i>. I think you need to <i>&quot;check the documents&quot;</i> properly."}, {"owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "edited": false, "score": 0, "creation_date": 1524845272, "post_id": 50049589, "comment_id": 87149159, "body": "Glad to see you are feeling better Borodin.  Getline does not have a default output operator, like an array has $_. Got it."}, {"owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "edited": false, "score": 0, "creation_date": 1524845707, "post_id": 50049589, "comment_id": 87149378, "body": "I was attempting to use an analogy to describe my question. Getline is to @$row as  array is to $_. Getline does not have a default operator, @$row is a reference. Got it. Glad to see you are back to your old self."}], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 6335661, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9jQqgf-UmH8/AAAAAAAAAAI/AAAAAAAAAZs/Oc10yUgd6d8/photo.jpg?sz=128", "display_name": "Aritra Kundu", "link": "https://stackoverflow.com/users/6335661/aritra-kundu"}, "is_accepted": true, "score": 1, "last_activity_date": 1524769332, "creation_date": 1524769332, "answer_id": 50050242, "question_id": 50049589, "link": "https://stackoverflow.com/questions/50049589/perl-textcsv-unknown-variable/50050242#50050242", "title": "Perl Text::CSV unknown variable", "body": "<p><code>$row</code> is an array reference. Try out <code>ref()</code> : <a href=\"http://perldoc.perl.org/functions/ref.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/functions/ref.html</a>.</p>\n"}], "owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 50050242, "answer_count": 1, "score": -4, "last_activity_date": 1524769912, "creation_date": 1524766601, "last_edit_date": 1524769912, "question_id": 50049589, "link": "https://stackoverflow.com/questions/50049589/perl-textcsv-unknown-variable", "title": "Perl Text::CSV unknown variable", "body": "<p>Here is an easy one.</p>\n\n<p>I checked the documents. What is that in line 18? What kind of variable is <code>@$row</code>? Is it the (default output) <code>$_</code> of the\n<a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\"><code>Text::CSV</code></a>\n<code>getline</code> function ?  </p>\n\n<pre><code>#!/efs/dist/perl5/core/5.10/exec/bin/perl\n\nuse Text::CSV;\nuse Time::Local ;\n\nuse strict;\nuse warnings;\n\nmy $file = \"$ARGV[0]\";\n\nopen my $fh, \"&lt;\", $file or die \"$file: $!\" ;\n\nmy $csv = Text::CSV-&gt;new( {\n    binary    =&gt; 1,\n    auto_diag =&gt; 1,\n} );\n\nwhile ( my $row = $csv-&gt;getline($fh) ) {\n    print \"@$row\\n\" ;                  # Line 18\n}\n</code></pre>\n"}, {"tags": ["perl", "mojolicious-lite"], "answers": [{"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 3, "last_activity_date": 1525860804, "last_edit_date": 1525860804, "creation_date": 1524769157, "answer_id": 50050203, "question_id": 50048891, "link": "https://stackoverflow.com/questions/50048891/how-to-dump-all-mojolicious-routes/50050203#50050203", "title": "How to dump all Mojolicious routes?", "body": "<p>A <code>Mojolicous::Lite</code> app is a fully fledged Mojolicious application, just with more convenient syntax.</p>\n\n<ul>\n<li><p>You can use <code>/app.pl routes</code> to print routes on the command line for Lite apps as well.</p></li>\n<li><p>You can programmatically access the routes via the <a href=\"https://metacpan.org/pod/Mojolicious#routes\" rel=\"nofollow noreferrer\"><code>app-&gt;routes</code></a> object, which is a <a href=\"https://metacpan.org/pod/Mojolicious::Routes\" rel=\"nofollow noreferrer\"><code>Mojolicious::Routes</code></a> object that contains individual <a href=\"https://metacpan.org/pod/Mojolicious::Routes::Route\" rel=\"nofollow noreferrer\"><code>Mojolicious::Routes::Route</code></a> objects.</p></li>\n</ul>\n\n<p><strong>Unfortunately, the Routes object does not document an API for enumerating all routes.</strong> You will therefore have to traverse the route tree yourself. The corresponding source code for the <a href=\"https://metacpan.org/pod/Mojolicious::Command::routes\" rel=\"nofollow noreferrer\"><code>Mojolicious::Command::routes</code> command</a> is rather convoluted. Alternatively, you can <code>-&gt;find($name)</code> specific routes by name.</p>\n\n<p>The app is accessible from a <code>Test::Mojo</code> object as <a href=\"https://metacpan.org/pod/Test::Mojo#app\" rel=\"nofollow noreferrer\"><code>$test-&gt;app</code></a>. Note that the docs for that method include a test that verifies routing:</p>\n\n<pre><code>ok $t-&gt;app-&gt;routes-&gt;find('echo')-&gt;is_websocket, 'WebSocket route';\n</code></pre>\n\n<p>Note that you must initialize the test object with the app name, or assign it an app instance later in order to access the app through the test object.</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1525860804, "creation_date": 1524763853, "question_id": 50048891, "link": "https://stackoverflow.com/questions/50048891/how-to-dump-all-mojolicious-routes", "title": "How to dump all Mojolicious routes?", "body": "<p>Full Mojolicious application have <code>routes</code> command which will dump application routes:</p>\n\n<pre><code>script/my_app.pl routes\n</code></pre>\n\n<p>How can I do  same thing from testing script for <code>Lite</code> application?</p>\n\n<pre><code>use Mojo::Base -strict;\nuse Test::Mojo;\nuse Test::More;\n\nuse Mojolicious::Lite;\n\n... # Routes defined here\n\nmy $t = Test::Mojo-&gt;new;\n\n$t-&gt;dump_all_routes # What should I do here?\n</code></pre>\n"}, {"tags": ["perl", "moo"], "owner": {"reputation": 184, "user_id": 6115421, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/15a623fe6b5c826ee955a1474fc1723e?s=128&d=identicon&r=PG&f=1", "display_name": "Dragos Trif", "link": "https://stackoverflow.com/users/6115421/dragos-trif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "closed_date": 1524758889, "answer_count": 0, "score": 1, "last_activity_date": 1524758722, "creation_date": 1524758169, "last_edit_date": 1524758722, "question_id": 50047353, "link": "https://stackoverflow.com/questions/50047353/cant-use-moo-class-properly-before-its-declaration-in-the-same-script", "closed_reason": "Duplicate", "title": "Can&#39;t use Moo class properly before it&#39;s declaration in the same script", "body": "<p>Please have a look at the script below.\nThe first call to <code>do_stuff(...)</code>, although it works without errors, prints <code>names: $VAR1 = undef;</code>.</p>\n\n<p>The second call to <code>do_stuff(...)</code>, works as I expect it to work and prints <code>names: $VAR1 = 'Second Name';</code></p>\n\n<p>And i have some questions:</p>\n\n<ol>\n<li>What package Foo is used when do_stuff is called for the first time?</li>\n<li>Shouldn't the compiler throw an error instead of using what looks like an <em>improper</em> class?</li>\n</ol>\n\n<p>The code:</p>\n\n<pre><code>use warnings;\nuse 5.018;\nuse Data::Dumper;\n\ndo_stuff('First Name');\n\n{\npackage Foo;\nuse Moo;\nuse Data::Dumper;\n\nhas names =&gt; (is =&gt; 'ro', required =&gt; 1);\n\nsub get_name {\n  my $self = shift;\n\n  say \"names: \".Dumper($self-&gt;{names});\n\n}\n\n1;\n}\n\ndo_stuff('Second Name');\n\nsub do_stuff{\n   my $names = shift;\n   my $x = Foo-&gt;new(names =&gt; $names);\n   $x-&gt;get_name();\n}\n</code></pre>\n"}, {"tags": ["bash", "perl"], "answers": [{"tags": [], "owner": {"reputation": 29209, "user_id": 495796, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/86637c99f25d60157aa0f2e7eab90148?s=128&d=identicon&r=PG", "display_name": "Robin Green", "link": "https://stackoverflow.com/users/495796/robin-green"}, "is_accepted": false, "score": 0, "last_activity_date": 1524759066, "creation_date": 1524759066, "answer_id": 50047619, "question_id": 50045472, "link": "https://stackoverflow.com/questions/50045472/bash-script-to-modify-and-zip-files/50047619#50047619", "title": "Bash script to modify and zip files", "body": "<p>The perl <code>i</code> option makes perl edit the files in-place, which is not what you want here. I don't know perl, but I do know sed, which is similar for this use case, and is more lightweight:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>mkdir --parents to-be-zipped/src\nfor f in src/*.js; do\n  sed -e 's/..\\/..\\/utils\\//.\\//g' $f &gt;to-be-zipped/$f\ndone\n</code></pre>\n\n<p>Then the modified files to be zipped will be in a directory called <code>to-be-zipped</code>. If that is not a suitable place, you can move them using <code>mv</code> or output them to a different place.</p>\n\n<p>Alternatively, simply copy your entire project to a directory on a temporary filesystem (ideally a ramdisk), modify the files there, zip them and then delete the temporary copy.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1525059628, "last_edit_date": 1525059628, "creation_date": 1524763365, "answer_id": 50048768, "question_id": 50045472, "link": "https://stackoverflow.com/questions/50045472/bash-script-to-modify-and-zip-files/50048768#50048768", "title": "Bash script to modify and zip files", "body": "<p>I take it that you want to zip a changed content of files, but not change the files themselves.</p>\n\n<p>Since you do this from a shell script it is simple to write new, changed, files with Perl and zip those (<code>source/*.js_tmp</code> below), then remove them.</p>\n\n<pre><code>perl -we'while (&lt;&gt;) { \n    open $fh, \"&gt;${ARGV}_tmp\" if eof;\n    print $fh s{../../utils}{/.}gr;\n}' source/*.js\n</code></pre>\n\n<p>The <a href=\"http://perldoc.perl.org/perlop.html#I/O-Operators\" rel=\"nofollow noreferrer\"><code>&lt;&gt;</code> operator</a> reads lines from all submitted files. A new file is opened when <a href=\"http://perldoc.perl.org/functions/eof.html\" rel=\"nofollow noreferrer\">eof</a> detects the last line in a file (or unopened filehandle), with the name derived from the current <a href=\"http://perldoc.perl.org/perlvar.html#%24ARGV\" rel=\"nofollow noreferrer\">$ARGV</a>. The <code>/r</code> modifier in regex makes <code>s/</code> operator return the modified string instead of changing it in place.</p>\n\n<p>Or, using <a href=\"http://search.cpan.org/~dagolden/Path-Tiny-0.104/lib/Path/Tiny.pm\" rel=\"nofollow noreferrer\">Path::Tiny</a></p>\n\n<pre><code>perl -MPath::Tiny -we'\n    path(\"${_}_tmp\")-&gt;spew( path($_)-&gt;slurp =~ s{../../utils}{./}gr ) for @ARGV\n' source/*.js\n</code></pre>\n\n<p>The module is extremely handy and worth a quick installation.</p>\n\n<p>Both commands above write out changed files as <code>source/*.js_tmp</code>, for simplicity. Make these temporary filenames so to not overwrite anything. Or, use the original names in a new, temporary directory that the shell script can make and then remove.</p>\n\n<p>Another, perhaps simpler, way is to make a temporary directory and copy all files to it in the shell script, then run your exact Perl one-liner on that. Then zip them and remove them.</p>\n"}], "owner": {"reputation": 5561, "user_id": 1359306, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/60709a54556bc69a6a829a55ae3e0923?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/1359306/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1525059628, "creation_date": 1524752628, "last_edit_date": 1524758582, "question_id": 50045472, "link": "https://stackoverflow.com/questions/50045472/bash-script-to-modify-and-zip-files", "title": "Bash script to modify and zip files", "body": "<p>I am trying to write a script that zips up some files. However, in some of the files, I need to update a path to a dependency.</p>\n\n<p>The script to zip up the files currently looks like this;</p>\n\n<pre><code>#!/bin/sh\n\nfor APP in \"${APPS[@]}\"\ndo\n  cd app/${APP}\n  npm install\n  zip -r ../../test.zip node_modules\n  zip -uj ../../test.zip src/*.js\n  cd ../../\n\n  zip -uj test.zip app/utils/*.js\ndone\n</code></pre>\n\n<p>In <code>src/*.js</code> there are imports like this;</p>\n\n<p><code>const someUtil = require('../../utils/someUtil')</code></p>\n\n<p>Whilst zipping these files, I need to change the utils path from <code>../../utils/</code> to <code>./</code>, but I do not want to change the path in the original file.</p>\n\n<p>I have been able to update the path in the original file like this;</p>\n\n<p><code>perl -pi -e 's/..\\/..\\/utils\\//.\\//g' src/*.js</code></p>\n\n<p>How could I go about only modifying the file that is to be zipped?</p>\n"}, {"tags": ["perl", "file-upload", "safari", "multipartform-data", "cgi.pm"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1524741328, "post_id": 50040739, "comment_id": 87098923, "body": "Did you try <a href=\"https://metacpan.org/pod/CGI::Simple\" rel=\"nofollow noreferrer\">CGI::Simple</a>?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1524743332, "post_id": 50040739, "comment_id": 87100263, "body": "Is downgrading an option?"}, {"owner": {"reputation": 41, "user_id": 5309471, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206540106235099/picture?type=large", "display_name": "Roger Van Montfort", "link": "https://stackoverflow.com/users/5309471/roger-van-montfort"}, "edited": false, "score": 0, "creation_date": 1525107130, "post_id": 50040739, "comment_id": 87226969, "body": "I tried CGI::Simple. I tried a CGI.pm-version 3.50, but the problem remains. :("}], "owner": {"reputation": 41, "user_id": 5309471, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206540106235099/picture?type=large", "display_name": "Roger Van Montfort", "link": "https://stackoverflow.com/users/5309471/roger-van-montfort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 381, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1525208983, "creation_date": 1524738677, "last_edit_date": 1525208983, "question_id": 50040739, "link": "https://stackoverflow.com/questions/50040739/processing-multipart-form-data-in-perl-invokes-apache-error-with-apple-devices", "title": "Processing multipart/form-data in Perl invokes Apache-error with Apple-devices, when a form-file-element is empty", "body": "<p>My application is written in Perl 5.14.2. I process multipart/form-data with  </p>\n\n<pre><code>use CGI;\n$query = new CGI;\n</code></pre>\n\n<p>Since a few weeks this process invokes a timeout at Apache-level on specific Apple-devices:   </p>\n\n<blockquote>\n  <p>(70007)The timeout specified has expired: Error reading request entity data</p>\n</blockquote>\n\n<p>The apple-devices that invoke the timeout-error all do have <code>Applewebkit/605</code> in common. This is mostly a Safari browser version 11 on a Mac.  </p>\n\n<p>The formdata is send through:   </p>\n\n<pre><code>var fData = new FormData($('#myForm')[0]);\n\njQuery.ajax({\n    url: '/urladdress',\n    data: fData,\n    cache: false,\n    dataType: 'html',\n    contentType: false,\n    processData: false,\n    type: 'POST'\n});\n</code></pre>\n\n<p>I found out that the problem occurs when the formdata contains elements of type 'file' that are empty (no file provided).\nThe problem doesn't depend on the use of CGI or CGI::Simple. Even just trying to get the STDIN-buffer initiates the error.  </p>\n\n<pre><code>read(STDIN, $buffer, $ENV{'CONTENT_LENGTH'});\n</code></pre>\n\n<p>The workaround is removing empty file-elements of the &lt;form&gt; and thus the formdata before assigning the formdata:  </p>\n\n<pre><code>$('#myForm').find(\"input[type='file']\").each(function(){\n    if ($(this).get(0).files.length === 0) {$(this).remove();}\n});\nvar fData = new FormData($('#myForm')[0]);\n...\n</code></pre>\n\n<p>The bug seems to be known since April, 11 2018<br>\n<a href=\"https://bugs.webkit.org/show_bug.cgi?id=184490\" rel=\"nofollow noreferrer\">https://bugs.webkit.org/show_bug.cgi?id=184490</a></p>\n\n<p>And it seems it has already been reported here at Stackoverflow<br>\n<a href=\"https://stackoverflow.com/questions/49614091/safari-11-1-ajax-xhr-form-submission-fails-when-inputtype-file-is-empty\">Safari 11.1: ajax/XHR form submission fails when input[type=file] is empty</a></p>\n"}, {"tags": ["perl", "pcre"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1524748675, "post_id": 50040500, "comment_id": 87104167, "body": "I think this looks like an XY problem. Strings of values embedded in hashes looks like something is being done in a bad way. Could you clarify a bit please? Because my suggestion would be start by splitting your &#39;key-value&#39; string into a sub-hash, and then compare field by field. But I&#39;m not clear enough on what you&#39;re trying to do to hammer out an answer."}, {"owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1524771596, "post_id": 50040500, "comment_id": 87117688, "body": "I havent other ideas than like You in this comment. Its why I add answer here. I will update my question."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "edited": false, "score": 0, "creation_date": 1524771042, "post_id": 50042866, "comment_id": 87117440, "body": "I wrote in question: &quot;I emphasize that the hash values {config} are very variable. Commonly /(threshold_buy_bull = )\\d+/ is not enough.&quot;"}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "reply_to_user": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "edited": false, "score": 0, "creation_date": 1524778270, "post_id": 50042866, "comment_id": 87120719, "body": "@J. Doe: Yes I did read that. I didn&#39;t intend to post a turnkey solution. I just wanted to point you to the direction, if one pattern doesn&#39;t fit all, try with a loop over a pattern to split the big problem into smaller, maybe easier ones ones. Of course it&#39;s up to you, to adapt that to your needs. I edited my answer to emphasize this more clearly."}], "tags": [], "owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "is_accepted": false, "score": 0, "last_activity_date": 1524778050, "last_edit_date": 1524778050, "creation_date": 1524745281, "answer_id": 50042866, "question_id": 50040500, "link": "https://stackoverflow.com/questions/50040500/perl-find-differences-in-values-inside-string-on-many-hashes-which-has-id-in-k/50042866#50042866", "title": "Perl - Find differences in values inside string on many hashes which has ID in key name", "body": "<p>If it doesn't need to be one single expression something like</p>\n\n<pre><code>my $temp = '';\nwhile ($hoh{$hashkey}{conf} =~ m/(\\S+)\\s*=\\s*(\\S+)/gc) {\n  my ($key, $value) = ($1, $2);\n  # replace the condition of the if by anything you need;\n  # it's just an example on top of the OP's example\n  if ($key =~ m/^threshold/) {\n    $temp .= ((length($temp) ? ' ' : '') . $value);\n  }\n}\n$hoh{$hashkey}{values} = $temp;\n</code></pre>\n\n<p>for each key <code>$hashkey</code> might do? Each iteration of the <code>while</code> loop will process one match. The values of the key value pair matched get concatenated in a temporary string which then is assigned to the hash.</p>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "edited": false, "score": 0, "creation_date": 1524771013, "post_id": 50044408, "comment_id": 87117425, "body": "I wrote in question: &quot;I emphasize that the hash values {config} are very variable. Commonly /(threshold_buy_bull = )\\d+/ is not enough.&quot; So I can&#39;t define string like &#39;threshold_buy_bear&#39;. Its various string. Different vaues can be anything. But thanks for map example. Im sure it will be useful."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1524749651, "creation_date": 1524749651, "answer_id": 50044408, "question_id": 50040500, "link": "https://stackoverflow.com/questions/50040500/perl-find-differences-in-values-inside-string-on-many-hashes-which-has-id-in-k/50044408#50044408", "title": "Perl - Find differences in values inside string on many hashes which has ID in key name", "body": "<p>OK, so first of all - I'd say storing your data in substrings is the wrong way to do this. Decompose those into the key-value pairs:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy %hoh; \n\n$hoh{\"string 1\"}{conf} = 'SMA_long = 712 SMA_short = 38 decay = 0.0076 learning_rate = 0.27 min_predictions = 20 momentum = 0.09 price_buffer_len = 88 threshold_buy_bear = 2.5 threshold_buy_bull = 1.9 threshold_sell_bear = -0.6 threshold_sell_bull = -0.6';\n$hoh{\"string 5\"}{conf} = 'SMA_long = 712 SMA_short = 38 decay = 0.0076 learning_rate = 0.27 min_predictions = 20 momentum = 0.09 price_buffer_len = 88 threshold_buy_bear = 2.5 threshold_buy_bull = 2.1 threshold_sell_bear = -0.6 threshold_sell_bull = -0.6';\n$hoh{\"string 8\"}{conf} = 'SMA_long = 712 SMA_short = 38 decay = 0.0076 learning_rate = 0.27 min_predictions = 20 momentum = 0.09 price_buffer_len = 88 threshold_buy_bear = 2.4 threshold_buy_bull = 2.1 threshold_sell_bear = -0.6 threshold_sell_bull = -0.7';\n$hoh{\"another string 1\"}{conf} = 'threshold_buy_bear = 2.5 HNA_long = 712  aaaaa = 0.0076 ccccc = 0.27 bbbbbbb = 1.9 dedede = -0.6 threshold = -0.6';\n$hoh{\"another string 2\"}{conf} = 'threshold_buy_bear = 2.5 HNA_long = 712  aaaaa = 0.0076 ccccc = 0.27 bbbbbbb = 2.1 dedede = -0.5 threshold = -0.6';\n$hoh{\"another string 3\"}{conf} = 'threshold_buy_bear = 2.5 HNA_long = 712  aaaaa = 0.0076 ccccc = 0.27 bbbbbbb = 2.0 dedede = -0.6 threshold = -0.6';\n\nprint Dumper \\%hoh;\n\nforeach my $conf ( values %hoh ) { \n   print $conf -&gt; {conf};\n   $conf = { map { /(\\w+) = ([\\d\\.\\-]+)/g } $conf -&gt; {conf} };\n}\n\nprint Dumper \\%hoh;\n</code></pre>\n\n<p>That way you end up with <code>%hoh</code>:</p>\n\n<pre><code>$VAR1 = {\n          'another string 2' =&gt; {\n                                  'threshold' =&gt; '-0.6',\n                                  'ccccc' =&gt; '0.27',\n                                  'bbbbbbb' =&gt; '2.1',\n                                  'dedede' =&gt; '-0.5',\n                                  'threshold_buy_bear' =&gt; '2.5',\n                                  'HNA_long' =&gt; '712',\n                                  'aaaaa' =&gt; '0.0076'\n                                },\n</code></pre>\n\n<p>... etc</p>\n\n<p>Now, I can't tell where your \"values\" are coming from in your second example, but it should hopefully be a lot easier to compare.</p>\n\n<p>You can get the 3 values that I  <em>think</em> you're looking for:</p>\n\n<pre><code>foreach my $key ( keys %hoh ) { \n   print $key, \" =&gt; \", $hoh{$key}{threshold_buy_bear},\"\\n\";\n}\n</code></pre>\n\n<p>Or just do it with a hash slice:</p>\n\n<pre><code>my @values = qw ( threshold_buy_bear threshold_buy_bull threshold_sell_bull );\n\nforeach my $key ( sort keys %hoh ) { \n   print $key, \" =&gt; \", join ( \" \", @{$hoh{$key}}{@values} ), \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1524778050, "creation_date": 1524738002, "last_edit_date": 1524772006, "question_id": 50040500, "link": "https://stackoverflow.com/questions/50040500/perl-find-differences-in-values-inside-string-on-many-hashes-which-has-id-in-k", "title": "Perl - Find differences in values inside string on many hashes which has ID in key name", "body": "<p>I have a lot config files with parameters for external program. My script will test all of these configs print to STDOUT and CSV. But to get this script interface more readable I would print name of file and changed parameters for each files. </p>\n\n<p>Here are examples. My hash of hashes looks like this:</p>\n\n<pre><code>$hoh{string 1}{conf} = 'SMA_long = 712 SMA_short = 38 decay = 0.0076 learning_rate = 0.27 min_predictions = 20 momentum = 0.09 price_buffer_len = 88 threshold_buy_bear = 2.5 threshold_buy_bull = 1.9 threshold_sell_bear = -0.6 threshold_sell_bull = -0.6';\n$hoh{string 5}{conf} = 'SMA_long = 712 SMA_short = 38 decay = 0.0076 learning_rate = 0.27 min_predictions = 20 momentum = 0.09 price_buffer_len = 88 threshold_buy_bear = 2.5 threshold_buy_bull = 2.1 threshold_sell_bear = -0.6 threshold_sell_bull = -0.6';\n$hoh{string 8}{conf} = 'SMA_long = 712 SMA_short = 38 decay = 0.0076 learning_rate = 0.27 min_predictions = 20 momentum = 0.09 price_buffer_len = 88 threshold_buy_bear = 2.4 threshold_buy_bull = 2.1 threshold_sell_bear = -0.6 threshold_sell_bull = -0.7';\n$hoh{another string 1}{conf} = 'threshold_buy_bear = 2.5 HNA_long = 712  aaaaa = 0.0076 ccccc = 0.27 bbbbbbb = 1.9 dedede = -0.6 threshold = -0.6';\n$hoh{another string 2}{conf} = 'threshold_buy_bear = 2.5 HNA_long = 712  aaaaa = 0.0076 ccccc = 0.27 bbbbbbb = 2.1 dedede = -0.5 threshold = -0.6';\n$hoh{another string 3}{conf} = 'threshold_buy_bear = 2.5 HNA_long = 712  aaaaa = 0.0076 ccccc = 0.27 bbbbbbb = 2.0 dedede = -0.6 threshold = -0.6';\n</code></pre>\n\n<p>And I would like to achieve a result such as using the following lines ...</p>\n\n<pre><code>$hoh{string 1}{values} = '2.5 1.9 -0.6';\n$hoh{string 5}{values} = '2.5 2.1 -0.6';\n$hoh{string 8}{values} = '2.4 2.1 -0.7';\n$hoh{another string 1}{values} = '1.9 -0.6';\n$hoh{another string 2}{values} = '2.1 -0.5';\n$hoh{another string 3}{values} = '2.0 -0.6';\n</code></pre>\n\n<p>So my script output will be generate STDOUT something like this:</p>\n\n<pre><code>test of string 1 with values 2.5 1.9 -0.6\ntest of string 5 with values 2.5 2.1 -0.6\ntest of string 8 with values 2.4 2.1 -0.7\ntest of another string 1 with values 1.9 -0.6\ntest of another string 2 with values 2.1 -0.5\ntest of another string 3 with values  2.0 -0.6\n</code></pre>\n\n<p>... with the difference that I would like the script to search for values that are changing for me.</p>\n\n<p>Longer expiration:\nI would like to store this data in a hash of hashes, and then find values that change at least once from a given 'string' or 'another string' and assign it to the value key in the given hash of hashes. The key is a string and a random number. The script should only compare the hash values, in which the string is identical (as if you cut off all the digits from the keys), ie the value key {string}! = {Another string} and {string 1} = {string 2}. I emphasize that the hash values {config} are very variable. Commonly <code>/(threshold_buy_bull = )\\d+/</code> is not enough.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1524748546, "post_id": 50040421, "comment_id": 87104085, "body": "For the exitcode, here is quick fix: You can try write it to a file <code>timeout(6, &#39;myscript.sh; echo $? &gt; exitcode.txt&#39;);</code> If the file does not exist after the <code>timeout</code> you can be sure it timed out."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1524749124, "post_id": 50040421, "comment_id": 87104506, "body": "<i>&quot;if the script fails due to timeout, I need to kill it&quot;</i> : I think if the script fails due to timeout, the <code>timeout()</code> will kill it. So then you would not need to obtain the PID?"}], "answers": [{"tags": [], "owner": {"reputation": 453, "user_id": 5983598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d539e9b534f278c139ce01cadf7b70?s=128&d=identicon&r=PG", "display_name": "mr_ron", "link": "https://stackoverflow.com/users/5983598/mr-ron"}, "is_accepted": false, "score": 1, "last_activity_date": 1524765580, "last_edit_date": 1524765580, "creation_date": 1524751586, "answer_id": 50045118, "question_id": 50040421, "link": "https://stackoverflow.com/questions/50040421/timeout-for-launching-a-bash-command-in-perl/50045118#50045118", "title": "Timeout for launching a bash command in perl", "body": "<p>Your system might have the gnu <code>timeout</code> command which sets an exit code of 124 if it kills the child process with timeout and returns the command exit code otherwise.  If you don't have gnu <code>timeout</code>, you did mention you have bash which means you could use my bash emulator for gnu <code>timeout</code>, <a href=\"https://github.com/ronaldxs/bash-timeout\" rel=\"nofollow noreferrer\">https://github.com/ronaldxs/bash-timeout</a>, and I would happily look forward to any feedback.  Looking at the source code for <code>System::Timeout</code>, it is based on CPAN module <code>IPC::Cmd</code> which suggests the following as another starting point:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse Modern::Perl;\nuse Data::Dump;\n\nuse IPC::Cmd 'run_forked';\n\nmy $rc = run_forked('sleep 5; exit 3', { timeout =&gt; 2 });\n\ndd $rc;\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>{\n  child_pgid       =&gt; 69066,\n  err_msg          =&gt; \"ran more than [2] seconds\\n\",\n  exit_code        =&gt; 0,\n  ...\n  timeout          =&gt; 2,\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 1, "last_activity_date": 1524755467, "creation_date": 1524755467, "answer_id": 50046476, "question_id": 50040421, "link": "https://stackoverflow.com/questions/50040421/timeout-for-launching-a-bash-command-in-perl/50046476#50046476", "title": "Timeout for launching a bash command in perl", "body": "<p>For advanced tasks when running external commands, <a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"nofollow noreferrer\"><code>IPC::Run</code></a> is a fairly good choice. The following should cover all the cases you mentioned. (I admit that using a regex on the error message is not the most elegant solution, but the point here was to demo the possibilities with this module.)</p>\n\n<pre><code>use warnings;\nuse strict;\nuse IPC::Run qw/ start timeout /;\nuse Try::Tiny;\n\nmy @commands = (\n        ['perl','-e','sleep 1'], # success\n        ['perl','-e','sleep 10'], # failure due to timeout\n        ['perl','-e','exit 123'], # failure due to nonzero exit code\n        ['perl','-e','kill \"INT\", $$'], # process exits due to signal\n        ['this_command_doesnt_exist'], # other failure\n    );\n\nfor my $cmd (@commands) {\n    my $h;\n    try {\n        print \"\\nRunning \",join(' ',@$cmd),\"\\n\";\n        $h = start $cmd, timeout(2);\n        $h-&gt;finish or die \"finish with \\$?=$?\";\n        print \"Success\\n\";\n    }\n    catch {\n        if (/timeout/i) {\n            warn \"Timeout Error: $_\";\n            warn \"killing child process\\n\";\n            defined $h &amp;&amp; $h-&gt;kill_kill;\n        }\n        elsif (/\\$\\?/) {\n            warn \"Exit Code Error: $_\";\n            # from http://perldoc.perl.org/functions/system.html\n            if ($? == -1) { print \"failed to execute: $!\\n\" }\n            elsif ($? &amp; 127)\n                { printf \"child died with signal %d, %s coredump\\n\",\n                    ($? &amp; 127),  ($? &amp; 128) ? 'with' : 'without' }\n            else { printf \"child exited with value %d\\n\", $? &gt;&gt; 8 }\n        }\n        else { warn \"Other Error: $_\" }\n    };\n}\n</code></pre>\n\n<p>Output (slightly redacted):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Running perl -e sleep 1\nSuccess\n\nRunning perl -e sleep 10\nTimeout Error: IPC::Run: timeout on timer #2 at ...\nkilling child process\n\nRunning perl -e exit 123\nExit Code Error: finish with $?=31488 at ...\nchild exited with value 123\n\nRunning perl -e kill \"INT\", $$\nExit Code Error: finish with $?=2 at ...\nchild died with signal 2, without coredump\n\nRunning this_command_doesnt_exist\nOther Error: Command 'this_command_doesnt_exist' not found in ... at ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1524761133, "creation_date": 1524761133, "answer_id": 50048211, "question_id": 50040421, "link": "https://stackoverflow.com/questions/50040421/timeout-for-launching-a-bash-command-in-perl/50048211#50048211", "title": "Timeout for launching a bash command in perl", "body": "<p>I would recommend the approaches by @mr_ron and @haukex in the other answers. Using a well tested module like <code>IPC::Run</code> or <code>IPC::Cmd</code> is the safe approach. Anyway, I have experimented a little bit with a more low level approach here:</p>\n\n<pre><code>#! /usr/bin/env perl\n\nuse feature qw(say);\nuse strict;\nuse warnings;\nuse IO::Select;\nuse IPC::Open3;\nuse Symbol 'gensym';\n\n# specify a command and a timeout\nmy $cmd = 'echo Hello; sleep 5; echo Bye; exit 2';\nmy $timeout = 3;\n\n# Run the command with the given timeout:\nlocal $SIG{CHLD} = 'IGNORE'; # Automatically reap dead children\nmy $cmd_err = gensym;\nmy $cmd_pid = open3( my $cmd_in, my $cmd_out, $cmd_err, $cmd );\nsay \"Command PID: \", $cmd_pid;\nmy $timer_err = gensym;\nmy $timer_pid = open3( my $timer_in, my $timer_out, $timer_err, \"sleep $timeout\" );\n\nmy $timed_out = 0;\n# We only use STDOUT here for simplicity, if needed you can also add\n#  the STDERR handle of the command to the select loop..\nmy $select = IO::Select-&gt;new($cmd_out, $timer_out);\nOUTER: while (1) {\n    my @ready = $select-&gt;can_read;\n    for my $fh (@ready) {\n        my $fd   = $fh-&gt;fileno();\n        if ( $fd == $timer_out-&gt;fileno() ) {\n            say \"Timed out\";\n            $timed_out = 1;\n            last OUTER;\n        }\n        else { # The command handle is ready for reading..\n            my $line = &lt;$fh&gt;;\n            # An undefined value for $line, signals that the command processes\n            #  has finished..\n            last OUTER if !defined $line;\n            print $line; # echo the line from the command to our STDOUT\n        }\n    }\n}\nif ( $timed_out ) {\n    kill 'KILL', $cmd_pid;\n}\nelse { # The command finished first, the timer may still be running..\n    kill 'KILL', $timer_pid;\n    waitpid( $cmd_pid, 0 );  # Reap the child, and get exit code\n    my $child_exit_status = $? &gt;&gt; 8;\n    say \"Exit code: \", $child_exit_status;\n}\n</code></pre>\n"}], "owner": {"reputation": 604, "user_id": 2439376, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/4ea7401577c850d20106c9688d789d21?s=128&d=identicon&r=PG", "display_name": "Abhishek Agarwal", "link": "https://stackoverflow.com/users/2439376/abhishek-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 605, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1524765580, "creation_date": 1524737794, "question_id": 50040421, "link": "https://stackoverflow.com/questions/50040421/timeout-for-launching-a-bash-command-in-perl", "title": "Timeout for launching a bash command in perl", "body": "<p>I have a usecase where I have to fire a bash command from perl and need that command to exit within a specified timeout\nCurrently I am using this moudle</p>\n\n<pre><code>use System::Timeout qw(timeout);\ntimeout(10, \"my bash script\")\n</code></pre>\n\n<p>(As timeout is necessary I am not using system() to make the call)</p>\n\n<p>This function returns 1 if shell script exitted with non-zero exit code or the command timed out.</p>\n\n<p><strong>Issues</strong></p>\n\n<ol>\n<li>This function returns just 1 / 0 based on the command passed or failed(I need the exact exit code of the bash script)</li>\n<li>If it is 1, I do not get to know if script exitted with a non-zero exit code OR there was a timeout(Distinguish between a timeout and shell script failure)</li>\n<li>pid of called process is unknown (so that if the scipt fails due to timeout, I need to kill it)</li>\n</ol>\n\n<p>It is important for me to satisfy both of the above criteria(I know very well how to do this in python, but could not get a solution for perl)</p>\n\n<p>I do not know if forking a current process in perl and then monitoring it with SIGALRM will help\n(Forking will give me pid of the forked process and NOT the bash script which I have launched from that fork. Will killing the fork, also kill the bash process it launched?)</p>\n\n<p>Thanks for the help</p>\n"}, {"tags": ["perl", "include"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1524726591, "post_id": 50036768, "comment_id": 87089801, "body": "What do you mean by &quot;include&quot;? Do you want to execute the config.pl in the context of test.pl, i.e. should the variables set in config retain their values in test?"}, {"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1524727014, "post_id": 50036768, "comment_id": 87090018, "body": "@choroba Yes. But don&#39;t want to use system/exec commands."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1524727114, "post_id": 50036768, "comment_id": 87090072, "body": "<a href=\"http://perldoc.perl.org/functions/do.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/do.html</a>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1524727194, "post_id": 50036768, "comment_id": 87090117, "body": "Using <code>do</code> will work, but there are better ways.  Move your config code into a library <code>Configuration.pm</code> and then <code>use Configuration;</code> in your script is a much saner way of handling code reuse."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1524727260, "post_id": 50036768, "comment_id": 87090161, "body": "@vinodk89: You have to be mentioned exceptions in your question clearly <b>don&#39;t want to use system/exec commands</b>"}, {"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1524727802, "post_id": 50036768, "comment_id": 87090497, "body": "@xxfelixxx: this works!!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1524729983, "post_id": 50036768, "comment_id": 87091890, "body": "@xxfelixxx: Did you intend the OP to write a proper module, with <code>package Configuration</code> and perhaps <code>Exporter</code> functionality? It would probably be better to write this up as an an answer to make these things clear, including the need for a trailing <code>1;</code> to prevent the module from mysteriously failing to compile one day."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1524731685, "post_id": 50036768, "comment_id": 87092904, "body": "<a href=\"https://stackoverflow.com/q/5969417\">Why is it a bad idea to write configuration data in code?</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1524733759, "post_id": 50036768, "comment_id": 87094173, "body": "@xxfelixxx I wrote those details up <a href=\"https://stackoverflow.com/a/44649041/1331451\">here</a>. This should give OP a good starting point."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1524744553, "post_id": 50036768, "comment_id": 87101124, "body": "Thanks for the links and suggestions.  I was thinking along the lines of the answer @David Cross gave below, but didn&#39;t have time to write it up."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1524739880, "last_edit_date": 1524739880, "creation_date": 1524737441, "answer_id": 50040316, "question_id": 50036768, "link": "https://stackoverflow.com/questions/50036768/include-another-script-in-my-parent-perl-script/50040316#50040316", "title": "Include another script in my parent Perl script", "body": "<p>(I'm guessing that the program called <code>config.pl</code> sets config values that you want to access in <code>test.pl</code>. You don't make that clear in your question.)</p>\n\n<p>A simple example. If <code>config.pl</code> looks like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\n$some_var = 'Some value';\n</code></pre>\n\n<p>Then you can write <code>test.pl</code> to look like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse feature 'say';\n\ndo './config.pl';\n\nsay $some_var;\n</code></pre>\n\n<p>But this is a terrible idea for many reasons. Not least because it stops working when you add <code>use strict</code> and <code>use warnings</code> to either of the files (and you should aim to have <code>use strict</code> and <code>use warnings</code> in <strong>all</strong> of your Perl code).</p>\n\n<p>So what's a better approach? Turn your configuration into a proper module that returns a hash (I only have a single scalar variable in my example above, but a hash gives you a way to deliver many values in a single variable). A simple approach might look like this.</p>\n\n<p>A module called <code>MyConfig.pm</code>:</p>\n\n<pre><code>package MyConfig;\n\nuse strict;\nuse warnings;\n\nuse parent 'Exporter';\n\nour @EXPORT = qw[config];\n\nsub config {\n  my %config = (\n    some_var =&gt; 'Some value',\n  );\n\n  return %config;\n}\n\n1;\n</code></pre>\n\n<p>And a <code>test.pl</code> like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse feature 'say';\nuse FindBin '$Bin';\nuse lib $Bin;\n\nuse MyConfig;\n\nmy %config = config();\n\nsay $config{some_var};\n</code></pre>\n\n<p>Having got that working, you can add improvements like parsing the <code>%config</code> hash from an external file (perhaps stored in JSON) and then allowing different configurations for different environments (development vs production, for example).</p>\n\n<p>It's a little bit more work than your current approach, but it's far more flexible. And you can use <code>strict</code> and <code>warnings</code>.</p>\n"}], "owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 925, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1524739880, "creation_date": 1524726235, "last_edit_date": 1524729639, "question_id": 50036768, "link": "https://stackoverflow.com/questions/50036768/include-another-script-in-my-parent-perl-script", "title": "Include another script in my parent Perl script", "body": "<p>How can I include another Perl script in my base Perl script?</p>\n\n<p>I have a primary source file <code>test.pl</code> and I want to include secondary s\u00f3urce file <code>config.pl</code> within it.</p>\n\n<p>What is a standard method to achieve this in Perl?</p>\n"}, {"tags": ["linux", "perl", "environment-variables", "trace"], "answers": [{"comments": [{"owner": {"reputation": 2699, "user_id": 1729501, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ea8e08644c9bef0d92007c15f8e9fee9?s=128&d=identicon&r=PG", "display_name": "user13107", "link": "https://stackoverflow.com/users/1729501/user13107"}, "edited": false, "score": 0, "creation_date": 1524719597, "post_id": 50035230, "comment_id": 87086516, "body": "no other alternative apart from what you suggested?"}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 2699, "user_id": 1729501, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ea8e08644c9bef0d92007c15f8e9fee9?s=128&d=identicon&r=PG", "display_name": "user13107", "link": "https://stackoverflow.com/users/1729501/user13107"}, "edited": false, "score": 0, "creation_date": 1524719698, "post_id": 50035230, "comment_id": 87086547, "body": "No, there is unfortunately no other alternative. Which OS are you using btw? (Looking for the right link to documentation)"}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 2699, "user_id": 1729501, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ea8e08644c9bef0d92007c15f8e9fee9?s=128&d=identicon&r=PG", "display_name": "user13107", "link": "https://stackoverflow.com/users/1729501/user13107"}, "edited": false, "score": 0, "creation_date": 1524720089, "post_id": 50035230, "comment_id": 87086663, "body": "Well, actually, since Perl doesn&#39;t need the <code>-f</code>, meaning it accept a filename argument without an option, you have room for exactly one argument."}, {"owner": {"reputation": 2699, "user_id": 1729501, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ea8e08644c9bef0d92007c15f8e9fee9?s=128&d=identicon&r=PG", "display_name": "user13107", "link": "https://stackoverflow.com/users/1729501/user13107"}, "edited": false, "score": 0, "creation_date": 1524723711, "post_id": 50035230, "comment_id": 87088081, "body": "I&#39;m using Ubuntu"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524731497, "post_id": 50035230, "comment_id": 87092796, "body": "The <a href=\"https://metacpan.org/pod/warnings\" rel=\"nofollow noreferrer\"><code>warnings</code> pragma</a> is more useful than the <code>-w</code> command-line option anyway, so there&#39;s another saving for the shebang-line right there."}, {"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1524732739, "post_id": 50035230, "comment_id": 87093558, "body": "But the OP is asking about how switches for <code>env</code> are handled, specifically how to add <code>perl</code> switches when you&#39;re using <code>env</code>"}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1524733237, "post_id": 50035230, "comment_id": 87093862, "body": "@jjmerelo That&#39;s the same principle. But when using <code>env</code> there is no room for any option"}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524733760, "post_id": 50035230, "comment_id": 87094174, "body": "@Borodin I have no idea of Perl. Was more talking about command line options in general. I was just looking for some switches that don&#39;t need a an option value. (Unfortunately <code>man perl</code> does not give me the switches)"}], "tags": [], "owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "is_accepted": false, "score": 2, "last_activity_date": 1524733933, "last_edit_date": 1524733933, "creation_date": 1524719348, "answer_id": 50035230, "question_id": 50035073, "link": "https://stackoverflow.com/questions/50035073/how-to-use-usr-bin-env-perl-functionality-along-with-perl-arguments/50035230#50035230", "title": "How to use /usr/bin/env perl functionality along with perl arguments?", "body": "<p>First, the shebang line is handled differently depending on the OS. I'm talking about GNU/Linux here, the leading operating system. ;)</p>\n\n<p>The shebang line will be split only in two parts, the interpreter (usr/bin/perl) and the second argument which is supposed to prepend be the filename  argument which itself will be append automatically when executing the shebanged file. Some interpreters need that. Like <code>#!/usr/bin/awk -f</code> for example. <code>-f</code> is needed in front of the filename argument.</p>\n\n<p>Perl doesn't need the <code>-f</code> to pass the perl file name, meaning it works like</p>\n\n<pre><code>perl file.pl\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>perl -f file.pl\n</code></pre>\n\n<p>That gives you basically room for one argument switch that you can choose, like</p>\n\n<pre><code>#!/usr/bin/perl -w\n</code></pre>\n\n<p>to enable warnings. Furthermore, since perl is using getopt() to parse the command line arguments, and getopt() does not require argument switches to be separated by spaces, you pass even multiple switches as long as you don't separate them, like this:</p>\n\n<pre><code>#!/usr/bin/perl -Xw\n</code></pre>\n\n<p>Well, as soon as an option takes a value, like <code>-a foo</code> that doesn't work any more and such options can't be passed at all. No chance.</p>\n\n<p>A more flexible way is to use a shell wrappper like this:</p>\n\n<pre><code>#!/bin/bash\nexec perl -a -b=123 ... filename.pl\n</code></pre>\n\n<hr>\n\n<p>PS: Looking at your question again, you have been asking how to use perl switches together with <code>/usr/bin/env perl</code>. No chance. If you pass an option to Perl, like <code>/usr/bin/env perl -w</code>, Linux would try to open the interpreter <code>'perl -w'</code>. No further splitting.</p>\n"}, {"comments": [{"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1524721177, "post_id": 50035468, "comment_id": 87087079, "body": "It&#39;s the perl way to do it ;)"}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": true, "score": 10, "last_activity_date": 1524730624, "last_edit_date": 1524730624, "creation_date": 1524720679, "answer_id": 50035468, "question_id": 50035073, "link": "https://stackoverflow.com/questions/50035073/how-to-use-usr-bin-env-perl-functionality-along-with-perl-arguments/50035468#50035468", "title": "How to use /usr/bin/env perl functionality along with perl arguments?", "body": "<p>This is one of those things that <em>Just Doesn't Work&trade;</em> on some systems, notably those with a GNU <code>env</code>. </p>\n\n<p>Here's a sneaky workaround mentioned in <a href=\"https://perldoc.perl.org/perlrun.html#%23!-and-quoting-on-non-Unix-systems\" rel=\"noreferrer\">perlrun</a> that I've (ab)used in the past:</p>\n\n<pre><code>#!/bin/sh\n#! -*-perl-*-\neval 'exec perl -x -wS $0 ${1+\"$@\"}'\n  if 0;\n\nprint \"Hello, world!\\n\";\n</code></pre>\n\n<p>This will find <code>perl</code> on your PATH and you can add whatever other switches you'd like to the command line. You can even set environment variables, etc. before <code>perl</code> is invoked. The general idea is that <code>sh</code> runs the <code>eval</code>, but <code>perl</code> doesn't, and the extra gnarly bits ensure that Perl finds your program correctly and passes along all the arguments. </p>\n\n<pre><code>#!/bin/sh\nFOO=bar; export FOO\n\n#! -*-perl-*-\neval 'exec perl -d:Trace -x -wS $0 ${1+\"$@\"}'\n  if 0;\n\n$Devel::Trace::TRACE = 1;\n\nprint \"Hello, $ENV{FOO}!\\n\";\n</code></pre>\n\n<p>If you save the file with a <code>.pl</code> extension, your editor <em>should</em> detect the correct file syntax, but the initial shebang might throw it off. The other caveat is that if the Perl part of the script throws an error, the line number(s) might be off. </p>\n\n<p>The neat thing about this trick is that it works for Ruby too (and possibly some other languages like Python, with additional modifications):</p>\n\n<pre><code>#!/bin/sh\n#! -*-ruby-*-\neval 'exec ruby -x -wS $0 ${1+\"$@\"}' \\\n  if false\n\nputs \"Hello, world!\"\n</code></pre>\n\n<p>Hope that helps!</p>\n"}, {"tags": [], "owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "is_accepted": false, "score": 1, "last_activity_date": 1524733858, "creation_date": 1524733858, "answer_id": 50039116, "question_id": 50035073, "link": "https://stackoverflow.com/questions/50035073/how-to-use-usr-bin-env-perl-functionality-along-with-perl-arguments/50039116#50039116", "title": "How to use /usr/bin/env perl functionality along with perl arguments?", "body": "<p>As @hek2mgl comments  <a href=\"https://stackoverflow.com/posts/50035230/revisions\">above</a>, a flexible way of doing that is using a shell wrapper, since the shebang admits a single argument (which is going to be <code>perl</code>). A simple wraper would be this one</p>\n\n<pre><code>#!/bin/bash\n\nenv perl -d:Trace \"$@\"\n</code></pre>\n\n<p>Which you can use then like this</p>\n\n<pre><code>#!./perltrace\n</code></pre>\n\n<p>or you can create similar scripts, and put them wherever <code>perl</code> resides. </p>\n"}], "owner": {"reputation": 2699, "user_id": 1729501, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ea8e08644c9bef0d92007c15f8e9fee9?s=128&d=identicon&r=PG", "display_name": "user13107", "link": "https://stackoverflow.com/users/1729501/user13107"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 773, "favorite_count": 0, "accepted_answer_id": 50035468, "answer_count": 3, "score": 4, "last_activity_date": 1524733933, "creation_date": 1524718485, "question_id": 50035073, "link": "https://stackoverflow.com/questions/50035073/how-to-use-usr-bin-env-perl-functionality-along-with-perl-arguments", "title": "How to use /usr/bin/env perl functionality along with perl arguments?", "body": "<p>I have a perl script with shebang as </p>\n\n<pre><code>#!/usr/bin/env perl\n</code></pre>\n\n<p>I want this script to print each line as it is executed. So I installed Devel::Trace and changed script shebang to </p>\n\n<pre><code>#!/usr/bin/env perl -d:Trace\n</code></pre>\n\n<p>But this gives error as it is not a valid syntax.</p>\n\n<p>What should I do to use both <code>env</code> functionality and <code>tracing</code> functionality?</p>\n"}, {"tags": ["python", "linux", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1524703613, "post_id": 50033136, "comment_id": 87082601, "body": "Yikes. Is Perl or Python an option?"}, {"owner": {"reputation": 1610, "user_id": 9049216, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bbb078bd76dc5110b4a3ba8569142b3d?s=128&d=identicon&r=PG&f=1", "display_name": "flash", "link": "https://stackoverflow.com/users/9049216/flash"}, "reply_to_user": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1524705609, "post_id": 50033136, "comment_id": 87083032, "body": "Yeah perl or python are an option as well. It&#39;s gonna be hard parsing these string and formatting it back via linux for sure."}], "answers": [{"comments": [{"owner": {"reputation": 1610, "user_id": 9049216, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bbb078bd76dc5110b4a3ba8569142b3d?s=128&d=identicon&r=PG&f=1", "display_name": "flash", "link": "https://stackoverflow.com/users/9049216/flash"}, "edited": false, "score": 0, "creation_date": 1524713822, "post_id": 50034294, "comment_id": 87084980, "body": "yeah its complaining about this module <code>LWP::Simple module</code>. checking on how I can install this module on ubuntu 16. let me know if you know the steps"}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 1610, "user_id": 9049216, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bbb078bd76dc5110b4a3ba8569142b3d?s=128&d=identicon&r=PG&f=1", "display_name": "flash", "link": "https://stackoverflow.com/users/9049216/flash"}, "edited": false, "score": 0, "creation_date": 1524713940, "post_id": 50034294, "comment_id": 87085006, "body": "@user5447339 <code>apt-get install libwww-perl</code> should do the trick. I can also modify it to accept the output of <code>wget</code> on the input. Let me know if you&#39;d prefer that."}, {"owner": {"reputation": 1610, "user_id": 9049216, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bbb078bd76dc5110b4a3ba8569142b3d?s=128&d=identicon&r=PG&f=1", "display_name": "flash", "link": "https://stackoverflow.com/users/9049216/flash"}, "edited": false, "score": 0, "creation_date": 1524714137, "post_id": 50034294, "comment_id": 87085073, "body": "yeah wget will be great I think"}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 1610, "user_id": 9049216, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bbb078bd76dc5110b4a3ba8569142b3d?s=128&d=identicon&r=PG&f=1", "display_name": "flash", "link": "https://stackoverflow.com/users/9049216/flash"}, "edited": false, "score": 0, "creation_date": 1524714966, "post_id": 50034294, "comment_id": 87085259, "body": "@user5447339 Updated!"}, {"owner": {"reputation": 1610, "user_id": 9049216, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bbb078bd76dc5110b4a3ba8569142b3d?s=128&d=identicon&r=PG&f=1", "display_name": "flash", "link": "https://stackoverflow.com/users/9049216/flash"}, "edited": false, "score": 0, "creation_date": 1524716356, "post_id": 50034294, "comment_id": 87085619, "body": "I am getting this error: <code>Can&#39;t use string (&quot;{0=2, 1=3, 2=4, 3=5, 4=6, 5=7, 6&quot;...) as a HASH ref while &quot;strict refs&quot; in use at .&#47;tester.pl line 83.</code> I think this is the line `    map sprintf(&#39;%s=[%s]&#39;, $_, join(&#39;, &#39;, sort @{ $data-&gt;{$_} })),`"}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": true, "score": 1, "last_activity_date": 1532966550, "last_edit_date": 1532966550, "creation_date": 1524712613, "answer_id": 50034294, "question_id": 50033136, "link": "https://stackoverflow.com/questions/50033136/extract-strings-from-a-service-response-and-group-values-basis-on-keys-from-that/50034294#50034294", "title": "extract strings from a service response and group values basis on keys from that response", "body": "<p>Welp, my Perl's a bit rusty, but here's something to get you started. It parses the entire data structure, then pulls off the parts given on the command line. I don't know what version of Perl you're working with, or if you have the ability to install modules, so I kept it as bare-bones as possible. </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nunless (@ARGV &gt;= 2) {\n  die \"USAGE: $0 path key=/path/to/key.txt ..\\n\";\n}\n\nour $WANTED_PATH = $ARGV[0];\nour %WANTED_KEYS = map split(/=/, $_, 2), @ARGV[1..$#ARGV];\n\nmy $data = parse(*STDIN)-&gt;{PATH}{$WANTED_PATH}\n  or die \"FATAL: Path &lt;$WANTED_PATH&gt; not found\\n\";\n\nwhile (my ($key, $file) = each %WANTED_KEYS) {\n  unless (exists $data-&gt;{$key}) {\n    warn \"Key &lt;$key&gt; not found\\n\";\n\n    next;\n  }\n\n  write_file($file, $data-&gt;{$key});\n\n  print \"Wrote key &lt;$key&gt; to file &lt;$file&gt;\\n\";\n}\n\nsub parse {\n  my ($fh, $wanted) = @_;\n\n  # contains the current subsection of the data being parsed\n  my $current_path;\n\n  my %data = (PATH =&gt; {});\n  while (my $line = &lt;$fh&gt;) {\n    chomp $line;\n\n    next unless $line =~ /\\S/;\n\n    if ($line =~ s/^\\s+//) {\n      if ($current_path) {\n        my ($key, $value) = split /\\s*:\\s*/, $line, 2;\n\n        if (exists $WANTED_KEYS{$key}) {\n          $value = parse_pairs($value);\n        }\n\n        $data{PATH}{$current_path}{$key} = $value;\n      }\n    }\n    else {\n      my ($key, $value) = split /\\s*=\\s*/, $line, 2;\n\n      if ($key eq 'PATH') {\n        $data{$key}{$current_path = $value} = {};\n      }\n      else {\n        $data{$key} = $value;\n      }\n    }\n  }\n\n  return \\%data;\n}\n\nsub parse_pairs {\n  my ($pairs) = @_;\n\n  my %data;\n  while ($pairs =~ /(\\d+)\\s*=\\s*(\\d+)/g) {\n    push @{ $data{$2} ||= [] }, $1;\n  }\n\n  return \\%data;\n}\n\nsub write_file {\n  my ($file, $data) = @_;\n\n  open(my $fh, '&gt;', $file)\n    or die \"FATAL: Unable to open file &lt;$file&gt; for writing: $!\\n\";\n\n  print {$fh} '{';\n  print {$fh} join ', ',\n    map sprintf('%s=[%s]', $_, join(', ', sort @{ $data-&gt;{$_} })),\n    sort keys %$data;\n  print {$fh} '}';\n\n  close($fh);\n}\n</code></pre>\n\n<p>Use it like so:</p>\n\n<pre><code>wget -O- -q -t1 http://localhost:8080/tester |\n  ./tester.pl /doc/path/abc pri=p.txt sec=s.txt\n</code></pre>\n"}], "owner": {"reputation": 1610, "user_id": 9049216, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bbb078bd76dc5110b4a3ba8569142b3d?s=128&d=identicon&r=PG&f=1", "display_name": "flash", "link": "https://stackoverflow.com/users/9049216/flash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 50034294, "answer_count": 1, "score": 0, "last_activity_date": 1532966550, "creation_date": 1524702888, "last_edit_date": 1524705281, "question_id": 50033136, "link": "https://stackoverflow.com/questions/50033136/extract-strings-from-a-service-response-and-group-values-basis-on-keys-from-that", "title": "extract strings from a service response and group values basis on keys from that response", "body": "<p>I have a service <code>(http://localhost:8080/tester)</code> that gives me below response when I call it. I have shorten the format to make it clear.</p>\n\n<pre><code>modified=false\nver=10\nPATH=/doc/path/abc\n    Servers:3\n    pri:{0=1, 1=2, 2=3, 3=4, 4=5, 5=6, 6=7, 7=8, 8=1, 9=2, 10=3, 11=4, 12=5, 13=6, 14=7, 15=8, 17=2, 16=1, 19=4, 18=3, 21=6, 20=5, 23=8, 22=7, 25=2, 24=1, 27=4, 26=3, 29=6, 28=5, 31=8, 30=7, 34=3, 35=4, 32=1, 33=2, 38=7, 39=8, 36=5, 37=6, 42=3, 43=4, 40=1}\n    sec:{0=2, 1=3, 2=4, 3=5, 4=6, 5=7, 6=8, 7=1, 8=3, 9=4, 10=5}\nPATH=/doc/path/pqr\n    Servers:3\n    pri:{0=1, 1=2, 2=3, 3=4, 4=5, 5=6, 6=7, 7=8, 8=1, 9=2, 10=3, 11=4, 12=5, 13=6, 14=7, 15=8, 17=2, 16=1, 19=4, 18=3, 21=6, 20=5, 23=8, 22=7, 25=2, 24=1, 27=4, 26=3, 29=6, 28=5, 31=8, 30=7, 34=3, 35=4, 32=1, 33=2, 38=7, 39=8, 36=5, 37=6, 42=3, 43=4, 40=1}\n    sec:{0=2, 1=3, 2=4, 3=5, 4=6, 5=7, 6=8, 7=1, 8=3, 9=4, 10=5}\n</code></pre>\n\n<p>I need to read this response and extract value of <code>pri</code> and <code>sec</code> but only for <code>PATH=/doc/path/abc</code>. Now format of <code>pri</code> and <code>sec</code> is like this:</p>\n\n<pre><code>{value1=key1, value2=key2, value3=key2, value4=key1}\n</code></pre>\n\n<p>Each unique key can have multiple values both in <code>pri</code> and <code>sec</code> list. Now I need to read both <code>pri</code> and <code>sec</code> list and make two files <code>p.txt</code> for <code>pri</code> list and <code>s.txt</code> for <code>sec</code> list by grouping values basis on unique key like below:</p>\n\n<p><strong>p.txt</strong> Here keys and values come from <code>pri</code> list.</p>\n\n<pre><code>{key1=[value1, value2, value3, value4, value5, value6, value7, value8], key2=[value9, value10, value11, value12, value13, value14]}\n</code></pre>\n\n<p><strong>s.txt</strong> Here keys and values come from <code>sec</code> list.</p>\n\n<pre><code>{key1=[value1, value2, value3, value4, value5, value6, value7, value8], key2=[value9, value10, value11, value12, value13, value14]}\n</code></pre>\n\n<p>I can't figure out how to extract <code>pri</code> and <code>sec</code> value just for <code>PATH=/doc/path/abc</code> and make corresponding files <code>p.txt</code> and <code>s.txt</code> by grouping values for each unique key just like in the above format.</p>\n\n<pre><code>DATA=$(wget -O - -q -t 1 http://localhost:8080/tester);\necho $DATA\n# extract pri and sec here and then group values basis on unique keys \n# and generate files accordingly.\nwhile IFS= read -r $DATA\ndo\n   echo \"$line\"\ndone\n</code></pre>\n"}]