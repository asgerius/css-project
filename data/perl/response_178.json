[{"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1528319816, "post_id": 50729504, "comment_id": 88467234, "body": "Could you be more specific, that is, show some actual examples of input, the expected output for each input, and perhaps some code you have tried so far?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1528322253, "post_id": 50729504, "comment_id": 88468107, "body": "@haukex, The input for both examples is the string produced by <code>join($sep, &quot;A value&quot;, &quot;B value&quot;, &quot;C value&quot;, &quot;D value&quot;)</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1528336275, "post_id": 50729504, "comment_id": 88471649, "body": "Are you sure it wouldn&#39;t be better to use <code>$var-&gt;{&quot;avalue dvalue&quot;} = { A =&gt; avalue, B =&gt; bvalue }</code>? That way the key is just <code>join &#39; &#39;, avalue, dvalue</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528336430, "post_id": 50729504, "comment_id": 88471691, "body": "Also, which of the columns is supposed to be in the bottom-level hash? You seem to have <code>A</code> and <code>B</code> in both cases, but nothing is passed to the subroutine to select these two."}, {"owner": {"reputation": 1, "user_id": 4954582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238e4dc1d916a08a9430b7f6d8edadd2?s=128&d=identicon&r=PG&f=1", "display_name": "Swechsler", "link": "https://stackoverflow.com/users/4954582/swechsler"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528400457, "post_id": 50729504, "comment_id": 88505552, "body": "@Borodin I considered using delimiter-separated key values as a single hash key, but as a database guy, that just rubs me the wrong way. It also makes it difficult to list sub-keys when given just the top key, without iterating through the entire hash."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528406749, "post_id": 50729504, "comment_id": 88508530, "body": "@Swechsler: <i>&quot;as a database guy, that just rubs me the wrong way&quot;</i> So you never use compound keys in your databases? <i>&quot;It also makes it difficult to list sub-keys when given just the top key&quot;</i> Is that something you need to do? You need to list all the accesses that you require and design your data structure from there. It&#39;s quite possible just to store all the records as an array of arrays of fields, and create separate hashes that index that array by all the required keys."}, {"owner": {"reputation": 1, "user_id": 4954582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238e4dc1d916a08a9430b7f6d8edadd2?s=128&d=identicon&r=PG&f=1", "display_name": "Swechsler", "link": "https://stackoverflow.com/users/4954582/swechsler"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528732509, "post_id": 50729504, "comment_id": 88609366, "body": "@Borodin A compound key would be [key1, key, key3], not [key1+key2+key3]"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528734850, "post_id": 50729504, "comment_id": 88610590, "body": "@Swechsler: That&#39;s a petty and irrelevant distinction. You&#39;re talking about internal implementation now."}, {"owner": {"reputation": 1, "user_id": 4954582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238e4dc1d916a08a9430b7f6d8edadd2?s=128&d=identicon&r=PG&f=1", "display_name": "Swechsler", "link": "https://stackoverflow.com/users/4954582/swechsler"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528747030, "post_id": 50729504, "comment_id": 88616253, "body": "@Borodin Not at all. Here&#39;s a simple example of how they&#39;re different.  With discrete keys (e.g. key1, key2, key3) I can perform the action  &#39;&#39; keys %{$data-&gt;{key1}} &#39;&#39; and see all the subkeys for key1; however, with an appended key I can&#39;t do that without additional logic and a regular expression match."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4954582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238e4dc1d916a08a9430b7f6d8edadd2?s=128&d=identicon&r=PG&f=1", "display_name": "Swechsler", "link": "https://stackoverflow.com/users/4954582/swechsler"}, "edited": false, "score": 0, "creation_date": 1528400267, "post_id": 50729780, "comment_id": 88505450, "body": "This could work, although ti&#39;s a PITA to get any new modules installed on our systems. Is there a native Perl solution?"}, {"owner": {"reputation": 1, "user_id": 4954582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238e4dc1d916a08a9430b7f6d8edadd2?s=128&d=identicon&r=PG&f=1", "display_name": "Swechsler", "link": "https://stackoverflow.com/users/4954582/swechsler"}, "edited": false, "score": 0, "creation_date": 1528400676, "post_id": 50729780, "comment_id": 88505664, "body": "I&#39;m thinking that the easiest (although ugly) solution might be to have separate cases for a reasonable number of key nestings (say, 4 or 5) that I might ever have. But I would still like to know if there is a &quot;good&quot; way to do it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 4954582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238e4dc1d916a08a9430b7f6d8edadd2?s=128&d=identicon&r=PG&f=1", "display_name": "Swechsler", "link": "https://stackoverflow.com/users/4954582/swechsler"}, "edited": false, "score": 1, "creation_date": 1528401407, "post_id": 50729780, "comment_id": 88506048, "body": "If you can install a script, you can install a module. No special permissions are needed. That said, see update."}, {"owner": {"reputation": 1, "user_id": 4954582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238e4dc1d916a08a9430b7f6d8edadd2?s=128&d=identicon&r=PG&f=1", "display_name": "Swechsler", "link": "https://stackoverflow.com/users/4954582/swechsler"}, "edited": false, "score": 0, "creation_date": 1528741596, "post_id": 50729780, "comment_id": 88613835, "body": "Now that I&#39;ve had a closer look, I&#39;m confused by this. Does $data refer to the current row being read? If so, how do I combine all the rows into a single hash reference? Also, how do I get the (compound) key of the row just read/assigned?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 4954582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238e4dc1d916a08a9430b7f6d8edadd2?s=128&d=identicon&r=PG&f=1", "display_name": "Swechsler", "link": "https://stackoverflow.com/users/4954582/swechsler"}, "edited": false, "score": 0, "creation_date": 1528755335, "post_id": 50729780, "comment_id": 88619424, "body": "$data is what you called $var"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1528401370, "last_edit_date": 1528401370, "creation_date": 1528319971, "answer_id": 50729780, "question_id": 50729504, "link": "https://stackoverflow.com/questions/50729504/perl-build-a-hash-without-a-predefined-number-of-key-columns/50729780#50729780", "title": "Perl: Build a hash without a predefined number of key columns?", "body": "<pre><code>use Data::Diver qw( DiveVal );\n\nmy @key_col_names = ...;\nmy @col_names     = ...;\n\nmy $data;\nwhile ( my @row = ... ) {\n    my %rec; @rec{@col_names} = @row;\n    my @keys = @rec{@key_col_names};\n    DiveVal($data, map \\$_, @keys) = \\%rec;\n}\n</code></pre>\n\n<p>You can use the following instead of <code>DiveVal($data, map \\$_, @keys) = \\%rec</code>:</p>\n\n<pre><code>sub dive_val :lvalue {\n   my $p = \\shift;\n   $p = \\( $$p-&gt;{$_} ) for @_;\n   $$p\n}\n\ndive_val($data, @keys) = \\%rec;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4954582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238e4dc1d916a08a9430b7f6d8edadd2?s=128&d=identicon&r=PG&f=1", "display_name": "Swechsler", "link": "https://stackoverflow.com/users/4954582/swechsler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528401370, "creation_date": 1528318755, "question_id": 50729504, "link": "https://stackoverflow.com/questions/50729504/perl-build-a-hash-without-a-predefined-number-of-key-columns", "title": "Perl: Build a hash without a predefined number of key columns?", "body": "<p>I'm trying to write a function that will read a delimited file (think something like /etc/passwd) and return the values in a hash. The delimiter, column names and key columns will be specified as parameters to the function, the last two passed as array references. It will return a reference to a hash.</p>\n\n<p>I'd like to allow both single and compound keys, but I can't figure out the best way to create the hash when I don't know the depth of the keys beforehand.</p>\n\n<p>For example, suppose I specify 4 columns: A, B, C, and D, and two key columns: A and D. To assign values from a single line in the file, we'd have something like:</p>\n\n<pre><code>$var-&gt;{A value)-&gt;{D value)-&gt;{A} = A value;\n$var-&gt;{A value)-&gt;{D value)-&gt;{B} = B value;\n...\n</code></pre>\n\n<p>However, if I specify only a single key column (B), it would look like:</p>\n\n<pre><code>$var-&gt;{B value)-&gt;{A} = A value;\n$var-&gt;{B value)-&gt;{B} = B value;\n...\n</code></pre>\n\n<p>What would be a way to generalize this without knowing the number of key columns prior to execution?</p>\n"}, {"tags": ["perl", "foreach"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9900698"}, "edited": false, "score": 0, "creation_date": 1528323461, "post_id": 50729824, "comment_id": 88468461, "body": "Thanks a bunch!! Wasted almost a day figuring out how I can get both files at a time and loop over using nested foreach loop."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528323720, "post_id": 50729824, "comment_id": 88468532, "body": "@PKV  Most welcome :)  Now think through what exactly you want to do if they are unequal, what else to check, etc."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 4, "last_activity_date": 1528323201, "last_edit_date": 1528323201, "creation_date": 1528320182, "answer_id": 50729824, "question_id": 50729354, "link": "https://stackoverflow.com/questions/50729354/alternate-looping-nested-foreach-loops/50729824#50729824", "title": "Alternate looping nested foreach loops", "body": "<p>Loop over the index of either of the arrays</p>\n\n<pre><code>foreach my $i (0..$#list) {\n    say \"value of a: \", $list[$i]  // 'undef';  #/\n    say \"value of b: \", $list1[$i] // 'undef';\n}\n</code></pre>\n\n<p>where\n<a href=\"https://perldoc.perl.org/perlop.html#Logical-Defined-Or\" rel=\"nofollow noreferrer\">defined-or</a>\n(<code>//</code>)\nis needed or you'll get warnings for undefined elements (or if the second array gets exhausted before the first one). I print the string <code>undef</code>, adjust as suitable.</p>\n\n<p>This clearly assumes that it makes sense processing the arrays in parallel \nand so that they are of equal size. If they are not you may want to do something other than carry on once one ends.</p>\n\n<p>Your code exits the inner loop after the first iteration with <code>next</code>, and the next time it returns to it it starts from the beginning.</p>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 1, "last_activity_date": 1528322807, "creation_date": 1528322807, "answer_id": 50730319, "question_id": 50729354, "link": "https://stackoverflow.com/questions/50729354/alternate-looping-nested-foreach-loops/50730319#50730319", "title": "Alternate looping nested foreach loops", "body": "<p>You are describing the behavior of <code>each_array</code> from <a href=\"https://metacpan.org/pod/List::MoreUtils#each_array-ARRAY1-ARRAY2-...\" rel=\"nofollow noreferrer\">List::MoreUtils</a>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nuse List::MoreUtils qw(each_array);\n\nmy @arr1 = (10, 20, 30, 40, 50);\nmy @arr2 = (15, 25, 35, 45, 55);\n\nmy $it = each_array(@arr1, @arr2);\n\nwhile (my ($a1, $a2) = $it-&gt;()) {\n    say \"value from array 1: $a1\";\n    say \"value from array 2: $a2\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>value from array 1: 10\nvalue from array 2: 15\nvalue from array 1: 20\nvalue from array 2: 25\nvalue from array 1: 30\nvalue from array 2: 35\nvalue from array 1: 40\nvalue from array 2: 45\nvalue from array 1: 50\nvalue from array 2: 55\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9900698"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 50730319, "answer_count": 2, "score": 1, "last_activity_date": 1528323201, "creation_date": 1528318078, "last_edit_date": 1528318561, "question_id": 50729354, "link": "https://stackoverflow.com/questions/50729354/alternate-looping-nested-foreach-loops", "title": "Alternate looping nested foreach loops", "body": "<p>I am trying to print a value from one foreach loop. Then go to the other foreach loop and continue until the last elements in both arrays.</p>\n\n<pre><code>@list = (10, 20, 30, 40, 50);\n@list1 = (15, 25, 35, 45, 55);\nOUTER:foreach $a (@list) {\n        print \"value of a: $a\\n\";\n        foreach $b (@list1) {\n          print \"value of b: $b\\n\";\n          next  OUTER;\n        }\n      }\n</code></pre>\n\n<p>This returns the same value from the second foreach loop.</p>\n\n<pre><code>value of a: 10\nvalue of b: 15\nvalue of a: 20\nvalue of b: 15\nvalue of a: 30\nvalue of b: 15\nvalue of a: 40\nvalue of b: 15\nvalue of a: 50\nvalue of b: 15\n</code></pre>\n\n<p>The desired output should be as follows:</p>\n\n<pre><code>value of a: 10\nvalue of b: 15\nvalue of a: 20\nvalue of b: 25\nvalue of a: 30\nvalue of b: 35\nvalue of a: 40\nvalue of b: 45\nvalue of a: 50\nvalue of b: 55\n</code></pre>\n\n<p>Is there a way I can print values from both arrays alternately?? Any loop control statements can do this?</p>\n\n<p>I am just testing this logic because I am going to use it in a script of mine. Where, I will be opening a pair of files from the foreach loops and process it (one file per loop). The files I will be opening using foreach loops are in separate directories and are in a pool of several similar files. I will be looping in my code to open all of them using the nested foreach logic.</p>\n\n<p>The script would look something like this:</p>\n\n<pre><code>$dir1 = \"/tmp/*\";\n$dir2 = \"/home/*\";\n@files1 = glob( $dir1 );\n@files2 = glob( $dir2 );\nforeach (@files1) {\n .\n .\n . \n   foreach (@files2){\n    .\n    .\n    .\n   }\n}\n</code></pre>\n"}, {"tags": ["bash", "perl", "sed", "tcl"], "comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1528316447, "post_id": 50728773, "comment_id": 88465749, "body": "Is that the exact line spacing? Is there a blank line before the trailing parenthesis?"}, {"owner": {"reputation": 15, "user_id": 5480545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbf13ad6ba11cf398d21543d7bf1e6a?s=128&d=identicon&r=PG&f=1", "display_name": "ThisUser_New", "link": "https://stackoverflow.com/users/5480545/thisuser-new"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1528317254, "post_id": 50728773, "comment_id": 88466103, "body": "Yes. However, the sed I used was:  sed -e &#39;/Koe/,+4d&#39; which gives me what I am looking for here.. But at times the lines length chages"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5480545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbf13ad6ba11cf398d21543d7bf1e6a?s=128&d=identicon&r=PG&f=1", "display_name": "ThisUser_New", "link": "https://stackoverflow.com/users/5480545/thisuser-new"}, "edited": false, "score": 0, "creation_date": 1528322562, "post_id": 50729749, "comment_id": 88468212, "body": "thanks.. the whitespace is messing me up too.. sometimes two whitespaces sometimes more.. but this will do!"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "reply_to_user": {"reputation": 15, "user_id": 5480545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbf13ad6ba11cf398d21543d7bf1e6a?s=128&d=identicon&r=PG&f=1", "display_name": "ThisUser_New", "link": "https://stackoverflow.com/users/5480545/thisuser-new"}, "edited": false, "score": 1, "creation_date": 1528322656, "post_id": 50729749, "comment_id": 88468239, "body": "Perhaps <code>&#47;^[[:blank:]]\\+)[[:blank:]]\\+$&#47;</code> will account for leading/trailing whitespace on that line."}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": true, "score": 1, "last_activity_date": 1528319887, "creation_date": 1528319887, "answer_id": 50729749, "question_id": 50728773, "link": "https://stackoverflow.com/questions/50728773/tcl-or-sed-or-shell-search-replace-multiple-lines/50729749#50729749", "title": "tcl or sed or shell search replace multiple lines", "body": "<p>Perhaps: </p>\n\n<pre><code>sed '/mu-&gt;Koe/,/^)$/d' file\n</code></pre>\n\n<p>That will delete from the Koe line to the next line containing only a right parenthesis. You may need to adjust the 2nd pattern to account for whitespace.</p>\n"}], "owner": {"reputation": 15, "user_id": 5480545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbf13ad6ba11cf398d21543d7bf1e6a?s=128&d=identicon&r=PG&f=1", "display_name": "ThisUser_New", "link": "https://stackoverflow.com/users/5480545/thisuser-new"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 50729749, "answer_count": 1, "score": 1, "last_activity_date": 1528321922, "creation_date": 1528315888, "last_edit_date": 1528321922, "question_id": 50728773, "link": "https://stackoverflow.com/questions/50728773/tcl-or-sed-or-shell-search-replace-multiple-lines", "title": "tcl or sed or shell search replace multiple lines", "body": "<p>I have a file which contains section I'd like to delete: </p>\n\n<pre><code> mu-&gt;doe = '( tr &lt;br&gt;\n     tekt  ( tr uapp \"(Finction rood (\\;)&lt;br&gt;\n     ord  ( a b c)&lt;br&gt;\n\n  )&lt;br&gt;\n\n  mu-&gt;Koe = '( tr&lt;br&gt;\n     tekt  ( tr uapp \"(Finction rood (\\;)..&lt;br&gt;\n     ord  ( a b c)&lt;br&gt;\n\n  )&lt;br&gt;\n\n  mu-&gt;Yoe = '( tr &lt;br&gt;\n     tekt  ( tr uapp \"(Finction rood (\\;)&lt;br&gt;\n     ord  ( a b c)&lt;br&gt;\n\n  )&lt;br&gt;\n</code></pre>\n\n<p>I need to remove <code>mu-&gt; Koe</code> section resulting text in the file should be:</p>\n\n<pre><code>  mu-&gt;doe = '( tr &lt;br&gt;\n     tekt  ( tr uapp \"(Finction rood (\\;)&lt;br&gt;\n     ord  ( a b c)&lt;br&gt;\n\n  )&lt;br&gt;\n\n   mu-&gt;Yoe = '( tr &lt;br&gt;\n     tekt  ( tr uapp \"(Finction rood (\\;)&lt;br&gt;\n     ord  ( a b c)&lt;br&gt;\n\n  )&lt;br&gt;\n</code></pre>\n\n<p>I used sed: </p>\n\n<pre><code>sed -e '/mica/,+5d'\n</code></pre>\n\n<p>but the number of lines may vary and will not be good solution.. \nEither sed, tcl or any script will be helpful.. </p>\n"}, {"tags": ["perl", "unix", "awk", "sed", "grep"], "answers": [{"comments": [{"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1528316824, "post_id": 50728348, "comment_id": 88465914, "body": "Does this solution require 2 <code>gunzip</code> operations (or a temp file)?"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "reply_to_user": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1528319134, "post_id": 50728348, "comment_id": 88466944, "body": "better to use a temp file."}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 0, "last_activity_date": 1528314188, "creation_date": 1528314188, "answer_id": 50728348, "question_id": 50728135, "link": "https://stackoverflow.com/questions/50728135/extract-everything-between-first-and-last-occurence-of-the-same-pattern-in-singl/50728348#50728348", "title": "Extract everything between first and last occurence of the same pattern in single iteration", "body": "<p>I don't think regex will be faster than double scan... </p>\n\n<p>Here is an <code>awk</code> solution (double scan)</p>\n\n<pre><code>$ awk '/pattern/ &amp;&amp; NR==FNR {a[++f]=NR; next} a[1]&lt;=FNR &amp;&amp; FNR&lt;=a[f]' file{,} \n</code></pre>\n\n<p>Alternatively if you have any a priori information on where the patterns appear on the file you can have heuristic approaches which will be faster on those special cases.</p>\n"}, {"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 2, "last_activity_date": 1528315767, "last_edit_date": 1528315767, "creation_date": 1528315155, "answer_id": 50728589, "question_id": 50728135, "link": "https://stackoverflow.com/questions/50728135/extract-everything-between-first-and-last-occurence-of-the-same-pattern-in-singl/50728589#50728589", "title": "Extract everything between first and last occurence of the same pattern in single iteration", "body": "<p>I would write</p>\n\n<pre><code>gunzip -c file.gz | sed -n '/CAPTURE/,$p' | tac | sed -n '/CAPTURE/,$p' | tac\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 684, "user_id": 762522, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fd981b39a77cf8a7dc8c2dc5c25c126b?s=128&d=identicon&r=PG", "display_name": "Erric", "link": "https://stackoverflow.com/users/762522/erric"}, "edited": false, "score": 0, "creation_date": 1528320504, "post_id": 50728937, "comment_id": 88467496, "body": "I saw that you removed the <code>unless</code> clause in the edit, although it doesn&#39;t affect the output, wouldn&#39;t unnecessarily buffer unused lines?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 684, "user_id": 762522, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fd981b39a77cf8a7dc8c2dc5c25c126b?s=128&d=identicon&r=PG", "display_name": "Erric", "link": "https://stackoverflow.com/users/762522/erric"}, "edited": false, "score": 0, "creation_date": 1528321304, "post_id": 50728937, "comment_id": 88467771, "body": "@Erric: You&#39;re correct - I figured that the code being more simple would help in making it easier to understand, at the expense of some extra buffering. But since you requested &quot;as fast as possible&quot;, I&#39;ve rolled back that edit."}, {"owner": {"reputation": 684, "user_id": 762522, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fd981b39a77cf8a7dc8c2dc5c25c126b?s=128&d=identicon&r=PG", "display_name": "Erric", "link": "https://stackoverflow.com/users/762522/erric"}, "edited": false, "score": 0, "creation_date": 1528321673, "post_id": 50728937, "comment_id": 88467902, "body": "Could you explain <code>$x||=@b=$_;</code> in the one liner? I am interested in the one liner since I need to run this on a remote server but I am not that familiar with perl shorthands. Also marking this as the answer as I don&#39;t see a faster way, and a more elegant one liner :)"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 684, "user_id": 762522, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fd981b39a77cf8a7dc8c2dc5c25c126b?s=128&d=identicon&r=PG", "display_name": "Erric", "link": "https://stackoverflow.com/users/762522/erric"}, "edited": false, "score": 1, "creation_date": 1528321898, "post_id": 50728937, "comment_id": 88467984, "body": "<code>$x||=@b=$_;</code> is the same as <code>$x = $x || (@b = $_);</code>. The first time this is evaluated, <code>$x</code> is false, so <code>@b = $_</code> is executed, and also <code>$x</code> is set to the return value of <code>@b = $_</code>, which is <code>1</code> (because one element is being assigned to the list). So every following time the statement is executed, <code>$x</code> is true, so <code>@b = $_</code> is <i>not</i> executed. <code>$x</code> is the inverse of the <code>$first</code> flag in the longer code, otherwise the two scripts do exactly the same thing."}, {"owner": {"reputation": 684, "user_id": 762522, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fd981b39a77cf8a7dc8c2dc5c25c126b?s=128&d=identicon&r=PG", "display_name": "Erric", "link": "https://stackoverflow.com/users/762522/erric"}, "edited": false, "score": 0, "creation_date": 1528321977, "post_id": 50728937, "comment_id": 88467999, "body": "One word: neat!"}, {"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1528664513, "post_id": 50728937, "comment_id": 88582347, "body": "I &#39;m done here. I don&#39;t understand Perl, that&#39;s why I didn&#39;t upvote your answer earlier. It did help me see, that <code>sed</code> and <code>awk</code> solutions can be outrun with other tools. Thanks."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 2, "last_activity_date": 1528321289, "last_edit_date": 1528321289, "creation_date": 1528316532, "answer_id": 50728937, "question_id": 50728135, "link": "https://stackoverflow.com/questions/50728135/extract-everything-between-first-and-last-occurence-of-the-same-pattern-in-singl/50728937#50728937", "title": "Extract everything between first and last occurence of the same pattern in single iteration", "body": "<p>You can buffer the lines until you see a line that contains <code>CAPTURE</code>, treating the first occurrence of the pattern specially.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/env perl\nuse warnings;\nuse strict;\n\nmy $first=1;\nmy @buf;\nwhile ( my $line = &lt;&gt; ) {\n    push @buf, $line unless $first;\n    if ( $line=~/CAPTURE/ ) {\n        if ($first) {\n            @buf = ($line);\n            $first = 0;\n        }\n        print @buf;\n        @buf = ();\n    }\n}\n</code></pre>\n\n<p>Feed the input into this program via <code>zcat file.gz | perl script.pl</code>.</p>\n\n<p>Which can of course be jammed into a one-liner, if need be...</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>zcat file.gz | perl -ne '$x&amp;&amp;push@b,$_;if(/CAPTURE/){$x||=@b=$_;print@b;@b=()}'\n</code></pre>\n\n<blockquote>\n  <p>Can this be accomplished with a regular expression?</p>\n</blockquote>\n\n<p>You mean in a single pass, in a single regex? If you don't mind reading the entire file into memory, sure... but this is obviously <strong>not</strong> a good idea for large files.</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>zcat file.gz | perl -0777ne '/((^.*CAPTURE.*$)(?s:.*)(?2)(?:\\z|\\n))/m and print $1'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 202, "user_id": 1606164, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6306a99514c0a21ba2e88e58b998505e?s=128&d=identicon&r=PG", "display_name": "Tigran Khachikyan", "link": "https://stackoverflow.com/users/1606164/tigran-khachikyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1528318825, "last_edit_date": 1528318825, "creation_date": 1528317149, "answer_id": 50729110, "question_id": 50728135, "link": "https://stackoverflow.com/questions/50728135/extract-everything-between-first-and-last-occurence-of-the-same-pattern-in-singl/50729110#50729110", "title": "Extract everything between first and last occurence of the same pattern in single iteration", "body": "<p>Here is one more example with regex (the cons is that if files are large, it will consume a large memory)</p>\n\n<pre><code>#!/usr/bin/perl\n{\n  local $/ = undef;\n  open FILE, $ARGV[0] or die \"Couldn't open file: $!\";\n  binmode FILE;\n  $string = &lt;FILE&gt;;\n  close FILE;\n}\n\nprint $1 if $string =~ /([^\\n]+(CAPTURE).*\\2.*?)\\n/s;\n</code></pre>\n\n<p>Or with one liner:</p>\n\n<pre><code>cat file.tmp | perl -ne '$/=undef; print $1 if &lt;STDIN&gt; =~ /([^\\n]+(CAPTURE).*\\2.*?)\\n/s'\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>100:CAPTURE\n...........\n150:CAPTURE\n...........\n200:CAPTURE\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 684, "user_id": 762522, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fd981b39a77cf8a7dc8c2dc5c25c126b?s=128&d=identicon&r=PG", "display_name": "Erric", "link": "https://stackoverflow.com/users/762522/erric"}, "edited": false, "score": 0, "creation_date": 1528321005, "post_id": 50729789, "comment_id": 88467661, "body": "Nice, any idea how it compares with  haukex&#39;s solution? I am guessing it might take more time and memory since ed has to keep everything buffered till the end and make two passes? Also ed somehow prints &quot;newline appended&quot; before the output"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 684, "user_id": 762522, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fd981b39a77cf8a7dc8c2dc5c25c126b?s=128&d=identicon&r=PG", "display_name": "Erric", "link": "https://stackoverflow.com/users/762522/erric"}, "edited": false, "score": 0, "creation_date": 1528324835, "post_id": 50729789, "comment_id": 88468865, "body": "@Erric When in doubt, benchmark! <a href=\"https://gist.github.com/haukex/36347160abb45e117182f0305a8c27ae\" rel=\"nofollow noreferrer\">Here&#39;s a start</a>. At least in this benchmark, if you have the memory to spare, reading the whole file into memory like in my second solution blows all of the other solutions out of the water. Otherwise, it appears that both of Walter&#39;s solutions are fastest! But make sure to repeat the benchmark with realistic data."}, {"owner": {"reputation": 684, "user_id": 762522, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fd981b39a77cf8a7dc8c2dc5c25c126b?s=128&d=identicon&r=PG", "display_name": "Erric", "link": "https://stackoverflow.com/users/762522/erric"}, "edited": false, "score": 0, "creation_date": 1528326852, "post_id": 50729789, "comment_id": 88469446, "body": "Cool, but I don&#39;t think that glenn&#39;s solution would outperform yours in most practical cases where the span of matching lines might be large and placed towards the middle of the file. At the same time, I am really surprised by walter&#39;s results: If <code>ed</code> buffered contents into the memory, I&#39;d expect it to match the perl regex performance, but instead it matches the performance of his own streaming <code>sed</code> based solution (which btw I&#39;d really like to know why runs the fastest)"}, {"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1528352051, "post_id": 50729789, "comment_id": 88475902, "body": "I added an <code>awk</code> solution, almost as clear as Glenn&#39;s solution and I think with about the same performance as the <code>sed</code>. I am surprised by <code>ed</code>&#39;s speed too."}, {"owner": {"reputation": 684, "user_id": 762522, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fd981b39a77cf8a7dc8c2dc5c25c126b?s=128&d=identicon&r=PG", "display_name": "Erric", "link": "https://stackoverflow.com/users/762522/erric"}, "edited": false, "score": 0, "creation_date": 1528368995, "post_id": 50729789, "comment_id": 88486344, "body": "I am surprised by <code>sed</code>&#39;s speed rather than <code>ed</code> since ed (probably) has the liberty of random access within the memory"}, {"owner": {"reputation": 684, "user_id": 762522, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fd981b39a77cf8a7dc8c2dc5c25c126b?s=128&d=identicon&r=PG", "display_name": "Erric", "link": "https://stackoverflow.com/users/762522/erric"}, "edited": false, "score": 0, "creation_date": 1528371638, "post_id": 50729789, "comment_id": 88487967, "body": "<code>awk</code> solution seems to be worse than all other tests done by haukex"}, {"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1528371998, "post_id": 50729789, "comment_id": 88488200, "body": "All solutions must read all input lines, compare each line with <code>&#47;CAPTURE&#47;</code> and display the results. Some differences are: Memory usage (everything in memory?). Do you need to scan the input again (Glenn scans 2 times with <code>sed</code> and 2 times with <code>tac</code>, Karafka&#39;s awk reads and compares each line twice). How do they remember strings already seen (hold area seems to be fast). So the <code>sed</code> command makes very little additional steps, and I am really surpised by other results: The race-monster of @haukex and my slow <code>awk</code>(doing nothing special, not a caching issue?)."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 684, "user_id": 762522, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fd981b39a77cf8a7dc8c2dc5c25c126b?s=128&d=identicon&r=PG", "display_name": "Erric", "link": "https://stackoverflow.com/users/762522/erric"}, "edited": false, "score": 0, "creation_date": 1528447259, "post_id": 50729789, "comment_id": 88521020, "body": "@Erric If you replace <code>time</code> (bash builtin) with <code>&#47;usr&#47;bin&#47;time</code>, you should get stats on memory usage as well. The reason the <code>ed</code> solution is so relatively fast appears to be that it reads the entire file into memory - the <code>sed</code> solution doesn&#39;t, though, so although I haven&#39;t tested all the others yet, that one looks pretty good at the moment."}, {"owner": {"reputation": 684, "user_id": 762522, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fd981b39a77cf8a7dc8c2dc5c25c126b?s=128&d=identicon&r=PG", "display_name": "Erric", "link": "https://stackoverflow.com/users/762522/erric"}, "edited": false, "score": 0, "creation_date": 1528554372, "post_id": 50729789, "comment_id": 88557426, "body": "<code>ed</code> solution doesn&#39;t seem to be that fast considering that perl is blowing the competition out of the water when provided the liberty of loading the file to memory"}], "tags": [], "owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "is_accepted": false, "score": 2, "last_activity_date": 1528351816, "last_edit_date": 1528351816, "creation_date": 1528320007, "answer_id": 50729789, "question_id": 50728135, "link": "https://stackoverflow.com/questions/50728135/extract-everything-between-first-and-last-occurence-of-the-same-pattern-in-singl/50729789#50729789", "title": "Extract everything between first and last occurence of the same pattern in single iteration", "body": "<p>Find the first CAPTURE and look back for the last one.</p>\n\n<pre><code>echo \"/CAPTURE/,?CAPTURE? p\" | ed -s &lt;(gunzip -c inputfile.gz)\n</code></pre>\n\n<p>EDIT: Answer to comment and second (better?) solution.</p>\n\n<p>When your input doesn't end with a newline, <code>ed</code> will complain, as shown by these tests.</p>\n\n<pre><code># With newline\nprintf \"1,$ p\\n\" | ed -s &lt;(printf \"%s\\n\" test)\n# Without newline\nprintf \"1,$ p\\n\" | ed -s &lt;(printf \"%s\" test)\n# message removed\nprintf \"1,$ p\\n\" | ed -s &lt;(printf \"%s\" test) 2&gt; /dev/null\n</code></pre>\n\n<p>I do not know the memory complications this will give for a large file, but you would prefer a streaming solution.<br>\nYou can use <code>sed</code> for the next approach.\nKeep reading lines until you find the first match. During this time only remember the last line read (by putting it in a Hold area).<br>\nNow change your tactics.<br>\nAppend each line to the Hold area. You do not know when to flush until the next match.<br>\nWhen you have the next match, recall the Hold area and print this.<br>\nI needed some tweeking for preventing the second match to be printed twice. I solved this by reading the next line and replacing the HOLD area with that line.<br>\nThe total solution is</p>\n\n<pre><code>gunzip -c inputfile.gz | sed -n '1,/CAPTURE/{h;n};H;/CAPTURE/{x;p;n;h};'\n</code></pre>\n\n<p>When you don't like the <code>sed</code> holding space, you can implemnt the same approach with <code>awk</code>:</p>\n\n<pre><code>gunzip -c inputfile.gz | \n   awk '/CAPTURE/{capt=1} capt==1{a[i++]=$0} /CAPTURE/{for(j=0;j&lt;i;j++) print a[j]; i=0}'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 684, "user_id": 762522, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fd981b39a77cf8a7dc8c2dc5c25c126b?s=128&d=identicon&r=PG", "display_name": "Erric", "link": "https://stackoverflow.com/users/762522/erric"}, "edited": false, "score": 0, "creation_date": 1528349168, "post_id": 50731605, "comment_id": 88474741, "body": "Solution runs too slow in haukex&#39;s benchmark (217.11s user 0.33s system 99% cpu 3:37.99 total, and still did not complete)"}, {"owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "reply_to_user": {"reputation": 684, "user_id": 762522, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fd981b39a77cf8a7dc8c2dc5c25c126b?s=128&d=identicon&r=PG", "display_name": "Erric", "link": "https://stackoverflow.com/users/762522/erric"}, "edited": false, "score": 0, "creation_date": 1528368103, "post_id": 50731605, "comment_id": 88485809, "body": "@Erric I&#39;d be interested to see the source file so I could tailor another solution."}], "tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1528388653, "last_edit_date": 1528388653, "creation_date": 1528333426, "answer_id": 50731605, "question_id": 50728135, "link": "https://stackoverflow.com/questions/50728135/extract-everything-between-first-and-last-occurence-of-the-same-pattern-in-singl/50731605#50731605", "title": "Extract everything between first and last occurence of the same pattern in single iteration", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed '/CAPTURE/!d;:a;n;:b;//ba;$d;N;bb' file\n</code></pre>\n\n<p>Delete all lines until the first containing the required string. Print the line containing the required string. Replace the pattern space with the next line. If this line contains the required string, repeat the last two previous sentences. If it is the last line of the file, delete the pattern space. Otherwise, append the next line and repeat the last three previous sentences.</p>\n\n<p>Having studied the test files used for haukex's benchmark, it would seem that sed is not the tool to extract this file. Using a mixture of csplit, grep and sed presents a reasonably fast solution as follows:</p>\n\n<pre><code>lines=$(grep -nTA1 --no-group-separator CAPTURE oldFile | \n        sed '1s/\\t.*//;1h;$!d;s/\\t.*//;H;x;s/\\n/ /')\ncsplit -s oldFile $lines &amp;&amp; rm xx0{0,2} &amp;&amp; mv xx01 newFile\n</code></pre>\n\n<p>Split the original file into three files. A file preceding the first occurrence of <code>CAPTURE</code>, a file from the first <code>CAPTURE</code> to the last <code>CAPTURE</code> and a file containing of the remainder. The first and third files are discarded and the second file renamed. </p>\n\n<p><code>csplit</code> can use line numbers to split the original file. <code>grep</code> is extremely fast at filtering patterns and can return the line numbers of all patterns that match <code>CAPTURE</code> and the following context line. <code>sed</code> can manipulate the results of <code>grep</code> into two line numbers which are supplied to the <code>csplit</code> command.</p>\n\n<p>When run against the test files (as above) I get timings around 10 seconds. </p>\n"}, {"comments": [{"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1528582462, "post_id": 50775740, "comment_id": 88564825, "body": "Do you only want the stacktraces of your EventId (select EventId and all floowing fields that start with whitespace) ?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1528622788, "post_id": 50775740, "comment_id": 88571188, "body": "Certainly, at least if I understood your specs: <code>perl -0777ne &#39;print $&amp; while &#47;^\\[.*EventId.*(?:\\n|\\z)(?:^\\s.*(?:\\n|\\z))*&#47;mg&#39;</code> - I&#39;ve assumed that lines with <code>EventId</code> start with <code>[</code> while the following stack trace lines start with whitespace (<a href=\"https://regex101.com/r/uLP3Ej/1\" rel=\"nofollow noreferrer\">regex101</a>). Not tested for speed. Note this is different enough from the original question that you might want to open a new question."}, {"owner": {"reputation": 684, "user_id": 762522, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fd981b39a77cf8a7dc8c2dc5c25c126b?s=128&d=identicon&r=PG", "display_name": "Erric", "link": "https://stackoverflow.com/users/762522/erric"}, "reply_to_user": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1528627614, "post_id": 50775740, "comment_id": 88572296, "body": "@Walter, No I need all lines corresponding to the EventId, not just stacktrace, stacktraces need to be included too if they are part of the same event."}, {"owner": {"reputation": 684, "user_id": 762522, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fd981b39a77cf8a7dc8c2dc5c25c126b?s=128&d=identicon&r=PG", "display_name": "Erric", "link": "https://stackoverflow.com/users/762522/erric"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1528627792, "post_id": 50775740, "comment_id": 88572335, "body": "@haukex, close enough. Although <code>(AppName)</code> is the only indicator that a next log line has started. Arbitrary lines in between (stacktrace is just one example) may or may not start with whitespace, but I get the idea now and can cook up the regex. @walter Any idea if the sed solution can do the same?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1528628827, "post_id": 50775740, "comment_id": 88572610, "body": "Really, not even <code>[Timestamp]</code> is a safe indicator? And a stack trace line will never contain <code>(AppName)</code> or <code>EventId</code>? Well, you can get fancy with lookaheads: <code>&#47;^.*EventId.*(?:\\n|\\z)(?:^(?!.*AppName).*(?:\\n|\\z))*&#47;gm</code> (<a href=\"https://regex101.com/r/uLP3Ej/2\" rel=\"nofollow noreferrer\">regex101</a>) - again, I think perhaps a new question with some <i>representative</i> sample input might be best."}, {"owner": {"reputation": 684, "user_id": 762522, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fd981b39a77cf8a7dc8c2dc5c25c126b?s=128&d=identicon&r=PG", "display_name": "Erric", "link": "https://stackoverflow.com/users/762522/erric"}, "edited": false, "score": 0, "creation_date": 1528631897, "post_id": 50775740, "comment_id": 88573374, "body": "<code>Timestamp</code> is a variable and the fact that <code>(AppName)</code> with the parenthesis not occurring anywhere is a chance I am willing to take.Your regexp does seem to capture what is required. I was wondering if there&#39;s a fast sed version possible too"}, {"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1528642092, "post_id": 50775740, "comment_id": 88576195, "body": "I would try to have a change in in the log4j properties of the java application, having each (AppName) in a different logfile. No confusion when Appname1 logs that it can not connect to AppName2."}, {"owner": {"reputation": 684, "user_id": 762522, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fd981b39a77cf8a7dc8c2dc5c25c126b?s=128&d=identicon&r=PG", "display_name": "Erric", "link": "https://stackoverflow.com/users/762522/erric"}, "edited": false, "score": 0, "creation_date": 1528643792, "post_id": 50775740, "comment_id": 88576687, "body": "AppName is a constant, so our file would just have (AppName1) throughout. I just use it as a marker to note that it is the next logline"}, {"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1528664269, "post_id": 50775740, "comment_id": 88582288, "body": "When you only have AppName1, I do not see which lines are to be removed. When you want to do something with the relation between lines. <code>sed</code> is the wrong tool. I thought <code>awk</code> was better, but @haukex showed that <code>perl</code> can be a lot faster.   You can open a new question when you need more help."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1528665329, "post_id": 50775740, "comment_id": 88582538, "body": "@Erric Yes, I figured <code>Timestamp</code> was variable. My point was whether the log lines have some well-defined format that is <i>very</i> unlikely to appear as a stack trace or anywhere else in the file, so as to identify the beginning of each record <i>reliably</i>. For example, if as you seem to be saying, the format always matches <code>[Timestamp] (AppName) {EventId}</code>, then you can say: <a href=\"https://regex101.com/r/uLP3Ej/5\" rel=\"nofollow noreferrer\"><code>&#47; (?: ^ \\[\\d+\\] \\s+ \\(AppName\\) \\s+ \\{EventId\\} ) .* (?:\\n|\\z) (?: ^ (?! \\[\\d+\\] \\s+ \\([^)]*\\) \\s+ \\{[^}]*\\} ) .* (?:\\n|\\z) )* &#47;gmx</code></a>"}], "tags": [], "owner": {"reputation": 684, "user_id": 762522, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fd981b39a77cf8a7dc8c2dc5c25c126b?s=128&d=identicon&r=PG", "display_name": "Erric", "link": "https://stackoverflow.com/users/762522/erric"}, "is_accepted": false, "score": 0, "last_activity_date": 1528557447, "creation_date": 1528557447, "answer_id": 50775740, "question_id": 50728135, "link": "https://stackoverflow.com/questions/50728135/extract-everything-between-first-and-last-occurence-of-the-same-pattern-in-singl/50775740#50775740", "title": "Extract everything between first and last occurence of the same pattern in single iteration", "body": "<p>While posting this question, the problem I had at hand was that I had several huge gzip compressed log files generated by a java application.\nThe log lines were of the following format:</p>\n\n<pre><code>[Timestamp] (AppName) {EventId} [INFO]: Log text...\n[Timestamp] (AppName) {EventId} [EXCEPTION]: Log text...\n                    at com.application.class(Class.java:154)\n                    caused by......\n[Timestamp] (AppName) {EventId} [LogLevel]: Log text...\n</code></pre>\n\n<p>Given an <code>EventId</code>, I needed to extract all the lines corresponding to the event from these files. The problem became unsolvable with a trivial grep for <code>EventId</code> just due to the fact that the exception lines could be of arbitrary length and do not contain the <code>EventId</code>.</p>\n\n<p>Unfortunately I forgot to consider the edge case where the last log line for an <code>EventId</code> could be the exception and the answers posted here would not print the stacktrace lines. However it wasn't hard to modify haukex's solution to cover these cases as well:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse warnings;\nuse strict;\n\nmy $first=1;\nmy @buf;\nwhile ( my $line = &lt;&gt; ) {\n    push @buf, $line unless $first;\n    if ( $line=~/EventId/ or ($first==0 and $line!~/\\(AppName\\)/)) {\n        if ($first) {\n            @buf = ($line);\n            $first = 0;\n        }\n        print @buf;\n        @buf = ();\n    }\n    else {\n        $first = 1;\n    }\n}\n</code></pre>\n\n<p>I am still wondering if the faster solutions(mainly walter's sed solution or haukex's in-memory perl solution) could be modified to do the same.</p>\n"}], "owner": {"reputation": 684, "user_id": 762522, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fd981b39a77cf8a7dc8c2dc5c25c126b?s=128&d=identicon&r=PG", "display_name": "Erric", "link": "https://stackoverflow.com/users/762522/erric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 1, "accepted_answer_id": 50728937, "answer_count": 7, "score": 3, "last_activity_date": 1528557447, "creation_date": 1528313252, "last_edit_date": 1528314187, "question_id": 50728135, "link": "https://stackoverflow.com/questions/50728135/extract-everything-between-first-and-last-occurence-of-the-same-pattern-in-singl", "title": "Extract everything between first and last occurence of the same pattern in single iteration", "body": "<p>This question is very much the same as <a href=\"https://stackoverflow.com/questions/19496420/unix-command-to-get-lines-from-in-between-first-and-last-occurence-of-a-word-and\">this</a> except that I am looking to do this as fast as possible, doing only a single pass of the (unfortunately gzip compressed) file. </p>\n\n<p>Given the pattern <code>CAPTURE</code> and input</p>\n\n<pre><code>1:.........\n...........\n100:CAPTURE\n...........\n150:CAPTURE\n...........\n200:CAPTURE\n...........\n1000:......\n</code></pre>\n\n<p>Print:</p>\n\n<pre><code>100:CAPTURE\n...........\n150:CAPTURE\n...........\n200:CAPTURE\n</code></pre>\n\n<p>Can this be accomplished with a regular expression?</p>\n\n<p>I vaguely remember that this kind of grammar cannot be captured by a regular expression but not quite sure as regular expressions these days provide look aheads,etc.</p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1528308652, "post_id": 50726758, "comment_id": 88462047, "body": "This weels like a homework. Similar question was asked yesterday or the day before."}, {"owner": {"reputation": 7, "user_id": 9904816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e96191d1d12dd17112cd14653950110?s=128&d=identicon&r=PG&f=1", "display_name": "AnaPliskova", "link": "https://stackoverflow.com/users/9904816/anapliskova"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1528309044, "post_id": 50726758, "comment_id": 88462244, "body": "@Andrey Can you point me in the right direction then? I am really struggling to get this thing going.Does that question that was asked yesterday has answers to my current query?"}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1528309509, "post_id": 50726758, "comment_id": 88462482, "body": "The answer that was asked yesterday has similar hash. but the task was different: <a href=\"https://stackoverflow.com/questions/50701681/how-to-find-if-the-value-exists-in-hash-without-using-key-in-perl\" title=\"how to find if the value exists in hash without using key in perl\">stackoverflow.com/questions/50701681/&hellip;</a>"}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1528309815, "post_id": 50726758, "comment_id": 88462624, "body": "why do you neeed arr and arr1 if you are comparing arr2 and  %space ?"}, {"owner": {"reputation": 7, "user_id": 9904816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e96191d1d12dd17112cd14653950110?s=128&d=identicon&r=PG&f=1", "display_name": "AnaPliskova", "link": "https://stackoverflow.com/users/9904816/anapliskova"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1528310081, "post_id": 50726758, "comment_id": 88462746, "body": "I was just letting you know the whole part of what  I am trying to do and the method I wanted to do"}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1528310357, "post_id": 50726758, "comment_id": 88462896, "body": "That hash does not compile so this cannot be a working code."}, {"owner": {"reputation": 7, "user_id": 9904816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e96191d1d12dd17112cd14653950110?s=128&d=identicon&r=PG&f=1", "display_name": "AnaPliskova", "link": "https://stackoverflow.com/users/9904816/anapliskova"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1528310615, "post_id": 50726758, "comment_id": 88463029, "body": "@Andrey  Go for it now?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 2, "creation_date": 1528310713, "post_id": 50726758, "comment_id": 88463075, "body": "If this is homework, I can understand why no modules. But no subroutines? That&#39;s just poor software engineering."}, {"owner": {"reputation": 7, "user_id": 9904816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e96191d1d12dd17112cd14653950110?s=128&d=identicon&r=PG&f=1", "display_name": "AnaPliskova", "link": "https://stackoverflow.com/users/9904816/anapliskova"}, "edited": false, "score": 0, "creation_date": 1528310909, "post_id": 50726758, "comment_id": 88463168, "body": "Well,good for me that i don&#39;t have to worry about my coding practices"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1528311144, "post_id": 50726758, "comment_id": 88463276, "body": "@AnaPliskova That&#39;s not a good attitude if you&#39;re learning to program. If you&#39;re just going through the motions... well, it&#39;s your life. Professors often teach bad software engineering. Anyhow, are there any restraints on the problem? Is it guaranteed to only be a two level hash containing only scalars? If not, this is a very big problem."}, {"owner": {"reputation": 7, "user_id": 9904816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e96191d1d12dd17112cd14653950110?s=128&d=identicon&r=PG&f=1", "display_name": "AnaPliskova", "link": "https://stackoverflow.com/users/9904816/anapliskova"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1528311484, "post_id": 50726758, "comment_id": 88463439, "body": "@Schwern I am sorry if i offended you.well,No restraints.I thought this is a three level hash and the format is guaranteed"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1528312123, "post_id": 50726758, "comment_id": 88463727, "body": "@AnaPliskova Apologies, how programming is taught is a pet peeve of mine and not your fault. Back to the problem. I&#39;m not sure I follow what you&#39;re trying to do. Are you trying to check that each pair in <code>@arr2</code> exist in <code>%space</code>? That <code>$space{earth}{planet}</code> and <code>$space{sun}{star}</code> and <code>$space{mars}{planet2}</code> exist? Were you given these data structures? They&#39;re awkward and the problem would be easier if they could be redesigned."}, {"owner": {"reputation": 7, "user_id": 9904816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e96191d1d12dd17112cd14653950110?s=128&d=identicon&r=PG&f=1", "display_name": "AnaPliskova", "link": "https://stackoverflow.com/users/9904816/anapliskova"}, "edited": false, "score": 0, "creation_date": 1528312448, "post_id": 50726758, "comment_id": 88463893, "body": "Yes,just the other way,each pair of %space is present in @arr2. apparently i can&#39;t redesign %space"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 9904816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e96191d1d12dd17112cd14653950110?s=128&d=identicon&r=PG&f=1", "display_name": "AnaPliskova", "link": "https://stackoverflow.com/users/9904816/anapliskova"}, "edited": false, "score": 0, "creation_date": 1528313354, "post_id": 50728082, "comment_id": 88464290, "body": "and there&#39;s a match missing with your %object_types {earth}{planet2}.Assume if your %object_types = (planet =&gt;{&#39;earth&#39;},star =&gt;{&#39;sun&#39;},planet2 =&gt;{&#39;earth&#39;,&#39;mars&#39;}); how would you check now?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 7, "user_id": 9904816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e96191d1d12dd17112cd14653950110?s=128&d=identicon&r=PG&f=1", "display_name": "AnaPliskova", "link": "https://stackoverflow.com/users/9904816/anapliskova"}, "edited": false, "score": 0, "creation_date": 1528313588, "post_id": 50728082, "comment_id": 88464403, "body": "@AnaPliskova Do you mean each type has a list of names? <code>%object_types = (planet =&gt;[&#39;earth&#39;],star =&gt;[&#39;sun&#39;],planet2 =&gt;[&#39;earth&#39;,&#39;mars&#39;]);</code> You&#39;d need an inner loop over the names. I&#39;ll edit that in."}, {"owner": {"reputation": 7, "user_id": 9904816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e96191d1d12dd17112cd14653950110?s=128&d=identicon&r=PG&f=1", "display_name": "AnaPliskova", "link": "https://stackoverflow.com/users/9904816/anapliskova"}, "edited": false, "score": 1, "creation_date": 1528313939, "post_id": 50728082, "comment_id": 88464557, "body": "Yes and very neatly explained.You should apply at my school and i hope to learn more"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 7, "user_id": 9904816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e96191d1d12dd17112cd14653950110?s=128&d=identicon&r=PG&f=1", "display_name": "AnaPliskova", "link": "https://stackoverflow.com/users/9904816/anapliskova"}, "edited": false, "score": 1, "creation_date": 1528314133, "post_id": 50728082, "comment_id": 88464653, "body": "@AnaPliskova I&#39;m flattered, thank you. :) Edit is up."}, {"owner": {"reputation": 4048, "user_id": 2173516, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/P3SKn.png?s=128&g=1", "display_name": "Noel Widmer", "link": "https://stackoverflow.com/users/2173516/noel-widmer"}, "reply_to_user": {"reputation": 7, "user_id": 9904816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e96191d1d12dd17112cd14653950110?s=128&d=identicon&r=PG&f=1", "display_name": "AnaPliskova", "link": "https://stackoverflow.com/users/9904816/anapliskova"}, "edited": false, "score": 0, "creation_date": 1529395988, "post_id": 50728082, "comment_id": 88846377, "body": "@AnaPliskova You really should accept answers if they solved your problem. :-)"}, {"owner": {"reputation": 7, "user_id": 9904816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e96191d1d12dd17112cd14653950110?s=128&d=identicon&r=PG&f=1", "display_name": "AnaPliskova", "link": "https://stackoverflow.com/users/9904816/anapliskova"}, "reply_to_user": {"reputation": 4048, "user_id": 2173516, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/P3SKn.png?s=128&g=1", "display_name": "Noel Widmer", "link": "https://stackoverflow.com/users/2173516/noel-widmer"}, "edited": false, "score": 0, "creation_date": 1529396123, "post_id": 50728082, "comment_id": 88846440, "body": "@NoelWidmer i thought i did,anyway a big thanks to SCHWERN"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 4, "last_activity_date": 1528314400, "last_edit_date": 1528314400, "creation_date": 1528312996, "answer_id": 50728082, "question_id": 50726758, "link": "https://stackoverflow.com/questions/50726758/how-to-compare-two-hashes-of-different-levels-in-perl-without-using-sub-routines/50728082#50728082", "title": "How to compare two hashes of different levels in perl without using sub routines or modules?", "body": "<p>I've done this twice now in Perl. Once for <a href=\"https://github.com/Test-More/test-more/blob/v0.98/lib/Test/More.pm#L989\" rel=\"nofollow noreferrer\">Test::More's is_deeply()</a>  and again for <a href=\"https://github.com/evalEmpire/perl5i/blob/master/lib/perl5i/2/equal.pm\" rel=\"nofollow noreferrer\">perl5i's are_equal()</a>. Doing it right is not simple. Doing it without subroutines is just silly. If you want to see how this is done, look at <code>are_equal()</code>, though it can be done better.</p>\n\n<hr>\n\n<p>But I don't think you actually need to compare two hashes.</p>\n\n<p>What I think is happening is you need to check if the things in the various arrays are present in <code>%space</code>. For example...</p>\n\n<pre><code>my @arr = ('mars','earth','jupiter');\n</code></pre>\n\n<p>That would be true, true, and false.</p>\n\n<pre><code>my @arr1 = ('mercury','mars');\n</code></pre>\n\n<p>False, true.</p>\n\n<pre><code>my @arr2 = ('planet','earth','star','sun','planet2','mars');\n</code></pre>\n\n<p>Assuming these are pairs, they're all true.</p>\n\n<p>I'm going to use better variable names than <code>@arr</code> which describe the contents, not the type of the structure. I'm also going to assume that <code>use strict; use warnings; use v5.10;</code> is present.</p>\n\n<p>The first two are simple, loop through the array and check if there's an entry in <code>%space</code>. And we can do both arrays in one loop.</p>\n\n<pre><code>for my $name in (@names1, @names2) {\n    print \"$name...\";\n    say $space{$name} ? \"Yes\" : \"No\";\n}\n</code></pre>\n\n<p>The third set is a little trickier, and how the data is laid out makes it harder. Putting pairs in a list is awkward, that's what hashes are for. This would make more sense...</p>\n\n<pre><code>my %object_types = (\n    earth =&gt; \"planet\", sun =&gt; \"star\", mars =&gt; \"planet2\"\n);\n</code></pre>\n\n<p>Then it's easy. Check that <code>$space{$name}{$type}</code> is true.</p>\n\n<pre><code>for my $name (keys %object_types) {\n    my $type = $object_types{$name};\n\n    print \"$name / $type...\";\n    say $space{$name}{$type} ? \"Yes\" : \"No\";\n}\n</code></pre>\n\n<p>Or if you're stuck with the array we can iterate through the list in pairs.</p>\n\n<pre><code># $i will be 0, 2, 4, etc...\nfor( my $i = 0; $i &lt; $#stellar_objects; $i+=2 ) {\n    my($type, $name) = ($stellar_objects[$i], $stellar_objects[$i+1]);\n\n    print \"$name / $type...\";\n    say $space{$name}{$type} ? \"Yes\" : \"No\";\n}\n</code></pre>\n\n<p>What if you had a hash of types with multiple names to check instead?</p>\n\n<pre><code>my %object_types = (\n    planet =&gt;['earth'],\n    star =&gt;['sun'],\n    planet2 =&gt;['earth','mars']\n);\n</code></pre>\n\n<p>Same idea, but we need an inner loop over the names array. Good use of plural variable names helps keep thing straight.</p>\n\n<pre><code>for my $type (keys %object_types) {\n    my $names = $object_types{$type};\n\n    for my $name (@$names) {\n        print \"$name / $type...\";\n        say $space{$name}{$type} ? \"Yes\" : \"No\";\n    }\n}\n</code></pre>\n\n<p>Since these are really a set of pairs to search for, combining them into a big hash is a disservice. A better data structure to feed this search might be a list of pairs.</p>\n\n<pre><code>my @searches = (\n    [ planet =&gt; 'earth' ],\n    [ star =&gt; 'sun' ],\n    [ planet2 =&gt; 'earth' ],\n    [ planet2 =&gt; 'mars' ],\n);\n\nfor my $search (@searches) {\n    my($type, $name) = @$search;\n    print \"$name / $type...\";\n    say $space{$name}{$type} ? \"Yes\" : \"No\";\n}\n</code></pre>\n\n<hr>\n\n<p>For the record, <code>%space</code> is poorly designed. The first two levels are fine, name and type, it's the country hashes that are awkward.</p>\n\n<pre><code>'sun'=&gt;{\n    'star' =&gt;{\n        # This part\n        '1' =&gt;'US',\n        '2' =&gt;'UK'\n    }\n},\n</code></pre>\n\n<p>This has none of the advantages of a hash, and all of the disadvantages. The advantage of a hash is it's very fast to look up a single key, but this makes it awkward by making the interesting part a value. If the key is trying to impose an order on the hash, use an array.</p>\n\n<pre><code>sun =&gt; {\n    star =&gt; [ 'US', 'UK' ]\n},\n</code></pre>\n\n<p>Then you can get a list the countries: <code>$countries = $space{$name}{$type}</code></p>\n\n<p>If you want fast key lookup and order doesn't matter, use a hash with the keys being the thing stored, and the value being 1 (just a placeholder for \"true\").</p>\n\n<pre><code>sun =&gt; {\n    star =&gt; { 'US' =&gt; 1, 'UK' =&gt; 1 }\n},\n</code></pre>\n\n<p>This takes advantage of hash key lookup and allows <code>$space{$name}{$type}{$country}</code> to quickly check for existence. The \"values\" (even though they're stored as keys) are also guaranteed to be unique. This formally known as a <a href=\"https://en.wikipedia.org/wiki/Set_(abstract_data_type)\" rel=\"nofollow noreferrer\">set</a>, a collection of unique values.</p>\n\n<p>And you can store further information in the value.</p>\n"}], "owner": {"reputation": 7, "user_id": 9904816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e96191d1d12dd17112cd14653950110?s=128&d=identicon&r=PG&f=1", "display_name": "AnaPliskova", "link": "https://stackoverflow.com/users/9904816/anapliskova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 50728082, "answer_count": 1, "score": 0, "last_activity_date": 1528314400, "creation_date": 1528307947, "last_edit_date": 1528310564, "question_id": 50726758, "link": "https://stackoverflow.com/questions/50726758/how-to-compare-two-hashes-of-different-levels-in-perl-without-using-sub-routines", "title": "How to compare two hashes of different levels in perl without using sub routines or modules?", "body": "<p>my arrays are</p>\n\n<pre><code>my @arr = ('mars','earth','jupiter');\nmy @arr1 = ('mercury','mars');\nmy @arr2 = ('planet','earth','star','sun','planet2','mars');\n%space = ( 'earth'=&gt;{\n              'planet'=&gt; {\n                     '1' =&gt;'US',\n                     '2' =&gt;'UK'\n                    },\n              'planet2'=&gt;{\n                      '1' =&gt;'AFRICA',\n                      '2' =&gt;'AUS'\n                   }\n               },\n        'sun'=&gt;{\n               'star' =&gt;{\n                       '1' =&gt;'US',\n                       '2' =&gt;'UK'\n                     }\n             },\n        'mars' =&gt;{\n                 'planet2' =&gt;{\n                               '1' =&gt;'US',\n                       '2' =&gt;'UK'\n                     }\n             }\n\n       );\n</code></pre>\n\n<p>now i am comparing the first two arrays in the following manner</p>\n\n<pre><code>foreach (@arr)\n{\n  $arr_hash{$_} =1;\n}\nforeach my $name (keys %space)\n{\n  foreach my $key (keys %{$space{$name}})\n  if ($arr_hash{$name} !=1)\n  {\n    #do something\n  }\n</code></pre>\n\n<p>now how should i compare the third array? I am trying something like this</p>\n\n<pre><code>  else\n  {\n     if($arr2_hash{$key}{$name} !=1)\n     {\n       #do something else\n     }\n</code></pre>\n\n<p>I want to check whether the planet+earth pair(ex. the combination of key1 and key2 should be matched with first and second element in @arr2) is present in %space too?\nany help?</p>\n"}, {"tags": ["python", "python-2.7", "perl", "opendir", "file-pointer"], "comments": [{"owner": {"reputation": 11, "user_id": 9904793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d713de17ff13a197995195c4c842fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mike H", "link": "https://stackoverflow.com/users/9904793/mike-h"}, "edited": false, "score": 0, "creation_date": 1528306881, "post_id": 50726370, "comment_id": 88461124, "body": "Tag didn&#39;t go through, this is for python 2.7"}, {"owner": {"reputation": 11, "user_id": 9904793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d713de17ff13a197995195c4c842fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mike H", "link": "https://stackoverflow.com/users/9904793/mike-h"}, "edited": false, "score": 0, "creation_date": 1528398670, "post_id": 50726370, "comment_id": 88504669, "body": "No answers? That&#39;s disappointing :("}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 4, "creation_date": 1528399328, "post_id": 50726370, "comment_id": 88504964, "body": "Is your real question <a href=\"https://stackoverflow.com/questions/3207219/how-do-i-list-all-files-of-a-directory\">How do I list all files of a directory?</a> If not, please clarify."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1528404109, "post_id": 50726370, "comment_id": 88507387, "body": "How are you going to use this handle?"}], "answers": [{"tags": [], "owner": {"reputation": 8790, "user_id": 627042, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/803e178f33b9d1244688d2ab458db4d0?s=128&d=identicon&r=PG", "display_name": "Erik Aronesty", "link": "https://stackoverflow.com/users/627042/erik-aronesty"}, "is_accepted": false, "score": 1, "last_activity_date": 1590674223, "last_edit_date": 1590674223, "creation_date": 1590673777, "answer_id": 62066364, "question_id": 50726370, "link": "https://stackoverflow.com/questions/50726370/python-equivalent-of-perls-opendir/62066364#62066364", "title": "python equivalent of perl&#39;s &quot;opendir&quot;", "body": "<p>The <code>scandir</code> function opens a handle and allows you to walk through each file iteratively.   This is useful for the one of the same reasons as <code>opendir</code>:  it's far more efficient when there could be a large number of files:</p>\n\n<p><a href=\"https://docs.python.org/3/library/os.html#os.scandir\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/os.html#os.scandir</a></p>\n\n<p>The other use of <code>opendir</code> is the ability to retain a reference to the inode, rather than the path.</p>\n\n<p>The generator returned by scandir can be passed around, like CWD, and it will retain the \"inode-like\" functionality of CWD.  For example, you can obtain a generator for <code>scandir</code> and then rename the underlying folder, and the generator remains valid.</p>\n\n<p>However it cannot be \"reset back\" to the beginning.  AFAICT this is the only thing perl can do that python cannot.</p>\n"}], "owner": {"reputation": 11, "user_id": 9904793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d713de17ff13a197995195c4c842fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mike H", "link": "https://stackoverflow.com/users/9904793/mike-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1590674223, "creation_date": 1528306541, "last_edit_date": 1528398807, "question_id": 50726370, "link": "https://stackoverflow.com/questions/50726370/python-equivalent-of-perls-opendir", "title": "python equivalent of perl&#39;s &quot;opendir&quot;", "body": "<p>What I am essentially looking for is a way to return a handle to a directory in python, a bit like how perl can do something like this...</p>\n\n<pre><code>opendir CWD .\n</code></pre>\n\n<p>see: <a href=\"http://perldoc.perl.org/5.8.9/functions/opendir.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/5.8.9/functions/opendir.html</a></p>\n\n<p>CWD can then be used as a handle for pointing to the directory like <code>*CWD</code> in file operations.</p>\n\n<p>The closest I've come across in python is open() but that doesn't return file descriptors/pointers and doesn't work with directories.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 11, "user_id": 9904445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/348156731654d2042714ccc3d0769df4?s=128&d=identicon&r=PG&f=1", "display_name": "Thorne Kontos", "link": "https://stackoverflow.com/users/9904445/thorne-kontos"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1528303390, "post_id": 50725223, "comment_id": 88459226, "body": "Figured it out partially... } elsif($line =~ m/Site 1: W(\\d+),(\\d+)/) {  will suck out the 0,0 from Site 1: W0,0      However, it does not match negative numbers... so I&#39;m still looking"}, {"owner": {"reputation": 11, "user_id": 9904445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/348156731654d2042714ccc3d0769df4?s=128&d=identicon&r=PG&f=1", "display_name": "Thorne Kontos", "link": "https://stackoverflow.com/users/9904445/thorne-kontos"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1528303576, "post_id": 50725223, "comment_id": 88459321, "body": "Site 1: W-1,-1    My above elsif statement only extracts 0 and positive numbers. I need negative numbers extracted as well."}, {"owner": {"reputation": 11, "user_id": 9904445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/348156731654d2042714ccc3d0769df4?s=128&d=identicon&r=PG&f=1", "display_name": "Thorne Kontos", "link": "https://stackoverflow.com/users/9904445/thorne-kontos"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1528304505, "post_id": 50725223, "comment_id": 88459821, "body": "Okay, figured this out after some additional web searching."}, {"owner": {"reputation": 11, "user_id": 9904445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/348156731654d2042714ccc3d0769df4?s=128&d=identicon&r=PG&f=1", "display_name": "Thorne Kontos", "link": "https://stackoverflow.com/users/9904445/thorne-kontos"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 1, "creation_date": 1528304526, "post_id": 50725223, "comment_id": 88459829, "body": "The expression I needed to match is as follows:                                 } elsif($line =~ m/Site 1: W(-?\\d+),(-?\\d+)/) { \t$diex = $1; \t$diey = $2;"}], "owner": {"reputation": 11, "user_id": 9904445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/348156731654d2042714ccc3d0769df4?s=128&d=identicon&r=PG&f=1", "display_name": "Thorne Kontos", "link": "https://stackoverflow.com/users/9904445/thorne-kontos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528302657, "creation_date": 1528302327, "last_edit_date": 1528302657, "question_id": 50725223, "link": "https://stackoverflow.com/questions/50725223/perl-string-matching-and-data-extraction", "title": "Perl string matching and data extraction", "body": "<p>I am working on a data extraction program but I can't seem to get this one portion of the data log to work when it comes to trying to determine the die position on the wafer.</p>\n\n<pre><code>    &amp;write_device_results($sbin, $hbin, $diex, $diey, $site, $time, @testdata);\n} elsif($line =~ m/\"Site 1: W\"(\\d+)(\\d+)/) { # &lt;---- THIS IS NOT WORKING\n    $diex = $1;\n    $diey = $2;\n} elsif($line =~ m/Site (\\d+) has \\w+. Binned to bin (\\d+)\\((\\d+)\\)/) { &lt;- THIS WORKS\n    $site = $1;\n    $sbin = $2;\n    $hbin = $3;\n</code></pre>\n\n<p>The line I am trying to extract the data from is this:</p>\n\n<blockquote>\n  <p>Site 1: W0,0 &lt;--- The first 0 is the $diex position, the second is the $diey position.</p>\n</blockquote>\n\n<p>This line I am able to extract the data from:</p>\n\n<blockquote>\n  <p>Site 1 has FAILED. Binned to bin 24(23)</p>\n</blockquote>\n\n<p>Any thoughts on how I extract the 0,0 data from the above would be great.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1528298961, "post_id": 50724172, "comment_id": 88456696, "body": "Go on. Give it a try. It&#39;s not as hard as you might think. But I have a suspicion this might be an <code>XY problem</code> in that you might be tripping over on domains that are <code>company.com</code> vs. <code>company.co.uk</code>"}, {"owner": {"reputation": 11, "user_id": 9904223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90af15a12026e5da84b4af5564511f39?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny94", "link": "https://stackoverflow.com/users/9904223/johnny94"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1528299054, "post_id": 50724172, "comment_id": 88456759, "body": "I tried it like that: $String =~ s/^.*\\.(\\S+)$/$1/; But it returns only the last part..."}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1528299211, "post_id": 50724172, "comment_id": 88456860, "body": "Try $String =~ s/^.*?\\.(\\S+)$/$1/;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1528299212, "post_id": 50724172, "comment_id": 88456861, "body": "That&#39;s because your <code>.*</code> is greedy."}, {"owner": {"reputation": 11, "user_id": 9904223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90af15a12026e5da84b4af5564511f39?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny94", "link": "https://stackoverflow.com/users/9904223/johnny94"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1528299420, "post_id": 50724172, "comment_id": 88457007, "body": "Thanks @Andrey. That&#39;s it..."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1528299408, "post_id": 50724317, "comment_id": 88456998, "body": "There&#39;s no reason for the capture. You can get rid of it to make it simpler."}], "tags": [], "owner": {"reputation": 4233, "user_id": 1143387, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0b9a9c460593d77b3561075ef1889150?s=128&d=identicon&r=PG", "display_name": "sniperd", "link": "https://stackoverflow.com/users/1143387/sniperd"}, "is_accepted": false, "score": 0, "last_activity_date": 1528299632, "last_edit_date": 1528299632, "creation_date": 1528299319, "answer_id": 50724317, "question_id": 50724172, "link": "https://stackoverflow.com/questions/50724172/perl-regex-remove-first-part-of-dot-separated-string/50724317#50724317", "title": "Perl regex - remove first part of dot-separated string", "body": "<p>This should do the trick:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @domains = (\"test.domain.com\", \"abc.sub.example.com\");\n\nforeach my $value (@domains) {\n    $value =~ s/[^.]+.(.*)/$1/;\n    print $value . \"\\n\";\n    }\n</code></pre>\n\n<p>I like using a negative character class [^.]+ (not dot) vs doing a .<em>?   Using .</em>? seems to get me in trouble from time to time, when the character class is doing what is really being asked, up to the first non dot.</p>\n\n<p>Output:</p>\n\n<pre><code>domain.com\nsub.example.com\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 1, "last_activity_date": 1528301640, "creation_date": 1528301640, "answer_id": 50725024, "question_id": 50724172, "link": "https://stackoverflow.com/questions/50724172/perl-regex-remove-first-part-of-dot-separated-string/50725024#50725024", "title": "Perl regex - remove first part of dot-separated string", "body": "<p>The easiest way is to use a substitution like this:</p>\n\n<pre><code>$str =~ s/^[^.]*\\.//;\n</code></pre>\n\n<p>The regex means:</p>\n\n<ul>\n<li><code>^</code> - beginning of string</li>\n<li><code>[^.]*</code> - 0 or more characters that are not <code>.</code></li>\n<li><code>\\.</code> - a literal dot</li>\n</ul>\n\n<p>There's no need to capture the rest of the string just to replace it back in.</p>\n\n<hr>\n\n<p>This code assumes that if there are no dots in the string, you want to leave it unchanged.</p>\n\n<p>However, if you want <code>\"foo\"</code> to turn into <code>\"\"</code>, you just need to make the <code>\\.</code> optional:</p>\n\n<pre><code>$str =~ s/^[^.]*\\.?//;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1528301843, "post_id": 50725031, "comment_id": 88458423, "body": "@melpomene True, but...? There aren&#39;t any in the example input."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1528301911, "post_id": 50725031, "comment_id": 88458456, "body": "Well, they&#39;re valid in domain names. Try <a href=\"https://stackoverflow.com./\" rel=\"nofollow noreferrer\">https://stackoverflow.com./</a>."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 1, "last_activity_date": 1528301653, "creation_date": 1528301653, "answer_id": 50725031, "question_id": 50724172, "link": "https://stackoverflow.com/questions/50724172/perl-regex-remove-first-part-of-dot-separated-string/50725031#50725031", "title": "Perl regex - remove first part of dot-separated string", "body": "<p>A non-regex* solution might be more obvious:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nmy @tests = (\n    'test.domain.com',\n    'sub.domain.example.com',\n    'bar.foo.bar.hoster.net',\n);\n\nfor my $t (@tests) {\n    (undef, my @parts) = split(/\\./, $t);\n    say join('.', @parts);\n}\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>for my $t (@tests) {\n    my $i;\n    say join('.', grep { ++$i &gt; 1 } split(/\\./, $t));\n}\n</code></pre>\n\n<p>* Well, <em>mostly</em> non-regex, anyway. The first argument to <code>split</code> is a pattern, but we're just matching a literal dot.</p>\n"}], "owner": {"reputation": 11, "user_id": 9904223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90af15a12026e5da84b4af5564511f39?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny94", "link": "https://stackoverflow.com/users/9904223/johnny94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 562, "favorite_count": 0, "accepted_answer_id": 50725024, "answer_count": 3, "score": 0, "last_activity_date": 1545767120, "creation_date": 1528298899, "last_edit_date": 1528314795, "question_id": 50724172, "link": "https://stackoverflow.com/questions/50724172/perl-regex-remove-first-part-of-dot-separated-string", "title": "Perl regex - remove first part of dot-separated string", "body": "<p>I have to remove the first part of a dot-separated string. Such as:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>test.domain.com          --&gt; domain.com\nsub.domain.example.com   --&gt; domain.example.com\nbar.foo.bar.hoster.net   --&gt; foo.bar.hoster.net\n</code></pre>\n\n<p>and so on...</p>\n\n<p>How to do this in perl?</p>\n"}, {"tags": ["arrays", "perl", "sorting", "hash"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1528291878, "post_id": 50721645, "comment_id": 88451806, "body": "You can&#39;t use same keys, it will overwrite. You can go with hash of array"}, {"owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1528292120, "post_id": 50721645, "comment_id": 88451980, "body": "@mkHun Yeah,I am trying to use {1}{apple} as single key and 1 as value"}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1528292787, "creation_date": 1528292787, "answer_id": 50722101, "question_id": 50721645, "link": "https://stackoverflow.com/questions/50721645/how-to-sort-an-hash-and-assign-a-variable-to-the-keypair-from-an-array-in-perl/50722101#50722101", "title": "How to sort an hash and assign a variable to the keypair from an array in perl?", "body": "<p>You need to iterate your array and take two values out per iteration. One way to do this is with a while loop. This will consume the array, so if you want to keep it you might want to make a copy.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Printer;\n\nmy @arr = (\n    '1', 'apple', '2', 'orange', '1', 'orange',\n    '3', 'berry', '2', 'berry',  '1', 'berry',\n);\nmy %hash;\nmy $var = 1;\n\nwhile ( my $first_key = shift @arr ) {\n    my $second_key = shift @arr;\n    $hash{$first_key}-&gt;{$second_key} = $var;\n}\n\np %hash;\n</code></pre>\n\n<p>This outputs</p>\n\n<pre><code>{\n    1   {\n        apple    1,\n        berry    1,\n        orange   1\n    },\n    2   {\n        berry    1,\n        orange   1\n    },\n    3   {\n        berry   1\n    }\n}\n</code></pre>\n\n<p>An alternative is to use a C-style <code>for</code> loop. This does not change the array.</p>\n\n<pre><code>for (my $i = 0; $i &lt;= $#arr; $i+=2) {\n    $hash{ $arr[$i] }-&gt;{ $arr[$i + 1] } = $var;\n}\n</code></pre>\n\n<p>Or you could use <a href=\"https://metacpan.org/pod/List::Util#pairs\" rel=\"nofollow noreferrer\">List::Util's <code>pairs</code> function</a> to get two out at the same time.</p>\n\n<pre><code>use List::Util 'pairs';\n\nforeach my $pair ( pairs @arr ) {\n   my ( $first_key, $second_key ) = @$pair;\n   $hash{$first_key}-&gt;{$second_key} = $var;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1528293868, "post_id": 50722178, "comment_id": 88453180, "body": "Well,the actual problem is i am comparing two hashes.i.e i have to find out the unique &quot;pairs&quot; between them and i had a problem with this duplicate key-pairs.for ex. i needed to find out that if {1}{apple} pair existed in another hash"}, {"owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1528293933, "post_id": 50722178, "comment_id": 88453225, "body": "So,i was just trying to pair up this hash and assign it to 1 and pass the other hash pair onto this"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1528294073, "post_id": 50722178, "comment_id": 88453321, "body": "@Sherlock.H: Right. As I said, you&#39;ve picked the wrong data structure. This would be a lot easier with a one-level hash with keys <code>1 apple</code>,  <code>2 orange</code>,  <code>1 orange</code>,  <code>3 berry</code>,  <code>2 berry</code>,  <code>1 berry</code>."}, {"owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1528294290, "post_id": 50722178, "comment_id": 88453470, "body": "I am tempted to ask &quot;what do you mean by that&quot; however I am holding back because you might yell at me again for not doing my research"}, {"owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1528294536, "post_id": 50722178, "comment_id": 88453636, "body": "any idea how you would get that one level hash keys?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1528295448, "post_id": 50722178, "comment_id": 88454272, "body": "I&#39;m not yelling, I&#39;m advising. I&#39;ve done it rather forcefully as you should be aware of these things by now. Have you read <a href=\"http://stackoverflow.com/tour\"><i>&quot;The Tour&quot;</i></a> and <a href=\"http://stackoverflow.com/help/how-to-ask\"><i>&quot;How do I ask a good question?&quot;</i></a>? I think you should. In the mean time, I think you should put this into practice and try to figure out how to create a hash key of <code>&#39;1 apple&#39;</code> etc. It&#39;s not at all hard."}, {"owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1528296494, "post_id": 50722178, "comment_id": 88454998, "body": "Well,thank you,i have read it now.however i am unable to compare,i did create a &#39;1apple&#39; as hash key though"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1528296802, "post_id": 50722178, "comment_id": 88455216, "body": "@Sherlock.H: You just need a separator to differentiate the first part of the keys from the second. I&#39;ve used a space, which is inserted by default when an array slice is stringified."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1528296144, "last_edit_date": 1528296144, "creation_date": 1528293058, "answer_id": 50722178, "question_id": 50721645, "link": "https://stackoverflow.com/questions/50721645/how-to-sort-an-hash-and-assign-a-variable-to-the-keypair-from-an-array-in-perl/50722178#50722178", "title": "How to sort an hash and assign a variable to the keypair from an array in perl?", "body": "<p></p>\n\n<p>It's normally expected that you at least spend a few hours <em>trying</em> to write a solution yourself. We will happily help you if you've made a decent attempt of your own but have run out of ideas, but it doesn't go down well if you appear to have dumped your problem on us and are waiting for an answer to pop up while you drink a mug of coffee. You've been <a href=\"https://stackoverflow.com/questions/49533073/how-to-print-the-variables-of-an-array-as-checkbox-names-in-a-cgi-form#comment86077640_49533073\">told about this before</a>, and only one of your post has a net positive vote. You need to work on that.</p>\n\n<p>Are you certain that you really want a hash of hashes? This is very reminiscent of your previous question <a href=\"https://stackoverflow.com/questions/50701681/how-to-find-if-the-value-exists-in-hash-without-using-key-in-perl\">How to find if the value exists in hash without using key in perl?</a> where we pretty much established that it was the wrong choice.</p>\n\n<p>The only non-obvious part is extracting the values from the array in pairs, I and I have used C-style <code>for</code> loop to achieve this.</p>\n\n<p>I have used <code>Data::Dumper</code> only to show the resulting hash of hashes.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nmy @arr = qw/ 1 apple 2 orange 1 orange 3 berry 2 berry 1 berry /;\n\nmy %hash;\n\nfor ( my $i = 0; $i &lt; $#arr; $i += 2 ) {\n    $hash{$arr[$i]}{$arr[$i+1]} = 1;\n}\n\nuse Data::Dumper;\n\nprint Dumper \\%hash;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>$VAR1 = {\n          '2' =&gt; {\n                   'berry' =&gt; 1,\n                   'orange' =&gt; 1\n                 },\n          '3' =&gt; {\n                   'berry' =&gt; 1\n                 },\n          '1' =&gt; {\n                   'berry' =&gt; 1,\n                   'orange' =&gt; 1,\n                   'apple' =&gt; 1\n                 }\n        };\n</code></pre>\n\n<h3>Update</h3>\n\n<p>Here's an example of generating the keys as I described in the comments. It's almost identical to the solution above, but the resulting hash contents are different.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nmy @arr = qw/ 1 apple 2 orange 1 orange 3 berry 2 berry 1 berry /;\n\nmy %hash;\n\nfor ( my $i = 0; $i &lt; $#arr; $i += 2 ) {\n    $hash{\"@arr[$i,$i+1]\"} = 1;\n}\n\nuse Data::Dumper;\n\nprint Dumper \\%hash;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>$VAR1 = {\n          '2 berry' =&gt; 1,\n          '1 apple' =&gt; 1,\n          '3 berry' =&gt; 1,\n          '1 orange' =&gt; 1,\n          '1 berry' =&gt; 1,\n          '2 orange' =&gt; 1\n        };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1528296626, "post_id": 50722709, "comment_id": 88455086, "body": "Perl will <a href=\"https://perlmaven.com/autovivification\" rel=\"nofollow noreferrer\"><b><i>autovivify</i></b></a> array and hash elements as necessary, so <code>my %tempHash = %{$hash{$key} || {}}; $tempHash{$value} = $var; $hash{$key} = \\%tempHash;</code> is generally written as <code>$hash{$key}{$value} = $var</code>."}, {"owner": {"reputation": 825, "user_id": 5893468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcb7551f9c6af39046f24142ae1c42e1?s=128&d=identicon&r=PG&f=1", "display_name": "pamcevoy", "link": "https://stackoverflow.com/users/5893468/pamcevoy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528298369, "post_id": 50722709, "comment_id": 88456276, "body": "Thanks.  I hadn&#39;t used it multi-levels deep like that. <code>while ($i &lt; $size) {       my $key = $arr[$i++];       my $value = $arr[$i++];       $hash{$key}{$value} = $var;   }   return %hash;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528307891, "post_id": 50722709, "comment_id": 88461672, "body": "It&#39;s best not to put code in comments if you can avoid it. I was forced to because I have no question or answer to use, but you could <a href=\"https://stackoverflow.com/questions/50721645/how-to-sort-an-hash-and-assign-a-variable-to-the-keypair-from-an-array-in-perl/50722709\"><i>edit</i></a> your answer to present it properly."}, {"owner": {"reputation": 825, "user_id": 5893468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcb7551f9c6af39046f24142ae1c42e1?s=128&d=identicon&r=PG&f=1", "display_name": "pamcevoy", "link": "https://stackoverflow.com/users/5893468/pamcevoy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1528327418, "post_id": 50722709, "comment_id": 88469596, "body": "Yeah I didn&#39;t want to pretend I did it that way initially and make your comment look off.  I&#39;ll edit it now."}], "tags": [], "owner": {"reputation": 825, "user_id": 5893468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcb7551f9c6af39046f24142ae1c42e1?s=128&d=identicon&r=PG&f=1", "display_name": "pamcevoy", "link": "https://stackoverflow.com/users/5893468/pamcevoy"}, "is_accepted": false, "score": 0, "last_activity_date": 1528327496, "last_edit_date": 1528327496, "creation_date": 1528294638, "answer_id": 50722709, "question_id": 50721645, "link": "https://stackoverflow.com/questions/50721645/how-to-sort-an-hash-and-assign-a-variable-to-the-keypair-from-an-array-in-perl/50722709#50722709", "title": "How to sort an hash and assign a variable to the keypair from an array in perl?", "body": "<p>Take the values from the array two at a time (key/value), put them into a hash, then assign the variable as the value.</p>\n\n<pre><code>use Data::Dumper;\n\nsub SortAndAssign {\n    my ($args) = @_;\n\n    my @arr = @{$args-&gt;{ARRAY}};\n    my $var = $args-&gt;{VARIABLE};\n\n    my %hash;\n\n    my $i = 0;\n    my $size = scalar(@arr);\n    while ($i &lt; $size) {\n        # alternating key/value pairs (really a hash)\n        my $key = $arr[$i++];   # e.g. 1\n        my $value = $arr[$i++]; # e.g. apple\n        $hash{$key}{$value} = $var; # e.g. hash-&gt;1-&gt;apple = 1\n    }\n\n    return %hash;\n}\n\nsub ShowSortAndAssign {\n    my @arr =('1','apple','2','orange','1','orange','3','berry','2','berry','1','berry');\n    my $var = 1;\n\n    my %hash = SortAndAssign({\n        ARRAY =&gt; \\@arr,\n        VARIABLE =&gt; $var,\n    });\n\n    print Dumper(\\%hash);\n    print \"first apple is \" . $hash{1}{apple};\n}\n\nsub _Main {\n    ShowSortAndAssign();\n}\n\n_Main();\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1528327496, "creation_date": 1528291466, "question_id": 50721645, "link": "https://stackoverflow.com/questions/50721645/how-to-sort-an-hash-and-assign-a-variable-to-the-keypair-from-an-array-in-perl", "title": "How to sort an hash and assign a variable to the keypair from an array in perl?", "body": "<p>I have an array like this</p>\n\n<pre><code>my @arr =('1','apple','2','orange','1','orange','3','berry','2','berry','1','berry');\nmy %hash;\nmy $var =1;\n</code></pre>\n\n<p>Now how can i sort and assign a variable to the pair?\nThe desired output is</p>\n\n<pre><code>$hash{1}{apple} =&gt;1;\n$hash{1}{orange} =&gt;1;\n$hash{1}{berry} =&gt;1;\n$hash{2}{orange} =&gt;1;\n$hash{2}{berry} =&gt;1;\n$hash{3}{berry} =&gt;1;  \n</code></pre>\n"}, {"tags": ["perl", "ssl", "user-agent", "lwp", "ocsp"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1528291280, "post_id": 50721193, "comment_id": 88451347, "body": "Welcome to Stack Overflow. I&#39;ve improved the markdown formatting in your question and removed some <i>fluff</i>. We usually keep things very professional around here and stick to only the information bits. No need to sign your post or say thank you in a question or answer. You&#39;ll be able leave comments soon, where you can express gratitude if you wish."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 2, "creation_date": 1528292829, "post_id": 50721193, "comment_id": 88452488, "body": "<a href=\"https://www.perlmonks.org/?node_id=1215939\" rel=\"nofollow noreferrer\">Crossposted from PerlMonks</a>."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4575354, "user_type": "registered", "profile_image": "https://graph.facebook.com/841743292535328/picture?type=large", "display_name": "Rama Eshel", "link": "https://stackoverflow.com/users/4575354/rama-eshel"}, "edited": false, "score": 0, "creation_date": 1528472913, "post_id": 50754355, "comment_id": 88536049, "body": "Thanks for the quick answer"}, {"owner": {"reputation": 21, "user_id": 4575354, "user_type": "registered", "profile_image": "https://graph.facebook.com/841743292535328/picture?type=large", "display_name": "Rama Eshel", "link": "https://stackoverflow.com/users/4575354/rama-eshel"}, "edited": false, "score": 0, "creation_date": 1528473288, "post_id": 50754355, "comment_id": 88536237, "body": "I thought I&#39;d experiment with letting LWP::UserAgent use an external connection cache, and deposit a verified IO::Socket::SSL connection prior to calling request().  I&#39;ll post the full example here if successful."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 1, "last_activity_date": 1528438088, "creation_date": 1528438088, "answer_id": 50754355, "question_id": 50721193, "link": "https://stackoverflow.com/questions/50721193/ocsp-resolve-blocking-and-lwpuseragent/50754355#50754355", "title": "OCSP resolve_blocking() and LWP::UserAgent", "body": "<p>I think there is (currently, as of <code>IO::Socket::SSL</code> 2.056) no clean way to do is.</p>\n\n<p>But since it is Perl one can do it with some monkey patching. Since the check should best be done immediately after successfully connecting to the server one can use a wrapper around <code>IO::Socket::SSL::connect_SSL</code> to get the SSL socket, do the OCSP checking and let the connect fail if the OCSP check resulted in errors:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse IO::Socket::SSL;\nuse LWP::UserAgent;\n\n{\n    my $old = \\&amp;IO::Socket::SSL::connect_SSL;\n    no warnings 'redefine';\n    *IO::Socket::SSL::connect_SSL = sub {\n        my $sock = $old-&gt;(@_) or return;\n        my $ocsp = $sock-&gt;ocsp_resolver;\n        if (my $errors = $ocsp-&gt;resolve_blocking()) {\n            warn $errors;\n            close($sock);\n            return;\n        }\n        return $sock;\n    }\n}\n\nmy $ua = LWP::UserAgent-&gt;new();\n$ua-&gt;ssl_opts(SSL_ocsp_mode =&gt; SSL_OCSP_FULL_CHAIN|SSL_OCSP_FAIL_HARD|SSL_OCSP_NO_STAPLE);\nmy $resp = $ua-&gt;get('https://revoked.grc.com');\nprint $resp-&gt;decoded_content;\n</code></pre>\n\n<p>Note that this monkey patching is global, i.e. affects all <code>IO::Socket::SSL</code> objects and not only the one used within <code>LWP::UserAgent</code>. So it might have some unintended side effects when using in a more complex program than this example. \nA cleaner design would maybe to have some user defined callback after connect. Maybe I'll add this kind of functionality to <code>IO::Socket::SSL</code>, but for now this hack should work.</p>\n\n<p>Note also that <code>resolve_blocking</code> is not using the <code>LWP::UserAgent</code> object but relies on <code>HTTP::Tiny</code>. Thus any settings specific to <code>LWP::UserAgent</code> like proxies will have no effect. If this is a problem you can do the requests manually and feed it into the OCSP resolver object using <code>$ocsp-&gt;requests</code> to get the requests and <code>$ocsp-&gt;add_response</code> to feed the response into the resolver object.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 4575354, "user_type": "registered", "profile_image": "https://graph.facebook.com/841743292535328/picture?type=large", "display_name": "Rama Eshel", "link": "https://stackoverflow.com/users/4575354/rama-eshel"}, "is_accepted": false, "score": 0, "last_activity_date": 1529418540, "creation_date": 1529418540, "answer_id": 50930880, "question_id": 50721193, "link": "https://stackoverflow.com/questions/50721193/ocsp-resolve-blocking-and-lwpuseragent/50930880#50930880", "title": "OCSP resolve_blocking() and LWP::UserAgent", "body": "<p>Eventually, I solved this by patching <code>IO::Socket::SSL</code>, to support a new <code>SSL_ocsp_check_callback</code> argument.</p>\n\n<p>I evaluate it in <code>connect_SSL()</code>, right after all of the other OCSP attempts.\nHere's the patch I used (over <code>perl-IO-Socket-SSL-2.025-1.noarch</code>)</p>\n\n<pre><code>--- /tmp/SSL.pm 2018-06-13 12:05:17.073787660 +0300\n+++ /usr/local/share/perl5/IO/Socket/SSL.pm 2018-06-14 09:33:40.051022329 +0300\n@@ -631,11 +631,11 @@\n     my $args = @_&gt;1 ? {@_}: $_[0]||{};\n\n     my ($ssl,$ctx);\n+    my $arg_hash = ${*$self}{'_SSL_arguments'};\n     if ( ! ${*$self}{'_SSL_opening'} ) {\n    # start ssl connection\n    $DEBUG&gt;=2 &amp;&amp; DEBUG('ssl handshake not started' );\n    ${*$self}{'_SSL_opening'} = 1;\n-   my $arg_hash = ${*$self}{'_SSL_arguments'};\n\n    my $fileno = ${*$self}{'_SSL_fileno'} = fileno($self);\n    return $self-&gt;_internal_error(\"Socket has no fileno\",9)\n@@ -820,11 +820,22 @@\n        $self-&gt;_internal_error($ocsp_result-&gt;[1],5);\n        return $self-&gt;fatal_ssl_error();\n    }\n+\n     } elsif ( $ctx-&gt;{ocsp_mode} &amp; SSL_OCSP_MUST_STAPLE ) {\n    $self-&gt;_internal_error(\"did not receive the required stapled OCSP response\",5);\n    return $self-&gt;fatal_ssl_error();\n+\n+    } elsif (exists $arg_hash-&gt;{SSL_ocsp_check_callback}) {\n+        $DEBUG&gt;=3 &amp;&amp; DEBUG( \"Checking OCSP with application callback\" );\n+        my $callback = $arg_hash-&gt;{SSL_ocsp_check_callback};\n+        my $errors = &amp;$callback($self);\n+        if ($errors) {\n+            $self-&gt;_internal_error($errors,5);\n+            return $self-&gt;fatal_ssl_error();\n+        }\n     }\n\n+\n     if ( $ctx-&gt;has_session_cache\n    and my $session = Net::SSLeay::get1_session($ssl)) {\n    my $arg_hash = ${*$self}{'_SSL_arguments'};\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4575354, "user_type": "registered", "profile_image": "https://graph.facebook.com/841743292535328/picture?type=large", "display_name": "Rama Eshel", "link": "https://stackoverflow.com/users/4575354/rama-eshel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 50754355, "answer_count": 2, "score": 1, "last_activity_date": 1529418540, "creation_date": 1528290335, "last_edit_date": 1528438478, "question_id": 50721193, "link": "https://stackoverflow.com/questions/50721193/ocsp-resolve-blocking-and-lwpuseragent", "title": "OCSP resolve_blocking() and LWP::UserAgent", "body": "<p>This question is regarding Perl usage of \n<a href=\"https://metacpan.org/pod/IO::Socket::SSL\" rel=\"nofollow noreferrer\"><code>IO::Socket::SSL</code></a>\n/\n<a href=\"https://metacpan.org/pod/Net::SSLeay\" rel=\"nofollow noreferrer\"><code>Net::SSLeay</code></a>\n/\n<a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow noreferrer\"><code>LWP::UserAgent</code></a>.</p>\n\n<p>To check certificate revocation status with OCSP, one needs to explicitly call the <a href=\"https://metacpan.org/pod/distribution/IO-Socket-SSL/lib/IO/Socket/SSL.pod#Basic-SSL-Client\" rel=\"nofollow noreferrer\"><code>ocsp_resolver</code></a> of the socket, e.g. <code>resolve_blocking()</code>.\nThat's the strategy I use when connecting via\n<a href=\"https://metacpan.org/pod/Net::LDAP\" rel=\"nofollow noreferrer\"><code>Net::LDAP</code></a>.</p>\n\n<p>But in <code>LWP::UserAgent</code>, the connection is a private cached attribute of the object.</p>\n\n<p>Can I get the socket reference from within a verify callback, i.e. the second argument of the callback? </p>\n\n<p>If so then</p>\n\n<ul>\n<li><p>How? I didn't seem to find a fitting <code>Net::SSLeay::X509_Store&lt;somthing&gt;</code>call.</p></li>\n<li><p>Can I conduct blocking OCSP at that point?</p></li>\n</ul>\n\n<p>If not, then</p>\n\n<ul>\n<li>How to invoke <code>ocsp_resolver</code>?</li>\n</ul>\n\n<p>I need this to check the certificate status of non-stapling web servers, as well as that of chains certificate (normally not stapled).</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528264336, "post_id": 50712749, "comment_id": 88434910, "body": "The code reads only one line, <code>my $line = &lt;INFILE&gt;;</code>.  It needs a loop, in which reads one line after another, <code>while (my $line = &lt;INFILE&gt;) { ... }</code> The rest seems fine.  But, why not just skip the line if it doesn&#39;t have the third field?  (Is that really a good condition?) Like <code>next if not $fields[2];</code>.  Then, the whole thing needs to be rewritten in modern Perl."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528264568, "post_id": 50712749, "comment_id": 88435003, "body": "Every time through the loop you can store the needed field in an array, and print it all after the loop.  Or, of course, you can print them as you find them on each line.  (The <code>while</code> loop over <code>$fields[2]</code> in the code doesn&#39;t make sense.)"}, {"owner": {"reputation": 67, "user_id": 9783033, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\u5f20\u5251\u6865", "link": "https://stackoverflow.com/users/9783033/%e5%bc%a0%e5%89%91%e6%a1%a5"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528270587, "post_id": 50712749, "comment_id": 88438069, "body": "@zdim Hi zdim, I tried use while at the beginning, but it keeps outputing &quot;en_AU&quot;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528274131, "post_id": 50712749, "comment_id": 88440146, "body": "Posted an answer, but I don&#39;t understand some of the explanation of what you need.  Let me know how it goes"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1546240207, "last_edit_date": 1546240207, "creation_date": 1528273323, "answer_id": 50715540, "question_id": 50712749, "link": "https://stackoverflow.com/questions/50712749/print-specific-infile-area-using-perl/50715540#50715540", "title": "print specific INFILE area using perl", "body": "<p>The biggest missing thing is a loop over lines from the file, in which you then process one line at a time. Comments follow the code.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\nuse Getopt::Long;\n\n#my ($opt, $file) = @ARGV;  # better use a module\nmy ($opt, $file);\nGetoptions( 'a' =&gt; \\$opt, 'file=s' =&gt; \\$file ) or usage();\nusage() if not $file;  # mandatory argument    \n\nopen my $fh, '&lt;', $file  or die \"Can't open $file: $!\";\n\nwhile (my $line = &lt;$fh&gt;) {\n    chomp $line;\n    my @fields = split /,/, $line;\n    next if not $fields[2];\n    if ($opt) {\n        say $fields[2];\n    }   \n}\nclose $fh;\n\nsub usage {\n    say STDERR \"Usage: $0 [-a] --file filename\";\n    exit 1;\n}\n</code></pre>\n\n<p>This prints the desired output. (Is that simple condition on <code>$fields[2]</code> really all you need?)</p>\n\n<p>Comments</p>\n\n<ul>\n<li><p>Always have <code>use warnings;</code> and <code>use strict;</code> at the beginning</p></li>\n<li><p>I do not recommend single-letter variable names.  One forgets what they mean, it makes the code harder to follow, and it's way too easy to make silly mistakes</p></li>\n<li><p>The <code>@ARGV</code> can be assigned to variables in a list. Much better, use <a href=\"http://perldoc.perl.org/Getopt/Long.html\" rel=\"nofollow noreferrer\">Getopt::Long</a> module, which checks invocation and allows for far easier interface changes. I set the <code>-a</code> option to act as a \"flag,\" so it just sets a variable (<code>$opt</code>) if it's given. If that should have possible values instead, use <code>'a=s' =&gt; \\$opt</code> and check for a value.</p></li>\n<li><p>Use lexical filehandles and the three-argument <a href=\"https://perldoc.perl.org/perlopentut.html\" rel=\"nofollow noreferrer\">open</a>, <code>open my $fh, '&lt;', $file ...</code></p></li>\n<li><p>When <code>die</code>-ing print <em>the error</em>, <code>die \"... $!\";</code>, using <a href=\"https://perldoc.perl.org/perlvar.html#Error-Variables\" rel=\"nofollow noreferrer\"><code>$!</code> variable</a> </p></li>\n<li><p>The <a href=\"https://perldoc.perl.org/perlop.html#I/O-Operators\" rel=\"nofollow noreferrer\">\"diamond\" (angle) operator</a>, <code>&lt;$fh&gt;</code>, reads <em>one line</em> from a file opened with <code>$fh</code> when used in <a href=\"https://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">scalar context</a>, as in <code>$line = &lt;$fh&gt;</code>.  It advances a pointer in the file as it reads a line so the next time it's used it returns the next line. If you use it in <em>list context</em> then it returns all lines, but when you process a file you normally want to go line by line.</p></li>\n</ul>\n\n<p>Some of the described logic and requirements aren't clear to me, but hopefully the code above is going to be easier to adjust as needed.</p>\n"}], "owner": {"reputation": 67, "user_id": 9783033, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "\u5f20\u5251\u6865", "link": "https://stackoverflow.com/users/9783033/%e5%bc%a0%e5%89%91%e6%a1%a5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1546240207, "creation_date": 1528262608, "last_edit_date": 1528263999, "question_id": 50712749, "link": "https://stackoverflow.com/questions/50712749/print-specific-infile-area-using-perl", "title": "print specific INFILE area using perl", "body": "<p>I have a file with the format below</p>\n\n<pre><code>locale,English,en_AU,6251\nlocale,French,fr_BE,25477\ncharmap,English,EN,5423\n</code></pre>\n\n<p>And I would like to use perl to print out something with the option \"-a\" follows by the file and outputs something like</p>\n\n<pre><code>Available locales:\nen_Au\nfr_BE\nEN\n</code></pre>\n\n<p>To do that, I have the perl script below</p>\n\n<pre><code>$o = $ARGV[0];\n$f = $ARGV[1];\nopen (INFILE, \"&lt;$f\") or die \"error\";\nmy $line = &lt;INFILE&gt;;\nmy @fields = split(',', $line);\nif($o eq \"-a\"){\n  if(!$fields[2]){print \"No locales available\\n\";}\n  else{print \"Available locales: \\n\";\n    while($fields[2]){print \"$fields[2]\\n\";}\n  }\n}\nclose(INFILE);\n</code></pre>\n\n<p>And I have three questions here.\n1. my script will only print the first locale \"en_Au\" forever.\n2. it should be able to test if a file is empty, but if a file is purely empty, it outputs nothing, but if I type in two empty lines in the file, it prints two lines of \"No locales available\" instead.\n3.In fact in the (!$filed[2]) part I should verify if the file is empty or no available locales exist, if so do I need to put some regular expression here to verify if it is a locale as well??\nHope someone could help me figure these out! Many thanks!!!</p>\n"}, {"tags": ["perl", "command-line", "getopt"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1528252177, "post_id": 50711362, "comment_id": 88431785, "body": "Could you please add an example to your question? It should include a sample directory structure, an example of how you want to call the script, and what the script should do with the arguments."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528252276, "post_id": 50711362, "comment_id": 88431808, "body": "Also, the name of the language is &quot;Perl&quot;, not &quot;PERL&quot;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9900698"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528253485, "post_id": 50711362, "comment_id": 88432046, "body": "I am passing the string through command line to open both these files. Then I am writing out one file in my script. Now, for all the pairs, I want to loop through my code and output one file."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528255211, "post_id": 50711362, "comment_id": 88432412, "body": "I&#39;ve added markup for extensions and directory names, along with code markup and other cleanup.  I assumed that &quot;text&quot; and &quot;excel&quot; were directory names, is that correct?  Please try to format your questions  a little better, so they are easier to read. it makes a difference."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1528255362, "post_id": 50711362, "comment_id": 88432448, "body": "Still missing an n example of how you want to call the script"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9900698"}, "edited": false, "score": 0, "creation_date": 1528294160, "post_id": 50711362, "comment_id": 88453384, "body": "Sorry for the poor formatting. First time using this platform."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9900698"}, "edited": false, "score": 0, "creation_date": 1528294601, "post_id": 50711362, "comment_id": 88453690, "body": "I am calling the script by providing the script name and argument. For Ex: myscriptname -in resource.  I am wondering if I can open both files in my script from the command line. Note: There may be 1000&#39;s of each files and I want to open them one pair at a time. Will I have to provide a list of these files as an argument at command line?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1528306928, "post_id": 50711362, "comment_id": 88461155, "body": "What do you mean by &quot;<i>open both files...from the command line</i>&quot;? Strings entered at the command line are merely handed to the script. For example, you can pass the name of the directory which contains <code>text&#47;</code> and <code>excel&#47;</code> directories. Then, once the script has that name, it can &quot;read&quot; those subdirectories to get a list of files in them.  Then it can go (loop) over the list, where in each iteration it opens one file out of each of the directories and does what it needs to do with them. These are very basic things and I am not sure what you are asking."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9900698"}, "edited": false, "score": 0, "creation_date": 1528307899, "post_id": 50711362, "comment_id": 88461676, "body": "Exactly, I will pass a string on command line which will have the directory names. My script will open files at these locations in every iteration of the loop."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528310390, "post_id": 50711362, "comment_id": 88462914, "body": "Well, great :)  You&#39;ll find <a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\">glob</a> (or rather <a href=\"https://perldoc.perl.org/File/Glob.html\" rel=\"nofollow noreferrer\">File::Glob</a>) or <a href=\"http://perldoc.perl.org/functions/readdir.html\" rel=\"nofollow noreferrer\">readdir</a> useful to assemble the filelists. Now go do that and if there are problems with it post a question."}], "owner": {"user_type": "does_not_exist", "display_name": "user9900698"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1528255042, "creation_date": 1528251396, "last_edit_date": 1528255042, "question_id": 50711362, "link": "https://stackoverflow.com/questions/50711362/passing-multiple-input-files-to-a-perl-script-through-command-line", "title": "Passing multiple input files to a Perl script through command line", "body": "<p>I am using Getopt function to open 2 separate files with different extensions (<code>.txt</code> and <code>.aspx</code>) in my Perl script by passing single command line argument. </p>\n\n<p>Now, there are many such files of both kinds located in separate folders under the same directory.  (Many <code>.txt</code>'s in folder <code>text</code>. Same number of <code>.aspx</code>'s in folder <code>excel</code>. Folders <code>text</code> and <code>excel</code> are under same directory <code>/pkv/kbv/skv/</code>). </p>\n\n<p>I need to open these files one pair at a time and process them. Then repeat same for remaining pairs (any number). Can I do this by passing command line arguments for the \"directory\" and \"files list\"?</p>\n\n<pre><code>use Getopt::Long qw(GetOptions);\n\nGetOptions('in=s') or die;\n\n$txt = $opt_in . \".txt\";\n\n$aspx = $opt_in . \".tab\" . \".aspx\";\n\nopen (TXT, \"&lt; $txt\") || die;\n\n...\n\nclose(TXT)\n\nopen (ASPX, \"&lt; $aspx\") || die;\n\n...\n\nclose(ASPX)\n</code></pre>\n"}, {"tags": ["perl", "data-mapping"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1528255839, "post_id": 50710921, "comment_id": 88432538, "body": "Just in case: Do you know that <code>$column[2]</code> is the third (3rd) column? Indexing starts with 0.  So same with <code>$column[13]</code> (it&#39;s the 14th one) and <code>$column[4]</code> (the 5th one.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1528255954, "post_id": 50710921, "comment_id": 88432564, "body": "I suggest to remove those (repeated!) &quot;please help,&quot; all of them.  You&#39;ve asked a question, that says it all."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528256226, "post_id": 50710921, "comment_id": 88432614, "body": "The <code>$motherID</code> cannot be equal to <code>$column[2]</code> in the <code>if</code> condition, since it is made by <code>join</code>ing that very <code>$column[2]</code> with the non-empty <code>$column[4]</code> on the previous line.  So this code will never print.  And I don&#39;t see what the logic should be...?"}, {"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1528277673, "post_id": 50710921, "comment_id": 88442454, "body": "It is not clear from the data you have provided which values correspond to which columns. E.g., do the values &#39;999&#39; belong to column 13,14 or 15 (indices 12,13,14)? Can you use commas instead of tabs? (When you copied and pasted the tabs are converted to spaces I think.)"}], "owner": {"reputation": 11, "user_id": 9900449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfd5763869a30f29b3605b5fd5ca6e0f?s=128&d=identicon&r=PG&f=1", "display_name": "waegenes", "link": "https://stackoverflow.com/users/9900449/waegenes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528247210, "creation_date": 1528247210, "question_id": 50710921, "link": "https://stackoverflow.com/questions/50710921/how-to-map-data-from-one-column-based-on-another-column-in-perl", "title": "How to map data from one column based on another column in perl", "body": "<p>please help. I'm very new to Perl and coding, I have a big file with 15 columns and some with missing information. What I'm trying to do, is select column[13] with missing information and column[4] with no missing information; and then use column[4] as a key to map to column[2] and print all lines in column[2]. </p>\n\n<p>Here's how my data file looks like (tab delimited):</p>\n\n<pre><code>BC000   1   1   2   3   F       3   51                  51  \nBC000   0   2           M                                   999\nBC000   0   3   37  36  F                               65  \nBC000   0   4   2   3   M                               50  50\nBC000   0   5   2   3   F           45                  47  46\nBC000   0   6   2   3   F       3   42                      \nBC000   0   7   2   3   M                                   999\nBC000   0   8   2   3   F       3                       42  \nBC000   0   9   2   3   F       1                       39  \nBC000   0   10  2   3   F       3                       35  \nBC000   0   11  45  8   M                               11  \nBC000   0   12  45  8   F                               9   \n</code></pre>\n\n<p>All motherIDs, column[4] will have an individualID, column[2] (the same as motherID)</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $filename = 'file.txt';\n\nopen (FILE, \"&lt;\", $filename) or die \"Cannot open file $!\";\n\nmy @data = &lt;FILE&gt;;\nmy @column;\nmy $motherID;\n\n\n\nforeach my $line (@data)\n{\n    @column = split ( /\\t/, $line);\n\n    if ($column[13] eq \"\" &amp;&amp; $column[4] ne \"\" ) #missing YOB, but with mother ID\n    {\n        $motherID = join($column[2],$column[4]);\n\n\n        if (\"$motherID\" eq \"$column[2]\")\n        {\n            print \"$line\\t\\n\";\n        } \n    }\n}\n</code></pre>\n\n<p>I tried this but it doesn't return any values. Can you please help? I'm really new to this, I'm trying to write a script to avoid mapping the columns manually in MS Excel as it's a big file with over 4000 rows. Many many thanks in advance!</p>\n"}, {"tags": ["perl", "post"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 9898950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca97f159af9d83fbb88628b083b304ff?s=128&d=identicon&r=PG&f=1", "display_name": "Deep-Fried Tarantula", "link": "https://stackoverflow.com/users/9898950/deep-fried-tarantula"}, "edited": false, "score": 0, "creation_date": 1528273554, "post_id": 50706091, "comment_id": 88439771, "body": "Thanks Matt, this works.  For some reason I\u2002was not able to understand &quot;Multivalued form fields can be specified by either repeating the field name or by passing the value as an array reference.&quot; enough to solve the problem."}, {"owner": {"reputation": 139, "user_id": 1056018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62c1c32446af16d5ff2e56d87e00dba?s=128&d=identicon&r=PG", "display_name": "programmingzeal", "link": "https://stackoverflow.com/users/1056018/programmingzeal"}, "edited": false, "score": 0, "creation_date": 1616842763, "post_id": 50706091, "comment_id": 118133238, "body": "@Matt jacob. Ok how can I include the authorization stuff in the request. The basic authorization is usually passed in the headers. I want to do this thing but I am confused how to put this in POST request method."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 6, "last_activity_date": 1528220782, "creation_date": 1528220782, "answer_id": 50706091, "question_id": 50705344, "link": "https://stackoverflow.com/questions/50705344/perl-httprequestcommon-post-file-and-array/50706091#50706091", "title": "Perl \u2014 HTTP::Request::Common \u2014 POST file AND array", "body": "<p>From the <a href=\"https://metacpan.org/pod/HTTP::Request::Common\" rel=\"noreferrer\">HTTP::Request::Common docs</a>:</p>\n\n<blockquote>\n  <p>Multivalued form fields can be specified by either repeating the field\n  name or by passing the value as an array reference.</p>\n  \n  <p>The POST method also supports the <code>multipart/form-data</code> content used for\n  <em>Form-based File Upload</em> as specified in RFC 1867. You trigger this\n  content format by specifying a content type of <code>'form-data'</code> as one of\n  the request headers. If one of the values in the <code>$form_ref</code> is an array\n  reference, then it is treated as a file part specification...</p>\n</blockquote>\n\n<p>So, while you could normally specify a multivalued field with an array reference, array references have special significance with <code>multipart/form-data</code> content, and you'll probably have to get around it by repeating the field name:</p>\n\n<pre><code>my $response = $ua-&gt;post(\n    $baseurl_local . 'create',\n    Content_Type =&gt; 'form-data',\n    Content      =&gt; [\n        file       =&gt; [$file],\n        targetLang =&gt; 'french',\n        targetLang =&gt; 'spanish',\n    ],\n);\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 9898950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca97f159af9d83fbb88628b083b304ff?s=128&d=identicon&r=PG&f=1", "display_name": "Deep-Fried Tarantula", "link": "https://stackoverflow.com/users/9898950/deep-fried-tarantula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1000, "favorite_count": 0, "accepted_answer_id": 50706091, "answer_count": 1, "score": 3, "last_activity_date": 1528274461, "creation_date": 1528217825, "last_edit_date": 1528274461, "question_id": 50705344, "link": "https://stackoverflow.com/questions/50705344/perl-httprequestcommon-post-file-and-array", "title": "Perl \u2014 HTTP::Request::Common \u2014 POST file AND array", "body": "<p>I'm trying to POST\u2002file into a webapp endpoint. The problem is that in the same request I need to include array as a value of one of the parameters.</p>\n\n<pre><code>my $ua = LWP::UserAgent-&gt;new();\nmy $response = $ua-&gt;post(\n    $baseurl_local . 'create',\n    Content_Type =&gt; 'form-data',\n    Content      =&gt; [\n    file =&gt;  [$file],\n    targetLang =&gt; 'french',\n]);\n</code></pre>\n\n<p>works just fine.</p>\n\n<p>However when I try to</p>\n\n<pre><code>my $ua = LWP::UserAgent-&gt;new();\nmy $response = $ua-&gt;post(\n    $baseurl_local . 'create',\n    Content_Type =&gt; 'form-data',\n    Content      =&gt; [\n    file =&gt;  [$file],\n    targetLang =&gt; ['french','spanish],\n]);\n</code></pre>\n\n<p>I get</p>\n\n<blockquote>\n  <p>Can't open file french: No such file or directory at C:/Strawberry/perl/site/lib/HTTP/Request/Common.pm line 154.\n  HTTP::Request::Common::form_data(ARRAY(0x6800698), undef, HTTP::Request=HASH(0x6803a70)) called at C:/Strawberry/perl/site/lib/HTTP/Request/Common.pm line 67</p>\n</blockquote>\n\n<p>It would seem Perl thinks array ref with languages is a file.</p>\n\n<p>what am I doing wrong?</p>\n\n<hr/>\n\n<p>To expand on the resolution based on Matt's answer: as I forgot to mention originally, the list of languages comes from user input, so I ended up doing something like:</p>\n\n<pre><code>my @languages = (targetLang =&gt; 'french', targetLang =&gt; 'spanish');\nmy $ua = LWP::UserAgent-&gt;new();\nmy $response = $ua-&gt;post(\n    $baseurl_local . 'create',\n    Content_Type =&gt; 'form-data',\n    Content      =&gt; [\n        file =&gt;  [$file],\n        @languages,\n]);\n</code></pre>\n"}, {"tags": ["perl", "unit-testing", "testing"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1528215653, "post_id": 50704030, "comment_id": 88418762, "body": "Test::MockObject allows you to record all calls to a function. You&#39;d usually use this module, or something simpler, to completely remove dependencies in unit tests. You can use that to only do a count, while also controlling the return values."}, {"owner": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1528215852, "post_id": 50704030, "comment_id": 88418871, "body": "@simbabque that&#39;s exactly what I&#39;m doing. Are you saying this is the only way to accomplish this?"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1528220467, "post_id": 50704030, "comment_id": 88421127, "body": "Another way would be Wrap::Sub (on CPAN) to craft a pre-execution or post-execution hook that handles counts."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1528220544, "post_id": 50704030, "comment_id": 88421165, "body": "Many Perl <a href=\"http://metacpan.org/pod/Devel::Profile\" rel=\"nofollow noreferrer\">profilers</a> do this, at the expense of performance."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1528220613, "post_id": 50704030, "comment_id": 88421193, "body": "Of course you don&#39;t HAVE to use a CPAN module; everything a module is doing can be done in code, though the barrier for XS code is pretty high, Pure Perl provide everything you need to grab a subref, create a new sub in the old sub&#39;s typeglob, and then make the new sub goto the old sub after doing its own massaging."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528228932, "post_id": 50704030, "comment_id": 88425172, "body": "You can also <i>wrap</i> a method instead of <i>mocking</i> (replacing) it."}], "owner": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528213162, "creation_date": 1528213162, "question_id": 50704030, "link": "https://stackoverflow.com/questions/50704030/perl-count-calls-to-a-method-while-testing", "title": "perl: count calls to a method while testing", "body": "<p>I've got a test that looks like this:</p>\n\n<pre><code>my $mockobj = My::Module-&gt;new();\n$mockobj = Test::MockObject::Extends-&gt;new($obj);\n\nmy $callcount = 0;\n\n$mockobj-&gt;mock('Foo', sub {\n  print STDERR \"foo\\n\";\n  $callcount++;\n  return 1;\n});\n\n$mockobj-&gt;CallsFoo();\nis($callcount, 1);\n$mockobj-&gt;CallsFooTwice();\nis($callcount, 3);\n</code></pre>\n\n<p>I'm wondering if there's a better way to accomplish this.  In some other languages, there are modules that are capable of monitoring the number of times a function is called (such as <a href=\"http://sinonjs.org/\" rel=\"nofollow noreferrer\">sinon</a> for javascript).  Is there such a thing for perl, or do I have to do it manually like this?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1528212018, "post_id": 50703603, "comment_id": 88416587, "body": "Welcome to Stack Overflow. What leading zeros? Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with example input and your code that you&#39;re referring to. You can <a href=\"https://stackoverflow.com/posts/50703603/edit\">edit</a> your question."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1528212135, "post_id": 50703603, "comment_id": 88416644, "body": "Indeed!  Plus, Check out the <a href=\"https://stackoverflow.com/tour\">tour</a> and the <a href=\"https://stackoverflow.com/help/how-to-ask\">how-to-ask page</a> for more about asking questions that will attract quality answers."}], "answers": [{"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 4, "last_activity_date": 1528214231, "creation_date": 1528214231, "answer_id": 50704370, "question_id": 50703603, "link": "https://stackoverflow.com/questions/50703603/convert-hex-to-binary-and-keep-leading-0s-perl/50704370#50704370", "title": "Convert Hex to Binary and keep leading 0&#39;s Perl", "body": "<p>You can specify the width of the output in <code>sprintf</code> or <code>printf</code> by putting the number between the % and the format character like this.</p>\n\n<pre><code>printf \"%16b\\n\",hex(\"0132\");\n</code></pre>\n\n<p>and by preceding the number with 0, make it pad the result with 0s like this</p>\n\n<pre><code>printf \"%016b\\n\",hex(\"0132\");\n</code></pre>\n\n<p>the latter giving the result of</p>\n\n<blockquote>\n  <p>0000000100110010</p>\n</blockquote>\n\n<p>But this is all covered in the documentation for those functions.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1528339114, "creation_date": 1528339114, "answer_id": 50732220, "question_id": 50703603, "link": "https://stackoverflow.com/questions/50703603/convert-hex-to-binary-and-keep-leading-0s-perl/50732220#50732220", "title": "Convert Hex to Binary and keep leading 0&#39;s Perl", "body": "<p>This solution uses the length of the hex repesentation to determine the length of the binary representation:</p>\n\n<pre><code>for my $num_hex (@nums_hex) {\n   my $num = hex($num_hex);\n   my $num_bin = sprintf('%0*b', length($num_hex)*4, $num);\n   ...\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9898526, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3CQc7FahD7s/AAAAAAAAAAI/AAAAAAAABX0/p2RuQSbZqis/photo.jpg?sz=128", "display_name": "Francisco Delgado", "link": "https://stackoverflow.com/users/9898526/francisco-delgado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1258, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528339114, "creation_date": 1528211943, "last_edit_date": 1528212981, "question_id": 50703603, "link": "https://stackoverflow.com/questions/50703603/convert-hex-to-binary-and-keep-leading-0s-perl", "title": "Convert Hex to Binary and keep leading 0&#39;s Perl", "body": "<p>I have an array of hex numbers that I'd like to convert to binary numbers, the problem is, in my code it removes the leading 0's for things like 0,1,2,3. I need these leading 0's to process in a future section of my code. Is there an easy way to convert Hex to Binary and keep my leading 0's in perl?</p>\n\n<pre><code>use strict;\nuse warnings;\nmy @binary;\nmy @hex = ('ABCD', '0132', '2211');\nforeach my $h(@hex){\nmy $bin = sprintf( \"%b\", hex($h));\npush @binary, $bin;\n}\n\nforeach (@binary){\nprint \"$_\\n\";\n}\n</code></pre>\n\n<p>running the code gives me<code>\n1010101111001101\n100110010\n10001000010001</code></p>\n\n<p>Edit: Found a similar answer using pack and unpack, replaced</p>\n\n<p><code>sprint( \"%b\", hex($h));</code>\nwith\n<code>unpack( 'B*', pack('H*' ($h))</code></p>\n"}, {"tags": ["perl", "hash", "hashmap", "hashtable"], "comments": [{"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 2, "creation_date": 1528206548, "post_id": 50701681, "comment_id": 88412846, "body": "That code does not compile."}, {"owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1528206861, "post_id": 50701681, "comment_id": 88413076, "body": "@Andrey Use {a}{y}{2} instead of {}{}{} and obvious syntax errors"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1528207458, "post_id": 50701681, "comment_id": 88413515, "body": "Can you show the expected output for both a unique and non-unique key?"}, {"owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1528207784, "post_id": 50701681, "comment_id": 88413748, "body": "@choroba Just want the $name to be unqiue in the whole hash and since i am checking for each $name in the form i can&#39;t do away with foreach loop"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1528208216, "post_id": 50701681, "comment_id": 88414105, "body": "I still don&#39;t understand. So you have several @names and you want to check which of them are unique on the third level of the hash reference?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1528209133, "post_id": 50701681, "comment_id": 88414672, "body": "Why not as you&#39;re building this monster of a structure have another hash that tracks what names have already been added?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528209601, "post_id": 50701681, "comment_id": 88414990, "body": "I think it&#39;s very likely that you&#39;ve chosen an inappropriate data structure to represent your information. It looks like you have a three-column CSV file that you&#39;ve dumped into a three-level hash without considering how you will access it. What other operations do you have to perform? Does it make <i>any</i> of them straightforward to code?"}, {"owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528209872, "post_id": 50701681, "comment_id": 88415184, "body": "@Borodin hats up,i don&#39;t know how you guessed that.every assumption of yours is right"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1528210420, "post_id": 50701681, "comment_id": 88415535, "body": "Okay, well why not start with a simple array of arrays and see if you need anything more elaborate. You can write <code>my @data = map { chomp; [ split &#47;,&#47; ] } &lt;&gt;</code> to create that, and it&#39;s straightforward to interrogate."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1528220340, "post_id": 50702334, "comment_id": 88421072, "body": "Great solution.But would you be able to generalize? I mean this works fine when there is x,y ,what happens when there&#39;s more?"}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "reply_to_user": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1528221082, "post_id": 50702334, "comment_id": 88421387, "body": "my $x and my $y are not related to keys of your hashes. Those are just temporary variables. This works fine for x,y,z... as long as there are 3 hash of hashes levels. Sobrique solution works for any number of sublevels."}, {"owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1528221334, "post_id": 50702334, "comment_id": 88421532, "body": "Your solution would just do for me,Thanks for helping me out here.I appreciate it"}], "tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": true, "score": 0, "last_activity_date": 1528208050, "creation_date": 1528208050, "answer_id": 50702334, "question_id": 50701681, "link": "https://stackoverflow.com/questions/50701681/how-to-find-if-the-value-exists-in-hash-without-using-key-in-perl/50702334#50702334", "title": "How to find if the value exists in hash without using key in perl?", "body": "<p>if I understand correctly you want something like this:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $name = 'AUS'; #dynamic values\nmy %hash = ( 'a'=&gt;{\n                  'x'=&gt; {\n                         '1' =&gt;'US',\n                         '2' =&gt;'UK'\n                        },\n                  'y'=&gt;{\n                          '1' =&gt;'AFRICA',\n                          '2' =&gt;'AUS'\n                       }\n                   },\n            'b'=&gt;{\n                   'x' =&gt;{\n                           '1' =&gt;'US',\n                           '2' =&gt;'UK'\n                         }\n                 }\n           );\n\n\n\nmy @val = grep {$_ eq $name} map {my $x=$_; map {my $y=$_; map {$hash{$x}-&gt;{$y}-&gt;{$_}} keys %{$hash{$x}-&gt;{$_}}} keys %{$hash{$_}}} keys %hash;\nif(@val == 0) {\n    print \"$name not found\";\n}\nelsif(@val == 1) {\n    print \"$name is unique\";\n}\nelse {\n    print \"$name is not unique\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1528210325, "post_id": 50702387, "comment_id": 88415475, "body": "Great solution. Also, you do not need my @values;"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1528210403, "post_id": 50702387, "comment_id": 88415517, "body": "Oh yeah. Did it to populate a list of found elements first time around; I&#39;ll remove it."}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1528210524, "post_id": 50702387, "comment_id": 88415606, "body": "The code also gives an error if you are searching for something that does not exist in the hash, which could be easily fixed."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 5, "last_activity_date": 1528217797, "last_edit_date": 1528217797, "creation_date": 1528208200, "answer_id": 50702387, "question_id": 50701681, "link": "https://stackoverflow.com/questions/50701681/how-to-find-if-the-value-exists-in-hash-without-using-key-in-perl/50702387#50702387", "title": "How to find if the value exists in hash without using key in perl?", "body": "<p>There's no magic bullet here. You have to traverse your hash and inspect each value. There's a variety of approaches to doing this, and which you use is rather dependent on how your hash-source gets populated. </p>\n\n<p>A recursive solution would be:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;   \nmy $name = 'AUS';\n\nuse Data::Dumper;\n\nmy %hash = ( 'a'=&gt;{\n                  'x'=&gt; {\n                         '1' =&gt;'US',\n                         '2' =&gt;'UK'\n                        },\n                  'y'=&gt;{\n                          '1' =&gt;'AFRICA',\n                          '2' =&gt;'AUS'\n                       }\n                   },\n            'b'=&gt;{\n                   'x' =&gt;{\n                           '1' =&gt;'US',\n                           '2' =&gt;'UK'\n                         }\n                 }\n           );\n\nmy %count_of;\n\nsub traverse {\n   my ( $input_hash ) = @_; \n   foreach my $sub ( values %{$input_hash} ) { \n      if (ref $sub) { \n         traverse ($sub);\n      }\n      else  {\n         $count_of{$sub}++;\n      }\n   }\n}\n\ntraverse (\\%hash); \nprint Dumper \\%count_of;\n\nprint \"$name is unique\\n\" if $count_of{$name} == 1; \n</code></pre>\n\n<p>Because this is recursive, it will walk to any 'depth' of the hash, but that might not be entirely appropriate for you use-case. </p>\n\n<p>However the fact that you're talking about columns, suggests to me that this hash is being populated from elsewhere - I would suggest you look at that population process, because it's quite likely that's a better place to start picking out particular counts-of-values. </p>\n\n<p>If you need a more versatile lookup table:</p>\n\n<pre><code>my @unique_elements = grep { $count_of{$_} == 1 } sort keys %count_of;\nprint Dumper \\@unique_elements;\nmy %is_unique = map { $_ =&gt; 1 } @unique_elements; \nprint Dumper \\%is_unique;\n\nprint \"$name is unique\\n\" if $is_unique{$name};\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 553, "favorite_count": 0, "accepted_answer_id": 50702334, "answer_count": 2, "score": 0, "last_activity_date": 1528217797, "creation_date": 1528206266, "question_id": 50701681, "link": "https://stackoverflow.com/questions/50701681/how-to-find-if-the-value-exists-in-hash-without-using-key-in-perl", "title": "How to find if the value exists in hash without using key in perl?", "body": "<p>I have an hash map like this</p>\n\n<pre><code>my $name = 'AUS'; #dynamic values\nmy %hash = { 'a'=&gt;{\n                  'x'=&gt; {\n                         '1' =&gt;'US'\n                         '2' =&gt;'UK'\n                        }\n                  'y'=&gt;{\n                          '1' =&gt;'AFRICA'\n                          '2' =&gt;'AUS'\n                       }\n                   }\n            'b'=&gt;{\n                   'x' =&gt;{\n                           '1' =&gt;'US'\n                           '2' =&gt;'UK'\n                         }\n                 }\n           };\n</code></pre>\n\n<p>I am trying to find whether name is unique in the hash for each column</p>\n\n<pre><code>foreach my $key(keys %hash)\n{\n   if($name ne $hash{}{}{}) #is name unique in whole hash?\n   {\n      print \"something\";\n   }\n   else\n   {\n      print \"nothing\";\n   }\n}\n</code></pre>\n\n<p>All is fine but when it comes to key 'b' it checks that AUS is not present and prints \"something\" but I want it to check the 'a' key too to see if has 'AUS' value. So,how to check whether $name exists in whole hash (i can't use find via key-value pair since i am trying to find and print in each column) ?</p>\n"}, {"tags": ["perl", "stdout", "stderr", "io-redirection"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1528195054, "post_id": 50697957, "comment_id": 88405055, "body": "You are mistaken. <code>system</code>, when provided a single scalar, expects it to be <code>sh</code> command, and the <code>sh</code> command you provided does what you requested it does."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528195134, "post_id": 50697957, "comment_id": 88405098, "body": "Also, please don&#39;t call your subs by the same name as Perl operators (e.g. <code>exec</code>)."}, {"owner": {"reputation": 1, "user_id": 9896991, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Aasritha Pisupati", "link": "https://stackoverflow.com/users/9896991/aasritha-pisupati"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528195835, "post_id": 50697957, "comment_id": 88405580, "body": "What fix do you suggest?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1528206163, "post_id": 50697957, "comment_id": 88412550, "body": "What do you expect to happen?"}, {"owner": {"reputation": 1, "user_id": 9896991, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Aasritha Pisupati", "link": "https://stackoverflow.com/users/9896991/aasritha-pisupati"}, "edited": false, "score": 0, "creation_date": 1528284366, "post_id": 50697957, "comment_id": 88446800, "body": "Right now, I&#39;m not able to see the error messages on STDOUT. But when I run the same command from a shell script, I can see the errors on the STDOUT. Need to make this perl script to do the same."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9896991, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Aasritha Pisupati", "link": "https://stackoverflow.com/users/9896991/aasritha-pisupati"}, "edited": false, "score": 0, "creation_date": 1528196294, "post_id": 50698250, "comment_id": 88405896, "body": "I didn&#39;t want to post the exact name of the sub-routine, hence the name &#39;exec&#39; didn&#39;t realize that I was using the same name as a Perl operator. Can&#39;t make do with exec since I need the exit code of the command I&#39;m executing."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 1, "user_id": 9896991, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Aasritha Pisupati", "link": "https://stackoverflow.com/users/9896991/aasritha-pisupati"}, "edited": false, "score": 0, "creation_date": 1528200120, "post_id": 50698250, "comment_id": 88408375, "body": "But your code doesn&#39;t show that you&#39;re using the exit code from the command so how do you expect a proper answer if you&#39;re not giving us all the information?"}, {"owner": {"reputation": 1, "user_id": 9896991, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Aasritha Pisupati", "link": "https://stackoverflow.com/users/9896991/aasritha-pisupati"}, "edited": false, "score": 0, "creation_date": 1528284444, "post_id": 50698250, "comment_id": 88446849, "body": "Hi, I edited the code and that&#39;s exactly what I&#39;m doing. Could you go through it. Thanks in advance!"}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 0, "last_activity_date": 1528195772, "creation_date": 1528195772, "answer_id": 50698250, "question_id": 50697957, "link": "https://stackoverflow.com/questions/50697957/how-do-i-re-direct-stderr-to-stdout-when-using-system-command-in-perl-the-2/50698250#50698250", "title": "How do I re direct STDERR to STDOUT when using system() command in Perl? The 2&gt;&amp;1 solution is not working", "body": "<p>Your subroutine is never called because it shadows the existing Perl function <code>exec</code>. Instead when you call <code>exec()</code> it is running the real <code>exec</code> and since you've not passed it any parameters, it does nothing.</p>\n\n<p>Since your sub is calling <code>exit(0)</code> you might as well ditch your subroutine and call the real <code>exec</code> like this which will do the same thing</p>\n\n<pre><code>exec(\"cmd cmd_args 2&gt;&amp;1\");\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9896991, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Aasritha Pisupati", "link": "https://stackoverflow.com/users/9896991/aasritha-pisupati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1528284207, "creation_date": 1528194875, "last_edit_date": 1528284207, "question_id": 50697957, "link": "https://stackoverflow.com/questions/50697957/how-do-i-re-direct-stderr-to-stdout-when-using-system-command-in-perl-the-2", "title": "How do I re direct STDERR to STDOUT when using system() command in Perl? The 2&gt;&amp;1 solution is not working", "body": "<p>I'm calling the system function from a subroutine.\nthe code looks something like this:</p>\n\n<pre><code>sub execCmd;\nmy @cmd_line;\nmy $cmd_file_name;\n\n#pre-process argv to open a file to read the command.\nopen(F,'&lt;',\"$cmd_file_name);\nmy $temp=&lt;F&gt;;\nchomp($temp);\n@cmd_line=split(/ /, \"$temp\");\nclose F;\nexecCmd();\n\nsub execCmd {\n    my $test_stat=system(\"@cmd_line cmd_args 2&gt;&amp;1\");\n    if($test_stat){\n           print \"TEST FAILED\";\n           exit;\n    }\n    exit(0);\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1528190175, "post_id": 50696216, "comment_id": 88401974, "body": "second loop? there is only one loop in your code"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528192860, "post_id": 50696444, "comment_id": 88403700, "body": "Not executing the <code>my</code> causes the var not to get cleared on exit."}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1528202574, "post_id": 50696444, "comment_id": 88410004, "body": "Is this in the context of <code>my $bar; $bar = 1 if 1 == 2</code> ?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1528207018, "post_id": 50696444, "comment_id": 88413200, "body": "@ChrisDoyle: I don&#39;t understand your question. By separating <code>my</code> by a semicolon, the variable will be cleared on scope exit, and the assignment will be optimized away during compilation."}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1528208418, "post_id": 50696444, "comment_id": 88414235, "body": "I was wondering if declaring the my variable first then setting a value for it with a conditional changes the behavior. When i ran it, the bug no longer happened. I didn&#39;t know if that was just luck (unpredictable as documented) or if it indeed prevents the bug."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 6, "last_activity_date": 1528190909, "last_edit_date": 1528190909, "creation_date": 1528190242, "answer_id": 50696444, "question_id": 50696216, "link": "https://stackoverflow.com/questions/50696216/can-someone-explain-this-perl-snippet/50696444#50696444", "title": "Can someone explain this perl snippet?", "body": "<p>You should never use <code>my</code> with a statement modifier. The behaviour of such constructs is <strong>undefined</strong> (see <a href=\"http://p3rl.org/perlsyn\" rel=\"nofollow noreferrer\">perlsyn</a>).</p>\n\n<p>The current implementation doesn't clear the value assigned to the variable in the previous run of the subroutine, but there's no guarantee the behaviour will stay (in fact, it won't: see <a href=\"http://p3rl.org/perldeprecation\" rel=\"nofollow noreferrer\">perldeprecation</a>).</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528190685, "post_id": 50696451, "comment_id": 88402285, "body": "<i>&quot;reserve space in the lexical pad for a variable, and to associate $bar with that space&quot;</i> I&#39;m  sure you&#39;re very proud of your knowledge, but this language is neither necessary nor useful. Writing &quot;Declare <code>$bar</code>&quot; might actually help the OP."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 5, "creation_date": 1528192161, "post_id": 50696451, "comment_id": 88403278, "body": "@Borodin &quot;Declare <code>$bar</code>&quot; is something a programmer does, not a computer. Saying that declaring <code>$bar</code> declares <code>$bar</code> leaves no one any wiser. And saying &quot;I&#39;m sure you&#39;re very proud of your knowledge&quot; is an offense against human decency publishable by revocation of internet privileges for no less than 60 days in civilized parts of the world."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1528192568, "post_id": 50696451, "comment_id": 88403512, "body": "More to the point, when you get into &quot;weird behavior&quot; territory, you can&#39;t afford to be fuzzy about the difference between names and storage, or the difference between scope and duration."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1528193163, "post_id": 50696451, "comment_id": 88403867, "body": "<code>my $bar = 1;</code> has <i>three</i> functions, and the one you didn&#39;t mention is why the construct is invalid. The three functions are: 1) Compile-time: Declare the var. 2) Runtime: cause the var to be cleared on exit. 3) Runtime: Assignment."}, {"owner": {"reputation": 506, "user_id": 3359563, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/436f40e356a2a4f00ef7ff7de727db15?s=128&d=identicon&r=PG", "display_name": "Ramzendo", "link": "https://stackoverflow.com/users/3359563/ramzendo"}, "edited": false, "score": 2, "creation_date": 1528198795, "post_id": 50696451, "comment_id": 88407478, "body": "I found something: perldoc perlsyn [ SNIP ]     NOTE: The behaviour of a &quot;my&quot; statement modified with a statement     modifier conditional or loop construct (e.g. &quot;my $x if ...&quot;) is     undefined.  The value of the &quot;my&quot; variable may be &quot;undef&quot;, any     previously assigned value, or possibly anything else.  Don\u2019t rely on     it.  Future versions of perl might do something different from the     version of perl you try it out on.  Here be dragons."}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 9, "last_activity_date": 1528190251, "creation_date": 1528190251, "answer_id": 50696451, "question_id": 50696216, "link": "https://stackoverflow.com/questions/50696216/can-someone-explain-this-perl-snippet/50696451#50696451", "title": "Can someone explain this perl snippet?", "body": "<p>You're taking advantage of a strange bug (<a href=\"https://metacpan.org/pod/perldeprecation#Using-my()-in-false-conditional.\" rel=\"noreferrer\">officially deprecated</a> and slated to become a fatal error in 5.30), which involves declaring a lexical (<code>my</code>) variable in a statement with a statement-modifier conditional which is false.</p>\n\n<p>The reason that this happens is because <code>my $bar = 1;</code> basically has <em>two</em> functions. It has a compile-time function, which is to reserve space in the lexical pad for a variable, and to associate <code>$bar</code> with that space; and it has a run-time function, which is to assign <code>1</code> to <code>$bar</code> whenever control flow reaches the <code>my</code> statement (a statement like <code>my $foo;</code> without the assignment also has these two effects, except it assigns <code>undef</code> at runtime).</p>\n\n<p>When you govern the statement with a false conditional like <code>my $bar = 1 if 1 == 2;</code>, the <em>compile-time</em> function stays exactly the same, but the <em>run-time</em> function is prevented from running using the false condition, which means that whatever value was in that storage is re-used, without being assigned fresh each time the code reaches that point. This gives an effect almost, but not exactly, like using a <code>state</code> variable. It's a cool trick, but not recommended for any serious use, and as I've mentioned, it will be fatalized in an upcoming release of perl, which is another reason not to rely on it.</p>\n"}], "owner": {"reputation": 506, "user_id": 3359563, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/436f40e356a2a4f00ef7ff7de727db15?s=128&d=identicon&r=PG", "display_name": "Ramzendo", "link": "https://stackoverflow.com/users/3359563/ramzendo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 2, "accepted_answer_id": 50696451, "answer_count": 2, "score": 2, "last_activity_date": 1528190909, "creation_date": 1528189437, "last_edit_date": 1528190355, "question_id": 50696216, "link": "https://stackoverflow.com/questions/50696216/can-someone-explain-this-perl-snippet", "title": "Can someone explain this perl snippet?", "body": "<pre><code>for my $n (1, 2) {\n  sub_example();\n}\n\nsub sub_example {\n  my $bar = 1 if 1 == 2;\n  if ($bar) {\n     print \"hahha, you see\\n\";\n  }\n  else {\n     $bar = 1;\n  }\n}\n</code></pre>\n\n<p>So my question is why is $bar defined in the second loop iteration?</p>\n"}, {"tags": ["perl", "https", "cron"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1528189396, "post_id": 50694975, "comment_id": 88401510, "body": "Where is the code for doing the HTTPS request? You&#39;ve only shown us the HTTP requesting code"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1528189471, "post_id": 50694975, "comment_id": 88401559, "body": "And possibly more pertinent, why are you doing the request &quot;by hand&quot; and not using something like the module LWP which does HTTP (and HTTPS) requests?"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1528190389, "creation_date": 1528190389, "answer_id": 50696508, "question_id": 50694975, "link": "https://stackoverflow.com/questions/50694975/how-to-have-perl-get-https-website-links-to-trigger-cron-job/50696508#50696508", "title": "how to have perl get https website links to trigger cron job", "body": "<p>It seems likely that the problem is because you're always configuring your socket object to use the HTTP port (<code>PeerPort =&gt; 'http(80)'</code>). The HTTPS port is 443, not 80.</p>\n\n<p>But I have no idea why you would write code like this using low-level socket programming. You would be far better advised to look at something like <a href=\"https://metacpan.org/pod/LWP::Simple\" rel=\"nofollow noreferrer\">LWP::Simple</a> (you will also want to install <a href=\"https://metacpan.org/pod/LWP::Protocol::https\" rel=\"nofollow noreferrer\">LWP::Protocol::https</a> for HTTPS support).</p>\n"}], "owner": {"reputation": 1, "user_id": 9896168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G24t6.jpg?s=128&g=1", "display_name": "Jeff B", "link": "https://stackoverflow.com/users/9896168/jeff-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528190389, "creation_date": 1528185340, "question_id": 50694975, "link": "https://stackoverflow.com/questions/50694975/how-to-have-perl-get-https-website-links-to-trigger-cron-job", "title": "how to have perl get https website links to trigger cron job", "body": "<p>Currently I have a perl script to trigger a cron job on multiple websites however the script is only working for http and not for https. In other words when the script tries to trigger a link on a domain with an SSL certificate, the cron never gets triggered.  What is required to trigger the https cron URL?</p>\n\n<pre><code>#!/usr/bin/perl\n#\n# Enter domains, one per line.\n#\n# They do not have to be indented.\n#\n# Do not use an '#' on the beginning of your domains.\n#\n# Enter domains below next line: (without #)\nmy @domains = qw/#############################\n\n    #www.example.com\n    #www.example.com\n    #www.example.com\n\n###############_END_OF_DOMAINS_###############/;\n\nmy $num_domains = 200; # number of domains\nmy $cycle_time  = 900; # seconds per cycle\n\n# So if $num_domain=200 and $cycle_time=900,\n# there will be 4.5 seconds between sites.\n\n# Nothing below here to service.....\n#############################################################################\n#############################################################################\n#############################################################################\n#############################################################################\n\nuse strict;\nuse warnings;\nuse IO::Socket;\nuse constant DEBUG =&gt; 0;\n\nmy $time_wait  = $cycle_time / $num_domains;\n\nmy @stdin = -t STDIN\n    ? ()\n    : grep !/^$/, map { s/^\\s+//; s/\\s+$//; s/\\#.*?$//; $_ } &lt;STDIN&gt;\n;\n\nfor my $site ( grep !/^\\s*\\#/, @domains, @stdin ) {\n    chomp $site;\n\n    print \"contacting: $site\\n\" if DEBUG;\n    my $sock = IO::Socket::INET-&gt;new(\n             PeerHost   =&gt; $site,\n             PeerPort   =&gt; 'http(80)',\n             Proto      =&gt; 'tcp',\n             Type       =&gt; SOCK_STREAM,\n             Timeout    =&gt; 10,\n    );\n\n    unless ( defined $sock ) {\n        warn \"Couldn't connect to $site: $!\\n\" if DEBUG;\n        next;\n    }\n\n    #Example target:\n    # http://www.example.com/index.php?option=com_acymailing&amp;ctrl=cron\n\n    print $sock\n        \"GET /index.php?option=com_acymailing&amp;ctrl=cron HTTP/1.0\\n\" .\n        \"Host: $site\\n\\n\"\n    ;\n\n    # wait for response...\n    while (defined( $_ = scalar &lt;$sock&gt; )) {\n        # we dont care what it said...\n        print 'recv: ', $_ if DEBUG;\n    }\n    print \"\\ndone\\n\" if DEBUG;\n    $sock-&gt;close;\n\n}\ncontinue {\n    print \"sleeping $time_wait seconds\\n\" if DEBUG;\n    select( undef, undef, undef, $time_wait );\n}\n\n__END__\n</code></pre>\n"}, {"tags": ["xcode", "perl"], "comments": [{"owner": {"reputation": 2279, "user_id": 13563, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VoEyi.jpg?s=128&g=1", "display_name": "jimtut", "link": "https://stackoverflow.com/users/13563/jimtut"}, "edited": false, "score": 0, "creation_date": 1528223001, "post_id": 50692603, "comment_id": 88422374, "body": "Can you execute the Xcode app <i>without</i> using the debugger?  Perhaps SIP will allow the app to call the Perl script, but it just won&#39;t allow Xcode to attach to it for debugging."}, {"owner": {"reputation": 41, "user_id": 5370230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57a6f25593025037992a6dc822d8cb68?s=128&d=identicon&r=PG&f=1", "display_name": "code master", "link": "https://stackoverflow.com/users/5370230/code-master"}, "reply_to_user": {"reputation": 2279, "user_id": 13563, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VoEyi.jpg?s=128&g=1", "display_name": "jimtut", "link": "https://stackoverflow.com/users/13563/jimtut"}, "edited": false, "score": 0, "creation_date": 1528323362, "post_id": 50692603, "comment_id": 88468430, "body": "this might be a solution. I am not sure how to disable the debugger though. can you advise on that? by the way i am not really running an &quot;app&quot;. I am just trying to run a simple perl script in Xcode"}, {"owner": {"reputation": 2279, "user_id": 13563, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VoEyi.jpg?s=128&g=1", "display_name": "jimtut", "link": "https://stackoverflow.com/users/13563/jimtut"}, "edited": false, "score": 0, "creation_date": 1528337352, "post_id": 50692603, "comment_id": 88471914, "body": "I&#39;m more a Visual Studio guy, don&#39;t really know Xcode itself.  But the idea should be the same.  You should be able to compile your Xcode project into a Mac OS app.  When running the app in Finder, Xcode will no longer be involved.  That might work.  Or, if you&#39;re just using Xcode to run ONLY a Perl script (not inside a real Mac OS app), try running directly from Terminal.  Or try a Perl IDE, like Komodo."}], "answers": [{"tags": [], "owner": {"reputation": 23568, "user_id": 140765, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/47c425cc99e03451914b786c0b9b6f73?s=128&d=identicon&r=PG", "display_name": "Sagar R. Kothari", "link": "https://stackoverflow.com/users/140765/sagar-r-kothari"}, "is_accepted": false, "score": 1, "last_activity_date": 1576802228, "creation_date": 1576802228, "answer_id": 59418576, "question_id": 50692603, "link": "https://stackoverflow.com/questions/50692603/cannot-attach-to-process-due-to-system-integrity-protection-error-seen-when-tr/59418576#59418576", "title": "&quot;cannot attach to process due to System Integrity Protection&quot; error seen when trying to run perl script in Xcode", "body": "<p>Step 1: Select Target from Xcode toolbar.</p>\n\n<p><a href=\"https://i.stack.imgur.com/hYVWI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hYVWI.png\" alt=\"enter image description here\"></a></p>\n\n<p>Step 2: Click on <code>Edit Scheme</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/xwfX4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xwfX4.png\" alt=\"enter image description here\"></a></p>\n\n<p>Step 3: Uncheck as indicated.</p>\n\n<p><a href=\"https://i.stack.imgur.com/RPDZ9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RPDZ9.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 41, "user_id": 5370230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57a6f25593025037992a6dc822d8cb68?s=128&d=identicon&r=PG&f=1", "display_name": "code master", "link": "https://stackoverflow.com/users/5370230/code-master"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1081, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1576802228, "creation_date": 1528176331, "last_edit_date": 1539003096, "question_id": 50692603, "link": "https://stackoverflow.com/questions/50692603/cannot-attach-to-process-due-to-system-integrity-protection-error-seen-when-tr", "title": "&quot;cannot attach to process due to System Integrity Protection&quot; error seen when trying to run perl script in Xcode", "body": "<p>I have OS sierra 12.12.3\nI am trying to run a perl script in Xcode but i get the following error:\nMessage from debugger: cannot attach to process due to System Integrity Protection</p>\n\n<p>I am able to run C code in Xcode without getting any such errors though. Why would there be any issues with running a simple perl script in xcode ? what are the security implications?\nAny way to work around this without disabling sip?</p>\n"}, {"tags": ["html", "perl", "outlook", "html-email"], "comments": [{"owner": {"reputation": 826, "user_id": 1402389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/599c4eaaff0f5d2c3fe5feca6560173b?s=128&d=identicon&r=PG", "display_name": "FBergo", "link": "https://stackoverflow.com/users/1402389/fbergo"}, "edited": false, "score": 0, "creation_date": 1528173396, "post_id": 50692098, "comment_id": 88393737, "body": "If you define <code>border-collapse: collapse; border: 1px solid black;</code> for the <code>table</code> element, you will get what you want and you can drop all border styles from <code>td</code>, <code>th</code> and <code>tr</code>."}, {"owner": {"reputation": 197, "user_id": 2471652, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/f5aea4c6610b3128cc1539bcc1f0dc7c?s=128&d=identicon&r=PG", "display_name": "Vinay", "link": "https://stackoverflow.com/users/2471652/vinay"}, "reply_to_user": {"reputation": 826, "user_id": 1402389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/599c4eaaff0f5d2c3fe5feca6560173b?s=128&d=identicon&r=PG", "display_name": "FBergo", "link": "https://stackoverflow.com/users/1402389/fbergo"}, "edited": false, "score": 0, "creation_date": 1528174316, "post_id": 50692098, "comment_id": 88394004, "body": "@FBergo Nope, did not work ... .changed removed all the other css and changed the table to &quot; $section_html.=qq(&lt;table style=&#39;border-collapse: collapse;border: 1px solid black;&#39;&gt;&lt;tr&gt;&lt;td&gt;Hello1&lt;/td&gt;&lt;td&gt;Hello2&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Hello&zwnj;&#8203;3&lt;/td&gt;&lt;td&gt;Hello4&lt;/td&zwnj;&#8203;&gt;&lt;/tr&gt;&lt;/table&gt;);&quot;"}, {"owner": {"reputation": 826, "user_id": 1402389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/599c4eaaff0f5d2c3fe5feca6560173b?s=128&d=identicon&r=PG", "display_name": "FBergo", "link": "https://stackoverflow.com/users/1402389/fbergo"}, "edited": false, "score": 0, "creation_date": 1528174501, "post_id": 50692098, "comment_id": 88394053, "body": "Check <a href=\"https://www.w3schools.com/cssref/tryit.asp?filename=trycss_border-collapse\" rel=\"nofollow noreferrer\">w3schools.com/cssref/tryit.asp?filename=trycss_border-collap&zwnj;&#8203;se</a>"}, {"owner": {"reputation": 197, "user_id": 2471652, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/f5aea4c6610b3128cc1539bcc1f0dc7c?s=128&d=identicon&r=PG", "display_name": "Vinay", "link": "https://stackoverflow.com/users/2471652/vinay"}, "reply_to_user": {"reputation": 826, "user_id": 1402389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/599c4eaaff0f5d2c3fe5feca6560173b?s=128&d=identicon&r=PG", "display_name": "FBergo", "link": "https://stackoverflow.com/users/1402389/fbergo"}, "edited": false, "score": 0, "creation_date": 1528174816, "post_id": 50692098, "comment_id": 88394135, "body": "Generated HTML Renders correctly on the browser, there is only a problem while rendering the HTML via outlook"}, {"owner": {"reputation": 826, "user_id": 1402389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/599c4eaaff0f5d2c3fe5feca6560173b?s=128&d=identicon&r=PG", "display_name": "FBergo", "link": "https://stackoverflow.com/users/1402389/fbergo"}, "edited": false, "score": 0, "creation_date": 1528175388, "post_id": 50692098, "comment_id": 88394304, "body": "Oh, take a look at this then: <a href=\"https://stackoverflow.com/questions/43462203/outlook-client-not-properly-rendering-table-borders\" title=\"outlook client not properly rendering table borders\">stackoverflow.com/questions/43462203/&hellip;</a> (outlook&#39;s HTML rendering has its quirks)"}], "answers": [{"tags": [], "owner": {"reputation": 5535, "user_id": 734487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f501cfc748d74a94687a9c30545599e?s=128&d=identicon&r=PG", "display_name": "Ted Goas", "link": "https://stackoverflow.com/users/734487/ted-goas"}, "is_accepted": true, "score": 0, "last_activity_date": 1528199456, "creation_date": 1528199456, "answer_id": 50699400, "question_id": 50692098, "link": "https://stackoverflow.com/questions/50692098/html-email-tr-tag-border-formatting-issue/50699400#50699400", "title": "HTML email &lt;tr&gt; tag border formatting issue", "body": "<p>Some email clients (and maybe browsers) don't allow us to directly style the <code>&lt;tr&gt;</code> tag. It's also safer to avoid relying on <code>:first-child</code> and <code>:last-child</code> pseudo selectors, as they are <a href=\"https://www.campaignmonitor.com/css/selectors/first-child/\" rel=\"nofollow noreferrer\">not well supported in email</a>.</p>\n\n<p>However you we can achieve your desired effect by styling the <code>&lt;table&gt;</code> and <code>&lt;td&gt;</code> tags:</p>\n\n<pre><code>table {\n    border-top: 1px solid #000;\n    border-right: 1px solid #000;\n}\ntable td,\ntable th {\n    border-left: 1px solid #000;\n    border-bottom: 1px solid #000;\n}\n</code></pre>\n\n<hr>\n\n<p>You can also have absolute control by inlining all CSS, which is still a good idea in HTML email.</p>\n"}, {"tags": [], "owner": {"reputation": 3757, "user_id": 7467428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nruPY.png?s=128&g=1", "display_name": "Syfer", "link": "https://stackoverflow.com/users/7467428/syfer"}, "is_accepted": false, "score": 1, "last_activity_date": 1528247412, "creation_date": 1528247412, "answer_id": 50710939, "question_id": 50692098, "link": "https://stackoverflow.com/questions/50692098/html-email-tr-tag-border-formatting-issue/50710939#50710939", "title": "HTML email &lt;tr&gt; tag border formatting issue", "body": "<p>This is going old school. Try this method as well. The difference from Ted's answer is, you have the whole table the same color and in his answer you can choose the border color for different <code>td's</code> or <code>th's</code>.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;table width=\"100%\" border=\"0\" cellspacing=\"1\" cellpadding=\"2\" bgcolor=\"#000000\"&gt;\r\n  &lt;tbody&gt;\r\n    &lt;tr&gt;\r\n      &lt;td width=\"50%\" bgcolor=\"#ffffff\"&gt;Hello1&lt;/td&gt;\r\n      &lt;td width=\"50%\" bgcolor=\"#ffffff\"&gt;Hello1&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;tr&gt;\r\n      &lt;td bgcolor=\"#ffffff\"&gt;Hello1&lt;/td&gt;\r\n      &lt;td bgcolor=\"#ffffff\"&gt;Hello1&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n  &lt;/tbody&gt;\r\n&lt;/table&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 197, "user_id": 2471652, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/f5aea4c6610b3128cc1539bcc1f0dc7c?s=128&d=identicon&r=PG", "display_name": "Vinay", "link": "https://stackoverflow.com/users/2471652/vinay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 50699400, "answer_count": 2, "score": 0, "last_activity_date": 1528247412, "creation_date": 1528173209, "question_id": 50692098, "link": "https://stackoverflow.com/questions/50692098/html-email-tr-tag-border-formatting-issue", "title": "HTML email &lt;tr&gt; tag border formatting issue", "body": "<p>I am trying to format the table to have rows separated by lines.Even tried using inline styles but nothing worked. Am I missing anything here? </p>\n\n<p>Expected output : <a href=\"https://i.stack.imgur.com/XWTZx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XWTZx.png\" alt=\"enter image description here\"></a></p>\n\n<p>Output I am getting : <a href=\"https://i.stack.imgur.com/hUTvt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hUTvt.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is the perl code that I am using to generate the HTML for the email : </p>\n\n<pre><code>my $section_html = '';\n$section_html.=qq(&lt;table&gt;&lt;tr style=\"border : 1px solid black;\"&gt;&lt;td&gt;Hello1&lt;/td&gt;&lt;td&gt;Hello2&lt;/td&gt;&lt;/tr&gt;&lt;tr style=\"border : 1px solid black;\"&gt;&lt;td&gt;Hello3&lt;/td&gt;&lt;td&gt;Hello4&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;);\n\nmy $email_html = &lt;&lt;EOF;\n&lt;html&gt;&lt;head&gt;&lt;style type=\"text/css\"&gt;\nbody, td, th, strong { font-family: Verdana; font-size: 11px; }\n\n\ntable {\n    border:none;\n    border-collapse: collapse;\n    text-align:center;\n}\n\ntable td {\n    border-left: 1px solid #000;\n    border-right: 1px solid #000;\n}\n\ntable th {\n    border-left: 1px solid #000;\n    border-right: 1px solid #000;\n}\n\ntable td:first-child {\n    border-left: none;\n    text-align:left;\n}\n\ntable  td:last-child {\n    border-right: none;\n}\n\ntable tr{\nborder-top : 1px solid #000;\n}\n\ntable tr{\nborder-top : 1px solid black;\n}\n\n\n&lt;/style&gt;&lt;/head&gt;\n&lt;body bgcolor=\"#ffffff\"&gt;\n&lt;span style=\"font-size: 20px\"&gt;Report Header&lt;/span&gt;$section_html&lt;/body&gt;&lt;/html&gt;\nEOF\n\n# Write to file\nopen(FILE, \"&gt;/var/weekly_report/\".\"report\".\"_\".\"testing\".\".html\") or die \"Unable to open file for writing: $!\\n\";\nprint FILE $email_html;\nclose(FILE);\n\n\n# Email weekly report\nmy $msg = MIME::Lite-&gt;new(\n    To         =&gt; 'XXXX@somedomain.com',\n    Subject =&gt; 'Report subject',\n    Type    =&gt; 'text/html',\n    Data    =&gt; $email_html);\n\n\n    $msg-&gt;send();\n</code></pre>\n"}, {"tags": ["linux", "shell", "perl"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 2, "creation_date": 1528144243, "post_id": 50688298, "comment_id": 88386360, "body": "No, the code you provided here does not provide any clues. Please test before asking that you&#39;re providing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> -- the shortest possible code that lets someone else see the problem firsthand when run without changes."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1528144323, "post_id": 50688298, "comment_id": 88386394, "body": "To be clear, your script can&#39;t possibly process the <code>| tee ...</code> itself; that operation is performed by the shell before the script is even started, so the perl script has no ability to change the <code>tee</code> invocation. It <b>does</b> have the ability to check whether its stdout and stderr are to a TTY or a FIFO and change its behavior on that basis, but none of the code you gave here does that check."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1528144409, "post_id": 50688298, "comment_id": 88386435, "body": "It&#39;s also notable that default buffering behavior can change based on the FIFO / TTY determination; see <a href=\"https://mywiki.wooledge.org/BashFAQ/009\" rel=\"nofollow noreferrer\">BashFAQ #9</a> for some introductory discussion."}], "answers": [{"comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1528147565, "post_id": 50688978, "comment_id": 88387673, "body": "<code>unbuffer</code> is a far worse solution -- to the point where I&#39;d tend to suggest not offering it with a simple Perl-native fix available. It requires Expect, and thus a TCL interpreter, to run -- so you&#39;re substantially expanding the dependency chain, impacting startup time and memory usage, &amp;c."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1528147635, "post_id": 50688978, "comment_id": 88387700, "body": "Re &quot;<i><code>unbuffer</code> is a far worse solution</i>&quot;, Why do you say that? And worse than what? I&#39;m not aware of any other similar tool."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1528147696, "post_id": 50688978, "comment_id": 88387731, "body": "That explanation is present in my comment -- try reloading? Short answer is the dependency chain; <code>unbuffer</code> is written in <code>expect</code>, so when you run a Perl script under <code>unbuffer</code>, you&#39;re launching two separate script interpreters where otherwise you&#39;d only need one."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1528147711, "post_id": 50688978, "comment_id": 88387734, "body": "You already offered an alternative yourself -- <code>$| = 1</code>. I&#39;m suggesting doubling down on it. :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1528147742, "post_id": 50688978, "comment_id": 88387748, "body": "That requires changing the program, and thus not an alternative."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1528147779, "post_id": 50688978, "comment_id": 88387761, "body": "...that said, in terms of &quot;and worse than what&quot;, see the <code>stdbuf</code> utility included on GNU platforms -- though it&#39;s only applicable if Perl doesn&#39;t change stdout&#39;s buffering settings in absence of explicit directives."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1528147885, "post_id": 50688978, "comment_id": 88387803, "body": "@Charles Duffy, <code>stdbuf -o 0 perl -e&#39;print &quot;a&quot;; sleep(2); print &quot;b&quot;&#39;</code> doesn&#39;t work."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1528147985, "post_id": 50688978, "comment_id": 88387837, "body": "<code>$| = 1; require &#39;other-script.pl&#39;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1528148089, "post_id": 50688978, "comment_id": 88387875, "body": "@Charles Duffy, Added a wrapper example."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1528172546, "post_id": 50688978, "comment_id": 88393504, "body": "For a more targeted hack, you could <code>LD_PRELOAD</code> a library that overrides <code>isatty(1)</code> only."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1528172804, "post_id": 50688978, "comment_id": 88393576, "body": "If you don&#39;t want to change the script, you could put <code>$| = 1;</code> in <code>AutoFlush.pm</code> and run it as <code>perl -MAutoFlush prog.pl ...</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1528193548, "post_id": 50688978, "comment_id": 88404106, "body": "@melpomene, or <code>PERL5OPT=-MAutoFlush prog.pl</code> (to avoid ignoring the shebang line)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1528161009, "last_edit_date": 1528161009, "creation_date": 1528147466, "answer_id": 50688978, "question_id": 50688298, "link": "https://stackoverflow.com/questions/50688298/how-to-redirect-this-perl-scripts-output-to-file/50688978#50688978", "title": "how to redirect this perl script&#39;s output to file?", "body": "<p>It's not hanging. You are \"suffering from buffering\". Like most programs, Perl's STDOUT is buffered by default. Like most programs, Perl's STDOUT is flushed by a newline when connected to a terminal, and block buffered otherwise. When STDOUT isn't connected to a terminal, you won't get any output until 4 KiB or 8 KiB of output is accumulated (depending on your version of Perl) or the program exits.</p>\n\n<p>You could add <code>$| = 1;</code> to the script to disable buffering for STDOUT. If your program ends with a true value or exits using <code>exit</code>, you can do that without changing the <code>.pl</code> file. Simply use the following wrapper:</p>\n\n<pre><code>perl -e'\n   $| = 1;\n   $0 = shift;\n   do($0);\n   my $e = $@ || $! || \"$0 didn\\x27t return a true value\\n\";\n   die($e) if $e;\n' -- prog args | ...\n</code></pre>\n\n<p>Or you could fool the program into thinking it's connected to a terminal using <code>unbuffer</code>.</p>\n\n<pre><code>unbuffer prog args | ...\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9893498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81fa832fafd306f4630a5050fc5844e7?s=128&d=identicon&r=PG&f=1", "display_name": "user26241", "link": "https://stackoverflow.com/users/9893498/user26241"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528161009, "creation_date": 1528144142, "last_edit_date": 1528147438, "question_id": 50688298, "link": "https://stackoverflow.com/questions/50688298/how-to-redirect-this-perl-scripts-output-to-file", "title": "how to redirect this perl script&#39;s output to file?", "body": "<p>I don't have much experience with perl, and would appreciate any/all feedback.... </p>\n\n<p>[Before I start: I do not have access/authority to change the existing perl scripts.]</p>\n\n<p>I run a couple perl scripts several times a day, but I would like to begin capturing their output in a file. </p>\n\n<p>The first perl script does not take any arguments, and I'm able to \"tee\" its output without issue:</p>\n\n<pre><code>/asdf/loc1/rebuild-stuff.pl 2&gt;&amp;1 | tee $mytmpfile1\n</code></pre>\n\n<p>The second perl script hangs with this command:</p>\n\n<pre><code>/asdf/loc1/create-site.pl --record=${newsite} 2&gt;&amp;1 | tee $mytmpfile2\n</code></pre>\n\n<p>FYI, the following command does NOT hang:</p>\n\n<pre><code>/asdf/loc1/create-site.pl --record=${newsite} 2&gt;&amp;1\n</code></pre>\n\n<p>I'm wondering if /asdf/loc1/create-site.pl is trying to process the <code>| tee $mytmpfile2</code> as additional command-line arguments? I'm not permitted to share the entire script, but here's the beginning of its main routine:</p>\n\n<pre><code>...\nmy $fullpath = $0;\n$0 =~ s%.*/%%;\n\n# Parse command-line options.\n...\nGetopt::Long::config ('no_ignore_case','bundling');\nGetOptions ('h|help'               =&gt; \\$help,\n            'n|dry-run|just-print' =&gt; \\$preview,\n            'q|quiet|no-mail'      =&gt; \\$quiet,\n            'r|record=s'           =&gt; \\$record,\n            'V|noverify'           =&gt; \\$skipverify,\n            'v|version'            =&gt; \\$version) or exit 1;\n...\n</code></pre>\n\n<p>Does the above code provide any clues? Other than modifying the script, do you have any tips for allowing me to capture its output in a file?</p>\n"}, {"tags": ["java", "perl", "enums"], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1528139620, "creation_date": 1528139620, "answer_id": 50687323, "question_id": 50684643, "link": "https://stackoverflow.com/questions/50684643/java-enum-in-perl-inline-java/50687323#50687323", "title": "Java Enum in Perl Inline Java", "body": "<p>The varargs argument is related to you.  The declaration <code>public int initializeExtractor(Language... languages) {...}</code> defines a method that expects an Array of <code>Language</code> objects, but provides syntactic sugar so that a Java call with a single <code>Language</code> argument is coerced into an Array with one element, but it looks like the <code>Inline::Java</code> package in Perl has not been sweetened this way:</p>\n\n<pre><code>package.Language is not a kind of [Lpackage.Language;\n</code></pre>\n\n<p>i.e., a single <code>package.Language</code> argument is not the same thing as a list of <code>package.Language</code> objects. You can explicitly provide the list from Perl but enclosing the argument in <code>[</code>brackets<code>]</code>.</p>\n\n<pre><code>$instance-&gt;initializeExtractor( [ $package::Language::ENGLISH ] );\n</code></pre>\n"}], "owner": {"reputation": 1386, "user_id": 1897839, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4c0e6f8798265cc958340ee121a018b7?s=128&d=identicon&r=PG", "display_name": "Carsten", "link": "https://stackoverflow.com/users/1897839/carsten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 1, "accepted_answer_id": 50687323, "answer_count": 1, "score": 3, "last_activity_date": 1528139620, "creation_date": 1528128226, "question_id": 50684643, "link": "https://stackoverflow.com/questions/50684643/java-enum-in-perl-inline-java", "title": "Java Enum in Perl Inline Java", "body": "<p>I use <a href=\"https://metacpan.org/pod/distribution/Inline-Java/lib/Inline/Java.pod\" rel=\"nofollow noreferrer\">Inline::Java</a> to call a Java library from my Perl code. However, there is one function call I cannot get to work because it requires an enum type as argument.</p>\n\n<p>These are my Java method signatures:</p>\n\n<pre><code>public class Initializer {\n  [...]     \n  public int initializeExtractor() {...}\n  public int initializeExtractor(Language... languages) {...}\n</code></pre>\n\n<p>I am trying to call the latter version in Perl:</p>\n\n<pre><code>use Inline (\n    Java =&gt; 'STUDY',\n\n    [...]\n    AUTOSTUDY =&gt; 1,\n    STUDY     =&gt; [\n               [...],\n               'package.Language'\n    ],\n\n    JNI     =&gt; 0,\n);\n\n[...]\n\nmy $instance = package::Initializer-&gt;new( $self-&gt;directory() );\n$instance-&gt;initializeExtractor($package::Language::ENGLISH);\n</code></pre>\n\n<p>This is the error message:</p>\n\n<pre><code>In method initializeExtractor of class package::Initializer: Can't find any signature that matches the arguments passed (package::Language=HASH(0x2328708)).\nAvailable signatures are:\n    initializeExtractor([Lpackage.Language;)\n        error was: package.Language is not a kind of [Lpackage.Language; at /usr/local/lib/perl5/site_perl/5.22.4/x86_64-linux-thread-multi/Inline/Java/Object.pm line 107.\n\n    initializeExtractor()\n        error was: Wrong number of arguments at /usr/local/lib/perl5/site_perl/5.22.4/x86_64-linux-thread-multi/Inline/Java/Object.pm line 107. at /.../PP.pm line 57.\n</code></pre>\n\n<p>Calling the first method (<code>initializeExtractor()</code>, without arguments) works such fine which is why I am pretty sure my 'studies' are fine.\nHowever, according to <a href=\"http://grokbase.com/t/perl/inline/078nfpcgtd/java-enum-support\" rel=\"nofollow noreferrer\">this thread</a>, I think I do access the Java enum in the right way.</p>\n\n<p>The fact that the Java method has a <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/language/varargs.html\" rel=\"nofollow noreferrer\">varargs</a> arguments seems not related to me, is it?</p>\n\n<p>The error message seems a bit misleading because it looks like the first reported available signature matches exactly the argument that I pass.</p>\n"}, {"tags": ["regex", "perl", "substitution"], "comments": [{"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1528127501, "post_id": 50684370, "comment_id": 88378539, "body": "Change $second =~ s/$regexp/$1/e;  to $second =~ s/$regexp/$vob/e;"}, {"owner": {"reputation": 348, "user_id": 3889627, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d642ced92e405ae0b451872229e45ff0?s=128&d=identicon&r=PG", "display_name": "Kevin K", "link": "https://stackoverflow.com/users/3889627/kevin-k"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1528127957, "post_id": 50684370, "comment_id": 88378790, "body": "@Andrey - I wanted my regexp to find any environment variable string and substitute it (I did not make that clear initially). I&#39;m going to have multiple variables to handle and I don&#39;t want to build the logic for each of them into code. You have given me the idea to handle this in a somewhat different way - look for <code>&#47;vob&#47;</code>, see if the VOB_FOO environment variable is set, and make the substitution if both are true."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1528128076, "post_id": 50684370, "comment_id": 88378847, "body": "Can you explain in more detail what your input looks like? I don&#39;t quite get where those environment variables are. Do you have literal <code>$ENV{...}</code> strings in your input files? Or are those part of the environment that the script runs in? Or both? Please <a href=\"https://stackoverflow.com/posts/50684370/edit\">edit</a> and add more details."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1528128345, "post_id": 50684370, "comment_id": 88378971, "body": "Note that <code>$regexp + &quot;\\n&quot;</code> etc. should be <code>$regexp . &quot;\\n&quot;</code>"}, {"owner": {"reputation": 348, "user_id": 3889627, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d642ced92e405ae0b451872229e45ff0?s=128&d=identicon&r=PG", "display_name": "Kevin K", "link": "https://stackoverflow.com/users/3889627/kevin-k"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528198534, "post_id": 50684370, "comment_id": 88407303, "body": "Thanks @Borodin! Jumping around between Python, Groovy, and Perl yesterday and got those messed up."}], "answers": [{"comments": [{"owner": {"reputation": 348, "user_id": 3889627, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d642ced92e405ae0b451872229e45ff0?s=128&d=identicon&r=PG", "display_name": "Kevin K", "link": "https://stackoverflow.com/users/3889627/kevin-k"}, "edited": false, "score": 0, "creation_date": 1528198617, "post_id": 50684630, "comment_id": 88407357, "body": "I like this solution - it worked for me and was quite elegant. I did modify my approach so that I would pull out the hash key, as the basis of my end solution. I will accept this as the answer."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1528128576, "last_edit_date": 1528128576, "creation_date": 1528128185, "answer_id": 50684630, "question_id": 50684370, "link": "https://stackoverflow.com/questions/50684370/perl-regex-substitution-evaluation-of-environment-variables/50684630#50684630", "title": "Perl Regex Substitution, Evaluation of Environment Variables", "body": "<p>I think all you need is this. Instead of extracting the whole expression, it takes the hash key and uses it on the real <code>%ENV</code></p>\n\n<p>I've added an alternation so that the hash key may be written with or without quotes, and may have leading or trailing spaces</p>\n\n<pre><code>$second =~ s/\\$ENV\\{\\s*(?|(\\w+)|'(\\w+)')\\s*\\}/$ENV{$1}/g\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 348, "user_id": 3889627, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d642ced92e405ae0b451872229e45ff0?s=128&d=identicon&r=PG", "display_name": "Kevin K", "link": "https://stackoverflow.com/users/3889627/kevin-k"}, "edited": false, "score": 0, "creation_date": 1528198407, "post_id": 50685428, "comment_id": 88407235, "body": "Thanks for both the explanation and an alternative. I saw multiple posts about security concerns with eval (and double-eval) on user-supplied code. Since the input file this runs on is a controlled resource, I was less worried about that, but being security conscious is always a good thing!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 348, "user_id": 3889627, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d642ced92e405ae0b451872229e45ff0?s=128&d=identicon&r=PG", "display_name": "Kevin K", "link": "https://stackoverflow.com/users/3889627/kevin-k"}, "edited": false, "score": 0, "creation_date": 1528218083, "post_id": 50685428, "comment_id": 88420019, "body": "Right, your question makes it clear that the resource is safe, or I wouldn&#39;t have mentioned <code>&#47;ee</code>.  However, code tends to evolve and just in general a good warning is due on this feature.  Note that <code>&#47;e</code> doesn&#39;t have any comparable security implications, as the parser never gets involved. It just evaluates code from the source file."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1598583000, "last_edit_date": 1598583000, "creation_date": 1528131406, "answer_id": 50685428, "question_id": 50684370, "link": "https://stackoverflow.com/questions/50684370/perl-regex-substitution-evaluation-of-environment-variables/50685428#50685428", "title": "Perl Regex Substitution, Evaluation of Environment Variables", "body": "<p>With a literal string captured the <code>$1</code> has mere characters (<code>'$'.'E'.'N'...</code>), which first need be made into a variable name, to then be evaluated. So, need two evals</p>\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $var = q(a_$ENV{SHELL}_b);   # like $ENV{'VOB'} read from a file\n\nif ( $var =~ s/(\\$ENV\\{.*?\\})/$1/ee ) {  # WARNING: security?\n    say $var\n}\n</code></pre>\n<p>Since <code>}</code> isn't ever a part of the environment variable name I simply match everything up to <code>}</code> using the non-greedy <code>.*?</code>. See <a href=\"https://stackoverflow.com/a/6082338/4653379\">this post</a> for a detailed explanation of <code>ee</code>.</p>\n<p>However, note that <code>ee</code> comes with serious security considerations, as it will turn the given string into a variable<sup>\u2020</sup> and <a href=\"https://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\">eval</a> it, no questions asked. It also doesn't work in taint mode.  So use carefully and only in tightly controlled circumstances.</p>\n<p>A safer way is to capture the environment variable name itself and then normally have <code>%ENV</code> of it evaluated in the replacement, as <a href=\"https://stackoverflow.com/a/50684630/4653379\">Borodin's answer</a> suggests</p>\n<pre><code>$second =~ s/\\$ENV(\\{(.*?)\\}/$ENV{$1}/g;\n</code></pre>\n<p>Either way, also note that you don't need to first match then substitute.</p>\n<hr />\n<p><sup>\u2020</sup> The danger is that if the string happens to contain any <em>code</em> it is blindly <code>eval</code>-ed</p>\n"}], "owner": {"reputation": 348, "user_id": 3889627, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d642ced92e405ae0b451872229e45ff0?s=128&d=identicon&r=PG", "display_name": "Kevin K", "link": "https://stackoverflow.com/users/3889627/kevin-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 0, "accepted_answer_id": 50684630, "answer_count": 2, "score": 3, "last_activity_date": 1598583000, "creation_date": 1528127274, "last_edit_date": 1528128429, "question_id": 50684370, "link": "https://stackoverflow.com/questions/50684370/perl-regex-substitution-evaluation-of-environment-variables", "title": "Perl Regex Substitution, Evaluation of Environment Variables", "body": "<p>I am attempting to use Perl's Regular Expression Substitution with evaluation to help make some config files more dynamic during a Clearcase -> Git migration. The Clearcase system is highly dependent on the /vob/ directory, but we need to make this more dynamic for our Jenkins builds to be happy. I'm trying to reduce the likelihood that I break the Clearcase builds while migrating over. </p>\n\n<p>I have a configuration file that is a text file with a path per line:</p>\n\n<pre><code>/vob/config/file1\n/vob/config/file2\n/vob/config/file3\n</code></pre>\n\n<p>This configuration does some additional stuff with those configuration files. The orchestration of that \"stuff\" is managed by a Perl script. I would like to have a few environment variables (\"VOB_FOO\") that I can override when I run the script.</p>\n\n<p>I'm a complete novice with Perl, so what I thought was to use the Perl environment variable syntax, do a regex on it and evaluate the substitution results in-line as I'm processing the file.</p>\n\n<p>I want my new config file to have explicit $ENV{'VOB_FOO'} entries in the file, so the file would become:</p>\n\n<pre><code>$ENV{'VOB_FOO'}/config/file1   -&gt;    /home/me/foo/config/file1\n$ENV{'VOB_FOO'}/config/file2   -&gt;    /home/me/foo/config/file2\n$ENV{'VOB_FOO'}/config/file3   -&gt;    /home/me/foo/config/file3\n</code></pre>\n\n<p>And the resulting regular expression substitution+evaluation would turn into (if VOB_FOO=/home/me/foo) :</p>\n\n<pre><code>$ENV{'VOB_FOO'}/config/file1   -&gt;    /home/me/foo/config/file1\n$ENV{'VOB_FOO'}/config/file2   -&gt;    /home/me/foo/config/file2\n$ENV{'VOB_FOO'}/config/file3   -&gt;    /home/me/foo/config/file3\n</code></pre>\n\n<p>My regular expression matches fine and it appears the substitution is working, but the evaluation part of the substitution is not, and I could use some assistance here. I get a successful match, but the substitution comes off as:</p>\n\n<pre><code>$ENV{'VOB_FOO'}/config/file1   -&gt;    $ENV('VOB_FOO'}/config/file1\n$ENV{'VOB_FOO'}/config/file2   -&gt;    $ENV('VOB_FOO'}/config/file2\n$ENV{'VOB_FOO'}/config/file3   -&gt;    $ENV('VOB_FOO'}/config/file3\n</code></pre>\n\n<p>Is there any caveat to this evaluation or some way I can make this work correctly? Here is my code:</p>\n\n<pre><code>## See if we need to substitute an environment variable (e.g., is there a $ENV{} anywhere?)\n## s - substitute through regular expressions (s/foo/bar/e)\n## e modifier evaluates replacement as perl statement\n\n{\n    use re 'debugcolor';\n\n    # this is for debugging only - I want to substitute \n    # grab the $ENV('VOB') string from the file and substitute\n    # I may have multiple environment variables that I have to \n    # contend with. \n    my $vob = $ENV{'VOB'};  \n    print $vob; \n    print \"\\n\";\n\n    my $regexp = qr/(\\$ENV\\{[\\'][\\w]*[\\']\\})/;\n\n    if( $second =~ m/$regexp/ )\n    {\n        print \"Found the regexp; attempting substitution.\\n\";\n        $second =~ s/$regexp/$1/e;  \n    }\n    else\n    {\n        print $regexp + \"\\n\";\n        print $second + \"\\n\";\n        print \"Did not find the regexp\\n\";\n    }\n}\n</code></pre>\n\n<p>I am also open for critique or suggestions on a better way to do this - I'm not tied to this approach or code while I'm working through making this happen.</p>\n"}, {"tags": ["perl", "oop", "moose", "moo"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1528124894, "post_id": 50683525, "comment_id": 88376920, "body": "<a href=\"https://perldoc.perl.org/perlsub.html#Autoloading\" rel=\"nofollow noreferrer\">Autoload</a>?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1528125067, "post_id": 50683525, "comment_id": 88377056, "body": "There&#39;s no <code>$fb</code> variable in your example. Please <a href=\"https://stackoverflow.com/posts/50683525/edit\">edit</a> your question and provide working code, or in your case code that produces the error you are talking about, not something else."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1528125223, "post_id": 50683525, "comment_id": 88377161, "body": "@choroba you&#39;d be able to install a method via autoload, but not really a full-blown attribute. If the attribute is already defined in the class, we could circumvent the predicate, but I&#39;m not sure what good that would do. We could of course at runtime modify the class via the meta layer and add an attribute if this is done, without type or anything, as a read-write attribute, but that would then leak into every object of that class. Doesn&#39;t sound like a good idea."}, {"owner": {"reputation": 11, "user_id": 1935866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7713Z.png?s=128&g=1", "display_name": "KianMeng Ang", "link": "https://stackoverflow.com/users/1935866/kianmeng-ang"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1528204746, "post_id": 50683525, "comment_id": 88411425, "body": "@simbabque Good catch. Sample code updated."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528160811, "post_id": 50684012, "comment_id": 88391151, "body": "Why do you create a new class? Also, <code>goto</code> should be used to hide AUTOLOAD from the call stack."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528184003, "post_id": 50684012, "comment_id": 88398386, "body": "@ikegami: Because I don&#39;t want to change the behaviour of the original class."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528193453, "post_id": 50684012, "comment_id": 88404047, "body": "Also, I don&#39;t get the output you claim, but an endless chain of <code>Use of uninitialized value $new_class_name:: in concatenation (.) or string at a.pl line 19.</code>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528197023, "post_id": 50684012, "comment_id": 88406405, "body": "@ikegami: What Perl and Moose version? I&#39;m on 5.18.2 with Moose 2.2009."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528197456, "post_id": 50684012, "comment_id": 88406649, "body": "@ikegami: Also, I previously haven&#39;t noticed the OP wanted to change the behaviour of the whole class. I simplified the reply."}, {"owner": {"reputation": 11, "user_id": 1935866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7713Z.png?s=128&g=1", "display_name": "KianMeng Ang", "link": "https://stackoverflow.com/users/1935866/kianmeng-ang"}, "edited": false, "score": 0, "creation_date": 1528205227, "post_id": 50684012, "comment_id": 88411839, "body": "@choroba Thanks for the sample code. Appreciate it! The <i>WHY</i> part is that I want to create a generic and dynamic Moo (not sure if possible) or Moose class for JSON data or JSON schema (if exists) for different web service endpoints. I&#39;ve searched CPAN and googled around but can&#39;t find any Perl module that do so."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1528197609, "last_edit_date": 1528197609, "creation_date": 1528126064, "answer_id": 50684012, "question_id": 50683525, "link": "https://stackoverflow.com/questions/50683525/how-to-we-dynamically-create-missing-attributes-in-moo-or-moose/50684012#50684012", "title": "How to we dynamically create missing attributes in Moo or Moose?", "body": "<p>It's possible using <a href=\"https://perldoc.perl.org/perlsub.html#Autoloading\" rel=\"nofollow noreferrer\">AUTOLOAD</a> and metaprogramming, the question remains <strong>Why</strong>.</p>\n\n<p>There might be nicer ways using parameterized roles, but I just wanted to quickly show how to do it. I would reject such code in a review (I'd expect at least a comment explaining why autoloading is needed).</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\n{   package MyObj;\n    use Moose;\n\n    sub AUTOLOAD {\n        my ($self) = @_;\n        ( my $method = our $AUTOLOAD ) =~ s/.*:://;\n        (ref $self)-&gt;meta-&gt;add_attribute($method, is =&gt; 'rw');\n        goto &amp;$method\n    }\n}\n\nsay 'MyObj'-&gt;can('lalala');  # No, it can't.\n\nmy $o = 'MyObj'-&gt;new;\n$o-&gt;lalala(12);              # Attribute created.\nsay $o-&gt;lalala;              # 12.\n</code></pre>\n\n<p><em>Update:</em> Previously, my code was more complex, as it replied to @simbabque's comment to the question: it showed how to add the attribute to an instance, not the whole class.</p>\n"}], "owner": {"reputation": 11, "user_id": 1935866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7713Z.png?s=128&g=1", "display_name": "KianMeng Ang", "link": "https://stackoverflow.com/users/1935866/kianmeng-ang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1528204696, "creation_date": 1528124564, "last_edit_date": 1528204696, "question_id": 50683525, "link": "https://stackoverflow.com/questions/50683525/how-to-we-dynamically-create-missing-attributes-in-moo-or-moose", "title": "How to we dynamically create missing attributes in Moo or Moose?", "body": "<p>We have a sample code like below. Is it possible to to capture all missing attributes invoked in package FooBar and create it dynamically? This is something like PHP's <a href=\"http://php.net/manual/en/language.oop5.overloading.php#object.call\" rel=\"nofollow noreferrer\">__call</a>.</p>\n\n<p>test.pl</p>\n\n<pre><code>package Person;\nuse feature qw(say);\nuse Moo;\n\nhas name =&gt; (is =&gt; \"ro\");\n\nmy $p = Person-&gt;new(name =&gt; \"John\");\n\nsay $p-&gt;name;\n\n# The missing attribute method will be dynamically created when \n# invoked even it's not declared in Person.\nsay $p-&gt;lalala;\n</code></pre>\n\n<hr>\n\n<pre><code>$ perl test.pl\nJohn\nCan't locate object method \"lalala\" via package \"Test\" at test.pl line 13.\n</code></pre>\n"}, {"tags": ["perl", "awk"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1528114804, "post_id": 50680427, "comment_id": 88370273, "body": "Why are you inlining <code>awk</code> into perl anyway?"}, {"owner": {"reputation": 11, "user_id": 9838806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d90fcb4c08c397d04bac6ba7203b6ec?s=128&d=identicon&r=PG&f=1", "display_name": "Khaled", "link": "https://stackoverflow.com/users/9838806/khaled"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1528115006, "post_id": 50680427, "comment_id": 88370415, "body": "@RavinderSingh13 It threw an error message when I declared $s with &quot;chomp $s&quot;  <code>Can&#39;t modify scalar chomp in scalar assignment at .&#47;test.pl line 7, near &quot;</code>awk -F &#39;,&#39; &#39;\\$1==500 {print \\$2}&#39; STD<code>;&quot; Execution of .&#47;test.pl aborted due to compilation errors.</code>"}, {"owner": {"reputation": 11, "user_id": 9838806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d90fcb4c08c397d04bac6ba7203b6ec?s=128&d=identicon&r=PG&f=1", "display_name": "Khaled", "link": "https://stackoverflow.com/users/9838806/khaled"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1528115097, "post_id": 50680427, "comment_id": 88370472, "body": "@Sobrique  I&#39;m not an expert in Perl, so I don&#39;t know if Perl has a built-in function which can open a remote file, search it, find a string, then write it into a variable."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528117395, "post_id": 50680427, "comment_id": 88371910, "body": "You&#39;ve described your text file <code>STD</code> as an <i>external file</i>, a <i>local file</i>, and a <i>remote file</i>. What do you mean by all these things? Surely they can&#39;t all be true at once? Why isn&#39;t it just a file?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528117563, "post_id": 50680427, "comment_id": 88372038, "body": "<i>&quot;I don&#39;t know if Perl has a built-in function which can open a remote file, search it, find a string, then write it into a variable&quot;</i> Well no, there is no built-in function that can do all those things at once, but Perl can do anything that awk or sed can do plus a lot more. Why are you using Perl at all if you don&#39;t like it?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1528117641, "post_id": 50680427, "comment_id": 88372090, "body": "What do you kean by <i>&quot;the variable is also being reserved with a long string&quot;</i>?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9838806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d90fcb4c08c397d04bac6ba7203b6ec?s=128&d=identicon&r=PG&f=1", "display_name": "Khaled", "link": "https://stackoverflow.com/users/9838806/khaled"}, "edited": false, "score": 0, "creation_date": 1528116138, "post_id": 50680533, "comment_id": 88371147, "body": "Thank you for your feedback Sobrique.  Regardless whether I use &quot;say&quot; or &quot;print&quot; the variable is meant to be written into an external file, and it&#39;s still shown with whitespace and new line.  Thanks for posting the suggested script. It doesn&#39;t work! As in it prints empty space."}, {"owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 0, "creation_date": 1528117455, "post_id": 50680533, "comment_id": 88371965, "body": "The <code>split</code> needs to be <code>split &#47;,&#47;</code> or similar"}, {"owner": {"reputation": 11, "user_id": 9838806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d90fcb4c08c397d04bac6ba7203b6ec?s=128&d=identicon&r=PG&f=1", "display_name": "Khaled", "link": "https://stackoverflow.com/users/9838806/khaled"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528170810, "post_id": 50680533, "comment_id": 88393078, "body": "@Borodin, this worked like a charm! Thank you.  Now sorry for being such a pain, why is the variable only locally signficant inside the loop? Even if I declare the &quot;fields&quot; variable outside the while loop, I cant get it working.  I would like to use the value of the variable outside the loop.   Thanks."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1528117794, "last_edit_date": 1528117794, "creation_date": 1528114972, "answer_id": 50680533, "question_id": 50680427, "link": "https://stackoverflow.com/questions/50680427/awks-output-in-perl-doesnt-seem-to-be-working-properly/50680533#50680533", "title": "Awk&#39;s output in Perl doesn&#39;t seem to be working properly", "body": "<p>I'd suggest that you're going down a dirty road by trying to inline <code>awk</code> into <code>perl</code> in the first place. Why not instead:</p>\n\n<pre><code>open ( my $input, '&lt;', 'STD' ) or die $!;\nwhile ( &lt;$input&gt; ) {\n    s/\\s+\\z//;\n    my @fields = split /,/; \n    print $fields[1], \"\\n\" if $fields[0] == 500; \n} \n</code></pre>\n\n<p>But the likely problem is that you're not handling linefeeds, and <code>say</code> is adding an extra one. Try using <code>print</code> instead, or <code>chomp</code> on the resultant string. </p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1528117928, "post_id": 50681439, "comment_id": 88372290, "body": "I&#39;m not sure that shelling out to perl is preferable to shelling out to awk!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1528118454, "post_id": 50681439, "comment_id": 88372673, "body": "But the OP says that they <i>&quot;need to use the variable generated by awk &quot;i.e. the $s variable)&quot;</i> so this is just part of a Perl program. It sounds like they should be reading the file into a hash instead."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 2, "creation_date": 1528118598, "post_id": 50681439, "comment_id": 88372758, "body": "Why are you <code>chomp</code>ing together with <code>-l</code>?"}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 1, "creation_date": 1528118815, "post_id": 50681439, "comment_id": 88372935, "body": "The chomp removes the newline which doesn&#39;t belong to the last record but is merely a line separator. The -l adds a newline to whatever column you decide to print (even if it is not the last column). This is the last paragraph in the answer."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 1, "last_activity_date": 1528118204, "last_edit_date": 1528118204, "creation_date": 1528117782, "answer_id": 50681439, "question_id": 50680427, "link": "https://stackoverflow.com/questions/50680427/awks-output-in-perl-doesnt-seem-to-be-working-properly/50681439#50681439", "title": "Awk&#39;s output in Perl doesn&#39;t seem to be working properly", "body": "<p><em>perl</em> can do many of the things that <em>awk</em> can do. Here's something similar that replaces your entire Perl program:</p>\n\n<pre><code>$ perl -naF, -le 'chomp; print $F[1] if $F[0]==500' STD\n850\n</code></pre>\n\n<p>The <code>-n</code> creates a <code>while</code> loop around your argument to <code>-e</code>. </p>\n\n<p>The <code>-a</code> splits up each line into <code>@F</code> and <code>-F</code> lets you specify the separator. Since you want to separate the fields on a comma you use <code>-F,</code>.</p>\n\n<p>The <code>-l</code> adds a newline each time you call <code>print</code>. </p>\n\n<p>The <code>-e</code> argument is the program to run (with the added <code>while</code> from <code>-n</code>). The <code>chomp</code> removes the newline from the output. You get a newline in your output because you happen to use the last field in the line. The <code>-l</code> adds a newline when you print; that's important when you want to extract a field in the middle of the line.</p>\n"}, {"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 0, "last_activity_date": 1528118538, "creation_date": 1528118538, "answer_id": 50681674, "question_id": 50680427, "link": "https://stackoverflow.com/questions/50680427/awks-output-in-perl-doesnt-seem-to-be-working-properly/50681674#50681674", "title": "Awk&#39;s output in Perl doesn&#39;t seem to be working properly", "body": "<p>The reason you get 2 newlines:</p>\n\n<ol>\n<li>the backtick operator does not remove the trailing newline from the awk output. <code>$s</code> contains <code>\"850\\n\"</code></li>\n<li>the <code>say</code> function appends a newline to the string. You have <code>say \"850\\n\"</code> which is the same as <code>print \"850\\n\\n\"</code></li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 9838806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d90fcb4c08c397d04bac6ba7203b6ec?s=128&d=identicon&r=PG&f=1", "display_name": "Khaled", "link": "https://stackoverflow.com/users/9838806/khaled"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1528118538, "creation_date": 1528114664, "question_id": 50680427, "link": "https://stackoverflow.com/questions/50680427/awks-output-in-perl-doesnt-seem-to-be-working-properly", "title": "Awk&#39;s output in Perl doesn&#39;t seem to be working properly", "body": "<p>I'm writing a simple Perl script which is meant to output the second column of an external text file (columns one and two are separated by a comma).</p>\n\n<p>I'm using AWK because I'm familiar with it.</p>\n\n<p>This is my script:</p>\n\n<pre><code>use v5.10;\nuse File::Copy;\nuse POSIX;\n\n$s = `awk -F ',' '\\$1==500 {print \\$2}' STD`;\nsay $s;\n</code></pre>\n\n<p>The contents of the local file \"STD\" is:</p>\n\n<pre><code>CIR,BS  \n60,90\n70,100\n80,120\n90,130\n100,175\n150,120\n200,260\n300,500\n400,600\n500,850\n600,900\n</code></pre>\n\n<p>My output is very strange and it prints out the desired \"850\" but it also prints a trailer of the line and a new line too!</p>\n\n<pre><code>ka@man01:$ ./test.pl \n850\n\nka@man01:$\n</code></pre>\n\n<p>The problem isn't just printing. I need to use the variable generated by awk \"i.e. the $s variable) but the variable is also being reserved with a long string and a new line!</p>\n\n<p>Could you guys help?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["perl", "file"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1528112520, "post_id": 50679670, "comment_id": 88368897, "body": "We need more detail really to give an answer. LIke some code, or sample data, desired output. But I&#39;d suggest the place to start looking is search-and-replace regular expressions, opening and reading a file, and using a search-and-replace hash."}, {"owner": {"reputation": 81, "user_id": 9789745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434a1a8c39bf0352ce5ef15310b42f7e?s=128&d=identicon&r=PG&f=1", "display_name": "Katy", "link": "https://stackoverflow.com/users/9789745/katy"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1528113884, "post_id": 50679670, "comment_id": 88369744, "body": "I have assez my code, i hope it is clear enough! I have an error : readline on unopened filehandle.. maybe because I can not read and write in the same time?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1528114396, "post_id": 50679670, "comment_id": 88370039, "body": "I&#39;d suggest adding the error you&#39;re encountering into your question."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1528114466, "post_id": 50679670, "comment_id": 88370091, "body": "Sample input and output maybe?"}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 9789745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434a1a8c39bf0352ce5ef15310b42f7e?s=128&d=identicon&r=PG&f=1", "display_name": "Katy", "link": "https://stackoverflow.com/users/9789745/katy"}, "edited": false, "score": 0, "creation_date": 1528119084, "post_id": 50680464, "comment_id": 88373118, "body": "Thanks a lot ! But I have one last question. I have a lot of datafiles and my variables  $var1 and $var2 change a lot, can I shift my variables in my function through the hash?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 81, "user_id": 9789745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434a1a8c39bf0352ce5ef15310b42f7e?s=128&d=identicon&r=PG&f=1", "display_name": "Katy", "link": "https://stackoverflow.com/users/9789745/katy"}, "edited": false, "score": 0, "creation_date": 1528123411, "post_id": 50680464, "comment_id": 88376021, "body": "Yeah, sure. You just need to look at <i>how</i> you&#39;re wanting to change them. The <code>$replace{$1}</code> lookup happens at run time, so you can even dynamically change them as you go."}, {"owner": {"reputation": 81, "user_id": 9789745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434a1a8c39bf0352ce5ef15310b42f7e?s=128&d=identicon&r=PG&f=1", "display_name": "Katy", "link": "https://stackoverflow.com/users/9789745/katy"}, "edited": false, "score": 0, "creation_date": 1528125601, "post_id": 50680464, "comment_id": 88377384, "body": "Yeah so happy it works perfectly ! Thanks for your help !"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 4, "last_activity_date": 1528114769, "creation_date": 1528114769, "answer_id": 50680464, "question_id": 50679670, "link": "https://stackoverflow.com/questions/50679670/copy-a-file-to-another-while-replacing-variables-in-perl/50680464#50680464", "title": "Copy a file to another while replacing variables in Perl?", "body": "<p>OK, first off - turn on <code>use strict;</code> and <code>use warnings;</code>. \nThere's a couple of syntax errors in your code.</p>\n\n<p>In particular, <code>FH</code> - which you are opening - and <code>$FH</code> which you are reading are NOT the same thing, and even if they were, ... you can't read/write from the same file concurrently (at least, not like that). </p>\n\n<p>Also - <code>My</code> is not the same as <code>my</code>, so that'll break too. </p>\n\n<p>You probably don't to declare the sub like that - you're prototyping, and that doesn't mean what you think it means, because perl prototypes aren't the same as other languages. </p>\n\n<p>To do what you want - e.g. replace some 'placeholders' looks a bit like this:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;   \n\n#define replacement patterns in a hash. (see 'perldoc hash')\n\nmy %replace = (\n  '$var1' =&gt; \"a word here\",\n  '$var2' =&gt; \"another different word here\", \n);\n\n#compile a regular expression that looks for the placeholders.\n#note - we need \"quotemeta\" here because your search patterns include $\nmy $search = join \"|\", map { quotemeta } keys %replace;\n   $search = qr/($search)/;\n\nprint \"Using regex for matching:\",$search,\"\\n\";\n\n\n#iterate STDIN (or file specified on command line) line by line\nwhile ( &lt;&gt; ) { \n   #apply pattern matches to current line\n   s/$search/$replace{$1}/g; \n   #print current line\n   print;\n}\n</code></pre>\n\n<p>We use <code>&lt;&gt;</code> in the above, because it's one of the easier options for file handling - it means your script works like <code>sed</code>/<code>awk</code> or <code>grep</code> in that you can specify filenames on the command line, or just pipe files to it. </p>\n\n<p>However if you want to open-write you can:</p>\n\n<pre><code>open ( my $input, '&lt;', 'filename_here' ) or die $!;\nopen ( my $output, '&gt;', 'output_filename' ) or die $!;\n\nselect $output; #set output source for print location\nwhile ( &lt;$input&gt; ) {\n   #apply pattern matches to current line\n   s/$search/$replace{$1}/g; \n   #print current line\n   print;\n}   \n</code></pre>\n\n<p>This will read your input file line by line, and write the (transformed) output to the new file. </p>\n"}, {"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1528120817, "post_id": 50681648, "comment_id": 88374319, "body": "You never use <code>my $var1 = &quot;cup&quot;;</code> and <code>my $var2 = &quot;tea&quot;;</code>. Maybe you intended your hash <code>%replace</code> to look like <code>&#39;$var1&#39; =&gt; $var1</code> ?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1528130746, "post_id": 50681648, "comment_id": 88380146, "body": "You should lose the trailing brackets off <code>myfunction()</code> - that&#39;s a prototype, and they&#39;re complicated. (And probably don&#39;t do what you want)."}], "tags": [], "owner": {"reputation": 81, "user_id": 9789745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434a1a8c39bf0352ce5ef15310b42f7e?s=128&d=identicon&r=PG&f=1", "display_name": "Katy", "link": "https://stackoverflow.com/users/9789745/katy"}, "is_accepted": false, "score": 3, "last_activity_date": 1528120026, "last_edit_date": 1528120026, "creation_date": 1528118452, "answer_id": 50681648, "question_id": 50679670, "link": "https://stackoverflow.com/questions/50679670/copy-a-file-to-another-while-replacing-variables-in-perl/50681648#50681648", "title": "Copy a file to another while replacing variables in Perl?", "body": "<p>This solution works fine for me: </p>\n\n<pre><code>use strict;\nuse warnings;\n\nsub myfunction () \n{\n  open ( my $input, '&lt;', \u2018file_name\u2019 ) or die $!;\n  open ( my $output, '&gt;', \u2018output_file_name\u2019 ) or die $!; \n\n  my $var1 = \"cup\";\n  my $var2 = \"tea\";\n\n  my  %replace = (\n   '$var1' =&gt; \"round\" ;\n   '$var2' =&gt; \"sweet\",\n  );\n\n  my $search = join \"|\", map { quotemeta } keys %replace;\n  $search = qr/($search)/;\n\n  print \"Using regex for matching:\",$search,\"\\n\";\n\n  while ( &lt;$input&gt; )\n  {\n    s/$search/$replace{$1}/g; \n    print;\n  }    \n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 9789745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434a1a8c39bf0352ce5ef15310b42f7e?s=128&d=identicon&r=PG&f=1", "display_name": "Katy", "link": "https://stackoverflow.com/users/9789745/katy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1557088743, "creation_date": 1528112167, "last_edit_date": 1557088743, "question_id": 50679670, "link": "https://stackoverflow.com/questions/50679670/copy-a-file-to-another-while-replacing-variables-in-perl", "title": "Copy a file to another while replacing variables in Perl?", "body": "<p>I have a problem I am new in Perl and I couldn\u2019t find an answer to my problem. </p>\n\n<p>I have to create a file, copy the content of an other file in this new created file. But the copied file have some variables <code>$var1</code> and <code>$var2</code>, that I have to replace with the content (interpolate) of those variables in the new file.</p>\n\n<p>I really don\u2019t know how to create, open a file, copy and interpolate in the same time...</p>\n\n<p>Any ideas ? </p>\n\n<hr>\n\n<p>Here is my code :</p>\n\n<pre><code>sub my_function ($)\n{\n My $var = shift ;\n open (FH, \u2018&gt;\u2019, \u00ab file1 \u00bb) ; #this file is created because it doesn\u2019t exist. \n\n Copy($file_to_copy, $FH) ;\n  while (my $line = &lt;$FH&gt;)\n  {\n    if ($line =~ /(Substituethis)/   \n    {\n      $line =~ s/$1/$var/g;\n      print $FH $line;\n    }\n  }\n  close $FH;\n}\n</code></pre>\n"}, {"tags": ["json", "perl", "null", "undef"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1528107162, "post_id": 50678131, "comment_id": 88365770, "body": "Why are you building your own JSON string? You&#39;ve got the <code>JSON</code> module loaded. What are you using it for? Build up a new Perl data structure step by step, then convert it with the JSON module."}, {"owner": {"reputation": 3, "user_id": 8258290, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ewkYPUkRXOM/AAAAAAAAAAI/AAAAAAAAAAs/byZNNnofqXw/photo.jpg?sz=128", "display_name": "Carlo Viola", "link": "https://stackoverflow.com/users/8258290/carlo-viola"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1528107491, "post_id": 50678131, "comment_id": 88365947, "body": "i can only modify this script, cannot rework it all .. i know it was better to use the conversion function, but i do not create the script originally"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1528107585, "post_id": 50678131, "comment_id": 88365994, "body": "Where&#39;s the difference between changing a few lines to make it even more complex and changing more lines to make it simpler?"}, {"owner": {"reputation": 3, "user_id": 8258290, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ewkYPUkRXOM/AAAAAAAAAAI/AAAAAAAAAAs/byZNNnofqXw/photo.jpg?sz=128", "display_name": "Carlo Viola", "link": "https://stackoverflow.com/users/8258290/carlo-viola"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1528107731, "post_id": 50678131, "comment_id": 88366080, "body": "I was asked to modify this without changing it radically ... i am not so able in using perl and do not have so much time so cannot read how to do all the changes to make it simpler ..."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1528108582, "post_id": 50678131, "comment_id": 88366601, "body": "The code is already of low quality. Colleagues who insist on making it worse are not great. I would write some tests for it, and then refactor completely. You&#39;ll probably end up with less code that is more readable."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1528114915, "last_edit_date": 1528114915, "creation_date": 1528108431, "answer_id": 50678572, "question_id": 50678131, "link": "https://stackoverflow.com/questions/50678131/remove-null-fields-in-json-string-in-perl/50678572#50678572", "title": "Remove null fields in JSON String in Perl", "body": "<p>The smart way to do this would be to use the <a href=\"https://metacpan.org/pod/JSON\" rel=\"nofollow noreferrer\">JSON module</a> to convert your data structure to JSON. I would either build a new Perl data structure up step by step</p>\n\n<pre><code>my $to_json;\n\n$to_json-&gt;{foo} = $p-&gt;{foo};\n\nif ($p-&gt;{bar}) {\n    $to_json-&gt;{baz} = $p-&gt;{baz};\n}\n</code></pre>\n\n<p>or use inline operations with <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\"><code>map</code></a> and <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\"><code>grep</code></a>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse JSON;\n\nmy $p = {\n    BAND_ATTEN_DN1 =&gt; 1,\n    BAND_ATTEN_DN2 =&gt; 2,\n    BAND_ATTEN_DN3 =&gt; 3,\n    BAND_ATTEN_DN4 =&gt; undef,\n};\n\nmy $to_json = {\n    line_attenuaion =&gt; {\n        down_values =&gt; [\n            grep defined, map { $p-&gt;{$_} } \n                qw/BAND_ATTEN_DN1 BAND_ATTEN_DN2 BAND_ATTEN_DN3 BAND_ATTEN_DN4/,\n        ],\n        hashref_slice =&gt; [\n            grep defined,\n                @{$p}{qw/BAND_ATTEN_DN1 BAND_ATTEN_DN2 BAND_ATTEN_DN3 BAND_ATTEN_DN4/},\n        ],\n    },\n    # ...\n};\n\nprint to_json $to_json;\n</code></pre>\n\n<hr>\n\n<p>However, you say you cannot make large modifications. You'll have to split up the code that outputs the JSON instead. This is going to produce even uglier code and <strong>I strongly recommend not to do it this way</strong>, for the sake of maintenance.</p>\n\n<pre><code># HERE BE DRAGONS...\n\nmy $json_string = \"{\n    \\\"attainable_rate\\\": {\n        \\\"down_value\\\": $p-&gt;{ATTAINABLE_DN},\n        \\\"up_value\\\": $p-&gt;{ATTAINABLE_UP}\n    },\n    \\\"line_attenuation\\\": {\n        \\\"down_values\\\": [\n            $p-&gt;{BAND_ATTEN_DN1},\n            $p-&gt;{BAND_ATTEN_DN2},\n            $p-&gt;{BAND_ATTEN_DN3}\";\nif ($p-&gt;{BAND_ATTEN_DN4}) {\n    $json_string .= \",\n            $p-&gt;{BAND_ATTEN_DN4}\";\n}\n$json_string .= \"\n        ]\n    }\n}\n\";\n</code></pre>\n\n<p>If you do this, then at least get rid of all the escaping by converting your double quotes <code>\"\"</code> for the string to either the <a href=\"http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow noreferrer\"><code>qq</code> operator</a> or by using <a href=\"https://perlmaven.com/here-documents\" rel=\"nofollow noreferrer\">HEREDOC</a>.</p>\n\n<pre><code>my $json_string = qq({\n    \"attainable_rate\": {\n        \"down_value\": $p-&gt;{ATTAINABLE_DN},\n        \"up_value\": $p-&gt;{ATTAINABLE_UP}\n    }\n}\n);\n\nmy $heredoc = &lt;&lt;JSON\n{\n    \"attainable_rate\": {\n        \"down_value\": $p-&gt;{ATTAINABLE_DN},\n        \"up_value\": $p-&gt;{ATTAINABLE_UP}\n    }\n}\nJSON\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8258290, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ewkYPUkRXOM/AAAAAAAAAAI/AAAAAAAAAAs/byZNNnofqXw/photo.jpg?sz=128", "display_name": "Carlo Viola", "link": "https://stackoverflow.com/users/8258290/carlo-viola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "accepted_answer_id": 50678572, "answer_count": 1, "score": 0, "last_activity_date": 1528114915, "creation_date": 1528106995, "last_edit_date": 1528109787, "question_id": 50678131, "link": "https://stackoverflow.com/questions/50678131/remove-null-fields-in-json-string-in-perl", "title": "Remove null fields in JSON String in Perl", "body": "<p>I am modifying a Perl script that collect some data from various sources, put them into a structured JSON and call a web service passing that JSON file.\nI have a problem with null values in some of these fields ...</p>\n\n<p>This is a snippet of my code:</p>\n\n<pre><code>  $p-&gt;{BAND_ATTEN_DN1} = 'null';\n  $p-&gt;{BAND_ATTEN_DN2} = 'null';\n  $p-&gt;{BAND_ATTEN_DN3} = 'null';\n  $p-&gt;{BAND_ATTEN_DN4} = 'null';\n  $p-&gt;{BAND_ATTEN_UP0} = 'null';\n  $p-&gt;{BAND_ATTEN_UP1} = 'null';\n  $p-&gt;{BAND_ATTEN_UP2} = 'null';\n  $p-&gt;{BAND_ATTEN_UP3} = 'null';\n  $p-&gt;{BAND_ATTEN_UP4} = 'null';\n  $p-&gt;{BAND_SNR_MARGIN_DN1} = 'null';\n  $p-&gt;{BAND_SNR_MARGIN_DN2} = 'null';\n  $p-&gt;{BAND_SNR_MARGIN_DN3} = 'null';\n  $p-&gt;{BAND_SNR_MARGIN_DN4} = 'null';\n  $p-&gt;{BAND_SNR_MARGIN_UP0} = 'null';\n  $p-&gt;{BAND_SNR_MARGIN_UP1} = 'null';\n  $p-&gt;{BAND_SNR_MARGIN_UP2} = 'null';\n  $p-&gt;{BAND_SNR_MARGIN_UP3} = 'null';\n  $p-&gt;{BAND_SNR_MARGIN_UP4} = 'null';\n  $p-&gt;{BAND_SIG_ATTEN_DN1} = 'null';\n  $p-&gt;{BAND_SIG_ATTEN_DN2} = 'null';\n  $p-&gt;{BAND_SIG_ATTEN_DN3} = 'null';\n  $p-&gt;{BAND_SIG_ATTEN_DN4}  = 'null';\n\n  $p-&gt;{BAND_SIG_ATTEN_UP0} = 'null';\n  $p-&gt;{BAND_SIG_ATTEN_UP1} = 'null';\n  $p-&gt;{BAND_SIG_ATTEN_UP2} = 'null';\n  $p-&gt;{BAND_SIG_ATTEN_UP3} = 'null';\n  $p-&gt;{BAND_SIG_ATTEN_UP4} = 'null';\n  $p-&gt;{ATTAINABLE_DN} = 'null';\n  $p-&gt;{ATTAINABLE_UP} = 'null';\n\n  $p-&gt;{POWER_DN} = 'null';\n  $p-&gt;{POWER_UP} = 'null';\n\n  for my $k (keys %$q) {\n    $p-&gt;{$k} =  ($q-&gt;{$k}) ? $q-&gt;{$k} : 'null';\n  }\n\n  my $m = $measure-&gt;{$port};\n  for my $k (keys %$m) {\n    $p-&gt;{$k} =  ($m-&gt;{$k}) ? $m-&gt;{$k} : 'null';\n  }\n\n  my $hlog_up_values = &amp;get_values($delt-&gt;{UPHLOG}, 9999, -99);\n  my $hlog_dn_values = &amp;get_values($delt-&gt;{DOWNHLOG}, 9999, -99);\n  my $qln_up_values = &amp;get_values($delt-&gt;{UPQLN}, 9999, -199);\n  my $qln_dn_values = &amp;get_values($delt-&gt;{DOWNQLN}, 9999, -199);\n  my $snr_up_values = &amp;get_values($delt-&gt;{UPSNR}, 9999, -99);\n  my $snr_dn_values = &amp;get_values($delt-&gt;{DOWNSNR}, 9999, -99);\n\n  my $hlog_cg_size_dn = grep ($delt-&gt;{DOWNHLOGGRUOPSIZE} eq $_,(1,2,4,8,16)) ? $delt-&gt;{DOWNHLOGGRUOPSIZE} : $delt-&gt;{DOWNHLOGGRUOPSIZE}/4.3125;\n  my $hlog_cg_size_up = grep ($delt-&gt;{UPHLOGGRUOPSIZE} eq $_,(1,2,4,8,16)) ? $delt-&gt;{UPHLOGGRUOPSIZE} : $delt-&gt;{UPHLOGGRUOPSIZE}/4.3125;\n  my $qln_cg_size_dn = grep ($delt-&gt;{DOWNQLNGRUOPSIZE} eq $_,(1,2,4,8,16)) ? $delt-&gt;{DOWNQLNGRUOPSIZE} : $delt-&gt;{DOWNQLNGRUOPSIZE}/4.3125;\n  my $qln_cg_size_up = grep ($delt-&gt;{UPQLNGRUOPSIZE} eq $_,(1,2,4,8,16)) ? $delt-&gt;{UPQLNGRUOPSIZE} :$delt-&gt;{UPQLNGRUOPSIZE}/4.3125;\n  my $snr_cg_size_dn = grep ($delt-&gt;{DOWNSNRGRUOPSIZE} eq $_,(1,2,4,8,16)) ? $delt-&gt;{DOWNSNRGRUOPSIZE} :$delt-&gt;{DOWNSNRGRUOPSIZE}/4.3125;\n  my $snr_cg_size_up = grep ($delt-&gt;{UPSNRGRUOPSIZE} eq $_,(1,2,4,8,16)) ? $delt-&gt;{UPSNRGRUOPSIZE} : $delt-&gt;{UPSNRGRUOPSIZE}/4.3125;\n\n  my $pots_line_length_A    = defined $plt-&gt;{POTS_LINE_LENGTH_A} ? $plt-&gt;{POTS_LINE_LENGTH_A} : 'null';\n  my $pots_line_length_B    = defined $plt-&gt;{POTS_LINE_LENGTH_B} ? $plt-&gt;{POTS_LINE_LENGTH_B} : 'null';\n  my $pots_line_state       = defined $plt-&gt;{POTS_LINE_STATE} ? $plt-&gt;{POTS_LINE_STATE} : 'null';\n  my $pots_line_termination = defined $plt-&gt;{POTS_LINE_TERMINATION_TYPE} ? $plt-&gt;{POTS_LINE_TERMINATION_TYPE} : 'null';\n\n\n  #&amp;_trace(\"STUB GROUP SIZE\",$function, TRC_PDNT);\n  #$hlog_cg_size_dn = 8;\n  #$hlog_cg_size_up = 8;\n  #$qln_cg_size_dn = 8;\n  #$qln_cg_size_up = 8;\n  #$snr_cg_size_dn = 8;\n  #$snr_cg_size_up = 8;\n\n\n  my $json_string = \"{\n    \\\"attainable_rate\\\": {\n      \\\"down_value\\\": $p-&gt;{ATTAINABLE_DN},\n      \\\"up_value\\\": $p-&gt;{ATTAINABLE_UP}\n    },\n    \\\"hlog\\\": {\n      \\\"up_values\\\": [$hlog_up_values],\n      \\\"down_values\\\": [$hlog_dn_values]\n    },\n    \\\"hlog_cg_size\\\": {\n      \\\"down_value\\\": $hlog_cg_size_dn,\n      \\\"up_value\\\": $hlog_cg_size_up\n    },\n    \\\"qln\\\": {\n      \\\"down_values\\\": [$qln_up_values],\n      \\\"up_values\\\": [$qln_dn_values]\n    },\n    \\\"qln_cg_size\\\": {\n      \\\"down_value\\\": $qln_cg_size_dn,\n      \\\"up_value\\\": $qln_cg_size_up\n    },\n    \\\"snr\\\": {\n      \\\"up_values\\\": [$snr_up_values],\n      \\\"down_values\\\": [$snr_dn_values]\n    },\n    \\\"snr_cg_size\\\": {\n      \\\"down_value\\\": $snr_cg_size_dn,\n      \\\"up_value\\\": $snr_cg_size_up\n    },\n    \\\"spectrum\\\": \\\"$actual_spectrum\\\",\n\n    \\\"rtx_status\\\": {\n      \\\"down_value\\\": [\n        null\n      ],\n      \\\"up_value\\\": [\n        null\n      ]\n    },\n    \\\"line_attenuation\\\": {\n      \\\"down_values\\\": [\n        $p-&gt;{BAND_ATTEN_DN1},\n        $p-&gt;{BAND_ATTEN_DN2},\n        $p-&gt;{BAND_ATTEN_DN3},\n        $p-&gt;{BAND_ATTEN_DN4}\n      ],\n      \\\"up_values\\\": [\n        $p-&gt;{BAND_ATTEN_UP0},\n        $p-&gt;{BAND_ATTEN_UP1},\n        $p-&gt;{BAND_ATTEN_UP2},\n        $p-&gt;{BAND_ATTEN_UP3},\n        $p-&gt;{BAND_ATTEN_UP4}\n      ]\n    },\n    \\\"noise_margin\\\": {\n      \\\"down_values\\\": [\n        if($p-&gt;{BAND_SNR_MARGIN_DN1},\n        $p-&gt;{BAND_SNR_MARGIN_DN2},\n        $p-&gt;{BAND_SNR_MARGIN_DN3},\n        $p-&gt;{BAND_SNR_MARGIN_DN4}\n      ],\n      \\\"up_values\\\": [\n        $p-&gt;{BAND_SNR_MARGIN_UP0},\n        $p-&gt;{BAND_SNR_MARGIN_UP1},\n        $p-&gt;{BAND_SNR_MARGIN_UP2},\n        $p-&gt;{BAND_SNR_MARGIN_UP3},\n        $p-&gt;{BAND_SNR_MARGIN_UP4}\n      ]\n    },\n    \\\"signal_attenuation\\\": {\n      \\\"down_values\\\": [\n       $p-&gt;{BAND_SIG_ATTEN_DN1},\n       $p-&gt;{BAND_SIG_ATTEN_DN2},\n       $p-&gt;{BAND_SIG_ATTEN_DN3},\n       $p-&gt;{BAND_SIG_ATTEN_DN4}\n      ],\n      \\\"up_values\\\": [\n       $p-&gt;{BAND_SIG_ATTEN_UP0},\n       $p-&gt;{BAND_SIG_ATTEN_UP1},\n       $p-&gt;{BAND_SIG_ATTEN_UP2},\n       $p-&gt;{BAND_SIG_ATTEN_UP3},\n       $p-&gt;{BAND_SIG_ATTEN_UP4}\n      ]\n    },\n    \\\"transmit_power\\\": {\n      \\\"down_value\\\": $p-&gt;{POWER_DN},\n      \\\"up_value\\\": $p-&gt;{POWER_UP}\n    }\n  }\";\n</code></pre>\n\n<p>For example (I know for sure the problem is present only for line_attenuation, signal_attenuation and noise_margin both up and down)</p>\n\n<pre><code>   \\\"line_attenuation\\\": {\n      \\\"down_values\\\": [\n        $p-&gt;{BAND_ATTEN_DN1},\n        $p-&gt;{BAND_ATTEN_DN2},\n        $p-&gt;{BAND_ATTEN_DN3},\n        $p-&gt;{BAND_ATTEN_DN4}\n</code></pre>\n\n<p>if <code>$p-&gt;{BAND_ATTEN_DN4}</code> is <code>null</code> I have to pass only the first 3 values and not 3 valid value+1 null .. how can I delete those null values? checking all those fields?</p>\n\n<p>Currently I'm using those library</p>\n\n<pre><code>use strict;\nuse Data::Dumper;\nuse Getopt::Long;\nuse REST::Client;\nuse DBI;\nuse JSON;\n</code></pre>\n\n<p>If it is possible I would like not to import other libraries or so.</p>\n\n<p>I have tryed checking if defined, or putting if in the json code but nothing ...</p>\n\n<p>Thanks for the help</p>\n"}, {"tags": ["c++", "perl"], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 3946923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645bc57a6142252fc019de1ffcf788f4?s=128&d=identicon&r=PG", "display_name": "zdm", "link": "https://stackoverflow.com/users/3946923/zdm"}, "edited": false, "score": 0, "creation_date": 1528093602, "post_id": 50673220, "comment_id": 88358595, "body": "Thank you very much, this works. But similar and the last error occurs when I include &lt;memory&gt;. Could you, please, tell me, what I should undefine to make it compiled."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 147, "user_id": 3946923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645bc57a6142252fc019de1ffcf788f4?s=128&d=identicon&r=PG", "display_name": "zdm", "link": "https://stackoverflow.com/users/3946923/zdm"}, "edited": false, "score": 1, "creation_date": 1528128169, "post_id": 50673220, "comment_id": 88378892, "body": "@zdm <code>#undef wait</code>"}, {"owner": {"reputation": 147, "user_id": 3946923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645bc57a6142252fc019de1ffcf788f4?s=128&d=identicon&r=PG", "display_name": "zdm", "link": "https://stackoverflow.com/users/3946923/zdm"}, "edited": false, "score": 0, "creation_date": 1528135497, "post_id": 50673220, "comment_id": 88382384, "body": "@melpomene Thanks!"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 9, "last_activity_date": 1528085688, "last_edit_date": 1528085688, "creation_date": 1528084479, "answer_id": 50673220, "question_id": 50670001, "link": "https://stackoverflow.com/questions/50670001/strawberry-perl-inlinecpp-sstream-not-compiled/50673220#50673220", "title": "Strawberry perl + Inline::CPP + &lt;sstream&gt; not compiled", "body": "<p>This error occurs because <code>&lt;sstream&gt;</code> happens to use <code>setbuf</code> in an inline function, which one of the implicitly added headers (maybe <code>XSUB.h</code> or <code>perl.h</code>?) has redefined (using a preprocessor <code>#define</code>).</p>\n\n<p>This redefinition breaks loudly because it uses the <code>PerlInterpreter</code> type, which is defined in a different namespace and not visible here (macros ignore namespaces, of course).</p>\n\n<p>You can get the code to compile by adding</p>\n\n<pre><code>#undef setbuf\n</code></pre>\n\n<p>before including <code>&lt;sstream&gt;</code>.</p>\n"}], "owner": {"reputation": 147, "user_id": 3946923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645bc57a6142252fc019de1ffcf788f4?s=128&d=identicon&r=PG", "display_name": "zdm", "link": "https://stackoverflow.com/users/3946923/zdm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 50673220, "answer_count": 1, "score": 6, "last_activity_date": 1528085688, "creation_date": 1528052812, "question_id": 50670001, "link": "https://stackoverflow.com/questions/50670001/strawberry-perl-inlinecpp-sstream-not-compiled", "title": "Strawberry perl + Inline::CPP + &lt;sstream&gt; not compiled", "body": "<p>maybe somebody can help me to understand. why this error occurs.\nI am trying to build C++ code, that use  using Inline::CPP.</p>\n\n<p>Here is the example:</p>\n\n<pre><code>#!/usr/bin/env perl\n\npackage main v0.1.0;\n\nuse strict;\nuse warnings;\n\nuse Inline(\n    CPP =&gt; &lt;&lt;'CPP',\n#undef seekdir\n\n#include &lt;sstream&gt;\nCPP\n    # ccflags           =&gt; '-std=c++11',\n    ccflags           =&gt; '-std=gnu++11',\n    clean_after_build =&gt; 0,\n    clean_build_area  =&gt; 0,\n);\n\n1;\n__END__\n</code></pre>\n\n<p>This code compiled without errors under linux, but under strawberry perl 5.26.2 x64 it produce following error:</p>\n\n<pre><code>\"D:\\devel\\perl\\perl\\bin\\perl.exe\" -MExtUtils::Command -e mv -- _2_pl_0f1f.xsc _2_pl_0f1f.c\ng++  -s -O2 -DWIN32 -DWIN64 -DCONSERVATIVE -D__USE_MINGW_ANSI_STDIO -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -DPERL_IMPLICIT_SYS -DUSE_PERLIO -fwrapv -fno-strict-aliasing -mms-bitfields  -xc++ -c  -I\"D:/downloads/cpp-adaptive/cppAdaptive2/inline-src\" -std=gnu++11 -s -O2   -DVERSION=\\\"0.00\\\" -DXS_VERSION=\\\"0.00\\\"  \"-ID:\\devel\\perl\\perl\\lib\\CORE\"   _2_pl_0f1f.c\nIn file included from _2_pl_0f1f.xs:11:0:\nD:\\devel\\perl\\perl\\lib\\CORE/perl.h:3544:45: error: expected ')' before '*' token\n #    define PERL_GET_THX  ((PerlInterpreter *)PERL_GET_CONTEXT)\n                                         ^\nD:\\devel\\perl\\perl\\lib\\CORE/perl.h:3544:45: error: expected ')' before '*' token\nD:\\devel\\perl\\perl\\lib\\CORE/perl.h:3544:45: error: expected ')' before '*' token\nD:\\devel\\perl\\perl\\lib\\CORE/perl.h:3544:45: error: expected ')' before '*' token\nD:\\devel\\perl\\perl\\lib\\CORE/perl.h:3544:29: error: expected ';' at end of member declaration\n #    define PERL_GET_THX  ((PerlInterpreter *)PERL_GET_CONTEXT)\n\n... and so on ...\n</code></pre>\n\n<p>Maybe somebody already solved similar problems?</p>\n"}, {"tags": ["javascript", "jquery", "html", "css", "perl"], "comments": [{"owner": {"reputation": 1441, "user_id": 9173422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8d96a9b23f1f1fb1d8a16ad38b380d?s=128&d=identicon&r=PG&f=1", "display_name": "Friday Ameh", "link": "https://stackoverflow.com/users/9173422/friday-ameh"}, "edited": false, "score": 0, "creation_date": 1528050433, "post_id": 50669615, "comment_id": 88349068, "body": "consider making the variable global  by putting it outside the function &quot;var background = $(this)[0].style.background;&quot;"}, {"owner": {"reputation": 124, "user_id": 8076197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1489184727772391/picture?type=large", "display_name": "Kevin Williams", "link": "https://stackoverflow.com/users/8076197/kevin-williams"}, "reply_to_user": {"reputation": 1441, "user_id": 9173422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8d96a9b23f1f1fb1d8a16ad38b380d?s=128&d=identicon&r=PG&f=1", "display_name": "Friday Ameh", "link": "https://stackoverflow.com/users/9173422/friday-ameh"}, "edited": false, "score": 0, "creation_date": 1528050929, "post_id": 50669615, "comment_id": 88349223, "body": "@FridayAmeh That does work with <code>$(&#39;.worker&#39;)[0]</code> but now of course it grabs the first div with the class. Is there a way to grab the array number of the div hovered?"}, {"owner": {"reputation": 1441, "user_id": 9173422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8d96a9b23f1f1fb1d8a16ad38b380d?s=128&d=identicon&r=PG&f=1", "display_name": "Friday Ameh", "link": "https://stackoverflow.com/users/9173422/friday-ameh"}, "edited": false, "score": 0, "creation_date": 1528051134, "post_id": 50669615, "comment_id": 88349280, "body": "<code>var workingClass = document.getElementsByClassName(&quot;worker&quot;)[0];</code>"}, {"owner": {"reputation": 124, "user_id": 8076197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1489184727772391/picture?type=large", "display_name": "Kevin Williams", "link": "https://stackoverflow.com/users/8076197/kevin-williams"}, "reply_to_user": {"reputation": 1441, "user_id": 9173422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8d96a9b23f1f1fb1d8a16ad38b380d?s=128&d=identicon&r=PG&f=1", "display_name": "Friday Ameh", "link": "https://stackoverflow.com/users/9173422/friday-ameh"}, "edited": false, "score": 0, "creation_date": 1528051380, "post_id": 50669615, "comment_id": 88349355, "body": "@FridayAmeh The <code>$(&#39;.worker&#39;)[0]</code> only gets the first instance of the class. I have 27 of them on the page (it&#39;s a schedule). That&#39;s why I tried to use <code>this</code>. It targets the div I hover. But there is no way that I can tell to reference the style to the callback or even to say <code>.mouseleave</code> or something."}], "answers": [{"comments": [{"owner": {"reputation": 124, "user_id": 8076197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1489184727772391/picture?type=large", "display_name": "Kevin Williams", "link": "https://stackoverflow.com/users/8076197/kevin-williams"}, "edited": false, "score": 0, "creation_date": 1528052488, "post_id": 50669889, "comment_id": 88349658, "body": "My issue is that the Perl generates the style specific to a div&#39;s content (name); therefore, it is an inline-style. I cannot apply a CSS style because I need different styles depending on the div&#39;s content. But, I want to change the background on hover. In order to change inline styles, I need the jQ. But once I change it on hover, it stays. I need a way to revert back to the Perl generated style. Take a look at the site: <a href=\"http://charon.cs.wau.edu/~kwilliam/csdesk2\" rel=\"nofollow noreferrer\">link</a>"}], "tags": [], "owner": {"reputation": 514, "user_id": 9196813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mbNIE.jpg?s=128&g=1", "display_name": "juancarlos", "link": "https://stackoverflow.com/users/9196813/juancarlos"}, "is_accepted": false, "score": 0, "last_activity_date": 1528052586, "last_edit_date": 1528052586, "creation_date": 1528052125, "answer_id": 50669889, "question_id": 50669615, "link": "https://stackoverflow.com/questions/50669615/override-inline-style-on-hover-then-return/50669889#50669889", "title": "Override inline style on hover then return", "body": "<p>I do not understand very well what you want to do but if you want to change the style when a hover happens you could do it from the CSS with a selector similar to this <code>.worker:hover { rules}</code>  even if you are using jquery you could add a class that changes the style when a hover happens something like this </p>\n\n<pre><code>$(document).ready(function() {\n    $('.worker').hover(\n        function() {\n           $(this).addClass(\"second_class\")\n        },\n        function(){\n           $(this).removeClass(\"second_class\")\n        }\n    );\n});\n</code></pre>\n\n<p>with that when a hover happens you will not have to overwrite the properties of your worker class but apply another class</p>\n"}, {"comments": [{"owner": {"reputation": 124, "user_id": 8076197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1489184727772391/picture?type=large", "display_name": "Kevin Williams", "link": "https://stackoverflow.com/users/8076197/kevin-williams"}, "edited": false, "score": 0, "creation_date": 1528056183, "post_id": 50670387, "comment_id": 88350694, "body": "That <code>.data()</code> thing is awesome. I did not know about that; thanks for teaching me something. I will definitely need to remember that trick."}], "tags": [], "owner": {"reputation": 8870, "user_id": 4206079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g2oZC.jpg?s=128&g=1", "display_name": "Banzay", "link": "https://stackoverflow.com/users/4206079/banzay"}, "is_accepted": true, "score": 1, "last_activity_date": 1528055318, "creation_date": 1528055318, "answer_id": 50670387, "question_id": 50669615, "link": "https://stackoverflow.com/questions/50669615/override-inline-style-on-hover-then-return/50670387#50670387", "title": "Override inline style on hover then return", "body": "<p>you can work around it by creating additional attribute for the element using <code>.data()</code> method. So you don't need to pass any parameters to callback function</p>\n\n<p>Here is an example:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(\"#div1\").hover(function(){\r\n    $(this).data('backgr', $(this).attr('style').split(\":\")[1]);\r\n    $(this).attr('style','background:' + ' linear-gradient(to bottom right,yellow,blue');\r\n}, function(){\r\n    $(this).attr('style','background:' + $(this).data('backgr'));\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;div id=\"div1\" style=\"background: linear-gradient(to bottom right,red,black);\"&gt;This is a phrase&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 124, "user_id": 8076197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1489184727772391/picture?type=large", "display_name": "Kevin Williams", "link": "https://stackoverflow.com/users/8076197/kevin-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 50670387, "answer_count": 2, "score": 0, "last_activity_date": 1528120215, "creation_date": 1528050228, "last_edit_date": 1528120215, "question_id": 50669615, "link": "https://stackoverflow.com/questions/50669615/override-inline-style-on-hover-then-return", "title": "Override inline style on hover then return", "body": "<p>I have some divs (.worker) that have inline styles generated through Perl. On hover, I want to change the background, then revert back to the Perl generated style. The only way to override the inline style of .worker is with jQ.css. Unfortunately, when I leave .worker, it stays as the overridden value. I tried to capture the style attribute and pass it as a parameter to the callback of .hover, but it does not work.</p>\n\n<p>The Perl generated inline style: <code>$html .= qq(&lt;div class=\"worker\" style=\"background:linear-gradient(to bottom right,@{[bgc($_)]},black)\"&gt;$_&lt;/div&gt;);</code></p>\n\n<p>The jQ to override (then return to Perl): </p>\n\n<pre><code>$('.worker').hover(function(){\n   var background = $(this)[0].style.background;\n   $(this).css('background','#FF9500');\n}, function(background){\n     $(this).css('background',background);\n</code></pre>\n\n<p>This does not work as I mentioned, I think because the <code>var background</code> is scoped to the first function, and loses its scope for the callback.</p>\n\n<p>Is there any way to return the original inline styles after changing them with .css?</p>\n\n<p>EDIT: Thanks to @Banzay for the answer. However, now I have a connected issue. When I left/right click on a .worker div, I want the background to be white and color black. But because of the .hover() solution, the bgc changes to white onclick, but when I mouseout it goes back to the Perl generated background.</p>\n\n<p>The code for the clicks:    </p>\n\n<pre><code>var NoName = $('#name').val();\n  $('.worker').click(function(){\n    var boxName = $('#name').val();\n    if (boxName != NoName &amp;&amp; boxName.match(/\\w/)) {\n      $(this).html(boxName[0].toUpperCase() + boxName.substring(1)).css({'background':'white','color':'black'}).removeClass('worker').addClass('assigned');         \n    }\n  });\n\n$('.worker').bind('contextmenu',function(e){\n  e.preventDefault();\n  $(this).html('-').attr('style','background:white').toggleClass('worker');\n});\n</code></pre>\n\n<p>And the hover code:</p>\n\n<pre><code>$(\".worker\").hover(function(){\n$(this).data('backgr', $(this).attr('style').split(\":\")[1]);\n$(this).attr('style','background:#FF9500');\n}, function(){\n     $(this).attr('style','background:' + $(this).data('backgr'));\n});\n</code></pre>\n\n<p>From the code, you can see I've tried to remove the worker class, add another class, and toggle the worker class. The issue is that the worker class is not removed, so when I move off the div after clicking, the .hover() is invoked resulting in the div reverting back to Perl inline style.</p>\n\n<p>How do I remove the hover effect after a left/right click?</p>\n"}, {"tags": ["html", "regex", "shell", "perl"], "comments": [{"owner": {"reputation": 280, "user_id": 2198731, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/29e3fba77fe338ba4071e1f01dc3756a?s=128&d=identicon&r=PG", "display_name": "bonanza", "link": "https://stackoverflow.com/users/2198731/bonanza"}, "edited": false, "score": 1, "creation_date": 1528034285, "post_id": 50667152, "comment_id": 88344186, "body": "Why can&#39;t you use <code>sed</code>? what about <code>grep -v</code>?"}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 7, "creation_date": 1528034459, "post_id": 50667152, "comment_id": 88344233, "body": "It&#39;s HTML; use an HTML parser, not line-oriented tools like <code>sed</code> and <code>grep</code>."}, {"owner": {"reputation": 16621, "user_id": 319741, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b625972bd759abcd3de0d2283617a1b7?s=128&d=identicon&r=PG", "display_name": "Scott C Wilson", "link": "https://stackoverflow.com/users/319741/scott-c-wilson"}, "edited": false, "score": 0, "creation_date": 1528070999, "post_id": 50667152, "comment_id": 88353843, "body": "Yep, you&#39;re right - I was trying to take a shortcut and it wound up biting me. +1!"}], "answers": [{"comments": [{"owner": {"reputation": 16621, "user_id": 319741, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b625972bd759abcd3de0d2283617a1b7?s=128&d=identicon&r=PG", "display_name": "Scott C Wilson", "link": "https://stackoverflow.com/users/319741/scott-c-wilson"}, "edited": false, "score": 0, "creation_date": 1528071041, "post_id": 50667232, "comment_id": 88353852, "body": "After more testing, I realized I <i>was</i> better off with a parser - I was either missing things or removing too much trying to do it with the first command.  And your parser command was perfect - I just added <code>&quot;code&quot;</code> to the <code>ignore_elements</code> list."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1528035878, "last_edit_date": 1528035878, "creation_date": 1528034686, "answer_id": 50667232, "question_id": 50667152, "link": "https://stackoverflow.com/questions/50667152/remove-pre-pre-blocks-with-shell-commands/50667232#50667232", "title": "Remove &lt;pre&gt;...&lt;/pre&gt; blocks with shell commands", "body": "<blockquote>\n  <p>So I need non-greedy matching an a regex.</p>\n</blockquote>\n\n<p>Not really. Assuming the <code>&lt;pre&gt;</code> and <code>&lt;/pre&gt;</code> tags are always on a line by themselves, there are no comments or other HTML tags, and you don't need to worry about unescaping HTML entities, you could use e.g.</p>\n\n<pre><code>perl -ne 'print unless m{^\\s*&lt;pre\\b} .. m{^\\s*&lt;/pre&gt;}'\n</code></pre>\n\n<p>But using a real HTML parser might be a better idea:</p>\n\n<pre><code>perl -MHTML::Parser -e 'HTML::Parser-&gt;new(ignore_elements =&gt; [\"pre\"], default_h =&gt; [sub { print @_ }, \"text\"])-&gt;parse_file(*STDIN)' &lt; input.html\n</code></pre>\n\n<p>(Details depend on what exactly you want to happen with the rest of the document.)</p>\n"}], "owner": {"reputation": 16621, "user_id": 319741, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b625972bd759abcd3de0d2283617a1b7?s=128&d=identicon&r=PG", "display_name": "Scott C Wilson", "link": "https://stackoverflow.com/users/319741/scott-c-wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 50667232, "answer_count": 1, "score": -2, "last_activity_date": 1528066992, "creation_date": 1528034186, "last_edit_date": 1528066992, "question_id": 50667152, "link": "https://stackoverflow.com/questions/50667152/remove-pre-pre-blocks-with-shell-commands", "title": "Remove &lt;pre&gt;...&lt;/pre&gt; blocks with shell commands", "body": "<p>I'd like to change </p>\n\n<pre><code>Example 1 \n&lt;pre class=\"code\"&gt;\nbla bla \n&lt;/pre&gt;\nExample 2 \n&lt;pre&gt;\nbla bla \n&lt;/pre&gt;\n</code></pre>\n\n<p>to just </p>\n\n<pre><code>Example 1 \nExample 2 \n</code></pre>\n\n<p>So I need non-greedy matching and a regex.  I'm pretty sure I can't use <code>sed</code> - what shell commands could I use? </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1528010527, "post_id": 50664100, "comment_id": 88338404, "body": "Define &quot;having trouble&quot;. Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1528011745, "post_id": 50664100, "comment_id": 88338596, "body": "I have edited the main post! Thanks for fast replies!"}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 3, "creation_date": 1528012497, "post_id": 50664100, "comment_id": 88338713, "body": "Your &#39;troubles&#39; come from the fact that it doesn&#39;t know how to prepare your statement, hence <code>$sth</code> is undefined, and so, <code>$sth-&gt;...</code> methods will fail saying <code>Can&#39;t call method &quot;...&quot; on an undefined value</code>. Now from the documentation from <a href=\"https://metacpan.org/pod/distribution/DBI/DBI.pm#Placeholders-and-Bind-Values\" rel=\"nofollow noreferrer\">metacpan.org/pod/distribution/DBI/&hellip;</a>, one can see that placeholders work fine on the &#39;query part&#39; for seaching values in the <code>WHERE</code> clause and when setting values for columns. BUT NOT for table names or column names, and that is what you tried to do"}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1528012998, "post_id": 50664100, "comment_id": 88338842, "body": "I understand, I have modified my code to this:       sql.pm           our $query = &quot;Select * from my_tbl where col = ?&quot;;      main.pl      $tbl = &#39;123&#39;      $sth-&gt;dbh-&gt;prepare($select) ;      $sth-&gt;execute($tbl);  And this works, but is this a good practice? What is the best practice?"}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1528013608, "post_id": 50664100, "comment_id": 88338980, "body": "you probably want to rename your $tbl to $val"}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1528013859, "post_id": 50664100, "comment_id": 88339033, "body": "depending on the number of SQL&#39;s you have, i would see two different ways of doing it. For a few SQL&#39;s i wouldn&#39;t go through the hassle of grouping them. And what i may suggest is some solution that worked fine on reasonable large scale. But i think there are other ways of doing it... TIMTOWTDI"}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1528020052, "post_id": 50664985, "comment_id": 88340321, "body": "Thank you very much for the fast reply and help!    This works great, but what if I would want to use $dbh-&gt;selectall_arrayref($select, { Slice =&gt; {} });   how could I bind parameters to query $select ?"}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "reply_to_user": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1528020458, "post_id": 50664985, "comment_id": 88340419, "body": "from the documentation, you can see that <code>$dbh-&gt;selectall_arrayref(...)</code> is nothing else then <code>$sth = $dbh-&gt;prepare(SQL_HERE); $sth-&gt;execute( params_here ); $sth-&gt;fetchall_arrayref( slice_here );</code> but that would defeat the <code>state</code> at the top and you would need to do internally that <code>prepare</code> over and over again ... and that ain&#39;t fun for huge SQL statements. So, my advice, split it in the three statements, rather than one compact do-it all-at-once"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1528027137, "post_id": 50664985, "comment_id": 88342169, "body": "I would let DBI handle the statement caching via <code>$dbh-&gt;prepare_cached</code> rather than doing it in your own code."}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1528030261, "post_id": 50664985, "comment_id": 88343127, "body": "my friend @simbabque is totally right, rolling your own is not what one should do in general. Instead of <code>state $sth = $dbh-&gt;prepare( ... );</code> one could write <code>my $sth = $dbh-&gt;prepare_cached( ... );</code> ... But dragons are on your path ( see <a href=\"https://metacpan.org/pod/distribution/DBI/DBI.pm#prepare_cached\" rel=\"nofollow noreferrer\">metacpan.org/pod/distribution/DBI/DBI.pm#prepare_cached</a> and the troubles it can run into ). Using <code>state</code> does avoid all those"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1528033704, "post_id": 50664985, "comment_id": 88344041, "body": "Can&#39;t use store sth like that. Aside from tying up a resource, dbh might be different in next call."}], "tags": [], "owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "is_accepted": true, "score": 0, "last_activity_date": 1528020883, "last_edit_date": 1528020883, "creation_date": 1528018432, "answer_id": 50664985, "question_id": 50664100, "link": "https://stackoverflow.com/questions/50664100/building-query-from-module-best-practices/50664985#50664985", "title": "Building query from module - Best Practices", "body": "<p>I hope the below is self explaining enough:</p>\n\n<pre><code>package My_App::Table_Name;\n\nuse feature 'state';\n# save performance hit on `prepare` statements\n# you said SQL statements of 100+ lines\n\nsub sql_name {\n    my $class = shift;\n    my $dbh   = shift;\n    my %params = @_;\n\n    # do some checking on the params if needed, or use Type::Params::compile\n\n    state $sth = $dbh-&gt;prepare( &lt;&lt;    END_OF_SQL ); # 4 spaces for neatness\n\n        SELECT * FROM table_name WHERE col_foo = ? AND col_bar = ?\n\n    END_OF_SQL\n\n    $sth-&gt;execute(\n        $params{foo},\n        $params{bar},\n    );\n    return $sth-&gt;fetchall_hashref('id'); # or what ever\n}\n\n1;\n</code></pre>\n\n<p>And then in your app:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse DBI;\nuse My_App::Table_Name;\n\nmy $dbh = ... ; # RaiseError is your friend\n\nmy $results = My_App::Table_Name-&gt;sql_name($dbh,\n    foo =&gt; 'abc',\n    bar =&gt; '123',\n);\n\n# $results now contains a HashRef where the keys are the id's from the returned\n# rows, each row being a HashRef itself, so you can do things like:\n\nsay $results-&gt;{42}-&gt;{col_foo};\n</code></pre>\n\n<p>This way, you can organize your SQL statements by table name, most database\nmodifications are acted on one table, or because of the change inside one table, causing a chain off updates elsewhere.</p>\n\n<p>Inside each module, you can now create subroutines with sensible names like</p>\n\n<pre><code>sub create { ... };\nsub delete { ... };\nsub search_joined_with_table_other { ... };\n</code></pre>\n\n<p>and thus in your app:</p>\n\n<pre><code>My_App::Table_Name-&gt;create($dbh,\n    foo =&gt; 'xyz',\n    bar =&gt; '345',\n);\n\nMy_App::Table_Other-&gt;delete($dbh, id =&gt; 42 );\n</code></pre>\n\n<p>And so, basically, you DO NOT care about all that SQL inside your main app, but nicely moved them away inside their own packages. And inside your app, you do not even need to know that there is SQL underneath the hood, you simply call class methods.</p>\n\n<p>Next level, would be returning Row Objects for each Table_Name package and have it's own instance methods on it.</p>\n\n<p>Happy coding and remember TIMTOWTDI (There is more than one way to do it)</p>\n"}], "owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 50664985, "answer_count": 1, "score": 0, "last_activity_date": 1528020883, "creation_date": 1528010021, "last_edit_date": 1528012673, "question_id": 50664100, "link": "https://stackoverflow.com/questions/50664100/building-query-from-module-best-practices", "title": "Building query from module - Best Practices", "body": "<p>I am having multiple queries that can be up to 100 or even more lines that need to be executed and I am looking for best practices / easy way to import queries from module into my main file, bind values and execute them. Exemple:</p>\n\n<p>Sql.pm  </p>\n\n<pre><code>package Sql;\n\nuse strict;\nuse warnings;\n\nuse Exporter;\n\nour @ISA = qw(Exporter);\nour @EXPORT_OK = qw($query);\n\nour $query = \"SELECT * \nFROM ?\n\";\n</code></pre>\n\n<p>Main.pl  </p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Sql;\n#use DBI &amp; connect ;\n\nmy $select = $Sql::query;\nmy $tbl= 'my_tbl';\n\nmy $sth = $dbh-&gt;prepare($select );\n$sth-&gt;execute($tbl);\n</code></pre>\n\n<p>This will give me this error:  </p>\n\n<p>ct_result(ct_dynamic(CS_PREPARE)) returned -205 at /usr/lib/x86_64-linux-gnu/perl5/5.22/DBD/Sybase.pm line 138.<br>\nDBD::Sybase::db prepare failed: Server message number=1087 severity=16 state=1 line=1 server=local text=Must declare the table variable \"@P1\". Server message number=8180 severity=16 state=1 line=1 server=localtext=Statement(s) could not be prepared.  at main.pl line 16.\nCan't call method \"execute\" on an undefined value at main.pl line 17.</p>\n\n<p>If I do like this in my main.pl  </p>\n\n<pre><code>my $sth = $dbh-&gt;prepare($select);\n$sth-&gt;bind_param(1, $tbl);\n$sth-&gt;execute(1);\n</code></pre>\n\n<p>I get the same error but telling me that 'Can't call method \"bind_param\" on an undefined value'</p>\n\n<p>What am I doing wrong?\nIs there a better/easy/best practice way to achieve what I'm trying to do?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1527975007, "post_id": 50660900, "comment_id": 88332698, "body": "How big is this enormous file?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1527975573, "post_id": 50660900, "comment_id": 88332833, "body": "Will there always be exactly 100 output files? Can you give an example of the input file data, showing the coordinates and how they are converted into an output file number?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1527990743, "post_id": 50660900, "comment_id": 88335385, "body": "Corrected the tag &quot;filehandler&quot; (what is that?) to &quot;filehandle&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "is_accepted": false, "score": 2, "last_activity_date": 1527972097, "last_edit_date": 1527972097, "creation_date": 1527971620, "answer_id": 50660932, "question_id": 50660900, "link": "https://stackoverflow.com/questions/50660900/how-to-use-variable-instead-of-a-file-handle/50660932#50660932", "title": "How to use variable instead of a file handle", "body": "<p>Don't assign anything to <code>$filehandle</code> or set it to <code>undef</code> before you call <code>open()</code>. You get this error because you have assigned a string to <code>$filehandle</code> (which is of no use anyway).</p>\n\n<p>Also see <a href=\"https://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">\"open\" in perldoc</a>:</p>\n\n<blockquote>\n  <p>If FILEHANDLE is an undefined scalar variable (or array or hash element), a new filehandle is autovivified, meaning that the variable is assigned a reference to a newly allocated anonymous filehandle. Otherwise if FILEHANDLE is an expression, its value is the real filehandle. (This is considered a symbolic reference, so <code>use strict \"refs\"</code> should not be in effect.)</p>\n</blockquote>\n\n<p>To have more file handles at a time and to conveniently map them to the file names consider using a hash with the file name (or whatever identifier suits you) as key to store them in. You can check if the key exists (see <a href=\"https://perldoc.perl.org/functions/exists.html\" rel=\"nofollow noreferrer\">\"exists\"</a>) and the value is defined (see <a href=\"https://perldoc.perl.org/functions/defined.html\" rel=\"nofollow noreferrer\">\"defined\"</a>) to avoid reopening the file unnecessarily.</p>\n"}, {"tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": true, "score": 5, "last_activity_date": 1527976839, "creation_date": 1527976839, "answer_id": 50661516, "question_id": 50660900, "link": "https://stackoverflow.com/questions/50660900/how-to-use-variable-instead-of-a-file-handle/50661516#50661516", "title": "How to use variable instead of a file handle", "body": "<p>To give you an idea on how this might be done. Put file handles in a hash (or perhaps array if indexed by numbers).</p>\n\n<pre><code>use strict;\nuse warnings;\nmy %fh;                                                        #file handles\nopen $fh{$_}, '&gt;', \"Z_${_}_dump.all.lammpstrj.dat\" for 1..100; #open 100 files\nfor(1..10000){                                    #write 10000 lines in 100 files\n    my $random=int(1+rand(100));                  #pick random file handle\n    print {$fh{$random}} \"something $_\\n\";\n}\nclose $fh{$_} for 1..100;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1529843337, "post_id": 50711519, "comment_id": 89012529, "body": "<code>open</code> is slow so if you have to open the same file more than one time, having many file handles are faster. But of course, in many situations it doesn&#39;t matter if a program uses 1.2 seconds or 1.3."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1529843418, "post_id": 50711519, "comment_id": 89012549, "body": "Btw, your code <code>&quot;$i_foo.dat&quot;</code> will look for a variable named <code>$i_foo</code>. You probably meant <code>&quot;${i}_foo.dat&quot;</code>."}, {"owner": {"reputation": 93, "user_id": 4760272, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-JQ5vdeNdWmQ/AAAAAAAAAAI/AAAAAAAADMo/KlSms3irUXQ/photo.jpg?sz=128", "display_name": "Leon WANG", "link": "https://stackoverflow.com/users/4760272/leon-wang"}, "reply_to_user": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1529942753, "post_id": 50711519, "comment_id": 89047703, "body": "Thanks for your pointing out the error.  It should be &quot;$i_foo.dat&quot;. The file name includes an index. Your correction is a reference, correct?"}], "tags": [], "owner": {"reputation": 93, "user_id": 4760272, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-JQ5vdeNdWmQ/AAAAAAAAAAI/AAAAAAAADMo/KlSms3irUXQ/photo.jpg?sz=128", "display_name": "Leon WANG", "link": "https://stackoverflow.com/users/4760272/leon-wang"}, "is_accepted": false, "score": 0, "last_activity_date": 1529942476, "last_edit_date": 1529942476, "creation_date": 1528252720, "answer_id": 50711519, "question_id": 50660900, "link": "https://stackoverflow.com/questions/50660900/how-to-use-variable-instead-of-a-file-handle/50711519#50711519", "title": "How to use variable instead of a file handle", "body": "<p>I sincerely appreciate Kjetil S. and sticky bit. I tested it and their suggestion work well. And I noticed that there is another way to write data to different files WITHOUT CHANGING filehandler. Actually I changed file names using same file handler. </p>\n\n<pre><code>....\nfor my $i=0;$i&lt;=$max_number;$i++;\n{\n   $file=\"$i\\_foo.dat\";\n   open DAT,'&gt;&gt;',\"$file\";\n   ......\n}\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 4760272, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-JQ5vdeNdWmQ/AAAAAAAAAAI/AAAAAAAADMo/KlSms3irUXQ/photo.jpg?sz=128", "display_name": "Leon WANG", "link": "https://stackoverflow.com/users/4760272/leon-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 732, "favorite_count": 0, "accepted_answer_id": 50661516, "answer_count": 3, "score": 2, "last_activity_date": 1529942476, "creation_date": 1527971317, "last_edit_date": 1527990722, "question_id": 50660900, "link": "https://stackoverflow.com/questions/50660900/how-to-use-variable-instead-of-a-file-handle", "title": "How to use variable instead of a file handle", "body": "<p>I have a big data file <code>dump.all.lammpstrj</code> which I need to split/categorize into a series of files, such as <code>Z_1_filename</code>, <code>Z_2_filename</code>, <code>Z_3_filename</code> etc. based on the coordinates in each record.</p>\n\n<p>The coordinates are saved in a disordered way, so my program reads each line and determines which file this record should be sent to.</p>\n\n<p>I use a variable, <code>$filehandle = \"Z_$i_DUMP\"</code></p>\n\n<p>and I hope to open all of the possible files like this</p>\n\n<pre><code>for ( my $i = 1; $i &lt;= 100; $i++ ) {\n  $filehandle = \"Z_$i_DUMP\";\n  open $filehandle,'&gt;', \"Z_$i_dump.all.lammpstrj.dat\";\n  ...\n}\n</code></pre>\n\n<p>But when running my program, I get a message</p>\n\n<blockquote>\n  <p>Can't use string (\"Z_90_DUMP\") as a symbol ref while \"strict refs\" in use at ...</p>\n</blockquote>\n\n<p>I don't want to scan all the data for each output file, because <code>dump.all.lammpstrj</code> is so big that a scan would take a long time.</p>\n\n<p>Is there any way to use a defined variable as a file handle?</p>\n"}, {"tags": ["shell", "perl", "wrapper"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1527944791, "post_id": 50657165, "comment_id": 88324412, "body": "Where in Expect did you find exit?"}, {"owner": {"reputation": 21, "user_id": 9885187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888b158a2dff752ca1b9ce14e513503b?s=128&d=identicon&r=PG&f=1", "display_name": "ErikaF.", "link": "https://stackoverflow.com/users/9885187/erikaf"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1527945284, "post_id": 50657165, "comment_id": 88324549, "body": "@choroba Sorry, poor choice of words. All the examples I&#39;ve found, seem to run the external program, print some stuff to STDIN, then just wait for it to exit and capture STDOUT and do stuff after it exits, as opposed to binding a subroutine to print things to STDIN based on &#39;new&#39; output from STDOUT. I felt like expect should be able to do this, but I wasn&#39;t sure so I wanted to ask so I don&#39;t go down the wrong path reinventing the wheel. :)"}, {"owner": {"reputation": 21, "user_id": 9885187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888b158a2dff752ca1b9ce14e513503b?s=128&d=identicon&r=PG&f=1", "display_name": "ErikaF.", "link": "https://stackoverflow.com/users/9885187/erikaf"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1527945537, "post_id": 50657165, "comment_id": 88324623, "body": "And I just figured out a way to do it with Expect. Sorry! $ob-&gt;expect [  qr/regex1/ =&gt; sub {} ]"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1527947044, "post_id": 50657165, "comment_id": 88325019, "body": "@ErikaF. you should post an answer to your question to help others who come here. Otherwise this question has little value."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1527947740, "post_id": 50657165, "comment_id": 88325242, "body": "What do you mean you <i>&quot;found IPC&quot;</i>? There are dozens of <code>IPC::*</code> modules; which one did you &quot;find&quot;?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1527952315, "post_id": 50657165, "comment_id": 88326554, "body": "@Erika: Please write up your solution as an answer. The primary use of Stack Overflow questions is not in helping out their author, but rather to aid the rest of the world if a similar issue occurs elsewhere. You shouod think of asking a question in the same way as creating a new page on Wikipedia."}], "answers": [{"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 1, "last_activity_date": 1527951138, "last_edit_date": 1527951138, "creation_date": 1527950816, "answer_id": 50658066, "question_id": 50657165, "link": "https://stackoverflow.com/questions/50657165/perl-run-interactive-external-application-with-callback/50658066#50658066", "title": "Perl run interactive external application with callback", "body": "<blockquote>\n  <p>I need this external application to continue running and the perl script to continue responding until I kill both.</p>\n</blockquote>\n\n<p>That's an interesting question - one possible way to solve this is with an event loop framework like <a href=\"https://metacpan.org/release/POE\" rel=\"nofollow noreferrer\"><code>POE</code></a>. Although it has a bit of a learning curve (but see the <a href=\"http://poe.perl.org/?POE_Cookbook\" rel=\"nofollow noreferrer\">cookbook</a>), I've found it great for things like specialized network servers, or for things like your case - staying interactive at the console while other things (network connections, serial ports, etc.) are handled as well.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nsub POE::Kernel::ASSERT_DEFAULT () { return 1 }\nuse POE qw/ Wheel::ReadWrite Wheel::Run /;\n\nmy @CHILD = ('perl', '-wMstrict', '-nle',\n    q{ $|=1; print uc; sleep 5; print lc });\n\nPOE::Session-&gt;create( inline_states =&gt; {\n    _start =&gt; sub {\n        $poe_kernel-&gt;alias_set('console_handler');\n        $_[HEAP]{console} = POE::Wheel::ReadWrite-&gt;new(\n                InputHandle =&gt; \\*STDIN, OutputHandle =&gt; \\*STDOUT,\n                InputEvent =&gt; 'console_input', ErrorEvent =&gt; 'console_error' );\n    },\n    console_input =&gt; sub {\n        my ($heap, $input) = @_[HEAP,ARG0];\n        if ($input=~/^(?:quit|exit)$/i) {\n            $poe_kernel-&gt;post(signal_handler =&gt; 'signal_shutdown',\n                'user request');\n        }\n        elsif ($input=~/^send\\s+(.*)$/i) {\n            $poe_kernel-&gt;post(child_handler =&gt; 'child_stdin', $1);\n        }\n        else {\n            $heap-&gt;{console}-&gt;put('Unknown command - try \"send ...\"');\n        }\n    },\n    console_output =&gt; sub {\n        my ($heap, $output) = @_[HEAP,ARG0];\n        if (defined $heap-&gt;{console})\n            { $heap-&gt;{console}-&gt;put($output) }\n        else # assume we're shut down, don't need to go through the wheel\n            { print $output, \"\\n\" }\n    },\n    console_error =&gt; sub {\n        my ($op, $errnum, $errstr) = @_[ARG0..ARG2];\n        $poe_kernel-&gt;post(signal_handler =&gt; 'signal_shutdown',\n            $op eq 'read' &amp;&amp; $errnum==0 ? 'EOF'\n                : \"console error (op $op error $errnum: $errstr)\" );\n    },\n    console_shutdown =&gt; sub { delete $_[HEAP]{console} },\n    _stop =&gt; sub {  },\n}, );\n\nPOE::Session-&gt;create( inline_states =&gt; {\n    _start =&gt; sub {\n        $poe_kernel-&gt;alias_set('child_handler');\n        $poe_kernel-&gt;post(console_handler =&gt; 'console_output',\n            \"Starting child...\");\n        $_[HEAP]{child} = POE::Wheel::Run-&gt;new( Program =&gt; \\@CHILD,\n            StdoutEvent  =&gt; \"child_stdout\", StderrEvent  =&gt; \"child_stderr\", );\n        $poe_kernel-&gt;sig_child($_[HEAP]{child}-&gt;PID, \"child_signal\");\n    },\n    child_stdin =&gt; sub {\n        my ($stdin) = $_[ARG0];\n        warn localtime.\" Send STDIN &lt;$stdin&gt;\\n\";\n        $_[HEAP]{child}-&gt;put($stdin);\n    },\n    child_stdout =&gt; sub {\n        my ($stdout) = $_[ARG0];\n        warn localtime.\" Got STDOUT &lt;$stdout&gt;\\n\";\n        $poe_kernel-&gt;post(console_handler =&gt; 'console_output',\n            \"Child said &lt;$stdout&gt;\");\n    },\n    child_stderr =&gt; sub {\n        my ($stderr) = $_[ARG0];\n        warn localtime.\" Got STDERR &lt;$stderr&gt;\\n\";\n        $poe_kernel-&gt;post(console_handler =&gt; 'console_output',\n            \"Child STDERR &lt;$stderr&gt;\");\n    },\n    child_signal =&gt; sub {\n        my ($status) = $_[ARG2];\n        $poe_kernel-&gt;post(console_handler =&gt; 'console_output',\n            \"Child process exited with status $status.\");\n        $poe_kernel-&gt;delay('child_kill');\n        delete $_[HEAP]{child};\n    },\n    child_shutdown =&gt; sub {\n        $poe_kernel-&gt;post(console_handler =&gt; 'console_output',\n            \"Sending child process SIGINT...\");\n        $_[HEAP]{child}-&gt;kill('INT');\n        $poe_kernel-&gt;delay('child_kill', 5);\n    },\n    child_kill =&gt; sub {\n        return unless defined $_[HEAP]{child};\n        $poe_kernel-&gt;post(console_handler =&gt; 'console_output',\n            \"Sending child process SIGKILL.\");\n        $_[HEAP]{child}-&gt;kill('KILL');\n        delete $_[HEAP]{child};\n    },\n    _stop =&gt; sub {  },\n}, );\n\nPOE::Session-&gt;create( inline_states =&gt; {\n    _start =&gt; sub {\n        $poe_kernel-&gt;alias_set('signal_handler');\n        $poe_kernel-&gt;sig(INT  =&gt; 'signal_shutdown');\n        $poe_kernel-&gt;sig(TERM =&gt; 'signal_shutdown');\n        $poe_kernel-&gt;sig(HUP  =&gt; 'signal_shutdown');\n    },\n    signal_shutdown =&gt; sub {\n        my ($signal) = $_[ARG0];\n        warn $signal ? \"Got $signal, \" : '', \"Shutting down\\n\";\n        $poe_kernel-&gt;post(child_handler   =&gt; 'child_shutdown');\n        $poe_kernel-&gt;post(console_handler =&gt; 'console_shutdown');\n        $poe_kernel-&gt;sig_handled;\n    },\n    _stop =&gt; sub {  },\n}, );\n\n$poe_kernel-&gt;run;\n</code></pre>\n\n<p>Example Session:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Starting child...\nsend Foo\nSat Jun  2 16:44:37 2018 Send STDIN &lt;Foo&gt;\nSat Jun  2 16:44:37 2018 Got STDOUT &lt;FOO&gt;\nChild said &lt;FOO&gt;\nsend Bar\nSat Jun  2 16:44:39 2018 Send STDIN &lt;Bar&gt;\nSat Jun  2 16:44:42 2018 Got STDOUT &lt;foo&gt;\nSat Jun  2 16:44:42 2018 Got STDOUT &lt;BAR&gt;\nChild said &lt;foo&gt;\nChild said &lt;BAR&gt;\nSat Jun  2 16:44:47 2018 Got STDOUT &lt;bar&gt;\nChild said &lt;bar&gt;\nquit\nGot user request, Shutting down\nSending child process SIGINT...\nChild process exited with status 2.\n</code></pre>\n\n<p>As you can see, the console remains interactive while the child process is running, with output from the child process shown asynchronously (<code>send Foo</code>, <code>send Bar</code>, and <code>quit</code> are my console input). Note you can also use <a href=\"https://metacpan.org/pod/POE::Wheel::ReadLine\" rel=\"nofollow noreferrer\"><code>POE::Wheel::ReadLine</code></a> instead of <code>POE::Wheel::ReadWrite</code> if you want advanced features like an input history.</p>\n"}], "owner": {"reputation": 21, "user_id": 9885187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888b158a2dff752ca1b9ce14e513503b?s=128&d=identicon&r=PG&f=1", "display_name": "ErikaF.", "link": "https://stackoverflow.com/users/9885187/erikaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1554915470, "creation_date": 1527944309, "last_edit_date": 1554915470, "question_id": 50657165, "link": "https://stackoverflow.com/questions/50657165/perl-run-interactive-external-application-with-callback", "title": "Perl run interactive external application with callback", "body": "<p>I am looking for a way to do the following:</p>\n\n<ol>\n<li>Have a perl script execute an external, interactive shell program</li>\n<li>Capture STDIN and STDOUT for the external program</li>\n<li>Bind some kind of callback sub to be executed any time the external program prints anything to STDOUT</li>\n<li>Use this subroutine to parse STDOUT and if it matches a regex, print a response to STDIN for the external program.</li>\n</ol>\n\n<p>I have found\n<a href=\"https://metacpan.org/pod/Expect\" rel=\"nofollow noreferrer\"><code>Expect</code></a>,\nand <code>IPC</code>, but everything I've found so far seems to be in the context of run -> write -> read -> exit, where I need this external application to continue running and the Perl script to continue responding until I kill both.</p>\n\n<p>EDIT: I found a solution in the 'expect' module for perl, by setting the timeout to undef, and calling \"exp_continue\" after my logic, I was able to keep the script running and handling I/O until I kill it.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1527931895, "post_id": 50652378, "comment_id": 88320995, "body": "Your &quot;Hello&quot; was disappearing because greetings in general are removed from questions automatically. See <a href=\"https://meta.stackexchange.com/a/93989/170274\">this answer on <i>Meta</i></a> from <b>Jeff Atwood</b>. I&#39;ve also removed a lot of other unnecessary junk from your question. Your job is to <i>communicate the problem</i> and nothing else; this isn&#39;t a social chat site."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1527909058, "post_id": 50652576, "comment_id": 88316866, "body": "Either way, should check if <code>$terminer</code> is undef, which can still happen with these fixes."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1527933572, "post_id": 50652576, "comment_id": 88321403, "body": "Also check that there is only one parameter passed in <code>@ARGV</code>."}, {"owner": {"reputation": 21, "user_id": 8346775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fce7592af299e29858f6c681311acfc?s=128&d=identicon&r=PG&f=1", "display_name": "Dev Web", "link": "https://stackoverflow.com/users/8346775/dev-web"}, "edited": false, "score": 0, "creation_date": 1527938977, "post_id": 50652576, "comment_id": 88322884, "body": "&lt;STDIN&gt; fixed the problem !!  Thank you so much !"}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 6, "last_activity_date": 1527933324, "last_edit_date": 1527933324, "creation_date": 1527900680, "answer_id": 50652576, "question_id": 50652378, "link": "https://stackoverflow.com/questions/50652378/perl-use-of-uninitialized-value/50652576#50652576", "title": "Perl &quot;Use of uninitialized value&quot;", "body": "<p>When reading from empty angle brackets, <code>&lt;&gt;</code>, Perl reads from the files supplied in <code>@ARGV</code> if there are any. But you didn't have a file there: it was a directory name.</p>\n\n<p>You copy an entry in <code>@ARGV</code> to <code>$directory</code> but also leave it in <code>@ARGV</code>. Then, further down in your code, <code>my $terminer = &lt;&gt;</code> tries to read from the <em>\"file\"</em> (that you have in <code>@ARGV</code> as the directory).</p>\n\n<p>A fix could be either <code>my $directory = shift @ARGV</code> which should empty <code>@ARGV</code> and let you read keyboard input from the empty brackets further on in your code.</p>\n\n<p>Or you could write <code>my $terminer= &lt;STDIN&gt;</code>, so that Perl will read only from the keyboard and not from the files listed in the <code>@ARGV</code> array.</p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 6366580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIEHS.jpg?s=128&g=1", "display_name": "rawatsandeep1989", "link": "https://stackoverflow.com/users/6366580/rawatsandeep1989"}, "edited": false, "score": 0, "creation_date": 1527947408, "post_id": 50657565, "comment_id": 88325122, "body": "&lt;STDIN&gt; is not displaying there after = ."}], "tags": [], "owner": {"reputation": 55, "user_id": 6366580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIEHS.jpg?s=128&g=1", "display_name": "rawatsandeep1989", "link": "https://stackoverflow.com/users/6366580/rawatsandeep1989"}, "is_accepted": false, "score": 0, "last_activity_date": 1527969834, "last_edit_date": 1527969834, "creation_date": 1527947292, "answer_id": 50657565, "question_id": 50652378, "link": "https://stackoverflow.com/questions/50652378/perl-use-of-uninitialized-value/50657565#50657565", "title": "Perl &quot;Use of uninitialized value&quot;", "body": "<p>Additionally, you can also do the following:</p>\n\n<pre><code>chomp(my $terminar = &lt;STDIN&gt;);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8346775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fce7592af299e29858f6c681311acfc?s=128&d=identicon&r=PG&f=1", "display_name": "Dev Web", "link": "https://stackoverflow.com/users/8346775/dev-web"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1527969834, "creation_date": 1527898468, "last_edit_date": 1592644375, "question_id": 50652378, "link": "https://stackoverflow.com/questions/50652378/perl-use-of-uninitialized-value", "title": "Perl &quot;Use of uninitialized value&quot;", "body": "<h3>Perl script</h3>\n<pre><code>my ($directory) = @ARGV; #&quot;www&quot;\n\nif ( not defined $directory ) {\n    die &quot;ERROR&quot;;\n}\n\nif ( defined $directory ) {\n\n    print &quot;Yes or No ? (y/n) : &quot;;\n    my $terminer = &lt;&gt;; \n    chomp $terminer;\n\n    if ( $terminer eq &quot;o&quot; ) {       \n        print &quot;OK&quot;;     \n    }\n    elsif ( $terminer eq &quot;n&quot; ) {\n        ##########\n    }\n}\n</code></pre>\n<p>An error message appears:</p>\n<blockquote>\n<p>Use of uninitialized value $terminer in scalar chomp at test.pl<br />\nUse of uninitialized value $terminer in string eq at test.pl</p>\n</blockquote>\n<p>Can you help me?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1527889644, "post_id": 50651331, "comment_id": 88313641, "body": "Looks like a bug to me. I know perl only stores one line number per statement, but I don&#39;t see how the <code>while</code> ends up with the line number of the <code>if</code> condition."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1527890412, "post_id": 50651331, "comment_id": 88313858, "body": "Curiously, Perl 5.6 says <code>at ... line 6</code>  but Perl 5.8 and better says <code>at ... line 11</code>"}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1527890607, "post_id": 50651331, "comment_id": 88313894, "body": "I have reported this to the Perlbug mailing list."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1527977346, "post_id": 50651331, "comment_id": 88333196, "body": "Very strange. Seems you can get around it by changing <code>while ($choice == 0)</code> into <code>while (not $choice)</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528139690, "post_id": 50651331, "comment_id": 88384377, "body": "Re &quot;<i>I have reported this to the Perlbug mailing list.</i>&quot;, I don&#39;t see it."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 17, "last_activity_date": 1527906137, "last_edit_date": 1527906137, "creation_date": 1527890710, "answer_id": 50651495, "question_id": 50651331, "link": "https://stackoverflow.com/questions/50651331/why-does-perl-provide-a-misleading-line-number-in-this-warning-message/50651495#50651495", "title": "Why does Perl provide a misleading line number in this warning message?", "body": "<p>It would be expensive to store the location of each operator instance. As a compromise, Perl only tracks the location of statements. It does so by adding a location-setting opcode at the start of every statement. The <code>if</code> statement is the last statement to be started before <code>$choice == 0</code> is performed, so the warning is reported as coming from that line.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -MO=Concise,-exec a.pl\n1  &lt;0&gt; enter\n2  &lt;;&gt; nextstate(main 3 a.pl:4) v:*,&amp;,{,x*,x&amp;,x$,$\n3  &lt;$&gt; const[IV 0] s\n4  &lt;0&gt; padsv[$choice:3,12] sRM*/LVINTRO\n5  &lt;2&gt; sassign vKS/2\n6  &lt;;&gt; nextstate(main 4 a.pl:6) v:*,&amp;,{,x*,x&amp;,x$,$           &lt;--- Location set to line 6\n7  &lt;{&gt; enterloop(next-&gt;k last-&gt;p redo-&gt;8) v                  &lt;--- Start of while loop\nl  &lt;0&gt; padsv[$choice:3,12] s                                 &lt;--- $choice == 0\nm  &lt;$&gt; const[IV 0] s\nn  &lt;2&gt; eq sK/2\no  &lt;|&gt; and(other-&gt;8) vK/1\n8      &lt;;&gt; nextstate(main 6 a.pl:9) v:*,&amp;,x*,x&amp;,x$,$\n9      &lt;$&gt; const[PV \"5,6,7\"] s\na      &lt;0&gt; padsv[$choice:3,12] sRM*\nb      &lt;2&gt; sassign vKS/2\nc      &lt;;&gt; nextstate(main 6 a.pl:11) v:*,&amp;,x*,x&amp;,x$,$        &lt;--- Location set to line 11\nd      &lt;0&gt; padsv[$choice:3,12] s                             &lt;--- Start of if statement\ne      &lt;$&gt; const[PV \"-4\"] s\nf      &lt;2&gt; seq sK/2\ng      &lt;|&gt; and(other-&gt;h) vK/1\nh          &lt;0&gt; pushmark s\ni          &lt;$&gt; const[PV \"This isn't going to happen\\n\"] s\nj          &lt;@&gt; print vK\nk      &lt;0&gt; unstack v\n           goto l                                            &lt;--- Jump back to loop expr\np  &lt;2&gt; leaveloop vKP/2\nq  &lt;@&gt; leave[1 ref] vKP/REFC\na.pl syntax OK\n</code></pre>\n\n<p>This is a known limitation. I don't know why they don't simply put a <code>nextstate</code> op in the loop expression.</p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 12, "last_activity_date": 1528545881, "last_edit_date": 1528545881, "creation_date": 1527891077, "answer_id": 50651543, "question_id": 50651331, "link": "https://stackoverflow.com/questions/50651331/why-does-perl-provide-a-misleading-line-number-in-this-warning-message/50651543#50651543", "title": "Why does Perl provide a misleading line number in this warning message?", "body": "<p>Apparently, starting with Perl 5.008, the interpreter began omitting an opcode that let the interpreter know the current line number.</p>\n\n<p>Using the minimalist script:</p>\n\n<pre><code>while ($choice == 0) {\n    $choice = '5,6,7';\n}\n</code></pre>\n\n<p>We get this output from Perl 5.6 and <a href=\"http://metacpan.org/pod/B::Concise\" rel=\"nofollow noreferrer\"><code>B::Concise</code></a>:</p>\n\n<pre><code>$ perl506 -MO=Concise badwarnline.pl\nf  &lt;@&gt; leave[t1] vKP/REFC -&gt;(end)\n1     &lt;0&gt; enter -&gt;2\n2     &lt;;&gt; nextstate(main 2 badwarnline.pl:1) v -&gt;3\ne     &lt;2&gt; leaveloop vK/2 -&gt;f\n3        &lt;{&gt; enterloop(next-&gt;8 last-&gt;e redo-&gt;4) v -&gt;a\n-        &lt;1&gt; null vK/1 -&gt;e\nd           &lt;|&gt; and(other-&gt;4) vK/1 -&gt;e\nc              &lt;2&gt; eq sK/2 -&gt;d\n-                 &lt;1&gt; ex-rv2sv sK/1 -&gt;b\na                    &lt;$&gt; gvsv(*choice) s -&gt;b\nb                 &lt;$&gt; const(IV 0) s -&gt;c\n-              &lt;@&gt; lineseq vKP -&gt;-\n4                 &lt;;&gt; nextstate(main 1 badwarnline.pl:2) v -&gt;5\n7                 &lt;2&gt; sassign vKS/2 -&gt;8\n5                    &lt;$&gt; const(PV \"5,6,7\") s -&gt;6\n-                    &lt;1&gt; ex-rv2sv sKRM*/1 -&gt;7\n6                       &lt;$&gt; gvsv(*choice) s -&gt;7\n8                 &lt;0&gt; unstack v -&gt;9\n9                 &lt;;&gt; nextstate(main 2 badwarnline.pl:1) v -&gt;a\n</code></pre>\n\n<p>and this output from Perl v5.008:</p>\n\n<pre><code>$ perl508 -MO=Concise badwarnline.pl\ne  &lt;@&gt; leave[1 ref] vKP/REFC -&gt;(end)\n1     &lt;0&gt; enter -&gt;2\n2     &lt;;&gt; nextstate(main 2 badwarnline.pl:1) v -&gt;3\nd     &lt;2&gt; leaveloop vK/2 -&gt;e\n3        &lt;{&gt; enterloop(next-&gt;8 last-&gt;d redo-&gt;4) v -&gt;9\n-        &lt;1&gt; null vK/1 -&gt;d\nc           &lt;|&gt; and(other-&gt;4) vK/1 -&gt;d\nb              &lt;2&gt; eq sK/2 -&gt;c\n-                 &lt;1&gt; ex-rv2sv sK/1 -&gt;a\n9                    &lt;#&gt; gvsv[*choice] s -&gt;a\na                 &lt;$&gt; const[IV 0] s -&gt;b\n-              &lt;@&gt; lineseq vKP -&gt;-\n4                 &lt;;&gt; nextstate(main 1 badwarnline.pl:2) v -&gt;5\n7                 &lt;2&gt; sassign vKS/2 -&gt;8\n5                    &lt;$&gt; const[PV \"5,6,7\"] s -&gt;6\n-                    &lt;1&gt; ex-rv2sv sKRM*/1 -&gt;7\n6                       &lt;#&gt; gvsv[*choice] s -&gt;7\n8                 &lt;0&gt; unstack v -&gt;9\n</code></pre>\n\n<p>The main difference between these outputs is the last line produced by 5.006:</p>\n\n<pre><code>9                 &lt;;&gt; nextstate(main 2 badwarnline.pl:1) v -&gt;a\n</code></pre>\n\n<p>which is omitted in the 5.008 output.</p>\n"}, {"tags": [], "owner": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1529505151, "last_edit_date": 1529505151, "creation_date": 1528484840, "answer_id": 50767013, "question_id": 50651331, "link": "https://stackoverflow.com/questions/50651331/why-does-perl-provide-a-misleading-line-number-in-this-warning-message/50767013#50767013", "title": "Why does Perl provide a misleading line number in this warning message?", "body": "<p>This isn't a solution so much as an avenue for for a solution if someone cared to work on it. </p>\n\n<blockquote>\n  <p>It would be expensive to store the location of each operator instance. As a compromise, </p>\n</blockquote>\n\n<p>Recent work I have been doing in deparsing at runtime reduces the need to add additional locations in the tree. </p>\n\n<p>For this example with <a href=\"https://metacpan.org/pod/Devel::Trepan::Deparse\" rel=\"nofollow noreferrer\">Devel::Trepan::Deparse</a> here is what you get:</p>\n\n<pre><code>(trepanpl): disasm\nPackage Main\n------------\n    #4: my $choice = 0;\n        COP (0x195a0b0) dbstate \n        BINOP (0x195a110) sassign \n=&gt;          SVOP (0x195a158) const  IV (0x1953f68) 0 \n            OP (0x195a198) padsv [1] \n    #6: while ($choice == 0){\n        COP (0x1b5b070) dbstate \n        BINOP (0x1b5b0d0) leaveloop \n            LOOP (0x1b5b118) enterloop \n            UNOP (0x1b5b178) null \n                LOGOP (0x1b5b1b8) and \n                    BINOP (0x195a850) eq &lt;&lt;&lt; This is where the error is\n                        OP (0x195a000) padsv [1] \n                        SVOP (0x195a898) const  IV (0x1953fb0) 0 \n                    LISTOP (0x195a6e8) lineseq \n    #9:     $choice = '5,6,7';\n            COP (0x2459530) dbstate \n            BINOP (0x2459590) sassign \n                SVOP (0x24595d8) const  PV (0x2da5ae0) \"5,6,7\" \n                OP (0x21e8618) padsv [1] \n... \n(trepanpl): deparse 0x195a850\nbinary operator ==, eq    \nwhile ($choice == 0)  {\n       ------------\n</code></pre>\n\n<p>And if you put in other offsets you get other choices. For example</p>\n\n<pre><code>(trepanpl): deparse 0x195a000\nnot my, padsv \nwhile ($choice == 0)  {\n       -------\n(trepanpl): deparse 0x21e8618\nnot my, padsv \n$choice = '5,6,7';\n-------\n</code></pre>\n\n<p>Notice that you not only get the text of the line but also where in the line there was a problem. If the code had been</p>\n\n<pre><code>while ($choice == 0 &amp;&amp; $i_feel_pretty == 3) \n</code></pre>\n\n<p>the deparsing would indicate which of the two conditions had the problem, even though they are both on the same line. </p>\n\n<p>So what's needed is to get to OP address when there is a warning or an error and then call <a href=\"https://metacpan.org/pod/distribution/B-DeparseTree/lib/B/DeparseTree.pod\" rel=\"nofollow noreferrer\">B::DeparseTree</a> to report the location and context.</p>\n\n<p>Currently Perl provides  <code>$SIG{__WARN__}</code> and <code>$SIG{__DIE__}</code>, but the value of PL_op is\nnot available at the time the handler is called, even if the handler is an XS sub. <code>PL_op</code> gets saved, then set to a faked up <code>OP_ENTERSUB</code>a for the\npurposes of calling the handler.</p>\n\n<p>However there is hope that addressing this can be done quicker than fixing this bug which has existed for 16 years, and that I doubt will be addressed anytime soon. See <a href=\"https://www.nntp.perl.org/group/perl.perl5.porters/2018/06/msg251220.html\" rel=\"nofollow noreferrer\">perl #133239</a>.</p>\n\n<p>Finally I'll say that <strike>right now B::DeparseTree doesn't go back to 5.16 and</strike> the code in general needs more love than I can give it by myself.</p>\n"}], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 50651495, "answer_count": 3, "score": 10, "last_activity_date": 1529505151, "creation_date": 1527889426, "last_edit_date": 1528067260, "question_id": 50651331, "link": "https://stackoverflow.com/questions/50651331/why-does-perl-provide-a-misleading-line-number-in-this-warning-message", "title": "Why does Perl provide a misleading line number in this warning message?", "body": "<p>I have isolated a case where Perl provides a very misleading line number in a warning message. I tested the below in Strawberry Perl 5.16.3.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $choice = 0;\n\nwhile ($choice == 0){\n\n    #This is not numeric\n    $choice = '5,6,7';\n\n    if ($choice eq '-4'){\n        print \"This isn't going to happen\\n\";\n    }\n}\n</code></pre>\n\n<p>When you run this, you will get the warning message <code>Argument \"5,6,7\" isn't numeric in numeric eq (==) at example.pl line 11</code>. But line 11 corresponds to the line <code>if ($choice eq '-4'){</code> which cannot possibly cause this warning message because it does not contain a numeric comparison.</p>\n\n<p>It seems what's <em>actually</em> happening is that Perl advances to the next comparison, <code>while ($choice == 0){</code>, but the line counter used for the warning message does not advance.</p>\n\n<p>What makes this particular case worse is that, since the \"bad\" comparison is the loop condition, it is actually far away from the provided line. In my (pre-simplification) script, it was hundreds of lines away from the provided line number.</p>\n\n<p>Is this a bug or just an unfortunate limitation of the parser?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1527872685, "creation_date": 1527872685, "answer_id": 50648113, "question_id": 50647777, "link": "https://stackoverflow.com/questions/50647777/editing-xml-file-with-multiple-attributes-using-xmllibxml/50648113#50648113", "title": "Editing XML file with multiple attributes using XML::LibXML", "body": "<p>This should do as you want. Note that I'm unable to test anything at present</p>\n\n<p>Your XPath expression <code>/Books/Book</code> may need fixing, as the XML data you show has elements <code>&lt;books&gt;</code> and <code>&lt;book&gt;</code>, and I have no way of knowing which is correct</p>\n\n<pre><code>for my $book ( $xml_data-&gt;findnodes('/Books/Book') ) {\n\n    next unless $book-&gt;getAttribute('name') eq $searchString;\n\n    $book-&gt;setAttribute('value', 'available');\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9882180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbead434f0494d1c7c5c2d85e334238d?s=128&d=identicon&r=PG&f=1", "display_name": "BetsegaYedane", "link": "https://stackoverflow.com/users/9882180/betsegayedane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 50648113, "answer_count": 1, "score": 1, "last_activity_date": 1527872685, "creation_date": 1527871212, "last_edit_date": 1527872141, "question_id": 50647777, "link": "https://stackoverflow.com/questions/50647777/editing-xml-file-with-multiple-attributes-using-xmllibxml", "title": "Editing XML file with multiple attributes using XML::LibXML", "body": "<p>I was trying to edit an existing XML file based on the node attribute name value.</p>\n\n<p>For example:</p>\n\n<pre><code>&lt;books&gt;\n    &lt;book name = 'Pride and Prejudice'   value='not available' price='10'/&gt;\n    &lt;book name = 'To kill a Mockingbird'  value='available' price='8'/&gt;\n    &lt;book name = 'The Face of a Stranger' value='not available' price='16'/&gt;\n&lt;/books&gt;\n</code></pre>\n\n<p>The goal is if name attribute value matches then change the value attribute. For example, if the name \"Pride and Prejudice\" matches the search then change the value attribute to \u201cavailable\u201d.  </p>\n\n<p>The output should look like:</p>\n\n<pre><code>&lt;books&gt;\n    &lt;book name = 'Pride and Prejudice' value='available' price='10'/&gt;\n    &lt;book name = 'To kill a Mockingbird' value='available' price='8'/&gt;\n    &lt;book name = 'The Face of a Stranger' value='not available' price='16'/&gt;\n&lt;/books&gt;\n</code></pre>\n\n<p>I was able to read the XML file and match the name values but couldn\u2019t figure out how to change the attribute value.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>my $xml_data = XML::LibXML-&gt;load_xml(location =&gt; a.xml);\n\nfor my $nodes ( $xml_data-&gt;findnodes('/Books/Book') ) {\n\n    my $att_name = $nodes-&gt;findvalue('@name');\n    my $att_val  = $nodes-&gt;findvalue('@value');\n\n    if ( $searchString eq $att_name ) {\n         &lt;how do I change the attribute value?&gt;\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1527864743, "post_id": 50646000, "comment_id": 88302631, "body": "The value for the uri may be an overloaded object, not just a string?  What is <code>ref $results-&gt;{uri}</code>?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 6, "creation_date": 1527864867, "post_id": 50646000, "comment_id": 88302696, "body": "Please show the code of <code>SUPER::foo</code>."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1527865728, "post_id": 50646000, "comment_id": 88303261, "body": "<code>my $self = shift;</code> is missing from your example code.  Putting that aside, you should be asking your code &quot;What does <code>$self-&gt;SUPER::foo();</code> return?&quot;, and then next &quot;What does the caller of sub <code>foo</code> do with the value returned from <code>$results</code>?&quot;"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1527865983, "post_id": 50646000, "comment_id": 88303427, "body": "Thanks for the update demonstrating unpacking of <code>@_</code> in your example code. Next question: Should <code>$self-&gt;SUPER::foo($self)</code> really be <code>$self-&gt;SUPER::foo($arg)</code>?"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1527866115, "post_id": 50646000, "comment_id": 88303501, "body": "Alright, after the edits it&#39;s coming together more, but what is posted does not demonstrate what is returned by <code>$self-&gt;SUPER::foo($arg)</code>, and doesn&#39;t show the code that is attempting to use the value returned from <code>$result</code> as a hashref."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1527866147, "post_id": 50646000, "comment_id": 88303518, "body": "Again, please show the code of <code>SUPER::foo</code>."}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "edited": false, "score": 1, "creation_date": 1527866163, "post_id": 50646000, "comment_id": 88303529, "body": "I know, but when I try to do <code>print ref($results)</code> nothing is printed!"}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1527866210, "post_id": 50646000, "comment_id": 88303561, "body": "@Borodin the reason why I didn&#39;t post it until now is because the code is not mine and I&#39;m not sure to understand it, and so to extrapolate the minimum amount of code."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1527866320, "post_id": 50646000, "comment_id": 88303627, "body": "Do the file and line number of the error message correspond to a line in <code>sub foo</code>?"}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "edited": false, "score": 1, "creation_date": 1527866395, "post_id": 50646000, "comment_id": 88303666, "body": "The error corresponds to the line of <code>$results-&gt;{uri} .= &#39;hey&#39;; </code>"}], "answers": [{"comments": [{"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "edited": false, "score": 0, "creation_date": 1527866891, "post_id": 50646650, "comment_id": 88303954, "body": "Are you saying that <code>$results</code> is actually a string?"}, {"owner": {"reputation": 178, "user_id": 3960762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bqvHi.png?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/3960762/jonathan"}, "reply_to_user": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "edited": false, "score": 0, "creation_date": 1527867051, "post_id": 50646650, "comment_id": 88304037, "body": "Yes, specifically the string &quot;hey&quot; and that&#39;s why calling <code>ref</code> on it returns an empty string."}], "tags": [], "owner": {"reputation": 178, "user_id": 3960762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bqvHi.png?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/3960762/jonathan"}, "is_accepted": false, "score": 0, "last_activity_date": 1527866584, "creation_date": 1527866584, "answer_id": 50646650, "question_id": 50646000, "link": "https://stackoverflow.com/questions/50646000/cant-use-string-as-a-hash-ref-while-strict-refs-when-updating-hash-key-in-per/50646650#50646650", "title": "Can&#39;t use string as a HASH ref while &quot;strict refs&quot; when updating hash key in perl?", "body": "<p>You'll get this from Perl if the contents of <code>$results</code> after calling <code>$self-&gt;SUPER::foo($arg);</code> is the string literal <code>'hey'</code> instead of a HASHREF - much as if you were to do the following:</p>\n\n<pre><code>my $results = 'hey'\n$results-&gt;{uri} .= 'hey';\n</code></pre>\n"}], "owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1527866584, "creation_date": 1527864358, "last_edit_date": 1527866003, "question_id": 50646000, "link": "https://stackoverflow.com/questions/50646000/cant-use-string-as-a-hash-ref-while-strict-refs-when-updating-hash-key-in-per", "title": "Can&#39;t use string as a HASH ref while &quot;strict refs&quot; when updating hash key in perl?", "body": "<p>I'm trying to update the hash returned by a sub with:</p>\n\n<pre><code>sub foo {\n    my ($self, $arg) = @_;\n    my $results = $self-&gt;SUPER::foo($arg);\n    $results-&gt;{uri} .= 'hey'; # I want to append 'hey' to the value of the already defined 'uri'\n    return $results;\n}\n</code></pre>\n\n<p>But I'm getting:</p>\n\n<pre><code>Can't use string (\"hey\") as a HASH ref while \"strict refs\"\n</code></pre>\n\n<p>I know that's a common error, but I can't understand why it happens in my case.</p>\n"}, {"tags": ["excel", "perl", "xlsx"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1527863110, "post_id": 50645400, "comment_id": 88301622, "body": "Why don&#39;t you try it?"}], "answers": [{"tags": [], "owner": {"reputation": 1790, "user_id": 2934827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/67024440419e02c6c2bfca52faa2c708?s=128&d=identicon&r=PG&f=1", "display_name": "jsh6303", "link": "https://stackoverflow.com/users/2934827/jsh6303"}, "is_accepted": false, "score": 0, "last_activity_date": 1527868873, "creation_date": 1527868873, "answer_id": 50647269, "question_id": 50645400, "link": "https://stackoverflow.com/questions/50645400/how-to-read-data-from-xlsx-in-perl-if-the-xlsx-file-have-collapsed-rows/50647269#50647269", "title": "How to read data from xlsx in Perl if the xlsx file have collapsed rows", "body": "<p>Yes it will count the collapsed columns.</p>\n"}], "owner": {"reputation": 1790, "user_id": 2934827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/67024440419e02c6c2bfca52faa2c708?s=128&d=identicon&r=PG&f=1", "display_name": "jsh6303", "link": "https://stackoverflow.com/users/2934827/jsh6303"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527868873, "creation_date": 1527862441, "question_id": 50645400, "link": "https://stackoverflow.com/questions/50645400/how-to-read-data-from-xlsx-in-perl-if-the-xlsx-file-have-collapsed-rows", "title": "How to read data from xlsx in Perl if the xlsx file have collapsed rows", "body": "<p>Is the perl library <code>Spreadsheet::ParseXLSX</code> able to parse xlsx files that has collapsed rows?</p>\n\n<p>I am trying to parse a xlsx file generated from another program. The xlsx file might have collapsed rows.</p>\n\n<p>Trying to understand is there any methods in this library that can be used to expand all collapsed rows while parsing the file?</p>\n"}, {"tags": ["perl", "unit-testing"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1527861706, "post_id": 50645106, "comment_id": 88300715, "body": "Here are some examples: <a href=\"https://perlmaven.com/diag-note-explain\" rel=\"nofollow noreferrer\">Test diagnostic messages using diag, note, and explain</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1527861992, "post_id": 50645106, "comment_id": 88300911, "body": "It&#39;s probably easier just to show the subroutine and have us diagnose the problem"}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1527862019, "post_id": 50645106, "comment_id": 88300934, "body": "@H&#229;konH&#230;gland <code>diag explain $result</code> did the trick, thank you! If you post it as an answer I&#39;ll choose it"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1527862590, "post_id": 50645106, "comment_id": 88301302, "body": "@justHelloWorld Sure I would like to, but now I found a good answer <a href=\"https://stackoverflow.com/questions/6162647/how-can-simply-send-info-to-stdout-in-a-test\">here</a>. Maybe this question should be marked as a duplicate?"}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "edited": false, "score": 0, "creation_date": 1527862727, "post_id": 50645106, "comment_id": 88301392, "body": "Personally, I don&#39;t see any reference to <code>explain</code>, which is more useful for this case where I want to print the content of an hash. No?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1527862854, "post_id": 50645106, "comment_id": 88301470, "body": "@justHelloWorld Yes you are right I think it does not mention explain.. so maybe I will write a short answer then"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1527868007, "post_id": 50645106, "comment_id": 88304580, "body": "It doesn&#39;t really matter if you use Data::Dumper and <code>diag</code> or the Test::More helper <code>explain</code>. I would just use Data::Printer&#39;s <code>p</code>, which sends output to STDERR by default anyway, so it doesn&#39;t mess with TAP. (You <i>can</i> <code>print</code> from tests, but you need to produce valid TAP or it breaks your tests and <code>prove</code> complains)."}], "owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "closed_date": 1527863275, "answer_count": 0, "score": 0, "last_activity_date": 1527861927, "creation_date": 1527861545, "last_edit_date": 1527861927, "question_id": 50645106, "link": "https://stackoverflow.com/questions/50645106/how-to-print-hash-keys-inside-unit-tests", "closed_reason": "Duplicate", "title": "How to print hash keys inside unit tests?", "body": "<p>One of my unit tests gives this error:</p>\n\n<pre><code>#   Failed test at t/test.t line 53.\n#                   'HASH(0x55fd82c77b80)value'\n#     doesn't match '(?-xism:'value')'\n</code></pre>\n\n<p>Which make me think that a subroutine that I thought returned a string actually returns a hash. Notice that my override of this sub is:</p>\n\n<pre><code>sub foo {\n    return $self-&gt;SUPER::foo($arg1, $arg2, $arg3).'value';\n}\n</code></pre>\n\n<p>Since I have no idea why this happens, I want to print all the keys of the hash. There are <a href=\"https://stackoverflow.com/questions/7071229/printing-perl-hash-keys\">plenty</a> of questions about how to do print hash keys in perl, but how to do it in unit tests (where you can't simply <code>print</code>)? </p>\n"}, {"tags": ["perl", "session", "authentication", "catalyst"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1527859052, "post_id": 50644333, "comment_id": 88298964, "body": "Can you please explain what you mean by <i>another sessions automatically turns to invalid</i>? The user&#39;s old sessions on the same system? Different users&#39; sessions? The user&#39;s sessions on other systems? You can <a href=\"https://stackoverflow.com/posts/50644333/edit\">edit</a> your question."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1527861511, "post_id": 50644333, "comment_id": 88300591, "body": "You&#39;re asking for any open sessions on any other server from any other client to be logged out when a user logs in somewhere? That&#39;s a tall order. Do all the servers even know about and communicate with each other?"}, {"owner": {"reputation": 195, "user_id": 1759997, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/542bd7d78f1304b2249e5b3d4102cb89?s=128&d=identicon&r=PG", "display_name": "shootnix", "link": "https://stackoverflow.com/users/1759997/shootnix"}, "edited": false, "score": 0, "creation_date": 1527863549, "post_id": 50644333, "comment_id": 88301919, "body": "Actually, there is only one server. All I need is to logout user from another devices when he logs in from somewhere else."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1527866566, "post_id": 50644333, "comment_id": 88303755, "body": "I think it also depends on your underlying session storage layer. You could certainly add code that looks into the sessions and invalidates (i.e. deletes from storage) all the other ones associated to this user. But it would be implementation-specific."}, {"owner": {"reputation": 195, "user_id": 1759997, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/542bd7d78f1304b2249e5b3d4102cb89?s=128&d=identicon&r=PG", "display_name": "shootnix", "link": "https://stackoverflow.com/users/1759997/shootnix"}, "edited": false, "score": 0, "creation_date": 1527868041, "post_id": 50644333, "comment_id": 88304597, "body": "Hmmm, I thought there is kinda &quot;generic&quot; methods or even a special options in config..."}], "owner": {"reputation": 195, "user_id": 1759997, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/542bd7d78f1304b2249e5b3d4102cb89?s=128&d=identicon&r=PG", "display_name": "shootnix", "link": "https://stackoverflow.com/users/1759997/shootnix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1527866501, "creation_date": 1527858959, "last_edit_date": 1527866501, "question_id": 50644333, "link": "https://stackoverflow.com/questions/50644333/catalyst-how-to-delete-all-another-sessions-when-user-has-been-authorized", "title": "Catalyst: how to delete all another sessions when user has been authorized?", "body": "<p>I'm using\n<a href=\"https://metacpan.org/pod/Catalyst::Plugin::Authentication\" rel=\"nofollow noreferrer\"><code>Catalyst::Plugin::Authentication</code></a>\nto authenticate users and\n<a href=\"https://metacpan.org/pod/Catalyst::Plugin::Session\" rel=\"nofollow noreferrer\"><code>Catalyst::Plugin::Session</code></a>\nto track sessions. Is it possible to solve my problem using these plugins?</p>\n\n<p>When a user has been authorized at some place, other sessions (the same user on other platforms, browsers etc.) automatically change to invalid. There can be only one working session from this particular user at the same time.</p>\n"}, {"tags": ["perl", "debugging", "shared-libraries", "trace", "xs"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1527860287, "post_id": 50643536, "comment_id": 88299763, "body": "You might find some relevant information in <a href=\"https://perldoc.perl.org/perlhacktips.html\" rel=\"nofollow noreferrer\">perlhacktips</a>"}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1528021717, "post_id": 50643536, "comment_id": 88340702, "body": "You&#39;ll have to use a low-level debugger like <code>gdb</code>."}, {"owner": {"reputation": 3294, "user_id": 2190251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9318640992144436a6b04d07eb947933?s=128&d=identicon&r=PG", "display_name": "FelixEnescu", "link": "https://stackoverflow.com/users/2190251/felixenescu"}, "edited": false, "score": 0, "creation_date": 1529423283, "post_id": 50643536, "comment_id": 88863463, "body": "If you are interested only in system calls you can use strace"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1547839617, "post_id": 50643536, "comment_id": 95344651, "body": "Seems like this is possible with <code>gdb</code>, see <a href=\"https://stackoverflow.com/q/6947389/2173773\">How to print every executed line in GDB automatically until a given breakpoint is reached?</a> and the accepted answer therein."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 10, "last_activity_date": 1528045852, "creation_date": 1528045852, "answer_id": 50668953, "question_id": 50643536, "link": "https://stackoverflow.com/questions/50643536/how-do-i-trace-through-an-xs-so-file/50668953#50668953", "title": "How do I trace through an XS .so file?", "body": "<p>Here is an example of using <code>gdb</code> to step into a shared library. I am using Linux (Ubuntu 18.04). </p>\n\n<p>I first installed a debugging version of Perl using <code>perlbrew</code>:</p>\n\n<pre><code>perlbrew install perl-5.26.2 --as=5.26.2d -DDEBUGGING\nperlbrew use 5.26.2d\n</code></pre>\n\n<p>Then, I created a shared library (stripped down to a very minimal content for testing purposes) in folder <code>/home/hakon/mylib</code>:</p>\n\n<p><strong>mylib.c</strong> </p>\n\n<p>This function is adapted from example 3 in <a href=\"http://perldoc.perl.org/perlxstut.html\" rel=\"noreferrer\"><code>perlxstut</code></a>:</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include \"myclib.h\"\ndouble my_clib_function( double arg ) {\n    if (arg &gt; 0.0) {\n        arg = floor(arg + 0.5);\n    } else if (arg &lt; 0.0) {\n        arg = ceil(arg - 0.5);\n    } else {\n        arg = 0.0;\n    }\n    return arg;\n}\n</code></pre>\n\n<p><strong>myclib.h</strong>:</p>\n\n<pre><code>double my_clib_function( double arg );\n</code></pre>\n\n<p>Then I created the shared library <code>libmylib.so</code>:</p>\n\n<pre><code>gcc -g -c -fpic mylib.c\ngcc -g -shared -o libmylib.so mylib.o\n</code></pre>\n\n<p>Note that we have included debugging symbols in <code>libmylib.so</code> by giving the <code>-g</code> switch to <code>gcc</code>.</p>\n\n<p>Now, we can create an <code>.xs</code> file that will call the shared library function (in folder <code>/home/hakon/myxstest</code>):</p>\n\n<p><strong>Mytest.xs</strong></p>\n\n<pre><code>#define PERL_NO_GET_CONTEXT\n#include \"EXTERN.h\"\n#include \"perl.h\"\n#include \"XSUB.h\"\n\n#include \"myclib.h\"\n\nMODULE = Mytest     PACKAGE = Mytest        \n\nvoid\nwrapper(arg)\n        double  arg\n    CODE:\n        arg = my_clib_function( arg);\n    OUTPUT:\n        arg\n</code></pre>\n\n<p>Then we need to link the XS file to a Perl package name:</p>\n\n<p><strong>lib/Mytest.pm</strong>:</p>\n\n<pre><code>package Mytest;\nuse 5.022001;\nuse strict;\nuse warnings;\n\nrequire Exporter;\nour @ISA = qw(Exporter);\nour %EXPORT_TAGS = ( 'all' =&gt; [ qw() ] );\nour @EXPORT_OK = ( @{ $EXPORT_TAGS{'all'} } );\nour @EXPORT = qw();\nour $VERSION = '0.01';\n\nrequire XSLoader;\nXSLoader::load('Mytest', $VERSION);\n</code></pre>\n\n<p>Next, we need a build system like <code>ExtUtils::MakeMaker</code> to compile the\nXS file (into another shared library):</p>\n\n<p><strong>Makefile.PL</strong>:</p>\n\n<pre><code>use 5.022001;\nuse ExtUtils::MakeMaker;\nmy $lib_dir = '/home/hakon/mylib';\nWriteMakefile(\n    NAME              =&gt; 'Mytest',\n    VERSION_FROM      =&gt; 'lib/Mytest.pm', \n    PREREQ_PM         =&gt; {},\n    ABSTRACT_FROM     =&gt; 'lib/Mytest.pm',\n    AUTHOR            =&gt; 'H\u00e5kon H\u00e6gland &lt;xxx.yyy@gmail.com&gt;',\n    LIBS              =&gt; [\"-L$lib_dir -lmylib\"],\n    INC               =&gt; \"-I. -I$lib_dir\",\n    OPTIMIZE          =&gt; '-g',\n);\n</code></pre>\n\n<p>Note that we request debugging symbols (for the <code>Mytest.so</code> shared object) with <code>OPTIMIZE =&gt; '-g'</code> and we inform about the location of the other shared library <code>libmylib.so</code> by using the <code>LIBS</code> argument to <code>WriteMakefile()</code>.</p>\n\n<p>We then compile the XS code:</p>\n\n<pre><code>perl Makefile.PL\nmake\n</code></pre>\n\n<p>Finally, we write a small test Perl script:</p>\n\n<p><strong>p.pl</strong></p>\n\n<pre><code>#! /usr/bin/env perl\nuse feature qw(say);\nuse strict;\nuse warnings;\nuse ExtUtils::testlib;\nuse Mytest;\n\nmy $res = 3.5;\nMytest::wrapper( $res ); # &lt;-- Warning: modifies $res in place !\nsay $res;\n</code></pre>\n\n<p>We can know run <code>gdb</code> on our test script <code>p.pl</code>:</p>\n\n<pre><code>$ gdb -q --args perl p.pl\nReading symbols from perl...done.\n</code></pre>\n\n<p>We set a breakpoint at line 14 in the XS file:</p>\n\n<pre><code>(gdb) break Mytest.xs:14\nNo source file named Mytest.xs.\nMake breakpoint pending on future shared library load? (y or [n]) y\nBreakpoint 1 (Mytest.xs:14) pending.\n</code></pre>\n\n<p>Then run the script:</p>\n\n<pre><code>(gdb) run\nStarting program: /home/hakon/perlbrew/perls/5.26.2d/bin/perl p.pl\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\nBreakpoint 1, XS_Mytest_wrapper (cv=0x555555bdc860) at Mytest.xs:14\n14          arg = my_clib_function( arg);\n</code></pre>\n\n<p>Now we have stopped at the point in the XS file where we will call the shared library function. If we want, we can inspect the arguments that will be passed:</p>\n\n<pre><code>(gdb) p arg\n$1 = 3.5\n</code></pre>\n\n<p>Then step into the shared library:</p>\n\n<pre><code>(gdb) s\nmy_clib_function (arg=3.5) at mylib.c:5\n5       if (arg &gt; 0.0) {\n</code></pre>\n\n<p>and so on..</p>\n"}], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 583, "favorite_count": 3, "answer_count": 1, "score": 13, "last_activity_date": 1547628974, "creation_date": 1527856385, "question_id": 50643536, "link": "https://stackoverflow.com/questions/50643536/how-do-i-trace-through-an-xs-so-file", "title": "How do I trace through an XS .so file?", "body": "<p>I have a small Perl program. The program loads a module. The module loads an .so file with <a href=\"http://p3rl.org/XSLoader\" rel=\"noreferrer\">XSLoader</a>. This Perl runs on Linux and is built with gcc and <code>-DDEBUGGING</code>, and subsequently so is the .so file. I can recompile.</p>\n\n<p>When the Perl program is executed, how do I trace through the C functions in the .so file? I need to know the names of the functions in the order they run. It would be nice to have the function arguments, too.</p>\n"}, {"tags": ["linux", "perl", "sed"], "comments": [{"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 2, "creation_date": 1527839544, "post_id": 50638581, "comment_id": 88287133, "body": "Please, show the expected output."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1527839619, "post_id": 50638581, "comment_id": 88287169, "body": "You mean <code>Offset is 0x30 (collision is not found).</code> You have tried anything in <code>sed, perl</code>..."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1527839727, "post_id": 50638581, "comment_id": 88287226, "body": "<code>while($str=~m&#47;Offset([^\\.]+)\\.&#47;gs) {  print &quot;Matched: $&amp;\\n&quot;; }</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9171470"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1527839736, "post_id": 50638581, "comment_id": 88287232, "body": "@ssr1012, yes, that is."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1527840051, "post_id": 50638581, "comment_id": 88287392, "body": "There are various ways. (1) Process line-by line, set a flag when you find <code>Offset</code>, then look for <code>.</code>. Once you find it unset the flag , continue (2) Read by paragraphs and do a multiline regex search on each (3) Read a whole file in and do a multiline regex with <code>&#47;g</code> ... have you tried anything?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9171470"}, "edited": false, "score": 0, "creation_date": 1527845020, "post_id": 50638703, "comment_id": 88290326, "body": "It shouldn&#39;t to capture <code>OK.</code>"}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 0, "creation_date": 1527845381, "post_id": 50638703, "comment_id": 88290548, "body": "U p d a t e d ."}], "tags": [], "owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "is_accepted": false, "score": 2, "last_activity_date": 1527845301, "last_edit_date": 1527845301, "creation_date": 1527839877, "answer_id": 50638703, "question_id": 50638581, "link": "https://stackoverflow.com/questions/50638581/extract-text-from-two-lines/50638703#50638703", "title": "Extract text from two lines", "body": "<p>In GNU awk:</p>\n\n<pre><code>$ awk -v RS=\"\" '{print gensub(/.*(Offset[^.]*\\.).*/,\"\\\\1\",1)}' file\nOffset\nis 0x30 (collision is not found).\nOffset\nis 0x35 (collision is found).\n</code></pre>\n\n<p>Explained:</p>\n\n<pre><code>$ awk -v RS=\"\" '                                # separare records by empty lines\n{\n    print gensub(/.*(Offset[^.]*\\.).*/,\"\\\\1\",1) # replace record with what starts\n}' file                                         # with Offset up to the first .\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9171470"}, "edited": false, "score": 0, "creation_date": 1527847029, "post_id": 50638761, "comment_id": 88291658, "body": "Shortly <code>perl -0777 -nlE &#39;say &quot;$&amp;\\n&quot; while m&#47;Offset([^\\.]*)\\.&#47;g&#39; file</code>"}], "tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 1, "last_activity_date": 1527840133, "creation_date": 1527840133, "answer_id": 50638761, "question_id": 50638581, "link": "https://stackoverflow.com/questions/50638581/extract-text-from-two-lines/50638761#50638761", "title": "Extract text from two lines", "body": "<p>In perl you can try this way:</p>\n\n<pre><code>my $str = \"Generate random sequence...\nAppended bytes 000A - Offset\nis 0x30 (collision is not found). OK.\n\nGenerate random sequence...\nAppended bytes 3725 - Offset\nis 0x35 (collision is found). OK.\n\";\n\nwhile($str=~m/Offset([^\\.]+)\\./gs) #Upto the first dot we will fetch the text\n{ \n    print \"Matched: $&amp;\\n\"; #Matched string will be printed here\n}\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9171470"}, "edited": false, "score": 0, "creation_date": 1527844855, "post_id": 50639161, "comment_id": 88290216, "body": "Thank you, but this is not exactly what I need. Should be captured all <code>Offset ... found).</code>, not only first match."}, {"owner": {"reputation": 383, "user_id": 4276567, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Q8_PpGMkHoY/AAAAAAAAAAI/AAAAAAAAACs/VARkbHP6qQ8/photo.jpg?sz=128", "display_name": "Hazzard17", "link": "https://stackoverflow.com/users/4276567/hazzard17"}, "edited": false, "score": 0, "creation_date": 1527846883, "post_id": 50639161, "comment_id": 88291582, "body": "@KatePage this captures all <code>Offset ... found).</code>, not only the first!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9171470"}, "edited": false, "score": 0, "creation_date": 1527847971, "post_id": 50639161, "comment_id": 88292198, "body": "I found where was an error! Thank you for your patience."}], "tags": [], "owner": {"reputation": 383, "user_id": 4276567, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Q8_PpGMkHoY/AAAAAAAAAAI/AAAAAAAAACs/VARkbHP6qQ8/photo.jpg?sz=128", "display_name": "Hazzard17", "link": "https://stackoverflow.com/users/4276567/hazzard17"}, "is_accepted": true, "score": 4, "last_activity_date": 1527841695, "creation_date": 1527841695, "answer_id": 50639161, "question_id": 50638581, "link": "https://stackoverflow.com/questions/50638581/extract-text-from-two-lines/50639161#50639161", "title": "Extract text from two lines", "body": "<p>With <code>sed</code>:</p>\n\n<pre><code>sed -nr \"/Offset/ {N; s/.*Offset\\n([^\\.]*\\.).*/Offset \\1/p}\" file\n</code></pre>\n\n<p><code>N</code> adds next line to pattern space, then do normal substitution.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9171470"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 50639161, "answer_count": 3, "score": 0, "last_activity_date": 1527845301, "creation_date": 1527839427, "question_id": 50638581, "link": "https://stackoverflow.com/questions/50638581/extract-text-from-two-lines", "title": "Extract text from two lines", "body": "<p>Here a file which I have</p>\n\n<pre><code>Generate random sequence...\nAppended bytes 000A - Offset\nis 0x30 (collision is not found). OK.\n\nGenerate random sequence...\nAppended bytes 3725 - Offset\nis 0x35 (collision is found). OK.\n\n...\n</code></pre>\n\n<p>and etc. I need extract text started since <code>Offset</code> till first dot on the next string. What I should to say <code>sed</code> (or <code>perl</code>) that it extract required text block?</p>\n"}, {"tags": ["regex", "bash", "perl"], "comments": [{"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1527788083, "post_id": 50629795, "comment_id": 88269622, "body": "If you could post sample input too it would be more easier for us too."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1527789495, "post_id": 50629795, "comment_id": 88270282, "body": "@Inian Why did you tag this <code>sed</code>? Nothing in the code or question even mentions sed. <code>bash</code> is a relevant tag because the problem is caused by shell quoting and parameter expansion (<code>$1</code>)."}, {"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1527789626, "post_id": 50629795, "comment_id": 88270347, "body": "@melpomene: Agree you are right about the <code>$1</code> and the quoting issue. In general both warrants a tag to be made generic to <code>shell</code>, nothing that is totally <code>bash</code> specific. But didn&#39;t notice the <code>$1</code>, but no harm in having the tag"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1527793788, "post_id": 50629937, "comment_id": 88272413, "body": "<code>\\x39</code> could be used instead of <code>&#39;\\&#39;&#39;</code>. Both more and less readable."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1527836009, "post_id": 50629937, "comment_id": 88285245, "body": "@ikegami But only because it&#39;s in the context of a double-quotish construct in Perl. <code>&#39;\\&#39;&#39;</code> is at least somewhat nicer because it works at the shell level and produces an actual <code>&#39;</code> (and because I don&#39;t have to remember hex codes to use it)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1527836326, "post_id": 50629937, "comment_id": 88285426, "body": "Re &quot;<i>But only because it&#39;s in the context of a double-quotish construct in Perl.</i>&quot;, Yes, it&#39;s not a general solution. But when talking about Perl programs, you can always avoid using single quotes, by using <code>q{}</code>, <code>\\x39</code> or something else"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1527836366, "post_id": 50629937, "comment_id": 88285453, "body": "Re &quot;<i>and because I don&#39;t have to remember hex codes to use it</i>&quot;, Like I said, it not only makes the code more readable (by avoiding a mess of symbols), it also makes it less readable (by using a &quot;magic number&quot;). It&#39;s a pretty simple thing to remember, though."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 0, "last_activity_date": 1527788477, "creation_date": 1527788477, "answer_id": 50629937, "question_id": 50629795, "link": "https://stackoverflow.com/questions/50629795/cannot-increment-build-number-in-file/50629937#50629937", "title": "Cannot increment build number in file", "body": "<p>Your problem is caused by your use of <code>\"...\"</code> to wrap the Perl code in the shell. This will make the shell interpolate its <code>$1</code> variable into the code before perl even sees it.</p>\n\n<p>Fix:</p>\n\n<pre><code>perl -pe 's~\\.([0-9]+)(?='\\''/\\* BUILD-NUMBER \\*/)~sprintf \".%03d\", $1 + 1~e'\n</code></pre>\n\n<p>By the way, this is how you get a <code>'</code> into a <code>'...'</code> string in the shell:</p>\n\n<ul>\n<li><code>'</code> - end the quoted section</li>\n<li><code>\\'</code> - a literal <code>'</code> (backslash escaped)</li>\n<li><code>'</code> - restart the quoted section</li>\n</ul>\n\n<p>I changed your regex to use look-ahead in order to not capture the <code>'/* BUILD-NUMBER */</code> part, which means I don't have to substitute it back in.</p>\n\n<p><code>016</code> will not be interpreted as octal. Octal is only assumed for literals in your source code; in data it's always taken as decimal.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2191247"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 50629937, "answer_count": 1, "score": 1, "last_activity_date": 1527789451, "creation_date": 1527787902, "last_edit_date": 1527789451, "question_id": 50629795, "link": "https://stackoverflow.com/questions/50629795/cannot-increment-build-number-in-file", "title": "Cannot increment build number in file", "body": "<p>I'd like to increment the build number in a file as part of the build process.</p>\n\n<p>The intent of the script is to search for <code>.###'/* BUILD-NUMBER */</code>, as in:</p>\n\n<pre><code>console.log('Version 1.1.017'/* BUILD-NUMBER */);\n</code></pre>\n\n<p>Parse out the <code>017</code>, add one, then <code>sprint</code> it back. This is the code I have:</p>\n\n<pre><code>perl -pe \"s~\\.([0-9]+)'/\\* BUILD-NUMBER \\*/~(sprintf('.%03d%c/* BUILD-NUMBER */', $1, 39))~e\" &lt; $U &gt; $T\n</code></pre>\n\n<p>The <code>39</code> is to match with <code>%c</code> to print an apostrophe <code>'</code> because I couldn't figure out how to put one in literally. (It goes into a bash script.)</p>\n\n<p>Anyway, when I run the above, it comes back:</p>\n\n<pre><code>console.log('Version 1.1.001'/* BUILD-NUMBER */);\n</code></pre>\n\n<p>So, I think it's not getting the number. I tried <code>$0</code>, <code>$1</code>, <code>\\g1</code>, etc. but it brings back some weird stuff. Not seeing <code>17</code> anywhere.</p>\n\n<p>Also, will the leading zeroes in the build number force <code>perl</code> to interpret the string as octal? (The reason for using <code>017</code> as the test case, to see if it comes back as <code>016</code> or <code>018</code>.)</p>\n"}, {"tags": ["perl", "vim"], "answers": [{"comments": [{"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1527785437, "post_id": 50629050, "comment_id": 88268370, "body": "Thanks for the tip! One of the downsides of &#39;\\&#39; being special is that searching for <code>&#47;\\Vprintk(&quot;Error\\n&quot;)</code> doesn&#39;t work, but probably I can live with that..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1527785486, "post_id": 50629050, "comment_id": 88268391, "body": "Does <code>&#47;\\Q...</code> also work? There&#39;s no need for a closing <code>\\E</code> with that either."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1527785487, "post_id": 50629050, "comment_id": 88268393, "body": "@EugeniuRosca Yeah, you&#39;ll have to write <code>\\Vprintk(&quot;Error\\\\n&quot;)</code> there."}, {"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1527785989, "post_id": 50629050, "comment_id": 88268644, "body": "@Borodin Thanks! The perl analogy becomes even more straightforward."}, {"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1527786488, "post_id": 50629050, "comment_id": 88268863, "body": "@melpomene I wonder if the approach described in <a href=\"https://stackoverflow.com/a/676619/2381750\">stackoverflow.com/a/676619/2381750</a> could copy the selected text to command line with all special characters backslash-ed, which would overcome the limitations described in your answer."}, {"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1527788562, "post_id": 50629050, "comment_id": 88269837, "body": "@melpomene Almost perfect answer! What I&#39;m <i>not</i> interested in is the find-replace topic touched in <a href=\"https://stackoverflow.com/a/676619/2381750\">stackoverflow.com/a/676619/2381750</a> . Basically, <code>vnoremap &lt;C-f&gt; &quot;hy:&#47;\\V&lt;C-r&gt;=substitute(@h,&#39;[\\&#47;]&#39;,&#39;\\\\&amp;&#39;,&#39;g&#39;)&lt;cr&gt;</code> works flawlessly for me. If you have 5min to tailor your answer to my needs, I&#39;ll happily select it as the right one. Thanks!"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 4, "last_activity_date": 1527789350, "last_edit_date": 1527789350, "creation_date": 1527784842, "answer_id": 50629050, "question_id": 50629000, "link": "https://stackoverflow.com/questions/50629000/how-to-efficiently-escape-meta-characters-in-vim-search/50629050#50629050", "title": "How to efficiently escape meta-characters in vim search", "body": "<p>You can use <code>/\\Vstring-to-search</code>.</p>\n\n<p>There are two caveats:</p>\n\n<ul>\n<li><code>\\</code> is special. You can still use all regex metacharacters by putting a <code>\\</code> in front of them.</li>\n<li>There is no <code>\\E</code> equivalent. <code>\\V</code> affects the rest of the regex.</li>\n</ul>\n\n<p>See <code>:help /\\V</code>.</p>\n\n<p>You could combine this with the code from the answer in <a href=\"https://stackoverflow.com/a/676619/1848654\">https://stackoverflow.com/a/676619/1848654</a> as follows:</p>\n\n<pre><code>vnoremap &lt;C-f&gt; \"hy/\\V&lt;C-r&gt;=substitute(@h,'[\\/]','\\\\&amp;','g')&lt;cr&gt;\n</code></pre>\n\n<p>The idea is:</p>\n\n<ul>\n<li>Copy (\"yank\") the selected text into register <code>h</code>: <code>\"hy</code></li>\n<li>Start search mode: <code>/</code></li>\n<li>Prefill the beginning of the regex: <code>\\V</code></li>\n<li>Insert the contents of a register: <code>&lt;C-r&gt;</code></li>\n<li>Don't use a real register; take the result of evaluating an expression instead: <code>=</code></li>\n<li>Our expression (terminated by <code>&lt;cr&gt;</code>) is: <code>substitute(@h,'[\\/]','\\\\&amp;','g')</code>\n\n<ul>\n<li>Take the contents of the <code>h</code> register: <code>@h</code></li>\n<li>Apply a substitution. Insert a <code>\\</code> before every <code>\\</code> and <code>/</code>: <code>substitute(...,'[\\/]','\\\\&amp;','g')</code></li>\n</ul></li>\n</ul>\n"}], "owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 0, "accepted_answer_id": 50629050, "answer_count": 1, "score": 2, "last_activity_date": 1527789350, "creation_date": 1527784585, "last_edit_date": 1527785043, "question_id": 50629000, "link": "https://stackoverflow.com/questions/50629000/how-to-efficiently-escape-meta-characters-in-vim-search", "title": "How to efficiently escape meta-characters in vim search", "body": "<p><code>Perl</code> provides <a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\"><code>quotemeta</code></a> function, as well as the possibility to surround strings using the <code>\\Qlots-of-meta-characters\\E</code> construct, to make sure that all the characters between <code>\\Q</code> and <code>\\E</code> are interpreted as literals.</p>\n\n<p>Very often I search strings full of meta characters in Vim. It's counterproductive to escape every special character individually. Is there anything like <code>/\\Qstring-to-search\\E</code> in Vim, which would make life easier?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1527779217, "post_id": 50627297, "comment_id": 88264854, "body": "You need to remember which ones you have seen and only print new ones. You could do that by simply only printing the first time you see it after it&#39;s more than 2."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1527779601, "post_id": 50627297, "comment_id": 88265078, "body": "<code>use strict;</code> and <code>use warnings;</code> are really good things."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1527780016, "post_id": 50627297, "comment_id": 88265338, "body": "So basically you want the same file as the input, but with lines whose column 2 values appear twice or less removed?"}, {"owner": {"reputation": 1, "user_id": 1250089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8794b8dee3f48b495a99b1b00835e253?s=128&d=identicon&r=PG", "display_name": "Efficasy", "link": "https://stackoverflow.com/users/1250089/efficasy"}, "edited": false, "score": 0, "creation_date": 1527780140, "post_id": 50627297, "comment_id": 88265413, "body": "Thanks for your comments.. but I am not looking for printing original line if value in second column is present more then 2 times..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1527780854, "post_id": 50627297, "comment_id": 88265859, "body": "@Efficasy: Then I don&#39;t understand. That&#39;s what the sample output in your question contains, and you say <i>&quot;I am trying to print this original line if I see value in the second column more then 2 times.&quot;</i> which says the opposite."}, {"owner": {"reputation": 1, "user_id": 1250089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8794b8dee3f48b495a99b1b00835e253?s=128&d=identicon&r=PG", "display_name": "Efficasy", "link": "https://stackoverflow.com/users/1250089/efficasy"}, "edited": false, "score": 0, "creation_date": 1527781919, "post_id": 50627297, "comment_id": 88266560, "body": "What I was trying to say was that, if the value in second column occurs more then 2 times then print the entire line.."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1527978550, "post_id": 50627297, "comment_id": 88333456, "body": "By &quot;then print the entire line&quot; I guess you really meant &quot;then print all the lines with that value in the second column&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -1, "last_activity_date": 1527780415, "last_edit_date": 1527780415, "creation_date": 1527780092, "answer_id": 50627743, "question_id": 50627297, "link": "https://stackoverflow.com/questions/50627297/duplicate-values-in-column/50627743#50627743", "title": "Duplicate values in column", "body": "<p>You need to read the input file twice, because you don't know the final counts until you get to the end of the file</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy ($TMPFILE, $TMPFILE1) = qw/ infile outfile /;\n\nmy %counts;\n\n{\n    open my $fh, '&lt;', $TMPFILE or die \"Could not open $TMPFILE: $!\";\n\n    while ( &lt;$fh&gt; ) {\n        my @fields = split /,/;\n        ++$counts{$fields[1]};\n    }\n}\n\nopen my $fh, '&lt;', $TMPFILE or die \"Could not open $TMPFILE: $!\";\nopen my $out_fh, '&gt;', $TMPFILE1 or die \"Could not open $TMPFILE1: $!\";\n\nwhile ( &lt;$fh&gt; ) {\n        my @fields = split /,/;\n        print $out_fh $_ if $counts{$fields[1]} &gt; 2;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>02-May-2018,AAPL,Sell,0.25,1000\n02-May-2018,AAPL,Sell,0.25,7000\n02-May-2018,AAPL,Sell,0.25,3000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1527780125, "creation_date": 1527780125, "answer_id": 50627755, "question_id": 50627297, "link": "https://stackoverflow.com/questions/50627297/duplicate-values-in-column/50627755#50627755", "title": "Duplicate values in column", "body": "<p>I'd do it something like this - store lines you've seen in a 'buffer' and print them out again if the condition is hit (before continuing to print as you go):</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy %buffer; \nmy %count_of;\n\nwhile ( my $line = &lt;&gt; ) {  \n   my ( $date, $ticker, @values ) = split /,/, $line; \n   #increment the count\n   $count_of{$ticker}++;\n\n   if ( $count_of{$ticker} &lt; 3 ) { \n       #count limit not hit, so stash the current line in the buffer. \n       $buffer{$ticker} .= $line; \n       next;\n   }\n   #print the buffer if the count has been hit\n   if ( $count_of{$ticker} == 3 ) {\n       print $buffer{$ticker};\n   }\n   #only gets to here once the limit is hit, so just print normally.\n   print $line;\n}\n</code></pre>\n\n<p>With your input data, this outputs:</p>\n\n<pre><code>02-May-2018,AAPL,Sell,0.25,1000\n02-May-2018,AAPL,Sell,0.25,7000\n02-May-2018,AAPL,Sell,0.25,3000\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1527780873, "post_id": 50627904, "comment_id": 88265874, "body": "There is one in OP post, but I am updating my answer"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1527780968, "post_id": 50627904, "comment_id": 88265942, "body": "You also need to <code>print</code> to (or <code>select</code>) the <code>OUT</code> file handle, and should really be using lexical file handles and the three-parameter <code>open</code>."}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1527781150, "post_id": 50627904, "comment_id": 88266070, "body": "@Borodin, I am writing an aswer to solve the problem that OP is having which is to print out correct data. Printing on the screen or the file, I am sure OP can figure out himself. Thank you for your input."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1527781760, "post_id": 50627904, "comment_id": 88266483, "body": "It seems rather shabby to present a &quot;solution&quot; and also tell the OP that they need to fix any remaining bugs. Your answer should be high-quality and bug-free as it is likely to be used by many people as an example. Please don&#39;t shirk your responsibilities."}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1527784091, "post_id": 50627904, "comment_id": 88267657, "body": "I guess I should point out that nowhere in the OP it says that the data should be prinited into the file. Just because there is an opened filehandle for writing, does not mean this data goes there. You assume it should be printed there."}], "tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": -1, "last_activity_date": 1527780888, "last_edit_date": 1527780888, "creation_date": 1527780627, "answer_id": 50627904, "question_id": 50627297, "link": "https://stackoverflow.com/questions/50627297/duplicate-values-in-column/50627904#50627904", "title": "Duplicate values in column", "body": "<p>This should work:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen (FILE, \"&lt;$TMPFILE\") or die \"Could not open $TMPFILE\";\nopen (OUT, \"&gt;$TMPFILE1\") or die \"Could not open $TMPFILE1\";\n\nmy %data;\nwhile ( my $line = &lt;FILE&gt; ) {\n    chomp $line;\n    my @line = split /,/, $line;\n    push(@{$data{$line[1]}}, $line); \n}\n\nforeach my $key (keys %data) {\n    if(@{$data{$key}} &gt; 2) {\n        print \"$_\\n\" foreach  @{$data{$key}};\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1527979091, "creation_date": 1527979091, "answer_id": 50661757, "question_id": 50627297, "link": "https://stackoverflow.com/questions/50627297/duplicate-values-in-column/50661757#50661757", "title": "Duplicate values in column", "body": "<p>Simple answer:</p>\n\n<pre><code>push @{ $lines{(split\",\")[1]} }, $_ while &lt;&gt;;\nprint @{ $lines{$_} } for grep @{ $lines{$_} } &gt; 2, sort keys %lines;\n\nperl program.pl inputfile &gt; outputfile\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 1250089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8794b8dee3f48b495a99b1b00835e253?s=128&d=identicon&r=PG", "display_name": "Efficasy", "link": "https://stackoverflow.com/users/1250089/efficasy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1527979091, "creation_date": 1527778835, "last_edit_date": 1527779140, "question_id": 50627297, "link": "https://stackoverflow.com/questions/50627297/duplicate-values-in-column", "title": "Duplicate values in column", "body": "<p>I have a original file which has following columns,</p>\n\n<pre><code>02-May-2018,AAPL,Sell,0.25,1000\n02-May-2018,C,Sell,0.25,2000\n02-May-2018,JPM,Sell,0.25,3000\n02-May-2018,WFC,Sell,0.25,5000\n02-May-2018,AAPL,Sell,0.25,7000\n02-May-2018,GOOG,Sell,0.25,8000\n02-May-2018,GOOG,Sell,0.25,9000\n02-May-2018,C,Sell,0.25,2000\n02-May-2018,AAPL,Sell,0.25,3000\n</code></pre>\n\n<p>I am trying to print this original line if I see value in the second column more then 2 times.. for example, if I see AAPL more then 2 times desired result should print</p>\n\n<pre><code>02-May-2018,AAPL,Sell,0.25,1000\n02-May-2018,AAPL,Sell,0.25,7000\n02-May-2018,AAPL,Sell,0.25,3000\n</code></pre>\n\n<p>So Far, I have written the following which prints results multiple times which is wrong.. can you please help on what I am doing wrong?</p>\n\n<pre><code>open (FILE, \"&lt;$TMPFILE\") or die \"Could not open $TMPFILE\";\nopen (OUT, \"&gt;$TMPFILE1\") or die \"Could not open $TMPFILE1\";\n%count = ();\n@symbol = ();\nwhile ($line = &lt;FILE&gt;)\n{\n        chomp $line;\n        (@data) = split(/,/,$line);\n         $count{$data[1]}++;\n        @keys = sort {$count{$a} cmp $count{$b}} keys %count;\n        for my $key (@keys)\n        {\n        if ( $count{$key} &gt; 2 )\n        {\n            print \"$line\\n\";\n        }\n     }\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 3, "creation_date": 1527781705, "post_id": 50626708, "comment_id": 88266456, "body": "<code>shift-&gt;SUPER::foo(@_)</code> Consider <code>parent</code> instead of <code>base</code> as former is recommended for inheritance."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1527793343, "post_id": 50626708, "comment_id": 88272175, "body": "@\u0421\u0443\u0445\u043e\u043927, That relies on undefined operand evaluation order. That said, many people rely on this as well, so it&#39;s unlikely to change"}], "answers": [{"comments": [{"owner": {"reputation": 128, "user_id": 1724266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b7e384340762f6c3f888087bed44c15?s=128&d=identicon&r=PG", "display_name": "Georgy Vladimirov", "link": "https://stackoverflow.com/users/1724266/georgy-vladimirov"}, "edited": false, "score": 0, "creation_date": 1528158935, "post_id": 50627073, "comment_id": 88390790, "body": "Since @justHelloWorld asked for conciseness, we can do something with $first only like this: $_[0] = &#39;new_first&#39;  This is after $self has already been shifted in the line before..."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 6, "last_activity_date": 1527782605, "last_edit_date": 1527782605, "creation_date": 1527778087, "answer_id": 50627073, "question_id": 50626708, "link": "https://stackoverflow.com/questions/50626708/how-to-forward-arguments-to-a-super-function-in-perl/50627073#50627073", "title": "How to forward arguments to a super function in perl?", "body": "<p>you can re-use <code>@_</code> to pass the arguments like this</p>\n\n<pre><code>$self-&gt;SUPER::foo(@_);\n</code></pre>\n\n<p>Since the first element of <code>@_</code> is the \"object\" used to call the class method, you don't want to pass that into the parent class method twice, so you should use <code>shift</code> to remove it first.</p>\n\n<pre><code>sub foo{\n  my $self=shift;\n  my ($first, $second, $third) = @_;\n  #do something with $first only\n  return $self-&gt;SUPER::foo(@_);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1527796942, "post_id": 50629253, "comment_id": 88273937, "body": "<code>&amp;SUPER::foo</code> doesn&#39;t work as you expect. Because it&#39;s not a method call, <code>SUPER</code> isn&#39;t special, so this calls sub <code>foo</code> in package <code>SUPER</code>. The class&#39;s parent is not consulted. You&#39;d have to use <code>&amp;Base::foo</code>."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1527785597, "creation_date": 1527785597, "answer_id": 50629253, "question_id": 50626708, "link": "https://stackoverflow.com/questions/50626708/how-to-forward-arguments-to-a-super-function-in-perl/50629253#50629253", "title": "How to forward arguments to a super function in perl?", "body": "<p>This might actually be one of the valid uses of the <code>&amp;function;</code> call. </p>\n\n<p>E.g. </p>\n\n<pre><code>&amp;SUPER::foo;\n</code></pre>\n\n<p>As documented in <a href=\"https://perldoc.perl.org/perlsub.html\" rel=\"nofollow noreferrer\">perlsub</a> - this makes <code>@_</code> visible to the called sub. </p>\n\n<p>It should be used with care, because it's deviating from what you might normally expect to happen - it's not passing args, it's making the same set 'visible'. </p>\n"}], "owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 1, "accepted_answer_id": 50627073, "answer_count": 2, "score": 2, "last_activity_date": 1527796933, "creation_date": 1527776943, "last_edit_date": 1527796933, "question_id": 50626708, "link": "https://stackoverflow.com/questions/50626708/how-to-forward-arguments-to-a-super-function-in-perl", "title": "How to forward arguments to a super function in perl?", "body": "<p>I'm a very perl beginner, but I have (more or less) this code:</p>\n\n<pre><code>package Base;\n\nsub foo{\n  my ($self, $first, $second, $third) = @_;\n  # do some magic here!\n} \n\npackage Subclass;\nuse base qw(Base);\n\nsub foo{\n  my ($self, $first, $second, $third) = @_;\n  #do something with $first only\n  return $self-&gt;SUPER::foo($first, $second, $third);\n}\n</code></pre>\n\n<p>And the method is called with: <code>$self-&gt;foo(\"Hey\", \"what's\", \"up\");</code></p>\n\n<p>Is there a more concise way to call <code>SUPER::foo()</code>, without repeating the list of all args again?</p>\n"}, {"tags": ["perl", "sftp"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1527782480, "post_id": 50626512, "comment_id": 88266865, "body": "Perhaps <code>StrictHostKeyChecking=no</code> <a href=\"https://askubuntu.com/a/167753/422764\">askubuntu.com/a/167753/422764</a>"}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1527783479, "post_id": 50626512, "comment_id": 88267340, "body": "I believe it works without equal too: <a href=\"http://search.cpan.org/dist/Net-SFTP-Foreign/lib/Net/SFTP/Foreign.pm\" rel=\"nofollow noreferrer\">search.cpan.org/dist/Net-SFTP-Foreign/lib/Net/SFTP/Foreign.p&zwnj;&#8203;m</a>"}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1527783537, "post_id": 50626512, "comment_id": 88267370, "body": "The does add the key automatically on the initial run. it only fails of there is already the key in the known_hosts file and server is providing a different key."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1527784104, "post_id": 50626512, "comment_id": 88267662, "body": "Symlink known_hosts to /dev/null ;)"}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1527793367, "post_id": 50626512, "comment_id": 88272191, "body": "@\u0421\u0443\u0445\u043e\u043927 looks like this was the correct solution. Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 1421, "user_id": 9672954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/50jXz.jpg?s=128&g=1", "display_name": "runwuf", "link": "https://stackoverflow.com/users/9672954/runwuf"}, "is_accepted": true, "score": 4, "last_activity_date": 1527785097, "creation_date": 1527785097, "answer_id": 50629126, "question_id": 50626512, "link": "https://stackoverflow.com/questions/50626512/replace-host-key-automatically-on-linux/50629126#50629126", "title": "Replace host key automatically on linux", "body": "<p>Add another option that points UserKnownHostsFile to /dev/null should do the trick, not that it's recommend from security perspective ;-)</p>\n\n<pre><code>use Net::SFTP::Foreign;\nmy %cfg = (\n    user        =&gt; \"$user\", \n    password    =&gt; \"$password\",\n    port        =&gt; 22,\n    more        =&gt; [-o =&gt; 'StrictHostKeyChecking=no',\n                    -o =&gt; 'UserKnownHostsFile=/dev/null']\n);\nmy $sftp = Net::SFTP::Foreign-&gt;new(\"$host\",%cfg);\n</code></pre>\n"}], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 1, "accepted_answer_id": 50629126, "answer_count": 1, "score": 3, "last_activity_date": 1527785097, "creation_date": 1527776296, "question_id": 50626512, "link": "https://stackoverflow.com/questions/50626512/replace-host-key-automatically-on-linux", "title": "Replace host key automatically on linux", "body": "<p>I have a script that connects to an SFTP server with the following code:</p>\n\n<pre><code>use Net::SFTP::Foreign;\nmy %cfg = (\n    user        =&gt; \"$user\", \n    password    =&gt; \"$password\",\n    port        =&gt; 22,\n    more        =&gt; [-o =&gt; 'StrictHostKeyChecking no']\n);\nmy $sftp = Net::SFTP::Foreign-&gt;new(\"$host\",%cfg);\n</code></pre>\n\n<p>I am using StrictHostKeyChecking to make sure the script automatically accepts the ssh key.\nThe issue begins when the server replaces the host key with new one. I get the error: WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!</p>\n\n<p>So I have to manually remove the key by running <strong>ssh-keygen -R testserver.com</strong>\nAfter that the script works fine again.\nI am trying to find a way to autmatically replace the key if it changes.\nTechnically I can run <strong>ssh-keygen -R testserver.com</strong> every time the script runs, but I do not like that solution.\nSo far I am not able to a good automated way to replace the key.</p>\n"}, {"tags": ["perl", "automation", "packages", "freebsd", "cpan"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1527753312, "post_id": 50619176, "comment_id": 88248380, "body": "Are you sure all the users will have cpan configured in a way it will install the modules? Also, after installing a module, you still need to <a href=\"http://p3rl.org/use\" rel=\"nofollow noreferrer\">use</a> it again."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1527753522, "post_id": 50619176, "comment_id": 88248485, "body": "IIRC there was an environment variable you could set to skip interactive prompts, at least in ExtUtils::MakeMaker based installers. That said, what you&#39;re trying to do here is a bad idea in my opinion. <i>Edit: It was <code>PERL_MM_USE_DEFAULT=1</code>.</i>"}, {"owner": {"reputation": 93, "user_id": 9171212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PGbzRyoPho0/AAAAAAAAAAI/AAAAAAAAF5o/G2UJVuYDk4I/photo.jpg?sz=128", "display_name": "Deeptanshu Goel", "link": "https://stackoverflow.com/users/9171212/deeptanshu-goel"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1527757062, "post_id": 50619176, "comment_id": 88250476, "body": "@melpomene Can you please help me out for ExtUtils::MakeMaker with a code snipet........and also are you sure that we need not  not to install this module also."}, {"owner": {"reputation": 93, "user_id": 9171212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PGbzRyoPho0/AAAAAAAAAAI/AAAAAAAAF5o/G2UJVuYDk4I/photo.jpg?sz=128", "display_name": "Deeptanshu Goel", "link": "https://stackoverflow.com/users/9171212/deeptanshu-goel"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1527757101, "post_id": 50619176, "comment_id": 88250504, "body": "@choroba can you provide me another way to install these without cpan"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1527757200, "post_id": 50619176, "comment_id": 88250562, "body": "I find your question baffling. It makes me think you have no idea what you&#39;re doing and should probably not try to write this kind of code."}, {"owner": {"reputation": 93, "user_id": 9171212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PGbzRyoPho0/AAAAAAAAAAI/AAAAAAAAF5o/G2UJVuYDk4I/photo.jpg?sz=128", "display_name": "Deeptanshu Goel", "link": "https://stackoverflow.com/users/9171212/deeptanshu-goel"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1527757390, "post_id": 50619176, "comment_id": 88250695, "body": "@melpomene I just want to install these modules automatically before my actual script runs. Can you define me another way"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1527757437, "post_id": 50619176, "comment_id": 88250726, "body": "@DeeptanshuGoel Yes, don&#39;t do that. Make installation of prerequisites a separate step; don&#39;t try to do it implicitly and at runtime."}, {"owner": {"reputation": 93, "user_id": 9171212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PGbzRyoPho0/AAAAAAAAAAI/AAAAAAAAF5o/G2UJVuYDk4I/photo.jpg?sz=128", "display_name": "Deeptanshu Goel", "link": "https://stackoverflow.com/users/9171212/deeptanshu-goel"}, "edited": false, "score": 0, "creation_date": 1527757550, "post_id": 50619176, "comment_id": 88250793, "body": "I have to deploy my script on 400+ servers then it would be a pain to install these modules separately"}, {"owner": {"reputation": 93, "user_id": 9171212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PGbzRyoPho0/AAAAAAAAAAI/AAAAAAAAF5o/G2UJVuYDk4I/photo.jpg?sz=128", "display_name": "Deeptanshu Goel", "link": "https://stackoverflow.com/users/9171212/deeptanshu-goel"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1527757645, "post_id": 50619176, "comment_id": 88250855, "body": "@melpomene Or we can make a separate script to install these modules first"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1527757754, "post_id": 50619176, "comment_id": 88250926, "body": "Wait, this is about deployment? That would be vital information to include in the question. And you&#39;re the admin on those servers and (presumably) know how perl is set up on each one of them? What does your current deployment process look like?"}, {"owner": {"reputation": 93, "user_id": 9171212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PGbzRyoPho0/AAAAAAAAAAI/AAAAAAAAF5o/G2UJVuYDk4I/photo.jpg?sz=128", "display_name": "Deeptanshu Goel", "link": "https://stackoverflow.com/users/9171212/deeptanshu-goel"}, "edited": false, "score": 0, "creation_date": 1527757991, "post_id": 50619176, "comment_id": 88251072, "body": "these servers are using freeBSD OS also"}, {"owner": {"reputation": 93, "user_id": 9171212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PGbzRyoPho0/AAAAAAAAAAI/AAAAAAAAF5o/G2UJVuYDk4I/photo.jpg?sz=128", "display_name": "Deeptanshu Goel", "link": "https://stackoverflow.com/users/9171212/deeptanshu-goel"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1527759040, "post_id": 50619176, "comment_id": 88251780, "body": "@melpomene I am having access to all these servers but my teammate has to deploy it, Earlier he was deploying by installing these modules manually but that was very time taking then he asks to automate the installation also"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 9171212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PGbzRyoPho0/AAAAAAAAAAI/AAAAAAAAF5o/G2UJVuYDk4I/photo.jpg?sz=128", "display_name": "Deeptanshu Goel", "link": "https://stackoverflow.com/users/9171212/deeptanshu-goel"}, "edited": false, "score": 0, "creation_date": 1527986113, "post_id": 50626008, "comment_id": 88334764, "body": "My server is not having /use/ports directory in it and  I have run this pkg install -y p5-JSON p5-Net-Address-IPv4-Local p5-Net-OpenSSH p5-Net-SCP-Expect but when I am running the script it is again asking for packages"}, {"owner": {"reputation": 6017, "user_id": 4694621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lIYBa.png?s=128&g=1", "display_name": "Mateusz Piotrowski", "link": "https://stackoverflow.com/users/4694621/mateusz-piotrowski"}, "reply_to_user": {"reputation": 93, "user_id": 9171212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PGbzRyoPho0/AAAAAAAAAAI/AAAAAAAAF5o/G2UJVuYDk4I/photo.jpg?sz=128", "display_name": "Deeptanshu Goel", "link": "https://stackoverflow.com/users/9171212/deeptanshu-goel"}, "edited": false, "score": 0, "creation_date": 1527986402, "post_id": 50626008, "comment_id": 88334810, "body": "@DeeptanshuGoel You&#39;ve got to install /usr/ports yourself. See <a href=\"https://www.freebsd.org/doc/handbook/ports-using.html\" rel=\"nofollow noreferrer\">the handbook chapter about ports</a>. Also, <a href=\"https://www.freebsd.org/cgi/man.cgi?query=pkg&amp;apropos=0&amp;sektion=8&amp;manpath=FreeBSD+11.1-RELEASE+and+Ports&amp;arch=default&amp;format=html\" rel=\"nofollow noreferrer\">pkg(8)</a> has to be bootstrapped using <a href=\"https://www.freebsd.org/cgi/man.cgi?query=pkg&amp;apropos=0&amp;sektion=7&amp;manpath=FreeBSD+11.1-RELEASE+and+Ports&amp;arch=default&amp;format=html\" rel=\"nofollow noreferrer\">pkg(7)</a>. Does it help?"}, {"owner": {"reputation": 93, "user_id": 9171212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PGbzRyoPho0/AAAAAAAAAAI/AAAAAAAAF5o/G2UJVuYDk4I/photo.jpg?sz=128", "display_name": "Deeptanshu Goel", "link": "https://stackoverflow.com/users/9171212/deeptanshu-goel"}, "edited": false, "score": 0, "creation_date": 1528109977, "post_id": 50626008, "comment_id": 88367441, "body": "Didnt got any error but not clear with the concept of ports"}, {"owner": {"reputation": 6017, "user_id": 4694621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lIYBa.png?s=128&g=1", "display_name": "Mateusz Piotrowski", "link": "https://stackoverflow.com/users/4694621/mateusz-piotrowski"}, "reply_to_user": {"reputation": 93, "user_id": 9171212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PGbzRyoPho0/AAAAAAAAAAI/AAAAAAAAF5o/G2UJVuYDk4I/photo.jpg?sz=128", "display_name": "Deeptanshu Goel", "link": "https://stackoverflow.com/users/9171212/deeptanshu-goel"}, "edited": false, "score": 0, "creation_date": 1528110091, "post_id": 50626008, "comment_id": 88367498, "body": "@DeeptanshuGoel Have you read the chapter about ports? <a href=\"https://www.freebsd.org/doc/handbook/ports-using.html\" rel=\"nofollow noreferrer\">freebsd.org/doc/handbook/ports-using.html</a>"}, {"owner": {"reputation": 93, "user_id": 9171212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PGbzRyoPho0/AAAAAAAAAAI/AAAAAAAAF5o/G2UJVuYDk4I/photo.jpg?sz=128", "display_name": "Deeptanshu Goel", "link": "https://stackoverflow.com/users/9171212/deeptanshu-goel"}, "edited": false, "score": 0, "creation_date": 1528173303, "post_id": 50626008, "comment_id": 88393713, "body": "It seems that my server is not having any configuration files needed by <code>postsnap</code> because when I am running this command <code>portsnap fetch</code> the output is  <code>SERVERNAME must be given via command line or configuration file</code>"}], "tags": [], "owner": {"reputation": 6017, "user_id": 4694621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lIYBa.png?s=128&g=1", "display_name": "Mateusz Piotrowski", "link": "https://stackoverflow.com/users/4694621/mateusz-piotrowski"}, "is_accepted": false, "score": 3, "last_activity_date": 1528050464, "last_edit_date": 1528050464, "creation_date": 1527774914, "answer_id": 50626008, "question_id": 50619176, "link": "https://stackoverflow.com/questions/50619176/how-to-install-perl-packages-automatically-in-freebsd-using-a-perl-script-withou/50626008#50626008", "title": "How to install Perl packages automatically in FreeBSD using a Perl script without any prompt?", "body": "<p>Why don't you use the <a href=\"https://www.freebsd.org/doc/handbook/ports-using.html\" rel=\"nofollow noreferrer\">FreeBSD Ports Collection</a>?</p>\n\n<h2>Use <a href=\"https://www.freebsd.org/cgi/man.cgi?pkg\" rel=\"nofollow noreferrer\">pkg(8)</a> if you just want the defaults</h2>\n\n<p>It looks like it could be simplified to just installing a couple of precompiled packages:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>pkg install -y p5-JSON p5-Net-Address-IPv4-Local p5-Net-OpenSSH p5-Net-SCP-Expect\n</code></pre>\n\n<h2>Use <a href=\"https://www.freebsd.org/cgi/man.cgi?ports\" rel=\"nofollow noreferrer\">ports(7)</a> if you want more  control over the software you install</h2>\n\n<p>If you want to configure those packages (like turning on additional features, disabling documentation installation and so on) then you can just build them yourself from ports:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>cd /usr/ports/converters/p5-JSON &amp;&amp; make install\ncd /usr/ports/net/p5-Net-Address-IPv4-Local &amp;&amp; make install\ncd /usr/ports/net/p5-Net-OpenSSH &amp;&amp; make install\ncd /usr/ports/net/p5-Net-SCP-Expect &amp;&amp; make install\n</code></pre>\n\n<p>See <a href=\"https://www.freebsd.org/doc/handbook/ports-using.html\" rel=\"nofollow noreferrer\">FreeBSD Handbook</a> for more details (like instructions on getting a copy of the ports tree on your machine).</p>\n\n<p>If you just want the defaults then you may pass <code>BATCH=YES</code> to the make like this: <code>make BATCH=YES install</code>.</p>\n\n<p>If you need any additional packages or you have to tune the existing one beyond what's offered in official ports then you may just get yourself a <a href=\"https://github.com/freebsd/freebsd-ports\" rel=\"nofollow noreferrer\">copy of the ports tree</a> and and your own ports/modify existing ones to your liking. See the <a href=\"https://www.freebsd.org/doc/en_US.ISO8859-1/books/porters-handbook/book.html\" rel=\"nofollow noreferrer\">Porter's Handbook</a> for more details.</p>\n\n<h3>Use existing tools to manage ports efficiently</h3>\n\n<p>Ports are generally a great way to manage packages on your system. The framework is easy to use and modify. You may also be interested in looking at the <a href=\"https://www.freshports.org/ports-mgmt/\" rel=\"nofollow noreferrer\">available ports management tools</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 93, "user_id": 9171212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PGbzRyoPho0/AAAAAAAAAAI/AAAAAAAAF5o/G2UJVuYDk4I/photo.jpg?sz=128", "display_name": "Deeptanshu Goel", "link": "https://stackoverflow.com/users/9171212/deeptanshu-goel"}, "is_accepted": true, "score": 1, "last_activity_date": 1529153952, "last_edit_date": 1529153952, "creation_date": 1528892083, "answer_id": 50837029, "question_id": 50619176, "link": "https://stackoverflow.com/questions/50619176/how-to-install-perl-packages-automatically-in-freebsd-using-a-perl-script-withou/50837029#50837029", "title": "How to install Perl packages automatically in FreeBSD using a Perl script without any prompt?", "body": "<p>I got a solution for this that when there is a prompt in between installation of any package either it is automated or manual the prompt got timed out automatically after 15secs, and further installation continues as usual. and also we can give yes in pipe (<code>|</code>) if there is prompt for \"yes\" only.</p>\n"}], "owner": {"reputation": 93, "user_id": 9171212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PGbzRyoPho0/AAAAAAAAAAI/AAAAAAAAF5o/G2UJVuYDk4I/photo.jpg?sz=128", "display_name": "Deeptanshu Goel", "link": "https://stackoverflow.com/users/9171212/deeptanshu-goel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 683, "favorite_count": 0, "accepted_answer_id": 50837029, "answer_count": 2, "score": 4, "last_activity_date": 1529153952, "creation_date": 1527752553, "last_edit_date": 1527775209, "question_id": 50619176, "link": "https://stackoverflow.com/questions/50619176/how-to-install-perl-packages-automatically-in-freebsd-using-a-perl-script-withou", "title": "How to install Perl packages automatically in FreeBSD using a Perl script without any prompt?", "body": "<p>I want to install Perl packages automatically using a Perl script. The code I am using is </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse utf8;\nuse CPAN;\neval \"use JSON\" \n    or do {\n    CPAN::install(\"JSON\");\n};\neval \"use Net::Address::IP::Local\" \n    or do { \n\n    CPAN::install(\"Net::Address::IP::Local\");\n};\neval \"use Net::OpenSSH\" \n    or do { \n\n    CPAN::install(\"Net::OpenSSH\");\n};\neval \"use Net::SCP::Expect\" \n    or do { \n\n    CPAN::install(\"Net::SCP::Expect\");\n};\n</code></pre>\n\n<p>During the script runs, it asks for prompt like yes or no, passwords, etc. How to handle these prompt automatically? I have to deploy it on many servers so I had to automate it.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 187, "user_id": 7382283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQcg4.jpg?s=128&g=1", "display_name": "Light Bringer", "link": "https://stackoverflow.com/users/7382283/light-bringer"}, "edited": false, "score": 0, "creation_date": 1527735968, "post_id": 50615799, "comment_id": 88241997, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/33533768/weird-perl-behaviour-regarding-references\">Weird perl behaviour regarding references</a>"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 187, "user_id": 7382283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQcg4.jpg?s=128&g=1", "display_name": "Light Bringer", "link": "https://stackoverflow.com/users/7382283/light-bringer"}, "edited": false, "score": 5, "creation_date": 1527734348, "post_id": 50615828, "comment_id": 88241609, "body": "@LightBringer Yup, and you&#39;re welcome.  Moral: <code>use strict;</code> and <code>use warnings;</code>, always."}, {"owner": {"reputation": 187, "user_id": 7382283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQcg4.jpg?s=128&g=1", "display_name": "Light Bringer", "link": "https://stackoverflow.com/users/7382283/light-bringer"}, "edited": false, "score": 0, "creation_date": 1527734967, "post_id": 50615828, "comment_id": 88241772, "body": "It was having to reference the pointer on the passed array,  threw a loop in my thinking or something after a day of marathon coding.   Curly brackets on one array!  Curly brackets on all... opps. thanks again, cherry on top my migrain from this one."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 14, "last_activity_date": 1536883604, "last_edit_date": 1536883604, "creation_date": 1527734075, "answer_id": 50615828, "question_id": 50615799, "link": "https://stackoverflow.com/questions/50615799/inexplicably-a-perl-local-myarray-acts-like-a-global-variable-dirty-on-subseq/50615828#50615828", "title": "Inexplicably a Perl local my(array) acts like a global variable, dirty on subsequent iterations", "body": "<p>This is because you have <code>$b{$i}</code> -- that is, a <em>hash</em> <code>%b</code>, which is never declared (made lexical).</p>\n\n<p>So it is created, right there, as a global variable.</p>\n\n<p>This would have not been possible with <code>use strict;</code> in place.</p>\n\n<p>May I recommend to always, <em>always</em> use this pragma, and even more so <code>use warnings;</code>.</p>\n\n<hr>\n\n<p>Note that <code>$a</code> and <code>$b</code> are not advisable for variable names, since those particular names have a bit special standing, being used by <code>sort</code>.</p>\n\n<p>Also, you don't need that <code>&amp;</code> in front of your functions.  It has very specific properties, which don't hurt here, but it is not needed and it shouldn't be there.</p>\n"}], "owner": {"reputation": 187, "user_id": 7382283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQcg4.jpg?s=128&g=1", "display_name": "Light Bringer", "link": "https://stackoverflow.com/users/7382283/light-bringer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 50615828, "answer_count": 1, "score": 4, "last_activity_date": 1536883604, "creation_date": 1527733775, "question_id": 50615799, "link": "https://stackoverflow.com/questions/50615799/inexplicably-a-perl-local-myarray-acts-like-a-global-variable-dirty-on-subseq", "title": "Inexplicably a Perl local my(array) acts like a global variable, dirty on subsequent iterations", "body": "<p>Simply want to know why the @b is acting like a global and has to be reset each time the subroutine is called.   A my(variable) shouldn't last past the routine but this one is persistent.  The first iteration works, but the subsequent ones would be corrupted without the for loop setting to 0. </p>\n\n<p>Also, @b doesn't respond to a; Print Join(); @b=(0)x@$a; mapping; or any other calls to it, nothing besides a direct query of $b(#) and nothing else.  Couldn't be the chink in the Perl armor, could it? </p>\n\n<p>Yes, if I comment out the 1st iteration and the for loop, the 2nd iteration works but subsequent ones do not. </p>\n\n<pre><code>sub firstDupe {\n    my ($a) = @_;\n    my @b;\n    # need for next line inexplicable, @b acts like global, ideas?\n    my $l = scalar(@{$a})+1; for ($i=0; $i &lt; $l; $i++){ $b{$i}='0'; }\n    for (@{$a}){\n        return int($_) if $b{$_}++;\n    }\n    return -1;\n}\n\nmy @pb= (2, 1, 3, 5, 3, 2);\n$val=&amp;firstDupe(\\@pb);\nmy $ret=\"\\nRet: $val\";\n\n@pb= (2, 4, 3, 5, 1);\n$val=&amp;firstDupe(\\@pb);\n$ret = $ret.\", $val\";\n\n@pb= (1);\n$val=&amp;firstDupe(\\@pb);\n$ret = $ret.\", $val\";\n\n@pb= (2,2);\n$val=&amp;firstDupe(\\@pb);\n$ret = $ret.\", $val\";\n\n@pb= (2,1);\n$val=&amp;firstDupe(\\@pb);\n$ret = $ret.\", $val\";\n\nprint \"\\n\\n$ret\";\nprint \"\\nkey: 3, -1, -1, 2, -1\\n\";\n</code></pre>\n"}]