[{"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 8, "creation_date": 1541629337, "post_id": 53198449, "comment_id": 93286105, "body": "There are many modules that can read JSON in Perl, see for example <a href=\"https://metacpan.org/pod/JSON::XS\" rel=\"nofollow noreferrer\">JSON::XS</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1541637580, "post_id": 53198449, "comment_id": 93288452, "body": "Can you show your hash, and whatever other code you have?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1541641018, "post_id": 53198449, "comment_id": 93289305, "body": "what are the keys and values of your existing hash?"}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 1, "creation_date": 1541667189, "post_id": 53198449, "comment_id": 93296620, "body": "It&#39;s unclear what you&#39;re asking. Do you need help with decoding the JSON, merging the data structures, or something else? It will be much easier for us to identify the problem if you provide a small runnable program that we can run and see the problem for ourselves."}], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 4385038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98115b29176fd65e386d19cdf97dd208?s=128&d=identicon&r=PG&f=1", "display_name": "jtym", "link": "https://stackoverflow.com/users/4385038/jtym"}, "is_accepted": false, "score": 0, "last_activity_date": 1541643688, "creation_date": 1541643688, "answer_id": 53200649, "question_id": 53198449, "link": "https://stackoverflow.com/questions/53198449/perl-array-of-hashes/53200649#53200649", "title": "Perl: array of hashes", "body": "<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $input = { 'WarMovies' =&gt; [ { 'Lone Survivor' =&gt; 1 }, { 'Black Hawk Down' =&gt; 1 } ] };\nmy %movies = ();\n\nforeach my $genre (keys(%$input)) {\n    #print Dumper($genre);\n    foreach my $movie_hash (@{$input-&gt;{$genre}}) {\n        my @titles = keys(%$movie_hash);\n        foreach my $title (@titles) {\n            $movies{$title} = 1;\n        }\n    }\n}\n\nprint Dumper(\\%movies);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 1, "creation_date": 1541649354, "post_id": 53200996, "comment_id": 93291063, "body": "Please add some more explanation to your answer."}, {"owner": {"reputation": 168, "user_id": 6881511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb1571eb297c04fea56c9d6cd73fad0?s=128&d=identicon&r=PG&f=1", "display_name": "zubenel", "link": "https://stackoverflow.com/users/6881511/zubenel"}, "edited": false, "score": 0, "creation_date": 1583057546, "post_id": 53200996, "comment_id": 106982605, "body": "@jtym For this code to work the line <code>use Data::Dumper;</code> should be included. Besides do you know if it would be possible to store and extract hash elements by using PDL? As something a bit similar I know that numpy has <a href=\"https://www.w3resource.com/python-exercises/numpy/python-numpy-exercise-190.php\" rel=\"nofollow noreferrer\">record arrays</a>."}], "tags": [], "owner": {"reputation": 39, "user_id": 4385038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98115b29176fd65e386d19cdf97dd208?s=128&d=identicon&r=PG&f=1", "display_name": "jtym", "link": "https://stackoverflow.com/users/4385038/jtym"}, "is_accepted": false, "score": 0, "last_activity_date": 1541646534, "creation_date": 1541646534, "answer_id": 53200996, "question_id": 53198449, "link": "https://stackoverflow.com/questions/53198449/perl-array-of-hashes/53200996#53200996", "title": "Perl: array of hashes", "body": "<pre><code>my $input = { 'WarMovies' =&gt; [ { 'Lone Survivor' =&gt; 1 }, { 'Black Hawk Down' =&gt; 1 } ] };\nmy %movies = ();\nmap { my ($key) = keys(%$_); $movies{$key} = 1 } @{$input-&gt;{WarMovies}};\nprint Dumper(\\%movies);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": false, "score": 0, "last_activity_date": 1541717655, "creation_date": 1541717655, "answer_id": 53217387, "question_id": 53198449, "link": "https://stackoverflow.com/questions/53198449/perl-array-of-hashes/53217387#53217387", "title": "Perl: array of hashes", "body": "<p>Here is a concise way to extract the titles from your hashref by chaining <code>map</code> to deference the nested refs.</p>\n\n<pre><code>use v5.10;\nuse strict;\nuse warnings;\n\nmy $hashref = { 'WarMovies' =&gt; [ { 'Lone Survivor' =&gt; 1 }, { 'Black Hawk Down' =&gt; 1 } ] };\nmy @titles = map { keys %$_ } map { @{$hashref-&gt;{$_}} } keys %$hashref;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10620793, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZIpz7lyluLQ/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCdH4sUtfU8vPhWri9PeGoin_wAsA/mo/photo.jpg?sz=128", "display_name": "Jake Statefarm", "link": "https://stackoverflow.com/users/10620793/jake-statefarm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1541717655, "creation_date": 1541627768, "last_edit_date": 1541629453, "question_id": 53198449, "link": "https://stackoverflow.com/questions/53198449/perl-array-of-hashes", "title": "Perl: array of hashes", "body": "<p>I have this in JSON format. How do i extract the titles and values and add them to my existing hash (<code>%movies</code>)?</p>\n\n<pre><code>{ 'WarMovies' =&gt; [ { 'Lone Survivor' =&gt; 1 }, { 'Black Hawk Down' =&gt; 1 } ] }\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1541639005, "post_id": 53198273, "comment_id": 93288822, "body": "You should also be aware that <code>split</code> normally takes a RegEx as a delimiter. Using a single space is special syntax which will split on any amount of whitespace, and also strip leading and trailing space, ie. <code>split(&#39; &#39;, &#39;  one two    three    &#39;)</code> will return the list <code>(&#39;one&#39;, &#39;two&#39;, &#39;three&#39;)</code>"}], "tags": [], "owner": {"reputation": 19037, "user_id": 17312, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3b850326cdff41656c9e19b10489e398?s=128&d=identicon&r=PG", "display_name": "Barry Brown", "link": "https://stackoverflow.com/users/17312/barry-brown"}, "is_accepted": false, "score": 0, "last_activity_date": 1541626975, "creation_date": 1541626975, "answer_id": 53198273, "question_id": 53198055, "link": "https://stackoverflow.com/questions/53198055/how-to-catch-value-of-variable-to-new-different-variable-from-1-line/53198273#53198273", "title": "How to catch Value of variable to new different Variable from 1 line?", "body": "<p>Use the <code>split</code> function to break apart the string, using a space as the delimiter. You can assign the results into three variables all at once.</p>\n\n<pre><code>($Word1, $Word2, $Word3) = split(' ', $words);\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 6780943, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5aa345ac3eb2e6032d8129a0286b0ce9?s=128&d=identicon&r=PG&f=1", "display_name": "andrew99", "link": "https://stackoverflow.com/users/6780943/andrew99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1541626975, "creation_date": 1541625908, "last_edit_date": 1541626132, "question_id": 53198055, "link": "https://stackoverflow.com/questions/53198055/how-to-catch-value-of-variable-to-new-different-variable-from-1-line", "title": "How to catch Value of variable to new different Variable from 1 line?", "body": "<p>I hv 3 words \"This is Test\" in 1 line</p>\n\n<p>I don't know how to catch the Value of variable to new Variable in 1 line,\nwithout create a new variable for each words or using ARGV.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>$words = \"This is Test\";\r\n\r\n#what is in here?\r\n\r\nprint \"$Word1 $Word2 $Word3\\n\";</code></pre>\r\n</div>\r\n</div>\r\n\n          It would be easy if i just put, But this isn't on 1 line.\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>$Word1 = \"This\";\r\n$Word2 = \"is\";\r\n$Word3 = \"Test\";\r\nprint \"$Word1 $Word2 $Word3\\n\";</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Pls, anyone help me fix the codes!</p>\n"}, {"tags": ["perl", "bioinformatics", "cpan"], "answers": [{"comments": [{"owner": {"reputation": 74, "user_id": 7065472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04466d49bd8c8e07a75ba5f16079753f?s=128&d=identicon&r=PG&f=1", "display_name": "Gragas", "link": "https://stackoverflow.com/users/7065472/gragas"}, "edited": false, "score": 0, "creation_date": 1541621078, "post_id": 53196942, "comment_id": 93282480, "body": "Could i please get a reason for the down vote so i can amend my answer and improve? Thanks"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1541621266, "post_id": 53196942, "comment_id": 93282578, "body": "<code>&#47;tmp&#47;build&#47;80754af9&#47;perl_1527832170752&#47;_build_env&#47;bin&#47;x86_64&zwnj;&#8203;-conda_cos6-linux-gn&zwnj;&#8203;u-gcc</code> is a path under <code>&#47;tmp</code>. There&#39;s no way a system package will provide that file."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1541621358, "post_id": 53196942, "comment_id": 93282615, "body": "The error is from trying to install HTML::PullParser, which does not require expat or libxml2."}, {"owner": {"reputation": 1, "user_id": 10620191, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JC0YlOw9tXk/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBhqhc5THvjjlPgbBn-vPC_iaVIAg/mo/photo.jpg?sz=128", "display_name": "Lincoln Adams", "link": "https://stackoverflow.com/users/10620191/lincoln-adams"}, "edited": false, "score": 0, "creation_date": 1541621545, "post_id": 53196942, "comment_id": 93282714, "body": "So trying those commands didnt seem to accomplish anything.   &quot;Note, selecting &#39;libexpat1-dev&#39; instead of &#39;libexpat-dev&#39; libexpat1-dev is already the newest version (2.2.5-3).&quot; and  &quot;E: Unable to locate package libxm12-dev&quot; and &quot;build-essential is already the newest version (12.4ubuntu1). build-essential set to manually installed.&quot;     As far as the downvote, it was not me so idk."}, {"owner": {"reputation": 74, "user_id": 7065472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04466d49bd8c8e07a75ba5f16079753f?s=128&d=identicon&r=PG&f=1", "display_name": "Gragas", "link": "https://stackoverflow.com/users/7065472/gragas"}, "edited": false, "score": 0, "creation_date": 1541621821, "post_id": 53196942, "comment_id": 93282840, "body": "Thank you for the response. Much appreciated :)"}], "tags": [], "owner": {"reputation": 74, "user_id": 7065472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04466d49bd8c8e07a75ba5f16079753f?s=128&d=identicon&r=PG&f=1", "display_name": "Gragas", "link": "https://stackoverflow.com/users/7065472/gragas"}, "is_accepted": false, "score": -1, "last_activity_date": 1541620855, "creation_date": 1541620855, "answer_id": 53196942, "question_id": 53196568, "link": "https://stackoverflow.com/questions/53196568/perl-module-fails-install-with-cpan-cpanm/53196942#53196942", "title": "Perl Module fails install with CPAN/cpanm", "body": "<p>Looking over the logs you have provided i can see two missing dependencies mentioned in your first block.</p>\n\n<pre><code>sudo apt-get install libexpat-dev\nsudo apt-get install libxml2-dev\n</code></pre>\n\n<p>These appear to be required and running the above will confirm they are present.</p>\n\n<p>In the second block i notice </p>\n\n<pre><code>/bin/sh: 1: /tmp/build/80754af9/perl_1527832170752/_build_env/bin/x86_64-conda_cos6-linux-gnu-gcc: not found\n</code></pre>\n\n<p>which indicates you are missing <code>gcc</code></p>\n\n<p>Ubuntu provides a bunch of prebuilt packages that contain the fundamental tools needed to build from source , <code>gcc</code> included. See <a href=\"https://packages.ubuntu.com/trusty/build-essential\" rel=\"nofollow noreferrer\">https://packages.ubuntu.com/trusty/build-essential</a> for the full list.</p>\n\n<pre><code>sudo apt-get install build-essential\n</code></pre>\n\n<p>Once the above is installed, give the Perl installed another go and that should do the trick.</p>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 3, "last_activity_date": 1541621232, "creation_date": 1541621232, "answer_id": 53197048, "question_id": 53196568, "link": "https://stackoverflow.com/questions/53196568/perl-module-fails-install-with-cpan-cpanm/53197048#53197048", "title": "Perl Module fails install with CPAN/cpanm", "body": "<p>The problem is in the perl you're using.</p>\n\n<p>The module you're trying to install contains parts written in C. To compile these, perl invokes the same C compiler it was compiled with itself. That is, the path to the C compiler was set when perl itself was configured (and then compiled).</p>\n\n<p>Your perl is trying to use a C compiler of <code>/tmp/build/80754af9/perl_1527832170752/_build_env/bin/x86_64-conda_cos6-linux-gnu-gcc</code>, which looks like a temporary build path, not something that would be present on your own system.</p>\n\n<p>You can also see that the perl being used is <code>/home/weilii/miniconda3/bin/perl</code>, not the system perl (which probably has a working C compiler configuration).</p>\n\n<p>Presumably this is the \"miniconda\" thing you mentioned. It's installed in your home directory and lists itself in your <code>PATH</code> before the system directories, so perl is found there first. By doing <code>sudo cpan ...</code> you're running <code>cpan</code> as root (which does not have your <code>PATH</code> settings), so it finds the system perl, which not only has a working C compiler but also a completely different set of installed modules.</p>\n\n<p>That is, <code>HTML::PullParser</code> is installed in your system perl (\"up to date\"), but when you run perl as your normal user, the miniconda perl is executed, which has a different set of module directories (and a broken C compiler configuration).</p>\n\n<p>I know nothing about miniconda. The way I would attempt to fix things from a perl perspective is:</p>\n\n<ul>\n<li>Never use <code>sudo cpan</code>. Installing new modules (or upgrading old modules) in system directories is a bad idea.</li>\n<li>Decide which perl to use. The miniconda perl looks broken, so that's out. Our choices are 1) the system perl or 2) a custom perl in our home directory (easily installed via <a href=\"https://perlbrew.pl/\" rel=\"nofollow noreferrer\">perlbrew</a>).</li>\n<li>If a custom perl: Plain <code>cpan HTML::PullParser</code> (or any other module) should just work fine. It will install everything under <code>~/perl5/perlbrew</code>.</li>\n<li><p>If the system perl: set up <a href=\"https://metacpan.org/pod/local::lib#SYNOPSIS\" rel=\"nofollow noreferrer\">local::lib</a>. This consists of two parts:</p>\n\n<ul>\n<li>Install <code>local::lib</code>. Usually there's a system package for it (e.g. with Debian <code>apt-get install liblocal-lib-perl</code> should work).</li>\n<li>Add <code>eval \"$(perl -I$HOME/perl5/lib/perl5 -Mlocal::lib)\"</code> to your <code>.bashrc</code> and start a new shell.</li>\n</ul>\n\n<p>Now plain <code>cpan HTML::PullParser</code> (or any other module) should just work.</p></li>\n</ul>\n\n<p>In any case you'll have to remove <code>~/miniconda3/bin</code> from your <code>PATH</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 185, "user_id": 10847811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5ff051dbc783fbd0a89188ee4702b1d?s=128&d=identicon&r=PG&f=1", "display_name": "gregoruar", "link": "https://stackoverflow.com/users/10847811/gregoruar"}, "is_accepted": false, "score": 0, "last_activity_date": 1579709206, "creation_date": 1579709206, "answer_id": 59863827, "question_id": 53196568, "link": "https://stackoverflow.com/questions/53196568/perl-module-fails-install-with-cpan-cpanm/59863827#59863827", "title": "Perl Module fails install with CPAN/cpanm", "body": "<p>I also met this problem. The path <code>/tmp/build/80754af9/perl_1527832170752/_build_env/bin/</code> indeed looks weird, and we would not expect the gcc binary file to be placed here. \nAccording to this <a href=\"https://github.com/ContinuumIO/anaconda-issues/issues/10690#issuecomment-468489937\" rel=\"nofollow noreferrer\">discussion</a> the problem is with the default version of perl on Conda-forge having the hardcoded path to the compiler. The @luvaul hack is to use other healthy perl version like this:\n<code>conda install -c conda-forge perl=5.26.2=h470a237_0</code>\nIn my situation it solved the issue. Unfortunately, it has been at least a year, and this issue is still not resolved for all.</p>\n"}], "owner": {"reputation": 1, "user_id": 10620191, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JC0YlOw9tXk/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBhqhc5THvjjlPgbBn-vPC_iaVIAg/mo/photo.jpg?sz=128", "display_name": "Lincoln Adams", "link": "https://stackoverflow.com/users/10620191/lincoln-adams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1728, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1579709206, "creation_date": 1541619327, "question_id": 53196568, "link": "https://stackoverflow.com/questions/53196568/perl-module-fails-install-with-cpan-cpanm", "title": "Perl Module fails install with CPAN/cpanm", "body": "<p>I am trying to install some perl modules which are dependencies for a program I want to install (MEME-suite).\nRunning \"perl dependencies.pl gives me the following:</p>\n\n<pre><code>Checking Required Perl Modules:\nHTML::PullParser missing.\nHTML::Template missing.\nHTML::TreeBuilder missing.\nXML::Simple missing. On Ubuntu, you may need to first run 'sudo apt-get install libexpat-dev'\nXML::Parser::Expat missing.\n\nChecking Optional Modules:\nLog::Log4perl missing. Used for logging and debugging by developers.\nMath::CDF missing. Only required for fasta-enriched-center script (which is not called by the web scripts).\nXML::Compile::SOAP11 missing. Used for downloading sequence databases from RSAT.\nOn Ubuntu, you may first need to run 'sudo apt-get install libxml2-dev'\nXML::Compile::WSDL11 missing. Used for downloading sequence databases from RSAT\nXML::Compile::Transport::SOAPHTTP missing. Used for downloading sequence databases from RSAT\n</code></pre>\n\n<p>However, when i try and install the perl modules i am missing using: either \"cpan HTML::PullParser\" or \"cpanm HTML::PullParser\" i get a failure message and the following data log:</p>\n\n<pre><code>cpanm (App::cpanminus) 1.7044 on perl 5.026002 built for x86_64-linux-thread-multi\nWork directory is /home/weilii/.cpanm/work/1541617377.2551\nYou have make /usr/bin/make\nYou have /usr/bin/wget\nYou have /bin/tar: tar (GNU tar) 1.29\nCopyright (C) 2015 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;.\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n\nWritten by John Gilmore and Jay Fenlason.\nYou have /usr/bin/unzip\nSearching HTML::PullParser () on cpanmetadb ...\n--&gt; Working on HTML::PullParser\nFetching http://www.cpan.org/authors/id/G/GA/GAAS/HTML-Parser-3.72.tar.gz\n-&gt; OK\nUnpacking HTML-Parser-3.72.tar.gz\nEntering HTML-Parser-3.72\nChecking configure dependencies from META.json\nChecking if you have ExtUtils::MakeMaker 6.58 ... Yes (7.24)\nConfiguring HTML-Parser-3.72\nRunning Makefile.PL\nChecking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for HTML::Parser\nWriting MYMETA.yml and MYMETA.json\n-&gt; OK\nChecking dependencies from MYMETA.json ...\nChecking if you have XSLoader 0 ... Yes (0.27)\nChecking if you have HTML::Tagset 3 ... Yes (3.20)\nChecking if you have ExtUtils::MakeMaker 0 ... Yes (7.24)\nBuilding and testing HTML-Parser-3.72\ncp Parser.pm blib/lib/HTML/Parser.pm\ncp lib/HTML/TokeParser.pm blib/lib/HTML/TokeParser.pm\ncp lib/HTML/LinkExtor.pm blib/lib/HTML/LinkExtor.pm\ncp lib/HTML/HeadParser.pm blib/lib/HTML/HeadParser.pm\ncp lib/HTML/Filter.pm blib/lib/HTML/Filter.pm\ncp lib/HTML/Entities.pm blib/lib/HTML/Entities.pm\ncp lib/HTML/PullParser.pm blib/lib/HTML/PullParser.pm\nRunning Mkbootstrap for Parser ()\nchmod 644 \"Parser.bs\"\n\"/home/weilii/miniconda3/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- Parser.bs blib/arch/auto/HTML/Parser/Parser.bs 644\n\"/home/weilii/miniconda3/bin/perl\" \"/home/weilii/miniconda3/lib/5.26.2/ExtUtils/xsubpp\"  -typemap '/home/weilii/miniconda3/lib/5.26.2/ExtUtils/typemap' -typemap '/home/weilii/.cpanm/work/1541617377.2551/HTML-Parser-3.72/typemap'  Parser.xs &gt; Parser.xsc\nmv Parser.xsc Parser.c\n\"/home/weilii/miniconda3/bin/perl\" mkhctype &gt;hctype.h\n\"/home/weilii/miniconda3/bin/perl\" mkpfunc &gt;pfunc.h\n/tmp/build/80754af9/perl_1527832170752/_build_env/bin/x86_64-conda_cos6-linux-gnu-gcc -c   -D_REENTRANT -D_GNU_SOURCE --sysroot=/tmp/build/80754af9/perl_1527832170752/_build_env/x86_64-conda_cos6-linux-gnu/sysroot -fwrapv -fno-strict-aliasing -pipe -fstack-protector-strong -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_FORTIFY_SOURCE=2 -O2   -DVERSION=\\\"3.72\\\" -DXS_VERSION=\\\"3.72\\\" -fPIC --sysroot=/tmp/build/80754af9/perl_1527832170752/_build_env/x86_64-conda_cos6-linux-gnu/sysroot \"-I/home/weilii/miniconda3/lib/5.26.2/x86_64-linux-thread-multi/CORE\"  -DMARKED_SECTION Parser.c\n/bin/sh: 1: /tmp/build/80754af9/perl_1527832170752/_build_env/bin/x86_64-conda_cos6-linux-gnu-gcc: not found\nMakefile:357: recipe for target 'Parser.o' failed\nmake: *** [Parser.o] Error 127\n-&gt; FAIL Installing HTML::PullParser failed. See /home/weilii/.cpanm/work/1541617377.2551/build.log for details. Retry with --force to force install it.\n</code></pre>\n\n<p>I cannot seem to get this, or a few other dependencies of MEME to install.\nI am VERY new to linux and my searching of this and various other forums has not led me to any solutions.</p>\n\n<p>I have tried this using \"sudo cpan HTML::PullParser\" and when i do it that way it claims that \"HTML::PullParser is up to date (3.57).\" but it is still listed as not installed when i run \"perl dependencies.pl\" to check dependencies for MEME.</p>\n\n<p>I also have miniconda installed, and believe the issue may have something do do with cpan pointing to my system perl installation, while MEME is checking for dependencies in the miniconda installation?</p>\n\n<p>Any help getting these modules installed so I can get MEME installed would be very helpful, as I need the program for my research and have been banging my head into this wall for weeks, and my advisor is starting to get flustered with me.</p>\n\n<p>I feel very lost on how to solve the problem.</p>\n"}, {"tags": ["perl", "parsing", "split"], "answers": [{"comments": [{"owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "edited": false, "score": 0, "creation_date": 1541602621, "post_id": 53191869, "comment_id": 93272696, "body": "or I had  perl -ne &#39;/time =(\\d+\\.\\d+)/; if ($1&gt;5){print $_;}&#39; file1"}, {"owner": {"reputation": 41, "user_id": 10618878, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PB2EVaHIz2w/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDmDQx8aVaavkod80pjCGVNltSsgg/mo/photo.jpg?sz=128", "display_name": "jack94", "link": "https://stackoverflow.com/users/10618878/jack94"}, "edited": false, "score": 0, "creation_date": 1541602864, "post_id": 53191869, "comment_id": 93272877, "body": "that don&#39;t work, do you have a easy code"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "edited": false, "score": 0, "creation_date": 1541602882, "post_id": 53191869, "comment_id": 93272895, "body": "@EssexBoy: The OP seems to restructure the line, too."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 41, "user_id": 10618878, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PB2EVaHIz2w/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDmDQx8aVaavkod80pjCGVNltSsgg/mo/photo.jpg?sz=128", "display_name": "jack94", "link": "https://stackoverflow.com/users/10618878/jack94"}, "edited": false, "score": 0, "creation_date": 1541602914, "post_id": 53191869, "comment_id": 93272928, "body": "@jack94: What doesn&#39;t work? I tested my code with your input data and it worked."}, {"owner": {"reputation": 41, "user_id": 10618878, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PB2EVaHIz2w/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDmDQx8aVaavkod80pjCGVNltSsgg/mo/photo.jpg?sz=128", "display_name": "jack94", "link": "https://stackoverflow.com/users/10618878/jack94"}, "edited": false, "score": 0, "creation_date": 1541602966, "post_id": 53191869, "comment_id": 93272973, "body": "i have the messsage syntax error , near &quot;if $word13&quot;"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 41, "user_id": 10618878, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PB2EVaHIz2w/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDmDQx8aVaavkod80pjCGVNltSsgg/mo/photo.jpg?sz=128", "display_name": "jack94", "link": "https://stackoverflow.com/users/10618878/jack94"}, "edited": false, "score": 0, "creation_date": 1541603396, "post_id": 53191869, "comment_id": 93273283, "body": "@jack94: Did you remove the <code>;</code> before the <code>if</code>?"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1541602229, "creation_date": 1541602229, "answer_id": 53191869, "question_id": 53191699, "link": "https://stackoverflow.com/questions/53191699/perl-split-a-logfile/53191869#53191869", "title": "perl - split a logfile", "body": "<p>Extract the time from $word13 using a regex match and compare it numerically:</p>\n\n<pre><code>print \" $word5-$word2-$word3 $word4 $word5 $word6 $word7 $word8 $word9 $word10 $word11 $word12 $word13 $word14 \\n\"\n    if $word13 =~ /=([0-9.]+)/ and $1 &gt; 5;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "is_accepted": false, "score": 3, "last_activity_date": 1541664160, "last_edit_date": 1541664160, "creation_date": 1541603809, "answer_id": 53192354, "question_id": 53191699, "link": "https://stackoverflow.com/questions/53191699/perl-split-a-logfile/53192354#53192354", "title": "perl - split a logfile", "body": "<p>I up-voted the other answers but I have</p>\n\n<pre><code>$ perl -ne '/time =(\\d+\\.\\d+)/; if($1&gt;5){print $_;}' file1\nWed Oct 17 04:57:08 2018 : Resource = 'test1' cstep= 'titi' time =23.634s\nWed Oct 17 04:57:50 2018 : Resource = 'test2' cstep= 'titi2' time =22.355s\nWed Oct 17 04:58:41 2018 : Resource = 'test3' cstep= 'titi3' time =28.611s\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 10618878, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PB2EVaHIz2w/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDmDQx8aVaavkod80pjCGVNltSsgg/mo/photo.jpg?sz=128", "display_name": "jack94", "link": "https://stackoverflow.com/users/10618878/jack94"}, "edited": false, "score": 0, "creation_date": 1541669858, "post_id": 53202360, "comment_id": 93298036, "body": "thanks for your answer"}, {"owner": {"reputation": 41, "user_id": 10618878, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PB2EVaHIz2w/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDmDQx8aVaavkod80pjCGVNltSsgg/mo/photo.jpg?sz=128", "display_name": "jack94", "link": "https://stackoverflow.com/users/10618878/jack94"}, "edited": false, "score": 0, "creation_date": 1541669897, "post_id": 53202360, "comment_id": 93298068, "body": "do you know how to convert Oct month to 10 ?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 41, "user_id": 10618878, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PB2EVaHIz2w/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDmDQx8aVaavkod80pjCGVNltSsgg/mo/photo.jpg?sz=128", "display_name": "jack94", "link": "https://stackoverflow.com/users/10618878/jack94"}, "edited": false, "score": 0, "creation_date": 1541686414, "post_id": 53202360, "comment_id": 93306896, "body": "@jack94 There are tons of different ways to do that, but the best would be to parse the date and then format it how you want. That\u2019s a separate question, though."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 2, "last_activity_date": 1541657611, "creation_date": 1541657611, "answer_id": 53202360, "question_id": 53191699, "link": "https://stackoverflow.com/questions/53191699/perl-split-a-logfile/53202360#53202360", "title": "perl - split a logfile", "body": "<p>A couple notes:</p>\n\n<ol>\n<li>Whenever you find yourself writing <code>$variableN</code>, you probably want an array</li>\n<li>The default behavior of <a href=\"https://perldoc.pl/functions/split\" rel=\"nofollow noreferrer\"><code>split</code></a> does what you're doing\n3\u0010. You need to isolate the field you're interested in, make it numeric, and then do a numeric comparison</li>\n</ol>\n\n<p>Code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nwhile (&lt;DATA&gt;) {\n    my @fields = split;\n    my $time = $fields[12];\n    $time =~ s/[^\\d.]//g; # remove everything except digits and dots\n\n    next unless $time &gt; 5;\n    print; # or whatever\n}\n\n__DATA__\nWed Oct 17 04:57:08 2018 : Resource = 'test1' cstep= 'titi' time =23.634s\nWed Oct 17 04:57:50 2018 : Resource = 'test2' cstep= 'titi2' time =22.355s\nWed Oct 17 04:58:41 2018 : Resource = 'test3' cstep= 'titi3' time =28.611s\nWed Oct 17 04:58:46 2018 : Resource = 'test4' cstep= 'titi4' time =4.085s\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10618878, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PB2EVaHIz2w/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDmDQx8aVaavkod80pjCGVNltSsgg/mo/photo.jpg?sz=128", "display_name": "jack94", "link": "https://stackoverflow.com/users/10618878/jack94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "closed_date": 1541986470, "accepted_answer_id": 53202360, "answer_count": 3, "score": 0, "last_activity_date": 1541664160, "creation_date": 1541601704, "last_edit_date": 1541610386, "question_id": 53191699, "link": "https://stackoverflow.com/questions/53191699/perl-split-a-logfile", "closed_reason": "Not suitable for this site", "title": "perl - split a logfile", "body": "<p>I have a log file:</p>\n\n<pre><code>Wed Oct 17 04:57:08 2018 : Resource = 'test1' cstep= 'titi' time =23.634s \nWed Oct 17 04:57:50 2018 : Resource = 'test2' cstep= 'titi2' time =22.355s \nWed Oct 17 04:58:41 2018 : Resource = 'test3' cstep= 'titi3' time =28.611s \nWed Oct 17 04:58:46 2018 : Resource = 'test4' cstep= 'titi4' time =4.085s \n</code></pre>\n\n<p>I only want lines with more than five seconds:</p>\n\n<pre><code>Wed Oct 17 04:57:08 2018 : Resource = 'test1' cstep= 'titi' time =23.634s \nWed Oct 17 04:57:50 2018 : Resource = 'test2' cstep= 'titi2' time =22.355s \nWed Oct 17 04:58:41 2018 : Resource = 'test3' cstep= 'titi3' time =28.611s \n</code></pre>\n\n<p>My code is:</p>\n\n<pre><code>open (FILE, 'logfile.txt');\nwhile (&lt;FILE&gt;) {\n\n($word1, $word2, $word3, $word4, $word5, $word6, $word7, $word8, $word9, $word10, $word11, $word12, $word13, $word14) = split(\" \");\nprint \" $word5-$word2-$word3 $word4 $word5 $word6 $word7 $word8 $word9 $word10 $word11 $word12 $word13 $word14 \\n\";\n\n}\nclose (FILE);\nexit;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 701, "user_id": 2492255, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a053202d64973d3859180dd86542c541?s=128&d=identicon&r=PG", "display_name": "vts", "link": "https://stackoverflow.com/users/2492255/vts"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1541597607, "post_id": 53190329, "comment_id": 93269741, "body": "I&#39;ve checked that doc, but still unclear about it, what&#39;s the difference between <code>*VAR = \\0</code> and <code>*VAR = 0</code>? the later is writable."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541612987, "post_id": 53190329, "comment_id": 93278724, "body": "A good thing to query about, but just in case let me say this: you don&#39;t want to use this just so, in normal code. There are pragmas and modules for setting things to be read-only (constants)."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1541599408, "post_id": 53190628, "comment_id": 93270768, "body": "Trivia: Globs are weird because they&#39;re a type of variable (<code>*foo</code>) and a type of value that a scalar can contain (<code>$x = *foo;</code>). Everything else is one or the other."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1541610745, "last_edit_date": 1541610745, "creation_date": 1541598099, "answer_id": 53190628, "question_id": 53190329, "link": "https://stackoverflow.com/questions/53190329/perl-where-to-find-deep-knowledge-on-a-read-only-variable-created-by-var-0/53190628#53190628", "title": "perl: where to find deep knowledge on a read-only variable created by *VAR = \\0", "body": "<p><code>*VAR</code> is the symbol table entry for the following:</p>\n\n<ul>\n<li><code>$VAR</code></li>\n<li><code>@VAR</code></li>\n<li><code>%VAR</code></li>\n<li><code>&amp;VAR</code></li>\n</ul>\n\n<p>(It also has a slot for a file handle, a directory handle, a format and more.)</p>\n\n<p>Because they store a bunch of variables of different types, the symbol table entries are called \"typeglobs\", or \"globs\" for short.</p>\n\n<p>Assigning a reference to a to a glob sets the slot of the appropriate type to the referenced variable. This means that assigning a reference to a scalar to <code>*VAR</code> sets <code>*VAR{SCALAR}</code>, the value returned by <code>$VAR</code>. Since you are passing a reference to a constant, <code>$VAR</code> returns that constant.</p>\n\n<hr>\n\n<p><code>*VAR = *OTHER;</code>, on the other hand, makes the left-hand side name an alias for the right-hand side name.</p>\n\n<ul>\n<li>It makes <code>$VAR</code> equivalent to <code>$OTHER</code>.</li>\n<li>It makes <code>@VAR</code> equivalent to <code>@OTHER</code>.</li>\n<li>It makes <code>%VAR</code> equivalent to <code>%OTHER</code>.</li>\n<li>It makes <code>&amp;VAR</code> equivalent to <code>&amp;OTHER</code>.</li>\n<li>etc</li>\n</ul>\n\n<p><code>*VAR = 0;</code> is treated as <code>*VAR = *{\"0\"};</code> which means <code>*VAR = *0;</code>. This means, among other things, that <code>$VAR</code> will return the current script's name (as <code>$0</code> would).</p>\n\n<hr>\n\n<p>Reference: <a href=\"http://perldoc.perl.org/perldata.html#Typeglobs-and-Filehandles\" rel=\"nofollow noreferrer\">Typeglobs and Filehandles</a></p>\n"}], "owner": {"reputation": 701, "user_id": 2492255, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a053202d64973d3859180dd86542c541?s=128&d=identicon&r=PG", "display_name": "vts", "link": "https://stackoverflow.com/users/2492255/vts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 53190628, "answer_count": 1, "score": 3, "last_activity_date": 1541610745, "creation_date": 1541596921, "question_id": 53190329, "link": "https://stackoverflow.com/questions/53190329/perl-where-to-find-deep-knowledge-on-a-read-only-variable-created-by-var-0", "title": "perl: where to find deep knowledge on a read-only variable created by *VAR = \\0", "body": "<p>I've learned a perl statement like:</p>\n\n<pre><code>*VAR = \\0;\n</code></pre>\n\n<p>create a read-only <code>$VAR</code> in answer <a href=\"https://stackoverflow.com/a/35083240/2492255\">https://stackoverflow.com/a/35083240/2492255</a>, I'm trying to find more documents to understand why <code>$VAR</code> is read-only in this case, but with no luck, could someone help to explain or point me to some documents on this topic?</p>\n"}, {"tags": ["perl", "xml-libxml"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541597036, "post_id": 53190192, "comment_id": 93269446, "body": "By the way, there are two errors in your first line. 1) <code>-&gt;new</code> is not a system call, so <code>$!</code> is meaningless on error.  2) <code>-&gt;new</code> doesn&#39;t return undef on error; it throws an exception."}, {"owner": {"reputation": 12819, "user_id": 1429053, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ikeNz.png?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/1429053/ian"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541597340, "post_id": 53190192, "comment_id": 93269605, "body": "Thanks ikegami I will correct that"}], "answers": [{"comments": [{"owner": {"reputation": 12819, "user_id": 1429053, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ikeNz.png?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/1429053/ian"}, "edited": false, "score": 0, "creation_date": 1541596913, "post_id": 53190321, "comment_id": 93269390, "body": "I&#39;m an idiot, there was a typo on their cdata tag I had missed. Thanks"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1541596880, "creation_date": 1541596880, "answer_id": 53190321, "question_id": 53190192, "link": "https://stackoverflow.com/questions/53190192/xmllibxmlreader-return-value-without-cdata-tag/53190321#53190321", "title": "XML::LibXML::Reader return value without cdata tag", "body": "<p>It's the parser's job to decode the XML for you, so <code>findvalue</code> already returns what you want.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\n\nuse XML::LibXML::Reader qw( );\n\nmy $xml = '&lt;root&gt;&lt;item&gt;&lt;title&gt;&lt;![CDATA[Some title here]]&gt;&lt;/title&gt;&lt;/item&gt;&lt;/root&gt;';\n\nmy $reader = XML::LibXML::Reader-&gt;new(string =&gt; $xml, load_ext_dtd =&gt; 0);\nwhile ($reader-&gt;nextElement( 'item' )) {\n    my $copy = $reader-&gt;copyCurrentNode(1);\n    my $title = $copy-&gt;findvalue( 'title' );\n    say $title;       # Some title here\n}\n</code></pre>\n"}], "owner": {"reputation": 12819, "user_id": 1429053, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ikeNz.png?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/1429053/ian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 53190321, "answer_count": 1, "score": 0, "last_activity_date": 1541596880, "creation_date": 1541596413, "question_id": 53190192, "link": "https://stackoverflow.com/questions/53190192/xmllibxmlreader-return-value-without-cdata-tag", "title": "XML::LibXML::Reader return value without cdata tag", "body": "<p>I am reading an xml file with XML::LibXML::Reader</p>\n\n<pre><code>my $reader = XML::LibXML::Reader-&gt;new(IO =&gt; $fh, load_ext_dtd =&gt; 0) or die qq(cannot read content: $!);\n\nwhile ($reader-&gt;nextElement( 'item' )) {\n\n    my $copy = $reader-&gt;copyCurrentNode(1);\n\n    my $title = $copy-&gt;findvalue( 'title' );  \n\n}\n</code></pre>\n\n<p>However, the title in the xml is inside a CDATA tag, so if I look at it, it is like</p>\n\n<pre><code>&lt;![CDATA[Some title here]]&gt;\n</code></pre>\n\n<p>I could naturally use some regex to get rid of the extra tags, but I am wondering if there is a cleaner way for XML::LibXML::reader to return the title without the cdata tags ?</p>\n\n<p>I've been looking through the docs, but can't find any reference to a way to do that.</p>\n"}, {"tags": ["sql-server", "perl", "odbc"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10587656"}, "edited": false, "score": 0, "creation_date": 1541591740, "post_id": 53188852, "comment_id": 93266873, "body": "Thank you Andrey. And on the client side? Nothing to do here? It seems to nice to be true..."}, {"owner": {"reputation": 10046, "user_id": 8649393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MMPbq.png?s=128&g=1", "display_name": "Andrey Nikolov", "link": "https://stackoverflow.com/users/8649393/andrey-nikolov"}, "edited": false, "score": 0, "creation_date": 1541593043, "post_id": 53188852, "comment_id": 93267483, "body": "Yeah, that&#39;s why the option is called &quot;Force&quot; encryption :) On the client, you may have to do something to make the certificate trusted, but in general no changes in the connection string are necessary."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10587656"}, "edited": false, "score": 0, "creation_date": 1541593698, "post_id": 53188852, "comment_id": 93267862, "body": "Interesting. With DBD::mysql you have to set it explicitly (pointing to certificates, etc.)"}], "tags": [], "owner": {"reputation": 10046, "user_id": 8649393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MMPbq.png?s=128&g=1", "display_name": "Andrey Nikolov", "link": "https://stackoverflow.com/users/8649393/andrey-nikolov"}, "is_accepted": true, "score": 2, "last_activity_date": 1541591216, "creation_date": 1541591216, "answer_id": 53188852, "question_id": 53188701, "link": "https://stackoverflow.com/questions/53188701/perl-odbc-ssl-connection-to-mssql/53188852#53188852", "title": "Perl ODBC SSL connection to MSSQL", "body": "<p>I believe the best solution for your case will be to force encrypted connection on the SQL Server itself. To do this on the server open SQL Server Configuration Manager, in SQL Server Network Configuration right click Protocols for your server and click Properties. On the Certificate tab, select the desired certificate from the drop-down for the Certificate box, and on the Flags tab, in the Force Encryption box, select Yes. Restart the SQL Server service.</p>\n\n<p><a href=\"https://i.stack.imgur.com/5ZIAD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5ZIAD.png\" alt=\"enter image description here\"></a></p>\n\n<p>Of course, in this case you will need to setup certificates. For detailed information you can see Microsoft's article <a href=\"https://docs.microsoft.com/en-us/sql/database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine?view=sql-server-2017\" rel=\"nofollow noreferrer\">Enable Encrypted Connections to the Database Engine</a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10587656"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "accepted_answer_id": 53188852, "answer_count": 1, "score": 0, "last_activity_date": 1541591216, "creation_date": 1541590580, "question_id": 53188701, "link": "https://stackoverflow.com/questions/53188701/perl-odbc-ssl-connection-to-mssql", "title": "Perl ODBC SSL connection to MSSQL", "body": "<p>I use the following to connect an application (client on Windows) to a remote MSSQL database:</p>\n\n<pre><code>use DBD::ODBC;\n$dbh = DBI-&gt;connect(\n   \"dbi:ODBC:Driver={SQL Server};\n    Server=$SQLservice;UID=$SQLuser;PWD=$SQLpassword\", \n    {PrintError =&gt; 0, RaiseError =&gt; 1, AutoCommit =&gt; $AutoCommit, FetchHashKeyName =&gt; 'NAME_lc'}\n) or die \"Can't connect to the database: $DBI::errstr\\n\";\n</code></pre>\n\n<p>Now my company asks if it is possible for the clients to use SQL Server 2017 with SSL. DBD::ODBC doesn't mention SSL at all, and I have not found any information on the internet (not to say details instrctions on how to realize it). Does it mean, I should answer \"no\"?</p>\n"}, {"tags": ["arrays", "perl", "sorting", "multidimensional-array"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 3251311, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ba00bdc131ea07fb8f1b3708edae9c4?s=128&d=identicon&r=PG&f=1", "display_name": "A-Kay", "link": "https://stackoverflow.com/users/3251311/a-kay"}, "edited": false, "score": 0, "creation_date": 1541603894, "post_id": 53182059, "comment_id": 93273621, "body": "that&#39;s awesome, thanks @choroba - I was using &#39;&lt;=&gt;&#39; instead of &#39;cmp&#39;. works perfectly. thanks!"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 9, "last_activity_date": 1541574250, "last_edit_date": 1541574250, "creation_date": 1541550503, "answer_id": 53182059, "question_id": 53181680, "link": "https://stackoverflow.com/questions/53181680/perl-sorting-arrayref/53182059#53182059", "title": "Perl sorting arrayref", "body": "<p>Just sort the dereferenced array by the first element:</p>\n\n<pre><code>$array = [ sort { $a-&gt;[0] cmp $b-&gt;[0] } @$array ];\n</code></pre>\n\n<p>or</p>\n\n<pre><code>@$array = sort { $a-&gt;[0] cmp $b-&gt;[0] } @$array;\n</code></pre>\n\n<p>Returns:</p>\n\n<pre><code>[ [ 'aaaa', '2' ],\n  [ 'bb',   '1' ],\n  [ 'cc',   '3' ] ]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1541560716, "post_id": 53183100, "comment_id": 93256282, "body": "Or <code>@$array = ... @$array;</code> instead of <code>$array = [ ... @$array ];</code> to avoid creating a new array"}], "tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": false, "score": 4, "last_activity_date": 1541560261, "creation_date": 1541560261, "answer_id": 53183100, "question_id": 53181680, "link": "https://stackoverflow.com/questions/53181680/perl-sorting-arrayref/53183100#53183100", "title": "Perl sorting arrayref", "body": "<p>If you can reach into CPAN, use the <code>sort_by</code> function provided by <a href=\"https://metacpan.org/pod/List::UtilsBy\" rel=\"nofollow noreferrer\"><code>List::UtilsBy</code></a> (or via <a href=\"https://metacpan.org/pod/List::AllUtils\" rel=\"nofollow noreferrer\"><code>List::AllUtils</code></a>)</p>\n\n<pre><code>use List::AllUtils 'sort_by';\n$array = [ sort_by { $_-&gt;[0] } @$array ];\n</code></pre>\n\n<p>... or alternatively using <a href=\"https://metacpan.org/pod/Sort::Key\" rel=\"nofollow noreferrer\"><code>Sort::Key</code></a></p>\n\n<pre><code>use Sort::Key 'keysort';\n$array = [ keysort { $_-&gt;[0] } @$array ];\n</code></pre>\n\n<p>Both achieve the same thing, but you should really try to get a modern version of <code>List::AllUtils</code> as it will save you from reinventing a lot of wheels.</p>\n"}], "owner": {"reputation": 59, "user_id": 3251311, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ba00bdc131ea07fb8f1b3708edae9c4?s=128&d=identicon&r=PG&f=1", "display_name": "A-Kay", "link": "https://stackoverflow.com/users/3251311/a-kay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 53182059, "answer_count": 2, "score": 0, "last_activity_date": 1541574250, "creation_date": 1541547330, "question_id": 53181680, "link": "https://stackoverflow.com/questions/53181680/perl-sorting-arrayref", "title": "Perl sorting arrayref", "body": "<p>So I have this Perl code:</p>\n\n<pre><code>$array-&gt;[0][0] = \"cc\";\n$array-&gt;[0][1] = \"3\";\n$array-&gt;[1][0] = \"aaaa\";\n$array-&gt;[1][1] = \"2\";\n$array-&gt;[2][0] = \"bb\";\n$array-&gt;[2][1] = \"1\";\n</code></pre>\n\n<p>And I need it sorted in alphabetical order (second column) so that $array->[0][0] is \"aaaa\" and $array->[0][1] is \"2\"</p>\n\n<p>I must have been asleep during Programming 101 in the 90's. I've spent hours trawling code and tutorials on the net and just can't get it. Can someone provide me with some sample code please. thanks!</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 4, "creation_date": 1541543315, "post_id": 53180049, "comment_id": 93252145, "body": "Specifically, left to right order of the opening parentheses. <a href=\"https://perldoc.pl/perlre#Capture-groups\" rel=\"nofollow noreferrer\">Details here</a>, and <a href=\"https://perldoc.pl/perlop#m/PATTERN/msixpodualngc\" rel=\"nofollow noreferrer\">this section of perlop</a> describes the few match delimiters that have special meaning (<code>{}</code> and <code>[]</code> do not)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1541563428, "post_id": 53180049, "comment_id": 93256781, "body": "@Grinnz, There is technically two special things about <code>()</code>, <code>[]</code> and <code>{}</code>: 1) The opening delimiter doesn&#39;t terminate the pattern, and 2) They are nestable (e.g <code>m[a[bc]d]</code>)"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541577045, "post_id": 53180049, "comment_id": 93260141, "body": "@ikegami That is true, and also applies to <code>&lt;&gt;</code>, but I meant special meaning to the matching operation it&#39;s applied to, such as if you use single-quotes as the delimiter. <a href=\"https://perldoc.pl/perlop#Quote-and-Quote-like-Operators\" rel=\"nofollow noreferrer\">The previous perlop section</a> also goes into more detail on quoting delimiters."}], "tags": [], "owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "is_accepted": true, "score": 6, "last_activity_date": 1541538598, "creation_date": 1541538598, "answer_id": 53180049, "question_id": 53179872, "link": "https://stackoverflow.com/questions/53179872/m-operator-of-regular-expression-in-perl/53180049#53180049", "title": "m operator of Regular Expression in Perl", "body": "<p>There is no difference between <code>m{}</code> and <code>m[]</code>. Perl lets you change the delimiters of regexes to make them easier to read in a given context.</p>\n\n<p><code>$var =~ m/*.zip/</code> and <code>$var =~ m{*.zip}</code> and <code>$var =~ m[*.zip]</code> and <code>$var =~ m#*.zip#</code> all match the same way.</p>\n\n<p>For capture groups, captures are always handled from left to right, so for your example:</p>\n\n<pre><code>my $foo = 'CuNaHg';\nif ( $foo =~ m{(((Cu)(Na))(Hg))} ) {\n    print $1; # CuNaHg \n    print $2; # CuNa\n    print $3; # Cu\n    print $4; # Na\n    print $5; # Hg\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9537786, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gYuwmR1adco/AAAAAAAAAAI/AAAAAAAAEdI/5xccCUzLBzc/photo.jpg?sz=128", "display_name": "Chuda Mainali", "link": "https://stackoverflow.com/users/9537786/chuda-mainali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 53180049, "answer_count": 1, "score": 0, "last_activity_date": 1541538598, "creation_date": 1541537759, "question_id": 53179872, "link": "https://stackoverflow.com/questions/53179872/m-operator-of-regular-expression-in-perl", "title": "m operator of Regular Expression in Perl", "body": "<p>What is the difference between m[] and m{} regular expression in Perl? How does $1, $2, etc matches the pattern \"(((Cu)(Na))(Hg))\"?\nthanks</p>\n"}, {"tags": ["postgresql", "perl", "plperl"], "answers": [{"comments": [{"owner": {"reputation": 1113, "user_id": 2921408, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0f3e22cd0e98a8514c7b847d7132ebcc?s=128&d=identicon&r=PG", "display_name": "sjmcdowall", "link": "https://stackoverflow.com/users/2921408/sjmcdowall"}, "edited": false, "score": 0, "creation_date": 1541534325, "post_id": 53179098, "comment_id": 93248270, "body": "Well -- ugh -- I feel like a sort of doh moment!  That makes total sense.. for some reason I was thinking internal functions would be &quot;different&quot;.  Overthinking perhaps!  Thanks!"}, {"owner": {"reputation": 1113, "user_id": 2921408, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0f3e22cd0e98a8514c7b847d7132ebcc?s=128&d=identicon&r=PG", "display_name": "sjmcdowall", "link": "https://stackoverflow.com/users/2921408/sjmcdowall"}, "edited": false, "score": 0, "creation_date": 1541536954, "post_id": 53179098, "comment_id": 93249509, "body": "I am getting a syntax error near/at the $q$ part .. is that ..ah.. legal for within a plperl function??  The error is:  ERROR: syntax error at line 9, near &quot;$q$.. The code is:   # Ok -- get our customerId from the current_settings..   $rv = spi_exec_query($q$     select nullif(current_setting(&#39;jwt.claims.customerId&#39;, true), &#39;&#39;)::int as cid     $q$);"}, {"owner": {"reputation": 85043, "user_id": 1995738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fXrVi.png?s=128&g=1", "display_name": "klin", "link": "https://stackoverflow.com/users/1995738/klin"}, "reply_to_user": {"reputation": 1113, "user_id": 2921408, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0f3e22cd0e98a8514c7b847d7132ebcc?s=128&d=identicon&r=PG", "display_name": "sjmcdowall", "link": "https://stackoverflow.com/users/2921408/sjmcdowall"}, "edited": false, "score": 0, "creation_date": 1541537954, "post_id": 53179098, "comment_id": 93249996, "body": "I&#39;ve tried to use postgres quotes in a pearl function... Sorry, the answer updated."}, {"owner": {"reputation": 1113, "user_id": 2921408, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0f3e22cd0e98a8514c7b847d7132ebcc?s=128&d=identicon&r=PG", "display_name": "sjmcdowall", "link": "https://stackoverflow.com/users/2921408/sjmcdowall"}, "edited": false, "score": 0, "creation_date": 1541598087, "post_id": 53179098, "comment_id": 93269987, "body": "Thanks -- I thought as much -- too bad, those $Q$ type quote things are handy!  :)"}], "tags": [], "owner": {"reputation": 85043, "user_id": 1995738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fXrVi.png?s=128&g=1", "display_name": "klin", "link": "https://stackoverflow.com/users/1995738/klin"}, "is_accepted": true, "score": 1, "last_activity_date": 1541537959, "last_edit_date": 1541537959, "creation_date": 1541534201, "answer_id": 53179098, "question_id": 53178878, "link": "https://stackoverflow.com/questions/53178878/accessing-current-settings-function-within-a-plperl-function-in-postgres/53179098#53179098", "title": "Accessing current_settings function within a plperl function in Postgres", "body": "<p>Use one of the <a href=\"https://www.postgresql.org/docs/current/plperl-builtins.html#PLPERL-DATABASE\" rel=\"nofollow noreferrer\">database access functions</a>, e.g.:</p>\n\n<pre><code>$rv = spi_exec_query(\"select nullif(current_setting('jwt.claims.customerId', true), '')::int as cid\");\n$cid = $rv-&gt;{rows}[0]-&gt;{cid};\n</code></pre>\n"}], "owner": {"reputation": 1113, "user_id": 2921408, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0f3e22cd0e98a8514c7b847d7132ebcc?s=128&d=identicon&r=PG", "display_name": "sjmcdowall", "link": "https://stackoverflow.com/users/2921408/sjmcdowall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 53179098, "answer_count": 1, "score": 1, "last_activity_date": 1541537959, "creation_date": 1541533243, "question_id": 53178878, "link": "https://stackoverflow.com/questions/53178878/accessing-current-settings-function-within-a-plperl-function-in-postgres", "title": "Accessing current_settings function within a plperl function in Postgres", "body": "<p>I am writing my first plperl function in Postgres and I have a need to access some values in the current_settings() area (by use of that call) -- and I am wondering what the best solution to doing so is?</p>\n\n<p>In plpgsql I can do something like:</p>\n\n<pre><code>DECLARE\n  cid int;\nBEGIN\n  select nullif(current_setting('jwt.claims.customerId', true), '') :: int into cid;\nEND ...\n</code></pre>\n\n<p>Just wondering about the equivalent of accessing system functions like current_setting within a Perl plperl script..</p>\n\n<p>THanks!</p>\n"}, {"tags": ["regex", "bash", "perl", "replace", "grep"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1541502421, "post_id": 53170100, "comment_id": 93230983, "body": "I suspect it&#39;s because <code>@wR</code> in that example is being treated as an array when it shows up in the regular expression and gets turned into an (empty) string."}, {"owner": {"reputation": 8293, "user_id": 8656552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FPg67.png?s=128&g=1", "display_name": "Paul Hodges", "link": "https://stackoverflow.com/users/8656552/paul-hodges"}, "edited": false, "score": 0, "creation_date": 1541518010, "post_id": 53170100, "comment_id": 93239696, "body": "Also, it looks like you are using <code>~</code> as your regex delimiter, but you are starting your quoting with <code>\\Q</code> at the beginning of the search regex and ending it with <code>\\E</code> <i>after</i> the delimiter that ends the search and begins the replacement.  Make them both <code>\\Q</code>, as each ends at the end of the string anyway, and you need to quote the <code>@</code> that Perl will try to interpolate as an array sigil."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1541526993, "post_id": 53170100, "comment_id": 93244762, "body": "you&#39;re putting bandaids upon bandaids.... Use <code>find</code> to find files and then use <code>awk</code> to replace one string with another, it&#39;s that simple."}, {"owner": {"reputation": 167, "user_id": 5797450, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3e7e420955103c5e45d1bc45429a3bd8?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/5797450/nick"}, "edited": false, "score": 0, "creation_date": 1541529370, "post_id": 53170100, "comment_id": 93245912, "body": "Ed, I would rather go easier way if there was one found. I tried to explain on another thread to yourself, that CentOS 7.x on which I am working on has GNU Awk 4.0.2, which does not have &#39;-i inplace&#39; option. Only AWK 4.1 and after versions have that feature. So if go with awk then I have to somehow store the output file and then replace the old one, which becomes more complex. Give me working version with awk on the other thread and I&#39;ll accept your answer."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1541541453, "post_id": 53170100, "comment_id": 93251421, "body": "You already accepted an answer on your other thread and it DID answer the question you originally posted, now you&#39;ve accepted an answer on this thread and again it DOES answer the question you posted. You just keep asking how to implement specific parts of the code that you think you need to solve your problem instead of asking how to solve your problem. They&#39;ve all be <a href=\"https://mywiki.wooledge.org/XyProblem\" rel=\"nofollow noreferrer\">XY Problems</a> so far. Post a complete question and you&#39;ll get the right answer."}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 5797450, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3e7e420955103c5e45d1bc45429a3bd8?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/5797450/nick"}, "edited": false, "score": 1, "creation_date": 1541509522, "post_id": 53170714, "comment_id": 93234622, "body": "Excellent! All three versions worked for me. Could you please elaborate on the last part of your answer? How exactly I should <code>further restrict</code> my regex pattern matches? This was the part of question."}, {"owner": {"reputation": 167, "user_id": 5797450, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3e7e420955103c5e45d1bc45429a3bd8?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/5797450/nick"}, "edited": false, "score": 0, "creation_date": 1541511289, "post_id": 53170714, "comment_id": 93235699, "body": "I was too hasty to accept the answer, because everything worked for me on CLI, however on real bash script it did not. The first one modified with adding <code>-i</code> as <code>grep -rlF &quot;$1&quot; | xargs perl -pi -e&#39;BEGIN { ($o,$n)=splice(@ARGV,0,2) } s&#47;\\Q$o&#47;$n&#47;g&#39; -- &quot;$1&quot; &quot;$2&quot;</code> didn&#39;t work. The second one also with <code>-i</code> as <code>grep -rlF &quot;$1&quot; | xargs perl -spi -e&#39;s&#47;\\Q$o&#47;$n&#47;g&#39; -- --o=&quot;$1&quot; --n=&quot;$2&quot; --</code> also failed. I don&#39;t know how to try the third one on script."}, {"owner": {"reputation": 167, "user_id": 5797450, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3e7e420955103c5e45d1bc45429a3bd8?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/5797450/nick"}, "edited": false, "score": 0, "creation_date": 1541511575, "post_id": 53170714, "comment_id": 93235894, "body": "Can you please test <code>grep -rlF &quot;${old_pass}&quot; | xargs perl -spe &#39;s&#47;\\Q$o&#47;$n&#47;g&#39; -- --o=&quot;$old_pass&quot; --n=&quot;$new_pass&quot; --</code> on your end?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 167, "user_id": 5797450, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3e7e420955103c5e45d1bc45429a3bd8?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/5797450/nick"}, "edited": false, "score": 0, "creation_date": 1541512330, "post_id": 53170714, "comment_id": 93236307, "body": "Should be <code>-o</code> and <code>-n</code>. That&#39;s what I thought, but I copied the double-dash from another answer. Fixed"}, {"owner": {"reputation": 8293, "user_id": 8656552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FPg67.png?s=128&g=1", "display_name": "Paul Hodges", "link": "https://stackoverflow.com/users/8656552/paul-hodges"}, "edited": false, "score": 0, "creation_date": 1541518173, "post_id": 53170714, "comment_id": 93239790, "body": "All exported environment variables are available inside Perl as key/val pairs in the <code>%ENV</code> (&quot;environment&quot;) hash. If you set <code>O=1</code> on the command line it becomes part of the invocation&#39;s env, so inside Perl it would be accessed as <code>$ENV{O}</code>."}, {"owner": {"reputation": 167, "user_id": 5797450, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3e7e420955103c5e45d1bc45429a3bd8?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/5797450/nick"}, "edited": false, "score": 0, "creation_date": 1541531301, "post_id": 53170714, "comment_id": 93246846, "body": "@ikegami, you are right - the oneliner <code>grep -rlF &quot;${old_pass}&quot; | xargs perl -spi -e&#39;s&#47;\\Q$o&#47;$n&#47;g&#39; -- -o=&quot;$old_pass&quot; -n=&quot;$new_pass&quot; --</code> works as expected on command line, but for some reason it is failing to work in a bash script. Do you have any ideas of why it might be failing in a bash script?"}, {"owner": {"reputation": 167, "user_id": 5797450, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3e7e420955103c5e45d1bc45429a3bd8?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/5797450/nick"}, "edited": false, "score": 0, "creation_date": 1541533031, "post_id": 53170714, "comment_id": 93247658, "body": "Actually, after fixing my bash script it started to work. Thanks a lot! I do accept your answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1541512321, "last_edit_date": 1541512321, "creation_date": 1541502722, "answer_id": 53170714, "question_id": 53170100, "link": "https://stackoverflow.com/questions/53170100/search-and-replace-variables-with-special-characters-in-multiple-files-with-perl/53170714#53170714", "title": "Search and replace variables with special characters in multiple files with perl command in a bash script", "body": "<p>You tried and failed to generate the correct Perl code. But the real problem is that you tried to generate Perl code form the shell in the first place. There are three primary ways of passing information to Perl without using STDIN or external storage.</p>\n\n<ul>\n<li><p>Arguments</p>\n\n<pre><code>perl -pe'BEGIN { ($o,$n)=splice(@ARGV,0,2) } s/\\Q$o/$n/g' -- \"$old_pass\" \"$new_pass\"\n</code></pre></li>\n<li><p>Command-line options</p>\n\n<p>In a full program, you'd use <a href=\"http://search.cpan.org/perldoc?Getopt::Long\" rel=\"nofollow noreferrer\">Getopt::Long</a>, but <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\"><code>perl -s</code></a> will do fine here.</p>\n\n<pre><code>perl -spe's/\\Q$o/$n/g' -- -o=\"$old_pass\" -n=\"$new_pass\" --\n</code></pre></li>\n<li><p>Environment variables</p>\n\n<pre><code>O=\"$old_pass\" N=\"$new_pass\" perl -pe's/\\Q$ENV{O}/$ENV{N}/g' --\n</code></pre>\n\n<p>(In your case, you'd have to set the env vars for <code>xargs</code> instead of <code>perl</code> itself.)</p></li>\n</ul>\n\n<hr>\n\n<p>By the way, you should further restrict what your regex pattern matches. As it stands, you could have false positives. (Matching the wrong user's password. matching part of a password. Matching something that isn't a password at all.)</p>\n"}], "owner": {"reputation": 167, "user_id": 5797450, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3e7e420955103c5e45d1bc45429a3bd8?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/5797450/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "accepted_answer_id": 53170714, "answer_count": 1, "score": 1, "last_activity_date": 1541512321, "creation_date": 1541500359, "last_edit_date": 1541501048, "question_id": 53170100, "link": "https://stackoverflow.com/questions/53170100/search-and-replace-variables-with-special-characters-in-multiple-files-with-perl", "title": "Search and replace variables with special characters in multiple files with perl command in a bash script", "body": "<p>Trying to search and replace password variables with special characters in multiple files with a <code>perl</code> command in a bash script. So far I have:</p>\n\n<pre><code>grep -rlF \"${old_pass}\" | xargs perl -p -e \"s~\\Q$old_pass~\\E$new_pass~g\"\n</code></pre>\n\n<p>and it works for most cases, however sometimes it fails. For example, given <code>old_pass=*DGB9Twq7WTwz@wR</code> and <code>new_pass=tDx6U&amp;ShRv}E3Mdb</code> the above command results in <code>tDx6U&amp;ShRv}E3Mdb@wR</code> instead of just <code>tDx6U&amp;ShRv}E3Mdb</code>.</p>\n\n<p>Please note that passwords are generated automatically and can consist of all uppercase and lowercase letters, numbers and all special characters. So the working version must be able to take into account (escape) all kind of possible password versions. </p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1541488754, "creation_date": 1541488754, "answer_id": 53167357, "question_id": 53166822, "link": "https://stackoverflow.com/questions/53166822/perl-extract-duplicate-sequences-from-a-multi-fasta-file/53167357#53167357", "title": "perl- extract duplicate sequences from a multi-fasta file", "body": "<p>There's no need to store the sequences in memory, you can print them directly when reading the file. Use a flag variable (<code>$inside</code> in the example) that tells you whether you're reading the desired sequence or not.</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nmy ($file, $header) = @ARGV;\n\nmy $inside;\nopen my $in, '&lt;', $file or die $!;\nwhile (&lt;$in&gt;) {\n    $inside = $1 eq $header if /^&gt;(.*)/;\n    print if $inside;\n}\n</code></pre>\n\n<p>Run as </p>\n\n<pre><code>perl script.pl file.fasta OGH38127_some_organism &gt; output.fasta\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 4, "last_activity_date": 1541491526, "creation_date": 1541491526, "answer_id": 53167947, "question_id": 53166822, "link": "https://stackoverflow.com/questions/53166822/perl-extract-duplicate-sequences-from-a-multi-fasta-file/53167947#53167947", "title": "perl- extract duplicate sequences from a multi-fasta file", "body": "<p>If you use the <a href=\"https://bioperl.org/\" rel=\"nofollow noreferrer\">Bioperl</a> module <a href=\"https://metacpan.org/pod/Bio::SeqIO\" rel=\"nofollow noreferrer\">Bio::SeqIO</a> to handle the parsing of the fasta files, it becomes really simple:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse Bio::SeqIO;\n\nmy ($file, $name) = @ARGV;\nmy $in = Bio::SeqIO-&gt;new(-file =&gt; $file, -format =&gt; \"fasta\");\nmy $out = Bio::SeqIO-&gt;new(-fh =&gt; \\*STDOUT, -format =&gt; \"fasta\");\n\nwhile (my $s = $in-&gt;next_seq) {\n  $out-&gt;write_seq($s) if $s-&gt;display_id eq $name;\n}\n</code></pre>\n\n<p>run with <code>perl grep_fasta.pl input.fasta OGH38127_some_organism</code></p>\n"}], "owner": {"reputation": 19, "user_id": 8392790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e3b6c8293ecced985afe05c3f6450c?s=128&d=identicon&r=PG&f=1", "display_name": "user8392790", "link": "https://stackoverflow.com/users/8392790/user8392790"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 53167947, "answer_count": 2, "score": 0, "last_activity_date": 1541491526, "creation_date": 1541486161, "last_edit_date": 1541486550, "question_id": 53166822, "link": "https://stackoverflow.com/questions/53166822/perl-extract-duplicate-sequences-from-a-multi-fasta-file", "title": "perl- extract duplicate sequences from a multi-fasta file", "body": "<p>I have a big fasta file <strong>input.fasta</strong> which consists many duplicate sequences. I want to enter a header name and extract out all the sequences with the matching header. I know this could be done easily done with awk/sed/grep but I need a Perl code.</p>\n\n<p><strong>input.fasta</strong></p>\n\n<pre><code>&gt;OGH38127_some_organism\nPAAALGFSHLARQEDSALTPKHYTWTAPGEGDVRAPCPVLNTLANHEFLPHNGKNITVDK\nAITALGDAMNISPALATTFFTGGLKTNPTPNATWFDLDMLHKHNVLEHDGSLSRRDMHFD\nTSNKFDAATFANFLSYFDANATVLGVNETADARARHAYDMSKMNPEFTITSSMLPIMVGE\nSVMMMLVWGSVEEPGAQRDYFEYFFRNERLPVELGWTPGETEIGVPVVTAMITAMVAASP\nTDVP\n&gt;ABC14110_some_different_org_name\nWWVAPGPGDSRGPCPGLNTLANHGYLPHDGKGITLSILADAMLDGFNIARSDALLLFTQ\nAIRTSPQYPATNSFNLHDLGRDQLNRHNVLEHDASLSRADDFFGSNHIFNETVFDESRAY\nAMLANSKIARQINSKAFNPQYKFTSKTEQFSLGEIAAPIIAFGNSTSGEVNRTLVEYFFM\nNERLPIELGWKKSEDGIALDDILRVTQMISKAASLITPSALSWTAETLTP\n&gt;OGH38127_some_organism\nLPWSRPGPGAVRAPCPMLNTLANHGFLPHDGKNISEARTVQALGRALNIEKELSQFLFEK\nALTTNPHTNATTFSLNDLSRHNLLEHDASLSRQDAYFGDNHDFNQTIFDETRSYWPHPVI\nDIQAAALSRQARVNTSIAKNPTYNMSELGLDFSYGETAAYILILGDKDFGKVNRSWVEYL\nFENERLPVELGWTRHNETITSDDLNTMLEKVVN\n.\n.\n.\n</code></pre>\n\n<p>I have tried with the following script but it is not giving any output.</p>\n\n<p><strong>script.pl</strong></p>\n\n<pre><code>#!/perl/bin/perl -w\nuse strict;\nuse warnings;\n\nprint \"Enter a fasta header to search for:\\n\";\nmy $head = &lt;&gt;;\n\nmy $file = \"input.fasta\";\nopen (READ, \"$file\") || die \"Cannot open $file: $!.\\n\";\nmy %seqs;\nmy $header;\n\nwhile (my $line = &lt;READ&gt;){\n    chomp $line;\n    $line =~ s/^&gt;(.*)\\n//;\n    if ($line =~ m/$head/){\n        $header = $1;\n    }\n}\nclose (READ);\n\nopen( my $out , \"&gt;\", \"out.fasta\" ) or die $!;\n\nmy @count_seq = keys %seqs;\nforeach (@count_seq){\n    print $out $header, \"\\n\";\n    print $out $seqs{$header}, \"\\n\";\n}\n\nexit;\n</code></pre>\n\n<p>Please help me correct this script.\nThanks!</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 1, "creation_date": 1541462767, "post_id": 53163627, "comment_id": 93218571, "body": "Your code doesn&#39;t really make sense. You are creating two Array&#39;s, <code>@A</code> and <code>@B</code>, and then assigning a HashRef to it."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1541464392, "post_id": 53163627, "comment_id": 93218899, "body": "Additionally, complements make sense for sets, not arrays which have an ordering and allow duplicates. You can create sets and perform set operations using <a href=\"https://metacpan.org/pod/Set::Scalar\" rel=\"nofollow noreferrer\">Set::Scalar</a>. I will not reimplement it for you in core Perl, but the source is there to read."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541469890, "post_id": 53163627, "comment_id": 93219969, "body": "Perhaps you can explain what you mean by &quot;complement?&quot;"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1541472911, "post_id": 53163627, "comment_id": 93220536, "body": "I think you mean &quot;relative complement&quot;"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1541527652, "post_id": 53163627, "comment_id": 93245087, "body": "Please, have a look at StackOverflow&#39;s <a href=\"https://stackoverflow.com/editing-help\">Markdown help</a>. In particular, you can format your code by adding four spaces at the beginning of the line."}, {"owner": {"reputation": 58, "user_id": 10416462, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FW1wr9vgYJM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXhUBHrkTL9VXsDBiyMbQ1054cc5g/mo/photo.jpg?sz=128", "display_name": "Sxc-Dev", "link": "https://stackoverflow.com/users/10416462/sxc-dev"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1541528040, "post_id": 53163627, "comment_id": 93245275, "body": "@ysth Yes. you are correct. (@)Everyone The question has been updated based on comment section. (@)Grinnz I saw that already. I only was wanted to use something that requires no additional installation of any external module."}, {"owner": {"reputation": 58, "user_id": 10416462, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FW1wr9vgYJM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXhUBHrkTL9VXsDBiyMbQ1054cc5g/mo/photo.jpg?sz=128", "display_name": "Sxc-Dev", "link": "https://stackoverflow.com/users/10416462/sxc-dev"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1541528370, "post_id": 53163627, "comment_id": 93245447, "body": "@Dada Thank you. I did not know those formatting options were available in stack overflow."}], "answers": [{"comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1541497333, "post_id": 53165143, "comment_id": 93228178, "body": "<code>@B{@B} = ();</code> I did something similar in an answer once and had people complain about it... happy to see I&#39;m not the only one who sometimes uses that idiom when you don&#39;t care what the values in the hash are."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1541528331, "post_id": 53165143, "comment_id": 93245416, "body": "@Shawn There&#39;s nothing wrong with it, as long as you know to then use <code>exists</code> rather than a truthy check, since it will populate the values as <code>undef</code>. Personally I prefer values of 1 just for aesthetics, and the performance difference is usually irrelevant."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 2, "last_activity_date": 1541472752, "creation_date": 1541472752, "answer_id": 53165143, "question_id": 53163627, "link": "https://stackoverflow.com/questions/53163627/how-do-i-get-a-relative-complement-of-two-string-array/53165143#53165143", "title": "How do I get a relative complement of two string array?", "body": "<pre><code>my @A = (\"aa\",\"bb\"); \nmy @B = (\"aa\",\"cc\");\n\n# make a hash with all the elements of @B as keys\nmy %B;\n@B{@B} = ();\n\nmy @complement = grep { ! exists $B{$_} } @A;\n</code></pre>\n"}], "owner": {"reputation": 58, "user_id": 10416462, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FW1wr9vgYJM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXhUBHrkTL9VXsDBiyMbQ1054cc5g/mo/photo.jpg?sz=128", "display_name": "Sxc-Dev", "link": "https://stackoverflow.com/users/10416462/sxc-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 53165143, "answer_count": 1, "score": -1, "last_activity_date": 1541528563, "creation_date": 1541459406, "last_edit_date": 1541528563, "question_id": 53163627, "link": "https://stackoverflow.com/questions/53163627/how-do-i-get-a-relative-complement-of-two-string-array", "title": "How do I get a relative complement of two string array?", "body": "<pre><code>my @A = (\"aa\",\"bb\");\n\nmy @B = (\"aa\",\"cc\");\n</code></pre>\n\n<p>It is the same concept as relative complement of Set. (A-B) The output should be \"bb\". I <strong>do not</strong> want to use any external Modules of Perl, only built in functions of Perl.</p>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1541457821, "post_id": 53161976, "comment_id": 93217149, "body": "Why not do most (possibly all) of that directly in Perl?"}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1541512094, "post_id": 53161976, "comment_id": 93236182, "body": "@Shawn The only thing running in the local Perl program is the <code>ssh</code> command; everything else is executed by the shell on the remote host."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1541535184, "post_id": 53161976, "comment_id": 93248674, "body": "If you aren&#39;t willing to install the modules necessary to do this safely in perl (by using <a href=\"https://stackoverflow.com/a/53163525/14122\">zdim&#39;s great answer</a>), would you be interested in a shell-based answer that doesn&#39;t use perl at all?"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541462095, "post_id": 53163525, "comment_id": 93218426, "body": "@Developer Edited and added.  Let me know if more/other is needed"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1541511110, "post_id": 53163525, "comment_id": 93235586, "body": "With respect to the awk command, <code>shell_quote(&#39;awk&#39;, &#39;-F&#39;, &#39; &#39;, &#39;{print $4}&#39;)</code> appears to Do The Right Thing."}, {"owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "edited": false, "score": 0, "creation_date": 1541524056, "post_id": 53163525, "comment_id": 93243261, "body": "I don;t have these modules installed which you are using and i am unable to install them because of permission"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1541529594, "post_id": 53163525, "comment_id": 93246041, "body": "@CharlesDuffy Yes, thank you, edited.  It makes sense (after the fact) -- the <code>-F</code> needs precisely a space, which does get escaped."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "edited": false, "score": 0, "creation_date": 1541529929, "post_id": 53163525, "comment_id": 93246180, "body": "@Developer  The module <code>String::ShellQuote</code> &quot;merely&quot; escapes what need be escaped for the shell to get the right string. You can do this by hand instead, but it&#39;s a chore and it can be easy to miss a spot and have &quot;shell injection&quot; happen behind your back (that doesn&#39;t have to imply anyone&#39;s bad intent, it can bite accidentally and can go down completely quietly).  If you do this often I&#39;d recommend to ask for it to be installed.  You can also install a module as a user if that works for how your code is run."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "edited": false, "score": 0, "creation_date": 1541530023, "post_id": 53163525, "comment_id": 93246222, "body": "@Developer As for the other modules mentioned (to run and manage external commands) -- they are <i>really</i> handy and useful.  I&#39;d recommend to pick one or two and ask for them to be installed. (You can at least try them out by installing them for yourself, as a user.)"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "edited": false, "score": 0, "creation_date": 1541535294, "post_id": 53163525, "comment_id": 93248733, "body": "@Developer, ...do you have access to <i>your own home directory</i>? That&#39;s all you need -- write access to the system-wide perl installation isn&#39;t necessary."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "edited": false, "score": 0, "creation_date": 1541536209, "post_id": 53163525, "comment_id": 93249130, "body": "@Developer  Posted a hand-rolled solution (working in my tests) -- until you get those modules installed. Please figure out how to do that; life&#39;s much easier that way.  (If your software can run using user-installed modules then that&#39;s straightforward)."}, {"owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "edited": false, "score": 0, "creation_date": 1541617900, "post_id": 53163525, "comment_id": 93280940, "body": "@thanks for explaining and helping me to understand how we can fix this issue."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "edited": false, "score": 1, "creation_date": 1541621755, "post_id": 53163525, "comment_id": 93282817, "body": "@Developer Welcome :) Let me know if questions come up."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 6, "last_activity_date": 1541621722, "last_edit_date": 1541621722, "creation_date": 1541458856, "answer_id": 53163525, "question_id": 53161976, "link": "https://stackoverflow.com/questions/53161976/run-unix-command-from-a-perl-script/53163525#53163525", "title": "Run Unix command from a perl Script", "body": "<p>First, in order to avoid a quoting nightmare and the many chances for shell injection I'd suggest to use a module, like <a href=\"https://metacpan.org/pod/String::ShellQuote\" rel=\"nofollow noreferrer\">String::ShellQuote</a></p>\n\n<p>Then, I don't see that you need all those external tools, while such a long pipe-line is tricky and expensive. It invokes a number of programs, for jobs done really well in Perl, and requires very precise syntax. </p>\n\n<p>Apart from <code>ssh</code>-ing, one other thing that an external tool may be good for here is to extract lines of interest with <code>grep</code>, in case that file is huge (otherwise you can read it into a scalar). </p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse List::Util qw(uniq);  # in List::MoreUtils prior to module v1.45\nuse String::ShellQuote qw(shell_quote);\n\nmy $remote_addr = ...\nmy $remote_path = ...\nmy $text = 'Internal Server Error';\n\nmy $remote_cmd = shell_quote('grep', '-a', $text, $remote_path);\nmy $cmd = shell_quote('ssh', $remote_addr, $remote_cmd);\n\nmy @lines = qx($cmd);\nchomp @lines;\n\n# Process @lines as needed, perhaps\nmy @result = sort { $b &lt;=&gt; $a } uniq map { (split)[3] } @lines;\nsay for @result;\n</code></pre>\n\n<p>Once it comes to running external commands, there are many options.  In the first place consider using a module. They all simplify things a lot, in particular with error checking, and are in general more reliable, while some also make harder jobs far more manageable.  </p>\n\n<p>An example with <a href=\"https://metacpan.org/pod/IPC::System::Simple\" rel=\"nofollow noreferrer\">IPC::System::Simple</a></p>\n\n<pre><code>use IPC::System::Simple qw(capturex); \n\nmy @lines = capturex('ssh', $remote_addr, $remote_cmd);\n</code></pre>\n\n<p>Since <code>ssh</code> executes the command when ran with one it doesn't need a shell (for that part) so <code>capturex</code> is used.  See documentation for more options and for how to check for errors.</p>\n\n<p>Some other options, from simple to more powerful, are <a href=\"https://metacpan.org/pod/Capture::Tiny\" rel=\"nofollow noreferrer\">Capture::Tiny</a>, <a href=\"https://metacpan.org/pod/IPC::Run3\" rel=\"nofollow noreferrer\">IPC::Run3</a>, <a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"nofollow noreferrer\">IPC::Run</a>.</p>\n\n<p>For more on all this see links assembled in <a href=\"https://stackoverflow.com/a/44185799/4653379\">this post</a> (and search for more).</p>\n\n<hr>\n\n<p>I can't see a need to run that pipeline as it stands<sup>&dagger;</sup> but if there is one (stay on the remote host?) then form commands as above and then assemble the full pipeline</p>\n\n<pre><code>my $cgrep = shell_quote('grep', '-a', $text, $remote_path);\nmy $cawk  = shell_quote('awk', '-F', ' ', '{print $4}');\nmy $csort = shell_quote('sort', '-nr');\nmy $cuniq = shell_quote('uniq', '-c');\n\nmy $remote_cmd = \"$cgrep | $cawk | $csort | $cuniq | $csort 2&gt;/dev/null\";\n</code></pre>\n\n<p>Note that the needed shell functionalities (<code>|</code> and redirection) shouldn't be quoted away.</p>\n\n<p>The mere space in the <code>awk</code> piece may be awkward-looking but since it gets escaped it winds up right for <code>-F</code>. For me it's another sign of trouble with running external programs in shell pipelines; I couldn't figure out that bare space, thanks to <a href=\"https://stackoverflow.com/users/14122/charles-duffy\">Charles Duffy</a> for the comment. </p>\n\n<p>In this case the <code>sort</code> and <code>uniq</code> parts of the pipeline can be just typed as one string since it's only program names and options, but as soon as changes are made or any variables make their way in that becomes tricky. So I use <code>shell_quote</code>, for consistency and as a template. </p>\n\n<hr>\n\n<p>Modules are reported missing and hard to obtain. Then escape what need be escaped (until you figure out how to get the modules, that is).  In this case there happen to be little to fix, but that bit can serve as an example of common hoops to go through with complicated pipelines. </p>\n\n<p>The string with <code>$text</code> needs to reach <code>grep</code> as such, one string. Since it passes through shell, which would break it by space into words, we need to protect (quote/escape) those spaces.  Not to forget, we also need to get it to the shell in the first place, through Perl's parsing rules. </p>\n\n<p>One way</p>\n\n<pre><code>my $text_quoted = q(') . quotemeta($text) . q(');\n</code></pre>\n\n<p>where <a href=\"https://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\">quotemeta</a> quotes all kinds of other things as well.  </p>\n\n<p>We also should protect the filename pattern, as it may rely on shell metacharacters (like <code>*</code>)</p>\n\n<pre><code>my $remote_path_quoted = quotemeta $remote_path;\n</code></pre>\n\n<p>but again, you have to inspect whether this is suitable in each case.</p>\n\n<p><strong>NOTE</strong> &hairsp; If any dynamically generated variables (computed, come from user...) are interpolated in these commands they <em>need be validated, with things carefully escaped and quoted</em>.</p>\n\n<p>Now your pipeline should work (it does in my simulated tests)</p>\n\n<pre><code>my $cmd = \"ssh $remote_host grep -a $text_quoted $remote_path_quoted\"\n    . q( | awk F ' ' '{print $4}' | sort -nr | uniq | sort -nr 2&gt;/dev/null);\n</code></pre>\n\n<p>This can be broken up into sensible components in their own variables, etc, but I really don't recommend such hand-patched solutions. </p>\n\n<p>I suggest to only use the first part (ssh + grep) and do the rest in Perl though, as in the main part of the answer. And then to have those modules installed and switch to them. </p>\n\n<p>No major computing tool works without (the many) libraries, and every production install contains a lot of \"additional\" stuff. As need for more libraries arises they are installed. Why would it have to be different with Perl? Yes, you <em>can</em> do it with builtins only but that may be much harder.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup>  &hairsp; One good reason would be so to use the system <code>sort</code> when files are huge, since it doesn't have to load the whole file at once, and for its speed. However, in this pipeline it is fed data over the pipe and invoked repeatedly so these advantages don't apply.</p>\n"}], "owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "accepted_answer_id": 53163525, "answer_count": 1, "score": 0, "last_activity_date": 1541621722, "creation_date": 1541450868, "question_id": 53161976, "link": "https://stackoverflow.com/questions/53161976/run-unix-command-from-a-perl-script", "title": "Run Unix command from a perl Script", "body": "<p>I am trying to do ssh on a server and then do a grep to get the count of different errors in the log file. Once i have those details logs those into a CSV file. But when i am trying to run the grep command i am getting error.</p>\n\n<pre><code>#!/usr/bin/perl\nmy $addr = \"user\\@servername\";\nmy $text = qq|Internal Server Error|;\nmy $remote_path = \"/data/logs/error\";\nmy $cmd = `ssh $remote_addr \"grep -a $text $remote_path | awk -F \" \" '{print $4}' | sort -nr | uniq -c | sort -nr 2&gt;/dev/null\"`;\nprint $cmd;\n</code></pre>\n\n<p>But i am getting below error when i am running the script </p>\n\n<pre><code>grep: Internal: No such file or directory\ngrep: Server: No such file or directory\ngrep: Error: No such file or directory\n</code></pre>\n\n<p>Is there any suggestion how we can do this in shell script.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 1, "creation_date": 1541450741, "post_id": 53161853, "comment_id": 93214295, "body": "Please format your question. That&#39;s hard to understand right now."}, {"owner": {"reputation": 58, "user_id": 10416462, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FW1wr9vgYJM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXhUBHrkTL9VXsDBiyMbQ1054cc5g/mo/photo.jpg?sz=128", "display_name": "Sxc-Dev", "link": "https://stackoverflow.com/users/10416462/sxc-dev"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1541451485, "post_id": 53161853, "comment_id": 93214566, "body": "@revo I updated the format of question."}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1541456992, "post_id": 53161853, "comment_id": 93216840, "body": "I would use the <a href=\"https://metacpan.org/pod/Algorithm::Diff\" rel=\"nofollow noreferrer\">Algorithm::Diff</a> module from CPAN."}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1541463807, "last_edit_date": 1541463807, "creation_date": 1541463096, "answer_id": 53164097, "question_id": 53161853, "link": "https://stackoverflow.com/questions/53161853/how-do-i-find-what-is-missing-from-second-string-based-on-first-string/53164097#53164097", "title": "How do I find what is missing from second string based on first string?", "body": "<p>First: always use strict and warnings, and don't use <code>$a</code> and <code>$b</code> outside of sort, they're <a href=\"https://metacpan.org/pod/Perl::Critic::Policy::Freenode::DollarAB\" rel=\"nofollow noreferrer\">special</a>.</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $x = \" fddf\\n dfdf\\n eeee\\n\";\nmy $y = \" fddf\\n dfdf\\n pppp\\n erww\\n\";\nmy @x_chars = split //, $x;\nmy @y_chars = split //, $y;\nmy @missing_chars;\nwhile (@x_chars and @y_chars) {\n  my $next = shift @x_chars;\n  if ($next eq $y_chars[0]) {\n    shift @y_chars;\n  } else {\n    push @missing_chars, $next;\n  }\n}\npush @missing_chars, @x_chars;\nmy $missing = join '', @missing_chars;\n</code></pre>\n\n<p>As mentioned CPAN modules like <a href=\"https://metacpan.org/pod/String::Diff\" rel=\"nofollow noreferrer\">String::Diff</a> (wrapper of Algorithm::Diff) will provide a simpler and more comprehensive solution if your requirements become more complex.</p>\n"}], "owner": {"reputation": 58, "user_id": 10416462, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FW1wr9vgYJM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXhUBHrkTL9VXsDBiyMbQ1054cc5g/mo/photo.jpg?sz=128", "display_name": "Sxc-Dev", "link": "https://stackoverflow.com/users/10416462/sxc-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1541463807, "creation_date": 1541450281, "last_edit_date": 1541450956, "question_id": 53161853, "link": "https://stackoverflow.com/questions/53161853/how-do-i-find-what-is-missing-from-second-string-based-on-first-string", "title": "How do I find what is missing from second string based on first string?", "body": "<p>$a = \"\nfddf\\n\ndfdf\\n\neeee\\n\"</p>\n\n<p>$b = \"\nfddf\\n\ndfdf\\n\npppp\\n\nerww\\n\"</p>\n\n<p>The output should be \"eeee\\n\" because it is missing in second string. I thought of using perl regular expression but it does not tell me the what is missing from the second string.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1541427331, "post_id": 53155701, "comment_id": 93202522, "body": "If you are new to Perl and you care about learning it properly, feel free to post your working code on <a href=\"https://codereview.stackexchange.com\">Code Review</a> in the Perl tag. We&#39;ll pick it up and give you constructive criticism. There are quite a few things you can improve."}, {"owner": {"reputation": 69, "user_id": 4735406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/551f76d34958bbb7d4ceb77068a752f6?s=128&d=identicon&r=PG&f=1", "display_name": "Grim Reaper", "link": "https://stackoverflow.com/users/4735406/grim-reaper"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1541427540, "post_id": 53155701, "comment_id": 93202665, "body": "@simbabque Thanks! I will definitely check that out in the future. I will be working with Perl quite a lot, so constructive feedback will be really appreciated!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1541428189, "post_id": 53155701, "comment_id": 93203055, "body": "May I suggest you start with a good book? If you are familiar with software development or programming in general, take a look at <i>Beginning Perl</i> by Curtis &quot;Ovid&quot; Poe. If not, look at <i>Learning Perl</i> in the O&#39;Reilly Perl book series (<i>The Llama book</i>), and make sure you get a edition. Perl has come a long way, and the code you&#39;ve shown here tells me you are using at least a somewhat out of date resource to learn."}, {"owner": {"reputation": 69, "user_id": 4735406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/551f76d34958bbb7d4ceb77068a752f6?s=128&d=identicon&r=PG&f=1", "display_name": "Grim Reaper", "link": "https://stackoverflow.com/users/4735406/grim-reaper"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1541428509, "post_id": 53155701, "comment_id": 93203261, "body": "@simbabque, thanks for the suggestion, I will look into that!"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 4735406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/551f76d34958bbb7d4ceb77068a752f6?s=128&d=identicon&r=PG&f=1", "display_name": "Grim Reaper", "link": "https://stackoverflow.com/users/4735406/grim-reaper"}, "edited": false, "score": 0, "creation_date": 1541426466, "post_id": 53155778, "comment_id": 93202053, "body": "Thanks for the quick reply! If I use the double quotes, the script dies trying to open the file."}, {"owner": {"reputation": 69, "user_id": 4735406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/551f76d34958bbb7d4ceb77068a752f6?s=128&d=identicon&r=PG&f=1", "display_name": "Grim Reaper", "link": "https://stackoverflow.com/users/4735406/grim-reaper"}, "edited": false, "score": 0, "creation_date": 1541426890, "post_id": 53155778, "comment_id": 93202317, "body": "The output is &quot;No such file or directory at ./test_perl.pl line 7.&quot;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1541426896, "post_id": 53155778, "comment_id": 93202324, "body": "This is called <i>interpolation</i>. And as you correctly say it makes no sense to use it here. That last bit should go to the top of the answer. ;)"}, {"owner": {"reputation": 69, "user_id": 4735406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/551f76d34958bbb7d4ceb77068a752f6?s=128&d=identicon&r=PG&f=1", "display_name": "Grim Reaper", "link": "https://stackoverflow.com/users/4735406/grim-reaper"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1541427181, "post_id": 53155778, "comment_id": 93202451, "body": "@simbabque I&#39;m sorry, I don&#39;t understand what you mean, could you please elaborate? I am completely new at Perl, so I apologise for the stupid questions."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 69, "user_id": 4735406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/551f76d34958bbb7d4ceb77068a752f6?s=128&d=identicon&r=PG&f=1", "display_name": "Grim Reaper", "link": "https://stackoverflow.com/users/4735406/grim-reaper"}, "edited": false, "score": 0, "creation_date": 1541427276, "post_id": 53155778, "comment_id": 93202497, "body": "@GrimReaper, my comment was directed at Ryan regarding their answer. It was not about your code. Just a suggestion on how to improve the answer so I would upvote it. As it stands it&#39;s not correct enough for my taste to vote on it."}, {"owner": {"reputation": 2105, "user_id": 508616, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/88627f76d15f3be74e272c747815112b?s=128&d=identicon&r=PG", "display_name": "Ryan Calhoun", "link": "https://stackoverflow.com/users/508616/ryan-calhoun"}, "edited": false, "score": 2, "creation_date": 1541427309, "post_id": 53155778, "comment_id": 93202509, "body": "Perl&#39;s <code>open</code> won&#39;t create directories. Does the directory <code>&#47;home&#47;python</code> exist? If not, you&#39;ll want to look into functions like <code>mkdir</code> or the <code>File::Path</code> module. Also, be aware you won&#39;t be able to create directories like that unless you run as root, which is a bad idea."}, {"owner": {"reputation": 69, "user_id": 4735406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/551f76d34958bbb7d4ceb77068a752f6?s=128&d=identicon&r=PG&f=1", "display_name": "Grim Reaper", "link": "https://stackoverflow.com/users/4735406/grim-reaper"}, "edited": false, "score": 0, "creation_date": 1541427472, "post_id": 53155778, "comment_id": 93202627, "body": "@RyanCalhoun That was the problem! Thank you so much! I feel like an idiot now, thanks for explaining what I did wrong!"}], "tags": [], "owner": {"reputation": 2105, "user_id": 508616, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/88627f76d15f3be74e272c747815112b?s=128&d=identicon&r=PG", "display_name": "Ryan Calhoun", "link": "https://stackoverflow.com/users/508616/ryan-calhoun"}, "is_accepted": true, "score": 4, "last_activity_date": 1541426008, "creation_date": 1541426008, "answer_id": 53155778, "question_id": 53155701, "link": "https://stackoverflow.com/questions/53155701/using-perl-to-write-to-a-file-in-another-directory-ubuntu-16-04/53155778#53155778", "title": "Using perl to write to a file in another directory (ubuntu 16.04)", "body": "<p>In perl, like in a lot of script languages, single ticks and double quotes have a different meaning even though they are both strings.</p>\n\n<p>The single ticks are meant to preserve the literal nature of the string constant, so dollar variables and control sequences like \\n are not evaluated.</p>\n\n<p>Try using <code>\"$filename\"</code> with double quotes.</p>\n\n<p>Also, in this case, since your string contains only the variable and nothing else, you can drop the quotes altogether and just pass <code>$filename</code>.</p>\n"}], "owner": {"reputation": 69, "user_id": 4735406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/551f76d34958bbb7d4ceb77068a752f6?s=128&d=identicon&r=PG&f=1", "display_name": "Grim Reaper", "link": "https://stackoverflow.com/users/4735406/grim-reaper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 53155778, "answer_count": 1, "score": 0, "last_activity_date": 1541428578, "creation_date": 1541425727, "last_edit_date": 1541428578, "question_id": 53155701, "link": "https://stackoverflow.com/questions/53155701/using-perl-to-write-to-a-file-in-another-directory-ubuntu-16-04", "title": "Using perl to write to a file in another directory (ubuntu 16.04)", "body": "<p>I am trying to write some output to a file.\nI want to create a new file in another directory than where the Perl script is located and write to it.\nI have tried the following:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict; \nuse 5.16.0; \n\nmy $filename = '/home/python/test.txt';\n\nopen (MYFILE, '&gt;','$filename') || die;\nprint(\"File $filename opened successfully!\\n\");\nprintf MYFILE \"test\";\nclose(MYFILE);\n</code></pre>\n\n<p>However, this just creates a new file, named literally '$filename' in the same directory as where the Perl script is saved. What am I doing wrong?</p>\n"}, {"tags": ["html", "regex", "perl", "sublimetext3", "jdownloader"], "comments": [{"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 1, "creation_date": 1541425417, "post_id": 53155587, "comment_id": 93201474, "body": "Have you seen <a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags\" title=\"regex match open tags except xhtml self contained tags\">stackoverflow.com/questions/1732348/&hellip;</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10608035, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BqQoioRnckI/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC6YmnbCbJ_SXCOKx-Ckp76vyr56A/mo/photo.jpg?sz=128", "display_name": "Giorgio Armani", "link": "https://stackoverflow.com/users/10608035/giorgio-armani"}, "edited": false, "score": 0, "creation_date": 1541426833, "post_id": 53155709, "comment_id": 93202284, "body": "Pardon me if I am wrong. From what I think I understand is &quot;.&quot; sets it to be any character and is not set to just specific ones unless I specify those? Then &quot;*&quot; means any character no matter how long or far the string is it&#39;ll close it in to that last thing?   Thank you it works on a small file but in a bigger one its grabbing other links or keywords aswell.   Example:  <code>&lt;div class=&quot;post-body&quot;&gt;&lt;rest of the angles will be up soon. And I want to make another 60fps angle but not sure which angle yet.&lt;&#47;p&gt;&lt;br &#47;&gt;&lt;p&gt;link: https:&#47;&#47;drive.google.com&#47;file&#47;d&#47;oSmNg0pMUhTZl9zRGd2VUE&#47;view?&zwnj;&#8203;usp=sharing</code>"}, {"owner": {"reputation": 3, "user_id": 10608035, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BqQoioRnckI/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC6YmnbCbJ_SXCOKx-Ckp76vyr56A/mo/photo.jpg?sz=128", "display_name": "Giorgio Armani", "link": "https://stackoverflow.com/users/10608035/giorgio-armani"}, "edited": false, "score": 0, "creation_date": 1541427180, "post_id": 53155709, "comment_id": 93202449, "body": "Never mind, I see what you guys mean now by the characters. I was able to tighten the search by adding more or specific keywords in the beginning vice vera. Thank you!"}, {"owner": {"reputation": 26, "user_id": 8937466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77125ce655527de211df7e147c5739cb?s=128&d=identicon&r=PG", "display_name": "marcos", "link": "https://stackoverflow.com/users/8937466/marcos"}, "reply_to_user": {"reputation": 3, "user_id": 10608035, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BqQoioRnckI/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC6YmnbCbJ_SXCOKx-Ckp76vyr56A/mo/photo.jpg?sz=128", "display_name": "Giorgio Armani", "link": "https://stackoverflow.com/users/10608035/giorgio-armani"}, "edited": false, "score": 0, "creation_date": 1541427198, "post_id": 53155709, "comment_id": 93202463, "body": "&quot;https.*drive.google.com.*sharing&quot;  this should work. &quot;.&quot; is like a placeholder. It can be any character, but in your case you do not know how many spaces are in between. That is why you need to append &quot;*&quot;. It means take the character before can appear between 0 and Infinite times."}, {"owner": {"reputation": 3, "user_id": 10608035, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BqQoioRnckI/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC6YmnbCbJ_SXCOKx-Ckp76vyr56A/mo/photo.jpg?sz=128", "display_name": "Giorgio Armani", "link": "https://stackoverflow.com/users/10608035/giorgio-armani"}, "edited": false, "score": 0, "creation_date": 1541427508, "post_id": 53155709, "comment_id": 93202649, "body": "What if this happens? Where both get selected and then it captures &lt;p&gt; &amp; &lt;divs&gt; also?    Example:   <code>&lt;p&gt;https:&#47;&#47;drive.google.com&#47;file&#47;d&#47;0B3GNg0pNzNCWWdFSXNzd00&#47;v&zwnj;&#8203;iew?usp=sharing&lt;&#47;p&gt;&lt;&zwnj;&#8203;br &#47;&gt;&lt;p&gt;https:&#47;&#47;drive.google.com&#47;file&#47;oSmNg0pNzRjWEFyNDRzam8&#47;vi&zwnj;&#8203;ew?usp=sharing&lt;br &#47;&gt;&lt;&#47;p&gt;&lt;&#47;div&gt;</code>  Do I then add different ones to strict it? Basically what I am asking is how would i go about stopping the search at certain spots? If the conditions can at start https and end with sharing and nothing after that."}], "tags": [], "owner": {"reputation": 26, "user_id": 8937466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77125ce655527de211df7e147c5739cb?s=128&d=identicon&r=PG", "display_name": "marcos", "link": "https://stackoverflow.com/users/8937466/marcos"}, "is_accepted": true, "score": 0, "last_activity_date": 1541425956, "last_edit_date": 1541425956, "creation_date": 1541425758, "answer_id": 53155709, "question_id": 53155587, "link": "https://stackoverflow.com/questions/53155587/how-to-use-regex-to-filter-links-from-a-html-document/53155709#53155709", "title": "How to use RegEx to filter links from a html document?", "body": "<p>Following should work:</p>\n\n<pre><code>.*drive.google.com.*sharing\n</code></pre>\n\n<ul>\n<li><p><code>.</code> means any character</p></li>\n<li><p><code>*</code> The character before can appear multiple times</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "is_accepted": false, "score": 0, "last_activity_date": 1541445785, "creation_date": 1541445785, "answer_id": 53160846, "question_id": 53155587, "link": "https://stackoverflow.com/questions/53155587/how-to-use-regex-to-filter-links-from-a-html-document/53160846#53160846", "title": "How to use RegEx to filter links from a html document?", "body": "<p>It sounds like you are trying to do this in some editor in Mac, but the question is tagged with \"perl\", so here is one way you can do this in Perl.  </p>\n\n<p>First, it helps to have a full example input and output to make sure we understand the desired behavior, so here is an example input test.doc:</p>\n\n<pre><code>&lt;p&gt;https://drive.google.com/file/d/0B3GNg0pNzNCWWdFSXNzd00/view?usp=sharing&lt;/p&gt;&lt;br /&gt;&lt;p&gt;https://drive.google.com/sharing/oSmNg0pNzRjWEFyNDRzam8/view?usp=sharing&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;\n&lt;p&gt;http://drive.google.com/file/d/0B3GNg0pNzNCWWdFSXNzd00/view?usp=sharing&lt;/p&gt;&lt;br/&gt;&lt;p&gt;https://drive.google.com/file/sharing/view?usp=sharing&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;\nhttps://drive.abc.com/file/d/efg/view?usp=sharing\nhttps://drive.apple.com/file/d/abc/efg/view?usp=sharing\nhttps://drive.google.com/file/d/xyz/skipme?usp=sharing https://drive.google.com/file/d/ef/view?usp=sharing \n</code></pre>\n\n<p>I'll assume links are enclosed in whitespace or *ml tags &lt;> here.  Here is a Linux one-liner that will take the input test.doc and spit out matching html links.  The <code>[^\\s&lt;&gt;]+</code> part will capture one or more characters that aren't whitespace <code>\\s</code> or <code>&lt;&gt;</code> (i.e. negated character class due to <code>[^</code>), to prevent it from running ahead and matching more than one link on the same line:</p>\n\n<pre><code>perl -ne '@m = $_ =~ m{(https?://drive\\.google\\.com/[^\\s&lt;&gt;]+view\\?usp=sharing)}g; print \"$_\\n\" for @m;' test.doc\n</code></pre>\n\n<p>This would give the following output:</p>\n\n<pre><code>https://drive.google.com/file/d/0B3GNg0pNzNCWWdFSXNzd00/view?usp=sharing\nhttps://drive.google.com/sharing/oSmNg0pNzRjWEFyNDRzam8/view?usp=sharing\nhttp://drive.google.com/file/d/0B3GNg0pNzNCWWdFSXNzd00/view?usp=sharing\nhttps://drive.google.com/file/sharing/view?usp=sharing\nhttps://drive.google.com/file/d/ef/view?usp=sharing\n</code></pre>\n\n<p>If the above doesn't exactly cover what you need, then please give a different input/output text fragment and someone can chime in on how you'd change the one-liner to match it.</p>\n"}], "owner": {"reputation": 3, "user_id": 10608035, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BqQoioRnckI/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC6YmnbCbJ_SXCOKx-Ckp76vyr56A/mo/photo.jpg?sz=128", "display_name": "Giorgio Armani", "link": "https://stackoverflow.com/users/10608035/giorgio-armani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 53155709, "answer_count": 2, "score": 0, "last_activity_date": 1541445785, "creation_date": 1541425355, "question_id": 53155587, "link": "https://stackoverflow.com/questions/53155587/how-to-use-regex-to-filter-links-from-a-html-document", "title": "How to use RegEx to filter links from a html document?", "body": "<p>How do I grab specific links in a document using regex?\nI have a html file that contains google drive links mixed in with a bunch of html code and other stuff. I am trying to grab the 50 links from the text by finding them all using RegEx to search for keywords they have in common which is <code>drive, google, &amp; sharing</code> </p>\n\n<p>Example:<code>\"https://drive.google.com/file/d/1wXbzf0nvddZ0vlz6-fdN7HV/view?usp=sharing\"</code></p>\n\n<p>I want to select the beginning and the end of the links and then be able to copy them all, paste them into another file or erase the other content and just keep those links inside the html document.</p>\n\n<p>I have tried </p>\n\n<pre><code>http\\:\\/\\/www\\.[a-zA-Z0-9\\.\\/\\-]+ &amp; `.*?(http\\:\\/\\/www\\.[a-zA-Z0-9\\.\\/\\-]+)`\n</code></pre>\n\n<p>I tried drive which resulted in finding nothing but http &amp; www comes up with results to other links in the file that i am not trying to hit but atleast shows some results instead of me going for specific keywords that i listed. </p>\n\n<p>Im not sure if this is the proper way to go about this and if I should be using another method such as javascript to achieve this etc etc.</p>\n\n<p>I am using Sublime Text on Mac to try and figure this out. I am new to regular expressions.</p>\n"}, {"tags": ["html", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1541412436, "post_id": 53152062, "comment_id": 93194643, "body": "Short answer: Don&#39;t. Use a template system."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1541414006, "post_id": 53152062, "comment_id": 93195580, "body": "It looks like you are making two tables. You are talking about <i>blocks</i> in your code, but there are no blocks. (Hint: a <i>block</i> is something enclosed in <code>{</code> and <code>}</code>, like a <code>sub</code> or a loop). Can you please <a href=\"https://stackoverflow.com/posts/53152062/edit\">edit</a> your question and show us the HTML of that header and the first row of data?"}, {"owner": {"reputation": 21, "user_id": 10606339, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0Aq1zovmsqE/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC60tjQA2z0TMFT78DKuySAJq1krA/mo/photo.jpg?sz=128", "display_name": "Satish Sajjanar", "link": "https://stackoverflow.com/users/10606339/satish-sajjanar"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1541414987, "post_id": 53152062, "comment_id": 93196122, "body": "Hi simbabque,I have edited the question. Yes i tried creating two tables here, one for just to print the headlines another to add the rows."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1541416322, "post_id": 53152062, "comment_id": 93196836, "body": "Are you using this in your local browser, or also for other people to watch? There are very easy to use, modern ways of building a stand alone web application that does not require a traditional web server. If you have different results all the time, and not just a single set of data, and want to use this locally, that might be a good idea. If you&#39;re interested, I can write you up an example as an answer. I&#39;m also going to write up an answer that explains what&#39;s going on here and why your stuff doesn&#39;t work. However, your edit did not actually answer my clarification question."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1541436493, "post_id": 53152062, "comment_id": 93207918, "body": "Why is using a tempate system better than using pure Perl? I don&#39;t like template systems because they mix languages so syntax checking is less than perfect."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10606339, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0Aq1zovmsqE/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC60tjQA2z0TMFT78DKuySAJq1krA/mo/photo.jpg?sz=128", "display_name": "Satish Sajjanar", "link": "https://stackoverflow.com/users/10606339/satish-sajjanar"}, "edited": false, "score": 0, "creation_date": 1541415524, "post_id": 53152893, "comment_id": 93196407, "body": "Thanks, I will try using template."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1541419592, "post_id": 53152893, "comment_id": 93198491, "body": "Hey, I see you are in the UK. Have you considered coming to the <a href=\"https://act.yapc.eu/lpw2018/\" rel=\"nofollow noreferrer\">London Perl Workshop</a> on the 24th of November? It&#39;s free, and going to be a lot of fun. We can have a pint and discuss the deadness of Perl. :)"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1541420670, "post_id": 53152893, "comment_id": 93199013, "body": "@simbabque I was not aware it was happening (London.pm list is surprisingly quiet about it given it&#39;s being held in London), but already have plans so can&#39;t make it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1541421033, "post_id": 53152893, "comment_id": 93199198, "body": "Shame. Thanks for letting me know about the list though. I&#39;m on the organising committee and we should have posted to the London.pm list a couple of times. I shall investigate this."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 1, "last_activity_date": 1541414989, "creation_date": 1541414989, "answer_id": 53152893, "question_id": 53152062, "link": "https://stackoverflow.com/questions/53152062/how-to-create-a-html-table-using-perl/53152893#53152893", "title": "How to create a html table using perl", "body": "<p>As mentioned in the comments, the best way to create HTML using Perl is to use a template system. There are many possible options, but I'm demonstrating the principle using Template Toolkit</p>\n\n<p>Here is the Perl code. It just creates the data and leaves the creating of the HTML to the template system.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse Template;\n\nmy $template=Template-&gt;new({PRE_CHOMP =&gt; 1});\n\nmy @rows;\n\npush @rows,[\"a\",\"b\",\"c\",\"d\",\"e\"];\npush @rows,[\"a\",\"b\",\"c\",\"d\",\"e\"];\npush @rows,[\"a\",\"b\",\"C\",\"d\",\"e\"];\npush @rows,[\"a\",\"b\",\"c\",\"d\",\"e\"];\n\n$template-&gt;process(\"table.tmpl\",{rows =&gt; \\@rows}) || die $template-&gt;error(); \n</code></pre>\n\n<p>The template (table.tmpl) is as follows.</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;My Table&lt;/title&gt;\n&lt;style&gt;\ntable { border-collapse: collapse; border: solid 1px black; }\nth { border: solid 1px black; background: #A6DBF7; text-align: center; color: black; }\ntd { border: solid 1px black; background: #DAF7A6; text-align: center; color: black; }\n&lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;table&gt;\n&lt;tr&gt;&lt;th&gt;Heading&lt;/th&gt;&lt;th&gt;Another&lt;/th&gt;&lt;th&gt;More&lt;/th&gt;&lt;th&gt;Heading!&lt;/th&gt;&lt;th&gt;Blah&lt;/th&gt;&lt;/tr&gt;\n[% FOREACH row IN rows %]\n&lt;tr&gt;\n&lt;td&gt;[% row.0 %]&lt;/td&gt;\n&lt;td&gt;[% row.1 %]&lt;/td&gt;\n&lt;td style=\"background: [% IF row.2=='c'%]green[% ELSE %]red[%END %];\"&gt;[% row.2 %]&lt;/td&gt;\n&lt;td&gt;[% row.3 %]&lt;/td&gt;\n&lt;td&gt;[% row.4 %]&lt;/td&gt;\n&lt;/tr&gt;\n[% END %]\n&lt;/table&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>As you can see, you can put some logic of how the output looks in the template - the background of the 3rd column is dependant on the value of the 3rd element in the row.</p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1541417727, "creation_date": 1541417727, "answer_id": 53153617, "question_id": 53152062, "link": "https://stackoverflow.com/questions/53152062/how-to-create-a-html-table-using-perl/53153617#53153617", "title": "How to create a html table using perl", "body": "<p>I disapprove of HTML::Table, as it has not seen any updates for more than 10 years and uses very outdated concepts. Please see below for more on that.</p>\n\n<hr>\n\n<p>Your problem is that you make a new HTML::Table <em>object</em> every time you call your subroutine for a row of data, and you also use a different one for your table head. Essentially your code looks like this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse HTML::Table;\nmy $table_header = HTML::Table-&gt;new(\n    -cols =&gt; 2,\n    -head =&gt; [qw/ foo bar/],\n);\nprint $table_header;\n\nfor ( 1, 2 ) {\n    my $table_data = HTML::Table-&gt;new( -cols =&gt; 2, );\n    $table_data-&gt;addRow( 1, 2 );\n    print $table_data;\n}\n</code></pre>\n\n<p>This code produces the following output.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;table&gt;\r\n&lt;tbody&gt;\r\n&lt;tr&gt;&lt;th&gt;foo&lt;/th&gt;&lt;th&gt;bar&lt;/th&gt;&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n\r\n&lt;table&gt;\r\n&lt;tbody&gt;\r\n&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;\r\n\r\n&lt;table&gt;\r\n&lt;tbody&gt;\r\n&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>As you can see, this has the same problem with the headers not being aligned. It happens because those are separate tables, and your browser renders each table on its own. If not otherwise told, it tries to find the best column size for each table. And that will make them not be aligned with each other. It's even possible that some of the rows of data end up not being aligned properly in relation to the ones above and below.</p>\n\n<p>Instead, you need to make just one HTML::Table object and keep using it for the header as well as <strong>every</strong> row of data.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse HTML::Table;\nmy $table = HTML::Table-&gt;new(\n    -cols =&gt; 2,\n    -head =&gt; [qw/ foo bar/],\n);\n\nfor ( 1, 2 ) {\n    $table-&gt;addRow( 1, 2 );\n}\n\nprint $table;\n</code></pre>\n\n<p>Now the output will look like this</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;table&gt;\r\n&lt;tbody&gt;\r\n&lt;tr&gt;&lt;th&gt;foo&lt;/th&gt;&lt;th&gt;bar&lt;/th&gt;&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>In your code, there is no need for the subroutine call to <code>sub_call</code> you can have that code directly in your loop. Get rid of the new HTML::Table object in there, and reuse the one from the heading. Keep in mind that lexical variables (declared with <code>my</code>) will only be valid in their current <em>scope</em>. That means if you declare a variable between <code>{</code> and <code>}</code> it is not visible outside that block.</p>\n\n<p>To get your background colors different, take a look <a href=\"https://metacpan.org/pod/HTML::Table#Sections\" rel=\"nofollow noreferrer\">at the documentation regarding sections</a>. Here's a quick mockup of how that <em>could</em> look like.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse HTML::Table;\nmy $table = HTML::Table-&gt;new(\n    -cols =&gt; 2,\n);\n$table-&gt;addSectionRow( 'thead', 0, qw/foo bar/ );\n$table-&gt;setSectionStyle('thead', 0, 'background-color: red');\n$table-&gt;setSectionRCellsHead('thead', 0, 1);\n\n$table-&gt;setSectionStyle('tbody', 0, 'background-color: green');\nfor ( 1, 2 ) {\n    $table-&gt;addSectionRow( 'tbody', 0, 1, 2 );\n}\n\nprint $table;\n</code></pre>\n\n<p>That code will produce output like this</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;table&gt;\r\n&lt;thead style=\"background-color: red\"&gt;\r\n&lt;tr&gt;&lt;th&gt;foo&lt;/th&gt;&lt;th&gt;bar&lt;/th&gt;&lt;/tr&gt;\r\n&lt;/thead&gt;\r\n&lt;tbody style=\"background-color: green\"&gt;\r\n&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;\r\n&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;\r\n&lt;/tbody&gt;\r\n&lt;/table&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>As you can see, this is <em>really complicated</em> for what it produces. As I said before in my comment, you are probably better off writing your own HTML. It's even better to use a templating system. Please <a href=\"https://stackoverflow.com/a/53152893/1331451\">the answer by Chris Turner</a> for that.</p>\n"}], "owner": {"reputation": 21, "user_id": 10606339, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0Aq1zovmsqE/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC60tjQA2z0TMFT78DKuySAJq1krA/mo/photo.jpg?sz=128", "display_name": "Satish Sajjanar", "link": "https://stackoverflow.com/users/10606339/satish-sajjanar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1908, "favorite_count": 0, "accepted_answer_id": 53153617, "answer_count": 2, "score": 0, "last_activity_date": 1541586099, "creation_date": 1541412052, "last_edit_date": 1541414826, "question_id": 53152062, "link": "https://stackoverflow.com/questions/53152062/how-to-create-a-html-table-using-perl", "title": "How to create a html table using perl", "body": "<p>I'm new to perl and don't have much idea in using modules.\nI'm trying to create a ouput.html file through perl. Basically perl gives me some rows of data for several experiment in my work. I'm using these results and making a table using HTML::table. To make it a kind of dashboard. Below is my code. Since i dont have access to server to create a webpage. I'm trying to create a html file which can be opened with a web browser. </p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature \"say\";\nuse HTML::Table;\nmy $table1= new HTML::Table(-cols       =&gt;  9,\n                            -align      =&gt;  'centre',\n                            -rules      =&gt;  'rows',\n                            -border     =&gt;  \"1\",\n                            -bgcolor    =&gt;  '#A6DBF7',\n                            -width      =&gt;  '80%',\n                            -spacing    =&gt;  1,\n                            -padding    =&gt;  5,\n                            -style      =&gt;  'color:black',\n                            -class      =&gt;  'myclass',\n                            -head       =&gt;  ['Block Name','Owner','Handoff','Covg-SA','SA-Patterns','Covg-TFT','TFT-Patterns','Fullscan-SA','Fullscan-TFT']);\nopen my $HTML,'&gt;' ,'output.html' or die $!;\nprint $HTML \"$table1\\n\";\n\nfor my $i (0..50) {\nsub_call()\n}\n\nsub sub_call{\n...bla..bla\n..bla...bla...\n.bla....\nmy @row=('$block','$uid','$step',,'$compress_SA_cvg','$temp','$compress_TFT_cvg','$logic_patt','$fullscan_SA_cvg','$fullscan_TFT_cvg');.\n\nmy $table1= new HTML::Table(-cols       =&gt;  9,\n                            -align      =&gt;  'centre',\n                            -rules      =&gt;  'rows',\n                            -border     =&gt;  \"1\",\n                            -bgcolor    =&gt;  '#DAF7A6',\n                            -width      =&gt;  '80%',\n                            -spacing    =&gt;  1,\n                            -padding    =&gt;  5,\n                            -style      =&gt;  'color:black',\n                            -class      =&gt;  'myclass',\n                        );\n$table1-&gt;addRow(@row);\nopen my $HTML,'&gt;&gt;' ,'output.html' or die $!;\nprint $HTML \"$table1\\n\";\n}\n</code></pre>\n\n<p>In the above code. I will be having a row of data in the array <strong>@row</strong> each time that 2nd block executes. which will be appended to the output.html . I have few requirements as below.</p>\n\n<ul>\n<li>each cell should have border</li>\n<li>for 3rd and 5th column, cell background should be depends on the their values.</li>\n<li>all the table should be neatly aligned center (values belonging to headlines should be below that headline).</li>\n</ul>\n\n<p>I have attached screenshot of the output that i have got. For security reasons i left variables values as it is. But when i get variable's values this table will be not aligned properly. </p>\n\n<p><a href=\"https://i.stack.imgur.com/qpFtq.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qpFtq.jpg\" alt=\"screenshot of output\"></a></p>\n\n<p>Please suggest me what to use to meet above requirements.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 3, "creation_date": 1541406171, "post_id": 53150606, "comment_id": 93191559, "body": "<a href=\"https://stackoverflow.com/a/6163129/226648\">Everything you wanted to know about Unicode handling in Perl but were afraid to ask</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1073, "user_id": 1039320, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/28ba137ea03056ffb3a2e6db49ac29cd?s=128&d=identicon&r=PG", "display_name": "jreisinger", "link": "https://stackoverflow.com/users/1039320/jreisinger"}, "edited": false, "score": 0, "creation_date": 1541418398, "post_id": 53150877, "comment_id": 93197858, "body": "Can you share where the documentation says that Perl by default assumes latin1?"}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "reply_to_user": {"reputation": 1073, "user_id": 1039320, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/28ba137ea03056ffb3a2e6db49ac29cd?s=128&d=identicon&r=PG", "display_name": "jreisinger", "link": "https://stackoverflow.com/users/1039320/jreisinger"}, "edited": false, "score": 0, "creation_date": 1541419425, "post_id": 53150877, "comment_id": 93198401, "body": "@jreisinger There is a comment in the documentation for the <code>encoding</code> pragma in the section <code>Implicit upgrading for byte strings</code>. There may be better documentation elsewhere."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1073, "user_id": 1039320, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/28ba137ea03056ffb3a2e6db49ac29cd?s=128&d=identicon&r=PG", "display_name": "jreisinger", "link": "https://stackoverflow.com/users/1039320/jreisinger"}, "edited": false, "score": 1, "creation_date": 1541419565, "post_id": 53150877, "comment_id": 93198478, "body": "@jreisinger, It does not not assume latin-1. It assumes US-ASCII, leaving non-ASCII bytes unchanged. Since you provided the bytes <code>F0.9F.90.AA</code>, Perl created a string equivalent to the one created by <code>&quot;\\xF0\\x9F\\x90\\xAA&quot;</code>. With <code>use utf8;</code> (which is what <code>-Mutf8</code> adds), Perl code the source with <code>utf8</code>, so Perl creates the string equivalent to the one created by <code>&quot;\\x{1F42A}&quot;</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541420152, "post_id": 53150877, "comment_id": 93198778, "body": "Demonstration that it&#39;s not latin1: <code>perl -MEncode -e&#39;print encode(&quot;UTF-8&quot;, &quot;sub f\\xC9 { }&quot;)&#39; | perl -Mutf8</code> works, but <code>perl -MEncode -e&#39;print encode(&quot;latin1&quot;, &quot;sub f\\xC9 { }&quot;)&#39; | perl</code> does not."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541420158, "post_id": 53150877, "comment_id": 93198783, "body": "@JGNI, Those words don&#39;t appear in the <a href=\"https://metacpan.org/pod/encoding\" rel=\"nofollow noreferrer\">documentation for the <code>encoding</code> pragma</a>, or at least not in the 14 versions of it found on CPAN."}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541420693, "post_id": 53150877, "comment_id": 93199025, "body": "@ikegami Now agree with you about ASCII over Latin-1 as <code>perl -E &#39;say uc &quot;&#233;&quot;&#39;</code> gives <code>&#233;</code>. What follows is from the encode pragma documentation for v5.20.2 <code>Implicit upgrading for byte strings By default, if strings operating under byte semantics and strings with Unicode character data are concatenated, the new string will be created by decoding the byte strings as ISO 8859-1 (Latin-1).</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541422241, "post_id": 53150877, "comment_id": 93199771, "body": "That&#39;s a lie. No decoding is performed. The two strings are simply concatenated as-is with no semantics presumed. The encoding pragma was deprecated (and discouraged far far longer than that) because it had some pretty wild idea about how things work or should work."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541422816, "post_id": 53150877, "comment_id": 93200072, "body": "Re &quot;<i>Now agree with you about ASCII over Latin-1 as <code>perl -E &#39;say uc &quot;&#233;&quot;&#39;</code> gives <code>&#233;</code></i>&quot;, That code doesn&#39;t demonstrate that at all . Even if Perl were to decode the source using latin-1, you&#39;d still get the same string, and you&#39;d still get the same output."}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 11, "last_activity_date": 1541420496, "last_edit_date": 1541420496, "creation_date": 1541407131, "answer_id": 53150877, "question_id": 53150606, "link": "https://stackoverflow.com/questions/53150606/how-does-perls-length-function-counts-unicode-characters/53150877#53150877", "title": "How does Perl&#39;s length() function counts unicode characters?", "body": "<p>Unless you tell Perl that the source code of the script is in utf8 Perl assumes ASCII. This means that by default the Perl interpreter sees <code>\ud83d\udc2a</code> as 4 separate characters. If you change your one liner to <code>perl -Mutf8 -lwe 'print length(\"\ud83d\udc2a\")'</code> You see length providing your expected output.</p>\n\n<p>The <a href=\"http://perldoc.perl.org/utf8.html\" rel=\"nofollow noreferrer\">utf8</a> pragma tells Perl that the source unit is in utf8 and not ASCII. See <code>perldoc utf8</code> for more info.</p>\n"}], "owner": {"reputation": 1073, "user_id": 1039320, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/28ba137ea03056ffb3a2e6db49ac29cd?s=128&d=identicon&r=PG", "display_name": "jreisinger", "link": "https://stackoverflow.com/users/1039320/jreisinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 53150877, "answer_count": 1, "score": 4, "last_activity_date": 1541420496, "creation_date": 1541405844, "question_id": 53150606, "link": "https://stackoverflow.com/questions/53150606/how-does-perls-length-function-counts-unicode-characters", "title": "How does Perl&#39;s length() function counts unicode characters?", "body": "<p>Why <a href=\"http://perldoc.perl.org/functions/length.html\" rel=\"nofollow noreferrer\">length()</a> says this is 4 logical characters (I would expect it to say 1):</p>\n\n<pre><code>$ perl -lwe 'print length(\"\ud83d\udc2a\")'\n4\n</code></pre>\n\n<p>I guess something is wrong with my expectation. :-) What is it?</p>\n"}, {"tags": ["perl", "utf-8"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 6761461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2337999bbcdbc7b6f9c3cbf248028acf?s=128&d=identicon&r=PG&f=1", "display_name": "BBB", "link": "https://stackoverflow.com/users/6761461/bbb"}, "edited": false, "score": 0, "creation_date": 1541460823, "post_id": 53153927, "comment_id": 93218075, "body": "Thank you - I had a look through this, and it helped me understand this better!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1541434690, "last_edit_date": 1541434690, "creation_date": 1541418908, "answer_id": 53153927, "question_id": 53149976, "link": "https://stackoverflow.com/questions/53149976/perl-fixing-mixed-utf8-and-latin-encoding-use-open-io-vs-binmode/53153927#53153927", "title": "perl - fixing mixed utf8 and latin encoding: use open IO vs. binmode", "body": "<p>First, you must realize that a <code>$str2</code> can be viewed as a string encoded using iso-8859-1, and it's also a string of Unicode Code Points. That's because a string encoded using iso-8859-1 is no different than a string of Unicode Code Points. For example, <code>decode('iso-8859-1', $str)</code> produces <code>$str</code>. This means that providing a string encoded using iso-8859-1 to something expecting a string of Unicode Code Points will work, and providing a string of Unicode Code Points to something expecting a string encoded using iso-8859-1 will work (if all the Code Points are in the iso-8859-1 character set).</p>\n\n<hr>\n\n<blockquote>\n  <p><em>Question 1A: What does the <code>use open IO =&gt; ':encoding(UTF-8)';</code> not do anything?</em></p>\n</blockquote>\n\n<p>That sets the default layers for <code>open</code>. For example, it makes</p>\n\n<pre><code>open(my $fh, '&gt;', $qfn)\n</code></pre>\n\n<p>equivalent to</p>\n\n<pre><code>open(my $fh, '&gt;:encoding(UTF-8)', $qfn)\n</code></pre>\n\n<p>Since you don't use <code>open</code> without default layers &mdash;you don't use <code>open</code> at all&mdash; it has no effect.</p>\n\n<hr>\n\n<blockquote>\n  <p><em>Question 1B: Why do the characters in 2 not display correctly?</em></p>\n</blockquote>\n\n<p>Your terminal expects UTF-8.</p>\n\n<p>The string encoded using UTF-8 (<code>$str1</code>) consists of what the terminal expects, so it is therefore displayed correctly.</p>\n\n<p>The string encoded using iso-8859-1 (<code>$str2</code>) doesn't consist of what the terminal expects, so it is therefore displayed incorrectly.</p>\n\n<hr>\n\n<blockquote>\n  <p><em>Question 2: Why does this make the latin-1 string display correctly, but break the UTF8 string?</em></p>\n</blockquote>\n\n<p>You added a <code>:encoding(UTF-8)</code> layer to STDOUT, so strings printed to STDOUT are now expected to consist of Unicode Code Points, and they will encoded using UTF-8.</p>\n\n<p>The string encoded using UTF-8 (<code>$str1</code>) doesn't consist of what <code>print</code> expects, so it is therefore mangled. (It ends up \"double-encoded\", to be specific.)</p>\n\n<p>The string of Unicode Code Points (<code>$str2</code>) consists of what <code>print</code> expects, so it is therefore encoded correctly.</p>\n\n<hr>\n\n<blockquote>\n  <p><em>Question 3: I guess fix_latin indicates that the string is utf8, and so the string prints correctly.</em></p>\n</blockquote>\n\n<p>The internal representation (as indicated by <code>is_utf8</code>) is irrelevant here (as it should be).</p>\n\n<p><code>fix_latin(\"1 = educa\\x{c3}\\x{a7}\\x{c3}\\x{a3}o\")</code> produced <code>\"1 = educa\\x{e7}\\x{e3}o\"</code>.</p>\n\n<p><code>fix_latin(\"2 = educa\\x{e7}\\x{e3}o\")</code> produced <code>\"2 = educa\\x{e7}\\x{e3}o\"</code>.</p>\n"}], "owner": {"reputation": 59, "user_id": 6761461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2337999bbcdbc7b6f9c3cbf248028acf?s=128&d=identicon&r=PG&f=1", "display_name": "BBB", "link": "https://stackoverflow.com/users/6761461/bbb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1541434690, "creation_date": 1541402702, "last_edit_date": 1541404520, "question_id": 53149976, "link": "https://stackoverflow.com/questions/53149976/perl-fixing-mixed-utf8-and-latin-encoding-use-open-io-vs-binmode", "title": "perl - fixing mixed utf8 and latin encoding: use open IO vs. binmode", "body": "<p>I have a perl storage file, which (when dumper with Dumper) has these strings in it:</p>\n\n<pre><code>my $str1 = \"1 = educa\\x{c3}\\x{a7}\\x{c3}\\x{a3}o\";\nmy $str2 =  \"2 = educa\\x{e7}\\x{e3}o\";\n</code></pre>\n\n<p>I've been trying to work out a reasonable strategy, to output UTF8 (see also <a href=\"https://stackoverflow.com/questions/53146664/perl-encodeguess-with-and-without-hints-detecting-utf8\">perl Encode::Guess with and without hints - detecting utf8</a>).</p>\n\n<p>Let me continue with the perl code above and get some declarations out the way:</p>\n\n<pre><code>use 5.18.2;\nuse Encode qw( encode_utf8 decode_utf8 from_to encode decode);\nuse Encode::Guess;\nuse Encoding::FixLatin qw(fix_latin);\n\nsub sayStrings() {\n    say fixEnc($_[0]);\n    say fixEnc($_[1],'hint');\n    say \"\";\n};\n\nsub fixEnc() {\n    my $data = $_[0];\n    my $enc = \"\";\n    if ($_[1]) {\n        $enc = guess_encoding($data, qw/utf8 latin-1/);\n    } else {\n        $enc = guess_encoding($data);\n    };\n    if (!ref($enc)) {\n        return \"ERROR: Can't guess: $enc for $data\";\n    } else {\n        my $flag1a = utf8::is_utf8($data);\n        my $flag2a = utf8::valid($data);\n        $data .= \"; encoding: \".$enc-&gt;name.\", is_utf8=$flag1a, valid=$flag2a\";\n        return $data;\n    };\n};\n</code></pre>\n\n<p>Now for the questions! I am going to complement that code with various snippets.</p>\n\n<pre><code>say \"Question 1\";\n&amp;sayStrings($str1, $str2);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>use open IO =&gt; ':encoding(UTF-8)';\nsay \"raw\";\n&amp;sayStrings($str1, $str2);\n</code></pre>\n\n<p>both give:</p>\n\n<pre><code>Question 1\n1 = educa\u00e7\u00e3o; encoding: utf8, is_utf8=, valid=1\n2 = educa??o; encoding: iso-8859-1, is_utf8=, valid=1\n</code></pre>\n\n<p>Question 1A: What does the <code>use open IO =&gt; ':encoding(UTF-8)';</code> not do anything? I guess my system is set up as UTF8 already. Correct?</p>\n\n<p>Question 1B: Why do the characters in 2 not display correctly? The encoding is detected correctly, but maybe when the string is output at UTF, the '\u00e7\u00e3' become UTF characters the system doesn't know about (or that don't exist)? </p>\n\n<p>Now for question 2:</p>\n\n<pre><code>use open IO =&gt; ':encoding(UTF-8)',':std';\nsay \"Question 2\";\n&amp;sayStrings($str1, $str2);\n</code></pre>\n\n<p>gives:</p>\n\n<pre><code>Question 2\n1 = educa\u00c3\u00a7\u00c3\u00a3o; encoding: utf8, is_utf8=, valid=1\n2 = educa\u00e7\u00e3o; encoding: iso-8859-1, is_utf8=, valid=1\n</code></pre>\n\n<p>Question 2: Why does this make the latin-1 string display correctly, but break the UTF8 string? (I.e. it seems that by adding :std, the character sequence in str1 is interpreted as latin-1, not UFT8, see <a href=\"https://stackoverflow.com/questions/53146664/perl-encodeguess-with-and-without-hints-detecting-utf8\">perl Encode::Guess with and without hints - detecting utf8</a>). Why is that?</p>\n\n<p>Question 3:</p>\n\n<pre><code>use open IO =&gt; ':encoding(UTF-8)',':std';\nsay \"fix_latin\";\n&amp;sayStrings(&amp;fix_latin($str1), &amp;fix_latin($str2));\n</code></pre>\n\n<p>gives</p>\n\n<pre><code>fix_latin\n1 = educa\u00e7\u00e3o; encoding: utf8, is_utf8=1, valid=1\n2 = educa\u00e7\u00e3o; encoding: utf8, is_utf8=1, valid=1\n</code></pre>\n\n<p>Question 3: I guess fix_latin indicates that the string is utf8, and so the string prints correctly. So there's obviously something I'm not understanding about sign-posting the string as utf8 and binmode. What is it?</p>\n\n<p>Many thanks!</p>\n\n<p>(P.S. Have tried to read the docs on this, but yes, please do send links that will explains this - ideally in clear language with plenty of examples...)</p>\n"}, {"tags": ["linux", "shell", "perl", "unix"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10606339, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0Aq1zovmsqE/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC60tjQA2z0TMFT78DKuySAJq1krA/mo/photo.jpg?sz=128", "display_name": "Satish Sajjanar", "link": "https://stackoverflow.com/users/10606339/satish-sajjanar"}, "edited": false, "score": 0, "creation_date": 1541408177, "post_id": 53149593, "comment_id": 93192487, "body": "My intension to get last line bez i have used sort to get the latest subdirectory at the end. since <b>tail -1</b> only gets me the last line of all print ( in this case its zzz/181004_2355), what can be done to get all the latest sub-directories like below?.&lt;br/&gt;                                                                                           aaa/181012_1545&lt;br/&gt; bbb/181105_0000&lt;br/&gt; zzz/181004_2355&lt;br/&gt;"}], "tags": [], "owner": {"reputation": 51, "user_id": 7098255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30e6500e2f381c5252ccd2e07d1aa2ae?s=128&d=identicon&r=PG&f=1", "display_name": "staples", "link": "https://stackoverflow.com/users/7098255/staples"}, "is_accepted": false, "score": 0, "last_activity_date": 1541400608, "creation_date": 1541400608, "answer_id": 53149593, "question_id": 53149509, "link": "https://stackoverflow.com/questions/53149509/how-to-print-last-directory-inside-every-parent-directory/53149593#53149593", "title": "How to print last directory inside every parent directory", "body": "<p>You're tailing the output of the command with <code>tail -1</code>. So you will only get the very last line. :)</p>\n\n<p>Beyond that your command looks correct.</p>\n\n<p>Couple other notes:</p>\n\n<ol>\n<li>You can write <code>find .</code> without the glob because find is recursive by default</li>\n<li><code>???????????</code> could be more restrictive if you needed. <code>??????_????</code> or using <code>[[:digit:]]</code> would be options.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1541403687, "post_id": 53149694, "comment_id": 93190582, "body": "Native glob sort depends on LOCALE environment settings, LC_ALL overrides. So it is one of those -- it depends things..."}], "tags": [], "owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "is_accepted": false, "score": 1, "last_activity_date": 1541401138, "creation_date": 1541401138, "answer_id": 53149694, "question_id": 53149509, "link": "https://stackoverflow.com/questions/53149509/how-to-print-last-directory-inside-every-parent-directory/53149694#53149694", "title": "How to print last directory inside every parent directory", "body": "<p>I'd do this natively in bash using a <code>for</code> loop, rather than using <code>find</code>.</p>\n\n<p>I honestly can't remember if bash makes any promises about the order in which globs will be processed. So, using the sample date you included, here's a one-liner that compares files using <code>[[</code>:</p>\n\n<pre><code>$ declare -A last=(); for a in *; do for b in $a/[0-9]*/; do [[ $b &gt; $last[$a] ]] &amp;&amp; last[$a]=$b; done; done; declare -p last\ndeclare -A last=([bbb]=\"bbb/181105_0000/\" [zzz]=\"zzz/181004_2355/\" [aaa]=\"aaa/181012_1545/\" )\n</code></pre>\n\n<p>Note that the limiting patern here is <code>$a/[0-9]*/</code>, which is sufficient for your sample data. You can of course restrict this as necessary, using character classes and eliminating the glob.</p>\n\n<p>Note also that the trailing <code>/</code> in this pattern ensures that you will only match things that are directories. This will put a <code>/</code> at the end of every result in the <code>$last</code> array. You can post-process if required:</p>\n\n<pre><code>$ for i in \"${!last[@]}\"; do last[$i]=\"${last[$i]%/}\"; last[$i]=\"${last[$i]#*/}\"; done\n$ declare -p last\ndeclare -A last=([bbb]=\"181105_0000\" [zzz]=\"181004_2355\" [aaa]=\"181012_1545\" )\n</code></pre>\n\n<p>For easier reading, here's the one-liner split into multiple lines. :)</p>\n\n<pre><code># Create an associative array. Requires bash 4+.\ndeclare -A last=()\n\n# Step through the top-level directories\nfor a in *; do\n  # Step through the second level directories\n  for b in \"$a\"/[0-9]*/; do\n    # Compare and record as required\n    [[ $b &gt; $last[$a] ]] &amp;&amp; last[$a]=\"$b\"\n  done\ndone\n\n# Print the result\ndeclare -p last\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2087, "user_id": 6010343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D3z4z.jpg?s=128&g=1", "display_name": "Jay jargot", "link": "https://stackoverflow.com/users/6010343/jay-jargot"}, "is_accepted": false, "score": 0, "last_activity_date": 1541580069, "last_edit_date": 1541580069, "creation_date": 1541403399, "answer_id": 53150119, "question_id": 53149509, "link": "https://stackoverflow.com/questions/53149509/how-to-print-last-directory-inside-every-parent-directory/53150119#53150119", "title": "How to print last directory inside every parent directory", "body": "<p>The idea to use <code>sort -u</code> and <code>tail -1</code> is good, and it'll work when used with the list of sub directories from within the same parent directory. The <code>-u</code> is going to remove duplicates, but this is not needed because 2 sub directories cannot have the same name within the same parent directory.</p>\n\n<p><code>?</code> means any chars; a more restrictive <code>[0-9]</code> can be used instead to select a single digit.</p>\n\n<p>Give a try to this:</p>\n\n<pre><code>find . -maxdepth 1 -type d  -print0 | xargs -0 sh -c '\n for dir ; do \n   find \"${dir}\" -maxdepth 1 -type d \\\n    -name '[0-9][0-9][0-1][0-9][0-3][0-9]_[0-2][0-9][0-6][0-9]' | sort | tail -1\n done' dummy | sort\n</code></pre>\n\n<p>For each directory found at the first level (first <code>find . -maxdepth 1 ...</code>):</p>\n\n<ul>\n<li>all sub directories that match the pattern\n<code>[0-9][0-9][0-1][0-9][0-3][0-9]_[0-2][0-9][0-6][0-9]</code> are listed (second <code>find</code>)</li>\n<li>only the latest is printed (thanks to <code>sort</code> and\n<code>tail</code> commands)</li>\n</ul>\n\n<p>the <code>-print0</code> and <code>-0</code> arguments are used together with the <code>sh -c</code> and the <code>for statement</code> to make the command line robust to filenames with special chars, such as <code>line break</code>.</p>\n\n<p><code>dummy</code> is not used but it is mandatory, see <code>man sh</code></p>\n\n<p><strong>TEST</strong></p>\n\n<pre><code>mkdir -p aaa/180809_1047 aaa/180915_0055 aaa/181012_1545 aaa/xyz \\\nbbb/xyz bbb/180809_1047 bbb/180915_0055 bbb/181012_1545 bbb/181105_0000 \\\nzzz/xyz zzz/180821_1555 zzz/181004_2355\n\nfind . -maxdepth 1 -type d  -print0 | xargs -0 sh -c '\n  for dir ; do \n    find \"${dir}\" -maxdepth 1 -type d \\\n     -name '[0-9][0-9][0-1][0-9][0-3][0-9]_[0-2][0-9][0-6][0-9]' | sort | tail -1\n  done' dummy | sort\n\n\n./bbb/181105_0000\n./aaa/181012_1545\n./zzz/181004_2355\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "is_accepted": false, "score": 0, "last_activity_date": 1541405246, "last_edit_date": 1541405246, "creation_date": 1541404529, "answer_id": 53150332, "question_id": 53149509, "link": "https://stackoverflow.com/questions/53149509/how-to-print-last-directory-inside-every-parent-directory/53150332#53150332", "title": "How to print last directory inside every parent directory", "body": "<p>Using find, sort, awk:</p>\n\n<pre><code>find -name '??????_????' -type d | sort -r | awk -F'/' '{if(!s[$(NF-1)]++) print $0}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10606339, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0Aq1zovmsqE/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC60tjQA2z0TMFT78DKuySAJq1krA/mo/photo.jpg?sz=128", "display_name": "Satish Sajjanar", "link": "https://stackoverflow.com/users/10606339/satish-sajjanar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1541580069, "creation_date": 1541400154, "last_edit_date": 1541400397, "question_id": 53149509, "link": "https://stackoverflow.com/questions/53149509/how-to-print-last-directory-inside-every-parent-directory", "title": "How to print last directory inside every parent directory", "body": "<p>I have set of directories and sub-directories as below.</p>\n\n<pre><code>aaa/180809_1047\naaa/180915_0055\naaa/181012_1545\naaa/xyz\nbbb/180809_1047\nbbb/180915_0055\nbbb/181012_1545\nbbb/181105_0000\nbbb/xyz\n.\n.\n.\nzzz/180821_1555\nzzz/181004_2355\nzzz/xyz\n</code></pre>\n\n<p>Most of the sub-directories are in YYMMDD_HHMM format. Here I'm trying to print the sub-directories which are in the format YYMMDD_HHMM only (latest) from every parent directory. Below is my requirement.</p>\n\n<p>output:</p>\n\n<pre><code>aaa/181012_1545\nbbb/181105_0000\nzzz/181004_2355\n</code></pre>\n\n<p>I have used find command as below:</p>\n\n<pre><code>find ./*/ -type d -maxdepth 1 -mindepth 1 -name \"???????????\" | sort -u | tail -1\n</code></pre>\n\n<p><code>\"???????????\"</code> --> this is to print the directories that matches the format YYMMDD_HHMM.</p>\n\n<p>After this command I'm getting only.</p>\n\n<pre><code>zzz/181004_2355 \n</code></pre>\n"}, {"tags": ["perl", "utf-8", "encode", "utf"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1541402673, "post_id": 53146664, "comment_id": 93190249, "body": "<i>Always</i> <code>use strict; use warnings;</code>!"}, {"owner": {"reputation": 59, "user_id": 6761461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2337999bbcdbc7b6f9c3cbf248028acf?s=128&d=identicon&r=PG&f=1", "display_name": "BBB", "link": "https://stackoverflow.com/users/6761461/bbb"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1541403527, "post_id": 53146664, "comment_id": 93190520, "body": "Amended code appropriately. Though for me that doesn&#39;t make any difference?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541419285, "post_id": 53146664, "comment_id": 93198329, "body": "See <a href=\"https://stackoverflow.com/q/22868271/589924\">How to detect latin1 and UTF-8?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 1, "creation_date": 1541404453, "post_id": 53147769, "comment_id": 93190869, "body": "Even the presence of a UTF-8 BOM doesn&#39;t conclusively distinguish it from ISO-8859-1. The BOM is valid ISO-8859-1, corresponding to the characters <code>&#239;&#187;&#191;</code>."}], "tags": [], "owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "is_accepted": false, "score": 0, "last_activity_date": 1541386901, "creation_date": 1541386901, "answer_id": 53147769, "question_id": 53146664, "link": "https://stackoverflow.com/questions/53146664/perl-encodeguess-with-and-without-hints-detecting-utf8/53147769#53147769", "title": "perl Encode::Guess with and without hints - detecting utf8", "body": "<p>It's hard to say for sure because there are a few issues at work that make detecting the encoding difficult.</p>\n\n<p>First is the fact that iso-8859-1 shares almost all of its code points with utf8. Unless there's a definitive byte-order mark at the start of the string or a character that doesn't exist in iso-8859-1, then Encode::Guess really is just guessing.</p>\n\n<p>Second is mentioned in the <a href=\"https://perldoc.perl.org/Encode/Guess.html#CAVEATS\" rel=\"nofollow noreferrer\">Encode::Guess caveats</a> in the perldocs. Encode::Guess runs through the text using a 'trial-and-error' algorithm to eliminate all but one of the provided encodings. Naturally the more alike to encodings are, the less accurate the module will be.</p>\n\n<p>Third, when you don't specify the allowed encoding types in the use statement, the module will compare it to everything it can. This combined with the trial-and-error approach and the overlap in utf8 vs iso-8859-1 code points means it's possible for Encode::Guess to hit different conclusions based on the parameters passed to the method. I imagine you would get more consistent results if you checked against two more divergent encodings, like utf8 vs 7bit-jis.</p>\n\n<p>Lastly, Perl has <a href=\"https://perldoc.perl.org/Encode.html#UTF-8-vs.-utf8-vs.-UTF8\" rel=\"nofollow noreferrer\">more than one implementation of utf8</a> so it's also possible that when you don't specify the 'utf8' encoding explicitly, it might be using a different implementation that may change the results as well. I don't know enough about Perl's internals to confirm that's what's happening in this case though.</p>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 6761461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2337999bbcdbc7b6f9c3cbf248028acf?s=128&d=identicon&r=PG&f=1", "display_name": "BBB", "link": "https://stackoverflow.com/users/6761461/bbb"}, "is_accepted": false, "score": 1, "last_activity_date": 1541404184, "creation_date": 1541404184, "answer_id": 53150263, "question_id": 53146664, "link": "https://stackoverflow.com/questions/53146664/perl-encodeguess-with-and-without-hints-detecting-utf8/53150263#53150263", "title": "perl Encode::Guess with and without hints - detecting utf8", "body": "<p>I think this is what's going on. With <code>use Encode::Guess qw/utf8 iso-8859-1/;</code> the 'hint' makes no difference (sorry for being unclear!), so we only have </p>\n\n<pre><code>A1/B1: ERROR: Can't guess: iso-8859-1 or utf8 for 1 = educa\u00c3\u00a7\u00c3\u00a3o\n</code></pre>\n\n<p>and\n    C1/D1: encoding guess: iso-8859-1; result: 2 = educa\u00e7\u00e3o</p>\n\n<p>For A1/B2, the string could be UTF8 (educa\u00e7\u00e3o) or it could be latin1 (educa\u00c3\u00a7\u00c3\u00a3o). The 2nd one looks incorrect, but Encode::Guess cannot tell - Guess goes by character encodings and doesn't speak Portuguese!</p>\n\n<p>Now if I replace 'use Encode::Guess qw/utf8 iso-8859-1/;' by 'use Encode::Guess;' I get</p>\n\n<pre><code>A2: encoding guess: utf8; result: 1 = educa\u00e7\u00e3o\n</code></pre>\n\n<p>latin-1 is no longer an option (it's not part of the default), so the result comes out as utf8.</p>\n\n<pre><code>B2: ERROR: Can't guess: iso-8859-1 or utf8 for 1 = educa\u00c3\u00a7\u00c3\u00a3o\n</code></pre>\n\n<p>In B2, with the hit, we're back in the above scenario, and Guess cannot decide.</p>\n\n<p>For C2: </p>\n\n<pre><code>C2: ERROR: Can't guess: No appropriate encodings found! for 2 = educa\u00e7\u00e3o\n</code></pre>\n\n<p>this makes sense, as latin-1 isn't part of the default. Finally in D2</p>\n\n<pre><code>D2: encoding guess: iso-8859-1; result: 2 = educa\u00e7\u00e3o\n</code></pre>\n\n<p>latin-1 is hinted, so the encoding is detected.</p>\n"}], "owner": {"reputation": 59, "user_id": 6761461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2337999bbcdbc7b6f9c3cbf248028acf?s=128&d=identicon&r=PG&f=1", "display_name": "BBB", "link": "https://stackoverflow.com/users/6761461/bbb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1541404337, "creation_date": 1541375701, "last_edit_date": 1541404337, "question_id": 53146664, "link": "https://stackoverflow.com/questions/53146664/perl-encodeguess-with-and-without-hints-detecting-utf8", "title": "perl Encode::Guess with and without hints - detecting utf8", "body": "<p>I am confused about Encode::Guess. Suppose this is my perl code:</p>\n\n<pre><code>use strict; \nuse warnings;\nuse 5.18.2;\nuse Encode;\nuse Encode::Guess qw/utf8 iso-8859-1/;\nuse open IO =&gt; ':encoding(UTF-8)', ':std';\nmy $str1 = \"1 = educa\\x{c3}\\x{a7}\\x{c3}\\x{a3}o\";\nmy $str2 =  \"2 = educa\\x{e7}\\x{e3}o\";\n\nsay \"A: \".&amp;fixEnc($str1);\nsay \"B: \".&amp;fixEnc($str1,'hint');\nsay \"C: \".&amp;fixEnc($str2);\nsay \"D: \".&amp;fixEnc($str2,'hint');\nsay \"\";\n\nsub fixEnc() {\n    my $data = $_[0];\n    my $enc = \"\";\n    if ($_[1]) {\n        $enc = guess_encoding($data,qw/utf8 iso-8859-1/);\n    } else {\n        $enc = guess_encoding($data);\n    };\n    if (!ref($enc)) {\n        return \"ERROR: Can't guess: $enc for $data\";\n    } else {\n        my $utf8 = decode($enc-&gt;name, $data);\n        $utf8 = \"encoding guess: \".$enc-&gt;name.\"; result: $utf8\";\n        return $utf8;\n    };\n};\n</code></pre>\n\n<p>It produces:</p>\n\n<pre><code>A1: ERROR: Can't guess: iso-8859-1 or utf8 for 1 = educa\u00c3\u00a7\u00c3\u00a3o\nB2: ERROR: Can't guess: utf8 or iso-8859-1 for 1 = educa\u00c3\u00a7\u00c3\u00a3o\nC1: encoding guess: iso-8859-1; result: 2 = educa\u00e7\u00e3o\nD1: encoding guess: iso-8859-1; result: 2 = educa\u00e7\u00e3o\n</code></pre>\n\n<p>Now if I replace 'use Encode::Guess qw/utf8 iso-8859-1/;' by '    use Encode::Guess;' I get</p>\n\n<pre><code>A2: encoding guess: utf8; result: 1 = educa\u00e7\u00e3o\nB2: ERROR: Can't guess: iso-8859-1 or utf8 for 1 = educa\u00c3\u00a7\u00c3\u00a3o\nC2: ERROR: Can't guess: No appropriate encodings found! for 2 = educa\u00e7\u00e3o\nD2: encoding guess: iso-8859-1; result: 2 = educa\u00e7\u00e3o\n</code></pre>\n\n<p>What causes the difference? In particular, why is utf8 not guessed when I hint with utf8?</p>\n\n<p>Edit: I have posted an answer below. Basically, the realisation is that Guess goes by character encodings and doesn't speak Portuguese! 'educa\u00c3\u00a7\u00c3\u00a3o', while not Portuguese is the <em>correct</em> latin-1 version of string 1 above that Guess cannot distinguish from the UTF8 version educa\u00e7\u00e3o (unlike a Portuguese speaker). </p>\n"}, {"tags": ["perl", "unicode", "text-formatting"], "answers": [{"tags": [], "owner": {"reputation": 5794, "user_id": 1867549, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/7ckLZ.jpg?s=128&g=1", "display_name": "Etienne Miret", "link": "https://stackoverflow.com/users/1867549/etienne-miret"}, "is_accepted": true, "score": 3, "last_activity_date": 1541361692, "creation_date": 1541361692, "answer_id": 53144885, "question_id": 53144202, "link": "https://stackoverflow.com/questions/53144202/compute-the-width-of-a-string-in-monspaced-font/53144885#53144885", "title": "Compute the width of a string in monspaced font", "body": "<p>After further research, I found the <a href=\"https://metacpan.org/pod/Text::CharWidth\" rel=\"nofollow noreferrer\">Text::CharWidth</a> CPAN module, which provides the <code>mbswidth</code> function, doing exactly what I need.</p>\n\n<pre><code>use Text::CharWidth qw(mbswidth);\n\nmbswidth (\"\ud83d\ude00\ud83d\ude09\"); # returns 4\nmbswidth (\"\u3042\u3089\"); # returns 4\n</code></pre>\n"}], "owner": {"reputation": 5794, "user_id": 1867549, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/7ckLZ.jpg?s=128&g=1", "display_name": "Etienne Miret", "link": "https://stackoverflow.com/users/1867549/etienne-miret"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 1, "accepted_answer_id": 53144885, "answer_count": 1, "score": 2, "last_activity_date": 1541361692, "creation_date": 1541357346, "question_id": 53144202, "link": "https://stackoverflow.com/questions/53144202/compute-the-width-of-a-string-in-monspaced-font", "title": "Compute the width of a string in monspaced font", "body": "<p>In order to properly format some text in a terminal (where I assume usage of a monospaced font), I need to compute the \u201clength\u201d of strings. The tricky part is that I need the length it will use on display (in number of fixed-width characters).</p>\n\n<p>I originally used the <a href=\"http://perldoc.perl.org/functions/length.html\" rel=\"nofollow noreferrer\">length</a> function, but it returns the number of <strong>codepoints</strong>. I also tried to count the number of <strong>graphemes</strong> using:</p>\n\n<pre><code>sub width {\n    my $str = shift;\n    my $count = 0;\n    while ($str =~ /\\X/g) {\n        $count++;\n    }\n    return $count;\n}\n</code></pre>\n\n<p>(Credits to <a href=\"https://www.perl.com/pub/2012/05/perlunicook-string-length-in-graphemes.html/\" rel=\"nofollow noreferrer\">Tom Christiansen</a>).</p>\n\n<p>But this is still not what I need, as some graphemes are double-width with my font (SF Mono Regular), e.g. emojis and Asian characters.</p>\n"}, {"tags": ["xml", "perl", "xml-libxml"], "comments": [{"owner": {"reputation": 4036, "user_id": 1277259, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FQ3JN.png?s=128&g=1", "display_name": "KevinO", "link": "https://stackoverflow.com/users/1277259/kevino"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1541351184, "post_id": 53142892, "comment_id": 93177976, "body": "@Corion, I have added a small program, thank you for the urging. I will look for the <code>toString</code> approach. I appreciate your comments and help!"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1541351946, "post_id": 53142892, "comment_id": 93178208, "body": "I think basically the only change you need is ` relaxedQueryChars =&gt; &quot;[]|{}^\\\\\\&quot;&lt;&gt;&quot;` - don&#39;t pre-encode stuff, libxml will take care of all necessary entity-encoding"}, {"owner": {"reputation": 4036, "user_id": 1277259, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FQ3JN.png?s=128&g=1", "display_name": "KevinO", "link": "https://stackoverflow.com/users/1277259/kevino"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1541352572, "post_id": 53142892, "comment_id": 93178421, "body": "@Corion, your suggestion works great for the quote character and the greater than and less than signs! But the backslash and the grave accent are being inserted directly (i.e., not converted to their hex codes). The unconverted backslash in particular is worrisome, as it then escapes the next character. But please do add this as a answer so I can be sure to acknowledge you!"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1541352772, "post_id": 53142892, "comment_id": 93178500, "body": "How does a backslash in XML escape the next character?!"}], "answers": [{"comments": [{"owner": {"reputation": 4036, "user_id": 1277259, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FQ3JN.png?s=128&g=1", "display_name": "KevinO", "link": "https://stackoverflow.com/users/1277259/kevino"}, "edited": false, "score": 0, "creation_date": 1541353390, "post_id": 53143555, "comment_id": 93178723, "body": "It appears that tomcat does accept the backslash in the String. I was incorrect in my fear that it would read the String and use the backslash as an escape character. The change to just specifying the characters directly appears to have worked. Thank you very much!"}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 3, "last_activity_date": 1541352907, "creation_date": 1541352907, "answer_id": 53143555, "question_id": 53142892, "link": "https://stackoverflow.com/questions/53142892/how-to-insert-a-literal-using-setattribute/53143555#53143555", "title": "How to insert a literal &#39;&amp;&#39; using setAttribute()", "body": "<p>I think basically the only change you need is <code>relaxedQueryChars =&gt; \"[]|{}^\\\\\\\"&lt;&gt;\"</code> - don't pre-encode stuff, libxml will take care of all necessary entity-encoding:</p>\n\n<pre><code>#!perl\nuse strict;\nuse warnings;\nuse XML::LibXML;\n\nmy $doc = XML::LibXML-&gt;load_xml(string=&gt;'&lt;f/&gt;');\n$doc-&gt;documentElement-&gt;setAttribute('foo' =&gt; '[]|{}&lt;&gt;\\\\&amp;#');\nprint $doc-&gt;toString\n\n__END__\n\n&lt;?xml version=\"1.0\"?&gt; &lt;f foo=\"[]|{}&amp;lt;&amp;gt;\\&amp;amp;#\"/&gt;\n</code></pre>\n\n<p>Your fear that a backslash \"escapes the next character\" in XML is not supported by <a href=\"https://en.wikipedia.org/wiki/Xml\" rel=\"nofollow noreferrer\">Wikipedia</a> - the ampersand character <code>&amp;</code> is the character that is used to entity-encode all problematic characters.</p>\n"}], "owner": {"reputation": 4036, "user_id": 1277259, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FQ3JN.png?s=128&g=1", "display_name": "KevinO", "link": "https://stackoverflow.com/users/1277259/kevino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 53143555, "answer_count": 1, "score": 2, "last_activity_date": 1541352907, "creation_date": 1541348952, "last_edit_date": 1541351021, "question_id": 53142892, "link": "https://stackoverflow.com/questions/53142892/how-to-insert-a-literal-using-setattribute", "title": "How to insert a literal &#39;&amp;&#39; using setAttribute()", "body": "<p>I am using XML::LibXML (2.0018; perl 5.16.3) I have a hash that contains a series of attribute that are then applied to an XML document using <code>setAttribute()</code>. This stuff is for updating a tomcat server.xml file that needs to be modified to work with an apache httpd front end, and is executed by the continuous deployment scripts.</p>\n\n<p>The adding of the basic attributes works fine:</p>\n\n<pre><code>use XML::LibXML qw ();\n\n...\n\nmy %tmphash = ( port =&gt; \"8581\", address =&gt; \"127.0.0.1\", ... );\n\n...\n</code></pre>\n\n<p>Then in some method that takes a hash reference:</p>\n\n<pre><code>foreach my $key (keys %$hashConnRef) {\n  $connector-&gt;setAttribute(\"$key\" =&gt; $hasConnRef-&gt;{$key});\n}\n</code></pre>\n\n<p>All well and good, up until now where I need to add an attribute that needs a literal <code>&amp;</code> in the output, so that tomcat will properly pick it up.</p>\n\n<p>The attribute to be put into the server.xml file in the should look like (<strong>desired result</strong>):</p>\n\n<pre><code>relaxedQueryChars=\"[]|{}^&amp;#x5c;&amp;#x60;&amp;quot;&amp;lt;&amp;gt;\" \n</code></pre>\n\n<p>However, the <code>setAttribute()</code> call conveniently converts the \"&amp;\" into \"&amp;\", resulting in (<strong>current output</strong>):</p>\n\n<pre><code>relaxedQueryChars=\"[]|{}^&amp;amp;#x5c;&amp;amp;#x60;&amp;amp;quot;&amp;amp;lt;&amp;amp;gt;\"\n</code></pre>\n\n<p>I've tried escaping (and double-escaping) the entry in the hash, such as:</p>\n\n<pre><code>relaxedQueryChars =&gt; \"[]|{}^\\&amp;#x5c;\\&amp;#x60;\\&amp;quot;\\&amp;lt;\\&amp;gt;\"\n</code></pre>\n\n<p>Unfortunately, in the former case it simply put <code>&amp;amp;#x5c;&amp;amp;#x60</code>, and in the latter it added a <code>\\</code> before the <code>&amp;amp;</code>. \nHow can I define the string in the hash so that it will process through the <code>setAttribute</code> and properly emit the <code>&amp;#x5c</code>? </p>\n\n<p>Per a request, here is a full example:</p>\n\n<p>/tmp/min.xml (essentially everything from a tomcat conf/server.xml stripped):</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;Server port=\"8385\" shutdown=\"SHUTDOWN\"&gt;\n  &lt;Service name=\"Catalina\"&gt;\n  &lt;/Service&gt;\n&lt;/Server&gt;\n</code></pre>\n\n<p>And a minimal example program:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse warnings;\n\nuse XML::LibXML qw ( );\n\nmy %tmphash = (\n  port =&gt; \"8381\",\n  address =&gt; \"127.0.0.1\",\n  relaxedQueryChars =&gt; \"[]|{}^\\&amp;#x5c;\\&amp;#x60;\\&amp;quot;\\&amp;lt;\\&amp;gt;\"\n  );\n\nsub edit_server_xml {\n  my ($serverFile, $hashConnRef) = @_;\n\n  my $parser = XML::LibXML-&gt;new();\n\n  my $doc = $parser-&gt;parse_file($serverFile);\n\n  for my $server ($doc-&gt;findnodes(\"/Server\")) {\n    # delete all of the defined connectors\n      for my $service ($server-&gt;findnodes(\"Service\")) {\n        for my $connector ($service-&gt;findnodes(\"Connector\")) {\n          $service-&gt;removeChild($connector);\n        }\n      }\n\n      my $connector = $doc-&gt;createElement(\"Connector\");\n      for my $service ($server-&gt;findnodes(\"Service\")) {\n        foreach my $key (keys %$hashConnRef) {\n          $connector-&gt;setAttribute(\"$key\" =&gt; $hashConnRef-&gt;{$key});\n        }\n\n        $service-&gt;appendChild($connector);\n        $service-&gt;appendTextNode(\"\\n\");\n      }\n\n    $doc-&gt;toFile($serverFile);\n  }\n}\n\nedit_server_xml(\"/tmp/min.xml\", \\%tmphash);\n</code></pre>\n\n<p>Resultant line that is incorrect:</p>\n\n<pre><code>&lt;Connector address=\"127.0.0.1\" relaxedQueryChars=\"[]|{}^&amp;amp;#x5c;&amp;amp;#x60;&amp;amp;quot;&amp;amp;lt;&amp;amp;gt;\" port=\"8381\"/&gt;\n</code></pre>\n"}, {"tags": ["regex", "perl", "sed"], "comments": [{"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1541335385, "post_id": 53140899, "comment_id": 93173639, "body": "Welcome to SO, could you please add samples of input and samples of output with CODE TAGS and let us know then? It will make your question more clearer."}], "answers": [{"comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1541343883, "post_id": 53141448, "comment_id": 93175859, "body": "This should be a comment."}, {"owner": {"reputation": 1415, "user_id": 4379130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ccFzr.png?s=128&g=1", "display_name": "John Greene", "link": "https://stackoverflow.com/users/4379130/john-greene"}, "edited": false, "score": 0, "creation_date": 1602776010, "post_id": 53141448, "comment_id": 113833261, "body": "Except that comments don&#39;t have elegant formatting support.  :-/"}], "tags": [], "owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "is_accepted": false, "score": 0, "last_activity_date": 1541338981, "creation_date": 1541338981, "answer_id": 53141448, "question_id": 53140899, "link": "https://stackoverflow.com/questions/53140899/using-regex-to-empty-contents-of-an-if-statement-but-retaining-the-outer-curly-b/53141448#53141448", "title": "Using regex to empty contents of an if statement but retaining the outer curly braces only", "body": "<p>It depends on how arbitrary the code is within the outer braces. For example, these are possibilities:</p>\n\n<pre><code>if (....) {\n    c = '{';\n    // this is a mismatched brace: {\n}\n</code></pre>\n\n<p>To cope with such possibilities you'd probably require something that parses the language in question rather than a regex.</p>\n"}, {"tags": [], "owner": {"reputation": 725, "user_id": 1147654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bs8pG.jpg?s=128&g=1", "display_name": "saudic", "link": "https://stackoverflow.com/users/1147654/saudic"}, "is_accepted": false, "score": 0, "last_activity_date": 1541343166, "creation_date": 1541343166, "answer_id": 53142061, "question_id": 53140899, "link": "https://stackoverflow.com/questions/53140899/using-regex-to-empty-contents-of-an-if-statement-but-retaining-the-outer-curly-b/53142061#53142061", "title": "Using regex to empty contents of an if statement but retaining the outer curly braces only", "body": "<p>The following perl code would do the trick on your exemple </p>\n\n<pre><code>$/ = undef;\nmy $data = &lt;&gt;;\nif( $data =~ /if\\(url == \\\"https:\\/\\/abcd.com\\\"\\)\\{(.+)\\}/ms ){\n  $inside = $1 ;\n  $data =~ s/\\Q$inside\\E//ms ;\n}\nprint $data ;\n</code></pre>\n\n<p>However it would probably fail if there is more code containing curly braces at the end of you sample as it is looking for the last curly brace and extracting all between the targeted if statement and this last curly brace.</p>\n"}], "owner": {"reputation": 1, "user_id": 10603513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/663ba480cc1cbe8c17776eda2c61ed19?s=128&d=identicon&r=PG&f=1", "display_name": "dipthar", "link": "https://stackoverflow.com/users/10603513/dipthar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1541343166, "creation_date": 1541335141, "last_edit_date": 1541335237, "question_id": 53140899, "link": "https://stackoverflow.com/questions/53140899/using-regex-to-empty-contents-of-an-if-statement-but-retaining-the-outer-curly-b", "title": "Using regex to empty contents of an if statement but retaining the outer curly braces only", "body": "<p>I would like to use regex with sed or perl or awk on\nthe following lines of code stored in a file, say, file.txt: </p>\n\n<pre><code>if(url == \"https://abcd.com\"){\nif(p=123){System.out.println(\"url is https://....(OK?)); }\nelse{\n//do nothing!\n}\nc=1;\n}\n</code></pre>\n\n<p>and would like to empty the contents of the outer if statement and retain the curly braces so that the output is:-</p>\n\n<pre><code>if(url == \"https://abcd.com\"){}.\n</code></pre>\n\n<p>Is it possible?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1541344839, "post_id": 53140754, "comment_id": 93176113, "body": "Crossposted to <a href=\"https://www.perlmonks.org/?node_id=1225199\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1225199</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1541435707, "post_id": 53140754, "comment_id": 93207491, "body": "There&#39;s no real difference between the two. You use the same approach for both. Grab the length, then loop length/4 times. Print <code>.data</code> and the symbol name before the loop."}], "answers": [{"tags": [], "owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "is_accepted": true, "score": 2, "last_activity_date": 1541456348, "creation_date": 1541456348, "answer_id": 53163062, "question_id": 53140754, "link": "https://stackoverflow.com/questions/53140754/replace-a-line-with-lines-based-on-information-extracted-from-these-line-using-p/53163062#53163062", "title": "replace a line with lines based on information extracted from these line using Perl", "body": "<p>Here is a modification to your code to handle the second case:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nwhile (&lt;&gt;) {\n    if (my ($string) = /^\\s*\\.comm\\s+(.*)/) {\n        my $cnt;\n        if ($string =~ /^\"(\\d+)\"$/) {\n            $cnt = $1 / 4;\n        } elsif ($string =~ /^(.+),(\\d+),(\\d+)$/) {\n            print \".data\\n$1:\\n\";\n            $cnt = $2 / $3;\n        } \n        for (1 .. $cnt){\n            print  \"\\t.data.32\\t0\\n\";\n        }\n    } else {\n        print;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 8581177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eda842459e34f7dedcb17c6c99592fde?s=128&d=identicon&r=PG&f=1", "display_name": "Sajjad", "link": "https://stackoverflow.com/users/8581177/sajjad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 53163062, "answer_count": 1, "score": -1, "last_activity_date": 1541456348, "creation_date": 1541334025, "last_edit_date": 1541435256, "question_id": 53140754, "link": "https://stackoverflow.com/questions/53140754/replace-a-line-with-lines-based-on-information-extracted-from-these-line-using-p", "title": "replace a line with lines based on information extracted from these line using Perl", "body": "<p>I have a file with following lines:</p>\n\n<p>first pattern:</p>\n\n<pre><code>    .comm   \"8\"\n    ....\n    .comm   \"20\"\n</code></pre>\n\n<p>second pattern:</p>\n\n<pre><code>    .comm   _resultAvg,8,4\n    .comm   _resultSwap,8,4\n    .comm   _resultMax,20,4\n</code></pre>\n\n<p>I want to replace first pattern with:</p>\n\n<pre><code>    .data.32 0\n    .data.32 0\n    ...\n    .data.32 0\n    .data.32 0\n    .data.32 0\n    .data.32 0\n    .data.32 0\n</code></pre>\n\n<p>And 2nd pattern as:</p>\n\n<pre><code>.data\n_resultAvg:\n    .data.32 0\n    .data.32 0\n.data\n_resultSwap:\n    .data.32 0\n    .data.32 0\n.data\n_resultMax:\n    .data.32 0\n    .data.32 0\n    .data.32 0\n    .data.32 0\n    .data.32 0\n</code></pre>\n\n<p>I can peform first task using;</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse String::Interpolate;\nmy $j=0;\n\nwhile (&lt;&gt;) {\n    if (my ($string) = /^\\s+\\.comm\\s+\"(.*)\"/) {\n        for( $j=0; $j &lt; ($string/4); $j = $j +1){\n            print  \"\\t.data.32\\t0\\n\";\n        }\n    } else {\n        print;\n    }\n}\n</code></pre>\n\n<p>How to perform second task? That is find the numeric e.g. 20 and divide it  by 4 and then put corresponding # of \".data.32 0\" lines after starting with relevant symbol.</p>\n\n<p>regards</p>\n"}, {"tags": ["perl", "binary", "statistics", "counting"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 10163450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jg3Eg.jpg?s=128&g=1", "display_name": "BwE", "link": "https://stackoverflow.com/users/10163450/bwe"}, "edited": false, "score": 0, "creation_date": 1541310194, "post_id": 53137977, "comment_id": 93168748, "body": "I am kinda confused, I can only seem to get the total bytes?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 63, "user_id": 10163450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jg3Eg.jpg?s=128&g=1", "display_name": "BwE", "link": "https://stackoverflow.com/users/10163450/bwe"}, "edited": false, "score": 0, "creation_date": 1541311092, "post_id": 53137977, "comment_id": 93168840, "body": "While that&#39;s what <code>$N</code> contains, <code>@counts</code> contains the information you requested. <code>$counts[0x00]</code> contains the count of <code>00</code> bytes, <code>$counts[0x01]</code> contains the count of <code>01</code> bytes, ..., and <code>$counts[0xFF]</code> contains the count of <code>FF</code> bytes."}, {"owner": {"reputation": 63, "user_id": 10163450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jg3Eg.jpg?s=128&g=1", "display_name": "BwE", "link": "https://stackoverflow.com/users/10163450/bwe"}, "edited": false, "score": 0, "creation_date": 1541311306, "post_id": 53137977, "comment_id": 93168881, "body": "Ahhhhh sorry! Yes! I rushed ahead a bit. Works like a charm! Takes about 7 seconds to calculate. You&#39;re a life saver!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1541309018, "last_edit_date": 1541309018, "creation_date": 1541308645, "answer_id": 53137977, "question_id": 53137917, "link": "https://stackoverflow.com/questions/53137917/how-would-one-calculate-binary-statistics-in-perl/53137977#53137977", "title": "How would one calculate binary statistics in perl?", "body": "<pre><code>use List::Util qw( sum );\n\nuse constant BLOCK_SIZE =&gt; 4*1024*1024;\n\nopen(my $fh, '&lt;:raw', $qfn)\n   or die(\"Can't open \\\"$qfn\\\": $!\\n\");\n\nmy @counts = (0) x 256;\nwhile (1) {\n   my $rv = sysread($fh, my $buf, BLOCK_SIZE);\n   die($!) if !defined($rv);\n   last if !$rv;\n\n   ++$counts[$_] for unpack 'C*', $buf;\n}\n\nmy $N = sum @counts;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1542676884, "post_id": 53222301, "comment_id": 93645771, "body": "Ow, reading one byte at a time? At least the system reads 8 KiB at a time. My solution has it read much larger blocks for better speed."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1542676913, "post_id": 53222301, "comment_id": 93645784, "body": "<code>$n++</code> is also very wasteful. Much better just to sum the hash values after the loop."}, {"owner": {"reputation": 332, "user_id": 2010012, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/01f47bec1cf38b0bc2ba112a6613fe1c?s=128&d=identicon&r=PG", "display_name": "james28909", "link": "https://stackoverflow.com/users/2010012/james28909"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542761416, "post_id": 53222301, "comment_id": 93682614, "body": "It honestly wasnt meant to be a drop in solution. its just another way to do it. the $n was just a way to  help calculate percentages of each byte seen. you are right... filesize could easily be obtained other ways. i know what to do to change it, but in all honesty it was not meant to be a direct code replacement, just an example of another way to count bytes. thanks"}, {"owner": {"reputation": 332, "user_id": 2010012, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/01f47bec1cf38b0bc2ba112a6613fe1c?s=128&d=identicon&r=PG", "display_name": "james28909", "link": "https://stackoverflow.com/users/2010012/james28909"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542769588, "post_id": 53222301, "comment_id": 93684400, "body": "original post edited. added an example from perlmonks, that i asked along time ago. just cross referencing."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1542771583, "post_id": 53222301, "comment_id": 93684860, "body": "The bottom snippet is better, but still has two issues. 1) <code>read 16384</code> is silly, since <code>read</code> reads in 4 KiB or 8KiB chunks depending on your version of Perl. Best to use <code>sysread</code> to perform a single call to the OS. <code>sysread</code> also has less overhead. 2) If a value doesn&#39;t occur in the file you get an undefined count instead of zero. So it&#39;s best to initialize the counts to zero first. /// After you make these two fixes, you get my answer."}], "tags": [], "owner": {"reputation": 332, "user_id": 2010012, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/01f47bec1cf38b0bc2ba112a6613fe1c?s=128&d=identicon&r=PG", "display_name": "james28909", "link": "https://stackoverflow.com/users/2010012/james28909"}, "is_accepted": true, "score": 0, "last_activity_date": 1542769528, "last_edit_date": 1542769528, "creation_date": 1541752772, "answer_id": 53222301, "question_id": 53137917, "link": "https://stackoverflow.com/questions/53137917/how-would-one-calculate-binary-statistics-in-perl/53222301#53222301", "title": "How would one calculate binary statistics in perl?", "body": "<p>Heres another way to do it:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Time::HiRes qw( time );\n\n$/ = \\1;\n\nopen my $file, '&lt;', shift;\nbinmode $file;\n\nmy %seen;\n\nmy $start = time();\nmy $n;\n\nwhile (&lt;$file&gt;) {\n    $seen{$_} ++;\n    $n++;\n}\nmy $end = time();\n\nfor ( sort keys %seen ) {\n    printf( \"%s%s%.2f%s\\n\", uc( unpack( 'H*', $_ ) ), \" seen $seen{$_} times - \", $seen{$_} / $n * 100, \"%\" );\n}\n\nprintf( \"took %.3f seconds!\\n\", $end - $start );\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>...\n...\nF8 seen 46475 times - 0.28%\nF9 seen 46611 times - 0.28%\nFA seen 46703 times - 0.28%\nFB seen 48902 times - 0.29%\nFC seen 46829 times - 0.28%\nFD seen 47707 times - 0.28%\nFE seen 47276 times - 0.28%\nFF seen 1752333 times - 10.44%\ntook 2.374 seconds!\n</code></pre>\n\n<p>This is (WSL in windows) perl 5.22.1 built for x86_64-linux-gnu-thread-multi\n(with 69 registered patches)</p>\n\n<p>Same thing in C - <a href=\"https://github.com/james28909/count/blob/master/count.c\" rel=\"nofollow noreferrer\">https://github.com/james28909/count/blob/master/count.c</a></p>\n\n<p>EDIT:</p>\n\n<p>Actually here is another, BETTER, example given by BrowserUK at perlmonks - <a href=\"https://www.perlmonks.org/?node_id=1159266\" rel=\"nofollow noreferrer\">https://www.perlmonks.org/?node_id=1159266</a> - It seems to run faster than both examples/answers given.</p>\n\n<pre><code>use strict;\nuse Time::HiRes qw[ time ];\n\nmy $start = time;\n\nopen I, '&lt;:raw', $ARGV[ 0 ];\n\nmy @seen;\n\nwhile( read( I, my $buf, 16384  ) ) {\n    ++$seen[$_] for unpack 'C*', $buf;\n}\nprintf \"Took %f secs\\n\", time() - $start;\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 10163450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jg3Eg.jpg?s=128&g=1", "display_name": "BwE", "link": "https://stackoverflow.com/users/10163450/bwe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 53222301, "answer_count": 2, "score": 2, "last_activity_date": 1542769528, "creation_date": 1541307818, "question_id": 53137917, "link": "https://stackoverflow.com/questions/53137917/how-would-one-calculate-binary-statistics-in-perl", "title": "How would one calculate binary statistics in perl?", "body": "<p>I am essentially seeking to do what a typical/good hex editor can do:</p>\n\n<p><a href=\"https://www.hhdsoftware.com/doc/hex-editor/statistics-statistics-tool-window.html\" rel=\"nofollow noreferrer\">https://www.hhdsoftware.com/doc/hex-editor/statistics-statistics-tool-window.html</a></p>\n\n<p>I wish to be able to count the occurrence of each byte and put it into a table so I can determine the % of say '00' compared to 'FF'.</p>\n\n<p>I have managed to get entropy, and the other statistics such as mean, median and mode are kind of redundant once I have the above complete.</p>\n\n<p>There is also an issue that the binary files I am compiling statistics on are quite large, 32mb+.</p>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["python", "shell", "perl", "nagios", "check-mk"], "comments": [{"owner": {"reputation": 1107, "user_id": 5102940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9ac659f5ab992d426d7a1b2b1384a2b?s=128&d=identicon&r=PG&f=1", "display_name": "Rohlik", "link": "https://stackoverflow.com/users/5102940/rohlik"}, "edited": false, "score": 0, "creation_date": 1541342690, "post_id": 53135025, "comment_id": 93175551, "body": "Best way how you can achieve this is write your own simple plugin in preferred language (Python, bash, Perl,...). You need simple condition in your script - if line contains critical status, then exit script with exit code 2 (= critical state in Nagios), if warning then.....    You get the point right?"}, {"owner": {"reputation": 11, "user_id": 4522613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3a07b766ad93629d52cc6843f8fccd1?s=128&d=identicon&r=PG&f=1", "display_name": "sid", "link": "https://stackoverflow.com/users/4522613/sid"}, "reply_to_user": {"reputation": 1107, "user_id": 5102940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9ac659f5ab992d426d7a1b2b1384a2b?s=128&d=identicon&r=PG&f=1", "display_name": "Rohlik", "link": "https://stackoverflow.com/users/5102940/rohlik"}, "edited": false, "score": 0, "creation_date": 1541430261, "post_id": 53135025, "comment_id": 93204334, "body": "Thanks for the tip. Understood now."}], "owner": {"reputation": 11, "user_id": 4522613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3a07b766ad93629d52cc6843f8fccd1?s=128&d=identicon&r=PG&f=1", "display_name": "sid", "link": "https://stackoverflow.com/users/4522613/sid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1541275308, "creation_date": 1541275308, "question_id": 53135025, "link": "https://stackoverflow.com/questions/53135025/nagios-plugin-to-read-multiple-status-in-text-file", "title": "Nagios plugin to read multiple status in text file.", "body": "<p>I have a text file (/tmp/status)on the client side which gets regularly updated by a cron job:</p>\n\n<pre><code>sdd1:OK sdd2:OK sdd3:WARNING sdd4:CRITICAL\n</code></pre>\n\n<p>I was looking for a plugin in nagios that can read this text file and display it on the nagios web interface in a single service.</p>\n\n<p>As far as the status of this service concerned - Since there are multiple status in this text file like OK,WARNING and CRITICAL so how I should proceed ?</p>\n"}, {"tags": ["perl", "environment-variables"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541299256, "post_id": 53133604, "comment_id": 93167599, "body": "One answer returns true for <code>prog &lt;&#47;dev&#47;null</code>, the other returns false. Depends what you want."}], "answers": [{"comments": [{"owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "edited": false, "score": 0, "creation_date": 1541270331, "post_id": 53133879, "comment_id": 93162039, "body": "Thanks.  Since I&#39;ve read some links that state sometimes a browser may not set the proper ENV variable, is STDIN a safe solution.  Could there ever be a false positive for the above?"}, {"owner": {"reputation": 8567, "user_id": 188691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b008c9884164fc36f772c8aa2a87bd4?s=128&d=identicon&r=PG", "display_name": "Tim", "link": "https://stackoverflow.com/users/188691/tim"}, "reply_to_user": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "edited": false, "score": 3, "creation_date": 1541270489, "post_id": 53133879, "comment_id": 93162069, "body": "It&#39;s a fairly good solution. Of course, depending on the program, it could be running from a terminal, but with standard input redirected from a file, in which case this wouldn&#39;t work perfectly. You might want to test STDOUT and STDERR as well - if one of them is a terminal, you know there&#39;s a terminal there. You can get some confidence by trying it in the ways you expect your program to be used, and see what it does."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1541275013, "post_id": 53133879, "comment_id": 93163199, "body": "Also note that for a program run from the terminal, but as the receiving end of a pipe, for example if you type <code>cat data.txt | prog.pl</code> in the terminal, the STDIN of <code>prog.pl</code> will not be a tty."}], "tags": [], "owner": {"reputation": 8567, "user_id": 188691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b008c9884164fc36f772c8aa2a87bd4?s=128&d=identicon&r=PG", "display_name": "Tim", "link": "https://stackoverflow.com/users/188691/tim"}, "is_accepted": true, "score": 3, "last_activity_date": 1541270329, "last_edit_date": 1541270329, "creation_date": 1541266810, "answer_id": 53133879, "question_id": 53133604, "link": "https://stackoverflow.com/questions/53133604/can-i-detect-if-a-perl-script-is-being-run-from-a-terminal-for-sure/53133879#53133879", "title": "Can I detect if a Perl script is being run from a terminal for sure?", "body": "<p>Use the <a href=\"https://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">file test operator <code>-t</code></a> which tests whether a file handle is attached to a terminal. For example:</p>\n\n<pre><code>if (-t STDIN) {\n  print \"Running with a terminal as input.\"\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1601261921, "last_edit_date": 1601261921, "creation_date": 1541281184, "answer_id": 53135750, "question_id": 53133604, "link": "https://stackoverflow.com/questions/53133604/can-i-detect-if-a-perl-script-is-being-run-from-a-terminal-for-sure/53135750#53135750", "title": "Can I detect if a Perl script is being run from a terminal for sure?", "body": "<p>The device file <code>/dev/tty</code> represents the controlling terminal for the process. If your process isn't attached to a terminal (is a daemon, runs out of <code>cron</code>/<code>at</code>, etc) then it can't &quot;open&quot; this special device.  So</p>\n<pre><code>sub isatty {\n    no autodie;\n    return open(my $tty, '+&lt;', '/dev/tty');\n}\n</code></pre>\n<p>The <code>/dev/tty</code> can represent a virtual console device (<code>/dev/ttyN</code>), pty (<code>xterm</code>, <code>ssh</code>), serial port (COM1), etc, and is not affected by redirections, so this should be reliable.</p>\n<p>If this runs very often perhaps use this version</p>\n<pre><code>use feature qw(state);\n\nsub isatty { \n    no autodie; \n    state $isatty = open(my $tty, '+&lt;', '/dev/tty'); \n    return $isatty;\n}\n</code></pre>\n<p>which should be more efficient (over an order of magnitude in my simple benchmark).</p>\n<p>These only work on Unix-y systems (or in an POSIX application running on top of Windows, or in Window's POSIX subsystem).</p>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1541299920, "post_id": 53137337, "comment_id": 93167660, "body": "The overall purpose of this heuristic being pretty straightforward: can I output a prompt and expect the user to be able to respond to it."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1541299970, "post_id": 53137337, "comment_id": 93167666, "body": "Yes, and in fact this is precisely why ExtUtils::MakeMaker puts this test in its <code>prompt</code> function. A similar test is also embedded within <code>IO::Prompt::Tiny</code>."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1541300075, "post_id": 53137337, "comment_id": 93167676, "body": "Actually that last statement is not true: IO::Prompt::Tiny uses logic borrowed from IO::Interactive::Tiny. I&#39;ll update my answer with that as an alternative."}], "tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": false, "score": 4, "last_activity_date": 1541300542, "last_edit_date": 1541300542, "creation_date": 1541299751, "answer_id": 53137337, "question_id": 53133604, "link": "https://stackoverflow.com/questions/53133604/can-i-detect-if-a-perl-script-is-being-run-from-a-terminal-for-sure/53137337#53137337", "title": "Can I detect if a Perl script is being run from a terminal for sure?", "body": "<p>This is taken directly from the source code of ExtUtils::MakeMaker's <code>prompt</code> function.  It's possible, I suppose, that someone could go to lengths to trick it. But at some point the breakage must be owned by the breaker.</p>\n\n<p>For most purposes this ought to be adequate:</p>\n\n<pre><code> my $isa_tty = -t STDIN &amp;&amp; (-t STDOUT || !(-f STDOUT || -c STDOUT)) ;\n</code></pre>\n\n<p>First it checks if STDIN is opened to a TTY. If so, check if STDOUT is.  If STDOUT is not, it must also neither be opened to a file nor a character special file.</p>\n\n<p>Update:</p>\n\n<p>IO::Prompt::Tiny uses the following:</p>\n\n<pre><code># Copied (without comments) from IO::Interactive::Tiny by Daniel Muey,\n# based on IO::Interactive by Damian Conway and brian d foy\n\nsub _is_interactive {\n    my ($out_handle) = ( @_, select );\n    return 0 if not -t $out_handle;\n    if ( tied(*ARGV) or defined( fileno(ARGV) ) ) {\n        return -t *STDIN if defined $ARGV &amp;&amp; $ARGV eq '-';\n        return @ARGV &gt; 0 &amp;&amp; $ARGV[0] eq '-' &amp;&amp; -t *STDIN if eof *ARGV;\n        return -t *ARGV;\n    }\n    else {\n        return -t *STDIN;\n    }\n}\n</code></pre>\n\n<p>And IO::Interactive::Tiny adds comments to explain what's going on:</p>\n\n<pre><code>sub is_interactive {\n    my ($out_handle) = (@_, select);    # Default to default output handle\n\n    # Not interactive if output is not to terminal...\n    return 0 if not -t $out_handle;\n\n    # If *ARGV is opened, we're interactive if...\n    if ( tied(*ARGV) or defined(fileno(ARGV)) ) { # IO::Interactive::Tiny: this is the only relavent part of Scalar::Util::openhandle() for 'openhandle *ARGV'\n        # ...it's currently opened to the magic '-' file\n        return -t *STDIN if defined $ARGV &amp;&amp; $ARGV eq '-';\n\n        # ...it's at end-of-file and the next file is the magic '-' file\n        return @ARGV&gt;0 &amp;&amp; $ARGV[0] eq '-' &amp;&amp; -t *STDIN if eof *ARGV;\n\n        # ...it's directly attached to the terminal \n        return -t *ARGV;\n    }\n\n    # If *ARGV isn't opened, it will be interactive if *STDIN is attached \n    # to a terminal.\n    else {\n        return -t *STDIN;\n    }\n}\n</code></pre>\n\n<p>And I've verified that the logic in IO::Interactive mirrors that of IO::Interactive::Tiny.  So, if your goal is to prompt where appropriate, consider using IO::Prompt::Tiny.  And if your needs are more nuanced than IO::Prompt::Tiny supports, you can use IO::Interactive::Tiny to provide this specific functionality.</p>\n\n<p>While you're probably mostly safe using your own solution, an advantage to using one of these CPAN modules is that they are presumably actively maintained and would receive but reports and eventual updates if they turn out to be inadequate to their advertised purpose.</p>\n"}], "owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 1, "accepted_answer_id": 53133879, "answer_count": 3, "score": 2, "last_activity_date": 1601261921, "creation_date": 1541264814, "question_id": 53133604, "link": "https://stackoverflow.com/questions/53133604/can-i-detect-if-a-perl-script-is-being-run-from-a-terminal-for-sure", "title": "Can I detect if a Perl script is being run from a terminal for sure?", "body": "<p>Can I detect if a Perl script is being run from a terminal for sure?</p>\n\n<p>I'd rather default to assume that it's been run from a browser if I'm not sure.  But if there's a way to be sure that it has 100% been run from a terminal I would be happy (for debugging purposes).</p>\n\n<p>Many thanks</p>\n"}, {"tags": ["perl", "web-scraping"], "answers": [{"comments": [{"owner": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "edited": false, "score": 0, "creation_date": 1541206212, "post_id": 53127328, "comment_id": 93149422, "body": "I googled my hiney off before resorting to posting a question. The documentation (such that it was) melted my brain. I don&#39;t totally understand the requirements of the <code>scraper</code> call, and I understand your code even less. But it certainly does <i>exactly</i> what I want. Thanks!"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "edited": false, "score": 0, "creation_date": 1541207884, "post_id": 53127328, "comment_id": 93149654, "body": "@TimothyB. I added some details about what the code does (hope it helps). Also, feel free to <a href=\"https://stackoverflow.com/help/someone-answers\">accept my answer</a> if it solves your problem."}, {"owner": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "edited": false, "score": 0, "creation_date": 1541265743, "post_id": 53127328, "comment_id": 93160761, "body": "Thank you for the extra explanation. I&#39;d never heard of a stash before. Using Data::Dumper I was able glean without true understanding of how to access the information that was returned. This was very helpful!"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 4, "last_activity_date": 1541207790, "last_edit_date": 1541207790, "creation_date": 1541204929, "answer_id": 53127328, "question_id": 53127103, "link": "https://stackoverflow.com/questions/53127103/using-webscraper-to-pull-html-tags-with-a-data-marker/53127328#53127328", "title": "Using Web::Scraper to pull HTML tags with a data marker", "body": "<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Web::Scraper;\nuse HTML::Entities;\n\nmy $html = do { local $/; &lt;DATA&gt; };\n\nmy $s = scraper {\n    process '[data-reader]', 'list[]' =&gt; {\n        tag     =&gt; sub { $_-&gt;tag },\n        content =&gt; 'TEXT',\n    };\n    result 'list';\n};\n\nmy $results = $s-&gt;scrape($html);\n\nfor my $part (@$results) {\n    print \"&lt;$part-&gt;{tag}&gt;\" . encode_entities($part-&gt;{content}) . \"&lt;/$part-&gt;{tag}&gt;\\n\";\n}\n\n__DATA__\n&lt;h1 data-reader=\"on\"&gt;Hello &lt;em&gt;world&lt;/em&gt;&lt;/h1&gt;\n&lt;h2&gt;This is subheading&lt;/h2&gt;\n&lt;h3 style=\"color:#000;\" data-reader=\"on\" class=\"phead\"&gt;Paragraph Heading&lt;/h3&gt;\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&lt;h1&gt;Hello world&lt;/h1&gt;\n&lt;h3&gt;Paragraph Heading&lt;/h3&gt;\n</code></pre>\n\n<p>The ability to pass a raw subroutine as the extractor specification seems to be undocumented, but</p>\n\n<ol>\n<li>the <a href=\"https://metacpan.org/pod/release/MIYAGAWA/Web-Scraper-0.38/lib/Web/Scraper.pm\" rel=\"nofollow noreferrer\">Web::Scraper documentation</a> is spotty in general, and</li>\n<li>it's used in <a href=\"https://metacpan.org/source/MIYAGAWA/Web-Scraper-0.38/eg/dave-trailer-HD.pl#L17\" rel=\"nofollow noreferrer\">at least one example</a>,</li>\n</ol>\n\n<p>so I don't feel too bad about using it.</p>\n\n<p>I'm re-encoding <code>$part-&gt;{content}</code> as HTML to avoid issues in case someone does e.g.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div data-reader=\"on\"&gt;&amp;lt;script&amp;gt;alert(42)&amp;lt;/script&amp;gt;&lt;/div&gt;\n</code></pre>\n\n<p>If you were to just print <code>$part-&gt;{content}</code>, it would give you <code>&lt;script&gt;alert(42)&lt;/script&gt;</code>, which is probably not what you want.</p>\n\n<hr>\n\n<p>In detail:</p>\n\n<pre><code>my $s = scraper {\n    process '[data-reader]', 'list[]' =&gt; {\n        tag     =&gt; sub { $_-&gt;tag },\n        content =&gt; 'TEXT',\n    };\n    result 'list';\n};\n</code></pre>\n\n<p><code>scraper</code> takes a block of code and wraps it in an object. Every time the <code>scrape</code> method of this object is called, the block of code is run. In theory you can do anything you want there, but the only sensible things are calls to <code>process</code> and <code>result</code>.</p>\n\n<p><code>process</code> takes three (or more) arguments. The first argument is a CSS (or XPath if it starts with <code>//</code> or <code>id(</code>) selector. In this case (<code>[data-reader]</code>) we're selecting all elements that have a <code>data-reader</code> attribute.</p>\n\n<p>The remaining arguments are key/value pairs. <code>scraper</code> provides an implicit context (also known as \"stash\"), which is simply a hash were results are placed. The \"key\" argument specifies under which hash key the results of the extraction should be placed. If the \"key\" argument ends with <code>[]</code>, it is stripped and the value is not a single result, but a reference to an array of results.</p>\n\n<p>Here we use <code>list[]</code> as the \"key\" argument, which means that we're accumulating results under the <code>list</code> key of the stash.</p>\n\n<p>The \"value\" argument specifies what value we want to store under our key. Possible values include <code>TEXT</code> (the text value of a node) and <code>@foo</code> (the value of the <code>foo</code> attribute of the element in question).</p>\n\n<p>Here we're using a hash reference, which means we want to construct a nested subhash. Each key/value pair of our hash is interpreted as described above. We get entries for <code>tag</code> (containing the tag name as returned by <a href=\"https://metacpan.org/pod/HTML::Element#tag\" rel=\"nofollow noreferrer\">the <code>tag</code> method</a>) and <code>content</code> (containing the text value of our element).</p>\n\n<p>The effect is as if <code>scrape</code> contained the following loop:</p>\n\n<pre><code>my %stash;\nfor my $node (@found_nodes) {\n    push @{$stash{list}}, {\n        tag     =&gt; $node-&gt;tag,\n        content =&gt; get_plain_text_somehow($node),\n    };\n}\n</code></pre>\n\n<p>Normally <code>scrape</code> returns the stash, but if the scrape block contains <code>result</code> (which must be the last statement in the block), you can make it return just a single key (or if you pass multiple strings to <code>result</code>, a hash containing just a subset of keys). That is, because of <code>result 'list'</code>, instead of</p>\n\n<pre><code>return \\%stash;\n</code></pre>\n\n<p>we effectively get</p>\n\n<pre><code>return $stash{list};\n</code></pre>\n"}], "owner": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 53127328, "answer_count": 1, "score": 2, "last_activity_date": 1541207790, "creation_date": 1541202592, "last_edit_date": 1541205043, "question_id": 53127103, "link": "https://stackoverflow.com/questions/53127103/using-webscraper-to-pull-html-tags-with-a-data-marker", "title": "Using Web::Scraper to pull HTML tags with a data marker", "body": "<p>The purpose of this code is to parse an HTML file and return content that is wrapped with tags that have the <code>data-reader</code> attribute.</p>\n\n<p>This works as desired, but I would also like to get the associated HTML tag, but I don't know how to have it returned in the scrape data.</p>\n\n<p>Is this possible?</p>\n\n<pre><code>#!/usr/bin/perl -T\n\nuse strict;\nuse warnings;\n\nuse Web::Scraper;\n\nmy $html = do { local $/; &lt;DATA&gt; };\n\nmy $s = scraper {\n  process '*', 'links[]' =&gt; '@data-reader';\n  process '*', 'content[]' =&gt; 'text';\n};\n\nmy $res = $s-&gt;scrape($html);\n\nfor my $i (0 .. @{ $res-&gt;{links} } ) {\n  if ($res-&gt;{links}[$i]) {\n    print \"&lt;??&gt;$res-&gt;{content}[$i]&lt;/??&gt;\\n\";\n  }\n}\nexit;\n\n__DATA__\n&lt;h1 data-reader=\"on\"&gt;Hello &lt;em&gt;world&lt;/em&gt;&lt;/h1&gt;\n&lt;h2&gt;This is subheading&lt;/h2&gt;\n&lt;h3 style=\"color:#000;\" data-reader=\"on\" class=\"phead\"&gt;Paragraph Heading&lt;/h3&gt;\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&lt;??&gt;Hello world&lt;/??&gt;\n&lt;??&gt;Paragraph Heading&lt;/??&gt;\n</code></pre>\n"}, {"tags": ["multithreading", "sqlite", "perl"], "comments": [{"owner": {"reputation": 1530, "user_id": 319296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898a9ad7ccedbe97f1febba2a9a377c8?s=128&d=identicon&r=PG", "display_name": "imran", "link": "https://stackoverflow.com/users/319296/imran"}, "edited": false, "score": 2, "creation_date": 1541189151, "post_id": 53124947, "comment_id": 93145068, "body": "Why don&#39;t you print out $updateRow and see what it is actually trying to execute in the database?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 6, "creation_date": 1541189262, "post_id": 53124947, "comment_id": 93145105, "body": "I see 1) a shell injection bug, 2) an SQL injection bug, 3) use of an experimental feature with a broken design, 4) an <code>if</code> condition will never be true (<code>$executeRowUpdate &lt; 0</code>), 5) use of 2-arg <code>open</code>, 6) O(N^2) code that could be made O(N), 7) needless use of global variables, 8) needless assignments of empty lists to empty arrays, and 9) a <code>while</code> loop that can be eliminated by using <code>&lt;&gt;</code> in list context. You should have this code <a href=\"https://codereview.stackexchange.com/\">reviewed</a>!"}, {"owner": {"reputation": 1901, "user_id": 2002471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/222d816f24fcb2d01e92937b6af01d34?s=128&d=identicon&r=PG", "display_name": "chicks", "link": "https://stackoverflow.com/users/2002471/chicks"}, "edited": false, "score": 1, "creation_date": 1541200797, "post_id": 53124947, "comment_id": 93148527, "body": "<a href=\"https://codereview.stackexchange.com/questions/206838/pastebin-scraper-based-on-user-regex\" title=\"pastebin scraper based on user regex\">codereview.stackexchange.com/questions/206838/&hellip;</a> is the attempt at code review.  Broken code should not be sent there."}], "answers": [{"tags": [], "owner": {"reputation": 1901, "user_id": 2002471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/222d816f24fcb2d01e92937b6af01d34?s=128&d=identicon&r=PG", "display_name": "chicks", "link": "https://stackoverflow.com/users/2002471/chicks"}, "is_accepted": false, "score": 1, "last_activity_date": 1541200982, "creation_date": 1541200982, "answer_id": 53126915, "question_id": 53124947, "link": "https://stackoverflow.com/questions/53124947/perl-dbdsqlitedb-do-failed-syntax-error/53126915#53126915", "title": "Perl DBD::SQLite::db do failed: syntax error", "body": "<p>You need to log the <code>$updateRow</code> that is generated and then look at that and see what is wrong with it.  Without that nobody knows.</p>\n\n<p>The other issues ikegami notes in a comment above probably deserve new questions focused on their individual aspects.  As you've discovered <a href=\"https://codereview.stackexchange.com/\">https://codereview.stackexchange.com/</a> is not for code with errors.  But given all of the injection issues it might be time to try <a href=\"https://security.stackexchange.com/\">https://security.stackexchange.com/</a></p>\n\n<p>If you fix those problems maybe your error will disappear too.  Or not, but it is worth trying.</p>\n"}], "owner": {"reputation": 672, "user_id": 1421248, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/023634de21a47ccbe4c0329059196d34?s=128&d=identicon&r=PG", "display_name": "falconspy", "link": "https://stackoverflow.com/users/1421248/falconspy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541200982, "creation_date": 1541187815, "question_id": 53124947, "link": "https://stackoverflow.com/questions/53124947/perl-dbdsqlitedb-do-failed-syntax-error", "title": "Perl DBD::SQLite::db do failed: syntax error", "body": "<p>I am developing a Perl script to query the PasteBin API using threads and DBD::SQLite to store information for later.</p>\n\n<p>Upon running my script I get the following error: </p>\n\n<p><code>DBD::SQLite::db do failed: near \"day\": syntax error at getpaste.pl line 113.</code><br>\n                                                                                                                                                               <code>Thread 3 terminated abnormally: DBD::SQLite::db do failed: near \"day\": syntax error at getpaste.pl line 113.</code></p>\n\n<p>Using my code to debug here's what I see in <code>thread 3</code>:</p>\n\n<pre><code>enum _Days {\n  Monday,\n  Tuesday,\n  Wednesday,\n  Thursday,\n  Friday,\n  Saturday,\n  Sunday\n}\n\nclass HeadingItem implements ListItem {\n  String _weekday;\n  final int time;\n  final DocumentReference reference;\n\n  set day(String weekday) {\n    var value = _Days.values[int.parse(weekday) - 1].toString();\n    var idx = value.indexOf(\".\") + 1;\n    var result = value.substring(idx, value.length);\n    _weekday = result;\n  }\n\n  String get day {\n    return _weekday;\n  }\n\n  HeadingItem.fromMap(Map&lt;String, dynamic&gt; map, {this.reference})\n      : assert(map['day'] != null),\n        assert(map['time'] != null),\n        day = map['day'], // 'day' isn't a field in the enclosing class  &lt;--- this is the error that im stuck on...\n        time = map['time'];\n\n  HeadingItem.fromSnapshot(DocumentSnapshot snapshot) : this.fromMap(snapshot.data, reference: snapshot.reference);\n}\n</code></pre>\n\n<p>If I had to make an educated guess it bombs out at <code>String get day {</code></p>\n\n<p>Here's a chunk of my code where this is relevant:</p>\n\n<pre><code>sub threadCheckKey {\n    my ($url, $key) = @_;\n    my $fullURL = $url.$key;\n    my @flaggedRegex = ();\n    my $date = strftime \"%D\", localtime;\n    my @data = ();\n\n    my $thread = threads-&gt;create(sub {\n        my $dbConnection = openDB();\n        open(GET_DATA, \"curl -s \" . $fullURL . \" -k 2&gt;&amp;1 |\") or die(\"$!\");\n        open(WRITE_FILE, \"&gt;\", $key . \".txt\") or die(\"$!\");\n        while(my $line = &lt;GET_DATA&gt;) {\n            print WRITE_FILE $line;\n            foreach my $regex(@regexs) {\n                if($line =~ m/$regex/) {\n                    if(!($regex ~~ @flaggedRegex)) {\n                        push(@flaggedRegex, $regex);\n                    }\n                }\n            }\n        }\n        close(WRITE_FILE);\n        close(GET_DATA);\n\n\n        open(READ_FILE, $key . \".txt\") or die(\"$!\");\n        while(my $line = &lt;READ_FILE&gt;) {\n            push(@data, $line);\n        }\n        close(READ_FILE);\n\n        my $updateRow = qq(UPDATE $tables[0] set data = \\'@data\\', date = \\'$date\\', regex = \\'@flaggedRegex\\' where pastekey = \\'$key\\');\n        my $executeRowUpdate = $dbConnection-&gt;do($updateRow);\n\n        if($executeRowUpdate &lt; 0) {\n            print $DBI::errstr;\n        }\n</code></pre>\n\n<p>Line 113 in this case is <code>my $executeRowUpdate = $dbConnection-&gt;do($updateRow);</code> Knowing Perl it's really complaining about my UPDATE statement just above it.</p>\n\n<p>Where am I going wrong with this? I am a novice when it comes to interacting with anything sql related.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 2, "creation_date": 1541184689, "post_id": 53124257, "comment_id": 93143295, "body": "Neither of your one-liners actually runs, can you post the actual code you&#39;re trying to debug?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541200050, "post_id": 53124257, "comment_id": 93148381, "body": "Please don&#39;t remove the error you&#39;re asking about from the question! Reverted the edit"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 8709996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d877b22a141469646623901e1197792d?s=128&d=identicon&r=PG&f=1", "display_name": "user8709996", "link": "https://stackoverflow.com/users/8709996/user8709996"}, "edited": false, "score": 0, "creation_date": 1541186357, "post_id": 53124461, "comment_id": 93143976, "body": "Thanks. The variable name was my mistake. I see your point. How do I make sure in $test (which i get from another script) @ is treated as @ and not an array"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 29, "user_id": 8709996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d877b22a141469646623901e1197792d?s=128&d=identicon&r=PG&f=1", "display_name": "user8709996", "link": "https://stackoverflow.com/users/8709996/user8709996"}, "edited": false, "score": 1, "creation_date": 1541186920, "post_id": 53124461, "comment_id": 93144179, "body": "@user8709996 Variables are only interpolated like this when you define the string in your script with double quotes or qq, it wouldn&#39;t occur if you read it from somewhere else."}, {"owner": {"reputation": 2351, "user_id": 10533011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13cf679869635f63c1d842fa24604a02?s=128&d=identicon&r=PG&f=1", "display_name": "Donat", "link": "https://stackoverflow.com/users/10533011/donat"}, "edited": false, "score": 1, "creation_date": 1541186964, "post_id": 53124461, "comment_id": 93144192, "body": "This is only a problem for literal strings in double quotes. When you have the varibale $test assigned with the correct value, you need not mask the @ in the variable&#39;s value."}, {"owner": {"reputation": 29, "user_id": 8709996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d877b22a141469646623901e1197792d?s=128&d=identicon&r=PG&f=1", "display_name": "user8709996", "link": "https://stackoverflow.com/users/8709996/user8709996"}, "edited": false, "score": 0, "creation_date": 1541192011, "post_id": 53124461, "comment_id": 93146128, "body": "Thanks. Makes sense. Appreciate your response."}], "tags": [], "owner": {"reputation": 2351, "user_id": 10533011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13cf679869635f63c1d842fa24604a02?s=128&d=identicon&r=PG&f=1", "display_name": "Donat", "link": "https://stackoverflow.com/users/10533011/donat"}, "is_accepted": false, "score": 3, "last_activity_date": 1541185480, "creation_date": 1541185480, "answer_id": 53124461, "question_id": 53124257, "link": "https://stackoverflow.com/questions/53124257/perl-basic-perl-regex-parsing-for-wordword/53124461#53124461", "title": "Perl: basic perl regex parsing for word@word", "body": "<p>There are two problems in the command line:</p>\n\n<p>You assign variable $aa but do pattern matching on variable $kk.</p>\n\n<p>The second is that @abcd is being interpreted as a variable in the string delimited by \"...\". The variable @abcd is not defined, so it interpolates to an empty string, and in effect you have $aa = \"abcd\".</p>\n\n<p>You can see the problem with @ when you type this:</p>\n\n<pre><code>perl -e 'my $aa = \"abcd@abcd\"; print \"$aa\\n\"'\n</code></pre>\n\n<p>You have to mask the @. So try this instead:</p>\n\n<pre><code>perl -e 'my $aa = \"abcd\\@abcd\"; if ($aa =~ /(\\w+)@(\\w+)/ ) {print \"\\n $1 \\n $2 \\n\";}'\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 8709996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d877b22a141469646623901e1197792d?s=128&d=identicon&r=PG&f=1", "display_name": "user8709996", "link": "https://stackoverflow.com/users/8709996/user8709996"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1541200019, "creation_date": 1541184396, "last_edit_date": 1541200019, "question_id": 53124257, "link": "https://stackoverflow.com/questions/53124257/perl-basic-perl-regex-parsing-for-wordword", "title": "Perl: basic perl regex parsing for word@word", "body": "<p>I get an input to my script (from another script) in this format \nxyz@abc</p>\n\n<p>I have this matching condition in my script </p>\n\n<pre><code> if ($test =~ /.* by (\\w+)\\@(\\w).*/) { print $1; }\n</code></pre>\n\n<p>This one does not have a match for some reason. </p>\n\n<p>I tried this one command line:</p>\n\n<p>option 1:</p>\n\n<pre><code>perl -e 'my $aa = \"abcd@abcd\" ; if ($kk =~ /(\\w+)\\@(\\w+)/) {print \"\\n  $1 \\n $2 \\n\";}\n</code></pre>\n\n<p>option 2:</p>\n\n<pre><code>perl -e 'my $aa = q[abcd@abcd] ; if ($kk =~ /(\\w+)@(\\w+)/) {print \"\\n  $1 \\n $2 \\n\";}\n</code></pre>\n\n<p>option 2 prints but not option 1. Could someone pls explain the reasoning.</p>\n"}, {"tags": ["perl", "environment-variables"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1541174131, "post_id": 53121864, "comment_id": 93138313, "body": "What is the exact error message?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1541174188, "post_id": 53121864, "comment_id": 93138350, "body": "And if they aren&#39;t known ahead of time: <code>no strict &#39;vars&#39;;use Env;</code>"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1541174200, "post_id": 53121864, "comment_id": 93138355, "body": "What is that call to <code>chmod</code> for? The first parameter should be the new permissions"}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1541174411, "post_id": 53121864, "comment_id": 93138457, "body": "Thanks for the comments. I don&#39;t know the paths. user gives a file and I extract the paths from it, into an array. And even though this path to a dir contains <code>abc</code>, the check <code>(-e $file)</code> will return false, because it just (for some reason) copies the string without using the env."}, {"owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "edited": false, "score": 1, "creation_date": 1541196450, "post_id": 53121864, "comment_id": 93147460, "body": "Did you mean to use <code>chomp</code> (<a href=\"http://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow noreferrer\">perldoc</a>) instead of <code>chmod</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1541176245, "post_id": 53122129, "comment_id": 93139464, "body": "Thanks for the answer. This regex won&#39;t work for <code>$SOME_ENV</code> (only for a string with <code>A-Z</code> letters). Also, will it work, if the env is located in the middle/end of the string?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1541176942, "post_id": 53122129, "comment_id": 93139840, "body": "You can simply add _ inside the character class so it becomes <code>[A-Z_]</code>. The regex is not anchored so it will work anywhere in the string."}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1541177241, "post_id": 53122129, "comment_id": 93139998, "body": "@Grinnz sure but what if user has numbers or any other symbol which is not in the <code>[A-Z]</code> range?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1541177355, "post_id": 53122129, "comment_id": 93140057, "body": "@TTaJTa4 <code>[A-Z0-9_]</code> will cover digits as well. See <a href=\"https://perldoc.pl/perlrecharclass#Bracketed-Character-Classes\" rel=\"nofollow noreferrer\">perlrecharclass</a> for more on how character classes work."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1541177437, "post_id": 53122129, "comment_id": 93140100, "body": "Also the /e modifier is not necessary, since <code>$ENV{$1}</code> will interpolate fine on its own."}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1541178688, "post_id": 53122129, "comment_id": 93140745, "body": "I think that <code>$dir =~ s&#47;\\$(\\S+?)(\\&#47;|$)&#47;$ENV{$1}$2&#47;g;</code> is a better solution. it will handle any symbol until the first <code>&#47;</code> or the end of the line. What do you think?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1541180946, "post_id": 53122129, "comment_id": 93141726, "body": "@TTaJTa4 <code>s&#47;\\$([^\\s&#47;]+)&#47;$ENV{$1}&#47;g</code> is a simpler way to achieve that without backtracking. Read as many non-space non-slash characters as follow the <code>$</code>."}, {"owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "edited": false, "score": 1, "creation_date": 1541205379, "post_id": 53122129, "comment_id": 93149290, "body": "See related <a href=\"https://stackoverflow.com/questions/2821043/allowed-characters-in-linux-environment-variable-names\" title=\"allowed characters in linux environment variable names\">stackoverflow.com/questions/2821043/&hellip;</a>, if you&#39;re curious why [A-Z0-9_] should be sufficient as a character class vs more permissive negated character classes."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 6, "last_activity_date": 1541179691, "last_edit_date": 1541179691, "creation_date": 1541174838, "answer_id": 53122129, "question_id": 53121864, "link": "https://stackoverflow.com/questions/53121864/perl-script-does-not-recognize-paths-which-contains-environment-variables/53122129#53122129", "title": "Perl script does not recognize paths which contains environment variables", "body": "<p>There is nothing in your code evaluating <code>$dir</code> for environment variables inside of it, so you'd need to add that. A very simplistic way could be done like this - using a regular expression to find the variables and then replacing them with their values in the <code>%ENV</code> hash.</p>\n\n<pre><code>$dir =~ s/\\$([A-Z0-9_]*)/$ENV{$1}/g;\n</code></pre>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541179691, "creation_date": 1541173945, "question_id": 53121864, "link": "https://stackoverflow.com/questions/53121864/perl-script-does-not-recognize-paths-which-contains-environment-variables", "title": "Perl script does not recognize paths which contains environment variables", "body": "<p>I got a file with a path on each line. I insert those lines into an array <code>@dirs</code>. Some of the paths include environment variables. An example of a valid file with paths:</p>\n\n<pre><code>/some/valid/path\n$HOME/dir\n$SOME_ENV/dir\n</code></pre>\n\n<p>Each path, I would like to check if it contains a file called <code>abc</code>. So I use:</p>\n\n<pre><code>foreach my $dir (@dirs) {\n   chmod($dir);\n   my $file = $dir.\"/\".\"abc\";\n   print \"invalid dir: $dir\" unless((-e $file) &amp;&amp; (-s $file));\n}\n</code></pre>\n\n<p>But, for some reason, it does not recognize the environment variables, meaning it fails even though <code>$SOME_ENV/dir</code> contains the <code>abc</code> file.</p>\n\n<p>Also, the script does recognize those environment variables, if I use it as following:</p>\n\n<pre><code>print $ENV{SOME_ENV}.\"\\n\";\nprint $ENV{HOME}.\"\\n\";\n</code></pre>\n\n<p>Furthermore, I tried to use the <code>abs_path</code> of the <code>Cwd</code> module, in order to get the real path of the path (so it won't include the environment variable), but it also, does not recognize the environment variable.</p>\n\n<p>why <code>(-e $file)</code> does not recognize the environment variable? How can I solve this issue?</p>\n"}, {"tags": ["perl", "google-cloud-platform", "serverless"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1541169342, "post_id": 53119565, "comment_id": 93135519, "body": "When you say serverless, do you mean your software runs in some kind of cloud where you don&#39;t manage anything about it, or do you mean it runs on a client computer?"}, {"owner": {"reputation": 31, "user_id": 7655462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c30315250ab67f26501b6f223bab86e?s=128&d=identicon&r=PG&f=1", "display_name": "TrypanosomaBruceii", "link": "https://stackoverflow.com/users/7655462/trypanosomabruceii"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1541188661, "post_id": 53119565, "comment_id": 93144887, "body": "I mean that it would be an effectively static web application that the user provides the raw data file to, at which point it would be processed entirely by (presumably Lambda or Cloud Functions) followed by Google Genomics, BigQuery, and the processed result would be returned to the client javascript application for display, all without an actual provisioned VM anywhere along the way."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1541194975, "post_id": 53119565, "comment_id": 93147064, "body": "<a href=\"https://stackoverflow.com/questions/50396562/perl-script-in-amazon-web-services-lambda-functions\" title=\"perl script in amazon web services lambda functions\">stackoverflow.com/questions/50396562/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7655462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c30315250ab67f26501b6f223bab86e?s=128&d=identicon&r=PG&f=1", "display_name": "TrypanosomaBruceii", "link": "https://stackoverflow.com/users/7655462/trypanosomabruceii"}, "edited": false, "score": 0, "creation_date": 1541189066, "post_id": 53120745, "comment_id": 93145044, "body": "Yeah, that definitely seems pretty nontrivial. Ended up just finding a friend who&#39;s had enough exposure to perl from grad school and having him help me translate the script into python. Around which point I found out there&#39;s apparently a straight transpiler out there somewhere, which I should have assumed from the start.   Thanks so much for answering my question in any case."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1541170003, "creation_date": 1541170003, "answer_id": 53120745, "question_id": 53119565, "link": "https://stackoverflow.com/questions/53119565/serverless-execution-of-a-perl-script/53120745#53120745", "title": "Serverless execution of a perl script?", "body": "<p>This will be nontrivial even if you do know the basic syntax of Perl. One way that <a href=\"https://cloud.google.com/blog/products/gcp/your-favorite-languages-now-on-google-app-engine\" rel=\"nofollow noreferrer\">the Google Cloud supports Perl</a> is to run <a href=\"https://github.com/GoogleCloudPlatform/appengine-custom-runtimes-samples/tree/master/perl\" rel=\"nofollow noreferrer\">a Mojolicious app inside a Perl Docker container</a>. On your end, you would need to wrap your Perl script in a <a href=\"http://mojolicio.us\" rel=\"nofollow noreferrer\">Mojolicious</a> application that would be deployed to the cloud.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 7655462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c30315250ab67f26501b6f223bab86e?s=128&d=identicon&r=PG&f=1", "display_name": "TrypanosomaBruceii", "link": "https://stackoverflow.com/users/7655462/trypanosomabruceii"}, "edited": false, "score": 0, "creation_date": 1541188924, "post_id": 53121494, "comment_id": 93144984, "body": "Thank you - in part because I&#39;d never really heard of Emscripten and that definitely looks interesting, in part because &#39;rewrite or transpile the perl script in/to a different, supported language&#39; ultimately proved to be the right answer, or at least, the one I got working this afternoon."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1541192415, "post_id": 53121494, "comment_id": 93146267, "body": "emscripten doesn&#39;t look like a perl-to-javascript converter. It looks like it ported the perl interpreter into LLVM and then JavaScript. It&#39;s not translating the Perl code into JavaScript so much as executing the Perl code with a Perl interpreter written in JavaScript."}, {"owner": {"reputation": 31763, "user_id": 865038, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WR8mz.jpg?s=128&g=1", "display_name": "mihai", "link": "https://stackoverflow.com/users/865038/mihai"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1541192910, "post_id": 53121494, "comment_id": 93146429, "body": "@mob, that&#39;s totally correct...not sure how I missed that. I&#39;ll update the answer."}], "tags": [], "owner": {"reputation": 31763, "user_id": 865038, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WR8mz.jpg?s=128&g=1", "display_name": "mihai", "link": "https://stackoverflow.com/users/865038/mihai"}, "is_accepted": false, "score": 0, "last_activity_date": 1541193116, "last_edit_date": 1541193116, "creation_date": 1541172549, "answer_id": 53121494, "question_id": 53119565, "link": "https://stackoverflow.com/questions/53119565/serverless-execution-of-a-perl-script/53121494#53121494", "title": "Serverless execution of a perl script?", "body": "<p>You could try to convert the perl code to javascript using <a href=\"https://github.com/kripken/emscripten\" rel=\"nofollow noreferrer\">emscripten</a> and run it with <a href=\"https://cloud.google.com/functions/\" rel=\"nofollow noreferrer\">Cloud Functions</a>.</p>\n\n<p>There are some online tools that allow you to run perl through an interpreter created with emscripten, running javascript. You can try them out by pasting some perl code in the browser:</p>\n\n<p><a href=\"https://www.shlomifish.org/microperl-web-repl-v1/repl.html\" rel=\"nofollow noreferrer\">https://www.shlomifish.org/microperl-web-repl-v1/repl.html</a><br>\n<a href=\"https://gfx.github.io/perl.js/\" rel=\"nofollow noreferrer\">https://gfx.github.io/perl.js/</a></p>\n\n<p>This is probably not an easy task to accomplish if you have a large perl script, but could be a starting point.</p>\n"}, {"tags": [], "owner": {"reputation": 1158, "user_id": 2779629, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9OCH1xMxP2c/AAAAAAAAAAI/AAAAAAAAABc/ysbFYiQdY5k/photo.jpg?sz=128", "display_name": "Peter Scott", "link": "https://stackoverflow.com/users/2779629/peter-scott"}, "is_accepted": false, "score": 1, "last_activity_date": 1541211337, "creation_date": 1541211337, "answer_id": 53127809, "question_id": 53119565, "link": "https://stackoverflow.com/questions/53119565/serverless-execution-of-a-perl-script/53127809#53127809", "title": "Serverless execution of a perl script?", "body": "<p>Perl is supported in Google App Engine as described by the <a href=\"https://cloud.google.com/blog/products/gcp/your-favorite-languages-now-on-google-app-engine\" rel=\"nofollow noreferrer\">Google Cloud Blog</a></p>\n\n<p>There are examples around particularly for running Mojolicious applications such <a href=\"https://github.com/GoogleCloudPlatform/appengine-custom-runtimes-samples/tree/master/perl\" rel=\"nofollow noreferrer\">this Github Repo</a> but I guess it depends largely on how you want to architect your solution.</p>\n\n<p>Running your Perl application within a container may be the simplest approach.</p>\n"}], "owner": {"reputation": 31, "user_id": 7655462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c30315250ab67f26501b6f223bab86e?s=128&d=identicon&r=PG&f=1", "display_name": "TrypanosomaBruceii", "link": "https://stackoverflow.com/users/7655462/trypanosomabruceii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1541211337, "creation_date": 1541165634, "last_edit_date": 1541189739, "question_id": 53119565, "link": "https://stackoverflow.com/questions/53119565/serverless-execution-of-a-perl-script", "title": "Serverless execution of a perl script?", "body": "<p>so I'm trying to put together a pretty simple serverless application to learn the architecture better. It's a pretty basic thing - user uploads 23andme data, perl script converts the txt file into into vcf, that's uploaded to cloud storage, google genomics takes it from there and gives it to bigquery for annotation. Automating this into a pipeline would be pretty easy with a persistent vm, but I was hoping someone on here would know something obvious I'd just missed </p>\n\n<p>I've got a decent idea of how to automate <em>most</em> of this into an automatic pipeline, but the perl script seems to be a bit of a sticking point. Might be because perl is one of a handful of languages I don't even know the basic syntax of, but does anyone have any recommendations on how I could make this work, short of just rewriting the 23andme-vbf script in Python or scrapping the 'serverless' part of this idea, since automating all of this would be pretty trivial with a persistent vm but I was hoping it might be something obvious I'd just missed. </p>\n\n<p>It seems like other people have asked similar questions here in the past, but as of yet, I've been unable to find any of them with any answers.</p>\n"}, {"tags": ["c", "perl"], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1541170485, "post_id": 53118026, "comment_id": 93136276, "body": "Tezrig is on to something. I get identical output when I haven&#39;t even created a <code>libmylib.so</code> file. Another idea is to set your <code>LD_LIBRARY_PATH</code> environment so that it can find your <code>.so</code> file."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1541172152, "post_id": 53118026, "comment_id": 93137155, "body": "I tested this, and it works fine here (without having to set LD_LIBRARY_PATH)"}, {"owner": {"reputation": 109, "user_id": 6117378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b32Vj.jpg?s=128&g=1", "display_name": "guru", "link": "https://stackoverflow.com/users/6117378/guru"}, "edited": false, "score": 0, "creation_date": 1541412499, "post_id": 53118026, "comment_id": 93194687, "body": "Before raising the issue here, I experimented as well with <code>-L ...</code> and <code>LD_LIBRARY_PATH</code>. The real solution is: creating the shared lib <b>before</b> starting the Perl for the 1st time for the script with the inline code."}], "tags": [], "owner": {"reputation": 1571, "user_id": 2034218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607f22adeb07d267b740a5441eb36d6d?s=128&d=identicon&r=PG", "display_name": "Tezirg", "link": "https://stackoverflow.com/users/2034218/tezirg"}, "is_accepted": false, "score": 4, "last_activity_date": 1541159235, "creation_date": 1541159235, "answer_id": 53118026, "question_id": 53117515, "link": "https://stackoverflow.com/questions/53117515/calling-an-external-c-function-in-a-shared-lib-from-perl-with-inline-c-does-no/53118026#53118026", "title": "Calling an external C function (in a shared lib) from Perl with Inline/C does not work", "body": "<p>I think the lib is searched for but isn't found and therefore the symbols aren't loaded.</p>\n\n<p>From the documentation you may be able to provide the path to the library: \n<code>LIBS =&gt; '-L/your/lib/path -lyourlib';</code></p>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 6117378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b32Vj.jpg?s=128&g=1", "display_name": "guru", "link": "https://stackoverflow.com/users/6117378/guru"}, "is_accepted": true, "score": 1, "last_activity_date": 1541367225, "creation_date": 1541367225, "answer_id": 53145707, "question_id": 53117515, "link": "https://stackoverflow.com/questions/53117515/calling-an-external-c-function-in-a-shared-lib-from-perl-with-inline-c-does-no/53145707#53145707", "title": "Calling an external C function (in a shared lib) from Perl with Inline/C does not work", "body": "<p>I figured out what the problem is: The required shared lib must exist in the <strong>first run</strong> of <code>perl inline.pl</code> (when the connectors get compiled). If it is not there, later it is never search for:</p>\n\n<pre><code>$ perl inline.pl\nHello Hello World!\nHello 42!\n/usr/home/guru/Perl/_Inline/lib/auto/inline_pl_8196/inline_pl_8196.so: Undefined symbol \"sharedFun\"\n$ clang -shared -o libmylib.so mylib.c\n$ ls -l libmylib.so\n-rwxr-xr-x  1 guru  wheel  5546  4 nov.  22:23 libmylib.so\n$ perl inline.pl\nHello Hello World!\nHello 42!\n/usr/home/guru/Perl/_Inline/lib/auto/inline_pl_8196/inline_pl_8196.so: Undefined symbol \"sharedFun\"\n\n\n$ rm -r _Inline\n$ perl inline.pl\nHello Hello World!\nHello 42!\nfoobar\n</code></pre>\n\n<p>We can close this thread.</p>\n"}], "owner": {"reputation": 109, "user_id": 6117378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b32Vj.jpg?s=128&g=1", "display_name": "guru", "link": "https://stackoverflow.com/users/6117378/guru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 1, "accepted_answer_id": 53145707, "answer_count": 2, "score": 4, "last_activity_date": 1541367225, "creation_date": 1541157158, "question_id": 53117515, "link": "https://stackoverflow.com/questions/53117515/calling-an-external-c-function-in-a-shared-lib-from-perl-with-inline-c-does-no", "title": "Calling an external C function (in a shared lib) from Perl with Inline/C does not work", "body": "<p>The code is more or less stolen from the page of the author:\n<a href=\"https://metacpan.org/pod/distribution/Inline-C/lib/Inline/C/Cookbook.pod\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/distribution/Inline-C/lib/Inline/C/Cookbook.pod</a>\nbut does not give the expected results:</p>\n\n<pre><code>use Inline C =&gt; Config =&gt;\n           enable =&gt; autowrap =&gt;\n           LIBS =&gt; \"-lmylib \";\nuse Inline C =&gt; &lt;&lt;'END_OF_C_CODE';\n\nextern char *sharedFun(char *);\n\nvoid greet(char* name) {\n  printf(\"Hello %s!\\n\", name);\n}\n\n\nchar *func(char* name) {\n  static char mystr[1024];\n  char *p;\n\n  strcpy(mystr, \"string: \");\n  p = sharedFun(name);\n  strcpy(mystr, p);\n\n  return(mystr);\n}\n\nEND_OF_C_CODE\n\ngreet('Hello World');\ngreet(42);\n$p = func(\"foobar\");\nprint $p, \"\\n\";\n</code></pre>\n\n<p>The result of the execution is:</p>\n\n<pre><code>nm libmylib.so | grep shared\n000000000000056a T sharedFun\nfile libmylib.so\nlibmylib.so: ELF 64-bit LSB shared object, x86-64, version 1 (FreeBSD), dynamically linked, not stripped\n\n\n$ perl inline.pl\nHello Hello World!\nHello 42!\n/usr/home/guru/Perl/_Inline/lib/auto/inline_pl_9404/inline_pl_9404.so: Undefined symbol \"sharedFun\"\n</code></pre>\n\n<p>and I checked with <code>strace</code>: the shared lib <code>libmylib.so</code> is not searched for.\nWhy?</p>\n"}, {"tags": ["perl", "paypal-sandbox"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1541151520, "post_id": 53115993, "comment_id": 93126377, "body": "Are your credentials valid for the sandbox? According tot he <a href=\"https://metacpan.org/pod/Net::PayPal#GOING-LIVE\" rel=\"nofollow noreferrer\">documentation</a>, it goes to the sandbox by default and you need to switch it to <code>live</code> mode."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1541153105, "post_id": 53115993, "comment_id": 93127224, "body": "Crossposted to <a href=\"https://www.perlmonks.org/?node_id=1225086\" rel=\"nofollow noreferrer\">PerlMonks</a>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1541156288, "post_id": 53115993, "comment_id": 93128877, "body": "Did this solve your problem? I will write up an answer in that case."}, {"owner": {"reputation": 27, "user_id": 7816650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a47efba308a0b838afc8a58adde68618?s=128&d=identicon&r=PG&f=1", "display_name": "mike joe", "link": "https://stackoverflow.com/users/7816650/mike-joe"}, "edited": false, "score": 0, "creation_date": 1541157365, "post_id": 53115993, "comment_id": 93129376, "body": "yes I got authenticated now tho am still facing some problems my stack overflow  question (<a href=\"https://stackoverflow.com/questions/53117562/problems-with-internal-server-error-on-paypal-api\" title=\"problems with internal server error on paypal api\">stackoverflow.com/questions/53117562/&hellip;</a>)"}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1541160821, "creation_date": 1541160821, "answer_id": 53118419, "question_id": 53115993, "link": "https://stackoverflow.com/questions/53115993/problems-with-paypal-module/53118419#53118419", "title": "problems with paypal module", "body": "<p>According <a href=\"https://metacpan.org/pod/Net::PayPal#GOING-LIVE\" rel=\"nofollow noreferrer\">to the documentation</a>, Net::PayPal always starts out in sandbox mode. You have to switch it to live mode in order to use your production credentials.</p>\n\n<blockquote>\n<pre><code>Net::PayPal-&gt;live( 1 );\nmy $pp = Net::PayPal-&gt;new($client_id, $secret);\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 27, "user_id": 7816650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a47efba308a0b838afc8a58adde68618?s=128&d=identicon&r=PG&f=1", "display_name": "mike joe", "link": "https://stackoverflow.com/users/7816650/mike-joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541160821, "creation_date": 1541151405, "question_id": 53115993, "link": "https://stackoverflow.com/questions/53115993/problems-with-paypal-module", "title": "problems with paypal module", "body": "<p>is anyone ever tried this module NET::PayPal</p>\n\n<p>because i tried it and i was getting this error </p>\n\n<p>Authorization failed : 401 Unauthorized, {\"error\":\"invalid_client\",\"error_description\":\"Client Authentication failed\"}</p>\n\n<p>and am using valid client id and secret id</p>\n\n<pre><code>    use Net::PayPal;\n\n$client_id = 'asdasdasdasdsadasdasd';\n$client_secret = 'sadasdasdsadasdsad';\nmy $p = Net::PayPal-&gt;new($client_id, $client_secret);\n\nmy $payment = $p-&gt;get_payment( 'PAY-9D023728F47376036KE5OTKY' );\n</code></pre>\n"}, {"tags": ["perl", "reference", "subroutine"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1541128704, "post_id": 53112055, "comment_id": 93119414, "body": "<a href=\"https://stackoverflow.com/questions/2126365\">stackoverflow.com/questions/2126365</a>"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 10594164, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zrMFtDh45D8/AAAAAAAAAAI/AAAAAAAAAEM/7QX6tK9oZ4k/photo.jpg?sz=128", "display_name": "Henry Lu", "link": "https://stackoverflow.com/users/10594164/henry-lu"}, "edited": false, "score": 2, "creation_date": 1541131588, "post_id": 53112169, "comment_id": 93119934, "body": "Thank you for your explanation. Your answer makes me know the perl syntax better."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 45, "user_id": 10594164, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zrMFtDh45D8/AAAAAAAAAAI/AAAAAAAAAEM/7QX6tK9oZ4k/photo.jpg?sz=128", "display_name": "Henry Lu", "link": "https://stackoverflow.com/users/10594164/henry-lu"}, "edited": false, "score": 0, "creation_date": 1541136328, "post_id": 53112169, "comment_id": 93120943, "body": "@HenryLu You are welcome.  I suggest that you read through <code>perldata</code> (first link) and then look around <a href=\"https://perldoc.perl.org/perldoc.html\" rel=\"nofollow noreferrer\">perldoc</a> for other resources. Also see <a href=\"https://learn.perl.org/\" rel=\"nofollow noreferrer\">learn.perl.org</a>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1541136429, "post_id": 53112169, "comment_id": 93120965, "body": "An addendum that may be helpful to know in the long run: it is not () that creates lists, as <code>1, 2, 3</code> and <code>1..5</code> and <code>@foo</code> are all lists as long as they&#39;re in list context (for example, the arguments to a subroutine, or the list a foreach iterates over). This is just a special case: parentheses around the left side of an assignment turns it into a list assignment. And you often need parentheses around lists on the right side of an assignment just for precedence. More: <a href=\"http://altreus.blogspot.com/2011/08/lists-and-things-made-of-lists.html\" rel=\"nofollow noreferrer\">altreus.blogspot.com/2011/08/&hellip;</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1541137821, "post_id": 53112169, "comment_id": 93121276, "body": "@Grinnz  That should be helpful for the OP, and then I&#39;d add that a &quot;list&quot; is an elusive notion to start with (but I didn&#39;t mean to go there for this). Also, as the LHS <code>()</code> imposes the list context on the <code>=</code> op the RHS list is copied into the LHS <i>list</i> (um, variables in &quot;the list&quot;).  So we do &quot;get a list&quot; by <code>()</code> -- very loosely (and imprecisely) speaking. Again, it is correct that a &quot;list&quot; can&#39;t be created by syntax (it&#39;s on the stack, and the term is related to how operators work in the given context) but this is getting into slippy semantics :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1541138534, "post_id": 53112169, "comment_id": 93121455, "body": "@Grinnz Edited, to try to soften the loose use of the term &quot;list.&quot;   (As soon as it&#39;s used to loosely explain things there are problems.)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 8, "last_activity_date": 1592804844, "last_edit_date": 1592804844, "creation_date": 1541128141, "answer_id": 53112169, "question_id": 53112055, "link": "https://stackoverflow.com/questions/53112055/perl-assign-reference-to-subroutine/53112169#53112169", "title": "perl assign reference to subroutine", "body": "<p>This is about <a href=\"https://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">context</a> in Perl. It is a crucial aspect of the language.</p>\n<p>With an expression like</p>\n<pre><code>my $var = @ary;\n</code></pre>\n<p>you are attempting to assign an array to a scalar.</p>\n<p>That doesn't make sense as it stands and what happens is that the right-hand side is evaluated to the number of elements of the array and <em>that</em> is assigned to <code>$var</code>.</p>\n<p>In order to change that behavior you need to provide the &quot;list context&quot; to the assignment operator.<sup>\u2020</sup>  In this case you'd do</p>\n<pre><code>my ($var) = @ary;\n</code></pre>\n<p>and now we have an assignment of a list (of array elements) to a list (of variables, here only <code>$var</code>), where they are assigned one for one. So here the first element of <code>@ary</code> is assigned to <code>$var</code>.  Please note that this statement plays loose with the elusive notion of the &quot;list.&quot;</p>\n<p>So in your case you want</p>\n<pre><code>my ($ref) = @_;\n</code></pre>\n<p>and the first element from <code>@_</code> is assigned to <code>$ref</code>, as needed.</p>\n<p>Alternatively, you can remove and return the first element of <code>@_</code> using <a href=\"https://perldoc.perl.org/functions/shift.html\" rel=\"nofollow noreferrer\">shift</a>, in which case the scalar-context assignment is fine</p>\n<pre><code>my $ref = shift @_;\n</code></pre>\n<p>In this case you can also do</p>\n<pre><code>my $ref = shift;\n</code></pre>\n<p>since <code>shift</code> by default works on <code>@_</code>.</p>\n<p>This is suitable when you want to remove the first element of input as you are assigning it so that the remaining <code>@_</code> is well suited for further processing. This is most often useful in object-oriented code.</p>\n<hr />\n<p>It is well worth pointing out that many operators and builtin facilities in Perl act differently depending on what context they are invoked in.</p>\n<p>For some specifics, a ready example is the regex match operator, which returns true/false (1/empty string) in scalar context but the actual matches in list context,<sup>\u2021</sup> while for a more distinct difference see <a href=\"https://perldoc.perl.org/functions/localtime.html\" rel=\"nofollow noreferrer\">localtime</a>, for example. A context-sensitive behavior is in every corner of Perl.</p>\n<p>User level subroutines can be made to behave that way via <a href=\"https://perldoc.perl.org/functions/wantarray.html\" rel=\"nofollow noreferrer\">wantarray</a>.</p>\n<hr />\n<p><sup>\u2020</sup>\nSee <a href=\"https://stackoverflow.com/questions/54564428/scalar-vs-list-assignment-operator\">Scalar vs List Assignment Operator</a>\nfor a detailed discussion</p>\n<p><sup>\u2021</sup>\nSee it <a href=\"https://perldoc.perl.org/perlretut.html#Extracting-matches\" rel=\"nofollow noreferrer\">in perlretut</a> and <a href=\"https://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">in perlop</a> for instance</p>\n"}, {"tags": [], "owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "is_accepted": true, "score": 2, "last_activity_date": 1541128303, "creation_date": 1541128303, "answer_id": 53112197, "question_id": 53112055, "link": "https://stackoverflow.com/questions/53112055/perl-assign-reference-to-subroutine/53112197#53112197", "title": "perl assign reference to subroutine", "body": "<p>When you assign an array to a scalar, you're getting the size of the array. You pass one argument (a reference to an array) to <code>AAR</code>, that's why you get 1.</p>\n\n<p>To get the actual parameters, place the local variable in braces:</p>\n\n<pre><code>sub AAR {\n   my ($ref) = @_;\n   print \"ref = $ref\\n\";\n}\n</code></pre>\n\n<p>This prints something like <code>ref = ARRAY(0x5566c89a4710)</code>.</p>\n\n<p>You can then use the reference to access the array elements like this:</p>\n\n<pre><code>print join(\", \", @{$ref});\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 10594164, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zrMFtDh45D8/AAAAAAAAAAI/AAAAAAAAAEM/7QX6tK9oZ4k/photo.jpg?sz=128", "display_name": "Henry Lu", "link": "https://stackoverflow.com/users/10594164/henry-lu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 1, "accepted_answer_id": 53112197, "answer_count": 2, "score": 3, "last_activity_date": 1592804905, "creation_date": 1541126975, "last_edit_date": 1592804905, "question_id": 53112055, "link": "https://stackoverflow.com/questions/53112055/perl-assign-reference-to-subroutine", "title": "perl assign reference to subroutine", "body": "<p>I use @_ in a subroutine to get a parameter which is assigned as a reference of an array, but the result dose not showing as an array reference.</p>\n\n<p>My code is down below.</p>\n\n<pre><code>my @aar = (9,8,7,6,5);\n\nmy $ref = \\@aar;\n\nAAR($ref);\n\nsub AAR {\n   my $ref = @_;\n   print \"ref = $ref\";\n}\n</code></pre>\n\n<p>This will print 1 , not an array reference , but if I replace @_ with shift , the print result will be a reference.</p>\n\n<p>can anyone explain why I can't get a reference using @_ to me ?</p>\n"}, {"tags": ["python", "perl"], "comments": [{"owner": {"reputation": 1058, "user_id": 2438650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c2b3926bd8282c899903b32a6f002b?s=128&d=identicon&r=PG", "display_name": "lod", "link": "https://stackoverflow.com/users/2438650/lod"}, "edited": false, "score": 2, "creation_date": 1541123695, "post_id": 53111680, "comment_id": 93118472, "body": "Perl can be used to execute any command, including the python interpreter. However given that the company has decided to use Perl, I highly doubt anyone will thank you for deciding to use a different system."}, {"owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 1, "creation_date": 1541123708, "post_id": 53111680, "comment_id": 93118475, "body": "Is it your assigned task to do this?  I&#39;d learn perl otherwise.  I wouldn&#39;t appreciate a block of &lt;some-language&gt; embedded with an interpreter call in a different language, particularly when the company standard differs.  I&#39;m a wizard at z80 assembler, would it be ok for me to embed that?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1541124678, "post_id": 53111680, "comment_id": 93118651, "body": "What is &quot;Perl infrastructure&quot;???"}], "answers": [{"tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 2, "last_activity_date": 1541124048, "creation_date": 1541124048, "answer_id": 53111753, "question_id": 53111680, "link": "https://stackoverflow.com/questions/53111680/python-code-execution-in-perl-interpreter/53111753#53111753", "title": "Python code execution in Perl interpreter", "body": "<p>In theory, there are ways of embedding Python code in Perl, like the <a href=\"https://metacpan.org/pod/Inline::Python\" rel=\"nofollow noreferrer\">Inline::Python</a> module.</p>\n\n<p>In practice, they should not be used. If your company uses Perl, learn Perl. Trying to use Python anyway will just mean that you end up creating code that nobody else can maintain.</p>\n"}], "owner": {"reputation": 1, "user_id": 10594024, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eBS_Wwln4RI/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDjiEJxcXxQeawNWPmPY645FxctGA/mo/photo.jpg?sz=128", "display_name": "user10594024", "link": "https://stackoverflow.com/users/10594024/user10594024"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1541124048, "creation_date": 1541123375, "question_id": 53111680, "link": "https://stackoverflow.com/questions/53111680/python-code-execution-in-perl-interpreter", "title": "Python code execution in Perl interpreter", "body": "<p>I am a python automation engineer  and joined a new company. Here automation infrastructure is in Perl. Is there any way i can develop scripts/code in python and run in Perl infrastructure. Will appreciate  inputs from experienced folks who knows Perl and python.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["bash", "git", "perl"], "answers": [{"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1541122158, "post_id": 53111535, "comment_id": 93118171, "body": "Same result, I&#39;m afraid. (Although I had to remove the <code>&#39;&#39;</code> fwiw)"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1541122395, "post_id": 53111535, "comment_id": 93118222, "body": "Yeah that worked.  Thanks!  Also &quot;follow-symlinks&quot; was a useful google search and led me to this:  <a href=\"https://unix.stackexchange.com/questions/9318/is-there-a-way-to-make-perl-i-not-clobber-symlinks\" title=\"is there a way to make perl i not clobber symlinks\">unix.stackexchange.com/questions/9318/&hellip;</a>"}, {"owner": {"reputation": 6606, "user_id": 4135670, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mArsS.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4135670/rafael"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1541122628, "post_id": 53111535, "comment_id": 93118266, "body": "@zzxyz That&#39;s pretty boss! Def going to read more about moreutils."}], "tags": [], "owner": {"reputation": 6606, "user_id": 4135670, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mArsS.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4135670/rafael"}, "is_accepted": true, "score": 2, "last_activity_date": 1541122207, "last_edit_date": 1541122207, "creation_date": 1541121985, "answer_id": 53111535, "question_id": 53111509, "link": "https://stackoverflow.com/questions/53111509/replace-in-place-using-perl-changed-soft-link-symlink-to-static-file/53111535#53111535", "title": "replace in-place using perl changed soft link/symlink to static file", "body": "<p>If you're not opposed to using sed, give this a whirl:</p>\n\n<pre><code>git ls-files | xargs -I{} -P4 sed --follow-symlinks -i'' 's/SEARCHTERM/REPLACETERM/g' {} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1541185120, "post_id": 53113744, "comment_id": 93143482, "body": "Thanks for this.  I hope I don&#39;t ever have to use it, but if I do, it&#39;ll be invaluable."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1541197403, "post_id": 53113744, "comment_id": 93147701, "body": "@zzxyz Yeah, good that there is that <code>sed</code> feature and the answer that unveiled it :). This is just a simple-minded (kinda) implementation of <code>-i</code> which honors symlinks.  It contains a bunch of tidbits which I hope are generally useful."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1541231049, "last_edit_date": 1541231049, "creation_date": 1541140710, "answer_id": 53113744, "question_id": 53111509, "link": "https://stackoverflow.com/questions/53111509/replace-in-place-using-perl-changed-soft-link-symlink-to-static-file/53113744#53113744", "title": "replace in-place using perl changed soft link/symlink to static file", "body": "<p>It says in <a href=\"https://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perlrun</a></p>\n\n<blockquote>\n  <p>Note that because <code>-i</code> renames or deletes the original file before creating a new file of the same name, Unix-style soft and hard links will not be preserved.</p>\n</blockquote>\n\n<p>So one cannot do that with <code>-i</code>.  </p>\n\n<p>Here is another way with Perl (as tagged -- even as there is a clean solution with <code>sed</code>)</p>\n\n<p>I use files <code>a.txt</code>, <code>b.txt</code>, their symlinks (<code>ln -s a.txt ln_a.txt</code> etc), and <code>c.txt</code> (and any content is fine for this test), and list names of links and <code>c.txt</code> in a file</p>\n\n<pre>\nln_a.txt ln_b.txt c.txt    # file \"input_list.txt\"\n</pre>\n\n<p>where file/link names in <code>input_list.txt</code> may be separated by spaces or newlines.</p>\n\n<p>Then, open a temporary output file on the first line of each input file, and write each processed line to it. Once the end of the input file is reached rename that temporary output to its input file, or to its target if it is a link. So for each input file overwrite the file, or its target if link, with the output file.</p>\n\n<pre><code>cat input_list.txt | xargs perl -MPath::Tiny -ne'\n    if ($.==1) { $tf = $ARGV.\"_tmp.$$\"; $fh = path($tf)-&gt;openw };\n    s/(\\w+)/$1-NEW/; \n    print $fh $_; \n    if (eof) { close ARGV; rename $tf, (-l $ARGV ? readlink $ARGV : $ARGV) }\n'\n</code></pre>\n\n<p>This changes the content of targets and leaves the links alone. It works for regular files as well.</p>\n\n<p>The makeshift output file name (<code>filename_tmp.$$</code>) can be made properly with <code>File::Temp</code>, or rather with <a href=\"https://metacpan.org/pod/Path::Tiny#tempfile,-tempdir\" rel=\"nofollow noreferrer\">Path::Tiny::tempfile</a> since that module is being used already.</p>\n\n<p>The <a href=\"https://perldoc.perl.org/functions/rename.html\" rel=\"nofollow noreferrer\">rename</a> should probably be changed to <code>move</code> from <a href=\"http://perldoc.perl.org/File/Copy.html\" rel=\"nofollow noreferrer\">File::Copy</a>, for portability.  </p>\n\n<p>The <a href=\"http://perldoc.perl.org/functions/eof.html\" rel=\"nofollow noreferrer\">eof</a> as used checks whether the file is exhausted for each input file, at which point the output file is renamed to the input file or to its target. The <code>-l</code> is a <a href=\"https://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">file-test operator</a> that tests whether the file on hand is a symbolic link, and if it is then <a href=\"https://perldoc.perl.org/functions/readlink.html\" rel=\"nofollow noreferrer\">readlink</a> resolves the link.</p>\n\n<p>It is safe to <code>rename</code> the input file or target at that time since it has been read and processed.</p>\n\n<p>The <a href=\"https://perldoc.perl.org/perlvar.html#$ARGV\" rel=\"nofollow noreferrer\">$ARGV</a> is the name\n of the currently processed file and <a href=\"https://perldoc.perl.org/perlvar.html#ARGV\" rel=\"nofollow noreferrer\">ARGV</a> is the filehandle for it.</p>\n\n<p>The explicit <code>close ARGV</code> resets the line counter so we can open the temporary output at the beginning of each new input file by testing the line number counter <a href=\"https://perldoc.perl.org/perlvar.html#$.\" rel=\"nofollow noreferrer\">$.</a> against <code>1</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "is_accepted": false, "score": 1, "last_activity_date": 1541184613, "creation_date": 1541184613, "answer_id": 53124299, "question_id": 53111509, "link": "https://stackoverflow.com/questions/53111509/replace-in-place-using-perl-changed-soft-link-symlink-to-static-file/53124299#53124299", "title": "replace in-place using perl changed soft link/symlink to static file", "body": "<p>My initial solution to this was just letting the symlinks get clobbered, and then running:</p>\n\n<pre><code>git status --porcelain | awk '{if ($1 == \"T\"){print $2}}' | xargs git checkout\n</code></pre>\n\n<p>This is really good for <em>various</em> tools that might clobber the symlinks if they happen to be incidental and not really relevant to the search.</p>\n\n<p>The link here has some interesting ideas:\n<a href=\"https://unix.stackexchange.com/questions/9318/is-there-a-way-to-make-perl-i-not-clobber-symlinks\">https://unix.stackexchange.com/questions/9318/is-there-a-way-to-make-perl-i-not-clobber-symlinks</a></p>\n\n<p>zdim's answer is the best implementation of one of them, I think.  A little hairy, though.</p>\n\n<p>The other answer at that link, using <code>sponge</code>, works, but creates a very complicated xargs pipe.  It also, I believe requires the use of <code>xargs -n1</code>, which is a <em>catastrophically</em> slow way to run perl on large file systems.  So that's a no-go.</p>\n\n<p>And Rafael's answer (just use sed) is probably...the sanest way to approach this problem :)</p>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 2, "last_activity_date": 1541204415, "last_edit_date": 1541204415, "creation_date": 1541202151, "answer_id": 53127049, "question_id": 53111509, "link": "https://stackoverflow.com/questions/53111509/replace-in-place-using-perl-changed-soft-link-symlink-to-static-file/53127049#53127049", "title": "replace in-place using perl changed soft link/symlink to static file", "body": "<p>Another Perl option:</p>\n\n<pre><code>git ls-files | xargs perl -MPath::Tiny -Mutf8 -E'\n  path($_)-&gt;realpath-&gt;edit_lines_utf8(sub { s/SEARCHTERM/REPLACETERM/g })\n  for @ARGV'\n</code></pre>\n\n<p>Or without xargs, just read filenames from STDIN:</p>\n\n<pre><code>git ls-files | perl -MPath::Tiny -Mutf8 -E'\n  path($_)-&gt;realpath-&gt;edit_lines_utf8(sub { s/SEARCHTERM/REPLACETERM/g })\n  for map { chomp; $_ } readline'\n</code></pre>\n\n<p><code>realpath</code> ensures you are always working with the symlink target, and <a href=\"https://metacpan.org/pod/Path::Tiny#edit_lines,-edit_lines_utf8,-edit_lines_raw\" rel=\"nofollow noreferrer\">edit_lines</a> is essentially a Path::Tiny implementation of the <code>-i</code> option. Using <code>edit_lines_utf8</code> and <code>-Mutf8</code> means that your source code (the search and replace terms) and the file contents will be decoded from UTF-8 while running the search/replace, which is usually helpful (but if your files aren't UTF-8 encoded, remove <code>-Mutf8</code> and use <code>edit_lines</code>). You could also filter out non-text files based on the <a href=\"https://perldoc.pl/functions/-T\" rel=\"nofollow noreferrer\">-T heuristic</a> by adding <code>grep { -T }</code> after <code>for</code>.</p>\n\n<p>As a bonus, <code>edit_lines</code> will always output to a new file then rename it over the original which is safer than clobbering the original file, which <a href=\"https://perldoc.pl/perl5280delta#In-place-editing-with-perl-i-is-now-safer\" rel=\"nofollow noreferrer\">-i didn't do until Perl 5.28</a>.</p>\n\n<p>CAVEAT: Path::Tiny will set the permissions of all the files it edits based on your current umask, not the existing permissions; I opened <a href=\"https://github.com/dagolden/Path-Tiny/issues/221\" rel=\"nofollow noreferrer\">an issue</a> to see if it's considered a bug.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1541299671, "creation_date": 1541299671, "answer_id": 53137330, "question_id": 53111509, "link": "https://stackoverflow.com/questions/53111509/replace-in-place-using-perl-changed-soft-link-symlink-to-static-file/53137330#53137330", "title": "replace in-place using perl changed soft link/symlink to static file", "body": "<p>All you need is</p>\n\n<pre><code>git ls-files | xargs readlink -e | xargs perl -i -pe'...'\n</code></pre>\n\n<p>You could also expand the links in Perl too.</p>\n\n<pre><code>git ls-files | xargs perl -i -pe'BEGIN { @ARGV = map readlink($_) // $_, @ARGV } ...'\n</code></pre>\n"}], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 53111535, "answer_count": 5, "score": 3, "last_activity_date": 1541299671, "creation_date": 1541121747, "last_edit_date": 1541197711, "question_id": 53111509, "link": "https://stackoverflow.com/questions/53111509/replace-in-place-using-perl-changed-soft-link-symlink-to-static-file", "title": "replace in-place using perl changed soft link/symlink to static file", "body": "<p>Given the following command:</p>\n\n<pre><code>git ls-files | xargs perl -i -pe 's/SEARCHTERM/REPLACETERM/g'\n</code></pre>\n\n<p>All outputs to perl (from git ls-files) that were symbolic links are now <em>copies</em> of the target files.</p>\n\n<p>I have two questions:</p>\n\n<p>1)  I think I vaguely understand why this happened, but only vaguely.  Can someone explain in detail?  And suggest the best mechanism for avoiding this?  Expected behavior would be that the symbolic link targets would be the target of the read AND the write--not just the read.</p>\n\n<p>2)  Is there a better general approach for doing a search and replace on a local git branch?</p>\n\n<p>Might be worth noting that my bash is pretty rudimentary and <code>xargs</code> is just my default goto when I want to ensure the <em>contents</em> of files are processed rather than a list of files.  Not used for any reason other than that.</p>\n"}, {"tags": ["regex", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1541108907, "post_id": 53109048, "comment_id": 93114914, "body": "Prefix your code/data with four white spaces. Please take a look at <a href=\"http://stackoverflow.com/editing-help\">editing-help</a>."}], "answers": [{"comments": [{"owner": {"reputation": 35588, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1541219608, "post_id": 53109298, "comment_id": 93151188, "body": "awk is probably one of the tools I use the most that I don&#39;t advokate. grep is absolutely the correct tool. Just add -P and get it on."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 0, "last_activity_date": 1541106113, "creation_date": 1541106113, "answer_id": 53109298, "question_id": 53109048, "link": "https://stackoverflow.com/questions/53109048/egrep-specific-paragraph-from-search-string-to-origin-string-before/53109298#53109298", "title": "egrep specific paragraph from search string to origin string before", "body": "<p>Grep is the wrong tool. Awk would be a better fit. Something like:</p>\n\n<pre><code>zcat foo.gz | awk '/^01TNL/, /DMAStatus.*nError {13}.{3,5} $/ { print }'\n</code></pre>\n\n<p>Edit: <a href=\"https://www.gnu.org/software/gawk/manual/html_node/Ranges.html\" rel=\"nofollow noreferrer\">more reading</a> on matching ranges in awk.</p>\n"}], "owner": {"reputation": 1, "user_id": 10592970, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-84nGU8Fi4Ek/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBPxFY5QvQJPWKFbmQUbJJVUYrUeQ/mo/photo.jpg?sz=128", "display_name": "Metal KDNg", "link": "https://stackoverflow.com/users/10592970/metal-kdng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541540331, "creation_date": 1541104862, "last_edit_date": 1541540331, "question_id": 53109048, "link": "https://stackoverflow.com/questions/53109048/egrep-specific-paragraph-from-search-string-to-origin-string-before", "title": "egrep specific paragraph from search string to origin string before", "body": "<p>Right now, I am searching through 3.297 GZIP archived log files with following command:</p>\n\n<pre><code>zegrep -B 60 -E 'DMAStatus.*nError\\ {13}.{3,5}\\ $' collector_2018-*\n</code></pre>\n\n<p>What I would like to realize:\nTo replace the option\n<code>-B 60</code>\nwith a specific search pattern.</p>\n\n<p>That means, right now I extract 60 lines before every search result. However, 60 lines might be way too little but also way too much. (Depending on what, or rather how many lines are written into the log before the\n   <code>'DMAStatus.*nError\\ {13}.{3,5}\\ $'</code>\nis recorded)</p>\n\n<p>BTW, the ending pattern: <code>'\\ {13}.{3,5}\\ $'</code> is just a specific string I am looking for at the end of files.</p>\n\n<p><code>\\ {13}</code> = Look for 13 White-space characters</p>\n\n<p><code>.{3,5}</code> = Look for any string within 3-5 characters length</p>\n\n<p><code>\\ $'</code> = Followed by one more single White-space character ending with EOL $</p>\n\n<p>I know that every error message is invoked by one specific character set: <code>01TNL</code></p>\n\n<p>How can I run the <code>zegrep</code> command to search for the search pattern given above, and then print any line starting from <code>01TNL</code> to the search pattern?</p>\n\n<p>I add here an example of four different log files, copied together into one file in Notepad++.\nI forgot to add some crucial information, unfortunately. I am afraid, this is also why the approach by using <code>awk</code> didn't work out well.</p>\n\n<p>The string <code>01TNL</code> appears several times in each log file. If the string is constantly <code>01TNL000</code>, it is no error and the log file keeps on growing.\nAny other combination than three times <code>000</code> is processed as error.\nLog files with no error at the end should be ignored, for any other cases all the log file information from, e.g. line <code>01TNL020</code> to the ending line <code>DMAStatus-&gt;nError</code> and everything in between should be printed.</p>\n\n<pre><code>############   Logfile 2018-10-16_10-23-25 started pid 88108  \n10:23:53.987   FIO:  rcvd \".01TNL000\"  \n10:24:12.803   FIO:  rcvd \".01TNL000\"  \n10:24:30.934   FIO:  rcvd \".01TNL000\"  \n10:24:49.040   FIO:  rcvd \".01TNL0**2**0\"  \n10:24:49.702   DMSG: DMAStatus-&gt;nError             2329\n\n\n############   Logfile 2018-10-17_20-35-08 started pid 187491  \n20:36:47.838   FIO:  rcvd \".01TNL000\"  \n20:36:53.487   FIO:  rcvd \".01TNL000\"  \n20:36:58.418   FIO:  rcvd \".01TNL000\"  \n20:37:02.329   FIO:  rcvd \".01TNL000\"  \n21:24:51.060   FIO:  rcvd \".01TNL000\"  \n21:24:54.864   FIO:  rcvd \".01TNL000\"  \n21:24:58.773   FIO:  rcvd \".01TNL000\"  \n21:25:03.175   FIO:  rcvd \".01TNL000\"  \n21:25:03.340   DMSG: DMAStatus-&gt;nError             0 \n\n\n############   Logfile 2018-10-15_18-45-08 started pid 42128  \n18:46:49.656   FIO:  rcvd \".01TNL000\"  \n18:46:55.980   FIO:  rcvd \".01TNL000\"  \n18:47:01.407   FIO:  rcvd \".01TNL000\"  \n18:47:05.266   FIO:  rcvd \".01TNL000\"  \n18:47:09.130   FIO:  rcvd \".01TNL000\"  \n18:52:57.211   FIO:  rcvd \".01TNL000\"  \n18:53:01.146   FIO:  rcvd \".01TNL000\"  \n18:53:05.006   FIO:  rcvd \".01TNL000\"  \n18:53:09.611   FIO:  rcvd \".01TNL000\"  \n18:53:16.078   DMSG: DMAStatus-&gt;nError             0 \n\n\n############   Logfile 2018-10-18_03-32-00 started pid 12504  \n03:33:52.948   FIO:  rcvd \".01TNL000\"  \n03:33:55.429   FIO:  rcvd \".01TNL00**1**\"  \n03:34:01.823   DMSG: DMAStatus-&gt;nError             2288 \n</code></pre>\n\n<p>Many thanks.</p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1541097042, "post_id": 53107203, "comment_id": 93109851, "body": "That&#39;s not the reason; if it can&#39;t find the module, &quot;use&quot; will throw an error which is not what happened here."}, {"owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "edited": false, "score": 0, "creation_date": 1541106783, "post_id": 53107203, "comment_id": 93114107, "body": "Try changing the <code>new CGI();</code> to <code>CGI-&gt;new();</code>. That type of indirect object syntax was added to Perl when it was trying to be like the cool kids, but it can confuse Perl&#39;s interpreter so it&#39;s no longer recommended. See this perldoc for more info: <a href=\"http://perldoc.perl.org/perlobj.html#Indirect-Object-Syntax\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlobj.html#Indirect-Object-Syntax</a>"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 4336063, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2GWyZAP7eX4/AAAAAAAAAAI/AAAAAAAAAB4/IGBgAMk-P44/photo.jpg?sz=128", "display_name": "Red Coleman", "link": "https://stackoverflow.com/users/4336063/red-coleman"}, "edited": false, "score": 0, "creation_date": 1541099334, "post_id": 53107321, "comment_id": 93110940, "body": "I kept hitting an error where the app &quot;can&#39;t locate &lt;script&gt; at @INC&quot;, so I was using the above to add those directories to @INC (<a href=\"https://www.perlmonks.org/bare/?node_id=24911\" rel=\"nofollow noreferrer\">perlmonks.org/bare/?node_id=24911</a>)"}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 47, "user_id": 4336063, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2GWyZAP7eX4/AAAAAAAAAAI/AAAAAAAAAB4/IGBgAMk-P44/photo.jpg?sz=128", "display_name": "Red Coleman", "link": "https://stackoverflow.com/users/4336063/red-coleman"}, "edited": false, "score": 0, "creation_date": 1541103335, "post_id": 53107321, "comment_id": 93112733, "body": "@RedColeman Well, stop doing that, then. Individual modules should not modify <code>@INC</code> when loaded, and there should not be multiple entries in <code>@INC</code> which reference the same directory tree."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 47, "user_id": 4336063, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2GWyZAP7eX4/AAAAAAAAAAI/AAAAAAAAAB4/IGBgAMk-P44/photo.jpg?sz=128", "display_name": "Red Coleman", "link": "https://stackoverflow.com/users/4336063/red-coleman"}, "edited": false, "score": 0, "creation_date": 1541123658, "post_id": 53107321, "comment_id": 93118464, "body": "@Red Coleman, Re &quot;<i>I kept hitting an error</i>&quot;, So ask a Question about how to properly resolve that problem. I 100% agree with duskwuff&#39;s answer"}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 6, "last_activity_date": 1541097494, "last_edit_date": 1541097494, "creation_date": 1541097150, "answer_id": 53107321, "question_id": 53107203, "link": "https://stackoverflow.com/questions/53107203/troubleshooting-perl-cgi-app-cant-locate-object-method-new-via-package/53107321#53107321", "title": "Troubleshooting Perl CGI app - Can&#39;t locate object method &quot;new&quot; via package", "body": "<pre><code>package APP::CGI;\n\n[\u2026]\n\nuse lib qw(/opt/app/htdocs/lib);\nuse lib qw(/opt/app/htdocs/lib/APP);\nuse lib qw(/opt/app/htdocs/lib/APP/Service);\n</code></pre>\n\n<p>These <code>use lib</code> lines look really wrong. If this pattern was used in other files as well, it will cause <code>use CGI</code> to be resolved to <code>/opt/lib/htdocs/lib/APP/CGI.pm</code> (i.e, the file that you're looking at!), not <a href=\"https://metacpan.org/release/CGI\" rel=\"nofollow noreferrer\">the standard module</a> that was intended.</p>\n\n<p>Remove <strong>all</strong> <code>use lib</code> lines from Perl modules (<code>.pm</code>) in your project. This directive should only appear in top-level Perl scripts (<code>.pl</code>, <code>.cgi</code>, <em>etc</em>); even there, there should only be one <code>use lib</code> referring to the <code>lib</code> directory of your project, not to any subdirectories.</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 4336063, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2GWyZAP7eX4/AAAAAAAAAAI/AAAAAAAAAB4/IGBgAMk-P44/photo.jpg?sz=128", "display_name": "Red Coleman", "link": "https://stackoverflow.com/users/4336063/red-coleman"}, "edited": false, "score": 0, "creation_date": 1541099609, "post_id": 53107342, "comment_id": 93111081, "body": "I kept hitting an error where the app &quot;can&#39;t locate &lt;script&gt; at @INC&quot;, so I was using the above to add those directories to @INC (perlmonks.org/bare/?node_id=24911).  Some of the scripts are in /opt/app/htdocs and not /opt/app/htdocs/lib...  I was doing symbolic links, which were working, but I thought the &quot;use lib&quot; was a shortcut."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 47, "user_id": 4336063, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2GWyZAP7eX4/AAAAAAAAAAI/AAAAAAAAAB4/IGBgAMk-P44/photo.jpg?sz=128", "display_name": "Red Coleman", "link": "https://stackoverflow.com/users/4336063/red-coleman"}, "edited": false, "score": 0, "creation_date": 1541105021, "post_id": 53107342, "comment_id": 93113445, "body": "<code>@INC</code> is for loading modules, not scripts. If you mean you are doing <code>require &#39;foo.pl&#39;</code> or <code>do &#39;foo.pl&#39;</code> to load them from <code>@INC</code>, you shouldn&#39;t do this; either make them into real modules or pass the absolute path to <code>do</code>."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 2, "last_activity_date": 1541097267, "creation_date": 1541097267, "answer_id": 53107342, "question_id": 53107203, "link": "https://stackoverflow.com/questions/53107203/troubleshooting-perl-cgi-app-cant-locate-object-method-new-via-package/53107342#53107342", "title": "Troubleshooting Perl CGI app - Can&#39;t locate object method &quot;new&quot; via package", "body": "<p>Your <code>use lib</code> lines are too over-eager. You are adding a bunch of paths to the beginning of <code>@INC</code>, but you need to only add the base directory. <code>use CGI;</code> will search <code>@INC</code> for the first file it finds by adding <code>CGI.pm</code> to the path, this will find <code>/opt/app/htdocs/lib/APP/CGI.pm</code> due to the extra paths you added. Obviously, that's not CGI, and doesn't define the CGI package, so there's no <code>new</code> method for it to find there. Your lib path is likely just <code>/opt/app/htdocs/lib</code>.</p>\n"}], "owner": {"reputation": 47, "user_id": 4336063, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2GWyZAP7eX4/AAAAAAAAAAI/AAAAAAAAAB4/IGBgAMk-P44/photo.jpg?sz=128", "display_name": "Red Coleman", "link": "https://stackoverflow.com/users/4336063/red-coleman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1541097494, "creation_date": 1541096713, "question_id": 53107203, "link": "https://stackoverflow.com/questions/53107203/troubleshooting-perl-cgi-app-cant-locate-object-method-new-via-package", "title": "Troubleshooting Perl CGI app - Can&#39;t locate object method &quot;new&quot; via package", "body": "<p>I have inherited an old perl app that I'm trying to resurrect.  Sadly I'm not a perl guy (and only a novice developer).  I've had some success fixing other problems with this app by finding solutions online, but a solution to this has eluded me so far, so felt it was time to ask for advice.</p>\n\n<p>I have hit a roadblock and looking for advice on how to troubleshoot an error I'm receiving.</p>\n\n<p>This is the error:</p>\n\n<pre><code>Can't locate object method \"new\" via package \"CGI\" at \n/opt/app/htdocs/lib/APP/CGI.pm line 26.Compilation failed \nin require at /opt/app/htdocs/lib/APP/CGI.pm line 4.\n</code></pre>\n\n<p>Here is the first 26 lines of /opt/app/htdocs/lib/APP/CGI.pm:</p>\n\n<pre><code> package APP::CGI;\n\n use CGI;\n\n use CGI::Carp qw(fatalsToBrowser set_message);\n use APP::Error;\n\n BEGIN {\n      sub handle_errors {\n         my $msg = shift;\n         &amp;APP::Error::error($msg);\n     }\n     set_message(\\&amp;handle_errors);\n\n }\n\n use strict;\n # hack:  added these to resolve \"can't locate\" errors\n use lib qw(/opt/app/htdocs);\n use lib qw(/opt/app/htdocs/lib);\n use lib qw(/opt/app/htdocs/lib/APP);\n use lib qw(/opt/app/htdocs/lib/APP/Service);\n # end hack\n use vars qw/ $CGI %REDIRS /;\n\n $CGI = new CGI();\n</code></pre>\n\n<p>I've been having to add the following to other scripts in the app to make things work (to resolve can't locate errors), so I've added them in this script, but it hasn't resolved the issue.  </p>\n\n<pre><code> use lib qw(/opt/app/htdocs);\n use lib qw(/opt/app/htdocs/lib);\n use lib qw(/opt/app/htdocs/lib/APP);\n use lib qw(/opt/app/htdocs/lib/APP/Service);\n</code></pre>\n\n<p>My guess is that my app cannot find the CGI module (referenced as \"use CGI;\" in the snippet).  I have confirmed the CGI module is installed and up-to-date:</p>\n\n<pre><code> cpanm -i CGI\n CGI is up to date. (4.40)\n</code></pre>\n\n<p>Perl Version is 5.26.2, if that matters.</p>\n\n<p><strong>Any tips on how to troubleshoot?  I feel like this CGI.pm file cannot find the CGI module, which is why it can't execute the method \"new\"... but it's just a guess.</strong></p>\n"}, {"tags": ["oracle", "perl", "parallel-processing", "dbi"], "comments": [{"owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "edited": false, "score": 1, "creation_date": 1541093679, "post_id": 53105423, "comment_id": 93108205, "body": "Make an explicit $dbh-&gt;commit after each insert. Or change the field definition of ID to sequence."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1541095923, "post_id": 53105423, "comment_id": 93109326, "body": "Does Oracle not support an autoincrementing integer key so you don&#39;t have to try to pick a value manually? (Edit: Yes in recent versions, can be worked around in older ones. See <a href=\"https://stackoverflow.com/questions/11296361/how-to-create-id-with-auto-increment-on-oracle\" title=\"how to create id with auto increment on oracle\">stackoverflow.com/questions/11296361/&hellip;</a> )"}, {"owner": {"reputation": 55, "user_id": 7060018, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202613861703656/picture?type=large", "display_name": "Peter F", "link": "https://stackoverflow.com/users/7060018/peter-f"}, "reply_to_user": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "edited": false, "score": 0, "creation_date": 1541143465, "post_id": 53105423, "comment_id": 93122992, "body": "@ulix $dbh-&gt;commit after each insert did not work as I expected but the problem was solved by the change definition of ID to sequence. I used solution which Shawn pasted. Thanks a lot guys!"}], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 4385038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98115b29176fd65e386d19cdf97dd208?s=128&d=identicon&r=PG&f=1", "display_name": "jtym", "link": "https://stackoverflow.com/users/4385038/jtym"}, "is_accepted": false, "score": 0, "last_activity_date": 1541109814, "creation_date": 1541109814, "answer_id": 53110022, "question_id": 53105423, "link": "https://stackoverflow.com/questions/53105423/oracle-dbd-insert-and-update-table-using-perl-script-running-parallel/53110022#53110022", "title": "Oracle DBD Insert and update table using perl script running parallel", "body": "<p>Assuming what you're trying todo here is make the data load quicker, you would be better off using the sqlldr tool ( the oracle bulk loading tool ).</p>\n\n<p>Apart from anything else this is almost certainly IO bound, putting insert statements in multiple cores will do nothing to make it faster, and will create new problems like the one you have above.</p>\n"}], "owner": {"reputation": 55, "user_id": 7060018, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202613861703656/picture?type=large", "display_name": "Peter F", "link": "https://stackoverflow.com/users/7060018/peter-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1541109814, "creation_date": 1541089711, "last_edit_date": 1541099298, "question_id": 53105423, "link": "https://stackoverflow.com/questions/53105423/oracle-dbd-insert-and-update-table-using-perl-script-running-parallel", "title": "Oracle DBD Insert and update table using perl script running parallel", "body": "<p>I have a perl script which is run parallel.</p>\n\n<pre><code>ls -lrt INCOMING | grep .out | head -${PARALLEL_COUNT} |  awk '{print $9}' | parallel \"./new_control.pl\" {}\n</code></pre>\n\n<p>Script proccessing csv files which coresponds server data.\nWhen the script is running parallel I have exception</p>\n\n<pre><code>Uncaught exception from user code:\nDBD::Oracle::st execute failed: ORA-00001: unique constraint (PRE.SYS_C006373) violated (DBD ERROR: OCIStmtExecute) [for Statement \"INSERT INTO DISK\n(\n    ID,\n    RECORD_ID,\n    MOUNT_POINT,\n    TOTAL_SIZE,\n    USED,\n    AVALIABLE,\n    CAPACITY,\n)\nVALUES ((SELECT NVL(MAX(ID)+1, 1) FROM DISK), ?, ?, ?, ?, ?, ?, ?, ?, ?)\n</code></pre>\n\n<p>I suppose that the problem is ID column where is inserting incremented value. </p>\n\n<pre><code>(SELECT NVL(MAX(ID)+1, 1)\n</code></pre>\n\n<p>and the same id is already also inserting by the other script instance.  </p>\n\n<p>I tried to change AutoCommit but without any positive result</p>\n\n<pre><code>our $dbh = DBI-&gt;connect(\"dbi:Oracle:host=$host;sid=$sid;port=$port\", $username, $password,\n{\n    RaiseError =&gt; 1,\n    AutoCommit =&gt; 1 # this will need to call commit manually (if value is 0) after changes in DB.\n});\n</code></pre>\n\n<p>When the script is not run parallel everythink is ok. I don't want to generate those id's before I run the script parallely.</p>\n"}, {"tags": ["bash", "perl", "awk"], "answers": [{"tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": true, "score": 3, "last_activity_date": 1541089760, "creation_date": 1541089760, "answer_id": 53105441, "question_id": 53105068, "link": "https://stackoverflow.com/questions/53105068/convert-multi-line-into-one-and-extract-columns-from-it/53105441#53105441", "title": "Convert multi-line into one and extract columns from it", "body": "<p>Could you please try following(considering that your output of script will be always in same pattern as per shown output).</p>\n\n<pre><code>your_command | awk -F\"[&gt;&lt;]\" '\n/&lt;Time&gt;/{\n  val=$3\n  next\n}\n/&lt;Alert&gt;/{\n  split($3,array,\";\")\n  sub(/.*=/,\"\",array[5])\n  sub(/Recovery=/,\"\",array[9])\n  print val,array[5],array[6],array[8],array[9]\n}' \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1541092735, "creation_date": 1541092735, "answer_id": 53106207, "question_id": 53105068, "link": "https://stackoverflow.com/questions/53105068/convert-multi-line-into-one-and-extract-columns-from-it/53106207#53106207", "title": "Convert multi-line into one and extract columns from it", "body": "<p>You could do all in Perl if you want. Avoiding pipes to <code>awk</code>. For example:</p>\n\n<pre><code>mytool | perl -nE '\n  m{&lt;Alert&gt;(.*?)&lt;/Alert&gt;} and do {($line = $1) =~ s/NODE_LOCATION=|Recovery=|ID=//g; \n  @F = split /;/, $line; say join \" \", @F[1,3,4,5,6,7,8]}'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "is_accepted": false, "score": 2, "last_activity_date": 1541114183, "last_edit_date": 1541114183, "creation_date": 1541113450, "answer_id": 53110588, "question_id": 53105068, "link": "https://stackoverflow.com/questions/53105068/convert-multi-line-into-one-and-extract-columns-from-it/53110588#53110588", "title": "Convert multi-line into one and extract columns from it", "body": "<pre><code>mytool | perl -nE 'if(/&lt;Alert&gt;/){s/Recovery=|ID=//g; say join \" \",(split/;/)[1,4,5,7,8]}'\n</code></pre>\n\n<p>The above will work assuming your XML only has one tag pair per line as in your example.</p>\n"}], "owner": {"reputation": 1340, "user_id": 5584716, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4bb2caba083c0b41cf0c4d267d4e0516?s=128&d=identicon&r=PG&f=1", "display_name": "monk", "link": "https://stackoverflow.com/users/5584716/monk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 53105441, "answer_count": 3, "score": 1, "last_activity_date": 1541114183, "creation_date": 1541088510, "question_id": 53105068, "link": "https://stackoverflow.com/questions/53105068/convert-multi-line-into-one-and-extract-columns-from-it", "title": "Convert multi-line into one and extract columns from it", "body": "<p>I have a stream(from propitiatory tool named mytool) of logs which are in xml format and I need to make them look readable in one line. I do not have xml parsing tool on this node , so ended up using perl and awk.</p>\n\n<p>I managed to get the desired result but wanted to reduce the number of pipes/awk/perl into minimum possible. </p>\n\n<p>Example of input stream:</p>\n\n<pre><code>./mytool\n\n&lt;ALERT&gt;\n   &lt;Time&gt;2018-10-24T16:03:00.128-05:00&lt;/Time&gt;\n   &lt;Alert&gt;0;2018-10-24T16:02:37.739-05:00;NODE_LOCATION=19;11193;ID=5636122;Temp is on critical range;000;CRITICAL;Recovery=Shutting down the node;100&lt;/Alert&gt;\n&lt;/ALERT&gt;\n\n\n\n&lt;ALERT&gt;\n   &lt;Time&gt;2018-10-24T16:03:03.053-05:00&lt;/Time&gt;\n   &lt;Alert&gt;0;2018-10-24T16:02:40.264-05:00;NODE_LOCATION=17;11293;ID=5636124;Temp is on Major range;000;MAJOR;Recovery=Shutdown the node or it will auto shutdown,processes stopped;99&lt;/Alert&gt;\n&lt;/ALERT&gt;\n</code></pre>\n\n<p>My desired result:</p>\n\n<pre><code>2018-10-24T16:02:37.739-05:00  5636122 Temp is on critical range CRITICAL Shutting down the node\n2018-10-24T16:02:40.264-05:00  5636124 Temp is on Major range MAJOR Shutdown the node or it will auto shutdown,processes stopped\n</code></pre>\n\n<p>Current command I used to get the result:</p>\n\n<pre><code>./mytool | perl -000 -lnpe 's/&lt;.*?&gt;|NODE_LOCATION=|Recovery=|ID=//g' | awk -vRS= '{$1=$1}1' |awk -F';' '{print $2,$$4,$5,$6,$8,$9}'\n\n2018-10-24T16:02:37.739-05:00  5636122 Temp is on critical range CRITICAL Shutting down the node\n2018-10-24T16:02:40.264-05:00  5636124 Temp is on Major range MAJOR Shutdown the node or it will auto shutdown,processes stopped\n</code></pre>\n\n<p>Note: Understand that using awk perl is not the best way to deal with xmls but this is the best possible available so have to compromise with it. </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1541086164, "post_id": 53102668, "comment_id": 93104013, "body": "Does it have to be a regex? Because I&#39;d be suggesting <code>File::Spec</code> and just doing logical tests."}], "answers": [{"tags": [], "owner": {"reputation": 10161, "user_id": 4677951, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fnR1Z.png?s=128&g=1", "display_name": "shadowsheep", "link": "https://stackoverflow.com/users/4677951/shadowsheep"}, "is_accepted": false, "score": 1, "last_activity_date": 1541080850, "creation_date": 1541080850, "answer_id": 53102859, "question_id": 53102668, "link": "https://stackoverflow.com/questions/53102668/perl-regrex-exlude-pattern-from-matching/53102859#53102859", "title": "Perl regrex: exlude pattern from matching", "body": "<p>If I have understood well your question, you need something like that:</p>\n\n<pre><code>my $newstring = $oldstring =~ s/(\\/home\\/user)|(\\$HOME)//gr; \n</code></pre>\n\n<p>Have a look here: <a href=\"http://tpcg.io/xukvqn\" rel=\"nofollow noreferrer\">http://tpcg.io/xukvqn</a></p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 4385038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98115b29176fd65e386d19cdf97dd208?s=128&d=identicon&r=PG&f=1", "display_name": "jtym", "link": "https://stackoverflow.com/users/4385038/jtym"}, "is_accepted": false, "score": 1, "last_activity_date": 1541083522, "creation_date": 1541083522, "answer_id": 53103615, "question_id": 53102668, "link": "https://stackoverflow.com/questions/53102668/perl-regrex-exlude-pattern-from-matching/53103615#53103615", "title": "Perl regrex: exlude pattern from matching", "body": "<p>This isn't particularly clever but it does what I think you are asking:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $variable = '/home/jtym/abc/def/mng';\nmy $home_if_exists;\n\nif($variable =~ /^$ENV{HOME}/) {\n    $variable =~ s/^$ENV{HOME}//;\n    $home_if_exists = $ENV{HOME};\n}\n\n$variable =~ s/\\//SLASH/g;\n$variable = $home_if_exists.$variable;\n\nprint Dumper($variable);\n</code></pre>\n\n<p>$VAR1 = '/home/jtymSLASHabcSLASHdefSLASHmng';</p>\n"}], "owner": {"reputation": 240, "user_id": 5813693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2159d06e92bb9da140ffd9184ac1316?s=128&d=identicon&r=PG&f=1", "display_name": "Tuyen Pham", "link": "https://stackoverflow.com/users/5813693/tuyen-pham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1541083522, "creation_date": 1541080214, "question_id": 53102668, "link": "https://stackoverflow.com/questions/53102668/perl-regrex-exlude-pattern-from-matching", "title": "Perl regrex: exlude pattern from matching", "body": "<p>I have <code>/home/user/abc/def/mng</code> and I'd like to replace <code>/home/user</code> or I had do a check before that if the string contain $HOME then exclude $HOME or <code>/home/user</code> from matching and process something on pattern <code>/abc/def/mng</code>.</p>\n\n<p>How to exlucde?</p>\n"}, {"tags": ["perl", "paypal"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1541083633, "post_id": 53102332, "comment_id": 93102566, "body": "Please check <a href=\"https://metacpan.org/pod/HTTP::Tinyish\" rel=\"nofollow noreferrer\">the documentation</a> and make sure that you have any of the backends described installed. If you do then add the relevant information to your question, i.e. which backend is installed in your opinion and how did you verify this."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1541084311, "post_id": 53102332, "comment_id": 93102958, "body": "Crossposted to <a href=\"https://perlmonks.org/?node_id=1225025\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1225025</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1541084444, "post_id": 53103751, "comment_id": 93103034, "body": "No - for libwww-perl, install LWP::Protocol::https <a href=\"https://metacpan.org/pod/LWP::Protocol::https\" rel=\"nofollow noreferrer\">metacpan.org/pod/LWP::Protocol::https</a> , not Net::SSLeay, as that will not be enough. LWP::Protocol::https then pulls in Net::SSLeay"}, {"owner": {"reputation": 564, "user_id": 5989906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/otUg0.jpg?s=128&g=1", "display_name": "Samuel Prevost", "link": "https://stackoverflow.com/users/5989906/samuel-prevost"}, "edited": false, "score": 0, "creation_date": 1590918775, "post_id": 53103751, "comment_id": 109857529, "body": "When running <code>plenv install -l</code> I got a <code>No backend configured for scheme https</code> too. Installing <code>HTTP::Tinyish</code>, then <code>LWP::Protocol::https</code> fixed my problem. Make sure they&#39;re installed by re-running the install command and verifying you get the &quot;Already installed&quot; message."}], "tags": [], "owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "is_accepted": false, "score": 5, "last_activity_date": 1600797240, "last_edit_date": 1600797240, "creation_date": 1541083985, "answer_id": 53103751, "question_id": 53102332, "link": "https://stackoverflow.com/questions/53102332/no-backend-configured-for-scheme-https/53103751#53103751", "title": "No backend configured for scheme https", "body": "<p><code>HTTP::Tinyish</code> is a frontend to <code>HTTP::Tiny</code>, libwww-perl and the command-line tools <code>curl</code> and <code>wget</code>. It picks one that is available based on the URL scheme.</p>\n<p>The two Perl modules do not support TLS out of the box . My guess is therefore that you neither have <code>curl</code> nor <code>wget</code> installed, and your libwww-perl does not support TLS.</p>\n<p>So you may be able to fix your problem by installing either <code>curl</code>, <code>LWP::Protocol::https</code> or both.</p>\n"}], "owner": {"reputation": 27, "user_id": 7816650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a47efba308a0b838afc8a58adde68618?s=128&d=identicon&r=PG&f=1", "display_name": "mike joe", "link": "https://stackoverflow.com/users/7816650/mike-joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1600797240, "creation_date": 1541078962, "question_id": 53102332, "link": "https://stackoverflow.com/questions/53102332/no-backend-configured-for-scheme-https", "title": "No backend configured for scheme https", "body": "<p>anyone can help. am getting that error</p>\n\n<p>Error: No backend configured for scheme https</p>\n\n<pre><code>my $http = HTTP::Tinyish-&gt;new();\n\n\n my $res = $http-&gt;post(\"https://api.sandbox.paypal.com/v1/oauth2/token/\", {\n      headers =&gt; { 'username' =&gt; 'client_id',\n                   'password' =&gt; 'screte',\n                   'grant_type' =&gt; 'client_credentials'}\n  });\n\n  $http-&gt;get(\"https://api.paypal.com/v1/payments/payment/PAY-5YK922393D847794YKER7MUI\", {\n      headers =&gt; { 'Content-Type' =&gt; 'application/json' },\n  });\n\n\n\n  if ( $res-&gt;{'is_success'} ) {\n  print Dumper( decode_json $res-&gt;{'content'} );\n} else {\n  print \"$res-&gt;{'status'} $res-&gt;{'reason'}\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "timer", "interrupt"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1541098657, "post_id": 53100582, "comment_id": 93110615, "body": "can you clarify?  what does your code example get wrong, if you replace the sleep with your actual data collecting code?"}, {"owner": {"reputation": 128, "user_id": 1724266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b7e384340762f6c3f888087bed44c15?s=128&d=identicon&r=PG", "display_name": "Georgy Vladimirov", "link": "https://stackoverflow.com/users/1724266/georgy-vladimirov"}, "edited": false, "score": 0, "creation_date": 1541450101, "post_id": 53100582, "comment_id": 93213988, "body": "I think the problem in your code at the moment is that you collect your data (sleep) for only 3 seconds. You set your alarm timeout to 10 seconds. So, after the sleep of 3 seconds you wipe out the alarm, so you will never trigger it. I like the solution from @ikegami"}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 5, "last_activity_date": 1541077535, "creation_date": 1541077535, "answer_id": 53101914, "question_id": 53100582, "link": "https://stackoverflow.com/questions/53100582/how-to-create-interrupt-after-x-seconds-in-perl/53101914#53101914", "title": "How to create interrupt after x seconds in Perl?", "body": "<p>To create your own interrupts, you need two threads of execution. One way to do this is to launch a child process that will signal its parent when some condition is met.</p>\n\n<pre><code>$SIG{USR1} = \\&amp;code_to_run_after_interrupt;\nmy $ppid = $$;          # process id of parent\nif (fork() == 0) {\n    # child process\n    sleep 15;\n    kill 'USR1', $ppid;\n    exit;\n}\n... main execution thread\n</code></pre>\n\n<p>15 seconds after the <code>fork</code> call, your main script will stop what it's doing, execute the code in a subroutine named <code>code_to_run_after_interrupt</code>, and then resume the main thread of execution. </p>\n\n<p>(I use <code>SIGUSR1</code> here because handling <code>SIGINT</code> may make you unable to use <code>Ctrl-C</code> to stop your program)</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1541122526, "creation_date": 1541122526, "answer_id": 53111600, "question_id": 53100582, "link": "https://stackoverflow.com/questions/53100582/how-to-create-interrupt-after-x-seconds-in-perl/53111600#53111600", "title": "How to create interrupt after x seconds in Perl?", "body": "<p>That's the whole point of <code>alarm</code>! Just use a more suitable signal handler.</p>\n\n<pre><code>my @x;\n\n$SIG{ALRM} = sub {\n   print(\"$_\\n\") for @x;\n   $SIG{ALRM} = undef;\n};\n\nalarm(10);\n\n...\n</code></pre>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 1, "accepted_answer_id": 53101914, "answer_count": 2, "score": 2, "last_activity_date": 1541122526, "creation_date": 1541072464, "last_edit_date": 1541074099, "question_id": 53100582, "link": "https://stackoverflow.com/questions/53100582/how-to-create-interrupt-after-x-seconds-in-perl", "title": "How to create interrupt after x seconds in Perl?", "body": "<p>Let me explain task with code example:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $t = 3;\n\neval {\n    local $SIG{ALRM} = sub { die \"alarm\\n\" }; # NB: \\n required\n    print \"Start $t\\n\";\n    alarm(10);\n    sleep($t);  # instead of this I have some data that collect code\n    alarm(0);\n    print \"done with $t\\n\";\n};\n\nif ($@) {\n    die unless $@ eq \"alarm\\n\";\n    print \"timeout\\n\";\n}\n</code></pre>\n\n<p>Instead of <code>sleep</code> I have some code that push data to array. Array will be guaranteed filled by needed data during `x seconds. </p>\n\n<p>Question: how to print array after <code>x</code> second, without using <code>sleep</code> (non-blocking way) ?</p>\n\n<p>As far as I understand simplest way to set timer in perl is to use <code>$SIG{ALRM}</code>. But what to do if I don't need timer (can't use <code>sleep</code>), I just need to set one interrupt that must run after pre-defined amount of seconds ? Maybe I should use <code>SIGINT</code> for this task?</p>\n\n<p>Any help appreciated.</p>\n"}, {"tags": ["python", "perl", "flask"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4282214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c3e1ade41739dce0b2ae8d604ef8f3c?s=128&d=identicon&r=PG&f=1", "display_name": "Geoff W.", "link": "https://stackoverflow.com/users/4282214/geoff-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1541073336, "creation_date": 1541073336, "answer_id": 53100809, "question_id": 53093655, "link": "https://stackoverflow.com/questions/53093655/run-a-perl-script-from-within-flask-web-application/53100809#53100809", "title": "Run a perl script from within Flask Web Application", "body": "<p>Sub,</p>\n\n<p>I vote yes on subprocess, here's <a href=\"https://stackoverflow.com/questions/89228/calling-an-external-command-in-python\">a post on SO</a> about it. Control remains with Flask that way. An alternative might be to code a perl script that watchdogs for a trigger event depending on your needs, but that would put more of the process control on the perl side of things and less efficient use of resources.</p>\n"}], "owner": {"reputation": 3, "user_id": 10588558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad2dadd45681a0589a70fa1ef5175046?s=128&d=identicon&r=PG&f=1", "display_name": "Subzero123", "link": "https://stackoverflow.com/users/10588558/subzero123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1541073336, "creation_date": 1541031884, "question_id": 53093655, "link": "https://stackoverflow.com/questions/53093655/run-a-perl-script-from-within-flask-web-application", "title": "Run a perl script from within Flask Web Application", "body": "<p>I have a Flask Web Application that is periodically receiving JSON information from another application via HTTP POST.</p>\n\n<p>My Flask Web Application is running on a CentOS 7 Server with Python 2.7.X.</p>\n\n<p>I am able to parse the fields from this received JSON in the Flask Web Application and get some of the information that interests me. For example: I get some JSON input and extract an \"ID\":\"7\" field from it.</p>\n\n<p>What I want to do now is run a perl script from within this Flask Web Application by using this \"ID\":\"7\".</p>\n\n<p>Running <strong>'perl my_perl_script.pl 7'</strong> manually on the command line works fine. What I want is for the Flask Web Application to perform this automatically whenever it receives an HTTP POST, by using the specific ID number found in this POST.</p>\n\n<p>How can I do that in Flask?\nIs it a good idea to do it with a <a href=\"https://docs.python.org/2/library/subprocess.html\" rel=\"nofollow noreferrer\">subprocess</a> call or should I consider implementing queues with Celery/rq? Or maybe some other solution?</p>\n\n<p>I think the perl script should be invoked as a separate Linux process, independent of the Flask Web Application.</p>\n\n<p>Thank you in advance :)</p>\n"}]