[{"tags": ["perl", "emacs", "verilog", "system-verilog"], "answers": [{"tags": [], "owner": {"reputation": 1157, "user_id": 839411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a12b991d6125bdbfddc6d9e1b70f52fc?s=128&d=identicon&r=PG", "display_name": "alex.forencich", "link": "https://stackoverflow.com/users/839411/alex-forencich"}, "is_accepted": false, "score": 1, "last_activity_date": 1540414783, "last_edit_date": 1540414783, "creation_date": 1449105205, "answer_id": 34056167, "question_id": 34053702, "link": "https://stackoverflow.com/questions/34053702/embedding-perl-in-verilog/34056167#34056167", "title": "Embedding perl in verilog", "body": "<p>Well, if you can do something with generate statements, use them.  If you can't (say, if you want a parametrizable number of ports), then you will probably have to write a script to generate the verilog from a template.  You'll have to run the script manually whenever you need to make changes.  </p>\n\n<p>Here is an example of what you can do in Python, I'm sure you can do something similar in whatever language you prefer: <a href=\"https://github.com/alexforencich/verilog-axis/blob/553547f661f54153e618ebf8297f6e4f92253e6e/rtl/axis_mux.py\" rel=\"nofollow noreferrer\">https://github.com/alexforencich/verilog-axis/blob/553547f661f54153e618ebf8297f6e4f92253e6e/rtl/axis_mux.py</a> .  </p>\n"}, {"tags": [], "owner": {"reputation": 2303, "user_id": 913172, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2e6c56a8b9908be70a4c2515572f9774?s=128&d=identicon&r=PG", "display_name": "e19293001", "link": "https://stackoverflow.com/users/913172/e19293001"}, "is_accepted": false, "score": 1, "last_activity_date": 1449108168, "creation_date": 1449108168, "answer_id": 34056593, "question_id": 34053702, "link": "https://stackoverflow.com/questions/34053702/embedding-perl-in-verilog/34056593#34056593", "title": "Embedding perl in verilog", "body": "<blockquote>\n  <p>All that is within AUTOMATE_THIS comment section should be generated when I call verilog AUTOs in emacs.</p>\n</blockquote>\n\n<p>You can do this with emacs lisp:</p>\n\n<pre><code>(defun AUTO()\n  (interactive)\n  (insert (format \"    /*AUTOMATE_THIS\n    $num=$PARAMS{NUM};\n    for ($i=0;$i&lt;$num;$i=$i+1) {\n    FILE&lt;&lt;print\n\n    }\n    FILE    \n    */\")))\n</code></pre>\n\n<p>Point the cursor before the last parenthesis then evaluate this function with</p>\n\n<pre><code>C-x C-e\n</code></pre>\n\n<p>To use this function, </p>\n\n<pre><code>M-x AUTO\n</code></pre>\n\n<p>AUTOMATE_THIS comment section will be generated and be able to do it single shot.</p>\n"}, {"tags": [], "owner": {"reputation": 30055, "user_id": 2755607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0b903bf594599a27ed5df3776e42c5b?s=128&d=identicon&r=PG", "display_name": "dave_59", "link": "https://stackoverflow.com/users/2755607/dave-59"}, "is_accepted": false, "score": 1, "last_activity_date": 1449118202, "creation_date": 1449118202, "answer_id": 34058096, "question_id": 34053702, "link": "https://stackoverflow.com/questions/34053702/embedding-perl-in-verilog/34058096#34058096", "title": "Embedding perl in verilog", "body": "<p>No pre-processor will be able to deal with different instances of <code>foo</code> that override <code>NUM</code> with different values. You <strong>must</strong> use <code>generate</code> statements for that.</p>\n\n<p>But if you are just looking for a pre-processor where you can define macros with loops, here are a few suggestions.</p>\n\n<ul>\n<li><a href=\"https://github.com/aandyl/vp3/wiki/Manual\" rel=\"nofollow\">https://github.com/aandyl/vp3/wiki/Manual</a></li>\n<li><a href=\"http://vbpp.sourcearchive.com/documentation/1.1.0-6/\" rel=\"nofollow\">http://vbpp.sourcearchive.com/documentation/1.1.0-6/</a></li>\n</ul>\n\n<p>Most of these are fairly old, as most people have come to realize the <code>generate</code> does what they need. Also SystemVerilog has many new constructs that make these less necessary.</p>\n"}], "owner": {"reputation": 1, "user_id": 5632377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa6e354e4acef004c6ef05b28fd4184b?s=128&d=identicon&r=PG&f=1", "display_name": "buff", "link": "https://stackoverflow.com/users/5632377/buff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1540414783, "creation_date": 1449092959, "last_edit_date": 1449094063, "question_id": 34053702, "link": "https://stackoverflow.com/questions/34053702/embedding-perl-in-verilog", "title": "Embedding perl in verilog", "body": "<p>Looking for a way to automate generation of repetitive verilog code using perl and verilog autos and without using generate statements. </p>\n\n<p>Specifically, I'd like to do this:</p>\n\n<p>All that is within <code>AUTOMATE_THIS</code> comment section should be generated when I call verilog <code>AUTO</code>s in emacs. Of course, I can write a perl script and run it outside of my emacs session, reload the buffer and then do the verilog <code>AUTO</code> expansion but I'd like to do this single shot.</p>\n\n<pre><code>module foo (/*AUTOARG*/);\n\n    parameter NUM=7; // Number of ops\n\n    input clk;\n\n    /*AUTOMATE_THIS\n    $num=$PARAMS{NUM};\n    for ($i=0;$i&lt;$num;$i=$i+1) {\n    FILE&lt;&lt;print\n\n    }\n    FILE    \n    */\nendmodule\n</code></pre>\n"}, {"tags": ["perl", "error-handling", "perl-module", "alarm"], "answers": [{"comments": [{"owner": {"reputation": 1536, "user_id": 4078249, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/86dafd29ac331022197e140c692f25eb?s=128&d=identicon&r=PG&f=1", "display_name": "learningMyWayThru", "link": "https://stackoverflow.com/users/4078249/learningmywaythru"}, "edited": false, "score": 0, "creation_date": 1449094978, "post_id": 34052484, "comment_id": 55862695, "body": "Thanks. This works. However a question on this. After 3 attempts when the application dies, the error message displayed is &quot;Timeout&quot; which is fair. What is significance local $SIG{ALRM} = sub { die &quot;alarm\\n&quot;; }; statement  involved in this? It does not print &quot;alarm&quot; when terminating. I believe it should print message mentioned in $SIG{ALRM} rather than an explicit die when attempts get exhausted."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1536, "user_id": 4078249, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/86dafd29ac331022197e140c692f25eb?s=128&d=identicon&r=PG&f=1", "display_name": "learningMyWayThru", "link": "https://stackoverflow.com/users/4078249/learningmywaythru"}, "edited": false, "score": 0, "creation_date": 1449178337, "post_id": 34052484, "comment_id": 55906457, "body": "Uh, iif you don&#39;t like the message or want to do something other than dying, there&#39;s nothing stopping you.  // To differentiate between timeouts and other exceptions."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1449088466, "creation_date": 1449088466, "answer_id": 34052484, "question_id": 34052268, "link": "https://stackoverflow.com/questions/34052268/perl-retry-on-alarm/34052484#34052484", "title": "Perl Retry on alarm", "body": "<pre><code>local $SIG{ALRM} = sub { die \"alarm\\n\"; };\n\nfor my $x (@array) {\n   my $attempts_remaining = 3;\n   while (1) {\n      last if eval {\n         alarm(2);\n         subroutine_call();\n         alarm(0);\n         return 1;\n      };\n\n      my $e = $@;\n      die($e) if $e ne \"alarm\\n\";\n      die(\"Timeout!\\n\") if !--$attempts_remaining;\n      warn(\"Timeout! Trying again...\\n\");\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 1536, "user_id": 4078249, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/86dafd29ac331022197e140c692f25eb?s=128&d=identicon&r=PG&f=1", "display_name": "learningMyWayThru", "link": "https://stackoverflow.com/users/4078249/learningmywaythru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 34052484, "answer_count": 1, "score": 1, "last_activity_date": 1449088466, "creation_date": 1449087628, "question_id": 34052268, "link": "https://stackoverflow.com/questions/34052268/perl-retry-on-alarm", "title": "Perl Retry on alarm", "body": "<p>I am trying to retry certain logic when an alarm is triggered. Is that possible.\n I have defined the alarm as below:</p>\n\n<pre><code>local $SIG{ALRM} = sub {\n         if($attempt &lt;=5) {\n              print \"NExt attempt\\n\";\n              $attempt = $attempt + 1;\n              my $val = subroutine_call();\n         } else{\n         Carp::confess \"Die now\\n\"; \n         }\n</code></pre>\n\n<p>My code snippet is as below:</p>\n\n<pre><code> foreach my $x (@array)\n {\n     eval {\n        alarm(2);\n        my $val = subroutine_call();\n        alarm(0);\n     };\n\n     print \"Moving on \\n\";\n     ## some code\n  }\n</code></pre>\n\n<p>I wish to retry calling the subroutine_call upto 3 times when the alarm is triggered before terminating the application. After calling the subrountine_call(irrespective of whether it was called after alarm got triggered or not), it should display print statement.</p>\n\n<p>I know that the code flow would deviate once the alarm is triggered and  subrountine_call is made through the alarm definition and it would not execute the print statement. I want it to behave as if it would have if alarm would not hadn't gotten triggered.</p>\n\n<p>Is that possible? I am skeptical but wanted to know if it is so.</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["perl", "sockets", "client-server"], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 1, "last_activity_date": 1449081400, "last_edit_date": 1449081400, "creation_date": 1449081073, "answer_id": 34050356, "question_id": 34050073, "link": "https://stackoverflow.com/questions/34050073/perl-inet-socket-connect-clarification/34050356#34050356", "title": "Perl Inet Socket connect clarification", "body": "<p>It is all rather straightforward. An attempt to connect to the accessible server where no one is listening on the specific port quickly returns with the failure - the other side quickly informs the caller that no one is home, so to speak.</p>\n\n<p>However, if you attempt to connect to the server which is not accessible or the port is open, but the listener on this port is busy with something else, connect call will <em>block</em> and wait untill the attempt to reach the server timeouts or the listener on the other side picks up the call. In this case your alarm fires, and your value is undefined - because connect did not complete in 3 seconds you have alotted.</p>\n\n<p>I hope, it is clear now.</p>\n"}], "owner": {"reputation": 1536, "user_id": 4078249, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/86dafd29ac331022197e140c692f25eb?s=128&d=identicon&r=PG&f=1", "display_name": "learningMyWayThru", "link": "https://stackoverflow.com/users/4078249/learningmywaythru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 34050356, "answer_count": 1, "score": 0, "last_activity_date": 1449081400, "creation_date": 1449080144, "question_id": 34050073, "link": "https://stackoverflow.com/questions/34050073/perl-inet-socket-connect-clarification", "title": "Perl Inet Socket connect clarification", "body": "<p>I am trying to understand how Inet Socket connect works in perl. I have code snippet below.</p>\n\n<pre><code>socket(my $socket, Socket::PF_INET, Socket::SOCK_STREAM, $protocol) ||\n    Carp::confess \"CONNECT_ERROR: Unable to create socket. $!\\n\";\nlocal $SIG{ALRM} = sub { Carp::confess \"Connection Timeout\"; };\n\n eval {\n            alarm(3);\n            $return_val = connect( $socket, $full_address );\n            alarm(0);\n        }; \n</code></pre>\n\n<p>Below are 3 scenarios:</p>\n\n<p>1) If full address were to be defined to server and an open port, value of return_val is defined. </p>\n\n<p>2) If the application were to attempt to communicate with not opened port on same server, return_val is undefined. However in this case, the alarm has not triggered.</p>\n\n<p>3) However there are times when attempting to connect with server on open port, the alarm get triggered. This implies the connect statement has not yet fully executed.</p>\n\n<p>I am confused with the behavior displayed in the 2nd and 3rd scenario. How does connect differentiate between not responding and slow response? I would ideally expect the server not to respond when the client is attempting to communicate at a non-opened port which implies connect should not finish execution which should trigger the alarm. Is there an internal timeout for connect? I searched for its default value but not finding any.</p>\n\n<p>Am I missing something out here? Can someone please help explain?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "error-handling"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 0, "last_activity_date": 1449080427, "creation_date": 1449080427, "answer_id": 34050156, "question_id": 34049487, "link": "https://stackoverflow.com/questions/34049487/perl-carp-confess-not-terminating-application/34050156#34050156", "title": "Perl Carp confess not terminating application", "body": "<p><code>eval BLOCK</code>, <code>eval EXPR</code>, <code>do EXPR</code> and XS code calling Perl code are the only things capable of catching exceptions.</p>\n\n<p>It's also possible that an exception was thrown in the first place, such as when <code>die</code> is very badly overridden.</p>\n"}], "owner": {"reputation": 1536, "user_id": 4078249, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/86dafd29ac331022197e140c692f25eb?s=128&d=identicon&r=PG&f=1", "display_name": "learningMyWayThru", "link": "https://stackoverflow.com/users/4078249/learningmywaythru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 34050156, "answer_count": 1, "score": 1, "last_activity_date": 1449080427, "creation_date": 1449078282, "question_id": 34049487, "link": "https://stackoverflow.com/questions/34049487/perl-carp-confess-not-terminating-application", "title": "Perl Carp confess not terminating application", "body": "<p>I have an module which uses \n<code>Carp::confess \"&lt;message here&gt;\"</code> (Assume this statement is in subroutine B). As per my interpretation, the message would be output to STDERR and the application should terminate at that point. However application doesn't terminate. I put a print statements before and after the confess statement just to ensure that the confess statement does get executed. \nI even checked if the subroutine A which calls subroutine has an eval{} block defined to catch the error and not act on it. But it doesn't seem to be the case.</p>\n\n<p>Are there other scenarios where Carp::confess will not terminate the program? I am bit confused regarding this.</p>\n\n<p>Thank-you</p>\n"}, {"tags": ["oracle", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1449078147, "post_id": 34049334, "comment_id": 55853420, "body": "Each element of a string is a character. Those characters can be bytes, Unicode Code points, or anything else. /// It sounds like you have a string of Unicode Code Points, and that want the limit the size of its UTF-8 encoding. You don&#39;t have its UTF-8 encoding of the string, so getting that is the first thing you need to do."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 2, "creation_date": 1449083413, "post_id": 34049334, "comment_id": 55856405, "body": "It sounds like you want to truncate at a particular graphical length of the entire string (in pixels or whatever), not bytes.  Every character is the same number of bytes (except for special characters that take up 2 bytes, but generally all characters are a single byte). That doesn&#39;t mean they&#39;re all the same graphical length - that depends on the font.  You could use a fixed width font like Courier to get around that. Otherwise, you would have to retrieve the font details in order to calculate length."}], "answers": [{"tags": [], "owner": {"reputation": 2450, "user_id": 1186729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec301bbe6bfd4c849a29d715f6094745?s=128&d=identicon&r=PG", "display_name": "Denis Ibaev", "link": "https://stackoverflow.com/users/1186729/denis-ibaev"}, "is_accepted": false, "score": -1, "last_activity_date": 1449094398, "creation_date": 1449094398, "answer_id": 34054120, "question_id": 34049334, "link": "https://stackoverflow.com/questions/34049334/truncate-a-string-in-bytes-in-perl/34054120#34054120", "title": "Truncate a string in bytes in Perl", "body": "<p>You need <a href=\"http://metacpan.org/pod/bytes\" rel=\"nofollow\"><code>bytes</code></a> pragma:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use utf8;\nmy $str   = \"\u0444\u0443\u0443\";\nmy $chars = length($str);      # 3\n{\n    use bytes;\n    my $bytes = length($str);  # 6\n}\n</code></pre>\n"}], "owner": {"reputation": 710, "user_id": 3224907, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a30ee6a5c98fdddd76cfeff0ad6c8e2d?s=128&d=identicon&r=PG&f=1", "display_name": "user3224907", "link": "https://stackoverflow.com/users/3224907/user3224907"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449094398, "creation_date": 1449077825, "question_id": 34049334, "link": "https://stackoverflow.com/questions/34049334/truncate-a-string-in-bytes-in-perl", "title": "Truncate a string in bytes in Perl", "body": "<p>I am printing text on a PDF report using Perl. The data is coming from an oracle database table. I want to truncate the string to a specific size if it's longer than that size. I tried using the <code>substr</code> function but it seems like that's calculating in characters. I want to calculate the space taken up instead. This was my attempt:</p>\n\n<pre><code>$field_str .= ($totalwidth &lt; 210) ? ' ' : \"\\n\";\n$field_str_trunc = substr( $field_str, 0, 278 );\n</code></pre>\n\n<p>This worked fine when the data was in all upper case; however, when I made it lower case and added more data, not enough data was presented on the PDF. How can I achieve this?</p>\n"}, {"tags": ["macos", "perl", "docker"], "answers": [{"tags": [], "owner": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "is_accepted": true, "score": 1, "last_activity_date": 1449087463, "creation_date": 1449087463, "answer_id": 34052226, "question_id": 34049289, "link": "https://stackoverflow.com/questions/34049289/docker-perl-sublimetext3-development-setup/34052226#34052226", "title": "Docker Perl Sublimetext3 development setup", "body": "<p>I would think that you could have your perl install on a mounted docker volume (as you suggested)</p>\n\n<p>Then in the container do</p>\n\n<pre><code>perl -V\n</code></pre>\n\n<p>which amongst other things will give you </p>\n\n<pre><code>  @INC:\n    /usr/local/lib64/perl5\n    /usr/local/share/perl5\n    /usr/lib64/perl5/vendor_perl\n    /usr/share/perl5/vendor_perl\n    /usr/lib64/perl5\n    /usr/share/perl5\n    .\n</code></pre>\n\n<p>From your Mac you can then use the PERL5LIB environment to add these to the search path. Ideally these will all be in your mount point. The lib64 sections will not work as these are compiled modules. </p>\n\n<pre><code>export PERL5LIB=/my/docker/mount/perl/lib:/my/docker/mount/lib2\n</code></pre>\n\n<p>You will probably only need the share sections</p>\n\n<p>I would also match the perl version on the Mac to the docker version by using <a href=\"http://perlbrew.pl/\" rel=\"nofollow\">perlbrew</a>. This is also available in <code>perl -V</code></p>\n\n<p>Just as a general rule, never mess with the Mac Perl standard install as it causes many problems as the OS uses it for things</p>\n"}], "owner": {"reputation": 583, "user_id": 3634493, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c4aa08e3beed0090211f6af378c0b600?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Taylor", "link": "https://stackoverflow.com/users/3634493/simon-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 34052226, "answer_count": 1, "score": 2, "last_activity_date": 1449087463, "creation_date": 1449077684, "question_id": 34049289, "link": "https://stackoverflow.com/questions/34049289/docker-perl-sublimetext3-development-setup", "title": "Docker Perl Sublimetext3 development setup", "body": "<p>I am setting up a perl development environment for the first time in a number of years I want to leverage docker and sublime text plus I run on MAC OSX.</p>\n\n<p>I wanted to use Docker to create a dev env that i could share with others on my team.\nI like SublimeText and integration with PerlCritic.\nI understand about host mounted volumes to allow me to edit locally and save on the docker container.\nWhat I cant work out is how to avoid installing all the perl dependencies on my MAC to enable Sublime to have access to them and allow the sublime perl critic integration to function.</p>\n\n<p>Is it possible to :-</p>\n\n<p>a) Install the complete perl environment in a docker container (this much i know is true)<br>\nb) Use SublimeText on my MAC such that all the Sublime Plugins continue to work from the dependencies in the container?  </p>\n\n<p>I also understand that Sublime Text has build plugins for perl but from what i understand that occurs at build time not whilst developing - thus still requiring dependencies locally on the MAC.</p>\n"}, {"tags": ["perl", "reference", "configuration-files"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1449076898, "post_id": 34048420, "comment_id": 55852655, "body": "<code>\\$var2 = \\$var1;</code> (assigning to a reference in order to the alias two variables) was just added, but <code>my $ref = \\$var; $$ref = $val;</code> (assigning to a referenced scalar in order to change the scalar) is ancient."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1449079495, "post_id": 34048420, "comment_id": 55854217, "body": "I would take a slightly different approach: use a data structure to store a reference to each variable, its default value, and the name of the corresponding key in the config hash. Iterate through the structure and assign the appropriate value to the reference. That way the names of your variables don&#39;t have to match the keys in the config hash, and you&#39;re not doing weird &quot;variable as a variable name&quot; stuff. Something like this: <code>my %defaults = ( foo =&gt; { ref =&gt; \\$foo, default =&gt; &quot;foo&quot; }, ... );</code> Here, <code>foo</code> is a key in the config hash and <code>$foo</code> is the variable you want to &quot;load.&quot;"}, {"owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1449081502, "post_id": 34048420, "comment_id": 55855358, "body": "@ThisSuitIsBlackNot a good point.  However, there is an order of operations here.  in my example bar is dependent on foo which must be defined first for bar to be defined correctly.  Thus I can&#39;t define the &quot;default&quot; key for bar until foo has run.  I don&#39;t suppose you know a way to keep a default hash with that requirement?  (though for the record I had figured my load_var subroutine would take an optional argument to overwrite the name of the config file variable.  I prefer to default to things being the same just to speed up the conversion now, while making it not hard coded."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1449082969, "post_id": 34048420, "comment_id": 55856169, "body": "How do the things that use the module, use the variables? Do they rely on a bulk import e.g. <code>use GlobalDefs;</code> to set a whole bunch of things up?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1449082970, "post_id": 34048420, "comment_id": 55856172, "body": "Sure, that&#39;s doable. Use an array so you can iterate in a fixed order and store a reference to the other variable in the &quot;default&quot; field, e.g. <code>my @defaults = ( { config =&gt; &#39;foo&#39;, ref =&gt; \\$foo, default =&gt; &quot;foo&quot; }, { config =&gt; &#39;bar&#39;, ref =&gt; \\$bar, default =&gt; \\$foo }, ... );</code> You&#39;ll have to check whether the default is a reference or not and handle accordingly."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1449083732, "post_id": 34048420, "comment_id": 55856585, "body": "Also, keep in mind that this type of thing should only be used as a stop-gap measure to make further refactoring easier. Ultimately you should move away from having a whole bunch of scalars and toward having a single configuration hash. You mention that there are multiple scripts depending on this module; one approach would be to have the bunch of scalars <i>and</i> a hash containing the same data. Then you can migrate the scripts over to using the hash one by one, and when none of them use the scalars anymore, remove that from the module."}, {"owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1449084316, "post_id": 34048420, "comment_id": 55856948, "body": "@ThisSuitIsBlackNot can I combine a reference with a string?  defaults=\\$foo + &quot;bar&quot; to defer building the string until after foo is set?  I can do it, but the ways I can think of are pretty ugly.  I do agree this is all stop-gap, there are lots of issues with module I want removed.  They have modules building strings based off of other modules variables which in turn are based off of other module variables.  And I want to allow the base variable to be configurable but right now the change won&#39;t propagate to the other defined variables.  Lots of things will be changed."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1449085224, "post_id": 34048420, "comment_id": 55857469, "body": "You could use an anonymous subroutine to construct the default value at run-time, e.g. <code>sub { $$foo . &quot;bar&quot; }</code>. You could do lots of other things, too. But this is all getting a little complicated; can you answer @Sobrique&#39;s question about how the other scripts are using this module and <a href=\"https://stackoverflow.com/posts/34048420/edit\">edit</a> an example into your question? There might be a better approach."}], "answers": [{"comments": [{"owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "edited": false, "score": 0, "creation_date": 1449077849, "post_id": 34049227, "comment_id": 55853249, "body": "a very interesting idea.  I don&#39;t think I can use it, the reason I&#39;m keeping the module is because so many others use it; I want to avoid having to touch every variable reference in all the scripts.  Still, a cool concept to know about in the future :)"}, {"owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "edited": false, "score": 0, "creation_date": 1449078539, "post_id": 34049227, "comment_id": 55853655, "body": "Honest question, could you elaborate on why variable names idea is bad?  I read the link but that example doesn&#39;t seem to apply (here the problem was they didn&#39;t know the variable ahead of time, in my case I&#39;m forcing the config file to be equal a predefined variable not the other way around, I&#39;ll know variable names ahead of time so  no increased chance of collision then existed before conf file).  I do see a problem with making it harder to rename variables later which bothers me; but a series of hashes like the link suggests seems as bad for that?  Is there <i>another</i> issue I&#39;m missing?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "edited": false, "score": 0, "creation_date": 1449082914, "post_id": 34049227, "comment_id": 55856142, "body": "Thinking about it, I&#39;d be generally less worried in the scenario you outline - because effectively, a module functions as a hash in that it has it&#39;s own namespace that you can optionally import. You&#39;re already namespacing. (I hadn&#39;t finished reading through that PM thread). It still makes me twitch though - IMO the right way to handle it is object based encapsulation rather than bulk import of a bunch of global defs. That&#39;s sometimes easier said than done in legacy code though :/"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "edited": false, "score": 0, "creation_date": 1449083275, "post_id": 34049227, "comment_id": 55856323, "body": "Thinking further - something like tie might also be relevant <a href=\"http://www.perlmonks.org/?node_id=15838\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=15838</a>"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 0, "last_activity_date": 1449077452, "creation_date": 1449077452, "answer_id": 34049227, "question_id": 34048420, "link": "https://stackoverflow.com/questions/34048420/writing-reflective-method-to-load-variables-from-conf-file-and-assigning-refere/34049227#34049227", "title": "writing reflective method to load variables from conf file, and assigning references?", "body": "<p>For this sort of problem, I would be thinking along the lines of using the <a href=\"http://perldoc.perl.org/perlsub.html#Autoloading\" rel=\"nofollow\">AUTOLOAD</a> - I know it's not quite what you asked, but it's sort of doing a similar thing:</p>\n\n<blockquote>\n  <p>If you call a subroutine that is undefined, you would ordinarily get an immediate, fatal error complaining that the subroutine doesn't exist. (Likewise for subroutines being used as methods, when the method doesn't exist in any base class of the class's package.) However, if an AUTOLOAD subroutine is defined in the package or packages used to locate the original subroutine, then that AUTOLOAD subroutine is called with the arguments that would have been passed to the original subroutine. </p>\n</blockquote>\n\n<p>Something like:</p>\n\n<pre><code>#!/usr/bin/env perl\n\npackage Narf;\nuse Data::Dumper;\nuse strict;\nuse warnings;\nour $AUTOLOAD;\nmy %conf = ( fish =&gt; 1, \n             carrot =&gt; \"banana\" ); \n\nsub AUTOLOAD { \n    print \"Loading $AUTOLOAD\\n\";\n    ##read config file\n    my $target = $AUTOLOAD =~ s/.*:://gr; \n    print $target;\n    return $conf{$target} // 0; \n}\n\nsub boo {\n    print \"Boo!\\n\";\n}\n</code></pre>\n\n<p>You can either call it OO style, or just 'normally' - but bear in mind this creates subs, not variables, so you might need to specify the package (or otherwise 'force' an import/export)</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Narf;\n\nprint Narf::fish(),\"\\n\";\nprint Narf::carrot(),\"\\n\";\nprint Narf::somethingelse(),\"\\n\";\nprint Narf::boo;\n</code></pre>\n\n<p>Note - as these are autoloaded, they're not in the local namespace. Related to variables you've got <a href=\"http://www.perlmonks.org/?node_id=372621\" rel=\"nofollow\">this perlmonks discussion</a> but I'm not convinced that's a good line to take, for all the reasons outlined in <a href=\"http://perl.plover.com/varvarname.html\" rel=\"nofollow\">Why it's stupid to `use a variable as a variable name'</a></p>\n"}], "owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 34049227, "answer_count": 1, "score": 1, "last_activity_date": 1449077452, "creation_date": 1449075182, "question_id": 34048420, "link": "https://stackoverflow.com/questions/34048420/writing-reflective-method-to-load-variables-from-conf-file-and-assigning-refere", "title": "writing reflective method to load variables from conf file, and assigning references?", "body": "<p>I'm working with ugly code and trying to do a cleanup by moving values in a module into a configuration file.  I want to keep the modules default values if a variable doesn't exist in the conf file, otherwise use the conf file version.  There are lots of variables (too many) in the module so I wanted a helper method to support this.  This is a first refactoring step, I likely will go further to better handle config variables later, but one step at a time.</p>\n\n<p>I want a method that would take a variable in my module and either load the value from conf or set a default.  So something like this (writing this from scratch, so treat it as just pseudocode for now)</p>\n\n<pre><code>Our ($var_a, $var_b ...);\nexport($var_a, $var_b ...);\n\nmy %conf = #load config file\n\nload_var(\\$var_a, \"foo\");\nload_var(\\$var_b, \"$var_abar\");\n\nsub load_var($$){\n   my($variable_ref, $default) = @_\n\n   my $variale_name = Dumper($$variable_ref); #get name of variable\n\n   my $variable_value = $conf{$variable_name} // $default;\n\n   #update original variable by having $variable_ref point to $variable_value\n}\n</code></pre>\n\n<p>So two questions here.  First, does anyone know if some functionality like my load_var already exists which I an reuse?</p>\n\n<p>Second, if I have to write it from scratch, can i do it with a perl version older then 5.22?  when I read perlref it refers to setting references as being a new feature in 5.22, but it seems odd that such a basic behavior of references wasn't implemented sooner, so I'm wonder if I'm misunderstanding the document.  Is there a way to pass a variable to my load_var method and ensure it's actually updated?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 3252, "user_id": 771480, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f759fe160ddd3aa8acf55def94c2d872?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/771480/nemo"}, "edited": false, "score": 0, "creation_date": 1449076032, "post_id": 34048555, "comment_id": 55852069, "body": "The dup contains only <code>goto &amp;name</code>. (not counting the subref and <code>*</code>). This is simple and clear answer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3252, "user_id": 771480, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f759fe160ddd3aa8acf55def94c2d872?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/771480/nemo"}, "edited": false, "score": 1, "creation_date": 1449076112, "post_id": 34048555, "comment_id": 55852135, "body": "The &quot;duplicate&quot; answers your question in the question itself. I think this makes it a very poor choice of duplicate. I&#39;ve reopened this question since this one is far clearer than the other one and fare more likely to be of use to others. /// <code>goto &amp;name</code> is like <code>&amp;name</code>, but it removes the stack frame from the stack. You might want to do that to it from <code>croak</code> (usually a bad thing) or to save memory, but it&#39;s a little slower."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1449076335, "last_edit_date": 1449076335, "creation_date": 1449075487, "answer_id": 34048555, "question_id": 34048372, "link": "https://stackoverflow.com/questions/34048372/how-to-cheat-on-prototype-checking/34048555#34048555", "title": "How to cheat on prototype checking?", "body": "<pre><code>&amp;Some::func(@_);  # Bypass prototype check.\n</code></pre>\n\n<p>There are other options.</p>\n\n<pre><code>(\\&amp;Some::func)-&gt;(@_);  # Call via a reference.\n&amp;Some::func;           # Don't create a new @_.\ngoto &amp;Some::func;      # Don't create a new @_, and remove current call frame from stack.\n</code></pre>\n\n<p>Method calls always ignore prototypes.</p>\n"}], "owner": {"reputation": 3252, "user_id": 771480, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f759fe160ddd3aa8acf55def94c2d872?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/771480/nemo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 34048555, "answer_count": 1, "score": 3, "last_activity_date": 1449076335, "creation_date": 1449075058, "question_id": 34048372, "link": "https://stackoverflow.com/questions/34048372/how-to-cheat-on-prototype-checking", "title": "How to cheat on prototype checking?", "body": "<p>Want write an simple wrapper to some foreign perl module. Simplified example:</p>\n\n<pre><code>use 5.014;\nuse warnings;\n\n#foreign package\npackage Some {\n    sub func {\n        my($x,$y) = @_;\n        return $x.$y;\n    }\n};\n\n#my own packages\npackage My {\n    #use Some ();\n    sub func { Some::func(@_); }\n}\n\npackage main {\n    #use My;\n    say My::func(\"res\",\"ult\");\n}\n</code></pre>\n\n<p>This works OK and prints <code>result</code>.</p>\n\n<p>But now i meet a module which using prototypes, e.g. the above looks like:</p>\n\n<pre><code>package Some {\n    sub func($$) {     # &lt;-- prototype check\n        my($x,$y) = @_;\n        return $x.$y;\n    }\n};\n</code></pre>\n\n<p>When trying to use the <code>My</code> wrapper package - it says:</p>\n\n<pre><code>Not enough arguments for Some::func at ppp line 16, near \"@_)\"\n</code></pre>\n\n<p>Is possible \"cheat\" on prototype checking or i <strong>must</strong> write my wrapper as this?</p>\n\n<pre><code>    sub func { Some::func($_[0],$_[1]); }\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>    sub func($$) { Some::func($_[0],$_[1]); }\n</code></pre>\n"}, {"tags": ["perl", "shell", "python-2.7", "python-3.x", "awk"], "comments": [{"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1449076688, "post_id": 34048316, "comment_id": 55852519, "body": "Your code has nothing to do with the requirements you have.  At least show an honest attempt."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1449076822, "post_id": 34048316, "comment_id": 55852602, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2210349/bash-test-whether-string-is-valid-as-an-integer\">BASH: Test whether string is valid as an integer?</a>"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1449077824, "post_id": 34048316, "comment_id": 55853237, "body": "what&#39;s the problem with putting digits in a string field?"}], "answers": [{"comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1449078301, "post_id": 34049337, "comment_id": 55853508, "body": "Your INT test is wrong IMO: the value <code>1.1</code> would pass. This is better: <code>$i != int($i)</code>. Otherwise, pretty much my thoughts too."}, {"owner": {"reputation": 2930, "user_id": 5426358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/frbk5.png?s=128&g=1", "display_name": "F. Knorr", "link": "https://stackoverflow.com/users/5426358/f-knorr"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1449088050, "post_id": 34049337, "comment_id": 55858981, "body": "@glenn jackman: Yes, you&#39;re right, of course! The <code>$i == $i+0</code> tests whether the value is a number at all (int or double doesn&#39;t matter). I somehow forgot the <code>int</code>-restriction."}], "tags": [], "owner": {"reputation": 2930, "user_id": 5426358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/frbk5.png?s=128&g=1", "display_name": "F. Knorr", "link": "https://stackoverflow.com/users/5426358/f-knorr"}, "is_accepted": false, "score": 1, "last_activity_date": 1449094160, "last_edit_date": 1449094160, "creation_date": 1449077832, "answer_id": 34049337, "question_id": 34048316, "link": "https://stackoverflow.com/questions/34048316/how-to-find-out-the-column-type-in-shell-and-get-the-difference/34049337#34049337", "title": "how to find out the column type in shell and get the difference", "body": "<p>Here is an awk-solution:</p>\n\n<pre><code>awk -F\",\" 'NR==1{for(i=1; i &lt;= NF; i++){\n                        split($i,a,\"(\");\n                        name[i]=a[1]; \n                        type[i] = ($i ~ \"int\" ? \"INT\" : \"String\")}next}\n           {for(i=1; i &lt;= NF; i++){\n               if($i != int($i) &amp;&amp; type[i] == \"INT\"){error[i][NR] = $i}\n               if($i ~ /[0-9]+/ &amp;&amp; type[i] == \"String\"){error[i][NR] = $i}\n           }}\n           END{for(i in error){\n                       for(key in error[i]){\n                            print \"Actual column \"name[i]\" type is \"type[i]\\\n                                  \" but string was found at the position \"key-1\\\n                                  \", value is \"error[i][key]}}}' inputFile\n</code></pre>\n\n<p>The output is - as desired:</p>\n\n<pre><code>Actual column emp_id type is INT but string was found at the position 4, value is 8f\nActual column name type is String but string was found at the position 4, value is 123Rag\n</code></pre>\n\n<p>However, in my opinion <code>123Rag</code> is a string and should not be indicated as an incorrect entry in the second column.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1449085930, "creation_date": 1449085930, "answer_id": 34051760, "question_id": 34048316, "link": "https://stackoverflow.com/questions/34048316/how-to-find-out-the-column-type-in-shell-and-get-the-difference/34051760#34051760", "title": "how to find out the column type in shell and get the difference", "body": "<p>With <code>perl</code> I would tackle it like this:</p>\n\n<ul>\n<li>Define some regex patterns that match/don't match the string content. </li>\n<li>pick out the header row - separate it into names and types. (Optionally reporting if a type doesn't match). </li>\n<li>iterate your fields, matching by column, figuring out type and applying the regex to validate</li>\n</ul>\n\n<p>Something like:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\n#define regex to apply for a given data type\nmy %pattern_for = (\n    int    =&gt; qr/^\\d+$/,\n    string =&gt; qr/^[A-Z]+$/i,\n);\n\nprint Dumper \\%pattern_for;\n\n#read the first line. \n# &lt;&gt; is a magic filehandle, that reads files specified as arguments \n# or piped input - like grep/sed do. \nmy $header_row = &lt;&gt;;\n#extract just the names, in order. \nmy @headers = $header_row =~ m/(\\w+)\\(/g;\n#create a type lookup for the named headers. \nmy %type_for = $header_row =~ m|(\\w+)\\((\\w+)\\)|g;\n\nprint Dumper \\@headers;\nprint Dumper \\%type_for;\n\n#iterate input again\nwhile (&lt;&gt;) {\n    #remove trailing linefeed\n    chomp;\n\n    #parse incoming data into named fields based on ordering. \n    my %fields;\n    @fields{@headers} = split /,/;\n    #print for diag\n    print Dumper \\%fields;\n\n    #iterate the headers, applying the looked up 'type' regex\n    foreach my $field_name (@headers) {\n        if ( $fields{$field_name} =~ m/$pattern_for{$type_for{$field_name}}/ ) {\n            print\n                \"$field_name =&gt; $fields{$field_name} is valid, $type_for{$field_name} matching $pattern_for{$type_for{$field_name}}\\n\";\n        }\n        else {\n            print \"$field_name $fields{$field_name} not valid $type_for{$field_name} matching $pattern_for{$type_for{$field_name}}\\n\";\n        }\n    }\n}\n</code></pre>\n\n<p>This gives for your input (just the invalids for brevity):</p>\n\n<pre><code>name 123Rag not valid string matching (?^i:^[A-Z]+$)\nemp_id 8f not valid int matching (?^:^\\d+$)\n</code></pre>\n\n<p>Note - it only supports 'simple' CSV style (no nested commas or quotes) but could easily be adapted to use the <code>Text::CSV</code> module. </p>\n"}], "owner": {"reputation": 95, "user_id": 1696853, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2d34b81f40276cd2b3f50a9c52de894b?s=128&d=identicon&r=PG", "display_name": "Gokul Krishna", "link": "https://stackoverflow.com/users/1696853/gokul-krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 538, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1449094160, "creation_date": 1449074903, "question_id": 34048316, "link": "https://stackoverflow.com/questions/34048316/how-to-find-out-the-column-type-in-shell-and-get-the-difference", "title": "how to find out the column type in shell and get the difference", "body": "<p>I have a sample file which looks like </p>\n\n<pre><code>emp_id(int),name(string),age(int)\n1,hasa,34\n2,dafa,45\n3,fasa,12\n8f,123Rag,12\n8,fafl,12\n</code></pre>\n\n<p>Requirement: Column data types are specified as strings and integers. Emp_id should be a integer  not string. these conditions ll be the same for name and age columns.</p>\n\n<p><strong>My output should look like#</strong></p>\n\n<pre><code>Actual column Emp_id type is INT but string was found at the position 4, value is 8f\nActual column name type is STRING but numbers were found at the position 4, value is 123Rag\n</code></pre>\n\n<p>continues..</p>\n\n<p>here is my code\nShell script</p>\n\n<pre><code>read input\nif [ $input -eq $input 2&gt;/dev/null ]\nthen\n     echo \"$input is an integer\"\nelse\n    echo \"$input is not an integer\"\nfi\n</code></pre>\n\n<p>In python, i was trying with Isinstance(obj,type) but it is not serving the purpose.\ncan any guide me in this regard, Any shell/python/perl script help would be appreciated!</p>\n"}, {"tags": ["xml", "perl", "xpath", "xml-namespaces", "xml-libxml"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1449074632, "post_id": 34048065, "comment_id": 55851036, "body": "1. Because XML::XPath is buggy."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1449074785, "post_id": 34048065, "comment_id": 55851158, "body": "2. <a href=\"http://stackoverflow.com/questions/33370690/extracting-data-from-an-xml-document-that-uses-namespaces\">Extracting data from an XML document that uses namespaces</a>"}, {"owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "edited": false, "score": 1, "creation_date": 1449074852, "post_id": 34048065, "comment_id": 55851216, "body": "<a href=\"http://stackoverflow.com/questions/25419772/xmllibxml-namespaces-and-findvalue\">XML::LibXML, namespaces and findvalue</a>"}, {"owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "edited": false, "score": 0, "creation_date": 1449237073, "post_id": 34048065, "comment_id": 55931709, "body": "Thanks to all for the links and sorry for the redundancy."}], "owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1449074739, "answer_count": 0, "score": 0, "last_activity_date": 1449074235, "creation_date": 1449074235, "question_id": 34048065, "link": "https://stackoverflow.com/questions/34048065/perl-xmllibxml-no-parsing-due-to-namespace", "closed_reason": "Duplicate", "title": "Perl / XML::LibXML no parsing due to namespace", "body": "<p>I used XML::XPath to parse an xml-file and I encountered no problem. For several reason (not mantained (?), slowly, see for example <a href=\"http://perl-begin.org/uses/xml/\" rel=\"nofollow noreferrer\" title=\"here\">here</a>) I try XML::LibXML but don't succeed. The problem seems to be in the root of the xml-file. The following code does work:</p>\n\n<pre><code>use strict; \nuse warnings;\nuse XML::LibXML;\n\nmy $prsr = XML::LibXML-&gt;new();\n$prsr-&gt;keep_blanks(0);\nmy $xp = $prsr-&gt;parse_fh(\\*DATA);\n\nmy @node_article = $xp-&gt;findnodes('/ARTICLE/*');\n\nforeach my $node (@node_article) {\n    print \"$node\\n\\n\";\n}\n\n__DATA__\n  &lt;ARTICLE xmlns:xsd=\"http://whatever\" xmlns:xsi=\"http://whatever\"&gt;\n    &lt;EVENT name=\"cat1\" /&gt;  \n    &lt;EVENT name=\"cat2\" /&gt;  \n    &lt;EVENT name=\"cat3\" /&gt;  \n    &lt;EVENT name=\"cat4\" /&gt;  \n    &lt;EVENT name=\"cat5\" /&gt;  \n  &lt;/ARTICLE&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Idu1t.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Idu1t.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>But if the root contains the default namespace xmlns=\"http://whatever\" the code above does not work (no output to terminal).</p>\n\n<pre><code>__DATA__\n  &lt;ARTICLE xmlns:xsd=\"http://whatever\" xmlns:xsi=\"http://whatever\" xmlns=\"http://whatever\"&gt;\n    &lt;EVENT name=\"cat1\" /&gt;  \n    &lt;EVENT name=\"cat2\" /&gt;  \n    &lt;EVENT name=\"cat3\" /&gt;  \n    &lt;EVENT name=\"cat4\" /&gt;  \n    &lt;EVENT name=\"cat5\" /&gt;  \n  &lt;/ARTICLE&gt;\n</code></pre>\n\n<p>One solution could be to delete (manually) the namespace but I want to avoid this since the original file will be downloaded and imported perdiodically. So, I have two questions:</p>\n\n<ol>\n<li>Why the namespace does cause the problem using XML::LibXML but not when using XML::XPATH</li>\n<li>How can I solve this problem using XML::LibXML?</li>\n</ol>\n\n<p>Thanks for help.</p>\n"}, {"tags": ["regex", "perl", "ultraedit"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1449069507, "post_id": 34045590, "comment_id": 55847174, "body": "I don&#39;t see how Perl is related to this tool at all, but there are examples of find/replace in their documentation: <a href=\"http://www.ultraedit.com/support/tutorials_power_tips/ultraedit/regular_expressions.html\" rel=\"nofollow noreferrer\">ultraedit.com/support/tutorials_power_tips/ultraedit/&hellip;</a>"}, {"owner": {"reputation": 1339, "user_id": 2894590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0BwRA.jpg?s=128&g=1", "display_name": "Cookie Butter", "link": "https://stackoverflow.com/users/2894590/cookie-butter"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1449070119, "post_id": 34045590, "comment_id": 55847667, "body": "@Hunter: It supports 3 regex styles (Ultraedit, Unix, and Perl) and I am specifically using the Perl regex style.  The examples in your link are useful but specifically lack the ability to modify the captured groups, which is my question.  I might simply not be possible currently."}], "answers": [{"comments": [{"owner": {"reputation": 1339, "user_id": 2894590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0BwRA.jpg?s=128&g=1", "display_name": "Cookie Butter", "link": "https://stackoverflow.com/users/2894590/cookie-butter"}, "edited": false, "score": 0, "creation_date": 1449080530, "post_id": 34047039, "comment_id": 55854791, "body": "Ah, Yes.  Too bad I am still working with perl 5.8.  I can use <code>perl -i.bak -pe&quot;s&#47;(DATA)(\\d+)&#47;$1.eval($2+8)&#47;eg&quot; &quot;C:\\...&quot;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1339, "user_id": 2894590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0BwRA.jpg?s=128&g=1", "display_name": "Cookie Butter", "link": "https://stackoverflow.com/users/2894590/cookie-butter"}, "edited": false, "score": 0, "creation_date": 1449080757, "post_id": 34047039, "comment_id": 55854927, "body": "Get rid of that <code>eval</code>. You just need <code>$1.($2+8)</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1449080801, "last_edit_date": 1449080801, "creation_date": 1449071477, "answer_id": 34047039, "question_id": 34045590, "link": "https://stackoverflow.com/questions/34045590/how-to-eval-in-ultraedit-regex-replace/34047039#34047039", "title": "How to eval in Ultraedit regex Replace", "body": "<p>No, UltraEdit can't do that.</p>\n\n<p>You could actually use Perl</p>\n\n<pre><code>perl -i.bak -pe\"s/DATA\\K(\\d+)/$1+8/eg\" \"C:\\...\"       5.10+\n\nperl -i.bak -pe\"s/(DATA)(\\d+)/$1.($2+8)/eg\" \"C:\\...\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1339, "user_id": 2894590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0BwRA.jpg?s=128&g=1", "display_name": "Cookie Butter", "link": "https://stackoverflow.com/users/2894590/cookie-butter"}, "edited": false, "score": 0, "creation_date": 1449244213, "post_id": 34071797, "comment_id": 55936628, "body": "Thank you.  This is great for the specific case I mentioned but the reason I would not want to use the script is because it does not work for the general case.  This could be changed to prompt the user for the regex search and replace terms but I expect the challenge is making it not evaluate the replace term too early."}, {"owner": {"reputation": 2114, "user_id": 165164, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GCuan.jpg?s=128&g=1", "display_name": "Anne Gunn", "link": "https://stackoverflow.com/users/165164/anne-gunn"}, "edited": false, "score": 0, "creation_date": 1451597738, "post_id": 34071797, "comment_id": 56845971, "body": "@Mofi, GREAT answer. Thank you so much for the complete example. I&#39;ve been prototyping a complex html file conversion process using regexes in UE, figuring I&#39;d move to a programming language once I got  the transformation sequence nailed down. The one bit that had me stumped was numbering a set of div ids from top to bottom. I was able to grab your code, modify it, and get it working for me in under half an hour. (And only took that long because it took me a while to open the Output window to see my error message. D&#39;oh.) I think I can now use the UE JS scripting for the whole process. +many"}], "tags": [], "owner": {"reputation": 38379, "user_id": 3074564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yo5QG.png?s=128&g=1", "display_name": "Mofi", "link": "https://stackoverflow.com/users/3074564/mofi"}, "is_accepted": false, "score": 1, "last_activity_date": 1449257922, "last_edit_date": 1449257922, "creation_date": 1449161739, "answer_id": 34071797, "question_id": 34045590, "link": "https://stackoverflow.com/questions/34045590/how-to-eval-in-ultraedit-regex-replace/34071797#34071797", "title": "How to eval in Ultraedit regex Replace", "body": "<p>Text editors like UltraEdit do not support evaluation of a formula during a replace operation. This requires a script and a script interpreter like Perl or JavaScript.</p>\n\n<p>UltraEdit has built-in the JavaScript interpreter. This task can be therefore done also with UltraEdit using an UltraEdit script, for example the one below.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>if (UltraEdit.document.length &gt; 0)  // Is any file opened?\n{\n   // Define environment for this script.\n   UltraEdit.insertMode();\n   UltraEdit.columnModeOff();\n\n   // Move caret to top of the active file.\n   UltraEdit.activeDocument.top();\n\n   // Defined all Perl regular expression Find parameters.\n   UltraEdit.perlReOn();\n   UltraEdit.activeDocument.findReplace.mode=0;\n   UltraEdit.activeDocument.findReplace.matchCase=true;\n   UltraEdit.activeDocument.findReplace.matchWord=false;\n   UltraEdit.activeDocument.findReplace.regExp=true;\n   UltraEdit.activeDocument.findReplace.searchDown=true;\n   if (typeof(UltraEdit.activeDocument.findReplace.searchInColumn) == \"boolean\")\n   {\n      UltraEdit.activeDocument.findReplace.searchInColumn=false;\n   }\n\n   // Search for each number after case-sensitive word DATA using\n   // a look-behind to get just the number selected by the find.\n   // Each backslash in search string for Perl regular expression\n   // engine of UltraEdit must be escaped with one more backslash as\n   // the backslash is also the escape character in JavaScript strings.\n   while(UltraEdit.activeDocument.findReplace.find(\"(?&lt;=\\\\bDATA)\\\\d+\"))\n   {\n      // Convert found and selected string to an integer using decimal\n      // system, increment the number by eight, convert the incremented\n      // number back to a string using again decimal system and write the\n      // increased number string to file overwriting the selected number.\n      var nNumber = parseInt(UltraEdit.activeDocument.selection,10) + 8;\n      UltraEdit.activeDocument.write(nNumber.toString(10));\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 1339, "user_id": 2894590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0BwRA.jpg?s=128&g=1", "display_name": "Cookie Butter", "link": "https://stackoverflow.com/users/2894590/cookie-butter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 510, "favorite_count": 0, "accepted_answer_id": 34047039, "answer_count": 2, "score": 0, "last_activity_date": 1449257922, "creation_date": 1449067529, "question_id": 34045590, "link": "https://stackoverflow.com/questions/34045590/how-to-eval-in-ultraedit-regex-replace", "title": "How to eval in Ultraedit regex Replace", "body": "<p>In Ultraedit using perl Regex, I am trying to replace a strings <code>DATA0</code> with <code>DATA8</code>, <code>DATA1</code> with <code>DATA9</code>, and so on.  I know how to get the match to happen in Ultraedit's Find Dialog using <code>DATA\\d</code>.  </p>\n\n<p>In order to capture the digit, I use <code>DATA(\\d)</code>, and in the \"Replace With:\" box I can access the group with $1, <code>DATA$1+8</code> but this, obviously, results in text <code>DATA0+8</code>, which makes sense.</p>\n\n<p>Is there an <code>eval()</code> that can be done in Ultraedit's replace dialog in order to modify the captured group variable $1?</p>\n\n<p>I realize this can be done in the javascript integration with Ultraedit, but I would rather be able to do this out of the box from the Replace Dialog.</p>\n"}, {"tags": ["perl", "imagemagick", "cpan"], "comments": [{"owner": {"reputation": 10392, "user_id": 2031419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FVum0.jpg?s=128&g=1", "display_name": "Glenn Randers-Pehrson", "link": "https://stackoverflow.com/users/2031419/glenn-randers-pehrson"}, "edited": false, "score": 1, "creation_date": 1449066895, "post_id": 34044762, "comment_id": 55845124, "body": "One could install the Q8 version of ImageMagick instead of the usual Q16, and get the error message they are seeing.  I suspect that Q16 has been installed on all but two of the platforms you tested, so it would be safe to go ahead and require Image::Magick::Q16 as a requirement."}, {"owner": {"reputation": 45, "user_id": 2699964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deaeb47abe12a76956613965353f80c7?s=128&d=identicon&r=PG&f=1", "display_name": "Runar Buvik", "link": "https://stackoverflow.com/users/2699964/runar-buvik"}, "reply_to_user": {"reputation": 10392, "user_id": 2031419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FVum0.jpg?s=128&g=1", "display_name": "Glenn Randers-Pehrson", "link": "https://stackoverflow.com/users/2031419/glenn-randers-pehrson"}, "edited": false, "score": 1, "creation_date": 1449665265, "post_id": 34044762, "comment_id": 56104617, "body": "I have investigated this further and there is no cpan package named Image::Magick::Q16 (nor Image::Magick::Q8 or Image::Magick::Q32). This named must be internal to Image::Magick. That means that adding Image::Magick::Q16 as a requirement will not fix this."}], "answers": [{"tags": [], "owner": {"reputation": 20869, "user_id": 438117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dec2e8d45b1a0210065d1a4e3800f151?s=128&d=identicon&r=PG", "display_name": "emcconville", "link": "https://stackoverflow.com/users/438117/emcconville"}, "is_accepted": false, "score": 0, "last_activity_date": 1449072647, "creation_date": 1449072647, "answer_id": 34047470, "question_id": 34044762, "link": "https://stackoverflow.com/questions/34044762/perl-module-imagemagickq16constant-missing-on-working-imagemagick/34047470#34047470", "title": "Perl module Image::Magick::Q16::constant missing on working Image::Magick?", "body": "<blockquote>\n  <p>Dos this means that you can have Image::Magick installed, but still not have a working environment because Image::Magick::Q16 is missing?</p>\n</blockquote>\n\n<p>Correct. Quantum constants are defined during compile time of ImageMagick's library . To quote <a href=\"http://www.imagemagick.org/script/perl-magick.php#overview\" rel=\"nofollow\">PerlMagicks Overview document</a>.</p>\n\n<blockquote>\n  <p>PerlMagick is <em>quantum</em> aware. You can request a specific quantum depth when you instantiate an image object:</p>\n\n<pre><code>use Image::Magick::Q16;\n$image = Image::Magick::Q16-&gt;new;\n</code></pre>\n</blockquote>\n\n<p>I'm not familiar with Perl, but I can see that the specific quantum-constant would be <a href=\"https://github.com/ImageMagick/ImageMagick/blob/22d1e094559e53ee6661c2b361343153a3c402d8/PerlMagick/quantum/quantum.pm.in#L1\" rel=\"nofollow\">defined here</a>.</p>\n\n<pre class=\"lang-pl prettyprint-override\"><code>package Image::Magick::@MAGICK_ABI_SUFFIX@;\n</code></pre>\n\n<p>Where <code>@MAGICK_ABI_SUFFIX@</code> can be influenced by <code>--with-quantum-depth</code> &amp; <code>--enable-hdri</code>. See <a href=\"http://www.imagemagick.org/script/advanced-unix-installation.php\" rel=\"nofollow\">Advanced Unix Installation</a></p>\n\n<p>So the following packages could be valid ...</p>\n\n<ul>\n<li><code>Image::Magick::Q8</code></li>\n<li><code>Image::Magick::Q16</code></li>\n<li><code>Image::Magick::Q32</code></li>\n</ul>\n\n<p>And <em>perhaps</em> with an additional <code>HDRI</code> suffix.</p>\n"}], "owner": {"reputation": 45, "user_id": 2699964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deaeb47abe12a76956613965353f80c7?s=128&d=identicon&r=PG&f=1", "display_name": "Runar Buvik", "link": "https://stackoverflow.com/users/2699964/runar-buvik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 286, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449072647, "creation_date": 1449065173, "question_id": 34044762, "link": "https://stackoverflow.com/questions/34044762/perl-module-imagemagickq16constant-missing-on-working-imagemagick", "title": "Perl module Image::Magick::Q16::constant missing on working Image::Magick?", "body": "<p>I am the author of CPAN module Image::Hash. It is a module for doing image hashing and uses GD, Image::Magick or Imager to work with images, depending on what that is installed on a users system.</p>\n\n<p>I test to see if Image::Magick is installed by wrapping it in a eval like this:</p>\n\n<pre><code>eval { require Image::Magick};\n</code></pre>\n\n<p>If Image::Magick is installed the module will use it.</p>\n\n<p>This has been working great, but lately so have I gotten two error report from CPAN testers where my module fails with error <em>\"Image::Magick::Q16::constant not defined\"</em>.</p>\n\n<p>Dos this means that you can have Image::Magick installed, but still not have a working environment because Image::Magick::Q16 is missing?</p>\n\n<p>How do I handle this?</p>\n\n<p>I do not want to add  Image::Magick::Q16: as a requirement for everyone, because it works correctly without it on all but two platforms.</p>\n\n<p>The CPAN testers reports:</p>\n\n<p>Image-Hash-0.06:</p>\n\n<ul>\n<li><p>x86_64-linux-thread-multi / 5.18.1:</p></li>\n<li><p>FAIL <a href=\"http://www.cpantesters.org/cpan/report/822fb984-965b-11e5-8cc0-4f581fbf4db7\" rel=\"nofollow\">http://www.cpantesters.org/cpan/report/822fb984-965b-11e5-8cc0-4f581fbf4db7</a></p></li>\n</ul>\n\n<p>Image-Hash-0.06:</p>\n\n<ul>\n<li><p>i486-linux-thread-multi / 5.18.1:</p></li>\n<li><p>FAIL <a href=\"http://www.cpantesters.org/cpan/report/1a701ba4-97fa-11e5-975f-b301d0c0c177\" rel=\"nofollow\">http://www.cpantesters.org/cpan/report/1a701ba4-97fa-11e5-975f-b301d0c0c177</a></p></li>\n</ul>\n\n<p>Just to clarify; according to  CPAN testers my module works on 215 platforms, and fails on 2. So this is not a common error. I do not currently have easy access to a machine with perl 5.18.1.</p>\n"}, {"tags": ["excel", "perl", "unix", "graph", "perl-module"], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 5228070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec02741cfd5fb6e86f8b7dcd4881790?s=128&d=identicon&r=PG&f=1", "display_name": "santhosh", "link": "https://stackoverflow.com/users/5228070/santhosh"}, "edited": false, "score": 0, "creation_date": 1449065943, "post_id": 34044802, "comment_id": 55844437, "body": "Thanks @malyy for looking into this...    I can able to add a chart to a new excel... all i want is to add chart to an existing excel sheet... I have an excel sheet with some data in one worksheet (ex: Firstsheet) i want to create chart for this data in the same sheet/new sheet.."}, {"owner": {"reputation": 169, "user_id": 5228070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec02741cfd5fb6e86f8b7dcd4881790?s=128&d=identicon&r=PG&f=1", "display_name": "santhosh", "link": "https://stackoverflow.com/users/5228070/santhosh"}, "edited": false, "score": 0, "creation_date": 1449067739, "post_id": 34044802, "comment_id": 55845791, "body": "i am looking for making a chart from existing excel and not by creating new excel. Hope you got my point..  and &quot;Spreadsheet::WriteExcel&quot; can be used only to create new excel, and no chance of opening an already existing excel with this..."}, {"owner": {"reputation": 169, "user_id": 5228070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec02741cfd5fb6e86f8b7dcd4881790?s=128&d=identicon&r=PG&f=1", "display_name": "santhosh", "link": "https://stackoverflow.com/users/5228070/santhosh"}, "edited": false, "score": 0, "creation_date": 1449080755, "post_id": 34044802, "comment_id": 55854925, "body": "Please help me with a sample code of parsing a existing excel file to add a chart/graph"}, {"owner": {"reputation": 169, "user_id": 5228070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec02741cfd5fb6e86f8b7dcd4881790?s=128&d=identicon&r=PG&f=1", "display_name": "santhosh", "link": "https://stackoverflow.com/users/5228070/santhosh"}, "edited": false, "score": 0, "creation_date": 1449127041, "post_id": 34044802, "comment_id": 55873452, "body": "That&#39;s a lot of information.. Thanks again... I am on Unix environment.. May be I can&#39;t use win32 module... Any other way to deal this with perl in Unix env?"}, {"owner": {"reputation": 731, "user_id": 5309594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd7ed90f02f74f12b018acb3ff69dac8?s=128&d=identicon&r=PG&f=1", "display_name": "malyy", "link": "https://stackoverflow.com/users/5309594/malyy"}, "reply_to_user": {"reputation": 169, "user_id": 5228070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec02741cfd5fb6e86f8b7dcd4881790?s=128&d=identicon&r=PG&f=1", "display_name": "santhosh", "link": "https://stackoverflow.com/users/5228070/santhosh"}, "edited": false, "score": 0, "creation_date": 1449127950, "post_id": 34044802, "comment_id": 55873899, "body": "only Win32::OLE is fow Windows OS. all other solutions can be used for Unix."}, {"owner": {"reputation": 169, "user_id": 5228070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec02741cfd5fb6e86f8b7dcd4881790?s=128&d=identicon&r=PG&f=1", "display_name": "santhosh", "link": "https://stackoverflow.com/users/5228070/santhosh"}, "edited": false, "score": 0, "creation_date": 1449144569, "post_id": 34044802, "comment_id": 55884273, "body": "i am trying the 3rd option in unix env, using Spreadsheet::ParseExcel::SaveParser  and adding chart... but i am  getting below error: Can&#39;t call method &quot;add_chart&quot; on an undefined value at charts4.ps . can you edit my code in the original post so that it can work?"}, {"owner": {"reputation": 169, "user_id": 5228070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec02741cfd5fb6e86f8b7dcd4881790?s=128&d=identicon&r=PG&f=1", "display_name": "santhosh", "link": "https://stackoverflow.com/users/5228070/santhosh"}, "edited": false, "score": 0, "creation_date": 1449146533, "post_id": 34044802, "comment_id": 55885572, "body": "I am okay, even i lost the existing graph, because i am creating the entire graph again on every run"}, {"owner": {"reputation": 731, "user_id": 5309594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd7ed90f02f74f12b018acb3ff69dac8?s=128&d=identicon&r=PG&f=1", "display_name": "malyy", "link": "https://stackoverflow.com/users/5309594/malyy"}, "reply_to_user": {"reputation": 169, "user_id": 5228070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec02741cfd5fb6e86f8b7dcd4881790?s=128&d=identicon&r=PG&f=1", "display_name": "santhosh", "link": "https://stackoverflow.com/users/5228070/santhosh"}, "edited": false, "score": 0, "creation_date": 1449156063, "post_id": 34044802, "comment_id": 55892316, "body": "did you check the example? <a href=\"http://search.cpan.org/~jmcnamara/Spreadsheet-WriteExcel-2.40/lib/Spreadsheet/WriteExcel.pm#MODIFYING%5FAND%5FREWRITING%5FEXCEL%5FFILES\" rel=\"nofollow noreferrer\">search.cpan.org/~jmcnamara/Spreadsheet-WriteExcel-2.40/lib/&hellip;</a>"}, {"owner": {"reputation": 169, "user_id": 5228070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec02741cfd5fb6e86f8b7dcd4881790?s=128&d=identicon&r=PG&f=1", "display_name": "santhosh", "link": "https://stackoverflow.com/users/5228070/santhosh"}, "edited": false, "score": 0, "creation_date": 1449156768, "post_id": 34044802, "comment_id": 55892854, "body": "yes i checked it..it dont have charts/graphs... i know how to append data to an existing excel... i need to know how to add chart to existing excel with its existing data.."}, {"owner": {"reputation": 169, "user_id": 5228070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec02741cfd5fb6e86f8b7dcd4881790?s=128&d=identicon&r=PG&f=1", "display_name": "santhosh", "link": "https://stackoverflow.com/users/5228070/santhosh"}, "edited": false, "score": 0, "creation_date": 1449243283, "post_id": 34044802, "comment_id": 55935980, "body": "Not sure how i can add chart while parsing existing excel. Please guide @malyy"}, {"owner": {"reputation": 731, "user_id": 5309594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd7ed90f02f74f12b018acb3ff69dac8?s=128&d=identicon&r=PG&f=1", "display_name": "malyy", "link": "https://stackoverflow.com/users/5309594/malyy"}, "reply_to_user": {"reputation": 169, "user_id": 5228070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec02741cfd5fb6e86f8b7dcd4881790?s=128&d=identicon&r=PG&f=1", "display_name": "santhosh", "link": "https://stackoverflow.com/users/5228070/santhosh"}, "edited": false, "score": 0, "creation_date": 1449472811, "post_id": 34044802, "comment_id": 56004673, "body": "Just quick example in new UPdate of the post."}, {"owner": {"reputation": 169, "user_id": 5228070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec02741cfd5fb6e86f8b7dcd4881790?s=128&d=identicon&r=PG&f=1", "display_name": "santhosh", "link": "https://stackoverflow.com/users/5228070/santhosh"}, "edited": false, "score": 0, "creation_date": 1449580302, "post_id": 34044802, "comment_id": 56060184, "body": "i saw your Update @malyy... looks like you are not getting my point here...  in the above example you are creating new excel using ( Spreadsheet::WriteExcel-&gt;new) and adding charts to this chart... i know that, and i am able to add charts to new excels...but my scenario is i am already having a excel sheet with some data at some location... my Perl script need to add some data to this excel  and add chart to this existing excel.  (Adding data to existing excel is handled by me.).. All perl experts, please help.. atleast let me know that is this possible in Perl or not?"}, {"owner": {"reputation": 731, "user_id": 5309594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd7ed90f02f74f12b018acb3ff69dac8?s=128&d=identicon&r=PG&f=1", "display_name": "malyy", "link": "https://stackoverflow.com/users/5309594/malyy"}, "reply_to_user": {"reputation": 169, "user_id": 5228070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec02741cfd5fb6e86f8b7dcd4881790?s=128&d=identicon&r=PG&f=1", "display_name": "santhosh", "link": "https://stackoverflow.com/users/5228070/santhosh"}, "edited": false, "score": 0, "creation_date": 1449581098, "post_id": 34044802, "comment_id": 56060690, "body": "Did you check an example from the link which I provided you with? re-sending it: <a href=\"http://search.cpan.org/~jmcnamara/Spreadsheet-WriteExcel-2.37/lib/Spreadsheet/WriteExcel.pm#MODIFYING_AND_REWRITING_EXCEL_FILES\" rel=\"nofollow noreferrer\">search.cpan.org/~jmcnamara/Spreadsheet-WriteExcel-2.37/lib/&hellip;</a> One more example: <a href=\"https://metacpan.org/pod/Spreadsheet%3a%3aParseExcel%3a%3aSaveParser#SYNOPSIS\" rel=\"nofollow noreferrer\">metacpan.org/pod/&hellip;</a>"}, {"owner": {"reputation": 169, "user_id": 5228070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec02741cfd5fb6e86f8b7dcd4881790?s=128&d=identicon&r=PG&f=1", "display_name": "santhosh", "link": "https://stackoverflow.com/users/5228070/santhosh"}, "edited": false, "score": 0, "creation_date": 1449584119, "post_id": 34044802, "comment_id": 56062865, "body": "in your both examples there is no chart !!! - which i am looking for... these examples deal with adding cells to existing sheets... i am looking for adding charts to existing sheet"}, {"owner": {"reputation": 169, "user_id": 5228070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec02741cfd5fb6e86f8b7dcd4881790?s=128&d=identicon&r=PG&f=1", "display_name": "santhosh", "link": "https://stackoverflow.com/users/5228070/santhosh"}, "edited": false, "score": 0, "creation_date": 1452080231, "post_id": 34044802, "comment_id": 57009362, "body": "can u tell me how to add chart using Spreadsheet::ParseExcel::SaveParser?? @malyy #mayy"}], "tags": [], "owner": {"reputation": 731, "user_id": 5309594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd7ed90f02f74f12b018acb3ff69dac8?s=128&d=identicon&r=PG&f=1", "display_name": "malyy", "link": "https://stackoverflow.com/users/5309594/malyy"}, "is_accepted": false, "score": 1, "last_activity_date": 1449472779, "last_edit_date": 1449472779, "creation_date": 1449065307, "answer_id": 34044802, "question_id": 34044014, "link": "https://stackoverflow.com/questions/34044014/add-chart-to-an-existing-excel-using-perl/34044802#34044802", "title": "add chart to an existing excel using perl", "body": "<p>add_chart() is one of the WORKBOOK METHODS. Try code like this:</p>\n\n<pre><code>use Spreadsheet::WriteExcel;                             \n\nmy $workbook = Spreadsheet::WriteExcel-&gt;new('perl.xls'); \n$worksheet   = $workbook-&gt;add_worksheet();               \n$worksheet-&gt;write('A1', 'Hi Chart!');                    \nmy $chart = $workbook-&gt;add_chart( type =&gt; 'line', embedded =&gt; 1, name =&gt; 'pended graph' );\n\n# Insert the chart into the a worksheet.\n$worksheet-&gt;insert_chart( 'E2', $chart );\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>The problem is that excel is very hard to update with perl.</p>\n\n<blockquote>\n  <p>An Excel file is a binary file within a binary file. It contains\n  several interlinked checksums and changing even one byte can cause it\n  to become corrupted.</p>\n  \n  <p>As such you cannot simply append or update an Excel file. The only way\n  to achieve this is to read the entire file into memory, make the\n  required changes or additions and then write the file out again.</p>\n</blockquote>\n\n<p>Spreadsheet::ParseExcel will read in existing excel files:</p>\n\n<pre><code>my $parser   = Spreadsheet::ParseExcel-&gt;new();\n# $workbook is a Spreadsheet::ParseExcel::Workbook object\nmy $workbook = $parser-&gt;Parse('blablabla.xls');\n</code></pre>\n\n<p>What you really want is <strong>Spreadsheet::ParseExcel::SaveParser</strong>, which is a combination of <em>Spreadsheet::ParseExcel</em> and <em>Spreadsheet::WriteExcel</em>. </p>\n\n<p><a href=\"http://search.cpan.org/~jmcnamara/Spreadsheet-WriteExcel-2.40/lib/Spreadsheet/WriteExcel.pm#MODIFYING%5FAND%5FREWRITING%5FEXCEL%5FFILES\" rel=\"nofollow\">Here is an example</a>.</p>\n\n<p>Summing it up, I would suggest you to read the excel data in and then try either of the following:</p>\n\n<ul>\n<li>Create another xls file and use the <strong>Spreadsheet::WriteExcel::Chart</strong>\nlibrary.</li>\n<li>Create a xlsx file and use the <strong>Excel::Writer::XLSX::Chart</strong> library.</li>\n<li>Another close option would be to read the excel in with<br>\n<strong>Spreadsheet::ParseExcel::SaveParser</strong> and then add the chart and save<br>\nit, but with this module all original charts are lost.</li>\n</ul>\n\n<p>If you are on a Windows machine you may try to use  <strong>Win32::OLE</strong>.\nHere is the example from <strong>Win32::OLE</strong>'s own documentation:</p>\n\n<pre><code>use Win32::OLE;\n\n# use existing instance if Excel is already running\neval {$ex = Win32::OLE-&gt;GetActiveObject('Excel.Application')};\ndie \"Excel not installed\" if $@;\nunless (defined $ex) {\n    $ex = Win32::OLE-&gt;new('Excel.Application', sub {$_[0]-&gt;Quit;})\n            or die \"Oops, cannot start Excel\";\n}\n\n# get a new workbook\n$book = $ex-&gt;Workbooks-&gt;Add;\n\n# write to a particular cell\n$sheet = $book-&gt;Worksheets(1);\n$sheet-&gt;Cells(1,1)-&gt;{Value} = \"foo\";\n\n# write a 2 rows by 3 columns range\n$sheet-&gt;Range(\"A8:C9\")-&gt;{Value} = [[ undef, 'Xyzzy', 'Plugh' ],\n                                   [ 42,    'Perl',  3.1415  ]];\n\n# print \"XyzzyPerl\"\n$array = $sheet-&gt;Range(\"A8:C9\")-&gt;{Value};\nfor (@$array) {\n    for (@$_) {\n        print defined($_) ? \"$_|\" : \"&lt;undef&gt;|\";\n    }\n    print \"\\n\";\n}\n\n# save and exit\n$book-&gt;SaveAs( 'test.xls' );\nundef $book;\nundef $ex;\n</code></pre>\n\n<p><strong>UPDATE@2</strong></p>\n\n<p>Here is an example code:</p>\n\n<pre><code>use strict;\nuse Spreadsheet::WriteExcel;\n\nmy $workbook  = Spreadsheet::WriteExcel-&gt;new( 'chart_column.xls' );\nmy $worksheet = $workbook-&gt;add_worksheet();\nmy $bold      = $workbook-&gt;add_format( bold =&gt; 1 );\n\n# Add the worksheet data that the charts will refer to.\nmy $headings = [ 'Category', 'Values 1', 'Values 2' ];\nmy $data = [\n    [ 2, 3, 4, 5, 6, 7 ],\n    [ 1, 4, 5, 2, 1, 5 ],\n    [ 3, 6, 7, 5, 4, 3 ],\n];\n\n$worksheet-&gt;write( 'A1', $headings, $bold );\n$worksheet-&gt;write( 'A2', $data );\n\n\n###############################################################################\n#\n# Example 1. A minimal chart.\n#\nmy $chart1 = $workbook-&gt;add_chart( type =&gt; 'column',  embedded =&gt; 1 );\n\n# Add values only. Use the default categories.\n$chart1-&gt;add_series( values =&gt; '=Sheet1!$B$2:$B$7' );\n\n# Insert the chart into the main worksheet.\n$worksheet-&gt;insert_chart( 'E2', $chart1 );\n\n###############################################################################\n#\n# Example 2. One more chart\n#\nmy $chart2 = $workbook-&gt;add_chart( type =&gt; 'column', embedded =&gt; 1 );\n\n# Configure the chart.  # change the categories if required change the values as required\n$chart2-&gt;add_series(\n    categories =&gt; '=Sheet1!$A$4:$A$7',\n    values     =&gt; '=Sheet1!$B$4:$B$7',\n);\n\n$worksheet-&gt;insert_chart( 'N1', $chart2, 3, 3 );\n</code></pre>\n\n<p>Also,<br>\nIf you don't mind xlsx over xls, you may use <em>Excel::Writer::XLSX</em>. It is more actively maintained.</p>\n"}, {"tags": [], "owner": {"reputation": 368, "user_id": 5842403, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RKA_WZNw-iw/AAAAAAAAAAI/AAAAAAAAAuQ/gFUyztK-DPg/photo.jpg?sz=128", "display_name": "Joniale", "link": "https://stackoverflow.com/users/5842403/joniale"}, "is_accepted": false, "score": 0, "last_activity_date": 1540912553, "creation_date": 1540912553, "answer_id": 53067526, "question_id": 34044014, "link": "https://stackoverflow.com/questions/34044014/add-chart-to-an-existing-excel-using-perl/53067526#53067526", "title": "add chart to an existing excel using perl", "body": "<p>The trick to be able to parse and use at the same time the functions inside the WriteExcel module is to use the the  use Spreadsheet::ParseExcel::<strong>SaveParser</strong>; module.</p>\n\n<p>Below i have an example. The example will not use the chart functions but the problem you have is not on how to use the chart functions  of WriteExcel module but on how to parse an existing excel file and then use that parsed information with the WriteExcel modul (which is originally thought only for <strong>NEW excel files</strong>).</p>\n\n<pre><code>if ( ( -f $excel_file_name ) &amp;&amp; ( ( stat $excel_file_name )[7] &gt; 0 ) ) {\n\n#PARSE EXCEL\nuse Spreadsheet::ParseExcel;\nuse Spreadsheet::ParseExcel::SaveParser;\n\n# Open the template with SaveParser\nmy $parser   = new Spreadsheet::ParseExcel::SaveParser;\nmy $template = $parser-&gt;Parse(\"$excel_file_name\");\nmy $sheet    = 0;\nmy $row      = 0;\nmy $col      = 0;\n\nif ( !defined $template ) {\n    die $parser-&gt;error(), \" Perlline:\", __LINE__, \" \\n \";    #probably the file is already open by your GUI\n}\n\n# Get the format from specific cell\nmy $format = $template-&gt;{Worksheet}[$sheet]-&gt;{Cells}[$row][$col]-&gt;{FormatNo};\n\n# Add a new worksheet\n#for my $worksheet ( $template-&gt;worksheets() ) {\nmy $worksheet_parser = $template-&gt;worksheet(\"$metrict_data_worksheet_name\");\nmy ( $row_min, $row_max ) = $worksheet_parser-&gt;row_range();\nmy ( $col_min, $col_max ) = $worksheet_parser-&gt;col_range();\nmy @row_array_value;\nfor my $row ( 1 .. $row_max ) {    #avoid header start from 1\n    for my $col ( $col_min .. $col_max ) {\n\n        my $cell = $worksheet_parser-&gt;get_cell( $row, $col );\n        next unless $cell;\n\n        #print \"Row, Col    = ($row, $col)\\n\";\n        #print \"Value       = \", $cell-&gt;value(),       \"\\n\";\n        #print \"Unformatted = \", $cell-&gt;unformatted(), \"\\n\";\n        #print \"\\n\";\n        push( @row_array_value, $cell-&gt;value() );\n\n    }    #end header column loops for one regression\n}    #end row loop all lines\n     #}\n\n# The SaveParser SaveAs() method returns a reference to a\n# Spreadsheet::WriteExcel object. If you wish you can then\n# use this to access any of the methods that aren't\n# available from the SaveParser object. If you don't need\n# to do this just use SaveAs().\n#\nmy $workbook;\n\n{\n    # SaveAs generates a lot of harmless warnings about unset\n    # Worksheet properties. You can ignore them if you wish.\n    local $^W = 0;\n\n    # Rewrite the file or save as a new file\n    my $check_if_possible2write = Spreadsheet::WriteExcel-&gt;new($excel_file_name);\n    if ( defined $check_if_possible2write ) {    #if not possible it will be undef\n        $workbook = $template-&gt;SaveAs(\"$excel_file_name\");#IMPORTANT this is of type WriteExcel and not ParseExcel\n    }\n    else {\n        print \"Not possible to write the Excel file :$excel_file_name, another user may have the file open. Aborting... \", __LINE__, \" \\n \";\n        exit;\n    }\n}\n#####################FROM HERE YOU CAN USE AGAIN use Spreadsheet::WriteExcel; ####################\nuse Spreadsheet::WriteExcel;\nmy $worksheet = $workbook-&gt;sheets(\"$metrict_data_worksheet_name\");\n\nmy $column_header_count = 0;\nforeach my $name ( sort { lc $a cmp lc $b } keys %merged_all_metrics ) {\n\n    $worksheet-&gt;write( $row_max + 1, $column_header_count, \"$merged_all_metrics{$name}\" );    #row,col start\n    $column_header_count++;\n}\n$worksheet-&gt;set_column( 'A:L', 50, undef, 0, 1, 0 );                                          #grouping                                                     #comp_src group\n$worksheet-&gt;set_column( 'N:R', 50, undef, 0, 1, 0 );                                          #grouping\n$workbook-&gt;close() or die \"Error closing file: $!\";                                           #CLOSE\n}\n</code></pre>\n\n<p>The important part of the code is what happens after the comment line:</p>\n\n<pre><code>#####################FROM HERE YOU CAN USE AGAIN use Spreadsheet::WriteExcel; ####################\n</code></pre>\n\n<p>After that point you will see that you have a $workbook handler. This variable has all the information parsed and more important is that it is from type WriteExcel Object so you <strong>will have all the methods of this module available</strong>.</p>\n\n<p>Important Notice. The parser is not able to parse charts and formulas (only values), therefore you will have to write then again on each parse->write loop.</p>\n"}], "owner": {"reputation": 169, "user_id": 5228070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec02741cfd5fb6e86f8b7dcd4881790?s=128&d=identicon&r=PG&f=1", "display_name": "santhosh", "link": "https://stackoverflow.com/users/5228070/santhosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1801, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1540912553, "creation_date": 1449063088, "last_edit_date": 1449063402, "question_id": 34044014, "link": "https://stackoverflow.com/questions/34044014/add-chart-to-an-existing-excel-using-perl", "title": "add chart to an existing excel using perl", "body": "<p>I am new to perl.\ni have an excel sheet with lot of data.. I need to update it and create a graph based on the data..using perl.\ni am succeded in updating an existing excel..\nnow adding chart to it is not happening</p>\n\n<pre><code>use Spreadsheet::ParseExcel;\nuse Spreadsheet::ParseExcel::SaveParser;\nuse Spreadsheet::WriteExcel;\n\n# Open an existing file with SaveParser\nmy $parser      = Spreadsheet::ParseExcel::SaveParser-&gt;new();\nmy $template    = $parser-&gt;Parse('MyExcel.xls');\nmy $worksheet   = $template-&gt;worksheet('Firstsheet');\nmy $chart       = $template-&gt;add_chart( type =&gt; 'line' );\n$chart-&gt;add_series(\n   categories =&gt; '=URV!$A$17:$A$442',\n   values     =&gt; '=URV!$D$17:$D$442',\n   name       =&gt; 'pended graph',\n);\n</code></pre>\n\n<p>This is not working.\nCan't call method \"add_chart\" on an undefined value at charts4.ps line 20\nPlease help me with a sample working code..\nWant to know whats the problem here.</p>\n"}, {"tags": ["perl", "encoding", "html-entities"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1449074925, "creation_date": 1449074925, "answer_id": 34048326, "question_id": 34042846, "link": "https://stackoverflow.com/questions/34042846/htmlentitiesencode-entities-numeric-convert-hex-output-to-decimal/34048326#34048326", "title": "HTML::Entities::encode_entities_numeric: Convert hex output to decimal", "body": "<p>No, it's not configurable (because <code>&amp;#x20AC;</code> and <code>&amp;#8364;</code> are 100% equivalent).</p>\n"}], "owner": {"reputation": 708, "user_id": 148420, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/2vMyg.jpg?s=128&g=1", "display_name": "ppant", "link": "https://stackoverflow.com/users/148420/ppant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1472723143, "creation_date": 1449059502, "last_edit_date": 1472723143, "question_id": 34042846, "link": "https://stackoverflow.com/questions/34042846/htmlentitiesencode-entities-numeric-convert-hex-output-to-decimal", "title": "HTML::Entities::encode_entities_numeric: Convert hex output to decimal", "body": "<p>I am using <a href=\"https://metacpan.org/pod/HTML::Entities\" rel=\"nofollow\">HTML::Entities</a> module to encode some special chars. Here is my sample code:</p>\n\n<pre><code>use HTML::Entities qw(encode_entities_numeric);\nmy $str = \"some special chars like \u20ac \u2122 \u00a9 \u00ae\";\nencode_entities_numeric($str);\nprint $str;\n\nOutput: &amp;#x20AC; &amp;#x2122; &amp;#xA9; &amp;#xAE;\n</code></pre>\n\n<p>As output is in HTML numeric hex code of the char. </p>\n\n<p>I want output in form of HTML numeric decimal value of the chars like  <code>&amp;#8364; &amp;#8482; &amp;#169; &amp;#174;</code>\nIs there a way to do this in <code>encode_entities_numeric()</code></p>\n\n<p>Thanks!</p>\n"}, {"tags": ["html", "xml", "perl", "cgi"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1449058528, "post_id": 34042102, "comment_id": 55839502, "body": "Please don&#39;t use an ampersand <code>&amp;</code> when calling Perl subroutines. That hasn&#39;t been correct since Perl v5.5 was released seventeen years ago"}], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 5539711, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb41bfcbbdfc3fd5992f8b9da1bf99ae?s=128&d=identicon&r=PG&f=1", "display_name": "H.Burns", "link": "https://stackoverflow.com/users/5539711/h-burns"}, "edited": false, "score": 0, "creation_date": 1449477479, "post_id": 34042284, "comment_id": 56006675, "body": "This is partially working, still few characters are spilling out of that &lt;td&gt;&lt;/td&gt; element here and there."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 2, "last_activity_date": 1449058220, "last_edit_date": 1449058220, "creation_date": 1449057791, "answer_id": 34042284, "question_id": 34042102, "link": "https://stackoverflow.com/questions/34042102/how-to-render-xml-content-in-a-html-table-using-cgi-perl/34042284#34042284", "title": "How to render xml content in a HTML table using CGI Perl", "body": "<p>XML is full of characters like <code>&lt;</code> and <code>&amp;</code> which has special meaning in HTML.</p>\n\n<p>You need to encode them.</p>\n\n<p>That is typically done using <a href=\"https://metacpan.org/pod/HTML::Entities\" rel=\"nofollow\">the <code>HTML::Entities</code> module</a>.</p>\n\n<pre><code>use HTML::Entities;\nmy $html_encoded_string = encode_entities($raw_xml_string);\n</code></pre>\n\n<hr>\n\n<p>Alternatively, use a template language which supports HTML filtering.</p>\n\n<p>In Template-Toolkit, for instance, you would do something along the lines of:</p>\n\n<pre><code>&lt;td&gt;[% raw_xml_string | html %]&lt;/td&gt;\n</code></pre>\n\n<hr>\n\n<p>You could also use CGI.pm's HTML generating functions (as you are doing in <code>show_html</code> but they are marked <a href=\"https://metacpan.org/pod/CGI#HTML-Generation-functions-should-no-longer-be-used\" rel=\"nofollow\">HTML Generation functions should no longer be used</a> so you really should <em>stop</em> using them in <code>show_html</code>. </p>\n\n<p>The CGI.pm documentation recommends the Template approach. </p>\n"}], "owner": {"reputation": 379, "user_id": 5539711, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb41bfcbbdfc3fd5992f8b9da1bf99ae?s=128&d=identicon&r=PG&f=1", "display_name": "H.Burns", "link": "https://stackoverflow.com/users/5539711/h-burns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 34042284, "answer_count": 1, "score": 0, "last_activity_date": 1449058220, "creation_date": 1449057259, "question_id": 34042102, "link": "https://stackoverflow.com/questions/34042102/how-to-render-xml-content-in-a-html-table-using-cgi-perl", "title": "How to render xml content in a HTML table using CGI Perl", "body": "<p>I am trying to display an XML content (which is a SOAP request) in a simple HTML table using CGI Perl. However, the XML content is getting truncated inside \nthe table cell. Can anybody suggest a solution to render the XML properly in\nthe HTML page? </p>\n\n<p>Below is the code :</p>\n\n<pre><code>use strict;\n\nuse CGI;\nuse CGI::Carp qw(fatalsToBrowser);\n\nmy $qry = new CGI;\n\n&amp;show_html();\n\n\nsub show_html {\n    $qry-&gt;header();\n    $qry-&gt;start_html(-bgcolor=&gt;'#FFFFFF', -title=&gt;'Rendering XML');\n    my $body = &amp;display_page();\n    print $body;\n\n    $qry-&gt;end_html;\n}\n\nsub display_page {\n\n    my $html = qq{\n        &lt;table border=\"1\"&gt;\n        &lt;tr&gt;\n            &lt;th&gt; Key &lt;/th&gt;\n            &lt;th&gt;Value&lt;/th&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td&gt; SOAP &lt;/td&gt;\n            &lt;td&gt;POST /Quotation HTTP/1.0 Host: www.demohost Content-Type: text/xml; charset=utf-8 Content-Length: nnn  &lt;?xml version=\"1.0\"?&gt; &lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://www.demourl1/2001/12/soap-envelope\" SOAP-ENV:encodingStyle=\"http://www.demourl2/2001/12/soap-encoding\" &gt;     &lt;SOAP-ENV:Body xmlns:m=\"http://www.demourl3/quotations\" &gt;              &lt;m:GetQuotation&gt;          &lt;m:QuotationsName&gt;MiscroSoft&lt;/m:QuotationsName&gt;       &lt;/m:GetQuotation&gt;                  &lt;/SOAP-ENV:Body&gt;      &lt;/SOAP-ENV:Envelope&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;/table&gt;\n    };\n    return $html;\n\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 6, "creation_date": 1449057000, "post_id": 34041922, "comment_id": 55838530, "body": "We need some code and some representative sample data to be able to answer. &quot;Something like&quot; isn&#39;t good enough - it doesn&#39;t need to contain real values, but is MUST have a correct structure. And some working code that illustrates the problem. And a desired output. Without these, this question is unanswerable. Please see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 1, "user_id": 5630062, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rbgpO117TTw/AAAAAAAAAAI/AAAAAAAAAAA/KMkGdnkz9es/photo.jpg?sz=128", "display_name": "Dhananjay Kumar", "link": "https://stackoverflow.com/users/5630062/dhananjay-kumar"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1449057615, "post_id": 34041922, "comment_id": 55838918, "body": "cell (OR2X4) { \t\t##some scalar attributes such as (ex - cell_footprint : &quot;OR2X4 &quot;;) \t\t## some attributes inside attributes              Ex \u2013              (pg_pin (VDD) { \t\t\tvoltage_name : &quot;VDD&quot;; \t\t\tpg_type : &quot;primary_power&quot;; \t\t\ttiming () { ## some attributes values} \t\t}) So, I have many such cells inside my two files... I have to compare all the attributes of specific cell present in both files.  So , For this I want to create a data structure containing all the parameters.. And Im stuck with how to do..  Please let me know if i have to make it more clear."}, {"owner": {"reputation": 1, "user_id": 5630062, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rbgpO117TTw/AAAAAAAAAAI/AAAAAAAAAAA/KMkGdnkz9es/photo.jpg?sz=128", "display_name": "Dhananjay Kumar", "link": "https://stackoverflow.com/users/5630062/dhananjay-kumar"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1449057963, "post_id": 34041922, "comment_id": 55839165, "body": "I have written previous code to first get the lines which contains details about particular cell, but Im getting all the lines below the line matching cells (\\w+) { .. It might be a small problem, but as im new to perl, please help."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1449059117, "post_id": 34041922, "comment_id": 55839885, "body": "What language/format is the input in? This problem might already be solved for you."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1449059461, "post_id": 34041922, "comment_id": 55840102, "body": "See also <a href=\"http://stackoverflow.com/questions/33939742/perl-regexp-extract-string-from-nested-brackets/33940217#33940217\">Perl Regexp Extract string from nested brackets</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1449061010, "post_id": 34041922, "comment_id": 55841106, "body": "Maybe this module can be used: <a href=\"https://metacpan.org/pod/Parse::Liberty\" rel=\"nofollow noreferrer\"><code>Parse::Liberty</code></a>?"}, {"owner": {"reputation": 1, "user_id": 5630062, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rbgpO117TTw/AAAAAAAAAAI/AAAAAAAAAAA/KMkGdnkz9es/photo.jpg?sz=128", "display_name": "Dhananjay Kumar", "link": "https://stackoverflow.com/users/5630062/dhananjay-kumar"}, "edited": false, "score": 0, "creation_date": 1449210378, "post_id": 34041922, "comment_id": 55917038, "body": "Can someone please help, how to write my code here... I always fall short of characters."}], "answers": [{"tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 1, "last_activity_date": 1489965601, "creation_date": 1489965601, "answer_id": 42893559, "question_id": 34041922, "link": "https://stackoverflow.com/questions/34041922/how-to-extract-some-specific-information-from-a-file-in-perl/42893559#42893559", "title": "How to extract some specific information from a file in perl?", "body": "<p>I have to guess at your input data and therefor am not very sure about the problem and the goal.<br>\nBut anyway, try changing your line</p>\n\n<pre><code>if ($line =~ /cell \\(\\w/../cell \\(\\w/) {\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if ($line =~ /cell \\(\\w/..  $line =~/cell \\(\\w/) {\n</code></pre>\n\n<p>Otherwise the second regex will be matched against the uninitialised \"$_\".<br>\nI found this out by</p>\n\n<pre><code>use strict;\nuse warnings;\n</code></pre>\n\n<p>which is one of my favorite tools.<br>\nBy the way, you made me aware of this use of the range operator, which I find fascinating. Thanks.</p>\n"}], "owner": {"reputation": 1, "user_id": 5630062, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rbgpO117TTw/AAAAAAAAAAI/AAAAAAAAAAA/KMkGdnkz9es/photo.jpg?sz=128", "display_name": "Dhananjay Kumar", "link": "https://stackoverflow.com/users/5630062/dhananjay-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489965601, "creation_date": 1449056615, "last_edit_date": 1449501992, "question_id": 34041922, "link": "https://stackoverflow.com/questions/34041922/how-to-extract-some-specific-information-from-a-file-in-perl", "title": "How to extract some specific information from a file in perl?", "body": "<pre><code>## some lines \n## cell (a) { area : 0.898; power: 0.867; \n      ....(some parameters values)\n   } \n   pin(a1) { power: 0.767; (some more parameters specific to pins)\n   timing() { \n      ## again some parameters value....\n   } \n</code></pre>\n\n<p>My file contains approx 300 such cells and these cells are in between the files. I want to parse the file and what to know all the variable parameters, i tried following code but it is of no use</p>\n\n<pre><code> while (defined($line=&lt;$fh&gt;)) {\n     if ($line =~ /cell \\(\\w+\\) \\{/../cell \\(\\w+\\) \\{/) {\n         print $result \"$line \\n\";\n     }\n } \n</code></pre>\n\n<p>I want to get the values inside { } also but , dont know how to get as i have parenthesis inside parenthesis in my code. Please help.</p>\n\n<hr>\n\n<p>Thank u all for the help..I wrote a code to take into account of scalar attributes(ignoring all the attributes inside parenthesis.) BUt I am facing a very weird problem. I am facing problem with if ($line =~ /cell (\\w/../cell (\\w/) in my code. For the first file, it detects the line which has cell ( field and starts from there, but for the second file it starts from the first line itself.</p>\n\n<pre><code>open $result_file1, \"&gt;\", \"file1.txt\";\nopen $result_file2, \"&gt;\", \"file2.txt\";\nopen $fl1, $file1; open $fl2, $file2;\n\nsub file_reader {\n    ($fh, $indx) = @_;\n    $count = 0;\n    undef @temp; undef @pram;\n    while (defined($line=&lt;$fh&gt;)) {      \n        if ($line =~ /cell \\(\\w/../cell \\(\\w/) {\n        if ($indx == \"1\") {print $result_file1 \"$line\\n\";}\n        if ($indx == \"2\") {print $result_file2 \"$line\\n\";}\n        if ($line =~ /cell \\(\\w/) {\n            @temp = split (' ', $line);}\n        if ($line =~ /\\{/) {\n            $count += 1;}\n        if ($line =~ /\\}/) {\n            $count = $count - 1; }  \n        if (($line =~ /:/) and ($count == 1)) { \n            @pram = split (':', $line);         \n            if ($indx == \"1\") {$file1{$temp[1]}{@pram[1]} = @pram[2];}\n            elsif ($indx == \"2\") { $file2{$temp[1]}{@pram[1]} = @pram[2];}\n} }}\nclose $fh;}\n\nfile_reader($fl1, \"1\");\nfile_reader($fl2, \"2\");\n</code></pre>\n\n<p>A piece of output of file1 :\n    cell (AND2X1) {</p>\n\n<pre><code>    cell_footprint : \"AND2X1 \";\n\n    area : 7.3728 ;\n\n    cell_leakage_power : 3.837209e+04;\n\n    driver_waveform_rise : \"preDrv\";\n\n    driver_waveform_fall : \"preDrv\";\n\n    pg_pin (VDD) {\n\n        voltage_name : \"VDD\";\n\n        pg_type : \"primary_power\";\n\n    }\n\n    pg_pin (VSS) {\n\n        voltage_name : \"VSS\";\n\n        pg_type : \"primary_ground\";\n\n    }\n    .......\n</code></pre>\n\n<p>A piece of output of file2:</p>\n\n<pre><code>/**********************************************************************\n\n****                                                               ****\n\n****  The data contained in the file is created for educational    **** \n\n****  and training purposes only and are not recommended           ****\n\n****  for fabrication                                              ****\n\n****                                                               ****\n\n***********************************************************************\n\n****                                                               ****\n</code></pre>\n\n<p>Why it is not able to apply that range if condition for my second file?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1449061216, "post_id": 34041730, "comment_id": 55841255, "body": "&quot;Will this work?&quot; What happened when you tried it? I mean, I can&#39;t see why you wouldn&#39;t just try it rather asking here."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1449056638, "post_id": 34041913, "comment_id": 55838310, "body": "Or perhaps put the two variables into an array: <code>[ $PACK_INDEX_VAL, $val ]</code>"}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 3, "last_activity_date": 1449056649, "last_edit_date": 1449056649, "creation_date": 1449056589, "answer_id": 34041913, "question_id": 34041730, "link": "https://stackoverflow.com/questions/34041730/adding-value-to-an-hash-in-perl/34041913#34041913", "title": "Adding value to an hash in perl", "body": "<p>No.</p>\n\n<p>If you want \"a space between two variables\" then presumably what you mean is \"A string consisting of the value of the first variable, then a space, then the value of the second variable\".</p>\n\n<blockquote>\n<pre><code>($PACK_INDEX_VAL $val)\n</code></pre>\n</blockquote>\n\n<p>\u2026 is a syntax error.</p>\n\n<p>You want:</p>\n\n<pre><code>\"$PACK_INDEX_VAL $val\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$PACK_INDEX_VAL . \" \" . $val\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sprintf(\"%s %s\", $PACK_INDEX_VAL, $val)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>join \" \", $PACK_INDEX_VAL, $val\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5599403, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/209a7e5ee419c7ad0f47c334eff37811?s=128&d=identicon&r=PG&f=1", "display_name": "nithin", "link": "https://stackoverflow.com/users/5599403/nithin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1449056649, "creation_date": 1449056003, "last_edit_date": 1449056180, "question_id": 34041730, "link": "https://stackoverflow.com/questions/34041730/adding-value-to-an-hash-in-perl", "title": "Adding value to an hash in perl", "body": "<p>I am writing a perl script.<br>\nI want to assign two variables as value to an hash as shown below.</p>\n\n<pre><code>$O_seq_err{$bill.$send}=($PACK_INDEX_VAL $val);\n</code></pre>\n\n<p>I need a space between the variables.<br>\nCan I assign it like this. Will this work?</p>\n"}, {"tags": ["perl", "web-services", "soap", "wsdl"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5629809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2dd2de523ce5bea7f483ab23bb2db77?s=128&d=identicon&r=PG&f=1", "display_name": "SebastianH", "link": "https://stackoverflow.com/users/5629809/sebastianh"}, "edited": false, "score": 1, "creation_date": 1449147596, "post_id": 34041076, "comment_id": 55886302, "body": "Thank you for your hint. I changed the code as you suggest, but now i get only a <code>$VAR1 = &#39;0&#39;;</code>. I think the return of <code>my $result = $soap -&gt; SOAP_GetFirmenliste(...</code>  should be a SOAP::SOM Object. But however it is not."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1449054041, "creation_date": 1449054041, "answer_id": 34041076, "question_id": 34040655, "link": "https://stackoverflow.com/questions/34040655/soaplite-wsdl-response-not-correct-deserialized-references/34041076#34041076", "title": "SOAP::Lite (WSDL) Response not correct deserialized (References)", "body": "<p>I'm pretty sure your problem will be this:</p>\n\n<pre><code>my %result  = $soap-&gt;SOAP_GetFirmenliste(\n</code></pre>\n\n<p>Because the result of your <code>print</code> suggests that the first element returned by this is an array ref (that's being converted to a string). </p>\n\n<p>I'm afraid I can't tell directly what it'll be returning, by I would suggest trying:</p>\n\n<pre><code>my $result = $soap -&gt; SOAP_GetFirmenliste( \n</code></pre>\n\n<p>And then <code>print Dumper $result</code></p>\n\n<p>This should show you exactly what sort of data structure you are getting - it won't be a hash. </p>\n"}], "owner": {"reputation": 11, "user_id": 5629809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2dd2de523ce5bea7f483ab23bb2db77?s=128&d=identicon&r=PG&f=1", "display_name": "SebastianH", "link": "https://stackoverflow.com/users/5629809/sebastianh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449054041, "creation_date": 1449052826, "question_id": 34040655, "link": "https://stackoverflow.com/questions/34040655/soaplite-wsdl-response-not-correct-deserialized-references", "title": "SOAP::Lite (WSDL) Response not correct deserialized (References)", "body": "<p>i have a problem with a SOAP-Response an i hope someone can help me.</p>\n\n<p>I think something went wrong, when the SOAP-Response is deserialized by the SOAP::Lite Module. In the SOAP-Response are some \"normal\" Nodes and referenced Nodes. But non of it where correct deserialized.</p>\n\n<p><strong>SOAP-Response:</strong></p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;SOAP-ENV:Envelope SOAP-ENV:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:SOAP-ENC=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n&lt;SOAP-ENV:Body&gt;\n&lt;ns1:SOAP_GetFirmenlisteResponse xmlns:ns1=\"http://www.4d.com/namespace/default\"&gt;\n    &lt;ERRORNUM xsi:type=\"xsd:int\"&gt;0&lt;/ERRORNUM&gt;\n    &lt;ERRORTEXT xsi:type=\"xsd:string\"&gt;\n&lt;/ERRORTEXT&gt;\n    &lt;LISTE_KDLF_NR_ALS_IDS href=\"#ref-1\"/&gt;  &lt;LISTE_SUCHNAMEN href=\"#ref-2\"/&gt;    &lt;LISTE_LFD_NR href=\"#ref-3\"/&gt;   &lt;LISTE_TIMESTAMP_GEAENDERT href=\"#ref-4\"/&gt;  &lt;LISTE_TIMESTAMP_ERZEUGT href=\"#ref-5\"/&gt;\n&lt;/ns1:SOAP_GetFirmenlisteResponse&gt;\n&lt;SOAP-ENC:Array id=\"ref-1\" SOAP-ENC:arrayType=\"xsd:string[4]\"&gt;\n&lt;item1&gt;19288&lt;/item1&gt;\n&lt;item2&gt;19289&lt;/item2&gt;\n&lt;item3&gt;60107&lt;/item3&gt;\n&lt;item4&gt;71897&lt;/item4&gt;\n&lt;/SOAP-ENC:Array&gt;\n&lt;SOAP-ENC:Array id=\"ref-2\" SOAP-ENC:arrayType=\"xsd:string[4]\"&gt;\n&lt;item1&gt;Blabla1&lt;/item1&gt;\n&lt;item2&gt;Blabla2&lt;/item2&gt;\n&lt;item3&gt;Bla M\u00fcnchen&lt;/item3&gt;\n&lt;item4&gt;Bla\u00fcrm B\u00c4R&lt;/item4&gt;\n&lt;/SOAP-ENC:Array&gt;\n&lt;SOAP-ENC:Array id=\"ref-3\" SOAP-ENC:arrayType=\"xsd:int[4]\"&gt;\n&lt;item1&gt;-8423&lt;/item1&gt;\n&lt;item2&gt;-8426&lt;/item2&gt;\n&lt;item3&gt;-8425&lt;/item3&gt;\n&lt;item4&gt;-8428&lt;/item4&gt;\n&lt;/SOAP-ENC:Array&gt;\n&lt;SOAP-ENC:Array id=\"ref-4\" SOAP-ENC:arrayType=\"xsd:string[4]\"&gt;\n&lt;item1&gt;2015-11-23T09:32:23&lt;/item1&gt;\n&lt;item2&gt;2015-11-26T14:55:52&lt;/item2&gt;\n&lt;item3&gt;2015-11-26T08:07:26&lt;/item3&gt;\n&lt;item4&gt;2015-11-27T09:26:25&lt;/item4&gt;\n&lt;/SOAP-ENC:Array&gt;\n&lt;SOAP-ENC:Array id=\"ref-5\" SOAP-ENC:arrayType=\"xsd:string[4]\"&gt;\n&lt;item1&gt;2015-11-23T09:30:54&lt;/item1&gt;\n&lt;item2&gt;2015-11-26T14:52:06&lt;/item2&gt;\n&lt;item3&gt;2015-11-25T10:33:27&lt;/item3&gt;\n&lt;item4&gt;2015-11-27T09:24:05&lt;/item4&gt;\n&lt;/SOAP-ENC:Array&gt;\n&lt;/SOAP-ENV:Body&gt;\n&lt;/SOAP-ENV:Envelope&gt;\n</code></pre>\n\n<p><strong>Dump of Result Hash:</strong></p>\n\n<pre><code>$VAR1 = {\n          'ARRAY(0x2c16e08)' =&gt; undef,\n          '0' =&gt; '',\n          'ARRAY(0x2f42168)' =&gt; [\n                                  'Blabla1',\n                                  'Blabla2',\n                                  \"Bla M\\x{fc}nchen\",\n                                  \"Bla\\x{fc}rm B\\x{c4}R\"\n                                ],\n          'ARRAY(0x2f39680)' =&gt; [\n                                  '2015-11-23T09:32:23',\n                                  '2015-11-26T14:55:52',\n                                  '2015-11-26T08:07:26',\n                                  '2015-11-27T09:26:25'\n                                ]\n        };\n</code></pre>\n\n<p><strong>Perl Code:</strong></p>\n\n<pre><code>#!/usr/bin/perl\n\nuse Data::Dumper;\nuse SOAP::Lite +trace =&gt; [ transport =&gt; \\&amp;log_message ];\n\nsub log_message {\n   my ($in) = @_;\n   my ($cont) = $in-&gt;content;\n   $cont =~ s/&gt;&lt;/&gt;\\n&lt;/g;\n   print \"\\n-------------------------------------------------\\n\";\n   print $cont;\n   print \"\\n-------------------------------------------------\\n\";\n}\n\nmy $soap    = SOAP::Lite-&gt;service('http://192.168.0.13:8181/4dwsdl');\n\n$soap-&gt;envprefix('SOAP-ENV');\n$soap-&gt;encprefix('SOAP-ENC');\n$soap-&gt;soapversion('1.1');\n\n\nmy %result  = $soap-&gt;SOAP_GetFirmenliste(\n                                    '00',\n                                    'SOAPTest',\n                                    'soaptest',\n                                    '0000-00-00',\n                                    '2015-10-01'\n                                    );\n\nprint Dumper(\\%result);\n\n\nexit 0;\n</code></pre>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1449051557, "post_id": 34039583, "comment_id": 55835001, "body": "You can&#39;t, web pages don&#39;t work like that. (Or rather, you probably can, just not this way)."}, {"owner": {"reputation": 49, "user_id": 5462683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-1Wx7lkBR4t8/AAAAAAAAAAI/AAAAAAAAFIo/ntksApZlMyw/photo.jpg?sz=128", "display_name": "Markus", "link": "https://stackoverflow.com/users/5462683/markus"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1449052000, "post_id": 34039583, "comment_id": 55835265, "body": "@Sobrique What&#39;s your proposal?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1449052095, "post_id": 34039583, "comment_id": 55835342, "body": "You should start by learning how HTTP works, then how CGI works."}, {"owner": {"reputation": 49, "user_id": 5462683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-1Wx7lkBR4t8/AAAAAAAAAAI/AAAAAAAAFIo/ntksApZlMyw/photo.jpg?sz=128", "display_name": "Markus", "link": "https://stackoverflow.com/users/5462683/markus"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1449053087, "post_id": 34039583, "comment_id": 55836025, "body": "@choroba What do you want me complaints about learning how HTTP works? :-/ Why can&#39;t you give me a possible proposal?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1449053457, "post_id": 34039583, "comment_id": 55836290, "body": "Because what you&#39;re trying to do isn&#39;t possible the way you&#39;re trying to do it. We can only help you solving your programming problems. Your problem here isn&#39;t a programming problem, it&#39;s that you don&#39;t understand the technologies you&#39;re trying to put together."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1449090312, "post_id": 34039583, "comment_id": 55860189, "body": "It looks like you&#39;re submitting a form. Why not just collect the password with an <code>&lt;input type=&quot;password&quot;&gt;</code> field?"}], "answers": [{"tags": [], "owner": {"reputation": 1040, "user_id": 3882175, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/93YQI.jpg?s=128&g=1", "display_name": "Shantesh", "link": "https://stackoverflow.com/users/3882175/shantesh"}, "is_accepted": true, "score": 0, "last_activity_date": 1449564726, "creation_date": 1449564726, "answer_id": 34151543, "question_id": 34039583, "link": "https://stackoverflow.com/questions/34039583/perl-cgi-how-to-popup-confirm-with-password/34151543#34151543", "title": "Perl Cgi: How to popup confirm with password", "body": "<p>Even i had this problem, the solution i found is that! Maintaining .htaccess  file at my webserver  with following entries in the configuration file in webserver.</p>\n\n<p>for more information go here\n<code>https://httpd.apache.org/docs/2.4/howto/htaccess.html</code></p>\n\n<p>which will allow CGI script to pop up authentication pop up and authenticates again your LDAP if LDAP maintained or else you can use remote->user variable to get the user id and have it cross checked against an array or a file.</p>\n\n<p>i hope this might help you.</p>\n\n<p>-Shantesh</p>\n"}], "owner": {"reputation": 49, "user_id": 5462683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-1Wx7lkBR4t8/AAAAAAAAAAI/AAAAAAAAFIo/ntksApZlMyw/photo.jpg?sz=128", "display_name": "Markus", "link": "https://stackoverflow.com/users/5462683/markus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 34151543, "answer_count": 1, "score": 0, "last_activity_date": 1449564726, "creation_date": 1449049864, "question_id": 34039583, "link": "https://stackoverflow.com/questions/34039583/perl-cgi-how-to-popup-confirm-with-password", "title": "Perl Cgi: How to popup confirm with password", "body": "<p>How to popup confirm with password (other password not same like ssh password), then execute with ssh?</p>\n\n<h3>Package</h3>\n\n<pre><code>use CGI qw/:standard/;\nuse DBI;\nuse strict;\nuse Time::Local;\nuse Net::SSH2;\n#use Term::ReadKey; &lt; maybe?\n</code></pre>\n\n<h3>Main Code</h3>\n\n<pre><code>my $pw;\nmy $pws = \"1234\";\n\nif ($lqcgi-&gt;param('sel_cl')){\n    $selected_action = $lqcgi-&gt;param('sel_cl');\n    print \"Password: \\n\"; #How to popup confirm with password. I don't know!\n    $pw = &lt;STDIN&gt;;\n    chomp ($pw);\n    if ($pw eq $pws){\n        $ssh2-&gt;connect($host{$mxEnv}) or die $!;\n        $ssh2-&gt;auth_password($usr{$mxEnv},$pwd{$mxEnv});\n    }\n}\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1449050035, "post_id": 34039471, "comment_id": 55834026, "body": "<code>\\b</code> affects the lookahead, not the lookbehind here. The whole match is impacted when you remove <code>\\b</code>."}, {"owner": {"reputation": 807, "user_id": 1946464, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8ed0c7d919efc9a8b019586c3455ef54?s=128&d=identicon&r=PG", "display_name": "Ullas", "link": "https://stackoverflow.com/users/1946464/ullas"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1449050197, "post_id": 34039471, "comment_id": 55834146, "body": "can you please explain how the look-ahead while moving from left to the right of the string gets impacted due to \\b?"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 3, "creation_date": 1449050313, "post_id": 34039471, "comment_id": 55834224, "body": "You really can see that for yourself at <a href=\"https://regex101.com/r/kS4qU6/2\" rel=\"nofollow noreferrer\">regex101.com at the <i>regex debugger</i> page</a>. Some people get crazy amount of points for answering such questions by pasting screenshots from that page, but I&#39;d urge you to just go there and check the backtracking steps."}, {"owner": {"reputation": 807, "user_id": 1946464, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8ed0c7d919efc9a8b019586c3455ef54?s=128&d=identicon&r=PG", "display_name": "Ullas", "link": "https://stackoverflow.com/users/1946464/ullas"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1449050390, "post_id": 34039471, "comment_id": 55834257, "body": "sure..that would also help me in understanding...thanks :)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1449051435, "post_id": 34039471, "comment_id": 55834930, "body": "The thing that&#39;s not clear here is that <code>\\b</code> is actually acting as if it&#39;s <code>$</code>. It&#39;s acting as an anchor to the right hand side of the pattern. Your pattern has to read that far, then backtrack so it can then match <code>(\\d\\d\\d)+</code> from the right. Without that, your pattern isn&#39;t anchored and so matches any 4 digit substring - but because it isn&#39;t consuming, it&#39;ll match every digit apart from the last 3. (Which is what&#39;s happening)"}], "answers": [{"comments": [{"owner": {"reputation": 807, "user_id": 1946464, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8ed0c7d919efc9a8b019586c3455ef54?s=128&d=identicon&r=PG", "display_name": "Ullas", "link": "https://stackoverflow.com/users/1946464/ullas"}, "edited": false, "score": 0, "creation_date": 1449050286, "post_id": 34039655, "comment_id": 55834202, "body": "yes..that would greatly simplify the task..thanks a lot for the approach."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 4, "last_activity_date": 1449073110, "last_edit_date": 1449073110, "creation_date": 1449050065, "answer_id": 34039655, "question_id": 34039471, "link": "https://stackoverflow.com/questions/34039471/how-does-b-word-boundary-affect-the-output-in-perl/34039655#34039655", "title": "How does &quot;\\b&quot; word boundary affect the output in perl?", "body": "<p>What <code>\\b</code> does is match the boundary between words. It's otherwise zero width. From <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow\"><code>perlre</code></a>:</p>\n\n<blockquote>\n  <p>A word boundary (<code>\\b</code>) is a spot between two characters that has a <code>\\w</code> on one side of it and a <code>\\W</code> on the other side of it (in either order), counting the imaginary characters off the beginning and end of the string as matching a <code>\\W</code> . </p>\n</blockquote>\n\n<p>The problem with what you're trying to do, is that the positioning of the comma is a right-to-left operation - you don't know if it should be 10,000 or 100,000 until you've seen the total number of digits in the string.</p>\n\n<p>So I would suggest that this is far easier if you <em>don't</em> do a 'straight' regex and lookaheads, and instead do it with <code>reverse</code>:</p>\n\n<pre><code>my $str =  '12365478965412365';    \nmy $comma_sep_str = reverse ( reverse ($str) =~ s/(\\d{3})/$1,/rg );\nprint $comma_sep_str;\n</code></pre>\n\n<p>Reverse it, group in 3s from left to right, and then reverse it again. </p>\n\n<p>If you're having problem with what a regex is doing though, the normal trick is turn on <code>use re 'debug';</code>. </p>\n\n<p>I won't reproduce the output, because it's long. But what is happening is that the pattern is using the <code>\\b</code> to anchor on the end of line. </p>\n\n<p>You can see this a bit more clearly if you take away the <code>g</code> flag:</p>\n\n<pre><code>Compiling REx \"(?&lt;=\\d)(?=(\\d\\d\\d)+\\b)\"\nFinal program:\n   1: IFMATCH[-1] (6)\n   3:   POSIXU[\\d] (4)\n   4:   SUCCEED (0)\n   5: TAIL (6)\n   6: IFMATCH[0] (22)\n   8:   CURLYM[1] {1,32767} (19)\n  12:     POSIXU[\\d] (13)\n  13:     POSIXU[\\d] (14)\n  14:     POSIXU[\\d] (17)\n  17:     SUCCEED (0)\n  18:   NOTHING (19)\n  19:   BOUND (20)\n  20:   SUCCEED (0)\n  21: TAIL (22)\n  22: END (0)\nminlen 0 \nMatching REx \"(?&lt;=\\d)(?=(\\d\\d\\d)+\\b)\" against \"12365478965412365\"\n   0 &lt;&gt; &lt;1236547896&gt;         |  1:IFMATCH[-1](6)\n                                  failed...\n   1 &lt;1&gt; &lt;2365478965&gt;        |  1:IFMATCH[-1](6)\n   0 &lt;&gt; &lt;1236547896&gt;         |  3:  POSIXU[\\d](4)\n   1 &lt;1&gt; &lt;2365478965&gt;        |  4:  SUCCEED(0)\n                                    subpattern success...\n   1 &lt;1&gt; &lt;2365478965&gt;        |  6:IFMATCH[0](22)\n   1 &lt;1&gt; &lt;2365478965&gt;        |  8:  CURLYM[1] {1,32767}(19)\n   1 &lt;1&gt; &lt;2365478965&gt;        | 12:    POSIXU[\\d](13)\n   2 &lt;12&gt; &lt;3654789654&gt;       | 13:    POSIXU[\\d](14)\n   3 &lt;123&gt; &lt;6547896541&gt;      | 14:    POSIXU[\\d](17)\n   4 &lt;1236&gt; &lt;5478965412&gt;     | 17:    SUCCEED(0)\n                                      subpattern success...\n                                    CURLYM now matched 1 times, len=3...\n   4 &lt;1236&gt; &lt;5478965412&gt;     | 12:    POSIXU[\\d](13)\n   5 &lt;12365&gt; &lt;4789654123&gt;    | 13:    POSIXU[\\d](14)\n   6 &lt;23654&gt; &lt;7896541236&gt;    | 14:    POSIXU[\\d](17)\n   7 &lt;36547&gt; &lt;8965412365&gt;    | 17:    SUCCEED(0)\n                                      subpattern success...\n                                    CURLYM now matched 2 times, len=3...\n   7 &lt;36547&gt; &lt;8965412365&gt;    | 12:    POSIXU[\\d](13)\n   8 &lt;65478&gt; &lt;965412365&gt;     | 13:    POSIXU[\\d](14)\n   9 &lt;54789&gt; &lt;65412365&gt;      | 14:    POSIXU[\\d](17)\n  10 &lt;47896&gt; &lt;5412365&gt;       | 17:    SUCCEED(0)\n                                      subpattern success...\n                                    CURLYM now matched 3 times, len=3...\n  10 &lt;47896&gt; &lt;5412365&gt;       | 12:    POSIXU[\\d](13)\n  11 &lt;478965&gt; &lt;412365&gt;       | 13:    POSIXU[\\d](14)\n  12 &lt;4789654&gt; &lt;12365&gt;       | 14:    POSIXU[\\d](17)\n  13 &lt;47896541&gt; &lt;2365&gt;       | 17:    SUCCEED(0)\n                                      subpattern success...\n                                    CURLYM now matched 4 times, len=3...\n  13 &lt;47896541&gt; &lt;2365&gt;       | 12:    POSIXU[\\d](13)\n  14 &lt;478965412&gt; &lt;365&gt;       | 13:    POSIXU[\\d](14)\n  15 &lt;4789654123&gt; &lt;65&gt;       | 14:    POSIXU[\\d](17)\n  16 &lt;47896541236&gt; &lt;5&gt;       | 17:    SUCCEED(0)\n                                      subpattern success...\n                                    CURLYM now matched 5 times, len=3...\n  16 &lt;47896541236&gt; &lt;5&gt;       | 12:    POSIXU[\\d](13)\n  17 &lt;478965412365&gt; &lt;&gt;       | 13:    POSIXU[\\d](14)\n                                      failed...\n                                    CURLYM trying tail with matches=5...\n  16 &lt;47896541236&gt; &lt;5&gt;       | 19:    BOUND(20)\n                                      failed...\n                                    CURLYM trying tail with matches=4...\n  13 &lt;47896541&gt; &lt;2365&gt;       | 19:    BOUND(20)\n                                      failed...\n                                    CURLYM trying tail with matches=3...\n  10 &lt;47896&gt; &lt;5412365&gt;       | 19:    BOUND(20)\n                                      failed...\n                                    CURLYM trying tail with matches=2...\n   7 &lt;36547&gt; &lt;8965412365&gt;    | 19:    BOUND(20)\n                                      failed...\n                                    CURLYM trying tail with matches=1...\n   4 &lt;1236&gt; &lt;5478965412&gt;     | 19:    BOUND(20)\n                                      failed...\n                                    failed...\n                                  failed...\n   2 &lt;12&gt; &lt;3654789654&gt;       |  1:IFMATCH[-1](6)\n   1 &lt;1&gt; &lt;2365478965&gt;        |  3:  POSIXU[\\d](4)\n   2 &lt;12&gt; &lt;3654789654&gt;       |  4:  SUCCEED(0)\n                                    subpattern success...\n   2 &lt;12&gt; &lt;3654789654&gt;       |  6:IFMATCH[0](22)\n   2 &lt;12&gt; &lt;3654789654&gt;       |  8:  CURLYM[1] {1,32767}(19)\n   2 &lt;12&gt; &lt;3654789654&gt;       | 12:    POSIXU[\\d](13)\n   3 &lt;123&gt; &lt;6547896541&gt;      | 13:    POSIXU[\\d](14)\n   4 &lt;1236&gt; &lt;5478965412&gt;     | 14:    POSIXU[\\d](17)\n   5 &lt;12365&gt; &lt;4789654123&gt;    | 17:    SUCCEED(0)\n                                      subpattern success...\n                                    CURLYM now matched 1 times, len=3...\n   5 &lt;12365&gt; &lt;4789654123&gt;    | 12:    POSIXU[\\d](13)\n   6 &lt;23654&gt; &lt;7896541236&gt;    | 13:    POSIXU[\\d](14)\n   7 &lt;36547&gt; &lt;8965412365&gt;    | 14:    POSIXU[\\d](17)\n   8 &lt;65478&gt; &lt;965412365&gt;     | 17:    SUCCEED(0)\n                                      subpattern success...\n                                    CURLYM now matched 2 times, len=3...\n   8 &lt;65478&gt; &lt;965412365&gt;     | 12:    POSIXU[\\d](13)\n   9 &lt;54789&gt; &lt;65412365&gt;      | 13:    POSIXU[\\d](14)\n  10 &lt;47896&gt; &lt;5412365&gt;       | 14:    POSIXU[\\d](17)\n  11 &lt;478965&gt; &lt;412365&gt;       | 17:    SUCCEED(0)\n                                      subpattern success...\n                                    CURLYM now matched 3 times, len=3...\n  11 &lt;478965&gt; &lt;412365&gt;       | 12:    POSIXU[\\d](13)\n  12 &lt;4789654&gt; &lt;12365&gt;       | 13:    POSIXU[\\d](14)\n  13 &lt;47896541&gt; &lt;2365&gt;       | 14:    POSIXU[\\d](17)\n  14 &lt;478965412&gt; &lt;365&gt;       | 17:    SUCCEED(0)\n                                      subpattern success...\n                                    CURLYM now matched 4 times, len=3...\n  14 &lt;478965412&gt; &lt;365&gt;       | 12:    POSIXU[\\d](13)\n  15 &lt;4789654123&gt; &lt;65&gt;       | 13:    POSIXU[\\d](14)\n  16 &lt;47896541236&gt; &lt;5&gt;       | 14:    POSIXU[\\d](17)\n  17 &lt;478965412365&gt; &lt;&gt;       | 17:    SUCCEED(0)\n                                      subpattern success...\n                                    CURLYM now matched 5 times, len=3...\n  17 &lt;478965412365&gt; &lt;&gt;       | 12:    POSIXU[\\d](13)\n                                      failed...\n                                    CURLYM trying tail with matches=5...\n  17 &lt;478965412365&gt; &lt;&gt;       | 19:    BOUND(20)\n  17 &lt;478965412365&gt; &lt;&gt;       | 20:    SUCCEED(0)\n                                      subpattern success...\n   2 &lt;12&gt; &lt;3654789654&gt;       | 22:END(0)\nMatch successful!\nFreeing REx: \"(?&lt;=\\d)(?=(\\d\\d\\d)+\\b)\"\n\n12,365478965412365\n</code></pre>\n\n<p>Because of the lookaround assertions being made, there's a lot of steps in this one iteration of the regex, because what it's matching first is:</p>\n\n<pre><code> (\\d\\d\\d)+\\b\n</code></pre>\n\n<p>1 or more instances of 3 or more digits anchored by a 'boundary'. But there aren't any, so it's using just the end of line. </p>\n\n<p>The thing that's not clear here is that <code>\\b</code> is actually acting as if it's <code>$</code>. It's acting as an anchor to the right hand side of the pattern. Your pattern has to read that far, then backtrack so it can then match <code>(\\d\\d\\d)+</code> from the right. Without that, your pattern isn't anchored and so matches any 4 digit substring - but because it isn't consuming, it'll match every digit apart from the last 3. (Which is what's happening)</p>\n\n<p>Your pattern works the same if you use <code>$</code>. Hopefully this makes it clearer what's going on?</p>\n\n<pre><code>my $str =  '12365478965412365';    \n$str =~ s/(?&lt;=\\d)(?=(\\d\\d\\d)+$)/\\,/g;    \nprint $str;\n</code></pre>\n"}], "owner": {"reputation": 807, "user_id": 1946464, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8ed0c7d919efc9a8b019586c3455ef54?s=128&d=identicon&r=PG", "display_name": "Ullas", "link": "https://stackoverflow.com/users/1946464/ullas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 1, "accepted_answer_id": 34039655, "answer_count": 1, "score": 3, "last_activity_date": 1449073110, "creation_date": 1449049544, "last_edit_date": 1449051576, "question_id": 34039471, "link": "https://stackoverflow.com/questions/34039471/how-does-b-word-boundary-affect-the-output-in-perl", "title": "How does &quot;\\b&quot; word boundary affect the output in perl?", "body": "<p>I want to modify a string. My regex should modify the number</p>\n\n<pre><code>12365478965412365\n</code></pre>\n\n<p>by putting <code>,</code> in the sets of 3. By converting the number into sets of 3 so the output looks like </p>\n\n<pre><code>12,365,478,965,412,365\n</code></pre>\n\n<p>We can use look-ahead and look-behind to achieve this</p>\n\n<pre><code>s/(?&lt;=\\d)(?=(\\d\\d\\d)+\\b)/\\,/g\n</code></pre>\n\n<p>But when I remove <code>\\b</code></p>\n\n<pre><code>s/(?&lt;=\\d)(?=(\\d\\d\\d)+)/\\,/g\n</code></pre>\n\n<p>I get output as</p>\n\n<pre><code>1,2,3,6,5,4,7,8,9,6,5,4,1,2,365.\n</code></pre>\n\n<p>How does <code>\\b</code> affect the position of look behind to apply \",\"?</p>\n\n<p>Does regex go till end of word boundary before look behind is tested?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 35106, "user_id": 2953344, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0Be9p.jpg?s=128&g=1", "display_name": "Sabuj Hassan", "link": "https://stackoverflow.com/users/2953344/sabuj-hassan"}, "is_accepted": false, "score": 1, "last_activity_date": 1449041958, "creation_date": 1449041958, "answer_id": 34037230, "question_id": 34037175, "link": "https://stackoverflow.com/questions/34037175/perl-substitute-some-content-in-a-xml-file/34037230#34037230", "title": "Perl substitute some content in a xml file", "body": "<p>You have to escape the forward slash before the <code>1.1</code> in your command (there tare two same thing in your command in fact). Because you are using <code>/</code> as regex delimiter.</p>\n\n<pre><code>\\\"HTTP\\/1.1\\\"\n      ^ here\n</code></pre>\n\n<p>Alternately you can use any different regex delimiter as well. For example using a <code>hash</code>:</p>\n\n<pre><code>s#..regex..#;;replace;;#g\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1449052240, "creation_date": 1449052240, "answer_id": 34040425, "question_id": 34037175, "link": "https://stackoverflow.com/questions/34037175/perl-substitute-some-content-in-a-xml-file/34040425#34040425", "title": "Perl substitute some content in a xml file", "body": "<p>Don't use regex to parse XML. It's nasty. Use a parser instead:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse XML::Twig; \n\nmy $twig = XML::Twig -&gt; parsefile ( $ENV{'TOMCAT_SERVER_CONF'} ); \nforeach my $connector ( $twig -&gt; get_xpath('Connector') ) {\n    $connector -&gt; set_att('port', $ENV{'ACCESS_PORT'} ); \n}\n$twig -&gt; print;\n</code></pre>\n\n<p>If you need an in place edit:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nsub mod_connector {\n    my ( $twig, $connector ) = @_;\n    $connector-&gt;set_att( 'port', $ENV{'ACCESS_PORT'} );\n}\n\nmy $twig = XML::Twig-&gt;new( twig_handlers =&gt; { 'Connector' =&gt; \\&amp;mod_connector } );\n   $twig -&gt; parsefile_inplace( $ENV{'TOMCAT_ACCESS_CONF'} );\n</code></pre>\n\n<p>And if you really want a one liner:</p>\n\n<pre><code>perl -MXML::Twig -e 'XML::Twig-&gt;new( twig_handlers =&gt; { Connector =&gt; sub { $_-&gt;set_att( \"port\", $ENV{ACCESS_PORT} ) }})-&gt;parsefile_inplace( $ENV{TOMCAT_ACCESS_CONF} );'\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4799752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a6b2be46fed3b22acf6ca68f9a1b90?s=128&d=identicon&r=PG&f=1", "display_name": "spark1631", "link": "https://stackoverflow.com/users/4799752/spark1631"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1449052240, "creation_date": 1449041721, "question_id": 34037175, "link": "https://stackoverflow.com/questions/34037175/perl-substitute-some-content-in-a-xml-file", "title": "Perl substitute some content in a xml file", "body": "<p>I am a newbie of Perl. Now i am trying to use Perl to substitute some content in a xml file. the following code is my command</p>\n\n<pre><code>perl -pi -e \"s/&lt;Connector port=\\\"\\d+\\\" protocol=\\\"HTTP/1.1\\\" /&lt;Connector port=\\\"${ACCESS_PORT}\\\" protocol=\\\"HTTP/1.1\\\" /g\" $TOMCAT_SERVER_CONF\n</code></pre>\n\n<p>but perl gives complains this:</p>\n\n<pre><code>Bareword found where operator expected at -e line 1, near \"\"34233\" protocol\"\n(Missing operator before protocol?)\nCan't modify numeric lt (&lt;) in scalar assignment at -e line 1, near \"\"34233\" protocol\"\nsyntax error at -e line 1, near \"\"34233\" protocol\"\nExecution of -e aborted due to compilation errors.\n</code></pre>\n\n<p>could anyone help out here? would be very appreciate it.</p>\n"}, {"tags": ["perl", "prepare", "mason"], "answers": [{"tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": true, "score": 4, "last_activity_date": 1449041586, "creation_date": 1449041586, "answer_id": 34037146, "question_id": 34036918, "link": "https://stackoverflow.com/questions/34036918/perl-when-method-prepare-gets-called/34037146#34037146", "title": "Perl - When &lt;%method PREPARE&gt; gets called", "body": "<p>From the <strong>Mason Manual</strong>:</p>\n\n<blockquote>\n  <p>The base component class, Mason::Component, has but a few built-in\n  methods: handle, render, wrap, main, m, and cmeta.</p>\n  \n  <p>The main method contains the mix of HTML and Perl in the main part of\n  the component.</p>\n  \n  <p>You can add other methods that output HTML via the  section;\n  these methods automatically have access to $self and $m.</p>\n\n<pre><code>&lt;%method leftcol&gt;\n  &lt;table&gt;&lt;tr&gt;\n    &lt;td&gt;&lt;% $foo %&gt;&lt;/td&gt;\n    ...\n  &lt;/tr&gt;&lt;/table&gt;\n&lt;/%method&gt;\n\n...\n\n&lt;% # call leftcol method and insert HTML here %&gt;\n&lt;% $.leftcol %&gt;\n</code></pre>\n</blockquote>\n\n<p>Which means you are declaring a method named <code>PREPARE</code> without any argument lists by <code>&lt;%method PREPARE&gt;</code> and after writing the method body you will end it using <code>&lt;/%method&gt;</code>.</p>\n\n<p>And, later somewhere you will call it using  <code>&lt;% $.PREPARE %&gt;</code>.For more info refer the <a href=\"http://search.cpan.org/~jswartz/Mason-2.24/lib/Mason/Manual/Components.pod#METHODS\" rel=\"nofollow\">Mason Manual</a>. </p>\n"}], "owner": {"reputation": 5835, "user_id": 969107, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c221e0ceaa1881df71c997ced41137b5?s=128&d=identicon&r=PG", "display_name": "Andy897", "link": "https://stackoverflow.com/users/969107/andy897"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1601, "favorite_count": 0, "accepted_answer_id": 34037146, "answer_count": 1, "score": 0, "last_activity_date": 1449041586, "creation_date": 1449040560, "question_id": 34036918, "link": "https://stackoverflow.com/questions/34036918/perl-when-method-prepare-gets-called", "title": "Perl - When &lt;%method PREPARE&gt; gets called", "body": "<p>I am new to Perl Mason. </p>\n\n<p>I came across this with the suggestion that service calls should be put inside PREPARE block. But when I placed my service calls inside it, seems like the code inside it is never getting executed itself.</p>\n\n<pre><code>&lt;%method PREPARE&gt;\n</code></pre>\n\n<p>Kindly suggest what is the above block for and its usage. </p>\n"}, {"tags": ["perl", "yaml"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1449038801, "post_id": 34036195, "comment_id": 55828097, "body": "What&#39;s the error message?"}, {"owner": {"reputation": 139, "user_id": 4689109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/57465452d55d6c7a7bc58830a7c46fac?s=128&d=identicon&r=PG&f=1", "display_name": "Shaista", "link": "https://stackoverflow.com/users/4689109/shaista"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1449039028, "post_id": 34036195, "comment_id": 55828212, "body": "@MattJacob actually the code doesn&#39;t work after this statement"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 4, "creation_date": 1449039093, "post_id": 34036195, "comment_id": 55828224, "body": "&quot;The code doesn&#39;t work&quot;? What exactly does that mean?"}, {"owner": {"reputation": 139, "user_id": 4689109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/57465452d55d6c7a7bc58830a7c46fac?s=128&d=identicon&r=PG&f=1", "display_name": "Shaista", "link": "https://stackoverflow.com/users/4689109/shaista"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1449039230, "post_id": 34036195, "comment_id": 55828279, "body": "i mean, i used this statement &quot;printf(&quot;requested $serve\\n&quot;);&quot; to display its value , but it doesn&#39;t execute and stop working"}, {"owner": {"reputation": 139, "user_id": 4689109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/57465452d55d6c7a7bc58830a7c46fac?s=128&d=identicon&r=PG&f=1", "display_name": "Shaista", "link": "https://stackoverflow.com/users/4689109/shaista"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1449043334, "post_id": 34036195, "comment_id": 55830141, "body": "@MattJacob can u provide me an example or appropriate link in which two files are loaded using YAML in perl,"}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1449059995, "post_id": 34036195, "comment_id": 55840411, "body": "We can&#39;t help you solve the problem without a clear description of what you expect to happen when you run your code and what actually does happen. &quot;It doesn&#39;t work&quot;, &quot;it doesn&#39;t execute&quot;, and &quot;stop working&quot; tell us essentially nothing about what <i>does</i> happen. Do you get an error message? Does your computer lock up? Do flames shoot out of the keyboard and then the monitor sprouts wings and flies away?"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 139, "user_id": 4689109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/57465452d55d6c7a7bc58830a7c46fac?s=128&d=identicon&r=PG&f=1", "display_name": "Shaista", "link": "https://stackoverflow.com/users/4689109/shaista"}, "edited": false, "score": 0, "creation_date": 1449325113, "post_id": 34041051, "comment_id": 55963094, "body": "@Luna: If you still need help, then you should open another question with more information about your Perl code and your data"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1449053972, "creation_date": 1449053972, "answer_id": 34041051, "question_id": 34036195, "link": "https://stackoverflow.com/questions/34036195/how-to-load-multiple-files-in-using-yaml-in-perl/34041051#34041051", "title": "How to load multiple files in using YAML in perl", "body": "<p>I'm afraid you haven't given anywhere near enough information for us to diagnose your problem, but here's a demonstration of loading two different YAML files, as you asked. As you can see, it's pretty much identical to what you have shown of your own code, which should work fine</p>\n\n<h3>test.yaml</h3>\n\n<pre class=\"lang-yaml prettyprint-override\"><code>---\ntest: value for test\n</code></pre>\n\n<h3>XYZ.yaml</h3>\n\n<pre class=\"lang-yaml prettyprint-override\"><code>---\nxyz: value for xyz\n</code></pre>\n\n<h3>test.pl</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse YAML qw/ LoadFile /;\n\nmy $conf = LoadFile('test.yaml');\nsay $conf-&gt;{test};\n\n$conf = LoadFile('XYZ.yaml');\nsay $conf-&gt;{xyz};\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>value for test\nvalue for xyz\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1449059589, "last_edit_date": 1495540340, "creation_date": 1449059589, "answer_id": 34042875, "question_id": 34036195, "link": "https://stackoverflow.com/questions/34036195/how-to-load-multiple-files-in-using-yaml-in-perl/34042875#34042875", "title": "How to load multiple files in using YAML in perl", "body": "<p>I noticed that in your question, you talked about loading the two files in different functions. So I altered <a href=\"https://stackoverflow.com/users/622310/borodin\">Borodin</a>'s <a href=\"https://stackoverflow.com/a/34041051/7231\">answer</a> to better reflect what I think you are doing.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse YAML qw/ LoadFile /;\n\nsub load_test {\n  my $conf = LoadFile('test.yaml');\n  my $test = $conf-&gt;{test};\n  say $test;\n}\n\nsub load_xyz {\n  my $conf = LoadFile('XYZ.yaml');\n  my $xyz = $conf-&gt;{xyz};\n  say $xyz;\n}\n\nload_test();\nload_xyz();\n</code></pre>\n\n<p>When I run that, I get:</p>\n\n<pre><code>value for test\nvalue for xyz\n</code></pre>\n\n<p>So I can't see what the problem is. If you want more help then you are going to need to give us a lot more detail.</p>\n"}], "owner": {"reputation": 139, "user_id": 4689109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/57465452d55d6c7a7bc58830a7c46fac?s=128&d=identicon&r=PG&f=1", "display_name": "Shaista", "link": "https://stackoverflow.com/users/4689109/shaista"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "accepted_answer_id": 34041051, "answer_count": 2, "score": 0, "last_activity_date": 1449059589, "creation_date": 1449037467, "question_id": 34036195, "link": "https://stackoverflow.com/questions/34036195/how-to-load-multiple-files-in-using-yaml-in-perl", "title": "How to load multiple files in using YAML in perl", "body": "<p>i need to load two different config files in perl using YAML,</p>\n\n<blockquote>\n  <p>use YAML qw'LoadFile';</p>\n</blockquote>\n\n<p>then in first function i used</p>\n\n<blockquote>\n  <p>my $conf = LoadFile('/config/test.yaml'); my $serve = $conf->{test};</p>\n</blockquote>\n\n<p>and in 2nd one i used</p>\n\n<blockquote>\n  <p>my $conf = LoadFile( '/config/XYZ.yaml');  my $key = $conf->{xyz};</p>\n</blockquote>\n\n<p>now the in this case if i used only one file then its works fine, but used them simultaneously gives me error.\nDo anyone know its reason?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 23, "user_id": 4613382, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ba341e8955d0914d1081288877f5553a?s=128&d=identicon&r=PG&f=1", "display_name": "Mufaria Razak", "link": "https://stackoverflow.com/users/4613382/mufaria-razak"}, "reply_to_user": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1449036945, "post_id": 34035998, "comment_id": 55827316, "body": "use POSIX &#39;strftime&#39;; print strftime &quot;%Y_%m_%d_%H_%M_%S/n&quot;, localtime() - 24 * 60 * 60;"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1449038742, "post_id": 34035998, "comment_id": 55828064, "body": "@MufariaRazak Edit your question to include that code."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1449059059, "post_id": 34037942, "comment_id": 55839849, "body": "But why, when POSIX::strftime and Time::Piece are both already included with the Perl code?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1449075679, "post_id": 34037942, "comment_id": 55851844, "body": "Not all days have 24 hours. Your solutions sometimes return an incorrect answer."}], "tags": [], "owner": {"reputation": 126, "user_id": 5629187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16a5107ca0c722de83e57801d071fe2e?s=128&d=identicon&r=PG", "display_name": "kergma", "link": "https://stackoverflow.com/users/5629187/kergma"}, "is_accepted": false, "score": -1, "last_activity_date": 1449044745, "creation_date": 1449044745, "answer_id": 34037942, "question_id": 34035998, "link": "https://stackoverflow.com/questions/34035998/subtracting-no-of-days-with-system-date-and-converting-to-mmddyyyy-format-in-per/34037942#34037942", "title": "Subtracting no of days with system date and converting to MMDDYYYY format in perl", "body": "<p>you can use time2str from Date::Format\n(86400 is the number of seconds in a day)</p>\n\n<p><code>\nuse Date::Format;\nprint time2str(\"%m%d%Y\",time()-45*86400),\"\\n\";\n</code></p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1449075419, "post_id": 34042580, "comment_id": 55851657, "body": "Not all days have 24 hours. All of your solutions sometimes return an incorrect answer. (I think it is possible to write a working Time::Piece solution, but I&#39;m not going to try because it&#39;s such an awful module.)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 0, "last_activity_date": 1449076027, "last_edit_date": 1449076027, "creation_date": 1449058696, "answer_id": 34042580, "question_id": 34035998, "link": "https://stackoverflow.com/questions/34035998/subtracting-no-of-days-with-system-date-and-converting-to-mmddyyyy-format-in-per/34042580#34042580", "title": "Subtracting no of days with system date and converting to MMDDYYYY format in perl", "body": "<p>I was close to closing this question as you didn't include your workings. But I've seen your comment - you should edit your question to include that.</p>\n\n<p>So here's your code:</p>\n\n<pre><code>use POSIX 'strftime';\nprint strftime \"%Y_%m_%d_%H_%M_%S/n\", localtime() - 24 * 60 * 60);\n</code></pre>\n\n<p>That's pretty close. You have three small issues.</p>\n\n<ol>\n<li>You have <code>/n</code> where you meant <code>\\n</code>.</li>\n<li>You have <code>24 * 60 * 60</code>, which is one day. You wanted <code>45 *24 * 60 * 60</code>.</li>\n<li>You need to pass subtract the 45 days from the output from <code>time()</code> and then pass that value to <code>localtime()</code>.</li>\n</ol>\n\n<p>So using your method, you would want:</p>\n\n<pre><code>use POSIX 'strftime';\nprint strftime \"%Y_%m_%d_%H_%M_%S\\n\", localtime(time - 45 * 24 * 60 * 60;\n</code></pre>\n\n<p>But I'd write it using <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow\">Time::Piece</a> and <a href=\"https://metacpan.org/pod/Time::Seconds\" rel=\"nofollow\">Time::Seconds</a> (both of which have been part of the Perl code since 5.10.</p>\n\n<pre><code>use 5.010; # for say()\nuse Time::Seconds;\nuse Time::Piece\n\nsay localtime(time - 45 * ONE_DAY)-&gt;strftime(\"%Y_%m_%d_%H_%M_%S\");'\n</code></pre>\n\n<p><strong>Update:</strong> If you're going to be running this in the hours around a DST changeover, then you're going to get the wrong answer. The usual approach to fixing this is to normalise the localtime to noon before doing the subtraction.</p>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1449066496, "post_id": 34044433, "comment_id": 55844841, "body": "What benefit do you think that DateTIme has over Time::Piece which is already part of the standard Perl distribution?"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1449066922, "post_id": 34044433, "comment_id": 55845141, "body": "It does not assume that every day has 86400 seconds."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1449071828, "post_id": 34044433, "comment_id": 55848946, "body": "generally, when subtracting a number of days, it does not really matter what time it is. However, some timezones make it really difficult. For example,  in Brazil, where the clock changes at midnight."}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 1, "last_activity_date": 1449064268, "creation_date": 1449064268, "answer_id": 34044433, "question_id": 34035998, "link": "https://stackoverflow.com/questions/34035998/subtracting-no-of-days-with-system-date-and-converting-to-mmddyyyy-format-in-per/34044433#34044433", "title": "Subtracting no of days with system date and converting to MMDDYYYY format in perl", "body": "<p>There are so many edge cases around daylight saving time that I would <em>strongly</em> recommend using a proper date-time library. I would also strongly recommend you use the standard YYYY-MM-DD format: it is unambiguous (is 01022015 Jan2 or Feb1?) and it sorts properly lexically.</p>\n\n<pre><code>$ perl -MDateTime -E '\n    say DateTime-&gt;now\n                -&gt;set_time_zone(\"local\")\n                -&gt;subtract(days =&gt; 45)\n                -&gt;strftime(\"%F\")\n'\n2015-10-18\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 2935191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4764c9ba685578fb19a9a29d9cbb0445?s=128&d=identicon&r=PG&f=1", "display_name": "KBSR", "link": "https://stackoverflow.com/users/2935191/kbsr"}, "is_accepted": false, "score": 0, "last_activity_date": 1449239480, "last_edit_date": 1449239480, "creation_date": 1449236392, "answer_id": 34089681, "question_id": 34035998, "link": "https://stackoverflow.com/questions/34035998/subtracting-no-of-days-with-system-date-and-converting-to-mmddyyyy-format-in-per/34089681#34089681", "title": "Subtracting no of days with system date and converting to MMDDYYYY format in perl", "body": "<p>if you are using linux system you can try:</p>\n\n<pre><code>#!/usr/bin/perl\nmy $date=`date +%m%d%Y -d \"45 day ago\"`; # This will work only on **linux**\nprint $date;\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4613382, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ba341e8955d0914d1081288877f5553a?s=128&d=identicon&r=PG&f=1", "display_name": "Mufaria Razak", "link": "https://stackoverflow.com/users/4613382/mufaria-razak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "closed_date": 1449643721, "accepted_answer_id": 34042580, "answer_count": 4, "score": -7, "last_activity_date": 1449239480, "creation_date": 1449036602, "last_edit_date": 1449060815, "question_id": 34035998, "link": "https://stackoverflow.com/questions/34035998/subtracting-no-of-days-with-system-date-and-converting-to-mmddyyyy-format-in-per", "closed_reason": "Not suitable for this site", "title": "Subtracting no of days with system date and converting to MMDDYYYY format in perl", "body": "<p>Input : 45 days<br>\nThis should be converted to system_date-45= MMDDYYYY format using perl   </p>\n\n<p><strong>Update:</strong></p>\n\n<p>Code copied in from comment.</p>\n\n<pre><code>use POSIX 'strftime';\nprint strftime \"%Y_%m_%d_%H_%M_%S/n\", localtime() - 24 * 60 * 60;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 389, "user_id": 2644315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5AWB7.jpg?s=128&g=1", "display_name": "Xerix", "link": "https://stackoverflow.com/users/2644315/xerix"}, "edited": false, "score": 0, "creation_date": 1449040212, "post_id": 34035761, "comment_id": 55828720, "body": "first bytes of the base64 encoding is as follow: data:application/vnd.ms-excel;base64,0M8R4KGxGuEAAAAAAAAAAAA&zwnj;&#8203;AAAAAAAAAPgADAP7/CQA&zwnj;&#8203;GAAAAAAAAAAAAAAABAAA&zwnj;&#8203;AOAAAAAAAAAAAEAAA/v/&zwnj;&#8203;//wAAAAD+////AAAAADc&zwnj;&#8203;AAAD////////////// ........ (the rest is ok, otherwise I would have error, right?)"}], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 4, "last_activity_date": 1449040657, "last_edit_date": 1449040657, "creation_date": 1449039884, "answer_id": 34036750, "question_id": 34035761, "link": "https://stackoverflow.com/questions/34035761/correct-decoding-of-base64-to-blob/34036750#34036750", "title": "Correct decoding of base64 to blob?", "body": "<p>You problem is outside the code you show. <code>FileReader.readAsDataURL</code> does not contain purely the base64 representation of the data, but instead a data-URL which looks like this:</p>\n\n<pre><code> data:application/octet-stream;base64,...base64-encoded-data...\n</code></pre>\n\n<p>If you feed this into the base64 decoder it will attempt to use everything as base64 and ignore any characters which are invalid for base64. Therefore you get some bytes in front of the real content.</p>\n\n<p>You need to fix this issue either in your Javascript code before sending the data or in the Perl code. In Perl you could simply strip everything in front of the real base64, i.e.</p>\n\n<pre><code> s{\\A.*?;base64,}{}s\n</code></pre>\n\n<p>Based on your comment the first bytes of your input file are:</p>\n\n<pre><code> data:application/vnd.ms-excel;base64,\n</code></pre>\n\n<p>This is the part you need to strip from the file, the base64 code comes only after this prefix. If you try interpret these data as base64 instead you get the following bytes (as hex)</p>\n\n<pre><code> 75 ab 5a 6a 9a 65 89 c6  ad 8a 89 ff be 77 66 b1 ec 5c 7a 56 da b1 ee b8\n</code></pre>\n\n<p>which is exactly what you see as the invalid header in your decoded output.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7542021, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sp5xuXgShkw/AAAAAAAAAAI/AAAAAAAAAOM/5PiWuboNXCY/photo.jpg?sz=128", "display_name": "Miguel Angel V&#225;zquez Pimentel", "link": "https://stackoverflow.com/users/7542021/miguel-angel-v%c3%a1zquez-pimentel"}, "is_accepted": false, "score": 0, "last_activity_date": 1596413328, "last_edit_date": 1596413328, "creation_date": 1596409725, "answer_id": 63221854, "question_id": 34035761, "link": "https://stackoverflow.com/questions/34035761/correct-decoding-of-base64-to-blob/63221854#63221854", "title": "Correct decoding of base64 to blob?", "body": "<p>Applying a replace:\ndata:application/vnd.ms-excel;base64,</p>\n<p>In my case is ReactJS, example:</p>\n<pre><code>this.state.archivo_csv.replace('data:application/vnd.ms-excel;base64,','')\n</code></pre>\n"}], "owner": {"reputation": 389, "user_id": 2644315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5AWB7.jpg?s=128&g=1", "display_name": "Xerix", "link": "https://stackoverflow.com/users/2644315/xerix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 969, "favorite_count": 0, "accepted_answer_id": 34036750, "answer_count": 2, "score": 2, "last_activity_date": 1596413328, "creation_date": 1449035341, "last_edit_date": 1454338869, "question_id": 34035761, "link": "https://stackoverflow.com/questions/34035761/correct-decoding-of-base64-to-blob", "title": "Correct decoding of base64 to blob?", "body": "<p>I am working on a project using websocket, and trying to upload selected file to the server.</p>\n\n<p>Using FileReader.readAsDataURL I can pick a file and retrieve its base64 encoding.\nThe problem starts in the server side, when I use PERL MIME:: Base64 decode_base64, even though I get a binary file without any error, its length is longer in 24 bytes for an XLS file or 19 bytes for a ZIP file, and empty file when it is a RAR file.</p>\n\n<p>Checking the binary result I got that the \"additional bytes\" are all in the beginning of a file giving no meaning at all.</p>\n\n<p>I.E.: Test.XLS file size is 29696 bytes, after decoding in the server is 29720 bytes, the 24 \"header bytes\" are (in hex): 75 AB 5A 6A 9A 65 89 C6 AD 8A FF BE 77 66 B1 EC 5C 7A 56 DA B1 EE B8.\nWith these bytes, the file is corrupted. Without these bytes, the file is OK.</p>\n\n<p>THE PERL DECODE ALGORITHM:</p>\n\n<pre><code>use MIME::Base64;\nif(open(TXT,\"$filepath.tmp\")) { # Temporary file contains previously uploaded base64 text encoded using JS FileReader.readAsDataURL\n    my @V=&lt;TXT&gt;; close(TXT);\n    if(open(DFL,\"&gt;$filepath\")) {\n        binmode(DFL);\n        print DFL decode_base64(join('',@V)); close(DFL);\n        # response back to the client\n    }\n    else {  } # error response was removed as not relevant for this question\n}\n</code></pre>\n\n<p>MY QUESTIONS:</p>\n\n<ol>\n<li>What I am missing? Maybe I shall \"crop\" the header bytes? \"24\" or \"19\" is just \"private event\", maybe for other cases the \"header\" will be different, I have no idea about it.</li>\n<li>Base64 does not have a standard among all files?</li>\n<li>I tried decoding only after the \",\" the pure base64 characters, but it produces error.</li>\n</ol>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1449035075, "post_id": 34035671, "comment_id": 55826646, "body": "Do you always want the <i>last outer</i> match?  You may need to use a parser here.  Have a look at <a href=\"http://stackoverflow.com/questions/133601/can-regular-expressions-be-used-to-match-nested-patterns\">this SO article</a>."}, {"owner": {"reputation": 701, "user_id": 2141709, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cd3243c310cf623006eea727d17dcad6?s=128&d=identicon&r=PG", "display_name": "Sid5427", "link": "https://stackoverflow.com/users/2141709/sid5427"}, "reply_to_user": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1449035289, "post_id": 34035671, "comment_id": 55826721, "body": "yes I do, and its not necessary to have a single line of regex. I did try to get everything between the first parenthesis and the last, but that did not work as well."}, {"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1449035555, "post_id": 34035671, "comment_id": 55826805, "body": "One other question: Do you know how many parentheses groups will be present?  It seems to vary at 1-2 in your examples."}, {"owner": {"reputation": 701, "user_id": 2141709, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cd3243c310cf623006eea727d17dcad6?s=128&d=identicon&r=PG", "display_name": "Sid5427", "link": "https://stackoverflow.com/users/2141709/sid5427"}, "reply_to_user": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1449035851, "post_id": 34035671, "comment_id": 55826890, "body": "The last string in the array has the maximum number of possible parentheses groups. There aren&#39;t any other possible groups present in my data."}, {"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1449036309, "post_id": 34035671, "comment_id": 55827073, "body": "You need to deal with the possible of recursive regex for nested parentheses."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1449042733, "post_id": 34035671, "comment_id": 55829854, "body": "We British English speakers also use <i>parentheses</i>. The difference is that, in the UK, a <i>bracket</i> is generally a parenthesis, whereas in American English it is understood to be a square bracket"}, {"owner": {"reputation": 701, "user_id": 2141709, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cd3243c310cf623006eea727d17dcad6?s=128&d=identicon&r=PG", "display_name": "Sid5427", "link": "https://stackoverflow.com/users/2141709/sid5427"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1449043909, "post_id": 34035671, "comment_id": 55830396, "body": "@Borodin - the way I know it is Brackets (), square brackets [] and braces {} (or curly braces)... gets confusing talking to coders in the US."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1449044068, "post_id": 34035671, "comment_id": 55830478, "body": "<i>\u201cParentheses\u201d</i> is fine everywhere"}], "answers": [{"comments": [{"owner": {"reputation": 701, "user_id": 2141709, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cd3243c310cf623006eea727d17dcad6?s=128&d=identicon&r=PG", "display_name": "Sid5427", "link": "https://stackoverflow.com/users/2141709/sid5427"}, "edited": false, "score": 0, "creation_date": 1449037549, "post_id": 34036090, "comment_id": 55827564, "body": "This is one of the most elegant uses of regex I have ever seen. Thank you. I guess the regex101 link has the description of expression as well ?"}, {"owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "reply_to_user": {"reputation": 701, "user_id": 2141709, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cd3243c310cf623006eea727d17dcad6?s=128&d=identicon&r=PG", "display_name": "Sid5427", "link": "https://stackoverflow.com/users/2141709/sid5427"}, "edited": false, "score": 0, "creation_date": 1449037678, "post_id": 34036090, "comment_id": 55827612, "body": "@Sid5427 yes it has :)"}, {"owner": {"reputation": 701, "user_id": 2141709, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cd3243c310cf623006eea727d17dcad6?s=128&d=identicon&r=PG", "display_name": "Sid5427", "link": "https://stackoverflow.com/users/2141709/sid5427"}, "edited": false, "score": 0, "creation_date": 1449039014, "post_id": 34036090, "comment_id": 55828202, "body": "I am a bit confused here ... I am trying to get rid of the outer parenthesis.. (pq(1s3)) to pq(1s3)..."}, {"owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "reply_to_user": {"reputation": 701, "user_id": 2141709, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cd3243c310cf623006eea727d17dcad6?s=128&d=identicon&r=PG", "display_name": "Sid5427", "link": "https://stackoverflow.com/users/2141709/sid5427"}, "edited": false, "score": 0, "creation_date": 1449039182, "post_id": 34036090, "comment_id": 55828266, "body": "@Sid5427 you can easily strip the outer <code>()</code> from the caputured group"}], "tags": [], "owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "is_accepted": true, "score": 2, "last_activity_date": 1449037021, "creation_date": 1449037021, "answer_id": 34036090, "question_id": 34035671, "link": "https://stackoverflow.com/questions/34035671/match-last-regex-pattern-in-perl/34036090#34036090", "title": "Match last regex pattern in Perl", "body": "<pre><code>(\\((?:[^()]|(?1))*\\))(?!.*\\()\n</code></pre>\n\n<p>You can use <code>recursive</code> regex here.See demo.</p>\n\n<p><a href=\"https://regex101.com/r/hE4jH0/21\" rel=\"nofollow\">https://regex101.com/r/hE4jH0/21</a></p>\n"}, {"comments": [{"owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "edited": false, "score": 0, "creation_date": 1449038819, "post_id": 34036505, "comment_id": 55828106, "body": "The spacing you&#39;re using as an anchor is probably not what the OP wants."}, {"owner": {"reputation": 701, "user_id": 2141709, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cd3243c310cf623006eea727d17dcad6?s=128&d=identicon&r=PG", "display_name": "Sid5427", "link": "https://stackoverflow.com/users/2141709/sid5427"}, "reply_to_user": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "edited": false, "score": 0, "creation_date": 1449039137, "post_id": 34036505, "comment_id": 55828243, "body": "@Miller is right - I did not intend to use the spacing as an anchor, but looking at it now - it looks like a good alternative as well."}], "tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 2, "last_activity_date": 1449038695, "creation_date": 1449038695, "answer_id": 34036505, "question_id": 34035671, "link": "https://stackoverflow.com/questions/34035671/match-last-regex-pattern-in-perl/34036505#34036505", "title": "Match last regex pattern in Perl", "body": "<p>Here is a way with given string:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy @alpha = (\"abcdefgh(i) jklmno(pqrs3), uvwxyz\", \n             \"abcdefghi jklmn(opq1st), uvwxyz\",\n             \"abcdefghi jklmn(o_q(1s3)), uvwxyz\",\n             \"abcdef(gh)i jklmno(pq(1s3)), uvwxyz\");\n\nforeach my $line (@alpha)\n{\n    if ( $line =~ m/.*\\s+\\w+\\((.*)\\),\\s+\\w+/ )\n    {\n        print $1, \"\\n\";\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>pqrs3\nopq1st\no_q(1s3)\npq(1s3)\n</code></pre>\n"}], "owner": {"reputation": 701, "user_id": 2141709, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cd3243c310cf623006eea727d17dcad6?s=128&d=identicon&r=PG", "display_name": "Sid5427", "link": "https://stackoverflow.com/users/2141709/sid5427"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 1, "accepted_answer_id": 34036090, "answer_count": 2, "score": 3, "last_activity_date": 1449038760, "creation_date": 1449034830, "last_edit_date": 1449038760, "question_id": 34035671, "link": "https://stackoverflow.com/questions/34035671/match-last-regex-pattern-in-perl", "title": "Match last regex pattern in Perl", "body": "<p>I am coding a script in Perl and need to extract some information from a text file.</p>\n\n<p>This is what my code looks like - the string values are made up but represent all possible string variations.</p>\n\n<pre><code>my @alpha = (\"abcdefgh(i) jklmno(pqrs3), uvwxyz\", \n             \"abcdefghi jklmn(opq1st), uvwxyz\",\n             \"abcdefghi jklmn(o_q(1s3)), uvwxyz\",\n             \"abcdef(gh)i jklmno(pq(1s3)), uvwxyz\");\n\nforeach my $line (@alpha){\n    if ($line =~ /\\((.*\\(?.*\\)?)\\),/){\n    print $1\n    }\n}\n</code></pre>\n\n<p>I am trying to capture the large text between the last set of parenthesis (or brackets for us British English speakers).<br>\nPlease note I am using the \"dot\" operator since I want to match anything, text, numbers, or other special characters.</p>\n\n<p>Essentially I want to print out:</p>\n\n<pre><code>pqrs3\nopq1st\no_q(1s3)\npq(1s3)\n</code></pre>\n\n<p>But I keep getting:</p>\n\n<pre><code> (i) jklmno(pqrs3) &lt;-- not ok\n opq1st &lt;-- this is ok\n opq(1s3) &lt;-- this is also ok\n gh)i jklmno(pq(1s3) &lt;-- not ok\n</code></pre>\n\n<p>What am I doing wrong? or is it even possible to match this way?<br>\nAny help is appreciated.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1449027016, "creation_date": 1449027016, "answer_id": 34034416, "question_id": 34034241, "link": "https://stackoverflow.com/questions/34034241/perl-difference-between-fh-and-fh/34034416#34034416", "title": "Perl Difference between &lt;FH&gt; and &lt;$FH&gt;", "body": "<p><code>IN</code> refers to <code>*IN</code> which refers to the symbol <code>IN</code> in the current package. It is global.</p>\n\n<p><code>my</code> creates variables that are lexically scoped.</p>\n\n<p>Restricting the scope of a variable to where it's needed is a fundamental aspect of CS.</p>\n\n<p>It also allows <code>use strict;</code> to find typos.</p>\n"}], "owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 0, "closed_date": 1449027630, "accepted_answer_id": 34034416, "answer_count": 1, "score": 1, "last_activity_date": 1449027016, "creation_date": 1449025893, "question_id": 34034241, "link": "https://stackoverflow.com/questions/34034241/perl-difference-between-fh-and-fh", "closed_reason": "Duplicate", "title": "Perl Difference between &lt;FH&gt; and &lt;$FH&gt;", "body": "<p>I am not new to Perl by any stretch, but I have actually been away for several years.</p>\n\n<p>Upon my 'return,' lurking on this site and others, I can't help but notice where I used to do this:</p>\n\n<pre><code>open IN, 'filename.txt' or die;\nopen OUT, '&gt;filename.new' or die;\nwhile (&lt;IN&gt;) {\n  print OUT\n}\nclose OUT;\nclose IN;\n</code></pre>\n\n<p>I now see that the standard approach is to now do this:</p>\n\n<pre><code>open my $IN, '&lt;', 'filename.txt' or die;\nopen my $OUT, '&gt;', 'filename.new' or die;\n</code></pre>\n\n<p>I am a big fan of \"when in Rome,\" and I endeavor to do the things the correct way.  On that note, is my first approach wrong?  Does it have implications or risks I'm not aware of?</p>\n\n<p>Off hand one drawback to approach #1 is that this will compile (and probably run) in Perl, even with strictures turned on:</p>\n\n<pre><code>open IN, 'filename.txt' or die;\nopen OUT, '&gt;filename.new' or die;\nwhile (&lt;NOT_EVEN_CLOSE&gt;) {\n  print OUT\n}\nclose OUT;\nclose IN;\n</code></pre>\n\n<p>Another possible (?) reason is you can pass <code>$IN</code> as a parameter?  Kind of like the difference between a static class and a singleton?  I'm grasping for straws on that one.</p>\n\n<p>Finally, assuming method 2 is more correct or better, should I go back and modify old code to apply this change in methodology?</p>\n\n<p>Also, it's quite possible that in my heavy days of doing Perl I was still under a proverbial rock, so if this is a decade old convention, please forgive my ignorance.</p>\n"}, {"tags": ["arrays", "regex", "linux", "perl", "file"], "answers": [{"comments": [{"owner": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "edited": false, "score": 0, "creation_date": 1449241844, "post_id": 34035648, "comment_id": 55934936, "body": "your case for regular expression should handle the case for both names otheriwse what is the point of having regular expression. In that case hard coded one as i have shown above will be working fine"}, {"owner": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "edited": false, "score": 1, "creation_date": 1449263694, "post_id": 34035648, "comment_id": 55947181, "body": "I just checked your solution works for any pattern in the end. Does not matter if its _ or -. You should remove the else condition and then i will be able to accept your answer"}, {"owner": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "edited": false, "score": 0, "creation_date": 1449263704, "post_id": 34035648, "comment_id": 55947186, "body": "else condition is confusing here"}, {"owner": {"reputation": 1459, "user_id": 2084960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YYS8.jpg?s=128&g=1", "display_name": "Sergiy Ostrovsky", "link": "https://stackoverflow.com/users/2084960/sergiy-ostrovsky"}, "reply_to_user": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "edited": false, "score": 0, "creation_date": 1449344832, "post_id": 34035648, "comment_id": 55969817, "body": "@user1188611 ah, missed the <code>elsif ( $file =~ &#39;data_value_most_recent.bin.gz&#39; )</code> part in your code, thought it was just <code>else</code>. Thanks for mentioning that."}], "tags": [], "owner": {"reputation": 1459, "user_id": 2084960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YYS8.jpg?s=128&g=1", "display_name": "Sergiy Ostrovsky", "link": "https://stackoverflow.com/users/2084960/sergiy-ostrovsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1449344935, "last_edit_date": 1449344935, "creation_date": 1449034707, "answer_id": 34035648, "question_id": 34034081, "link": "https://stackoverflow.com/questions/34034081/file-name-and-path-manipulation-using-perl/34035648#34035648", "title": "file name and path manipulation using perl", "body": "<p>1) If you know your pattern you can simply write regex for it and substitute it with empty string, just like this:</p>\n\n<pre><code>my $old_filename = \"ABC_XYZ12345678912_120215_123456789_PQR-HWL-Datafile.tar.gz\";\n\n# pattern described in the question\nmy $pattern = qr/^ABC_[A-Za-z0-9]{14}_\\d{6}_\\d{9}_/;\n\n( my $new_filename = $old_filename ) =~ s/$pattern//;\n\nprint \"new_filename: $new_filename\\n\";\nprint \"old_filename: $old_filename\\n\";\n</code></pre>\n\n<p>2) I don't see anything wrong with copy part. Maybe I didn't get the question.</p>\n"}], "owner": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449344935, "creation_date": 1449024849, "question_id": 34034081, "link": "https://stackoverflow.com/questions/34034081/file-name-and-path-manipulation-using-perl", "title": "file name and path manipulation using perl", "body": "<p>I am having following code. It is working fine but i am trying to make it more generic.</p>\n\n<p>What code does:\nIt loops through an array provided from somewhere as input. Array has values which are path to files. </p>\n\n<p>For example: /path/to/file/location/ABC_XYZ12345678912_120215_010018654_PQR-HWL-Datafile.tar.gz</p>\n\n<p>Now it takes each element in array and tries to remove the first part of file name which \"ABC_XYZ12345678912_120215_010018654_\" and then create a new copy of file with same path but file name having just the last part. For example:\n/path/to/file/location/PQR-HWL-Datafile.tar.gz.</p>\n\n<p>Starting part of file name will always be like above ( pattern wise ) that is ABC_14DigitAlphanumric_monthdateyearpatter(6 digits)_9digit more.</p>\n\n<p>Code is working fine.</p>\n\n<p>Now i have two questions for below code.</p>\n\n<p>1> How can make the part where i extract last part of file name more generic as compared doing some hard coded stuff like:  ( use of some regular expression or something like that )</p>\n\n<pre><code>my ( $file, $dir ) = fileparse($individualFile);\n\n# how this part can be made more generic so that i can directly extract the name of last part of file as compared doing hard code comparison \nif ( $file =~ 'PQR-HWL-Datafile.tar.gz' ) {\n   $newFileName = \"PQR-HWL-Datafile.tar.gz\";\n}elsif ( $file =~ 'data_value_most_recent.bin.gz' ){\n   $newFileName = \"data_value_most_recent.bin.gz\";\n}\n\nmy $absPathToNewFile = File::Spec-&gt;catfile( $dir, $newFileName );\n</code></pre>\n\n<p>2> Secondly copy operation becomes something like below or can be avoided creating the copy:</p>\n\n<p>copy( $individualFile, $absPathToNewFile );   =======>  ( becomes something like this or less hard coded )</p>\n\n<p>copy( File_with_original_name, File_with_new_file_name</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse File::Basename;\nuse File::Copy;\n\nmy @filePathArray =     \n('/path/to/file/location/ABC_XYZ12345678912_120215_010018654_PQR-HWL-    \n</code></pre>\n\n<p>Datafile.tar.gz','/path/to/file/location/ABC_XYZ12345678912_120215_010018654_da ta_value_most_recent.bin.gz');</p>\n\n<pre><code>my $newFileName;\nforeach my $individualFile (@filePathArray) {\n\n  my ( $file, $dir ) = fileparse($individualFile);\n\n  if ( $file =~ 'PQR-HWL-Datafile.tar.gz' ) {\n     $newFileName = \"PQR-HWL-Datafile.tar.gz\";\n  }elsif ( $file =~ 'data_value_most_recent.bin.gz' ){\n     $newFileName = \"data_value_most_recent.bin.gz\";\n  }\n\n  my $absPathToNewFile = File::Spec-&gt;catfile( $dir, $newFileName );\n  copy( $individualFile, $absPathToNewFile );\n}\n</code></pre>\n"}, {"tags": ["perl", "unix"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1449010746, "post_id": 34031763, "comment_id": 55819030, "body": "Did you search CPAN? Did you see <a href=\"http://search.cpan.org/~jettero/Unix-Process-1.3101/Process.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~jettero/Unix-Process-1.3101/Process.pm</a>?"}, {"owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1449012345, "post_id": 34031763, "comment_id": 55819660, "body": "No, I did not. Sorry. I just tried Process.pm - it works Ok but it&#39;s a wrapper arount ps command. If I don&#39;t find anything better then probably will use it. Or maybe I will just use ps to avoid extra dependencies for the project. Thank you!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1449014984, "post_id": 34031763, "comment_id": 55820629, "body": "I&#39;m surprised you&#39;re finding that searching for a process with a given PID is slow, especially if you&#39;re using the command-line where it often takes longer to type a command than execute it. Checking thousands of in-memory values will take very little time at all, especially when much of the code is written in C, as it is for <code>Proc::ProcessTable</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1449015441, "post_id": 34031763, "comment_id": 55820789, "body": "By the way, you want <code>my ($proc) = grep { $_-&gt;pid == $mypid } @{$t-&gt;table}</code> to find a process with a given PID, or <code>my %procs = map { $_-&gt;pid =&gt; $_ } @{$t-&gt;table}</code> to create a hash that maps all PIDs to their process data, after which you could write <code>print $procs{$mypid}-&gt;cmndline</code>"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1449066292, "post_id": 34031763, "comment_id": 55844698, "body": "It&#39;s funny that module does not include such convenience methods."}, {"owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "edited": false, "score": 0, "creation_date": 1449078224, "post_id": 34031763, "comment_id": 55853469, "body": "You are right. Proc::ProcessTable approach works faster."}], "answers": [{"comments": [{"owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "edited": false, "score": 0, "creation_date": 1449012505, "post_id": 34031907, "comment_id": 55819713, "body": "I need some universal solution. I will mostly run it on AIX. There is /proc/&lt;pid&gt;/psinfo on AIX, but it&#39;s a binary format."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1449011088, "creation_date": 1449011088, "answer_id": 34031907, "question_id": 34031763, "link": "https://stackoverflow.com/questions/34031763/best-way-to-get-the-command-line-of-a-process-in-unix/34031907#34031907", "title": "Best way to get the command line of a process in Unix", "body": "<p>On Linux, I like to read the <code>/proc/&lt;pid&gt;/cmdline</code> virtual file.</p>\n\n<pre><code>$pid = 1234;\nopen my $fh, '&lt;', \"/proc/$pid/cmdline\";\nmy $cmdline = &lt;$fh&gt;;   # rare to see \\n in cmdline. Unset $/ if ur paranoid\nclose $fh;\n@cmd = split /\\0+/,$cmdline;\n</code></pre>\n"}], "owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449011088, "creation_date": 1449010466, "last_edit_date": 1449010765, "question_id": 34031763, "link": "https://stackoverflow.com/questions/34031763/best-way-to-get-the-command-line-of-a-process-in-unix", "title": "Best way to get the command line of a process in Unix", "body": "<p>I know about <a href=\"http://metacpan.org/module/Proc::ProcessTable\" rel=\"nofollow\"><code>Proc::ProcessTable</code></a>. My problem is performance: I need to get the result quickly. With <code>Proc::ProcessTable</code>, it looks like this:</p>\n\n<pre><code>foreach $p (@{$t-&gt;table}) {...}\n</code></pre>\n\n<p>So I have to do a full scan through several thousands entries, just to find a process by pid and get the information I am interested in. It's slow. Is there a better way?</p>\n\n<p>I know about the <code>ps</code> command as well, but I am looking for a Perl solution.</p>\n"}, {"tags": ["perl", "excel", "batch-file", "vba"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1919238"}, "edited": false, "score": 2, "creation_date": 1449009825, "post_id": 34031236, "comment_id": 55818675, "body": "Why do you need to use all three languages?"}, {"owner": {"reputation": 10786, "user_id": 4158862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fKDhB.png?s=128&g=1", "display_name": "SomethingDark", "link": "https://stackoverflow.com/users/4158862/somethingdark"}, "edited": false, "score": 0, "creation_date": 1449009973, "post_id": 34031236, "comment_id": 55818735, "body": "All that code and you still haven&#39;t included the contents of the batch file."}, {"owner": {"reputation": 2528, "user_id": 4668368, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/70b77439d7ee9bb7410105b7bc912afb?s=128&d=identicon&r=PG&f=1", "display_name": "justaguy", "link": "https://stackoverflow.com/users/4668368/justaguy"}, "edited": false, "score": 0, "creation_date": 1449010018, "post_id": 34031236, "comment_id": 55818746, "body": "Since I am on a windows machine I am using a <code>batch</code> file to run a <code>perl</code> script as it seems easier.  i wrote the initial script in <code>perl</code> using ubuntu but most of the users are on a windows platform.  Thank you :)."}, {"owner": {"reputation": 2528, "user_id": 4668368, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/70b77439d7ee9bb7410105b7bc912afb?s=128&d=identicon&r=PG&f=1", "display_name": "justaguy", "link": "https://stackoverflow.com/users/4668368/justaguy"}, "reply_to_user": {"reputation": 10786, "user_id": 4158862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fKDhB.png?s=128&g=1", "display_name": "SomethingDark", "link": "https://stackoverflow.com/users/4158862/somethingdark"}, "edited": false, "score": 0, "creation_date": 1449010204, "post_id": 34031236, "comment_id": 55818816, "body": "@SomethingDark I edited the post to include the batch file.  Thank you :)."}, {"owner": {"reputation": 2528, "user_id": 4668368, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/70b77439d7ee9bb7410105b7bc912afb?s=128&d=identicon&r=PG&f=1", "display_name": "justaguy", "link": "https://stackoverflow.com/users/4668368/justaguy"}, "edited": false, "score": 0, "creation_date": 1449014347, "post_id": 34031236, "comment_id": 55820423, "body": "@dan1111 since users are familiar with <code>excel</code> it made sense to use <code>vba</code> as well. Thank you :)."}, {"owner": {"reputation": 10786, "user_id": 4158862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fKDhB.png?s=128&g=1", "display_name": "SomethingDark", "link": "https://stackoverflow.com/users/4158862/somethingdark"}, "edited": false, "score": 2, "creation_date": 1449018477, "post_id": 34031236, "comment_id": 55821675, "body": "Perl exists on Windows, and in fact must be installed on your users&#39; systems in order for your batch script to even work at all. I recommend getting rid of both the VBA and batch options and working exclusively in Perl for this task."}, {"owner": {"reputation": 9743, "user_id": 2127508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b1d5bcb39ec4baad76d20c66506318?s=128&d=identicon&r=PG", "display_name": "barrowc", "link": "https://stackoverflow.com/users/2127508/barrowc"}, "edited": false, "score": 0, "creation_date": 1449021980, "post_id": 34031236, "comment_id": 55822663, "body": "It&#39;s unclear how local variables in a VBA macro (var1, var2, var3, var4) could be visible to the batch file without being added as parameters to wshell.Run"}], "answers": [{"comments": [{"owner": {"reputation": 2528, "user_id": 4668368, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/70b77439d7ee9bb7410105b7bc912afb?s=128&d=identicon&r=PG&f=1", "display_name": "justaguy", "link": "https://stackoverflow.com/users/4668368/justaguy"}, "edited": false, "score": 0, "creation_date": 1449093558, "post_id": 34036000, "comment_id": 55861950, "body": "I was prompting for a name on the command line previously and that was causing some errors, so thought <code>vba</code> may help. However, it is a bit more difficult then anticipated.  I will post a new thread in a day or so with a more updated script (maybe it will work).Thank you very much :)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1919238"}, "is_accepted": false, "score": 1, "last_activity_date": 1449036604, "creation_date": 1449036604, "answer_id": 34036000, "question_id": 34031236, "link": "https://stackoverflow.com/questions/34031236/use-excel-2010-to-update-variables-in-batch-file/34036000#34036000", "title": "use excel 2010 to update variables in batch file", "body": "<p>Your code fails because it confuses VBA local variables with Windows environment variables.  The variables that you are setting in your VBA macro are not visible to the batch file, because the batch file is totally unaware of the VBA environment.</p>\n\n<p>You could fix this (for example by making system calls in the VBA script that set environment variables); however, the bigger problem is that your design makes no sense.\nThere is no reason to involve VBA and a batch file in the task of running a Perl script, and doing so adds unnecessary complexity.</p>\n\n<p>As others have suggested, why not simply use Perl for the task?</p>\n\n<p>If your Windows users are not comfortable with command line arguments, simply make the script prompt for each file name that is needed.  I would also make your script work with input and output files directly, rather than requiring STDIN and STDOUT to be redirected.  If you do this, then you could create a shortcut for your script and have a very easy way of accessing it.</p>\n\n<p>If some users will want to use the script on the command line, you can accept both modes of input:</p>\n\n<pre><code>my $directory;\nmy $descriptor;\nmy $input_file;\nmy $output_file;\n\n#\nif (@ARGV == 4)\n{\n    $directory = $ARGV[0];\n    $descriptor = $ARGV[1];\n    ...etc.\n}\nelse\n{\n    print \"Enter directory name: \"\n    $directory = &lt;&gt;;\n    chomp $directory;  #remove newline\n    ...etc.\n}\n</code></pre>\n"}], "owner": {"reputation": 2528, "user_id": 4668368, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/70b77439d7ee9bb7410105b7bc912afb?s=128&d=identicon&r=PG&f=1", "display_name": "justaguy", "link": "https://stackoverflow.com/users/4668368/justaguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449036604, "creation_date": 1449008097, "last_edit_date": 1531164843, "question_id": 34031236, "link": "https://stackoverflow.com/questions/34031236/use-excel-2010-to-update-variables-in-batch-file", "title": "use excel 2010 to update variables in batch file", "body": "<p>I am trying to update variables using <code>excel 2010 vba</code> that are used in a <code>batch</code> file that runs a code in <code>perl</code>.  Below is the <code>VBA</code> that updates each of the variables and the <code>perl</code> code without the variables is the code that works. With the variables the batch file opens and closes quickly so the syntax appears to be wrong.  Even when I remove <code>@echo off</code> I can not view the error. Thank you :).</p>\n\n<p><strong>VBA</strong> </p>\n\n<pre><code>'Update values and call perl\nDim var1 As String\nDim var2 As String\nDim var3 As String\nDim var4 As String\n\nvar1 = MyDirectory\nvar2 = MyDirectory &amp; \"sample_descriptor.txt\"\nvar3 = \"C:\\cygwin\\home\\cmccabe\\test_probes8.txt\"\nvar4 = MyDirectory &amp; \"output.txt\"\nSet wshell = CreateObject(\"wscript.shell\")\nwshell.Run Chr(34) &amp; \"C:\\Users\\cmccabe\\Desktop\\EmArray\\Design\\spikein.bat\"\n</code></pre>\n\n<p><strong>perl code (no variables)</strong></p>\n\n<pre><code>perl get_imagene_spikein_probe_values.pl \"N:\\1_DATA\\MicroArray\\NexusData\\555_7-2-2015\" \"sample_descriptor.txt\" &lt; test_probes8.txt &gt; \"N:\\1_DATA\\MicroArray\\NexusData\\555_7-2-2015\\output.txt\"\n</code></pre>\n\n<p><strong>perl code (with variables)</strong></p>\n\n<pre><code>perl get_imagene_spikein_probe_values.pl \"%var1%\" \"%var2%\" &lt; %var3% &gt; \"%var4%\"\n</code></pre>\n\n<p><strong>Batch file</strong></p>\n\n<pre><code>@echo off\nperl \"C:\\cygwin\\home\\cmccabe\\get_imagene_spikein_probe_values.pl\" \"%var1%\" \"%var2%\" &lt; \"%var3\" &gt; \"%var4%\"\n</code></pre>\n"}, {"tags": ["perl", "ctime"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1449006374, "post_id": 34030764, "comment_id": 55816988, "body": "Don&#39;t use the backticks for removing files in Perl; the <code>unlink</code> function does it.  In fact, that loop should be written as <code>unlink @list;</code> which is compact, portable and fast."}, {"owner": {"reputation": 1864, "user_id": 4581336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b5d7bbd86863406b495a518128005eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4581336/charlie"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1449006453, "post_id": 34030764, "comment_id": 55817039, "body": "Thank you Jonathan. I&#39;m new to perl and i&#39;m trying to learn the most i can."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1449006603, "post_id": 34030764, "comment_id": 55817132, "body": "I&#39;m not clear whether the <code>find &#47;path&#47; -ctime 1</code> code is meant to be Perl or shell?  As a shell command, it means &quot;if the files (and directories) under <code>&#47;path&#47;</code> were last changed (for instance, change of owner or change of permissions \u2014 or change of content as that sets both mtime and ctime) within the last day, then print the file name&quot;.  That&#39;s a first approximation.  The <code>-1</code> means &#39;less than 1 day&#39; (less than 86400 seconds ago) and <code>1</code> means exactly one day ago (between 86400 and 172800 seconds ago).  If you need to worry which way the conditions go on equality, look in the manual."}, {"owner": {"reputation": 1864, "user_id": 4581336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b5d7bbd86863406b495a518128005eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4581336/charlie"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1449007223, "post_id": 34030764, "comment_id": 55817475, "body": "Thank you Jonathan. Could you take a look at the new edit? I&#39;m having troubles with a function that i&#39;m creating."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1449007374, "post_id": 34030764, "comment_id": 55817557, "body": "Use: <code>print &quot;[[&quot;, $a[0], &quot;]]\\n&quot;;</code> and see what you get.  Then work out why you didn&#39;t get things removed.  The <code>unlink</code> function returns a status telling you whether it failed \u2014 it failed.  And please get rid of the loop unless you&#39;re going to report on the error for each file separately (which isn&#39;t a bad thing to do).  I don&#39;t think <code>unlink</code> will remove directories; there&#39;s <code>rmdir</code> for that.  (And if you want to remove empty directories, use <code>-depth</code> as an option to the <code>find</code> command.)"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 1, "creation_date": 1449007416, "post_id": 34030764, "comment_id": 55817586, "body": "@BrunoFrancisco, in your edit, your loop variable is <code>$l</code>, but you are trying to unlink <code>$linha</code>. Plus Jonathan&#39;s hint."}, {"owner": {"reputation": 1864, "user_id": 4581336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b5d7bbd86863406b495a518128005eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4581336/charlie"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1449007614, "post_id": 34030764, "comment_id": 55817683, "body": "@glennjackman in the real code i used the correct variable. I still don&#39;t get why it didn&#39;t work. I will try Jonanthan hint and i will come back to &quot;report&quot;."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1449007677, "post_id": 34030764, "comment_id": 55817716, "body": "There&#39;s also the <a href=\"http://perldoc.perl.org/File/Find.html\" rel=\"nofollow noreferrer\">File::Find</a> core module that could be used \u2014 it probably requires a bit more confidence in Perl than you currently have, but it is the correct way to go in the future.  Practice will make better; and it&#39;s Perl so TMTOWTDI \u2013 there&#39;s more than one way to do it!"}, {"owner": {"reputation": 1864, "user_id": 4581336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b5d7bbd86863406b495a518128005eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4581336/charlie"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1449007902, "post_id": 34030764, "comment_id": 55817834, "body": "@JonathanLeffler you little bastard (don&#39;t take this the wrong way). I got it using chomp. I&#39;m creating this function to remove backups older than n days. The unlink is the best option for me (i guess). Thank you for the hint. Have a nice day bro!"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1449008036, "post_id": 34030764, "comment_id": 55817898, "body": "The important thing is to see how I helped you debug this.  Knowing how to debug (for example, print the data, and make sure you can see the start and end of what you&#39;re printing) is a very basic but very, very important technique.  Checking return statuses is an important programming technique.  Reporting errors when they&#39;re meaningful (and reporting errors so they are meaningful) is also an important user-interaction technique."}, {"owner": {"reputation": 1864, "user_id": 4581336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b5d7bbd86863406b495a518128005eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4581336/charlie"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1449009961, "post_id": 34030764, "comment_id": 55818728, "body": "@JonathanLeffler thank you. I will keep this in mind next time."}], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1449010106, "post_id": 34030876, "comment_id": 55818780, "body": "The output of <code>find</code> will also contain the end-of-line character, which you would need to remove (see the <code>chomp</code> function) before calling <code>unlink</code>."}], "tags": [], "owner": {"reputation": 635, "user_id": 5225141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ca2a143210415021833f869de4551d?s=128&d=identicon&r=PG&f=1", "display_name": "Chad", "link": "https://stackoverflow.com/users/5225141/chad"}, "is_accepted": true, "score": 1, "last_activity_date": 1449006654, "creation_date": 1449006654, "answer_id": 34030876, "question_id": 34030764, "link": "https://stackoverflow.com/questions/34030764/find-path-ctime-1-what-does-it-do-perl/34030876#34030876", "title": "find /path/ -ctime 1 what does it do? PERL", "body": "<p>The <code>find</code> command is not in <code>perl</code>, it's in the shell.  In other words, it's a system command.  You can learn about it by reading <a href=\"http://linux.die.net/man/1/find\" rel=\"nofollow\">the find man page</a>.</p>\n\n<p>The <code>-ctime</code> test checks whether the file's status was changed before (+1) or after (-1) 1 day from today.  You can read more about <code>ctime</code> <a href=\"http://www.unix.com/tips-and-tutorials/20526-mtime-ctime-atime.html\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 1864, "user_id": 4581336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b5d7bbd86863406b495a518128005eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4581336/charlie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 34030876, "answer_count": 1, "score": -1, "last_activity_date": 1449007130, "creation_date": 1449006220, "last_edit_date": 1449007130, "question_id": 34030764, "link": "https://stackoverflow.com/questions/34030764/find-path-ctime-1-what-does-it-do-perl", "title": "find /path/ -ctime 1 what does it do? PERL", "body": "<p>find /path/ -ctime 1 or find /path/ -ctime -1</p>\n\n<p>As a non native english speaker is hard to me to understand exactaly what this does.</p>\n\n<p>I'm trying to find files that are older than n days and delete them after using </p>\n\n<pre><code>foreach my $l (@list){\n `rm $l`;\n}\n</code></pre>\n\n<h1>NEW EDIT</h1>\n\n<p>what is going on here then? Why is it not removing the files?</p>\n\n<pre><code>my @a = `find /home/osboxes/Desktop/teste -ctime -1`;\nprint @a;\n\nforeach my $l (@a){\n unlink $linha;\n}\n</code></pre>\n\n<p>I have tried using the shell to rm the files:</p>\n\n<p><code>rm $linha;</code></p>\n\n<p>OUTPUT:</p>\n\n<pre><code>/home/osboxes/Desktop/teste\n/home/osboxes/Desktop/teste/asdads\n/home/osboxes/Desktop/teste/asdasdwqe\n</code></pre>\n"}, {"tags": ["perl", "sum"], "answers": [{"comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1449005365, "post_id": 34030410, "comment_id": 55816444, "body": "Care to comment about your downvote?"}, {"owner": {"reputation": 85, "user_id": 5627544, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ca38effa8ad208877443227ade8ff7e?s=128&d=identicon&r=PG&f=1", "display_name": "Juliette", "link": "https://stackoverflow.com/users/5627544/juliette"}, "edited": false, "score": 0, "creation_date": 1449005502, "post_id": 34030410, "comment_id": 55816515, "body": "Thanks for your answer. But if I have to keep the result into a string variable? How I can do this? After this, I have to use the result"}, {"owner": {"reputation": 85, "user_id": 5627544, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ca38effa8ad208877443227ade8ff7e?s=128&d=identicon&r=PG&f=1", "display_name": "Juliette", "link": "https://stackoverflow.com/users/5627544/juliette"}, "edited": false, "score": 0, "creation_date": 1449005886, "post_id": 34030410, "comment_id": 55816724, "body": "I didn&#39;t do downvote ..."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 85, "user_id": 5627544, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ca38effa8ad208877443227ade8ff7e?s=128&d=identicon&r=PG&f=1", "display_name": "Juliette", "link": "https://stackoverflow.com/users/5627544/juliette"}, "edited": false, "score": 0, "creation_date": 1449006781, "post_id": 34030410, "comment_id": 55817232, "body": "@Juliette I was asking whoever did downvote to comment. <code>sprintf</code> already returns a string, so if that is the format you need there should be no further processing needed."}, {"owner": {"reputation": 85, "user_id": 5627544, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ca38effa8ad208877443227ade8ff7e?s=128&d=identicon&r=PG&f=1", "display_name": "Juliette", "link": "https://stackoverflow.com/users/5627544/juliette"}, "edited": false, "score": 2, "creation_date": 1449010224, "post_id": 34030410, "comment_id": 55818824, "body": "Thanks you so much !!! It works perfect you&#39;ve really helped a lot!!"}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": true, "score": 1, "last_activity_date": 1449004896, "creation_date": 1449004896, "answer_id": 34030410, "question_id": 34030172, "link": "https://stackoverflow.com/questions/34030172/perl-sum-hexa-numbers/34030410#34030410", "title": "Perl sum hexa numbers", "body": "<p>You can use <a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"nofollow\"><code>sprintf</code></a> to format an integer as hexadecimal:</p>\n\n<pre><code>perl -E 'say sprintf \"0x%08x\", 0x08 + 4;'\n0x0000000c\n</code></pre>\n\n<p>or </p>\n\n<pre><code>perl -E 'say sprintf \"0x%08X\", 0x08 + 4;'\n0x0000000C\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 5627544, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ca38effa8ad208877443227ade8ff7e?s=128&d=identicon&r=PG&f=1", "display_name": "Juliette", "link": "https://stackoverflow.com/users/5627544/juliette"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "closed_date": 1449352544, "accepted_answer_id": 34030410, "answer_count": 1, "score": -1, "last_activity_date": 1449006533, "creation_date": 1449004126, "last_edit_date": 1449006533, "question_id": 34030172, "link": "https://stackoverflow.com/questions/34030172/perl-sum-hexa-numbers", "closed_reason": "Duplicate", "title": "Perl sum hexa numbers", "body": "<p>I'm actually writing a perl script to learn Perl. This script receives a hexa string and I want to add it 4 for example. But I didn't obtain a hexa result.\nExample: 00000008 + 4 I get 00000012 instead of 0000000C(I already wrote sub that adds zeros for obtaining the correct format).</p>\n\n<p>I want to keep the result into another variable (I don't want to print it). \nI think perhaps I have to convert it into decimal number, add it 4, and convert it in return into hexa number but it seems too much complicated.</p>\n\n<p>Somebody can help me?\nThanks a lot\nJuliette :) </p>\n"}, {"tags": ["linux", "perl", "rename"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 1892150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69947c2261a3037fa189b4b40f5ad2cb?s=128&d=identicon&r=PG", "display_name": "jpf66", "link": "https://stackoverflow.com/users/1892150/jpf66"}, "edited": false, "score": 0, "creation_date": 1449004501, "post_id": 34029745, "comment_id": 55815938, "body": "Thank you! Maybe doing something really dumb, but just typed that into ubuntu command line, and it just hung with &quot;&gt;&quot; on last line. Can&#39;t get normal prompt back."}, {"owner": {"reputation": 1941, "user_id": 5186820, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3054407a607bcfc6f7203280afd0aceb?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5186820/brian"}, "reply_to_user": {"reputation": 19, "user_id": 1892150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69947c2261a3037fa189b4b40f5ad2cb?s=128&d=identicon&r=PG", "display_name": "jpf66", "link": "https://stackoverflow.com/users/1892150/jpf66"}, "edited": false, "score": 0, "creation_date": 1449004743, "post_id": 34029745, "comment_id": 55816068, "body": "Had a typo...  Just fixed."}, {"owner": {"reputation": 1941, "user_id": 5186820, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3054407a607bcfc6f7203280afd0aceb?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5186820/brian"}, "reply_to_user": {"reputation": 19, "user_id": 1892150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69947c2261a3037fa189b4b40f5ad2cb?s=128&d=identicon&r=PG", "display_name": "jpf66", "link": "https://stackoverflow.com/users/1892150/jpf66"}, "edited": false, "score": 0, "creation_date": 1449004776, "post_id": 34029745, "comment_id": 55816093, "body": "FYI - I only tested the first code block...  Hence the typo."}, {"owner": {"reputation": 19, "user_id": 1892150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69947c2261a3037fa189b4b40f5ad2cb?s=128&d=identicon&r=PG", "display_name": "jpf66", "link": "https://stackoverflow.com/users/1892150/jpf66"}, "edited": false, "score": 0, "creation_date": 1449005226, "post_id": 34029745, "comment_id": 55816344, "body": "Fantastic! But we had to correct a typo. There is a $ after name on the third line that needs to be removed. Then it worked. Thank you so much!"}, {"owner": {"reputation": 1941, "user_id": 5186820, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3054407a607bcfc6f7203280afd0aceb?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5186820/brian"}, "reply_to_user": {"reputation": 19, "user_id": 1892150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69947c2261a3037fa189b4b40f5ad2cb?s=128&d=identicon&r=PG", "display_name": "jpf66", "link": "https://stackoverflow.com/users/1892150/jpf66"}, "edited": false, "score": 0, "creation_date": 1449067619, "post_id": 34029745, "comment_id": 55845670, "body": "Oops!  Sorry - my typo fix added a typo."}], "tags": [], "owner": {"reputation": 1941, "user_id": 5186820, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3054407a607bcfc6f7203280afd0aceb?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5186820/brian"}, "is_accepted": false, "score": 1, "last_activity_date": 1449067583, "last_edit_date": 1449067583, "creation_date": 1449002600, "answer_id": 34029745, "question_id": 34029568, "link": "https://stackoverflow.com/questions/34029568/use-rename-to-change-one-number-in-complex-filename/34029745#34029745", "title": "use rename to change one number in complex filename", "body": "<p>You could use awk help with the rename.  For example, if the file name was in a variable <code>name</code>, you could change the name with:</p>\n\n<pre><code>newname=`awk -F. -v OFS=. '{$2+=100};1' &lt;&lt;&lt;$name`\n</code></pre>\n\n<p>If you wanted to go further and rename all files starting with SC in a specific directory, you could do:</p>\n\n<pre><code>for name in SC*; do\n    newname=`awk -F. -v OFS=. '{$2+=100};1' &lt;&lt;&lt;$name`\n    mv \"$name\" \"$newname\"\ndone\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 1892150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69947c2261a3037fa189b4b40f5ad2cb?s=128&d=identicon&r=PG", "display_name": "jpf66", "link": "https://stackoverflow.com/users/1892150/jpf66"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "closed_date": 1449728903, "answer_count": 1, "score": -3, "last_activity_date": 1449067583, "creation_date": 1449001989, "last_edit_date": 1449015632, "question_id": 34029568, "link": "https://stackoverflow.com/questions/34029568/use-rename-to-change-one-number-in-complex-filename", "closed_reason": "Not suitable for this site", "title": "use rename to change one number in complex filename", "body": "<p>Using Linux command line tools, we want to change file names of the following format:</p>\n\n<pre><code>SC1177.2.0002.2015.09.16.18.05.05.900577.177003720.IMA\n</code></pre>\n\n<p>We want to keep everything the same, except add 100 to the second number. So that filename would become:</p>\n\n<pre><code>SC1177.102.0002.2015.09.16.18.05.05.900577.177003720.IMA\n</code></pre>\n\n<p>Note that we can't just prefix \"10\" because another filename is:</p>\n\n<pre><code>SC1177.10.0032.2015.09.16.18.05.05.900577.177107276.IMA\n</code></pre>\n\n<p>Which should then become:</p>\n\n<pre><code>SC1177.110.0032.2015.09.16.18.05.05.900577.177107276.IMA\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 181, "user_id": 2943594, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3f87f48eaac6a99d9dcdb62e017a2dad?s=128&d=identicon&r=PG&f=1", "display_name": "Arvandor", "link": "https://stackoverflow.com/users/2943594/arvandor"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1449003792, "post_id": 34029291, "comment_id": 55815558, "body": "Too much to redact, it was more expedient to do it that way, my apologies."}], "answers": [{"tags": [], "owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "is_accepted": true, "score": 5, "last_activity_date": 1449001332, "creation_date": 1449001332, "answer_id": 34029407, "question_id": 34029291, "link": "https://stackoverflow.com/questions/34029291/why-isnt-getoptlong-initializing-any-values/34029407#34029407", "title": "Why isn&#39;t Getopt::Long initializing any values?", "body": "<p>Your problem is the if statement modifier:</p>\n\n<pre><code>GetOptions(\n    'ip=s'    =&gt; \\$ip,\n    'history' =&gt; \\$history\n    'health'  =&gt; \\$health\n) or die \"Useage: blah blah\" if $history and not $ip;  # &lt;-- remove this if;\n</code></pre>\n\n<p>GetOptions is never being called because <code>$history</code> is undef when that if is reached.</p>\n"}, {"tags": [], "owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "is_accepted": false, "score": 2, "last_activity_date": 1449001406, "creation_date": 1449001406, "answer_id": 34029422, "question_id": 34029291, "link": "https://stackoverflow.com/questions/34029291/why-isnt-getoptlong-initializing-any-values/34029422#34029422", "title": "Why isn&#39;t Getopt::Long initializing any values?", "body": "<p>It works fine (besides the missing <code>,</code>), but there's an error here:</p>\n\n<pre><code>GetOptions(\n    'ip=s' =&gt; \\$ip,\n    'history' =&gt; \\$history\n    'health' =&gt; \\$health\n) or die \"Useage: blah blah\" \nif $history and not $ip;\n</code></pre>\n\n<p>Since <code>$history</code> is undefined, the whole <code>GetOptions</code> isn't executed due to that <code>if</code>. Also you shouldn't use <code>if X and not Y</code>, but rather <code>if X &amp;&amp; ! Y</code>.</p>\n"}], "owner": {"reputation": 181, "user_id": 2943594, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3f87f48eaac6a99d9dcdb62e017a2dad?s=128&d=identicon&r=PG&f=1", "display_name": "Arvandor", "link": "https://stackoverflow.com/users/2943594/arvandor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 34029407, "answer_count": 2, "score": 0, "last_activity_date": 1449003030, "creation_date": 1449000886, "question_id": 34029291, "link": "https://stackoverflow.com/questions/34029291/why-isnt-getoptlong-initializing-any-values", "title": "Why isn&#39;t Getopt::Long initializing any values?", "body": "<p>I'm trying to write a quick script that I can pass different switches to for interacting with a web API that returns text based on what URL I query. So instead of trying to copy/paste the URL and whatever, I can just run script.pl --history for example... Anyways, my code looks something like this</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Getopt::Long qw(GetOptions);\nuse WWW::Curl::Easy;\n\nmy $APIKEY = \"myapikey\";\n\nmy $ip;\nmy $hist;\nmy $health;\nmy $url;\n#... etc\n\nGetOptions(\n    'ip=s' =&gt; \\$ip,\n    'history' =&gt; \\$history\n    'health' =&gt; \\$health\n) or die \"Useage: blah blah\" if $history and not $ip;\n\nif ($health) {\n    $url = \"appropriateurlhere\";\n}\n\n#curl logic/handling/printing/etc\n</code></pre>\n\n<p>So if I tried to do script.pl --health, and do a print \"$health\" it should have been set to some kind of true value, but it's not. It's undefined... I can't figure out why.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 1, "creation_date": 1449008870, "post_id": 34028360, "comment_id": 55818317, "body": "Not really, no. The point of <code>HTTP::Tiny</code> is largely just to be a minimal enough implementation of an HTTP client that can live in perl core, so that <code>CPAN.pm</code> can work to pull a better one off CPAN. It exists largely for bootstrapping purposes, and any task outside of this goal isn&#39;t really within its remit."}, {"owner": {"reputation": 1798, "user_id": 2129219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3afe4c8d030860a80655a7b4547663bf?s=128&d=identicon&r=PG", "display_name": "Colin D", "link": "https://stackoverflow.com/users/2129219/colin-d"}, "reply_to_user": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 0, "creation_date": 1484596749, "post_id": 34028360, "comment_id": 70565309, "body": "@LeoNerd any recommendations for modules that do support multipart file upload?"}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 0, "creation_date": 1502490670, "post_id": 34028360, "comment_id": 78248561, "body": "<a href=\"https://metacpan.org/pod/HTTP::Tiny::Multipart\" rel=\"nofollow noreferrer\">metacpan.org/pod/HTTP::Tiny::Multipart</a>"}], "answers": [{"tags": [], "owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "is_accepted": true, "score": 4, "last_activity_date": 1448999238, "last_edit_date": 1448999238, "creation_date": 1448998568, "answer_id": 34028624, "question_id": 34028360, "link": "https://stackoverflow.com/questions/34028360/can-httptiny-be-used-to-upload-files/34028624#34028624", "title": "Can HTTP::Tiny be used to upload files?", "body": "<p>Not easily.  HTTP::Tiny contains no support for the <code>multipart/form-data</code> content type required by file uploads.  (That's one of the reasons it's called \"Tiny\".)</p>\n\n<p>You <em>could</em> upload a file using the <code>request</code> method, but you'd have to supply the encoded <code>content</code> yourself and also add a <code>multipart/form-data</code> content-type header.</p>\n\n<p>This would be something like</p>\n\n<pre><code>$response = $tiny-&gt;request('POST', $url, {\n        content =&gt; $multipart_form_data,\n        headers =&gt; {'content-type' =&gt; 'multipart/form-data'},\n    }\n);\n</code></pre>\n\n<p>Correctly populating <code>$multipart_form_data</code> is left as an exercise for the reader. :-)</p>\n"}], "owner": {"reputation": 1901, "user_id": 2002471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/222d816f24fcb2d01e92937b6af01d34?s=128&d=identicon&r=PG", "display_name": "chicks", "link": "https://stackoverflow.com/users/2002471/chicks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 848, "favorite_count": 0, "accepted_answer_id": 34028624, "answer_count": 1, "score": 3, "last_activity_date": 1449005500, "creation_date": 1448997556, "last_edit_date": 1449005500, "question_id": 34028360, "link": "https://stackoverflow.com/questions/34028360/can-httptiny-be-used-to-upload-files", "title": "Can HTTP::Tiny be used to upload files?", "body": "<p>Can <code>HTTP::Tiny</code> be used to upload files?  Nothing in the <a href=\"https://metacpan.org/pod/HTTP::Tiny\" rel=\"nofollow\">HTTP::Tiny docs</a> or any of the examples I can find via google show how to upload files with this Perl module.  Is it possible?  Are there any better <code>HTTP::Tiny</code> examples?</p>\n"}, {"tags": ["perl", "solaris"], "comments": [{"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1448998610, "post_id": 34028223, "comment_id": 55812601, "body": "Is there a reason why you don&#39;t just use the <code>kill</code> command directly?"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1449005334, "post_id": 34028223, "comment_id": 55816421, "body": "Tcl just won&#39;t die no matter how hard we ignore it! ;)"}], "answers": [{"tags": [], "owner": {"reputation": 18507, "user_id": 13317, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/47a9a5b4589057085336011863d2ee9a?s=128&d=identicon&r=PG", "display_name": "Kenster", "link": "https://stackoverflow.com/users/13317/kenster"}, "is_accepted": false, "score": 0, "last_activity_date": 1448998630, "creation_date": 1448998630, "answer_id": 34028642, "question_id": 34028223, "link": "https://stackoverflow.com/questions/34028223/perl-script-is-not-kill-tcl-process/34028642#34028642", "title": "Perl script is not kill tcl process", "body": "<pre><code># If the process name isn't in this hash, then you don't get to kill\n# it\nmy %allowed_process_names = (\n    'dtsession'  =&gt; 1,\n    'wish'          =&gt; 1,\n    'compose'    =&gt; 1,\n);\n...\n    my $out = `/usr/ucb/ps -c $pid | /bin/grep $pid | /bin/cut -b 25-1000`;\n...\nNot allowed to kill 14439: wish8.0.\n</code></pre>\n\n<p>Your <code>ps</code> pipeline is identifying the process as <code>wish8.0</code> instead of <code>wish</code> or <code>/prod/bin/wish</code>. You will need to add an entry for \"wish8.0\" to this <code>%allowed_process_names</code> hash in order to use this perl script to kill this process.</p>\n\n<p>If you were to look at <code>/prod/bin/wish</code>, you might find that it's a symbolic link to a file named <code>wish8.0</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 729, "user_id": 3069115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9220d416e46ec9b73cab61afbb26798b?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Tom", "link": "https://stackoverflow.com/users/3069115/tim-tom"}, "is_accepted": true, "score": 1, "last_activity_date": 1448998984, "creation_date": 1448998984, "answer_id": 34028735, "question_id": 34028223, "link": "https://stackoverflow.com/questions/34028223/perl-script-is-not-kill-tcl-process/34028735#34028735", "title": "Perl script is not kill tcl process", "body": "<p>The program name your error message is emitting is wish8.0. So the simplest fix (and most strict) is to add <code>'wish8.0' =&gt; 1</code> to <code>%allowed_process_names</code>.</p>\n\n<p>Or you could make your search less strict by doing something like:</p>\n\n<pre><code>my @allowed_process_names = qw(dtsession wish compose)\nsub allowed_to_kill {\n    return scalar grep { index($_[0], $_) == 0 } @allowed_process_names\n}\n</code></pre>\n\n<p>Which will find any string that starts with any of the allowed process names. (change to >= 0 or != -1 to allow it to match anywhere)</p>\n\n<p>You could also use a regular expression instead. The following ones will match any program that starts with the provided program names. If you remove the leading caret, it would instead match them anywhere in the string.</p>\n\n<pre><code>my $allowed_process_names = qr/^(?:dtsession|wish|compose)/;\nsub allowed_to_kill {\n    return $_[0] =~ /$allowed_process_names/;\n}\n</code></pre>\n\n<p>or if you want to build up the regular expression programmatically:</p>\n\n<pre><code>my @allowed_process_names = qw(dtsession wish compose)\nmy $allowed_process_names = join('|', map quotemeta, @allowed_process_names);\n$allowed_process_names = qr/^(?:$allowed_process_names)/;\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 2141966, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/56b136f7286d88fec8ae00631f727c77?s=128&d=identicon&r=PG", "display_name": "Reazur Rahman", "link": "https://stackoverflow.com/users/2141966/reazur-rahman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 34028735, "answer_count": 2, "score": 0, "last_activity_date": 1448998984, "creation_date": 1448997153, "last_edit_date": 1448997579, "question_id": 34028223, "link": "https://stackoverflow.com/questions/34028223/perl-script-is-not-kill-tcl-process", "title": "Perl script is not kill tcl process", "body": "<p>I have a perl script. It's not killing my tcl process. Here is what my process looks like: </p>\n\n<p>UID 14439 10897   0 13:55:44 pts/26      0:00 /prod/bin/wish /prod/bin/q </p>\n\n<p>Here is my perl script:</p>\n\n<pre><code>#!/usr/bin/env perl\n#\n# Simple kill script that allows users to kill specific processes\n# using sudo\n\nuse BPub::Platform qw(solaris);\n\n# Assume a taint mode type environment\n$ENV{PATH} = '/opt/csw/bin:/usr/bin:/bin';\n\nuse strict;\nuse Getopt::Long;\n\nif (!@ARGV) {\n    print \"Usage: bkill [-9] pid &lt;pid...&gt;\\n\";\n    exit 1;\n}\n\nmy $dashnine;\nGetOptions('9' =&gt; \\$dashnine);\n\n# If the process name isn't in this hash, then you don't get to kill\n# it\nmy %allowed_process_names = (\n    'dtsession'  =&gt; 1,\n    'wish'          =&gt; 1,\n    'compose'    =&gt; 1,\n);\n\n# True if the given process name is one that we can kill\nsub allowed_to_kill {\n    return $allowed_process_names{$_[0]};\n}\n\n# Takes a pid and returns the process name\nsub process_name {\n    my ($pid) = @_;\n\n\n    my $out = `/usr/ucb/ps -c $pid | /bin/grep $pid | /bin/cut -b 25-1000`;\n    if ($?) {\n        print \"Error running ps command: $!\\n\";\n        exit 2;\n    }\n\n    chomp($out);\n\n    return $out;\n}\n\nforeach my $pid (@ARGV) {\n\n    # tainted, remember?\n    if ($pid =~ /^(\\d+)$/) {\n        my $safe_pid = $1;\n\n        my $name = process_name($safe_pid);\n\n        if (allowed_to_kill($name)) {\n            my @cmd = \"/usr/bin/kill\";\n            push (@cmd, '-9') if $dashnine;\n            push @cmd, $pid;\n\n            print \"@cmd\\n\";\n            print \"Killing $name ($pid)\\n\";\n            system(@cmd);\n        } else {\n            print \"Not allowed to kill $safe_pid: $name.\\n\";\n        }\n    } else {\n        print \"Invalid pid: must be a number: $pid\\n\";\n    }\n}\n</code></pre>\n\n<p>When I run the script using sudo bkill PID. I get an error message saying: </p>\n\n<pre><code>bpub-xserver7-prod^UID118-&gt; sudo bkill 14439\nPassword:\nNot allowed to kill 14439: wish8.0.\n</code></pre>\n\n<p>Is there somethings that i can better in this script? How can i fix this problem that i am having getting rid of tcl process. </p>\n"}, {"tags": ["perl", "file", "shell", "unix"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1448988452, "post_id": 34025464, "comment_id": 55806593, "body": "What are you trying to do with <code>-f</code>? I don&#39;t think it does what you think it does. See <a href=\"http://perldoc.perl.org/perlrun.html#%2A-f%2A\" rel=\"nofollow noreferrer\"><code>perldoc perlrun</code></a>."}, {"owner": {"reputation": 174, "user_id": 3313457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0W6hX.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/3313457/gabriel"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1448988802, "post_id": 34025464, "comment_id": 55806833, "body": "I see, you are right I thought it was for reading from a file. However, I&#39;ll modify the question because it is not the cause. Thanks"}, {"owner": {"reputation": 636, "user_id": 39870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2bc869e4cb585a9adbc78a6944c148e?s=128&d=identicon&r=PG", "display_name": "kchoose2", "link": "https://stackoverflow.com/users/39870/kchoose2"}, "edited": false, "score": 0, "creation_date": 1448988866, "post_id": 34025464, "comment_id": 55806880, "body": "Can you pass the file in via stdin and pass your argument in as ARGV[0]?"}, {"owner": {"reputation": 174, "user_id": 3313457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0W6hX.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/3313457/gabriel"}, "edited": false, "score": 0, "creation_date": 1448989571, "post_id": 34025464, "comment_id": 55807333, "body": "I tried to read from stdin but stills trying to make sense of the number as a file.  I tried the solution of Arunesh but tries to recognize both, -- and -=5 as files"}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 1, "creation_date": 1448989621, "post_id": 34025464, "comment_id": 55807359, "body": "@Nilox  Pass <code>ARGS</code> before file <code>perl -spe &#39;print &quot;wait\\n&quot; if (($. % $arg)==0);&#39; -- -arg=6 file</code>. Sorry this will work, I was not on <code>perl</code> before."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1448990104, "post_id": 34025464, "comment_id": 55807676, "body": "See also <a href=\"http://stackoverflow.com/questions/21496063/using-e-and-s-switch-in-perl\">Using -e and -s switch in perl</a>"}, {"owner": {"reputation": 174, "user_id": 3313457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0W6hX.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/3313457/gabriel"}, "reply_to_user": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1448990698, "post_id": 34025464, "comment_id": 55808052, "body": "@AruneshSingh It was that. Useful solution, thanks"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1448990712, "post_id": 34025464, "comment_id": 55808060, "body": "always enable warnings, even (tempted to say especially) in oneliners"}], "answers": [{"comments": [{"owner": {"reputation": 174, "user_id": 3313457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0W6hX.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/3313457/gabriel"}, "edited": false, "score": 1, "creation_date": 1448990083, "post_id": 34025843, "comment_id": 55807656, "body": "That BEGIN was just the thing I needed. It solved the problem and many more in the future. Thanks"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1448989248, "creation_date": 1448989248, "answer_id": 34025843, "question_id": 34025464, "link": "https://stackoverflow.com/questions/34025464/how-to-pass-both-variables-and-files-to-a-perl-p-e-command/34025843#34025843", "title": "How to pass both variables and files to a perl -p -e command", "body": "<p><code>-p</code>, as a superset of <code>-n</code>, wraps the code with a <code>while (&lt;&gt;) { }</code> loop, which reads from the files named on the command line. You need to extract the argument before entering the loop.</p>\n\n<pre><code>perl -e'$n = shift; while (&lt;&gt;) { print \"wait\\n\" if $. % $n == 0; print }' 6 file\n</code></pre>\n\n<p>or</p>\n\n<pre><code>perl -pe'BEGIN { $n = shift }  print \"wait\\n\" if $. % $n == 0' 6 file\n</code></pre>\n\n<p>Alternatively, you could also use an env var.</p>\n\n<pre><code>N=6 perl -pe'print \"wait\\n\" if $. % $ENV{N} == 0' file\n</code></pre>\n"}], "owner": {"reputation": 174, "user_id": 3313457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0W6hX.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/3313457/gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 1, "accepted_answer_id": 34025843, "answer_count": 1, "score": 3, "last_activity_date": 1449005585, "creation_date": 1448988096, "last_edit_date": 1448990181, "question_id": 34025464, "link": "https://stackoverflow.com/questions/34025464/how-to-pass-both-variables-and-files-to-a-perl-p-e-command", "title": "How to pass both variables and files to a perl -p -e command", "body": "<p>I have a command line written in perl that executes in Solaris (maybe this is irrelevant as it is UNIX-like) which <strong>inserts a \"wait\" string every 6 lines</strong></p>\n\n<pre><code>perl -pe 'print \"wait\\n\" if ($. % 6 == 0);' file\n</code></pre>\n\n<p>However, I want to replace that 6 by a parameter (ARGV[0]), resulting in something like this:</p>\n\n<pre><code>perl -pe 'print \"wait\\n\" if ($. % ARGV[0] == 0);' file 6\n</code></pre>\n\n<p>It goes well, giving me the right output, until it finishes reading the file and treats \"6\" as the next file (even when it understood it as <code>ARGV[0]</code> before).</p>\n\n<p>Is there any way to use the <code>-p</code> option and specify which parameters are files and which ones are not?</p>\n\n<hr>\n\n<p>Edited: I thought there was a problem with using the <code>-f</code> option but as @ThisSuitIsBlackNot pointed out, I was using it wrongly.</p>\n"}, {"tags": ["perl", "concatenation", "gzip", "zcat"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1448984523, "post_id": 34023769, "comment_id": 55803671, "body": "Have you tried <code>zcat file1 file2 file3 ... filen | gzip &gt; out.gz</code> (untested)?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448985222, "post_id": 34023769, "comment_id": 55804205, "body": "Have you tried anything yet? Because some attempt at doing so is definitely going to elicit better answers. There are modules to do this without too much difficulty. Or there&#39;s <code>open</code> of an exec pipe"}, {"owner": {"reputation": 551, "user_id": 5621995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2fbc9889325c4e90e235b64ff5fe018b?s=128&d=identicon&r=PG&f=1", "display_name": "AnkP", "link": "https://stackoverflow.com/users/5621995/ankp"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1449007564, "post_id": 34023769, "comment_id": 55817655, "body": "@Sobrique I tried to use zcat to read the gzip file but I am not sure if I can simply concatenate it with each gzip file it reads in from list"}], "answers": [{"comments": [{"owner": {"reputation": 1942, "user_id": 969365, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1EnZd.png?s=128&g=1", "display_name": "simon", "link": "https://stackoverflow.com/users/969365/simon"}, "edited": false, "score": 0, "creation_date": 1448985274, "post_id": 34024321, "comment_id": 55804241, "body": "Wouldn&#39;t the headers and trailer (CRC32 checksum) get mixed up if you just cat a bunch of gzip files into one gzip file? Edit: It will, but gunzip will still be able to unzip the one large gzip file correctly."}, {"owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "reply_to_user": {"reputation": 1942, "user_id": 969365, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1EnZd.png?s=128&g=1", "display_name": "simon", "link": "https://stackoverflow.com/users/969365/simon"}, "edited": false, "score": 0, "creation_date": 1448985349, "post_id": 34024321, "comment_id": 55804307, "body": "Not according to the link at the linked question: <code>The gzip manual says that two gzip files can be concatenated as you attempted.</code>  <a href=\"http://www.gnu.org/software/gzip/manual/gzip.html#Advanced-usage\" rel=\"nofollow noreferrer\">gnu.org/software/gzip/manual/gzip.html#Advanced-usage</a>"}, {"owner": {"reputation": 551, "user_id": 5621995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2fbc9889325c4e90e235b64ff5fe018b?s=128&d=identicon&r=PG&f=1", "display_name": "AnkP", "link": "https://stackoverflow.com/users/5621995/ankp"}, "edited": false, "score": 0, "creation_date": 1449007658, "post_id": 34024321, "comment_id": 55817710, "body": "I need to further read the combined file in a program which would treat the that combined zip file as one single file, so I just cannot concatenate the zip files"}], "tags": [], "owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "is_accepted": false, "score": 1, "last_activity_date": 1448985169, "last_edit_date": 1495535230, "creation_date": 1448984713, "answer_id": 34024321, "question_id": 34023769, "link": "https://stackoverflow.com/questions/34023769/zcat-to-read-gzip-files-and-then-concatenate-them-in-perl/34024321#34024321", "title": "zcat to read gzip files and then concatenate them in Perl", "body": "<p>You don't need perl for this. You don't even need zcat/gzip as gzipped files are <code>cat</code>able:</p>\n\n<pre><code>cat $(cat pathfile) &gt;resultfile\n</code></pre>\n\n<p>But if you really really need to try to get the extra compression by combining:</p>\n\n<pre><code>zcat $(cat pathfile)|gzip &gt;resultfile\n</code></pre>\n\n<p>Adding: Also note the very first \"related\" link on the right, which seems to already answer this very question: <a href=\"https://stackoverflow.com/questions/1143270/how-to-concat-two-or-more-gzip-files-streams?rq=1\">How to concat two or more gzip files/streams</a></p>\n"}, {"tags": [], "owner": {"reputation": 551, "user_id": 5621995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2fbc9889325c4e90e235b64ff5fe018b?s=128&d=identicon&r=PG&f=1", "display_name": "AnkP", "link": "https://stackoverflow.com/users/5621995/ankp"}, "is_accepted": false, "score": 1, "last_activity_date": 1449160821, "creation_date": 1449160821, "answer_id": 34071462, "question_id": 34023769, "link": "https://stackoverflow.com/questions/34023769/zcat-to-read-gzip-files-and-then-concatenate-them-in-perl/34071462#34071462", "title": "zcat to read gzip files and then concatenate them in Perl", "body": "<p>Thanks for the replies - the script runs well now - </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse File::Slurp;\nuse IO::Compress::Gzip qw(gzip $GzipError);\n\n\nmy @data = read_file('./File_list.txt');\nmy $out = \"./test.txt\";\n\n\nforeach my $data_file (@data)\n\n{\n    chomp($data_file);\n    system(\"zcat $data_file &gt;&gt; $out\");\n}\nmy $outzip = \"./test.gz\";\ngzip $out =&gt; $outzip;\n</code></pre>\n"}], "owner": {"reputation": 551, "user_id": 5621995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2fbc9889325c4e90e235b64ff5fe018b?s=128&d=identicon&r=PG&f=1", "display_name": "AnkP", "link": "https://stackoverflow.com/users/5621995/ankp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1373, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1449160821, "creation_date": 1448983095, "last_edit_date": 1449007331, "question_id": 34023769, "link": "https://stackoverflow.com/questions/34023769/zcat-to-read-gzip-files-and-then-concatenate-them-in-perl", "title": "zcat to read gzip files and then concatenate them in Perl", "body": "<p>I need to write a perl script to read gzipped files from a text file list of their paths and then concatenate them together and output to a new gzipped file. <strong>( I need to do this in perl as it will be implemented in a pipeline)</strong> \nI am not sure how to accomplish the zcat and concatenation part, as the file sizes would be in Gbs, I need to take care of the storage and run time as well.</p>\n\n<p>So far I can think of it as - </p>\n\n<pre><code>use strict;\nuse warnings;\nuse IO::Compress::Gzip qw(gzip $GzipError) ;\n\n#-------check the input file specified-------------#\n\n$num_args = $#ARGV + 1;\nif ($num_args != 1) {\n    print \"\\nUsage: name.pl Filelist.txt \\n\";\nexit;\n\n$file_list = $ARGV[0];\n\n#-------------Read the file into arrray-------------#\n\nmy @fastqc_files;   #Array that contains gzipped files \nuse File::Slurp;\nmy @fastqc_files = $file_list;\n\n\n#-------use the zcat over the array contents \nmy $outputfile = \"combined.txt\"\nopen(my $combined_file, '&gt;', $outputfile) or die \"Could not open file '$outputfile' $!\";\n\nfor my $fastqc_file (@fastqc_files) {\n\n    open(IN, sprintf(\"zcat %s |\", $fastqc_file)) \n      or die(\"Can't open pipe from command 'zcat $fastqc_file' : $!\\n\");\n    while (&lt;IN&gt;) {\n        while ( my $line = IN ) {\n          print $outputfile $line ;\n        }\n    }\n    close(IN);\n\nmy $Final_combied_zip = new IO::Compress::Gzip($combined_file);\n  or die \"gzip failed: $GzipError\\n\";\n</code></pre>\n\n<p>Somehow I am not able to get it to run. Also if anyone can guide on the correct way to output this zipped file. </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl", "date", "spreadsheet"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1448977753, "post_id": 34020766, "comment_id": 55798809, "body": "ParseExcel cannot write spreadsheets. It only reads them."}, {"owner": {"reputation": 31, "user_id": 1597236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f12b4486414dc71bcdb0c6bd4380f1c?s=128&d=identicon&r=PG", "display_name": "FriZY", "link": "https://stackoverflow.com/users/1597236/frizy"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1448980433, "post_id": 34020766, "comment_id": 55800635, "body": "command AddCell is part of perl module Spreadsheet::ParseExcel isn&#39;t it?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1448981010, "post_id": 34020766, "comment_id": 55801038, "body": "No, it&#39;s not. Spreadsheet::ParseExcel only reads, as the docs say. Also all the methods follow the notation with underscore <code>do_stuff</code>, so it doesn&#39;t even look likely. If you have this in existing code, it is either from a different module, or it&#39;s homebrew in your existing code."}, {"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "edited": false, "score": 0, "creation_date": 1449001541, "post_id": 34020766, "comment_id": 55814259, "body": "Looks like Win32::OLE syntax"}, {"owner": {"reputation": 31, "user_id": 1597236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f12b4486414dc71bcdb0c6bd4380f1c?s=128&d=identicon&r=PG", "display_name": "FriZY", "link": "https://stackoverflow.com/users/1597236/frizy"}, "edited": false, "score": 0, "creation_date": 1449238614, "post_id": 34020766, "comment_id": 55932734, "body": "I reworked my perl script and I am using module Spreadsheet::WriteExcel now. It seems to me better for me.  .... but for convert date to excel epoch 1900 I am using command LocaltimeExcel from Spreadsheet::ParseExcel::Utility qw(LocaltimeExcel); as I canot install additional modules like Date::Calc which is needed with WriteExcel module."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 1597236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f12b4486414dc71bcdb0c6bd4380f1c?s=128&d=identicon&r=PG", "display_name": "FriZY", "link": "https://stackoverflow.com/users/1597236/frizy"}, "edited": false, "score": 0, "creation_date": 1449239036, "post_id": 34090482, "comment_id": 55933045, "body": "$date_excel = dateStringToExcel($date_string); # 6 DATE $worksheet-&gt;write(6, 1, $date_excel , $format5); #"}], "tags": [], "owner": {"reputation": 31, "user_id": 1597236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f12b4486414dc71bcdb0c6bd4380f1c?s=128&d=identicon&r=PG", "display_name": "FriZY", "link": "https://stackoverflow.com/users/1597236/frizy"}, "is_accepted": false, "score": 1, "last_activity_date": 1449238989, "creation_date": 1449238989, "answer_id": 34090482, "question_id": 34020766, "link": "https://stackoverflow.com/questions/34020766/perl-write-custom-date-format-to-excel-spreadsheet/34090482#34090482", "title": "Perl: write custom date format to excel spreadsheet", "body": "<pre><code># INPUT  \"2015-10-13 23:47\" (dd.mm.yyyy hh:mm) -&gt; OUTPUT \"42290,9909722222\" (excel epoch 1900)\nsub dateStringToExcel {\n    my $date_excel;\n    my ($date_string) = @_; \n    if ( $date_string =~ /\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|30|31) ([012345][0-9])\\:([012345][0-9])/ ) {\n        print \"stringToexcelDate - OK\\n\";\n        my ($year, $month, $day, $hour, $min) = ($date_string =~ /(\\d+)-(\\d+)-(\\d+) (\\d+):(\\d+)/);\n        $date_excel = LocaltimeExcel( 0,   $min, $hour, $day, $month-1, $year-1900 );\n    } else {\n        print \"stringToexcelDate - FAILED\\n\";\n        $date_excel = \"Parsing date string ($date_string) failed!\";\n    };\n    return $date_excel;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 368, "user_id": 5842403, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RKA_WZNw-iw/AAAAAAAAAAI/AAAAAAAAAuQ/gFUyztK-DPg/photo.jpg?sz=128", "display_name": "Joniale", "link": "https://stackoverflow.com/users/5842403/joniale"}, "is_accepted": false, "score": 0, "last_activity_date": 1540558750, "creation_date": 1540558750, "answer_id": 53009316, "question_id": 34020766, "link": "https://stackoverflow.com/questions/34020766/perl-write-custom-date-format-to-excel-spreadsheet/53009316#53009316", "title": "Perl: write custom date format to excel spreadsheet", "body": "<p>I did not know about the <strong>LocaltimeExcel</strong>! function so i did both conversion functions using plain perl.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>sub date2excelvalue {\n  my($day1, $month, $year, $hour, $min, $sec) = @_;\n  my @cumul_d_in_m = (0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 365);\n  my $doy = $cumul_d_in_m[$month - 1] + $day1;\n\n  #\n  full years + your day\n  for my $y(1900..$year) {\n    if ($y == $year) {\n      if ($month &lt;= 2) {\n\n        #\n        dont add manually extra date\n        if inJanuary or February\n        last;\n      }\n      if ((($y % 4 == 0) &amp;&amp; ($y % 100 != 0)) || ($y % 400 == 0) || ($y == 1900)) {\n        $doy++;#\n        leap year\n      }\n    } else {#\n      full years\n      $doy += 365;\n      if ((($y % 4 == 0) &amp;&amp; ($y % 100 != 0)) || ($y % 400 == 0) || ($y == 1900)) {\n        $doy++;#\n        leap year\n      }\n\n    }\n  }#\n  end\n  for y# calculate second parts as a fraction of 86400 seconds\n  my $excel_decimaltimepart = 0;\n  my $total_seconds_from_time = ($hour * 60 * 60 + $min * 60 + $sec);\n  if ($total_seconds_from_time == 86400) {\n    $doy++;#\n    just add a day\n  } else {#\n    add decimal in excel\n    $excel_decimaltimepart = $total_seconds_from_time / (86400);\n    $excel_decimaltimepart = ~s / 0\\. //;\n  }\n  return \"$doy\\.$excel_decimaltimepart\";\n\n}\n\nsub excelvalue2date {\n  my($excelvalueintegerpart, $excelvaluedecimalpart) = @_;\n  my @cumul_d_in_m = (0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 365);\n  my @cumul_d_in_m_leap = (0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335, 366);\n  my @cumul_d_in_m_selected;\n  my($day1, $month, $year, $hour, $min, $sec);\n  $day1 = 0;#\n  all days all years\n  my $days_in_year;\n  my $acumdays_per_month;\n  my $daysinmonth;\n  my $day;\n\n  #\n  full years + your day\n  for my $y(1900. .3000) {\n    my $leap_year = 0;#\n    leap year\n    my $leap_year_mask = 0;#\n    leap year\n    if ((($y % 4 == 0) &amp;&amp; ($y % 100 != 0)) || ($y % 400 == 0) || ($y == 1900)) {\n      $leap_year = 1;#\n      leap year\n      @cumul_d_in_m_selected = @cumul_d_in_m_leap;\n\n    } else {\n      $leap_year = 0;#\n      leap year\n      @cumul_d_in_m_selected = @cumul_d_in_m;\n    }\n\n    if (($day1 + (365 + $leap_year)) &gt; $excelvalueintegerpart) {\n\n      #\n      found this year $y\n      $year = $y;\n      print \"year $y\\n\";\n\n      $days_in_year = $excelvalueintegerpart - $day1;\n      $acumdays_per_month = 0;\n      print \"excelvalueintegerpart  $excelvalueintegerpart\\n\";\n      print \"day1  $day1\\n\";\n      print \"daysinyear $days_in_year\\n\";\n      for my $i(0..$# cumul_d_in_m) {\n        if ($i == $# cumul_d_in_m) {\n          $month = $i + 1;#\n          month 12 December\n          $day = $days_in_year - $cumul_d_in_m_selected[$i];\n          last;\n\n        } else {\n\n          if (($days_in_year &gt; ($cumul_d_in_m_selected[$i])) &amp;&amp; ($days_in_year &lt;= ($cumul_d_in_m_selected[$i + 1]))) {\n            $month = $i + 1;\n            $day = $days_in_year - $cumul_d_in_m_selected[$i];\n            last;\n          }\n\n        }\n\n      }#\n      end\n      for $i months\n\n      # end year\n      last;\n\n    } else {#\n      full years\n      $day1 += (365 + $leap_year);\n    }\n\n  }#\n  end\n  for years interger part comparator\n\n  my $total_seconds_inaday;\n  $total_seconds_inaday = \"0\\.$excelvaluedecimalpart\" * 86400;\n\n  $sec = $total_seconds_inaday;\n  $hour = int($sec / (60 * 60));\n  $sec -= $hour * (60 * 60);\n  $min = int($sec / 60);\n  $sec -= $min * (60);\n  $sec = int($sec);\n  return ($day, $month, $year, $hour, $min, $sec);\n\n}\nmy $excelvariable = date2excelvalue(1, 3, 2018, 14, 14, 30);\nprint \"Excel variable: $excelvariable\\n\";\nmy($integerpart, $decimalwithoutzero) = ($1, $2) if ($excelvariable = ~m / (\\d + )\\.(\\d + ) / );\nmy($day1, $month, $year, $hour, $min, $sec) = excelvalue2date($integerpart, $decimalwithoutzero);\nprint \"Excel Date from value: $day1, $month, $year, $hour, $min, $sec\\n\";\n</code></pre>\n\n<p>\nEnjoy it!</p>\n"}], "owner": {"reputation": 31, "user_id": 1597236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f12b4486414dc71bcdb0c6bd4380f1c?s=128&d=identicon&r=PG", "display_name": "FriZY", "link": "https://stackoverflow.com/users/1597236/frizy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1540558750, "creation_date": 1448973888, "last_edit_date": 1448977619, "question_id": 34020766, "link": "https://stackoverflow.com/questions/34020766/perl-write-custom-date-format-to-excel-spreadsheet", "title": "Perl: write custom date format to excel spreadsheet", "body": "<p>I would like to know how to update cell with custom date format using perl module <a href=\"https://metacpan.org/pod/Spreadsheet::ParseExcel\" rel=\"nofollow\">Spreadsheet::ParseExcel</a>. I am able to get wrong formatted and unformatted value to variable.</p>\n\n<p>For example:<br>\n<strong>A1</strong> is <strong>11-9-15 23:00</strong> (unformatted 42317.9583333333)</p>\n\n<p>Needed format is <strong>09.11.2015 23:00</strong> (dd.mm.yyyy hh:mm)</p>\n\n<pre><code>$worksheet-&gt;AddCell(0, 0, 42317.9583333333, 'dd.mm.yyyy hh:mm');\n</code></pre>\n\n<p>I need something like command above but it doesn\u2019t work. Cell is 42317.9583333333 not 09.11.2015 23:00.</p>\n"}, {"tags": ["perl", "rest"], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1448976534, "creation_date": 1448976534, "answer_id": 34021632, "question_id": 34020150, "link": "https://stackoverflow.com/questions/34020150/can-i-use-restclient-to-call-custom-verbs-such-as-reject/34021632#34021632", "title": "Can I use REST::Client to call custom verbs such as &quot;REJECT&quot;?", "body": "<p><strong>No, you cannot.</strong></p>\n\n<p><a href=\"https://metacpan.org/source/KKANE/REST-Client-273/lib/REST/Client.pm#L331\" rel=\"nofollow\">REST::Client has the verbs built into an <em>error check</em></a> that is part of the <code>request</code> method and is not injectable, so you cannot simply overwrite it without overwriting and rebuilding the whole <code>request</code>.</p>\n\n<blockquote>\n<pre><code>#error check\ncroak \"REST::Client exception: First argument to request must be one of GET, PATCH, PUT, POST, DELETE, OPTIONS, HEAD\" unless $method =~ /^(get|patch|put|post|delete|options|head)$/i;\n</code></pre>\n</blockquote>\n\n<p><strong>However</strong>, if that is not a problem, you could sub-class it, overwrite <code>request</code> with an exact copy but a different regex, and add your own convenience method for <code>REJECT</code>. It would look something like that.</p>\n\n<pre><code>package REST::Client::WithReject;\nuse parent 'REST::Client';\n\nsub request {\n    my $self = shift;\n\n   # original code ...\n\n    #error check\n    croak \"REST::Client exception: First argument to request must be one of GET, PATCH, PUT, POST, DELETE, OPTIONS, HEAD, REJECT\" unless $method =~ /^(get|patch|put|post|delete|options|head|reject)$/i;\n\n    # original code ...\n}\n\nsub REJECT {\n    my $self = shift;\n    return $self-&gt;request('REJECT', @_);\n}\n</code></pre>\n\n<p>Then you can use your package instead of the original one. Of course, it will not benefit from updates to REST::Client, so you would have to update yourself if <code>request</code> changes in a future release.</p>\n\n<p>This works because the underlying HTTP::Request does not care about the method at all. It uses it verbatim. You can put whatever you want there, be it <code>Get</code>, <code>GET</code>, <code>get</code> or <code>GETTHEFSCKOUT</code>. Most likely the server on the other end will not agree with the last one though...</p>\n"}, {"tags": [], "owner": {"reputation": 10748, "user_id": 13992, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c81f585328c241594864f888f1154025?s=128&d=identicon&r=PG", "display_name": "badp", "link": "https://stackoverflow.com/users/13992/badp"}, "is_accepted": true, "score": 1, "last_activity_date": 1448978332, "creation_date": 1448978332, "answer_id": 34022255, "question_id": 34020150, "link": "https://stackoverflow.com/questions/34020150/can-i-use-restclient-to-call-custom-verbs-such-as-reject/34022255#34022255", "title": "Can I use REST::Client to call custom verbs such as &quot;REJECT&quot;?", "body": "<p>I honestly don't know enough about REST to know if this is a sufficiently universal solution to the problem, but a little googling seems to agree this should work for most well-behaved REST APIs, including the one I used:</p>\n\n<pre><code>$client-&gt;addHeader('X-HTTP-Method-Override', 'REJECT');\n$client-&gt;POST(...);\n</code></pre>\n"}], "owner": {"reputation": 10748, "user_id": 13992, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c81f585328c241594864f888f1154025?s=128&d=identicon&r=PG", "display_name": "badp", "link": "https://stackoverflow.com/users/13992/badp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 34022255, "answer_count": 2, "score": 1, "last_activity_date": 1448978332, "creation_date": 1448971826, "last_edit_date": 1448972474, "question_id": 34020150, "link": "https://stackoverflow.com/questions/34020150/can-i-use-restclient-to-call-custom-verbs-such-as-reject", "title": "Can I use REST::Client to call custom verbs such as &quot;REJECT&quot;?", "body": "<p>I have to make a call to a third-party REST API with a <code>REJECT</code> verb.  </p>\n\n<p>Attempting to simply use REST::Client::request failed, complaining that REJECT is not one of the few standard methods:</p>\n\n<blockquote>\n  <p>REST::Client exception: First argument to request must be one of GET, PATCH, PUT, POST, DELETE, OPTIONS, HEAD</p>\n</blockquote>\n\n<p>Can I still use REST::Client to make my call? Do I have to use a different library altogether? I know that, as a last resort a <code>curl</code> incantation might work, but...</p>\n"}, {"tags": ["xml", "perl", "validation", "xml-parsing", "sax"], "comments": [{"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1448971700, "post_id": 34020029, "comment_id": 55795068, "body": "And its Perl or perl but not PERL."}, {"owner": {"reputation": 13, "user_id": 5624685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C90Bm.jpg?s=128&g=1", "display_name": "MSalman", "link": "https://stackoverflow.com/users/5624685/msalman"}, "reply_to_user": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1448972991, "post_id": 34020029, "comment_id": 55795787, "body": "@serenesat (corrected) - do you have an answer to the question though ? (since its not the same as the previous one). previous question: &quot;how to parse the given file with Perl&quot;. this question: &quot;unable to retrieve the values from the inner hash&quot;. and the received answers were not for SAX either !"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1449250186, "post_id": 34020029, "comment_id": 55940436, "body": "I have re-opened this because it&#39;s different now, but what are you actually wanting as your result? Bear in mind that what you&#39;ve got looks like it&#39;ll only trigger once for each warning type (which may occur multiple times in multiple accounts)."}, {"owner": {"reputation": 13, "user_id": 5624685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C90Bm.jpg?s=128&g=1", "display_name": "MSalman", "link": "https://stackoverflow.com/users/5624685/msalman"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1449250627, "post_id": 34020029, "comment_id": 55940685, "body": "@Sobrique I want two things - Firstly the name of the account will only get printed if the account has any warning. Secondly if the account has any warning, print the number of warnings in that iteration as well. I have edited my code chunk to include the part where the twig constructor is being called."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5624685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C90Bm.jpg?s=128&g=1", "display_name": "MSalman", "link": "https://stackoverflow.com/users/5624685/msalman"}, "edited": false, "score": 0, "creation_date": 1449253170, "post_id": 34094169, "comment_id": 55942046, "body": "Thanks for your quick response - however, if I would like to print the name of the account id ONLY if it has any &#39;warn&#39; messages - how I&#39;ll be able to do that (I&#39;ll appreciate if you&#39;ll take my code and insert the blocks of your response in their respective places and provide a complete set)."}, {"owner": {"reputation": 13, "user_id": 5624685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C90Bm.jpg?s=128&g=1", "display_name": "MSalman", "link": "https://stackoverflow.com/users/5624685/msalman"}, "edited": false, "score": 0, "creation_date": 1449449175, "post_id": 34094169, "comment_id": 55998155, "body": "Still unable to comprehend :-( If you can plot your solution in the code which I have given in my question and provide a working answer (which I can take and test) - that would probably do the job. (Excuse my low understanding of Perl - I am fairly new to it)."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 0, "last_activity_date": 1449253731, "last_edit_date": 1449253731, "creation_date": 1449250492, "answer_id": 34094169, "question_id": 34020029, "link": "https://stackoverflow.com/questions/34020029/how-to-catch-all-the-warn-calls-in-your-sub-routine-in-perl/34094169#34094169", "title": "How to catch all the &quot;warn&quot; calls in your sub-routine in Perl", "body": "<p>I don't think I'd do this via <code>warn</code> and instead just keep a log of error events. </p>\n\n<p>E.g. </p>\n\n<pre><code>my %warnings; \n\nsub log_warning { \n    my ( $account_id, $warning ) = @_;\n    warn \"$account id has problem with $warning\\n\";\n    push ( @{$warnings{$warnings}}, $account_id );  \n}\n</code></pre>\n\n<p>This will populate a warning hash, and you'll get a list of messages and which account ids triggered it. </p>\n\n<p>You might invoke it with:</p>\n\n<pre><code>log_warning ( $account -&gt; first_child_text('Id'), \n            \"Login Date exists but the Login Count is still 0\"); \n</code></pre>\n\n<p>After your parsing is done, you'd be able to extract via:</p>\n\n<pre><code>foreach my $message ( keys %warnings ) { \n    print scalar @{ $warnings{$message}} . \" warnings found of \". $message,\"\\n\";\n    print \"Accounts:\\n\"; \n    print join (\"\\n\\t\", @{$warnings{$message}} ), \"\\n\";\n}\n</code></pre>\n\n<p>Something like that anyway. </p>\n\n<p>If you're just after failed accounts - add:</p>\n\n<pre><code>my %failed_accounts;\n</code></pre>\n\n<p>And in that sub, - either just a count:</p>\n\n<pre><code>$failed_accounts{$account_id}++; \n</code></pre>\n\n<p>Or if you want a list of failures:</p>\n\n<pre><code>push ( @{$failed_accounts{$account_id}}, $message ); \n</code></pre>\n\n<p>Which you can then report with:</p>\n\n<pre><code>foreach my $acc_id ( keys %failed_accounts ) { \n   print $acc_id, \" has \", scalar @{$failed_accounts{$acc_id}}, \" errors\\n\";\n   print join ( \"\\n\\t\", @{$failed_accounts{$acc_id}}),\"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5624685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C90Bm.jpg?s=128&g=1", "display_name": "MSalman", "link": "https://stackoverflow.com/users/5624685/msalman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 34094169, "answer_count": 1, "score": 0, "last_activity_date": 1449253731, "creation_date": 1448971440, "last_edit_date": 1449250703, "question_id": 34020029, "link": "https://stackoverflow.com/questions/34020029/how-to-catch-all-the-warn-calls-in-your-sub-routine-in-perl", "title": "How to catch all the &quot;warn&quot; calls in your sub-routine in Perl", "body": "<p>I am using a Twig Parser to perform several account validation checks - and would like to grab all the 'warn' calls as they occur inside my 'process_account' subroutine (in order to display number of warnings each account has shown/etc).</p>\n\n<p>Following is a chunk of my code.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::Twig; \nuse Time::Piece; \n\nuse vars qw/$user/; #User Choice (grabbed via another sub routine)\n\n    sub process_account {\n        my ( $twig, $account ) = @_;\n        print \"Account Name: \", $account -&gt; first_child_text('Id'), \"\\tAccount Status: \", ($account -&gt; first_child_text('Locked') eq 'false' ? \"Not Locked\" : \"LOCKED\"), \"\\n\";\n        my $logindate = join ( \"-\", map { $account -&gt; first_child('LastLoginDate')-&gt;att($_) // 0 } qw ( year month day-of-month) );\n        my $createdate = join ( \"-\", map { $account -&gt; first_child('CreationDate')-&gt;att($_) // 0 } qw ( year month day-of-month) );\n\n        if ($user == 1){\n            #Checking if the LoginID length is between 7-15 &amp; it only contains alphanumeric characters (the length limit will be changed as per the necessity)\n            if ( $account -&gt; first_child_text('Id') !~ /^[A-Za-z0-9_-]+$/ || 7 &gt; length $account -&gt; first_child_text('Id') || 14 &lt; length $account -&gt; first_child_text('Id') ) { \n                warn \"\\tALERT: Login Name is out of the defined Parameters.\\n\", return;\n            }\n        }\n        if ($user == 2){\n            # Checking if the LastLoginDate is older than the creation date.\n            if ( eval{ Time::Piece -&gt; strptime ( $createdate, \"%Y-%m-%d\" )} &gt; eval{Time::Piece -&gt; strptime ( $logindate, \"%Y-%m-%d\" )} ) {\n                warn \"\\tALERT: Last Login Date is older than the creation date.\\n\", return; \n            }\n        }\n        if ($user == 3){\n            #Checking if the Login Count has been incremented since the creation of this account.\n            if (    $logindate eq 0 &amp;&amp; $account -&gt; first_child_text('LoginsCount') eq '0') {\n                warn \"\\tALERT: Login Date exists but the Login Count is still '0'.\\n\", return; \n                }\n            }\n  $twig -&gt; purge; #For Emptying the processed data (so far).\n    }\nmy $twig = XML::Twig -&gt; new ( twig_handlers =&gt; { 'Account' =&gt; \\&amp; process_account } );\n$twig -&gt; parsefile ($file); \n</code></pre>\n\n<p>I've tried several options (for eg using <strong>Warn</strong>)</p>\n\n<pre><code>local $SIG{__WARN__} = sub {\n    state %WARNS;\n    my $message = shift;\n    return if $WARNS{$message}++;\n    logger('warning', $message);\n};\nif ( (%WARNS) &gt; 0 ) { #things i would like to do\n   }\n</code></pre>\n\n<p>But none of the option is working and I would really appreciate your guidance in this regard.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 1, "creation_date": 1448970954, "post_id": 34019742, "comment_id": 55794621, "body": "Those are warnings, you have not declared variables $x, $y, $z, $c."}, {"owner": {"reputation": 587, "user_id": 2245633, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/SLpQK.gif?s=128&g=1", "display_name": "CodeGorilla", "link": "https://stackoverflow.com/users/2245633/codegorilla"}, "reply_to_user": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1448971752, "post_id": 34019742, "comment_id": 55795097, "body": "@serenesat - I know.... those are the variables I&#39;m trying to dynamically create from the <code>@params</code> list"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1448971807, "post_id": 34019742, "comment_id": 55795126, "body": "See also <a href=\"http://stackoverflow.com/questions/29577085/how-to-specify-default-values-for-optional-subroutine-arguments\">How to specify default values for optional subroutine arguments?</a>"}, {"owner": {"reputation": 587, "user_id": 2245633, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/SLpQK.gif?s=128&g=1", "display_name": "CodeGorilla", "link": "https://stackoverflow.com/users/2245633/codegorilla"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1448972466, "post_id": 34019742, "comment_id": 55795477, "body": "@H&#229;konH&#230;gland The Validate::Params thing is nice.... but one still needs to create a list of variables, and then iterate over each possible parameter to [possibly] set the scalar value..."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1448975612, "post_id": 34019742, "comment_id": 55797405, "body": "Yes, but why not just keep the parameters in <code>$params</code>? If you need to use one, for example <code>foo</code>, you can write (as an example) <code>my $result = $params-&gt;{foo} + 2</code>.. Then it might be easier to read your code later? As it is clear that you are using a parameter.."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 4, "creation_date": 1448976558, "post_id": 34019742, "comment_id": 55798071, "body": "<a href=\"http://perl.plover.com/varvarname.html\" rel=\"nofollow noreferrer\">perl.plover.com/varvarname.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 587, "user_id": 2245633, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/SLpQK.gif?s=128&g=1", "display_name": "CodeGorilla", "link": "https://stackoverflow.com/users/2245633/codegorilla"}, "edited": false, "score": 0, "creation_date": 1448973530, "post_id": 34020149, "comment_id": 55796090, "body": "Interesting....... however this leaves me without the existence of the optional parameters - which means I can&#39;t even do <code>if exists $foo</code>, let alone <code>if defined $foo</code>  (and yes - I appreciate the opportunities for &quot;hole-in-foot&quot; :)  )"}, {"owner": {"reputation": 2324, "user_id": 5334131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU6Bo.jpg?s=128&g=1", "display_name": "Hellmar Becker", "link": "https://stackoverflow.com/users/5334131/hellmar-becker"}, "reply_to_user": {"reputation": 587, "user_id": 2245633, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/SLpQK.gif?s=128&g=1", "display_name": "CodeGorilla", "link": "https://stackoverflow.com/users/2245633/codegorilla"}, "edited": false, "score": 0, "creation_date": 1448973717, "post_id": 34020149, "comment_id": 55796224, "body": "You can still do <code>if exists $foo</code>. But using the above style of code, $foo can magically spring into life."}], "tags": [], "owner": {"reputation": 2324, "user_id": 5334131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU6Bo.jpg?s=128&g=1", "display_name": "Hellmar Becker", "link": "https://stackoverflow.com/users/5334131/hellmar-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1448971824, "creation_date": 1448971824, "answer_id": 34020149, "question_id": 34019742, "link": "https://stackoverflow.com/questions/34019742/in-perl-can-i-dynamically-create-variables-within-a-subroutine/34020149#34020149", "title": "In perl, can I dynamically create variables within a subroutine?", "body": "<p>I did this using soft references:</p>\n\n<pre><code>#!perl\n\nno strict \"refs\";\n\nmy %vars = ( x =&gt; 1, y =&gt; 2 );\n\nfor my $k ( keys %vars ) {\n  $$k = $vars{$k};\n}\n\nprint $x, $y;\n</code></pre>\n\n<p>But there's a reason why the recommended settings (use strict; use warnings;) prevent this kind of pattern. It is easy to shoot yourself in the foot with it.</p>\n"}, {"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 2, "last_activity_date": 1448977217, "creation_date": 1448977217, "answer_id": 34021860, "question_id": 34019742, "link": "https://stackoverflow.com/questions/34019742/in-perl-can-i-dynamically-create-variables-within-a-subroutine/34021860#34021860", "title": "In perl, can I dynamically create variables within a subroutine?", "body": "<p>It's a really bad idea to use symbolic references like this... hashes pretty well completely eliminate the need for this.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $params = { x =&gt; 1, y =&gt; 2, foo =&gt; 3, };\n\nthing($params);\n\nsub thing {\n    my $params = shift;\n    my $foo;\n    if (defined $params-&gt;{foo}){\n        $foo = $params-&gt;{foo};\n    }\n    print $foo;\n}\n</code></pre>\n\n<p>You can also pass in a hash itself directly (whether it be pre-created, or passed inline to the sub. If pre-created, the sub will operate on a copy).</p>\n\n<pre><code>thing(foo =&gt; 1, x =&gt; 2);\n\nsub thing {\n    my %params = @_;\n    print $params{foo} if defined $params{foo};\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 2, "creation_date": 1448978206, "post_id": 34022030, "comment_id": 55799100, "body": "Note that <code>&amp;&amp; $params-&gt;{$p}</code> will skip any untrue value (zero, empty string etc), which may or may not be what one wants."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1448978723, "post_id": 34022030, "comment_id": 55799454, "body": "Bugger. Yes, I spotted that as I was writing my answer, but forgot to fix it. Updated answer to clarify."}, {"owner": {"reputation": 587, "user_id": 2245633, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/SLpQK.gif?s=128&g=1", "display_name": "CodeGorilla", "link": "https://stackoverflow.com/users/2245633/codegorilla"}, "edited": false, "score": 0, "creation_date": 1448978998, "post_id": 34022030, "comment_id": 55799642, "body": "Yah - but <code>if ( exists $params-&gt;{$p} &amp;&amp; defined $params-&gt;{$p} )</code> will fix that (and, incidental, my own bad code)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 5, "last_activity_date": 1448979978, "last_edit_date": 1448979978, "creation_date": 1448977673, "answer_id": 34022030, "question_id": 34019742, "link": "https://stackoverflow.com/questions/34019742/in-perl-can-i-dynamically-create-variables-within-a-subroutine/34022030#34022030", "title": "In perl, can I dynamically create variables within a subroutine?", "body": "<p>Yes, you can do this in Perl. But it's a terrible idea for all of the reasons explained by Mark Dominus in <a href=\"http://perl.plover.com/varvarname.html\" rel=\"nofollow\">these</a> <a href=\"http://perl.plover.com/varvarname2.html\" rel=\"nofollow\">three</a> <a href=\"http://perl.plover.com/varvarname3.html\" rel=\"nofollow\">articles</a>.</p>\n\n<p>It's a far better idea to store these values in a hash.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $params = { x =&gt; 1, y =&gt; 2};\nmy @params = qw(x y z a b c);\n\nmy %var;\n\nforeach my $p (@params) {\n\n  # You need to take care exactly what you want in this\n  # logical statement. The options are:\n  # 1/ $p exists in the hash\n  #    exists $params-&gt;{$p}\n  # 2/ $p exists in the hash and has a defined value\n  #    defined $params-&gt;{$p}\n  # 3/ $p exists in the hash and has a true value\n  #    $params-&gt;{$p}\n  # I think the first option is most likely. The last one has\n  # good chance of introducing subtle bugs.\n\n  if ( exists $params-&gt;{$p} ) {\n    $var{$p} = $params-&gt;{$p};\n  }\n}\n\nprint join ', ', map { \"$_: \" . ($var{$_} // 'undef') } @params;\nprint \"\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 587, "user_id": 2245633, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/SLpQK.gif?s=128&g=1", "display_name": "CodeGorilla", "link": "https://stackoverflow.com/users/2245633/codegorilla"}, "is_accepted": false, "score": 1, "last_activity_date": 1448980839, "creation_date": 1448980839, "answer_id": 34023028, "question_id": 34019742, "link": "https://stackoverflow.com/questions/34019742/in-perl-can-i-dynamically-create-variables-within-a-subroutine/34023028#34023028", "title": "In perl, can I dynamically create variables within a subroutine?", "body": "<p>With thanks to Dave Cross &amp; others - the following test works:</p>\n\n<pre><code>#!/usr/bin/perl \nuse strict;\nuse warnings;\nuse English qw( -no_match_vars ) ;\nuse Carp;\nuse Data::Dumper;\n\nmy $params = { x =&gt; 1, y =&gt; 2, z =&gt; 0};\nmy @params = qw(x y z a b c);\n\nmy %var;\n\nforeach my $p (@params) {\n  if ( exists $params-&gt;{$p} ) {\n    $var{$p} = $params-&gt;{$p};\n  } else {\n    $var{$p} = undef;\n  }\n}\n\nprint Dumper \\%var;\n</code></pre>\n\n<p>This gives me <code>%var</code> with all desired parameters (as listed in <code>@params</code>, with the ones that are not passed in (ie, not in the <code>$params</code> hashref) created with an <code>undef</code> value.</p>\n\n<p>Thus I can confidently test for <em>value</em> and <em>truth</em>, without worrying about <em>existence</em>.</p>\n\n<p>Thank you all.</p>\n"}, {"comments": [{"owner": {"reputation": 2324, "user_id": 6144626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w5zgz.jpg?s=128&g=1", "display_name": "Ari Cooper-Davis", "link": "https://stackoverflow.com/users/6144626/ari-cooper-davis"}, "edited": false, "score": 0, "creation_date": 1495288719, "post_id": 44086549, "comment_id": 75195567, "body": "<a href=\"https://meta.stackoverflow.com/questions/300837/what-comment-should-i-add-to-code-only-answers\">If you add some comments to this, why it works, and what doesn&#39;t work in the original you can make this answer much better.</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 7166175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b342d912a8d46ebb09c52c4416038e?s=128&d=identicon&r=PG", "display_name": "Ruud H.G. van Tol", "link": "https://stackoverflow.com/users/7166175/ruud-h-g-van-tol"}, "is_accepted": false, "score": 0, "last_activity_date": 1495287422, "creation_date": 1495287422, "answer_id": 44086549, "question_id": 34019742, "link": "https://stackoverflow.com/questions/34019742/in-perl-can-i-dynamically-create-variables-within-a-subroutine/44086549#44086549", "title": "In perl, can I dynamically create variables within a subroutine?", "body": "<pre><code>perl -Mstrict -MData::Dumper -wE'\n  {package Data::Dumper;our($Indent,$Sortkeys,$Terse,$Useqq)=(1)x4}\n  my @aok = qw( x  y  z  a  b  c );\n  my %dft = ( a =&gt; -1 );\n  say \"- - - -\";\n  my $arg = { x =&gt; 1, y =&gt; 2, foo =&gt; 42 };\n  $arg = { %dft, %$arg };\n  say \"arg: \", Dumper($arg);\n\n  my %var;                     \n  @var{ @aok } = @$arg{ @aok };\n  say \"var: \", Dumper(\\%var);\n\n  my %aok = map { $_ =&gt; 1 } @aok;\n  my @huh = grep !$aok{$_}, sort keys %$arg;\n  @huh and say \"huh: \", Dumper(\\@huh);\n'\n- - - -\narg: {\n  \"a\" =&gt; -1,\n  \"foo\" =&gt; 42,\n  \"x\" =&gt; 1,\n  \"y\" =&gt; 2\n}\n\nvar: {\n  \"a\" =&gt; -1,\n  \"b\" =&gt; undef,\n  \"c\" =&gt; undef,\n  \"x\" =&gt; 1,\n  \"y\" =&gt; 2,\n  \"z\" =&gt; undef\n}\n\nhuh: [\n  \"foo\"\n]\n</code></pre>\n"}], "owner": {"reputation": 587, "user_id": 2245633, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/SLpQK.gif?s=128&g=1", "display_name": "CodeGorilla", "link": "https://stackoverflow.com/users/2245633/codegorilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 641, "favorite_count": 0, "accepted_answer_id": 34022030, "answer_count": 5, "score": 1, "last_activity_date": 1495287422, "creation_date": 1448970624, "question_id": 34019742, "link": "https://stackoverflow.com/questions/34019742/in-perl-can-i-dynamically-create-variables-within-a-subroutine", "title": "In perl, can I dynamically create variables within a subroutine?", "body": "<h1>Background</h1>\n\n<p>In the code I'm writing, I'm passing data into methods using a hash-ref (see note [1]).</p>\n\n<p>This, unfortunately, leads to a lot of repetitive code:</p>\n\n<pre><code>sub thing {\n  my ($self, $params) = @_;\n\n  my ($foo, $bar, $baz, $biff,);\n  if ( exists $params-&gt;{foo} &amp;&amp; $params-&gt;{foo} ) {\n     $foo = $params-&gt;{foo};\n  }\n  # repeat for `bar`, `baz`, `biff`\n\n  ## rest of function ##\n}\n</code></pre>\n\n<p>(and duplicate in every function with parameters)</p>\n\n<h1>What I want to do</h1>\n\n<p>What would be far easier is to define a list of parameters, and then\niterate of that list, creating both the variables and setting them to a value if needed.</p>\n\n<p>So to test this, I tried:</p>\n\n<pre><code>my $params = { x =&gt; 1, y =&gt; 2};\nmy @params = qw(x y z a b c);\n\ngno strict 'refs';\nrep( ${$_}, @params );\nuse strict 'refs';\n\nforeach my $p (@params) {\n  if ( exists $params-&gt;{$p} &amp;&amp; $params-&gt;{$p} ) {\n    ${$p} = $params-&gt;{$p};\n  }\n}\nprint \"x:$x, y:$y, z:$z, a:$a, b:$b, c:$c\\n\"\n</code></pre>\n\n<p>which gives me the following error:</p>\n\n<pre><code>Global symbol \"$x\" requires explicit package name at ./test.pl line 20.\nGlobal symbol \"$y\" requires explicit package name at ./test.pl line 20.\nGlobal symbol \"$z\" requires explicit package name at ./test.pl line 20.\nGlobal symbol \"$c\" requires explicit package name at ./test.pl line 20.\n</code></pre>\n\n<p>Can I do this dynamic variable creation thing?  (and if so, how?)</p>\n\n<hr>\n\n<p>[1] By using a hash to pass data in, I gain in many ways:</p>\n\n<ol>\n<li>There is a clear indication of What each item of data is </li>\n<li>The ORDER of the pieces of data is no longer important</li>\n<li>I can miss one or more pieces of data, and I don't need to add in random <code>undef</code> values</li>\n<li>I'm passing less data: 1 scalar (a reference) rather than multiple scalars</li>\n<li>(I accept the danger of functions being able to change the parent's data, rather that mucking around with a copy of it...)</li>\n</ol>\n"}, {"tags": ["regex", "perl", "string-substitution"], "answers": [{"comments": [{"owner": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "edited": false, "score": 0, "creation_date": 1448969779, "post_id": 34019453, "comment_id": 55793913, "body": "this works very well. Thank a lot.  I knew look..... will do the trick only I had no experience with it. Until now :)"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1448969846, "post_id": 34019453, "comment_id": 55793968, "body": "Yes, seems better than <code>s&#47;(?&lt;!^)(?=;)&#47;\\\\N&#47;g;</code>. \ud83d\udc4d"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1448969963, "post_id": 34019453, "comment_id": 55794032, "body": "@stribizhev: sometimes we need to resist to the madness of assertions."}], "tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": true, "score": 3, "last_activity_date": 1448969814, "last_edit_date": 1448969814, "creation_date": 1448969738, "answer_id": 34019453, "question_id": 34019377, "link": "https://stackoverflow.com/questions/34019377/perl-regexp-substitution-multiple-matches/34019453#34019453", "title": "Perl regexp substitution - multiple matches", "body": "<p>Since you can't match twice the same character you approach doesn't work. To solve the problem you can only check the presence of a following ; with a lookahead (the second ; isn't a part of the match) :</p>\n\n<pre><code>s/;(?=;)/;\\\\N/g\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "edited": false, "score": 0, "creation_date": 1448980652, "post_id": 34020394, "comment_id": 55800798, "body": "nice solution as well, but as I use this for infile edit, the regexp suits me better."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "edited": false, "score": 1, "creation_date": 1448983293, "post_id": 34020394, "comment_id": 55802744, "body": "Do you mean using <code>-i</code> to edit in place? Because you don&#39;t have to use regex to do that at all. Any output will work just fine."}, {"owner": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "edited": false, "score": 0, "creation_date": 1449489087, "post_id": 34020394, "comment_id": 56013391, "body": "yeah , this is what I&#39;m doing, but its part of bigger script. So I&#39;m using S^I switch inside"}, {"owner": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "edited": false, "score": 0, "creation_date": 1449493469, "post_id": 34020394, "comment_id": 56016209, "body": "anyhow you really elaborated nicely on whole thing, I will try your hints for sure :)"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 4, "last_activity_date": 1448985818, "last_edit_date": 1448985818, "creation_date": 1448972687, "answer_id": 34020394, "question_id": 34019377, "link": "https://stackoverflow.com/questions/34019377/perl-regexp-substitution-multiple-matches/34020394#34020394", "title": "Perl regexp substitution - multiple matches", "body": "<p>I wouldn't use a regex for this, and instead make use of <code>split</code>:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy $str = ';;;;;;;;;;;;;'; \n\nprint join ( '\\N', split ( //, $str ) );\n</code></pre>\n\n<p>Splitting on nulls, to get each character, and making use of the fact that join puts delimiters between characters. (So not before first, and not after last).</p>\n\n<p>This gives:</p>\n\n<pre><code> ;\\N;\\N;\\N;\\N;\\N;\\N;\\N;\\N;\\N;\\N;\\N;\\N;\n</code></pre>\n\n<p>Which I think matches your desired output?</p>\n\n<p>As a oneliner, this would be:</p>\n\n<pre><code>perl -ne 'print join ( q{\\N}, split // )'\n</code></pre>\n\n<p>Note - we need single quotes <code>'</code> rather than double around the <code>\\N</code> so it doesn't get interpolated. </p>\n\n<p>If you need to handle variable content (e.g. not just <code>;</code> ) you can add <code>grep</code> or <code>map</code> into the mix - I'd need some sample data to give you a useful answer there though. </p>\n\n<blockquote>\n  <p>I use this for infile edit, the regexp suits me better</p>\n</blockquote>\n\n<p>Following on from that - <code>perl</code> is quite clever. It allows you to do in place editing (if that's what you're referring to) without needing to stick with regular expressions.</p>\n\n<p>Traditionally you might do</p>\n\n<pre><code>perl -i.bak -p -e 's/something/somethingelse/g' somefile\n</code></pre>\n\n<p>What this is doing is expanding out that out into a loop:</p>\n\n<pre><code>LINE: while (defined($_ = &lt;ARGV&gt;)) {\n    s/someting/somethingelse/g;\n}\ncontinue {\n    die \"-p destination: $!\\n\" unless print $_;\n}\n</code></pre>\n\n<p>E.g. what it's <em>actually</em> doing is:</p>\n\n<ul>\n<li>opening the file</li>\n<li>iterating it by lines</li>\n<li>transforming the line</li>\n<li>printing the new line</li>\n</ul>\n\n<p>And with <code>-i</code> that print is redirected to the new file name.</p>\n\n<p>You don't have to restrict yourself to <code>-p</code> though - anything that generates output will work in this way -  although bear in mind if it doesn't 'pass through' any lines that it doesn't modify (as a regular expression transform does) it'll lose data.</p>\n\n<p>But you can definitely do:</p>\n\n<pre><code>perl -i.bak -ne 'print join ( q{\\N}, split // )'\n</code></pre>\n\n<p>And inplace edit - but it'll trip over on lines that <em>aren't</em> just <code>;;;;;</code> as your example. </p>\n\n<p>So to avoid those:</p>\n\n<pre><code>perl -i.bak -ne 'if (m/;;;;/) { print join ( q{\\N}, split // ) } else { print }'\n</code></pre>\n\n<p>Or perhaps more succinctly:</p>\n\n<pre><code>perl -i.bak -pe '$_ = join ( q{\\N}, split // ) if m/;;;/'\n</code></pre>\n"}], "owner": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 34019453, "answer_count": 2, "score": 0, "last_activity_date": 1448985818, "creation_date": 1448969522, "question_id": 34019377, "link": "https://stackoverflow.com/questions/34019377/perl-regexp-substitution-multiple-matches", "title": "Perl regexp substitution - multiple matches", "body": "<p>Friends,</p>\n\n<p>need some help with substitution regex.\nI have a string</p>\n\n<pre><code>;;;;;;;;;;;;;\n</code></pre>\n\n<p>and I need to replace it by</p>\n\n<pre><code>;\\N;\\N;\\N;\\N;\\N;\\N;\\N;\\N;\\N;\\N;\\N;\\N;\n</code></pre>\n\n<p>I tried </p>\n\n<pre><code>s/;;/;\\\\N/;/g\n</code></pre>\n\n<p>but it gives me</p>\n\n<pre><code>;\\N;;\\N;;\\N;;\\N;;\\N;;\\N;;\n</code></pre>\n\n<p>tried to fiddle with lookahead and lookbehind, but can't get it solved.</p>\n"}, {"tags": ["xml", "perl", "validation", "email", "sax"], "comments": [{"owner": {"reputation": 4965, "user_id": 4806927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UoVTT.jpg?s=128&g=1", "display_name": "il_raffa", "link": "https://stackoverflow.com/users/4806927/il-raffa"}, "edited": false, "score": 3, "creation_date": 1448963774, "post_id": 34017316, "comment_id": 55790157, "body": "<i>I have tried several unsuccessful attempts</i> Could you please, post (at least) one of them?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1448964151, "post_id": 34017316, "comment_id": 55790383, "body": "Also, if you&#39;re already familiar with <a href=\"http://p3rl.org/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a>, using <a href=\"http://p3rl.org/XML::LibXML::Reader\" rel=\"nofollow noreferrer\">XML::LibXML::Reader</a> might be easier than turning to SAX."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448964780, "post_id": 34017316, "comment_id": 55790815, "body": "Does it have to be <code>SAX</code>, because for stream-based parsing I like <code>XML::Twig</code> and <code>twig_handlers</code> instead."}, {"owner": {"reputation": 13, "user_id": 5624685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C90Bm.jpg?s=128&g=1", "display_name": "MSalman", "link": "https://stackoverflow.com/users/5624685/msalman"}, "reply_to_user": {"reputation": 4965, "user_id": 4806927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UoVTT.jpg?s=128&g=1", "display_name": "il_raffa", "link": "https://stackoverflow.com/users/4806927/il-raffa"}, "edited": false, "score": 0, "creation_date": 1448965338, "post_id": 34017316, "comment_id": 55791174, "body": "Thanks for your response - @il_raffa included (in the question)."}, {"owner": {"reputation": 13, "user_id": 5624685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C90Bm.jpg?s=128&g=1", "display_name": "MSalman", "link": "https://stackoverflow.com/users/5624685/msalman"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1448965393, "post_id": 34017316, "comment_id": 55791203, "body": "@choroba - it has to be SAX (set-condition by the sysadmin)."}, {"owner": {"reputation": 13, "user_id": 5624685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C90Bm.jpg?s=128&g=1", "display_name": "MSalman", "link": "https://stackoverflow.com/users/5624685/msalman"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448965489, "post_id": 34017316, "comment_id": 55791258, "body": "@Sobrique Unfortunately Yes (condition forwarded by the sysadmin). However, if you can provide a working example under Twig - it will also be helpful."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1448965612, "post_id": 34017316, "comment_id": 55791346, "body": "Also, you haven&#39;t published your clients&#39; emails here, right?"}, {"owner": {"reputation": 13, "user_id": 5624685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C90Bm.jpg?s=128&g=1", "display_name": "MSalman", "link": "https://stackoverflow.com/users/5624685/msalman"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1448965734, "post_id": 34017316, "comment_id": 55791407, "body": "@choroba - well yes - (those are non-existent accounts) - thanks for headlining that anyway."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5624685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C90Bm.jpg?s=128&g=1", "display_name": "MSalman", "link": "https://stackoverflow.com/users/5624685/msalman"}, "edited": false, "score": 0, "creation_date": 1449243463, "post_id": 34018530, "comment_id": 55936084, "body": "Thanks for providing a working example - and it did help but unfortunately the XML file which we have is extremely large (20 to 30 gigs) and therefore we are forced to use a Stream-Based Parser (for e.g SAX) in order to avoid halting our servers where all those files resides. However, I did take up that script and enhanced it further to leverage my understanding of twig."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 13, "user_id": 5624685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C90Bm.jpg?s=128&g=1", "display_name": "MSalman", "link": "https://stackoverflow.com/users/5624685/msalman"}, "edited": false, "score": 0, "creation_date": 1449244680, "post_id": 34018530, "comment_id": 55936956, "body": "This is a stream based parser. <code>XML:Twig</code>. That&#39;s what that <code>purge</code> is doing - emptying the XML we have already parsed from memory. (It does keep &#39;unfinished&#39; tags still)"}, {"owner": {"reputation": 13, "user_id": 5624685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C90Bm.jpg?s=128&g=1", "display_name": "MSalman", "link": "https://stackoverflow.com/users/5624685/msalman"}, "edited": false, "score": 0, "creation_date": 1449248365, "post_id": 34018530, "comment_id": 55939421, "body": "XML::Twig which is a more &#39;Perl-like&#39; API - does not exactly do things as Stream-based parser does (we don&#39;t want a full tree instead just a portion of it to work on) but twigs do keep the path of their predecessor nodes and the memory efficiency is also not upto the mark (which is the core requirement of the situation). However, pudge is beneficial but as you already said that (It does keep &#39;unfinished&#39; tags). Thanks for your concern (and I may need your guidance, since I&#39;m working on this twig thing as a side-task)."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 13, "user_id": 5624685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C90Bm.jpg?s=128&g=1", "display_name": "MSalman", "link": "https://stackoverflow.com/users/5624685/msalman"}, "edited": false, "score": 0, "creation_date": 1449249671, "post_id": 34018530, "comment_id": 55940141, "body": "You may find <code>twig_roots</code> relevant to your needs too then. &quot;The twig_roots mode builds only the required sub-trees from the document Anything outside of the twig roots will just be ignored:&quot;"}, {"owner": {"reputation": 13, "user_id": 5624685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C90Bm.jpg?s=128&g=1", "display_name": "MSalman", "link": "https://stackoverflow.com/users/5624685/msalman"}, "edited": false, "score": 0, "creation_date": 1449249775, "post_id": 34018530, "comment_id": 55940194, "body": "I have changed the question which has been marked &quot;duplicate&quot; by yourself and would like to request you to give it a look now. For twig_roots (will definitely check it out) - thanks."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 13, "user_id": 5624685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C90Bm.jpg?s=128&g=1", "display_name": "MSalman", "link": "https://stackoverflow.com/users/5624685/msalman"}, "edited": false, "score": 0, "creation_date": 1449250539, "post_id": 34018530, "comment_id": 55940628, "body": "Question has been reopened as a result. Given a go at offering an answer too."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1448966985, "creation_date": 1448966985, "answer_id": 34018530, "question_id": 34017316, "link": "https://stackoverflow.com/questions/34017316/parsing-xml-in-perl-using-sax/34018530#34018530", "title": "Parsing XML in Perl using SAX", "body": "<p>Well, with <code>XML::Twig</code> I'd approach it something like this:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse XML::Twig; \nuse Time::Piece; \n\nsub process_account {\n    my ( $twig, $account ) = @_;\n    print $account -&gt; first_child_text('Id'),\"\\n\";\n    if ( $account -&gt; first_child_text('Id') =~ m/^\\w{5,10}$/ ) { \n        print \"Id OK\\n\";\n    }\n\n    my $logindate = join ( \"-\", map { $account -&gt; first_child('LastLoginDate')-&gt;att($_) // 0 } qw ( year month day-of-month ) );\n\n    my $createdate = join ( \"-\", map { $account -&gt; first_child('CreationDate')-&gt;att($_) // 0 } qw ( year month day-of-month ) );\n    if ( eval{ Time::Piece -&gt; strptime ( $logindate, \"%Y-%m-%d\" )} &gt; eval{Time::Piece -&gt; strptime ( $createdate, \"%Y-%m-%d\" )} ) {\n         print \"Create Date OK\\n\"; \n    }\n\n    if (    $account -&gt; first_child_text('SubscriptionMonthlyFee') eq '0'\n        and $account -&gt; first_child_text('SubscriptionType') eq 'free' ) {\n       print \"Subscription Type fee OK\\n\"; \n\n    }\n    $twig -&gt; purge; #empty data processed so far. \n}\n\nmy $twig = XML::Twig -&gt; new ( twig_handlers =&gt; { 'Account' =&gt; \\&amp;process_account } );\n   $twig -&gt; parsefile ( 'your_xml_file'); \n</code></pre>\n\n<p>We set a handler on <code>Account</code> elements, which gets passed each as we go. We extract fields from the record, and validate them (this just prints, you should perhaps invert the logic and abort/warn etc.). </p>\n\n<p>We also use <code>purge</code> because one of the major reasons to use a <code>SAX</code> style parser is memory footprint. </p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 5624685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C90Bm.jpg?s=128&g=1", "display_name": "MSalman", "link": "https://stackoverflow.com/users/5624685/msalman"}, "edited": false, "score": 0, "creation_date": 1449243763, "post_id": 34018722, "comment_id": 55936320, "body": "Thanks choroba for providing a neat LibXML approach for doing the stuff which I had asked for - but unfortunately, the XML files which we have are extremely big (20 to 30 gigs each) and we may have to run the validation script simultaneously on all of them - which somehow has forced us to use a Stream-based Parser (for eg. SAX) in order to avoid halting our servers where all those files resides."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 13, "user_id": 5624685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C90Bm.jpg?s=128&g=1", "display_name": "MSalman", "link": "https://stackoverflow.com/users/5624685/msalman"}, "edited": false, "score": 0, "creation_date": 1449243912, "post_id": 34018722, "comment_id": 55936417, "body": "@MSalman: That&#39;s the point. <a href=\"http://p3rl.org/XML::LibXML::Reader\" rel=\"nofollow noreferrer\">XML::LibXML::Reader</a> is stream based."}, {"owner": {"reputation": 13, "user_id": 5624685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C90Bm.jpg?s=128&g=1", "display_name": "MSalman", "link": "https://stackoverflow.com/users/5624685/msalman"}, "edited": false, "score": 0, "creation_date": 1449244360, "post_id": 34018722, "comment_id": 55936745, "body": "That&#39;s what I also told to my SysTeam - but they don&#39;t consider it as a reliable option and had set a condition to only go with SAX."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1449044472, "last_edit_date": 1449044472, "creation_date": 1448967603, "answer_id": 34018722, "question_id": 34017316, "link": "https://stackoverflow.com/questions/34017316/parsing-xml-in-perl-using-sax/34018722#34018722", "title": "Parsing XML in Perl using SAX", "body": "<p><a href=\"http://p3rl.org/XML::LibXML::Reader\" rel=\"nofollow\">XML::LibXML::Reader</a> provides a SAX-like interface, but you can inflate the element into a full <a href=\"http://p3rl.org/XML::LibXML\" rel=\"nofollow\">XML::LibXML</a> object when needed. The first two conditions would be tested as follows:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse XML::LibXML::Reader;\n\nmy $r = 'XML::LibXML::Reader'-&gt;new(location =&gt; 'file.xml') or die;\nwhile ($r-&gt;nextElement('Account')) {\n    my $xml = $r-&gt;copyCurrentNode(1);\n\n    my $id = $xml-&gt;findvalue('Id');\n    if ($id !~ /^[[:alnum:]]+$/ || 5 &gt; length $id || 10 &lt; length $id) {\n        print \"Invalid Id: $id.\\n\";\n        next\n    }\n\n    my @dates = map $xml-&gt;findnodes($_), qw( CreationDate LastLoginDate );\n    my @date_strings = map sprintf('%4d%02d%02d%02d%02d',\n                                   @$_{qw{ year month day-of-month hour-of-day minute }}),\n                           @dates;\n    if ($date_strings[0] gt $date_strings[1]) {\n        print \"Invalid dates for $id: @date_strings.\\n\";\n    }\n\n    ...\n}\n</code></pre>\n\n<p>Note that <code>LastLoginDate</code> for \"robynsa\" is empty, so it can't be compared to <code>CreationDate</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 5624685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C90Bm.jpg?s=128&g=1", "display_name": "MSalman", "link": "https://stackoverflow.com/users/5624685/msalman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1449253822, "creation_date": 1448963390, "last_edit_date": 1449253822, "question_id": 34017316, "link": "https://stackoverflow.com/questions/34017316/parsing-xml-in-perl-using-sax", "title": "Parsing XML in Perl using SAX", "body": "<p>I need to parse an XML file into Perl using SAX - for performing the following email validation checks.</p>\n\n<ul>\n<li>If the 'Id' contains only alphanumeric characters and its length is between 5 and 10</li>\n<li>If the 'LastLoginDate' is not older than 'CreationDate'</li>\n<li>If 'SubscriptionMontlyFee' = 0 &amp;&amp; 'SubscriptionType'!= free</li>\n<li>If 'PaymentMode' is undefined &amp;&amp; 'SubscriptionType'!= free </li>\n<li>If Provision &lt; 0</li>\n<li>Internal Mail exists or not</li>\n<li>External Mail exists or not</li>\n<li>If InternalMail = External Mail</li>\n</ul>\n\n<p>Otherwise, return an alert (print a message to notify).</p>\n\n<p>accounts.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;Accounts locale=\"en_US\"&gt;\n  &lt;Account&gt;\n    &lt;Id&gt;abcd&lt;/Id&gt;\n    &lt;OwnerLastName&gt;asd&lt;/OwnerLastName&gt;\n    &lt;OwnerFirstName&gt;zxc&lt;/OwnerFirstName&gt;\n    &lt;Locked&gt;false&lt;/Locked&gt;\n    &lt;Database&gt;mail&lt;/Database&gt;\n    &lt;Customer&gt;mail&lt;/Customer&gt;\n    &lt;CreationDate year=\"2011\" month=\"8\" month-name=\"fevrier\" day-of-month=\"19\" hour-of-day=\"15\" minute=\"23\" day-name=\"dimanche\"/&gt;\n    &lt;LastLoginDate year=\"2015\" month=\"04\" month-name=\"avril\" day-of-month=\"22\" hour-of-day=\"11\" minute=\"13\" day-name=\"macredi\"/&gt;\n    &lt;LoginsCount&gt;10405&lt;/LoginsCount&gt;\n    &lt;Locale&gt;nl&lt;/Locale&gt;\n    &lt;Country&gt;NL&lt;/Country&gt;\n    &lt;SubscriptionType&gt;free&lt;/SubscriptionType&gt;\n    &lt;ActiveSubscriptionType&gt;free&lt;/ActiveSubscriptionType&gt;\n    &lt;SubscriptionExpiration year=\"1980\" month=\"1\" month-name=\"janvier\" day-of-month=\"1\" hour-of-day=\"0\" minute=\"0\" day-name=\"jeudi\"/&gt;\n    &lt;SubscriptionMonthlyFee&gt;0&lt;/SubscriptionMonthlyFee&gt;\n    &lt;PaymentMode&gt;Undefined&lt;/PaymentMode&gt;\n    &lt;Provision&gt;0&lt;/Provision&gt;\n    &lt;InternalMail&gt;asdf@asdf.com&lt;/InternalMail&gt;\n    &lt;ExternalMail&gt;fdsa@zxczxc.com&lt;/ExternalMail&gt;\n    &lt;GroupMemberships&gt;\n      &lt;Group&gt;werkgroep X.Y.Z.&lt;/Group&gt;\n    &lt;/GroupMemberships&gt;\n    &lt;SynchroCount&gt;6&lt;/SynchroCount&gt;\n    &lt;LastSynchroDate year=\"2003\" month=\"12\" month-name=\"decembre\" day-of-month=\"5\" hour-of-day=\"12\" minute=\"48\" day-name=\"mardi\"/&gt;\n    &lt;HasActiveSync&gt;false&lt;/HasActiveSync&gt;\n    &lt;Company/&gt;\n  &lt;/Account&gt;\n  &lt;Account&gt;\n    &lt;Id&gt;mnbv&lt;/Id&gt;\n    &lt;OwnerLastName&gt;cvbb&lt;/OwnerLastName&gt;\n    &lt;OwnerFirstName&gt;bvcc&lt;/OwnerFirstName&gt;\n    &lt;Locked&gt;true&lt;/Locked&gt;\n    &lt;Database&gt;mail&lt;/Database&gt;\n    &lt;Customer&gt;mail&lt;/Customer&gt;\n    &lt;CreationDate year=\"2012\" month=\"10\" month-name=\"octobre\" day-of-month=\"10\" hour-of-day=\"10\" minute=\"18\" day-name=\"jeudi\"/&gt;\n    &lt;LastLoginDate/&gt;\n    &lt;LoginsCount&gt;0&lt;/LoginsCount&gt;\n    &lt;Locale&gt;fr&lt;/Locale&gt;\n    &lt;Country&gt;BE&lt;/Country&gt;\n    &lt;SubscriptionType&gt;free&lt;/SubscriptionType&gt;\n    &lt;ActiveSubscriptionType&gt;free&lt;/ActiveSubscriptionType&gt;\n    &lt;SubscriptionExpiration year=\"1970\" month=\"1\" month-name=\"janvier\" day-of-month=\"1\" hour-of-day=\"1\" minute=\"0\" day-name=\"jeudi\"/&gt;\n    &lt;SubscriptionMonthlyFee&gt;0&lt;/SubscriptionMonthlyFee&gt;\n    &lt;PaymentMode&gt;Undefined&lt;/PaymentMode&gt;\n    &lt;Provision&gt;0&lt;/Provision&gt;\n    &lt;InternalMail/&gt;\n    &lt;ExternalMail&gt;qweqwe@qwe.com&lt;/ExternalMail&gt;\n    &lt;GroupMemberships/&gt;\n    &lt;SynchroCount&gt;0&lt;/SynchroCount&gt;\n    &lt;LastSynchroDate year=\"1970\" month=\"1\" month-name=\"janvier\" day-of-month=\"1\" hour-of-day=\"1\" minute=\"0\" day-name=\"jeudi\"/&gt;\n    &lt;HasActiveSync&gt;false&lt;/HasActiveSync&gt;\n    &lt;Company/&gt;\n  &lt;/Account&gt;\n&lt;/Accounts&gt;\n</code></pre>\n\n<p>I have tried several unsuccessful attempts (follows) - and will highly appreciate your help in this regard.</p>\n\n<p>Attempt for doing the parsing (but unable to retrieve values from the inner-hash).</p>\n\n<pre><code>use warnings;\nuse strict;\nuse XML::SAX;\nmy $parser = XML::SAX::ParserFactory-&gt;parser(Handler =&gt; MySAXHandler-&gt;new);\n$parser-&gt;parse_uri(\"accounts.xml\");\n\npackage MySAXHandler;\nuse base qw(XML::SAX::Base);\n\n  sub start_element {\n    my ($self, $el) = @_;\n\n    my $ElementName = $el-&gt;{Name};\n    my $attr = %{$el-&gt;{Attributes}};\n    my $attr_value = %{$el-&gt;{Attributes}-&gt;{'LocalName'}};\n\n    print my $loginID, \"\\n\";      \n    print $ElementName, \"\\n\";\n    print $attr_value, \"\\n\";\n  }\n</code></pre>\n\n<p>For performing the validation checks.</p>\n\n<pre><code>    print \"Currently looking into \".(scalar @account).\"elements\";\n\n    #Checking If Login only includes Alphanumeric characters and has acceptable length\n    print \"ALERT - ID contains invalid characters\" unless ($login =~ m/[a-zA-Z@.]+$/);\n    # Or print \"ALERT - ID contains invalid characters\" unless ($accountRef-&gt;{\"Login\"} =~ /^[a-zA-Z]$/);\n    print \"ALERT - ID length is greater than 8 characters\" unless (length.$account[0] &gt; 20);\n\n    #print \"Suspicious ALERT - Account Creation and Login time is same\" unless ($account[4] != $account[5]);\n    print \"Suspicious ALERT - Last Login was before the account creation\" unless ($account[5] &gt; $account[4]);\n    print \"Suspicious ALERT - Incorrect Login Counts\" unless ($account[6] &gt; 0 &amp;&amp; $account[5] &gt; $account[4]);\n\n    #Checking if Subscription Type &amp; Active Subscription Type is same - DISCARDED\n    #print \"ALERT - Preferred Subscription &amp; Current Subscription Type is not same\" unless ($account[9] eq $account[10]);\n\n    #Checking if Subscription Fee matches the Subscription Type\n    if( $account[9] eq \"free\" &amp;&amp; account[12] = 0) {\n        #print \"The user subscription is on free subscription and there are no charges\" \n        return 0;\n    } elsif((account[9] eq \"light\" || account[9] eq \"regular\" || account[9] eq \"advanced\") &amp;&amp; account[12] &lt;= 0) {\n        print \"ALERT - The user subscription is\" account[9] \"and he/she is not getting charged\";\n    } else {\n        #print \"The user subscription is \" $account[9] \"and he/she is getting charged\" account[12];\n        return 0;\n    }\n\n    #Checking if the Payment Mode is undefined and the subscription type is not free\n    if($account[9] ne \"free\" &amp;&amp; account[13] eq 'undefined') {print \"ALERT - Payment mode is not being defined and the subscription type is not free\"};\n\n    #Checking if Provision is less than 0\n    print \"ALERT - The user balance is in negative\" unless ($account[14] &gt;= 0 );\n\n    #Checking if Internal Email Exists or not\n    print \"ALERT - The user doesn't have an internal email address\" unless ($account[15] != \"\" );\n\n    #Checking if External Email Exists or not\n    print \"ALERT - The user doesn't have an external email address\" unless ($account[16] != \"\" );\n\n    #Checking if External Email Exists or not\n    print \"ALERT - The user doesn't have an external and internal email addresses are same\" unless ($account[15] ne $account[16]);\n\n    }\n</code></pre>\n"}, {"tags": ["perl", "bugzilla"], "comments": [{"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1448948338, "post_id": 34013312, "comment_id": 55782324, "body": "What is the question? It is telling you that Math::Random::ISAAC module is not installed."}, {"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "edited": false, "score": 1, "creation_date": 1448949918, "post_id": 34013312, "comment_id": 55782886, "body": "If checksetup.pl can find Math::Random::ISAAC and index.cgi can&#39;t, that suggests they aren&#39;t using the same Perl, or the permissions prevent the Apache user from accessing it."}], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 2134762, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1cfc9220edbc19dbae79e42aab4b42df?s=128&d=identicon&r=PG", "display_name": "Silence", "link": "https://stackoverflow.com/users/2134762/silence"}, "is_accepted": false, "score": 0, "last_activity_date": 1449085336, "creation_date": 1449085336, "answer_id": 34051576, "question_id": 34013312, "link": "https://stackoverflow.com/questions/34013312/install-bugzilla-in-shared-server-environment-checksetup-pl-returns-ok-but-web/34051576#34051576", "title": "install bugzilla in shared server environment; checksetup.pl returns OK; but web page returns Can&#39;t locate Math/Random/ISAAC.pm in @INC", "body": "<p>It is possible that you forgot to install the following Perl modules:</p>\n\n<pre><code>libmath-random-isaac-perl \nlibmath-random-isaac-xs-perl\n</code></pre>\n\n<p>To check if all necessary Perl modules are installed.\nI recommend running the following command mentioned in <a href=\"https://bugzilla.readthedocs.org/en/5.0/installing/quick-start.html\" rel=\"nofollow\" title=\"Quick start guide\">Quick start guide - Bugzilla 5.0.1+</a>:</p>\n\n<blockquote>\n  <p>apt-get install apache2 mysql-server libappconfig-perl\n  libdate-calc-perl     libtemplate-perl libmime-perl build-essential\n  libdatetime-timezone-perl libdatetime-perl libemail-sender-perl\n  libemail-mime-perl libemail-mime-modifier-perl libdbi-perl\n  libdbd-mysql-perl libcgi-pm-perl libmath-random-isaac-perl\n  libmath-random-isaac-xs-perl apache2-mpm-prefork libapache2-mod-perl2\n  libapache2-mod-perl2-dev libchart-perl libxml-perl libxml-twig-perl\n  perlmagick libgd-graph-perl libtemplate-plugin-gd-perl\n  libsoap-lite-perl libhtml-scrubber-perl libjson-rpc-perl\n  libdaemon-generic-perl libtheschwartz-perl libtest-taint-perl\n  libauthen-radius-perl libfile-slurp-perl libencode-detect-perl\n  libmodule-build-perl libnet-ldap-perl libauthen-sasl-perl\n  libtemplate-perl-doc libfile-mimeinfo-perl\n  libhtml-formattext-withlinks-perl libgd-dev libmysqlclient-dev\n  lynx-cur graphviz python-sphinx</p>\n</blockquote>\n"}], "owner": {"reputation": 69, "user_id": 2676888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b04ab61541af7d4608ef36da811eb76e?s=128&d=identicon&r=PG&f=1", "display_name": "mdwpilot", "link": "https://stackoverflow.com/users/2676888/mdwpilot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 549, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1449085336, "creation_date": 1448948076, "last_edit_date": 1448948666, "question_id": 34013312, "link": "https://stackoverflow.com/questions/34013312/install-bugzilla-in-shared-server-environment-checksetup-pl-returns-ok-but-web", "title": "install bugzilla in shared server environment; checksetup.pl returns OK; but web page returns Can&#39;t locate Math/Random/ISAAC.pm in @INC", "body": "<p>Output from checksetup.pl:</p>\n\n<pre><code>* This is Bugzilla 5.0.1 on perl 5.10.1\n* Running on Linux 3.12.49-35.ELK6.x86_64 #1 SMP Fri Oct 9 18:26:47 CDT 2015\n\nChecking perl modules...\nChecking for               CGI.pm (v3.51)     ok: found v3.51\nChecking for           Digest-SHA (any)       ok: found v5.47\nChecking for             TimeDate (v2.23)     ok: found v2.24\nChecking for             DateTime (v0.75)     ok: found v1.08\nChecking for    DateTime-TimeZone (v1.64)     ok: found v1.65\nChecking for                  DBI (v1.54)     ok: found v1.631\nChecking for     Template-Toolkit (v2.24)     ok: found v2.25\nChecking for         Email-Sender (v1.300011) ok: found v1.300021\nChecking for           Email-MIME (v1.904)    ok: found v1.936\nChecking for                  URI (v1.55)     ok: found v1.60\nChecking for       List-MoreUtils (v0.32)     ok: found v0.33\nChecking for    Math-Random-ISAAC (v1.0.1)    ok: found v1.004\nChecking for           File-Slurp (v9999.13)  ok: found v9999.19\nChecking for              JSON-XS (v2.01)     ok: found v2.27\n\nChecking available perl DBD modules...\nChecking for               DBD-Pg (v2.7.0)    ok: found v2.17.1\nChecking for            DBD-mysql (v4.001)    ok: found v4.027\nChecking for           DBD-SQLite (v1.29)     ok: found v1.29\nChecking for           DBD-Oracle (v1.19)     not found\n\nThe following Perl modules are optional:\nChecking for                   GD (v1.20)     ok: found v2.45\nChecking for                Chart (v2.4.1)    ok: found v2.4.10\nChecking for          Template-GD (any)       ok: found v1.56\nChecking for           GDTextUtil (any)       ok: found v0.86\nChecking for              GDGraph (any)       ok: found v1.48\nChecking for           MIME-tools (v5.406)    ok: found v5.502\nChecking for          libwww-perl (any)       ok: found v6.05\nChecking for             XML-Twig (any)       ok: found v3.37\nChecking for          PatchReader (v0.9.6)    ok: found v0.9.6\nChecking for            perl-ldap (any)       ok: found v0.60\nChecking for          Authen-SASL (any)       ok: found v2.15\nChecking for         Net-SMTP-SSL (v1.01)     ok: found v1.03\nChecking for           RadiusPerl (any)       ok: found v0.24\nChecking for            SOAP-Lite (v0.712)    ok: found v0.712\nChecking for          XMLRPC-Lite (v0.712)    ok: found v0.712\nChecking for             JSON-RPC (any)       ok: found v1.06\nChecking for           Test-Taint (v1.06)     ok: found v1.06\nChecking for          HTML-Parser (v3.40)     ok: found v3.71\nChecking for        HTML-Scrubber (any)       ok: found v0.15\nChecking for               Encode (v2.21)     ok: found v2.35\nChecking for        Encode-Detect (any)       ok: found v1.01\nChecking for          Email-Reply (any)       ok: found v1.204\nChecking for HTML-FormatText-WithLinks (v0.13)     ok: found v0.15\nChecking for          TheSchwartz (v1.07)     ok: found v1.12\nChecking for       Daemon-Generic (any)       ok: found v0.61\nChecking for             mod_perl (v1.999022) not found\nChecking for     Apache-SizeLimit (v0.96)     not found\nChecking for        File-MimeInfo (any)       ok: found v0.27\nChecking for           IO-stringy (any)       ok: found v2.110\nChecking for      Cache-Memcached (any)       ok: found v1.30\nChecking for  File-Copy-Recursive (any)       ok: found v0.38\nChecking for           File-Which (any)       ok: found v1.09\nWARNING: We could not check the configuration of Apache. This sometimes     \nhappens when you are not running checksetup.pl as root. To see the\nproblem we ran into, run: /usr/bin/apachectl -t -D DUMP_MODULES\n</code></pre>\n\n<p>... snip</p>\n\n<pre><code>To attempt an automatic install of every required and optional module\nwith one command, do:\n\n  /ramdisk/bin/perl install-module.pl --all\n\nReading ./localconfig...\nChecking for            DBD-mysql (v4.001)    ok: found v4.027\nChecking for                MySQL (v5.0.15)   ok: found v5.5.42-37.1-log\n\nRemoving existing compiled templates...\nPrecompiling templates...done.\nFixing file permissions...\n\nNow that you have installed Bugzilla, you should visit the 'Parameters'\npage (linked in the footer of the Administrator account) to ensure it\nis set up as you wish - this includes setting the 'urlbase' option to\nthe correct URL.\nchecksetup.pl complete.\n</code></pre>\n\n<p>Since the setup was completed, I expected the server to work.</p>\n\n<p><strong>index.cgi output:</strong></p>\n\n<p>Software error:</p>\n\n<pre><code>Can't locate Math/Random/ISAAC.pm in @INC (@INC contains: . lib/x86_64-linux-thread-multi lib /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5) at Bugzilla/RNG.pm line 17.\n</code></pre>\n\n<p>I have tried setting a PERL5LIB env variable.<br>\nI would like to add more details but this is all i got.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 3, "creation_date": 1448926726, "post_id": 34009968, "comment_id": 55776129, "body": "<a href=\"https://swtch.com/~rsc/regexp/regexp1.html\" rel=\"nofollow noreferrer\">This article</a> has a nice explanation (source: <a href=\"http://stackoverflow.com/questions/33985708/regular-expression-negative-group#comment-55756822\">this comment</a>)."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1448927379, "post_id": 34009968, "comment_id": 55776349, "body": "Yes - nice article. The <code>perl -E &#39;$x=&quot;a&quot; x 100000; $x =~ &#47;.+x&#47;i&#39; </code> is slow too - and now understand (a bit more) why... ;)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1448934142, "post_id": 34009968, "comment_id": 55778237, "body": "Note that the /i version would be way faster if you reversed the input and the pattern. <code>reverse($x) =~ &#47;x[\\w\\W]+&#47;i</code>"}], "answers": [{"comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 2, "creation_date": 1448929439, "post_id": 34010375, "comment_id": 55776996, "body": "This answer together with the article above makes sense, (altough can&#39;t say that understand fully) especially is strange the <code>perl -Mre=debug -E &#39;$x=&quot;a&quot; x 100000; $x =~ &#47;.+x&#47;i&#39;</code> - but accepting. ;) Thanx."}, {"owner": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1448929962, "post_id": 34010375, "comment_id": 55777116, "body": "The debug output is bizarre, there&#39;s no way understand it until you&#39;ve seen several examples. What&#39;s important to understand is: for <code>&#47;[\\w\\W]+x&#47;</code>, the optimizer is quite smart and realizes there&#39;s no <code>&quot;x&quot;</code> in the string, so there can&#39;t be a possible match, and fails earlier. However, for <code>&#47;[\\w\\W]+x&#47;i</code>, it&#39;s not so smart to test for both upper and lowercase <code>x</code>, so it goes on and tries to match the whole regex."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 3, "creation_date": 1448931666, "post_id": 34010375, "comment_id": 55777567, "body": "@jm666 at position 0, it has to try every number between 1 and 100,000 <code>[\\w\\W]</code> to see if it&#39;s followed by an <code>x</code>. After that fails, at position 1, it has to try every number between 1 and 99,999 <code>[\\w\\W]</code> to see if it&#39;s followed by an <code>x</code>.  After that fails, at position 2 it has to try every number between 1 and 99,998 <code>[\\w\\W]</code> to see if it&#39;s followed by an <code>x</code>, etc.. In the end it has to try 100000 * 99999 / 2 = 4,999,950,000 possibilities before deciding that a match is impossible. Five billion checks takes a little while."}, {"owner": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 1, "creation_date": 1448954054, "post_id": 34010375, "comment_id": 55784607, "body": "<code>[\\w\\W]</code> in the workaround can be simplified to <code>.+</code> since <code>s</code> flag is on. And from my testing, <code>&#47;.*x&#47;is</code> is optimized to fail fast, so it&#39;s also a possible workaround with slight change to the semantic of the regex (no longer require any character to precede x)."}, {"owner": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "reply_to_user": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1448956392, "post_id": 34010375, "comment_id": 55785766, "body": "@nhahtdh I too get an optimized <code>.*</code>, but a non-optimized <code>.+</code> (the optimizer actually anchors <code>.*</code> to <code>^</code>). Here&#39;s a <b><a href=\"http://rextester.com/QRFZ41489\" rel=\"nofollow noreferrer\">BENCHMARK</a></b>. As I mentioned, I get another optimization for <code>&#47;[\\w\\W]+x&#47;i</code> (probably different version than OP)... About the workaround, indeed it can be simplified. I simply wanted to keep the rest constant (the question was about this behavior, disregarding the regex constructs)."}, {"owner": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1448956875, "post_id": 34010375, "comment_id": 55786028, "body": "I think you might want to mention about the version-specific behavior you encounter with <code>&#47;[\\w\\W]+x&#47;i</code>. I don&#39;t see you mention it anywhere in your answer."}, {"owner": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "reply_to_user": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1448957842, "post_id": 34010375, "comment_id": 55786497, "body": "@nhahtdh You&#39;re right. I sould have clarified that point. Done!"}, {"owner": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1448958400, "post_id": 34010375, "comment_id": 55786798, "body": "By the way, the slow case is reproducible on my end v5.14.4. So I guess upgrading the Perl version is also a valid workaround."}, {"owner": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "reply_to_user": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1448958525, "post_id": 34010375, "comment_id": 55786875, "body": "@nhahtdh Here&#39;s <a href=\"http://rextester.com/UXWQR39244\" rel=\"nofollow noreferrer\">another BENCHMARK</a> comparing the 2 cases from the OP. They had insignificant differences compared to the previous, but there are still huge differences between them (just not a 20sec case as the OP stated)."}, {"owner": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1448959049, "post_id": 34010375, "comment_id": 55787198, "body": "It&#39;s weird that Perl optimizes for <code>[\\w\\W]</code>, but not for <code>.</code> with s flag in v.5.20.2. <code>&#47;.+x&#47;is</code> times out on the benchmark site."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1448959408, "post_id": 34010375, "comment_id": 55787422, "body": "@nhahtdh my perl is <code>5.20.3</code> - added the info to the question."}, {"owner": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "reply_to_user": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1448973464, "post_id": 34010375, "comment_id": 55796045, "body": "@nhahtdh Yes, quite weird. I simply can&#39;t explain the internals to why it doesn&#39;t optimize for <code>.+</code>, nor why we see the difference in performance with <code>[\\w\\W]+x</code> (and I don&#39;t have the tools/time to check if it&#39;s version or  OS/architecture specific). I&#39;ll have to stick to simply describing when the optimizer kicks in. But I&#39;d love to hear it if someone figures it out."}], "tags": [], "owner": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "is_accepted": true, "score": 11, "last_activity_date": 1449054339, "last_edit_date": 1592644375, "creation_date": 1448928450, "answer_id": 34010375, "question_id": 34009968, "link": "https://stackoverflow.com/questions/34009968/why-can-the-regex-w-wx-i-be-extremely-slow-to-run/34010375#34010375", "title": "Why can the regex /[\\w\\W]+x/i be extremely slow to run?", "body": "<h2>TL;DR</h2>\n<p>In the second case, the optimizer is quite smart and realizes there's\nno <code>&quot;x&quot;</code> in the string, so there can't be a possible match, and fails earlier.\nHowever, for the <code>/i</code> case, it's not so smart to test for both\nupper and lowercase <code>x</code>, so it goes on and tries to match the whole regex.</p>\n<hr />\n<h2>Debugging</h2>\n<p>Although I can't reproduce such big differences in performance, there's an optimization that is triggered for the case-sensitive match.</p>\n<p>Let's run it in <code>'debug'</code> mode:</p>\n<h3>Code</h3>\n<pre><code>use re 'debug';\n$x=&quot;a&quot; x 100000;\n$x =~ /[\\w\\W]+x/;\n</code></pre>\n<ul>\n<li>You could also add <code>-Mre=debug</code> to perl invocation.</li>\n</ul>\n<h3>Output</h3>\n<pre><code>Compiling REx &quot;[\\w\\W]+x&quot;\nFinal program:\n   1: PLUS (13)\n   2:   ANYOF[\\x{00}-\\x{7F}][{non-utf8-latin1-all}{unicode_all}] (0)\n  13: EXACT &lt;x&gt; (15)\n  15: END (0)\nfloating &quot;x&quot; at 1..9223372036854775807 (checking floating) stclass ANYOF[\\x{00}-\\x{7F}][{non-utf8-latin1-all}{unicode_all}] plus minlen 2 \nMatching REx &quot;[\\w\\W]+x&quot; against &quot;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;...\nIntuit: trying to determine minimum start position...\n  Did not find floating substr &quot;x&quot;...\nMatch rejected by optimizer\nFreeing REx: &quot;[\\w\\W]+x&quot;\n</code></pre>\n<p>And notice the last part:</p>\n<blockquote>\n<pre><code>Intuit: trying to determine minimum start position...\n  Did not find floating substr &quot;x&quot;...\nMatch rejected by optimizer\n</code></pre>\n</blockquote>\n<p>The optimizer attempts to find the first occurrence of <code>&quot;x&quot;</code> and, since it can't find it, it rejects the match before the regex engine even attempts it.</p>\n<p>Perl regex is optimized to rather fail as early as possible, than to succeed.</p>\n<hr />\n<h3>Slow case</h3>\n<p>I can't reproduce the same behaviour on my end (Perl v5.20.2), it fails on a later optimization, probably because of version-specific differences. However, the optimization for the case-insensitive <code>&quot;x&quot;</code> does not occur in this case.</p>\n<p>This optimization is not triggered because it has more than 1 possibility for a match in the subject (both the lowercase <code>&quot;x&quot;</code> and the uppercase <code>&quot;X&quot;</code>).</p>\n<ul>\n<li>Check <a href=\"https://stackoverflow.com/a/34033225/5290909\">ThisSuitIsBlackNot's answer</a> if you're interested in this optimization internals.</li>\n</ul>\n<p>Now, without the optimization, the regex engine theoretically attempts to match <code>&quot;x&quot;</code> for:</p>\n<ul>\n<li>every possible match in <code>[\\w\\W]+</code> (consuming the whole string, then backtracking 1 char, and another... and so on), and</li>\n<li>every starting position in the subject string (99,999 positions).</li>\n</ul>\n<p>Of course, there are other optimizations that reduce this number, but that's why it's so slow. Notice it increases exponentially with longer strings.</p>\n<h3>Work-around</h3>\n<p>If you don't particularly require there to be at least one character before x, you should use <code>/.*x/is</code>, since it fails after attempting a match in the first position (the optimizer actually anchors <code>.*</code> to the start of text).<br />\n<sub>* Thanks to <a href=\"https://stackoverflow.com/users/1400768/nhahtdh\">@nhahtdh</a> for bringing this up.</sub></p>\n<p>However, for a more general case where this behaviour could arise, one option to increase performance is check for <code>&quot;x&quot;</code> before the rest (either as an independent condition or in the same regex):</p>\n<pre><code>$x =~ /(?:^(*COMMIT)(?=.*x))?[\\w\\W]+x/is;\n</code></pre>\n<ul>\n<li><code>(?:^</code> ... <code>)?</code> Checks only once, if at start of string.</li>\n<li><code>(?=.*x)</code> If there's an <code>x</code> ahead</li>\n<li><code>(*COMMIT)</code> Otherwise, it backtracks and <a href=\"http://perldoc.perl.org/perlre.html#Special-Backtracking-Control-Verbs\" rel=\"nofollow noreferrer\"><code>COMMIT</code></a> is a control verb that makes the entire match to fail.</li>\n</ul>\n<p>This will run much faster.</p>\n"}, {"comments": [{"owner": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "edited": false, "score": 0, "creation_date": 1449033824, "post_id": 34033225, "comment_id": 55826198, "body": "Excellent contribution! It certainly explains the optimizer internals. Notice though there was discussion in the comments, and <b>1.</b> the &quot;<i>difference in performance</i>&quot; was referring to the OP&#39;s results compared to <a href=\"http://rextester.com/UXWQR39244\" rel=\"nofollow noreferrer\">this benchmark</a> running 10 times faster in comparison; and <b>2.</b> we could not identify why <code>&#47;.*x&#47;is</code> is anchored by the compiler, whereas <code>&#47;.+x&#47;is</code> is not (<a href=\"http://rextester.com/HDPQ3019\" rel=\"nofollow noreferrer\">benchmark</a>)"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 3, "last_activity_date": 1449018647, "last_edit_date": 1495541781, "creation_date": 1449018647, "answer_id": 34033225, "question_id": 34009968, "link": "https://stackoverflow.com/questions/34009968/why-can-the-regex-w-wx-i-be-extremely-slow-to-run/34033225#34033225", "title": "Why can the regex /[\\w\\W]+x/i be extremely slow to run?", "body": "<p><a href=\"https://stackoverflow.com/a/34010375/176646\">Mariano is exactly right</a>: the difference in performance is thanks to the optimizer. To find out why the optimizer is triggered in one case but not the other requires a dive into the Perl source code.</p>\n\n<p>A lot of the optimizer code relies on two pieces of data about the pattern: </p>\n\n<ul>\n<li><p>the longest fixed substring, and</p></li>\n<li><p>the longest floating substring</p></li>\n</ul>\n\n<p>This is explained in the comments in regcomp.c in the Perl source:</p>\n\n<blockquote>\n  <p>During optimization we...[get] information about\n      what strings MUST appear in the pattern. We look for the longest\n      string that must appear at a fixed location, and we look for the\n      longest string that may appear at a floating location. So for instance\n      in the pattern:</p>\n  \n  <pre class=\"lang-none prettyprint-override\"><code>/FOO[xX]A.*B[xX]BAR/\n</code></pre>\n  \n  <p>Both 'FOO' and 'A' are fixed strings. Both 'B' and 'BAR' are floating\n      strings (because they follow a .* construct). study_chunk will identify\n      both FOO and BAR as being the longest fixed and floating strings respectively.</p>\n</blockquote>\n\n<p><em>(from Perl 5.22.0)</em></p>\n\n<p>Why does the optimizer use these substrings? Because it's much easier to fail fast when you can do simple string comparisons and length checks instead of running the full regex engine.</p>\n\n<p>So with <code>/.+x/</code> we have:</p>\n\n<ul>\n<li>longest fixed substring: none</li>\n<li>longest floating substring: <code>x</code></li>\n</ul>\n\n<p>And with <code>/.+x/i</code> we have:</p>\n\n<ul>\n<li>longest fixed substring: none</li>\n<li>longest floating substring: none (case folding means we're no longer working with a simple literal string)</li>\n</ul>\n\n<p>Now, when a pattern is compiled that contains a literal string (either fixed or floating), a special flag, <code>RXf_USE_INTUIT</code>, is set in the compiled regex. When the regex is executed, this flag triggers an optimization routine called <code>re_intuit_start()</code>, which lives in regexec.c:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/* re_intuit_start():\n *\n * Based on some optimiser hints, try to find the earliest position in the\n * string where the regex could match.\n *\n * ...\n *\n * The basic idea of re_intuit_start() is to use some known information\n * about the pattern, namely:\n *\n *   a) the longest known anchored substring (i.e. one that's at a\n *      constant offset from the beginning of the pattern; but not\n *      necessarily at a fixed offset from the beginning of the\n *      string);\n *   b) the longest floating substring (i.e. one that's not at a constant\n *      offset from the beginning of the pattern);\n *   c) Whether the pattern is anchored to the string; either\n *      an absolute anchor: /^../, or anchored to \\n: /^.../m,\n *      or anchored to pos(): /\\G/;\n *   d) A start class: a real or synthetic character class which\n *      represents which characters are legal at the start of the pattern;\n *\n * to either quickly reject the match, or to find the earliest position\n * within the string at which the pattern might match, thus avoiding\n * running the full NFA engine at those earlier locations, only to\n * eventually fail and retry further along.\n</code></pre>\n\n<p>With <code>/.+x/</code>, <code>re_intuit_start()</code> is triggered and searches the string being matched for the longest floating substring (<code>x</code>). When it fails to find any <code>x</code>s, the entire match can be rejected immediately.</p>\n\n<p>With <code>/.+x/i</code>, on the other hand, <code>re_intuit_start()</code> is never triggered, so we lose out on our fail-fast optimization. </p>\n"}], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 401, "favorite_count": 3, "accepted_answer_id": 34010375, "answer_count": 2, "score": 10, "last_activity_date": 1449054339, "creation_date": 1448926318, "last_edit_date": 1448960207, "question_id": 34009968, "link": "https://stackoverflow.com/questions/34009968/why-can-the-regex-w-wx-i-be-extremely-slow-to-run", "title": "Why can the regex /[\\w\\W]+x/i be extremely slow to run?", "body": "<p>try:</p>\n\n<pre><code>time perl -E '$x=\"a\" x 100000; $x =~ /[\\w\\W]+x/i'  \n</code></pre>\n\n<p>will run long time (on my notebook 20secs). Without the <code>/i</code>, e.g.</p>\n\n<pre><code>time perl -E '$x=\"a\" x 100000; $x =~ /[\\w\\W]+x/' \n</code></pre>\n\n<p>finishes in 0.07 secs.</p>\n\n<p>Regardless of the regex <code>[\\w\\W]</code> makes not much sense, this enormous difference surprises me.</p>\n\n<p>Why such big difference?</p>\n\n<h2>EDIT</h2>\n\n<p>To be more precise:</p>\n\n<pre><code>$ time perl -E '$x=\"a\" x 100000; $x =~ /[\\w\\W]+x/i'  \n\nreal    0m19.479s\nuser    0m19.419s\nsys 0m0.038s\n</code></pre>\n\n<p>my <code>perl</code></p>\n\n<pre><code>Summary of my perl5 (revision 5 version 20 subversion 3) configuration:\n\n  Platform:\n    osname=darwin, osvers=15.0.0, archname=darwin-2level\n    uname='darwin nox.local 15.0.0 darwin kernel version 15.0.0: sat sep 19 15:53:46 pdt 2015; root:xnu-3247.10.11~1release_x86_64 x86_64 '\n    config_args='-Dprefix=/opt/anyenv/envs/plenv/versions/5.20.3 -de -Dusedevel -A'eval:scriptdir=/opt/anyenv/envs/plenv/versions/5.20.3/bin''\n    hint=recommended, useposix=true, d_sigaction=define\n    useithreads=undef, usemultiplicity=undef\n    use64bitint=define, use64bitall=define, uselongdouble=undef\n    usemymalloc=n, bincompat5005=undef\n  Compiler:\n    cc='cc', ccflags ='-fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector -I/opt/local/include',\n    optimize='-O3',\n    cppflags='-fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector -I/opt/local/include'\n    ccversion='', gccversion='4.2.1 Compatible Apple LLVM 7.0.0 (clang-700.1.76)', gccosandvers=''\n    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678\n    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16\n    ivtype='long', ivsize=8, nvtype='double', nvsize=8, Off_t='off_t', lseeksize=8\n    alignbytes=8, prototype=define\n  Linker and Libraries:\n    ld='env MACOSX_DEPLOYMENT_TARGET=10.3 cc', ldflags =' -fstack-protector -L/opt/local/lib'\n    libpth=/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/7.0.0/lib /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib /usr/lib /opt/local/lib\n    libs=-lpthread -lgdbm -ldbm -ldl -lm -lutil -lc\n    perllibs=-lpthread -ldl -lm -lutil -lc\n    libc=, so=dylib, useshrplib=false, libperl=libperl.a\n    gnulibc_version=''\n  Dynamic Linking:\n    dlsrc=dl_dlopen.xs, dlext=bundle, d_dlsymun=undef, ccdlflags=' '\n    cccdlflags=' ', lddlflags=' -bundle -undefined dynamic_lookup -L/opt/local/lib -fstack-protector'\n\n\nCharacteristics of this binary (from libperl): \n  Compile-time options: HAS_TIMES PERLIO_LAYERS PERL_DONT_CREATE_GVSV\n                        PERL_HASH_FUNC_ONE_AT_A_TIME_HARD PERL_MALLOC_WRAP\n                        PERL_NEW_COPY_ON_WRITE PERL_PRESERVE_IVUV\n                        PERL_USE_DEVEL USE_64_BIT_ALL USE_64_BIT_INT\n                        USE_LARGE_FILES USE_LOCALE USE_LOCALE_COLLATE\n                        USE_LOCALE_CTYPE USE_LOCALE_NUMERIC USE_PERLIO\n                        USE_PERL_ATOF\n  Locally applied patches:\n    Devel::PatchPerl 1.38\n  Built under darwin\n  Compiled at Oct 28 2015 14:46:19\n  @INC:\n    /opt/anyenv/envs/plenv/versions/5.20.3/lib/perl5/site_perl/5.20.3/darwin-2level\n    /opt/anyenv/envs/plenv/versions/5.20.3/lib/perl5/site_perl/5.20.3\n    /opt/anyenv/envs/plenv/versions/5.20.3/lib/perl5/5.20.3/darwin-2level\n    /opt/anyenv/envs/plenv/versions/5.20.3/lib/perl5/5.20.3\n    .\n</code></pre>\n\n<p>And from the background of the question: the real code matches the string against an large list of regexes (sort of antispam), so i can't reliable manually check the regex DB. The real fragment of code is</p>\n\n<pre><code>sub docheck {\n    ...\n    ...\n    foreach my $regex (@$regexs) {\n        if ( $_[0] =~ /$regex/i ) {\n</code></pre>\n\n<p>and the <code>[\\w\\W]+</code> is one of the 10k regexes :(, such: <code>[\\w\\W]+medicine\\.netfirms\\.com</code> - The regex-DB probably needs cleaning - but... you know :)</p>\n\n<p>Now the code is changed:</p>\n\n<pre><code>sub docheck {\n    ...\n    my $str = lc($_[0]);\n    foreach my $regex (@$regexs) {\n        if ( $str =~ /$regex/ ) {\n</code></pre>\n\n<p>so avoiding the <code>/i</code>.</p>\n"}, {"tags": ["perl", "concatenation"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1448920216, "post_id": 34008565, "comment_id": 55773291, "body": "Try to read the list into an array, <code>@files</code>. See <a href=\"http://stackoverflow.com/questions/8963400/the-correct-way-to-read-a-data-file-into-an-array\">The correct way to read a data file into an array</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1448926803, "post_id": 34008565, "comment_id": 55776151, "body": "<b><i>&quot;I know it&#39;s much easier in simple bash&quot;</i></b> That&#39;s only true when &quot;simple bash&quot; is the only language you know well"}, {"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1448958573, "post_id": 34008565, "comment_id": 55786907, "body": "@Borodin Actually you don&#39;t need to &quot;know well&quot; bash scripting: cat `cat file_list` &gt;&gt; new_file is simpler than that perl script"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448969274, "post_id": 34008565, "comment_id": 55793573, "body": "Well, unless you want to deal with edge cases properly, because that example will break on e.g. filenames with spaces."}, {"owner": {"reputation": 551, "user_id": 5621995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2fbc9889325c4e90e235b64ff5fe018b?s=128&d=identicon&r=PG&f=1", "display_name": "AnkP", "link": "https://stackoverflow.com/users/5621995/ankp"}, "edited": false, "score": 0, "creation_date": 1448983510, "post_id": 34008565, "comment_id": 55802879, "body": "yes the command line/bash was easy for quick tasks with limited number of files. Since now the files can be scattered all over directory and and from different sources I need to code it to avoid any possible error"}], "answers": [{"comments": [{"owner": {"reputation": 551, "user_id": 5621995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2fbc9889325c4e90e235b64ff5fe018b?s=128&d=identicon&r=PG&f=1", "display_name": "AnkP", "link": "https://stackoverflow.com/users/5621995/ankp"}, "edited": false, "score": 0, "creation_date": 1448921059, "post_id": 34008746, "comment_id": 55773653, "body": "Thanks a lot for the reply. Yes didn&#39;t know I would have to apply this  script on bunch of large set files and then zip them up in the end. Also, I might have to use this script on zip files too, so I am thinking of using zcat for that. Would it be the recommended way?"}, {"owner": {"reputation": 6592, "user_id": 3005251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5331f7e467aae3d581fe8bc814ef572?s=128&d=identicon&r=PG", "display_name": "bolav", "link": "https://stackoverflow.com/users/3005251/bolav"}, "edited": false, "score": 0, "creation_date": 1448922461, "post_id": 34008746, "comment_id": 55774347, "body": "zcat is for gzipped files. You cannot use zcat on zipped files. <code>Archive::Zip</code> is not for gzipped files. Look at <code>IO::Compress::Gzip</code> and <code>IO::Uncompress::Gunzip</code> for gzip. Look for instance here: <a href=\"http://unix.stackexchange.com/questions/48690/whats-the-difference-between-gunzip-and-unzip\" title=\"whats the difference between gunzip and unzip\">unix.stackexchange.com/questions/48690/&hellip;</a>"}, {"owner": {"reputation": 551, "user_id": 5621995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2fbc9889325c4e90e235b64ff5fe018b?s=128&d=identicon&r=PG&f=1", "display_name": "AnkP", "link": "https://stackoverflow.com/users/5621995/ankp"}, "edited": false, "score": 0, "creation_date": 1448943637, "post_id": 34008746, "comment_id": 55780748, "body": "Sorry its my fault, I am using it for multiple gzipped files which would be in GBs and since these are huge files I need to keep the scape/time used in mind too."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448956397, "post_id": 34008746, "comment_id": 55785769, "body": "Different question that. Worth asking separately - and explaining what you are trying to accomplish."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1448920512, "creation_date": 1448920512, "answer_id": 34008746, "question_id": 34008565, "link": "https://stackoverflow.com/questions/34008565/concatenate-multiple-files-listed-in-a-text-file-using-perl-script/34008746#34008746", "title": "Concatenate multiple files listed in a text file using perl Script", "body": "<p>You don't seem to do anything with a zip file. I can't even begin to guess (<code>Archive::Zip</code> is pretty good though).</p>\n\n<p>For concatenating a bunch of files, you can make use of the <code>ARGV</code> or <code>&lt;&gt;</code> filehandle. </p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nopen ( my $combined, '&gt;', 'combined.fastq') or die $!; \n\nselect $combined; \nprint while &lt;&gt;; \n\nclose $combined; \n</code></pre>\n\n<p>Should do the trick - you open an output file, select it as the default place to print, and then print every line captured in <code>&lt;&gt;</code> - which is all the data in any files specified on the command line, or piped data. </p>\n\n<p>So invoking this script as <code>merge.pl *.txt</code> will take all the text files (in the current directory) and merge them into the combined file. </p>\n\n<p>As you've got an input list - that's as simple as:</p>\n\n<pre><code>open ( my $list_of_files, '&lt;', 'file_list.txt' ) or die;\nchomp ( @ARGV = &lt;$list_of_files&gt;);\nclose ( $list_of_files ); \n</code></pre>\n\n<p>This will accomplish the same result overall. </p>\n"}, {"tags": [], "owner": {"reputation": 551, "user_id": 5621995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2fbc9889325c4e90e235b64ff5fe018b?s=128&d=identicon&r=PG&f=1", "display_name": "AnkP", "link": "https://stackoverflow.com/users/5621995/ankp"}, "is_accepted": false, "score": 0, "last_activity_date": 1449160619, "creation_date": 1449160619, "answer_id": 34071391, "question_id": 34008565, "link": "https://stackoverflow.com/questions/34008565/concatenate-multiple-files-listed-in-a-text-file-using-perl-script/34071391#34071391", "title": "Concatenate multiple files listed in a text file using perl Script", "body": "<p>Thanks a lot for your replies - The script runs well now, being new at perl it sounded difficult one to me. Just posting my code below - </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse File::Slurp;\nuse IO::Compress::Gzip qw(gzip $GzipError);\n\n\nmy @data = read_file('./File_list.txt');\nmy $out = \"./test.txt\";\n\n\nforeach my $data_file (@data)\n\n{\n    chomp($data_file);\n    system(\"cat $data_file &gt;&gt; $out\");\n}\nmy $outzip = \"./test.gz\";\ngzip $out =&gt; $outzip;\n</code></pre>\n"}], "owner": {"reputation": 551, "user_id": 5621995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2fbc9889325c4e90e235b64ff5fe018b?s=128&d=identicon&r=PG&f=1", "display_name": "AnkP", "link": "https://stackoverflow.com/users/5621995/ankp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3952, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449160619, "creation_date": 1448919777, "last_edit_date": 1448943366, "question_id": 34008565, "link": "https://stackoverflow.com/questions/34008565/concatenate-multiple-files-listed-in-a-text-file-using-perl-script", "title": "Concatenate multiple files listed in a text file using perl Script", "body": "<p>I am new at scripting and I am trying to concatenate multiple files, whose paths are listed a text file and output a combined gzip file. \nfor example list file -  File_list.txt contains these file paths </p>\n\n<pre><code>/data/path/file1.txt\ndata2/path2/file2.txt\n....file3.txt\n....file4.txt\n</code></pre>\n\n<p>So far my code is for all files listed in a local directory ( outputs only combined file not gzipped): </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse File::Slurp;\n\nmy $directory = 'Users/xyz/Documents/';\n\nopendir(dir, $directory) or die $!;\nmy @files = readdir(dir);\nclosedir dir;\n\nmy $outfilename = 'Combined.fastq'\n\nmy $outfilesrc = undef;\n\nforeach (sort @files){ \n  $outfilesrc.= File::Slurp::slurp(\"$basedir/$_\");\n}\n\nopen(OUT, \"&gt; $basedir/$outfilename\") or die (\"Can't open for writing: \n  $basedir/$outfilename : $!\");\nprint OUT $outfilesrc;\nclose OUT;\n\nexit;\n</code></pre>\n\n<p>Can someone please share how to read the files using this list rather than one single directory? \nI know it's much easier in simple bash but i am trying to create a module for a pipeline so need this in Perl. \nThanks!</p>\n"}, {"tags": ["regex", "windows", "perl"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1448917606, "post_id": 34007921, "comment_id": 55771921, "body": "Extract the matches into a list, then write a loop that formats the output the way you want it, including the index.  I don&#39;t believe there&#39;s an index reference in RE."}], "answers": [{"tags": [], "owner": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "is_accepted": true, "score": 1, "last_activity_date": 1448919122, "last_edit_date": 1448919122, "creation_date": 1448918379, "answer_id": 34008189, "question_id": 34007921, "link": "https://stackoverflow.com/questions/34007921/how-to-refer-to-the-match-order-in-the-replace-string/34008189#34008189", "title": "How to refer to the match order in the replace string?", "body": "<p>Use the <code>/e</code> modifier to evaluate the replacement. See <a href=\"http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow\">Regexp Quote-Like Operators</a>.</p>\n\n<p>Then you can increase a counter on each replacement.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>my $text = '&lt;\"BOY\"(GUN)&gt;&lt;\"GIRL\"(BAG)&gt;&lt;\"SISTERS\"(CANDY)&gt;&lt;\"JOHN\"(HAT)&gt;';\nmy $counter = 1;\n$text =~ s/&lt;\"([^\"]+)\"\\(([^()]+)\\)&gt;/$counter++.\"\\n$1\\n$2\\n\\n\"/ge;\n\nprint $text;\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>1\nBOY\nGUN\n\n2\nGIRL\nBAG\n\n3\nSISTERS\nCANDY\n\n4\nJOHN\nHAT\n</code></pre>\n"}], "owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 34008189, "answer_count": 1, "score": -2, "last_activity_date": 1448919122, "creation_date": 1448917242, "question_id": 34007921, "link": "https://stackoverflow.com/questions/34007921/how-to-refer-to-the-match-order-in-the-replace-string", "title": "How to refer to the match order in the replace string?", "body": "<p>I'm looking for a way to type the <em>order of match</em> of the being-replaced-string among all other found-strings. For Example, for the 1st matched string, the value should be 1, for the 2nd it's 2 \u2026 for the nth it should be n. The value I'm looking for is the order of the matched string among all other matched strings.</p>\n\n<p><strong>Example for what I'm trying to get</strong></p>\n\n<p>Let's say that I have this original content ...</p>\n\n<pre><code>&lt;\"BOY\"(GUN)&gt;&lt;\"GIRL\"(BAG)&gt;&lt;\"SISTERS\"(CANDY)&gt;&lt;\"JOHN\"(HAT)&gt;\n</code></pre>\n\n<p>... and I want it to be manipulated to be like this ...</p>\n\n<pre><code>1\nBOY\nGUN\n\n2\nGIRL\nBAG\n\n3\nSISTERS\nCANDY\n\n4\nJOHN\nHAT\n</code></pre>\n\n<p>I already know that I need <code>&lt;\"(.*?)\"\\((.*?)\\)&gt;</code> to match each element. For the replace code I think I need something like <code>#MATCH ORDER REFERENCE#\\n\\$1\\n$2\\n</code>.</p>\n\n<p><strong>Note</strong></p>\n\n<ul>\n<li>I'm using Perl on Windows.</li>\n</ul>\n"}, {"tags": ["perl", "configuration", "configuration-files"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1448919151, "post_id": 34007749, "comment_id": 55772679, "body": "<a href=\"https://metacpan.org/pod/AppConfig\" rel=\"nofollow noreferrer\">AppConfig</a> can do this, but the way your question is worded makes it sound like you&#39;re asking people to recommend a module, and is therefore in danger of being flagged as off-topic."}], "answers": [{"comments": [{"owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "edited": false, "score": 0, "creation_date": 1448921058, "post_id": 34008657, "comment_id": 55773652, "body": "trust me, I want to upgrade.  But the problem is that the development system is used by so many that no one is willing to change anything.  the obvious thing would be to move away from that box entirelyl but...not my choice sadly."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "edited": false, "score": 2, "creation_date": 1448921265, "post_id": 34008657, "comment_id": 55773750, "body": "<i>shrug</i>. I can&#39;t make you do it, but you should probably note - you can run multiple versions of perl with perlbrew, or just simply installing a new perl in <code>&#47;usr&#47;local</code> (which is the default location) instead of <code>&#47;usr&#47;bin</code>."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1448920156, "creation_date": 1448920156, "answer_id": 34008657, "question_id": 34007749, "link": "https://stackoverflow.com/questions/34007749/perl-configuration-file-which-contains-variables/34008657#34008657", "title": "perl configuration file which contains variables?", "body": "<p>Have you considered just writing your own perl module that contains config?</p>\n\n<p>Something like (<code>MyConfig.pm</code>):</p>\n\n<pre><code>package MyConfig;\nour $DefaultDirectory = '/path/to/somewhere';\nour $setting_for_something = 5; \n\n1;\n</code></pre>\n\n<p>You can then import that with <code>use MyConfig;</code>. You may need to set <code>use lib</code> or <code>FindBin</code> to find the module first though (depends on where you invoke the script - <code>use</code> will search cwd).</p>\n\n<p>But really - perl <code>5.5</code>? That's .... well worth updating, given that's the version from 2004. I do hope you don't run too much stuff on 10 year old software - the world has changed A LOT in the intervening time. (And so has Perl)</p>\n"}, {"comments": [{"owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "edited": false, "score": 0, "creation_date": 1448983365, "post_id": 34011141, "comment_id": 55802786, "body": "can&#39;t locate method getAll via package config::General::interpolated.  I have clearly not learned perl yet; because I don&#39;t even understand why it is looking at interpolated rather then config::General lol.  but after I fix capitlization this seems to work :)"}, {"owner": {"reputation": 428, "user_id": 2510057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/808e0dc0098ed9a65b8a7f5b0498cb80?s=128&d=identicon&r=PG", "display_name": "George Adams", "link": "https://stackoverflow.com/users/2510057/george-adams"}, "reply_to_user": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "edited": false, "score": 0, "creation_date": 1448992130, "post_id": 34011141, "comment_id": 55808887, "body": "Config::General::Interpolated is a module that is automatically called when you create a new Config::General object and specify the -InterPolateVars flag.  Normally you can&#39;t have variables in your config file like $DefaultDirectory, but the -InterPolateVars flag gives that ability.  See <a href=\"http://search.cpan.org/dist/Config-General/General/Interpolated.pm\" rel=\"nofollow noreferrer\">search.cpan.org/dist/Config-General/General/Interpolated.pm</a>   (and yes, capitalization is important!)"}], "tags": [], "owner": {"reputation": 428, "user_id": 2510057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/808e0dc0098ed9a65b8a7f5b0498cb80?s=128&d=identicon&r=PG", "display_name": "George Adams", "link": "https://stackoverflow.com/users/2510057/george-adams"}, "is_accepted": true, "score": 1, "last_activity_date": 1448992439, "last_edit_date": 1448992439, "creation_date": 1448933659, "answer_id": 34011141, "question_id": 34007749, "link": "https://stackoverflow.com/questions/34007749/perl-configuration-file-which-contains-variables/34011141#34011141", "title": "perl configuration file which contains variables?", "body": "<p>Try <a href=\"http://search.cpan.org/~tlinden/Config-General-2.60/General.pm\" rel=\"nofollow\">Config::General</a>.</p>\n\n<p>test.cfg</p>\n\n<pre><code># Simple variables\nDefaultDirectory = /var/myProgram\nOutputDirectory  = $DefaultDirectory/output\nInputDirectory   = $DefaultDirectory/input\n\n# Blocks of related variables\n&lt;host_dev&gt;\n    host     = devsite.example.com\n    user     = devuser\n    password = ComeOnIn\n&lt;/host_dev&gt;\n\n&lt;host_prod&gt;\n    host     = prodsite.example.com\n    user     = produser\n    password = LockedDown\n&lt;/host_prod&gt;\n</code></pre>\n\n<p>test.pl</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Config::General;\n\nmy $conf = Config::General-&gt;new(\n    -ConfigFile =&gt; 'test.cfg',\n    -InterPolateVars =&gt; 1\n);\n\nmy %config = $conf-&gt;getall;\n\nprint &lt;&lt;HERE;\n    Default directory: $config{'DefaultDirectory'}\n    Output directory: $config{'OutputDirectory'}  \n    Input directory: $config{'InputDirectory'}    \n\n    Development host: $config{'host_dev'}{'host'}\n    Development password: $config{'host_dev'}{'password'}\n\n    Production host: $config{'host_prod'}{'host'}\n    Production password: $config{'host_prod'}{'password'}\nHERE\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Default directory: /var/myProgram\nOutput directory: /var/myProgram/output\nInput directory: /var/myProgram/input\n\nDevelopment host: devsite.example.com\nDevelopment password: ComeOnIn\n\nProduction host: prodsite.example.com\nProduction password: LockedDown\n</code></pre>\n"}], "owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 840, "favorite_count": 0, "accepted_answer_id": 34011141, "answer_count": 2, "score": 0, "last_activity_date": 1448992439, "creation_date": 1448916607, "question_id": 34007749, "link": "https://stackoverflow.com/questions/34007749/perl-configuration-file-which-contains-variables", "title": "perl configuration file which contains variables?", "body": "<p>I want to create a perl configuration file.  I want a file format which has variables.  So something like this:</p>\n\n<pre><code>DefaultDirectory = /var/myProgram/\nOutputDirectory = $DefaultDirectory/output\nInputDirectory = $DefaultDirectory/input\n</code></pre>\n\n<p>This seems simple, but I'm not sure what is available with perl.  The perl ini options I see don't appear to support it. I looked into YAML, but it seems almost overkill.</p>\n\n<p>Can anyone suggest a good file format and CPAN module that supports it which can support simple variables?  I'm stuck with perl 5.5 so hopefully an older module.</p>\n"}, {"tags": ["arrays", "perl", "debugging", "push"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1448914892, "post_id": 34007154, "comment_id": 55770425, "body": "I&#39;d recommend that you <code>use strict; use warnings;</code> at the top of your program."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1448914978, "post_id": 34007154, "comment_id": 55770474, "body": "Yes you need an array not a reference, see <a href=\"http://perldoc.perl.org/functions/push.html\" rel=\"nofollow noreferrer\">perldoc</a>, for example <code>push @{ $domains{$identifier}[0] }, .. ) </code>"}, {"owner": {"reputation": 1, "user_id": 5399200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60abfacf1a65ed8041476fedf61639f2?s=128&d=identicon&r=PG&f=1", "display_name": "user5399200", "link": "https://stackoverflow.com/users/5399200/user5399200"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1448915548, "post_id": 34007154, "comment_id": 55770808, "body": "Yeah, I understand that I need an array not a reference, but I don&#39;t understand your suggested syntax. Do you mean  push(@{$domains{$split_line[0]}[0]}, $split_line[19]) ?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1448915585, "post_id": 34007154, "comment_id": 55770829, "body": "I think there is a better explanation in <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a>"}, {"owner": {"reputation": 1, "user_id": 5399200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60abfacf1a65ed8041476fedf61639f2?s=128&d=identicon&r=PG&f=1", "display_name": "user5399200", "link": "https://stackoverflow.com/users/5399200/user5399200"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1448916051, "post_id": 34007154, "comment_id": 55771082, "body": "Thanks, I think that solved my problem - but I won&#39;t know until I can test the whole thing (turns out I have a second problem - the supposedly machine-readable data that I accept as input is <i>whitespace delimited</i> for some reason, so I need to deal with that before I can test overall functionality)"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1448916287, "creation_date": 1448916287, "answer_id": 34007666, "question_id": 34007154, "link": "https://stackoverflow.com/questions/34007154/perl-using-push-on-an-array-inside-a-hash/34007666#34007666", "title": "perl: using push() on an array inside a hash", "body": "<p><code>$domains{identifier}[0]</code> is not an array.\n<br><code>$domains{identifier}[0]</code> is an array element, a scalar.\n<br><code>$domains{identifier}[0]</code> is a reference to an array.</p>\n\n<p>If it's</p>\n\n<pre><code>@array\n</code></pre>\n\n<p>when you have an array, it's</p>\n\n<pre><code>@{ ... }\n</code></pre>\n\n<p>when you have a reference to an array, so</p>\n\n<pre><code>push(@{ $domains{ $split_line[0] }[0] }, $split_line[19]);\n</code></pre>\n\n<p>References:</p>\n\n<ul>\n<li><a href=\"http://www.perlmonks.org/?node_id=977408\" rel=\"nofollow\">Mini-Tutorial: Dereferencing Syntax</a></li>\n<li><a href=\"http://www.perlmonks.org/?node_id=69927\" rel=\"nofollow\">References quick reference</a></li>\n<li><a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow\">perlref</a></li>\n<li><a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow\">perlreftut</a></li>\n<li><a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow\">perldsc</a></li>\n<li><a href=\"http://perldoc.perl.org/perllol.html\" rel=\"nofollow\">perllol</a></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 5399200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60abfacf1a65ed8041476fedf61639f2?s=128&d=identicon&r=PG&f=1", "display_name": "user5399200", "link": "https://stackoverflow.com/users/5399200/user5399200"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448916287, "creation_date": 1448914453, "question_id": 34007154, "link": "https://stackoverflow.com/questions/34007154/perl-using-push-on-an-array-inside-a-hash", "title": "perl: using push() on an array inside a hash", "body": "<p>Is it possible to use Perl's push() function on an array inside a hash?</p>\n\n<p>Below is what I believe to be the offending part of a larger program that I am working on. </p>\n\n<pre><code>my %domains = ();\nopen (TABLE, \"placeholder.foo\") || die \"cannot read domtblout file\\n\";\nwhile ($line = &lt;TABLE&gt;)\n{\n    if (!($line =~ /^#/))                                                                 \n    {\n            @split_line = split(/\\t/, $line);                                              # splits on tabs - some entries contain whitespace\n        if ($split_line[13] &gt;= $domain_cutoff)\n        {\n            push($domains{$split_line[0]}[0], $split_line[19]);                    # adds \"env from\" coordinate to array\n            push($domains{$split_line[0]}[1], $split_line[20]);                    # adds \"env to\" coordinate to array\n            # %domains is a hash, but $domains{identifier}[0] and $domains{$identifier}[1] are both arrays\n            # this way, all domains from one sequence are stored with the same hash key, but can easily be processed iteratively\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>Later I try to interact with these arrays using</p>\n\n<pre><code>for ($i = 0, $i &lt;= $domains{$identifier}[0], $i++)\n        {\n            $from = $domains{$identifier}[0][$i];\n            $to = $domains{$identifier}[1][$i];\n            $length = ($to - $from);\n            $tmp_seq =~ /.{$from}(.{$length})/;\n            print(\"$header\".\"$1\");\n        }\n</code></pre>\n\n<p>but it appears as if the arrays I created are empty. </p>\n\n<p>If $domains{$identifier}[0] is an array, then why can I not use the push statement to add an element to it?</p>\n"}, {"tags": ["javascript", "regex", "perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1448903864, "post_id": 34004077, "comment_id": 55764095, "body": "Just my opinion, but if the linked question is unclear, it might be better to comment on it asking for clarification and then edit it when you have your answer. It gets A LOT of views (currently at 125,769) and is used to close a lot of duplicates, so it should really be as clear as possible. Having separate questions just to clarify another question seems like information scattering; I think consolidation would be better."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1448903938, "post_id": 34004077, "comment_id": 55764145, "body": "(Note that the author of the accepted answer is currently active and responded to a comment seeking clarification just 10 days ago.)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1448907316, "post_id": 34004077, "comment_id": 55766139, "body": "For Perl (not to be confused with PCRE), the rules for escaping curly braces are changing. Before Perl 5.22.0, you didn&#39;t even have to escape <code>{</code>: <code>perl -e&#39;&#47;foo{&#47;&#39;</code>. 5.22.0 introduced a deprecation warning for this and mentions that &quot;a future version of Perl (tentatively v5.26) will consider this to be a syntax error. If the pattern delimiters are also braces, any matching right brace (<code>}</code>) should also be escaped to avoid confusing the parser, for example, <code>qr{abc\\{def\\}ghi}</code>&quot;."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1448907672, "post_id": 34004077, "comment_id": 55766324, "body": "Re &quot;It looks from the answer for this question that I must not escape <code>]</code> bracket&quot;, That&#39;s not true. You may escape <code>]</code>. You may escape any non-word characters, at least in the ASCII range."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 0, "last_activity_date": 1448903696, "creation_date": 1448903696, "answer_id": 34004196, "question_id": 34004077, "link": "https://stackoverflow.com/questions/34004077/should-i-escape-closing-brackets-characters-in-perl-and-ecmascript-compatible-re/34004196#34004196", "title": "Should I escape closing brackets characters in Perl and ECMAScript-compatible regular expressions flavors", "body": "<p>PCRE is pretty easy to test with pgrep:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>echo 'str[]' | grep -P 'str\\[]'\n</code></pre>\n\n<p>I tested JS in my Chrome browser, I pressed <kbd>F12</kbd> to get to the Console and tried</p>\n\n<pre><code>\"str[]\".match(/str\\[]/)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1448907805, "creation_date": 1448907805, "answer_id": 34005373, "question_id": 34004077, "link": "https://stackoverflow.com/questions/34004077/should-i-escape-closing-brackets-characters-in-perl-and-ecmascript-compatible-re/34005373#34005373", "title": "Should I escape closing brackets characters in Perl and ECMAScript-compatible regular expressions flavors", "body": "<p>Perl:</p>\n\n<pre><code>$ perl -wE'say \"a]b\" =~ /a]b/'\n1\n\n$ perl -wE'say \"a]b\" =~ /a\\]b/'\n1\n\n$ perl -wE'say \"a}b\" =~ /a}b/'\n1\n\n$ perl -wE'say \"a}b\" =~ /a\\}b/'\n1\n\n$ perl -wE'say \"a)b\" =~ /a)b/'\nUnmatched ) in regex; marked by &lt;-- HERE in m/a) &lt;-- HERE / at -e line 1.\n\n$ perl -wE'say \"a)b\" =~ /a\\)b/'\n1\n</code></pre>\n\n<p>So <code>]</code> and <code>}</code> need not be escaped, but may be escaped. <code>)</code> must be escaped.</p>\n\n<p>Note that certain <code>{</code> that didn't need escaping before now need escaping in Perl. The reason for that change doesn't apply to closing braces, though.</p>\n"}], "owner": {"reputation": 17248, "user_id": 1608835, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/941587f86c2f65a08dec808da1e3c1ce?s=128&d=identicon&r=PG", "display_name": "FrozenHeart", "link": "https://stackoverflow.com/users/1608835/frozenheart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1448907805, "creation_date": 1448903349, "last_edit_date": 1495540340, "question_id": 34004077, "link": "https://stackoverflow.com/questions/34004077/should-i-escape-closing-brackets-characters-in-perl-and-ecmascript-compatible-re", "title": "Should I escape closing brackets characters in Perl and ECMAScript-compatible regular expressions flavors", "body": "<p>Should I escape closing brackets characters (that is, <code>]</code>, <code>}</code> and <code>)</code>) in Perl and ECMAScript-compatible regular expressions flavors?</p>\n\n<p>It looks from the answer for <a href=\"https://stackoverflow.com/questions/399078/what-special-characters-must-be-escaped-in-regular-expressions\">this</a> question that I must not escape <code>]</code> bracket but I do must to do this in case of <code>}</code> and <code>)</code> (for PCRE). Of course, I must escape them if I want to use them inside the corresponding regular expressions sequences like <code>(first\\)|second)</code> or <code>[ab\\]]</code> but what about other cases?</p>\n\n<p>For example, should I escape them in the following case?</p>\n\n<p>Regular expression -- <code>str\\[]</code></p>\n\n<p>Input string -- <code>str[]</code></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1448899329, "post_id": 34002691, "comment_id": 55761197, "body": "Yes, there are reasons. They may not apply to you. This question is really too general to be answered here."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1448900801, "post_id": 34002691, "comment_id": 55762119, "body": "If you are dealing with non-object-oriented code, you also have the namespace pollution to think about. If you structure your code into small modules that all each do one specific task, you can reuse them more to the point within each other, and only import the things you need. In addition, it&#39;s easiert to unit-test smaller units. Having one massive .pl file sounds horrible to maintain even if the things are very specific."}, {"owner": {"reputation": 7, "user_id": 3893177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ANj2.png?s=128&g=1", "display_name": "kmantic", "link": "https://stackoverflow.com/users/3893177/kmantic"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1448903259, "post_id": 34002691, "comment_id": 55763720, "body": "@simbabque - I agree. The reasons you&#39;ve stated have been beneficial over the last 2 years of maintaining the code. I guess I was never fully clear on when and why you would create a *.pm file and always wondered if I was using them &quot;correctly&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 1288, "user_id": 470365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec670cb202803f98c8cab1c1d92faac?s=128&d=identicon&r=PG", "display_name": "Alpedar", "link": "https://stackoverflow.com/users/470365/alpedar"}, "is_accepted": false, "score": 2, "last_activity_date": 1448901749, "last_edit_date": 1448901749, "creation_date": 1448900582, "answer_id": 34003188, "question_id": 34002691, "link": "https://stackoverflow.com/questions/34002691/is-there-any-value-in-putting-subroutines-in-a-module-if-they-are-specific-to-yo/34003188#34003188", "title": "Is there any value in putting subroutines in a module if they are specific to your program?", "body": "<p>I'm not familiar with Perl, but to some extent this is similar in every programming language.</p>\n\n<p>I see three reasons to split program into multiple files: productivity, reuse (which is badly-disguised productivity, or at least it should be) and clarity.</p>\n\n<p>You say that you have only program-specific code, so you don't gain any reuse (at least external). My experience is that almost always generic things are already in some library and most of the code is program specific. With the size of the program it gets more important to reuse \"internally\", but only you can know whether you repeat yourself.</p>\n\n<p>Productivity (in a more manual sense) depends on tooling. If you can click on a function call and jump to its definition, even in a different file, or rename it everywhere and most important, prepare a distribution without manually going through all the files, you don't think about having multiple files as an extra chore. If you don't have those things, each extra files bring extra work.</p>\n\n<p>Clarity - If you have everything in one file, it's much easier to create one huge monolith that depends on lot of things and after a while it is hard to change. If you split it into reasonable modules where you can test \"leaf\" modules independently, you will have a much easier time refactoring and changing when requirements change.</p>\n"}], "owner": {"reputation": 7, "user_id": 3893177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ANj2.png?s=128&g=1", "display_name": "kmantic", "link": "https://stackoverflow.com/users/3893177/kmantic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1448906505, "answer_count": 1, "score": 0, "last_activity_date": 1448901749, "creation_date": 1448899071, "last_edit_date": 1448899306, "question_id": 34002691, "link": "https://stackoverflow.com/questions/34002691/is-there-any-value-in-putting-subroutines-in-a-module-if-they-are-specific-to-yo", "closed_reason": "Opinion-based", "title": "Is there any value in putting subroutines in a module if they are specific to your program?", "body": "<p>I started coding in Perl a few years ago. Back then I thought to simplify my code and make it more manageable I would group subroutines together in .pm files. For example, subs related to generating a report would go into \"Report.pm\". </p>\n\n<p>Now I'm looking back on my code and since the vast majority of my subs are program-specific, I'm wondering if there's any valid reasons to do it the way I did? The programs I write are generally ~8K lines of code and my code runs (always) on very powerful servers. Today, the concept of having a main .pl file plus 5 *.pm files just seems like more files to manage and now I'm wondering if I should have just put it all into a single .pl file? </p>\n"}, {"tags": ["linux", "perl", "tar"], "comments": [{"owner": {"reputation": 1864, "user_id": 4581336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b5d7bbd86863406b495a518128005eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4581336/charlie"}, "edited": false, "score": 1, "creation_date": 1448888025, "post_id": 33999030, "comment_id": 55753666, "body": "[SOLVED] &quot;Tar doesnt need &quot;-&quot; for options.&quot;"}], "owner": {"reputation": 1864, "user_id": 4581336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b5d7bbd86863406b495a518128005eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4581336/charlie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2452, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1448887613, "creation_date": 1448887613, "question_id": 33999030, "link": "https://stackoverflow.com/questions/33999030/tar-path-to-destination-jp-file-is-the-archive-not-dumped", "title": "tar: /path/to/destination/jp: file is the archive; not dumped", "body": "<p>I'm developing a simple script to do a simple backup.\nWhen i try to run it this syntax:</p>\n\n<p><code>nameofscript.pl &lt;what_to_backup&gt; &lt;where_to_place_the_backup&gt;</code></p>\n\n<pre><code>backupsystem /var/log /home/osboxes/Desktop\n</code></pre>\n\n<p>i get this error:</p>\n\n<pre><code>tar: /home/osboxes/Desktop/ConteudosServer/backupsystem/jp: file is the archive; not dumped\n</code></pre>\n\n<p>Here is a portion of the code that matters:</p>\n\n<pre><code>else{\n `tar -cfjp $ARGV[1] $ARGV[0]`;\n}\n</code></pre>\n\n<p>The rest of the code is working wonderfull.</p>\n\n<p>PS: the code is deciding if it's a total backup or an incremental backup depending on the day.</p>\n"}, {"tags": ["perl", "debian", "perl-module", "bugzilla", "plasticscm"], "comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 2, "creation_date": 1448880909, "post_id": 33996725, "comment_id": 55749444, "body": "What is that <code>install-module.pl</code> file? Never seen that before. In debian, you would use apt-get, I suspect. E.g. <code>apt-get install libfoo-perl</code>. Or use the cpan utility <code>cpan Email::Sender::Simple</code>. And of course, you&#39;d need to install as the correct user with reference to where your perl program is looking."}, {"owner": {"reputation": 9263, "user_id": 25412, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/168ba2e41eab42cbf86f871df1692851?s=128&d=identicon&r=PG", "display_name": "epeleg", "link": "https://stackoverflow.com/users/25412/epeleg"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1448884473, "post_id": 33996725, "comment_id": 55751538, "body": "I am not a Perl person in any way, the <code>install-module.pl</code> is part of bugzilla. when running bugzillas <code>.&#47;checksetup.pl</code> script  if it finds missing modules it shows command to execute in order to install them. those commands have the form <code>&#47;usr&#47;bin&#47;perl install-module.pl Email::Sender:Simple</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1448908175, "post_id": 33996725, "comment_id": 55766596, "body": "You probably have PERL5LIB set in one environment, but not the other."}], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1448883133, "post_id": 33997135, "comment_id": 55750763, "body": "Note, due to some bugs, some installed modules could not get registered. See <a href=\"http://stackoverflow.com/questions/32679413/cpanm-does-not-register-all-installed-modules-in-perllocal-pod\">cpanm does not register all installed modules in perllocal.pod</a>"}, {"owner": {"reputation": 9263, "user_id": 25412, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/168ba2e41eab42cbf86f871df1692851?s=128&d=identicon&r=PG", "display_name": "epeleg", "link": "https://stackoverflow.com/users/25412/epeleg"}, "edited": false, "score": 0, "creation_date": 1448884551, "post_id": 33997135, "comment_id": 55751595, "body": "trying to run this I get <code>You need to install the perl-doc package to use this program.</code>."}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "reply_to_user": {"reputation": 9263, "user_id": 25412, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/168ba2e41eab42cbf86f871df1692851?s=128&d=identicon&r=PG", "display_name": "epeleg", "link": "https://stackoverflow.com/users/25412/epeleg"}, "edited": false, "score": 0, "creation_date": 1448885907, "post_id": 33997135, "comment_id": 55752398, "body": "@epeleg: <code>apt-get install perl-doc</code>"}, {"owner": {"reputation": 9263, "user_id": 25412, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/168ba2e41eab42cbf86f871df1692851?s=128&d=identicon&r=PG", "display_name": "epeleg", "link": "https://stackoverflow.com/users/25412/epeleg"}, "edited": false, "score": 0, "creation_date": 1448888437, "post_id": 33997135, "comment_id": 55753919, "body": "<code>perldoc -l Email::Sender::Simple</code> returns <code>No documentation found for &quot;Email::Sender::Simple&quot;</code>.  so the Q remains why does install-module.pl thinks its installed... and how can I convince it to uninstall or reinstall..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1448908108, "post_id": 33997135, "comment_id": 55766561, "body": "@H&#229;kon H&#230;gland, <code>perldoc -l</code> doesn&#39;t use perllocal."}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "reply_to_user": {"reputation": 9263, "user_id": 25412, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/168ba2e41eab42cbf86f871df1692851?s=128&d=identicon&r=PG", "display_name": "epeleg", "link": "https://stackoverflow.com/users/25412/epeleg"}, "edited": false, "score": 0, "creation_date": 1448946253, "post_id": 33997135, "comment_id": 55781527, "body": "@epeleg: What is install-module.pl file? You are not very clear with your question. Show us how and where you are using this module and what errors/warnings you are getting. That might be helpful for us and you."}, {"owner": {"reputation": 9263, "user_id": 25412, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/168ba2e41eab42cbf86f871df1692851?s=128&d=identicon&r=PG", "display_name": "epeleg", "link": "https://stackoverflow.com/users/25412/epeleg"}, "edited": false, "score": 0, "creation_date": 1448976412, "post_id": 33997135, "comment_id": 55797979, "body": "I have explained that in one of the comments on the Question. I have now edited the Q to better explain. and also added an update about new things I learned."}], "tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 1, "last_activity_date": 1448881532, "creation_date": 1448881532, "answer_id": 33997135, "question_id": 33996725, "link": "https://stackoverflow.com/questions/33996725/is-this-perl-module-installed-and-where-or-not/33997135#33997135", "title": "Is this Perl module installed (and where) or not?", "body": "<p>You can check module's installation path using this command:</p>\n\n<pre><code>perldoc -l Email::Sender::Simple\n</code></pre>\n\n<p>If it is not install it will give the below output:</p>\n\n<pre><code>No documentation found for \"Email::Sender::Simple\".\n</code></pre>\n\n<p>Else it will give the full path of that module.</p>\n"}], "owner": {"reputation": 9263, "user_id": 25412, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/168ba2e41eab42cbf86f871df1692851?s=128&d=identicon&r=PG", "display_name": "epeleg", "link": "https://stackoverflow.com/users/25412/epeleg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1038, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470276741, "creation_date": 1448880232, "last_edit_date": 1495539971, "question_id": 33996725, "link": "https://stackoverflow.com/questions/33996725/is-this-perl-module-installed-and-where-or-not", "title": "Is this Perl module installed (and where) or not?", "body": "<p>I have recently upgrade bugzilla [on  Debian GNU/Linux 6.0.3 (squeeze)] (to the latest version and although it seems to work, I have an external script for integrating it with PlasticSCM source control which gives out the following error:</p>\n\n<pre><code>Can't locate Email/Sender/Simple.pm in @INC (@INC contains: . /etc/perl /usr/local/lib/perl/5.10.1 /usr/local/share/perl/5.10.1 /usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.10 /usr/share/perl/5.10 /usr/local/lib/site_perl) at Bugzilla/Mailer.pm line 27.\n</code></pre>\n\n<p>The stack trace keeps going all the way up to my custom script. but I think it is not relevant.</p>\n\n<p>Line 27 in Bugzilla/Mailer.pm says:</p>\n\n<pre><code>use Email::Sender::Simple qw(sendmail);\n</code></pre>\n\n<p>And I assumed that the problem was that<br>\nThinking that the issue was that the module Email::Sender::Simple was missing.</p>\n\n<p>Bugzilaa has a script called <code>./checksetup.pl</code> that is used for checking that all the prerequirements are met. When I am trying to run this script it does not indicate anything missing.</p>\n\n<p>However, when it Does find missing libraries it gives instructions to add them using the a command with the structure:</p>\n\n<pre><code> /usr/bin/perl install-module.pl HTML::FormatText::WithLinks\n</code></pre>\n\n<p>So I executed:</p>\n\n<pre><code> /usr/bin/perl install-module.pl Email::Sender:Simple\n</code></pre>\n\n<p>Which said:</p>\n\n<pre><code>Checking for                 CPAN (v1.81)     ok: found v1.9402\nChecking for                 YAML (any)       ok: found v1.15\nChecking for   ExtUtils-MakeMaker (v6.31)     ok: found v7.1\nCPAN: Storable loaded ok (v2.20)\nGoing to read '/MYUSERNAME/.cpan/Metadata'\n  Database was generated on Mon, 30 Nov 2015 07:17:02 GMT\nInstalling Email::Sender:Simple version 1.300021...\nEmail::Sender::Simple is up to date (1.300021).\n</code></pre>\n\n<p>So it looks like it installed the module but running the CGI script again results in exactly the same stack trace.</p>\n\n<p>Also running the <code>install-module.pl</code> script again returns the same result again (as if it has just installed it again...).</p>\n\n<p>How can I tell If this module is installed (and where) or not and what can I do to make my script work?</p>\n\n<p><strong>UPDATE</strong>:\nI think i know where the problem is.<br>\nThe cgi script that I am trying to run has the following line for its first line:</p>\n\n<pre><code>#!/usr/bin/perl -wT\n</code></pre>\n\n<p>from here:\n<a href=\"https://stackoverflow.com/a/2526809/25412\">https://stackoverflow.com/a/2526809/25412</a>\nI understand that the T flag causes <code>.</code> not to be part of @INC (i.e. Perls module search path) so this is why the <code>lib</code> folder that my bugzilla's installation folder (which is also where the cgi is) is not used and the file lib/Email/Sender/Simple.pm that is inside it is being ignored by the CGI.</p>\n\n<p>So <strong>the updated Q</strong> is - should I:<br>\n1. Remove the <code>T</code> from the first line of the cgi? or<br>\n2. Somehow (and how?) install EMAIL::Sender::Simple to some other location that is a part of the @INC ?  </p>\n\n<p>I tend think the answer should be the 2 beacuse I think the T flag is there for some security reasons because <a href=\"http://perldoc.perl.org/perlrun.html#%2A-T%2A\" rel=\"nofollow noreferrer\">this page</a> says :</p>\n\n<blockquote>\n  <p>\"It's a good idea to turn them on explicitly for programs that run on\n  behalf of someone else whom you might not necessarily trust, such as\n  CGI programs or any internet servers you might write in Perl.\"</p>\n</blockquote>\n"}, {"tags": ["bash", "perl", "awk"], "comments": [{"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1448874056, "post_id": 33994424, "comment_id": 55745064, "body": "Show expected output for input"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 1, "creation_date": 1448874439, "post_id": 33994424, "comment_id": 55745293, "body": "Put it in your question formatted."}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1448876055, "post_id": 33994424, "comment_id": 55746347, "body": "I&#39;m assuming that the first number should have changed to 50.00000 ?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448879098, "post_id": 33994424, "comment_id": 55748245, "body": "regular expressions suffer from being unable to &#39;understand&#39; numbers - they&#39;re all about string patterns - even the ones that happen to contain digits."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 2451501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b23e64c907183021f2402a6ab5d17357?s=128&d=identicon&r=PG", "display_name": "user2451501", "link": "https://stackoverflow.com/users/2451501/user2451501"}, "edited": false, "score": 0, "creation_date": 1448873483, "post_id": 33994524, "comment_id": 55744764, "body": "But is is not working for me in loop. The same answer i got using sed . I would like to replace 4 8 12 ...... n increament by 50"}, {"owner": {"reputation": 9362, "user_id": 2885763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/l4VVG.jpg?s=128&g=1", "display_name": "NeronLeVelu", "link": "https://stackoverflow.com/users/2885763/neronlevelu"}, "reply_to_user": {"reputation": 31, "user_id": 2451501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b23e64c907183021f2402a6ab5d17357?s=128&d=identicon&r=PG", "display_name": "user2451501", "link": "https://stackoverflow.com/users/2451501/user2451501"}, "edited": false, "score": 0, "creation_date": 1448873540, "post_id": 33994524, "comment_id": 55744800, "body": "maybe a little sample of expected result will help to understand exact need"}, {"owner": {"reputation": 31, "user_id": 2451501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b23e64c907183021f2402a6ab5d17357?s=128&d=identicon&r=PG", "display_name": "user2451501", "link": "https://stackoverflow.com/users/2451501/user2451501"}, "edited": false, "score": 0, "creation_date": 1448873634, "post_id": 33994524, "comment_id": 55744843, "body": "MODULE     Modulate t=   50.00000  MODULE     Modulate t=   54.00000  MODULE     Modulate t=   58.00000  and so on"}, {"owner": {"reputation": 9362, "user_id": 2885763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/l4VVG.jpg?s=128&g=1", "display_name": "NeronLeVelu", "link": "https://stackoverflow.com/users/2885763/neronlevelu"}, "reply_to_user": {"reputation": 31, "user_id": 2451501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b23e64c907183021f2402a6ab5d17357?s=128&d=identicon&r=PG", "display_name": "user2451501", "link": "https://stackoverflow.com/users/2451501/user2451501"}, "edited": false, "score": 0, "creation_date": 1448875704, "post_id": 33994524, "comment_id": 55746105, "body": "@123 make it simple and efficient"}], "tags": [], "owner": {"reputation": 9362, "user_id": 2885763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/l4VVG.jpg?s=128&g=1", "display_name": "NeronLeVelu", "link": "https://stackoverflow.com/users/2885763/neronlevelu"}, "is_accepted": false, "score": 0, "last_activity_date": 1448873127, "creation_date": 1448873127, "answer_id": 33994524, "question_id": 33994424, "link": "https://stackoverflow.com/questions/33994424/replace-the-assigned-number-in-increasing-order/33994524#33994524", "title": "replace the assigned number in increasing order", "body": "<p><strong>incremental</strong></p>\n\n<pre><code>awk '/t=[[:blank:]]*0.00000/{gsub(/t=[[:blank:]]*0.00000/, \"t= \" (Inc+=50) \".00000\")}1' YourFile &gt; NewFile\n</code></pre>\n\n<p>you can add <code>BEGIN{Inc=-50}</code> as first action if first occurence of t=0 need to still be 0</p>\n\n<p><strong>decal</strong></p>\n\n<pre><code>sed '/\\(t=[[:blank:]]*\\)0\\([.]00000\\)/ s//\\150\\2/' YourFile &gt; NewFile\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "is_accepted": false, "score": 2, "last_activity_date": 1448876004, "last_edit_date": 1448876004, "creation_date": 1448874355, "answer_id": 33994831, "question_id": 33994424, "link": "https://stackoverflow.com/questions/33994424/replace-the-assigned-number-in-increasing-order/33994831#33994831", "title": "replace the assigned number in increasing order", "body": "<p>Using awk</p>\n\n<pre><code>awk 'NF{$NF=sprintf(\"%.5f\",$NF+50)}1' file\n\nMODULE  for the  Modulate t=   50.00000\n\nMODULE  for the  Modulate t=  54.00000\n\nMODULE  overshoot   Modulate t=  58.00000\n\nMODULE   fail for  Modulate t=  62.00000\n\nMODULE   successful for the Modulate t=  66.00000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1448887349, "last_edit_date": 1448887349, "creation_date": 1448878580, "answer_id": 33996139, "question_id": 33994424, "link": "https://stackoverflow.com/questions/33994424/replace-the-assigned-number-in-increasing-order/33996139#33996139", "title": "replace the assigned number in increasing order", "body": "<p>In a Perl one-line command</p>\n\n<pre><code>perl -pe 's/Modulate\\s+t=\\K\\s*([0-9.]+)/sprintf '%10.5f',$1+50/e' my_file\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>MODULE  for the   Modulate t=  50.00000\nMODULE  for the    Modulate t=  54.00000\nMODULE   overshoot  Modulate t=  58.00000\nMODULE   fail for  Modulate t=  62.00000\nMODULE   successful for the Modulate t=  66.00000\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 2451501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b23e64c907183021f2402a6ab5d17357?s=128&d=identicon&r=PG", "display_name": "user2451501", "link": "https://stackoverflow.com/users/2451501/user2451501"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1448887349, "creation_date": 1448872745, "last_edit_date": 1448876378, "question_id": 33994424, "link": "https://stackoverflow.com/questions/33994424/replace-the-assigned-number-in-increasing-order", "title": "replace the assigned number in increasing order", "body": "<p>I have file containing following format. In the following file I want to replace every <code>t=0.00000</code> with <code>t=0.00000+50</code> like 50.00000 without changing the format of file. my file looks like:</p>\n\n<pre><code>MODULE  for the   Modulate t=   0.00000\n\nMODULE  for the    Modulate t=   4.00000\n\nMODULE   overshoot  Modulate t=   8.00000\n\nMODULE   fail for  Modulate t=  12.00000\n\nMODULE   successful for the Modulate t=  16.00000\n</code></pre>\n\n<p>I did something like this but not able to increment and its taking much time manually.  </p>\n\n<pre><code>sed -i 's/MODULE  for the   Modulate t=   0.00000/MODULE  for the   Modulate t=50 /g'  file.txt\n</code></pre>\n\n<p>expected output: </p>\n\n<pre><code>MODULE  for the  Modulate t=   50.00000\n\nMODULE  for the  Modulate t=  54.00000\n\nMODULE  overshoot   Modulate t=  58.00000\n\nMODULE   fail for  Modulate t=  62.00000\n\nMODULE   successful for the Modulate t=  66.00000\n</code></pre>\n"}, {"tags": ["regex", "perl", "unix", "sed", "terminal"], "comments": [{"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1448872568, "post_id": 33994244, "comment_id": 55744313, "body": "Is it possible to tweak the process creating the file to strip newlines from the columns <i>before</i> the file is actually created/weitten?"}, {"owner": {"reputation": 8726, "user_id": 29246, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f16f99fb7a80c71d880a1b92ce3498ad?s=128&d=identicon&r=PG", "display_name": "Mert Nuhoglu", "link": "https://stackoverflow.com/users/29246/mert-nuhoglu"}, "reply_to_user": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1448872828, "post_id": 33994244, "comment_id": 55744429, "body": "Sure, @ray if it works"}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1448873463, "post_id": 33994244, "comment_id": 55744753, "body": "What do you mean &quot;if it works&quot;? It would work if you update the process creating the files. You&#39;d want to remove newline chars from each column in a row before the row gets written to the file by the program."}, {"owner": {"reputation": 8726, "user_id": 29246, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f16f99fb7a80c71d880a1b92ce3498ad?s=128&d=identicon&r=PG", "display_name": "Mert Nuhoglu", "link": "https://stackoverflow.com/users/29246/mert-nuhoglu"}, "reply_to_user": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1448873689, "post_id": 33994244, "comment_id": 55744872, "body": "I just wanted to mean &quot;if it works, it is ok sure&quot;. Please write your answer as code. This will be easier to test."}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1448874558, "post_id": 33994244, "comment_id": 55745365, "body": "Mind posting the code you&#39;ve written so far, meaning the code responsible for creating the files in the first place? That would be a good starting point."}, {"owner": {"reputation": 8726, "user_id": 29246, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f16f99fb7a80c71d880a1b92ce3498ad?s=128&d=identicon&r=PG", "display_name": "Mert Nuhoglu", "link": "https://stackoverflow.com/users/29246/mert-nuhoglu"}, "reply_to_user": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1448875788, "post_id": 33994244, "comment_id": 55746160, "body": "The code responsible for creating the files is not really related to the solution. It uses <code>xlsx2csv</code> tool to convert xlsx files to csv."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1448899560, "post_id": 33994244, "comment_id": 55761320, "body": "Mert - @ray is suggesting you fix this <code>xlsx2csv</code> tool to not include newlines in the first place. Can your CSV file include escaped double quotes inside a cell? If so are they escaped by doubling them <code>&quot;foo&quot;&quot;bar&quot;</code> or puting a backslash in front of them <code>&quot;foo\\&quot;bar&quot;</code>?"}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1448914309, "post_id": 33994244, "comment_id": 55770069, "body": "@EdMorton is correct. That&#39;s what I had in mind. However, I&#39;ve since posted a working solution to this problem, so it&#39;s probably a moot point now."}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1448951648, "post_id": 33994244, "comment_id": 55783548, "body": "@MertNuhoglu: I wrote the answer in code. You should look at it."}], "answers": [{"comments": [{"owner": {"reputation": 8726, "user_id": 29246, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f16f99fb7a80c71d880a1b92ce3498ad?s=128&d=identicon&r=PG", "display_name": "Mert Nuhoglu", "link": "https://stackoverflow.com/users/29246/mert-nuhoglu"}, "edited": false, "score": 0, "creation_date": 1448872897, "post_id": 33994459, "comment_id": 55744469, "body": "I want to automate the process. Therefore I want to use only terminal tools."}, {"owner": {"reputation": 699, "user_id": 1828243, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/9e223a541128b8f612b14d37c9f51bb5?s=128&d=identicon&r=PG", "display_name": "Lefteris Bab", "link": "https://stackoverflow.com/users/1828243/lefteris-bab"}, "reply_to_user": {"reputation": 8726, "user_id": 29246, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f16f99fb7a80c71d880a1b92ce3498ad?s=128&d=identicon&r=PG", "display_name": "Mert Nuhoglu", "link": "https://stackoverflow.com/users/29246/mert-nuhoglu"}, "edited": false, "score": 0, "creation_date": 1448872953, "post_id": 33994459, "comment_id": 55744499, "body": "How you create csv file ? With Java or by hand?"}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1448873542, "post_id": 33994459, "comment_id": 55744802, "body": "@LefterisBab: He wants to automate the process. If the files were being created &quot;by hand&quot; he would presumably be removing the unwanted newline chars manually before saving the files. He also mentioned he wanted to use terminal tools only, so your suggestion to startup Notepad++ or some other non-shell program is not useful."}, {"owner": {"reputation": 699, "user_id": 1828243, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/9e223a541128b8f612b14d37c9f51bb5?s=128&d=identicon&r=PG", "display_name": "Lefteris Bab", "link": "https://stackoverflow.com/users/1828243/lefteris-bab"}, "reply_to_user": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1448873932, "post_id": 33994459, "comment_id": 55744999, "body": "So @ray This is already in stackoverflow.  <a href=\"http://stackoverflow.com/questions/1251999/how-can-i-replace-a-newline-n-using-sed\" title=\"how can i replace a newline n using sed\">stackoverflow.com/questions/1251999/&hellip;</a>"}, {"owner": {"reputation": 8726, "user_id": 29246, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f16f99fb7a80c71d880a1b92ce3498ad?s=128&d=identicon&r=PG", "display_name": "Mert Nuhoglu", "link": "https://stackoverflow.com/users/29246/mert-nuhoglu"}, "edited": false, "score": 0, "creation_date": 1448874131, "post_id": 33994459, "comment_id": 55745099, "body": "No @LefterisBab that solution will replace all newline characters whether it is inside a cell or not."}], "tags": [], "owner": {"reputation": 699, "user_id": 1828243, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/9e223a541128b8f612b14d37c9f51bb5?s=128&d=identicon&r=PG", "display_name": "Lefteris Bab", "link": "https://stackoverflow.com/users/1828243/lefteris-bab"}, "is_accepted": false, "score": -2, "last_activity_date": 1448872861, "creation_date": 1448872861, "answer_id": 33994459, "question_id": 33994244, "link": "https://stackoverflow.com/questions/33994244/how-to-remove-newlines-inside-csv-cells-using-regex-terminal-tools/33994459#33994459", "title": "How to remove newlines inside csv cells using regex/terminal tools?", "body": "<p>Open the *csv file with notepadd++ and then press Ctrl+ H. Go to tab replace and enter to search box the \"newline\" and then write to replace the word you want to replace or let it empty if you want.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 6, "last_activity_date": 1448877325, "last_edit_date": 1448877325, "creation_date": 1448876943, "answer_id": 33995620, "question_id": 33994244, "link": "https://stackoverflow.com/questions/33994244/how-to-remove-newlines-inside-csv-cells-using-regex-terminal-tools/33995620#33995620", "title": "How to remove newlines inside csv cells using regex/terminal tools?", "body": "<p>This is actually a harder problem than it looks, and in my opinion, means that <code>regex</code> isn't the right solution. Because you're dealing with quoting/escaped strings, spanning multiple 'lines' you end up with a complicated and difficult to read <code>regex</code>. (It's not impossible, it's just messy). </p>\n\n<p>I would suggest instead - use a parser. Perl has one in <a href=\"http://search.cpan.org/perldoc/Text::CSV\"><code>Text::CSV</code></a> and it goes a bit like this:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Text::CSV;\n\nmy $csv = Text::CSV-&gt;new( { binary =&gt; 1, eol =&gt; \"\\n\" } );\n\nwhile ( my $row = $csv-&gt;getline( \\*ARGV ) ) {\n    s/\\n/ /g for @$row;\n    $csv-&gt;print( \\*STDOUT, $row );\n}\n</code></pre>\n\n<p>This will take files as piped in/specified on command line - that's what <code>\\*ARGV</code> does - it's a special file handle that lets you do ... basically what <code>sed</code> does:</p>\n\n<pre><code>somecommand.sh | myscript.pl\nmyscript.pl filename_to_process\n</code></pre>\n\n<p>The <code>ARGV</code> filehandle doe either automagically. (You could explicitly open a file or use <code>\\*STDIN</code> if you prefer)</p>\n"}, {"tags": [], "owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "is_accepted": false, "score": 1, "last_activity_date": 1448878741, "last_edit_date": 1448878741, "creation_date": 1448877536, "answer_id": 33995797, "question_id": 33994244, "link": "https://stackoverflow.com/questions/33994244/how-to-remove-newlines-inside-csv-cells-using-regex-terminal-tools/33995797#33995797", "title": "How to remove newlines inside csv cells using regex/terminal tools?", "body": "<blockquote>\n  <p>How to do it with regex or with other terminal tools generically without knowing number of columns in advance?</p>\n</blockquote>\n\n<p>I don't think a regex is the most appropriate approach and might end up being quite complicated. Instead, I think a separate program to process the files might be easier to maintain in the long-term.</p>\n\n<p>Since you're OK with any terminal tools, I've chosen python, and the code's below:</p>\n\n<pre><code>#!/usr/bin/python3 -B\n\nimport csv\nimport sys\n\nwith open(sys.argv[1]) as csvfile:\n    reader = csv.reader(csvfile)\n    for row in reader:\n        stripped = [col.replace('\\n', ' ') for col in row]\n        print(','.join(stripped))\n</code></pre>\n\n<p>I think the code above is very straightforward and easy to understand, without a need for complicated regular expressions.</p>\n\n<p>The input file here has the following contents:</p>\n\n<pre><code>id,name\n01,\"this is\nwith newline\"\n02,no newline\n</code></pre>\n\n<p>To prove it works, its output is reproduced below:</p>\n\n<pre><code>\u279c  ~  ./test.py input.csv\nid,name\n01,this is with newline\n02,no newline\n</code></pre>\n\n<p>You could call the python script from some other program and feed filenames to it. You just need to add a minor update for the python program to write out files, if that's what you really need.</p>\n\n<p>I've replaced the newlines with spaces to avoid a potentially unwanted concatenation (e.g. <code>this iswith newline</code>), but you can replace the newline with whatever you want, including the empty string <code>''</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1448951559, "post_id": 34000000, "comment_id": 55783520, "body": "I think it would&#39;ve been better to ask/confirm this is the tool the OP is using before trying to post this as an answer. It&#39;s difficult to tell if this answer is useful or not."}], "tags": [], "owner": {"reputation": 10579, "user_id": 1046007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c27f58af84eeaad72231f198e7c369?s=128&d=identicon&r=PG", "display_name": "Walter Tross", "link": "https://stackoverflow.com/users/1046007/walter-tross"}, "is_accepted": false, "score": 1, "last_activity_date": 1448902002, "last_edit_date": 1448902002, "creation_date": 1448890822, "answer_id": 34000000, "question_id": 33994244, "link": "https://stackoverflow.com/questions/33994244/how-to-remove-newlines-inside-csv-cells-using-regex-terminal-tools/34000000#34000000", "title": "How to remove newlines inside csv cells using regex/terminal tools?", "body": "<p>If you are using this <a href=\"https://github.com/dilshod/xlsx2csv\" rel=\"nofollow\"><code>xlsx2csv</code></a> tool, it has this option:</p>\n\n<pre><code>-e, --escape          Escape \\r\\n\\t characters\n</code></pre>\n\n<p>Use it, and then replace <code>\\n</code> as needed, like (if <code>\\n</code> should be replaced by the empty string):</p>\n\n<pre><code>sed 's/\\\\n//g' filein.csv` &gt; fileout.csv\n</code></pre>\n\n<p>In one pass:</p>\n\n<pre><code>PATH/TO/xlsx2csv.py -e filein.xlsx | sed 's/\\\\n//g' &gt; fileout.csv\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 2, "last_activity_date": 1448901296, "creation_date": 1448901296, "answer_id": 34003422, "question_id": 33994244, "link": "https://stackoverflow.com/questions/33994244/how-to-remove-newlines-inside-csv-cells-using-regex-terminal-tools/34003422#34003422", "title": "How to remove newlines inside csv cells using regex/terminal tools?", "body": "<p>I suspect that instead of removing the newline you actually want to replace it with a space. If your input file is as simple as it looks this should do it for you:</p>\n\n<pre><code>$ awk '{ORS=( (c+=gsub(/\"/,\"&amp;\"))%2 ? FS : RS )} 1' file\nid,name\n01,\"this is with newline\"\n02,no newline\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5979786, "user_type": "registered", "profile_image": "https://graph.facebook.com/989452187815090/picture?type=large", "display_name": "Dinesh Kumar Selvaraj", "link": "https://stackoverflow.com/users/5979786/dinesh-kumar-selvaraj"}, "is_accepted": false, "score": 0, "last_activity_date": 1456399176, "last_edit_date": 1456399176, "creation_date": 1456397558, "answer_id": 35625220, "question_id": 33994244, "link": "https://stackoverflow.com/questions/33994244/how-to-remove-newlines-inside-csv-cells-using-regex-terminal-tools/35625220#35625220", "title": "How to remove newlines inside csv cells using regex/terminal tools?", "body": "<p>I have written a method to remove the embedded new line inside the cell. The method below returns a java.util.List object that contains all rows in the CSV file</p>\n\n<pre><code>List&lt;String&gt; getAllRowsInCSVFileAsList(File selectedCSVFile){\n  FileReader fileReader = null;\n  BufferedReader reader = null;\n  List&lt;String&gt; values = new ArrayList&lt;String&gt;();\n  try{\n      fileReader = new FileReader(selectedCSVFile);\n      reader = new BufferedReader(fileReader);\n      String line = reader.readLine();\n      String previousLine = \"\";\n      //\n      boolean intendLineInCell = false;\n      while(line != null){\n          if(intendLineInCell){\n              if(line.indexOf(\"\\\"\") != -1 &amp;&amp; line.indexOf(\"\\\"\") == line.lastIndexOf(\"\\\"\")){\n                  previousLine += line;\n                  values.add(previousLine);\n                  previousLine = \"\";\n                  intendLineInCell = false;\n              } else if(line.indexOf(\"\\\"\") != -1 &amp;&amp; line.indexOf(\"\\\"\") != line.lastIndexOf(\"\\\"\")){\n                  if(getTotalNumberOfCharacterSequenceOccurrenceInString(\"\\\"\", line) % 2 == 0){\n                      previousLine += line;\n                  }else{\n                      previousLine += line;\n                      values.add(previousLine);\n                      previousLine = \"\";\n                      intendLineInCell = false;\n                  }\n              } else{\n                  previousLine += line;\n              }\n          }else{\n              if(line.indexOf(\"\\\"\") == -1){\n                  values.add(line);\n              }else if ((line.indexOf(\"\\\"\") == line.lastIndexOf(\"\\\"\")) &amp;&amp; line.indexOf(\"\\\"\") != -1){\n                  intendLineInCell = true;\n                  previousLine = line;\n              }else if(line.indexOf(\"\\\"\") != line.lastIndexOf(\"\\\"\") &amp;&amp; line.indexOf(\"\\\"\") != -1){\n                  values.add(line);\n              }\n          }\n          line = reader.readLine();\n      }\n  }catch(IOException ie){\n      ie.printStackTrace();\n  }finally{\n      if(fileReader != null){\n          try {\n              fileReader.close();\n          } catch (IOException e) {\n              e.printStackTrace();\n          }\n      }\n      if(reader != null){\n          try {\n              reader.close();\n          } catch (IOException e) {\n            e.printStackTrace();\n          }\n      }\n  }\n  return values;\n</code></pre>\n\n<p>}</p>\n\n<pre><code>int getTotalNumberOfCharacterSequenceOccurrenceInString(String characterSequence, String text){\n  int count = 0;\n  while(text.indexOf(characterSequence) != -1){\n      text = text.replaceFirst(characterSequence, \"\");\n      count++;\n  }\n  return count;\n</code></pre>\n\n<p>}</p>\n\n<p>Imagine you are creating a csv file with one row and five columns and in the 4th cell you have an embedded new line(enter inside the cell)</p>\n\n<p>Your data will be look like below (actually we have only one row in csv but if you opened it in notepad it would look like 2 rows).</p>\n\n<pre><code>dinesh,kumar,24,\"23 \ntambaram india\",green\n</code></pre>\n\n<p>If there is a enter inside the cell could be like below</p>\n\n<pre><code>\"23\ntambaram india\"\n</code></pre>\n\n<p>That cell starts with double quote(\") and ends with double quote(\").</p>\n\n<p>Through using the double quote(\") while reading the line if there is a double quote(\") we can understand there is a embedded enter inside the cell.</p>\n\n<p>The code concats the next line with that line and checks whether there is an end double quote(\") or not. If there is, it adds a new row in the java.util.List object else it concats the next line and check it for end double quote(\") and so on. Here I have explained for one cell, but the method also works if the row has a lot of cells with embedded enter.</p>\n"}], "owner": {"reputation": 8726, "user_id": 29246, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f16f99fb7a80c71d880a1b92ce3498ad?s=128&d=identicon&r=PG", "display_name": "Mert Nuhoglu", "link": "https://stackoverflow.com/users/29246/mert-nuhoglu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3398, "favorite_count": 1, "answer_count": 6, "score": 5, "last_activity_date": 1456399176, "creation_date": 1448871984, "question_id": 33994244, "link": "https://stackoverflow.com/questions/33994244/how-to-remove-newlines-inside-csv-cells-using-regex-terminal-tools", "title": "How to remove newlines inside csv cells using regex/terminal tools?", "body": "<p>I have a csv file where some of the cells have newline character inside. For example:</p>\n\n<pre><code>id,name \n01,\"this is\nwith newline\"\n02,no newline \n</code></pre>\n\n<p>I want to remove all the newline characters inside cells.</p>\n\n<p>How to do it with regex or with other terminal tools generically without knowing number of columns in advance?</p>\n"}, {"tags": ["perl", "anyevent"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1448868942, "post_id": 33993136, "comment_id": 55742635, "body": "\\&amp;$self-&gt;handle_connection perhaps?"}], "answers": [{"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 5, "last_activity_date": 1448868201, "creation_date": 1448868201, "answer_id": 33993370, "question_id": 33993136, "link": "https://stackoverflow.com/questions/33993136/pass-a-class-subroutine-as-a-callback/33993370#33993370", "title": "Pass a class subroutine as a callback", "body": "<p>You can pass a anonymous function which calls object method,</p>\n\n<pre><code>sub{ $self-&gt;handle_connection }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "is_accepted": false, "score": 1, "last_activity_date": 1448884966, "creation_date": 1448884966, "answer_id": 33998216, "question_id": 33993136, "link": "https://stackoverflow.com/questions/33993136/pass-a-class-subroutine-as-a-callback/33998216#33998216", "title": "Pass a class subroutine as a callback", "body": "<p>The <a href=\"http://metacpan.org/pod/curry\" rel=\"nofollow\"><code>curry</code></a> module was built for this sort of thing</p>\n\n<pre><code>use curry;\n\ntcp_server undef, $self-&gt;port, $self-&gt;curry::handle_connection\n</code></pre>\n"}], "owner": {"reputation": 708, "user_id": 2348668, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/01a3034479d75cafcbb36061ed78cdf9?s=128&d=identicon&r=PG", "display_name": "user2348668", "link": "https://stackoverflow.com/users/2348668/user2348668"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 33993370, "answer_count": 2, "score": 2, "last_activity_date": 1448884966, "creation_date": 1448867219, "question_id": 33993136, "link": "https://stackoverflow.com/questions/33993136/pass-a-class-subroutine-as-a-callback", "title": "Pass a class subroutine as a callback", "body": "<p>I am using a module that takes callbacks (AnyEvent::Socket).\nI am trying to pass a class subroutine as a callback but nothing is working\nexample:</p>\n\n<pre><code>tcp_server undef, $self-&gt;port,\\$self-&gt;handle_connection\n</code></pre>\n\n<p>It just does not work, it complaints about undefined variables. if I pass the function as a anonymous subroutine it works </p>\n"}, {"tags": ["perl", "minimum"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1448914296, "post_id": 33992805, "comment_id": 55770062, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/10701210/how-to-find-maximum-and-minimum-value-in-an-array-of-integers-in-perl\">How to find maximum and minimum value in an array of integers in Perl?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 0, "creation_date": 1448885045, "post_id": 33992982, "comment_id": 55751872, "body": "Why bother suggesting a &quot;without List::Util&quot; scenario? List::Util is core and therefore always available. Furthermore, the <code>min</code> function runs in linear time, whereas a sort would take <code>n log n</code> time to sort the complete list, only to take the lowest element of the result."}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "reply_to_user": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 1, "creation_date": 1448885741, "post_id": 33992982, "comment_id": 55752295, "body": "@LeoNerd: I know its core module. I just gave another way to do. :)"}, {"owner": {"reputation": 45, "user_id": 1741028, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/e2b6804f757415727314341336e300c9?s=128&d=identicon&r=PG", "display_name": "tim", "link": "https://stackoverflow.com/users/1741028/tim"}, "edited": false, "score": 0, "creation_date": 1449242476, "post_id": 33992982, "comment_id": 55935389, "body": "@serenesat Thank for the answer. If i want to print the array which contain the smallest value instead of the value. How should i do?"}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "reply_to_user": {"reputation": 45, "user_id": 1741028, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/e2b6804f757415727314341336e300c9?s=128&d=identicon&r=PG", "display_name": "tim", "link": "https://stackoverflow.com/users/1741028/tim"}, "edited": false, "score": 0, "creation_date": 1449247045, "post_id": 33992982, "comment_id": 55938570, "body": "@tim: Take the smallest value from the arrays into two different variables. Now with an if condition check which variable have minimum value and print the correspondence array."}], "tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": true, "score": 5, "last_activity_date": 1448868491, "last_edit_date": 1448868491, "creation_date": 1448866519, "answer_id": 33992982, "question_id": 33992805, "link": "https://stackoverflow.com/questions/33992805/in-perl-how-can-i-find-the-overall-smallest-value-in-two-arrays/33992982#33992982", "title": "In Perl, how can I find the overall smallest value in two arrays?", "body": "<p>Use the <code>min</code> function of <a href=\"https://metacpan.org/pod/List::Util\">List::Util</a> module:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse List::Util qw( min );\n\nmy @arr1 = ( 2, 5, 6 );\nmy @arr2 = ( 1, 4, 7 );\nprint min(@arr1, @arr2), \"\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1\n</code></pre>\n\n<p>Without module, by using <code>sort</code> function:</p>\n\n<pre><code>my ($min) = sort { $a &lt;=&gt; $b } @arr1, @arr2;\nprint \"$min\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 1, "last_activity_date": 1448980833, "last_edit_date": 1495542393, "creation_date": 1448980833, "answer_id": 34023027, "question_id": 33992805, "link": "https://stackoverflow.com/questions/33992805/in-perl-how-can-i-find-the-overall-smallest-value-in-two-arrays/34023027#34023027", "title": "In Perl, how can I find the overall smallest value in two arrays?", "body": "<p>The <a href=\"https://stackoverflow.com/a/33992982/100754\">currently accepted answer</a> is memory inefficient.</p>\n\n<p>If <code>@arr1</code> and <code>@arr2</code> are large, the impact of constructing the list <code>(@arr1, @arr2)</code> just to pass it to <code>min</code> can be significant.</p>\n\n<p>Instead, use:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse List::Util qw( min );\n\nmy @arr1 = ( 2, 5, 6 );\nmy @arr2 = ( 1, 4, 7 );\n\nprint min( min(@arr1), min(@arr2) ), \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 1741028, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/e2b6804f757415727314341336e300c9?s=128&d=identicon&r=PG", "display_name": "tim", "link": "https://stackoverflow.com/users/1741028/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 33992982, "answer_count": 2, "score": 0, "last_activity_date": 1448980895, "creation_date": 1448865642, "last_edit_date": 1448980895, "question_id": 33992805, "link": "https://stackoverflow.com/questions/33992805/in-perl-how-can-i-find-the-overall-smallest-value-in-two-arrays", "title": "In Perl, how can I find the overall smallest value in two arrays?", "body": "<p>I have two array which contain integer. eg:</p>\n\n<pre><code>@arr1 = ( 2, 5, 6)\n@arr2 = ( 1, 4, 7)\n</code></pre>\n\n<p>How to find the minimum value between this two array?</p>\n"}, {"tags": ["perl", "parallel-processing", "cpu-usage"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1448867223, "post_id": 33992763, "comment_id": 55741895, "body": "The right number of processes do start depends on what type of task is involved (memory-intensive?  cpu-bound? i/o intensive?).  Take a look a <code>&#47;proc&#47;cpuinfo</code> to see what you have installed."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1448867276, "post_id": 33992763, "comment_id": 55741920, "body": "<a href=\"http://search.cpan.org/~jstowe/Linux-Cpuinfo-1.10/lib/Linux/Cpuinfo.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~jstowe/Linux-Cpuinfo-1.10/lib/Linux/Cpuinfo&zwnj;&#8203;.pm</a>"}, {"owner": {"reputation": 275, "user_id": 3134778, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/18832e7124cfdb99a4183c0ddd4aa695?s=128&d=identicon&r=PG&f=1", "display_name": "fifaltra", "link": "https://stackoverflow.com/users/3134778/fifaltra"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1448874088, "post_id": 33992763, "comment_id": 55745075, "body": "@xxfelixxx one run of the program uses 100% of one CPU if you let it."}, {"owner": {"reputation": 275, "user_id": 3134778, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/18832e7124cfdb99a4183c0ddd4aa695?s=128&d=identicon&r=PG&f=1", "display_name": "fifaltra", "link": "https://stackoverflow.com/users/3134778/fifaltra"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1448874289, "post_id": 33992763, "comment_id": 55745204, "body": "@xxfelixxx I know what CPUs I have, and I don&#39;t need the script to determine hardware info. I have 48 CPUs available, which is why I put 44 as the maximum number of children, as this will leave some CPUs for other people who might want to compute something. I would rather find out how many of them are free at the moment and adjust the number of children accordingly."}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1448878294, "post_id": 33992763, "comment_id": 55747720, "body": "@fifaltra, check the <code>loadavg</code>. It simplest terms, it gives you how many CPUs/cores are used right now. If the number larger than the number of CPUs, the system is overloaded."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448879957, "post_id": 33992763, "comment_id": 55748831, "body": "I&#39;d ask about the nature of the thing you&#39;re trying to run - I assume it&#39;s intensive CPU workload (e.g.no IO) and therefore will run as fast as it can. Because if it&#39;s anything else, CPU time might not be your limiting factor. I&#39;m a little bit wary of your read-regex-write loop there. I can&#39;t tell what that&#39;s doing."}, {"owner": {"reputation": 275, "user_id": 3134778, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/18832e7124cfdb99a4183c0ddd4aa695?s=128&d=identicon&r=PG&f=1", "display_name": "fifaltra", "link": "https://stackoverflow.com/users/3134778/fifaltra"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448894817, "post_id": 33992763, "comment_id": 55758209, "body": "@Sobrique Yes, it&#39;s CPU intensive, the regex just waits for the result that is printed to standard output and reformats it nicely (I shortened the script there a bit), so the CPU is definitely the limiting factor here. We&#39;re talking about 25 min per run and about 100 lines of output that have to go through the regex."}, {"owner": {"reputation": 275, "user_id": 3134778, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/18832e7124cfdb99a4183c0ddd4aa695?s=128&d=identicon&r=PG&f=1", "display_name": "fifaltra", "link": "https://stackoverflow.com/users/3134778/fifaltra"}, "reply_to_user": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1448895835, "post_id": 33992763, "comment_id": 55758914, "body": "@Dummy00001 I looked into it, but I don&#39;t really see how this helps me, please check my update."}, {"owner": {"reputation": 1393, "user_id": 3547124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XIKuC.png?s=128&g=1", "display_name": "Taylor Kidd", "link": "https://stackoverflow.com/users/3547124/taylor-kidd"}, "edited": false, "score": 0, "creation_date": 1448898666, "post_id": 33992763, "comment_id": 55760711, "body": "Do some research on &quot;load balancing&quot;. I know several ways of getting the information but don&#39;t have the time to find the APIs or packages."}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1448901201, "post_id": 33992763, "comment_id": 55762361, "body": "GNU Parallel is a Perl script that does this sort of thing..."}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1448902885, "post_id": 33992763, "comment_id": 55763501, "body": "@fifaltra, the 70 is the number of runnable tasks/threads, 1106 is total number of tasks/threads. (In <code>top</code> output, the 3% CPU time is idle. IOW, is system nearly fully loaded.) For you the fist number in <code>loadavg</code> output is the most relevant: it is the average number of runnable tasks over the last 1 minute. The 68.71 means that system had on average, at any given time, 68.71 tasks to run on your 48 CPUs. IOW, the CPUs are overloaded, there are more tasks to run than CPUs."}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1448903409, "post_id": 33992763, "comment_id": 55763808, "body": "@fifaltra, the main problem with <code>loadavg</code> is that it is very slow updating. I have used that for load balancing of tasks which run over a very long span of time (hours to days). The slowness of <code>loadavg</code> is IMO not really a bug, but a feature: reacting too fast bears danger of overreacting, harming the interactivity. The way I did it, was to increment/decrement (by 1 or 2) the thread pool size every minute or so, to make sure that system has at least 20% of spare CPU time for normal user activity (<code>20% spare</code> == <code>loadavg &lt;= num_cpus*0.8</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 501, "user_id": 1608238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cfa98712f93b0dfc91bb0994ce4e90?s=128&d=identicon&r=PG", "display_name": "Shizeon", "link": "https://stackoverflow.com/users/1608238/shizeon"}, "is_accepted": false, "score": 1, "last_activity_date": 1448904462, "creation_date": 1448904462, "answer_id": 34004426, "question_id": 33992763, "link": "https://stackoverflow.com/questions/33992763/use-perl-script-to-optimally-use-available-cpus/34004426#34004426", "title": "use perl script to optimally use available cpus", "body": "<p>There might always be processes bouncing around and some will be using more CPU than others. I think another approach would be to look at how busy each CPU is using its idle percentage. Something like the snippet below would work for that goal. You can then set a threshold that will determine if it is over a certain idle amount. You can then use the number returned to base your logic on how many processes to start. Something like this would help I believe:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse FileHandle;\n\n#Get number of cores over 95% idle\n# this can be adjusted\nmy $idle_percent=90;\nmy $free_cores=GetCores($idle_percent);\nprintf( \"Cores over %s free: %s\\n\",$idle_percent,$free_cores);\n\nsub GetCores {\n    my $threshold=shift;\n    my $cpu_idle_count=0;\n\n    my $delta_time_sleep=2; #Amount of sleep between the 2 samples\n    my @cpu_idle_totals;\n    my @cpu_total_totals;\n\n    for(0..1) {\n        my $output_fh=FileHandle-&gt;new('/proc/stat','r') or die \"No stat\";\n        # Get output of /proc/stat\n        while ( my $line=$output_fh-&gt;getline() ) {\n            chomp($line);\n            my ($tag,$user,$nice,$system,$idle,$iowait,$irq,$softirq)\n                =split( /\\s+/, $line);\n\n            if ( $tag=~ m/cpu(.+)/ ) {\n                my $cpu_number=$1;\n\n                my $total=( \n                    $user + $nice + $system + $idle \n                    + $iowait + $irq + $softirq\n                );\n\n                if ( defined( $cpu_idle_totals[$cpu_number] ) ) {\n                    my $idle_delta=$idle-$cpu_idle_totals[$cpu_number];\n                    my $total_delta=$total-$cpu_total_totals[$cpu_number];\n                    my $usage=100 * (($idle_delta)/$total_delta);\n                    printf(\"%s is %0.2f%% idle\\n\",$tag,$usage);\n\n                    if ( $usage &gt;= $threshold ) {\n                        $cpu_idle_count++;\n                    }\n                }\n\n                $cpu_idle_totals[$cpu_number]=$idle;\n                $cpu_total_totals[$cpu_number]=$total;\n\n            }\n        }\n\n        $output_fh-&gt;close();\n        sleep $delta_time_sleep;\n    }\n\n\n    return $cpu_idle_count;\n} \n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n<pre><code>cpu0 is 89.90% idle\ncpu1 is 94.97% idle\ncpu2 is 95.02% idle\ncpu3 is 97.00% idle\ncpu4 is 96.98% idle\ncpu5 is 98.48% idle\ncpu6 is 97.99% idle\ncpu7 is 95.98% idle\nCores over 90% free:7\n</code></pre>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1448919428, "last_edit_date": 1495535230, "creation_date": 1448919428, "answer_id": 34008471, "question_id": 33992763, "link": "https://stackoverflow.com/questions/33992763/use-perl-script-to-optimally-use-available-cpus/34008471#34008471", "title": "use perl script to optimally use available cpus", "body": "<p>I'm going to suggest taking a slightly different tack - how about, instead of 'throttling' your number of active processes based on load - why not instead make use of <code>SIGSTOP</code> and <code>SIGCONT</code>. </p>\n\n<p><code>Parallel::ForkManager</code> gives you <code>running_procs</code> method which returns a list of PIDs. </p>\n\n<p>You can then <code>signal</code> those to <code>STOP</code> when the load average gets 'too high'. </p>\n\n<p>You can find \"too high\" using <a href=\"http://search.cpan.org/~burak/Sys-Info-Base-0.7802/lib/Sys/Info/Device/CPU.pm\" rel=\"nofollow noreferrer\"><code>Sys::Info::CPU</code></a> (This also tells you <code>load</code>) or - perhaps look at <a href=\"https://stackoverflow.com/questions/19619582/get-the-number-of-processors-cores-in-command-line\">Number of processors/cores in command line</a></p>\n\n<p>But notionally - when load goes too high, issue 'SIGSTOP' to some of your child processes. They <em>should</em> drop out of the run queue, and be visible but suspended. </p>\n\n<p>In terms of load average - you get 3 numbers. 1m, 5m and 15m CPU load. Look at the first, and if that's greater than the number of CPUs, you have contention. </p>\n"}], "owner": {"reputation": 275, "user_id": 3134778, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/18832e7124cfdb99a4183c0ddd4aa695?s=128&d=identicon&r=PG&f=1", "display_name": "fifaltra", "link": "https://stackoverflow.com/users/3134778/fifaltra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 0, "accepted_answer_id": 34008471, "answer_count": 2, "score": 3, "last_activity_date": 1448919428, "creation_date": 1448865399, "last_edit_date": 1448895771, "question_id": 33992763, "link": "https://stackoverflow.com/questions/33992763/use-perl-script-to-optimally-use-available-cpus", "title": "use perl script to optimally use available cpus", "body": "<p>I have written a little perl script that starts a program multiple times, with different parameters in a for loop. The program does a numerical calculation and uses a whole CPU if it can get one. I have several CPUs available, so ideally, I want to start as many instances of the program at once as there are available CPUs, but not more. Since there may be other processes running, the number of available CPUs is not always the same. </p>\n\n<p>What I have done so far is:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse IPC::Open2;\nuse Parallel::ForkManager;\n\nmy $program = \"./program\";\n\nmy($out, $in);\nmy $pid;\n\nmy $pm = new Parallel::ForkManager(44);\n\nfor my $x (0..100){\n          my $childpid = $pm-&gt;start and next; \n          $pid= open2($out, $in, $program);\n\n          print $in &lt;&lt;EOF;\n          #input involving $x\nEOF\n          my $printstring = \"\";\n          while(&lt;$out&gt;){\n            if (/^\\s*1\\.000\\s+(-\\S+)D(\\S+)\\s*$/){\n               $printstring .= \"$1e$2\";\n            }\n          }\n          print $printstring, \"\\n\";\n          waitpid( $pid, 0 );\n          $pm-&gt;finish;\n\n}\n$pm-&gt;wait_all_children;\nprint \"\\n\\n END\\n\";\n</code></pre>\n\n<p>This obviously contains a fixed number of processes to start, and thereby a fixed number of CPUs that can be used, and I have no idea how to go about changing this to flexibly determine the available CPUs and change the number of children accordingly. Any ideas how to do this?</p>\n\n<p>Update:</p>\n\n<p>Just to be clear, the limiting factor here is definitely the CPU time and not I/O stuff. </p>\n\n<p>I looked into <code>loadavg</code>, but I am confused by its output. </p>\n\n<p>68.71 66.40 63.72 70/1106 19247</p>\n\n<p>At the same time, <code>top</code> showed </p>\n\n<pre><code>Tasks: 978 total,  23 running, 955 sleeping,   0 stopped,   0 zombie\nCpu(s):  2.1%us,  1.5%sy, 93.3%ni,  3.1%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st\n</code></pre>\n\n<p>The number of CPUs is 48, so I would have thought that if the fourth number (in this case 70) is greater than 48, I should not start any more child processes, but according to top there seems to be some idle CPU there, although the fourth number is 70.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "edited": false, "score": 2, "creation_date": 1448849372, "post_id": 33990285, "comment_id": 55736700, "body": "That&#39;s a lot to stick on the command line.  Put the Perl program you have up there in a file and run it using <code>c:\\&gt; perl MyPerlProgram.pl</code>.  Also, if this is Windows, the shebang line isn&#39;t really doing anything for you."}, {"owner": {"reputation": 1, "user_id": 5618841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdc0ab760d8248758014c3b1facc231f?s=128&d=identicon&r=PG&f=1", "display_name": "userlearningpython", "link": "https://stackoverflow.com/users/5618841/userlearningpython"}, "reply_to_user": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "edited": false, "score": 0, "creation_date": 1448850128, "post_id": 33990285, "comment_id": 55736888, "body": "its a test.conf file that I created ..... its not test.pl I am afraid I didn&#39;t get that."}, {"owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "edited": false, "score": 0, "creation_date": 1448854865, "post_id": 33990285, "comment_id": 55738062, "body": "Check out <a href=\"https://metacpan.org/pod/Config::Tiny\" rel=\"nofollow noreferrer\">metacpan.org/pod/Config::Tiny</a>"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1448861698, "post_id": 33990285, "comment_id": 55739864, "body": "What is your program doing that makes you think it&#39;s not working? Have you considered adding an <code>or die $!</code> to your <code>open()</code>?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1448861800, "post_id": 33990285, "comment_id": 55739878, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/318789/whats-the-best-way-to-open-and-read-a-file-in-perl\">What&#39;s the best way to open and read a file in Perl?</a>"}, {"owner": {"reputation": 439, "user_id": 2866527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5c4440345ec519dd606fc2375c5f426?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/2866527/edward"}, "edited": false, "score": 0, "creation_date": 1448962386, "post_id": 33990285, "comment_id": 55789331, "body": "What is the actual problem you&#39;re trying to solve? Your program, as it stands, doesn&#39;t do anything very useful. The extension <code>.conf</code> suggests that you might want to do something else with the information in that file, other than just printing it out."}], "answers": [{"tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 2, "last_activity_date": 1448862136, "creation_date": 1448862136, "answer_id": 33992102, "question_id": 33990285, "link": "https://stackoverflow.com/questions/33990285/how-to-read-a-conf-file-in-perl/33992102#33992102", "title": "How to read a .conf file in Perl", "body": "<p>Instead of using command line, write your program in a file (you can use any editor to write your program, I would suggest use <a href=\"https://notepad-plus-plus.org/\" rel=\"nofollow\">Notepad++</a>) and save as <code>myprogram.pl</code> in the same directory where you have your <code>.conf</code> file.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nopen my $fh, \"&lt;\", \"test.conf\" or die $!;\nwhile (&lt;$fh&gt;)\n{\n    chomp;\n    print \"$_\\n\";\n} \nclose $fh;\n</code></pre>\n\n<p>Now open a command prompt and go to the same path where you have your both file <code>myprogram.pl</code> and <code>test.conf</code> file and execute your program by typing this:</p>\n\n<pre><code>perl myprogram.pl\n</code></pre>\n\n<hr>\n\n<p>You can give full path of your input file inside program and can run your program from any path from command prompt by giving full path of your program:</p>\n\n<pre><code>perl path\\to\\myprogram.pl\n</code></pre>\n\n<p><strong>Side note:</strong> Always use <code>use warnings;</code> and <code>use strict;</code> at the top of your program and to open file always use lexical filehandle with three arguments with error handling.</p>\n"}, {"tags": [], "owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "is_accepted": false, "score": 1, "last_activity_date": 1448886642, "creation_date": 1448886642, "answer_id": 33998746, "question_id": 33990285, "link": "https://stackoverflow.com/questions/33990285/how-to-read-a-conf-file-in-perl/33998746#33998746", "title": "How to read a .conf file in Perl", "body": "<p>This is an extended comment more than an answer, as I believe @serenesat has given you everything you need to execute your program.</p>\n\n<p>When you do \"command line\" Perl, it's typically stuff that is relatively brief or trivial, such as:</p>\n\n<pre><code>perl -e \"print 2 ** 16\"\n</code></pre>\n\n<p>Anything that goes beyond a few lines, and you're probably better off putting that in a file and having Perl run the file.  You certainly <strong>can</strong> put larger programs on the command line, but when it comes to going back in and editing lines, it becomes more of a hassle than a shortcut.</p>\n\n<p>Also, for what it's worth the <code>-n</code> and <code>-p</code> parameters allow you to process the contents of a stream, meaning you could do something like this:</p>\n\n<pre><code>perl -ne \"print if /oracle/i\" test.conf\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5618841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdc0ab760d8248758014c3b1facc231f?s=128&d=identicon&r=PG&f=1", "display_name": "userlearningpython", "link": "https://stackoverflow.com/users/5618841/userlearningpython"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1448886642, "creation_date": 1448847657, "last_edit_date": 1448862275, "question_id": 33990285, "link": "https://stackoverflow.com/questions/33990285/how-to-read-a-conf-file-in-perl", "title": "How to read a .conf file in Perl", "body": "<p>I just created a text <code>test.conf</code> file with some information. How can I read it on Perl?<br>\nI am new to Perl and I am not sue would will I need to do.<br>\nI tried  the following:</p>\n\n<pre><code>C:\\Perl\\Perl_Project&gt;perl\n#!/usr/local/bin/perl \nopen (MYFILE, 'test.conf'); \nwhile (&lt;MYFILE&gt;) \n{ chomp; print \"$_\\n\"; } \nclose (MYFILE);\n</code></pre>\n\n<p>I tried installing Perl on my laptop that has Windows 7 OS, and using command line.</p>\n"}, {"tags": ["regex", "perl", "csv", "replace", "sublimetext3"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1448845032, "post_id": 33989664, "comment_id": 55735786, "body": "I think if this <code>&quot;5&quot; Carrots&quot;</code> is a valid field, then there can be no comma&#39;s within quotes right? Otherwise it could be this <code>&quot;,5,&quot; Carrots&quot;, </code> making the comma the only valid delimiter."}, {"owner": {"reputation": 640, "user_id": 3257871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7cc667331cc540f9dfe48952ff3bc23?s=128&d=identicon&r=PG", "display_name": "Erutan409", "link": "https://stackoverflow.com/users/3257871/erutan409"}, "edited": false, "score": 0, "creation_date": 1448845428, "post_id": 33989664, "comment_id": 55735875, "body": "@sln has a good point. Would <code>&quot;,5&quot;,&quot;Something&quot;</code> be valid? Notice the the command inside the first group, preceding <code>5</code>."}, {"owner": {"reputation": 85, "user_id": 4153569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e129e272154848a88c8bdab5e3e10881?s=128&d=identicon&r=PG&f=1", "display_name": "aj8907", "link": "https://stackoverflow.com/users/4153569/aj8907"}, "reply_to_user": {"reputation": 640, "user_id": 3257871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7cc667331cc540f9dfe48952ff3bc23?s=128&d=identicon&r=PG", "display_name": "Erutan409", "link": "https://stackoverflow.com/users/3257871/erutan409"}, "edited": false, "score": 0, "creation_date": 1448877753, "post_id": 33989664, "comment_id": 55747403, "body": "@Erutan409 Yes <code>&quot;,5&quot;,&quot;Something&quot;</code> would be a valid field. But the comma doesn&#39;t need to be &quot;treated&quot; (have <code>\\&quot;</code>) placed in front of it."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 4153569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e129e272154848a88c8bdab5e3e10881?s=128&d=identicon&r=PG&f=1", "display_name": "aj8907", "link": "https://stackoverflow.com/users/4153569/aj8907"}, "edited": false, "score": 1, "creation_date": 1448890517, "post_id": 33990112, "comment_id": 55755277, "body": "That is amazing - thank you sooo much! The only adjustment is that in step 2 the replacement regex would of <code>\\\\&quot;\\&quot;</code> seems to work."}, {"owner": {"reputation": 85, "user_id": 4153569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e129e272154848a88c8bdab5e3e10881?s=128&d=identicon&r=PG&f=1", "display_name": "aj8907", "link": "https://stackoverflow.com/users/4153569/aj8907"}, "edited": false, "score": 0, "creation_date": 1448891291, "post_id": 33990112, "comment_id": 55755772, "body": "The only thing I have now just realised in my stupidity is that when it is an apostraphe the adjustment would needs to be to place <code>\\&#39;&#39;</code> - is there any way of adjusting it to implement this when on an apostrophe but keep it as is for quotation marks? If it&#39;s a massive change don&#39;t worry the code could be run twice instead for each case. Thanks again for the help."}, {"owner": {"reputation": 640, "user_id": 3257871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7cc667331cc540f9dfe48952ff3bc23?s=128&d=identicon&r=PG", "display_name": "Erutan409", "link": "https://stackoverflow.com/users/3257871/erutan409"}, "reply_to_user": {"reputation": 85, "user_id": 4153569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e129e272154848a88c8bdab5e3e10881?s=128&d=identicon&r=PG&f=1", "display_name": "aj8907", "link": "https://stackoverflow.com/users/4153569/aj8907"}, "edited": false, "score": 0, "creation_date": 1448891526, "post_id": 33990112, "comment_id": 55755949, "body": "There would need to be an additional step; more than likely before step 3.  So, I&#39;d modify step 2 to only replace the first part <code>&quot;</code> -&gt; <code>\\\\&quot;\\&quot;</code> (as you pointed out in your first comment).  Then add another step to find the single quotes <code>(?&lt;!\\\\)&#39;</code> -&gt; <code>\\&#39;&#39;</code>.  The lookbehind in the aforementioned rexeg is an assumption on my part.  Drop it if you don&#39;t care about potential preceding backslahes when matching single quotes."}, {"owner": {"reputation": 85, "user_id": 4153569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e129e272154848a88c8bdab5e3e10881?s=128&d=identicon&r=PG&f=1", "display_name": "aj8907", "link": "https://stackoverflow.com/users/4153569/aj8907"}, "edited": false, "score": 0, "creation_date": 1448892192, "post_id": 33990112, "comment_id": 55756379, "body": "Ah ok. Just tested it now. For the new step adding an extra backslash seems to make it work ( <code>(?&lt;!\\\\)&#39;</code> -&gt; <code>\\\\&#39;&#39;</code> ). Again thanks so much for your help. FYI for context - i&#39;m doing this to pre-process data to load into amazon redshift."}, {"owner": {"reputation": 640, "user_id": 3257871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7cc667331cc540f9dfe48952ff3bc23?s=128&d=identicon&r=PG", "display_name": "Erutan409", "link": "https://stackoverflow.com/users/3257871/erutan409"}, "reply_to_user": {"reputation": 85, "user_id": 4153569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e129e272154848a88c8bdab5e3e10881?s=128&d=identicon&r=PG&f=1", "display_name": "aj8907", "link": "https://stackoverflow.com/users/4153569/aj8907"}, "edited": false, "score": 0, "creation_date": 1448892835, "post_id": 33990112, "comment_id": 55756800, "body": "You&#39;re welcome. An upvote and/or even an accepted answer would be cool, too ;)"}, {"owner": {"reputation": 85, "user_id": 4153569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e129e272154848a88c8bdab5e3e10881?s=128&d=identicon&r=PG&f=1", "display_name": "aj8907", "link": "https://stackoverflow.com/users/4153569/aj8907"}, "edited": false, "score": 0, "creation_date": 1448893169, "post_id": 33990112, "comment_id": 55757036, "body": "Done and i&#39;m not yet cool enough to upvote :( Btw I thought I&#39;d ask - is using regex really the best way to clean this kind of data? I feel like there is something better out but I haven&#39;t found it yet."}, {"owner": {"reputation": 640, "user_id": 3257871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7cc667331cc540f9dfe48952ff3bc23?s=128&d=identicon&r=PG", "display_name": "Erutan409", "link": "https://stackoverflow.com/users/3257871/erutan409"}, "reply_to_user": {"reputation": 85, "user_id": 4153569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e129e272154848a88c8bdab5e3e10881?s=128&d=identicon&r=PG&f=1", "display_name": "aj8907", "link": "https://stackoverflow.com/users/4153569/aj8907"}, "edited": false, "score": 0, "creation_date": 1448897487, "post_id": 33990112, "comment_id": 55759947, "body": "Subjective.  Regex is usually considered a high-overhead approach to solving these kinds of problems when it can (simply) be done in other ways.  For what you&#39;re doing, using a series of regular expressions to accomplish a manual task (assuming that it&#39;ll always be manual), is probably the most efficient way of automating the your end solution.  Especially inside of an IDE, unless you want to write a plugin.  My two cents."}, {"owner": {"reputation": 85, "user_id": 4153569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e129e272154848a88c8bdab5e3e10881?s=128&d=identicon&r=PG&f=1", "display_name": "aj8907", "link": "https://stackoverflow.com/users/4153569/aj8907"}, "edited": false, "score": 0, "creation_date": 1448907720, "post_id": 33990112, "comment_id": 55766346, "body": "That is good to know - can definitely see the overhead with regex (working with it on a 1gb file in ultraedit) but like you said not much else that can do it so efficiently. Thanks again for the help. aj"}], "tags": [], "owner": {"reputation": 640, "user_id": 3257871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7cc667331cc540f9dfe48952ff3bc23?s=128&d=identicon&r=PG", "display_name": "Erutan409", "link": "https://stackoverflow.com/users/3257871/erutan409"}, "is_accepted": true, "score": 0, "last_activity_date": 1448846908, "last_edit_date": 1448846908, "creation_date": 1448846170, "answer_id": 33990112, "question_id": 33989664, "link": "https://stackoverflow.com/questions/33989664/regex-to-find-and-replace-single-quotation-marks-in-strings-separated-by-a-comma/33990112#33990112", "title": "Regex to find and replace single quotation marks in strings separated by a comma and enclosed in quotes", "body": "<p>I'd perform three steps in solving your problem:</p>\n\n<ol>\n<li>Perform this find/replace <a href=\"http://bit.ly/1lT9Lze\" rel=\"nofollow\">regex</a> to create barriers for groups of text</li>\n</ol>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>\"([\\S\\h]*?)\"((?:,|\\h*$))</code> replace with <code>[&lt;]$1[&gt;]$2</code></p>\n\n<ol start=\"2\">\n<li>Then find your offending double quotes with this find/replace <a href=\"http://bit.ly/1lTb8Oy\" rel=\"nofollow\">regex</a></li>\n</ol>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>\"|(?=')</code> replace with <code>\\\\\"</code></p>\n\n<ol start=\"3\">\n<li>Then, finally, replace your barriers back to where they were with this <a href=\"http://bit.ly/1lTa6lv\" rel=\"nofollow\">regex</a></li>\n</ol>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>\\[[&lt;&gt;]\\]</code> replace with <code>\"</code></p>\n\n<p>Edit:</p>\n\n<p>I just updated step 2.  I think I'm understanding your problem, correctly.  If not, please explain why and I'll adjust the regular expressions accordingly.</p>\n"}], "owner": {"reputation": 85, "user_id": 4153569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e129e272154848a88c8bdab5e3e10881?s=128&d=identicon&r=PG&f=1", "display_name": "aj8907", "link": "https://stackoverflow.com/users/4153569/aj8907"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1785, "favorite_count": 0, "accepted_answer_id": 33990112, "answer_count": 1, "score": 0, "last_activity_date": 1448846908, "creation_date": 1448841981, "last_edit_date": 1495541712, "question_id": 33989664, "link": "https://stackoverflow.com/questions/33989664/regex-to-find-and-replace-single-quotation-marks-in-strings-separated-by-a-comma", "title": "Regex to find and replace single quotation marks in strings separated by a comma and enclosed in quotes", "body": "<p>I'm using Sublime Text 3 and I have a CSV file which contains single quotation:</p>\n\n<p><strong>Input:</strong></p>\n\n<pre><code>\"col1\", \"col2\", \"col3\", \"col4\", \"col5\"\n\"Cakes\", \"5\" Carrots\", \"Pineapples'\", \"\"Eggs\"\", \"Apple 5\" and 10\"\"\n...\n</code></pre>\n\n<p>Using regular expressions I would like to \"neutralise\" but not remove the out of place single quotations (eg. <code>5\" Carrots</code>, <code>\"\"Eggs\"\"</code>) and apostrophes (eg. <code>Pineapples'</code>).</p>\n\n<p>By neutralise I specifically mean to place <code>\\\"</code> in front of each single quotation/apostrophe so the output is:</p>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>\"col1\", \"col2\", \"col3\", \"col4\", \"col5\"\n\"Cakes\", \"5\\\"\" Carrots\", \"Pineapples\\\"'\", \"\\\"\"Eggs\\\"\"\", \"Apple 5\\\"\" and 10\\\"\"\"\n...\n</code></pre>\n\n<p><strong>Progress so far:</strong>\nI think I have 2 pieces needed to solve the puzzle. </p>\n\n<p>Firstly, I can find and replace the quotations for each individual field on its own using the regular expression <code>(\".*)([\"])(.*\")</code>\nExample:</p>\n\n<p><em>Input:</em> <code>\"Hello 5\" World\"</code> <em>Find:</em> <code>(\".*)([\"])(.*\")</code> <em>Replace:</em> <code>\\1\\\\\\\"\"\\3</code>\n<em>Output:</em> <code>\"Hello 5\\\"\" World\"</code>. To reproduce this you need to have regex and wrap options selected on the sublime find and replace toolbar.</p>\n\n<p>Secondly, I can find each field in a csv file (opened up in Sublime) using the regular expression <code>([^,\\n]+)</code>. See <a href=\"https://stackoverflow.com/questions/24741214/regex-to-find-strings-separated-by-comma-and-then-add-quotes\">this</a> previous question for more info.</p>\n\n<p>The question is how can I use both of these techniques (or others if needed) to get a regex to find and a regex to replace each field which has a single quotation marks (i.e. precede it by <code>\\\"</code>).</p>\n\n<p>If you don't think this can be done through sublime and regular expressions it would be great if you could suggest a way to do this.</p>\n\n<p><strong>Further Details:</strong>\nFor absolute clarity a solution should contain a regular express that finds each field in the CSV file (opened in sublime) that has a single quotation mark in. Then there should be a regular expression that inserts before each quotation mark the string <code>\\\"</code>.</p>\n"}, {"tags": ["perl", "tk"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5593659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206948651088396/picture?type=large", "display_name": "Deepak Mahajan", "link": "https://stackoverflow.com/users/5593659/deepak-mahajan"}, "edited": false, "score": 0, "creation_date": 1448903033, "post_id": 33987313, "comment_id": 55763590, "body": "If I do that, I get Use of uninitialized value $_[0] in concatenation (.) or string. I am adding my code in the question to make it more clear."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1448826792, "creation_date": 1448826792, "answer_id": 33987313, "question_id": 33986706, "link": "https://stackoverflow.com/questions/33986706/passing-argument-to-function-in-perl-tk/33987313#33987313", "title": "Passing argument to function in Perl tk", "body": "<p>Output of <code>SCALAR(0X765...)</code> indicates a reference to a scalar rather than a simple scalar. I think you want to pass <code>$fever</code> directly to your command, not the reference <code>\\$fever</code>.</p>\n\n<pre><code>-command =&gt; [ \\&amp;show_choice, $fever ]\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5593659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206948651088396/picture?type=large", "display_name": "Deepak Mahajan", "link": "https://stackoverflow.com/users/5593659/deepak-mahajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448903323, "creation_date": 1448823507, "last_edit_date": 1448903323, "question_id": 33986706, "link": "https://stackoverflow.com/questions/33986706/passing-argument-to-function-in-perl-tk", "title": "Passing argument to function in Perl tk", "body": "<p>I am new to perl tk and I am stuck on a problem. I am trying to pass the \n-variable field in a function. In a drop down I have \n<code>-variable =&gt; \\$fever</code> \nand I also have <code>-command =&gt; [\\&amp;show_choice, \\$fever]</code>.. I am trying to print the value of the drop down option selected. But what I get is something like SCALAR(0X765...). How do I get the displayed value ? I tried using -textVariable instead of variable but that works the same way.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse Data::Printer;\nuse warnings;\nuse Tk;\n\nmy $mw = MainWindow-&gt;new;\n$mw-&gt;geometry(\"700x700\");\n$mw-&gt;title(\"AIR (Auto Immune Research)\");\n\n#create own title font\n$mw-&gt;fontCreate(\"sectionTitleFont\", -family =&gt; \"Helvetica\", -size =&gt; 36, -weight =&gt; \"bold\");\n\nmy $symptomFrame = $mw-&gt;Frame(-background =&gt; 'white', -foreground =&gt; 'black')-&gt;pack(-side =&gt; \"top\", -fill =&gt; \"x\");\nmy $pathologyFrame = $mw-&gt;Frame(-background =&gt; 'white', -foreground =&gt; 'black')-&gt;pack(-side =&gt; \"bottom\", -fill =&gt; \"x\");\n\nmy $symptomLabel = $symptomFrame-&gt;Label(-background =&gt; 'white', -text =&gt; 'Patient Symptoms', -font =&gt; 'sectionTitleFont');\nmy $pathologyLabel = $pathologyFrame-&gt;Label(-background =&gt; 'white', -text =&gt; 'Pathological Findings', -font =&gt; 'sectionTitleFont');\n\nmy $severityText = $symptomFrame-&gt;Label(-background =&gt; 'white', -text =&gt; 'Intensity');\n\n#cough\nmy $coughCheckBox = $symptomFrame-&gt;Checkbutton(-text =&gt; 'Cough', -background =&gt; 'white', -variable =&gt; \\$couchCheck);\nmy $coughSeverity;\nmy $coughSeverityDD = $symptomFrame-&gt;Optionmenu(\n-options =&gt; [[1=&gt;1], [2=&gt;2], [3=&gt;3], [4=&gt;4], [5=&gt;5], [6=&gt;6], [7=&gt;7], [8=&gt;8], [9=&gt;9], [10=&gt;10]],\n-variable =&gt; \\$coughSeverity,\n-command =&gt; [\\&amp;show_choice, $coughSeverity, \"cough\", \\$couchCheck]\n);\n\n#Fever\nmy $feverCheckBox = $symptomFrame-&gt;Checkbutton(-text =&gt; 'Fever', -background =&gt; 'white', -variable =&gt; \\$feverCheck);\nmy $feverSeverity;\nmy $feverSeverityDD = $symptomFrame-&gt;Optionmenu(\n-options =&gt; [[1=&gt;1], [2=&gt;2], [3=&gt;3], [4=&gt;4], [5=&gt;5], [6=&gt;6], [7=&gt;7], [8=&gt;8], [9=&gt;9], [10=&gt;10]],\n-variable =&gt; \\$feverSeverity,\n-command =&gt; [\\&amp;show_choice, $feverSeverity, \"fever\", \\$feverCheck]\n);\n\n#joint pain\nmy $jointPainCheckBox = $symptomFrame-&gt;Checkbutton(-text =&gt; 'Joint Pain', -background =&gt; 'white', -variable =&gt; \\$jointPainCheck);\nmy $jointPainSeverity;\nmy $jointPainSeverityDD = $symptomFrame-&gt;Optionmenu(\n-options =&gt; [[1=&gt;1], [2=&gt;2], [3=&gt;3], [4=&gt;4], [5=&gt;5], [6=&gt;6], [7=&gt;7], [8=&gt;8], [9=&gt;9], [10=&gt;10]],\n-variable =&gt; \\$jointPainSeverity,\n-command =&gt; [\\&amp;show_choice, $jointPainSeverity, \"joint pain\", \\$jointPainCheck]\n);\n\n#Moon face\nmy $moonFaceCheckBox = $symptomFrame-&gt;Checkbutton(-text =&gt; 'Moon Face', -background =&gt; 'white', -variable =&gt; \\$moonFaceCheck);\nmy $moonFaceSeverity;\nmy $moonFaceSeverityDD = $symptomFrame-&gt;Optionmenu(\n-options =&gt; [[1=&gt;1], [2=&gt;2], [3=&gt;3], [4=&gt;4], [5=&gt;5], [6=&gt;6], [7=&gt;7], [8=&gt;8], [9=&gt;9], [10=&gt;10]],\n-variable =&gt; \\$moonFaceSeverity,\n-command =&gt; [\\&amp;show_choice, $moonFaceSeverity, \"moon face\", \\$moonFaceCheck]\n);\n\n#fatigue\nmy $fatigueBox = $symptomFrame-&gt;Checkbutton(-text =&gt; 'Fatigue', -background =&gt; 'white', -variable =&gt; \\$fatigueCheck);\nmy $fatigueSeverity;\nmy $fatigueSeverityDD = $symptomFrame-&gt;Optionmenu(\n-options =&gt; [[1=&gt;1], [2=&gt;2], [3=&gt;3], [4=&gt;4], [5=&gt;5], [6=&gt;6], [7=&gt;7], [8=&gt;8], [9=&gt;9], [10=&gt;10]],\n-variable =&gt; \\$fatigueSeverity,\n-command =&gt; [\\&amp;show_choice, $fatigueSeverity, \"fatigue\", \\$fatigueCheck]\n);\n\n#Skin Redness\nmy $skinRednessBox = $symptomFrame-&gt;Checkbutton(-text =&gt; 'Skin Redness', -background =&gt; 'white', -variable =&gt; \\$skinRednessCheck);\nmy $skinRednessSeverity;\nmy $skinRednessSeverityDD = $symptomFrame-&gt;Optionmenu(\n-options =&gt; [[1=&gt;1], [2=&gt;2], [3=&gt;3], [4=&gt;4], [5=&gt;5], [6=&gt;6], [7=&gt;7], [8=&gt;8], [9=&gt;9], [10=&gt;10]],\n-variable =&gt; \\$skinRednessSeverity,\n-command =&gt; [\\&amp;show_choice, $skinRednessSeverity, \"skin redness\", \\$skinRednessCheck]\n);\n\n#Drowsiness\nmy $drowsinessBox = $symptomFrame-&gt;Checkbutton(-text =&gt; 'Drowsiness', -background =&gt; 'white', -variable =&gt; \\$drowsinessCheck);\nmy $drowsinessSeverity;\nmy $drowsinessSeverityDD = $symptomFrame-&gt;Optionmenu(\n-options =&gt; [[1=&gt;1], [2=&gt;2], [3=&gt;3], [4=&gt;4], [5=&gt;5], [6=&gt;6], [7=&gt;7], [8=&gt;8], [9=&gt;9], [10=&gt;10]],\n-variable =&gt; \\$drowsinessSeverity,\n-command =&gt; [\\&amp;show_choice, $drowsinessSeverity, \"drowsiness\", \\$drowsinessCheck]\n);\n\n#Headache\nmy $headacheBox = $symptomFrame-&gt;Checkbutton(-text =&gt; 'Headache', -background =&gt; 'white', -variable =&gt; \\$headacheCheck);\nmy $headacheSeverity;\nmy $headacheSeverityDD = $symptomFrame-&gt;Optionmenu(\n-options =&gt; [[1=&gt;1], [2=&gt;2], [3=&gt;3], [4=&gt;4], [5=&gt;5], [6=&gt;6], [7=&gt;7], [8=&gt;8], [9=&gt;9], [10=&gt;10]],\n-variable =&gt; \\$headacheSeverity,\n-command =&gt; [\\&amp;show_choice, $headacheSeverity, \"headache\", \\$headacheCheck]\n);\n\n\n#Inflamations\nmy $inflamationsBox = $symptomFrame-&gt;Checkbutton(-text =&gt; 'Inflamations', -background =&gt; 'white', -variable =&gt; \\$inflamationsCheck);\nmy $inflamationsSeverity;\nmy $inflamationsSeverityDD = $symptomFrame-&gt;Optionmenu(\n-options =&gt; [[1=&gt;1], [2=&gt;2], [3=&gt;3], [4=&gt;4], [5=&gt;5], [6=&gt;6], [7=&gt;7], [8=&gt;8], [9=&gt;9], [10=&gt;10]],\n-variable =&gt; \\$inflamationsSeverity,\n-command =&gt; [\\&amp;show_choice, $inflamationsSeverity, \"inflamations\", \\$inflamationsCheck]\n);\n\n#Itchiness\nmy $itchinessBox = $symptomFrame-&gt;Checkbutton(-text =&gt; 'Itchiness', -background =&gt; 'white', -variable =&gt; \\$itchinessCheck);\nmy $itchinessSeverity;\nmy $itchinessSeverityDD = $symptomFrame-&gt;Optionmenu(\n-options =&gt; [[1=&gt;1], [2=&gt;2], [3=&gt;3], [4=&gt;4], [5=&gt;5], [6=&gt;6], [7=&gt;7], [8=&gt;8], [9=&gt;9], [10=&gt;10]],\n-variable =&gt; \\$itchinessSeverity,\n-command =&gt; [\\&amp;show_choice, $itchinessSeverity, \"itchiness\", \\$itchinessCheck]\n);\n\n#Blood in Urine\nmy $bloodBox = $symptomFrame-&gt;Checkbutton(-text =&gt; 'Blood in Urine', -background =&gt; 'white', -variable =&gt; \\$bloodCheck);\nmy $bloodSeverity;\nmy $bloodSeverityDD = $symptomFrame-&gt;Optionmenu(\n-options =&gt; [[1=&gt;1], [2=&gt;2], [3=&gt;3], [4=&gt;4], [5=&gt;5], [6=&gt;6], [7=&gt;7], [8=&gt;8], [9=&gt;9], [10=&gt;10]],\n-variable =&gt; \\$bloodSeverity,\n-command =&gt; [\\&amp;show_choice, $bloodSeverity, \"blood in urine\", \\$bloodCheck]\n);\n\n#Depression\nmy $depressionBox = $symptomFrame-&gt;Checkbutton(-text =&gt; 'Depression', -background =&gt; 'white', -variable =&gt; \\$depressionCheck);\nmy $depressionSeverity;\nmy $depressionSeverityDD = $symptomFrame-&gt;Optionmenu(\n-options =&gt; [[1=&gt;1], [2=&gt;2], [3=&gt;3], [4=&gt;4], [5=&gt;5], [6=&gt;6], [7=&gt;7], [8=&gt;8], [9=&gt;9], [10=&gt;10]],\n-variable =&gt; \\$depressionSeverity,\n-command =&gt; [\\&amp;show_choice, $depressionSeverity, \"depression\", \\$depressionCheck]\n);\n\n#Sleep Deprevity\nmy $sleepDeprevityBox = $symptomFrame-&gt;Checkbutton(-text =&gt; 'Sleep Deprevity', -background =&gt; 'white', -variable =&gt; \\$sleepCheck);\nmy $sleepDeprevitySeverity;\nmy $sleepDeprevitySeverityDD = $symptomFrame-&gt;Optionmenu(\n-options =&gt; [[1=&gt;1], [2=&gt;2], [3=&gt;3], [4=&gt;4], [5=&gt;5], [6=&gt;6], [7=&gt;7], [8=&gt;8], [9=&gt;9], [10=&gt;10]],\n-variable =&gt; \\$sleepDeprevitySeverity,\n-command =&gt; [\\&amp;show_choice, $sleepDeprevitySeverity, \"sleep deprevity\", \\$sleepCheck]\n);\n\n\n#emty label to give empty space\nmy $emptyLabel = $symptomFrame-&gt;Label(-background =&gt; 'white', -width =&gt; '20');\n$symptomLabel-&gt;grid(-columnspan =&gt; '5');\n$pathologyLabel-&gt;grid(-columnspan =&gt; '5');\n#$severityText-&gt;grid;\n$coughCheckBox -&gt; grid($severityText, $coughSeverityDD, $emptyLabel, $feverCheckBox, $severityText, $feverSeverityDD);\n$sleepDeprevityBox -&gt; grid($severityText, $sleepDeprevitySeverityDD, $emptyLabel, $depressionBox, $severityText, $depressionSeverityDD);\n$moonFaceCheckBox -&gt; grid($severityText, $jointPainSeverityDD, $emptyLabel, $bloodBox, $severityText, $bloodSeverityDD);\n$itchinessBox -&gt; grid($severityText, $itchinessSeverityDD, $emptyLabel, $inflamationsBox, $severityText, $inflamationsSeverityDD);\n$headacheBox -&gt; grid($severityText, $headacheSeverityDD, $emptyLabel, $drowsinessBox, $severityText, $drowsinessSeverityDD);\n$skinRednessBox -&gt; grid($severityText, $skinRednessSeverityDD, $emptyLabel, $fatigueBox, $severityText, $fatigueSeverityDD);\n\nsub show_choice\n{\n    #my $severity_value = p($_[0]);\n    #$severity_value =~ s/.*\\W(\\w)/$1/;\n    #p($severity_value);\n    #my $symptom = $_[1];\n    #my $checkVal = p($_[2]);\n    #$checkVal =~ s/.*\\W(\\w)/$1/;\n    #print \"$severity_value \\n\";\n    my $val = $_[0];\n    print \"$val \\n\";\n    return;\n}\n\n\n#$fatigueBox -&gt; grid($fatigueSeverityDD, $emptyLabel, $itchinessBox, $dd3);\n#$moonFaceCheckBox -&gt; grid($jointPainSeverityDD, $emptyLabel, $bloodCheckBox, $dd3);\n#$moonFaceCheckBox -&gt; grid($jointPainSeverityDD, $emptyLabel, $bloodCheckBox, $dd3);\n#$moonFaceCheckBox -&gt; grid($jointPainSeverityDD, $emptyLabel, $bloodCheckBox, $dd3);\n#$moonFaceCheckBox -&gt; grid($jointPainSeverityDD, $emptyLabel, $bloodCheckBox, $dd3);\n#$moonFaceCheckBox -&gt; grid($jointPainSeverityDD, $emptyLabel, $bloodCheckBox, $dd3);\n#$moonFaceCheckBox -&gt; grid($jointPainSeverityDD, $emptyLabel, $bloodCheckBox, $dd3);\n\nMainLoop;\n</code></pre>\n"}, {"tags": ["perl", "sockets", "tcp", "whois"], "comments": [{"owner": {"reputation": 2965, "user_id": 345520, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f5faea1e34f0e31fb89823a3be4ca4a8?s=128&d=identicon&r=PG", "display_name": "wnrph", "link": "https://stackoverflow.com/users/345520/wnrph"}, "edited": false, "score": 1, "creation_date": 1448818081, "post_id": 33983323, "comment_id": 55726815, "body": "I guess this is due to the extra space character in <code>&quot;$domain_name &quot;</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448819714, "post_id": 33983323, "comment_id": 55727488, "body": "Either that or it doesn&#39;t like <code>\\r\\n</code>"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1448820219, "last_edit_date": 1495539880, "creation_date": 1448819871, "answer_id": 33986043, "question_id": 33983323, "link": "https://stackoverflow.com/questions/33983323/whois-tcp-socket-connection-fails-for-one-server/33986043#33986043", "title": "whois TCP socket connection fails for one server", "body": "<p>As <a href=\"https://stackoverflow.com/users/345520/artistoex\">artistoex</a> notes - it's because there's a space in your domain name. \nChange your print line to:</p>\n\n<pre><code>print {$query_socket} \"$domain_name\\n\";\n</code></pre>\n\n<p>(Note - the curly braces are for style reasons and can be omitted - I prefer them to make clear this is a file handle)</p>\n"}, {"tags": [], "owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "is_accepted": false, "score": 0, "last_activity_date": 1514920633, "creation_date": 1514920633, "answer_id": 48066579, "question_id": 33983323, "link": "https://stackoverflow.com/questions/33983323/whois-tcp-socket-connection-fails-for-one-server/48066579#48066579", "title": "whois TCP socket connection fails for one server", "body": "<p>Per <a href=\"https://www.rfc-editor.org/rfc/rfc3912.txt\" rel=\"nofollow noreferrer\">RFC3912</a> the client is expected to communicate like that in <code>whois</code> protocol: \"All requests are terminated with ASCII CR and then ASCII LF\"</p>\n\n<p>So in your code, instead of <code>\"\\n\\r\"</code> please use <code>\"\\r\\n\"</code>. And remove the extra space like written in other replies.</p>\n\n<p>Note however that <code>whois</code>is not a well defined structured protocol: do not expect all whois servers to work in the same way nor to adhere to some kind of standards. You will find a lot of strange cases...</p>\n"}], "owner": {"reputation": 2776, "user_id": 1144681, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3bea9f2d8516d7ebb5596aee518a0286?s=128&d=identicon&r=PG", "display_name": "rahuL", "link": "https://stackoverflow.com/users/1144681/rahul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1514920633, "creation_date": 1448803627, "question_id": 33983323, "link": "https://stackoverflow.com/questions/33983323/whois-tcp-socket-connection-fails-for-one-server", "title": "whois TCP socket connection fails for one server", "body": "<p>I'm writing a short script to query domain names from their respective whois servers - while in most cases, while the TCP connection via port 43 seems to be working for most whois servers, the queries to <code>whois.markmonitor.com</code> seems to be failing with an odd error that says <em>Invalid query</em>.</p>\n\n<p>Here's the barebones of what I'm using:</p>\n\n<pre><code>#!/usr/bin/perl\n\n#whois.pl\n\nuse strict;\nuse IO::Socket;\n\nmy $domain_name = \"google.com\";\nmy $query_socket = new IO::Socket::INET(\n        PeerAddr =&gt; 'whois.iana.org',\n        PeerPort =&gt; 43,\n        Proto =&gt; 'tcp');\nprint $query_socket \"$domain_name \";\nprint $query_socket \"\\n\\r\";\nwhile(my $this_line = &lt;$query_socket&gt;) {\n        print $this_line;\n}\nclose($query_socket);\n</code></pre>\n\n<p>As seen above, the whois server used is <code>whois.iana.org</code>; this also works as expected with <code>whois.internic.net</code> as well. Only in the case of <code>whois.markmonitor.com</code>, the following error is seen:</p>\n\n<pre><code>$ perl whois.pl \nInvalid query\n</code></pre>\n\n<p>Could someone help shed more light on how can I perhaps get a more verbose output to check if there are any  errors in the query that is being made to the server?</p>\n\n<p>As an added test, a normal connection via <code>telnet</code> seems to be working as expected as seen below:</p>\n\n<pre><code>$ telnet whois.markmonitor.com 43\nTrying 64.124.14.21...\nConnected to whois.markmonitor.com.\nEscape character is '^]'.\ngoogle.com\nDomain Name: google.com\nRegistry Domain ID: 2138514_DOMAIN_COM-VRSN\nRegistrar WHOIS Server: whois.markmonitor.com\nRegistrar URL: http://www.markmonitor.com\nUpdated Date: 2015-06-12T10:38:52-0700\nCreation Date: 1997-09-15T00:00:00-0700\n......&lt;output truncated&gt;......\n</code></pre>\n\n<p>which leads me to believe that the actual connections to the server via port 43 are being accepted on the server's side.</p>\n"}, {"tags": ["perl", "quine"], "answers": [{"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 7, "last_activity_date": 1448804479, "last_edit_date": 1448804479, "creation_date": 1448804054, "answer_id": 33983375, "question_id": 33983281, "link": "https://stackoverflow.com/questions/33983281/how-does-the-following-quine-work/33983375#33983375", "title": "How does the following quine work?", "body": "<p>First, try to run it with warnings turned on:</p>\n\n<pre>$ perl -w p\nUnquoted string \"at\" may clash with future reserved word at p line 1.\nUnquoted string \"tmp\" may clash with future reserved word at p line 1.\nArgument \"tmp\" isn't numeric in division (/) at p line 1.\nArgument \"at\" isn't numeric in division (/) at p line 1.</pre>\n\n<p>The first two warnings are from the compile phase.</p>\n\n<p>Let's look at the <code>Deparse</code> output:</p>\n\n<pre>$ perl -MO=Deparse p\n'division'->Illegal('zero'->by('at' / 'tmp' / 'line'->p(1)));\np syntax OK</pre>\n\n<p>In essence, the value of <code>at</code> divided by <code>tmp</code> divided by the return value of another method invocation<code>p</code> is passed as an argument to the method <code>by</code> invoked on the class <code>'zero'</code>. <code>at</code> and <code>tmp</code> are considered to be strings, and their numeric values are zero. Therefore, <code>at/tmp</code> results in the illegal division by zero error.</p>\n\n<p>You will get the same error if you change the file's contents to</p>\n\n<blockquote>\n  <p><code>Stackoverflow hacker news one at /tmp/p line 1.</code></p>\n</blockquote>\n\n<p>If you are wondering how <code>Illegal division</code> becomes <code>'division'-&gt;Illegal</code>, see <a href=\"https://metacpan.org/pod/perlobj#Indirect-Object-Syntax\" rel=\"noreferrer\">indirect object syntax</a>, and <a href=\"http://modernperlbooks.com/mt/2009/08/the-problems-with-indirect-object-notation.html\" rel=\"noreferrer\">avoid using it</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -1, "last_activity_date": 1448804219, "creation_date": 1448804219, "answer_id": 33983403, "question_id": 33983281, "link": "https://stackoverflow.com/questions/33983281/how-does-the-following-quine-work/33983403#33983403", "title": "How does the following quine work?", "body": "<p>I would prefer to see you concentrating on improving the quality of your Perl code, rather than investigating obscure corners</p>\n\n<p>But the answer is that the line is parsed as</p>\n\n<pre><code>'division'-&gt;Illegal('zero'-&gt;by('at' / 'tmp' / 'line'-&gt;p(1)));\n</code></pre>\n\n<p>and Perl uses zero for <code>'at'</code> and <code>'tmp'</code> because they are not valid numeric strings, so the first action is to evaluate <code>0 / 0</code> which throws the error</p>\n"}], "owner": {"reputation": 695, "user_id": 3555136, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e6dcfdfbc04f0aa4a77dc44bda7063a7?s=128&d=identicon&r=PG&f=1", "display_name": "enitihas", "link": "https://stackoverflow.com/users/3555136/enitihas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 33983375, "answer_count": 2, "score": 1, "last_activity_date": 1448804479, "creation_date": 1448803390, "last_edit_date": 1448803514, "question_id": 33983281, "link": "https://stackoverflow.com/questions/33983281/how-does-the-following-quine-work", "title": "How does the following quine work?", "body": "<p>According to wikipedia :</p>\n\n<blockquote>\n  <p>A quine is a non-empty computer program which takes no input and produces a copy of its own source code as its only output</p>\n</blockquote>\n\n<p>I saw this piece of perl code and am not able to figure out how it works.</p>\n\n<blockquote>\n  <p>Save the following line in file <code>/tmp/p</code> and run the file as <code>perl /tmp/p</code>:</p>\n</blockquote>\n\n<pre><code>Illegal division by zero at /tmp/p line 1.\n</code></pre>\n\n<p>The output of perl /tmp/p is:</p>\n\n<blockquote>\n  <p><code>Illegal division by zero at /tmp/p line 1.</code></p>\n</blockquote>\n\n<p>How is the code working?</p>\n"}, {"tags": ["perl", "getopt"], "comments": [{"owner": {"reputation": 6592, "user_id": 3005251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5331f7e467aae3d581fe8bc814ef572?s=128&d=identicon&r=PG", "display_name": "bolav", "link": "https://stackoverflow.com/users/3005251/bolav"}, "edited": false, "score": 0, "creation_date": 1448789540, "post_id": 33980534, "comment_id": 55718445, "body": "I&#39;m unclear on what is not actually working? Do you want getopt_sample to work with passed parameters, and not use @ARGV if you pass it. Do you want to pass it like you do, or do you want to pass it parsed like you do?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1448795905, "post_id": 33980534, "comment_id": 55720228, "body": "Seems to work fine here (using Perl v5.20 on Ubuntu 14.10): <code>test.pl -mode=y a b c</code> gives output: <code>3\\n-mode=y a b c\\na b c</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1448798419, "post_id": 33980534, "comment_id": 55720903, "body": "@nichola7s: I&#39;ve made several chnages to your question in an atttempt to understand your meaning. Please would you check that&#39;s it&#39;s still correct?"}, {"owner": {"reputation": 1, "user_id": 5617129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d58bfc528c11bad18e2d316fd2c8bff2?s=128&d=identicon&r=PG&f=1", "display_name": "nichola7s", "link": "https://stackoverflow.com/users/5617129/nichola7s"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1448804996, "post_id": 33980534, "comment_id": 55722679, "body": "@Borodin, the edit looks OK. I didn&#39;t realize that @_ is for subroutine, and getopt only accept ARGV. I attempt to use getopt to handle input for subroutine actually, can getopt use variable rather than ARGV? Thanks, Nicholas"}, {"owner": {"reputation": 1, "user_id": 5617129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d58bfc528c11bad18e2d316fd2c8bff2?s=128&d=identicon&r=PG&f=1", "display_name": "nichola7s", "link": "https://stackoverflow.com/users/5617129/nichola7s"}, "edited": false, "score": 0, "creation_date": 1448805483, "post_id": 33980534, "comment_id": 55722811, "body": "Test command line: ./test.pl"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5617129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d58bfc528c11bad18e2d316fd2c8bff2?s=128&d=identicon&r=PG&f=1", "display_name": "nichola7s", "link": "https://stackoverflow.com/users/5617129/nichola7s"}, "edited": false, "score": 0, "creation_date": 1448804865, "post_id": 33981377, "comment_id": 55722643, "body": "Thanks for the answer, I used to use perl for quick and dirty work, and not quite understand the difference of ARGV and @_. After studying the doc, ARGV is from cmd line, shared in main script and subroutine, @_ is for subroutine. That&#39;s why my subroutine failed to parse the the input. &quot;@ARGV = (@ARGV, @_);&quot; works if I want to use getopt in subroutine. Is there any graceful way to do same thing? Can getopt accept other variable as input? Maybe other package is prefered to do this kind of thing?  Thanks, Nicholas"}], "tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": -2, "last_activity_date": 1448790166, "creation_date": 1448790166, "answer_id": 33981377, "question_id": 33980534, "link": "https://stackoverflow.com/questions/33980534/argv-is-empty-in-perl-script-when-package-is-using-getopt/33981377#33981377", "title": "ARGV is empty in perl script when package is using getopt", "body": "<p>If you're not finding anything in <code>@ARGV</code> when you run your test script, that's because you're not passing any command-line arguments to the test script:</p>\n\n<pre><code>$ ./test_script \n-1\n\n\n$ ./test_script foo bar baz -h\n3\nfoo bar baz -h\nhelp\nfoo bar baz\n</code></pre>\n\n<p><code>&amp;getopt_sample::getopt_sample ('-mode' =&gt; \"m0\", '-mode1' =&gt; \"m1\", '-h');</code> <em>does not</em> add anything to <code>@ARGV</code>.  The parameters to a function call are placed in <code>@_</code>, not <code>@ARGV</code>.</p>\n\n<p>If you want your module to accept input both from <code>@ARGV</code> and from parameters that the sub is called with, you can use <code>@ARGV = (@ARGV, @_);</code> in the sub to add those params to <code>@ARGV</code>.</p>\n\n<p>Also, don't prefix user-defined sub calls with <code>&amp;</code>.  It's a Perl 4 practice which is no longer required in Perl 5 and has side-effects which you probably don't know about and, therefore, don't want.</p>\n"}], "owner": {"reputation": 1, "user_id": 5617129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d58bfc528c11bad18e2d316fd2c8bff2?s=128&d=identicon&r=PG&f=1", "display_name": "nichola7s", "link": "https://stackoverflow.com/users/5617129/nichola7s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 381, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1448798365, "creation_date": 1448782949, "last_edit_date": 1448798365, "question_id": 33980534, "link": "https://stackoverflow.com/questions/33980534/argv-is-empty-in-perl-script-when-package-is-using-getopt", "title": "ARGV is empty in perl script when package is using getopt", "body": "<p>I'm using <code>Getopt::Long</code> to handle the Perl script input, the submodule created is in a package and uses <code>Getopt::Long</code> to handle input.</p>\n\n<p>When this submodule is called in a test Perl script, <code>@ARGV</code> is empty.</p>\n\n<p>Please help check what's wrong with my script?</p>\n\n<p>When the submodule is not in a package, and called from the shell, <code>@ARGV</code> is correct and it works well. </p>\n\n<p>I read through <a href=\"http://metacpan.org/module/Getopt::Long\" rel=\"nofollow\">the <code>Getopt::Long</code> documentation</a> and googled before asking. Unfortunately I found no answer.</p>\n\n<p>I use the <code>pass_through</code> feature of <code>Getopt::Long</code> because I want to pass it to a leaf submodule.</p>\n\n<pre><code>package getopt_sample;\n\nuse Getopt::Long qw(:config pass_through );\nuse FindBin qw($Bin $Script $Dir $RealBin $RealScript $RealDir);\n\nsub getopt_sample {\n\n    my ( $mode, $mode1, $help );\n    $mode           = \"\";\n    $mode1          = \"\";\n\n    print \"$#ARGV\\n\";\n    print \"@ARGV\\n\";\n\n    Getopt::Long::GetOptions(\n      \"mode=s\"              =&gt; \\$mode,\n      \"mode1=s\"             =&gt; \\$mode1,\n      \"help|h\"              =&gt; \\$help\n    );\n\n    if ($help) {\n        print \"help\\n\";\n    }\n\n    print \"@ARGV\\n\";      ### All the remaining unknown options will be left in $ARGV when pass_through\n}\n\n1;\n</code></pre>\n\n<p>Perl test script:</p>\n\n<pre><code>#!/usr/local/bin/perl\nuse lib './';\nuse getopt_sample;\n\n  &amp;getopt_sample::getopt_sample (\n    '-mode'     =&gt; \"m0\",\n    '-mode1'    =&gt; \"m1\",\n    '-h'\n  );\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "is_accepted": false, "score": 0, "last_activity_date": 1448797643, "creation_date": 1448797643, "answer_id": 33982420, "question_id": 33980272, "link": "https://stackoverflow.com/questions/33980272/perl-array-from-csv-file-creating-newline-in-unexpected-place/33982420#33982420", "title": "perl array from csv file creating newline in unexpected place", "body": "<p>This is an issue with end of line characters.</p>\n\n<p>There are three conventions for marking the end of a line: with <code>\\n</code> on Unix, <code>\\r\\n</code> on Windows and <code>\\r</code> on Mac. It looks as though your script is assuming the Mac convention while input and output use the Windows convention.</p>\n\n<p>So after reading the input, a leading <code>\\n</code> appears on all lines except the first. As long as this is also the case with the output lines prior to composing them with <code>\\r</code>, you end up with an output file with perfectly <code>\\r\\n</code>-delimited lines.  Clearly it's better to make your script wary of what line ending convention the input is using and ensure it uses the same for splitting the lines and composing the output.</p>\n"}, {"tags": [], "owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "is_accepted": true, "score": 1, "last_activity_date": 1448889988, "creation_date": 1448889988, "answer_id": 33999735, "question_id": 33980272, "link": "https://stackoverflow.com/questions/33980272/perl-array-from-csv-file-creating-newline-in-unexpected-place/33999735#33999735", "title": "perl array from csv file creating newline in unexpected place", "body": "<p>Since you are running this on Windows, have you considered using Win32::OLE instead?</p>\n\n<pre><code>use strict;\n\nuse Win32::OLE;\n\nmy $app = Win32::OLE-&gt;GetActiveObject('Excel.Application')\n        || Win32::OLE-&gt;new('Excel.Application', 'Quit');\n\nmy $wb = $app-&gt;Workbooks-&gt;Open(\"C:/Temp/testing_file.xlsx\");\n\nmy $ws = $wb-&gt;ActiveSheet;\n\nmy $max_row = $ws-&gt;UsedRange-&gt;Rows-&gt;Count;\nmy $max_col = $ws-&gt;UsedRange-&gt;Columns-&gt;Count;\n\nmy ($row, %already) = (1);\nwhile ($row &lt;= $max_row) {\n\n  my ($col, @output) = (1);\n\n  while ($col &lt;= $max_col) {\n    my $val = $ws-&gt;Cells($row, $col)-&gt;{Text};\n\n    if ($val =~ /[,\\t]/) {\n      $val =~ tr/,//d;\n      $val =~ tr/\\t/,/;\n      $ws-&gt;Cells($row, $col)-&gt;{Value} = $val;\n    }\n    @output[$col - 1] = $val;\n    $col++;\n  }\n\n  if ($already{join \"|\", @output}++) {\n    $ws-&gt;Rows($row)-&gt;EntireRow-&gt;Delete;\n    $max_row--;\n  } else {\n    $row++;    \n  }\n}\n\n$wb-&gt;SaveAs(\"C:\\\\temp\\\\testing_filet.xlsx\");\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 3360439, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/63da06daffec34266d0b72030f141820?s=128&d=identicon&r=PG&f=1", "display_name": "user3360439", "link": "https://stackoverflow.com/users/3360439/user3360439"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 33999735, "answer_count": 2, "score": 1, "last_activity_date": 1448889988, "creation_date": 1448780334, "question_id": 33980272, "link": "https://stackoverflow.com/questions/33980272/perl-array-from-csv-file-creating-newline-in-unexpected-place", "title": "perl array from csv file creating newline in unexpected place", "body": "<p>Hi I have a few scripts that convert an xlsx file to a tab seperated file, which then remove any commas, duplicates and then splits it by commas. (i do this to make sure users have not put any commas in a colomn)\n I then do some stuff. and then convert it back to an xlsx file. This has always worked fine. But instead of opening and closing files all the time i thought i would push the file to an array and then convert it to an xlsx at the end. Unfortunatly when i try and convert back to an xlsx file it is creating a newline in the space between the name. If i OUTPUT to a csv file then Open it and convert to an xlsx file it works fine. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Spreadsheet::BasicRead;\nuse Excel::Writer::XLSX;\nlocal $\" = \"'\\n'\";      \nopen( STDERR, \"&gt;&amp;STDOUT\" );\n#covert to csv \nmy $xlsx_WSD = ( \"C:\\\\Temp\\\\testing_file.xlsx\"),, 1;\nmy @csvtemp;\n\n        if ( -e $xlsx_WSD ) {\nmy $ss   = new Spreadsheet::BasicRead($xlsx_WSD) or die;\n    my $col = '';\n    my $row  = 0;\n    while ( my $data = $ss-&gt;getNextRow() ) {\n        $row++;\n        $col= join( \"\\t\", @$data );\n            push @csvtemp,  $col . \"\\n\" if ( $col ne \"\" );\n    }\n}   \n        else {\n            print \"    C:\\\\Temp\\\\testing_file.xlsx file EXISTS ...!!\\n\";\n            print \"    please investigate and use the restore option if required !..\\n\";\n    exit;\n}\n;\nmy @arraynew;\nmy %seen;\nour $Header_row = shift (@csvtemp);  \n  foreach (@csvtemp){\nchomp;\n     $_ =~ s/,//g;                                      \n     $_ =~ s/\\t/,/g;                                    \n\n        #   print $_ . \"\\n\" if !$seen{$_}++ ;\n            push @arraynew, $_ . \"\\n\" if !$seen{$_}++ ;    #remove any dupes\n\n}\n\n\n#covert back to  xlsx \nmy $workbook  = Excel::Writer::XLSX-&gt;new(\"C:\\\\Temp\\\\testing_filet.xlsx\");\nmy $worksheet = $workbook-&gt;add_worksheet();\n\nmy ( $x, $y ) = ( 0, 0 );\n    while (&lt;@arraynew&gt;) {\n\n\n\n\nmy @list = split /,/;\n        foreach my $c (@list) {\n                        $worksheet-&gt;write( $x, $y++, $c );\n    }\n                        $x++;\n                        $y = 0;\n}\n\n\n\n__DATA__\n\nAnimal  keeper  M/F Years   START DATE  FRH FSM\nGIRAFFE JAMES LE    M   5   10/12/2007      Y\nHIPPO   JACKIE LEAN F   6   11/12/2007      Y\nZEBRA   JAMES LEHERN    M   7   12/12/2007      Y\nGIRAFFE AMIE CAHORT M   5   13/12/2012      Y\nGIRAFFE MICKY JAMES M   5   14/06/2007      Y\nMEERKAT JOHN JONES  M   9   15/12/2007  v   v\nLEOPPARD    JIM LEE M   8   16/12/2002      \n\n\nunexpected result \n\nGIRAFFE JAMES               \nLE  M   5   10/12/2007      Y\n\"\nHIPPO\"  JACKIE              \nLEAN    F   6   11/12/2007      Y\n\"\nZEBRA\"  JAMES               \nLEHERN  M   7   12/12/2007      Y\n\"\nGIRAFFE\"    AMIE                \nCAHORT  M   5   13/12/2012      Y\n\"\nGIRAFFE\"    MICKY               \nJAMES   M   5   14/06/2007      Y\n\"\nMEERKAT\"    JOHN                \nJONES   M   9   15/12/2007  v   v\n\"\nLEOPPARD\"   JIM             \nLEE M   8   16/12/2002\n</code></pre>\n"}, {"tags": ["regex", "macos", "perl"], "answers": [{"tags": [], "owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "is_accepted": false, "score": 2, "last_activity_date": 1448775185, "creation_date": 1448775185, "answer_id": 33979734, "question_id": 33979470, "link": "https://stackoverflow.com/questions/33979470/perl-regex-q-mac-os-x/33979734#33979734", "title": "perl regex \\Q mac os x", "body": "<p><code>$%</code> a special variable in <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow\"><code>perlvar</code></a> and is being interpolated.</p>\n\n<p>You can confirm this by simply outputting your LHS as a string:</p>\n\n<pre><code>$ perl -MData::Dump -E 'dd \"\\Q!@#$%^&amp;*()\\E\"'\n\"\\\\!\\\\\\@\\\\#0\\\\^\\\\&amp;\\\\*\\\\(\\\\)\"\n</code></pre>\n\n<p>To fix you just need to escape the <code>$</code> in the LHS of your regex:</p>\n\n<pre><code>perl -pe 's/\\Q!@#\\$%^&amp;*()\\E/special characters/g' 'hello.txt' &gt; 'hello_new.txt'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 2, "last_activity_date": 1448777544, "last_edit_date": 1448777544, "creation_date": 1448776717, "answer_id": 33979879, "question_id": 33979470, "link": "https://stackoverflow.com/questions/33979470/perl-regex-q-mac-os-x/33979879#33979879", "title": "perl regex \\Q mac os x", "body": "<p><a href=\"http://perldoc.perl.org/perlreref.html#ESCAPE-SEQUENCES\" rel=\"nofollow\">perldoc perlreref</a> notes that</p>\n\n<blockquote>\n  <p><code>\\Q</code> Disable pattern metacharacters until <code>\\E</code></p>\n</blockquote>\n\n<p>but it appears that <code>$</code> is not sufficient of a pattern metacharacter; it is an everything else metacharacter introducing variable references, and most of the special characters combine with <code>$</code> to make a special variable per <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow\">perldoc perlvar</a>.  So, you will need to escape <code>$</code> anyway if you write it verbatim into a regex, even within <code>\\Q\u2026\\E</code>.</p>\n\n<p>Or you can use variations on this theme:</p>\n\n<pre><code>$ echo '!@#$%^&amp;*()' |\n&gt; perl -l -e '$rx = q{!@#$%^&amp;*()}; $qx = qr/\\Q$rx\\E/; print $qx;\n&gt;             while (&lt;&gt;) { s/$qx/special characters/; print; }'\n(?^:\\!\\@\\#\\$\\%\\^\\&amp;\\*\\(\\))\nspecial characters\n$\n</code></pre>\n\n<p>The first line of output is the regex, where you can see that all the characters, including <code>$</code>, are escaped with backslashes.  The second line shows that when the\ninput is the string of characters, the pattern is recognized and replaced.</p>\n\n<p>Tested with home-built Perl 5.22.0 and system-provided Perl 5.18.2 on Mac OS X 10.11.1 El Capitan \u2014 with the same output on both.  And (home-built) Perl 5.8.9 gives a slightly different output for the printable regex:</p>\n\n<pre><code>(?-xism:\\!\\@\\#\\$\\%\\^\\&amp;\\*\\(\\))\n</code></pre>\n\n<p>Note that adapting this to your original regex yields:</p>\n\n<pre><code>$ perl -l -e '$qx = qr/\\Q!@#$%^&amp;*()\\E/; print $qx'\n(?^:\\!\\@\\#0\\^\\&amp;\\*\\(\\))\n$\n</code></pre>\n\n<p>The <code>$</code> and <code>%</code> are replaced by <code>0</code>.  That's because <code>$%</code> is also known as <code>$PAGE_FORMAT_NUMBER</code>:</p>\n\n<blockquote>\n  <p><code>$%</code><br>\n  The current page number of the currently selected output channel.<br>\n  Mnemonic: % is page number in nroff.</p>\n</blockquote>\n"}], "owner": {"reputation": 21, "user_id": 1038746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7681888ecfb59d6c83df693899517dc4?s=128&d=identicon&r=PG", "display_name": "Steve Thompson", "link": "https://stackoverflow.com/users/1038746/steve-thompson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1448777544, "creation_date": 1448772042, "last_edit_date": 1448775102, "question_id": 33979470, "link": "https://stackoverflow.com/questions/33979470/perl-regex-q-mac-os-x", "title": "perl regex \\Q mac os x", "body": "<p>I'm trying to do a text search&amp;replace using perl in the os x terminal.  I'm trying to replace a string of special characters \"!@#$%^&amp;*()\" with the string 'special characters', using this line:</p>\n\n<pre><code>perl -p -e 's/\\Q!@#$%^&amp;*()\\E/special characters/g' 'hello.txt' &gt; 'hello_new.txt'\n</code></pre>\n\n<p>But it's not working. Does the \\Q not work on OS X? It's supposed to disable regex pattern matching. I don't want to have to escape the characters myself.  What am I doing wrong?</p>\n"}, {"tags": ["perl", "command", "refresh", "lines", "backspace"], "comments": [{"owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1448755204, "post_id": 33977834, "comment_id": 55712120, "body": "You could use <a href=\"http://stackoverflow.com/questions/2907321/ncurses-and-perl-any-guides\">NCurses</a> or write <a href=\"https://en.wikipedia.org/wiki/ANSI_escape_code\" rel=\"nofollow noreferrer\">ANSI codes</a> if your terminal supports it (they likely do)."}], "answers": [{"comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1448804037, "post_id": 33983282, "comment_id": 55722414, "body": "Oops, not perl code. Well, <code>qx{tput ...}</code> or there&#39;s bound to be a module"}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 1, "last_activity_date": 1448803402, "creation_date": 1448803402, "answer_id": 33983282, "question_id": 33977834, "link": "https://stackoverflow.com/questions/33977834/multiple-updating-lines-in-perl/33983282#33983282", "title": "Multiple Updating Lines in Perl", "body": "<p>For multiple lines, the <code>tput</code> command is helpful. A demo:</p>\n\n<pre><code>clear\nfor ((i=1; i&lt;=4; i++)); do \n    tput cup 0 0\n    printf \"%s$i\\n\" get shwifty in here\n    sleep 1\ndone\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 5164527, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/10153040192953595/picture?type=large", "display_name": "driedupsharpie", "link": "https://stackoverflow.com/users/5164527/driedupsharpie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448803402, "creation_date": 1448754940, "question_id": 33977834, "link": "https://stackoverflow.com/questions/33977834/multiple-updating-lines-in-perl", "title": "Multiple Updating Lines in Perl", "body": "<p>The output I'm trying to accomplish is something along the lines of:</p>\n\n<pre><code>     line1 = get\n     line2 = shwifty\n     line3 = in\n     line4 = here\n</code></pre>\n\n<p>...and in the command-line be refreshing all of those strings without continuously reposting new lines! I can get this working a few ways IF ONLY ONE LINE IS USED but how would I write over or backspace past MULTIPLE lines??</p>\n\n<p>Right now, the command prompt will yield:</p>\n\n<pre><code>     line1 = get\n     line2 = shwifty\n     line3 = in\n     line4 = here\n     line1 = get2\n     line2 = shwifty2\n     line3 = in2\n     line4 = here2\n</code></pre>\n\n<p>how can I just \"refresh\" the four lines that I want?</p>\n"}, {"tags": ["perl", "oop"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1448744133, "post_id": 33976036, "comment_id": 55708984, "body": "What do you mean by &quot;this doesn&#39;t work&quot;? <code>$obj-&gt;$method(@args)</code> is valid Perl."}], "answers": [{"tags": [], "owner": {"reputation": 25590, "user_id": 59135, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/90c563665ec03a1b9e80671bb95deeed?s=128&d=identicon&r=PG", "display_name": "daotoad", "link": "https://stackoverflow.com/users/59135/daotoad"}, "is_accepted": false, "score": 2, "last_activity_date": 1448752341, "last_edit_date": 1448752341, "creation_date": 1448745340, "answer_id": 33976536, "question_id": 33976036, "link": "https://stackoverflow.com/questions/33976036/how-do-i-iterate-over-methods-for-perl-object/33976536#33976536", "title": "How do I iterate over methods for Perl object", "body": "<p>According to <a href=\"http://perldoc.perl.org/perlobj.html#Method-Call-Variations\" rel=\"nofollow\">perlobj</a> method calls can be made using a string variable.</p>\n\n<pre><code>$object-&gt;$method( @args );\n</code></pre>\n\n<p>So your <code>foreach</code> loop should have worked fine.  Or this one, which is much less wordy:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $hex = Hexagram-&gt;new();\ngather_info( $hex, $_ )\n    for qw/top bot chinese title meaning/;\n\nsub gather_info {\n    my ($hex, $method) = @_;\n\n    print \"What is $method?\\n\";\n    my $response = &lt;STDIN&gt;;\n    chomp $response;\n    $hex-&gt;$method( $response );\n}\n</code></pre>\n\n<p>Make sure you have <code>strict</code> and <code>warnings</code> enabled and try again.  Update you post with errors, etc.</p>\n"}], "owner": {"reputation": 261, "user_id": 1973116, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/aa3807757c3cdae162a0184e8c434d0b?s=128&d=identicon&r=PG", "display_name": "A.Ellett", "link": "https://stackoverflow.com/users/1973116/a-ellett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1508586713, "creation_date": 1448742067, "last_edit_date": 1508586713, "question_id": 33976036, "link": "https://stackoverflow.com/questions/33976036/how-do-i-iterate-over-methods-for-perl-object", "title": "How do I iterate over methods for Perl object", "body": "<p>I've created an Object such as</p>\n\n<pre><code>my $hex = Hexagram-&gt;new();\n</code></pre>\n\n<p>and it has various methods:</p>\n\n<pre><code>top\nbot\nchinese\ntitle\nmeaning\n</code></pre>\n\n<p>This object will be created numerous times and each time I need to gather and test information for each of the above methods.</p>\n\n<p>I would like to do something like</p>\n\n<pre><code>foreach my $method ( qw/top bot chinese title meaning/ )\n  {\n     &amp;gather_info($hex,$method);\n  }\n</code></pre>\n\n<p>and then have something like</p>\n\n<pre><code>sub gather_info {\n  my ($hex,$method) = @_;\n  print \"What is the $method? \";\n  my $response = &lt;STDIN&gt;;\n  chomp $response;\n  $hex-&gt;${method}($reponse);\n  .... and other actions ....\n  }\n</code></pre>\n\n<p>But this doesn't work.  Instead, for each method I seem to have to write out the basic code structure again and again which just seems plain wasteful.</p>\n\n<p>I've also tried something where I try to pass a reference to the method call such as in </p>\n\n<pre><code>foreach my $ra ( [\\$hex-&gt;top, \"top\"],\n                 [\\$hex-&gt;bot, \"bot\"],....)\n  {\n     my ($object_method, $name) = @{$ra};\n     &amp;rgather_info($object_method, $name);\n  }\n</code></pre>\n\n<p>where</p>\n\n<pre><code>sub $gather_info {\n  my ($rhex, $name) = @_;\n  print \"What is the $name?\";\n  my $response = &lt;STDIN&gt;;\n  chomp $response;\n  &amp;{$rhex}($response);\n  .... and other actions ....\n}\n</code></pre>\n\n<p>But this time I get an error about </p>\n\n<pre><code>Not a CODE reference at &lt;program name&gt; line &lt;line number&gt;,....\n</code></pre>\n\n<p>Any suggestions on how I can do this?</p>\n"}, {"tags": ["perl", "sockets", "serialization", "hash", "deserialization"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1448738331, "post_id": 33975284, "comment_id": 55707123, "body": "Have you tried printing the serialized hash in both the server and client and compare the outputs?"}, {"owner": {"reputation": 1828, "user_id": 2835243, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Beint.jpg?s=128&g=1", "display_name": "actaram", "link": "https://stackoverflow.com/users/2835243/actaram"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1448739365, "post_id": 33975284, "comment_id": 55707455, "body": "@choroba I did compare them, but while debugging. Their values were kind of incomprehensible, so I thought it was normal since they were serialized. The following pictures show the outputs of the serialized hashes in both the client and the server. However, it&#39;s another hash than the one in the question (username and password). But the hash is serialized/deserialized the same way. Here is a <a href=\"http://i.imgur.com/g5IWcH1.png\" rel=\"nofollow noreferrer\">picture of the client serialized hash</a> and <a href=\"http://i.imgur.com/PFTg9zE.png\" rel=\"nofollow noreferrer\">server serialized hash</a>."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1448740704, "post_id": 33975284, "comment_id": 55707859, "body": "You only read one line from the <code>$new_socket</code>, but the serialized hash seems to have several lines."}, {"owner": {"reputation": 1828, "user_id": 2835243, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Beint.jpg?s=128&g=1", "display_name": "actaram", "link": "https://stackoverflow.com/users/2835243/actaram"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1448741049, "post_id": 33975284, "comment_id": 55707985, "body": "@choroba ahh.. I see.. even though I called my var <code>line</code>, I thought <code>$line = &lt;$new_socket&gt;;</code> would read all it is sent by the client and not only the first line. Is there a way to send the serialized hash through one line only?"}], "answers": [{"tags": [], "owner": {"reputation": 6592, "user_id": 3005251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5331f7e467aae3d581fe8bc814ef572?s=128&d=identicon&r=PG", "display_name": "bolav", "link": "https://stackoverflow.com/users/3005251/bolav"}, "is_accepted": true, "score": 1, "last_activity_date": 1448753613, "creation_date": 1448753613, "answer_id": 33977692, "question_id": 33975284, "link": "https://stackoverflow.com/questions/33975284/how-to-serialize-and-deserialize-a-hash-sent-to-a-socket/33977692#33977692", "title": "How to serialize and deserialize a hash sent to a socket?", "body": "<p>As @choroba says in the comments you only read one line in the server, although you can fix it by reading more lines in the server, you might want to have newline as a record delimiter. </p>\n\n<p>You can get the freeze to only use one line by removing the newlines you read from username and password: <code>chomp($username);</code> and <code>chomp($password);</code></p>\n\n<p>You can also encode the newlines, although this is a bit hackish, and not fool proof. To encode: <code>$serializedInfos =~ s/\\n/\\\\n/g;</code> to decode: <code>$line =~ s/\\\\n/\\n/g;</code></p>\n\n<p>Or you could change to a serialization that only uses one line, like <code>JSON</code>, instead of <code>Storage</code> that you are currently using.</p>\n"}], "owner": {"reputation": 1828, "user_id": 2835243, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Beint.jpg?s=128&g=1", "display_name": "actaram", "link": "https://stackoverflow.com/users/2835243/actaram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "accepted_answer_id": 33977692, "answer_count": 1, "score": 2, "last_activity_date": 1448753613, "creation_date": 1448737547, "question_id": 33975284, "link": "https://stackoverflow.com/questions/33975284/how-to-serialize-and-deserialize-a-hash-sent-to-a-socket", "title": "How to serialize and deserialize a hash sent to a socket?", "body": "<p>I am writing two scripts: the client and the server. The client connects itself to the server and has to enter credentials. I want to send those credentials trough a hash, so I serialize them, send them to the server socket and then deserialize the hash in the server script. </p>\n\n<p>Here is the relevant server script code:</p>\n\n<pre class=\"lang-pl prettyprint-override\"><code>$server = IO::Socket::INET-&gt;new( Proto =&gt; tcp,\n    LocalPort =&gt; 25,\n    Listen =&gt; SOMAXCONN,\n    Reuse =&gt; 1) or die \"cannot connect to port $port at localhost\";\nwhile (my $new_socket = $serveur-&gt;accept())\n{\n    $new_socket-&gt;autoflush(1);\n    $line = &lt;$new_socket&gt;;\n    my %hashUserInfos = %{thaw($line)};\n\n    my $username = $hashInfosUtilisateur{'username'};\n    my $password = $hashInfosUtilisateur{'password'};\n}\n</code></pre>\n\n<p>And here is the relevant client script code:</p>\n\n<pre class=\"lang-pl prettyprint-override\"><code>my $connection = IO::Socket::INET-&gt;new(Proto =&gt; $protocol,\n    PeerAddr =&gt; $destination,\n    PeerPort =&gt; $port) or die \"Impossible de se connecter sur le port $port a l'adresse $destination\";\n\nprint \"Nom d'usager:\\n\";\n$username = &lt;STDIN&gt;;\nprint \"Mot de passe:\\n\";\n\nmy $password = &lt;STDIN&gt;;\nmy $hashedPasword = md5_hex($password);\n\nmy %userInfos = ('username' =&gt; $username, 'password' =&gt; $hashedPassword);\nmy $serializedInfos = freeze \\%userInfos;\n\nprint $connection $serializedInfos;\n</code></pre>\n\n<p>The problem I'm facing is that when I'm trying to deserialize the hash:</p>\n\n<pre><code>my %hashUserInfos = %{thaw($line)};\n</code></pre>\n\n<p>I'm getting the error:</p>\n\n<blockquote>\n  <p>Magic number checking on storable string failed</p>\n</blockquote>\n\n<p>I also tried serializing my hash with <code>nfreeze</code>, but in that case, I get this error instead of the one above:</p>\n\n<blockquote>\n  <p>Can't use an undefined values as a HASH reference</p>\n</blockquote>\n\n<p>What's the mistake I'm making here?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1448733287, "post_id": 33974230, "comment_id": 55705244, "body": "<code>perl -i -ne &#39;&#47;abc1[234567]&#47; or print&#39; filename</code>"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 105, "user_id": 5615685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e1e3dff4f2c5eaf65c4ae472700707c?s=128&d=identicon&r=PG&f=1", "display_name": "shiva1987", "link": "https://stackoverflow.com/users/5615685/shiva1987"}, "edited": false, "score": 0, "creation_date": 1448794900, "post_id": 33974526, "comment_id": 55719917, "body": "Ideally if you have an answer that meets your needs, you should accept it. (that little tick by the side)"}, {"owner": {"reputation": 105, "user_id": 5615685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e1e3dff4f2c5eaf65c4ae472700707c?s=128&d=identicon&r=PG&f=1", "display_name": "shiva1987", "link": "https://stackoverflow.com/users/5615685/shiva1987"}, "edited": false, "score": 0, "creation_date": 1448796477, "post_id": 33974526, "comment_id": 55720368, "body": "Sorry ,I didn&#39;t know that ,I am new here  ,thanks for the tip."}, {"owner": {"reputation": 101, "user_id": 4396710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/775e4b5b5ba3b164d689f54cbdff0ae0?s=128&d=identicon&r=PG&f=1", "display_name": "goro", "link": "https://stackoverflow.com/users/4396710/goro"}, "edited": false, "score": 0, "creation_date": 1536938878, "post_id": 33974526, "comment_id": 91617143, "body": "How can I delete the next line of this match?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1537174498, "post_id": 33974526, "comment_id": 91672203, "body": "With a different approach I&#39;m afraid. It&#39;d be worth asking that as a separate question. The above only works line by line."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 14, "last_activity_date": 1448733320, "creation_date": 1448733320, "answer_id": 33974526, "question_id": 33974230, "link": "https://stackoverflow.com/questions/33974230/perl-one-liner-deleting-a-line-with-pattern-matching/33974526#33974526", "title": "Perl one-liner: deleting a line with pattern matching", "body": "<p>Yes, it's the fact you're using single quotes. It means that <code>$x</code> is being interpreted literally. </p>\n\n<p>Of course, you're <em>also</em> doing it very inefficiently, because you're processing each file multiple times. </p>\n\n<p>If you're looking to remove lines <code>abc12</code> to <code>abc17</code> you can do this all in one go:</p>\n\n<pre><code>perl -n -i.bak -e 'print unless m/abc1[234567]/' filename\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4441, "user_id": 3025856, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/68e9ff807fadeaa41ece5dcf761a03c1?s=128&d=identicon&r=PG", "display_name": "Jeremy Caney", "link": "https://stackoverflow.com/users/3025856/jeremy-caney"}, "edited": false, "score": 2, "creation_date": 1609190723, "post_id": 65483632, "comment_id": 115773648, "body": "Welcome, and thank you for contributing an answer. Would you kindly edit your answer to to include an explanation of your code? That will help future readers better understand what is going on, and especially those members of the community who are new to the language and struggling to understand the concepts."}], "tags": [], "owner": {"reputation": 1, "user_id": 14903484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba5f701c254924e5fb00b7eead258c71?s=128&d=identicon&r=PG", "display_name": "EvilGrayHAM-OP", "link": "https://stackoverflow.com/users/14903484/evilgrayham-op"}, "is_accepted": false, "score": -3, "last_activity_date": 1609259995, "last_edit_date": 1609259995, "creation_date": 1609187097, "answer_id": 65483632, "question_id": 33974230, "link": "https://stackoverflow.com/questions/33974230/perl-one-liner-deleting-a-line-with-pattern-matching/65483632#65483632", "title": "Perl one-liner: deleting a line with pattern matching", "body": "<p>Try this</p>\n<pre><code>perl -n -i.bak -e 'print unless m/abc1[2-7]/' filename\n</code></pre>\n<p>using the range [2-7] only removes the need to type [234567] which has the effect of saving you three keystrokes.</p>\n<p>man 1 bash: <strong>Pattern Matching</strong></p>\n<p><strong>[...]</strong> Matches any one of the enclosed characters. A pair of characters separated by a <em>hyphen</em> denotes a range expression; any character that sorts between those two characters, inclusive, using the current locale's collating sequence and character set, is matched. If the first character following the <strong>[</strong> is a <strong>!</strong> or a <strong>^</strong> then any character not enclosed is matched.</p>\n<p>A <strong>-</strong> may be matched by including it as the first or last character in the set. A <strong>]</strong> may be matched by including it as the first character in the set.</p>\n"}], "owner": {"reputation": 105, "user_id": 5615685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e1e3dff4f2c5eaf65c4ae472700707c?s=128&d=identicon&r=PG&f=1", "display_name": "shiva1987", "link": "https://stackoverflow.com/users/5615685/shiva1987"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8917, "favorite_count": 2, "accepted_answer_id": 33974526, "answer_count": 2, "score": 8, "last_activity_date": 1609259995, "creation_date": 1448731633, "last_edit_date": 1502544999, "question_id": 33974230, "link": "https://stackoverflow.com/questions/33974230/perl-one-liner-deleting-a-line-with-pattern-matching", "title": "Perl one-liner: deleting a line with pattern matching", "body": "<p>I am trying to delete bunch of lines in a file if they match with a particular pattern  which is variable.</p>\n\n<p>I am trying to delete a line which matches with abc12, abc13, etc.</p>\n\n<p>I tried writing a C-shell script, and this is the code:</p>\n\n<pre><code>    **!/bin/csh\n    foreach $x (12 13 14 15 16 17)\n    perl -ni -e 'print unless /abc$x/' filename\n    end**\n</code></pre>\n\n<p>This doesn't work, but when I use the one-liner without a variable (abc12), it works.</p>\n\n<p>I am not sure if there is something wrong with the pattern matching or if there is something else I am missing.</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1448728515, "post_id": 33973515, "comment_id": 55703631, "body": "Maybe this could be used: <a href=\"http://stackoverflow.com/questions/27637326/perl-custom-keystroke-handlers\">Perl - custom keystroke handlers</a>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1448728766, "post_id": 33973515, "comment_id": 55703720, "body": "Perl Cookbook describes a solution involving <a href=\"http://p3rl.org/IO::Handle\" rel=\"nofollow noreferrer\">IO::Handle</a>, <a href=\"http://p3rl.org/IO::Select\" rel=\"nofollow noreferrer\">IO::Select</a>, and <a href=\"http://p3rl.org/Symbol\" rel=\"nofollow noreferrer\">Symbol</a>."}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1448729058, "post_id": 33973515, "comment_id": 55703807, "body": "This <a href=\"http://www.perlmonks.org/?node_id=282322\" rel=\"nofollow noreferrer\">discussion</a> may help you."}], "answers": [{"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 1, "last_activity_date": 1448732594, "last_edit_date": 1448732594, "creation_date": 1448731948, "answer_id": 33974284, "question_id": 33973515, "link": "https://stackoverflow.com/questions/33973515/waiting-for-a-defined-period-of-time-for-the-input-in-perl/33974284#33974284", "title": "Waiting for a defined period of time for the input in Perl", "body": "<p>You can use <a href=\"http://perldoc.perl.org/functions/alarm.html\" rel=\"nofollow\"><code>alarm()</code></a>,</p>\n\n<pre><code>use strict;\nuse warnings;\n\nsub timeout {\n\n  my ($f, $sec) = @_;\n\n  return eval {\n    local $SIG{ALRM} = sub { die };\n    alarm($sec);\n    $f-&gt;();\n    alarm(0);\n    1;\n  };\n}\n\nmy $text;\nmy $ok = timeout(sub{ $text = &lt;STDIN&gt;; }, 10);\n\nif ($ok) {\n  print \"input: $text\";\n}\nelse {\n  print \"timeout occurred\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1448733919, "last_edit_date": 1448733919, "creation_date": 1448733580, "answer_id": 33974567, "question_id": 33973515, "link": "https://stackoverflow.com/questions/33973515/waiting-for-a-defined-period-of-time-for-the-input-in-perl/33974567#33974567", "title": "Waiting for a defined period of time for the input in Perl", "body": "<p><a href=\"http://perldoc.perl.org/IO/Select.html\" rel=\"nofollow\"><code>IO::Select</code></a> and <code>can_read</code> with a timeout. </p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse IO::Select;\n\nmy $select = IO::Select-&gt;new();\n$select-&gt;add( \\*STDIN );\n\nmy $input = \"NONE\";\nif ( $select-&gt;can_read(10) ) {\n    $input = &lt;STDIN&gt;;\n}\n\nprint \"Got input of $input\\n\";\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 3762281, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/foXf9.jpg?s=128&g=1", "display_name": "japan", "link": "https://stackoverflow.com/users/3762281/japan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1448733919, "creation_date": 1448727459, "question_id": 33973515, "link": "https://stackoverflow.com/questions/33973515/waiting-for-a-defined-period-of-time-for-the-input-in-perl", "title": "Waiting for a defined period of time for the input in Perl", "body": "<p>What is the way to say  </p>\n\n<blockquote>\n  <p>wait for the 10 sec for the input<br>\n  if no input recognized<br>\n  print something</p>\n</blockquote>\n\n<p>in Perl?</p>\n"}, {"tags": ["regex", "bash", "perl"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 9, "creation_date": 1448699949, "post_id": 33969253, "comment_id": 55695452, "body": "What&#39;s in the variables <code>HEAD</code>, <code>TAIL</code>, and <code>REPLACEMENT_CONTENT</code>? Or do you seriously expect us to be mindreaders?"}, {"owner": {"reputation": 33, "user_id": 5614672, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1vd6SxUYhyw/AAAAAAAAAAI/AAAAAAAAAcs/69nBP0MTj0I/photo.jpg?sz=128", "display_name": "Brian Shoff", "link": "https://stackoverflow.com/users/5614672/brian-shoff"}, "edited": false, "score": 0, "creation_date": 1448728312, "post_id": 33969253, "comment_id": 55703554, "body": "Thank you!  Triple escaping did the trick!"}], "answers": [{"tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": true, "score": 0, "last_activity_date": 1448732545, "creation_date": 1448732545, "answer_id": 33974396, "question_id": 33969253, "link": "https://stackoverflow.com/questions/33969253/maintain-dollar-sign-when-performing-find-and-replace/33974396#33974396", "title": "Maintain $ (dollar sign) when performing find and replace", "body": "<p>Yes, you are right your <code>$IPT</code> get interpreted in your regex inside perl.</p>\n\n<p>So, using <code>\\$IPT</code> this you are escaping <code>$</code> for the shell. But you also need to escape <code>$</code> for perl, so that it shouldn't interpret. For that you should do like this:</p>\n\n<pre><code>REPLACEMENT_CONTENT=\"\n\\\\\\$IPT -A INPUT -s 8.8.8.8 -j ACCEPT\n\\\\\\$IPT -A INPUT -s 8.8.8.4 -j ACCEPT\"\n</code></pre>\n\n<p>This escapes <code>\\</code> once and then <code>$</code> itself sending perl <code>\\$</code> and thus it did not get interpreted. </p>\n\n<p><strong>OR</strong></p>\n\n<p>Just wrap <code>REPLACEMENT_CONTENT</code> in single quotes.</p>\n\n<pre><code>REPLACEMENT_CONTENT='\n\\$IPT -A INPUT -s 8.8.8.8 -j ACCEPT\n\\$IPT -A INPUT -s 8.8.8.4 -j ACCEPT'\n</code></pre>\n\n<p>And after that <code>perl</code> part:</p>\n\n<pre><code>perl -0777 -i -pe \"s/($HEAD).*($TAIL)/\\$1$REPLACEMENT_CONTENT\\n\\$2/s\" $FILE\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5614672, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1vd6SxUYhyw/AAAAAAAAAAI/AAAAAAAAAcs/69nBP0MTj0I/photo.jpg?sz=128", "display_name": "Brian Shoff", "link": "https://stackoverflow.com/users/5614672/brian-shoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 33974396, "answer_count": 1, "score": -4, "last_activity_date": 1448732545, "creation_date": 1448698964, "last_edit_date": 1448725484, "question_id": 33969253, "link": "https://stackoverflow.com/questions/33969253/maintain-dollar-sign-when-performing-find-and-replace", "title": "Maintain $ (dollar sign) when performing find and replace", "body": "<p>My script appends a block of text to the end of a file.</p>\n\n<pre><code>### Start My Block\n$IPT -A INPUT -s 8.8.8.8 -j ACCEPT\n$IPT -A INPUT -s 8.8.8.4 -j ACCEPT\n### End My Block\n</code></pre>\n\n<p>If my text block doesn't exists, it successfully appends the file as shown above using the following:</p>\n\n<pre><code>HEAD=\"### Start My Block\"\nTAIL=\"### End My Block\"\nREPLACEMENT_CONTENT=\"\n\\$IPT -A INPUT -s 8.8.8.8 -j ACCEPT\n\\$IPT -A INPUT -s 8.8.8.4 -j ACCEPT\"\n\necho -e \"$HEAD\" &gt;&gt; $FILE\necho -e \"$REPLACEMENT_CONTENT\" &gt;&gt; $FILE\necho -e \"$TAIL\" &gt;&gt; $FILE\n</code></pre>\n\n<p>If my text block exists, it attempts to replace the block's contents using the following:</p>\n\n<pre><code>HEAD=\"### Start My Block\"\nTAIL=\"### End My Block\"\nREPLACEMENT_CONTENT=\"\n\\$IPT -A INPUT -s 4.4.4.4 -j ACCEPT\n\\$IPT -A INPUT -s 4.4.2.2 -j ACCEPT\"\n\nperl -0777 -i -pe \"s/($HEAD).*(\\\\n$TAIL)/\\$1$REPLACEMENT_CONTENT\\\\$2/s\" $FILE\n</code></pre>\n\n<p>The problem is I lose the \"$IPT\" and end up using the following:</p>\n\n<pre><code>### Start My Block\n -A INPUT -s 4.4.4.4 -j ACCEPT\n -A INPUT -s 4.4.2.2 -j ACCEPT\n### End My Block\n</code></pre>\n\n<p>When I output the above via \">>\", with the dollar sign escaped \\$, the $IPT is included.  When I revisit the file to replace existing content between the $HEAD and $TAIL and use the perl function with an updated block, the escaped dollar sign doesn't seem to hold.  My guess is it's being interpreted and I'm not sure how to prevent that if escaping isn't enough.</p>\n\n<p>Does anyone know how I can modify the command above to maintain the \"$IPT\"?</p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1448682494, "post_id": 33964542, "comment_id": 55692327, "body": "There is a great deal wrong with your program in addition to the answer you have accepted, but it is very hard to understand what you&#39;re trying to do, and indeed, what <i>&quot;the expected values&quot;</i> might be. You need to start by adding <code>use strict</code> as well as <code>use warnings &#39;all&#39;</code>; surely you&#39;ve seen advice to do that on <i>every</i> Perl program you write? But if you explain better what you are aiming for then you will get much better help"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448734556, "post_id": 33964542, "comment_id": 55705740, "body": "You appear to be doing something horrible <a href=\"http://perl.plover.com/varvarname.html\" rel=\"nofollow noreferrer\">this article</a> explains why using a variable as a variable name is nasty. You should also note - <code>$hn</code> and <code>%hn</code> aren&#39;t in any way related."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5613599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82337d98d130a80cb81f7605bd629d65?s=128&d=identicon&r=PG&f=1", "display_name": "user5613599", "link": "https://stackoverflow.com/users/5613599/user5613599"}, "edited": false, "score": 0, "creation_date": 1448663537, "post_id": 33964661, "comment_id": 55688669, "body": "Bolav, thanks for your fast solution and the explanation."}, {"owner": {"reputation": 6592, "user_id": 3005251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5331f7e467aae3d581fe8bc814ef572?s=128&d=identicon&r=PG", "display_name": "bolav", "link": "https://stackoverflow.com/users/3005251/bolav"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1448699752, "post_id": 33964661, "comment_id": 55695406, "body": "@stevieb I&#39;m not going to force anyone to use strict."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1448734327, "post_id": 33964661, "comment_id": 55705652, "body": "Not using <code>strict</code> is ok. Not using <code>strict</code> and then asking for free help when your code doesn&#39;t work - especially when it&#39;s things that <code>strict</code> would have caught, is just rude."}], "tags": [], "owner": {"reputation": 6592, "user_id": 3005251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5331f7e467aae3d581fe8bc814ef572?s=128&d=identicon&r=PG", "display_name": "bolav", "link": "https://stackoverflow.com/users/3005251/bolav"}, "is_accepted": true, "score": 1, "last_activity_date": 1448658433, "last_edit_date": 1448658433, "creation_date": 1448657699, "answer_id": 33964661, "question_id": 33964542, "link": "https://stackoverflow.com/questions/33964542/perl-hash-feeded-in-a-for-loop-is-empty-outside-the-loop/33964661#33964661", "title": "Perl: hash feeded in a for loop, is empty outside the loop", "body": "<p>The problem with your program is that you are not saving your hashes at all. <code>push(@hna, $hn);</code> pushes the name of the hash as a string to <code>@hna</code>. This is the only variable you save for the outside of your <code>for</code>. </p>\n\n<p>If you save both the name, and the hash you create in <code>@hna</code> like this: <code>push(@hna, {name =&gt; $hn, hash =&gt; \\%hn});</code> you will have more success.</p>\n\n<pre><code> @@ -9,9 +9,7 @@ use Data::Dumper;\n\n  for (my $i=0; $i&lt;=$#wA; $i++){\n      $hn = \"hash-$wA[$i]\";\n -    push(@hna, $hn);\n -    %hn = ();\n -    #my %hn;\n +    my %hn = ();\n      $hsize = @hn;\n      print \"1. HashName: \" . $hn . \" Size: \" . $hsize . \"\\n\";\n      print \"HashName: $hn\\n\";\n @@ -73,6 +71,7 @@ for (my $i=0; $i&lt;=$#wA; $i++){\n      }\n      @hk = keys %hn;\n      $hsize = @hk;\n +    push(@hna, {name =&gt; $hn, hash =&gt; \\%hn});\n      print \"2. HashName: \" . $hn . \" Size: \" . $hsize . \"\\n\";\n  }\n\n @@ -83,9 +82,9 @@ print \"\\n\\n\\n\";\n  print \"Hash info out of the FOR loop\\n\";\n\n  for (my $k=0; $k&lt;=$#hna; $k++){\n -    @hnaca = keys %{$hna[$k]};\n +    @hnaca = keys %{$hna[$k]-&gt;{\"hash\"}};\n      #@hnaca = keys @{ @hna[$k] };\n      #@hnaca = keys \\%{ $hna[$k] };\n      #@hnaca = keys %{ $hna-&gt;[$k] };\n -    print \"Element: \" . $k . \" HashName: \" . $hna[$k] . \" Size(\\$#): \" . $#hnaca . \" Size(\\@): \" . @hnaca . \"\\n\";\n +    print \"Element: \" . $k . \" HashName: \" . $hna[$k]-&gt;{\"name\"} . \" Size(\\$#): \" . $#hnaca . \" Size(\\@): \" . @hnaca . \"\\n\";\n  }\n</code></pre>\n\n<p>This gives this full program, which works for me:</p>\n\n<pre><code> #!/usr/bin/perl -w\n\n use warnings;\n use English;\n use Data::Dumper;\n\n @wA = (\"a\", \"b\", \"c\", \"d\", \"e\", \"f\");\n @dA = (1, 2, 3, 4, 5, 6);\n\n for (my $i=0; $i&lt;=$#wA; $i++){\n     $hn = \"hash-$wA[$i]\";\n     my %hn = ();\n     $hsize = @hn;\n     print \"1. HashName: \" . $hn . \" Size: \" . $hsize . \"\\n\";\n     print \"HashName: $hn\\n\";\n     if ($i == 0){\n         print \"Feed the hash $hn: \";\n         for (my $j=$i; $j&lt;=$#dA; $j++){\n             $hn{ $dA[$j] } = $wA[$j];\n             print \"$dA[$j] =&gt; $wA[$j], \";\n         }\n         print \"\\n\";\n     }\n     if ($i == 1){\n         print \"Feed the hash $hn: \";\n         for (my $j=$i; $j&lt;=$#dA; $j++){\n             $hn{ $dA[$j] } = $wA[$j];\n             print \"$dA[$j] =&gt; $wA[$j], \";\n         }\n         print \"\\n\";\n     }\n     if ($i == 2){\n         print \"Feed the hash $hn: \";\n         for (my $j=$i; $j&lt;=$#dA; $j++){\n             $hn{ $dA[$j] } = $wA[$j];\n             print \"$dA[$j] =&gt; $wA[$j], \";\n         }\n         print \"\\n\";\n     }\n     if ($i == 3){\n         print \"Feed the hash $hn: \";\n         for (my $j=$i; $j&lt;=$#dA; $j++){\n             $hn{ $dA[$j] } = $wA[$j];\n             print \"$dA[$j] =&gt; $wA[$j], \";\n         }\n         print \"\\n\";\n     }\n     if ($i == 4){\n         print \"Feed the hash $hn: \";\n         for (my $j=$i; $j&lt;=$#dA; $j++){\n             $hn{ $dA[$j] } = $wA[$j];\n             print \"$dA[$j] =&gt; $wA[$j], \";\n         }\n         print \"\\n\";\n     }\n     if ($i == 5){\n         print \"Feed the hash $hn: \";\n         for (my $j=$i; $j&lt;=$#dA; $j++){\n             $hn{ $dA[$j] } = $wA[$j];\n             print \"$dA[$j] =&gt; $wA[$j], \";\n         }\n         print \"\\n\";\n     }\n     if ($i == 6){\n         print \"Feed the hash $hn: \";\n         for (my $j=$i; $j&lt;=$#dA; $j++){\n             $hn{ $dA[$j] } = $wA[$j];\n             print \"$dA[$j] =&gt; $wA[$j], \";\n         }\n         print \"\\n\";\n     }\n     @hk = keys %hn;\n     $hsize = @hk;\n     push(@hna, {name =&gt; $hn, hash =&gt; \\%hn});\n     print \"2. HashName: \" . $hn . \" Size: \" . $hsize . \"\\n\";\n }\n\n print \"\\n\";\n print \"Araay with hashNames: \" . @hna . \" Array length: \" . $#hna . \"\\n\";\n print \"\\n\\n\\n\";\n\n print \"Hash info out of the FOR loop\\n\";\n\n for (my $k=0; $k&lt;=$#hna; $k++){\n     @hnaca = keys %{$hna[$k]-&gt;{\"hash\"}};\n     #@hnaca = keys @{ @hna[$k] };\n     #@hnaca = keys \\%{ $hna[$k] };\n     #@hnaca = keys %{ $hna-&gt;[$k] };\n     print \"Element: \" . $k . \" HashName: \" . $hna[$k]-&gt;{\"name\"} . \" Size(\\$#): \" . $#hnaca . \" Size(\\@): \" . @hnaca . \"\\n\";\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1448682331, "post_id": 33967358, "comment_id": 55692305, "body": "Or even <code>@hash{@wa} = @dA</code>"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1448682418, "post_id": 33967358, "comment_id": 55692317, "body": "ohhhh nice. Forgot about that one ;)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1448683330, "post_id": 33967358, "comment_id": 55692440, "body": "Your link was to <code>splice</code>, which is different from <code>slice</code>. Fixed."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1448683415, "post_id": 33967358, "comment_id": 55692454, "body": "Merci beaucoup. Nice catch."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1448683678, "post_id": 33967358, "comment_id": 55692498, "body": "I was also thinking of writing <code>$hash{shift @wA} = $_ for @dA;</code>, but I was hoping to be reasonably understandable. Odd thing is, is that I spent two months writing a new module and was using <code>slice</code> and <code>splice</code> unforgettably... yet this one eluded me :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1448685395, "post_id": 33967358, "comment_id": 55692764, "body": "Perhaps <code>$hash{$wA[$_]} = $dA[$_] for 0 .. $#wA</code> which is better as it&#39;s non-destructive. TMTOWTDI indeed!"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 2, "last_activity_date": 1448683303, "last_edit_date": 1448683303, "creation_date": 1448681620, "answer_id": 33967358, "question_id": 33964542, "link": "https://stackoverflow.com/questions/33964542/perl-hash-feeded-in-a-for-loop-is-empty-outside-the-loop/33967358#33967358", "title": "Perl: hash feeded in a for loop, is empty outside the loop", "body": "<p>Curiously, is this what you're after?:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy @wA = qw(a b c d e f);\nmy @dA = qw(1 2 3 4 5 6);\n\nmy %hash;\n\nfor my $w (@wA){\n    $hash{$w} = shift @dA;\n}\n</code></pre>\n\n<p>...or using the iterator (it's rare we need iterators in Perl). Note the use of the <code>..</code> aka. flip-flop operator or officially the <a href=\"http://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow\">range</a> operator:</p>\n\n<pre><code>for my $i (0..$#wA){\n    $hash{$wA[$i]} = $dA[$i];\n}\n</code></pre>\n\n<p>...or even a tiny bit more succinctly (without the explicitly defined iterator):</p>\n\n<pre><code>for (0..$#wA){\n    $hash{$wA[$_]} = $dA[$_];\n}\n</code></pre>\n\n<p>...in the end, you could even end up with this (so long as you've pre-checked the length of each array):</p>\n\n<pre><code>for (@wA){\n    $hash{$_} = shift @dA; # requires array length checks\n}\n</code></pre>\n\n<p>...one more (suggested by @Borodin that I neglected), a <a href=\"http://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow\"><em>slice</em></a>:</p>\n\n<pre><code>@hash{@wa} = @dA\n</code></pre>\n\n<p>Then, in all above cases, use <code>Dumper</code>, or:</p>\n\n<pre><code>for my $key (keys %hash){\n    print \"$key: $hash{$key}\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 5613599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82337d98d130a80cb81f7605bd629d65?s=128&d=identicon&r=PG&f=1", "display_name": "user5613599", "link": "https://stackoverflow.com/users/5613599/user5613599"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 33964661, "answer_count": 2, "score": -1, "last_activity_date": 1448683303, "creation_date": 1448656803, "last_edit_date": 1448658656, "question_id": 33964542, "link": "https://stackoverflow.com/questions/33964542/perl-hash-feeded-in-a-for-loop-is-empty-outside-the-loop", "title": "Perl: hash feeded in a for loop, is empty outside the loop", "body": "<p>I'm stoke with an understanding of the HASH functionality. With a \u201cfor\u201d loop, I create hashes and \u201chashnames\u201d dynamically and I'm feeding them with some key/values elements. Unfortunately, these values are not anymore visible outside the loop.\nBelow the small code I'm using and their output.</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse warnings;\nuse English;\nuse Data::Dumper;\n\n@wA = (\"a\", \"b\", \"c\", \"d\", \"e\", \"f\");\n@dA = (1, 2, 3, 4, 5, 6);\n\nfor (my $i=0; $i&lt;=$#wA; $i++){\n    $hn = \"hash-$wA[$i]\";\n    push(@hna, $hn);\n    %hn = ();\n    #my %hn;\n    $hsize = @hn;\n    print \"1. HashName: \" . $hn . \" Size: \" . $hsize . \"\\n\";\n    print \"HashName: $hn\\n\";\n    if ($i == 0){\n        print \"Feed the hash $hn: \";\n        for (my $j=$i; $j&lt;=$#dA; $j++){\n            $hn{ $dA[$j] } = $wA[$j];\n            print \"$dA[$j] =&gt; $wA[$j], \";\n        }\n        print \"\\n\";\n    }\n    if ($i == 1){\n        print \"Feed the hash $hn: \";\n        for (my $j=$i; $j&lt;=$#dA; $j++){\n            $hn{ $dA[$j] } = $wA[$j];\n            print \"$dA[$j] =&gt; $wA[$j], \";\n        }\n        print \"\\n\";\n    }\n    if ($i == 2){\n        print \"Feed the hash $hn: \";\n        for (my $j=$i; $j&lt;=$#dA; $j++){\n            $hn{ $dA[$j] } = $wA[$j];\n            print \"$dA[$j] =&gt; $wA[$j], \";\n        }\n        print \"\\n\";\n    }\n    if ($i == 3){\n        print \"Feed the hash $hn: \";\n        for (my $j=$i; $j&lt;=$#dA; $j++){\n            $hn{ $dA[$j] } = $wA[$j];\n            print \"$dA[$j] =&gt; $wA[$j], \";\n        }\n        print \"\\n\";\n    }\n    if ($i == 4){\n        print \"Feed the hash $hn: \";\n        for (my $j=$i; $j&lt;=$#dA; $j++){\n            $hn{ $dA[$j] } = $wA[$j];\n            print \"$dA[$j] =&gt; $wA[$j], \";\n        }\n        print \"\\n\";\n    }\n    if ($i == 5){\n        print \"Feed the hash $hn: \";\n        for (my $j=$i; $j&lt;=$#dA; $j++){\n            $hn{ $dA[$j] } = $wA[$j];\n            print \"$dA[$j] =&gt; $wA[$j], \";\n        }\n        print \"\\n\";\n    }\n    if ($i == 6){\n        print \"Feed the hash $hn: \";\n        for (my $j=$i; $j&lt;=$#dA; $j++){\n            $hn{ $dA[$j] } = $wA[$j];\n            print \"$dA[$j] =&gt; $wA[$j], \";\n        }\n        print \"\\n\";\n    }\n    @hk = keys %hn;\n    $hsize = @hk;\n    print \"2. HashName: \" . $hn . \" Size: \" . $hsize . \"\\n\";\n}\n\nprint \"\\n\";\nprint \"Araay with hashNames: \" . @hna . \" Array length: \" . $#hna . \"\\n\";\nprint \"\\n\\n\\n\";\n\nprint \"Hash info out of the FOR loop\\n\";\n\nfor (my $k=0; $k&lt;=$#hna; $k++){\n    @hnaca = keys %{$hna[$k]};\n    #@hnaca = keys @{ @hna[$k] };\n    #@hnaca = keys \\%{ $hna[$k] };\n    #@hnaca = keys %{ $hna-&gt;[$k] };\n    print \"Element: \" . $k . \" HashName: \" . $hna[$k] . \" Size(\\$#): \" . $#hnaca . \" Size(\\@): \" . @hnaca . \"\\n\";\n}\n</code></pre>\n\n<p>And the output is like below:</p>\n\n<pre><code>1. HashName: hash-a Size: 0\nHashName: hash-a\nFeed the hash hash-a: 1 =&gt; a, 2 =&gt; b, 3 =&gt; c, 4 =&gt; d, 5 =&gt; e, 6 =&gt; f, \n2. HashName: hash-a Size: 6\nData::Dumper: 1. HashName: hash-b Size: 0\nHashName: hash-b\nFeed the hash hash-b: 2 =&gt; b, 3 =&gt; c, 4 =&gt; d, 5 =&gt; e, 6 =&gt; f, \n2. HashName: hash-b Size: 5\nData::Dumper: 1. HashName: hash-c Size: 0\nHashName: hash-c\nFeed the hash hash-c: 3 =&gt; c, 4 =&gt; d, 5 =&gt; e, 6 =&gt; f, \n2. HashName: hash-c Size: 4\nData::Dumper: 1. HashName: hash-d Size: 0\nHashName: hash-d\nFeed the hash hash-d: 4 =&gt; d, 5 =&gt; e, 6 =&gt; f, \n2. HashName: hash-d Size: 3\nData::Dumper: 1. HashName: hash-e Size: 0\nHashName: hash-e\nFeed the hash hash-e: 5 =&gt; e, 6 =&gt; f, \n2. HashName: hash-e Size: 2\nData::Dumper: 1. HashName: hash-f Size: 0\nHashName: hash-f\nFeed the hash hash-f: 6 =&gt; f, \n2. HashName: hash-f Size: 1\nData::Dumper: \nAraay with hashNames: 6 Array length: 5\n\n\n\nHash info out of the FOR loop\nElement: 0 HashName: hash-a Size($#): -1 Size(@): 0 -&gt; expected 5 / 6\nElement: 1 HashName: hash-b Size($#): -1 Size(@): 0 -&gt; expected 4 / 5\nElement: 2 HashName: hash-c Size($#): -1 Size(@): 0 -&gt; expected 3 / 4\nElement: 3 HashName: hash-d Size($#): -1 Size(@): 0 -&gt; expected 2 / 3\nElement: 4 HashName: hash-e Size($#): -1 Size(@): 0 -&gt; expected 1 / 2\nElement: 5 HashName: hash-f Size($#): -1 Size(@): 0 -&gt; expected 0 / 1\n</code></pre>\n\n<p>How can I get the expected values?</p>\n"}, {"tags": ["perl", "sorting", "hash", "negative-number"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1448642793, "post_id": 33961571, "comment_id": 55680877, "body": "Why are you packing unsigned?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1448643378, "post_id": 33961571, "comment_id": 55681152, "body": "Database and table index are quite good at it."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1448644089, "post_id": 33961571, "comment_id": 55681454, "body": "Can you give an approximate notion of how big is &#39;huge&#39;? We talking a million rows or a billion?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1448650074, "post_id": 33961571, "comment_id": 55683905, "body": "@stark, Doesn&#39;t matter. <code>pack(&#39;n&#39;, -100)</code>, <code>pack(&#39;S&gt;&#39;, -100)</code> and <code>pack(&#39;s&gt;&#39;, -100)</code> all produce the same result. <code>n</code> is the most familiar of these options."}, {"owner": {"reputation": 151, "user_id": 5530729, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/becd9dec5242bec6e3c19294e6e0b14f?s=128&d=identicon&r=PG&f=1", "display_name": "dcirillo", "link": "https://stackoverflow.com/users/5530729/dcirillo"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448733846, "post_id": 33961571, "comment_id": 55705479, "body": "@Sobrique ~42 million rows."}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 3, "creation_date": 1448647166, "post_id": 33962275, "comment_id": 55682736, "body": "assuming scores are -327.68..327.67, just multiply by 100 before packing.  if a bigger range and/or more precision is needed, switch to pack &#39;N&#39;.  trying to make them strings with padding is going to take longer and produce larger data to be sorted."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1448650882, "post_id": 33962275, "comment_id": 55684233, "body": "FWIW in practice, sprintf rounds to nearest (usually using bankers&#39; rounding) on every platform I am aware of, but in fact perl uses the C library, and even posix just says &quot;The low-order digit shall be rounded in an implementation-defined manner.&quot;"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1448654985, "last_edit_date": 1448654985, "creation_date": 1448645180, "answer_id": 33962275, "question_id": 33961571, "link": "https://stackoverflow.com/questions/33961571/perl-fast-sorting-hash-keys-with-positive-and-negative-non-integer-values/33962275#33962275", "title": "Perl: fast sorting hash keys with positive and negative non-integer values", "body": "<p>If you had integers, you could handle negative integers using the following:</p>\n\n<pre><code># Supports [32767, -32768]\npack( 'n', $score + 0x8000 )\n</code></pre>\n\n<p>But this considers 55.42 and 55.43 to be equal.</p>\n\n<p>You'd use the same approach for floating point numbers.</p>\n\n<ol>\n<li>Normalize the numbers into positive numbers.</li>\n<li>Pads the numbers on the left so that the decimal point of all the numbers line up.</li>\n</ol>\n\n<p>Most flexible:</p>\n\n<pre><code># Supports ]67231, -32768], two decimal places.\nsprintf( '%8.2f', $score + 0x8000 )\n</code></pre>\n\n<p>But you could also convert to an integer to produce shorter strings:</p>\n\n<pre><code># Supports [327, -327], two decimal places.\npack( 'n', sprintf( '%.0f', $score * 100 ) + 0x8000 )\n\n# Supports [21_474_836, -21_474_836], two decimal places.\npack( 'N', sprintf( '%.0f', $score * 100 ) + 0x8000_0000 )\n</code></pre>\n\n<p>(<code>sprintf '%.0f'</code> was used to round to the nearest integer, though it may not do this on all machines.)</p>\n"}, {"tags": [], "owner": {"reputation": 8726, "user_id": 597305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2ad05a19a937275934237503fc77d887?s=128&d=identicon&r=PG", "display_name": "Bill Ruppert", "link": "https://stackoverflow.com/users/597305/bill-ruppert"}, "is_accepted": false, "score": 0, "last_activity_date": 1448721656, "creation_date": 1448721656, "answer_id": 33972549, "question_id": 33961571, "link": "https://stackoverflow.com/questions/33961571/perl-fast-sorting-hash-keys-with-positive-and-negative-non-integer-values/33972549#33972549", "title": "Perl: fast sorting hash keys with positive and negative non-integer values", "body": "<p>You could run two sorts, one for the negative numbers and one for the non-negative numbers.</p>\n"}, {"tags": [], "owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "is_accepted": false, "score": 1, "last_activity_date": 1448739813, "creation_date": 1448739813, "answer_id": 33975657, "question_id": 33961571, "link": "https://stackoverflow.com/questions/33961571/perl-fast-sorting-hash-keys-with-positive-and-negative-non-integer-values/33975657#33975657", "title": "Perl: fast sorting hash keys with positive and negative non-integer values", "body": "<p>If relatively small integers are sufficiently precise to represent the floats, a simple bucket sort would do. Choosing <code>$scale</code> and <code>$offset</code> so that your min/max scores fall into a positive integer range:</p>\n\n<pre><code>my @buckets;\nwhile(my ($gene, $score) = each %hash) {\n    push @{$buckets[$score * $scale + $offset], $gene;\n}\n</code></pre>\n\n<p>On my system, an array containing 2**20 empty arrayrefs eats 45 MB which shouldn't be too much overhead at this data set size.</p>\n"}], "owner": {"reputation": 151, "user_id": 5530729, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/becd9dec5242bec6e3c19294e6e0b14f?s=128&d=identicon&r=PG&f=1", "display_name": "dcirillo", "link": "https://stackoverflow.com/users/5530729/dcirillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 497, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1448739813, "creation_date": 1448642081, "last_edit_date": 1448734236, "question_id": 33961571, "link": "https://stackoverflow.com/questions/33961571/perl-fast-sorting-hash-keys-with-positive-and-negative-non-integer-values", "title": "Perl: fast sorting hash keys with positive and negative non-integer values", "body": "<p>I have a list of genes and scores and I want to sort the genes based on the scores. The list is huge (~42 million rows) and Perl <em>sort</em> function is too slow.</p>\n\n<p>Using Sort::External module I can speed up the process but it sorts correctly only positive integers. Here is what I tried (I am showing just 10 cases):</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Sort::External;\n\nmy %hash = (\n    'gene1' =&gt; -19.86,\n    'gene2' =&gt; -12.90,\n    'gene3' =&gt; 4.07,\n    'gene4' =&gt; 22.59,\n    'gene5' =&gt; 55.43,\n    'gene6' =&gt; 55.42,\n    'gene7' =&gt; 9.89,\n    'gene8' =&gt; 27.51,\n    'gene9' =&gt; 6.43,\n    'gene10' =&gt; 59.65\n);\n\nmy @sortkeys;\nwhile ( my ( $gene, $score ) = each %hash ) {\n    push @sortkeys, ( pack( 'n', $score ) . $gene );\n}\nmy $sortex = Sort::External-&gt;new( mem_threshold =&gt; 1024**2 * 8 );\n$sortex-&gt;feed(@sortkeys);\n$sortex-&gt;finish;\nmy @sorted;\nwhile ( defined( $_ = $sortex-&gt;fetch ) ) {\n    push @sorted, substr( $_, 2 );\n}\n\nforeach (@sorted){\n    print join(\"\\t\",$_,$hash{$_}),\"\\n\";\n}\n</code></pre>\n\n<p>And here is the output:</p>\n\n<pre><code>gene3   4.07\ngene9   6.43\ngene7   9.89\ngene4   22.59\ngene8   27.51\ngene5   55.43\ngene6   55.42\ngene10  59.65\ngene1   -19.86\ngene2   -12.9\n</code></pre>\n\n<p>What is the best solution for fast sorting hash keys with positive and negative non-integer values?</p>\n"}, {"tags": ["perl", "bioinformatics"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 5411393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/860646e3c3381771f6cae328954494a1?s=128&d=identicon&r=PG&f=1", "display_name": "Postan92", "link": "https://stackoverflow.com/users/5411393/postan92"}, "edited": false, "score": 0, "creation_date": 1448649049, "post_id": 33961611, "comment_id": 55683512, "body": "My tab-delimited file contains two columns. The first column contains a single ID number in each row (eg. 1760), and the second column has the amount of sequences associated with that ID number."}], "tags": [], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "is_accepted": false, "score": 0, "last_activity_date": 1448705030, "last_edit_date": 1448705030, "creation_date": 1448642260, "answer_id": 33961611, "question_id": 33961403, "link": "https://stackoverflow.com/questions/33961403/display-full-taxon-path-from-ncbi-gi-number/33961611#33961611", "title": "Display full taxon path from NCBI GI number", "body": "<p>First, I notice you open <code>$filename</code> which is your first command line argument, but you don't use the file pointer <code>$fh</code> you created. </p>\n\n<p>So, these two lines are not needed in your case because you already do the trick with <code>&lt;&gt;</code></p>\n\n<pre><code>my ($filename) = @ARGV;\nopen my $fh, '&lt;', $filename or die qq{Unable to open \"$filename\": $!};\n</code></pre>\n\n<p>Next. I don't know what is inside your <code>filename</code> and your database so I cannot help you more. Can you provide an example of what is inside your database and your file?</p>\n\n<p>One more thing, what I can see here is that you may not need to create your <code>$db</code> instance inside the loop.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Bio::DB::Taxonomy;\n\nmy $db = Bio::DB::Taxonomy-&gt;new(-source =&gt; 'entrez');\n\nwhile(&lt;&gt;) {\n        my ($taxonid, $counts) = (split /\\t/);\n        for my $each($taxonid) {\n                print \"$each\\n\";\n                my $taxon = $db-&gt;get_taxon(-taxonid =&gt; $taxonid);\n                print \"Taxon ID is $taxon-&gt;id, \\n\";\n                print \"Scientific name is \", $taxon-&gt;scientific_name, \"\\n\";\n        }\n}\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>From your command Is is hard to help you. When you write </p>\n\n<pre><code>my $taxon = $db-&gt;get_taxon(-taxonid =&gt; $taxonid);\n</code></pre>\n\n<p>You receive a <code>Bio::Taxon</code> node where the documentation ca be found <a href=\"http://search.cpan.org/~cjfields/BioPerl-1.6.924/Bio/Taxon.pm\" rel=\"nofollow\">here</a></p>\n\n<p>I don't know what <code>k__Bacteria; p__ Actinobacteria; c__ Actinobacteria</code> representy for you. Is it an information offered by a <code>Bio::Taxon</code> node?</p>\n\n<p>Anyway, you can still explore <code>$taxon</code> with this: </p>\n\n<pre><code>#!/usr/bin/env perl\n# Author: Yves Chevallier\n# Date:\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse Bio::DB::Taxonomy;\n\nmy $db = Bio::DB::Taxonomy-&gt;new(-source =&gt; 'entrez');\n\nwhile(&lt;DATA&gt;) {\n    my ($taxonid, $counts) = (split /\\t/);\n    for my $each($taxonid) {\n        print \"$each\\n\";\n        my $taxon = $db-&gt;get_taxon(-taxonid =&gt; $taxonid);\n        print Dumper $taxon;\n        print \"Taxon ID is $taxon-&gt;id, \\n\";\n        print \"Scientific name is \", $taxon-&gt;scientific_name, \"\\n\";\n    }\n}\n\n__DATA__\n12 1760\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 5411393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/860646e3c3381771f6cae328954494a1?s=128&d=identicon&r=PG&f=1", "display_name": "Postan92", "link": "https://stackoverflow.com/users/5411393/postan92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448705030, "creation_date": 1448641474, "last_edit_date": 1448641836, "question_id": 33961403, "link": "https://stackoverflow.com/questions/33961403/display-full-taxon-path-from-ncbi-gi-number", "title": "Display full taxon path from NCBI GI number", "body": "<p>I prepared the following script that takes a GI ID number from NCBI that I prepared in my tsv file and prints the scientific name associated with the ID:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Bio::DB::Taxonomy;\n\nmy ($filename) = @ARGV;\nopen my $fh, '&lt;', $filename or die qq{Unable to open \"$filename\": $!};\n\nwhile(&lt;&gt;) {\n        my ($taxonid, $counts) = (split /\\t/);\n        for my $each($taxonid) {\n                print \"$each\\n\";\n                my $db = Bio::DB::Taxonomy-&gt;new(-source =&gt; 'entrez');\n                my $taxon = $db-&gt;get_taxon(-taxonid =&gt; $taxonid);\n                print \"Taxon ID is $taxon-&gt;id, \\n\";\n                print \"Scientific name is \", $taxon-&gt;scientific_name, \"\\n\";\n        }\n}\n</code></pre>\n\n<p>With this script, I receive the following:</p>\n\n<pre><code>1760\n\nTaxon ID is Bio::Taxon=HASH(0x33a91f8)-&gt;id,\n</code></pre>\n\n<p>Scientific name is Actinobacteria</p>\n\n<h2>What I want to do</h2>\n\n<p>Now the next step is for me to list the full taxon path of the bacteria in question. So for the above example, I want to see <code>k__Bacteria; p__ Actinobacteria; c__ Actinobacteria</code> as output. Furthermore, I want the GI IDs on my table to be repliaced with this full taxon path.</p>\n\n<p>In which direction should I go?</p>\n"}, {"tags": ["perl", "perl-module"], "answers": [{"comments": [{"owner": {"reputation": 309, "user_id": 2964417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/b5c71d859d620825097c7d6bbeef6afa?s=128&d=identicon&r=PG", "display_name": "MeirG", "link": "https://stackoverflow.com/users/2964417/meirg"}, "edited": false, "score": 0, "creation_date": 1448643295, "post_id": 33960922, "comment_id": 55681116, "body": "In deed it doesn&#39;t :("}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1448643356, "post_id": 33960922, "comment_id": 55681144, "body": "Updated the code in this answer to fix the problem I had previously mentioned."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 8, "last_activity_date": 1448643224, "last_edit_date": 1448643224, "creation_date": 1448639589, "answer_id": 33960922, "question_id": 33960768, "link": "https://stackoverflow.com/questions/33960768/how-can-i-track-down-the-origin-of-develpeek/33960922#33960922", "title": "How can I track down the origin of Devel::Peek", "body": "<p>At the top of your script, add the following:</p>\n\n<pre><code>BEGIN {\n    use Carp qw( );\n    use Devel::Peek qw( );\n    my $old = \\&amp;Devel::Peek::Dump;\n    my $new = sub { Carp::cluck(\"Devel::Peek::Dump got called somewhere!\"); &amp;$old };\n    no warnings 'redefine';\n    *Devel::Peek::Dump = $new;\n}\n</code></pre>\n\n<p>This needs to happen before anyone imports <code>Dump</code> from Devel::Peek.</p>\n\n<p>The output of <code>Carp::cluck</code> will include a stack trace.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1448655513, "last_edit_date": 1448655513, "creation_date": 1448642835, "answer_id": 33961741, "question_id": 33960768, "link": "https://stackoverflow.com/questions/33960768/how-can-i-track-down-the-origin-of-develpeek/33961741#33961741", "title": "How can I track down the origin of Devel::Peek", "body": "<p>Maybe you can't find the source of the message because you're looking for the wrong thing. It could also be the output of <code>sv_dump</code> from an XS module.</p>\n\n<pre><code>use Inline C =&gt; &lt;&lt;'__EOI__';\n\n   void dump_sv(SV* sv) {\n      sv_dump(sv);\n   }\n\n__EOI__\n\ndump_sv(1);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>SV = IV(0x34cd588) at 0x34cd598\n  REFCNT = 1\n  FLAGS = (IOK,READONLY,PROTECT,pIOK)\n  IV = 1\n</code></pre>\n\n<p>Options to locate these calls:</p>\n\n<ul>\n<li>Run <code>perl</code> under a debugger, and set a breakpoint in <code>sv_dump</code>. (Most reliable)</li>\n<li>Dump the symbols of your <code>.dll</code> files, and grep them for <code>sv_dump</code>. (Maybe?)</li>\n<li>Grep the source distributions of the modules you have installed. (Least reliable)</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 309, "user_id": 2964417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/b5c71d859d620825097c7d6bbeef6afa?s=128&d=identicon&r=PG", "display_name": "MeirG", "link": "https://stackoverflow.com/users/2964417/meirg"}, "is_accepted": false, "score": 0, "last_activity_date": 1452765877, "creation_date": 1452765877, "answer_id": 34786640, "question_id": 33960768, "link": "https://stackoverflow.com/questions/33960768/how-can-i-track-down-the-origin-of-develpeek/34786640#34786640", "title": "How can I track down the origin of Devel::Peek", "body": "<p>Thanks all of you folks.</p>\n\n<p>The culprit was most probably the lack of <code>$sth-&gt;finish;</code> statement after a couple of DB retrieval operations. Since I added those, I don't see these messages anymore!</p>\n"}], "owner": {"reputation": 309, "user_id": 2964417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/b5c71d859d620825097c7d6bbeef6afa?s=128&d=identicon&r=PG", "display_name": "MeirG", "link": "https://stackoverflow.com/users/2964417/meirg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1452765877, "creation_date": 1448638969, "last_edit_date": 1448642567, "question_id": 33960768, "link": "https://stackoverflow.com/questions/33960768/how-can-i-track-down-the-origin-of-develpeek", "title": "How can I track down the origin of Devel::Peek", "body": "<p>Out-of-the-blue I started to see lines like this:</p>\n\n<pre><code>SV = PVIV(0x38fe3f0) at 0x3de5b80\n  REFCNT = 1\n  FLAGS = (PADMY)\n  IV = 0\n  PV = 0\n</code></pre>\n\n<p>These do not appear <em>consistently</em> and if I run the script repeatedly, with the <em>same</em> input, this output sometimes appear, sometimes even <em>twice</em> and sometimes not at all.</p>\n\n<p>And every once in a while, the script hangs and displays an error message saying \"Perl unfortunately stopped running.\"</p>\n\n<p>It is obviously the output of <code>Devel::Peek</code>, but none of <em>my</em> modules uses it and the only CPAN modules I use are Log::Log4perl, \nData::Dumper::AutoEncode (which of course uses Data::Dumper) and List::Util. \nAll these I use extensively and I never got this kind of output.</p>\n\n<p>Box: Win-7 Pro 64 bit</p>\n\n<p>Summary of my perl5 (revision 5 version 18 subversion 2) configuration:</p>\n\n<pre><code>  Platform:\n    osname=MSWin32, osvers=6.2, archname=MSWin32-x64-multi-thread\n    uname='Win32 strawberry-perl 5.18.2.1 #1 Tue Jan  7 22:32:35 2014 x64'\n</code></pre>\n\n<p>Can someone suggest steps I could do to find the origin of this and why it happens?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "perforce"], "comments": [{"owner": {"reputation": 1, "user_id": 5612681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7424ad94e520611a075aaa00311fdd48?s=128&d=identicon&r=PG&f=1", "display_name": "herp", "link": "https://stackoverflow.com/users/5612681/herp"}, "edited": false, "score": 0, "creation_date": 1448635778, "post_id": 33959852, "comment_id": 55677194, "body": "i need print the info.yml file which is  in perforce , which is every big file with lot of key/vaule paris , but on output i am seeing some number ,can some expalin what happing here."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1448636063, "post_id": 33959852, "comment_id": 55677350, "body": "The code in the question contains syntax errors. Please <a href=\"https://stackoverflow.com/posts/33959852/edit\">edit</a> your question using the <a href=\"https://stackoverflow.com/posts/33959852/edit\">edit</a> link on the bottom right and fix those. Why are you using YAML, but then you are just reading a file yourself (with old-fashioned two-arg-open and lexical filehandle!)? Also, what is <code>p4</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5612681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7424ad94e520611a075aaa00311fdd48?s=128&d=identicon&r=PG&f=1", "display_name": "herp", "link": "https://stackoverflow.com/users/5612681/herp"}, "edited": false, "score": 0, "creation_date": 1448975952, "post_id": 33959979, "comment_id": 55797645, "body": "hi choroba thanks for reply but i am so  not good with coding can help me here  by some sample code .."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 1, "user_id": 5612681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7424ad94e520611a075aaa00311fdd48?s=128&d=identicon&r=PG&f=1", "display_name": "herp", "link": "https://stackoverflow.com/users/5612681/herp"}, "edited": false, "score": 0, "creation_date": 1448976075, "post_id": 33959979, "comment_id": 55797737, "body": "@herp: See <a href=\"http://p3rl.org/readline\" rel=\"nofollow noreferrer\">readline</a> and <a href=\"http://p3rl.org/open\" rel=\"nofollow noreferrer\">open</a>."}, {"owner": {"reputation": 1, "user_id": 5612681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7424ad94e520611a075aaa00311fdd48?s=128&d=identicon&r=PG&f=1", "display_name": "herp", "link": "https://stackoverflow.com/users/5612681/herp"}, "edited": false, "score": 0, "creation_date": 1448977327, "post_id": 33959979, "comment_id": 55798554, "body": "hi, thanks for the reply but the p4 print command will print data into in harsh file right in above code , i am trying like this because i am not good programmer"}, {"owner": {"reputation": 1, "user_id": 5612681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7424ad94e520611a075aaa00311fdd48?s=128&d=identicon&r=PG&f=1", "display_name": "herp", "link": "https://stackoverflow.com/users/5612681/herp"}, "edited": false, "score": 0, "creation_date": 1448978789, "post_id": 33959979, "comment_id": 55799495, "body": "some snippet would be nice"}, {"owner": {"reputation": 1, "user_id": 5612681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7424ad94e520611a075aaa00311fdd48?s=128&d=identicon&r=PG&f=1", "display_name": "herp", "link": "https://stackoverflow.com/users/5612681/herp"}, "edited": false, "score": 0, "creation_date": 1448979449, "post_id": 33959979, "comment_id": 55799975, "body": "but i above snippet ur not using p4 print ..how move data from p4 print to hash file ?"}, {"owner": {"reputation": 1, "user_id": 5612681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7424ad94e520611a075aaa00311fdd48?s=128&d=identicon&r=PG&f=1", "display_name": "herp", "link": "https://stackoverflow.com/users/5612681/herp"}, "edited": false, "score": 0, "creation_date": 1448979499, "post_id": 33959979, "comment_id": 55800012, "body": "the problem i ma new born babe in perl and more ever i am not programmer"}, {"owner": {"reputation": 1, "user_id": 5612681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7424ad94e520611a075aaa00311fdd48?s=128&d=identicon&r=PG&f=1", "display_name": "herp", "link": "https://stackoverflow.com/users/5612681/herp"}, "edited": false, "score": 0, "creation_date": 1448980952, "post_id": 33959979, "comment_id": 55800996, "body": "hi choroba i am not  able to print the hash , i am not able to move data can let know how move data and print"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 1, "user_id": 5612681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7424ad94e520611a075aaa00311fdd48?s=128&d=identicon&r=PG&f=1", "display_name": "herp", "link": "https://stackoverflow.com/users/5612681/herp"}, "edited": false, "score": 1, "creation_date": 1448981580, "post_id": 33959979, "comment_id": 55801448, "body": "@herp: It&#39;s time you start reading the documentation. Start from <a href=\"http://p3rl.org/perlintro\" rel=\"nofollow noreferrer\">perlintro</a>."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 5, "last_activity_date": 1448979084, "last_edit_date": 1448979084, "creation_date": 1448636130, "answer_id": 33959979, "question_id": 33959852, "link": "https://stackoverflow.com/questions/33959852/p4-print-command-help-need-in-perl/33959979#33959979", "title": "p4 print command help need in perl", "body": "<p>You have some syntax errors in your code (missing double quote), but it's probably just copy'n'paste problem.</p>\n\n<p>The main problem seems to be you used the value returned by <a href=\"http://p3rl.org/open\" rel=\"nofollow\">open</a> to populate the hash, but <code>open</code> doesn't return the contents of the file. In fact, as documented, it returns the PID of the child process if you use it to open a pipe.</p>\n\n<p>You need to actually <strong>read</strong> from the file handle to get its contents.</p>\n\n<p>E.g.</p>\n\n<pre><code>my %hash;\nopen my $PIPE, '-|', qw( ls -s );\nwhile (&lt;$PIPE&gt;) {\n    my ($size, $file) = split;\n    $hash{$file} = $size;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5612681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7424ad94e520611a075aaa00311fdd48?s=128&d=identicon&r=PG&f=1", "display_name": "herp", "link": "https://stackoverflow.com/users/5612681/herp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1448979084, "creation_date": 1448635674, "last_edit_date": 1448636253, "question_id": 33959852, "link": "https://stackoverflow.com/questions/33959852/p4-print-command-help-need-in-perl", "title": "p4 print command help need in perl", "body": "<p>hi i have written a code </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/tools/baton/perl/5.12.1/bin/perl\n\nuse strict;\n\nuse YAML;\n\n\nuse YAML 'LoadFile';\n\nuse Data::Dumper;\n\nmy $file_yml;\n\nmy $path = \"//IP2/D21EV/2hw/semi_axi_10g_ethernet/info.yml\";\n\n my %hash = open(READ, p4 print -q $path|\") or die \"could not open \";\n\nprint Dumper (\\%hash);\n</code></pre>\n\n<p>it is giving me :</p>\n\n<pre><code>$VAR1 = {\n\n          '39807' =&gt; undef\n\n        };\n</code></pre>\n"}, {"tags": ["perl", "ipc"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1448632774, "post_id": 33958763, "comment_id": 55675540, "body": "<a href=\"http://p3rl.org/perlipc\" rel=\"nofollow noreferrer\">perlipc</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1448657633, "post_id": 33958763, "comment_id": 55686680, "body": "Why do you want to have two processes if you&#39;re going to make it so only one is executing at time?"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1448633459, "creation_date": 1448633459, "answer_id": 33959204, "question_id": 33958763, "link": "https://stackoverflow.com/questions/33958763/ipc-communication-between-2-processes-with-perl/33959204#33959204", "title": "IPC communication between 2 processes with Perl", "body": "<p>There is a whole page in the docs about inter process communication: <a href=\"http://perldoc.perl.org/perlipc.html\" rel=\"nofollow\"><code>perlipc</code></a></p>\n\n<p>To answer your question - yes, there is a way to do what you want. The problem is, exactly what it is ... depends on your use case. I can't tell what you're trying to accomplish - what you you mean by 'switch to parent' for example? </p>\n\n<p>But generally the simplest (in my opinion) is using pipes:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\npipe ( my $reader, my $writer ); \nmy $pid = fork(); #you should probably test for undef for fork failure. \nif ( $pid == 0 ) { \n    ## in child:\n    close ( $writer );\n    while ( my $line = &lt;$reader&gt; ) {\n        print \"Child got $line\\n\";\n    }\n}\nelse {\n    ##in parent:\n    close ( $reader );\n    print {$writer} \"Parent says hello!\\n\";\n    sleep 5;\n}\n</code></pre>\n\n<p>Note: you may want to check your <code>fork</code> return codes - <code>0</code> means we're in the child - a number means we're in the parent, and <code>undef</code> means the fork failed.</p>\n\n<p>Also: Your pipe will buffer - this might trip you over in some cases. It'll run to the end just fine, but you may not get IO when you think you should. </p>\n\n<p>You can open pipes the other way around - for child->parent comms. Be slightly cautious when you multi-fork though, because an active pipe is inherited by <em>every</em> child of the fork - but it's not a broadcast. </p>\n"}], "owner": {"reputation": 91, "user_id": 3547202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8740bc03407872aa057f0e6b12968f88?s=128&d=identicon&r=PG&f=1", "display_name": "user3547202", "link": "https://stackoverflow.com/users/3547202/user3547202"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1243, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1448633459, "creation_date": 1448631956, "question_id": 33958763, "link": "https://stackoverflow.com/questions/33958763/ipc-communication-between-2-processes-with-perl", "title": "IPC communication between 2 processes with Perl", "body": "<p>Let's say we have a 'Child' and 'Parent' process defined and subroutines</p>\n\n<pre><code>my $pid = fork;\ndie \"fork failed: $!\" unless defined($pid);\n\nlocal $SIG{USR1} = sub {\nkill KILL =&gt; $pid;\n$SIG{USR1} = 'IGNORE';\nkill USR1 =&gt; $$;\n};\n</code></pre>\n\n<p>and we divide them, is it possible to do the following?</p>\n\n<pre><code>if($pid == 0){\n    sub1();\n#switch to Parent process to execute sub4()\n    sub2();\n#switch to Parent process to execute sub5()\n    sub3();\n}\nelse\n{\n    sub4();\n#send message to child process so it executes sub2\n    sub5();\n#send message to child process so it executes sub3\n}  \n</code></pre>\n\n<p>If yes, can you point how, or where can I look for the solution? Maybe a short example would suffice. :)</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["perl", "authentication", "login", "ldap", "netldap"], "answers": [{"tags": [], "owner": {"reputation": 731, "user_id": 2098733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a85255ad3255904cf3838d62b54f25?s=128&d=identicon&r=PG", "display_name": "Tim De Lange", "link": "https://stackoverflow.com/users/2098733/tim-de-lange"}, "is_accepted": true, "score": 0, "last_activity_date": 1448836490, "creation_date": 1448836490, "answer_id": 33988970, "question_id": 33957483, "link": "https://stackoverflow.com/questions/33957483/perl-netldap-authenticate-with-current-login/33988970#33988970", "title": "Perl Net::LDAP: Authenticate with current login", "body": "<p>No, unfortunately not. </p>\n\n<p>On windows, the current login can't be extracted for security reasons. Your best bet would be to use the .NET framework with C# and connect directly via the AD API. Windows should handle the authentication automatically for you then. You won't be using Perl for that though.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5197928"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 1, "accepted_answer_id": 33988970, "answer_count": 1, "score": 1, "last_activity_date": 1448836490, "creation_date": 1448627440, "question_id": 33957483, "link": "https://stackoverflow.com/questions/33957483/perl-netldap-authenticate-with-current-login", "title": "Perl Net::LDAP: Authenticate with current login", "body": "<p>I want to bind a LDAP connection without giving the script a username and the password. At the moment I am asking the user for his password like this and bind the connection:</p>\n\n<pre><code>chomp($password = &lt;STDIN&gt;);\n$server = \"NAME_OF_MY_DC_SERVER\";\n$ldap = Net::LDAP-&gt;new($server);\n$ldap or die \"$@\\n\";\n$ldap-&gt;bind('USERNAME', password =&gt; $password);\n</code></pre>\n\n<p>But this is not what I want. I want the script to bind the LDAP connection automatically with the credentials of the user running the script. Is there an opportunity to get the login information of the current user to pipe it to the binding operator?</p>\n\n<p>I am working in a Windows-Environment with an ActiveDirectory.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 266, "user_id": 786911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34ffae64bcc4b847ad42cb20895d037a?s=128&d=identicon&r=PG", "display_name": "Veera", "link": "https://stackoverflow.com/users/786911/veera"}, "edited": false, "score": 0, "creation_date": 1448614770, "post_id": 33953488, "comment_id": 55665125, "body": "Suggested answer below is one way to do it. But you are attempting to read and write to a file at the same time. You can append to a file, but I don&#39;t think perl provides a way to read and write the same time (atleast not out of the box). One other suggestion is to use &#39;use strict&#39; clause. Makes your perl scripts robust and readable."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448616164, "post_id": 33953488, "comment_id": 55665968, "body": "It sort of does via <code>-i</code> and <code>$^I</code> or <code>open</code> with <code>&lt;+</code>. But it&#39;s a bit more complex than that."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1448622124, "post_id": 33953488, "comment_id": 55669729, "body": "You can&#39;t <code>print</code> to a filehandle that is only open for reading. If you had <code>use warnings</code> in your code, then Perl would have told you that."}], "answers": [{"comments": [{"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "reply_to_user": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1448616430, "post_id": 33953578, "comment_id": 55666115, "body": "@reinierpost: Might be OP wants use Perl. OP is trying to write a script in Perl, thats why I use Perl."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448619104, "post_id": 33953578, "comment_id": 55667890, "body": "I think you should be able open then unlink and write back - this is effectively what <code>-i</code> does."}], "tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 1, "last_activity_date": 1448615321, "last_edit_date": 1448615321, "creation_date": 1448614567, "answer_id": 33953578, "question_id": 33953488, "link": "https://stackoverflow.com/questions/33953488/search-a-word-in-file-and-replace-in-perl/33953578#33953578", "title": "Search a word in file and replace in Perl", "body": "<p>In your code you are using same filehandle to write which you have used for open the file to reading. Open the same file for write mode and then write.</p>\n\n<p>Always use lexical filehandle and three arguments to open a file. Here is your modified code:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy @files = glob(\"a.txt\");\nmy @data;\nforeach my $file (@files)\n{\n    open my $fhin, \"&lt;\", $file or die $!;\n    &lt;$fhin&gt;;\n    while(&lt;$fhin&gt;)\n    {\n        $_ =~ s/\\ba\\b/red/g;\n        push @data, $_;\n    }\n    open my $fhw, \"&gt;\", $file or die \"Couldn't modify file: $!\";\n    print $fhw @data;\n    close $fhw;\n}\n</code></pre>\n\n<p>Here is another way (read whole file in a scalar):</p>\n\n<pre><code>foreach my $file (glob \"/path/to/dir/a.txt\")\n{\n    #read whole file in a scalar\n    my $data = do {\n        local $/ = undef;\n        open my $fh, \"&lt;\", $file or die $!;\n        &lt;$fh&gt;;\n    };\n    $data =~ s/\\ba\\b/red/g; #replace a with red,\n\n    #modify the file\n    open my $fhw, \"&gt;\", $file or die \"Couldn't modify file: $!\";\n    print $fhw $data;\n    close $fhw;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 5, "last_activity_date": 1448616471, "creation_date": 1448616471, "answer_id": 33954187, "question_id": 33953488, "link": "https://stackoverflow.com/questions/33953488/search-a-word-in-file-and-replace-in-perl/33954187#33954187", "title": "Search a word in file and replace in Perl", "body": "<p>I'd suggest it's probably easier to use perl in <code>sed</code> mode:</p>\n\n<pre><code>perl -i.bak -p -e 's/a/red/g' *.txt\n</code></pre>\n\n<p><code>-i</code> is inplace edit (<code>-i.bak</code> saves the old as <code>.bak</code> - <code>-i</code> without a specifier doesn't create a backup - this is often not a good idea). </p>\n\n<p><code>-p</code> creates a loop that iterates all the files specified one line at a time (<code>$_</code>), applying whatever code is specified by <code>-e</code> before printing that line. In this case - <code>s///</code> applies a sed-style patttern replacement to <code>$_</code>, so this runs a search and replace over every <code>.txt</code> file. </p>\n\n<p>Perl uses <code>&lt;ARVG&gt;</code> or <code>&lt;&gt;</code> to do some magic - it checks if you specify files on your command line - if you do, it opens them and iterates them. If you don't, it reads from <code>STDIN</code>.</p>\n\n<p>So you can also do:</p>\n\n<pre><code> somecommand.sh | perl -i.bak -p -e 's/a/red/g' \n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 5030439, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bd24b16486457688b1b35dcecaf09603?s=128&d=identicon&r=PG&f=1", "display_name": "ansh", "link": "https://stackoverflow.com/users/5030439/ansh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 33954187, "answer_count": 2, "score": 0, "last_activity_date": 1448630785, "creation_date": 1448614224, "last_edit_date": 1448630785, "question_id": 33953488, "link": "https://stackoverflow.com/questions/33953488/search-a-word-in-file-and-replace-in-perl", "title": "Search a word in file and replace in Perl", "body": "<p>I want to replace word \"a\" to \"red\" in a.text files. I want to edit the same file so I tried this code but it does not work. Where am I going wrong?</p>\n\n<pre><code>@files=glob(\"a.txt\");\nforeach my $file (@files)\n{\n    open(IN,$file) or die $!;\n    &lt;IN&gt;;\n    while(&lt;IN&gt;)\n    {\n       $_=~s/a/red/g;\n       print IN $file;\n    }\n\n   close(IN)\n}\n</code></pre>\n"}, {"tags": ["c++", "perl", "go", "hashtable"], "comments": [{"owner": {"reputation": 89221, "user_id": 10320, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pijgr.jpg?s=128&g=1", "display_name": "dreamlax", "link": "https://stackoverflow.com/users/10320/dreamlax"}, "edited": false, "score": 0, "creation_date": 1448601012, "post_id": 33950565, "comment_id": 55659707, "body": "Is it possible that the C++ implementation is constructing a new <code>std::string</code> every time it is doing a lookup?"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1448601074, "post_id": 33950565, "comment_id": 55659718, "body": "Yes cache the key in a local string variable outside the for loop."}, {"owner": {"reputation": 1478, "user_id": 5557309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1621133335/picture?type=large", "display_name": "James Picone", "link": "https://stackoverflow.com/users/5557309/james-picone"}, "edited": false, "score": 0, "creation_date": 1448601105, "post_id": 33950565, "comment_id": 55659727, "body": "Can you inspect the assembly output for the C++ and the Go versions? It&#39;s entirely possible that a compiler is being clever, and doing something like eliminating the loop because it has no side effects."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1448601174, "post_id": 33950565, "comment_id": 55659749, "body": "Also grab the string in x with a reference or pointer to avoid copying."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 3, "creation_date": 1448601268, "post_id": 33950565, "comment_id": 55659778, "body": "Did you turn optimization on?"}, {"owner": {"reputation": 89221, "user_id": 10320, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pijgr.jpg?s=128&g=1", "display_name": "dreamlax", "link": "https://stackoverflow.com/users/10320/dreamlax"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1448601341, "post_id": 33950565, "comment_id": 55659793, "body": "@Galik: I would say not. When I compile the code without <code>-O2</code> it takes almost the same amount as time as OP, but with <code>-O2</code> it takes no time at all."}, {"owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 0, "creation_date": 1448601466, "post_id": 33950565, "comment_id": 55659832, "body": "Thanks for the suggestions, I updated the C++ version (see &quot;Update 1&quot;) but there is not much difference."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1448601502, "post_id": 33950565, "comment_id": 55659843, "body": "The conversion of the string literal to a string is a greater cost than the return value."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 89221, "user_id": 10320, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pijgr.jpg?s=128&g=1", "display_name": "dreamlax", "link": "https://stackoverflow.com/users/10320/dreamlax"}, "edited": false, "score": 0, "creation_date": 1448601550, "post_id": 33950565, "comment_id": 55659861, "body": "@dreamlax optimization probably removes the hash access (the result of which is unused) entirely. Probably need to assign it to a <code>volatile</code> variable or some such."}, {"owner": {"reputation": 564, "user_id": 1972061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fDQyj.jpg?s=128&g=1", "display_name": "cezheng", "link": "https://stackoverflow.com/users/1972061/cezheng"}, "edited": false, "score": 0, "creation_date": 1448601983, "post_id": 33950565, "comment_id": 55659961, "body": "outside the for loop, add  string key = &quot;China&quot;;  in for loop use mymap[key]"}, {"owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "reply_to_user": {"reputation": 564, "user_id": 1972061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fDQyj.jpg?s=128&g=1", "display_name": "cezheng", "link": "https://stackoverflow.com/users/1972061/cezheng"}, "edited": false, "score": 0, "creation_date": 1448602333, "post_id": 33950565, "comment_id": 55660039, "body": "@cezheng and other.  Tried it. See update 3.  Thx."}, {"owner": {"reputation": 564, "user_id": 1972061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fDQyj.jpg?s=128&g=1", "display_name": "cezheng", "link": "https://stackoverflow.com/users/1972061/cezheng"}, "edited": false, "score": 0, "creation_date": 1448602436, "post_id": 33950565, "comment_id": 55660075, "body": "@codingFun what about mymap.at(key);"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1448602439, "post_id": 33950565, "comment_id": 55660077, "body": "What is the time with update 3 and optimization?"}, {"owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "reply_to_user": {"reputation": 564, "user_id": 1972061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fDQyj.jpg?s=128&g=1", "display_name": "cezheng", "link": "https://stackoverflow.com/users/1972061/cezheng"}, "edited": false, "score": 0, "creation_date": 1448603226, "post_id": 33950565, "comment_id": 55660296, "body": "@cezheng, no difference between <code>mymap.at(key);</code> and <code>mymap[key];</code>"}, {"owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1448603349, "post_id": 33950565, "comment_id": 55660339, "body": "@neil-kirk In update 3, with optimization, it&#39;s about 80ms.  So optimization really made a huge difference here."}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1448603558, "post_id": 33950565, "comment_id": 55660405, "body": "Do you also have a debugger attached?"}, {"owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1448604126, "post_id": 33950565, "comment_id": 55660554, "body": "@MooseBoys  no sir. I didn&#39;t.  Your question got me curious and I ran it from gdb (on the update 3 version, non-optimized),  it&#39;s only marginally slower than running directly: about 230ms."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1448606557, "post_id": 33950565, "comment_id": 55661394, "body": "I would actually not care about these benchmarks because at least at the moment the Perl code is not doing what it should do, even after it got &quot;fixes&quot;. I don&#39;t know about the other code but it might be wrong too or the compiler would have optimized stuff away. Definitely far from any reliable benchmarks."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 3, "creation_date": 1448606881, "post_id": 33950565, "comment_id": 55661517, "body": "Apart from that: using benchmarks which run not even a second is useless because it is pure luck in which power mode the processor is currently and what processes might just run in parallel and eat CPU time. Real benchmarks run hours to make sure that the benchmark is not affected by such problems too much,"}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1448610052, "post_id": 33950565, "comment_id": 55662844, "body": "Why didn&#39;t you improved perl version  <code>$x = $mymap{&quot;China&quot;};</code> to <code>$mymap{&quot;China&quot;}</code> although it will give you a <code>warning</code> and change this  <code>for ($i=0; $i&lt;1000000; $i++)</code> to perlish <code>for my $i(0 .. 1000000)</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1448659323, "post_id": 33950565, "comment_id": 55687184, "body": "Perl&#39;s version might not be the fastest since it has to deal with two string storage formats. It also has heavy data types. There&#39;s also time spent storing the keys into a second hash so they can be used by multiple hashes. Perl&#39;s version is very robust to attacks, which may or may not have an effect on performance. Also, <code>for ($i=0; $i&lt;1000000; $i++)</code> is an inefficient way of writing <code>for my $i (0..999999)</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1448659378, "post_id": 33950565, "comment_id": 55687200, "body": "PS, <code>mymap[&quot;China&quot;];</code> should be <code>x = mymap[&quot;China&quot;];</code> in the C++ version to be equivalent to the other two."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1448659446, "post_id": 33950565, "comment_id": 55687223, "body": "PS, You misspelled Madrid :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1448659566, "post_id": 33950565, "comment_id": 55687271, "body": "I find it very interesting that you got the same numbers for <code>$mymap[&quot;China&quot;]</code> (effectively <code>$mymap[0]</code>) as for <code>$mymap{&quot;China&quot;}</code>, or did you forget to the update the time after changing the code?"}], "answers": [{"comments": [{"owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 0, "creation_date": 1448602203, "post_id": 33950725, "comment_id": 55660012, "body": "removing the extra constructor call helps,  but it seems C++ version is still fairly slow.  Thanks!"}, {"owner": {"reputation": 1478, "user_id": 5557309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1621133335/picture?type=large", "display_name": "James Picone", "link": "https://stackoverflow.com/users/5557309/james-picone"}, "reply_to_user": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 0, "creation_date": 1448603392, "post_id": 33950725, "comment_id": 55660351, "body": "I&#39;m still really curious to see what the difference between the Go assembly and the C++ assembly are."}], "tags": [], "owner": {"reputation": 1478, "user_id": 5557309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1621133335/picture?type=large", "display_name": "James Picone", "link": "https://stackoverflow.com/users/5557309/james-picone"}, "is_accepted": false, "score": 2, "last_activity_date": 1448601765, "last_edit_date": 1495542616, "creation_date": 1448601765, "answer_id": 33950725, "question_id": 33950565, "link": "https://stackoverflow.com/questions/33950565/performance-of-hash-table-why-is-c-the-slowest/33950725#33950725", "title": "Performance of hash table, why is C++ the slowest?", "body": "<p>This is a guess:</p>\n\n<p>unordered_map::operator[] requires a string argument. You are providing a char*. Without optimisations on, the C++ version is likely calling the std::string(char*) constructor a million times in order to turn \"China\" into a std::string. Go's language spec likely makes \"string literals\" of the same type as string, so no constructors need to be called.</p>\n\n<p>With optimisations on, the string constructor will get hoisted out of the loop and you won't see the same problem. Or quite possibly no code will be generated except the two system calls to get the time and the system call to print the difference, because ultimately it all has no effect.</p>\n\n<p>To confirm that, you'd have to actually look at what assembly is being generated. That'll be a compiler option. See <a href=\"https://stackoverflow.com/questions/137038/how-do-you-get-assembler-output-from-c-c-source-in-gcc\">this</a> question for the flags required for GCC.</p>\n"}, {"comments": [{"owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 0, "creation_date": 1448605988, "post_id": 33951352, "comment_id": 55661178, "body": "Thanks @steffen-ullrich for pointing the syntax. It&#39;s now fixed, but performance number didn&#39;t go up."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 1, "creation_date": 1448606088, "post_id": 33951352, "comment_id": 55661213, "body": "@codingFun: Don&#39;t expect the number to go up because it should do actually more complex operations after the code got fixed. Also like I said: benchmarks are lies and micro benchmarks like yours doubly so. Read the parts about CPU, power mode, scheduler.... And verify what the other code does, based on the generated code and not your input. Like I said a smart compiler might realize that it does nothing useful and optimize it away."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 0, "creation_date": 1448606400, "post_id": 33951352, "comment_id": 55661326, "body": "@codingFun: Apart from that your code is still wrong and if you would actually use warnings like I&#39;ve recommended you would see it."}, {"owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 0, "creation_date": 1448606780, "post_id": 33951352, "comment_id": 55661482, "body": "you are right. Micro benchmark can only give a very rough idea. More study would be needed to make a choice on which language to choose for a project.   By the way, I had the typo in <code>$x = $mymap[&quot;China&quot;];</code> when I was editing it. It&#39;s now updated now. Performance is about 180ms."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 2, "creation_date": 1448607055, "post_id": 33951352, "comment_id": 55661567, "body": "@codingFun: as you can see the performance varies a lot when making small changes.  Just a simple change from <code>$x = $mymap{..}</code> to <code>my $x = $mymap{...}</code> will affect the performance significantly. And on my system there are differences of 50% between multiple runs of the program."}, {"owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 0, "creation_date": 1448607422, "post_id": 33951352, "comment_id": 55661709, "body": "you are right again, I tried <code>my $x = $mymap{...}</code> and the speed does increase (time is reduced) by about 25%.  Since 200ms is a short time,  there are big difference from run to run (as you pointed out), I stabilized it by running the loop of 30M (instead of 1M) and normalized the time for 1M loops."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 16, "last_activity_date": 1448607616, "last_edit_date": 1448607616, "creation_date": 1448605305, "answer_id": 33951352, "question_id": 33950565, "link": "https://stackoverflow.com/questions/33950565/performance-of-hash-table-why-is-c-the-slowest/33951352#33951352", "title": "Performance of hash table, why is C++ the slowest?", "body": "<p>From your Perl code (before your attempts to fix it):</p>\n\n<blockquote>\n<pre><code>@mymap = ();\n$mymap[\"U.S.\"] = \"Washington\";\n$mymap[\"U.K.\"] = \"London\";\n</code></pre>\n</blockquote>\n\n<p>This is not a map but an array. The syntax for hash maps is:</p>\n\n<pre><code>  %mymap;\n  $mymap{\"U.S.\"} = ....\n</code></pre>\n\n<p>Thus what you effectively do is to create an array and not a hash map and access the element 0 all the time. \nPlease, use <code>use strict;</code> and <code>use warnings;</code> all the time with Perl and even a simple syntax check with warnings would have shown you the problem:</p>\n\n<pre><code>perl -cw x.pl\nArgument \"U.S.\" isn't numeric in array element at x.pl line 9.\nArgument \"U.K.\" isn't numeric in array element at x.pl line 10.\n</code></pre>\n\n<p>Apart from that the main part of the benchmark effectively does nothing useful (assign a variable and never use it) and some compilers can detect it and simply optimize it away.</p>\n\n<p>If you would check the code generated by your Perl program you would see:</p>\n\n<pre><code>$ perl -MO=Deparse x.pl\n@mymap = ();\n$mymap[0] = 'Washington';\n$mymap[0] = 'London';\n...\nfor ($i = 0; $i &lt; 1000000; ++$i) {\n    $x = $mymap[0];\n}\n</code></pre>\n\n<p>That is it detects the problem at compile time and replaces it with an access to array index 0.</p>\n\n<p>Thus whenever do benchmarks you need to:</p>\n\n<ul>\n<li>Check that your program actually does what it is supposed to.</li>\n<li>Check that the compiler does not optimize things away and does not execute stuff at compile time where other languages will do it at run time. Any kind of statements with no or predictable results are prone to such optimization.</li>\n<li>Verify that you actually measure what you intend to measure and not something else. Even small changes to the program can affect the run time because there is a memory allocation needed were not was before etc and these changes might not be related to what you intend to measure. In your benchmark you measure the access to the same hash element again and again without any access to other elements in between. This is an activity which can play very nice with processor caches but probably does not reflect real world use.</li>\n</ul>\n\n<p>And, using a simple timer is not a realistic benchmark. There are other processes on the system, there is the scheduler, there is cache trashing... and with today's CPU it highly depends on the load on the system because maybe the CPU will run one benchmark in a lower power mode than the other benchmarks, i.e. with a different CPU clock. For example multiple runs of the same \"benchmark\" vary in the measured time between 100ms and 150ms on my system. </p>\n\n<p>Benchmarks are lies and micro benchmarks like yours doubly so.</p>\n"}, {"tags": [], "owner": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "is_accepted": false, "score": 3, "last_activity_date": 1448608445, "creation_date": 1448608445, "answer_id": 33952054, "question_id": 33950565, "link": "https://stackoverflow.com/questions/33950565/performance-of-hash-table-why-is-c-the-slowest/33952054#33952054", "title": "Performance of hash table, why is C++ the slowest?", "body": "<p>This just shows that for this particular use case Go hash map implementation is optimized very well.</p>\n\n<p><code>mymap[\"China\"]</code> calls <a href=\"https://github.com/golang/go/blob/432cb66f16b2bb6a167725057168bbe4aefe5fb5/src/runtime/hashmap_fast.go#L181\" rel=\"nofollow\">mapaccess1_faststr</a> that is specifically optimized for string keys. Particularly for small one-bucket maps the hash code is not even calculated for short (less than 32 bytes) strings.</p>\n"}, {"comments": [{"owner": {"reputation": 99643, "user_id": 445517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/57e2ba76e6290c4e9e19821a068bc8c1?s=128&d=identicon&r=PG", "display_name": "CodesInChaos", "link": "https://stackoverflow.com/users/445517/codesinchaos"}, "edited": false, "score": 0, "creation_date": 1448628398, "post_id": 33955645, "comment_id": 55673052, "body": "Switching to <code>char*</code> means that you use reference equality, so the code won&#39;t work if you pass it strings which come from a different source."}, {"owner": {"reputation": 8075, "user_id": 2169853, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/68b89009f4066d3e1adbe72d4329c8d3?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/2169853/jens"}, "reply_to_user": {"reputation": 99643, "user_id": 445517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/57e2ba76e6290c4e9e19821a068bc8c1?s=128&d=identicon&r=PG", "display_name": "CodesInChaos", "link": "https://stackoverflow.com/users/445517/codesinchaos"}, "edited": false, "score": 0, "creation_date": 1448628612, "post_id": 33955645, "comment_id": 55673169, "body": "@CodesInChaos You are right, but I don&#39;t think this is the point of that micro-benchmark."}, {"owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 0, "creation_date": 1448639665, "post_id": 33955645, "comment_id": 55679389, "body": "Thanks @Jens for the detailed explanation. The collision is indeed a big problem. Using a different key, &quot;France&quot;, improves the performance by about 25%.  Comparing pointers does improve the performance tremendously but it&#39;s not what we need here.  I believe the performance has a lot to do with the number of instructions executed, as  james-picone pointed out on the assembly generated.  Created a update 5 on the question. Thanks."}, {"owner": {"reputation": 8075, "user_id": 2169853, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/68b89009f4066d3e1adbe72d4329c8d3?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/2169853/jens"}, "reply_to_user": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 0, "creation_date": 1448640560, "post_id": 33955645, "comment_id": 55679861, "body": "@codingFun The example using the pointers shows that a good part of the runtime is spent computing hash values, because this is what changes with the type. I guess that the go version either has a much better hash function for strings, maybe caching the has value and thus computing it only once, or that it uses some other strategy to implement a map for small strings."}, {"owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 0, "creation_date": 1448642209, "post_id": 33955645, "comment_id": 55680581, "body": "@jens, same here. Just wish C++ implementation could catch up with that of go."}], "tags": [], "owner": {"reputation": 8075, "user_id": 2169853, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/68b89009f4066d3e1adbe72d4329c8d3?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/2169853/jens"}, "is_accepted": false, "score": 4, "last_activity_date": 1448624111, "last_edit_date": 1448624111, "creation_date": 1448621064, "answer_id": 33955645, "question_id": 33950565, "link": "https://stackoverflow.com/questions/33950565/performance-of-hash-table-why-is-c-the-slowest/33955645#33955645", "title": "Performance of hash table, why is C++ the slowest?", "body": "<p>I've modified your example a little bit to get some details about the structure of the hash table:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;unordered_map&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;chrono&gt;\n\nusing namespace std;\nint main()\n{\n    std::unordered_map&lt;std::string, std::string&gt; mymap;\n\n    // populating container:\n    mymap[\"U.S.\"] = \"Washington\";\n    mymap[\"U.K.\"] = \"London\";\n    mymap[\"France\"] = \"Paris\";\n    mymap[\"Russia\"] = \"Moscow\";\n    mymap[\"China\"] = \"Beijing\";\n    mymap[\"Germany\"] = \"Berlin\";\n    mymap[\"Japan\"] = \"Tokyo\";\n    mymap[\"China\"] = \"Beijing\";\n    mymap[\"Italy\"] = \"Rome\";\n    mymap[\"Spain\"] = \"Madrad\";\n\n    std::hash&lt;std::string&gt; h;\n    for ( auto const&amp; i : mymap )\n    {\n\n        printf( \"hash(%s) = %ud\\n\", i.first.c_str(), h( i.first ) );\n    }\n\n    for ( int i = 0; i != mymap.bucket_count(); ++i )\n    {\n        auto const bucketsize = mymap.bucket_size( i );\n        if ( 0 != bucketsize )\n        {\n            printf( \"size of bucket %d = %d\\n\", i, bucketsize );\n        }\n    }\n\n    auto const start = std::chrono::steady_clock::now();\n\n    string const x = \"China\";\n    std::string res;\n\n    for ( int i = 0; i &lt; 1000000; i++ )\n    {\n        mymap.find( x );\n    }\n\n    auto const elapsed = std::chrono::steady_clock::now() - start;\n    printf( \"%s\\n\", res );\n    printf( \"took %d ms\\n\",\n            std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;( elapsed ).count() );\n    return 0;\n}\n</code></pre>\n\n<p>Running this on my system, I get a runtime of ~68ms with the following output:</p>\n\n<pre><code>hash(Japan) = 3611029618d\nhash(Spain) = 749986602d\nhash(China) = 3154384700d\nhash(U.S.) = 2546447179d\nhash(Italy) = 2246786301d\nhash(Germany) = 2319993784d\nhash(U.K.) = 2699630607d\nhash(France) = 3266727934d\nhash(Russia) = 3992029278d\nsize of bucket 0 = 0\nsize of bucket 1 = 0\nsize of bucket 2 = 1\nsize of bucket 3 = 1\nsize of bucket 4 = 1\nsize of bucket 5 = 0\nsize of bucket 6 = 1\nsize of bucket 7 = 0\nsize of bucket 8 = 0\nsize of bucket 9 = 2\nsize of bucket 10 = 3\n</code></pre>\n\n<p>It turns out that the hash table is not well optimized and contains some collisions. Further printing the elements in the bucket shows that Spain and China are in bucket 9. The bucket is probably a linked list with nodes distributed in memory, explaining the performance drop.</p>\n\n<p>If you choose another hash table size such that there are no collisions, you can get a speedup. I tested it with adding <code>mymap.rehash(1001)</code> and got I speedup of 20-30% to something between 44-52ms.</p>\n\n<p>Now, another point would be computation of the hash values for \"China\". The function is executed in each iteration. We can make this go away when we switch to constant plain C strings:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;unordered_map&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;chrono&gt;\n\nstatic auto constexpr us = \"U.S.\";\nstatic auto constexpr uk = \"U.K.\";\nstatic auto constexpr fr = \"France\";\nstatic auto constexpr ru = \"Russia\";\nstatic auto constexpr cn = \"China\";\nstatic auto constexpr ge = \"Germany\";\nstatic auto constexpr jp = \"Japan\";\nstatic auto constexpr it = \"Italy\";\nstatic auto constexpr sp = \"Spain\";\n\nusing namespace std;\nint main()\n{\n    std::unordered_map&lt;const char*, std::string&gt; mymap;\n\n    // populating container:\n    mymap[us] = \"Washington\";\n    mymap[uk] = \"London\";\n    mymap[fr] = \"Paris\";\n    mymap[ru] = \"Moscow\";\n    mymap[cn] = \"Beijing\";\n    mymap[ge] = \"Berlin\";\n    mymap[jp] = \"Tokyo\";\n    mymap[it] = \"Rome\";\n    mymap[sp] = \"Madrad\";\n\n    string const x = \"China\";\n    char const* res = nullptr;\n    auto const start = std::chrono::steady_clock::now();\n    for ( int i = 0; i &lt; 1000000; i++ )\n    {\n        res = mymap[cn].c_str();\n    }\n\n    auto const elapsed = std::chrono::steady_clock::now() - start;\n    printf( \"%s\\n\", res );\n    printf( \"took %d ms\\n\",\n            std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;( elapsed ).count() );\n    return 0;\n}\n</code></pre>\n\n<p>On my machine, this reduces the runtime by 50% to ~20ms. The difference is that instead of computing the hash value from the string contents, it now just transforms the address into a hash value which is much faster because it just returns the address value as a size_t. We also do not need to rehash because there are no collisions for the bucket with <code>cn</code>.</p>\n"}], "owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1853, "favorite_count": 1, "answer_count": 4, "score": 7, "last_activity_date": 1448639299, "creation_date": 1448600632, "last_edit_date": 1448639299, "question_id": 33950565, "link": "https://stackoverflow.com/questions/33950565/performance-of-hash-table-why-is-c-the-slowest", "title": "Performance of hash table, why is C++ the slowest?", "body": "<p>Ran a simple performance test on hash,  it appears C++ version is the slower than both the perl version and the golang version. </p>\n\n<ul>\n<li>perl version took about 200 millisecond,  </li>\n<li>C++ version took 280 millisecond. </li>\n<li>golang version took 56 millisecond. </li>\n</ul>\n\n<p>On my PC with Core(TM) i7-2670QM CPU @ 2.20GHz, Ubuntu 14.04.3LTS,  </p>\n\n<p>Any ideas?</p>\n\n<p>perl version</p>\n\n<pre><code>use Time::HiRes qw( usleep ualarm gettimeofday tv_interval nanosleep\n                      clock_gettime clock_getres clock_nanosleep clock\n                      stat );\nsub getTS {\n    my ($seconds, $microseconds) = gettimeofday;\n    return $seconds + (0.0+ $microseconds)/1000000.0;\n}\nmy %mymap;\n$mymap{\"U.S.\"} = \"Washington\";\n$mymap{\"U.K.\"} = \"London\";\n$mymap{\"France\"} = \"Paris\";\n$mymap{\"Russia\"} = \"Moscow\";\n$mymap{\"China\"} = \"Beijing\";\n$mymap{\"Germany\"} = \"Berlin\";\n$mymap{\"Japan\"} = \"Tokyo\";\n$mymap{\"China\"} = \"Beijing\";\n$mymap{\"Italy\"} = \"Rome\";\n$mymap{\"Spain\"} = \"Madrad\";\n$x = \"\";\n$start = getTS();\nfor ($i=0; $i&lt;1000000; $i++) {\n    $x = $mymap{\"China\"};\n}\nprintf \"took %f sec\\n\", getTS() - $start;\n</code></pre>\n\n<p>C++ version</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;unordered_map&gt;\n#include &lt;sys/time.h&gt;\n\ndouble getTS() {\n    struct timeval tv;\n    gettimeofday(&amp;tv, NULL);\n    return tv.tv_sec + tv.tv_usec/1000000.0;\n}\nusing namespace std;\nint main () {\n  std::unordered_map&lt;std::string,std::string&gt; mymap;\n\n  // populating container:\n    mymap[\"U.S.\"] = \"Washington\";\n    mymap[\"U.K.\"] = \"London\";\n    mymap[\"France\"] = \"Paris\";\n    mymap[\"Russia\"] = \"Moscow\";\n    mymap[\"China\"] = \"Beijing\";\n    mymap[\"Germany\"] = \"Berlin\";\n    mymap[\"Japan\"] = \"Tokyo\";\n    mymap[\"China\"] = \"Beijing\";\n    mymap[\"Italy\"] = \"Rome\";\n    mymap[\"Spain\"] = \"Madrad\";  \n\n  double start = getTS();\n  string x;\n  for (int i=0; i&lt;1000000; i++) {\n      mymap[\"China\"];\n  }\n  printf(\"took %f sec\\n\", getTS() - start);\n  return 0;\n}\n</code></pre>\n\n<p>Golang version</p>\n\n<pre><code>package main\n\nimport \"fmt\"\nimport \"time\"\n\nfunc main() {\n    var x string\n    mymap := make(map[string]string)\n    mymap[\"U.S.\"] = \"Washington\";\n    mymap[\"U.K.\"] = \"London\";\n    mymap[\"France\"] = \"Paris\";\n    mymap[\"Russia\"] = \"Moscow\";\n    mymap[\"China\"] = \"Beijing\";\n    mymap[\"Germany\"] = \"Berlin\";\n    mymap[\"Japan\"] = \"Tokyo\";\n    mymap[\"China\"] = \"Beijing\";\n    mymap[\"Italy\"] = \"Rome\";\n    mymap[\"Spain\"] = \"Madrad\";\n    t0 := time.Now()\n    sum := 1\n    for sum &lt; 1000000 {\n        x = mymap[\"China\"]\n        sum += 1\n    }\n    t1 := time.Now()\n    fmt.Printf(\"The call took %v to run.\\n\", t1.Sub(t0))\n    fmt.Println(x)\n}\n</code></pre>\n\n<p><strong>Update 1</strong></p>\n\n<p>To improve C++ version, changed <code>x = mymap[\"China\"];</code> to <code>mymap[\"China\"];</code>, but there is very little difference in performance. </p>\n\n<p><strong>Update 2</strong></p>\n\n<p>I got the original result when compiling without any optimization: <code>g++ -std=c++11 unorderedMap.cc</code>.  With \"-O2\" optimization, it cost only about half the time (150ms)</p>\n\n<p><strong>Update 3</strong></p>\n\n<p>To remove the possible <code>char*</code> to <code>string</code> constructor call, I created a string constant. The time comes down to about 220ms (no optimization in compiling).  Thanks to the suggestion from @neil-kirk, with optimization, (-O2 flag),  the time is about 80ms.  </p>\n\n<pre><code>  double start = getTS();\n  string x = \"China\";\n  for (int i=0; i&lt;1000000; i++) {\n      mymap[x];\n  }\n</code></pre>\n\n<p><strong>Update 4</strong></p>\n\n<p>Thanks to @steffen-ullrich who pointed out there is a syntax error for perl version. I Changed it. The performance number is about 150ms. </p>\n\n<p><strong>Update 5</strong> </p>\n\n<p>It appears the number of executed instructions matters. Using command <code>valgrind --tool=cachegrind &lt;cmd&gt;</code></p>\n\n<p>For Go version</p>\n\n<pre><code>$ valgrind --tool=cachegrind  ./te1\n==2103== Cachegrind, a cache and branch-prediction profiler\n==2103== Copyright (C) 2002-2013, and GNU GPL'd, by Nicholas Nethercote et al.\n==2103== Using Valgrind-3.10.0.SVN and LibVEX; rerun with -h for copyright info\n==2103== Command: ./te1\n==2103== \n--2103-- warning: L3 cache found, using its data for the LL simulation.\nThe call took 1.647099s to run.\nBeijing\n==2103== \n==2103== I   refs:      255,763,381\n==2103== I1  misses:          3,709\n==2103== LLi misses:          2,743\n==2103== I1  miss rate:        0.00%\n==2103== LLi miss rate:        0.00%\n==2103== \n==2103== D   refs:      109,437,132  (77,838,331 rd   + 31,598,801 wr)\n==2103== D1  misses:        352,474  (   254,714 rd   +     97,760 wr)\n==2103== LLd misses:        149,260  (    96,250 rd   +     53,010 wr)\n==2103== D1  miss rate:         0.3% (       0.3%     +        0.3%  )\n==2103== LLd miss rate:         0.1% (       0.1%     +        0.1%  )\n==2103== \n==2103== LL refs:           356,183  (   258,423 rd   +     97,760 wr)\n==2103== LL misses:         152,003  (    98,993 rd   +     53,010 wr)\n==2103== LL miss rate:          0.0% (       0.0%     +        0.1%  )\n</code></pre>\n\n<p>For C++ optimized version (no optimization flag)</p>\n\n<pre><code>$ valgrind --tool=cachegrind ./a.out\n==2180== Cachegrind, a cache and branch-prediction profiler\n==2180== Copyright (C) 2002-2013, and GNU GPL'd, by Nicholas Nethercote et al.\n==2180== Using Valgrind-3.10.0.SVN and LibVEX; rerun with -h for copyright info\n==2180== Command: ./a.out\n==2180== \n--2180-- warning: L3 cache found, using its data for the LL simulation.\ntook 64.657681 sec\n==2180== \n==2180== I   refs:      5,281,474,482\n==2180== I1  misses:            1,710\n==2180== LLi misses:            1,651\n==2180== I1  miss rate:          0.00%\n==2180== LLi miss rate:          0.00%\n==2180== \n==2180== D   refs:      3,170,495,683  (1,840,363,429 rd   + 1,330,132,254 wr)\n==2180== D1  misses:           12,055  (       10,374 rd   +         1,681 wr)\n==2180== LLd misses:            7,383  (        6,132 rd   +         1,251 wr)\n==2180== D1  miss rate:           0.0% (          0.0%     +           0.0%  )\n==2180== LLd miss rate:           0.0% (          0.0%     +           0.0%  )\n==2180== \n==2180== LL refs:              13,765  (       12,084 rd   +         1,681 wr)\n==2180== LL misses:             9,034  (        7,783 rd   +         1,251 wr)\n==2180== LL miss rate:            0.0% (          0.0%     +           0.0%  )\n</code></pre>\n\n<p>For C++ optimized version</p>\n\n<pre><code>$ valgrind --tool=cachegrind ./a.out\n==2157== Cachegrind, a cache and branch-prediction profiler\n==2157== Copyright (C) 2002-2013, and GNU GPL'd, by Nicholas Nethercote et al.\n==2157== Using Valgrind-3.10.0.SVN and LibVEX; rerun with -h for copyright info\n==2157== Command: ./a.out\n==2157== \n--2157-- warning: L3 cache found, using its data for the LL simulation.\ntook 9.419447 sec\n==2157== \n==2157== I   refs:      1,451,459,660\n==2157== I1  misses:            1,599\n==2157== LLi misses:            1,549\n==2157== I1  miss rate:          0.00%\n==2157== LLi miss rate:          0.00%\n==2157== \n==2157== D   refs:        430,486,197  (340,358,108 rd   + 90,128,089 wr)\n==2157== D1  misses:           12,008  (     10,337 rd   +      1,671 wr)\n==2157== LLd misses:            7,372  (      6,120 rd   +      1,252 wr)\n==2157== D1  miss rate:           0.0% (        0.0%     +        0.0%  )\n==2157== LLd miss rate:           0.0% (        0.0%     +        0.0%  )\n==2157== \n==2157== LL refs:              13,607  (     11,936 rd   +      1,671 wr)\n==2157== LL misses:             8,921  (      7,669 rd   +      1,252 wr)\n==2157== LL miss rate:            0.0% (        0.0%     +        0.0%  )\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 2829435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e34c08f4c00e87d0636c3e757feabeab?s=128&d=identicon&r=PG&f=1", "display_name": "Valeria Kaya", "link": "https://stackoverflow.com/users/2829435/valeria-kaya"}, "edited": false, "score": 0, "creation_date": 1448583267, "post_id": 33948660, "comment_id": 55656279, "body": "Perfect! I appreciate the help!"}, {"owner": {"reputation": 41196, "user_id": 887539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5baef9617bdee6db2f534c118bcbccee?s=128&d=identicon&r=PG", "display_name": "andlrc", "link": "https://stackoverflow.com/users/887539/andlrc"}, "reply_to_user": {"reputation": 185, "user_id": 2829435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e34c08f4c00e87d0636c3e757feabeab?s=128&d=identicon&r=PG&f=1", "display_name": "Valeria Kaya", "link": "https://stackoverflow.com/users/2829435/valeria-kaya"}, "edited": false, "score": 0, "creation_date": 1448583378, "post_id": 33948660, "comment_id": 55656300, "body": "@ValeriaKaya No problem, also note that <code>*</code> will match zero or more times. That means that <code>M J</code> will be matches, if you use <code>+</code> it will match one or more times, also take a look at <code>{n,m}</code>"}, {"owner": {"reputation": 41196, "user_id": 887539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5baef9617bdee6db2f534c118bcbccee?s=128&d=identicon&r=PG", "display_name": "andlrc", "link": "https://stackoverflow.com/users/887539/andlrc"}, "reply_to_user": {"reputation": 185, "user_id": 2829435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e34c08f4c00e87d0636c3e757feabeab?s=128&d=identicon&r=PG&f=1", "display_name": "Valeria Kaya", "link": "https://stackoverflow.com/users/2829435/valeria-kaya"}, "edited": false, "score": 0, "creation_date": 1448583501, "post_id": 33948660, "comment_id": 55656323, "body": "@ValeriaKaya It&#39;s always nice to help people who do an effert before asking :-)"}, {"owner": {"reputation": 185, "user_id": 2829435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e34c08f4c00e87d0636c3e757feabeab?s=128&d=identicon&r=PG&f=1", "display_name": "Valeria Kaya", "link": "https://stackoverflow.com/users/2829435/valeria-kaya"}, "edited": false, "score": 0, "creation_date": 1448583768, "post_id": 33948660, "comment_id": 55656385, "body": "it is also nice to get help from nice people instead of the ones saying &quot;&quot;go read the manual&quot; ;)"}, {"owner": {"reputation": 41196, "user_id": 887539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5baef9617bdee6db2f534c118bcbccee?s=128&d=identicon&r=PG", "display_name": "andlrc", "link": "https://stackoverflow.com/users/887539/andlrc"}, "reply_to_user": {"reputation": 185, "user_id": 2829435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e34c08f4c00e87d0636c3e757feabeab?s=128&d=identicon&r=PG&f=1", "display_name": "Valeria Kaya", "link": "https://stackoverflow.com/users/2829435/valeria-kaya"}, "edited": false, "score": 0, "creation_date": 1448583824, "post_id": 33948660, "comment_id": 55656394, "body": "@ValeriaKaya Well technically I said you should read the manual ;-)"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1448583867, "post_id": 33948660, "comment_id": 55656398, "body": "I like how you welcome the OP the way you do. I&#39;ve noticed that SO can be rough at times, so it&#39;s nice to see a warming intro. ++. Kudos."}, {"owner": {"reputation": 185, "user_id": 2829435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e34c08f4c00e87d0636c3e757feabeab?s=128&d=identicon&r=PG&f=1", "display_name": "Valeria Kaya", "link": "https://stackoverflow.com/users/2829435/valeria-kaya"}, "edited": false, "score": 0, "creation_date": 1448584626, "post_id": 33948660, "comment_id": 55656556, "body": "I mean the ones just being rude and saying things like &quot;go read the manual before asking&quot;, &quot;learn a little bit of coding before trying this&quot;, such and such"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448616940, "post_id": 33948660, "comment_id": 55666435, "body": "Stack Overflow is a little rough, because it is about helping programmers with their programming problems. It gets a steady flow of people who are looking to just outsource their day job, or are otherwise being too lazy to ask for free help effectively. You will get good answers - even to trivial problems - if you show some effort before you ask. If it <i>looks</i> like you&#39;re just being lazy, you won&#39;t get a lot of tolerance."}], "tags": [], "owner": {"reputation": 41196, "user_id": 887539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5baef9617bdee6db2f534c118bcbccee?s=128&d=identicon&r=PG", "display_name": "andlrc", "link": "https://stackoverflow.com/users/887539/andlrc"}, "is_accepted": true, "score": 2, "last_activity_date": 1448582955, "creation_date": 1448582955, "answer_id": 33948660, "question_id": 33948625, "link": "https://stackoverflow.com/questions/33948625/selecting-only-2-names-by-regex/33948660#33948660", "title": "Selecting only 2 names by regex", "body": "<p>You are almost there, you need to use the match the beginning of the line metacharacter (<code>^</code>):</p>\n\n<pre><code>if ($input =~ /^([A-Z][a-z]*)\\s([A-Z][a-z]*)$/){\n    print \"$2, $1\";\n}\n</code></pre>\n\n<p>See <a href=\"http://perldoc.perl.org/perlre.html#Regular-Expressions\" rel=\"nofollow\">http://perldoc.perl.org/perlre.html#Regular-Expressions</a></p>\n"}], "owner": {"reputation": 185, "user_id": 2829435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e34c08f4c00e87d0636c3e757feabeab?s=128&d=identicon&r=PG&f=1", "display_name": "Valeria Kaya", "link": "https://stackoverflow.com/users/2829435/valeria-kaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 33948660, "answer_count": 1, "score": 2, "last_activity_date": 1448582955, "creation_date": 1448582553, "question_id": 33948625, "link": "https://stackoverflow.com/questions/33948625/selecting-only-2-names-by-regex", "title": "Selecting only 2 names by regex", "body": "<p>Input is John Doe, desired output is Doe, John. Bad input is John Smith Doe</p>\n\n<p>my code is</p>\n\n<pre><code>    if ($input =~ m/([A-Z][a-z]*)\\s([A-Z][a-z]*)$/){\n    print \"$2, $1\";\n}\n</code></pre>\n\n<p>It works fine with John Doe, but when John Smith Doe entered, I want to display an error message but my code displays Doe, Smith. What am I doing wrong?</p>\n"}, {"tags": ["perl", "unix", "scripting", "installation"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1448565756, "post_id": 33945026, "comment_id": 55650395, "body": "Please provide 1) the actual error message, 2) the output of <code>perl -E&#39;say for @INC&#39;</code>, and 3) the complete path to <code>RecDescent.pm</code>."}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 2, "creation_date": 1448571203, "post_id": 33945026, "comment_id": 55652503, "body": "Modulenames are case-sensitive ... your error message hints that you mistyped the modulename."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1448624460, "post_id": 33945026, "comment_id": 55670916, "body": "Please don&#39;t trash your own question. That&#39;s not very useful for people who come along later looking for help with similar problems."}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 5228070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec02741cfd5fb6e86f8b7dcd4881790?s=128&d=identicon&r=PG&f=1", "display_name": "santhosh", "link": "https://stackoverflow.com/users/5228070/santhosh"}, "edited": false, "score": 0, "creation_date": 1448623526, "post_id": 33955799, "comment_id": 55670457, "body": "Thanks Boss... (Cross)  changing PERL5LIB to /home/xxx/perl/Parse-RecDescent-1.967013/blib/lib/ worked.. I am always thinking that i need to give till  /home/xxx/perl/Parse-RecDescent-1.967013/blib/lib/Parse/ ..... by the way it was installed correct only and its working now. path issues"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 169, "user_id": 5228070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec02741cfd5fb6e86f8b7dcd4881790?s=128&d=identicon&r=PG&f=1", "display_name": "santhosh", "link": "https://stackoverflow.com/users/5228070/santhosh"}, "edited": false, "score": 0, "creation_date": 1448624363, "post_id": 33955799, "comment_id": 55670873, "body": "It is not installed correctly. You are using it from the working directories for the installation process. The <code>blib</code> in the path is a complete giveaway. But anyway, if my answer was useful, then please upvote or accept it."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1448621577, "creation_date": 1448621577, "answer_id": 33955799, "question_id": 33945026, "link": "https://stackoverflow.com/questions/33945026/i-had-installed-perl-module-parserecdescent-still-i-m-getting-module-not-ins/33955799#33955799", "title": "I had installed perl module, parse::recdescent, still I m getting module not installed error", "body": "<blockquote>\n  <p>i am using PERL5LIB to set the paths of all modules..</p>\n  \n  <p>my PERL5LIB looks like below:</p>\n  \n  <p>/home/xxx/perl/Parse-RecDescent-1.967013/blib/lib/Parse</p>\n  \n  <p>and you can see .pm is there in this path</p>\n  \n  <p>$ cd /home/xxx/perl/Parse-RecDescent-1.967013/lib/Parse $ ls -ltr\n  total 440 -rw-r--r-- 221678 Sep 27 12:28 RecDescent.pm</p>\n</blockquote>\n\n<p>Some weirdness here. You say that you have installed Parse::RecDescent, but this doesn't look like an installed version. This looks like a directory that is used as part of the installation process, not the final result. How did you install the module?</p>\n\n<p>But despite the fact that this isn't really where you should be using this module from, it should still work if you set <code>PERL5LIB</code> correctly. You have an extra <code>Parse</code> on the end of your directory. As the module is in <code>Parse/RecDescent.pm</code> the correct value for <code>PERL5LIB</code> will be <code>/home/xxx/perl/Parse-RecDescent-1.967013/blib/lib/</code>.</p>\n\n<p>I really recommend that you install this module properly.</p>\n"}], "owner": {"reputation": 169, "user_id": 5228070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec02741cfd5fb6e86f8b7dcd4881790?s=128&d=identicon&r=PG&f=1", "display_name": "santhosh", "link": "https://stackoverflow.com/users/5228070/santhosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1448803767, "creation_date": 1448562237, "last_edit_date": 1448803767, "question_id": 33945026, "link": "https://stackoverflow.com/questions/33945026/i-had-installed-perl-module-parserecdescent-still-i-m-getting-module-not-ins", "title": "I had installed perl module, parse::recdescent, still I m getting module not installed error", "body": "<p>I m trying to create charts for excel from perl script.\nI have perl 5.22 version.\nI installed perl module parse-recdescent.\nI can verify its presence in my Unix  box with the command instmodsh.. And I can see this module installed.\nI had successfully set the path for perl5lib.\nBut still when my script comes at      chart->add_series() function, its failing with error below</p>\n\n<p>The Parse::recdescent module must be installed in order to write an excel formula at line x </p>\n\n<p>I had installed this module same as all other modules which works fine.\nAll paths looks correct...</p>\n\n<p>Please help me. </p>\n\n<p><strong>Update:</strong></p>\n\n<p>Error message: \"The Parse::RecDescent module must be installed in order to write an Excel formula at charts4.ps line xxx</p>\n\n<p>Here you can see i installed perl modules and Parse::RecDescent is there. I used instmodsh command...</p>\n\n<p>Installed modules are: Parse::RecDescent</p>\n\n<p>i am using PERL5LIB to set the paths of all modules..</p>\n\n<p>my PERL5LIB looks like below:</p>\n\n<pre><code>/home/xxx/perl/Parse-RecDescent-1.967013/blib/lib/Parse\n</code></pre>\n\n<p>and you can see .pm is there in this path</p>\n\n<pre><code>$ cd /home/xxx/perl/Parse-RecDescent-1.967013/lib/Parse\n$ ls -ltr total 440 -rw-r--r-- 221678 Sep 27 12:28 RecDescent.pm\n</code></pre>\n\n<p>FYI - This unix box has already a perl installed.. but i had installed my own version. and when i type perl -v it is giving my own version.. perl 5 vesrion 22 as expected. and i had installed many modules in the same way and all are working fine. except this... Want to know whats going wrong?</p>\n"}, {"tags": ["json", "perl", "sorting"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 5, "creation_date": 1448562965, "post_id": 33944421, "comment_id": 55649277, "body": "That&#39;s horrible. A single file shouldn&#39;t contain multiple JSON data structures without a simple way to delimit them. Who designed this? Are you stuck with it, or can you propose a change?"}, {"owner": {"reputation": 1994, "user_id": 262868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2e857d60097997cda28096944e2cd565?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/262868/mark"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1448585944, "post_id": 33944421, "comment_id": 55656844, "body": "I didn&#39;t put in a new line character in my example as I thought putting the JSON in separate lines implied this.  I can change it, but I don&#39;t see why I should.  Maybe you can give me the cons before I change it."}], "answers": [{"comments": [{"owner": {"reputation": 1994, "user_id": 262868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2e857d60097997cda28096944e2cd565?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/262868/mark"}, "edited": false, "score": 0, "creation_date": 1448561857, "post_id": 33944658, "comment_id": 55648818, "body": "Wow, thanks.  Ok, I guess I was lazy for not writing the double quotes and all in my example.  Yes, each line is valid JSON and I did include JSON::XS in my script just that failed to write it in my example.  Would you consider inserting a new line into the file and expect the result to be sorted a difficult task?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1448565218, "post_id": 33944658, "comment_id": 55650168, "body": "@Borodin, They&#39;re not in sequence, thus the question, and thus why I used &quot;series&quot; (<i>a number of things, events, or people of a similar kind or related nature coming one after another</i>) instead of &quot;sequence&quot;. I had also deliberately chosen the order and thus the emphasis of my first two statements."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1994, "user_id": 262868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2e857d60097997cda28096944e2cd565?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/262868/mark"}, "edited": false, "score": 0, "creation_date": 1448565392, "post_id": 33944658, "comment_id": 55650229, "body": "@Mark, I don&#39;t know why you mention quotes and loading JSON::XS. No, each line is not guaranteed to be valid JSON. (<code>encode_json</code> does not guarantee output without newlines.) As for your question, I&#39;m not sure what you&#39;re asking."}, {"owner": {"reputation": 1994, "user_id": 262868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2e857d60097997cda28096944e2cd565?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/262868/mark"}, "edited": false, "score": 0, "creation_date": 1448585745, "post_id": 33944658, "comment_id": 55656798, "body": "Can we all just assume that this FILE contains a series of valid JSON each separated by a newline character?  I didn&#39;t put all the details in as I didn&#39;t want to write too long a post giving everyone a headache reading it.  If I were to provide the entire perl script here, no one would bother answering it as they would have to read through too many things."}, {"owner": {"reputation": 1994, "user_id": 262868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2e857d60097997cda28096944e2cd565?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/262868/mark"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1448585751, "post_id": 33944658, "comment_id": 55656800, "body": "@Borodin, this isn&#39;t consumed by a web service or anything like that so I don&#39;t see why it&#39;s a bad idea.  I&#39;m crunching over a billion lines of log lines containing more than 12 formats. JSON works for me so I&#39;m sticking with it."}, {"owner": {"reputation": 1994, "user_id": 262868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2e857d60097997cda28096944e2cd565?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/262868/mark"}, "edited": false, "score": 0, "creation_date": 1448585823, "post_id": 33944658, "comment_id": 55656818, "body": "Thank you @ikegami for your answer and as for my other question.....I&#39;ll probably re-ask it as another question."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1994, "user_id": 262868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2e857d60097997cda28096944e2cd565?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/262868/mark"}, "edited": false, "score": 0, "creation_date": 1448642651, "post_id": 33944658, "comment_id": 55680815, "body": "@Mark, Re &quot;Can we all just assume that this FILE contains a series of valid JSON each separated by a newline character?&quot;, You can assume anything you want. Is it safe to do so? Right now, I think so, but there&#39;s no guarantee that won&#39;t change. If you want to do that, I&#39;d ask the JSON::XS author if he&#39;s willing to make such a guarantee. But as you can see from my answer, there&#39;s no reason to make such an assumption."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1448565320, "last_edit_date": 1448565320, "creation_date": 1448560604, "answer_id": 33944658, "question_id": 33944421, "link": "https://stackoverflow.com/questions/33944421/sort-lines-of-json-in-a-file/33944658#33944658", "title": "Sort lines of JSON in a file", "body": "<p>Your file isn't a JSON document. Your file contains a series of JSON documents. To parse that, we can use the incremental parser from <a href=\"http://metacpan.org/module/JSON::XS\" rel=\"nofollow\"><code>JSON::XS</code></a> as follows:</p>\n\n<pre><code>use JSON::XS qw( );\n\nmy $file; { local $/; $file = &lt;&gt;; }\n\nmy $json = JSON::XS-&gt;utf8-&gt;new();\nmy @objs = $json-&gt;incr_parse($file);\n\n@objs = sort { $a-&gt;{sequence_number} &lt;=&gt; $b-&gt;{sequence_number} } @objs;\n\nfor my $obj (@objs) {\n   print($json-&gt;encode($obj), \"\\n\");\n}\n</code></pre>\n\n<p>If you assume that each line of the file is a separate and complete JSON document (which isn't guaranteed based on how you create them), you could use the following. But it doesn't really save you anything:</p>\n\n<pre><code>use JSON::XS qw( );\n\nmy $json = JSON::XS-&gt;utf8-&gt;new();\n\nmy @objs;\nwhile (&lt;&gt;) {\n   push @objs, $json-&gt;decode($_);\n}\n\n@objs = sort { $a-&gt;{sequence_number} &lt;=&gt; $b-&gt;{sequence_number} } @objs;\n\nfor my $obj (@objs) {\n   print($json-&gt;encode($obj), \"\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 1994, "user_id": 262868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2e857d60097997cda28096944e2cd565?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/262868/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 33944658, "answer_count": 1, "score": 0, "last_activity_date": 1448565320, "creation_date": 1448559576, "question_id": 33944421, "link": "https://stackoverflow.com/questions/33944421/sort-lines-of-json-in-a-file", "title": "Sort lines of JSON in a file", "body": "<p>I am parsing several log lines and converting each one into a JSON.  After that I append this JSON into a file </p>\n\n<pre><code>my %logContent = (\n  sequence_number =&gt; 0001,\n  line =&gt; \"2015-11-27T14:32+05:00 abc.com ssh[2321] fjdklsfjlsdlfksd\",\n  line_number =&gt; 689,\n);\nopen (FILE, \"&gt;&gt;\", \"somefile\") or die \"Cannot open file for append!\";\nprint FILE encode_json \\%logContent;\n</code></pre>\n\n<p>So now I have a file that contains several lines of JSON like such:</p>\n\n<pre><code>{sequence_number: 0001, line: gibberish, ...}\n{sequence_number: 0003, line: gibberish, ...}\n{sequence_number: 0002, line: gibberish, ...}\n</code></pre>\n\n<p>I'd like to know the easiest way for me to sort the lines of JSON based on the value of the \"sequence_number\".  In other words, I'd like the final output to be something like:</p>\n\n<pre><code>{sequence_number: 0001, line: gibberish, ...}\n{sequence_number: 0002, line: gibberish, ...}\n{sequence_number: 0003, line: gibberish, ...}\n</code></pre>\n\n<p>I also have another question: Do you guys/gals think that it would be easier to insert (not append) a new line of JSON into the file in the correct line making the final file sorted by default?  How would I do that?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl", "parsing", "nested", "extract"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1448545058, "post_id": 33939742, "comment_id": 55639273, "body": "Are you having a problem with your parser? What problem? Where&#39;s your code?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1448547544, "post_id": 33939742, "comment_id": 55640822, "body": "I&#39;d suggest <i>not</i> using something that looks like JSON, but isn&#39;t. That&#39;s nasty. Otherwise I&#39;d suggest you elaborate on what problem you&#39;re having. Because you have a recursive data structure, you may want a recursive parser."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1448549949, "last_edit_date": 1448549949, "creation_date": 1448545318, "answer_id": 33940217, "question_id": 33939742, "link": "https://stackoverflow.com/questions/33939742/perl-regexp-extract-string-from-nested-brackets/33940217#33940217", "title": "Perl Regexp Extract string from nested brackets", "body": "<p>You need to write a parser, and it sounds like you know nothing about parsing. This language is not all dissimilar to JSON, so I recommend you copy JSON::PP and adapt it to your language.</p>\n\n<p>Alternatively, use a parser builder such as <a href=\"http://search.cpan.org/perldoc?Marpa::R2\" rel=\"nofollow\">Marpa</a>.</p>\n"}], "owner": {"reputation": 199, "user_id": 4125603, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zn_fVhb-O3g/AAAAAAAAAAI/AAAAAAAACwQ/82MN4q8JZk4/photo.jpg?sz=128", "display_name": "Amrida D", "link": "https://stackoverflow.com/users/4125603/amrida-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1448549949, "creation_date": 1448543824, "last_edit_date": 1448548756, "question_id": 33939742, "link": "https://stackoverflow.com/questions/33939742/perl-regexp-extract-string-from-nested-brackets", "title": "Perl Regexp Extract string from nested brackets", "body": "<p>I am trying to extract some information from a file that has the following content:</p>\n\n<pre><code>field {\n    a:\"bb\"\n    c:\"dd\"\n    field_param {\n        x:\"xx\"\n        y:\"yy\"\n    }\n    other_param {\n        z:\"ee\"\n    }\n    abc_param {\n        x: { abc: \"value\"; cfg:\"value\"}\n        ze: \"value\"\n    }\n}\n\nfield {\n    a:\"bb\"\n    c:\"dd\"\n    field_param {\n        x:\"xx\"\n        y:\"yy\"\n    }\n    others_param {\n        z:\"ee\"\n    }\n}\n</code></pre>\n\n<p>There are more <code>fields</code> like above, in a text file. Not all the <code>fields</code> are the same format, some have different params.</p>\n\n<p>I am trying to extract for each <code>field</code>, to consider it as object with variables and values. The problem is the nested {}\nI do not know how to extract the values between {} after splitting all the file in <code>fields</code>. I am taking than, <code>field</code> by <code>field</code> but it does not work to extract the things that are between brackets, if I want to do it recursively.</p>\n\n<p>Until now I did something like:</p>\n\n<pre><code> open(FILE,\"myfile.txt\")\n    while(&lt;FILE&gt;)\n    {\n    $text .=$_;\n    }\n    close(FILE)\n    my @fields= split /fields/,$text;\n    for my $field(@fields)\n    {\n    my($extracted,$remainder)=extracted_bracketed($field,'{}');\n    }\n</code></pre>\n\n<p>But this extracts only what is in field. I want to do it somehow recursive.</p>\n\n<p>Anybody has any idea? </p>\n"}, {"tags": ["perl", "replace"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448547854, "post_id": 33939734, "comment_id": 55640995, "body": "What platform are you on? Only thing I can think of is <code>-i</code> doesn&#39;t work well on Windows, because of how it handles open files. Trying <code>-i.bak</code> instead might do the trick"}, {"owner": {"reputation": 25, "user_id": 5568662, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9341321a02028b1b66d0a8ccc301f287?s=128&d=identicon&r=PG&f=1", "display_name": "user5568662", "link": "https://stackoverflow.com/users/5568662/user5568662"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448550659, "post_id": 33939734, "comment_id": 55642808, "body": "Running on RHEL 5   - I just tried your suggestion of -i.bak and it works. Not entirely solved the issue but it works and that&#39;s good enough at the moment. Thanks."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448552242, "post_id": 33939734, "comment_id": 55643780, "body": "As written, your code works on my CentOs box. So I don&#39;t know what&#39;s going wrong with it. Are you sure that&#39;s exactly as written, and you&#39;re not redirecting or anything?"}, {"owner": {"reputation": 25, "user_id": 5568662, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9341321a02028b1b66d0a8ccc301f287?s=128&d=identicon&r=PG&f=1", "display_name": "user5568662", "link": "https://stackoverflow.com/users/5568662/user5568662"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448613494, "post_id": 33939734, "comment_id": 55664469, "body": "Exactly as written, no output redirect."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448615828, "post_id": 33939734, "comment_id": 55665765, "body": "My next best would be: try running <code>strace -fTt perl -p -i -e &#39;s&#47;\\\\&#47;&#47;g&#39; mytestfile.csv</code> and have a look at what it&#39;s doing. But it really <i>should</i> be working."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1448553979, "creation_date": 1448553979, "answer_id": 33942879, "question_id": 33939734, "link": "https://stackoverflow.com/questions/33939734/perl-inplace-replace-creates-empty-file/33942879#33942879", "title": "perl inplace replace creates empty file", "body": "<p>Based on comments:</p>\n\n<ul>\n<li>I can't reproduce your problem. Your code seems to work fine on my box. </li>\n<li>Try <code>-i.bak</code> which will backup your old file (to <code>filename.bak</code>) before processing. </li>\n<li>Windows handles inplace editing differently, because of how file locking works. That doesn't seem to apply here. </li>\n</ul>\n"}], "owner": {"reputation": 25, "user_id": 5568662, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9341321a02028b1b66d0a8ccc301f287?s=128&d=identicon&r=PG&f=1", "display_name": "user5568662", "link": "https://stackoverflow.com/users/5568662/user5568662"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 33942879, "answer_count": 1, "score": 0, "last_activity_date": 1448553979, "creation_date": 1448543805, "question_id": 33939734, "link": "https://stackoverflow.com/questions/33939734/perl-inplace-replace-creates-empty-file", "title": "perl inplace replace creates empty file", "body": "<p>I currently have a sed command to make an inplace replace of all backslashes in a file - this works fine but is quite slow. I read that perl would be faster so want to try this out but have hit a problem.</p>\n\n<p>The Perl command I am using is:</p>\n\n<pre><code>perl -p -i -e 's/\\\\//g' mytestfile.csv\n</code></pre>\n\n<p>omitting the -i flag echos the correct output to screen but with the -i flag included it overwrites mytestfile.csv with zero content, which is not what I expected - obviously the command is first truncating mytestfile.csv </p>\n\n<p>How do I get the perl inplace replace to work?</p>\n"}, {"tags": ["perl", "testing", "automated-tests", "mojolicious"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1448546482, "post_id": 33938481, "comment_id": 55640147, "body": "Are the <code>&#47;publications&#47;hide&#47;1</code> and <code>&#47;publications&#47;unhide&#47;1</code> changes in the state of the ressource inside of the application on the server? Is that state related to the <i>user</i>, or in general to the <i>overal application</i>? Does <code>$t</code> have a session cookie and does it keep the same session for each request it makes with <code>get_ok</code>?"}, {"owner": {"reputation": 497, "user_id": 668247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753585e9c97a4009c17adffe41f9f47?s=128&d=identicon&r=PG", "display_name": "vikin9", "link": "https://stackoverflow.com/users/668247/vikin9"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1448547934, "post_id": 33938481, "comment_id": 55641047, "body": "I added the missing info and links to the code repository."}], "answers": [{"comments": [{"owner": {"reputation": 497, "user_id": 668247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753585e9c97a4009c17adffe41f9f47?s=128&d=identicon&r=PG", "display_name": "vikin9", "link": "https://stackoverflow.com/users/668247/vikin9"}, "edited": false, "score": 1, "creation_date": 1448555089, "post_id": 33941843, "comment_id": 55645515, "body": "Thank you! That helped a lot! Now, I can finish writing the tests properly. I have a separate server for testing where I can quickly reset the database to a predefined state. I am doing it using a bash script, but I may add some perl code for that to automate even more."}, {"owner": {"reputation": 497, "user_id": 668247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753585e9c97a4009c17adffe41f9f47?s=128&d=identicon&r=PG", "display_name": "vikin9", "link": "https://stackoverflow.com/users/668247/vikin9"}, "edited": false, "score": 0, "creation_date": 1463665491, "post_id": 33941843, "comment_id": 62169459, "body": "For the future: the fragment &quot;Because <code>text_like</code> uses the text-nodes, the &lt;em&gt; around the username is not relevant in the test.&quot; seems not to be true in the current version. You need to use there <code>content_like</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 497, "user_id": 668247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753585e9c97a4009c17adffe41f9f47?s=128&d=identicon&r=PG", "display_name": "vikin9", "link": "https://stackoverflow.com/users/668247/vikin9"}, "edited": false, "score": 0, "creation_date": 1463665560, "post_id": 33941843, "comment_id": 62169506, "body": "I have no recollection of writing this answer, but I believe you are correct @Piotr :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1448550566, "creation_date": 1448550566, "answer_id": 33941843, "question_id": 33938481, "link": "https://stackoverflow.com/questions/33938481/testing-stateful-mojolicious-apps/33941843#33941843", "title": "Testing stateful Mojolicious apps", "body": "<p>As you have already said, you need to be logged in to perform the <code>hide</code> and <code>unhide</code> action.</p>\n\n<blockquote>\n<pre><code>my $t = Test::Mojo-&gt;new('AdminApi');\n</code></pre>\n</blockquote>\n\n<p>You are creating a new UserAgent here. The Test::Mojo class inherits from Mojo::UserAgent. It has a <code>cookie_jar</code> and thus keeps a session alive. You need that to perform this action:</p>\n\n<blockquote>\n<pre><code>$t-&gt;get_ok('/publications/hide/1');\n</code></pre>\n</blockquote>\n\n<p>But right now you are not logged in. What you need to do is log in the user. Looking at the <a href=\"https://bitbucket.org/vikin9/hex64publicationlistmanager/src/70d1925d5f9e3db9da689c223081e438703b8ed6/t/basic.t?at=master&amp;fileviewer=file-view-default#basic.t-7\" rel=\"nofollow\">code in your repository</a>, you actually assert that you are <strong>not logged in</strong>.</p>\n\n<blockquote>\n<pre><code> $t-&gt;get_ok('/')-&gt;status_is(200)-&gt;content_like(qr/Please login or register/i);\n</code></pre>\n</blockquote>\n\n<p>Before you perform the <code>hide</code>, you need to log in the user. After digging a bit in your code I found the action and <a href=\"https://bitbucket.org/vikin9/hex64publicationlistmanager/src/70d1925d5f9e3db9da689c223081e438703b8ed6/templates/login/index.html.ep?at=master&amp;fileviewer=file-view-default\" rel=\"nofollow\">the template</a> to do that, so I know what the request needs to look like.</p>\n\n<pre><code>$t-&gt;post_ok(\n    '/do_login' =&gt; { Accept =&gt; '*/*' },\n    form        =&gt; { user   =&gt; 'admin', pass =&gt; 'hunter2' }\n);\n</code></pre>\n\n<p>Now your <code>$t</code> UserAgent <em>should be logged in</em> and you can do the <code>hide</code>. Note that <a href=\"https://metacpan.org/pod/Test::Mojo#get_ok\" rel=\"nofollow\"><code>get_ok</code></a> only checks if there was no <em>transport error</em>. So in fact it would make sense to now check if in fact you are now logged in.</p>\n\n<p>You could do that by introspecting the session in the application, by checking the logfile (you are writing <code>\"Login success\"</code> there) or by checking the page for some string that says that the user is logged in. In <a href=\"https://bitbucket.org/vikin9/hex64publicationlistmanager/src/70d1925d5f9e3db9da689c223081e438703b8ed6/templates/display/start.html.ep?at=master&amp;fileviewer=file-view-default#start.html.ep-9\" rel=\"nofollow\">templates/display/start.html.ep</a> there is a text that welcomes the logged-in user, so you can use that.</p>\n\n<pre><code>$t-&gt;post_ok(\n    '/do_login' =&gt; { Accept =&gt; '*/*' },\n    form        =&gt; { user   =&gt; 'admin', pass =&gt; 'hunter2' }\n)-&gt;text_like(qr/Nice to see you here admin/i);\n</code></pre>\n\n<p>Because <code>text_like</code> uses the text-nodes, the <code>&lt;em&gt;</code> around the username is not relevant in the test.</p>\n\n<p>Right, now we know you are logged in. Time to switch the thing on and off.</p>\n\n<pre><code>$t-&gt;get_ok('/publications/hide/1');\n</code></pre>\n\n<p>Because there is no obvious error thrown for that as far as I can tell, I don't see how to test the success of that. Status code is one way, but there might be something in the content as well that you could test.</p>\n\n<p>To verify the state of the application, you would now call the publication.</p>\n\n<blockquote>\n<pre><code>$t-&gt;get_ok('/read/publications/meta')-&gt;content_unlike(qr/Paper with id 1:/i);\n$t-&gt;get_ok('/read/publications/meta/1')-&gt;content_like(qr/Cannot find entry id: 1/i);\n</code></pre>\n</blockquote>\n\n<p>Right. But remember, our <code>$t</code> is still logged in. Maybe the logged-in user is allowed to see hidden stuff as well as unhidden stuff. Maybe they are not. </p>\n\n<p>It's probably safer to make a second UserAgent that's not logged in, and check with that one as well.</p>\n\n<pre><code># check with an unauthorized user\nmy $t_not_logged_in = Test::Mojo-&gt;new('AdminApi');\n$t_not_logged_in\n  -&gt;get_ok('/read/publications/meta')\n  -&gt;content_unlike(qr/Paper with id 1:/i);\n$t_not_logged_in\n  -&gt;get_ok('/read/publications/meta/1')\n  -&gt;content_like(qr/Cannot find entry id: 1/i);\n</code></pre>\n\n<p>Now basically you repeat the same thing by unhiding your content and testing again. Rinse and repeat.</p>\n\n<hr>\n\n<p>Keep in mind that unless you are using an explicit testing database (which you seem not to do), you cannot be sure that there even is an entry 1. Or what the name of that is. You should use fixtures for the tests. You could, for example, create a fresh instance of the DB using sqlite and work with that.</p>\n"}], "owner": {"reputation": 497, "user_id": 668247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753585e9c97a4009c17adffe41f9f47?s=128&d=identicon&r=PG", "display_name": "vikin9", "link": "https://stackoverflow.com/users/668247/vikin9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 33941843, "answer_count": 1, "score": 2, "last_activity_date": 1550220250, "creation_date": 1448540138, "last_edit_date": 1550220250, "question_id": 33938481, "link": "https://stackoverflow.com/questions/33938481/testing-stateful-mojolicious-apps", "title": "Testing stateful Mojolicious apps", "body": "<p>I want to test hiding and unhiding of an entry. I conduct the following tests in Mojolicious t/basic.t:</p>\n\n<pre><code>my $t = Test::Mojo-&gt;new('AdminApi');\n$t-&gt;get_ok('/publications/hide/1');\n$t-&gt;get_ok('/read/publications/meta')-&gt;content_unlike(qr/Paper with id 1:/i);\n$t-&gt;get_ok('/read/publications/meta/1')-&gt;content_like(qr/Cannot find entry id: 1/i);\n\n$t-&gt;get_ok('/publications/unhide/1');\n$t-&gt;get_ok('/read/publications/meta')-&gt;content_like(qr/Paper with id 1: &lt;a href/i);\n$t-&gt;get_ok('/read/publications/meta/1')-&gt;content_unlike(qr/Cannot find entry id: 1/i);\n</code></pre>\n\n<p>My problem is that the two lines '/publications/hide/1' and '/publications/unhide/1' do not hide and unhide the entry. The state of the entry remains untouched.</p>\n\n<p>If I repeat the steps manually in the browser everything works well. For the obvious reasons I want to have it automated with the tests. How to do this?</p>\n\n<p>EDIT: The calls '/publications/hide/1' and '/publications/unhide/1' change the state of the database - just a simple UPDATE query. The change applies to the whole application - for all users. But one needs to be logged in as a user to hide/unhide. Question: how do I emulate a logged user during the test?</p>\n\n<p>Contents generated by '/read/publications/meta' and '/read/publications/meta/1' can be read without login.</p>\n\n<p><a href=\"https://bitbucket.org/vikin9/hex64publicationlistmanager\" rel=\"nofollow\">Bitbucket Repo</a></p>\n\n<p><a href=\"https://bitbucket.org/vikin9/hex64publicationlistmanager/src/70d1925d5f9e3db9da689c223081e438703b8ed6/t/basic.t?at=master&amp;fileviewer=file-view-default\" rel=\"nofollow\">File with test code: basic.t</a></p>\n"}, {"tags": ["java", "spring", "perl"], "comments": [{"owner": {"reputation": 120590, "user_id": 3788176, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9c18d321d8948803c05643d87b003dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Turner", "link": "https://stackoverflow.com/users/3788176/andy-turner"}, "edited": false, "score": 2, "creation_date": 1448539551, "post_id": 33938213, "comment_id": 55635770, "body": "The obvious question: is there any space left on the device? What is using the rest of the space?"}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1448539720, "post_id": 33938213, "comment_id": 55635886, "body": "Increase your space for the tmp file system"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5608262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6de3bb0ff93f00c7c514ddde8c1ce0c?s=128&d=identicon&r=PG&f=1", "display_name": "Ranjeetha", "link": "https://stackoverflow.com/users/5608262/ranjeetha"}, "edited": false, "score": 0, "creation_date": 1448604568, "post_id": 33939283, "comment_id": 55660677, "body": "Thanks for the response Tanveer, but the files for which the No space error is thrown is a tmp file 1&gt;/tmp/fileNgyQQf 2&gt;/tmp/fileGgYHtz . This is not configured in our system. I tried researching if Spring loading or Perl uses any /tmp files. No luck till now. Are you aware of anything like this?"}, {"owner": {"reputation": 426, "user_id": 2742204, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8AGM7.jpg?s=128&g=1", "display_name": "Tanveer Dayan", "link": "https://stackoverflow.com/users/2742204/tanveer-dayan"}, "reply_to_user": {"reputation": 1, "user_id": 5608262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6de3bb0ff93f00c7c514ddde8c1ce0c?s=128&d=identicon&r=PG&f=1", "display_name": "Ranjeetha", "link": "https://stackoverflow.com/users/5608262/ranjeetha"}, "edited": false, "score": 0, "creation_date": 1448613674, "post_id": 33939283, "comment_id": 55664565, "body": "Nope, I was just throwing stones in air :p"}], "tags": [], "owner": {"reputation": 426, "user_id": 2742204, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8AGM7.jpg?s=128&g=1", "display_name": "Tanveer Dayan", "link": "https://stackoverflow.com/users/2742204/tanveer-dayan"}, "is_accepted": false, "score": 0, "last_activity_date": 1448542454, "creation_date": 1448542454, "answer_id": 33939283, "question_id": 33938213, "link": "https://stackoverflow.com/questions/33938213/ioexception-no-space-left-on-device-while-spring-loading/33939283#33939283", "title": "IOException : No Space left on device while Spring loading", "body": "<p>If you are running this using a VM? you should probably close all your other applications which are using up this space. or, you should increase your RAM size in the VM.</p>\n"}], "owner": {"reputation": 1, "user_id": 5608262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6de3bb0ff93f00c7c514ddde8c1ce0c?s=128&d=identicon&r=PG&f=1", "display_name": "Ranjeetha", "link": "https://stackoverflow.com/users/5608262/ranjeetha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2539, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504658992, "creation_date": 1448539334, "last_edit_date": 1504658992, "question_id": 33938213, "link": "https://stackoverflow.com/questions/33938213/ioexception-no-space-left-on-device-while-spring-loading", "title": "IOException : No Space left on device while Spring loading", "body": "<p>I have a jar which will be invoked by a Perl script with some parameters to it. This was working all correct. Recently in one of the servers, getting below exception while the jar is started. There is a graceful recovery from error and the jar completes its task, but in monitoring always shows as failed due to the exception.  This happens intermittently. I am suspecting this is due to some tmp file space issue during Spring Context loading. Any tips would be of much help.</p>\n\n<pre><code>system &lt;Invoke the jar command&gt; 1&gt;/tmp/fileNgyQQf 2&gt;/tmp/fileGgYHtz failed: log4j:ERROR Failed to flush writer,\njava.io.IOException: No space left on device\nat java.io.FileOutputStream.writeBytes(Native Method)\nat java.io.FileOutputStream.write(FileOutputStream.java:345)\nat sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221)\nat sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:291)\nat sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:295)\nat sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:141)\nat java.io.OutputStreamWriter.flush(OutputStreamWriter.java:229)\nat org.apache.log4j.helpers.QuietWriter.flush(QuietWriter.java:57)\nat org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:315)\nat org.apache.log4j.RollingFileAppender.subAppend(RollingFileAppender.java:236)\nat org.apache.log4j.WriterAppender.append(WriterAppender.java:159)\nat org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:230)\nat org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:65)\nat org.apache.log4j.Category.callAppenders(Category.java:203)\nat org.apache.log4j.Category.forcedLog(Category.java:388)\nat org.apache.log4j.Category.log(Category.java:853)\nat org.apache.commons.logging.impl.Log4JLogger.info(Log4JLogger.java:199)\nat org.springframework.core.io.support.PropertiesLoaderSupport.loadProperties(PropertiesLoaderSupport.java:172)\nat org.springframework.core.io.support.PropertiesLoaderSupport.mergeProperties(PropertiesLoaderSupport.java:156)\nat org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:78)\nat org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:696)\nat org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:671)\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:461)\nat org.springframework.context.support.ClassPathXmlApplicationContext.(ClassPathXmlApplicationContext.java:139)\nat org.springframework.context.support.ClassPathXmlApplicationContext.(ClassPathXmlApplicationContext.java:83)\nat MyMainFile.main(MyMainFile.java:9)\n</code></pre>\n"}, {"tags": ["perl", "csv"], "answers": [{"comments": [{"owner": {"reputation": 21019, "user_id": 198183, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/52f281a988bae754991af26224c796af?s=128&d=identicon&r=PG", "display_name": "sid_com", "link": "https://stackoverflow.com/users/198183/sid-com"}, "edited": false, "score": 1, "creation_date": 1448548665, "post_id": 33935166, "comment_id": 55641514, "body": "I thought that <code>Text::CSV_XS</code> was installed but it wasn&#39;t. Now with <code>Text::CSV_XS</code> installed it works fine."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1448530943, "creation_date": 1448530943, "answer_id": 33935166, "question_id": 33933739, "link": "https://stackoverflow.com/questions/33933739/textcsv-open-with-encoding-blank-is-undef/33935166#33935166", "title": "Text::CSV - open with encoding - blank_is_undef", "body": "<p>This appears to be a bug in <a href=\"http://metacpan.org/module/Text::CSV_PP\" rel=\"nofollow\"><code>Text::CSV_PP</code></a> (<a href=\"http://metacpan.org/module/Text::CSV_XS\" rel=\"nofollow\"><code>Text::CSV_XS</code></a> doesn't display this symptom)</p>\n\n<p>The problem is that, if the line read from the file is flagged as being UTF-8-encoded, then each field split using the separator character is passed through <code>utf8::encode</code> even if it has previously been set to <code>undef</code> because the field is blank and the <code>blank_is_undef</code> option is enabled. That incorrectly sets it back to an empty string</p>\n\n<p>You can explicitly use <code>Text::CSV_XS</code> instead, or there is an undocumented option <code>decode_utf8</code> which can be set to false along with the other options in the <code>Text::CSV</code> object, or if you need to process UTF-8 properly then you should use <a href=\"http://metacpan.org/module/Text::CSV::Encoded\" rel=\"nofollow\"><code>Text::CSV::Encoded</code></a></p>\n"}], "owner": {"reputation": 21019, "user_id": 198183, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/52f281a988bae754991af26224c796af?s=128&d=identicon&r=PG", "display_name": "sid_com", "link": "https://stackoverflow.com/users/198183/sid-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 33935166, "answer_count": 1, "score": 0, "last_activity_date": 1448530943, "creation_date": 1448526502, "question_id": 33933739, "link": "https://stackoverflow.com/questions/33933739/textcsv-open-with-encoding-blank-is-undef", "title": "Text::CSV - open with encoding - blank_is_undef", "body": "<p>Why does the empty field not result in an undefined value when I add an encoding format to the open mode?</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Text::CSV;\nuse Data::Dumper;\n\nmy $file = 'TEST.csv';\nopen my $fh, '&gt;', $file or die $!;\nprint $fh 'hello,,world';\nclose $fh;\n\nmy $csv = Text::CSV-&gt;new( {\n    sep_char             =&gt; ',',\n    auto_diag            =&gt; 1,\n    blank_is_undef       =&gt; 1,\n    binary               =&gt; 1,\n} );\n\nopen $fh, '&lt;', $file or die $!;\nmy $tmp;\nwhile ( my $row = $csv-&gt;getline( $fh ) ) {\n    push @$tmp, $row;\n}\nclose $fh;\nprint Dumper $tmp;\n\n#$VAR1 = [\n#          [\n#            'hello',\n#            undef,\n#            'world'\n#          ]\n#        ];\n\nopen $fh, '&lt;:encoding(UTF-8)', $file or die $!;\n$tmp = [];\nwhile ( my $row = $csv-&gt;getline( $fh ) ) {\n    push @$tmp, $row;\n}\nclose $fh;\nprint Dumper $tmp;\n\n#$VAR1 = [\n#          [\n#            'hello',\n#            '',\n#            'world'\n#          ]\n#        ];\n</code></pre>\n"}, {"tags": ["eclipse", "perl"], "comments": [{"owner": {"reputation": 655, "user_id": 4557493, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TzPf5.jpg?s=128&g=1", "display_name": "Jelani", "link": "https://stackoverflow.com/users/4557493/jelani"}, "edited": false, "score": 0, "creation_date": 1448551889, "post_id": 33933618, "comment_id": 55643550, "body": "When typing &quot;echo $PERL5LIB&quot; in cygwin nothing shows up,.  Where do i set the path to in Windows?  Should the path be set to the project directory I created in eclipse?"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1448532940, "post_id": 33934095, "comment_id": 55631599, "body": "This is not an answer and should be a comment"}, {"owner": {"reputation": 339, "user_id": 5606904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f291f1187419a1923db0c97f4c404899?s=128&d=identicon&r=PG&f=1", "display_name": "obscurite", "link": "https://stackoverflow.com/users/5606904/obscurite"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1448533533, "post_id": 33934095, "comment_id": 55631952, "body": "@Borodin As I mentioned, it&#39;s a partial answer at the very least. The rest of the answer depends on feedback from the OP, but I hear what you&#39;re saying. I don&#39;t think a downvote was necessary."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1448537761, "post_id": 33934095, "comment_id": 55634660, "body": "Your whole post is a question about contents of <code>PERL5LIB</code> and what to do if that is wrong. It may well not be an answer at all, depending on the OP&#39;s response to that question. You can&#39;t just throw out wild ideas without checking first that they are the right answer. It may be a way for you to get experience points but it doesn&#39;t help anyone"}, {"owner": {"reputation": 655, "user_id": 4557493, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TzPf5.jpg?s=128&g=1", "display_name": "Jelani", "link": "https://stackoverflow.com/users/4557493/jelani"}, "edited": false, "score": 0, "creation_date": 1448551914, "post_id": 33934095, "comment_id": 55643570, "body": "When typing &quot;echo $PERL5LIB&quot; in cygwin nothing shows up,. Where do i set the path to in Windows? Should the path be set to the project directory I created in eclipse?"}, {"owner": {"reputation": 339, "user_id": 5606904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f291f1187419a1923db0c97f4c404899?s=128&d=identicon&r=PG&f=1", "display_name": "obscurite", "link": "https://stackoverflow.com/users/5606904/obscurite"}, "edited": false, "score": 0, "creation_date": 1448599012, "post_id": 33934095, "comment_id": 55659235, "body": "When you click on the perl project properties, what setting is there for the perl executable command e.g. &quot;perl -w&quot; and what @INC or PERL5LIB settings are specified? Is there an option there to add paths to @INC? Find out where your LWP is installed and add that path. Good luck."}], "tags": [], "owner": {"reputation": 339, "user_id": 5606904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f291f1187419a1923db0c97f4c404899?s=128&d=identicon&r=PG&f=1", "display_name": "obscurite", "link": "https://stackoverflow.com/users/5606904/obscurite"}, "is_accepted": false, "score": 0, "last_activity_date": 1448527831, "creation_date": 1448527831, "answer_id": 33934095, "question_id": 33933618, "link": "https://stackoverflow.com/questions/33933618/perl-class-lwpsimple-not-recognized-in-eclipse-on-windows-7/33934095#33934095", "title": "Perl Class &#39;LWP::Simple&#39; Not Recognized in Eclipse on Windows 7", "body": "<p>When you're in cygwin, do:</p>\n\n<pre><code>echo $PERL5LIB\n</code></pre>\n\n<p>See what paths are being used as search trees for imported modules.</p>\n\n<p>Compare this to PERL5LIB in the environment in which Eclipse is running perl:</p>\n\n<pre><code>print $ENV{\"PERL5LIB\"} . \"\\n\";\n</code></pre>\n\n<p>If the PERL5LIB is empty or missing directories, that's your partial answer The rest of the answer is how to get it back.</p>\n\n<p>Also, please add details on how you're running perl in eclipse. It may provide a vital clue to someone who's had the same problem. I've heard of people needed to modify how perl is run in EPIC -- is that it? Is there a command line for perl set up in the settings?</p>\n"}, {"tags": [], "owner": {"reputation": 655, "user_id": 4557493, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TzPf5.jpg?s=128&g=1", "display_name": "Jelani", "link": "https://stackoverflow.com/users/4557493/jelani"}, "is_accepted": false, "score": 0, "last_activity_date": 1448669221, "creation_date": 1448669221, "answer_id": 33966262, "question_id": 33933618, "link": "https://stackoverflow.com/questions/33933618/perl-class-lwpsimple-not-recognized-in-eclipse-on-windows-7/33966262#33966262", "title": "Perl Class &#39;LWP::Simple&#39; Not Recognized in Eclipse on Windows 7", "body": "<p>I was able to resolve the problem by correcting my system environmental variables in Windows by going to sysdm.cpl | Advanced| Environmental Variables| in the System variables section | add \";c:\\cywgin64\\bin\" in the path variable section.  Then restarting the computer.</p>\n"}], "owner": {"reputation": 655, "user_id": 4557493, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TzPf5.jpg?s=128&g=1", "display_name": "Jelani", "link": "https://stackoverflow.com/users/4557493/jelani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1448669221, "creation_date": 1448526058, "last_edit_date": 1448529032, "question_id": 33933618, "link": "https://stackoverflow.com/questions/33933618/perl-class-lwpsimple-not-recognized-in-eclipse-on-windows-7", "title": "Perl Class &#39;LWP::Simple&#39; Not Recognized in Eclipse on Windows 7", "body": "<p>I've installed cygwin and download <code>LWP::Simple</code>. I receive the below response inside of cygwin, so the module has been installed.  But inside of eclipse, I'm getting an error when I try to use the <code>use LWP::Simple;</code> statement.  It says the module can't be found.  How is this possible?</p>\n\n<pre><code>$ perl -MLWP -le \"print(LWP-&gt;VERSION)\"\n6.13\n</code></pre>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 39, "user_id": 4315985, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6288c8da5c21978f523f9329b38bb253?s=128&d=identicon&r=PG&f=1", "display_name": "Rajendra Urs", "link": "https://stackoverflow.com/users/4315985/rajendra-urs"}, "edited": false, "score": 0, "creation_date": 1448525669, "post_id": 33933443, "comment_id": 55626971, "body": "i have used @a=qw(sonata Samsung sony icic huawie nissan nokia); @filter=grep{/^s(.*)$/ig}@a; print &quot;@filter \\n&quot;; @filters=grep{/^n(.*)$/ig}@a; print &quot;@filters \\n&quot;; @final=(@filter,@filters); print &quot;@final \\n&quot;;"}, {"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 0, "creation_date": 1448526552, "post_id": 33933443, "comment_id": 55627428, "body": "You should <a href=\"https://stackoverflow.com/posts/33933443/edit\">edit</a> your question to add this kind of info, not comment."}], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 5606904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f291f1187419a1923db0c97f4c404899?s=128&d=identicon&r=PG&f=1", "display_name": "obscurite", "link": "https://stackoverflow.com/users/5606904/obscurite"}, "reply_to_user": {"reputation": 1989, "user_id": 996114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ab699f0efdf582f02f8f3dbba7a4b1?s=128&d=identicon&r=PG", "display_name": "Mike Covington", "link": "https://stackoverflow.com/users/996114/mike-covington"}, "edited": false, "score": 0, "creation_date": 1448527359, "post_id": 33933758, "comment_id": 55627894, "body": "Thanks so much @MikeCovington!"}, {"owner": {"reputation": 4120, "user_id": 9719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EIDSQ.png?s=128&g=1", "display_name": "darch", "link": "https://stackoverflow.com/users/9719/darch"}, "edited": false, "score": 1, "creation_date": 1448535357, "post_id": 33933758, "comment_id": 55633166, "body": "The downvotes was for failing to answer the actual question.  I don&#39;t think that an answer that doesn&#39;t address the <code>&amp;&amp;</code> issue is useful."}, {"owner": {"reputation": 339, "user_id": 5606904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f291f1187419a1923db0c97f4c404899?s=128&d=identicon&r=PG&f=1", "display_name": "obscurite", "link": "https://stackoverflow.com/users/5606904/obscurite"}, "edited": false, "score": 0, "creation_date": 1448598168, "post_id": 33933758, "comment_id": 55659055, "body": "I see what you&#39;re saying, but the logic the OP was asking for was to match S OR N, rather than S AND N (even though it was originally written S and N -- the OP meant S or N)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448617314, "post_id": 33933758, "comment_id": 55666672, "body": "It would (IMO) greatly improve your answer if you actually said that, as this is the root of the problem the OP is having. The whitespacing is really a secondary issue when the core problem of &#39;starts with S and N&#39; will never match, because it can&#39;t."}, {"owner": {"reputation": 339, "user_id": 5606904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f291f1187419a1923db0c97f4c404899?s=128&d=identicon&r=PG&f=1", "display_name": "obscurite", "link": "https://stackoverflow.com/users/5606904/obscurite"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448655403, "post_id": 33933758, "comment_id": 55685877, "body": "@Sobrique, I&#39;ve added that explanation. Good idea."}], "tags": [], "owner": {"reputation": 339, "user_id": 5606904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f291f1187419a1923db0c97f4c404899?s=128&d=identicon&r=PG&f=1", "display_name": "obscurite", "link": "https://stackoverflow.com/users/5606904/obscurite"}, "is_accepted": true, "score": 5, "last_activity_date": 1448655365, "last_edit_date": 1448655365, "creation_date": 1448526576, "answer_id": 33933758, "question_id": 33933443, "link": "https://stackoverflow.com/questions/33933443/how-can-i-filter-an-array-on-multiple-criteria/33933758#33933758", "title": "How can I filter an array on multiple criteria?", "body": "<p>You're on the right track, but you've introduced whitespace into your regexes. You are also asking for cases where the string begins with the character 'S' or the character 'N', so your logic is an OR statement, rather than an AND statement as written. If all you care about is the first character, that's all you need in your pattern, and you want to use a logical OR.</p>\n\n<pre><code>@a = qw(sonata Samsung sony icic huawie nissan nokia);\n@filter = grep { /^s/i || /^n/i } @a;\nprint \"@filter \\n\";\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>sonata Samsung sony nissan nokia\n</code></pre>\n\n<p>Edit -- or more succinctly with a character class </p>\n\n<pre><code>@a = qw(sonata Samsung sony icic huawie nissan nokia);\n@filter = grep { /^[sn]/i } @a;\nprint \"@filter \\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1448531782, "post_id": 33933831, "comment_id": 55630849, "body": "<code>g</code> modifier on pattern is probably redundant here too."}, {"owner": {"reputation": 4120, "user_id": 9719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EIDSQ.png?s=128&g=1", "display_name": "darch", "link": "https://stackoverflow.com/users/9719/darch"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448534824, "post_id": 33933831, "comment_id": 55632789, "body": "@sobrique True! Fixing."}], "tags": [], "owner": {"reputation": 4120, "user_id": 9719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EIDSQ.png?s=128&g=1", "display_name": "darch", "link": "https://stackoverflow.com/users/9719/darch"}, "is_accepted": false, "score": 8, "last_activity_date": 1448534862, "last_edit_date": 1448534862, "creation_date": 1448526874, "answer_id": 33933831, "question_id": 33933443, "link": "https://stackoverflow.com/questions/33933443/how-can-i-filter-an-array-on-multiple-criteria/33933831#33933831", "title": "How can I filter an array on multiple criteria?", "body": "<p>Your problem is one of logic.  You say you want to filter for all strings that \"start with S and N\", but that's not true.  You want all strings that start with <em>one of</em> S or N.</p>\n\n<p>For a string to \"start with S and N\", its first character would have to be S and it would <em>also</em> have to be N, which is not possible.</p>\n\n<p>The expression</p>\n\n<pre><code>grep { (/^s (.*)$/ig) and (/^n(.*)$/ig) } @a;\n</code></pre>\n\n<p>will always return the empty list, no matter what the value of <code>@a</code> happens to be.  Each element in <code>@a</code> will be considered, but none of them start with both <code>s</code> and <code>n</code> -- because that is impossible.</p>\n\n<p>What you want instead is a test whether strings in <code>@a</code> match <em>either</em> S <em>or</em> N, like so:</p>\n\n<pre><code>grep { (/^s (.*)$/ig) or (/^n(.*)$/ig) } @a;\n</code></pre>\n\n<p>Wanting to match a number of possibilities is actually a pretty common need, though, so there's a special notation for doing so.  A <a href=\"http://perldoc.perl.org/perlrecharclass.html\">\"character class\"</a> creates a new atom that matches any one of several possibilities.  <code>.</code> is a character class, and custom character classes can be created with angle brackets, <code>[]</code>.</p>\n\n<p>Thus:</p>\n\n<pre><code>grep { /^[sn]/i) } @a;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 0, "last_activity_date": 1448528593, "creation_date": 1448528593, "answer_id": 33934328, "question_id": 33933443, "link": "https://stackoverflow.com/questions/33933443/how-can-i-filter-an-array-on-multiple-criteria/33934328#33934328", "title": "How can I filter an array on multiple criteria?", "body": "<p>Just match anything word which is start with <code>s</code> or <code>n</code>. Following code will give you desire output:</p>\n\n<pre><code>my @arr = qw(sonata Samsung sony icic huawie nissan nokia);\nmy @filter = grep { /^[sn]/i } @arr;\nprint \"@filter \\n\";\n</code></pre>\n\n<p>Where <code>^[sn]</code> will match any of word beginning with <code>s</code> or <code>n</code>.</p>\n\n<p>Output:</p>\n\n<pre><code>sonata Samsung sony nissan nokia\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4315985, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6288c8da5c21978f523f9329b38bb253?s=128&d=identicon&r=PG&f=1", "display_name": "Rajendra Urs", "link": "https://stackoverflow.com/users/4315985/rajendra-urs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "accepted_answer_id": 33933758, "answer_count": 3, "score": 1, "last_activity_date": 1448655365, "creation_date": 1448525478, "last_edit_date": 1448526370, "question_id": 33933443, "link": "https://stackoverflow.com/questions/33933443/how-can-i-filter-an-array-on-multiple-criteria", "title": "How can I filter an array on multiple criteria?", "body": "<p>I'm trying to find all array elements starting with S and N, but the below code doesn't do it:</p>\n\n<pre><code>@a = qw(sonata Samsung sony icic huawie nissan nokia);\n</code></pre>\n\n<p>here is my code</p>\n\n<pre><code>@filter = grep { (/^s (.*)$/ig) &amp;&amp; (/^n(.*)$/ig) } @a;\nprint \"@filter \\n\";\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 1989, "user_id": 996114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ab699f0efdf582f02f8f3dbba7a4b1?s=128&d=identicon&r=PG", "display_name": "Mike Covington", "link": "https://stackoverflow.com/users/996114/mike-covington"}, "is_accepted": true, "score": 1, "last_activity_date": 1448526840, "last_edit_date": 1448526840, "creation_date": 1448525884, "answer_id": 33933565, "question_id": 33933302, "link": "https://stackoverflow.com/questions/33933302/perl-insert-a-string-into-a-file-after-a-regex-is-matched/33933565#33933565", "title": "perl insert a string into a file AFTER a regex is matched", "body": "<p>Two things first:</p>\n\n<ul>\n<li>Since this is a CSV file, it is probably safest to use a CSV parsing module such as <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow\"><code>Text::CSV</code></a></li>\n<li>Since you are matching <code>,-</code> with a regex, you should be sure that none of your fields happen to contain that string</li>\n</ul>\n\n<p>That being said, try replacing this:</p>\n\n<pre><code>if(/\\w+\\,-/) {\n    $print_flag = 1 ;\n        if($print_flag) {\n        print \"$add_trip\\n\" ;\n    } else { print $_ ;  }\n}\n</code></pre>\n\n<p>with this:</p>\n\n<pre><code>if(/\\w+\\,-/) {\n    print \"$add_trip\\n\";\n} else {\n    print;\n}\n</code></pre>\n\n<p>If we reformat the way you had it, it is easier to see the problem:</p>\n\n<pre><code>if(/\\w+\\,-/) {\n    $print_flag = 1 ;\n    if($print_flag) {\n        print \"$add_trip\\n\";\n    } else {\n        print $_;\n    }\n}\n</code></pre>\n\n<p>If <code>/\\w+\\,-/</code> didn't match, nothing would happen, since your <code>print $_</code> was in an <code>else</code> statement one level too deep. Also, there is no need to set <code>$print_flag = 1</code> unless you use it elsewhere in the code. Even if you do, there is no need for the <code>if($print_flag)</code>, since you just set <code>$print_flag = 1</code> in the previous line.</p>\n\n<p><strong>Alternative:</strong></p>\n\n<p>It isn't totally clear to me exactly what you want your output to be, but if the above isn't it, this might be:</p>\n\n<pre><code>if(/\\w+\\,-/) {\n    s/,-//;\n    print \"$_$add_trip\\n\";\n} else {\n    print;\n}\n</code></pre>\n\n<p>This will check for the <code>,-</code> and if it finds it will remove it, print that line, then print <code>$add_trip</code>. If <code>,-</code> is not found, it will just print the line.</p>\n"}], "owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 33933565, "answer_count": 1, "score": 0, "last_activity_date": 1448526840, "creation_date": 1448524909, "last_edit_date": 1448526196, "question_id": 33933302, "link": "https://stackoverflow.com/questions/33933302/perl-insert-a-string-into-a-file-after-a-regex-is-matched", "title": "perl insert a string into a file AFTER a regex is matched", "body": "<p>So I get this output from a sybase database output. \nI need to take out the double quotes and insert some row definitions to the tables. I gues perl is the tool to do it </p>\n\n<pre><code> \"NO Comm\",\"-\"\n\"INVESTMENT\",\"29541\",\"3860237\",\"0\",\"ANEW\",\"(null)\",\"BP    \",\"frantzla\",\"A\"\n\"DERIVS\",\"110000\",\"2875587\",\"0\",\"ANEW\",\"0\",\"BP    \",\"frantzla\",\"A\"\n\"DERIVS\",\"4089\",\"1185810\",\"0\",\"IBKD\",\"0\",\"BP    \",\"unsalr  \",\"A\"\n\"COMMERCE\",\"705\",\"41185\",\"0\",\"ANEW\",\"(null)\",\"BP    \",\"madiganj\",\"A\"\n\"FIRST\",\"504\",\"236\",\"0\",\"ANEW\",\"0\",\"CPS   \",\"kilkenki\",\"A\"\n\" \",\"-\"\n\"Opera Pending\",\"-\"\n\"FIRST\",\"827921\",\"23565575\",\"20699\",\"ANEW\",\"2.5\",\"CPS   \",\"kilkenki\",\"A\"\n\"INC\",\"218780\",\"3596112\",\"5472\",\"ANEW\",\"2.5\",\"CPS   \",\"madiganj\",\"A\"\n\" \",\"-\"\n\"ETC Pending\",\"-\"\n\"BANK , PITTSBURGH\",\"251508\",\"10803056\",\"1258\",\"IBKD\",\"0.5\",\"CPS   \",\"dennyad \",\"A\"\n\"SYDNEY\",\"4500\",\"178173\",\"45\",\"IBKD\",\"1\",\"CPS   \",\"dennyad \",\"A\"\n\" \",\"-\"\n\"Confirmed Booking\",\"-\"\n\"MOTHER FUND\",\"22400\",\"1187584\",\"1781\",\"IBKD\",\"15\",\"BP    \",\"crouzejo\",\"A\"\n\"ASSET MANAGEMENT, SGIIC, S.\",\"45010\",\"614834\",\"922\",\"IBKD\",\"15\",\"BP    \",\"ruizdemi\",\"A\"\n</code></pre>\n\n<p>Once I take the \"double quotes\" I come up with some table names that all end up with a \",-\" right after them.\nI need to put a header after the talbe names to defien the rows. So pretty much all all I have to do is evervy time the\nperl script hits a \"\\w+\\,-\" all it need to do is insert this line into the next line.</p>\n\n<pre><code>Client , Shares , Notional, TotalComm, Status, Comm, CommType, Owner, TradingBasis\n</code></pre>\n\n<p>It is the header for the values below it.\n    It prints out the header - but not the whole report.\n    This is a CSV file, and I need to put these headers over the tables.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nopen my $fhIn,  '&lt;', 'today.txt'          or die $!;\nmy $add_trip = \"Client , Shares , Notional, TotalComm, Status, Comm, CommType, Owner, TradingBasis\" ;\nwhile (&lt;$fhIn&gt;) {\n   my $print_flag = 0 ;\n   tr/\\\"//d;\n   if(/\\w+\\,-/) {\n       $print_flag = 1 ;\n           if($print_flag) {\n           print \"$add_trip\\n\" ;\n       } else { print $_ ;  }\n   }\n}\n</code></pre>\n\n<p>result - the tables are not printed only the lines I want to insert are printed:</p>\n\n<pre><code>Client , Shares , Notional, TotalComm, Status, Comm, CommType, Owner, TradingBasis\nClient , Shares , Notional, TotalComm, Status, Comm, CommType, Owner, TradingBasis\nClient , Shares , Notional, TotalComm, Status, Comm, CommType, Owner, TradingBasis\nClient , Shares , Notional, TotalComm, Status, Comm, CommType, Owner, TradingBasis\n</code></pre>\n\n<p>I need something more like this: </p>\n\n<pre><code>ETC Pending,-\nClient , Shares , Notional, TotalComm, Status, Comm, CommType, Owner, TradingBasis\nBANK , PITTSBURGH,251508,10803056,1258,IBKD,0.5,CPS   ,dennyad ,A\nSYDNEY,4500,178173,45,IBKD,1,CPS   ,dennyad ,A\n ,-\nConfirmed Booking,-\nClient , Shares , Notional, TotalComm, Status, Comm, CommType, Owner, TradingBasis\nMOTHER FUND,22400,1187584,1781,IBKD,15,BP    ,crouzejo,A\nASSET MANAGEMENT, SGIIC, S.,45010,614834,922,IBKD,15,BP    ,ruizdemi,A\n</code></pre>\n\n<p>bonus - it would be great to get rid of the ',-' after the script is all done - it would be greeat to get rid of them from the csv file , but I need them to put int he headers, so I cannot get rid of them until I know that the headers for the tables are in .</p>\n"}, {"tags": ["perl", "view", "clearcase"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1919238"}, "edited": false, "score": 1, "creation_date": 1448521359, "post_id": 33932151, "comment_id": 55625033, "body": "Why are you doing this?  Stating the actual problem you are trying to solve would help here."}, {"owner": {"reputation": 1034879, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 1, "creation_date": 1448523812, "post_id": 33932151, "comment_id": 55626106, "body": "@dan1111 This is a ClearCase specific problem that I know well. I have answered it below."}], "answers": [{"comments": [{"owner": {"reputation": 486, "user_id": 4115884, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/zbzXF.jpg?s=128&g=1", "display_name": "yoko", "link": "https://stackoverflow.com/users/4115884/yoko"}, "edited": false, "score": 0, "creation_date": 1448523985, "post_id": 33932379, "comment_id": 55626179, "body": "I know about the subshell problem, I wanted to know it there would be any Option for a workaround. I have found a working solution for myself, but thanks for your hint ;) The Solution was first to get the Viewname from the View I am using, and store all information about the new view in a new variable. That way, I didn&#39;t actually pass the Variable from one view(shell) into another, but created the exact same one in the new View. Worked for my problem."}], "tags": [], "owner": {"reputation": 1034879, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 0, "last_activity_date": 1448521261, "last_edit_date": 1495541243, "creation_date": 1448521261, "answer_id": 33932379, "question_id": 33932151, "link": "https://stackoverflow.com/questions/33932151/passing-a-variable-to-a-script-calling-itself/33932379#33932379", "title": "Passing a Variable to a script calling itself", "body": "<blockquote>\n  <p>Call the Script in the new-set View with parameter -ViewSet </p>\n</blockquote>\n\n<p>If that involve calling <a href=\"http://www-01.ibm.com/support/knowledgecenter/SSSH27_8.0.1/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_setview.htm?cp=SSSH27_8.0.1%2F4-0-0-0-1-66\" rel=\"nofollow noreferrer\"><code>cleartool setview</code></a>, <strong>don't</strong>: <a href=\"https://stackoverflow.com/a/10252612/6309\"><code>setview</code> spawns a subshell i</a>n which what you have defined in your script won't be visible.</p>\n\n<p>When your script needs to access the <a href=\"https://stackoverflow.com/a/31866188/6309\">dynamic view started</a>, do use the <em>full</em> dynamic view path:</p>\n\n<pre><code>/view/myDynView\n# under which you would see:\n/view/myDynView/vobs/MyVob\n</code></pre>\n"}], "owner": {"reputation": 486, "user_id": 4115884, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/zbzXF.jpg?s=128&g=1", "display_name": "yoko", "link": "https://stackoverflow.com/users/4115884/yoko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 1, "accepted_answer_id": 33932379, "answer_count": 1, "score": 1, "last_activity_date": 1448521261, "creation_date": 1448520271, "question_id": 33932151, "link": "https://stackoverflow.com/questions/33932151/passing-a-variable-to-a-script-calling-itself", "title": "Passing a Variable to a script calling itself", "body": "<p>My Script is storing a ClearCase View in a Variable. To operate in this View, the Script needs to call itself inside the View again, after it started the View.\nThe Code looks like this</p>\n\n<pre><code> if($params{ViewSet} eq 'no')\n    {\n       # Start the View\n       # Store the View in $View\n       # Call the Script in the new-set View with parameter -ViewSet yes\n    }\nif($params{ViewSet} eq 'yes')\n    {\n      # Do Work inside the View\n    }\n</code></pre>\n\n<p>The problem is, obviously the Variable <code>$View</code> is not defined when I call my script the second time, since it is defined in the first if loop. </p>\n\n<p>Can I pass the View I stored in <code>$View</code> when I call the Script the second time?\nSetting the View before entering the if-Statements would not word, I would start the View two times then.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1448520222, "post_id": 33932058, "comment_id": 55624534, "body": "What part don&#39;t you understand?  What is the behavior when you actually run it?"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1448520653, "post_id": 33932058, "comment_id": 55624732, "body": "Whoever is editing this question, you can&#39;t just put backticks around the script and not fix the character escaping or it DRASTICALLY changes the behavior of the code in question"}, {"owner": {"reputation": 37, "user_id": 5606976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4500b4be32dec33e6cd9b0ea2e12fe27?s=128&d=identicon&r=PG&f=1", "display_name": "Sowrabh", "link": "https://stackoverflow.com/users/5606976/sowrabh"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1448521173, "post_id": 33932058, "comment_id": 55624963, "body": "perl -pe &#39;s/\\e([^[]]|[.?[a-zA-Z]|].?\\a)/ /g&#39; , It would be great if you would tell me what &quot; perl -pe &quot; does ...??? Apparently I not able figure what changes it does to the log.txt file. Because there are no visible changes ..."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1448521639, "post_id": 33932058, "comment_id": 55625147, "body": "<a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlrun.html</a>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448549392, "post_id": 33932058, "comment_id": 55641968, "body": "<code>perl -pe</code> makes perl run like <code>sed</code>. It iterates a line at a time, runs the code block and then prints the current line. Normally that means a transform is applied to <code>$_</code> - the current line (which <code>s&#47;&#47;&#47;</code> does)"}], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 3, "last_activity_date": 1448526997, "last_edit_date": 1448526997, "creation_date": 1448523920, "answer_id": 33933066, "question_id": 33932058, "link": "https://stackoverflow.com/questions/33932058/what-is-the-purpose-of-filtering-a-log-file-using-this-perl-one-liner-before-dis/33933066#33933066", "title": "What is the purpose of filtering a log file using this Perl one-liner before displaying it in the terminal?", "body": "<p>It looks like the code should remove <a href=\"https://en.wikipedia.org/wiki/ANSI_escape_code\" rel=\"nofollow\">ANSI escape codes</a> from the input, i.e codes to set colors, window title .... Since some of these code might cause harm it might be a security measure  in case some kind of attack was able to include such escape codes into the log file. Since usually a log file does not contain any such escape codes this would also explain why you don't see any effect of this statement for normal log files.</p>\n\n<p>For more information about this kind of attack see <a href=\"https://www.proteansec.com/linux/blast-past-executing-code-terminal-emulators-via-escape-sequences/\" rel=\"nofollow\">A Blast From the Past: Executing Code in Terminal Emulators via Escape Sequences</a>.</p>\n\n<p>BTW, while your question looks bad on the first view it is actually not. But you might try to improve questions by at least formatting it properly. Otherwise you risk that this questions gets down-voted fast.</p>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 1, "last_activity_date": 1448633227, "creation_date": 1448633227, "answer_id": 33959130, "question_id": 33932058, "link": "https://stackoverflow.com/questions/33932058/what-is-the-purpose-of-filtering-a-log-file-using-this-perl-one-liner-before-dis/33959130#33959130", "title": "What is the purpose of filtering a log file using this Perl one-liner before displaying it in the terminal?", "body": "<p>First, the command line suffers from a <a href=\"http://porkmail.org/era/unix/award.html\" rel=\"nofollow\">useless use of <code>cat</code></a>. <code>perl</code> is fully capable of reading from a file name on the command line.</p>\n\n<p>So,</p>\n\n<pre>$ perl -pe 's/\\e([^\\[\\]]|\\[.*?[a-zA-Z]|\\].*?\\a)/ /g' log.txt</pre>\n\n<p>would have done the same thing, but avoided spawning an extra process.</p>\n\n<p>Now, <code>-e</code> is followed by a script for <code>perl</code> to execute. In this case, we have a single global substitution.</p>\n\n<p><code>\\e</code> in a <a href=\"https://metacpan.org/pod/perlreref\" rel=\"nofollow\">Perl regex pattern</a> corresponds to the escape character, <code>x1b</code>.</p>\n\n<p>The pattern following <code>\\e</code> looks like the author wants to match <a href=\"https://en.wikipedia.org/wiki/ANSI_escape_code\" rel=\"nofollow\">ANSI escape sequences</a>.</p>\n\n<p>The <a href=\"https://metacpan.org/pod/perlrun\" rel=\"nofollow\"><code>-p</code> option</a> essentially wraps the script specified with <code>-e</code> in <code>while</code> loop, so the <code>s///</code> is executed for each line of the input.</p>\n\n<p>The pattern probably does the job for this simple purpose, but one might benefit from using <a href=\"https://metacpan.org/pod/Regexp::Common::ANSIescape\" rel=\"nofollow\">Regexp::Common::ANSIescape</a> as in:</p>\n\n<p><code>$ perl -MRegexp::Common::ANSIescape=ANSIescape,no_defaults -pe 's/$RE{ANSIescape}/ /g' log.txt</code></p>\n\n<p>Of course, if one uses a script like this very often, one might want to either use an alias, or even write a very short script that does this, as in:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse Regexp::Common 'ANSIescape', 'no_defaults';\n\nwhile (&lt;&gt;) {\n    s/$RE{ANSIescape}/ /g;\n    print;\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5606976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4500b4be32dec33e6cd9b0ea2e12fe27?s=128&d=identicon&r=PG&f=1", "display_name": "Sowrabh", "link": "https://stackoverflow.com/users/5606976/sowrabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1448633558, "creation_date": 1448519845, "last_edit_date": 1448633558, "question_id": 33932058, "link": "https://stackoverflow.com/questions/33932058/what-is-the-purpose-of-filtering-a-log-file-using-this-perl-one-liner-before-dis", "title": "What is the purpose of filtering a log file using this Perl one-liner before displaying it in the terminal?", "body": "<p>I came across this script which was not written by me, but because of an issue I need to know what it does.</p>\n\n<p>What is the purpose of filtering the log file using this Perl one-liner?</p>\n\n<pre><code> cat log.txt | perl -pe 's/\\e([^\\[\\]]|\\[.*?[a-zA-Z]|\\].*?\\a)/ /g'\n</code></pre>\n\n<p>The <code>log.txt</code> file contains the output of a series of commands. I do not understand what is being filtered here, and why it might be useful.</p>\n"}, {"tags": ["git", "perl", "file", "permissions", "cron"], "answers": [{"tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 1, "last_activity_date": 1448517528, "creation_date": 1448517528, "answer_id": 33931545, "question_id": 33931066, "link": "https://stackoverflow.com/questions/33931066/giving-777-permissions-to-a-dynamically-file-opened-created-using-open-function/33931545#33931545", "title": "Giving 777 permissions to a dynamically file opened/created using open function in Perl", "body": "<p><a href=\"http://perldoc.perl.org/functions/sysopen.html\" rel=\"nofollow\">sysopen</a> can help you.</p>\n\n<pre><code>sysopen(FILEHANDLE, $filename, permissions, CHMOD);\n</code></pre>\n\n<p><code>&gt;&gt;</code> this operator use for appending the file. It will not change the permission.</p>\n\n<p>Sidenote: Always use file error handling with <code>die</code> and <code>$!</code>.</p>\n"}], "owner": {"reputation": 1091, "user_id": 2696258, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/39f0c8050f7e7c996407461e05d4bdb1?s=128&d=identicon&r=PG&f=1", "display_name": "user2696258", "link": "https://stackoverflow.com/users/2696258/user2696258"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449327348, "creation_date": 1448515066, "last_edit_date": 1449327348, "question_id": 33931066, "link": "https://stackoverflow.com/questions/33931066/giving-777-permissions-to-a-dynamically-file-opened-created-using-open-function", "title": "Giving 777 permissions to a dynamically file opened/created using open function in Perl", "body": "<p>I have a Perl script, which opens a file using:</p>\n\n<pre><code>open(FH,\"&gt;\", $path);\n</code></pre>\n\n<p>But the problem is that this gives the only 644 permissions to the file(rw-r--r--). But I want to have 777 permissions to the file created dynamically. \nI am running this script from a job scheduler once a day and used <strong>sysopen</strong> function also but after one execution its permissions become 644 again.</p>\n\n<p>Also code is pulled from the remote git repository(mainline/master branch) and this repo has 644 permissions of the file. Is this creating the problem? Changing the mode of the file to 777 and push to remote repo and then using <strong>sysopen</strong> function will work?</p>\n\n<p>I want to make sure whats the problem, then only change any thing on mainline branch as its a critical branch.</p>\n\n<p>What could be the solution?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1448525887, "post_id": 33930488, "comment_id": 55627073, "body": "Note that the <code>.*?</code> in your regex pattern will match nothing at all. It is non-greedy and so will match as few characters as possible, and none at all is possible here"}, {"owner": {"reputation": 337, "user_id": 1840734, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/55b72900d90be6d8681723f6d600363e?s=128&d=identicon&r=PG", "display_name": "user1840734", "link": "https://stackoverflow.com/users/1840734/user1840734"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1448573440, "post_id": 33930488, "comment_id": 55653411, "body": "cheers, only found this non-greedy stuff yesterday, still learning :)"}], "answers": [{"comments": [{"owner": {"reputation": 337, "user_id": 1840734, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/55b72900d90be6d8681723f6d600363e?s=128&d=identicon&r=PG", "display_name": "user1840734", "link": "https://stackoverflow.com/users/1840734/user1840734"}, "edited": false, "score": 1, "creation_date": 1448567775, "post_id": 33933490, "comment_id": 55651196, "body": "Brilliant, thank you. The reason I tried to cram everything in is I came from using &#39;sed&#39; to &#39;perl&#39; (due to the sed available to me on windows not having non-greedy matching), I previously knew little of perl and couldn&#39;t figure the syntax to do this on the one line/call but did know how to write sed regular expressions.  $1 tip noted.  Cheers, Bryce."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1448526008, "last_edit_date": 1448526008, "creation_date": 1448525630, "answer_id": 33933490, "question_id": 33930488, "link": "https://stackoverflow.com/questions/33930488/perl-regex-one-liner-insert-newlines-before-match-except-on-lines-starting-wit/33933490#33933490", "title": "Perl regex one liner: insert newlines before match, except on lines starting with specific text?", "body": "<p>I don't understand why so many people try to cram everything into a single regex</p>\n\n<p>Just add a conditional statement modifier, like this. (Note that you should use <code>$1</code> etc. for the capture groups, not <code>\\1</code> etc.)</p>\n\n<pre><code>perl -i.bak -pe \"s#(\\d+/\\d+)#\\n$1#g unless /^Also started/\" tmpFile\n</code></pre>\n"}], "owner": {"reputation": 337, "user_id": 1840734, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/55b72900d90be6d8681723f6d600363e?s=128&d=identicon&r=PG", "display_name": "user1840734", "link": "https://stackoverflow.com/users/1840734/user1840734"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 725, "favorite_count": 0, "accepted_answer_id": 33933490, "answer_count": 1, "score": 1, "last_activity_date": 1448526322, "creation_date": 1448511274, "last_edit_date": 1448526322, "question_id": 33930488, "link": "https://stackoverflow.com/questions/33930488/perl-regex-one-liner-insert-newlines-before-match-except-on-lines-starting-wit", "title": "Perl regex one liner: insert newlines before match, except on lines starting with specific text?", "body": "<p>I'm using a batch file to do some quick Perl search and replace stuff on some files on Windows 7 with Strawberry Perl v5.22.0 installed.</p>\n\n<p>However, I've got one situation I can't figure out how to do.</p>\n\n<p>Sample text (it relates to horse racing and favouritism if you wondering what odd looking data is):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>2/2 FIRST PIGEON, A. R. Boyd's, It (D. Mangos) 3 9/9 BROADWAY, M. C. McTigue's, It (S. M. Miller) 4 17/16 CLEM'S PRIZE (WhipsterCrathie), G. D Shand's \nAlso started: 13/13 Adele Hanover, 11/12 Apollo King, 12/11 Cushan, 4/4 Fortunate, 6/8 Frosty McCoy. \n</code></pre>\n\n<p>I want to add line breaks before the 'number slash number' on first line BUT want to ignore all the same matches on the second line. So the result would look like:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>2/2 FIRST PIGEON, A. R. Boyd's, It (D. Mangos) 3 \n9/9 BROADWAY, M. C. McTigue's, It (S. M. Miller) 4 \n17/16 CLEM'S PRIZE (WhipsterCrathie), G. D Shand's\nAlso started: 13/13 Adele Hanover, 11/12 Apollo King, 12/11 Cushan, 4/4 Fortunate, 6/8 Frosty McCoy. \n</code></pre>\n\n<p>These sort of patterns happen multiple times in each file.</p>\n\n<p>So, adding in the newline before each number/number is easy enough</p>\n\n<pre><code>perl -i.bak -pe \"s#([0-9]+/[0-9]+.*?)#\\n\\1#g\"  tmpFile\n</code></pre>\n\n<p>but this of course applies it to all occurrences.</p>\n\n<p>I've googled for hours and tried all sorts of ways to ignore the matches on the lines beginning with <em>Also started</em> but with no success.  I feel this should be easy but can't see how, can someone show me the magic please?</p>\n\n<p>I need a one liner like above to fit in with the batch file please.</p>\n"}, {"tags": ["perl", "redirect", "mason"], "answers": [{"tags": [], "owner": {"reputation": 44607, "user_id": 833073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b2e4376123477a31727c54096d1d117?s=128&d=identicon&r=PG", "display_name": "fthiella", "link": "https://stackoverflow.com/users/833073/fthiella"}, "is_accepted": false, "score": 0, "last_activity_date": 1448532719, "creation_date": 1448532719, "answer_id": 33935837, "question_id": 33930317, "link": "https://stackoverflow.com/questions/33930317/how-to-construct-and-redirect-to-a-url-in-perl-mason/33935837#33935837", "title": "How to construct and redirect to a url in perl mason", "body": "<p>You could use <code>$m-&gt;redirect()</code> and <code>make_uri()</code>, like this:</p>\n\n<pre><code>$m-&gt;redirect( make_uri( '/a/b/c', { 'x' =&gt; 1, 'y' =&gt; 2 }), 302 );\n</code></pre>\n"}], "owner": {"reputation": 5835, "user_id": 969107, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c221e0ceaa1881df71c997ced41137b5?s=128&d=identicon&r=PG", "display_name": "Andy897", "link": "https://stackoverflow.com/users/969107/andy897"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1171, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1448532719, "creation_date": 1448510118, "question_id": 33930317, "link": "https://stackoverflow.com/questions/33930317/how-to-construct-and-redirect-to-a-url-in-perl-mason", "title": "How to construct and redirect to a url in perl mason", "body": "<p>From my .mi file, I want to do a redirect to  a relative url and pass parameters 'x' and 'y'. Redirection should happen to -</p>\n\n<blockquote>\n  <p>/a/b/c?x=1&amp;y=2</p>\n</blockquote>\n\n<p>Please suggest how can this be done. </p>\n\n<p>I am trying</p>\n\n<pre><code>$m-&gt;redirect((url =&gt; $Std-&gt;url('/gp/prime/pipeline/signup',{ protocol =&gt; 'https', get =&gt; {'x' =&gt; '1', 'y' =&gt; '2'}}))\n</code></pre>\n\n<p>But does not work. :(</p>\n"}, {"tags": ["perl", "grep"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 2, "creation_date": 1448514472, "post_id": 33929325, "comment_id": 55622527, "body": "<a href=\"https://lists.freebsd.org/pipermail/freebsd-current/2010-August/019310.html\" rel=\"nofollow noreferrer\"><code>grep</code> is absurdly fast</a>. Maybe you could write something faster, but ultimately you&#39;re still reading stuff linearly from a disk. I would instead consider instead putting the data in a database."}, {"owner": {"reputation": 217, "user_id": 3614213, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A7v3V.jpg?s=128&g=1", "display_name": "RedPandaSpaceOdyssey", "link": "https://stackoverflow.com/users/3614213/redpandaspaceodyssey"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1448571462, "post_id": 33929325, "comment_id": 55652606, "body": "Yes, and typically I use grep -f for similar tasks. In fact, I&#39;ve been running it while trying to troubleshoot something that will run faster. However, 24 hours later, grep -f still hasn&#39;t completed one of the jobs at hand. Trying to make a respectable attempt to come up with something speedier."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1448573780, "post_id": 33929325, "comment_id": 55653537, "body": "It would probably be speedier to put it in a database and do the queries there. (Also, great name) I would suggest trying that approach in parallel with your own."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1448618482, "post_id": 33929325, "comment_id": 55667491, "body": "The limiting factor on file IO is almost always the file IO. Doesn&#39;t really matter what tool you use - disks only spin so fast. Optimising might be doable by e.g. preloading files into memory/database/faster disk."}], "answers": [{"comments": [{"owner": {"reputation": 217, "user_id": 3614213, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A7v3V.jpg?s=128&g=1", "display_name": "RedPandaSpaceOdyssey", "link": "https://stackoverflow.com/users/3614213/redpandaspaceodyssey"}, "edited": false, "score": 0, "creation_date": 1448571614, "post_id": 33929882, "comment_id": 55652665, "body": "Thanks a bunch for this! In my defense, it&#39;s the first time I&#39;ve ever tried to write anything in Perl. Ever."}, {"owner": {"reputation": 217, "user_id": 3614213, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A7v3V.jpg?s=128&g=1", "display_name": "RedPandaSpaceOdyssey", "link": "https://stackoverflow.com/users/3614213/redpandaspaceodyssey"}, "edited": false, "score": 0, "creation_date": 1448572481, "post_id": 33929882, "comment_id": 55653021, "body": "The code works swell on the test data, but when i run it on the full files, I get:  <code>&#39;perl: warning: Falling back to the standard locale (&quot;C&quot;). Out of memory! Out of memory! perl: warning: Setting locale failed. perl: warning: Please check that your locale settings: \tLANGUAGE = (unset), \tLC_ALL = (unset), \tLANG = &quot;en_US.UTF-8&quot;     are supported and installed on your system.</code>"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 217, "user_id": 3614213, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A7v3V.jpg?s=128&g=1", "display_name": "RedPandaSpaceOdyssey", "link": "https://stackoverflow.com/users/3614213/redpandaspaceodyssey"}, "edited": false, "score": 1, "creation_date": 1448573831, "post_id": 33929882, "comment_id": 55653552, "body": "@RedPandaSpaceOdyssey How big is that filter file?"}, {"owner": {"reputation": 217, "user_id": 3614213, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A7v3V.jpg?s=128&g=1", "display_name": "RedPandaSpaceOdyssey", "link": "https://stackoverflow.com/users/3614213/redpandaspaceodyssey"}, "edited": false, "score": 0, "creation_date": 1448773744, "post_id": 33929882, "comment_id": 55715414, "body": "There are 48 map files with one filter file for each. The filter files range from 6.9 to 31M, and the map files range from 400M to 3.5G."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1448926555, "post_id": 33929882, "comment_id": 55776072, "body": "Then I don&#39;t see how your program can be producing an <i>Out of memory!</i> error. The filter hash should take up no more than about 300MB, and the map file is being read one line at a time. Have you written something different from my solution?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 5, "last_activity_date": 1448507135, "last_edit_date": 1448507135, "creation_date": 1448506763, "answer_id": 33929882, "question_id": 33929325, "link": "https://stackoverflow.com/questions/33929325/perl-script-faster-than-grep-f/33929882#33929882", "title": "Perl script faster than grep -f", "body": "<p>You don't seem to have made a real attempt at solving this problem yourself. The code you show won't even compile</p>\n\n<p>There are a few reasons why it's not working</p>\n\n<ul>\n<li><p>You are using file read loops with implicit control variables which read each line into <code>$_</code>, but you are somehow expecting data to appear in <code>$lines</code> and <code>$samlines</code>. You are also using <code>$samline</code> which you don't even declare</p></li>\n<li><p>The line </p>\n\n<pre><code>my %keys\n</code></pre>\n\n<p>needs a semicolon at the end</p></li>\n<li><p>I don't know what you expect to be in <code>$lines</code>, but assigning a scalar value to a hash like this</p>\n\n<pre><code>%keys = $lines;\n</code></pre>\n\n<p>will produce the warning <em>Odd number of elements in hash assignment</em> and leave you with a hash with only a single element</p></li>\n</ul>\n\n<p>Here is a Perl program that does what I believe you intended, but I can't say whether it will be significantly faster than command_line <code>grep</code>. Note that I have used the <a href=\"http://metacpan.org/module/autodie\"><code>autodie</code></a> pragma instead of explicitly testing the status of each file IO operation</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse v5.10.1;\nuse autodie;\n\nmy ($filter_f, $sam_f) = @ARGV;\n\nmy %filter;\n\n{\n    open my $fh, '&lt;', $filter_f;\n\n    while ( &lt;$fh&gt; ) {\n        $filter{$1} = 1 if /(\\S+)/;\n    }\n}\n\nopen my $fh, '&lt;', $sam_f;\n\nwhile ( &lt;$fh&gt; ) {\n    print if /(\\S+)/ and $filter{$1};\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>DB775P1:276:C2R0WACXX:2:1101:10000:77052     chr18   14723904    14723924    -\nDB775P1:276:C2R0WACXX:2:1101:10000:77052     chr18   14745586    14745606    -\nDB775P1:276:C2R0WACXX:2:1101:10000:77052     chr4    7944241     7944261     -\nDB775P1:276:C2R0WACXX:2:1101:10000:77052     chr4    8402856     8402876     +\nDB775P1:276:C2R0WACXX:2:1101:10000:77052     chr8    10864708    10864728    +\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 217, "user_id": 3614213, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A7v3V.jpg?s=128&g=1", "display_name": "RedPandaSpaceOdyssey", "link": "https://stackoverflow.com/users/3614213/redpandaspaceodyssey"}, "is_accepted": false, "score": 0, "last_activity_date": 1448918709, "creation_date": 1448918709, "answer_id": 34008271, "question_id": 33929325, "link": "https://stackoverflow.com/questions/33929325/perl-script-faster-than-grep-f/34008271#34008271", "title": "Perl script faster than grep -f", "body": "<p>So, Borodin's proposed script does in fact work. However, I found that my files were too large for it to complete. Instead, I sorted both files using 'sort' and then followed that up with join.</p>\n\n<pre><code>join -1 1 -2 1 filter.file map.file &gt; filtered.map\n</code></pre>\n\n<p>For each of the 48 jobs, I reserved 16G of RAM and 8 processors.</p>\n\n<p>Thank you everyone for your help with this!</p>\n"}], "owner": {"reputation": 217, "user_id": 3614213, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A7v3V.jpg?s=128&g=1", "display_name": "RedPandaSpaceOdyssey", "link": "https://stackoverflow.com/users/3614213/redpandaspaceodyssey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 0, "accepted_answer_id": 33929882, "answer_count": 2, "score": 1, "last_activity_date": 1448918709, "creation_date": 1448502204, "last_edit_date": 1495539882, "question_id": 33929325, "link": "https://stackoverflow.com/questions/33929325/perl-script-faster-than-grep-f", "title": "Perl script faster than grep -f", "body": "<p>I'm adapting an existing perl script proposed here: \n<a href=\"https://stackoverflow.com/questions/11490036/fast-alternative-to-grep-f\">Fast alternative to grep -f</a></p>\n\n<p>I need to filter many very large files (Map file), each ~10 million lines long x 5 fields wide using an also long list (Filter file) and print lines in the map file that match. I tried using grep -f, but it was simply taking too long. I read that this approach will be quicker.</p>\n\n<p>This is what my files look like:</p>\n\n<p>Filter file:</p>\n\n<pre><code>DB775P1:276:C2R0WACXX:2:1101:10000:77052\nDB775P1:276:C2R0WACXX:2:1101:10003:51920\nDB775P1:276:C2R0WACXX:2:1101:10004:36433\nDB775P1:276:C2R0WACXX:2:1101:10004:57256\n</code></pre>\n\n<p>Map file:</p>\n\n<pre><code>DB775P1:276:C2R0WACXX:2:1101:10000:70401     chr5    21985760    21985780    - \nDB775P1:276:C2R0WACXX:2:1101:10000:77052     chr18   14723904    14723924    - \nDB775P1:276:C2R0WACXX:2:1101:10000:77052     chr18   14745586    14745606    - \nDB775P1:276:C2R0WACXX:2:1101:10000:77052     chr4    7944241     7944261     - \nDB775P1:276:C2R0WACXX:2:1101:10000:77052     chr4    8402856     8402876     + \nDB775P1:276:C2R0WACXX:2:1101:10000:77052     chr8    10864708    10864728    + \nDB775P1:276:C2R0WACXX:2:1101:10002:88487     chr17   5681227     5681249     - \nDB775P1:276:C2R0WACXX:2:1101:10004:74842     chr13   2569168     2569185     + \nDB775P1:276:C2R0WACXX:2:1101:10004:74842     chr14   13253418    13253435    - \nDB775P1:276:C2R0WACXX:2:1101:10004:74842     chr14   13266344    13266361    -\n</code></pre>\n\n<p>I expect the output lines to look like this, because they contains the string present in both the map and filter files.</p>\n\n<pre><code>DB775P1:276:C2R0WACXX:2:1101:10000:77052     chr18   14723904    14723924    - \nDB775P1:276:C2R0WACXX:2:1101:10000:77052     chr18   14745586    14745606    - \nDB775P1:276:C2R0WACXX:2:1101:10000:77052     chr4    7944241     7944261     - \nDB775P1:276:C2R0WACXX:2:1101:10000:77052     chr4    8402856     8402876     + \nDB775P1:276:C2R0WACXX:2:1101:10000:77052     chr8    10864708    10864728    + \n</code></pre>\n\n<p>Here is the script as I've edited it so far, but no luck:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\n# Load the files\nmy $filter = $ARGV[0];\nmy $sam = $ARGV[1];\nopen FILE1, $filter;\n   if (! open FILE1, $filter) {die \"Can't open filterfile: $!\";}\nopen FILE2, $sam;\n   if (! open FILE2, $sam) {die \"Can't open samfile: $!\";}\n\n# build hash of keys using lines from the filter file\nmy $lines;\nmy %keys\nwhile (&lt;FILE1&gt;) {\n   chomp $lines;\n   %keys = $lines;\n}\nclose FILE1;\n\n# look up keys in the map file, if match, print line in the map file.\nmy $samlines;\nwhile (&lt;FILE2&gt;) {\n   chomp $samlines;\n   my ($id, $chr, $start, $stop, $strand)  = split /\\t/, $samline;\n   if (defined $lines-&gt;{$id}) { print \"$samline \\n\"; }\n}\n</code></pre>\n"}]