[{"tags": ["perl", "file"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1460575408, "post_id": 36607477, "comment_id": 60812226, "body": "What&#39;s the deal with the loop over <code>@cfg_files</code> that you don&#39;t actually use? Are those the files you want to read from?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1460588706, "post_id": 36607477, "comment_id": 60818917, "body": "It&#39;s called a <i>file handle</i>, not a <i>file handler</i>. It allows you to hold onto something, not handle something."}], "answers": [{"comments": [{"owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "edited": false, "score": 0, "creation_date": 1460576032, "post_id": 36607909, "comment_id": 60812594, "body": "perfect. While loops was the mistake I made."}, {"owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "edited": false, "score": 0, "creation_date": 1460576532, "post_id": 36607909, "comment_id": 60812931, "body": "I am using $cfg_file in the <code>cmd to get output</code>. But now after removing while loop, I am getting error <code>use of uninitialized value $_ in pattern match (m&#47;&#47;)</code>  Do  I need to reopen the while loop after writing and before reading ?"}, {"owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "edited": false, "score": 0, "creation_date": 1460577104, "post_id": 36607909, "comment_id": 60813290, "body": "I didnt see the change in if loop you suggested. Now I am not getting the error"}, {"owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "edited": false, "score": 0, "creation_date": 1460577274, "post_id": 36607909, "comment_id": 60813389, "body": "now <code>print $output</code> has the whole ouptut from the <code>cmd to get output</code> and not just the lines matching pattern"}, {"owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1460577641, "post_id": 36607909, "comment_id": 60813590, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/109084/discussion-between-jill448-and-zdim\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1460577769, "last_edit_date": 1460577769, "creation_date": 1460575941, "answer_id": 36607909, "question_id": 36607477, "link": "https://stackoverflow.com/questions/36607477/perl-file-handler-for-writing-and-reading/36607909#36607909", "title": "Perl file handler for writing and reading", "body": "<p>The <code>while (&lt;$fh1&gt;)</code> attempts to read from the <code>$fh1</code> filehandle. It there was nothing in the file at all, the loop body is never executed. Incidentally, the <code>+&gt;</code> clobbers the file first, so the file is indeed empty as the code gets to <code>while</code>. </p>\n\n<p>You can drop the <code>while</code> loop and test the <code>$pattern</code> against the variable <code>$output</code> you just got.</p>\n\n<pre><code>open my $fh1, '+&gt;', 'c:\\TEMP\\cfg.txt' or die $!;\n\nmy $output = `cmd to get output`;\nprint \"output is : $output\\n\";\nprint $fh1 $output;   #write the output into file\n\nif ($output =~ /($pattern)/s) {  # test and capture from output\n     print \"$1\\n\";\n     push (@matching_lines, $1);        \n}\n</code></pre>\n\n<p>Since the output may have multiple lines we add <code>/s</code> to the regex.</p>\n\n<p>The rest of your code would be the same.</p>\n"}], "owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "accepted_answer_id": 36607909, "answer_count": 1, "score": 0, "last_activity_date": 1460577769, "creation_date": 1460574588, "last_edit_date": 1460576640, "question_id": 36607477, "link": "https://stackoverflow.com/questions/36607477/perl-file-handler-for-writing-and-reading", "title": "Perl file handler for writing and reading", "body": "<p>I am trying to write the output of a cmd to a file and grep for a pattern in the output and push it into array,if found. I am facing issue in writing the output to a file</p>\n\n<p>The below Code without usage of file handler,arrays works fine and prints output</p>\n\n<pre><code>my $output = `cmd to get output`;\nprint \"output is : $output\\n\";   \n</code></pre>\n\n<p>But if I place the same code inside a file handler , then its not even printing the hardcoded word <code>output is :</code></p>\n\n<pre><code>use warnings;\nuse strict;\nuse Data::Dumper;\n\n foreach my $cfg_file (@cfg_files){\n #open the file handler for both read and write mode\n  open my $fh1, '+&gt;', 'c:\\TEMP\\cfg.txt' or die $!;\n   while ( &lt;$fh1&gt; ) { \n    my $output = `cmd to get output using $cfg_file`;\n    print \"output is : $output\\n\";\n    print $fh1 $output;   #write the output into file\n\n    if (/$pattern/) {   #read the file for a specific pattern\n           print \"$_\";\n         push(@matching_lines, $_);        \n    }\n  }\n}\n print Dumper(\\@matching_lines); \n</code></pre>\n\n<p>The code is not even throwing warnings .The output I am getting is just\n<code>$VAR1 = [];</code></p>\n"}, {"tags": ["regex", "perl", "sed"], "comments": [{"owner": {"reputation": 40406, "user_id": 459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db193fbf6f0929c49dd9704698204ff?s=128&d=identicon&r=PG", "display_name": "dlamblin", "link": "https://stackoverflow.com/users/459/dlamblin"}, "edited": false, "score": 0, "creation_date": 1460569744, "post_id": 36605662, "comment_id": 60808736, "body": "You&#39;re effectively asking for a regular expression, read: <a href=\"http://stackoverflow.com/tags/regex/info\">stackoverflow.com/tags/regex/info</a> to see available online tools that could help you rapidly test your scenario."}, {"owner": {"reputation": 40406, "user_id": 459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db193fbf6f0929c49dd9704698204ff?s=128&d=identicon&r=PG", "display_name": "dlamblin", "link": "https://stackoverflow.com/users/459/dlamblin"}, "edited": false, "score": 2, "creation_date": 1460569851, "post_id": 36605662, "comment_id": 60808797, "body": "I&#39;m voting to close this question as off-topic because the scope is too narrow and will only help one person once with a specific regular expression."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4173991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-3oNg9P_TD1M/AAAAAAAAAAI/AAAAAAAACF4/k8Y5fOCXaSc/photo.jpg?sz=128", "display_name": "A.J. Ruckman", "link": "https://stackoverflow.com/users/4173991/a-j-ruckman"}, "edited": false, "score": 0, "creation_date": 1460569828, "post_id": 36605760, "comment_id": 60808779, "body": "This isn&#39;t working for me. The output remains <code>0,0,0:17</code> in the file."}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "reply_to_user": {"reputation": 37, "user_id": 4173991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-3oNg9P_TD1M/AAAAAAAAAAI/AAAAAAAACF4/k8Y5fOCXaSc/photo.jpg?sz=128", "display_name": "A.J. Ruckman", "link": "https://stackoverflow.com/users/4173991/a-j-ruckman"}, "edited": false, "score": 0, "creation_date": 1460571693, "post_id": 36605760, "comment_id": 60809915, "body": "Check your file for special characters: <code>cat -A file</code> Check for whitespaces or tabs after <code>17</code> in your file."}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "reply_to_user": {"reputation": 37, "user_id": 4173991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-3oNg9P_TD1M/AAAAAAAAAAI/AAAAAAAACF4/k8Y5fOCXaSc/photo.jpg?sz=128", "display_name": "A.J. Ruckman", "link": "https://stackoverflow.com/users/4173991/a-j-ruckman"}, "edited": false, "score": 0, "creation_date": 1460572650, "post_id": 36605760, "comment_id": 60810505, "body": "I&#39;ve updated my answer."}], "tags": [], "owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "is_accepted": false, "score": 1, "last_activity_date": 1460572638, "last_edit_date": 1495542246, "creation_date": 1460569238, "answer_id": 36605760, "question_id": 36605662, "link": "https://stackoverflow.com/questions/36605662/replace-a-specific-string-with-another-string-unless-it-contains-a-period/36605760#36605760", "title": "Replace a specific string with another string, unless it contains a period", "body": "<p>With GNU sed:</p>\n\n<pre><code>sed 's/:17$/:17.12/' file\n</code></pre>\n\n<p>Update:</p>\n\n<pre><code>sed -r 's/:17([^.]|$)/:17.12/' file\n</code></pre>\n\n<p>If you want to edit your file \"in place\" use sed's option <code>-i</code>.</p>\n\n<hr>\n\n<p>See: <a href=\"https://stackoverflow.com/a/22944075/3776858\">The Stack Overflow Regular Expressions FAQ</a></p>\n"}, {"tags": [], "owner": {"reputation": 2838, "user_id": 4154375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d56dba9cd817fb4dfb662c6a91010fbb?s=128&d=identicon&r=PG&f=1", "display_name": "pjh", "link": "https://stackoverflow.com/users/4154375/pjh"}, "is_accepted": false, "score": 0, "last_activity_date": 1460573796, "creation_date": 1460573796, "answer_id": 36607197, "question_id": 36605662, "link": "https://stackoverflow.com/questions/36605662/replace-a-specific-string-with-another-string-unless-it-contains-a-period/36607197#36607197", "title": "Replace a specific string with another string, unless it contains a period", "body": "<p>One way to do it is with a Perl negative look-ahead assertion (<code>(?!pattern)</code>, see the 'perlre' man page for details):</p>\n\n<pre><code>perl -ple 's/\\b17\\b(?!\\.12\\b)/17.12/' file\n</code></pre>\n\n<p>Use</p>\n\n<pre><code>perl -i -ple ...\n</code></pre>\n\n<p>to update the file.</p>\n\n<p>This will replace '17' with '17.12' anywhere in the file as long as it is not already followed by '.12'.  It may be overkill for this problem, but the technique is worth knowing.</p>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 0, "last_activity_date": 1460577545, "creation_date": 1460577545, "answer_id": 36608381, "question_id": 36605662, "link": "https://stackoverflow.com/questions/36605662/replace-a-specific-string-with-another-string-unless-it-contains-a-period/36608381#36608381", "title": "Replace a specific string with another string, unless it contains a period", "body": "<p>Given that 17 occurs at the end of a line, you can anchor your pattern there:</p>\n\n<pre><code>s/17$/17.12/\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 4173991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh5.googleusercontent.com/-3oNg9P_TD1M/AAAAAAAAAAI/AAAAAAAACF4/k8Y5fOCXaSc/photo.jpg?sz=128", "display_name": "A.J. Ruckman", "link": "https://stackoverflow.com/users/4173991/a-j-ruckman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1460580048, "answer_count": 3, "score": -4, "last_activity_date": 1460577545, "creation_date": 1460568941, "last_edit_date": 1460569659, "question_id": 36605662, "link": "https://stackoverflow.com/questions/36605662/replace-a-specific-string-with-another-string-unless-it-contains-a-period", "closed_reason": "Not suitable for this site", "title": "Replace a specific string with another string, unless it contains a period", "body": "<p>I'm looking for a way to do this with <code>sed</code> or <code>perl</code>. I have files filled with strings like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>0,0,0:17\n1,0,0:17\n0,1,0:17\n0,0,1:17\n1,0,1:17\n</code></pre>\n\n<p>I also have files filled with strings like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>0,0,-1:17.12\n1,0,-1:17.12\n2,0,-1:17.12\n0,1,-1:17.12\n1,1,-1:17.12\n</code></pre>\n\n<p>I want to change all instances of the number <code>17</code> into <code>17.12</code>, but I don't want to accidentally change instances of <code>17.12</code> into <code>17.12.12</code>.</p>\n\n<p>Any help?</p>\n"}, {"tags": ["git", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1460561004, "post_id": 36602434, "comment_id": 60802860, "body": "It sounds like you are missing the feature branches."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460561092, "post_id": 36602434, "comment_id": 60802936, "body": "Do you have any arguments against putting everything in one huge repository starts, so they get used to git (which usually takes some convincing, although it&#39;s not very hard)? Afterwards you can think about next steps."}, {"owner": {"reputation": 2279, "user_id": 13563, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VoEyi.jpg?s=128&g=1", "display_name": "jimtut", "link": "https://stackoverflow.com/users/13563/jimtut"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1460568582, "post_id": 36602434, "comment_id": 60808053, "body": "I agree with one of @simbabque&#39;s comments - throw everything into 1 repo to start, or possibly 3-5 repo&#39;s, based on the directories you outlined.  It doesn&#39;t really matter that most files are unrelated to each other.  You don&#39;t want 750 different projects/repo&#39;s, especially since referring to files in other project/repo&#39;s would require you to use git submodules, and that&#39;s a complexity you just don&#39;t need to start."}, {"owner": {"reputation": 307, "user_id": 6013979, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a9a594885e641ccaa827d19d1ca303c4?s=128&d=identicon&r=PG&f=1", "display_name": "yulivee", "link": "https://stackoverflow.com/users/6013979/yulivee"}, "edited": false, "score": 0, "creation_date": 1460616378, "post_id": 36602434, "comment_id": 60827664, "body": "I know that 750 individual repos is a bad idea. I am searching for a solution when there are changes in two unrelated programs in the development branch. When one pushes to master, both changes get incorporated. That may not be desirable. I don&#39;t understand yet, how the feature-branches will help me here, as far as I understand them, you use them for features for future releases - and for the next release you work in develop."}], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 6013979, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a9a594885e641ccaa827d19d1ca303c4?s=128&d=identicon&r=PG&f=1", "display_name": "yulivee", "link": "https://stackoverflow.com/users/6013979/yulivee"}, "edited": false, "score": 0, "creation_date": 1460616808, "post_id": 36602994, "comment_id": 60827901, "body": "Just for clarification: you suggest doing all development work in individual feature branches? wouldn&#39;t that make develop just a copy of the master branch?"}, {"owner": {"reputation": 30812, "user_id": 589329, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7badf6e89094b134dd4eb65792b7f734?s=128&d=identicon&r=PG", "display_name": "Vampire", "link": "https://stackoverflow.com/users/589329/vampire"}, "reply_to_user": {"reputation": 307, "user_id": 6013979, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a9a594885e641ccaa827d19d1ca303c4?s=128&d=identicon&r=PG&f=1", "display_name": "yulivee", "link": "https://stackoverflow.com/users/6013979/yulivee"}, "edited": false, "score": 0, "creation_date": 1460620051, "post_id": 36602994, "comment_id": 60830056, "body": "No, as far as I understood git-flow, master just gets the merges for finished versions from release- or hotfix-branches. On develop you collect ready feature-branches and fixes until you think a release branch is due."}], "tags": [], "owner": {"reputation": 30812, "user_id": 589329, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7badf6e89094b134dd4eb65792b7f734?s=128&d=identicon&r=PG", "display_name": "Vampire", "link": "https://stackoverflow.com/users/589329/vampire"}, "is_accepted": true, "score": 0, "last_activity_date": 1460561085, "creation_date": 1460561085, "answer_id": 36602994, "question_id": 36602434, "link": "https://stackoverflow.com/questions/36602434/organizing-a-git-repo-for-a-huge-legacy-code-base/36602994#36602994", "title": "organizing a git repo for a huge legacy code base", "body": "<p>According to git-flow those two developers work on feature branches. If the dev is finished he merges the feature branch to the devel branch, so the devel branch should always be stable enough to be merged, shouldn't it?</p>\n"}], "owner": {"reputation": 307, "user_id": 6013979, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a9a594885e641ccaa827d19d1ca303c4?s=128&d=identicon&r=PG&f=1", "display_name": "yulivee", "link": "https://stackoverflow.com/users/6013979/yulivee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 36602994, "answer_count": 1, "score": 1, "last_activity_date": 1460561085, "creation_date": 1460559711, "last_edit_date": 1460560967, "question_id": 36602434, "link": "https://stackoverflow.com/questions/36602434/organizing-a-git-repo-for-a-huge-legacy-code-base", "title": "organizing a git repo for a huge legacy code base", "body": "<p>I have inherited a huge perl-codebase. The developers (we are a 3-people team) currently do their \"versioning\" via backup-files (file.001, file.002 [...] and file is a softlink to the most recent version) I earned the task of implementing proper version control. I choose to take git as it is most flexible and I want to adapt <a href=\"http://nvie.com/posts/a-successful-git-branching-model/\" rel=\"nofollow\">nvie's git-flow branching strategy</a> as it suits the way they work here.</p>\n\n<p>My Problem is, I don't know how to properly organize the Repository. We have three directories where our code is stored:</p>\n\n<ol>\n<li>A directory for deamons. This contains ~200 individual deamons. 90% of them have no dependencies with each other. Deamons are between 4000-10.000 lines of code</li>\n<li>A directory for tools. Tools contains ~400 programms. Again, most of them are not related</li>\n<li>A directory with self-written Modules. Some of these have dependencies to the deamons (e.g. when changing a module interface/subroutine you have to change some deamons as well). Those some up to ~150.</li>\n</ol>\n\n<p>Additionally:</p>\n\n<ol>\n<li>There is one directory where all config-files reside</li>\n<li>There is one directory where all testcases reside</li>\n</ol>\n\n<p>I thought of creating a git repository for each of these directories.</p>\n\n<p>Following Problem:\nTwo persons work on two deamons in the development branch, one is finished working, one is still busy each of them has commited their changes. Now you cannot merge stable versions to master, as you would also push the half-baked version along with the finished one. As far as I know, its not possible to only push individual files.</p>\n\n<p>Normally, one would organize git repositories per project. In our case that would mean creating ~800 repositories, one for each deamon, one for each of our tools, one for each module. I get the feeling that this would be really hard to manage, although it would somehow solve the merge-to-master problem.</p>\n\n<p>Has somebody any experiences with those kind of problems? Any hints? I would also appreciate a hint for a good book on the subject.</p>\n"}, {"tags": ["apache", "perl", "cgi"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1460559225, "post_id": 36602052, "comment_id": 60801337, "body": "Why are you printing the headers twice in the first place?"}, {"owner": {"reputation": 680, "user_id": 6038082, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/354cfd22c3080b02a5ae540f5b5abfc2?s=128&d=identicon&r=PG&f=1", "display_name": "A.G.Progm.Enthusiast", "link": "https://stackoverflow.com/users/6038082/a-g-progm-enthusiast"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1460559794, "post_id": 36602052, "comment_id": 60801867, "body": "Well, I do not want to print it twice. This is just a small demonstration of my real-time code where in the earlier version (Env-1) the header is getting printed twice by mistake. I want to solve it. In order to do that I noticed this behaviour."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1460560529, "post_id": 36602052, "comment_id": 60802470, "body": "I assume you&#39;ve copied the rendered output from your browser, since there&#39;s no HTML in it. Run your script on the command line and edit the output into your question."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1460568461, "creation_date": 1460568461, "answer_id": 36605507, "question_id": 36602052, "link": "https://stackoverflow.com/questions/36602052/printing-cgi-header-twice-behaving-differently-for-different-cgi-and-apache-vers/36605507#36605507", "title": "Printing CGI header twice behaving differently for different CGI and Apache version", "body": "<p>Adding the following will suppress duplicate headers in newer versions:</p>\n\n<pre><code>use CGI qw( -unique_headers );\n</code></pre>\n\n<p>If that causes an error in the older version, you can use the following instead:</p>\n\n<pre><code>{\n   no warnings qw( once );\n   $CGI::HEADERS_ONCE = 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 680, "user_id": 6038082, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/354cfd22c3080b02a5ae540f5b5abfc2?s=128&d=identicon&r=PG&f=1", "display_name": "A.G.Progm.Enthusiast", "link": "https://stackoverflow.com/users/6038082/a-g-progm-enthusiast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 36605507, "answer_count": 1, "score": 0, "last_activity_date": 1460568517, "creation_date": 1460558894, "last_edit_date": 1460568517, "question_id": 36602052, "link": "https://stackoverflow.com/questions/36602052/printing-cgi-header-twice-behaving-differently-for-different-cgi-and-apache-vers", "title": "Printing CGI header twice behaving differently for different CGI and Apache version", "body": "<p>I am running the below code in two different environments with below mentioned versions  and outputs:</p>\n\n<p>Environment 1 (Perl : 5.14.1 , CGI module : 3.52, Apache : 2.4.12) outputs:</p>\n\n<pre><code>Content-Type: text/html; charset=ISO-8859-1 Hello Everybody .. !\n</code></pre>\n\n<p>Environment 2 (Perl : 5.6.1 , CGI module : 2.752, Apache : 1.1) outputs:</p>\n\n<pre><code>Hello Everybody .. !\n</code></pre>\n\n<p>I have seen that the CGI header function has undergone some changes in 3.52 from 2.752. Can anybody please help me understand if the difference in output \nfor printing the header twice is due to the CGI version or Apache version ?</p>\n\n<pre><code>use strict;\nuse warnings;\nuse CGI;\nuse CGI::Carp qw(fatalsToBrowser);\nmy $q = CGI-&gt;new;\n\nprint $q-&gt;header();\nprint $q-&gt;header();\n\nprint $q-&gt;start_html();\n\nwarn \"This is test header issue script \\n\";\nprint \"Hello Everybody .. !\";\nprint $q-&gt;end_html();\n</code></pre>\n"}, {"tags": ["arrays", "excel", "perl", "hash"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460558647, "post_id": 36601603, "comment_id": 60800791, "body": "There are some typos in your example. There&#39;s a <code>my</code> missing, and the use of <code>%hash</code> and <code>%tools</code> doesn&#39;t make sense. I fixed those and ran it, which gave me the correct output, but row 1 and column A are empty. It starts in B2, but looks completely correct. I think your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> does something else as your real code."}, {"owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460558977, "post_id": 36601603, "comment_id": 60801102, "body": "@simbabque Thanks for pointing out the typos. I have corrected them. I have double checked my code and ran again and still the output is same as the current output mentioned above. Not sure, what am I missing"}, {"owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 1, "creation_date": 1460559573, "post_id": 36601603, "comment_id": 60801665, "body": "Can you include a <code>print $row . &quot;\\n&quot;;</code> inside your loop to verify that <code>$row</code> isn&#39;t being incremented?"}, {"owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "reply_to_user": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 0, "creation_date": 1460559879, "post_id": 36601603, "comment_id": 60801954, "body": "@Mr.Llama That gave me output <code>1 1 1</code>. <code>$row</code> isn&#39;t incremented, thats the reason the heading (<code>key2</code> and <code>key 3</code>)is printing correctly . But why only values are getting space. I tried printing the hash outside the excel and the values came out without any spaces"}, {"owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 1, "creation_date": 1460560266, "post_id": 36601603, "comment_id": 60802248, "body": "Can you add <code>use Data::Dumper;</code> to the start of your script and include <code>print Dumper($hash);</code> before the foreach loop?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 0, "creation_date": 1460560475, "post_id": 36601603, "comment_id": 60802429, "body": "@Mr.Llama I agree, the data must be wrong. OP should <a href=\"https://stackoverflow.com/posts/36601603/edit\">edit</a> the question and include the real content of <code>%hash</code>, the pseudo-description at the top of the question is useless. I have used <code>my %hash = (     key1 =&gt; [qw&#47;foo bar&#47;],     key2 =&gt; [qw&#47;john adam gill&#47;],     key3 =&gt; [qw&#47;apple banana mango orango&#47;], ); </code>, which obviously works. I think there are <code>undef</code>s in the data structure."}, {"owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "reply_to_user": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 0, "creation_date": 1460562895, "post_id": 36601603, "comment_id": 60804320, "body": "@Mr.Llama added the code in which I am forming the hash"}, {"owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 0, "creation_date": 1460563386, "post_id": 36601603, "comment_id": 60804670, "body": "You&#39;re not clearing <code>@matching_lines</code> correctly so it ends up having <code>undef</code> entries instead of being empty: <a href=\"http://stackoverflow.com/a/36603758/477563\">stackoverflow.com/a/36603758/477563</a>"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 4, "last_activity_date": 1460569778, "last_edit_date": 1460569778, "creation_date": 1460561877, "answer_id": 36603276, "question_id": 36601603, "link": "https://stackoverflow.com/questions/36601603/perl-dump-data-from-a-hash-into-excel/36603276#36603276", "title": "Perl: Dump data from a hash into excel", "body": "<p>Edit: Now you've actually updated your program to clarify that the problem is how you're reading your data, the below is moot. But it does illustrate an alternative approach. </p>\n\n<p>OK, the core problem here is what you're trying to do is 'flip' a hash. You're printing row by row, but your hash is organised in columns. </p>\n\n<p>Using comma sep as a quick proxy for printing actual excel:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\n#initialise\nmy %hash = (\n    key1 =&gt; [qw (  foo bar  )],\n    key2 =&gt; [qw (  john adam gill  )],\n    key3 =&gt; [qw (  apple banana mango orange )],\n);\n\n#print for debug\nprint Dumper \\%hash;\n\n\n#get header row. Sort it, because hashes are unordered.\n#could instead:\n#my @keys = qw ( key1 key2 key3 );\nmy @keys = sort keys %hash;\n#print header row\nprint join \",\", @keys, \"\\n\";\n\n#iterate until every element of the hash is gone\nwhile ( map { @{ $hash{$_} } } @keys ) {\n    #cycle the keys, shifting a value of the top of each array. \n    #replace any undefined values with ''. \n    print shift( @{ $hash{$_} } ) // '', \",\" for @keys;\n    print \"\\n\";\n}\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>key1,key2,key3,\nfoo,john,apple,\nbar,adam,banana,\n,gill,mango,\n,,orange,\n</code></pre>\n\n<p>Which if you load it as <code>csv</code> into Excel, should give your desired result. I'm pretty sure you could use a similar 'write row' with the module. </p>\n\n<p>So this actually seems to do what you want:</p>\n\n<pre><code>#!/usr/env/perl\nuse strict;\nuse warnings;\n\nuse Excel::Writer::XLSX;\n\n#initialise\nmy %hash = (\n    key1 =&gt; [qw (  foo bar  )],\n    key2 =&gt; [qw (  john adam gill  )],\n    key3 =&gt; [qw (  apple banana mango orange )],\n);\n\n\nmy $workbook = Excel::Writer::XLSX-&gt;new('c:\\TEMP\\filename.xlsx');\nif ( not defined $workbook ) {\n    die \"Failed to create spreadsheet: $!\";\n}\nmy $worksheet = $workbook-&gt;add_worksheet();\n\n#  Add and define a format\nmy $format = $workbook-&gt;add_format();\n$format-&gt;set_bg_color('yellow');\n\nmy @keys = sort keys %hash;\nmy $row  = 0;\n$worksheet-&gt;write_row( $row++, 0, \\@keys, $format );\nwhile ( map { @{ $hash{$_} } } @keys ) {\n    my $col = 0;\n    $worksheet-&gt;write( $row, $col++, shift( @{ $hash{$_} } ) // '' )\n        for @keys;\n    $row++;\n}\n$workbook-&gt;close() or die \"Error closing file: $!\";\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/HGaM8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HGaM8.png\" alt=\"Output\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "edited": false, "score": 0, "creation_date": 1460563494, "post_id": 36603758, "comment_id": 60804729, "body": "Yep. Worked perfectly. Thank You."}], "tags": [], "owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "is_accepted": true, "score": 2, "last_activity_date": 1460566600, "last_edit_date": 1460566600, "creation_date": 1460563109, "answer_id": 36603758, "question_id": 36601603, "link": "https://stackoverflow.com/questions/36601603/perl-dump-data-from-a-hash-into-excel/36603758#36603758", "title": "Perl: Dump data from a hash into excel", "body": "<p>You're not correctly emptying your <code>@matching_lines</code> array.  This line:</p>\n\n<pre><code>for (@matching_lines) { $_ = undef } \n</code></pre>\n\n<p>Sets the array values to <code>undef</code>, but <em>does not remove them</em>.<br>\nFor example, if <code>@matching_lines</code> was <code>('foo', 'bar')</code>, now it becomes <code>(undef, undef)</code>.  When you add <code>baz</code> and <code>qux</code> to it later, it becomes <code>(undef, undef, 'baz', 'qux')</code>.  These <code>undef</code>s become blank cells when you add them to the worksheet.</p>\n\n<p>To correctly empty the array, use:</p>\n\n<pre><code>@matching_lines = ();\n</code></pre>\n"}], "owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1716, "favorite_count": 1, "accepted_answer_id": 36603758, "answer_count": 2, "score": 4, "last_activity_date": 1460569778, "creation_date": 1460557862, "last_edit_date": 1460562715, "question_id": 36601603, "link": "https://stackoverflow.com/questions/36601603/perl-dump-data-from-a-hash-into-excel", "title": "Perl: Dump data from a hash into excel", "body": "<p>I have a hash with key and Values(array). I want to dump them to a spreadsheet, but having difficulty in arranging them .</p>\n\n<p>%hash <br>\nkey1 -> foo bar <br>\nkey2-> john adam gill <br>\nkey3-> apple banana mango orange <br></p>\n\n<p>Code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Excel::Writer::XLSX;\n\nmy $pattern = \"BEGIN_\";\nmy $format;\nmy @keys = qw(key1 key2 key3);\nforeach my $key(@keys){\n     open my $fh, \"&lt;\",\"filename.txt\" or die $!;\n      while ( &lt;$fh&gt; ) {\n        if (/$pattern/) {\n        push(@matching_lines, $_);\n      }\n    }\n    $hash{$key} = [@matching_lines] ; \n   for (@matching_lines) { $_ = undef } ; #Emptying the array contents,to reuse it for for all the other keys\n}\n\nmy $workbook = Excel::Writer::XLSX-&gt;new( 'c:\\TEMP\\filename.xlsx' ); \n if (not defined $workbook)\n{\n    die \"Failed to create spreadsheet: $!\";\n}\nmy $worksheet = $workbook-&gt;add_worksheet();\n\n#  Add and define a format\n$format = $workbook-&gt;add_format();\n$format-&gt;set_bg_color( 'yellow' );\n\nmy $row = 1;\nmy $col = 0;\n\nforeach my $k (keys %hash)\n{\n     $worksheet-&gt;write($row, $col, $k, $format); # title\n     $worksheet-&gt;write_col($row+1, $col, $hash{$k}); #value\n     $col++;\n}\n$workbook-&gt;close() or die \"Error closing file: $!\";   \n</code></pre>\n\n<p><strong>Current Output</strong> <br></p>\n\n<p><a href=\"https://i.stack.imgur.com/s8zNc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s8zNc.png\" alt=\"enter image description here\"></a><br><strong>Desired Output</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/JTCfv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JTCfv.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["string", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460556745, "post_id": 36600940, "comment_id": 60799093, "body": "Is this JSON, or another well-known format that has a parser around?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460557513, "post_id": 36600940, "comment_id": 60799776, "body": "Welcome to Stack Overflow and the Perl tag by the way. Very good first post! :)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1460558211, "post_id": 36600940, "comment_id": 60800389, "body": "Then please go and smack whoever gave you that with a rolled up copy of the JSON spec. Because that&#39;s really irritating."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460557389, "post_id": 36601370, "comment_id": 60799637, "body": "I should not have wasted time looking for documentation. :P"}], "tags": [], "owner": {"reputation": 23, "user_id": 6199122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e058f381e265d96e11c41c5e66b9af12?s=128&d=identicon&r=PG&f=1", "display_name": "Jule", "link": "https://stackoverflow.com/users/6199122/jule"}, "is_accepted": false, "score": 1, "last_activity_date": 1460557336, "creation_date": 1460557336, "answer_id": 36601370, "question_id": 36600940, "link": "https://stackoverflow.com/questions/36600940/perl-extract-numbers-from-string-edit-put-back-into-string-at-their-original-p/36601370#36601370", "title": "perl extract numbers from string, edit, put back into string at their original position", "body": "<p>I just found the evaluation modifier for regex! I now did it with </p>\n\n<pre><code>$string =~ s/([0-9]+)/$number-$1/eg;\n</code></pre>\n\n<p>and it worked!</p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1460557372, "creation_date": 1460557372, "answer_id": 36601390, "question_id": 36600940, "link": "https://stackoverflow.com/questions/36600940/perl-extract-numbers-from-string-edit-put-back-into-string-at-their-original-p/36601390#36601390", "title": "perl extract numbers from string, edit, put back into string at their original position", "body": "<p>You could use a regular expression substitution <a href=\"http://perldoc.perl.org/perlrequick.html#Search-and-replace\" rel=\"nofollow\">with the <code>/e</code> flag</a>, search for long numbers and run Perl code in the substitution part.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nmy $number = 100_000_000;\nmy $string = \"struct:{thin:[[75518103,75518217],[75518338,75518363],[75532810,75533910],],thick:[[75518363,75518424],[75521257,75521463],],}\";\n\n$string =~ s/(\\d+)/{$number - $1}/eg;\n\nsay $string;\n\n__END__\n\nstruct:{thin:[[24481897,24481783],[24481662,24481637],[24467190,24466090],],thick:[[24481637,24481576],[24478743,24478537],],}\n</code></pre>\n\n<p>If there are no other numbers in the string, that would work. In case there is more logic involved, you can also move it into a subroutine and just call that in the substitution.</p>\n\n<pre><code>sub replace {\n    return $_ % 2 ? $_ * 2 : $_ / 4;\n}\n\n$string =~ s/(\\d+)/{replace($1)}/eg; \n</code></pre>\n\n<p>You might also need to revise the search pattern to be a bit more precise.</p>\n"}], "owner": {"reputation": 23, "user_id": 6199122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e058f381e265d96e11c41c5e66b9af12?s=128&d=identicon&r=PG&f=1", "display_name": "Jule", "link": "https://stackoverflow.com/users/6199122/jule"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 36601390, "answer_count": 2, "score": 0, "last_activity_date": 1598212385, "creation_date": 1460556396, "last_edit_date": 1598212385, "question_id": 36600940, "link": "https://stackoverflow.com/questions/36600940/perl-extract-numbers-from-string-edit-put-back-into-string-at-their-original-p", "title": "perl extract numbers from string, edit, put back into string at their original position", "body": "<p>I'm trying to edit the numbers in a string and put it back in the same place as they have been before.</p>\n<p>Example:</p>\n<pre><code>$string = &quot;struct:{thin:[[75518103,75518217],[75518338,75518363],[75532810,75533910],],thick:[[75518363,75518424],[75521257,75521463],],}&quot;;\n</code></pre>\n<p>I need to edit the numbers, but want to keep the rest of the string at it is. Additionally the number of brackets can vary.</p>\n<p>Until now I split the string at &quot;,&quot; with\n<code>@array = split (',',$string);</code>\nand extracted the numbers for editing with</p>\n<pre><code>foreach (@array) { \n            $_ =~ s/\\D//g;\n            $_ = $number - $_;\n}\n</code></pre>\n<p>now I want to put the numbers back in their original place in the string, but I don't know how.\nSomehow I hope there is a better way to edit the numbers in the string without splitting it and extracting the numbers. Hope you can help me</p>\n"}, {"tags": ["python", "perl"], "comments": [{"owner": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "edited": false, "score": 0, "creation_date": 1460553644, "post_id": 36599558, "comment_id": 60796408, "body": "They are called dictionaries - <a href=\"http://stackoverflow.com/questions/1024847/add-key-to-a-dictionary-in-python\">link</a>"}, {"owner": {"reputation": 2679, "user_id": 6153562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee9c9f355300df5464bc13e3563a1deb?s=128&d=identicon&r=PG&f=1", "display_name": "C Panda", "link": "https://stackoverflow.com/users/6153562/c-panda"}, "edited": false, "score": 2, "creation_date": 1460554408, "post_id": 36599558, "comment_id": 60797096, "body": "<b>Don&#39;t write perl in python. Which is a special case of &quot;Don&#39;t line lang-A in lang-B&quot;. Because that way you will only get to know stuff from lang-B you already had in lang-A and are starting to miss.</b> If you are going to write python, write it in python. Read the docs. The data structure is <code>dict</code> by the way."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1460555364, "post_id": 36599787, "comment_id": 60797888, "body": "<i>&quot;Note that the order is not preserved in a dictionary&quot;</i> I am surprised that I read this so often. Order isn&#39;t preserved in arrays either. Think about what you mean by <i>preserving an order</i>."}, {"owner": {"reputation": 2835, "user_id": 1660298, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7d94e3f7162dc1ee6589929559a474c6?s=128&d=identicon&r=PG", "display_name": "th3an0maly", "link": "https://stackoverflow.com/users/1660298/th3an0maly"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1460565194, "post_id": 36599787, "comment_id": 60805964, "body": "I mean insertion order. e.g. <code>list.append(value)</code> will append it to the end. There is no equivalent in <code>dict</code>. I don&#39;t understand the mistake. Please explain? :)"}, {"owner": {"reputation": 315, "user_id": 5133719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-s4Ogtdj2uFI/AAAAAAAAAAI/AAAAAAAAAEg/00P6zA_0aO4/photo.jpg?sz=128", "display_name": "Ravi Shanker Reddy", "link": "https://stackoverflow.com/users/5133719/ravi-shanker-reddy"}, "edited": false, "score": 0, "creation_date": 1460603205, "post_id": 36599787, "comment_id": 60823042, "body": "userdict = {} for line in str:         array = line.split(&#39;|&#39;, )         system_id = array[55]         Origin = array[12]         if  array[55] != &quot;&quot;:                 userdict[Origin][system_id] += 1;   I written my program like this. But Its showing error. I dont know whats the input in the file(To initialize). But I want to calculate How many System_id are present and whats the count per each system_id under that origin"}], "tags": [], "owner": {"reputation": 2835, "user_id": 1660298, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7d94e3f7162dc1ee6589929559a474c6?s=128&d=identicon&r=PG", "display_name": "th3an0maly", "link": "https://stackoverflow.com/users/1660298/th3an0maly"}, "is_accepted": false, "score": 4, "last_activity_date": 1460568165, "last_edit_date": 1460568165, "creation_date": 1460553725, "answer_id": 36599787, "question_id": 36599558, "link": "https://stackoverflow.com/questions/36599558/data-type-in-python-like-hashes-in-perl/36599787#36599787", "title": "Data type in python like hashes in Perl", "body": "<p>You can use Python dictionaries. They are <a href=\"https://en.wikipedia.org/wiki/Hash_table\" rel=\"nofollow\">hash tables</a> like Perl hashes.</p>\n\n<pre><code>var = {'2016-04-08': {'GSM': 32, 'SMPP': 29}}\n&gt;&gt;&gt; var['2016-04-08']\n{'SMPP': 29, 'GSM': 32}\n&gt;&gt;&gt; var['2016-04-08']['SMPP']\n29\n</code></pre>\n\n<p>Note that when iterating over a Python dictionary, just like when iterating over a Perl hash, the order in which you visit the elements is unrelated to the order in which they were inserted.</p>\n"}], "owner": {"reputation": 315, "user_id": 5133719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-s4Ogtdj2uFI/AAAAAAAAAAI/AAAAAAAAAEg/00P6zA_0aO4/photo.jpg?sz=128", "display_name": "Ravi Shanker Reddy", "link": "https://stackoverflow.com/users/5133719/ravi-shanker-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4768, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1460568165, "creation_date": 1460553252, "last_edit_date": 1460555245, "question_id": 36599558, "link": "https://stackoverflow.com/questions/36599558/data-type-in-python-like-hashes-in-perl", "title": "Data type in python like hashes in Perl", "body": "<p>I am learning Python now. Before I am working with Perl. In Perl we have multi-level hashes for sorting the data. Are there any types like that available in Python?</p>\n\n<p>For example</p>\n\n<pre><code>$hash{$date}{$Origin_Type}++;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>$var = {\n    '2016-04-08' =&gt; {\n        GSM  =&gt; 32,\n        SMPP =&gt; 29\n    }\n}\n</code></pre>\n"}, {"tags": ["string", "perl", "template-engine"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1460557124, "post_id": 36599488, "comment_id": 60799422, "body": "Re. &quot;I have only seen answers in relation to Template::Toolkit which doesn&#39;t seem to be available on our system.&quot; (from before your edit) Template::Toolkit is simply the distribution that contains Template.pm. It&#39;s not a separate templating system."}, {"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1460559186, "post_id": 36599488, "comment_id": 60801301, "body": "Yeah I realized that. <code>use Template::Toolkit</code> doesn&#39;t work on this system. I have no idea why though..."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1460559469, "post_id": 36599488, "comment_id": 60801550, "body": "It doesn&#39;t work because <code>use Template::Toolkit;</code> looks for the file Toolkit.pm inside the Template directory, but there is no Toolkit.pm. You have to do <code>use Template;</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1460561948, "post_id": 36599488, "comment_id": 60803614, "body": "<code>use Template::Toolkit</code> doesn&#39;t work on any system. There&#39;s no such module as Template::Toolkit. The main interface to the Template Toolkit is just called &quot;Template&quot; - it&#39;s the system that you&#39;re using."}, {"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1460563258, "post_id": 36599488, "comment_id": 60804568, "body": "Oh my god I&#39;m an idiot , thanks for clearing that up"}, {"owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "edited": false, "score": 2, "creation_date": 1460584807, "post_id": 36599488, "comment_id": 60817365, "body": "The only real idiot is the person to frightened to ask."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1460638949, "post_id": 36599488, "comment_id": 60843742, "body": "@PaulRussell: I think it&#39;s less than sensible of the author to name the module/package <code>Template</code> when it is known colloquially as <i>Template::Toolkit</i> and <i>TT</i>. Too late to change that now, obviously"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1460640858, "post_id": 36599488, "comment_id": 60845366, "body": "@PaulRussell: Stack Exchange is different from regular forums or blogs. While it&#39;s fine to <i>add</i> clarifying information to your question, or to correct typing mistakes, it&#39;s inappropriate to morph your question so far from its original form, primarily because it usually makes nonsense out of comments and solutions posted before the changes. If you gain enlightenment from your original question but reach a new stumbling block then you should open a new question."}, {"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1460728985, "post_id": 36599488, "comment_id": 60891903, "body": "okay sorry. I thought that I should not be posting similar questions . I didn&#39;t want to spam stackoverflow with the same kind of code. I will post plenty of questions now separately no matter how minor they are. Thanks @Borodin . :)"}, {"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1460729038, "post_id": 36599488, "comment_id": 60891956, "body": "I didn&#39;t mean to morph my question as much as I did . Thanks for hte heads up :)"}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1460554925, "post_id": 36599712, "comment_id": 60797500, "body": "That section seems very similar to what I want to do. But I am getting errors. I will update the code in my question now."}], "tags": [], "owner": {"reputation": 3334, "user_id": 4473327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP14q.jpg?s=128&g=1", "display_name": "neuhaus", "link": "https://stackoverflow.com/users/4473327/neuhaus"}, "is_accepted": false, "score": 2, "last_activity_date": 1460554826, "last_edit_date": 1460554826, "creation_date": 1460553573, "answer_id": 36599712, "question_id": 36599488, "link": "https://stackoverflow.com/questions/36599488/does-anyone-have-a-full-solution-walkthrough-of-how-to-use-the-perl-template-mod/36599712#36599712", "title": "Does anyone have a full solution/walkthrough of how to use the perl Template module?", "body": "<p>Check out the tutorial at <a href=\"http://template-toolkit.org/docs/tutorial/Web.html\" rel=\"nofollow\">template-toolkit.org</a>\nespecially the section\n<a href=\"http://template-toolkit.org/docs/tutorial/Web.html#section_Dynamic_Content_Generation_Via_CGI_Script\" rel=\"nofollow\"><em>Dynamic Content Generation Via CGI Script</em></a></p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1460554361, "last_edit_date": 1460554361, "creation_date": 1460553976, "answer_id": 36599887, "question_id": 36599488, "link": "https://stackoverflow.com/questions/36599488/does-anyone-have-a-full-solution-walkthrough-of-how-to-use-the-perl-template-mod/36599887#36599887", "title": "Does anyone have a full solution/walkthrough of how to use the perl Template module?", "body": "<p>You may find <a href=\"https://metacpan.org/pod/Template::Manual::Intro\" rel=\"nofollow\"><code>Template::Manual::Intro</code></a> and <a href=\"https://metacpan.org/pod/Template::FAQ\" rel=\"nofollow\"><code>Template::FAQ</code></a> useful, and there are excellent tutorials in the package with <code>Template</code></p>\n\n<p><a href=\"https://metacpan.org/pod/Template::Tutorial\" rel=\"nofollow\"><code>Template::Tutorial</code></a> is a portal to</p>\n\n<ul>\n<li><a href=\"https://metacpan.org/pod/Template::Tutorial::Web\" rel=\"nofollow\"><code>Template::Tutorial::Web</code></a> <em>Generating Web Content Using the Template Toolkit</em></li>\n<li><a href=\"https://metacpan.org/pod/Template::Tutorial::Datafile\" rel=\"nofollow\"><code>Template::Tutorial::Datafile</code></a> <em>Creating Data Output Files Using the Template Toolkit</em></li>\n</ul>\n\n<p>The module has its own web site at <a href=\"http://template-toolkit.org/\" rel=\"nofollow\"><code>template-toolkit.org</code></a> but the documentation there is just a mirror of the POD from the installation package</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1460556788, "creation_date": 1460556788, "answer_id": 36601108, "question_id": 36599488, "link": "https://stackoverflow.com/questions/36599488/does-anyone-have-a-full-solution-walkthrough-of-how-to-use-the-perl-template-mod/36601108#36601108", "title": "Does anyone have a full solution/walkthrough of how to use the perl Template module?", "body": "<p>The definition of the <code>process()</code> method in the <a href=\"https://metacpan.org/pod/Template#process-template-vars-output-options\" rel=\"nofollow\">Template documentation</a> says this:</p>\n\n<blockquote>\n  <p>The first parameter indicates the input template as one of: a filename\n  relative to <code>INCLUDE_PATH</code>, if defined; a reference to a text string\n  containing the template text; or a file handle reference (e.g.\n  <code>IO::Handle</code> or sub-class) or <code>GLOB</code> (e.g. <code>\\*STDIN</code>), from which the\n  template can be read.</p>\n</blockquote>\n\n<p>If you pass it a string, it is assumed to be the <strong>name of a file containing the template</strong>. If you want to pass it a string containing the actual template, then you need to pass a reference to a string.</p>\n\n<p>So your line:</p>\n\n<pre><code>$template-&gt;process($text, $vars)\n</code></pre>\n\n<p>Needs to be:</p>\n\n<pre><code>$template-&gt;process(\\$text, $vars)\n</code></pre>\n\n<p>The error message was a good clue to this. It was telling you that it couldn't find a file called \"This is string number [% num %] .\".</p>\n"}], "owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1460640398, "creation_date": 1460553088, "last_edit_date": 1460640398, "question_id": 36599488, "link": "https://stackoverflow.com/questions/36599488/does-anyone-have-a-full-solution-walkthrough-of-how-to-use-the-perl-template-mod", "title": "Does anyone have a full solution/walkthrough of how to use the perl Template module?", "body": "<p>@neuhaus pointed out <a href=\"http://template-toolkit.org/docs/tutorial/Web.html#section_Dynamic_Content_Generation_Via_CGI_Script\" rel=\"nofollow\">new documentation</a> to me on the template-toolkit.org site</p>\n\n<p>Here is the code from CPAN that I have been trying to run/mess about with:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse lib ('./t/lib/');\n\nuse strict;\nuse warnings;\n\nuse Template;\n\n\n\nuse Test::More tests =&gt; 1;\n\n\n\nmy $text = \"This is string number [% num %] .\"; \n\nmy $vars = {\n     num =&gt; \"one\",\n };\n\nmy $template = Template-&gt;new();\n\n$template-&gt;process($text, $vars)\n    || die \"Template process failed: \", $template-&gt;error(), \"\\n\";\n\n\nok(defined $text, 'Returns something');\n</code></pre>\n\n<p>I am receiving the following error:</p>\n\n<pre><code>Template process failed: file error - This is string number [% num %] . : not found\n</code></pre>\n\n<p>I am just running it in a test file at the moment, in case you guy are wondering.  </p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1460556386, "creation_date": 1460556386, "answer_id": 36600938, "question_id": 36598611, "link": "https://stackoverflow.com/questions/36598611/getting-html-tag-using-perl-htmltreebuilderxpath-module/36600938#36600938", "title": "Getting HTML tag using Perl HTML::TreeBuilder::Xpath module", "body": "<p>The <code>findvalue()</code> method returns the text of the nodes that are found by your XPath query. So, yes, I'd expect it to strip out all of the XML tags.</p>\n\n<p>What you want is the <code>findnodes_as_string()</code> method.</p>\n\n<pre><code>my $body = $tree-&gt;findnodes_as_string(q{//div[@class=\"article-body\"]});\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5887573"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460556386, "creation_date": 1460551001, "last_edit_date": 1460551870, "question_id": 36598611, "link": "https://stackoverflow.com/questions/36598611/getting-html-tag-using-perl-htmltreebuilderxpath-module", "title": "Getting HTML tag using Perl HTML::TreeBuilder::Xpath module", "body": "<p>Here's a script which I have created so that I can fetch the contents of particular news article using HTML::TreeBuilder::XPath module to create a XML file. However, I can't get it to get the html tags when using findvalue method.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>#!/usr/bin/perl -w             \n\nuse HTML::LinkExtor;           \nuse LWP::Simple;\nuse HTML::TreeBuilder::XPath;  \nuse Term::ProgressBar;\n\n\nmy $url = \"http://www.totalpolitics.com/blog/463546/senior-medics-call-on-uk-to-stay-but-brexiteers-have-more-to-cheer.thtml\";\nmy $content = get $url;\n\nmy $tree = HTML::TreeBuilder::XPath-&gt;new_from_content($content); \n\nmy $title = $tree-&gt;findvalue(q{//div[@id=\"article\"]/h1});\nmy $body = $tree-&gt;findvalue(q{//div[@class=\"article-body\"]});\nmy $author = $tree-&gt;findnodes(q{//div[@class=\"article-body\"]/p/strong});\n$author = $author-&gt;[0]-&gt;getValue;\n\n$body =~ s/$author//;\n\nmy $xml .= '&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;';\n$xml .= '&lt;nodes&gt;';\n$xml .= '&lt;node&gt;';\n$xml .= '&lt;url&gt;';\n$xml .= $url;\n$xml .= '&lt;/url&gt;';\n$xml .= '&lt;title&gt;';\n$xml .= $title;\n$xml .= '&lt;/title&gt;';\n$xml .= '&lt;description&gt;';\n$xml .= \"&lt;![CDATA[$body]]&gt;\";\n$xml .= '&lt;/description&gt;';\n$xml .= '&lt;author&gt;';\n$xml .= $author;\n$xml .= '&lt;/author&gt;';\n$xml .= \"&lt;/node&gt;\\n\";\n$xml .= \"&lt;/nodes&gt;\";\n\nprint $xml;\n</code></pre>\n\n<p><strong>What is happening?</strong> </p>\n\n<p>No \"<code>&lt;p&gt;</code>\" tags in the description field.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;nodes&gt;\n   &lt;node&gt;\n      &lt;url&gt;http://www.totalpolitics.com/blog/463546/senior-medics-call-on-uk-to-stay-but-brexiteers-have-more-to-cheer.thtml&lt;/url&gt;\n      &lt;title&gt;Senior medics call on UK to stay - but Brexiteers have more to cheer&lt;/title&gt;\n      &lt;description&gt;&lt;![CDATA[The referendum battle steps up today with the Remain camp offering up a consortium of medics \u2013 but other interventions suggest the Brexiteers may have more to cheer in the weeks to come.A group of 188 clinicians, academics and public health leaders have written to the Times claiming the NHS would be in jeopardy if the UK were to leave the EU, losing access to \u201cfinances, staffing and exchanges\u201d. They added:\u201cAs health professionals and researchers we write to highlight the valuable benefits of continued EU membership to the NHS, medical innovation and UK public health. We have made enormous progress over decades in international health research, health services innovation and public health. Much of this is built around shared policies and capacity across the EU.\u201dBritain Stronger In\u2019s decision to use medics is reflective of recent polling by Ipsos Mori, which shows 89% trust doctors to tell the truth, making them the most trusted profession in the UK. Politicians languish at the bottom of the league table on 21%.However the intervention may pale into insignificance after Brexiteers won an important battle to reveal the true number of European migrants working in Britain. The number of migrants with active national insurance (NI) numbers will now be released just weeks before the referendum.According to existing data, about 800,000 EU migrants have moved to the UK in the past four years. However over the same period about 2m EU migrants have been issued with NI numbers.Campaigners have long been calling upon the government to release figures for the number of people with active NI numbers, which they say will provide a more accurate gauge of migration levels than existing official figures.Andrew Tyrie, chairman of the Treasury select committee, said: \u201cThis has been obtained as a result of a good deal of persistence \u2026 Late, but a good deal better than never. I recognise that HMRC may have encountered some difficulties. So I am glad that they have found a way of resolving them.\u201dThe decision comes as the Sun reports an extraordinary outburst from David Cameron as he returned from Washington this weekend.Asked whether the prime minister was so distracted by the referendum campaign that he had taken his eye off the ball, leading to a poorly-received budget and the crisis in the steel industry, he replied:\u201cI think you all spend too much time looking at each other\u2019s newspapers. The world hasn't stopped turning, the Government hasn't stopped operating. You all go around setting each others' hair on fire and getting very excited about this, but it's all a lot of processology.\u201dBut new polling out today suggests the Leave campaign has the more compelling set of arguments over Europe. The Fabian Society research shows how an initial four-point leave for Remain among likely voters turns into a two-point lead for Leave once people heard both sides of the story.Research found that the two most important issues to deciding how people vote in the referendum are immigration and controlling our laws \u2013 and on both issues the public are far more convinced that leaving the EU will help solve the problem.@Tom_SmithardTotal Politics has a free weekly Friday email bulletin. Follow this link to register.]]&gt;&lt;/description&gt;\n      &lt;author&gt;Photo: Lynne Cameron / PA Wire / Press Association Images&lt;/author&gt;\n   &lt;/node&gt;\n&lt;/nodes&gt;\n</code></pre>\n\n<p><strong>What I like to see in the XML file?</strong></p>\n\n<p>I want to have \"<code>&lt;p&gt;</code>\" in the description filed.</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1460542199, "post_id": 36595044, "comment_id": 60787159, "body": "Lines of an array or of a file?"}, {"owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "edited": false, "score": 0, "creation_date": 1460542309, "post_id": 36595044, "comment_id": 60787230, "body": "Show the regexp you tried"}, {"owner": {"reputation": 113, "user_id": 5714031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bd26a47a88d2cddc3fa825499c80527?s=128&d=identicon&r=PG&f=1", "display_name": "Denis.A", "link": "https://stackoverflow.com/users/5714031/denis-a"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1460556592, "post_id": 36595044, "comment_id": 60798971, "body": "@choroba : array, as said in the title...@red0ct : my question was about to know to specify a regex in grep, not how to forge a regex"}], "answers": [{"tags": [], "owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "is_accepted": false, "score": 0, "last_activity_date": 1460542577, "creation_date": 1460542577, "answer_id": 36595334, "question_id": 36595044, "link": "https://stackoverflow.com/questions/36595044/perl-remove-lines-of-an-array-under-conditions/36595334#36595334", "title": "Perl - Remove lines of an array under conditions", "body": "<p>A regex for IP with '1' in the 3rd position could be:</p>\n\n<pre><code>/\\d{1,3}\\.\\d{1,3}\\.1\\.\\d{1,3}/\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 5714031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bd26a47a88d2cddc3fa825499c80527?s=128&d=identicon&r=PG&f=1", "display_name": "Denis.A", "link": "https://stackoverflow.com/users/5714031/denis-a"}, "edited": false, "score": 0, "creation_date": 1460557105, "post_id": 36595340, "comment_id": 60799401, "body": "Thanks, it works perfectly.  I just wanted to avoid loops made by myself since I know perl has some subtleties (better programmed than me...)"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 5, "last_activity_date": 1460542586, "creation_date": 1460542586, "answer_id": 36595340, "question_id": 36595044, "link": "https://stackoverflow.com/questions/36595044/perl-remove-lines-of-an-array-under-conditions/36595340#36595340", "title": "Perl - Remove lines of an array under conditions", "body": "<p>You cannot avoid a \"time consuming loop\" - what do you think \"grep\" does, but loop - line by line - and perform a test?</p>\n\n<p>However, there's a perl <code>grep</code> function that you can use, that - in addition to regular expressions - also allows for code solutions. </p>\n\n<p>So something like this works:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy @stuff = (\n    [ '0', 'john',  '192.168.0.1' ],\n    [ '1', 'james', '192.168.1.1' ],\n    [ '2', 'pat',   '192.168.0.1' ]\n);\n\nprint Dumper \\@stuff;\n\nmy @new_array = grep { not $_-&gt;[2] =~ m/\\.1\\.\\d+$/ } @stuff;\n\nprint \"Entries which match:\\n\";\nprint Dumper \\@new_array;\n</code></pre>\n\n<p>Be under no illusions though - grep is 'looping' through your array. It's just hiding the fact that that's what it's doing. (<code>egrep</code> would do the same though, so you don't lose anything). </p>\n"}], "owner": {"reputation": 113, "user_id": 5714031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bd26a47a88d2cddc3fa825499c80527?s=128&d=identicon&r=PG&f=1", "display_name": "Denis.A", "link": "https://stackoverflow.com/users/5714031/denis-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "closed_date": 1461737248, "answer_count": 2, "score": -3, "last_activity_date": 1460542586, "creation_date": 1460541855, "question_id": 36595044, "link": "https://stackoverflow.com/questions/36595044/perl-remove-lines-of-an-array-under-conditions", "closed_reason": "Needs details or clarity", "title": "Perl - Remove lines of an array under conditions", "body": "<p>How can I remove lines of an array when a column satisfies a regex ?</p>\n\n<p>Example :</p>\n\n<pre><code>'0','john','192.168.0.1'\n'1','james','192.168.1.1'\n'2','pat','192.168.0.1'\n</code></pre>\n\n<p>I want to remove all the lines which contains xxx.xxx.1.x in the third column (or saving lines which do not contain...)</p>\n\n<p>Maybe egrep will be the best solution (since I don't want to use a time-consuming loop), but I don't know how to specify a column and a regex.</p>\n"}, {"tags": ["node.js", "bash", "perl", "scripting", "automation"], "answers": [{"tags": [], "owner": {"reputation": 910, "user_id": 1446919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTmo2.png?s=128&g=1", "display_name": "Kable", "link": "https://stackoverflow.com/users/1446919/kable"}, "is_accepted": false, "score": 0, "last_activity_date": 1460537209, "creation_date": 1460537209, "answer_id": 36593108, "question_id": 36592758, "link": "https://stackoverflow.com/questions/36592758/download-image-with-specific-div-via-script/36593108#36593108", "title": "Download Image with specific Div via Script", "body": "<p>I would consider using <a href=\"http://phantomjs.org/\" rel=\"nofollow\">Phantom.js</a> which allows you to load and query webpages in pure javascript (no browser required). </p>\n\n<p>Have a look at <a href=\"http://phantomjs.org/page-automation.html\" rel=\"nofollow\">Phantom's DOM Manipulation</a> for how to access the document, and then you can use vanilla javascript dom queries (such as <code>getElementsByClassName</code> and <code>getElementsByTagName</code>) to access the images you need. So your script might look like this:</p>\n\n<pre><code>var page = require('webpage').create();\nconsole.log('The default user agent is ' + page.settings.userAgent);\npage.settings.userAgent = 'SpecialAgent';\npage.open('http://www.httpuseragent.org', function (status) {\n    if (status !== 'success') {\n        console.log('Unable to access network');\n    } else {\n        page.evaluate(function () {\n            var productHeros = document.getElementsByClassName('product-hero');\n            for (var i = 0; i &lt; productHeros.length; i++) {\n                var productHeroDiv = productHeros[i];\n                var image = productHeroDiv.getElementsByTagName(\"img\")[0];\n                var source = image.src;\n            }\n        });\n        console.log(ua);\n    }\n    phantom.exit();\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2273, "user_id": 6079822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd85eaf50e8480af8e68c574634ed18b?s=128&d=identicon&r=PG&f=1", "display_name": "jil", "link": "https://stackoverflow.com/users/6079822/jil"}, "is_accepted": false, "score": 0, "last_activity_date": 1460748191, "creation_date": 1460748191, "answer_id": 36655324, "question_id": 36592758, "link": "https://stackoverflow.com/questions/36592758/download-image-with-specific-div-via-script/36655324#36655324", "title": "Download Image with specific Div via Script", "body": "<p>Given list of URLs as argument list:</p>\n\n<pre><code>#!/bin/bash\nfor url in \"$@\"; do\n    img_src=$( curl -s \"$url\" | \\\n        xmllint 2&gt;/dev/null --recover --html --xpath \\\n        'string(//div[contains(@class, 'product-hero')]/img/@src)' - )\n    curl -O \"$(dirname \"$url\")/$img_src\"\ndone\n</code></pre>\n"}], "owner": {"reputation": 501, "user_id": 140150, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/mMyNC.jpg?s=128&g=1", "display_name": "harrynorthover", "link": "https://stackoverflow.com/users/140150/harrynorthover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1460748191, "creation_date": 1460536252, "question_id": 36592758, "link": "https://stackoverflow.com/questions/36592758/download-image-with-specific-div-via-script", "title": "Download Image with specific Div via Script", "body": "<p>I have a series of URLs that I need to download a single image from for each.</p>\n\n<p>In the markup for each of these pages there is the following</p>\n\n<pre><code>&lt;div class=\"subcolumns product-hero\"&gt;\n        &lt;div class=\"c60l\"&gt;\n                &lt;img src=\"Cubes.png\" width=\"300\"/&gt; \n        &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I need to ideally download the image within the div with a class of product-hero, or save the image src tag.</p>\n\n<p>Is this possible through some kind of automated script? Node/Perl etc? </p>\n"}, {"tags": ["android", "perl", "automation"], "comments": [{"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1460537494, "post_id": 36592323, "comment_id": 60783575, "body": "What part of your code is not working? you need to show all your code"}, {"owner": {"reputation": 204, "user_id": 1789095, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/qbBuS.jpg?s=128&g=1", "display_name": "arka.b", "link": "https://stackoverflow.com/users/1789095/arka-b"}, "reply_to_user": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1460540159, "post_id": 36592323, "comment_id": 60785560, "body": "This is the only code I have. rest part is my requirement."}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1460541858, "post_id": 36592323, "comment_id": 60786906, "body": "ok but people here will always be willing to trouble shoot and help with issues in your code, but stack is not a sight where you write a requirement and people write code for you"}, {"owner": {"reputation": 204, "user_id": 1789095, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/qbBuS.jpg?s=128&g=1", "display_name": "arka.b", "link": "https://stackoverflow.com/users/1789095/arka-b"}, "reply_to_user": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1460542025, "post_id": 36592323, "comment_id": 60787034, "body": "At least if one can tell me how to get the unique id of the android device using perl. That would solve my problem, I am editing the question."}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1460551361, "post_id": 36592323, "comment_id": 60794343, "body": "try here <a href=\"http://stackoverflow.com/questions/8843393/perl-script-to-store-device-serial-number-and-install-apk-using-adb\" title=\"perl script to store device serial number and install apk using adb\">stackoverflow.com/questions/8843393/&hellip;</a>"}, {"owner": {"reputation": 204, "user_id": 1789095, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/qbBuS.jpg?s=128&g=1", "display_name": "arka.b", "link": "https://stackoverflow.com/users/1789095/arka-b"}, "reply_to_user": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1460614898, "post_id": 36592323, "comment_id": 60826888, "body": "yeah already read that when I was building up the question."}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 3751258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0e6f9568b970befe5ab976597827df4?s=128&d=identicon&r=PG&f=1", "display_name": "Er Parthu", "link": "https://stackoverflow.com/users/3751258/er-parthu"}, "is_accepted": false, "score": 0, "last_activity_date": 1460548288, "creation_date": 1460548288, "answer_id": 36597510, "question_id": 36592323, "link": "https://stackoverflow.com/questions/36592323/retrieve-device-id-from-android-using-perl/36597510#36597510", "title": "Retrieve Device ID from android using perl", "body": "<p>You can store the device ids using following script:</p>\n\n<pre><code>my $output = `adb devices`;\nmy @devices = split(\"\\n\", $output);\nmy @deviceids;\nforeach(@devices){\n    chomp($_);\n    push(@deviceids, $1) if($_ =~ /(.+)\\s+device$/);\n}\n</code></pre>\n"}], "owner": {"reputation": 204, "user_id": 1789095, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/qbBuS.jpg?s=128&g=1", "display_name": "arka.b", "link": "https://stackoverflow.com/users/1789095/arka-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460548288, "creation_date": 1460534974, "last_edit_date": 1460542411, "question_id": 36592323, "link": "https://stackoverflow.com/questions/36592323/retrieve-device-id-from-android-using-perl", "title": "Retrieve Device ID from android using perl", "body": "<p>I have 3-4 android devices connected to my laptop (with working ADB on windows). Now I want to trigger Youtube app on all these devices simultaneously and run that for a certain duration at a given time. The script will read the devices connected and trigger the app on it's own. </p>\n\n<p>Requirement:\nIs there a way I can take out the <strong>Unique Device ID</strong> and store it somewhere and use it for my rest of the programming? </p>\n\n<p><strong>For example:</strong> \nC:\\Users\\Arka.B>adb devices\nList of devices attached</p>\n\n<p>94e38259        device</p>\n\n<p>94e38260        device 2</p>\n\n<p>94e38261        device 3</p>\n\n<p>94e38262        device 4</p>\n\n<p><strong>Questions:</strong> </p>\n\n<ul>\n<li>How do I take out this unique device id (94e38259, 94e38260, etc in this case) from each of these devices and trigger some other actions like launching an app or installing an APK? </li>\n</ul>\n"}, {"tags": ["linux", "bash", "perl", "logrotate"], "comments": [{"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 2, "creation_date": 1460534140, "post_id": 36591244, "comment_id": 60781329, "body": "I&#39;ve pretty much worked out the problem, it&#39;s that pointer in the file stays at the end when the file is truncated, so i just need to put in a check. I&#39;ll add an answer soon, or if someone else does then I&#39;ll accept it."}], "answers": [{"comments": [{"owner": {"reputation": 20037, "user_id": 340355, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f51f5727d7f23b8b111a8f007d683f31?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/340355/mike"}, "edited": false, "score": 3, "creation_date": 1460539672, "post_id": 36592772, "comment_id": 60785162, "body": "You might also want to look at <a href=\"https://metacpan.org/source/MGRABNAR/File-Tail-1.3/Tail.pm#L426-428\" rel=\"nofollow noreferrer\">File::Tail</a> which uses <a href=\"http://perldoc.perl.org/functions/sysseek.html\" rel=\"nofollow noreferrer\">sysseek</a> with <code>SEEK_END</code> to check the end-of-file position."}], "tags": [], "owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "is_accepted": true, "score": 2, "last_activity_date": 1460536283, "creation_date": 1460536283, "answer_id": 36592772, "question_id": 36591244, "link": "https://stackoverflow.com/questions/36591244/how-to-tail-file-in-perl-when-copytruncate-is-used/36592772#36592772", "title": "How to tail file in perl when copytruncate is used", "body": "<p>So the reason that this was failing is pretty obvious when you look at <code>copytruncate</code>, it copies the original file and then truncates the current one.<br>\nWhilst this ensure that the inode is kept, it created another problem.</p>\n\n<p>As the current way i tail the file is by simply staying at the end and removing the eof flag this means that when the file is truncated, the pointer stays at the position of the last line before truncation, which in turn means that no more lines would be read until it reached that pointer again.</p>\n\n<p>The obvious solution then is to simply check the size of the file and reset the pointer if it is ever pointing past the end of the file.</p>\n\n<p>I found it easier to just check that file size never got smaller though, using the two lines below.</p>\n\n<pre><code>my $fileSize=(stat($logfile))[7];\n#Added after the inode is assigned\n</code></pre>\n\n<p>and changing</p>\n\n<pre><code>if($Inode != (stat($myFile))[1]){\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if($Inode != (stat($myFile))[1] || (stat($myFile))[7] &lt; $fileSize){\n</code></pre>\n"}], "owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "accepted_answer_id": 36592772, "answer_count": 1, "score": 1, "last_activity_date": 1460536283, "creation_date": 1460531981, "last_edit_date": 1592644375, "question_id": 36591244, "link": "https://stackoverflow.com/questions/36591244/how-to-tail-file-in-perl-when-copytruncate-is-used", "title": "How to tail file in perl when copytruncate is used", "body": "<h3>Problem</h3>\n<p>I have created a simple perl script to read log files and process the data asynchronously.<br />\nThe reading sub also checks for changes in inode number so a new filehandle is created when the logs rotate.</p>\n<p>The problem i am facing is that when <code>copytruncate</code> is used in logrotation then then inode does not change when the file is rotated.<br />\nThis shouldn't be an issue as the script should just continue reading the file but for some reason that i cannot immediately see, as soon as the logs rotate no new lines are ever read.</p>\n<hr />\n<h3>Question</h3>\n<p>How can i modify the below script (or completely scrap and start again) to continously tail a file which is logrotated using <code>copytruncate</code> using perl ?</p>\n<hr />\n<h3>Code</h3>\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\n\nuse threads;\nuse Thread::Queue;\nuse threads::shared;\n\nmy $logq = Thread::Queue-&gt;new();\nmy %Servers :shared;\nmy %servername :shared;\n\n#########\n#This sub just reads the data off the queue and processes it, i have\n#reduced it to a simple print statement for simplicity.\n#The sleep is to prevent it from eating cpu.\n########\n\nsub process_data\n{\n        while(sleep(5)){\n                if ($logq-&gt;pending())\n                {\n                        while($logq-&gt;pending() &gt; 0){\n                                my $data = $logq-&gt;dequeue();\n                                print &quot;Data:$data\\n&quot;;\n                        }\n                }\n        }\n}\n\nsub read_file\n{\n        my $myFile=$_[0];\n        #Get the argument and assign to var.\n\n        open(my $logfile,'&lt;',$myFile) || die &quot;error&quot;;\n        #open file\n\n        my $Inode=(stat($logfile))[1];\n        #Get the current inode\n\n        seek $logfile, 0, 2;\n        #Go to the end of the file\n\n        for (;;) {\n                while (&lt;$logfile&gt;) {\n                        chomp( $_ );\n                        $logq-&gt;enqueue( $_ );\n                        #Add lines to queue for processing\n\n                }\n                sleep 5;\n                if($Inode != (stat($myFile))[1]){\n                        close($logfile);\n                        while (! -e $myFile){\n                                sleep 2;\n                        }\n                        open($logfile,'&lt;',$myFile) || die &quot;error&quot;;\n                        $Inode=(stat($logfile))[1];\n                }\n                #Above checks if the inode has changed and the file exists still\n\n                seek $logfile, 0, 1;\n                #Remove eof\n\n        }\n\n}\n\n\nmy $thr1 = threads-&gt;create(\\&amp;read_file,&quot;test&quot;);\nmy $thr4 = threads-&gt;create(\\&amp;process_data);\n$thr1-&gt;join();\n$thr4-&gt;join();\n#Creating the threads, can add more log files for processing or multiple processing sections.\n</code></pre>\n<hr />\n<h3>Possibly relevant info</h3>\n<p>Log config for logrotate contains</p>\n<pre><code>compress\ncompresscmd /usr/bin/bzip2\nuncompresscmd /usr/bin/bunzip2\ndaily\nrotate 5\nnotifempty\nmissingok\ncopytruncate\n</code></pre>\n<p>for this file.</p>\n<p>Specs</p>\n<pre><code>GNU bash, version 3.2.57(1)-release (s390x-ibm-linux-gnu)\nperl, v5.10.0\n(if logrotate has version and someone knows how to check then i will also add that)\n</code></pre>\n<hr />\n<p>Any more info needed just ask.</p>\n"}, {"tags": ["perl", "vim"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 3079434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38edd36e0c83b249dd967d2eacf157e5?s=128&d=identicon&r=PG&f=1", "display_name": "adam0215", "link": "https://stackoverflow.com/users/3079434/adam0215"}, "is_accepted": false, "score": 0, "last_activity_date": 1460616759, "creation_date": 1460616759, "answer_id": 36615762, "question_id": 36591103, "link": "https://stackoverflow.com/questions/36591103/use-ack-standalone-pl-in-vim-windows/36615762#36615762", "title": "use ack-standalone.pl in VIM (WINDOWS)", "body": "<p>I solved it by using a <code>ack.bat</code>file,and put it in <code>system32</code> folder which VIM can find it.\nThe content of <code>ack.bat</code> is</p>\n\n<pre><code>@\"C:\\Strawberry\\perl\\bin\\perl.exe\" C:\\Strawberry\\perl\\bin\\ack %*\n</code></pre>\n\n<p>I don't think it is a good solution, so if anyone have a better one ,please tell me.</p>\n"}], "owner": {"reputation": 11, "user_id": 3079434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38edd36e0c83b249dd967d2eacf157e5?s=128&d=identicon&r=PG&f=1", "display_name": "adam0215", "link": "https://stackoverflow.com/users/3079434/adam0215"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460616759, "creation_date": 1460531584, "last_edit_date": 1460606449, "question_id": 36591103, "link": "https://stackoverflow.com/questions/36591103/use-ack-standalone-pl-in-vim-windows", "title": "use ack-standalone.pl in VIM (WINDOWS)", "body": "<p>OS: WINDOWS</p>\n\n<p>perl: strawberry perl </p>\n\n<p>vim: gvim74 (can run perl and ag by useing <code>:!perl</code> <code>\uff1a\uff01ag</code>)</p>\n\n<p>I use <code>strsf.vim</code> in VIM.\n<code>strsf.vim</code> need ag or ack in background.\nwhen I put <code>ag.exe</code> in system32 folder,<code>strsf.vim</code> works well.</p>\n\n<p>the question is:\nif I want to use ack instead of ag,\nhow can I make gvim know where the ack-standalone.pl is?</p>\n\n<p>I have tried to put it in system32 , vim folder perl folder,neither worked</p>\n\n<p>I also add perpath vim path to OS path ,nothing changed</p>\n\n<p>I konw the <code>ack-standalone.pl</code> should run in perl , \n  and I tried to use <code>\uff1a\uff01perl ack-standalone.pl</code> in vim\uff0cbut some error occured as below</p>\n\n<pre><code>    C:\\windows\\system32\\cmd.exe /c (perl ack.pl)\n    Can't open perl script \"ack-standalone.pl\": No such file or directory\n    shell returned 2\n    Hit any key to close this window...\n</code></pre>\n\n<p>when I use a bat file :   </p>\n\n<pre><code>@\"C:\\Strawberry\\perl\\bin\\perl.exe\" C:\\Strawberry\\perl\\bin\\ack-standalone.pl %*\n</code></pre>\n\n<p>it can works</p>\n\n<p>what should I do if I want to use the <code>ack-standalone.pl</code> file in gvim ? </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1460527841, "post_id": 36588210, "comment_id": 60777686, "body": "<a href=\"http://perlmaven.com/perl-arrays\" rel=\"nofollow noreferrer\">perlmaven.com/perl-arrays</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1460521459, "post_id": 36588254, "comment_id": 60775200, "body": "<code>word</code> is an array not a hash."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1460522555, "post_id": 36588254, "comment_id": 60775540, "body": "I don&#39;t think you&#39;ve addressed the OP&#39;s confusion here. No one mentioned hashes"}, {"owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "edited": false, "score": 0, "creation_date": 1460522913, "post_id": 36588254, "comment_id": 60775668, "body": "The error mentioned hashes. I think it relevant that the OP realises that [] and {} are fundamentally different things in Perl."}], "tags": [], "owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "is_accepted": false, "score": 0, "last_activity_date": 1460534750, "last_edit_date": 1460534750, "creation_date": 1460519489, "answer_id": 36588254, "question_id": 36588210, "link": "https://stackoverflow.com/questions/36588210/perl-error-argument-isnt-numeric-in-array-or-hash-lookup/36588254#36588254", "title": "Perl Error: Argument isn&#39;t numeric in array or hash lookup", "body": "<p>This is array lookup</p>\n\n<pre><code>$words[$index];\n</code></pre>\n\n<p>If it was a hash it would be </p>\n\n<pre><code>$words{$index};\n</code></pre>\n\n<p>Arrays expect integer indexes but you're using strings that look nothing like integers. </p>\n\n<p>If you are iterating over arrays in Perl you don't need the index..</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @words = (\"Ordinary\", \"order\", \"afford\", \"cordford\", \"'ORD airport'\");\nforeach my $word (@words) {\n  if($word =~ m/ord/) {      \n    print \"$word match\\n\";\n  } else {\n    print \"$word no match\\n\";\n  }\n}\n</code></pre>\n\n<p>Note. I've used <code>foreach</code> because you see it in more language you could also use <code>for</code></p>\n\n<p>You can also try something a little bit alternative, note this won't end but it's worth studying ie </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy @words = (\"Ordinary\", \"order\", \"afford\", \"cordford\", \"'ORD airport'\");\nmy $iterator = sub {\n  my $item = shift(@words);\n  push(@words, $item);\n  return $item;\n};\n\nwhile(my $item = $iterator-&gt;()) {\n  print(\"$item\\n\");\n}\n</code></pre>\n\n<p>I do love Perl.</p>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 1, "last_activity_date": 1460522018, "last_edit_date": 1460522018, "creation_date": 1460520870, "answer_id": 36588450, "question_id": 36588210, "link": "https://stackoverflow.com/questions/36588210/perl-error-argument-isnt-numeric-in-array-or-hash-lookup/36588450#36588450", "title": "Perl Error: Argument isn&#39;t numeric in array or hash lookup", "body": "<p>The reason is your <code>$index</code> will produce the elements of an array not the index values. </p>\n\n<p>It should be <code>foreach my $index (0..$#words)</code> now <code>$index</code> will produce the index of an array in every iteration.</p>\n\n<pre><code>use strict; \nuse warnings;\n\nmy @words = (\"Ordinary\", \"order\", \"afford\", \"cordford\", \"'ORD airport'\");\n\nforeach my $index (0..$#words) {\n\n    if ($words[$index] =~ m/ord/) {\n\n       print \"match\\n\";\n    } \n\n    else {print \"no match\\n\";}\n }\n</code></pre>\n\n<p>Or else. simply check the condition with <code>$index</code>. </p>\n\n<pre><code>use strict; \n\nuse warnings;\n\nmy @words = (\"Ordinary\", \"order\", \"afford\", \"cordford\", \"'ORD airport'\");\n\nforeach my $index (@words) {\n\n    if ($index =~ m/ord/) {\n\n    print \"match\\n\";\n\n    }\n\n    else {print \"no match\\n\";}\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1460524727, "post_id": 36588622, "comment_id": 60776271, "body": "in recent perls, you can do <code>for my $index (keys @words)</code> instead of using <code>0..$#words</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1460525562, "post_id": 36588622, "comment_id": 60776639, "body": "@ysth: I&#39;m not sure how that could help. It&#39;s a character or two longer, unfamiliar to most Perl programmers, and available only on Perls since v5.12 so there are portability issues"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1460541481, "post_id": 36588622, "comment_id": 60786612, "body": "I hadn&#39;t realised it was possible. Now I do,  which is intriguing, but I don&#39;t think I&#39;ll use it :) I suppose it might be useful if it handles &#39;sparse&#39; arrays differently?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1460521854, "creation_date": 1460521854, "answer_id": 36588622, "question_id": 36588210, "link": "https://stackoverflow.com/questions/36588210/perl-error-argument-isnt-numeric-in-array-or-hash-lookup/36588622#36588622", "title": "Perl Error: Argument isn&#39;t numeric in array or hash lookup", "body": "<p>This is the code that you show (improved a little)</p>\n\n<pre><code>my @words = ( 'Ordinary', 'order', 'afford', 'cordford', q{'ORD airport'} );\n\n    for my $index ( @words ) {\n\n        if ( $words[$index] =~ /ord/ ) {\n            print \"match\\n\";\n        }\n        else {\n            print \"no match\\n\";\n        }\n    }\n}\n</code></pre>\n\n<p>This <code>for</code> loop will set <code>$index</code> to each <em>value</em> in the <code>@words</code> array. So, for instance, the first time the loop is executed <code>$index</code> will be set to <code>Ordinary</code>; the second time it will be set to <code>order</code> etc.</p>\n\n<p>Naming it <code>$index</code> shows clearly that you expected it to contain all the indices for <code>@words</code>. You <em>can</em> do that, like this</p>\n\n<pre><code>for my $index ( 0 .. $#words ) { ... }\n</code></pre>\n\n<p>and your program will work fine if you make just that change. The output is</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>no match\nmatch\nmatch\nmatch\nno match\n</code></pre>\n\n<p>But you had the right idea from the start. Most often an array is just a list of values and the indices have no relevance. That applies to your case, and you can write</p>\n\n<pre><code>for my $word ( @words ) {\n\n    if ( $word =~ m/ord/ ) {\n        print \"match\\n\";\n    }\n    else {\n        print \"no match\\n\";\n    }\n}\n</code></pre>\n\n<p>Or using Perl's <em>default variable</em> <code>$_</code> it can be written</p>\n\n<pre><code>for ( @words ) {\n\n    if ( m/ord/ ) {\n        print \"match\\n\";\n    }\n    else {\n        print \"no match\\n\";\n    }\n}\n</code></pre>\n\n<p>or even just</p>\n\n<pre><code>print /ord/ ? \"match\\n\" : \"no match\\n\" for @words;\n</code></pre>\n\n<p>Every example above is exactly equivalent and so produces identical output</p>\n"}], "owner": {"reputation": 1, "user_id": 4679221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a302e44fb6094ea93237495fa5dd1c5e?s=128&d=identicon&r=PG&f=1", "display_name": "Rafi", "link": "https://stackoverflow.com/users/4679221/rafi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 898, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1460534750, "creation_date": 1460519239, "question_id": 36588210, "link": "https://stackoverflow.com/questions/36588210/perl-error-argument-isnt-numeric-in-array-or-hash-lookup", "title": "Perl Error: Argument isn&#39;t numeric in array or hash lookup", "body": "<p>I was writing a simple program to match words to a regex pattern. But I keep receiving the error above. This is my code:</p>\n\n<pre><code>my @words = (\"Ordinary\", \"order\", \"afford\", \"cordford\", \"'ORD airport'\");\nforeach my $index (@words) {\n    if ($words[$index] =~ m/ord/) {\n        print \"match\\n\";\n    } else {print \"no match\\n\";}\n}\n</code></pre>\n\n<p>Error I received:</p>\n\n<pre><code>Argument \"Ordinary\" isn't numeric in array or hash lookup at test.pl line  6.\nArgument \"order\" isn't numeric in array or hash lookup at test.pl line 6.\nArgument \"afford\" isn't numeric in array or hash lookup at test.pl line 6.\nArgument \"cordford\" isn't numeric in array or hash lookup at test.pl line 6.\nArgument \"'ORD airport'\" isn't numeric in array or hash lookup at test.pl line 6.\nno matchno matchno matchno matchno match\n</code></pre>\n\n<p>Can anyone explain to me what's causing the error and why?</p>\n"}, {"tags": ["perl", "perl-hash"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5952891"}, "edited": false, "score": 0, "creation_date": 1460512977, "post_id": 36587184, "comment_id": 60773098, "body": "If it works, don&#39;t fix it! I would leave the functional code alone and append a function to translate scalar to hash. I know that is not an answer, but it keeps your working code intact."}, {"owner": {"reputation": 73, "user_id": 6190552, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c49c39feb0218eb3a5e6372e16a71029?s=128&d=identicon&r=PG&f=1", "display_name": "nims", "link": "https://stackoverflow.com/users/6190552/nims"}, "edited": false, "score": 1, "creation_date": 1460513165, "post_id": 36587184, "comment_id": 60773135, "body": "@Sparky256  if i want to return multiple values , i don&#39;t think its a good idea to use a scalar. I guess hash ref would be a good option."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1460513259, "post_id": 36587184, "comment_id": 60773163, "body": "Is this your real code? What is <code>$self</code>? And especially, what is <code>$out</code>? Your loop <code>foreach my $line (  $out )</code> will execute exactly once, so there is no need for the loop. Is that what you expect?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1460541243, "post_id": 36587184, "comment_id": 60786432, "body": "Exact duplicate of <a href=\"http://stackoverflow.com/q/36138778/5830574\">stackoverflow.com/q/36138778/5830574</a>"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 6190552, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c49c39feb0218eb3a5e6372e16a71029?s=128&d=identicon&r=PG&f=1", "display_name": "nims", "link": "https://stackoverflow.com/users/6190552/nims"}, "edited": false, "score": 0, "creation_date": 1460520794, "post_id": 36587331, "comment_id": 60775031, "body": "i have used some internal libraries created at my work place. {sshObj}-&gt;exec(), exec() is a function,that is part of our internal framework of our organization. Your answer is perfect and works as expected."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1460514288, "last_edit_date": 1460514288, "creation_date": 1460513594, "answer_id": 36587331, "question_id": 36587184, "link": "https://stackoverflow.com/questions/36587184/return-hash-ref-from-a-function-in-perl/36587331#36587331", "title": "return hash ref from a function in perl", "body": "<p>Apart from my misgivings that I described in a comment above, I would use the code below</p>\n\n<p>The change is essentially to replace <code>$status</code> and <code>$ip</code> with elements of hash <code>%ret</code>, and then return a reference to that hash</p>\n\n<p>But I must say again that the <code>for</code> loop will be executed only once, and <strong><em>this code is wrong as it stands</em></strong>. I can correct it only if you say what modules you are dealing with</p>\n\n<pre><code>sub status {\n\n    my ( $self, $int ) = @_;\n\n    my $out = $self-&gt;{sshObj}-&gt;exec(\"cisco ios command $interface\");\n\n    my %ret;\n\n    for ( $out ) {\n        $ret{status} = $1 if /Session\\s+status:\\s+(.*\\S)/;\n        $ret{ip}     = $1 if /(\\d+.\\d+.\\d+.\\d+)/;\n    }\n\n    \\%ret;\n}\n</code></pre>\n\n<p>Your function call would be</p>\n\n<pre><code>my $ret = $self-&gt;{$tunnel_obj}-&gt;status($self-&gt;{outer_t_1});\n\nINFO(\"Status: $ret-&gt;{status}\");\nINFO(\"IP:     $ret-&gt;{ip})\");\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 6190552, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c49c39feb0218eb3a5e6372e16a71029?s=128&d=identicon&r=PG&f=1", "display_name": "nims", "link": "https://stackoverflow.com/users/6190552/nims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 0, "accepted_answer_id": 36587331, "answer_count": 1, "score": -1, "last_activity_date": 1460514288, "creation_date": 1460512646, "question_id": 36587184, "link": "https://stackoverflow.com/questions/36587184/return-hash-ref-from-a-function-in-perl", "title": "return hash ref from a function in perl", "body": "<p>I have written a function that executes a command, parses the output based on the regex, and  returns two values, status and ip. Function call  returns both the values as expected. Instead of returning a scalar, I want to return hash ref. Can some one tell me how to do return a hash ref for the below function?</p>\n\n<pre><code>sub status {\n    my ($self,$int)  = @_;\n    my $status  = 0;\n    my $ip = 0;\n\n    my $cmd     = 'cisco ios command ' . $interface;\n\n    my $out = $self-&gt;{sshObj}-&gt;exec($cmd);\n\n    foreach my $line (  $out ) {\n      if ( $line =~ m/Session\\s+status:\\s+(.*)/ ) {\n            $status = $1;\n      }\n      if ( $line =~ /(\\d+.\\d+.\\d+.\\d+)/ ) {\n            $ip = $1;\n      }\n    }\n\n    return ($status,$ip);\n}\n</code></pre>\n\n<p>function call :</p>\n\n<pre><code>my ($status, $ip) =\n           $self-&gt;{'$tunnel_obj'}-&gt;status($self-&gt;{'outer_t_1'});\n\n    INFO (\"status : $status\");\n    INFO (\"ip : $ip\");\n\n\nOutput :\nstatus : UP\nip : 172.10.78.33\n</code></pre>\n"}, {"tags": ["bash", "perl", "shell", "command-line", "sed"], "comments": [{"owner": {"reputation": 7607, "user_id": 2820422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOVO5.jpg?s=128&g=1", "display_name": "Cole Tierney", "link": "https://stackoverflow.com/users/2820422/cole-tierney"}, "edited": false, "score": 0, "creation_date": 1460508482, "post_id": 36586558, "comment_id": 60771892, "body": "Is it valid xml or are you trying to make it valid?"}, {"owner": {"reputation": 263, "user_id": 5949518, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ZDg29.png?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/5949518/edward"}, "edited": false, "score": 0, "creation_date": 1460508798, "post_id": 36586558, "comment_id": 60771969, "body": "Well the invalid part is the fact that there are unescaped characters like <code>&quot;</code> in it, that&#39;s why I&#39;m trying to replace them."}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1460509064, "post_id": 36586558, "comment_id": 60772037, "body": "That seems like a really weird thing to do.  Normally if you want to include the character <code>&lt;</code> as part of text in XML you would <i>either</i> use the escaped form: <code>&amp;lt;</code> or put it inside a CDATA section.  Your question implies you want to do <i>both</i> - which will result in double-escaped data. Can you explain why you want to do this?"}, {"owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "edited": false, "score": 0, "creation_date": 1460514166, "post_id": 36586558, "comment_id": 60773376, "body": "Can we assume that &quot;start&quot; and &quot;end&quot; tokens (as you&#39;ve specified above) are not nested?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1460523171, "post_id": 36586558, "comment_id": 60775749, "body": "I hope you&#39;ve heard that  regular expressions are not the way top go to process XML data. The best excuse I have heard is that the data isn&#39;t <i>valid</i> XML so a proper parser won&#39;t accept it, but <i>any</i> character is valid within a <i>CDATA</i> section so you shouldn&#39;t have a problem. What&#39;s more, if you make those changes then the replacement strings will be taken literally, and any software that works properly will not recognise any character entities. What is your purpose? Are you trying to get your data through a non-standard-compliant software layer? A sample of your data would help enormously."}], "answers": [{"tags": [], "owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "is_accepted": true, "score": 0, "last_activity_date": 1460540205, "last_edit_date": 1460540205, "creation_date": 1460523992, "answer_id": 36589052, "question_id": 36586558, "link": "https://stackoverflow.com/questions/36586558/finding-and-replacing-specific-text-between-two-strings/36589052#36589052", "title": "Finding and replacing specific text between two strings?", "body": "<p>Once the \"start token\" is found, the solution needs to collect (match) everything except the \"end token\" - but scanning for the negation of a string is surprisingly difficult. (see <a href=\"http://www.perlmonks.org/?node_id=606495\" rel=\"nofollow\">here</a> and <a href=\"http://www.perlmonks.org/?node_id=588315\" rel=\"nofollow\">here</a> for some discussion).</p>\n\n<p>Below is a solution subject to a couple of reasonable (I believe) constraints</p>\n\n<ol>\n<li>The tokens can't be nested i.e. <code>[start] stuff [start] stuff [end] stuff [end]</code>; and</li>\n<li><p>Neither the start or end tokens can be split across lines ie</p>\n\n<p><code>hello world &lt;content:enco</code></p>\n\n<p><code>ded&gt;&lt;![CDATA[ [stuff] ... etc</code></p></li>\n</ol>\n\n<p>My solution is long but liberally commented and being more straight forward rather than clever is (arguably) easier to maintain;</p>\n\n<pre><code>use v5.12;\n\nmy $start_string =  '&lt;content:encoded&gt;&lt;![CDATA[' ;\nmy $end_string   =  ']]&gt;&lt;/content:encoded&gt;' ;\nmy $start_token  =  quotemeta $start_string ;\nmy $end_token    =  quotemeta $end_string ;\n\nsub do_subs {\n    my $text = shift ;\n    $text =~ s/'/\\&amp;apos;/g ;\n    $text =~ s/\"/\\&amp;quot;/g ;\n    $text =~ s/\\&lt;/\\&amp;lt;/g ;\n    $text =~ s/\\&gt;/\\&amp;gt;/g ;\n    return $text ;\n}\n\nmy $subs_mode = 0;                # \"substitution mode\" off/on\nwhile (&lt;&gt;) {\n    my $line_remnants = $_ ;      # what's left - intially, the whole line\n    my $replacement = \"\" ;        # replacement for whole line\n\n    # while there's something left of the line to process\n    while ( ! $line_remnants eq \"\" )  {\n        if ($subs_mode) {\n            # Currently substituting.  Scan for end_token\n            if ($line_remnants =~ /^ (.*?) $end_token (.* \\n) /x)  {\n                # Found end_token -&gt; &amp;do_subs on \"preface\" &amp; add end_string\n                $replacement .= do_subs($1) . $end_string ;\n                $line_remnants = $2 ;\n                $subs_mode = 0 ;\n            }\n            else {\n                # Didn't find end_token -&gt; &amp;do_subs on all of what's left\n                $replacement .= do_subs($line_remnants) ;\n                $line_remnants = \"\" ;\n            }\n        }\n        else {\n            # Currently NOT substituting.  Scan for start_token\n            if ($line_remnants =~ /^ (.*?) $start_token (.* \\n) /x)  {\n                # Found start_token -&gt; append \"preface\" and start_string\n                $replacement .= $1 . $start_string ;\n                $line_remnants = $2 ;\n                $subs_mode = 1 ;\n            }\n            else {\n                # Didn't find start_token -&gt; append all of what remains\n                $replacement .= $line_remnants ;\n                $line_remnants = \"\" ;\n            }\n        }\n    } # while ! $line_remnants ...\n\n    # Nothing left of line, print replacement\n    print $replacement\n}\n</code></pre>\n\n<p>It's 'unix filter' style - reads on STDIN, transforms and writes on STDOUT.  When fed this;</p>\n\n<pre><code>hello world\n&lt;content:encoded&gt;&lt;![CDATA[ ' \" ]]&gt;&lt;/content:encoded&gt;\nHere it comes: &lt;content:encoded&gt;&lt;![CDATA[ No quotes\nlike these in here ' \" or relation ops like these &lt; &gt; \",&gt;'\nMore non-allowed \" ' &lt;&gt;'\" - then the end: ]]&gt;&lt;/content:encoded&gt;\nthese qotes should come through ' \"&lt;&gt;\nStart and End on one line - no data\n&lt;content:encoded&gt;&lt;![CDATA[]]&gt;&lt;/content:encoded&gt;\nStart and End repeatedly on one line - single char\n'&lt;content:encoded&gt;&lt;![CDATA[']]&gt;&lt;/content:encoded&gt;'&lt;content:encoded&gt;&lt;![CDATA[']]&gt;&lt;/content:encoded&gt;\n</code></pre>\n\n<p>... it produces;</p>\n\n<pre><code>hello world\n&lt;content:encoded&gt;&lt;![CDATA[ &amp;apos; &amp;quot; ]]&gt;&lt;/content:encoded&gt;\nHere it comes: &lt;content:encoded&gt;&lt;![CDATA[ No quotes\nlike these in here &amp;apos; &amp;quot; or relation ops like these &amp;lt; &amp;gt; &amp;quot;,&amp;gt;&amp;apos;\nMore non-allowed &amp;quot; &amp;apos; &amp;lt;&amp;gt;&amp;apos;&amp;quot; - then the end: ]]&gt;&lt;/content:encoded&gt;\nthese qotes should come through ' \"&lt;&gt;\nStart and End on one line - no data\n&lt;content:encoded&gt;&lt;![CDATA[]]&gt;&lt;/content:encoded&gt;\nStart and End repeatedly on one line - single char\n'&lt;content:encoded&gt;&lt;![CDATA[&amp;apos;]]&gt;&lt;/content:encoded&gt;'&lt;content:encoded&gt;&lt;![CDATA[&amp;apos;]]&gt;&lt;/content:encoded&gt;  \n</code></pre>\n\n<p>I hope it's of some use.</p>\n"}], "owner": {"reputation": 263, "user_id": 5949518, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ZDg29.png?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/5949518/edward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 36589052, "answer_count": 1, "score": 1, "last_activity_date": 1460540205, "creation_date": 1460508111, "last_edit_date": 1460523367, "question_id": 36586558, "link": "https://stackoverflow.com/questions/36586558/finding-and-replacing-specific-text-between-two-strings", "title": "Finding and replacing specific text between two strings?", "body": "<p>I have about a thousand XML files in one folder. Each XML file has about 100 items in it. Each item is on a separate line.</p>\n\n<p>I need to search and replace text that's only between</p>\n\n<pre><code>&lt;content:encoded&gt;&lt;![CDATA[\n</code></pre>\n\n<p>and</p>\n\n<pre><code>]]&gt;&lt;/content:encoded&gt;\n</code></pre>\n\n<p>I only need to replace the following:</p>\n\n<ul>\n<li><code>'</code> is replaced with <code>&amp;apos;</code></li>\n<li><code>\"</code> is replaced with <code>&amp;quot;</code></li>\n<li><code>&lt;</code> is replaced with <code>&amp;lt;</code></li>\n<li><code>&gt;</code> is replaced with <code>&amp;gt;</code></li>\n</ul>\n\n<p>I use <code>sed</code> for mass finding/replacing all the time, but can't get it to work when I just want to find/replace between strings like this</p>\n\n<p>I'm up for using whatever you guys think is best</p>\n"}, {"tags": ["arrays", "perl", "reference", "shallow-copy"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1460499657, "post_id": 36584998, "comment_id": 60769052, "body": "<a href=\"http://stackoverflow.com/questions/388187/whats-the-best-way-to-make-a-deep-copy-of-a-data-structure-in-perl\" title=\"whats the best way to make a deep copy of a data structure in perl\">stackoverflow.com/questions/388187/&hellip;</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460510735, "post_id": 36584998, "comment_id": 60772495, "body": "Generally speaking, you can use Storable&#39;s <code>dclone</code>. zdim&#39;s solution is more appropriate in this case (since you just want a simple shallow copy)."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460510849, "post_id": 36585167, "comment_id": 60772528, "body": "Or if you wanted to use an anonymous array, <code>push @aoa, [ @$_, $i++ ];</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460522567, "post_id": 36585167, "comment_id": 60775544, "body": "@ikegami Thank you very much for the edit and comment, this is much better."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1460510761, "last_edit_date": 1460510761, "creation_date": 1460499898, "answer_id": 36585167, "question_id": 36584998, "link": "https://stackoverflow.com/questions/36584998/how-to-make-a-copy-of-a-nested-array-in-an-array-of-array-structure/36585167#36585167", "title": "How to make a copy of a nested array in an array of array structure", "body": "<p>Create a new array with <code>my</code>, copy the contents of the array to be built upon, then add to it.  </p>\n\n<p>Keeping it as close as possible to your code</p>\n\n<pre><code>foreach (@aoa) {\n  last if $_-&gt;[-1] == 5;\n  my @temp = @$_;         #copy current array into @temp\n  push @temp, $i++;\n  push @aoa, \\@temp;\n} \n</code></pre>\n"}], "owner": {"reputation": 542, "user_id": 3470987, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1527668336/picture?type=large", "display_name": "Tyler Kelly", "link": "https://stackoverflow.com/users/3470987/tyler-kelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 1, "accepted_answer_id": 36585167, "answer_count": 1, "score": 0, "last_activity_date": 1460510761, "creation_date": 1460499225, "question_id": 36584998, "link": "https://stackoverflow.com/questions/36584998/how-to-make-a-copy-of-a-nested-array-in-an-array-of-array-structure", "title": "How to make a copy of a nested array in an array of array structure", "body": "<p>I'm trying to make a copy of a nested array, and it appears that I continue to make a reference with my attempts. </p>\n\n<p>To be more specific I am trying to have an array of arrays wherein each sub array builds upon the previous array. Here is my attempt:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\n\nmy @aoa=[(1)];\nmy $i = 2;\nforeach (@aoa){\n  my $temp = $_;#copy current array into $temp\n  push $temp, $i++;\n  push @aoa, $temp;\n  last if $_-&gt;[-1] == 5;\n} \n#print contents of @aoa\nforeach my $row (@aoa){\n  foreach my $ele (@$row){\n    print \"$ele  \";\n  }\n  print \"\\n\";\n}\n</code></pre>\n\n<p>My output is:</p>\n\n<pre><code>1  2  3  4  5  \n1  2  3  4  5  \n1  2  3  4  5  \n1  2  3  4  5  \n1  2  3  4  5  \n</code></pre>\n\n<p>And I want/expect it to be:</p>\n\n<pre><code>1\n1 2\n1 2 3\n1 2 3 4 \n1 2 3 4 5 \n</code></pre>\n\n<p>I'm assuming my problems lies with how I am assigning $temp, please let me know if this is not the case. Any help is appreciated.</p>\n"}, {"tags": ["excel", "perl", "spreadsheet"], "answers": [{"comments": [{"owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "edited": false, "score": 0, "creation_date": 1460556691, "post_id": 36584537, "comment_id": 60799046, "body": "Added the code and came to know that its a permission denied error. So added workbook-&gt;close() and came out of permission denied error. Now getting output little differently than I need. Updated the code and outputs"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "edited": false, "score": 0, "creation_date": 1460557482, "post_id": 36584537, "comment_id": 60799742, "body": "@Jill448 That&#39;s an entirely different question. Please create a new post instead of invalidating answers that people have already spent time writing."}, {"owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1460557689, "post_id": 36584537, "comment_id": 60799935, "body": "@ThisSuitIsBlackNot Sure will do"}], "tags": [], "owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "is_accepted": true, "score": 2, "last_activity_date": 1460497025, "creation_date": 1460497025, "answer_id": 36584537, "question_id": 36584127, "link": "https://stackoverflow.com/questions/36584127/perl-dump-data-from-a-hash-to-a-spreadsheet/36584537#36584537", "title": "Perl dump data from a hash to a spreadsheet", "body": "<p>It seems that <code>Excel::Writer::XLSX-&gt;new</code> failed. Add this code after calling <code>new</code>, to see what went wrong:</p>\n\n<pre><code>if (not defined $workbook)\n{\n    die \"Failed to create spreadsheet: $!\";\n}\n</code></pre>\n"}], "owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 36584537, "answer_count": 1, "score": 0, "last_activity_date": 1460557425, "creation_date": 1460495530, "last_edit_date": 1460557425, "question_id": 36584127, "link": "https://stackoverflow.com/questions/36584127/perl-dump-data-from-a-hash-to-a-spreadsheet", "title": "Perl dump data from a hash to a spreadsheet", "body": "<p>I have a hash with key and Values(array). I want to dump them to a spreadsheet</p>\n\n<pre><code>%hash\n   key1 -&gt; foo bar \n   key2-&gt; john adam gill\n   key3-&gt; apple banana mango orange\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Excel::Writer::XLSX;\n\nmy $workbook = Excel::Writer::XLSX-&gt;new( 'c:\\TEMP\\filename.xlsx' ); \nmy $worksheet = $workbook-&gt;add_worksheet();\n\nmy $row = 1;\nmy $col = 1;\n\nforeach my $k (keys %hash)\n{\n    $worksheet-&gt;write($row, $col)-&gt;{Value} =  $k;                # title\n    $worksheet-&gt;write($row, $col++,)-&gt;{Value} =  $hash{$k};     # value\n    $row++;\n}\n</code></pre>\n\n<p><strong>Current Output</strong> <br>\nCan't call method \"add_worksheet\" on an undefined value<br><br>\n<strong>Desired Output</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/4g1N9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4g1N9.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21, "user_id": 5870132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7345252d39df6f94438d70de97d2f264?s=128&d=identicon&r=PG&f=1", "display_name": "kevin", "link": "https://stackoverflow.com/users/5870132/kevin"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1460488479, "post_id": 36581949, "comment_id": 60763081, "body": "I am not concerned about the dump. When I grab the data later on for an csv export the data is in the wrong order."}, {"owner": {"reputation": 21, "user_id": 5870132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7345252d39df6f94438d70de97d2f264?s=128&d=identicon&r=PG&f=1", "display_name": "kevin", "link": "https://stackoverflow.com/users/5870132/kevin"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1460488617, "post_id": 36581949, "comment_id": 60763177, "body": "The duplicates and the refs are displayed in excel just like the structure... which is no good."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 2, "creation_date": 1460488659, "post_id": 36581949, "comment_id": 60763199, "body": "Would get more help, if you tell us what you want achieve. Hashes has randomized order of keys by design, but it doesn&#39;t matter when you using them right."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1460488755, "post_id": 36581949, "comment_id": 60763254, "body": "@kevin What are you using to get the data from Perl and into Excel?"}, {"owner": {"reputation": 21, "user_id": 5870132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7345252d39df6f94438d70de97d2f264?s=128&d=identicon&r=PG&f=1", "display_name": "kevin", "link": "https://stackoverflow.com/users/5870132/kevin"}, "edited": false, "score": 0, "creation_date": 1460488934, "post_id": 36581949, "comment_id": 60763374, "body": "I am storing the data in angular and handsontable grids.  Yes, they don&#39;t care about the order just the keys.   However, when I export that data from those grids it pulls out the data just as it went it and jacks up the excel."}, {"owner": {"reputation": 21, "user_id": 5870132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7345252d39df6f94438d70de97d2f264?s=128&d=identicon&r=PG&f=1", "display_name": "kevin", "link": "https://stackoverflow.com/users/5870132/kevin"}, "edited": false, "score": 0, "creation_date": 1460489066, "post_id": 36581949, "comment_id": 60763455, "body": "Angular just stores the data in a scope var in or out."}, {"owner": {"reputation": 21, "user_id": 5870132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7345252d39df6f94438d70de97d2f264?s=128&d=identicon&r=PG&f=1", "display_name": "kevin", "link": "https://stackoverflow.com/users/5870132/kevin"}, "edited": false, "score": 0, "creation_date": 1460489188, "post_id": 36581949, "comment_id": 60763542, "body": "sorry using...  &lt;button class=&quot;btn btn-default&quot; ng-csv=&quot;db.items&quot; csv-header=&quot;getHeader()&quot; field-separator=&quot;&quot; filename=&quot;acis.csv&quot;&gt;Export to CSV&lt;/button&gt;.  db.items is the json encoded array of hashes."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1460489198, "post_id": 36581949, "comment_id": 60763548, "body": "@kevin There&#39;s lots of data structures in many languages which do not preserve key order. It could be anywhere in that process. Also anywhere in that process could fix the key order. Showing us some HTML button doesn&#39;t help, you have to post the actual code doing all this exporting."}, {"owner": {"reputation": 21, "user_id": 5870132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7345252d39df6f94438d70de97d2f264?s=128&d=identicon&r=PG&f=1", "display_name": "kevin", "link": "https://stackoverflow.com/users/5870132/kevin"}, "edited": false, "score": 0, "creation_date": 1460489449, "post_id": 36581949, "comment_id": 60763670, "body": "I am using Mojolicious, so it passing the data back to my html.ep file from a POST to the perl module."}, {"owner": {"reputation": 21, "user_id": 5870132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7345252d39df6f94438d70de97d2f264?s=128&d=identicon&r=PG&f=1", "display_name": "kevin", "link": "https://stackoverflow.com/users/5870132/kevin"}, "edited": false, "score": 0, "creation_date": 1460490098, "post_id": 36581949, "comment_id": 60764066, "body": "This is angular and there is no more code for the export. I pass back the @sorted_data, as listed above, from a POST and that data is set to db.items in the response. db.items is a scoped variable in angular and what ever is in that structure is what it will export as well as load into my grid.  That why I need my structure to be correct before I pass it back."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1460507322, "post_id": 36581949, "comment_id": 60771584, "body": "<b><i>&quot;However, the order of the keys needs to be order and it is not.&quot;</i></b> unless you are using the output of <code>Data::Dumper</code> then you have no problem. Is there a practical issue, or is it just that you have freaked when looking at the output of <code>Dumper</code>?"}, {"owner": {"reputation": 21, "user_id": 5870132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7345252d39df6f94438d70de97d2f264?s=128&d=identicon&r=PG&f=1", "display_name": "kevin", "link": "https://stackoverflow.com/users/5870132/kevin"}, "edited": false, "score": 0, "creation_date": 1460571119, "post_id": 36581949, "comment_id": 60809563, "body": "As you can see above, in my code, the data dumper output is whats reflected in the export to excel.  Its mixed up because of how the structure is set up."}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1460494174, "post_id": 36582158, "comment_id": 60766421, "body": "<a href=\"https://metacpan.org/pod/Tie::Hash::Indexed\" rel=\"nofollow noreferrer\">Tie::Hash::Indexed</a> is a faster alternative to Tie::IxHash, although I don&#39;t think either module should be used in the vast majority of cases."}, {"owner": {"reputation": 21, "user_id": 5870132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7345252d39df6f94438d70de97d2f264?s=128&d=identicon&r=PG&f=1", "display_name": "kevin", "link": "https://stackoverflow.com/users/5870132/kevin"}, "edited": false, "score": 0, "creation_date": 1460646852, "post_id": 36582158, "comment_id": 60850456, "body": "This did the trick, thanks.  for my $k (sort (keys %data)) { \t  tie (my %dataconfig, &#39;Tie::IxHash&#39;,&#39;refs&#39; =&gt; join( &#39;,&#39;, @{ $data{$k} } ),&#39;duplicates&#39; =&gt; $k); \t  push @sorted_data, \\%dataconfig; \t}"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 21, "user_id": 5870132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7345252d39df6f94438d70de97d2f264?s=128&d=identicon&r=PG&f=1", "display_name": "kevin", "link": "https://stackoverflow.com/users/5870132/kevin"}, "edited": false, "score": 0, "creation_date": 1460660327, "post_id": 36582158, "comment_id": 60858758, "body": "@kevin I still think the real problem lies elsewhere in the export process. In particular, it seems your export to Excel is doing it by order instead of by key. Defeats the point of using a hash."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 6, "last_activity_date": 1460489098, "last_edit_date": 1460489098, "creation_date": 1460488635, "answer_id": 36582158, "question_id": 36581949, "link": "https://stackoverflow.com/questions/36581949/store-an-array-of-hashes-where-keys-are-in-order/36582158#36582158", "title": "Store an Array of Hashes where keys are in order", "body": "<p><a href=\"https://en.wikipedia.org/wiki/Hash_table#Drawbacks\" rel=\"nofollow\">Hash keys have no inherent order</a>, and it's part of why they're so efficient. Their key list must be sorted every time. This is probably the route you want to go.</p>\n\n<p>If you want a hash-like structure that keeps its keys sorted, <a href=\"https://en.wikipedia.org/wiki/Tree_%28data_structure%29\" rel=\"nofollow\">look into trees</a>, though there are a dizzying variety.</p>\n\n<p>Alternatively, <a href=\"https://metacpan.org/pod/Tie::IxHash\" rel=\"nofollow\">Tie::IxHash</a> retains its original key order, though at a significant performance cost.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 5870132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7345252d39df6f94438d70de97d2f264?s=128&d=identicon&r=PG&f=1", "display_name": "kevin", "link": "https://stackoverflow.com/users/5870132/kevin"}, "edited": false, "score": 0, "creation_date": 1460563228, "post_id": 36586116, "comment_id": 60804545, "body": "i guess my response is posted in my original question."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1467563645, "last_edit_date": 1467563645, "creation_date": 1460505203, "answer_id": 36586116, "question_id": 36581949, "link": "https://stackoverflow.com/questions/36581949/store-an-array-of-hashes-where-keys-are-in-order/36586116#36586116", "title": "Store an Array of Hashes where keys are in order", "body": "<p>The data structure you have started with looks like this</p>\n\n<pre><code>my %data = (\n  '(111) 111-4588' =&gt; ['no ref'],\n  '(111) 111-9385' =&gt; ['no ref'],\n  '(111) 111-9355' =&gt; ['AMD', 'ANF'],\n  '(111) 111-2493' =&gt; ['Z1Z'],\n)\n</code></pre>\n\n<p>It would have been <em>far</em> more useful to have told us this, and given an example of the result that you wanted. Instead I had to write some code to reverse-engineer the information that you gave</p>\n\n<p>The program below seems to be a reasonable replication of your own code, and as you can see the array elements are in order of the <code>duplicates</code> elements of their hashes. Within those hashes, as others have observed, the elements are in no particular order</p>\n\n<p>I'm not understanding what more you want? How has the \"random order\" of has keys been a problem?</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse Data::Dump;\n\nmy %data = (\n  '(111) 111-2493' =&gt; ['Z1Z'],\n  '(111) 111-4588' =&gt; ['no ref'],\n  '(111) 111-9355' =&gt; ['AMD', 'ANF'],\n  '(111) 111-9385' =&gt; ['no ref'],\n);\n\nmy @sorted_data;\n\nfor my $k ( sort keys %data ) {\n    push @sorted_data, { duplicates =&gt; $k, refs =&gt; join( ',', @{ $data{$k} } ) };\n}\n\ndd \\@sorted_data;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>[\n  { duplicates =&gt; \"(111) 111-2493\", refs =&gt; \"Z1Z\" },\n  { duplicates =&gt; \"(111) 111-4588\", refs =&gt; \"no ref\" },\n  { duplicates =&gt; \"(111) 111-9355\", refs =&gt; \"AMD,ANF\" },\n  { duplicates =&gt; \"(111) 111-9385\", refs =&gt; \"no ref\" },\n]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5870132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7345252d39df6f94438d70de97d2f264?s=128&d=identicon&r=PG&f=1", "display_name": "kevin", "link": "https://stackoverflow.com/users/5870132/kevin"}, "is_accepted": false, "score": 0, "last_activity_date": 1460646909, "creation_date": 1460646909, "answer_id": 36627308, "question_id": 36581949, "link": "https://stackoverflow.com/questions/36581949/store-an-array-of-hashes-where-keys-are-in-order/36627308#36627308", "title": "Store an Array of Hashes where keys are in order", "body": "<p>This code solved my issue, thanks.</p>\n\n<pre><code>for my $k (sort (keys %data)) {\n      tie (my %dataconfig, 'Tie::IxHash','refs' =&gt; join( ',', @{ $data{$k} } ),'duplicates' =&gt; $k);\n      push @sorted_data, \\%dataconfig;\n    }\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5870132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7345252d39df6f94438d70de97d2f264?s=128&d=identicon&r=PG&f=1", "display_name": "kevin", "link": "https://stackoverflow.com/users/5870132/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1467563645, "creation_date": 1460488001, "last_edit_date": 1460562175, "question_id": 36581949, "link": "https://stackoverflow.com/questions/36581949/store-an-array-of-hashes-where-keys-are-in-order", "title": "Store an Array of Hashes where keys are in order", "body": "<p>I am sorting and storing my array of hashes using this code.</p>\n\n<pre><code>    my @sorted_data;\n        for my $k (sort keys %data) {\n          push @sorted_data, { duplicates =&gt; $k, refs =&gt; join( ',', @{ $data{$k} } )};\n        }\n</code></pre>\n\n<p>However, the keys need to be ordered and they are not.</p>\n\n<p>Output:</p>\n\n<pre><code>    print Dumper \\@sorted_data;\n\n    $VAR1 = [\n              {\n                'refs' =&gt; 'AMD,ANF',\n                'duplicates' =&gt; '(111) 111-9355'\n              },\n              {\n                'duplicates' =&gt; '(111) 111-9385',\n                'refs' =&gt; 'no ref'\n              },\n              {\n                'refs' =&gt; 'Z1Z',\n                'duplicates' =&gt; '(111) 111-2493'\n              },\n              {\n                'duplicates' =&gt; '(111) 111-4588',\n                'refs' =&gt; 'no ref'\n              }\n         ]\n</code></pre>\n\n<p>As you can see duplicates and refs are sometimes reversed and I need them to be in the same order every time.</p>\n\n<p>Desired Output:</p>\n\n<pre><code>    $VAR1 = [\n                  {\n                    'duplicates' =&gt; '(111) 111-9355',\n                    'refs' =&gt; 'AMD,ANF'\n                  },\n                  {\n                    'duplicates' =&gt; '(111) 111-9385',\n                    'refs' =&gt; 'no ref'\n                  },\n                  {\n                    'duplicates' =&gt; '(111) 111-2493',\n                    'refs' =&gt; 'Z1Z'\n                  },\n                  {\n                    'duplicates' =&gt; '(111) 111-4588',\n                    'refs' =&gt; 'no ref'\n                  }\n             ]\n</code></pre>\n\n<p>Yes, that is how I am producing my structure but my dump looks like this and its reflected in the export. </p>\n\n<pre><code>[ \n  { duplicates =&gt; \"(111) 111-2493\", refs =&gt; \"Z1Z\" },\n  { duplicates=&gt; \"(111) 111-4588\", refs =&gt; \"no ref\" },\n  { duplicates =&gt; \"(111) 111-9355\", refs =&gt; \"AMD,ANF\" },\n  { ref=&gt; \"no ref\", duplicates =&gt; \"(111) 111-9385\" },\n  { duplicates =&gt; \"(111) 111-9356\", refs =&gt; \"AMD\" },\n  { ref=&gt; \"no ref\", duplicates =&gt; \"(111) 111-9386\" },\n  { duplicates =&gt; \"(111) 111-9359\", refs =&gt; \"ANF\" },\n ]\n</code></pre>\n\n<p>and my export to excel output matches whats in the structure.</p>\n\n<pre><code>  TNs               REFs\n  (111) 111-2493    Z1Z\n  (111) 111-4588    no ref\n  (111) 111-9355    AMD,ANF\n  no ref            (111) 111-9385\n  (111) 111-9356    AMD\n  no ref            (111) 111-9386\n  (111) 111-9359    ANF\n</code></pre>\n"}, {"tags": ["perl", "parsing", "csv", "replace"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1460487489, "post_id": 36581668, "comment_id": 60762525, "body": "How do you correctly parse a CSV file? You use a well-designed, well-tested module like <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1460490740, "post_id": 36581668, "comment_id": 60764496, "body": "The &quot;<i>up to</i>&quot; 30 is a problem -- what if it&#39;s 10 chars, with some commas, and then a legitimate comma (field delimiter)?  Is there anything that you know with certainty about any specific fields after field 7?  (For example, &quot;ah, field 10 must always begin with ...&quot;)"}, {"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1460492385, "post_id": 36581668, "comment_id": 60765473, "body": "@zdim - Now I&#39;m being told there WILL be double quotes around that field whenever a comma was input by the user.  Can <b>tr/,/ /;</b> be used?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1460503234, "post_id": 36581668, "comment_id": 60770427, "body": "Please clarify. You are talking about the <i>eighth</i> field (index 7) that contains <code>MADE FOR DRAWDOWNS, NEVER P&#47;U</code>. Is that right? Do you know how many fields there should be in total? Can only the eighth field be entered manually like this?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1460503997, "post_id": 36581668, "comment_id": 60770687, "body": "I hope you realise that this is malformed input data and is unacceptable? If your changes are just a temporary solution then that&#39;s fine, but the fixes must be done on the <i>input</i> software: that is the single source of the problem. Left uncorrected there may be endless programs like yours that will have to correct the same issue. Please don&#39;t let that happen."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1460510898, "post_id": 36581668, "comment_id": 60772540, "body": "@BigRedEO Is the field quoted or not? One place in your question you say there are quotes, another place you say there aren&#39;t quotes, and your comment says there are quotes. Please edit your question to be consistent everywhere; it&#39;s very confusing right now. You don&#39;t need to add new blocks that say &quot;Update&quot; or &quot;Edit&quot;, since we can all see the edit history by clicking the link beneath the post; instead, replace information that&#39;s no longer relevant, and make sure you don&#39;t contradict yourself in different parts of the post."}, {"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "edited": false, "score": 1, "creation_date": 1460550556, "post_id": 36581668, "comment_id": 60793632, "body": "I have nothing to do with how the data comes to me, &quot;malformed&quot; or not, unfortunately.  After being told different things yesterday, last I was told was that whenever there is a comma in field[7] (zero-based index), there will be double quotes around that field in the record/file.  It is also the only field in each record that is manually input by a user every time."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1460573706, "post_id": 36581668, "comment_id": 60811174, "body": "Even if they say &quot;yes quotes,&quot; given all that flip-flopping and the existence of user&#39;s input, I&#39;d suggest to keep it safe, too, if possible -- is the number of fields in the file supposed to be fixed?  (Even if it differs from file to file.)  If not, are there some immutable phrases in the fields following this one, certain to be there?"}, {"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1460577094, "post_id": 36581668, "comment_id": 60813283, "body": "@zdim - the number of fields will always be fixed - always be the same.  That one field is the only one with user input and if there is a comma in it, there will be double quotes around that field.  I think you had posted something yesterday with deleting any comments between double quotes that might work - just have to learn how to use it with a scalar variable as with the other fields I manipulated in the code above (the joins and the time formatting)."}, {"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1460646090, "post_id": 36581668, "comment_id": 60849865, "body": "@MattJacob - I tried Text::CSV - got this error -   <code>Can&#39;t locate Text&#47;CSV.pm in @INC (@INC contains: &#47;usr&#47;perl5&#47;site_perl&#47;5.12&#47;sun4-solaris-64int &#47;usr&#47;perl5&#47;site_perl&#47;5.12 &#47;usr&#47;perl5&#47;vendor_perl&#47;5.12&#47;sun4-solaris-64int &#47;usr&#47;perl5&#47;vendor_perl&#47;5.12 &#47;usr&#47;perl5&#47;5.12&#47;lib&#47;sun4-solaris-64int &#47;usr&#47;perl5&#47;5.12&#47;lib .) at ReadFile.pl line 5.</code>  I&#39;m assuming this means we don&#39;t even have Text::CSV loaded.  Since I&#39;m a total noob to Perl, is it easy to load a module?  (Don&#39;t know if I have permissions to do so on the server I&#39;m using)"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1460653007, "post_id": 36581668, "comment_id": 60854544, "body": "@BigRedEO You probably don&#39;t have the module installed. Installing a module is <a href=\"http://stackoverflow.com/q/65865/82262\">fairly easy</a>"}, {"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "edited": false, "score": 0, "creation_date": 1460737540, "post_id": 36581668, "comment_id": 60897777, "body": "I have asked several questions about the files being given to me and got clarification yesterday.  I have edited my original question to correctly reflect what is happening.  I tried many different things yesterday, including tr, sed and awk, all without any success.  I have yet to find an answer that works in just searching with Google."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 0, "last_activity_date": 1460487946, "creation_date": 1460487946, "answer_id": 36581927, "question_id": 36581668, "link": "https://stackoverflow.com/questions/36581668/replace-comma-with-space-in-just-one-field-from-a-csv-file/36581927#36581927", "title": "Replace comma with space in just one field - from a .CSV file", "body": "<p><a href=\"http://p3rl.org/Text::CSV_XS\" rel=\"nofollow\">Text::CSV_XS</a> handles quoted commas just fine:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Text::CSV_XS qw{ csv };\n\nmy $aoa = csv(in =&gt; 'file.csv');  # The file contains the sample line.\nprint $aoa-&gt;[0][6];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1460503825, "post_id": 36583464, "comment_id": 60770628, "body": "I have edited your solution as I think your idea is excellent and it needed to be explained a little better. Please roll back my edit if you don&#39;t agree with my changes"}], "tags": [], "owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "is_accepted": false, "score": 1, "last_activity_date": 1460503731, "last_edit_date": 1460503731, "creation_date": 1460492989, "answer_id": 36583464, "question_id": 36581668, "link": "https://stackoverflow.com/questions/36581668/replace-comma-with-space-in-just-one-field-from-a-csv-file/36583464#36583464", "title": "Replace comma with space in just one field - from a .CSV file", "body": "<p>If it is <em>ONLY</em> the eighth field that is troubling <em>AND</em> you know exactly how many fields there should be, you can do it this way</p>\n\n<p>Suppose the total number of fields is <em>always</em> N</p>\n\n<ul>\n<li>Split the line on commas <code>,</code></li>\n<li>Separate and store the first six fields</li>\n<li>Separate and store the last n fields, where n is N-8</li>\n<li>Rejoin what remains with commas <code>,</code>. This now forms field 8</li>\n</ul>\n\n<p>and then do what ever you like to do with it. For example, write it to a <em>proper</em> CSV file</p>\n"}, {"comments": [{"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "edited": false, "score": 0, "creation_date": 1461161379, "post_id": 36655663, "comment_id": 61073910, "body": "Only just got back from four days away.  So, would the regex line be used in place of the substr line?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "edited": false, "score": 0, "creation_date": 1461220195, "post_id": 36655663, "comment_id": 61101253, "body": "@BigRedEO  It is the only thing you need once the <code>while</code> loop starts, that one line.  I&#39;ve added that to the answer. so that it is complete.  Note that I also added the <code>&#47;g</code> modifier so that this will fix all bad fields (with double quotes) on a line.  Let me know."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "edited": false, "score": 0, "creation_date": 1462611431, "post_id": 36655663, "comment_id": 61717183, "body": "@BigRedEO  I don&#39;t know whether you noticed that I updated my answer to clarify your question.  There are now three ways to solve it under different circumstances, all tested. I am curious, what happened with this in the end?"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1589879250, "last_edit_date": 1589879250, "creation_date": 1460749576, "answer_id": 36655663, "question_id": 36581668, "link": "https://stackoverflow.com/questions/36581668/replace-comma-with-space-in-just-one-field-from-a-csv-file/36655663#36655663", "title": "Replace comma with space in just one field - from a .CSV file", "body": "<p><strong>Note</strong>  &nbsp;  The two main versions below clean up one field.  The most recent change in the question states that there are, in fact, <em>two</em> such fields. <strong>The third version, at the end, works with any number of bad fields.</strong> </p>\n\n<p>All code has been tested with the supplied example and its variations.</p>\n\n<hr>\n\n<p>Following clarifications, this deals with the case when the file need be processed by hand.  A module is easily recommended for parsing <code>.csv</code>, but there is a problem here: reliance on the user to enter double quotes. If they end up not being there we have a malformed file.</p>\n\n<p>I take it that the number of fields in the file is known with certainty and ahead of time.</p>\n\n<p>The two independent solutions below use either array or string processing.</p>\n\n<p>(1)  The file is being processed line by line anyway, the line being split already. If there are more fields than expected, join the extra array elements by space and then overwrite the array with correct fields. This is similar to what is outlined in the answer by <a href=\"https://stackoverflow.com/users/1765406/vanhoesel\">vanHoesel</a>.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $num_fields = 39;  # what should be, using the example\nmy $ibad = 6;         # index of the malformed field-to-be\nmy @last = (-($num_fields-$ibad-1)..-1);  # index-range, rest of fields\n\nmy $file = \"file.csv\";\nopen my $fh, '&lt;', $file;\n\nwhile (my $line = &lt;$fh&gt;) {   # chomp it if needed\n   my @fields = split ',', $line;\n   if (@fields != $num_fields) {\n       # join extra elements by space\n       my $fixed = join ' ', @fields[$ibad..$ibad+@fields-$num_fields];\n       # overwrite array by good fields\n       @fields = (@fields[0..$ibad-1], $fixed, @fields[@last]);\n   }   \n   # Process @fields normally\n   print \"@fields\";\n}   \nclose $fh;\n</code></pre>\n\n<p>(2)  Preprocess the file, only checking for malformed lines and fixing them as needed.  Uses string manipulations.  (Or, the method above can be used.) The <code>$num_fields</code> and <code>$ibad</code> are the same.</p>\n\n<pre><code>while (my $line = &lt;$fh&gt;) {\n    # Number of fields: commas + 1  (tr|,|| counts number of \",\")\n    my $have_fields = $line =~ tr|,|| + 1;\n    if ($have_fields != $num_fields) {   \n        # Get indices of commas delimiting the bad field\n        my ($beg, $end) = map {\n            my $p = '[^,]*,' x $_; \n            $line =~ /^$p/ and $+[0]-1; \n        } ($ibad, $ibad+$have_fields-$num_fields);\n\n        # Replace extra commas and overwrite that part of the string\n        my $bad_field = substr($line, $beg+1, $end-$beg-1);\n        (my $fixed = $bad_field) =~ tr/,/ /;\n        substr($line, $beg+1, $end-$beg-1) = $fixed;\n    }   \n    # Perhaps write the line out, for a corrected .csv file\n    print $line;\n}   \n</code></pre>\n\n<p>In the last line the bad part of <code>$line</code> is overwritten by assigning to <a href=\"http://perldoc.perl.org/functions/substr.html\" rel=\"nofollow noreferrer\"><code>substr</code></a>, what this function allows. The new substring <code>$fixed</code> is constructed with commas changed (or removed, if desired), and used to overwrite the bad part of the <code>$line</code>.  See docs.</p>\n\n<hr>\n\n<p>If quotes are known to be there a regex can be used. <strong>This works with any number of bad fields.</strong></p>\n\n<pre><code>while (my $line = &lt;$fh&gt;) {\n    $line =~ s/.\"([^\"]+)\"/join ' ', split(',', $1)/eg;  # \"\n    # process the line. note that double quotes are removed\n}\n</code></pre>\n\n<p>If the quotes are to be kept move them inside parenthesis, to be captured as well.</p>\n\n<p><strong>This one line is all that need be done after</strong> <code>while (...) {</code> <strong>to clean up data.</strong></p>\n\n<p>The <code>/e</code> modifier makes the replacement side be evaluated as code, instead of being used as a double-quoted string. There the matched part of the line (between <code>\"</code>) is split by comma and then joined by space, thus fixing the field.  See the last item under \"<em>Search and replace</em>\" in <a href=\"http://perldoc.perl.org/perlretut.html#Using-regular-expressions-in-Perl\" rel=\"nofollow noreferrer\"><code>perlretut</code></a>.</p>\n\n<p>All code has been tested with multiple lines and multiple commas in the bad field.</p>\n"}], "owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 847, "favorite_count": 1, "answer_count": 3, "score": -1, "last_activity_date": 1589879250, "creation_date": 1460487097, "last_edit_date": 1460744788, "question_id": 36581668, "link": "https://stackoverflow.com/questions/36581668/replace-comma-with-space-in-just-one-field-from-a-csv-file", "title": "Replace comma with space in just one field - from a .CSV file", "body": "<p>I have happened upon a problem with a program that parses through a CSV file with a few million records: two fields in each line has comments that users have put in, and sometimes they use commas within their comments.  If there are commas input, that field will be contained in double quotes.  I need to replace any commas found in those fields with a space.  Here is one such line from the file to give you an idea -</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1925,47365,2,650187016,1,1,\"MADE FOR DRAWDOWNS, NEVER P/U\",16,IFC 8112NP,Standalone-6,,,44,10/22/2015,91607,,B24W02651,,\"PA-3, PURE\",4/28/2015,1,0,,1,MAN,,CUST,,CUSTOM MATCH,0,TRUE,TRUE,O,C48A0D001EF449E3AB97F0B98C811B1B,POS.MISTINT.V0000.UP.Q,PROD_SMISA_BK,414D512050524F445F504F5331393235906F28561D2F0020,10/22/2015 9:29,10/22/2015 9:30\n</code></pre>\n\n<p>NOTE - I do not have the Text::CSV module available to me, nor will it be made available in the server I am using.</p>\n\n<p>Here is part of my code in parsing this file.  The first thing I do is concatenate the very first three fields and prepend that concatenated field to each line.  Then I want to clear out the commas in @fields[7,19], then format the DATE in three fields and the DATETIME in two fields.  The only line I can't figure out is clearing out those commas -</p>\n\n<pre><code>my @data;\n\n# Read the lines one by one.\n\nwhile ( $line = &lt;$FH&gt; ) {\n\n    # split the fields, concatenate the first three fields,\n    # and add it to the beginning of each line in the file\n\n    chomp($line);\n    my @fields = split(/,/, $line);\n\n    unshift @fields, join '_', @fields[0..2];\n\n    # remove user input commas in fields[7,19]\n\n    $_ =                 for fields[7,19]; \n\n    # format DATE and DATETIME fields for MySQL/sqlbatch60\n\n    $_ = join '-', (split /\\//)[2,0,1] for @fields[14,20,23];\n    $_ = Time::Piece-&gt;strptime($_,'%m/%d/%Y %H:%M')-&gt;strftime('%Y-%m-%d %H:%M') for @fields[38,39];\n\n    # write the parsed record back to the file\n\n    push @data, \\@fields;\n}\n</code></pre>\n"}, {"tags": ["linux", "perl", "signals"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460487364, "post_id": 36581280, "comment_id": 60762459, "body": "What does &quot;called a daemon&quot; mean? What does &quot;return a value to a process&quot; mean?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1460493464, "post_id": 36581280, "comment_id": 60766057, "body": "Please specify your problem better.  There are many ways to pass things around, and many ways for either to fail under specific conditions."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1461184116, "creation_date": 1461184116, "answer_id": 36754527, "question_id": 36581280, "link": "https://stackoverflow.com/questions/36581280/return-a-value-from-a-signal-handler-inside-a-perl-daemon/36754527#36754527", "title": "Return a value from a Signal handler inside a perl daemon", "body": "<p>The thing about signal handlers, is they're pretty simple. They're basically an interrupt from the kernel, that's passed to the process.</p>\n\n<p>The handler can alter state within the process. But because you've <code>fork()</code>ed beforehand, you have a parent process and a child process - the two don't have any shared state. So 'signaling' from one to the other, is an completely seperate <a href=\"http://perldoc.perl.org/perlipc.html\" rel=\"nofollow\"><code>IPC</code></a> - at the simplest level - you can send another <code>kill</code> signal to the parent process - and get this pid via <a href=\"http://perldoc.perl.org/functions/getpgrp.html\" rel=\"nofollow\"><code>getpgrp</code></a>. </p>\n\n<p>For more complicated IPCs though, you're looking at... well, reading the <code>perlipc</code> doc, and figuring out what's most appropriate. </p>\n"}], "owner": {"reputation": 497, "user_id": 3384373, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/41328490fc7a1482e26b5e2561384ad3?s=128&d=identicon&r=PG&f=1", "display_name": "Ameyj", "link": "https://stackoverflow.com/users/3384373/ameyj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461184116, "creation_date": 1460485777, "last_edit_date": 1460520082, "question_id": 36581280, "link": "https://stackoverflow.com/questions/36581280/return-a-value-from-a-signal-handler-inside-a-perl-daemon", "title": "Return a value from a Signal handler inside a perl daemon", "body": "<p>How do I return a value to a process which initiated a daemon from a signal handler inside a daemon?</p>\n\n<pre><code>sub _fork\n{\n my $pid = fork;\n $pid;\n}\nsub daemonize_monitor_sigio\n{\n    _fork and return;\n\n    SIG{IO} = sub{\n    print \"caught sigio\";\n    $ret = {}\n    ...#do some processing\n\n    #wants to return $ret here;\n    }\n    while(1)\n    {\n    ;\n    }\n }\n\ndaemoniz_monitor_sigio();\n</code></pre>\n"}, {"tags": ["perl", "data-structures", "hash", "iteration"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1460484272, "post_id": 36580377, "comment_id": 60760670, "body": "Are you using <code>XML::Simple</code>?"}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1460511090, "post_id": 36580377, "comment_id": 60772592, "body": "Working with nested data structures in Perl is a very useful skill to pick up, I recommend the <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut dcocumentation</a> that ships with Perl.  However, if you are trying to use XML::Simple as @Borodin and I suspect then I recommend you save yourself pain by following this <a href=\"http://grantm.github.io/perl-libxml-by-example/\" rel=\"nofollow noreferrer\">XML::LibXML tutorial</a> instead."}, {"owner": {"reputation": 13, "user_id": 1678891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/505d577aeaf7f4fed614cae51bf2475a?s=128&d=identicon&r=PG", "display_name": "jaySingh", "link": "https://stackoverflow.com/users/1678891/jaysingh"}, "edited": false, "score": 0, "creation_date": 1461072518, "post_id": 36580377, "comment_id": 61024819, "body": "I am just getting started with Perl so this kind of study material will be very helpful. Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 13, "user_id": 1678891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/505d577aeaf7f4fed614cae51bf2475a?s=128&d=identicon&r=PG", "display_name": "jaySingh", "link": "https://stackoverflow.com/users/1678891/jaysingh"}, "edited": false, "score": 0, "creation_date": 1460484691, "post_id": 36580561, "comment_id": 60760905, "body": "You&#39;re welcome. Please accept the answer by clicking the green checkmark if it helped you solve the problem."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 13, "user_id": 1678891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/505d577aeaf7f4fed614cae51bf2475a?s=128&d=identicon&r=PG", "display_name": "jaySingh", "link": "https://stackoverflow.com/users/1678891/jaysingh"}, "edited": false, "score": 0, "creation_date": 1460512926, "post_id": 36580561, "comment_id": 60773087, "body": "@jaySingh: While &quot;it worked&quot; may result in an encouraging &quot;yay!&quot;, it is important that you understand what is going on and <i>why</i> that solution worked. Perl code is transparent and intelligible, and it is wrong to treat a program as a kind of &quot;password&quot; that lets you into the behaviour you&#39;re looking for. It&#39;s very like natural language. I am sure you&#39;d be ecstatic to be able to order double whiskey in Mesopotamia, but it&#39;s an empty achievement because you have to start all over again to ask for two double vodkas, one without ice. If you learned the Sumerian language then everything would flow"}, {"owner": {"reputation": 13, "user_id": 1678891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/505d577aeaf7f4fed614cae51bf2475a?s=128&d=identicon&r=PG", "display_name": "jaySingh", "link": "https://stackoverflow.com/users/1678891/jaysingh"}, "edited": false, "score": 0, "creation_date": 1461072713, "post_id": 36580561, "comment_id": 61024958, "body": "I understand. Thanks!"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 1, "last_activity_date": 1460483326, "creation_date": 1460483326, "answer_id": 36580561, "question_id": 36580377, "link": "https://stackoverflow.com/questions/36580377/how-to-iterate-through-a-hash-of-hashes-which-contains-an-array-of-hashes-in-per/36580561#36580561", "title": "How to iterate through a hash of hashes which contains an array of hashes in Perl?", "body": "<p>Assuming you have a hash:</p>\n\n<pre><code>my @item3s;\n\nfor my $item (@{ $hash{two}{items} }){\n    push @item3s, $item-&gt;{itemthree};\n}\n\nprint \"$_\\n\" for @item3s;\n</code></pre>\n\n<p>If it's in fact a hash reference, change <code>$hash{two}{items}</code> to <code>$hash-&gt;{two}{items}</code></p>\n"}], "owner": {"reputation": 13, "user_id": 1678891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/505d577aeaf7f4fed614cae51bf2475a?s=128&d=identicon&r=PG", "display_name": "jaySingh", "link": "https://stackoverflow.com/users/1678891/jaysingh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 36580561, "answer_count": 1, "score": 1, "last_activity_date": 1460512168, "creation_date": 1460482741, "last_edit_date": 1460512168, "question_id": 36580377, "link": "https://stackoverflow.com/questions/36580377/how-to-iterate-through-a-hash-of-hashes-which-contains-an-array-of-hashes-in-per", "title": "How to iterate through a hash of hashes which contains an array of hashes in Perl?", "body": "<p>I am getting an output to a query in the format below. I need to get all the values for <code>itemthree</code>.</p>\n\n<p>After trying a lot of different things I was able to extract only the first value. I couldn't figure out how to run it in a loop so as to get the values of all <code>itemthree</code> in the <code>items</code>  element.</p>\n\n<p>This is a dump of my data</p>\n\n<pre><code>$VAR1 = {\n\n    one =&gt; { msgSize =&gt; 103 },\n\n    two =&gt; {\n        items =&gt; [\n            { itemOne =&gt; -1, itemthree =&gt; \"AB_CD_EF\", itemtwo =&gt; 0 },\n            { itemOne =&gt; -1, itemthree =&gt; \"XY_YZ_AB\", itemtwo =&gt; 10 },\n        ],\n    },\n\n    someOtherStuff =&gt; \"abc\",\n}\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "edited": false, "score": 0, "creation_date": 1460485614, "post_id": 36581048, "comment_id": 60761443, "body": "How can I remove the word <code>null_</code> in output starting with <code>null_</code> . For example ,how can I make <code>null_jenkins</code> in the output to <code>jenkins</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "edited": false, "score": 0, "creation_date": 1460485827, "post_id": 36581048, "comment_id": 60761584, "body": "@Jill448:  You really shouldn&#39;t be relying on me so completely to do everything for you. I&#39;ve modified my solution."}, {"owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "edited": false, "score": 0, "creation_date": 1460486415, "post_id": 36581048, "comment_id": 60761936, "body": "Its chopping few thing like <code>jdk1.7.0_11</code> became <code>jdk1</code>. I am also trying to find how to get the string completely."}, {"owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "edited": false, "score": 0, "creation_date": 1460487933, "post_id": 36581048, "comment_id": 60762778, "body": "I have updated the code to match &quot;.&quot; as well in <code>jdk1.7.0_11</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "edited": false, "score": 0, "creation_date": 1460501383, "post_id": 36581048, "comment_id": 60769755, "body": "@Jill448: I&#39;m sorry, I missed that. I&#39;ve altered my solution once more. What do you mean by <i>&quot;how to get the string completely&quot;</i>? If you&#39;re atraying from the original question then you should post a new one"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1467624737, "last_edit_date": 1467624737, "creation_date": 1460484880, "answer_id": 36581048, "question_id": 36580309, "link": "https://stackoverflow.com/questions/36580309/perl-grep-for-a-pattern-inside-a-file-exclude-few-words/36581048#36581048", "title": "perl grep for a pattern inside a file , exclude few words", "body": "<p>This program builds a regex alternation pattern <code>$exclude</code> from the array <code>@exclude</code> and then uses it in a negative forward look-ahead in the main regex pattern. That excludes any lines that start with any of the excluded strings, as well as selecting only those that begin with <code>BEGIN_</code></p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy $pattern = 'BEGIN_';\nmy @exclude = qw/\n    BEGIN_null\n    BEGIN_ENV\n    BEGIN_WORKSPACE\n    BEGIN_WORKSPACE\n    BEGIN_SYNCHK_ASSET\n    BEGIN_SYNCHK_ASSET_ARGS\n/;\nmy @matching_lines;\n\nmy $exclude = join '|', map \"\\\\b$_\\\\b\", @exclude;\n\nopen my $fh, '&lt;', 'file.txt' or die qq{Couldn't open file \"file.txt\": $!};\n\nwhile ( &lt;$fh&gt; ) {\n    if ( /^(?!$exclude)$pattern(?:null_)?([\\w.]+)/ ) {\n        print \"$1\\n\";\n        push @matching_lines, $1;\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>perl\nshell\njdk1.7.0_11\njenkins\n</code></pre>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>Thinking further, I would prefer a solution that didn't put all the burden on a single regex pattern</p>\n\n<p>Like this <code>while</code> loop for instance, which is a direct replacement for the <code>while</code> in the previous program</p>\n\n<p>It first checks that each line begins with <code>$pattern</code>, and at the same time captures any trailing characters that are alphanumeric, underscore, or dot. The <code>next</code> interrupts the loop and jumps to the next line of input</p>\n\n<p>Then it tests whether the line starts with any of the excluded strings, using <code>next</code> again to ignore such cases</p>\n\n<p>Anything remaining is a line of interest, and is to be stored and printed</p>\n\n<pre><code>while ( &lt;$fh&gt; ) {\n\n    next unless /^$pattern(?:null_)?([\\w.]+)/;\n    my $suffix = $1;\n\n    next if /^(?:$exclude)(?![\\w.])/;\n\n    print \"$suffix\\n\";\n    push @matching_lines, $suffix;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>perl\nshell\njdk1.7.0_11\njenkins\n</code></pre>\n"}], "owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 36581048, "answer_count": 1, "score": -1, "last_activity_date": 1467624737, "creation_date": 1460482474, "last_edit_date": 1460501526, "question_id": 36580309, "link": "https://stackoverflow.com/questions/36580309/perl-grep-for-a-pattern-inside-a-file-exclude-few-words", "title": "perl grep for a pattern inside a file , exclude few words", "body": "<p>I a have code which will grep a file for all the lines beginning with \"BEGIN_\"</p>\n\n<ol>\n<li>How can I exclude a few patterns like:\n\n<ul>\n<li>BEGIN_null</li>\n<li>BEGIN_ENV</li>\n<li>BEGIN_WORKSPACE</li>\n<li>BEGIN_WORKSPACE</li>\n<li>BEGIN_SYNCHK_ASSET</li>\n<li>BEGIN_SYNCHK_ASSET_ARGS</li>\n</ul></li>\n<li><p>And push the word matching after BEGIN_ into the @matching_lines</p>\n\n<pre><code>my $pattern = \"BEGIN_\";\nmy @matching_lines;\nopen(DATA, \"&lt;file.txt\") or die \"Couldn't open file file.txt, $!\";\n\nwhile(&lt;DATA&gt;){\n   if (/$pattern/) {\n         print \"$_\";\n        push(@matching_lines, $_);\n         }\n}\n</code></pre></li>\n</ol>\n\n<p><strong>Current Output</strong></p>\n\n<p>BEGIN_perl<br>\n    BEGIN_ENV<br>\nBEGIN_shell<br>\nBEGIN_null<br>\nBEGIN_null_jdk1.7.0_11<br>\n    BEGIN_ENV<br>\nBEGIN_WORKSPACE<br>\n    BEGIN_SYNCHK_ASSET<br>\n    BEGIN_SYNCHK_ASSET_ARGS<br>\nBEGIN_null_jenkins<br><br>\n<strong>Desired Output</strong><br>\nperl<br>\nshell<br>\njdk1.7.0_11<br>\njenkins</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1460481008, "post_id": 36579696, "comment_id": 60758672, "body": "It has already been asked before. You need to use a capturing group - <code>s&#47;([0-9]+)&#47;replacen($index,$1,$replacement)&#47;eg;</code>. See <a href=\"http://stackoverflow.com/questions/19387952/use-of-uninitialized-value-in-perl\" title=\"use of uninitialized value in perl\">stackoverflow.com/questions/19387952/&hellip;</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1460481263, "post_id": 36579696, "comment_id": 60758829, "body": "Or you could use <code>$&amp;</code> instead of <code>$1</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 3, "creation_date": 1460481317, "post_id": 36579696, "comment_id": 60758865, "body": "@H&#229;kon H&#230;gland, Bad idea. Until very very recently, that slowed down every match without captures in the entire application."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6194556"}, "edited": false, "score": 0, "creation_date": 1460484681, "post_id": 36579909, "comment_id": 60760897, "body": "Thank you very much. This fixed the problem"}], "tags": [], "owner": {"reputation": 850, "user_id": 258130, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8ffcb13424f6eae71cd96a1c1a7c1d2c?s=128&d=identicon&r=PG", "display_name": "skarface", "link": "https://stackoverflow.com/users/258130/skarface"}, "is_accepted": true, "score": 3, "last_activity_date": 1460481178, "creation_date": 1460481178, "answer_id": 36579909, "question_id": 36579696, "link": "https://stackoverflow.com/questions/36579696/in-perl-use-of-uninitialized-value-in-substitution-iterator-error-for-1-vari/36579909#36579909", "title": "In Perl, &#39;Use of uninitialized value in substitution iterator&#39; error for $1 variable", "body": "<p>$1 is only set after you capture a pattern, for example:</p>\n\n<pre><code>$foo =~ /([0-9]+)/;\n# $1 equals whatever was matched between the parens above\n</code></pre>\n\n<p>Try wrapping your matching in parens to capture it to $1</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1460483399, "last_edit_date": 1460483399, "creation_date": 1460483057, "answer_id": 36580482, "question_id": 36579696, "link": "https://stackoverflow.com/questions/36579696/in-perl-use-of-uninitialized-value-in-substitution-iterator-error-for-1-vari/36580482#36580482", "title": "In Perl, &#39;Use of uninitialized value in substitution iterator&#39; error for $1 variable", "body": "<p>I would write it like this</p>\n\n<p>The <code>while</code> loop iterates over occurrences of the <code>\\d+</code> pattern in the string. When the Nth occurrence is found the last match is replaced using a call to <code>substr</code> using the values in built-in arrays <code>@-</code> (the start of the last match) and <code>@+</code> (the end of the last match)</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\n@ARGV = ( 3, 'INTEGER_PLACEHOLDER', 'method(0, 1, 6);' );\n\nif ( @ARGV != 3 ) {\n    print qq{\\nUsage: replace_integer.pl occurrence replacement to_replace};\n    print qq{\\nE.g. `./replace_integer.pl 1 \"INTEGER_PLACEHOLDER\" \"method(0 , 1, 6);\"`};\n    print qq{\\nWould output: \"method(INTEGER_PLACEMENT , 1, 6);\"\\n};\n    exit;\n}\n\nmy ( $occurrence, $replacement, $string ) = @ARGV;\n\nmy $n;\nwhile ( $string =~ /\\d+/g ) {\n\n    next unless ++$n == $occurrence;\n\n    substr $string, $-[0], $+[0]-$-[0], $replacement;\n    last;\n}\n\nprint \"RESULT: $string\\n\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ replace_integer.pl 3 INTEGER_PLACEHOLDER 'method(0, 1, 6);'\nRESULT: method(0, 1, INTEGER_PLACEHOLDER);\n\n$ replace_integer.pl 2 INTEGER_PLACEHOLDER 'method(0, 1, 6);'\nRESULT: method(0, INTEGER_PLACEHOLDER, 6);\n\n$ replace_integer.pl 1 INTEGER_PLACEHOLDER 'method(0, 1, 6);'\nRESULT: method(INTEGER_PLACEHOLDER, 1, 6);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6194556"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1374, "favorite_count": 1, "accepted_answer_id": 36579909, "answer_count": 2, "score": 3, "last_activity_date": 1460483399, "creation_date": 1460480565, "last_edit_date": 1495535293, "question_id": 36579696, "link": "https://stackoverflow.com/questions/36579696/in-perl-use-of-uninitialized-value-in-substitution-iterator-error-for-1-vari", "title": "In Perl, &#39;Use of uninitialized value in substitution iterator&#39; error for $1 variable", "body": "<p>Working from an example found else where on <a href=\"https://stackoverflow.com/questions/2555662/how-can-i-substitute-the-nth-occurrence-of-a-match-in-a-perl-regex\">stackoverflow.com</a> I am attempting to replace on the Nth instance of a regex match on a string in Perl. My code is as follows:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy $num_args = $#ARGV +1;\nif($num_args != 3) {\n        print \"\\nUsage: replace_integer.pl occurance replacement to_replace\";\n        print \"\\nE.g. `./replace_integer.pl 1 \\\"INTEGER_PLACEHOLDER\\\" \\\"method(0 , 1, 6);\\\"`\";\n        print \"\\nWould output: \\\"method(INTEGER_PLACEMENT , 1, 6);\\\"\\n\";\n        exit;\n}\n\nmy $string =$ARGV[2];\n\nmy $cont =0;\nsub replacen { \n        my ($index,$original,$replacement) = @_;\n        $cont++;\n        return $cont == $index ? $replacement: $original;\n}\n\nsub replace_quoted {\n        my ($string, $index,$replacement) = @_;\n        $cont = 0; # initialize match counter\n        $string =~ s/[0-9]+/replacen($index,$1,$replacement)/eg;\n        return $string;\n}\n\nmy $result = replace_quoted ( $string, $ARGV[0] ,$ARGV[1]);\nprint \"RESULT: $result\\n\";\n</code></pre>\n\n<p>For </p>\n\n<pre><code>./replace_integer.pl 3 \"INTEGER_PLACEHOLDER\" \"method(0, 1 ,6);\"\n</code></pre>\n\n<p>I'd expect an output of</p>\n\n<pre><code>RESULT: method(0, 1 ,INTEGER_PLACEHOLDER);\n</code></pre>\n\n<p>Unfortunately I get an output of</p>\n\n<pre><code>RESULT: method(,  ,INTEGER_PLACEHOLDER);\n</code></pre>\n\n<p>With these warnings/errors</p>\n\n<pre><code>Use of uninitialized value in substitution iterator at ./replace_integer.pl line 26.\nUse of uninitialized value in substitution iterator at ./replace_integer.pl line 26.\n</code></pre>\n\n<p>Line 26 is the following line:</p>\n\n<pre><code>$string =~ s/[0-9]+/replacen($index,$1,$replacement)/eg;\n</code></pre>\n\n<p>I have determined this is due to $1 being uninitialised. To my understanding $1 should have the value of the last match. Given my very simple regex (<code>[0-9]+</code>) I see no reason why it should be uninitialised.</p>\n\n<p>I am aware there are easier ways to find and replace the Nth instance in sed but I will require Perl's back and forward references once this hurdle is overcome (not supported by sed)</p>\n\n<p>Does anyone know the cause of this error and how to fix it?</p>\n\n<p>I am using Perl v5.18.2 , built for x86_64-linux-gnu-thread-multi</p>\n\n<p>Thank you for your time.</p>\n"}, {"tags": ["perl", "if-statement", "conditional-statements", "invert"], "comments": [{"owner": {"reputation": 27022, "user_id": 182693, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7e4422dd860fce9b9f3c024c8655c7d2?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/182693/sean"}, "edited": false, "score": 2, "creation_date": 1460478442, "post_id": 36578974, "comment_id": 60757088, "body": "Read the <a href=\"http://perldoc.perl.org/perlop.html\" rel=\"nofollow noreferrer\">perlop</a> manual page and search for <code>!=</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460480607, "post_id": 36578974, "comment_id": 60758437, "body": "Could you please be clearer for which conditions you&#39;d like the <code>if</code> to be entered?"}], "answers": [{"comments": [{"owner": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "edited": false, "score": 0, "creation_date": 1460479118, "post_id": 36579024, "comment_id": 60757519, "body": "Skarface:  Does your !=456 take into account that I&#39;m trying to compare 456 vs. equal 456?    I thought that != means NOT EQUAL just like == means comparison. What I need is NOT COMPARED TO 456."}, {"owner": {"reputation": 850, "user_id": 258130, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8ffcb13424f6eae71cd96a1c1a7c1d2c?s=128&d=identicon&r=PG", "display_name": "skarface", "link": "https://stackoverflow.com/users/258130/skarface"}, "reply_to_user": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "edited": false, "score": 0, "creation_date": 1460479252, "post_id": 36579024, "comment_id": 60757606, "body": "Not sure what you mean.  if (a != 5) will evaluate to true if a is not set to 5.  just like if (a == 5) will eavluate to true if a is set to 5."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "edited": false, "score": 1, "creation_date": 1460479281, "post_id": 36579024, "comment_id": 60757629, "body": "@Alby: What do you mean by &quot;not compared to&quot;?"}, {"owner": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "edited": false, "score": 0, "creation_date": 1460481208, "post_id": 36579024, "comment_id": 60758789, "body": "Thanks skarface. Using != worked.  I was assuming that if I needed &quot;==&quot; to compare that I needed a similar !== if I wanted  the inverse."}, {"owner": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "edited": false, "score": 0, "creation_date": 1486299092, "post_id": 36579024, "comment_id": 71276612, "body": "Can somebody please vote up my question? I have received -2 and that has hurt my ability to post future questions. I have no idea what I&#39;ve done wrong or how to correct it."}], "tags": [], "owner": {"reputation": 850, "user_id": 258130, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8ffcb13424f6eae71cd96a1c1a7c1d2c?s=128&d=identicon&r=PG", "display_name": "skarface", "link": "https://stackoverflow.com/users/258130/skarface"}, "is_accepted": true, "score": 0, "last_activity_date": 1460478415, "creation_date": 1460478415, "answer_id": 36579024, "question_id": 36578974, "link": "https://stackoverflow.com/questions/36578974/perl-invert-a-condition/36579024#36579024", "title": "Perl: Invert a Condition", "body": "<p>In general you want to use</p>\n\n<pre><code>if ($fieldA == 123 &amp;&amp; $fieldB != 456)\n</code></pre>\n\n<p>If you wanted to negate both you could use the form</p>\n\n<pre><code>unless ($fieldA == 123 &amp;&amp; $fieldB == 456)\n</code></pre>\n\n<p>Which would evaluate to true if both assertions were false.</p>\n"}, {"comments": [{"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1563912239, "post_id": 55143012, "comment_id": 100856119, "body": "Maybe the ones who down-voted this answer may comment how to improve this answer."}], "tags": [], "owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "is_accepted": false, "score": -2, "last_activity_date": 1552483601, "creation_date": 1552483601, "answer_id": 55143012, "question_id": 36578974, "link": "https://stackoverflow.com/questions/36578974/perl-invert-a-condition/55143012#55143012", "title": "Perl: Invert a Condition", "body": "<p>Maybe you wanted to know this: The negation of</p>\n\n<pre><code>if (A &amp;&amp; !B)\n</code></pre>\n\n<p>in Perl is either</p>\n\n<pre><code>unless (A &amp;&amp; B)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>if (!A || B)\n</code></pre>\n\n<p>The latter is also known as <strong>De Morgan's law</strong>.</p>\n"}], "owner": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 823, "favorite_count": 0, "accepted_answer_id": 36579024, "answer_count": 2, "score": -1, "last_activity_date": 1552483601, "creation_date": 1460478257, "last_edit_date": 1460478271, "question_id": 36578974, "link": "https://stackoverflow.com/questions/36578974/perl-invert-a-condition", "title": "Perl: Invert a Condition", "body": "<p>I want to match on fieldA and everything in fieldB as long as it isn't 456:</p>\n\n<pre><code>if ($fieldA==123 &amp;&amp; $fieldB!==456)\n</code></pre>\n\n<p>What is the syntax I should use for fieldB?   Is it !== or != or I've also seen something like !$fieldB==456. It's really the syntax of fieldB that I'm having issues with.</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1460473462, "post_id": 36577053, "comment_id": 60753138, "body": "Please provide the output of <code>use Data::Dumper; { local $Data::Dumper::Useqq = 1; warn(Dumper($str)); }</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1460473521, "post_id": 36577053, "comment_id": 60753174, "body": "If you had character FFFD, the third would have worked."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 2, "creation_date": 1460477844, "post_id": 36577053, "comment_id": 60756685, "body": "@Pedro Lobito, That character is used to represent something invalid. Putting something invalid in your source code is a poor choice."}, {"owner": {"reputation": 1063, "user_id": 3817503, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cede885ce29e2ee1e9238883f4b44c42?s=128&d=identicon&r=PG&f=1", "display_name": "goe", "link": "https://stackoverflow.com/users/3817503/goe"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460480464, "post_id": 36577053, "comment_id": 60758358, "body": "@ikegami , I understand that but I can&#39;t change anything in the windows app."}, {"owner": {"reputation": 1063, "user_id": 3817503, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cede885ce29e2ee1e9238883f4b44c42?s=128&d=identicon&r=PG&f=1", "display_name": "goe", "link": "https://stackoverflow.com/users/3817503/goe"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460481200, "post_id": 36577053, "comment_id": 60758782, "body": "I used the Data::Dumper and as part of the string I get this \\\\302\\\\201. SO if I apply &quot;s/\\x81/&amp;/g&quot; I get &quot;\ufffd&amp;&quot;. How do I get rid of that \ufffd or \\\\302?"}, {"owner": {"reputation": 1063, "user_id": 3817503, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cede885ce29e2ee1e9238883f4b44c42?s=128&d=identicon&r=PG&f=1", "display_name": "goe", "link": "https://stackoverflow.com/users/3817503/goe"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460481334, "post_id": 36577053, "comment_id": 60758880, "body": "I guess I answered my own question. s/\\x81/&amp;/g | s/\\302//g"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 1205139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dc0ad9e157ebae2d9b588896618fd05?s=128&d=identicon&r=PG", "display_name": "mac-p", "link": "https://stackoverflow.com/users/1205139/mac-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1461577243, "creation_date": 1461577243, "answer_id": 36836907, "question_id": 36577053, "link": "https://stackoverflow.com/questions/36577053/how-to-replace-with-in-perl/36836907#36836907", "title": "How to replace \ufffd with &amp; in perl?", "body": "<p>As ikegami pointed out in their comment, the third solution (<code>$line =~ s/\\x{fffd}/&amp;/g;</code>) is the correct one. If it does not work, one of your assumptions has to be wrong. Two possibilities come to my mind:</p>\n\n<ul>\n<li>Your input does not contain an actual <a href=\"http://www.fileformat.info/info/unicode/char/0fffd/index.htm\" rel=\"nofollow\">Unicode replacement character</a>. It may be the case that your editor renders another sequence of bytes in the same way. You can check it by running <code>hexdump -c</code>. If your input is encoded in UTF-8 (mind the difference between UTF8 and Unicode), you should see the following sequence: <code>357 277 275</code>.</li>\n<li><p>You did not inform perl about the input text encoding. Perl assumes it is a one-byte encoding and thus a regex containing a multibyte character will never match. Please compare the following:</p>\n\n<blockquote>\n  <p>echo '\ufffd' | perl -pe 's/\\x{fffd}/&amp;/'</p>\n  \n  <p>\ufffd</p>\n  \n  <p>echo '\ufffd' | perl -CS -pe 's/\\x{fffd}/&amp;/'</p>\n  \n  <p>&amp;</p>\n</blockquote></li>\n</ul>\n"}], "owner": {"reputation": 1063, "user_id": 3817503, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cede885ce29e2ee1e9238883f4b44c42?s=128&d=identicon&r=PG&f=1", "display_name": "goe", "link": "https://stackoverflow.com/users/3817503/goe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 397, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1461577243, "creation_date": 1460473200, "question_id": 36577053, "link": "https://stackoverflow.com/questions/36577053/how-to-replace-with-in-perl", "title": "How to replace \ufffd with &amp; in perl?", "body": "<p>I have an external window app calling a PERL script with a string that contains \ufffd. I'm trying to detect each such instance and replace it with a &amp;.</p>\n\n<p>I tried using all of these but nothing works:</p>\n\n<pre><code>$line =~ s/\\uFFFD/&amp;/g;\n$line =~ s/&amp;#65533/&amp;/g;\n$line =~ s/\\x{fffd}/&amp;/g;\n$line =~ s/\\xfffd/&amp;/g;\n</code></pre>\n"}, {"tags": ["html", "regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "is_accepted": false, "score": -1, "last_activity_date": 1460474962, "creation_date": 1460474962, "answer_id": 36577765, "question_id": 36576995, "link": "https://stackoverflow.com/questions/36576995/perl-print-regex-matches-from-an-array-to-a-html-td/36577765#36577765", "title": "Perl Print regex matches from an array to a html &lt;td&gt;", "body": "<p>You may need something like:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n\nmy @names = (\"APPLE|0\", \"ORANGE|0\", \"PEAR|1\", \"GRAPE|0\", \"TOMATO|1\");\n\nforeach my $n (@names) {\nwhile ($n =~ m/(.*?)\\|(\\d+)/g) {\n        print \"&lt;tr&gt;&lt;td&gt;$1&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;\\n\";\n        print \"&lt;tr&gt;&lt;td&gt;$2&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;\\n\";\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>&lt;tr&gt;&lt;td&gt;APPLE&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;0&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;ORANGE&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;0&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;PEAR&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;1&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;GRAPE&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;0&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;TOMATO&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;1&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;\n</code></pre>\n\n<hr>\n\n<p><strong>DEMO:</strong></p>\n\n<p><a href=\"http://ideone.com/QPOvzd\" rel=\"nofollow\">http://ideone.com/QPOvzd</a></p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 6, "last_activity_date": 1467625360, "last_edit_date": 1467625360, "creation_date": 1460475553, "answer_id": 36578002, "question_id": 36576995, "link": "https://stackoverflow.com/questions/36576995/perl-print-regex-matches-from-an-array-to-a-html-td/36578002#36578002", "title": "Perl Print regex matches from an array to a html &lt;td&gt;", "body": "<p>This is really very simple</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy @data = qw/\n    APPLE|0\n    ORANGE|0\n    PEAR|1\n    GRAPE|0\n    TOMATO|1\n/;\n\nprint \"&lt;table&gt;\\n\";\nprintf \"    &lt;tr&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td&gt;%s&lt;/td&gt;&lt;/tr&gt;\\n\", split /\\|/ for @data;\nprint \"&lt;/table&gt;\\n\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>&lt;table&gt;\n    &lt;tr&gt;&lt;td&gt;APPLE&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;\n    &lt;tr&gt;&lt;td&gt;ORANGE&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;\n    &lt;tr&gt;&lt;td&gt;PEAR&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;\n    &lt;tr&gt;&lt;td&gt;GRAPE&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;\n    &lt;tr&gt;&lt;td&gt;TOMATO&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n"}], "owner": {"reputation": 554, "user_id": 241593, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3d7e4eed5740c864a766640424643d5b?s=128&d=identicon&r=PG", "display_name": "Jaron787", "link": "https://stackoverflow.com/users/241593/jaron787"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 36578002, "answer_count": 2, "score": 2, "last_activity_date": 1467625360, "creation_date": 1460473055, "question_id": 36576995, "link": "https://stackoverflow.com/questions/36576995/perl-print-regex-matches-from-an-array-to-a-html-td", "title": "Perl Print regex matches from an array to a html &lt;td&gt;", "body": "<p>I have the following code in perl which is outputting each value of an array to a new HTML table cell and table row</p>\n\n<pre><code>print \"&lt;tr&gt;&lt;td&gt;$_&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;\\n\" for @fruitArray;\n</code></pre>\n\n<p>The contents of the array are as follows:</p>\n\n<pre><code>APPLE|0\nORANGE|0\nPEAR|1\nGRAPE|0\nTOMATO|1\n</code></pre>\n\n<p>I want to print everything before the | in the first table cell and then everything after the | in a second table cell on that row</p>\n\n<p>I presume I need to use regex something like:</p>\n\n<pre><code>/([|])\\w+/\n</code></pre>\n\n<p>Just unsure on the exact syntax of printing this in one line</p>\n"}, {"tags": ["perl", "date", "datetime", "format"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1460477412, "post_id": 36576598, "comment_id": 60756373, "body": "What do you mean by <i>not working</i>? If I set <code>$in_date</code> to <code>01&#47;02&#47;2003</code> then your formula for <code>$db_date</code> gives <code>2003-02-01</code> which looks correct. You don&#39;t do anything with your <code>$db_date</code> value; are you forgetting to put it back into <code>@fields</code>?"}, {"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1460478191, "post_id": 36576598, "comment_id": 60756921, "body": "Borodin - YES - that was what I was missing - I forgot to move my &quot;push @data, \\@fields;&quot; to AFTER I manipulated the data.  I also came up with one line to replace those two lines (and get rid of the variable) -  $fields[14] = join &#39;-&#39;, (split m{/}, $fields[14] [2,0,1]);  Now just a test to make sure it&#39;s working as I want..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1460478462, "post_id": 36576598, "comment_id": 60757105, "body": "You should read my answer for a more general solution"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1460478611, "post_id": 36576598, "comment_id": 60757191, "body": "That should be <code>$fields[14] = join &#39;-&#39;, (split &#47;\\&#47;&#47;, $fields[14])[2,0,1]</code> or more concisely <code>$_ = join &#39;-&#39;, (split &#47;\\&#47;&#47;)[2,0,1] for $fields[14]</code>"}, {"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1460479980, "post_id": 36576598, "comment_id": 60758078, "body": "The $_ = join &#39;-&#39;, (split /\\//)[2,0,1] for $fields[14] line worked for all three fields.  Now just have to see whether Time::Piece is available for me to work with on the DATETIME fields."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1460480191, "post_id": 36576598, "comment_id": 60758211, "body": "<code>Time::Piece</code> has been a core module since Perl v5.10, so unless you are running a very old release it should already be installed. If you want to apply the same transform to multiple fields then you should write <code>$_ = join &#39;-&#39;, (split &#47;\\&#47;&#47;)[2,0,1] for @fields[14, 15, 16]</code> substituting the correct indexes, of course"}], "answers": [{"comments": [{"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "edited": false, "score": 0, "creation_date": 1460478460, "post_id": 36578859, "comment_id": 60757102, "body": "See above - you were right - I forgot to move the push @data line to after I was finished manipulating the data.  I will also try Time::Piece: for manipulating the DATETIME fields as you have demonstrated here."}, {"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "edited": false, "score": 0, "creation_date": 1460481546, "post_id": 36578859, "comment_id": 60758993, "body": "I tried this section below     <code>$_ = join &#39;-&#39;, (split &#47;\\&#47;&#47;)[2,0,1] for $fields[14];     $_ = join &#39;-&#39;, (split &#47;\\&#47;&#47;)[2,0,1] for $fields[20];     $_ = join &#39;-&#39;, (split &#47;\\&#47;&#47;)[2,0,1] for $fields[23];</code>  which worked, but <code>$_ = Time::Piece-&gt;strptime($fields[38],&#39;%m&#47;%d&#47;%Y %H:%M&#39;)-&gt;strftime(&#39;%Y-%m-%d %H:%M&#39;);     $_ = Time::Piece-&gt;strptime($fields[39],&#39;%m&#47;%d&#47;%Y %H:%M&#39;)-&gt;strftime(&#39;%Y-%m-%d %H:%M&#39;);     push @data, \\@fields;</code>  ...did not change the dates in the DATETIME fields."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1467625346, "last_edit_date": 1467625346, "creation_date": 1460477924, "answer_id": 36578859, "question_id": 36576598, "link": "https://stackoverflow.com/questions/36576598/reformat-dates-in-perl-for-later-use-in-mysql/36578859#36578859", "title": "Reformat Dates in Perl (for later use in MySQL)", "body": "<p>Rather than using a bunch of string functions, it's better to use the <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow\"><code>Time::Piece</code></a> module to parse and reformat date-time values. It has <code>strptime</code> and <code>strftime</code> methods to do this for you. This short program shows the reformatting of both date-time formats that you mention. <code>ymd</code> is a convenience method, and is equivalent to <code>strftime('%Y-%m-%d')</code></p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse Time::Piece;\n\nmy $in_date = '01/02/2003';\nmy $db_date = Time::Piece-&gt;strptime($in_date, '%m/%d/%Y')-&gt;ymd;\nsay \"$in_date -&gt; $db_date\";\n\n$in_date = '01/02/2003 04:05';\n$db_date = Time::Piece-&gt;strptime($in_date, '%m/%d/%Y %H:%M')-&gt;strftime('%Y-%m-%d %H:%M');\nsay \"$in_date -&gt; $db_date\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>01/02/2003 -&gt; 2003-02-01\n01/02/2003 04:05 -&gt; 2003-02-01 04:05\n</code></pre>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>If you prefer, you could write a subroutine that takes the original date and its format string, together with the desired format. Like this</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse Time::Piece;\n\nmy $in_date = '01/02/2003';\nmy $db_date = date_from_to($in_date, '%m/%d/%Y', '%Y-%m-%d');\nsay \"$in_date -&gt; $db_date\";\n\n$in_date = '01/02/2003 04:05';\n$db_date = date_from_to($in_date, '%m/%d/%Y %H:%M', '%Y-%m-%d %H:%M');\nsay \"$in_date -&gt; $db_date\";\n\nsub date_from_to {\n    my ($date, $from, $to) = @_;\n    Time::Piece-&gt;strptime($date, $from)-&gt;strftime($to);\n}\n</code></pre>\n\n<p>The output is identical to that of the program above</p>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>Regarding your comment, your code should look like this</p>\n\n<pre><code>$_ = join '-', (split /\\//)[2,0,1] for $fields[14, 20, 23];\n\n$_ = Time::Piece-&gt;strptime($_,'%m/%d/%Y %H:%M')-&gt;strftime('%Y-%m-%d %H:%M') for @fields[38,39];\n\npush @data, \\@fields;\n</code></pre>\n\n<p>But I would prefer to see some consistency in the way the date fields are handled, like this</p>\n\n<pre><code>$_ = Time::Piece-&gt;strptime($_, '%m/%d/%Y')-&gt;strftime('%Y-%m-%d') for @fields[14,20,23];\n\n$_ = Time::Piece-&gt;strptime($_, '%m/%d/%Y %H:%M')-&gt;strftime('%Y-%m-%d %H:%M') for @fields[38,39];\n\npush @data, \\@fields\n</code></pre>\n"}], "owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 36578859, "answer_count": 1, "score": 0, "last_activity_date": 1467625346, "creation_date": 1460472091, "last_edit_date": 1460473221, "question_id": 36576598, "link": "https://stackoverflow.com/questions/36576598/reformat-dates-in-perl-for-later-use-in-mysql", "title": "Reformat Dates in Perl (for later use in MySQL)", "body": "<p>I am writing a Perl script to open a .csv file, make some changes, sort it on four fields, then write it back to a new file.  Found out that because this data will then be used to load a MySQL table that I also need to reformat the Date variables.  Currently, Dates are in the file as 00/00/0000 and for MySQL, need to have them formatted as 0000-00-00.  Right now, I simply tried to do it for one field, although I actually need to do it on three Date fields for each line from the .csv file.</p>\n\n<p>This script is running - but it is not reformatting the Date field I'm trying to test this on.</p>\n\n<pre><code>#!/usr/bin/perl/  \n\nuse strict;  \nuse warnings; \nuse Data::Dumper; \n\n#my $filename = '/swpkg/shared/batch_processing/mistints/mistints.csv'; \nmy $filename = 'tested.csv'; \n\nopen my $FH, $filename \n  or die \"Could not read from $filename &lt;$!&gt;, program halting.\"; \n\n# Read the header line.  \nchomp(my $line = &lt;$FH&gt;); \nmy @fields = split(/,/, $line); \n#print \"Field Names:\\n\", Dumper(@fields), $/; \nprint Dumper(@fields), $/;    \nmy @data; \n    # Read the lines one by one.  \n    while($line = &lt;$FH&gt;) { \n\n    # split the fields, concatenate the first three fields, \n    # and add it to the beginning of each line in the file  \n        chomp($line); \n        my @fields = split(/,/, $line); \n        unshift @fields, join '_', @fields[0..2]; \n        push @data, \\@fields;\n        my $in_date = $fields[14];\n        my $db_date = join '-', reverse split /\\D/, $in_date;\n    } \n    close $FH; \n    print \"Unsorted:\\n\", Dumper(@data); #, $/; \n\n    @data = sort { \n        $a-&gt;[0] cmp $b-&gt;[0] || \n        $a-&gt;[20] cmp $b-&gt;[20] || \n        $a-&gt;[23] cmp $b-&gt;[23] || \n        $a-&gt;[26] cmp $b-&gt; [26] \n    } @data; \n\n\n    open my $OFH, '&gt;', '/swpkg/shared/batch_processing/mistints/parsedMistints.csv';\n    #print $OFH Dumper(@data);\n    print $OFH join(',', @$_), $/ for @data;\n    close $OFH;\n\n\n    #print \"Sorted:\\n\", Dumper(@data); \n    #print \"Sorted:\", Dumper(@data);\n\n    exit;\n</code></pre>\n\n<p>The two lines I added to this script (which are not working) are the <strong>my $in_date</strong> and <strong>my $db_date</strong> lines. Now I will also need to reformat two fields (at the end of each line) that are DATETIME, i.e. 10/23/2015 10:47, where I will only need to reformat the date within that field, and I'm not even sure where to begin tackling that one.</p>\n\n<p>And please go easy since I'm a noob with Perl.</p>\n\n<p>EDIT - SORRY, had to re-edit because I didn't notice the first part of my script had not copied.</p>\n"}, {"tags": ["sql-server", "perl", "odbc"], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 1384528, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b97d1efc54138d86429c1167a4dc53b6?s=128&d=identicon&r=PG", "display_name": "jkp", "link": "https://stackoverflow.com/users/1384528/jkp"}, "is_accepted": false, "score": 0, "last_activity_date": 1460552005, "creation_date": 1460552005, "answer_id": 36599026, "question_id": 36575207, "link": "https://stackoverflow.com/questions/36575207/perl-odbc-sql-server-print-messages-returned-in-wrong-order/36599026#36599026", "title": "Perl, ODBC, SQL server, Print messages returned in wrong order", "body": "<p>I solved the problem myself and leave an answer for others to find.</p>\n\n<p>The problem is UnixODBC. Upgrading UnixODBC to the latest version (2.3.4) solved the problem.</p>\n"}], "owner": {"reputation": 45, "user_id": 1384528, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b97d1efc54138d86429c1167a4dc53b6?s=128&d=identicon&r=PG", "display_name": "jkp", "link": "https://stackoverflow.com/users/1384528/jkp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460552005, "creation_date": 1460468756, "last_edit_date": 1460470293, "question_id": 36575207, "link": "https://stackoverflow.com/questions/36575207/perl-odbc-sql-server-print-messages-returned-in-wrong-order", "title": "Perl, ODBC, SQL server, Print messages returned in wrong order", "body": "<p>I use perl 5.16.3, DBD::ODBC 1.47, Unix ODBC 2.2.11, freeTDS 0.91</p>\n\n<p>I create the small program below, run it and get the output:</p>\n\n<pre><code>[unixODBC][FreeTDS][SQL Server]Third\n[unixODBC][FreeTDS][SQL Server]Second\n[unixODBC][FreeTDS][SQL Server]First\n</code></pre>\n\n<p>Why is the lines in reverse order? I have set TDSDUMP and looking in the logfile it seems like the lines are send to me in the correct order.</p>\n\n<p>The tested code is:</p>\n\n<pre><code>use strict;\n\nuse DBI qw(:sql_types);\nuse DBD::ODBC qw(:diags);\n\nmy $dbh = DBI-&gt;connect(\"DBI:ODBC:database\", \"USER\", \"SECRET\");\n$dbh-&gt;{odbc_err_handler} = \\&amp;ODBCMsgHandler;\n$dbh-&gt;do(\"use asra_jkp\" );\n\nmy $statement = \"CREATE PROCEDURE testprint AS print 'First' print 'Second' print 'Third'\";\n$dbh-&gt;do($statement);\n\n$statement = \"EXEC testprint\";\n$dbh-&gt;do($statement);\n\n$statement = \"DROP PROCEDURE testprint\";\n$dbh-&gt;do($statement);\n\nsub ODBCMsgHandler {\n    my ($state, $msg, $native, $rc, $status) = @_;\n    print \"$msg\\n\";\n}\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>I tried on another machine with perl 5.18.2 and DBD::ODBC 1.50. On this machine the print statements come in the right order. </p>\n"}, {"tags": ["perl", "if-statement", "char", "wildcard", "string-comparison"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 4, "creation_date": 1460467468, "post_id": 36574657, "comment_id": 60748046, "body": "<code>\u2026 eq &#39;*&#39;</code> should be fine, and so should <code>\u2026 eq &quot;*&quot;</code>. What makes you think they&#39;re not?"}, {"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1460468889, "post_id": 36574657, "comment_id": 60749315, "body": "You have too many levels of quotation marks.  You want either <code>&#39;*&#39;</code> or <code>&quot;*&quot;</code>, not <code>&#39;&quot;*&quot;&#39;</code>. But without seeing <code>ReadIniFile</code>, it&#39;s hard to know whether your code will work anyway..."}], "answers": [{"comments": [{"owner": {"reputation": 904, "user_id": 2907585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/721827536/picture?type=large", "display_name": "David Gidony", "link": "https://stackoverflow.com/users/2907585/david-gidony"}, "edited": false, "score": 0, "creation_date": 1460547337, "post_id": 36577095, "comment_id": 60790880, "body": "thats what i though., for some reason its not working :("}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 904, "user_id": 2907585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/721827536/picture?type=large", "display_name": "David Gidony", "link": "https://stackoverflow.com/users/2907585/david-gidony"}, "edited": false, "score": 1, "creation_date": 1460567764, "post_id": 36577095, "comment_id": 60807578, "body": "Perl doesn&#39;t have such a type. And even if it did, <code>ReadIniFile</code> wouldn&#39;t be returning one. What&#39;s the output of <code>use Data::Dumper; { local $Data::Dumper::Useqq = 1; warn(Dumper($UsersToConfig)); }</code>?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1460473318, "creation_date": 1460473318, "answer_id": 36577095, "question_id": 36574657, "link": "https://stackoverflow.com/questions/36574657/perl-how-to-compare-to-the-char/36577095#36577095", "title": "Perl - how to compare to the &#39;*&#39; Char?", "body": "<p>You want</p>\n\n<pre><code>if ( $UsersToConfig eq '*' ) {\n</code></pre>\n\n<hr>\n\n<p><code>ReadIniFile($InifileName, \"Users\")</code> produces the string <code>*</code>.</p>\n\n<p>The string literals <code>'*'</code> and <code>\"*\"</code> produce the string <code>*</code>.</p>\n\n<p><code>eq</code> can be used to check if two strings are equal.</p>\n"}], "owner": {"reputation": 904, "user_id": 2907585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/721827536/picture?type=large", "display_name": "David Gidony", "link": "https://stackoverflow.com/users/2907585/david-gidony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "accepted_answer_id": 36577095, "answer_count": 1, "score": -1, "last_activity_date": 1460473318, "creation_date": 1460467371, "last_edit_date": 1592644375, "question_id": 36574657, "link": "https://stackoverflow.com/questions/36574657/perl-how-to-compare-to-the-char", "title": "Perl - how to compare to the &#39;*&#39; Char?", "body": "<p>I'm writting a Perl script that reads from a config.ini file. In the file I want to be able to put under <code>Users</code> either specific names separated by a comma, or a wildcard</p>\n<h3>example:</h3>\n<pre class=\"lang-none prettyprint-override\"><code>Users=Ninja,David,Moshe\n</code></pre>\n<p>or</p>\n<pre class=\"lang-none prettyprint-override\"><code>Users=*\n</code></pre>\n<p>In my code i want to check if <code>users == *</code> but I can't find the correct syntax.</p>\n<pre><code>my $UsersToConfig = &amp;ReadIniFile($InifileName , &quot;Users&quot;);\n\nif ( $UsersToConfig eq '&quot;*&quot;' ) {\n    @safes = @allSafes\n}\nelse {\n    @safes = split /,/, $ConfigOnSafes;\n};\n</code></pre>\n<p>I have also tried : <code>'*'</code>, <code>'&quot;\\*&quot;'</code>, <code>&quot;\\*&quot;</code>, <code>'\\*'</code> etc. but the if result is always wrong.</p>\n<p>Any ideas?</p>\n"}, {"tags": ["regex", "perl", "unicode"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460465536, "post_id": 36573538, "comment_id": 60746286, "body": "<a href=\"https://metacpan.org/pod/Config::Simple#INI-FILE\" rel=\"nofollow noreferrer\">Config::Simple</a> should be able to read INF files. They follow the syntax of INI files. But I am not sure if it reads the things that look like comments correctly. I&#39;d give it a try to avoid this problem all together."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460482166, "post_id": 36573749, "comment_id": 60759378, "body": "The problem is that his text is encoded using UTF-16le. This won&#39;t help."}], "tags": [], "owner": {"reputation": 4663, "user_id": 3967089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d00715119003023d62918dcc603ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Calle Dybedahl", "link": "https://stackoverflow.com/users/3967089/calle-dybedahl"}, "is_accepted": false, "score": 1, "last_activity_date": 1460465245, "creation_date": 1460465245, "answer_id": 36573749, "question_id": 36573538, "link": "https://stackoverflow.com/questions/36573538/how-to-make-perl-regexes-matches-ascii-and-unicode/36573749#36573749", "title": "How to make perl regexes matches ASCII and Unicode", "body": "<p>1) Make sure you have Perl 5.14 or newer.</p>\n\n<p>2) Read the <code>perlre</code> manpage, particularly the section titled \"Character set modifiers\"</p>\n\n<p>3) Use the /a, /u, /l or /d flag on your regexp depending on which behavior best suits your need.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1467625378, "last_edit_date": 1467625378, "creation_date": 1460470789, "answer_id": 36576068, "question_id": 36573538, "link": "https://stackoverflow.com/questions/36573538/how-to-make-perl-regexes-matches-ascii-and-unicode/36576068#36576068", "title": "How to make perl regexes matches ASCII and Unicode", "body": "<p>You can't just \"ignore\" null characters. That way any non-ASCII characters in the data won't be interpreted properly</p>\n\n<p>It sounds like you're trying to parse UTF-16BE-encoded data without decoding it. Use the core <a href=\"https://metacpan.org/pod/Encode\" rel=\"nofollow\"><code>Encode</code></a> module to decode it into Perl internal representation, like this</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse Encode;\n\nmy $bytes = \"\\0[\\0x\\0x\\0x\\0]\";\n\nmy $string = decode('UTF-16BE', $bytes, Encode::FB_CROAK);\n\nsay $string;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>[xxx]\n</code></pre>\n\n<p>If I'm wrong about the encoding then please show a dump of your input string, using</p>\n\n<pre><code>use Data::Dumper;\n$Data::Dumper::Useqq = 1;\n$Data::Dumper::Terse = 1;\n\nprint Dumper $bytes;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1460482402, "creation_date": 1460482402, "answer_id": 36580288, "question_id": 36573538, "link": "https://stackoverflow.com/questions/36573538/how-to-make-perl-regexes-matches-ascii-and-unicode/36580288#36580288", "title": "How to make perl regexes matches ASCII and Unicode", "body": "<p>Always decode your inputs and encode your outputs. Specifically, change</p>\n\n<pre><code>open(my $fh, '&lt;', $qfn)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>open(my $fh, '&lt;:encoding(UTF-16le)', $qfn)\n</code></pre>\n\n<p>This will decode the text from bytes into code points, allowing your matches to work.</p>\n"}], "owner": {"reputation": 2025, "user_id": 422567, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/06bb842dfa9b53b5ac3a8d7e001f469c?s=128&d=identicon&r=PG", "display_name": "MUY Belgium", "link": "https://stackoverflow.com/users/422567/muy-belgium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1467625378, "creation_date": 1460464732, "question_id": 36573538, "link": "https://stackoverflow.com/questions/36573538/how-to-make-perl-regexes-matches-ascii-and-unicode", "title": "How to make perl regexes matches ASCII and Unicode", "body": "<p>I have a program to parse inf files of Windows Printer drivers.</p>\n\n<p>System works fine as long as the file is written ASCII.  </p>\n\n<p>So, for exemple, regex <code>m/^\\[([^\\]\\]*)$/</code> works fine to match sections headers.</p>\n\n<p>In the case of a Unicode line, the line matches <code>m/^\\0\\[([^\\]\\0\\]*)$/</code> and certainly not the first.  So, file is not correctly parsed.</p>\n\n<p>How to make perl regexes ignore <code>\\0</code> charachters? </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1460460965, "post_id": 36571854, "comment_id": 60742593, "body": "is it Java language?"}], "answers": [{"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 0, "last_activity_date": 1460461179, "creation_date": 1460461179, "answer_id": 36572224, "question_id": 36571854, "link": "https://stackoverflow.com/questions/36571854/replace-mutiline-string-from-file-using-perl/36572224#36572224", "title": "Replace mutiline String from file using Perl", "body": "<p>Try to put two substitution for to do it.</p>\n\n<pre><code>$curUrl =\"select * from emp_data\" ;\n$curUrl = quotemeta $curUrl;\n$newVariable = \"Query1\";\n$data = 'String sql=\"select * from \"+\n         \"emp_data\";';\n\n$data=~s/\"|\\+|\\n\\s+//g;  # Here i replace the \" + and \\n\\s character with empty.\n\n$data =~s/$curUrl/$newVariable/g;\nprint $data;    \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2087, "user_id": 6010343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D3z4z.jpg?s=128&g=1", "display_name": "Jay jargot", "link": "https://stackoverflow.com/users/6010343/jay-jargot"}, "is_accepted": false, "score": 0, "last_activity_date": 1460462446, "last_edit_date": 1460462446, "creation_date": 1460461828, "answer_id": 36572466, "question_id": 36571854, "link": "https://stackoverflow.com/questions/36571854/replace-mutiline-string-from-file-using-perl/36572466#36572466", "title": "Replace mutiline String from file using Perl", "body": "<p>You might consider using this tested <code>sed</code> script:</p>\n\n<pre><code>sed -n '\n:1\n/^.*[+][ ]*$/ {\n  h;\n  :2\n  n; H; /^.*[+][ ]*$/ {\n    b2\n  }\n  x \n  s/[+\\n\\t\\r]//g\n  s/[\"][[:space:][:blank:]]*[\"]//g\n  s/[\"][[:space:][:blank:]]*select [*] from emp_data[[:space:][:blank:]]*[\"]/Query1/\n   p; x;\n   b1;\n}'\n</code></pre>\n\n<p>The test:</p>\n\n<pre><code>sed -n '\n:1\n/^.*[+][ ]*$/ {\n  h;\n  :2\n  n; H; /^.*[+][ ]*$/ {\n    b2\n  }\n  x \n  s/[+\\n\\t\\r]//g\n  s/[\"][[:space:][:blank:]]*[\"]//g\n  s/[\"][[:space:][:blank:]]*select [*] from emp_data[[:space:][:blank:]]*[\"]/Query1/\n   p; x;\n   b1;\n}' myfile.txt\n\nString sql=Query1;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 0, "last_activity_date": 1460510170, "last_edit_date": 1460510170, "creation_date": 1460465460, "answer_id": 36573854, "question_id": 36571854, "link": "https://stackoverflow.com/questions/36571854/replace-mutiline-string-from-file-using-perl/36573854#36573854", "title": "Replace mutiline String from file using Perl", "body": "<pre><code>use strict;\nuse warnings; \nuse 5.020;\nuse autodie;\nuse Data::Dumper;\n\n# Here, the variables $/, $^I, and @ARGV either have their default values\n# or some other values that were set by code appearing here.\n\n{\n    local $/ = \";\";   #local =&gt; temporarily change the value of this variable until the closing parenthesis of this block is encountered\n    local $^I = \".bak\";\n    local @ARGV = 'data.txt';\n\n    while (&lt;&gt;) {\n        my $perl_statement = $_;\n        $perl_statement =~ s/sql = .*/sql = Query1/xms ;\n        print $perl_statement;  #This is redirected into the file.\n    }\n}  #Automatically restores the previous values for $/, $^I, and @ARGV.\n</code></pre>\n\n<blockquote>\n  <p><code>$/</code>    => Input line separator (default => \"\\n\") .  Causes <code>&lt;$INFILE&gt;</code> to read up to and including the character(s) specified as one line.<br>\n  <code>$^I</code>   => If set to a string (default => undef), then makes the diamond operator <em>magical</em>, which allows you to seemingly edit a file inplace.  Any print statements will get written to a new file, whose name will be the same as the original file.  If you write <code>$^I = \".bak\"</code>, then the original file will be stored in a file with original file name plus a \".bak\" extension.  A blank string means no backup.<br>\n  <code>@ARGV</code>   => The diamond operator reads from files in this array.</p>\n</blockquote>\n\n<p>Sample run:</p>\n\n<pre><code>~/pperl_programs$ cat data.txt\nString sql=\"select * from \"+\n             \"emp_data\";\nhello word=\"select * from \"+\n             \"emp_data\";\n\n~/pperl_programs$ perl 1.pl \n\n~/pperl_programs$ cat data.txt\nString sql = Query1\nhello word=\"select * from \"+\n             \"emp_data\";\n</code></pre>\n\n<p>Or, maybe you want to replace all occurrences of the pattern:</p>\n\n<pre><code>use strict;\nuse warnings; \nuse 5.020;\nuse autodie;\nuse Data::Dumper;\n\nmy $pattern = q{\"select * from \"+\n             \"emp_data\"};\n\n{\n    local $/ = \";\"; \n    local $^I = \"\";\n    local @ARGV = 'data.txt';\n\n    while (&lt;&gt;) {\n        my $perl_statement = $_;\n        $perl_statement =~ s/= \\Q$pattern/ = Query1/xms;\n        print $perl_statement;\n    }\n}\n</code></pre>\n\n<p>Sample run:</p>\n\n<pre><code>~/pperl_programs$ cat data.txt\nString sql=\"select * from \"+\n             \"emp_data\";\nhello word=\"select * from \"+\n             \"emp_data\";\n\n~/pperl_programs$ perl 1.pl \n\n~/pperl_programs$ cat data.txt \nString sql = Query1;\nhello word = Query1;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5049335"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1460510170, "creation_date": 1460460269, "question_id": 36571854, "link": "https://stackoverflow.com/questions/36571854/replace-mutiline-string-from-file-using-perl", "title": "Replace mutiline String from file using Perl", "body": "<p>In my file I have line like</p>\n\n<pre><code>String sql=\"select * from \"+\n             \"emp_data\";\n</code></pre>\n\n<p>I want to replace  it like</p>\n\n<pre><code>String sql = Query1;\n</code></pre>\n\n<p>How can i do it using perl</p>\n\n<p>I was using </p>\n\n<pre><code>$curUrl =\"select * from emp_data\" ;\n$curUrl = quotemeta $curUrl;\n$newVariable = \"Query1\";\n$data =~ s/$curUrl/$newVariable/g;\n</code></pre>\n\n<p>which was working for single line . Not for broken one</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460461158, "post_id": 36568162, "comment_id": 60742757, "body": "Take a look at <a href=\"http://stackoverflow.com/questions/187587/looking-for-a-windows-equivalent-of-the-unix-tail-command#comment5036679_187826\" title=\"looking for a windows equivalent of the unix tail command%23comment5036679_187826\">stackoverflow.com/questions/187587/&hellip;</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1460466109, "post_id": 36568162, "comment_id": 60746786, "body": "The most efficient way is to install the module that you&#39;re missing."}, {"owner": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1460628195, "post_id": 36568162, "comment_id": 60835565, "body": "@DaveCross Thanks and I understand too but that is a remote server, not totally handled by me."}, {"owner": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460628824, "post_id": 36568162, "comment_id": 60836011, "body": "@simbabque sure that post make sense. But if I could have installed anything on machine I would have done the module itself"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460629014, "post_id": 36568162, "comment_id": 60836136, "body": "My link didn&#39;t point to any answer, but one specific comment that gives you a batch file."}, {"owner": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460629435, "post_id": 36568162, "comment_id": 60836410, "body": "@simbabque thats cool, Thanks, Will try that too. I thought you pointed to the marked answer of that question which said about installing GNU utilities. Sorry about that. Thanks again."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460629825, "post_id": 36568162, "comment_id": 60836662, "body": "Nope. Linking to comments is a bit weird, but it appears at the very top of the browser."}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 2623828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234bdf185932e608ca93cbb2e021cfe4?s=128&d=identicon&r=PG", "display_name": "themattkellyshow", "link": "https://stackoverflow.com/users/2623828/themattkellyshow"}, "edited": false, "score": 0, "creation_date": 1460451578, "post_id": 36568265, "comment_id": 60735940, "body": "Haha, it looks like we were typing the same answer at the same time. Nice call with the fatpacking."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 175, "user_id": 2623828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234bdf185932e608ca93cbb2e021cfe4?s=128&d=identicon&r=PG", "display_name": "themattkellyshow", "link": "https://stackoverflow.com/users/2623828/themattkellyshow"}, "edited": false, "score": 1, "creation_date": 1460451615, "post_id": 36568265, "comment_id": 60735971, "body": "@MattKelly actually no, this is a different solution from yours. Backticks are not the same a <code>system</code>."}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1460454042, "post_id": 36568265, "comment_id": 60737675, "body": "You could also use the <code>qx</code> operator e.g. <code>my $last_line = qx!tail -n 1 $filename!;</code>"}, {"owner": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "edited": false, "score": 0, "creation_date": 1460454430, "post_id": 36568265, "comment_id": 60737981, "body": "@simbabque I am getting below error, please suggest: &#39;tail&#39; is not recognized as an internal or external command, operable program or batch file."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "edited": false, "score": 1, "creation_date": 1460455826, "post_id": 36568265, "comment_id": 60739066, "body": "@STJ tail command for linux not for windows. So it shows <code>tail&#39; is not recognized as an internal or external command</code>"}, {"owner": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "edited": false, "score": 0, "creation_date": 1460456538, "post_id": 36568265, "comment_id": 60739560, "body": "Ohh, I missed the basic in trouble. Please answer this question for windows."}, {"owner": {"reputation": 1677, "user_id": 1816138, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ed2ddfe3ce5e547c20fafa0c82b3e970?s=128&d=identicon&r=PG", "display_name": "Sherwood Botsford", "link": "https://stackoverflow.com/users/1816138/sherwood-botsford"}, "edited": false, "score": 0, "creation_date": 1618837514, "post_id": 36568265, "comment_id": 118715914, "body": "I would expect windows with the cygwin and/or posix environments to support &quot;tail&quot;"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 7, "last_activity_date": 1460460804, "last_edit_date": 1460460804, "creation_date": 1460451391, "answer_id": 36568265, "question_id": 36568162, "link": "https://stackoverflow.com/questions/36568162/how-do-i-read-the-last-line-of-a-file-with-a-bare-perl-on-windows/36568265#36568265", "title": "How do I read the last line of a file with a bare Perl on Windows?", "body": "<h1>This answer does not work on Windows.</h1>\n\n<hr>\n\n<p>If this is a one-off thing, simply do a system call and use <code>tail</code>.</p>\n\n<pre><code>my $last_line = `tail -n 1 $filename`;\n</code></pre>\n\n<p>If you need to do this a lot, think about installing into a local-lib on the remote machine, or <a href=\"https://metacpan.org/pod/App::FatPacker\" rel=\"nofollow\">fatpacking</a> File::ReadBackwards into your script before you deploy it.</p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 7, "creation_date": 1460451583, "post_id": 36568306, "comment_id": 60735944, "body": "<code>system</code> <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">returns the exit code</a> of the program it runs, <b>not the output</b>."}], "tags": [], "owner": {"reputation": 175, "user_id": 2623828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234bdf185932e608ca93cbb2e021cfe4?s=128&d=identicon&r=PG", "display_name": "themattkellyshow", "link": "https://stackoverflow.com/users/2623828/themattkellyshow"}, "is_accepted": false, "score": -1, "last_activity_date": 1460451482, "creation_date": 1460451482, "answer_id": 36568306, "question_id": 36568162, "link": "https://stackoverflow.com/questions/36568162/how-do-i-read-the-last-line-of-a-file-with-a-bare-perl-on-windows/36568306#36568306", "title": "How do I read the last line of a file with a bare Perl on Windows?", "body": "<p>I found the following <a href=\"http://www.perlmonks.org/?node_id=255837\" rel=\"nofollow\">here</a>.</p>\n\n<p>Try this on for size:</p>\n\n<pre><code>system tail =&gt; -1 =&gt; $file;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1460456847, "post_id": 36570096, "comment_id": 60739762, "body": "Reading the whole file into an array, just to pop the last line seems wasteful to me."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1460457241, "post_id": 36570096, "comment_id": 60740013, "body": "@Sobrique Yep its correct it is more memory consume. I give the other option by using while loop."}, {"owner": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "edited": false, "score": 0, "creation_date": 1460628060, "post_id": 36570096, "comment_id": 60835465, "body": "@mkHun Thanks, along with getting expected output, using file handler is effective too."}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 0, "last_activity_date": 1460631560, "last_edit_date": 1460631560, "creation_date": 1460455747, "answer_id": 36570096, "question_id": 36568162, "link": "https://stackoverflow.com/questions/36568162/how-do-i-read-the-last-line-of-a-file-with-a-bare-perl-on-windows/36570096#36570096", "title": "How do I read the last line of a file with a bare Perl on Windows?", "body": "<p>You are in windows. I don't know what are the inbuild command for windows but you try something like as follows</p>\n\n<p>Iterate the file handler with while loop and store the output in variable then print it</p>\n\n<pre><code>open my $fh ,\"&lt;\",\"file.txt\";\nmy $last_line;\n$last_line = $_,while (&lt;$fh&gt;);\nprint $last_line;\n</code></pre>\n\n<p>or else  try the follow but these are consume more memory.</p>\n\n<pre><code>open my $fh ,\"&lt;\",\"file.txt\" or die \"error opening $!\";\nmy @ar = &lt;$fh&gt;;\nprint $ar[-1];\n</code></pre>\n\n<p>Or else</p>\n\n<pre><code>open my $fh ,\"&lt;\",\"file.txt\" or die \"error opening $!\";\nmy @ar = &lt;$fh&gt;;\nprint pop @ar;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1460781059, "post_id": 36636229, "comment_id": 60912931, "body": "Try to use lexical file handle."}, {"owner": {"reputation": 305, "user_id": 1226579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc2b48995cb9af6ff5215d099adc0ad?s=128&d=identicon&r=PG", "display_name": "kchinger", "link": "https://stackoverflow.com/users/1226579/kchinger"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1460781539, "post_id": 36636229, "comment_id": 60913026, "body": "@mkHun I&#39;m not sure what you mean. $input <i>is</i> a lexical file handle."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1460781631, "post_id": 36636229, "comment_id": 60913041, "body": "Lexical file handle have thee arguments. <code>open my $fh,&quot;&lt;&quot;,&quot;filename&quot;;</code>. The reason of the lexical file handle is, no need to close the file."}, {"owner": {"reputation": 305, "user_id": 1226579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc2b48995cb9af6ff5215d099adc0ad?s=128&d=identicon&r=PG", "display_name": "kchinger", "link": "https://stackoverflow.com/users/1226579/kchinger"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1460781816, "post_id": 36636229, "comment_id": 60913081, "body": "@mkHun That&#39;s not what lexical file handle means. Lexical just means not global in scope, which my $input is. The second argument is optional. It&#39;s perfectly valid and correct Perl. <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/open.html</a>"}], "tags": [], "owner": {"reputation": 305, "user_id": 1226579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc2b48995cb9af6ff5215d099adc0ad?s=128&d=identicon&r=PG", "display_name": "kchinger", "link": "https://stackoverflow.com/users/1226579/kchinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1460680009, "last_edit_date": 1460680009, "creation_date": 1460679378, "answer_id": 36636229, "question_id": 36568162, "link": "https://stackoverflow.com/questions/36568162/how-do-i-read-the-last-line-of-a-file-with-a-bare-perl-on-windows/36636229#36636229", "title": "How do I read the last line of a file with a bare Perl on Windows?", "body": "<p>If you know something about the files (if the lines are relatively equal lengths, or if each line is at most X bytes, or whatever) you might be able to do something with seek. For example, if the last line is at most 40 bytes or so, you can do the below. If you know the file is 100 MB (using File::stat, which is core) you could average the first 10 lines and see how many bytes they are, and maybe multiply that by 5 just in case and seek back that far and then do the loop.  You might have to read 15 or 20 lines, but that's not bad.</p>\n\n<pre><code>open(my $input,\"input2.txt\")||die \"can't open the file\";\n\nmy $last_line;\nseek ($input, -50, 2);\nwhile(&lt;$input&gt;)\n{\n    $last_line = $_;\n}\n\nprint \"$last_line\\n\";\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2079, "favorite_count": 0, "accepted_answer_id": 36570096, "answer_count": 4, "score": 0, "last_activity_date": 1460680009, "creation_date": 1460451137, "last_edit_date": 1460461244, "question_id": 36568162, "link": "https://stackoverflow.com/questions/36568162/how-do-i-read-the-last-line-of-a-file-with-a-bare-perl-on-windows", "title": "How do I read the last line of a file with a bare Perl on Windows?", "body": "<p>I need to read only the last line of a file, without using File:ReadBackwards module  as it is not installed on my remote server(windows) where I need to execute the script.\nKindly suggest the most efficient way to read only the last line.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3593, "user_id": 5280543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea2c2b205d1c4b331bbc78720115121?s=128&d=identicon&r=PG", "display_name": "Michael Albers", "link": "https://stackoverflow.com/users/5280543/michael-albers"}, "edited": false, "score": 0, "creation_date": 1460432379, "post_id": 36563197, "comment_id": 60726614, "body": "See Date::Manip (<a href=\"http://search.cpan.org/~sbeck/Date-Manip-6.53/lib/Date/Manip.pod\" rel=\"nofollow noreferrer\">search.cpan.org/~sbeck/Date-Manip-6.53/lib/Date/Manip.pod</a>)"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 2, "creation_date": 1460432721, "post_id": 36563197, "comment_id": 60726713, "body": "02-02-2016 day is Tues day"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1460439198, "post_id": 36563197, "comment_id": 60728667, "body": "@Christopher Ok without module it is possible. What have tried so far.?"}, {"owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "edited": false, "score": 0, "creation_date": 1460445257, "post_id": 36563197, "comment_id": 60731744, "body": "The input format always like that <code>dd-mm-yyyy</code>?"}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 1, "creation_date": 1460445952, "post_id": 36563197, "comment_id": 60732183, "body": "If you want a mathematical way of determining the day of week number, ( which you could then use to subscript into an array of day names ) look up John Conway&#39;s Doomsday Algorithm."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 3593, "user_id": 5280543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea2c2b205d1c4b331bbc78720115121?s=128&d=identicon&r=PG", "display_name": "Michael Albers", "link": "https://stackoverflow.com/users/5280543/michael-albers"}, "edited": false, "score": 0, "creation_date": 1460466025, "post_id": 36563197, "comment_id": 60746698, "body": "@MichaelAlbers - Why would you recommend a horrible old module like Date::Manip when Time::Piece is included with Perl?"}, {"owner": {"reputation": 3593, "user_id": 5280543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea2c2b205d1c4b331bbc78720115121?s=128&d=identicon&r=PG", "display_name": "Michael Albers", "link": "https://stackoverflow.com/users/5280543/michael-albers"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1460497265, "post_id": 36563197, "comment_id": 60768018, "body": "@DaveCross Two reasons. One, I&#39;ve never considered Date::Manip horrible. Two, I&#39;ve never heard of Time::Piece before. About 1% the former, 99% the latter."}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 14, "last_activity_date": 1460433371, "creation_date": 1460433371, "answer_id": 36563354, "question_id": 36563197, "link": "https://stackoverflow.com/questions/36563197/getting-a-day-from-date-in-perl/36563354#36563354", "title": "Getting a Day from Date in Perl", "body": "<blockquote>\n  <p><em>Note: Without using any modules.</em></p>\n</blockquote>\n\n<p>Calendaring is hard. No, calendaring is REALLY HARD! It's very easy to get wrong. Use a module.</p>\n\n<p>Fortunately there's a built in module to do this, <a href=\"http://metacpan.org/pod/Time::Piece\" rel=\"noreferrer\">Time::Piece</a>.  It has <a href=\"http://linux.die.net/man/3/strptime\" rel=\"noreferrer\">strptime</a> to parse the date into an object.  From there you can ask it a great number of things.</p>\n\n<pre><code>use v5.10;\nuse strict;\nuse warnings;\nuse Time::Piece;\n\nmy $time = Time::Piece-&gt;strptime(\"02-02-2016\", \"%d-%m-%Y\");\nsay $time-&gt;fullday;\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 4984532, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10206894508110870/picture?type=large", "display_name": "Christopher Chin", "link": "https://stackoverflow.com/users/4984532/christopher-chin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 36563354, "answer_count": 1, "score": 0, "last_activity_date": 1460433371, "creation_date": 1460432188, "last_edit_date": 1460432939, "question_id": 36563197, "link": "https://stackoverflow.com/questions/36563197/getting-a-day-from-date-in-perl", "title": "Getting a Day from Date in Perl", "body": "<p>Is there a way to find out day of the week when provided a date. How would I code this in Perl? </p>\n\n<p>For example</p>\n\n<p>Given 02-02-2016(dd-mm-yyyy) outputs Friday\nNote: Without using any modules.</p>\n"}, {"tags": ["regex", "perl", "pattern-matching"], "comments": [{"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1460457594, "post_id": 36562429, "comment_id": 60740254, "body": "How would warnings help?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1460461249, "post_id": 36562429, "comment_id": 60742835, "body": "@ysth, Why do you assume they&#39;re not on? While that construct doesn&#39;t have the desired effect, it&#39;s quite valid, and it doesn&#39;t warn."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460473162, "post_id": 36562429, "comment_id": 60752882, "body": "@ CJ7: warnings always help.  @ikegami: the &quot;seems to match newline&quot; makes me think it may not be matching \\v, and they may be using an old perl that doesn&#39;t support \\v."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2705585"}, "edited": false, "score": 2, "creation_date": 1460427768, "post_id": 36562533, "comment_id": 60725373, "body": "An example of string would be helpful."}], "tags": [], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "is_accepted": false, "score": 0, "last_activity_date": 1460427669, "creation_date": 1460427669, "answer_id": 36562533, "question_id": 36562429, "link": "https://stackoverflow.com/questions/36562429/how-to-match-only-vertical-tab/36562533#36562533", "title": "How to match only vertical tab?", "body": "<p>From <a href=\"http://perldoc.perl.org/perlrebackslash.html\" rel=\"nofollow\">perlrebackslash</a>:</p>\n\n<pre><code>$str =~ /\\cK/;  # Matches if $str contains a vertical tab (control-K).\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1460461382, "last_edit_date": 1460461382, "creation_date": 1460461043, "answer_id": 36572157, "question_id": 36562429, "link": "https://stackoverflow.com/questions/36562429/how-to-match-only-vertical-tab/36572157#36572157", "title": "How to match only vertical tab?", "body": "<p><code>\\v</code> doesn't just match line tabulations (vertical tabs); it matches all vertical whitespace characters.</p>\n\n<pre><code>$ unichars '\\v' | cat\n ---- U+000A LINE FEED\n ---- U+000B LINE TABULATION\n ---- U+000C FORM FEED\n ---- U+000D CARRIAGE RETURN\n ---- U+0085 NEXT LINE\n ---- U+2028 LINE SEPARATOR\n ---- U+2029 PARAGRAPH SEPARATOR\n</code></pre>\n\n<p>You want to match U+000B LINE TABULATION exclusively. You can use any of the following:</p>\n\n<pre><code>\\x0B\n\\x{B}\n\\x{0B}\n\\x{000B}\n\\x{0000B}\n\\013\n\\cK\n\\N{U+B}\n\\N{U+000B}\n\\N{U+0000B}\n\\N{LINE TABULATION}\n\\N{VT}\n</code></pre>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1533, "favorite_count": 2, "accepted_answer_id": 36572157, "answer_count": 2, "score": 0, "last_activity_date": 1460461382, "creation_date": 1460426929, "question_id": 36562429, "link": "https://stackoverflow.com/questions/36562429/how-to-match-only-vertical-tab", "title": "How to match only vertical tab?", "body": "<p>I am trying to strip out vertical tab characters. I have tried using <code>\\v</code> but this seems to match newline characters as well:</p>\n\n<p><code>$str =~ s/\\v/ /;</code></p>\n\n<p>How can I match only vertical tab characters in perl?</p>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 3593, "user_id": 5280543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea2c2b205d1c4b331bbc78720115121?s=128&d=identicon&r=PG", "display_name": "Michael Albers", "link": "https://stackoverflow.com/users/5280543/michael-albers"}, "edited": false, "score": 0, "creation_date": 1460429179, "post_id": 36562272, "comment_id": 60725759, "body": "You look to have a couple of problems here. 1. The RE matching against <code>$line</code> is going to match &quot;0/9999 (0%)&quot;, so when you split on &#39;/&#39; you&#39;ll get &quot;0&quot; and &quot;9999 (0%)&quot;. 2. You put a return inside the foreach loop. You&#39;ll return the first value, in this case &quot;0&quot;...and that&#39;s it. Not sure what you&#39;re trying to return. If it&#39;s a list, why not just return @values?"}, {"owner": {"reputation": 173, "user_id": 3587025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb16be8b88ea27250fed2644f9e370?s=128&d=identicon&r=PG&f=1", "display_name": "user3587025", "link": "https://stackoverflow.com/users/3587025/user3587025"}, "reply_to_user": {"reputation": 3593, "user_id": 5280543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea2c2b205d1c4b331bbc78720115121?s=128&d=identicon&r=PG", "display_name": "Michael Albers", "link": "https://stackoverflow.com/users/5280543/michael-albers"}, "edited": false, "score": 0, "creation_date": 1460429366, "post_id": 36562272, "comment_id": 60725814, "body": "@MichaelAlbers i want to return 0 ,9999 and 0% separately."}, {"owner": {"reputation": 3593, "user_id": 5280543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea2c2b205d1c4b331bbc78720115121?s=128&d=identicon&r=PG", "display_name": "Michael Albers", "link": "https://stackoverflow.com/users/5280543/michael-albers"}, "edited": false, "score": 0, "creation_date": 1460429633, "post_id": 36562272, "comment_id": 60725878, "body": "The only way I know to do that in Perl is by returning a list. You can&#39;t return from a function multiple times. What if you try this: <code>if ($line =~ &#47;(\\d+)\\&#47;(\\d+)[^(]*\\((\\d+%)\\)&#47;) { return ($1, $2, $3);}</code>. I think that might get you what you want (note, I didn&#39;t test this, but I think it should be close to correct.)"}, {"owner": {"reputation": 173, "user_id": 3587025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb16be8b88ea27250fed2644f9e370?s=128&d=identicon&r=PG&f=1", "display_name": "user3587025", "link": "https://stackoverflow.com/users/3587025/user3587025"}, "reply_to_user": {"reputation": 3593, "user_id": 5280543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea2c2b205d1c4b331bbc78720115121?s=128&d=identicon&r=PG", "display_name": "Michael Albers", "link": "https://stackoverflow.com/users/5280543/michael-albers"}, "edited": false, "score": 0, "creation_date": 1460430101, "post_id": 36562272, "comment_id": 60725994, "body": "foreach my $line ( @stdout ){      if ($line =~ /(\\d+)\\/(\\d+)[^(]*&#40;(\\d+%)&#41;/)){                      } }  return ($1, $2, $3);  }"}, {"owner": {"reputation": 173, "user_id": 3587025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb16be8b88ea27250fed2644f9e370?s=128&d=identicon&r=PG&f=1", "display_name": "user3587025", "link": "https://stackoverflow.com/users/3587025/user3587025"}, "reply_to_user": {"reputation": 3593, "user_id": 5280543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea2c2b205d1c4b331bbc78720115121?s=128&d=identicon&r=PG", "display_name": "Michael Albers", "link": "https://stackoverflow.com/users/5280543/michael-albers"}, "edited": false, "score": 0, "creation_date": 1460430150, "post_id": 36562272, "comment_id": 60726002, "body": "@MichaelAlbers this doesn&#39;t seem to work"}], "answers": [{"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": true, "score": 0, "last_activity_date": 1460430132, "creation_date": 1460430132, "answer_id": 36562867, "question_id": 36562272, "link": "https://stackoverflow.com/questions/36562272/perl-regular-expression-with-split-function/36562867#36562867", "title": "Perl regular expression with split function", "body": "<pre><code>sub test_output {\n\n    my $self = shift;\n\n    $self-&gt;{output_obj}-&gt;_exec('enter the command here');\n\n    my @output = $self-&gt;{output_obj}-&gt;out();\n\n    foreach my $line (@output) {\n        if ($line =~ m/(\\d+)\\/(\\d+)\\s\\((\\d+%)\\)/) {\n            my ($lost, $total, $percentage) = ($1, $2, $3);\n\n            return ($lost, $total, $percentage);\n        }\n    }\n}\n\nmy ($lost, $total, $percentage) = $self-&gt;{'exec_obj'}-&gt;test_output()\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 3587025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb16be8b88ea27250fed2644f9e370?s=128&d=identicon&r=PG&f=1", "display_name": "user3587025", "link": "https://stackoverflow.com/users/3587025/user3587025"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 36562867, "answer_count": 1, "score": 0, "last_activity_date": 1460430132, "creation_date": 1460426028, "last_edit_date": 1460428125, "question_id": 36562272, "link": "https://stackoverflow.com/questions/36562272/perl-regular-expression-with-split-function", "title": "Perl regular expression with split function", "body": "<p>I have written a function to parse the output of the command that is executed on a linux box. I want the function to parse the command output and return the output to the calling function.  I want to parse the output to get <code>0/9999 (0%)</code> and return 0 and 9999. (Note: these numbers are not static. It could be any number of digits. For example <code>4567/100000 (45%)</code>). The regex that I have used is incorrect, I guess. I'm getting the output as 0.</p>\n\n<p>Command output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Connecting to host 8.2.0.2, port 7775\n[  4] local 9.1.1.2 port 37675 connected to 8.2.0.2 port 7775\n[ ID] Interval           Transfer     Bandwidth       Total Datagrams\n[  4]   0.00-2.40   sec  5.49 MBytes  19.2 Mbits/sec  10000\n- - - - - - - - - - - - - - - - - - - - - - - - -\n[ ID] Interval           Transfer     Bandwidth       Jitter    Lost/Total Datagrams\n[  4]   0.00-2.40   sec  5.49 MBytes  19.2 Mbits/sec  5.958 ms  0/9999 (0%)\n[  4] Sent 9999 datagrams\n\niperf Done.\n</code></pre>\n\n<p>Function:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub test_output {\n\n    my ($self) = @_;\n    my $packets = 0;\n\n    $self-&gt;{output_obj}-&gt;_exec('enter the command here');\n\n    my @output = $self-&gt;{output_obj}-&gt;out();\n\n    foreach my $line (@output) {\n        if ($line =~ /(\\d+\\/\\d+\\s.*)/) {\n\n            packets = $1\n        }\n    }\n    my @values = split('/', $packets);\n    foreach my $val (@values) {\n        return \"$val\\n\";\n    }\n}\n</code></pre>\n\n<p>Function call:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$self-&gt;{'client'} = $self-&gt;{'exec_obj'}-&gt;test_output()\n</code></pre>\n\n<p>Expected return value from the function:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>lost  : 0\ntotal  : 9999\nlost percentage: 0%\n</code></pre>\n"}, {"tags": ["perl", "perl-module"], "answers": [{"tags": [], "owner": {"reputation": 1880, "user_id": 860453, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cb3c4c3709da31b1eadf45c38f63fc97?s=128&d=identicon&r=PG", "display_name": "Knetic", "link": "https://stackoverflow.com/users/860453/knetic"}, "is_accepted": false, "score": 0, "last_activity_date": 1460416455, "creation_date": 1460416455, "answer_id": 36560895, "question_id": 36560813, "link": "https://stackoverflow.com/questions/36560813/parse-a-large-file-using-perl-json-module/36560895#36560895", "title": "parse a large file using perl json module", "body": "<p>Your JSON is malformed. I ran it through a validator (there are many free online ones), and it came up with multiple errors. The validator i used said:</p>\n\n<pre><code>Error:Strings should be wrapped in double quotes.[Code 17, Structure 222]\nError:Invalid characters found.[Code 18, Structure 222]\nError:Strings should be wrapped in double quotes.[Code 17, Structure 226]\nError:Invalid characters found.[Code 18, Structure 226]\nError:Expecting comma or }, not string.[Code 13, Structure 229]\nError:Strings should be wrapped in double quotes.[Code 17, Structure 229]\n</code></pre>\n\n<p>It looks like you have some missing double quotes somewhere along the line. If you're not using a library to generate the JSON for your data (which you should), then you should validate that your JSON is valid as often as possible - it's surprisingly easy to forget to escape a double quote.</p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 6190552, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c49c39feb0218eb3a5e6372e16a71029?s=128&d=identicon&r=PG&f=1", "display_name": "nims", "link": "https://stackoverflow.com/users/6190552/nims"}, "edited": false, "score": 0, "creation_date": 1460420925, "post_id": 36561024, "comment_id": 60723477, "body": "I tired the following. It doesn&#39;t seem to work. my $decoded = decode_json($json);  my @output = $decoded-&gt;{end}{stream}[0]{udp} ;  foreach my $out (@output) {     print $out-&gt;{end}{stream}[0]{udp}{lost_packets};  }"}, {"owner": {"reputation": 73, "user_id": 6190552, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c49c39feb0218eb3a5e6372e16a71029?s=128&d=identicon&r=PG&f=1", "display_name": "nims", "link": "https://stackoverflow.com/users/6190552/nims"}, "edited": false, "score": 0, "creation_date": 1460420967, "post_id": 36561024, "comment_id": 60723495, "body": "I get the following error : Use of uninitialized value in print"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 73, "user_id": 6190552, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c49c39feb0218eb3a5e6372e16a71029?s=128&d=identicon&r=PG&f=1", "display_name": "nims", "link": "https://stackoverflow.com/users/6190552/nims"}, "edited": false, "score": 0, "creation_date": 1460421089, "post_id": 36561024, "comment_id": 60723538, "body": "We misspelled <code>streams</code>."}, {"owner": {"reputation": 73, "user_id": 6190552, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c49c39feb0218eb3a5e6372e16a71029?s=128&d=identicon&r=PG&f=1", "display_name": "nims", "link": "https://stackoverflow.com/users/6190552/nims"}, "edited": false, "score": 0, "creation_date": 1460421420, "post_id": 36561024, "comment_id": 60723632, "body": "i corrected it. I see the following. Can&#39;t use string (&quot;4.20075&quot;) as a HASH ref while &quot;strict refs&quot; in"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1460420990, "last_edit_date": 1460420990, "creation_date": 1460417244, "answer_id": 36561024, "question_id": 36560813, "link": "https://stackoverflow.com/questions/36560813/parse-a-large-file-using-perl-json-module/36561024#36561024", "title": "parse a large file using perl json module", "body": "<pre><code>\"streams\":  [{ ... }],\n</code></pre>\n\n<p>means that <code>$data-&gt;{end}{streams}</code> holds an array reference that holds a hash reference. So the way to get to the <code>udp</code> element inside is</p>\n\n<pre><code>$decoded-&gt;{end}{streams}[0]{udp}\n</code></pre>\n\n<p>and the specific elements you want to return are at </p>\n\n<pre><code>print $decoded-&gt;{end}{streams}[0]{udp}{lost_packets};\nprint $decoded-&gt;{end}{streams}[0]{udp}{packets};\nprint $decoded-&gt;{end}{streams}[0]{udp}{lost_percent};\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 6190552, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c49c39feb0218eb3a5e6372e16a71029?s=128&d=identicon&r=PG&f=1", "display_name": "nims", "link": "https://stackoverflow.com/users/6190552/nims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 422, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1460420990, "creation_date": 1460415914, "question_id": 36560813, "link": "https://stackoverflow.com/questions/36560813/parse-a-large-file-using-perl-json-module", "title": "parse a large file using perl json module", "body": "<p>I have written a function that executes a command. The command produces a very large json output. I want the function to  parse a part of the output and return it to the calling function. </p>\n\n<p>I want the function to return \"lost_packets\" , \"packets\" and \"lost_percent\" from <code>{end} {streams}{udp}</code> in the output.(indicated the values to be returned with arrows) i used decode_json. when I run the code ,I get the following error. \"Bad name after...\". I'm pretty sure the command gets executed and produces a json result. I believe i'm not parsing the json output correctly. Can someone help me out with the json parsing?</p>\n\n<pre><code>        use strict;\n        use warnings;\n        use JSON qw( decode_json );\n\n    sub parse_json_output {\n\n         my ($self) = @_;\n\n        $self-&gt;{command}-&gt;execute( 'command goes here' );\n\n        my @stdout = $self-&gt;{command}-&gt;stdOut();\n\n        my $decoded = decode_json(@stdout); \n        my @output = @{$decoded-&gt;{'end'}{'streams'}{'udp'} } ; \n        foreach my $out (@output) {\n\n         return  $out-&gt;{\"packets\"} . \"\\n\";\n\n    }\n\n  }\n</code></pre>\n\n<p>function call :</p>\n\n<p>$self->{'execute'}  =  $self->{'json_obj'}->parse_json_output();</p>\n\n<p>command output :</p>\n\n<pre><code>{\n    \"start\":    {\n        \"connected\":    [{\n                \"socket\":   4,\n                \"local_host\":   \"9.1.1.2\",\n                \"local_port\":   47669,\n                \"remote_host\":  \"8.2.0.2\",\n                \"remote_port\":  12009\n            }],\n        \"version\":  \"iperf 3.0.11\",\n        \"system_info\":  \"Linux nevada-client154 3.13.0-32-generic #57-Ubuntu SMP Tue Jul 15 03:51:08 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\\n\",\n        \"timestamp\":    {\n            \"time\": \"Mon, 11 Apr 2016 22:57:30 GMT\",\n            \"timesecs\": 1460415450\n        },\n        \"connecting_to\":    {\n            \"host\": \"8.2.0.2\",\n            \"port\": 77545\n        },\n        \"cookie\":   \"nevada-client154.1460415448.675315.5\",\n        \"test_start\":   {\n            \"protocol\": \"UDP\",\n            \"num_streams\":  1,\n            \"blksize\":  576,\n            \"omit\": 0,\n            \"duration\": 0,\n            \"bytes\":    0,\n            \"blocks\":   4500,\n            \"reverse\":  0\n        }\n    },\n    \"intervals\":    [{\n            \"streams\":  [{\n                    \"socket\":   4,\n                    \"start\":    0,\n                    \"end\":  4.20106,\n                    \"seconds\":  4.20106,\n                    \"bytes\":    2592000,\n                    \"bits_per_second\":  4.9359e+06,\n                    \"packets\":  4500,\n                    \"omitted\":  false\n                }],\n            \"sum\":  {\n                \"start\":    0,\n                \"end\":  4.20106,\n                \"seconds\":  4.20106,\n                \"bytes\":    2592000,\n                \"bits_per_second\":  4.9359e+06,\n                \"packets\":  4500,\n                \"omitted\":  false\n            }\n        }],\n    \"end\":  {\n        \"streams\":  [{\n                \"udp\":  {\n                    \"socket\":   4,\n                    \"start\":    0,\n                    \"end\":  4.20106,\n                    \"seconds\":  4.20106,\n                    \"bytes\":    2592000,\n                    \"bits_per_second\":  4.9359e+06,\n                    \"jitter_ms\":    0.401183,\n                    \"lost_packets\": 0,  ---------&gt; i want this to be returned\n                    \"packets\":  4499,   ---------&gt;  return \n                    \"lost_percent\": 0   --------- &gt;  return\n                }\n            }],\n        \"sum\":  {\n            \"start\":    0,\n            \"end\":  4.20106,\n            \"seconds\":  4.20106,\n            \"bytes\":    2592000,\n            \"bits_per_second\":  4.9359e+06,\n            \"jitter_ms\":    0.401183,\n            \"lost_packets\": 0,\n            \"packets\":  4499,\n            \"lost_percent\": 0\n        },\n        \"cpu_utilization_percent\":  {\n            \"host_total\":   1.09968,\n            \"host_user\":    0.170654,\n            \"host_system\":  0.928823,\n            \"remote_total\": 0.00281493,\n            \"remote_user\":  0.000502673,\n            \"remote_system\":    0.00224273\n        }\n    },\n    \"server_output_text\":   \"-----------------------------------------------------------\\nAccepted connection from 9.1.1.2, port 33836\\n[  5] local 8.2.0.2 port 12009 connected to 9.1.1.2 port 47669\\n\"\n}\n</code></pre>\n"}, {"tags": ["python", "performance", "perl"], "comments": [{"owner": {"reputation": 29876, "user_id": 476716, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4e325890903afc8269eb2c1aa57587b3?s=128&d=identicon&r=PG", "display_name": "OrangeDog", "link": "https://stackoverflow.com/users/476716/orangedog"}, "edited": false, "score": 3, "creation_date": 1460410834, "post_id": 36559626, "comment_id": 60720017, "body": "Did you try using a Perl gzip library, or an external gzip pipe in Python?"}, {"owner": {"reputation": 213454, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1460411046, "post_id": 36559626, "comment_id": 60720112, "body": "IIRC, Python&#39;s <code>gzip</code> module is written in Python, so the performance is pretty bad. OrangeDog&#39;s suggestion of running <code>gzip</code> externally and piping the decompressed output to Python might speed things up."}, {"owner": {"reputation": 2953, "user_id": 2790838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1b32a4c6109138b1260310a7662f3e4?s=128&d=identicon&r=PG&f=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/2790838/markus"}, "edited": false, "score": 1, "creation_date": 1460411224, "post_id": 36559626, "comment_id": 60720191, "body": "Have a look at <a href=\"https://www.reddit.com/r/Python/comments/2olhrf/fast_gzip_in_python/\" rel=\"nofollow noreferrer\">reddit.com/r/Python/comments/2olhrf/fast_gzip_in_python</a>"}, {"owner": {"reputation": 998, "user_id": 884447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b57a75af90fc4db0f0935048d2cc23a?s=128&d=identicon&r=PG", "display_name": "asf107", "link": "https://stackoverflow.com/users/884447/asf107"}, "edited": false, "score": 1, "creation_date": 1460411505, "post_id": 36559626, "comment_id": 60720326, "body": "wow.  it is very counter-intuitive to me that &quot;shelling out&quot; to zcat is ideal..."}, {"owner": {"reputation": 27625, "user_id": 32538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u8ueG.png?s=128&g=1", "display_name": "Kirk Strauser", "link": "https://stackoverflow.com/users/32538/kirk-strauser"}, "edited": false, "score": 0, "creation_date": 1460415254, "post_id": 36559626, "comment_id": 60721787, "body": "It shouldn&#39;t be. Now you have two IO-bound processes not waiting for the same IO: gzip is slurping in the file, and your Perl/Python program is reading and processing it. There&#39;s some communication overhead, but Unix is particularly good at shoving stuff through pipes rapidly. The loss there is more than made up by the extra concurrency."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1460415992, "post_id": 36559626, "comment_id": 60722011, "body": "@asf107: I would always go for a library solution to get the best control over a process, and that is usually the most important criterion. But if a task is <i>large</i> and <i>simple</i>, and there exists a fast C-based utility that will do it, then invoke that utility. There is usually no need to also invoke a shell process, so <i>shelling out</i> to <code>gzip</code> isn&#39;t crazy like <code>qx&#47;time&#47;</code>"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1460468195, "post_id": 36559626, "comment_id": 60748708, "body": "Side-note: If you&#39;re just waiting for the millionth line, testing the actual contents of the line is rather silly. Just use <code>$.</code> in Perl to get the actual line number, or wrap the iterable in Python to do <code>for lineno, line in enumerate(fh):</code> so you get the actual line number directly. Or (possibly) better, <code>for line in itertools.islice(fh, 1000000):</code> which will terminate the loop after 1M lines without needing to perform a check and <code>break</code> in your code at all."}, {"owner": {"reputation": 998, "user_id": 884447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b57a75af90fc4db0f0935048d2cc23a?s=128&d=identicon&r=PG", "display_name": "asf107", "link": "https://stackoverflow.com/users/884447/asf107"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1460468517, "post_id": 36559626, "comment_id": 60748975, "body": "@ShadowRanger agreed.   In reality, this is meant to emulate a task that parses and processes every line of a large, gzipped file... this simple example is meant to demonstrate my observation that python doesn&#39;t seem to process/parse these large files as well as perl."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1460468830, "post_id": 36559626, "comment_id": 60749256, "body": "@asf107: The problem being that you weren&#39;t really using Perl in your first case. That said, Perl is <i>designed</i> for text processing; if the task is nothing but consuming text and processing it, Perl is likely to win. Heck, in my experience, Perl is somewhat faster in general (though it loses the advantage when you use its hacked together OO features) because of mutable strings (Python is making copies when you <code>strip</code> or slice, Perl is mutating in place for <code>chomp</code>), and improved name lookups (Perl links up non-OO names at compile time; Python looks them up over and over at runtime)."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1460468967, "post_id": 36559626, "comment_id": 60749384, "body": "@asf107: But &quot;Perl is faster&quot; is not much of an argument. If Python is easier to write, provides better standard library features, easier to maintain, etc. (not asserting that this is objectively true, but it&#39;s often argued), then Python still &quot;wins&quot;; programmer time usually costs more than CPU time after all. If &quot;But X is faster&quot; was an argument, no one would ever write code in any language higher level than C++. Python (excepting special numeric libraries and other extensions) is for development speed; run speed is secondary to ease of development."}], "answers": [{"comments": [{"owner": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "edited": false, "score": 0, "creation_date": 1460410762, "post_id": 36559701, "comment_id": 60719980, "body": "alternatively, outside of loop, <code>strip_without_lookup = str.split</code>, and in loop: <code>line = strip_without_lookup(line)</code>"}, {"owner": {"reputation": 998, "user_id": 884447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b57a75af90fc4db0f0935048d2cc23a?s=128&d=identicon&r=PG", "display_name": "asf107", "link": "https://stackoverflow.com/users/884447/asf107"}, "edited": false, "score": 0, "creation_date": 1460410792, "post_id": 36559701, "comment_id": 60719993, "body": "I know, I thought so too!     However, your proposed suggestion doesn&#39;t speed up the script significantly....  i&#39;ll post the python profiling info as an edit in my original post"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1460431452, "post_id": 36559701, "comment_id": 60726330, "body": "<code>for line in iter(gzip.stdout.readline, &#39;&#39;):</code> is a silly way to reinvent <code>for line in gzip.stdout:</code>... Also, I suspect you want to <code>terminate</code>/<code>kill</code> the process, not <code>wait</code> on it; you haven&#39;t consumed all of its <code>stdout</code> here, so it&#39;s going to block when the pipe fills, while you&#39;re blocking waiting for it to exit."}, {"owner": {"reputation": 998, "user_id": 884447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b57a75af90fc4db0f0935048d2cc23a?s=128&d=identicon&r=PG", "display_name": "asf107", "link": "https://stackoverflow.com/users/884447/asf107"}, "edited": false, "score": 0, "creation_date": 1460466901, "post_id": 36559701, "comment_id": 60747535, "body": "good point.  i will make the suggested changes and update above"}, {"owner": {"reputation": 27625, "user_id": 32538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u8ueG.png?s=128&g=1", "display_name": "Kirk Strauser", "link": "https://stackoverflow.com/users/32538/kirk-strauser"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1460482375, "post_id": 36559701, "comment_id": 60759505, "body": "@ShadowRanger Did you see J.F. Sebastian&#39;s rationale for using it?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1460483417, "post_id": 36559701, "comment_id": 60760143, "body": "@KirkStrauser: I hadn&#39;t, but having read it, it looks like the main reason to use that approach is to avoid delays when reading from a pipe that is being populated intermittently; <code>readline</code> (on Python 2 only; Python 3 fixes the discrepancy) might allow you to get a line immediately where normal iteration might wait until the buffer fills before finding and returning the line. In this case, <code>gzip</code> is feeding the pipe faster than we can read and process it anyway, so that isn&#39;t a concern."}, {"owner": {"reputation": 27625, "user_id": 32538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u8ueG.png?s=128&g=1", "display_name": "Kirk Strauser", "link": "https://stackoverflow.com/users/32538/kirk-strauser"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1460491628, "post_id": 36559701, "comment_id": 60765027, "body": "@ShadowRanger I agree that your conclusion is very likely (although the whole game changes if that file happens to live on a network drive). However, I don&#39;t think it&#39;s &quot;silly&quot; to process a pipe that way for safety reasons. It costs almost nothing and buys some nice reassurance."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1460559860, "post_id": 36559701, "comment_id": 60801940, "body": "@KirkStrauser: Nothing changes in the network case; <code>gzip</code> is reading the file, not Python, so Python&#39;s caching behavior is mostly irrelevant (unless the network is so slow or compression so poor <code>gzip</code> can&#39;t feed Python fast enough). The silliness is in extra verbosity, obscurity (I know two-arg <code>iter</code>, but people who don&#39;t will do a double-take), and slowdown (on my local Py2, direct iteration takes around 75-85% less time to run; on Py3, about 40-60% less depending on binary vs. text mode; Py3 suffering only from repeated function call overhead, while Py2 pays the poor buffering costs too)."}], "tags": [], "owner": {"reputation": 27625, "user_id": 32538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u8ueG.png?s=128&g=1", "display_name": "Kirk Strauser", "link": "https://stackoverflow.com/users/32538/kirk-strauser"}, "is_accepted": false, "score": 0, "last_activity_date": 1460411149, "last_edit_date": 1495535645, "creation_date": 1460410582, "answer_id": 36559701, "question_id": 36559626, "link": "https://stackoverflow.com/questions/36559626/python-vs-perl-performance-reading-a-gzipped-file/36559701#36559701", "title": "Python vs Perl: performance reading a gzipped file", "body": "<p>Were I a bettor, I'd wager that:</p>\n\n<pre><code>line = line.strip()\n</code></pre>\n\n<p>is the killer. It's doing a method lookup (that is, resolving <code>line.strip</code>), then calling it to create another object, then assigning the name <code>line</code> to the newly-created object.</p>\n\n<p>Given that you know exactly what your data will look like, I'd see if changing your loop to this would make a difference:</p>\n\n<pre><code>for line in fh: \n    if line == '1000000\\n':\n        ...\n</code></pre>\n\n<p>I think I jumped the gun and answered too quickly. I believe you're right: Perl is \"cheating\" by running gzip in a separate process. Check out <a href=\"https://stackoverflow.com/questions/1822237/asynchronously-read-stdout-from-subprocess-popen\">Asynchronously read stdout from subprocess.Popen</a> for a way to do the same in Python. It might look like:</p>\n\n<pre><code>import subprocess\n\nfilename = 'million_lines.txt.gz'\ngzip = subprocess.Popen(['gzip', '-cdfq', filename], stdout=subprocess.PIPE)\nfor line in iter(gzip.stdout.readline, ''): \n    line = line.strip()\n    if line == '1000000':\n        print \"This is the millionth line: Python\"\n        break\ngzip.wait()\n</code></pre>\n\n<p>And after you do, please report back. I'd like to see the results of this experiment!</p>\n"}, {"tags": [], "owner": {"reputation": 2953, "user_id": 2790838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1b32a4c6109138b1260310a7662f3e4?s=128&d=identicon&r=PG&f=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/2790838/markus"}, "is_accepted": false, "score": 0, "last_activity_date": 1460452437, "last_edit_date": 1460452437, "creation_date": 1460444706, "answer_id": 36565902, "question_id": 36559626, "link": "https://stackoverflow.com/questions/36559626/python-vs-perl-performance-reading-a-gzipped-file/36565902#36565902", "title": "Python vs Perl: performance reading a gzipped file", "body": "<p>You made me curious...</p>\n\n<p>The following Python script consistently outperforms the Perl solution on my machine: 3.2s vs. 3.6s for 10,000,000 lines (elapsed real time as given by three runs of <code>time</code>)</p>\n\n<pre><code>import subprocess\n\nfilename = 'millions.txt.gz'\ngzip = subprocess.Popen(\n    ['gzip', '-cdfq', filename],\n    bufsize = -1, stdout = subprocess.PIPE)\n\nfor line in gzip.stdout:\n    if line[:-1] == '10000000':\n        print \"This is the 10 millionth line: Python\"\n        break\n\ngzip.wait()\n</code></pre>\n\n<p>Interestingly, when looking at the time spent in user mode, the Perl solution is slightly better than the Python solution. This seems to indicate that the interprocess communication of the Python solution is more efficient than the one of the Perl solution.</p>\n"}, {"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1460467911, "post_id": 36566241, "comment_id": 60748449, "body": "If you pass <code>universal_newlines=True</code> as an extra argument to <code>subprocess.Popen</code>, then line ending conversions are performed for you (so you can in fact guarantee that the line ending is <code>&#39;\\n&#39;</code>). This also makes the code portable to Python 3 (where <code>Popen</code> returns <code>bytes</code>, not <code>str</code>, unless you pass <code>universal_newlines=True</code>). Alternatively, declare <code>needle = &#39;1000000&#39; + os.linesep</code> outside the loop, and test <code>line == needle</code> in the loop to match OS line ending expectations."}, {"owner": {"reputation": 998, "user_id": 884447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b57a75af90fc4db0f0935048d2cc23a?s=128&d=identicon&r=PG", "display_name": "asf107", "link": "https://stackoverflow.com/users/884447/asf107"}, "edited": false, "score": 0, "creation_date": 1460469556, "post_id": 36566241, "comment_id": 60749845, "body": "it is interesting that the above code <i>still</i> runs slower on my machine."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 998, "user_id": 884447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b57a75af90fc4db0f0935048d2cc23a?s=128&d=identicon&r=PG", "display_name": "asf107", "link": "https://stackoverflow.com/users/884447/asf107"}, "edited": false, "score": 1, "creation_date": 1460477504, "post_id": 36566241, "comment_id": 60756448, "body": "@asf107: At a certain point, most of what you&#39;re timing is the overhead of launching the interpreter &amp; performing the actual decompression, not the work done. On my machine, when launched repeatedly with a script that does nothing but print a blank line (and in Python&#39;s case, import <code>subprocess</code> without using it), both programs <code>hash</code>-ed, Perl is just much faster to start. <code>time</code> reports <code>time perl noop.pl</code> takes about 0.01s/0.002s/0.005s for real/user/sys. <code>time python noop.py</code> takes about 0.110s/0.035s/0.040s. The Python noop times are 50%, 25% &amp; 90% of the <code>read_million</code> times."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 998, "user_id": 884447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b57a75af90fc4db0f0935048d2cc23a?s=128&d=identicon&r=PG", "display_name": "asf107", "link": "https://stackoverflow.com/users/884447/asf107"}, "edited": false, "score": 1, "creation_date": 1460477698, "post_id": 36566241, "comment_id": 60756575, "body": "@asf107: Cont. When the overhead of launching the interpreter at all is a significant fraction of the time spent doing the work, your benchmark is flawed; in a &quot;real&quot; program, startup overhead (as long as it&#39;s not noticeable at a human timescale) rarely matters; you&#39;d need to compare the time to do the work alone, or do enough work to swamp launch overhead (and ideally do the work many times in a single session, taking the shortest time to minimize timing jitter). The work here is just too small to matter."}, {"owner": {"reputation": 998, "user_id": 884447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b57a75af90fc4db0f0935048d2cc23a?s=128&d=identicon&r=PG", "display_name": "asf107", "link": "https://stackoverflow.com/users/884447/asf107"}, "edited": false, "score": 0, "creation_date": 1460485785, "post_id": 36566241, "comment_id": 60761553, "body": "wow.... my average python start-up time is nearly 0.600s!  Yikes.... thanks for pointing this out."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 998, "user_id": 884447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b57a75af90fc4db0f0935048d2cc23a?s=128&d=identicon&r=PG", "display_name": "asf107", "link": "https://stackoverflow.com/users/884447/asf107"}, "edited": false, "score": 0, "creation_date": 1460561566, "post_id": 36566241, "comment_id": 60803311, "body": "@asf107: Given your interpreter seems to otherwise perform similarly to mine, this sounds like you may have some environment customizations or a ton of third party packages installed that add overhead to the launch process. This could easily slow Python startup and make your results non-reproducible on other systems. I added a note to <a href=\"http://stackoverflow.com/a/36580221/364696\">my answer</a> on this; you might try running your benchmarking code with <code>-E -S</code> to disable the extras; it won&#39;t make the benchmark <i>good</i>, but it will at least be &quot;less bad&quot;."}], "tags": [], "owner": {"reputation": 2444, "user_id": 559644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9oDuZ.png?s=128&g=1", "display_name": "totoro", "link": "https://stackoverflow.com/users/559644/totoro"}, "is_accepted": false, "score": 0, "last_activity_date": 1460476984, "last_edit_date": 1460476984, "creation_date": 1460445646, "answer_id": 36566241, "question_id": 36559626, "link": "https://stackoverflow.com/questions/36559626/python-vs-perl-performance-reading-a-gzipped-file/36566241#36566241", "title": "Python vs Perl: performance reading a gzipped file", "body": "<p>This one is faster than the Perl version, but it assumes line ending is '\\n':</p>\n\n<pre><code>import subprocess\n\nfilename = \"million_lines.txt.gz\"\ngzip = subprocess.Popen(['gzip', '-cdfq', filename], stdout=subprocess.PIPE)\nfor line in gzip.stdout:\n    if line == '1000000\\n':\n        print \"This is the millionth line: Python\"\n        break\ngzip.terminate()\n</code></pre>\n\n<p><strong>Tests</strong></p>\n\n<pre><code>$ time python Test.py \nThis is the millionth line: Python\n\nreal    0m0.191s\nuser    0m0.264s\nsys     0m0.016s\n\n$ time perl Test.pl \nThis is the millionth line: Perl\n\nreal    0m0.404s\nuser    0m0.488s\nsys     0m0.008s\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 998, "user_id": 884447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b57a75af90fc4db0f0935048d2cc23a?s=128&d=identicon&r=PG", "display_name": "asf107", "link": "https://stackoverflow.com/users/884447/asf107"}, "edited": false, "score": 0, "creation_date": 1460480283, "post_id": 36578971, "comment_id": 60758262, "body": "thanks!  i figured that this could sped up a bit by reading the entire file contents into memory; in reality, I usually work with extremely large .gz files where this isn&#39;t possible."}], "tags": [], "owner": {"reputation": 22778, "user_id": 1554386, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bfe99a3a73b9284d16127418399762ff?s=128&d=identicon&r=PG", "display_name": "Alastair McCormack", "link": "https://stackoverflow.com/users/1554386/alastair-mccormack"}, "is_accepted": false, "score": 0, "last_activity_date": 1460478248, "creation_date": 1460478248, "answer_id": 36578971, "question_id": 36559626, "link": "https://stackoverflow.com/questions/36559626/python-vs-perl-performance-reading-a-gzipped-file/36578971#36578971", "title": "Python vs Perl: performance reading a gzipped file", "body": "<p>It looks like the <code>next()</code> method of the gzip file, as used in <code>for line in</code>, seems to be very slow - presumably because it's cautiously reading the uncompressed stream looking for line breaks, perhaps in order to keep memory usage under control.</p>\n\n<p>Of course, you're comparing apples to oranges and other people have already made better comparisons between Python forking <code>gunzip</code> and Perl forking <code>gunzip</code>.\nThese presumably work well because they're dumping relatively large uncompressed strings to their stdout in a separate process. </p>\n\n<p>A non-memory safe and potentially wasteful approach is:</p>\n\n<pre><code>import gzip\n\nfilename = 'million_lines.txt.gz'\n\nfh = gzip.open(filename)\n\nwhole_file = fh.read()\nfor line in whole_file.splitlines():\n    if line == \"1000000\":\n        print \"This is the millionth line: Python\"\n        break\n</code></pre>\n\n<p>This reads in the entire uncompressed file then splits.</p>\n\n<p><strong>Results:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ time python test201604121.py\nThis is the millionth line: Python\n\nreal    0m0.183s\nuser    0m0.133s\nsys    0m0.046s\n\n\n$ time perl test201604121.pl\n\nThis is the millionth line: Perl\n\nreal    0m0.192s\nuser    0m0.167s\nsys    0m0.027s\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 7, "last_activity_date": 1460561398, "last_edit_date": 1460561398, "creation_date": 1460482219, "answer_id": 36580221, "question_id": 36559626, "link": "https://stackoverflow.com/questions/36559626/python-vs-perl-performance-reading-a-gzipped-file/36580221#36580221", "title": "Python vs Perl: performance reading a gzipped file", "body": "<p>Having tested a number of possibilities, it looks like the big culprits here are:</p>\n\n<ol>\n<li>Comparing apples to oranges: In your original test case, Perl wasn't doing the file I/O or decompression work, the <code>gzip</code> program was doing so (and it's written in C, so it runs pretty fast); in that version of the code, you're comparing parallel computation to serial computation.</li>\n<li>Interpreter startup time; on the vast majority of systems, Python takes substantially longer to begin running (I believe because more files are loaded at startup). Interpreter startup time on my machine is about half the total wall clock time, 30% of the user time, and most of the system time. The actual work done in Python is swamped by start up time, so your benchmark is as much about comparing startup time as comparing time required to do the work. <strong>Later addition</strong>: You can reduce the overhead from Python startup a bit further by invoking <code>python</code> with the <code>-E</code> switch (to disable checking of <code>PYTHON*</code> environment variables at startup) and the <code>-S</code> switch (to disable automatic <code>import site</code>, which avoids a lot of dynamic <code>sys.path</code> setup/manipulation involving disk I/O at the expense of cutting off access to any non-builtin libraries).</li>\n<li>Python's <code>subprocess</code> module is a bit higher level than Perl's <code>open</code> call, and is implemented in Python (on top of lower level primitives). The generalized <code>subprocess</code> code takes longer to load (exacerbating startup time issues) and adds overhead to the process launch itself.</li>\n<li>Python 2's <code>subprocess</code> defaults to unbuffered I/O, so you're performing more system calls unless you pass an explicit <code>bufsize</code> argument (4096 to 8192 seems to work fine)</li>\n<li>The <code>line.strip()</code> call involves more overhead than you might think; function &amp; method calls are more expensive in Python than they really should be, and <code>line.strip()</code> does not mutate the <code>str</code> in place the way Perl's <code>chomp</code> does (because Python's <code>str</code> is immutable, while Perl strings are mutable)</li>\n</ol>\n\n<p>A couple versions of the code that will bypass most of these problems. First, optimized <code>subprocess</code>:</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport subprocess\n\n# Launch with subprocess in list mode (no shell involved) and\n# use a meaningful buffer size to minimize system calls\nproc = subprocess.Popen(['gzip', '-cdfq', 'million_lines.txt.gz'], stdout=subprocess.PIPE, bufsize=4096)\n# Iterate stdout directly\nfor line in proc.stdout:\n    if line == '1000000\\n':  # Avoid stripping\n        print(\"This is the millionth line: Python\")\n        break\n# Prevent deadlocks by terminating, not waiting, child process\nproc.terminate()\n</code></pre>\n\n<p>Second, pure Python, mostly built-in (C level) API based code (which eliminates most extraneous startup overhead, and shows that Python's <code>gzip</code> module is not meaningfully distinct from the <code>gzip</code> program), ridiculously microoptimized at the expense of readability/maintainability/brevity/portability:</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport os\n\nrpipe, wpipe = os.pipe()\n\ndef reader():\n    import gzip\n    FILE = \"million_lines.txt.gz\"\n    os.close(rpipe)\n    with gzip.open(FILE) as inf, os.fdopen(wpipe, 'wb') as outf:\n        buf = bytearray(16384)  # Reusable buffer to minimize allocator overhead\n        while 1:\n            cnt = inf.readinto(buf)\n            if not cnt: break\n            outf.write(buf[:cnt] if cnt != 16384 else buf)\n\npid = os.fork()\nif not pid:\n    try:\n        reader()\n    finally:\n        os._exit()\n\ntry:\n    os.close(wpipe)\n    with os.fdopen(rpipe, 'rb') as f:\n        for line in f:\n            if line == b'1000000\\n':\n                print(\"This is the millionth line: Python\")\n                break\nfinally:\n    os.kill(pid, 9)\n</code></pre>\n\n<p>On my local system, on the best of half a dozen runs, the <code>subprocess</code> code takes:</p>\n\n<pre><code>0.173s/0.157s/0.031s wall/user/sys time.\n</code></pre>\n\n<p>The primitives based Python code with no external utility programs gets that down to a best time of:</p>\n\n<pre><code>0.147s/0.103s/0.013s\n</code></pre>\n\n<p>(though that was an outlier; a good wall clock time was usually more like 0.165). Adding <code>-E -S</code> to the invocation shaves another 0.01-0.015s wall clock and user time by removing the overhead of setting up the import machinery to handle non-builtins; in other comments, you mention that your Python takes nearly 0.6 seconds to launch doing absolutely nothing (but otherwise seems to perform similarly to mine), which may indicate you've got quite a bit more in the way of non-default packages or environment customization going on, and <code>-E -S</code> may save you more.</p>\n\n<p>The Perl code, unmodified from what you gave me (aside from using 3+ arg <code>open</code> to remove string parsing and storing the <code>pid</code> returned from <code>open</code> to explicitly <code>kill</code> it before exiting) had a best time of:</p>\n\n<pre><code>0.183s/0.216s/0.005s\n</code></pre>\n\n<p>Regardless, we're talking about trivial differences (the timing jitter from run to run was around 0.025s for wall clock and user time, so Python's wins on wall clock time were mostly insignificant, though it did save on user time meaningfully). Python can win, as can Perl, but non-language related concerns are more important.</p>\n"}], "owner": {"reputation": 998, "user_id": 884447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b57a75af90fc4db0f0935048d2cc23a?s=128&d=identicon&r=PG", "display_name": "asf107", "link": "https://stackoverflow.com/users/884447/asf107"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1936, "favorite_count": 1, "accepted_answer_id": 36580221, "answer_count": 5, "score": 10, "last_activity_date": 1460561398, "creation_date": 1460410281, "last_edit_date": 1592644375, "question_id": 36559626, "link": "https://stackoverflow.com/questions/36559626/python-vs-perl-performance-reading-a-gzipped-file", "title": "Python vs Perl: performance reading a gzipped file", "body": "<p>I have a gzipped data file containing a million lines:</p>\n<pre class=\"lang-none prettyprint-override\"><code>$ zcat million_lines.txt.gz | head\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n...\n</code></pre>\n<p>My Perl script which processes this file is as follows:</p>\n<pre class=\"lang-perl prettyprint-override\"><code># read_million.pl\nuse strict; \n\nmy $file = &quot;million_lines.txt.gz&quot; ;\n\nopen MILLION, &quot;gzip -cdfq $file |&quot;;\n\nwhile ( &lt;MILLION&gt; ) {\n    chomp $_; \n    if ($_ eq &quot;1000000&quot; ) {\n        print &quot;This is the millionth line: Perl\\n&quot;; \n        last; \n    }\n}\n</code></pre>\n<p>In Python:</p>\n<pre class=\"lang-python prettyprint-override\"><code># read_million.py\nimport gzip\n\nfilename = 'million_lines.txt.gz'\n\nfh = gzip.open(filename)\n\nfor line in fh:\n    line = line.strip()\n    if line == '1000000':\n        print &quot;This is the millionth line: Python&quot;\n        break\n</code></pre>\n<p>For whatever reason, the Python script takes almost ~8x longer:</p>\n<pre class=\"lang-none prettyprint-override\"><code>$ time perl read_million.pl ; time python read_million.py\nThis is the millionth line: Perl\n\nreal    0m0.329s\nuser    0m0.165s\nsys     0m0.019s\nThis is the millionth line: Python\n\nreal    0m2.663s\nuser    0m2.154s\nsys     0m0.074s\n</code></pre>\n<p>I tried profiling both scripts, but there really isn't much code to profile. The Python script spends most of its time on <code>for line in fh</code>; the Perl script spends most of its time in <code>if($_ eq &quot;1000000&quot;)</code>.</p>\n<p>Now, I know that Perl and Python have some expected differences.  For instance, in Perl, I open up the filehandle using a subproc to UNIX <code>gzip</code> command; in Python, I use the <code>gzip</code> library.</p>\n<p>What can I do to speed up the Python implementation of this script (even if I never reach the Perl performance)? Perhaps the <code>gzip</code> module in Python is slow (or perhaps I'm using it in a bad way); is there a better solution?</p>\n<h3>EDIT #1</h3>\n<p>Here's what the <code>read_million.py</code> line-by-line profiling looks like.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Line #      Hits         Time  Per Hit   % Time  Line Contents\n==============================================================\n     2                                           @profile\n     3                                           def main():\n     4\n     5         1            1      1.0      0.0         filename = 'million_lines.txt.gz'\n     6         1          472    472.0      0.0         fh = gzip.open(filename)\n     7   1000000      5507042      5.5     84.3         for line in fh:\n     8   1000000       582653      0.6      8.9                 line = line.strip()\n     9   1000000       443565      0.4      6.8                 if line == '1000000':\n    10         1           25     25.0      0.0                         print &quot;This is the millionth line: Python&quot;\n    11         1            0      0.0      0.0                         break\n</code></pre>\n<p><strong>EDIT #2:</strong></p>\n<p>I have now also tried <code>subprocess</code> python module as per @Kirk Strauser, and others.  It is faster:</p>\n<p>Python &quot;subproc&quot; solution:</p>\n<pre class=\"lang-python prettyprint-override\"><code># read_million_subproc.py \nimport subprocess\n\nfilename = 'million_lines.txt.gz'\ngzip = subprocess.Popen(['gzip', '-cdfq', filename], stdout=subprocess.PIPE)\nfor line in gzip.stdout: \n    line = line.strip()\n    if line == '1000000':\n        print &quot;This is the millionth line: Python&quot;\n        break\ngzip.wait()\n</code></pre>\n<p>Here is a comparative table of all the things I've tried so far:</p>\n<pre class=\"lang-none prettyprint-override\"><code>method                    average_running_time (s)\n--------------------------------------------------\nread_million.py           2.708\nread_million_subproc.py   0.850\nread_million.pl           0.393\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 4902, "user_id": 477494, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5S7II.jpg?s=128&g=1", "display_name": "Uncle Iroh", "link": "https://stackoverflow.com/users/477494/uncle-iroh"}, "edited": false, "score": 0, "creation_date": 1460409572, "post_id": 36559388, "comment_id": 60719369, "body": "^.*(004010H[0-9A]{0,10})"}, {"owner": {"reputation": 4902, "user_id": 477494, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5S7II.jpg?s=128&g=1", "display_name": "Uncle Iroh", "link": "https://stackoverflow.com/users/477494/uncle-iroh"}, "edited": false, "score": 0, "creation_date": 1460409784, "post_id": 36559388, "comment_id": 60719482, "body": "Or this for just that set:  ^.*(004010H222A1|004010H223A2|004010H220A1|004010H279A1|0040&zwnj;&#8203;10H279A1|004010H217)"}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 2585000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3453a6e68128a360b1d6cf7168655bd?s=128&d=identicon&r=PG", "display_name": "user2585000", "link": "https://stackoverflow.com/users/2585000/user2585000"}, "edited": false, "score": 0, "creation_date": 1460509172, "post_id": 36559631, "comment_id": 60772070, "body": "thnx, that demo website helped to debug a few ideas presented. thnx also for pointing out the optional part capturing group"}], "tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": false, "score": 1, "last_activity_date": 1460410762, "last_edit_date": 1460410762, "creation_date": 1460410290, "answer_id": 36559631, "question_id": 36559388, "link": "https://stackoverflow.com/questions/36559388/perl-regex-to-capture-into-variable-only-an-exact-match-within-a-string/36559631#36559631", "title": "perl regex to capture into variable only an exact match within a string", "body": "<p>Just to put my two cents in:</p>\n\n<pre><code>\\b004010H2[127][02379](?:A[12])?\\b\n# \\b - match a word boundary\n# match 004010H2 literally\n# [127] one of 1,2 or 7\n# followed by one of 0,2,3,7 or 9\n# (?:....)? is a non capturing group and optional in this case\n</code></pre>\n\n<p><em>Hint:</em> Obviously, this is able to match your numbers but other combinations like <code>004010H210A2</code> as well. It totally depends on your input strings. If you only have these six alternatives, you're probably on the safer side with simple string functions.<br>\nSee <kbd><a href=\"https://regex101.com/r/aM6dM5/1\" rel=\"nofollow\">a demo on regex101.com</a></kbd>.</p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 2585000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3453a6e68128a360b1d6cf7168655bd?s=128&d=identicon&r=PG", "display_name": "user2585000", "link": "https://stackoverflow.com/users/2585000/user2585000"}, "edited": false, "score": 0, "creation_date": 1460509071, "post_id": 36559744, "comment_id": 60772039, "body": "that&#39;s it! thnx much. been playing around and i like your idea. thnx again"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 113, "user_id": 2585000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3453a6e68128a360b1d6cf7168655bd?s=128&d=identicon&r=PG", "display_name": "user2585000", "link": "https://stackoverflow.com/users/2585000/user2585000"}, "edited": false, "score": 0, "creation_date": 1460522899, "post_id": 36559744, "comment_id": 60775666, "body": "@user2585000 Welcome, glad you like it :) It is a nice little &#39;technique&#39; when you have a list of fixed patterns."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1583656286, "last_edit_date": 1583656286, "creation_date": 1460410776, "answer_id": 36559744, "question_id": 36559388, "link": "https://stackoverflow.com/questions/36559388/perl-regex-to-capture-into-variable-only-an-exact-match-within-a-string/36559744#36559744", "title": "perl regex to capture into variable only an exact match within a string", "body": "<p>With a given list of patterns</p>\n\n<pre><code>my @fixed = qw(004010H222A1 004010H223A2 004010H220A1 \n    004010H279A1 004010H279A1 004010H217);\n\nmy $str = \"this is the code 004010H222A1 the rest is irrelevant\";\n\nmy @found = grep { $str =~ /$_/ } @fixed;\n</code></pre>\n\n<p>what matches all such patterns in the string. Note that you may need word boundaries (<code>/\\b$_\\b/</code>), albeit not if the patterns are so distinct in the surrounding text as shown. If the pattern itself contains any non-word characters then you'd need to build the sub-pattern for the \"boundary.\" </p>\n\n<p>If you are certain there is only one of them in the string or need only the first one</p>\n\n<pre><code>my ($found) = grep { $str =~ /$_/ } @fixed;\n</code></pre>\n\n<p>or by constructing the pattern with alternation first</p>\n\n<pre><code>my $re = join '|', map { quotemeta } @fixed;\n\nmy $found = $str =~ /$re/;  # consider using word-boudaries /\\b$re\\b/\n</code></pre>\n\n<p>This may be more efficient since it starts the regex engine only once, but on the other hand with only a few (or a single one?) options we do engage in all that overhead to form the alternation.</p>\n\n<p>Depending on details you may want to sort by <code>length</code>first, either by longest or shortest</p>\n\n<pre><code>my $re = join '|', map { quotemeta } sort { length $a &lt;=&gt; lenght $b } @fixed;\n...\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/a/55734041/4653379\">this post</a> for discussion of reasoning behind these options.</p>\n\n<hr>\n\n<p>If you have more possibilities, with the exact pattern shown in the question, the pattern is: digits followed by letters-or-digits, terminated by non-letter-digits.</p>\n\n<pre><code>my $pattern = qr/([0-9]+[a-zA-Z0-9]+)[^a-zA-Z0-9]/;\n\nmy ($found) = $str =~ /$pattern/;\n</code></pre>\n\n<p>The above matches if the pattern is immediately preceded by a non-digit character (like <code>~</code>), not only space. It also allows low-case letters, drop <code>a-z</code> if they cannot be there. You can further restrict this if it is certain that it has leading zeros.  </p>\n"}], "owner": {"reputation": 113, "user_id": 2585000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3453a6e68128a360b1d6cf7168655bd?s=128&d=identicon&r=PG", "display_name": "user2585000", "link": "https://stackoverflow.com/users/2585000/user2585000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 736, "favorite_count": 0, "accepted_answer_id": 36559744, "answer_count": 2, "score": 3, "last_activity_date": 1583656286, "creation_date": 1460409343, "question_id": 36559388, "link": "https://stackoverflow.com/questions/36559388/perl-regex-to-capture-into-variable-only-an-exact-match-within-a-string", "title": "perl regex to capture into variable only an exact match within a string", "body": "<p>i need help with this regex to capture only the exact match within a string and put it in a variable</p>\n\n<p>i only want to extrapolate these values (fixed list; no other numbers):</p>\n\n<pre><code>004010H222A1 or \n004010H223A2 or \n004010H220A1 or \n004010H279A1 or \n004010H279A1 or \n004010H217 \n</code></pre>\n\n<p>from the string given</p>\n\n<p>example:</p>\n\n<pre><code>$str = \"this is the code 004010H222A1 the rest is irrelevant\";\n$str = \"the random number is 004010H223A2 ** anything else is irrelevant\";\n$str = \"the last lottery number 004010H220A1 ~~ the rest is irrelevant\";\n$str = \"yet another random sentence 004010H279A1 the rest is irrelevant\";\n$str = \"any sentence before what i want 004010H279A1 the rest is irrelevant\";\n$str = \"last winning number 004010H217~~~\";\n\n\nif ($str =~ /\\b(004010H[2][1|2|7][0|2|3|7|9])(A[1|2])?\\b/){\nprint \"found exact match\\n\";\n##put result into a variable\n##example:\n## $exact_match = &lt;found eg 004010H222A1&gt;; \n##print $exact_match;\n}\n</code></pre>\n\n<p>how can i capture the exact match of what i want into a variable then display it? maybe i just can't see the forest for the trees. thank you in advance for your help </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51908, "user_id": 702361, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e2a400cef6dbb94a8777c161d5b43d0c?s=128&d=identicon&r=PG", "display_name": "phoxis", "link": "https://stackoverflow.com/users/702361/phoxis"}, "edited": false, "score": 1, "creation_date": 1460408146, "post_id": 36558998, "comment_id": 60718608, "body": "What about having a top level key <code>name</code> of each hash, and follow it as a protocol in your code? Then for any hash received read that field? But in this case you need create a hash using some kind of creator function which will set the name. Does this make any sense?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1460410334, "post_id": 36558998, "comment_id": 60719760, "body": "See also <a href=\"http://stackoverflow.com/questions/36361651/getting-all-arguments-passed-to-a-subroutine-as-a-string-in-perl\">Getting all arguments passed to a subroutine as a string in Perl</a>"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1555220837, "last_edit_date": 1555220837, "creation_date": 1460408882, "answer_id": 36559268, "question_id": 36558998, "link": "https://stackoverflow.com/questions/36558998/store-the-name-of-a-hash-inside-the-hash/36559268#36559268", "title": "Store the name of a hash, inside the hash", "body": "<p>When you pass a reference to a sub, that's all it gets -- the reference. (If you were to pass a full hash it would get a list.)  We can't read off a name from the enclosing scope inside the sub directly.</p>\n\n<p>However, there are modules that do the hard work.  Names of variables can be seen using <a href=\"http://search.cpan.org/~robin/PadWalker-2.2/PadWalker.pm\" rel=\"nofollow noreferrer\"><code>PadWalker</code></a>, for example.  Note their recommendation against using it \"<em>directly in production code</em>\".</p>\n\n<p>There is a funciton <code>var_name</code> that fits this particular purpose exactly.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse PadWalker qw(var_name);\n\nsub get_var_name { return var_name(1, $_[0]) }\n\nmy %hash_of_hashes = ( FOO =&gt; { BAR =&gt; \"BAZ\" }, ALICE =&gt; { BOB =&gt; \"CHARLIE\", } );\n\nmy $hash_name = get_var_name(\\%hash_of_hashes);\n</code></pre>\n\n<p>The <code>$hash_name</code> has the string <code>%hash_of_hashes</code>.  As you don't want the sigil use</p>\n\n<pre><code>sub get_var_name { return substr var_name(1, $_[0]), 1 };\n</code></pre>\n\n<p>The <code>var_name(1, $_[0])</code> returns the name of the variable whose reference is the second argument, as long as that variable is in scope at <code>1</code> level above the sub where this function is called (so caller's).</p>\n\n<p>This is a somewhat special case for what the module generally offers -- it reads names and values of all variables in scope at the given level (relative to where its functions are called). See the docs.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1467554731, "last_edit_date": 1467554731, "creation_date": 1460471639, "answer_id": 36576406, "question_id": 36558998, "link": "https://stackoverflow.com/questions/36558998/store-the-name-of-a-hash-inside-the-hash/36576406#36576406", "title": "Store the name of a hash, inside the hash", "body": "<p><a href=\"https://metacpan.org/pod/Data::Dumper::Simple\" rel=\"nofollow\"><code>Data::Dumper::Simple</code></a> works by applying a <em>source filter</em>. It uses <a href=\"https://metacpan.org/pod/Filter::Simple\" rel=\"nofollow\"><code>Filter::Simple</code></a> to modify the source code before it is compiled so that calls to <code>Dumper</code> pass the <em>names</em> of the parameters as well as their <em>values</em></p>\n\n<p>Rather than mess with the output of <code>Data::Dumper::Simple</code> I suggest you miss out the middle man and use <code>Filter::Simple</code> directly</p>\n\n<p>I would write some example code, but you don't say enough about what you want to do</p>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>Here's some example code. I've assumed that you just want a subroutine that, given a hash, will put the name of that hash in elements of the second-level hashes inside it</p>\n\n<p>The module <code>AddName</code> contains both the source filter and the exported subroutine <code>add_name</code>. All calls in the main program to <code>add_name(%xxx)</code> or <code>add_name(\\%xxx)</code> are converted to <code>add_name(\\%xxx, 'xxx')</code>, so the subroutine knows the name of the hash and can insert it easily</p>\n\n<p>Beware of source filters: they are a very rough and ready way of making your code do what you want, and while I have coded for some leeway in where whitespace may appear, it is not an exact science and nothing this simple can fully emulate the perl parser itself</p>\n\n<h3>AddName.pm</h3>\n\n<pre><code>package AddName;\n\nuse strict;\nuse warnings;\n\nuse Exporter 'import';\nour @EXPORT = qw/ add_name /;\n\nuse Filter::Simple sub {\n    s/ \\b add_name \\s* \\( \\s* \\\\? %(\\w+) \\s* \\) /add_name(\\\\\\%$1, '$1')/gx;\n};\n\nsub add_name {\n    my ($hash, $name) = @_;\n    $_-&gt;{name} = $name for values %$hash;\n}\n\n1;\n</code></pre>\n\n<h3>test.pl</h3>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse AddName;\nuse Data::Dump;\n\nmy %hash_of_hashes = (\n    FOO =&gt; {\n        BAR =&gt; \"BAZ\",\n    },\n    ALICE =&gt; {\n        BOB =&gt; \"CHARLIE\",\n    },\n);\n\nadd_name(\\%hash_of_hashes);\n\ndd \\%hash_of_hashes;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>{\n  ALICE =&gt; { BOB =&gt; \"CHARLIE\", name =&gt; \"hash_of_hashes\" },\n  FOO =&gt; { BAR =&gt; \"BAZ\", name =&gt; \"hash_of_hashes\" },\n}\n</code></pre>\n"}], "owner": {"reputation": 5392, "user_id": 238644, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/60ef42a066987f20df7156205c322689?s=128&d=identicon&r=PG", "display_name": "Dang Khoa", "link": "https://stackoverflow.com/users/238644/dang-khoa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 36559268, "answer_count": 2, "score": 2, "last_activity_date": 1555220837, "creation_date": 1460407886, "last_edit_date": 1495540350, "question_id": 36558998, "link": "https://stackoverflow.com/questions/36558998/store-the-name-of-a-hash-inside-the-hash", "title": "Store the name of a hash, inside the hash", "body": "<p>Suppose I have a hash of hashes:</p>\n\n<pre><code>my %hash_of_hashes = (\n    FOO =&gt; {\n        BAR =&gt; \"BAZ\",\n    },\n    ALICE =&gt; {\n        BOB =&gt; \"CHARLIE\",\n    },\n);\n</code></pre>\n\n<p>Now I want to add, for reasons, some meta-data: namely the name of the hash:</p>\n\n<pre><code>%hash_of_hashes = (\n    FOO =&gt; {\n        BAR =&gt; \"BAZ\",\n        name =&gt; \"hash_of_hashes\",\n    },\n    ALICE =&gt; {\n        BOB =&gt; \"CHARLIE\",\n        name =&gt; \"hash_of_hashes\",\n    },\n);\n</code></pre>\n\n<p>I saw <a href=\"https://stackoverflow.com/questions/5199860/get-variable-name-as-string-in-perl\">this question</a> and I could do this:</p>\n\n<pre><code>use Data::Dumper::Simple;\nmy ($var) = split /=/, Dumper(%hash_of_hashes);\n</code></pre>\n\n<p>but I think that call should be encapsulated in its own <code>sub</code> (since that's a weird operation). But if I put it in a <code>sub</code>, then <code>$var</code> doesn't contain <code>'%hash_of_hashes'</code>:</p>\n\n<pre><code>sub get_hash_name{\n    my $h_ref = shift;\n    my ($name) = split /=/, Dumper($href);\n    return $name;\n}\nmy $name = get_hash_name(\\%hash_of_hashes); # $name contains $h_ref!\n</code></pre>\n\n<p>Is there any way to add on the name of the hash into the hash? (I realize <a href=\"http://perl.plover.com/varvarname.html\" rel=\"nofollow noreferrer\">it's stupid to use a variable name in a variable</a>, but I'm recursively parsing the hash and need to know what the \"parent\" hash was). </p>\n"}, {"tags": ["xml", "perl", "reference"], "comments": [{"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1460420991, "post_id": 36558539, "comment_id": 60723503, "body": "I really think your life would be improved by not using XML::Simple.  I wrote <a href=\"http://grantm.github.io/perl-libxml-by-example/\" rel=\"nofollow noreferrer\">this tutorial</a> to help people get started with XML::LibXML which is much less confusing than XML::Simple."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1460407911, "creation_date": 1460407911, "answer_id": 36559005, "question_id": 36558539, "link": "https://stackoverflow.com/questions/36558539/passing-a-xml-child-node-by-reference/36559005#36559005", "title": "Passing a xml child node by reference", "body": "<p><code>$child</code> is already a reference. You can see this if you call <code>print $child</code> or <code>print ref($child)</code> before the <code>parseXML()</code> call. You should be fine if you just call <code>parseXML($child)</code>.</p>\n\n<p><code>\\$child</code>, which is getting passed to the <code>parseXML</code> function, is necessarily a scalar reference, and it doesn't make sense to use it as a hash reference as you do inside <code>parseXML()</code>.</p>\n"}], "owner": {"reputation": 125, "user_id": 2581290, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/AloEc.png?s=128&g=1", "display_name": "PopperJuan", "link": "https://stackoverflow.com/users/2581290/popperjuan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460407911, "creation_date": 1460406167, "question_id": 36558539, "link": "https://stackoverflow.com/questions/36558539/passing-a-xml-child-node-by-reference", "title": "Passing a xml child node by reference", "body": "<p>i'm trying to pass an xml child node by reference in PERL but I keep receiving a \n\"Not a HASH reference at\" error</p>\n\n<pre><code>my $global_XMLData = $xml-&gt;XMLin($response-&gt;content(), ForceArray =&gt; ['Parent']);\n\nfor my $child(@{$global_XMLData-&gt;{Parent})\n{\n        parseXML(\\$child);\n}\n\nsub parseXML\n{\n\n    my $child= shift;\n    $global_bu{bu_id} = $child-&gt;{theAttribute};\n\n    # There's about 20-30 more attributes to get, \n    # but for this example, there's only one\n}\n</code></pre>\n\n<p>Now If i pass it by value it works just fine and I do get the data but every time i try to pass it by reference I keep receiving the error. Any help? I just don't want the data to be a copy since it's a rather large xml child node.</p>\n"}, {"tags": ["perl", "perl-module", "cpanm"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1460408699, "post_id": 36558260, "comment_id": 60718893, "body": "Start by unsetting env var <code>PERL_MM_OPT</code>. It&#39;s value is garbage anyway. (<code>PERL5LIBX</code> also appears to contains garbage, but I&#39;m not aware of anything that uses that variable.) Then, please provide the output of <code>perl -V:inst.*lib</code>"}, {"owner": {"reputation": 569, "user_id": 2574678, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/159eb66091ffc851bbf1601a3ea7bb5a?s=128&d=identicon&r=PG&f=1", "display_name": "user2574678", "link": "https://stackoverflow.com/users/2574678/user2574678"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460409091, "post_id": 36558260, "comment_id": 60719110, "body": "Thank You and here is the output: perl -V:inst.*lib installarchlib=&#39;C:\\Perl\\lib&#39;; installprivlib=&#39;C:\\Perl\\lib&#39;; installsitelib=&#39;C:\\Perl\\site\\lib&#39;; installvendorlib=&#39;&#39;;"}, {"owner": {"reputation": 569, "user_id": 2574678, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/159eb66091ffc851bbf1601a3ea7bb5a?s=128&d=identicon&r=PG&f=1", "display_name": "user2574678", "link": "https://stackoverflow.com/users/2574678/user2574678"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460412508, "post_id": 36558260, "comment_id": 60720790, "body": "@ikegami - Thank you for your input, I got rid of the env var you suggested and then used cpanm --mirror file:///c:/dist/  MIME::Lite"}], "answers": [{"tags": [], "owner": {"reputation": 569, "user_id": 2574678, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/159eb66091ffc851bbf1601a3ea7bb5a?s=128&d=identicon&r=PG&f=1", "display_name": "user2574678", "link": "https://stackoverflow.com/users/2574678/user2574678"}, "is_accepted": false, "score": 0, "last_activity_date": 1460459855, "last_edit_date": 1460459855, "creation_date": 1460412563, "answer_id": 36560178, "question_id": 36558260, "link": "https://stackoverflow.com/questions/36558260/perl-cpanm-installing-into-c-perl-lib-perl5-folder-instead-of-c-perl-lib/36560178#36560178", "title": "Perl - CPANM installing into C:\\Perl\\lib\\perl5 folder instead of C:\\Perl\\lib", "body": "<p><code>cpanm</code>'s <code>-l</code> option and <code>PERL_MM_OPT</code>'s <code>INSTALL_BASE</code> option override the installation locations. Without them, the library's installer will get the correct installation path from <code>perl</code>. In other words, changing</p>\n\n<pre><code>set PERL_MM_OPT=\"INSTALL_BASE=y\"\nset PERL_MB_OPT=\ncpanm --mirror file:///C:/dist/ -l c:/perl MIME::Lite\n</code></pre>\n\n<p>to </p>\n\n<pre><code>set PERL_MM_OPT=\nset PERL_MB_OPT=\ncpanm --mirror file:///c:/dist/ MIME::Lite\n</code></pre>\n\n<p>worked.</p>\n"}, {"tags": [], "owner": {"reputation": 950, "user_id": 4602706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b64888d22d66dba1cf962631eb7fa62?s=128&d=identicon&r=PG", "display_name": "Marco Vargas", "link": "https://stackoverflow.com/users/4602706/marco-vargas"}, "is_accepted": false, "score": 0, "last_activity_date": 1485977599, "creation_date": 1485977599, "answer_id": 41988144, "question_id": 36558260, "link": "https://stackoverflow.com/questions/36558260/perl-cpanm-installing-into-c-perl-lib-perl5-folder-instead-of-c-perl-lib/41988144#41988144", "title": "Perl - CPANM installing into C:\\Perl\\lib\\perl5 folder instead of C:\\Perl\\lib", "body": "<p>I had the same situation, and after some posts I found <a href=\"http://www.perlmonks.org/bare/?node_id=865684\" rel=\"nofollow noreferrer\">this</a>: </p>\n\n<blockquote>\n  <p>CORE modules are installed under perl/lib whereas non-CORE modules\n  install under perl/site/lib.</p>\n  \n  <p>the modules that came with your original installation go into lib.\n  Newer versions go into site/lib. At least on ActiveState Perl and\n  Strawberry Perl, both on Windows.</p>\n</blockquote>\n"}], "owner": {"reputation": 569, "user_id": 2574678, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/159eb66091ffc851bbf1601a3ea7bb5a?s=128&d=identicon&r=PG&f=1", "display_name": "user2574678", "link": "https://stackoverflow.com/users/2574678/user2574678"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1485977599, "creation_date": 1460405175, "last_edit_date": 1460412526, "question_id": 36558260, "link": "https://stackoverflow.com/questions/36558260/perl-cpanm-installing-into-c-perl-lib-perl5-folder-instead-of-c-perl-lib", "title": "Perl - CPANM installing into C:\\Perl\\lib\\perl5 folder instead of C:\\Perl\\lib", "body": "<p>I am using CPANM to install modules on a WIN32 machine, using CPANM because the machine has no access to the internet.</p>\n\n<p>My perl install is in C:\\Perl and my lib folder is C:\\Perl\\lib</p>\n\n<p>CPANM modules and dependencies were downloaded locally on a different machine using the following  (example on how I downloaded MIME::Lite) :-</p>\n\n<pre><code>cpanm -q --scandeps MIME::Lite --save-dists c:\\dist\n</code></pre>\n\n<p>Using following to install MIME::Lite on the other machine</p>\n\n<pre><code>cpanm --mirror file:///C:/dist/ -l c:/perl MIME::Lite\n</code></pre>\n\n<p>The issue is that cpanm is installing my modules in C:\\Perl\\lib\\perl5 but I instead want the modules installed in C:\\Perl\\lib</p>\n\n<p>I have no idea how to override this default behavior.</p>\n\n<p>Environment is Windows, excerpt from Perl -V</p>\n\n<pre><code>  ActivePerl Build 2003 [299574]\n  Built under MSWin32\n  Compiled at Dec 25 2015 11:33:14\n  %ENV:\n    PERL5LIBX=\"%PERL5LIB%\"\n    PERL_MM_OPT=\"INSTALL_BASE=y\"\n  @INC:\n    C:/Perl/site/lib\n    C:/Perl/lib\n    .\n</code></pre>\n"}, {"tags": ["ruby", "perl", "awk", "sed", "cut"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1460405474, "post_id": 36556989, "comment_id": 60717071, "body": "Why the rush to select an answer?In general, quick-draw selections can discourage other, possibly better answers, or even show the selected answer to be incorrect. Also, did it occur to you that others might still be preparing their answers?  There&#39;s no rush. Many here wait at least a couple of hours before making a selection."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1460408414, "post_id": 36556989, "comment_id": 60718749, "body": "Welcome to Stack Overflow. Remember that it takes the earth 24 hours to rotate, and, because SO has people around the world contributing, it&#39;s very sensible to wait a day to select an answer. Grabbing the first one, or one in the first hour, can result in implementing an answer that isn&#39;t as good as one that will follow 23 hours later, since it can take a while to formulate an answer, test it, then write it up."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1460408613, "post_id": 36556989, "comment_id": 60718851, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;, &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;, <a href=\"https://codeblog.jonskeet.uk/2010/08/29/writing-the-perfect-question/\" rel=\"nofollow noreferrer\">codeblog.jonskeet.uk/2010/08/29/writing-the-perfect-question</a> and <a href=\"http://catb.org/esr/faqs/smart-questions.html\" rel=\"nofollow noreferrer\">catb.org/esr/faqs/smart-questions.html</a>. As is, your question is missing example input, example output, and your evidence of effort, such as code you wrote toward solving the problem."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1460410204, "post_id": 36556989, "comment_id": 60719680, "body": "You currently have accepted an answer that fully reflects the effort you have put into asking the question. It will not work for some input values, cannot be extended to work for other combinations of &quot;columns&quot;, and is non-portable across UNIX installations. Good luck!"}], "answers": [{"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": true, "score": 1, "last_activity_date": 1460408486, "last_edit_date": 1460408486, "creation_date": 1460403028, "answer_id": 36557613, "question_id": 36556989, "link": "https://stackoverflow.com/questions/36556989/rearrange-ranges-of-columns-in-a-text-file/36557613#36557613", "title": "Rearrange ranges of columns in a text file", "body": "<p>You can do a combination of <code>awk</code> and <code>cut</code> assuming the fields are separated by white space:</p>\n\n<pre><code>awk '{$30=$5;$31=$32}1' file | cut -d' ' -f5,32 --complement\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>$ seq 32 | paste -s | \n  awk '{$30=$5;$31=$32}1' | \n  cut -d' ' -f5,32 --complement\n\n1 2 3 4 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 5 32\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 1910881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c64adf8e52b9ff7f284549d69e37fad?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/1910881/will"}, "edited": false, "score": 0, "creation_date": 1460407563, "post_id": 36558300, "comment_id": 60718262, "body": "No, 32 columns, not 32 characters."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 23, "user_id": 1910881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c64adf8e52b9ff7f284549d69e37fad?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/1910881/will"}, "edited": false, "score": 0, "creation_date": 1460409236, "post_id": 36558300, "comment_id": 60719185, "body": "Text files do not have columns. That&#39;s why I assumed you mean characters. You need to edit your question to explain what each line in the file looks like."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 23, "user_id": 1910881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c64adf8e52b9ff7f284549d69e37fad?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/1910881/will"}, "edited": false, "score": 1, "creation_date": 1460409250, "post_id": 36558300, "comment_id": 60719193, "body": "@Will that&#39;s part of the problem with your question. 32 columns can and often does mean 32 characters - since you haven&#39;t posted a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> even those few who do want to try to help you given how little effort you&#39;ve put into asking the question are just guessing at what you want."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1460405670, "last_edit_date": 1460405670, "creation_date": 1460405319, "answer_id": 36558300, "question_id": 36556989, "link": "https://stackoverflow.com/questions/36556989/rearrange-ranges-of-columns-in-a-text-file/36558300#36558300", "title": "Rearrange ranges of columns in a text file", "body": "<p>I assume you mean each line of a file contains 32 characters, followed by a newline, and you wish to extract the strings for groups of adjacent columns given by:</p>\n\n<pre><code>column_groups = [1..4, 6..29, 5, 32]\n</code></pre>\n\n<p>Suppose you've read the input file into an array and</p>\n\n<pre><code>line = \"abcdefghijklmnopqrstuvwxyzABCDEF\\n\"\n  #     0        10        20        30 (offsets)\n</code></pre>\n\n<p>is one element of that array.</p>\n\n<p>Then you can do this:</p>\n\n<pre><code>range_offsets = column_groups.map do |obj|\n  case obj\n  when Range\n    obj.first-1..obj.last-1\n  else\n    obj-1..obj-1\n  end\nend\n  #=&gt; [0..3, 5..28, 4..4, 31..31]\n\narr = line.chars\n  #=&gt; [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\",\n  #    \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\",\n  #    \"w\", \"x\", \"y\", \"z\", \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"\\n\"] \n\nrange_offsets.map { |range| arr.values_at(*[*range]).join }\n  #=&gt; [\"abcd\", \"fghijklmnopqrstuvwxyzABC\", \"e\", \"F\"]\n</code></pre>\n\n<p>If you wish to return a single string, tack another <code>join</code> to the end:</p>\n\n<pre><code>range_offsets.map { |range| arr.values_at(*[*range]).join }.join\n  #=&gt; \"abcdfghijklmnopqrstuvwxyzABCeF\"\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 1910881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c64adf8e52b9ff7f284549d69e37fad?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/1910881/will"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1460421531, "accepted_answer_id": 36557613, "answer_count": 2, "score": -4, "last_activity_date": 1460408486, "creation_date": 1460401011, "question_id": 36556989, "link": "https://stackoverflow.com/questions/36556989/rearrange-ranges-of-columns-in-a-text-file", "closed_reason": "Needs details or clarity", "title": "Rearrange ranges of columns in a text file", "body": "<p>I'm looking to rearrange some columns in a text file.</p>\n\n<p>Basically I've got 32 columns and want 1-4,6-29,5,32</p>\n\n<p>I can brute force this with awk, but that seems dumb. Any recommendations?</p>\n"}, {"tags": ["regex", "perl", "parsing"], "comments": [{"owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1460400333, "post_id": 36556732, "comment_id": 60713869, "body": "<code>$myhash{ $atom } = [ $xcor, $ycor, $zcor ]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 4, "last_activity_date": 1460400523, "creation_date": 1460400523, "answer_id": 36556830, "question_id": 36556732, "link": "https://stackoverflow.com/questions/36556732/how-do-i-read-lines-from-a-file-into-a-hash-in-perl/36556830#36556830", "title": "How do i read lines from a file into a hash in Perl", "body": "<p>Instead of using a regex, I would instead recommend using <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow\">split</a> to split it into fields on whitespace. This will be faster and more robust, it doesn't depend on a detailed knowledge of the format of each field (which could change, like if a number has a minus sign which you forgot to take into account). And it's a lot easier to understand.</p>\n\n<pre><code>my @fields = split /\\s+/, $line;\n</code></pre>\n\n<p>Then you can pick out the fields (for example, the first number is field 2, so <code>$fields[1]</code>) and put them into your hash.</p>\n\n<pre><code>my %coordinate = (\n    atom =&gt; $fields[1],\n    x    =&gt; $fields[6],\n    y    =&gt; $fields[7],\n    z    =&gt; $fields[8]\n);\n</code></pre>\n\n<p>You're reading a bunch of lines, so you're going to make a bunch of hashes which have to go somewhere.  I'd recommend putting them all in another hash with some sort of unique field as the key.  Possibly the <code>atom</code> field.</p>\n\n<pre><code>$atoms{$coordinate{atom}} = \\%coordinate;\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 5908886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uYdJhbYiFlE/AAAAAAAAAAI/AAAAAAAANT8/Pd71JaSj2zk/photo.jpg?sz=128", "display_name": "SaltedPork", "link": "https://stackoverflow.com/users/5908886/saltedpork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 36556830, "answer_count": 1, "score": 0, "last_activity_date": 1460400523, "creation_date": 1460400217, "question_id": 36556732, "link": "https://stackoverflow.com/questions/36556732/how-do-i-read-lines-from-a-file-into-a-hash-in-perl", "title": "How do i read lines from a file into a hash in Perl", "body": "<p>I'm working with a file format that has lines of information that looks like this:</p>\n\n<p>ATOM      1  N   LYS A  56      20.508  14.774  -7.432  1.00 50.83           N</p>\n\n<p>All i want is the first number, and the three numbers following '56' in the example above; so im using regular expressions to get that information. How do i then put that info into a hash?</p>\n\n<p>So far i have:</p>\n\n<pre><code>my $pdb_file = $ARGV[0];\nopen (PDBFILE, \"&lt;$pdb_file\") or die (\"$pdb_file not found\");\nwhile (&lt;PDBFILE&gt;) { \nif ($_=~ /^ATOM\\s+(\\d+)\\s+\\w+\\s+\\w+\\s+\\w+\\s+\\d+\\s+(\\d+\\.\\d+)\\s+(\\d+\\.\\d+)\\s+(\\d+\\.\\d+)/) {\nmy $atom = $1;\nmy $xcor = $2;\nmy $ycor = $3;\nmy $zcor = $4;\nprint \"AtomNumber: $atom\\t  xyz: $xcor $ycor $zcor\\n\";\n}\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl", "substr"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1460399485, "post_id": 36555799, "comment_id": 60713323, "body": "Have you looked to see what <code>$mines</code> is at the time you get that warning? (Hint: it&#39;s probably the empty string <code>&#39;&#39;</code>)"}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1460407923, "post_id": 36555799, "comment_id": 60718472, "body": "I&#39;m not sure how you want to build this &#39;ladder&#39;. Do you want an end result to be an array containing <code>(&#39;this&#39;, &#39;thin&#39;)</code>?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1460411583, "post_id": 36555799, "comment_id": 60720369, "body": "It is great that you post code, of course, but I&#39;d suggest you add a precise worded description of the algorithm."}], "owner": {"user_type": "does_not_exist", "display_name": "user4332327"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1460397248, "creation_date": 1460397248, "question_id": 36555799, "link": "https://stackoverflow.com/questions/36555799/array-of-arrays-and-subroutines", "title": "Array of arrays and subroutines", "body": "<p>I'm having a difficult time in perl with array of arrays and subroutines. I am trying the word ladder problem where I want to find a some sequence of steps between two words given some dictionary. When I attempt to run my perl program I get warnings at my string comparison step. Here is my simplified approach:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\n\nmy @list = (\"this\", \"that\", \"thin\", \"thus\", \"past\");\nmy $myword = \"thip\";\nmy $end = \"thus\";\nmy @aoa = ([$myword]);\nmy $diff_chars = 0;\nmy $i = 0;\n\nforeach (@aoa){\n  #push a word from @list with one letter difference onto our $_\n  push $_, routine($_, $_-&gt;[-1]);\n  push @aoa, $_;\n  #if we the last element in our list matches the end then we are done\n  if($_-&gt;[-1] eq $end){\n    print \"we found a path via $_\\n\";\n    last;\n  }\n}\n\nsub routine{\n  my @arr = @{$_[0]};\n  my $mines = $_[1];\n  my $index = 0;\n  foreach my $word (@list){\n    $diff_chars = 0;\n    $i = 0;\n    $index++;\n    next if grep{$_ eq $word} @arr;\n    foreach my $char (split //, $word){\n      if($char ne substr $mines, $i, 1){\n        $diff_chars++;\n      }\n      $i++;\n    }\n    if($diff_chars == 1){\n      #remove $word from list to remove possible duplicates\n      splice @list, $index, 1;\n      return $word;\n    }\n  }\n}\n</code></pre>\n\n<p>Upon running this, I get an infinite loop that continues to output the warning </p>\n\n<pre><code>substr outside of string at t.pl line 33.\nUse of uninitialized value in string ne at t.pl line 33.\n</code></pre>\n\n<p>which is my <code>if($char ne substr $mines, $i, 1)</code> line. I am unsure why I am getting this and have been trying to fix this error for a couple hours now and could really use some help.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 713, "user_id": 734598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce678494043d536df4555cc33338f41e?s=128&d=identicon&r=PG", "display_name": "sigmalha", "link": "https://stackoverflow.com/users/734598/sigmalha"}, "edited": false, "score": 2, "creation_date": 1460394700, "post_id": 36554948, "comment_id": 60710426, "body": "perl -p0e &quot;s#Chorus:(.*?)\\n\\n#&lt;i&gt;Chorus:\\$1&lt;/i&gt;#gsm&quot; file .escape the $"}, {"owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 2, "creation_date": 1460394786, "post_id": 36554948, "comment_id": 60710476, "body": "Use single quotes on the commandline to wrap perl expressions otherwise the shell expansion will kick in. Alternatively, escape the <code>$</code> like @sigmatha suggests."}, {"owner": {"reputation": 393, "user_id": 4502993, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/DNPz8.jpg?s=128&g=1", "display_name": "One Face", "link": "https://stackoverflow.com/users/4502993/one-face"}, "reply_to_user": {"reputation": 713, "user_id": 734598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce678494043d536df4555cc33338f41e?s=128&d=identicon&r=PG", "display_name": "sigmalha", "link": "https://stackoverflow.com/users/734598/sigmalha"}, "edited": false, "score": 0, "creation_date": 1460394916, "post_id": 36554948, "comment_id": 60710551, "body": "Thanks @sigmalha for the solution. That did it!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 713, "user_id": 734598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce678494043d536df4555cc33338f41e?s=128&d=identicon&r=PG", "display_name": "sigmalha", "link": "https://stackoverflow.com/users/734598/sigmalha"}, "edited": false, "score": 0, "creation_date": 1460394969, "post_id": 36554948, "comment_id": 60710582, "body": "@sigmalha: Please post your comment as a solution"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1460395481, "post_id": 36554948, "comment_id": 60710897, "body": "<code>-0</code> doesn&#39;t slurp the whole file. It&#39;s <code>-0777</code> that does that."}], "answers": [{"comments": [{"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1460395392, "post_id": 36555180, "comment_id": 60710844, "body": "In my opinion, it&#39;s a bad idea to escape individual characters like that; too easy to miss some.  Single-quotes is a more reliable approach."}, {"owner": {"reputation": 713, "user_id": 734598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce678494043d536df4555cc33338f41e?s=128&d=identicon&r=PG", "display_name": "sigmalha", "link": "https://stackoverflow.com/users/734598/sigmalha"}, "reply_to_user": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1460395530, "post_id": 36555180, "comment_id": 60710930, "body": "yep.it&#39;s just a quick and dirty way."}], "tags": [], "owner": {"reputation": 713, "user_id": 734598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce678494043d536df4555cc33338f41e?s=128&d=identicon&r=PG", "display_name": "sigmalha", "link": "https://stackoverflow.com/users/734598/sigmalha"}, "is_accepted": false, "score": 2, "last_activity_date": 1460395415, "last_edit_date": 1460395415, "creation_date": 1460395156, "answer_id": 36555180, "question_id": 36554948, "link": "https://stackoverflow.com/questions/36554948/how-to-match-n-n-using-perl-one-liner/36555180#36555180", "title": "How to match \\n\\n using perl one liner?", "body": "<p>escape the $</p>\n\n<pre><code>perl -p0777e \"s#Chorus:(.*?)\\n\\n#&lt;i&gt;Chorus:\\$1&lt;/i&gt;#gsm\" file.\n</code></pre>\n\n<p>also as @Kenney mention in the comment:</p>\n\n<pre><code>Use single quotes on the commandline to wrap perl expressions otherwise the shell expansion will kick in.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": true, "score": 2, "last_activity_date": 1460396050, "last_edit_date": 1460396050, "creation_date": 1460395282, "answer_id": 36555216, "question_id": 36554948, "link": "https://stackoverflow.com/questions/36554948/how-to-match-n-n-using-perl-one-liner/36555216#36555216", "title": "How to match \\n\\n using perl one liner?", "body": "<p>Your solution would work if you just put it in single quotes instead of double quotes. You should pretty much <em>always</em> use single quotes for one-liners from the shell, no matter what language/interpreter you're running, to keep shell interpolation from messing things up.</p>\n\n<p>In your code: </p>\n\n<pre><code>perl -p0e \"s#Chorus:(.*?)\\n\\n#&lt;i&gt;Chorus:$1&lt;/i&gt;#gsm\" file\n</code></pre>\n\n<p>The <code>$1</code> is being expanded by the shell before it ever gets to Perl, so Perl sees this:</p>\n\n<pre><code>perl -p0e \"s#Chorus:(.*?)\\n\\n#&lt;i&gt;Chorus:&lt;/i&gt;#gsm\" file\n</code></pre>\n\n<p>and happily deletes your chorus.  If you use single quotes instead:</p>\n\n<pre><code>perl -p0e 's#Chorus:(.*?)\\n\\n#&lt;i&gt;Chorus:$1&lt;/i&gt;#gsm' file\n</code></pre>\n\n<p>it will work as intended.  </p>\n\n<p>Note, however, that the <code>-0</code> means any NUL characters that creep into the input will still cause Perl to split it into multiple records at that point. A more correct solution would be to use <code>-0777</code> instead, which tells Perl that no value should split the input; it is treated as a single record no matter what data it contains.</p>\n\n<pre><code>perl -p0777e 's#Chorus:(.*?)\\n\\n#&lt;i&gt;Chorus:$1&lt;/i&gt;#gsm' file\n</code></pre>\n"}], "owner": {"reputation": 393, "user_id": 4502993, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/DNPz8.jpg?s=128&g=1", "display_name": "One Face", "link": "https://stackoverflow.com/users/4502993/one-face"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 36555216, "answer_count": 2, "score": 0, "last_activity_date": 1460396050, "creation_date": 1460394358, "last_edit_date": 1460394668, "question_id": 36554948, "link": "https://stackoverflow.com/questions/36554948/how-to-match-n-n-using-perl-one-liner", "title": "How to match \\n\\n using perl one liner?", "body": "<p>My Sample file:</p>\n\n<pre>\nAs I Come Into Your Presence \nKey: F\n\n1 As I come into Your presence\nPast the gates of praise\nInto Your sanctuary\nTill we are standing face to face \nAnd look upon Your countenance\nI see the fullness of Your glory\nAnd I can only bow down and say \n\nChorus:\nYour awesome in this place\nMighty God\nYou are awesome in this place\nAbba Father\nYou are worthy of all praise\nTo You our lives we raise\nYou are awesome in this place\nMighty God\n    &lt;--- Empty line here\n    &lt;--- Empty line here\n</pre>\n\n<p>I wrote this perl one-liner to get <code>&lt;i&gt;&lt;/i&gt;</code> tags around the entire chorus block:</p>\n\n<pre><code>perl -p0e \"s#Chorus:(.*?)\\n\\n#&lt;i&gt;Chorus:$1&lt;/i&gt;#gsm\" file\n</code></pre>\n\n<p>The result:</p>\n\n<pre>\nAs I Come Into Your Presence \nKey: F\n\n1 As I come into Your presence\nPast the gates of praise\nInto Your sanctuary\nTill we are standing face to face \nAnd look upon Your countenance\nI see the fullness of Your glory\nAnd I can only bow down and say \n\n&lt;i&gt;Chorus:&lt;/i&gt;% \n</pre>\n\n<p>I can't get the desired result where the <code>&lt;/i&gt;</code> tag would be printed after the entire chorus after the <code>Mighty God</code>.</p>\n\n<p>Where is the error? How can I achieve this?</p>\n"}, {"tags": ["perl", "memory", "dump"], "comments": [{"owner": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "edited": false, "score": 0, "creation_date": 1460389715, "post_id": 36553259, "comment_id": 60707207, "body": "Check <a href=\"http://search.cpan.org/~ams/Storable-2.51/Storable.pm\" rel=\"nofollow noreferrer\">Storable</a>. It&#39;s not an automatic dump of the whole script, but you will be able to store the variables you want as long as they are within a reasonable memory footprint."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1460390996, "post_id": 36553259, "comment_id": 60708120, "body": "This was the intention of the builtin <a href=\"http://perldoc.perl.org/functions/dump.html\" rel=\"nofollow noreferrer\"><code>dump</code></a> function, but it doesn&#39;t sound too easy to use."}, {"owner": {"reputation": 147, "user_id": 1958295, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dce738831c2712369e3ce16cab9a26b6?s=128&d=identicon&r=PG", "display_name": "Mojo", "link": "https://stackoverflow.com/users/1958295/mojo"}, "edited": false, "score": 0, "creation_date": 1460439487, "post_id": 36553259, "comment_id": 60728782, "body": "In Storable I need to store each and every parameter , I want something that does memory freeze and dump all the script paramaters to a file,, if that possible of course"}], "owner": {"reputation": 147, "user_id": 1958295, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dce738831c2712369e3ce16cab9a26b6?s=128&d=identicon&r=PG", "display_name": "Mojo", "link": "https://stackoverflow.com/users/1958295/mojo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1460389315, "creation_date": 1460389315, "question_id": 36553259, "link": "https://stackoverflow.com/questions/36553259/dump-all-memory-of-perl-script-in-certain-point-to-an-image", "title": "dump all memory of perl script in certain point to an image", "body": "<p>Can I make some kind of dump file , which contains all the variables / objects / params that a script has , in a certain point of a script , so I can then start my script from this point again without the need to load them again and just load them from the file ?</p>\n\n<p>I hope I was clear enough..</p>\n\n<p>thanks !</p>\n"}, {"tags": ["perl", "spreadsheet"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460382696, "post_id": 36549889, "comment_id": 60702035, "body": "I think that is currently not possible. It seems like you can neither rename, move or create a new spreadsheet. You can only operate on existing spreadsheets. It&#39;s possible to change worksheets within existing spreadsheets though."}, {"owner": {"reputation": 15, "user_id": 1078796, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/352b51feb3d98fbcf7144af0ccf6095a?s=128&d=identicon&r=PG", "display_name": "user1078796", "link": "https://stackoverflow.com/users/1078796/user1078796"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460397775, "post_id": 36549889, "comment_id": 60712262, "body": "Thanks. That is bad, actually. My idea was to keep only one worksheet inside of shared spreadsheet. And as long as we can&#39;t delete the last worksheet, I thought I would be able to rename existing one, then create new one and fill it with data, then delete first one. Now the only solution is to create temporary, then delete existing, then create and fill up new one, and then delete temporary. = Wasting time."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460399839, "post_id": 36549889, "comment_id": 60713549, "body": "I have not seen a method to make a new one, so how would that work programatically? You can of course check the source code of that module, and the API description and write a patch. The author has the github linked on metacpan."}, {"owner": {"reputation": 15, "user_id": 1078796, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/352b51feb3d98fbcf7144af0ccf6095a?s=128&d=identicon&r=PG", "display_name": "user1078796", "link": "https://stackoverflow.com/users/1078796/user1078796"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460405393, "post_id": 36549889, "comment_id": 60717019, "body": "To add new worksheet you need: <code>my $new_worksheet = $spreadsheet-&gt;add_worksheet(     {         title =&gt; &#39;New_Worksheet-2&#39;,         row_count =&gt; 10,         col_count =&gt; 15,     }   );</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460446468, "post_id": 36549889, "comment_id": 60732537, "body": "But that says <i>worksheet</i>. I thought a worksheet is a page, and a <i>spreadsheet</i> is a document. Maybe that wasn&#39;t clear from the question."}, {"owner": {"reputation": 15, "user_id": 1078796, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/352b51feb3d98fbcf7144af0ccf6095a?s=128&d=identicon&r=PG", "display_name": "user1078796", "link": "https://stackoverflow.com/users/1078796/user1078796"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460462700, "post_id": 36549889, "comment_id": 60743962, "body": "You cant add the data to spreadsheet. But you can do it into worksheet. That is why I do not really care about spreadsheet. You are actually right - there is no example how to create spreadsheet, only how to delete one."}], "answers": [{"tags": [], "owner": {"reputation": 102, "user_id": 6103614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e1e94074e089422d2d94e1d21117200?s=128&d=identicon&r=PG&f=1", "display_name": "thecoder", "link": "https://stackoverflow.com/users/6103614/thecoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1461169491, "creation_date": 1461169491, "answer_id": 36749793, "question_id": 36549889, "link": "https://stackoverflow.com/questions/36549889/perl-api-netgooglespreadsheets-how-to-rename-worksheet-and-spreadsheet/36749793#36749793", "title": "Perl API Net::Google::Spreadsheets, how to rename worksheet and spreadsheet?", "body": "<p>Not really possible without write a patch. But you can create a new worksheet and delete the old worksheet. </p>\n\n<pre><code># delete the worksheet\n$worksheet-&gt;delete;\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 1078796, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/352b51feb3d98fbcf7144af0ccf6095a?s=128&d=identicon&r=PG", "display_name": "user1078796", "link": "https://stackoverflow.com/users/1078796/user1078796"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461169491, "creation_date": 1460380680, "question_id": 36549889, "link": "https://stackoverflow.com/questions/36549889/perl-api-netgooglespreadsheets-how-to-rename-worksheet-and-spreadsheet", "title": "Perl API Net::Google::Spreadsheets, how to rename worksheet and spreadsheet?", "body": "<p>I got the answer how to find worksheet title.\nNow I would like to ask for your help to explain me how to rename worksheet or spreadsheet. CPAN documentation doesn't have any suggestion.\nThank you in advance.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 4402293, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lJmJE5gil1g/AAAAAAAAAAI/AAAAAAAAAeI/6TXMW9kfrY8/photo.jpg?sz=128", "display_name": "Diego", "link": "https://stackoverflow.com/users/4402293/diego"}, "edited": false, "score": 0, "creation_date": 1460413439, "post_id": 36549220, "comment_id": 60721124, "body": "I made the following test.pl  <code>my $value = $ARGV[0];       my $i;     while(1)       {           if ($handle_mem -&gt; shlock())            {             print &quot;It is now locked for me\\n&quot;;             $memAAA{$value} = $i++;             $handle_mem -&gt; shunlock();         }          else          {             print &quot;$i:The shared resource is locked\\n&quot;;         }         }</code>    I had the file running in multiple instances with different ARGV values and I was not able to hit a single case of the &quot;else&quot; condition, is this correct and the system is just too fast? or am I missing something?"}, {"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1563102679, "post_id": 36549220, "comment_id": 100583105, "body": "IPC::Shareable is good it has limits on shared memory segments / semaphore arrays. I tried to spawn 10 processes with a shared array (having 10,000 elements) and it exhausted the shm already. wish there was a workaround for that."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1460379058, "creation_date": 1460379058, "answer_id": 36549220, "question_id": 36546989, "link": "https://stackoverflow.com/questions/36546989/ipcshareable-sharing/36549220#36549220", "title": "IPC::Shareable sharing", "body": "<p>You need to use a locking mechanism. (One is provided by the module.) Otherwise, changing any value of the hash can cause the loss of any other value changed at the same time. The following program demonstrates this quite easily:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse IPC::Shareable qw( );\n\nmy $glue = 'data';\nmy %options = (\n    create    =&gt; 1,\n    exclusive =&gt; 0,\n    mode      =&gt; 0644,\n    destroy   =&gt; 0,\n);\n\nmy ($key) = @ARGV\n   or die(\"usage\\n\");\n\ntie(my %h, 'IPC::Shareable', $glue, \\%options);\n\nmy $c;\nwhile (1) {\n   $h{$key} = ++$c;\n\n   my $got = $h{$key};\n   die(\"$key was overwritten (got $got; expected $c)\\n\")\n      if $got != $c;\n}\n</code></pre>\n\n<p>Run it as follows in one console:</p>\n\n<pre><code>perl a.pl foo\n</code></pre>\n\n<p>Then run it as follows in another console:</p>\n\n<pre><code>perl a.pl bar\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 658, "user_id": 4814971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KzV61.jpg?s=128&g=1", "display_name": "Jacques", "link": "https://stackoverflow.com/users/4814971/jacques"}, "is_accepted": false, "score": 1, "last_activity_date": 1611386408, "creation_date": 1611386408, "answer_id": 65856749, "question_id": 36546989, "link": "https://stackoverflow.com/questions/36546989/ipcshareable-sharing/65856749#65856749", "title": "IPC::Shareable sharing", "body": "<p>The key (no pun intended) to make it work with <a href=\"https://metacpan.org/pod/IPC::Shareable\" rel=\"nofollow noreferrer\">IPC::Shareable</a> it to provide a key as one of the initial parameters:</p>\n<pre><code>use IPC::SysV qw( ftok );\ntie( %hash, 'IPC::Shareable', $glue, { key =&gt; ftok(__FILE__,1234567) });\n</code></pre>\n<p>It is better to use the <code>ftok</code> function from <a href=\"https://metacpan.org/pod/IPC::SysV\" rel=\"nofollow noreferrer\">IPC::SysV</a>, because if you provide a string to IPC::Shareable, it will make it a numeric id using only the first 4 characters. Thus if you have two processes with one using <code>test_one</code> as a key and ther other <code>test_two</code>, both process will use the same shared memory segment, because in both case the resulting key produced by IPC::Shareable will be <code>1953719668</code>. Worse is that if the first process creates a shared memory segment of, say 2048 bytes and you want the second to create one of 524288 bytes, you will actually end up with accessing the first shared memory segment with only 2048 bytes in size and its data, with the risk of modifying the wrong data.</p>\n<p>If you use <code>ftok</code> even if you spawn 10,000 processes, it will always access the shared data without loss, because IPC::Shareable uses <a href=\"https://metacpan.org/pod/IPC::Semaphore\" rel=\"nofollow noreferrer\">semaphore</a> to ensure each process access the data one after the other.</p>\n"}], "owner": {"reputation": 39, "user_id": 4402293, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lJmJE5gil1g/AAAAAAAAAAI/AAAAAAAAAeI/6TXMW9kfrY8/photo.jpg?sz=128", "display_name": "Diego", "link": "https://stackoverflow.com/users/4402293/diego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1611386408, "creation_date": 1460372890, "question_id": 36546989, "link": "https://stackoverflow.com/questions/36546989/ipcshareable-sharing", "title": "IPC::Shareable sharing", "body": "<p>I have a shared hash using the following:</p>\n\n<pre><code>my $glue = 'data';\nmy %options = (\n    create    =&gt; 1,\n    exclusive =&gt; 0,\n    mode      =&gt; 0644,\n    destroy   =&gt; 0,\n);\n\ntie %hash1, 'IPC::Shareable', $glue, { %options };\n</code></pre>\n\n<p>The %hash1 declared as above, is in a single perl file, but it is called by multiple applications, each application modifies its own index of the hash:</p>\n\n<pre><code>Application1 --&gt; $hash1{app1}=\"alpha\";\nApplication2 --&gt; $hash1{app2}=\"betta\";\n...\n</code></pre>\n\n<p>given that applications may or may not run simultanously, will there be an data loss if application1 and application2 try to modify the hash simultaneously?</p>\n"}, {"tags": ["arrays", "perl", "split"], "comments": [{"owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "edited": false, "score": 1, "creation_date": 1460383260, "post_id": 36546470, "comment_id": 60702469, "body": "I see no reason not to accept one of these answers, each of which solves your problem"}], "answers": [{"comments": [{"owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "edited": false, "score": 0, "creation_date": 1460376812, "post_id": 36546645, "comment_id": 60697304, "body": "perhaps <code>$data</code> should not be there"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1460377152, "last_edit_date": 1460377152, "creation_date": 1460371958, "answer_id": 36546645, "question_id": 36546470, "link": "https://stackoverflow.com/questions/36546470/perl-and-foreach-loop-with-splitting/36546645#36546645", "title": "Perl and Foreach loop with Splitting", "body": "<pre><code> split /#/          # A \"#\" separates the two.\n</code></pre>\n\n<p>should be</p>\n\n<pre><code> split /\\n#+\\n/     # A line of \"#\" separates the two.\n</code></pre>\n\n<hr>\n\n<p>With other improvements:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $config_qfn = 'config.conf';\n\nopen(my $config_fh, \"&lt;\", $config_qfn )\n    or die(\"Can't open \\\"$config_qfn\\\": $!\\n\");\n\nlocal $/ = \"\";  # Paragraph mode\nwhile (my $rec = &lt;$config_fh&gt;) {\n    my ($name, $value) = split(/\\n#+\\n/, $rec);\n    print \"\\$name = $name\\n\";\n    print \"\\$value = $value\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460372811, "post_id": 36546684, "comment_id": 60694575, "body": "@ikegami Thank you for your use full comment. I remove the trailing and leading newline by splitting.  And then i changed the <code>@value</code>  to <code>$value</code>. :)"}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 1, "last_activity_date": 1460372692, "last_edit_date": 1460372692, "creation_date": 1460372075, "answer_id": 36546684, "question_id": 36546470, "link": "https://stackoverflow.com/questions/36546470/perl-and-foreach-loop-with-splitting/36546684#36546684", "title": "Perl and Foreach loop with Splitting", "body": "<p>You want to split by multiple <code>#</code> so use <code>#+</code></p>\n\n<p><code>+</code> match one or more times. </p>\n\n<p>Try it</p>\n\n<p>#!/usr/bin/perl</p>\n\n<pre><code>use strict;\n\nmy $pathconfigfile = 'config.conf';\nmy @configline;\n\nopen(my $configfile, \"&lt;\", $pathconfigfile);\n\nlocal $/;\nmy @configdata  = split(\"\\n\\n\",&lt;$configfile&gt;);\n\n\nforeach my $data (@configdata){\n    my ($name,$value) = split /\\n#+\\n/, $data;\n    print \"$name $value\\n\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460373909, "post_id": 36547317, "comment_id": 60695312, "body": "Note: This assumes that the value doesn&#39;t contain any whitespace characters. It also assumes that the name is exactly one line long, and that the value is always exactly two lines long."}, {"owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460374194, "post_id": 36547317, "comment_id": 60695526, "body": "Thank you! Will <code>$_ =~ s&#47;\\n&#47;&#47; for keys %hash</code> help if necessary? Or I can&#39;t understand you?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460374266, "post_id": 36547317, "comment_id": 60695587, "body": "I&#39;m not saying there&#39;s a problem. I&#39;m just listing the assumptions you&#39;ve made. They could be perfectly fine assumptions. It&#39;s up to the OP to decide. (That said, I don&#39;t think the value will always be two-lines long.) That line doesn&#39;t affect the assumptions I listed."}], "tags": [], "owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "is_accepted": false, "score": 2, "last_activity_date": 1460377127, "last_edit_date": 1460377127, "creation_date": 1460373785, "answer_id": 36547317, "question_id": 36546470, "link": "https://stackoverflow.com/questions/36546470/perl-and-foreach-loop-with-splitting/36547317#36547317", "title": "Perl and Foreach loop with Splitting", "body": "<p>Also something like this without foreach:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen my $fh, '&lt;config.conf' or die \"$!\"; my $data = join '', &lt;$fh&gt;; close $fh;\nmy %hash = $data =~ /^(.+)\\n#+\\n(\\S+\\n\\S+)/mg;\nprint \"NAME: $_\\nVALUE: $hash{$_}\\n\\n\" for keys %hash\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6187310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/513ce252ded6d40980c9432f41a9da34?s=128&d=identicon&r=PG&f=1", "display_name": "Skydreampower", "link": "https://stackoverflow.com/users/6187310/skydreampower"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3465, "favorite_count": 0, "accepted_answer_id": 36546645, "answer_count": 3, "score": 0, "last_activity_date": 1460377152, "creation_date": 1460371514, "question_id": 36546470, "link": "https://stackoverflow.com/questions/36546470/perl-and-foreach-loop-with-splitting", "title": "Perl and Foreach loop with Splitting", "body": "<p>I have a Problem about the Foreach Loop and Splitting with Perl.</p>\n\n<p>I want to loop the Arrays and split it to name and value.</p>\n\n<p>1.) I read the File and save to an String.</p>\n\n<p>2.) I split the empty line and save to an Array.</p>\n\n<p>My Script:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\n\nmy $pathconfigfile = 'config.conf';\nmy @configline;\n\nopen(my $configfile, \"&lt;\", $pathconfigfile);\n\nlocal $/;\nmy @configdata  = split(\"\\n\\n\",&lt;$configfile&gt;);\n\n#print $configdata[0], \"\\n\";\n#print $configdata[1], \"\\n\";\n#print $configdata[2], \"\\n\";\n\nforeach my $data (@configdata){\n        my @editing = split /#/, $data;\n        my ($name, $value) = @editing[0,1];\n        print $name \"\\n\";\n        print $value \"\\n\";\n}\n\nclose $configfile;\n</code></pre>\n\n<p><strong>Configfile:</strong></p>\n\n<pre><code>Testingtttttttttttttttttttttttt\n############################################\n0987654345678909876MN09uz6t56789oiuhg\u00f6lkjhgfr\n0987654323456789098765fgnloiuztlkjhgfrtzuiknb\n\nMegaMixoiuzt\n############################################\n09876543457890098765NSUDlkjhzgtfr67899ztz9098\n098765435678987t87656789876567898765679097658\n\nTESTINGPARTS\n############################################\n0987654567890098765hzzasza654567uhgdjdjfacdaa\n9876545678987654mchfuiaq754567898765434567876\n</code></pre>\n\n<p><strong>My wish result:</strong></p>\n\n<p>$name = Testingtttttttttttttttttttttttt</p>\n\n<p>$value = 0987654345678909876MN09uz6t56789oiuhg\u00f6lkjhgfr\n0987654323456789098765fgnloiuztlkjhgfrtzuiknb</p>\n\n<p>$name = MegaMixoiuzt</p>\n\n<p>$value = 09876543457890098765NSUDlkjhzgtfr67899ztz9098\n098765435678987t8765678987656789876567909765</p>\n\n<p>$name = TESTINGPARTS</p>\n\n<p>$value = 0987654567890098765hzzasza654567uhgdjdjfacdaa\n9876545678987654mchfuiaq754567898765434567876</p>\n"}, {"tags": ["arrays", "perl", "split"], "answers": [{"comments": [{"owner": {"reputation": 1001, "user_id": 3156898, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/53b9baf7830447e6294326a609b8e688?s=128&d=identicon&r=PG&f=1", "display_name": "thonnor", "link": "https://stackoverflow.com/users/3156898/thonnor"}, "edited": false, "score": 1, "creation_date": 1460373201, "post_id": 36544711, "comment_id": 60694825, "body": "$/ - wow, I&#39;ve been using Perl for years and never come across this (nor the need to split files into records) but very useful."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1460380039, "post_id": 36544711, "comment_id": 60699812, "body": "<code>local $&#47; = &quot;&quot;;</code> (paragraph mode) would make far more sense."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1460367132, "last_edit_date": 1460367132, "creation_date": 1460366707, "answer_id": 36544711, "question_id": 36544458, "link": "https://stackoverflow.com/questions/36544458/perl-read-file-and-split-to-an-array/36544711#36544711", "title": "Perl Read File and Split to an Array", "body": "<p>This is easier than you think, if you use <code>$/</code> - the record separator. </p>\n\n<p>E.g.:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nlocal $/ = \"\\n\\n\"; \n#chomp removes $/ from the field)\nchomp ( my @configdata = &lt;DATA&gt; );\n\nprint Dumper \\@configdata\n\n\n__DATA__\nTestingtttttttttttttttttttttttt\n############################################\n0987654345678909876MN09uz6t56789oiuhg\u00f6lkjhgfr\n0987654323456789098765fgnloiuztlkjhgfrtzuiknb\n\nMegaMixoiuzt\n############################################\n09876543457890098765NSUDlkjhzgtfr67899ztz9098\n098765435678987t87656789876567898765679097658\n\nTESTINGPARTS\n############################################\n0987654567890098765hzzasza654567uhgdjdjfacdaa\n9876545678987654mchfuiaq754567898765434567876\n</code></pre>\n\n<p>Gives:</p>\n\n<pre><code>$VAR1 = [\n          'Testingtttttttttttttttttttttttt\n############################################\n0987654345678909876MN09uz6t56789oiuhg\u00f6lkjhgfr\n0987654323456789098765fgnloiuztlkjhgfrtzuiknb',\n          'MegaMixoiuzt\n############################################\n09876543457890098765NSUDlkjhzgtfr67899ztz9098\n098765435678987t87656789876567898765679097658',\n          'TESTINGPARTS\n############################################\n0987654567890098765hzzasza654567uhgdjdjfacdaa\n9876545678987654mchfuiaq754567898765434567876'\n        ];\n</code></pre>\n\n<p>Alternatively, you could get cute with <code>map</code> to make an array of arrays:</p>\n\n<pre><code>chomp ( my @configdata = map { [split] } &lt;DATA&gt; );\n</code></pre>\n\n<p>Which will give you:</p>\n\n<pre><code>$VAR1 = [\n          [\n            'Testingtttttttttttttttttttttttt',\n            '############################################',\n            '0987654345678909876MN09uz6t56789oiuhg\u00f6lkjhgfr',\n            '0987654323456789098765fgnloiuztlkjhgfrtzuiknb'\n          ],\n          [\n            'MegaMixoiuzt',\n            '############################################',\n            '09876543457890098765NSUDlkjhzgtfr67899ztz9098',\n            '098765435678987t87656789876567898765679097658'\n          ],\n          [\n            'TESTINGPARTS',\n            '############################################',\n            '0987654567890098765hzzasza654567uhgdjdjfacdaa',\n            '9876545678987654mchfuiaq754567898765434567876'\n          ]\n        ];\n</code></pre>\n\n<p>E.g.</p>\n\n<pre><code>$configdata[0][0] = 'Testingtttttttttttttttttttttttt'\n</code></pre>\n\n<p>Note - I'm using the inline <code>__DATA__</code> filehandle for illustrative purposes. You would use your opened filehandle. ( <code>chomp ( my @configdata = &lt;$configfile&gt; );</code> )</p>\n\n<p>Also - <code>$/</code> applies to <code>while</code> loops, so each iteration of your <code>while</code> would be the chunk of text you're intending to operate on - so you could instead:</p>\n\n<pre><code>while ( &lt;DATA&gt; ) { \n    chomp;\n    print \"Start of chunk:\\n\";\n    print;\n    print \"\\nEnd of chunk\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 43, "user_id": 6187310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/513ce252ded6d40980c9432f41a9da34?s=128&d=identicon&r=PG&f=1", "display_name": "Skydreampower", "link": "https://stackoverflow.com/users/6187310/skydreampower"}, "edited": false, "score": 0, "creation_date": 1460372923, "post_id": 36544731, "comment_id": 60694632, "body": "@Skydreampower If my answer is useful for you, click the tick button for accepted answer :)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1460377888, "post_id": 36544731, "comment_id": 60698159, "body": "I&#39;m not sure if that really counts as &#39;using&#39; the record separator, as you&#39;re treating the file as a single record, then splitting it."}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 1, "last_activity_date": 1460367080, "last_edit_date": 1460367080, "creation_date": 1460366749, "answer_id": 36544731, "question_id": 36544458, "link": "https://stackoverflow.com/questions/36544458/perl-read-file-and-split-to-an-array/36544731#36544731", "title": "Perl Read File and Split to an Array", "body": "<p>Use input record separator</p>\n\n<pre><code>open(my $configfile, \"&lt;\", $pathconfigfile) or die \"$!\";\nlocal $/;\nmy @configdata  = split(\"\\n\\n\",&lt;$configfile&gt;);\nprint @configdata;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12413723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88f2598faf0f993d86637aef04474b56?s=128&d=identicon&r=PG&f=1", "display_name": "maaruf", "link": "https://stackoverflow.com/users/12413723/maaruf"}, "is_accepted": false, "score": 0, "last_activity_date": 1574387019, "creation_date": 1574387019, "answer_id": 58986277, "question_id": 36544458, "link": "https://stackoverflow.com/questions/36544458/perl-read-file-and-split-to-an-array/58986277#58986277", "title": "Perl Read File and Split to an Array", "body": "<pre><code>#!/usr/bin/perl\n\nuse 5.010;\nuse strict;\nuse warnings;\nuse TrigMod;\n\nuse Math::Trig;\nuse Math::Round;\n\n\nprint \n    'MENU\n    1.  Calculate a if b and h are given.\n    2.  Calculate h if a and b are given.\n    3.  Calculate h if Y and a are given.\n    4.  Calculate Y if h and a are given.\n    ';\nprint \"\\nEnter Option\";\nmy$opt=&lt;&gt;;\n\n\nmy$a, my$b, my$h, my$Y;\n\n\nif($opt==1)\n{\n    print \"\\nEnter base and height b,h:\";\n    $b=&lt;&gt;;\n    $h=&lt;&gt;;\n    # b=6, h=4, a=5\n    $a=TrigMod::geta($b,$h);\n    $Y=TrigMod::getY($a,$h);\n    print \"\\na=$a\\theight=$h\\tbase=$b\\tangle=$Y\";\n\n}\n\nelsif($opt==2)\n{\n    print \"\\nEnter sides a and b:\";\n    $a=&lt;&gt;;\n    $b=&lt;&gt;;\n\n    $h=TrigMod::geth_ab($a,$b);\n    #a=5, b=6, h=4;\n    print \"\\n$h\";\n    $Y=TrigMod::getY_ah($a,$h);\n    print \"\\na=$a\\tbase=$b\\theight=$h\\tangle=$Y\";   \n}\n\nelsif($opt==3)\n{\n    print \"Enter sides a and Y in degrees:\";\n    $a=&lt;&gt;;\n    $Y=&lt;&gt;;\n\n    $h=TrigMod::geth_aY($a,$Y);\n    $b=TrigMod::getb_ah($a,$h);\n    print \"\\na=$a\\tbase=$b\\theight=$h\\tangle=$Y\";   \n}\n\nelsif($opt==4)\n{\n    print \"Enter sides a and h:\";\n    $a=&lt;&gt;;\n    $h=&lt;&gt;;\n\n    $Y=TrigMod::getY_ah($a,$h);\n    $b=TrigMod::getb_ah($a,$h);\n    print \"\\na=$a\\tbase=$b\\theight=$h\\tangle=$Y\";   \n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6187310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/513ce252ded6d40980c9432f41a9da34?s=128&d=identicon&r=PG&f=1", "display_name": "Skydreampower", "link": "https://stackoverflow.com/users/6187310/skydreampower"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1299, "favorite_count": 0, "accepted_answer_id": 36544731, "answer_count": 3, "score": 2, "last_activity_date": 1574387019, "creation_date": 1460366026, "question_id": 36544458, "link": "https://stackoverflow.com/questions/36544458/perl-read-file-and-split-to-an-array", "title": "Perl Read File and Split to an Array", "body": "<p>I have some Problem about the Splitting into an Array.</p>\n\n<p>I want to split an empty line and save to an Array.</p>\n\n<p>1.) First I read the File and save to a String ($configdata).</p>\n\n<p>2.) Then I want split the String ($configdata) with the empty line.</p>\n\n<p><strong>My Script:</strong></p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\n\nmy $pathconfigfile = 'config.conf';\nmy @configline;\n\nopen(my $configfile, \"&lt;\", $pathconfigfile);\n\n        while(&lt;$configfile&gt;){\n\n\n                my $configdata = $_;\n\n\n                my @configdata = split /\\n\\n/, $configdata;\n                print @configdata[0] \"\\n\";\n                print @configdata[1] \"\\n\";\n                print @configdata[2] \"\\n\";\n\n        }\nclose $configfile;\n</code></pre>\n\n<p><strong>Configfile:</strong></p>\n\n<pre><code>Testingtttttttttttttttttttttttt\n############################################\n0987654345678909876MN09uz6t56789oiuhg\u00f6lkjhgfr\n0987654323456789098765fgnloiuztlkjhgfrtzuiknb\n\nMegaMixoiuzt\n############################################\n09876543457890098765NSUDlkjhzgtfr67899ztz9098\n098765435678987t87656789876567898765679097658\n\nTESTINGPARTS\n############################################\n0987654567890098765hzzasza654567uhgdjdjfacdaa\n9876545678987654mchfuiaq754567898765434567876\n</code></pre>\n\n<p><strong>My Wish Result:</strong></p>\n\n<p>print @configdata[0];</p>\n\n<pre><code>Testingtttttttttttttttttttttttt\n############################################\n0987654345678909876MN09uz6t56789oiuhg\u00f6lkjhgfr\n0987654323456789098765fgnloiuztlkjhgfrtzuiknb\n</code></pre>\n\n<p>print @configdata[1];</p>\n\n<pre><code>MegaMixoiuzt\n############################################\n09876543457890098765NSUDlkjhzgtfr67899ztz9098\n098765435678987t87656789876567898765679097658\n</code></pre>\n\n<p>print @configdata[2];</p>\n\n<pre><code>TESTINGPARTS\n############################################\n0987654567890098765hzzasza654567uhgdjdjfacdaa\n9876545678987654mchfuiaq754567898765434567876\n</code></pre>\n"}, {"tags": ["bash", "perl", "ubuntu", "sed", "postfix-mta"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1460365154, "post_id": 36543377, "comment_id": 60689325, "body": "Your example is pretty weird. Please tell us what you really want to do. Changing <code>http</code> to <code>httx</code> doesn&#39;t make sense. What kind of files are we talking about?"}, {"owner": {"reputation": 45, "user_id": 5962910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/21e4afa6035447395b31fe5e1de6792b?s=128&d=identicon&r=PG&f=1", "display_name": "BP20", "link": "https://stackoverflow.com/users/5962910/bp20"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460366251, "post_id": 36543377, "comment_id": 60690015, "body": "I want to edit all incoming postfix mails, so that there are no clickable links in it, except some domains, which are on the whitelist. The reason for that is to protect against phishing mails."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460366808, "post_id": 36543377, "comment_id": 60690414, "body": "You can <a href=\"https://stackoverflow.com/posts/36543377/edit\">edit</a> your question and add that detail. There is probably also a way to do that within postfix, or with some tool attached to it. I don&#39;t know about that though."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1460368413, "post_id": 36543377, "comment_id": 60691594, "body": "A note on your edit: On Stack Overflow it makes more sense to just change the question if you add information. No need to add an <i>edit</i> section. Just clarify so new readers see the most recent version. The people who asked for the update know it from the comment anyway, and they can also always check the diff in the <a href=\"http://stackoverflow.com/posts/36543377/revisions\">revision history</a>, which you get by clicking the <i>edited n mins ago</i>. :)"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1460545259, "post_id": 36543377, "comment_id": 60789406, "body": "Related follow-up question: <a href=\"http://stackoverflow.com/questions/36592723/execute-bash-command-for-all-incoming-mails-postfix\" title=\"execute bash command for all incoming mails postfix\">stackoverflow.com/questions/36592723/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 45, "user_id": 5962910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/21e4afa6035447395b31fe5e1de6792b?s=128&d=identicon&r=PG&f=1", "display_name": "BP20", "link": "https://stackoverflow.com/users/5962910/bp20"}, "edited": false, "score": 0, "creation_date": 1460375896, "post_id": 36545286, "comment_id": 60696701, "body": "@BP20: What happens when you call it manually with an input file?"}, {"owner": {"reputation": 45, "user_id": 5962910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/21e4afa6035447395b31fe5e1de6792b?s=128&d=identicon&r=PG&f=1", "display_name": "BP20", "link": "https://stackoverflow.com/users/5962910/bp20"}, "edited": false, "score": 0, "creation_date": 1460376604, "post_id": 36545286, "comment_id": 60697177, "body": "The same. The file is empty afterwards."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 45, "user_id": 5962910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/21e4afa6035447395b31fe5e1de6792b?s=128&d=identicon&r=PG&f=1", "display_name": "BP20", "link": "https://stackoverflow.com/users/5962910/bp20"}, "edited": false, "score": 0, "creation_date": 1460378086, "post_id": 36545286, "comment_id": 60698298, "body": "@BP20 it worked with the example data you provided. I guess you&#39;ll have to give more realistic examples. Did you install the Regexp::Common module?"}, {"owner": {"reputation": 45, "user_id": 5962910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/21e4afa6035447395b31fe5e1de6792b?s=128&d=identicon&r=PG&f=1", "display_name": "BP20", "link": "https://stackoverflow.com/users/5962910/bp20"}, "edited": false, "score": 0, "creation_date": 1460378805, "post_id": 36545286, "comment_id": 60698870, "body": "I have installed the Regexp::Common module. I have added a postfix file to the question which is empty after running the script."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 45, "user_id": 5962910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/21e4afa6035447395b31fe5e1de6792b?s=128&d=identicon&r=PG&f=1", "display_name": "BP20", "link": "https://stackoverflow.com/users/5962910/bp20"}, "edited": false, "score": 0, "creation_date": 1460379189, "post_id": 36545286, "comment_id": 60699138, "body": "@BP20 ouch. That&#39;s a nice bug. We&#39;re not printing lines without matches... give me a moment to fix. - done."}, {"owner": {"reputation": 45, "user_id": 5962910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/21e4afa6035447395b31fe5e1de6792b?s=128&d=identicon&r=PG&f=1", "display_name": "BP20", "link": "https://stackoverflow.com/users/5962910/bp20"}, "edited": false, "score": 0, "creation_date": 1460379396, "post_id": 36545286, "comment_id": 60699312, "body": "Ahh,ok. Thanks. Will try tomorrow. Any idea what to do with line breaks in URIs?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 45, "user_id": 5962910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/21e4afa6035447395b31fe5e1de6792b?s=128&d=identicon&r=PG&f=1", "display_name": "BP20", "link": "https://stackoverflow.com/users/5962910/bp20"}, "edited": false, "score": 0, "creation_date": 1460381969, "post_id": 36545286, "comment_id": 60701435, "body": "@BP20 yes, you need to read the file in one go instead of doing it line by line."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1460379252, "last_edit_date": 1460379252, "creation_date": 1460368297, "answer_id": 36545286, "question_id": 36543377, "link": "https://stackoverflow.com/questions/36543377/find-and-replace-urls-in-postfix-files-linux-ubuntu/36545286#36545286", "title": "Find and replace URLs in postfix files - Linux/Ubuntu", "body": "<p>You can use Perl to do that. I recommend installing the Regexp::Common package from CPAN and using <a href=\"https://metacpan.org/pod/Regexp::Common::URI\" rel=\"nofollow\">Regexp::Common::URI</a> to find the URIs, then maintain a whitelist of host names and check those. It's a bit long for a one-liner though.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Regexp::Common qw /URI/;\n\nmy %whitelist = (\n    'http://www.white.com' =&gt; 1,\n    'http://www.example.org' =&gt; 1,\n);\n\nwhile (my $line = &lt;&gt;) {\n    MATCH: foreach my $match ($line =~ /($RE{URI}{HTTP})/g ){\n        # check the whitelist\n        next MATCH if grep { $match =~ /^$_/i } %whitelist;\n\n        # no whitelist entry, replace\n        my $match_updated = $match;\n        $match_updated =~ s/^http/httx/;\n        $line =~ s/$match/$match_updated/;\n    }\n    print $line;\n}\n</code></pre>\n\n<p>Save that as something meaningful, maybe remove_phishing_links.pl in a directory that the iwatch thingy can access. I'm doing <code>~</code>, but I have no clue if that would work. Now you would call that in your iwatch file with something like this.</p>\n\n<pre><code>&lt;path \n  type=\"single\" \n  syslog=\"on\" \n  alert=\"off\" \n  events=\"create\" \n  exec=\"perl -i ~/remove_phishing_links.pl %f\"&gt;/var/test&lt;/path&gt;\n</code></pre>\n\n<p>It will, just like the <code>sed</code> command, edit the file in <code>%f</code> in place. It reads line by line, finds http URIs, checks if they start with any of the whitelist entries, and if not, replaces the <code>http</code> with <code>httx</code>.</p>\n\n<p>Note that this will not work for base64 encoded MIME emails, or if there are line breaks within the URIs.</p>\n\n<p>If you don't wnat to install Regexp::Common, you can also borrow the <a href=\"https://metacpan.org/pod/URI#PARSING-URIs-WITH-REGEXP\" rel=\"nofollow\">regular expression for URIs from the URI module documentation</a> on CPAN and alter it to only find <code>https?</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 5962910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/21e4afa6035447395b31fe5e1de6792b?s=128&d=identicon&r=PG&f=1", "display_name": "BP20", "link": "https://stackoverflow.com/users/5962910/bp20"}, "edited": false, "score": 0, "creation_date": 1460378829, "post_id": 36547422, "comment_id": 60698890, "body": "Thank you! Will try it tomorrow."}, {"owner": {"reputation": 45, "user_id": 5962910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/21e4afa6035447395b31fe5e1de6792b?s=128&d=identicon&r=PG&f=1", "display_name": "BP20", "link": "https://stackoverflow.com/users/5962910/bp20"}, "edited": false, "score": 0, "creation_date": 1460447487, "post_id": 36547422, "comment_id": 60733208, "body": "Thanks again. I have tried it. Unfortunately it does not work for html links like  <code>&lt;div dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;a href=&quot;http:&#47;&#47;www.white.com&quot;&gt;http:&#47;&#47;www.white.com&lt;&#47;a&gt;&lt;br&gt;&lt;&#47;di&zwnj;&#8203;v&gt;&lt;a href=&quot;http:&#47;&#47;www.example.com&quot;&gt;http:&#47;&#47;www.example.com&lt;&#47;a&gt;&lt;br&gt;&zwnj;&#8203;&lt;&#47;div&gt;</code>"}, {"owner": {"reputation": 8159, "user_id": 1091784, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/cIHz9.png?s=128&g=1", "display_name": "riteshtch", "link": "https://stackoverflow.com/users/1091784/riteshtch"}, "reply_to_user": {"reputation": 45, "user_id": 5962910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/21e4afa6035447395b31fe5e1de6792b?s=128&d=identicon&r=PG&f=1", "display_name": "BP20", "link": "https://stackoverflow.com/users/5962910/bp20"}, "edited": false, "score": 0, "creation_date": 1460452925, "post_id": 36547422, "comment_id": 60736878, "body": "@BP20 since <code>sed</code> is line oriented you will have to transform data into lines 1st, edited the ans accordingly"}, {"owner": {"reputation": 45, "user_id": 5962910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/21e4afa6035447395b31fe5e1de6792b?s=128&d=identicon&r=PG&f=1", "display_name": "BP20", "link": "https://stackoverflow.com/users/5962910/bp20"}, "edited": false, "score": 0, "creation_date": 1460461029, "post_id": 36547422, "comment_id": 60742652, "body": "Do you know how I can put that sed command in the iwatch.xml &lt;path exec&gt;? The quotation marks are a problem..."}, {"owner": {"reputation": 8159, "user_id": 1091784, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/cIHz9.png?s=128&g=1", "display_name": "riteshtch", "link": "https://stackoverflow.com/users/1091784/riteshtch"}, "reply_to_user": {"reputation": 45, "user_id": 5962910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/21e4afa6035447395b31fe5e1de6792b?s=128&d=identicon&r=PG&f=1", "display_name": "BP20", "link": "https://stackoverflow.com/users/5962910/bp20"}, "edited": false, "score": 0, "creation_date": 1460461473, "post_id": 36547422, "comment_id": 60743007, "body": "@BP20 yeah that would be a problem, i cant test iwatch so can you try to escape the double quotes in the command"}, {"owner": {"reputation": 45, "user_id": 5962910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/21e4afa6035447395b31fe5e1de6792b?s=128&d=identicon&r=PG&f=1", "display_name": "BP20", "link": "https://stackoverflow.com/users/5962910/bp20"}, "edited": false, "score": 0, "creation_date": 1460537291, "post_id": 36547422, "comment_id": 60783421, "body": "It is a xml file so i can escape it with &quot;&amp;quot;&quot; but it does not work with iwatch. Dont know why... It is running and I can see in syslog that the command is executed but the message file is not modified. If I execute the command it works, so it must be a problem with iwatch. So I have added another question: <a href=\"http://stackoverflow.com/questions/36592723/edit-incoming-mails-with-postfix-after-queue-content-filter\" title=\"edit incoming mails with postfix after queue content filter\">stackoverflow.com/questions/36592723/&hellip;</a>"}, {"owner": {"reputation": 8159, "user_id": 1091784, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/cIHz9.png?s=128&g=1", "display_name": "riteshtch", "link": "https://stackoverflow.com/users/1091784/riteshtch"}, "reply_to_user": {"reputation": 45, "user_id": 5962910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/21e4afa6035447395b31fe5e1de6792b?s=128&d=identicon&r=PG&f=1", "display_name": "BP20", "link": "https://stackoverflow.com/users/5962910/bp20"}, "edited": false, "score": 0, "creation_date": 1460537383, "post_id": 36547422, "comment_id": 60783488, "body": "@BP20 since you accepted the answer .. so is the problem solved or not?"}, {"owner": {"reputation": 45, "user_id": 5962910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/21e4afa6035447395b31fe5e1de6792b?s=128&d=identicon&r=PG&f=1", "display_name": "BP20", "link": "https://stackoverflow.com/users/5962910/bp20"}, "edited": false, "score": 0, "creation_date": 1460537577, "post_id": 36547422, "comment_id": 60783642, "body": "The problem of editing the files and replace &quot;http&quot; with &quot;httx&quot; (except domains on whitelist) is solved. But to execute it automatically on every incoming postfix mail is not solved.."}], "tags": [], "owner": {"reputation": 8159, "user_id": 1091784, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/cIHz9.png?s=128&g=1", "display_name": "riteshtch", "link": "https://stackoverflow.com/users/1091784/riteshtch"}, "is_accepted": true, "score": 1, "last_activity_date": 1460451647, "last_edit_date": 1460451647, "creation_date": 1460374081, "answer_id": 36547422, "question_id": 36543377, "link": "https://stackoverflow.com/questions/36543377/find-and-replace-urls-in-postfix-files-linux-ubuntu/36547422#36547422", "title": "Find and replace URLs in postfix files - Linux/Ubuntu", "body": "<p>Just realized the <code>bash</code> script is un-necessary, we can do it using the following <strong>one-liner but it's really cryptic to read</strong>:  </p>\n\n<p>Input data:  </p>\n\n<pre><code>$ cat data\nsdfsdfsdfsdf http://www.whitedomain.com/red.html\nbla http://www.black.com/green/yellow.html blabla\nsdfsdfsdfsdf http://www.white.com/red.html\n$ cat whitelist \nhttp://www.white.com\nhttp://www.whitedomain.com\n$\n</code></pre>\n\n<p><strong>Final Output:</strong>  </p>\n\n<pre><code>$ sed -r '/'\"$(sed -r 's/\\\\/\\\\\\\\/g;s/\\//\\\\\\//g;s/\\^/\\\\^/g;s/\\[/\\\\[/g;s/'\\''/'\\'\"\\\\\\\\\"\\'\\''/g;s/\\]/\\\\]/g;s/\\*/\\\\*/g;s/\\$/\\\\$/g;s/\\./\\\\./g' whitelist | paste -s -d '|')\"'/! s/http/httx/g' data\nsdfsdfsdfsdf http://www.whitedomain.com/red.html\nbla httx://www.black.com/green/yellow.html blabla\nsdfsdfsdfsdf http://www.white.com/red.html\n$\n</code></pre>\n\n<p>Explanation:  </p>\n\n<p>Output of inner subshell command is a regex(to filter out lines during <code>sed</code> substitution command)</p>\n\n<pre><code>$ sed -r 's/\\\\/\\\\\\\\/g;s/\\//\\\\\\//g;s/\\^/\\\\^/g;s/\\[/\\\\[/g;s/'\\''/'\\'\"\\\\\\\\\"\\'\\''/g;s/\\]/\\\\]/g;s/\\*/\\\\*/g;s/\\$/\\\\$/g;s/\\./\\\\./g' whitelist | paste -s -d '|'\nhttp:\\/\\/www\\.white\\.com|http:\\/\\/www\\.whitedomain\\.com\n</code></pre>\n\n<p>Flow:</p>\n\n<ol>\n<li>form the regex dynamically using inner subshell command escaping all meta characters in <code>sed</code> and then piping it to <code>paste</code> to add alternations</li>\n<li>Using the above output in the <code>sed</code> command to filter out lines not having any of the whitelist domains and using those lines for substitution of <code>http</code> into <code>httx</code></li>\n</ol>\n\n<p>Edit1:  Since <code>sed</code> is line oriented you will have to transform the data into lines of text like this:  </p>\n\n<pre><code>$ cat data1 \n&lt;div dir=\"ltr\"&gt;&lt;div&gt;&lt;a href=\"http://www.white.com\"&gt;http://www.white.com&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;a href=\"http://www.example.com\"&gt;http://www.example.com&lt;/a&gt;&lt;br&gt;&lt;/div&gt;\n$ cat whitelist \nhttp://www.white.com\nhttp://www.whitedomain.com\n$ sed 's/&lt;/\\n&lt;/g' data1 | sed -r '/'\"$(sed -r 's/\\\\/\\\\\\\\/g;s/\\//\\\\\\//g;s/\\^/\\\\^/g;s/\\[/\\\\[/g;s/'\\''/'\\'\"\\\\\\\\\"\\'\\''/g;s/\\]/\\\\]/g;s/\\*/\\\\*/g;s/\\$/\\\\$/g;s/\\./\\\\./g' whitelist | paste -s -d '|')\"'/! s/http/httx/g'\n\n&lt;div dir=\"ltr\"&gt;\n&lt;div&gt;\n&lt;a href=\"http://www.white.com\"&gt;http://www.white.com\n&lt;/a&gt;\n&lt;br&gt;\n&lt;/div&gt;\n&lt;a href=\"httx://www.example.com\"&gt;httx://www.example.com\n&lt;/a&gt;\n&lt;br&gt;\n&lt;/div&gt;\n$\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 5962910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/21e4afa6035447395b31fe5e1de6792b?s=128&d=identicon&r=PG&f=1", "display_name": "BP20", "link": "https://stackoverflow.com/users/5962910/bp20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 36547422, "answer_count": 2, "score": 1, "last_activity_date": 1460451647, "creation_date": 1460362823, "last_edit_date": 1460379039, "question_id": 36543377, "link": "https://stackoverflow.com/questions/36543377/find-and-replace-urls-in-postfix-files-linux-ubuntu", "title": "Find and replace URLs in postfix files - Linux/Ubuntu", "body": "<p>I want to monitor a specific folder.\nEvery new file in this folder should be scanned for URLs.\nThese URLs should be edited, if the domain is not in a defined whitelist.</p>\n\n<p>Example:</p>\n\n<pre><code>blabla http://www.black.com/green/yellow.html blabla\nsdfsdfsdfsdf http://www.white.com/red.html\n</code></pre>\n\n<p>Whitelist:</p>\n\n<pre><code>http://www.white.com\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>blabla httx://www.black.com/green/yellow.html blabla\nsdfsdfsdfsdf http://www.white.com/red.html\n</code></pre>\n\n<p>What i have tried so far is iwatch with this xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" ?&gt;\n&lt;!DOCTYPE config SYSTEM \"/etc/iwatch/iwatch.dtd\" &gt;\n&lt;config&gt;\n  &lt;guard email=\"root@localhost\" name=\"IWatch\"/&gt;\n  &lt;watchlist&gt;\n    &lt;title&gt;URL_Filter&lt;/title&gt;\n    &lt;contactpoint email=\"admin@test.com\" name=\"Administrator\"/&gt;\n    &lt;path type=\"single\" syslog=\"on\" alert=\"off\" events=\"create\" exec=\"sed -i 's/http/httx' %f\"&gt;/var/test&lt;/path&gt;\n  &lt;/watchlist&gt;\n&lt;/config&gt;\n</code></pre>\n\n<p>So with iwatch i can observe the folder \"/var/test\" for new files.\nWith the sed command i can replace every \"http\" with \"httx\".\nBut i have no idea how i could put in a whitelist so that some URLs are not replaced... </p>\n\n<p>--- edit ---\nAdditional information: \nI want to edit all incoming postfix mails, so that there are no clickable links in it, except some domains, which are on the whitelist. The reason for that is to protect against phishing mails.</p>\n\n<pre><code>Return-Path: &lt;example@gmail.com&gt;\nX-Original-To: example@test.de\nDelivered-To: example@test.de\nReceived: from mail-lf0-x236.google.com (mail-lf0-x236.google.com [IPv6:2a00:1450:4010:c07::236])\n        by xxxxxxx.hosteurope.de (Postfix) with ESMTPS id D255223CB59\n        for &lt;example@test.de&gt;; Mon, 11 Apr 2016 14:44:10 +0200 (CEST)\nReceived: by mail-lf0-x236.google.com with SMTP id c126so154788483lfb.2\n        for &lt;example@test.de&gt;; Mon, 11 Apr 2016 05:39:20 -0700 (PDT)\nDKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=gmail.com; s=20120113;\n        h=mime-version:date:message-id:subject:from:to;\n        bh=WwH+NIkCWDEoIkwbeCI4pf0jP0ya/ctbQ81pUsA4G7s=;\n        b=ZS3Uo/cpVGNw3k38Js2+/DxVda0y2136oy4D4hsR0G25x2UjhyVU/yUcPl6qEdxt8i\n         CQXZHQbaf8pzCdDaSq4VL9RC/sIgZy3PQzj6Cyrp3WTi6SMmQ65NwNBWLVGnpPcuzNW1\n         IGC5N3rjj96ndYUAxia/tTcBX7ajS3Tw9Mc8yIaO13hSXMUCrTDIFZNzHR1ib7tLDpmX\n         6EVyFhquhIfJVOhcuPgWUUxHly/FmZ++ucoHR0Yozj+dc1GJ6/ZYzUAPdGICelDY7ieG\n         nvA7KH6+v6/zoWlbfkO9BmGzAPs6M4LGHilOjpMf/09Z2oMiV/WRDxe0WrCebQptpm2c\n         xHPg==\nX-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=1e100.net; s=20130820;\n        h=x-gm-message-state:mime-version:date:message-id:subject:from:to;\n        bh=WwH+NIkCWDEoIkwbeCI4pf0jP0ya/ctbQ81pUsA4G7s=;\n        b=hAOSzKjertcsQIT/PHoZKsiKxLba8gaKOCmyNg7nmiPJjCWqobNvM5nf3sZP1Xhysi\n         gGdvk9mmMugII8dsjc7mRhDkbCT1QKVz/0UBQ+CaP6sK7kGdWfdarphGgzUGA6Il5JZi\n         lP4DpEQHUpG1wJ1r+dN2f+UT8tyfIwapXwo3g7FnkPLxmCq9CeqJeRlagL6vAacon8z7\n         CjdTHB7fzEtYToSp+cDi3+yK4zS9p4rwF4H4Ds3bJqwM/PrcFJW0YYncDHdra5TwYf6U\n         K6VRX19iUhQT4kTVFCtoNW9SU8Ri+Rc5VfvVTKRh4KwZ2uW5x8y07ucB0vZcAQdEnms4\n         AWnQ==\nX-Gm-Message-State: AD7BkJJEDmk9P+Kzcn1MT4lQxpU1aYU6x8uABSpohCbT7EeOFAXjT1y6n3sFcRj7tcfWc6eBAOL6bJ78jvVOlQ==\nMIME-Version: 1.0\nX-Received: by 10.112.63.196 with SMTP id i4mr8426739lbs.93.1460378359811;\n Mon, 11 Apr 2016 05:39:19 -0700 (PDT)\nReceived: by 10.114.66.51 with HTTP; Mon, 11 Apr 2016 05:39:19 -0700 (PDT)\nDate: Mon, 11 Apr 2016 14:39:19 +0200\nMessage-ID: &lt;CADF5gVU+C4BZCSFSiWeiBipBnDu5jTU+FVmLJbSQSbtMM9JZcQ@mail.gmail.com&gt;\nSubject: test\nFrom: Example &lt;example@gmail.com&gt;\nTo: example@test.de\nContent-Type: multipart/alternative; boundary=001a1133d4405fd878053034d55a\nX-Scanned-By: MIMEDefang 2.71 on 5.38.258.144\n\n--001a1133d4405fd878053034d55a\nContent-Type: text/plain; charset=UTF-8\n\nhttp://www.example.com\nhttp://www.white.com\n\n--001a1133d4405fd878053034d55a\nContent-Type: text/html; charset=UTF-8\n\n&lt;div dir=\"ltr\"&gt;&lt;div&gt;&lt;a href=\"http://www.example.com\"&gt;http://www.example.com&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;a href=\"http://www.white.com\"&gt;http://www.white.com&lt;/a&gt;&lt;br&gt;&lt;/div&gt;\n\n--001a1133d4405fd878053034d55a--\n</code></pre>\n"}, {"tags": ["perl", "file", "directory", "dirname"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 6181287, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b0989b3cd147f5ca44dcd830162c4dd7?s=128&d=identicon&r=PG&f=1", "display_name": "perlfg", "link": "https://stackoverflow.com/users/6181287/perlfg"}, "edited": false, "score": 0, "creation_date": 1460364139, "post_id": 36543652, "comment_id": 60688641, "body": "How can i make this script running with while or for. everytime script check if i have a new file."}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "reply_to_user": {"reputation": 59, "user_id": 6181287, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b0989b3cd147f5ca44dcd830162c4dd7?s=128&d=identicon&r=PG&f=1", "display_name": "perlfg", "link": "https://stackoverflow.com/users/6181287/perlfg"}, "edited": false, "score": 0, "creation_date": 1460364181, "post_id": 36543652, "comment_id": 60688663, "body": "wrap it under <code>while(1) { sleep(your seconds)}</code>."}, {"owner": {"reputation": 59, "user_id": 6181287, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b0989b3cd147f5ca44dcd830162c4dd7?s=128&d=identicon&r=PG&f=1", "display_name": "perlfg", "link": "https://stackoverflow.com/users/6181287/perlfg"}, "edited": false, "score": 0, "creation_date": 1460365786, "post_id": 36543652, "comment_id": 60689706, "body": "script checkt everytime the directory and should only provide an answer me when a new file is created."}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "reply_to_user": {"reputation": 59, "user_id": 6181287, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b0989b3cd147f5ca44dcd830162c4dd7?s=128&d=identicon&r=PG&f=1", "display_name": "perlfg", "link": "https://stackoverflow.com/users/6181287/perlfg"}, "edited": false, "score": 0, "creation_date": 1460368079, "post_id": 36543652, "comment_id": 60691343, "body": "Then, probably you should look at <a href=\"http://search.cpan.org/~neilb/File-Modified-0.10/lib/File/Modified.pm\" rel=\"nofollow noreferrer\"><code>File::Modified</code></a> and <a href=\"http://search.cpan.org/~andya/File-Monitor-1.00/lib/File/Monitor.pm\" rel=\"nofollow noreferrer\"><code>File::Monitor</code></a>"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 59, "user_id": 6181287, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b0989b3cd147f5ca44dcd830162c4dd7?s=128&d=identicon&r=PG&f=1", "display_name": "perlfg", "link": "https://stackoverflow.com/users/6181287/perlfg"}, "edited": false, "score": 0, "creation_date": 1474376947, "post_id": 36543652, "comment_id": 66498666, "body": "@perlfg: You have not yet accepted any answer for any of your questions. Kindly check this: <a href=\"http://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\" title=\"how does accepting an answer work\">meta.stackexchange.com/questions/5234/&hellip;</a>"}], "tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1460363731, "creation_date": 1460363731, "answer_id": 36543652, "question_id": 36543196, "link": "https://stackoverflow.com/questions/36543196/check-last-modified-file-in-directory/36543652#36543652", "title": "check last modified file in directory", "body": "<p>I will suggest you to prep-end the directory name before file(to give absolute path) using <code>map</code> and then feed it to <code>grep</code>. </p>\n\n<p>It should look like below: </p>\n\n<pre><code>my @by_age  = sort {-M $a &lt;=&gt; -M $b} grep {-f $_} map {\"$dirname/$_\"} readdir ($dh);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 6181287, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b0989b3cd147f5ca44dcd830162c4dd7?s=128&d=identicon&r=PG&f=1", "display_name": "perlfg", "link": "https://stackoverflow.com/users/6181287/perlfg"}, "edited": false, "score": 0, "creation_date": 1460552535, "post_id": 36553791, "comment_id": 60795408, "body": "Thanks :))))))))))))"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1460390718, "last_edit_date": 1495541260, "creation_date": 1460390718, "answer_id": 36553791, "question_id": 36543196, "link": "https://stackoverflow.com/questions/36543196/check-last-modified-file-in-directory/36553791#36553791", "title": "check last modified file in directory", "body": "<p>Maybe I didn't emphasize this enough in <a href=\"https://stackoverflow.com/a/36520011/622310\">my solution to your previous question</a>. I wrote</p>\n\n<blockquote>\n  <p>If you want to do this for a directory other that the cwd then it is probably easiest just to <code>chdir</code> to it and use this code than to try to <code>opendir</code> a specific directory, as then you will have to build the full path to each file before you can use <code>-M</code></p>\n</blockquote>\n\n<p>The problem is that the data returned by <code>readdir</code> is just a bare file name without any path information, and if the file is in a directory other than the current working directory then it won't be found without adding path information</p>\n\n<p>If you just <code>chdir</code> to the directory first then everything will work fine. Here's a tidied version of your code</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nchomp(my $dirname = \"/var/spool/gammu/inbox/\");\nchdir $dirname or die qq{Unable to chdir to \"$dirname\": $!};\n\nmy $newest_file = do {\n    opendir my $dh, '.' or die \"Could not open '$dirname' for reading: $!\\n\";\n    my @by_age  = sort { -M $a &lt;=&gt; -M $b } grep -f, readdir ($dh);\n    $by_age[0];\n};\n\nopen my $file, '&lt;', $newest_file or die qq{Unable to open \"$newest_file\" for input: $!};\nprint while &lt;$file&gt;;\n</code></pre>\n\n<p>Or, if you have a reason to avoid changing the directory in your program (the change won't be reflected in your shell once the program exits), then you should use <code>rel2abs</code> from <code>File::Spec::Functions</code> to construct the full file path before working with it</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse File::Spec::Functions 'rel2abs';\n\nchomp(my $dirname = \"/var/spool/gammu/inbox/\");\n\nmy $newest_file = do {\n    opendir my $dh, '.' or die \"Could not open '$dirname' for reading: $!\\n\";\n    my @files = map { rel2abs($_, $dirname) } grep -f, readdir ($dh);\n    my @by_age  = sort { -M $a &lt;=&gt; -M $b } @files;\n    $by_age[0];\n};\n\nopen my $file, '&lt;', $newest_file or die qq{Unable to open \"$newest_file\" for input: $!};\nprint while &lt;$file&gt;;\n</code></pre>\n\n<p>Some other points</p>\n\n<ul>\n<li><p><code>use warnings</code> is superior to <code>-w</code> on the command line. You shouldn't use both</p></li>\n<li><p>It's best to avoid reading a whole file into memory unless you need to. A file can be read and printed one line at a time</p></li>\n</ul>\n"}], "owner": {"reputation": 59, "user_id": 6181287, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b0989b3cd147f5ca44dcd830162c4dd7?s=128&d=identicon&r=PG&f=1", "display_name": "perlfg", "link": "https://stackoverflow.com/users/6181287/perlfg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1460506385, "creation_date": 1460362340, "question_id": 36543196, "link": "https://stackoverflow.com/questions/36543196/check-last-modified-file-in-directory", "title": "check last modified file in directory", "body": "<p>My script to check the last modified file in this directory /var/spool/gammu/inbox/</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\nchomp (my $dirname ='/var/spool/gammu/inbox/');\nmy $newest_file = do {\nopendir my $dh, $dirname or die \"Could not open '$dirname' for reading: $!\\n\";\nmy @by_age  = sort { -M $a &lt;=&gt; -M $b } grep -f, readdir ($dh);\n$by_age[0];\n};\n\nopen my $file, '&lt;', $newest_file or die qq{Unable to open \"$newest_file\" for input: $!};\nmy @rows = &lt;$file&gt;;\nclose ($file);\nprint \"@rows\\n\";\n</code></pre>\n\n<p>I'm getting:</p>\n\n<p>Use of uninitialized value $newest_file in open at ./checken.pl line 16.</p>\n\n<p>Use of uninitialized value $newest_file in concatenation (.) or string at ./checken.pl line 16.</p>\n\n<p>Unable to open \"\" for input: Datei oder Verzeichnis nicht gefunden at ./checken.pl line 16.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 7, "creation_date": 1460357909, "post_id": 36541138, "comment_id": 60685191, "body": "&quot;Not opening&quot; is not a sane requirement.  Not reading all of it into memory at once is probably what you want and need."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1460358049, "post_id": 36541138, "comment_id": 60685261, "body": "Also, &quot;the best&quot; without specifying criteria invites opinionated discussion. Tell us what you need and why, or settle for &quot;a good enough way&quot;."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1460358218, "post_id": 36541138, "comment_id": 60685340, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/303053/how-can-i-read-lines-from-the-end-of-file-in-perl\" title=\"how can i read lines from the end of file in perl\">stackoverflow.com/questions/303053/&hellip;</a> -- the <code>head</code> case is trivial once you have that."}], "answers": [{"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 1, "last_activity_date": 1460357913, "last_edit_date": 1460357913, "creation_date": 1460356804, "answer_id": 36541511, "question_id": 36541138, "link": "https://stackoverflow.com/questions/36541138/what-is-the-best-way-to-get-first-10-lines-from-a-file-without-opening-it-in-pe/36541511#36541511", "title": "What is the best way to get first 10 lines from a file without opening it (in perl)?", "body": "<p>Try this. <code>&lt;$fh&gt;</code> return the next line of the file. So iterate with loop.</p>\n\n<pre><code>open my $fh,'&lt;',\"file\" or die $!;\nprint scalar &lt;$fh&gt; for 1 .. 10;\n</code></pre>\n\n<p>You want to store the output in variable try as follow</p>\n\n<pre><code>my @ar;\nopen my $handler,'&lt;',\"split.py\" or die $!;\npush @ar, scalar &lt;$handler&gt; for 1 .. 2;\nprint @ar;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 710, "user_id": 1099103, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5e60172669e9d630a88b03eabdc5b8a9?s=128&d=identicon&r=PG", "display_name": "senorsmile", "link": "https://stackoverflow.com/users/1099103/senorsmile"}, "edited": false, "score": 0, "creation_date": 1460434425, "post_id": 36541516, "comment_id": 60727180, "body": "Instead of the $count var, you could also use the built in $. , which already had the line number for you."}], "tags": [], "owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "is_accepted": false, "score": 4, "last_activity_date": 1460357276, "last_edit_date": 1460357276, "creation_date": 1460356815, "answer_id": 36541516, "question_id": 36541138, "link": "https://stackoverflow.com/questions/36541138/what-is-the-best-way-to-get-first-10-lines-from-a-file-without-opening-it-in-pe/36541516#36541516", "title": "What is the best way to get first 10 lines from a file without opening it (in perl)?", "body": "<p>You have to open the file, and read it line by line until the limit, like this:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $count = 1;\n\nopen my $fh, '&lt;', 'huge_filename' or die $!;\nwhile( &lt;$fh&gt; ) {\n    print; # Or push into array for further processing\n    last if ++$count == 10;\n}\nclose $fh;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "is_accepted": false, "score": 2, "last_activity_date": 1460356982, "creation_date": 1460356982, "answer_id": 36541559, "question_id": 36541138, "link": "https://stackoverflow.com/questions/36541138/what-is-the-best-way-to-get-first-10-lines-from-a-file-without-opening-it-in-pe/36541559#36541559", "title": "What is the best way to get first 10 lines from a file without opening it (in perl)?", "body": "<p>You can't get any data from file without opening it. Also, time to open a file does not depend on file size - it should be instant.</p>\n\n<p>If you need only first 10 lines, you have to open it, read 10 lines and close:</p>\n\n<pre><code>my @lines;\n\nopen my $fh, '&lt;', $file_name;\nfor (1..10) {\n    my $line = &lt;$fh&gt;;\n    chomp $line; # optional, remove \"\\n\" from end of line\n    push @lines, $line;\n}\nclose $fh;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 0, "last_activity_date": 1460358815, "last_edit_date": 1460358815, "creation_date": 1460358070, "answer_id": 36541887, "question_id": 36541138, "link": "https://stackoverflow.com/questions/36541138/what-is-the-best-way-to-get-first-10-lines-from-a-file-without-opening-it-in-pe/36541887#36541887", "title": "What is the best way to get first 10 lines from a file without opening it (in perl)?", "body": "<blockquote>\n  <p>Is any other way</p>\n</blockquote>\n\n<p>It's easy enough to read just the first 10 lines into memory:</p>\n\n<pre><code>use strict;\nuse warnings; \nuse 5.020;\nuse autodie;\nuse Data::Dumper;\n\nopen my $OUTFILE, '&gt;', 'data.txt';\n\nfor my $i (1..100_000) {\n    say {$OUTFILE} \"hello word $i\";\n}\n\nclose $OUTFILE;\n\nopen my $INFILE, '&lt;', 'data.txt';\n\nwhile (my $line = &lt;$INFILE&gt;) {\n    print $line;\n    last if $. &gt;= 10;\n}\n\nclose $INFILE;\n\n--output:--\nhello word 1\nhello word 2\nhello word 3\nhello word 4\nhello word 5\nhello word 6\nhello word 7\nhello word 8\nhello word 9\nhello word 10\n</code></pre>\n\n<blockquote>\n  <p>like any CPAN for this?</p>\n</blockquote>\n\n<p>For reading only the last 10 lines into memory:</p>\n\n<pre><code>use File::ReadBackwards;\n\nopen my $INFILE, '&lt;', 'data.txt';\nmy $backwards_file = File::ReadBackwards-&gt;new('data.txt');\n\nmy $i = 1;\nwhile (my $line = $backwards_file-&gt;readline) {\n    print $line;\n    last if ++$i &gt; 10;\n}\n\nclose $INFILE;\n\n--output:--\nhello word 100000\nhello word 99999\nhello word 99998\nhello word 99997\nhello word 99996\nhello word 99995\nhello word 99994\nhello word 99993\nhello word 99992\nhello word 99991\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5678410, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rTf1NC266RU/AAAAAAAAAAI/AAAAAAAAAWQ/FqcdIPMFQZ8/photo.jpg?sz=128", "display_name": "Abhisek", "link": "https://stackoverflow.com/users/5678410/abhisek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "closed_date": 1460369371, "answer_count": 4, "score": -5, "last_activity_date": 1460366828, "creation_date": 1460355420, "question_id": 36541138, "link": "https://stackoverflow.com/questions/36541138/what-is-the-best-way-to-get-first-10-lines-from-a-file-without-opening-it-in-pe", "closed_reason": "Opinion-based", "title": "What is the best way to get first 10 lines from a file without opening it (in perl)?", "body": "<p>If file size is very big, opening the file in perl will take some time. If I want only first/last 10 lines from the file, parsing the total file in memory and then get those lines should not be a optimal solution. \nI can use qx{head filename} for this purpose. Is any other way like any CPAN for this?</p>\n"}, {"tags": ["perl", "syntax"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460381546, "post_id": 36539836, "comment_id": 60701075, "body": "The OP&#39;s code is specifically a list slice (<code>(LIST)[LIST]</code>) and not an array slice (<code>@NAME[LIST]</code>, <code>@$NAME[LIST]</code> or <code>@BLOCK[LIST]</code>)."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1460384690, "post_id": 36539836, "comment_id": 60703559, "body": "yes, this is a list slice, not an array slice; the two work very differently when there is no element at one or more of the indexes"}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 4, "last_activity_date": 1460351118, "last_edit_date": 1460351118, "creation_date": 1460348782, "answer_id": 36539836, "question_id": 36539754, "link": "https://stackoverflow.com/questions/36539754/square-brackets-indexing-a-perl-list-literal/36539836#36539836", "title": "Square brackets indexing a Perl list literal", "body": "<p>This is called array or list <a href=\"http://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow\"><em>slicing</em></a>.</p>\n\n<blockquote>\n  <p>A slice accesses several elements of a list, an array, or a hash simultaneously using a list of subscripts. It's more convenient than writing out the individual elements as a list of separate scalar values.</p>\n</blockquote>\n"}], "owner": {"reputation": 3960, "user_id": 1556475, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dbf54fca536242c214a1f99a6b9b8931?s=128&d=identicon&r=PG", "display_name": "Cameron Ball", "link": "https://stackoverflow.com/users/1556475/cameron-ball"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460351196, "creation_date": 1460348056, "last_edit_date": 1460351196, "question_id": 36539754, "link": "https://stackoverflow.com/questions/36539754/square-brackets-indexing-a-perl-list-literal", "title": "Square brackets indexing a Perl list literal", "body": "<p>Consider:</p>\n\n<pre><code>my($a, $b) = (1,2,3,4)[0,3];\nprint $a . ' ' . $b;\n</code></pre>\n\n<p>I understand that it will print <code>1 4</code> but I can't find documentation about this feature. What is it actually doing?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 71380, "user_id": 3558960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a98b52149d419c2aad558befe51c8cc5?s=128&d=identicon&r=PG", "display_name": "Robby Cornelissen", "link": "https://stackoverflow.com/users/3558960/robby-cornelissen"}, "is_accepted": true, "score": 7, "last_activity_date": 1460347170, "last_edit_date": 1460347170, "creation_date": 1460346805, "answer_id": 36539565, "question_id": 36539494, "link": "https://stackoverflow.com/questions/36539494/does-this-piece-of-perl-code-do-what-it-says/36539565#36539565", "title": "Does this piece of Perl code do what it says?", "body": "<p>The expression <code>&lt;FH&gt;</code> will either return the first line of the file when it is used in a scalar context, or the complete contents of the file if used in list context:</p>\n\n<pre><code>my $first_line = &lt;FH&gt;;\nmy @lines = &lt;FH&gt;;\n</code></pre>\n\n<p>The reason for this is that, by default, the built-in input record separator (<code>$/</code>) is defined as newline. If you would redefine or undefine the record separator, you could slurp the entire file into a scalar variable:</p>\n\n<pre><code>undef $/;\nmy $lines = &lt;FH&gt;;\n</code></pre>\n\n<p>However, beware of the risks of globally redefining Perl built-in variables. You could use <code>local</code> to apply it only to the current scope.</p>\n\n<pre><code>local $/;\nmy $lines = &lt;FH&gt;;\n</code></pre>\n\n<p>A <a href=\"http://www.perlmonks.org/?node_id=287647\">post on PerlMonks</a> suggests this idiom to limit the scope of undefining <code>$/</code>:</p>\n\n<pre><code>my $lines = do { local $/; &lt;FH&gt; };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 4, "last_activity_date": 1460346818, "creation_date": 1460346818, "answer_id": 36539567, "question_id": 36539494, "link": "https://stackoverflow.com/questions/36539494/does-this-piece-of-perl-code-do-what-it-says/36539567#36539567", "title": "Does this piece of Perl code do what it says?", "body": "<p>In the code, <code>my $first_line</code> is scalar context.  In scalar context, the <code>&lt;$in_fh&gt;</code> reads and returns a single line.</p>\n\n<p>In array context, <code>&lt;$in_fh&gt;</code> would read all lines (or run out of memory):</p>\n\n<pre><code>my @all_lines = &lt;$in_fh&gt;;\n</code></pre>\n\n<p>Context is a very important concept in Perl \u2014 and a subtle concept, too.</p>\n"}], "owner": {"reputation": 393, "user_id": 4502993, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/DNPz8.jpg?s=128&g=1", "display_name": "One Face", "link": "https://stackoverflow.com/users/4502993/one-face"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 36539565, "answer_count": 2, "score": 1, "last_activity_date": 1460347170, "creation_date": 1460346329, "last_edit_date": 1495535310, "question_id": 36539494, "link": "https://stackoverflow.com/questions/36539494/does-this-piece-of-perl-code-do-what-it-says", "title": "Does this piece of Perl code do what it says?", "body": "<p>While searching for something, I came across this answer <a href=\"https://stackoverflow.com/a/548434/4502993\">here</a>.</p>\n\n<p>I want to know why the variable <code>$first_line</code> contains only the first line of the input file.</p>\n\n<p>The code:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\n\nmy $filename = shift;\nopen my $in_fh, '&lt;', $filename\n  or die \"Cannot open $filename for reading: $!\";\nmy $first_line = &lt;$in_fh&gt;;\n\nopen my $out_fh, '&gt;', \"$filename.tmp\"\n  or die \"Cannot open $filename.tmp for writing: $!\";\n\n$first_line =~ s/some translation/goes here/;\n\nprint {$out_fh} $first_line;\nprint {$out_fh} $_ while &lt;$in_fh&gt;; # sysread/syswrite is probably better\n\nclose $in_fh;\nclose $out_fh;\n\n# overwrite original with modified copy\nrename \"$filename.tmp\", $filename\n  or warn \"Failed to move $filename.tmp to $filename: $!\";\n</code></pre>\n\n<p>As I understand, the entire content of <code>$in_fh</code> is stored in <code>$first_line</code>.</p>\n"}, {"tags": ["perl", "file", "loops", "recursion"], "comments": [{"owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "edited": false, "score": 0, "creation_date": 1460360096, "post_id": 36538513, "comment_id": 60686380, "body": "If you don&#39;t want to use additional modules, may be my <a href=\"http://stackoverflow.com/questions/36407997/rename-files-of-a-folder-and-its-folders-children/36425685#36425685\">answer</a> will help you"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1460340053, "last_edit_date": 1460340053, "creation_date": 1460339082, "answer_id": 36538561, "question_id": 36538513, "link": "https://stackoverflow.com/questions/36538513/how-to-loop-through-files-in-all-sub-directories/36538561#36538561", "title": "How to loop through files in all sub directories?", "body": "<p><a href=\"http://search.cpan.org/perldoc?File::Find::Rule\" rel=\"nofollow\">File::Find::Rule</a> is a great module for recursively listing files.</p>\n\n<p>All files (as you asked):</p>\n\n<pre><code>use File::Find::Rule qw( );\n\nfor my $qfn (File::Find::Rule-&gt;in(\".\")) {\n   ...\n}\n</code></pre>\n\n<p>Just the files with \".\" in their name (as per your example):</p>\n\n<pre><code>use File::Find::Rule qw( );\n\nfor my $qfn (File::Find::Rule-&gt;name(\"*.*\")-&gt;in(\".\")) {\n   ...\n}\n</code></pre>\n\n<p>Adding <code>-&gt;file</code> limits the results to plain files (filtering out directories).</p>\n"}, {"comments": [{"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1460416748, "post_id": 36553249, "comment_id": 60722248, "body": "I prefer the use of <code>File::Find::Rule</code>.  You haven&#39;t properly explained your objection to it."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1467624631, "last_edit_date": 1467624631, "creation_date": 1460389284, "answer_id": 36553249, "question_id": 36538513, "link": "https://stackoverflow.com/questions/36538513/how-to-loop-through-files-in-all-sub-directories/36553249#36553249", "title": "How to loop through files in all sub directories?", "body": "<p>I find <a href=\"https://metacpan.org/pod/File::Find::Rule\" rel=\"nofollow\"><code>File::Find::Rule</code></a> unnecessarily fussy and clumsy, especially for a simple application like this. Ultimately it is just a wrapper for the core module <a href=\"https://metacpan.org/pod/File::Find\" rel=\"nofollow\"><code>File::Find</code></a>, and I think the base class itself is a good choice for a straightforward application like yours</p>\n\n<p><code>File::Find</code> allows you to specify a <em>callback</em> subroutine that will be executed for every node (file or directory) within a specified root directory</p>\n\n<p>By default, that subroutine is called with the following context</p>\n\n<ul>\n<li><code>$File::Find::name</code> is set to the full path to the node</li>\n<li><code>$File::Find::dir</code> is set to the path to the directory containing the</li>\n<li><code>$_</code> is set to the name of the node, without its path</li>\n<li>The <em>current working directory</em> is set to <code>$File::Find::dir</code></li>\n</ul>\n\n<p>If you want, say, to list all files beneath your current directory, then you would write this. All nodes but plain files are rejected using the <code>-f</code> file test operator, works on <code>$_</code> and finds the right file because the working directory has been temporarily changed</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse File::Find 'find';\n\nfind(\\&amp;wanted, '.');\n\nsub wanted {\n\n    return unless -f;\n\n    print $File::Find::name, \"\\n\";\n}\n</code></pre>\n\n<p>If you prefer, you can use an anonymous subroutine within the call to <code>find</code>. This code does exactly the same thing</p>\n\n<pre><code>find(sub {\n    return unless -f;\n    print $File::Find::name, \"\\n\";\n}, '.');\n</code></pre>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1314, "favorite_count": 0, "accepted_answer_id": 36538561, "answer_count": 2, "score": 0, "last_activity_date": 1467624631, "creation_date": 1460338649, "question_id": 36538513, "link": "https://stackoverflow.com/questions/36538513/how-to-loop-through-files-in-all-sub-directories", "title": "How to loop through files in all sub directories?", "body": "<p>In <code>perl</code> I can loop through the files in the current directory by doing the following:</p>\n\n<pre><code>foreach $file (&lt;*.*&gt;) {\n        print \"$file found\\n\";\n        # do stuff\n}\n</code></pre>\n\n<p>How can I do the same thing but to all files in all sub-directories?</p>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460338794, "post_id": 36537873, "comment_id": 60679467, "body": "What&#39;s in the hash? Alternatively, why do you want to use a hash here?"}], "answers": [{"tags": [], "owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "is_accepted": false, "score": 0, "last_activity_date": 1460341060, "creation_date": 1460341060, "answer_id": 36538810, "question_id": 36537873, "link": "https://stackoverflow.com/questions/36537873/how-to-use-hash-map-in-perl/36538810#36538810", "title": "how to use hash map in perl", "body": "<p>The guts of your question comes down to this statement and question:</p>\n\n<blockquote>\n  <p>I was asked to use hashmap instead of unless statement.\n  Can some one tell me how to use hash map for this scenario?</p>\n</blockquote>\n\n<p>You really have not explained enough to make it possible to answer with any confidence.  Your <code>unless</code> statement simply sets the parameter to the null string if it's not passed (ie if it's undefined).  I've had a look at the <code>iperf3</code> <a href=\"http://software.es.net/iperf/invoking.html\" rel=\"nofollow\">doco here</a>, and the default behaviour if the <code>-u</code> switch is not supplied is to use TCP - so, what you have done makes sense.  Unfortunately, there's no way (that I can see, at least) to somehow \"... use hashmap instead.\" </p>\n\n<p>The best I can do is to suggest that perhaps there was a misunderstanding in the request and you were asked to use a <strong>hashref</strong> to pass parameters to the subroutine.  </p>\n\n<p>As you add more parameters to a sub (or method), it becomes increasingly difficult - and the code therefore, becomes increasingly fragile - to match the proper argument to the proper position.  The common way to solve this problem is to use <em>named</em> parameters rather than <em>positional</em> parameters as then the order is not relevant. In perl5 this usually means passing a hash of named arguments (or an array using the \"fat comma\" giving the same look as a hash).</p>\n\n<p>So, your call would look something like this:</p>\n\n<pre><code>$self-&gt;{'client'}  =  $self-&gt;{'traffic_obj_1'}-&gt;\n                      start_iperf_on_client_forward_traffic({\n                          cli_ip    =&gt;  '9.1.1.2' ,\n                          origin_ip =&gt;  '8.2.0.2' ,\n                          port      =&gt;  '7755'    ,\n                          protocol  =&gt;   '-u'\n                       });\n</code></pre>\n\n<p>...and the opening lines of your routine would look like...</p>\n\n<pre><code>sub start_iperf_on_client_forward_traffic {\n    my ($self, $args) = @_;\n</code></pre>\n\n<p>...but you are still going to need a similar check to see if optional parameters (\"protocol\" in this case) are passed;</p>\n\n<pre><code>my $protocol = $args-&gt;{protocol} // \"\" ;   # Set to \"\" if not passed\n</code></pre>\n\n<p>But all of this is based on speculation about what you actually meant in the first place.</p>\n"}], "owner": {"reputation": 3, "user_id": 6083809, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bfb54c7054ed20c799f4d18a785b6873?s=128&d=identicon&r=PG&f=1", "display_name": "virat", "link": "https://stackoverflow.com/users/6083809/virat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460341060, "creation_date": 1460332965, "question_id": 36537873, "link": "https://stackoverflow.com/questions/36537873/how-to-use-hash-map-in-perl", "title": "how to use hash map in perl", "body": "<p>I have created a function to run iperf traffic. The code works as expected.the function can supports both TCP and UDP protocol.if protocol is not passed as an argument tcp is used by default. For UDP, -u is passed as argument. I have used <code>unless</code> statement for this check. I was asked to use hashmap instead of unless statement.Can some one tell me how to use hash map for this scenario?</p>\n\n<pre><code>sub start_iperf_on_client_forward_traffic {\n\n    my ($self,$cli_interface_ip,$origin_interface_ip, $port,$protocol) = @_;\n\n    unless (defined $protocol)\n    {\n      $protocol = \"\";\n    }\n\n    # start iperf3 on client. If protocol is not specified tcp protocol will be used..\n    $self-&gt;{ssh}-&gt;execute( 'iperf3 ' . $protocol . ' -c ' . $origin_interface_ip . ' -B ' .\n      $cli_interface_ip . ' -i ' . 2 .  ' -p ' . $port . ' -l ' . 576.\n        ' -b ' . 100 . 'M ' . ' -k ' . 1000 );\n\n    my @stdout = $self-&gt;{ssh}-&gt;stdOut();\n\n    print  Dumper  @stdout;\n}\n</code></pre>\n\n<p>function call:</p>\n\n<pre><code>  $self-&gt;{'traffic_obj'} =  Iperf-&gt;new(ip =&gt; \"198.18.193.151\" )\n    $self-&gt;{'client'}   =  $self-&gt;{'traffic_obj_1'}-&gt;start_iperf_on_client_forward_traffic('9.1.1.2','8.2.0.2','7755','-u');\n</code></pre>\n\n<p>Output :</p>\n\n<pre><code> $VAR1 = 'Connecting to host 8.2.0.2, port 7755';\n    $VAR2 = '[  4] local 9.1.1.2 port 47105 connected to 8.2.0.2 port 7755';\n    $VAR3 = '[ ID] Interval           Transfer     Bandwidth       Total Datagrams';\n    $VAR4 = '[  4]   0.00-2.31   sec  5.49 MBytes  20.0 Mbits/sec  10000  ';\n    $VAR5 = '- - - - - - - - - - - - - - - - - - - - - - - - -';\n    $VAR6 = '[ ID] Interval           Transfer     Bandwidth       Jitter    Lost/Total Datagrams';\n    $VAR7 = '[  4]   0.00-2.31   sec  5.49 MBytes  20.0 Mbits/sec  0.279 ms  3751/9987 (38%)  ';\n    $VAR8 = '[  4] Sent 9987 datagrams';\n    $VAR9 = '';\n    $VAR10 = 'iperf Done.';\n</code></pre>\n"}, {"tags": ["perl", "unix", "search", "grep", "special-characters"], "comments": [{"owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "edited": false, "score": 0, "creation_date": 1460313354, "post_id": 36533733, "comment_id": 60671339, "body": "Take a look at this Perl module: <a href=\"http://search.cpan.org/~bkb/Text-Fuzzy-0.24/lib/Text/Fuzzy.pod\" rel=\"nofollow noreferrer\">search.cpan.org/~bkb/Text-Fuzzy-0.24/lib/Text/Fuzzy.pod</a>. It can compare the words and return their &quot;similarity index&quot;. For your sample word, the index should equal &quot;1&quot;, as a single character is changed."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1460313832, "post_id": 36533733, "comment_id": 60671567, "body": "<a href=\"http://stackoverflow.com/q/11058211/1030675\">stackoverflow.com/q/11058211/1030675</a>"}], "answers": [{"tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 0, "last_activity_date": 1460317552, "last_edit_date": 1495540783, "creation_date": 1460317552, "answer_id": 36534720, "question_id": 36533733, "link": "https://stackoverflow.com/questions/36533733/search-for-characters-similar-to-special-characters/36534720#36534720", "title": "Search for Characters Similar to Special Characters", "body": "<p>You can always grep using ranges of characters, e.g.,</p>\n\n<pre><code>grep -i 'N[a\u00e1]ufragos' *\n</code></pre>\n\n<p>to match either spelling of the name, and if that is a nuisance, a script using<a href=\"http://search.cpan.org/~sburke/Text-Unidecode-1.27/lib/Text/Unidecode.pm\" rel=\"nofollow noreferrer\"><code>Text::Unidecode</code></a> as discussed in <em><a href=\"https://stackoverflow.com/questions/11058211/how-to-convert-letters-with-accents-umlauts-etc-to-their-ascii-counterparts-in\">How to convert letters with accents, umlauts, etc to their ASCII counterparts in Perl?</a></em> <em>could</em> generate the range expressions (since you are likely dealing only with the few dozen characters in ISO-8859-1 which have diacritical marks).</p>\n\n<p>One drawback to <code>Text::Unidecode</code> is that it is unlikely to be preinstalled on a system (and I see for example no package in Debian).  You would get that directly from CPAN, e.g., using <code>cpanminus</code>.</p>\n\n<p>Here is a simple example just searching for the old names (cpanminus puts the package in a non-standard location):</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse lib '/usr/local/lib/perl';\nuse Text::Unidecode;\n\nmy @args = unidecode(@ARGV);\n\nfor my $n ( 0 .. $#args ) {\n    my $name = $args[$n];\n    printf \"** grep %s -&gt;%s\\n\", $ARGV[$n], $args[$n];\n    system(\"grep -r \\\"$name\\\" .\");\n}\n\n1;\n</code></pre>\n\n<p>However, a better script would match both old/new names, since it is easy to overlook files that were converted.  Whether to ignore case is also something to consider.</p>\n"}, {"tags": [], "owner": {"reputation": 39406, "user_id": 371250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WKvHm.png?s=128&g=1", "display_name": "ninjalj", "link": "https://stackoverflow.com/users/371250/ninjalj"}, "is_accepted": true, "score": 1, "last_activity_date": 1460322402, "creation_date": 1460322402, "answer_id": 36535559, "question_id": 36533733, "link": "https://stackoverflow.com/questions/36533733/search-for-characters-similar-to-special-characters/36535559#36535559", "title": "Search for Characters Similar to Special Characters", "body": "<p>To ignore diacritics, you can use a search using the Unicode Collation Algorithm at level 1.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Unicode::Collate;\n\nmy $collator=Unicode::Collate-&gt;new(level =&gt; 1, normalization =&gt; undef);\n\nwhile (&lt;&gt;) {\n        print if $collator-&gt;match($_, \"Naufragos\")\n}\n</code></pre>\n\n<p>Naming this script as <code>ucagrep.pl</code>:</p>\n\n<pre><code>$ echo -e \"N\u00e1ufragos\\nNaufragos\\n\u00d1aufragos\" | perl -CS ucagrep.pl \nN\u00e1ufragos\nNaufragos\n\u00d1aufragos\n</code></pre>\n\n<p>Uhh. We better specify the locale:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Unicode::Collate::Locale;\n\nmy $collator=Unicode::Collate::Locale-&gt;new(locale =&gt; \"es\", level =&gt; 1, normalization =&gt; undef);\n\nwhile (&lt;&gt;) {\n        print if $collator-&gt;match($_, \"Naufragos\")\n}\n</code></pre>\n\n<p>Testing it:</p>\n\n<pre><code>$ echo -e \"N\u00e1ufragos\\nNaufragos\\n\u00d1aufragos\" | perl -CS ucagrep.pl \nN\u00e1ufragos\nNaufragos\n</code></pre>\n\n<p>Much better.</p>\n"}], "owner": {"reputation": 156, "user_id": 4160283, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VnGOL.jpg?s=128&g=1", "display_name": "Digger", "link": "https://stackoverflow.com/users/4160283/digger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 36535559, "answer_count": 2, "score": 0, "last_activity_date": 1460322402, "creation_date": 1460312671, "question_id": 36533733, "link": "https://stackoverflow.com/questions/36533733/search-for-characters-similar-to-special-characters", "title": "Search for Characters Similar to Special Characters", "body": "<p>I have several old text data files that were generated back in the 90's using an old DOS-era word processor.  Due to the limitations present at the time, there are many, many entries that were \"simplified\" during the data input process.</p>\n\n<p>For example, the word \"N\u00e1ufragos\" was entered as \"Naufragos\".</p>\n\n<p>Now, when searching for \"N\u00e1ufragos\" in said data files, I use grep to find \"N\u00e1ufragos\" and the search comes up empty (which it should), but I really need said search to find and output \"Naufragos\".</p>\n\n<p>I've combed the grep documentation and have Googled extensively, but have come up empty.</p>\n\n<p>Any solution needs to handle cases involving most (if not all) character \"variations\" that are <em>based</em> on the Latin alphabet (i.e. there are no Chinese, Cyrillic, Japanese, etc. present in said old data files).</p>\n\n<p>Is there a grep or, perhaps, perl option that does this?  Perhaps something like:</p>\n\n<pre><code>grep -&lt;magic option&gt; N\u00e1ufragos file.txt\n</code></pre>\n"}, {"tags": ["regex", "windows", "perl", "cmd"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1460313269, "post_id": 36533282, "comment_id": 60671314, "body": "You need to slurp the whole file into a string before doing the substitution. The <code>-p</code> command line switch only reads a line at a time"}, {"owner": {"reputation": 10272, "user_id": 1996394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bb7cf5d8bf03c5335a0ece8f6673541d?s=128&d=identicon&r=PG", "display_name": "rock321987", "link": "https://stackoverflow.com/users/1996394/rock321987"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1460313995, "post_id": 36533282, "comment_id": 60671648, "body": "@H&#229;konH&#230;gland Exactly.. It is required to read the entire file in a variable"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1460315944, "last_edit_date": 1460315944, "creation_date": 1460315331, "answer_id": 36534283, "question_id": 36533282, "link": "https://stackoverflow.com/questions/36533282/how-to-replace-multiple-any-character-including-newline-in-perl-regex/36534283#36534283", "title": "How to replace multiple any-character (including newline) in Perl RegEx?", "body": "<p>You need to slurp the whole file into a string before doing the substitution. The <code>-p</code> command line switch only reads a line at a time.</p>\n\n<p>It means that  the substitution <code>s/(END).*?(START)/$1\\n$2/sg</code> will only delete anything in those cases where there is an <code>END</code> pattern followed by a <code>START</code> pattern on the same single line.</p>\n\n<p>To slurp the file you can specify an input record separator of octal <code>0777</code>:</p>\n\n<pre><code>perl -0777 -p -i.bak changes.pl MyTextString.txt\n</code></pre>\n\n<p>From <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow\">perlrun</a>:</p>\n\n<blockquote>\n  <p><strong>-0[octal/hexadecimal]</strong>   </p>\n  \n  <p>specifies the input record separator ($/ ) as an octal or hexadecimal number. If there are no digits, the null\n  character is the separator. Other switches may precede or follow the\n  digits. ... The special value 00 will cause Perl to slurp files in paragraph mode. Any value 0400 or\n  above will cause Perl to slurp files whole, but by convention the\n  value 0777 is the one normally used for this purpose.</p>\n</blockquote>\n"}], "owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 36534283, "answer_count": 1, "score": 0, "last_activity_date": 1460315944, "creation_date": 1460310375, "last_edit_date": 1495541753, "question_id": 36533282, "link": "https://stackoverflow.com/questions/36533282/how-to-replace-multiple-any-character-including-newline-in-perl-regex", "title": "How to replace multiple any-character (including newline) in Perl RegEx?", "body": "<p>This is a simplified description of <a href=\"http://pastebin.com/yfDvZTyi\" rel=\"nofollow noreferrer\">MyTextString.txt</a>:</p>\n\n<p><em>Note: <strong>BlaBla</strong> stands for any character including new line character.</em></p>\n\n<blockquote>\n  <p><strong>START</strong> BlaBla-In <strong>END</strong> BlaBla-Out-Between <strong>START</strong> BlaBla-In <strong>END</strong> BlaBla-Out-Between <strong>START</strong> BlaBla-In <strong>END</strong> BlaBla-Out-Between <strong>START</strong> BlaBla-In <strong>END</strong> ...</p>\n</blockquote>\n\n<p>I'm looking for removing <em>text between END and START (BlaBla-Out-Between)</em> to result like this:</p>\n\n<blockquote>\n  <p><strong>START</strong> BlaBla-In <strong>END</strong> newline <strong>START</strong> BlaBla-In <strong>END</strong> newline <strong>START</strong> BlaBla-In <strong>END</strong> newline <strong>START</strong> BlaBla-In <strong>END</strong> ...</p>\n</blockquote>\n\n<p>I've a perl file <strong>changes.pl</strong>:</p>\n\n<pre><code>BEGIN {\n    @ARGV = map glob(\"\\\"$_\\\"\"), @ARGV;\n}\n\ns/(END).*?(START)/$1\\n$2/sg; #TEST\n</code></pre>\n\n<p>I should execute my replaces using this <strong>CMD line</strong>:</p>\n\n<pre><code>perl -i.bak -p changes.pl My/File/Directory/MyTextString.txt\n</code></pre>\n\n<p>Note: the <em>changes.pl</em> and <em>CMD line</em> are working well as described in this <a href=\"https://stackoverflow.com/questions/31774499/apply-multiple-find-and-replace-regex-queries-on-multiple-txt-files-using-a-per\">question</a> with other RegEx find and replace strings.</p>\n\n<p>But with this RegEx string no modifications happen to MyTextString.txt:</p>\n\n<pre><code>s/(END).*?(START)/$1\\n$2/sg;\n</code></pre>\n\n<p>I think every thing regarding my regular expression syntax is OK as it's working well on <a href=\"https://regex101.com/r/pH8kM4/2\" rel=\"nofollow noreferrer\">regex 101 tester</a>.</p>\n\n<p>I'm looking for matching and replacing <strong>any character (including newline)</strong> using mentioned <em>changes.pl</em> and <em>CMD line</em>. Simply, I'm looking for replacing <em>BlaBla-Out-Between</em> with <em>newline</em>.</p>\n"}, {"tags": ["windows", "perl", "scheduled-tasks", "strawberry-perl"], "comments": [{"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 3, "creation_date": 1460307172, "post_id": 36532161, "comment_id": 60669037, "body": "Simple way would be to pass a command line flag when you setup the scheduled task."}, {"owner": {"reputation": 583, "user_id": 700771, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cba8a2d29ebbe8ca776a82ab4958ab58?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/700771/rob"}, "reply_to_user": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 0, "creation_date": 1460821463, "post_id": 36532161, "comment_id": 60924183, "body": "@AlexK. Yes, that&#39;s obvious. Except that I want the script to be idiot proof."}], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 3676932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OhKJr.jpg?s=128&g=1", "display_name": "Gilles Maisonneuve", "link": "https://stackoverflow.com/users/3676932/gilles-maisonneuve"}, "is_accepted": false, "score": 1, "last_activity_date": 1611590544, "last_edit_date": 1611590544, "creation_date": 1611590220, "answer_id": 65888140, "question_id": 36532161, "link": "https://stackoverflow.com/questions/36532161/how-can-i-tell-when-a-perl-script-is-run-on-the-console-vs-a-windows-scheduled-t/65888140#65888140", "title": "How can I tell when a Perl script is run on the console vs a Windows Scheduled Task?", "body": "<p>Under a <em>normal</em> interactive console the PROMPT environment variable is defined, while it is not when .PL started from Windows Explorer (double click).</p>\n<p>I don't know if this will be the same behaviour under Windows scheduler as it is when directly using Windows Explorer, but you might try this (which works differentiating between interactive console and double-click from Windows Explorer under W7 and W10, professional editions, at least):</p>\n<pre><code>BEGIN {\n    $^O =~ /MSWin/ or die &quot;This programme must be run under Windows.\\n&quot;;\n};\n\nuse strict;\nuse warnings;\nuse 5.016;\n\nif ($ENV{PROMPT}) {\n    print &quot;This programme was started from an interactive console.&quot;;\n}\nelse {\n    say &quot;This programme was started directly from Windows Explorer.&quot;;\n    print 'Press &lt;return&gt;...'; &lt;&gt;;\n};\n</code></pre>\n<p>I suspect it might even be used under Unix: it seems to remember that, back in the days, the prompt was not defined at <code>cron</code> job when using Korn shell under <code>OSF1</code> (True64 Unix) from Digital.</p>\n<p>NB: if this does not work you might try to encapsulate your Perl job in a .CMD batch file and test the difference between %CMDCMDLINE% and %COMSPEC%, this is the usual way to check if a batch file is run from a console or not.\nBut this is beyond the scope of your question.</p>\n"}], "owner": {"reputation": 583, "user_id": 700771, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cba8a2d29ebbe8ca776a82ab4958ab58?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/700771/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1611590544, "creation_date": 1460304622, "question_id": 36532161, "link": "https://stackoverflow.com/questions/36532161/how-can-i-tell-when-a-perl-script-is-run-on-the-console-vs-a-windows-scheduled-t", "title": "How can I tell when a Perl script is run on the console vs a Windows Scheduled Task?", "body": "<p>I am using Strawberry Perl v5.22. I'd like to be able to determine when a script is being run in the console manually vs as a scheduled task, so as to alter the behaviour (e.g. change the log level to be more verbose and output to STDERR).</p>\n\n<p>I've tried <a href=\"https://metacpan.org/pod/IO::Interactive\" rel=\"nofollow\">IO::Interactive</a> but it always seems to say that the script is running in interactive mode. I think because Windows <em>always</em> runs a script in a new console, even when the task is run as the SYSTEM user.</p>\n\n<p>And I can't rely on the script running as the SYSTEM user, because in a few odd cases a script needs to run as Administrator.</p>\n"}, {"tags": ["python", "regex", "perl", "python-2.7"], "answers": [{"tags": [], "owner": {"reputation": 2797, "user_id": 5815127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d9591ca6b832b53f2f57f797502f5f?s=128&d=identicon&r=PG&f=1", "display_name": "Till", "link": "https://stackoverflow.com/users/5815127/till"}, "is_accepted": false, "score": 2, "last_activity_date": 1460305285, "creation_date": 1460305285, "answer_id": 36532292, "question_id": 36532146, "link": "https://stackoverflow.com/questions/36532146/strange-regex-behavior-when-matching-with-strings-that-include-dots/36532292#36532292", "title": "Strange regex behavior when matching with strings that include dots", "body": "<p>You could try : </p>\n\n<pre><code>match_regex = r'(^|\\b)('+joined_words+r')(\\s|$)'\n</code></pre>\n\n<p>If you want the p.m and pm at the last line : <a href=\"http://pythex.org/?regex=%28%5E|%5Cb%29%28pm|p.m.%29%28%5Cs|%24%29&amp;test_string=I%20will%20meet%20you%20at%202%20pm%0AI%20will%20meet%20you%20at%202%20p.m.%0AI%20will%20meet%20you%20at%202%20p.m.%20%0AI%20will%20meet%20you%20at%202%20p.m.%20pm%20&amp;ignorecase=0&amp;multiline=0&amp;dotall=0&amp;verbose=0\" rel=\"nofollow\">example</a></p>\n\n<p>or </p>\n\n<pre><code>match_regex = r'(^|\\s)('+joined_words+r')(\\s|$)'\n</code></pre>\n\n<p>if you want the first p.m. only : <a href=\"http://pythex.org/?regex=%28%5E|%5Cs%29%28pm|p.m.%29%28%5Cs|%24%29&amp;test_string=I%20will%20meet%20you%20at%202%20pm%0AI%20will%20meet%20you%20at%202%20p.m.%0AI%20will%20meet%20you%20at%202%20p.m.%20%0AI%20will%20meet%20you%20at%202%20p.m.%20pm%20&amp;ignorecase=0&amp;multiline=0&amp;dotall=0&amp;verbose=0\" rel=\"nofollow\">example</a></p>\n"}, {"tags": [], "owner": {"reputation": 16008, "user_id": 5043793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f1f00f1698fb26cd39dc876d0a3fa0c?s=128&d=identicon&r=PG&f=1", "display_name": "niemmi", "link": "https://stackoverflow.com/users/5043793/niemmi"}, "is_accepted": true, "score": 3, "last_activity_date": 1460305297, "creation_date": 1460305297, "answer_id": 36532298, "question_id": 36532146, "link": "https://stackoverflow.com/questions/36532146/strange-regex-behavior-when-matching-with-strings-that-include-dots/36532298#36532298", "title": "Strange regex behavior when matching with strings that include dots", "body": "<p><a href=\"https://docs.python.org/2/library/re.html#regular-expression-syntax\" rel=\"nofollow\">Python docs</a> state following about <code>\\b</code>:</p>\n\n<blockquote>\n  <p>Matches the empty string, but only at the beginning or end of a word. A word is defined as a sequence of <strong>alphanumeric or underscore</strong> characters, so the end of a word is indicated by whitespace or a non-alphanumeric, non-underscore character. Note that formally, \\b is defined as the boundary between a \\w and a \\W character (or vice versa), or between \\w and the beginning/end of the string, so the precise set of characters deemed to be alphanumeric depends on the values of the UNICODE and LOCALE flags. For example, r'\\bfoo\\b' matches 'foo', 'foo.', '(foo)', 'bar foo baz' but not 'foobar' or 'foo3'. Inside a character range, \\b represents the backspace character, for compatibility with Python\u2019s string literals.</p>\n</blockquote>\n\n<p>According to that definition <code>.</code> can't mark the end of the word so <code>\\b</code> doesn't match after <code>p.m.</code>. If you make following change to your match you get the behavior you expect:</p>\n\n<pre><code>match_regex = r'(^|\\b)('+joined_words+r')(\\s|$)'\n</code></pre>\n"}], "owner": {"reputation": 2031, "user_id": 4984066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T9n5j.jpg?s=128&g=1", "display_name": "ivan_bilan", "link": "https://stackoverflow.com/users/4984066/ivan-bilan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 1, "accepted_answer_id": 36532298, "answer_count": 2, "score": 1, "last_activity_date": 1460305297, "creation_date": 1460304580, "last_edit_date": 1460305024, "question_id": 36532146, "link": "https://stackoverflow.com/questions/36532146/strange-regex-behavior-when-matching-with-strings-that-include-dots", "title": "Strange regex behavior when matching with strings that include dots", "body": "<p>I have a following case where the matching seems to not work properly:</p>\n\n<pre><code>import re\n\ntest_case1 = u\"I will meet you at 2 pm\"\ntest_case2 = u\"I will meet you at 2 p.m.\"\ntest_case3 = u\"I will meet you at 2 p.m. \"\ntest_case4 = u\"I will meet you at 2 p.m. pm \"\n\nlist_of_words = ['p.m.', 'pm'] # list of words that can be enlarged\n\n# join all words into an or expression and escape all punctuation\njoined_words = '|'.join([re.escape(x) for x in list_of_words]) \n# create a regex that will match a word from the list of words only if it is \n# at the start/end of the sentence or it is between two word boundaries\nmatch_regex = r'(^|\\b)('+joined_words+r')(\\b|$)'\ncomp_regex = re.compile(match_regex, re.IGNORECASE) # compile the final regex\n\nprint comp_regex.findall(test_case1), len(comp_regex.findall(test_case1))\nprint comp_regex.findall(test_case2), len(comp_regex.findall(test_case2))\nprint comp_regex.findall(test_case3), len(comp_regex.findall(test_case3))\nprint comp_regex.findall(test_case4), len(comp_regex.findall(test_case4))\n</code></pre>\n\n<p>I get the following results for the 4 test cases:</p>\n\n<pre><code>[(u'', u'pm', u'')] 1\n[(u'', u'p.m.', u'')] 1\n[] 0\n[(u'', u'pm', u'')] 1\n</code></pre>\n\n<p>The 1st and 2nd cases seem to work fine, 3rd doesn't match \"p.m.\" if there is space after it, even though I have used \"\\b\" word boundary in the regex.</p>\n\n<p>The 4th case doesn't seem to match the \"p.m.\" at all and only matches the \"pm\".</p>\n\n<p>I can't seem to understand where the problem lies, any help is appreciated.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1460297896, "post_id": 36530267, "comment_id": 60665542, "body": "Perl regex != PCRE. Can you please clarify which one you&#39;re looking for?"}, {"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1460302854, "post_id": 36530267, "comment_id": 60667387, "body": "@ThisSuitIsBlackNot: OK, I take your word that &quot;Perl regex != PCRE&quot;; I have removed all mentions of &quot;PCRE&quot; from the post."}], "answers": [{"comments": [{"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "edited": false, "score": 0, "creation_date": 1460295769, "post_id": 36530305, "comment_id": 60664801, "body": "I had forgotten about <code>\\G</code>, and didn&#39;t know about <code>\\K</code> until now.  Both are great.  Thanks!"}], "tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": true, "score": 6, "last_activity_date": 1460294467, "creation_date": 1460294467, "answer_id": 36530305, "question_id": 36530267, "link": "https://stackoverflow.com/questions/36530267/can-an-iterative-replacement-procedure-be-specified-with-a-single-s/36530305#36530305", "title": "Can an iterative replacement procedure be specified with a single s///?", "body": "<p>Use the <code>\\G</code> anchor that matches the start of the string or the position after the previous match:</p>\n\n<pre><code>echo \"0011101TUVW0123ABC0123\" | perl -pe 's/\\G0*\\K1/000/g'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "edited": false, "score": 0, "creation_date": 1460296983, "post_id": 36530332, "comment_id": 60665199, "body": "I was not aware or <code>&#47;r</code>; I can see many uses for it; thanks for pointing it out."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1467624798, "last_edit_date": 1467624798, "creation_date": 1460294616, "answer_id": 36530332, "question_id": 36530267, "link": "https://stackoverflow.com/questions/36530267/can-an-iterative-replacement-procedure-be-specified-with-a-single-s/36530332#36530332", "title": "Can an iterative replacement procedure be specified with a single s///?", "body": "<h3>Update</h3>\n\n<p>I now realise that the OP probably requires a solution within the confines of PCRE, and the mention of Perl 5 is a red herring. However I've leaving this solution in place in case someone else arrives here with a similar question but without such limitations</p>\n\n<hr>\n\n<p>The simplest way is to use an <em>executable</em> substitution that performs the translation on the initial sequence of 0s and 1s</p>\n\n<p>Like this. The <code>/r</code> modifier (non-destructive substitution) requires at least v5.14 of Perl</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse v5.14;\n\nmy $s = \"0011101TUVW0123ABC0123\";\n\n$s =~ s{^([01]+)}{ $1 =~ s/1/000/gr }e;\n\nsay $s;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>000000000000000TUVW0123ABC0123\n</code></pre>\n"}], "owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 36530305, "answer_count": 2, "score": 2, "last_activity_date": 1479822550, "creation_date": 1460294252, "last_edit_date": 1479822550, "question_id": 36530267, "link": "https://stackoverflow.com/questions/36530267/can-an-iterative-replacement-procedure-be-specified-with-a-single-s", "title": "Can an iterative replacement procedure be specified with a single s///?", "body": "<p>Suppose we want to replace with <code>000</code> each instance of <code>1</code> that appears before the <em>first</em> character that is neither <code>0</code> nor <code>1</code>.</p>\n\n<p>For example, if the original string is</p>\n\n<pre><code>\"0011101TUVW0123ABC0123\"\n</code></pre>\n\n<p>then the desired replacement would yield the string</p>\n\n<pre><code>\"000000000000000TUVW0123ABC0123\"\n</code></pre>\n\n<p>In Perl 5, assuming that <code>$_</code> holds the input string, then something like this will do the trick:</p>\n\n<p><code>'*any* constant you like!' while s/^(0*)1/${1}000/;</code></p>\n\n<p>This method just keeps applying the same substitution rule (<code>s/^(0*)1/${1}000/</code>) until it \"converges\" (i.e. ceases to change the input).</p>\n\n<p>I want to know if there's a <code>s///</code> substition such that a <em>single</em> application of it achieves the same result.  (Think of the way that a <em>single</em> application of <code>s/1/000/g</code> is capable of replacing <em>every</em> occurrence of <code>1</code> with <code>000</code>.)</p>\n\n<hr>\n\n<p>Note that a <em>single</em> application of <code>s/^(0*)1/${1}000/g</code>, the <code>/g</code> notwithstanding, will replace only the first occurrence of <code>1</code>, resulting in:</p>\n\n<pre><code>\"000001101TUVW0123ABC0123\"\n</code></pre>\n"}, {"tags": ["perl", "file", "count", "duplicates"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1460302359, "post_id": 36530210, "comment_id": 60667186, "body": "@mkHun: That&#39;s encouraging. Thank you"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 6, "last_activity_date": 1467625395, "last_edit_date": 1467625395, "creation_date": 1460293917, "answer_id": 36530210, "question_id": 36529992, "link": "https://stackoverflow.com/questions/36529992/perl-counting-duplicates/36530210#36530210", "title": "Perl : Counting Duplicates", "body": "<p>The answer is that your input file comes from a Windows platform which uses CR LF as the line terminator. The CR is ordinarily removed on input when the file is read using Perl on the same platform, but if you use a Linux system to read the file then it will be left in place. Perl's <code>chomp</code> will remove only the LF, leaving the CR at the end of each hash key value. That will cause the output to be overwritten when the key is printed</p>\n\n<p>The solution is either to open your file using the <code>:crlf</code> PerlIO layer, or to remove both the CR and the LF from the end of the input using something other than <code>chomp</code></p>\n\n<p>There must be more to that program as you don't open <code>FILE</code> anywhere. Also, you sort the output in lexical order of the hash keys, not numerical order of the values</p>\n\n<p>Here is how I would write your code. The <code>:crlf</code> layer causes the CR LF line endings to be converted to just LF on input, and <code>chomp</code> will now function correctly leaving just the text in each line</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy $filename = 'myfile.txt';\n\nmy @chks = do {\n    open my $fh, '&lt;:crlf', $filename or die qq{Unable to open \"$filename\" for input: $!};\n    &lt;$fh&gt;;\n};\n\nchomp @chks;\n\nmy %map;\n\n++$map{$_} for @chks;\n\nfor my $key ( sort { $map{$b} &lt;=&gt; $map{$a} } keys %map ) {\n    print \"$key : $map{$key}\\n\";\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>AAAA : 3\nCCCC : 1\nBBBB : 1\nEEEE : 1\n</code></pre>\n\n<p>As I said, instead of using the <code>:crlf</code> layer you could use replace <code>chomp @chks</code> with <code>s/\\R\\z// for @chks</code>. The <code>\\R</code> will match any line terminator from any system: in this case the CR LF character pair</p>\n"}], "owner": {"reputation": 697, "user_id": 5449244, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/131ad184c67440a0a499852f247b4ea6?s=128&d=identicon&r=PG&f=1", "display_name": "onlyf", "link": "https://stackoverflow.com/users/5449244/onlyf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "accepted_answer_id": 36530210, "answer_count": 1, "score": 2, "last_activity_date": 1467625395, "creation_date": 1460292743, "last_edit_date": 1460297012, "question_id": 36529992, "link": "https://stackoverflow.com/questions/36529992/perl-counting-duplicates", "title": "Perl : Counting Duplicates", "body": "<p>I have the following file.txt :</p>\n\n<pre><code>AAAA\nBBBB\nAAAA\nCCCC\nEEEE\nAAAA\n</code></pre>\n\n<p>and i ve written a script to count the number of duplicates, sort them from highest duplicates to lowest and print them. Like :</p>\n\n<pre><code>AAAA : 3\nBBBB : 1\nCCCC : 1\nEEEE : 1\n</code></pre>\n\n<p>The script is :</p>\n\n<pre><code>use v5.14;\nuse strict;\n\nmy %map;\nchomp(my @chks = &lt;FILE&gt;);\n\nforeach my $load (@chks) {\n    $map{$load} += 1;\n}\n\nforeach my $key (sort keys %map) {\n    say \"$key : $map{$key} \"\n} \n</code></pre>\n\n<p>But the output comes out like :</p>\n\n<pre><code> : 3\n : 1\n : 1\n : 1\n</code></pre>\n\n<p>Why can it not see the value of $key?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 9006, "user_id": 2805376, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/gTE7F.jpg?s=128&g=1", "display_name": "Shafizadeh", "link": "https://stackoverflow.com/users/2805376/shafizadeh"}, "edited": false, "score": 0, "creation_date": 1460281241, "post_id": 36527777, "comment_id": 60660448, "body": "What do you want to extract from text above?"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 6183520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d37f6b0714e70b5a896de30013c99022?s=128&d=identicon&r=PG&f=1", "display_name": "giotto", "link": "https://stackoverflow.com/users/6183520/giotto"}, "edited": false, "score": 0, "creation_date": 1460305333, "post_id": 36528625, "comment_id": 60668351, "body": "Thanks for your answer Marty!!. Sorry if my question is a bit confuse. Yes, there are more than one lines in the file and it might have more that one ip that try to login in the period of time. Assume that &quot;failed login&quot; mean that user fail to verify themselves which record as one log. So, I need to know if any of ip in the log file that fail to verify themselves more that 10 times in 10 minutes. So, how can I know if there are two &quot;ip&quot; try to login in the same time, do I need to save the list of ip in the file?"}], "tags": [], "owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "is_accepted": true, "score": 0, "last_activity_date": 1460443828, "last_edit_date": 1460443828, "creation_date": 1460284320, "answer_id": 36528625, "question_id": 36527777, "link": "https://stackoverflow.com/questions/36527777/how-can-i-calculate-time-different-from-file-in-perl/36528625#36528625", "title": "How can I calculate time different from file in perl", "body": "<p>Your specification is a little ambiguous - presumably there are going to be more than two lines in your log file - do you want the time difference between successive lines?  Do you want a line parsed searching for a keyword (such as \"failed login\") and then the time difference to a different line similarly parsed?</p>\n\n<p>Since I can't tell from what you've provided, I'm simply going to presume that there are two lines in a file which have a date at the start of each line and you want the time difference between those dates.  You can then manipulate to do what you want.  Alternatively, add to your question and define exactly what a \"failed login\" is.</p>\n\n<p>There are many ways to skin this cat but I prefer the <code>strptime</code> function from <a href=\"http://search.cpan.org/~drolsky/DateTime-Format-Strptime-1.67/lib/DateTime/Format/Strptime.pm\" rel=\"nofollow\">DateTime::Format::Strptime</a> which is described as;</p>\n\n<p><em>This module implements most of strptime(3), the POSIX function that is the reverse of strftime(3), for DateTime. While strftime takes a DateTime and a pattern and returns a string, strptime takes a string and a pattern and returns the DateTime object associated.</em></p>\n\n<p>This will do as I've described above;</p>\n\n<pre><code>use v5.12;\nuse DateTime::Format::Strptime;\n\nmy $logfile = \"ssh.log\";\nopen(my $fh, '&lt;', $logfile) or die \"$logfile: $!\";\n\nmy $strp = DateTime::Format::Strptime-&gt;new(\n    pattern   =&gt; '%h %d %T ',\n    time_zone =&gt; 'local',\n    on_error  =&gt; 'croak',\n);\n\nmy $dt1 = $strp-&gt;parse_datetime(scalar &lt;$fh&gt;);\nmy $dt2 = $strp-&gt;parse_datetime(scalar &lt;$fh&gt;);\n\nmy $duration = $dt2-&gt;subtract_datetime_absolute($dt1);\nsay \"Number of seconds difference is: \", $duration-&gt;seconds ;\n#\n# Input\n# Jan 10 14:03:18 Failed password for invalid user root from \"ip\" port xxx ssh2\n# Jan 10 14:03:22 sshd[]: User root from \"ip\" not allowed because none of user's groups are listed in AllowGroups\n#\n# Outputs:\n# Number of seconds difference is: 4\n</code></pre>\n\n<p>A more comprehensive answer (making even more assumptions) is below:</p>\n\n<pre><code>use v5.12;\nuse DateTime::Format::Strptime;\nuse DateTime::Duration;\n\nmy $logfile = \"ssh.log\";\nmy $maximum_failures_allowed = 3 ;\nmy $minimum_time_frame = 10 * 60;  # in seconds\n\nmy $limit = $maximum_failures_allowed - 1 ;\n\n# The following is a list of rules indicating a\n# failed login for the username captured in $1\nmy @rules = (\n      qr/Failed password for user (\\S+) / ,\n      qr/User (\\S+) from [\\d\\.]+ not allowed/\n   );\n\nmy $strp = DateTime::Format::Strptime-&gt;new(\n    pattern   =&gt; '%h %d %T ',\n    time_zone =&gt; 'local',\n    on_error  =&gt; 'croak',\n);\n\nmy %usernames ;\n\nopen(my $fh, '&lt;', $logfile) or die \"$logfile: $!\";\nwhile (&lt;$fh&gt;) {\n    for my $rx (@rules) {\n        if ( /$rx/ )  {\n            # rule matched -&gt; login fail for $1.  Save log line.\n            my $user = $1 ;\n            push  @{ $usernames{$user} }  ,  $_ ;\n\n            # No point checking other rules...\n            last ;\n        }\n    }\n}\nclose $fh ;\n\nfor my $user (keys %usernames) {\n    my @failed_logins = @{ $usernames{$user} };\n\n    # prime the loop; we know there is at least one failed login\n    my $this_line  = shift @failed_logins ;\n\n    while ( @failed_logins &gt; $limit )  {\n        my $other_line = $failed_logins[ $limit ] ;\n        my $this_time  = $strp-&gt;parse_datetime($this_line) ;\n        my $other_time = $strp-&gt;parse_datetime($other_line) ;\n\n        #  this produces a DateTime::Duration object with the difference in seconds\n        my $time_frame = $other_time-&gt;subtract_datetime_absolute( $this_time );\n\n        if ($time_frame-&gt;seconds &lt; $minimum_time_frame) {\n            say   \"User $user had login failures at the following times:\" ;\n            print \"  $_\" for $this_line, @failed_logins[ 0 .. $limit ] ;\n\n            # (s)he may have more failures but let's not labour the point\n            last ;\n        }\n\n        # Here if user had too many failures but within a reasonable time frame\n        # Continue to move through the array of failures checking time frames\n        $this_line  = shift @failed_logins ;\n    }\n}\nexit 0;\n</code></pre>\n\n<p>Ran on this data;</p>\n\n<pre><code>Jan 10 14:03:18 sshd[15798]: Failed password for user root from \"ip\" port xxx ssh2\nJan 10 14:03:22 sshd[15798]: User root from 188.124.3.41 not allowed because none of user's groups are listed in AllowGroups\nJan 10 20:31:12 sshd[15798]: Connection from 188.124.3.41 port 32889\nJan 10 20:31:14 sshd[15798]: Failed password for user root from 188.124.3.41 port 32889 ssh2\nJan 10 20:31:14 sshd[29323]: Received disconnect from 188.124.3.41: 11: Bye Bye\nJan 10 22:04:56 sshd[25438]: Connection from 200.54.84.233 port 45196\nJan 10 22:04:58 sshd[25438]: Failed password for user root from 200.54.84.233 port 45196 ssh2\nJan 10 22:04:58 sshd[30487]: Received disconnect from 200.54.84.233: 11: Bye Bye\nJan 10 22:04:59 sshd[21358]: Connection from 200.54.84.233 port 45528\nJan 10 22:05:01 sshd[21358]: Failed password for user root from 200.54.84.233 port 45528 ssh2\nJan 10 22:05:02 sshd[2624]: Received disconnect from 200.54.84.233: 11: Bye Bye\nJan 10 22:05:29 sshd[21358]: Connection from 200.54.84.233 port 45528\nJan 10 22:05:30 sshd[21358]: Failed password for user root from 200.54.84.233 port 45528 ssh2\nJan 10 22:05:33 sshd[2624]: Received disconnect from 200.54.84.233: 11: Bye Bye\nJan 10 22:06:49 sshd[21358]: Connection from 200.54.84.233 port 45528\nJan 10 22:06:51 sshd[21358]: Failed password for user root from 200.54.84.233 port 45528 ssh2\nJan 10 22:06:51 sshd[2624]: Received disconnect from 200.54.84.233: 11: Bye Bye\n</code></pre>\n\n<p>... it produces this output;</p>\n\n<pre><code>User root had login failures at the following times:\n  Jan 10 22:04:58 sshd[25438]: Failed password for user root from 200.54.84.233 port 45196 ssh2\n  Jan 10 22:05:01 sshd[21358]: Failed password for user root from 200.54.84.233 port 45528 ssh2\n  Jan 10 22:05:30 sshd[21358]: Failed password for user root from 200.54.84.233 port 45528 ssh2\n  Jan 10 22:06:51 sshd[21358]: Failed password for user root from 200.54.84.233 port 45528 ssh2\n</code></pre>\n\n<p>Note that the timezone and/or offset is not present in the logfile data - so, there is no way for this script to work correctly on the day you enter or leave \"Daylight Savings.\"</p>\n"}], "owner": {"reputation": 45, "user_id": 6183520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d37f6b0714e70b5a896de30013c99022?s=128&d=identicon&r=PG&f=1", "display_name": "giotto", "link": "https://stackoverflow.com/users/6183520/giotto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 36528625, "answer_count": 1, "score": 0, "last_activity_date": 1460443828, "creation_date": 1460278535, "question_id": 36527777, "link": "https://stackoverflow.com/questions/36527777/how-can-i-calculate-time-different-from-file-in-perl", "title": "How can I calculate time different from file in perl", "body": "<p>this is my first post so please bear with me, I want to calculate the time different from ssh log file which have format like this</p>\n\n<pre><code>Jan 10 hr:min:sec Failed password for invalid user root from \"ip\" port xxx ssh2\nJan 10 hr:min:sec sshd[]: User root from \"ip\" not allowed because none of user's groups are listed in AllowGroups\n</code></pre>\n\n<p>The script will alert when user fail to login x times within 10 minutes, any can please teach me how to do this?</p>\n\n<p>Thanks!!</p>\n"}, {"tags": ["perl", "parsing"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1481008581, "post_id": 36527678, "comment_id": 69188244, "body": "Please see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 2919704, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/135b166a088d55ea5e3c1e37a62597ec?s=128&d=identicon&r=PG&f=1", "display_name": "Volverine", "link": "https://stackoverflow.com/users/2919704/volverine"}, "edited": false, "score": 0, "creation_date": 1460281127, "post_id": 36527940, "comment_id": 60660412, "body": "Hi stud ...actually  file 1 don&#39;t have all labels  in single  line .... Total x  then Total y in new line and so on....So your code  is  printing first line  of  file 1 till  first split"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 75, "user_id": 2919704, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/135b166a088d55ea5e3c1e37a62597ec?s=128&d=identicon&r=PG&f=1", "display_name": "Volverine", "link": "https://stackoverflow.com/users/2919704/volverine"}, "edited": false, "score": 0, "creation_date": 1460281551, "post_id": 36527940, "comment_id": 60660543, "body": "@Volverine, I added an example for your new input files."}, {"owner": {"reputation": 75, "user_id": 2919704, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/135b166a088d55ea5e3c1e37a62597ec?s=128&d=identicon&r=PG&f=1", "display_name": "Volverine", "link": "https://stackoverflow.com/users/2919704/volverine"}, "edited": false, "score": 0, "creation_date": 1460282016, "post_id": 36527940, "comment_id": 60660678, "body": "@stud ..thanks it worked ...i have  one more query ... suppose i want to divide  column 2 value with value  column value 3  and print  it in last  column new to add (5th column) ..how can we do that...for  example                                                     Total X : 4790351 4786929 3422 0 0.99 ( same for rest too ). can you please help for that  too"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 75, "user_id": 2919704, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/135b166a088d55ea5e3c1e37a62597ec?s=128&d=identicon&r=PG&f=1", "display_name": "Volverine", "link": "https://stackoverflow.com/users/2919704/volverine"}, "edited": false, "score": 0, "creation_date": 1460282979, "post_id": 36527940, "comment_id": 60660905, "body": "@Volverine, <code>Illegal division by zero</code>.  But generally,   <code>my @numbers = split &#47;\\s+&#47;, $line;  my $fifth_column = $numbers[1] &#47; $numbers[2]; print {$OUTFILE} &quot;$line_prefixes[$.-1] $line $fifth_column&quot;;</code>"}, {"owner": {"reputation": 75, "user_id": 2919704, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/135b166a088d55ea5e3c1e37a62597ec?s=128&d=identicon&r=PG&f=1", "display_name": "Volverine", "link": "https://stackoverflow.com/users/2919704/volverine"}, "edited": false, "score": 0, "creation_date": 1460283797, "post_id": 36527940, "comment_id": 60661120, "body": "@stud my output is  coming like below                                                                Total Z       : 2135943\t2135943\t0\t0      Total Y       : 420512\t420512\t0\t0      Total X        : 0\t0\t0\t0                                                                   can we allign the output like below                                                               Total Z       : 2135943\t2135943\t0\t0      Total Y       :   420512 \t  420512\t0\t0      Total X       :           0\t                   0\t0\t0"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 75, "user_id": 2919704, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/135b166a088d55ea5e3c1e37a62597ec?s=128&d=identicon&r=PG&f=1", "display_name": "Volverine", "link": "https://stackoverflow.com/users/2919704/volverine"}, "edited": false, "score": 0, "creation_date": 1460284890, "post_id": 36527940, "comment_id": 60661458, "body": "@Volverine, Try this: <code>printf &quot;%-10s %10d %10d %2d %2d  %8.4f\\n&quot;, &quot;hello :&quot;, 44444, 333333, 0, 0, 0.998777889897;</code>"}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 1, "last_activity_date": 1460284337, "last_edit_date": 1460284337, "creation_date": 1460279679, "answer_id": 36527940, "question_id": 36527678, "link": "https://stackoverflow.com/questions/36527678/file-parsing-using-perl/36527940#36527940", "title": "File parsing using perl", "body": "<pre><code>use strict;\nuse warnings; \nuse 5.020;\nuse autodie;\nuse Data::Dumper;\n\nopen my $FILE1, \"&lt;\", \"file1.txt\";\nopen my $FILE2, \"&lt;\", \"file2.txt\";\nopen my $OUTFILE, \"&gt;\", \"results.txt\";\n\nmy $first_line = &lt;$FILE1&gt;;\nclose $FILE1;\n\nmy @line_prefixes = split /\\s*:\\s*/, $first_line;\n\nwhile (my $line = &lt;$FILE2&gt;) {\n    print {$OUTFILE} \"$line_prefixes[$. - 1]: $line\";\n}\n\nclose $FILE2;\nclose $OUTFILE;\n</code></pre>\n\n<p><code>$.</code> is the current line number in the file (<code>$.</code> equals 1 for the first line).</p>\n\n<p>A sample run:</p>\n\n<pre><code>/pperl_programs$ cat file1.txt\nTotal X : Total y : Total z : Total t :\n\n~/pperl_programs$ cat file2.txt\n4790351 4786929 3422 0\n84860 84860 0 0\n206626 206626 0 0\n93902 93823 79 0\n\n~/pperl_programs$ cat results.txt\n\n~/pperl_programs$ perl myprog.pl\n\n~/pperl_programs$ cat results.txt\nTotal X: 4790351 4786929 3422 0\nTotal y: 84860 84860 0 0\nTotal z: 206626 206626 0 0\nTotal t: 93902 93823 79 0\n~/pperl_programs$ \n</code></pre>\n\n<p>For your altered files:</p>\n\n<pre><code>use strict;\nuse warnings; \nuse 5.020;\nuse autodie;\nuse Data::Dumper;\n\nopen my $FILE1, \"&lt;\", \"file1.txt\";\nopen my $FILE2, \"&lt;\", \"file2.txt\";\nopen my $OUTFILE, \"&gt;\", \"results.txt\";\n\nchomp(my @line_prefixes = &lt;$FILE1&gt;);\nclose $FILE1;\n\nwhile (my $line = &lt;$FILE2&gt;) {\n    print {$OUTFILE} \"$line_prefixes[$.-1] $line\";\n}\n\nclose $FILE2;\nclose $OUTFILE;\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>~/pperl_programs$ cat file1.txt\nTotal X :\nTotal y :\nTotal z :\nTotal t :\n\n~/pperl_programs$ cat file2.txt\n4790351 4786929 3422 0\n84860 84860 0 0\n206626 206626 0 0\n93902 93823 79 0\n\n~/pperl_programs$ cat results.txt\n\n~/pperl_programs$ perl 1.pl\n\n~/pperl_programs$ cat results.txt\nTotal X : 4790351 4786929 3422 0\nTotal y : 84860 84860 0 0\nTotal z : 206626 206626 0 0\nTotal t : 93902 93823 79 0\n</code></pre>\n\n<p>If your files are big, you probably don't want to read the whole first file into memory.  If that's the case, you can read each file line by line:</p>\n\n<pre><code>use strict;\nuse warnings; \nuse 5.020;\nuse autodie;\nuse Data::Dumper;\n\nopen my $FILE1, \"&lt;\", \"file1.txt\";\nopen my $FILE2, \"&lt;\", \"file2.txt\";\nopen my $OUTFILE, \"&gt;\", \"results.txt\";\n\nwhile (!eof($FILE1) and !eof($FILE2) ) {\n    my $line_prefix = &lt;$FILE1&gt;;\n    chomp $line_prefix;\n\n    my $numbers_line = &lt;$FILE2&gt;;\n    chomp $numbers_line;\n    my @numbers = split /\\s+/, $numbers_line;\n\n    my $fifth_column = $numbers[1] / $numbers[0];\n    say {$OUTFILE} \"$line_prefix $numbers_line $fifth_column\";\n}\n\nclose $FILE1;\nclose $FILE2;\nclose $OUTFILE;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 2919704, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/135b166a088d55ea5e3c1e37a62597ec?s=128&d=identicon&r=PG&f=1", "display_name": "Volverine", "link": "https://stackoverflow.com/users/2919704/volverine"}, "edited": false, "score": 0, "creation_date": 1460280945, "post_id": 36528012, "comment_id": 60660362, "body": "there will always we equal num of  labels   and data  in both files"}, {"owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "reply_to_user": {"reputation": 75, "user_id": 2919704, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/135b166a088d55ea5e3c1e37a62597ec?s=128&d=identicon&r=PG&f=1", "display_name": "Volverine", "link": "https://stackoverflow.com/users/2919704/volverine"}, "edited": false, "score": 0, "creation_date": 1460281241, "post_id": 36528012, "comment_id": 60660449, "body": "Then the code shown will work fine - it only requires the <code>&#47;&#47; &quot;No Label?&quot;</code> to cover the error condition so, might as well leave it there."}], "tags": [], "owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "is_accepted": false, "score": 0, "last_activity_date": 1460281049, "last_edit_date": 1460281049, "creation_date": 1460280287, "answer_id": 36528012, "question_id": 36527678, "link": "https://stackoverflow.com/questions/36527678/file-parsing-using-perl/36528012#36528012", "title": "File parsing using perl", "body": "<p>Your specification has a few loose ends; for instance - what if there are more lines in <code>file2</code> then there are total labels in <code>file1</code>?  Do you want the spaces in the first input file ignored?  Do you want the spaces in the output file specifically as shown? ... and you really don't want any totals calculated??</p>\n\n<p>I've presumed \"yes\" to most of these questions.  My solution is driven by the second data file - which means that if there are more total labels then there are lines of data, they are going to be ignored.  It also means that if there are more data lines in file2 then there are labels in file1, the program will simply make up the label - <code>No Label?</code>.</p>\n\n<p>Finally, just in case you want to add these numbers up at some point, I've included but commented the <code>sum</code> function from <code>List::Util</code>.</p>\n\n<pre><code>use v5.12;\nuse File::Slurp;\n# use File::Util qw( sum );\n\nmy $file1 = \"file1.txt\";\nmy $file2 = \"file2.txt\";\nmy $file3 = \"file3.txt\";\n\nopen(my $outfh, '&gt;', $file3) or die \"$file3: $!\";\n\nmy @vals1 = split /\\s*:\\s*\\n/ , read_file($file1);\nmy @vals2 = read_file($file2);\n\nwhile (my $line = shift @vals2) {\n    chomp $line;\n    # my $total = sum split(\" \", $line);\n    printf $outfh  \"%s : %s\\n\" , shift @vals1 // \"No Label?\" , $line ;\n}\n#\n# $ cat file3.txt\nTotal X : 4790351 4786929 3422 0\nTotal y : 84860 84860 0 0\nTotal z : 206626 206626 0 0\nTotal t : 93902 93823 79 0\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 2919704, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/135b166a088d55ea5e3c1e37a62597ec?s=128&d=identicon&r=PG&f=1", "display_name": "Volverine", "link": "https://stackoverflow.com/users/2919704/volverine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1460284337, "creation_date": 1460277887, "last_edit_date": 1460280521, "question_id": 36527678, "link": "https://stackoverflow.com/questions/36527678/file-parsing-using-perl", "title": "File parsing using perl", "body": "<p>I am stuck in middle , i need  help . </p>\n\n<p>i have two files : </p>\n\n<ul>\n<li>file1:</li>\n</ul>\n\n<p>Total X        :<br>\nTotal y        :<br>\nTotal z        :<br>\nTotal t        :</p>\n\n<p>file 2:<br>\n4790351 4786929 3422    0<br>\n84860   84860   0   0<br>\n206626  206626  0   0<br>\n93902   93823   79  0 </p>\n\n<p>now  i want output like this in third file </p>\n\n<p>Total X        : 4790351 4786929  3422   0<br>\n   Total y        :   84860   84860     0   0<br>\n   Total z        :  206626  206626     0   0<br>\n   Total t        :   93902   93823    79   0  </p>\n\n<h1>This  is  my code below to try the parsing :Please help me getting the required output</h1>\n\n<pre><code>while ( not eof $tata and not eof $outfh )\n {\n   my @vals1 = split /\":\"/,&lt;$tata&gt;;\n\n\n   my @vals2 = split /\\s+/, &lt;$outfh&gt;;\n\n   my @sum = join \"\\t\", map { $vals1,$vals2[$_]} 0 .. $#vals2;\n\n   printf $_ for @sum,\"\\n\";\n\n   }\n</code></pre>\n"}, {"tags": ["perl", "shell", "awk"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1460273782, "post_id": 36527024, "comment_id": 60658419, "body": "<a href=\"http://stackoverflow.com/q/1729824/1030675\">stackoverflow.com/q/1729824/1030675</a>"}, {"owner": {"reputation": 463, "user_id": 5815855, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/33c359f237d282913960fbf050b6a526?s=128&d=identicon&r=PG&f=1", "display_name": "Neeld", "link": "https://stackoverflow.com/users/5815855/neeld"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1460274201, "post_id": 36527024, "comment_id": 60658518, "body": "thanks it worked@choraba"}, {"owner": {"reputation": 463, "user_id": 5815855, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/33c359f237d282913960fbf050b6a526?s=128&d=identicon&r=PG&f=1", "display_name": "Neeld", "link": "https://stackoverflow.com/users/5815855/neeld"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1460274235, "post_id": 36527024, "comment_id": 60658526, "body": "trying to understand the code now.."}, {"owner": {"reputation": 463, "user_id": 5815855, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/33c359f237d282913960fbf050b6a526?s=128&d=identicon&r=PG&f=1", "display_name": "Neeld", "link": "https://stackoverflow.com/users/5815855/neeld"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1460290542, "post_id": 36527024, "comment_id": 60663055, "body": "I understood the first part of the code but not the str part.Can you please explain what does the code do?  I am a beginner in scripting.Thnx."}], "answers": [{"comments": [{"owner": {"reputation": 463, "user_id": 5815855, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/33c359f237d282913960fbf050b6a526?s=128&d=identicon&r=PG&f=1", "display_name": "Neeld", "link": "https://stackoverflow.com/users/5815855/neeld"}, "edited": false, "score": 0, "creation_date": 1460290675, "post_id": 36527803, "comment_id": 60663095, "body": "Thanks agc this also works but looks like cut and paste re-arranges words vs. awk parses and uses logic to do it? I am trying to learn as a new programmer, most efficient way to do it.Thnx."}, {"owner": {"reputation": 6955, "user_id": 6136214, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0385d5a1c27a6707139e7dc7ad29b6d6?s=128&d=identicon&r=PG&f=1", "display_name": "agc", "link": "https://stackoverflow.com/users/6136214/agc"}, "reply_to_user": {"reputation": 463, "user_id": 5815855, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/33c359f237d282913960fbf050b6a526?s=128&d=identicon&r=PG&f=1", "display_name": "Neeld", "link": "https://stackoverflow.com/users/5815855/neeld"}, "edited": false, "score": 0, "creation_date": 1460307964, "post_id": 36527803, "comment_id": 60669330, "body": "@Neeld, see revised answer above with explanation."}, {"owner": {"reputation": 463, "user_id": 5815855, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/33c359f237d282913960fbf050b6a526?s=128&d=identicon&r=PG&f=1", "display_name": "Neeld", "link": "https://stackoverflow.com/users/5815855/neeld"}, "edited": false, "score": 0, "creation_date": 1460363615, "post_id": 36527803, "comment_id": 60688320, "body": "Perfect . checking man pages of cut and paste .Thanks again."}], "tags": [], "owner": {"reputation": 6955, "user_id": 6136214, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0385d5a1c27a6707139e7dc7ad29b6d6?s=128&d=identicon&r=PG&f=1", "display_name": "agc", "link": "https://stackoverflow.com/users/6136214/agc"}, "is_accepted": false, "score": 0, "last_activity_date": 1460307855, "last_edit_date": 1460307855, "creation_date": 1460278725, "answer_id": 36527803, "question_id": 36527024, "link": "https://stackoverflow.com/questions/36527024/rearrange-row-to-column-awk-or-shell/36527803#36527803", "title": "Rearrange row to column awk or shell", "body": "<p>With shell utils <strong>cut</strong> and <strong>paste</strong>:</p>\n\n<pre><code>for f in 1 2 ; do cut -d ' ' -f $f file.txt ; done | paste -d ' ' - - -\n</code></pre>\n\n<p>Outputs:</p>\n\n<blockquote>\n  <p>name alice ryan<br>\n  age 21 30</p>\n</blockquote>\n\n<p>How it works.  The field separator in <em>file.txt</em> is a <strong>space</strong>, so both <strong>cut</strong> and <strong>paste</strong> (which have <strong>tab</strong> as a default field separator) must use the <em>-d ' '</em> option.  We know in advance there are two columns in <em>file.txt</em>, the <strong>for</strong> loop therefore requires two passes.  Pass #1, <strong>cut</strong> selects <em>column 1</em> from <em>file.txt</em>, pass #2, <em>column 2</em>.  When the <strong>for</strong> loop ends, what's fed to the pipe '|' looks like:</p>\n\n<blockquote>\n  <p>name alice ryan age 21 30</p>\n</blockquote>\n\n<p>Then <strong>paste</strong> outputs that three at a time (hence the three hyphens).</p>\n"}], "owner": {"reputation": 463, "user_id": 5815855, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/33c359f237d282913960fbf050b6a526?s=128&d=identicon&r=PG&f=1", "display_name": "Neeld", "link": "https://stackoverflow.com/users/5815855/neeld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "closed_date": 1460289212, "answer_count": 1, "score": 0, "last_activity_date": 1460307855, "creation_date": 1460272860, "last_edit_date": 1460273470, "question_id": 36527024, "link": "https://stackoverflow.com/questions/36527024/rearrange-row-to-column-awk-or-shell", "closed_reason": "Duplicate", "title": "Rearrange row to column awk or shell", "body": "<p>Given a text file file.txt, transpose its content.</p>\n\n<p>For example, if file.txt has the following content:</p>\n\n<pre><code>name age\nalice 21\nryan 30\n</code></pre>\n\n<p>Output the following:</p>\n\n<pre><code>name alice ryan\nage 21 30\n</code></pre>\n"}, {"tags": ["arrays", "perl", "count"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1460277636, "post_id": 36526711, "comment_id": 60659393, "body": "Please show sample input and the expected output."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1460286905, "post_id": 36526711, "comment_id": 60661967, "body": "What&#39;s not clear is whether a string in the array like &quot;aaa&quot; should count as 1 or 3."}], "answers": [{"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 1, "last_activity_date": 1460272989, "last_edit_date": 1460272989, "creation_date": 1460270750, "answer_id": 36526770, "question_id": 36526711, "link": "https://stackoverflow.com/questions/36526711/how-do-i-count-the-number-of-specific-letters-in-an-array-perl/36526770#36526770", "title": "How do i count the number of specific letters in an array, Perl?", "body": "<p>Use <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow\">grep</a> for to do it</p>\n\n<pre><code>my @ar = qw(abc cde fgh 123 abc);\nmy $count = grep{ /ab/} @ar;\nprint $count;\n</code></pre>\n\n<p>Or else use foreach</p>\n\n<pre><code>my @ar = qw(abc cde fgh 123 abc);\nmy $m;\n$m+= /ab/,foreach (@ar);\nprint $m;\n</code></pre>\n\n<p>While the match was encountered <code>$m</code> will increment. </p>\n"}, {"tags": [], "owner": {"reputation": 3604, "user_id": 436450, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0afd75178763cf41af43a103b95277ae?s=128&d=identicon&r=PG", "display_name": "jira", "link": "https://stackoverflow.com/users/436450/jira"}, "is_accepted": false, "score": 1, "last_activity_date": 1460289119, "creation_date": 1460289119, "answer_id": 36529352, "question_id": 36526711, "link": "https://stackoverflow.com/questions/36526711/how-do-i-count-the-number-of-specific-letters-in-an-array-perl/36529352#36529352", "title": "How do i count the number of specific letters in an array, Perl?", "body": "<p>You might consider  <a href=\"http://search.cpan.org/~bayashi/Text-CountString-0.03/lib/Text/CountString.pm\" rel=\"nofollow\">Text::CountString</a> module on CPAN.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1460368992, "creation_date": 1460368992, "answer_id": 36545553, "question_id": 36526711, "link": "https://stackoverflow.com/questions/36526711/how-do-i-count-the-number-of-specific-letters-in-an-array-perl/36545553#36545553", "title": "How do i count the number of specific letters in an array, Perl?", "body": "<p>The code that you have seems to work find for counting the occurrences. The only problem you have is in displaying the counts. You're using a new scalar variable called <code>$counts</code> which is undeclared and empty.</p>\n\n<p>What you want is this:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %counts;\n$counts{$_}++ for @array;\nprint \"$_: $counts{$_}\\n\" for keys %counts;\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 5908886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uYdJhbYiFlE/AAAAAAAAAAI/AAAAAAAANT8/Pd71JaSj2zk/photo.jpg?sz=128", "display_name": "SaltedPork", "link": "https://stackoverflow.com/users/5908886/saltedpork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 36526770, "answer_count": 3, "score": 0, "last_activity_date": 1460368992, "creation_date": 1460270383, "question_id": 36526711, "link": "https://stackoverflow.com/questions/36526711/how-do-i-count-the-number-of-specific-letters-in-an-array-perl", "title": "How do i count the number of specific letters in an array, Perl?", "body": "<p>I have an array which only has letters in it, no digits. I want to count the number of times a specific letter shows. I don't want to use a hash, i need to preserve the order of the list. </p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %counts;\n$counts{$_}++ for @array;\nprint \"$counts\\n\";\n</code></pre>\n"}, {"tags": ["macos", "perl", "datetime"], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 3210819, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/110600757/picture?type=large", "display_name": "traisjames", "link": "https://stackoverflow.com/users/3210819/traisjames"}, "edited": false, "score": 0, "creation_date": 1460263301, "post_id": 36525426, "comment_id": 60656281, "body": "That little change made all the difference.  Thank you."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1460259326, "last_edit_date": 1492086990, "creation_date": 1460258911, "answer_id": 36525426, "question_id": 36525221, "link": "https://stackoverflow.com/questions/36525221/perls-retrieval-of-file-create-time-incorrect/36525426#36525426", "title": "Perl&#39;s retrieval of file create time incorrect", "body": "<p><code>ctime</code> is the \"time of last status change\", which I believe is the time the inode was last modified. It is NOT the file's creation time<sup>[1]</sup>. <code>ls</code> lists the file modification time, so simply change from using <code>ctime</code> to using <code>mtime</code>.</p>\n\n<hr>\n\n<ol>\n<li>Historically, the time at which a file was created wasn't tracked by file systems used on unix file systems. Some <a href=\"https://unix.stackexchange.com/q/7562/92782\">newer file systems</a> track it, but I am unsure how to access it (nor is it needed here).</li>\n</ol>\n"}], "owner": {"reputation": 191, "user_id": 3210819, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/110600757/picture?type=large", "display_name": "traisjames", "link": "https://stackoverflow.com/users/3210819/traisjames"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 36525426, "answer_count": 1, "score": 0, "last_activity_date": 1460259326, "creation_date": 1460256984, "question_id": 36525221, "link": "https://stackoverflow.com/questions/36525221/perls-retrieval-of-file-create-time-incorrect", "title": "Perl&#39;s retrieval of file create time incorrect", "body": "<p>I am attempting to use perl to rename files based on the folder they are in and the time created.  Files GOPR1521.MP4 and GOPR7754.MP4 were created on two different cameras at the same time and date, and I want to be able their names to indicate that. For example .../GoProTravisL/GOPR1521.mp4 created at 12:32:38 should become 123238L_GOPR1520.mp4, and GOPR7754.MP4 becomes 123239R_GOPR7754.MP4.  Right now the only problem is the time stamps.  I would think its a problem with being wrong timezone or hour offset, but the minutes are off too.  Is there something in perl I am missing when getting time stamps?  Below is the perl code, what it outputs for times for each file, and what Finder on OS X says the creation times are.</p>\n\n<p>Code:</p>\n\n<pre><code>#!/usr/bin/perl\n\n\nuse Time::Piece;\nuse File::stat;\nuse File::Find;\nuse File::Basename;\nuse File::Spec;\n\n@files = &lt;$ARGV[0]/&gt;;\n\nfind({ wanted =&gt; \\&amp;process_file, no_chdir =&gt; 1 }, @files);\n\nsub process_file {\n    my($filename, $dirs, $suffix) = fileparse($_,qr/\\.[^.]*/);\n    if ((-f $_) &amp;&amp; ($filename ne \"\" )) {\n        #print \"\\n\\nThis is a file: $_\";\n        #print \"\\nFile: $filename\";\n        #print \"\\nDIR: $dirs\";\n        my(@parsedirs) = File::Spec-&gt;splitdir($dirs);\n\n        my @strippeddirs;\n\n        foreach my $element ( @parsedirs ) {\n            push @strippeddirs, $element if defined $element and $element ne '';\n        }\n        $pardir = pop(@strippeddirs);\n        #print \"\\nParse DIR: \", $pardir;\n        #print \"\\nFile creation time: \";\n        $timestamp = localtime(stat($_)-&gt;ctime)-&gt;strftime(\"%H%M%S\"); #gives time stamp\n\n        print $timestamp;\n        $newname = $timestamp . substr($pardir,-1) .\"_\". $filename . $suffix;\n\n        print \"\\nRename: $dirs$filename$suffix to $dirs$newname\\n\";\n        #rename ($dirs . $filename . $suffix,$dirs . $newname) || die ( \"Error in renaming: \" . $! );\n    } else {\n        print \"\\n\\nThis is not file: $_\\n\";\n    }\n}\n</code></pre>\n\n<p>Output of time stamps for each file:</p>\n\n<pre><code>/Volumes/Scratch/Raw/2016-03-21/GoProTravisL/\n\nFile: GOPR1520\nFile creation time: 05-55-21\nFile: GOPR1521\nFile creation time: 05-56-18\nFile: GOPR1522\nFile creation time: 05-57-44\nFile: GOPR1523\nFile creation time: 05-58-49\nFile: GP011520\nFile creation time: 05-59-53\n\n/Volumes/Scratch/Raw/2016-03-21/GoProTravisR\n\nFile: GOPR7754\nFile creation time: 06-02-48\nFile: GOPR7755\nFile creation time: 06-04-19\nFile: GOPR7756\nFile creation time: 06-06-27\nFile: GOPR7757\nFile creation time: 00-06-16\nFile: GP017754\nFile creation time: 00-19-30\nFile: GP027754\nFile creation time: 00-22-20\n</code></pre>\n\n<p>Actual file times using ls:</p>\n\n<pre><code>MacTravis:2016-03-21 travis$ ls -lR /Volumes/Scratch/Raw/2016-03-21\ntotal 0\ndrwxr-xr-x  8 travis  admin  272 Apr  9 21:25 GoProTravisL\ndrwxr-xr-x  9 travis  admin  306 Apr  9 21:25 GoProTravisR\n\n/Volumes/Scratch/Raw/2016-03-21/GoProTravisL:\ntotal 21347376\n-rw-------  1 travis  admin  4001240088 Mar 21 12:04 GOPR1520.MP4\n-rw-------  1 travis  admin  1447364149 Mar 21 12:31 GOPR1521.MP4\n-rw-------  1 travis  admin  2140532053 Mar 21 12:45 GOPR1522.MP4\n-rw-------  1 travis  admin  1649133454 Mar 21 13:00 GOPR1523.MP4\n-rw-------  1 travis  admin  1691562945 Mar 21 12:21 GP011520.MP4\n\n/Volumes/Scratch/Raw/2016-03-21/GoProTravisR:\ntotal 31941008\n-rw-------  1 travis  admin  4001129586 Mar 21 12:04 GOPR7754.MP4\n-rw-------  1 travis  admin  2166255754 Mar 21 12:31 GOPR7755.MP4\n-rw-------  1 travis  admin  3202301883 Mar 21 12:45 GOPR7756.MP4\n-rw-------  1 travis  admin  2466803806 Mar 21 12:08 GOPR7757.MP4\n-rw-------  1 travis  admin  4001257192 Mar 21 11:27 GP017754.MP4\n-rw-------  1 travis  admin   516025454 Mar 21 11:29 GP027754.MP4\n</code></pre>\n"}, {"tags": ["perl", "template-toolkit"], "answers": [{"comments": [{"owner": {"reputation": 1677, "user_id": 1816138, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ed2ddfe3ce5e547c20fafa0c82b3e970?s=128&d=identicon&r=PG", "display_name": "Sherwood Botsford", "link": "https://stackoverflow.com/users/1816138/sherwood-botsford"}, "edited": false, "score": 0, "creation_date": 1460323357, "post_id": 36525528, "comment_id": 60675012, "body": "Text::Multimarkdown is what I&#39;m using now.  Alas, it is modelled on an early version of Fletcher&#39;s program and does not produce compliant code, surrounding lots of things with extra paragraph tags.   I will edit my question to make this clearer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1677, "user_id": 1816138, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ed2ddfe3ce5e547c20fafa0c82b3e970?s=128&d=identicon&r=PG", "display_name": "Sherwood Botsford", "link": "https://stackoverflow.com/users/1816138/sherwood-botsford"}, "edited": false, "score": 1, "creation_date": 1460328331, "post_id": 36525528, "comment_id": 60676445, "body": "The answer is still the same."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1482357350, "post_id": 36525528, "comment_id": 69746524, "body": "I&#39;m on a dying phone right now so I only had a quick look, but I think it&#39;s probably best if you revert your change to this old question and ask a new one."}, {"owner": {"reputation": 1677, "user_id": 1816138, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ed2ddfe3ce5e547c20fafa0c82b3e970?s=128&d=identicon&r=PG", "display_name": "Sherwood Botsford", "link": "https://stackoverflow.com/users/1816138/sherwood-botsford"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1482358591, "post_id": 36525528, "comment_id": 69747104, "body": "@PerlDuck -- you are correct.  I have deleted that comment and will take ikegami&#39;s advice."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1460328509, "last_edit_date": 1460328509, "creation_date": 1460259911, "answer_id": 36525528, "question_id": 36525062, "link": "https://stackoverflow.com/questions/36525062/how-do-i-use-an-arbitrary-external-program-as-a-filter-in-a-perl-program/36525528#36525528", "title": "How do I use an arbitrary external program as a filter in a perl program?", "body": "<p>Template-Toolkit filters are actually quite easy to write.</p>\n\n<p>Module:</p>\n\n<pre><code>package Template::Plugin::Filter::MultiMarkdown;\n\nuse strict;\nuse warnings;\n\nour @ISA = 'Template::Plugin::Filter';\n\nsub init {\n    my $self = shift;\n    $self-&gt;install_filter('markdown');\n    return $self;\n}\n\nsub filter {\n    my ($self, $text) = @_;\n    ... Code that transforms $text and returns the transformed text ...\n}\n\n1;\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>[% USE Filter.MultiMarkdown %]\n\n[% FILTER markdown %]...[% END %]\n  -or-\n[% ... | markdown %]\n</code></pre>\n"}], "owner": {"reputation": 1677, "user_id": 1816138, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ed2ddfe3ce5e547c20fafa0c82b3e970?s=128&d=identicon&r=PG", "display_name": "Sherwood Botsford", "link": "https://stackoverflow.com/users/1816138/sherwood-botsford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1482358542, "creation_date": 1460255260, "last_edit_date": 1482358542, "question_id": 36525062, "link": "https://stackoverflow.com/questions/36525062/how-do-i-use-an-arbitrary-external-program-as-a-filter-in-a-perl-program", "title": "How do I use an arbitrary external program as a filter in a perl program?", "body": "<p>I would like to use the current C version of Fletcher Penny's Multi-markdown as a filter in Template Toolkit.  It's not clear to me how to set this up.</p>\n\n<p>At present I'm not calling TT as a module, but simply writing templates that are called with tpage and ttree.</p>\n"}, {"tags": ["python", "string", "perl"], "comments": [{"owner": {"reputation": 16376, "user_id": 2009616, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oiCJA.jpg?s=128&g=1", "display_name": "isedev", "link": "https://stackoverflow.com/users/2009616/isedev"}, "edited": false, "score": 9, "creation_date": 1460237428, "post_id": 36522887, "comment_id": 60650678, "body": "&quot;the Python tab is not recognized in Perl as a tab&quot; - a tab is tab (ASCII 0x09), period. Your problem lies elsewhere."}, {"owner": {"reputation": 4142, "user_id": 3765905, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/xkm1p.png?s=128&g=1", "display_name": "BoltzmannBrain", "link": "https://stackoverflow.com/users/3765905/boltzmannbrain"}, "reply_to_user": {"reputation": 16376, "user_id": 2009616, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oiCJA.jpg?s=128&g=1", "display_name": "isedev", "link": "https://stackoverflow.com/users/2009616/isedev"}, "edited": false, "score": 0, "creation_date": 1460238885, "post_id": 36522887, "comment_id": 60651127, "body": "Okay thanks @isedev, please see the add&#39;l file-writing info above."}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 1, "creation_date": 1460239545, "post_id": 36522887, "comment_id": 60651324, "body": "Since the problem is outside the provided code and the OP is less than eager to construct a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, voting to close as unclear."}, {"owner": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "edited": false, "score": 0, "creation_date": 1460239740, "post_id": 36522887, "comment_id": 60651377, "body": "@alavin89 Do you have an example of a text file that is successfully parsed by the perl script? In that case, your problem could be solved by comparing that input file with the file created by your python script above in a hex editor. Read a single line, byte by byte, side by side, or use diff, to see where they differ"}, {"owner": {"reputation": 3966, "user_id": 469072, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/13ce453eb105a974aea64b2461cfc200?s=128&d=identicon&r=PG", "display_name": "joel goldstick", "link": "https://stackoverflow.com/users/469072/joel-goldstick"}, "edited": false, "score": 0, "creation_date": 1460239980, "post_id": 36522887, "comment_id": 60651439, "body": "So, with your edit, did you answer your question? If not, can you print out a bit of your resultsSentences and resultsScores?  Do resultsSentences end with \\n?"}, {"owner": {"reputation": 4142, "user_id": 3765905, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/xkm1p.png?s=128&g=1", "display_name": "BoltzmannBrain", "link": "https://stackoverflow.com/users/3765905/boltzmannbrain"}, "edited": false, "score": 0, "creation_date": 1460315801, "post_id": 36522887, "comment_id": 60672337, "body": "The issue was that there was already a <code>\\n</code> in the <code>sentence</code>. So this was resolved with <code>fout.write(sentence[:-2] + &quot;\\t&quot; + str(score) + &quot;\\n&quot;)</code>"}], "owner": {"reputation": 4142, "user_id": 3765905, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/xkm1p.png?s=128&g=1", "display_name": "BoltzmannBrain", "link": "https://stackoverflow.com/users/3765905/boltzmannbrain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1460332347, "creation_date": 1460237102, "last_edit_date": 1460310397, "question_id": 36522887, "link": "https://stackoverflow.com/questions/36522887/write-python-strings-to-file-for-reading-by-a-perl-script", "title": "Write Python strings to file for reading by a Perl script", "body": "<p>I'd like to write results to a txt file in Python, where each line needs to be in the format sentence-tab-score:</p>\n\n<p><code>&lt;s&gt; This is the sentence &lt;/s&gt;  42</code></p>\n\n<p>The intent is to have a \"score_results\" Perl script read the sentences and scores, where each line is parsed w/ <code>@fields = split(/\\t/)</code>:</p>\n\n<pre><code>$count = 0;\n$best = \"\";\n$bestlp = -1000000;\n\nwhile (&lt;&gt;) {\n        s/\\s+[\\r\\n]+$//o;\n        @fields = split(/\\t/);\n        if ($fields[1] &gt; $bestlp) {\n                $bestlp = $fields[1];\n                $best = $fields[0];\n        }\n\n        if ((++$count % 5) == 0) {\n                print \"$best\\n\";\n                $bestlp = -1000000;\n        }\n}\n</code></pre>\n\n<p>My issue is writing the results sentences in Python, with </p>\n\n<pre><code>with open(\"results.txt\", \"wb\") as fout:\n    for sentence, score in zip(resultsSentences, resultsScores):\n        fout.write(sentence + \"\\t\" + str(score) + \"\\n\")\n</code></pre>\n\n<p>doesn't work because the tabs in the Python-written file end up as new lines, and thus not recognized in the Perl script as a tab. The first few lines of \"results.txt\" look like</p>\n\n<pre><code>&lt;s&gt; I have seen it on him , and could write to it &lt;/s&gt; \n    42.0\n&lt;s&gt; I have seen it on him , and could migrate to it &lt;/s&gt; \n    42.0\n&lt;s&gt; I have seen it on him , and could climb to it &lt;/s&gt; \n    42.0\n</code></pre>\n\n<p>But the example results that run with the Perl script look like</p>\n\n<pre><code>&lt;s&gt; I have seen it on him , and could write to it &lt;/s&gt;  -46.8152390767177\n&lt;s&gt; I have seen it on him , and could migrate to it &lt;/s&gt;    -50.5058224637686\n&lt;s&gt; I have seen it on him , and could climb to it &lt;/s&gt;  -48.5949070950928\n</code></pre>\n\n<p>And then the \"score_results\" Perl script runs with the bash call\n<code>cat results.txt | ./score_results.pl &gt; scores.temp</code></p>\n\n<p>Given I'd prefer to use the provided Perl script, how can I modify the script and/or write my results sentences differently?</p>\n"}, {"tags": ["perl", "cgi"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 493, "user_id": 5601906, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f5c3d02e087631fb534be02143f950aa?s=128&d=identicon&r=PG&f=1", "display_name": "Aykhan Amiraslanli", "link": "https://stackoverflow.com/users/5601906/aykhan-amiraslanli"}, "edited": false, "score": 0, "creation_date": 1460237840, "post_id": 36522935, "comment_id": 60650813, "body": "@AykhanAmiraslanli: You&#39;ll have to show your new code. It sounds like you have a syntax error"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 493, "user_id": 5601906, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f5c3d02e087631fb534be02143f950aa?s=128&d=identicon&r=PG&f=1", "display_name": "Aykhan Amiraslanli", "link": "https://stackoverflow.com/users/5601906/aykhan-amiraslanli"}, "edited": false, "score": 0, "creation_date": 1460239256, "post_id": 36522935, "comment_id": 60651222, "body": "@AykhanAmiraslanli:  Okay I&#39;ve explained more in my solution. By the way you should always <i>add</i> to the information in your question. Never delete anything, otherwise comments and solutions that relate to the older stuff may no longer make sense. I&#39;ve combined your old and new posts for you"}, {"owner": {"reputation": 493, "user_id": 5601906, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f5c3d02e087631fb534be02143f950aa?s=128&d=identicon&r=PG&f=1", "display_name": "Aykhan Amiraslanli", "link": "https://stackoverflow.com/users/5601906/aykhan-amiraslanli"}, "edited": false, "score": 0, "creation_date": 1460239455, "post_id": 36522935, "comment_id": 60651289, "body": "Yes I am new on this site :) thanks for doing it for me. But I couldn&#39;t solve my problem on my perl code"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 493, "user_id": 5601906, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f5c3d02e087631fb534be02143f950aa?s=128&d=identicon&r=PG&f=1", "display_name": "Aykhan Amiraslanli", "link": "https://stackoverflow.com/users/5601906/aykhan-amiraslanli"}, "edited": false, "score": 0, "creation_date": 1460239709, "post_id": 36522935, "comment_id": 60651364, "body": "How big is your file?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 493, "user_id": 5601906, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f5c3d02e087631fb534be02143f950aa?s=128&d=identicon&r=PG&f=1", "display_name": "Aykhan Amiraslanli", "link": "https://stackoverflow.com/users/5601906/aykhan-amiraslanli"}, "edited": false, "score": 0, "creation_date": 1460240281, "post_id": 36522935, "comment_id": 60651538, "body": "@AykhanAmiraslanli: I had an extra comma that shouldn&#39;t be there. Please copy my code again"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1460240248, "last_edit_date": 1460240248, "creation_date": 1460237430, "answer_id": 36522935, "question_id": 36522729, "link": "https://stackoverflow.com/questions/36522729/perl-web-development-get-local-file-size/36522935#36522935", "title": "perl web development get local file size", "body": "<p>Your variable <code>$filename</code> is set to <code>&gt;$upload_dir/$filename</code> which is wrong. The <code>&gt;</code> is the mode for the <code>open</code> call and isn't part of the file name</p>\n\n<p>You want</p>\n\n<pre><code>my $filename = \"$upload_dir/$filename\";\n</code></pre>\n\n<p>Also, rather than using <code>File::stat</code> etc. you can just use the <code>-s</code> file test operator</p>\n\n<pre><code>say -s $filename;\n</code></pre>\n\n<p>which is much more concise</p>\n\n<p>I would code the whole thing like this</p>\n\n<pre><code>my $full_name = \"$upload_dir/$filename\";\n\n{\n    open my $up_fh, '&gt;:raw', $full_name or die qq{Unable to open \"$full_name\" for output: $!};\n\n    print $up_fh, $_ while &lt;$upload_filehandle&gt;;\n}\n\nprintf \"%.2fMB uploaded\\n\", (-s $full_name) / (1024 * 1024);\n</code></pre>\n\n<h3>Update</h3>\n\n<p>You're misunderstanding what my code does. You're opening the upload file <em>twice</em> now -- mine replaces all of that. It should look like this below</p>\n\n<p>The reason you're getting the error is that you're printing the file size before the HTTP header. I don't know what you want your response to look like, but you probably want to wrap it in HTML and print it <em>after</em> <code>$query-&gt;header()</code></p>\n\n<pre><code>#!/usr/bin/perl -T\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse CGI;\nuse CGI::Carp qw ( fatalsToBrowser );\nuse File::Basename;\n\n#... SOME CODE\n\nmy $upload_filehandle = $query-&gt;upload('photo');\n\nmy $full_name = \"$upload_dir/$filename\";\n\n{\n    open my $uploaded_fh, '&gt;:raw', $full_name or die qq{Unable to open \"$full_name\" for output: $!};\n\n    print $uploaded_fh $_ while &lt;$upload_filehandle&gt;;\n}\n\nmy $size = -s $full_name;\n\nprint $query-&gt;header('text/plain');\n\nprintf \"\\n%dB file uploaded\\n\", $size;\n</code></pre>\n"}], "owner": {"reputation": 493, "user_id": 5601906, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f5c3d02e087631fb534be02143f950aa?s=128&d=identicon&r=PG&f=1", "display_name": "Aykhan Amiraslanli", "link": "https://stackoverflow.com/users/5601906/aykhan-amiraslanli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 36522935, "answer_count": 1, "score": 0, "last_activity_date": 1460240248, "creation_date": 1460236052, "last_edit_date": 1592644375, "question_id": 36522729, "link": "https://stackoverflow.com/questions/36522729/perl-web-development-get-local-file-size", "title": "perl web development get local file size", "body": "<p>My hosting is not allowed to upload big files to server with PHP. So I need to upload with Perl.</p>\n<p>I need to display uploaded file size. And here is my part of code:</p>\n<pre><code>open ( UPLOADFILE, &quot;&gt;$upload_dir/$filename&quot; ) or die &quot;$!&quot;;\nbinmode UPLOADFILE;\n\nwhile ( &lt;$upload_filehandle&gt; )\n{\nprint UPLOADFILE;\n}\n\nclose UPLOADFILE;\n\n$filename = &quot;&gt;$upload_dir/$filename&quot;;\n\nuse File::stat;\nmy $stat = stat($filename);\nsay $stat-&gt;size;\n \nsay stat($filename)-&gt;size;\n</code></pre>\n<p>But I got an error:</p>\n<blockquote>\n<p>Can't call method &quot;size&quot; on an undefined value at upload.cgi line 56.</p>\n</blockquote>\n<h3>Update</h3>\n<p>After Borodin's answer I updated to this new code, which is now giving an <em>Internal server error</em></p>\n<pre><code>#!/usr/bin/perl -wT\nuse strict;\nuse CGI;\nuse CGI::Carp qw ( fatalsToBrowser );\nuse File::Basename;\nuse diagnostics;\nuse File::stat;\nuse warnings;\nuse 5.010;\n... #SOME CODES ##\nmy $upload_filehandle = $query-&gt;upload(&quot;photo&quot;);\n\nopen ( UPLOADFILE, &quot;&gt;$upload_dir/$filename&quot; ) or die &quot;$!&quot;;\nbinmode UPLOADFILE;\n\nwhile ( &lt;$upload_filehandle&gt; )\n{\nprint UPLOADFILE;\n}\n\nclose UPLOADFILE;\n\nmy $full_name = &quot;$upload_dir/$filename&quot;;\n\n{\n    open my $up_fh, '&gt;:raw', $full_name or die qq{Unable to open &quot;$full_name&quot; for output: $!};\n\n    print $up_fh, $_ while &lt;$upload_filehandle&gt;;\n}\n\nprintf &quot;%.2fMB uploaded\\n&quot;, (-s $full_name) / (1024 * 1024);\n\n\n\nprint $query-&gt;header ( );\n</code></pre>\n"}, {"tags": ["linux", "perl", "cron", "lvm"], "answers": [{"tags": [], "owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "is_accepted": false, "score": 1, "last_activity_date": 1460231089, "creation_date": 1460231089, "answer_id": 36521816, "question_id": 36520494, "link": "https://stackoverflow.com/questions/36520494/linux-lvm-lvs-command-fails-from-cron-perl-script-but-works-from-cron-directly/36521816#36521816", "title": "Linux LVM lvs command fails from cron perl script but works from cron directly", "body": "<p>Try using absolute path to <code>lvs</code>:</p>\n\n<pre><code>my $output = `/sbin/lvs --noheadings --separator : --units m --nosuffix 2&gt;&amp;1`;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 991, "user_id": 1313990, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/uKeq4.png?s=128&g=1", "display_name": "Mike Cooper", "link": "https://stackoverflow.com/users/1313990/mike-cooper"}, "edited": false, "score": 1, "creation_date": 1460240123, "post_id": 36521867, "comment_id": 60651484, "body": "Yes, the problem is that inside cron+perl the $PATH was not set to include /sbin where &quot;lvs&quot; is.  So specifying &quot;/sbin/lvs&quot; fixes the problem.  Thank you!!!"}], "tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 3, "last_activity_date": 1460231342, "creation_date": 1460231342, "answer_id": 36521867, "question_id": 36520494, "link": "https://stackoverflow.com/questions/36520494/linux-lvm-lvs-command-fails-from-cron-perl-script-but-works-from-cron-directly/36521867#36521867", "title": "Linux LVM lvs command fails from cron perl script but works from cron directly", "body": "<p>According to <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow\">perldoc system</a>, \"<em>Return value of -1 indicates a failure to start the program or an error of the wait(2) system call (inspect $! for the reason).</em>\"  So the reason there's no output is because <code>lvs</code> isn't being started successfully.</p>\n\n<p>Given the usual nature of cron-related problems, I'd say the most likely reason it's failing to run would be that it's not on the <code>$PATH</code> used by <code>cron</code>.  Try specifying the full path and, if that doesn't work, check <code>$!</code> for the operating system's error message.</p>\n"}], "owner": {"reputation": 991, "user_id": 1313990, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/uKeq4.png?s=128&g=1", "display_name": "Mike Cooper", "link": "https://stackoverflow.com/users/1313990/mike-cooper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1460231342, "creation_date": 1460224066, "question_id": 36520494, "link": "https://stackoverflow.com/questions/36520494/linux-lvm-lvs-command-fails-from-cron-perl-script-but-works-from-cron-directly", "title": "Linux LVM lvs command fails from cron perl script but works from cron directly", "body": "<p>I am trying to run \"lvs\" in a perl script to parse its output.  </p>\n\n<pre><code>my $output = `lvs --noheadings --separator : --units m --nosuffix 2&gt;&amp;1`;\nmy $result = $?;\nif ($result != 0 || length($output) == 0) {\n    printf STDERR \"Get list of LVs failed (exit result: %d): %s\\n\",\n    $result, $output;\n    exit(1);\n}\nprintf \"SUCCESS:\\n%s\\n\", $output;\n</code></pre>\n\n<p>When I run the above script from a terminal window it runs fine.  If I run via cron it fails:</p>\n\n<pre><code>Get list of LVs failed (exit result: -1): \n</code></pre>\n\n<p>Note the lack of any output (stdout + stderr)</p>\n\n<p>If I run the same \"lvs --noheadings --separator : --units m --nosuffix\" command directly in cron, it runs and outputs just fine.</p>\n\n<p>If I modify the perl script to use open3() I also get the same failure with no output.</p>\n\n<p>If I add \"-d -d -d -d -d -v -v -v\" to the lvs command to enable verbose/debug output I see that when I run the perl script from terminal, but there is no output when run via cron/perl.</p>\n\n<p>I'm running this on RHEL 7.2 with /usr/bin/perl (5.16.3)</p>\n\n<p>Any suggestions???</p>\n"}, {"tags": ["perl", "spreadsheet"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 1078796, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/352b51feb3d98fbcf7144af0ccf6095a?s=128&d=identicon&r=PG", "display_name": "user1078796", "link": "https://stackoverflow.com/users/1078796/user1078796"}, "edited": false, "score": 1, "creation_date": 1460299360, "post_id": 36524269, "comment_id": 60666047, "body": "Thank you for your answer. I would be appreciate if you point me to the documentation where you found description about title method. I have checked CPAN and there is no any sign of it there. Also do you know a way to rename worksheet, because it is impossible to delete last one from spreadsheet?  Thank you in advance."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1460388336, "post_id": 36524269, "comment_id": 60706262, "body": "Please would you indicate where in the documentation you found this information? It is not in the documentation for <a href=\"https://metacpan.org/pod/Net::Google::Spreadsheets\" rel=\"nofollow noreferrer\">Net::Google::Spreadsheets</a>"}, {"owner": {"reputation": 102, "user_id": 6103614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e1e94074e089422d2d94e1d21117200?s=128&d=identicon&r=PG&f=1", "display_name": "thecoder", "link": "https://stackoverflow.com/users/6103614/thecoder"}, "edited": false, "score": 0, "creation_date": 1461168812, "post_id": 36524269, "comment_id": 61079817, "body": "You can use $_-&gt;delete as delete function. Documentation is the author document and all other sources like tests in my eyes. Then you can see it in the file 03_worksheet.t"}], "tags": [], "owner": {"reputation": 102, "user_id": 6103614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e1e94074e089422d2d94e1d21117200?s=128&d=identicon&r=PG&f=1", "display_name": "thecoder", "link": "https://stackoverflow.com/users/6103614/thecoder"}, "is_accepted": true, "score": 0, "last_activity_date": 1460247216, "creation_date": 1460247216, "answer_id": 36524269, "question_id": 36520090, "link": "https://stackoverflow.com/questions/36520090/perl-netgooglespreadsheets-how-to-get-worksheet-title/36524269#36524269", "title": "Perl Net::Google::Spreadsheets, how to get worksheet title?", "body": "<p>Documentation from Perl Net::Google:Spreadsheets says:</p>\n\n<pre><code>my @wsts = $spreadsheet-&gt;worksheets;\nfor (@wsts){\n    print $_-&gt;title;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 1078796, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/352b51feb3d98fbcf7144af0ccf6095a?s=128&d=identicon&r=PG", "display_name": "user1078796", "link": "https://stackoverflow.com/users/1078796/user1078796"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 36524269, "answer_count": 1, "score": 0, "last_activity_date": 1460247216, "creation_date": 1460221702, "question_id": 36520090, "link": "https://stackoverflow.com/questions/36520090/perl-netgooglespreadsheets-how-to-get-worksheet-title", "title": "Perl Net::Google::Spreadsheets, how to get worksheet title?", "body": "<p>I am trying to get titles of my worksheets via Perl Net::Google::Spreadsheets\nand cant figured out how to do it.</p>\n\n<p>I know that: my @wsts = $spreadsheet->worksheets;\nreturns array of worksheets objects. I have dumped all of them and there is no the title in them.</p>\n\n<p>I need your advice.\nThank you in advance.</p>\n"}, {"tags": ["perl", "file", "directory", "last-modified"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1460222505, "post_id": 36518774, "comment_id": 60645461, "body": "This won&#39;t work for many reasons. You clearly haven&#39;t tested it."}], "tags": [], "owner": {"reputation": 7, "user_id": 5576424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a045999c9077ee16990517f348d78cde?s=128&d=identicon&r=PG&f=1", "display_name": "Asasapd", "link": "https://stackoverflow.com/users/5576424/asasapd"}, "is_accepted": false, "score": 0, "last_activity_date": 1460215264, "creation_date": 1460215264, "answer_id": 36518774, "question_id": 36518554, "link": "https://stackoverflow.com/questions/36518554/read-the-last-modified-file-in-perl/36518774#36518774", "title": "read the last modified file in perl", "body": "<p>You need to get an ordered list of file with</p>\n\n<pre><code>use File::DirList;\nmy @list = File::DirList::list('your_directory', 'M');\n</code></pre>\n\n<p>Than the first element of list is what you are looking for.</p>\n\n<p>You can read more about the library here <a href=\"http://search.cpan.org/~tpaba/File-DirList-0.04/lib/File/DirList.pm\" rel=\"nofollow\">File::DirList</a></p>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 6181287, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b0989b3cd147f5ca44dcd830162c4dd7?s=128&d=identicon&r=PG&f=1", "display_name": "perlfg", "link": "https://stackoverflow.com/users/6181287/perlfg"}, "edited": false, "score": 0, "creation_date": 1460222506, "post_id": 36520011, "comment_id": 60645462, "body": "with this script i see the last sms, then i received but not the content of this sms. Thanks"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 59, "user_id": 6181287, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b0989b3cd147f5ca44dcd830162c4dd7?s=128&d=identicon&r=PG&f=1", "display_name": "perlfg", "link": "https://stackoverflow.com/users/6181287/perlfg"}, "edited": false, "score": 1, "creation_date": 1460222784, "post_id": 36520011, "comment_id": 60645556, "body": "@perlfg: Do you need to be told how to open a file and print it?"}, {"owner": {"reputation": 59, "user_id": 6181287, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b0989b3cd147f5ca44dcd830162c4dd7?s=128&d=identicon&r=PG&f=1", "display_name": "perlfg", "link": "https://stackoverflow.com/users/6181287/perlfg"}, "edited": false, "score": 0, "creation_date": 1460223211, "post_id": 36520011, "comment_id": 60645727, "body": "no :) I receive constantly sms and would echo the content of the last sms with perl"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1467625409, "last_edit_date": 1467625409, "creation_date": 1460221310, "answer_id": 36520011, "question_id": 36518554, "link": "https://stackoverflow.com/questions/36518554/read-the-last-modified-file-in-perl/36520011#36520011", "title": "read the last modified file in perl", "body": "<p>Sort the directory according to the age of each file, using the <code>-M</code> file test operator. The most recently modified file will then be the first in the list</p>\n\n<p>This program shows the principle. It finds the latest file in the current working directory, prints its name and opens it for input</p>\n\n<p>If you want to do this for a directory other that the cwd then it is probably easiest just to <code>chdir</code> to it and use this code than to try to <code>opendir</code> a specific directory, as then you will have to build the full path to each file before you can use <code>-M</code></p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $newest_file = do {\n    opendir my $dh, '.' or die $!;\n    my @by_age  = sort { -M $a &lt;=&gt; -M $b } grep -f, readdir $dh;\n    $by_age[0];\n};\n\nsay $newest_file;\n\nopen my $fh, '&lt;', $newest_file or die qq{Unable to open \"$newest_file\" for input: $!};\n</code></pre>\n\n<p>If you are working with a sizeable directory then this may take some time as a <code>stat</code> operation is quite slow. You can improve this a lot by using a <em>Schwartzian Transform</em> so that <code>stat</code> is called only once for each file</p>\n\n<pre><code>my $newest_file = do {\n\n    opendir my $dh, '.' or die $!;\n\n    my @by_age  = map $_-&gt;[0],\n    sort { $a-&gt;[1] &lt;=&gt; $b-&gt;[1] }\n    map [ $_, -M ], readdir $dh;\n\n    $by_age[0];\n};\n</code></pre>\n\n<p>If you want something <em>really</em> fast, then just do a single pass of the files, keeping track of the newest found so far. Like this</p>\n\n<pre><code>my $newest_file = do {\n\n    opendir my $dh, '.' or die $!;\n\n    my ($best_file, $best_age);\n\n    while ( readdir $dh ) {\n\n        next unless -f;\n        my $age = -M _;\n\n        unless ( defined $best_age and $best_age &lt; $age ) {\n            $best_age = $age;\n            $best_file = $_;\n        }\n    }\n\n    $best_file;\n};\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 6181287, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b0989b3cd147f5ca44dcd830162c4dd7?s=128&d=identicon&r=PG&f=1", "display_name": "perlfg", "link": "https://stackoverflow.com/users/6181287/perlfg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 36520011, "answer_count": 2, "score": 0, "last_activity_date": 1467625409, "creation_date": 1460214251, "last_edit_date": 1460221099, "question_id": 36518554, "link": "https://stackoverflow.com/questions/36518554/read-the-last-modified-file-in-perl", "title": "read the last modified file in perl", "body": "<p>How can I read the content of the last modified file in a directory in perl </p>\n\n<p>I have a tool for received sms and I want to give out the content of the last modified file , which is stored in gammu/inbox directory , with a perl script</p>\n\n<p>for example: the script checked if a new sms in folder(gammu/inbox), are they, then give out the content from the last sms.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1467554315, "last_edit_date": 1467554315, "creation_date": 1460210117, "answer_id": 36517727, "question_id": 36517498, "link": "https://stackoverflow.com/questions/36517498/concatenate-selected-values-from-array-of-strings/36517727#36517727", "title": "Concatenate selected values from array of strings", "body": "<p>You need <code>join</code> together with a <em>slice</em> of the <code>@list</code> array. A global regex match will serve to extract all the numbers from an input string</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy @list = qw/\n    AB,CD,EF\n    GH,IJ\n    KL,MN,OP,UV\n    WX\n    YZ,123,456,789\n/;\n\nmy $input = '0 3 4';\nmy @input = $input =~ /\\d+/g;\n\nmy $result = join ',', @list[@input];\n\nsay $result;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>AB,CD,EF,WX,YZ,123,456,789\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4758797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da5f4402e41266591738824170ddf3d0?s=128&d=identicon&r=PG&f=1", "display_name": "shkedid", "link": "https://stackoverflow.com/users/4758797/shkedid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "accepted_answer_id": 36517727, "answer_count": 1, "score": -1, "last_activity_date": 1467554315, "creation_date": 1460208999, "question_id": 36517498, "link": "https://stackoverflow.com/questions/36517498/concatenate-selected-values-from-array-of-strings", "title": "Concatenate selected values from array of strings", "body": "<p>I have this Array:\n<code>\nmy @List = (\n    \"AB,CD,EF\",\n    \"GH,IJ\",\n    \"KL,MN,OP,UV\",\n    \"WX\",\n    \"YZ,123,456,789\",\n);\n</code>\nAnd by getting a list of numbers from user\n<code>\nfor example: 0 3 4\n</code>\nI want to create a new string by concatenate just the relevant strings from my List.\nfor the example above the new string will be:\n<code>\n\"AB,CD,EF,WX,YZ,123,456,789\"\n</code></p>\n\n<p>Any help with that?</p>\n"}, {"tags": ["python", "bash", "perl", "shell", "command-line"], "comments": [{"owner": {"reputation": 1915, "user_id": 3777824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aebd8de443d64149a8a69db2c7c79345?s=128&d=identicon&r=PG&f=1", "display_name": "LinuxDisciple", "link": "https://stackoverflow.com/users/3777824/linuxdisciple"}, "edited": false, "score": 1, "creation_date": 1460160413, "post_id": 36511098, "comment_id": 60628947, "body": "Your <code>*</code> is going to take a while to expand. Maybe start with a more targeted filename subset like <code>a*</code> and see if that returns in a more reasonable amount of time. You might also look at using &#39;find&#39; instead of the for-loop. Also I&#39;d be concerned about creating subdirectories within this already-too-large directory. Have you considered creating them elsewhere?"}, {"owner": {"reputation": 7607, "user_id": 2820422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOVO5.jpg?s=128&g=1", "display_name": "Cole Tierney", "link": "https://stackoverflow.com/users/2820422/cole-tierney"}, "edited": false, "score": 0, "creation_date": 1460162712, "post_id": 36511098, "comment_id": 60629382, "body": "I would recommend processing the results of <code>find</code>."}, {"owner": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "edited": false, "score": 0, "creation_date": 1460220079, "post_id": 36511098, "comment_id": 60644522, "body": "Only very well-written shells can handle strings resulting from commands or wildcard expansion that are in the multi-MB size range. Reading the directory in a program is fast and easy (see @ikegami). - If you want to use a shell script: subdivide the problem by piping <code>ls</code> into <code>while read ... done</code> to get the files one by one."}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "reply_to_user": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "edited": false, "score": 0, "creation_date": 1460265195, "post_id": 36511098, "comment_id": 60656619, "body": "@laune: Letting <code>*</code> expand to 2.5 million filenames in a <code>for</code> loop is <i>not</i> the problem <i>per se</i>  - in fact, <code>for f in *; do ...</code> is quite a bit <i>faster</i> than <code>ls | while read ...</code>. The problem is 2.5 million invocations of multiple external utilities."}, {"owner": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "reply_to_user": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1460270771, "post_id": 36511098, "comment_id": 60657722, "body": "@mklement0 You don&#39;t want a single mv for each file. A factor of 1000 cuts this down to a manageable size. -- But with a maximum command length of 2.088.198 (according to xargs --show-limits), I don&#39;t think that an expansion of * for 2.5 million is going to work. -- All of this only goes to show that this task is a bit too much for shell scripting. Perl is good enough, and we all know it&#39;d be a cinch with C (or even Java)."}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "reply_to_user": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "edited": false, "score": 0, "creation_date": 1460311308, "post_id": 36511098, "comment_id": 60670559, "body": "@laune: Indeed, and that&#39;s why neither <code>for  f in *</code> nor <code>ls | while read</code> are a solution. The maximum command-line length does <i>not</i> come into play, because the results of the expansion of <code>*</code> are not passed to an <i>external utility</i> (not that the limit doesn&#39;t apply to <i>builtins</i> such as <code>printf</code> either, which my answer relies on). And, agreed, a shell script is not the right solution."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460226397, "post_id": 36511395, "comment_id": 60646866, "body": "Optimized and fixed bugs."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460258357, "post_id": 36511395, "comment_id": 60655384, "body": "Added explanation."}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1460266601, "post_id": 36511395, "comment_id": 60656877, "body": "The problem is 2.5 million iterations of <i>invoking multiple external utilities</i>, not building up an internal array of all filenames up front, via <code>*</code>. An <i>empty</i> loop over 2.5 million files takes only about 25 seconds on my laptop running Ubuntu 14.04: <code>time for f in *; do :; done</code> Adding just <i>one</i> simple external utility to the mix - e.g., <code>time for f in *; do date; done &gt;&#47;dev&#47;null</code> - increases execution time dramatically; I killed the command after about 30 minutes. Your Perl solution is so much faster, because everything is done in-process."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 8, "last_activity_date": 1460300466, "last_edit_date": 1460300466, "creation_date": 1460161927, "answer_id": 36511395, "question_id": 36511098, "link": "https://stackoverflow.com/questions/36511098/split-large-directory-into-subdirectories/36511395#36511395", "title": "Split large directory into subdirectories", "body": "<p>I suspect that if you checked, you'd noticed your program was actually moving the files, albeit really slowly. Launching a program is rather expensive (at least compared to making a system call), and you do so three or four times per file! As such, the following should be much faster:</p>\n\n<pre><code>perl -e'\n   my $base_dir_qfn = \".\";\n   my $i = 0;\n   my $dir;\n   opendir(my $dh, $base_dir_qfn)\n      or die(\"Can'\\''t open dir \\\"$base_dir_qfn\\\": $!\\n\");\n\n   while (defined( my $fn = readdir($dh) )) {\n      next if $fn =~ /^(?:\\.\\.?|dir_\\d+)\\z/;\n\n      my $qfn = \"$base_dir_qfn/$fn\";\n\n      if ($i % 1000 == 0) {\n         $dir_qfn = sprintf(\"%s/dir_%03d\", $base_dir_qfn, int($i/1000)+1);\n         mkdir($dir_qfn)\n            or die(\"Can'\\''t make directory \\\"$dir_qfn\\\": $!\\n\");\n      }\n\n      rename($qfn, \"$dir_qfn/$fn\")\n         or do {\n            warn(\"Can'\\''t move \\\"$qfn\\\" into \\\"$dir_qfn\\\": $!\\n\");\n            next;\n         };\n\n      ++$i;\n   }\n'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1460165896, "post_id": 36511517, "comment_id": 60629958, "body": "++, but (a) with <i>GNU</i> <code>find</code> the resulting list of filenames will not be sorted, unlike with glob <code>*</code>, (b) assuming that the OP&#39;s <code>xargs</code> supports <code>-0</code>, using <code>tr &#39;\\n&#39; &#39;\\0&#39; &lt; &quot;$c&quot; | xargs -0 -J f mv f &quot;$d&quot;</code> will be much faster; (c) as I&#39;ve done in the snippets in (b), I suggest double-quoting the variable references to promote good habits, even though it&#39;s not strictly necessary here."}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "reply_to_user": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1460166111, "post_id": 36511517, "comment_id": 60630004, "body": "yes files won&#39;t be sorted but I&#39;m not sure it&#39;s a requirement."}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1460166593, "post_id": 36511517, "comment_id": 60630090, "body": "It&#39;s not stated as a requirement, but given that the OP based his own approach on <code>*</code>, the difference is worth mentioning. I just realized that <code>-J</code> is a <i>BSD</i> <code>xargs</code> option; with GNU utilities the more efficient command must therefore be stated as <code>tr &#39;\\n&#39; &#39;\\0&#39; &lt; &quot;$c&quot; | xargs -0 mv -t &quot;$d&quot;</code>; and just to be explicit: your <code>-I f</code> approach moves each file <i>individually</i>."}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1460168269, "post_id": 36511517, "comment_id": 60630391, "body": "In a somewhat ironic twist, the only place where you currently do use double quotes is where they are <i>never</i> needed (though they don&#39;t hurt): <code>d=&quot;d$c&quot;</code> never needs double quotes, irrespective of the value of <code>$c</code>."}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 1, "last_activity_date": 1460164365, "last_edit_date": 1460164365, "creation_date": 1460163302, "answer_id": 36511517, "question_id": 36511098, "link": "https://stackoverflow.com/questions/36511098/split-large-directory-into-subdirectories/36511517#36511517", "title": "Split large directory into subdirectories", "body": "<p>if the directory is not under use, I suggest the following</p>\n\n<pre><code>find . -maxdepth 1 -type f | split -l 1000 -d -a 5 \n</code></pre>\n\n<p>this will create n number of files named x00000 - x02500 (just to make sure 5 digits although 4 will work too).  You can then move the 1000 files listed in each file to a corresponding directory.</p>\n\n<p>perhaps <code>set -o noclobber</code> to eliminate risk of overrides in case of name clash.</p>\n\n<p>to move the files, it's easier to use brace expansion to iterate over file names</p>\n\n<pre><code>for c in x{00000..02500}; \ndo d=\"d$c\"; \n   mkdir $d; \n   cat $c | xargs -I f mv f $d; \ndone \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 1, "creation_date": 1460169285, "post_id": 36511691, "comment_id": 60630540, "body": "While you may get away with using <code>for</code> in the <code>ls x*</code> case, because the filenames happen to have no embedded spaces or globbing metachars., it&#39;s  a <a href=\"http://mywiki.wooledge.org/DontReadLinesWithFor\" rel=\"nofollow noreferrer\">bad idea in general</a>; additionally, <code>`cat $i</code>` makes the resulting words subject to word splitting, which you&#39;re relying on on the one hand, but which causes failure with filenames with embedded spaces. Also, the resulting command line could end up being too long with this technique. Given that you already have a <i>file</i> <code>$i</code>, you can&#39;t create a <i>directory</i> of the same name."}, {"owner": {"reputation": 21, "user_id": 6179519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577a5e673ea7a2a6c2cddb9ae9739a04?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Paine", "link": "https://stackoverflow.com/users/6179519/sean-paine"}, "reply_to_user": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 1, "creation_date": 1460244664, "post_id": 36511691, "comment_id": 60652681, "body": "Thanks, great feedback."}], "tags": [], "owner": {"reputation": 21, "user_id": 6179519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577a5e673ea7a2a6c2cddb9ae9739a04?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Paine", "link": "https://stackoverflow.com/users/6179519/sean-paine"}, "is_accepted": false, "score": -2, "last_activity_date": 1460194415, "last_edit_date": 1460194415, "creation_date": 1460165041, "answer_id": 36511691, "question_id": 36511098, "link": "https://stackoverflow.com/questions/36511098/split-large-directory-into-subdirectories/36511691#36511691", "title": "Split large directory into subdirectories", "body": "<p>I would use the following from the command line:</p>\n\n<pre><code>find . -maxdepth 1 -type f |split -l 1000\nfor i in `ls x*`\ndo \n   mkdir dir$i\n   mv `cat $i` dir$i&amp; 2&gt;/dev/null\ndone\n</code></pre>\n\n<p>Key is the \"&amp;\" which threads out each mv statement.</p>\n\n<p>Thanks to karakfa for the split idea.</p>\n"}, {"comments": [{"owner": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "edited": false, "score": 0, "creation_date": 1460223459, "post_id": 36512456, "comment_id": 60645825, "body": "You can afford a loop over the directories (but not the files)."}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "reply_to_user": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "edited": false, "score": 0, "creation_date": 1460267462, "post_id": 36512456, "comment_id": 60657046, "body": "@laune: Yes, but there&#39;s no simple way to <i>robustly</i> pass batches of 1000 filenames to a <code>while</code> loop directly from <code>xargs</code>  (your approach doesn&#39;t work with filenames with embedded spaces and/or filenames that happen to be valid globs). By letting <code>xargs</code> pass each batch of 1000 filenames as individual arguments (without shell involvement) to <code>bash</code>, they are correctly preserved."}], "tags": [], "owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "is_accepted": false, "score": 3, "last_activity_date": 1460315068, "last_edit_date": 1495541753, "creation_date": 1460173156, "answer_id": 36512456, "question_id": 36511098, "link": "https://stackoverflow.com/questions/36511098/split-large-directory-into-subdirectories/36512456#36512456", "title": "Split large directory into subdirectories", "body": "<p>Note: <strong><a href=\"https://stackoverflow.com/a/36511395/45375\">ikegami's helpful Perl-based answer</a> is the way to go</strong> - it performs the entire operation in a <em>single</em> process and is therefore much faster than the Bash + standard utilities solution below.</p>\n\n<hr>\n\n<p>A <code>bash</code>-based solution needs to avoid <em>loops in which external utilities are called</em> order to perform reasonably.<br>\n<strong>Your own solution calls <em>two external utilities</em> and creates a <em>subshell</em> in each loop iteration, which means that you'll end up creating about 7.5 million processes(!)</strong> in total.</p>\n\n<p>The following solution avoids loops, but, given the sheer number of input files, will still take quite a while to complete (you'll end up creating 4 processes for every 1000 input files, i.e., ca. 10,000 processes in total):</p>\n\n<pre><code>printf '%s\\0' * | xargs -0 -n 1000 bash -O nullglob -c '\n  dirs=( dir_*/ )\n  dir=dir_$(printf %04s $(( 1 + ${#dirs[@]} )))\n  mkdir \"$dir\"; mv \"$@\" \"$dir\"' -\n</code></pre>\n\n<ul>\n<li><code>printf '%s\\0' *</code> prints a NUL-separated list of all files in the dir.\n\n<ul>\n<li>Note that since <code>printf</code> is a Bash <em>builtin</em> rather than an external utility, the max. command-line length as reported by <code>getconf ARG_MAX</code> does <em>not</em> apply.</li>\n</ul></li>\n<li><p><code>xargs -0 -n 1000</code> invokes the specified command with chunks of 1000 input filenames.</p>\n\n<ul>\n<li>Note that <code>xargs -0</code> is nonstandard, but supported on both Linux and BSD/OSX.</li>\n<li>Using NUL-separated input robustly passes filenames without fear of inadvertently splitting them into multiple parts, and even works with filenames with embedded <em>newlines</em> (though such filenames are very rare).</li>\n</ul></li>\n<li><p><code>bash -O nullglob -c</code> executes the specified command string with option <code>nullglob</code> turned on, which means that a globbing pattern that matches nothing will expand to the empty string.</p>\n\n<ul>\n<li>The command string counts the output directories created so far, so as to determine the name of the next output dir with the next higher index, creates the next output dir, and moves the current batch of (up to) 1000 files there.</li>\n</ul></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1460265285, "post_id": 36519894, "comment_id": 60656634, "body": "Please double-quote your variable references to protect them from unintended word splitting and globbing. For robustness, your <code>read</code> commands should be prefixed with <code>IFS=</code> and use <code>-r</code>: <code>IFS= read -r ...</code>. While rare, there could be filenames with leading or trailing whitespace or embedded ` \\ ` chars."}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1460265306, "post_id": 36519894, "comment_id": 60656642, "body": "Your first 2 commands process each file individually, which is what the OP himself tried, unsuccessfully. 2.5 million invocations of multiple external utilities take a long time."}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1460265323, "post_id": 36519894, "comment_id": 60656647, "body": "Your <code>xargs</code> solution is not robust: it breaks with filenames with embedded spaces."}], "tags": [], "owner": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "is_accepted": false, "score": -1, "last_activity_date": 1460270485, "last_edit_date": 1460270485, "creation_date": 1460220676, "answer_id": 36519894, "question_id": 36511098, "link": "https://stackoverflow.com/questions/36511098/split-large-directory-into-subdirectories/36519894#36519894", "title": "Split large directory into subdirectories", "body": "<p>This is probably slower than a Perl program (1 minute for 10.000 files) but it should work with any POSIX compliant shell.</p>\n\n<pre><code>#! /bin/sh\nnd=0\nnf=0\n/bin/ls | \\\nwhile read file;\ndo\n  case $(expr $nf % 10) in\n  0)\n    nd=$(/usr/bin/expr $nd + 1)\n    dir=$(printf \"dir_%04d\" $nd)\n    mkdir $dir\n    ;;\n  esac\n  mv \"$file\" \"$dir/$file\"\n  nf=$(/usr/bin/expr $nf + 1)\n</code></pre>\n\n<p>done</p>\n\n<p>With bash, you can use arithmetic expansion $((...)).</p>\n\n<p>And of course this idea can be improved by using xargs - should not take longer than ~ 45 sec for 2.5 million files.</p>\n\n<pre><code>nd=0\nls | xargs -L 1000 echo | \\\nwhile read cmd;\ndo\n  nd=$((nd+1))\n  dir=$(printf \"dir_%04d\" $nd)\n  mkdir $dir\n  mv $cmd $dir\ndone\n</code></pre>\n"}], "owner": {"reputation": 263, "user_id": 5949518, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ZDg29.png?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/5949518/edward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3891, "favorite_count": 1, "accepted_answer_id": 36511395, "answer_count": 5, "score": 1, "last_activity_date": 1460315068, "creation_date": 1460159516, "question_id": 36511098, "link": "https://stackoverflow.com/questions/36511098/split-large-directory-into-subdirectories", "title": "Split large directory into subdirectories", "body": "<p>I have a directory with about 2.5 million files and is over 70 GB.</p>\n\n<p>I want to split this into subdirectories, each with 1000 files in them.</p>\n\n<p>Here's the command I've tried using:</p>\n\n<pre><code>i=0; for f in *; do d=dir_$(printf %03d $((i/1000+1))); mkdir -p $d; mv \"$f\" $d; let i++; done\n</code></pre>\n\n<p>That command works for me on a small scale, but I can leave it running for hours on this directory and it doesn't seem to do anything.</p>\n\n<p>I'm open for doing this in any way via command line:  perl, python, etc.  Just whatever way would be the fastest to get this done...</p>\n"}, {"tags": ["arrays", "git", "perl"], "answers": [{"tags": [], "owner": {"reputation": 120535, "user_id": 123109, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/157c96de3d125abc1c363ff25c20dfaf?s=128&d=identicon&r=PG", "display_name": "Greg Bacon", "link": "https://stackoverflow.com/users/123109/greg-bacon"}, "is_accepted": true, "score": 2, "last_activity_date": 1460205094, "last_edit_date": 1460205094, "creation_date": 1460160106, "answer_id": 36511173, "question_id": 36511095, "link": "https://stackoverflow.com/questions/36511095/how-do-i-store-output-of-a-git-command-in-a-perl-array-or-scalar/36511173#36511173", "title": "How do I store output of a git command in a Perl array or scalar?", "body": "<p>Use backticks, also known more generally as <a href=\"http://perldoc.perl.org/perlop.html#qx%2f_STRING_%2f\" rel=\"nofollow\">qx//</a>:</p>\n\n<blockquote>\n  <ul>\n  <li><code>qx/STRING/</code></li>\n  <li><code>&#x60;STRING&#x60;</code><br>\n  A string which is (possibly) interpolated and then executed as a system command with <code>/bin/sh</code> or its equivalent. Shell wildcards, pipes, and redirections will be honored. The collected standard output of the command is returned; standard error is unaffected. In scalar context, it comes back as a single (potentially multi-line) string, or <a href=\"http://perldoc.perl.org/functions/undef.html\" rel=\"nofollow\"><code>undef</code></a> if the command failed. In list context, returns a list of lines (however you've defined lines with <a href=\"http://perldoc.perl.org/perlvar.html#%24INPUT_RECORD_SEPARATOR\" rel=\"nofollow\"><code>$/</code></a> or <a href=\"http://perldoc.perl.org/perlvar.html#%24INPUT_RECORD_SEPARATOR\" rel=\"nofollow\"><code>$INPUT_RECORD_SEPARATOR</code></a>), or an empty list if the command failed.</li>\n  </ul>\n</blockquote>\n\n<p>You have options, and which is better depends on what you want to do with the output.</p>\n\n<p>To read all of the standard output into a scalar, use the operator in scalar context as in</p>\n\n<pre><code>$output = `git diff --numstat`;\n</code></pre>\n\n<p>In list context with the default value of <code>$/</code>, perl splits the output into separate lines. If you want to append the <code>git</code> output to the end of an existing array, use <a href=\"http://perldoc.perl.org/functions/push.html\" rel=\"nofollow\"><code>push</code></a>, as in</p>\n\n<pre><code>push @array, `git diff --numstat`;\n</code></pre>\n\n<p>Although you mentioned <code>push</code> specifically in your question, I\u2019m having a hard time imagining why you\u2019d mix the output of <code>git</code> with something else. Storing the output in an array directly is simpler:</p>\n\n<pre><code>@array = `git diff --numstat`;\n</code></pre>\n\n<p>Note that the list of lines returned retain their end-of-line characters. To create a new array and remove all of the newlines in one line, write</p>\n\n<pre><code>chomp(@array = `git diff --numstat`);\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>chomp(my @array = `git diff --numstat`);\n</code></pre>\n\n<p>if you\u2019re running under <a href=\"http://perldoc.perl.org/strict.html\" rel=\"nofollow\"><code>use strict</code></a>.</p>\n\n<h3>Error Handling</h3>\n\n<p>For code that you plan to use more than once or twice, you should check that <code>&#x60;git diff --numstat&#x60;</code>, or any other command whose output you want to read, actually succeeded. Otherwise, with the <a href=\"http://perldoc.perl.org/warnings.html\" rel=\"nofollow\"><code>warnings</code></a> pragma enabled, you\u2019ll see lots of diagnostic messages about undefined variables or missing output.</p>\n\n<p>In scalar context, failure will return the undefined value. Check it as in</p>\n\n<pre><code>my $output = `git diff --numstat`;\ndie \"$0: git may not be installed\" unless defined $output;\n</code></pre>\n\n<p>Failure in list context produces an empty list.</p>\n\n<pre><code>my @output = `git diff --numstat`;\ndie \"$0: git may not be installed\" unless @output;\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 4192078, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-OhJj-iPLtKg/AAAAAAAAAAI/AAAAAAAAA0k/k-iHziJGKng/photo.jpg?sz=128", "display_name": "Sone Nine", "link": "https://stackoverflow.com/users/4192078/sone-nine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "accepted_answer_id": 36511173, "answer_count": 1, "score": 3, "last_activity_date": 1460209907, "creation_date": 1460159489, "last_edit_date": 1460209907, "question_id": 36511095, "link": "https://stackoverflow.com/questions/36511095/how-do-i-store-output-of-a-git-command-in-a-perl-array-or-scalar", "title": "How do I store output of a git command in a Perl array or scalar?", "body": "<p>In my code I have </p>\n\n<pre><code>git diff --numstat\n</code></pre>\n\n<p>I know I could create a file with</p>\n\n<pre><code>git diff --numstat &gt; log.log\n</code></pre>\n\n<p>But is it even possible to pass this into an array or scalar of some sort? I was thinking something like this but I'm not sure why it doesn\u2019t compile.</p>\n\n<pre><code>my @array;\npush (@array, git diff --numstat);\n</code></pre>\n"}, {"tags": ["mysql", "perl", "unicode", "bugzilla"], "comments": [{"owner": {"reputation": 1, "user_id": 6179292, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K0R-pwAVrDc/AAAAAAAAAAI/AAAAAAAAACw/oJKBGBVY55Y/photo.jpg?sz=128", "display_name": "Greg Larkin", "link": "https://stackoverflow.com/users/6179292/greg-larkin"}, "edited": false, "score": 0, "creation_date": 1460160339, "post_id": 36510449, "comment_id": 60628932, "body": "Update: I have verified that the actual data stored in the database is not corrupted with the characters that I described above. Looking at the same row in the attach_data table from before the upgrade and after the upgrade are identical. Therefore, it seems as though the data is transformed in-flight when clicking on an attachment and downloading it. I&#39;m not seeing any other obvious resolutions to that problem and would appreciate any suggestions. Thank you!"}, {"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1460165990, "post_id": 36510449, "comment_id": 60629978, "body": "See if you can find the connection code, <code>SELECT</code>, <code>use</code> statements, etc.  As you have noted, the problem seems to be with the client (Perl), so please find the things that touch the data.  A <code>BLOB</code> should come under the control of <code>use binary</code>, not <code>use unicode</code> (or whatever the Perl thingies are).  It is not clear (yet) whether Perl should be fixed or Bugzilla should be fixed."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1460196753, "post_id": 36510449, "comment_id": 60636480, "body": "It isn&#39;t very helpful to know how certain non-ASCII characters are printed in your console. Please try to post the actual numeric byte values (hex dump, for example)."}, {"owner": {"reputation": 1, "user_id": 6179292, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K0R-pwAVrDc/AAAAAAAAAAI/AAAAAAAAACw/oJKBGBVY55Y/photo.jpg?sz=128", "display_name": "Greg Larkin", "link": "https://stackoverflow.com/users/6179292/greg-larkin"}, "edited": false, "score": 0, "creation_date": 1460264808, "post_id": 36510449, "comment_id": 60656562, "body": "Thank you for your replies, and I finally figured out the issue. Bugzilla has a &quot;utf8&quot; setting that was not enabled in the previous version we had installed (3.6.4). After installing the new version (5.0.1), I had to enable that option, and then the file attachments downloaded correctly without the embedded UTF-16 characters. I have not found anything in the release notes that would indicate why that setting needs to be enabled in the latest version when it wasn&#39;t in the older version."}], "owner": {"reputation": 1, "user_id": 6179292, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K0R-pwAVrDc/AAAAAAAAAAI/AAAAAAAAACw/oJKBGBVY55Y/photo.jpg?sz=128", "display_name": "Greg Larkin", "link": "https://stackoverflow.com/users/6179292/greg-larkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479127656, "creation_date": 1460155252, "question_id": 36510449, "link": "https://stackoverflow.com/questions/36510449/bugzilla-attachment-data-corruption-after-upgrade", "title": "Bugzilla attachment data corruption after upgrade", "body": "<p>I recently upgraded a Bugzilla installation from 3.6.4 to 5.0.1 and experienced corruption in binary files (Word docs, PNG files, etc.) that are attached to bugs.</p>\n\n<p>The backend database is MySQL 5.0.75 with UTF-8 encoding, and the attachments are stored in a table named attach_data (InnoDB type), and the specific column is a LONGBLOB.</p>\n\n<p>Using a PNG file as an example, the symptom appears like so. If you view a PNG file like a text file in your console, you'll see the first 2 lines look like:</p>\n\n<pre><code>&lt;89&gt;PNG\n^Z\n</code></pre>\n\n<p>In the upgraded version of Bugzilla, the data has been changed in the database, and the first 2 lines look like:</p>\n\n<pre><code>&lt;U+0089&gt;PNG\n^Z\n</code></pre>\n\n<p>This follows a pattern in the file where any <code>\"&lt;XY&gt;\"</code> character has been replaced with a <code>\"&lt;U+00XY&gt;\"</code> character in each attached file. Other characters like <code>\"&lt;U+1234&gt;\"</code> appear to be valid because they don't have the \"00\" low bits. This problem seems to have occurred during the upgrade, and it also continues with new bugs and attachments added to Bugzilla.</p>\n\n<p>I've looked through all of the settings in the new Bugzilla installation and don't see anything obvious that could have caused this. The original installation used an ancient version of Perl:</p>\n\n<pre><code>This is perl, v5.8.9 built for i386-freebsd-64int (with 1 registered patch, see perl -V for more detail)\n</code></pre>\n\n<p>And the new installation uses a slightly-less-ancient version of Perl:</p>\n\n<pre><code>This is perl 5, version 14, subversion 2 (v5.14.2) built for i386-freebsd-64int\n</code></pre>\n\n<p>Can anyone think of other settings or OS configuration I might be overlooking? And if there's a way to fix uploading new attachments into the database, is there a way to convert the existing attachments in the database from using the <code>\"&lt;U+00XY&gt;\"</code> characters back to the expected <code>\"&lt;XY&gt;\"</code> characters?</p>\n\n<p>Thank you,<br>\nGreg</p>\n"}, {"tags": ["macos", "perl", "recursion", "ffmpeg", "mkv"], "comments": [{"owner": {"reputation": 850, "user_id": 258130, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8ffcb13424f6eae71cd96a1c1a7c1d2c?s=128&d=identicon&r=PG", "display_name": "skarface", "link": "https://stackoverflow.com/users/258130/skarface"}, "edited": false, "score": 0, "creation_date": 1460142873, "post_id": 36507442, "comment_id": 60622027, "body": "<a href=\"http://perldoc.perl.org/File/Find.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/File/Find.html</a>   You&#39;d put the code in the loop above as the \\&amp;wanted prameter."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1460148686, "post_id": 36507442, "comment_id": 60625038, "body": "I&#39;m unsure what you&#39;re asking, and all that you show is someone else&#39;s code. You say you&#39;ve <i>&quot;scoured the web&quot;</i> to find this Perl program, and you now seem to be scouring it again to find free of charge something that I would guess you&#39;re incapable of creating for yourself. Stack Overflow is a place where programmers who are blocked by a <i>specific problem</i> can ask their peers for help. It is not intended that an ignoramus can dump their requirements here and wait for a solution"}], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 1, "last_activity_date": 1460147336, "creation_date": 1460147336, "answer_id": 36508783, "question_id": 36507442, "link": "https://stackoverflow.com/questions/36507442/recursively-convert-media-directory-from-hevc-to-h-264-with-ffmpeg/36508783#36508783", "title": "Recursively convert media directory from HEVC to h.264 with ffmpeg", "body": "<p>Why do you want to run recursively? Do you mean that you want to run it on all the files under a particular directory?</p>\n\n<p>In this problems, I'd rather separate the part that generates the list of files to process from the processing. With a long list of files, I might take the lines from standard input instead:</p>\n\n<pre><code>while( &lt;&gt; ) {\n    ...\n    }\n</code></pre>\n\n<p>Pipe the list into the script: </p>\n\n<pre><code>$ find ... | script\n</code></pre>\n\n<p>Or take it from a file:</p>\n\n<pre><code>$ script list_of_files.txt\n</code></pre>\n\n<p>With a short list, I might use a favorite xargs trick:</p>\n\n<pre><code>$ find ... -print0 | xargs -0 script\n</code></pre>\n\n<p>In that case I go through the command-line arguments: </p>\n\n<pre><code> foreach ( @ARGV ) {\n    ...\n    }\n</code></pre>\n\n<p>If you want to do all of this in the program, you can use <a href=\"http://www.metacpan.org/module/File::Find\" rel=\"nofollow\">File::Find</a>.</p>\n\n<p>Beyond that, it sounds like you are asking someone to do the work for you.</p>\n"}], "owner": {"reputation": 1, "user_id": 2793975, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/89cb24f51c44a8dae6a9c65642c52c31?s=128&d=identicon&r=PG&f=1", "display_name": "chuckcastle", "link": "https://stackoverflow.com/users/2793975/chuckcastle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 892, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1460147336, "creation_date": 1460142478, "question_id": 36507442, "link": "https://stackoverflow.com/questions/36507442/recursively-convert-media-directory-from-hevc-to-h-264-with-ffmpeg", "title": "Recursively convert media directory from HEVC to h.264 with ffmpeg", "body": "<p>I have media server with two directories: Movies and TV Shows. Within each of those directories, each entry exists in a sub-directory which contains the video file and subtitle files.</p>\n\n<p>I've scoured the web and have found an excellent perl script from Michelle Sullivan, posted here:</p>\n\n<pre><code>    #!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nopen DIR, \"ls -1 |\";\nwhile (&lt;DIR&gt;)\n{\n        chomp;\n        next if ( -d \"$_\"); # skip directories\n        next unless ( -r \"$_\"); # if it's not readable skip it!\n        my $file = $_;\n        open PROBE, \"ffprobe -show_streams -of csv '$file' 2&gt;/dev/null|\" or die (\"Unable to launch ffmpeg for $file! ($!)\");\n        my ($v, $a, $s, @c) = (0,0,0);\n        while (&lt;PROBE&gt;)\n        {\n                my @streaminfo = split(/,/, $_);\n                push(@c, $streaminfo[2]) if ($streaminfo[5] eq \"video\");\n                $a++ if ($streaminfo[5] eq \"audio\");\n                $s++ if ($streaminfo[5] eq \"subtitle\");\n        }\n        close PROBE;\n        $v = scalar @c;\n        if (scalar @c eq 1 and $c[0] eq \"ansi\")\n        {\n                warn(\"Text file detected, skipping...\\n\");\n                next;\n        }\n        warn(\"$file: Video Streams: $v, Audio Streams: $a, Subtitle Streams: $s, Video Codec(s): \" . join (\", \", @c) . \"\\n\");\n        if (scalar @c &gt; 1)\n        {\n                warn(\"$file has more than one video stream, bailing!\\n\");\n                next;\n        }\n        if ($c[0] eq \"hevc\")\n        {\n                warn(\"HEVC detected for $file ...converting to AVC...\\n\");\n                system(\"mkdir -p h265\");\n                my @params = (\"-hide_banner\", \"-threads 2\");\n                push(@params, \"-map 0\") if ($a &gt; 1 or $s &gt; 1 or $v &gt; 1);\n                push(@params, \"-c:a copy\") if ($a);\n                push(@params, \"-c:s copy\") if ($s);\n                push(@params, \"-c:v libx264 -pix_fmt yuv420p\") if ($v);\n                if (system(\"mv '$file' 'h265/$file'\"))\n                {\n                        warn(\"Error moving $file -&gt; h265/$file\\n\");\n                        next;\n                }\n                if (system(\"ffmpeg -xerror -i 'h265/$file' \" . join(\" \", @params) . \" '$file' 2&gt;/dev/null\"))\n                {\n                        warn(\"FFMPEG ERROR.  Cannot convert $file restoring original...\\n\");\n                        system(\"mv 'h265/$file' '$file'\");\n                        next;\n                }\n        } else {\n                warn(\"$file doesn't appear to need converting... Skipping...\\n\");\n        }\n}\nclose DIR;\n</code></pre>\n\n<p>The script performs perfectly - as long as it is run from within the directory containing the media.</p>\n\n<p>My question: Can this script be modified to run recursively from the root directory? How?</p>\n\n<p>Thanks in advance.</p>\n\n<p>(Michelle's script can be seen here: <a href=\"http://www.michellesullivan.org/blog/1636\" rel=\"nofollow\">http://www.michellesullivan.org/blog/1636</a>)</p>\n"}, {"tags": ["perl", "hash", "merge"], "comments": [{"owner": {"reputation": 65, "user_id": 3425900, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2056a8b933b549043e61f630d5e6da98?s=128&d=identicon&r=PG&f=1", "display_name": "user3425900", "link": "https://stackoverflow.com/users/3425900/user3425900"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1460145555, "post_id": 36507300, "comment_id": 60623530, "body": "I do need author (key or value, it&#39;s needed). In {Author =&gt; &#39;101&#39;} there is (maybe) a  {WK14 =&gt; &#39;X&#39;}. X is the value, not a variable. If it&#39;s duplicated, it can be safely overwritten (hence my &quot;if defined&quot; above). The data structure is as is from being slurped (Text::CSV::Slurp). Maybe that was bad idea to start with?  My CSV has Author,x,,,,x,,,,,x,,,, and the slurp took in the header row. which was Author, Wk1, Wk2, etc.."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460150137, "post_id": 36507300, "comment_id": 60625694, "body": "If the first has <code>WK1=&gt;&quot;X&quot;</code>, and the second has <code>WK1=&gt;&quot;&quot;</code>, should the merged record have <code>WK1=&gt;&quot;X&quot;</code> or <code>WK1=&gt;&quot;&quot;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 3425900, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2056a8b933b549043e61f630d5e6da98?s=128&d=identicon&r=PG&f=1", "display_name": "user3425900", "link": "https://stackoverflow.com/users/3425900/user3425900"}, "edited": false, "score": 0, "creation_date": 1460147585, "post_id": 36508329, "comment_id": 60624507, "body": "Ty Greg. I agree that it reads more naturally in the loops. There&#39;s certain concepts I&#39;m still wrapping my head around so your example is very helpful."}], "tags": [], "owner": {"reputation": 120535, "user_id": 123109, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/157c96de3d125abc1c363ff25c20dfaf?s=128&d=identicon&r=PG", "display_name": "Greg Bacon", "link": "https://stackoverflow.com/users/123109/greg-bacon"}, "is_accepted": true, "score": 0, "last_activity_date": 1460145553, "creation_date": 1460145553, "answer_id": 36508329, "question_id": 36507300, "link": "https://stackoverflow.com/questions/36507300/how-do-i-use-map-to-merge-an-array-of-hashes/36508329#36508329", "title": "How do I use map to merge an array of hashes?", "body": "<p>I suggest merging along the lines of the code below. From each anonymous hash in <code>@$data</code>, grab the author identifier and then update the merged WK values where we never overwrite a non-empty string with an empty one.</p>\n\n<p>You could do the same with <code>map</code>, and that would be a worthwhile exercise. It seems to read much more naturally as nested structural loops.</p>\n\n<pre><code>my %authorwk;\n\nfor (my $i = 0; @$data; ++$i) {\n  local $_ = shift @$data;\n  die \"$0: missing Author in record $i\" unless exists $_-&gt;{Author};\n\n  my $author = $_-&gt;{Author};\n  while (my($wk,$present) = each %$_) {\n    next unless $wk =~ /^WK/;\n    $authorwk{$author}{$wk} = $present\n      if $present || !exists $authorwk{$author}{$wk};\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1460146592, "last_edit_date": 1460146592, "creation_date": 1460145943, "answer_id": 36508423, "question_id": 36507300, "link": "https://stackoverflow.com/questions/36507300/how-do-i-use-map-to-merge-an-array-of-hashes/36508423#36508423", "title": "How do I use map to merge an array of hashes?", "body": "<p>It sounds like you are starting with something like the following:</p>\n\n<pre><code>my $records = [\n   { Author =&gt; \"101\", WK1 =&gt; \"\", WK2 =&gt; \"X\", WK3 =&gt; \"X\" },\n   { Author =&gt; \"101\", WK1 =&gt; \"X\", WK2 =&gt; \"\", WK4 =&gt; \"X\" },\n   { Author =&gt; \"102\", WK1 =&gt; \"\", WK2 =&gt; \"\", WK3 =&gt; \"X\" },\n];\n</code></pre>\n\n<p>It sounds like you want to produce the following:</p>\n\n<pre><code>my $records_by_author = (\n   \"101\" =&gt; { Author =&gt; \"101\", WK1 =&gt; \"X\", WK2 =&gt; \"\", WK3 =&gt; \"X\", WK4 =&gt; \"X\" },\n   \"102\" =&gt; { Author =&gt; \"102\", WK1 =&gt; \"\", WK2 =&gt; \"\", WK3 =&gt; \"X\" },\n);\n</code></pre>\n\n<p>The following will do that:</p>\n\n<pre><code>my %records_by_author;\nfor my $record (@$records) {\n   my $author = $record-&gt;{Author};\n   $records_by_author{$author} = {\n      ( $records_by_author{$author} ? %{ $records_by_author{$author} } : () ),\n      %$record,\n   };\n}\n</code></pre>\n\n<hr>\n\n<p>If instead you want the following output:</p>\n\n<pre><code>my $records = [\n   { Author =&gt; \"101\", WK1 =&gt; \"X\", WK2 =&gt; \"\", WK3 =&gt; \"X\", WK4 =&gt; \"X\" },\n   { Author =&gt; \"102\", WK1 =&gt; \"\", WK2 =&gt; \"\", WK3 =&gt; \"X\" },\n];\n</code></pre>\n\n<p>Just add the following:</p>\n\n<pre><code>$records = [ values(%records_by_author) ];\n</code></pre>\n\n<p>It you want this output and you want to preserve the original order, let me know.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1467625426, "last_edit_date": 1467625426, "creation_date": 1460202272, "answer_id": 36516284, "question_id": 36507300, "link": "https://stackoverflow.com/questions/36507300/how-do-i-use-map-to-merge-an-array-of-hashes/36516284#36516284", "title": "How do I use map to merge an array of hashes?", "body": "<p><code>map</code> is inappropriate here: a series of slice assignments is all that is necessary</p>\n\n<p>It looks like this. Note that the only duplicate author <code>101</code> has an identical set of keys in both instances, so I've added key <code>WK7</code> to the first instance and <code>WK8</code> to the second so that you can see that they are both added to the result</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy $data =  [\n  {\n    Author =&gt; 101,\n    WK7    =&gt; \"7\", WK1    =&gt; \"\", WK10   =&gt; \"\",  WK11   =&gt; \"\",\n    WK12   =&gt; \"\",  WK13   =&gt; \"\", WK14   =&gt; \"X\", WK15   =&gt; \"\",\n  },\n  {\n    Author =&gt; 102,\n    WK1    =&gt; \"\",  WK10   =&gt; \"\", WK11   =&gt; \"\",  WK12   =&gt; \"X\",\n    WK13   =&gt; \"X\", WK14   =&gt; \"\", WK15   =&gt; \"\",  WK2    =&gt; \"X\",\n    WK3    =&gt; \"X\", WK4    =&gt; \"\",\n  },\n  {\n    Author =&gt; 101,\n    WK8    =&gt; \"8\", WK1    =&gt; \"\", WK10   =&gt; \"\",  WK11   =&gt; \"\",\n    WK12   =&gt; \"\",  WK13   =&gt; \"\", WK14   =&gt; \"X\", WK15   =&gt; \"X\",\n  },\n];\n\n\nmy %authors;\n\nfor my $item ( @$data ) {\n    my $author = $item-&gt;{Author};\n    @{ $authors{$author} }{keys %$item} = values %$item;\n}\n\nuse Data::Dump;\ndd \\%authors;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>{\n  101 =&gt; {\n           Author =&gt; 101,\n           WK1    =&gt; \"\",\n           WK10   =&gt; \"\",\n           WK11   =&gt; \"\",\n           WK12   =&gt; \"\",\n           WK13   =&gt; \"\",\n           WK14   =&gt; \"X\",\n           WK15   =&gt; \"X\",\n           WK7    =&gt; 7,\n           WK8    =&gt; 8,\n         },\n  102 =&gt; {\n           Author =&gt; 102,\n           WK1    =&gt; \"\",\n           WK10   =&gt; \"\",\n           WK11   =&gt; \"\",\n           WK12   =&gt; \"X\",\n           WK13   =&gt; \"X\",\n           WK14   =&gt; \"\",\n           WK15   =&gt; \"\",\n           WK2    =&gt; \"X\",\n           WK3    =&gt; \"X\",\n           WK4    =&gt; \"\",\n         },\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 3425900, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2056a8b933b549043e61f630d5e6da98?s=128&d=identicon&r=PG&f=1", "display_name": "user3425900", "link": "https://stackoverflow.com/users/3425900/user3425900"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 839, "favorite_count": 0, "accepted_answer_id": 36508329, "answer_count": 3, "score": 0, "last_activity_date": 1467625426, "creation_date": 1460141976, "last_edit_date": 1460146030, "question_id": 36507300, "link": "https://stackoverflow.com/questions/36507300/how-do-i-use-map-to-merge-an-array-of-hashes", "title": "How do I use map to merge an array of hashes?", "body": "<p>Hoping someone could explain the proper process for this. I have a data structure like this:</p>\n\n<pre><code>[\n{\nAuthor =&gt; \"101\",\nWK1    =&gt; \"\",\nWK10   =&gt; \"\",\nWK11   =&gt; \"\",\nWK12   =&gt; \"\",\nWK13   =&gt; \"\",\nWK14   =&gt; \"X\",\nWK15   =&gt; \"\",\n\n},\n{\nAuthor =&gt; \"102\",\nWK1    =&gt; \"\",\nWK10   =&gt; \"\",\nWK11   =&gt; \"\",\nWK12   =&gt; \"X\",\nWK13   =&gt; \"X\",\nWK14   =&gt; \"\",\nWK15   =&gt; \"\",\nWK2    =&gt; \"X\",\nWK3    =&gt; \"X\",\nWK4    =&gt; \"\",\n\n},\n{\n    Author =&gt; \"101\",\nWK1    =&gt; \"\",\nWK10   =&gt; \"\",\nWK11   =&gt; \"\",\nWK12   =&gt; \"\",\nWK13   =&gt; \"\",\nWK14   =&gt; \"X\",\nWK15   =&gt; \"X\",\n\n},\n]\n</code></pre>\n\n<p>WK keys may or may not exist. The Author key will always exist, and I\u2019m trying to merge those duplicates. Overwriting values is ok (if defined).</p>\n\n<p>Should I try <code>map</code> (not sure how), or would it be better to create a new hash using the Author as key, pushing the other values into an array? Something like</p>\n\n<pre><code>foreach $x (@$data) {\n    %new_hash = ...\n    ...\n}\n</code></pre>\n\n<p><em>scratching head</em></p>\n"}, {"tags": ["linux", "perl", "c++11"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1460140457, "post_id": 36506802, "comment_id": 60620649, "body": "Perhaps a <a href=\"http://man7.org/linux/man-pages/man7/mq_overview.7.html\" rel=\"nofollow noreferrer\">message queue</a>? Perhaps <a href=\"http://man7.org/linux/man-pages/man7/unix.7.html\" rel=\"nofollow noreferrer\">local sockets</a>? Perhaps named <a href=\"http://man7.org/linux/man-pages/man7/pipe.7.html\" rel=\"nofollow noreferrer\">pipes</a>? It all depends on your requirements really. Experiment with all these, and other methods like shared memory, normal network sockets, and even plain files, until you find a way that fits your use-case best and that you feel comfortable with."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1460146032, "post_id": 36506802, "comment_id": 60623774, "body": "dbus is already running and has a perl module."}, {"owner": {"reputation": 18565, "user_id": 10593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3eeb7653c4df9b0f1332b9b0ec201ec?s=128&d=identicon&r=PG", "display_name": "Max Lybbert", "link": "https://stackoverflow.com/users/10593/max-lybbert"}, "edited": false, "score": 0, "creation_date": 1461184575, "post_id": 36506802, "comment_id": 61089612, "body": "Does main-process start side-process?"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1461184355, "creation_date": 1461184355, "answer_id": 36754594, "question_id": 36506802, "link": "https://stackoverflow.com/questions/36506802/interprocess-communication-in-linux-design/36754594#36754594", "title": "interprocess communication in linux design", "body": "<p>This question is very broad really - so much so that there's a whole document about how to ipc in perl - <a href=\"http://perldoc.perl.org/perlipc.html\" rel=\"nofollow\"><code>perlipc</code></a> - for sustained IO I would suggest considering a <code>pipe</code>, or actually possible looking at using <code>threads</code> and a shared memory model. </p>\n"}], "owner": {"reputation": 497, "user_id": 3384373, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/41328490fc7a1482e26b5e2561384ad3?s=128&d=identicon&r=PG&f=1", "display_name": "Ameyj", "link": "https://stackoverflow.com/users/3384373/ameyj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461184355, "creation_date": 1460140250, "question_id": 36506802, "link": "https://stackoverflow.com/questions/36506802/interprocess-communication-in-linux-design", "title": "interprocess communication in linux design", "body": "<p>I am running linux . I have two processes lets say side-process and main-process. \nside-process interacts with driver and gets SIGIO from driver and populates information from the driver.</p>\n\n<p>Process B needs to get information from process side-process whenever side-process gets SIGIO and side-process then generates events and decides what to do with the event.  main-process is kind of central process and it interacts with other dozens of processes. How should be the communication between  side-process and main-process? how to notify main-process When I get SIGIO at side-process. </p>\n"}, {"tags": ["c#", "perl", "scheduled-tasks"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 6173629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4e0fed1a6d39e1fa5dcd873294936ab?s=128&d=identicon&r=PG&f=1", "display_name": "jkatebin", "link": "https://stackoverflow.com/users/6173629/jkatebin"}, "is_accepted": true, "score": 1, "last_activity_date": 1460142241, "creation_date": 1460142241, "answer_id": 36507370, "question_id": 36506352, "link": "https://stackoverflow.com/questions/36506352/trigger-a-process-to-start/36507370#36507370", "title": "Trigger a process to start", "body": "<p>Write a windows service which uses a filewatcher to monitor for new files.  <a href=\"https://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher(v=vs.110).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher(v=vs.110).aspx</a></p>\n\n<p>That can then use File.Move to move the file out and into the alternate directory for further processing. <a href=\"https://msdn.microsoft.com/en-us/library/system.io.file.move(v=vs.110).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/system.io.file.move(v=vs.110).aspx</a></p>\n\n<p>I would use a Task for this and a task.continuewith to kick off the next 'stage' of your workflow, etc.  Might also want to do a file COPY first, then a file delete (instead of a move, that way if something screws up during the copy you still have your original to work with).</p>\n"}], "owner": {"reputation": 1161, "user_id": 124658, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/d140e80b383a2072a376d352f1315e2d?s=128&d=identicon&r=PG", "display_name": "Craig", "link": "https://stackoverflow.com/users/124658/craig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 36507370, "answer_count": 1, "score": 0, "last_activity_date": 1460142241, "creation_date": 1460138549, "question_id": 36506352, "link": "https://stackoverflow.com/questions/36506352/trigger-a-process-to-start", "title": "Trigger a process to start", "body": "<p>I am looking for an idea on how I can launch a C# process based on something happening on a Windows server.  My first challange is to determine when to start the first process.  It needs to monitor a SFTP folder to see if a certain file type has been delivered.  My initial thought was to have the task scheduler start a Perl script, have the script look to see if the file exists and then start the process.  But once it has started the process, I don't want it to look for the file till the next day.</p>\n\n<p>The second issue is that the first process moves files to another folder and then a third party application will start converting these files from PDFs to TEXT.  The second process needs to start when this is done.  I am not sure how to make this happen.</p>\n\n<p>Thoughts??????</p>\n"}, {"tags": ["arrays", "regex", "perl", "if-statement"], "answers": [{"tags": [], "owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1460140707, "creation_date": 1460140707, "answer_id": 36506914, "question_id": 36504160, "link": "https://stackoverflow.com/questions/36504160/searching-a-string-in-perl-for-x-number-of-occurrences-of-a-character-in-a-if-st/36506914#36506914", "title": "Searching a string in perl for x number of occurrences of a character in a IF statement", "body": "<p>You're not really that close, actually. Here are some pointers to get you in the right direction:\nm// does not return how many times a match was found.  In scalar context (like comparing it to a number as you are), it returns true or false, depending on whether a single match was found at all.</p>\n\n<p>In a list context, the m// would return all the matches, but you'd still need to assign that list to an array and then find the size of the array, in order to get a count of all the matches</p>\n\n<p>you need to escape the period in the pattern match, as that is a special character</p>\n\n<p>Strings are not character arrays. You cannot refer to $lines[3] as though it's an array of characters by putting another set of [ ] subscripts on the end.  There are functions that help you get pieces of strings.  Look into substr, for example.  (And even if it was, [3..-1] would not be a valid subscript, even though -1 does represent the last index of an array)</p>\n\n<p>Get rid of the single quotes in the second pattern match.  That's saying you literally want to look for the string: single quote, g, e, t, single quote.</p>\n\n<p>Good luck to you!</p>\n"}], "owner": {"reputation": 1, "user_id": 6177990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZXeYS.png?s=128&g=1", "display_name": "Dondy", "link": "https://stackoverflow.com/users/6177990/dondy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1460140707, "creation_date": 1460131074, "last_edit_date": 1460131354, "question_id": 36504160, "link": "https://stackoverflow.com/questions/36504160/searching-a-string-in-perl-for-x-number-of-occurrences-of-a-character-in-a-if-st", "title": "Searching a string in perl for x number of occurrences of a character in a IF statement", "body": "<p>I'm trying to use perl to find the number of periods on a line and if it contains the number I have defined then to group portions of a line together. </p>\n\n<p>Here is what I have so far</p>\n\n<pre><code>        if (($lines [0] =~ /./) ==3){\n            $lines [3] = $lines [0][3..-1]\n                if ($lines [2] =~ /'get'/);\n                    print Output \"qa;$lines[2];get\\n\"\n</code></pre>\n\n<p>I feel like I'm close buy not close enough. </p>\n\n<p>Here is a sample of the text file I am reading from, but what I have is not matching.</p>\n\n<pre><code>...State  [ ]\n.....County  [ ]\n.......City  [ get set clear ]\n.......ZIP  [ get detail ]\n</code></pre>\n\n<p>The goal is for the output to look something like this when I'm done. I really only want get commands right now. </p>\n\n<blockquote>\n  <p>qa;State;County;City get</p>\n</blockquote>\n\n<p>But I can't seem to get it to match the periods. Any help would be awesome. </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 3, "creation_date": 1460128258, "post_id": 36503125, "comment_id": 60613379, "body": "you could use <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\"><code>map</code></a>: <code>my ($rx) = map { qr&#47;$_&#47; } join(&#39;|&#39;, keys %replacement_hash)</code>."}, {"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1460129085, "post_id": 36503125, "comment_id": 60614008, "body": "@HunterMcMillen, good one! If only it didn&#39;t need extra context () arond <code>my</code> list..."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1460129234, "post_id": 36503125, "comment_id": 60614107, "body": "map returns a list, if you only want to capture the first element (in this case there is only one element) you need to use parentheses, otherwise you will get the size of the list."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460137272, "post_id": 36503125, "comment_id": 60618831, "body": "That last comment is inaccurate. &quot;Returns a list&quot; simply means &quot;returns a number of values that can be different than one&quot;. If an operator did that in scalar context, Perl would crash. So saying that <code>map</code> returns a list is incorrect. In scalar context (as in <code>my $x = map ...</code>), <code>map</code> returns the number of values it <i>would have returned</i> in list context."}], "answers": [{"comments": [{"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1461243905, "post_id": 36505911, "comment_id": 61118354, "body": "While plain string is indeed pretty much on par with <code>qr&#47;&#47;</code>, <code>&#47;o</code> still seems to provide 5-10% increase to my surprise. I hoped we got rid of it long time ago."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1460139392, "last_edit_date": 1460139392, "creation_date": 1460136818, "answer_id": 36505911, "question_id": 36503125, "link": "https://stackoverflow.com/questions/36503125/concise-way-to-compile-dynamically-created-regexp/36505911#36505911", "title": "Concise way to compile dynamically created regexp", "body": "<pre><code>my ($re) = map qr/$_/, join '|', map quotemeta, @strings;\n</code></pre>\n\n<p>Chances are you don't need to compile it.</p>\n\n<p>Most of the time, you end up embedding it in another pattern (e.g. <code>/^$re\\z/</code> or <code>/($re)/</code>), forcing the pattern to be recompiled. (<code>/$re/</code> doesn't recompile, and neither does the equivalent <code>=~ $re</code>.)</p>\n\n<p>Furthermore, Perl caches the compiled form of the last pattern it compiled. If it's asked to compile the same pattern again, it simply returns the cached copy instead.</p>\n\n<p>In both of those situations, the following would suffice:</p>\n\n<pre><code>my $pat = join '|', map quotemeta, @strings;\n</code></pre>\n"}], "owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 36505911, "answer_count": 1, "score": 2, "last_activity_date": 1460139392, "creation_date": 1460128141, "last_edit_date": 1460128828, "question_id": 36503125, "link": "https://stackoverflow.com/questions/36503125/concise-way-to-compile-dynamically-created-regexp", "title": "Concise way to compile dynamically created regexp", "body": "<p>I want to dynamically create a compiled regexp. Well, no problem:</p>\n\n<pre><code>my $rx = join('|', keys %replacement_hash);\n</code></pre>\n\n<p>I want to compile it to avoid overhead on repeated calls. No problem as well:</p>\n\n<pre><code>$rx = qr/$rx/;\n</code></pre>\n\n<p>What is problem though - it is too long for such a trivial operation. Two lines and two extra times I need to mention variable name, so I'd need to change it in all 3 positions if I decide to rename it.</p>\n\n<p>So far I've come with either using a helper function (which still would have disadvantages of having to keep this function somewhere):</p>\n\n<pre><code>sub qr_expr { qr/$_[0]/ }\n# and later\nmy $rx = qr_expr(join('|', keys %replacement_hash));\n</code></pre>\n\n<p>or just plainly inlining the same function where I need it:</p>\n\n<pre><code>my $rx = sub{qr/$_[0]/}-&gt;(join('|', keys %replacement_hash));\n</code></pre>\n\n<p>Is there a way to write it more concisely?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 692, "user_id": 2208750, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/764b5270808cc2b041cecf9bc296a3f1?s=128&d=identicon&r=PG", "display_name": "Mehdi", "link": "https://stackoverflow.com/users/2208750/mehdi"}, "reply_to_user": {"reputation": 20984, "user_id": 2170192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JsKlq.png?s=128&g=1", "display_name": "Alex Shesterov", "link": "https://stackoverflow.com/users/2170192/alex-shesterov"}, "edited": false, "score": 0, "creation_date": 1460128106, "post_id": 36502910, "comment_id": 60613276, "body": "the $ is throwing this off. Your link doesn&#39;t address this."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1460128180, "post_id": 36502910, "comment_id": 60613314, "body": "Actually it does. I still don&#39;t think it&#39;s a duplicate though. I&#39;m posting an answer explaining what you are doing wrong."}, {"owner": {"reputation": 692, "user_id": 2208750, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/764b5270808cc2b041cecf9bc296a3f1?s=128&d=identicon&r=PG", "display_name": "Mehdi", "link": "https://stackoverflow.com/users/2208750/mehdi"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460243656, "post_id": 36502910, "comment_id": 60652437, "body": "I can&#39;t get it to work, its been 3 days of trying."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1460363876, "creation_date": 1460363876, "answer_id": 36543700, "question_id": 36502910, "link": "https://stackoverflow.com/questions/36502910/regular-expression-to-find-0-00/36543700#36543700", "title": "Regular Expression to find $0.00", "body": "<p>You are using the <em>transliteration operator</em> <a href=\"http://perldoc.perl.org/functions/tr.html\" rel=\"nofollow\"><code>tr///</code></a>. That doesn't have anything to do with a pattern. You need the <em>match operator</em> <code>m//</code> instead. And because you want it to find all occurances of the pattern, use the <code>/g</code> modifier.</p>\n\n<pre><code>my $count = () = $menu =~ m/\\$0\\.00/g;\n</code></pre>\n\n<p>If we run this program, the output is <em>2</em>.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $menu = '$0.00 and $0.00';\nmy $count = () = $menu =~ m/\\$0\\.00/g;\n\nprint $count;\n</code></pre>\n\n<p>Now lets take a look at what is going on. First, the pattern of the match.</p>\n\n<pre><code>/\\$0\\.00/\n</code></pre>\n\n<p>This is fairly straight-forward. There is a literal <code>$</code>, which we need to escape with a backslash <code>\\</code>. The zero is followed by a literal dot <code>.</code>, which again we need to escape, because like the <code>$</code> it has special meanings in regular expressions.</p>\n\n<pre><code>my $count = () = $menu =~ m/\\$0\\.00/g;\n</code></pre>\n\n<p>This whole line looks weird. We can break it up into a few lines to make it more readable.</p>\n\n<pre><code>my @matches = ( $menu =~ m/\\$0\\.00/g );\nmy $count = scalar @matches;\n</code></pre>\n\n<p>We need the <code>/g</code> switch on the regular expression match to make it match all occurrences. In list context, the match operation returns all matches (which will be the string <code>\"$0.00\"</code> a number of times). Because we want the count, we then force that into <code>scalar</code> context, which gives us the number of elements. That can be shortened to one line by the idiom shown above.</p>\n"}], "owner": {"reputation": 692, "user_id": 2208750, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/764b5270808cc2b041cecf9bc296a3f1?s=128&d=identicon&r=PG", "display_name": "Mehdi", "link": "https://stackoverflow.com/users/2208750/mehdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1460363876, "creation_date": 1460127556, "last_edit_date": 1460134547, "question_id": 36502910, "link": "https://stackoverflow.com/questions/36502910/regular-expression-to-find-0-00", "title": "Regular Expression to find $0.00", "body": "<p>Need to count the number of \"$0.00\" in a string. I'm using:</p>\n\n<pre><code>my $zeroDollarCount = (\"\\Q$menu\\E\" =~ tr/\\$0\\.00//);\n</code></pre>\n\n<p>but it doesn't work. The issue is the <code>$</code> sign is throwing the regex off. It works if I just want to count the number of <code>$</code>, but fails to find <code>$0.00</code>.</p>\n\n<p>How is this a duplicate? Your solution does not address dollar sign which is an issue for me.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 1, "creation_date": 1460126723, "post_id": 36502539, "comment_id": 60612321, "body": "<code>@extensiveArray</code> is not what you think it is. <code>use Data::Dumper; print Dumper \\@extensiveArray;</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1460127360, "post_id": 36502539, "comment_id": 60612764, "body": "Also check where your array comes from - by any chance are you reading XML or JSON? Because there may be better solutions?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1460135496, "post_id": 36502539, "comment_id": 60617910, "body": "That code does not give that error."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1460126949, "last_edit_date": 1460126949, "creation_date": 1460126712, "answer_id": 36502581, "question_id": 36502539, "link": "https://stackoverflow.com/questions/36502539/perl-array-to-hash-in-map-error-as-it-says-cant-use-id-as-strict-refs-is-in-use/36502581#36502581", "title": "perl array to hash in map error as it says cant use id as strict refs is in use", "body": "<p>You need to use hash references inside your <code>@extensiveArray</code>. What you have right now is a flat list. Perl does not support nested listed.</p>\n\n<pre><code>my @extensiveArray = (\n    {\n        id   =&gt; 1,\n        name =&gt; 'Bob',\n    },\n    {\n        id   =&gt; 2,\n        name =&gt; 'Barley',\n    },\n    {\n        id   =&gt; 3,\n        name =&gt; 'Marley',\n    }\n);\n</code></pre>\n\n<p>Once you do that, you will get the error <em>Odd number of elements in anonymous hash</em>, because of the <code>{}</code>. </p>\n\n<pre><code>                                #    here    #\nmy %hashRef = map { $_-&gt;{id} =&gt; { $_-&gt;{name} } } @extensiveArray;\n</code></pre>\n\n<p>If you want to return a key/value pair from the <code>map</code>, just return a flat list. That's all a hash is, really.</p>\n\n<pre><code>my %hashRef = map { $_-&gt;{id} =&gt; $_-&gt;{name} } @extensiveArray;\n</code></pre>\n\n<p>You should check out <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow\">perlreftut</a> and the other pages linked there.</p>\n"}], "owner": {"reputation": 1671, "user_id": 4456455, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/9AKyw.jpg?s=128&g=1", "display_name": "eLemEnt", "link": "https://stackoverflow.com/users/4456455/element"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 36502581, "answer_count": 1, "score": 0, "last_activity_date": 1460126949, "creation_date": 1460126591, "question_id": 36502539, "link": "https://stackoverflow.com/questions/36502539/perl-array-to-hash-in-map-error-as-it-says-cant-use-id-as-strict-refs-is-in-use", "title": "perl array to hash in map error as it says cant use id as strict refs is in use", "body": "<pre><code>#!/usr/bin/perl -w\nuse strict;\n\nmy @extensiveArray = ((\n    id =&gt; 1,\n    name =&gt; 'Bob',\n    ),\n    (\n    id =&gt; 2,\n    name =&gt; 'Barley',\n    ),\n    (\n    id =&gt; 3,\nname =&gt; 'Marley',\n)\n);\n\n\nmy %hashRef = map { $_-&gt;{id} =&gt; { $_-&gt;{name} } } @extensiveArray;\n</code></pre>\n\n<p>what is wrong in this code,it gives me error as \"can't use string {id} as a HASH ref while 'strict refs' in use \"</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 1, "creation_date": 1460126095, "post_id": 36502233, "comment_id": 60611885, "body": "First, smartmatch in perl 5 is experimental and should generally be avoided. Second, when applied to an array, it looks for an exact match, so it won&#39;t help here."}], "answers": [{"comments": [{"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1460126053, "post_id": 36502331, "comment_id": 60611857, "body": "Adjust the regex according to what you&#39;re really looking for; this one assumes that the string has to start with <code>apple|</code>, not just contain <code>apple</code> anywhere."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1460126172, "post_id": 36502331, "comment_id": 60611937, "body": "@MarkReed: It assumes the target of the search is stored in <code>$fruit</code>, in the same way as the OP&#39;s own code. It&#39;s not the regex pattern that should be adjusted"}, {"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1460126253, "post_id": 36502331, "comment_id": 60611997, "body": "Yes, but it requires the string to <i>start</i> with the contents of <code>$fruit</code> followed by a <code>|</code> symbol, which was my point.  It&#39;s not clear from the question that such restrictions are intended, although they make no difference with the sample data provided."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1460126495, "post_id": 36502331, "comment_id": 60612159, "body": "@MarkReed: That&#39;s fine. Either you&#39;ve edited your comment or I misread it on my first take"}, {"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 3, "creation_date": 1460129913, "post_id": 36502331, "comment_id": 60614529, "body": "More recent perls (&gt;= 5.19.5) ship a List::Util &gt;= 1.33 with the <a href=\"http://perldoc.perl.org/List/Util.html#any\" rel=\"nofollow noreferrer\"><code>any</code></a> sub, which functions like a short-circuiting boolean <code>grep</code>.  Plain <code>grep</code> will inspect every element of the array, which may be slow in rare cases (very big arrays, e.g.)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 0, "creation_date": 1460137803, "post_id": 36502331, "comment_id": 60619116, "body": "@pilcrow: I considered mentioning that, but the data would have to be extravagant for such a change to make any difference. Even then it would less than double the speed of what is presumably a tiny part of the whole program, and become completely irrelevant if there is any disk IO involved. Optimisation should never be done preemptively or blind, as the programmer&#39;s time is <i>by far</i> the most expensive"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 5, "last_activity_date": 1460126118, "last_edit_date": 1460126118, "creation_date": 1460126000, "answer_id": 36502331, "question_id": 36502233, "link": "https://stackoverflow.com/questions/36502233/perl-searching-for-string-contained-in-array/36502331#36502331", "title": "Perl searching for string contained in array", "body": "<p>Don't use smart matching. It never worked properly for a number of reasons and it is now marked as <em>experimental</em></p>\n\n<p>In this case you can use <code>grep</code> instead, together with an appropriate regex pattern</p>\n\n<p>This program tests every element of <code>@fruitArray</code> to see if it starts with the letters in <code>$fruit</code> followed by a pipe character <code>|</code>. <code>grep</code> returns the number of elements that matched the pattern, which is a <em>true</em> value if at least one matched</p>\n\n<pre><code>my @fruitArray = qw/ apple|0 apple|1 pear|0 pear|0 /;\n\nmy $fruit = 'apple';\n\nprint \"I found $fruit\\n\" if grep /^$fruit\\|/, @fruitArray;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>I found apple\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 554, "user_id": 241593, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3d7e4eed5740c864a766640424643d5b?s=128&d=identicon&r=PG", "display_name": "Jaron787", "link": "https://stackoverflow.com/users/241593/jaron787"}, "edited": false, "score": 0, "creation_date": 1460130229, "post_id": 36502498, "comment_id": 60614715, "body": "This is great thanks. instead of {print &quot;I found apple&quot;;} how would i remove all elements containing &quot;apple&quot; from @fruitArray"}, {"owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "reply_to_user": {"reputation": 554, "user_id": 241593, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3d7e4eed5740c864a766640424643d5b?s=128&d=identicon&r=PG", "display_name": "Jaron787", "link": "https://stackoverflow.com/users/241593/jaron787"}, "edited": false, "score": 0, "creation_date": 1460130530, "post_id": 36502498, "comment_id": 60614931, "body": "Updated my answer to remove all elements containing &quot;apple&quot; from @fruitArray"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1460138817, "post_id": 36502498, "comment_id": 60619723, "body": "@MarcoS: I&#39;m wondering why you chose to post this in the first place, as even from the first draft it&#39;s clear that you&#39;re aware that you&#39;re rewriting my own solution"}, {"owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "edited": false, "score": 0, "creation_date": 1460171773, "post_id": 36502498, "comment_id": 60630959, "body": "Sometimes two answers with the same solution may contain different details and approaches which may result useful for OP to better grasp the solution... If you don&#39;t agree I will remove my answer..."}], "tags": [], "owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "is_accepted": true, "score": 1, "last_activity_date": 1460137909, "last_edit_date": 1460137909, "creation_date": 1460126442, "answer_id": 36502498, "question_id": 36502233, "link": "https://stackoverflow.com/questions/36502233/perl-searching-for-string-contained-in-array/36502498#36502498", "title": "Perl searching for string contained in array", "body": "<p>I - like <em>@Borodin</em> suggests, too - would simply use <code>grep()</code>:</p>\n\n<pre><code>$fruit = 'apple';\nif (grep(/^\\Q$fruit\\E\\|/, @fruitArray)) { print \"I found apple\"; }\n</code></pre>\n\n<p>which outputs:</p>\n\n<pre><code>I found apple\n</code></pre>\n\n<ul>\n<li><code>\\Q...\\E</code> converts your string into a regex pattern.</li>\n<li>Looking for the <code>|</code> prevents finding a fruit whose name starts with the name of the fruit for which you are looking.</li>\n</ul>\n\n<p>Simple and effective... :-)</p>\n\n<p><strong>Update</strong>: to remove elements from array:</p>\n\n<pre><code>$fruit = 'apple';\n@fruitsArrayWithoutApples = grep ! /^\\Q$fruit\\E|/, @fruitArray;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1285, "user_id": 4227700, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/BKZJV.jpg?s=128&g=1", "display_name": "northsideknight", "link": "https://stackoverflow.com/users/4227700/northsideknight"}, "is_accepted": false, "score": 0, "last_activity_date": 1460143539, "last_edit_date": 1460143539, "creation_date": 1460141763, "answer_id": 36507228, "question_id": 36502233, "link": "https://stackoverflow.com/questions/36502233/perl-searching-for-string-contained-in-array/36507228#36507228", "title": "Perl searching for string contained in array", "body": "<p>Don't use <code>grep</code>, that will loop the entire array, even if it finds what you are looking for in the first index, so it is inefficient.</p>\n\n<p>this will return true if it finds the substring 'apple', then return and not finish iterating through the rest of the array</p>\n\n<pre><code>#takes a reference to the array as the first parameter\nsub find_apple{\n    @array_input = @{$_[0]};\n    foreach $fruit (@array_input){\n        if (index($fruit, 'apple') != -1){\n            return 1;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2838, "user_id": 4154375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d56dba9cd817fb4dfb662c6a91010fbb?s=128&d=identicon&r=PG&f=1", "display_name": "pjh", "link": "https://stackoverflow.com/users/4154375/pjh"}, "is_accepted": false, "score": 1, "last_activity_date": 1460417138, "creation_date": 1460417138, "answer_id": 36561000, "question_id": 36502233, "link": "https://stackoverflow.com/questions/36502233/perl-searching-for-string-contained-in-array/36561000#36561000", "title": "Perl searching for string contained in array", "body": "<p>If your Perl is not ancient, you can use the <code>first</code> subroutine from the <code>List::Util</code> module (which became a core module at Perl 5.8) to do the check efficiently:</p>\n\n<pre><code>use List::Util qw{ first };\n\nmy $first_fruit = first { /\\Q$fruit\\E/ } @fruitArray;\n\nif ( defined $first_fruit ) { print \"I found $fruit\\n\"; }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "is_accepted": false, "score": 0, "last_activity_date": 1460987947, "creation_date": 1460987947, "answer_id": 36696146, "question_id": 36502233, "link": "https://stackoverflow.com/questions/36502233/perl-searching-for-string-contained-in-array/36696146#36696146", "title": "Perl searching for string contained in array", "body": "<p>You can get close to the <a href=\"http://blogs.perl.org/users/brian_d_foy/2011/07/rethinking-smart-matching.html\" rel=\"nofollow\">smartmatch sun without melting your wings</a> by using <a href=\"https://metacpan.org/pod/match::simple\" rel=\"nofollow\"><code>match::simple</code></a>:</p>\n\n<pre><code>use match::simple;\n\nmy @fruits = qw/apple|0 apple|1 pear|0 pear|0/;\n$fruit = qr/apple/ ;\n\nsay \"found $fruit\" if $fruit |M| \\@fruits ; \n</code></pre>\n\n<p>There's also a <code>match()</code> function if the infix <code>[M]</code> doesn't read well. </p>\n\n<p>I like the way <code>match::simple</code> does <em>almost</em> everything I expected from <code>~~</code> without any surprising complexity. If you're fluent in perl it probably isn't something you'd see as necessary, but - especially with <code>match()</code> - code can be made pleasantly readable ... at the cost of imposing the use of references, <em>etc</em>.</p>\n"}], "owner": {"reputation": 554, "user_id": 241593, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3d7e4eed5740c864a766640424643d5b?s=128&d=identicon&r=PG", "display_name": "Jaron787", "link": "https://stackoverflow.com/users/241593/jaron787"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 566, "favorite_count": 1, "accepted_answer_id": 36502498, "answer_count": 5, "score": 4, "last_activity_date": 1460987947, "creation_date": 1460125753, "question_id": 36502233, "link": "https://stackoverflow.com/questions/36502233/perl-searching-for-string-contained-in-array", "title": "Perl searching for string contained in array", "body": "<p>I have an array with the following values:</p>\n\n<pre><code>push @fruitArray, \"apple|0\";\npush @fruitArray, \"apple|1\";\npush @fruitArray, \"pear|0\";\npush @fruitArray, \"pear|0\";\n</code></pre>\n\n<p>I want to find out if the string \"apple\" exists in this array (ignoring the \"|0\" \"|1\")</p>\n\n<p>I am using:</p>\n\n<pre><code>$fruit = 'apple';\nif( $fruit ~~ @fruitArray ){ print \"I found apple\"; }\n</code></pre>\n\n<p>Which isn't working.</p>\n"}, {"tags": ["perl", "dns", "dnssec"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460122734, "post_id": 36499494, "comment_id": 60609488, "body": "You should start by <a href=\"https://stackoverflow.com/posts/36499494/edit\">edit</a>ing your question to include the code that you wrote <i>to convert crt file to a Keyset object</i> and the error it showed."}, {"owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460127514, "post_id": 36499494, "comment_id": 60612882, "body": "@simbabque I have edited my question. Please update if anything more is required."}], "answers": [{"comments": [{"owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "edited": false, "score": 0, "creation_date": 1460184054, "post_id": 36513563, "comment_id": 60633112, "body": "I created DS from KSK DNSKEY record and then match DS-&gt;digest to digest present in XML file. Is this way ok?"}, {"owner": {"reputation": 4663, "user_id": 3967089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d00715119003023d62918dcc603ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Calle Dybedahl", "link": "https://stackoverflow.com/users/3967089/calle-dybedahl"}, "reply_to_user": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "edited": false, "score": 0, "creation_date": 1460270948, "post_id": 36513563, "comment_id": 60657764, "body": "You should really check the digest type and algorithm too, but basically yes."}, {"owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "edited": false, "score": 0, "creation_date": 1460271049, "post_id": 36513563, "comment_id": 60657783, "body": "I will check those too. Thanks for your explanation."}], "tags": [], "owner": {"reputation": 4663, "user_id": 3967089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d00715119003023d62918dcc603ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Calle Dybedahl", "link": "https://stackoverflow.com/users/3967089/calle-dybedahl"}, "is_accepted": true, "score": 1, "last_activity_date": 1460183688, "creation_date": 1460183688, "answer_id": 36513563, "question_id": 36499494, "link": "https://stackoverflow.com/questions/36499494/how-do-i-verify-a-root-dns-trust-anchor/36513563#36513563", "title": "How do I verify a root DNS trust anchor?", "body": "<p>You seem to have misunderstood what's in the files IANA provides. None of them except the public root key itself is actually DNSSEC data. The <code>Kjqmt7v.crt</code> file, for example, is an X.509 certificate in DER format (so it's no wonder that <code>Net::DNS::Keyset</code> chokes on it). If you look at it (with the <code>openssl x509</code> command, for example), you can see that included in its DN field is the textual representation of a DS record for the root KSK. So if you verify that certificate, you know that DS is genuine, and you can use that to verify the DNSKEY.</p>\n\n<p>Another alternative available at the same URL, which is probably easier to use for most people, is a DS for the KSK in XML format, with a detached PGP signature. Verify the signature, use the data in the XML file to build a proper DS record in your favorite programming language, and then you can use that to verify the KSK DNSKEY record.</p>\n"}], "owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "accepted_answer_id": 36513563, "answer_count": 1, "score": 1, "last_activity_date": 1460183688, "creation_date": 1460118198, "last_edit_date": 1460145916, "question_id": 36499494, "link": "https://stackoverflow.com/questions/36499494/how-do-i-verify-a-root-dns-trust-anchor", "title": "How do I verify a root DNS trust anchor?", "body": "<p>I am trying to verify root Key Signing Key (KSK) against the trust anchor (<code>Kjqmt7v.crt</code>) downloaded from <a href=\"https://www.iana.org/dnssec/files\" rel=\"nofollow\">here</a>. I am getting root KSK using the <code>Net::DNS</code> module. </p>\n\n<p>I am very confused at present on how to verify that both are the same. I tried to convert the <code>.crt</code> file to a <code>Keyset</code> object, but it is resulting in an error. </p>\n\n<p>This is my code.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings; \nuse Net::DNS::Keyset;\nmy $keyset = Net::DNS::Keyset-&gt;new('Kjqmt7v.crt');\n$keyset-&gt;print;\n</code></pre>\n\n<p>This is the error</p>\n\n<pre><code> We expected a match RDATA\n0\ufffd\ufffd0\ufffd\ufffd\ufffd0   *\ufffdH\ufffd\ufffd  0K10 U \nthis Should not happen\n at a.pl line 5\n</code></pre>\n\n<p>I am very confused and therefore unable to provide any proper code, as I have no idea how to start. Pointing me in the right direction would be very helpful.</p>\n\n<p>I want a way to verify trust anchor against the KSK that I am getting from root DNS servers. If there is any other way to do that please update me. </p>\n"}, {"tags": ["perl", "eval", "require"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1460120907, "post_id": 36499139, "comment_id": 60608141, "body": "I&#39;m not clear what you expect perl to do with <code>1123131323fsdfsfsdfsfgdfgdfgghfghfghfgheterterter ...</code>. Regardless of what modules are loaded, the program still has to compile. Decoding a string involves passing the encoded string to a decoding subroutine. Also, the <code>BEGIN{ eval{&quot;use x&quot;}; }</code> will be done at <i>compile time</i>, before the <code>require</code> and independently of the conditional statement you have put it into"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1460121303, "post_id": 36499139, "comment_id": 60608430, "body": "<i>&quot;If the library is present, the decode works fine&quot;</i> I can&#39;t imagine what may be in your module <code>x</code> to get that code to compile. And <code>no x</code> won&#39;t do anything useful unless your module has an <code>unimport</code> method"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1460121485, "post_id": 36499139, "comment_id": 60608584, "body": "That is <i>not</i> the way that Sobrique and bolav <a href=\"http://stackoverflow.com/a/35651339\">suggested</a>, so please don&#39;t claim that it is. Did you read bolav&#39;s comment? The BEGIN block will be executed unconditionally at compile time, before anything else."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1460123189, "post_id": 36499139, "comment_id": 60609882, "body": "I didn&#39;t realise that this was a follow-up question. I note that you say <b><i>&quot;At present - until advised to the contrary - I have made a &quot;mash&quot; of the two. ideas&quot;</i></b> and <a href=\"http://stackoverflow.com/questions/35651264/show-error-if-pm-library-doesnt-exist/35651339#comment58998412_35652980\"><b>bolav</b> replies</a> <b><i>&quot;This is not advisable ...&quot;</i></b> Please take heed of the advice you are given. It&#39;s sounding like all of this is about making your Perl code unreadable, which is always a futile venture and can only make your own job harder"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 2799655, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x8L1s.jpg?s=128&g=1", "display_name": "Cristofayre", "link": "https://stackoverflow.com/users/2799655/cristofayre"}, "edited": false, "score": 0, "creation_date": 1460119266, "post_id": 36499515, "comment_id": 60607033, "body": "Sorry, in my haste at typing, I left the exit out from below the &quot;library is missing&quot; line"}, {"owner": {"reputation": 95, "user_id": 2799655, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x8L1s.jpg?s=128&g=1", "display_name": "Cristofayre", "link": "https://stackoverflow.com/users/2799655/cristofayre"}, "edited": false, "score": 0, "creation_date": 1460119623, "post_id": 36499515, "comment_id": 60607256, "body": "Nope, sorry ... Still no go. It still comes up as &quot;syntax error at ../program_name.cgi line 23, near &quot;1123131323fsdfs ...&quot; &quot;no&quot; not allowed in expression at line 24 ie it&#39;s looking through program, and finds the letters not assigned to a variable, and quits. Yet it the library IS present, it doesn&#39;t throw a wobbly and decodes the value!! Weird"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 95, "user_id": 2799655, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x8L1s.jpg?s=128&g=1", "display_name": "Cristofayre", "link": "https://stackoverflow.com/users/2799655/cristofayre"}, "edited": false, "score": 0, "creation_date": 1460120654, "post_id": 36499515, "comment_id": 60607972, "body": "You&#39;re going to have to show us more code. Your first example isn&#39;t even valid Perl, and assigning to <code>$_</code> in your second example isn&#39;t typically standard. Put <code>use warnings;</code> and <code>use strict;</code> at the top of the script if it isn&#39;t already there as well."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": -1, "last_activity_date": 1460119106, "last_edit_date": 1460119106, "creation_date": 1460118252, "answer_id": 36499515, "question_id": 36499139, "link": "https://stackoverflow.com/questions/36499139/exit-if-a-perl-pm-is-not-available/36499515#36499515", "title": "Exit If a perl pm is not available", "body": "<p>It doesn't look like you exit in any fashion. Here's a stable way to use <code>eval()</code> to do what you want, with an <code>exit()</code>. <code>$ok</code> won't be set to a true value if the <code>require()</code> fails.</p>\n\n<pre><code>my $ok = eval {require 'nofile.pm'; 1};\n\nif (! $ok){\n    print \"module not found\\n\";\n    exit;\n}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 2799655, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x8L1s.jpg?s=128&g=1", "display_name": "Cristofayre", "link": "https://stackoverflow.com/users/2799655/cristofayre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "closed_date": 1460124460, "answer_count": 1, "score": -1, "last_activity_date": 1460121232, "creation_date": 1460117218, "last_edit_date": 1460121232, "question_id": 36499139, "link": "https://stackoverflow.com/questions/36499139/exit-if-a-perl-pm-is-not-available", "closed_reason": "Duplicate", "title": "Exit If a perl pm is not available", "body": "<p>The concept: A library is placed in my public_html folder, it's purpose to decode a string. But if that library is NOT present, to stop with an error. The way that was suggested before was:</p>\n\n<pre><code>eval(\"require x.pm\");\n\nif ($@) {\n    print \"The library is missing\";\n}\nelse{\n\n    BEGIN{\n        eval{\"use x\"};\n    }\n\n    1123131323fsdfsfsdfsfgdfgdfgghfghfghfgheterterter ...\n    no x;\n}\n</code></pre>\n\n<p>If the library is present, the decode works fine, and everything is \"Hunky Dory\". IN THEORY ... if the file is NOT present, the top loop should print an error ... except all that happens is I get an Error 500 as the script sees the encrypted string, and decides it's not a valid program.</p>\n\n<p>Wondered if it was the \"$@\" so I tried it with flags</p>\n\n<pre><code>$set=0;\n$set=1 if eval(\"require x.pm\");\n\nif ($set eq 0){\n...\n..\n</code></pre>\n\n<p>Same thing. Tried putting the code into a string:</p>\n\n<pre><code>$_=\"1123131323fsdfsfsdfsfgdfgdfgghfghfghfgheterterter ...\"\n</code></pre>\n\n<p>That didn't help. So can anyone throw any light on what I'm doing wrong?</p>\n"}, {"tags": ["perl", "ini"], "comments": [{"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1460112935, "post_id": 36497530, "comment_id": 60603148, "body": "I use this to strip extraneous carriage returns, linefeeds and tabs... <code>tr &#47;\\r\\n\\t&#47;&#47;d;</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460113338, "post_id": 36497530, "comment_id": 60603378, "body": "Do you want to remove the literal string <code>^M</code>? Do you want to manipulate the script that creates the file, or alter the file with a different program? In any case, please <a href=\"https://stackoverflow.com/posts/36497530/edit\">edit</a> your question and clarify."}, {"owner": {"reputation": 1, "user_id": 4418871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6da5cf6cabd948a24bf5c3c62a67a7be?s=128&d=identicon&r=PG&f=1", "display_name": "Rajadurai", "link": "https://stackoverflow.com/users/4418871/rajadurai"}, "edited": false, "score": 0, "creation_date": 1460115251, "post_id": 36497530, "comment_id": 60604645, "body": "Hi Simbabque,I want to remove the string"}, {"owner": {"reputation": 1, "user_id": 4418871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6da5cf6cabd948a24bf5c3c62a67a7be?s=128&d=identicon&r=PG&f=1", "display_name": "Rajadurai", "link": "https://stackoverflow.com/users/4418871/rajadurai"}, "edited": false, "score": 0, "creation_date": 1460117651, "post_id": 36497530, "comment_id": 60606054, "body": "tr /\\r\\n\\t//d; &lt;filename&gt;     correct Mark?"}], "answers": [{"tags": [], "owner": {"reputation": 326, "user_id": 4810570, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-e7lh0mX9YsA/AAAAAAAAAAI/AAAAAAAAApY/EGaDNC0uGEI/photo.jpg?sz=128", "display_name": "Curt Evans", "link": "https://stackoverflow.com/users/4810570/curt-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1460129678, "creation_date": 1460129678, "answer_id": 36503668, "question_id": 36497530, "link": "https://stackoverflow.com/questions/36497530/remove-m-from-ini-file/36503668#36503668", "title": "Remove ^M from ini file", "body": "<p>The carriage returns are coming from somewhere, so you need to strip them at the source, e.g. $string =~ s/\\r//gs;</p>\n\n<p>if you are on a linux platform, you can also use dos2unix  at the command line, or in perl:</p>\n\n<p>close $file;\nsystem ('dos2unix '.$filename);</p>\n"}], "owner": {"reputation": 1, "user_id": 4418871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6da5cf6cabd948a24bf5c3c62a67a7be?s=128&d=identicon&r=PG&f=1", "display_name": "Rajadurai", "link": "https://stackoverflow.com/users/4418871/rajadurai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460129678, "creation_date": 1460111916, "question_id": 36497530, "link": "https://stackoverflow.com/questions/36497530/remove-m-from-ini-file", "title": "Remove ^M from ini file", "body": "<p>I have a ini file which is the output of a perl script. The file has ^M in multiple variables. How do I remove them. Pls help!</p>\n\n<p>Ex: ANALOGPORTINFO_16 = 'xxxxxxxxx^M13'</p>\n\n<p>In few lines it's present as the last value.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["perl", "par", "perl-packager"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 6176504, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/109e0174fe87af14adfa8d74dea4b00f?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay Gudisagar", "link": "https://stackoverflow.com/users/6176504/vinay-gudisagar"}, "edited": false, "score": 0, "creation_date": 1460940986, "post_id": 36497650, "comment_id": 60957260, "body": "Hi @eballes, Thanks for your suggestion. I tried this but it doesn&#39;t create binary file. When I tried to run on linux machine it says <b>&quot;Can&#39;t execute binary file&quot;</b>. Its an Windows application file. Just by using youBinary.bin doesn&#39;t create binary file. To verify this I renamed the youBinary.bin to youBinary.exe. Its works on windows,"}, {"owner": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "reply_to_user": {"reputation": 73, "user_id": 6176504, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/109e0174fe87af14adfa8d74dea4b00f?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay Gudisagar", "link": "https://stackoverflow.com/users/6176504/vinay-gudisagar"}, "edited": false, "score": 0, "creation_date": 1460958004, "post_id": 36497650, "comment_id": 60961125, "body": "I&#39;ve edited my question. Basically, you can&#39;t cross-compile with PAR (that is, in Windows to be able to create a Linux executable). You should do the compilation directly on a Linux machine."}, {"owner": {"reputation": 73, "user_id": 6176504, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/109e0174fe87af14adfa8d74dea4b00f?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay Gudisagar", "link": "https://stackoverflow.com/users/6176504/vinay-gudisagar"}, "edited": false, "score": 0, "creation_date": 1461120286, "post_id": 36497650, "comment_id": 61049272, "body": "Thanks for your help! I could create a standalone bin file from linux machine."}, {"owner": {"reputation": 8121, "user_id": 119725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/94d7f9208e421fe3fcdb2953ede58280?s=128&d=identicon&r=PG", "display_name": "Tilman Vogel", "link": "https://stackoverflow.com/users/119725/tilman-vogel"}, "edited": false, "score": 1, "creation_date": 1491553417, "post_id": 36497650, "comment_id": 73614332, "body": "You should put first the information, that indeed it is not possible as asked (&quot;from this Windows machine&quot;)."}], "tags": [], "owner": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "is_accepted": true, "score": 3, "last_activity_date": 1574088787, "last_edit_date": 1574088787, "creation_date": 1460112212, "answer_id": 36497650, "question_id": 36496609, "link": "https://stackoverflow.com/questions/36496609/how-to-pack-perl-script-with-all-dependencies-from-windows-to-run-on-linux-machi/36497650#36497650", "title": "How to pack perl script with all dependencies from Windows to run on linux machine?", "body": "<p>Generating a binary that runs on a Linux machine starting from a Windows machine <a href=\"http://search.cpan.org/dist/PAR/lib/PAR/FAQ.pod\" rel=\"nofollow noreferrer\">is <strong>not</strong> possible</a>. </p>\n\n<hr>\n\n<hr>\n\n<p>You use the <a href=\"http://search.cpan.org/~rschupp/PAR-Packer-1.030/lib/pp.pm\" rel=\"nofollow noreferrer\">pp</a> (from <code>PAR-Packer</code>) command probably quite in the same way as you did in Windows</p>\n\n<pre><code>pp -S -M Some::Module -M Some::Other::Module -o youBinary.bin Script1.pl Script2.pl ScriptN.pl\n</code></pre>\n\n<p>Things to note:</p>\n\n<ul>\n<li>The <code>-M</code> flag might be necessary because sometimes the automatic finding of dependencies may not work (some of them are loaded dynamically at runtime so it's a bit trial and error until you get the good combination). Take special care when you see warnings like these when executing <code>pp</code>:</li>\n</ul>\n\n<hr>\n\n<pre><code>Use of runtime loader module Module::Runtime detected.  Results of static scanning may be incomplete.\nUse of runtime loader module Module::Implementation detected.  Results of static scanning may be incomplete.\n</code></pre>\n\n<hr>\n\n<ul>\n<li><p>The posibility to pack several scripts into one binary. You can them create different symbolic links to that binary to execute the different scripts.</p>\n\n<blockquote>\n  <p>When a single input program is specified, the resulting executable will behave identically as that program.  However, when multiple programs are packaged, the produced executable will run the one that has the same basename as $0 (i.e. the filename used to invoke it).  If nothing matches, it dies with the error \"Can't open perl script \"$0\"</p>\n</blockquote>\n\n<p>Very convenient from time to time.</p></li>\n</ul>\n\n<p>Be aware also of creating the binary on a machine with an \"older\" libc. If you do this on a bleeding edge linux, you will need a bleeding edge linux to run it too, making it less portable.</p>\n\n<blockquote>\n  <p>Note that even if your perl was built with a shared library, the 'Stand-alone executable' above will not need a separate perl5x.dll or libperl.so to function correctly.  But even in this case, the underlying system libraries such as libc must be compatible between the host and target machines.</p>\n</blockquote>\n\n<p>Enjoy your standalone Perl binary.</p>\n\n<p><strong><em>EDIT</em></strong></p>\n\n<p>Generating a binary that runs on a Linux machine starting from a Windows machine <a href=\"http://search.cpan.org/dist/PAR/lib/PAR/FAQ.pod\" rel=\"nofollow noreferrer\">is <strong>not</strong> possible</a>.</p>\n\n<blockquote>\n  <p><strong><em>The Perl Packager scripts says that it can create executable that runs in same OS. Can I use it to create Win32 binary with linux machine? Or what should I use to create Win32 executable binary on linux from my script?</em></strong></p>\n  \n  <p>It is not possible to create stand-alone binaries for different platform than what you are currently running on. This is a generally hard problem since you would have to cross-compile all XS modules and perl itself. Not nice.</p>\n  \n  <p>For example, if you would like to develop an application on Linux and ship it for both Linux/x86 and Win32/x86, it works well to set up a Virtual Machine with a Windows (XP or 2000 or whatever) and a Perl installation. On that machine, use PAR/pp to package your application for Win32.</p>\n  \n  <p><strong><em>On what platforms can I run PAR? On what platforms will the resulting executable run?</em></strong></p>\n  \n  <p>Win32 (95/98/ME/NT4/2K/XP), FreeBSD, Linux, AIX, Solaris, Darwin and Cygwin.</p>\n  \n  <p>The resulting executable will run on any platforms that supports the binary format of the generating platform.</p>\n</blockquote>\n"}], "owner": {"reputation": 73, "user_id": 6176504, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/109e0174fe87af14adfa8d74dea4b00f?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay Gudisagar", "link": "https://stackoverflow.com/users/6176504/vinay-gudisagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1554, "favorite_count": 1, "accepted_answer_id": 36497650, "answer_count": 1, "score": 3, "last_activity_date": 1574088787, "creation_date": 1460109208, "last_edit_date": 1460958435, "question_id": 36496609, "link": "https://stackoverflow.com/questions/36496609/how-to-pack-perl-script-with-all-dependencies-from-windows-to-run-on-linux-machi", "title": "How to pack perl script with all dependencies from Windows to run on linux machine?", "body": "<p>I have used pp PAR::Packer to build a standalone exe file to run on a Windows machine.</p>\n\n<p>Can somebody explain how to build a Perl script with all the dependent packages from this Windows machine to create a standalone file to be run on a <strong>Linux</strong> machine?</p>\n"}, {"tags": ["perl", "hash", "data-dumper"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1460127031, "post_id": 36496113, "comment_id": 60612547, "body": "If you give us some sample XML, we can show you a MUCH simpler solution. I&#39;ve made a guess at what your source XML looks like to illustrate the concept."}], "answers": [{"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 0, "last_activity_date": 1460107935, "creation_date": 1460107935, "answer_id": 36496194, "question_id": 36496113, "link": "https://stackoverflow.com/questions/36496113/how-to-get-a-value-from-deep-within-a-hash-in-perl/36496194#36496194", "title": "How to get a value from deep within a hash in perl", "body": "<p>The value of Root is an <strong>ArrayRef</strong>. You are ignoring the array and treating it as if it was one of the HashRefs that are inside it. You need to loop over the array or access it with a specific index.</p>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 575, "user_id": 2413767, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9380d059e6b721c893f451abd941fcd1?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/2413767/john"}, "edited": false, "score": 0, "creation_date": 1460112720, "post_id": 36496734, "comment_id": 60603004, "body": "Putting code in a comment is a terrible idea. Perhaps edit your question to add the new details."}, {"owner": {"reputation": 575, "user_id": 2413767, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9380d059e6b721c893f451abd941fcd1?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/2413767/john"}, "edited": false, "score": 0, "creation_date": 1460112780, "post_id": 36496734, "comment_id": 60603040, "body": "Sorry for the stream of comments, i pasted in a lovely formatted reply, but comments printed it out without spacing."}, {"owner": {"reputation": 575, "user_id": 2413767, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9380d059e6b721c893f451abd941fcd1?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/2413767/john"}, "edited": false, "score": 0, "creation_date": 1460113030, "post_id": 36496734, "comment_id": 60603197, "body": "Yes, yes it is terrible idea. I&#39;ve updated the question above."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1460128400, "last_edit_date": 1495542675, "creation_date": 1460109526, "answer_id": 36496734, "question_id": 36496113, "link": "https://stackoverflow.com/questions/36496113/how-to-get-a-value-from-deep-within-a-hash-in-perl/36496734#36496734", "title": "How to get a value from deep within a hash in perl", "body": "<p>This is one of the reasons that <a href=\"https://metacpan.org/pod/XML::Simple#STATUS-OF-THIS-MODULE\" rel=\"nofollow noreferrer\">XML::Simple is strongly deprecated</a> - occasionally it will throw in an array reference when you expect a hash reference.</p>\n\n<p>You can see that the value of <code>$rulesxml-&gt;{'Roots'}-&gt;{'Root'}</code> is an array ref, not a hash ref as it starts with a <code>[</code> not a <code>{</code>.</p>\n\n<p>If the data is exactly what you show here, then all you need to do is to insert an array look-up in your code.</p>\n\n<pre><code>Dumper($myxml-&gt;{'Roots'}-&gt;{'Root'}-&gt;[0]-&gt;{'Profiles'}-&gt;{'Profile'}); \n</code></pre>\n\n<p>I've used 0 as there is (currently?) only one element in that array. If your data is more complicated and you have multiple elements in the array, then you will need to use a loop.</p>\n\n<p>For work like this, I'd strongly recommend taking the time to learn <a href=\"https://en.wikipedia.org/wiki/XPath\" rel=\"nofollow noreferrer\">XPath</a> and using a module which supports that (I like <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a>).</p>\n\n<p>A couple of other ways to simplify your code:</p>\n\n<ol>\n<li><p>You quote the variable in the <code>XMLin()</code> call unnecessarily.</p>\n\n<p><code>$myxml = XMLin($configfile); # Works fine without quotes</code></p></li>\n<li><p>You can omit intermediate arrows in multi-level look-ups.</p>\n\n<p><code>$myxml-&gt;{'Roots'}{'Root'}[0]{'Profiles'}{'Profile'}</code></p></li>\n<li><p>You can also omit most quotes around hash key names.</p>\n\n<p><code>$myxml-&gt;{Roots}{Root}[0]{Profiles}{Profile}</code></p></li>\n</ol>\n\n<p><strong>Update:</strong> I'm loathe to give you the solution to your added question because (as we never tire of pointing out here) XML::Simple is a terrible solution to most XML problems.</p>\n\n<p>But, given your data structure (or rather, a version of your data structure that I have cleaned up so it actually compiles!) this is how you would traverse it (yes, it's a nested loop).</p>\n\n<pre><code>for my $root (@{ $myxml-&gt;{Roots}{Root} }) {\n  for my $profile (@{ $root-&gt;{Profiles}{Profile} }) {\n    if ($profile-&gt;{Name} eq 'Bob') {\n      say $profile-&gt;{Status};\n    }\n  }\n}\n</code></pre>\n\n<p>But please don't use this approach. The <a href=\"https://stackoverflow.com/a/36502681/7231\">XML::Twig approach</a> suggested by Sobrique is a much better answer. And an XPath approach based on XML::LibXML would be similar.</p>\n\n<p>Whenever you are extracting data from an XML document, XPath is likely to be the best solution. If you're dealing with XML, then you really need to have XPath in your toolkit.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1460129840, "last_edit_date": 1495541262, "creation_date": 1460126989, "answer_id": 36502681, "question_id": 36496113, "link": "https://stackoverflow.com/questions/36496113/how-to-get-a-value-from-deep-within-a-hash-in-perl/36502681#36502681", "title": "How to get a value from deep within a hash in perl", "body": "<p>You've an answer how to do this with XML::Simple already. But I'd suggest not, and use <code>XML::Twig</code> instead, which is MUCH less nasty. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\">Why is XML::Simple &quot;Discouraged&quot;?</a></p>\n\n<p>I'm going to assume that your XML looks a bit like this:</p>\n\n<pre><code>&lt;opt Timeout=\"5\"&gt;\n  &lt;Roots&gt;\n    &lt;Root Action=\"Reject\" Interval=\"Order\" Level=\"Indeterminate\" Name=\"Sales\"&gt;\n      &lt;Profiles&gt;\n        &lt;Profile Age=\"50\" Name=\"Bill\" Status=\"Active\" /&gt;\n        &lt;Profile Age=\"24\" Name=\"Bob\" Status=\"Inactive\" /&gt;\n      &lt;/Profiles&gt;\n    &lt;/Root&gt;\n  &lt;/Roots&gt;\n&lt;/opt&gt;\n</code></pre>\n\n<p>I can't tell for sure, because that's the joy of <code>XML::Simple</code>. But:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse XML::Twig;\n\nmy $twig = XML::Twig -&gt; new -&gt; parsefile ( $configfile );\n\nprint $twig -&gt; get_xpath ( '//Profile[@Name=\"Bob\"]',0 ) -&gt; att('Status')\n</code></pre>\n\n<p>This uses <code>xpath</code> to locate the attribute you desire - <code>//</code> denotes a 'anywhere in tree' search. </p>\n\n<p>But you could instead:</p>\n\n<pre><code>print $twig -&gt; get_xpath ( '/opt/Roots/Root/Profiles/Profile[@Name=\"Bob\"]',0 ) -&gt; att('Status')\n</code></pre>\n\n<p>Much <em>simpler</em> wouldn't you agree? </p>\n\n<p>Or iterate all the 'Profiles':</p>\n\n<pre><code>foreach my $profile ( $twig -&gt; get_xpath ('//Profile' ) ) {\n    print $profile -&gt; att('Name'), \" =&gt; \", $profile -&gt; att('Status'),\"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 575, "user_id": 2413767, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9380d059e6b721c893f451abd941fcd1?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/2413767/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1460129840, "creation_date": 1460107694, "last_edit_date": 1460128922, "question_id": 36496113, "link": "https://stackoverflow.com/questions/36496113/how-to-get-a-value-from-deep-within-a-hash-in-perl", "title": "How to get a value from deep within a hash in perl", "body": "<p>I'm reading in an xml file, </p>\n\n<pre><code>$myxml = XMLin(\"$configfile\");\n</code></pre>\n\n<p>And when I print it using Dumper (print Dumper($myxml);) I get this...</p>\n\n<pre><code>$VAR1 = {\n          'Timeout' =&gt; 5,\n          'Roots' =&gt; {\n                        'Root' =&gt; [\n                                     {\n                                       'Name' =&gt; 'Sales',\n                                       'Level' =&gt; 'Indeterminate',\n                                       'Profiles' =&gt; {\n                                                    'Profile' =&gt; [\n                                                                {\n                                                                  'Name' =&gt; 'Bill',\n                                                                  'Age' =&gt; '50',\n                                                                  'Status' =&gt; Active\n                                                                },\n                                                                {\n                                                                  'Name' =&gt; 'Bob',\n                                                                  'Age' =&gt; '24',\n                                                                  'Status' =&gt; Inactive\n                                                                }\n                                                              ]\n                                                  },\n                                       'Interval' =&gt; 'Order',\n                                       'Action' =&gt; 'Reject'\n                                     },\n                                     {\n                                      'Name' =&gt; 'User',\n                                      'Level' =&gt; 'Indeterminate',\n                                      'Profiles' =&gt; {\n                                                   'Profile' =&gt; [\n                                                            {\n                                                              'Name' =&gt; 'User',\n                                                              'Action' =&gt; 'Reject',\n                                                              'User' =&gt; 'acount'\n                                                             }, \n                                                            {\n                                                              'Name' =&gt; 'Admin',\n                                                              'Action' =&gt; 'Accept',\n                                                              'User' =&gt; 'acount'\n                                                             },                                                                   \n                                   ]\n                      }\n        };    \n</code></pre>\n\n<p>I'd like to read this hash and get the value of all inactive 'Status' or or get 'Bob's Status.. </p>\n\n<pre><code>{\n'Name' =&gt; 'Bob',\n'Age' =&gt; '24',\n'Status' =&gt; Inactive\n}\n</code></pre>\n\n<h1>Start Edit:</h1>\n\n<p>So to get profile information for one person.. </p>\n\n<pre><code>Dumper($myxml-&gt;{'Roots'}-&gt;{'Root'}[0]{'Profiles'}{'Profile'}[2]); \n</code></pre>\n\n<p>For example to get the Status for Bob</p>\n\n<pre><code>if ($myxml-&gt;{'Roots'}-&gt;{'Root'}[0]{'Profiles'}{'Profile'}[1]{'Name'} eq \"Bob\") {\n$status = $myxml-&gt;{'Roots'}-&gt;{'Root'}[0]{'Profiles'}{'Profile'}[1]{'Status'};\n}\n</code></pre>\n\n<p>However, how do I loop through this xml so it will keep checking {'Roots'}->{'Root'} and {'Profiles'}{'Profile'} in case Bob is not in location [0] and [1]. A double foreach loop?</p>\n\n<h1>End Edit</h1>\n\n<p>I've included an example of the xml..</p>\n\n<pre><code>&lt;Root Name=\"Sales\" Level=\"Indeterminate\" Profile=\"Order\" Interval=\"Order\" Action=\"Reject\"&gt;\n  &lt;Profiles&gt;\n    &lt;Profile Name=\"Bill\" Age=\"50\" Status=Active /&gt;\n    &lt;Profile Name=\"Bob\" Age=\"24\" Status=InActive /&gt;\n    &lt;Profile Name=\"Ben\" Age=\"45\" Status=Active /&gt;\n  &lt;/Profiles&gt;\n&lt;/Root&gt;\n</code></pre>\n\n<p>Which produces this:</p>\n\n<pre><code>$VAR1 = {\n      'Name' =&gt; 'Sales',\n      'Type' =&gt; 'Indeterminate',\n      'Profiles' =&gt; {\n                   'Profile' =&gt; [\n\n                               {\n                                 'Name' =&gt; 'Bill',\n                                 'Age' =&gt; '50',\n                                 'Status' =&gt; Active\n                               },\n                               {\n                                 'Name' =&gt; 'Bob',\n                                 'Age' =&gt; '24',\n                                 'Status' =&gt; InActive\n                               },\n                               {\n                                 'Name' =&gt; 'Ben',\n                                 'Age' =&gt; '45',\n                                 'Status' =&gt; Active\n                               }\n                             ]\n                 },\n      'Interval' =&gt; 'Order',\n      'Action' =&gt; 'Reject'\n    };\n</code></pre>\n\n<p>Thanks,</p>\n\n<p>John. </p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 1, "creation_date": 1460104958, "post_id": 36493714, "comment_id": 60598205, "body": "It should be perl, because of syntax: <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\"><code>-d:MOD[=bar,baz]</code></a>"}], "tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 2, "last_activity_date": 1460117632, "last_edit_date": 1460117632, "creation_date": 1460099760, "answer_id": 36493714, "question_id": 36493309, "link": "https://stackoverflow.com/questions/36493309/how-to-escape-sign-at-command-line/36493714#36493714", "title": "How to escape &#39;,&#39; sign at command line?", "body": "<p><s>It's got to be your module splitting on the comma, not <code>perl</code> or the shell.</s>  Running the following under <code>bash</code>, I get only a single argument in <code>@ARGV</code>:</p>\n\n<pre><code>$ perl -w -E 'say join \"\\n\", (\"---\", @ARGV, \"---\")' 's;e [\\@DB::stack\\,\\@DB::goto_frames]'\n---\ns;e [\\@DB::stack\\,\\@DB::goto_frames]\n---\n</code></pre>\n\n<hr>\n\n<p><strong>Edit:</strong></p>\n\n<p>I stand corrected.  It is being split on commas by <code>perl</code>, presumably to allow passing multiple arguments to a module, as I proved to myself by creating a module at <code>./Devel/DbInteract.pm</code> containing:</p>\n\n<pre><code>package Devel::DbInteract;\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nsub import {\n  say 'Received ' . scalar @_ . ' params:';\n  say join \"\\n\", @_;\n} \n\n1;\n</code></pre>\n\n<p>and running the command:</p>\n\n<pre><code>$ PERL5LIB=. perl -d:DbInteract='s;e [\\@DB::stack,\\@DB::goto_frames]' -e ''\nReceived 3 params:\nDevel::DbInteract\ns;e [\\@DB::stack\n\\@DB::goto_frames]\n</code></pre>\n\n<p>Judging by the source linked in the asker's answer, there does not appear to be any provision for escaping values or any other way to prevent this splitting.  Your options, then, would be to either work around it by <code>join</code>ing the params back together or submitting a patch to the <code>perl</code> source to add an allowance for escaping.</p>\n"}, {"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1460105093, "last_edit_date": 1460105093, "creation_date": 1460104650, "answer_id": 36495121, "question_id": 36493309, "link": "https://stackoverflow.com/questions/36493309/how-to-escape-sign-at-command-line/36495121#36495121", "title": "How to escape &#39;,&#39; sign at command line?", "body": "<p>Perl does not care about escaping: <a href=\"https://github.com/Perl/perl5/blob/blead/perl.c#L3240-L3264\" rel=\"nofollow\">https://github.com/Perl/perl5/blob/blead/perl.c#L3240-L3264</a></p>\n\n<p>the <code>-d</code> flag just add next as zero line number into the script:</p>\n\n<pre><code>use Devel::DbInteract split(/,/,q{s;e [\\@DB::stack\\,\\@DB::goto_frames]});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1460184183, "creation_date": 1460184183, "answer_id": 36513615, "question_id": 36493309, "link": "https://stackoverflow.com/questions/36493309/how-to-escape-sign-at-command-line/36513615#36513615", "title": "How to escape &#39;,&#39; sign at command line?", "body": "<p>Some people advice me simple approach than patching perl. Just to use <code>=&gt;</code> in my case:</p>\n\n<pre><code>`perl -d:DebugHooks::DbInteract='s;e [\\@DB::stack =&gt; \\@DB::goto_frames]' -e '1'`\n</code></pre>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1460184183, "creation_date": 1460098256, "last_edit_date": 1460105028, "question_id": 36493309, "link": "https://stackoverflow.com/questions/36493309/how-to-escape-sign-at-command-line", "title": "How to escape &#39;,&#39; sign at command line?", "body": "<p>When I do in perl script (<a href=\"https://github.com/KES777/Devel-DebugHooks\" rel=\"nofollow\">source</a>):</p>\n\n<pre><code>`perl -d:DebugHooks::DbInteract='s;e [\\@DB::stack\\,\\@DB::goto_frames]' -e '1'`\n</code></pre>\n\n<p>The module gets two arguments:</p>\n\n<pre><code>s;e [\\@DB::goto_frames\\\n\\@DB::stack];\n</code></pre>\n\n<p>But I want to get only one:</p>\n\n<pre><code>s;e [\\@DB::goto_frames,\\@DB::stack];\n</code></pre>\n\n<p>How to escape ',' sign?</p>\n"}, {"tags": ["perl", "logging", "server", "internal-server-error"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1460102670, "post_id": 36492933, "comment_id": 60596889, "body": "It sounds like what you are trying to build is a monitoring tool. If you talk about a log file, it sounds like each call produces one line of log, but that is add odds with the rest of what you say. If you want to log and count, consider using a database instead of a flat text file. Sqlite comes to mind here. We also don&#39;t know what kind of <i>dashboard</i> you are talking about. As it stands, your question is off-topic on SO because it&#39;s too broad and asks for a software recommendation."}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 3751258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0e6f9568b970befe5ab976597827df4?s=128&d=identicon&r=PG&f=1", "display_name": "Er Parthu", "link": "https://stackoverflow.com/users/3751258/er-parthu"}, "is_accepted": true, "score": 0, "last_activity_date": 1460550542, "creation_date": 1460550542, "answer_id": 36598410, "question_id": 36492933, "link": "https://stackoverflow.com/questions/36492933/tool-to-handle-the-errors-in-the-error-log-file/36598410#36598410", "title": "Tool to handle the errors in the error log file", "body": "<p>Ideally you can make your own subroutine to store the logs in to the .log file.\nThe default structure for the log file is as following:</p>\n\n<p>[Timestamp]:Error/Warning/Info: String to define the issue</p>\n\n<p>You can format the lines using printf.</p>\n"}], "owner": {"reputation": 49, "user_id": 2686137, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8280c9fccb420337a941cfcbc9b6ada9?s=128&d=identicon&r=PG", "display_name": "Balaji Karthick", "link": "https://stackoverflow.com/users/2686137/balaji-karthick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 36598410, "answer_count": 1, "score": 0, "last_activity_date": 1460550542, "creation_date": 1460096710, "last_edit_date": 1460112600, "question_id": 36492933, "link": "https://stackoverflow.com/questions/36492933/tool-to-handle-the-errors-in-the-error-log-file", "title": "Tool to handle the errors in the error log file", "body": "<p>We are developing a script in perl which when gives the url and the webserver to hit. It hits the url given in the webserver and gives the html content of the page.</p>\n\n<p>For example :</p>\n\n<pre><code>perl scribehtml.pl --server servername --port portnumber --url /home/firstpage/index.php\n</code></pre>\n\n<p>This returns the entire html code of the page.</p>\n\n<p>Now we are grepping the errors from the html code and write in a text file. Say when we see a text like 'Internal server error' we will put the entire html code into the text file.</p>\n\n<p>There by we are going to have a error.txt where all the errors for different urls will be stored when we execute the script.</p>\n\n<p>Now my Questions are :</p>\n\n<ol>\n<li><p>How to make the error.txt into some log file say error.log and what are things i need to do to make a proper structure log file.</p></li>\n<li><p>Is there any tool in which if we specify the log file it will parse the error in it and display the count of occurrence of each error in the log file in the dashboard.</p></li>\n</ol>\n\n<p>As for us now I m storing the list of around 500 urls in a text file and parsing the it one by one and executing so there by i am getting error for the urls which are failing and I m writing those errors in the text file error.txt</p>\n"}, {"tags": ["perl", "upload", "wav", "multipart", "rfc"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1460115822, "post_id": 36492835, "comment_id": 60604986, "body": "<a href=\"http://stackoverflow.com/questions/21273071/how-does-rfc-2854-obsolete-rfc-1867\" title=\"how does rfc 2854 obsolete rfc 1867\">stackoverflow.com/questions/21273071/&hellip;</a> is worth reading"}, {"owner": {"reputation": 13, "user_id": 4604558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e020f54e47d33beff970b3f107df5dcc?s=128&d=identicon&r=PG&f=1", "display_name": "B-Dawg", "link": "https://stackoverflow.com/users/4604558/b-dawg"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1460337043, "post_id": 36492835, "comment_id": 60679096, "body": "don&#39;t think that helps. we have no control over the server that wants the RFC 1867 upload"}], "answers": [{"comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1460115672, "post_id": 36498238, "comment_id": 60604903, "body": "&quot;which is how all HTTP requests organize their data&quot; \u2014 that isn&#39;t true, that&#39;s just how the two standard request encodings you can trigger from a standard HTML form organise their data."}, {"owner": {"reputation": 13, "user_id": 4604558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e020f54e47d33beff970b3f107df5dcc?s=128&d=identicon&r=PG&f=1", "display_name": "B-Dawg", "link": "https://stackoverflow.com/users/4604558/b-dawg"}, "edited": false, "score": 0, "creation_date": 1460337244, "post_id": 36498238, "comment_id": 60679134, "body": "Thanks, that helps a lot. My issue was simply that the Content section wasn&#39;t in the right format."}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 2, "last_activity_date": 1460195815, "last_edit_date": 1460195815, "creation_date": 1460114140, "answer_id": 36498238, "question_id": 36492835, "link": "https://stackoverflow.com/questions/36492835/rfc-1867-file-upload-from-perl/36498238#36498238", "title": "RFC 1867 file upload from perl", "body": "<p>You didn't post the output of:</p>\n\n<pre><code>print $req-&gt;as_string;\n</code></pre>\n\n<p>One thing you are doing wrong is you are not assembling your data into key/value pairs, which is how all HTTP requests organize their data.</p>\n\n<blockquote>\n  <p>Also the Content_Length is 0</p>\n</blockquote>\n\n<p>That's because all the data is being used as the key part of a key/value pair, thus there is no value, and no value has a Content-Length of 0. </p>\n\n<p>Nevertheless, the server should not be receiving the header:</p>\n\n<pre><code>Content_Type = \"form-data\"\n</code></pre>\n\n<p>For the raw request, I get:</p>\n\n<pre><code>POST http://thehost.com\nConnection: Keep-Alive\nAccept-Encoding: wav\nAccept-Language: en-us\nHost: www.mydomain.com\nReferer: hxxp://www.mydomain.com/some.php3\nUser-Agent: Mozilla/4.0\nContent-Length: 82\nContent-Type: multipart/form-data; boundary=xYzZY\n\n--xYzZY\nContent-Disposition: form-data; name=\"mydata\"\n\nhello world\n--xYzZY--\n</code></pre>\n\n<p>As you can clearly see, the Content-Type header is <code>multipart/form-data</code>.  That's because:</p>\n\n<blockquote>\n  <p>You trigger this content format by specifying a content type of\n  'form-data' as one of the request headers.</p>\n</blockquote>\n\n<p>In other words, the perl module creates the header <code>Content-Type: multipart/form-data</code> in the actual request.</p>\n\n<p>Here's the code I used:</p>\n\n<pre><code>use strict;\nuse warnings; \nuse 5.020;\nuse Data::Dumper;\nuse HTTP::Message;\nuse HTTP::Request::Common;\n\nmy $rawdata = \"hello world\";\nmy $url = \"http://thehost.com\";\n\nmy $requ = POST $url,\n   Referer =&gt; 'hxxp://www.mydomain.com/some.php3', \n   Accept_Language =&gt; 'en-us',\n   Content_Type =&gt; 'form-data',\n   Accept_Encoding =&gt; 'wav',\n   User_Agent =&gt; 'Mozilla/4.0',\n   Host =&gt; 'www.mydomain.com',\n   Connection =&gt; 'Keep-Alive',\n   Content =&gt; [ mydata =&gt; $rawdata ];\n\nsay $requ-&gt;as_string;\n</code></pre>\n\n<p>The following shows the difference between specifying a key/value pair v. just specifying a value:</p>\n\n<pre><code>use strict;\nuse warnings; \nuse 5.020;\nuse Data::Dumper;\nuse HTTP::Message;\nuse HTTP::Request::Common;\n\nmy $rawdata = \"hello world\";\nmy $url = \"http://thehost.com\";\n\nmy $requ = POST $url,\n   Referer =&gt; 'hxxp://www.mydomain.com/some.php3', \n   Accept_Language =&gt; 'en-us',\n   Content_Type =&gt; 'form-data',\n   Accept_Encoding =&gt; 'wav',\n   User_Agent =&gt; 'Mozilla/4.0',\n   Host =&gt; 'www.mydomain.com',\n   Connection =&gt; 'Keep-Alive',\n   Content =&gt; [ \n       mykey =&gt; 'myValue',\n       $rawdata, \n   ];\n\n\nsay $requ-&gt;as_string;\n\n--output:--\nPOST http://thehost.com\nConnection: Keep-Alive\nAccept-Encoding: wav\nAccept-Language: en-us\nHost: www.mydomain.com\nReferer: hxxp://www.mydomain.com/some.php3\nUser-Agent: Mozilla/4.0\nContent-Length: 142\nContent-Type: multipart/form-data; boundary=xYzZY\n\n--xYzZY\nContent-Disposition: form-data; name=\"mykey\"  #&lt;===HERE\n\nmyValue  #&lt;======AND HERE\n--xYzZY\nContent-Disposition: form-data; name=\"hello world\"  #&lt;===COMPARED TO\n\n        #&lt;======COMPARED TO\n--xYzZY--\n</code></pre>\n\n<p>The bare value ends up being used as the key, and because there is no value the Content-Length ends up being 0.</p>\n\n<p>According to the <a href=\"http://search.cpan.org/~ether/HTTP-Message-6.11/lib/HTTP/Request/Common.pm\" rel=\"nofollow\">docs</a>, here is how you should specify a file upload:</p>\n\n<pre><code>use strict;\nuse warnings; \nuse 5.020;\nuse Data::Dumper;\nuse HTTP::Message;\nuse HTTP::Request::Common;\n\nmy $rawdata = \"hello world\";\nmy $url = \"http://thehost.com\";\n\nmy $requ = POST $url,\n   Referer =&gt; 'hxxp://www.mydomain.com/some.php3', \n   Accept_Language =&gt; 'en-us',\n   Content_Type =&gt; 'form-data',\n   Accept_Encoding =&gt; 'wav',\n   User_Agent =&gt; 'Mozilla/4.0',\n   Host =&gt; 'www.mydomain.com',\n   Connection =&gt; 'Keep-Alive',\n   Content =&gt; [ \n       mykey =&gt; 'myValue',         #some other key/value pair\n       cool_sounds =&gt; [undef,      #file upload key/value pair\n                       'myfile.wav', \n                       Content =&gt; $rawdata\n                      ] \n\n   ];\n\n\nsay $requ-&gt;as_string;\n\n--output:--\nPOST http://thehost.com\nConnection: Keep-Alive\nAccept-Encoding: wav\nAccept-Language: en-us\nHost: www.mydomain.com\nReferer: hxxp://www.mydomain.com/some.php3\nUser-Agent: Mozilla/4.0\nContent-Length: 176\nContent-Type: multipart/form-data; boundary=xYzZY\n\n--xYzZY\nContent-Disposition: form-data; name=\"mykey\"\n\nmyValue\n--xYzZY\nContent-Disposition: form-data; name=\"cool_sounds\"; filename=\"myfile.wav\"\n\nhello world\n--xYzZY--\n</code></pre>\n\n<p>If you need to set the Content-Type for the file section, you can do it like this:</p>\n\n<pre><code>use strict;\nuse warnings; \nuse 5.020;\nuse Data::Dumper;\nuse HTTP::Message;\nuse HTTP::Request::Common;\n\nmy $rawdata = \"hello world\";\nmy $url = \"http://thehost.com\";\n\nmy $requ = POST $url,\n   Referer =&gt; 'hxxp://www.mydomain.com/some.php3', \n   Accept_Language =&gt; 'en-us',\n   Content_Type =&gt; 'form-data',\n   Accept_Encoding =&gt; 'wav',\n   User_Agent =&gt; 'Mozilla/4.0',\n   Host =&gt; 'www.mydomain.com',\n   Connection =&gt; 'Keep-Alive',\n   Content =&gt; [ \n       mykey =&gt; 'myValue',         #some other key/value pair\n       cool_sounds =&gt; [undef,      #file upload key/value pair\n                       'myfile.wav', \n                       'Content-Type' =&gt; 'audio/x-wav', \n                       Content =&gt; $rawdata\n                      ]  #=&gt;If one of the values in the $form_ref is an array reference...\n\n   ];\n\n\nsay $requ-&gt;as_string;\n\n--output:--\nOST http://thehost.com\nConnection: Keep-Alive\nAccept-Encoding: wav\nAccept-Language: en-us\nHost: www.mydomain.com\nReferer: hxxp://www.mydomain.com/some.php3\nUser-Agent: Mozilla/4.0\nContent-Length: 203\nContent-Type: multipart/form-data; boundary=xYzZY\n\n--xYzZY\nContent-Disposition: form-data; name=\"mykey\"\n\nmyValue\n--xYzZY\nContent-Disposition: form-data; name=\"cool_sounds\"; filename=\"myfile.wav\"\nContent-Type: audio/x-wav\n\nhello world\n--xYzZY--\n</code></pre>\n\n<p>And, if you need to set the Content-Disposition of the file section to something else:</p>\n\n<pre><code>use strict;\nuse warnings; \nuse 5.020;\nuse Data::Dumper;\nuse HTTP::Message;\nuse HTTP::Request::Common;\n\nmy $rawdata = \"hello world\";\nmy $url = \"http://thehost.com\";\n\nmy $requ = POST $url,\n   Referer =&gt; 'hxxp://www.mydomain.com/some.php3', \n   Accept_Language =&gt; 'en-us',\n   Content_Type =&gt; 'form-data',\n   Accept_Encoding =&gt; 'wav',\n   User_Agent =&gt; 'Mozilla/4.0',\n   Host =&gt; 'www.mydomain.com',\n   Connection =&gt; 'Keep-Alive',\n   Content =&gt; [ \n       mykey =&gt; 'myValue',         #some other key/value pair\n       cool_sounds =&gt; [undef,      #file upload key/value pair\n                       'myfile.wav', \n                      'Content-Type' =&gt; 'audio/x-wav', \n                      'Content-Disposition' =&gt; 'file',\n                       Content =&gt; $rawdata\n                      ]\n\n   ];\n\n\nsay $requ-&gt;as_string;\n\n--output:--\nPOST http://thehost.com\nConnection: Keep-Alive\nAccept-Encoding: wav\nAccept-Language: en-us\nHost: www.mydomain.com\nReferer: hxxp://www.mydomain.com/some.php3\nUser-Agent: Mozilla/4.0\nContent-Length: 155\nContent-Type: multipart/form-data; boundary=xYzZY\n\n--xYzZY\nContent-Disposition: form-data; name=\"mykey\"\n\nmyValue\n--xYzZY\nContent-Disposition: file\nContent-Type: audio/x-wav\n\nhello world\n--xYzZY--\n</code></pre>\n\n<p>Note that in this case there's no name attribute for the file section.</p>\n\n<p>By the way, what made you think that not posting your <code>use statements</code> was helpful?  Don't do that.</p>\n"}], "owner": {"reputation": 13, "user_id": 4604558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e020f54e47d33beff970b3f107df5dcc?s=128&d=identicon&r=PG&f=1", "display_name": "B-Dawg", "link": "https://stackoverflow.com/users/4604558/b-dawg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 1, "accepted_answer_id": 36498238, "answer_count": 1, "score": 1, "last_activity_date": 1460195815, "creation_date": 1460096294, "question_id": 36492835, "link": "https://stackoverflow.com/questions/36492835/rfc-1867-file-upload-from-perl", "title": "RFC 1867 file upload from perl", "body": "<p>I need do an RFC 1867 upload to a server of the raw data (without riff headers) of a wav file. I have written a perl script to do this. Looks like this:</p>\n\n<pre><code>my $wav = new Audio::Wav;\nmy $read = $wav-&gt;read($wavtoupload);\nmy $rawdata = $read-&gt;read_raw($read-&gt;length()); #raw data w/o riff\n\nmy $url = \"http://thehost.com\";\nmy $req = HTTP::Request-&gt;new();\n$req = POST $url,\n   Referer =&gt; 'hxxp://www.mydomain.com/some.php3', \n   Accept_Language =&gt; 'en-us',\n   Content_Type =&gt; 'form-data',\n   Accept_Encoding =&gt; 'wav',\n   User_Agent =&gt; 'Mozilla/4.0',\n   Host =&gt; 'www.mydomain.com',\n   Connection =&gt; 'Keep-Alive',\n   Content =&gt; [ $rawdata ];\nprint $req-&gt;as_string;\n\nmy $ua = LWP::UserAgent-&gt;new;\nmy $resp = $ua-&gt;request($req);\n\nif ($resp-&gt;is_success) {\n   #...\n}\n</code></pre>\n\n<p>According to <a href=\"http://search.cpan.org/~ether/HTTP-Message-6.11/lib/HTTP/Request/Common.pm\" rel=\"nofollow\">http://search.cpan.org/~ether/HTTP-Message-6.11/lib/HTTP/Request/Common.pm</a>:</p>\n\n<blockquote>\n  <p>\"The POST method also supports the <em>multipart/form-data</em> content used for Form-based File Upload as specified in RFC 1867. You trigger this content format by specifying a content type of 'form-data' as one of the request headers.\"</p>\n</blockquote>\n\n<p>However, the server is receiving Content_Type = \"form-data\" is doesn't like it because it expects \"multipart/form-data\". Also the Content_Length is 0, and the body isn't being uploaded.</p>\n\n<p>What am I doing wrong? Thanks</p>\n"}, {"tags": ["regex", "git", "perl"], "comments": [{"owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "edited": false, "score": 1, "creation_date": 1460085428, "post_id": 36490700, "comment_id": 60590188, "body": "Is there possibly a tab character there?  When I run those two lines locally (ensuring space characters in $string) it works.  i.e. I get &quot;-5 2-&quot;"}, {"owner": {"reputation": 848, "user_id": 5941564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1916422a9c9c1aef25c1c3e886725781?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle A", "link": "https://stackoverflow.com/users/5941564/kyle-a"}, "edited": false, "score": 1, "creation_date": 1460085466, "post_id": 36490700, "comment_id": 60590196, "body": "Are the numbers optional or should they definitely be there? If they should always be there, then try using <code>+</code> instead of <code>*</code>, like this: <code>&#47;([0-9]+) +([0-9]+) +[a-z]+&#47;</code>. There are fewer possible ways to match with <code>+</code>."}, {"owner": {"reputation": 848, "user_id": 5941564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1916422a9c9c1aef25c1c3e886725781?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle A", "link": "https://stackoverflow.com/users/5941564/kyle-a"}, "reply_to_user": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "edited": false, "score": 0, "creation_date": 1460085552, "post_id": 36490700, "comment_id": 60590217, "body": "@Marty, That&#39;s a really good idea to check. Amending my suggestion: <code>&#47;([0-9]+)[ \\t]+([0-9]+)[ \\t]+[a-z]+&#47;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5552734"}, "edited": false, "score": 0, "creation_date": 1460085635, "post_id": 36490700, "comment_id": 60590237, "body": "If there was a tab character how could I account for that? And yes the numbers are always there, but using + doesn&#39;t seem to give me the right results either."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5552734"}, "edited": false, "score": 1, "creation_date": 1460085745, "post_id": 36490700, "comment_id": 60590267, "body": "Yes, It was a tab character all along. Thank you both for the help!"}, {"owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "reply_to_user": {"reputation": 848, "user_id": 5941564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1916422a9c9c1aef25c1c3e886725781?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle A", "link": "https://stackoverflow.com/users/5941564/kyle-a"}, "edited": false, "score": 0, "creation_date": 1460085921, "post_id": 36490700, "comment_id": 60590302, "body": "@Kyle - funny you should say that - I thought your advice was more relevant.  Perhaps combine both - note that \\s is equivalent to [\\ \\t\\r\\n\\f] which would cover tabs.  Using /x is always a big help.  Therefore we have /(\\d+) \\s+ (\\d+) [a-z]+/x"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "edited": false, "score": 1, "creation_date": 1460086841, "post_id": 36490700, "comment_id": 60590546, "body": "@Marty: you probably need an extra <code>\\s+</code> in there, as in: <code>&#47;(\\d+) \\s+ (\\d+) \\s+ \\w+&#47;x</code> (using <code>\\w</code> for &#39;word characters \u2014 upper and lower case, etc)."}], "answers": [{"tags": [], "owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "is_accepted": false, "score": 5, "last_activity_date": 1460086858, "creation_date": 1460086858, "answer_id": 36491116, "question_id": 36490700, "link": "https://stackoverflow.com/questions/36490700/using-regular-expressions-to-parse-a-line-in-perl/36491116#36491116", "title": "Using regular expressions to parse a line in Perl", "body": "<p>As Kyle pointed out in the comments - if the digits <em>have</em> to be there then use <code>+</code> instead of <code>*</code> to reduce the number of possible matches the RE engine has to search through.  Also, since <code>\\s</code> matches \"whitespace\" (defined <a href=\"http://perldoc.perl.org/perlrequick.html\">here</a> as <code>[\\ \\t\\r\\n\\f]</code>), you can cover the possibillity of tab characters throwing the match off by using it instead of a literal space character.  </p>\n\n<p>Using <code>\\s</code> to match whitespace also frees up the literal space character to assist with formatting in the regex itself.  To do that, use 'extended mode' regexs by adding a <code>/x</code> on the end of the specification.</p>\n\n<p>Finally, as a general rule, test for a successful match before assigning to variables like so;</p>\n\n<pre><code>my $string = \"5    2    gitc\";\nif ($string =~ /(\\d+) \\s+ (\\d+) [a-z]+/x)  {\n    my ($added, $removed) = ($1, $2);\n}\nelse\n    print \"Failed match\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1460122340, "creation_date": 1460122340, "answer_id": 36500941, "question_id": 36490700, "link": "https://stackoverflow.com/questions/36490700/using-regular-expressions-to-parse-a-line-in-perl/36500941#36500941", "title": "Using regular expressions to parse a line in Perl", "body": "<p>Why not just</p>\n\n<pre><code>my ($added, $removed) = split ' ', $string;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5552734"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1460122340, "creation_date": 1460083727, "question_id": 36490700, "link": "https://stackoverflow.com/questions/36490700/using-regular-expressions-to-parse-a-line-in-perl", "title": "Using regular expressions to parse a line in Perl", "body": "<p>So I'm making a program that stats git repositories but I'm having trouble getting a certain regular expression to work. Basically, I have a string that looks like this:</p>\n\n<pre><code>my $string = \"5    2    gitc\"\n</code></pre>\n\n<p>and a regular expression that looks like this:</p>\n\n<pre><code>my ($added, $removed) = $string =~ /([0-9]*) *([0-9]*) *[a-z]*/;\n</code></pre>\n\n<p>My goal is to store the first number as $added and the second number as $removed, but for some reason no value is being stored in $removed. So if I use the print statement:</p>\n\n<pre><code>print \"-$added $removed-\\n\";\n</code></pre>\n\n<p>the output looks like:</p>\n\n<pre><code>-5 -\n</code></pre>\n\n<p>when I test that regular expression on regex 101 my capture groups appear to work fine so I'm kind of stumped as to why it doesn't work. Can anyone see a problem with my regular expression?</p>\n"}, {"tags": ["perl", "x11", "gtk3"], "comments": [{"owner": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "edited": false, "score": 0, "creation_date": 1460070189, "post_id": 36486685, "comment_id": 60586299, "body": "If anyone has tried this in another language, I&#39;d like to know if it worked or didn&#39;t."}], "answers": [{"tags": [], "owner": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "is_accepted": true, "score": 1, "last_activity_date": 1460486831, "creation_date": 1460486831, "answer_id": 36581589, "question_id": 36486685, "link": "https://stackoverflow.com/questions/36486685/gtk3-crash-when-opening-a-popup-menu-on-alternate-x11-display/36581589#36581589", "title": "Gtk3 crash when opening a popup menu on alternate X11 display", "body": "<p>It appears to be a bug in that version of Gtk.</p>\n\n<p>I was able to test it on a system with Gtk 3.18 and it works fine.  At least I know it's not a bug in the Perl code.</p>\n"}], "owner": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 2, "accepted_answer_id": 36581589, "answer_count": 1, "score": 3, "last_activity_date": 1460486831, "creation_date": 1460061284, "question_id": 36486685, "link": "https://stackoverflow.com/questions/36486685/gtk3-crash-when-opening-a-popup-menu-on-alternate-x11-display", "title": "Gtk3 crash when opening a popup menu on alternate X11 display", "body": "<p>I have an app that I can move between X11 displays, but when I'm on a display other than where I started, attempting to open a popup menu causes a crash.  Menus in the menubar work fine, it's just the popup that doesn't.</p>\n\n<pre><code>(popuptest.pl:17147): Gdk-ERROR **: The program 'popuptest.pl' received an X Window System error.\nThis probably reflects a bug in the program.\nThe error was 'BadWindow (invalid Window parameter)'.\n  (Details: serial 355 error_code 3 request_code 131 minor_code 51)\n  (Note to programmers: normally, X errors are reported asynchronously;\n   that is, you will receive the error a while after causing it.\n   To debug your program, run it with the GDK_SYNCHRONIZE environment\n   variable to change this behavior. You can then get a meaningful\n   backtrace from your debugger if you break on the gdk_x_error() function.)\nTrace/breakpoint trap (core dumped)\n</code></pre>\n\n<p>I created a simple test case that reproduces the problem:</p>\n\n<ol>\n<li>Start a secondary display (i.e. another machine, <code>Xvnc :1</code>, etc.)</li>\n<li>Start a viewer for the 2nd display (e.g. <code>vncviewer :1</code>)</li>\n<li>Run the code below</li>\n<li>Right click on the button and see the popup menu work correctly</li>\n<li>Left click on the button so the window moves to the other display</li>\n<li>On the other display, right click on the button and watch the crash</li>\n</ol>\n\n<p>Sample code:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse Glib qw/TRUE FALSE/;\nuse Gtk3 -init;\nmy $win = Gtk3::Window-&gt;new;\n$win-&gt;signal_connect(destroy =&gt; sub {Gtk3::main_quit});\nmy $btn = Gtk3::Button-&gt;new_with_label(\"move to :1\");\n$btn-&gt;signal_connect(clicked =&gt; sub {\n        $win-&gt;set_screen(Gtk3::Gdk::Display::open(\":1\")-&gt;get_screen(0));\n});\nmy $menu;\n$btn-&gt;signal_connect('button-press-event' =&gt; sub {\n        my ($widget, $event) = @_;\n        return FALSE unless $event-&gt;button == 3;\n        $menu = Gtk3::Menu-&gt;new;\n        $menu-&gt;attach(Gtk3::MenuItem-&gt;new_with_label(''.localtime), 0, 1, 0, 1);\n        $menu-&gt;show_all;\n        $menu-&gt;popup(undef, undef, undef, undef, $event-&gt;button, $event-&gt;time);\n        return TRUE;\n});\n$win-&gt;add($btn);\n$win-&gt;show_all;\nGtk3-&gt;main;\n</code></pre>\n\n<p>Versions:</p>\n\n<ul>\n<li>OS: CentOS 7.1 (Linux 3.10.0-229.el7.x86_64)</li>\n<li>Perl: 5.16.3</li>\n<li>Gtk3: 3.8.8</li>\n<li>X11: xorg 1.15.0</li>\n</ul>\n"}, {"tags": ["perl", "python-2.7", "xml-parsing"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1460060995, "post_id": 36486245, "comment_id": 60582439, "body": "Is Untangle warning you against itself the same way as <a href=\"http://p3rl.org/XML::Simple\" rel=\"nofollow noreferrer\">XML::Simple</a> is?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1460062976, "post_id": 36486245, "comment_id": 60583540, "body": "Those aren&#39;t namespaces. They&#39;re just ordinary elements (in the default namespace) with identical names"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6173739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac58d8b20ad84430cd8871fbf08f1eaa?s=128&d=identicon&r=PG&f=1", "display_name": "stimps", "link": "https://stackoverflow.com/users/6173739/stimps"}, "edited": false, "score": 0, "creation_date": 1460064290, "post_id": 36487050, "comment_id": 60584135, "body": "Is there a way to do this in one line rather than a loop through the list. Example: $config-&gt;{child}-&gt;{$instance}-&gt;{thing};"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 6173739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac58d8b20ad84430cd8871fbf08f1eaa?s=128&d=identicon&r=PG&f=1", "display_name": "stimps", "link": "https://stackoverflow.com/users/6173739/stimps"}, "edited": false, "score": 0, "creation_date": 1460066313, "post_id": 36487050, "comment_id": 60584886, "body": "No, because that can only display the details of a single <code>child</code> element. If you can&#39;t work it out yourself from there, then you must put in your question <i>exactly</i> the output you want"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1460062605, "creation_date": 1460062605, "answer_id": 36487050, "question_id": 36486245, "link": "https://stackoverflow.com/questions/36486245/how-to-parse-namespaces-using-untangle/36487050#36487050", "title": "How to parse namespaces using untangle", "body": "<p>If there are several elements with the same name at the same level in your XML document then the value of that object attribute will be a <em>list</em>. That means you can access the data in your question like this</p>\n\n<pre><code>xml = untangle.parse(xml_file)\n\nfor child in xml.root.child:\n    print \"Name:  %s\" % child['name']\n    print \"Thing: %s\" % child.thing\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6173739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac58d8b20ad84430cd8871fbf08f1eaa?s=128&d=identicon&r=PG&f=1", "display_name": "stimps", "link": "https://stackoverflow.com/users/6173739/stimps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 626, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460064208, "creation_date": 1460059870, "last_edit_date": 1460064208, "question_id": 36486245, "link": "https://stackoverflow.com/questions/36486245/how-to-parse-namespaces-using-untangle", "title": "How to parse namespaces using untangle", "body": "<p>I have been messing around in Python using the Untangle library (<a href=\"https://untangle.readthedocs.org/en/latest/#\" rel=\"nofollow\">https://untangle.readthedocs.org/en/latest/#</a>) for easier calling of XML variables. It is pretty straight forward to me except when there are multiple xml headings that share the same name (like in the example XML below). In Perl, you could use something like the sample script below to parse XML files easily. I wish to use one line like this example does to grab a certain XML variable. i.e. use the name attribute as a child. I bet Untangle does thisin Python, but I have not figured it out yet. </p>\n\n<p>Sample Perl script:</p>\n\n<pre><code>use XML::Simple;\nmy $XML = \"/my/file/path/untest.xml\";\n\nmy $config = XMLin(\"$XML\", keyattr =&gt; { child =&gt; 'name'},forcearray =&gt; ['child']);\n\nmy $instance = 'child1';\nmy $things = $config-&gt;{child}-&gt;{$instance}-&gt;{thing};\n\nprint(\"the element: $things\\n\");\n</code></pre>\n\n<p>Sample XML file:</p>\n\n<pre><code>&lt;root&gt;\n    &lt;child name=\"child1\"&gt;\n        &lt;thing&gt;1&lt;/thing&gt;\n    &lt;/child&gt;\n    &lt;child name=\"child2\"&gt;\n        &lt;thing&gt;2&lt;/thing&gt;\n    &lt;/child&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>Edit: Edited the Sample Perl Script. This should work. </p>\n"}]