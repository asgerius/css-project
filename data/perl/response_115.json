[{"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490224174, "post_id": 42964015, "comment_id": 73022739, "body": "Does this mean you could have both <code>foo</code> and <code>FOO</code> as keys in the same hash at the same time?"}, {"owner": {"reputation": 197, "user_id": 5253336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9816da99c833fc2df2b3524db2413253?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Olson", "link": "https://stackoverflow.com/users/5253336/erik-olson"}, "edited": false, "score": 0, "creation_date": 1490224806, "post_id": 42964015, "comment_id": 73022980, "body": "Yes. This is a hash of names and words. Some names are also words. So if the user provides &quot;John&quot; and &quot;john&quot; exists as well, then &quot;john&quot; is what I&#39;m after. I then use &quot;john&quot; to search the values of another hash and provide all the keys of that hash associated with &quot;john&quot; but not &quot;John&quot;."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1490226535, "post_id": 42964015, "comment_id": 73023525, "body": "Normalize the keys as you&#39;re reading them in into a search index, but it probably isn&#39;t worth it. Two hash lookups is not expensive compared to the larger expenses. Or put the file into SQLite and use SQL (this will solve a lot of problems)."}, {"owner": {"reputation": 197, "user_id": 5253336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9816da99c833fc2df2b3524db2413253?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Olson", "link": "https://stackoverflow.com/users/5253336/erik-olson"}, "edited": false, "score": 0, "creation_date": 1490226592, "post_id": 42964015, "comment_id": 73023542, "body": "Hash1 has: John - WORD1, john - WORD2. Each key in Hash1 exists as a value in Hash2. TRANSLATION1 - john, TRANSLATION2 - john, TRANSLATION3 - John. But I&#39;m culling only translations for &quot;john&quot;, not for &quot;John&quot;. Hence the need to preserve case. I hope that explains it better! I didn&#39;t know hash lookups weren&#39;t affected by hash size, so maybe my issue isn&#39;t an issue after all :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490282018, "post_id": 42964015, "comment_id": 73052041, "body": "Reopened. The OP doesn&#39;t want a hash with case-insensitive keys."}], "answers": [{"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 0, "last_activity_date": 1490223872, "creation_date": 1490223872, "answer_id": 42964277, "question_id": 42964015, "link": "https://stackoverflow.com/questions/42964015/hashes-testing-a-key/42964277#42964277", "title": "Hashes: testing a key", "body": "<p>You could use <a href=\"https://metacpan.org/pod/List::Util#first\" rel=\"nofollow noreferrer\"><code>first</code></a> from <a href=\"https://metacpan.org/pod/List::Util\" rel=\"nofollow noreferrer\">List::Util</a>. It will return the first list element where the result from the code block is a true value, or <code>undef</code> if the block never returns true.</p>\n\n<pre><code>use List::Util qw(first);\n\n$key = first { exists($hash{$_}) } lc($key), $key;\n\nif (defined($key)) {\n    # ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1490224045, "creation_date": 1490224045, "answer_id": 42964316, "question_id": 42964015, "link": "https://stackoverflow.com/questions/42964015/hashes-testing-a-key/42964316#42964316", "title": "Hashes: testing a key", "body": "<p>You could also do this:</p>\n\n<pre><code>$key = do { my $temp = lc $key; exists $hash{$temp} ? $temp \n      : ( exists $hash{$key} ? $key : undef) };\n\nif ( defined $key ) {\n    # lot of code involving $key\n}\nelse {\n    # the key doesn't exist, other code\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 5253336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9816da99c833fc2df2b3524db2413253?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Olson", "link": "https://stackoverflow.com/users/5253336/erik-olson"}, "edited": false, "score": 1, "creation_date": 1490225921, "post_id": 42964599, "comment_id": 73023336, "body": "Is using <code>exists</code> twice on a hash not a performance issue after all? I was looking for an alternative because the hash has over 250,000 entries."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 197, "user_id": 5253336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9816da99c833fc2df2b3524db2413253?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Olson", "link": "https://stackoverflow.com/users/5253336/erik-olson"}, "edited": false, "score": 1, "creation_date": 1490225969, "post_id": 42964599, "comment_id": 73023356, "body": "@Erik Olson, Hash lookups are O(1), meaning they aren&#39;t affected by the size of the hash."}, {"owner": {"reputation": 197, "user_id": 5253336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9816da99c833fc2df2b3524db2413253?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Olson", "link": "https://stackoverflow.com/users/5253336/erik-olson"}, "edited": false, "score": 0, "creation_date": 1490227150, "post_id": 42964599, "comment_id": 73023691, "body": "Two hash lookups are probably easier to read and faster to process than a tricky one-liner then. Just for my own edification, does <code>grep</code> in your example return lowercase <code>$key</code> in one step if valid or does it also check plain old <code>$key</code> every time? Thanks!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 197, "user_id": 5253336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9816da99c833fc2df2b3524db2413253?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Olson", "link": "https://stackoverflow.com/users/5253336/erik-olson"}, "edited": false, "score": 1, "creation_date": 1490227481, "post_id": 42964599, "comment_id": 73023784, "body": "I think you are trying to compare your code to mine (even though both do two hash lookups),  I actually find a trivial use of <code>grep</code> far clearer than the very unusual code structure and variable reuse you have. I would make a double-take if I saw your code (&quot;Is this actually correct?&quot;). I&#39;ve added a solution that doesn&#39;t use <code>grep</code> to my answer, but you really should start practicing using it."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1490281975, "last_edit_date": 1490281975, "creation_date": 1490225583, "answer_id": 42964599, "question_id": 42964015, "link": "https://stackoverflow.com/questions/42964015/hashes-testing-a-key/42964599#42964599", "title": "Hashes: testing a key", "body": "<pre><code>if ( my ($real_key) = grep { exists($hash{$_}) } lc($key), $key ) {\n   ...\n} else {\n   ...\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $real_key =\n     exists($hash{ lc($key) }) ? lc($key)\n   : exists($hash{ $key     }) ? $key\n   : undef;\n\nif (defined($real_key)) {\n   ...\n} else {\n   ...\n}\n</code></pre>\n\n<p>Sure, it still searches twice, but so what? You could use List::Utils's <code>first</code>, but I think replacing a hash lookup with a sub call could actually slow down the code!</p>\n"}], "owner": {"reputation": 197, "user_id": 5253336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9816da99c833fc2df2b3524db2413253?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Olson", "link": "https://stackoverflow.com/users/5253336/erik-olson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 42964599, "answer_count": 3, "score": 0, "last_activity_date": 1490281998, "creation_date": 1490222600, "last_edit_date": 1490223545, "question_id": 42964015, "link": "https://stackoverflow.com/questions/42964015/hashes-testing-a-key", "title": "Hashes: testing a key", "body": "<p>A program reads a very large dictionary-style TXT file into a hash. Sometimes, there is a lower case version of a key that is preferable. My solution below is clumsy because it searches twice even if we already know the <code>lc</code> version exists:</p>\n\n<pre><code>if ( exists $hash{ lc $key } ) {\n   $key = lc $key;\n}\nif ( exists $hash{ $key } ) {\n    # lot of code involving $key\n}\nelse {\n    # the key doesn't exist, other code\n}\n</code></pre>\n\n<p>Is there a way to avoid two <code>exists</code> tests? If <code>lc $key</code> exists I want to do the identical code to it as in the second <code>if</code> but I need to know which version, <code>lc</code> or not, of <code>$key</code> to use. I'm hoping to condense it to one <code>if-else</code> pair.</p>\n\n<p>Knowing the case of the valid key is important for the rest of the program since it is used to look up information in another hash.</p>\n"}, {"tags": ["perl", "utf-8"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 3, "creation_date": 1490218964, "post_id": 42963009, "comment_id": 73020482, "body": "I am not sure, but seems like you should try to decode the <code>$xlscontents</code> after reading from spreadsheet.. Please show some of your code"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1490220857, "post_id": 42963009, "comment_id": 73021282, "body": "Two quick notes before I leave: 1) The name of the language is &quot;Perl&quot;, not &quot;PERL&quot;. 2) The <code>use utf8;</code> pragma tells Perl that the source code is encoded using UTF-8. It&#39;s unlikely to have any relevance at all here."}, {"owner": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "edited": false, "score": 0, "creation_date": 1490221771, "post_id": 42963009, "comment_id": 73021690, "body": "man Encode and/or man utf8 should be your starting points."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1490250549, "post_id": 42963009, "comment_id": 73030532, "body": "If you want to see what Perl thinks is in your string, <code>printf &quot;%vd\\n&quot;, $str</code> will show you the codepoints in dotted decimal format."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490280251, "post_id": 42963009, "comment_id": 73050543, "body": "Could you provide the code you use to send the email?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490280450, "post_id": 42963009, "comment_id": 73050725, "body": "Re &quot;<i>My theory is that although Perl knows that the string literal is UTF-encoded</i>&quot;,  No, Perl doesn&#39;t know the encoding of strings, or if they are text at all."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490379128, "post_id": 42963009, "comment_id": 73102268, "body": "@Jasio, Could you at least confirm that you use  Email::Sender::Simple&#39;s <code>sendmail</code> and that you compose the email using <code>Email::Simple-&gt;create</code>? I don&#39;t want to spend time writing an answer around these if that&#39;s not what you are using!"}, {"owner": {"reputation": 267, "user_id": 3646877, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b01ed366dcb7033e2d0448ab3c4003af?s=128&d=identicon&r=PG&f=1", "display_name": "Jasio", "link": "https://stackoverflow.com/users/3646877/jasio"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490432709, "post_id": 42963009, "comment_id": 73117842, "body": "@ikegami, yes, I create the message using Email::Simple-&gt;create and send it using the sendmail function."}, {"owner": {"reputation": 267, "user_id": 3646877, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b01ed366dcb7033e2d0448ab3c4003af?s=128&d=identicon&r=PG&f=1", "display_name": "Jasio", "link": "https://stackoverflow.com/users/3646877/jasio"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1490432831, "post_id": 42963009, "comment_id": 73117876, "body": "But as @H&#229;kon H&#230;gland suggested, the root of the problem was not decoding $xlscontents after reading,"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490279615, "post_id": 42970045, "comment_id": 73049981, "body": "Never ever use <code>_utf8_on</code>!!! Doing so is inherently buggy. If you want to decode, use <code>Encode::decode_utf8</code> or the builtin <code>utf8::decode</code>."}, {"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490359985, "post_id": 42970045, "comment_id": 73089649, "body": "I know this is your opinion, but i disagree. . Especially in a legacy environment which was in part written for perl prior than 5.8 you have software requiring the strings to be encoded in utf8, but the utf-8 flag to be turned off. So its quite normal to ensure that the urf-8 flag is turned off, by calling Encode::_utf8_off (and __utf8_on in the other case). When you are lucky to only work with newer software, you certainly would not use this."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490363776, "post_id": 42970045, "comment_id": 73092143, "body": "That&#39;s what utf8::upgrade and utf8::downgrade are for. Use those instead"}, {"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490372121, "post_id": 42970045, "comment_id": 73098007, "body": "I pasted a small perl test-script to <a href=\"http://pastebin.com/4eNBpKaa\" rel=\"nofollow noreferrer\">pastebin.com/4eNBpKaa</a> Only the Encode::_utf8_off works as expected in my eyes."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490374116, "post_id": 42970045, "comment_id": 73099331, "body": "In your pastebin, you used <code>_utf8_off</code> to encode. Doing so is buggy. (e.g. <code>_utf8_off</code> will fail to encode <code>my $string = &quot;\\xE9&quot;</code>;) If you want to encode, use <code>Encode::encode_utf8</code>, <code>utf8::encode</code>, etc. You can see this has the same desired affect as <code>_utf8_off</code> <a href=\"http://pastebin.com/wENGcuGS\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490378601, "post_id": 42970045, "comment_id": 73101987, "body": "I am using &quot;_utf8_off&quot; to provide perl-legacy software with my data. Neither utf8::upgrade or utf8::downgrade or Encode::encode_utf8 or Encode::decode_utf8 works for that. utf8::encode works - but is in no means clearer to me than just telling perl IGNORE THE UTF-8 flag. Btw:  <code>perl -Mutf8 -MEncode -MDevel::Peek -e &#39;my $string = &quot;\\xE9&quot;; Dump($string); Encode::_utf8_off($string);Dump($string) &#39;</code> will leave the string as is."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490379399, "post_id": 42970045, "comment_id": 73102423, "body": "Re &quot;<i>Neither utf8::upgrade or utf8::downgrade or Encode::encode_utf8 or Encode::decode_utf8 works for that</i>&quot;, You are mistaken. You are simply not aware of how to fix your bugs. I&#39;ve already shown you how to fix one of your misuses of <code>_utf8_on</code>/<code>_utf8_off</code>/<code>is_utf8</code>, and I&#39;ll help you with other should you ask. /// Telling Perl to ignore to turn off the <code>UTF8</code> flag is not a clear way of encoding (unlike using <code>utf8::encode</code>, which is just as efficient), especially since it doesn&#39;t always work. /// Re &quot;<i>will leave the string as is</i>&quot;, Exactly as I said. it completely failed to encode it."}, {"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490379541, "post_id": 42970045, "comment_id": 73102502, "body": "_utf8_off  does not encode a string, it removes a flag. So if you have perl software that requires you to have unicode encoded content without a utf-8 flag (every unicode-aware perl package written prior 2002/2003) you have to do this."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490379575, "post_id": 42970045, "comment_id": 73102522, "body": "Re &quot;<i>_utf8_off does not encode a string</i>&quot;, That&#39;s why I&#39;ve been telling you, but you insist it&#39;s a clear way of doing that! /// Re &quot;<i>So if you have perl software that requires you to have unicode encoded content without a utf-8 flag</i>&quot;, That&#39;s the very definition of encoding+downgrading (except encoding already downgrades, so you can skip that step). You&#39;ve already shown that <code>_utf8_off</code> doesn&#39;t produce unicode encoded content without a utf-8 flag for <code>&quot;\\xE9&quot;</code> (It does for <code>&quot;\\x{100}&quot;</code>, so it <i>sometimes</i> works, unlike <code>utf8::encode</code> which always works.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490380186, "post_id": 42970045, "comment_id": 73102878, "body": "Furthermore, 5.8, only came out in 2002, and it has a different Unicode model than 5.6. <code>upgrade</code> and <code>downgrade</code> didn&#39;t even exist before 5.8, so code written before 2002 is irrelevant here."}, {"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490597799, "post_id": 42970045, "comment_id": 73164179, "body": "@ikegami Ok, because you asked for it i created a small pastebin with an example. the sub nice_quote just REPRESENTS old legacy code. BTW - Debian started shipping with perl 5.8 in 2005 - and lots of people where using 5.6 in these days. As some are still using 5.10 nowadays. <a href=\"http://pastebin.com/VEBVRSW4\" rel=\"nofollow noreferrer\">pastebin.com/VEBVRSW4</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490613206, "post_id": 42970045, "comment_id": 73173785, "body": "<code>nice_quote</code> expects text encoded using UTF-8, so we need to encode its inputs and decode its outputs. Replace <code>Encode::_utf8_off($string2);</code> with <code>utf8::encode($string2);</code>. <code>nice_quote</code> returns text encoded using UTF-8. Replace <code>Encode::_utf8_on($str);</code> with <code>utf8::decode($str);</code>. Your method fails for <code>my $string2 = &quot;\\xE9l\\xE8ve&quot;;</code>."}, {"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490615136, "post_id": 42970045, "comment_id": 73175158, "body": "Of course it fails for &quot;\\xE9l\\xE8ve&quot; - this is not an utf8-encoded string. And i know that whenever Encode::_utf8_off( ... ) works, utf8::encode( ... ) would work too. I do not agree with your opinion that using  Encode::_utf8_off is the beginning of all evil, sorry :("}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490619028, "post_id": 42970045, "comment_id": 73177953, "body": "Re &quot;<i>Of course it fails for &quot;\\xE9l\\xE8ve&quot; - this is not an utf8-encoded string.</i>&quot;, true, but neither is <code>&quot;&#233;l&#232;ve&quot;</code> when <code>use utf8;</code> is in effect. Do <code>&quot;&#233;l&#232;ve&quot; eq &quot;\\xE9l\\xE8ve&quot;</code> and you&#39;ll find they&#39;re the same string, but you code turns it in into garbage because your code is buggy."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490619142, "post_id": 42970045, "comment_id": 73178042, "body": "<b>I&#39;ve demonstrated that every one of your uses <code>_utf8_on</code> is buggy.</b> That makes it fact, not opinon. <b>Even the documentation of <code>_utf8_on</code> and <code>_utf8_off</code> tells you not to use it!</b> Keep using if you want, but please stop spreading misinformation."}, {"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490619458, "post_id": 42970045, "comment_id": 73178294, "body": "This does get way to personal - I think its time to stop :)"}], "tags": [], "owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "is_accepted": false, "score": -1, "last_activity_date": 1490255245, "creation_date": 1490255245, "answer_id": 42970045, "question_id": 42963009, "link": "https://stackoverflow.com/questions/42963009/diagnosing-perl-handling-utf8/42970045#42970045", "title": "Diagnosing Perl handling UTF8", "body": "<p>You can use Devel::Peek to see how the string is \"encoded\".</p>\n\n<pre><code> use Devel::Peek;\n Dump( $xlscontents );\n</code></pre>\n\n<p>will print the content and the internal representation of the String to STDERR. If it contains correct encoded ut8, but does not have the UTF8-flag set, you can use</p>\n\n<pre><code> Encode::_utf8_on($xlscontents)\n</code></pre>\n\n<p>to fix this. Please read <a href=\"http://perldoc.perl.org/Encode.html#Messing-with-Perl%27s-Internals\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/Encode.html#Messing-with-Perl%27s-Internals</a> first.</p>\n"}, {"tags": [], "owner": {"reputation": 267, "user_id": 3646877, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b01ed366dcb7033e2d0448ab3c4003af?s=128&d=identicon&r=PG&f=1", "display_name": "Jasio", "link": "https://stackoverflow.com/users/3646877/jasio"}, "is_accepted": false, "score": 0, "last_activity_date": 1490435547, "creation_date": 1490435547, "answer_id": 43014927, "question_id": 42963009, "link": "https://stackoverflow.com/questions/42963009/diagnosing-perl-handling-utf8/43014927#43014927", "title": "Diagnosing Perl handling UTF8", "body": "<p>In case someone googles this question: \nsince Perl has its own internal string representation, to make sure that the strings are properly handled you need to decode them after they're read from the sheet or command line: </p>\n\n<pre><code>$value = Encode::decode( \"UTF8\", ($sheet -&gt; {Cells} [0] [0]) -&gt; {Val} ); \n$value = ($sheet -&gt; {Cells} [0] [0]) -&gt; {Val} ); utf8::decode($value);\n</code></pre>\n\n<p>If the file is read directly, the conversion may also be specified at the opening. There are more caveats related to Unicode, so it would be best to read <a href=\"https://perldoc.perl.org/perlunicode.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/perlunicode.html</a> first.</p>\n"}], "owner": {"reputation": 267, "user_id": 3646877, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b01ed366dcb7033e2d0448ab3c4003af?s=128&d=identicon&r=PG&f=1", "display_name": "Jasio", "link": "https://stackoverflow.com/users/3646877/jasio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490435547, "creation_date": 1490218269, "last_edit_date": 1490250394, "question_id": 42963009, "link": "https://stackoverflow.com/questions/42963009/diagnosing-perl-handling-utf8", "title": "Diagnosing Perl handling UTF8", "body": "<p>I have a script which reads xlsx files using a Spreadsheet::XLSX module, prepares a message using a string interpolation:</p>\n\n<pre><code>$message = \"this is my message in my language $xlscontents\";\n</code></pre>\n\n<p>and then sends it by email using Email::Sender::Simple. Pragma 'use utf8' is set. </p>\n\n<p>The issue is, while the string literal (where national characters are used) is displayed correctly, the variable $xlscontents is not: although the string held in the variable already is encoded in UTF-8, each UTF character is treated as if it was a series of separate 8-bit characters which are re-encoded separately. The end result is, of course, garbage. At least this is how I see it, because only the fragment which had been read into $xlscontents variable is spoiled; the literal in my language is displayed correctly. I also looked into the email message with a hex viewer and it looks this way.</p>\n\n<p>My theory is that although Perl knows that the string literal is UTF-encoded, it seems to believe that the variable is 8-bit ASCII (or another 8-bit code) and attemptes to encode it during the interpolation. My questions:\n* How could I verify this theory? Is there a way to screen the Perl variable contents byte by byte?\n* How could I inform Perl that the variable is already UTF-encoded and does not need re-encoding?</p>\n\n<p>The script had been working well using on-screen messaging only, but when I started playing with emails, I found out that all the texts were spoiled. So I turned utf support on, and since then literals are displayed properly, but the variable contents are not, si apparently I'm still missing something.</p>\n"}, {"tags": ["perl", "sorting", "unix", "terminal"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1490215106, "post_id": 42961886, "comment_id": 73018482, "body": "So <code>apple2.com.br</code> is a subdomain? What rule do you use to decide what  is the subdomain part of the domain name?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 3, "creation_date": 1490215672, "post_id": 42961886, "comment_id": 73018818, "body": "Recent versions of the IO::Socket::SSL module include <a href=\"https://metacpan.org/pod/IO::Socket::SSL::PublicSuffix\" rel=\"nofollow noreferrer\">IO::Socket::SSL::PublicSuffix</a> which you can use to get the public suffix (i.e <code>com.br</code>) or the root domain (one level up, i.e. <code>apple2.com.br</code>) to a domain. Once you have this you can just sort by this. The documentation of the module contains an example on how to get to the root domain."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 6549428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d7f776996992ab489832faeb058d0089?s=128&d=identicon&r=PG&f=1", "display_name": "John McLane", "link": "https://stackoverflow.com/users/6549428/john-mclane"}, "edited": false, "score": 0, "creation_date": 1490222793, "post_id": 42962719, "comment_id": 73022179, "body": "GREAT! Thanks ikegami. The script complained about some 2 dozens of domains not being valid, some were, but that was easy to edit out. In the end the PublicSuffix one served me very well. 450k domains that provide ads spam junkware and other not desireble &#39;wares&#39; were sorted. I&#39;ll now check them all to see the ones alive and compile the final list. THANKS!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1490279413, "last_edit_date": 1490279413, "creation_date": 1490217051, "answer_id": 42962719, "question_id": 42961886, "link": "https://stackoverflow.com/questions/42961886/sort-hosts-file-by-tld-domain-not-by-suffix-com-whatever-or-prefix-subdomai/42962719#42962719", "title": "Sort hosts file by TLD domain, not by suffix (.com.whatever) or prefix (subdomains)", "body": "<p>The key to efficient sorting in Perl is to create a function that transforms the value to sort into a representative string that can be sorted lexicographically.</p>\n\n<p>For example, if you want to sort dates, you could transform them into the <code>yyyymmdd</code> format. In this case, we'll reorder the parts of the domain such that</p>\n\n<pre><code>foo.bar.apple1.co.uk\n</code></pre>\n\n<p>becomes one of the following:</p>\n\n<pre><code># Using this approach, the sorted order of apple1.com and apple1.net will vary.\napple1.bar.foo\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code># Using this approach, the sorted order of apple1.com and apple1.net will be consistent.\napple1.bar.foo&lt;NUL&gt;uk.co\n</code></pre>\n\n<p>We want the numbers to be sort naturally, (1, 2, 10 rather than 1, 10, 2). Our key function could handle that, but we'll take the easy way out by replacing <code>sort</code> with <code>natkeysort</code> from <a href=\"http://search.cpan.org/perldoc?Sort::Key::Natural\" rel=\"nofollow noreferrer\">Sort::Key::Natural</a>. As a bonus, <code>natkeysort</code> allows us to easily integrate our key function!</p>\n\n<p>The hard part is to identify the suffix. There's no rule for that, just constantly changing definitions. As such, we'll use a module to identify the suffix.</p>\n\n<hr>\n\n<p>Implementing the key function using <a href=\"http://search.cpan.org/perldoc?Domain::PublicSuffix\" rel=\"nofollow noreferrer\">Domain::PublicSuffix</a>:</p>\n\n<pre><code>use feature qw( state );\n\nuse Domain::PublicSuffix qw( );\n\nsub get_sort_key {\n   my ($host) = @_;\n   $host =~ s/\\.\\z//;\n   state $dps = Domain::PublicSuffix-&gt;new();\n   $dps-&gt;get_root_domain($host)\n      or die \"$host: \".$dps-&gt;error();\n\n   my @name   = split /\\./, substr($host, 0, -length($dps-&gt;suffix())-1);\n   my @suffix = split /\\./, $dps-&gt;suffix();\n   return join('.', reverse @name).\"\\0\".join('.', reverse @suffix);\n}\n</code></pre>\n\n<hr>\n\n<p>Implementing the key function using <a href=\"http://search.cpan.org/perldoc?IO::Socket::SSL::PublicSuffix\" rel=\"nofollow noreferrer\">IO::Socket::SSL::PublicSuffix</a>:</p>\n\n<pre><code>use feature qw( state );\n\nuse IO::Socket::SSL::PublicSuffix qw( );\n\nsub get_sort_key {\n   my ($host) = @_;\n   my @host = split(/\\./, $host);\n   state $ps = IO::Socket::SSL::PublicSuffix-&gt;default();\n   my ($name, $suffix) = $ps-&gt;public_suffix(\\@host);\n   return join('.', reverse @$name).\"\\0\".join('.', reverse @$suffix);\n}\n</code></pre>\n\n<hr>\n\n<p>The above functions are used as follows:</p>\n\n<pre><code>use feature qw( say );\n\nuse Sort::Key::Natural qw( natkeysort );\n\nmy @hosts = (\n   'www.apple3.net',\n   'www.apple3.com',\n   'this.apple4.com',\n   'that.apple4.com',\n   'www.apple10.com',\n   'that.apple1.uk',\n   'and.that.apple2.com.br',\n);\n\nmy @sorted_hosts = natkeysort { get_sort_key($_) } @hosts;\n\nsay for @sorted_hosts;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>that.apple1.uk\nand.that.apple2.com.br\nwww.apple3.com\nwww.apple3.net\nthat.apple4.com\nthis.apple4.com\nwww.apple10.com\n</code></pre>\n\n<p><a href=\"http://search.cpan.org/perldoc?IO::Socket::SSL::PublicSuffix\" rel=\"nofollow noreferrer\">IO::Socket::SSL::PublicSuffix</a> is supposedly updated more often than <a href=\"http://search.cpan.org/perldoc?Domain::PublicSuffix\" rel=\"nofollow noreferrer\">Domain::PublicSuffix</a> (and <a href=\"http://search.cpan.org/perldoc?Mozilla::PublicSuffix\" rel=\"nofollow noreferrer\">Mozilla::PublicSuffix</a>), but it's part of a larger distro.</p>\n"}], "owner": {"reputation": 27, "user_id": 6549428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d7f776996992ab489832faeb058d0089?s=128&d=identicon&r=PG&f=1", "display_name": "John McLane", "link": "https://stackoverflow.com/users/6549428/john-mclane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 42962719, "answer_count": 1, "score": -3, "last_activity_date": 1490279413, "creation_date": 1490214046, "last_edit_date": 1490222816, "question_id": 42961886, "link": "https://stackoverflow.com/questions/42961886/sort-hosts-file-by-tld-domain-not-by-suffix-com-whatever-or-prefix-subdomai", "title": "Sort hosts file by TLD domain, not by suffix (.com.whatever) or prefix (subdomains)", "body": "<p>I need to sort a super huge half-mil entries list of domain names in a host file. But I want to sort them not by subdomains or by the .com .net. </p>\n\n<p>So this:</p>\n\n<pre><code>www.apple3.com\nthis.apple4.com\nthat.apple1.uk\nand.that.apple2.com.br\n</code></pre>\n\n<p>Will turn into this:</p>\n\n<pre><code>that.apple1.uk\nand.that.apple2.com.br\nwww.apple3.com\nthis.apple4.com\n</code></pre>\n\n<p>No ips yet on this list (as all will resolve to 0.0.0.0, I'll add that later) just the domains are in the list. I'm using a Mac with brew, so I can use any GNU or nix tool for it. Thanks in advance!</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490200463, "post_id": 42957583, "comment_id": 73009686, "body": "So you would like to only keep the part that you match against in memory? You could then try to progressivly read lines until you get a complete match, and abandon lines in the beginning if there is no match"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1490200481, "post_id": 42957583, "comment_id": 73009696, "body": "Wait, so your company is okay with you switching your development work to a completely different language, but they won&#39;t let you install a module???"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490200570, "post_id": 42957583, "comment_id": 73009766, "body": "Also, have you heard of <a href=\"http://docs.python-guide.org/en/latest/dev/virtualenvs/\" rel=\"nofollow noreferrer\">virtualenv</a>? You can install all the modules you want in your home directory, you don&#39;t need root access."}, {"owner": {"reputation": 57, "user_id": 7711452, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6530152024773c85bba38e6573e0aaa4?s=128&d=identicon&r=PG&f=1", "display_name": "mgoblue92", "link": "https://stackoverflow.com/users/7711452/mgoblue92"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490200776, "post_id": 42957583, "comment_id": 73009917, "body": "@ThisSuitIsBlackNot I suppose they&#39;re afraid someone could unintentionally take down python for the whole company? ;)"}, {"owner": {"reputation": 57, "user_id": 7711452, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6530152024773c85bba38e6573e0aaa4?s=128&d=identicon&r=PG&f=1", "display_name": "mgoblue92", "link": "https://stackoverflow.com/users/7711452/mgoblue92"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490200899, "post_id": 42957583, "comment_id": 73009994, "body": "@H&#229;konH&#230;gland In general I would like to avoid reading the whole into a string/into memory. I could read line by line, but it would be much harder to look for the multi-line pattern"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1490201003, "post_id": 42957583, "comment_id": 73010083, "body": "It would help if you showed the pattern and an example of the data you want to match."}, {"owner": {"reputation": 57, "user_id": 7711452, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6530152024773c85bba38e6573e0aaa4?s=128&d=identicon&r=PG&f=1", "display_name": "mgoblue92", "link": "https://stackoverflow.com/users/7711452/mgoblue92"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490201976, "post_id": 42957583, "comment_id": 73010754, "body": "@ThisSuitIsBlackNot good suggestion, I updated the post"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490202906, "post_id": 42957583, "comment_id": 73011335, "body": "I don&#39;t know your data, but perhaps you can assemble lines and test for a match each time, then clear that once a match is found? Like in <a href=\"http://stackoverflow.com/questions/42866626/perl-read-a-large-file-for-use-with-multi-line-regex/42866745#42866745\">this answer</a>."}], "answers": [{"tags": [], "owner": {"reputation": 985, "user_id": 1437501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee2d65100a83f4e213217cd04546f312?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1437501/matthias"}, "is_accepted": false, "score": 2, "last_activity_date": 1490202694, "last_edit_date": 1490202694, "creation_date": 1490201491, "answer_id": 42958001, "question_id": 42957583, "link": "https://stackoverflow.com/questions/42957583/perl-regex-i-how-do-search-a-file-for-a-multiline-pattern-without-reading-the-w/42958001#42958001", "title": "Perl regex: I how do search a file for a multiline pattern without reading the whole file into memory?", "body": "<p>I can imagine two solutions (without thinking heavily, so maybe I am wrong):</p>\n\n<p>a) Use a maximum number of matching characters, say 1024. 1) Read in twice as many (2048) characters. 2) Try to match. 3) Seek forward by 1024 characters. Repeat.</p>\n\n<p>b) Use a starting and ending pattern that match in a single line. The part in between can be tested later on. Perl's flip-flop operator can be used in this scenario.</p>\n\n<p>Edit: Since the question got updated, solution b) seems to be a good one.</p>\n\n<p>The starting pattern would be the assignment, and the ending pattern would be the semicolon. Everything in between can be concatenated and later tested for validity.</p>\n\n<p>Example:</p>\n\n<pre><code>my $assignment = \"\";\nwhile (&lt;&gt;) {\n    if (/assign\\s+\\w+\\s+=/ .. /;/) {\n        $assignment .= $_;\n    } else {\n        if ($assignment =~ /full regex/) {\n            # do something with the match\n        }\n        $assignment = \"\";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 4, "last_activity_date": 1490202497, "creation_date": 1490202497, "answer_id": 42958318, "question_id": 42957583, "link": "https://stackoverflow.com/questions/42957583/perl-regex-i-how-do-search-a-file-for-a-multiline-pattern-without-reading-the-w/42958318#42958318", "title": "Perl regex: I how do search a file for a multiline pattern without reading the whole file into memory?", "body": "<p>You can use the <a href=\"http://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\">range operator</a> to match everything between two patterns while reading line-by-line:</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nwhile (&lt;DATA&gt;) {\n    print if /^assign / .. /;/;\n}\n\n__DATA__\nfoo\nassign signal0 = (cond1) ? val1 :\n                 (cond2) ? val2 :\n                           val3;\nbar\nassign signal1[15:0] = {input1[7:0], input2[7:0]};\nbaz\nassign signal2[34:0] = { 4'b0,\n                         subsig0[3:0],\n                         subsig1,\n                         subsig2,\n                         subsig3[18:2],\n                         subsig4[5:0]\n                       };\nqux\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>assign signal0 = (cond1) ? val1 :\n                 (cond2) ? val2 :\n                           val3;\nassign signal1[15:0] = {input1[7:0], input2[7:0]};\nassign signal2[34:0] = { 4'b0,\n                         subsig0[3:0],\n                         subsig1,\n                         subsig2,\n                         subsig3[18:2],\n                         subsig4[5:0]\n                       };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1490202565, "creation_date": 1490202565, "answer_id": 42958340, "question_id": 42957583, "link": "https://stackoverflow.com/questions/42957583/perl-regex-i-how-do-search-a-file-for-a-multiline-pattern-without-reading-the-w/42958340#42958340", "title": "Perl regex: I how do search a file for a multiline pattern without reading the whole file into memory?", "body": "<p>Here is an example using progressive matching with a pre match pattern:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nmy $pre_match = qr{assign\\s+\\S+\\s+=\\s+};\nmy $regex = qr{($pre_match[^;]+;)};\n\nmy $line = \"\";\nmy $found_start = 0;\nwhile( &lt;DATA&gt; ) {\n    if ( !$found_start &amp;&amp; /$pre_match/ ) {\n        $line = \"\";\n        $found_start = 1;\n    }\n    if ( $found_start ) {\n        $line .= $_;\n        if ( $line =~ /$regex/ ) {\n            say \"Got match: '$1'\";\n            $found_start = 0;\n            $_ = substr $line, $+[0];\n            redo;\n        }\n    }\n}\n\n__DATA__\nassign signal0 = (cond1) ? val1 :\n                 (cond2) ? val2 :\n                           val3;\n\nassign signal1[15:0] = {input1[7:0], input2[7:0]};\n\nassign signal2[34:0] = { 4'b0,\n                         subsig0[3:0],\n                         subsig1,\n                         subsig2,\n                         subsig3[18:2],\n                         subsig4[5:0]\n                       };\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>Got match: 'assign signal0 = (cond1) ? val1 :\n                 (cond2) ? val2 :\n                           val3;'\nGot match: 'assign signal1[15:0] = {input1[7:0], input2[7:0]};'\nGot match: 'assign signal2[34:0] = { 4'b0,\n                         subsig0[3:0],\n                         subsig1,\n                         subsig2,\n                         subsig3[18:2],\n                         subsig4[5:0]\n                       };'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490207860, "post_id": 42960071, "comment_id": 73014444, "body": "I&#39;m on my  phone right now and can&#39;t add an example."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1490207831, "creation_date": 1490207831, "answer_id": 42960071, "question_id": 42957583, "link": "https://stackoverflow.com/questions/42957583/perl-regex-i-how-do-search-a-file-for-a-multiline-pattern-without-reading-the-w/42960071#42960071", "title": "Perl regex: I how do search a file for a multiline pattern without reading the whole file into memory?", "body": "<p>You can set the input record separator <code>$/</code> to semicolon <code>;</code> and read line by line. Each line will  be on statement, including the trailing semicolon. Then matching becomes trivial. </p>\n"}], "owner": {"reputation": 57, "user_id": 7711452, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6530152024773c85bba38e6573e0aaa4?s=128&d=identicon&r=PG&f=1", "display_name": "mgoblue92", "link": "https://stackoverflow.com/users/7711452/mgoblue92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 42958318, "answer_count": 4, "score": 1, "last_activity_date": 1490207831, "creation_date": 1490200322, "last_edit_date": 1495535449, "question_id": 42957583, "link": "https://stackoverflow.com/questions/42957583/perl-regex-i-how-do-search-a-file-for-a-multiline-pattern-without-reading-the-w", "title": "Perl regex: I how do search a file for a multiline pattern without reading the whole file into memory?", "body": "<p>My question is the same question as <a href=\"https://stackoverflow.com/questions/454456/how-do-i-re-search-or-re-match-on-a-whole-file-without-reading-it-all-into-memor\">How do I re.search or re.match on a whole file without reading it all into memory?</a> but using perl instead of python</p>\n\n<p>Question:\n<strong>I want to be able to run a regular expression on an entire file, but I'd like to be able to not have to read the whole file into memory at once as I may be working with rather large files in the future. Is there a way to do this? Thanks!</strong></p>\n\n<p><strong>Clarification: I cannot read line-by-line because it can span multiple lines.</strong></p>\n\n<p>Why am I using perl instead of python? I've run into enough issues with python regex that I need to switch to perl. I would install <a href=\"https://pypi.python.org/pypi/regex\" rel=\"nofollow noreferrer\">https://pypi.python.org/pypi/regex</a> but I can't since my workplace, understandably, doesn't allow write access to its python installation directory and I would prefer to avoid a slow back and forth email chain with IT for them to install it for me, and/or deal with further permission issues :)</p>\n\n<p>EDIT: Example patterns I'm looking for</p>\n\n<pre><code>assign signal0 = (cond1) ? val1 :\n                 (cond2) ? val2 :\n                           val3;\n\nassign signal1[15:0] = {input1[7:0], input2[7:0]};\n\nassign signal2[34:0] = { 4'b0,\n                         subsig0[3:0],\n                         subsig1,\n                         subsig2,\n                         subsig3[18:2],\n                         subsig4[5:0]\n                       };\n</code></pre>\n\n<p>I'm looking for patterns like the above, i.e. a variable assignment up until I see a semicolon. The regex would match any of the above as I don't know if the pattern is multiline or not. Perhaps something similar to <code>/assign\\s+\\w+\\s+=\\s+[^;];/m</code>, i.e. up until I see a semicolon</p>\n\n<p>EDIT2: From the given answers (thanks!) it appears that decomposing the pattern into start, middle, &amp; end sections might be the best strategy, e.g. using the range operator as suggested by some. </p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "is_accepted": false, "score": 4, "last_activity_date": 1490195558, "last_edit_date": 1490195558, "creation_date": 1490194874, "answer_id": 42955390, "question_id": 42955309, "link": "https://stackoverflow.com/questions/42955309/perl-vcard-pm-how-do-i-compute-inputs/42955390#42955390", "title": "Perl vCard.pm how do I compute inputs?", "body": "<blockquote>\n  <p>Accepts/returns an <strong><em>arrayref</em></strong> that looks like:</p>\n</blockquote>\n\n<p>You're passing an array, not an arrayref. Fix it:</p>\n\n<pre><code>$vcard-&gt;addresses( \\@arraytmp  );\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 4885615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8ae58daa8ef8a59f94772d099a2730?s=128&d=identicon&r=PG&f=1", "display_name": "waltinator", "link": "https://stackoverflow.com/users/4885615/waltinator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490195558, "creation_date": 1490194666, "last_edit_date": 1490194908, "question_id": 42955309, "link": "https://stackoverflow.com/questions/42955309/perl-vcard-pm-how-do-i-compute-inputs", "title": "Perl vCard.pm how do I compute inputs?", "body": "<p>The documentation for <a href=\"https://metacpan.org/pod/vCard\" rel=\"nofollow noreferrer\">vCard</a> shows it wants:</p>\n\n<pre><code> addresses()\n    Accepts/returns an arrayref that looks like:\n\n      [\n        { type =&gt; ['work'], street =&gt; 'Main St', preferred =&gt; 0 },\n        { type      =&gt; ['home'], \n          pobox     =&gt; 1234,\n          extended  =&gt; 'asdf',\n          street    =&gt; 'Army St',\n          city      =&gt; 'Desert Base',\n          region    =&gt; '',\n          post_code =&gt; '',\n          country   =&gt; 'USA',\n          preferred =&gt; 1,\n        },\n      ]\n</code></pre>\n\n<p>I must generate this call from a CSV file. I can extract the data, but cannot figure out how to pass it to <code>$vcard-&gt;addresses</code>.  </p>\n\n<p>This fails:</p>\n\n<pre><code>    if (keys %addrwork &gt; 0 )\n{\n  $addrwork{'type'} = ['work'];\n  push @arraytmp, %addrwork;\n}\n  # did we get any part of a home or work address?\n  if ( $#arraytmp &gt;= 0 ) {\n$vcard-&gt;addresses( @arraytmp  );\n</code></pre>\n\n<p>Fails with:  </p>\n\n<pre><code>Can't use string (\"type\") as an ARRAY ref while \"strict refs\" in use at /usr/local/share/perl/5.22.1/vCard.pm line 254, &lt;FILE&gt; line 2.\n</code></pre>\n"}, {"tags": ["perl", "memory", "reference"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1490194518, "post_id": 42955097, "comment_id": 73005117, "body": "Related: <a href=\"http://stackoverflow.com/q/8924142\">How to free memory in Perl?</a>, <a href=\"http://stackoverflow.com/q/1242832\">In Perl, how can I release memory to the operating system?</a>, <a href=\"http://stackoverflow.com/q/27565121\">How to free memory in the Perl</a>, <a href=\"http://stackoverflow.com/q/40574671\">How can I remove perl object from memory</a>, <a href=\"http://stackoverflow.com/q/14159258\">Why does Perl not garbage collect memory when a large array is deallocated?</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1490194783, "post_id": 42955097, "comment_id": 73005358, "body": "<i>&quot;I usually do the following to free the memory used by data in a simple array: <code>undef @array</code>&quot;</i> Please don&#39;t do this. It is generally pointless and unnecessary."}], "answers": [{"comments": [{"owner": {"reputation": 747, "user_id": 2474912, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/i6p16.gif?s=128&g=1", "display_name": "JohnnyLoo", "link": "https://stackoverflow.com/users/2474912/johnnyloo"}, "edited": false, "score": 0, "creation_date": 1490195757, "post_id": 42955227, "comment_id": 73006122, "body": "I should&#39;ve mentioned that my array have a very large number of items and it lives for the entire time that the script is running. This is because the script needs to collect data from different sources and all that data needs to be processed at the very end of the script, so I have to keep the data in memory. There are some sections when I have to create sub arrays and those sub arrays are the ones I try to delete to free their memory and avoid having duplicate data.. Thank you"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 747, "user_id": 2474912, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/i6p16.gif?s=128&g=1", "display_name": "JohnnyLoo", "link": "https://stackoverflow.com/users/2474912/johnnyloo"}, "edited": false, "score": 6, "creation_date": 1490196471, "post_id": 42955227, "comment_id": 73006710, "body": "@JohnnyLoo: If you have temporary data then you should limit its lifetime by declaring it with <code>my</code> and limiting its scope so that it is discarded automatically. Explicit use of <code>undef</code> is usually a sign of poor design. If your data is so big then you may be better using an in-memory SQLite database."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 7, "last_activity_date": 1490194504, "creation_date": 1490194504, "answer_id": 42955227, "question_id": 42955097, "link": "https://stackoverflow.com/questions/42955097/deleting-a-reference-to-free-memory/42955227#42955227", "title": "Deleting a reference to free memory", "body": "<p>Yes, <code>undef @{$reference}</code> (or <code>undef @$reference</code>) will do what <code>undef @array</code> did.  It will free almost all memory used by the array to be reusable by the program.</p>\n\n<p>But there is very rarely any good reason to do this.  When your lexical <code>$reference</code> goes out of scope, the same thing will happen.  Explicitly calling <code>undef</code> on it first will just make your code minutely slower.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1490203258, "creation_date": 1490203258, "answer_id": 42958593, "question_id": 42955097, "link": "https://stackoverflow.com/questions/42955097/deleting-a-reference-to-free-memory/42958593#42958593", "title": "Deleting a reference to free memory", "body": "<blockquote>\n  <p><em>If later on I'm done using the data from that array and I only have a reference to it, what is the best method to delete that array and free the memory?</em></p>\n</blockquote>\n\n<p>Ideally, just let <code>$reference</code> go out of scope. Otherwise, you can use <code>$reference = undef;</code>.</p>\n"}], "owner": {"reputation": 747, "user_id": 2474912, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/i6p16.gif?s=128&g=1", "display_name": "JohnnyLoo", "link": "https://stackoverflow.com/users/2474912/johnnyloo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 577, "favorite_count": 0, "accepted_answer_id": 42955227, "answer_count": 2, "score": 1, "last_activity_date": 1490203258, "creation_date": 1490194206, "last_edit_date": 1490199028, "question_id": 42955097, "link": "https://stackoverflow.com/questions/42955097/deleting-a-reference-to-free-memory", "title": "Deleting a reference to free memory", "body": "<p>Imagine I have a referece that points to an array that contains many anonimous arrays. Ex:</p>\n\n<pre><code>my @main_array = ( [1,2,3], [3,4,5], ['a','b','c'] );\nmy $reference = \\@main_array\n</code></pre>\n\n<p>If later on I'm done using the data from that array and I only have a reference to it, what is the best method to delete that array and free the memory?\nI usually do the following to free the memory used by data in a simple array:</p>\n\n<pre><code>undef @array\n</code></pre>\n\n<p>but because I only have a reference to it I thought about doing this</p>\n\n<pre><code>undef @{$reference}\n</code></pre>\n\n<p>If I do that, wouldn't I just be deleting the references to the anonymous arrays stored in the array (<code>main_array</code>) and not the actual content of the anonymous arrays?</p>\n\n<p>I guess my question can be simplify as this: Does deleting a reference makes Perl free the memory used by the array, hash or scalar referred by the reference?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1490190035, "post_id": 42952908, "comment_id": 73001405, "body": "Checked this link already? <a href=\"https://bbs.archlinux.org/viewtopic.php?id=213408\" rel=\"nofollow noreferrer\">bbs.archlinux.org/viewtopic.php?id=213408</a>"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1490190143, "post_id": 42952908, "comment_id": 73001487, "body": "Also seems like someone else also had this problem and reported it as a bug : <a href=\"https://github.com/perseo22/pacmanager/issues/15\" rel=\"nofollow noreferrer\">github.com/perseo22/pacmanager/issues/15</a>"}, {"owner": {"reputation": 359, "user_id": 2963426, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sOENt.jpg?s=128&g=1", "display_name": "Ruwan Ranganath", "link": "https://stackoverflow.com/users/2963426/ruwan-ranganath"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1490191468, "post_id": 42952908, "comment_id": 73002562, "body": "I&#39;ve managed in my Arch with several additional components, stuck with deepin , thank you for your support."}, {"owner": {"reputation": 463, "user_id": 5956418, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c1e4d59c950208e2ebb83fc021f2278d?s=128&d=identicon&r=PG&f=1", "display_name": "Qoros", "link": "https://stackoverflow.com/users/5956418/qoros"}, "edited": false, "score": 0, "creation_date": 1526950659, "post_id": 42952908, "comment_id": 87930187, "body": "I am stuck with ubuntu 18.04, no way to work out."}], "answers": [{"tags": [], "owner": {"reputation": 480, "user_id": 1304926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceaeef97f61e60def13097fe66d64b7b?s=128&d=identicon&r=PG", "display_name": "Ga&#235;tan Frenoy", "link": "https://stackoverflow.com/users/1304926/ga%c3%abtan-frenoy"}, "is_accepted": true, "score": 2, "last_activity_date": 1510438116, "creation_date": 1510438116, "answer_id": 47243280, "question_id": 42952908, "link": "https://stackoverflow.com/questions/42952908/loadable-library-and-perl-binaries-are-mismatched/47243280#47243280", "title": "loadable library and perl binaries are mismatched", "body": "<p>The work on the PAC manager project has been discontinued <a href=\"https://github.com/perseo22/pacmanager/issues/57\" rel=\"nofollow noreferrer\">[*]</a>, you may want to give a try to <a href=\"https://www.asbru-cm.net/\" rel=\"nofollow noreferrer\">\u00c1sbr\u00fa Connection Manager</a>. It's a fork for  which you can find a Debian based package for Gnome2::Vte.</p>\n"}], "owner": {"reputation": 359, "user_id": 2963426, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sOENt.jpg?s=128&g=1", "display_name": "Ruwan Ranganath", "link": "https://stackoverflow.com/users/2963426/ruwan-ranganath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1224, "favorite_count": 0, "accepted_answer_id": 47243280, "answer_count": 1, "score": 0, "last_activity_date": 1510438116, "creation_date": 1490188912, "question_id": 42952908, "link": "https://stackoverflow.com/questions/42952908/loadable-library-and-perl-binaries-are-mismatched", "title": "loadable library and perl binaries are mismatched", "body": "<p>Can not run Pac-manager after installing deb file, </p>\n\n<p>Downloaded Pac Manger from : <a href=\"https://sourceforge.net/projects/pacmanager/\" rel=\"nofollow noreferrer\">https://sourceforge.net/projects/pacmanager/</a> </p>\n\n<p>When run </p>\n\n<blockquote>\n  <p>pac</p>\n</blockquote>\n\n<p>in the terminal , showing below problem </p>\n\n<blockquote>\n  <p>xs/Vte.c: loadable library and perl binaries are mismatched (got\n  handshake key 0xdb00080, needed 0xdb80080)</p>\n</blockquote>\n\n<p>System: </p>\n\n<blockquote>\n  <p>Linux PC-pc 4.4.0-3-deepin-amd64 #1 SMP Deepin 4.4.30-2 (2016-12-01)\n  x86_64 GNU/Linux</p>\n</blockquote>\n\n<p>Thanks. </p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1490187004, "post_id": 42952060, "comment_id": 72999147, "body": "Is this a hash, or a hash of hash references?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490187104, "post_id": 42952060, "comment_id": 72999232, "body": "You would need to know all the keys for all structures on the second level. What does the full structure look like?"}, {"owner": {"reputation": 388, "user_id": 7672005, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-R-OYfkK3E2M/AAAAAAAAAAI/AAAAAAAAABA/6paHCK6AaaY/photo.jpg?sz=128", "display_name": "Zyzyx", "link": "https://stackoverflow.com/users/7672005/zyzyx"}, "edited": false, "score": 0, "creation_date": 1490187237, "post_id": 42952060, "comment_id": 72999323, "body": "It&#39;s a multidimensional hash, not sure if this answers your question but I&#39;m a bit new to using hashes. I&#39;m trying to use it to store layers of data in the way of $hash{ID}{type} and then easily list all the ID&#39;s sorted by type."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1490187451, "post_id": 42952060, "comment_id": 72999498, "body": "Maybe <code>$hash{ $id } = $type</code> makes more sense?"}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1490187618, "post_id": 42952060, "comment_id": 72999613, "body": "@Zyzyx you could use a hash slice combined with default sort (lexicographic sort): <code>@{ $hash{1} }{sort keys %{ $hash{1} }};</code>"}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 7, "last_activity_date": 1490187648, "creation_date": 1490187648, "answer_id": 42952382, "question_id": 42952060, "link": "https://stackoverflow.com/questions/42952060/perl-sorting-keys-based-on-underlying-keys/42952382#42952382", "title": "Perl sorting keys based on underlying keys", "body": "<p>Let's assume the data structure is a hash of hashes, where each sub-hash has exactly one key. In that case we can sort on the one key in the sub-hash alphabetically. The solution below does that by using the first one in the list of keys. This <strong>does not make sense if there is more than one key</strong> in that sub-hash because they are never ordered, and it would just be random.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nmy %hash = (\n    '2' =&gt; { 'c' =&gt; 1 },\n    '4' =&gt; { 'd' =&gt; 1 },\n    '3' =&gt; { 'a' =&gt; 1 },\n    '5' =&gt; { 'e' =&gt; 1 },\n    '1' =&gt; { 'b' =&gt; 1 },\n);\n\nmy @sorted = sort { ( keys %{ $hash{$a} } )[0] cmp( keys %{ $hash{$b} } )[0] } \n    keys %hash;\n\nforeach my $key (@sorted) {\n    print Data::Dumper-&gt;Dump( [ $hash{$key} ], [$key] );\n}\n</code></pre>\n\n<p>The code first creates a list of the keys of <code>%hash</code> sorted by the key inside of each of them, alphabetically. It then iterates that list of sorted keys and displays each key and value using <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"noreferrer\">Data::Dumper</a>.</p>\n\n<p>Here's the output.</p>\n\n<pre><code>$3 = {\n       'a' =&gt; 1\n     };\n$1 = {\n       'b' =&gt; 1\n     };\n$2 = {\n       'c' =&gt; 1\n     };\n$4 = {\n       'd' =&gt; 1\n     };\n$5 = {\n       'e' =&gt; 1\n     };\n</code></pre>\n"}], "owner": {"reputation": 388, "user_id": 7672005, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-R-OYfkK3E2M/AAAAAAAAAAI/AAAAAAAAABA/6paHCK6AaaY/photo.jpg?sz=128", "display_name": "Zyzyx", "link": "https://stackoverflow.com/users/7672005/zyzyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 42952382, "answer_count": 1, "score": 1, "last_activity_date": 1490187648, "creation_date": 1490186816, "question_id": 42952060, "link": "https://stackoverflow.com/questions/42952060/perl-sorting-keys-based-on-underlying-keys", "title": "Perl sorting keys based on underlying keys", "body": "<p>I am wondering if it is possible to sort the keys in a hash based on underlying keys?</p>\n\n<p>To clarify, how would I sort and print the following alphabetically:</p>\n\n<pre><code>my %hash;\n$hash{1}{b};\n$hash{2}{c};\n$hash{3}{a};\n$hash{4}{d};\n$hash{5}{e};\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1490180200, "post_id": 42949447, "comment_id": 72994318, "body": "Do you want to remove the duplicates on your first point. And second point, count the duplicate lines. May I right."}, {"owner": {"reputation": 1261, "user_id": 4030463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b152908db1fb6d0e205df83a47478488?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaSchumann", "link": "https://stackoverflow.com/users/4030463/annaschumann"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1490181300, "post_id": 42949447, "comment_id": 72995090, "body": "Essentially, yes. (1) Take the number from the first line matched, ignore all other lines matched (2) Match all lines and sum the numbers together"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1490181356, "post_id": 42949447, "comment_id": 72995119, "body": "Try  <code>perl -nE &#39;&#47;reads&#47; &amp;&amp; do {print;exit}&#39; input.txt</code> and <code>perl -nE &#39;&#47;paired&#47; &amp;&amp; $sum++; END {say $sum}&#39; input.txt</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1490181981, "post_id": 42949447, "comment_id": 72995536, "body": "... and to print only field #1 in the first case: <code>perl -anE &#39;&#47;reads&#47; &amp;&amp; do {say $F[0];exit}&#39; input.txt</code>"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1490181830, "creation_date": 1490181830, "answer_id": 42950251, "question_id": 42949447, "link": "https://stackoverflow.com/questions/42949447/matching-and-splitting-a-specific-line-from-a-txt-file/42950251#42950251", "title": "Matching and splitting a specific line from a .txt file", "body": "<p>The first one is:</p>\n\n<pre><code>while (&lt;&gt;) {\n  if (/reads/) {\n    print;\n    last;\n  }\n}\n</code></pre>\n\n<p>The second one is:</p>\n\n<pre><code>my $total = 0;\nwhile (&lt;&gt;) {\n  if (/(\\d+) paired/) {\n    $total += $1;\n  }\n}\nsay $total;\n</code></pre>\n\n<p>You could, no doubt, golf them both. But these versions are readable :-)</p>\n"}], "owner": {"reputation": 1261, "user_id": 4030463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b152908db1fb6d0e205df83a47478488?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaSchumann", "link": "https://stackoverflow.com/users/4030463/annaschumann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 42950251, "answer_count": 1, "score": -1, "last_activity_date": 1490181830, "creation_date": 1490179829, "last_edit_date": 1490181396, "question_id": 42949447, "link": "https://stackoverflow.com/questions/42949447/matching-and-splitting-a-specific-line-from-a-txt-file", "title": "Matching and splitting a specific line from a .txt file", "body": "<p>I'm looking for concise Perl equivalents (to use within scripts rather than one-liners) to a few things i'd otherwise do in bash/awk:</p>\n\n<pre><code>Count=$(awk '/reads/ &amp;&amp; ! seen {print $1; seen=1}' &lt; input.txt)\n</code></pre>\n\n<p>Which trawls through a specified .txt file that contains a multitude of lines including some in this format:</p>\n\n<pre><code>8523723 reads; of these:\n1256265 reads; of these:\n2418091 reads; of these:\n</code></pre>\n\n<p>Printing '8523723' and ignoring the remainder of the matchable lines (as I only wish to act on the first matched instance). </p>\n\n<p>Secondly:</p>\n\n<pre><code>Count2=$(awk '/paired/ {sum+=$1} END{print sum}' &lt; input.txt)\n\n25 paired; of these:\n15 paired; of these:\n</code></pre>\n\n<p>Which would create a running total of the numbers on each matched line, printing 40.  </p>\n"}, {"tags": ["html", "perl", "cgi", "perl-html-template"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1490175669, "post_id": 42947073, "comment_id": 72990987, "body": "What gets written to the web server error log? What do you see if you compile the program from the command line (with <code>perl -c</code>)? Is HTML::Template installed? It&#39;s 2017, why are so many people still writing CGI programs? :-("}, {"owner": {"reputation": 383, "user_id": 6912069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/36fa2ba6fe42cfb2808854519d61aa73?s=128&d=identicon&r=PG&f=1", "display_name": "N. Maks", "link": "https://stackoverflow.com/users/6912069/n-maks"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1490176153, "post_id": 42947073, "comment_id": 72991315, "body": "Hehe, sorry the company I work for still uses it...I would prefer something more modern too. I don&#39;t know where the server error log is, but when I run the perl script within eclipse, i get the following console output: <code>Content-Type: text&#47;html; charset=utf-8  HTML::Template=HASH(0x5a2f74)</code>. When i use <code>print $tmpl-&gt;output</code> the console output looks as desired, but the in the browser I still get the error message."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1490176229, "post_id": 42947073, "comment_id": 72991377, "body": "@DaveCross because no-one is writing a proper full-featured guide on how to deploy PSGI stuff. I hear you have a fancy blog... want some TUITs? :)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1490176522, "post_id": 42947073, "comment_id": 72991606, "body": "@N.Maks - You code works (well, modulo needing the <code>-&gt;output</code> call, but you&#39;ve already spotted that). So the problem is in the way your program is interacting with your web server. And you&#39;ve told us nothing about how that is configured. Saying &quot;I don&#39;t know where the server error log is&quot; isn&#39;t very helpful. You can&#39;t do serious web development without access to the error log. I&#39;m confident there will be useful clues in there."}, {"owner": {"reputation": 383, "user_id": 6912069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/36fa2ba6fe42cfb2808854519d61aa73?s=128&d=identicon&r=PG&f=1", "display_name": "N. Maks", "link": "https://stackoverflow.com/users/6912069/n-maks"}, "edited": false, "score": 0, "creation_date": 1490176771, "post_id": 42947073, "comment_id": 72991788, "body": "alright, thank you for the hint. It&#39;s a starting point to know that it isn&#39;t the code which causes the trouble. I will try my luck with the sever configuration and see if I can find something which helps."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1490181538, "post_id": 42947073, "comment_id": 72995253, "body": "@N.Maks If you work it out, please come back and write an answer - so it helps other people with the same problem."}, {"owner": {"reputation": 383, "user_id": 6912069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/36fa2ba6fe42cfb2808854519d61aa73?s=128&d=identicon&r=PG&f=1", "display_name": "N. Maks", "link": "https://stackoverflow.com/users/6912069/n-maks"}, "edited": false, "score": 0, "creation_date": 1490185269, "post_id": 42947073, "comment_id": 72997852, "body": "Sure, if I can solve it, I&#39;ll provide an answer"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1490193426, "post_id": 42947073, "comment_id": 73004162, "body": "Ok. So looking at your edits to the question, I see we&#39;re all agreed that the problem is in the interface between the web server and your CGI program. So now we might be more help if you gave us more information about how that is set up. What platform are you using? What web server is it? Do other CGI programs work in this environment. And, at the risk of getting repetitive, have you found the error log yet? What is in it?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1527582728, "post_id": 42947073, "comment_id": 88168661, "body": "@DaveCross: I agree wholeheartedly with <b>simbabque</b>. There is little to no explanation of what PSGI <i>actually is</i>. What I do know is that it&#39;s Perl-specific, whereas the <i>Common Gateway Interface</i> is, well, common to many languages, and my experience isn&#39;t broad enough to know whether other languages have done their own thing in a similar way. CGI is well-known, &quot;common&quot;, and has heritage. PSGI is virtually undocumented and hides behind Perl &quot;this will do all you need&quot; modules,  and relies on the &quot;this is the new thing&quot; hype to get started. Can you suggest why PSGI is &quot;better&quot;?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1527582862, "post_id": 42947073, "comment_id": 88168749, "body": "@Dave: The Wikipedia page for PSGI is a ghost town. Likewise Plack  and Plackup, where I read that both Ruby and Python have their own variants. This seems like a huge backward step to me. Perhaps you should elaborate?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1527585119, "post_id": 42947073, "comment_id": 88170152, "body": "@Borodin: I agree that we haven&#39;t been very good at explaining exactly why PSGI is a better solution than CGI. I&#39;ve started a couple of projects to address that, but they stalled before getting anywhere. Perhaps I&#39;ll find time to get back to one of those. But I&#39;ll summarise the main three advantages in comments below."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1527585303, "post_id": 42947073, "comment_id": 88170300, "body": "1/ PSGI uncouples your code from its deployment environment. CGI is an inherently slow technology. To improve performance, you&#39;ll need to use mod_perl or FCGI. And both of those will involve major changes to your code. If you write a PSGI application, then you can deploy it as a CGI program, under mod_perl or FCGI or even as a standalone service behind a proxy. And you won&#39;t need to change the code at all."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1527585412, "post_id": 42947073, "comment_id": 88170385, "body": "2/ A PSGI app has a simple interface. It&#39;s a subroutine with defined inputs and defined outputs. This simplicity makes it simple to write powerful debugging and testing tools."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1527585577, "post_id": 42947073, "comment_id": 88170506, "body": "3/ The simple interface also opens the door to a powerful ecosystem of middleware. For example, you can short-circuit requests for static files and send them directly to the filesystem rather than running most of your application. I know you can do that wilth Apache or nginx confuguration, but I find it helpful to have those rules inside the application codebase."}], "answers": [{"tags": [], "owner": {"reputation": 383, "user_id": 6912069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/36fa2ba6fe42cfb2808854519d61aa73?s=128&d=identicon&r=PG&f=1", "display_name": "N. Maks", "link": "https://stackoverflow.com/users/6912069/n-maks"}, "is_accepted": true, "score": 1, "last_activity_date": 1527581699, "last_edit_date": 1527581699, "creation_date": 1490594753, "answer_id": 43038965, "question_id": 42947073, "link": "https://stackoverflow.com/questions/42947073/perl-cgi-using-htmltemplate/43038965#43038965", "title": "Perl CGI using HTML::Template", "body": "<p>When initializing the <code>HTML::Template</code> object in the Perl script</p>\n\n<pre><code>my $tmpl = HTML::Template-&gt;new(filename =&gt; 'TemplateSimple.html');\n</code></pre>\n\n<p>I had to specify the full path instead of just the filename, so</p>\n\n<pre><code>my $tmpl = HTML::Template-&gt;new(filename =&gt; 'C:/inetpub/wwwroot/Project/TemplateSimple.html');\n</code></pre>\n\n<p>This solved my problem.</p>\n\n<p>To whom it may interest, the webservice was set up with IIS 7, in the very basic and standard way.</p>\n"}], "owner": {"reputation": 383, "user_id": 6912069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/36fa2ba6fe42cfb2808854519d61aa73?s=128&d=identicon&r=PG&f=1", "display_name": "N. Maks", "link": "https://stackoverflow.com/users/6912069/n-maks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 737, "favorite_count": 0, "accepted_answer_id": 43038965, "answer_count": 1, "score": 0, "last_activity_date": 1527581699, "creation_date": 1490173944, "last_edit_date": 1527581554, "question_id": 42947073, "link": "https://stackoverflow.com/questions/42947073/perl-cgi-using-htmltemplate", "title": "Perl CGI using HTML::Template", "body": "<p>I would like to make use of the\n<a href=\"https://metacpan.org/pod/HTML::Template\" rel=\"nofollow noreferrer\"><code>HTML::Template</code></a>\nmodule but somehow I can't set it up to work properly. Here is a very simple representative code I'm testing on:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse CGI;\nuse HTML::Template;\n\nmy $test = new CGI;\nmy $tmpl = HTML::Template-&gt;new(filename =&gt; 'TemplateSimple.html');\n\n$tmpl-&gt;param(\n    title =&gt; 'Test',\n    body  =&gt; '&lt;p&gt;This is a test&lt;/p&gt;',\n);\n\nmy $out = $test-&gt;header(\n    -type    =&gt; 'text/html',\n    -charset =&gt; 'utf-8'\n);\n\n\nprint $out;\nprint $tmpl-&gt;output;\n</code></pre>\n\n<p>When calling the page I always end up with the browser displaying the server error message:</p>\n\n<blockquote>\n  <p>502 - Web server received an invalid response while acting as a\n  gateway or proxy server.</p>\n</blockquote>\n\n<h3>TemplateSimple.html</h3>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"de\"&gt;\n    &lt;head&gt;\n        &lt;meta charset=\"utf-8\"&gt;\n        &lt;title&gt;&lt;TMPL_VAR NAME=title&gt;&lt;/title&gt;\n        &lt;link rel=\"SHORTCUT\" ICON href=\"favicon.ico\" /&gt;\n    &lt;/head&gt;\n\n    &lt;body&gt;\n        &lt;TMPL_VAR NAME=body&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I have to use CGI, because I want to process user input on the web page, but I would like to define the basic HTML structure in a template where I can insert code segments as necessary.</p>\n\n<h3>Edit</h3>\n\n<p>I think that it could have something to do with different configs between the local Perl (run from eclipse, which does run fine) and the Perl CGI config. Does anybody know of such a case?</p>\n\n<h3>Edit</h3>\n\n<p>After setting up a Perl CGI configuration in Eclipse, the script runs as expected from the local host. However, the problem when calling the page from an external source persists. So like <strong>DaveCross</strong> suggested, the bug lies in the web server configuration rather than the Perl script.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6128589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/235bbf72f9d0793195e672435df99f8b?s=128&d=identicon&r=PG&f=1", "display_name": "s12", "link": "https://stackoverflow.com/users/6128589/s12"}, "edited": false, "score": 0, "creation_date": 1490174751, "post_id": 42946990, "comment_id": 72990338, "body": "I only require to extract the digits before .out , like in this case I want 371925"}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "reply_to_user": {"reputation": 23, "user_id": 6128589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/235bbf72f9d0793195e672435df99f8b?s=128&d=identicon&r=PG&f=1", "display_name": "s12", "link": "https://stackoverflow.com/users/6128589/s12"}, "edited": false, "score": 0, "creation_date": 1490174811, "post_id": 42946990, "comment_id": 72990363, "body": "@s12, that is what <code>$newFileName =~ &#47;(\\d+)\\.out&#47;;</code>do"}], "tags": [], "owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "is_accepted": false, "score": 0, "last_activity_date": 1490173931, "last_edit_date": 1490173931, "creation_date": 1490173627, "answer_id": 42946990, "question_id": 42946944, "link": "https://stackoverflow.com/questions/42946944/extract-the-numbers-at-the-end-from-a-file-name-using-perl/42946990#42946990", "title": "Extract the numbers at the end from a file name using perl", "body": "<p>try: </p>\n\n<pre><code> $newFileName =~ /(\\d+)\\.out/;\nmy $digits = $1;\nmy $newFileName_2=$digits.\"_Gen_TCC_TIF_2110_413010_L3TL_Ae6TL707285_371925.out\";\n</code></pre>\n\n<p><code>(\\d+)\\.out/</code> should give you all Digits before <code>.out</code></p>\n"}, {"tags": [], "owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "is_accepted": false, "score": 0, "last_activity_date": 1490174487, "last_edit_date": 1490174487, "creation_date": 1490173920, "answer_id": 42947062, "question_id": 42946944, "link": "https://stackoverflow.com/questions/42946944/extract-the-numbers-at-the-end-from-a-file-name-using-perl/42947062#42947062", "title": "Extract the numbers at the end from a file name using perl", "body": "<p>Try this:</p>\n\n<pre><code>$newFileName =~ s/(.*?)_(\\d+)\\.out/$2_$1\\.out/;\n</code></pre>\n\n<p>Or </p>\n\n<pre><code>$newFileName =~ s/(.*?)_(\\d+)(\\.\\w+)/$2_$1$3/;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 23, "user_id": 6128589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/235bbf72f9d0793195e672435df99f8b?s=128&d=identicon&r=PG&f=1", "display_name": "s12", "link": "https://stackoverflow.com/users/6128589/s12"}, "edited": false, "score": 1, "creation_date": 1490188820, "post_id": 42947068, "comment_id": 73000486, "body": "Anything wrong with my answer? (to explain the downvote)"}], "tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": true, "score": -1, "last_activity_date": 1490217424, "last_edit_date": 1490217424, "creation_date": 1490173935, "answer_id": 42947068, "question_id": 42946944, "link": "https://stackoverflow.com/questions/42946944/extract-the-numbers-at-the-end-from-a-file-name-using-perl/42947068#42947068", "title": "Extract the numbers at the end from a file name using perl", "body": "<p>You can do it with a single regex:</p>\n\n<pre><code>my $newFileName = 'Gen_TCC_TIF_2110_413010_L3TL_Ae6TL707285_371925.out';\nmy $newFileName_2 = $filename =~ s/(.*)_(\\d+)(?=\\.out)/$2_$1/r;\n# or, for older Perl, use this instead:\n(my $newFileName_2 = $filename) =~ s/(.*)_(\\d+)(?=\\.out)/$2_$1/;\n# or, to modify directly the variable $newFileName:\n$newFileName =~ s/(.*)_(\\d+)(?=\\.out)/$2_$1/;\n</code></pre>\n\n<p>Or if you want to get the digits (because you need them for something else), then you can do:</p>\n\n<pre><code>my ($digits) = $newFileName =~ /_(\\d+)\\.out/;\n</code></pre>\n\n<p>You were using <code>/g</code> modifier, which made your regex match all blocks of digits, which isn't what you wanted. (even worst, it was returning an array, but you were only keeping the first element (<code>2110</code>) in the scalar <code>$digit</code> )</p>\n"}], "owner": {"reputation": 23, "user_id": 6128589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/235bbf72f9d0793195e672435df99f8b?s=128&d=identicon&r=PG&f=1", "display_name": "s12", "link": "https://stackoverflow.com/users/6128589/s12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 42947068, "answer_count": 3, "score": -1, "last_activity_date": 1490217424, "creation_date": 1490173472, "last_edit_date": 1490173885, "question_id": 42946944, "link": "https://stackoverflow.com/questions/42946944/extract-the-numbers-at-the-end-from-a-file-name-using-perl", "title": "Extract the numbers at the end from a file name using perl", "body": "<p>I am unable to extract the last <strong>digits</strong> in the filename and rename the file placing the digits at the beginning of the file. \nLike suppose my file name is <code>\"Gen_TCC_TIF_2110_413010_L3TL_Ae6TL707285_371925.out\"</code>\nI want to rename the file as <code>\"371925_Gen_TCC_TIF_2110_413010_L3TL_Ae6TL707285.out\"</code></p>\n\n<pre><code>my $newFileName ='Gen_TCC_TIF_2110_413010_L3TL_Ae6TL707285_371925.out';\nmy ($digits) = $newFileName =~ /(\\d+)/g;\nmy $newFileName_2=\"${digits}_Gen_TCC_TIF_2110_413010_L3TL_Ae6TL707285_371925.out\"\n</code></pre>\n"}, {"tags": ["perl", "search", "find"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1490162986, "post_id": 42942549, "comment_id": 72984071, "body": "This works for me as it stands.  (What probably means to check every little detail first.)  Another thing, you may want to try <a href=\"http://search.cpan.org/~rclamp/File-Find-Rule-0.34/lib/File/Find/Rule.pm\" rel=\"nofollow noreferrer\">File::Find::Rule</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 3, "creation_date": 1490164633, "post_id": 42942549, "comment_id": 72984798, "body": "Did you try debugging it? I&#39;d first add an <code>else</code> with prints of all variables you use.  Perhaps make a test subdirectory in your home (and set <code>$dir</code> to it) with a few dirs and files, to check whether there is something about <code>&#47;admin</code> (and to have less output to read through)."}, {"owner": {"reputation": 333, "user_id": 7002733, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pr9b8.jpg?s=128&g=1", "display_name": "Reubens4Dinner", "link": "https://stackoverflow.com/users/7002733/reubens4dinner"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490197833, "post_id": 42942549, "comment_id": 73007781, "body": "Wow. I feel like a fool. I don&#39;t know how I didn&#39;t see it before, but &quot;checking every little detail&quot; did reveal to me that all the files in <code>&#47;admin&#47;programs</code> don&#39;t end in <code>.txt</code>. My condition that they do was my problem. It works now. Should I answer my own question here or should I just edit it to say what the problem was?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490203015, "post_id": 42942549, "comment_id": 73011419, "body": "OK, good :)  It happens.  For this I&#39;d just add a (prominent) note at the end.  It&#39;s a simple statement, may not warrant an answer."}, {"owner": {"reputation": 333, "user_id": 7002733, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pr9b8.jpg?s=128&g=1", "display_name": "Reubens4Dinner", "link": "https://stackoverflow.com/users/7002733/reubens4dinner"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490211926, "post_id": 42942549, "comment_id": 73016738, "body": "@zdim do you know of a way I can return the name of the owner of file that the script finds?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1490212259, "post_id": 42942549, "comment_id": 73016949, "body": "For instance, <code>$id = (stat $file)[4]; $name = getpwuid($id)</code>.  (Can write in one statement.) See docs and search SO.  Note that <code>getpwuid</code> returns more in an array context."}, {"owner": {"reputation": 333, "user_id": 7002733, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pr9b8.jpg?s=128&g=1", "display_name": "Reubens4Dinner", "link": "https://stackoverflow.com/users/7002733/reubens4dinner"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490222623, "post_id": 42942549, "comment_id": 73022100, "body": "Thanks, that works wonderfuly"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490243877, "post_id": 42942549, "comment_id": 73028210, "body": "Great :).  And, it&#39;s the <i>list context</i> (and <i>not</i> &quot;array context&quot;) ... sorry"}], "answers": [{"tags": [], "owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "is_accepted": true, "score": 1, "last_activity_date": 1490161747, "creation_date": 1490161747, "answer_id": 42943700, "question_id": 42942549, "link": "https://stackoverflow.com/questions/42942549/about-searching-recursively-in-perl/42943700#42943700", "title": "About searching recursively in Perl", "body": "<p>I was able to get the desired output using the code you pasted by making few changes like:</p>\n\n<pre><code>use strict;\nuse warnings;\n</code></pre>\n\n<p>You should always use them as they notify of various errors in your code which you may not get hold of.</p>\n\n<p>Next I changed the line :</p>\n\n<pre><code>my $dir = './home/jdoe'; ##'./admin/programs'\n</code></pre>\n\n<p>The . signifies current directory. Also if you face problems still try using the absolute path(from source) instead of relative path. Do let me know if this solves your problem.</p>\n"}, {"tags": [], "owner": {"reputation": 382, "user_id": 1618857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b318c5044c93eb38c7632000d92226a7?s=128&d=identicon&r=PG", "display_name": "Jenish", "link": "https://stackoverflow.com/users/1618857/jenish"}, "is_accepted": false, "score": 1, "last_activity_date": 1490167089, "creation_date": 1490167089, "answer_id": 42945094, "question_id": 42942549, "link": "https://stackoverflow.com/questions/42942549/about-searching-recursively-in-perl/42945094#42945094", "title": "About searching recursively in Perl", "body": "<p>This script works fine without any issue. One thing hidden from this script to us  is the pattern. you can share the pattern and let us know what you are expecting from that pattern, so that we can validate that.</p>\n\n<p>You could also run your program in debug mode i.e., </p>\n\n<blockquote>\n  <p>perl -d your_program. </p>\n</blockquote>\n\n<p>That should take you to debug mode and there are lot of options available to inspect through the flow. type 'n' on the debug prompt to step in to the code flow to understand how your code flows. Typing 'n' will print the code execution point and its result</p>\n"}], "owner": {"reputation": 333, "user_id": 7002733, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pr9b8.jpg?s=128&g=1", "display_name": "Reubens4Dinner", "link": "https://stackoverflow.com/users/7002733/reubens4dinner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 42943700, "answer_count": 2, "score": 1, "last_activity_date": 1490206298, "creation_date": 1490155417, "last_edit_date": 1490206298, "question_id": 42942549, "link": "https://stackoverflow.com/questions/42942549/about-searching-recursively-in-perl", "title": "About searching recursively in Perl", "body": "<p>I have a Perl script that I, well, mostly pieced together from questions on this site. I've read the documentation on some parts to better understand it. Anyway, here it is:</p>\n\n<pre><code>#!/usr/bin/perl\nuse File::Find;\n\nmy $dir = '/home/jdoe';\nmy $string = \"hard-coded pattern to match\";\nfind(\\&amp;printFile, $dir);\n\nsub printFile \n{\n   my $element = $_;\n   if(-f $element &amp;&amp; $element =~ /\\.txt$/) \n    { \n        open my $in, \"&lt;\", $element or die $!;\n        while(&lt;$in&gt;) \n            {\n                if (/\\Q$string\\E/) \n                    {  \n                        print \"$File::Find::name\\n\"; \n                        last;   # stops looking after match is found\n                    }\n            }\n    }  \n}\n</code></pre>\n\n<p>This is a simple script that, similar to grep, will look down recursively through directories for a matching string. It will then print the location of the file that contains the string. It works, but only if the file is located in my home directory. If I change the hard-coded search to look in a different directory (that I have permissions in), for example <code>/admin/programs</code>, the script no longer seems to do anything: No output is displayed, even when I know it should be matching at least one file (tested by making a file in <code>admin/programs</code> with the hard-coded pattern. Why am I experiencing this behavior?</p>\n\n<p>Also, might as well disclaim that this isn't a really useful script (heck, this would be so easy with grep or awk!), but understanding how to do this in Perl is important to me right now. Thanks</p>\n\n<p><strong>EDIT: Found the problem. A simple oversight in that the files in the directory I was looking for did not have .txt as extension. Thanks for helping me find that.</strong></p>\n"}, {"tags": ["perl", "dbi"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490149515, "post_id": 42940951, "comment_id": 72979915, "body": "The database handle used by <code>Object::GetData</code> is independent of any other because it is declared with <code>my</code>. Calling <code>disconnect</code> on it cannot affect any other handle. Your problem is elsewhere."}, {"owner": {"reputation": 93, "user_id": 2535035, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dc6b83c6ed7d74d3e3ee5ecb9ed86f3b?s=128&d=identicon&r=PG", "display_name": "David Crane", "link": "https://stackoverflow.com/users/2535035/david-crane"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490149798, "post_id": 42940951, "comment_id": 72980011, "body": "That goes back to my question of localizing the MyLib package which is returning the shared database handle that&#39;s causing the issue."}, {"owner": {"reputation": 93, "user_id": 2535035, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dc6b83c6ed7d74d3e3ee5ecb9ed86f3b?s=128&d=identicon&r=PG", "display_name": "David Crane", "link": "https://stackoverflow.com/users/2535035/david-crane"}, "edited": false, "score": 0, "creation_date": 1490150312, "post_id": 42940951, "comment_id": 72980156, "body": "Hmm, all my DoConnect does is a <code>DBI-&gt;connect(...)</code> -- I have no idea why it&#39;s returning the existing handle.  I guess I&#39;ll kickoff a subprocess to get the data I need, but it feels so entirely unnecessary."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490151056, "post_id": 42940951, "comment_id": 72980334, "body": "@DavidCrane: I don&#39;t think you understand me. Two separate calls to <code>MyLib::DoConnect</code> will return two distinct and independent database handles. Disconnecting the handle created in <code>Object::GetData</code> will not affect the one created by <code>AnotherObject::new</code> (or whatever you have called it). Your diagnosis is wrong, unless you&#39;re using <code>connect_cached</code> instead of a simple <code>connect</code>."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490151279, "post_id": 42940951, "comment_id": 72980390, "body": "@Borodin nevertheless, that is what he says is happening; see my answer"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490162631, "post_id": 42940951, "comment_id": 72983915, "body": "What&#39;s <code>$self-&gt;dbh</code>? You never showed that being populated!"}, {"owner": {"reputation": 93, "user_id": 2535035, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dc6b83c6ed7d74d3e3ee5ecb9ed86f3b?s=128&d=identicon&r=PG", "display_name": "David Crane", "link": "https://stackoverflow.com/users/2535035/david-crane"}, "edited": false, "score": 0, "creation_date": 1490162765, "post_id": 42940951, "comment_id": 72983961, "body": "It&#39;s an attribute on my object. It returns the dbh established in my new()  call is all. Again it was created via DoConnect."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490162767, "post_id": 42940951, "comment_id": 72983963, "body": "Please provide a mininal, runnable demonstration of the problem."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490162839, "post_id": 42940951, "comment_id": 72983992, "body": "You mentioned threads. Are you already using threads?"}, {"owner": {"reputation": 93, "user_id": 2535035, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dc6b83c6ed7d74d3e3ee5ecb9ed86f3b?s=128&d=identicon&r=PG", "display_name": "David Crane", "link": "https://stackoverflow.com/users/2535035/david-crane"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490162910, "post_id": 42940951, "comment_id": 72984033, "body": "@ikegami I&#39;m not currently using threads."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490162978, "post_id": 42940951, "comment_id": 72984066, "body": "The reason for these questions is that the answer to what you asked is: Use exactly the code you describe because it works. Something you didn&#39;t mention is what&#39;s causing you problems. Please provide a minimal, runnable demonstration of the problem."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1490193856, "post_id": 42940951, "comment_id": 73004537, "body": "what do you get when you <code>print $DBI::connect_via;</code>?"}, {"owner": {"reputation": 93, "user_id": 2535035, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dc6b83c6ed7d74d3e3ee5ecb9ed86f3b?s=128&d=identicon&r=PG", "display_name": "David Crane", "link": "https://stackoverflow.com/users/2535035/david-crane"}, "edited": false, "score": 0, "creation_date": 1490212358, "post_id": 42940951, "comment_id": 73017014, "body": "&quot;connect&quot; comes out.  I&#39;ve just tried connecting to a separate database. I can query data that I know is only in the new database successfully but when I disconnect my other DBH close as well.  I&#39;m frustrated and baffled at this point."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1490229121, "post_id": 42940951, "comment_id": 73024280, "body": "How about just removing the disconnect call?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1490229398, "post_id": 42940951, "comment_id": 73024361, "body": "Create a simple script that just calls MyLib::DoConnect twice and see if it is the same handle.  If it isn&#39;t, add stuff to match your real code a little at a time until it breaks.   If it is, step through it in the Perl debugger and see if it is actually calling DBI::connect or something else is getting in the way somehow."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1490229435, "post_id": 42940951, "comment_id": 73024369, "body": "What version of DBI?  What database?"}], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": -1, "last_activity_date": 1490165822, "last_edit_date": 1490165822, "creation_date": 1490151091, "answer_id": 42941841, "question_id": 42940951, "link": "https://stackoverflow.com/questions/42940951/is-there-a-way-to-localise-a-package-in-perl-database-handle-issues/42941841#42941841", "title": "Is there a way to localise a package in Perl - database handle issues?", "body": "<p>Are you certain DoConnect is calling DBI->connect, not DBI->connect_cached, or something else that is caching database handles?</p>\n\n<p>If so, I'm guessing you have Apache::DBI loaded and are running under mod_perl (or at any rate have <code>$ENV{MOD_PERL}</code> set), which causes DBI->connect to use Apache::DBI to cache connections.</p>\n\n<p>You can tell DBI to <em>not</em> do this by calling connect with a <code>dbi_connect_method</code> attribute:</p>\n\n<pre><code>DBI-&gt;connect( $data_source, $username, $auth, {\n    'dbi_connect_method' =&gt; 'connect',\n} );\n</code></pre>\n\n<p>(which would require you to pass something into your DoConnect saying that's what you want).</p>\n\n<p>That is the documented way; an undocumented way that may work for you is to locally set the variable that DBI uses as the default for that attribute:</p>\n\n<pre><code># This should be separate\nmy $dbh = do { local $DBI::connect_via = 'connect'; MyLib::DoConnect() };\n</code></pre>\n\n<p>(I guess it is possible even if you don't have <code>$ENV{MOD_PERL}</code> set when you load DBI that your code is already setting $DBI::connect_via to 'connect_cached' or some other package and that is causing your trouble.)</p>\n\n<p>Another approach, if you don't actually need to use the two database handles at the same time, would be to just remove the disconnect call.  When $dbh goes out of scope, if there are no other copies of that database handle around, it will be closed; explicitly calling disconnect isn't necessary.</p>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 2535035, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dc6b83c6ed7d74d3e3ee5ecb9ed86f3b?s=128&d=identicon&r=PG", "display_name": "David Crane", "link": "https://stackoverflow.com/users/2535035/david-crane"}, "edited": false, "score": 0, "creation_date": 1490214437, "post_id": 42944086, "comment_id": 73018110, "body": "I&#39;m stuck using an older version of DBI - while I can&#39;t find this in any patch notes or bug reports, it seems that a disconnect on any of my database handles closes ALL of my database handles.  Since my DBHs are cleaned by my process flow later anyway, I can create and commit on a second dbh without affecting the first and know they will be closed. If I start getting messages about a missing explicit DISCONNECT later I&#39;ll know where to look.  DBI 1.607"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1490163518, "creation_date": 1490163518, "answer_id": 42944086, "question_id": 42940951, "link": "https://stackoverflow.com/questions/42940951/is-there-a-way-to-localise-a-package-in-perl-database-handle-issues/42944086#42944086", "title": "Is there a way to localise a package in Perl - database handle issues?", "body": "<p>The approach you describe works fine.</p>\n\n<pre><code>package MyLib;\n\nuse DBI qw( );\n\nsub DoConnect {\n   return DBI-&gt;connect(\n      'dbi:SQLite:foo.sqlite3', undef, undef,\n      { PrintError=&gt;0, RaiseError=&gt;1 },\n   );\n}\n\n\npackage Object;\n\nsub new {\n   my $class = shift;\n   my $self = bless({}, $class);\n   return $self;\n}\n\nsub GetData {\n   my $dbh = MyLib::DoConnect();\n   $dbh-&gt;disconnect();\n}\n\n\npackage AnotherObject;\n\nsub new {\n   my $class = shift;\n   my $self = bless({}, $class);\n   $self-&gt;{dbh} = MyLib::DoConnect();\n   return $self;\n}\n\nsub DoSomething {\n   my ($self) = @_;\n   return $self-&gt;{dbh}-&gt;selectrow_array(\"SELECT 'abc'\");\n}\n\n\npackage main;\n\nmy $ao = AnotherObject-&gt;new();\nmy $o = Object-&gt;new();\n$o-&gt;GetData();\nprint $ao-&gt;DoSomething(), \"\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>abc\n</code></pre>\n\n<p>Something else you didn't mention is causing the problems.</p>\n"}, {"tags": [], "owner": {"reputation": 93, "user_id": 2535035, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dc6b83c6ed7d74d3e3ee5ecb9ed86f3b?s=128&d=identicon&r=PG", "display_name": "David Crane", "link": "https://stackoverflow.com/users/2535035/david-crane"}, "is_accepted": true, "score": 0, "last_activity_date": 1492187689, "creation_date": 1492187689, "answer_id": 43415581, "question_id": 42940951, "link": "https://stackoverflow.com/questions/42940951/is-there-a-way-to-localise-a-package-in-perl-database-handle-issues/43415581#43415581", "title": "Is there a way to localise a package in Perl - database handle issues?", "body": "<p>I figured it out. I setup my DBHs to be shared by all of my objects in the executable so I don't have to instantiate one DBH and pass it around to my objects manually - this ruined the behavior I was expecting when I actually needed to do this.</p>\n\n<p>Thanks for all of your help, folks - learned a bunch.</p>\n"}], "owner": {"reputation": 93, "user_id": 2535035, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dc6b83c6ed7d74d3e3ee5ecb9ed86f3b?s=128&d=identicon&r=PG", "display_name": "David Crane", "link": "https://stackoverflow.com/users/2535035/david-crane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 43415581, "answer_count": 3, "score": -1, "last_activity_date": 1492187689, "creation_date": 1490144742, "last_edit_date": 1490148175, "question_id": 42940951, "link": "https://stackoverflow.com/questions/42940951/is-there-a-way-to-localise-a-package-in-perl-database-handle-issues", "title": "Is there a way to localise a package in Perl - database handle issues?", "body": "<p>I need to instantiate a new $dbh using DBI.</p>\n\n<p>My objects usually have a $dbh present when they're created.</p>\n\n<p>When I try to create a new $dbh using</p>\n\n<pre><code>my $dbh = MyLib::Connect();\n</code></pre>\n\n<p>and after performing some DB operations doing</p>\n\n<pre><code>$dbh-&gt;disconnect();\n</code></pre>\n\n<p>my downstream code's $dbh is closed. Is there a way to get what I'm after? I've seen some example code that does two DBI->connect(...) calls but using the same code as an example produces the same result - it's like MyLib is caching the returned $dbh value.</p>\n\n<p>Example code:</p>\n\n<pre><code>package MyLib;\nsub DoConnect { \n  ...\n  my $dbh = DBI-&gt;connect(...);\n  return($dbh)\n}\n\npackage Object;\nsub GetData {\n  my ($id) = @_;\n  my $dbh = MyLib::DoConnect(); # This should be separate\n  ...\n  $dbh-&gt;commit()\n  $dbh-&gt;disconnect();\n  return($someData);\n}\n\npackage AnotherObject;\nsub DoSomething {\n  my ($self) = @_; \n  # $self had a dbh set on instantiation with MyLib::DoConnect();\n  my $newData = Object::GetData($self-&gt;id);\n  my $moreData = GetDataUsingDBH($self-&gt;dbh); # the dbh is closed!!!\n}\n</code></pre>\n\n<p>Is what I need to do possible without starting a separate thread (which I can't guarantee will finish before GetDataUsingDBH is called). Should I do a system call to an external program to wait for it to finish? Does my question even make sense?</p>\n"}, {"tags": ["perl", "html-entities"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1490135710, "post_id": 42939399, "comment_id": 72975788, "body": "Too broad. It&#39;s impossible to say without additional information."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1490136097, "post_id": 42939399, "comment_id": 72975938, "body": "@MattJacob What do you mean?  What additional information do you need?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1490136466, "post_id": 42939399, "comment_id": 72976093, "body": "For example... What font are you using? What browser are you using? What do you mean by &quot;does not display&quot;?"}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1490136597, "post_id": 42939399, "comment_id": 72976147, "body": "No font. Firefox and IE.  It displays a little box instead.  Try putting <code>&amp;#xFFFD;</code> into an html file and see for yourself what it looks like in a browser."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1490137275, "post_id": 42939399, "comment_id": 72976379, "body": "What do you mean &quot;no font&quot;? Even the default font is <i>some</i> font!"}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1490137512, "post_id": 42939399, "comment_id": 72976465, "body": "There is no font specified in the html."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 1, "creation_date": 1490138364, "post_id": 42939399, "comment_id": 72976775, "body": "i&#39;m pretty sure that you have some Encoding inconsistency. Didn&#39;t tried you decode  e.g. umlaut <code>\\x{fc}</code> as utf8 or sometbing like? (try enable <i>CHECK</i> in the <code>Encode::(de|en)code</code>)"}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1490142042, "post_id": 42939399, "comment_id": 72977827, "body": "@jm666 I think you are right.  If do <code>decode(&#39;ISO-8859-1&#39;)</code> instead of <code>utf-8</code> it seems to be fine.  How can you detect the encoding of the source?"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1490142473, "post_id": 42939399, "comment_id": 72977941, "body": "In short: <i>you can&#39;t</i>. Just imagine how you want differentiate ISO1 and ISO2? For the longer answer see: <a href=\"http://stackoverflow.com/q/1970660/632407\">stackoverflow.com/q/1970660/632407</a>. :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1490164584, "post_id": 42939399, "comment_id": 72984777, "body": "Technically, you can <a href=\"http://stackoverflow.com/q/28681864/589924\">reliably guess</a> if you know it&#39;s between iso-8859-1 and UTF-8, but guessing in general is &quot;somewhat harder&quot;. (The linked question is about cp1252 and UTF-8, but the same applies to iso-8859-1 and UTF-8.)"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490171758, "post_id": 42939399, "comment_id": 72988495, "body": "@ikegami Me somewhat missed the linked answer by you, yet.  ++ to it."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490218659, "post_id": 42939399, "comment_id": 73020346, "body": "@ikegami Is it likely to be anything other than <code>iso-8859-1</code> and <code>utf8</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490218794, "post_id": 42939399, "comment_id": 73020414, "body": "If you have to ask, yes. This machine&#39;s console uses cp850, and this machine&#39;s OS uses your choice of cp1252 or UTF-16le. There are many more than the two encodings you mention in common use."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490219940, "post_id": 42939399, "comment_id": 73020929, "body": "@ikegami Is <code>utf8</code> the main problem?  Therefore if I do <code>utf8::decode($str)</code> will that solve most of my problems?  I am just trying to create a generic function to convert characters in strings to HTML entities where necessary."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490220646, "post_id": 42939399, "comment_id": 73021201, "body": "Re &quot;<i>Is utf8 the main problem?</i>&quot;, No, the problem is surely that your code is buggy. (Note that the encoding&#39;s name is &quot;UTF-8&quot;. The case isn&#39;t important, but the dash is. Without the dash, you are talking about an internal-to-Perl extension of UTF-8.)"}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490226002, "post_id": 42939399, "comment_id": 73023372, "body": "@ikegami If you see the edit to my question, that is all my code is."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490226123, "post_id": 42939399, "comment_id": 73023404, "body": "Liar. If that was true, <code>$str</code> would be <code>undef</code>, and <code>$output</code> would contain an empty string. You obviously had a value in <code>$str</code>, so that&#39;s NOT your entire program. You have code that placed <code>&quot;\\x{FFFD}&quot;</code> in <code>$str</code>, and it was either intentional, or due to a bug in your code."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490226479, "post_id": 42939399, "comment_id": 73023508, "body": "@ikegami What I mean is that if I use the code after &quot;EDIT&quot;, will that be solution to my issue?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490226848, "post_id": 42939399, "comment_id": 73023608, "body": "I thought that was clear from my Answer, but I rephrased it to be clearer: If you don&#39;t want <code>encode_entities($str)</code> to produce <code>&amp;#xFFFD;</code>, don&#39;t put character <code>0xFFFD</code> in <code>$str</code>. It was probably added as the result of a character-decoding error (e.g. bad input, or bad handling of the input). You&#39;ll need to debug to find the underlying problem."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490226982, "post_id": 42939399, "comment_id": 73023645, "body": "<code>utf8::decode($str);</code> makes absolutely no sense there. <code>$str</code> doesn&#39;t contain text encoded using UTF-8 if it contained character <code>0xFFFD</code>. (It will leave <code>$str</code> unchanged and return false to signal an error.)"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1490226674, "last_edit_date": 1490226674, "creation_date": 1490164300, "answer_id": 42944291, "question_id": 42939399, "link": "https://stackoverflow.com/questions/42939399/some-entities-not-displaying-in-browser/42944291#42944291", "title": "Some entities not displaying in browser", "body": "<p>If <code>encode_entities($str)</code> produces <code>&amp;#xFFFD;</code>, it's because <code>$str</code> contains character <code>0xFFFD</code>.</p>\n\n<p>So if you don't want <code>encode_entities($str)</code> to produce <code>&amp;#xFFFD;</code>, don't put character <code>0xFFFD</code> in <code>$str</code>. It was probably added as the result of a character-decoding error (e.g. bad input, or bad handling of the input). You'll need to debug to find the underlying problem.</p>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1490226674, "creation_date": 1490135443, "last_edit_date": 1490225944, "question_id": 42939399, "link": "https://stackoverflow.com/questions/42939399/some-entities-not-displaying-in-browser", "title": "Some entities not displaying in browser", "body": "<pre><code>use HTML::Entities;\n$output = encode_entities($str);\n</code></pre>\n\n<p>Sometimes the above function generates <code>&amp;#xFFFD;</code> which does not display in a browser, like this: &#xFFFD;  </p>\n\n<p>What is the problem and how can I get entities like this to display properly?  </p>\n\n<p>Would <code>encode_entities_numeric</code> be better instead?</p>\n\n<p>EDIT: Should I use the following instead?</p>\n\n<pre><code>use HTML::Entities;\nutf8::decode($str);\n$output = encode_entities($str);\n</code></pre>\n"}, {"tags": ["excel", "perl", "formatting", "ole", "strikethrough"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490131944, "post_id": 42937819, "comment_id": 72974050, "body": "It looks like you can access individual characters and character ranges with Win32::OLE: <a href=\"http://www.perlmonks.org/?node_id=888927\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=888927</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7101, "user_id": 4717755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ehiyK.png?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/4717755/petert"}, "is_accepted": false, "score": 1, "last_activity_date": 1490191639, "creation_date": 1490191639, "answer_id": 42954021, "question_id": 42937819, "link": "https://stackoverflow.com/questions/42937819/perl-or-python-and-excel-is-there-a-way-to-determine-font-types-used-in-multi/42954021#42954021", "title": "Perl (or Python) and Excel is there a way to determine font types used in multi-line text in a cell?", "body": "<p>This is a VBA solution, as I don't have Python installed on my machine. Hopefully it can show the way to access the formatting of individual characters.</p>\n\n<p>With the following is <code>Range(\"A1\")</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/3mopL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3mopL.png\" alt=\"enter image description here\"></a></p>\n\n\n\n<pre><code>Option Explicit\n\nSub test()\n    Dim wb As Workbook\n    Dim ws As Worksheet\n    Dim sentence As Range\n    Set wb = ThisWorkbook\n    Set ws = wb.ActiveSheet\n    Set sentence = ws.Range(\"A1\")\n\n    With sentence\n        Dim i As Long\n        For i = 1 To .Characters.Count\n            If .Characters(i, 1).Font.Strikethrough Then\n                Debug.Print \"strikethrough at character \" &amp; i\n            End If\n        Next i\n    End With\nEnd Sub\n</code></pre>\n\n<p>Gives the output:</p>\n\n<pre><code>strikethrough at character 17\nstrikethrough at character 18\nstrikethrough at character 19\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 1, "last_activity_date": 1490244875, "creation_date": 1490244875, "answer_id": 42967507, "question_id": 42937819, "link": "https://stackoverflow.com/questions/42937819/perl-or-python-and-excel-is-there-a-way-to-determine-font-types-used-in-multi/42967507#42967507", "title": "Perl (or Python) and Excel is there a way to determine font types used in multi-line text in a cell?", "body": "<p>Use <code>Spreadsheet::ParseExcel</code> to access individual cells as well as complex cells with multiple formats.  Complex cells will use <strong>Rich Text</strong> formatting, which you can access with the <code>$cell-&gt;get_rich_text()</code> method.  Here is an example looking for the <strong><strike>strikeout</strike></strong> format, both in individual cells, and as part of a multi-format cell, adapted from the synopsis of <a href=\"http://search.cpan.org/~dougw/Spreadsheet-ParseExcel-0.65/lib/Spreadsheet/ParseExcel.pm\" rel=\"nofollow noreferrer\">perldoc Spreadsheet::ParseExcel</a>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/qLeOB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qLeOB.png\" alt=\"lazy_dog.png\"></a></p>\n\n<p><strong>parse_lazy_dog.pl</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\nuse Spreadsheet::ParseExcel;\n\nmy $file = 'lazy_dog.xls';\nmy $parser   = Spreadsheet::ParseExcel-&gt;new();\nmy $workbook = $parser-&gt;parse($file);\n\nif ( !defined $workbook ) {\n    die $parser-&gt;error(), \".\\n\";\n}\n\nfor my $worksheet ( $workbook-&gt;worksheets() ) {\n\n    my ( $row_min, $row_max ) = $worksheet-&gt;row_range();\n    my ( $col_min, $col_max ) = $worksheet-&gt;col_range();\n\n    for my $row ( $row_min .. $row_max ) {\n        for my $col ( $col_min .. $col_max ) {\n\n            my $cell = $worksheet-&gt;get_cell( $row, $col );\n            next unless $cell;\n\n            print \"Row, Col          = ($row, $col)\\n\";\n            print \"Value             = \", $cell-&gt;value(),       \"\\n\";\n            print \"Unformatted Value = \", $cell-&gt;unformatted(), \"\\n\";\n\n            if ( my $rich = $cell-&gt;get_rich_text() ) {\n                # Multiple formats inside one cell\n                print \"     STRIKEOUT -&gt;   \";                \n                my $pos = 0;\n                for my $rich_elem (@$rich) {\n                    my ($char_pos, $font) = @$rich_elem;\n                    if ($font-&gt;{Strikeout}) {\n                        while ($pos++ &lt; $char_pos) {\n                            print \" \";\n                        }\n                    } else {\n                        while ($pos++ &lt;= $char_pos) {\n                            print \"^\";\n                        }\n                    }\n                }\n                print \"\\n\";\n\n            } else {\n                # Entire cell has same format\n                my $format = $cell-&gt;get_format();\n                my $is_strikeout = $format-&gt;{Font}-&gt;{Strikeout};\n                if ($is_strikeout) {\n                    print \"     STRIKEOUT -&gt;   \";\n                    print \"^\"x(length($cell-&gt;unformatted()));\n                    print \"\\n\";\n                }\n                print \"\\n\";\n            }\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Row, Col          = (0, 0)\nValue             = The\nUnformatted Value = The\n\nRow, Col          = (0, 1)\nValue             = quick\nUnformatted Value = quick\n\nRow, Col          = (0, 2)\nValue             = brown\nUnformatted Value = brown\n\nRow, Col          = (0, 3)\nValue             = fox\nUnformatted Value = fox\n\nRow, Col          = (0, 4)\nValue             = jumped\nUnformatted Value = jumped\n\nRow, Col          = (0, 5)\nValue             = under\nUnformatted Value = under\n     STRIKEOUT -&gt;   ^^^^^\n\nRow, Col          = (0, 6)\nValue             = over\nUnformatted Value = over\n\nRow, Col          = (0, 7)\nValue             = the\nUnformatted Value = the\n\nRow, Col          = (0, 8)\nValue             = lazy\nUnformatted Value = lazy\n\nRow, Col          = (0, 9)\nValue             = dog.\nUnformatted Value = dog.\n\nRow, Col          = (1, 0)\nValue             = THE QUICK BROWN FOX JUMPED UNDER OVER THE LAZY DOG.\nUnformatted Value = THE QUICK BROWN FOX JUMPED UNDER OVER THE LAZY DOG.\n     STRIKEOUT -&gt;                              ^^^^^\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 4451657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GtPgn.jpg?s=128&g=1", "display_name": "Tom N", "link": "https://stackoverflow.com/users/4451657/tom-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1490244875, "creation_date": 1490129115, "question_id": 42937819, "link": "https://stackoverflow.com/questions/42937819/perl-or-python-and-excel-is-there-a-way-to-determine-font-types-used-in-multi", "title": "Perl (or Python) and Excel is there a way to determine font types used in multi-line text in a cell?", "body": "<p>I have data coming as an Excel files where some cells contain strings that contain previous version of data represented as strikethrough characters. I know how to use Perl and OLE to parse/manipulate Excel files but I only seen text formatting being accessible on cell-level. Is there a way to access formatting on character-by-character base? The goal is to locate and eliminate all the text that was formatted as strikethrough.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1490120509, "post_id": 42935051, "comment_id": 72967393, "body": "Did you install the openssh package when you installed Cygwin?"}, {"owner": {"reputation": 655, "user_id": 4557493, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TzPf5.jpg?s=128&g=1", "display_name": "Jelani", "link": "https://stackoverflow.com/users/4557493/jelani"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490120541, "post_id": 42935051, "comment_id": 72967415, "body": "I&#39;m using Net::SSH::Expect instead of OpenSSH"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490120666, "post_id": 42935051, "comment_id": 72967487, "body": "Net::SSH::Expect expects the ssh program to be installed and in your PATH. The Cygwin openssh package provides usr/bin/ssh.exe. I&#39;m asking if you installed the openssh Cygwin package."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490120672, "post_id": 42935051, "comment_id": 72967492, "body": "@bigtime813 @ThisSuitIsBlackNot is asking for cygwin package installation. <code>Net::SSH::Expect</code> is perl module."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1490120708, "post_id": 42935051, "comment_id": 72967509, "body": "First line in the description of the documentation: &quot;This module is a wrapper to the ssh executable that is available in your system&#39;s $PATH.&quot;"}, {"owner": {"reputation": 655, "user_id": 4557493, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TzPf5.jpg?s=128&g=1", "display_name": "Jelani", "link": "https://stackoverflow.com/users/4557493/jelani"}, "edited": false, "score": 0, "creation_date": 1490120885, "post_id": 42935051, "comment_id": 72967613, "body": "Thanks...that fixed it...I assumed perl would install the required dependencies."}], "answers": [{"comments": [{"owner": {"reputation": 655, "user_id": 4557493, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TzPf5.jpg?s=128&g=1", "display_name": "Jelani", "link": "https://stackoverflow.com/users/4557493/jelani"}, "edited": false, "score": 0, "creation_date": 1490120902, "post_id": 42935377, "comment_id": 72967625, "body": "Thanks...that fixed it...I assumed perl would install the required dependencies."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 655, "user_id": 4557493, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TzPf5.jpg?s=128&g=1", "display_name": "Jelani", "link": "https://stackoverflow.com/users/4557493/jelani"}, "edited": false, "score": 1, "creation_date": 1490120967, "post_id": 42935377, "comment_id": 72967657, "body": "@bigtime813 Typically, that isn&#39;t the case for distributions that wrap external libraries due to compatibility issues, license issues etc."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1490121180, "post_id": 42935377, "comment_id": 72967787, "body": "If you installed Net::SSH::Expect using the Cygwin package manager, yeah, it should have installed <code>ssh</code> (but the packager would have had to add that dependency manually). If you installed Net::SSH::Expect through <code>cpan</code>/<code>cpanm</code>/etc, it should have failed without the dependency (if it has useful tests). (Did you force the install? Don&#39;t do that!!!!!!)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490121901, "post_id": 42935377, "comment_id": 72968294, "body": "@ikegami <i>Should</i> is the key word. The author <a href=\"https://metacpan.org/source/BNEGRAO/Net-SSH-Expect-1.09/Makefile.PL\" rel=\"nofollow noreferrer\">didn&#39;t put in any checks for the ssh binary</a>, not even in the <a href=\"https://metacpan.org/source/BNEGRAO/Net-SSH-Expect-1.09/t/Net-SSH-Expect.t\" rel=\"nofollow noreferrer\">tests</a>."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490122175, "post_id": 42935377, "comment_id": 72968466, "body": "@ThisSuitIsBlackNot What&#39;s more surprising is that there&#39;s only a single individual test for the whole distribution."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1490122302, "post_id": 42935377, "comment_id": 72968563, "body": "Yay completely useless test suite! Ok, I didn&#39;t do <a href=\"http://cpansearch.perl.org/src/IKEGAMI/WWW-Kickstarter-v1.8.0/t/\" rel=\"nofollow noreferrer\">better</a> in WWW::Kickstarter. At least I use it daily, so I&#39;ll know if it stops working :)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1490122352, "post_id": 42935377, "comment_id": 72968593, "body": "@stevieb I should have put &quot;tests&quot; in quotes ;)"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 2, "last_activity_date": 1490120810, "creation_date": 1490120810, "answer_id": 42935377, "question_id": 42935051, "link": "https://stackoverflow.com/questions/42935051/why-do-i-get-cant-exec-ssh-no-such-file-or-directory-when-i-try-to-use-net/42935377#42935377", "title": "Why do I get &#39;Can&#39;t exec &quot;ssh&quot; No such file or directory&#39; when I try to use Net::SSH::Expect in Cygwin?", "body": "<p><a href=\"https://metacpan.org/pod/distribution/Net-SSH-Expect/lib/Net/SSH/Expect.pod\" rel=\"nofollow noreferrer\">Net::SSH::Expect</a> requires SSH to be installed. It is not either/or.</p>\n\n<p>The first line in the module's <a href=\"https://metacpan.org/pod/distribution/Net-SSH-Expect/lib/Net/SSH/Expect.pod#DESCRIPTION\" rel=\"nofollow noreferrer\">description</a> states:</p>\n\n<blockquote>\n  <p>This module is a wrapper to the ssh executable that is available in your system's $PATH.</p>\n</blockquote>\n\n<p>So you have to install Cygwin's SSH package.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1490121025, "last_edit_date": 1490121025, "creation_date": 1490120929, "answer_id": 42935413, "question_id": 42935051, "link": "https://stackoverflow.com/questions/42935051/why-do-i-get-cant-exec-ssh-no-such-file-or-directory-when-i-try-to-use-net/42935413#42935413", "title": "Why do I get &#39;Can&#39;t exec &quot;ssh&quot; No such file or directory&#39; when I try to use Net::SSH::Expect in Cygwin?", "body": "<hr>\n\n<blockquote>\n  <p><em>I'm unsure how Perl prepended the \"usr\" folder in the path</em></p>\n</blockquote>\n\n<p>Cygwin is a unix emulation environment. Part of that includes emulating a unix file system. Cygwin programs don't use <code>C:</code>, but the virtual <code>/</code> directory. What you see as <code>C:\\cygwin64\\lib\\perl5\\site_perl\\5.22\\Expect.pm</code> is available in the cygwin environment as <code>/usr/lib/perl5/site_perl/5.22/Expect.pm</code>.</p>\n\n<p>This has nothing to do with your problem. It's <code>ssh</code> that can't be found, not <code>/usr/lib/perl5/site_perl/5.22/Expect.pm</code>.</p>\n\n<p>So run Cygwin's <code>setup</code> program and install <code>ssh</code>.</p>\n"}], "owner": {"reputation": 655, "user_id": 4557493, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TzPf5.jpg?s=128&g=1", "display_name": "Jelani", "link": "https://stackoverflow.com/users/4557493/jelani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 787, "favorite_count": 0, "accepted_answer_id": 42935377, "answer_count": 2, "score": 1, "last_activity_date": 1490121167, "creation_date": 1490119880, "last_edit_date": 1490121167, "question_id": 42935051, "link": "https://stackoverflow.com/questions/42935051/why-do-i-get-cant-exec-ssh-no-such-file-or-directory-when-i-try-to-use-net", "title": "Why do I get &#39;Can&#39;t exec &quot;ssh&quot; No such file or directory&#39; when I try to use Net::SSH::Expect in Cygwin?", "body": "<p>I'm receiving the below error message when I try to execute the below statement in my code.  The path in my error message doesn't exist.  As shown below, the path is actually located in /lib/perl5/site_perl/5.22/Expect.pm.  Im unsure how Perl prepended the \"usr\" folder in the path.  I'm receiving a similar error message when running other code. </p>\n\n<p><a href=\"https://i.stack.imgur.com/KGU4u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KGU4u.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Error message received:</strong></p>\n\n<p>Can't exec \"ssh\" No such file or directory at /usr/lib/perl5/site_perl/5.22/Expect.pm line 173.  </p>\n\n<p><strong>Snippet of my code:</strong></p>\n\n<pre><code>$ssh = Net::SSH::Expect-&gt;new(\nhost       =&gt; \"192.168.1.10\",\nuser       =&gt; 'username',\npassword   =&gt; 'password',\nraw_pty    =&gt; 1,\nlog_stdout =&gt; 1,\nno_terminal =&gt; 1, \n);\nmy $login_output = $ssh-&gt;login();\n</code></pre>\n\n<p><strong>Below are my environmental variables shown using perl -V</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/luGkd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/luGkd.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["perl", "merge", "intervals"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1490103983, "post_id": 42928964, "comment_id": 72955270, "body": "Can you rely on the ordering being consecutive like that? E.g. do you need to compare with <i>all</i> ranges, or just last one?"}, {"owner": {"reputation": 85, "user_id": 7629187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1393dec1c0b0bf744208e11f78d82ff6?s=128&d=identicon&r=PG&f=1", "display_name": "chrys", "link": "https://stackoverflow.com/users/7629187/chrys"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1490104971, "post_id": 42928964, "comment_id": 72956051, "body": "I can rely on consecutive ordering. If I understand you correctly I need to compare to all samples since I just want the longest consecutive non-overlapping range and there might be more then one. E.g a range which is not overlapping with anything should be returned as well."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1490105089, "post_id": 42928964, "comment_id": 72956143, "body": "Well, it&#39;s a bit harder if you had say, another &#39;SampleA&#39; line further down, that&#39;s got a different range, that&#39;s all. There might be a more efficient algorithm that builds in the iterative nature of your source data. (e.g. just looks at the &#39;most recent&#39; sample range, rather than all of them iteratively)"}, {"owner": {"reputation": 85, "user_id": 7629187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1393dec1c0b0bf744208e11f78d82ff6?s=128&d=identicon&r=PG&f=1", "display_name": "chrys", "link": "https://stackoverflow.com/users/7629187/chrys"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1490105197, "post_id": 42928964, "comment_id": 72956230, "body": "Efficiency at this point is not that important but precision. I will try to implement your code and get back to you. Your help is very much appreciated!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1490105462, "post_id": 42928964, "comment_id": 72956445, "body": "Note - I&#39;ve just edited it, because I spotted it needs <code>&gt;=</code> rather than <code>&gt;</code>."}, {"owner": {"reputation": 85, "user_id": 7629187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1393dec1c0b0bf744208e11f78d82ff6?s=128&d=identicon&r=PG&f=1", "display_name": "chrys", "link": "https://stackoverflow.com/users/7629187/chrys"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1490105711, "post_id": 42928964, "comment_id": 72956630, "body": "I found a mistake in my data which was a typo - the SampleA with 400 to 600 is supposed to be a SampleB - The sorting is absolutely reliable and was just a typo. Which is corrected now."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1490105131, "last_edit_date": 1490105131, "creation_date": 1490104705, "answer_id": 42929259, "question_id": 42928964, "link": "https://stackoverflow.com/questions/42928964/finding-and-merging-down-intervals-in-perl/42929259#42929259", "title": "Finding and merging down intervals in Perl", "body": "<p>I think I'd do it like this:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy %ranges;\n\n#iterate line by line. \nwhile (&lt;&gt;) {\n   chomp;\n   #split by line\n   my ( $name, $start_range, $end_range ) = split;\n   #set a variable to see if it's within an existing range. \n   my $in_range = 0;\n   #iterate all the existing ones. \n   foreach my $range ( @{ $ranges{$name} } ) {\n\n      #merge if start or end is 'within' this range. \n      if (\n         ( $start_range &gt;= $range-&gt;{start} and $start_range &lt;= $range-&gt;{end} )\n\n         or\n\n         ( $end_range &gt;= $range-&gt;{start} and $end_range &lt;= $range-&gt;{end} )\n        )\n      {\n\n\n         ## then the start or end is within the existing range, so add to it:\n         if ( $end_range &gt; $range-&gt;{end} ) {\n            $range-&gt;{end} = $end_range;\n         }\n         if ( $start_range &lt; $range-&gt;{start} ) {\n            $range-&gt;{start} = $start_range;\n         }\n         $in_range++;\n      }\n\n   }\n   #didn't find any matches, so create a new range identity. \n   if ( not $in_range ) {\n      push @{ $ranges{$name} }, { start =&gt; $start_range, end =&gt; $end_range };\n   }\n}\n\nprint Dumper \\%ranges;\n\n#iterate by sample\nforeach my $sample ( sort keys %ranges ) {\n   #iterate by range (sort by lowest start)\n   foreach\n     my $range ( sort { $a-&gt;{start} &lt;=&gt; $b-&gt;{start} } @{ $ranges{$sample} } )\n   {\n      print join \"\\t\", $sample, $range-&gt;{start}, $range-&gt;{end}, \"\\n\";\n   }\n}\n</code></pre>\n\n<p>Outputs with your data:</p>\n\n<pre><code>SampleA 100 600 \nSampleA 700 800 \nSampleA 900 1100    \nSampleA 1200    1900    \nSampleB 700 900 \nSampleB 1000    1800    \nSampleB 1900    2600    \nSampleB 3000    3600    \n</code></pre>\n\n<p>This probably isn't the most efficient algorithm though, because it checks <em>all</em> the ranges - but you probably don't need to, because the input data is ordered - you can just check the 'most recent' instead. </p>\n"}, {"tags": [], "owner": {"reputation": 17700, "user_id": 50902, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/19d468858e7d32da4a5bb6e49394fd52?s=128&d=identicon&r=PG", "display_name": "kmkaplan", "link": "https://stackoverflow.com/users/50902/kmkaplan"}, "is_accepted": false, "score": 3, "last_activity_date": 1490106449, "creation_date": 1490106449, "answer_id": 42929926, "question_id": 42928964, "link": "https://stackoverflow.com/questions/42928964/finding-and-merging-down-intervals-in-perl/42929926#42929926", "title": "Finding and merging down intervals in Perl", "body": "<p>As you input is nicely sorted, you can filter it efficiently using only fixed memory.</p>\n\n<pre><code>$_ = &lt;&gt; or exit;\nmy @sample = split;\nwhile (&lt;&gt;) {\n    my @newsample = split;\n    if ($sample[0] ne $newsample[0]\n        || $newsample[2] &lt; $sample[1]\n        || $sample[2] &lt; $newsample[1]) {\n        # Unmergeable sample\n        print \"$sample[0]\\t$sample[1]\\t$sample[2]\\n\";\n        @sample = @newsample;\n    }\n    elsif ($sample[1] &lt;= $newsample[1] &amp;&amp; $newsample[2] &lt;= $sample[2]) {\n        # @newsample is included in @sample. Nothing to do\n    }\n    elsif ($sample[1] &lt;= $newsample[1]) {\n        # This @newsample raises the upper limit\n        $sample[2] = $newsample[2];\n    }\n    elsif ($newsample[2] &lt;= $sample[2]) {\n        # This @newsample lowers the lower limit.\n        $sample[1] = $newsample[1];\n    }\n    else {\n        # This @newsample moves both limits\n        @sample = @newsample;\n    }\n}\n# Output the last sample\nprint \"$sample[0]\\t$sample[1]\\t$sample[2]\\n\";\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 7629187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1393dec1c0b0bf744208e11f78d82ff6?s=128&d=identicon&r=PG&f=1", "display_name": "chrys", "link": "https://stackoverflow.com/users/7629187/chrys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 1, "accepted_answer_id": 42929259, "answer_count": 2, "score": 0, "last_activity_date": 1550509816, "creation_date": 1490103907, "last_edit_date": 1550509816, "question_id": 42928964, "link": "https://stackoverflow.com/questions/42928964/finding-and-merging-down-intervals-in-perl", "title": "Finding and merging down intervals in Perl", "body": "<p>my input from a file looks like this:\nThe file has tab as delimiter and is sorted alphabetically for samples and numerically for the features in column 2 and 3. What I want to do is find overlapping and included features and merge them down to one feature.</p>\n\n<pre><code>SampleA 100 500\nSampleA 200 600\nSampleA 300 400\nSampleA 700 800\nSampleA 900 1100\nSampleA 1200    1500\nSampleA 1400    1700\nSampleA 1600    1900\nSampleB 400 600 \nSampleB 700 900 \nSampleB 1000    1800    \nSampleB 1500    1600\nSampleB 1900    2500    \nSampleB 2500    2600    \nSampleB 3000    3600    \nSampleB 3100    3400\n</code></pre>\n\n<p>For example:\nThe first three SampleA cases would become:</p>\n\n<pre><code>Sample A 100 600\n</code></pre>\n\n<p>My problem at the moment is that I can find the incidences when I iterate over my data structure but I am somewhat stuck when trying to merge my samples.\nMy idea was just to redo my loop until everything was found and merged but I am not sure on how to achieve this.\nAt the moment the data is stored in a 2D array like this:\n<code>@storage = [SampleA, start, stop]</code></p>\n\n<pre><code>my $j = 1;\n\nfor (my $i = 0; $i &lt; scalar(@storage); $i++) {\n\n    if ($storage[$i][0] eq $storage[$j][0]) {\n\n        if ($storage[$i][2] &gt; $storage[$j][1] &amp;&amp; $storage[$i][2] &lt; $storage[$j][2]) {\n\n            print \"Found Overlapp!\\n\";\n\n        }elsif ( $storage[$i][2] &gt; $storage[$j][1] &amp;&amp; $storage[$i][2] &gt; $storage[$j][2]) {\n\n            print \"Found Feature in Feature!\\n\";\n        }\n    }\n    unless ($j == scalar(@storage)){$j++};\n}\n</code></pre>\n\n<p>My goal would be to rerun this loop until no further match is found and thereby all intervals are non-overlapping but I am rather stuck here.</p>\n"}, {"tags": ["perl", "exception", "error-handling", "dbi"], "comments": [{"owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1490100962, "post_id": 42927732, "comment_id": 72952815, "body": "The DBIx::Error author looks like it&#39;s: Michael Brown &lt;mbrown@fensystems.co.uk&gt;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490102247, "post_id": 42927732, "comment_id": 72953850, "body": "The people in #dbic are also very very responsive."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1490102359, "post_id": 42927732, "comment_id": 72953929, "body": "It uses <a href=\"https://metacpan.org/pod/StackTrace::Auto\" rel=\"nofollow noreferrer\">metacpan.org/pod/StackTrace::Auto</a> under the hood as part of Throwable. That has some documentation on the args. Since all of those are roles, you&#39;d end up being able to pass those args that you want as <code>stack_trace_args =&gt; [ no_args =&gt; 1 ]</code> or similar to <code>DBIx::Error-&gt;new</code>."}, {"owner": {"reputation": 111, "user_id": 5904894, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8087bd829fb272e8de8ffb98902b8400?s=128&d=identicon&r=PG&f=1", "display_name": "dontPanic", "link": "https://stackoverflow.com/users/5904894/dontpanic"}, "edited": false, "score": 0, "creation_date": 1490191237, "post_id": 42927732, "comment_id": 73002368, "body": "I&#39;ve already contacted Michael Brown. He has handed over the maintenance of this module to Alexander Hartmaier. And Alexanders email seems to be broken."}, {"owner": {"reputation": 111, "user_id": 5904894, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8087bd829fb272e8de8ffb98902b8400?s=128&d=identicon&r=PG&f=1", "display_name": "dontPanic", "link": "https://stackoverflow.com/users/5904894/dontpanic"}, "edited": false, "score": 0, "creation_date": 1490194367, "post_id": 42927732, "comment_id": 73004976, "body": "<code>DBIx::Error</code> uses <code>MooseX::StrictConstructor</code>, so I cannot pass any other parameters, right? Or in which way I have to pass the arguments?"}, {"owner": {"reputation": 111, "user_id": 5904894, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8087bd829fb272e8de8ffb98902b8400?s=128&d=identicon&r=PG&f=1", "display_name": "dontPanic", "link": "https://stackoverflow.com/users/5904894/dontpanic"}, "edited": false, "score": 0, "creation_date": 1490257618, "post_id": 42927732, "comment_id": 73033811, "body": "Here is a example what I mean:"}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 5904894, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8087bd829fb272e8de8ffb98902b8400?s=128&d=identicon&r=PG&f=1", "display_name": "dontPanic", "link": "https://stackoverflow.com/users/5904894/dontpanic"}, "is_accepted": false, "score": 0, "last_activity_date": 1490363482, "last_edit_date": 1490363482, "creation_date": 1490258246, "answer_id": 42970882, "question_id": 42927732, "link": "https://stackoverflow.com/questions/42927732/how-do-i-limit-the-stack-trace-in-dbixerror/42970882#42970882", "title": "How do I limit the stack trace in DBIx::Error?", "body": "<p>Here is what I mean:</p>\n\n<pre><code>#!/usr/bin/perl \nuse strict;\nuse warnings;\nuse DBI;\nuse DBIx::Error;\nuse TryCatch;\n\ntry {\n    my $dbh = connectDatabase();\n    doSomeThingWithDatabase($dbh, \"i am a really long parameter and will not be shown complete in any logs\");\n} catch (DBIx::Error $e) {\n    print \"database error: \" . $e-&gt;message . \"\\n\"\n        . \"Trace: \" . $e-&gt;stack_trace \n        . \"\\n\";\n}\n\nsub connectDatabase {\n    my $dbh = DBI-&gt;connect($dsn, $user, $pass);\n    $dbh-&gt;{ShowErrorStatement} = 1;\n\n    # V1: works, but shows the full parameter\n    #$dbh-&gt;{HandleError} = DBIx::Error-&gt;HandleError;\n\n    # V2: works, but the stack_trace_args parameter gets ignored\n    $dbh-&gt;{HandleError} = DBIx::Error-&gt;HandleError(stack_trace_args =&gt; [no_args =&gt; 1]);\n\n    # V3: Any suggestions ????\n\n\n    return $dbh;\n}\n\nsub doSomeThingWithDatabase {\n    my ($dbh, $reallyLongParameter) = @_; \n    $dbh-&gt;do(\"selec foo from bar\");\n}\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 5904894, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8087bd829fb272e8de8ffb98902b8400?s=128&d=identicon&r=PG&f=1", "display_name": "dontPanic", "link": "https://stackoverflow.com/users/5904894/dontpanic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1490363482, "creation_date": 1490100767, "last_edit_date": 1490101800, "question_id": 42927732, "link": "https://stackoverflow.com/questions/42927732/how-do-i-limit-the-stack-trace-in-dbixerror", "title": "How do I limit the stack trace in DBIx::Error?", "body": "<p>The Perl <a href=\"https://metacpan.org/pod/DBIx::Error\" rel=\"nofollow noreferrer\"><code>DBIx::Error</code></a> module is fine for use in <code>HandleError</code> in Perl <code>DBI</code>.</p>\n\n<p>I wonder if there is an option to pass some arguments to\n<a href=\"https://metacpan.org/pod/DBIx::Error\" rel=\"nofollow noreferrer\"><code>DBIx::Error</code></a> down to  the underlying\n<a href=\"https://metacpan.org/pod/Devel::StackTrace\" rel=\"nofollow noreferrer\"><code>Devel::StackTrace</code></a>. That's because we use some really \nlong strings as arguments in function-calls. If I now call the \n<code>DBIx::Error-&gt;stack_trace</code> method, our logs are exploding.</p>\n\n<p><code>Devel::Stacktrace</code> knows the parameter <code>no_args</code>  and <code>max_arg_length</code>\nwhich are perfect for our needs. But how are they drilled down into \nthe StackTrace  package?</p>\n\n<p>The email of the actual maintainer of the module -  abraxxa@cpan.org - seems to be broken.</p>\n\n<p>Is there anybody with a helpful hint?</p>\n"}, {"tags": ["perl", "orm", "dbix-class"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1490105178, "post_id": 42927408, "comment_id": 72956214, "body": "Has DBIC::Schema::Loader picked up the many-to-one relationships between book and book_language and between language and book_language? What are they called?"}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1490105898, "post_id": 42927408, "comment_id": 72956771, "body": "@DaveCross Yes, loader picked them up, they are both named <code>book_language_rel</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1490105989, "post_id": 42927408, "comment_id": 72956826, "body": "That&#39;s a slightly strange name for schema loader to choose. See my answer below for more details."}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1490113677, "post_id": 42927408, "comment_id": 72963105, "body": "@DaveCross I have changed naming convetion by <code>inflect_singular</code> and <code>inflect_plural</code> options. But now generated without them and still got same error when tried to access <code>$book_rs-&gt;languages()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1490113975, "post_id": 42929654, "comment_id": 72963317, "body": "<code>has_many</code> name is <code>book_languages</code>, but in <code>many_to_many</code> you refer to <code>book_language</code>. Typo? Or am I missing some? Btw, one <code>multi_to_multi</code> is picked up by Loader too, but it gives me same error/result..."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1490114165, "post_id": 42929654, "comment_id": 72963458, "body": "Sorry, yes, typo. Fixed now."}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1490115567, "post_id": 42929654, "comment_id": 72964424, "body": "I added to question whole testcase. Maybe you can try it and look closer, where is err."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1490114147, "last_edit_date": 1490114147, "creation_date": 1490105772, "answer_id": 42929654, "question_id": 42927408, "link": "https://stackoverflow.com/questions/42927408/how-to-define-and-use-many-to-many-relationships-in-dbixclass/42929654#42929654", "title": "How to define and use many_to_many relationships in DBIx::Class?", "body": "<p>Many to many relationships build on the existing \"has_many\" and \"belongs_to\" relationships. If they aren't set up correctly, the many_to_many relationships won't work either. In your situation, I'd expect DBIC::Schema::Loader to generate the following relationships:</p>\n\n<p>In Book.pm</p>\n\n<pre><code>__PACKAGE__-&gt;has_many( 'book_languages'\n                       'Your::DBIC::Schema::BookLanguages',\n                       'bookID' );\n</code></pre>\n\n<p>In Language.pm</p>\n\n<pre><code>__PACKAGE__-&gt;has_many( 'book_languages'\n                       'Your::DBIC::Schema::BookLanguages',\n                       'languageID' );\n</code></pre>\n\n<p>In BookLanguage.pm</p>\n\n<pre><code>__PACKAGE__-&gt;belongs_to( 'book'.,\n                         'Your::DBIC::Schema::Book' );\n__PACKAGE__-&gt;belongs_to( 'language',\n                         'Your::DBIC::Schema::Language' );\n</code></pre>\n\n<p>Then you can manually add the following:</p>\n\n<p>In Book.pm</p>\n\n<pre><code>__PACKAGE-&gt;many_to_many( 'languages',\n                         'book_languages',\n                         'language' );\n</code></pre>\n\n<p>In Language.pm</p>\n\n<pre><code>__PACKAGE-&gt;many_to_many( 'books',\n                         'book_languages',\n                         'book' );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "is_accepted": true, "score": 3, "last_activity_date": 1551868093, "last_edit_date": 1551868093, "creation_date": 1490116734, "answer_id": 42934059, "question_id": 42927408, "link": "https://stackoverflow.com/questions/42927408/how-to-define-and-use-many-to-many-relationships-in-dbixclass/42934059#42934059", "title": "How to define and use many_to_many relationships in DBIx::Class?", "body": "<p>First note that <code>many_to_many</code> only generates helper methods (accessors) but are no 'real' relationships in the sense that you can't use them in join and prefetch parameters.</p>\n\n<p>The problem with your sample code is that you try to call a result method (the generated 'languages') on a resultset object.</p>\n\n<p>Calling <code>$rs-&gt;first-&gt;languages</code> for example will work.</p>\n\n<p>If you want all languages of all books in your <code>$book_rs</code> you'd have to use <code>search_related</code> on the two relationships forming the <code>many_to_many</code>. This won't hit the database if you prefetch the two or don't fetch the rs before in which case an optimized query is built and executed.</p>\n"}], "owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 1, "accepted_answer_id": 42934059, "answer_count": 2, "score": 5, "last_activity_date": 1551868093, "creation_date": 1490099961, "last_edit_date": 1490116055, "question_id": 42927408, "link": "https://stackoverflow.com/questions/42927408/how-to-define-and-use-many-to-many-relationships-in-dbixclass", "title": "How to define and use many_to_many relationships in DBIx::Class?", "body": "<p>I have 3 tables in DB, simplified as that:</p>\n\n<pre><code>book        book_language       language\n=====  &lt;-&gt;&gt; ============== &lt;&lt;-&gt; ========\nbookID      book_languageID     languageID\ntitle       bookID              language\n            languageID\n</code></pre>\n\n<p>With <code>DBIx::Class::Schema::Loader</code> I generated schema, where are corresponding Result classes:</p>\n\n<pre><code>Book\nBookLanguage\nLanguage\n</code></pre>\n\n<p>For some reasons <code>Loader</code> did not detect many_to_many relationship between those tables, so I defined relations myself like this in <code>Language</code> class: </p>\n\n<pre><code>package R::RMT::Result::Language;\n...\n__PACKAGE__-&gt;many_to_many('books' =&gt; 'book_language_rel', 'bookid_rel');\n</code></pre>\n\n<p>and in <code>Book</code> class:</p>\n\n<pre><code>package R::RMT::Result::Book;\n...\n__PACKAGE__-&gt;many_to_many('languages' =&gt; 'book_language_rel', 'languageid_rel');\n</code></pre>\n\n<p>Now I hoped to access all related languages as this:</p>\n\n<pre><code>my $dsn = \"DBI:mysql:database=rkBook\";\nmy $schema = R::RMT-&gt;connect( $dsn, 'user', 'pwd' );\n\nmy $book_rs = $schema-&gt;resultset('Book');\nsay $book_rs-&gt;languages();\n</code></pre>\n\n<p>But I got error:</p>\n\n<pre><code>Can't locate object method \"languages\" via package \"DBIx::Class::ResultSet\" at ...\n</code></pre>\n\n<p>What I got wrong? I tried clue together pieces from docs, but obviously I got something wrong. I never seen one complete example of how <code>many_to_many</code> relationship should work. </p>\n\n<p>AFAIU, defining relationship in Result class should make an accessor in this class. How could I see all genereated accessors? If I try to dump ResultSet object with <code>Data::Printer</code> I see only accessors for columns, but no accessors for relationships. </p>\n\n<p>If I try list relations with:</p>\n\n<pre><code>say $schema-&gt;source('Book')-&gt;relationships; \n</code></pre>\n\n<p>I don't see here <code>many_to_many</code> relations (also not those which are picked up by <code>DBIx::Class::Schema::Loader</code>), only <code>has_many</code>s and <code>belongs_to</code>s.</p>\n\n<p><strong>Edit. Added simplest testcase:</strong></p>\n\n<p>Create tables and populate with data</p>\n\n<pre><code>CREATE TABLE `book` (\n  `bookID` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `title` varchar(255) COLLATE utf8_estonian_ci NOT NULL DEFAULT '',\n  PRIMARY KEY (`bookID`),\n  KEY `title` (`title`)\n) ENGINE=InnoDB;\n\nCREATE TABLE `language` (\n  `languageID` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `language` varchar(255) COLLATE utf8_estonian_ci NOT NULL DEFAULT '',\n  PRIMARY KEY (`languageID`),\n  KEY `language` (`language`)\n) ENGINE=InnoDB;\n\nCREATE TABLE `book_language` (\n  `book_languageID` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `bookID` int(10) unsigned DEFAULT NULL,\n  `languageID` int(10) unsigned DEFAULT NULL,\n  PRIMARY KEY (`book_languageID`),\n  UNIQUE KEY `book_language` (`bookID`,`languageID`),\n  CONSTRAINT `book_language_ibfk_1` FOREIGN KEY (`languageID`) REFERENCES `language` (`languageID`) ON DELETE SET NULL,\n  CONSTRAINT `book_language_ibfk_2` FOREIGN KEY (`bookID`) REFERENCES `book` (`bookID`) ON DELETE SET NULL\n) ENGINE=InnoDB;\n\nINSERT INTO language (language) VALUES ('estonian'), ('english'), ('polish');\nINSERT INTO book (title) VALUES ('Eesti rahva ennemuistsed jutud'), ('Estonska-polska slovar'), ('21 facts about...'), ('Englis-Polish Dictionary');\nINSERT INTO book_language (bookID, languageID) VALUES (1,1), (2,1), (2,3),(3,1),(3,2),(3,3),(4,2),(4,3);\n</code></pre>\n\n<p>Generate schema with defaults:</p>\n\n<pre><code>dbicdump -o dump_directory=./lib -o debug=1 My::Schema 'dbi:mysql:dbname=testbook' user password\n</code></pre>\n\n<p>Added <code>many_to_many</code>-definitions in <code>Book.pm</code></p>\n\n<pre><code># Created by DBIx::Class::Schema::Loader v0.07046 @ 2017-03-21 18:49:05\n# DO NOT MODIFY THIS OR ANYTHING ABOVE! md5sum:ipamXRkSe+HLXGdTGwzQ9w\n__PACKAGE__-&gt;many_to_many('languages' =&gt; 'book_languages', 'languageid');\n</code></pre>\n\n<p>And in <code>Language.pm</code></p>\n\n<pre><code># Created by DBIx::Class::Schema::Loader v0.07046 @ 2017-03-21 18:49:05\n# DO NOT MODIFY THIS OR ANYTHING ABOVE! md5sum:nZyaWdriRpgEWDAcO3+CFw\n__PACKAGE__-&gt;many_to_many('books' =&gt; 'book_languages', 'bookid');\n</code></pre>\n\n<p>Run this script:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict; use warnings; use 5.014; use utf8::all;\nuse My::Schema;\n\nmy $dsn = \"DBI:mysql:database=testbook\";\nmy $schema = My::Schema-&gt;connect( $dsn, 'user', 'password' );\n\nmy $book_rs = $schema-&gt;resultset('Book');\nsay $book_rs-&gt;languages();\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 2, "creation_date": 1490098491, "post_id": 42926734, "comment_id": 72950929, "body": "<code>perl -MData::Dumper -E &#39;say Dumper \\%INC&#39;</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1490099077, "post_id": 42926734, "comment_id": 72951397, "body": "See also <a href=\"http://stackoverflow.com/q/41707660/2173773\">Determine absolute path of module without using require</a>"}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 3, "creation_date": 1490110653, "post_id": 42927115, "comment_id": 72960647, "body": "If you omit the <code>-m</code> and your module contains no POD, you&#39;ll get &quot;no documentation found&quot; rather than the path."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1490114585, "post_id": 42927115, "comment_id": 72963739, "body": "Note that the <code>Foo&#47;Mod.pm</code> key format is used on Windows too. Using <code>( $pkg =~ s{::}{&#47;}gr ) . &#39;.pm&#39;</code> is portable. (See the <a href=\"http://search.cpan.org/perldoc?if\" rel=\"nofollow noreferrer\">if</a> module for some corroboration.)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 6, "last_activity_date": 1490104810, "last_edit_date": 1490104810, "creation_date": 1490099134, "answer_id": 42927115, "question_id": 42926734, "link": "https://stackoverflow.com/questions/42926734/is-there-a-way-to-tell-which-inc-path-a-module-was-loaded-from/42927115#42927115", "title": "Is there a way to tell which @INC path a module was loaded from?", "body": "<p>That's what the <code>%INC</code> hash is for. It shows you where a module was loaded from.</p>\n\n<pre><code>$ perl -MDBI -MData::Dumper -E'say Dumper \\%INC'\n$VAR1 = {\n          'XSLoader.pm' =&gt; '/usr/share/perl5/XSLoader.pm',\n          'warnings/register.pm' =&gt; '/usr/share/perl5/warnings/register.pm',\n          'List/Util.pm' =&gt; '/usr/local/lib64/perl5/List/Util.pm',\n          'warnings.pm' =&gt; '/usr/share/perl5/warnings.pm',\n          'DBI.pm' =&gt; '/usr/lib64/perl5/vendor_perl/DBI.pm',\n          'overloading.pm' =&gt; '/usr/share/perl5/overloading.pm',\n          'Config.pm' =&gt; '/usr/lib64/perl5/Config.pm',\n          'Carp.pm' =&gt; '/usr/share/perl5/vendor_perl/Carp.pm',\n          'bytes.pm' =&gt; '/usr/share/perl5/bytes.pm',\n          'Exporter/Heavy.pm' =&gt; '/usr/share/perl5/vendor_perl/Exporter/Heavy.pm',\n          'Scalar/Util.pm' =&gt; '/usr/local/lib64/perl5/Scalar/Util.pm',\n          'strict.pm' =&gt; '/usr/share/perl5/strict.pm',\n          'Exporter.pm' =&gt; '/usr/share/perl5/vendor_perl/Exporter.pm',\n          'vars.pm' =&gt; '/usr/share/perl5/vars.pm',\n          'constant.pm' =&gt; '/usr/share/perl5/vendor_perl/constant.pm',\n          'overload.pm' =&gt; '/usr/share/perl5/overload.pm',\n          'DynaLoader.pm' =&gt; '/usr/lib64/perl5/DynaLoader.pm',\n          'Data/Dumper.pm' =&gt; '/usr/lib64/perl5/vendor_perl/Data/Dumper.pm',\n          'feature.pm' =&gt; '/usr/share/perl5/feature.pm'\n        };\n</code></pre>\n\n<p><strong>Update:</strong> Actually, there's an easier method.</p>\n\n<pre><code>$ perldoc -lm Your::Module\n</code></pre>\n"}], "owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 42927115, "answer_count": 1, "score": 5, "last_activity_date": 1490104810, "creation_date": 1490098130, "question_id": 42926734, "link": "https://stackoverflow.com/questions/42926734/is-there-a-way-to-tell-which-inc-path-a-module-was-loaded-from", "title": "Is there a way to tell which @INC path a module was loaded from?", "body": "<p><strong><em>Use case</em></strong></p>\n\n<p>My sysadmin just installed a Perl module via <code>rpm</code> and despite the fact that I can successfully <code>use</code> it in a one-liner, I want to know where the module was installed.</p>\n\n<p>I can obviously comb through each of the path locations in <code>@INC</code>, but is there a way for Perl to tell me where it successfully loaded the module from?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1490097597, "post_id": 42926333, "comment_id": 72950290, "body": "<a href=\"https://perldoc.perl.org/functions/length.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/length.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 181, "user_id": 1972810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd7878e1aae049e480c8b7ebbbcef606?s=128&d=identicon&r=PG", "display_name": "RSCh", "link": "https://stackoverflow.com/users/1972810/rsch"}, "is_accepted": false, "score": 0, "last_activity_date": 1490100468, "last_edit_date": 1490100468, "creation_date": 1490097394, "answer_id": 42926439, "question_id": 42926333, "link": "https://stackoverflow.com/questions/42926333/perl-regex-to-find-all-strings-formed-using-substring/42926439#42926439", "title": "Perl Regex to find all strings formed using substring", "body": "<p>The best way is next: <code>((?:abc)+)</code> with sorting after finding matches</p>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 2, "last_activity_date": 1490099679, "last_edit_date": 1490099679, "creation_date": 1490097599, "answer_id": 42926524, "question_id": 42926333, "link": "https://stackoverflow.com/questions/42926333/perl-regex-to-find-all-strings-formed-using-substring/42926524#42926524", "title": "Perl Regex to find all strings formed using substring", "body": "<p>Try as below one</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $sentence = \"zsabcxyzabcabcabccde_xdrabcabcrte__23abcerabcabccbabacxyz\";\n\nmy ($larg) = sort{length($b)&lt;=&gt;length($a)} $sentence =~ m/((?:abc)+)/g;\n\nprint $larg,\"\\n\";\n</code></pre>\n\n<hr>\n\n<p>If don't want to store it means, make a loop</p>\n\n<pre><code>use warnings;\nuse strict;\nmy $sentence = \"zsabcxyzabcabcabccde_xdrabcabcrte__23abcerabcabccbabacxyzabcabcabcabc\";\nmy $longstr;\nmy $len = 0;\nwhile($sentence=~m/((?:abc)+)/g)\n{\n    $longstr = $1 and $len = length($1) if(length($1) &gt; $len)\n}\n</code></pre>\n\n<p>the above one is in single regex with <code>(?{})</code> but <strong>not recommended</strong> </p>\n\n<pre><code>my $sentence = \"zsabcxyzabcabcabccde_xdrabcabcrte__23abcerabcabccbabacxyzabcabcabcabc\";\nmy $lar = 0;\nmy $larg;\n$sentence=~m/((?:abc)+)(?{ $larg = $1 and $lar=(length $1) if(length $1 &gt; $lar )}) \\G/x;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1490098928, "post_id": 42926595, "comment_id": 72951281, "body": "Might be necessary to escape meta characters in  <code>$substring</code> (quotemeta)"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1490098149, "last_edit_date": 1490098149, "creation_date": 1490097762, "answer_id": 42926595, "question_id": 42926333, "link": "https://stackoverflow.com/questions/42926333/perl-regex-to-find-all-strings-formed-using-substring/42926595#42926595", "title": "Perl Regex to find all strings formed using substring", "body": "<p>Compile a regex using a quantifier. <code>+</code> says 'one or more'.</p>\n\n<p>So your \"substr\" becomes <code>((?:abc)+)</code> the outer brackets to 'capture', the inner brackets non capturing. Otherwise you'll also get the 'partial' hits in the array - although the net result isn't changed much, because the longest hit will still sort to the top. </p>\n\n<p>For example:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $sentence = \"zsabcxyzabcabcabccde_xdrabcabcrte__23abcerabcabccbabacxyz\";\nmy $substring = \"abc\";\nmy $regex = qr/((?:$substring)+)/;\nmy @matches = $sentence =~ m/$regex/g;\n\nprint Dumper \\@matches;\n\n#Then sort it:\n\nmy ( $longest ) = sort { length ( $b ) &lt;=&gt; length ( $a ) } @matches;\n\nprint $longest,\"\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490112706, "post_id": 42932441, "comment_id": 72962388, "body": "Don&#39;t write a comment as an answer. You can put this as a comment below your question or edit it into your question. Please see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}, {"owner": {"reputation": 41, "user_id": 696157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xoeTw.jpg?s=128&g=1", "display_name": "Nix", "link": "https://stackoverflow.com/users/696157/nix"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490113030, "post_id": 42932441, "comment_id": 72962616, "body": "this is not just a comment. Can be considered as a different answer."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490113812, "post_id": 42932441, "comment_id": 72963186, "body": "Ok, I missed the <code>&#47;n</code> flag. Great that you found it, but still it could be posted as a comment I think"}], "tags": [], "owner": {"reputation": 41, "user_id": 696157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xoeTw.jpg?s=128&g=1", "display_name": "Nix", "link": "https://stackoverflow.com/users/696157/nix"}, "is_accepted": false, "score": 1, "last_activity_date": 1490112482, "creation_date": 1490112482, "answer_id": 42932441, "question_id": 42926333, "link": "https://stackoverflow.com/questions/42926333/perl-regex-to-find-all-strings-formed-using-substring/42932441#42932441", "title": "Perl Regex to find all strings formed using substring", "body": "<p>Thanks to @mkHun and @Sobrique... \nI have used <strong>@matches = $str =~ m/(abc)+/ng;</strong> and then sorting. \n/n makes it looks much simpler which is available from 5.22, i think.</p>\n"}], "owner": {"reputation": 41, "user_id": 696157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xoeTw.jpg?s=128&g=1", "display_name": "Nix", "link": "https://stackoverflow.com/users/696157/nix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1490112482, "creation_date": 1490097104, "last_edit_date": 1490097316, "question_id": 42926333, "link": "https://stackoverflow.com/questions/42926333/perl-regex-to-find-all-strings-formed-using-substring", "title": "Perl Regex to find all strings formed using substring", "body": "<p>Using Perl RegEx, How to find largest superstring in a sentence, when superstring is a repeatation of 1 or more substring.</p>\n\n<p>For Ex: </p>\n\n<pre><code>$sentence = \"zsabcxyzabcabcabccde_xdrabcabcrte__23abcerabcabccbabacxyz\";\n\n$subStr = \"abc\";\n</code></pre>\n\n<p>I want to find all the occurrences of abc and largest one in that. </p>\n\n<p>Output:</p>\n\n<pre><code>abc\n\nabcabcabc\n\nabcabc\n\nabc\n\nabcabc\n</code></pre>\n\n<p>Largest string is abcabcabc</p>\n"}, {"tags": ["perl", "unicode"], "answers": [{"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1490176070, "post_id": 42937740, "comment_id": 72991268, "body": "Yep it will give the result what I&#39;m looking for. I already tried it but the problem is <code>binmode(STDOUT, &#39;:encoding(utf8)&#39;);</code> it is decode the all kind of characters. For example, let consider the following Bulgarian character <code>\u0421\u043e\u043a\u043e\u0438\u0437\u0442\u0438\u0441\u043a\u0432\u0430\u0447\u043a\u0430 </code> it will decode by the <code>binmode</code>"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1490176265, "post_id": 42937740, "comment_id": 72991404, "body": "I solved this problem by <code>$clean=~s&#47;(\\&amp;\\#?\\w+\\;)&#47;encode(&quot;utf-8&quot;,decode_entities($1))&#47;e&zwnj;&#8203;gs</code> this code. But I cannot understand what is the reason behind to encode the all character when using HTML::Entities."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1490176385, "post_id": 42937740, "comment_id": 72991497, "body": "<code>$clean=~s&#47;(\\&amp;\\#?\\w+\\;)&#47;decode_entities($1)&#47;e\u200c\u200bgs</code> it means It will replace the particular character only. Why then <code>\\u</code> character getting replaced.?"}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 0, "last_activity_date": 1490131216, "last_edit_date": 1490131216, "creation_date": 1490128891, "answer_id": 42937740, "question_id": 42925367, "link": "https://stackoverflow.com/questions/42925367/htmlentities-formatting-issue/42937740#42937740", "title": "HTML::Entities formatting issue?", "body": "<p>The <code>chr</code> built-in function already returns Unicode characters in Perl's internal encoding, so your use of <code>encode</code> is not correct here. If anything, you would <em>decode</em> your input data, but that wouldn't be correct here, either. </p>\n\n<p>I removed the call to <code>encode</code> and also made a few other minor changes, such as calling <code>decode_entities</code> on the entire string instead of selectively via an executable substitution.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse HTML::Entities;\n\nsub Remove_Spaces {\n    my $clean = shift;\n    $clean =~ s/\\\\u00(\\w{2})/chr(hex($1))/eg;  # match should probably be: ([0-9a-f]{2})\n    $clean =~ s/^\\s+|\\s+$//g;\n    $clean =~ s/\\s+/ /g;\n    return decode_entities($clean);\n}\n\nmy $cont = do { local $/; &lt;DATA&gt; };\n$cont = Remove_Spaces($cont);\nbinmode(STDOUT, ':encoding(utf8)');  # avoid 'wide character in print' warnings\nprint \"$cont\\n\";\n\n__DATA__\nsympa et comp\\u00e9ten c\\u00e2ble 19&amp;euro; e\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>sympa et comp\u00e9ten c\u00e2ble 19\u20ac e\n</code></pre>\n"}], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576405549, "creation_date": 1490094536, "last_edit_date": 1576405549, "question_id": 42925367, "link": "https://stackoverflow.com/questions/42925367/htmlentities-formatting-issue", "title": "HTML::Entities formatting issue?", "body": "<p>I'm trying to decode the HTML character along with <code>\\u</code> character in perl. So I tried, the below one</p>\n\n<pre><code>use Encode;\nuse HTML::Entities;\n\nmy $cont= do{local $/; &lt;DATA&gt; };\n$cont=Remove_Spaces($cont);\nprint \"$cont\\n\";\nsub Remove_Spaces\n{\n    my $clean=shift;\n    $clean =~s/\\\\u00(\\w{2})/encode(\"utf-8\",chr(hex($1)))/egs;\n    #$clean=~s/(\\&amp;\\#?\\w+\\;)/decode_entities($1)/egs;\n    $clean=~s/^\\s+|\\s+$//igs;\n    $clean=~s/\\s+/ /igs;\n    return $clean;\n}\n\n__DATA__\nsympa et comp\\u00e9ten c\\u00e2ble 19&amp;euro; e\n</code></pre>\n\n<p>I'm expecting output is </p>\n\n<pre><code>sympa et comp\u00e9ten c\u00e2ble 19\u20ac some data\n</code></pre>\n\n<hr>\n\n<p>But when I run the script with HTML::Entities it gives the result as follow,</p>\n\n<pre><code>sympa et comp\u00c3\u00a9ten c\u00c3\u00a2ble 19\u20ac e\n</code></pre>\n\n<p>Above output unicode characters all are wrongly formated.</p>\n\n<hr>\n\n<p>When I'm comment the HTML::Entities it gives the following results,</p>\n\n<pre><code>sympa et comp\u00e9ten c\u00e2ble 19&amp;euro; e\n</code></pre>\n\n<p>Above output entities characters all not formated.</p>\n\n<p>I don't know what is the problem here.</p>\n\n<hr>\n\n<p>I also tried single character substitution (As same RegEx substitution) </p>\n\n<pre><code>sub Remove_Spaces\n{\n    my $clean=shift;\n    $clean=~s/\\s*&lt;[^&gt;]*?&gt;\\s*/ /igs;\n    while($clean=~m/(\\&amp;\\#?\\w+\\;)/igs)\n    {\n        my $find    = $1;\n        my $replace = decode_entities($find);\n        my $pos = index($clean, $find);\n        while($pos &gt; -1) \n        {\n            substr($clean, $pos, length($find), $replace);\n            $pos = index($clean, $find, $pos + length($replace));\n        }\n    }\n\n    while($clean=~m/(\\\\u00(\\w{2}))/igs)\n    {\n        my $find    = $1;\n\n        my $replace = encode(\"utf8\",chr(hex($2)));\n        #print ord($replace),\"\\t$replace***\\n\";     \n\n        my $pos = index($clean, $find);\n        while($pos &gt; -1) \n        {\n            substr($clean, $pos, length($find), $replace);\n\n            $pos = index($clean, $find, $pos + length($replace));\n        }\n    }\n\n    $clean=~s/^\\s+|\\s+$//igs;\n    $clean=~s/\\s+/ /igs;\n    return $clean;\n}\n</code></pre>\n\n<p>In the above code I'm replacing only one character using <code>substr</code>. Then why is will affect the <code>\\u</code> characters? </p>\n\n<p>How can I fix it?</p>\n"}, {"tags": ["perl", "redis", "hyperloglog"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1490092231, "post_id": 42924393, "comment_id": 72946294, "body": "Isn&#39;t hyperloglog about counting unique things, and you&#39;re counting the same thing over and over?"}], "answers": [{"comments": [{"owner": {"reputation": 1047, "user_id": 1191999, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8a5575da1a4d6205f568754e55294cfb?s=128&d=identicon&r=PG", "display_name": "Ram", "link": "https://stackoverflow.com/users/1191999/ram"}, "edited": false, "score": 0, "creation_date": 1490162703, "post_id": 42926646, "comment_id": 72983947, "body": "Yes , I need a Bloom Filter, but as a server. Because I have multiple"}, {"owner": {"reputation": 1047, "user_id": 1191999, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8a5575da1a4d6205f568754e55294cfb?s=128&d=identicon&r=PG", "display_name": "Ram", "link": "https://stackoverflow.com/users/1191999/ram"}, "edited": false, "score": 0, "creation_date": 1490163170, "post_id": 42926646, "comment_id": 72984133, "body": "Yes , I need a Bloom Filter, but as a server. Because I have multiple applications from different servers. All of them need to check if a particular element exists in a set or not. This has to be very efficient and the sets will be persistent for 2-3 months Is there a ready  Bloom filter server I can use"}, {"owner": {"reputation": 14359, "user_id": 5384363, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/975cbfcd1c4997cb9e85887a5271d48f?s=128&d=identicon&r=PG&f=1", "display_name": "for_stack", "link": "https://stackoverflow.com/users/5384363/for-stack"}, "reply_to_user": {"reputation": 1047, "user_id": 1191999, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8a5575da1a4d6205f568754e55294cfb?s=128&d=identicon&r=PG", "display_name": "Ram", "link": "https://stackoverflow.com/users/1191999/ram"}, "edited": false, "score": 1, "creation_date": 1490171748, "post_id": 42926646, "comment_id": 72988489, "body": "@Ram As I mentioned, you can use Redis as the backend server to implement the bloom filter. You can google for open source projects. Also, it&#39;s NOT hard to implement one by yourself with lua scripting and the <code>GETBIT</code> and <code>SETBIT</code> commands."}, {"owner": {"reputation": 1047, "user_id": 1191999, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8a5575da1a4d6205f568754e55294cfb?s=128&d=identicon&r=PG", "display_name": "Ram", "link": "https://stackoverflow.com/users/1191999/ram"}, "edited": false, "score": 0, "creation_date": 1490197945, "post_id": 42926646, "comment_id": 73007868, "body": "I have been looking at implementations at redislabs cuckoo filters seem to be better than bloom filters for existence checks. My question : is using in memory filters  a good idea for persistent data storage. The application needs that if a particular user is sent a communication then he must not be sent the same category for 90 days"}, {"owner": {"reputation": 14359, "user_id": 5384363, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/975cbfcd1c4997cb9e85887a5271d48f?s=128&d=identicon&r=PG&f=1", "display_name": "for_stack", "link": "https://stackoverflow.com/users/5384363/for-stack"}, "reply_to_user": {"reputation": 1047, "user_id": 1191999, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8a5575da1a4d6205f568754e55294cfb?s=128&d=identicon&r=PG", "display_name": "Ram", "link": "https://stackoverflow.com/users/1191999/ram"}, "edited": false, "score": 0, "creation_date": 1490199636, "post_id": 42926646, "comment_id": 73009115, "body": "@Ram Redis support persistence. You can use <code>RDB</code>, <code>AOF</code> or both to write data to disk, although the persistence might lose a little data if Redis shutdown unexpected. I think you can tolerate some error, since you&#39;re using bloom filter or cuckoo filter. So that won&#39;t be a problem. Check the documentation for details on Redis persistence."}], "tags": [], "owner": {"reputation": 14359, "user_id": 5384363, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/975cbfcd1c4997cb9e85887a5271d48f?s=128&d=identicon&r=PG&f=1", "display_name": "for_stack", "link": "https://stackoverflow.com/users/5384363/for-stack"}, "is_accepted": true, "score": 4, "last_activity_date": 1490097907, "creation_date": 1490097907, "answer_id": 42926646, "question_id": 42924393, "link": "https://stackoverflow.com/questions/42924393/redis-hll-too-many-false-positives/42926646#42926646", "title": "redis HLL too many false positives", "body": "<p><code>HyperLogLog</code> is used for counting unique items. It can count a large number of items with a little memory. However, the returned cardinality is NOT exact, but approximated with a <code>standard error</code>.</p>\n\n<p><strong>0.81%</strong> is the <code>standard error</code>, NOT the false positive. For your instance, you can call <code>PFCOUNT HLL</code> to get the approximated number of unique items you put into the <code>HyperLogLog</code>. The returned number should be in range of <code>[10000 * (1 - 0.81%), 10000 * (1 + 0.81%)]</code>.</p>\n\n<p><code>PFADD</code> returns 1 if the estimated cardinality is changed after executing the command. It returns 0, otherwise. It has nothing to do with <code>false positive</code>.</p>\n\n<p>It seems what you need is a <a href=\"https://en.wikipedia.org/wiki/Bloom_filter\" rel=\"nofollow noreferrer\">Bloom Filter</a>, which can tell you if an item already exists in a data set, with false positive. You can implement a <code>Bloom Filter</code> with Redis, of course. And there should be some open source project for that.</p>\n"}], "owner": {"reputation": 1047, "user_id": 1191999, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8a5575da1a4d6205f568754e55294cfb?s=128&d=identicon&r=PG", "display_name": "Ram", "link": "https://stackoverflow.com/users/1191999/ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 577, "favorite_count": 1, "accepted_answer_id": 42926646, "answer_count": 1, "score": 1, "last_activity_date": 1490097907, "creation_date": 1490092029, "question_id": 42924393, "link": "https://stackoverflow.com/questions/42924393/redis-hll-too-many-false-positives", "title": "redis HLL too many false positives", "body": "<p>Hyperlog log is a probablistic algorithm \nAccording to the redis HLL document , we could get 0.81% of error but I get errors like 17-20% </p>\n\n<p>I think there is something wrong .. This is my simple perl test script. Is there some error  </p>\n\n<pre><code>#!/usr/bin/perl -w                                                                                                                                                       \nuse Redis;\nmy $redis = Redis-&gt;new(server=&gt;'192.168.50.166:6379') or die;\nmy $fp=0;\nmy $HLL=\"HLL\";\n\n$redis-&gt;del($HLL);\nforeach my $i (1..10000) {\n  my $s1 = $redis-&gt;pfadd($HLL,$i);\n  if($s1 == 0){ \n    print \"False positive on $i\\n\";\n    $fp++;\n  }\n}\nprint \"count of false positives $fp\\n\";\n</code></pre>\n"}, {"tags": ["perl", "post"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1490097401, "post_id": 42923828, "comment_id": 72950147, "body": "What is <code>$request-&gt;status_line</code>?"}, {"owner": {"reputation": 13, "user_id": 7744572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e89eaa38d80a9fefb08e0a520949a0?s=128&d=identicon&r=PG&f=1", "display_name": "lalix89", "link": "https://stackoverflow.com/users/7744572/lalix89"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490102335, "post_id": 42923828, "comment_id": 72953916, "body": "@ThisSuitIsBlackNot $request-&gt;status_line is &#39;302 Found&#39;."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490109278, "post_id": 42923828, "comment_id": 72959533, "body": "Minor side-note, but <code>$request = $ua-&gt;request($req);</code> should actually be <code>$response = $ua-&gt;request($req);</code>, since <code>$ua-&gt;request</code> returns a response object."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7744572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e89eaa38d80a9fefb08e0a520949a0?s=128&d=identicon&r=PG&f=1", "display_name": "lalix89", "link": "https://stackoverflow.com/users/7744572/lalix89"}, "edited": false, "score": 0, "creation_date": 1490109990, "post_id": 42930996, "comment_id": 72960142, "body": "Thank you so much! Also thanks for the side-note, I have changed that too."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 2, "last_activity_date": 1490109062, "creation_date": 1490109062, "answer_id": 42930996, "question_id": 42923828, "link": "https://stackoverflow.com/questions/42923828/same-code-different-url-not-working/42930996#42930996", "title": "Same code different URL not working?", "body": "<p>You're receiving an <a href=\"https://en.wikipedia.org/wiki/HTTP_302\" rel=\"nofollow noreferrer\">HTTP 302</a> response, which is a redirect. By default, LWP::UserAgent doesn't follow redirects with POST requests. To change this, alter the user agent's <a href=\"https://metacpan.org/pod/LWP::UserAgent#requests_redirectable\" rel=\"nofollow noreferrer\"><code>requests_redirectable</code></a> array before sending the request:</p>\n\n<pre><code>push @{ $ua-&gt;requests_redirectable }, 'POST';\nmy $response = $ua-&gt;request($req);\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7744572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e89eaa38d80a9fefb08e0a520949a0?s=128&d=identicon&r=PG&f=1", "display_name": "lalix89", "link": "https://stackoverflow.com/users/7744572/lalix89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 1, "accepted_answer_id": 42930996, "answer_count": 1, "score": 1, "last_activity_date": 1490109181, "creation_date": 1490090616, "last_edit_date": 1490109181, "question_id": 42923828, "link": "https://stackoverflow.com/questions/42923828/same-code-different-url-not-working", "title": "Same code different URL not working?", "body": "<p>OK, this is driving me mad. I currently run a background script on our server that logs in to our SagePay account every 5 minutes and updates currently logged in users on our local database.</p>\n\n<p>SagePay rolled out a new admin system some time ago but due to many complaints kept the old version running alongside so I never bothered to update my script. SagePay have now decided to decommission the old version so I have no choice.</p>\n\n<p>The following code is just the first part of script that logs in to SagePay:</p>\n\n<pre><code>use LWP::UserAgent;\nuse HTTP::Cookies;\nuse HTTP::Request;\nuse HTTP::Headers;\nuse HTTP::Request::Common qw(POST);\n\nmy $request = \"\";\nmy $content = \"\";\nmy $req = \"\";\n\nmy $cookie_jar = HTTP::Cookies-&gt;new();\nmy $ua = LWP::UserAgent-&gt;new();\n$ua-&gt;cookie_jar($cookie_jar);\n$ua-&gt;agent('Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)');\n\n# LOGIN TO SAGEPAGY\n$req = (POST 'https://portal.sagepay.com/myoldskool/loginpage.asp',\n[\"vendorname\" =&gt; \"MYVENDORNAME\",\n\"username\" =&gt; \"MYUSERNAME\",\n\"password\" =&gt; \"MYPASSWORD\",\n\"clickedButton\" =&gt; \"login\"]);\n\n$request = $ua-&gt;request($req);\n$content = $request-&gt;content;\nprint $content;\n</code></pre>\n\n<p>This code works perfectly every time and prints the HTML of the SagePay dashboard as it would if you logged in.\nThe new POST url is <a href=\"https://portal.sagepay.com/mysagepay/j_spring_security_check\" rel=\"nofollow noreferrer\">https://portal.sagepay.com/mysagepay/j_spring_security_check</a> and the parameters that need to be passed are pretty much the same, so technically I should just need to make the following alterations to the code and it should work:</p>\n\n<pre><code>$req = (POST 'https://portal.sagepay.com/mysagepay/j_spring_security_check',\n[\"inp_vspvendorname\" =&gt; \"MYVENDORNAME\",\n\"inp_username\" =&gt; \"MYUSERNAME\",\n\"inp_password\" =&gt; \"MYPASSWORD\",\n\"CSRFToken\" =&gt; \"\"]);\n</code></pre>\n\n<p>When I change this code in my script <code>$content</code> prints nothing and I cannot for the life of me figure out why. I've even tried using HttpRequester Firefox addon and sent the same params to the same URL and that returns the dashboard HTML as expected.</p>\n\n<p><code>$request-&gt;status_line</code> is '302 Found'.</p>\n\n<p>Obviously I can't give you my login details for SagePay but even just getting it to return the HTML for an invalid login, at least I'm making progress. I've been stuck on this for a few days now, I'm hoping someone can help.</p>\n"}, {"tags": ["perl", "batch-file", "cmd"], "comments": [{"owner": {"reputation": 65411, "user_id": 2861476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a68ff169e2604d79847ef252e7b20ae?s=128&d=identicon&r=PG&f=1", "display_name": "MC ND", "link": "https://stackoverflow.com/users/2861476/mc-nd"}, "edited": false, "score": 0, "creation_date": 1490089345, "post_id": 42923044, "comment_id": 72944125, "body": "<code>set</code> changes variable contents, not current active directory. <code>cd</code> changes current active directory."}, {"owner": {"reputation": 167, "user_id": 5005698, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/962075417175866/picture?type=large", "display_name": "Vishal Khemani", "link": "https://stackoverflow.com/users/5005698/vishal-khemani"}, "reply_to_user": {"reputation": 65411, "user_id": 2861476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a68ff169e2604d79847ef252e7b20ae?s=128&d=identicon&r=PG&f=1", "display_name": "MC ND", "link": "https://stackoverflow.com/users/2861476/mc-nd"}, "edited": false, "score": 0, "creation_date": 1490090091, "post_id": 42923044, "comment_id": 72944679, "body": "In TestBatch.bat, I tried removing set current_path=%CD%\\..\\..\\..\\..\\ And only use cd C:\\A1\\A11\\A12\\A13\\B14  Still it does not change the directory to B14"}, {"owner": {"reputation": 28755, "user_id": 5047996, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/la3kD.png?s=128&g=1", "display_name": "aschipfl", "link": "https://stackoverflow.com/users/5047996/aschipfl"}, "edited": false, "score": 0, "creation_date": 1490092081, "post_id": 42923044, "comment_id": 72946174, "body": "You may want to use <a href=\"http://ss64.com/nt/cd.html\" rel=\"nofollow noreferrer\"><code>cd &#47;D</code></a> to change the drive also, if applicable..."}, {"owner": {"reputation": 65411, "user_id": 2861476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a68ff169e2604d79847ef252e7b20ae?s=128&d=identicon&r=PG&f=1", "display_name": "MC ND", "link": "https://stackoverflow.com/users/2861476/mc-nd"}, "edited": false, "score": 0, "creation_date": 1490092169, "post_id": 42923044, "comment_id": 72946245, "body": "You are changing the directory, BUT the directory that you are changing is the current active directory of the <code>cmd</code> instance that is executing the batch file."}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 5005698, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/962075417175866/picture?type=large", "display_name": "Vishal Khemani", "link": "https://stackoverflow.com/users/5005698/vishal-khemani"}, "edited": false, "score": 0, "creation_date": 1490090388, "post_id": 42923611, "comment_id": 72944876, "body": "I tried with what you suggested. Modified the TestBatch.bat to only have this line: PushD %~dp0  The cmd prompt still shows as: C:\\A1\\A11\\A12\\A13\\A14\\A15&gt;  and not as C:\\A1\\A11\\A12\\A13\\B14"}, {"owner": {"reputation": 167, "user_id": 5005698, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/962075417175866/picture?type=large", "display_name": "Vishal Khemani", "link": "https://stackoverflow.com/users/5005698/vishal-khemani"}, "edited": false, "score": 0, "creation_date": 1490097330, "post_id": 42923611, "comment_id": 72950102, "body": "The cmd prompt looks like:  C:\\A1\\A11\\A12\\A13\\A14\\A15&gt;perl Test.pl  C:\\A1\\A11\\A12\\A13\\A14\\A15&gt;PushD C:\\A1\\A11\\A12\\A13\\B14\\  C:\\A1\\A11\\A12\\A13\\A14\\A15&gt;"}], "tags": [], "owner": {"reputation": 808, "user_id": 4961781, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/10152885422637256/picture?type=large", "display_name": "Rawns", "link": "https://stackoverflow.com/users/4961781/rawns"}, "is_accepted": false, "score": 0, "last_activity_date": 1490090108, "creation_date": 1490090108, "answer_id": 42923611, "question_id": 42923044, "link": "https://stackoverflow.com/questions/42923044/change-directory-failing-in-cmd-prompt/42923611#42923611", "title": "change directory failing in cmd prompt", "body": "<p>Instead of </p>\n\n<p><code>set current_path=%CD%\\..\\..\\..\\..\\\ncd A12\\A13\\B14</code></p>\n\n<p>Why not replace it with </p>\n\n<p><code>PushD %~dp0</code> </p>\n\n<p>this will force the working directory in the batch file to be the full location of where the batch file is located (eg; C:\\A1\\A11\\A12\\A13\\B14)</p>\n"}], "owner": {"reputation": 167, "user_id": 5005698, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/962075417175866/picture?type=large", "display_name": "Vishal Khemani", "link": "https://stackoverflow.com/users/5005698/vishal-khemani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490090108, "creation_date": 1490088644, "question_id": 42923044, "link": "https://stackoverflow.com/questions/42923044/change-directory-failing-in-cmd-prompt", "title": "change directory failing in cmd prompt", "body": "<p>I have two files :</p>\n\n<ul>\n<li>perl file \"Test.pl\" at the location \"C:\\A1\\A11\\A12\\A13\\A14\\A15\"</li>\n<li>bat file \"TestBatch.bat\" at the loc : \"C:\\A1\\A11\\A12\\A13\\B14\"</li>\n</ul>\n\n<p>The perl file \"Test.pl\" makes a call to the batch file \"TestBatch.bat\" and then the batch file should try to set the current path to be \"C:\\A1\\A11\\\" and change the directory to \"C:\\A1\\A11\\A12\\A13\\B14\"</p>\n\n<p>But it fails saying the \"System cannot find the path specified\". I want it to change directory to \"C:\\A1\\A11\\A12\\A13\\B14\"</p>\n\n<p>Following is the code of both the files</p>\n\n<p>Test.pl</p>\n\n<pre><code>my $abs_bat_file_loc = \"C:\\\\A1\\\\A11\\\\A12\\\\A13\\\\B14\\\\TestBatch.bat\";\nsystem ($abs_bat_file_loc);\n</code></pre>\n\n<p>TestBatch.bat</p>\n\n<pre><code>set current_path=%CD%\\..\\..\\..\\..\\\ncd A12\\A13\\B14\n</code></pre>\n\n<p><strong>Note</strong> : I ran the perl file in cmd prompt in following way:</p>\n\n<pre><code>cd C:\\A1\\A11\\A12\\A13\\A14\\A15\nperl Test.pl\n</code></pre>\n\n<p>Any help is much appreciated. Thanks in advance!</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1490055913, "post_id": 42916325, "comment_id": 72931571, "body": "Hi, and welcome to Stack Overflow! I&#39;m a bit unclear on what you&#39;re trying to achieve. Could you provide clear inputs and outputs? Like &quot;the file looks like this (show an example)... and I would like to have a sorted file like this...(show an example)&quot;. Or do you want a sorted array? Or are you rearranging the words in a sentence so the string <code>0This 3a 4sentence 2be 1should</code> should be <code>0This 1should 2be 3a 4sentence</code>?"}, {"owner": {"reputation": 15, "user_id": 6636453, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dQX-_zo0hOE/AAAAAAAAAAI/AAAAAAAAASQ/_jy-lFtta5I/photo.jpg?sz=128", "display_name": "Vladimir Danoski", "link": "https://stackoverflow.com/users/6636453/vladimir-danoski"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1490056503, "post_id": 42916325, "comment_id": 72931769, "body": "Yes, that&#39;s right, rearranging the words in the sentence."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1490056569, "post_id": 42916325, "comment_id": 72931785, "body": "What does the input file look like? (Hint: help us help you. Please create a  <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 6636453, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dQX-_zo0hOE/AAAAAAAAAAI/AAAAAAAAASQ/_jy-lFtta5I/photo.jpg?sz=128", "display_name": "Vladimir Danoski", "link": "https://stackoverflow.com/users/6636453/vladimir-danoski"}, "edited": false, "score": 0, "creation_date": 1490058332, "post_id": 42916472, "comment_id": 72932291, "body": "Thanks a lot! I appreciate this"}, {"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 0, "creation_date": 1493478539, "post_id": 42916472, "comment_id": 74439099, "body": "@choroba Do you know if there are any <code>sort</code> expression optimizations? In the past, I thought this would be doing <code>2(n-1)+1</code> regex operations, where <code>n</code> is the number of words.  I thought this because it would do the operation for <code>$b</code> but on the next iteration of the sort <code>$b</code> would become <code>$a</code> and perform the regex again.  If that&#39;s the case, for a large passage, that has big performance impact.  This is why I recommend one pass of regex to break out the keys and then sort on the numeric keys.  Even if <code>sort</code> is optimized it still needs to perform <code>n</code> regexs, instead of 1."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 0, "creation_date": 1493502275, "post_id": 42916472, "comment_id": 74446517, "body": "@vol7ron: Yes, for large lists, I&#39;d use Schwartzian Transform or Guttman Rossler Transform. Large means 1e5+ members."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 7, "last_activity_date": 1490056694, "creation_date": 1490056694, "answer_id": 42916472, "question_id": 42916325, "link": "https://stackoverflow.com/questions/42916325/changing-elements-positions-in-perl/42916472#42916472", "title": "Changing element&#39;s positions in Perl", "body": "<p>Just use <a href=\"http://p3rl.org/sort\" rel=\"noreferrer\">sort</a>. You can use a match in list context to extract the numbers, using <code>\\d+</code> will work even for numbers > 9:</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nmy @words = qw( 0This 3a 4sentence 2be 1should );\nsay join ' ', sort { ($a =~ /\\d+/g)[0] &lt;=&gt; ($b =~ /\\d+/g)[0] } @words;\n</code></pre>\n\n<p>If you don't mind the warnings, or you are willing to turn them off, you can use numeric comparison directly on the words, Perl will extract the numeric prefixes itself:</p>\n\n<pre><code>no warnings 'numeric';\nsay join ' ', sort { $a &lt;=&gt; $b } @words;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 6636453, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dQX-_zo0hOE/AAAAAAAAAAI/AAAAAAAAASQ/_jy-lFtta5I/photo.jpg?sz=128", "display_name": "Vladimir Danoski", "link": "https://stackoverflow.com/users/6636453/vladimir-danoski"}, "edited": false, "score": 0, "creation_date": 1490058310, "post_id": 42916492, "comment_id": 72932281, "body": "Thanks a lot, I did now mention that I am relatively new to Perl, so I didn&#39;t remember the <code>sort</code> command :( Plus my weakness is regular expressions..."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 3, "last_activity_date": 1490056836, "creation_date": 1490056836, "answer_id": 42916492, "question_id": 42916325, "link": "https://stackoverflow.com/questions/42916325/changing-elements-positions-in-perl/42916492#42916492", "title": "Changing element&#39;s positions in Perl", "body": "<p>Assuming you have an array like this:</p>\n\n<pre><code>my @words = ('0This', '3a', '4sentence', '2be', '1should');\n</code></pre>\n\n<p>And you want it sorted like so:</p>\n\n<pre><code>('0This', '1should', '2be', '3a', '4sentence');\n</code></pre>\n\n<p>There's two steps to this. First is extracting the leading number. Then sorting by that number.</p>\n\n<p>You can't use <code>substr</code>, because you don't know how long the number might be. For example, <code>('9Second', '12345First')</code>. If you only looked at the first character you'd get 9 and 1 and sort them incorrectly.</p>\n\n<p>Instead, you'd use a regex to capture the number.</p>\n\n<pre><code>my($num) = $word =~ /^(\\d+)/;\n</code></pre>\n\n<p>See perlretut for more on how that works, particularly <a href=\"http://perldoc.perl.org/perlretut.html#Extracting-matches\" rel=\"nofollow noreferrer\">Extracting Matches</a>.</p>\n\n<p>Now that you can capture the numbers, you can <a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">sort</a> by them. Rather than doing it in loop yourself, <code>sort</code> handles the sorting for you. All you have to do is supply the criterion for the sorting. In this case we capture the number from each word (assigned to $a and $b by sort) and compare them as numbers.</p>\n\n<pre><code>@words = sort {\n    # Capture the number from each word.\n    my($anum) = $a =~ /^(\\d+)/;\n    my($bnum) = $b =~ /^(\\d+)/;\n\n    # Compare the numbers.\n    $anum &lt;=&gt; $bnum\n} @words;\n</code></pre>\n\n<p>There are various ways to make this more efficient, in particular the <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"nofollow noreferrer\">Schwartzian Transform</a>.</p>\n\n<hr>\n\n<p>You can also cheat a bit.</p>\n\n<p>If you ask Perl to treat something as a number, it will do its damnedest to comply. If the string starts with a number, it will use that and ignore the rest, though it will complain.</p>\n\n<pre><code>$ perl -wle 'print \"23foo\" + \"42bar\"'\nArgument \"42bar\" isn't numeric in addition (+) at -e line 1.\nArgument \"23foo\" isn't numeric in addition (+) at -e line 1.\n65\n</code></pre>\n\n<p>We can take advantage of that to simplify the sort by just comparing the words as numbers directly.</p>\n\n<pre><code>{\n    no warnings 'numeric';\n    @words = sort { $a &lt;=&gt; $b } @words;\n}\n</code></pre>\n\n<p>Note that I turned off the warning about using a word as a number. <code>use warnings</code> and <code>no warnings</code> only has effect within the current block, so by putting the <code>no warnings 'numeric'</code> and the <code>sort</code> in their own block I've only turned off the warning for that one sort statement.</p>\n\n<hr>\n\n<p>Finally, if the words are in a file you can use the Unix <code>sort</code> utility from the command line. Use <code>-n</code> for \"numeric sorting\" and it will do the same trick as above.</p>\n\n<pre><code>$ cat test.data\n00This\n3a\n123sentence\n2be\n1should\n\n$ sort -n test.data\n00This\n1should\n2be\n3a\n123sentence\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1490061305, "post_id": 42916610, "comment_id": 72932998, "body": "Note that comparing words as numbers will produce warnings. Use <code>no warnings &#39;numeric&#39;</code> to turn that off."}, {"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1490071154, "post_id": 42916610, "comment_id": 72935662, "body": "@Schwern exactly right, updated, thank you.  Agh, you already beat me to that solution too.  I really need to stop eating when I answer these :P"}], "tags": [], "owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "is_accepted": true, "score": 1, "last_activity_date": 1493477702, "last_edit_date": 1495540478, "creation_date": 1490057808, "answer_id": 42916610, "question_id": 42916325, "link": "https://stackoverflow.com/questions/42916325/changing-elements-positions-in-perl/42916610#42916610", "title": "Changing element&#39;s positions in Perl", "body": "<p>You should be able to split on the spaces, which will make the numbers the first character of the word.  With that assumption, you can simply compare using the numerical comparison operator (<code>&lt;=&gt;</code>) as opposed to the string comparison (<code>cmp</code>).</p>\n\n<p>The operators are important because if you compare strings, the first character is used, meaning <code>10</code>, <code>11</code>, and <code>12</code> would be out of order, and listed near the <code>1</code> (<code>1,10,11,12,2,3,4\u2026</code> instead of <code>1,2,3,4\u202610,11,12</code>).</p>\n\n<hr>\n\n<h2>Split, Then Sort</h2>\n\n<p><strong><em>Note:</strong> <a href=\"https://stackoverflow.com/users/14660/schwern\">@schwern</a> commented an important point.  If you use warnings -- and you should -- you will receive warnings.  This is because the values of the internal comparison variables, <code>$a</code> and <code>$b</code>, aren't numbers, but strings (e.g., `\"0this\", \"3a\").  I've update the following Codepad and provided more suitable alternatives to avoid this issue.</em></p>\n\n<p><a href=\"http://codepad.org/xs2GH9xT\" rel=\"nofollow noreferrer\">http://codepad.org/xs2GH9xT</a></p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $line   = q{0This 3a 4sentence 2be 1should};\nmy @words  = split /\\s/,$line;\nmy @sorted = sort {$a &lt;=&gt; $b} @words;\n\nprint qq{\n  Line: $line\n  Words: @words\n  Sorted: @sorted\n};\n</code></pre>\n\n<hr>\n\n<h2>Alternatives</h2>\n\n<ol>\n<li><p>One method is to ignore the warning using <code>no warnings 'numeric'</code> as in <a href=\"https://stackoverflow.com/a/42916492/183181\">Schwern's answer</a>.  As he has shown, turning off the warnings in a block will re-enable it afterwards, which may be a little foolproof compared to <a href=\"https://stackoverflow.com/a/42916472/183181\">Choroba's answer</a>, which applies it to the broader scope.</p></li>\n<li><p><a href=\"https://stackoverflow.com/a/42916472/183181\">Choroba's solution</a> works by parsing the digits from the those values internally.  This is much fewer lines of code, but I would generally advise against that for performance reasons.  The regex isn't only run once per word, but multiple times over the sorting process.</p></li>\n<li><p>Another method is to strip the numbers out and use them for the sort comparison.  I attempt to do this below by creating a hash, where the key will be the number and the value will be the word.</p></li>\n</ol>\n\n<h3>Hash Mapping / Key Sort</h3>\n\n<p>Once you have an array where the values are the words prefixed by the numbers, you could just as easily split those number/word combo into a hash that has the key as the number and value as the word.  This is accomplished by using <code>split</code>.</p>\n\n<p>The important thing to note about the <code>split</code> statement is that a <em>limit</em> is passed (in this case <code>2</code>), which limits the maximum number of fields the string is split into.</p>\n\n<p>The two values are then used in the <code>map</code> to build the key/value assignment.  Thus <code>\"0This\"</code> is split into <code>\"0\"</code> and <code>\"This\"</code> to be used in the hash as <code>\"0\"=&gt;\"This\"</code></p>\n\n<p><a href=\"http://codepad.org/kY8wwajc\" rel=\"nofollow noreferrer\">http://codepad.org/kY8wwajc</a></p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $line   = q{0This 3a 4sentence 2be 1should};\nmy @words  = split /\\s/, $line;                            # [ '0This', '3a', ... ]\nmy %mapped = map { split /(?=\\D)/, $_, 2 } @words;         # { '0'=&gt;'This, '3'=&gt;'a', ... }\nmy @sorted = @mapped{ sort { $a &lt;=&gt; $b } keys %mapped };   # [ 'This', 'should', 'be', ... ]\n\nprint qq{\n  Line: $line\n  Words: @words\n  Sorted: @sorted\n};\n</code></pre>\n\n<p>This also can be further optimized, but uses multiple variables to illustrate the steps in the process.</p>\n"}], "owner": {"reputation": 15, "user_id": 6636453, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dQX-_zo0hOE/AAAAAAAAAAI/AAAAAAAAASQ/_jy-lFtta5I/photo.jpg?sz=128", "display_name": "Vladimir Danoski", "link": "https://stackoverflow.com/users/6636453/vladimir-danoski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 42916610, "answer_count": 3, "score": 1, "last_activity_date": 1493477702, "creation_date": 1490055704, "last_edit_date": 1490057363, "question_id": 42916325, "link": "https://stackoverflow.com/questions/42916325/changing-elements-positions-in-perl", "title": "Changing element&#39;s positions in Perl", "body": "<p>So I have a problem and I can't solve it. If I read some words from a file in Perl, in that file the words aren't in order, but have a number (as a first character) that should be the element's position to form a sentence.The 0 means that position is correct, 1 means that the word should be in position <code>[1]</code> etc.\nThe file looks like: <strong><code>0This 3a 4sentence 2be 1should</code></strong>, and the solution should look like <strong>0This 1should 2be 3a 4sentence</strong>.</p>\n\n<p>In a <code>for</code> loop I get through the words array that i get from the file, and this is how i get the first character(the number) <code>$firstCharacter = substr $words[$i], 0, 1;</code>, but i don't know how to properly change the array.</p>\n\n<p>Here's the code that I use   </p>\n\n<pre><code>#!/usr/bin/perl -w\n$arg = $ARGV[0];\nopen FILE, \"&lt; $arg\" or die \"Can't open file: $!\\n\";\n$/ = \".\\n\";\nwhile($row = &lt;FILE&gt;)\n{\n    chomp $row;\n    @words = split(' ',$row);\n}\nfor($i = 0; $i &lt; scalar @words; $i++)\n{\n    $firstCharacter = substr $words[$i], 0, 1;\n    if($firstCharacter != 0)\n    {\n\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "flock"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490047590, "post_id": 42914538, "comment_id": 72928824, "body": "See <a href=\"http://perldoc.perl.org/functions/flock.html\" rel=\"nofollow noreferrer\">flock</a> for an example, including the note at the very end about <code>fork</code> calls"}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 2, "last_activity_date": 1490046770, "creation_date": 1490046770, "answer_id": 42914633, "question_id": 42914538, "link": "https://stackoverflow.com/questions/42914538/perl-open-and-flock-timeout/42914633#42914633", "title": "Perl Open and Flock timeout", "body": "<p>No, <code>open</code> does not interact with locks at all. Locking a file just prevents others from locking it, nothing else.</p>\n"}, {"comments": [{"owner": {"reputation": 747, "user_id": 2474912, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/i6p16.gif?s=128&g=1", "display_name": "JohnnyLoo", "link": "https://stackoverflow.com/users/2474912/johnnyloo"}, "edited": false, "score": 0, "creation_date": 1490101901, "post_id": 42914667, "comment_id": 72953530, "body": "I see. How can I make a forked process check if there is a lock on a file and then wait until the file is unlock so that it writes its data into the file?"}, {"owner": {"reputation": 747, "user_id": 2474912, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/i6p16.gif?s=128&g=1", "display_name": "JohnnyLoo", "link": "https://stackoverflow.com/users/2474912/johnnyloo"}, "edited": false, "score": 0, "creation_date": 1490102498, "post_id": 42914667, "comment_id": 72954033, "body": "Nevermind, you just answered my question. I just have a doubt now, how long would flock wait before it gives up waiting for a file to be unlocked?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 747, "user_id": 2474912, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/i6p16.gif?s=128&g=1", "display_name": "JohnnyLoo", "link": "https://stackoverflow.com/users/2474912/johnnyloo"}, "edited": false, "score": 0, "creation_date": 1490110625, "post_id": 42914667, "comment_id": 72960631, "body": "I&#39;ve clearly specified under which conditions <code>flock</code> returns in my answer. Without <code>LOCK_NB</code>, it will wait until interrupted by a signal."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 9, "last_activity_date": 1603826349, "last_edit_date": 1603826349, "creation_date": 1490046882, "answer_id": 42914667, "question_id": 42914538, "link": "https://stackoverflow.com/questions/42914538/perl-open-and-flock-timeout/42914667#42914667", "title": "Perl Open and Flock timeout", "body": "<p><a href=\"https://www.freebsd.org/cgi/man.cgi?query=flock&amp;sektion=2&amp;manpath=SuSE+Linux%2Fi386+11.3\" rel=\"nofollow noreferrer\"><code>flock</code></a> only prevents locks from being obtained using <code>flock</code>; it doesn't prevent a file from being opened, read, modified or deleted.</p>\n<p><code>flock</code> without the <code>LOCK_NB</code> flag will block until a lock can be obtained, or until interrupted by a signal.</p>\n<p><code>flock</code> with the <code>LOCK_NB</code> flag will return immediately.</p>\n<ul>\n<li>If <code>flock</code> was able to obtain a lock, it will return true.</li>\n<li>If <code>flock</code> was unable to obtain a lock, it will return false, and <code>errno</code> will be set.\n<ul>\n<li><code>$!{EINTR}</code> indicates that operation was interrupted by a signal.</li>\n<li><code>$!{EWOULDBLOCK}</code> indicates that waiting would be required but <code>LOCK_NB</code> was specified.</li>\n</ul>\n</li>\n</ul>\n"}], "owner": {"reputation": 747, "user_id": 2474912, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/i6p16.gif?s=128&g=1", "display_name": "JohnnyLoo", "link": "https://stackoverflow.com/users/2474912/johnnyloo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1128, "favorite_count": 0, "accepted_answer_id": 42914667, "answer_count": 2, "score": 2, "last_activity_date": 1603826349, "creation_date": 1490046357, "question_id": 42914538, "link": "https://stackoverflow.com/questions/42914538/perl-open-and-flock-timeout", "title": "Perl Open and Flock timeout", "body": "<p>Does the \"<a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">open</a>\" function in Perl automatically checks whether a file is locked and wait for it to be unlocked? if so, how long does it wait or how can I control that period of time?</p>\n\n<p>I have 5 forked processes appending data to the same file. Each forked process basically opens the file and then flocks it. It then appends its data and closes the file handler to unlock the file so that the other forked processes can use it.</p>\n\n<p>Everything works as expected, but I'm afraid that the open command might timeout if one of the forked processes takes too long to complete its task.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1490036139, "post_id": 42911714, "comment_id": 72922626, "body": "Please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. (Specifically: Describe the problem. &quot;No such luck&quot; is not a problem description.)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1490036391, "post_id": 42911714, "comment_id": 72922813, "body": "You know this would be much easier without regexes, right?"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 3991890, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef14fcd42c32d3710c01274bd5c1290e?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Parise", "link": "https://stackoverflow.com/users/3991890/matthew-parise"}, "edited": false, "score": 0, "creation_date": 1490037183, "post_id": 42911796, "comment_id": 72923247, "body": "My instructor asked for it to be in that exact order, and he didn&#39;t want the regex for $ctrP."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 19, "user_id": 3991890, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef14fcd42c32d3710c01274bd5c1290e?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Parise", "link": "https://stackoverflow.com/users/3991890/matthew-parise"}, "edited": false, "score": 0, "creation_date": 1490042559, "post_id": 42911796, "comment_id": 72926344, "body": "@MatthewParise that doesn&#39;t make sense. If P is for positive ints this answer is correct."}, {"owner": {"reputation": 19, "user_id": 3991890, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef14fcd42c32d3710c01274bd5c1290e?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Parise", "link": "https://stackoverflow.com/users/3991890/matthew-parise"}, "edited": false, "score": 0, "creation_date": 1490052140, "post_id": 42911796, "comment_id": 72930504, "body": "Just following instructors direction.  Trust me, im with you on this one."}], "tags": [], "owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "is_accepted": false, "score": 0, "last_activity_date": 1490036208, "last_edit_date": 1490036208, "creation_date": 1490036194, "answer_id": 42911796, "question_id": 42911714, "link": "https://stackoverflow.com/questions/42911714/using-regex-to-calculate-the-number-of-ints-within-a-data-set-perl/42911796#42911796", "title": "Using regex to calculate the number of ints within a data set [Perl]", "body": "<p>Swap <code>$ctrZ++;</code> and <code>$ctrP++;</code> lines:</p>\n\n<pre><code>    # ...................\n    elsif ( $num =~ /^[1-9]\\d*$/ ) {\n            $ctrP++;\n    }\n    else {\n            $ctrZ++;\n    }\n    # ...................\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1490037751, "last_edit_date": 1490037751, "creation_date": 1490037423, "answer_id": 42912160, "question_id": 42911714, "link": "https://stackoverflow.com/questions/42911714/using-regex-to-calculate-the-number-of-ints-within-a-data-set-perl/42912160#42912160", "title": "Using regex to calculate the number of ints within a data set [Perl]", "body": "<p>You can use the numeric comparison operator <code>&lt;=&gt;</code> which returns -1, 0, or 1 according to whether the first operand is less than, equal to, or greater than the second, respectively. If you use it to compare each value to zero and add one to the result then you can index into an array</p>\n\n<p>Like this</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy @counts;\n\n++$counts[($_ &lt;=&gt; 0) + 1] while &lt;DATA&gt;;\n\nmy ($ctrN, $ctrZ, $ctrP) = @counts;\n\nprintf \"freq(Z+): %4d\\n\", $ctrP;\nprintf \"freq(Z-): %4d\\n\", $ctrN;\nprintf \"freq(0):  %4d\\n\", $ctrZ;\nprintf \"Total:    %4d\\n\", $ctrP + $ctrN + $ctrZ;\n\n__DATA__\n29\n42\n324\n-511\n32\n354\n0\n-29\n765\n17\n-32\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>freq(Z+):    7\nfreq(Z-):    3\nfreq(0):     1\nTotal:      11\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 3991890, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef14fcd42c32d3710c01274bd5c1290e?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Parise", "link": "https://stackoverflow.com/users/3991890/matthew-parise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490125076, "creation_date": 1490035978, "question_id": 42911714, "link": "https://stackoverflow.com/questions/42911714/using-regex-to-calculate-the-number-of-ints-within-a-data-set-perl", "title": "Using regex to calculate the number of ints within a data set [Perl]", "body": "<p>I am having difficulty with a certain set of regex that needs to be solved to calculate the frequency of positive, negative, and 0 integers within the data set inside of the sample code.  I have successfully gotten it to solve the negative integers, but no such luck with positive and 0.  </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy ( $ctrP, $ctrN, $ctrZ ) = ( 0, 0, 0 );\nwhile( my $num = &lt;DATA&gt; ) {\n        chomp($num);\n        ## print \"num=[$num]\\n\";\n        if ( $num =~ /^-\\d+$/ ) {\n                $ctrN++;\n        }\n        elsif ( $num =~ /^[1-9]\\d*$/ ) {\n                $ctrZ++;\n        }\n        else {\n                $ctrP++;\n        }\n}\nprintf(\"freq(Z+):%8s\\n\", $ctrP );\nprintf(\"freq(Z-):%8s\\n\", $ctrN );\nprintf(\"freq(0):%9s\\n\", $ctrZ );\nprintf(\"Total:%11s\\n\", ($ctrP+$ctrN+$ctrZ) );\nexit;\n__DATA__\n29\n42\n324\n-511\n32\n354\n0\n-29\n765\n17\n-32\n</code></pre>\n"}, {"tags": ["linux", "perl", "awk", "byte", "endianness"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490030448, "post_id": 42909679, "comment_id": 72919171, "body": "You said your second perl command outputs the sequence correctly, so what&#39;s missing? It would help if you showed the output you&#39;re trying to generate."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1490031020, "post_id": 42909679, "comment_id": 72919540, "body": "Try <code>echo &quot;3,7,8&quot; | perl -e &quot;print pack(&#39;f&gt;*&#39;,split &#39;,&#39;, scalar &lt;STDIN&gt;)&quot;|xxd -b</code>"}, {"owner": {"reputation": 33, "user_id": 7741042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b271b9e7e998e9a66c87ba7299663f4f?s=128&d=identicon&r=PG&f=1", "display_name": "whiteWolf", "link": "https://stackoverflow.com/users/7741042/whitewolf"}, "edited": false, "score": 0, "creation_date": 1490209101, "post_id": 42909679, "comment_id": 73015144, "body": "Thanks, this works as well!"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1490031674, "last_edit_date": 1490031674, "creation_date": 1490030816, "answer_id": 42910137, "question_id": 42909679, "link": "https://stackoverflow.com/questions/42909679/convert-sequence-of-decimal-numbers-to-big-endian-float/42910137#42910137", "title": "Convert sequence of decimal numbers to Big endian float", "body": "<p>Replace</p>\n\n<pre><code>&lt;STDIN&gt;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>split(/,/, &lt;STDIN&gt;)\n</code></pre>\n\n<hr>\n\n<p>Also, it's probably best if you wrap the Perl program in single-quotes. No difference here, but it's a good habit.</p>\n\n<pre><code>perl -e'print pack \"f&gt;*\", split /,/, &lt;STDIN&gt;'\n</code></pre>\n\n<p>Cleanly handles the newline (if there is one):</p>\n\n<pre><code>perl -ne'chomp; print pack \"f&gt;*\", split /,/'\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7741042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b271b9e7e998e9a66c87ba7299663f4f?s=128&d=identicon&r=PG&f=1", "display_name": "whiteWolf", "link": "https://stackoverflow.com/users/7741042/whitewolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 42910137, "answer_count": 1, "score": 3, "last_activity_date": 1490031674, "creation_date": 1490029536, "question_id": 42909679, "link": "https://stackoverflow.com/questions/42909679/convert-sequence-of-decimal-numbers-to-big-endian-float", "title": "Convert sequence of decimal numbers to Big endian float", "body": "<p>I have an external software that uses images stored as long sequences of 4-byte floats, as Big Endian, no header. I can create a small example image using <code>awk</code>, and hence I can control possible separators, or output my (float) number sequence as e.g. hex or decimal values. However, I have not found a way to write it to file as 4-byte floats. Hence I try to use Perl's pack to convert my sequence of decimal base10 numbers to 4-byte floats, Big Endian, which works for a single value, but my Perl experience is too limited to get it to work for a sequence of values. </p>\n\n<p>Could someone more proficient in Perl help me out? To look at the output bit sequence, I pipe it to the command <code>xxd -b</code></p>\n\n<pre><code>perl -e \"print pack('f&gt;*',3)\"|xxd -b # outputs decimal 3 (base10) on the wanted format:\n# 01000000 01000000 00000000 00000000\n\n perl -e \"print pack('f&gt;*',3,7,8)\"|xxd -b # outputs the requested dummy sequence correctly\n# 01000000 01000000 00000000 00000000 01000000 11100000\n# 00000000 00000000 01000001 00000000 00000000 00000000\n\necho 1|awk 'BEGIN{printf(\"%d,%d,%d\",3,7,8);}'|xxd -b # creates same dummy sequence, in awk - here separated by ,\n\necho 1|awk 'BEGIN{printf(\"%d,%d,%d\",3,7,8);}'|perl -e \"print pack('f&gt;*',&lt;STDIN&gt;)\"|xxd -b\n# outputs correct conversion of 3, but seems to ignore 7 and 8\n# 01000000 01000000 00000000 00000000\n</code></pre>\n\n<p>I guess the separator has to be handled differently? I also tried this form of the Perl part</p>\n\n<p><code>perl -ne 'print pack \"f&gt;*\",$_'</code></p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["string", "perl", "uppercase"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1490028600, "post_id": 42909066, "comment_id": 72918062, "body": "<a href=\"http://perldoc.perl.org/functions/fc.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/fc.html</a> might be a good read, too."}], "answers": [{"comments": [{"owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "edited": false, "score": 0, "creation_date": 1490029106, "post_id": 42909080, "comment_id": 72918396, "body": "That indeed solved the problem. :) Is it save to replace &quot;use strict;&quot; with &quot;use 5.012;&quot; in all my modules?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "edited": false, "score": 1, "creation_date": 1490029397, "post_id": 42909080, "comment_id": 72918579, "body": "Yes. &quot;<i>Similarly, if the specified Perl version is greater than or equal to 5.12.0, strictures are enabled lexically as with use strict</i>&quot;"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1490029330, "last_edit_date": 1490029330, "creation_date": 1490027703, "answer_id": 42909080, "question_id": 42909066, "link": "https://stackoverflow.com/questions/42909066/seemingly-identical-strings-converted-to-uppercase-differently/42909080#42909080", "title": "(Seemingly) identical strings converted to uppercase differently", "body": "<p>Minimal demonstration:</p>\n\n<pre><code>my $s = \"\\xEB\";\nutf8::downgrade( my $d = $s );\nutf8::upgrade(   my $u = $s );\nprintf \"%vX %vX %s\\n\", $d, $u, $d eq $u ? \"same\" : \"different\";\n$_ = uc($_) for $d, $u;\nprintf \"%vX %vX %s\\n\", $d, $u, $d eq $u ? \"same\" : \"different\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>EB EB same\nEB CB different\n</code></pre>\n\n<hr>\n\n<p>By default, for backwards-compatibility, <code>uc</code> will only uppercase ASCII characters if the input scalar's <code>UTF8</code> flag is off. It's an instance of The Unicode Bug<sup>[1]</sup> that's fixed by adding the following:</p>\n\n<pre><code>use feature qw( unicode_strings );\n</code></pre>\n\n<p>The above can be done indirectly by adding the following:</p>\n\n<pre><code>use 5.012;\n</code></pre>\n\n<p>References: <a href=\"http://search.cpan.org/perldoc?feature#The_&#39;unicode_strings&#39;_feature\" rel=\"nofollow noreferrer\"><code>unicode_strings</code></a>, <a href=\"http://search.cpan.org/perldoc?feature\" rel=\"nofollow noreferrer\"><code>feature</code></a>, <a href=\"http://perldoc.perl.org/functions/use.html\" rel=\"nofollow noreferrer\"><code>use</code></a></p>\n\n<hr>\n\n<ol>\n<li>When the behaviour of code depends on the storage format of a string, that code is said to suffer from The Unicode Bug.</li>\n</ol>\n"}], "owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 42909080, "answer_count": 1, "score": 2, "last_activity_date": 1490029330, "creation_date": 1490027661, "question_id": 42909066, "link": "https://stackoverflow.com/questions/42909066/seemingly-identical-strings-converted-to-uppercase-differently", "title": "(Seemingly) identical strings converted to uppercase differently", "body": "<p>I'm encountering a very strange problem with the conversion to uppercase of two \"identical\" strings. The program is reading lines from a website and compares it with lines stored in a textfile. If the line is not found, it adds it to the end of the file. This works perfectly unless the line contains special characters. For some reason, the comparison results in a non-match. I compare the two strings by converting them to uppercase first and that is where it goes wrong. Below is some code. I've omitted the part where the two variables are filled. I'm just showing the weird part.</p>\n\n<pre><code>print \"$pageLine &lt;-&gt; $dbLine\\n\";\nprint uc( $pageLine ) . \" &lt;-&gt; \" . uc( $dbLine ) . \"\\n\";\n</code></pre>\n\n<p>This results in</p>\n\n<pre><code>Di\u00ebtisten &lt;-&gt; Di\u00ebtisten\nDI\u00ebTISTEN &lt;-&gt; DI\u00cbTISTEN\n</code></pre>\n\n<p>Notice that \u00eb in the first is not converted to uppercase.</p>\n\n<pre><code>foreach my $kar (split( //, $pageLine) ) {\n  print ord($kar) . \":\";\n}\nprint \"\\n\";\nforeach my $kar (split( //, $dbLine) ) {\n  print ord($kar) . \":\";\n}\nprint \"\\n\";\n</code></pre>\n\n<p>This results in:</p>\n\n<pre><code>68:105:235:116:105:115:116:101:110:32:40:78:86:68:41:\n68:105:235:116:105:115:116:101:110:32:40:78:86:68:41:\n</code></pre>\n\n<p>Anybody have any idea what is going on here?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl", "ssh", "telnet"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1490027690, "post_id": 42908536, "comment_id": 72917492, "body": "Close voters: I think the question is pretty clear. What happens if you don&#39;t explicitly close an SSH or Telnet connection before script exit? This is similar to <a href=\"http://stackoverflow.com/q/12702869\">How severe is it if we do not close a file in Perl?</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490028116, "post_id": 42908536, "comment_id": 72917753, "body": "What I don&#39;t like about the question is that it sounds like they are trying to prove something wrong, but don&#39;t include a source. With a small edit, I&#39;d vote to reopen."}, {"owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "edited": false, "score": 0, "creation_date": 1490032464, "post_id": 42908536, "comment_id": 72920427, "body": "Can somebody please answer ?"}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1490032606, "post_id": 42908536, "comment_id": 72920517, "body": "What I don&#39;t get is what &quot;in perl&quot; has to do with the question?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490033910, "post_id": 42908536, "comment_id": 72921359, "body": "What&#39;s a &quot;channel&quot;?"}, {"owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490034142, "post_id": 42908536, "comment_id": 72921482, "body": "@Borodin: I have updated the question. Apologies for the confusion. Kindly help me out with the query."}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1490082339, "post_id": 42908536, "comment_id": 72939885, "body": "If you don&#39;t close channels/connections, they will be automatically closed for you from the objects destructors when they go out of scope. The advantage of doing it explicitly is that you can catch errors."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1490111016, "post_id": 42908536, "comment_id": 72960943, "body": "@salva The question has been reopened now, so can you post that as an answer? You&#39;re uniquely qualified to answer this one :)"}], "owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490091586, "creation_date": 1490026158, "last_edit_date": 1490088164, "question_id": 42908536, "link": "https://stackoverflow.com/questions/42908536/is-it-really-required-to-explicitly-close-the-ssh-connection-channel-or-the-tel", "title": "Is it really required to explicitly close the SSH connection, channel or the telnet connection in Perl?", "body": "<p>Is it really required to explicitly close the Net::SSH2 connection, Net::SSH2 channel or the Net::Telnet connection in Perl?</p>\n\n<p>If so what would be the consequences of not closing them?</p>\n"}, {"tags": ["perl", "eval", "anonymous-function"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1490027360, "post_id": 42908353, "comment_id": 72917255, "body": "While you&#39;re right that your approach will work, and I understand that you don&#39;t think you should be too concerned about the <code>eval</code>, I will still say that it would be safer to implement different kinds of filters and call them with arguments when needed. A dispatch table would be handy here. Don&#39;t even trust yourself as a user."}, {"owner": {"reputation": 2044, "user_id": 1961413, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b0fbe9582d6e6d4e815554789f434c81?s=128&d=identicon&r=PG", "display_name": "Jefferey Cave", "link": "https://stackoverflow.com/users/1961413/jefferey-cave"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490039228, "post_id": 42908353, "comment_id": 72924448, "body": "I&#39;m definitely game for a totally different solution. I am trying to implement a <i>very</i> generic query utility. The point to that eval is it should resolve to a function that always returns true/false and never does anything else. In the short term, apparently I just misread how eval works."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1490040731, "post_id": 42908353, "comment_id": 72925282, "body": "What are you querying? If the data is in any way record based, why not load it into a relational database and use SQL? I hear that&#39;s good at querying."}, {"owner": {"reputation": 2044, "user_id": 1961413, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b0fbe9582d6e6d4e815554789f434c81?s=128&d=identicon&r=PG", "display_name": "Jefferey Cave", "link": "https://stackoverflow.com/users/1961413/jefferey-cave"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490055912, "post_id": 42908353, "comment_id": 72931570, "body": "There are a few reasons: volume is one of them. A streaming database would be an even better choice, but is not an option. Ergo... hand crafted aggregate &gt; filter &gt; map &gt; reduce"}, {"owner": {"reputation": 2044, "user_id": 1961413, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b0fbe9582d6e6d4e815554789f434c81?s=128&d=identicon&r=PG", "display_name": "Jefferey Cave", "link": "https://stackoverflow.com/users/1961413/jefferey-cave"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1490708067, "post_id": 42908353, "comment_id": 73225498, "body": "To expand on my response (post holiday): I am reading from a continuous stream, and want to use this to decide what to even bother writing to a more permanent store."}], "answers": [{"comments": [{"owner": {"reputation": 2044, "user_id": 1961413, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b0fbe9582d6e6d4e815554789f434c81?s=128&d=identicon&r=PG", "display_name": "Jefferey Cave", "link": "https://stackoverflow.com/users/1961413/jefferey-cave"}, "edited": false, "score": 0, "creation_date": 1490038856, "post_id": 42908457, "comment_id": 72924208, "body": "&quot;return false&quot; was exactly the next problem I hit"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1490026375, "last_edit_date": 1490026375, "creation_date": 1490025935, "answer_id": 42908457, "question_id": 42908353, "link": "https://stackoverflow.com/questions/42908353/perl-a-user-supplied-sub-always-returns-the-text-not-the-eval/42908457#42908457", "title": "perl a user supplied sub, always returns the text, not the eval", "body": "<p>You need to do <em>string <code>eval</code></em>, not <em>block <code>eval</code></em>.</p>\n\n<pre><code>my $filterFunc = sub{ eval{ $filter } } ;\n</code></pre>\n\n<p>The <code>eval BLOCK</code> is like a <code>try</code>/<code>catch</code> mechanism. It does not evaluate arbitrary code. It catches errors in the code inside the block. What you want is string <code>eval</code>.</p>\n\n<pre><code>my $filterFunc = sub{ eval $filter };\n</code></pre>\n\n<p>Here's an example implementation of what I think you are trying to do:</p>\n\n<pre><code>$ perl -E 'my $filter = sub { my $f = shift; eval $ARGV[0]; }; for ( 1 .. 10 ) { say $_ if $filter-&gt;($_) }' '$f % 2'\n1\n3\n5\n7\n9\n</code></pre>\n\n<p>However, there is no <code>false</code> in Perl. That's not a keyword. Unless you have  <code>sub false</code> somewhere, this might give you a syntax error, depending on if you have <code>use strict</code> or not.</p>\n\n<p>You should <a href=\"http://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\">read up on <code>eval</code></a>.</p>\n\n<hr>\n\n<p>If all you want is a <code>$filterFunc</code> that returns something <em>false</em>, use <code>0</code> instead. Note that the literal string <code>\"return false;\"</code> is <em>true</em> in Perl.</p>\n"}], "owner": {"reputation": 2044, "user_id": 1961413, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b0fbe9582d6e6d4e815554789f434c81?s=128&d=identicon&r=PG", "display_name": "Jefferey Cave", "link": "https://stackoverflow.com/users/1961413/jefferey-cave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 42908457, "answer_count": 1, "score": 2, "last_activity_date": 1490026375, "creation_date": 1490025650, "question_id": 42908353, "link": "https://stackoverflow.com/questions/42908353/perl-a-user-supplied-sub-always-returns-the-text-not-the-eval", "title": "perl a user supplied sub, always returns the text, not the eval", "body": "<p>I am a perl newb.</p>\n\n<p>Unfortunately, <code>eval</code> doesn't work the way I'm expecting</p>\n\n<p>My mock example:</p>\n\n<pre><code>my $filter = 'return false;';\nmy $filterFunc = sub{ eval{ $filter } } ;\nwhile (my $entry = readNextEntry()){\n    print \"Eval:\".$filterFunc-&gt;( $entry ).\"\\n\";\n}\n</code></pre>\n\n<p>When I run this, I get the literal <code>\"return false;\"</code> being returned from every pass (rather than the function getting evaluated). I've tried a couple of variations, but I'm not hitting the magic combination.</p>\n\n<p>A note on security implications:</p>\n\n<p>As I am the user, I don't have security concerns about what the passed in code does. </p>\n\n<p>My intent is to pull in multiple sources and filter out stuff based on parameters, since I don't know what parameters are going to be useful, I thought I could pass in some text, <code>eval</code> the text into an anonymous function, and run the function for each record (a filter function). As I am the user, I don't have security concerns about what the passed in code does.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 4, "creation_date": 1490021671, "post_id": 42906814, "comment_id": 72913085, "body": "You are passing an array reference, not an array."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490021730, "post_id": 42906814, "comment_id": 72913129, "body": "Since you  are passing an array reference, you should dereference <code>$_[0]</code> in <code>ScheduleRequestWrite()</code> : <code>my @write_value = @$_[0]</code>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1490021906, "post_id": 42906814, "comment_id": 72913268, "body": "@H&#229;konH&#230;gland that&#39;s wrong.  <code>@{$_[0]}</code>.  What you wrote dereferences <code>$_</code> and gets a slice of the 0th index in the referred array.  But better to just have the variable contain a reference, as in the given answer."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1490022216, "post_id": 42906814, "comment_id": 72913523, "body": "@ysth Thanks, you are completely right"}], "answers": [{"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": true, "score": 6, "last_activity_date": 1490021833, "creation_date": 1490021833, "answer_id": 42906918, "question_id": 42906814, "link": "https://stackoverflow.com/questions/42906814/passing-array-to-a-routine-going-wrong/42906918#42906918", "title": "Passing array to a routine going wrong", "body": "<p>You're passing in an array reference, <code>\\@writeVal</code>, and then using that reference in your array <code>@write_value</code> ... so your array <code>@write_value</code> has a single item in it, a reference to another array.</p>\n\n<p>You may have meant <code>my @write_value = @{$_[0]};</code> which makes a copy of the array, or you may have meant to loop over the original array directly:</p>\n\n<pre><code>sub ScheduleRequestWrite\n{\n   my $write_value = $_[0];\n\n   foreach my $str (@$write_value)\n   {\n        print \"\\n$str\\n\";\n   }\n}\n</code></pre>\n\n<p>(You also don't want the <code>()</code> prototype since you <em>are</em> taking a parameter! Just leave the prototype off.)</p>\n"}], "owner": {"reputation": 167, "user_id": 5005698, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/962075417175866/picture?type=large", "display_name": "Vishal Khemani", "link": "https://stackoverflow.com/users/5005698/vishal-khemani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 42906918, "answer_count": 1, "score": 0, "last_activity_date": 1490021833, "creation_date": 1490021586, "question_id": 42906814, "link": "https://stackoverflow.com/questions/42906814/passing-array-to-a-routine-going-wrong", "title": "Passing array to a routine going wrong", "body": "<p>In the following code I am expecting output in ScheduleRequestWrite() to be : 5,10</p>\n\n<pre><code>sub ProcessItem\n{\n    my @writeVal = (\"5,10\");\n\n    foreach my $str (@writeVal)\n    {\n        print \"\\nProcessItem = $str\\n\";\n    }\n    ScheduleRequestWrite(\\@writeVal);\n}\n\nsub ScheduleRequestWrite()\n{\n   my @write_value = $_[0];\n\n   foreach my $str (@write_value)\n   {\n        print \"\\n$str\\n\";\n   }\n}\n\nProcessItem();\n</code></pre>\n\n<p>But I am getting : ARRAY&lt;0x2ccf8></p>\n\n<p>Could anyone please help me point out my mistake. Thanks in advance!</p>\n"}, {"tags": ["java", "perl"], "answers": [{"tags": [], "owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "is_accepted": true, "score": 2, "last_activity_date": 1490018389, "last_edit_date": 1495540015, "creation_date": 1490017773, "answer_id": 42905332, "question_id": 42905270, "link": "https://stackoverflow.com/questions/42905270/run-perl-script-by-command-line-using-java-and-some-cmd-operator/42905332#42905332", "title": "run perl script by command line using java and some cmd operator", "body": "<p>The problem is that the piping using \">\" simply doesn't work (when you make those java \"process\" calls).</p>\n\n<p>What you have to do instead: when creating such a process, you can (programmitically) acquire its input and output streams.</p>\n\n<p>So instead of doing a piped command, you just do</p>\n\n<pre><code>perl test.pl\n</code></pre>\n\n<p>and your <strong>java</strong> code then has to read from stdout of that process and write that content into a file; or in your case, write it into the stdin of another process call that runs your second script. </p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/3643939/java-process-with-input-output-stream\">here</a> on how to do that.</p>\n\n<p>Alternatively, you could enhance your perl scripts to take a file name argument, so that you could call it like</p>\n\n<pre><code>perl test.pl --write-to tmp.txt\nperl test1.pl --read-from tmp.txt --write-to test.txt\n</code></pre>\n\n<p>for example. Then your java side can make both calls in one shot.</p>\n"}], "owner": {"reputation": 581, "user_id": 4323755, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/df940827e39af2d285a588e90a5546ea?s=128&d=identicon&r=PG&f=1", "display_name": "Yacino", "link": "https://stackoverflow.com/users/4323755/yacino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "accepted_answer_id": 42905332, "answer_count": 1, "score": 2, "last_activity_date": 1490018389, "creation_date": 1490017608, "last_edit_date": 1490018265, "question_id": 42905270, "link": "https://stackoverflow.com/questions/42905270/run-perl-script-by-command-line-using-java-and-some-cmd-operator", "title": "run perl script by command line using java and some cmd operator", "body": "<p>I'm trying to run a perl scripts using this java code:</p>\n\n<pre><code>ProcessBuilder ps = new ProcessBuilder(\"perl\",\"test.pl\",\"test.txt\",\"|\", \"test1.pl\",\"&gt;\",\"result.txt\");\n</code></pre>\n\n<p>So the first script reads a <code>txt</code> file and then print some result.</p>\n\n<p>Then the second script get this output, does some others modifications, and then prints them in a new txt file <code>result.txt</code></p>\n\n<p>This command line works fine using <code>cmd</code> on windows, but when using java, there is a problem with the <code>|</code> and the <code>&gt;</code>.</p>\n\n<p>Is there a way to run a such command using java?</p>\n"}, {"tags": ["perl", "post", "jira", "jira-rest-api"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490024514, "post_id": 42906404, "comment_id": 72915253, "body": "That module is essentially a wrapper around <code>LWP::UserAgent</code> and <code>URI</code>; I don&#39;t see anything to do with REST in there and the documentation is dreadful. <code>%$headers</code> is a strange way of specifying that the parameter should be a hash reference. I see that there&#39;s a method that hands back the <code>LWP::UserAgent</code> object it&#39;s using (or you can pass it your own in the constructor) so you can probably get to that object&#39;s file handling, but it&#39;s probably easier just to slurp the file and pass it in the call to <code>POST</code>, or perhaps use <code>LWP</code> directly."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1490020608, "creation_date": 1490020608, "answer_id": 42906404, "question_id": 42904554, "link": "https://stackoverflow.com/questions/42904554/perl-jira-post-error-headers-must-be-presented-as-a-hashref/42906404#42906404", "title": "Perl JIRA POST error &quot;headers must be presented as a hashref&quot;", "body": "<p>From the documentation:</p>\n\n<blockquote>\n  <p>POST ( $url, [$body_content, %$headers] )</p>\n</blockquote>\n\n<p>And you're doing:</p>\n\n<pre><code>$client-&gt;POST(\n    $url,\n    'Content_Type' =&gt; 'form-data',\n    'Content'      =&gt; [ 'file' =&gt; [$attachment] ]\n);\n</code></pre>\n\n<p>So - passing a list of scalars, with an arrayref at the end. </p>\n\n<p>Perhaps you want something like:</p>\n\n<pre><code>$client-&gt;POST(\n    $url,\n    $attachment,\n    { 'Content-Type' =&gt; 'form-data' }\n);\n</code></pre>\n\n<p>Note the <code>{}</code> to construct an anonymous hash for the headers. </p>\n\n<p>Although you probably want to open and include the 'attachment', because there's nothing in <code>REST::Client</code> about opening files and sending them automagically. </p>\n"}, {"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 2, "last_activity_date": 1490040602, "last_edit_date": 1490040602, "creation_date": 1490023025, "answer_id": 42907339, "question_id": 42904554, "link": "https://stackoverflow.com/questions/42904554/perl-jira-post-error-headers-must-be-presented-as-a-hashref/42907339#42907339", "title": "Perl JIRA POST error &quot;headers must be presented as a hashref&quot;", "body": "<p>According to the <a href=\"https://metacpan.org/pod/REST::Client#POST-(-$url,-[$body_content,-%$headers]-)\" rel=\"nofollow noreferrer\">documentation</a>, the <code>POST</code> method:</p>\n\n<blockquote>\n  <p>Takes an optional body content and hashref of custom request headers.</p>\n</blockquote>\n\n<p>You need to put your headers in a hashref, e.g.:</p>\n\n<pre><code>$client-&gt;POST($url, $content, {\n    foo =&gt; 'bar',\n    baz =&gt; 'qux'\n});\n</code></pre>\n\n<hr>\n\n<p>But...it looks like you're expecting REST::Client to use <a href=\"https://metacpan.org/pod/HTTP::Request::Common#POST-$url\" rel=\"nofollow noreferrer\">HTTP::Request::Common</a> to construct a multipart/form-data request. Unfortunately, that's not the case, so you'll have to build the content by hand.</p>\n\n<p>You <em>could</em> use HTTP::Request::Common directly like this: </p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse 5.010;\n\nuse HTTP::Request::Common;\nuse REST::Client;\n\nmy $client = REST::Client-&gt;new;\nmy $url = 'http://www.example.com';\n\nmy $req = POST($url,\n    Content_Type =&gt; 'form-data',\n    Content      =&gt; [ file =&gt; [ 'foo.txt' ] ]\n);\n\n$client-&gt;POST($url, $req-&gt;content(), {\n    $req-&gt;headers-&gt;flatten()\n});\n</code></pre>\n\n<p>But this is a bit convoluted; I would recommend dropping REST::Client and using <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow noreferrer\">LWP::UserAgent</a> instead. REST::Client is just a thin wrapper for LWP::UserAgent with a few convenience features, like prepending a default host to all requests. In this case, it's just getting in the way and I don't think the conveniences are worth the trouble.</p>\n"}], "owner": {"reputation": 21, "user_id": 6731908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8cd6b67295c843335735697529c7951?s=128&d=identicon&r=PG&f=1", "display_name": "stackUnderflow", "link": "https://stackoverflow.com/users/6731908/stackunderflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 718, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1490040602, "creation_date": 1490015620, "last_edit_date": 1490016290, "question_id": 42904554, "link": "https://stackoverflow.com/questions/42904554/perl-jira-post-error-headers-must-be-presented-as-a-hashref", "title": "Perl JIRA POST error &quot;headers must be presented as a hashref&quot;", "body": "<p>I am writing a Perl script to POST an attachment to JIRA using\n<a href=\"https://metacpan.org/pod/REST::Client\" rel=\"nofollow noreferrer\"><code>REST::Client</code></a> to access the <a href=\"https://docs.atlassian.com/jira/REST/cloud/\" rel=\"nofollow noreferrer\">API</a>\nbut I am getting an error.</p>\n\n<pre><code>use REST::Client;\n\nuse warnings;\nuse strict;\n\nuse File::Slurp;\nuse MIME::Base64;\n\nmy $user = 'user';\nmy $pass = 'pass';\nmy $url  = \"http://******/rest/api/2/issue/BugID/attachments\";\n\nmy $client = REST::Client-&gt;new();\n$client-&gt;addHeader( 'Authorization', 'Basic' . encode_base64( $user . ':' . $pass ) );\n$client-&gt;addHeader( 'X-Atlassian-Token', 'no-check' );\n$client-&gt;setHost( $url );\n\n# my %header = ('Authorization' =&gt; 'Basic'. encode_base64($user . ':' . $pass),'X-Atlassian-Token' =&gt; 'no-check');\n\nmy $attachment = \"C:\\\\Folder\\\\Test.txt\";\n\n$client-&gt;POST(\n    $url,\n    'Content_Type' =&gt; 'form-data',\n    'Content'      =&gt; [ 'file' =&gt; [$attachment] ]\n);\n\nif ( $client-&gt;responseCode() eq '200' ) {\n    print \"Updated\\n\";\n}\n\n# print the result\nprint $client-&gt;responseContent() . \"\\n\";\n</code></pre>\n\n<p>The error I get is</p>\n\n<blockquote>\n  <p>REST::Client exception: headers must be presented as a hashref at C:\\Users\\a\\filename.pl line 24.</p>\n</blockquote>\n\n<p>As shown in the code, I have tried setting headers in different ways but I still get same error.</p>\n\n<p>Please suggest if there is any other method.</p>\n\n<p>I have tried using JIRA module but it gives error too.</p>\n"}, {"tags": ["regex", "perl", "regex-lookarounds", "regex-greedy", "regex-group"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1490008098, "post_id": 42901724, "comment_id": 72903553, "body": "What&#39;s the output for your sample data? I&#39;m having a bit of a hard time following your code, but this smells like an XY problem. Like - you talk about &quot;KitName&quot; but it&#39;s unclear what that actually is. This looks like a job for a hash, not an array though."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1490009117, "post_id": 42901724, "comment_id": 72904160, "body": "@Sobrique: The OP simply wants to check whether the part of each array element after the colon is the same throughout the array."}], "answers": [{"tags": [], "owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "is_accepted": true, "score": 1, "last_activity_date": 1490008254, "creation_date": 1490008254, "answer_id": 42902090, "question_id": 42901724, "link": "https://stackoverflow.com/questions/42901724/perl-regex-to-test-if-array-is-uniform/42902090#42902090", "title": "Perl Regex to test if array is uniform", "body": "<p>Why not achieve the result with a regex-only solution?</p>\n\n<pre><code>\\A\\s*(?&gt;[^\\s:]+:(?(1)\\1|(\\S+))\\s*)+\\z\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/9xuLXI/1\" rel=\"nofollow noreferrer\">Live demo</a> (no mismatch)</p>\n\n<p><a href=\"https://regex101.com/r/9xuLXI/2\" rel=\"nofollow noreferrer\">Live demo</a> (having mismatch)</p>\n"}, {"tags": [], "owner": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "is_accepted": false, "score": 0, "last_activity_date": 1490011607, "last_edit_date": 1490011607, "creation_date": 1490008386, "answer_id": 42902125, "question_id": 42901724, "link": "https://stackoverflow.com/questions/42901724/perl-regex-to-test-if-array-is-uniform/42902125#42902125", "title": "Perl Regex to test if array is uniform", "body": "<p>You can try the following approach to match every value with the first value.</p>\n\n<p>Say, the first value is : </p>\n\n<pre><code>K1663\n</code></pre>\n\n<p>Then you can loop through the rest of the indexes and apply this regex to determine if that is a match. If that is a match you can print it.</p>\n\n<pre><code>use strict;\n\n\nmy $regex = qr/^(\\d+):(?!K1663$)(.*)$/mp;\n\nmy $str = '3:K1675';\n# your loop goes here : where each $str contains the current index value\nif( $str =~ /$regex/g )\n  print \"$1 $2 \\n\";\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/ZT8yZg/1\" rel=\"nofollow noreferrer\">Regex Demo</a></p>\n\n<p><a href=\"http://ideone.com/Wn1sFz\" rel=\"nofollow noreferrer\">Demo Impl</a></p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1490008616, "creation_date": 1490008616, "answer_id": 42902201, "question_id": 42901724, "link": "https://stackoverflow.com/questions/42901724/perl-regex-to-test-if-array-is-uniform/42902201#42902201", "title": "Perl Regex to test if array is uniform", "body": "<p>So if I'm reading you correctly - you're trying to check if all the \"K\" numbers are the same, or not.</p>\n\n<p>I'd actually suggest that a \"magic regex\" isn't the solution here - it's doable, but it's inevitably going to be quite hard to follow, and hard to modify later. </p>\n\n<p>Instead, I'd say your data is ideal for inserting into a <a href=\"http://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\"><code>hash</code></a> in perl, because... well, it <em>is</em> key value pairs, and thats what hashes are for. </p>\n\n<p>So with that in mind, I'd tackle it like this:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\n#read it into a hash\nmy %data = map { /(\\d+):(\\w+)/ } &lt;&gt;;\n# &lt;&gt; is the magic file handle, that reads 'STDIN'\n#or files specified to command line. \n#you can do the same with any FH that you've opened though. \n\n#for debug\nprint Dumper \\%data;\n\n#count values. \nmy %count_of;\n$count_of{$_}++ for values %data;\n\n#for debug\nprint Dumper \\%count_of;\n\n#if there's more than one key here, we\n#have a mismatch\nif ( keys %count_of &gt; 1 ) {\n    print \"Mismatch spotted:\\n\";\n    foreach my $key ( sort { $a &lt;=&gt; $b} keys %data ) { \n        print \"$key:$data{$key}\\n\";\n    }\n}\n</code></pre>\n\n<p>I've assumed here you can read in from a file. If that's not a valid assumption, then you can do the same thing with <code>@KitHit</code> and map:</p>\n\n<pre><code>my %data = map { /(\\d+):(\\w+)/ } @KitHit; \n</code></pre>\n\n<p>And do the same thing. </p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1490011450, "last_edit_date": 1495540442, "creation_date": 1490008892, "answer_id": 42902301, "question_id": 42901724, "link": "https://stackoverflow.com/questions/42901724/perl-regex-to-test-if-array-is-uniform/42902301#42902301", "title": "Perl Regex to test if array is uniform", "body": "<p>Your test</p>\n\n<pre><code>if ( ( $_ =~ /(?&lt;=:)\\w+/g ) eq ( $KitHit[0] =~ /(?&lt;=:)\\w+/g ) ) {\n</code></pre>\n\n<p>is comparing the results of two regex pattern matches. Those results are boolean indications of whether the strings matched the pattern</p>\n\n<p>You are testing whether the values in the array contain a colon <code>:</code> followed by at least one \"word\" character. Since all of them do, the result of both matches will always be 1. Your comparison compares <code>'1' eq '1'</code> and always results in <em>true</em></p>\n\n<p>There are a number of other problems with your code</p>\n\n<ul>\n<li><p>You should show a <a href=\"https://stackoverflow.com/help/mcve\"><em>minimal, complete and verifiable example</em></a> so that we can try your code ourselves</p></li>\n<li><p>You must <code>use strict</code> and <code>use warnings 'all'</code> at the top of every Perl program you write, and declare every variablee with <code>my</code> as close as possible to its first point of use</p></li>\n<li><p>Most Perl programmers are more familiar with lexical variables named with lower-case letters, digits, and underscores. It is especially important to avoid a capital initial letter. So <code>@KitHit</code> should be <code>@kit_hit</code></p></li>\n<li><p>You open the output file right at the start of the program, but don't write to it until the end. And did you mean to open it for <em>appending</em>?</p></li>\n<li><p>In the line <code>foreach ( (), @KitHit ) {</code>, the <code>()</code> is ineffective and should be removed</p></li>\n<li><p>You do the calculation of <code>$KitHelp</code> and the push onto <code>@KitHold</code> identically in both branches of the <code>if</code>. These should be done just once, separately, either before or after the <code>if</code></p></li>\n<li><p>You should make use of variable interpolation to build strings instead of the concatenation operator <code>.</code>. Also note that square brackets don't need to be escaped inside double quotes, so</p>\n\n<pre><code> $KitHelp = $separator[$1] . \"\\[$categories[$1]\\]:\" . $_ . \"\\n\"\n</code></pre>\n\n<p>could be written as</p>\n\n<pre><code> $KitHelp = \"$separator[$1][$categories[$1]]:$_\\n\"\n</code></pre></li>\n<li><p>Your flag variable <code>$booly</code> should have a more meaningful name, like <code>$mismatch</code></p></li>\n</ul>\n\n<p>You haven't shown the contents of <code>@separator</code> or <code>@categories</code> so I can't properly test this code, but it looks correct and compiles</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy @hit_hold;\nmy (@separator, @categories);    # Need initialising\n\nmy @kit_hit = qw/\n    2:K1663\n    3:K1675\n    4:K1663\n    5:K1663\n    6:K1663\n    7:K1663\n    8:K1675\n    13:K1675\n    14:K1675\n/;\n\nmy $mismatch;\n\nmy ($output_file) = @ARGV;    # Take output file name from command line\n\ndie unless my ($n0, $key0) = $kit_hit[0] =~ /^(\\d+):(.+)/;\n\nfor ( @kit_hit ) {\n\n    next unless my ($n, $key) = /^(\\d+):(.+)/;\n\n    push @hit_hold, \"$separator[$n][$categories[$1]]:$_\\n\";\n\n    if ( $key eq $key0 ) {\n        print \"\\nA\";\n    }\n    else {\n        $mismatch = 1;\n        print \"\\nB\";\n    }\n}\n\nif ( $mismatch ) {\n\n    open my $out_fh, '&gt;', $output_file or die qq{Could not open \"$output_file\" for output: $!};    \n    my $old_fh = select $out_fh;\n\n    print \"\\n\\n\";\n    print \"Kits not uniform:\\n\";\n    print \"$_\\n\" for @hit_hold;\n    close $out_fh;\n\n    select $old_fh;\n} \n</code></pre>\n"}], "owner": {"reputation": 388, "user_id": 7672005, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-R-OYfkK3E2M/AAAAAAAAAAI/AAAAAAAAABA/6paHCK6AaaY/photo.jpg?sz=128", "display_name": "Zyzyx", "link": "https://stackoverflow.com/users/7672005/zyzyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 42902090, "answer_count": 4, "score": 0, "last_activity_date": 1490011607, "creation_date": 1490007143, "last_edit_date": 1490008516, "question_id": 42901724, "link": "https://stackoverflow.com/questions/42901724/perl-regex-to-test-if-array-is-uniform", "title": "Perl Regex to test if array is uniform", "body": "<p>I have a piece of code that\u00b4s not working and I can\u00b4t figure out why.\nIt's probably a regex problem but as far as I know it should be working.</p>\n\n<p>I have an array which holds <code>&lt;typenumber&gt;:&lt;KitName&gt;</code>, for example <code>2:K1663</code></p>\n\n<p>I want to match the <code>KitName</code> of every entry in this array to the <code>KitName</code> of the first entry. For this I have a regex that should return everything past the colon <code>:</code>. I then use an <code>if</code> to compare the current entry <code>$_</code> to the first entry <code>$KitHit[0]</code>.</p>\n\n<p>Then, if there was any mismatch the <code>$booly</code> will be set to 1 and all the entries will be printed.</p>\n\n<p>However, even if the Kits are all the same I still get the entries printed.\nI added a <code>print \"A\"</code> or <code>print \"B\"</code> to see when the match code and when the mismatch code is ran. This returns <code>B A B A B A B A B</code> without any regard for my data.</p>\n\n<p>Can anyone tell me what is going wrong? I can't figure it out no matter what I try.</p>\n\n<pre><code>my @KitHold;\nmy $booly = 0;\n\nopen( $outputfile_fh, \"&gt;&gt;\", $outputfile ) or die \"Could not open file     '$outputfile' $!\";    \n\nforeach ( (), @KitHit ) {\n\n    my $KitHelp;\n\n    if ( ( $_ =~ /(?&lt;=:)\\w+/g ) eq ( $KitHit[0] =~ /(?&lt;=:)\\w+/g ) ) {\n        $KitHelp = $separator[$1] . \"\\[$categories[$1]\\]:\" . $_ . \"\\n\" if $_ =~ /(\\d+)/;\n        push (@KitHold,$KitHelp);\n        print \"\\nA;\n    }\n    else {\n        $KitHelp = $separator[$1] . \"\\[$categories[$1]\\]:\" . $_ . \"\\n\" if $_ =~ /(\\d+)/;\n        push( @KitHold, $KitHelp );\n        $booly = 1;\n        print \"\\nB\";\n    }\n}\n\nif ( $booly == 1 ) {\n    print {$outputfile_fh} \"\\n\\nKits not uniform:\\n@KitHold\";\n} \n\nclose $outputfile_fh;\n</code></pre>\n\n<p>Example data:</p>\n\n<h3><code>@KitHit</code> with mismatches:</h3>\n\n<pre><code>    2:K1663\n    3:K1675\n    4:K1663\n    5:K1663\n    6:K1663\n    7:K1663\n    8:K1675\n    13:K1675\n    14:K1675\n</code></pre>\n\n<h3><code>@KitHit</code> with uniform entries:</h3>\n\n<pre><code>    2:K1663\n    3:K1663\n    4:K1663\n    5:K1663\n    6:K1663\n    7:K1663\n    8:K1663\n    13:K1663\n    14:K1663\n</code></pre>\n\n<p>I should also mention that the Kit names could eventually come to include more than just a K and 4 numbers, hence why my regex looks at everything after the colon.</p>\n"}, {"tags": ["perl", "multidimensional-array", "arrayref"], "comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 3, "creation_date": 1490006431, "post_id": 42901382, "comment_id": 72902477, "body": "Please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Having a samle input data and the wanted result will greatly help us provide some answer."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490009410, "post_id": 42901382, "comment_id": 72904353, "body": "Please add the <i>&quot;hard-coded the values here till $a[4][4]&quot;</i> so that we can run this for ourselves. 25 lines of code shouldn&#39;t be a problem."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7739035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29c3b539e75d689f95a02687f4af97f9?s=128&d=identicon&r=PG&f=1", "display_name": "moherangde", "link": "https://stackoverflow.com/users/7739035/moherangde"}, "edited": false, "score": 0, "creation_date": 1490084607, "post_id": 42903579, "comment_id": 72941071, "body": "Thank you for your reply. I have got my answer to how to obtain the number of rows of the inversed."}, {"owner": {"reputation": 3, "user_id": 7739035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29c3b539e75d689f95a02687f4af97f9?s=128&d=identicon&r=PG&f=1", "display_name": "moherangde", "link": "https://stackoverflow.com/users/7739035/moherangde"}, "edited": false, "score": 0, "creation_date": 1490085146, "post_id": 42903579, "comment_id": 72941375, "body": "I did not write all the hard-coded values as I had randomly chosen some values for testing purpose. My code was able to inverse the matrix but could neither access it&#39;s elements by the normal syntax nor was it printing the number of rows correctly. @jm666 I will definitely take care of it in future."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3, "user_id": 7739035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29c3b539e75d689f95a02687f4af97f9?s=128&d=identicon&r=PG&f=1", "display_name": "moherangde", "link": "https://stackoverflow.com/users/7739035/moherangde"}, "edited": false, "score": 0, "creation_date": 1490096998, "post_id": 42903579, "comment_id": 72949882, "body": "@moherangde: I am glad that you have a solution. You should always post complete code that we can run ourselves with as little modification as possible. Once you have found a set of values that doesn&#39;t result in a <i>singular</i> matrix (a matrix without an inverse) whether or not they are random, it doesn&#39;t make sense to force us to repeat the process. That is why I used the identity matrix. You should read <a href=\"https://stackoverflow.com/help/mcve\"><i>How to create a Minimal, Complete, and Verifiable example</i></a>."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1490012784, "creation_date": 1490012784, "answer_id": 42903579, "question_id": 42901382, "link": "https://stackoverflow.com/questions/42901382/how-to-calculate-number-of-rows-of-a-referenced-array-in-perl/42903579#42903579", "title": "How to calculate number of rows of a referenced array in Perl", "body": "\n\n<p>You are creating a \n<a href=\"https://metacpan.org/pod/Math::MatrixReal\" rel=\"nofollow noreferrer\"><code>Math::MatrixReal</code></a>\nmatrix object, and then accessing it as a simple Perl array. Poking around inside a Perl object indiscriminately is wrong, and you must use the methods defined in the documentation</p>\n\n<p>In particular, your statement</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>print $$b_inv[0][1][1],\"\\n\";    # prints the correct element\n</code></pre>\n\n<p>accesses a <em>three-dimensional</em> array, and there is no way of knowing what the \"correct element\" should be for this without reading the code of the module</p>\n\n<p>This modification sets up a 5 x 5 identity matrix (in future, please provide data that we can use to reproduce your results) and takes its inverse. The values output are derived using the object's methods as I described and are all correct. Note that the rows and columns are indexed from one instead of from zero that you would expect for Perl arrays</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse Math::MatrixReal;\n\nmy @arr = (\n    [1, 0, 0, 0, 0],\n    [0, 1, 0, 0, 0],\n    [0, 0, 1, 0, 0],\n    [0, 0, 0, 1, 0],\n    [0, 0, 0, 0, 1],\n);\n\nmy $ref_a = \\@arr;\nmy $b = Math::MatrixReal-&gt;new_from_rows(\\@arr);\nmy $b_inv = $b-&gt;inverse;\n\nprint \"\\nInverse is\\n\", $b_inv;\nprint \"\\n\\nTest printing elements\\n\";\nprint $b_inv-&gt;element($_, $_), \"\\n\" for 1 .. 5;\n\nmy ($row_b, $col_b) = $b-&gt;dim;;\nprint \"Number of rows in b: $row_b\\n\";           # prints 5\nprint \"Columns in b: $col_b\\n\";                  # prints 5\n\nmy ($row_binv, $col_binv) = $b_inv-&gt;dim;;\nprint \"Number of rows in b_inv: $row_binv\\n\";    # prints 5\nprint \"Number of columns in b_inv $col_binv\\n\";  # prints 5\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Inverse is\n[  1.000000000000E+000  0.000000000000E+000  0.000000000000E+000  0.000000000000E+000  0.000000000000E+000 ]\n[  0.000000000000E+000  1.000000000000E+000  0.000000000000E+000  0.000000000000E+000  0.000000000000E+000 ]\n[  0.000000000000E+000  0.000000000000E+000  1.000000000000E+000  0.000000000000E+000  0.000000000000E+000 ]\n[  0.000000000000E+000  0.000000000000E+000  0.000000000000E+000  1.000000000000E+000  0.000000000000E+000 ]\n[  0.000000000000E+000  0.000000000000E+000  0.000000000000E+000  0.000000000000E+000  1.000000000000E+000 ]\n\n\nTest printing elements\n1\n1\n1\n1\n1\nNumber of rows in b: 5\nColumns in b: 5\nNumber of rows in b_inv: 5\nNumber of columns in b_inv 5\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7739035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29c3b539e75d689f95a02687f4af97f9?s=128&d=identicon&r=PG&f=1", "display_name": "moherangde", "link": "https://stackoverflow.com/users/7739035/moherangde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 42903579, "answer_count": 1, "score": -1, "last_activity_date": 1490012784, "creation_date": 1490006203, "last_edit_date": 1490006541, "question_id": 42901382, "link": "https://stackoverflow.com/questions/42901382/how-to-calculate-number-of-rows-of-a-referenced-array-in-perl", "title": "How to calculate number of rows of a referenced array in Perl", "body": "<p>A part of my code calculates inverse of a matrix (generated previously in the code) with dimensions more than 300 X 300. I want to use the elements of the inversed matrix further in the code. Have used the below code for this, trying with only 5X5 matrix for testing:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Math::MatrixReal;\nmy @a=();                           #a is the matrix obtained\n$a[0][0]=0.18761134;\n$a[0][1]=0.010779401;               #Have hard-coded the values here till $a[4][4] \n\nmy $ref_a = \\@a;\nmy $b = Math::MatrixReal-&gt;new_from_rows($ref_a);\nmy $b_inv = $b-&gt;inverse();\nprint \"\\n Inverse is\\n\",$b_inv;                      #prints correct inverse\nprint \"\\n\\nTest printing elements\\n\";\nprint $$b_inv[0][1][1],\"\\n\";                         #prints the correct element\n\nmy $row_b=scalar(@{$b});   \nprint \"Number of rows in b: \",$row_b,\"\\n\";           #prints 6\nmy $col_b=@{$$b[0]};\nprint \"Columns in b: \",$col_b,\"\\n\";                  #prints 5\n\nmy $row_binv=scalar(@$b_inv);\nprint \"Number of rows in b_inv: \",$row_binv,\"\\n\";    #prints 3\nmy $col_binv=@{$$b_inv[0]};\nprint \"Number of columns in b_inv \",$col_binv,\"\\n\";  #prints 5\n</code></pre>\n\n<p>I am not able to understand </p>\n\n<ol>\n<li><p>why the output of number of rows for both b and b_inv is wrong? How to get the correct value of number of rows?</p></li>\n<li><p>That although the syntax of printing elements of a referenced array is <code>$$b_inv[1][1]</code>, I get the correct output when I use <code>$$b_inv[0][1][1]</code></p></li>\n</ol>\n"}, {"tags": ["regex", "perl", "regex-greedy"], "answers": [{"tags": [], "owner": {"reputation": 254, "user_id": 6752390, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6071587a3b51842ff285ac4f5c43c0a7?s=128&d=identicon&r=PG&f=1", "display_name": "questionar", "link": "https://stackoverflow.com/users/6752390/questionar"}, "is_accepted": false, "score": 0, "last_activity_date": 1490011657, "creation_date": 1490011657, "answer_id": 42903180, "question_id": 42901359, "link": "https://stackoverflow.com/questions/42901359/regular-expression-matchinf-for-first-occurrence/42903180#42903180", "title": "regular expression matchinf for first occurrence", "body": "<pre><code>(push.*?)(\\$\\w+)(,.*)\n</code></pre>\n\n<p>it works</p>\n"}], "owner": {"reputation": 254, "user_id": 6752390, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6071587a3b51842ff285ac4f5c43c0a7?s=128&d=identicon&r=PG&f=1", "display_name": "questionar", "link": "https://stackoverflow.com/users/6752390/questionar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1490070906, "creation_date": 1490006139, "question_id": 42901359, "link": "https://stackoverflow.com/questions/42901359/regular-expression-matchinf-for-first-occurrence", "title": "regular expression matchinf for first occurrence", "body": "<p>I have a text's </p>\n\n<pre><code>case 1 :push ($arr, $var1);\ncase 2 : push $arr, $var1, $var2;\ncase 3 push ($arr, $var1, $var2);\n</code></pre>\n\n<p>I need to grep out capture it as\n    <code>$1=push ( and $2 as $arr and $3 as , $var1, $var2);</code> for case 3</p>\n\n<p>i tried it as</p>\n\n<pre><code> /(.*push.*)(\\$.*)(,.*)/\n</code></pre>\n\n<p>and <code>/(.*push.*)(\\$.*)([^,]*)/</code> but it's not working for all the cases properly</p>\n"}, {"tags": ["perl", "environment-variables"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490005408, "post_id": 42901061, "comment_id": 72901847, "body": "How do you start the application? Please show a minimal example of how you run it, and how you clean it up again."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1490005830, "post_id": 42901061, "comment_id": 72902123, "body": "I don&#39;t understand the question. As far as perl is concerned, there is only one set of environment variables; there is no distinction between &quot;user&quot; and &quot;system&quot;. You can provide whatever environment variables you want. The default behavior is to inherit everything."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490006007, "post_id": 42901061, "comment_id": 72902243, "body": "If the java program runs as a child of the Perl program, a whitelist of allowed environment variables together with a <code>local %ENV</code> and some cleanup should work fine. But we really have to get some more details."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6734995"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490011477, "post_id": 42901061, "comment_id": 72905638, "body": "@simbabque I need to update the whole question because I found that the problem doesn&#39;t come from those configuration files. The problem is that the variable <code>%systemdrive%</code> is not known in the executed Java context."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6734995"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1490011969, "post_id": 42901061, "comment_id": 72905968, "body": "@melpomene updated, sorry about the confusion"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6734995"}, "edited": false, "score": 0, "creation_date": 1490015049, "post_id": 42904216, "comment_id": 72908306, "body": "The application doesn&#39;t use it explicitlly/directly. I guess some subcomponent creates this folder ..."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1490014596, "creation_date": 1490014596, "answer_id": 42904216, "question_id": 42901061, "link": "https://stackoverflow.com/questions/42901061/pass-environment-to-a-child-process/42904216#42904216", "title": "Pass environment to a child process", "body": "<p>If you are using the string <code>%systemdrive%\\ProgramData\\Microsoft\\Windows\\Caches</code> to create the folder then it isn't going to work. Only the command shell will expand environment variables in a command, and Perl or Java will need to explicitly expand the value. In Perl you would use</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$ENV{SYSTEMDRIVE} . '\\ProgramData\\Microsoft\\Windows\\Caches'\n</code></pre>\n\n<p>In Java you want</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>System.getenv(\"SYSTEMDRIVE\") + . \"\\\\ProgramData\\\\Microsoft\\\\Windows\\\\Caches\"\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6734995"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490014596, "creation_date": 1490005293, "last_edit_date": 1495541374, "question_id": 42901061, "link": "https://stackoverflow.com/questions/42901061/pass-environment-to-a-child-process", "title": "Pass environment to a child process", "body": "<p>I am running a script which launches a Java application. After execution the application creates a folder in the current working directory  <code>%systemdrive%/ProgramData\\Microsoft\\Windows\\Caches\\cversions.2.db</code>. I read on <a href=\"https://stackoverflow.com/questions/24116126/systemdrive-programdata-microsoft-windows-caches-getting-created-when-executin\">this</a> question that the problem appears because of the variable <code>%SystemDrive%</code> being undefined in the executed Java context.\n<br> The application is executed with :<br><code>system(\"java -jar application.jar\");</code><br>\n<br> How do I explicitelly pass all the environment to the executed application?</p>\n"}, {"tags": ["perl", "hex"], "comments": [{"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 6, "creation_date": 1489992106, "post_id": 42897216, "comment_id": 72894708, "body": "Yes there is. What have you tried?"}, {"owner": {"reputation": 205, "user_id": 4770887, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh3.googleusercontent.com/-T3zRs7dM69A/AAAAAAAAAAI/AAAAAAAAABA/8b0xU0_DWdM/photo.jpg?sz=128", "display_name": "aayu5h", "link": "https://stackoverflow.com/users/4770887/aayu5h"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1490003034, "post_id": 42897216, "comment_id": 72900266, "body": "for(my $i = 0x8000000; $i &lt;= 0x10000000; $i += 0x1000000)     print &quot;sum &quot;, hex $i, &quot;\\n&quot;; I Tried this with and without the hex keyword. It prints all values in decimal notation."}, {"owner": {"reputation": 205, "user_id": 4770887, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh3.googleusercontent.com/-T3zRs7dM69A/AAAAAAAAAAI/AAAAAAAAABA/8b0xU0_DWdM/photo.jpg?sz=128", "display_name": "aayu5h", "link": "https://stackoverflow.com/users/4770887/aayu5h"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1490003855, "post_id": 42897216, "comment_id": 72900789, "body": "Also tried inside the loop : print sprintf &quot;%X&quot;, $i, &quot;\\n&quot;; This gives the required values but throws a warning &quot;Redundant argument in sprintf at ...&quot;"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1490003923, "post_id": 42897216, "comment_id": 72900852, "body": "That&#39;s because you&#39;ve got your <code>sprintf</code> wrong. It should be <code>print sprintf (&quot;%X\\n&quot;, $i )</code>. Or just <code>printf ( &quot;%X\\n&quot;, $i );</code> because printing a sprintf is redundant"}, {"owner": {"reputation": 205, "user_id": 4770887, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh3.googleusercontent.com/-T3zRs7dM69A/AAAAAAAAAAI/AAAAAAAAABA/8b0xU0_DWdM/photo.jpg?sz=128", "display_name": "aayu5h", "link": "https://stackoverflow.com/users/4770887/aayu5h"}, "edited": false, "score": 0, "creation_date": 1490005891, "post_id": 42897216, "comment_id": 72902165, "body": "oh yes, i got it now. thanks"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1490004344, "last_edit_date": 1490004344, "creation_date": 1490003861, "answer_id": 42900532, "question_id": 42897216, "link": "https://stackoverflow.com/questions/42897216/adding-hex-values-in-a-loop/42900532#42900532", "title": "Adding hex values in a loop", "body": "<p>You need <code>printf</code> or <code>sprintf</code> for outputting hex. </p>\n\n<p>Perl \"understands\" hex just fine, if you stick <code>0x</code> in front of it, it's hex. </p>\n\n<p>For output formatting though, it'll default to 'normal' numeric representation - so instead you want either <code>printf</code> or <code>sprintf</code> (they do the same thing, but the latter 'prints' to a string). </p>\n\n<pre><code> #!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nprint 0x10,\"\\n\";\n\nmy $value = 0x20;\n$value += 0x1F;\n\nprint $value,\"\\n\";\n\nprintf (\"%X\\n\", $value);\n</code></pre>\n\n<p>The format string is either <code>%X</code> for upper case hex, or <code>%x</code> to use lowercase. </p>\n\n<p>So for your example:</p>\n\n<pre><code>for ( my $i = 0x8000000; $i &lt;= 0x10000000; $i += 0x1000000 ) {\n   printf( \"sum 0x%x\\n\", $i );\n}\n</code></pre>\n"}], "owner": {"reputation": 205, "user_id": 4770887, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh3.googleusercontent.com/-T3zRs7dM69A/AAAAAAAAAAI/AAAAAAAAABA/8b0xU0_DWdM/photo.jpg?sz=128", "display_name": "aayu5h", "link": "https://stackoverflow.com/users/4770887/aayu5h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1490004344, "creation_date": 1489991820, "question_id": 42897216, "link": "https://stackoverflow.com/questions/42897216/adding-hex-values-in-a-loop", "title": "Adding hex values in a loop", "body": "<p>I have to generate a text file which contains a lot of hexadecimal values. The hex values are in arithmetic progression, with a difference of 0x1000000.</p>\n\n<p>The output in the file should be as:</p>\n\n<pre><code>sum(0x08000000, \"text\")\nsum(0x09000000, \"some other text\")\nsum(0x0A000000, \"yet another text\")\n...\nsum(0x10000000, \"random something\")\n...\n</code></pre>\n\n<p>Is there any way I can run a loop to generate these values?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl", "strawberry-perl", "activeperl"], "comments": [{"owner": {"reputation": 3751, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490017799, "post_id": 42895994, "comment_id": 72910263, "body": "Are you sure Strawberry would solve your problems? The ActiveState version is a quality one. If your problems are inherent to Perl 5.22 (e.g. some modules you need aren&#39;t compatible with 5.22), Strawberry Perl isn&#39;t going to solve that. I&#39;m writing this because some believe that Strawberry, being open source, is like magic and solves all the problems of the world, but that is not the case. So before you switch, make sure it&#39;s worth it!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490024506, "post_id": 42895994, "comment_id": 72915247, "body": "I don&#39;t know anything about portable builds, but I have multiple ActivePerl and StrawberryPerl builds installed without issue. Just make sure you execute the &quot;right&quot; perl, cpan, cpanm, ppm, etc."}], "answers": [{"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1490015444, "post_id": 42896464, "comment_id": 72908580, "body": "The obvious problem with this is the fact that the batch files created by <code>pl2bat</code> rely on the <code>perl</code> on the <code>%PATH%</code>."}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 2, "last_activity_date": 1489988023, "creation_date": 1489988023, "answer_id": 42896464, "question_id": 42895994, "link": "https://stackoverflow.com/questions/42895994/using-activeperl-and-strawberry-simultanously/42896464#42896464", "title": "Using ActivePerl and Strawberry simultanously", "body": "<p>You can, you just have to watch which perl you're using.  Only one can be \"first\" in your PATH. For this, I'd suggest leaving the old perl as the default, primary one. This will have the least effect on existing (production) code.</p>\n\n<p>You can, however, have a secondary perl in your PATH with a different name. For example, perl5.22.2.exe could be in your PATH, and you can use it when running your tests.</p>\n\n<p>If you have a batch file or similar as a wrapper around perl scripts, you can have the batch file for each app run the correct perl for that application, and you merely need a) a way to override the perl it uses, and b) to have it default to the tested level of perl you want it to use. That way you can test with 5.22.2 for a while, but the default remains 5.10.1.  And then you can switch the default over to 5.22.2 when you're ready for that application to switch.</p>\n\n<p>Whether it's client-side or server-side doesn't make any real difference to this.</p>\n\n<p>(And platform doesn't make much difference, either - while the actual implementation on a unix/linux system might be a bit different, the general idea doesn't have to be. You can have both installed at the same time, and manage which perl to use on an application by application basis if you have to.)</p>\n"}, {"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1490017093, "creation_date": 1490017093, "answer_id": 42905079, "question_id": 42895994, "link": "https://stackoverflow.com/questions/42895994/using-activeperl-and-strawberry-simultanously/42905079#42905079", "title": "Using ActivePerl and Strawberry simultanously", "body": "<p>One of the benefits of <a href=\"https://github.com/stevieb9/berrybrew\" rel=\"nofollow noreferrer\">berrybrew</a> is that it allows you to install and use any of the Strawberry Portable editions in a managed way, with the ability to very easily switch back to your system perl (in your case ActiveState) at any time.</p>\n\n<p>You can install from Github (above link), or via a zip file per the Installation instructions.</p>\n\n<p>Then:</p>\n\n<pre><code>cd berrybrew\nbin\\berrybrew.exe config\n</code></pre>\n\n<p>Close cmd window, open a new one.</p>\n\n<pre><code>berrybrew install 5.24.1_64\nberrybrew switch 5.24.1_64\n</code></pre>\n\n<p>Open new cmd window</p>\n\n<p>At this point you're using Strawberry Portable version 5.24.1. To switch back to ActiveState:</p>\n\n<pre><code>berrybrew off\n</code></pre>\n\n<p>To go back to a berrybrew managed Strawberry instance, just use the switch command per above.</p>\n"}], "owner": {"reputation": 41, "user_id": 5269794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Um6y.jpg?s=128&g=1", "display_name": "Dean Hannotte", "link": "https://stackoverflow.com/users/5269794/dean-hannotte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 804, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1490017093, "creation_date": 1489985067, "question_id": 42895994, "link": "https://stackoverflow.com/questions/42895994/using-activeperl-and-strawberry-simultanously", "title": "Using ActivePerl and Strawberry simultanously", "body": "<p>I recently upgraded my version of client-side 64-bit ActivePerl from version 5.10.1.1007 to 5.22.2.2203, and am having tons of problems with it.</p>\n\n<p>I'd really rather jump to Strawberry, but I'll have to test it first on each of the critical Perl apps I run on a daily basis.</p>\n\n<p>Can I install the portable version of Strawberry and test it out while continuing to use the ActivePerl version for production work?</p>\n\n<p>(Other stackoverflow questions similar to mine received answers about server-side Perl only.)</p>\n"}, {"tags": ["regex", "perl", "pcre"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1489986392, "post_id": 42891721, "comment_id": 72892850, "body": "Is the blank line between blocks guaranteed to always be there?"}], "answers": [{"tags": [], "owner": {"reputation": 2324, "user_id": 5334131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU6Bo.jpg?s=128&g=1", "display_name": "Hellmar Becker", "link": "https://stackoverflow.com/users/5334131/hellmar-becker"}, "is_accepted": false, "score": -1, "last_activity_date": 1489956003, "creation_date": 1489956003, "answer_id": 42891999, "question_id": 42891721, "link": "https://stackoverflow.com/questions/42891721/perl-multi-line-regex-appending-based-on-capture-group/42891999#42891999", "title": "Perl - Multi-line Regex &amp; Appending Based on Capture Group", "body": "<p>I would read the entire input file into a single variable, and then try to match something like <code>/(VALUE LABELS(.*?)\\.\\n)/gm</code>. The /m modifier tells the regex engine to use a multiline match and the .*? does a non-greedy match up to the first dot that immediately precedes a newline.</p>\n\n<p>Then, inside the result of that match, use a second regex to look for the \"Not Applicable\" string. Repeat until all input has been consumed.</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 7736417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3341889021681379d9e914cd10f7b6b?s=128&d=identicon&r=PG&f=1", "display_name": "CGhost", "link": "https://stackoverflow.com/users/7736417/cghost"}, "edited": false, "score": 0, "creation_date": 1489964596, "post_id": 42892006, "comment_id": 72887832, "body": "Forgive me, as I&#39;m so new to this, for such simple questions, but 1. how can I write from the $label_name variable into my $write variable, and 2. because I have $\\ set to undefined, ^ and $ won&#39;t work. Is it possible to do my initial multi-line regexes without having to turn $\\ off?"}, {"owner": {"reputation": 25, "user_id": 7736417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3341889021681379d9e914cd10f7b6b?s=128&d=identicon&r=PG&f=1", "display_name": "CGhost", "link": "https://stackoverflow.com/users/7736417/cghost"}, "edited": false, "score": 0, "creation_date": 1489967823, "post_id": 42892006, "comment_id": 72888729, "body": "OK, I have this partially working, but I seem to only be able to bring one result outside of the block. I need to capture the full list of variable names that have &quot;Don&#39;t Know&quot; or &quot;Not Applicable&quot; labels with these matches, and then print them at the end of the continue block. How can I store all of the hits inside the while{} block, and then bring them outside into my continue statement?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 25, "user_id": 7736417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3341889021681379d9e914cd10f7b6b?s=128&d=identicon&r=PG&f=1", "display_name": "CGhost", "link": "https://stackoverflow.com/users/7736417/cghost"}, "edited": false, "score": 0, "creation_date": 1489978823, "post_id": 42892006, "comment_id": 72891171, "body": "@CGhost  I&#39;ll add more.  As for <code>$&#47;</code>, normally you&#39;d localize it and change it <i>in a block</i>, --  <code>local $&#47;;</code>.  Then as the code exits that block the global value is seen again.  Like <code>{ local $&#47;; # use it ... }; # now global (previous) $&#47; is on</code>.  What you are seeing is precisely the purpose of that."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 25, "user_id": 7736417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3341889021681379d9e914cd10f7b6b?s=128&d=identicon&r=PG&f=1", "display_name": "CGhost", "link": "https://stackoverflow.com/users/7736417/cghost"}, "edited": false, "score": 0, "creation_date": 1489985496, "post_id": 42892006, "comment_id": 72892656, "body": "@CGhost  I updated a lot, restructuring to what I think better fits what you have, and adding a bit.  Let me know how it goes."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 25, "user_id": 7736417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3341889021681379d9e914cd10f7b6b?s=128&d=identicon&r=PG&f=1", "display_name": "CGhost", "link": "https://stackoverflow.com/users/7736417/cghost"}, "edited": false, "score": 0, "creation_date": 1489985634, "post_id": 42892006, "comment_id": 72892693, "body": "@CGhost Another thing I just noticed in your first comment.  You don&#39;t have to touch record-separators for the regex, and you don&#39;t want to. Multi-line text is processed fine with regex, in a number of ways.  But note that it generally gets harder."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489988514, "post_id": 42892006, "comment_id": 72893474, "body": "Given the sample data in the question, your test for <i>Don&#39;t Know</i> needs to be case-independent."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489992450, "post_id": 42892006, "comment_id": 72894833, "body": "@Borodin Indeed, it does :)  Thank you, corrected. Among many other <i>details</i> which aren&#39;t specified in the question. Is that a reason for a downvote?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490002336, "post_id": 42892006, "comment_id": 72899843, "body": "@zdim: Absolutely not. That was intended as an upvote. I&#39;m working on my phone at present and must have mis-clicked. I&#39;ve fixed it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490033414, "post_id": 42892006, "comment_id": 72921081, "body": "@Borodin Oh. Thank you."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 25, "user_id": 7736417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3341889021681379d9e914cd10f7b6b?s=128&d=identicon&r=PG&f=1", "display_name": "CGhost", "link": "https://stackoverflow.com/users/7736417/cghost"}, "edited": false, "score": 0, "creation_date": 1490033562, "post_id": 42892006, "comment_id": 72921161, "body": "@CGhost  I&#39;ve added more detail to the last section of my answer, about how you&#39;d use this with what you already have.  One change to your code would be needed, to manipulate record separators (if you really need that) <i>in a block and with <code>local</code></i>.   Then you can carry on with all kinds of approaches, once you cleaned up the data."}, {"owner": {"reputation": 25, "user_id": 7736417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3341889021681379d9e914cd10f7b6b?s=128&d=identicon&r=PG&f=1", "display_name": "CGhost", "link": "https://stackoverflow.com/users/7736417/cghost"}, "edited": false, "score": 0, "creation_date": 1490136630, "post_id": 42892006, "comment_id": 72976160, "body": "Thanks for all of this. I didn&#39;t use your exact syntax, but all the options and information as well as the reference links you provided assisted me in getting the answer I was looking for. I localized the input record separators like you suggested, then printed my file to a new variable, split it at the period between blocks, and ran it through a series of foreach loops for &quot;Don&#39;t Know&quot; and &quot;Not Applicable.&quot; I feel like I have a much better understanding of file handling and text transformation now, after reading the answers from you and Borodin."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 25, "user_id": 7736417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3341889021681379d9e914cd10f7b6b?s=128&d=identicon&r=PG&f=1", "display_name": "CGhost", "link": "https://stackoverflow.com/users/7736417/cghost"}, "edited": false, "score": 0, "creation_date": 1490163641, "post_id": 42892006, "comment_id": 72984325, "body": "@CGhost Great! That is the main thing I hope for from answers (mine anyway), that it helps with your work in a rounded way and that you build your best solution. Thank you for saying that :)  Please let me know if more questions come up.  (Or, of course, post another question.)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1490203893, "last_edit_date": 1490203893, "creation_date": 1489956012, "answer_id": 42892006, "question_id": 42891721, "link": "https://stackoverflow.com/questions/42891721/perl-multi-line-regex-appending-based-on-capture-group/42892006#42892006", "title": "Perl - Multi-line Regex &amp; Appending Based on Capture Group", "body": "<p>On the face of it, you are asking for the <a href=\"http://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\">range operator</a>.</p>\n\n<pre><code>while (&lt;$fh&gt;)\n{   \n    if (/^\\s*VALUE LABELS/ .. /\\.$/) {\n        # a line between the two identified above (including them)\n        # process as below\n    }\n}\n</code></pre>\n\n<p>Your specification \"<em>to the period</em>\" is a little simple, but I trust that you know your data.</p>\n\n<p>However, since your files have been \"<em>cleaned up</em>\" so that they have only blocks of the shown format, you don't really need to identify the range. The rest of the code is fairly straightforward.</p>\n\n<p>Based on the data I take <code>7</code> or <code>9</code> to be <em>the last</em> in a group of numbers which is first on the line, followed by spaces and those phrases. Please clarify if this isn't correct.</p>\n\n<pre><code>my (%res, $label_name);    \nwhile (&lt;$fh&gt;) \n{\n    next if /^\\s*$/;\n\n    if (/^\\s*VALUE LABELS\\s*(.*)/) {\n        $label_name = $1;\n        next;\n    }\n\n    if (/^\\d*7\\s*'(Not Applicable)'/i or /^\\d*9\\s*'(Don't Know)'/i)  # '\n    {\n        # $1 has either \"Not Applicable\" or \"Don't Know\"\n        push @{$res{uc $1}}, $label_name;\n    } \n}\nprint \"$_: @{$res{$_}}\\n\" for keys %res;\n</code></pre>\n\n<p>This prints the desired output.  </p>\n\n<p>We reset the <code>$label_name</code> once that line is encountered. Empty lines are skipped as well. </p>\n\n<p>The data winds up in the hash <code>%res</code> with keys which are those two captured phrases. The value for each key is an anonymous array, and <code>$label_name</code> for that block is added each time a phrase is detected. This is done by <code>push</code>ing it to the dereferenced array for that key, <code>@{ $res{$1} }</code>. </p>\n\n<p>For references and complex data structures see tutorial <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a> and cookbook <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a>.</p>\n\n<p>The <a href=\"http://perldoc.perl.org/5.20.0/functions/uc.html\" rel=\"nofollow noreferrer\">uc</a> is used to change to upper case, per desired output format. This is a little wasteful since <code>uc</code> runs every single time. You can instead omit it and post-process the obtained hash. That does involve copying the hash into a new one, which may or may not be more efficient. Or, you can use <code>uc</code> only when printing out the results.</p>\n\n<p>In order to <em>append</em> content to a file <a href=\"https://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">open</a> it in the append mode, with <code>'&gt;&gt;'</code>. See below.</p>\n\n<hr>\n\n<p>What remains is to connect this with the processing you show, that cleans up the data. I don't know why you need to process the file as a string. There may well be good reasons for that, but I would <em>not</em> recommend it for what the question asks, after the data has been cleaned up. A regex on a multi-line text in place of the above simple processing is <em>much</em> harder and brittle to changes.</p>\n\n<p>One change in your code is necessary, with how record separators are used. Normally you want to <em><a href=\"http://perldoc.perl.org/functions/local.html\" rel=\"nofollow noreferrer\">local</a>ize</em> their changes, not set them in the <code>BEGIN</code>  block. Like so</p>\n\n<pre><code>my $file_content;\nCLEAN_UP_DATA: {\n    local $/;  # slurp the file ($/ is now undef)\n    open my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n    $file_content = &lt;$fh&gt;;    \n    # process file content, for example like with code in the question\n};\n\n# Here $/ is whatever it was before the block, likely the good old default\n</code></pre>\n\n<p>I named the block (<code>CLEAN_UP_DATA:</code>) just so, that isn't necessary.  The semicolon at the end <code>};</code> <em>is</em>. Note, once we unset <a href=\"http://perldoc.perl.org/perlvar.html#Variables-related-to-filehandles\" rel=\"nofollow noreferrer\"><code>$/</code></a> the whole file is read into a string at once. (Your <code>while (&lt;$infile&gt;)</code>\n has <em>one iteration</em>.  You can see this by printing <a href=\"http://perldoc.perl.org/perlvar.html#Variables-related-to-filehandles\" rel=\"nofollow noreferrer\"><code>$.</code></a> inside the loop.)</p>\n\n<p>Then you can continue. One way is to break the string with cleaned up content into lines</p>\n\n<pre><code>foreach my $line (split /\\n/, $file_content) {\n    # process line by line\n}\n</code></pre>\n\n<p>and use the code in this answer as it stands (or other line-by-line approaches).</p>\n\n<p>Another way is to simply write out the cleaned-up file and open that afresh. </p>\n\n<pre><code>CLEAN_UP_DATA: {\n    local $/;  # slurp the file ($/ is now undef)\n    open my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n    my $file_content = &lt;$fh&gt;;    \n    # process file content\n    my $fh_out, '&gt;', $outfile  or die \"Can't open $outfile: $!\";\n    # write it out\n}; \n\nopen my $fh, '&lt;', $outfile  or die \"Can't open $outfile: $!\";\n# Process line by line, obtaining %res\nclose $fh;\n\nopen my $fh_app, '&gt;&gt;', $outfile  or die \"Can't open $outfile to append: $!\";\n# Now append results as needed, for example\nprint $fh_app \"$_: @{$res{$_}}\\n\" for keys %res;\n</code></pre>\n\n<p>Here you can also use code in this answer as is, or other line-by-line solutions.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1489992528, "post_id": 42896511, "comment_id": 72894868, "body": "This won&#39;t work as a complete program since OP clearly doesn&#39;t have the shown data in a file."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490001991, "post_id": 42896511, "comment_id": 72899632, "body": "@zdim: I understood from the question that the data <i>is</i> in a file, as the OP say he wants to*&quot;parse some output files from one program (SPSS)&quot;* and their code uses <code>$ARGV[0]</code> as the input file name."}, {"owner": {"reputation": 25, "user_id": 7736417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3341889021681379d9e914cd10f7b6b?s=128&d=identicon&r=PG&f=1", "display_name": "CGhost", "link": "https://stackoverflow.com/users/7736417/cghost"}, "edited": false, "score": 0, "creation_date": 1490010165, "post_id": 42896511, "comment_id": 72904780, "body": "That&#39;s the formatting after those substitution regexes run. The period delimiter is actually added through multi-line regexes in the while loop, which is part of why it&#39;s been so difficult to grab these variable names with the specified Don&#39;t Know and Not Applicable values. I see comments to run the while loop with $/ kept as the default; I briefly tried to do that last night and it resulted in chaos with getting my formatting the way I wanted it. I&#39;ll take another stab this morning."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 25, "user_id": 7736417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3341889021681379d9e914cd10f7b6b?s=128&d=identicon&r=PG&f=1", "display_name": "CGhost", "link": "https://stackoverflow.com/users/7736417/cghost"}, "edited": false, "score": 0, "creation_date": 1490015565, "post_id": 42896511, "comment_id": 72908679, "body": "@CGhost: Then I think you should show your original data so that we can help with the whole process. How about opening a new question and explaining exactly what output you need, and whether it comes from a file or through a pipe?"}, {"owner": {"reputation": 25, "user_id": 7736417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3341889021681379d9e914cd10f7b6b?s=128&d=identicon&r=PG&f=1", "display_name": "CGhost", "link": "https://stackoverflow.com/users/7736417/cghost"}, "edited": false, "score": 0, "creation_date": 1490136701, "post_id": 42896511, "comment_id": 72976181, "body": "Thanks! I went with zdim&#39;s answer due to the level of detail provided and the way it was broken down, but comparing the similarities and minor differences between the two was very helpful. I&#39;ve up-voted both of you but my account is too new for them to display just yet."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1490001665, "last_edit_date": 1490001665, "creation_date": 1489988325, "answer_id": 42896511, "question_id": 42891721, "link": "https://stackoverflow.com/questions/42891721/perl-multi-line-regex-appending-based-on-capture-group/42896511#42896511", "title": "Perl - Multi-line Regex &amp; Appending Based on Capture Group", "body": "<p>If the full stops <code>.</code> are guaranteed to appear only at the end of each block then I would recommend using it as the input delimiter</p>\n\n<p>This program reads each block into <code>$_</code> and extracts the variable name after <code>VALUE LABELS</code>. Then the block is checked for <em>7 Not Applicable</em> and <em>9 Don't Know</em>, and the variable name is added to the list in <code>%info</code> for each phrase that was present</p>\n\n<p>The output is simply a matter of dumping the hash</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy ($file) = @ARGV;\n\nmy %info;\n\nopen my $fh, '&lt;', $file or die qq{Unable to open \"$file\" for input: $!};\n\nlocal $/ = \".\";    # Terminate each read at a full stop\n\nwhile ( &lt;$fh&gt; ) {\n\n    next unless my ($var) = /VALUE LABELS\\s+(\\S+)/;\n\n    for my $pattern ( qr/7\\s+'(Not Applicable)'/i, qr/9 '(Don't Know)'/i ) {\n        push @{ $info{uc $1} }, $var if /$pattern/;\n    }\n}\n\nwhile ( my ($label, $vars) = each %info ) {\n    printf \"%s: %s\\n\", $label, \"@$vars\";\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>DON'T KNOW: NOCALL Q1 Q2\nNOT APPLICABLE: NOCALL Q2\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7736417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3341889021681379d9e914cd10f7b6b?s=128&d=identicon&r=PG&f=1", "display_name": "CGhost", "link": "https://stackoverflow.com/users/7736417/cghost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 0, "accepted_answer_id": 42892006, "answer_count": 3, "score": 2, "last_activity_date": 1490203893, "creation_date": 1489954534, "last_edit_date": 1490015931, "question_id": 42891721, "link": "https://stackoverflow.com/questions/42891721/perl-multi-line-regex-appending-based-on-capture-group", "title": "Perl - Multi-line Regex &amp; Appending Based on Capture Group", "body": "<p></p>\n\n<p>I'm brand new to Perl, and trying to build a script to parse some output files from <em>IBM SPSS Statistics</em> (SPSS) to automatically generate syntax for some standard procedures (in this example, re-coding and designating missing values). </p>\n\n<p>At this point, I've removed a number of extraneous lines and have my files pretty cleaned up and reformatted via some substitution regexes (where I turned the input record separator off to do my multi-line substitutions). The text I'm working with looks like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>VALUE LABELS ROAD   \n0 'No'   \n1 'Yes'.\n\nVALUE LABELS NOCALL   \n1 'Refused to be interviewed'   \n2 'Not at home'   \n3 'No one on Premises'   \n8 'Other'   \n9997 'Not Applicable'   \n9999 'Don't Know'.\n\nVALUE LABELS Q1   \n999 'Don't know'.     \n\nVALUE LABELS Q2   \n1 'Strongly dislike'   \n2 'Somewhat dislike'   \n3 'Would not care'   \n4 'Somewhat like'   \n5 'Strongly like'   \n7 'Not Applicable'   \n9 'Don't know'.  \n</code></pre>\n\n<p>I want to add regexes to my script that will go through each block between \"VALUE LABELS\" and the \".\" at the end and look for either a 7 followed by \"Not Applicable\" or a 9 followed by \"Don't Know\", capturing the variable name that comes immediately after \"VALUE LABELS\" and appending it to the end of my output so that I know which variables have a \"Not Applicable\" value and which have a \"Don't Know\" value. So in this example, my output would be the original file with these additional lines at the end:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>NOT APPLICABLE: NOCALL Q2  \nDON'T KNOW: NOCALL Q1 Q2\n</code></pre>\n\n<p>At the moment, I can't for the life of me figure out how to get my regex to read only within each block from \"VALUE LABELS\" to the period. Instead, it will either grab from the first \"VALUE LABELS\" to the last instance of \"7 Not Applicable\" across blocks, or from the first \"VALUE LABELS\" to the first instance of \"7 Not Applicable\", whether or not the NA value is in the same block.</p>\n\n<p>My current Perl code is as follows:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/bin/perl\n\nuse strict;\nuse warnings;\n\nBEGIN {    # Input and Output Record Separators Off\n    $\\ = undef;\n    $/ = undef;\n}\n\nopen( my $infile, \"&lt;\", $ARGV[0]);\n\nmy $outfile = \"t2\" . $ARGV[0];\nopen( my $write, \"&gt;\", $outfile);\n\nLINE: while ( &lt;$infile&gt; ) {\n\n    # These are the regexes currently cleaning and reformatting the input\n\n    s/\\f/\\n/g;\n    s/(\\d+\\s.*)(\\n\\n)/$1\\.$2/g;\n    s/(\\R\\R).*\\R\\R/$1/g;\n    s/(\\R\\R).*\\R\\R/$1/g;\n    s/(\\R\\R)(.*\\R)/$1VALUE LABELS $2/g;\n}\ncontinue {\n    die \"-p destination: $!\\n\" unless print $write \"$_\";\n# Here is the regex I'm having an issue with\n    if ( $infile =~ m/VALUE LABELS(.*)\\n(?s).*\\d+7 \\x27Not Applicable\\x27.*?\\./g) {\n    print $write \"\\n\\nNOT APPLICABLE: $1\";\n    ]\n}\n</code></pre>\n\n<p>Is there a way I can have this return what I'm looking for? Is there maybe a better way to write this entire script that would let me change the line separators part way through?</p>\n"}, {"tags": ["perl", "drop-down-menu", "cgi"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489957167, "post_id": 42891674, "comment_id": 72885580, "body": "Those are not called labels. They are the text nodes inside the <code>&lt;option&gt;</code> elements."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489957369, "post_id": 42891674, "comment_id": 72885651, "body": "Related: <a href=\"http://stackoverflow.com/q/5307958\">Get both name and value from option using Perl CGI param</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489957542, "post_id": 42891674, "comment_id": 72885708, "body": "@ThisSuitIsBlackNot it&#39;s nice that I get to the same conclusion as the answer six years ago. Should we close as a duplicate? I&#39;m not sure because I give an alternative approach that the old answer didn&#39;t have."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1489957565, "post_id": 42891674, "comment_id": 72885710, "body": "Why not just change the value in the form to &quot;Apple&quot;, &quot;Banana&quot;, etc?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489957950, "post_id": 42891674, "comment_id": 72885849, "body": "@simbabque I actually dup-hammered and immediately reopened because the other question asks about getting the <code>name</code> attribute instead of the text node. They&#39;re almost the same, but I don&#39;t think they&#39;re quite dups because of that one little difference."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1490004199, "post_id": 42892180, "comment_id": 72901050, "body": "Or I&#39;d suggest - if the relevant information is the fruit name, there&#39;s not really any need for the numeric value in the first place."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1489957100, "creation_date": 1489957100, "answer_id": 42892180, "question_id": 42891674, "link": "https://stackoverflow.com/questions/42891674/obtaining-the-text-not-the-value-from-a-select-element-with-perl-cgi/42892180#42892180", "title": "Obtaining the text, not the value, from a select element with Perl CGI?", "body": "<p>That's not possible. That information is not transmitted. The browser only puts  <code>fruit=1</code> into the HTTP request it creates. There is no way for your Perl program to have this information. It's simply not there.</p>\n\n<p>Typically the Perl program would control what value means what in a situation like that. You would have a matching set up in your program that knows that <code>1</code> is <em>Apple</em> and <code>2</code> is <em>Banana</em>. </p>\n\n<p>You have to change the <code>value</code> attributes. Maybe to something like <code>1|Banana</code>, to retain the <code>1</code> in case it is needed somewhere else. The pipe <code>|</code> in that case is arbitrary and I just picked it because your data does not seem to contain such a character.</p>\n\n<p>If you cannot control the page, you could also make your Perl program fetch the same page that contains the form and parse it, to look up what the <code>1</code> means. That sounds very inefficient though. Look into <a href=\"https://metacpan.org/pod/HTML::TreeBuilder\" rel=\"nofollow noreferrer\">HTML::TreeBuilder</a> for a standard way of parsing HTML.</p>\n"}], "owner": {"reputation": 313, "user_id": 695244, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4fb00da175104fe8f6ad0c1cb73b5293?s=128&d=identicon&r=PG", "display_name": "DanB", "link": "https://stackoverflow.com/users/695244/danb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 42892180, "answer_count": 1, "score": 1, "last_activity_date": 1489957346, "creation_date": 1489954278, "last_edit_date": 1489957136, "question_id": 42891674, "link": "https://stackoverflow.com/questions/42891674/obtaining-the-text-not-the-value-from-a-select-element-with-perl-cgi", "title": "Obtaining the text, not the value, from a select element with Perl CGI?", "body": "<p>Given an HTML form:</p>\n\n<pre><code>&lt;select name=\"fruit\"&gt;\n&lt;option value=\"1\"&gt;Apple&lt;/option&gt;\n&lt;option value=\"2\"&gt;Banana&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>Suppose the user chooses the second option and submits the form. In a Perl CGI application, I can get the chosen value, <code>2</code>, by calling <code>param('fruit')</code>. How do I get the chosen label, <code>Banana</code>?</p>\n\n<p>I've been searching the web for an hour and can't find the answer.</p>\n"}, {"tags": ["perl", "selenium"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489945295, "post_id": 42889745, "comment_id": 72881433, "body": "<i>&quot;The Perl script and the Selenium WebDriver should run on different machines (client and server, respectively)&quot;</i> The Perl program and the Selenium process are not client and server. The web site is the server; Selenium WebDriver  is an HTTP client; and the Perl program simply controls its behaviour. Running Selenium on a different system from your Perl application makes the whole thing unnecessarily difficult."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1489945985, "post_id": 42889745, "comment_id": 72881683, "body": "Is the system behind a NAT device? You&#39;ll need to configure port-forwarding on the gateway device if so."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1489951309, "post_id": 42889745, "comment_id": 72883500, "body": "Maybe iptables doesn&#39;t play well with tcp6?"}, {"owner": {"reputation": 11, "user_id": 7643757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0b956fa7308a86ce38c2c5913fd3045?s=128&d=identicon&r=PG&f=1", "display_name": "Bloehdian", "link": "https://stackoverflow.com/users/7643757/bloehdian"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489952245, "post_id": 42889745, "comment_id": 72883852, "body": "@Borodin: &quot;Running Selenium on a different system from your Perl application makes the whole thing unnecessarily difficult.&quot; - This is something which evolves inevitably from the clients requirements and his system&#39;s restrictions. If I could run both systems on the same machine I would do it. ;-)"}, {"owner": {"reputation": 11, "user_id": 7643757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0b956fa7308a86ce38c2c5913fd3045?s=128&d=identicon&r=PG&f=1", "display_name": "Bloehdian", "link": "https://stackoverflow.com/users/7643757/bloehdian"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1489952409, "post_id": 42889745, "comment_id": 72883912, "body": "@stevieb: the machine hosting the Webdriver is a VPS, I do not know much about the network configuration the provider set up. Is there a way to find this out technically without having to consult the hotline, which is often time consuming with this vendor?"}, {"owner": {"reputation": 11, "user_id": 7643757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0b956fa7308a86ce38c2c5913fd3045?s=128&d=identicon&r=PG&f=1", "display_name": "Bloehdian", "link": "https://stackoverflow.com/users/7643757/bloehdian"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1489952605, "post_id": 42889745, "comment_id": 72883983, "body": "@ysth: Is this a question or a suggestion? ;-) I am not an expert in firewalls/networks. Maybe You can explain this in more depth. And: if You can pinpoint the problem, please make a suggestion how to solve it. THX."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1489958593, "post_id": 42889745, "comment_id": 72886074, "body": "@ysth Good catch on the v6 there, I completely overlooked that. OP, on the server you&#39;re trying to connect to, can you please update your question with the output of <code>ipconfig</code> (for any IPv4 or IPv6 addresses, replace the last half of them with <code>xxx</code> as to masquerade your real address)."}], "owner": {"reputation": 11, "user_id": 7643757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0b956fa7308a86ce38c2c5913fd3045?s=128&d=identicon&r=PG&f=1", "display_name": "Bloehdian", "link": "https://stackoverflow.com/users/7643757/bloehdian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 265, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1489963726, "creation_date": 1489944532, "last_edit_date": 1495541416, "question_id": 42889745, "link": "https://stackoverflow.com/questions/42889745/making-selenium-webdriver-accessible-from-the-internet", "title": "Making selenium webdriver accessible from the internet", "body": "\n\n<p>I want to run a Perl script which deploys <a href=\"https://metacpan.org/pod/Selenium::Remote::Driver\" rel=\"nofollow noreferrer\"><code>Selenium::Remote::Driver</code></a> to fetch data from a web site relying heavily on JavaScript. The Perl script and the Selenium WebDriver should run on different machines (client and server, respectively).</p>\n\n<p>I fired up Selenium WebDriver on the server using</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/usr/bin/xvfb-run -e /dev/stdout java -Dwebdriver.gecko.driver=/opt/gecko/geckodriver -jar /opt/selenium/selenium.jar\n</code></pre>\n\n<p>Xvfb has already been started.</p>\n\n<p>The WebDriver reports being properly started and appears in the process list</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>root      6830  6800  7 18:17 pts/0    00:00:01 java -Dwebdriver.gecko.driver=/opt/gecko/geckodriver -jar /opt/selenium/selenium.jar\n</code></pre>\n\n<p>The process is listening at port 4444</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>netstat -tulpn | grep 6830\ntcp6       0      0 :::4444                 :::*                    LISTEN      6830/java\n</code></pre>\n\n<p>I then tried to configure the firewall to accept connects from the client machine according to <a href=\"https://stackoverflow.com/questions/10607806/bind-selenium-to-a-specific-ip-possible\">this thread</a></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>iptables -A INPUT -p tcp --dport 4444 -s &lt;client-ip&gt; -j ACCEPT\niptables -A INPUT -p tcp --dport 4444 -j DROP\n</code></pre>\n\n<p>The Perl script</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use Selenium::Remote::Driver;;\n\n$sel = Selenium::Remote::Driver-&gt;new;\n$sel-&gt;get(\"http://example.com\");\nprint $sel-&gt;get_page_source();\n$sel-&gt;quit;\n</code></pre>\n\n<p>This works properly when run locally on the server, and returns the desired data.</p>\n\n<p>But when run on the client machine, with a modified constructor</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$sel = Selenium::Remote::Driver-&gt;new( remote_server_addr =&gt; '&lt;server-ip&gt;');\n</code></pre>\n\n<p>it refuses to work</p>\n\n<blockquote>\n  <p>Selenium server did not return proper status at /Selenium/Remote/Driver.pm line 401.</p>\n</blockquote>\n\n<p>Issuing a telnet command on the client to check the server's WebDriver port</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>telnet &lt;server-ip&gt; 4444\nTrying &lt;server-ip&gt;...\n</code></pre>\n\n<p>Indicates that the port is not open.</p>\n\n<p>What am I missing out?</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ifconfig\nlo        Link encap:Local Loopback\n          inet addr:127.0.0.1  Mask:255.0.0.0\n          inet6 addr: ::1/128 Scope:Host\n          UP LOOPBACK RUNNING  MTU:65536  Metric:1\n          RX packets:5015907 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:5015907 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:1434694690 (1.3 GiB)  TX bytes:1434694690 (1.3 GiB)\n\nvenet0    Link encap:UNSPEC  HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00\n          inet addr:127.0.0.1  P-t-P:127.0.0.1  Bcast:0.0.0.0  Mask:255.255.255.255\n          inet6 addr: ::2/128 Scope:Compat\n          UP BROADCAST POINTOPOINT RUNNING NOARP  MTU:1500  Metric:1\n          RX packets:17549498 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:18398702 errors:0 dropped:111 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:11881977702 (11.0 GiB)  TX bytes:4577577462 (4.2 GiB)\n\nvenet0:0  Link encap:UNSPEC  HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00\n          inet addr:178.254.xxx.xxx  P-t-P:178.254.xxx.xxx  Bcast:178.254.xxx.xxx  Mask:255.255.255.255\n          UP BROADCAST POINTOPOINT RUNNING NOARP  MTU:1500  Metric:1\n\nvenet0:1  Link encap:UNSPEC  HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00\n          inet addr:178.254.xxx.xxx  P-t-P:178.254.xxx.xxx  Bcast:178.254.xxx.xxx  Mask:255.255.255.255\n          UP BROADCAST POINTOPOINT RUNNING NOARP  MTU:1500  Metric:1\n</code></pre>\n"}, {"tags": ["perl", "proxy"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1489944019, "post_id": 42889292, "comment_id": 72880946, "body": "Where is your list of proxies coming from? Is it local? If so, you should be able to simply loop your code over the proxy list."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1489944134, "post_id": 42889292, "comment_id": 72880988, "body": "Also, I inherited <a href=\"https://metacpan.org/pod/WWW::FreeProxyListsCom\" rel=\"nofollow noreferrer\">WWW::FreeProxyListsCom</a> a while back, that will fetch proxies from <a href=\"http://freeproxylists.com\" rel=\"nofollow noreferrer\">freeproxylists.com</a> for you automatically."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1489944427, "post_id": 42889292, "comment_id": 72881115, "body": "To further, you can use <a href=\"https://metacpan.org/release/WWW-ProxyChecker\" rel=\"nofollow noreferrer\">WWW::ProxyChecker</a> to validate the proxies are alive."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1489944559, "post_id": 42889292, "comment_id": 72881171, "body": "Your code doesn&#39;t compile, so we can&#39;t really help you to add to it. You <i>must always</i> <code>use strict</code> and <code>use warnings &#39;all&#39;</code> at the top of <i>every</i> Perl program you write. What is <i>proxified</i>, and what does <i>&quot;it didn&#39;t work&quot;</i> mean when you tried to use it? What is <i>grey list</i>?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490024386, "post_id": 42889292, "comment_id": 72915159, "body": "Are you trying to write some kind of web crawler? Do you need the proxies because the pages you are crawling are blocking you?"}, {"owner": {"reputation": 7, "user_id": 7675211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfc33932639ae139e87797c50891cd42?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Abbadelli Garc&#237;a", "link": "https://stackoverflow.com/users/7675211/daniel-abbadelli-garc%c3%ada"}, "edited": false, "score": 0, "creation_date": 1490028576, "post_id": 42889292, "comment_id": 72918045, "body": "Yes I&#39;m trying to write a kind of crawler, CMS indetifier. I need proxies because some &#39;security services&#39; report and block my IP."}, {"owner": {"reputation": 170, "user_id": 6471375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YqAjU.jpg?s=128&g=1", "display_name": "cmeadows", "link": "https://stackoverflow.com/users/6471375/cmeadows"}, "edited": false, "score": 0, "creation_date": 1490976636, "post_id": 42889292, "comment_id": 73367649, "body": "@DanielAbbadelliGarc&#237;a have you considered using Proxicity.io APIs for this? (<a href=\"https://www.proxicity.io\" rel=\"nofollow noreferrer\">proxicity.io</a>). They check and verify public proxies and serve them for use in an API. You can use it for free or there are paid options as well! They also have a User Agent API if you are interested in that."}], "owner": {"reputation": 7, "user_id": 7675211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfc33932639ae139e87797c50891cd42?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Abbadelli Garc&#237;a", "link": "https://stackoverflow.com/users/7675211/daniel-abbadelli-garc%c3%ada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 447, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489958960, "creation_date": 1489942202, "last_edit_date": 1489958960, "question_id": 42889292, "link": "https://stackoverflow.com/questions/42889292/use-proxy-list-with-perl-script", "title": "Use proxy list with perl script", "body": "<p>I'm currently working with a single proxy, but I would like to improve my script by adding a proxy list. How can I do that?</p>\n\n<pre><code>#!/usr/bin/perl\nuse HTTP::Request;\nuse LWP::UserAgent;\nuse IO::Select;\nuse HTTP::Response;\nuse Term::ANSIColor;\nuse HTTP::Request::Common qw(POST);\nuse HTTP::Request::Common qw(GET);\nuse URI::URL;\nuse IO::Socket::INET;\nuse strict\nuse warnings\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;proxy( 'http', 'http://127.0.0.1:8088' );    # Single Proxy\n$tmp=\"tmp\";\n    if (-e $tmp) \n    {\n    }\n    else\n    {\n        mkdir $tmp or die \"Error creating directory: $tmp\";\n    }\n$logo=\"             \n\";\n\nprint $logo;\nprint \"\\t\";\nprint colored(\"[ CMS DETECTOR ]\",'white on_blue'),\"\\n\\n\\n\";\nprint colored (\"Start At $datetime\",'white on_red'),\"\\n\\n\";\n\nopen(tarrget,\"&lt;$ARGV[0]\") or die \"I need a list \\n\";\nwhile(&lt;tarrget&gt;){\nchomp($_);\n$site = $_;\nif($site !~ /http:\\/\\//) { $site = \"http://$site/\"; };\nefrez();\n}\nsub efrez($site){\n$ua-&gt;default_header( \"Connection\" =&gt; \"keep-alive\" );\n$ua-&gt;agent(\"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.63 Safari/537.31\");\n$ua-&gt;timeout (10);\n\nmy $efreez = $ua-&gt;get(\"$site\")-&gt;content;\nif($efreez =~/wp-content\\/themes\\/|wp-content\\/plugins\\/|wordpress/) {\n    print colored(\"[WORDPRESS] $site\",'white on_magenta'),\"\\n\\n\\n\";\nopen(save, '&gt;&gt;tmp/wordpress.txt');\n    print save \"$site\\n\";\n    close(save);\n}\nelsif($efreez =~/&lt;script type=\\\"text\\/javascript\\\" src=\\\"\\/media\\/system\\/js\\/mootools.js\\\"&gt;&lt;\\/script&gt;|Joomla!|Joomla|joomla/) {\n    print colored(\"[JOOMLA] $site\",'white on_magenta'),\"\\n\\n\\n\";\nopen(save, '&gt;&gt;tmp/joomla.txt');\n    print save \"$site\\n\";   \n    close(save);\n    }\n\nelsif($efreez =~/\\/modules\\/system\\/system.menus.css|\\/sites\\/default\\/files\\/|&lt;meta name=\\\"Generator\\\" content=\\\"Drupal 7/) {\n    print colored(\"[DRUPAL] $site\",'white on_magenta'),\"\\n\\n\\n\";\n\nopen(save, '&gt;&gt;tmp/Drupal.txt'); \n    print save \"$site\\n\";   \n    close(save);\n    }else{\n    print \"\\n[UNKNOWN] $site\\n\";\n}\n}\n</code></pre>\n\n<p>I tried use <strong><em>proxified</em></strong> but it didn't work.</p>\n\n<p>I need to use 250 to 300 different proxies (the script should change proxy every 30 minutes). I also need some special filter for enabling and disabling proxies in the list; something like <strong><em>grey list</em></strong> etc.</p>\n\n<p>Is there any mechanism to implement these things?</p>\n"}, {"tags": ["perl", "file-handling"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1489938704, "post_id": 42888145, "comment_id": 72879180, "body": "You cannot &quot;delete a line in the middle of a file&quot;.  You can copy the data to a  new file and during the copy operation omit lines meeting your criteria.  To replace the original file, at the end of the copy operation delete the original and rename the copy. I believe Perl has an option to do this automatically."}], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1489937510, "post_id": 42888200, "comment_id": 72878751, "body": "You can also add an (optional) extension to the <code>-i</code> switch, like <code>perl -i.bak -ne ...</code>. Then the original (unchanged) file is kept with a <code>.bak</code> extension (in case you messed up your regex)."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489944052, "post_id": 42888200, "comment_id": 72880963, "body": "@Borodin Whups, which part? The whole inplace editing mechanism?"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489997642, "post_id": 42888200, "comment_id": 72897275, "body": "@Borodin, ThisSuitIsBlackNot Thank you both, I&#39;ve updated my answer."}], "tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": true, "score": 6, "last_activity_date": 1489997572, "last_edit_date": 1495541838, "creation_date": 1489936225, "answer_id": 42888200, "question_id": 42888145, "link": "https://stackoverflow.com/questions/42888145/edit-file-contents-in-perl/42888200#42888200", "title": "edit file contents in perl", "body": "<p>You can modify a file <em>in place</em> by using <code>-i</code> flag.  </p>\n\n<p>In your case, a simple one liner would do:</p>\n\n<pre><code>perl -i -ne 'print unless /myregex/' the_name_of_your_file\n</code></pre>\n\n<p>As mentioned by PerlDuck, if you wish to keep a copy the original file, it's possible: add an extension after the <code>-i</code> flag, like <code>-i.bak</code> or <code>-i~</code>, and then original file will be kept with this extension after its name.</p>\n\n<p>You can find more information about inplace file modification on <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perlrun</a>.</p>\n\n<p><strong>Note that if you are using Windows</strong> (MS-DOS), you will need to specify an extension for the backup file, that you are free to delete afterward. See this <a href=\"https://stackoverflow.com/questions/2616865/why-do-i-have-to-specify-the-i-switch-with-a-backup-extension-when-using-active\">link</a>.</p>\n\n<p>You can obtain the same behavior in a script by setting <code>$^I</code> to a value different than <code>undef</code>. For instance:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings 'all';\n\n{\n    local @ARGV = ( $original_file_path );\n    local $^I = ''; # or set it to something else if you want to keep a backup\n    while (&lt;&gt;) {\n        print unless /myregex/\n    }\n}\n</code></pre>\n\n<p>I've used <code>local @ARGV</code> so if you already had something in <code>@ARGV</code>, it won't cause any troubles. If <code>@ARGV</code> was empty, then <code>push @ARGV, $original_file_path</code> would be fine too.</p>\n\n<hr>\n\n<p>However, if you have more stuff to do in your script, you might prefer a full script over a one-liner. In that case, you should read your input file, and print the lines you want to keep to another file, then <code>move</code> the second file to the first.</p>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 4, "last_activity_date": 1489937576, "creation_date": 1489937576, "answer_id": 42888459, "question_id": 42888145, "link": "https://stackoverflow.com/questions/42888145/edit-file-contents-in-perl/42888459#42888459", "title": "edit file contents in perl", "body": "<p>There are some modules that can make your life easier. E.g. here's a solution using <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a>:</p>\n\n<pre><code>use Path::Tiny;\n\npath($original_file_path)-&gt;edit_lines_utf8(sub {\n    if (/myregex/) {\n        $_ = '';\n    }\n});\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 7522582, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ogQgj.png?s=128&g=1", "display_name": "yankel", "link": "https://stackoverflow.com/users/7522582/yankel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 42888200, "answer_count": 2, "score": 1, "last_activity_date": 1489997572, "creation_date": 1489935943, "question_id": 42888145, "link": "https://stackoverflow.com/questions/42888145/edit-file-contents-in-perl", "title": "edit file contents in perl", "body": "<p>I would like to read an input file and then delete a line if it matches my regex. and have the file saved without that line.</p>\n\n<p>I have written</p>\n\n<pre><code>open(my $fh, '&lt;:encoding(UTF-8)', $original_file_path or die \"Could not open file $original_file_path $!\";\n\nwhile (my $line = &lt;$fh&gt; ) {\n    chomp $line;\n    if ($line ~=/myregex/){\n        delete line from file\n    }\n}\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 6, "creation_date": 1489931793, "post_id": 42887257, "comment_id": 72876802, "body": "Obligatory link: <a href=\"http://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\">Why is XML::Simple &quot;Discouraged&quot;?</a>"}, {"owner": {"reputation": 31, "user_id": 7571955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e20b7a0ed78a19e22b1f91259d100c?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7571955/adrian"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489933264, "post_id": 42887257, "comment_id": 72877332, "body": "@ThisSuitIsBlackNot I understand their points, but I&#39;d still like to keep it <code>Simple</code>. I have used it a lot in a very large area and it didn&#39;t dissapoint me so far."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1489936077, "post_id": 42887257, "comment_id": 72878262, "body": "It is not simple when even the author himself is <a href=\"https://metacpan.org/pod/XML::Simple#STATUS-OF-THIS-MODULE\" rel=\"nofollow noreferrer\">recommending</a> not to use it. Who knows, you may be running into one of the unknown side-effects they speak of."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1489943782, "post_id": 42887257, "comment_id": 72880861, "body": "@Adrian: If you <i>&quot;know what CDATA stands for and why it&#39;s used&quot;</i> then you will know that the plain and CDATA representation of the string are equivalent. No application that handles XML properly will care which is used. <code>XML::Simple</code> is <i>na&#239;ve</i> rather than being simple to use, and you are strongly recommended to avoid it. <i>&quot;it didn&#39;t dissapoint me so far&quot;</i> Perhaps it just did?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1489947440, "post_id": 42887257, "comment_id": 72882161, "body": "See <a href=\"http://www.perlmonks.org/?node_id=701522\" rel=\"nofollow noreferrer\">Preserving CDATA Tags When Saving XML</a> on PerlMonks."}, {"owner": {"reputation": 1953, "user_id": 4169014, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ce596fceb9b79c24c1c983985c7d6b0f?s=128&d=identicon&r=PG&f=1", "display_name": "Shaishav Jogani", "link": "https://stackoverflow.com/users/4169014/shaishav-jogani"}, "edited": false, "score": 1, "creation_date": 1489948997, "post_id": 42887257, "comment_id": 72882676, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\">Why is XML::Simple &quot;Discouraged&quot;?</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1490024869, "post_id": 42887257, "comment_id": 72915527, "body": "Re &quot;<i>but I&#39;d still like to keep it <code>Simple</code></i>&quot;, It&#39;s the most complex parser to use. It&#39;s particularly awful at outputting XML. That said, the two XML documents you posted are 100% equivalent."}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1490141544, "post_id": 42887257, "comment_id": 72977690, "body": "As the author of XML::Simple you might think I&#39;m here to defend the module - I&#39;m not. Also, I can confirm it cannot do what you&#39;re asking with respect to CDATA sections. I personally use XML::LibXML and find it both simpler and more consistent. I have written a <a href=\"http://grantm.github.io/perl-libxml-by-example/\" rel=\"nofollow noreferrer\">tutorial on XML::LibXML</a> to supplement the reference documentation."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1490007335, "last_edit_date": 1495541415, "creation_date": 1490007335, "answer_id": 42901780, "question_id": 42887257, "link": "https://stackoverflow.com/questions/42887257/xmlin-removes-the-cdata/42901780#42901780", "title": "XMLin removes the CDATA", "body": "<p>Look, I know you say in the comments, you want to keep it simple, by using <code>XML::Simple</code>. But that's a misnomer. <code>XML::Simple</code> isn't - it's actually quite complicated. It's <em>for</em> \"simple\" XML. </p>\n\n<p>And it's <a href=\"https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\">\"discouraged\"</a> (and even the <a href=\"https://metacpan.org/pod/XML::Simple#STATUS-OF-THIS-MODULE\" rel=\"nofollow noreferrer\">module info</a> says that) and you have a read through, you'll see why. </p>\n\n<p>But some truly excellent alternatives exist. I'd suggest taking a look at <em>either</em> <a href=\"http://search.cpan.org/~mirod/XML-Twig-3.49/Twig.pm\" rel=\"nofollow noreferrer\"><code>XML::Twig</code></a> - which has a lower learning curve - or <a href=\"http://search.cpan.org/dist/XML-LibXML/LibXML.pod\" rel=\"nofollow noreferrer\"><code>XML::LibXML</code></a> which is more fully featured. If you give us some example XML, and what you've tried so far - we can give you an example that'll do what you want. It'll likely be <em>simpler</em> than what you've done so far, too. </p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1490044250, "last_edit_date": 1495540831, "creation_date": 1490042825, "answer_id": 42913649, "question_id": 42887257, "link": "https://stackoverflow.com/questions/42887257/xmlin-removes-the-cdata/42913649#42913649", "title": "XMLin removes the CDATA", "body": "<p>The fact that the text was provided via a CDATA section is lost during parsing. Furthermore, there XML::Simple never produces CDATA sections.</p>\n\n<p>Note that the two XML documents you presented are 100% equivalent. But if you absolutely want to preserve the CDATA sections, I recommend switching to <a href=\"http://search.cpan.org/perldoc?XML::LibXML::Parser\" rel=\"nofollow noreferrer\">XML::LibXML</a><sup>[1]</sup>.</p>\n\n<pre><code>$ perl -MXML::LibXML -e'\n   my $xml = \"&lt;name&gt;&lt;![CDATA[some text here]]&gt;&lt;/name&gt;\";\n   XML::LibXML-&gt;new-&gt;parse_string($xml)-&gt;toFH(\\*STDOUT);\n'\n&lt;?xml version=\"1.0\"?&gt;\n&lt;name&gt;&lt;![CDATA[some text here]]&gt;&lt;/name&gt;\n</code></pre>\n\n<p>The conversion should be relatively simple since both XML::Simple and XML::LibXML provide functionally similar interfaces. For example,</p>\n\n<ul>\n<li><code>my $val = $node-&gt;{attr};</code> &rArr; <code>my $val = $node-&gt;getAttribute('attr')</code></li>\n<li><code>$node-&gt;{attr} = $val;</code> &rArr; <code>$node-&gt;setAttribute('attr', $val)</code></li>\n<li><code>for (@$node)</code> &rArr; <code>for ($node-&gt;getChildren())</code></li>\n</ul>\n\n<hr>\n\n<ol>\n<li>I recommend switching no matter what. It'll make your life so much <a href=\"https://stackoverflow.com/a/33273488/589924\">simpler</a>!</li>\n</ol>\n"}], "owner": {"reputation": 31, "user_id": 7571955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e20b7a0ed78a19e22b1f91259d100c?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7571955/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 42913649, "answer_count": 2, "score": 0, "last_activity_date": 1490044250, "creation_date": 1489930775, "last_edit_date": 1490025124, "question_id": 42887257, "link": "https://stackoverflow.com/questions/42887257/xmlin-removes-the-cdata", "title": "XMLin removes the CDATA", "body": "<p>I am reading an XML file with XML::Simple ( XMLin), doing some substitute operations in some of it's attributes and then XMLOut it in another file. What I noticed is that some of the attributes contained <code>CDATA</code> before and after XMLOut they don't anymore.</p>\n\n<p>Input example:\n<code>&lt;name&gt;&lt;![CDATA[some text here]]&gt;&lt;/name&gt;</code></p>\n\n<p>Output : <code>&lt;name&gt;some text here&lt;/name&gt;</code></p>\n\n<p>Is there an option to keep the CDATA attr? ( I know what CDATA stands for and why it's used)</p>\n"}, {"tags": ["perl", "multiple-inheritance"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1489918592, "post_id": 42885207, "comment_id": 72872752, "body": "<code>$class-&gt;SUPER::new(@_)</code> will only pick one of the items in<code>@ISA</code>, since else it would need to return an array of object references( one reference for <code>A-&gt;new()</code> and one reference for <code>B-&gt;new()</code>)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1489919426, "post_id": 42885207, "comment_id": 72872997, "body": "See also <i>&quot;Method Resolution Order&quot;</i> in <a href=\"https://perldoc.perl.org/perlobj.html\" rel=\"nofollow noreferrer\"><code>perlobj</code></a> and <a href=\"https://metacpan.org/pod/mro\" rel=\"nofollow noreferrer\"><code>mro</code></a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1489919905, "post_id": 42885207, "comment_id": 72873156, "body": "You could force it to call the <code>B</code> class constructor with  <code>my $selfB = do {        local @ISA = (&quot;B&quot;);  $class-&gt;SUPER::new(@_)   };</code> but I don&#39;t know if that is a good idea"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5609010, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qrWMYNT_zCU/AAAAAAAAAAI/AAAAAAAAACE/WsQ7hOE1FpQ/photo.jpg?sz=128", "display_name": "Omer Levy", "link": "https://stackoverflow.com/users/5609010/omer-levy"}, "edited": false, "score": 0, "creation_date": 1489923577, "post_id": 42885906, "comment_id": 72874232, "body": "Thanks, the B issue is solved - now it is D. However, even though i changed it to use parent, it still doesn&#39;t make D contractor when i run <code>my $self = $class-&gt;SUPER::new(@_);</code>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 51, "user_id": 5609010, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qrWMYNT_zCU/AAAAAAAAAAI/AAAAAAAAACE/WsQ7hOE1FpQ/photo.jpg?sz=128", "display_name": "Omer Levy", "link": "https://stackoverflow.com/users/5609010/omer-levy"}, "edited": false, "score": 1, "creation_date": 1489923899, "post_id": 42885906, "comment_id": 72874307, "body": "@OmerLevy See my edit. Only one <code>new</code> method will be called. If you want to call both, you should move the initialization into separate subs as described <a href=\"http://www.perlmonks.org/?node=188985\" rel=\"nofollow noreferrer\">here</a>."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 7, "last_activity_date": 1489925685, "last_edit_date": 1592644375, "creation_date": 1489922097, "answer_id": 42885906, "question_id": 42885207, "link": "https://stackoverflow.com/questions/42885207/why-doesnt-class-supernew-call-the-constructors-of-all-parent-classes-when/42885906#42885906", "title": "Why doesn&#39;t $class-&gt;SUPER::new call the constructors of all parent classes when using multiple inheritance?", "body": "<p><code>$class-&gt;SUPER::new</code> always calls <code>A::new</code> because A comes before B in <code>@ISA</code>. See <a href=\"https://perldoc.perl.org/perlobj.html#Method-Resolution-Order\" rel=\"noreferrer\">method resolution order</a> in perlobj:</p>\n<blockquote>\n<p>When a class has multiple parents, the method lookup order becomes more complicated.</p>\n<p>By default, Perl does a depth-first left-to-right search for a method. That means it starts with the first parent in the <code>@ISA</code> array, and then searches all of its parents, grandparents, etc. If it fails to find the method, it then goes to the next parent in the original class's <code>@ISA</code> array and searches from there.</p>\n</blockquote>\n<p>This means that <code>$class-&gt;SUPER::new</code> will only call one of the parent constructors. If you have initialization logic in both parent classes that needs to be run from the child, move it into separate methods as described in <a href=\"https://stackoverflow.com/a/5251334\">this post</a>.</p>\n<hr />\n<p>When you explicitly call <code>B::new</code> with <code>$class-&gt;B::new</code>, you get</p>\n<blockquote>\n<p>Can't locate object method &quot;new&quot; via package &quot;B&quot; at C.pm</p>\n</blockquote>\n<p>because <code>use B</code> is loading the <a href=\"http://perldoc.perl.org/B.html\" rel=\"noreferrer\">core module B</a> instead of your module. You should rename your module.</p>\n<hr />\n<p>Note that it's better to use the <a href=\"http://perldoc.perl.org/parent.html\" rel=\"noreferrer\"><code>parent</code></a> pragma instead of setting <code>@ISA</code> manually, e.g</p>\n<pre><code>use parent qw(Parent1 Parent2);\n</code></pre>\n<p><code>parent</code> takes care of loading the parent modules, so you can drop the associated <code>use</code> statements (which you shouldn't be <code>eval</code>ing, by the way).</p>\n"}], "owner": {"reputation": 51, "user_id": 5609010, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qrWMYNT_zCU/AAAAAAAAAAI/AAAAAAAAACE/WsQ7hOE1FpQ/photo.jpg?sz=128", "display_name": "Omer Levy", "link": "https://stackoverflow.com/users/5609010/omer-levy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 782, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1489926577, "creation_date": 1489917468, "last_edit_date": 1489926577, "question_id": 42885207, "link": "https://stackoverflow.com/questions/42885207/why-doesnt-class-supernew-call-the-constructors-of-all-parent-classes-when", "title": "Why doesn&#39;t $class-&gt;SUPER::new call the constructors of all parent classes when using multiple inheritance?", "body": "<p>I am trying to use multiple inheritance in Perl, but I can't figure out how to call multiple parent constructors from the child constructor.</p>\n\n<p>A.pm:</p>\n\n<pre><code>package A;\nuse Carp qw (croak);\nuse strict;\nuse warnings;\n\nsub new {\n    my $class = shift;\n    print \"This is A new\\n\";\n    my $self-&gt;{DEV_TYPE} = shift || \"A\";\n    bless($self, $class);\n    return $self;\n}\n\nsub a_func{\n    print \"This is A func\\n\";\n}\n\n1;\n</code></pre>\n\n<p>B.pm:   </p>\n\n<pre><code>package B;\nuse Carp qw (croak);\nuse strict;\nuse warnings;\n\nsub new {\n    my $class = shift;\n    print \"This is B new\\n\";\n    my $self-&gt;{DEV_TYPE} = shift || \"B\";\n    bless($self, $class);\n    return $self;\n}\n\nsub b_func{\n    print \"This is B func\\n\";\n}\n\n1;\n</code></pre>\n\n<p>C.pm:</p>\n\n<pre><code>package C;\nuse Carp qw (croak);\nuse strict;\nuse warnings;\neval \"use A\";\ndie $@ if $@;\neval \"use B\";\ndie $@ if $@;\nour @ISA = (\"A\",\"B\");\n\nsub new {\n    my $class = shift;\n    my $self = $class-&gt;SUPER::new(@_);\n    print \"This is C new\\n\";\n    $self-&gt;{DEV_TYPE} = shift || \"C\";\n    bless($self, $class);\n    return $self;\n}\n\nsub c_func{\n    print \"This is C func\\n\";\n}\n\n1;\n</code></pre>\n\n<p>In <code>C::new</code>, <code>$class-&gt;SUPER::new</code> doesn't call the constructor for B. If I call it explicitly with <code>$class-&gt;B::new(@_);</code>, I get the error</p>\n\n<blockquote>\n  <p>Can't locate object method \"new\" via package \"B\" at C.pm</p>\n</blockquote>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["perl", "catalyst"], "comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 3, "creation_date": 1489901175, "post_id": 42883017, "comment_id": 72869067, "body": "It <i>should</i> work \u2014 I believe this is a bug and I&#39;m talking to the maintainers about it. But you realize that 5.8.8 is over a decade old?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489905538, "post_id": 42883017, "comment_id": 72869793, "body": "What version of Catalyst are you using? (<code>perl -MCatalyst -le&#39;print $Catalyst::VERSION&#39;</code>)"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 2, "creation_date": 1489912610, "post_id": 42883017, "comment_id": 72871290, "body": "Perl is supported 2 versions backward. Today the last released is 5.24.1, so the supported is 5.20+ :). I understand that some vendors (especially RedHat) in some long-supported distros uses 5.8.8 - but it is really time for the upgrade, especially for web-env, where the easy unicode processing is mandatory these days... Using <a href=\"https://github.com/tokuhirom/plenv\" rel=\"nofollow noreferrer\">plenv</a> or <a href=\"https://github.com/riywo/anyenv\" rel=\"nofollow noreferrer\">anyenv</a> is really easy. (just IMHO though)."}, {"owner": {"reputation": 1263, "user_id": 696264, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c3fa04fd8c4245eac2d015a26674bc18?s=128&d=identicon&r=PG", "display_name": "Madhan", "link": "https://stackoverflow.com/users/696264/madhan"}, "edited": false, "score": 0, "creation_date": 1489984207, "post_id": 42883017, "comment_id": 72892376, "body": "Catalyst Version is : 5.90114"}], "answers": [{"tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 6, "last_activity_date": 1494188016, "last_edit_date": 1494188016, "creation_date": 1489955563, "answer_id": 42891921, "question_id": 42883017, "link": "https://stackoverflow.com/questions/42883017/perl-5-8-8-support-with-catalyst/42891921#42891921", "title": "Perl 5.8.8 support with Catalyst", "body": "<p>This is a bug in Catalyst. There was some type-checking code in Catalyst::ScriptRole (since 2012!) which was completely broken, but the brokenness was only visible in particular circumstances \u2014 namely, if a script provided a <code>loader_class</code> to Catalyst::ScriptRole that wasn't already a loaded class (likely no one ever has), <em>or</em> if the system has a very old version of <a href=\"https://metacpan.org/pod/UNIVERSAL\" rel=\"nofollow noreferrer\">UNIVERSAL.pm</a> such as that shipped with perl 5.8. It's this second case that you're running into.</p>\n\n<p>I've pushed a patch to Catalyst-Runtime to resolve this problem; <s>hopefully it will be released soon</s> it's included in <a href=\"https://metacpan.org/release/JJNAPIORK/Catalyst-Runtime-5.90115\" rel=\"nofollow noreferrer\">Catalyst-Runtime 5.90115</a>.</p>\n"}], "owner": {"reputation": 1263, "user_id": 696264, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c3fa04fd8c4245eac2d015a26674bc18?s=128&d=identicon&r=PG", "display_name": "Madhan", "link": "https://stackoverflow.com/users/696264/madhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 42891921, "answer_count": 1, "score": 2, "last_activity_date": 1494188016, "creation_date": 1489898755, "last_edit_date": 1489957309, "question_id": 42883017, "link": "https://stackoverflow.com/questions/42883017/perl-5-8-8-support-with-catalyst", "title": "Perl 5.8.8 support with Catalyst", "body": "<p>Facing below issue when execute catalyst server script.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Couldn't load class (Catalyst::Script::Server) because: \"ensure_class_loaded\" is not exported by the Catalyst::Utils module\nCan't continue after import errors at /opt/madhan/lib/perl5/Catalyst/ScriptRole.pm line 7.\nBEGIN failed--compilation aborted at /opt/madhan/lib/perl5/Catalyst/ScriptRole.pm line 7.\nCompilation failed in require at /usr/lib/perl5/site_perl/5.8.8/Module/Runtime.pm line 313.\nCompilation failed in require at /opt/madhan/lib/perl5/Catalyst/ScriptRunner.pm line 13.\n        Catalyst::ScriptRunner::find_script_class(\"Catalyst::ScriptRunner\", \"testsite\", \"Server\") called at /opt/madhan/lib/perl5/Catalyst/ScriptRunner.pm line 42\n        Catalyst::ScriptRunner::run(\"Catalyst::ScriptRunner\", \"testsite\", \"Server\") called at /opt/madhan/testsite/script/testsite_server.pl line 8\n</code></pre>\n\n<p>Will the perl 5.8.8 support Catalyst MVC?</p>\n"}, {"tags": ["perl", "oop"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 7, "creation_date": 1489841541, "post_id": 42874447, "comment_id": 72853522, "body": "Please add <code>use strict; use warnings</code> to your files and define lexical variables with <code>my</code>. Also use curly brackets and not parenthesis when accessing  object hash fields: <code>$self-&gt;{path} = $new_path</code>"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 3, "creation_date": 1489849733, "post_id": 42874447, "comment_id": 72856064, "body": "<code>$self-&gt;(path)</code> implies $self is code reference; <code>$self-&gt;{path}</code> =&gt; hash reference; <code>$self-&gt;path</code> =&gt; blessed object invoking <code>path()</code> method. Please check <a href=\"https://perldoc.perl.org/perlref.html#Making-References\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlref.html#Making-References</a>"}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1490024480, "post_id": 42874643, "comment_id": 72915228, "body": "Pedantically, it&#39;s not the fact that <code>path</code> is an attribute that means you need to use braces to access it. It&#39;s the fact that the class is implemented as a hash reference. It&#39;s quite possible (tho&#39;, admittedly, rare) to implement a class as a different type of reference - in which case different types of bracket would be used."}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 0, "last_activity_date": 1489841539, "creation_date": 1489841539, "answer_id": 42874643, "question_id": 42874447, "link": "https://stackoverflow.com/questions/42874447/not-a-code-reference-in-perl-class/42874643#42874643", "title": "Not a code reference in Perl class", "body": "<p><code>path</code> is an attribute of the object, use curly brackets:</p>\n\n<pre><code>sub getPath {\n    my $self = shift;\n    return $self-&gt;{path};\n}\n</code></pre>\n\n<p>In the sub <code>setPath</code>, the variable <code>$new_path</code> is never assigned, use instead:</p>\n\n<pre><code>sub setPath {\n    my ($self, $new_path) = @_;\n    $self-&gt;{path} = $new_path if defined $new_path;\n    return $self-&gt;{path};\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 9, "last_activity_date": 1489850192, "creation_date": 1489850192, "answer_id": 42876086, "question_id": 42874447, "link": "https://stackoverflow.com/questions/42874447/not-a-code-reference-in-perl-class/42876086#42876086", "title": "Not a code reference in Perl class", "body": "<p>Your class (like most Perl classes) is implemented on top of hashes. When you create a new object in your constructor, you do it like this:</p>\n\n<pre><code>sub new {\n    $class = shift;\n\n    $self = {\n        path =&gt; shift\n    };\n\n    bless $self, $class;\n\n    return $self;\n}\n</code></pre>\n\n<p>The line <code>$self = { ... }</code> creates an anonymous hash and stores a reference to that hash in <code>$self</code>. So, <code>$self</code> is a hash reference. Which means that you should access its contents using hash syntax. So your accessor and mutator methods are wrong.</p>\n\n<pre><code>sub setPath {\n    my ($self, $new_path) = shift;\n    $self-&gt;(path) = $new_path if defined $new_path;\n    return $self-&gt;(path);\n}\n</code></pre>\n\n<p>You are using parentheses, not braces, to access the <code>path</code> value in your hash. The line:</p>\n\n<pre><code>$self-&gt;(path) = $new_path if defined $new_path;\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code># Note: braces, not parentheses\n$self-&gt;{path} = $new_path if defined $new_path;\n</code></pre>\n\n<p>And the line:</p>\n\n<pre><code>return $self-&gt;(path);\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code># Note: braces, not parentheses\nreturn $self-&gt;{path};\n</code></pre>\n\n<p>You need to make a similar fix to <code>getPath()</code>.</p>\n\n<p>Unfortunately, the syntax <code>$reference-&gt;($value)</code> is completely valid. It means \"call the subroutine that you have a reference to in <code>$reference</code>, passing it <code>$value</code>\". But, of course, this requires <code>$reference</code> to contain a subroutine reference, not a hash reference.</p>\n\n<p>A few other suggestions.</p>\n\n<ol>\n<li>Always <code>use strict</code> and <code>use warnings</code>.</li>\n<li>Indirect object notation (<code>$new_excel = new Haha(\"sample path\")</code>) is likely to burn you at some point. Please use <code>$new_excel = Haha-&gt;new(\"sample path\")</code> instead.</li>\n<li>Your line <code>my ($self, $new_path) = shift</code> doesn't do what you think it does. You want <code>my ($self, $new_path) = @_</code>.</li>\n</ol>\n"}], "owner": {"reputation": 187, "user_id": 4156353, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6400f6683abe1e721f9f884f999b764c?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/4156353/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "accepted_answer_id": 42876086, "answer_count": 2, "score": -1, "last_activity_date": 1489850192, "creation_date": 1489840293, "question_id": 42874447, "link": "https://stackoverflow.com/questions/42874447/not-a-code-reference-in-perl-class", "title": "Not a code reference in Perl class", "body": "<p>I'm stumped. I'm new to Perl and after reading some articles, I still can't figure this one out. It's a very small class.</p>\n\n<pre><code>package Haha;\n\nsub new {\n    $class = shift;\n\n    $self = {\n        path =&gt; shift\n    };\n\n    bless $self, $class;\n\n    return $self;\n}\n\nsub setPath {\n    my ($self, $new_path) = shift;\n    $self-&gt;(path) = $new_path if defined $new_path;\n    return $self-&gt;(path);\n}\n\nsub getPath {\n    my $self = shift;\n    return $self-&gt;(path);\n}\n\n1;\n</code></pre>\n\n<p>And I used it like this:</p>\n\n<pre><code>use lib 'lib';\nuse Haha;\n\nmy $new_excel = new Haha(\"sample path\");\n\nprint $new_excel-&gt;getPath() ;\n\n&lt;&gt;;\n</code></pre>\n\n<p>Class Haha line 23 raises the \"Not a code reference\" error.\nThe line that says <code>return $self-&gt;(path);</code></p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1489839227, "post_id": 42873990, "comment_id": 72852862, "body": "Why would you like to eval things in bash?"}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1489840408, "post_id": 42873990, "comment_id": 72853181, "body": "You should probably write a single Perl script, rather than constantly computing values to return to a <code>bash</code> script."}, {"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "reply_to_user": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1489840518, "post_id": 42873990, "comment_id": 72853202, "body": "@chepner - heh, true. Unfortunately, the bash script isn&#39;t my responsibiliy. So, can&#39;t revrite it fully into perl."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489849322, "post_id": 42873990, "comment_id": 72855939, "body": "@kobame: But you&#39;re proposing to add an <code>eval</code> to the bash code, so why can&#39;t it just run a Perl program and exit?"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1489851624, "post_id": 42873990, "comment_id": 72856596, "body": "generate a bash script from perl in one go?"}], "answers": [{"comments": [{"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 0, "creation_date": 1489855828, "post_id": 42876281, "comment_id": 72858068, "body": "EXCELLENT!  I created a solution based on your idea. Thank you very much."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 5, "last_activity_date": 1489851806, "last_edit_date": 1489851806, "creation_date": 1489851322, "answer_id": 42876281, "question_id": 42873990, "link": "https://stackoverflow.com/questions/42873990/safe-way-create-strings-for-evaling-in-bash/42876281#42876281", "title": "Safe way create strings for evaling in bash", "body": "<p>This is a horrible proposal. I suggest that you forget about eval and instead\nwrite your Perl code so that it returns the values to stdout in a space-separated string. Then you can split it up using <code>read</code> in bash</p>\n\n<pre><code>read -r var1 var2 var3 rest &lt;&lt;&lt; $(perl -E '...print \"val1 val2 val3\\n\"')\n</code></pre>\n\n<p>If you prefer you could read into an array instead</p>\n\n<pre><code>read -r -a vars &lt;&lt;&lt; $(perl -E '...print \"val1 val2 val3\\n\"')\n</code></pre>\n\n<p>Now the values are in <code>vars[0]</code>, <code>vars[1]</code> and <code>vars[2]</code></p>\n\n<p>If the values may contain whitespace then you should use a different delimiter ( like comma <code>,</code> or colon <code>:</code> ) that isn't ever used in the data and set <code>IFS</code> to that character before the read</p>\n"}, {"tags": [], "owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "is_accepted": false, "score": 0, "last_activity_date": 1489855769, "creation_date": 1489855769, "answer_id": 42877125, "question_id": 42873990, "link": "https://stackoverflow.com/questions/42873990/safe-way-create-strings-for-evaling-in-bash/42877125#42877125", "title": "Safe way create strings for evaling in bash", "body": "<p>Thank you @Borodin! Based on your idea i created this solution:</p>\n\n<p>The perl script prints a serie of <code>null terminated</code> lines in a form:</p>\n\n<pre><code>&lt;varname&gt;&lt;any variable content&gt;\n</code></pre>\n\n<p>so i have exactly defined and regex parseable structure for every line.</p>\n\n<p>And using the <code>bash</code>'s feature <em>printing into variable</em> i don't need run the <code>read</code> commands in specified order.</p>\n\n<p>The bash script:</p>\n\n<pre><code>fetch_external_data() {\n    perl p4.pl\n}\n\nread_data() {\n    regex='^&lt;([a-zA-Z0-9_][a-zA-Z0-9_]*)&gt;&lt;(.*)&gt;$'\n    while IFS= read -d '' -r line\n    do\n        if [[ \"$line\" =~ $regex ]]\n        then\n            printf -v \"${BASH_REMATCH[1]}\" \"${BASH_REMATCH[2]}\"\n        else\n            echo \"Ignoring strange line: $line\" &gt;&amp;2\n        fi\n    done &lt; &lt;(fetch_external_data)\n}\n\nread_data\necho \"var1: [[$var1]]\";echo\necho \"var2: [[$var2]]\";echo\necho \"var3: [[$var3]]\";echo\n</code></pre>\n\n<p>and the perl script:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Getopt::Std;\n\nour $opt_d;\ngetopts('d');\n\nsub make_var {\n    my($name, $value) = @_;\n    die \"Wrong variable name [$name]\" if $name =~ /\\W/;\n    return \"&lt;$name&gt;&lt;$value&gt;\" . ($opt_d ? \"\\n\" : \"\\0\");\n}\n\nmy $all = make_var('var1','hello');\n$all .= make_var('var2', q{some\nmultiline\nvalue '\" bla\nhere $(date) \"'});\n$all .= make_var('var3', 'world');\n\nbinmode(STDOUT);\nprint $all;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1489890502, "creation_date": 1489890502, "answer_id": 42882261, "question_id": 42873990, "link": "https://stackoverflow.com/questions/42873990/safe-way-create-strings-for-evaling-in-bash/42882261#42882261", "title": "Safe way create strings for evaling in bash", "body": "<p>You can use <a href=\"http://search.cpan.org/perldo?String::ShellQuote\" rel=\"nofollow noreferrer\">String::ShellQuote</a>'s <code>shell_quote</code> to convert arbitrary text into shell literals.</p>\n\n<pre><code>eval \"$(\n   perl -e'\n      use String::ShellQuote qw( shell_quote );\n      my $str = qq{Some dangerous symbols: \\\\\\x27\"!};\n      my $cmd = \"var1=\" . shell_quote($str);\n      print($cmd);\n  '\n)\"\nprintf \"%s\\n\" \"$var1\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Some dangerous symbols: \\'\"!\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1727, "user_id": 2102698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87f97295ca416aca61bd8d6e8fac8ef5?s=128&d=identicon&r=PG", "display_name": "Waxrat", "link": "https://stackoverflow.com/users/2102698/waxrat"}, "is_accepted": false, "score": 0, "last_activity_date": 1489891075, "creation_date": 1489891075, "answer_id": 42882302, "question_id": 42873990, "link": "https://stackoverflow.com/questions/42873990/safe-way-create-strings-for-evaling-in-bash/42882302#42882302", "title": "Safe way create strings for evaling in bash", "body": "<p>Here's what I use:</p>\n\n<pre><code>sub shellquote1\n{\n    return $_\n        unless m([^@%\\w:,./=+-]);\n    s/\\'/\\'\\\\\\'\\'/g;\n    return \"'$_'\";\n}\n\nsub shellquote\n{\n    return join \" \", map { shellquote1 } @_;\n}\n\nprint shellquote(@ARGV);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 6554795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dad9570287e2d77fad5812bcaae83fc5?s=128&d=identicon&r=PG&f=1", "display_name": "BobDodds", "link": "https://stackoverflow.com/users/6554795/bobdodds"}, "is_accepted": false, "score": 0, "last_activity_date": 1541215407, "creation_date": 1541215407, "answer_id": 53128124, "question_id": 42873990, "link": "https://stackoverflow.com/questions/42873990/safe-way-create-strings-for-evaling-in-bash/53128124#53128124", "title": "Safe way create strings for evaling in bash", "body": "<p>Perl calls Taint. Untainting in perl means applying <em>any</em> regex. Perl goes further than bash--Chicken Little crying Sky Is Falling--by asserting that we have specific opportunities and responsibilities to assert our own best \"Laziness(Larry Wall)\".</p>\n\n<p>bash \"untaint\" by regex:</p>\n\n<pre><code>jump=\"`cd / ; rm -rf * .*`\"\nuntaint=${jump//*[^-_a-zA-Z0-9]*/}\n\n[ -n \"$untaint\" ] &amp;&amp; eval portal=\\${$untaint:=$@}\n</code></pre>\n\n<p>Goal: imagine how we might \"prevent arithmetic\" by applying regex.</p>\n"}], "owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 42876281, "answer_count": 5, "score": 2, "last_activity_date": 1541215407, "creation_date": 1489837612, "last_edit_date": 1489840991, "question_id": 42873990, "link": "https://stackoverflow.com/questions/42873990/safe-way-create-strings-for-evaling-in-bash", "title": "Safe way create strings for evaling in bash", "body": "<p>Want prepare a string in <code>perl</code> for evaling it in <code>bash</code> like:</p>\n\n<pre><code>str=\"$( perl -E '$sq=chr(047);say qq{var1=${sq}hello world${sq}}' )\" #this just for demo - the real perl scirpt is ofcourse real complex script ...\necho \"got for eval: [[$str]]\"\neval \"$str\"\necho \"var1        : [[$var1]]\"\n</code></pre>\n\n<p>it prints:</p>\n\n<pre><code>got for eval: [[var1='hello world']]\nvar1        : [[hello world]]\n</code></pre>\n\n<p>or course the <code>eval</code> is dangerous, so the perl script need to do some preparations.</p>\n\n<p>One thing is, replace all <code>'</code> (single quotes) in the value with <code>'\"'\"'</code>, so the when assigning <code>don't do this</code> into <code>var</code> it should be printed as</p>\n\n<pre><code>var='don'\"'\"'t do this' #safe for eval.\n</code></pre>\n\n<p>Are here some more considartions what i should follow in the perl script for preparing the variable assingnment (<code>var='some content'</code>) strings for <strong>safe</strong> <code>eval</code>?</p>\n\n<p>fragments from my real script:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nsub make_var {\n    my($name, $value) = @_;\n    die \"Wrong variable name [$name]\" if $name =~ /\\W/;\n    my $sval = sanitise($value);\n    #warn qq{$name='$sval'\\n};\n    print qq{$name='$sval'\\n};\n}\n\nsub sanitise {\n    my $str = shift;\n    $str =~ s/'/'\"'\"'/gs;\n    # what more i should do here?\n    return $str;\n}\n\n#usage\nmake_var('var1', q{some\nmultiline\nvalue\nwhere i should'nt miss\nescape the single quotes});\n</code></pre>\n\n<p>prints a string safe for eval.</p>\n\n<pre><code>var1='some\nmultiline\nvalue\nwhere i should'\"'\"'nt miss\nescape the single quotes'\n</code></pre>\n\n<p><strong>EDIT</strong>: Rationale behind this:</p>\n\n<p>In the <code>bash</code>  i need many variables, for which the values are generated by the <code>perl</code> script. For one variable, i could do:</p>\n\n<pre><code>var=\"$(my_script)\"\n</code></pre>\n\n<p>but i need in the bash script many variables. Doing</p>\n\n<pre><code>var1=\"$(my_script some args)\"\nvar2=\"$(my_script other args)\"\n...\nvar10=\"$(my_script bla bla)\"\n</code></pre>\n\n<p>is fairly expensive and slow. (The perl script does many things, the most expensive is - it fetches json from the web...) Therefore, want reduce the number of callings into one - such need the <code>eval</code>.</p>\n\n<p>Somme werid pattern comes into my mind:</p>\n\n<pre><code>';date;':      var2=''\"'\"';date;'\"'\"':' # the escaping solves it\n$(date)        var='$(date)'            # safe\n</code></pre>\n"}, {"tags": ["python", "perl"], "comments": [{"owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "edited": false, "score": 0, "creation_date": 1489818108, "post_id": 42871086, "comment_id": 72847718, "body": "what are you trying to do with <code>list</code> once you have it? Python has good support for generators and iterators, you can <code>yield ls[1]</code> inside of appending to a global variable."}, {"owner": {"reputation": 63648, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1489818112, "post_id": 42871086, "comment_id": 72847720, "body": "What sort of performance differences are we talking about here?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 3, "creation_date": 1489818946, "post_id": 42871086, "comment_id": 72847874, "body": "I ran your code against <a href=\"https://gist.github.com/schwern/0e81307f0be0cce37aad9c0ac5fd3045\" rel=\"nofollow noreferrer\">the equivalent Perl code</a> over a simple CSV file with 10 million lines of &quot;foo\\tbar\\tbaz\\tbiff\\n&quot; and the Python code ran twice as fast. Could you show your equivalent Perl code? Also, your code isn&#39;t real, <code>open</code> is missing arguments. Can you show us the <i>real</i> code? Finally, why do you think that bit of code is the performance problem?"}, {"owner": {"reputation": 39, "user_id": 6674648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0e8dd8da07542f837bb1f9d8c185b97?s=128&d=identicon&r=PG&f=1", "display_name": "Lowry", "link": "https://stackoverflow.com/users/6674648/lowry"}, "reply_to_user": {"reputation": 12982, "user_id": 7668911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6VtZT.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/7668911/neil"}, "edited": false, "score": 0, "creation_date": 1489818952, "post_id": 42871086, "comment_id": 72847876, "body": "@nfnneil it&#39;s usually lookup tables or mapping files of gene names."}, {"owner": {"reputation": 39, "user_id": 6674648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0e8dd8da07542f837bb1f9d8c185b97?s=128&d=identicon&r=PG&f=1", "display_name": "Lowry", "link": "https://stackoverflow.com/users/6674648/lowry"}, "reply_to_user": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "edited": false, "score": 0, "creation_date": 1489819055, "post_id": 42871086, "comment_id": 72847893, "body": "@GregoryNisbet Would that make the file processing faster? Otherwise it&#39;s not helping with my problem"}, {"owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "edited": false, "score": 0, "creation_date": 1489819227, "post_id": 42871086, "comment_id": 72847945, "body": "@Lowry ... yes it would. If it&#39;s super critical that the first part of your pipeline be as fast as possible you can read lines from a process (e.g. <code>awk &#39;{print $2}&#39; input_file.txt</code> or <code>awk &#39;{print $2}&#39; | sort</code>). Can you give us some more context on what you&#39;re trying to do with the data once you&#39;ve extracted it from the file?"}, {"owner": {"reputation": 39, "user_id": 6674648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0e8dd8da07542f837bb1f9d8c185b97?s=128&d=identicon&r=PG&f=1", "display_name": "Lowry", "link": "https://stackoverflow.com/users/6674648/lowry"}, "reply_to_user": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "edited": false, "score": 0, "creation_date": 1489819627, "post_id": 42871086, "comment_id": 72848024, "body": "@GregoryNisbet Sorry mate, not looking for a way to use bash/awk + python as I can do it cleaner in perl. I&#39;m trying to understand a potential mistake in my python code ...."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489828703, "post_id": 42871086, "comment_id": 72850057, "body": "@Lowry: Then why did you ask <i>&quot;Is there any way to speed this up&quot;</i>?"}, {"owner": {"reputation": 39, "user_id": 6674648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0e8dd8da07542f837bb1f9d8c185b97?s=128&d=identicon&r=PG&f=1", "display_name": "Lowry", "link": "https://stackoverflow.com/users/6674648/lowry"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489829960, "post_id": 42871086, "comment_id": 72850341, "body": "@Borodin In context of the intro I guess one could re-formulate the question to &quot;is there a pythonic way to speed this up&quot; as I considered the possibility that I am still using a perl-related syntax where I should use something else in python"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1489847079, "post_id": 42871086, "comment_id": 72855239, "body": "I concur with Schwern: Python is roughly twice as fast. Please create a benchmark that shows 1) your sample data, or how to generate it 2) the actual code for both programs 3) how you measured the times 4) the actual times 5) details about your setup, like the bit about being on NFS that you mentioned in the comments."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1489951879, "post_id": 42871086, "comment_id": 72883721, "body": "Versions?  Last I checked, older perls built with usefaststdio could be significantly faster than newer perls that have to support the PerlIO layer.  If you are using such an older Perl, your results make more sense."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 6674648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0e8dd8da07542f837bb1f9d8c185b97?s=128&d=identicon&r=PG&f=1", "display_name": "Lowry", "link": "https://stackoverflow.com/users/6674648/lowry"}, "edited": false, "score": 0, "creation_date": 1489820694, "post_id": 42871428, "comment_id": 72848238, "body": "Thanks for the suggestions but given that I have to use the NFS on our compute cluster SQLite is not an option (already did that and lost the db twice thanks to the known &quot;database locked&quot; problem). Additionally, my perl code runs reasonably fast but, as mentioned, I thought there might be a &quot;nifty&quot; way of using just python. Thanks anyways"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 1, "last_activity_date": 1489820069, "last_edit_date": 1489820069, "creation_date": 1489819507, "answer_id": 42871428, "question_id": 42871086, "link": "https://stackoverflow.com/questions/42871086/python-with-large-files-slower-than-perl-what-am-i-doing-wrong/42871428#42871428", "title": "Python with large files slower than perl: what am I doing wrong?", "body": "<blockquote>\n  <p><em>Is there any way to speed this up?</em></p>\n</blockquote>\n\n<p>Yes, <a href=\"https://stackoverflow.com/questions/14947916/import-csv-to-sqlite\">import the CSV in SQLite and process it there</a>. In your case you want <code>.mode tabs</code> instead of <code>.mode csv</code>.</p>\n\n<p>Using any programming language to manipulate a CSV file is going to be slow. CSV is a data <em>transfer</em> format, not a data storage format. They'll always be slow and unwieldy to work with because you're constantly reparsing and reprocessing the CSV file.</p>\n\n<p>Importing it into SQLite will put it into a much, much more efficient data format with indexing. It will take about as much time as Python would, but only has to be done once. It can be processed using SQL, which means less code to write, debug, and maintain.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/40695905/sqlite-vs-csv-file-manipulation-performance/40696615#40696615\">Sqlite vs CSV file manipulation performance</a>.</p>\n"}], "owner": {"reputation": 39, "user_id": 6674648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0e8dd8da07542f837bb1f9d8c185b97?s=128&d=identicon&r=PG&f=1", "display_name": "Lowry", "link": "https://stackoverflow.com/users/6674648/lowry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "closed_date": 1489857808, "answer_count": 1, "score": 0, "last_activity_date": 1489820069, "creation_date": 1489816971, "last_edit_date": 1489818813, "question_id": 42871086, "link": "https://stackoverflow.com/questions/42871086/python-with-large-files-slower-than-perl-what-am-i-doing-wrong", "closed_reason": "Needs more focus", "title": "Python with large files slower than perl: what am I doing wrong?", "body": "<p>I'm increasingly using python instead of perl but have one problem: always when I want to process large files (>1GB) line by line python seems to take ages for a job that perl does in a fraction of the time. However, the general opinion on the web seems to be that python should be at least as fast for text processing as perl. So my question is what am I doing wrong?</p>\n\n<p>Example:</p>\n\n<p>Read a file line by line, split the line at every tab and add the second item to a list. \nMy python solution would look something like this:</p>\n\n<pre><code>with open() as infile:\n    for line in infile:\n        ls = line.split(\"\\t\")\n        list.append(ls[1])\n</code></pre>\n\n<p>The perl code would look like this:</p>\n\n<pre><code>open(my $infile,\"&lt;\",file_path);\nwhile(my $line=&lt;$infile&gt;){\n    my @ls = split(/\\t/,$line);\n    push @list, $ls[1]\n}\nclose($infile)\n</code></pre>\n\n<p>Is there any way to speed this up? </p>\n\n<p>And to make it clear: I don't want to start the usual \"[fill in name of script language A] is sooo much better than [fill in script language B]\" thread. I'd like to use python more by this is a real problem for my work.</p>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["mysql", "perl", "moose"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489800920, "post_id": 42869183, "comment_id": 72844968, "body": "I know you said you don&#39;t like ORMs, but just for reference, <a href=\"http://blogs.perl.org/users/ovid/2010/07/lazy-database-columns-and-virtual-vertical-partitioning.html\" rel=\"nofollow noreferrer\">here&#39;s a way to get lazy-loaded columns with DBIx::Class</a>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489801860, "post_id": 42869183, "comment_id": 72845148, "body": "Also, having objects where at least some of the attributes are mapped to database columns sounds a lot like you&#39;re re-inventing an ORM. <a href=\"https://metacpan.org/pod/DBIx::Class::Manual::FAQ#How-do-I-store-my-own-(non-db)-data-in-my-DBIx::Class-objects?\" rel=\"nofollow noreferrer\">It&#39;s easy to store non-db data in DBIx::Class Result classes.</a>"}], "owner": {"reputation": 1437, "user_id": 2518556, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/7mTHZ.jpg?s=128&g=1", "display_name": "yahermann", "link": "https://stackoverflow.com/users/2518556/yahermann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "closed_date": 1489803018, "answer_count": 0, "score": 1, "last_activity_date": 1489797979, "creation_date": 1489797979, "question_id": 42869183, "link": "https://stackoverflow.com/questions/42869183/lazy-loading-a-sql-row-upon-construction-of-a-perl-moose-object", "closed_reason": "Duplicate", "title": "Lazy-loading a SQL row upon construction of a Perl Moose object?", "body": "<p>I'm using Moose to represent objects with persistent data stored in a SQL database. </p>\n\n<p>Given a sample SQL table 'people':</p>\n\n<pre><code>id - unsigned int\nname - varchar(200)\nemail - varchar(200)\nphone - varchar(200)\n</code></pre>\n\n<p>I would like instantiation</p>\n\n<pre><code>my $person = Person-&gt;new( id =&gt; 123 );\n</code></pre>\n\n<p>to set $person->id to 123, but not yet load the row with id=123 from the SQL table.  However,</p>\n\n<pre><code>my $name = $person-&gt;name;\n</code></pre>\n\n<p>would lazy-load the entire row from the SQL database, and set the name to $name. Later,</p>\n\n<pre><code>my $address = $person-&gt;address;\n</code></pre>\n\n<p>would use the already lazy-loaded row, and set the address to $address.</p>\n\n<p>Any recommendations &amp; patterns?  </p>\n\n<p>BONUS POINTS for answers that allow elegant subclassing, e.g. Person::Employee having additional attributes such as 'job_title', 'salary', and including how to best store additional subclass attributes in the SQL 'people' table (or multiple tables, maybe 'people_employee'?)</p>\n\n<p>Or if I'm going about this in entirely the wrong way, that'd be good to know too! I'm very aware of ORMs (such as DBIx::Class) but don't really like the api, and also plan to add a fair amount of functionality to the object that doesn't involve the SQL table, and that seems ideal under Moose.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 4, "creation_date": 1489790521, "post_id": 42868125, "comment_id": 72842451, "body": "Spaces are not described in your pattern. <code>{1}</code> quantifiers are useless, remove them."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 5, "creation_date": 1489790999, "post_id": 42868125, "comment_id": 72842624, "body": "Don&#39;t use <code>m&#47;&#47;</code> in void context. Always check whether the match succeeded before using any capture variables."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 6929022, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89a40247f8eba52e09bbf74c078e5c7a?s=128&d=identicon&r=PG&f=1", "display_name": "Christine Zhu", "link": "https://stackoverflow.com/users/6929022/christine-zhu"}, "edited": false, "score": 0, "creation_date": 1489881433, "post_id": 42868701, "comment_id": 72865956, "body": "Thank you...I also realised that I didn&#39;t include the space between the first bracket and second bracket!! silly"}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 4, "last_activity_date": 1489794035, "creation_date": 1489794035, "answer_id": 42868701, "question_id": 42868125, "link": "https://stackoverflow.com/questions/42868125/perl-named-captured-group/42868701#42868701", "title": "Perl Named Captured Group", "body": "<p>You probably mean:</p>\n\n<pre><code>my $string = 'test [google] another test [windows]';\n\nif( $string =~ /.*?\\[(?&lt;firstBracket&gt;\\w+)\\].*?\\[(?&lt;secondBracket&gt;\\w+)\\]/i ) {\n        say $+{firstBracket};\n        say $+{secondBracket};\n}\n</code></pre>\n\n<p>output</p>\n\n<pre><code>google\nwindows\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $re = qr/.*?\\[(?&lt;firstBracket&gt;\\w+)\\].*?\\[(?&lt;secondBracket&gt;\\w+)\\]/i;\nif( $string =~ $re ) {\n    ...\n}\n</code></pre>\n\n<p>with same output...</p>\n"}], "owner": {"reputation": 67, "user_id": 6929022, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89a40247f8eba52e09bbf74c078e5c7a?s=128&d=identicon&r=PG&f=1", "display_name": "Christine Zhu", "link": "https://stackoverflow.com/users/6929022/christine-zhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1163, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489881373, "creation_date": 1489790130, "last_edit_date": 1489881373, "question_id": 42868125, "link": "https://stackoverflow.com/questions/42868125/perl-named-captured-group", "title": "Perl Named Captured Group", "body": "<p>I have created two named capture variables in the regex and the second one doesn't seem to return any value while the first one can. I am not sure why..here is the code.</p>\n\n<pre><code>my $string = 'test [google] another test [windows]';\n\nmy $regex=qr/\\w*\\[{1}(?&lt;firstBracket&gt;\\w+)\\]{1}(?&lt;secondBracket&gt;\\w*)/ip;\n\n$string=~ /$regex/;\n\nsay $+{secondBracket};\n</code></pre>\n\n<p>I am expecting that \"secondBracket\" will return.\nI can do <code>$+{firstBracket}</code>, but not the second one...Can someone help please?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["regex", "perl", "large-files"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 3, "creation_date": 1489783277, "post_id": 42866626, "comment_id": 72839766, "body": "Looks like you&#39;re trying to parse a DSL (doman specific language) using a multi-line regex. This is almost always a terrible idea as the format can vary widely.  This appears to be an <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY Problem</a> and you&#39;ve gone down the rabbit hole of thinking regex is the correct tool here when it is almost certainly not.  What you should do is <a href=\"https://stackoverflow.com/posts/42866626/edit\">edit</a> your question to include a representative sample of the input, along with a description of your ultimate objective."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 1, "creation_date": 1489785272, "post_id": 42866626, "comment_id": 72840672, "body": "Because it looks complex enough for later extending and more precise parsing i would recommend to build a parser using <a href=\"https://metacpan.org/pod/distribution/Pegex/lib/Pegex.pod\" rel=\"nofollow noreferrer\">Pegex</a>. It is a bit steeper to start (need learn the Pegex and write the grammar-rules) but it could pay itself later..."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 6267712, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/965bd8ab028237743d03bf09c2e8691b?s=128&d=identicon&r=PG&f=1", "display_name": "Intrinsic", "link": "https://stackoverflow.com/users/6267712/intrinsic"}, "edited": false, "score": 0, "creation_date": 1489785461, "post_id": 42866745, "comment_id": 72840755, "body": "The paired syntax is not consistent, there are other data structures contained within the file.  The regex finds the multi line pairs I need and passes over all the other stuff so I need to avoid manipulating the data in case I disrupt the arcane structure of the data.  Could you suggest a code snippet of the buffer approach?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 59, "user_id": 6267712, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/965bd8ab028237743d03bf09c2e8691b?s=128&d=identicon&r=PG&f=1", "display_name": "Intrinsic", "link": "https://stackoverflow.com/users/6267712/intrinsic"}, "edited": false, "score": 0, "creation_date": 1489785650, "post_id": 42866745, "comment_id": 72840837, "body": "@Intrinsic I see. Then keep patching lines and checking. That way you only have (presumably) small chunks in memory at a time and you do exactly what you want, as I understand it.  (Unless the whole approach can be replaced by something else, as <a href=\"http://stackoverflow.com/users/18157/jim-garrison\">@Jim Garrison</a>&#39;s comment says. I don&#39;t know that. I am responding to the title and the clear statement in the question.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 59, "user_id": 6267712, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/965bd8ab028237743d03bf09c2e8691b?s=128&d=identicon&r=PG&f=1", "display_name": "Intrinsic", "link": "https://stackoverflow.com/users/6267712/intrinsic"}, "edited": false, "score": 0, "creation_date": 1489789544, "post_id": 42866745, "comment_id": 72842148, "body": "@Intrinsic  Updated to your clarification and to statements in other comments."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 59, "user_id": 6267712, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/965bd8ab028237743d03bf09c2e8691b?s=128&d=identicon&r=PG&f=1", "display_name": "Intrinsic", "link": "https://stackoverflow.com/users/6267712/intrinsic"}, "edited": false, "score": 0, "creation_date": 1489905895, "post_id": 42866745, "comment_id": 72869852, "body": "@Intrinsic  I added a bit of code, let me know if there should be more detail"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 59, "user_id": 6267712, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/965bd8ab028237743d03bf09c2e8691b?s=128&d=identicon&r=PG&f=1", "display_name": "Intrinsic", "link": "https://stackoverflow.com/users/6267712/intrinsic"}, "edited": false, "score": 0, "creation_date": 1490030269, "post_id": 42866745, "comment_id": 72919054, "body": "@Intrinsic  Great :)  If any questions pop up please let me know."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 4, "last_activity_date": 1572541795, "last_edit_date": 1572541795, "creation_date": 1489783300, "answer_id": 42866745, "question_id": 42866626, "link": "https://stackoverflow.com/questions/42866626/perl-read-a-large-file-for-use-with-multi-line-regex/42866745#42866745", "title": "Perl read a large file for use with multi line regex", "body": "<p>The question is apparently about parsing a <a href=\"https://en.wikipedia.org/wiki/Domain-specific_language\" rel=\"nofollow noreferrer\">DSL</a>, and it seems that in general regex isn't the right tool for that. A quick search did not yield an easy list of accepted approaches, except for <a href=\"http://search.cpan.org/search?query=DSL&amp;mode=all\" rel=\"nofollow noreferrer\">pages of CPAN modules</a> and posts like <a href=\"http://blogs.perl.org/users/jeffrey_kegler/2012/08/domain-specific-languages-made-simpler.html\" rel=\"nofollow noreferrer\">this article</a>. Finding out the best approach is indeed the first step.</p>\n\n<p>However, below is an answer to the question as stated in the title and in the clear description: how to parse a very large file where units to be processed  spread over an unknown number of lines.</p>\n\n<hr>\n\n<p>Keep assembling a 'buffer' and checking it.  Once you find a match, process and clear it.</p>\n\n<p>For instance, appeand a line to a variable and check (try to match if you use regex). Keep going and once it does match process and clear the variable. </p>\n\n<pre><code>my $unit;\nwhile (&lt;$fh&gt;) {\n    # chomp;            # if suitable, and then add a space\n    # $unit .= ' '.$_;  # as a separator that newline was\n    $unit .= $_;\n\n    if ( test_unit($unit) ) {\n         # process ...\n         $unit = undef;\n    }\n}\n</code></pre>\n\n<p>The <code>test_unit()</code> sub is a placeholder for code that would decide whether the assembled unit should be processed. If that is regex it can be defined before the loop, <code>my $re = qr/.../;</code> (see <a href=\"https://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">qr in perlop</a>), and then test in the loop with <code>if ($unit =~ $re)</code></p>\n\n<p>A note in the question states that lines to be processed come in pairs, but it is clarificated in a comment that subsequent lines don't always pair up. Thus we can't process pairs of lines.  </p>\n"}], "owner": {"reputation": 59, "user_id": 6267712, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/965bd8ab028237743d03bf09c2e8691b?s=128&d=identicon&r=PG&f=1", "display_name": "Intrinsic", "link": "https://stackoverflow.com/users/6267712/intrinsic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 564, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572541795, "creation_date": 1489782768, "last_edit_date": 1489784027, "question_id": 42866626, "link": "https://stackoverflow.com/questions/42866626/perl-read-a-large-file-for-use-with-multi-line-regex", "title": "Perl read a large file for use with multi line regex", "body": "<p>I have a 4GB text file with highly variable length lines, this is only a sample file, production files will be much larger.  I need to read the file and apply a multi line regex.  </p>\n\n<p>What is the best way to read such a large file for the multi line regex?  </p>\n\n<p>If I read it line by line, I don't think my multi line regex will work correctly.  When I use the read function in 3 argument form my regex results vary as I change the size of length I specify in the the read statement. I believe that the file's size makes it too large to be read into an array or into memory.</p>\n\n<p>Here is my code</p>\n\n<pre><code>package main;\nuse strict;\nuse warnings;\n\nour $VERSION = 1.01;\nmy $buffer;\nmy $INFILE;\nmy $OUTFILE;\n\nopen $INFILE, '&lt;', ... or die \"Bad Input File: $!\";\nopen $OUTFILE, '&gt;',... or die \"Bad Output File: $!\";\n\nwhile ( read $INFILE, $buffer, 512  ) {\n    if ($buffer =~ /(?m)(^[^\\r\\n]*\\R+){1}^(B|BREAK|C|CLOSE|D|DO(?! NOT)|E|ELSE|F|FOR|G|GOTO|H|HALT|HANG|I|IF|J|JOB|K|KILL|L|LOCK|M|MERGE|N|O|OPEN|Q|QUIT|R|READ|S|SET|TC|TRE|TRO|TS|U|USE|V|VIEW|W|WRITE|X|XECUTE)( |:).*[^\\r\\n]/) {\n        print $OUTFILE $&amp;;\n        print $OUTFILE \"\\n\";\n    }\n}\n\nclose( $INFILE ); \nclose( $OUTFILE );\n1;\n</code></pre>\n\n<p>Here is some sample data:</p>\n\n<pre><code>^%Z(\"EUD\")\nS %L=%LO,%N=\"E1\"\n^%Z(\"RT\")\nThis is data that I don't want the regex to find\n^%Z(\"EXY\")\nX ^%Z(\"EW2\"),^%Z(\"ELONG\"):$L(%L)&gt;245 S %N=\"E1\" Q:$L(%L)&gt;255  X ^%ZOSF(\"EON\") S DX=0,DY=%EY,X=%RM+1 X ^%ZOSF(\"RM\"),XY K %EX,%EY,%E1,%E2,DX,DY,%N Q\n^%Z(\"F12\")\nS %A=$P(^DIC(9.8,0),\"^\",3)+1,%C=$P(^(0),\"^\",4)+1 X \"F %=0:0 Q:'$D(^DIC(9.8,%A,0))  S %A=%A+1\" S $P(^DIC(9.8,0),\"^\",3,4)=%A_\"^\"_%C,^DIC(9.8,%A,0)=%X_\"^R\",^DIC(9.8,\"B\",%X,%A)=\"\"\n^%Z(\"F2\")\nS %=$H&gt;21549+$H-.1,%Y=%\\365.25+141,%=%#365.25\\1,%D=%+306#(%Y#4=0+365)#153#61#31+1,%M=%-%D\\29+1,%DT=%Y_\"00\"+%M_\"00\"+%D,%D=%M_\"/\"_%D_\"/\"_$E(%Y,2,3)\n</code></pre>\n\n<p>The lines above are paired, syntactically (line 1 and 2 go together, 3 and 4, etc).  I need to find specific pairs, in the above data that's all of the pairs except for:</p>\n\n<pre><code>^%Z(\"RT\")\nThis is data that I don't want the regex to find\n</code></pre>\n"}, {"tags": ["xml", "perl", "url", "xml-parsing"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1489792167, "creation_date": 1489792167, "answer_id": 42868453, "question_id": 42865941, "link": "https://stackoverflow.com/questions/42865941/to-take-value-from-xml-file-and-insert-it-to-url-get-request/42868453#42868453", "title": "To take value from xml file and insert it to url ( GET request)", "body": "<p>The URL that you need is in the <code>href</code> attribute of the <code>link</code> element within each resource. Just pick up the value of that attribute and use it directly</p>\n"}], "owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489792167, "creation_date": 1489779901, "last_edit_date": 1592644375, "question_id": 42865941, "link": "https://stackoverflow.com/questions/42865941/to-take-value-from-xml-file-and-insert-it-to-url-get-request", "title": "To take value from xml file and insert it to url ( GET request)", "body": "\n<p>I need to extract a value from an XML document and add it to a URL.</p>\n<p>When I make a GET request with all devices for my web service I get this XML data</p>\n<h3>FILE.xml</h3>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;ns2:searchResult total=&quot;3&quot; xmlns:ns2=&quot;ers.ise.cisco.com&quot;&gt;\n    &lt;resource name=&quot;TEST_1&quot; id=&quot;1&quot; description=&quot;example nd&quot;&gt;\n      &lt;link type=&quot;application/xml&quot; href=&quot;https://hostname:9060/ers/config/networkdevice/1&quot; rel=&quot;self&quot;/&gt;\n    &lt;/resource&gt;\n    &lt;resource name=&quot;TEST_2&quot; id=&quot;2&gt;\n      &lt;link type=&quot;application/xml&quot; href=&quot;https://hostname:9060/ers/config/networkdevice/2&quot; rel=&quot;self&quot;/&gt;\n    &lt;/resource&gt;\n    &lt;resource name=&quot;TEST_3&quot; id=&quot;3&quot; description=&quot;example nd&quot;&gt;\n      &lt;link type=&quot;application/xml&quot; href=&quot;https://hostname:9060/ers/config/networkdevice/3&quot; rel=&quot;self&quot;/&gt;\n    &lt;/resource&gt;\n  &lt;/resources&gt;\n&lt;/ns2:searchResult&gt;\n</code></pre>\n<p>My result contains just <code>Name</code> and <code>ID</code> but I need the devices' IP addresses too, and to get it I should make a GET request passing the ID in the URL</p>\n<p>For example: <code>https://hostname:9060/ers/config/networkdevice/1</code></p>\n<p>I did not find an API to get more information for all devices.</p>\n<p>Does anyone know how can I loop my IDs? Can I insert the value into my URL?</p>\n<h3>My current code</h3>\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse XML::Twig;\nuse LWP 5.64;\nuse LWP::UserAgent;\nuse MIME::Base64;\nuse REST::Client;\nuse IO::Socket::SSL;\nuse HTTP::Headers;\nuse HTTP::Request;\n\nmy $xml1 = XML::Twig-&gt;new-&gt;parsefile('FILE.xml');\n\nforeach my $id ($xml1-&gt;root-&gt;att('id'))\n# .........\n# I don't know what I should make here\n\n\n#Create a user agent object\nmy $ua = LWP::UserAgent-&gt;new(ssl_opts=&gt; {\n    SSL_verify_mode =&gt; SSL_VERIFY_NONE(),\n    verify_hostname =&gt; 0,\n});\n\n#Create a request\nmy $uri = 'https://hostname:9060/ers/config/networkdevice'; # I need to insert my ID into this URL\nmy $header = HTTP::Headers-&gt;new;\n$header-&gt;Header(Accept =&gt; 'application/vnd.com.cisco.ise.network.networkdevice.1.0+xml');\nmy $req = HTTP::Request-&gt;new('GET', $uri, $header);\n\n\n$req-&gt;authorization_basic(&quot;user&quot;, &quot;password&quot;);\n\n# Pass request to the user agent and get a response back\nmy $res = $ua-&gt;request($req);\n\n# Check the outcome of the response\nif ( $res-&gt;is_success ) {\n    print $res-&gt;content;\n} \nelse {\n    print $res-&gt;status_line, &quot;n&quot;;\n}\n</code></pre>\n<p>After that, I need to save all my devices into one XML file.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 176, "user_id": 7416863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMK0A.png?s=128&g=1", "display_name": "jjspace", "link": "https://stackoverflow.com/users/7416863/jjspace"}, "edited": false, "score": 0, "creation_date": 1489779414, "post_id": 42865746, "comment_id": 72837912, "body": "You probably want to use a split method instead of regex and tell it to split on word boundaries <code>\\b</code> <a href=\"https://regex101.com/r/ewu7xc/1\" rel=\"nofollow noreferrer\">example</a> I dont know perl so I cant say exactly how to implement that"}, {"owner": {"reputation": 293, "user_id": 6212907, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/CxA43.jpg?s=128&g=1", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/6212907/andr%c3%a9"}, "reply_to_user": {"reputation": 176, "user_id": 7416863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMK0A.png?s=128&g=1", "display_name": "jjspace", "link": "https://stackoverflow.com/users/7416863/jjspace"}, "edited": false, "score": 0, "creation_date": 1489779797, "post_id": 42865746, "comment_id": 72838119, "body": "The really used regular expression is more complex than in the example above, it&#39;s something like &quot;[abcABC]{3,}&quot;."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1489837592, "post_id": 42865746, "comment_id": 72852376, "body": "In the expected list, is the space after the comma really wanted or is it a typo?"}, {"owner": {"reputation": 293, "user_id": 6212907, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/CxA43.jpg?s=128&g=1", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/6212907/andr%c3%a9"}, "edited": false, "score": 0, "creation_date": 1489839869, "post_id": 42865746, "comment_id": 72853051, "body": "It&#39;s a typo, I corrected it. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 5, "last_activity_date": 1489780252, "last_edit_date": 1489780252, "creation_date": 1489779931, "answer_id": 42865948, "question_id": 42865746, "link": "https://stackoverflow.com/questions/42865746/get-the-words-and-the-characters-between-the-words-of-a-text/42865948#42865948", "title": "get the words and the characters between the words of a text", "body": "<p>By using <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"noreferrer\"><code>split</code></a> and putting the regex in parenthesis, it will return the separators also. Then remove empty parts (containing only space) by using <code>grep</code>:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $text = \"share your knowledge, Q&amp;A-style\";\nmy @parts =  grep { /\\S/ } split /(\\w+)/, $text;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 176, "user_id": 7416863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMK0A.png?s=128&g=1", "display_name": "jjspace", "link": "https://stackoverflow.com/users/7416863/jjspace"}, "is_accepted": false, "score": -1, "last_activity_date": 1489780001, "creation_date": 1489780001, "answer_id": 42865966, "question_id": 42865746, "link": "https://stackoverflow.com/questions/42865746/get-the-words-and-the-characters-between-the-words-of-a-text/42865966#42865966", "title": "get the words and the characters between the words of a text", "body": "<p>To get the matches you want you should use regex like this <code>\\b(?:\\S|\\S+?\\s+?)+?\\b</code> <a href=\"https://regex101.com/r/i55G0R/2\" rel=\"nofollow noreferrer\">example</a></p>\n\n<p>It will match any non whitespace character set Or a non whitespace character followed by whitespace (to account for your \", \" condition).</p>\n\n<p>I think you may also want to look into a <code>split</code> function on word endings and eliminate empty (only whitespace) matches.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1489787574, "last_edit_date": 1489787574, "creation_date": 1489786751, "answer_id": 42867504, "question_id": 42865746, "link": "https://stackoverflow.com/questions/42865746/get-the-words-and-the-characters-between-the-words-of-a-text/42867504#42867504", "title": "get the words and the characters between the words of a text", "body": "\n\n<p>This is very simple if you write a regular expression that will match <em>either</em> a sequence of \"word\" characters <em>or</em> a sequence of non-word non-space characters</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nmy $text = \"share your knowledge, Q&amp;A-style\";\n\nmy @parts = $text =~ /\\w+|[^\\w\\s]+/g;\n\nuse Data::Dumper;\n$Data::Dumper::Terse = 1;\n$Data::Dumper::Useqq = 1;\n\nprint Dumper \\@parts;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>[\n  \"share\",\n  \"your\",\n  \"knowledge\",\n  \",\",\n  \"Q\",\n  \"&amp;\",\n  \"A\",\n  \"-\",\n  \"style\"\n]\n</code></pre>\n\n<p>The only discrepancy is that your example output shows an element <code>\", \"</code> (with a space) after <em>knowledge</em>. I'm guessing that's a mistake as all other spaces are discarded, but if you really want to capture any spaces that follow non-word sequences then you just need to change the regex pattern to <code>$text =~ /\\w+|[^\\w\\s]+\\s*/g</code></p>\n"}], "owner": {"reputation": 293, "user_id": 6212907, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/CxA43.jpg?s=128&g=1", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/6212907/andr%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1501923686, "creation_date": 1489779185, "last_edit_date": 1489839857, "question_id": 42865746, "link": "https://stackoverflow.com/questions/42865746/get-the-words-and-the-characters-between-the-words-of-a-text", "title": "get the words and the characters between the words of a text", "body": "<p>I have a text, for example</p>\n\n<pre><code>my $text = \"share your knowledge, Q&amp;A-style\"\n</code></pre>\n\n<p>and would like to get the words <em>and</em> the characters between them in a list. If I use</p>\n\n<pre><code>my (@parts) = $text =~ /(\\w+)/g\n</code></pre>\n\n<p>I get </p>\n\n<pre><code>(\"share\", \"your\", \"knowledge\", \"Q\", \"A\", \"style\")\n</code></pre>\n\n<p>Now I'd like to get the following list:</p>\n\n<pre><code>(\"share\", \"your\", \"knowledge\", \",\", \"Q\", \"&amp;\", \"A\", \"-\", \"style\")\n</code></pre>\n\n<p>Is there a way to do this beside looping over the text character by character?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1489776612, "post_id": 42864411, "comment_id": 72836432, "body": "This is about the one of <b>most</b> important aspects of perl called <b>context</b>. If you could obtain a book: <i>Learning perl (6th edition)</i> read chapter starting on page 55: called as <i>Scalar and List Context</i>."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "edited": false, "score": 0, "creation_date": 1489842903, "post_id": 42864524, "comment_id": 72853933, "body": "this is clear now.. thanks"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1489775257, "last_edit_date": 1489775257, "creation_date": 1489774436, "answer_id": 42864524, "question_id": 42864411, "link": "https://stackoverflow.com/questions/42864411/sometime-we-declare-scalar-variable-with-in-parenthesis-can-someone-let-me-know/42864524#42864524", "title": "Sometime we declare scalar variable with in parenthesis, can someone let me know what does it mean?", "body": "<p>It forces the right operand of the assignment to be evaluated in list context. It's useless in your example (because <code>10</code> doesn't care about context), but it matters in other situations.</p>\n\n<pre><code>my @a = qw( a b c );\n\nmy $count = @a;           # 3\nmy ($first_val) = @a;     # a\n</code></pre>\n\n<p>For details, see <a href=\"http://www.perlmonks.org/?node_id=790129\" rel=\"nofollow noreferrer\">Mini-Tutorial: Scalar vs List Assignment Operator</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 14762, "user_id": 282475, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/OZWIJ.jpg?s=128&g=1", "display_name": "shaneburgess", "link": "https://stackoverflow.com/users/282475/shaneburgess"}, "is_accepted": false, "score": 2, "last_activity_date": 1489775564, "creation_date": 1489775564, "answer_id": 42864824, "question_id": 42864411, "link": "https://stackoverflow.com/questions/42864411/sometime-we-declare-scalar-variable-with-in-parenthesis-can-someone-let-me-know/42864824#42864824", "title": "Sometime we declare scalar variable with in parenthesis, can someone let me know what does it mean?", "body": "<p>There are a few different uses for this. One that is pretty common is to declare multiple vars in one line.</p>\n\n<pre><code>my ($a, $b, $c);\n</code></pre>\n\n<p>You can also use it to assign vars to array index values</p>\n\n<pre><code>my ($a, $b, $c) = @letters\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489776736, "post_id": 42865102, "comment_id": 72836511, "body": "@ikegami it is under <code>use strict</code> if <code>$bar</code> has not been declared before. It also <a href=\"http://perldoc.perl.org/perldiag.html#Parentheses-missing-around-%22%25s%22-list\" rel=\"nofollow noreferrer\">throws a warning</a> under <code>use warnings</code> about missing parenthesis."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489776997, "post_id": 42865102, "comment_id": 72836660, "body": "@ikegami see the update. that should be better. I&#39;m getting the warning in 5.20.1, and it&#39;s still in perldiag in 5.24.1"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1489776970, "last_edit_date": 1489776970, "creation_date": 1489776535, "answer_id": 42865102, "question_id": 42864411, "link": "https://stackoverflow.com/questions/42864411/sometime-we-declare-scalar-variable-with-in-parenthesis-can-someone-let-me-know/42865102#42865102", "title": "Sometime we declare scalar variable with in parenthesis, can someone let me know what does it mean?", "body": "<p>In addition to the two existing answers, it's also worth noting that <code>my</code> is a very few case of a Perl keyword that needs parenthesis in some cases, just like <code>if</code> and <code>for</code> do.</p>\n\n<p>You need the parens if you want to declare more than one variable at the same time.</p>\n\n<pre><code>my $foo, $bar; # only declares $foo, will fail under strict if $bar is not there\nmy ( $foo, $bar); # works\n</code></pre>\n\n<p>Using it with parenthesis is also useful if you want assign the return values of a function to new variables, but you don't care about some of them.</p>\n\n<pre><code>my ( undef, $min, $hour) = localtime;\n</code></pre>\n\n<p>In this example with <a href=\"http://perldoc.perl.org/functions/localtime.html\" rel=\"nofollow noreferrer\"><code>localtime</code></a>, the first return value <em>seconds</em> is ignored. All the other values (<code>$mday,$mon,$year,$wday,$yday,$isdst</code>) are also ignored, because we never assign them.</p>\n"}], "owner": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "closed_date": 1489777580, "answer_count": 3, "score": 3, "last_activity_date": 1489776970, "creation_date": 1489774065, "question_id": 42864411, "link": "https://stackoverflow.com/questions/42864411/sometime-we-declare-scalar-variable-with-in-parenthesis-can-someone-let-me-know", "closed_reason": "Duplicate", "title": "Sometime we declare scalar variable with in parenthesis, can someone let me know what does it mean?", "body": "<p>when we declare a scalar in parenthesis in Perl what does it mean actually?</p>\n\n<p>Example:</p>\n\n<pre><code>#!/usr/bin/perl\nmy ($x)=10;\nprint \"$x\";\n</code></pre>\n"}, {"tags": ["html", "perl", "email", "amazon-web-services", "amazon-ses"], "comments": [{"owner": {"reputation": 71156, "user_id": 1190388, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5391819cc4abe0cb43587c9ef1808dbd?s=128&d=identicon&r=PG", "display_name": "hjpotter92", "link": "https://stackoverflow.com/users/1190388/hjpotter92"}, "edited": false, "score": 2, "creation_date": 1489772978, "post_id": 42863791, "comment_id": 72834289, "body": "Try generating a MIME object?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1489836835, "post_id": 42863791, "comment_id": 72852173, "body": "Compare the source of a successful email and an unsuccessful one."}], "owner": {"reputation": 1561, "user_id": 1447507, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/f14xA.jpg?s=128&g=1", "display_name": "Srihari Karanth", "link": "https://stackoverflow.com/users/1447507/srihari-karanth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 362, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1489808075, "creation_date": 1489771794, "last_edit_date": 1489808075, "question_id": 42863791, "link": "https://stackoverflow.com/questions/42863791/perl-sending-html-message-via-amazon-ses", "title": "Perl - Sending HTML message via Amazon SES", "body": "<p>Trying to send HTML message via Amazon SES, mail is getting delivered, but its not showing content like an HTML page but just plain text.</p>\n\n<p>This is the code:</p>\n\n<pre class=\"lang-pl prettyprint-override\"><code>use Net::AWS::SES;\nmy $htmlBody = qq~&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Title&lt;/title&gt;\n&lt;link rel='stylesheet' href='http://example.com/css/animatedButton.css'&gt;\n&lt;style&gt;\nhtml{\noverflow:hidden;\n}\n                        @import url(http://fonts.googleapis.com/css?family=Ubuntu:400,700);\n                        body {\n                                /* IE10 Consumer Preview */\nbackground-image: -ms-linear-gradient(bottom, #ffffff 0%, #e9f0f2 100%);\n\n/* Mozilla Firefox */\nbackground-image: -moz-linear-gradient(bottom, #ffffff 0%, #e9f0f2 100%);\n\n/* Opera */\nbackground-image: -o-linear-gradient(bottom, #ffffff 0%, #e9f0f2 100%);\n\n/* Webkit (Safari/Chrome 10) */\nbackground-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #ffffff), color-stop(1, #e9f0f2));\n\n/* Webkit (Chrome 11+) */\nbackground-image: -webkit-linear-gradient(bottom, #ffffff 0%, #e9f0f2 100%);\n\n/* W3C Markup, IE10 Release Preview */\nbackground-image: linear-gradient(to top, #ffffff 0%, #e9f0f2 100%);\n\n                                #background: #3F53C4 no-repeat center top;\n                                -webkit-background-size: cover;\n                                -moz-background-size: cover;\n                                background-size: cover;\n                        }\n&lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div class=\\\"wrapper\\\"&gt;\n        &lt;div style=\\\"text-align: right; margin-top:2px; margin-right:2px;\\\"&gt;&lt;img src=\\\"http://trackmyphones.com/ct/images/logos/celltracker.png\\\" width=\\\"50\\\" height=\\\"50\\\"/&gt;&lt;/div&gt;\n&lt;p&gt;\n&lt;div style=\\\"text-align: center; font-weight: bold;\\\"&gt;This is test msg from AWS SES&lt;/div&gt;\n&lt;/p&gt;\n&lt;div style=\\\"text-align: left; margin-left:5%;margin-right: 5%; margin-bottom:2%; padding-left:2%; padding-right:2%; padding-top:2%; padding-bottom: 2%; background-color:#fae3e3;\\\"&gt;\n&lt;p&gt;\nThis is test body\n&lt;/p&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n~;\n\nmy $ses = Net::AWS::SES-&gt;new(access_key =&gt; '...', secret_key =&gt; '...');\n\n    my $r = $ses-&gt;send(\n        From    =&gt; 'to@example.com',\n        To      =&gt; 'recepient@gmail.com',\n        Subject =&gt; 'Hello World from SES',\n        Body_html    =&gt; \"$htmlBody\",\n    );\n\n unless ( $r-&gt;is_success ) {\n        die \"Could not deliver the message: \" . $r-&gt;error_message;\n    }\n\n printf(\"Sent successfully. MessageID: %s\\n\", $r-&gt;message_id);\n</code></pre>\n\n<p>The above code returns success but mail received will not have the background color as set in the html.</p>\n\n<p>The same html mail works perfectly when sent via sendmail.</p>\n\n<p>Can anyone help me on what's missing?</p>\n\n<p>EDIT:</p>\n\n<p>Used the below MIME Type as well:</p>\n\n<pre><code>my $msg = MIME::Entity-&gt;build(\n        From    =&gt; 'to@example.com',\n        To      =&gt; 'from@gmail.com',\n        Subject =&gt; 'New Hello World from SES',\n        Data    =&gt; ' ',\n        Type    =&gt; 'text/html'\n    );\n\n    $msg-&gt;attach(\n        Data     =&gt; \"$mailContent\",\n        Type     =&gt; 'text/html'\n    );\n</code></pre>\n\n<p>The above also shows text and not html, however if i change Data to point to a file it shows properly but then i will have to write all mail to a file and then send mail to SES:</p>\n\n<pre><code> $msg-&gt;attach(\n        Path     =&gt; File::Spec-&gt;catfile(  'htmlContentMail.html' ),\n        Type     =&gt; 'text/html'\n    );\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489760089, "post_id": 42859745, "comment_id": 72825698, "body": "So your code works for the example you show, and you want help changing it so it works for an example you do not show. Please <a href=\"https://stackoverflow.com/posts/42859745/edit\">edit</a> and show the input that breaks your code."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489761277, "post_id": 42859745, "comment_id": 72826540, "body": "I have updated the question."}], "answers": [{"tags": [], "owner": {"reputation": 4183, "user_id": 7275984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xwrdn.jpg?s=128&g=1", "display_name": "m87", "link": "https://stackoverflow.com/users/7275984/m87"}, "is_accepted": false, "score": 1, "last_activity_date": 1489761254, "last_edit_date": 1489761254, "creation_date": 1489760658, "answer_id": 42860028, "question_id": 42859745, "link": "https://stackoverflow.com/questions/42859745/remove-initials-in-author-names-in-perl/42860028#42860028", "title": "Remove initials in Author names in perl", "body": "<p>The following <em>regex</em> should do it ...</p>\n\n<pre><code>(?:[A-Z]\\.){1,3},?\n</code></pre>\n\n<p>see <strong><a href=\"https://regex101.com/r/Bxa6Ma/3\" rel=\"nofollow noreferrer\">regex demo / explanation</a></strong></p>\n\n<p><strong>perl</strong> ( <a href=\"http://rextester.com/KDQ52538\" rel=\"nofollow noreferrer\">demo</a> )</p>\n\n<pre><code>$str = 'Bland-Hawthorn, J., van S\\\\\"{u}tterlin Breugel, W., Gillingham, P.R., \\\\&amp; Baldray, I.K.\nBettonvil, F.C.M., Hammerschlag, R.H., S\\\\\"{u}tterlin, P., et al.\nPuschmann, K.G., Kneer, F., Seelemann, T., \\\\&amp; Wittmann, A.D.\nRamsay, J.V., Norton, D.G., \\\\&amp; Mugridge, E.G.V.  \nRutten, R.J.  2007 ';\n$regex = qr/(?:[A-Z]\\.){1,3},?/p;\n$subst = '';\n$result = $str =~ s/$regex/$subst/rg;\nprint \"$result\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 3, "last_activity_date": 1489761155, "creation_date": 1489761155, "answer_id": 42860185, "question_id": 42859745, "link": "https://stackoverflow.com/questions/42859745/remove-initials-in-author-names-in-perl/42860185#42860185", "title": "Remove initials in Author names in perl", "body": "<p>The following script seems to work with your sample data:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy @surnames;\n\nwhile (my $authors = &lt;DATA&gt;) {\n    $authors =~ /\\S/ or last;\n    $authors =~ s/\\s+\\z//;\n    my @authors = split qr{\\.,\\s+(?:\\Q\\&amp;\\E\\s+)?}, $authors;\n    push @surnames, author_list_to_string( [ map /^([^,]+)/, @authors ] );\n}\n\nprint \"'$_'\\n\" for @surnames;\n\nsub author_list_to_string {\n    my $author_list = shift;\n\n    if ( $author_list-&gt;[-1] eq 'et al.' ) {\n        return join(', ', @$author_list);\n    }\n\n    if (@$author_list == 1) {\n        return $author_list-&gt;[0];\n    }\n\n    if (@$author_list == 2) {\n        return join(', \\&amp; ', @$author_list);\n    }\n\n    return join(', \\&amp; ',\n        join(', ', @{$author_list}[0 .. ($#$author_list - 1)]),\n        $author_list-&gt;[-1]\n    );\n}\n\n__DATA__\nBland-Hawthorn, J., van S\\\"{u}tterlin Breugel, W., Gillingham, P.R., \\&amp; Baldray, I.K.\nBettonvil, F.C.M., Hammerschlag, R.H., S\\\"{u}tterlin, P., et al.\nPuschmann, K.G., Kneer, F., Seelemann, T., \\&amp; Wittmann, A.D.\nRamsay, J.V., Norton, D.G., \\&amp; Mugridge, E.G.V.\nRutten, R.J.  2007\n</code></pre>\n\n<p>If your needs are more complicated, you may be able to benefit from using <a href=\"https://metacpan.org/pod/Lingua::EN::NameParse\" rel=\"nofollow noreferrer\">Lingua::EN::NameParse</a>.</p>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1489761254, "creation_date": 1489759832, "last_edit_date": 1489760511, "question_id": 42859745, "link": "https://stackoverflow.com/questions/42859745/remove-initials-in-author-names-in-perl", "title": "Remove initials in Author names in perl", "body": "<p>I want to remove only initials from the list of names:</p>\n\n<p>Input:</p>\n\n<pre><code>Bland-Hawthorn, J., van S\\\"{u}tterlin Breugel, W., Gillingham, P.R., \\&amp; Baldray, I.K.\nBettonvil, F.C.M., Hammerschlag, R.H., S\\\"{u}tterlin, P., et al.\nPuschmann, K.G., Kneer, F., Seelemann, T., \\&amp; Wittmann, A.D.\nRamsay, J.V., Norton, D.G., \\&amp; Mugridge, E.G.V.  \nRutten, R.J.  2007 \n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>Bland-Hawthorn, van S\\\"{u}tterlin Breugel, Gillingham, \\&amp; Baldray,\nBettonvil, Hammerschlag, S\\\"{u}tterlin, et al.\nPuschmann, Kneer, Seelemann, \\&amp; Wittmann\nRamsay, Norton, \\&amp; Mugridge\nRutten\n</code></pre>\n\n<p>My Regex:</p>\n\n<pre><code>$str=~s/[^A-Z]([A-Z])\\.?\\s+/ /g for(0..5);\n$str=~s/\\s([A-Z])\\.([A-Z])\\.?\\,?/ /g;\n$str=~s/\\,\\s*([A-Z])\\.\\,/,/g; \n</code></pre>\n\n<p>I thought there a different way to achieve the output. Anyhow my regex is a very low rank to get the output.</p>\n\n<p>Anyone could help me to find a module or else something in different regex patterns on complexity names if we found like <code>de van der</code>.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl", "ssh", "blocking"], "comments": [{"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1489779598, "post_id": 42858958, "comment_id": 72838024, "body": "If you use <code>shell</code> then you have to &quot;talk&quot; to the remote shell. It doesn&#39;t get stuck, it is just there waiting for you to enter more commands."}], "answers": [{"comments": [{"owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "edited": false, "score": 0, "creation_date": 1489767871, "post_id": 42862114, "comment_id": 72831220, "body": "Using exec I can execute only one command. As per my requirement I need to read multiple commands. Can you please help."}, {"owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "reply_to_user": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "edited": false, "score": 0, "creation_date": 1489782720, "post_id": 42862114, "comment_id": 72839532, "body": "Unfortunately no, because I&#39;ve got an <a href=\"https://github.com/Juniper/netconf-perl/issues/29\" rel=\"nofollow noreferrer\">issue</a> related to perl Net::SS2 as well and switched to <a href=\"https://github.com/ncclient/ncclient\" rel=\"nofollow noreferrer\">ncclient</a>"}], "tags": [], "owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "is_accepted": false, "score": 0, "last_activity_date": 1489766488, "creation_date": 1489766488, "answer_id": 42862114, "question_id": 42858958, "link": "https://stackoverflow.com/questions/42858958/unable-to-get-output-from-remote-device-using-netssh2/42862114#42862114", "title": "Unable to get output from remote Device using Net::SSH2", "body": "<p>Maybe <a href=\"https://metacpan.org/pod/Net::SSH2#debug-(-state-)\" rel=\"nofollow noreferrer\">debug</a> could help you by troubleshooting. If there is no particular reason why you are using <code>shell</code> try to replace it by <code>exec</code>. You could adopt this <a href=\"https://github.com/rkitover/net-ssh2/blob/master/example/read.pl#L43\" rel=\"nofollow noreferrer\">example</a>.</p>\n\n<p><code>use warnings</code> is also always useful.</p>\n"}], "owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489766488, "creation_date": 1489757730, "question_id": 42858958, "link": "https://stackoverflow.com/questions/42858958/unable-to-get-output-from-remote-device-using-netssh2", "title": "Unable to get output from remote Device using Net::SSH2", "body": "<p>I am trying to connect to a remote device through Net::SSH2. If I am using $channel->blocking(0) method, then I am not getting any output from the device even if the connection and authentication is successful. If I dont use $channel->blocking(0), then I am getting the output but the prompt keeps on blinking, in the sense the the program gets stuck.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>use Net::SSH2;\nuse strict;\n\n$ssh = Net::SSH2-&gt;new()\n\n$ssh-&gt;connect('xx.xx.xx.xx'))\n\n$ssh-&gt;auth(username =&gt; 'xxxx', password =&gt; 'xxxx'))\n\nmy  $channel = $ssh-&gt;channel() or do { print\" [LOG ERROR]: Failed to create channel. Exiting ...\\n\"};\n\n$channel-&gt;blocking(0);\n\n$channel-&gt;shell() ;\n\nprint $channel \"show status \\n\";\n\nwhile(&lt;$channel&gt;)\n  {\n     print $_;\n  }\n\n$channel-&gt;close(); \n\n$ssh-&gt;disconnect();\n</code></pre>\n\n<p>can somebody please help.</p>\n"}, {"tags": ["xml", "perl", "xml-parsing"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1489757213, "post_id": 42858530, "comment_id": 72823593, "body": "Do those entries in your list actually correlate?  They don&#39;t have the same names or IPs?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1489757443, "post_id": 42858530, "comment_id": 72823760, "body": "Also -the first &#39;file&#39; appears to be two separate XML documents. Is that deliberate?"}, {"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1489759150, "post_id": 42858530, "comment_id": 72825025, "body": "no, it should not be two separate XML documents, was a mistake"}, {"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1489759368, "post_id": 42858530, "comment_id": 72825197, "body": "Yes, they don&#39;t have the same names or IPs, it is just example...but at this time it is about just IPs, because my &#39;file2&#39; contains just IPs and no names"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1489758025, "creation_date": 1489758025, "answer_id": 42859069, "question_id": 42858530, "link": "https://stackoverflow.com/questions/42858530/to-compare-tags-with-the-same-name-in-xml-file-with-other-tag-in-other-xml-file/42859069#42859069", "title": "To compare tags with the same name in xml file with other tag in other xml file", "body": "<p>OK, so the thing here is <code>get_xpath</code> locates nodes matching a certain criteria.</p>\n\n<p>If you've definitely got stuff in the same order, you can just get two lists of <code>get_xpath</code> responses and iterate them. </p>\n\n<p>But I don't think that's a safe assumption in <code>XML</code> - a device might be missing. </p>\n\n<p>So instead, you need to write a <code>search</code> - <code>get_xpath</code> can do this too. </p>\n\n<p>There's a couple of problems with your input though - <code>FILE1.xml</code> you've got there, is actually two separate XML documents. There's no <code>root</code> tag between both, and there's an <code>&lt;?xml</code> declaration twice. </p>\n\n<p>So you need to transform it slightly to make  it a single doc (or parse both seperately). Likewise with <code>FILE2.xml</code> - you've got two <code>&lt;/devices&gt;</code> tags at the end (one should be <code>&lt;/device&gt;</code>). Check you're using valid XML, because all sorts of things break if you don't:</p>\n\n<p>However for illustration purposes, I'll assume they're a single document:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse XML::Twig;\n\nmy $xml1 = XML::Twig-&gt;new-&gt;parsefile('FILE1.xml');\nmy $xml2 = XML::Twig-&gt;new-&gt;parsefile('FILE2.xml');\n\nforeach my $device ( $xml2-&gt;get_xpath('//device') ) {\n   my $ip_addr = $device-&gt;first_child_text('ipAddress');\n   print \"Looking for $ip_addr\\n\";\n   if ( my $search = $xml1-&gt;get_xpath(\"//ipAddress[string()=\\\"$ip_addr\\\"]\") )\n   {\n      print \"Found: \", $search-&gt;parent-&gt;first_child_text('deviceName'), \"\\n\";\n   }\n   else {\n      print \"Didn't find match for: \",\n        $device-&gt;get_xpath( './/name', 0 )-&gt;text, \"\\n\";\n   }\n}\n</code></pre>\n\n<p>Now, there's none found here, because your IPs don't match in your two files. </p>\n\n<p><code>XML::Twig</code> has limitations in what it can do with <code>xpath</code> so it's worth checking the <a href=\"http://xmltwig.org/xmltwig/quick_ref.html\" rel=\"nofollow noreferrer\">quick reference guide</a> (this is where XML::LibXML` comes into it's own - it's more fully featured) </p>\n"}], "owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 42859069, "answer_count": 1, "score": 0, "last_activity_date": 1489759058, "creation_date": 1489756505, "last_edit_date": 1489759058, "question_id": 42858530, "link": "https://stackoverflow.com/questions/42858530/to-compare-tags-with-the-same-name-in-xml-file-with-other-tag-in-other-xml-file", "title": "To compare tags with the same name in xml file with other tag in other xml file", "body": "<p>I have two XML files. At the first one I have some devices those are already in the DB (tags <strong>ipAddress</strong> are important).\nSecond XML file contains device/devices those should be added if they are not at the DB (Post request).</p>\n\n<p>I have already code for comparing two XML file if they have just one device (one tag with ipAddress ).</p>\n\n<p>FILE1(contains 30 devices. I added just 2 for example).</p>\n\n<pre><code>&lt;?xml version=\"1.0\" ?&gt;\n &lt;queryResponse last=\"34\" first=\"0\" count=\"35\" type=\"Devices\" responseType=\"listEntityInstances\" requestUrl=\"https://hostname/webacs/api/v1/data/Devices?.full=true\" rootUrl=\"https://hostname/webacs/api/v1/data\"&gt;\n  &lt;entity dtoType=\"devicesDTO\" type=\"Devices\" url=\"https://hostname/webacs/api/v1/data/Devices/200\"&gt;\n     &lt;devicesDTO displayName=\"201200\" id=\"200\"&gt;\n       &lt;deviceName&gt;NEW&lt;/deviceName&gt;\n       &lt;deviceType&gt;Cisco Switch&lt;/deviceType&gt;\n       &lt;ipAddress&gt;10.66.12.128&lt;/ipAddress&gt;\n     &lt;/devicesDTO&gt;\n   &lt;/entity&gt;\n   &lt;entity dtoType=\"devicesDTO\" type=\"Devices\" url=\"https://hostname/webacs/api/v1/data/Devices/201\"&gt;\n     &lt;devicesDTO displayName=\"201201\" id=\"201\"&gt;\n       &lt;deviceName&gt;NEW-SWW&lt;/deviceName&gt;\n       &lt;deviceType&gt;Cisco Switch&lt;/deviceType&gt;\n       &lt;ipAddress&gt;10.66.12.127&lt;/ipAddress&gt;\n     &lt;/devicesDTO&gt;\n   &lt;/entity&gt;\n &lt;/queryResponse&gt;\n</code></pre>\n\n<p>FILE2 (it could be one or more devices)</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n  &lt;devicesImport&gt;\n    &lt;devices&gt;\n      &lt;device&gt;\n         &lt;ipAddress&gt;10.66.0.8&lt;/ipAddress&gt;\n         &lt;networkMask&gt;24&lt;/networkMask&gt;\n        &lt;snmpWriteCommunity&gt;labor&lt;/snmpWriteCommunity&gt;\n      &lt;udfs&gt;\n         &lt;udf&gt;\n            &lt;name&gt;LaborTest&lt;/name&gt;\n         &lt;/udf&gt;\n      &lt;/udfs&gt;\n   &lt;/device&gt;\n  &lt;/devices&gt;\n  &lt;/devicesImport&gt;\n   &lt;devicesImport&gt;\n    &lt;devices&gt;\n      &lt;device&gt;\n         &lt;ipAddress&gt;10.66.0.9&lt;/ipAddress&gt;\n         &lt;networkMask&gt;24&lt;/networkMask&gt;\n        &lt;snmpWriteCommunity&gt;labor&lt;/snmpWriteCommunity&gt;\n      &lt;udfs&gt;\n         &lt;udf&gt;\n            &lt;name&gt;LaborTest&lt;/name&gt;\n         &lt;/udf&gt;\n      &lt;/udfs&gt;\n   &lt;/devices&gt;\n  &lt;/devices&gt;\n &lt;/devicesImport&gt;\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse XML::Twig;\n\n\n my $xml1 = XML::Twig-&gt;new-&gt;parsefile('FILE1.xml');\n my $xml2 = XML::Twig-&gt;new-&gt;parsefile('FILE2.xml');\n\n #$xml2-&gt;findnodes( './ipAddress/*'); # I tried to cover all ipAddress from FILE1\n\n  #Next Try to do it other way\n  #foreach $xml1-&gt;get_xpath( '//ipAddress', 0 )-&gt;text {\n  #foreach $xml2-&gt;get_xpath( '//ipAddress', 0 )-&gt;text {\n\n\n    # I compare here just one tag from both files (it works if my file contains just one device)\n    if ( $xml1-&gt;get_xpath( '//ipAddress', 0 )-&gt;text\n    eq $xml2-&gt;get_xpath( '//ipAddress', 0 )-&gt;text ) \n\n   {\n     print \"IP matches\\n\";\n   }\n</code></pre>\n\n<p>I also tried </p>\n\n<pre><code>    if (( $xml1-&gt;get_xpath( '//ipAddress', 0 )-&gt;text\n    eq $xml2-&gt;get_xpath( '//ipAddress', 0 )-&gt;text ) \n    for $xml2-&gt;findnodes  ('//ipAddress'));\n</code></pre>\n\n<p>but it doesn't works.</p>\n"}, {"tags": ["perl", "sliding-window"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1489760233, "post_id": 42857380, "comment_id": 72825796, "body": "A good way to clarify a question like this is to give sample input and output."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7726986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb7136bf2bbed48cce4bfa39ebe77e8?s=128&d=identicon&r=PG&f=1", "display_name": "kernel-trick", "link": "https://stackoverflow.com/users/7726986/kernel-trick"}, "edited": false, "score": 0, "creation_date": 1489758880, "post_id": 42858147, "comment_id": 72824836, "body": "Thanks for the reply. Basically I need to print something like this. 1: SMA 2: SMA 3: SMA .... 20: SMA   and then start again at 1: SMA.  The window size would be 20 but the sequence would count is also 20 ."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 21, "user_id": 7726986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb7136bf2bbed48cce4bfa39ebe77e8?s=128&d=identicon&r=PG&f=1", "display_name": "kernel-trick", "link": "https://stackoverflow.com/users/7726986/kernel-trick"}, "edited": false, "score": 1, "creation_date": 1489759577, "post_id": 42858147, "comment_id": 72825334, "body": "You think you&#39;re explaining things, but you&#39;re really not :-)"}, {"owner": {"reputation": 21, "user_id": 7726986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb7136bf2bbed48cce4bfa39ebe77e8?s=128&d=identicon&r=PG&f=1", "display_name": "kernel-trick", "link": "https://stackoverflow.com/users/7726986/kernel-trick"}, "edited": false, "score": 0, "creation_date": 1489760517, "post_id": 42858147, "comment_id": 72826005, "body": "Let me see if I can explain better.... You have a array of 100000 numbers. I know you know what a sliding window is.... So while your&#39;e going through your array with your sliding window, you&#39;re getting and printing the SMA of the data in each window. I know how to do that. What I can&#39;t wrap my head around is how to print the SMA of each window and numbering it up to a value, lets say 50."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 21, "user_id": 7726986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb7136bf2bbed48cce4bfa39ebe77e8?s=128&d=identicon&r=PG&f=1", "display_name": "kernel-trick", "link": "https://stackoverflow.com/users/7726986/kernel-trick"}, "edited": false, "score": 1, "creation_date": 1489760797, "post_id": 42858147, "comment_id": 72826213, "body": "You&#39;re just repeating yourself with more words. Perhaps <a href=\"http://stackoverflow.com/posts/42857380/edit\">edit your question</a> to add an example. And explain what an &quot;SMA&quot; is."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1489761314, "post_id": 42858147, "comment_id": 72826570, "body": "@DaveCross I think he means &quot;Simple Moving Average&quot; ... I think the OP is looking for the modulus operator."}, {"owner": {"reputation": 21, "user_id": 7726986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb7136bf2bbed48cce4bfa39ebe77e8?s=128&d=identicon&r=PG&f=1", "display_name": "kernel-trick", "link": "https://stackoverflow.com/users/7726986/kernel-trick"}, "edited": false, "score": 0, "creation_date": 1489761351, "post_id": 42858147, "comment_id": 72826600, "body": "I just figured it out with your help. Thanks for your help. <code>#!&#47;usr&#47;bin&#47;perl  @data=(1..1000); $count=1; foreach (0 .. $#data - 20) {   my @window = @data[$_ .. $_ + 20];   $total += $_ for (@window);   $sma=$total &#47; 20;   print &quot;$count:$sma &quot;;   if($count % 20 == 0) { $count=1; print &quot;\\n&quot;;} else {$count++;} } </code>"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 21, "user_id": 7726986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb7136bf2bbed48cce4bfa39ebe77e8?s=128&d=identicon&r=PG&f=1", "display_name": "kernel-trick", "link": "https://stackoverflow.com/users/7726986/kernel-trick"}, "edited": false, "score": 3, "creation_date": 1489761639, "post_id": 42858147, "comment_id": 72826804, "body": "@kernel-trick Stop stuffing stuff in the comments. Edit and update information in your question."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 21, "user_id": 7726986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb7136bf2bbed48cce4bfa39ebe77e8?s=128&d=identicon&r=PG&f=1", "display_name": "kernel-trick", "link": "https://stackoverflow.com/users/7726986/kernel-trick"}, "edited": false, "score": 1, "creation_date": 1489778547, "post_id": 42858147, "comment_id": 72837478, "body": "@kernel-trick  If you&#39;ve wrapped it up please see <a href=\"http://stackoverflow.com/help/someone-answers\"><code>What should I do when someone answers my question?</code></a> I suggest to write questions more carefully in the future.  Think about what <i>other</i> people see when they read them.  Appreciate that you are getting helpf from very experienced and good people and if they don&#39;t have to scratch their heads over the question they&#39;ll be able to answer it fully right away."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1489755320, "creation_date": 1489755320, "answer_id": 42858147, "question_id": 42857380, "link": "https://stackoverflow.com/questions/42857380/having-a-hard-time-with-a-sliding-window-in-perl/42858147#42858147", "title": "Having a hard time with a sliding window in perl", "body": "<p>It's not really clear what you're asking, but I think I'd start like this:</p>\n\n<pre><code>foreach (0 .. $#numbers - 20) {\n  my @window = @numbers[$_ .. $_ + 20];\n  # Do something with @window\n  ...\n}\n</code></pre>\n\n<p>Or this, which doesn't reassign the whole array each time:</p>\n\n<pre><code>my @window = @numbers[0 .. 19];\n\nforeach (20 .. $#numbers) {\n  # Do something with @window.\n  ...\n\n  # Then get the next version of @window ready\n  shift @window;\n  push @window, $numbers[$_];\n}\n</code></pre>\n\n<p>A couple of notes:</p>\n\n<ol>\n<li>The C-style <code>for</code> loop is almost always the wrong approach.</li>\n<li>Variables <code>$a</code> and <code>$b</code> have special meanings to Perl. You shouldn't use them in examples.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 1, "last_activity_date": 1489764300, "last_edit_date": 1489764300, "creation_date": 1489761551, "answer_id": 42860326, "question_id": 42857380, "link": "https://stackoverflow.com/questions/42857380/having-a-hard-time-with-a-sliding-window-in-perl/42860326#42860326", "title": "Having a hard time with a sliding window in perl", "body": "<p>Reading between the lines, I am going to guess that you are looking for the modulus operator.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse List::Util qw( sum );\n\nuse constant WINDOW_SIZE =&gt; 20;\n\nmy @data = (1 .. 10_000);\nmy @window = @data[0 .. (WINDOW_SIZE - 1)];\nmy $n = 1;\n\nfor my $i (WINDOW_SIZE .. $#data) {\n    my $avg = sum( @window ) / @window;\n    printf \"%d: %.3f\\n\", ($n % WINDOW_SIZE) + 1, $avg;\n    shift @window;\n    push @window, $data[$i];\n    ++$n;\n}\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre>1: 10.500       \n2: 11.500       \n3: 12.500       \n4: 13.500       \n5: 14.500       \n6: 15.500       \n7: 16.500       \n8: 17.500       \n9: 18.500       \n10: 19.500      \n11: 20.500      \n12: 21.500      \n13: 22.500      \n14: 23.500      \n15: 24.500      \n16: 25.500      \n17: 26.500      \n18: 27.500      \n19: 28.500      \n20: 29.500      \n1: 30.500       \n2: 31.500       \n3: 32.500\n...</pre>\n"}], "owner": {"reputation": 21, "user_id": 7726986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb7136bf2bbed48cce4bfa39ebe77e8?s=128&d=identicon&r=PG&f=1", "display_name": "kernel-trick", "link": "https://stackoverflow.com/users/7726986/kernel-trick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1489764300, "creation_date": 1489753143, "question_id": 42857380, "link": "https://stackoverflow.com/questions/42857380/having-a-hard-time-with-a-sliding-window-in-perl", "title": "Having a hard time with a sliding window in perl", "body": "<p>I'm trying to do a sliding window in perl over a large array and I'm having trouble. The details are that I need a window of size 20, then get the average (SMA) of the 20 elements, then print out the SMA numbered 1 to 20 and then start at 1 again.....I started with something like this but I'm having a hard time wrapping my head around how I'm going to do it.</p>\n\n<pre><code>   for($a=0;$a &lt; $#numbers-$window;$a++) {\n\n\n            $c=1;\n            for($b=$a;$b &lt; $a+$window;$b++) {\n\n            }\n    }\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1489751383, "post_id": 42856615, "comment_id": 72819507, "body": "<code>until</code> =&gt; <code>if</code> for starters."}], "answers": [{"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1489753070, "post_id": 42857182, "comment_id": 72820680, "body": "Maybe <code>any</code> would be cleaner than <code>(grep ... ) &gt; 0</code> ? And you left a <code>@pretend_ARGV</code> in the first version, I&#39;m not sure if it&#39;s a left over of a test or if it&#39;s on purpose."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1489753361, "post_id": 42857182, "comment_id": 72820878, "body": "Possibly would be, yes. And yes, I used <code>@pretend_ARGV</code> for testing :)"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1489753340, "last_edit_date": 1489753340, "creation_date": 1489752522, "answer_id": 42857182, "question_id": 42856615, "link": "https://stackoverflow.com/questions/42856615/perl-program-to-validate-user-input-by-comparing-existing-array/42857182#42857182", "title": "perl program to validate user input by comparing existing array", "body": "<p>Too complicated. Turn your 'valid' args into a hash, then use <code>grep</code>:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy @allowed = qw/cat rat mat sat/;\nmy %is_allowed = map { $_ =&gt; 1 } @allowed; \n\nforeach my $arg ( grep { not $is_allowed{$_} } @ARGV ) { \n   print \"$arg is not valid\\n\";\n}\n</code></pre>\n\n<p>You can set a flag in that foreach loop if you like, if you want to proceed. Or just use <code>grep</code> in a scalar context:</p>\n\n<pre><code>if ((grep { not $is_allowed{$_} } @ARGV) &gt; 0 ) { \n   die \"invalid args found, exiting\\n\"\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "is_accepted": true, "score": 0, "last_activity_date": 1489752561, "creation_date": 1489752561, "answer_id": 42857195, "question_id": 42856615, "link": "https://stackoverflow.com/questions/42856615/perl-program-to-validate-user-input-by-comparing-existing-array/42857195#42857195", "title": "perl program to validate user input by comparing existing array", "body": "<p>Well, a short search of this site would lead me to believe you are over-complicating things:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy (@not,@arr);\n@arr=qw/cat rat mat sat/;\n\nforeach (@ARGV)\n{\n\n        push(@not,\"$_\") unless ( \"$_\" ~~ @arr );\n}\nprint \"@not\\n\";\n</code></pre>\n\n<p>The smart match operator (~~) still comes back as 'experimental' on my 5.24 version of bash, but it would seem it has been around since at least 5.10.</p>\n\n<p>You may also want to add some kind of test at the end to check if @not has anything in it as all words may have been found.  You could re-use your flag :)</p>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1489752686, "creation_date": 1489752686, "answer_id": 42857239, "question_id": 42856615, "link": "https://stackoverflow.com/questions/42856615/perl-program-to-validate-user-input-by-comparing-existing-array/42857239#42857239", "title": "perl program to validate user input by comparing existing array", "body": "<p>Put the valid arguments into a hash <code>%valid</code> (instead of an array <code>@arr</code>). Then you can do:</p>\n\n<pre><code>for (@ARGV) {\n    push @not, $_ if !exists $valid{$_};\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1489753401, "post_id": 42857419, "comment_id": 72820913, "body": "I&#39;d stick a <code>1</code> in that map, so you can check for &#39;truth&#39; as well as &#39;exists&#39;."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1489753555, "post_id": 42857419, "comment_id": 72821018, "body": "@Sobrique Yikes! but as you seen, for the beginners like me, this is a bit more expressive. Ofc, youre right! :)"}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 0, "last_activity_date": 1489753266, "creation_date": 1489753266, "answer_id": 42857419, "question_id": 42856615, "link": "https://stackoverflow.com/questions/42856615/perl-program-to-validate-user-input-by-comparing-existing-array/42857419#42857419", "title": "perl program to validate user input by comparing existing array", "body": "<p><a href=\"https://en.wikipedia.org/wiki/There%27s_more_than_one_way_to_do_it\" rel=\"nofollow noreferrer\">TIMTOWDI</a></p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @arr=qw(cat rat mat sat);\nmy $ok = { map{ $_ =&gt; 0 } @arr};\nmy $wrong;\nexists $ok-&gt;{$_} ? $ok-&gt;{$_}++ : $wrong-&gt;{$_}++ for @ARGV;\n\nprint \"OK $_ : $ok-&gt;{$_}\\n\" for @arr;\nprint \"NO $_ : $wrong-&gt;{$_}\\n\" for (sort keys %$wrong);\n</code></pre>\n\n<p>using</p>\n\n<pre><code>perl arg.pl bat cat ded rat mat foo bar foo cat\n</code></pre>\n\n<p>output</p>\n\n<pre><code>OK cat : 2\nOK rat : 1\nOK mat : 1\nOK sat : 0\nNO bar : 1\nNO bat : 1\nNO ded : 1\nNO foo : 2\n</code></pre>\n"}], "owner": {"reputation": 68, "user_id": 6164487, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c14618116ef81fd1e1ccf70d8eb9c522?s=128&d=identicon&r=PG&f=1", "display_name": "k189", "link": "https://stackoverflow.com/users/6164487/k189"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 1, "accepted_answer_id": 42857195, "answer_count": 4, "score": 0, "last_activity_date": 1489753340, "creation_date": 1489750839, "question_id": 42856615, "link": "https://stackoverflow.com/questions/42856615/perl-program-to-validate-user-input-by-comparing-existing-array", "title": "perl program to validate user input by comparing existing array", "body": "<p>Im trying to write a Perl script to validate user input.\nIf the user provide wrong value then it should show which is wrong value among the provided user input.</p>\n\n<p>Example:</p>\n\n<p>I have any array <code>@arr=qw/cat rat mat sat/;</code></p>\n\n<p>If user provide the input as <code>perl validate_user_input.pl cat sot bat</code> then, my script should show <code>sot bat</code> is wrong inputs to the script.</p>\n\n<p>below is the script im trying . </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy (@not,@arr,$flag);\n@arr=qw/cat rat mat sat/;\nmy $count=@arr;\nforeach (@ARGV)\n{\n         my $i=1;\n        foreach my $existing (@arr)\n        {\n\n                until ( \"$existing\" eq \"$_\" )\n                {\n\n                        $flag = 1;\n                        $i++;\n                        last;\n                }\n\n        }\n\n        print \"$i\\n\";\n        if ( ($count==$i) &amp;&amp; ($flag == 1))\n        {\n                push(@not,\"$_\");\n        }\n}\nprint \"@not\\n\";\n</code></pre>\n\n<p>Logic i tried to implement:</p>\n\n<p>Element in <code>@ARGV</code> will be checked against each element of <code>@arr</code>. If <code>$flag=1</code> and the iteration <code>$i</code> is equal to number of elements in <code>@arr</code> (i.e checked against all the elements in <code>@arr</code>) then input not found in <code>@arr</code>.</p>\n\n<p>Can anyone tell me what need to be done for this script to work.</p>\n"}, {"tags": ["arrays", "perl", "sorting", "hash"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1489750274, "post_id": 42856045, "comment_id": 72818764, "body": "Could you provide a corresponding output example for the input example provided cos it&#39;s not clear what output you&#39;re expecting?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1489772089, "post_id": 42856045, "comment_id": 72833750, "body": "Re &quot;<i>I have an array with the following keys and values:</i>&quot;, That doesn&#39;t make sense. Array keys are numeric."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 7726700, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pTsf-p6FiYI/AAAAAAAAAAI/AAAAAAAAABM/36ebcNjyDuY/photo.jpg?sz=128", "display_name": "Viking", "link": "https://stackoverflow.com/users/7726700/viking"}, "edited": false, "score": 0, "creation_date": 1489752528, "post_id": 42856531, "comment_id": 72820300, "body": "What if the word are not atest btest, etc but let&#39;s say risk, test, total and so on... how would I have to change the m/test/ line so it works?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 73, "user_id": 7726700, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pTsf-p6FiYI/AAAAAAAAAAI/AAAAAAAAABM/36ebcNjyDuY/photo.jpg?sz=128", "display_name": "Viking", "link": "https://stackoverflow.com/users/7726700/viking"}, "edited": false, "score": 0, "creation_date": 1489752625, "post_id": 42856531, "comment_id": 72820379, "body": "the <code>m&#47;test</code> line is just to catch empty &#39;blocks&#39;, so any keyword. Commenting it out <i>should</i> work but you might get some &#39;null&#39; lines if you&#39;ve got anything else in your input file. Otherwise <code>m&#47;MyValStart&#47;</code> should do the trick"}, {"owner": {"reputation": 73, "user_id": 7726700, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pTsf-p6FiYI/AAAAAAAAAAI/AAAAAAAAABM/36ebcNjyDuY/photo.jpg?sz=128", "display_name": "Viking", "link": "https://stackoverflow.com/users/7726700/viking"}, "edited": false, "score": 0, "creation_date": 1489752741, "post_id": 42856531, "comment_id": 72820455, "body": "Thanks but I am getting Use of uninitialized value in join or string at scanner4.pl line 28, &lt;&gt; chunk 6. Not shure why"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 73, "user_id": 7726700, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pTsf-p6FiYI/AAAAAAAAAAI/AAAAAAAAABM/36ebcNjyDuY/photo.jpg?sz=128", "display_name": "Viking", "link": "https://stackoverflow.com/users/7726700/viking"}, "edited": false, "score": 0, "creation_date": 1489752931, "post_id": 42856531, "comment_id": 72820588, "body": "Probably means a row without all the values present, which will give that error. Check the <code>Dumper</code> output (or the printed output) to see if that&#39;s what you expect."}, {"owner": {"reputation": 73, "user_id": 7726700, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pTsf-p6FiYI/AAAAAAAAAAI/AAAAAAAAABM/36ebcNjyDuY/photo.jpg?sz=128", "display_name": "Viking", "link": "https://stackoverflow.com/users/7726700/viking"}, "edited": false, "score": 0, "creation_date": 1489753115, "post_id": 42856531, "comment_id": 72820714, "body": "some things are there others are not being read in the Dumpster"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 73, "user_id": 7726700, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pTsf-p6FiYI/AAAAAAAAAAI/AAAAAAAAABM/36ebcNjyDuY/photo.jpg?sz=128", "display_name": "Viking", "link": "https://stackoverflow.com/users/7726700/viking"}, "edited": false, "score": 0, "creation_date": 1489753503, "post_id": 42856531, "comment_id": 72820983, "body": "I can only answer based on the sample data that you&#39;ve given. Works in my test case though, so <i>shrug</i>. Maybe post the bits that aren&#39;t working in a new question?"}, {"owner": {"reputation": 73, "user_id": 7726700, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pTsf-p6FiYI/AAAAAAAAAAI/AAAAAAAAABM/36ebcNjyDuY/photo.jpg?sz=128", "display_name": "Viking", "link": "https://stackoverflow.com/users/7726700/viking"}, "edited": false, "score": 0, "creation_date": 1489753508, "post_id": 42856531, "comment_id": 72820987, "body": "the problem is, that some values expand over multiple rows and nee to be concatenated for the value in the csv"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 73, "user_id": 7726700, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pTsf-p6FiYI/AAAAAAAAAAI/AAAAAAAAABM/36ebcNjyDuY/photo.jpg?sz=128", "display_name": "Viking", "link": "https://stackoverflow.com/users/7726700/viking"}, "edited": false, "score": 0, "creation_date": 1489753620, "post_id": 42856531, "comment_id": 72821069, "body": "multiline regex matches are a thing too. You could quite easily match based on blank lines, or lines without <code>:</code> in them."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1489751290, "last_edit_date": 1489751290, "creation_date": 1489750654, "answer_id": 42856531, "question_id": 42856045, "link": "https://stackoverflow.com/questions/42856045/sorting-perl-arrays-to-fixed-order/42856531#42856531", "title": "Sorting perl arrays to fixed order", "body": "<p>If I'm reading your code correctly, you're doing this quite a hard way. I'd suggest instead that what you should be doing is reading and parsing your input into sensible data structures, and then outputting those in the desired format.</p>\n\n<p>As you have blocks of 'data' with key-value pairs, and you need to extract named values - an array of hashes would be the tool for the job. Read each 'chunk' into a hash, then insert that into an array. </p>\n\n<p>Then take that array of hashes, and use <a href=\"http://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow noreferrer\">hash slices</a> to extract the values you want - ordered by key. </p>\n\n<p>Something like this:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\n#read input data:\nmy @rows; \n\n#set record separator to 3 line feeds.     \nlocal $/ = \"\\n\\n\\n\";\nwhile ( &lt;&gt; ) {\n   next unless m/test/;\n   #map key-values out of this 'chunk'. \n   my %row = m/(\\w+):\\s*(\\S.*)/g; \n   push @rows, \\%row; \n}\n\n#print whole data structure for debugging:\nprint Dumper \\@rows;\n\n#define columns and ordering for output:\nmy @output_cols = qw ( atest ctest btest ftest gtest );\n\n#iterate rows\nforeach my $row ( @rows ) {\n    #print fields selected from output_cols. \n   #use a 'hash slice' - look it up in perl docs. \n   print join \";\", @{$row}{@output_cols},\"\\n\"\n}\n</code></pre>\n\n<p>This gives an output of </p>\n\n<pre><code>2;3;8;1;6;\n1;5;2;0;5;\n</code></pre>\n\n<p>We use the record separator <code>$/</code> to break our input into chunks that <em>aren't</em> the \"default\" of just linefeed. </p>\n\n<p>Which isn't quite the same as you asked, as there's no quotes. If you wanted that though, you could <code>map</code>:</p>\n\n<pre><code>print join \";\", (map { '\"'.$_.'\"' } @{$row}{@output_cols}),\"\\n\"\n</code></pre>\n\n<p>But I'm not sure that'd be necessary for most <code>csv</code> consumers. </p>\n"}], "owner": {"reputation": 73, "user_id": 7726700, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pTsf-p6FiYI/AAAAAAAAAAI/AAAAAAAAABM/36ebcNjyDuY/photo.jpg?sz=128", "display_name": "Viking", "link": "https://stackoverflow.com/users/7726700/viking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489751290, "creation_date": 1489749186, "question_id": 42856045, "link": "https://stackoverflow.com/questions/42856045/sorting-perl-arrays-to-fixed-order", "title": "Sorting perl arrays to fixed order", "body": "<p>HI I have an array with the following keys and values:</p>\n\n<pre><code> atest, 2\n ctest, 3\n btest, 8\n ftest, 1\n gtest, 6\n</code></pre>\n\n<p>and I parse them from a file into an array. Now I want to return them like CSV in that order every time. \nHowever I can't get this to work. </p>\n\n<p>Source:</p>\n\n<pre><code> #!/usr/bin/env perl\n use warnings;\n use strict;\n\n\n my @data;\n my %tags;\n my $cur_tag;\n my ($tag,$line);\n open (FILE, '&lt;', $ARGV[0]) or die \"Could not open file: $!\";\n while (&lt;FILE&gt;) {\nchomp;\nif (/^(MyValStart)/)\n    { push @data, {} }\nelsif (  ($tag,$line) = (/^\\s*(atest)\\s+(.+)$/)) {\n    $data[-1]{$tag} .= \" NEWLINE \" if exists $data[-1]{$tag};\n    $data[-1]{$tag} .= $line;\n    $tags{$tag}++;\n    $cur_tag = $tag;\n}\nelsif (  ($tag,$line) = (/^\\s*(ctest)\\S\\s+(.+)$/)) {\n\n    $data[-1]{$tag} .= \" NEWLINE \" if exists $data[-1]{$tag};\n    #print ($line,\"\\n\");\n    $data[-1]{$tag} .= $line;\n    $tags{$tag}++;\n    $cur_tag = $tag;\n}\nelsif (  ($tag,$line) = (/^\\s*(itest)\\S\\s+(.+)$/)) {\n\n    $data[-1]{$tag} .= \" NEWLINE \" if exists $data[-1]{$tag};\n    $data[-1]{$tag} .= $line;\n    $tags{$tag}++;\n    $cur_tag = $tag;\n}\nelsif (  ($tag,$line) = (/^\\s*(btest)\\S\\s+(.+)$/)) {\n\n    $data[-1]{$tag} .= \" NEWLINE \" if exists $data[-1]{$tag};\n    $data[-1]{$tag} .= $line;\n    $tags{$tag}++;\n    $cur_tag = $tag;\n}\nelsif (  ($tag,$line) = (/^\\s*(ytest)\\S\\s+(.+)$/)) {\n\n    $data[-1]{$tag} .= \" NEWLINE \" if exists $data[-1]{$tag};\n    $data[-1]{$tag} .= $line;\n    $tags{$tag}++;\n    $cur_tag = $tag;\n}\nelsif (  ($tag,$line) = (/^\\s*(ftest)\\S\\s+(.+)$/)) {\n\n    $data[-1]{$tag} .= \" NEWLINE \" if exists $data[-1]{$tag};\n    $data[-1]{$tag} .= $line;\n    $tags{$tag}++;\n    $cur_tag = $tag;\n}\nelsif (  ($tag,$line) = (/^\\s*(gtest)\\S\\s+(.+)$/)) {\n\n    $data[-1]{$tag} .= \" NEWLINE \" if exists $data[-1]{$tag};\n    $data[-1]{$tag} .= $line;\n    $tags{$tag}++;\n    $cur_tag = $tag;\n}\nelsif (  ($tag,$line) = (/^\\s*(utest)\\S\\s+(.+)$/)) {\n\n    $data[-1]{$tag} .= \" NEWLINE \" if exists $data[-1]{$tag};\n    $data[-1]{$tag} .= $line;\n    $tags{$tag}++;\n    $cur_tag = $tag;\n}\nelsif ($cur_tag) {\n    $data[-1]{$cur_tag} .= \" NEWLINE \".$_;\n}\n }\n\n use Text::CSV;\n my $csv = Text::CSV-&gt;new({binary=&gt;1,auto_diag=&gt;2,eol=&gt;\"\\n\",\nsep_char=&gt;\";\",always_quote=&gt;1,blank_is_undef=&gt;1});\n%tags=qw/atest ctest btest ftest gtest/;\n\n$csv-&gt;print(select, [%tags]);\nfor my $row (@data) {\nmy @vals = map { $row-&gt;{$_} } %tags;\n$csv-&gt;print(select, \\@vals);\n }\n</code></pre>\n\n<p>As from the source visible there are also things that I parse into the array that are later not used for the print out. \nBoth problems I cannot solve. </p>\n\n<p>The output I want is only for the values of atest, ctest, btest, ftest and gtest in that order like</p>\n\n<pre><code>\"2\"; \"3\"; \"8\"; \"1\"; \"6\"\n\"1\"; \"5\"; \"2\"; \"0\"; \"5\"\n</code></pre>\n\n<p>The numbers that are returned can also be words or sentences over multiple lines but that is working already.</p>\n\n<p>The input file is like:</p>\n\n<pre><code> MyValStart\n ---------------\n\n     atest:    2\n     ctest:    3\n     itest:    3\n     btest:    8\n     ytest:    3\n     ftest:    1\n     gtest:    6\n     utest:    348385fhjdhgofdgkdfjgd\n\n\n\n MyValStart\n ---------------\n\n     atest:    1\n     ctest:    5\n     itest:    3\n     btest:    2\n     ytest:    jfdgdf ifdgijfdjgoksfk iosjfdjdisfpgj\n     ftest:    0\n     gtest:    5\n     utest:    jfsdhgjfd fighfidhg ifhdghfid ifdhjgifdh\n</code></pre>\n\n<p>Any idea on how to fix this so it works correctly?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["linux", "perl"], "answers": [{"tags": [], "owner": {"reputation": 273, "user_id": 7658119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nB4w0.jpg?s=128&g=1", "display_name": "Murtaza JAFARI", "link": "https://stackoverflow.com/users/7658119/murtaza-jafari"}, "is_accepted": false, "score": 1, "last_activity_date": 1489745111, "creation_date": 1489745111, "answer_id": 42854541, "question_id": 42854424, "link": "https://stackoverflow.com/questions/42854424/delete-files-older-than-7-days-in-perl/42854541#42854541", "title": "Delete files older than 7 days in perl", "body": "<p>Be careful with special file names (spaces, quotes) when piping to rm.</p>\n\n<p>There is a safe alternative - the <code>-delete</code> option:</p>\n\n<pre><code>find /path/to/directory/ -mindepth 1 -mtime +5 -delete\n</code></pre>\n\n<p>That's it, no separate rm call and you don't need to worry about file names.</p>\n\n<p>Replace <code>-delete</code> with -depth <code>-print</code> to test this command before you run it (<code>-delete</code> implies <code>-depth</code>).</p>\n"}], "owner": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1276, "favorite_count": 0, "closed_date": 1489745864, "answer_count": 1, "score": -1, "last_activity_date": 1489745248, "creation_date": 1489744786, "question_id": 42854424, "link": "https://stackoverflow.com/questions/42854424/delete-files-older-than-7-days-in-perl", "closed_reason": "Duplicate", "title": "Delete files older than 7 days in perl", "body": "<p>How to delete files from directories who are older than certain days (7 days) OR files who was created on any certain date?</p>\n"}, {"tags": ["perl", "shell"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1489736591, "post_id": 42851830, "comment_id": 72810636, "body": "There is no sane way to do what you are asking.  A subprocess cannot affect its parent&#39;s environment.  You would basically have to have Perl <code>exec</code> Bash and then have that <code>exec</code> Perl back over itself in order to pull this off."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1489736781, "post_id": 42851830, "comment_id": 72810739, "body": "Also the shebang needs to start with the two characters <code>#!</code> in order for it to be syntactically valid and actually useful."}, {"owner": {"reputation": 8026, "user_id": 1320303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9020a80cda52e7a425d4824ad572b241?s=128&d=identicon&r=PG", "display_name": "mttrb", "link": "https://stackoverflow.com/users/1320303/mttrb"}, "edited": false, "score": 1, "creation_date": 1489740728, "post_id": 42851830, "comment_id": 72812724, "body": "If you&#39;re shell script, as in your example, is only changing directory you can use perl&#39;s <code>chdir</code> function to change directory. You still have all the issues that have been raised above though."}], "answers": [{"tags": [], "owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "is_accepted": false, "score": 0, "last_activity_date": 1489740246, "creation_date": 1489740246, "answer_id": 42852849, "question_id": 42851830, "link": "https://stackoverflow.com/questions/42851830/sourcing-a-shell-script-from-a-perl-script/42852849#42852849", "title": "sourcing a shell script from a perl script", "body": "<p>As @tripleee said, you must exec yourself. Here is how I would do it:</p>\n\n<pre><code>if (defined $ENV{TOTO}) {\n    print \"TOTO is $ENV{TOTO}\\n\";\n} else {\n    my $cmd = \". ./source.txt ; exec $^X $0 \" . join(' ', @ARGV);\n    system ($cmd);\n}\n</code></pre>\n\n<p>my script source.txt contains</p>\n\n<pre><code>export TOTO=titi\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7725568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cdfaee5804703f1d8c28de7619b2859?s=128&d=identicon&r=PG&f=1", "display_name": "Anand Mohan", "link": "https://stackoverflow.com/users/7725568/anand-mohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 557, "favorite_count": 0, "closed_date": 1489876700, "answer_count": 1, "score": 0, "last_activity_date": 1489740246, "creation_date": 1489736398, "last_edit_date": 1489736530, "question_id": 42851830, "link": "https://stackoverflow.com/questions/42851830/sourcing-a-shell-script-from-a-perl-script", "closed_reason": "Duplicate", "title": "sourcing a shell script from a perl script", "body": "<p>I have a shell script to change my path permanently to another path. My requirement is to source it using a perl script(perl script has some other code as well and finally it has to source the below shell scipt)</p>\n\n<p>test.sh:</p>\n\n<pre><code>!/bin/bash\ncd /db/oa/invoke/path\n</code></pre>\n\n<p>test.pl:</p>\n\n<pre><code>!/usr/bin/perl\nsystem(\"source /home/test.sh\");\n</code></pre>\n\n<p>but sourcing is not working. I know the command <code>system(\"sh /home/test.sh --help\")</code> for shell script execution from perl script. But I need similar command to source the shell script. Please let know, if I am missing any details. I have already seen questions being asked on same topic, but i didn't see a proper solution for sourcing. can anyone help me on this.</p>\n\n<p>Regards Anand</p>\n"}, {"tags": ["perl", "cpan", "dmake"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1489736301, "post_id": 42851321, "comment_id": 72810497, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/6600793/problems-installing-cpan-modules\">Problems installing CPAN Modules</a>"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1489744261, "post_id": 42851321, "comment_id": 72814843, "body": "As i told in the <a href=\"http://stackoverflow.com/a/42833906/632407\">stackoverflow.com/a/42833906/632407</a> - me never used windows. The answer works in my Mac, but i haven&#39;t idea how to cope with the installation problems in windows... so sry..."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489764450, "post_id": 42851321, "comment_id": 72828851, "body": "Please show the output for the tests that failed. It will be higher up in the build log. The test summary is not detailed enough."}, {"owner": {"reputation": 85, "user_id": 4003637, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2f0dae9dcead6109bb1c447feff7fe0f?s=128&d=identicon&r=PG&f=1", "display_name": "Roman78", "link": "https://stackoverflow.com/users/4003637/roman78"}, "edited": false, "score": 0, "creation_date": 1489999952, "post_id": 42851321, "comment_id": 72898441, "body": "Just posted the outcome. Now the MozRepl did not gave this error message, and i believe the other one is different now."}], "owner": {"reputation": 85, "user_id": 4003637, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2f0dae9dcead6109bb1c447feff7fe0f?s=128&d=identicon&r=PG&f=1", "display_name": "Roman78", "link": "https://stackoverflow.com/users/4003637/roman78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1999, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1489999699, "creation_date": 1489734664, "last_edit_date": 1489999699, "question_id": 42851321, "link": "https://stackoverflow.com/questions/42851321/cpan-dmake-exe-error-code-255-while-making-test-dynamic", "title": "CPAN dmake.exe: Error code 255, while making &#39;test_dynamic&#39;", "body": "<p>I start using Strawberry Perl and wanted to install some modules using the cpan command. But i receive the error message \"Error code 255, while making 'test_dynamic'\". </p>\n\n<p>First i tried to install WWW::Mechanize::Firefox finding that i miss three other module: MozRepl::RemoteObject 0.39; Object::Import and Shell::Command. The first two of those 3 give the same error message. The Shell::Command installed whitout any error message.</p>\n\n<p>MozRepl::RemoteObject 0.39:</p>\n\n<pre><code> Test Summary Report\n-------------------\nt/10-plugin-repl-enter.t            (Wstat: 512 Tests: 3 Failed: 2)\n  Failed tests:  2-3\n  Non-zero exit status: 2\nt/16-plugin-repl-home.t             (Wstat: 256 Tests: 2 Failed: 1)\n  Failed test:  2\n  Non-zero exit status: 1\nt/18-plugin-repl-util-help_url_for.t (Wstat: 768 Tests: 4 Failed: 3)\n  Failed tests:  2-4\n  Non-zero exit status: 3\nt/19-plugin-repl-util-doc_for.t     (Wstat: 768 Tests: 7 Failed: 3)\n  Failed tests:  2-3, 5\n  Non-zero exit status: 3\nt/20-plugin-json.t                  (Wstat: 256 Tests: 2 Failed: 1)\n  Failed test:  2\n  Non-zero exit status: 1\nFiles=14, Tests=58,  6 wallclock secs ( 0.01 usr +  0.05 sys =  0.06 CPU)\nResult: FAIL\nFailed 5/14 test programs. 10/58 subtests failed.\ndmake.exe:  Error code 255, while making 'test_dynamic'\n  ZIGOROU/MozRepl-0.06.tar.gz\n  C:\\STRAWB~1\\c\\bin\\dmake.exe test -- NOT OK\n//hint// to see the cpan-testers results for installing this module, try:\n  reports ZIGOROU/MozRepl-0.06.tar.gz\nStopping: 'test' failed for 'MozRepl'.\n</code></pre>\n\n<p>Object::Import</p>\n\n<pre><code>Test Summary Report\n-------------------\nt/04_handle.t  (Wstat: 65280 Tests: 3 Failed: 0)\n  Non-zero exit status: 255\n  Parse errors: Bad plan.  You planned 56 tests but ran 3.\nFiles=14, Tests=265,  3 wallclock secs ( 0.09 usr +  0.06 sys =  0.16 CPU)\nResult: FAIL\nFailed 1/14 test programs. 0/265 subtests failed.\ndmake.exe:  Error code 255, while making 'test_dynamic'\n  AMBRUS/Object-Import-1.004.tar.gz\n  C:\\STRAWB~1\\c\\bin\\dmake.exe test -- NOT OK\n//hint// to see the cpan-testers results for installing this module, try:\n  reports AMBRUS/Object-Import-1.004.tar.gz\nStopping: 'install' failed for 'Object::Import'.\nFailed during this command:\n AMBRUS/Object-Import-1.004.tar.gz            : make_test NO\n</code></pre>\n\n<p>I'm not a Perl programmer, just startet. </p>\n\n<p>/edit: the other question is about another package. I read the cpantesters page and the packages should be OK. But could it be that there is something whit the 64-bit version. On the cpantesters site are all windows related entries are for win32:</p>\n\n<p><a href=\"http://www.cpantesters.org/distro/O/Object-Import.html#Object-Import-1.004\" rel=\"nofollow noreferrer\">http://www.cpantesters.org/distro/O/Object-Import.html#Object-Import-1.004</a>\n<a href=\"http://www.cpantesters.org/distro/M/MozRepl-RemoteObject.html#MozRepl-RemoteObject-0.39\" rel=\"nofollow noreferrer\">http://www.cpantesters.org/distro/M/MozRepl-RemoteObject.html#MozRepl-RemoteObject-0.39</a></p>\n\n<p>/edit2: Tried to get some reports and run both installs again, now it looks like the MozRepl::RemoteObject went good, but the Object::Import didn't: So here is the error report from that:</p>\n\n<pre><code>Running install for module 'Object::Import'\nChecksum for C:\\STRAWB~1\\cpan\\sources\\authors\\id\\A\\AM\\AMBRUS\\Object-Import-1.004.tar.gz ok\nScanning cache C:\\STRAWB~1\\cpan\\build for sizes\n............................................................................DONE\nConfiguring A/AM/AMBRUS/Object-Import-1.004.tar.gz with Makefile.PL\nChecking if your kit is complete...\nLooks good\nGenerating a dmake-style Makefile\nWriting Makefile for Object::Import\nWriting MYMETA.yml and MYMETA.json\n  AMBRUS/Object-Import-1.004.tar.gz\n  C:\\Strawberry\\perl\\bin\\perl.exe Makefile.PL -- OK\nRunning make for A/AM/AMBRUS/Object-Import-1.004.tar.gz\ncp lib/Object/Import.pm blib\\lib\\Object\\Import.pm\n  AMBRUS/Object-Import-1.004.tar.gz\n  C:\\STRAWB~1\\c\\bin\\dmake.exe -- OK\nRunning make test\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib\\lib', 'blib\\arch')\" t/*.t\nt/00_require.t ... ok\nt/01_basic.t ..... ok\nt/02_auto.t ...... ok\nt/03_bigint.t .... ok\nt/04_handle.t .... \nDubious, test returned 255 (wstat 65280, 0xff00)\nFailed 53/56 subtests \nt/05_nometh.t .... ok\nt/06_deref.t ..... ok\nt/07_mary.t ...... ok\nt/08_target.t .... ok\nt/09_parm.t ...... ok\nt/10_alias.t ..... ok\nt/11_exporter.t .. ok\nt/12_taint.t ..... ok\nt/13_meta.t ...... ok\n\nTest Summary Report\n-------------------\nt/04_handle.t  (Wstat: 65280 Tests: 3 Failed: 0)\n  Non-zero exit status: 255\n  Parse errors: Bad plan.  You planned 56 tests but ran 3.\nFiles=14, Tests=265,  3 wallclock secs ( 0.09 usr +  0.06 sys =  0.16 CPU)\nResult: FAIL\n  AMBRUS/Object-Import-1.004.tar.gz\n  C:\\STRAWB~1\\c\\bin\\dmake.exe test -- NOT OK\n//hint// to see the cpan-testers results for installing this module, try:\n  reports AMBRUS/Object-Import-1.004.tar.gz\nStopping: 'install' failed for 'Object::Import'.\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1489733495, "post_id": 42850988, "comment_id": 72809211, "body": "<code>print &quot;$key =&gt; @$value\\n&quot;;</code> =&gt; <a href=\"http://perldoc.perl.org/perldsc.html#HASHES-OF-ARRAYS\" rel=\"nofollow noreferrer\">perldoc.perl.org/perldsc.html#HASHES-OF-ARRAYS</a>"}, {"owner": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1489733620, "post_id": 42850988, "comment_id": 72809255, "body": "You can do <code>my @data = @{$value}</code> to get a regular array."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1489735185, "post_id": 42850988, "comment_id": 72809963, "body": "Where does <code>user1</code> come from? It shows up out of nowhere."}, {"owner": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1489735498, "post_id": 42850988, "comment_id": 72810094, "body": "@zdim it is just a sample of the data that I would like to parse."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1489735613, "post_id": 42850988, "comment_id": 72810146, "body": "Ah, I see it now, way past the right margin. Sorry.  Btw, why all that space? Is that in your data?"}, {"owner": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1489735713, "post_id": 42850988, "comment_id": 72810209, "body": "@zdim yeah that is the raw data and exact the same data that i want to parse"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1489735951, "post_id": 42850988, "comment_id": 72810312, "body": "But it doesn&#39;t make sense.  I had to put it in a file here in order to see what it is ... and there are linebreaks in the middle.  When I join it I get <code>&#39;server1.localdomain.com:8080&#39;</code> and <code>[&#39;,&#39;user=user1 &#39;&#39;since=2017-03-10 13:53:27 ]</code>. That&#39;s not a valid arrayref.  Can you show some actual data? It looks like it is confusing <code>Dumper</code> so it is not clear <i>what</i> needs to be parsed."}], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "edited": false, "score": 0, "creation_date": 1489737226, "post_id": 42851595, "comment_id": 72810917, "body": "I tried now:  foreach my $key (keys %loginusers) {     print &quot;$key =&gt; @{$loginusers{$key}}&quot;; }  and the result is:  since=2017-03-10 13:53:27net:server1.localdomain.com:8080 =&gt; user=user1"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "edited": false, "score": 0, "creation_date": 1489737275, "post_id": 42851595, "comment_id": 72810947, "body": "@webdev.gk  Cleaned out a couple of typos.  The test prints the desired output (I think?)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "edited": false, "score": 0, "creation_date": 1489737732, "post_id": 42851595, "comment_id": 72811171, "body": "@webdev.gk  Cleaned out a bug -- can&#39;t use non-space <code>\\S</code> in regex, since there <i>are</i> spaces inside the string after <code>=</code>)"}, {"owner": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "edited": false, "score": 0, "creation_date": 1489738682, "post_id": 42851595, "comment_id": 72811621, "body": "you are genius and its almost complete.   So if I use this, the output is almost complete except that the since doesn&#39;t not have the hours,mins and seconds. it only shows 2017-03-10  my ($user, $since) = map { /=\\s*(\\S+)/ } @{$loginusers{$key}};   If i use this code below, it is complete except that user is not showing my ($user, $since) = map { /=\\s*(.*)/ } @{$loginusers{$key}}"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "edited": false, "score": 0, "creation_date": 1489738911, "post_id": 42851595, "comment_id": 72811738, "body": "@webdev.gk  That is what my previous comment says -- it was a bug, and I fixed it in the post.  Look at it again.  The error was that I was using &quot;non-space&quot; (<code>\\S</code>) in the regex so the last part got left out.  Now the regex uses <code>.*</code>, so <i>everything</i> up to the end of the string."}, {"owner": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "edited": false, "score": 0, "creation_date": 1489739417, "post_id": 42851595, "comment_id": 72812020, "body": "strange because I copied all the code just now and when I tried, it is missing the user but the since is complete with date and hours"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "edited": false, "score": 0, "creation_date": 1489740725, "post_id": 42851595, "comment_id": 72812721, "body": "@webdev.gk The output I show is copied from my terminal. But note, I use the cleaned out data, shown in the answer.  I think that something may be badly wrong with your data -- can you just print them to screen (not with <code>Dumper</code>) and see what it is like?  Use the code at the beginning of my answer, or even first nicely make a separate array and print an element per line."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "edited": false, "score": 0, "creation_date": 1489741384, "post_id": 42851595, "comment_id": 72813074, "body": "@webdev.gk   I added a more solid way, to split elemts into a hash. See @jm666 answer, that  is a nice way to do it, first clean up the data.  But, something seems badly off with your data.  Remember that <code>Dumper</code> prints stuff out of a complex data structure, and it can get confused.  The loose <code>,</code> and <code>&#39;</code> can&#39;t be there -- that is <i>not a valid arrayref</i>, so it is clear that <code>Dumper</code> has a problem.  Can you do what I suggest in the above comment, and print data out separately to see what you are dealing with?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "edited": false, "score": 0, "creation_date": 1489741716, "post_id": 42851595, "comment_id": 72813251, "body": "@webdev.gk I added to the post a way to see what you have, without <code>Dumper</code>.  Please try this and let us know.  Best would be to update the question -- add to the bottom how the data looks."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "edited": false, "score": 0, "creation_date": 1489742737, "post_id": 42851595, "comment_id": 72813844, "body": "@webdev.gk Yes, great -- thank you.  I added to the end of my answer, how to try to clean it out.  There is still one bit I don&#39;t understand in what you added, but try this."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "edited": false, "score": 1, "creation_date": 1489743941, "post_id": 42851595, "comment_id": 72814606, "body": "@webdev.gk  You are welcome :)  Glad that it all worked out -- and hopefully there was a chance to learn more :)"}, {"owner": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "edited": false, "score": 0, "creation_date": 1489744077, "post_id": 42851595, "comment_id": 72814706, "body": "yeah I need to learn more on Perl and i&#39;ll try my best thank you :)"}, {"owner": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "edited": false, "score": 0, "creation_date": 1489744535, "post_id": 42851595, "comment_id": 72815029, "body": "honestly I don&#39;t know. How do I do that? I already click jm666 answer as useful and yes it is"}, {"owner": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "edited": false, "score": 0, "creation_date": 1489745209, "post_id": 42851595, "comment_id": 72815514, "body": "yeah I agree.. :)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1489904217, "last_edit_date": 1495541376, "creation_date": 1489735631, "answer_id": 42851595, "question_id": 42850988, "link": "https://stackoverflow.com/questions/42850988/printing-content-of-array-inside-hash/42851595#42851595", "title": "Printing content of ARRAY inside hash", "body": "<p>A hash value is a scalar, and it can take a reference.  This is how we build complex data structures. Yours apparently have arrayrefs, so you need to dereference them. Something like</p>\n\n<pre><code>foreach my $key (keys %hash) {\n    say \"$key =&gt; @{$hash{key}}\";\n}\n</code></pre>\n\n<p>See the tutorial <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a> and the cookbook on data structures <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a>.</p>\n\n<p>The strange output from <code>Dumper</code> indicates that there may be leading/trailing spaces around values (or worse), which need be cleaned out. Until this is clarified I'll assume data like</p>\n\n<pre>\n'server1.localdomain.com:8080' => ['user=user1', 'since=2017-03-10 13:53:27']\n</pre>\n\n<p>In order to get the desired output you need to split each element </p>\n\n<pre><code>printf \"%-8s %-32s %s\\n\", qw(User Hostname Since);\nforeach my $key (keys %hash)\n{\n    my ($user, $since) = map { /=\\s*(.*)/ } @{$hash{$key}};\n\n    printf \"%-8s %-32s %s\\n\", $user, $key, $since;\n}\n</code></pre>\n\n<p>For each value, we dereference it and pass that through <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\">map</a>. The code in <code>map</code>s block, that is applied to each element, pulls what is after <code>=</code>. Given the data, the first one is the user and the second one is timestamp.  Since this is an array (and not a hash) I assume that the order is fixed. If not, get strings from both sides of <code>=</code> and analyze them to see which one goes where. Or better use a hash</p>\n\n<pre><code>my %field = map { /\\s*(.*?)=\\s*(.*)/ } @{$hash{$key}};\n</code></pre>\n\n<p>where <code>.*?</code> is the non-greedy version of <code>.*</code>, capturing until the <em>first</em> <code>=</code>. Then print as</p>\n\n<pre><code>printf \"%-8s %-32s %s\\n\", $field{user}, $key, $field{since};\n</code></pre>\n\n<p>and you don't rely on the order in the arrayref. See the <a href=\"https://stackoverflow.com/a/42852517/4653379\">answer by jm666</a> for a nice and consistent approach building this from the beginning.</p>\n\n<p>With the hash shown above this prints</p>\n\n<pre>\nUser     Hostname                         Since\nuser1    server1.localdomain.com:8080     2017-03-10 13:53:27\n</pre>\n\n<p>I've used <code>8</code> and <code>32</code> widths based on shown data.  For more precision, there are modules for tabular output. If you do it by hand you need to pre-process and find the longest word <em>for each column</em> among keys and/or values, and then use those lengths in the second pass with <code>printf</code>.</p>\n\n<hr>\n\n<p>It appears that <code>Dumper</code> is getting confused by strange data. To see what we have do</p>\n\n<pre><code>foreach my $key (keys %loginusers) \n{\n    print \"For $key:\\n\";\n    print \"\\t|$_|\\n\" for @{$loginusers{$key}};\n}\n</code></pre>\n\n<p>To clean up the data you can try</p>\n\n<pre><code>foreach my $key (keys %loginusers) \n{\n    my @fields = \n        map { s/^\\s*//; s/\\s*$//; s/\\s*\\R\\s*/ /g; $_ } \n        grep { /\\S/ } \n            @{$loginusers{$key}};\n\n    print \"For $key:\\n\";\n    print \"$_\\n\" for @fields;\n}\n</code></pre>\n\n<p>The <code>grep</code> takes an input list and filters out those elements for which the code inside its block evaluates false. Here we require at least one non-space character. Then its output goes into <code>map</code>, which removes all leading and trailing whitespace, and replaces all newlines with spaces.</p>\n"}, {"comments": [{"owner": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "edited": false, "score": 0, "creation_date": 1489740871, "post_id": 42852517, "comment_id": 72812808, "body": "thank you. my data structure is a bit different from the output you showed. mine is like this and not nice..  NEW STRUCTURE: $VAR1 = {           &#39;server1.localdomain.com:8080&#39; =&gt; { &#39;,                                                                                 &#39;since&#39; =&gt; &#39;2017-03-10 13:53:27 &#39;                                                                                  &#39;user&#39; =&gt; &#39;user1                                                                                  }         };  if you look, there is unwanted &quot; &#39; &quot; and after the user it is missing another &quot; &#39; &quot;"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "edited": false, "score": 0, "creation_date": 1489741010, "post_id": 42852517, "comment_id": 72812887, "body": "@webdev.gk added a full demo"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "edited": false, "score": 1, "creation_date": 1489742721, "post_id": 42852517, "comment_id": 72813833, "body": "@webdev.gk see the edit and the full demo again - your data probably contains not only the <code>\\n</code> but the <code>\\r</code> too. <i>it would be best clean your data beforehand</i>."}, {"owner": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "edited": false, "score": 0, "creation_date": 1489743737, "post_id": 42852517, "comment_id": 72814467, "body": "yes your suggestion to clean the data fix those problems"}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 2, "last_activity_date": 1489743189, "last_edit_date": 1489743189, "creation_date": 1489739034, "answer_id": 42852517, "question_id": 42850988, "link": "https://stackoverflow.com/questions/42850988/printing-content-of-array-inside-hash/42852517#42852517", "title": "Printing content of ARRAY inside hash", "body": "<p>The your data-structure isn't very nice. I would convert it to some better, using:</p>\n\n<pre><code>#convert to better structure\nmy $newusers;\nfor my $host ( keys %loginusers ) {\n        %{$newusers-&gt;{$host}} = map { chomp; split /=/,$_,2 } @{$loginusers{$host}};\n}\nundef %loginusers;      #the old not needed anymore\nprint \"NEW STRUCTURE: \", Dumper $newusers;\n</code></pre>\n\n<p>The dump now looks like:</p>\n\n<pre><code>NEW STRUCTURE: $VAR1 = {\n          'server1.localdomain.com:8080' =&gt; {\n                                              'user' =&gt; 'user1',\n                                              'since' =&gt; '2017-03-10 13:53:27'\n                                            }\n        };\n</code></pre>\n\n<p>after the above the printing is simple:</p>\n\n<pre><code>printline( qw(User Hostname Since) );\nprintline($newusers-&gt;{$_}{user}, $_, $newusers-&gt;{$_}{since}) for (keys %$newusers);\n\nsub printline { printf \"%-8s %-32s %-18s\\n\", @_; }\n</code></pre>\n\n<p>For the explanation read @zdim's excellent answer (and accept his answer :))</p>\n\n<p>full code</p>\n\n<pre><code>use 5.014;\nuse warnings;\nuse Data::Dumper;\n\nmy %loginusers = (\n'server1.localdomain.com:8080' =&gt; [\n        \"user=user1\\r\\n\",   # you probably have the \\r too\n        \"since=2017-03-10 13:53:27\\r\\n\",\n     ]\n);\nsay \"OLD STRUCTURE: \", Dumper \\%loginusers;\n\n#convert to better structure\nmy $newusers;\nfor my $host ( keys %loginusers ) {\n    %{$newusers-&gt;{$host}} = map { s/[\\r\\n]//g; split /=/, $_, 2 } @{$loginusers{$host}}; #removes all \\r and \\n\n} \nundef %loginusers;  #not needed anymore\nsay \"NEW STRUCTURE: \", Dumper $newusers;\n\nprintline( qw(User Hostname Since) );\nprintline($newusers-&gt;{$_}{user}, $_, $newusers-&gt;{$_}{since}) for (keys %$newusers);\n\nsub printline { printf \"%-8s %-32s %-18s\\n\", @_; }\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>OLD STRUCTURE: $VAR1 = {\n          'server1.localdomain.com:8080' =&gt; [\n                                              'user=user1\n',\n                                              'since=2017-03-10 13:53:27\n'\n                                            ]\n        };\n\nNEW STRUCTURE: $VAR1 = {\n          'server1.localdomain.com:8080' =&gt; {\n                                              'user' =&gt; 'user1',\n                                              'since' =&gt; '2017-03-10 13:53:27'\n                                            }\n        };\n\nUser     Hostname                         Since             \nuser1    server1.localdomain.com:8080     2017-03-10 13:53:27\n</code></pre>\n\n<h1>EDIT</h1>\n\n<p>You probably have the <code>\\r</code> in your data too. See the updated code.</p>\n"}], "owner": {"reputation": 189, "user_id": 1249125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1ea861e54c5fbacb1935926356399a83?s=128&d=identicon&r=PG", "display_name": "webdev.gk", "link": "https://stackoverflow.com/users/1249125/webdev-gk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 42851595, "answer_count": 2, "score": 1, "last_activity_date": 1489904217, "creation_date": 1489733429, "last_edit_date": 1489743475, "question_id": 42850988, "link": "https://stackoverflow.com/questions/42850988/printing-content-of-array-inside-hash", "title": "Printing content of ARRAY inside hash", "body": "<p>how do I print a content of an array inside the hash? I am using Dumper so you can see the data that I am parsing. </p>\n\n<pre><code>print Dumper \\%loginusers;\n\n for my $key ( keys %loginusers ) {\n        my $value = $loginusers{$key};\n        print \"$key =&gt; $value\\n\";\n } \n\n\n printf \"%s %-32s %-18s\\n\",\"User\",\"Hostname\",\"Since\";\n</code></pre>\n\n<p>The output is</p>\n\n<pre><code>$VAR1 = {\n          'server1.localdomain.com:8080' =&gt; [\n',                                                                                 'user=user1\n'                                                                                  'since=2017-03-10 13:53:27\n                                                                                 ]\n        };\n\nserver1.localdomain.com:8080 =&gt; ARRAY(0x1584748)\nUser Hostname                         Since\n</code></pre>\n\n<p>As you can see there is an ARRAY(0x1584748) and I don't know how to get that value inside from the hash.</p>\n\n<p>What I would like to see is something like:</p>\n\n<pre><code>User  Hostname                         Since\nuser1 server1.localdomain.com:8080     2017-03-10 13:53:27\n</code></pre>\n\n<p>Thank you very much for someone that can help.</p>\n\n<p>Update:\nSo after trying this to see the data how it looks:</p>\n\n<pre><code>foreach my $key (keys %loginusers) \n{\n    print \"For $key:\\n\";\n    print \"\\t|$_|\\n\" for @{$loginusers{$key}};\n}\n</code></pre>\n\n<p>The output looks like this:</p>\n\n<pre><code>For server1.localdomain.com:8080:\n|       |user=user1\n|       |since=2017-03-10 13:53:27\n</code></pre>\n\n<p>Update:\ntried the add these on the code:</p>\n\n<pre><code>foreach my $key (keys %loginusers)\n{\n    my @fields =\n        map { s/^\\s*//; s/\\s*\\Z//; s/\\s*\\n\\s*/ /g; $_ }\n        grep { /\\S/ }\n            @{$loginusers{$key}};\n\n    print \"For $key:\\n\";\n    print \"$_\\n\" for @fields;\n}\n</code></pre>\n\n<p>And using the both sample code:</p>\n\n<pre><code>printf \"%-8s %-32s %s\\n\", qw(User Hostname Since);\nforeach my $key (keys %loginusers)\n{\n    my %field = map { /\\s*(.*?)=\\s*(.*)/ } @{$loginusers{$key}};\n    my ($host, $rgsender, $port) = split /:/, $key;\n    printf \"%-8s %-32s %s\\n\", $field{user}, $host, $field{since};\n}\n\n\nmy $newusers;\nfor my $host ( keys %loginusers ) {\n    local $/ = \"\\r\\n\"; #localised \"input record separator\" for the \"chomp\"\n    %{$newusers-&gt;{$host}} = map { chomp; split /=/,$_,2 } @{$loginusers{$host}};\n}\nundef %loginusers;  #not needed anymore\n#print \"NEW STRUCTURE: \", Dumper $newusers;\n\nprintline( qw(User Hostname Since) );\nprintline($newusers-&gt;{$_}{user}, $_, $newusers-&gt;{$_}{since}) for (keys %$newusers);\n\nsub printline { printf \"%-8s %-32s %-18s\\n\", @_; }\n</code></pre>\n\n<p>and here is the results:</p>\n\n<pre><code>User     Hostname                          Since\nuser1    server1.localdomain.com:8080      2017-03-10 13:53:27\nUser     Hostname                          Since\nuser1    server1.localdomain.com:8080      2017-03-10 13:53:27\n</code></pre>\n"}, {"tags": ["ruby", "perl", "shell", "networking", "scripting"], "answers": [{"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": true, "score": 1, "last_activity_date": 1489730553, "creation_date": 1489730553, "answer_id": 42850295, "question_id": 42849669, "link": "https://stackoverflow.com/questions/42849669/writing-automated-scripts-to-configure-device/42850295#42850295", "title": "Writing Automated scripts to configure device", "body": "<h2>Step 1: decide the file structure of your program.</h2>\n\n<p>For example, this is the simplest structure</p>\n\n<pre><code>if_admin/\n    |--config.yml\n    |--run.rb\n</code></pre>\n\n<h2>Step 2: write a config file or a bunch of config files that contain the different parts of the commands you need to run on the targets.</h2>\n\n<p>For example, you can use a yaml file like this:</p>\n\n<pre><code>xx.xx.xx.xx:\n  password: s3cret \n  router-shelf: x\n  slot: x\n  port: x\nyy.yy.yy.yy:\n  ...\n</code></pre>\n\n<h2>Step 3: implement what you want to do</h2>\n\n<pre><code>require 'yaml'\nrequire 'net/telnet'\n\nconfig = YAML.load_file('./config.yml')\nconfig.each do |host, conf|\n  telnet = Net::Telnet.new('Host' =&gt; host)\n  telnet.login(conf['password'])\n  telnet.puts &lt;&lt;-CMD\n    sys\n    interface g #{conf['router-shelf']}/#{conf['slot']}/#{conf['port']}\n    shut\n    desc free-port\n  CMD\n  telnet.close\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 160, "user_id": 6027771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6e6b84a2a791c8e260ed0b95cbac292?s=128&d=identicon&r=PG&f=1", "display_name": "dasgar", "link": "https://stackoverflow.com/users/6027771/dasgar"}, "edited": false, "score": 0, "creation_date": 1489859635, "post_id": 42856437, "comment_id": 72859352, "body": "Not sure this will help the OP, who said that they are on Windows.  Since your answer is referring to Linux commands (expect, bash, spawn) and the shebang line has a Linux path, it sounds more like a Linux based solution."}, {"owner": {"reputation": 139, "user_id": 3562957, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/07b7cc1b463dacc257e773e4bb960f0b?s=128&d=identicon&r=PG&f=1", "display_name": "mihir6692", "link": "https://stackoverflow.com/users/3562957/mihir6692"}, "reply_to_user": {"reputation": 160, "user_id": 6027771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6e6b84a2a791c8e260ed0b95cbac292?s=128&d=identicon&r=PG&f=1", "display_name": "dasgar", "link": "https://stackoverflow.com/users/6027771/dasgar"}, "edited": false, "score": 0, "creation_date": 1489865675, "post_id": 42856437, "comment_id": 72861545, "body": "@dasgar yes you are right. I mis-interpreted his question somehow."}], "tags": [], "owner": {"reputation": 139, "user_id": 3562957, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/07b7cc1b463dacc257e773e4bb960f0b?s=128&d=identicon&r=PG&f=1", "display_name": "mihir6692", "link": "https://stackoverflow.com/users/3562957/mihir6692"}, "is_accepted": false, "score": 0, "last_activity_date": 1489752303, "last_edit_date": 1489752303, "creation_date": 1489750346, "answer_id": 42856437, "question_id": 42849669, "link": "https://stackoverflow.com/questions/42849669/writing-automated-scripts-to-configure-device/42856437#42856437", "title": "Writing Automated scripts to configure device", "body": "<p>If you can use <code>expect</code> script , you are in luck.</p>\n\n<pre><code>#!/usr/bin/expect\n\nset timeout 60\n\nset cmds [list \"ssh host1 ...\" \"ssh host2 ...\" \"ssh host3 ...\"]\n\nforeach cmd $cmds {\n    spawn -noecho bash -c $cmd\n    expect {\n        -re \"password\" {\n            exp_send \"$env(PASS_WORD)\\\"\n            exp_continue\n        }\n        eof { wait } ; # at this time the last spawn'ed process has exited\n    }\n}\n</code></pre>\n\n<p>Here is the rough idea of above script :-</p>\n\n<p><code>set cmds [list....</code> will be used as list to store set of commands.</p>\n\n<p><code>foreach</code> will iterate though those commands</p>\n\n<p><code>spawn</code> will spawn process for each of the command. you can write multiple command with single telnet in bash, just break down commands using <code>\\</code> (backslash) so it is easily readable and extendable. </p>\n\n<p><code>expect</code> block will pass password whenever it encounter certain regex.</p>\n\n<p><code>eof</code> will wait till all commands in <code>spawn</code> process are finish.</p>\n\n<p><code>set timeout -1</code> will keep loop running. i think default time for <code>expect</code> script is <strong>10secs</strong>. </p>\n\n<p>You can create one more <code>foreach</code> loop for host-list.</p>\n\n<p>I think this will be enough to get you started for your automation process.</p>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 5221796, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/637fbbacbe8132d6c232ec189d0879c4?s=128&d=identicon&r=PG&f=1", "display_name": "suhasa", "link": "https://stackoverflow.com/users/5221796/suhasa"}, "edited": false, "score": 0, "creation_date": 1489984452, "post_id": 42878056, "comment_id": 72892432, "body": "Thanks for the answer. Right now, I am using MoboXterm and secureCRT. But there are 100s of devices with different ports. So I think Putty won&#39;t be a much efficient method."}], "tags": [], "owner": {"reputation": 160, "user_id": 6027771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6e6b84a2a791c8e260ed0b95cbac292?s=128&d=identicon&r=PG&f=1", "display_name": "dasgar", "link": "https://stackoverflow.com/users/6027771/dasgar"}, "is_accepted": false, "score": 0, "last_activity_date": 1489860709, "creation_date": 1489860709, "answer_id": 42878056, "question_id": 42849669, "link": "https://stackoverflow.com/questions/42849669/writing-automated-scripts-to-configure-device/42878056#42878056", "title": "Writing Automated scripts to configure device", "body": "<p>As to the question of \"What is the best scripting language to be used\", I would say go with one that does what you need and one that you're comfortable with using.</p>\n\n<p>If you want to go with Perl, one module that you could use is <a href=\"https://metacpan.org/pod/Net::Telnet\" rel=\"nofollow noreferrer\">Net::Telnet</a>.  Of course, you'll need Perl itself.  I'd recommend using <a href=\"http://strawberryperl.com/\" rel=\"nofollow noreferrer\">Strawberry Perl</a>, which should already have Net::Telnet installed.</p>\n\n<p>Another possible route is to use <a href=\"http://www.chiark.greenend.org.uk/~sgtatham/putty/\" rel=\"nofollow noreferrer\">putty</a>, which is a SSH and telnet client.  You could combine that with <a href=\"http://ttyplus.com/multi-tabbed-putty/\" rel=\"nofollow noreferrer\">TTY Plus</a>, which provides an interface that uses tabs for different putty sessions.  And it lets you issue commands to multiple putty sessions.  This is one possibility that wouldn't involve a lot of code writing.</p>\n"}], "owner": {"reputation": 87, "user_id": 5221796, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/637fbbacbe8132d6c232ec189d0879c4?s=128&d=identicon&r=PG&f=1", "display_name": "suhasa", "link": "https://stackoverflow.com/users/5221796/suhasa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 42850295, "answer_count": 3, "score": 0, "last_activity_date": 1489860709, "creation_date": 1489727522, "last_edit_date": 1489728212, "question_id": 42849669, "link": "https://stackoverflow.com/questions/42849669/writing-automated-scripts-to-configure-device", "title": "Writing Automated scripts to configure device", "body": "<p>My requirement is like this:</p>\n\n<p>I need to log in to a remote device (say Router/switch) and execute following commands.</p>\n\n<pre><code>telnet xx.xx.xx.xx\n//give password here\nsys\ninterface g x/x/x\nshut\ndesc free-port\nexit\n</code></pre>\n\n<p>There are Hundreds of devices for which I cannot waste time doing above damn thing 100 times. I need to write a automated script which does it. so My questions are as follows:</p>\n\n<ol>\n<li>I use Windows system, so What is the best scripting language to be used : Ruby / shell script / perl ? (I was formerly ROR Developer, so i know Ruby, Linux terminal. Now I am working in networking domain. )</li>\n<li>What I thought was : Put all Devices into an array and using <strong>for</strong> loop, call devices one by one and execute above said commands.</li>\n<li>I don't have knowledge of scripting, so please guide me further. I don't know where to start from.</li>\n</ol>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "is_accepted": true, "score": 4, "last_activity_date": 1489727354, "last_edit_date": 1495542731, "creation_date": 1489727354, "answer_id": 42849636, "question_id": 42849454, "link": "https://stackoverflow.com/questions/42849454/hash-printing-number-of-elements/42849636#42849636", "title": "Hash printing number of elements", "body": "<p>Hash does not guarantee to store keys and values in any particular order. That's why <code>@d</code> and <code>@c</code> are in an order you don't expect them to be.</p>\n\n<p><code>2/8</code> is what the hash is evaluated to in scalar context. This is explained here: <a href=\"https://stackoverflow.com/a/7428025/4295017\">https://stackoverflow.com/a/7428025/4295017</a>. <a href=\"https://stackoverflow.com/a/7427414/4295017\">The following reply</a> gives a relevant cite from <code>perldata</code>.</p>\n\n<p>The <code>2/8</code> value is stored in <code>$b</code> as string. When evaluated in integer context (imposed by <code>$b + 1</code> operation) this string value gets converted to <code>2</code>. That's why <code>$c</code> is <code>3</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1489728371, "last_edit_date": 1489728371, "creation_date": 1489727605, "answer_id": 42849679, "question_id": 42849454, "link": "https://stackoverflow.com/questions/42849454/hash-printing-number-of-elements/42849679#42849679", "title": "Hash printing number of elements", "body": "<p>First, hashes have no order to rely on, to say the least. From <a href=\"http://perldoc.perl.org/functions/keys.html\" rel=\"nofollow noreferrer\">keys</a></p>\n\n<blockquote>\n  <p>Hash entries are returned in an apparently random order. The actual random order is specific to a given hash; the exact same series of operations on two hashes may result in a different order for each hash. &nbsp; [ ... ]</p>\n</blockquote>\n\n<p>This is done on purpose, see the <a href=\"http://perldoc.perl.org/perlsec.html#Algorithmic-Complexity-Attacks\" rel=\"nofollow noreferrer\">reason in perlsec</a>. You can <a href=\"https://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">sort</a> them to print or assign though.  </p>\n\n<p>The other problem is due to using a hash in the scalar context. From <a href=\"http://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\">perldata</a></p>\n\n<blockquote>\n  <p>If you evaluate a hash in scalar context, it returns false if the hash is empty. If there are any key/value pairs, it returns true; more precisely, the value returned is a string consisting of the number of used buckets and the number of allocated buckets, separated by a slash. </p>\n</blockquote>\n\n<p>The rest of that documentation passage explains it further.</p>\n\n<p>If you want the number of pairs assign <code>keys %h</code> to a scalar, or use <a href=\"http://perldoc.perl.org/functions/scalar.html\" rel=\"nofollow noreferrer\">scalar</a> on it. </p>\n"}], "owner": {"reputation": 620, "user_id": 6641380, "user_type": "registered", "accept_rate": 97, "profile_image": "https://lh4.googleusercontent.com/-xpKbsD1iVLg/AAAAAAAAAAI/AAAAAAAAAGg/MAO7biFVz9I/photo.jpg?sz=128", "display_name": "Shankhadeep Mukerji", "link": "https://stackoverflow.com/users/6641380/shankhadeep-mukerji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 42849636, "answer_count": 2, "score": 0, "last_activity_date": 1489728371, "creation_date": 1489726319, "question_id": 42849454, "link": "https://stackoverflow.com/questions/42849454/hash-printing-number-of-elements", "title": "Hash printing number of elements", "body": "<p>I have a code as below</p>\n\n<pre><code>@array = qw(Sam London George Washington Luke Shanghai);\nmy %where = @array;\nmy @d = keys %where;\nmy @c = values %where;\n\nprint \"4. keys - @d values - @c \\n\";\n</code></pre>\n\n<p>I am getting </p>\n\n<pre><code>4. keys - George Luke Sam values - Washington Shanghai London\n</code></pre>\n\n<p>I should be getting 4. keys - Sam George Luke values - London Washington Shanghai</p>\n\n<p>Then I have</p>\n\n<pre><code>my ($a) = %where;\nmy $b = %where;\nmy $c = $b + 1;\nprint \"6. $a $b $c \\n\"\n</code></pre>\n\n<p>Why am I getting</p>\n\n<pre><code>6. George 2/8 3\n</code></pre>\n\n<p>So, firstly why am I getting incorrect order when I change array to hash.\nSecondly, how do I get 2/8 and 3. Instead I am expecting 6 and 7, since there are 6 elements in the hash (3 hash and 3 keys).</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1489716038, "post_id": 42847856, "comment_id": 72803941, "body": "As opposed to what? Perl is not strongly typed so it will treat strings as numbers and numbers as strings depending on the context. With <code>ref</code> you can rule out whether it is a reference. With <code>Scalar::Util::looks_like_number</code> you can see if it is something that can be used without warning in numeric context. You can use something like <code>Devel::Peek</code> or <code>B</code> to look at the internals and tell whether Perl is storing the value as a number or a string at the current instant, but the joy of Perl is that the internal representation is something that the programmer rarely has to worry about."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 6, "last_activity_date": 1520454244, "last_edit_date": 1520454244, "creation_date": 1489715386, "answer_id": 42847856, "question_id": 42847822, "link": "https://stackoverflow.com/questions/42847822/warning-somethings-wrong-when-ref-body-param-aa/42847856#42847856", "title": "Warning: something&#39;s wrong when ref $body-&gt;param-&gt;{aa}", "body": "<p><code>something's wrong</code> is the default message that the <code>warn</code> function outputs when it receives an empty string or no input.</p>\n\n<pre><code>$ perl -e warn\nWarning: something's wrong at -e line 1.\n\n$ perl -e 'warn \"\"'\nWarning: something's wrong at -e line 1.\n\n$ perl -e '$body={param=&gt;{aa=&gt;\"b\"}};warn ref($body-&gt;{param}{aa})'\nWarning: something's wrong at -e line 1.\n</code></pre>\n\n<p>I think you are also confused about what <code>ref</code> does on a normal scalar, such as a string. If the input to <code>ref</code> is not a reference, then the output is the empty string.</p>\n\n<pre><code>print ref(42);                 # no output\nprint ref(undef);              # no output\n$foo=\"abc\"; print ref($foo);   # no output\nwarn ref($foo);                # like warn \"\", so \"something's wrong\"\n</code></pre>\n"}], "owner": {"reputation": 6672, "user_id": 2038901, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/88a2242eb110fda489eee0bcbde6f2bd?s=128&d=identicon&r=PG", "display_name": "Sato", "link": "https://stackoverflow.com/users/2038901/sato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 42847856, "answer_count": 1, "score": 2, "last_activity_date": 1520454244, "creation_date": 1489715114, "last_edit_date": 1489715518, "question_id": 42847822, "link": "https://stackoverflow.com/questions/42847822/warning-somethings-wrong-when-ref-body-param-aa", "title": "Warning: something&#39;s wrong when ref $body-&gt;param-&gt;{aa}", "body": "<p>I'm testing <code>HTTP::Body</code>,</p>\n\n<p>then</p>\n\n<pre><code>my $body = HTTP::Body-&gt;new($ct, $cl);\n#..\nuse Data::Dumper;\nwarn Dumper($body);                  #A\nwarn ref $body;                      #B\nwarn Dumper($body-&gt;param);           #C\nwarn ref $body-&gt;param;               #D\nwarn Dumper($body-&gt;param-&gt;{aa});     #E\nwarn ref $body-&gt;param-&gt;{aa};         #F\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>#A\n$VAR1 = bless( {\n                 'param_order' =&gt; [\n                                    'aa',\n                                    'bb'\n                                  ],\n                 'param' =&gt; {\n                              'aa' =&gt; 'b',\n                              'bb' =&gt; 'a',\n                            },\n                 'cleanup' =&gt; 1\n               }, 'HTTP::Body::MultiPart' );\n#B\nHTTP::Body::MultiPart at\n#C\n$VAR1 = {\n          'aa' =&gt; 'b',\n          'bb' =&gt; 'a',\n        };\n#D\nHASH at \n#E\n$VAR1 = 'b';\n#F\nWarning: something's wrong at \n</code></pre>\n\n<p>Why <code>Warning: something's wrong</code>, <code>$body-&gt;param-&gt;{aa}</code> is not a STRING? how to make it a STRING?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489690067, "post_id": 42842374, "comment_id": 72793856, "body": "Those are attributes, not tags."}, {"owner": {"reputation": 5328, "user_id": 1305947, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/660bcd99a216234e04adb27125cbf0a3?s=128&d=identicon&r=PG", "display_name": "Joel G Mathew", "link": "https://stackoverflow.com/users/1305947/joel-g-mathew"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489690145, "post_id": 42842374, "comment_id": 72793913, "body": "Right. Forgive the typo."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489690160, "post_id": 42842374, "comment_id": 72793925, "body": "You loaded a lot of things that you don&#39;t need."}, {"owner": {"reputation": 5328, "user_id": 1305947, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/660bcd99a216234e04adb27125cbf0a3?s=128&d=identicon&r=PG", "display_name": "Joel G Mathew", "link": "https://stackoverflow.com/users/1305947/joel-g-mathew"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489690202, "post_id": 42842374, "comment_id": 72793961, "body": "That&#39;s because it&#39;s part of a larger script which needs those. For my question, the big script seems redundant."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489690218, "post_id": 42842374, "comment_id": 72793971, "body": "I don&#39;t have a computer right now. The problem is the TEXT. You need the attribute there."}, {"owner": {"reputation": 5328, "user_id": 1305947, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/660bcd99a216234e04adb27125cbf0a3?s=128&d=identicon&r=PG", "display_name": "Joel G Mathew", "link": "https://stackoverflow.com/users/1305947/joel-g-mathew"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489690261, "post_id": 42842374, "comment_id": 72793985, "body": "How should I modify it?"}, {"owner": {"reputation": 5328, "user_id": 1305947, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/660bcd99a216234e04adb27125cbf0a3?s=128&d=identicon&r=PG", "display_name": "Joel G Mathew", "link": "https://stackoverflow.com/users/1305947/joel-g-mathew"}, "edited": false, "score": 0, "creation_date": 1489690685, "post_id": 42842374, "comment_id": 72794218, "body": "Yes, I am using the process method. I just dont know how to use the data- attribute here."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1489691645, "post_id": 42842374, "comment_id": 72794758, "body": "You forgot to put quotes around <code>link[]</code>. Is that a transcription error or is that your actual code?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489697785, "post_id": 42842374, "comment_id": 72797987, "body": "Even if you use more things, why do you need LWP and Mechanize? Mech is a subclass of LWP. Looks strange."}, {"owner": {"reputation": 5328, "user_id": 1305947, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/660bcd99a216234e04adb27125cbf0a3?s=128&d=identicon&r=PG", "display_name": "Joel G Mathew", "link": "https://stackoverflow.com/users/1305947/joel-g-mathew"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489698091, "post_id": 42842374, "comment_id": 72798124, "body": "@simbabque One of the hazards of reusing code from one of my many scripts.."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1489694431, "post_id": 42842891, "comment_id": 72796304, "body": "Also <code>links[]</code> needed to be inside quotes. I think this OP added <code>use strict</code> only in the version he has published, as it doesn&#39;t compile."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1489696249, "post_id": 42842891, "comment_id": 72797267, "body": "@Borodin Even without strict, that&#39;s a syntax error, so I assume they copy-pasted wrong."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 7, "last_activity_date": 1489691436, "creation_date": 1489691436, "answer_id": 42842891, "question_id": 42842374, "link": "https://stackoverflow.com/questions/42842374/how-can-i-get-the-value-of-data-attributes-using-webscraper/42842891#42842891", "title": "How can I get the value of data- attributes using Web::Scraper?", "body": "<p><code>TEXT</code> is for getting the text inside an element. Use <code>@attr</code> to get the value of an attribute:</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse 5.010;\n\nuse Web::Scraper;\n\nmy $scraper = scraper {\n    process 'img', 'links[]' =&gt; '@data-foo';\n};\n\nmy $result = $scraper-&gt;scrape('&lt;img data-foo=\"foo\" data-bar=\"bar\"&gt;');\nsay for @{ $result-&gt;{links} };\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>foo\n</code></pre>\n"}], "owner": {"reputation": 5328, "user_id": 1305947, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/660bcd99a216234e04adb27125cbf0a3?s=128&d=identicon&r=PG", "display_name": "Joel G Mathew", "link": "https://stackoverflow.com/users/1305947/joel-g-mathew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "accepted_answer_id": 42842891, "answer_count": 1, "score": 2, "last_activity_date": 1489698158, "creation_date": 1489689766, "last_edit_date": 1489698158, "question_id": 42842374, "link": "https://stackoverflow.com/questions/42842374/how-can-i-get-the-value-of-data-attributes-using-webscraper", "title": "How can I get the value of data- attributes using Web::Scraper?", "body": "<p>I've been able to scrape data from websites with a simple HTML structure and retrieve data from various tags using the Perl module <a href=\"https://metacpan.org/pod/Web::Scraper\" rel=\"nofollow noreferrer\">Web::Scraper</a>. However, I came across a <code>data-</code> attribute which I'm unable to process in the usual way.</p>\n\n<p>The tag is:</p>\n\n<pre><code>&lt;img class=\"slide_image\"\n     src=\"https://image.slidesharecdn.com/computerassistedsurgery-160629113952/95/computer-assisted-surgery-1-638.jpg?cb=1467200461\" \n     data-small=\"https://image.slidesharecdn.com/computerassistedsurgery-160629113952/85/computer-assisted-surgery-1-320.jpg?cb=1467200461\" \n     data-normal=\"https://image.slidesharecdn.com/computerassistedsurgery-160629113952/95/computer-assisted-surgery-1-638.jpg?cb=1467200461\" \n     data-full=\"https://image.slidesharecdn.com/computerassistedsurgery-160629113952/95/computer-assisted-surgery-1-1024.jpg?cb=1467200461\" \n     alt=\"COMPUTER ASSISTED SURGERY Something \"&gt;\n</code></pre>\n\n<p>The part I need is <code>\"https://image.slidesharecdn.com/computerassistedsurgery-160629113952/95/computer-assisted-surgery-1-1024.jpg?cb=1467200461\"</code> that comes after the attribute <code>data-full</code>. My current code is:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\n\nuse lib \"lib\";\n\nuse URI;\nuse Web::Scraper;\nuse YAML;\nuse WWW::Mechanize;\nuse URI::Encode;\nuse HTTP::Cookies;\nuse LWP::UserAgent;\nuse Data::Dumper;\n\nmy $purlToScrape='https://www.slideshare.net/drdeepashivnani/computer-assisted-surgery?from_m_app=android';\n\nprint \"Scraping $purlToScrape\\n\";\n\nmy $noticescr = scraper {\n  process 'section&gt;img', 'link[]' =&gt; 'TEXT'; \n};\n\nmy $notices = $noticescr-&gt;scrape(URI-&gt;new($purlToScrape));\n\nprint Dumper($notices);\n</code></pre>\n\n<p>This fails with the error:</p>\n\n<blockquote>\n  <p>Don't know what to do with 0 => undef at /usr/local/share/perl/5.20.2/Web/Scraper.pm line 150.</p>\n</blockquote>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["linux", "bash", "perl", "shell"], "comments": [{"owner": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "edited": false, "score": 0, "creation_date": 1489690652, "post_id": 42842137, "comment_id": 72794201, "body": "That&#39;s not the problem and perl script does receive the value. Put a print at line 7. <code>print &quot;direktorioa : $direktorioa \\n&quot;;</code> to verify that."}, {"owner": {"reputation": 1584, "user_id": 1218046, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2feb5b477b063c4d4bb67087baef2802?s=128&d=identicon&r=PG", "display_name": "Haritz", "link": "https://stackoverflow.com/users/1218046/haritz"}, "reply_to_user": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "edited": false, "score": 0, "creation_date": 1489690870, "post_id": 42842137, "comment_id": 72794302, "body": "I put the print but it is ignored and the error from line 9 persists."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1489692026, "post_id": 42842137, "comment_id": 72794979, "body": "What&#39;s with the perl shebang in run.sh?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1489693073, "post_id": 42842137, "comment_id": 72795502, "body": "Naming all your shell programs <code>run.sh</code> won&#39;t help you to find errors."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1489693256, "post_id": 42842137, "comment_id": 72795607, "body": "<i>&quot;I put the print but it is ignored&quot;</i> I suspect that you are editing the wrong <code>run.sh</code>. That is a result of having at least two programs called <code>run.sh</code> and possibly more."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1489695111, "last_edit_date": 1489695111, "creation_date": 1489693414, "answer_id": 42843462, "question_id": 42842137, "link": "https://stackoverflow.com/questions/42842137/can-not-pass-arguments-from-shell-script-to-perl-script/42843462#42843462", "title": "Can not pass arguments from shell script to Perl script", "body": "<p><code>use</code> statements are executed at compile-time, so</p>\n\n<pre><code>use lib \"$direktorioa/rolak/lib\";\n</code></pre>\n\n<p>is executed before</p>\n\n<pre><code>my $direktorioa = \"$ARGV[0]\";\n</code></pre>\n\n<p>Replace</p>\n\n<pre><code>use lib \"$direktorioa/rolak/lib\";\n</code></pre>\n\n<p>with</p>\n\n<pre><code>use lib \"$ARGV[0]/rolak/lib\";\n</code></pre>\n\n<p>That said, you should really be using the following anyway:</p>\n\n<pre><code>use FindBin qw( $RealBin );\nuse lib \"$RealBin/lib\";\n</code></pre>\n"}], "owner": {"reputation": 1584, "user_id": 1218046, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2feb5b477b063c4d4bb67087baef2802?s=128&d=identicon&r=PG", "display_name": "Haritz", "link": "https://stackoverflow.com/users/1218046/haritz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1489695111, "creation_date": 1489688943, "question_id": 42842137, "link": "https://stackoverflow.com/questions/42842137/can-not-pass-arguments-from-shell-script-to-perl-script", "title": "Can not pass arguments from shell script to Perl script", "body": "<p>I have the next shell script which I have named <code>run.sh</code></p>\n\n<pre><code>#!/usr/bin/perl -w\n#!/bin/sh\n\nBROL=\"/sc01a4/users/user/brol\"\nPID=$$\n\nwhile read line\ndo\n  echo \"$line\" &gt;&gt; $BROL/rolak/1_EUSLEM_MATE/Sarrera_Testua_$PID.xml\ndone &lt; \"${1:-/proc/${$}/fd/0}\"\n\nperl $BROL/rolak/NAGUSIA.pl $BROL $PID\n</code></pre>\n\n<p>This script runs <code>NAGUSIA.pl</code> with two arguments, the path <code>BROL</code> and the process id, variable <code>PID</code>.</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse warnings;\n\nmy $direktorioa = \"$ARGV[0]\";\nmy $prozesua = \"$ARGV[1]\";\n\nuse lib \"$direktorioa/rolak/lib\";\nuse SRL::NAGUSIA qw(Egokitu_Sarrera Predikatu_Identifikazioa Predikatu_Desanbiguazioa Argumentuak_Identifikatu Argumentuak_Sailkatu Sortu_Irteera);\n\nEgokitu_Sarrera($prozesua, $direktorioa);\nPredikatu_Identifikazioa($prozesua, $direktorioa);\nPredikatu_Desanbiguazioa($prozesua, $direktorioa);\nArgumentuak_Identifikatu($prozesua, $direktorioa);\nArgumentuak_Sailkatu($prozesua, $direktorioa);\nSortu_Irteera($prozesua, $direktorioa);\n</code></pre>\n\n<p>The Perl script is supposed two receive these two arguments but the command line gives the next error:</p>\n\n<pre><code>Use of uninitialized value $direktorioa in concatenation (.) or string at /sc01a4/users/user/brol/rolak/NAGUSIA.pl line 9.\n</code></pre>\n\n<p>I use the next command in order to run the shell script:</p>\n\n<pre><code>cat brol/proba_fitxategiak/proba4.txt | sh brol/EHU-eustagger/run.sh | sh brol/rolak/run.sh\n</code></pre>\n\n<p>I am using Linux, not Windows. Why the Perl script does not receive the arguments passed by the shell script?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1489681387, "post_id": 42839458, "comment_id": 72788319, "body": "Use /d to match digits.  Use /d+ to match 1 or more."}, {"owner": {"reputation": 23234, "user_id": 4333555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i9zgM.jpg?s=128&g=1", "display_name": "chris85", "link": "https://stackoverflow.com/users/4333555/chris85"}, "edited": false, "score": 0, "creation_date": 1489681391, "post_id": 42839458, "comment_id": 72788326, "body": "Swap <code>100.124.61.161</code> with a valid regex for an IP. <a href=\"http://stackoverflow.com/questions/5284147/validating-ipv4-addresses-with-regexp\" title=\"validating ipv4 addresses with regexp\">stackoverflow.com/questions/5284147/&hellip;</a>"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1489690349, "post_id": 42839458, "comment_id": 72794031, "body": "@stevesliva I believe you mean <code>\\d</code> and <code>\\d+</code> ;)"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489682640, "post_id": 42839663, "comment_id": 72789229, "body": "If there can be nothing but an IP address, this is fine. The OP doesn&#39;t even seem to care about capturing the IP. You do not need to escape colon <code>:</code>, it does not have a special meaning in regex."}], "tags": [], "owner": {"reputation": 1561, "user_id": 1447507, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/f14xA.jpg?s=128&g=1", "display_name": "Srihari Karanth", "link": "https://stackoverflow.com/users/1447507/srihari-karanth"}, "is_accepted": false, "score": 3, "last_activity_date": 1489857633, "last_edit_date": 1489857633, "creation_date": 1489681655, "answer_id": 42839663, "question_id": 42839458, "link": "https://stackoverflow.com/questions/42839458/matching-known-hosts-warning-in-regex/42839663#42839663", "title": "Matching known hosts warning in regex", "body": "<p>You can try the below code, change the string to restrict only specific texts.</p>\n\n<pre><code>if($string =~ m/Warning: Permanently added '(.*?)' \\(RSA\\) to the list of known hosts\\./)\n{\n   print \"Match Successful, IP address: $1\\n\";\n}\nelse\n{\n   print \"String did not match\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1489692991, "post_id": 42839786, "comment_id": 72795449, "body": "I&#39;m not sure you have to worry about not-matching 256.256.256.256"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1489814196, "post_id": 42839786, "comment_id": 72847099, "body": "@stevesliva - Yeah ? Even if the world consisted of nothing but digits and dots ?"}, {"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1489857366, "post_id": 42839786, "comment_id": 72858585, "body": "&quot;How could I match the following where the IP address can change.&quot;  This complicated regex is nice, and the explanation is good-- if you&#39;re worried about the input not being an IP. But it doesn&#39;t actually seem to fully answer the question."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1489859960, "post_id": 42839786, "comment_id": 72859460, "body": "@stevesliva - and what&#39;s your definition of <i>fully</i>? I could mark it as a duplicate if you think there are other answers to IP regex questions."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 1, "last_activity_date": 1489681967, "creation_date": 1489681967, "answer_id": 42839786, "question_id": 42839458, "link": "https://stackoverflow.com/questions/42839458/matching-known-hosts-warning-in-regex/42839786#42839786", "title": "Matching known hosts warning in regex", "body": "<p>A general regex for the ipv4 (no port) would be<br>\n<code>(?&lt;!\\d)(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])(?:\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])){3}(?!\\d)</code>  </p>\n\n<p>Explained  </p>\n\n<pre><code> (?&lt;! \\d )\n (?:\n      \\d                      # 0 - 9\n   |  [1-9] \\d                # 10 - 99\n   |  1 \\d{2}                 # 100 - 199\n   |  2 [0-4] \\d              # 200 - 249\n   |  25 [0-5]                # 250 - 255\n )\n (?:\n      \\.\n      (?:\n           \\d \n        |  [1-9] \\d \n        |  1 \\d{2} \n        |  2 [0-4] \\d \n        |  25 [0-5] \n      )\n ){3}\n (?! \\d )\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4135234, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0d5b06ff1043a5ff7b636b60edec0e96?s=128&d=identicon&r=PG&f=1", "display_name": "telecomToperl", "link": "https://stackoverflow.com/users/4135234/telecomtoperl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1489857633, "creation_date": 1489681007, "question_id": 42839458, "link": "https://stackoverflow.com/questions/42839458/matching-known-hosts-warning-in-regex", "title": "Matching known hosts warning in regex", "body": "<p>How could I match the following where the IP address can change:</p>\n\n<pre><code>Warning: Permanently added '100.124.61.161' (RSA) to the list of known hosts.\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489681323, "post_id": 42839379, "comment_id": 72788275, "body": "With Devel::ebug it will also fail, but immediately. It fails inside of Safe, and <code>$@</code> is not set."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1489681445, "post_id": 42839379, "comment_id": 72788365, "body": "<code>$safe-&gt;share_from( &#39;main&#39;, [ &#39;MyPkg::foo&#39; ] );</code> followed by <code>$safe-&gt;reval(q[MyPkg::foo])</code> works, although I&#39;m not sure why."}, {"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1489699993, "post_id": 42839379, "comment_id": 72798962, "body": "Opsets are inverted from what I thought they were; I needed to pass <code>empty_opset()</code> rather than <code>full_opset()</code>.  I&#39;ve updated the post to reflect the correct usage and the new error."}, {"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1490130485, "post_id": 42839379, "comment_id": 72973323, "body": "I&#39;ve submitted this to the perl5porters: <a href=\"https://rt.perl.org/Public/Bug/Display.html?id=131013\" rel=\"nofollow noreferrer\">rt.perl.org/Public/Bug/Display.html?id=131013</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3676, "user_id": 414279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd8e859d8cf73f2d49eb640964605bb?s=128&d=identicon&r=PG", "display_name": "rurban", "link": "https://stackoverflow.com/users/414279/rurban"}, "is_accepted": false, "score": 1, "last_activity_date": 1492238924, "creation_date": 1492238924, "answer_id": 43423123, "question_id": 42839379, "link": "https://stackoverflow.com/questions/42839379/safe-compartments-with-shared-symbols-causes-perl-debugger-to-croak/43423123#43423123", "title": "Safe compartments with shared symbols causes Perl debugger to croak", "body": "<p>Forget about Sub::Name trickery for the debugger. It's also a very broken module.\nSimple glob assignment (core aliases) or coderef assignment is always easier.</p>\n\n<p>As @ThisSuitIsBlackNot already found out, you need to add more shares, the one from the main:: stash to the loaded module, and need to use the full name in the safe compartment.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Safe;\n\nsub MyPkg::foo { 33; }\n\nmy $safe= Safe-&gt;new;\n$safe-&gt;share_from( 'MyPkg', [ '&amp;foo' ] );\n$safe-&gt;share_from( 'main', [ 'MyPkg::foo' ] );\nprint $safe-&gt;reval(q[MyPkg::foo]);\nprint STDERR $@ if $@;\n</code></pre>\n"}], "owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 2, "answer_count": 1, "score": 7, "last_activity_date": 1492238924, "creation_date": 1489680782, "last_edit_date": 1489699984, "question_id": 42839379, "link": "https://stackoverflow.com/questions/42839379/safe-compartments-with-shared-symbols-causes-perl-debugger-to-croak", "title": "Safe compartments with shared symbols causes Perl debugger to croak", "body": "<p>I'm using Perl 5.22.1.\nSafe 2.39</p>\n\n<p>I'm debugging a program which incidentally runs code in a Safe compartment. The code executes a subroutine shared from another package.  I'm not interested in the code running in the compartment, but cannot avoid its execution.  The Perl debugger croaks inside the compartment when the shared subroutine is executed.</p>\n\n<p>Here's test code:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Safe;\n\nsub MyPkg::foo { 33; }\n\nmy $safe= Safe-&gt;new;\n$safe-&gt;share_from( 'MyPkg', [ '&amp;foo' ] );\nprint $safe-&gt;reval(q[foo]), \"\\n\";\nprint STDERR $@ if $@;\n</code></pre>\n\n<p>When run directly, I get the expected output:</p>\n\n<pre><code>% perl tdebug.pl\n33\n</code></pre>\n\n<p>However, when run under the Perl debugger, the debugger is very unhappy:</p>\n\n<pre><code>% perl -d tdebug.pl\n\nLoading DB routines from perl5db.pl version 1.49\nEditor support available.\n\nEnter h or 'h h' for help, or 'man perldebug' for more help.\n\nmain::(tdebug.pl:8):    my $safe= Safe-&gt;new;\n                                                                                                                                                                   DB&lt;1&gt; c\n\nUndefined subroutine &amp;MyPkg::foo called at [...]/lib/5.22.1/perl5db.pl line 4183.\nDebugged program terminated.                       \n</code></pre>\n\n<p>I deduce that the debugger is attempting to execute the shared subroutine by using its original name, and since that is not available in the compartment, cannot access it.</p>\n\n<p>I can think of two approaches to side step this:</p>\n\n<ol>\n<li>Rename the subrefs so that <code>caller</code>, etc see them as being in the compartment (e.g. with <a href=\"https://metacpan.org/pod/Sub::Name#subname-NAME,-CODEREF\" rel=\"nofollow noreferrer\">Sub::Name::subname</a> )</li>\n<li>Instruct the debugger to not insert itself into the execution of code in Safe compartments</li>\n</ol>\n\n<p>I've attempted to implement the first approach, as follows,</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Safe;\n\n{ package MyPkg;\n  sub foo { 33; }\n}\n\nuse Sub::Name;\nuse Opcode 'empty_opset';\n\nmy $safe= Safe-&gt;new;\n$safe-&gt;mask( empty_opset() );\n$safe-&gt;share_from( 'MyPkg', [ '&amp;foo' ] );\n$safe-&gt;reval( q[use Sub::Name;]) or die \"use Sub::Name: \", $@;\n$safe-&gt;reval( q[subname foo =&gt; \\&amp;foo; 1;]) or die \"subname call\", $@;\n$safe-&gt;permit_only( ':default' );\nprint $safe-&gt;reval( q[ foo ] ), \"\\n\";\nprint STDERR $@ if $@;\n</code></pre>\n\n<p>but am stymied by the following run time error:</p>\n\n<pre><code>use Sub::Name: Can't load module Sub::Name, dynamic loading not available in this perl.\n  (You may need to build a new perl executable which either supports\n  dynamic loading or has the Sub::Name module statically linked into it.)\n at (eval 6) line 1.\nCompilation failed in require at (eval 6) line 1.\nBEGIN failed--compilation aborted at (eval 6) line 1.\n</code></pre>\n\n<p>As for approach 2, would anyone have any ideas on how to implement that?</p>\n"}, {"tags": ["perl", "snakemake"], "answers": [{"comments": [{"owner": {"reputation": 851, "user_id": 1829905, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ab93c7ee26d1ca00d7738b7cdd6f837e?s=128&d=identicon&r=PG", "display_name": "rioualen", "link": "https://stackoverflow.com/users/1829905/rioualen"}, "edited": false, "score": 0, "creation_date": 1489685928, "post_id": 42839390, "comment_id": 72791373, "body": "Hehe, you were faster than me obviously ;-)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489698054, "post_id": 42839390, "comment_id": 72798104, "body": "I like that there are two good answers by two new users. Keep it up. :-)"}, {"owner": {"reputation": 851, "user_id": 1829905, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ab93c7ee26d1ca00d7738b7cdd6f837e?s=128&d=identicon&r=PG", "display_name": "rioualen", "link": "https://stackoverflow.com/users/1829905/rioualen"}, "edited": false, "score": 1, "creation_date": 1489744342, "post_id": 42839390, "comment_id": 72814903, "body": "We happen to be both part of the French &quot;Snakemake community&quot; :)"}], "tags": [], "owner": {"reputation": 297, "user_id": 7224686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2392383db45b9e9e85b32e86b743d22?s=128&d=identicon&r=PG&f=1", "display_name": "Pereira Hugo", "link": "https://stackoverflow.com/users/7224686/pereira-hugo"}, "is_accepted": false, "score": 1, "last_activity_date": 1489698112, "last_edit_date": 1489698112, "creation_date": 1489680807, "answer_id": 42839390, "question_id": 42838510, "link": "https://stackoverflow.com/questions/42838510/how-to-pass-wild-card-arguments-to-perl-script-in-snakefile/42839390#42839390", "title": "how to pass wild card arguments to perl script in snakefile?", "body": "<p>The reason why your rule wants\u200b to run all of your files is simple : the function <strong>expand()</strong>.</p>\n\n<p>Like you seem to know, expand makes\u200b a list of python strings\u200b very useful for managing files in Snakemake.</p>\n\n<p>But in your\u200b example, the rule wants\u200b to run the perl script with a <strong>list of files</strong> in <code>{input.newick}</code> and one file in <code>{input.sup}</code> to produce a list of files as your output.</p>\n\n<p>You can easely resolve your problem by not using the <code>expand function on the input and output</code>.</p>\n\n<p>But how will Snakemake recognize that he has to produce all the files? \nBy creating a <strong>rule target before</strong> your <code>rule add_supergroups</code> which will take as input the expand of your <code>rule add_supergroups</code>.</p>\n\n<p>Let's do some code :</p>\n\n<pre><code>DOMAINS= [\"Metallophos\", \"PP2C\", \"Y_phosphatase\"]\nSUPERGROUPS=[\"2supergroups\",\"5supergroups\"]\n\nrule target :\n  input :\n    expand(\"results/{domain}/{supergroup}/RAxML_bipartitionsBranchLabels.bbhlist.txt.{domain}.fa.aligned.rp.me-25.id.phylip.supergroups\", \n           domain=DOMAINS,\n           supergroup=SUPERGROUPS)\n\nrule add_supergroups:\n    input:\n        newick=\"data/{domain}/{supergroup}/RAxML_bipartitionsBranchLabels.bbhlist.txt.{domain}.fa.aligned.rp.me-25.id.phylip\",\n        sup=\"data/species.v3.1.1.supergroups.txt\"\n    output:\n        \"results/{domain}/{supergroup}/RAxML_bipartitionsBranchLabels.bbhlist.txt.{domain}.fa.aligned.rp.me-25.id.phylip.supergroups\"\n    shell:\n        \"perl scripts/change_newick.pl {input.sup} {input.newick} {output}\"\n</code></pre>\n\n<p>Now it should work. Snakemake need a list of files for the <code>target rule</code>. He search into all the rules to find if one can produce these files.</p>\n\n<p>In this case, he recognize the <code>pattern filename</code> of <code>output add_supergroups</code>. So he will complete the <strong>wilcards</strong> by DOMAINS and SUPERGROUPS automatically. The rule <code>add_supergroups</code> will be run one by one file. </p>\n"}, {"tags": [], "owner": {"reputation": 851, "user_id": 1829905, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ab93c7ee26d1ca00d7738b7cdd6f837e?s=128&d=identicon&r=PG", "display_name": "rioualen", "link": "https://stackoverflow.com/users/1829905/rioualen"}, "is_accepted": false, "score": 3, "last_activity_date": 1489686384, "last_edit_date": 1489686384, "creation_date": 1489685849, "answer_id": 42841145, "question_id": 42838510, "link": "https://stackoverflow.com/questions/42838510/how-to-pass-wild-card-arguments-to-perl-script-in-snakefile/42841145#42841145", "title": "how to pass wild card arguments to perl script in snakefile?", "body": "<p>You can remove the expand() function and use rule \"all\" to define your target. The value of the wildcards in rule add_supergroups will automatically be inferred from this target file. </p>\n\n<p>You could even use different names for the wildcards in rule \"add_supergroups\" for Snakemake would recognize and match the patterns.  </p>\n\n<pre><code>DOMAINS= [\"Metallophos\", \"PP2C\", \"Y_phosphatase\"]\nSUPERGROUPS=[\"2supergroups\",\"5supergroups\"]\n\nrule all: \n    input: expand(\"results/{domain}/{supergroup}/RAxML_bipartitionsBranchLabels.bbhlist.txt.{domain}.fa.aligned.rp.me-25.id.phylip.supergroups\"\n\nrule add_supergroups:\n    input:\n        newick=\"data/{domain}/{supergroup}/RAxML_bipartitionsBranchLabels.bbhlist.txt.{domain}.fa.aligned.rp.me-25.id.phylip\",\n        sup=\"data/species.v3.1.1.supergroups.txt\"\n    output:\n        \"results/{domain}/{supergroup}/RAxML_bipartitionsBranchLabels.bbhlist.txt.{domain}.fa.aligned.rp.me-25.id.phylip.supergroups\"\n    shell:\n        \"perl scripts/change_newick.pl {input.sup} {input.newick} {output}\"\n</code></pre>\n\n<p>Theoretically, it should even work like this: </p>\n\n<pre><code>DOMAINS= [\"Metallophos\", \"PP2C\", \"Y_phosphatase\"]\nSUPERGROUPS=[\"2supergroups\",\"5supergroups\"]\n\nrule all: \n    input: expand(\"results/{domain}/{supergroup}/RAxML_bipartitionsBranchLabels.bbhlist.txt.{domain}.fa.aligned.rp.me-25.id.phylip.supergroups\"\n\nrule add_supergroups:\n    input:\n        newick=\"data/{foo}\",\n        sup=\"data/species.v3.1.1.supergroups.txt\"\n    output:\n        \"results/{foo}.supergroups\"\n    shell:\n        \"perl scripts/change_newick.pl {input.sup} {input.newick} {output}\"\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 7722249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/800956b488eb75ad0b6d31411af69608?s=128&d=identicon&r=PG&f=1", "display_name": "lvw", "link": "https://stackoverflow.com/users/7722249/lvw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1489698112, "creation_date": 1489678569, "last_edit_date": 1489678649, "question_id": 42838510, "link": "https://stackoverflow.com/questions/42838510/how-to-pass-wild-card-arguments-to-perl-script-in-snakefile", "title": "how to pass wild card arguments to perl script in snakefile?", "body": "<p>I try to write a rule in a Snakefile that is able to run a custom perl script. There are two input files and one output file. The inputfile and outputfile have wildcards in them because I want to run the script for various files. But when I expand in order to generate the different input and output files, the perl script takes ALL the possible input files as input while I would like them to go one by one. What should I do to make perl 'eat' the input files one by one? This is my code:</p>\n\n<pre><code>DOMAINS= [\"Metallophos\", \"PP2C\", \"Y_phosphatase\"]\nSUPERGROUPS=[\"2supergroups\",\"5supergroups\"]\n\nrule add_supergroups:\n    input:\n        newick=expand(\"data/{domain}/{supergroup}/RAxML_bipartitionsBranchLabels.bbhlist.txt.{domain}.fa.aligned.rp.me-25.id.phylip\",domain=DOMAINS, supergroup=SUPERGROUPS),\n        sup=\"data/species.v3.1.1.supergroups.txt\"\n    output:\n        expand(\"results/{domain}/{supergroup}/RAxML_bipartitionsBranchLabels.bbhlist.txt.{domain}.fa.aligned.rp.me-25.id.phylip.supergroups\", domain=DOMAINS, supergroup=SUPERGROUPS)\n    shell:\n        \"perl scripts/change_newick.pl {input.sup} {input.newick} {output}\"\n</code></pre>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1489677749, "post_id": 42838144, "comment_id": 72785420, "body": "How come you don&#39;t know what language you are using? Where&#39;s your code? What problem are you having?"}, {"owner": {"reputation": 1, "user_id": 7019352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b2a214f8ee6d765f248e0cbca5ccfd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gaferolo", "link": "https://stackoverflow.com/users/7019352/gaferolo"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489680655, "post_id": 42838144, "comment_id": 72787764, "body": "@ikegami I was trying with sed and awk using this codes: awk &#39;{$0=($0&lt;0)?0:$0}0&#39; OFS=&#39;\\t&#39; test.txt |||| sed *&#39;s/^-.*/0/&#39; test.txt ... but no one works well"}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 0, "creation_date": 1489685294, "post_id": 42838144, "comment_id": 72790978, "body": "I... must... upvote... the... negative... -1... to... zero..."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7019352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b2a214f8ee6d765f248e0cbca5ccfd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gaferolo", "link": "https://stackoverflow.com/users/7019352/gaferolo"}, "edited": false, "score": 0, "creation_date": 1489680240, "post_id": 42838242, "comment_id": 72787426, "body": "thanks, it works correctly! what I wonder now is: how change values of &quot;-nan&quot; into zeros also or into &quot;NaN&quot; in order to use this table in R. Thanks a lot"}, {"owner": {"reputation": 28716, "user_id": 828193, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pmNlX.png?s=128&g=1", "display_name": "user000001", "link": "https://stackoverflow.com/users/828193/user000001"}, "reply_to_user": {"reputation": 1, "user_id": 7019352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b2a214f8ee6d765f248e0cbca5ccfd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gaferolo", "link": "https://stackoverflow.com/users/7019352/gaferolo"}, "edited": false, "score": 0, "creation_date": 1489682584, "post_id": 42838242, "comment_id": 72789191, "body": "@Gaferolo: I added two more examples with the additional requirements."}], "tags": [], "owner": {"reputation": 28716, "user_id": 828193, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pmNlX.png?s=128&g=1", "display_name": "user000001", "link": "https://stackoverflow.com/users/828193/user000001"}, "is_accepted": true, "score": 2, "last_activity_date": 1489682559, "last_edit_date": 1489682559, "creation_date": 1489677843, "answer_id": 42838242, "question_id": 42838144, "link": "https://stackoverflow.com/questions/42838144/replace-negative-numbers-with-zero-in-all-columns-of-a-tab-separated-file/42838242#42838242", "title": "replace negative numbers with zero in all columns of a tab separated file", "body": "<p>Just comparing with zero seems to work in awk:</p>\n\n<pre><code>$ awk -vOFS='\\t' '{for(i=1;i&lt;=NF;i++)if($i&lt;0)$i=0}1' file\n00001   0.0110712   0   0   0.013348    0.000541701 -nan    0.0086972   0.0130983   0.000482555\n00002   0.346079    0.0195448   0.00891779  0.327209    0.00170761  0.000914081 0.28396 0.32112 0.00071226  \n00003   0.000468029 -nan    -nan    0.000470196 -nan    -nan    6.86508e-05 0.000428319 -nan\n</code></pre>\n\n<p>For the additional requirements raised in the comments, if you also want to change \"-nan\" values to zero, you can write:</p>\n\n<pre><code>awk -vOFS='\\t' '{for(i=1;i&lt;=NF;i++)if($i&lt;0||$i==\"-nan\")$i=0}1' file\n</code></pre>\n\n<p>Or if you want to change the \"-nan\" values to \"NaN\" you can do:</p>\n\n<pre><code>awk -vOFS='\\t' '{for(i=1;i&lt;=NF;i++){if($i&lt;0)$i=0;if($i==\"-nan\")$i=\"NaN\"}}1' file\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "edited": false, "score": 0, "creation_date": 1489678386, "post_id": 42838338, "comment_id": 72785899, "body": "would you explain what the lane and the @F do, I get the rest."}, {"owner": {"reputation": 1, "user_id": 7019352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b2a214f8ee6d765f248e0cbca5ccfd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gaferolo", "link": "https://stackoverflow.com/users/7019352/gaferolo"}, "edited": false, "score": 0, "creation_date": 1489680483, "post_id": 42838338, "comment_id": 72787626, "body": "thanks it works, but I don&#39;t know which of both perl or awk last more, So If you have any Ideas of which program could be faster than other @Sobrique"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1489678112, "creation_date": 1489678112, "answer_id": 42838338, "question_id": 42838144, "link": "https://stackoverflow.com/questions/42838144/replace-negative-numbers-with-zero-in-all-columns-of-a-tab-separated-file/42838338#42838338", "title": "replace negative numbers with zero in all columns of a tab separated file", "body": "<p>It's tagged perl, so:</p>\n\n<pre><code>perl -lane 'print join \"\\t\", (map { $_ &lt; 0 ? 0 : $_ } @F)'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7019352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b2a214f8ee6d765f248e0cbca5ccfd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gaferolo", "link": "https://stackoverflow.com/users/7019352/gaferolo"}, "edited": false, "score": 0, "creation_date": 1489680209, "post_id": 42838778, "comment_id": 72787405, "body": "it also change the &quot;-nan&quot; into &quot;0nan&quot;"}, {"owner": {"reputation": 1, "user_id": 7019352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b2a214f8ee6d765f248e0cbca5ccfd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gaferolo", "link": "https://stackoverflow.com/users/7019352/gaferolo"}, "edited": false, "score": 0, "creation_date": 1489680927, "post_id": 42838778, "comment_id": 72787969, "body": "thanks it works, but I wonder if which code could be apropriate to do this, awk, sed, perl.... I am looking for the faster way"}, {"owner": {"reputation": 1, "user_id": 7019352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b2a214f8ee6d765f248e0cbca5ccfd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gaferolo", "link": "https://stackoverflow.com/users/7019352/gaferolo"}, "edited": false, "score": 0, "creation_date": 1492676782, "post_id": 42838778, "comment_id": 74081665, "body": "I want to know how to change also &#39;-nan&#39; values to zeros. some suggestions? Thanks"}], "tags": [], "owner": {"reputation": 14395, "user_id": 1344961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7ad173373ce2a48950108f5adc4b6d?s=128&d=identicon&r=PG", "display_name": "SLePort", "link": "https://stackoverflow.com/users/1344961/sleport"}, "is_accepted": false, "score": 1, "last_activity_date": 1489680536, "last_edit_date": 1489680536, "creation_date": 1489679204, "answer_id": 42838778, "question_id": 42838144, "link": "https://stackoverflow.com/questions/42838144/replace-negative-numbers-with-zero-in-all-columns-of-a-tab-separated-file/42838778#42838778", "title": "replace negative numbers with zero in all columns of a tab separated file", "body": "<p>With sed:</p>\n\n<pre><code>sed 's/\\([[:space:]]*\\)-[0-9.e-]\\{1,\\}/\\10/g' file\n</code></pre>\n\n<p>or using ERE:</p>\n\n<pre><code>sed -r 's/(\\s*)-[0-9.e-]+/\\10/g' file\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7019352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b2a214f8ee6d765f248e0cbca5ccfd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gaferolo", "link": "https://stackoverflow.com/users/7019352/gaferolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 920, "favorite_count": 0, "accepted_answer_id": 42838242, "answer_count": 3, "score": -3, "last_activity_date": 1489682559, "creation_date": 1489677587, "question_id": 42838144, "link": "https://stackoverflow.com/questions/42838144/replace-negative-numbers-with-zero-in-all-columns-of-a-tab-separated-file", "title": "replace negative numbers with zero in all columns of a tab separated file", "body": "<p>I want to replace with sed or awk or even in perl <strong>all negative numbers</strong> with <strong>zeros</strong>. Just the negative numbers, I say this because there are negative nan (-nan) and I want to keep it. But it would be nice know how to change also the \"-nan\" string to zero value in case of I would need in a future.</p>\n\n<p>I find some answers related to replacement of negative values but just for one specific column, in my case I have at least 9 columns with positive and negative numbers (from 2nd column to 9th column)</p>\n\n<p>I let you an example of my input file:</p>\n\n<pre><code>00001   0.0110712   -0.00113939 -3.67103e-05    0.013348    0.000541701 -nan    0.0086972   0.0130983   0.000482555 \n00002   0.346079    0.0195448   0.00891779  0.327209    0.00170761  0.000914081 0.28396 0.32112 0.00071226  \n00003   0.000468029 -nan    -nan    0.000470196 -nan    -nan    6.86508e-05 0.000428319 -nan\n</code></pre>\n\n<p>Thanks beforehand!, \nBest!</p>\n"}, {"tags": ["javascript", "perl", "http-request"], "comments": [{"owner": {"reputation": 82, "user_id": 2523615, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JNM0f.png?s=128&g=1", "display_name": "Sophia", "link": "https://stackoverflow.com/users/2523615/sophia"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489676915, "post_id": 42837795, "comment_id": 72784736, "body": "not sure if it is a custom http header, I assumed it meant &#39;query string&#39;, I guess I should have tried declaring it as a custom header.  Trying it now.  Thanks for pointing that out."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1489678436, "last_edit_date": 1489678436, "creation_date": 1489677154, "answer_id": 42837974, "question_id": 42837795, "link": "https://stackoverflow.com/questions/42837795/perl-equivalent-of-a-sample-javascript-codes/42837974#42837974", "title": "Perl equivalent of a sample JavaScript codes", "body": "<p>You can use the <a href=\"http://search.cpan.org/perldoc?URI\" rel=\"nofollow noreferrer\">URI</a> module (possibly supplemented by the <a href=\"http://search.cpan.org/perldoc?URI::QueryParam\" rel=\"nofollow noreferrer\">URI::QueryParam</a> module) to build (and manipulate) a URL.</p>\n\n<pre><code>use HTTP::Request::Common qw( POST );\nuse JSON::XS              qw( encode_json );\nuse URI                   qw( );\n\nmy $message_data = encode_json(...);\n\nmy $url = URI-&gt;new('https://graph.facebook.com/v2.6/me/messages');\n$url-&gt;query_form( access_token =&gt; PAGE_ACCESS_TOKEN );\n\nmy $req = POST($url,\n   Content_Type =&gt; 'application/json',\n   Content      =&gt; $message_data,\n);\n</code></pre>\n"}], "owner": {"reputation": 82, "user_id": 2523615, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JNM0f.png?s=128&g=1", "display_name": "Sophia", "link": "https://stackoverflow.com/users/2523615/sophia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 42837974, "answer_count": 1, "score": 2, "last_activity_date": 1489678436, "creation_date": 1489676736, "last_edit_date": 1489677542, "question_id": 42837795, "link": "https://stackoverflow.com/questions/42837795/perl-equivalent-of-a-sample-javascript-codes", "title": "Perl equivalent of a sample JavaScript codes", "body": "<p>I have this code:</p>\n\n<pre><code>  request({\n    uri: 'https://graph.facebook.com/v2.6/me/messages',\n    qs: { access_token: PAGE_ACCESS_TOKEN },\n    method: 'POST',\n    json: messageData\n  })\n</code></pre>\n\n<p>I'd like to convert that into Perl, what I have so far is:</p>\n\n<pre><code>my $req = HTTP::Request-&gt;new( 'POST', 'https://graph.facebook.com/v2.6/me/messages');\n$req-&gt;header( 'Content-Type' =&gt; 'application/json' );\n$req-&gt;content( $messageData );\n</code></pre>\n\n<p>I not sure how I can incorporate the following line into my Perl code:</p>\n\n<pre><code>qs: { access_token: PAGE_ACCESS_TOKEN },\n</code></pre>\n\n<p>It specifies a query parameter to add to the URL.</p>\n\n<p>I tried to search the net but most example either sends the json content or the query string but not both.  I need something that can send both if my interpretation to the JavaScript code is correct.</p>\n\n<p>Thanks in advance to anyone who will guide me.</p>\n"}, {"tags": ["perl", "telnet"], "comments": [{"owner": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "edited": false, "score": 3, "creation_date": 1489679244, "post_id": 42836879, "comment_id": 72786647, "body": "This is somewhat outside standards land, as Telnet was supposed to be ASCII. Try passing bin_mode =&gt; 1 to Net::Telnet-&gt;new, and doing the decoding of lines yourself with Encode. See Encode::CN for a simplified charset encodings to try."}, {"owner": {"reputation": 103, "user_id": 2694987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87d8f4026e2253a626b08c67ad3bf8d9?s=128&d=identicon&r=PG&f=1", "display_name": "spatiallyConfused", "link": "https://stackoverflow.com/users/2694987/spatiallyconfused"}, "reply_to_user": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "edited": false, "score": 0, "creation_date": 1489744583, "post_id": 42836879, "comment_id": 72815060, "body": "Thanks for that, @FrankRalphBob. I&#39;ve been trying various tricks with Encode, but with no luck so far. Will post my results here if I find a winner!"}], "owner": {"reputation": 103, "user_id": 2694987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87d8f4026e2253a626b08c67ad3bf8d9?s=128&d=identicon&r=PG&f=1", "display_name": "spatiallyConfused", "link": "https://stackoverflow.com/users/2694987/spatiallyconfused"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1489674420, "creation_date": 1489674420, "question_id": 42836879, "link": "https://stackoverflow.com/questions/42836879/nettelnet-and-chinese-characters", "title": "Net::Telnet and Chinese characters", "body": "<p>I'm having difficulty dealing with (Traditional) Chinese characters when outputting text using Perl Net::Telnet. For instance, if I connect to ptt.cc (based in Taiwan), the text output does not have the correct character encoding. </p>\n\n<p>Here's a very simple example: </p>\n\n<pre><code>use Net::Telnet (); \n$t = new Net::Telnet; \n$t-&gt;open(\"ptt.cc\"); \n\n$contents = $t-&gt;get;\n\nprint $contents;\n\nexit;\n</code></pre>\n\n<p>Can anyone help?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6734995"}, "edited": false, "score": 0, "creation_date": 1489675984, "post_id": 42836783, "comment_id": 72784008, "body": "Thanks for the good explanations and for the examples! The problem which I have is not that warning, but the error. I thought somehow they are interfering one with another. Do you think that the warning and the stuff that it&#39;s happening there is related ( or a cause) to the error?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1489677104, "post_id": 42836783, "comment_id": 72784877, "body": "What is in $self-&gt;{logFile}? Is it a valid and writeable filename?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6734995"}, "edited": false, "score": 0, "creation_date": 1489752756, "post_id": 42836783, "comment_id": 72820463, "body": "sorry for the late reply, yes it is!"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 6, "last_activity_date": 1489674194, "creation_date": 1489674194, "answer_id": 42836783, "question_id": 42835415, "link": "https://stackoverflow.com/questions/42835415/filehandle-stdout-reopened-as-file-only-for-input/42836783#42836783", "title": "Filehandle STDOUT reopened as FILE only for input", "body": "<p>At your Perl program startup, file descriptor 0 is <code>STDIN</code>, and opened for input. And file descriptors 1 and 2 (<code>STDOUT</code> and <code>STDERR</code>) are opened for output. It is perfectly legal to close these standard filehandles (and occasionally some good reasons to do so).</p>\n\n<p>When you open a new filehandle, Perl might use a new file descriptor, or it might reuse an old one that had been previously closed. If you closed a standard filehandle, and again, there are many good reasons why you might have done that, Perl might reuse the standard file descriptor for the new filehandle.</p>\n\n<p>One check that Perl performs when it opens a filehandle and assigns a standard file descriptor is to check the mode of the filehandle with the expected mode of that file descriptor, and to warn when the modes don't match. This is to keep you from doing something silly with the standard filehandles that might be hard to debug further downstream</p>\n\n<pre><code>$ perl -Mdiagnostics -we 'close STDIN;open STDIN,\"&gt;foo\"'\nFilehandle STDIN reopened as FOO only for output at -e line 1 (#2)\n    (W io) You opened for writing a filehandle that got the same filehandle id\n    as STDIN.  This occurred because you closed STDIN previously.\n</code></pre>\n\n<p>but also issues the warning when you are doing something else legally and correctly</p>\n\n<pre><code>$ perl -Mdiagnostics -we '\nmy $input = &lt;STDIN&gt;;\nclose STDIN;\nopen my $fh, \"&gt;foo\";\nprint $fh \"your input was $input\";\nclose $fh'\nFilehandle STDIN reopened as $fh only for output at -e line 4 (#1)\n    (W io) You opened for writing a filehandle that got the same filehandle id\n    as STDIN.  This occurred because you closed STDIN previously.\n</code></pre>\n\n<p>This is just a warning.</p>\n\n<p>To suppress it, you can redirect the standard filehandles to <code>/dev/null</code> (or on Windows, to <code>nul</code>) when you close them. That is, instead of</p>\n\n<pre><code>close STDIN;\n...\nopen FOO, '&gt;foo';         # might get reassigned to fd 0\n</code></pre>\n\n<p>say</p>\n\n<pre><code>close STDIN;\nopen STDIN, '&lt;nul';       # /dev/null on POSIX systems\n...\nopen FOO, '&gt;foo';         # won't get reassigned to fd 0\n...\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6734995"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1186, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1489674194, "creation_date": 1489670725, "question_id": 42835415, "link": "https://stackoverflow.com/questions/42835415/filehandle-stdout-reopened-as-file-only-for-input", "title": "Filehandle STDOUT reopened as FILE only for input", "body": "<p>Giving the following (medieval age) code:</p>\n\n<pre><code># Method to save and close the Standard output(STDOUT) and after to redirect the\n# STDOUT in the log file of the step\nsub doSomething{\n    open(_OLDOUT, \"&gt;&amp;STDOUT\") or Error('001', \"open\", \"Standard OUT\", __PACKAGE__, $ERRNO);\n    close(STDOUT) or Error('001', \"close\", \"Standard OUT\", __PACKAGE__, $ERRNO);\n    open(STDOUT, \"&gt;\".$self-&gt;{logFile}) or Error('001', \"open\", \"Standard OUT\", __PACKAGE__, $ERRNO);\n}\n</code></pre>\n\n<p>I get an error at the first <code>open</code> command. The error is formatted with a function <code>Error</code> which gives me this message:</p>\n\n<pre><code>ERROR-001: System command &lt;open&gt; failed in file Standard OUT for module core::AnotherModule. Reason: !\n</code></pre>\n\n<p>Before this error I get an warning: </p>\n\n<pre><code>Filehandle STDOUT reopened as FILE only for input at d:\\Path/FirstModule.pm\n</code></pre>\n\n<p>This is the line of code (from FirstModule.pm) that generates it : </p>\n\n<pre><code>open FILE, \"&lt;\".$file or Error('005',$file,__PACKAGE__,$ERRNO);\n</code></pre>\n\n<p>Of course this is just a chunk of the code behind it.\nI searched on the internet and at first sight it seems that <code>STDOUT</code> is closed earlier and when I am creating a handle to a file it is considered as <code>STDOUT</code>. What options do I have? Would it be safe to open manually the <code>STDOUT</code> to avoid the error?\nP.S. The whole program is also multi-threading.</p>\n"}, {"tags": ["perl", "perl-module", "separation-of-concerns"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 1, "creation_date": 1489670546, "post_id": 42835271, "comment_id": 72779808, "body": "It would be more flexible to accept a list of filenames, that way users of the module can use any data source they want."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 2, "creation_date": 1489670688, "post_id": 42835271, "comment_id": 72779894, "body": "Passing iterator sub to your module makes sense, <code>MyModule::method(sub{ scalar &lt;ARGV&gt; })</code>"}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1489670794, "post_id": 42835271, "comment_id": 72779961, "body": "@\u0421\u0443\u0445\u043e\u043927 this is a thing I thought of (in C++), but I was not able to think of it in Perl. Great! Is this right: it gives one line for each call in scalar context?"}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1489671010, "post_id": 42835271, "comment_id": 72780099, "body": "@HunterMcMillen, absolutely. In my case it&#39;s also important to have this because the log contents continues over file boundaries."}], "answers": [{"comments": [{"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 1, "creation_date": 1489671980, "post_id": 42835747, "comment_id": 72780892, "body": "The explicit <code>defined</code> prevents from terminating on empty lines, or lines that consist entirely of <code>0</code>. Isn&#39;t having <code>&quot;\\n&quot;</code> sufficient?"}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1489672194, "post_id": 42835747, "comment_id": 72781056, "body": "Wouldn&#39;t <code>my $iter = shift;</code> fit better here (as we see the example usage)?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1489672226, "post_id": 42835747, "comment_id": 72781072, "body": "If you have a properly formatted unix text file (i.e. one that has a newline at the end of every line), the <code>defined</code> is indeed unnecessary. The <code>defined</code> is there in case the last line is <code>0</code> and it doesn&#39;t include the newline."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489672263, "post_id": 42835747, "comment_id": 72781102, "body": "No, <code>my $iter = shift;</code> is not better, just different. (Technically, from a self-documentation point of view, it&#39;s worse because it implies there might be more in <code>@_</code>. OTOH, <code>shift</code> is ever so slightly faster, IIRC.)"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 1, "creation_date": 1489672377, "post_id": 42835747, "comment_id": 72781196, "body": "@Wolf <code>shift</code> alters <code>@_</code> array, unlike assignment. <code>defined</code> is implicit when iterating with <code>while</code> over filehandle; <code>perl -MO=Deparse -e &#39;print while &lt;ARGV&gt;&#39;</code> =&gt; <code>print $_ while defined($_ = &lt;ARGV&gt;);</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489672474, "post_id": 42835747, "comment_id": 72781267, "body": "Re &quot;<i><code>shift</code> alters <code>@_</code> array, unlike assignment.</i>&quot;, So what?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1489672517, "post_id": 42835747, "comment_id": 72781290, "body": "So it differs in that sense from assignment."}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 1, "creation_date": 1489672542, "post_id": 42835747, "comment_id": 72781303, "body": "I think the term <b>iterator</b> should be stressed (in a positive way). After you brought it in your comment, I got much further with that: made my own test (after reading <a href=\"http://www.perl.com/pub/2005/06/16/iterators.html\" rel=\"nofollow noreferrer\">Understanding and Using Iterators - Perl.com</a>) right before I read your answer."}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 4, "last_activity_date": 1489672816, "last_edit_date": 1489672816, "creation_date": 1489671606, "answer_id": 42835747, "question_id": 42835271, "link": "https://stackoverflow.com/questions/42835271/should-i-read-from-argv-in-own-perl-module/42835747#42835747", "title": "should I read from ARGV in own perl module", "body": "<p>You can make your function unaware of <code>&lt;ARGV&gt;</code> iterator logic,</p>\n\n<pre><code>sub foo {\n    my ($iter) = @_;\n\n    # `defined()` should be used explicitly unlike `while (&lt;ARGV&gt;)`\n    while (defined (my $line = $iter-&gt;())) {\n        # if ..\n    }\n}\n\nfoo(sub{ scalar &lt;ARGV&gt; }); # force scalar context; one line/record per call\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1489679007, "post_id": 42838452, "comment_id": 72786429, "body": "Would your suggestion work also with a list of file(name)s? That&#39;s what I&#39;m actually needing."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1489684015, "post_id": 42838452, "comment_id": 72790172, "body": "File handles are more flexible than file names. Any reason you couldn&#39;t call the sub once for each file? In that case, you could still pass a file handle."}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1489747766, "post_id": 42838452, "comment_id": 72817215, "body": "<i><code>more flexible than file names</code></i> -- well, I was not very clear about this: I currently depend on this file-list magic of Perl. But your points helped nevertheless: I removed the <code>$_</code> usages, and you made me think again about the interface (input and output). But you will certainly admit that iterators are at least as flexible as files."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1489760242, "post_id": 42838452, "comment_id": 72825803, "body": "For sure, though possibly overkill"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1489678395, "creation_date": 1489678395, "answer_id": 42838452, "question_id": 42835271, "link": "https://stackoverflow.com/questions/42835271/should-i-read-from-argv-in-own-perl-module/42838452#42838452", "title": "should I read from ARGV in own perl module", "body": "<p>I would write it such that it accepts any file handle. Then, you could use <code>\\*ARGV</code> as the argument.</p>\n\n<p>Also, don't clobber your caller's <code>$_</code>. <code>$_</code> is often aliased to other variables (which would have far-reaching consequences) and constants (which would cause your code to fail). Use your own lexically-scoped variable instead (or at least add <code>local *_;</code> first).</p>\n"}], "owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 42835747, "answer_count": 2, "score": 4, "last_activity_date": 1489678395, "creation_date": 1489670370, "question_id": 42835271, "link": "https://stackoverflow.com/questions/42835271/should-i-read-from-argv-in-own-perl-module", "title": "should I read from ARGV in own perl module", "body": "<p>My Perl extracts and processes data from (multiple) log file(s), currently processing all files in <code>@ARGV</code>.</p>\n\n<p>The most important part of this script is the <strong>log decoding</strong> itself, it incorporates a lot of knowledge about the log file format. This transforming part from log (actually into an array of hashs) has proven to be <strong>subject of change</strong> (as the log format evolves), and to be the <strong>basis for further processing</strong> steps: there are often specific questions to answer from the decoded records which is done best right in Perl, that's why I'm thinking of making it a module.</p>\n\n<p>The core function is using nested (or name it <em>scoped</em>) pattern matching sitting in a <code>while (&lt;&gt;)</code> loop:</p>\n\n<pre><code>while (&lt;ARGV&gt;) {\n    $totalLines ++;\n    if (m/^(\\d{4}-\\d\\d-\\d\\d \\d\\d:\\d\\d:\\d\\d) L(\\d) (.+)/) {\n        my $time = $1;\n        my $line = $2;\n        my $event = $3;\n        if ($event =~ m/^connect: (.+)$/) {\n            $pendings{$line}{station} = $1;\n            ...\n</code></pre>\n\n<p>...more than 200 lines follow before the closing braces. </p>\n\n<p>I have the feeling that simply reading from <code>ARGV</code> would exceed the <em><a href=\"http://perldoc.perl.org/perlmodstyle.html#Before-you-start\" rel=\"nofollow noreferrer\">Do one thing and do it well</a></em> rule. When I searched the web, I found nothing that speaks explicitly <em>for</em> or <em>against</em> reading from <code>ARGV</code> in module, but maybe my search patterns were just poor. <sup>[1]</sup> <sup>[2]</sup></p>\n\n<p><strong>(How) should I re-frame my decoding for placing it into a module?</strong><br/><sub>...or should I change my feelings about this?</sub></p>\n\n<hr>\n\n<p><sup>[1]</sup> <a href=\"http://perldoc.perl.org/perltrap.html\" rel=\"nofollow noreferrer\">perltrap - perldoc.perl.org</a> <br/>\n<sup>[2]</sup> <a href=\"http://perldoc.perl.org/perlmodstyle.html\" rel=\"nofollow noreferrer\">perlmodstyle - perldoc.perl.org</a></p>\n"}, {"tags": ["arrays", "json", "perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1489673637, "post_id": 42831496, "comment_id": 72782112, "body": "<a href=\"http://perlmonks.org/?node=References+quick+reference\" rel=\"nofollow noreferrer\">perlmonks.org/?node=References+quick+reference</a>"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 4, "last_activity_date": 1489661044, "last_edit_date": 1489661044, "creation_date": 1489660717, "answer_id": 42831677, "question_id": 42831496, "link": "https://stackoverflow.com/questions/42831496/perl-how-to-find-a-size-of-array-in-hash-from-json/42831677#42831677", "title": "Perl, how to find a size of array in hash from json", "body": "<p>To get the size of <code>cols</code>:</p>\n\n<pre><code>print scalar @{$params-&gt;{tab}-&gt;{cols}};\n</code></pre>\n\n<p>You're retrieving an array reference from this key, dereferencing it to get an array and then using it in a scalar context - which returns the size of array. </p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse JSON;\nuse Data::Dumper;\n\nmy $params = from_json(\n   '{\n        \"tab\" : {\n            \"sort\" : \"true\",\n            \"sort_by\" : \"0\",\n            \"name\" : \"blablabla\",\n            \"cols\" : [\n                \"time_ep\",\n                \"count_warning\",\n                \"count_critical\"\n            ]\n        }\n    }'\n);\n\nprint Dumper $params;\nprint scalar @{ $params-&gt;{tab}-&gt;{cols} }\n</code></pre>\n\n<p>Note - <code>scalar</code> explicitly forces scalar context, but it will happen implicitly if you do 'scalar operations' like concatenation or numeric comparison. (<code>print</code> doesn't force scalar context)</p>\n"}], "owner": {"reputation": 377, "user_id": 5373538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-GxkXfmMS09k/AAAAAAAAAAI/AAAAAAAAAVE/5swI3yJ70nE/photo.jpg?sz=128", "display_name": "genesi5", "link": "https://stackoverflow.com/users/5373538/genesi5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 0, "accepted_answer_id": 42831677, "answer_count": 1, "score": 1, "last_activity_date": 1489661044, "creation_date": 1489660377, "question_id": 42831496, "link": "https://stackoverflow.com/questions/42831496/perl-how-to-find-a-size-of-array-in-hash-from-json", "title": "Perl, how to find a size of array in hash from json", "body": "<p>So, i have this example of json:    </p>\n\n<pre><code>{\n        \"tab\" : {\n            \"sort\" : \"true\",\n            \"sort_by\" : \"0\",\n            \"name\" : \"blablabla\",\n            \"cols\" : [\n                \"time_ep\",\n                \"count_warning\",\n                \"count_critical\"\n            ]\n        }\n    }\n</code></pre>\n\n<p>And after i decoded it into perl hash, i got a problem with \"cols\" array.\nThe <code>print Dumper ${$params-&gt;{$tab}}{cols}</code> looks like that</p>\n\n<pre><code>$VAR1 = [\n          'time_ep',\n          'count_warning',\n          'count_critical'\n        ];\n</code></pre>\n\n<p>I can't find the size of this array. When i'm trying to do that - it returns <code>1</code> or <code>ARRAY(adress)</code>, but when i try to get single elements of array like that:\n<code>print Dumper ${$params-&gt;{$tab}}{cols}[1]</code> - i get what i need:</p>\n\n<pre><code>$VAR1 = 'count_warning';\n</code></pre>\n\n<p>I tried various options with refs, but nothing gave me what i need.\nAny suggestions?</p>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1489666751, "creation_date": 1489666751, "answer_id": 42833910, "question_id": 42831224, "link": "https://stackoverflow.com/questions/42831224/why-mojolicious-action-is-not-called/42833910#42833910", "title": "Why mojolicious action is not called?", "body": "<p>While this do not describe why <code>cb</code> is called when it should not be. We can take control a bit over that:</p>\n\n<pre><code>$rn =  $rn-&gt;any( '/users' );\n$rn =  $rn-&gt;any( '/:id', \\&amp;setup_id )-&gt;inline( 1 ); # Enable: /users/me/avatar\n$rn =  $rn-&gt;any( '/avatar' )-&gt;to( 'avatar#test' );\n</code></pre>\n\n<p>The <code>inline</code> options force <code>setup_id</code> sub will be called always. At this sub we setup param <code>id</code> by current users. So instead of <code>/users/23/avatar</code> we can write <code>/users/me/avatar</code>:</p>\n\n<pre><code>sub setup_id {\n    my $c =  shift;\n    my $id =  $c-&gt;param( 'id' );\n    # TODO: Should we replace $c-&gt;stash-&gt;{ id } too?\n    $c-&gt;param( id =&gt;  $c-&gt;uid )   if $id  &amp;&amp;  $id eq 'me';\n    return 1;\n}\n</code></pre>\n\n<p><em>TIP: Do not forget to <code>return 1</code></em></p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1489666751, "creation_date": 1489659722, "last_edit_date": 1489666257, "question_id": 42831224, "link": "https://stackoverflow.com/questions/42831224/why-mojolicious-action-is-not-called", "title": "Why mojolicious action is not called?", "body": "<p>I have routes configured as:</p>\n\n<pre><code>$rn =  $rn-&gt;any( '/users',  sub{ my $c =  shift; $DB::single =  1; 1; } );  # first cb\n$rn =  $rn-&gt;any( '/me',     sub{ my $c =  shift; $DB::single =  1; 1; } );  # second cb\n$rn =  $rn-&gt;any( '/avatar' )-&gt;to( 'avatar#test' );                          # action\n</code></pre>\n\n<p>When I do request <code>GET /users/me/avatar</code> I get second callback is executed.</p>\n\n<p>But I expect <code>avatar#test</code> action to be run.</p>\n\n<p>I am confused. The <a href=\"http://mojolicious.org/perldoc/Mojolicious/Guides/Routing#Route-to-callback\" rel=\"nofollow noreferrer\">DOC</a> states:</p>\n\n<blockquote>\n  <p>The cb stash value, which won't be inherited by nested routes, can be used to bypass controllers and execute a callback instead.</p>\n</blockquote>\n\n<p>The <code>/avatar</code> is nested into <code>/me</code> and <code>cb</code> should not be inherited, but at dispatch time I get <code>stack</code> with <code>cb</code> value. Here is dump:</p>\n\n<pre><code>[\n  { action =&gt; \"test\", cb =&gt; sub { ... }, controller =&gt; \"avatar\" },\n]\n</code></pre>\n\n<p>May someone please clarify. What why second <code>cb</code> is present in stack while the DOC states is should not?</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489659682, "post_id": 42831162, "comment_id": 72772097, "body": "You are not copying values, you are copying references. That just creates more pointers to the same data."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1489660301, "creation_date": 1489660301, "answer_id": 42831469, "question_id": 42831162, "link": "https://stackoverflow.com/questions/42831162/hash-copy-and-delete-in-perl/42831469#42831469", "title": "hash copy and delete in perl", "body": "<p>If you assign a reference to a new variable, the value behind the reference is not copied. Instead, the reference is copied. Imagine you have the name of a book written on a piece of paper. If you give me a copy of that paper, I do not get a copy of the book, only of the name that references the book.</p>\n\n<p>You need to copy each individual reference. An easy way to do this is with <code>dclone</code> from the core module <a href=\"https://metacpan.org/pod/Storable\" rel=\"nofollow noreferrer\">Storable</a>.</p>\n\n<pre><code>use Storable 'dclone';\nmy %hash_backup = %{ dclone(\\%hash) };\n</code></pre>\n\n<p>If your data structure is smaller than three levels on average, you might want to look into <a href=\"https://metacpan.org/pod/Clone\" rel=\"nofollow noreferrer\">Clone</a>, which claims it's faster.</p>\n\n<pre><code>use Clone 'clone';\nmy %hash_backup = %{ clone(\\%hash) };\n</code></pre>\n\n<p>In both cases, a reference is expected. Because you want a hash, and not a hash reference, you need to pass in a new ref <code>\\%foo</code> and dereference on the way out <code>%{ ... }</code>.</p>\n\n<p>If you wanted to do this on your own, you would have to walk the data structure, copying each reference. To force Perl to make a copy of the data, and not the reference, you need to dereference and create a new reference.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Printer;\n\nmy $foo = { foo =&gt; 'bar' };\nmy $bar = { %$foo };\n$bar-&gt;{foo} = 123;\n\np $foo;\np $bar;\n</code></pre>\n\n<p>This outputs</p>\n\n<pre><code>\\ {\n    foo   \"bar\"\n}\n\\ {\n    foo   123\n}\n</code></pre>\n\n<p>I suggest you read <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a> and <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1489660393, "creation_date": 1489660393, "answer_id": 42831506, "question_id": 42831162, "link": "https://stackoverflow.com/questions/42831162/hash-copy-and-delete-in-perl/42831506#42831506", "title": "hash copy and delete in perl", "body": "<p>The thing you need to realise is the way multidimensional data structures work in perl - they work by references. </p>\n\n<p>So you don't have a hash of hashes - you have a hash of hash <em>references</em>. </p>\n\n<p>Try:</p>\n\n<pre><code>print values %hash;\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>print $hash{data1};\n</code></pre>\n\n<p>And you will see something like:</p>\n\n<pre><code>HASH(0x33cff8)\n</code></pre>\n\n<p>Which is where the value of <code>$hash{one}</code> references.</p>\n\n<p>What you are doing is adding that <em>reference</em> to your second hash. But the structure it refers to... is still the original one:</p>\n\n<pre><code>print $hash_backup{data1};\n</code></pre>\n\n<p>will also print:</p>\n\n<pre><code>HASH(0x33cff8)\n</code></pre>\n\n<p>So they're not two separate data structures - they're both referring to the same sub-hash. </p>\n\n<p>As to what the solution is? Well, it depends what you're trying to accomplish. Copying a hash like that doesn't work the way you're assuming, so you need to do something else. There's a variety of methods of cloning it, such as using <code>Storable</code>, or just walking the keys recursively 'by hand'. But I'd suggest first considering what your goal is, and try and find something that fits. </p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 1743535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38102a0939ea5f595247a23fe5452f95?s=128&d=identicon&r=PG", "display_name": "Sadrak", "link": "https://stackoverflow.com/users/1743535/sadrak"}, "is_accepted": false, "score": 1, "last_activity_date": 1489661215, "last_edit_date": 1495539985, "creation_date": 1489660625, "answer_id": 42831640, "question_id": 42831162, "link": "https://stackoverflow.com/questions/42831162/hash-copy-and-delete-in-perl/42831640#42831640", "title": "hash copy and delete in perl", "body": "<p>You need a <code>deep copy</code> or <code>clone</code> to copy the entirely hash and not only the first level of elements.</p>\n\n<p>See here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1546322/whats-the-best-way-to-deep-copy-a-hash-of-hashes-in-perl\">What&#39;s the best way to deep copy a hash of hashes in Perl?</a></p>\n"}], "owner": {"reputation": 27, "user_id": 3934476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d77efd64cd2ec578105b1bb0716a7f9e?s=128&d=identicon&r=PG&f=1", "display_name": "user3934476", "link": "https://stackoverflow.com/users/3934476/user3934476"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1489661215, "creation_date": 1489659571, "last_edit_date": 1489659923, "question_id": 42831162, "link": "https://stackoverflow.com/questions/42831162/hash-copy-and-delete-in-perl", "title": "hash copy and delete in perl", "body": "<p>I want to back up the hash, keep the original hash, and use the backed up hash data.</p>\n\n<p>And deleted the backup hash data.</p>\n\n<p>However, the original hash data has been deleted.</p>\n\n<p>Here is the code.</p>\n\n<pre><code>my %hash = (\n    'data1' =&gt; {\n        'data2' =&gt; {\n            'data3' =&gt; 'one',\n        },\n    },\n);\nforeach (1..3) {\n    my %hash_backup = %hash;\n    print $hash{'data1'}-&gt;{'data2'}-&gt;{'data3'},\"\\n\";\n    print $hash_backup{'data1'}-&gt;{'data2'}-&gt;{'data3'},\"\\n\";\n    print \"-------------------------------\\n\";\n\n    delete $hash_backup{'data1'}-&gt;{'data2'};\n\n    print $hash{'data1'}-&gt;{'data2'}-&gt;{'data3'},\"\\n\";\n    print $hash_backup{'data1'}-&gt;{'data2'}-&gt;{'data3'},\"\\n\";\n    print \"================================\\n\";\n}\n</code></pre>\n\n<p>Result,</p>\n\n<pre><code>one\none\n-------------------------------\n\n\n================================\n\n\n-------------------------------\n\n\n================================\n\n\n-------------------------------\n\n\n================================\n</code></pre>\n\n<p>If you change the delete code, it works normally.</p>\n\n<pre><code>delete $hash_backup{'data1'};\n</code></pre>\n\n<p>Result,</p>\n\n<pre><code>one\none\n-------------------------------\none\n\n================================\none\none\n-------------------------------\none\n\n================================\none\none\n-------------------------------\none\n\n================================\n</code></pre>\n\n<p>I think it is a hash reference problem.</p>\n\n<p>How can I keep the original hash and delete the backup hash?</p>\n"}, {"tags": ["bash", "perl", "awk", "hex", "ascii"], "comments": [{"owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "edited": false, "score": 0, "creation_date": 1489675198, "post_id": 42828273, "comment_id": 72783342, "body": "I would have said you would be hard pressed to find many systems that do not have perl on them."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "edited": false, "score": 0, "creation_date": 1489676517, "post_id": 42828273, "comment_id": 72784410, "body": "@grail most of the UNIX systems I&#39;ve had to work with haven&#39;t had perl on them and I wasn&#39;t authorized to install it so YMMV."}, {"owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1489677004, "post_id": 42828273, "comment_id": 72784813, "body": "@EdMorton the OP did mention linux and I have never worked on one that doesn&#39;t have perl :)"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1489677428, "post_id": 42828273, "comment_id": 72785131, "body": "idk I&#39;ve never worked on anything that ran linux AFAIK. Or maybe I have and just don&#39;t remember it. In any case, he listed a whole bunch of different platforms and I would be surprised if they&#39;re all Linux so I assumed that, as many people do these days, he was misusing the term Linux and actually meany UNIX."}], "answers": [{"tags": [], "owner": {"reputation": 1728, "user_id": 6869190, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh4.googleusercontent.com/-MEnmMeia38I/AAAAAAAAAAI/AAAAAAAAADc/AviuuLKXvzo/photo.jpg?sz=128", "display_name": "Zumo de Vidrio", "link": "https://stackoverflow.com/users/6869190/zumo-de-vidrio"}, "is_accepted": false, "score": 5, "last_activity_date": 1489653072, "last_edit_date": 1489653072, "creation_date": 1489652015, "answer_id": 42828523, "question_id": 42828273, "link": "https://stackoverflow.com/questions/42828273/bash-hex-to-ascii-is-possible-without-xxd-or-perl/42828523#42828523", "title": "Bash. Hex to ascii. Is possible without xxd or perl?", "body": "<p>Found this script <a href=\"http://www.linuxquestions.org/questions/programming-9/%5Bbash%5D-ascii-to-hex-and-hex-to-ascii-488357/\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<pre><code>#!/bin/bash\nfunction hex2string () {\n  I=0\n  while [ $I -lt ${#1} ];\n  do\n    echo -en \"\\x\"${1:$I:2}\n    let \"I += 2\"\n  done\n}\nhex2string \"31323334353637383930313233\"\necho\n</code></pre>\n\n<p>You may change the line <code>hex2string \"31323334353637383930313233\"</code> so that it takes the hex value from parameters, that is:</p>\n\n<pre><code>#!/bin/bash\nfunction hex2string () {\n  I=0\n  while [ $I -lt ${#1} ];\n  do\n    echo -en \"\\x\"${1:$I:2}\n    let \"I += 2\"\n  done\n}\nhex2string \"$1\"\necho\n</code></pre>\n\n<p>So when executed as:</p>\n\n<pre><code>./hexstring.sh 31323334353637383930313233\n</code></pre>\n\n<p>It will provide the desired ascii output.</p>\n\n<p>NOTE: Can't test if it works in all Linux systems.</p>\n"}, {"tags": [], "owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "is_accepted": false, "score": 5, "last_activity_date": 1489683737, "last_edit_date": 1489683737, "creation_date": 1489676781, "answer_id": 42837818, "question_id": 42828273, "link": "https://stackoverflow.com/questions/42828273/bash-hex-to-ascii-is-possible-without-xxd-or-perl/42837818#42837818", "title": "Bash. Hex to ascii. Is possible without xxd or perl?", "body": "<p>Using <a href=\"/questions/tagged/gawk\" class=\"post-tag\" title=\"show questions tagged &#39;gawk&#39;\" rel=\"tag\">gawk</a>, from <code>HEX</code> to <code>ASCII</code></p>\n\n<pre><code>$ gawk  '{ \n           gsub(/../,\"0x&amp; \"); \n           for(i=1;i&lt;=NF;i++)\n              printf(\"%c\", strtonum($i)); \n           print \"\" \n}' &lt;&lt;&lt;\"31323334353637383930313233\"\n1234567890123\n</code></pre>\n\n<p>Using any <a href=\"/questions/tagged/awk\" class=\"post-tag\" title=\"show questions tagged &#39;awk&#39;\" rel=\"tag\">awk</a></p>\n\n<pre><code>$ cat hex2asc_anyawk.awk \nBEGIN{\n    split(\"0 1 2 3 4 5 6 7 8 9 A B C D E F\", d, / /)\n    for(i in d)Decimal[d[i]]=i-1\n}\n\nfunction hex2dec(hex,  h,i,j,dec)\n{ \n    hex = toupper(hex);                \n    i   = length(hex);                 \n    while(i)\n    {  \n          dec += Decimal[substr(hex,i,1)] * 16 ^ j++\n          i--                          \n    }\n    return dec;\n}\n{\n\n    gsub(/../,\"&amp; \"); \n    for(i=1;i&lt;=NF;i++)\n        printf(\"%d\",hex2dec($i));\n    print \"\"\n}\n</code></pre>\n\n<p><strong>Execution</strong></p>\n\n<pre><code>$ awk -f hex2asc_anyawk.awk &lt;&lt;&lt;\"31323334353637383930313233\"\n1234567890123\n</code></pre>\n\n<blockquote>\n  <p><strong>Explanation</strong></p>\n</blockquote>\n\n<p>Steps : </p>\n\n<ol>\n<li><p>Get the decimal equivalent of hex from table.</p></li>\n<li><p>Multiply every digit with 16 power of digit location.</p></li>\n<li><p>Sum all the multipliers.</p></li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/ebFWc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ebFWc.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/RYHrV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RYHrV.png\" alt=\"\"></a></p>\n\n<p><strong>Example :</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/J5aaO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J5aaO.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>BEGIN{\n    # Here we created decimal conversion array, like above table\n    split(\"0 1 2 3 4 5 6 7 8 9 A B C D E F\", d, / /)\n    for(i in d)Decimal[d[i]]=i-1\n}\n\nfunction hex2dec(hex,  h,i,j,dec)\n{ \n    hex = toupper(hex);                 # uppercase conversion if any A,B,C,D,E,F\n    i   = length(hex);                  # length of hex string\n    while(i)\n    {  \n          # dec var where sum is stored\n          # substr(hex,i,1) gives 1 char from RHS\n          # multiply by 16 power of digit location \n          dec += Decimal[substr(hex,i,1)] * 16 ^ j++\n          i--                           # decrement by 1\n    }\n    return dec;\n}\n{\n    # it modifies record\n    # suppose if given string is 31323334353637383930313233\n    # after gsub it becomes 31 32 33 34 35 36 37 38 39 30 31 32 33\n    # thus re-evaluate the fields\n\n    gsub(/../,\"&amp; \"); \n\n    # loop through fields , NF gives no of fields\n    for(i=1;i&lt;=NF;i++)\n\n        # convert from hex to decimal\n        # and print equivalent ASCII value \n        printf(\"%c\",hex2dec($i));\n\n    # print newline char\n    print \"\"\n}\n</code></pre>\n\n<blockquote>\n  <p>Meaning of  <code>dec += Decimal[substr(hex,i,1)] * 16 ^ j++</code></p>\n</blockquote>\n\n<pre><code>dec += Decimal[substr(hex,i,1)] * 16 ^ j++\n ^           ^                    ^\n |           |                    | \n |           |                    2.Multiply every digit with 16 power of digit location.\n |           |    \n |           1.Gives decimal equivalent of hex\n | \n | \n 3. Sum all the multipliers \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4426, "user_id": 5300329, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-ED2Y0YdnPoU/AAAAAAAAAAI/AAAAAAAAARY/inM3zvRnhsU/photo.jpg?sz=128", "display_name": "OscarAkaElvis", "link": "https://stackoverflow.com/users/5300329/oscarakaelvis"}, "edited": false, "score": 0, "creation_date": 1489830761, "post_id": 42837921, "comment_id": 72850551, "body": "I chose this because is the simplest and awk is already a requirement for my script. Nice! thanks."}, {"owner": {"reputation": 4426, "user_id": 5300329, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-ED2Y0YdnPoU/AAAAAAAAAAI/AAAAAAAAARY/inM3zvRnhsU/photo.jpg?sz=128", "display_name": "OscarAkaElvis", "link": "https://stackoverflow.com/users/5300329/oscarakaelvis"}, "edited": false, "score": 0, "creation_date": 1572428575, "post_id": 42837921, "comment_id": 103552967, "body": "hey @grail, this works for hex strings which don&#39;t contain any letter... but what about hex strings containing some chars? can be this improved? This for example <code>4A656E6E793230303031303130</code> Thanks"}, {"owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "reply_to_user": {"reputation": 4426, "user_id": 5300329, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-ED2Y0YdnPoU/AAAAAAAAAAI/AAAAAAAAARY/inM3zvRnhsU/photo.jpg?sz=128", "display_name": "OscarAkaElvis", "link": "https://stackoverflow.com/users/5300329/oscarakaelvis"}, "edited": false, "score": 0, "creation_date": 1572510405, "post_id": 42837921, "comment_id": 103584478, "body": "@OscarAkaElvis simply add A-F to character class -- [0-9A-F]"}], "tags": [], "owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "is_accepted": true, "score": 1, "last_activity_date": 1489677047, "creation_date": 1489677047, "answer_id": 42837921, "question_id": 42828273, "link": "https://stackoverflow.com/questions/42828273/bash-hex-to-ascii-is-possible-without-xxd-or-perl/42837921#42837921", "title": "Bash. Hex to ascii. Is possible without xxd or perl?", "body": "<p>Alternate (g)awk solution:</p>\n\n<pre><code>echo \"31323334353637383930313233\" | awk 'RT{printf \"%c\", strtonum(\"0x\"RT)}' RS='[0-9]{2}'\n</code></pre>\n"}], "owner": {"reputation": 4426, "user_id": 5300329, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-ED2Y0YdnPoU/AAAAAAAAAAI/AAAAAAAAARY/inM3zvRnhsU/photo.jpg?sz=128", "display_name": "OscarAkaElvis", "link": "https://stackoverflow.com/users/5300329/oscarakaelvis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2969, "favorite_count": 0, "accepted_answer_id": 42837921, "answer_count": 3, "score": 1, "last_activity_date": 1489683737, "creation_date": 1489651054, "last_edit_date": 1489672551, "question_id": 42828273, "link": "https://stackoverflow.com/questions/42828273/bash-hex-to-ascii-is-possible-without-xxd-or-perl", "title": "Bash. Hex to ascii. Is possible without xxd or perl?", "body": "<p>I'm developing a script on which I have a hex string <code>31323334353637383930313233</code> and I want to transform it into ASCII. Desired output is <code>1234567890123</code>.</p>\n\n<p>I already have it working using:</p>\n\n<pre><code>echo \"31323334353637383930313233\" | xxd -r -p\n</code></pre>\n\n<p>or </p>\n\n<pre><code>echo \"31323334353637383930313233\" | perl -pe 's/(..)/chr(hex($1))/ge'\n</code></pre>\n\n<p>But the point is try to use the minimum possible requirements for the script. I want it working in suse, fedora, debian, ubuntu, arch, etc... It seems the xxd command is included in vim package. I'm wondering if there is a way to achieve this using only awk or any internal Linux tool which is going to be present by default in all Linux systems.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1489649583, "post_id": 42827828, "comment_id": 72765808, "body": "Some thing you have to try..."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1489649607, "post_id": 42827828, "comment_id": 72765821, "body": "what about <code>119</code>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7719603, "user_type": "registered", "profile_image": "https://graph.facebook.com/761484390681358/picture?type=large", "display_name": "Vi\u1ec7t Th\u1eafng", "link": "https://stackoverflow.com/users/7719603/vi%e1%bb%87t-th%e1%ba%afng"}, "edited": false, "score": 0, "creation_date": 1489650350, "post_id": 42827940, "comment_id": 72766209, "body": "Hi sir, I set @lastnumber = (100..999) and edit $str = &quot;android:versionName=\\&quot;9.3.0.$lastnumber[0]\\&quot;&quot;; So It was not working. Because the last number always changed day by day. Please help me."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 13, "user_id": 7719603, "user_type": "registered", "profile_image": "https://graph.facebook.com/761484390681358/picture?type=large", "display_name": "Vi\u1ec7t Th\u1eafng", "link": "https://stackoverflow.com/users/7719603/vi%e1%bb%87t-th%e1%ba%afng"}, "edited": false, "score": 0, "creation_date": 1489650546, "post_id": 42827940, "comment_id": 72766303, "body": "I am wonder on your question. Its regex and its not hard coded."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 13, "user_id": 7719603, "user_type": "registered", "profile_image": "https://graph.facebook.com/761484390681358/picture?type=large", "display_name": "Vi\u1ec7t Th\u1eafng", "link": "https://stackoverflow.com/users/7719603/vi%e1%bb%87t-th%e1%ba%afng"}, "edited": false, "score": 0, "creation_date": 1489650688, "post_id": 42827940, "comment_id": 72766377, "body": "<code>for(100..999) {  print &quot;android:versionName=\\&quot;9.3.0.$_\\&quot;;\\n&quot;;  }</code>"}, {"owner": {"reputation": 13, "user_id": 7719603, "user_type": "registered", "profile_image": "https://graph.facebook.com/761484390681358/picture?type=large", "display_name": "Vi\u1ec7t Th\u1eafng", "link": "https://stackoverflow.com/users/7719603/vi%e1%bb%87t-th%e1%ba%afng"}, "edited": false, "score": 0, "creation_date": 1489663803, "post_id": 42827940, "comment_id": 72775016, "body": "Actually, the script will be changed number as I need, but not save in test.xml.  I has tried add permission read,write as: from open my $fh,&quot;&lt;&quot;, &quot;$test&quot; or die $!;  to open my $fh,&quot;+&lt;&quot;, &quot;$test&quot; or die $!; but nothing happen."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1489673261, "post_id": 42827940, "comment_id": 72781830, "body": "Downvoted for encouraging parsing XML with regular expressions."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1489677148, "post_id": 42827940, "comment_id": 72784913, "body": "@DaveCross: That&#39;s why I have advised OP to use the <code>XML::Twig</code>. No issues champs."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1489692547, "post_id": 42827940, "comment_id": 72795245, "body": "But the example code in your answer doesn&#39;t use XML::Twig, it uses a regex. And that&#39;s a terrible idea. Please don&#39;t do that."}], "tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": -2, "last_activity_date": 1489669242, "last_edit_date": 1489669242, "creation_date": 1489649943, "answer_id": 42827940, "question_id": 42827828, "link": "https://stackoverflow.com/questions/42827828/auto-replace-number-from-a-string-in-perl/42827940#42827940", "title": "Auto replace number from a string in perl", "body": "<p>Just a simple regex makes fine (I have updated your code here):</p>\n\n<pre><code>#!/usr/bin/perl\nuse Tie::File;\n\nmy $infile = 'test.xml';\nmy @lines;\n\ntie(@lines, 'Tie::File', $infile) or die(\"can't open $infile: $!\");\n\n$srt = join \"\\n\", @lines;\n$srt=~s/(android\\:versionName=\\\"(?:[^\"]*)\\.)(\\d+)\\\"/my $ret = \"$1\".($2+1).\"\\\"\"; ($ret);/ge;\n\n@lines = split /\\n/, $srt;\n\nuntie @lines;\n</code></pre>\n\n<p>Input <code>test.xml</code>:</p>\n\n<pre><code>&lt;manifest XML:android=\"http://schemas.android.com/apk/res/android\"\npackage=\"com.connect\"\nandroid:versionCode=\"32\"\nandroid:versionName=\"9.3.0.114\"&gt;\n\n&lt;manifest XML:android=\"http://schemas.android.com/apk/res/android\"\npackage=\"com.connect\"\nandroid:versionCode=\"32\"\nandroid:versionName=\"9.3.0.200\"&gt;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&lt;manifest XML:android=\"http://schemas.android.com/apk/res/android\"\npackage=\"com.connect\"\nandroid:versionCode=\"32\"\nandroid:versionName=\"9.3.0.115\"&gt;\n\n&lt;manifest XML:android=\"http://schemas.android.com/apk/res/android\"\npackage=\"com.connect\"\nandroid:versionCode=\"32\"\nandroid:versionName=\"9.3.0.201\"&gt;\n</code></pre>\n\n<p><strong>However if you are using fully XML based process so then you will try <code>XML::Twig</code> as better output.</strong></p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1489656215, "creation_date": 1489656215, "answer_id": 42829876, "question_id": 42827828, "link": "https://stackoverflow.com/questions/42827828/auto-replace-number-from-a-string-in-perl/42829876#42829876", "title": "Auto replace number from a string in perl", "body": "<p>Please - don't use regular expressions to hack XML. It's brittle. XML is contextual, and regular expressions are not.</p>\n\n<p>But this is surprisingly easy using a real parser:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse XML::Twig; \n\nmy $twig = XML::Twig -&gt; new -&gt; parsefile ( 'test.xml')\n\nforeach my $manifest ( $twig -&gt; findnodes ( '//manifest' ) ) {\n    my @version = split /\\./, $manifest-&gt;att('android:versionName');\n    $version[-1]++;   #or whatever mechanism you want to use to update\n    $manifest -&gt; set_att('android:versionName', join \".\", @version );\n}\n\n$twig -&gt; set_pretty_print('indented_a');\n$twig -&gt; print;\n\nopen ( my $output, '&gt;', 'test_new.xml') or die $!;\nprint {$output} $twig -&gt; sprint;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7719603, "user_type": "registered", "profile_image": "https://graph.facebook.com/761484390681358/picture?type=large", "display_name": "Vi\u1ec7t Th\u1eafng", "link": "https://stackoverflow.com/users/7719603/vi%e1%bb%87t-th%e1%ba%afng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1489669242, "creation_date": 1489649527, "last_edit_date": 1489653554, "question_id": 42827828, "link": "https://stackoverflow.com/questions/42827828/auto-replace-number-from-a-string-in-perl", "title": "Auto replace number from a string in perl", "body": "<p>I have a file <code>test.xml</code>, something like this:</p>\n\n<pre><code>&lt;manifest XML:android=\"http://schemas.android.com/apk/res/android\"\n\npackage=\"com.connect\"\n\nandroid:versionCode=\"32\"\n\nandroid:versionName=\"9.3.0.114\" &gt;\n</code></pre>\n\n<p>I want to used script to open file test.xml.\nThen find string <code>android:versionName=\"9.3.0.114\" &gt;</code> to update automatic become <code>android:versionName=\"9.3.0.115\" &gt;</code>\nSo the last number start 100 to 999 will  <code>+1</code> dy by day.</p>\n\n<p>I tried something like below but not correctly</p>\n\n<pre><code>#!/usr/bin/perl\nmy $test= \"test.xml\";\nopen my $fh,\"&lt;\", \"$test\" or die $!;\n\nwhile (my $srt = &lt;$fh&gt;) {\n$str = \"android:versionName=\\\"9.3.0.114\\\" &gt;\";\n$str =~s/((?:[^\\=]*)=\\\"(?:[^\"]*)\\.)(\\d+)\\\"/my $ret = \"$1\".($2+1).\"\\\"\"; ($ret);/ge;\nprint $srt;\n}\nclose($fh);\n</code></pre>\n\n<p>Please help me.</p>\n"}, {"tags": ["ajax", "perl", "module"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1489633228, "post_id": 42824027, "comment_id": 72760212, "body": "There&#39;s always a way to do X without module Y. It sounds like you might not understand the rest of the stack, though"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489652189, "post_id": 42824027, "comment_id": 72767165, "body": "Do you have shell access, or just FTP? If you do, you can install whatever you want from CPAN locally."}, {"owner": {"reputation": 21, "user_id": 3680256, "user_type": "registered", "profile_image": "https://graph.facebook.com/1478664518/picture?type=large", "display_name": "nameless_nameseeker", "link": "https://stackoverflow.com/users/3680256/nameless-nameseeker"}, "edited": false, "score": 0, "creation_date": 1489665099, "post_id": 42824027, "comment_id": 72775900, "body": "I will look into whether I have shell access."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489669910, "post_id": 42824027, "comment_id": 72779348, "body": "@simbabque, They can run CGI scripts, so they have shell access."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489670766, "post_id": 42824027, "comment_id": 72779942, "body": "@ikegami you mean make a CGI script that installs stuff, and then call it from the browser? That&#39;s .... interesting."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489670918, "post_id": 42824027, "comment_id": 72780037, "body": "@simbabque, Yes, except if you can do that, they usually give you <code>ssh</code> access."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489671695, "post_id": 42824027, "comment_id": 72780673, "body": "@ikegami actually there are still a lot of shared hosters that don&#39;t. For the longest time, most German hosting companies don&#39;t do it. By now a lot do, but the largest German hoster does not for example include ssh in their cheapest shared hosting contract. I think internationally that might be different, but back when I used CGI and shared hosting, I always only had FTP. That&#39;s why I suggested that convoluted way."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1489671970, "post_id": 42824027, "comment_id": 72780888, "body": "Even if all the German hosters didn&#39;t, that&#39;s still only a drop in the water. I stand by what I said."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1489669768, "creation_date": 1489669768, "answer_id": 42835021, "question_id": 42824027, "link": "https://stackoverflow.com/questions/42824027/is-there-a-way-to-implement-ajax-in-perl-without-using-the-cgiajax-module/42835021#42835021", "title": "Is there a way to implement AJAX in Perl without using the CGI::Ajax module?", "body": "<p>There's nothing special about AJAX requests. They are just like any other web request. The following is a sample web (incl AJAX) request handler:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse CGI qw( );\nmy $cgi = CGI-&gt;new();\nprint $cgi-&gt;header('text/plain');\nprint \"Hello, World!\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1489677156, "post_id": 42836173, "comment_id": 72784920, "body": "Middle of the third paragraph: &quot;but these days I&#39;d be far more likely to use something based on CGI&quot;. Assuming you meant to say PSGI or something else?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1489692339, "post_id": 42836173, "comment_id": 72795130, "body": "@MattJacob: Yeah. Thanks. Fixed now."}, {"owner": {"reputation": 21, "user_id": 3680256, "user_type": "registered", "profile_image": "https://graph.facebook.com/1478664518/picture?type=large", "display_name": "nameless_nameseeker", "link": "https://stackoverflow.com/users/3680256/nameless-nameseeker"}, "edited": false, "score": 0, "creation_date": 1489773116, "post_id": 42836173, "comment_id": 72834374, "body": "Thank you so much for your answer. I will now do some much-needed further reading about doing web development with Perl. I kind of wish I had read more before asking my very noobish question."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1489692311, "last_edit_date": 1489692311, "creation_date": 1489672695, "answer_id": 42836173, "question_id": 42824027, "link": "https://stackoverflow.com/questions/42824027/is-there-a-way-to-implement-ajax-in-perl-without-using-the-cgiajax-module/42836173#42836173", "title": "Is there a way to implement AJAX in Perl without using the CGI::Ajax module?", "body": "<p>In all the years I've been writing web applications, I have written more than my fair share of Ajax calls and I have never used CGI::Ajax. In fact, until just now I had never heard of it. I've now skimmed the documentation and I really can't see what advantages it gives you.</p>\n\n<p>There are two parts of an Ajax interaction. The client part runs in the browser and is therefore pretty much always written in Javascript. These days, jQuery makes it pretty much trivial. I can't see how a Perl module would help here.</p>\n\n<p>The server part runs on a web server. All you need is an application which receives an HTTP request and sends an HTTP response. A CGI application written in Perl is one obvious way to write that - but these days I'd be far more likely to use something based on PSGI. You'll probably want your application to return data as JSON and set the Content-type header appropriately and perhaps CGI::Ajax helps with that - but it's not exactly onerous to do it in any other web framework.</p>\n\n<p>So, to summarise:</p>\n\n<ol>\n<li>No, you don't need to use CGI::Ajax to write Ajax calls.</li>\n<li>It's perfectly possible to write the server end of an Ajax interaction as a Perl CGI program - but in 2017, there are <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">plenty of better options</a>.</li>\n</ol>\n\n<p><strong>Update:</strong> So, in this case, you don't need to install the extra module. But, in general, your Perl development life will be far easier if you can get modules installed easily when you want them. So I would very much recommend looking for a hosting solution that allows you to do that.</p>\n"}], "owner": {"reputation": 21, "user_id": 3680256, "user_type": "registered", "profile_image": "https://graph.facebook.com/1478664518/picture?type=large", "display_name": "nameless_nameseeker", "link": "https://stackoverflow.com/users/3680256/nameless-nameseeker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1489692311, "creation_date": 1489629756, "last_edit_date": 1489669833, "question_id": 42824027, "link": "https://stackoverflow.com/questions/42824027/is-there-a-way-to-implement-ajax-in-perl-without-using-the-cgiajax-module", "title": "Is there a way to implement AJAX in Perl without using the CGI::Ajax module?", "body": "<p>I'm trying to create my first site having an AJAX setup using Perl on a free web hosting server. The host has much to be desired. There are Perl modules installed on the server but CGI::Ajax is not installed. I'm new to Perl. Is there a reasonable way to hard-code a simple AJAX setup without using the module I mentioned? Might it have something to do with <code>XMLHttpRequest</code>?</p>\n\n<p>Update: Yeah, I'm reading through the CGI::Ajax module code and comments. I don't suppose I could just extract something out of there and put it into the script that would otherwise call the module? But I'd have to pretty much understand the whole scary module first...</p>\n\n<p>Update: I'm looking into a way to include CGI::Ajax by uploading the module to the same directory as the script that will \"use\" it, and modifying the <code>@INC</code> path, or something like that...</p>\n"}, {"tags": ["perl", "email", "mime-types"], "comments": [{"owner": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489668283, "post_id": 42823610, "comment_id": 72778163, "body": "Added code, oops. Thanks."}, {"owner": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "edited": false, "score": 1, "creation_date": 1489678329, "post_id": 42823610, "comment_id": 72785843, "body": "Since no one has given this a try, I&#39;ll give it a go.  It looks like you are only looking in the second level of &quot;parts&quot; for your text message.   Maybe use the walk_parts method to go through all of the email&#39;s parts?  You could just print out the type and body of each one to see where your content may be.  Hopefully give you more of clue of what is happening in your email."}, {"owner": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "reply_to_user": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "edited": false, "score": 0, "creation_date": 1489701538, "post_id": 42823610, "comment_id": 72799583, "body": "What I&#39;ve learned is that my code only displays (can only access) one of the text/ascii parts, while using walk_parts is able to access all the parts. I&#39;m still not entirely sure this would be the proper way."}], "answers": [{"tags": [], "owner": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "is_accepted": true, "score": 2, "last_activity_date": 1489783579, "creation_date": 1489783579, "answer_id": 42866810, "question_id": 42823610, "link": "https://stackoverflow.com/questions/42823610/parsing-email-with-emailmime-and-multipart-mixed-with-subparts/42866810#42866810", "title": "Parsing email with Email::MIME and multipart/mixed with subparts", "body": "<p>I've spent the last few days working with Email::MIME, MIME::Parser and MIME::Entity in order to automate the processing of a number of emails. I've found there are so few standard ways of encoding the same email, that it was much more difficult than I thought.</p>\n\n<p>This is a pretty reliable way to process both the headers and body of an email. Thanks so much for all who helped along the way.</p>\n\n<pre><code> #!/usr/bin/perl -w\n\n use strict;\n use MIME::Parser;\n use MIME::Entity;\n use Email::MIME;\n\n # Read the email from STDIN\n my $buf;\n while(&lt;STDIN&gt; ){\n         $buf .= $_;\n }\n\n # This creates msg-NNNN-N.txt and signature-N.asc files\n # and I don't know why. Related to output_to_core?\n my $parser = MIME::Parser-&gt;new;\n $parser-&gt;extract_uuencode(1);\n $parser-&gt;extract_nested_messages(1);\n $parser-&gt;output_to_core(0);\n\n # For reading headers\n my $entity = $parser-&gt;parse_data($buf);\n\n # For reading the body (of an mbox)\n my $msg = Email::MIME-&gt;new($buf);\n\n # Use MIME::Entity to read various headers. \n my $subject = $entity-&gt;head-&gt;get('Subject');\n my $from = $entity-&gt;head-&gt;get('From');\n my $AdvDate = $entity-&gt;head-&gt;get('Date');\n $AdvDate =~ s/\\n//g; $subject =~ s/\\n//g; $from =~ s/\\n//g;\n\n print \"Subject: $subject\\n\";\n print \"From: $from\\n\";\n print \"Date: $AdvDate\\n\";\n\n my @mailData;\n\n  # walk through all the different attachments. Stop at the first one that matches and\n  # read its contents into mailData. The first one typically appeared to be the primary one.\n  $msg-&gt;walk_parts(sub {\n      my ($part) = @_;\n      #warn($part-&gt;content_type . \": \" . $part-&gt;subparts);\n      if (($part-&gt;content_type =~ /text\\/plain; charset=\\\"?utf-8\\\"?/i) &amp;&amp; !@mailData) {\n         #print $part-&gt;body;\n         @mailData = split( '\\n', $part-&gt;body);\n      }\n      elsif (($part-&gt;content_type =~ /text\\/plain; charset=\\\"?us-ascii\\\"?/i) &amp;&amp; !@mailData) {\n         #print $part-&gt;body;\n         @mailData = split( '\\n', $part-&gt;body);\n      }\n      elsif (($part-&gt;content_type =~ /text\\/plain; charset=\\\"?windows-1252\\\"?/i) &amp;&amp; !@mailData) {\n         #print $part-&gt;body;\n         @mailData = split( '\\n', $part-&gt;body);\n      }\n      elsif (($part-&gt;content_type =~ /text\\/plain; charset=\\\"?iso-8859-1\\\"?/i) &amp;&amp; !@mailData) {\n         #print $part-&gt;body;\n         @mailData = split( '\\n', $part-&gt;body);\n      }\n  });\n\n\n # manipulate the body of the message stored in mailData\n foreach my $line (@mailData) {\n        print \"$line\\n\";\n }\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2361, "favorite_count": 0, "accepted_answer_id": 42866810, "answer_count": 1, "score": 2, "last_activity_date": 1489783579, "creation_date": 1489626872, "last_edit_date": 1489668267, "question_id": 42823610, "link": "https://stackoverflow.com/questions/42823610/parsing-email-with-emailmime-and-multipart-mixed-with-subparts", "title": "Parsing email with Email::MIME and multipart/mixed with subparts", "body": "<p>I'm a perl novice and have been working with Email::MIME to figure out how to parse emails with multiparts correctly. I've just identified another combination that my current efforts have not been able to properly read.</p>\n\n<pre><code>     Content-Type: multipart/mixed; boundary=\"===============1811908679642194059==\"\n MIME-Version: 1.0\n\n This is an OpenPGP/MIME signed message (RFC 4880 and 3156)\n --===============1811908679642194059==\n Content-Type: multipart/signed; micalg=pgp-sha256;\n  protocol=\"application/pgp-signature\";\n  boundary=\"lGJM242FL2E9Wh4auTNwQRWOeFI0Wj9mB\"\n\n This is an OpenPGP/MIME signed message (RFC 4880 and 3156)\n --lGJM242FL2E9Wh4auTNwQRWOeFI0Wj9mB\n Content-Type: multipart/alternative;\n  boundary=\"------------CC2F0C038668F58F6EDEA0D2\"\n\n This is a multi-part message in MIME format.\n --------------CC2F0C038668F58F6EDEA0D2\n Content-Type: text/plain; charset=windows-1252\n Content-Transfer-Encoding: quoted-printable\n\n =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=\n =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=\n =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D\n</code></pre>\n\n<p>The text/plain part is the part that I want, but reading the \"text\" component just gives me the \"This is a multi-part...\" line and that's it. This is the code I've developed to read other emails with similar subparts, but it doesn't properly interpret this one.</p>\n\n<p>It looks to be related to the \"body\" function as part of Email::MIME:</p>\n\n<pre><code> This decodes and returns the body of the object as a byte string. For\n top-level objects in multi-part messages, this is highly likely to be\n something like \"This is a multi-part message in MIME format.\"\n</code></pre>\n\n<p>What is the proper function to use within Email::MIME to properly read this content type?</p>\n\n<p>How do properly identify the content-type in this email? Is it \"multipart/mixed\" or \"text/plain\" or \"multipart/alternative\"?</p>\n\n<p>Do I even want to use the subparts method here?</p>\n\n<pre><code> my @mailData;\n my $msg = Email::MIME-&gt;new($buf);\n foreach my $part ( $msg-&gt;subparts ) {\n    foreach my $sub_part ($part-&gt;subparts) {\n         print $sub_part-&gt;content_type;\n        if ($sub_part-&gt;content_type =~ m!text!) {\n            @mailData = split( '\\n', $sub_part-&gt;body);\n         }\n    }\n }\n</code></pre>\n\n<p>The code above only prints \"This is a multi-part message...\" in the @mailData array.</p>\n"}]