[{"tags": ["perl", "multidimensional-array"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1540416015, "post_id": 52977932, "comment_id": 92862646, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1540416131, "post_id": 52977932, "comment_id": 92862694, "body": "Also, whenever I see stuff like <i><code># Irrelevant parts skipped</code></i> I immediately want to know what was there because that&#39;s probably where the bug is hiding."}, {"owner": {"reputation": 89, "user_id": 2708601, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5e295d1aaf101788673ab244bca76ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey H.", "link": "https://stackoverflow.com/users/2708601/geoffrey-h"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1540416632, "post_id": 52977932, "comment_id": 92862864, "body": "I understand your concern @melpomene, but I assure it truely is irrelevant. It is simply some JS to help with client-side validation for the test. I am trying to be minimal and relevant."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1540416675, "post_id": 52977932, "comment_id": 92862884, "body": "Be complete first. This code is not complete: It lacks <code>strict</code> and <code>warnings</code>, and <code>$dbh</code> is undefined."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540416770, "post_id": 52977932, "comment_id": 92862918, "body": "Have you thought about using <a href=\"https://metacpan.org/pod/DBI#selectall_array\" rel=\"nofollow noreferrer\">selectrow_array</a> or a similar method instead of a manual loop?"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 2708601, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5e295d1aaf101788673ab244bca76ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey H.", "link": "https://stackoverflow.com/users/2708601/geoffrey-h"}, "edited": false, "score": 0, "creation_date": 1540416881, "post_id": 52978189, "comment_id": 92862960, "body": "Thank you. I have never heard of this subject before, and I will definitely keep this in mind for the future."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 5, "last_activity_date": 1540416697, "creation_date": 1540416697, "answer_id": 52978189, "question_id": 52977932, "link": "https://stackoverflow.com/questions/52977932/perl-array-being-modified-by-unknown-source/52978189#52978189", "title": "Perl array being modified by unknown source", "body": "<p>The problem is here:</p>\n\n<pre><code>&lt;button type=\"button\" id=\"next\" class=\"next\" onclick=\"nextQuestion($questions[$i+1][0])\"&gt;next &amp;raquo;\n</code></pre>\n\n<p>The expression <code>$questions[$i+1][0]</code> will <a href=\"https://perldoc.pl/perlglossary#autovivification\" rel=\"noreferrer\">autovivify</a> the element <code>$questions[$i+1]</code> into an array reference, since you accessed it like one. Thus <code>@questions</code> will then have an extra element. You can use the <a href=\"https://metacpan.org/pod/autovivification\" rel=\"noreferrer\">autovivification</a> pragma to prevent that from happening, or check that <code>$questions[$i+1]</code> is defined or if <code>$i &lt; $#questions</code> before using it. <code>$#questions</code> is a shortcut for the last index of the array <code>@questions</code>. Note: you may have a similar issue with the prevQuestion line and index 0, though index -1 will just access the last element of the array.</p>\n\n<p>The other angle to this problem is that your C-style for loop is depending on the size of <code>@questions</code> at every iteration. An alternative is to use a Perlish <a href=\"https://perldoc.pl/perlsyn#Foreach-Loops\" rel=\"noreferrer\">foreach loop</a>.</p>\n\n<pre><code>foreach my $i (0..$#questions) {\n  # everything else the same\n}\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 2708601, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5e295d1aaf101788673ab244bca76ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey H.", "link": "https://stackoverflow.com/users/2708601/geoffrey-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 52978189, "answer_count": 1, "score": 0, "last_activity_date": 1540416697, "creation_date": 1540415302, "last_edit_date": 1540416532, "question_id": 52977932, "link": "https://stackoverflow.com/questions/52977932/perl-array-being-modified-by-unknown-source", "title": "Perl array being modified by unknown source", "body": "<p>I believe I am encountering a bug, but wanted to be sure that I wasn't just missing  something. My intern is working on website that will have tests of a variable number of questions with a variable number of answers for associates to complete for training. We are storing the questions in a 2D array, containing the question ID, and the question text. We loop through that array to create divs for each question, hiding all but the first, and use that question ID to get the answers to that question in the loop.</p>\n\n<p>What we are encountering though, is that when the <code>for</code> loop gets to the last index, an empty element is pushed onto <code>@questions</code>. This increases the result of <code>scalar @questions</code> by one, and this cycle repeats indefinitely. What we cannot figure out though is <strong>what is causing an empty element to be pushed to @questions?</strong></p>\n\n<pre><code>my @questions;\n\nmy $getQuestion = $dbh-&gt;prepare(\"\n    SELECT ID, Question \n    FROM ACTestQuestions\n    WHERE TestID = ?\n\");\n\n$getQuestion-&gt;execute(1);\n\nwhile(my @question = $getQuestion-&gt;fetchrow_array()){\n    push(@questions, \\@question);\n}\n\nmy $sth = $dbh-&gt;prepare(\"\n    SELECT ID, AnswerText, CorrectAnswer\n    FROM ACTestAnswers\n    WHERE QuestionID = ?\n    ORDER BY SortOrder\n\");\n\n# Irrelevant parts skipped\n\nfor(my $i = 0; $i &lt; scalar @questions; $i++){\n    my $qCount = 1;\n    my $qID = $questions[$i][0];\n    my $hideClass = \"hide\";\n\n    if($i == 0){\n        $hideClass = \"\";\n    }\n    print &lt;&lt;\"END_HTML\";\n    &lt;div id=\"question-$questions[$i][0]\"  class=\"centered question-container $hideClass\"&gt;\n        &lt;h1 class=\"text-center\"&gt;Question &amp;num;$qCount&lt;/h1&gt;\n        &lt;h4 class=\"text-center\" &gt;$questions[$i][1]&lt;/h4&gt;&lt;/br&gt;\n            &lt;form method=\"get\"&gt;\n                &lt;table&gt;                     \nEND_HTML\n\n    if($sth-&gt;execute($questions[$i][0])){\n        $num = 1;\n        while(($ansID, $ansText, $correct) = $sth-&gt;fetchrow_array()){\n            print &lt;&lt;\"END_HTML\";\n            &lt;tr&gt;\n            &lt;td style=\"padding: 15px 30px\"&gt; \n                &lt;label&gt;\n                    &lt;input type=\"radio\" name=\"questionAnswer\" id=\"$ansID\" value=\"$ansID\" /&gt;\n                    $num. $ansText\n                &lt;/label&gt;\n            &lt;/td&gt;\n            &lt;/tr&gt;\nEND_HTML\n            $num++;\n        }\n    }\n\n    print &lt;&lt;\"END_HTML\";\n                &lt;/table&gt;\n                &lt;div class=\"text-center\" style=\"padding: 25px; font-weight: bold;\"&gt;\n                    $ans\n                &lt;/div&gt;\n                &lt;div class=\"tButton\"&gt;\n                    &lt;input type=\"submit\" name=\"submit\" value=\"Submit\"/&gt;\n                    &lt;button type=\"button\" id=\"prev\" class=\"prev\" onclick=\"prevQuestion($questions[$i-1][0])\"&gt;&amp;laquo; prev\n                    &lt;button type=\"button\" id=\"next\" class=\"next\" onclick=\"nextQuestion($questions[$i+1][0])\"&gt;next &amp;raquo;\n                &lt;/div&gt;\n            &lt;/form&gt;\n    &lt;/div&gt;\nEND_HTML\n    $qCount++;\n}\n</code></pre>\n\n<h3>Update</h3>\n\n<p>Here is a dump of <code>@questions</code> before and after the loop. I used a hard coded <code>$i &lt; 18</code> to get this result, but as is, it will go on until it runs out of memory.</p>\n\n<pre><code>[10/24/18 17:25:05] $VAR1 = [\n          [\n            9,\n            'What are the key ingredients in the Original Killer Brownie&amp;reg;?'\n          ],\n          [\n            10,\n            'Where do our Laura&amp;#39;s Cookies come from?'\n          ],\n          [\n            11,\n            'How long is the shelf life on our artisan breads?'\n          ],\n          [\n            12,\n            'What happens to the bakery shrink (the items no longer fresh enough to sell)?'\n          ],\n          [\n            13,\n            'How many days a week are DLM artisan breads produced?'\n          ],\n          [\n            14,\n            'DLM artisan breads are produced in a ____ style oven.'\n          ],\n          [\n            15,\n            'How many items does Central Bakery produce for the stores?'\n          ],\n          [\n            16,\n            \"TEST\"\n          ]\n        ];\n[10/24/18 17:25:05] $VAR1 = [\n          [\n            9,\n            'What are the key ingredients in the Original Killer Brownie&amp;reg;?'\n          ],\n          [\n            10,\n            'Where do our Laura&amp;#39;s Cookies come from?'\n          ],\n          [\n            11,\n            'How long is the shelf life on our artisan breads?'\n          ],\n          [\n            12,\n            'What happens to the bakery shrink (the items no longer fresh enough to sell)?'\n          ],\n          [\n            13,\n            'How many days a week are DLM artisan breads produced?'\n          ],\n          [\n            14,\n            'DLM artisan breads are produced in a ____ style oven.'\n          ],\n          [\n            15,\n            'How many items does Central Bakery produce for the stores?'\n          ],\n          [\n            16,\n            \"TEST\"\n          ],\n          [],\n          [],\n          [],\n          [],\n          [],\n          [],\n          [],\n          [],\n          [],\n          [],\n          []\n        ];\n</code></pre>\n"}, {"tags": ["apache", "perl", "mason"], "answers": [{"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": true, "score": 0, "last_activity_date": 1541863457, "creation_date": 1541863457, "answer_id": 53240393, "question_id": 52977791, "link": "https://stackoverflow.com/questions/52977791/processing-paths-that-start-with-a-dot-using-mason-dhandler/53240393#53240393", "title": "Processing paths that start with a dot using Mason dhandler", "body": "<p>You're probably mean <a href=\"https://metacpan.org/pod/HTML::Mason\" rel=\"nofollow noreferrer\">HTML::Mason</a> and not the new(er) <a href=\"https://metacpan.org/pod/Mason\" rel=\"nofollow noreferrer\">Mason</a>.</p>\n\n<p>While I haven't installed Apache, but it is simple to create an PSGI test-case using <a href=\"https://metacpan.org/pod/HTML::Mason::PSGIHandler\" rel=\"nofollow noreferrer\">HTML::Mason::PSGIHandler</a>, like such <code>app.psgi</code></p>\n\n<pre><code>use 5.014;\nuse warnings;\nuse HTML::Mason::PSGIHandler;\n\nmy $h = HTML::Mason::PSGIHandler-&gt;new(\n    comp_root =&gt; $ENV{HOME}.'/tmp/mas/comps',\n);\n\nmy $app = sub {\n    my $env = shift;\n    $h-&gt;handle_psgi($env);\n};\n</code></pre>\n\n<p>and an very simple <code>dhandler</code></p>\n\n<pre><code>&lt;pre&gt;\n=&lt;% $m-&gt;dhandler_arg %&gt;=\n&lt;/pre&gt;\n</code></pre>\n\n<p>after running <code>plackup</code> and pointing my browser to <a href=\"http://localhost:5000/.hello\" rel=\"nofollow noreferrer\">http://localhost:5000/.hello</a> it shows</p>\n\n<p><a href=\"https://i.stack.imgur.com/xKHEo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xKHEo.png\" alt=\"enter image description here\"></a></p>\n\n<p>so, the <a href=\"https://metacpan.org/pod/HTML::Mason\" rel=\"nofollow noreferrer\">HTML::Mason</a> <strong>hasn't</strong> any limitations on processing paths with dots.</p>\n\n<p>If you need more help, edit your question and add relevant parts of your apache config, htaccess, and your handlers how do you invoke the <a href=\"https://metacpan.org/pod/HTML::Mason\" rel=\"nofollow noreferrer\">HTML::Mason</a>.</p>\n"}], "owner": {"reputation": 5, "user_id": 4100658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abbe8ed3bd6ddabf15924d21c5cdda79?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Zhukovskiy", "link": "https://stackoverflow.com/users/4100658/mike-zhukovskiy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 53240393, "answer_count": 1, "score": 0, "last_activity_date": 1541863457, "creation_date": 1540414527, "question_id": 52977791, "link": "https://stackoverflow.com/questions/52977791/processing-paths-that-start-with-a-dot-using-mason-dhandler", "title": "Processing paths that start with a dot using Mason dhandler", "body": "<p>How can I make a Mason <code>dhandler</code> process a URL whose path section starts with <code>.</code>?</p>\n\n<p>For example, if I have a <code>dhandler</code> file in my web root, the <code>dhandler</code> is triggered if I navigate to</p>\n\n<pre><code>`http://www.example.com/hello`\n</code></pre>\n\n<p>but I get a 404 if I navigate to <code>http://www.example.com/.hello</code>. </p>\n\n<p>I am using <code>Mason</code> in combination with <code>Apache</code> and I have verified that this is not an <code>Apache</code> configuration issue forbidding paths that start with dot.</p>\n"}, {"tags": ["bash", "shell", "perl", "sed"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1540409248, "post_id": 52976503, "comment_id": 92859670, "body": "Word splitting is dividing the arguments. Try <code>perl -i -p0e &quot;s&#47;$search_s&#47;$replace_s&#47;s&quot;</code>"}, {"owner": {"reputation": 8293, "user_id": 8656552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FPg67.png?s=128&g=1", "display_name": "Paul Hodges", "link": "https://stackoverflow.com/users/8656552/paul-hodges"}, "edited": false, "score": 0, "creation_date": 1540414308, "post_id": 52976503, "comment_id": 92861972, "body": "This might mean you also need to double-escape the newlines - <code>\\\\n</code>."}], "answers": [{"tags": [], "owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "is_accepted": false, "score": 1, "last_activity_date": 1540409580, "creation_date": 1540409580, "answer_id": 52976651, "question_id": 52976503, "link": "https://stackoverflow.com/questions/52976503/how-to-search-replace-multiple-lines-of-text-in-a-file-that-contain-a-space-an/52976651#52976651", "title": "How to search &amp; replace multiple lines of text in a file that contain a space and represented by a variable?", "body": "<p>The confusion here is the shell quoting.  When you write </p>\n\n<pre><code>perl -i -p0e 's/'$search_s'/'$replace_s'/s' input.txt\n</code></pre>\n\n<p>The shell parses that and calls perl with the following arguments: <code>-i</code> <code>-p03</code> <code>s/ghi</code> <code>jkl\\nmno</code> <code>pqr/zyx</code> <code>wvu</code>...\nThis is not what you want.  This happens because the shell performs word splitting after it expands your variables.  To prevent that, you need to quote the arguments:</p>\n\n<pre><code>perl -i -p0e \"s/$search_s/$replace_s/s\" input.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1540416429, "creation_date": 1540416429, "answer_id": 52978131, "question_id": 52976503, "link": "https://stackoverflow.com/questions/52976503/how-to-search-replace-multiple-lines-of-text-in-a-file-that-contain-a-space-an/52978131#52978131", "title": "How to search &amp; replace multiple lines of text in a file that contain a space and represented by a variable?", "body": "<p>When you want to do matching over more than one line, <code>awk</code> is interesting.</p>\n\n<p>With awk you can handle this in different ways.<br>\nMy solution is storing every line in an array and change the stored data when I see,\nthat I have two matching lines.</p>\n\n<pre><code>awk -v line1=\"ghi jkl\" -v line2=\"mno pqr\" '\n   {a[NR]=$0}\n   $0==line1 {m1=1; next}\n   $0==line2 {a[NR-1]=\"zyx wvu\"; a[NR]=\"tsr qpo\"; m1=0}\n   END {for (i=1;i&lt;=NR;i++) print a[i]}\n   ' input.txt\n</code></pre>\n\n<p>Another solution, without an array, is remembering a first line and print it when the second line doesn't complete a match. With a match, print the replacement strings, and don't forget the <code>END</code> statement for printing the last line (when not part of a match).</p>\n"}], "owner": {"reputation": 1, "user_id": 10553769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ce85d1d90af7aae12ba09c4cc9fab18?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/10553769/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1540416429, "creation_date": 1540408910, "question_id": 52976503, "link": "https://stackoverflow.com/questions/52976503/how-to-search-replace-multiple-lines-of-text-in-a-file-that-contain-a-space-an", "title": "How to search &amp; replace multiple lines of text in a file that contain a space and represented by a variable?", "body": "<p>I have a file input.txt containing the following text:</p>\n\n<pre><code>abc def\nghi jkl\nmno pqr\nstu vwx\n</code></pre>\n\n<p>I can replace two of the lines in the file with this command:</p>\n\n<pre><code>perl -i -p0e 's/ghi jkl\\nmno pqr/zyx wvu\\ntsr qpo/s' input.txt\n</code></pre>\n\n<p>However, I need for the search and replace strings to be in variables:</p>\n\n<pre><code>search_s=\"ghi jkl\\nmno pqr\"\nreplace_s=\"zyx wvu\\ntsr qpo\"\n</code></pre>\n\n<p>But now this command doesn't work with the variables:</p>\n\n<pre><code>perl -i -p0e 's/'$search_s'/'$replace_s'/s' input.txt\n</code></pre>\n\n<p>I get the error \"Substitution pattern not terminated at -e line 1.\". The problem seems to be around the spaces in the $search_s variable. I've tried various methods to encode the space to make this work without success.</p>\n\n<p>Note: I'm using a perl command because it handles the search and replace containing a <Code>\\n</Code> within a file nicely.  I tried <Code>sed</Code> but not so nice.</p>\n\n<p>Can anyone help me encode the space so it would work in a variable or another command that will perform the search and replace on a file while preserving the <Code>\\n</Code>?</p>\n\n<p>Thanks,\nRob</p>\n"}, {"tags": ["perl", "debian", "libxml2"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540408184, "post_id": 52976274, "comment_id": 92859166, "body": "What does <code>perl -MXML::Parser -e1</code> output? Also, <code>libxml-libxml-perl</code> installs/contains <code>XML::LibXML</code>, not <code>XML::Parser</code>."}, {"owner": {"reputation": 187, "user_id": 4500922, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/33a76f671bf6dd68b54a37446fb11d6b?s=128&d=identicon&r=PG&f=1", "display_name": "PaulLian", "link": "https://stackoverflow.com/users/4500922/paullian"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540411599, "post_id": 52976274, "comment_id": 92860748, "body": "Here is the output:Can&#39;t locate XML/Parser.pm in @INC (you may need to install the XML::Parser module) (@INC contains: /usr/local/lib/perl5/site_perl/5.28.0/armv7l-linux /usr/local/lib/perl5/site_perl/5.28.0 /usr/local/lib/perl5/5.28.0/armv7l-linux /usr/local/lib/perl5/5.28.0). BEGIN failed--compilation aborted."}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 2, "creation_date": 1540411724, "post_id": 52976274, "comment_id": 92860800, "body": "The package you need is <code>libxml-parser-perl</code>."}, {"owner": {"reputation": 187, "user_id": 4500922, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/33a76f671bf6dd68b54a37446fb11d6b?s=128&d=identicon&r=PG&f=1", "display_name": "PaulLian", "link": "https://stackoverflow.com/users/4500922/paullian"}, "edited": false, "score": 0, "creation_date": 1540411785, "post_id": 52976274, "comment_id": 92860834, "body": "sudo apt-get install libxml-parser-perl Reading package lists... Done Building dependency tree        Reading state information... Done libxml-parser-perl is already the newest version (2.44-2+b1). The following packages were automatically installed and are no longer required:   lxkeymap python-cairo python-gobject python-gobject-2 python-gtk2   python-xklavier Use &#39;sudo apt autoremove&#39; to remove them. 0 upgraded, 0 newly installed, 0 to remove and 43 not upgraded."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540411986, "post_id": 52976274, "comment_id": 92860935, "body": "Are you using the system Perl or a custom Perl? What does <code>which perl</code> output? For Debian, it must be <code>&#47;usr&#47;bin&#47;perl</code>. You seem to have <code>&#47;usr&#47;local&#47;bin&#47;perl</code>. If that is not the system Perl, then installing packages using <code>apt-get</code> will not work."}, {"owner": {"reputation": 187, "user_id": 4500922, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/33a76f671bf6dd68b54a37446fb11d6b?s=128&d=identicon&r=PG&f=1", "display_name": "PaulLian", "link": "https://stackoverflow.com/users/4500922/paullian"}, "edited": false, "score": 0, "creation_date": 1540412069, "post_id": 52976274, "comment_id": 92860976, "body": "yes, which perl turns up this: /usr/local/bin/perl"}, {"owner": {"reputation": 187, "user_id": 4500922, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/33a76f671bf6dd68b54a37446fb11d6b?s=128&d=identicon&r=PG&f=1", "display_name": "PaulLian", "link": "https://stackoverflow.com/users/4500922/paullian"}, "edited": false, "score": 0, "creation_date": 1540412144, "post_id": 52976274, "comment_id": 92861018, "body": "If this is the case, do I need to download a source package for perl and install manually? Are there additional packages needed as well? Thanks a lot1"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540412636, "post_id": 52976274, "comment_id": 92861240, "body": "No - you need to decide which Perl you want to install things in. If you want to use the system Perl, you can use <code>apt-get</code> to install Perl modules. If you want to use that other Perl, you will need to use <code>cpan</code> to install modules, like <code>cpan install XML::Parser</code>. You might still need to install some C libraries through <code>apt-get</code>, like <code>libexpat1-dev</code>."}, {"owner": {"reputation": 187, "user_id": 4500922, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/33a76f671bf6dd68b54a37446fb11d6b?s=128&d=identicon&r=PG&f=1", "display_name": "PaulLian", "link": "https://stackoverflow.com/users/4500922/paullian"}, "edited": false, "score": 0, "creation_date": 1540414021, "post_id": 52976274, "comment_id": 92861841, "body": "Thank you, I used the     cpan install XML::Parser    it went through well. Interestingly, the which perl still turns out to be /usr/local/bin/perl, but this installation works fine with the intltool installation process. Wondering what&#39;s the reason for that..."}], "answers": [{"tags": [], "owner": {"reputation": 211, "user_id": 4535477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1AqgN.jpg?s=128&g=1", "display_name": "Adlair Cerecedo-Mendez", "link": "https://stackoverflow.com/users/4535477/adlair-cerecedo-mendez"}, "is_accepted": false, "score": 0, "last_activity_date": 1588881078, "last_edit_date": 1588881078, "creation_date": 1588880507, "answer_id": 61666386, "question_id": 52976274, "link": "https://stackoverflow.com/questions/52976274/xml-parser-perl-module-is-needed/61666386#61666386", "title": "XML Parser perl module is needed", "body": "<p>You need to install XML::Parser::Style::Tree module. Try with <code>cpanm</code></p>\n\n<pre><code>cpanm XML::Parser::Style::Tree\n</code></pre>\n\n<p>Or using CPAN Shell</p>\n\n<pre><code>perl -MCPAN -e shell\ninstall XML::Parser::Style::Tree\n</code></pre>\n\n<p>After that, the module will be installed and XML::Parser will work well.</p>\n"}], "owner": {"reputation": 187, "user_id": 4500922, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/33a76f671bf6dd68b54a37446fb11d6b?s=128&d=identicon&r=PG&f=1", "display_name": "PaulLian", "link": "https://stackoverflow.com/users/4500922/paullian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1367, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1588881078, "creation_date": 1540407973, "question_id": 52976274, "link": "https://stackoverflow.com/questions/52976274/xml-parser-perl-module-is-needed", "title": "XML Parser perl module is needed", "body": "<p>I'm trying to install intltool on Debian (Raspberry Pi). When running</p>\n\n<pre><code>  ./configure\n</code></pre>\n\n<p>The system always come back with the error:</p>\n\n<pre><code>checking for XML::Parser... configure: error: XML::Parser perl module is required for intltool\n</code></pre>\n\n<p>But I do have the latest version libxml and libxml-libxml-perl installed. </p>\n\n<p>Can anyone help me interpret what is missing here?</p>\n\n<p>Thank you!\nPaul</p>\n"}, {"tags": ["perl", "fasta"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 10482932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9a81ba13cb82aaec8135df1f08e2fb6?s=128&d=identicon&r=PG&f=1", "display_name": "Michelangelo", "link": "https://stackoverflow.com/users/10482932/michelangelo"}, "edited": false, "score": 0, "creation_date": 1540465294, "post_id": 52978158, "comment_id": 92880522, "body": "I see. Thank you! So before I replace the headers I should store the old headers somehow in a file, right? That&#39;s why I wanted to use split (maybe wrong way to do it), to extract the old name and place them I hashes."}, {"owner": {"reputation": 480262, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 27, "user_id": 10482932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9a81ba13cb82aaec8135df1f08e2fb6?s=128&d=identicon&r=PG&f=1", "display_name": "Michelangelo", "link": "https://stackoverflow.com/users/10482932/michelangelo"}, "edited": false, "score": 0, "creation_date": 1540474654, "post_id": 52978158, "comment_id": 92886524, "body": "@Michelangelo Ah, it wasn\u2019t clear that you want to preserve the old headers. You can do that but you don\u2019t need to use <code>split</code>. Simply remove the leading <code>&gt;</code> by running <code>$line =~ s&#47;^&gt;&#47;&#47;;</code> and then storing <code>$line</code> in an array or a hash. If you want to preserve the header <i>in the file</i> and simply prefix it with the sequence ID you can replace <code>&#39;&gt;&#39;</code> by {<code>&#39;&gt;&#39;</code>, followed by the sequence ID}. This is left as an exercise to the reader."}], "tags": [], "owner": {"reputation": 480262, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "is_accepted": false, "score": 0, "last_activity_date": 1540416572, "creation_date": 1540416572, "answer_id": 52978158, "question_id": 52976252, "link": "https://stackoverflow.com/questions/52976252/write-old-fasta-header-and-new-to-file/52978158#52978158", "title": "Write old fasta header and new to file", "body": "<p>You\u2019re simply not printing anything. Once you add a <code>print</code> statement, it should work.</p>\n\n<p>In addition, it\u2019s unclear what you\u2019re using <code>split</code> for. Just increase a counter for the sequence:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $infile = $ARGV[0];\nopen my $IN, '&lt;', $infile or die \"Could not open $infile: $!, $?\";\n\nmy $seqid = 1;\n\nwhile (my $line = &lt;$IN&gt;) {\n    if ($line =~ /^&gt;/) {\n        print \"&gt;Seq$seqid\\n\";\n        $seqid++;\n    } else {\n        print $line;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": false, "score": 0, "last_activity_date": 1540475991, "creation_date": 1540475991, "answer_id": 52991198, "question_id": 52976252, "link": "https://stackoverflow.com/questions/52976252/write-old-fasta-header-and-new-to-file/52991198#52991198", "title": "Write old fasta header and new to file", "body": "<p>Simply write the new entries as you create them.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $infile = $ARGV[0];\nopen my $IN, '&lt;', $infile or die \"Could not open $infile: $!, $?\";\nmy $outfile = 'output';\nopen my $OUT, '&gt;', $outfile or die \"Could not open $outfile: $!, $?\";  # overwrites the file $outfile;\n\nmy $seqid = 1;\n\nwhile (my $line = &lt;$IN&gt;) {\n     if ($line =~ /^&gt;(.+)/) {\n        print $OUT \"Seq$seqid\\t$1\\n\"\n        print \"&gt;Seq$seqid\\n\";\n        $seqid++\n     } else {\n        print $line;\n     }\n}\n</code></pre>\n\n<p>I tried to fix the indentation but left the gratutious variable for the <code>$OUT</code> file name.</p>\n\n<p>If you want to keep the mapping in memory for other reasons (maybe to develop this into a much more complex script) using an array instead of a hash would seem like a natural way to keep the entries sorted; the new label is trivially derivable from the array index.</p>\n"}], "owner": {"reputation": 27, "user_id": 10482932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9a81ba13cb82aaec8135df1f08e2fb6?s=128&d=identicon&r=PG&f=1", "display_name": "Michelangelo", "link": "https://stackoverflow.com/users/10482932/michelangelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1540475991, "creation_date": 1540407870, "last_edit_date": 1540475240, "question_id": 52976252, "link": "https://stackoverflow.com/questions/52976252/write-old-fasta-header-and-new-to-file", "title": "Write old fasta header and new to file", "body": "<p>I want to extract the old fasta names which looks something like this:</p>\n\n<pre><code>&gt;Bartonella bibbi\nAUUCCGGUUGAUCCUGCCGGAGGCCACUGCUAUCGGGGUCCG\n</code></pre>\n\n<p>The new headers should look like this:</p>\n\n<pre><code>&gt;Seq1\nAUUCCGGUUGAUCCUGCCGGAGGCCACUGCUAUCGGGGUCCG\n</code></pre>\n\n<p>and so on...\nThe Bartonella Bibbi should be saved together with the new name Seq1 in a new file an so on. So I've started a bit, by looking for lines with >, and then I split to get an array to get the old name. I don't know how to continue, because I want two things here, first to put the new name in there, but also extracting the old name together with the new in a file, and ALSO get an output file with my sequence and my new names. Please, any input from you will help!</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $infile = $ARGV[0];\nopen my $IN, '&lt;', $infile or die \"Could not open $infile: $!, $?\";\n\nwhile (my $line = &lt;$IN&gt;) {\n if ($line =~ /^&gt;/) {\n\nmy @header = split (/\\&gt;/, $line);\n\n    my $oldfasta = \"$header[1]\";\n\n}\n}\n</code></pre>\n\n<p>So after some edits, this is the current script:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $infile = $ARGV[0];\nopen my $IN, '&lt;', $infile or die \"Could not open $infile: $!, $?\";\n\nmy $seqid = 1;\nmy %id;\n\nwhile (my $line = &lt;$IN&gt;) {\n if ($line =~ /^&gt;/) {\n\n     $id{\"Seq$seqid \"} = $line;\n     print \"&gt;Seq$seqid\\n\";\n     $seqid++\n } else {\n\n     print $line;\n }\n\n\n}\n\n     my $outfile = 'output';\n     open my $OUT, '&gt;', $outfile or die \"Could not open $outfile: $!, $?\";  # overwrites the file $outfile;\n     print $OUT %id;\n</code></pre>\n\n<p>This gives me a file that looks like this: </p>\n\n<pre><code>   Seq29  &gt;Sulfophobococcus_zilligii\n\n   Seq20 &gt;Pyrococcus_shinkaii\n</code></pre>\n\n<p>and so on.\nThey are not in order, how do I sort them and get rid of the > in the species name?</p>\n"}, {"tags": ["perl", "grep"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1540407656, "post_id": 52976101, "comment_id": 92858929, "body": "What does that pipeline you run with <code>system()</code> print out? I bet it&#39;s <code>2</code>."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 3, "creation_date": 1540407897, "post_id": 52976101, "comment_id": 92859032, "body": "And since you mention not understanding a &quot;trailing zero&quot;, I suspect you don&#39;t understand how <code>system()</code> works or what it returns. Refresh yourself by <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">reading the documentation</a>, in particular the third paragraph."}, {"owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540408333, "post_id": 52976101, "comment_id": 92859236, "body": "@Shawn Yes I see now.  I&#39;m &quot;seeing&quot; the grep value, and printing the &quot;return&quot;.  Then my question would be is how do I capture the grep value within the Perl script?"}, {"owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540408741, "post_id": 52976101, "comment_id": 92859428, "body": "Am guessing I have to use ps or EXEC to a file.  Will have to try it later and post result when I return."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1540409688, "post_id": 52976101, "comment_id": 92859885, "body": "DANGER!!!! <code>foo.cgi?u=%27%20%3B%20rm%20-rf%20%2F%20%3B%20%27</code> would cause <code>rm -rf &#47;</code> to be executed!!! Please use <code>use String::ShellQuote qw( shell_quote ); my $grep_cmd = shell_quote(&#39;grep&#39;, &#39;--&#39;, &quot;perly.pl u=$userid&quot;); system(&quot;... | $grep_cmd | ...&quot;)</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1540413855, "post_id": 52976101, "comment_id": 92861764, "body": "Even better, use <a href=\"https://linux.die.net/man/1/pgrep\" rel=\"nofollow noreferrer\">pgrep</a> so you don&#39;t need to pass anything to the shell: <code>my $check = &quot;perly.pl u=$userid&quot;; system(&#39;pgrep&#39;, &#39;-fc&#39;, $check);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1540415971, "last_edit_date": 1540415971, "creation_date": 1540414330, "answer_id": 52977750, "question_id": 52976101, "link": "https://stackoverflow.com/questions/52976101/strange-output-in-printing-a-grep-c-return/52977750#52977750", "title": "Strange output in printing a grep -c return", "body": "<p>You can easily capture the output and exit value of a command using <a href=\"https://metacpan.org/pod/Capture::Tiny\" rel=\"nofollow noreferrer\">Capture::Tiny</a>. Also, when using the built-in <a href=\"https://perldoc.pl/functions/system\" rel=\"nofollow noreferrer\">system</a>, always make sure to check that the execution succeeded, if it failed this is indicated by a return value of -1.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Capture::Tiny 'capture_stdout';\n\nmy $check = \"perly.pl u=foo\";\nmy ($stdout, $exit) = capture_stdout { system 'pgrep', '-fc', $check };\ndie \"pgrep failed: $!\" if $exit == -1;\n</code></pre>\n\n<p>Remember that your output will most likely end in a newline, even just a count, so you probably want to <a href=\"https://perldoc.pl/functions/chomp\" rel=\"nofollow noreferrer\">chomp</a> it.</p>\n\n<p>You can also use the <a href=\"https://perldoc.pl/perlop#qx/STRING/\" rel=\"nofollow noreferrer\">backticks/qx operator</a> to return just the STDOUT, but this will always pass the command through the shell, requiring you to use String::ShellQuote on your argument containing user input as noted by @ikegami.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse String::ShellQuote;\n\nmy $check = shell_quote \"perly.pl u=foo\";\nmy $stdout = `pgrep -fc $check`;\ndie \"pgrep failed: $!\" if $? == -1;\n</code></pre>\n\n<p>An alternative is <a href=\"https://metacpan.org/pod/IPC::System::Simple\" rel=\"nofollow noreferrer\">IPC::System::Simple</a>, which provides <code>capturex</code>, a form of the backticks operator that takes a list of arguments like system and never passes them through the shell. By default it will throw an exception if the command fails or if there's a nonzero exit code, but you can specify to allow certain exit codes. Since pgrep returns a nonzero exit code if there's no matches, you want to allow nonzero exit codes.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse IPC::System::Simple qw(capturex EXIT_ANY $EXITVAL);\n\nmy $check = \"perly.pl u=foo\";\nmy $stdout = capturex EXIT_ANY, 'pgrep', '-fc', $check;\nmy $exit = $EXITVAL;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1541038328, "post_id": 53090487, "comment_id": 93085319, "body": "This is still vulnerable to allow anyone to run whatever they want on your machine as @ikegami said. Don&#39;t do this. Either use String::ShellQuote on the args you pass through the shell, or use the options I mentioned that don&#39;t require going through the shell."}], "tags": [], "owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "is_accepted": false, "score": 1, "last_activity_date": 1541013233, "creation_date": 1541013233, "answer_id": 53090487, "question_id": 52976101, "link": "https://stackoverflow.com/questions/52976101/strange-output-in-printing-a-grep-c-return/53090487#53090487", "title": "Strange output in printing a grep -c return", "body": "<p>In case anyone is looking for a solution to this, good ideas up top but in the end I chose to create a unique temp file and pipe the output to that file.</p>\n\n<p>Many ways, I found this the one that felt right for me.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse CGI;\nuse File::Temp;\n$|=1;\n\nmy $q = CGI-&gt;new();\nmy $userid = $q-&gt;param(\"u\");\nmy $check = \"'perly.pl u=\" . $userid . \"'\";\n\nmy ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime(time); \n$year += 1900;\n$mon++;\n\nmy $uFile = $userid . $year . $mon . $mday . $hour . $min . $sec . \".dat\";\n\nmy $command = \"ps aux | grep $check | grep -v 'grep' -c &gt; $uFile\";\n\nsystem($command);\n\nif (open(my $fh, \"$uFile\"))\n{\n    while (my $line = &lt;$fh&gt;)\n    {\n        if($line&gt;1)\n        {\n            print\"\\nApp is already running\";\n         }\n    }\n\n    close($fh);\n    unlink($uFile);\n}\nexit 0;\n</code></pre>\n"}], "owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1541013233, "creation_date": 1540407182, "question_id": 52976101, "link": "https://stackoverflow.com/questions/52976101/strange-output-in-printing-a-grep-c-return", "title": "Strange output in printing a grep -c return", "body": "<p>Below is a shell program, it's just me testing how to tell if the same Perl script is already running using the same parameters.</p>\n\n<p>It works, but what strikes me as odd is the trailing zero after the count of lines.  I don't see where in my code that zero would be printed.  If I run that grep command from the command line it just returns the count, no trailing '0', but it doesn't work that way in the code.</p>\n\n<p>Any clues anyone?</p>\n\n<p>Thanks</p>\n\n<p><strong>The App</strong></p>\n\n<pre><code>#!/usr/bin/perl\n\nuse CGI;\n$|=1;\n\nmy $q = CGI-&gt;new();\nmy $userid = $q-&gt;param(\"u\");\nmy $check = \"'perly.pl u=\" . $userid . \"'\";\n\nmy $return= system(\"ps aux | grep $check | grep -v 'grep' -c\");\n\nprint $return;\nprint \"\\n\";\n\nwhile(1)\n{\n        print \"$userid...\";\n        sleep(3);\n}\n\nexit 0;\n</code></pre>\n\n<p><strong>The output</strong></p>\n\n<blockquote>\n  <p>2 0\n  PlasticProgrammer..PlasticProgrammer..PlasticProgrammer..PlasticProgrammer..PlasticProgrammer..PlasticProgrammer..PlasticProgrammer..PlasticProgrammer..PlasticProgrammer..PlasticProgrammer..PlasticProgrammer..</p>\n</blockquote>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 2, "last_activity_date": 1540407259, "creation_date": 1540407259, "answer_id": 52976117, "question_id": 52976077, "link": "https://stackoverflow.com/questions/52976077/perl-open-source-explaination-for-slic3r-honeycomb-pattern/52976117#52976117", "title": "Perl -Open Source Explaination for Slic3r &quot;honeycomb&quot; pattern", "body": "<blockquote>\n  <p>I'm trying to work out if there is anything significant with the words 'honeycomb'? </p>\n</blockquote>\n\n<p>Nothing as far as the Perl here is concerned. It is just a string.</p>\n\n<p><a href=\"https://github.com/slic3r/Slic3r/search?q=honeycomb&amp;unscoped_q=honeycomb\" rel=\"nofollow noreferrer\">Something else</a> will, presumably, read that variable.</p>\n\n<blockquote>\n  <p>Are they just checking if the variable pattern is equal to the string </p>\n</blockquote>\n\n<p>No. It is an assignment, not a comparison</p>\n"}], "owner": {"reputation": 99, "user_id": 10063873, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XqwEqS3G7nI/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7o6sjf_HyLgV4ex0Wxh5mu-kZ8ARQ/mo/photo.jpg?sz=128", "display_name": "User0110101", "link": "https://stackoverflow.com/users/10063873/user0110101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 52976117, "answer_count": 1, "score": -1, "last_activity_date": 1540407959, "creation_date": 1540407085, "last_edit_date": 1540407959, "question_id": 52976077, "link": "https://stackoverflow.com/questions/52976077/perl-open-source-explaination-for-slic3r-honeycomb-pattern", "title": "Perl -Open Source Explaination for Slic3r &quot;honeycomb&quot; pattern", "body": "<p>I have no knowledge of perl, and the open source code I'm looking at it still uses a small element of it. I'm trying to work out if there is anything significant with the words 'honeycomb'? Are they just checking if the variable pattern is equal to the string or am I missing anything?</p>\n\n<pre><code> # prepare fillers\nmy $pattern = $self-&gt;object_config-&gt;support_material_pattern;\nmy @angles = ($self-&gt;object_config-&gt;support_material_angle);\nif ($pattern eq 'rectilinear-grid') {\n    $pattern = 'rectilinear';\n    push @angles, $angles[0] + 90;\n} elsif ($pattern eq 'pillars') {\n    $pattern = 'honeycomb';\n}\n</code></pre>\n\n<p><a href=\"https://github.com/slic3r/Slic3r/blob/master/lib/Slic3r/Print/SupportMaterial.pm\" rel=\"nofollow noreferrer\">https://github.com/slic3r/Slic3r/blob/master/lib/Slic3r/Print/SupportMaterial.pm</a></p>\n"}, {"tags": ["mysql", "perl", "oracle11g"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1540405868, "post_id": 52975708, "comment_id": 92858087, "body": "Please show us the code where you set up your database connection. Most likely you have <code>PrintError =&gt; 1</code> there. Remove that."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1540405979, "post_id": 52975708, "comment_id": 92858138, "body": "Also, you should add <code>use strict;</code> to your code to let Perl tell you about problems in your code. <code>&quot;insert ... values(@StudentID,...&quot;</code> will not do what you want, because either you have no <code>@StudentID</code> array or you&#39;re doing very weird code... Seeing that you have other variables there, maybe you <i>have</i> an array <code>@StudentID</code>. Still, you should use DBI placeholders <a href=\"https://metacpan.org/pod/DBI#Placeholders-and-Bind-Values\" rel=\"nofollow noreferrer\">metacpan.org/pod/DBI#Placeholders-and-Bind-Values</a>"}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1540407880, "post_id": 52976189, "comment_id": 92859022, "body": "No, eval doesn&#39;t in any way catch stuff printed to STDERR or warn."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1540408054, "post_id": 52976189, "comment_id": 92859108, "body": "It needs the <code>SIG{__WARN__}</code> hook for stderr (and that may not always work).  But the question for me is, why dismiss warnings/errors? Fix&#39;em so there aren&#39;t attempts to enter duplicate data."}], "tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": false, "score": 1, "last_activity_date": 1540408005, "last_edit_date": 1540408005, "creation_date": 1540407591, "answer_id": 52976189, "question_id": 52975708, "link": "https://stackoverflow.com/questions/52975708/how-to-hide-system-generated-error-message-while-adding-duplicate-data-into-mysq/52976189#52976189", "title": "How to hide system generated error message while adding duplicate data into MySQL DB using Perl?", "body": "<p>You can set <code>PrintError =&gt; 0</code> attribute when you connect to database. By default it is on.\nAlso you can try setting this attribute in <code>$dbh-&gt;prepare</code>. Should work for that statement handle only according to the documentation <a href=\"https://metacpan.org/pod/DBI#PrintError\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/DBI#PrintError</a></p>\n"}], "owner": {"reputation": 11, "user_id": 10553774, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lQTmuehQDOw/AAAAAAAAAAI/AAAAAAAAAT8/YHuSeb152Kg/photo.jpg?sz=128", "display_name": "Prajeeth Anand", "link": "https://stackoverflow.com/users/10553774/prajeeth-anand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540408005, "creation_date": 1540405503, "last_edit_date": 1540406033, "question_id": 52975708, "link": "https://stackoverflow.com/questions/52975708/how-to-hide-system-generated-error-message-while-adding-duplicate-data-into-mysq", "title": "How to hide system generated error message while adding duplicate data into MySQL DB using Perl?", "body": "<p>I have created a table with 2 composite keys in MySQL. I am now trying to insert duplicate values and so I'm getting a system generated error message. I want to hide that error message and display my own error message - how can I do that? I have tried using \"warn\" but the system generated message is still being displayed.</p>\n\n<pre><code>$sts = $dbh-&gt;prepare(\"insert into Enrolled(Student_Id,CourseID,DOJ) values(@StudentID,$CourseID,CURDATE())\");\n$sts-&gt;execute() or warn (\"Error\");\n</code></pre>\n\n<p>output:</p>\n\n<blockquote>\n  <p>DBD::mysql::st execute failed: Duplicate entry '16-11' for key\n  'PRIMARY' at Stud ent.pm line 182,  line 10.Error</p>\n</blockquote>\n"}, {"tags": ["perl", "sockets"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540396724, "post_id": 52973118, "comment_id": 92853089, "body": "If you can install extra stuff, think about using Mojolicious::Lite or Dancer2 instead. Will save you a lot of typing and pain. Something like <code>perl -MDancer2 -e &#39; get &quot;&#47;&quot; =&gt; sub { return to_json {foo =&gt; &quot;bar&quot;} }; dance&#39;</code> as a start is great, then make it into a script. Run either with the built-in server, or use <code>plackup</code>."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1540398465, "post_id": 52973118, "comment_id": 92854126, "body": "<i>but both only return when they recieve an EOL</i> - this indicates that the sender is not flushing its output. You are not clear about the process that produces data for your socket to consume."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1540405786, "post_id": 52973118, "comment_id": 92858044, "body": "Re &quot;<i>but both only return when they recieve an EOL</i>&quot;, No, they don&#39;t. both <code>sysread</code> and <code>recv</code> returns as soon as there is data. Perhaps the sender is buffering its output."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1540410778, "post_id": 52973118, "comment_id": 92860396, "body": "Or maybe you only think you haven&#39;t received anything because your program&#39;s output is buffered."}, {"owner": {"reputation": 658, "user_id": 5543203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bdYF4.png?s=128&g=1", "display_name": "Henrik supports the community", "link": "https://stackoverflow.com/users/5543203/henrik-supports-the-community"}, "edited": false, "score": 0, "creation_date": 1540453888, "post_id": 52973118, "comment_id": 92873846, "body": "I&#39;ve tested using both <code>telnet</code> and <code>curl</code> to send requests. I have no problem believing that telnet might not send data until I press enter, but I think <code>curl</code> should do it properly, and with tcpdump I could see that data was actually sent."}, {"owner": {"reputation": 658, "user_id": 5543203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bdYF4.png?s=128&g=1", "display_name": "Henrik supports the community", "link": "https://stackoverflow.com/users/5543203/henrik-supports-the-community"}, "edited": false, "score": 0, "creation_date": 1540454399, "post_id": 52973118, "comment_id": 92874126, "body": "And I&#39;ve been cheated by buffered output from that script before, so I have made sure that&#39;s not the problem in this case."}], "answers": [{"tags": [], "owner": {"reputation": 658, "user_id": 5543203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bdYF4.png?s=128&g=1", "display_name": "Henrik supports the community", "link": "https://stackoverflow.com/users/5543203/henrik-supports-the-community"}, "is_accepted": true, "score": 0, "last_activity_date": 1540989527, "creation_date": 1540989527, "answer_id": 53083538, "question_id": 52973118, "link": "https://stackoverflow.com/questions/52973118/reading-a-specific-number-of-bytes-from-a-socket-in-perl/53083538#53083538", "title": "Reading a specific number of bytes from a socket in perl", "body": "<p>Using <code>read $client_socket, $data, 4</code>, I got some code that did what I wanted.</p>\n"}], "owner": {"reputation": 658, "user_id": 5543203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bdYF4.png?s=128&g=1", "display_name": "Henrik supports the community", "link": "https://stackoverflow.com/users/5543203/henrik-supports-the-community"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 0, "accepted_answer_id": 53083538, "answer_count": 1, "score": 1, "last_activity_date": 1540989527, "creation_date": 1540395880, "last_edit_date": 1540476564, "question_id": 52973118, "link": "https://stackoverflow.com/questions/52973118/reading-a-specific-number-of-bytes-from-a-socket-in-perl", "title": "Reading a specific number of bytes from a socket in perl", "body": "<p>I'm trying to emulate some small parts of a HTTP api (to test some scripts against - the scripts are meant to run against some software implementing the complete API, but making that run and feeding it initial data for testing is hard). </p>\n\n<p>So far I have a small perl script using IO::Socket::INET to listen to TCP connections, that works fine for emulating GET requests, but I also have to handle some POST requests, and for that I'm a little stuck. I read the headers just fine, and find e.g. 'Content-Length: 20', but then I have to read those 20 bytes which often does not end with a newline.</p>\n\n<p>I've tried</p>\n\n<pre><code>$client_socket-&gt;recv($data, $content_length);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>sysread $client_socket, $data, $content_length;\n</code></pre>\n\n<p>but both only return when they recieve an EOL (I haven't checked whether they need <code>\\n</code>, <code>\\r</code> or both as it doesn't really matter), but then only return the number of bytes I asked for.</p>\n\n<p>I probably haven't searched for the right words, all I've found is that the timeout you can set on a IO::Socket::INET is only used for the connection, and if I use IO::Socket::Timeout or wrap the read in an eval-block with an alarm, nothing is read.</p>\n\n<hr>\n\n<p>As the comments revealed that something else was going on, I dug on. It seems <code>$socket-&gt;recv</code> changes behaviour if I have previously read from the socket with <code>$data = &lt;$socket&gt;</code>, am example (not a complete script - I don't think it's interesting, but if someone wants one I can supply one):</p>\n\n<pre><code>$client_socket-&gt;recv($data, 4);\nprint \"1: $data\\n\";\n$data = &lt;$client_socket&gt;;\nprint \"2: $data\\n\";\n$client_socket-&gt;recv($data, 4); \nprint \"3: $data\\n\";\n</code></pre>\n\n<p>This only outputs lines with <code>1:</code> and <code>2:</code> when several lines are sent on the socket (I just used <code>curl</code> to generate several (7 I think) lines of data).</p>\n"}, {"tags": ["perl", "hash", "reference", "hashmap", "dereference"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1540379049, "post_id": 52967167, "comment_id": 92840920, "body": "Your <code>$fdx</code> contains an object, which in turn contains other objects, but you cut off the class names. It looks like you are using proprietary code to get the data from your database, so we can&#39;t tell you how to do this using your code&#39;s built-in mechanics. You should not, however, poke around in the object internals, as Perl&#39;s way of implementing objects allows those to change and there is no guarantee that your code won&#39;t suddenly break if you mess with internals. Instead, install Data::Printer and use it to inspect the object. <code>use Data::Printer class =&gt; { expand =&gt; &#39;all&#39; }; p $fdx</code>..."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540379127, "post_id": 52967167, "comment_id": 92840963, "body": "... you can then check what kind of methods are available, whether there is a way to iterate or search the data, and so on. If this is code proprietary to your organisation, you should read the actual classes&#39; code and hopefully it will contain documentation. If it is indeed open source, you should do the same."}, {"owner": {"reputation": 51, "user_id": 10456591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc461f0401c3ef75676c41ede4899f3?s=128&d=identicon&r=PG&f=1", "display_name": "CaptainCovfefe", "link": "https://stackoverflow.com/users/10456591/captaincovfefe"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540379246, "post_id": 52967167, "comment_id": 92841039, "body": "hey, thank you very much for your answer, i will try this now. So whenever there is a bless on a hash it is some sort of class and has eventually own methods ? also i only want to read out data, not change anything"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540379446, "post_id": 52967167, "comment_id": 92841162, "body": "Yes. <code>bless</code> is the keyword that combines a data structure with a package, turning it into an <i>object</i>. We use the word <i>class</i> loosely in Perl for packages that have an object-oriented interface. You can spot <i>methods</i> (which are just subs) by their first argument being <code>$self</code>, which is the naming convention for the object itself. Calling <code>$foo-&gt;frobnicate($bar)</code> will look like <code>package Foo; sub frobnicate { my ( $self, $bar ) = @_; ... } 1;</code>. The arrow operator <code>-&gt;</code> takes the package the thing on the left is blessed into to find the method on the right and passes the thing on the left to it"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1540379827, "post_id": 52967167, "comment_id": 92841392, "body": "Please note that you could indeed just reach into the data structure. There is no such thing as a <i>placeholder</i> for a key. You need to <i>iterate</i> over all keys using a loop. This is fairly simple. You will need to use the <code>keys</code> keyword, and at least one <code>foreach</code> loop. But doing this with objects is <b>really bad practice</b>, as it could break any time, and it will be very hard to maintain as you create coupling where there shouldn&#39;t be any. I can&#39;t tell you how to do this properly as I don&#39;t know your system, but I can tell you what kind of thing you need to do."}, {"owner": {"reputation": 51, "user_id": 10456591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc461f0401c3ef75676c41ede4899f3?s=128&d=identicon&r=PG&f=1", "display_name": "CaptainCovfefe", "link": "https://stackoverflow.com/users/10456591/captaincovfefe"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540380065, "post_id": 52967167, "comment_id": 92841543, "body": "currently installing Data::Printer, so basically that would be like 6 or 7 nested foreach loops, each going one step &#39;deeper&#39; into the hash structure? thanks for you help, sadly i dont have the reputation yet to upvote :/"}, {"owner": {"reputation": 51, "user_id": 10456591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc461f0401c3ef75676c41ede4899f3?s=128&d=identicon&r=PG&f=1", "display_name": "CaptainCovfefe", "link": "https://stackoverflow.com/users/10456591/captaincovfefe"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540380406, "post_id": 52967167, "comment_id": 92841771, "body": "after installing Data::Printer <code>use Data::Printer class =&gt; { expand =&gt; &#39;all&#39; }; p $fdx;</code> doesnt give any output. seems to work though, there are no errors."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540386297, "post_id": 52967167, "comment_id": 92845778, "body": "I&#39;ve not actually answered, this is just comments. Voting on them has no effect but to filter for later viewers. Your <code>p</code> output goes to <code>STDERR</code>. If this is in a web application, it&#39;ll be in your server log. Use <code>print np $foo</code> instead to write to <code>STDOUT</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540386495, "post_id": 52967167, "comment_id": 92845902, "body": "You don&#39;t need 6 or 7 loops if the other keys are fixed. You only need them for dynamic keys. From your description, it looks like <code>_PARENT_OBJECT</code>, <code>data</code> and <code>atm_rundatahistory</code> are fixed, and so are the values inside each timestamp."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 51, "user_id": 10456591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc461f0401c3ef75676c41ede4899f3?s=128&d=identicon&r=PG&f=1", "display_name": "CaptainCovfefe", "link": "https://stackoverflow.com/users/10456591/captaincovfefe"}, "edited": false, "score": 0, "creation_date": 1540388789, "post_id": 52967167, "comment_id": 92847512, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/182431/discussion-between-simbabque-and-captaincovfefe\">continue this discussion in chat</a>."}], "owner": {"reputation": 51, "user_id": 10456591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc461f0401c3ef75676c41ede4899f3?s=128&d=identicon&r=PG&f=1", "display_name": "CaptainCovfefe", "link": "https://stackoverflow.com/users/10456591/captaincovfefe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1540385409, "creation_date": 1540378435, "last_edit_date": 1540385409, "question_id": 52967167, "link": "https://stackoverflow.com/questions/52967167/get-values-out-of-complex-perl-hash-structures", "title": "Get Values out of Complex Perl Hash Structures", "body": "<p>With the following Code I can fetch Data stored in a Hash from a Database and print it out:</p>\n\n<pre><code>use Data::Dumper;\nmy $fdx = $s-&gt;field();   # get Hashreference from Database\nprint Dumper($fdx);      # print out Hash\n</code></pre>\n\n<p>The (important part of the) Output looks like this:</p>\n\n<pre><code>$VAR1 = bless( {\n     'selectable' =&gt; 'true',\n     '_PARENT_OBJECT' =&gt; bless( {\n           'dirtyFlag' =&gt; 1,\n           'path' =&gt; undef,\n           'testItems' =&gt; [],\n           'data' =&gt; {\n                'TEST_10' =&gt; {\n                     'atm_rundatahistory' =&gt; {\n                           '1523964918' =&gt; {\n                                'atm_prid' =&gt; {\n                                      'content' =&gt; '',\n                                      'label' =&gt; 'Problem Report IDs',\n                                      'raw' =&gt; ''\n                                 }, ...\n                            '1523964410' =&gt; {\n                                 'atm_prid' =&gt; {\n                                       'label' =&gt; 'Problem Report IDs',\n                                       'raw' =&gt; '23361234',\n                                       'content' =&gt; '23361234'\n                                  }, ...\n</code></pre>\n\n<p><strong>'Test_10'</strong> is one of hundreds of Tests, <strong>'1523964918'</strong> is one of many unix timestamps, so basically its a 32 Bit Integer, but I dont know which numbers the timestamps contain.</p>\n\n<p><strong>How do I print out / access the values for <em>'content'</em> (in this case '23361234') of the most inner Hashes, for all Tests and unix timestamps, if they exist?</strong></p>\n\n<hr>\n\n<p><em>from here on I will describe my thoughts and what I have tried, its not necessary to read any further for this question.</em> </p>\n\n<p>I think the code I am looking for is something like:</p>\n\n<pre><code>foreach my $val($fdx{_PARENT_OBJECT}{data}{\"TEST_*\"}{atm_rundatahistory}{\"********\"}{atm_prid}{content}) \n    print(\"\\n$val\");\n</code></pre>\n\n<p>However I don't know the exact Syntax, and neither do I know which placeholders to set for <code>\"Test_10\"</code>, since there are many tests numbers, e.g. <code>\"...Test_132...Test_134\"</code> and the Unix timestamps can be any 32 Bit Integer, so I guess I can use start as a placeholder? e.g. <code>\"********\"</code>. </p>\n\n<p>After some hours of searching on the web, I haven't found a understandable tutorial on how to access values from complex Perl hash structures, I guess there are some simple syntax-rules to know and you can get any value of even very complex data structures without to much effort. </p>\n\n<p>I've already read <a href=\"https://perldoc.pl/perlreftut#Using-References\" rel=\"nofollow noreferrer\">perldoc_perlreftut</a>. If there is any other easy to understandable tutorial for these kind of problems, please recommend them to me. I don't really know how I can learn to handle such complex data structures in Perl myself.</p>\n"}, {"tags": ["perl", "parsing", "cisco"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 6864964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff67c191467d6f9ebc3df4f108248fd?s=128&d=identicon&r=PG&f=1", "display_name": "Luc Larochelle", "link": "https://stackoverflow.com/users/6864964/luc-larochelle"}, "edited": false, "score": 1, "creation_date": 1540390446, "post_id": 52961504, "comment_id": 92848746, "body": "Hi @hoffmeister, this is very kind of you. Can you explain a little what&#39;s your logic behind it ?"}, {"owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "reply_to_user": {"reputation": 61, "user_id": 6864964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff67c191467d6f9ebc3df4f108248fd?s=128&d=identicon&r=PG&f=1", "display_name": "Luc Larochelle", "link": "https://stackoverflow.com/users/6864964/luc-larochelle"}, "edited": false, "score": 0, "creation_date": 1540393269, "post_id": 52961504, "comment_id": 92850781, "body": "I&#39;ve just added an attempt. i hope it makes sense. it seems far more complex than it is i think. It makes more sense when it runs. Especially on juniper where they are multiple levels of white-space"}], "tags": [], "owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "is_accepted": false, "score": 0, "last_activity_date": 1540393142, "last_edit_date": 1540393142, "creation_date": 1540358138, "answer_id": 52961504, "question_id": 52960589, "link": "https://stackoverflow.com/questions/52960589/using-space-depth-to-parse-config-files-contexts-with-perl/52961504#52961504", "title": "Using space depth to parse config file&#39;s contexts with Perl", "body": "<p>I have written something to do exactly this. I can't figure out how to put it on metacpan. However, im sure there is better already on there if I knew where to look. It's on of the first i wrote in perl, so it's a bit of a mess. But basically you can type  \"gettree -l Node interface\"  and on a XR device it'll pull all of the config. \"gettree -s Node Description_keyword\" will pull all of a single interface config. you can also use it with STDIN  e.g., \"cat file | gettree -l interface\". </p>\n\n<p>Program</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse lib '/PATH_TO_Gettree.pm_MODULE/';\n\nuse strict;\nuse warnings;\nuse Gettree;\nuse Getopt::Std;\n\nmy %opts;\ngetopts('eislnpm' , \\%opts);\n\n\nmy $searchstr;\nmy $filename;\nmy $debug=0;\n\nif($ARGV[0]=~m/help/ || $ARGV[0]=~m/^\\?$/ )\n{   die usage();    }\n\nif($#ARGV&lt;0||$#ARGV&gt;1)\n{\n    usage();\n    killapp(\"Please specifiy node and search term, use --help for the help menu\");\n}\nelsif($#ARGV==0)\n{\n    Gettree::setopts( \\%opts , \\$ARGV[0] );\n    while(&lt;STDIN&gt;)\n    {\n        Gettree::gettree_stream_passline( \\$_ );\n    }\n    print Gettree::gettree_getreturnstring();\n}\nelse\n{\n    $filename= $ARGV[0];\n    $filename=\"/CONFIGS_DIR/\".lc $filename if ! $opts{e};\n    print Gettree::gettree_file ( \\%opts , \\$filename , \\$ARGV[1]) ;  #\\$filename , $searchstring\n\n}\n\n\n\nsub killapp\n{\n\n    print $_[0].\"\\n\";\n    exit;\n}\nsub usage\n{\n    print \"\n    Usage: gettree [OPTION]... [NODE] STRING\n    Search for PATTERN in each FILE or standard input.\n\n        usage gettree &lt;options&gt; &lt;node&gt; &lt;string&gt;\n    -s      include same level\n    -l      include lower levels\n    -n      show line numbers (do not use with STDIN, it wont work)\n    -i      case insensitive\n    -e      exact file location (rather than just the nodename)\n    -p      print parent's same level lines\n    -m      minimal print, do not print parents\n    Examples:\n        gettree Node text\n        gettree -sln NODE CCT_Ref\n        gettree -l NODE POS8/0\n    \\n\\n\";\n    exit;\n}\n</code></pre>\n\n<p>Module</p>\n\n<pre><code>#!/usr/bin/perl\n\n\npackage Gettree;\nuse strict;\nuse warnings;\n\n\nmy $line;\nmy $wsdiff      = 0;\nmy $iopt        = 0;\nmy $sopt        = 0;\nmy $lopt        = 0;\nmy $nopt        = 0;\nmy $popt        = 0;\nmy $mopt        = 0;\nmy $linecounter = 0;\nmy $matched     = -1;\nmy $debug       = 0;    ##remove later\nmy @arr;\nmy @sopt_arr;\nmy @popt_arr;\n\nmy $searchstr;\nmy $returnstring;\n\n\nsub setopts   # \\%opthash , $searchstring\n{\n    cleardata();\n    push @arr, [ 0, \"\",0];\n    my %hash=%{$_[0]};\n\n    $iopt   =   1 if $hash{i};\n    $sopt   =   1 if $hash{s};\n    $lopt   =   1 if $hash{l};\n    $nopt   =   1 if $hash{n};\n    $popt   =   1 if $hash{p};\n    $mopt   =   1 if $hash{m};\n    if ( defined $hash{qopts} )\n    {\n        $iopt = 1 if $hash{qopts} =~ /i/;\n        $lopt = 1 if $hash{qopts} =~ /l/;\n        $nopt = 1 if $hash{qopts} =~ /n/;\n        $sopt = 1 if $hash{qopts} =~ /s/;\n        $popt = 1 if $hash{qopts} =~ /p/;\n        $mopt = 1 if $hash{qopts} =~ /m/;\n    }\n    if ( ref($_[1]) )   {   $searchstr=$iopt? qr/${$_[1]}/i : qr/${$_[1]}/ ;    }\n    else                {   $searchstr=$iopt? qr/$_[1]/i : qr/$_[1]/ ;          }\n}\n\nsub gettree_stream_passline  # \\$line\n{\n    process_line(${$_[0]});\n}\nsub gettree_getreturnstring\n{\n    return $returnstring;\n}\nsub gettree_varable         #  \\%opthash , \\$text , $searchstring\n{\n    setopts($_[0] , $_[2]);\n    my $str=${$_[1]};\n    while($str=~m#(.*\\n)#g)\n    {\n        process_line($1);\n    }\n    return $returnstring;\n}\nsub gettree_file        #  \\%opthash , \\$filename , $searchstring\n{\n    setopts($_[0] , $_[2]);\n    my $filename;   \n    if ( ref($_[1]) )   {   $filename=${$_[1]}; }\n    else                {   $filename=$_[1] ;   }\n    open FH, \"&lt;\", $filename or die \"\\nFile \".$filename.\" cannot be found\\nerror : \".$!.\"\\n\";\n\n    while(my $text=&lt;FH&gt;)\n    {\n        process_line($text);\n    }\n\n    close FH;\n    return $returnstring;\n}\n\nsub process_line\n{\n    $line=shift;\n    if($line=~m/^([ \\t]+)/) {   $wsdiff=length($1)  }\n    else {              $wsdiff=0       };\n\n    if($wsdiff&gt;$arr[$#arr][0])\n    {\n        push @arr, [ $wsdiff , $line , $linecounter ];\n        if ( $sopt || $popt )\n        {\n            @popt_arr=@sopt_arr if $popt;\n            @sopt_arr=() if defined $sopt_arr[0];\n        }\n    }\n    else\n    {\n        while( @arr &amp;&amp; $arr[$#arr][0]&gt;$wsdiff )\n        {\n            pop @arr;\n            @sopt_arr=@popt_arr if ( $sopt || $popt );\n            @popt_arr=() if $popt;\n        }\n        if($#arr&lt;0)\n        {\n            push @arr, [ $wsdiff , $line, $linecounter ];\n        }\n        else\n        {\n            push @sopt_arr, $arr[$#arr] if $sopt || $popt ;\n            $arr[$#arr]=[ $wsdiff , $line , $linecounter ];\n        }\n    }\n@sopt_arr=() if $#sopt_arr&gt;200;  ## to avoid filling the memory\n@popt_arr=() if $#popt_arr&gt;200; ## to avoid filling the memory\n    ##used in l and s opts to print lines after match\n    if($matched&gt;=0)\n    {\n        if($wsdiff&gt;$matched)\n        {\n            printline(\\$line) if $lopt==1 ; \n        }\n        elsif ($wsdiff&lt;$matched)\n        {\n            $matched=-1;\n        }\n        else\n        {\n            if ($sopt )\n            { printline(\\$line) }\n            else\n            { $matched=-1  }\n        }\n    }\n    if( $matched==-1 &amp;&amp; $line=~m/$searchstr/ )\n    {\n        printtree();\n        $matched=$wsdiff if $sopt || $lopt;\n    }\n    $linecounter++;\n\n}\nsub printtree \n{   \n    if(!$mopt)\n    {\n        for (0..$#arr-(1+$popt))\n        {\n            printline( \\$arr[$_][1] , \\$arr[$_][2] );\n        }\n    }\n    if($popt)\n    {\n        for (0..$#popt_arr)\n        {\n            printline( \\$popt_arr[$_][1] , \\$popt_arr[$_][2] );\n        }\n        printline(  \\$arr[$#arr-1][1] , \\$arr[$#arr-1][2] ); #print the parent\n        @popt_arr=() ;\n    }\n    if($sopt)\n    {\n        for (0..$#sopt_arr)\n        {\n            printline( \\$sopt_arr[$_][1] , \\$sopt_arr[$_][2] );\n        }\n        @sopt_arr=() ;\n    }\n    printline( \\$arr[$#arr][1] , \\$arr[$#arr][2] );\n    @arr=();\n    push @arr, [ $wsdiff , $line , $linecounter ];\n}\n\n\nsub printline\n{\n    $nopt==1?   $returnstring.= ${$_[1]}+1 .\" : \".${$_[0]}  :   $returnstring.= ${$_[0]};\n}\n\nsub cleardata\n{\n    $line=\"\";\n    $wsdiff         = 0;\n    $iopt        = 0;\n    $sopt        = 0;\n    $lopt        = 0;\n    $nopt        = 0;\n    $popt        = 0;\n    $mopt        = 0;\n    $linecounter = 0;\n    $matched     = -1;\n    @arr=();\n    @sopt_arr=();\n    @popt_arr=();\n    $searchstr=\"\";\n    $returnstring=\"\";\n}\n1;\n</code></pre>\n\n<p>Breif explanation how it works\nThe program is just a link to the module. I's a module because i've used it in many programs and stand alone. Gettree.pm will send data line by line to process_line(). process line will get the white-space ($wsdiff) and use this as a marker. any line directly before an increment in whitespace will be stored in @arr. for printing if a match is found later. so the parent is stored. @sopt_arr is for the same line, so it stores previous lines of the same white-space. @popt_arr is for the parent match, but this doesn't work very well (i dont really use it, it could be removed). when a match for the search string is made, @arr,Sopt_arr, &amp; @popt_arr are printed,  $matched is set, this will be used for -l option. all lines after the match are printed until the white-space is &lt; the matched white-space. so in summary, it will take each unique white-space before an increment. it works for Juniper and Alcatel too. I'm sure it would work on others too. </p>\n\n<p>remember to modify CONFIGS_DIR and PATH_TO_Gettree.pm_MODULE to match your filesystem paths</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 6864964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff67c191467d6f9ebc3df4f108248fd?s=128&d=identicon&r=PG&f=1", "display_name": "Luc Larochelle", "link": "https://stackoverflow.com/users/6864964/luc-larochelle"}, "is_accepted": false, "score": 0, "last_activity_date": 1540560475, "creation_date": 1540560475, "answer_id": 53009844, "question_id": 52960589, "link": "https://stackoverflow.com/questions/52960589/using-space-depth-to-parse-config-files-contexts-with-perl/53009844#53009844", "title": "Using space depth to parse config file&#39;s contexts with Perl", "body": "<p>This thread contains the solution I was hoping for :) Since it might benefit to others, here's the link :</p>\n\n<p><a href=\"https://perlmonks.org/?node_id=1224600\" rel=\"nofollow noreferrer\">https://perlmonks.org/?node_id=1224600</a></p>\n\n<p>Cheers !</p>\n"}], "owner": {"reputation": 61, "user_id": 6864964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff67c191467d6f9ebc3df4f108248fd?s=128&d=identicon&r=PG&f=1", "display_name": "Luc Larochelle", "link": "https://stackoverflow.com/users/6864964/luc-larochelle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1540560475, "creation_date": 1540350928, "question_id": 52960589, "link": "https://stackoverflow.com/questions/52960589/using-space-depth-to-parse-config-files-contexts-with-perl", "title": "Using space depth to parse config file&#39;s contexts with Perl", "body": "<p>I've been trying to create a config file parser to parse Cisco IOS configs and such. The final objective would be to show relevant data in contexts based on filters in a configuration file. For example, with such a config file it would display all interfaces where we've found the line \"access vlan\" as a child of the \"interface\" context and only show lines containing \"speed\", \"duplex\" and \"description\".</p>\n\n<pre><code>{\n'Context' =&gt; '^interface',\n'Types' =&gt; [\n'Switch',\n],\n'Condition' =&gt; 'access vlan',\n'Filter' =&gt; [\n'speed',\n'duplex',\n'description'\n]\n};\n</code></pre>\n\n<p>So far, so good. I read the \"running-config\" and I index the lines depth (given that a non-empty line , not beginning with a space (\\s) has a depth of 0) in an array.</p>\n\n<p>Then, in another read I use that index to read the data again, this time using relative position based on depth to create the \"childs\" of a context. Here's the function : </p>\n\n<pre><code>sub getDeep { \n\n    my @data = (@_);\n    my ($bighash,$hash); \n\n    #First read\n    foreach my $idx (0.. $#data) { \n\n                    my ($spaces, $content) = ($data[$idx] =~  m/^(\\s*)(.*)/); \n                    my $depth = length $spaces; \n\n                    $bighash-&gt;{node}{$idx}{depth} = $depth; \n    } \n\n    # Variables for the first read\n    my $ldepth = 0; \n    my $lcontext; \n    my $lid; \n\n    # Second read\n    foreach my $id (0 .. $#data) { \n\n                    $data[$id] =~ s/^\\s*//; \n                    next if ($data[$id] =~ /^!/); \n\n                    my $depth = $bighash-&gt;{node}{$id}{depth}; \n\n                    if ($depth eq 0) { \n                                    push (@{$hash-&gt;{global}} , $data[$id]); \n                                    $lcontext = $data[$id]; \n                                    $lid = $id; \n                    } \n\n                    if (($depth gt 0) &amp;&amp; ($id - $lid eq 1)) { \n                                    push (@{$hash-&gt;{$lcontext}}, (\" \" x $depth. $data[$id])); \n                                    $lid = $id; \n                    } \n\n    } \n\n    return $hash; \n</code></pre>\n\n<p>} </p>\n\n<p>Using this sub, I can return a hash, then based on the presence of an arrayref for a given key, apply filters as explained. This works pretty well, so far very proud of this piece of code. </p>\n\n<p>Problem comes when I want to find childs of childs. In the example below, the childs of \"given param2\" would reprensent my next challenge.</p>\n\n<pre><code>interface XYZ\n  given param1 -&gt; child of \"interface XYZ\"\n  given param2 -&gt; child of \"interface XYZ\"\n    given param2.1 -&gt; child of \"given param2\"\n    given param2.2 -&gt; child of \"given param2\"\n  given param3 -&gt; child of \"interface XYZ\"\n</code></pre>\n\n<p>So after thinking about this for a while and failing with different approaches, my question comes in 2 separate parts :</p>\n\n<p>1) Is there a better way to do this that I'm not seeing ?\n2) How could I keep tagging childs of childs as the lines dig deeper and identify them properly in a data structure ?</p>\n\n<p>Thank you for reading up to this line :)</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 1, "creation_date": 1540430619, "post_id": 52956405, "comment_id": 92866410, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/182460/discussion-on-answer-by-zdim-removing-lines-around-a-given-matching-line\">moved to chat</a>."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 6, "last_activity_date": 1562738974, "last_edit_date": 1562738974, "creation_date": 1540322293, "answer_id": 52956405, "question_id": 52956147, "link": "https://stackoverflow.com/questions/52956147/removing-lines-around-a-given-matching-line/52956405#52956405", "title": "Removing lines around a given matching line", "body": "<p>The problem: There is a certain phrase that happens on some of the lines with a certain request-id. Any lines for that request-id that are within a given distance from the one with the phrase should be skipped, as well as that line itself.</p>\n\n<p>We don't know for which request-id this happens, what also may change through the file.</p>\n\n<p>First read until the phrase shows up, saving lines in a buffer. Once we parse the request-id from that line we know which one it is.  Then process the accumulated buffer, printing all lines for other request-id's and only those further than the skip-distance for the \"chosen\" one.</p>\n\n<p>Then keep collecting lines into the buffer until the phrase is found again.  Process the buffer: print all lines for other id's, and only those which are far enough from both phrases for the chosen id.</p>\n\n<p>The code below was tested using variations of posted data. It accounts for possible mixing of lines with different request-id's; dropping that, so assuming that lines with any request-id are always in a block, would simplify the code a lot, and speed it up.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy ($file, $skip_dist) = @ARGV;\ndie \"Usage: $0 log-file [skip-distance]\\n\" if not $file;    \n$skip_dist //= 2;  #/\n\nmy $trigger = qr{\\[GET_REGION_INFO\\]};\n\nopen my $fh, '&lt;', $file  or die \"Can't open $file: $!\";\n\nmy (@buf, $req_mark, $skip_idx, $next_req_cnt);\n\nwhile (&lt;$fh&gt;) {    \n    if (not $req_mark and /$trigger/) {\n        # Find the req_id of interest and save it into req_mark,\n        # then process the accumulated buffer\n        my ($req_id, $msg) = /:\\s+(\\*[0-9]+)\\s+(.*)/;\n        $req_mark = $req_id;\n\n        # Find position of req_id which is skip_dist before the mark\n        # and print lines for req_mark before it (and all others)\n        my $del_idx = find_skip_start($req_mark, \\@buf, $skip_dist);\n        for my $i (0..$#buf) {\n            if ($skip_idx and $i &lt; $skip_idx) { print $buf[$i] }\n            else {\n                my ($req_id) = $buf[$i] =~ /:\\s+(\\*[0-9]+)/;\n                print $buf[$i] if $req_id ne $req_mark;\n            }\n        }\n        @buf = (); \n        $skip_idx = 0;\n    }\n    elsif (/$trigger/ or eof) { \n        # Process buffer collected between previous and this trigger,\n        # Or up to the end of file (the last line then need be added)\n        push @buf, $_  if eof;\n        my $skip_idx = (not eof) \n            ? find_skip_start($req_mark, \\@buf, $skip_dist) \n            : $#buf+1;\n        for my $i (0..$#buf) { \n            my ($req_id) = $buf[$i] =~ /:\\s+(\\*[0-9]+)/;\n            print $buf[$i]\n                if  $req_id ne $req_mark\n                or (++$next_req_cnt &gt; $skip_dist and $i &lt; $skip_idx);\n        }\n        @buf = (); \n        $next_req_cnt = $skip_idx = 0;\n\n        # Check whether the request-id changed and update for next buffer\n        my ($req_id) = /:\\s+(\\*[0-9]+)/;\n        if ($req_id ne $req_mark) {\n            $req_mark = $req_id \n        }\n\n    }   \n    else { push @buf, $_ }\n}\n\nsub find_skip_start {\n    my ($req_mark, $buf, $skip_dist) = @_;\n    my ($skip_idx, $prev_req_cnt);\n    for my $i (0..$#$buf) {\n        my ($req_id) = $buf-&gt;[$#$buf-$i] =~ /:\\s+(\\*[0-9]+)/;\n        if ( $req_id eq $req_mark    and\n            (++$prev_req_cnt &gt;= $skip_dist) )\n        {\n            $skip_idx = $#$buf-$i;\n            last;\n        }\n    }\n    return $skip_idx;\n}\n</code></pre>\n\n<p>There are a number of places where efficiency can be improved.</p>\n\n<p>A major efficiency question concerns the central issue of the buffer size. How much data can get collected until we hit a trigger? What if there are just a few <code>[GET_..]</code> lines in a file, and we end up accumulating gigabyte(s) of data? Then it'd be better to lighten (print some of) the buffer from time to time; but if there is never much data then the partial buffer emptying badly complicates matters since the phrase may be close ahead (how many lines still to keep?).</p>\n\n<p>This can't be answered without knowing the frequency of that phrase, and the frequency of the request-id's as well. Then one optimization would be to first peek a little into the file and estimate those frequencies, and make decisions on that.  However, this isn't too reliable as there is no guarantee for the log file to be consistent in any sense.</p>\n\n<p>The code above clearly assumes that there'll never be too much data and so we won't cause trouble, but it'd be prudent to add a check and write out a part of the buffer if it gets too big. </p>\n\n<hr>\n\n<p>For the record, when I run the above program on the OP sample data, the output is</p>\n\n<pre>\n2018/10/08 17:11:28 [debug] 8851#0: *2 Sent 8/8 bytes.\n2018/10/08 17:11:28 [debug] 8851#0: *2 Session: Staging 8 bytes in thread buffer.\n2018/10/08 17:11:33 [debug] 8851#0: *36 GET_REGION_INFO: Staging 99 bytes in thread buffer.\n2018/10/08 17:11:33 [debug] 8851#0: *36 Sent 99/99 bytes.\n2018/10/08 17:11:33 [debug] 8851#0: *36 Session: Staging 8 bytes in thread buffer.\n2018/10/08 17:11:33 [debug] 8851#0: *36 Sent 8/8 bytes.\n2018/10/08 17:11:38 [debug] 8851#0: *22 Receiving 8 bytes\n2018/10/08 17:11:38 [debug] 8851#0: *22 Session: Staging 8 bytes in thread buffer.\n</pre>\n\n<p>In the given sample input the request-id on the line with <code>[GET..]</code> (<code>$req_mark</code>) is <code>*36</code>.</p>\n\n<p>The default number of <code>*36</code> lines to skip (around the <code>[GET..]</code> line) is set to two (2), for better testing; this can be changed at invocation.</p>\n\n<p>There are no <code>*36</code> lines in the output before the line with <code>[GET...]</code> (rather, where that line was), as there were only two in data and they are duly skipped; and, the first two lines with <code>*36</code> after the <code>[GET..]</code> line (where that line was) are omitted, then the rest is printed. This is the expected output. </p>\n\n<p>When I supply the skip-distance (setting <code>$skip_dist</code>) of <code>10</code> the output is</p>\n\n<pre>\n2018/10/08 17:11:28 [debug] 8851#0: *2 Sent 8/8 bytes.\n2018/10/08 17:11:28 [debug] 8851#0: *2 Session: Staging 8 bytes in thread buffer.\n2018/10/08 17:11:38 [debug] 8851#0: *22 Receiving 8 bytes\n2018/10/08 17:11:38 [debug] 8851#0: *22 Session: Staging 8 bytes in thread buffer.\n</pre>\n\n<p>as expected: There are fewer than 10 lines with <code>*36</code> both before and after the line with <code>[GET..]</code> in this sample data, so no <code>*36</code> lines are printed.</p>\n\n<hr>\n\n<p><em>Original post  (on belief that <code>*36</code> is the given request id of interest)</em></p>\n\n<p>Store those <code>*36</code> lines in a buffer, and while you are in that region test for that phrase. Once you're out of that region check whether the phrase was found and print accordingly</p>\n\n<pre><code>my $trigger     = 'GET_REGION_INFO';\nmy $region_mark = '*36';\n\nmy (@buff, $drop_lines_mark);\n\nwhile (&lt;$fh&gt;) {\n    my ($req_id, $msg) = /.*?:\\s*(\\*[0-9]+)\\s+(.*)/;\n    if ($req_id eq $region_mark) {\n        push @buff, $_  \n        $drop_lines_mark = $#buff  if $msg =~ /$trigger/;\n    }\n    elsif (@buff) {              # just left region of interest\n        if ($drop_lines_mark) { \n            for my $i (0..$#buff) {\n                print $buff[$i] \n                    if $i &lt; $drop_lines_mark-10 \n                    or $i &gt; $drop_lines_mark+10;\n            }\n        }\n        else { print for @buff }\n\n        $drop_lines_mark = '';\n        @buff = ();\n        print;      # don't forget the current line\n    }\n    else { print }\n}\n</code></pre>\n\n<p>Untested code.</p>\n"}], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 52956405, "answer_count": 1, "score": 2, "last_activity_date": 1562738974, "creation_date": 1540321209, "last_edit_date": 1540428482, "question_id": 52956147, "link": "https://stackoverflow.com/questions/52956147/removing-lines-around-a-given-matching-line", "title": "Removing lines around a given matching line", "body": "<p>I've got a log file that looks like this:</p>\n\n<pre><code>2018/10/08 17:11:28 [debug] 8851#0: *2 Sent 8/8 bytes.\n2018/10/08 17:11:28 [debug] 8851#0: *2 Session: Staging 8 bytes in thread buffer.\n2018/10/08 17:11:33 [debug] 8851#0: *36 Receiving 8 bytes\n2018/10/08 17:11:33 [debug] 8851#0: *36 Session: Staging 8 bytes in thread buffer.\n2018/10/08 17:11:33 [debug] 8851#0: *36 Handling TRL request #0001: [GET_REGION_INFO].\n2018/10/08 17:11:33 [debug] 8851#0: *36 Sent 8/8 bytes.\n2018/10/08 17:11:33 [debug] 8851#0: *36 Finished processing TRL request #0001.\n2018/10/08 17:11:33 [debug] 8851#0: *36 GET_REGION_INFO: Staging 99 bytes in thread buffer.\n2018/10/08 17:11:33 [debug] 8851#0: *36 Sent 99/99 bytes.\n2018/10/08 17:11:33 [debug] 8851#0: *36 Session: Staging 8 bytes in thread buffer.\n2018/10/08 17:11:33 [debug] 8851#0: *36 Sent 8/8 bytes.\n2018/10/08 17:11:38 [debug] 8851#0: *22 Receiving 8 bytes\n2018/10/08 17:11:38 [debug] 8851#0: *22 Session: Staging 8 bytes in thread buffer.\n</code></pre>\n\n<p>Based on the line containing <code>[GET_REGION_INFO]</code>, I want to delete all lines near it with the same request id (<code>*36</code> in this case) ..say within 10 lines in either direction.  </p>\n\n<p>What I've got so far is this...it works from the scanned line on...Problem being I don't even think this basic approach is going to work at all to get the matching lines above it.  (They've already been printed for one thing)</p>\n\n<pre><code>perl -lane '$requestId=$F[4] if /\\[GET_REGION_INFO\\]/;$requestId=\"Z\" if $requestId ne $F[4]; print if $requestId eq \"Z\";' error.log\n</code></pre>\n\n<p>The only approaches I can think of seem error-prone, and overly complicated.  This file is about a gigabyte, so slurping the whole thing is something I'd <em>like</em> to avoid...although the machine has 32GB, so....</p>\n\n<p>Can anyone suggest a reasonably straightforward approach to this?  I'm fine with an actual perl script vs. a one-liner.</p>\n\n<p>I should note that the <code>*36</code> is a request id (as the variable indicates), and theoretically multiple requests can be intermingled.  But this is rare so it's ok if the script fails to delete non-consecutive lines (such as my current script).</p>\n\n<p>Oh, one last thing..request ids are eventually recycled, so I can't do anything clever like build up a list of them and then parse the whole file with that list.</p>\n\n<p>And expected output, given the sample input:</p>\n\n<pre><code>2018/10/08 17:11:28 [debug] 8851#0: *2 Sent 8/8 bytes.\n2018/10/08 17:11:28 [debug] 8851#0: *2 Session: Staging 8 bytes in thread buffer.\n2018/10/08 17:11:38 [debug] 8851#0: *22 Receiving 8 bytes\n2018/10/08 17:11:38 [debug] 8851#0: *22 Session: Staging 8 bytes in thread buffer.\n</code></pre>\n"}, {"tags": ["string", "perl"], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 3, "last_activity_date": 1540320815, "creation_date": 1540320815, "answer_id": 52956054, "question_id": 52955971, "link": "https://stackoverflow.com/questions/52955971/about-operator-x-in-perl/52956054#52956054", "title": "About operator &quot;x&quot; in Perl", "body": "<p>x is a string operator, but you are using / on the string it produces, which numifies \"123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678912345678901234567890123456789012345678901234567890\" and divides it by 10.</p>\n"}, {"tags": [], "owner": {"reputation": 6606, "user_id": 4135670, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mArsS.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4135670/rafael"}, "is_accepted": false, "score": 1, "last_activity_date": 1540320827, "creation_date": 1540320827, "answer_id": 52956056, "question_id": 52955971, "link": "https://stackoverflow.com/questions/52955971/about-operator-x-in-perl/52956056#52956056", "title": "About operator &quot;x&quot; in Perl", "body": "<p>It seems that <code>1234467890</code> is concat'd 19 times, then divided by 10 which creates a float.</p>\n"}, {"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 6, "last_activity_date": 1540321700, "last_edit_date": 1540321700, "creation_date": 1540320903, "answer_id": 52956074, "question_id": 52955971, "link": "https://stackoverflow.com/questions/52955971/about-operator-x-in-perl/52956074#52956074", "title": "About operator &quot;x&quot; in Perl", "body": "<p>Well, let's see what perl treats that expression as using the <a href=\"http://perldoc.perl.org/B/Deparse.html\" rel=\"nofollow noreferrer\">B::Deparse</a> module:</p>\n\n<pre><code>$ perl -MO=Deparse,-p -e 'print \"1234567890\" x (10+9)/10;'\nprint((3993258840062839 * 2**573));\n</code></pre>\n\n<p>Obviously it's evaluating it as a number. Maybe because of the division? Let's try taking that out.</p>\n\n<pre><code>$ perl -MO=Deparse,-p -e 'print \"1234567890\" x (10+9);'\nprint('1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890');\n</code></pre>\n\n<p>which looks about right. So, basically, it's printing out that number because you're treating that really long string as a number thanks to the division.</p>\n\n<p>Note that <code>x</code> and <code>/</code> have the same precedence, and are left associative, so that <code>a x b / c</code> is treated as <code>(a x b) / c</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": false, "score": 5, "last_activity_date": 1540322135, "creation_date": 1540322135, "answer_id": 52956360, "question_id": 52955971, "link": "https://stackoverflow.com/questions/52955971/about-operator-x-in-perl/52956360#52956360", "title": "About operator &quot;x&quot; in Perl", "body": "<p><a href=\"http://perldoc.perl.org/perlop.html#Operator-Precedence-and-Associativity\" rel=\"noreferrer\">http://perldoc.perl.org/perlop.html#Operator-Precedence-and-Associativity</a></p>\n\n<p><code>x</code> and <code>/</code> have the same precedence. So</p>\n\n<pre><code>print \"1234567890\" x (10+9)/10;\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>print(  (\"1234567890\" x (10+9)) / 10  );\n</code></pre>\n\n<p>Note that <code>x</code> is not only a string repetion operator. It can generate lists: <code>(1) x 3</code> is <code>(1, 1, 1)</code></p>\n"}], "owner": {"reputation": 97, "user_id": 2158697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd602ca7ba72c0d572e628322034f87?s=128&d=identicon&r=PG", "display_name": "user2158697", "link": "https://stackoverflow.com/users/2158697/user2158697"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 52956054, "answer_count": 4, "score": 1, "last_activity_date": 1540395122, "creation_date": 1540320495, "last_edit_date": 1540395122, "question_id": 52955971, "link": "https://stackoverflow.com/questions/52955971/about-operator-x-in-perl", "title": "About operator &quot;x&quot; in Perl", "body": "<p>I am confused by the following output of the code:</p>\n\n<pre><code>print \"1234567890\" x (10+9)/10;\n</code></pre>\n\n<p>The output is </p>\n\n<pre><code>1.23456789012346e+188.\n</code></pre>\n\n<p>I know the code should be this in order to get the intended result: </p>\n\n<pre><code>\"1234567890\" x ((10+9)/10)\n</code></pre>\n\n<p>But why does the former code generate a float number but not a string? Isn't the operator \"x\" a string operator in Perl?</p>\n"}, {"tags": ["mysql", "perl", "ssl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1540313263, "post_id": 52953772, "comment_id": 92815899, "body": "What error are you getting?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1540313551, "post_id": 52953772, "comment_id": 92816042, "body": "FWIW DBD::mysql links to libssl itself, it does not use IO::Socket::SSL. You might try <a href=\"https://metacpan.org/pod/DBD::MariaDB\" rel=\"nofollow noreferrer\">DBD::MariaDB</a> if this is not an existing project, it is a fork with some incompatibilities but fixes many bugs."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540313693, "post_id": 52953772, "comment_id": 92816115, "body": "Are you trying the perl and python versions on the same computer using the same underlying mysqlclient library?"}, {"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 0, "creation_date": 1540313927, "post_id": 52953772, "comment_id": 92816232, "body": "What OS and <code>openssl version</code> do you use? What ciphers does the server support?"}, {"owner": {"reputation": 8105, "user_id": 639627, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/f008c7cbc02087efe4c5758ce528d883?s=128&d=identicon&r=PG", "display_name": "James MV", "link": "https://stackoverflow.com/users/639627/james-mv"}, "edited": false, "score": 0, "creation_date": 1540327213, "post_id": 52953772, "comment_id": 92822496, "body": "Its CentOS 7 on <code>OpenSSL 1.0.2k-fips</code> . No error, but when I capture the traffic on 3306 its TLS1.0 vs the TLS1.2 I get with Python."}], "answers": [{"tags": [], "owner": {"reputation": 8105, "user_id": 639627, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/f008c7cbc02087efe4c5758ce528d883?s=128&d=identicon&r=PG", "display_name": "James MV", "link": "https://stackoverflow.com/users/639627/james-mv"}, "is_accepted": true, "score": 1, "last_activity_date": 1540329666, "creation_date": 1540329666, "answer_id": 52958004, "question_id": 52953772, "link": "https://stackoverflow.com/questions/52953772/perl-tls1-2-to-mysql-db/52958004#52958004", "title": "Perl TLS1.2 to MySql Db", "body": "<p>The issue here was that although I was connecting to an up to date remote MariaDB db I had the mysql-community-client 5.6 installed on my client machine. I un-installed everything mysql-community and replaced with the latest <code>MariaDB-client</code> and <code>MariaDB-compat</code>.</p>\n"}], "owner": {"reputation": 8105, "user_id": 639627, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/f008c7cbc02087efe4c5758ce528d883?s=128&d=identicon&r=PG", "display_name": "James MV", "link": "https://stackoverflow.com/users/639627/james-mv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 52958004, "answer_count": 1, "score": 0, "last_activity_date": 1540329666, "creation_date": 1540311977, "last_edit_date": 1540327151, "question_id": 52953772, "link": "https://stackoverflow.com/questions/52953772/perl-tls1-2-to-mysql-db", "title": "Perl TLS1.2 to MySql Db", "body": "<p>I've got a remote mysql instance that supports TLSv1.2, python is connecting fine. However I can't get Perl to connect in anything other than TLSv1.0.</p>\n\n<p>Running on CentOS 7 with OpenSSL version <code>OpenSSL 1.0.2k-fips</code>.</p>\n\n<pre><code>DBI-&gt;connect(\n                \"mysql_ssl=1;\" .\n                \"mysql_ssl_client_key=/etc/client.key\" .\n                \"mysql_ssl_client_cert=/etc/client.crt\" .\n                \"mysql_ssl_ca_file=/etc/ca.crt\",\n                'my_db',\n                'my_password',\n                { RaiseError =&gt; 1, AutoCommit =&gt; 1 },\n\n            );\n</code></pre>\n\n<p>I have upgraded the two modules I would have thought are required:\n<code>Successfully installed IO-Socket-SSL-2.060 (upgraded from 1.94)</code>\nand\n<code>DBD::mysql is up to date. (4.048)</code></p>\n\n<p>Any ideas what else I can be missing, the DB server and client are hooking up as TLSv1.2 with Python so it must be a missing Perl module or config option? </p>\n\n<p>The full list of installed modules:</p>\n\n<pre><code>App::cpanminus - 1.7044\nB::Hooks::EndOfScope - 0.21\nCPAN::Meta - 2.150010\nCPAN::Meta::Requirements - 2.140\nCPAN::Meta::YAML - 0.018\nClass::Data::Inheritable - 0.08\nDBD::mysql - 4.048\nDBI - 1.640\nDate::Manip - 6.61\nDevel::CheckLib - 1.13\nDevel::GlobalDestruction - 0.14\nDevel::StackTrace - 2.03\nDist::CheckConflicts - 0.11\nEval::Closure - 0.14\nException::Class - 1.44\nExpect - 1.35\nExtUtils::CBuilder - 0.280230\nFile::NFSLock - 1.27\nIO::CaptureOutput - 1.1104\nIO::Socket::SSL - 2.060\nIO::Tty - 1.12\nIPC::Cmd - 1.00\nIPC::Run3 - 0.048\nImporter - 0.025\nJSON - 2.97001\nJSON::PP - 2.97001\nList::Util - 1.50\nLocale::Maketext::Simple - 0.21\nLog::Dispatch - 2.67\nLog::Dispatch::FileRotate - 1.34\nLog::Log4perl - 1.49\nMRO::Compat - 0.13\nMock::Config - 0.03\nModule::Build - 0.4224\nModule::CoreList - 5.20180220\nModule::Implementation - 0.09\nModule::Load - 0.32\nModule::Load::Conditional - 0.68\nModule::Metadata - 1.000033\nModule::Pluggable - 5.2\nModule::Runtime - 0.016\nPackage::Stash - 0.37\nPackage::Stash::XS - 0.28\nParams::Check - 0.38\nParams::ValidationCompiler - 0.27\nPath::Tiny - 0.104\nPerl - 5.16.3\nPerl::OSType - 1.010\nRole::Tiny - 2.000006\nScope::Guard - 0.21\nSpecio - 0.42\nSub::Exporter::Progressive - 0.001013\nSub::Identify - 0.14\nSub::Info - 0.002\nSub::Quote - 2.005000\nSub::Uplevel - 0.2800\nSys::Syslog - 0.35\nTerm::Table - 0.012\nTest2::Plugin::NoWarnings - 0.06\nTest2::Suite - 0.000100\nTest::Deep - 1.128\nTest::Fatal - 0.014\nTest::Harness - 3.41\nTest::Inter - 1.06\nTest::Needs - 0.002005\nTest::Requires - 0.10\nTest::Simple - 1.302125\nTest::Warn - 0.32\nTest::Without::Module - 0.20\nTry::Tiny - 0.30\nVariable::Magic - 0.62\nnamespace::autoclean - 0.28\nnamespace::clean - 0.27\nversion - 0.9918\n</code></pre>\n"}, {"tags": ["xml", "perl", "text", "junit", "perlscript"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1540310302, "post_id": 52953305, "comment_id": 92814368, "body": "What problem are you having?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1540310591, "post_id": 52953305, "comment_id": 92814560, "body": "<a href=\"http://p3rl.org/TAP::Harness::JUnit\" rel=\"nofollow noreferrer\">TAP::Harness::JUnit</a>?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540313808, "post_id": 52953305, "comment_id": 92816173, "body": "What should the output look like?"}, {"owner": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "edited": false, "score": 0, "creation_date": 1540314715, "post_id": 52953305, "comment_id": 92816643, "body": "The Expected output should be similiar to this:                                              &lt;testsuite name=&quot;Sample Tests&quot; tests=&quot;3&quot; failures=&quot;1&quot; errors=&quot;1&quot; skipped=&quot;0&quot; timestamp=&quot;Mon, 19 Oct 2018 15:27:42 GMT&quot; time=&quot;7.376&quot;&gt; &lt;testcase classname=&quot;abc.msg&quot; name=&quot;abc.msg&quot; time=&quot;2.144&quot;&gt;&lt;failure message=&quot;abc.msg failed! Please check case log for details&quot;&gt;&lt;/failure&gt;&lt;/testcase&gt; &lt;testcase classname=&quot;aa.msg&quot; name=&quot;aa.msg&quot; time=&quot;2.112&quot;/&gt; &lt;testcase classname=&quot;bb.msg&quot; name=&quot;bb.msg&quot; time=&quot;3.12&quot;/&gt; &lt;/testsuite&gt;"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1540316649, "post_id": 52953305, "comment_id": 92817593, "body": "You should put the expected output in your question, properly formatted so it&#39;s readable."}, {"owner": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "edited": false, "score": 0, "creation_date": 1540320676, "post_id": 52953305, "comment_id": 92819492, "body": "Added the expected XML format as a snip"}, {"owner": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "reply_to_user": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "edited": false, "score": 0, "creation_date": 1548354661, "post_id": 52953305, "comment_id": 95521653, "body": "Hi @ernix , the solution which you gave me works absolutely fine. However I have a new case in which the generated text file has an additional field &quot;TO BE VALIDATED&quot; other than &quot;PASSED&quot; and  &quot;FAILED&quot;.   The new field &quot;TO BE VALIDATED&quot; should be marked as &quot;skipped&quot; in the generated xml file. Any help would be much appreciated. Thanks in advance. I also modified the text file with changes and have attached the sample xml file."}, {"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "edited": false, "score": 0, "creation_date": 1548396799, "post_id": 52953305, "comment_id": 95534039, "body": "@randomguy Could you clarify the JUnit XML format spec?  There are several self-proclaimed JUnit formats.  Apache Ant doesn&#39;t have skipped elements at all (<a href=\"https://github.com/windyroad/JUnit-Schema/blob/master/JUnit.xsd\" rel=\"nofollow noreferrer\">github.com/windyroad/JUnit-Schema/blob/master/JUnit.xsd</a>), and junit5&#39;s skipped elements can&#39;t have any attributes. (<a href=\"https://github.com/junit-team/junit5/blob/master/platform-tests/src/test/resources/jenkins-junit.xsd\" rel=\"nofollow noreferrer\">github.com/junit-team/junit5/blob/master/platform-tests/src&zwnj;&#8203;/&hellip;</a>)"}, {"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "edited": false, "score": 1, "creation_date": 1548397792, "post_id": 52953305, "comment_id": 95534416, "body": "@randomguy Anyway, according to junit5 above, I created a patch (<a href=\"https://gist.github.com/ernix/c692ecb3233d60947d19cac10ec9fa2a\" rel=\"nofollow noreferrer\">gist.github.com/ernix/c692ecb3233d60947d19cac10ec9fa2a</a>) to parse SKIP directives described in TAP format (<a href=\"https://testanything.org/tap-specification.html#skipping-tests\" rel=\"nofollow noreferrer\">testanything.org/tap-specification.html#skipping-tests</a>).  Please modify custm2tap.pl to parse <code>TO BE VALIDATED</code> and push <code>[&#39;ok&#39; =&gt; &#39;# SKIP $msg&#39;];</code> to <code>@t</code>, patched <code>TAP::Formatter::JUnit</code>&#39;s <code>tap2junit</code> command now can parse SKIP directives properly."}, {"owner": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "reply_to_user": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "edited": false, "score": 0, "creation_date": 1548435307, "post_id": 52953305, "comment_id": 95553421, "body": "@ernix, I modified the custom2tap.pl script to be  push @t, [&#39;ok&#39; =&gt; &#39;# SKIP $msg&#39;];   But i see the generated xml contains empty names. For example: &lt;testcase name=&quot;4 -&quot;&gt;&lt;/testcase&gt; &lt;testcase name=&quot;5 -&quot;&gt;&lt;/testcase&gt; &lt;testcase name=&quot;6 -&quot;&gt;&lt;/testcase&gt;   Also I have attached the expected xml format in the question above."}, {"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "edited": false, "score": 1, "creation_date": 1548640576, "post_id": 52953305, "comment_id": 95600847, "body": "@randomguy You need to install patched version of <code>TAP::Formatter::JUnit</code>, original version(0.11) of <code>TAP::Formatter::JUnit</code> doesn&#39;t parse SKIP/TODO directives. You also need to change <code>[&#39;ok&#39; =&gt; &#39;# SKIP $msg&#39;]</code> to <code>[&#39;ok&#39; =&gt; &quot;$msg # SKIP&quot;]</code> in order to meet with your expectations.  And we seriously need a XML spec(XSD) to generate, not an example.  Where do you use your JUnit report? Jenkins?"}, {"owner": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "edited": false, "score": 0, "creation_date": 1548687360, "post_id": 52953305, "comment_id": 95619720, "body": "yes im using the JUnit report in Jenkins. I will apply the patch and share the results...Thank you so much"}, {"owner": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "reply_to_user": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "edited": false, "score": 0, "creation_date": 1548717915, "post_id": 52953305, "comment_id": 95634344, "body": "Hi @ernix, I applied the patch in the following files under C:\\Perl_folder\\Scripts\\TAP-Formatter-JUnit-0.11\\lib\\TAP\\Form&zwnj;&#8203;atter\\JUnit  --&gt; Result.pm, session.pm, skip, skip_nomesg. I dont see any changes with the output. Thanks in advance!!"}, {"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "edited": false, "score": 0, "creation_date": 1548724642, "post_id": 52953305, "comment_id": 95635813, "body": "@randomguy I believe you have to read <a href=\"https://perldoc.perl.org/perlmod.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlmod.html</a> before messing around with existing CPAN modules."}, {"owner": {"reputation": 1018, "user_id": 3806530, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ee2Kz.jpg?s=128&g=1", "display_name": "Martin Th&#248;gersen", "link": "https://stackoverflow.com/users/3806530/martin-th%c3%b8gersen"}, "edited": false, "score": 0, "creation_date": 1610980398, "post_id": 52953305, "comment_id": 116296791, "body": "The <code>tap2junit</code> method does not create the <code>&lt;testcase classname=&quot;...&quot;</code> property. You can also see <code>classname</code> in the OP. GitLab specifically uses this. <code>classname</code> is required according to <a href=\"https://github.com/windyroad/JUnit-Schema/blob/162a883ac631f61ca1d14a3d472e1fbb53c1c05f/JUnit.xsd#L123\" rel=\"nofollow noreferrer\">JUnit-schema</a> Any idea on how to generate this?"}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "edited": false, "score": 0, "creation_date": 1540390974, "post_id": 52968811, "comment_id": 92849148, "body": "Thanks so much for your answer @ernix . But when I execute the command in the cmd prompt, I get the following error: &quot;&#39;tap2junit&#39; is not recognized as an internal or external command&quot;. Do i need to install the library &quot;TAP::Formatter::JUnit &quot; ?"}, {"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "reply_to_user": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "edited": false, "score": 0, "creation_date": 1540455260, "post_id": 52968811, "comment_id": 92874550, "body": "@DhinakaranKannan Could you give me your system information?  How did you install Perl?"}, {"owner": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "edited": false, "score": 0, "creation_date": 1540486606, "post_id": 52968811, "comment_id": 92893979, "body": "My Windows system has ActivePerl 5.14.2 Build 1402. its a .msi file. Jus installed it."}, {"owner": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "edited": false, "score": 0, "creation_date": 1540501641, "post_id": 52968811, "comment_id": 92900942, "body": "In this code, the output file is being generated in the command line. How can i generate in an file with .xml extension? Thanks in Advance!!!"}, {"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "reply_to_user": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "edited": false, "score": 1, "creation_date": 1540506464, "post_id": 52968811, "comment_id": 92902542, "body": "@DhinakaranKannan Try redirection: <code>type customtest.txt | perl custom2tap.pl | tap2junit - &gt; result.xml</code>"}, {"owner": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "edited": false, "score": 0, "creation_date": 1540846902, "post_id": 52968811, "comment_id": 93007083, "body": "This works in my local machine which has Strawberry Perl with TAP::Formatter::JUnit installed, but in my test client it is using ActivePerl 5.14.2 Build 1402, in which it doesn&#39;t work. Do you have any solutions for Active Perl as well without upgrading the Perl version to have it working in my test client? Thank you so much for your help!!!"}, {"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "reply_to_user": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "edited": false, "score": 0, "creation_date": 1540852915, "post_id": 52968811, "comment_id": 93009294, "body": "<code>App::FatPacker</code>  might help you. <code>TAP::Formatter::JUnit</code> is a PurePerl module that doesn&#39;t contain any XS code, so you can pack all <code>TAP::Formatter::JUnit</code> dependencies into <code>tap2junit</code> script itself.  Install <code>App::FatPacker</code> in your local machine.  Download <code>TAP::Formatter::JUnit</code> tarball then extract it.  Run <code>fatpack pack bin&#47;tap2junit &gt; bin&#47;tap2junit.fatpack.pl</code>. Copy <code>bin&#47;tap2junit.fatpack.pl</code> to your test client.  ActivePerl on your test client could run this script without dependencies installed."}, {"owner": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "edited": false, "score": 0, "creation_date": 1540912358, "post_id": 52968811, "comment_id": 93033174, "body": "I installed the App::FatPacker module in my local machine. Then I copied the tap2junit code from here: <a href=\"https://github.com/gitpan/TAP-Formatter-JUnit/blob/master/bin/tap2junit\" rel=\"nofollow noreferrer\">github.com/gitpan/TAP-Formatter-JUnit/blob/master/bin/tap2ju&zwnj;&#8203;nit</a> to my local machine ../../perl/bin directory , then run the cmd &quot;fatpack pack bin/tap2junit &gt; bin/tap2junit.fatpack.pl&quot; and a tap2junit.fatpack.pl file is generated, copied that file to the bin directory of my test client &amp; run the cmd &quot;type customtest.txt | perl custom2tap.pl | tap2junit - &gt; result.xml&quot; in the test client.I get the following error &quot; &#39;tap2junit&#39; is not recognized as an internal or external command&quot;"}, {"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "reply_to_user": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "edited": false, "score": 1, "creation_date": 1540917376, "post_id": 52968811, "comment_id": 93036302, "body": "Follow: <a href=\"https://stackoverflow.com/questions/4727480/how-do-i-make-my-perl-scripts-act-like-normal-programs-on-windows\" title=\"how do i make my perl scripts act like normal programs on windows\">stackoverflow.com/questions/4727480/&hellip;</a>. Double check your <code>PATH</code> environment variable. Close your command prompt window and reopen it.  ...or try <code>type customtest.txt | perl custom2tap.pl | perl path&#47;to&#47;perl&#47;bin&#47;tap2junit.fatpack.pl - &gt; result.xml</code>"}, {"owner": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "edited": false, "score": 0, "creation_date": 1540922212, "post_id": 52968811, "comment_id": 93038846, "body": "Set the Path environment variable and in a new command prompt window, executed the above command &quot;type customtest.txt | perl custom2tap.pl | perl path/to/perl/bin/tap2junit.fatpack.pl - &gt; result.xml&quot;, an empty result.xml file is created without the contents of the customtest.txt file. Thanks in advance!!!"}, {"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "reply_to_user": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "edited": false, "score": 0, "creation_date": 1540969995, "post_id": 52968811, "comment_id": 93053626, "body": "Did you changed <code>path&#47;to&#47;perl&#47;bin&#47;tap2junit.fatpack.pl</code> to your actual script path?"}, {"owner": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "edited": false, "score": 0, "creation_date": 1540995535, "post_id": 52968811, "comment_id": 93067850, "body": "Yes I did. This is the command I ran on my test client &quot;C:/testset/regr\\testrun&gt;type customtest.txt | perl custom2tap.pl | perl C:/testset/regr/bin/tap2junit.fatpack.pl - &gt; result.xml&quot;. The tap2junit.fatpack.pl is in the bin folder and my custom2tap.pl and customtest.txt files are in this directory C:/testset/regr\\testrun and the empty result.xml is generated in the same."}, {"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "reply_to_user": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "edited": false, "score": 0, "creation_date": 1540996382, "post_id": 52968811, "comment_id": 93068414, "body": "Could you give me the output of <code>type customtest.txt | custom2tap.pl</code> and <code>perl -wc C:&#47;testset&#47;regr&#47;bin&#47;tap2junit.fatpack.pl</code> on your test client?"}, {"owner": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "edited": false, "score": 0, "creation_date": 1540997424, "post_id": 52968811, "comment_id": 93069124, "body": "When I executed the first command &quot;type customtest.txt | custom2tap.pl&quot;  I get the following error &quot;The process tried to write to a nonexistent pipe.&quot; And for the second command C:/testset/regr/testrun&gt; perl -wc C:/testset/regr/bin/tap2junit.fatpack.pl&quot; I get the following &quot;C:/testset/regr/bin/tap2junit.fatpack.pl syntax OK.&quot;"}, {"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "reply_to_user": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "edited": false, "score": 0, "creation_date": 1540997808, "post_id": 52968811, "comment_id": 93069407, "body": "What about <code>type customtest.txt | perl custom2tap.pl</code> ?"}, {"owner": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "edited": false, "score": 0, "creation_date": 1540998143, "post_id": 52968811, "comment_id": 93069634, "body": "For this command &quot;type customtest.txt | perl custom2tap.pl - &gt; result.xml&quot;, result.xml file is generated with the following output:                                    1..4 ok 1 - aaa.msg ok 2 - bbb.msg ok 3 - ccc.msg not ok 4 - ddd.msg"}, {"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "reply_to_user": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "edited": false, "score": 0, "creation_date": 1541035714, "post_id": 52968811, "comment_id": 93084789, "body": "I&#39;ve just tried <code>App::FatPacker</code> on my Windows machine and figured out it is designed to be run on only UNIX/Linux environment.  I&#39;m sorry, but you should setup some Linux distro somewhere to create tap2junit.fatpack.pl."}], "tags": [], "owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "is_accepted": true, "score": 2, "last_activity_date": 1540457629, "last_edit_date": 1540457629, "creation_date": 1540383479, "answer_id": 52968811, "question_id": 52953305, "link": "https://stackoverflow.com/questions/52953305/how-to-convert-a-generated-text-file-to-junit-formatxml-using-perl/52968811#52968811", "title": "How to convert a generated text file to Junit format(XML) using Perl", "body": "<p><a href=\"https://metacpan.org/pod/TAP::Formatter::JUnit\" rel=\"nofollow noreferrer\">TAP::Formatter::JUnit</a> has <code>tap2junit</code> command that convert <a href=\"https://testanything.org/tap-specification.html\" rel=\"nofollow noreferrer\">TAP format</a> text into JUnit XML.  All you have to do is to create a filter that can read your test result and convert it to TAP format, just like:</p>\n\n<h3>custom2tap.pl</h3>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @t;\nwhile (my $line = &lt;STDIN&gt;) {\n    $line =~ s/\\R//;\n\n    if (my ($msg, $result) = $line =~ /^(.*?)\\s*(PASSED|FAILED)$/) {\n        if ($result eq 'PASSED') {\n            push @t, ['ok' =&gt; $msg];\n        }\n        elsif ($result eq 'FAILED') {\n            push @t, ['not ok' =&gt; $msg];\n        }\n    }\n\n}\n\ndie \"No test\" if @t == 0;\nprintf \"1..%d\\n\", scalar @t;\n\nfor my $i (0 .. $#t) {\n    printf \"%s %d - %s\\n\", $t[$i]-&gt;[0], $i + 1, $t[$i]-&gt;[1];\n}\n\n1;\n</code></pre>\n\n<p>Save your test result as <code>customtest.txt</code> then run <code>cat customtest.txt | perl custom2tap.pl | tap2junit -</code>, you can have following output:</p>\n\n<pre><code>&lt;testsuites&gt;\n  &lt;testsuite failures=\"1\" errors=\"0\" name=\"-\" tests=\"3\"&gt;\n    &lt;testcase name=\"1 - abc.msg\"&gt;\n      &lt;failure message=\"not ok 1 - abc.msg\"\n               type=\"TestFailed\"&gt;&lt;![CDATA[not ok 1 - abc.msg]]&gt;&lt;/failure&gt;\n    &lt;/testcase&gt;\n    &lt;testcase name=\"2 - aa.msg\"&gt;&lt;/testcase&gt;\n    &lt;testcase name=\"3 - bb.msg\"&gt;&lt;/testcase&gt;\n    &lt;system-out&gt;&lt;![CDATA[1..3\nnot ok 1 - abc.msg\nok 2 - aa.msg\nok 3 - bb.msg\n]]&gt;&lt;/system-out&gt;\n    &lt;system-err&gt;&lt;/system-err&gt;\n  &lt;/testsuite&gt;\n&lt;/testsuites&gt;\n</code></pre>\n\n<hr>\n\n<h2>Windows</h2>\n\n<p>Install <a href=\"http://strawberryperl.com/\" rel=\"nofollow noreferrer\">Strawberry Perl</a>, so that you can use <code>cpan</code> command.</p>\n\n<p>Install <code>TAP::Formatter::JUnit</code> from command prompt:</p>\n\n<pre><code>&gt; cpan -i TAP::Formatter::JUnit\n</code></pre>\n\n<p>Run <code>type customtest.txt | perl custom2tap.pl | tap2junit -</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/0UBvz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0UBvz.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 167, "user_id": 7654178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b36db48be4f6f8b667720632c073acb?s=128&d=identicon&r=PG&f=1", "display_name": "randomguy", "link": "https://stackoverflow.com/users/7654178/randomguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1273, "favorite_count": 0, "accepted_answer_id": 52968811, "answer_count": 1, "score": 2, "last_activity_date": 1548354437, "creation_date": 1540310212, "last_edit_date": 1548354437, "question_id": 52953305, "link": "https://stackoverflow.com/questions/52953305/how-to-convert-a-generated-text-file-to-junit-formatxml-using-perl", "title": "How to convert a generated text file to Junit format(XML) using Perl", "body": "<p><a href=\"https://i.stack.imgur.com/K14I1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K14I1.png\" alt=\"enter image description here\"></a>How to convert a generated text file to Junit format(XML) using Perl</p>\n\n<p><strong>I have a text file generated which is in the format:</strong></p>\n\n<pre><code>Tests started on Fri Oct 19 14:11:35 2018\n\nTest File    Comparison Result\n\n========= =================\n\nabc.msg    FAILED\n\naa.msg     PASSED\n\nbb.msg     TO BE VALIDATED\n\nTests finished on Fri Oct 19 14:12:01 2018\n</code></pre>\n\n<p><strong>Expected JUnit Format:</strong></p>\n\n<p>Please find attached the snip with the expected xml format</p>\n\n<p>I want to convert the above text file after being generated from a Perl script to an XML file using a Perl script. </p>\n\n<p>Any help would be appreciated. Thanks in advance!!</p>\n\n<p><a href=\"https://i.stack.imgur.com/xCBE4.png\" rel=\"nofollow noreferrer\" title=\"expected one\"><img src=\"https://i.stack.imgur.com/xCBE4.png\" alt=\"enter image description here\" title=\"expected one\"></a></p>\n"}, {"tags": ["python", "perl", "mechanize", "www-mechanize", "mechanicalsoup"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540306003, "post_id": 52951550, "comment_id": 92811657, "body": "WWW::Mechanize does not handle Javascript. Does your target page contain (and need) Javascript?"}, {"owner": {"reputation": 63, "user_id": 10266779, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ouJZ9Rzudsw/AAAAAAAAAAI/AAAAAAAAUso/fQNQrkuWLqo/photo.jpg?sz=128", "display_name": "Roger Nieto", "link": "https://stackoverflow.com/users/10266779/roger-nieto"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540308077, "post_id": 52951550, "comment_id": 92812980, "body": "@Corion This is the only javascript I could identify    //&lt;![CDATA[ var theForm = document.forms[&#39;form2&#39;]; if (!theForm) {     theForm = document.form2; } function __doPostBack(eventTarget, eventArgument) {     if (!theForm.onsubmit || (theForm.onsubmit() != false)) {         theForm.__EVENTTARGET.value = eventTarget;         theForm.__EVENTARGUMENT.value = eventArgument;         theForm.submit();     } }, doing debug i grab all the parameters and headers for the post request"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 3, "creation_date": 1540310129, "post_id": 52951550, "comment_id": 92814274, "body": "So, yes, that web page uses and needs Javascript. WWW::Mechanize does not support Javascript. You will need to use something that understands Javascript, like WWW::Mechanize::Chrome (disclaimer: written by me). Alternatively, you can reimplement the functionality of the Javascript code in Perl."}, {"owner": {"reputation": 63, "user_id": 10266779, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ouJZ9Rzudsw/AAAAAAAAAAI/AAAAAAAAUso/fQNQrkuWLqo/photo.jpg?sz=128", "display_name": "Roger Nieto", "link": "https://stackoverflow.com/users/10266779/roger-nieto"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540310399, "post_id": 52951550, "comment_id": 92814427, "body": "@Corion Thanks for the aclaration, so with WWW::Mechanize::Chrome I would be able to do the postback request, how? I didn&#39;t know that library. Thanks again."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540310451, "post_id": 52951550, "comment_id": 92814459, "body": "WWW::Mechanize::Chrome will handle the Javascript that is triggered by a click, yes."}, {"owner": {"reputation": 63, "user_id": 10266779, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ouJZ9Rzudsw/AAAAAAAAAAI/AAAAAAAAUso/fQNQrkuWLqo/photo.jpg?sz=128", "display_name": "Roger Nieto", "link": "https://stackoverflow.com/users/10266779/roger-nieto"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540310713, "post_id": 52951550, "comment_id": 92814624, "body": "@Corion Ok, I will try to make the post request with WWW::Mechanize::Chrome. Maybe I can write you and tell you if I could make it..."}, {"owner": {"reputation": 63, "user_id": 10266779, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ouJZ9Rzudsw/AAAAAAAAAAI/AAAAAAAAUso/fQNQrkuWLqo/photo.jpg?sz=128", "display_name": "Roger Nieto", "link": "https://stackoverflow.com/users/10266779/roger-nieto"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540324683, "post_id": 52951550, "comment_id": 92821370, "body": "@Corion Hi, I&#39;m installing the library and trying to make it work. But when I ran the javascript example, it throws me this error: Can&#39;t call method &quot;new&quot; without a package or object reference at C:/Strawberry/perl/vendor/lib/Chrome/DevToolsProtocol/Transp&zwnj;&#8203;ort.pm line 42.  What could that be?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540368586, "post_id": 52951550, "comment_id": 92834541, "body": "This is weird. This error means that the module could not find an appropriate backend. I think you should ask this as a new question, but you need to show the code, the backend /eventloop that should be used and the backend that gets used."}, {"owner": {"reputation": 63, "user_id": 10266779, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ouJZ9Rzudsw/AAAAAAAAAAI/AAAAAAAAUso/fQNQrkuWLqo/photo.jpg?sz=128", "display_name": "Roger Nieto", "link": "https://stackoverflow.com/users/10266779/roger-nieto"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540387453, "post_id": 52951550, "comment_id": 92846573, "body": "@Corion Ok, I&#39;ll make another question, but it happens when I try to run the my code or the examples from <a href=\"https://metacpan.org/pod/release/CORION/WWW-Mechanize-Chrome-0.06/lib/WWW/Mechanize/Chrome/Examples.pm\" rel=\"nofollow noreferrer\">metacpan.org/pod/release/CORION/WWW-Mechanize-Chrome-0.06/li&zwnj;&#8203;b/&hellip;</a> , I just installed the modules and ran the examples."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540389286, "post_id": 52951550, "comment_id": 92847883, "body": "Why are you using version 0.06 instead of using 0.23, the current version?"}, {"owner": {"reputation": 63, "user_id": 10266779, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ouJZ9Rzudsw/AAAAAAAAAAI/AAAAAAAAUso/fQNQrkuWLqo/photo.jpg?sz=128", "display_name": "Roger Nieto", "link": "https://stackoverflow.com/users/10266779/roger-nieto"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540390845, "post_id": 52951550, "comment_id": 92849042, "body": "Sorry, just posted the link for example, I am using the 0.23 version: WWW::Mechanize::Chrome is up to date (0.23)"}], "owner": {"reputation": 63, "user_id": 10266779, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ouJZ9Rzudsw/AAAAAAAAAAI/AAAAAAAAUso/fQNQrkuWLqo/photo.jpg?sz=128", "display_name": "Roger Nieto", "link": "https://stackoverflow.com/users/10266779/roger-nieto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540310747, "creation_date": 1540304902, "last_edit_date": 1540310747, "question_id": 52951550, "link": "https://stackoverflow.com/questions/52951550/make-postback-request-python-or-perl", "title": "Make postback request python or perl", "body": "<p>I'm trying to do a postback request to a site built in ASP.NET, my first attemp was to do it in Perl, using Mechanize, then I tried Python and no results... I was reading that might be a damaged SSL or the postback itself. </p>\n\n<p>I'm doing these because there's a file that I want to download daily and downloading manually it will cost a lot of time, but I haven't been able to automatize it.</p>\n\n<p>I'm open to any language or suggestions. The following is my perl code (Note: i I had to desactive SSL Certification because when it was active I got no response from the server):</p>\n\n<pre><code>use warnings;\nuse strict;\nuse WWW::Mechanize;\nuse Data::Dumper;\nuse Time::Piece;\nuse Time::Seconds;\nuse Try::Tiny;\nuse Log::Logger;\nuse File::Basename;\n$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;\n\nsub getLoggingTime {\n\n    my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst)=localtime(time);\n    my $nice_timestamp = sprintf ( \"%04d%02d%02d %02d:%02d:%02d\",\n                                   $year+1900,$mon+1,$mday,$hour,$min,$sec);\n    return $nice_timestamp;\n}\nmy $dirname = dirname(__FILE__);\nmy $log = new Log::Logger;\n$log-&gt;open_append($dirname . \"/pmlcenace.log\");\n$log-&gt;log(getLoggingTime() . \" INFO: Inicio del Script pmlcenace.pl\");\n\n# =============================\n# Seteo de Variables generales\n# =============================\n\nmy $maxtry = 6;\nmy $dest = qq(C:/Users/MyUser/Desktop/Precios/);\nmy $url = 'https://www.cenace.gob.mx/SIM/VISTA/REPORTES/H_CapacidadTransfer.aspx?N=263&amp;site=&amp;tipoArch=C&amp;tipoUni=SIN&amp;tipo=Diarios';\nmy $params = [   \n        __ASYNCPOST =&gt; 'true',\n        __EVENTARGUMENT =&gt; '{\"commandName\":\"Check\",\"index\":\"0:0\"}',\n        __EVENTTARGET =&gt; 'ctl00$ContentPlaceHolder1$treePrincipal',\n        ctl00_ContentPlaceHolder1_treePrincipal_ClientState =&gt; '{\"expandedNodes\":[],\"collapsedNodes\":[],\"logEntries\":[],\"selectedNodes\":[],\"checkedNodes\":[\"0\",\"0:0\"],\"scrollPosition\":0}',\n        __VIEWSTATE =&gt; '/w edited for space and viewing reasons',\n        __VIEWSTATEGENERATOR =&gt; '955A55B8',\n        __EVENTVALIDATION =&gt; '/wEdAAOCpQshmYscjMDA9x+69HkswfFVx5pEsE3np13JV2opXVEvSNmVO1vU+umjph0DtwdLoqQBBqXirK2Np+DpA6TO2lTaZh4NXJjUyfeW6oTM9g==',\n        'ctl00_ContentPlaceHolder1_ListViewNodos_ClientState' =&gt; '',\n        'ctl00$ContentPlaceHolder1$NotifAvisos$hiddenState' =&gt; '',\n        'ctl00_ContentPlaceHolder1_NotifAvisos_XmlPanel_ClientState' =&gt; '',\n        'ctl00_ContentPlaceHolder1_NotifAvisos_TitleMenu_ClientState' =&gt; '',\n        'ctl00_ContentPlaceHolder1_NotifAvisos_ClientState' =&gt; '',\n        'ctl00$ContentPlaceHolder1$btnCerrarPanel' =&gt; '',\n        'ctl00$ContentPlaceHolder1$toolkit' =&gt; '{\"expandedNodes\":[],\"collapsedNodes\":[],\"logEntries\":[],\"selectedNodes\":[],\"checkedNodes\":[\"0\",\"0:0\"],\"scrollPosition\":0}'\n        ,''=&gt;''];\n\n# ===========================================\n# Configuraci\u00f3n e inizializaci\u00f3n de Mechanize\n# ===========================================\n\nmy $mech = WWW::Mechanize-&gt;new();\n$mech-&gt;show_progress(1);\n$mech-&gt;max_redirect(0);\n$mech-&gt;agent_alias('Windows Mozilla');\n#$mech-&gt;add_header(\n#    User_Agent =&gt; 'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36'\n#    );\n\n# ==========================================\n# POST Request a la p\u00e1gina del CENACE\n# Nota: Intenta hasta 5 veces, si no exit: 1\n# ==========================================\n\n\nwhile ($maxtry &gt; 0) {\n    $log-&gt;log(getLoggingTime() . \" INFO: POST Request: \" . $url);\n    $mech-&gt;post($url,$params);  \n\n    if ($mech-&gt;status == '200') {\n        last;\n    } else {\n        $maxtry--;\n        $log-&gt;log(getLoggingTime() . \" WARN: POST Request fallido. [\" . $maxtry . \"] Intentos restantes\");\n        if ($maxtry == 1) {\n            $log-&gt;fail(getLoggingTime() . \" ERROR: Numero m\u00e1ximo de intentos alcanzados\");\n            exit 1;\n        }\n        sleep(1.5);\n    }\n}\n\n\n\n\nprint \"\\n\\n\\n\\n\\n Validating: AFTER DOING THE POST:\\n\";\nprint $mech-&gt;content(  base_href =&gt; [my $base_href|undef] );\nif ($mech-&gt;is_html() == 1) \n    {\n        print \"\\n\";\n        print \"It DOES have HTML\";\n        print \"\\n\";\n    }\n    else \n    {\n        print \"\\n\";\n        print \"Do NOT have HTML\";\n        print \"\\n\";\n    }\n</code></pre>\n\n<p>The response I got is RedirectError, like this: </p>\n\n<pre><code>1|#||4|87|pageRedirect||%2fContacto.aspx%3faspxerrorpath%3d%2fSIM%2fVISTA%2fREPORTES%2fH_CapacidadTransfer.aspx|\n</code></pre>\n\n<p>But that request have to return a HTML code that has the links I need for the files. </p>\n\n<p>Maybe I'm missing something I don't know. I really would appreciate any kind of help or solution. </p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "multidimensional-array", "replicate"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540314550, "post_id": 52950178, "comment_id": 92816568, "body": "I don&#39;t understand. It says that E1 is kept (at least the &quot;<i>second index</i>&quot;...) but E1 row in ID1.txt file is <code>S H G U...</code> while in the desired output file it is <code>K L G N...</code> --- completely different.  What do you mean by &quot;array E1&quot; -- the row that starts with E1?"}, {"owner": {"reputation": 59, "user_id": 6574124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b03403cf845bfb4c82f730399f5419?s=128&d=identicon&r=PG&f=1", "display_name": "perlbeginner", "link": "https://stackoverflow.com/users/6574124/perlbeginner"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540315790, "post_id": 52950178, "comment_id": 92817177, "body": "@zdim Only the given array indices from file 1 have to be kept NOT the entire elements. For instance, E1[2] should be maintained. E1[2] is &quot;G&quot;. Every other element should be replaced by the Ref elements (the first line of the array). So it is K L G N O P A B C D. I (assumed) mentioned array E1, E2 and so on because of multiple lines (rows/columns). Would be helpful to know the other way too. File-1 format is as follows, &quot;id    index_value    arrays&quot;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540319049, "post_id": 52950178, "comment_id": 92818732, "body": "Ah, thank you -- yes, it says all that in the question. Let me know if I still misunderstood something (see answer)"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 6574124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b03403cf845bfb4c82f730399f5419?s=128&d=identicon&r=PG&f=1", "display_name": "perlbeginner", "link": "https://stackoverflow.com/users/6574124/perlbeginner"}, "edited": false, "score": 0, "creation_date": 1540320512, "post_id": 52955536, "comment_id": 92819423, "body": "unfortunately it gives the same input as output still!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 59, "user_id": 6574124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b03403cf845bfb4c82f730399f5419?s=128&d=identicon&r=PG&f=1", "display_name": "perlbeginner", "link": "https://stackoverflow.com/users/6574124/perlbeginner"}, "edited": false, "score": 1, "creation_date": 1540320817, "post_id": 52955536, "comment_id": 92819552, "body": "@perlbeginner  Hum?  It prints the output as shown, which is your desired output from the question ... ?  It uses the input file that you give in the question.  I also tested for all fields that should be changed, as explained, and it correctly keeps data at those indices (while replacing all else by that reference line)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 59, "user_id": 6574124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b03403cf845bfb4c82f730399f5419?s=128&d=identicon&r=PG&f=1", "display_name": "perlbeginner", "link": "https://stackoverflow.com/users/6574124/perlbeginner"}, "edited": false, "score": 0, "creation_date": 1540320987, "post_id": 52955536, "comment_id": 92819652, "body": "@perlbeginner  I don&#39;t understand: copy-paste the program and run it with files that you show in the question (File-1 and ID1.txt) -- it has to print what is shown in the answer (I copy-pasted it from my console, when printed with two spaces instead of tabs).  This is precisely the desired output."}, {"owner": {"reputation": 59, "user_id": 6574124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b03403cf845bfb4c82f730399f5419?s=128&d=identicon&r=PG&f=1", "display_name": "perlbeginner", "link": "https://stackoverflow.com/users/6574124/perlbeginner"}, "edited": false, "score": 0, "creation_date": 1540323562, "post_id": 52955536, "comment_id": 92820858, "body": "I copy-paste and tried exactly the same. The output you showed here is the desired output. But when I run it, it gives the similar to the file2 (ID1.txt) not new_ID1.txt"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 59, "user_id": 6574124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b03403cf845bfb4c82f730399f5419?s=128&d=identicon&r=PG&f=1", "display_name": "perlbeginner", "link": "https://stackoverflow.com/users/6574124/perlbeginner"}, "edited": false, "score": 0, "creation_date": 1540323832, "post_id": 52955536, "comment_id": 92820986, "body": "@perlbeginner  I just checked: I copy-pasted my code above into a new file, and ran <code>script.pl File-1 ID1.txt</code>. It produced <code>new_ID1.txt</code> with content as shown above.  Are you sure you are checking the right file? Do you have other files around which may confuse matters?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 59, "user_id": 6574124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b03403cf845bfb4c82f730399f5419?s=128&d=identicon&r=PG&f=1", "display_name": "perlbeginner", "link": "https://stackoverflow.com/users/6574124/perlbeginner"}, "edited": false, "score": 0, "creation_date": 1540324072, "post_id": 52955536, "comment_id": 92821090, "body": "@perlbeginner  Note, I copy-pasted <code>File-1</code> and <code>ID1.txt</code> from here, exactly as shown.  (Well, without those trailing <code>.</code> lines).  If input is actually different then the code may not find any of what it looks for and may not produce output (and you may be looking at your old &quot;output&quot; which ins&#39;t good?)"}, {"owner": {"reputation": 59, "user_id": 6574124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b03403cf845bfb4c82f730399f5419?s=128&d=identicon&r=PG&f=1", "display_name": "perlbeginner", "link": "https://stackoverflow.com/users/6574124/perlbeginner"}, "edited": false, "score": 0, "creation_date": 1540325021, "post_id": 52955536, "comment_id": 92821534, "body": "Yeah! great effort of you and thank your very much, it gives the desired output now. Just one short thing, I made it loop for many ids (ID1.txt, ID2.txt and so on for multiple files) but this one is made for single file right?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 59, "user_id": 6574124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b03403cf845bfb4c82f730399f5419?s=128&d=identicon&r=PG&f=1", "display_name": "perlbeginner", "link": "https://stackoverflow.com/users/6574124/perlbeginner"}, "edited": false, "score": 0, "creation_date": 1540325910, "post_id": 52955536, "comment_id": 92821974, "body": "@perlbeginner Great :)  Yes, this will only work with one file as it stands. It shouldn&#39;t be hard to modify it for multiple files -- can you do that?  One way: make the reference file a command-line option (best processed with <code>Getopt::Long</code>), and then after that&#39;s processed the files remain in <code>@ARGV</code>. Then you can put the code in a loop over <code>@ARGV</code>. Another way: write a wrapper script which takes the list of files to process, and then out of it run this program, each time with reference file and one of files as input."}, {"owner": {"reputation": 59, "user_id": 6574124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b03403cf845bfb4c82f730399f5419?s=128&d=identicon&r=PG&f=1", "display_name": "perlbeginner", "link": "https://stackoverflow.com/users/6574124/perlbeginner"}, "edited": false, "score": 0, "creation_date": 1540327741, "post_id": 52955536, "comment_id": 92822697, "body": "Neat that. Thanks a lot :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 59, "user_id": 6574124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b03403cf845bfb4c82f730399f5419?s=128&d=identicon&r=PG&f=1", "display_name": "perlbeginner", "link": "https://stackoverflow.com/users/6574124/perlbeginner"}, "edited": false, "score": 0, "creation_date": 1540328041, "post_id": 52955536, "comment_id": 92822799, "body": "@perlbeginner  Good -- judged by the complexity of code you posted handling multiple input files shouldn&#39;t be a problem, but let me know if it is.  (Or post another question of course.)"}, {"owner": {"reputation": 59, "user_id": 6574124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b03403cf845bfb4c82f730399f5419?s=128&d=identicon&r=PG&f=1", "display_name": "perlbeginner", "link": "https://stackoverflow.com/users/6574124/perlbeginner"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540391078, "post_id": 52955536, "comment_id": 92849226, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/182433/discussion-between-perlbeginner-and-zdim\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1540334723, "last_edit_date": 1540334723, "creation_date": 1540318981, "answer_id": 52955536, "question_id": 52950178, "link": "https://stackoverflow.com/questions/52950178/how-to-replicate-and-or-reassign-array-elements-in-a-multi-dimensional-array/52955536#52955536", "title": "How to replicate and/or reassign array elements in a multi-dimensional array?", "body": "<p>The shown code is well-meant but a bit too complicated; you may have lost your way in the maneuvers over the nested data structure. Here's another, simpler, approach.</p>\n\n<p>Parse the information from the \"reference\" file (<code>File-1</code>) into a hash <code>(E1 =&gt; [2, ...], ..)</code>. I put indices for data to be kept in an arrayref to allow for multiple indices for a row. Then go line by line, replacing data at these indices for rows that have a key, and print output as you go.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy ($ref_file, $data_file) = @ARGV;\ndie \"Usage: $0 ref-file data-file\\n\" if not $ref_file or not $data_file;\n\nopen my $fh, '&lt;', $ref_file or die \"Can't open $ref_file: $!\";\nmy %rows;\nwhile (&lt;$fh&gt;) {\n    my (undef, $idx, $row_id) = split;\n    for (split /,/, $row_id) {\n        push @{$rows{$_}}, $idx;        # elem =&gt; [ indices ]\n    }\n}\n\nmy $outfile = 'new_' . $data_file;\nopen    $fh,     '&lt;', $data_file  or die \"Can't open $data_file: $!\";\nopen my $fh_out, '&gt;', $outfile    or die \"Can't open $outfile: $!\";\n\nmy @ref = split ' ', &lt;$fh&gt;;\nshift @ref;                  # toss the first field\n\nwhile (&lt;$fh&gt;) {\n    my ($row_id, @data) = split;\n\n    if (exists $rows{$row_id}) {              # this row needs attention\n        my @new_row = @ref;\n        foreach my $idx (@{$rows{$row_id}}) { # keep data at these indices\n            $new_row[$idx] = $data[$idx];\n        }\n        say $fh_out join \"\\t\", $row_id, @new_row;\n    }\n    else {                                    # use whole reference line\n        say $fh_out join \"\\t\", $row_id, @ref;\n    }\n}\n</code></pre>\n\n<p>The new file (shown with two spaces instead of the actual tabs, for readability)</p>\n\n<pre>\nE1  K  L  G  N  O  P  A  B  C  D\nE2  K  L  M  N  O  P  A  B  C  D\nE3  K  L  M  N  O  P  A  B  C  D\nE4  K  L  G  N  O  P  A  B  C  D\nE5  K  L  M  N  O  P  A  B  C  D\nE6  K  L  M  N  O  P  A  B  C  D\nE7  K  L  M  N  O  P  A  B  C  D\nE8  K  L  M  N  O  P  A  B  C  D\nE9  K  L  M  N  O  P  A  B  C  D\nE10  K  L  M  N  O  P  A  B  C  D\n</pre>\n\n<p>Note that the given input file happens to have the same entries as the reference line to use in replacement at many indices of interest -- so we can't see those \"changes\" in the above output. (I tested by changing the input file so to be able to see.)</p>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "is_accepted": false, "score": 1, "last_activity_date": 1540319603, "creation_date": 1540319603, "answer_id": 52955731, "question_id": 52950178, "link": "https://stackoverflow.com/questions/52950178/how-to-replicate-and-or-reassign-array-elements-in-a-multi-dimensional-array/52955731#52955731", "title": "How to replicate and/or reassign array elements in a multi-dimensional array?", "body": "<p>This is one way to do it, if I understood your problem statement correctly:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy %keep_idx;\n\nopen FILE, \"file-1\" or die \"Couldn't open file-1\";\nwhile(&lt;FILE&gt;) {\n    my (undef, $idx, $id_str) = split /\\s+/;\n    my @ids = split /,/, $id_str;\n    foreach my $id (@ids) {\n        $keep_idx{$id}{$idx} = 1;\n    }\n}\nclose FILE;\n\nopen FILE, \"file-2\" or die \"Couldn't open file-2\";\nopen OUTFILE, \"&gt;file-3\" or die \"Couldn't open file-3\";\nmy (undef, @ref) = split /\\s+/, &lt;FILE&gt;;\nwhile(&lt;FILE&gt;) {\n    my ($id, @src) = split /\\s+/;\n    my $line = \"$id\";\n    for (my $i = 0; $i &lt;= $#src; $i++) {\n        my $e = $keep_idx{$id}{$i} ? $src[$i] : $ref[$i];\n        $line .= \" $e\";\n    }\n    print OUTFILE \"$line\\n\";\n}\nclose OUTFILE;\nclose FILE;\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 6574124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b03403cf845bfb4c82f730399f5419?s=128&d=identicon&r=PG&f=1", "display_name": "perlbeginner", "link": "https://stackoverflow.com/users/6574124/perlbeginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 52955536, "answer_count": 2, "score": 3, "last_activity_date": 1540334723, "creation_date": 1540300793, "last_edit_date": 1540301829, "question_id": 52950178, "link": "https://stackoverflow.com/questions/52950178/how-to-replicate-and-or-reassign-array-elements-in-a-multi-dimensional-array", "title": "How to replicate and/or reassign array elements in a multi-dimensional array?", "body": "<p>The code is getting messy somewhere in the loop! Please help me to solve it.</p>\n\n<h2>Details</h2>\n\n<p>Replicate and/or reassign most of the array elements in the multi-dimensional array, using reference elements.</p>\n\n<ul>\n<li><p>File-1: List of <strong>array indices &amp; the elements</strong> that needs to be maintained in the original array.</p></li>\n<li><p>File-2: The <strong>original</strong> multi-dimensional array that needs to be rewritten with the above info. Except the elements from the above, the rest of all elements have to be reassigned.</p></li>\n<li><p>File-3: Expected output (reassigned array elements)</p></li>\n</ul>\n\n<p>Note: Addition to the array indices from file1, rest of all the indices will be replaced with the reference line. Reference line is usually present in the first line of the array. <br/>In the modified array, the reference line is not needed.</p>\n\n<p><strong>File-1:</strong></p>\n\n<pre><code>ID1    2    E1,E4\nID2    5    E6,E7,E9\nID3    1    E3\n</code></pre>\n\n<p><strong>File-2:</strong></p>\n\n<p><strong>ID1.txt</strong></p>\n\n<pre><code>Ref K L M N O P A B C D\nE1 S H G U S K R E K K\nE2 S L G N O P A B C D\nE3 S L G N O P A B C D\nE4 U L G G O P A B C D\nE5 U L M G O P A J C D\nE6 U L M G O P A J C D\nE7 U L M G O P A J C D\nE8 U L M G O P A J C D\nE9 S L M N O P A J C D\nE10 S L M N O P A J C D\n.\n.\n.\n</code></pre>\n\n<p><strong>File-3: Expected output</strong></p>\n\n<p><strong>new_ID1.txt</strong></p>\n\n<pre><code>E1    K L G N O P A B C D\nE2    K L M N O P A B C D\nE3    K L M N O P A B C D\nE4    K L G N O P A B C D\nE5    K L M N O P A B C D\nE6    K L M N O P A B C D\nE7    K L M N O P A B C D\nE8    K L M N O P A B C D\nE9    K L M N O P A B C D\nE10    K L M N O P A B C D\n.\n.\n.\n</code></pre>\n\n<p>In the expected output, (new_ID1.txt), second index of the array for \"E1\" and \"E4\" is maintained from the original array. Everything else is replaced by the reference line in \"E2,E3,E5...\".</p>\n\n<h2>Code</h2>\n\n<pre><code>#!/usr/bin/perl \n\nuse strict;\nuse warnings;\n\nmy %HoHoA = ();\n\nopen(IN,\"ids.txt\");\nmy @ids = &lt;IN&gt;; chomp @ids; close IN;\n\nopen(IN2,\"indices_and_values.txt\");\n\nwhile(my $l = &lt;IN2&gt;)\n{\n    chomp $l;\nmy @tmp = split \"\\t\", $l;\nmy $lid = $tmp[0];\nmy $pos = $tmp[1];\nmy @gps = @tmp[2..$#tmp];\n\n    foreach my $g (@gps)\n    {\n        push @{$HoHoA{$lid}{$g}}, $pos;\n    }\n}\nclose IN2;\n\n\nforeach my $outer (sort keys %HoHoA)\n{\nopen(IN3,\"$outer.txt\");\nmy @rS = &lt;IN3&gt;; chomp @rS; close IN3;\n\n    my @orgArr = (); my @refArr = (); my @newArr = ();\n    foreach my $unk (@rS) \n    { \n        @orgArr = split \"\\t\", $unk;\n        if($unk =~ /^Ref/)\n        { \n            @refArr = split \"\\t\", $unk;\n            next;\n        }\n    foreach my $inner (sort keys %{$HoHoA{$outer}})\n    {\n        if($inner =~ /^$orgArr[0]/)\n        {\n            foreach my $ele (sort {$a &lt;=&gt; $b} @{$HoHoA{$outer}{$inner}})\n            {\n                $refArr[$ele] = $orgArr[$ele];\n            }\n        }\n        #else\n        #{\n        #}\n    }\n    print \"&gt;$orgArr[0]\\t\";\n    print join(\"\\t\",@refArr[1..$#refArr]);\n    print \"\\n\";\n}\n    @rS = ();\n    print \"\\n\";\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1540300902, "post_id": 52950084, "comment_id": 92808216, "body": "Please given an example of the content of <code>$var2</code> and <code>$some_global_string</code>"}, {"owner": {"reputation": 587, "user_id": 4336150, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/cce821782e6eff5bf46e45e1a00f9fdd?s=128&d=identicon&r=PG&f=1", "display_name": "Chirag", "link": "https://stackoverflow.com/users/4336150/chirag"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1540301277, "post_id": 52950084, "comment_id": 92808467, "body": "@H&#229;konH&#230;gland Thanksfor the reply, I have edited the same details in question, Please have a look"}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "edited": false, "score": 1, "creation_date": 1540301727, "post_id": 52950084, "comment_id": 92808755, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/952998/is-there-a-way-to-precompile-a-regex-in-perl\">Is there a way to precompile a regex in Perl?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 587, "user_id": 4336150, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/cce821782e6eff5bf46e45e1a00f9fdd?s=128&d=identicon&r=PG&f=1", "display_name": "Chirag", "link": "https://stackoverflow.com/users/4336150/chirag"}, "edited": false, "score": 0, "creation_date": 1540302126, "post_id": 52950597, "comment_id": 92809043, "body": "Thanks, Can you please confirm, Is this $var1 !~ or $var1 =~       ??"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 587, "user_id": 4336150, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/cce821782e6eff5bf46e45e1a00f9fdd?s=128&d=identicon&r=PG&f=1", "display_name": "Chirag", "link": "https://stackoverflow.com/users/4336150/chirag"}, "edited": false, "score": 1, "creation_date": 1540302325, "post_id": 52950597, "comment_id": 92809198, "body": "That depends entirely on your use case @Chirag. It doesn&#39;t matter if you do a positive or negative match. The relevant info is that the <code>qr&#47;&#47;</code> operator creates a pre-compiled pattern, and you&#39;d do that in a larger scope or with <code>state</code>."}, {"owner": {"reputation": 587, "user_id": 4336150, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/cce821782e6eff5bf46e45e1a00f9fdd?s=128&d=identicon&r=PG&f=1", "display_name": "Chirag", "link": "https://stackoverflow.com/users/4336150/chirag"}, "edited": false, "score": 0, "creation_date": 1540302413, "post_id": 52950597, "comment_id": 92809276, "body": "Ok, Thanks, I just wanted to check if it was intentional or typo :)"}], "tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": true, "score": 4, "last_activity_date": 1540302033, "creation_date": 1540302033, "answer_id": 52950597, "question_id": 52950084, "link": "https://stackoverflow.com/questions/52950084/how-to-make-perl-regex-precompiled-to-save-time-during-runtime/52950597#52950597", "title": "How to make perl regex precompiled to save time during runtime?", "body": "<p><a href=\"http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators</a></p>\n\n<pre><code>my $RE1 = qr/^UTF-?8$/;\nmy $RE2 = qr/$some_global_string/i;\n....\nif ($var1 !~ /$RE1/) {...};\n...\nif ($var2 =~ /$RE2/) {...};\n</code></pre>\n"}], "owner": {"reputation": 587, "user_id": 4336150, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/cce821782e6eff5bf46e45e1a00f9fdd?s=128&d=identicon&r=PG&f=1", "display_name": "Chirag", "link": "https://stackoverflow.com/users/4336150/chirag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 52950597, "answer_count": 1, "score": 0, "last_activity_date": 1540302033, "creation_date": 1540300581, "last_edit_date": 1540301244, "question_id": 52950084, "link": "https://stackoverflow.com/questions/52950084/how-to-make-perl-regex-precompiled-to-save-time-during-runtime", "title": "How to make perl regex precompiled to save time during runtime?", "body": "<p>I have a perl function as shown below, It is taking longer time to execute. (Note: This function is being called 10000+ times.)</p>\n\n<p>After googling some, I found that <strong>If i can precompile perl regex then execution time may decrease.</strong></p>\n\n<p>Can someone please help in modifying perl regex so that it takes less time?\nOr any better solution?</p>\n\n<pre><code>sub some_func {\n    my $var1=shift;\n    my $var2=shift;\n\n    if (!($var1 =~ /^UTF-?8$/)) {\n         print \"Do something important\\n\";\n    }\n    if ($var2 =~ /$some_global_string/i) {\n         print \"Do something important\\n\";\n    }\n}\n</code></pre>\n\n<p>E.g. $var2 can be </p>\n\n<pre><code>\"character string with maximum 4096 character, Including html character as string\"\n</code></pre>\n\n<p>and $some_global_string can be </p>\n\n<pre><code>\"string as $var2 but max length of 256 character\"`\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 1, "creation_date": 1540287730, "post_id": 52945807, "comment_id": 92799807, "body": "<code>Perl -V</code> will show you the compile time options, amongst other things. look to see if PERL_IMPLICIT_CONTEXT is listed"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1540288158, "post_id": 52945807, "comment_id": 92800129, "body": "@JGNI <code>perl -V | grep -P &#39;(?i:IMPLICIT)&#39;</code> gives no output. Still, how can I be sure if this means my Perl has not been built with <code>PERL_IMPLICIT_CONTEXT</code> or if the build option is simply not picked up by <code>perl -V</code>?"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1540288271, "post_id": 52945807, "comment_id": 92800206, "body": "To build Perl with <code>PERL_IMPLICIT_CONTEXT</code>, maybe <code>.&#47;Configure -Accflags=&quot;-DPERL_IMPLICIT_CONTEXT&quot; &amp;&amp; make</code>?"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1540288804, "post_id": 52945807, "comment_id": 92800557, "body": "And then, <code>perl -V | grep IMPLICIT</code> shows that Perl was compiled with <code>-DPERL_IMPLICIT_CONTEXT</code>."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1540289103, "post_id": 52945807, "comment_id": 92800722, "body": "@Dada Thanks, I will test it now"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1540289931, "post_id": 52945807, "comment_id": 92801276, "body": "FYI, how I found that: I went to Perl5 sources and greped <code>PERL_IMPLICIT_CONTEXT</code>, which appeared to be a cpp macro (since there are some <code>#ifdef PERL_IMPLICIT_CONTEXT</code>). I then googled <code>perl set build options</code>. Second result was <code>https:&#47;&#47;metacpan.org&#47;pod&#47;distribution&#47;perl&#47;INSTALL</code>, and I saw <code>-Accflags=-D...</code> there. <code>-D</code> defines a cpp macro, <code>ccflags</code> sounds like a reasonable name for c flags, so this seemed like a good option. Then I tested it."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1540290375, "post_id": 52945807, "comment_id": 92801561, "body": "@Dada I tried now: <code>perlbrew install perl-5.29.0 --as=5.29.0ic --Accflags=&quot;-DPERL_IMPLICIT_CONTEXT&quot;; perlbrew switch 5.29.0ic; perl -V | grep IMPLICIT</code> and it still gives no output.."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1540290843, "post_id": 52945807, "comment_id": 92801859, "body": "@Dada Ok, found the mistake: The <code>A</code> option to <code>perlbrew</code> should be passed with a single dash (not double) <code>-Accflags=&quot;-DPERL_IMPLICIT_CONTEXT&quot;</code> and it works fine now!"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1540307439, "post_id": 52945807, "comment_id": 92812581, "body": "@H&#229;konH&#230;gland Feel free to write an answer ;) (I won&#39;t)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1540307666, "post_id": 52945807, "comment_id": 92812718, "body": "<code>. Configure ... -DPERL_IMPLICIT_CONTEXT</code> isn&#39;t sufficient?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1540331150, "post_id": 52945807, "comment_id": 92823838, "body": "Normally you don&#39;t define <code>PERL_IMPLICIT_CONTEXT</code> manually, you just build your perl with or without thread support. A perl without thread support won&#39;t pass a context argument, a perl with thread support will use an initial context argument. If your extension builds with both threaded and unthreaded perls, it handles contexts correctly."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 4, "last_activity_date": 1540323896, "creation_date": 1540323896, "answer_id": 52956758, "question_id": 52945807, "link": "https://stackoverflow.com/questions/52945807/how-to-build-perl-with-perl-implicit-context/52956758#52956758", "title": "How to build Perl with PERL_IMPLICIT_CONTEXT?", "body": "<p>As noted by @Dada, there is information in the <a href=\"https://metacpan.org/pod/release/XSAWYERX/perl-5.28.0/INSTALL\" rel=\"nofollow noreferrer\">Build and Installation guide for perl 5</a> on how to build Perl with <code>PERL_IMPLICIT_CONTEXT</code>. The <code>-A</code> option is used with the <code>Configure</code> script to add<br> <code>-DPERL_IMPLICIT_CONTEXT</code> to  <code>ccflags</code>. For example, to build 5.28.0 with <code>PERL_IMPLICIT_CONTEXT</code> and install in <code>$HOME/localperl</code>:</p>\n\n<pre><code> wget https://www.cpan.org/src/5.0/perl-5.28.0.tar.gz\n tar -xzf perl-5.28.0.tar.gz\n cd perl-5.28.0\n ./Configure -des -Dprefix=$HOME/localperl -Accflags=\"-DPERL_IMPLICIT_CONTEXT\"\n make\n make test\n make install\n</code></pre>\n\n<p>alternatively you can use <code>perlbrew</code>:</p>\n\n<pre><code>perlbrew install perl-5.28.0 --as=5.28.0ic -Accflags=\"-DPERL_IMPLICIT_CONTEXT\"\nperlbrew switch 5.28.0ic\n</code></pre>\n\n<p>The second part of the question: How to check if an installed Perl has been compiled with PERL_IMPLICIT_CONTEXT? As noted by @JGNI, <code>perl -V</code> can be used:</p>\n\n<pre><code>$ perl -V | grep PERL_IMPLICIT_CONTEXT\n    config_args='-de -Dprefix=/home/hakon/perlbrew/perls/5.28.0ic -Dusedevel -Accflags=-DPERL_IMPLICIT_CONTEXT -Aeval:scriptdir=/home/hakon/perlbrew/perls/5.28.0ic/bin'\n    ccflags ='-DPERL_IMPLICIT_CONTEXT -fwrapv -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64'\n    cppflags='-DPERL_IMPLICIT_CONTEXT -fwrapv -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include'\n    PERL_IMPLICIT_CONTEXT\n</code></pre>\n\n<p>Alternatively, you can access the Perl configuration information using the <a href=\"https://metacpan.org/pod/Config\" rel=\"nofollow noreferrer\">Config</a> module.</p>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 52956758, "answer_count": 1, "score": 2, "last_activity_date": 1540323896, "creation_date": 1540287396, "question_id": 52945807, "link": "https://stackoverflow.com/questions/52945807/how-to-build-perl-with-perl-implicit-context", "title": "How to build Perl with PERL_IMPLICIT_CONTEXT?", "body": "<p>According to <a href=\"https://perldoc.perl.org/perlguts.html\" rel=\"nofollow noreferrer\">perlguts</a>:</p>\n\n<blockquote>\n  <p>When Perl is built with PERL_IMPLICIT_CONTEXT, extensions that call\n  any functions in the Perl API will need to pass the initial context\n  argument somehow. The kicker is that you will need to write it in such\n  a way that the extension still compiles when Perl hasn't been built\n  with PERL_IMPLICIT_CONTEXT enabled.</p>\n</blockquote>\n\n<p>How can I build Perl with <code>PERL_IMPLICIT_CONTEXT</code>? And how can I later check if an installed Perl has been compiled with <code>PERL_IMPLICIT_CONTEXT</code>?</p>\n"}, {"tags": ["perl", "verilog"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540278726, "post_id": 52943076, "comment_id": 92794500, "body": "The shown code is invalid -- there are four (4) <code>&#47;</code>, which is illegal syntax. Then the <code>~</code> is unmotivated, and you capture an optional comma (possibly repeated), which makes no sense for the previous problem description. Can you please be careful and show your actual code?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1540280231, "post_id": 52943076, "comment_id": 92795302, "body": "Also, CPAN has several Verilog aware distributions, can&#39;t any of them help you?"}, {"owner": {"reputation": 5, "user_id": 10305571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pHQ6Eh3WrkU/AAAAAAAAAAI/AAAAAAAAAGo/7I1BtePPSAE/photo.jpg?sz=128", "display_name": "shanuj garg", "link": "https://stackoverflow.com/users/10305571/shanuj-garg"}, "edited": false, "score": 0, "creation_date": 1540281508, "post_id": 52943076, "comment_id": 92795936, "body": "I am a beginner so don&#39;t have much information about CPAN verilog options,"}, {"owner": {"reputation": 5, "user_id": 10305571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pHQ6Eh3WrkU/AAAAAAAAAAI/AAAAAAAAAGo/7I1BtePPSAE/photo.jpg?sz=128", "display_name": "shanuj garg", "link": "https://stackoverflow.com/users/10305571/shanuj-garg"}, "edited": false, "score": 0, "creation_date": 1540281556, "post_id": 52943076, "comment_id": 92795961, "body": "I have pasted the full code here, please have a look at it now.@zdim"}, {"owner": {"reputation": 5590, "user_id": 3535598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XmZch.png?s=128&g=1", "display_name": "Oldfart", "link": "https://stackoverflow.com/users/3535598/oldfart"}, "edited": false, "score": 0, "creation_date": 1540285138, "post_id": 52943076, "comment_id": 92798111, "body": "Your output is not Verilog syntax, you semicolons are incorrect. It should be <code>ID ID ( .ID(ID), .ID(ID), .. .ID(ID) );</code> I wrote a C program which does this. It is more complex then a simple perl expression, you need a real parser."}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1540304689, "post_id": 52943076, "comment_id": 92810787, "body": "do you have an input example and desired output?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540315650, "post_id": 52943076, "comment_id": 92817101, "body": "Thank you, that is much better as now people can see what you are doing. Can you also add a clear sample of typical input and the desired output for it? (What you show in the beginning is unclear.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540315752, "post_id": 52943076, "comment_id": 92817157, "body": "Notes: (1) To add to array in Perl we have: <code>push @code, $line;</code> (2) To iterate over elements of an array there is no need to involve index, but: <code>foreach my $elem (@ary) { ... }</code> (unless you need the index inside of the loop, but it seems that you don&#39;t)"}], "owner": {"reputation": 5, "user_id": 10305571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pHQ6Eh3WrkU/AAAAAAAAAAI/AAAAAAAAAGo/7I1BtePPSAE/photo.jpg?sz=128", "display_name": "shanuj garg", "link": "https://stackoverflow.com/users/10305571/shanuj-garg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540315534, "creation_date": 1540278405, "last_edit_date": 1540315534, "question_id": 52943076, "link": "https://stackoverflow.com/questions/52943076/usage-of-perl-find-and-replacement-regex-for-a-verilog-netlist", "title": "usage of perl find and replacement (regex) for a verilog netlist", "body": "<p>I am trying to develop a script which takes input of a verilog netlist and create a testbench for that, so when we connect test-bench to the main module by name we do somethin like this,</p>\n\n<pre><code>.a(a); .ext(ext);    etc etc.\n</code></pre>\n\n<p>now I have like 120 inputs for a bigger block like</p>\n\n<pre><code> `in1, in2... and some arrays like [31:0] ext; etc\n</code></pre>\n\n<p>I want to match the pattern of .in1; and replace it as .in1(in1); </p>\n\n<p>I am trying   </p>\n\n<pre><code> s/^\\s+\\.(.*)/\\.$1\\($1\\)/g;\n</code></pre>\n\n<p>so it will check a string starting with space characters, followed by a single '.' character and then all characters, and replace it with the pattern shown in the statement line,</p>\n\n<p>the complete code as follows:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $filename = shift;\nopen (my $fh , \"&lt;\" , $filename) or die $!; \nopen (my $pr , \"&gt;\" , \"D:/dump/testbench.v\") or die $!; \n\nmy @code;\nwhile (my $line = &lt;$fh&gt;)\n{   \n    chomp $line;\n    @code = (@code, $line);\n}   \n#foreach my $i (0..$#code)\n#{  \n#print \"$code[$i]\\n\";\n#}  \n#   \n\nforeach my $j (0..$#code)\n{   \n    if ($code[$j] =~ /^\\s+\\..*/)\n    {   \n        print \"$code[$j]\\n\";\n        $code[$j] =~ s/^\\s+\\.(.*)/\\.$1\\($1\\)/g;\n        print \"$code[$j]\\n\";\n    }   \n}   \n\nforeach my $k (0..$#code)\n{   \n    print $pr \"$code[$k]\\n\";\n}   \nclose $pr;\n</code></pre>\n\n<p>The replacement pattern does something like <code>.in1;(in1;)</code> instead of <code>.in1(in1);</code> and <code>.[31:0] ext;([31:0] ext;)</code>.</p>\n\n<p>how to do it in better way? </p>\n"}, {"tags": ["windows", "powershell", "perl", "unicode"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1540520036, "last_edit_date": 1540520036, "creation_date": 1540311896, "answer_id": 52953751, "question_id": 52941626, "link": "https://stackoverflow.com/questions/52941626/strawberry-perl-where-are-encoding-conversions-done-by-default/52953751#52953751", "title": "Strawberry Perl -- where are encoding conversions done by default?", "body": "<p><code>qx``</code> performs no conversion. The command is expected to be encoded using the system's ANSI code page as it will be passed unmodified to <code>CreateProcessA</code> or similar.<sup>[1]</sup></p>\n\n<pre><code>use Encode qw( encode );\nuse Win32  qw( );\n\nmy $cmd_ansi = encode(\"cp\".Win32::GetACP(), $cmd);\n`$cmd_ansi`\n</code></pre>\n\n<p>Of course, if the command contains only ASCII characters, encoding is moot.</p>\n\n<hr>\n\n<p>Similarly, the values in <code>@ARGV</code> have not been decoded. They are received from the system encoded using the system's ANSI code page.</p>\n\n<pre><code>use Encode qw( decode );\nuse Win32  qw( );\n\nmy @decode_argv = map { decode(\"cp\".Win32::GetACP(), $_) } @ARGV;\n</code></pre>\n\n<p>Of course, if the arguments contain only ASCII characters, decoding is moot.</p>\n\n<hr>\n\n<p>By default, file handles do not perform any encoding or decoding except for CRLF &hArr; LF conversion (CRLF &rArr; LF on read, LF &rArr; CRLF on write). You are expected to provide a string of bytes (a string of characters with values in 0..255) to <code>print</code>/<code>printf</code>/<code>say</code><sup>[1]</sup>, and you will receive a string of bytes from the <code>readline</code>/<code>read</code>/<code>readpipe</code>.</p>\n\n<p>You may provide an encoding/decoding layer when opening the file.</p>\n\n<pre><code>open(my $fh, '&gt;:encoding(UTF-8)', $qfn)\n</code></pre>\n\n<p>You may provide an default encoding/decoding layer via the <a href=\"http://search.cpan.org/perldoc?open\" rel=\"nofollow noreferrer\">open</a> pragma.</p>\n\n<pre><code>use open ':encoding(UTF-8)';\nopen(my $fh, '&gt;', $qfn)\n</code></pre>\n\n<p>In both cases, you will now need to provide a string of Unicode Code Points to <code>print</code>/<code>printf</code>/<code>say</code>, and you will similarly receive a string of bytes from the <code>readline</code>/<code>read</code>/<code>readpipe</code>.</p>\n\n<p>I'm not sure what's best for STDIN/STDOUT/STDERR, but you could start with the following:</p>\n\n<pre><code>use Win32 qw( );\nmy ($in_enc, $out_enc);\nBEGIN {\n   $in_enc  = \"cp\".Win32::GetConsoleCP();\n   $out_enc = \"cp\".Win32::GetConsoleOutputCP();\n   binmode STDIN,  \":encoding($in_enc)\";\n   binmode STDOUT, \":encoding($out_enc)\";\n   binmode STDERR, \":encoding($out_enc)\";\n}\n</code></pre>\n\n<hr>\n\n<p>You should use UTF-16le rather than UCS-2le.</p>\n\n<hr>\n\n<ol>\n<li>If you provide a string that contains non-bytes (characters outside of 0..255), Perl will assumes you meant to encode the string using UTF-8. It will warn (\"Wide character\") and encode the string using utf8.</li>\n</ol>\n"}], "owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 52953751, "answer_count": 1, "score": 2, "last_activity_date": 1540520036, "creation_date": 1540271853, "question_id": 52941626, "link": "https://stackoverflow.com/questions/52941626/strawberry-perl-where-are-encoding-conversions-done-by-default", "title": "Strawberry Perl -- where are encoding conversions done by default?", "body": "<p>Basically, I wrote a Perl script that creates an encoded command for Powershell and tries to run it. I had to explicitly convert the command string to utf-16 before base64-encoding it. I'm wondering why that's <strong>all</strong> I had to do get the script to work. What conversions is Perl on Windows*  performing by default in the run of an \"ordinary\" program that interacts with the console and perhaps the file system? For instance, is argv converted? Is stdin/stdout converted? Does file IO go through a conversion?</p>\n\n<p>\u2731 in particular, the Strawberry Perl distribution in case ActivePerl does something different</p>\n\n<hr>\n\n<p>I'm trying to write a Perl script that calls many PowerShell fragments and depends on Strawberry Perl distribution.</p>\n\n<p>PowerShell, rather conveniently, has an <code>-encodedCommand</code> flag that accepts a base64-encoded string and then processes it. This is helpful for avoiding quoting-related problems.</p>\n\n<p>I tried the Simplest Thing That Could Possibly Work.</p>\n\n<pre><code>// powersheller.pl\n\n#! /usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse MIME::Base64;\nuse Encode qw/encode decode/;\n\nuse vars ('$powershell_command');\n\nsub run_powershell_fragment {\n    my ($contents) = @_;\n    my $encoded = encode_base64($contents);\n    printf \"encoded: %s\\n\", $encoded;\n    return `powershell.exe -noprofile -encodedCommand $encoded`;\n}\n\nprintf \"%s\\n---\\n\", run_powershell_fragment($powershell_command);\n\nBEGIN {\n$powershell_command = &lt;&lt;EOF\necho \"hi\"   \nEOF\n}\n</code></pre>\n\n<p>And ran it. Here's the output of the ... standard output channels (?) from running the perl script in the powershell window.</p>\n\n<pre><code>PS C\\...&gt; perl .\\powersheller.pl\nencoded: ZWNobyAiaGkiCQo=\n\nRedundant argument in printf at .\\powersheller.pl line 18.\n?????? : The term '??????' is not recognized as the name of a cmdlet, function, script file, or operable program.\n\n---\n</code></pre>\n\n<p>This looked like an encoding issue. I guessed that Perl was using something resembling utf-8 by default and powershell was expecting utf16-le or similar.</p>\n\n<pre><code>sub run_powershell_fragment {\n    my ($contents) = @_;\n    my $utf16_le_contents = encode(\"utf-16le\", $contents);\n    my $encoded = encode_base64($utf16_le_contents);\n    printf \"encoded: %s\\n\", $encoded;\n    return `powershell.exe -noprofile -encodedCommand $encoded`;\n}\n</code></pre>\n\n<p>Technically, using <code>\"ucs-2le\"</code> also works. I don't know which is appropriate.</p>\n\n<p>Anyway, all together, the program works as expected with the extra conversion inserted.</p>\n\n<pre><code>PS C:\\...&gt; perl .\\powersheller.pl\nencoded: ZQBjAGgAbwAgACIAaABpACIACQAKAA==\n\nhi\n\n---\n</code></pre>\n\n<p>Why was this all that I needed to do? Is Perl handling conversions related to argv and stdout &amp;c?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1540271476, "post_id": 52941535, "comment_id": 92791537, "body": "Use any of the same methods used to make sure only one script runs, but include the userid in the name of the locked resources"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1540285761, "post_id": 52943612, "comment_id": 92798481, "body": "I would be wary of using the process list - it&#39;s all too easy to have namespace clashes that cause the lock to &#39;trigger&#39;."}], "tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": false, "score": 0, "last_activity_date": 1540280382, "creation_date": 1540280382, "answer_id": 52943612, "question_id": 52941535, "link": "https://stackoverflow.com/questions/52941535/would-like-to-run-multiple-instances-of-the-same-perl-script-but-with-only-one-i/52943612#52943612", "title": "Would like to run multiple instances of the same Perl script but with only one instance of an argument", "body": "<p>Shell command to get PID of instance with userid=N:\n<code>ps wax | grep 'batch.pl' | grep \"userid=N\" | grep -v grep | perl -l12 -ane 'print $F[0]'</code></p>\n"}], "owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540280382, "creation_date": 1540271250, "last_edit_date": 1540272389, "question_id": 52941535, "link": "https://stackoverflow.com/questions/52941535/would-like-to-run-multiple-instances-of-the-same-perl-script-but-with-only-one-i", "title": "Would like to run multiple instances of the same Perl script but with only one instance of an argument", "body": "<p>So I realize that I can run multiple instance of the same Perl script.  But let's say every instance of that Perl script gets passed an argument, i.e. \n<code>perl batch.pl userid=3</code></p>\n\n<p>Is there a way to check if there's already an instance of that script running with the same userid and therefore not run another instance for that userid?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["excel", "perl"], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 1, "last_activity_date": 1540249786, "creation_date": 1540249786, "answer_id": 52938880, "question_id": 52938040, "link": "https://stackoverflow.com/questions/52938040/cant-call-method-worksheet-on-an-undefined-value/52938880#52938880", "title": "Can&#39;t call method Worksheet on an undefined value", "body": "<p>Parse returns undef on error and you are not checking for that.  Try:</p>\n\n<pre><code>my $workbook_orig   = $parser-&gt;Parse($excel_file_name);\nunless ($workbook_orig) {\n    die \"Got error \" . $parser-&gt;error() . \" parsing spreadsheet.\";\n}\n</code></pre>\n\n<p>to see what error it is getting so you can decide how to fix it.</p>\n"}], "owner": {"reputation": 59, "user_id": 10377474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066fbba87b33a9807ecbfd2a393f8afa?s=128&d=identicon&r=PG&f=1", "display_name": "JohnEgg", "link": "https://stackoverflow.com/users/10377474/johnegg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1540249786, "creation_date": 1540243905, "question_id": 52938040, "link": "https://stackoverflow.com/questions/52938040/cant-call-method-worksheet-on-an-undefined-value", "title": "Can&#39;t call method Worksheet on an undefined value", "body": "<pre><code>use strict;\nuse warnings;\n\nuse Spreadsheet::ParseExcel;\nuse Spreadsheet::ParseExcel::SaveParser;\n\nmy $excel_file_name = $ARGV[0];\nmy $parser          = Spreadsheet::ParseExcel::SaveParser-&gt;new();\nmy $workbook_orig   = $parser-&gt;Parse($excel_file_name);\n\n# We will edit column 7 of the first worksheet.\nmy $worksheet = $workbook_orig-&gt;worksheet(0);\nmy $EDIT_COL = 6;\n\nmy ($row_min, $row_max) = $worksheet-&gt;row_range();\nfor my $r ($row_min .. $row_max){\n    my $cell = $worksheet-&gt;get_cell($r, $EDIT_COL);\n    unless (defined $cell){\n        next; # Modify as needed to handle blank cells.\n    }\n    my $val = $cell-&gt;value . '_append_text';\n    $worksheet-&gt;AddCell( $r, $EDIT_COL, $val, $cell-&gt;{FormatNo} );\n}\n\n# You can save the modifications to the same file, but when\n# you are learning, it's safer to write to a different file.\n$excel_file_name =~ s/\\.xls$/_new.xls/;\n$workbook_orig-&gt;SaveAs($excel_file_name);\n</code></pre>\n\n<p>My implementation above gives me the error \"Can't call method Worksheet on an undefined value\" on the line below. I am trying to read the excel file and parse the file so that I may add additonal content to it later. I am doing this using the ParseExcel module, if there are any better ways to go about this or any guidance on why I am receiving the error that I am, any help would be greatly appreciated. Thanks.</p>\n\n<pre><code>my $worksheet = $workbook_orig-&gt;worksheet(0);\n</code></pre>\n"}, {"tags": ["mysql", "perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1540245102, "post_id": 52938213, "comment_id": 92785606, "body": "I don&#39;t have MySQL handy to test. Make sure to test with 3,000,000,000"}, {"owner": {"reputation": 197, "user_id": 2280349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab88466841e97b4fbae94b85fd2259af?s=128&d=identicon&r=PG&f=1", "display_name": "TomWitt2", "link": "https://stackoverflow.com/users/2280349/tomwitt2"}, "edited": false, "score": 0, "creation_date": 1540263563, "post_id": 52938213, "comment_id": 92789788, "body": "Thank you (again) @ikegami!  This worked flawlessly! <code>select CAST(CHAR(     ( foo_val_integer &gt;&gt;  0 ) &amp; 0xFF,     ( foo_val_integer &gt;&gt;  8 ) &amp; 0xFF,     ( foo_val_integer &gt;&gt; 16 ) &amp; 0xFF,     ( foo_val_integer &gt;&gt; 24 ) &amp; 0xFF ) as binary(4)) from bar_table into outfile &#39;packed_int_test_file_04&#39; FIELDS TERMINATED BY &#39;&#39; ENCLOSED BY &#39;&#39; ESCAPED BY &#39;&#39; LINES TERMINATED BY &#39;&#39; STARTING BY &#39;&#39; </code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1540245321, "last_edit_date": 1540245321, "creation_date": 1540244919, "answer_id": 52938213, "question_id": 52937471, "link": "https://stackoverflow.com/questions/52937471/can-mysql-output-the-equivalent-of-a-perl-packed-integer/52938213#52938213", "title": "Can MySQL output the equivalent of a perl packed integer?", "body": "<p>The format expected by <code>unpack 'I'</code> varies from build to build. I believe you are trying to obtain one of the following formats:</p>\n\n<ul>\n<li><p>32-bit big-endian unsigned integer (e.g. <code>0x12345678</code> packed as <code>12 34 56 78</code>)</p>\n\n<p>Unpacked in a portable manner using</p>\n\n<pre><code>unpack 'L&gt;'\n</code></pre>\n\n<p>Packed using</p>\n\n<pre><code>CHAR(\n    ( i &gt;&gt; 24 ) &amp; 0xFF,\n    ( i &gt;&gt; 16 ) &amp; 0xFF,\n    ( i &gt;&gt;  8 ) &amp; 0xFF,\n    ( i &gt;&gt;  0 ) &amp; 0xFF\n) \n</code></pre></li>\n<li><p>32-bit little-endian unsigned integer (e.g. <code>0x12345678</code> packed as <code>78 56 34 12</code>)</p>\n\n<p>Unpacked in a portable manner using</p>\n\n<pre><code>unpack 'L&lt;'\n</code></pre>\n\n<p>Packed using</p>\n\n<pre><code>CHAR(\n    ( i &gt;&gt;  0 ) &amp; 0xFF,\n    ( i &gt;&gt;  8 ) &amp; 0xFF,\n    ( i &gt;&gt; 16 ) &amp; 0xFF,\n    ( i &gt;&gt; 24 ) &amp; 0xFF\n) \n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 197, "user_id": 2280349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab88466841e97b4fbae94b85fd2259af?s=128&d=identicon&r=PG&f=1", "display_name": "TomWitt2", "link": "https://stackoverflow.com/users/2280349/tomwitt2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 52938213, "answer_count": 1, "score": 0, "last_activity_date": 1540245321, "creation_date": 1540240861, "question_id": 52937471, "link": "https://stackoverflow.com/questions/52937471/can-mysql-output-the-equivalent-of-a-perl-packed-integer", "title": "Can MySQL output the equivalent of a perl packed integer?", "body": "<p>I'm trying to pull data from a column in MySQL table directly into a binary file which is a series of packed unsigned integers (4 bytes each) which can be read using the perl unpack function. A silly example of how I might read this data is</p>\n\n<pre><code>#!/usr/bin/env perl\nmy $input_file = 'packed_int_test_file_04';\nopen my $fh, '&lt;:raw', $input_file\n  or die \"Couldn't open $input_file for binary read: $!\";\n\nmy $position = 0;\nmy $four_byte_buffer;\nwhile ( read($fh, $four_byte_buffer, 4) ) {\n    my $foo_val  = unpack(\"I\", $four_byte_buffer);\n    print(\"Foo val at position $position is $foo_val \\n\");\n    $position++;\n}\n\n# OUTPUT:\n# Foo val at position 0 is 1 \n# Foo val at position 1 is 2 \n# Foo val at position 2 is 3 \n# Foo val at position 3 is 4 \n# Foo val at position 4 is 5 \n# Foo val at position 5 is 6 \n</code></pre>\n\n<p>I'm hoping I can generate the data file directly from MySQL with something like the following (but I'm having no luck)</p>\n\n<pre><code>select (cast foo_val_integer as binary(4)) \nfrom bar_table\ninto outfile 'packed_int_test_file_04'\nFIELDS terminated by ''\nLINES terminated by '';\n</code></pre>\n\n<p>Is there a way to have MySQL directly output a sequence of 4 byte packed unsigned integers into a binary file which could be read by perl in this way?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1540237382, "post_id": 52936640, "comment_id": 92782433, "body": "<a href=\"https://stackoverflow.com/q/50356241/1030675\">stackoverflow.com/q/50356241/1030675</a>"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1540237530, "post_id": 52936640, "comment_id": 92782523, "body": "<code>m&#47;(?&lt;![S]TDIN\\.)json$&#47;i</code> is a workaround"}, {"owner": {"reputation": 9288, "user_id": 671943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4HS79.jpg?s=128&g=1", "display_name": "Rooster", "link": "https://stackoverflow.com/users/671943/rooster"}, "edited": false, "score": 0, "creation_date": 1540238111, "post_id": 52936640, "comment_id": 92782823, "body": "Thanks for pointing out that question!"}], "owner": {"reputation": 9288, "user_id": 671943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4HS79.jpg?s=128&g=1", "display_name": "Rooster", "link": "https://stackoverflow.com/users/671943/rooster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1540237484, "answer_count": 0, "score": 1, "last_activity_date": 1540237144, "creation_date": 1540237144, "question_id": 52936640, "link": "https://stackoverflow.com/questions/52936640/how-to-use-the-literal-string-stdin-in-negative-lookbehind-in-perl", "closed_reason": "Duplicate", "title": "How to use the literal string &quot;STDIN&quot; in negative lookbehind in perl?", "body": "<p>I'm trying to use a negative lookbehind to filter out some matches of a few strings.  Curiously, it seems if I use the string \"STDIN\", under the hood the code is actually trying to use the handle .</p>\n\n<p>Example:</p>\n\n<pre><code>perl -e 'use strict;  print \"/some/file/path/STDIN.json\" =~ m/(?&lt;!STDIN\\.)json$/i;'\n</code></pre>\n\n<p>Throws:</p>\n\n<pre><code>Variable length lookbehind not implemented in regex m/(?&lt;!STDIN\\.)json$/ at -e line 1.\n</code></pre>\n\n<p>But if I get rid of the leading 'S' of 'STDIN', the interpreter doesnt complain as expected.</p>\n\n<pre><code>perl -e 'use strict;  print \"/some/file/path/STDIN.json\" =~ m/(?&lt;!TDIN\\.)json$/i;'\n</code></pre>\n\n<p>The interpreter doesnt complain.</p>\n\n<p>Is there some special way to escape \"STDIN\" that I need to do?  Or is there something simple I'm missing?  </p>\n\n<p>For reference, I'm using perl 5.22.2</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540231859, "post_id": 52935209, "comment_id": 92779764, "body": "What output do you get? What do you expect?"}, {"owner": {"reputation": 1, "user_id": 6254413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36e31bc95231b452b72b0720833cbb14?s=128&d=identicon&r=PG&f=1", "display_name": "Kumar2249", "link": "https://stackoverflow.com/users/6254413/kumar2249"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540302836, "post_id": 52935209, "comment_id": 92809548, "body": "I get output &#39;user logged in&#39; when I pass correct creds. I would like to see the output message when login failed using $ftp-&gt;message; I know if using &#39;if else&#39; conditions I am able get the message when login failed using following changes. I want to know why its not able to print when failed using $ftp-&gt;message       if       ($ftp-&gt;login($user, $password))        {          print &quot;\\n&quot;;        } else         {          $errMsg = &#39;ftp &#39;.$ftp-&gt;message;          goto ERROROUT;         }  $ftp-&gt;quit;  exit 0;  ERROROUT: \tprintf $errMsg; \texit 1;"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6254413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36e31bc95231b452b72b0720833cbb14?s=128&d=identicon&r=PG&f=1", "display_name": "Kumar2249", "link": "https://stackoverflow.com/users/6254413/kumar2249"}, "edited": false, "score": 0, "creation_date": 1540301119, "post_id": 52935919, "comment_id": 92808362, "body": "Ok, I missed to post part of my problem. I am using an interface(I am kicking of a job to call the FTP perl script). When I place the code in debug mode, I am able to see the &#39;authentication failed&#39; on AIX server. The interface job is placed on windows server but it is using AIX agent to call the FTP perl script. The job has output window which is able to capture details of the job. Coming to original question, I am able to see the successful message on the output pane but not when the authentication failed."}, {"owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "reply_to_user": {"reputation": 1, "user_id": 6254413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36e31bc95231b452b72b0720833cbb14?s=128&d=identicon&r=PG&f=1", "display_name": "Kumar2249", "link": "https://stackoverflow.com/users/6254413/kumar2249"}, "edited": false, "score": 0, "creation_date": 1540317549, "post_id": 52935919, "comment_id": 92818038, "body": "Without knowing your setup, if you see the success message but not the failure, I&#39;d suspect it has to do with the die() call and what the layers in between do on the script returning an error code.  Why don&#39;t you try switching die to a print &quot;ERROR:...&quot; -- then see if you get the error messages.   Ideally, the middle layers/interface should be able to capture script error return codes and handle them properly so you know what happened.  You could look into switching die with some non-zero exit codes, then your interface should be able to report the right message based on the code."}, {"owner": {"reputation": 1, "user_id": 6254413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36e31bc95231b452b72b0720833cbb14?s=128&d=identicon&r=PG&f=1", "display_name": "Kumar2249", "link": "https://stackoverflow.com/users/6254413/kumar2249"}, "edited": false, "score": 0, "creation_date": 1540326937, "post_id": 52935919, "comment_id": 92822381, "body": "so instead of die call, I have switched to &#39;if else&#39; with print error and I am able to view the error message in job output pane.if   ($ftp = Net::FTP-&gt;new($ftphostname, Timeout =&gt; 600))      {       print &quot;$ftphostname server found\\n&quot;;      } else       {      $errMsg= $ftphostname.&#39; server not found&#39;;      goto ERROROUT;       }  if       ($ftp-&gt;login($user, $password))        {          print &quot;ftp user &#39;$user&#39; logged in successfully\\n&quot;;        } else         {          $errMsg = &#39;ftp &#39;.$ftp-&gt;message;          goto ERROROUT;         }ERROROUT: \tprintf $errMsg; \texit 1;"}], "tags": [], "owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "is_accepted": false, "score": 0, "last_activity_date": 1540234128, "creation_date": 1540234128, "answer_id": 52935919, "question_id": 52935209, "link": "https://stackoverflow.com/questions/52935209/print-perl-ftp-message/52935919#52935919", "title": "Print perl FTP message", "body": "<p>Adding an example of a real FTP site, I could see the following message:</p>\n\n<pre><code>OK. Current restricted directory is /\n</code></pre>\n\n<p>When corrupting the password, I got:</p>\n\n<pre><code>Can't log dlpuser@dlptest.com: Login authentication failed\n</code></pre>\n\n<p>Are you seeing something else?</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse Net::FTP;\nuse Sys::Hostname;\nmy $errMsg;\n# See https://dlptest.com/ftp-test/\n# There are other ftp test sites out there.\nmy $user = \"dlpuser\\@dlptest.com\";\nmy $password = \"e73jzTRTNqCN9PYAAjjn\";\nmy $ftphostname = \"ftp.dlptest.com\";\n\nmy $ftp = Net::FTP-&gt;new($ftphostname, Timeout =&gt; 6) or die \"Can't open $ftphostname\\n\";\n$ftp-&gt;login($user, $password) or die \"Can't log $user: \", $ftp-&gt;message;\nprintf $ftp-&gt;message;\n$ftp-&gt;quit;\nexit 0;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6254413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36e31bc95231b452b72b0720833cbb14?s=128&d=identicon&r=PG&f=1", "display_name": "Kumar2249", "link": "https://stackoverflow.com/users/6254413/kumar2249"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540234128, "creation_date": 1540231349, "last_edit_date": 1540231608, "question_id": 52935209, "link": "https://stackoverflow.com/questions/52935209/print-perl-ftp-message", "title": "Print perl FTP message", "body": "<p>I am trying to print the ftp message.I am able to get the message when the login got successful but not on when user got failed to login. I am not sure what is wrong in the code.</p>\n\n<pre><code>use strict;\nuse Net::FTP;\nuse Sys::Hostname;\nmy $errMsg;\nmy $user = \"test\";\nmy $password = \"test\";\nmy $ftphostname = \"test\";\n\nmy $ftp = Net::FTP-&gt;new($ftphostname, Timeout =&gt; 600) or die \"Can't open $ftphostname\\n\";\n$ftp-&gt;login($user, $password) or die \"Can't log $user: \", $ftp-&gt;message;\nPrintf $ftp-&gt;message;\n$ftp-&gt;quit;\nexit 0;\n</code></pre>\n"}, {"tags": ["perl", "plot"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1540227635, "post_id": 52934069, "comment_id": 92777807, "body": "What&#39;s the error? (See the docs for how to display a specific one)"}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1540230603, "creation_date": 1540230603, "answer_id": 52935002, "question_id": 52934069, "link": "https://stackoverflow.com/questions/52934069/perl-plotting-two-separate-array/52935002#52935002", "title": "perl: Plotting two separate array", "body": "<p>The <code>GD::Graph::plot</code> method <a href=\"https://metacpan.org/source/RUZ/GDGraph-1.54/Graph/axestype.pm#L223\" rel=\"nofollow noreferrer\">takes a single argument</a>. The call syntax should be something like</p>\n\n<pre><code>$graph-&gt;plot( [ \\@nn, \\@V_list ] )\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>$graph-&gt;plot( \\@nn, \\@V_list )\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 9104399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daabc05469bdc596944f1c1d07d636ef?s=128&d=identicon&r=PG&f=1", "display_name": "Alam ", "link": "https://stackoverflow.com/users/9104399/alam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540230603, "creation_date": 1540226680, "question_id": 52934069, "link": "https://stackoverflow.com/questions/52934069/perl-plotting-two-separate-array", "title": "perl: Plotting two separate array", "body": "<p>I have one list called <code>@V_list</code>. I created another list that has the same size of the <code>@V_list</code> namely <code>@nn</code>. Now I want to make a plot <code>@nn</code>vs<code>@V_list</code>. This is the code I used but I get an error in the <code>my $gd = $graph-&gt;plot(\\@nn,\\@V_list) or die \"Can't plot graph\";</code>. How to get it done?</p>\n\n<pre><code>use GD;      \nuse GD::Graph::lines;\n\n@V_list=(1,2,1,2);\nprint \"@V_list\\n\";\n\n$size = @V_list;\n@nn=1..$size;\nprint \"@nn\\n\";\n\n\nmy $graph = new GD::Graph::lines( );\nmy $gd = $graph-&gt;plot(\\@nn,\\@V_list) or die \"Can't plot graph\";\n\nopen(IMG, '&gt;file.png') or die $!;\nbinmode IMG;\nprint IMG $gd-&gt;png;\nclose IMG;\n</code></pre>\n"}, {"tags": ["perl", "dbi", "mojolicious"], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1540222909, "post_id": 52932903, "comment_id": 92775386, "body": "Thanks reply,I have read this before posting but decided its not the best solution for my app because I have connection to 3 different dbs/ip&#39;s and in the docs for connect_cached says: Caching connections can be useful in some applications, but it can also cause problems, such as too many connections, and so should be used with care. In particular, avoid changing the attributes of a database handle created via connect_cached() because it will affect other code that may be using the same handle. When connect_cached() returns a handle the attributes will be reset to their initial values."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "reply_to_user": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 1, "creation_date": 1540226142, "post_id": 52932903, "comment_id": 92777064, "body": "I don&#39;t see the comment you quoted, @rooger, to be speaking to any reason why you could not use connect_cached.  The three different databases would be using three different caches. And the &#39;too many connections&#39; issue would not be made worse by using connect_cached than it would be by using DBIx::Connector.  Seems safe to me unless you&#39;re actually mutating the handles after connection."}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1540227585, "post_id": 52932903, "comment_id": 92777775, "body": "Thanks for the quick reply, So by using connect_cache like  (return $dbh = DBI-&gt;connect_cached(...) in my connect_db sub)  if a user on index refreshes the page 50 times, there would be only 1 connection made? Is there a way to check how many connection are made to SQL Server? Also, would there be  a way to implement ping? I was thinking something like  return $dbh = DBI-&gt;connect(...) unless $dbh-&gt;ping(); but this would make the connection anyway before ping is made..."}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 1, "creation_date": 1540232177, "post_id": 52932903, "comment_id": 92779914, "body": "LE: after some reading on the internet, more and more people say that DBIx::Connector is better than connect_cached <a href=\"https://justatheory.com/tags/dbixconnector/\" rel=\"nofollow noreferrer\">justatheory.com/tags/dbixconnector</a> <a href=\"https://metacpan.org/pod/DBIx::Connector\" rel=\"nofollow noreferrer\">metacpan.org/pod/DBIx::Connector</a> - quote &quot;You might be familiar with ... and with the DBI&#39;s connect_cached() constructor. DBIx::Connector serves a similar need, but does a much better job.&quot;  <a href=\"https://www.reddit.com/r/perl/comments/54nl6c/dbi_connection_pooling_under_fcgifastcgi/\" rel=\"nofollow noreferrer\">reddit.com/r/perl/comments/54nl6c/&hellip;</a> - &quot;That aside, it&#39;s recommended to use a connection manager like DBIx::Connector rather than relying on connect_cached &quot;."}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1540285272, "post_id": 52932903, "comment_id": 92798203, "body": "What are your opinions? For me the only downside of dbix connector is that it has been last updated in 2016"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1540311950, "post_id": 52932903, "comment_id": 92815266, "body": "Yes, DBIx::Connector is a better option. It does not need to be updated often since it just delegates to DBI."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1540222275, "creation_date": 1540222275, "answer_id": 52932903, "question_id": 52931850, "link": "https://stackoverflow.com/questions/52931850/check-database-connection-before-open-a-new-one/52932903#52932903", "title": "Check database connection before open a new one", "body": "<p>This is the problem that <a href=\"https://metacpan.org/pod/DBI#connect_cached\" rel=\"nofollow noreferrer\"><code>DBI::connect_cached</code></a> is supposed to solve:</p>\n\n<blockquote>\n<pre><code>$dbh = DBI-&gt;connect_cached($data_source, $username, $password)\n      or die $DBI::errstr;\n$dbh = DBI-&gt;connect_cached($data_source, $username, $password, \\%attr)\n      or die $DBI::errstr;\n</code></pre>\n  \n  <p><code>connect_cached</code> is like \"<code>connect</code>\", except that the database handle returned is also stored in a hash associated with the given parameters. If another call is made to <code>connect_cached</code> with the same parameter values, then the corresponding cached <code>$dbh</code> will be returned if it is still valid. The cached database handle is replaced with a new connection if it has been disconnected or if the <code>ping</code> method fails.</p>\n</blockquote>\n\n<p>See the docs for important disclaimers.</p>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1540315337, "post_id": 52953895, "comment_id": 92816935, "body": "Thanks for the reply, just to be sure I understand. If I have this      sub connect_db {       .. same as above until ...      my $conn = DBIx::Connector-&gt;new(...);      return $conn ;       ...  } And in my controller I use my $conn = connect_db(&#39;db1&#39;); my $dbh = $conn-&gt;dbh(); Would I achieve what I&#39;m trying to do? Thank you"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1540315479, "post_id": 52953895, "comment_id": 92817002, "body": "No, that would still create a new DBIx::Connector object and thus require reconnecting every time you call connect_db."}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1540315546, "post_id": 52953895, "comment_id": 92817035, "body": "So the correct way is to create a helper as you showed and in controller use $dbh = $c-&gt;db-&gt;dbh?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1540315613, "post_id": 52953895, "comment_id": 92817080, "body": "Yes, or store your DBIx::Connector object some other way. The important part is that you want to always keep the same DBIx::Connector object around for every request to use."}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1540316771, "post_id": 52953895, "comment_id": 92817639, "body": "Im having trouble setting that up, I have added my attempt on this paste bin link  <a href=\"https://pastebin.com/2CqugMrz\" rel=\"nofollow noreferrer\">pastebin.com/2CqugMrz</a>  because I can&#39;t format here in comments... Can you please take a look and post the answer if its correct?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1540317230, "post_id": 52953895, "comment_id": 92817873, "body": "@rooger Three problems: 1. The first parameter a helper receives is the controller object, not the string you passed in. 2. You pass an argument to the helper as <code>$c-&gt;db(&#39;db1&#39;)</code> not <code>$c-&gt;db-&gt;(&#39;db1&#39;)</code>. 3. Since you want to keep multiple database connections, you need multiple DBIx::Connector objects, so you should store them in a hash instead of a scalar variable, with the strings you pass in as keys."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1540317297, "post_id": 52953895, "comment_id": 92817908, "body": "I updated the example to use a hash with named connectors."}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1540318455, "post_id": 52953895, "comment_id": 92818467, "body": "I have made the necessary changes and it works! But just to take one final check up if I did it right, can you please take a look? <a href=\"https://pastebin.com/5vg0TcBt\" rel=\"nofollow noreferrer\">pastebin.com/5vg0TcBt</a> Thank you"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1540321113, "post_id": 52953895, "comment_id": 92819709, "body": "You are still making a new DBIx::Connector object every time you call the helper. That&#39;s why I used the <code>&#47;&#47;=</code> operator, so that it only creates and assigns a new DBIx::Connector object if that key does not have a defined value (i.e. does not have a DBIx::Connector object yet). Your error handling should probably <a href=\"https://perldoc.pl/functions/die\" rel=\"nofollow noreferrer\">die</a> instead of returning a string that won&#39;t work."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 1, "last_activity_date": 1540321688, "last_edit_date": 1540321688, "creation_date": 1540312429, "answer_id": 52953895, "question_id": 52931850, "link": "https://stackoverflow.com/questions/52931850/check-database-connection-before-open-a-new-one/52953895#52953895", "title": "Check database connection before open a new one", "body": "<p>It is safe to use the <code>dbh</code> method from a DBIx::Connector object and then use that as a normal DBI handle, but you miss out on most of the benefits of DBIx::Connector if you don't keep the DBIx::Connector object around. Creating a new DBIx::Connector object will mean that a new connection is required, as that object is where connections are cached. In addition, whenever you call <code>-&gt;dbh</code> or <code>-&gt;run</code> is when DBIx::Connector checks that the connection is active and that you haven't forked, and makes a new connection if needed. Thus it is better to store and pass around the DBIx::Connector object, and then have any individual segment of code retrieve a <code>dbh</code> or call <code>run</code>. In a Mojolicious application it's common to store something like this in an application <a href=\"https://metacpan.org/pod/Mojolicious::Guides::Tutorial#Helpers\" rel=\"nofollow noreferrer\">helper</a> (but of course you can put it wherever is convenient).</p>\n\n<pre><code># in application startup\nmy %dbs;\n$app-&gt;helper(db =&gt; sub {\n  my ($c, $name) = @_;\n  return $dbs{$name} //= DBIx::Connector-&gt;new(...);\n});\n\n# elsewhere\nmy $dbh = $c-&gt;db('db1')-&gt;dbh;\n# or\n$c-&gt;db('db1')-&gt;run(...);\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 52953895, "answer_count": 2, "score": 0, "last_activity_date": 1540357376, "creation_date": 1540218841, "last_edit_date": 1540357376, "question_id": 52931850, "link": "https://stackoverflow.com/questions/52931850/check-database-connection-before-open-a-new-one", "title": "Check database connection before open a new one", "body": "<p>I'm having a mojolicious app structured like this:  </p>\n\n<pre><code> /root_dir/lib/Mojo_App/Controller/Main.pm  \n /root_dir/lib/Mojo_App/Database/Db.pm  \n /root_dir/ ...\n</code></pre>\n\n<p>In Database::Db I have a subroutine that creates a connection to SQL SERVER. That subroutine gets exported and used in Main.pm<br>\nExample:<br>\nDatabase::DB   </p>\n\n<pre><code>my $config = {\ndb1 =&gt; {\n    host =&gt; 'dbi:Driver:server=ip01;database=db01',\n    user =&gt; 'user01',\n    pass =&gt; 'pass01'\n},\ndb2 =&gt; {\n    host =&gt; 'dbi:Driver:server=ip02;database=db02',\n    user =&gt; 'user02',\n    pass =&gt; 'pass02'\n},\ndb3 =&gt; {\n    host =&gt; 'dbi:Driver:server=ip03;database=db03',\n    user =&gt; 'user03',\n    pass =&gt; 'pass03'\n}\n};\n\n\nsub connect_db {\nuse DBI;\nmy $self = shift;\n\nreturn 0 unless $self;\n\nmy $dbh;\n\nif (exists($config-&gt;{$self})) { \n    return $dbh = DBI-&gt;connect($config-&gt;{$self}-&gt;{host}, $config-&gt;{$self}-&gt;{user}, $config-&gt;{$self}-&gt;{pass}) || die( $DBI::errstr . \"\\n\" ) ;\n} else {\n    return \"Connection not in config. \\n\" ;\n}\nreturn $dbh; \n\n}\n</code></pre>\n\n<p>In Main.pm I am connecting like this:   </p>\n\n<pre><code>my $dbh = connect_db('db1');\n</code></pre>\n\n<p>Now lets say I need to connect to the database on the index page, so I will have in Main.pm a subroutine index like this:    </p>\n\n<pre><code>sub index {\n    my $self = shift;\n    my $dbh = connect_db('db1');\n    ...\n    $self-&gt;render();\n}\n</code></pre>\n\n<p>Now I dont want that everytime a user accesses the index page a new connection to be made,I want to check if a connection is alive and if not create it.<br>\nI have read about ping method, but I dont know how I can implement it here.\nAlso I have read about DBIx and tried the following implementation:   </p>\n\n<pre><code>sub connect_db {\nuse DBIx::Connector;\n\nmy $self = shift;\n\nreturn 0 unless $self;\n\nmy $dbh;\n\nif (exists($config-&gt;{$self})) { \n    my $conn = DBIx::Connector-&gt;new($config-&gt;{$self}-&gt;{host}, $config-&gt;{$self}-&gt;{user}, $config-&gt;{$self}-&gt;{pass}, {\n        RaiseError =&gt; 1,\n        AutoCommit =&gt; 1,\n    });\n    return $dbh = $conn-&gt;dbh; ;\n} else {\n    return \"Connection not in config. \\n\" ;\n}\nreturn $dbh; \n}   \n</code></pre>\n\n<p>Would this implementation achieve what I want? When a database connection is active to be used and not recreated. If yes, is it safe to use DBIx like Dbi? I am referring here to:   </p>\n\n<pre><code>my $dbh  = $conn-&gt;dbh;\n$dbh-&gt;do('INSERT INTO foo (name) VALUES (?)', undef, 'Fred' );\nand not \n$conn-&gt;run(fixup =&gt; sub {\n$_-&gt;do('INSERT INTO foo (name) VALUES (?)', undef, 'Fred' );\n});\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1540216720, "post_id": 52931104, "comment_id": 92771483, "body": "You increase your chances of helping your self and getting helpful answers by minimizing your program to the minimal version which still shows your problem:, see <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>."}], "answers": [{"tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": false, "score": 2, "last_activity_date": 1540217205, "creation_date": 1540217205, "answer_id": 52931334, "question_id": 52931104, "link": "https://stackoverflow.com/questions/52931104/md5-hexdigest-verification-with-a-string/52931334#52931334", "title": "MD5 hexdigest verification with a string", "body": "<p><code>use strict</code> to detect errors with variable names and scopes.\n$hash is not defined on <code>if( $md5 eq $hash )</code> because <code>my $hash = &lt;$fh&gt;;</code> is out of scope.\nDeclare <code>my $hash</code> before <code>while (my $row = &lt;$fh&gt;)</code> and set the value with <code>$hash = &lt;$fh&gt;;</code></p>\n\n<p><a href=\"http://perldoc.perl.org/functions/my.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/functions/my.html</a></p>\n"}], "owner": {"reputation": 1, "user_id": 10540897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23034867288f66d32469ec659e3185fc?s=128&d=identicon&r=PG&f=1", "display_name": "Bvcdi", "link": "https://stackoverflow.com/users/10540897/bvcdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540217205, "creation_date": 1540216415, "last_edit_date": 1540216586, "question_id": 52931104, "link": "https://stackoverflow.com/questions/52931104/md5-hexdigest-verification-with-a-string", "title": "MD5 hexdigest verification with a string", "body": "<p>I am having a problem comparing the result from the <code>file_md5_hex( $dir )</code> subroutine with a string read from a file.\nWhen I print they are both the same, but when I compare them in a if I get all the time equal regardless of the value they have. </p>\n\n<pre><code>elsif ( -f $dir )\n{\n if($dir ne \"$mydir.txt\" &amp;&amp; $dir ne \"log.txt\")\n {\n  my $filename = \"$mydir.txt\";\n  open(my $fh, '&lt;:encoding(UTF-8)', $filename)\n  or die \"Could not open file '$filename' $!\";\n  print FILE \"$dir -&gt; \";\n  while (my $row = &lt;$fh&gt;)\n  {\n   chomp($row);\n   if($row eq $dir)\n     {\n      my $hash = &lt;$fh&gt;;\n      chomp($hash);\n      print FILE \"$hash = \";\n      break;\n     }\n  }\n  close $fh;\n   my $md5 = file_md5_hex( $dir );\n   print FILE \"$md5\\n\";\n   print FILE ref($md5);\n   print FILE ref($hash);\n   if( $md5 eq $hash )\n   {\n     print FILE \"Hash ok!\\n\";\n     }\n   else\n   {\n     print FILERESULT \"In $mydir file $dir is corrupted. Correct is $hash, calculated is $md5\\n\";\n     print FILE \"Hash Nok!\\n\";\n   }\n }\n}\n</code></pre>\n\n<p>In the log file I see that the 2 values <code>$md5</code> and <code>$hash</code> are the same or different (depending on the case I simulate) but when I verify the program sees them as always equal. I think there might be a problem with the types of data but I don't know how to fix it. </p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 0, "creation_date": 1540217521, "post_id": 52930955, "comment_id": 92772009, "body": "Ah, you&#39;re the one with the perlmonks post. Great. I admit I was too impatient to read the whole thing. But I&#39;m glad I posted because your response really boiled it down. I&#39;ll definitely try it out."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 0, "creation_date": 1540219650, "post_id": 52930955, "comment_id": 92773401, "body": "So I just realized I have to solve another issue before I can tell whether this test will work. For the module Term::ReadKey, I don\u2019t eval the use of the module unless I detect I have a connection to a tty. So I have to figure out how to make the script think it\u2019s open to a tty. And I need to make sure that the width of that tty is not my default of 80... \ud83d\ude15"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 0, "creation_date": 1540219718, "post_id": 52930955, "comment_id": 92773457, "body": "... or trigger that by setting some environment variable or command line switch.#"}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 0, "creation_date": 1540220227, "post_id": 52930955, "comment_id": 92773758, "body": "Hmmm. Even if I can trigger the eval, I can\u2019t confirm that the test was successful unless I can test the inverse case. I need a positive test that the 3rd party module loaded and sets the term width != 80 and a negative test where the module doesn\u2019t load and I get the default width of 80. I guess that\u2019s not your problem though. I will select this answer once I get it figured out and everything works."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 0, "creation_date": 1540220313, "post_id": 52930955, "comment_id": 92773803, "body": "I would set up different test files for those test cases, and make sure that the module can load or does not, respectively. You can usually fake the terminal width by setting <code>$ENV{COLS}</code>."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 0, "creation_date": 1540235628, "post_id": 52930955, "comment_id": 92781550, "body": "I&#39;m almost there! I can make my system calls output to a tty by doing <code>perl mytest.pl &gt; &#47;dev&#47;tty000</code>, but I can&#39;t figure out how to get the output back so I can see if the width is correct.  I tried <code>perl mytest.pl &gt; &#47;dev&#47;tty000;cat &#47;dev&#47;tty000</code> but that hangs (presumably waiting for input).  Does anyone know how to flush a tty&#39;s buffer without it waiting for more input?"}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 0, "creation_date": 1540241451, "post_id": 52930955, "comment_id": 92784317, "body": "I had to use a call to <code>script</code> so that I could redirect to a tty <i>and</i> retrieve the output from a temp file I gave to <code>script</code>."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 0, "creation_date": 1540242191, "post_id": 52930955, "comment_id": 92784589, "body": "Although, I just confirmed that the <code>script</code> command on my mac is not compatible on linux... Going to have to figure that one out..."}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 4, "last_activity_date": 1540215988, "creation_date": 1540215988, "answer_id": 52930955, "question_id": 52930343, "link": "https://stackoverflow.com/questions/52930343/how-to-test-missing-optional-perl-modules-via-the-command-line-perl-call/52930955#52930955", "title": "How to test missing optional perl modules via the command line perl call", "body": "<p>I wrote <a href=\"https://metacpan.org/pod/Test::Without::Module\" rel=\"nofollow noreferrer\">Test::Without::Module</a> for this exact case. It works by modifying <code>@INC</code> to prevent loading of modules that you name. For testing, you could either run the test from the command line:</p>\n\n<pre><code>perl -MTest::Without::Module=Some::Module -w -Iblib/lib t/SomeModule.t\n</code></pre>\n\n<p>Or allow/disallow loading the module from within your test suite:</p>\n\n<pre><code>use Test::Without::Module qw( My::Module );\n\n# Now, loading of My::Module fails :\neval { require My::Module; };\nwarn $@ if $@;\n\n# Now it works again\neval q{ no Test::Without::Module qw( My::Module ) };\neval { require My::Module; };\nprint \"Found My::Module\" unless $@;\n</code></pre>\n"}], "owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 52930955, "answer_count": 1, "score": 2, "last_activity_date": 1540215988, "creation_date": 1540214114, "question_id": 52930343, "link": "https://stackoverflow.com/questions/52930343/how-to-test-missing-optional-perl-modules-via-the-command-line-perl-call", "title": "How to test missing optional perl modules via the command line perl call", "body": "<p>I have a test suite with hundreds of tests for a perl module I've yet to release which is a command line interface.  Since it is a command line interface, the tests (until possibly now) are all written to drop code into a template and then call the template script using a system call.</p>\n\n<p>I recently added an optional dependency on a 3rd party module that's not a part of core perl.  I know my module works whether that module is installed or not because I have a computer with it installed and one without and the module works without error in each case.  However, I'd like to be able to write a test to confirm that my module will work when the 3rd party module is absent - and I'd like that test to work even if the 3rd party module <em>is</em> installed, but behave as if it wasn't.</p>\n\n<p>Ideally, I could use the structure I've put in place for testing which makes a system call to a template script.  I know I could write a separate test script that manipulates @INC in the BEGIN block, imports the particular methods that use the module, and call them like a unit test.  But I would like to know if there's a way I can use the test structure I've already got all my other tests using, which is to make a system call.</p>\n\n<p>So is there a way to exclude a module from being imported via a perl command line option?  I've tried -M-Module, but the code <code>use Module</code> still imports the module.</p>\n\n<p>Incidentally, my module uses the 3rd party module inside an eval, which is how I made it optional.</p>\n"}, {"tags": ["shell", "perl", "unix", "awk", "text-processing"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 5366288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4b39Aey9brc/AAAAAAAAAAI/AAAAAAAACMw/t2klKGEJoKE/photo.jpg?sz=128", "display_name": "Pradyumna Sagar", "link": "https://stackoverflow.com/users/5366288/pradyumna-sagar"}, "edited": false, "score": 0, "creation_date": 1540216929, "post_id": 52930455, "comment_id": 92771631, "body": "Seems like I have an error in when i try to run the command : awk: cmd. line:5: (FILENAME=only_t.tsv FNR=20) fatal: division by zero attempted"}, {"owner": {"reputation": 11156, "user_id": 2214695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dee2ef257601e05c5659f04de9cb7c67?s=128&d=identicon&r=PG", "display_name": "oliv", "link": "https://stackoverflow.com/users/2214695/oliv"}, "reply_to_user": {"reputation": 165, "user_id": 5366288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4b39Aey9brc/AAAAAAAAAAI/AAAAAAAACMw/t2klKGEJoKE/photo.jpg?sz=128", "display_name": "Pradyumna Sagar", "link": "https://stackoverflow.com/users/5366288/pradyumna-sagar"}, "edited": false, "score": 0, "creation_date": 1540220507, "post_id": 52930455, "comment_id": 92773924, "body": "@PradyumnaSagar This happens on lines where there is no value. Please see my updated answer."}], "tags": [], "owner": {"reputation": 11156, "user_id": 2214695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dee2ef257601e05c5659f04de9cb7c67?s=128&d=identicon&r=PG", "display_name": "oliv", "link": "https://stackoverflow.com/users/2214695/oliv"}, "is_accepted": false, "score": 2, "last_activity_date": 1540220444, "last_edit_date": 1540220444, "creation_date": 1540214505, "answer_id": 52930455, "question_id": 52930328, "link": "https://stackoverflow.com/questions/52930328/how-to-calculate-the-mean-of-row-from-csv-file-from-nth-column/52930455#52930455", "title": "How to calculate the mean of row from csv file from nth column?", "body": "<p>You could use this <code>awk</code> script:</p>\n\n<pre><code> awk 'NR&gt;1{\n        for(i=5;i&lt;=NF;i++)\n          sum+=$i\n      }\n      {\n        print $1,$2,$3,$4,(NF&gt;4&amp;&amp;sum!=\"\"?sum/(NF-4):(NR==1?\"Avg\":\"\"))\n        sum=0\n      }' file | column -t\n</code></pre>\n\n<p>The first block gets the sum of all ids starting from the 5th element.</p>\n\n<p>The second block, prints the header line and the average value.</p>\n\n<p><code>column -t</code> displays the result in column.</p>\n"}, {"comments": [{"owner": {"reputation": 165, "user_id": 5366288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4b39Aey9brc/AAAAAAAAAAI/AAAAAAAACMw/t2klKGEJoKE/photo.jpg?sz=128", "display_name": "Pradyumna Sagar", "link": "https://stackoverflow.com/users/5366288/pradyumna-sagar"}, "edited": false, "score": 0, "creation_date": 1540216811, "post_id": 52930622, "comment_id": 92771552, "body": "hi the code worked on the sample file I have taken but on the original file it gave illegal division by zero any idea on that? original file has 189532 columns."}, {"owner": {"reputation": 165, "user_id": 5366288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4b39Aey9brc/AAAAAAAAAAI/AAAAAAAACMw/t2klKGEJoKE/photo.jpg?sz=128", "display_name": "Pradyumna Sagar", "link": "https://stackoverflow.com/users/5366288/pradyumna-sagar"}, "edited": false, "score": 0, "creation_date": 1540216849, "post_id": 52930622, "comment_id": 92771574, "body": "awk: cmd. line:3: (FILENAME=only_t.tsv FNR=20) fatal: division by zero attempted."}, {"owner": {"reputation": 165, "user_id": 5366288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4b39Aey9brc/AAAAAAAAAAI/AAAAAAAACMw/t2klKGEJoKE/photo.jpg?sz=128", "display_name": "Pradyumna Sagar", "link": "https://stackoverflow.com/users/5366288/pradyumna-sagar"}, "edited": false, "score": 0, "creation_date": 1540216869, "post_id": 52930622, "comment_id": 92771588, "body": "how to increasethe FNR"}, {"owner": {"reputation": 9362, "user_id": 2885763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/l4VVG.jpg?s=128&g=1", "display_name": "NeronLeVelu", "link": "https://stackoverflow.com/users/2885763/neronlevelu"}, "edited": false, "score": 0, "creation_date": 1540217040, "post_id": 52930622, "comment_id": 92771695, "body": "change last NF with <code>(NF ? NF : 1)</code>"}, {"owner": {"reputation": 165, "user_id": 5366288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4b39Aey9brc/AAAAAAAAAAI/AAAAAAAACMw/t2klKGEJoKE/photo.jpg?sz=128", "display_name": "Pradyumna Sagar", "link": "https://stackoverflow.com/users/5366288/pradyumna-sagar"}, "edited": false, "score": 0, "creation_date": 1540217296, "post_id": 52930622, "comment_id": 92771868, "body": "awk: cmd. line:3: { print $1,$2,$3,$4,NF&gt;4? s/((NF ? NF : 1)-4):s } awk: cmd. line:3:                         ^ syntax error"}, {"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "reply_to_user": {"reputation": 9362, "user_id": 2885763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/l4VVG.jpg?s=128&g=1", "display_name": "NeronLeVelu", "link": "https://stackoverflow.com/users/2885763/neronlevelu"}, "edited": false, "score": 0, "creation_date": 1540217570, "post_id": 52930622, "comment_id": 92772046, "body": "@NeronLeVelu What do you mean?"}], "tags": [], "owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "is_accepted": true, "score": 1, "last_activity_date": 1540217747, "last_edit_date": 1540217747, "creation_date": 1540214954, "answer_id": 52930622, "question_id": 52930328, "link": "https://stackoverflow.com/questions/52930328/how-to-calculate-the-mean-of-row-from-csv-file-from-nth-column/52930622#52930622", "title": "How to calculate the mean of row from csv file from nth column?", "body": "<p>This would be working as expected:</p>\n\n<pre><code>awk 'BEGIN{OFS=\"\\t\"}\n     (NR==1){ print $1,$2,$3,$4,\"Avg:\"; next }\n     { s=0; for(i=5;i&lt;=NF;++i) s+=$i }\n     { print $1,$2,$3,$4, (NF&gt;4 ? s/(NF-4) : s) }' input.tsv\n</code></pre>\n\n<p>or just for the fun of it, if you want to make the for-loop obfuscated:</p>\n\n<pre><code>awk 'BEGIN{OFS=\"\\t\"}\n     (NR==1){ print $1,$2,$3,$4,\"Avg:\"; next }\n     { for(s=!(i=5);i&lt;=NF;s+=$(i++)) {} }\n     { print $1,$2,$3,$4, (NF&gt;4 ? s/(NF-4) : s) }' input.tsv\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1540217846, "post_id": 52930954, "comment_id": 92772218, "body": "I like the way you did <code>for(i=Avg=0; ...)</code>. You can get rid of the <code>if</code> statement in your for loop if you do <code>for(Avg=!(i=5); ...)</code>"}], "tags": [], "owner": {"reputation": 9362, "user_id": 2885763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/l4VVG.jpg?s=128&g=1", "display_name": "NeronLeVelu", "link": "https://stackoverflow.com/users/2885763/neronlevelu"}, "is_accepted": false, "score": 2, "last_activity_date": 1540216732, "last_edit_date": 1540216732, "creation_date": 1540215987, "answer_id": 52930954, "question_id": 52930328, "link": "https://stackoverflow.com/questions/52930328/how-to-calculate-the-mean-of-row-from-csv-file-from-nth-column/52930954#52930954", "title": "How to calculate the mean of row from csv file from nth column?", "body": "<p>From you code reference:</p>\n\n<pre><code>awk 'NR==1{next}\n   {\n   # missing the last ). This print the 1st column\n   #printf(\"%s\\t\", $1\n    printf(\"%s\\t\", $1 )\n\n   # missing the last ) and average of 3 colum only\n   #printf(\"%.2f\\n\", ($5 + $6 + $7)/3\n    printf(\"%.2f\\n\", ($5 + $6 + $7 + $8 + $9) / 5 )\n   }' input.tsv \n</code></pre>\n\n<p>Your second code is not easy work with , lot of subshell (backtic) and shell loop but most of all, i think it is made for working with integer value and for full line of value (not 5- > 9). Forget it unless you don't want awk in this case. </p>\n\n<p>for fun</p>\n\n<pre><code>awk 'NR==1{\n        # Header\n        print $0 OFS \"Avg\"\n        Count = NF - 5\n        next\n        }\n        {\n        # print each element of the line + sum after col 4\n        for( i=Avg=0;i&lt;=NF;i++) {\n           if( i &gt;=5 ) Avg+= $i\n           printf( \"%s \", $i)\n           }\n        # print average\n         printf( \"%.2f\\n\", Avg/Count )\n        }\n   ' input.tsv\n</code></pre>\n\n<p>Assuming here that it is always counting on the full stack of value, we can change the Count by <code>(NF - 4)</code> if less value are on the line and empty are not counting</p>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 1, "last_activity_date": 1540220292, "creation_date": 1540220292, "answer_id": 52932314, "question_id": 52930328, "link": "https://stackoverflow.com/questions/52930328/how-to-calculate-the-mean-of-row-from-csv-file-from-nth-column/52932314#52932314", "title": "How to calculate the mean of row from csv file from nth column?", "body": "<pre><code>$ cat tst.awk\nNR == 1 { avg = \"Avg\" }\nNR &gt; 1 {\n    sum = cnt = 0\n    for (i=5; i&lt;=NF; i++) {\n        sum += $i\n        cnt++\n    }\n    avg = (cnt ? sum / cnt : 0)\n}\n{ print $1, $2, $3, $4, avg }\n\n$ awk -f tst.awk file\nID source random text Avg\n1 atttt eeeee test 0.606\n2 afdg adfgrg tf 0.404\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1540229909, "post_id": 52932376, "comment_id": 92778896, "body": "Why not directly print tabs instead of commas in the perl?"}], "tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 1, "last_activity_date": 1540232219, "last_edit_date": 1540232219, "creation_date": 1540220479, "answer_id": 52932376, "question_id": 52930328, "link": "https://stackoverflow.com/questions/52930328/how-to-calculate-the-mean-of-row-from-csv-file-from-nth-column/52932376#52932376", "title": "How to calculate the mean of row from csv file from nth column?", "body": "<p>Using Perl one-liner</p>\n\n<pre><code>&gt; perl -lane '{ $s=0;foreach(@F[4..8]){$s+=$_} $F[4]=$s==0?\"Avg\":$s/5;print \"$F[0]\\t$F[1]\\t$F[2]\\t$F[3]\\t$F[4]\" } ' input.tsv \nID      source  random  text    Avg\n1       atttt   eeeee   test    0.606\n2       afdg    adfgrg  tf      0.404\n&gt;\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 5366288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4b39Aey9brc/AAAAAAAAAAI/AAAAAAAACMw/t2klKGEJoKE/photo.jpg?sz=128", "display_name": "Pradyumna Sagar", "link": "https://stackoverflow.com/users/5366288/pradyumna-sagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 52930622, "answer_count": 5, "score": 0, "last_activity_date": 1540232219, "creation_date": 1540214069, "question_id": 52930328, "link": "https://stackoverflow.com/questions/52930328/how-to-calculate-the-mean-of-row-from-csv-file-from-nth-column", "title": "How to calculate the mean of row from csv file from nth column?", "body": "<p>This may look like a duplicate but I could not solve the issue I'm having.</p>\n\n<p>I'm trying to find the average of each column from a CSV/TSV file the data looks like below:</p>\n\n<p><code>input.tsv</code></p>\n\n<pre><code>ID  source  random  text val1 val2 val3 val4 val330\n1   atttt   eeeee   test 0.9  0.5  0.2  0.54 0.89\n2   afdg    adfgrg  tf   0.6  0.23 0.5  0.4  0.29\n</code></pre>\n\n<p>output.tsv</p>\n\n<pre><code>ID  source  random  text Avg\n1   atttt   eeeee   test 0.606\n2   afdg    adfgrg  tf   0.404\n</code></pre>\n\n<p>or at least </p>\n\n<pre><code>ID  Avg\n1   0.606\n2   0.404\n</code></pre>\n\n<p>I tried a suggestion from <a href=\"https://www.unix.com/unix-desktop-questions-and-answers/193217-calculate-average-rows-text-file.html\" rel=\"nofollow noreferrer\">here</a> </p>\n\n<pre><code>awk 'NR==1{next}\n{printf(\"%s\\t\", $1\nprintf(\"%.2f\\n\", ($5 + $6 + $7)/3}' input.tsv \n</code></pre>\n\n<p>which threw error.</p>\n\n<p>and</p>\n\n<p><code>awk '{ s = 4; for (i = 5; i &lt;= NF; i++) s += $i; print $1, (NF &gt; 1) ? s / (NF - 1) : 0; }' input.tsv</code></p>\n\n<p>the below code also threw a syntax error</p>\n\n<pre><code>for i in `cat input.tsv` do; VALUES=`echo $i | tr '\\t' '\\t'`;COUNT=0;SUM=0;typeset -i j;IFS=' ';for j in $VALUES; do;SUM=`expr $SUM + $j`;COUNT=`expr $COUNT + 1`;done;AVG=`expr $SUM / $COUNT`;echo $AVG;done\n</code></pre>\n\n<p>help me resolve the issue to calculate the average of the row</p>\n"}, {"tags": ["perl", "module", "eval"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1540311699, "post_id": 52927025, "comment_id": 92815147, "body": "If it&#39;s not a variable module name it would be better to write <code>require someModule;</code> to load it at runtime and die if it fails to load, then <code>someModule-&gt;import;</code> if you also need to run its import routine. If it is a variable module name consider <a href=\"https://metacpan.org/pod/Module::Runtime\" rel=\"nofollow noreferrer\">Module::Runtime</a> which will avoid any potential for string-evaling code you didn&#39;t mean to."}, {"owner": {"reputation": 1, "user_id": 9459538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/847e6f59461001d0a6e1eedc641da741?s=128&d=identicon&r=PG&f=1", "display_name": "LiquiNUX", "link": "https://stackoverflow.com/users/9459538/liquinux"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1540476199, "post_id": 52927025, "comment_id": 92887659, "body": "In some parts it&#39;s a dynamic module name. But thanks for the hint with Module::Runtime. I&#39;ll give it a try."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9459538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/847e6f59461001d0a6e1eedc641da741?s=128&d=identicon&r=PG&f=1", "display_name": "LiquiNUX", "link": "https://stackoverflow.com/users/9459538/liquinux"}, "edited": false, "score": 0, "creation_date": 1540207156, "post_id": 52927864, "comment_id": 92765396, "body": "Great. Thanks for the quick reqply."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 3, "last_activity_date": 1540206402, "creation_date": 1540206402, "answer_id": 52927864, "question_id": 52927025, "link": "https://stackoverflow.com/questions/52927025/perl-evaluse-somemodule-called-multiple-times-is-it-also-evaluated-multipl/52927864#52927864", "title": "Perl eval(&#39;use someModule;&#39;) called multiple times. Is it also evaluated multiple times?", "body": "<pre><code>use someModule\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>BEGIN { require someModule; someModule-&gt;import(); }\n</code></pre>\n\n<p>and <a href=\"http://perldoc.perl.org/functions/require.html\" rel=\"nofollow noreferrer\"><code>require</code></a> demands that a library file be included if it hasn't already been included.</p>\n\n<p>So someModule will be read and compiled only once, but its <code>import</code> sub (if any) will be called once for each <code>use</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 9459538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/847e6f59461001d0a6e1eedc641da741?s=128&d=identicon&r=PG&f=1", "display_name": "LiquiNUX", "link": "https://stackoverflow.com/users/9459538/liquinux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540237407, "creation_date": 1540203612, "last_edit_date": 1540237407, "question_id": 52927025, "link": "https://stackoverflow.com/questions/52927025/perl-evaluse-somemodule-called-multiple-times-is-it-also-evaluated-multipl", "title": "Perl eval(&#39;use someModule;&#39;) called multiple times. Is it also evaluated multiple times?", "body": "<p>I have to deal with a peace of code that uses </p>\n\n<pre><code>eval('use someModule');\n</code></pre>\n\n<p>in a function and evals the module during runtime.</p>\n\n<p>Unfortunately the function with this eval block is called multiple times.\nNow the question - Is Perl evaluating the module each time the function with this block is called? - Or is Perl smart enough to skip a second eval?\nAnd is there a way to measure that to be sure?</p>\n\n<p>I have tried some global var counting in the BEGIN block of the module, but I'm not sure this is a sufficient test.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1540196457, "post_id": 52924830, "comment_id": 92759346, "body": "Do you want each value in the tied hash to also be tied to an IxHash instead of being a normal hashref?"}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 2, "creation_date": 1540196722, "post_id": 52924830, "comment_id": 92759498, "body": "When dumping data with <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow noreferrer\"><code>Data::Dumper</code></a> you can provide <code>Sortkeys</code> option to have keys sorted."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "reply_to_user": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1540197858, "post_id": 52924830, "comment_id": 92760064, "body": "@el.pescado, I need to maintain the order of the FAMILY&#39;s array in the hash."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540197886, "post_id": 52924830, "comment_id": 92760078, "body": "@Shawn, yes, you can said so too."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 1, "creation_date": 1540198618, "post_id": 52925554, "comment_id": 92760456, "body": "I thought the whole hash have been tied. Thank you for this knowledge."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1540259161, "post_id": 52925554, "comment_id": 92788831, "body": "how do tie if I have another subhash, third level subhash?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 1, "creation_date": 1540273325, "post_id": 52925554, "comment_id": 92792110, "body": "Check <a href=\"https://metacpan.org/pod/Tie::Autotie\" rel=\"nofollow noreferrer\">metacpan.org/pod/Tie::Autotie</a>, also <a href=\"https://www.perlmonks.org/?node_id=485306\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=485306</a>"}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 7, "last_activity_date": 1540198460, "creation_date": 1540198460, "answer_id": 52925554, "question_id": 52924830, "link": "https://stackoverflow.com/questions/52924830/how-to-save-second-dimension-of-hash-in-order-perl/52925554#52925554", "title": "How to save Second Dimension Of Hash In Order Perl", "body": "<p>Your subhashes are not tied to <code>Tie::IxHash</code>, and thus they are plain/unordered. You can change that by <code>tie</code> every subhash before usage.</p>\n\n<pre><code># push @{ $COMMUNITY_FAMILY_NAME{ $COMMUNITY[$_] }{ $FAMILY[$_] } }, $NAME[$_]  for 0 .. $#NAME;\n\nfor (0 .. $#NAME) {\n    my $href = $COMMUNITY_FAMILY_NAME{ $COMMUNITY[$_] } ||= do {\n        tie my %hash, 'Tie::IxHash';\n        \\%hash;\n    };\n    push @{ $href-&gt;{ $FAMILY[$_] } }, $NAME[$_];\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 5, "last_activity_date": 1540198538, "creation_date": 1540198538, "answer_id": 52925582, "question_id": 52924830, "link": "https://stackoverflow.com/questions/52924830/how-to-save-second-dimension-of-hash-in-order-perl/52925582#52925582", "title": "How to save Second Dimension Of Hash In Order Perl", "body": "<p>The issue you're running into is that a tied hash only affects one level - each value of a tied hash is just whatever you store in it, which usually is a normal perl value. That means if you want a multi-dimensional tied hash, both the top level variable has to be tied, and any values stored in it (In this case, hashrefs) as well.</p>\n\n<p>For example:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse Data::Dumper;\nuse Tie::IxHash;\n\ntie my %hash, 'Tie::IxHash';\ntie %{$hash{\"b\"}}, 'Tie::IxHash';\ntie %{$hash{\"c\"}}, 'Tie::IxHash';\n\n$hash{\"b\"}-&gt;{\"b\"} = [ qw/1 2 3/ ];\n$hash{\"b\"}-&gt;{\"a\"} = [ qw/4 5 6/ ];\n$hash{\"c\"}-&gt;{\"d\"} = [ qw/7 8 9/ ];\n$hash{\"c\"}-&gt;{\"c\"} = [ qw/10 11 12/ ];\n\nprint Dumper(\\%hash);\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1540259199, "creation_date": 1540195741, "last_edit_date": 1540259199, "question_id": 52924830, "link": "https://stackoverflow.com/questions/52924830/how-to-save-second-dimension-of-hash-in-order-perl", "title": "How to save Second Dimension Of Hash In Order Perl", "body": "<p>How I can save these Arrays into this Hash Of Arrays in order, not following alphabetically order, just save according to the Arrays.</p>\n\n<p>AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n - stackoverflow won't allow me to post because not enough details, so I did this - </p>\n\n<pre><code>#!/usr/bin/perl \n\nuse warnings;\nuse strict;\nuse Tie::IxHash;\nuse Data::Dumper;\n\nmy @NAME= qw(AA AB AC BA BB BC CA CB CC AA AB AC BA BB BC CA CB CC AA AB AC BA BB BC CA CB CC AD CD CE CF BD BE);\nmy @FAMILY= qw(A A A B B B C C C A A A B B B C C C A A A B B B C C C A C C C B B);\nmy @COMMUNITY= qw(0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 0 2 2 2 1 1);\n\ntie my %COMMUNITY_FAMILY_NAME,'Tie::IxHash' ;\n\npush @{ $COMMUNITY_FAMILY_NAME{ $COMMUNITY[$_] }{ $FAMILY[$_] } }, $NAME[$_]  for 0 .. $#NAME;\nprint Dumper(\\%COMMUNITY_FAMILY_NAME);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = {\n          '0' =&gt; {\n                   'A' =&gt; [\n                            'AA',\n                            'AB',\n                            'AC',\n                            'AD'\n                          ],\n                   'C' =&gt; [\n                            'CA',\n                            'CB',\n                            'CC'\n                          ],\n                   'B' =&gt; [\n                            'BA',\n                            'BB',\n                            'BC'\n                          ]\n                 },\n          '1' =&gt; {\n                   'A' =&gt; [\n                            'AA',\n                            'AB',\n                            'AC'\n                          ],\n                   'C' =&gt; [\n                            'CA',\n                            'CB',\n                            'CC'\n                          ],\n                   'B' =&gt; [\n                            'BA',\n                            'BB',\n                            'BC',\n                            'BD',\n                            'BE'\n                          ]\n                 },\n          '2' =&gt; {\n                   'A' =&gt; [\n                            'AA',\n                            'AB',\n                            'AC'\n                          ],\n                   'C' =&gt; [\n                            'CA',\n                            'CB',\n                            'CC',\n                            'CD',\n                            'CE',\n                            'CF'\n                          ],\n                   'B' =&gt; [\n                            'BA',\n                            'BB',\n                            'BC'\n                          ]\n                 }\n        };\n</code></pre>\n\n<p>Expected Output:</p>\n\n<pre><code>$VAR1 = {\n          '0' =&gt; {\n                   'A' =&gt; [\n                            'AA',\n                            'AB',\n                            'AC',\n                            'AD'\n                          ],\n                   'B' =&gt; [\n                            'BA',\n                            'BB',\n                            'BC'\n                          ]\n                   'C' =&gt; [\n                            'CA',\n                            'CB',\n                            'CC'\n                          ],\n                 },\n          '1' =&gt; {\n                   'A' =&gt; [\n                            'AA',\n                            'AB',\n                            'AC'\n                          ],\n                   'B' =&gt; [\n                            'BA',\n                            'BB',\n                            'BC',\n                            'BD',\n                            'BE'\n                   'C' =&gt; [\n                            'CA',\n                            'CB',\n                            'CC'\n                          ],\n\n                          ]\n                 },\n          '2' =&gt; {\n                   'A' =&gt; [\n                            'AA',\n                            'AB',\n                            'AC'\n                          ],\n                   'B' =&gt; [\n                            'BA',\n                            'BB',\n                            'BC'\n                          ]\n                   'C' =&gt; [\n                            'CA',\n                            'CB',\n                            'CC',\n                            'CD',\n                            'CE',\n                            'CF'\n                          ],\n                 }\n        };\n</code></pre>\n"}, {"tags": ["json", "perl", "resultset", "catalyst", "dbix-class"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1540192725, "post_id": 52923935, "comment_id": 92757348, "body": "The class of the object you want to serialize <a href=\"https://metacpan.org/pod/JSON::XS#%24json-=-%24json-%3Econvert_blessed-%28%5B%24enable%5D%29\" rel=\"nofollow noreferrer\">needs to have</a> <code>TO_JSON</code> method. Does it?"}, {"owner": {"reputation": 401, "user_id": 4748387, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/h8kAO.jpg?s=128&g=1", "display_name": "K&#233;rdez&#246;sk&#246;d\u0151 Indi&#225;n", "link": "https://stackoverflow.com/users/4748387/k%c3%a9rdez%c3%b6sk%c3%b6d%c5%91-indi%c3%a1n"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540192901, "post_id": 52923935, "comment_id": 92757432, "body": "No, it has no TO_JSON method. How sould it look like?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1540193188, "post_id": 52923935, "comment_id": 92757585, "body": "Something that serializes the object; see <a href=\"https://metacpan.org/pod/JSON::XS#OBJECT-SERIALISATION\" rel=\"nofollow noreferrer\">Object Serialization</a> in docs"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1540193312, "post_id": 52923935, "comment_id": 92757662, "body": "Also, I think that the encoding will happen in <code>convert_blessed</code> (once <code>TO_JSON</code> exists and does the job of serializing its object) in which case there should be no call to <code>encode</code>."}, {"owner": {"reputation": 401, "user_id": 4748387, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/h8kAO.jpg?s=128&g=1", "display_name": "K&#233;rdez&#246;sk&#246;d\u0151 Indi&#225;n", "link": "https://stackoverflow.com/users/4748387/k%c3%a9rdez%c3%b6sk%c3%b6d%c5%91-indi%c3%a1n"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540193842, "post_id": 52923935, "comment_id": 92757955, "body": "I thought that the <code>sub TO_JSON {     my $self = shift;     return { class =&gt; &#39;Book&#39;, data =&gt; { %$self } }; }</code> is enough but not. It complains that the it encountered an object encountered object &#39;DBIx::Class::ResultSource::Table=HASH(0x5e21748)."}, {"owner": {"reputation": 401, "user_id": 4748387, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/h8kAO.jpg?s=128&g=1", "display_name": "K&#233;rdez&#246;sk&#246;d\u0151 Indi&#225;n", "link": "https://stackoverflow.com/users/4748387/k%c3%a9rdez%c3%b6sk%c3%b6d%c5%91-indi%c3%a1n"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540194086, "post_id": 52923935, "comment_id": 92758093, "body": "I changed the method into this: <code>sub TO_JSON {     my $self = shift;     {         book_id =&gt; $self-&gt;id,         book_name =&gt; $self-&gt;name,     } } </code> and I get back a JSON, but it is ugly. <code>{ &quot;json_data&quot;: &quot;[{\\&quot;book_id\\&quot;:\\&quot;490da28d-f80f-4a31-9177-4236bad7117d\\&quot;,\\&quot;bo&zwnj;&#8203;ok_name\\&quot;:\\&quot;Above and Beyond\\&quot;},{\\&quot;book_name\\&quot;:\\&quot;If you ask me\\&quot;,\\&quot;book_id\\&quot;:\\&quot;38d0d3fc-a2ee-4b96-a677-4ede3f1a5dff\\&quot;},{&zwnj;&#8203;\\&quot;book_name\\&quot;:\\&quot;Leon&zwnj;&#8203;ardo da Vinci\\&quot;,\\&quot;book_id\\&quot;:\\&quot;630e1abf-aca4-4efb-8942-cd5020a5baa0\\&quot;&zwnj;&#8203;}]&quot; }</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1540195105, "post_id": 52923935, "comment_id": 92758681, "body": "OK, you got it. I don&#39;t know that it can be pretty. But it doesn&#39;t have to be, just think about how to best package it for the final purpose of that <code>JSON</code> (you can format it for reading eventually). On the other hand, there are modules for serialization, and I think that <code>FreezeThaw</code> returns a string (as needed). But I don&#39;t think it&#39;ll be pretty."}], "owner": {"reputation": 401, "user_id": 4748387, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/h8kAO.jpg?s=128&g=1", "display_name": "K&#233;rdez&#246;sk&#246;d\u0151 Indi&#225;n", "link": "https://stackoverflow.com/users/4748387/k%c3%a9rdez%c3%b6sk%c3%b6d%c5%91-indi%c3%a1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1540191959, "creation_date": 1540191959, "question_id": 52923935, "link": "https://stackoverflow.com/questions/52923935/how-to-convert-dbixclassresultset-into-json", "title": "how to convert DBIx::Class::ResultSet into JSON", "body": "<p>I am trying to obtain JSON from a DBIx::Class::ResultSet and I get the exception</p>\n\n<pre><code>encountered object 'Sql2Json::Model::DB::Book=HASH(0x6014f88)', \nbut neither allow_blessed, convert_blessed nor allow_tags settings are\nenabled (or TO_JSON/FREEZE method missing)\n</code></pre>\n\n<p>The controller class is <strong>Books.pm</strong>:</p>\n\n<pre><code>package Sql2Json::Controller::Books;\nuse Moose;\nuse namespace::autoclean;\nuse JSON::XS;\n\nBEGIN { extends 'Catalyst::Controller'; }\n\nmy $json = JSON::XS-&gt;new;\n\nsub list : Local {\n    my($self, $c) = @_;\n    $c-&gt;stash(books_rs =&gt; $c-&gt;model('DB::Book'));\n    $c-&gt;stash(books =&gt; [$c-&gt;stash-&gt;{books_rs}-&gt;search({}, {order_by =&gt; 'name ASC'})]);\n    $c-&gt;stash(json_data =&gt; $json-&gt;convert_blessed-&gt;encode($c-&gt;stash-&gt;{books}));\n    $c-&gt;forward('View::JSON');\n}\n\n__PACKAGE__-&gt;meta-&gt;make_immutable;\n\n1;\n</code></pre>\n\n<p>According to this <a href=\"http://dbix-class.35028.n2.nabble.com/DBIX-to-JSON-td2124727.html\" rel=\"nofollow noreferrer\">article</a> is enough the encoding of blessed objects:</p>\n\n<pre><code>$json-&gt;convert_blessed-&gt;encode($c-&gt;stash-&gt;{books})\n</code></pre>\n\n<p>Do I missing somethig here?</p>\n"}, {"tags": ["file", "perl", "filesystems", "move"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540189861, "post_id": 52921403, "comment_id": 92756049, "body": "Can you please show the code that supports (and improves) the description?  While I get <i>some</i> idea from the description, the code makes no sense and altogether I have no idea what you problem is. Apart from the code being unrelated to the description, it is not shown what is in the <code>@events</code> (which is undeclared), and your <code>mv</code> is given strange (unexplained) arguments."}, {"owner": {"reputation": 29, "user_id": 8681526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OE10Ixx6OaQ/AAAAAAAAAAI/AAAAAAAARdU/vJehS9sXKL4/photo.jpg?sz=128", "display_name": "nA Na", "link": "https://stackoverflow.com/users/8681526/na-na"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540193672, "post_id": 52921403, "comment_id": 92757853, "body": "Added the left out code."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540195027, "post_id": 52921403, "comment_id": 92758644, "body": "(1) when you use <code>map</code> on <code>@events</code> you get a list, which you then <code>join</code> by space; this results in <i>one</i> string.  So when you assign that to <code>@events</code>, the array stays with one element, that one string. Is that intended? (2) That <code>mv</code> would move the directory <code>...RunBack</code> and <code>$_</code> into the directory <code>.. files&#47;</code>. Is that intended?"}, {"owner": {"reputation": 29, "user_id": 8681526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OE10Ixx6OaQ/AAAAAAAAAAI/AAAAAAAARdU/vJehS9sXKL4/photo.jpg?sz=128", "display_name": "nA Na", "link": "https://stackoverflow.com/users/8681526/na-na"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540253306, "post_id": 52921403, "comment_id": 92787505, "body": "That is not intended.  I want to move each file within the array from one directory to another."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540256468, "post_id": 52921403, "comment_id": 92788188, "body": "Alright, thought so.  Will try to look at it tonight. It doesn&#39;t help that your regexes are incomplete and that this is clearly not the code that &quot;<i>attempts to move the full directory</i>&quot; (it won&#39;t compile).  I cleaned up a little. (Btw, such a  regex is an absolute horror.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540256656, "post_id": 52921403, "comment_id": 92788231, "body": "So the files in <code>@events</code>  should be moved from <code>RunBackup</code> to <code>RunBackup&#47;files</code>?"}, {"owner": {"reputation": 29, "user_id": 8681526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OE10Ixx6OaQ/AAAAAAAAAAI/AAAAAAAARdU/vJehS9sXKL4/photo.jpg?sz=128", "display_name": "nA Na", "link": "https://stackoverflow.com/users/8681526/na-na"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540259329, "post_id": 52921403, "comment_id": 92788887, "body": "Yes the files in @events are stripped of the front random number and .extention. I want to then move them from RunBackup to RunBackup/files but I no longer have the random number in the begining of the file name or the .extention.  I was hoping to use a wildcard mv <i>&lt;@events&gt;</i> but the wildcard doesn&#39;t translate to the mv command.  Maybe I need to use a regex to put the random number and extention back?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540276852, "post_id": 52921403, "comment_id": 92793555, "body": "Yes, I would suggest to modify the regex so to capture parts.  See the posted answer."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540280586, "post_id": 52921403, "comment_id": 92795492, "body": "Since I am still unsure which files need be moved the answer I posted guesses and has two versions. Hopefully that is enough but please let me know if things aren&#39;t clear."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 8681526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OE10Ixx6OaQ/AAAAAAAAAAI/AAAAAAAARdU/vJehS9sXKL4/photo.jpg?sz=128", "display_name": "nA Na", "link": "https://stackoverflow.com/users/8681526/na-na"}, "edited": false, "score": 0, "creation_date": 1540253179, "post_id": 52929335, "comment_id": 92787468, "body": "I tried your suggestion with moving the files one by one but I get a mv: cannot stat &#39;/home/user/RunBackup/*cake_872_trucks* no such file or directory. I am thinking that somehow the * is not being passed correctly as a wildcard?"}, {"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "reply_to_user": {"reputation": 29, "user_id": 8681526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OE10Ixx6OaQ/AAAAAAAAAAI/AAAAAAAARdU/vJehS9sXKL4/photo.jpg?sz=128", "display_name": "nA Na", "link": "https://stackoverflow.com/users/8681526/na-na"}, "edited": false, "score": 0, "creation_date": 1540279661, "post_id": 52929335, "comment_id": 92794995, "body": "Wildcards work when you pass the command as single string. You may need to escape filenames. But it seems that in your case filenames are ok as is."}], "tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": false, "score": 0, "last_activity_date": 1540279421, "last_edit_date": 1540279421, "creation_date": 1540211125, "answer_id": 52929335, "question_id": 52921403, "link": "https://stackoverflow.com/questions/52921403/regexp-to-compare-partial-filenames-then-moving-to-another-directory-perl/52929335#52929335", "title": "Regexp to Compare partial filenames then moving to another directory perl", "body": "<p>I guess you need something like this:</p>\n\n<pre><code>my $path = '/home/user/RunBackup/';\nmy @files = map {$path.\"*$_*\"} @events;\nsystem(join \" \", \"mv\", @files, \"/home/user/RunBackup/files/\");\n</code></pre>\n\n<p>If there are lots of files you might need to move them one by one:</p>\n\n<pre><code>system(join \" \", \"mv\", $_, \"/home/user/RunBackup/files/\") for @files;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 8681526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OE10Ixx6OaQ/AAAAAAAAAAI/AAAAAAAARdU/vJehS9sXKL4/photo.jpg?sz=128", "display_name": "nA Na", "link": "https://stackoverflow.com/users/8681526/na-na"}, "edited": false, "score": 0, "creation_date": 1540371117, "post_id": 52942634, "comment_id": 92835976, "body": "Sorry.  I am new to perl.  I am trying to use my %files;  foreach my $oldfile (@allfiles) {     $oldfile =~ m/...(...).../;    # your regex, but capture the name     $files{$1} = $oldfile; }            But I keep having an error: Use of uninitialized value $1 in hash element.  I can print out $1 or $2 with my modified regex and see either the random number with $1 or the name of the file with $2.  I will post updated code when I can.  Thank you so much for your help!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 29, "user_id": 8681526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OE10Ixx6OaQ/AAAAAAAAAAI/AAAAAAAARdU/vJehS9sXKL4/photo.jpg?sz=128", "display_name": "nA Na", "link": "https://stackoverflow.com/users/8681526/na-na"}, "edited": false, "score": 0, "creation_date": 1540371337, "post_id": 52942634, "comment_id": 92836106, "body": "@nANa By that I meant to indicate that you use your regex, in which you add parenthesis around the part of the pattern that matches the name itself (<code>cake_872_trucks</code>).  Then that gets saved into the <code>$1</code> variable which you can use for the hash key, and assign the filename as the value for that key.  Sorry it&#39;s not a complete program but i just don&#39;t understand a few important details in your problem."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 29, "user_id": 8681526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OE10Ixx6OaQ/AAAAAAAAAAI/AAAAAAAARdU/vJehS9sXKL4/photo.jpg?sz=128", "display_name": "nA Na", "link": "https://stackoverflow.com/users/8681526/na-na"}, "edited": false, "score": 0, "creation_date": 1540371738, "post_id": 52942634, "comment_id": 92836389, "body": "@nANa  Added a little below that part of the code, like my comment above; does this help?"}, {"owner": {"reputation": 29, "user_id": 8681526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OE10Ixx6OaQ/AAAAAAAAAAI/AAAAAAAARdU/vJehS9sXKL4/photo.jpg?sz=128", "display_name": "nA Na", "link": "https://stackoverflow.com/users/8681526/na-na"}, "edited": false, "score": 0, "creation_date": 1540770088, "post_id": 52942634, "comment_id": 92974244, "body": "I was able to modify my regex and pull out $1 and $2 and export them into a hash but for whatever reason the numbers do not match up.  I have 1906 files in the dir it reads from and $2 will record 1906 entries but the hash ends up with 1626 keys.  Any idea why that would be?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 29, "user_id": 8681526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OE10Ixx6OaQ/AAAAAAAAAAI/AAAAAAAARdU/vJehS9sXKL4/photo.jpg?sz=128", "display_name": "nA Na", "link": "https://stackoverflow.com/users/8681526/na-na"}, "edited": false, "score": 0, "creation_date": 1540798060, "post_id": 52942634, "comment_id": 92980523, "body": "@nANa If you are referring to <code>$files{$2} = [$1];</code> then (1) I don&#39;t understand: if your <code>$2</code> is captured for all entries how does the hash end up with less? The <code>$2</code> <i>are</i> the keys.  (2) I don&#39;t see another set of parens in that regex but: if you attempt to assign a value to a key that doesn&#39;t exist (<code>$files{$2} = ..</code> when <code>$2</code> is undefined) you&#39;ll get a warning. Since you don&#39;t mention that it appears that you get keys for all attempted matches (all <code>$2</code> are defined)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 29, "user_id": 8681526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OE10Ixx6OaQ/AAAAAAAAAAI/AAAAAAAARdU/vJehS9sXKL4/photo.jpg?sz=128", "display_name": "nA Na", "link": "https://stackoverflow.com/users/8681526/na-na"}, "edited": false, "score": 0, "creation_date": 1540798305, "post_id": 52942634, "comment_id": 92980623, "body": "@nANa Note: (1) if your <code>$1</code> is indeed the filename then just use <code>$allfiles</code> (not a good name for the name of a file, though), like I do in the answer  (2) If you only assign <code>$1</code> as  a value you don&#39;t need it in an arrayref (<code>[..]</code>), but can do <code>$h{$2} = $1</code> (or use the filename if that&#39;s indeed the same).  I used an arrayref in case there are more factors to save."}, {"owner": {"reputation": 29, "user_id": 8681526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OE10Ixx6OaQ/AAAAAAAAAAI/AAAAAAAARdU/vJehS9sXKL4/photo.jpg?sz=128", "display_name": "nA Na", "link": "https://stackoverflow.com/users/8681526/na-na"}, "edited": false, "score": 0, "creation_date": 1540867319, "post_id": 52942634, "comment_id": 93012401, "body": "No matter what I try I cannot get the hash to match what the regex finds for the cake_872_trucks.rts files.  If I print them out within the for loop I have the correct number 1906 but the hash ends up with 1626.  The @allfiles array also has 1906.  I am so confused why it will not input all of them in."}, {"owner": {"reputation": 29, "user_id": 8681526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OE10Ixx6OaQ/AAAAAAAAAAI/AAAAAAAARdU/vJehS9sXKL4/photo.jpg?sz=128", "display_name": "nA Na", "link": "https://stackoverflow.com/users/8681526/na-na"}, "edited": false, "score": 0, "creation_date": 1540871705, "post_id": 52942634, "comment_id": 93013326, "body": "I powered through it and did a test and found that the files it left behind have the same names!  I do not know how to account for that... but that is sure a step in the right direction!  Thank you so much for your help!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 29, "user_id": 8681526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OE10Ixx6OaQ/AAAAAAAAAAI/AAAAAAAARdU/vJehS9sXKL4/photo.jpg?sz=128", "display_name": "nA Na", "link": "https://stackoverflow.com/users/8681526/na-na"}, "edited": false, "score": 0, "creation_date": 1540874797, "post_id": 52942634, "comment_id": 93014047, "body": "@nANa Great! :)) That makes sense (if I got it right), as the code find new files with the same <code>cake</code> part and enters that key -- it overwrites the previous (same) key.  So all it needs is that that part, <code>cake_872_trucks</code>, is the same. If there is anything in general I can say, that is: try to simplify that regex. It&#39;s great that you got  that &quot;monster&quot; to work but it&#39;s all harder with such a complicating thing!  Perhaps (in the future), try to devise a careful naming scheme for files so you don&#39;t end up with such numbers (if you control that)?"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1540371689, "last_edit_date": 1540371689, "creation_date": 1540276801, "answer_id": 52942634, "question_id": 52921403, "link": "https://stackoverflow.com/questions/52921403/regexp-to-compare-partial-filenames-then-moving-to-another-directory-perl/52942634#52942634", "title": "Regexp to Compare partial filenames then moving to another directory perl", "body": "<p>Once you are parsing filenames with regex there is no reason not to be able to capture all parts so that you can later reconstitute needed parts of the filename.</p>\n\n<p>I assume that that overly long (and incomplete) regex does what it is meant to.  </p>\n\n<p>I am not sure how the files to move relate to the original files in <code>@allfiles</code>, since those are fetched from <code>/var/user/data</code> while your moving attempt uses <code>/home/user/RunBackup</code>. So code snippets below are more generic.</p>\n\n<p>If what gets moved are precisely the files from <code>@allfiles</code> then just keep the file name  </p>\n\n<pre><code>my %files;\n\nforeach my $oldfile (@allfiles) {\n    $oldfile =~ m/...(...).../;    # your regex, but capture the name\n    $files{$1} = $oldfile;\n}\n</code></pre>\n\n<p>where by <code>/...(...).../</code> I mean to indicate that you use your regex, but to which you add parenthesis around the part of the pattern that matches the name itself.</p>\n\n<p>Then you can later retrieve the filename from the \"name\" of interest (<code>cake_872_trucks</code>).</p>\n\n<p>If, however, the filename components may be needed to patch a different (while related) filename then capture and store the individual components </p>\n\n<pre><code>my %files;\n\nforeach my $oldfile (@allfiles) {\n    $oldfile =~ m/(...)(...)(...)/;  # your regex, just with capture groups\n    $files{$2} = [$1, $3];           # add to %files: name =&gt; [number, ext]\n}\n</code></pre>\n\n<p>The regex only matches (why change names in <code>@allfiles</code> with <code>s///</code>?), and captures. </p>\n\n<p>The first set of parenthesis captures that long leading factor (number) into <code>$1</code>, the second one gets the name (<code>cake_872_trucks</code>) into <code>$2</code>, and the third one has the extension, in <code>$3</code>.</p>\n\n<p>So you end up with a hash with keys that are names of interest, with their values being arrayrefs with all other needed components of the filename.  Please adjust as needed as I don't know what that regex does and may have missed some parts.</p>\n\n<p>Now once you go through <code>@events</code> you can rebuild the name</p>\n\n<pre><code>use File::Copy qw(move);\n\nforeach my $name (@events) {\n    my ($num, $ext) = @{ $files{$name} };\n    my $file = $num . $name . $ext;\n    say \"Move $file from $orig_dir to $dest_dir\";\n    move(\"$orig_dir/$file\", $dest_dir)  or warn \"Can't move $file: $!\";\n}\n</code></pre>\n\n<p>But if the files to move are indeed from <code>@allfiles</code> (as would be the case in this example) then use the first version above to store filenames as values in <code>%files</code> and now retrieve them</p>\n\n<pre><code>foreach my $name (@events) {\n    move (\"$orig_dir/$files{$name}\", $dest_dir) \n        or warn \"Can't move $file: $!\";\n    }\n</code></pre>\n\n<p>I use the core module <a href=\"http://perldoc.perl.org/File/Copy.html\" rel=\"nofollow noreferrer\">File::Copy</a>, instead of going out to the system for the move command.</p>\n\n<p>You <em>can</em> also rebuild the name by going through the directory again, now with names of interest on hand. But that'd be very expensive since you have to try to match every name in <code>@events</code> for every file read in the directory (<em>O(mn)</em> complexity).  </p>\n\n<p>What you asked about can be accomplished with <a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\">glob</a> (and note <a href=\"http://perldoc.perl.org/File/Glob.html\" rel=\"nofollow noreferrer\">File::Glob</a>'s version)</p>\n\n<pre><code>my @files = glob \"$dir/*${name}*\";\n</code></pre>\n\n<p>but you'd have to do this for every <code>$name</code> -- a huge and needless waste of resources. </p>\n\n<hr>\n\n<p>If that regex really must spell out specific numbers, here is a way to organize it for easier digestion (and debugging!): break it into reasonable parts, with a separate variable for each.</p>\n\n<p>Ideally each part of alternation would be one variable</p>\n\n<pre><code>my $p1 = qr/.../;\nmy $p2 = qr/.../;\n...\n\nmy $re_alt = join '|', $p1, $p2, ...;\n\nmy $re_other = qr/.../;\n\n$var =~ m/^($re_alt)($re_other)(.*)$/;  # adjust anchors, captures, etc\n</code></pre>\n\n<p>where the <a href=\"https://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\"><code>qr</code> operator</a> builds a regex pattern.</p>\n\n<p>Adjust those capturing parenthesis, anchors, etc to your actual needs. Breaking it up so that the regex is sensibly split into variables will go a long way for readability, and thus correctness.</p>\n\n<p>Assuming that there is a good reason to seek those specific numbers in filenames, this is also a good way to document any such fixed factors.</p>\n"}], "owner": {"reputation": 29, "user_id": 8681526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OE10Ixx6OaQ/AAAAAAAAAAI/AAAAAAAARdU/vJehS9sXKL4/photo.jpg?sz=128", "display_name": "nA Na", "link": "https://stackoverflow.com/users/8681526/na-na"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 52942634, "answer_count": 2, "score": 1, "last_activity_date": 1540771843, "creation_date": 1540172350, "last_edit_date": 1540771843, "question_id": 52921403, "link": "https://stackoverflow.com/questions/52921403/regexp-to-compare-partial-filenames-then-moving-to-another-directory-perl", "title": "Regexp to Compare partial filenames then moving to another directory perl", "body": "<p>I am working on a script to compare non-running files within a dir to running files from a command. I have to use Regex to strip the front half of the filenames from the dir then regex to strip the filenames out of a command which then records the unmatched names into an array.  </p>\n\n<p>The part I cannot figure out is how I can move the filenames from the old dir into a new directory for future deletion.</p>\n\n<p>In order to move the files I will need to enclose them in wildcards, * due to the random numbers in front of the filenames and the extention. \nexample filenames before and after: </p>\n\n<p>within dir: </p>\n\n<p>13209811124300209156562070_cake_872_trucks.rts</p>\n\n<p>within command: </p>\n\n<p>{\"file 872\",\"cake_872_trucks.rts\",running}</p>\n\n<p>in <code>@events</code> array: </p>\n\n<p>cake_872_trucks</p>\n\n<p>My code:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\nuse File::Copy qw(move);\nuse Data::Dumper;\nuse List::Util 'max';\nmy $orig_dir = \"/var/user/data/\";\nmy $dest_dir = \"/var/user/data/DeleteMe/\";\nmy $dir = \"/var/user/data\";\nopendir(DIR, $dir) or die \"Could not open $dir: $!\\n\";\nmy @allfiles = readdir DIR;\nclose DIR;\nmy %files;\nforeach my $allfiles(@allfiles) {\n$allfiles =~ m/^(13{2}638752056463{2}635181_|1[0-9]{22}_|1[0-9]{23}_|1[0-9]{24}_|1[0-9]{25}_)([0-9a-z]{4}_8[0-9a-z]{2}_[0-9a-z]{2}[a-z][0-9a-z]0[0-9]\\.rts|[a-z][0-9a-z]{3}_[0-9a-z]{4}_8[0-9a-z]{2}_[0-9a-z]{2}[a-z]{2}0[0-9]\\.rts|[a-z]{2}[0-9a-z][0-9]\\N[0-9a-z]\\N[0-9]\\N[0-9]\\N[0-9a-z]{4}\\N[0-9]\\.rts|[a-z]{2}[0-9a-z]{2}\\N{2}[0-9a-z]{2}\\N{2}[0-9][0-9a-z]{2}\\N[0-9]{2}\\.rts|S0{2}2_86F_JATD_01ZF\\.rts)$/im;\n\n$files{$2} = [$1];\n    }\nmy @stripfiles = keys %files;\nmy $cmd = \"*****\";\nmy @runEvents = `$cmd`;\nchomp @runEvents;\nforeach my $running(@runEvents) {\n$running =~ s/^\\{\"blah 8[0-9a-z]{2}\",\"(?&lt;field2&gt;CBE1_D{3}1_8EC_J6TG0{2}\\.rts|[0-9a-z]{4}_8[0-9a-z]{2}_[0-9a-z]{2}[a-z][0-9a-z]0[0-9]\\.rts|[a-z]{2}[0-9a-z]{2}\\N{2}[0-9a-z]{2}\\N{2}[0-9][0-9a-z]{2}\\N[0-9]{2}\\.rts)(?:\",\\{239,20,93,5\\},310{2},20{3},run{2}ing\\}|\",\\{239,20,93,5\\},310{2},[0-9]{2}0{3},run{2}ing\\}|\",\\{239,20,93,5\\},310{2},[0-9]{3}0{4},run{2}ing\\}|\",\\{239,20,93,5\\},3[0-9]0{2},[0-9]{2}0{4},run{2}ing\\})$/$+{field2}/img;\n\n}\nmy @events = grep {my $x = $_; not grep {$x =~/\\Q$_/i}@runEvents}@stripfiles;\nforeach my $name (@events) {\nmy ($randnum, $fnames) = { $files{$name}};\nmy $combined = $randnum . $fnames;\nprint \"Move $file from $orig_dir to $dest_dir\";\nmove (\"$orig_dir/$files{$name}\", $dest_dir)\nor warn \"Can't move $file: $!\";\n}\n#print scalar(grep $_, @stripfiles), \"\\n\";\n#returned 1626\n#print scalar(grep $_, @runEvents), \"\\n\";\n#returned 102  \n#print scalar(grep $_, @allfiles), \"\\n\";\n#returned 1906 \n</code></pre>\n"}, {"tags": ["perl", "graph-theory"], "comments": [{"owner": {"reputation": 3193, "user_id": 10400050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5aecb8122434c05b6b545176abef5b?s=128&d=identicon&r=PG&f=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/10400050/johan"}, "edited": false, "score": 0, "creation_date": 1540153865, "post_id": 52919516, "comment_id": 92748753, "body": "I don&#39;t know perl particularly well, but don&#39;t you already have the path in <code>$p</code>? Before your return statement in <code>visit</code> (<code>if ($g-&gt;is_sink_vertex($v)) { return; }</code>), you should be able to simply add <code>$p</code> to a global variable which then holds all paths."}, {"owner": {"reputation": 831, "user_id": 1679046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97a97d683b2b3040cc355862faaa908d?s=128&d=identicon&r=PG", "display_name": "Jeffrey Kegler", "link": "https://stackoverflow.com/users/1679046/jeffrey-kegler"}, "edited": false, "score": 0, "creation_date": 1540909666, "post_id": 52919516, "comment_id": 93031459, "body": "You also might want to look at <a href=\"https://metacpan.org/pod/GraphViz2::Marpa::PathUtils\" rel=\"nofollow noreferrer\">metacpan.org/pod/GraphViz2::Marpa::PathUtils</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": true, "score": 8, "last_activity_date": 1540162347, "last_edit_date": 1540162347, "creation_date": 1540155205, "answer_id": 52919789, "question_id": 52919516, "link": "https://stackoverflow.com/questions/52919516/how-do-i-find-all-paths-from-sources-to-sinks-in-a-directed-graph/52919789#52919789", "title": "How do I find all paths from sources to sinks in a directed graph?", "body": "<p>I modified your code to pass a partial path into <code>visit()</code> and also to have <code>visit()</code> return all possible complete paths from the supplied partial path:</p>\n\n<pre><code>sub visit($g, $path) {\n    my $v = $path-&gt;[-1];\n    if ($g-&gt;is_sink_vertex($v)) {\n        return $path;\n    } else {\n        my @more;\n        for my $s ($g-&gt;successors($v)) {\n            push @more, visit($g, [ @$path, $s ])\n        }\n        return @more;\n    }\n}\n\nmy @p;\nfor my $v ($g-&gt;source_vertices) {\n    push @p, visit($g, [$v]);\n}\nuse Data::Dumper; say Dumper @p;\n</code></pre>\n\n<p>The loops could then be reduced using map:</p>\n\n<pre><code>sub visit($g, $path) {\n    my $v = $path-&gt;[-1];\n    if ($g-&gt;is_sink_vertex($v)) {\n        return $path;\n    } else {\n        return map { visit($g, [ @$path, $_ ]) } $g-&gt;successors($v);\n    }\n}\n\nmy @p = map { visit($g, [$_]) } $g-&gt;source_vertices;\n</code></pre>\n"}], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 1, "accepted_answer_id": 52919789, "answer_count": 1, "score": 6, "last_activity_date": 1540162347, "creation_date": 1540153255, "question_id": 52919516, "link": "https://stackoverflow.com/questions/52919516/how-do-i-find-all-paths-from-sources-to-sinks-in-a-directed-graph", "title": "How do I find all paths from sources to sinks in a directed graph?", "body": "<p><img src=\"https://i.stack.imgur.com/UkjHT.png\" alt=\"\"></p>\n\n<p>I want to find all paths from sources to sinks. Expected:</p>\n\n<pre><code>(3 11 17 24 32 39 45)\n(3 11 18 26 33 39 45)\n(3 11 18 26 33 40 46)\n(3 11 18 26 33 40 47)\n(3 11 19 27 33 39 45)\n(3 11 19 27 33 40 46)\n(3 11 19 27 33 40 47)\n(3 11 19 27 34 40 46)\n(3 11 19 27 34 40 47)\n(6 12 20 27 33 39 45)\n(6 12 20 27 33 40 46)\n(6 12 20 27 33 40 47)\n(6 12 20 27 34 40 46)\n(6 12 20 27 34 40 47)\n</code></pre>\n\n<p>In my code, I know how to visit each vertex, but how do I properly remember and assemble the full paths?</p>\n\n<pre><code>use 5.028;\nuse feature 'signatures';\nuse strictures;\nuse Graph qw();\n\nmy $g = Graph-&gt;new(directed =&gt; 1);\nfor my $edge_tuple (qw(\n    3-11 6-12 11-17 11-18 11-19 12-20 17-24 18-26 19-27 20-27 24-32 26-33\n    27-33 27-34 32-39 33-39 33-40 34-40 39-45 40-46 40-47\n)) {\n    my ($from, $to) = split '-', $edge_tuple;\n    $g-&gt;add_edge($from, $to);\n}\nsay join ';', $g-&gt;source_vertices;\nsay join ';', $g-&gt;sink_vertices;\n\nsub visit($g, $v, $p) {\n    push @$p, $v;\n    if ($g-&gt;is_sink_vertex($v)) {\n        return;\n    } else {\n        for my $s ($g-&gt;successors($v)) {\n            visit($g, $s, $p)\n        }\n    }\n}\n\nmy $p = [];\nfor my $v ($g-&gt;source_vertices) {\n    visit($g, $v, $p);\n}\nuse Data::Dumper; say Dumper $p;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540107908, "post_id": 52913080, "comment_id": 92736511, "body": "See <a href=\"http://perldoc.perl.org/perlsyn.html#Truth-and-Falsehood\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlsyn.html#Truth-and-Falsehood</a> and <a href=\"https://www.perlmonks.org/?node=what%20is%20true%20and%20false%20in%20Perl%3F\" rel=\"nofollow noreferrer\">perlmonks.org/&hellip;</a> - it checks whether <code>$n</code> contains a true value. In your case, it checks whether <code>$n</code> is 0 or not."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 8453940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d3ff8330d74c8b7691a2f3e42e54bf?s=128&d=identicon&r=PG&f=1", "display_name": "abc", "link": "https://stackoverflow.com/users/8453940/abc"}, "edited": false, "score": 0, "creation_date": 1540109002, "post_id": 52913168, "comment_id": 92736736, "body": "In my example above why would $n ever be not defined? Or in other words when would if($n) return false?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 19, "user_id": 8453940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d3ff8330d74c8b7691a2f3e42e54bf?s=128&d=identicon&r=PG&f=1", "display_name": "abc", "link": "https://stackoverflow.com/users/8453940/abc"}, "edited": false, "score": 0, "creation_date": 1540109474, "post_id": 52913168, "comment_id": 92736825, "body": "@abc Please read the linked pages. They explain what is considered false in Perl. In your case, it&#39;s <code>0</code> that is considered a false value."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 19, "user_id": 8453940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d3ff8330d74c8b7691a2f3e42e54bf?s=128&d=identicon&r=PG&f=1", "display_name": "abc", "link": "https://stackoverflow.com/users/8453940/abc"}, "edited": false, "score": 1, "creation_date": 1540109526, "post_id": 52913168, "comment_id": 92736840, "body": "@abc - <code>$n</code> would be falsey if you called <code>tree()</code> (<code>$n</code> is undefined), <code>tree(&#39;&#39;)</code> (an empty string), <code>tree(0)</code> (numeric zero), or <code>tree(&#39;0&#39;)</code> (the string <code>0</code> - but <code>00</code> is truthy! This case depends on the exact string being <code>0</code>, not just having a numeric value of 0.)."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1540202379, "post_id": 52913168, "comment_id": 92762784, "body": "I find this answer a little confusing. What matters is that the <code>if</code> returns true if and only if <code>$n</code> is positive when interpreted as a number, that is to say, if and only if the <code>for</code> loop will run, which is the intention, as the <code>else</code> is there to provide behavior for the cases in which it won&#39;t run."}], "tags": [], "owner": {"reputation": 36931, "user_id": 225757, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e7140b12949e4652885f6bb02b435f42?s=128&d=identicon&r=PG", "display_name": "Roland Illig", "link": "https://stackoverflow.com/users/225757/roland-illig"}, "is_accepted": true, "score": 0, "last_activity_date": 1540108703, "last_edit_date": 1540108703, "creation_date": 1540108044, "answer_id": 52913168, "question_id": 52913080, "link": "https://stackoverflow.com/questions/52913080/what-does-the-if-n-do-in-the-code-below/52913168#52913168", "title": "What does the if( $n ) do in the code below?", "body": "<p>The code <code>if ($n)</code> <em>almost</em> checks if $n is null.</p>\n\n<p>In Perl, there is no concept of \"null\". A variable is either <code>defined</code> or not. You can check that with <code>if (defined($n))</code>.</p>\n\n<p><code>if ($n)</code> really checks whether <code>$n</code> is <em>truthy</em>. The exact details are documented in the <a href=\"https://perldoc.perl.org/perlsyn.html#Truth-and-Falsehood\" rel=\"nofollow noreferrer\">perlsyn</a> page.</p>\n\n<p>Note that <em>similar</em> rules exist for many programming languages, like C, JavaScript, PHP, Python, Ruby. These languages all define what they consider \"truthy\", but they don't agree with each other.</p>\n"}], "owner": {"reputation": 19, "user_id": 8453940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d3ff8330d74c8b7691a2f3e42e54bf?s=128&d=identicon&r=PG&f=1", "display_name": "abc", "link": "https://stackoverflow.com/users/8453940/abc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 52913168, "answer_count": 1, "score": 0, "last_activity_date": 1540108703, "creation_date": 1540107444, "question_id": 52913080, "link": "https://stackoverflow.com/questions/52913080/what-does-the-if-n-do-in-the-code-below", "title": "What does the if( $n ) do in the code below?", "body": "<p>So I'm new to Perl. I know the code below is suppose to generate full binary trees. But what does the if ($n) mean. Does it check if the variable $n is null? </p>\n\n<pre><code>sub tree {\n  my ($n) = @_;\n  my @result = ();\n  if ( $n ) {\n    for $right_count ( 0 .. $n-1 ) {\n      for $right ( tree( $right_count ) ) {\n        for $left ( tree( ($n-1) - $right_count ) ) {\n          push @result, \"1$left$right\";\n        }\n      }\n    }\n  }\n  else {\n    push @result, \"0\";\n  }\n  return @result;\n}\nforeach $tree ( tree($_) ) {\n  print $tree;\n}\n</code></pre>\n"}, {"tags": ["perl", "find"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1540144360, "post_id": 52911248, "comment_id": 92746210, "body": "See also <a href=\"https://stackoverflow.com/q/52672370/2173773\">How to use mindepth and maxdepth in <code>or</code> alternative in File::Find::Rule?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1540091956, "creation_date": 1540091956, "answer_id": 52911857, "question_id": 52911248, "link": "https://stackoverflow.com/questions/52911248/perl-filefindrule-to-exclude-a-single-dir-only-for-the-top-level/52911857#52911857", "title": "perl - File::Find::Rule to exclude a single dir only for the top level", "body": "<p>You could use the Perl equivalent of <code>find dir -wholename dir/CVS -prune -o -print</code>.</p>\n\n<pre><code>say\n   for\n      File::Find::Rule\n         -&gt;or(\n            File::Find::Rule-&gt;exec(sub { $_[2] eq \"$dir/CVS\" })-&gt;prune-&gt;discard,\n            File::Find::Rule-&gt;new(),\n         )\n         -&gt;in($dir);\n</code></pre>\n\n<p>Another approach would be to use File::Find::Rule to build a list of directories to search, then search those directories with another use of File::Find::Rule. (The Perl equivalent of <code>find ... -print0 | xargs -0 -I{} find {} ...</code>.)</p>\n"}], "owner": {"reputation": 63, "user_id": 5405937, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/de9adf180c7d061a105fa15be25299bf?s=128&d=identicon&r=PG&f=1", "display_name": "Stock Overvalued", "link": "https://stackoverflow.com/users/5405937/stock-overvalued"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540091956, "creation_date": 1540082721, "last_edit_date": 1540089085, "question_id": 52911248, "link": "https://stackoverflow.com/questions/52911248/perl-filefindrule-to-exclude-a-single-dir-only-for-the-top-level", "title": "perl - File::Find::Rule to exclude a single dir only for the top level", "body": "<p>I tried the following to exclude the directory 'CVS'</p>\n\n<pre><code>my $rule = File::Find::Rule-&gt;new;\n$rule-&gt;or($rule-&gt;new-&gt;directory-&gt;name('CVS')-&gt;prune-&gt;discard, $rule-&gt;new);\n</code></pre>\n\n<p>But however this effectively excludes any CVS directories that live inside the directory tree.</p>\n\n<p>Here is an example :</p>\n\n<ul>\n<li>source/CVS (should be excluded) </li>\n<li>source/A/CVS (should not be excluded)</li>\n<li>source/B/</li>\n<li>source/C/dog/CVS (should not be excluded)</li>\n</ul>\n"}, {"tags": ["perl", "scheduled-tasks", "win32ole"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540075108, "post_id": 52910657, "comment_id": 92732224, "body": "Crossposted at <a href=\"https://perlmonks.org/?node_id=1224397\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1224397</a>"}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 2438389, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9b287324ed49554f0d9f4de1f295632e?s=128&d=identicon&r=PG", "display_name": "mikb", "link": "https://stackoverflow.com/users/2438389/mikb"}, "edited": false, "score": 1, "creation_date": 1540268342, "post_id": 52914031, "comment_id": 92790762, "body": "Changing the Query Id to be numeric fixed it. It&#39;s not necessary for the Query Id and the Trigger Id to match (that may seem counter intuitive). &#39;&lt;Query Id=&quot;$#Triggers&quot;&gt;&#39; works just as well. Using qq{..} and $^X are useful improvements to the quality of the code."}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 0, "last_activity_date": 1540115543, "creation_date": 1540115543, "answer_id": 52914031, "question_id": 52910657, "link": "https://stackoverflow.com/questions/52910657/windows-task-scheduler-from-perl-with-win32ole-invalid-query/52914031#52914031", "title": "Windows Task Scheduler from Perl with Win32::OLE - Invalid Query", "body": "<p>The Query Id attribute must be numeric. I got the following to work:</p>\n\n<pre><code>for (10000..10001) {\n    die Win32::OLE-&gt;LastError() unless (push @Triggers, $TriggerSet-&gt;Create(0));\n    $Triggers[$#Triggers]-&gt;{Id} = $_;\n    $Triggers[$#Triggers]-&gt;{Subscription} =\n        qq{&lt;QueryList&gt;\n          &lt;Query Id=\"$_\" Path=\"Microsoft-Windows-NetworkProfile/Operational\"&gt;\n            &lt;Select Path=\"Microsoft-Windows-NetworkProfile/Operational\"&gt;*[System[(EventID=\"$_\")]]&lt;/Select&gt;\n          &lt;/Query&gt;\n        &lt;/QueryList&gt;};\n    die Win32::OLE-&gt;LastError() \n  unless (my $values = $Triggers[$#Triggers]-&gt;ValueQueries-&gt;Create(\"eventId\", \"Event/System/EventID\"));\n    $Triggers[$#Triggers]-&gt;{Enabled} = 1;\n}\n</code></pre>\n\n<p>The relevant, magic change is matching</p>\n\n<pre><code>    $Triggers[$#Triggers]-&gt;{Id} = $_;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>    &lt;Query Id=\"$_\" Path=\"Microsoft-Windows-NetworkProfile/Operational\"&gt;\n</code></pre>\n\n<p>Maybe you can change both to be non-numeric, but with that change, I created tasks that I was able to view afterwards.</p>\n\n<p>Consider using <code>$^X</code> in your code to make the path to Perl more dynamic instead of hardcoding it to <code>C:\\Perl64</code>.</p>\n"}], "owner": {"reputation": 123, "user_id": 2438389, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9b287324ed49554f0d9f4de1f295632e?s=128&d=identicon&r=PG", "display_name": "mikb", "link": "https://stackoverflow.com/users/2438389/mikb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 52914031, "answer_count": 1, "score": 1, "last_activity_date": 1540115543, "creation_date": 1540074803, "question_id": 52910657, "link": "https://stackoverflow.com/questions/52910657/windows-task-scheduler-from-perl-with-win32ole-invalid-query", "title": "Windows Task Scheduler from Perl with Win32::OLE - Invalid Query", "body": "<p>I am trying to use Win32::OLE to create a task on a Windows 10 system, something similar to <a href=\"https://onedrive.live.com/?authkey=%21ABowWrIzVQzcElo&amp;cid=07CD1B37769E1B7D&amp;id=7CD1B37769E1B7D%21102691&amp;parId=7CD1B37769E1B7D%21102690&amp;o=OneUp\" rel=\"nofollow noreferrer\" title=\"SetDefaultPrinterFromSSID.ps1\">SetDefaultPrinterFromSSD.ps1</a>. I tried to manually validate the query by creating the same task by hand in the task scheduler GUI, and that seemed to work.</p>\n\n<p>Here's my test code:</p>\n\n<pre><code>use File::Basename;\nuse Win32;\nuse Win32::OLE; \n$Win32::OLE::Warn = 3; \nuse Data::Dumper; \n\nmy ($me, $dirpath, $suffix) = fileparse($0, qr/\\.[^.]*/);\nmy ($system, $login, $domain, $sidbin, $sidtype, $sidtxt) = \"\";\n$login = Win32::LoginName();\nWin32::LookupAccountName($system, $login, $domain, $sidbin, $sidtype);\n\nmy($Revision, $SubAuthorityCount,@IdentifierAuthorities) = unpack(\"CCnnn\", $sidbin);\nunless (($IdentifierAuthorities[0] || $IdentifierAuthorities[1])) {\n    my($temp, $temp2, @SubAuthorities) =     unpack(\"VVV$SubAuthorityCount\",$sidbin);\n\n    $sidtxt = \"S-$Revision-$IdentifierAuthorities[2]-\".join(\"-\",@SubAuthorities);\n}\n\ndie Win32::OLE-&gt;LastError() unless (my $service = Win32::OLE-&gt;CreateObject('Schedule.Service'));\n$service-&gt;Connect;\n\nmy $RootFolder = $service-&gt;GetFolder('\\\\');\ndie Win32::OLE-&gt;LastError() unless (my $TaskDefinition = $service-&gt;NewTask(0));\n\ndie Win32::OLE-&gt;LastError() unless (my $regInfo = $TaskDefinition-&gt;RegistrationInfo);\n$regInfo-&gt;{Description} = \"Register a perl task as an event $me\";\n$regInfo-&gt;{Author} = \"$domain\\\\$login\";\n$regInfo-&gt;{URI} = \"$sidtxt\\\\$me\";\n\ndie Win32::OLE-&gt;LastError() unless (my $settings = $TaskDefinition-&gt;Settings);\n$settings-&gt;{Enabled} = 1;\n$settings-&gt;{AllowDemandStart} = 1;\n$settings-&gt;{DisallowStartIfOnBatteries} = 0;\n$settings-&gt;{StopIfGoingOnBatteries} = 0;\n$settings-&gt;{Hidden} = 0;\n\nmy @Triggers;\nmy $TriggerSet;\ndie Win32::OLE-&gt;LastError() unless ($TriggerSet = $TaskDefinition-&gt;Triggers);\nfor (10000..10001) {\n    die Win32::OLE-&gt;LastError() unless (push @Triggers, $TriggerSet-&gt;Create(0));\n    $Triggers[$#Triggers]-&gt;{Id} = $_;\n    $Triggers[$#Triggers]-&gt;{Subscription} = \n        \"&lt;QueryList&gt;\n          &lt;Query Id=\\\"event$_\\\" Path=\\\"Microsoft-Windows-NetworkProfile/Operational\\\"&gt;\n            &lt;Select Path=\\\"Microsoft-Windows-NetworkProfile/Operational\\\"&gt;*[System[(EventID=\\\"$_\\\")]]&lt;/Select&gt;\n          &lt;/Query&gt;\n        &lt;/QueryList&gt;\";\n    die Win32::OLE-&gt;LastError() \n  unless (my $values = $Triggers[$#Triggers]-&gt;ValueQueries-&gt;Create(\"eventId\", \"Event/System/EventID\"));\n    $Triggers[$#Triggers]-&gt;{Enabled} = 1;\n}\n\ndie Win32::OLE-&gt;LastError() unless (my $Action = $TaskDefinition-&gt;Actions()-&gt;Create(0));\n$Action-&gt;{Path} = 'C:\\Perl64\\Bin\\Perl.exe';\n$Action-&gt;{Arguments} = \"$0 -f event\\${eventID}\";\n\n$RootFolder-&gt;RegisterTaskDefinition(\"OLE-Test\",$TaskDefinition,6,undef,undef,3);\nprint Dumper $TaskDefinition-&gt;{XmlText};\n</code></pre>\n\n<p>If I run the code with RegisterTaskDefinition with TASK_VALIDATE_ONLY flag set (third parameter = 1), I get a nice XML dump. So far so good.\nWhen I run the code with RegisterTaskDefinition with TASK_CREATE_OR_UPDATE (third parameter = 6), I get this error:</p>\n\n<pre><code>    OLE exception from \"&lt;Unknown Source&gt;\":\n\n    (11,263):Subscription:&lt;QueryList&gt;&lt;Query Id=\"event10000\"\n    Path=\"Microsoft-Windows-NetworkProfile/Operational\"&gt;&lt;Select\n    Path=\"Microsoft-Windows-NetworkProfile/Operational\"&gt;* \n   [System[(EventID=\"10000\")]]&lt;/Select&gt;&lt;/Query&gt;&lt;/QueryList&gt;\n\n    Win32::OLE(0.1712) error 0x80073a99: \"The specified query is invalid\"\n        in METHOD/PROPERTYGET \"RegisterTaskDefinition\" at OLE-test.pl line 63.\n</code></pre>\n\n<p>Anyone familiar enough with Win32::OLE, and the Windows task scheduler XML to explain what I'm doing wrong?</p>\n"}, {"tags": ["perl", "xml-libxml"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1540042056, "post_id": 52906138, "comment_id": 92722938, "body": "Note: Older versions of XML::LibXML requires that you explicitly load XML::LibXML::XPathContext."}, {"owner": {"reputation": 21, "user_id": 10114785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888cfa0aa9b506982b43df80f0b7cce9?s=128&d=identicon&r=PG&f=1", "display_name": "dgate", "link": "https://stackoverflow.com/users/10114785/dgate"}, "edited": false, "score": 0, "creation_date": 1540193070, "post_id": 52906138, "comment_id": 92757513, "body": "Wonderful, thanks. I must admit I was completely unaware of needing to use namespaces with docs that have them so I appreciate the new window on XML processing that you&#39;ve opened for me."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1540041836, "creation_date": 1540041836, "answer_id": 52906138, "question_id": 52905726, "link": "https://stackoverflow.com/questions/52905726/xmllibxml-findnodes-does-not-return-results-when-xmlns-is-present/52906138#52906138", "title": "XML::LibXML findnodes() does not return results when xmlns is present", "body": "<p>You ask to find nodes with namespace null and with name <code>loc</code>. There are no such nodes in the document, so <code>findnodes</code> correctly returns nothing.</p>\n\n<p>You want to find the nodes with namespace <code>http://www.sitemaps.org/schemas/sitemap/0.9</code> and with name <code>loc</code>. You can use the following to achieve that:</p>\n\n<pre><code>my $doc = XML::LibXML-&gt;load_xml( string =&gt; $xml );\n\nmy $xpc = XML::LibXML::XPathContext-&gt;new();\n$xpc-&gt;registerNs( sm =&gt; 'http://www.sitemaps.org/schemas/sitemap/0.9' );\n\nmy ($loc) = $xpc-&gt;findnodes('//sm:loc', $doc);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 10114785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888cfa0aa9b506982b43df80f0b7cce9?s=128&d=identicon&r=PG&f=1", "display_name": "dgate", "link": "https://stackoverflow.com/users/10114785/dgate"}, "edited": false, "score": 0, "creation_date": 1540193299, "post_id": 52911423, "comment_id": 92757653, "body": "I used your site quite a lot when learning about Perl XML processing and can&#39;t believe I&#39;ve not seen the working with XML namespaces page before! Many thanks for the great work you&#39;re doing."}], "tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": false, "score": 2, "last_activity_date": 1540085355, "creation_date": 1540085355, "answer_id": 52911423, "question_id": 52905726, "link": "https://stackoverflow.com/questions/52905726/xmllibxml-findnodes-does-not-return-results-when-xmlns-is-present/52911423#52911423", "title": "XML::LibXML findnodes() does not return results when xmlns is present", "body": "<p>Your code starts by using the <code>XML::LibXML::Reader</code> API and then later uses <code>XML::LibXML-&gt;load_xml</code> to create a DOM from part of the document.  The <code>XML::LibXML::Reader</code> API is usually only used with huge XML documents that would consume large amounts of memory when loaded as a DOM.  If your XML document is not huge, then it's much simpler to use an approach like <a href=\"https://stackoverflow.com/a/52906138/293652\">ikegami's answer</a> which just uses the DOM API to load the whole document and then query it with XPath.</p>\n\n<p>However, if you really do have a huge XML document then you might be interested in solving the problem using the Reader API:</p>\n\n<pre><code>my $sitemap_uri = 'http://www.sitemaps.org/schemas/sitemap/0.9';\nmy $xpc = XML::LibXML::XPathContext-&gt;new();\n$xpc-&gt;registerNs(sm =&gt; $sitemap_uri);\n\nmy $reader = XML::LibXML::Reader-&gt;new(location =&gt; './sitemap.xml');\nwhile ($reader-&gt;read) {\n    $reader-&gt;nextElement('url', $sitemap_uri) or last;\n    my $doc = $reader-&gt;copyCurrentNode(1);\n    say \"Doc = $doc\";\n    my ($loc) = $xpc-&gt;findnodes('//sm:loc', $doc);\n    say \"Loc = $loc\";\n}\n</code></pre>\n\n<p>The call to <code>$reader-&gt;nextElement</code> is a quick way to skip forward to the next occurrence of a particular element.  In this example I matched on both the element name and it's namespace.</p>\n\n<p>The call to <code>$reader-&gt;copyCurrentNode(1)</code> is a convenience method that returns that node and all it's child nodes as a DOM fragment.  You'll need to use <code>XML::LibXML::XPathContext</code> to query that DOM using namespace-aware XPath statements.</p>\n\n<p>My XML::LibXML tutorial includes coverage of <a href=\"http://grantm.github.io/perl-libxml-by-example/namespaces.html\" rel=\"nofollow noreferrer\">working with XML namespaces</a> as well as <a href=\"http://grantm.github.io/perl-libxml-by-example/large-docs.html\" rel=\"nofollow noreferrer\">working with large documents</a>.</p>\n"}], "owner": {"reputation": 21, "user_id": 10114785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888cfa0aa9b506982b43df80f0b7cce9?s=128&d=identicon&r=PG&f=1", "display_name": "dgate", "link": "https://stackoverflow.com/users/10114785/dgate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 640, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1540085355, "creation_date": 1540039058, "question_id": 52905726, "link": "https://stackoverflow.com/questions/52905726/xmllibxml-findnodes-does-not-return-results-when-xmlns-is-present", "title": "XML::LibXML findnodes() does not return results when xmlns is present", "body": "<p>I'm using XML::LibXML::Reader to parse a large document and have run into an issue whereby the attribute xmlns causes findnodes() to fail. I fixed it by added a regex to remove the xmls attribute but I was wondering if there was a more elegant solution involving no regexes. If you remove the regex line ($xml =~ s{xmlns...) you'll see that say \"Loc = $loc\" produces no results. </p>\n\n<p>Here's the code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\nuse XML::LibXML::Reader qw( XML_READER_TYPE_ELEMENT );\n\nmy $xml = &lt;&lt;'__EOI__';\n&lt;url xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\"&gt;\n    &lt;loc&gt;http://example.com&lt;/loc&gt;\n    &lt;lastmod&gt;2018-10-19&lt;/lastmod&gt;\n&lt;/url&gt;\n__EOI__\n\n\n$xml =~ s{xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\"}{};\n\nmy $reader = XML::LibXML::Reader-&gt;new( string =&gt; $xml);\nwhile ( $reader-&gt;read ) {\n    next unless $reader-&gt;nodeType == XML_READER_TYPE_ELEMENT;\n    next unless $reader-&gt;name eq 'url';\n    my $xml = $reader-&gt;readOuterXml;\n    my $doc = XML::LibXML-&gt;load_xml(string =&gt; $xml);\n    say \"Doc = $doc\";\n    my ($loc) = $doc-&gt;findnodes('//loc');\n    say \"Loc = $loc\";\n}\n</code></pre>\n"}, {"tags": ["perl", "web-services", "soap", "otrs", "generic-interface"], "answers": [{"comments": [{"owner": {"reputation": 1794, "user_id": 1344421, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/xeoCo.jpg?s=128&g=1", "display_name": "artgrohe", "link": "https://stackoverflow.com/users/1344421/artgrohe"}, "edited": false, "score": 0, "creation_date": 1540195558, "post_id": 52905963, "comment_id": 92758888, "body": "Thanks, so we have to write custom API extensions on our own, and every customer that wants to use this API has to install the files and do the setup in order to use it.... since we have more than 40 business customers with their own OTRS this will be a lot of fun... <i>sigh</i>"}], "tags": [], "owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "is_accepted": true, "score": 3, "last_activity_date": 1540041009, "last_edit_date": 1540041009, "creation_date": 1540040581, "answer_id": 52905963, "question_id": 52903541, "link": "https://stackoverflow.com/questions/52903541/how-to-get-user-related-data-with-generic-interface-in-otrs-6/52905963#52905963", "title": "How to get user related data with Generic Interface in OTRS 6?", "body": "<p>You can create controller by youself, it's not that hard.</p>\n\n<p>Take a look at existing services in <code>Kernel/GenericInterface/Operation/*</code></p>\n\n<p>Register new operation with XML, look for examples here: <code>Kernel/Config/Files/XML/GenericInterface.xml</code></p>\n\n<p>Don't forget to call:</p>\n\n<p><code>/opt/otrs/bin/otrs.SetPermissions.pl</code> (as root)</p>\n\n<p><code>/opt/otrs/bin/otrs.Console.pl Maint::Config::Rebuild</code></p>\n\n<p>after creation of new files </p>\n"}], "owner": {"reputation": 1794, "user_id": 1344421, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/xeoCo.jpg?s=128&g=1", "display_name": "artgrohe", "link": "https://stackoverflow.com/users/1344421/artgrohe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 1, "accepted_answer_id": 52905963, "answer_count": 1, "score": 2, "last_activity_date": 1581431171, "creation_date": 1540021572, "question_id": 52903541, "link": "https://stackoverflow.com/questions/52903541/how-to-get-user-related-data-with-generic-interface-in-otrs-6", "title": "How to get user related data with Generic Interface in OTRS 6?", "body": "<p>I wonder how to get User Data with Generic Interface. It seems that there is no Controller to get User Data...\nthese are the only controllers:\n<a href=\"https://i.stack.imgur.com/NrZU3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NrZU3.png\" alt=\"enter image description here\"></a>\nSo how can I add user methods to my webservices?\nI tried adding a User section in my webservice.yml and reimported it:</p>\n\n<pre><code>User:\n      Description: Search for User Data\n      MappingInbound: {}\n      MappingOutbound: {}\n      Type: Kernel::System::User\n</code></pre>\n\n<p>but that didn't work. OTRS says that there is no Controller for Kernel::System::User. I also tried only to set Type to User. Same error.</p>\n\n<p>Since the generic interface replaces the deprecated RPC.pl API, it should have at least the same set of methods. \nOtherwise this would'nt be an improvement of the API right?</p>\n"}, {"tags": ["excel", "perl", "csv"], "comments": [{"owner": {"reputation": 36931, "user_id": 225757, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e7140b12949e4652885f6bb02b435f42?s=128&d=identicon&r=PG", "display_name": "Roland Illig", "link": "https://stackoverflow.com/users/225757/roland-illig"}, "edited": false, "score": 3, "creation_date": 1539991086, "post_id": 52900976, "comment_id": 92714101, "body": "Asking someone to &quot;explain each line&quot; probably won&#39;t get you any answers. Do do this well we would have to know exactly what you already understand and what you don&#39;t. Better ask more specific questions."}, {"owner": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "reply_to_user": {"reputation": 36931, "user_id": 225757, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e7140b12949e4652885f6bb02b435f42?s=128&d=identicon&r=PG", "display_name": "Roland Illig", "link": "https://stackoverflow.com/users/225757/roland-illig"}, "edited": false, "score": 0, "creation_date": 1539993766, "post_id": 52900976, "comment_id": 92714559, "body": "You are correct, but as this was my first one.. i wanted one example to be explained in detail and then i would get a grip to do more.  but to be specific : after calling the function &quot;import_data($workbook, $subject, $headers, \\@data);&quot;   what does the below line says ? $worksheet-&gt;add_write_handler(qr[\\w], \\&amp;store_string_widths); ???  what is qr[\\w] mean ? and what is \\&amp; mean in \\&amp;store_string_widths ?"}, {"owner": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "reply_to_user": {"reputation": 36931, "user_id": 225757, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e7140b12949e4652885f6bb02b435f42?s=128&d=identicon&r=PG", "display_name": "Roland Illig", "link": "https://stackoverflow.com/users/225757/roland-illig"}, "edited": false, "score": 0, "creation_date": 1539994042, "post_id": 52900976, "comment_id": 92714603, "body": "i will analyze the code based on your answer, and will ask the next one. waiting for your ans. thanks in advance"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1540016254, "post_id": 52900976, "comment_id": 92717277, "body": "Where did you get that code from in the first place? Did you write it?"}, {"owner": {"reputation": 1058, "user_id": 2438650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c2b3926bd8282c899903b32a6f002b?s=128&d=identicon&r=PG", "display_name": "lod", "link": "https://stackoverflow.com/users/2438650/lod"}, "edited": false, "score": 0, "creation_date": 1540024776, "post_id": 52900976, "comment_id": 92718882, "body": "So qr[\\w] is a bit weird. Perl can use any special character to delimit the start and end of a regex pattern. / is standard but is annoying when dealing with paths and urls so ! is also often used. When [ is used as the starting delimiter ] because the ending delimiter, they ALSO act as the start and end of a character class. I&#39;ve never seen it actually done before. This implementation is functionally identical to qr/\\w/. qr// is a saved and cached regex pattern."}, {"owner": {"reputation": 1058, "user_id": 2438650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c2b3926bd8282c899903b32a6f002b?s=128&d=identicon&r=PG", "display_name": "lod", "link": "https://stackoverflow.com/users/2438650/lod"}, "edited": false, "score": 0, "creation_date": 1540025333, "post_id": 52900976, "comment_id": 92718996, "body": "\\&amp;store_string_widths is a coderef, a reference to the function named store_string_widths. It is typically called as $coderef-&gt;(@args);"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540075414, "post_id": 52900976, "comment_id": 92732278, "body": "Note: <code>undef @data;</code> is a very inefficient way to do <code>@data = ();</code> (empty an array). It releases memory related to <code>@data</code> back to the interpreter so that next time you assign to <code>@data</code>  memory need be acquired again (and perhaps the array structure need be re-built)."}, {"owner": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1540119916, "post_id": 52900976, "comment_id": 92739328, "body": "@MattJacob no i dint write the above code. it is there is our current production environment.(written by my senior) and i was reading and understanding it, to write my own code which does a different reporting work,but wanted piece of code to convert CSV to XL"}, {"owner": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "reply_to_user": {"reputation": 1058, "user_id": 2438650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c2b3926bd8282c899903b32a6f002b?s=128&d=identicon&r=PG", "display_name": "lod", "link": "https://stackoverflow.com/users/2438650/lod"}, "edited": false, "score": 0, "creation_date": 1540120016, "post_id": 52900976, "comment_id": 92739349, "body": "@lod i wanted to know what does qr/\\w/ mean ? what does it do ? i guess the answer is given by Dave Cross below. thanks for ---undef @data;----- i will change it to  --@data = ();--"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "edited": false, "score": 0, "creation_date": 1540121111, "post_id": 52905199, "comment_id": 92739642, "body": "Hi @Dave Cross, thanks for looking in. As i mentioned above, the above code is not written by me, it was written by my senior.i am just trying to understand it.  \\w  --&gt; means to match any &quot;word character&quot; - thanks for this, i will try to explain the code at main parts, please correct if i am wrong"}, {"owner": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "edited": false, "score": 0, "creation_date": 1540122299, "post_id": 52905199, "comment_id": 92739952, "body": "1)in the first iteration of  <code>foreach my $totcsvlis (@totcsvlist)</code> loop lets say $outputfile is matched,so  <code>@data = $parser-&gt;read_file($totcsvlis);</code> - is executed and @data will contain the reference to each of the line of the file $totcsvlis   2)<code>my $headers = shift @data;</code> - first line refrence will be assigned to $headers. 3)<code>import_data($workbook, $subject, $headers, \\@data);</code> - calling the function import_data by passing the above 4 variables..    4)<code>my $worksheet = $workbook-&gt;add_worksheet($base_name);</code> - this will add a sheet to the work book"}, {"owner": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "edited": false, "score": 0, "creation_date": 1540122437, "post_id": 52905199, "comment_id": 92739998, "body": "5)<code>$worksheet-&gt;add_write_handler(qr[\\w], \\&amp;store_string_widths);</code> this will write the added sheet getting the data from where ? and Please explain what is <code>store_string_widths</code> function is doing ?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "edited": false, "score": 0, "creation_date": 1541419317, "post_id": 52905199, "comment_id": 93198340, "body": "@kaushikkm: Apologies for not replying sooner. I&#39;ve been on holiday and avoiding the internet :-) <code>add_write_handler()</code> does not write anything. It adds a handler that is called whenever data is written elsewhere in the code. It&#39;s a slightly advanced topic that isn&#39;t really suitable for explaining in these comments. I suggest you ask the code&#39;s author to sit down with you and explain it."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1540047624, "last_edit_date": 1540047624, "creation_date": 1540035219, "answer_id": 52905199, "question_id": 52900976, "link": "https://stackoverflow.com/questions/52900976/stuck-at-understanding-worksheet-add-write-handlerqr-w-store-string-wid/52905199#52905199", "title": "stuck at understanding &quot;$worksheet-&gt;add_write_handler(qr[\\w], \\&amp;store_string_widths);&quot; line in the below piece of code", "body": "<p>Here is <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX#add_write_handler(-$re,-$code_ref-)\" rel=\"nofollow noreferrer\">the documentation for the <code>add_write_handler()</code></a> method call. It says:</p>\n\n<blockquote>\n  <p><strong>add_write_handler( $re, $code_ref )</strong></p>\n  \n  <p>This method is used to extend the Excel::Writer::XLSX write() method\n  to handle user defined data.</p>\n</blockquote>\n\n<p>And later, it says:</p>\n\n<blockquote>\n  <p>The <code>add_write_handler()</code> method take two arguments, <code>$re</code>, a regular\n  expression to match incoming data and <code>$code_ref</code> a callback function\n  to handle the matched data</p>\n</blockquote>\n\n<p>So, here you have a method call that takes two arguments. The first is a regex that tells the object what type of data this new write handler is used for. The second is a reference to the subroutine that should be used as the write handler for data that matches the regex.</p>\n\n<p>The regex you have is <code>qr[\\w]</code>. The actual regex bit of that is <code>\\w</code>. And that just means \"match a word character\". The <code>qr</code> is to compile a string into a regex and the <code>[ ... ]</code> is just the delimiter for the regex string (<code>qr/.../</code> is one of a class of Perl operators that allows you to use almost any character you want as a delimiter).</p>\n\n<p>So, if your object is called on to write some data that contains at least one word character, the subroutine which is given as the second argument is used. But we take a reference to the subroutine.</p>\n\n<p>Elsewhere in your code, you define the <code>store_string_widths()</code> subroutine. Subroutines in Perl are a lot like variables, and that means that they have their own sigil. The sigil for a subroutine is <code>&amp;</code> (like the <code>$</code> for scalar and <code>@</code> for arrays). You very rarely need the <code>&amp;</code> in modern Perl code, so you won't see it used very often. One place that it is still used, is when we take a reference to a subroutine. You take a reference to any variable by putting a slash in front of the variable's full name (like <code>\\@array</code> or <code>\\%hash</code>) and subroutines are no different. So <code>\\&amp;store_string_widths</code> means \"get a reference to the subroutine called <code>store_string_widths()</code>\".</p>\n\n<p>You say that this is your first Perl program. I have to say that this feels a little ambitious for your first Perl code. I don't cover references at all in my two-day beginners course and on my intermediate course I cover most references, but on mention subroutine references in passing. If you can understand references enough to get this all working, then I think you're doing really well.</p>\n"}], "owner": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540047624, "creation_date": 1539990744, "question_id": 52900976, "link": "https://stackoverflow.com/questions/52900976/stuck-at-understanding-worksheet-add-write-handlerqr-w-store-string-wid", "title": "stuck at understanding &quot;$worksheet-&gt;add_write_handler(qr[\\w], \\&amp;store_string_widths);&quot; line in the below piece of code", "body": "<p>My final goal for my first perl program :To create an excel sheet for reporting purpose and email the sheet as an attachment.</p>\n\n<p>I have reached till creating a csv file. now i wanted to convert this to excel sheet and autofit the content.</p>\n\n<p>I have an example code in our environment,could someone take time to explain each line on the below code, it would be very grateful.</p>\n\n<p>outputfile,urloutputfile,scomoutputfile - are the csv files, now being converted to excel sheets.</p>\n\n<p>Please explain how an element is being passed to the other function also.</p>\n\n<pre><code>my $parser = Text::CSV::Simple-&gt;new;\nmy $workbook = Excel::Writer::XLSX-&gt;new($auditxl);\nmy @totcsvlist;\npush(@totcsvlist,$outputfile);\npush(@totcsvlist,$urloutputfile);\npush(@totcsvlist,$scomoutputfile);\nmy @data;\nmy $subject = 'worksheet';\nforeach my $totcsvlis (@totcsvlist)\n{\n    undef @data;\n    chomp($totcsvlis);\n    if ($totcsvlis eq $outputfile) { $subject=\"Service Status\"; }\n    if ($totcsvlis eq $urloutputfile) { $subject=\"URL Status\"; }\n    if ($totcsvlis eq $scomoutputfile) { $subject=\"SCOM Agent Status\"; }\n    @data = $parser-&gt;read_file($totcsvlis);\n    my $headers = shift @data;\n    import_data($workbook, $subject, $headers, \\@data);\n}\n$workbook-&gt;close();\n\n\nsub autofit_columns {\n    my $worksheet = shift;\n    my $col       = 0;\n    for my $width (@{$worksheet-&gt;{__col_widths}}) {\n        $worksheet-&gt;set_column($col, $col, $width) if $width;\n        $col++;\n    }\n}\n\nsub import_data {\n    my $workbook  = shift;\n    my $base_name = shift;\n    my $colums    = shift;\n    my $data      = shift;\n    my $limit     = shift || 50_000;\n    my $start_row = shift || 1;\n    my $bold = $workbook-&gt;add_format();\n    $bold-&gt;set_bold(1);\n    $bold-&gt;set_bg_color('gray');\n    $bold-&gt;set_border();\n    my $celbor = $workbook-&gt;add_format();\n    $celbor-&gt;set_border();\n    my $worksheet = $workbook-&gt;add_worksheet($base_name);\n    $worksheet-&gt;add_write_handler(qr[\\w], \\&amp;store_string_widths);\n    my $w = 1;\n    $worksheet-&gt;write('A' . $start_row, $colums, $bold);\n    my $i = $start_row;\n    my $qty = 0;\n    for my $row (@$data) {\n        $qty++;\n\n        $worksheet-&gt;write($i++, 0, $row,$celbor);\n    }\n    autofit_columns($worksheet);\n    warn \"Convereted $qty rows.\";\n    return $worksheet;\n}\n\nsub autofit_columns {\n\n    my $worksheet = shift;\n    my $col       = 0;\n\n    for my $width (@{$worksheet-&gt;{__col_widths}}) {\n\n        $worksheet-&gt;set_column($col, $col, $width + 5) if $width;\n        $col++;\n    }\n}\n\nsub store_string_widths {\n\n    my $worksheet = shift;\n    my $col       = $_[1];\n    my $token     = $_[2];\n\n    return if not defined $token;       # Ignore undefs.\n    return if $token eq '';             # Ignore blank cells.\n    return if ref $token eq 'ARRAY';    # Ignore array refs.\n    return if $token =~ /^=/;           # Ignore formula\n\n    return if $token =~ m{^[fh]tt?ps?://};\n    return if $token =~ m{^mailto:};\n    return if $token =~ m{^(?:in|ex)ternal:};\n\n\n    my $old_width    = $worksheet-&gt;{__col_widths}-&gt;[$col];\n    my $string_width = string_width($token);\n\n    if (not defined $old_width or $string_width &gt; $old_width) {\n\n        $worksheet-&gt;{__col_widths}-&gt;[$col] = $string_width;\n    }\n\n    return undef;\n}\n\n\nsub string_width {\n\n    return length $_[0];\n}\n</code></pre>\n\n<p>I have tried to search and read modules used in the above code, but over head.\n<a href=\"https://github.com/jmcnamara/spreadsheet-writeexcel/blob/master/examples/autofit.pl\" rel=\"nofollow noreferrer\">https://github.com/jmcnamara/spreadsheet-writeexcel/blob/master/examples/autofit.pl</a>\n-- has similar code and has provided a basic over view. but i would like to understand in detail.</p>\n\n<p>Thank you so much in advance.\nRegards,\nKaushik KM</p>\n"}, {"tags": ["perl", "loops", "filesystems"], "comments": [{"owner": {"reputation": 6751, "user_id": 3233388, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/33ad2d4deac3458258ad6d62a6b6f350?s=128&d=identicon&r=PG&f=1", "display_name": "Adelin", "link": "https://stackoverflow.com/users/3233388/adelin"}, "edited": false, "score": 1, "creation_date": 1539976650, "post_id": 52898580, "comment_id": 92709724, "body": "Not sure why the downvotes as it&#39;s not a straightforward, easy to find solution. I googled quite some time before posting"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539984117, "post_id": 52898580, "comment_id": 92712402, "body": "Your example isn&#39;t complete and runnable (you don&#39;t use strict and warnings, or define $open_tag). But regardless it&#39;s enough information in this case."}], "answers": [{"comments": [{"owner": {"reputation": 6751, "user_id": 3233388, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/33ad2d4deac3458258ad6d62a6b6f350?s=128&d=identicon&r=PG&f=1", "display_name": "Adelin", "link": "https://stackoverflow.com/users/3233388/adelin"}, "edited": false, "score": 0, "creation_date": 1539977374, "post_id": 52898625, "comment_id": 92710037, "body": "I&#39;m upvoting because I&#39;m sure you know what you&#39;re talking about, but for me the SEEK_SET threw an error, I needed to have the explicit <code>0</code> there, like the accepted answer did"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 6751, "user_id": 3233388, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/33ad2d4deac3458258ad6d62a6b6f350?s=128&d=identicon&r=PG&f=1", "display_name": "Adelin", "link": "https://stackoverflow.com/users/3233388/adelin"}, "edited": false, "score": 1, "creation_date": 1539977471, "post_id": 52898625, "comment_id": 92710075, "body": "Just working from the manual, didn&#39;t have time to test it, sorry about that. Those are from <a href=\"http://perldoc.perl.org/Fcntl.html\" rel=\"nofollow noreferrer\"><code>Fcntl</code></a> and may have to be imported with <code>use</code>. The constants make your code more readable than some arbitrary zero value."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 3, "last_activity_date": 1539976462, "creation_date": 1539976462, "answer_id": 52898625, "question_id": 52898580, "link": "https://stackoverflow.com/questions/52898580/why-does-while-not-loop-after-grep/52898625#52898625", "title": "Why does while not loop after grep?", "body": "<p>You've consumed all the input data and exhausted the filehandle, so unless you rewind the file, you'll need to re-open it to get it back to the start so you can scan again.</p>\n\n<p>You can reposition the read pointer with <a href=\"http://perldoc.perl.org/functions/seek.html\" rel=\"nofollow noreferrer\"><code>seek</code></a>:</p>\n\n<pre><code>seek(FILENAME, 0, SEEK_SET);\n</code></pre>\n\n<p>If you want to do this in one read pass you'll have to capture the input to an array first, then grep and loop again.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1539977521, "last_edit_date": 1539977521, "creation_date": 1539976487, "answer_id": 52898631, "question_id": 52898580, "link": "https://stackoverflow.com/questions/52898580/why-does-while-not-loop-after-grep/52898631#52898631", "title": "Why does while not loop after grep?", "body": "<p>The <code>grep</code> imposes <em>list <a href=\"https://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">context</a></em>, in which <a href=\"https://perldoc.perl.org/perlop.html#I%2fO-Operators\" rel=\"nofollow noreferrer\">&lt;></a> reads the whole file and returns a list of lines.</p>\n\n<p>So there is nothing left on the filehandle to run the <code>while</code>.</p>\n\n<p>If that <code>grep</code> <em>is</em> supposed to go through the whole file, then after that <a href=\"http://perldoc.perl.org/functions/seek.html\" rel=\"nofollow noreferrer\">seek</a> back to the beginning with <code>seek FILENAME, 0, 0</code> and then read again line by line. </p>\n\n<hr>\n\n<p>As the whole file is being read at once, might as well store lines in an array and work with that</p>\n\n<pre><code>my @lines = &lt;FILENAME&gt;;\n# chomp @lines;  # if needed\n\n$needs_tags = 1 if not grep { /.../ } @lines;\n\nfor (@lines) { ... }\n</code></pre>\n"}], "owner": {"reputation": 6751, "user_id": 3233388, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/33ad2d4deac3458258ad6d62a6b6f350?s=128&d=identicon&r=PG&f=1", "display_name": "Adelin", "link": "https://stackoverflow.com/users/3233388/adelin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 52898631, "answer_count": 2, "score": 0, "last_activity_date": 1539977521, "creation_date": 1539976223, "question_id": 52898580, "link": "https://stackoverflow.com/questions/52898580/why-does-while-not-loop-after-grep", "title": "Why does while not loop after grep?", "body": "<p>I have this piece of perl code:</p>\n\n<pre><code>open( FILENAME, \"&lt;\", \"some_valid_path\");\nmy $needs_tags = 0;\nif (!grep{/$open_tag/} &lt;FILENAME&gt;){\n    $needs_tags = 1;\n}\nwhile ( &lt;FILENAME&gt; )\n{\n    warn \"$_\\n\";\n}\n</code></pre>\n\n<p>The problem is that after <code>grep</code>, <code>while</code> no longer runs, at all. But if I remove <code>grep</code>, <code>while</code> works. </p>\n\n<p>Why is this behavior and how to fix?</p>\n"}, {"tags": ["oracle", "perl", "dbi", "dbd"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1539974011, "post_id": 52897828, "comment_id": 92708651, "body": "Reading through <code>Makefile.PL</code> maybe the <code>-l</code> switch, called &quot;direct linking&quot;, could statically link <code>libclntsh.so</code> into DBD::Oracle? The documentation is unclear and I can&#39;t try it myself..."}, {"owner": {"reputation": 538, "user_id": 490240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c64a9d5c93890e5043388e0f8508fc5?s=128&d=identicon&r=PG", "display_name": "jrw32982", "link": "https://stackoverflow.com/users/490240/jrw32982"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1539979629, "post_id": 52897828, "comment_id": 92710821, "body": "Hmmm.  <i>That</i> would be interesting.  I&#39;ll look into it."}], "owner": {"reputation": 538, "user_id": 490240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c64a9d5c93890e5043388e0f8508fc5?s=128&d=identicon&r=PG", "display_name": "jrw32982", "link": "https://stackoverflow.com/users/490240/jrw32982"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539972441, "creation_date": 1539972441, "question_id": 52897828, "link": "https://stackoverflow.com/questions/52897828/how-to-port-pre-built-perl-dbdoracle-to-different-location-of-oracle-libraries", "title": "How to port pre-built Perl DBD::Oracle to different location of Oracle libraries?", "body": "<p>DBD/Oracle/Oracle.so hard-codes the location of Oracle's libclntsh.so (and other libraries) to their location at the time of building/installing DBD::Oracle.</p>\n\n<p>I do not want to build and install DBD::Oracle on all servers, but the location of the libraries differs between servers.  Is there any way around this?  Binary patch Oracle.so? </p>\n"}, {"tags": ["excel", "perl", "loops", "charts"], "answers": [{"tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": true, "score": 0, "last_activity_date": 1540215910, "last_edit_date": 1540215910, "creation_date": 1540197211, "answer_id": 52925222, "question_id": 52896773, "link": "https://stackoverflow.com/questions/52896773/spreadsheetwriteexcel-dynamic-usage-to-create-charts-in-a-same-worksheet/52925222#52925222", "title": "Spreadsheet::WriteExcel : Dynamic usage to create charts in a same worksheet", "body": "<p><code>$TableOfWsToDraw{$Voltage}-&gt;insert_chart( 'E2', $chart );</code> always inserts chart into the same cell E2 and overwrites it. You need to use different cells based on $i. For example: <code>'E'.(2 + $i)</code>.\nYou may need to adjust the width and height of cells to avoid charts overlapping.</p>\n"}], "owner": {"reputation": 3, "user_id": 10530010, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2J6OZLP9XX4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDn3gKgrLK4mxIS5YziItMXyZnFNA/mo/photo.jpg?sz=128", "display_name": "patrick", "link": "https://stackoverflow.com/users/10530010/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 52925222, "answer_count": 1, "score": 0, "last_activity_date": 1540215910, "creation_date": 1539967790, "last_edit_date": 1540065707, "question_id": 52896773, "link": "https://stackoverflow.com/questions/52896773/spreadsheetwriteexcel-dynamic-usage-to-create-charts-in-a-same-worksheet", "title": "Spreadsheet::WriteExcel : Dynamic usage to create charts in a same worksheet", "body": "<p>I actually work on an automation to draw automatically some curves in the same workseet.</p>\n\n<p>I would like to know if someone has tips for me to create a dynamic code to draw chart with the library Spreadsheet::WriteExcel.</p>\n\n<p>I would like to use a for loop to create several charts in the same worksheet. I tried several methods but I do not know how to declare the chart to add with my loop without overwriting it each time.</p>\n\n<p>My code is the following : </p>\n\n<p>sub ExcelGraphGen {</p>\n\n<pre><code>my ($RowMin,$RowMax,$ColMin,$ColMaxToRead,$NumOfColumnMeasured,$wbToWrite,$TableOfWsToDraw_REF,$TableOfWsToWrite_REF,$Voltage_REF,$Columns) = @_;\n\n#For all VG Values\nmy @Alphabet = (\"A\"..\"ZZ\");\n\nforeach my $Voltage [3,2,1,0] {              \n\n    for (my $i=0 ; $i&lt; 3 ; $i++) {\n\n        my $chart = $wbToWrite-&gt;add_chart( type =&gt; 'scatter', embedded =&gt; 1, name =&gt; \"$i\" );\n        my $WorkSheetNameToParse = $TableOfWsToWrite{$Voltage}-&gt;get_name();\n        my $WorkSheetNameToDraw = $TableOfWsToDraw{$Voltage}-&gt;get_name();\n\n        for (my $ColToRead = $i ; $ColToRead &lt; 9; $ColToRead = $ColToRead + 3  ) {\n\n            $chart-&gt;add_series(\n                name =&gt; \"\\'${WorkSheetNameToParse}\\'\\!\\$${Alphabet[$ColToRead]}\\$3\",\n                categories =&gt; \"=${WorkSheetNameToParse}\\!\\$A\\$5:\\$A${RowMax}\",\n                values =&gt; \"=${WorkSheetNameToParse}\\!${Alphabet[$ColToRead]}\\$5:${Alphabet[$ColToRead]}${RowMax}\",\n            );\n        }\n    $TableOfWsToDraw{$Voltage}-&gt;insert_chart( 'E2', $chart );\n\n    }\n}\nreturn 1;            \n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["mysql", "git", "perl", "svn", "ssh"], "comments": [{"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1540455867, "post_id": 52895450, "comment_id": 92874863, "body": "<a href=\"https://metacpan.org/pod/Net::OpenSSH::Parallel\" rel=\"nofollow noreferrer\">Net::OpenSSH::Parallel</a>!"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 4, "creation_date": 1539968755, "post_id": 52895525, "comment_id": 92706344, "body": "Some other options: <a href=\"https://puppet.com/\" rel=\"nofollow noreferrer\">Puppet</a>, and <a href=\"https://www.rexify.org/\" rel=\"nofollow noreferrer\">Rex</a> built in Perl."}], "tags": [], "owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "is_accepted": false, "score": 3, "last_activity_date": 1539971298, "last_edit_date": 1539971298, "creation_date": 1539962854, "answer_id": 52895525, "question_id": 52895450, "link": "https://stackoverflow.com/questions/52895450/how-to-create-perl-script-to-reach-many-hosts-and-update-or-do-custom-jobs/52895525#52895525", "title": "How to create perl script to reach many hosts and update or do custom jobs", "body": "<p>This is what <a href=\"https://www.ansible.com/\" rel=\"nofollow noreferrer\">Ansible</a> is made for. It uses SSH to communicate to multiple hosts, and provides a decent variable scoping system and flow control for applying various tasks to various hosts.</p>\n\n<p>You can build your own configuration management with perl, but ansible with <code>raw</code> commands (which don't require python on the remote system) or more full fledged modules (which do) is already implemented and takes the same approach.  Do yourself a favor- don't reinvent this wheel.  </p>\n\n<p>Ansible is far from perfect, but it covers your use case very well.  </p>\n\n<p>I personally run it from a docker container because python's package installation story is almost as bad as Perl's :P</p>\n"}, {"tags": [], "owner": {"reputation": 153, "user_id": 5121421, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--t2djoF_BT8/AAAAAAAAAAI/AAAAAAAABE0/MOw6c8UxBKo/photo.jpg?sz=128", "display_name": "dominix", "link": "https://stackoverflow.com/users/5121421/dominix"}, "is_accepted": false, "score": 2, "last_activity_date": 1540107319, "last_edit_date": 1540107319, "creation_date": 1540106996, "answer_id": 52913037, "question_id": 52895450, "link": "https://stackoverflow.com/questions/52895450/how-to-create-perl-script-to-reach-many-hosts-and-update-or-do-custom-jobs/52913037#52913037", "title": "How to create perl script to reach many hosts and update or do custom jobs", "body": "<p>On a pure perl basis you also have Rex, see <a href=\"https://www.rexify.org\" rel=\"nofollow noreferrer\">rexify Web site</a>\nWhich is a kind of Ansible, it got ssh, parallel job and plenty of features but more perly.\nOK, it's simpler than Ansible, but it worth a try.</p>\n"}], "owner": {"reputation": 55, "user_id": 6560487, "user_type": "registered", "profile_image": "https://graph.facebook.com/1155596031128553/picture?type=large", "display_name": "Kostadin Kostadinov", "link": "https://stackoverflow.com/users/6560487/kostadin-kostadinov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1540107319, "creation_date": 1539962572, "last_edit_date": 1539970514, "question_id": 52895450, "link": "https://stackoverflow.com/questions/52895450/how-to-create-perl-script-to-reach-many-hosts-and-update-or-do-custom-jobs", "title": "How to create perl script to reach many hosts and update or do custom jobs", "body": "<p>So once a week or a month we do an update to many server machines.\nSometimes a Git pull is enough, some times an SVN update, sometimes there are changes to the database. Or a combination of those. Also there is this project that has many little servers that have a very simplified version of our system and very unreliable internet. Sometimes it might be done from one of the servers, sometimes from the local working computers.</p>\n\n<p>I would like to do our work a bit easier by going through all our servers and doing the appropriate actions. I have found a couple of useful Perl packages: Net::SSH::Perl and Net::SSH::Expect;\nThe Net::SSH::Perl fails me.\nAlso I have not found out how to use its <code>cmd</code> command in succession. For example:</p>\n\n<pre><code>my $ssh = Net::SSH::Perl-&gt;new($host);\n$ssh-&gt;login($user, $pass);\n\nmy($stdout, $stderr, $exit) = $ssh-&gt;cmd('cd web/scripts &amp;&amp; ls -la ');\nwarn Dumper $stdout;\n\nmy($stdout, $stderr, $exit) = $ssh-&gt;cmd('ls -la');\nwarn Dumper $stdout;\n</code></pre>\n\n<p>The 2 <code>ls -la</code> commands return different results. As far as I can understand (and is explained in the documentation) the ssh executes the command and then exits. It is said that I could use SSH 2 version of the SSH protocol (or something like it) and should not have this problem, but it persists (or I don't understand how to use it).</p>\n\n<p>Also if a password is asked of me (for example if I run <code>mysql -u user -p</code>) I am unable to provide it. I've tried it with the <code>$ssh-&gt;cmd($cmd, [ $stdin ])</code> , second option but to no result. The mysql is just an example. I might wish to add an IP to <code>/etc/hosts</code> and be prompted for <code>su</code> password or <code>svn update</code> a file and be asked for my SVN password. I know that most of those processes can be configured to not ask for passwords but we want them to ask for password.</p>\n\n<p>The <code>$ssh-&gt;shell</code> option seems like would do the trick but when I do something like this:</p>\n\n<pre><code>$ssh-&gt;shell();`ls -la`;\n</code></pre>\n\n<p>the backslashed command doesn't go to the ssh-shell. Actually I have no idea where it goes or if does anything. </p>\n\n<p>The Net::SSH::Expect fails me when there is a bad internet connection.</p>\n\n<p>For MySQL purposes I have created a Perl script that makes connections with each different host and does the changes I want. But it would be great if I could make it all in one script.</p>\n\n<p>I would be very grateful to gain some more understanding on this topic.</p>\n"}, {"tags": [".htaccess", "perl", "ldap", "cgi"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 3470396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db771dc5c62338f639cd2ed546a4eea?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3470396/alex"}, "edited": false, "score": 0, "creation_date": 1540483649, "post_id": 52933254, "comment_id": 92892461, "body": "Thanks for the answer Guido. The problem with the CGI portal is that it also checks the user against a user list in a database to determine permissions for actions in the portal, so it would be quite a lot of work to change that. And since the directory I want to link to contains sensitive data, I can&#39;t use anything like rewrite with HTTP_REFERER or HTTP_COOKIE. Can you suggest a way of linking through the portal that incorporates the LDAP authorization from the portal?"}, {"owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "reply_to_user": {"reputation": 75, "user_id": 3470396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db771dc5c62338f639cd2ed546a4eea?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3470396/alex"}, "edited": false, "score": 1, "creation_date": 1540484845, "post_id": 52933254, "comment_id": 92893069, "body": "I don&#39;t really get that. What I meant with my answer was that you should implement a little explorer/Mac Finder for these directories as a component of your portal. If the user requests <a href=\"http://server/cgi-bin/finder.pl/path/to/dir\" rel=\"nofollow noreferrer\">server/cgi-bin/finder.pl/path/to/dir</a>, you display an index page for <code>$docroot&#47;path&#47;to&#47;dir</code>, and if they navigate to <a href=\"http://server/cgi-bin/finder.pl/path/to/dir/secret.pdf\" rel=\"nofollow noreferrer\">server/cgi-bin/finder.pl/path/to/dir/secret.pdf</a>, you return the pdf in the response body. And your cgi script checks whether the user is authenticated, just like the other scripts of your portal. Writing that finder.pl is not rocket science."}], "tags": [], "owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "is_accepted": true, "score": 1, "last_activity_date": 1540223492, "creation_date": 1540223492, "answer_id": 52933254, "question_id": 52895033, "link": "https://stackoverflow.com/questions/52895033/is-it-possible-to-forward-ldap-authorization-from-a-web-portal-cgi-form-to-a-dir/52933254#52933254", "title": "Is it possible to forward ldap authorization from a web portal cgi form to a directory in apache", "body": "<p>You mention that the user can log out and then no longer use the portal. But there is no portable way for logging out a user with basic authentication. They will be able to continue browsing the directories.</p>\n\n<p>Instead of your CGI script that authenticates the user, you can simply configure LDAP authentication for both the data directories and the portal. Ugly, but it would work.</p>\n\n<p>The better and cleaner option for you will be to provide access to the data directories not directly but through the portal only. If you use Apache's path info feature (<a href=\"https://httpd.apache.org/docs/2.4/de/mod/core.html#acceptpathinfo\" rel=\"nofollow noreferrer\">https://httpd.apache.org/docs/2.4/de/mod/core.html#acceptpathinfo</a>) you don't even have to bother about checking the path for malicious \"../../..\" constructs and the URIs will look very natural to your users.</p>\n"}], "owner": {"reputation": 75, "user_id": 3470396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db771dc5c62338f639cd2ed546a4eea?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3470396/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 52933254, "answer_count": 1, "score": 0, "last_activity_date": 1540223492, "creation_date": 1539961204, "last_edit_date": 1539974920, "question_id": 52895033, "link": "https://stackoverflow.com/questions/52895033/is-it-possible-to-forward-ldap-authorization-from-a-web-portal-cgi-form-to-a-dir", "title": "Is it possible to forward ldap authorization from a web portal cgi form to a directory in apache", "body": "<p>I'm working on a web portal where a user is authenticated by LDAP through a perl CGI form. The authentication process uses the Net::LDAPS module. When logged in, the system keeps the user's authenticated status and creates a CGI cookie and the user can perform various actions through the portal, mostly interactions with a database, until the user logs out. </p>\n\n<p>On the same server there's a directory with some files. I want a user to be able to log in to the web portal and then browse the file directory and be able to download those files. </p>\n\n<p>The simplest way I can think of is placing an htaccess file with \"Options +Indexes\" and ldap authentication into the directory, but that would require another login that's not linked with the web portal. </p>\n\n<p>Is there a way to link the web portal cgi-based ldap authentication to htaccess file?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": false, "score": 2, "last_activity_date": 1539961592, "creation_date": 1539961592, "answer_id": 52895160, "question_id": 52894947, "link": "https://stackoverflow.com/questions/52894947/using-two-search-and-replace-regex-commands-in-perl/52895160#52895160", "title": "using two search and replace regex commands in Perl", "body": "<p>Yes, you can combine the 2 substitutions into one with a different regular expression.  You can capture the \"L\" followed by an optional \"C\".</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $str = 'xx';\nwhile (my $currentLine = &lt;DATA&gt;) {\n    $currentLine =~ s/\\.(LC?)(\\d+)/$1_${str}_$2/gi;\n    print $currentLine;\n}\n\n__DATA__\n.L1\n.L2\n.L3\n.LC1\n.LC2\n.LC3\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>L_xx_1\nL_xx_2\nL_xx_3\nLC_xx_1\nLC_xx_2\nLC_xx_3\n</code></pre>\n\n<p>Note that I escaped the first character (the period).  This will only match a literal period.</p>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 8581177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eda842459e34f7dedcb17c6c99592fde?s=128&d=identicon&r=PG&f=1", "display_name": "Sajjad", "link": "https://stackoverflow.com/users/8581177/sajjad"}, "edited": false, "score": 0, "creation_date": 1539965044, "post_id": 52895189, "comment_id": 92704706, "body": "Perfect! @Kamal Nayan"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1539966215, "post_id": 52895189, "comment_id": 92705242, "body": "You have to escape the dot."}], "tags": [], "owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "is_accepted": false, "score": 1, "last_activity_date": 1539968134, "last_edit_date": 1539968134, "creation_date": 1539961697, "answer_id": 52895189, "question_id": 52894947, "link": "https://stackoverflow.com/questions/52894947/using-two-search-and-replace-regex-commands-in-perl/52895189#52895189", "title": "using two search and replace regex commands in Perl", "body": "<p>Modify your regex to <br>\n<code>$currentLine =~ s/\\.L(C?)(\\d+)/L$1_$ARGV[1]_$2/gi;</code></p>\n"}], "owner": {"reputation": 97, "user_id": 8581177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eda842459e34f7dedcb17c6c99592fde?s=128&d=identicon&r=PG&f=1", "display_name": "Sajjad", "link": "https://stackoverflow.com/users/8581177/sajjad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1539968134, "creation_date": 1539960914, "last_edit_date": 1539966134, "question_id": 52894947, "link": "https://stackoverflow.com/questions/52894947/using-two-search-and-replace-regex-commands-in-perl", "title": "using two search and replace regex commands in Perl", "body": "<p>In a file, I have to replace</p>\n\n<pre><code>.L1 to L_xx_1 \n.L2 to L_xx_2 \n.L3 to L_xx_3 \n...\n</code></pre>\n\n<p>and</p>\n\n<pre><code>.LC1 to LC_xx_1\n.LC2 to Lc_xx_2\n.LC3 to LC_xx_3\n...\n</code></pre>\n\n<p>For these two search and replacements I have two different Perl scripts containing following two different loops:</p>\n\n<pre><code>for ($i=0; $currentLine=&lt;file&gt;; $i++) {\n    $currentLine =~ s/.L(\\d+)/L_$ARGV[1]_$1/gi;\n    print $currentLine;\n} \n</code></pre>\n\n<p>and </p>\n\n<pre><code>for ($i=0; $currentLine=&lt;file&gt;; $i++) {\n     $currentLine =~ s/.LC(\\d+)/LC_$ARGV[1]_$1/gi;\n     print $currentLine; \n}\n</code></pre>\n\n<p>respectively.</p>\n\n<p>Can I merge these two loops into one by merging two S commands into one.</p>\n"}, {"tags": ["regex", "bash", "perl"], "comments": [{"owner": {"reputation": 11156, "user_id": 2214695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dee2ef257601e05c5659f04de9cb7c67?s=128&d=identicon&r=PG", "display_name": "oliv", "link": "https://stackoverflow.com/users/2214695/oliv"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1539956713, "post_id": 52893358, "comment_id": 92699879, "body": "@WiktorStribi\u017cew That&#39;s a quick closing. This question is about JSON data and not only multiline matching..."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 11156, "user_id": 2214695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dee2ef257601e05c5659f04de9cb7c67?s=128&d=identicon&r=PG", "display_name": "oliv", "link": "https://stackoverflow.com/users/2214695/oliv"}, "edited": false, "score": 0, "creation_date": 1539956854, "post_id": 52893358, "comment_id": 92699977, "body": "@oliv  Added another close reason: <a href=\"https://stackoverflow.com/questions/1955505/parsing-json-with-unix-tools\">Parsing JSON with Unix tools</a>"}, {"owner": {"reputation": 11156, "user_id": 2214695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dee2ef257601e05c5659f04de9cb7c67?s=128&d=identicon&r=PG", "display_name": "oliv", "link": "https://stackoverflow.com/users/2214695/oliv"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1539957166, "post_id": 52893358, "comment_id": 92700180, "body": "@WiktorStribi\u017cew No doubt these are good resource doc to start with, but for sure doesn&#39;t answer OP&#39;s question about incrementing version number and moving object to a json array..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1539976044, "post_id": 52893358, "comment_id": 92709472, "body": "Why it doesn&#39;t match: it processes the file line by line, and modifiers won&#39;t help since the regex simply always has just one line from the file. Then, <code>main</code> and <code>[</code> are not on the same line; there is no <code>main.*[</code> pattern on any lines.  You&#39;d need to capture and store the version number for the next lines, or read the whole file into a scalar with <code>-0777</code>. But I&#39;d recommend to escape many (easy-error-) details using a module, and to avoid syntax (and maintainability) issues by putting this in a script and run that."}, {"owner": {"reputation": 3434, "user_id": 392986, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/d19d52745553f78f2a1fb39e93aacbf3?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/392986/nick"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1539989002, "post_id": 52893358, "comment_id": 92713680, "body": "@zdim thanks for the explanation. For some reason I didn\u2019t consider parsing the JSON - sometimes you get your head too tied up in a problem to see the obvious solution. But an explainer of why this didn\u2019t work will help me understand how Perl works in future."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1539990465, "post_id": 52893358, "comment_id": 92713985, "body": "@Nick You are welcome, let me know if more can help.  Getting drawn in is completely understood. There is a lot that one <i>can</i> do with a regex -- but it also gets tricky very quick, and it is often a blessing when you can do it nicely otherwise; a similar (and stronger) statement goes for a &quot;one-liner.&quot;  As soon as you feel like you&#39;re cramming more and more into it (a &quot;one-liner&quot; that almost invariably comes with a nasty regex) to make it work it&#39;s likely time to step back, open up a file for the script, and reconsider."}], "answers": [{"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 1, "last_activity_date": 1539964598, "creation_date": 1539964598, "answer_id": 52895999, "question_id": 52893358, "link": "https://stackoverflow.com/questions/52893358/perl-regex-one-liner-not-working-correctly/52895999#52895999", "title": "Perl regex one liner not working correctly", "body": "<p>(now that Ihis question has been reopened and I can post an answer..)</p>\n\n<p>Assuming you fix your data so it's valid JSON (Note the invalid trailing comma), this is an easy <a href=\"https://stedolan.github.io/jq/\" rel=\"nofollow noreferrer\">jq</a> one-liner:</p>\n\n<pre><code>$ jq \"{main: \\\"$version\\\", archive: [ .main, .archive[] ]}\" \"$json\" &gt; new.json\n$ mv -f new.json \"$json\"\n</code></pre>\n\n<p>Just like with HTML and XML, using regular expressions to try to manipulate JSON is a mistake. Use a more appropriate tool.</p>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1540057928, "post_id": 52897866, "comment_id": 92727661, "body": "May I suggest recommending JSON::MaybeXS instead of JSON; neither is core, but JSON does not default to the currently-recommended Cpanel::JSON::XS backend, and adds significant overhead to any backend it uses, whereas JSON::MaybeXS does not have these issues and is largely a drop-in replacement."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1540065356, "post_id": 52897866, "comment_id": 92729825, "body": "@Grinnz Added a comment, thanks for prompting it  I am aware of talk of the missing bug tracker and lack of responsiveness (for ::XS), but I&#39;ve seen counter-claims as well and without a firm knowledge of the matter (and no first-hand experience) I can&#39;t directly recommend to go this way or that.  Thus a generic comment and people can research and make choices."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1540230137, "post_id": 52897866, "comment_id": 92779000, "body": "What&#39;s up with all the -1&#39;s on this page?  Nothing posted is any good?"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 4, "last_activity_date": 1540099135, "last_edit_date": 1540099135, "creation_date": 1539972617, "answer_id": 52897866, "question_id": 52893358, "link": "https://stackoverflow.com/questions/52893358/perl-regex-one-liner-not-working-correctly/52897866#52897866", "title": "Perl regex one liner not working correctly", "body": "<p>Assuming that you can fix your JSON (a trailing comma is not allowed) I'd recommend to process this using a module, and in a script.</p>\n\n<p>An example with <a href=\"https://metacpan.org/pod/JSON\" rel=\"nofollow noreferrer\">JSON</a>, wrapped in a \"one\"-liner as asked</p>\n\n<pre><code>perl -MPath::Tiny -MJSON -0777 -wnE'\n    my $hr = decode_json $_; \n    unshift @{$hr-&gt;{archive}}, $hr-&gt;{main}; \n    $hr-&gt;{main} =~ s/[0-9]+\\.[0-9]+.\\K([0-9]+)/$1+1/e; \n    path(\"new_\".$ARGV)-&gt;spew(encode_json $hr)' \n' data.json\n</code></pre>\n\n<p>The very handy <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> is used to easily dump JSON output. I make the output file name by prefixing <code>new_</code> to the input filename (available in <a href=\"https://perldoc.perl.org/perlvar.html#$ARGV\" rel=\"nofollow noreferrer\">$ARGV  variable</a>), adjust as suitable.</p>\n\n<p>If installing a module is a problem for some reason you can instead simply print the JSON encoded string and redirect the output</p>\n\n<pre><code>perl -MJSON -0777 -wnE'\n    my $hr = decode_json $_; \n    unshift @{$hr-&gt;{archive}}, $hr-&gt;{main}; \n    $hr-&gt;{main} =~ s/[0-9]+\\.[0-9]+.\\K([0-9]+)/$1+1/e; \n    say encode_json $hr \n' data.json &gt; new_data.json\n</code></pre>\n\n<p>These produce the output file with &hairsp; <code>{\"archive\":[\"3.3.0\",\"3.2.2\"],\"main\":\"3.3.1\"}</code></p>\n\n<p>With the <code>-0777</code> <a href=\"https://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\">command switch</a> the whole file is \"slurped\" into a scalar (<code>$_</code>) and <code>-M...</code> loads the given module. Then we use <code>decode_json</code>, which <code>JSON</code> exports by default in its functional interface, to obtain a hashref with data. </p>\n\n<p>The current value of <code>main</code> is then added to the beginning of the arrayref in <code>archive</code> using <a href=\"https://perldoc.perl.org/functions/unshift.html\" rel=\"nofollow noreferrer\">unshift</a>, and is then changed by bumping up its release/patch number, using a regex.</p>\n\n<p>Finally the <code>encode_json</code>, also exported in <code>JSON</code>'s functional interface, is used to  JSON-encode the hashref, what is dumped either with <code>Path::Tiny</code> to a file or to STDOUT for redirection.</p>\n\n<hr>\n\n<p>A word on the number of existing JSON modules is in order, prompted by comment by Grinnz.</p>\n\n<p>The <a href=\"https://metacpan.org/pod/JSON\" rel=\"nofollow noreferrer\">JSON</a> linked above will load the <a href=\"https://metacpan.org/pod/JSON::XS\" rel=\"nofollow noreferrer\">JSON::XS</a> module, and if that is not installed then it falls back to the compatible pure-Perl one, <a href=\"https://metacpan.org/pod/JSON::PP\" rel=\"nofollow noreferrer\">JSON::PP</a>. I'd recommend the XS module, which is much faster and proven in wide use.</p>\n\n<p>Another option is <a href=\"https://metacpan.org/pod/Cpanel::JSON::XS#cPanel-fork\" rel=\"nofollow noreferrer\">Cpanel::JSON::XS</a>, the  <code>JSON::XS</code> fork with a bug tracker and a list of <a href=\"https://metacpan.org/pod/Cpanel::JSON::XS#cPanel-fork\" rel=\"nofollow noreferrer\">bug fixes</a>. I've happily used both without any issues.</p>\n\n<p>To have these tried in order <code>Cpanel::</code> then <code>::XS</code> then <code>::PP</code>, also with some improvements over <code>JSON</code> in how backends are loaded, use <a href=\"https://metacpan.org/pod/JSON::MaybeXS\" rel=\"nofollow noreferrer\">JSON::MaybeXS</a>.</p>\n\n<p>Note that none of these are in core. </p>\n"}, {"tags": [], "owner": {"reputation": 11156, "user_id": 2214695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dee2ef257601e05c5659f04de9cb7c67?s=128&d=identicon&r=PG", "display_name": "oliv", "link": "https://stackoverflow.com/users/2214695/oliv"}, "is_accepted": false, "score": 1, "last_activity_date": 1540990408, "creation_date": 1540990408, "answer_id": 53083823, "question_id": 52893358, "link": "https://stackoverflow.com/questions/52893358/perl-regex-one-liner-not-working-correctly/53083823#53083823", "title": "Perl regex one liner not working correctly", "body": "<p>Using <code>jq</code> to both move the <code>main</code> version number to the array <code>archive</code> and increment the last digit of the <code>main</code> version:</p>\n\n<pre><code>jq '.archive += [.main] |\n    .main |= (split(\".\") | .[-1] |= (tonumber+1|tostring) | join(\".\"))' file\n</code></pre>\n\n<p>The operator <code>+=</code> adds a new value to the array <code>archive</code>.</p>\n\n<p>The operator <code>|=</code> assigns a new value to <code>main</code>. The last element of the splitted string is incremented by 1 and then reassembled.</p>\n"}], "owner": {"reputation": 3434, "user_id": 392986, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/d19d52745553f78f2a1fb39e93aacbf3?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/392986/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 52897866, "answer_count": 3, "score": 0, "last_activity_date": 1540990408, "creation_date": 1539955712, "last_edit_date": 1539988783, "question_id": 52893358, "link": "https://stackoverflow.com/questions/52893358/perl-regex-one-liner-not-working-correctly", "title": "Perl regex one liner not working correctly", "body": "<p>I'm trying to do the following in a bash script to a file:</p>\n\n<p>Before:</p>\n\n<pre><code>{\n    \"main\": \"3.3.0\",\n    \"archive\":[\n        \"3.2.2\"\n    ]\n}\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>{\n    \"main\": \"3.3.1\",\n    \"archive\":[\n        \"3.3.0\",\n        \"3.2.2\"\n    ]\n}\n</code></pre>\n\n<p>using this perl one liner:</p>\n\n<pre><code>perl -pi -e \"s/\\\"main\\\"\\: \\\"(.*?)(\\\".*)\\[/\\\"main\\\": \\\"${version}\\2\\[\\n\\t\\t\\\"\\1\\\",/s\" \"$json\"\n</code></pre>\n\n<p>Where <code>$version</code> holds the new version number and <code>$json</code> is the path to the file.</p>\n\n<p>It seems perl doesn't match, and I can't understand why. Removing the <code>\\[</code> does match, but I can't see what's wrong with that literal.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1539944744, "post_id": 52890172, "comment_id": 92693553, "body": "are you using strict and warnings?"}, {"owner": {"reputation": 61, "user_id": 10347934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd2b89db7289fad8b1496206603718cd?s=128&d=identicon&r=PG&f=1", "display_name": "R F", "link": "https://stackoverflow.com/users/10347934/r-f"}, "edited": false, "score": 0, "creation_date": 1539946089, "post_id": 52890172, "comment_id": 92694241, "body": "yes using both for this"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1539952606, "post_id": 52890172, "comment_id": 92697503, "body": "Just like your previous question, you have failed to demonstrate your problem. If you can&#39;t even describe the problem, how could you hope to fix it? Please see <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for how to do this."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1539954255, "post_id": 52890172, "comment_id": 92698454, "body": "why are you using <code>@{$burStageStats}</code> and not directly <code>@burStageStats</code>  in your foreach loop?"}], "answers": [{"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 2, "last_activity_date": 1539954415, "creation_date": 1539954415, "answer_id": 52892982, "question_id": 52890172, "link": "https://stackoverflow.com/questions/52890172/references-to-hash-insideanother-hash-give-use-of-uninitialized-value-in-concate/52892982#52892982", "title": "References to hash insideanother hash give Use of uninitialized value in concatenation (.) or string", "body": "<p>The warning tells us that <code>$backupStage-&gt;{'additional_event_details'}-&gt;{'backup_stage'}</code> returns a value which does not exist in the hash referenced by <code>$stageIdMap</code>.  e.g., If <code>$backupStage-&gt;{'additional_event_details'}-&gt;{'backup_stage'}</code> is 'foo', then <code>$stageIdMap-&gt;{'foo'}</code> is missing or undefined.</p>\n\n<p>Given the example data at the top of your question, I note that <code>$backupStage-&gt;{'additional_event_details'}-&gt;{'backup_stage'}</code> does not exist in that example data - the <code>$additional_event_details</code> hash doesn't include a <code>backup_stage</code> key.  <code>backup_stage</code> is in <code>$statsHash</code>, not <code>$backupStage-&gt;{'additional_event_details'}</code>.  This seems likely to be the root problem, as there's a very good chance that <code>$stageIdMap-&gt;{undef}</code> (for an actual <code>undef</code>, not the string 'undef') doesn't exist.</p>\n\n<p>If you were to provide a short, self-contained example program which we can run for ourselves to see the problem in action, then we would be able to provide more definite (and probably more useful) assistance.</p>\n"}], "owner": {"reputation": 61, "user_id": 10347934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd2b89db7289fad8b1496206603718cd?s=128&d=identicon&r=PG&f=1", "display_name": "R F", "link": "https://stackoverflow.com/users/10347934/r-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539954415, "creation_date": 1539943439, "last_edit_date": 1539944368, "question_id": 52890172, "link": "https://stackoverflow.com/questions/52890172/references-to-hash-insideanother-hash-give-use-of-uninitialized-value-in-concate", "title": "References to hash insideanother hash give Use of uninitialized value in concatenation (.) or string", "body": "<p>I have an object <code>$burStageStats</code> that I fill with data.</p>\n\n<pre><code>my $additional_event_details = {\n                        'status'     =&gt; '\\N',\n                        'duration'   =&gt; '\\N',\n                        'keyword'    =&gt; $keyword\n            };\n            my $statsHash = {\n                        'time'   =&gt; '\\N',\n                        'event_type'     =&gt; 'INFO',\n                        'backup_stage'   =&gt; '\\N',\n                        'additional_event_details'    =&gt; $additional_event_details\n            };\n            push (@burStageStats, $statsHash);\n</code></pre>\n\n<p>Later I loop through and print the values to a BCP file</p>\n\n<pre><code>foreach my $backup (@{$burStageStats}) {\n    foreach my $backupStage ($backup) {\n        print BCP \"$siteId\\t\" . $backupStage-&gt;{'time'} . \"\\t\" .\n                  $backupStage-&gt;{'event_type'} . \"\\t\" .\n                  $stageIdMap-&gt;{$backupStage-&gt;{'additional_event_details'}-&gt;{'backup_stage'}} . \"\\n\";\n    }\n}\n</code></pre>\n\n<p>I get the following error</p>\n\n<blockquote>\n  <p>Use of uninitialized value in concatenation (.) or string at /data/ddp/current/analysis/TOR/bur/parseburLog line 180,  line 11287.</p>\n</blockquote>\n\n<p>Which I imagine points to the way I reference in the line</p>\n\n<pre><code>              $stageIdMap-&gt;{$backupStage-&gt;{'additional_event_details'}-&gt;{'backup_stage'}} . \"\\t\" .\n</code></pre>\n\n<p>But I am not sure how to write that line properly. The code works but I would like less errors reported obviously.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 1, "creation_date": 1539918909, "post_id": 52885378, "comment_id": 92683781, "body": "I don&#39;t see numbers on either side of the <code>\\\\1</code> capture group in your replacement.  That being said, doing regex replacements on HTML content usually is not such a good idea.  Use a parser instead."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5010374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655f68f710b826f5b01632f288ac2b27?s=128&d=identicon&r=PG&f=1", "display_name": "Kongmingtwo", "link": "https://stackoverflow.com/users/5010374/kongmingtwo"}, "edited": false, "score": 0, "creation_date": 1539919741, "post_id": 52885402, "comment_id": 92683937, "body": "<code>cat mapred-site.xml | perl -p0e &quot;s&#47;(yarn.app.mapreduce.am.resource.mb&lt;\\&#47;name&gt;\\s*?&lt;value&gt;)...&zwnj;&#8203;.(&lt;\\&#47;value&gt;)&#47;\\${1}40&zwnj;&#8203;96\\${2}&#47;s&quot;</code> worked wonderfully, thank you!"}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 2, "last_activity_date": 1539918977, "creation_date": 1539918977, "answer_id": 52885402, "question_id": 52885378, "link": "https://stackoverflow.com/questions/52885378/perl-regex-replacement-when-replacement-is-numeric/52885402#52885402", "title": "Perl regex replacement when replacement is numeric", "body": "<p>Using <code>\\1</code>, <code>\\2</code> etc. on the right side of a regex is about a million years old anyway; the recommended way is to use <code>$1</code>, <code>$2</code>, etc. And if you use those you can use braces to separate the variable name from any neighboring stuff, like <code>${1}FOO${2}</code> (or, just as well, <code>${1}4096${2}</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 0, "last_activity_date": 1539992159, "creation_date": 1539992159, "answer_id": 52901105, "question_id": 52885378, "link": "https://stackoverflow.com/questions/52885378/perl-regex-replacement-when-replacement-is-numeric/52901105#52901105", "title": "Perl regex replacement when replacement is numeric", "body": "<p>Here is a less fragile/more maintainable way to do it, using <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"nofollow noreferrer\">Mojo::DOM</a>:</p>\n\n<pre><code>cat mapred-site.xml | perl -CSD -0777 -MMojo::DOM -pe '$_ = Mojo::DOM-&gt;new-&gt;xml(1)-&gt;parse($_); $_-&gt;find(\"property &gt; name\")-&gt;first(sub { $_-&gt;text eq \"yarn.app.mapreduce.am.resource.mb\" })-&gt;following(\"value\")-&gt;first-&gt;content(4096)'\n</code></pre>\n\n<p>As a more readable script:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Mojo::DOM;\nuse open ':std', ':encoding(UTF-8)';\n\nmy $dom = do { local $/; Mojo::DOM-&gt;new-&gt;xml(1)-&gt;parse(readline \\*STDIN) };\n\nmy $name = $dom-&gt;find('property &gt; name')\n  -&gt;first(sub { $_-&gt;text eq 'yarn.app.mapreduce.am.resource.mb' });\n$name-&gt;following('value')-&gt;first-&gt;content(4096);\n\nprint $dom-&gt;to_string;\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5010374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655f68f710b826f5b01632f288ac2b27?s=128&d=identicon&r=PG&f=1", "display_name": "Kongmingtwo", "link": "https://stackoverflow.com/users/5010374/kongmingtwo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 52885402, "answer_count": 2, "score": 1, "last_activity_date": 1539992159, "creation_date": 1539918734, "question_id": 52885378, "link": "https://stackoverflow.com/questions/52885378/perl-regex-replacement-when-replacement-is-numeric", "title": "Perl regex replacement when replacement is numeric", "body": "<p>This is probably something really silly, and I apologize if that is the case. I don't know exactly what to search for, and I haven't had any luck with the searches I've ran over the past half hour or so. Anyway... </p>\n\n<p>So I want to automate making a simple change to xml with perl as part of a build process. This is the change I'm making, it's part of a config file called <code>mapred-site.xml</code></p>\n\n<pre><code>&lt;property&gt;\n  &lt;name&gt;yarn.app.mapreduce.am.resource.mb&lt;/name&gt;\n-    &lt;value&gt;1024&lt;/value&gt;\n+    &lt;value&gt;4096&lt;/value&gt;\n&lt;/property&gt;\n</code></pre>\n\n<p>I've got a perl regex replacement that does exactly what I need it to do, until I change this <code>FOO</code> to <code>4096</code></p>\n\n<pre><code>cat mapred-site.xml | perl -p0e \"s/(yarn.app.mapreduce.am.resource.mb&lt;\\/name&gt;\\s*?&lt;value&gt;)....(&lt;\\/value&gt;)/\\\\1FOO\\\\2/s\"\n</code></pre>\n\n<p>Guessing that the problem is that there are numbers directly next to the <code>\\\\1</code> referring to the first portion, and it's pulling them in and trying to do <code>\\\\14096</code> or similar, but I haven't been able to come up with a solution. </p>\n\n<p>I apologize if the command itself is sloppy/inefficient, I'm still just getting started with these commands.</p>\n"}, {"tags": ["string", "perl", "unique"], "comments": [{"owner": {"reputation": 95, "user_id": 10317001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e68552265c320a1694760abb3811dcbb?s=128&d=identicon&r=PG&f=1", "display_name": "FranceMadrid", "link": "https://stackoverflow.com/users/10317001/francemadrid"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1539887734, "post_id": 52880379, "comment_id": 92674404, "body": "@toolic Thanks for the response! How do I print the value that was counted more than once with this implementation of code?"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 10317001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e68552265c320a1694760abb3811dcbb?s=128&d=identicon&r=PG&f=1", "display_name": "FranceMadrid", "link": "https://stackoverflow.com/users/10317001/francemadrid"}, "edited": false, "score": 0, "creation_date": 1539887890, "post_id": 52880451, "comment_id": 92674486, "body": "Thank you that worked! Is there anyway that I can set $_, equal to a variable that holds the value that occurs more than once? So that I may be able to do comparisons globally in my program? Thank you very much for your guidance in advance."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 95, "user_id": 10317001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e68552265c320a1694760abb3811dcbb?s=128&d=identicon&r=PG&f=1", "display_name": "FranceMadrid", "link": "https://stackoverflow.com/users/10317001/francemadrid"}, "edited": false, "score": 0, "creation_date": 1539888038, "post_id": 52880451, "comment_id": 92674576, "body": "What do you mean by &quot;the value that occurs more than once&quot;? There can be more than one value that occurs more than once. The expression <code>grep { $count{ $_ } &gt; 1 } keys %count;</code> returns all the values that occur more than once. You can hold on that list by using <code>my @duplicates = grep { $count{ $_ } &gt; 1 } keys %count;</code> ."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1539888367, "post_id": 52880451, "comment_id": 92674751, "body": "or make the list of only non-duplicated values with <code>my @non_duplicates = grep { $count{$_} == 1 } @words;</code>"}, {"owner": {"reputation": 95, "user_id": 10317001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e68552265c320a1694760abb3811dcbb?s=128&d=identicon&r=PG&f=1", "display_name": "FranceMadrid", "link": "https://stackoverflow.com/users/10317001/francemadrid"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1539888531, "post_id": 52880451, "comment_id": 92674822, "body": "@ysth Thank you so much. That helped a lot. I think that was what I&#39;ve been looking for."}, {"owner": {"reputation": 95, "user_id": 10317001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e68552265c320a1694760abb3811dcbb?s=128&d=identicon&r=PG&f=1", "display_name": "FranceMadrid", "link": "https://stackoverflow.com/users/10317001/francemadrid"}, "edited": false, "score": 0, "creation_date": 1539888551, "post_id": 52880451, "comment_id": 92674830, "body": "@Corion Thank you, that helped a lot."}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 2, "last_activity_date": 1539952013, "last_edit_date": 1539952013, "creation_date": 1539887694, "answer_id": 52880451, "question_id": 52880379, "link": "https://stackoverflow.com/questions/52880379/how-to-find-non-unique-value-from-array-when-using-unique-in-perl/52880451#52880451", "title": "How to find &#39;non-unique&#39; value from array when using &#39;unique&#39; in perl", "body": "<p>Counting/finding duplicates is easiest done with a hash:</p>\n\n<pre><code>my %count;\n$count{ $_ }++ for @words;\nprint \"$_ occurs more than once\\n\"\n    for grep { $count{ $_ } &gt; 1 } @words;\n</code></pre>\n\n<p>Finding the values that only occur once is done by looking for the elements in <code>%count</code> that have a count of 1:</p>\n\n<pre><code>my %count;\n$count{ $_ }++ for @words;\nmy @unique_words = grep { $count{ $_ } == 1 } @words;\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 10317001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e68552265c320a1694760abb3811dcbb?s=128&d=identicon&r=PG&f=1", "display_name": "FranceMadrid", "link": "https://stackoverflow.com/users/10317001/francemadrid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539952013, "creation_date": 1539887357, "question_id": 52880379, "link": "https://stackoverflow.com/questions/52880379/how-to-find-non-unique-value-from-array-when-using-unique-in-perl", "title": "How to find &#39;non-unique&#39; value from array when using &#39;unique&#39; in perl", "body": "<pre><code>my @words = qw(1 2 3 4 4);\nmy @unique_words = uniq @words;\n\nprint @unique_words; # 1 2 3 4\n</code></pre>\n\n<p>I am interested in finding which value was non-unique, in this case <code>4</code>. And being able to set it equal to a variable so that I can keep track of which specific value  was re-occuring. </p>\n\n<p>I want to do this so I can implement a code that says \"if my string contains <em>duplicating value from array</em> completely remove <em>duplicating value from array</em> from string\". In this case, if a string contained <code>1 2 3 4 4</code>. I would like it after the if statement to contain <code>1 2 3</code>.</p>\n"}, {"tags": ["perl", "foreach"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1539884972, "post_id": 52879675, "comment_id": 92672976, "body": "Always use <code>use strict; use warnings qw( all );</code>"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1539888511, "post_id": 52879675, "comment_id": 92674815, "body": "What do you mean by &quot;the hash from the file&quot;? Files contain bytes, not data structures!"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 10377474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066fbba87b33a9807ecbfd2a393f8afa?s=128&d=identicon&r=PG&f=1", "display_name": "JohnEgg", "link": "https://stackoverflow.com/users/10377474/johnegg"}, "edited": false, "score": 0, "creation_date": 1539885403, "post_id": 52879800, "comment_id": 92673203, "body": "I tried implementing your code and it didn&#39;t solve my problem. Could you perhaps give me a few more lines for guidance?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1539884908, "creation_date": 1539884908, "answer_id": 52879800, "question_id": 52879675, "link": "https://stackoverflow.com/questions/52879675/need-to-find-repeated-value-in-string-in-foreach-loop-in-perl/52879800#52879800", "title": "Need to find repeated value in string in foreach loop in perl", "body": "<p>You say \"delete from a string variable\", but you appear to mean \"proceed to the next pass of the loop\".</p>\n\n<pre><code>my %seen;\nfor my $val (sort keys %hash) {\n   my $id = $hash{$val};\n   next if $seen{$id}++;\n\n   ...\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 10377474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066fbba87b33a9807ecbfd2a393f8afa?s=128&d=identicon&r=PG&f=1", "display_name": "JohnEgg", "link": "https://stackoverflow.com/users/10377474/johnegg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1539885299, "creation_date": 1539884358, "last_edit_date": 1539885299, "question_id": 52879675, "link": "https://stackoverflow.com/questions/52879675/need-to-find-repeated-value-in-string-in-foreach-loop-in-perl", "title": "Need to find repeated value in string in foreach loop in perl", "body": "<p>I am opening a file that contains a hash, and creating a string, and setting my string equal to the value of that key in the hash, so I may hold all containments of that hash key value inside my string. I am running this through a foreach so I get every value from the file's hash into my string:</p>\n\n<pre><code>open FN, '&lt;', $file or die;\n\n%hash = packageInt(); // this is the hash from the file I just opened above '$file'\n\nforeach my $val (sort keys %hash) {\n\n$id = $hash{$val}{id};\n\nprint \"IDS: $id\\n\";\n\n\n}\n</code></pre>\n\n<p>When I print $id, I get 5 values:</p>\n\n<pre><code>4353\n7653\n5431\n4353\n8769\n</code></pre>\n\n<p>I want to find the values that are repeated, in this case <code>4353</code> and DELETE them from my string variable <code>$id</code>, and reassign <code>$id</code> to only those values that are not replicated. In this case, <code>7653, 5431, 8769</code>. Because my criteria is not interested in doing tests on duplicate ids. I am having a hard time figuring out how to track the ID values that are duplicates and deleting them from the string because the string is in a foreach loop. Any help or guidance is greatly appreciated.</p>\n"}, {"tags": ["perl", "mmap", "ioctl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1539879870, "post_id": 52878411, "comment_id": 92670414, "body": "Just allocate <code>BUFFER_SIZE * 2</code>, then you can find a page of memory within the buffer."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1539882741, "post_id": 52878411, "comment_id": 92671872, "body": "You might also be able to use the (ancient) Mmap module"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10525051, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-epnP_Fn8dm4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXQzmwyv2C7M3fyG6nTAdA3sdgJeQ/mo/photo.jpg?sz=128", "display_name": "Eyal BD", "link": "https://stackoverflow.com/users/10525051/eyal-bd"}, "edited": false, "score": 0, "creation_date": 1539944815, "post_id": 52881227, "comment_id": 92693589, "body": "Thanks for the answer. The mmap solutions by IO::AIO or maybe File::Map or Sys::Mmap are good and are the preferred way of course. However in my production environment I can&#39;t (for now) add modules to the perl installation (locally compiled) and none of those modules present in the installation. So I guess the only way for me is to allocate some more memory and calculate the aligned address."}], "tags": [], "owner": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1539891025, "creation_date": 1539891025, "answer_id": 52881227, "question_id": 52878411, "link": "https://stackoverflow.com/questions/52878411/os-page-aligned-allocation-in-perl/52881227#52881227", "title": "OS Page aligned allocation in Perl", "body": "<p>There are multiple solutions, but going by the book, you can use the <code>IO::AIO</code> module, which has a <code>IO::AIO::mmap</code> function. Basically, you'd do something like this (untested):</p>\n\n<pre><code>    use IO::AIO\n\n    IO::AIO::mmap\n          my $buffer, BUFFER_SIZE, IO::AIO::PROT_READ | IO::AIO::PROT_WRITE,\n          IO::AIO::MAP_PRIVATE | IO::AIO::MAP_ANONYMOUS, undef\n       or die \"mmap failure: $!\";\n</code></pre>\n\n<p>The <code>$buffer</code> will be unmapped automatically when you <code>undef</code> it or it goes out of scope, or you can use <code>IO::AIO::munmap $buffer</code>.</p>\n\n<p>You can also doing it yourself in other ways by aligning some larger memory allocation, but you at least would need to query the page size, so a pure-perl solution cannot be done portably without the help of modules, and/or wasting memory.</p>\n"}, {"comments": [{"owner": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "edited": false, "score": 0, "creation_date": 1540249616, "post_id": 52890804, "comment_id": 92786769, "body": "Haven&#39;t run your script, but getconf isn&#39;t defined aynwhere, and it&#39;s not coming from syscall.ph."}, {"owner": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "edited": false, "score": 0, "creation_date": 1540249735, "post_id": 52890804, "comment_id": 92786797, "body": "Also, it&#39;s not quite what posix memalign does - your example overallocates memory by a factor of two, something that posix_memalign does not (in actual implementations) do. Of course, this is quite acceptable in many situations."}, {"owner": {"reputation": 33, "user_id": 10525051, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-epnP_Fn8dm4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXQzmwyv2C7M3fyG6nTAdA3sdgJeQ/mo/photo.jpg?sz=128", "display_name": "Eyal BD", "link": "https://stackoverflow.com/users/10525051/eyal-bd"}, "reply_to_user": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "edited": false, "score": 0, "creation_date": 1540377707, "post_id": 52890804, "comment_id": 92840133, "body": "It is not a factor of two, just an additional size of a page. it is (size + ALIGNMENT - 1). syscall.ph is needed for the cat() function example. Not part of valloc implementation."}, {"owner": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "edited": false, "score": 0, "creation_date": 1540599782, "post_id": 52890804, "comment_id": 92938609, "body": "Indeed - I wrongly assumed the alignment is the size of the buffer in the question, but it&#39;s not."}], "tags": [], "owner": {"reputation": 33, "user_id": 10525051, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-epnP_Fn8dm4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXQzmwyv2C7M3fyG6nTAdA3sdgJeQ/mo/photo.jpg?sz=128", "display_name": "Eyal BD", "link": "https://stackoverflow.com/users/10525051/eyal-bd"}, "is_accepted": false, "score": 1, "last_activity_date": 1539966850, "last_edit_date": 1539966850, "creation_date": 1539945916, "answer_id": 52890804, "question_id": 52878411, "link": "https://stackoverflow.com/questions/52878411/os-page-aligned-allocation-in-perl/52890804#52890804", "title": "OS Page aligned allocation in Perl", "body": "<p>Here is an example that solves the problem without using mmap.</p>\n\n<p>Basically the code does what posix_memalign() does.</p>\n\n<pre><code># Required for 'syscall' below\n#\nrequire 'syscall.ph';\n\nuse strict;\nuse warnings;\n\n# Linux / unix specific\n#\nmy $PAGE_SIZE = `getconf PAGE_SIZE`;\n\n# Arg = size of requested buffer\n#\n# return = 1. allocated buffer\n#          2. C address of allocated buffer\n#          3. Offset for aligned buffer\n#\n# Code is not portable and tested on x86_64 only.\n#\nsub valloc\n{\n    my ($size, $ALIGN) = @_;\n\n    $ALIGN = $PAGE_SIZE\n        unless ($ALIGN);\n\n    my $buffer = \"\\0\" x ($size + $ALIGN - 1);\n\n    my $address = unpack('Q', pack('p', $buffer));\n    my $aligned_address = (($address + $ALIGN - 1) &amp; (-$ALIGN));\n    my $offset = $aligned_address - $address;\n\n    return ($buffer, $address, $offset);\n}\n#-------------------------------------------------------------\n\n# Example to a function that accepts C address\n#\nsub cat\n{\n    my ($path) = @_;\n\n    open (my $fh, '&lt;', $path) || die \"$path: $!\\n\";\n\n    my $size = -s $fh;\n    my ($buffer, $address, $offset) = valloc($size);\n    syscall(&amp;SYS_read, fileno($fh), $address + $offset, $size);\n    close $fh;\n\n    return substr($buffer, $offset, $size);\n}\n#-------------------------------------------------------------\n\nmy $content = cat(__FILE__);\nprint $content;\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10525051, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-epnP_Fn8dm4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXQzmwyv2C7M3fyG6nTAdA3sdgJeQ/mo/photo.jpg?sz=128", "display_name": "Eyal BD", "link": "https://stackoverflow.com/users/10525051/eyal-bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 52881227, "answer_count": 2, "score": 2, "last_activity_date": 1539966850, "creation_date": 1539879454, "question_id": 52878411, "link": "https://stackoverflow.com/questions/52878411/os-page-aligned-allocation-in-perl", "title": "OS Page aligned allocation in Perl", "body": "<p>A driver exposes its API by ioctl interface.</p>\n\n<p>The argument for the ioctl call is a memory buffer that its address\nmust aligned to OS page size.</p>\n\n<p>For example the allocation in C would call valloc (or posix_memalign)</p>\n\n<p>Simple Perl allocation of the buffer like this:</p>\n\n<pre><code> $buffer = \"\\0\" x  BUFFER_SIZE ;\n</code></pre>\n\n<p>is not enough since most probably the starting address of the scalar\nwont be aligned to OS page size.</p>\n\n<p>Is there a simple way to achieve this?</p>\n\n<p>Note: I convert the buffer to the C address like this:</p>\n\n<pre><code> my $c_address = unpack('Q', pack('P', $buffer));\n</code></pre>\n\n<p>Thanks!\nEyal</p>\n"}, {"tags": ["perl", "dependency-injection"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1539892868, "post_id": 52878399, "comment_id": 92676857, "body": "Be careful not to use <a href=\"https://perldoc.pl/variables/%24a\" rel=\"nofollow noreferrer\">$a or $b</a> outside of sort blocks. They are special global variables, and declaring them as lexicals will break sort blocks in that scope. The easiest way to avoid this is to mentally replace them with <code>$x</code> and <code>$y</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "edited": false, "score": 0, "creation_date": 1540282392, "post_id": 52881567, "comment_id": 92796401, "body": "<code>keys %{$wire-&gt;config}</code> is actually what I was needed. Thanks a lot!"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 1, "last_activity_date": 1539892459, "creation_date": 1539892459, "answer_id": 52881567, "question_id": 52878399, "link": "https://stackoverflow.com/questions/52878399/how-to-get-service-names-with-beamwire/52881567#52881567", "title": "How to get service names with Beam::Wire?", "body": "<p>The <code>services</code> attribute is more of a cache as mentioned in the docs. It will not be populated with all services after building the object, only with each service as it's built for a <code>get</code> or <code>set</code> call. You can pass the <code>eager</code> value for a service <a href=\"https://metacpan.org/pod/Beam::Wire::Help::Config#OBJECT-LIFECYCLE\" rel=\"nofollow noreferrer\">lifecycle configuration</a> to cause it to be cached as soon as the object is created.</p>\n\n<p>If you just want a list of all top level services from the configuration file, you can check the keys of the config hash.</p>\n\n<pre><code>my @services = keys %{$wire-&gt;config};\n</code></pre>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 52881567, "answer_count": 1, "score": 0, "last_activity_date": 1539892459, "creation_date": 1539879399, "question_id": 52878399, "link": "https://stackoverflow.com/questions/52878399/how-to-get-service-names-with-beamwire", "title": "How to get service names with Beam::Wire?", "body": "<p>I have to reverse engineer one Perl project that use Beam::Wire for dependency injection.</p>\n\n<p>How can I get list of services names ?</p>\n\n<p>Attribute <a href=\"https://metacpan.org/pod/Beam::Wire#services\" rel=\"nofollow noreferrer\">services</a> seems not working.</p>\n\n<p>Here is my code</p>\n\n<pre><code># wire.yml\ncaptain:\n    class: Person\n    args:\n        name: Malcolm Reynolds\n        rank: Captain\nfirst_officer:\n    $class: Person\n    name: Zo\u00eb Alleyne Washburne\n    rank: Commander\n\n# script.pl\nuse Beam::Wire;\nuse Data::Dumper;\nmy $wire = Beam::Wire-&gt;new( file =&gt; 'wire.yml' );\nmy $a = $wire-&gt;services;\nwarn Dumper $a;           # shows $VAR1 = {} but I expected [ 'captain', 'first_officer' ]\n</code></pre>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 820, "user_id": 4957508, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wBY-4a1-0jo/AAAAAAAAAAI/AAAAAAAAAfc/4BCoMMK1rqg/photo.jpg?sz=128", "display_name": "Jeff Schaller", "link": "https://stackoverflow.com/users/4957508/jeff-schaller"}, "edited": false, "score": 2, "creation_date": 1539877486, "post_id": 52889880, "comment_id": 92692295, "body": "What strptime function? Perl? C?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539969451, "post_id": 52889880, "comment_id": 92706611, "body": "This almost looks like a default output of the <a href=\"https://linux.die.net/man/1/date\" rel=\"nofollow noreferrer\">date</a> utility. If <code>+ 000</code> is a typo and there isn&#39;t actually a space after the <code>+</code>, the str(pf)time pattern would be <code>%a %b %e %H:%M:%S %z %Y</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "Nate"}, "edited": false, "score": 0, "creation_date": 1539926288, "post_id": 52889881, "comment_id": 92692296, "body": "Are you able to explain what &quot;Time::Piece;&quot; does? Also how come at the last line, strftime is used, not strptime? :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1539952292, "post_id": 52889881, "comment_id": 92697329, "body": "@Nate, <code>use Time::Piece;</code> loads the module, and <code>strptime</code> isn&#39;t used in the last line because the last line doesn&#39;t attempt to parse a date-time string."}, {"owner": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1540065069, "post_id": 52889881, "comment_id": 92729750, "body": "@Nate Think &quot;(str)ing (p)arse&quot; for <code>strptime</code>; Think &quot;(str)ing (f)ormat&quot; for <code>strftime</code>."}], "tags": [], "owner": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "is_accepted": true, "score": 1, "last_activity_date": 1540064939, "last_edit_date": 1540064939, "creation_date": 1539878720, "answer_id": 52889881, "question_id": 52889880, "link": "https://stackoverflow.com/questions/52889880/how-do-i-parse-a-date-time-format-using-strptime-function/52889881#52889881", "title": "How do I parse a date/time format using strptime() function?", "body": "<p>The man pages for <a href=\"http://man7.org/linux/man-pages/man3/strptime.3.html\" rel=\"nofollow noreferrer\">strptime</a> show the API details as well as an example for C.</p>\n\n<p>In Perl, the <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow noreferrer\">Time::Piece</a> module (which is part of the Perl core), provides the <code>strptime</code> function.  Examples are contained in the module's documentation.</p>\n\n<p>For example, this Perl snippet will convert the date as formatted to an ISO 8601 notation:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Time::Piece;\nmy $t = Time::Piece-&gt;strptime\n    (\"Tue Jan 16 11:18:20 +0000 2018\", \"%a %b %d %H:%M:%S %z %Y\");\nprint $t-&gt;strftime(\"%Y-%m-%dT%H:%M:%S\\n\");\n</code></pre>\n\n<p>...producing the output:</p>\n\n<pre><code>2018-01-16T11:18:20\n</code></pre>\n\n<p>A shorthand way of producing the ISO date is simply:</p>\n\n<pre><code>print $t-&gt;datetime, \"\\n\";\n</code></pre>\n\n<p>whereas you can obtain the corresponding epoch seconds thusly:</p>\n\n<pre><code>print $t-&gt;epoch, \"\\n\";\n</code></pre>\n\n<p>Thus,<code>strptime</code> converts a string of a time's description (its first argument) into its components, based upon the definition of its pieces in its second argument. <code>strftime</code> is the converse operation, converting time components of a time structure loaded by <code>strptime</code>, into a string description.</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1539942452, "question_id": 476357}, "owner": {"reputation": 53, "user_id": 10535182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bfb79656f9247065a328388a3cedb16?s=128&d=identicon&r=PG&f=1", "display_name": "Zac", "link": "https://stackoverflow.com/users/10535182/zac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 751, "favorite_count": 1, "accepted_answer_id": 52889881, "answer_count": 1, "score": 2, "last_activity_date": 1540064939, "creation_date": 1539877330, "question_id": 52889880, "link": "https://stackoverflow.com/questions/52889880/how-do-i-parse-a-date-time-format-using-strptime-function", "title": "How do I parse a date/time format using strptime() function?", "body": "<p>How do I parse a date/time format using the strptime() function?</p>\n\n<p>The data/time format to be converted is:\ne.g. Tue Jan 16 11:18:20 + 000 2018</p>\n"}, {"tags": ["perl", "unit-testing"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 2, "creation_date": 1539877285, "post_id": 52876734, "comment_id": 92668971, "body": "Could <a href=\"https://metacpan.org/pod/App::Prove::Plugin::Count\" rel=\"nofollow noreferrer\"><code>App::Prove::Plugin::Count</code></a> be of interest?"}, {"owner": {"reputation": 9014, "user_id": 86404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1656e3b5977a7695b6f4044edb5ea85b?s=128&d=identicon&r=PG", "display_name": "BlairHippo", "link": "https://stackoverflow.com/users/86404/blairhippo"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1539879019, "post_id": 52876734, "comment_id": 92669963, "body": "Possibly. Enough to warrant a closer look, at the very least."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1539903303, "post_id": 52876734, "comment_id": 92680707, "body": "Just to clarify for myself -- do you mean that you&#39;d like more detail in that final &quot;Test Summary Report&quot; (or so) ?  (After &quot;completion&quot; the tool shows details -- but you do also mention &quot;end-of-test&quot; summary)"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1539935628, "post_id": 52876734, "comment_id": 92688844, "body": "If no existing tool meets your needs, note that TAP output is comparatively easy to parse so you would be able to build your own reporting tools."}, {"owner": {"reputation": 9014, "user_id": 86404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1656e3b5977a7695b6f4044edb5ea85b?s=128&d=identicon&r=PG", "display_name": "BlairHippo", "link": "https://stackoverflow.com/users/86404/blairhippo"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1539960559, "post_id": 52876734, "comment_id": 92702238, "body": "@zdim, yup, ideally that&#39;s where I&#39;d like to see the information."}, {"owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "edited": false, "score": 0, "creation_date": 1540183952, "post_id": 52876734, "comment_id": 92754379, "body": "I would like to see in the question an example of your test suite code, and maybe an example of the summary output you mention."}], "owner": {"reputation": 9014, "user_id": 86404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1656e3b5977a7695b6f4044edb5ea85b?s=128&d=identicon&r=PG", "display_name": "BlairHippo", "link": "https://stackoverflow.com/users/86404/blairhippo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1539876917, "creation_date": 1539874145, "last_edit_date": 1539876917, "question_id": 52876734, "link": "https://stackoverflow.com/questions/52876734/getting-a-summary-of-failed-testmore-tests", "title": "Getting a summary of failed Test::More tests", "body": "<p>The project I'm working on (Perl) has a truly immense unit test suite. Depending on what code I'm working with, the number of tests run can easily hit tens of thousands.</p>\n\n<p>When the <code>prove</code> command runs to completion, it indicates by number which tests failed. This gives me enough information to scroll back and figure out which tests failed and why, but it can be a nuisance.</p>\n\n<p>Is there a way to get <code>prove</code> to provide a more thorough end-of-test summary of what failed? I'd at least like to know the names (and preferably packages) of the failed tests, but showing the failure messages would be welcome too.</p>\n\n<p>Also, when you provide <code>prove</code> with a huge list of tests via the <code>--tests</code> parameter (which one of our tools does), is there a way for <code>prove</code> to provide an ongoing \"Completed X out of Y tests\" status update?</p>\n"}, {"tags": ["perl", "character"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1539880469, "creation_date": 1539880469, "answer_id": 52878693, "question_id": 52876546, "link": "https://stackoverflow.com/questions/52876546/perl-issue-with-character/52878693#52878693", "title": "Perl issue with % character", "body": "<p>You aren't removing the line endings. Normally, the following would do:</p>\n\n<pre><code>chomp($line);\n</code></pre>\n\n<p>However, you are reading a Windows text file (lines ending with CRLF) on a unix system (lines ending with LF). Either convert the file (e.g. using <code>dos2unix</code>), or use the following instead of <code>chomp</code>:</p>\n\n<pre><code>$line =~ s/\\s+\\z//;\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 7475104, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YmjsUusP_LI/AAAAAAAAAAI/AAAAAAAAADQ/v6uFEd7x58U/photo.jpg?sz=128", "display_name": "Chitransh Agarwal", "link": "https://stackoverflow.com/users/7475104/chitransh-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 52878693, "answer_count": 1, "score": 0, "last_activity_date": 1539880469, "creation_date": 1539873572, "question_id": 52876546, "link": "https://stackoverflow.com/questions/52876546/perl-issue-with-character", "title": "Perl issue with % character", "body": "<p>I am writing a script where i would be running a command on bash shell and printing out the result.\nI would read from a file A.txt</p>\n\n<p>A.txt</p>\n\n<pre><code>AAA:BBB\nCCC:DDD\nAAA:FFF\n</code></pre>\n\n<p>MyCode</p>\n\n<pre><code>my $file = /path/to/A.txt;\nopen(my $fh, '&lt;', $file)\n or die \"Couldn't open file\";\n\nwhile (my $line = &lt;$fh&gt;){\n my ($ins,$pre) = split /:/, $line;\n\n if ((substr $ins,0,1) eq \"A\"){\n  $mo = \"A/C/$ins\";\n }\n elsif ((substr $ins,0,1) eq \"C\"){\n  $mo = \"X/Y/$ins\";\n }\n\n Env::modulecmd:load($mo);\n print \"Running command cat $pre\\%\";\n $result = `cat '$pre'\\% | head`;\n Env:modulecmd:unload($mo);\n print $result;\n}\n\nclose $fh;\n</code></pre>\n\n<p>I am facing a strange issue, the print command only works right for the last line, for the rest it prints the '%' character in the next line, but for the last line it works exactly as expected.</p>\n\n<p>So as a result the $result variable is only rightfully evaluated for the last line of A.txt and the rest of 2 lines doesn't give any output.</p>\n\n<p>Can anyone please suggest what am i doing wrong here.</p>\n\n<p>Thank you for your time</p>\n"}, {"tags": ["regex", "perl", "awk", "sed"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5613277"}, "edited": false, "score": 0, "creation_date": 1539889295, "post_id": 52877881, "comment_id": 92675217, "body": "Thank you very much!  Unfortunatley, { and _asm are often not on the same line, but this will get me started."}], "tags": [], "owner": {"reputation": 4745, "user_id": 4289380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73c4c5f526ed9027b3ee1d0f0ddad3e4?s=128&d=identicon&r=PG&f=1", "display_name": "Corentin Limier", "link": "https://stackoverflow.com/users/4289380/corentin-limier"}, "is_accepted": true, "score": 0, "last_activity_date": 1539879972, "last_edit_date": 1539879972, "creation_date": 1539877678, "answer_id": 52877881, "question_id": 52876542, "link": "https://stackoverflow.com/questions/52876542/insert-text-at-the-beginning-of-every-line-between-two-patterns-inclusive/52877881#52877881", "title": "Insert text at the beginning of every line between two patterns, inclusive", "body": "<p>Using this as test file : </p>\n\n<pre><code>It works\nelanblkaneglka\n_asm {\nbla\nbla\n}\nbjkzrbgjkzbjkerzeg\nzjegbzkjebzkjg{\n   blabla\n}\n__asm { bla bla }\n_asm bla bla\nbajekbajkegbakeg\nNext lines should not work\n_asm\n{blabla}\n_asm {\nbla{\n  bla\n}\nbla\n}\n</code></pre>\n\n<p>I tried this : </p>\n\n<pre><code>awk '/_+asm *\\{/{bracket=1}/_+asm/{comment=1}comment{print \"//##\", $0}!comment;!bracket||/\\}/{comment=0;bracket=0}' test.txt\n</code></pre>\n\n<p><strong>Of course this is ugly but regular expressions are not appropriate for this kind of problem.</strong></p>\n\n<ul>\n<li><p>Does not work if there are other brackets inside a __asm{} block.</p></li>\n<li><p>Does not work if { and __asm are not on the same line.</p></li>\n</ul>\n\n<p>Result : </p>\n\n<pre><code>It works\nelanblkaneglka\n//## _asm {\n//## bla\n//## bla\n//## }\nbjkzrbgjkzbjkerzeg\nzjegbzkjebzkjg{\n   blabla\n}\n//## __asm { bla bla }\n//## _asm bla bla\nbajekbajkegbakeg\nNext lines should not work\n//## _asm\n{blabla}\n//## _asm {\n//## bla{\n//##   bla\n//## }\nbla\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1539895649, "creation_date": 1539895649, "answer_id": 52882313, "question_id": 52876542, "link": "https://stackoverflow.com/questions/52876542/insert-text-at-the-beginning-of-every-line-between-two-patterns-inclusive/52882313#52882313", "title": "Insert text at the beginning of every line between two patterns, inclusive", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed '/^_\\+asm/!b;s@^@//## @;/{/!b;/{.*}/b;:a;n;s@^@//## @;/}/!ba' file\n</code></pre>\n\n<p>Focus on lines that begin <code>_asm</code>. Insert the comment characters and if the line contains no braces or opening and closing braces, then we are done. Otherwise, print the current line and read in the next. Comment this line and repeat until a closing brace is found.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5613277"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 52877881, "answer_count": 2, "score": -1, "last_activity_date": 1539895649, "creation_date": 1539873556, "question_id": 52876542, "link": "https://stackoverflow.com/questions/52876542/insert-text-at-the-beginning-of-every-line-between-two-patterns-inclusive", "title": "Insert text at the beginning of every line between two patterns, inclusive", "body": "<p>I'm trying to comment-out all of the _asm (and sometimes __asm) clocks in some C files.  So for example</p>\n\n<pre><code>_asm {\nbla\nbla\n}\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>//## _asm {\n//## bla\n//## bla\n//## }\n</code></pre>\n\n<p>and</p>\n\n<pre><code>__asm { bla bla }\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>//## __asm { bla bla }\n</code></pre>\n\n<p>Also, sometimes there are _asm lines without braces</p>\n\n<pre><code>_asm bla bla\n</code></pre>\n\n<p>And that should become</p>\n\n<pre><code>//## _asm bla bla\n</code></pre>\n\n<p>I doubt that this can be done with one single sed or awk expression, and that's okay.  I just need to be able to comment-out these blocks in the same exact way, so that I can undo everything simply by removing all of the \"//## \" patterns from the file.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl", "docker", "docker-compose", "dockerfile", "docker-for-mac"], "answers": [{"tags": [], "owner": {"reputation": 1794, "user_id": 1344421, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/xeoCo.jpg?s=128&g=1", "display_name": "artgrohe", "link": "https://stackoverflow.com/users/1344421/artgrohe"}, "is_accepted": true, "score": 21, "last_activity_date": 1539861060, "creation_date": 1539861060, "answer_id": 52872667, "question_id": 52871619, "link": "https://stackoverflow.com/questions/52871619/docker-for-mac-file-system-became-read-only-which-breaks-almost-all-features-o/52872667#52872667", "title": "Docker [for mac] file system became read-only which breaks almost all features of docker", "body": "<p>Go to your docker for mac Icon in the top right, click on it and then click Restart.\nAfter that Docker works as expected.</p>\n\n<p>This seems to be an temporary issue since I cannot reproduce it after restarting docker. My guess is that I had an network communication breakdown while docker tried to download and install the packages in the Dockerfile.</p>\n"}], "owner": {"reputation": 1794, "user_id": 1344421, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/xeoCo.jpg?s=128&g=1", "display_name": "artgrohe", "link": "https://stackoverflow.com/users/1344421/artgrohe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7646, "favorite_count": 0, "accepted_answer_id": 52872667, "answer_count": 1, "score": 6, "last_activity_date": 1539861060, "creation_date": 1539857044, "last_edit_date": 1539857350, "question_id": 52871619, "link": "https://stackoverflow.com/questions/52871619/docker-for-mac-file-system-became-read-only-which-breaks-almost-all-features-o", "title": "Docker [for mac] file system became read-only which breaks almost all features of docker", "body": "<p>My Docker ran into an error state, where I cannot use it anymore.</p>\n\n<p>output of <code>docker system info</code>:</p>\n\n<pre><code>Containers: 14\nRunning: 2\nPaused: 0\nStopped: 12\nImages: 61\nServer Version: 18.03.1-ce\nStorage Driver: overlay2\nBacking Filesystem: extfs\nSupports d_type: true\nNative Overlay Diff: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\nVolume: local\nNetwork: bridge host macvlan null overlay\nLog: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\nSwarm: error\nNodeID:\nError: open /var/lib/docker/swarm/worker/tasks.db: read-only file system\nIs Manager: false\nNode Address: 192.168.65.3\nRuntimes: runc\nDefault Runtime: runc\nInit Binary: docker-init\ncontainerd version: 773c489c9c1b21a6d78b5c538cd395416ec50f88\nrunc version: 4fc53a81fb7c994640722ac585fa9ca548971871\ninit version: 949e6fa\nSecurity Options:\nseccomp\nProfile: default\nKernel Version: 4.9.87-linuxkit-aufs\nOperating System: Docker for Mac\nOSType: linux\nArchitecture: x86_64\nCPUs: 2\nTotal Memory: 1.952GiB\nName: linuxkit-025000000001\nID: MCSC:SFXH:R3JC:NU4D:OJ5V:K4B5:LPMJ:2BFL:LHT3:LYCI:XKY2:DTE6\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nHTTP Proxy: docker.for.mac.http.internal:3128\nHTTPS Proxy: docker.for.mac.http.internal:3129\nRegistry: https://index.docker.io/v1/\nLabels:\nExperimental: false\nInsecure Registries:\n127.0.0.0/8\nLive Restore Enabled: false\n</code></pre>\n\n<p>This behaviour occured, after I built the following Dockerfile:</p>\n\n<blockquote>\n  <p>FROM perl:5.20</p>\n  \n  <p>RUN apt-get update &amp;&amp; apt-get install -y libsoap-lite-perl \\<br>\n      &amp;&amp; rm -rf /var/lib/apt/lists/*</p>\n  \n  <p>RUN cpan SOAP::LITE</p>\n</blockquote>\n\n<p>the error message when I try to build an image or run a container or remove an image is always similar to this:</p>\n\n<pre><code>Error: open /var/lib/docker/swarm/worker/tasks.db: read-only file system\n</code></pre>\n\n<p>for example if I try to execute this command:</p>\n\n<pre><code>docker container run -it perl:5.20 bash\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>docker: Error response from daemon: mkdir /var/lib/docker/overlay2/1b966e163e500a8c78a64e8d0f14984b091c1c5fe188a60b8bd030672d3138d9-init: read-only file system.\n</code></pre>\n\n<p>How can I reset my docker so these errors go away?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 2, "creation_date": 1539846630, "post_id": 52867572, "comment_id": 92650927, "body": "If you&#39;re comfortable with mathematical logic notation, you might want to read about <a href=\"https://en.wikipedia.org/wiki/De_Morgan%27s_laws\" rel=\"nofollow noreferrer\">De Morgan&#39;s laws</a>. They describe how a condition like \u201cequal to 497 or equal to 200\u201d must be negated. In Perl code: <code>!($x || $y) == !$x &amp;&amp; !$y</code>, and <code>!($x &amp;&amp; $y) == !$x || !$y</code>."}], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 6, "last_activity_date": 1539841405, "creation_date": 1539841405, "answer_id": 52867669, "question_id": 52867572, "link": "https://stackoverflow.com/questions/52867572/logical-operators-or-assignment-in-perl-cannot-work/52867669#52867669", "title": "Logical operators or assignment in Perl cannot work?", "body": "<p>It says not equal because <code>$id != 200</code> is true.  <code>||</code> returns true if either operand is true.</p>\n\n<p>You want to say:</p>\n\n<pre><code>if ($id != 497 &amp;&amp; $id != 200)\n</code></pre>\n\n<p>so not equal is printed only when $id is neither 497 or 200.</p>\n"}], "owner": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 52867669, "answer_count": 1, "score": 0, "last_activity_date": 1539841405, "creation_date": 1539840955, "question_id": 52867572, "link": "https://stackoverflow.com/questions/52867572/logical-operators-or-assignment-in-perl-cannot-work", "title": "Logical operators or assignment in Perl cannot work?", "body": "<p>I want to check my variable $id is equal 497 or equal 200 ,\nif $id not equal 497 or $id not equal 200 then mail,\nbut when i run the example as below, I set $id =497 by hand , but run the code ,it's print \"not equal\\n\";</p>\n\n<pre><code>my $id = 497;\nif($id != 497 || $id != 200)\n   {\n      print \"not equal\\n\";\n   }\nelse\n  {\n      print \"equal , not to mail\\n\";\n   }\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1539835775, "post_id": 52866586, "comment_id": 92647394, "body": "You&#39;re missing a semicolon in that last snippet. And use <code>eq</code> to compare strings, not <code>==</code>."}, {"owner": {"reputation": 43, "user_id": 8968793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460f7ab4664ea2383d8608cd480221fb?s=128&d=identicon&r=PG&f=1", "display_name": "thx94", "link": "https://stackoverflow.com/users/8968793/thx94"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1539838593, "post_id": 52866586, "comment_id": 92648066, "body": "thanks for the reply, I&#39;ve added the semicolon and changed == to eq but still getting the errors. :("}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1539844467, "post_id": 52866586, "comment_id": 92649950, "body": "The warning is telling you that you declared (all) variables at multiple places, and tells you on what lines the other declarations are. Find them and clean up. Extracting meaningful code units into subroutines is important, and helps a lot with variable naming as well."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1539930158, "post_id": 52866586, "comment_id": 92686569, "body": "Only now did I see that you tried <code>push @{hash1{name1}},$x1,$y1,$x2,$y2</code> (I&#39;m assuming with the <code>$</code> in front of <code>hash1</code>).  That should work and I can&#39;t readily see why it didn&#39;t.  Another note: you write to <code>$hash</code>es also when the name is matched (so for the line with the name); at that time <code>x</code> and <code>y</code> variables carry values from the previous name. That would give wrong output."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1540193679, "last_edit_date": 1540193679, "creation_date": 1539842884, "answer_id": 52867928, "question_id": 52866586, "link": "https://stackoverflow.com/questions/52866586/how-to-push-different-row-of-values-into-hashes-and-compare-it-with-foreach-loop/52867928#52867928", "title": "How to push different row of values into hashes and compare it with foreach loop", "body": "<p>The one direct error is that you assign to a hash element with <code>$hash2{$name2}=[...]</code>, what overwrites whatever was at that key before. Thus your output shows for <code>jake</code> the second set of numbers only. You need to push to that arrayref. Some comments on the code are below.</p>\n\n<p>Here is a rudimentary (but working) code. Please note and implement the omitted checks.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy ($f1, $f2) = @ARGV;\ndie \"Usage: $0 file1 file2\\n\"  if not $f1 or not $f2;\n\nmy $ds1 = read_file($f1);\nmy $ds2 = read_file($f2);\n\ncompare_data($ds1, $ds2);\n\nsub compare_data {\n    my ($ds1, $ds2) = @_;    \n    # Add: check whether one has more keys; work with the longer one\n    foreach my $k (sort keys %$ds1) {\n        if (not exists $ds2-&gt;{$k}) {\n            say \"key $k does not exist in dataset 2\";\n            next;\n        }   \n        # Add tests: do both datasets have the same \"ref\" type here?\n        # If those are arrayrefs, as expected, are they the same size?\n\n        my @data = @{$ds1-&gt;{$k}};\n        foreach my $i (0..$#data) {\n            if ($data[$i] ne $ds2-&gt;{$k}-&gt;[$i]) {\n                say \"differ for $k: $data[$i] vs $ds2-&gt;{$k}-&gt;[$i]\";\n            }\n        }   \n    }\n}\n\nsub read_file {\n    my ($file) = @_; \n    open my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n    my (%data, $name);\n    while (&lt;$fh&gt;) {\n        my @fields = split;\n        if ($fields[0] eq 'name') {\n            $name = $fields[1];\n            next;\n        }\n        elsif ($fields[0] eq 'num') {\n            push @{$data{$name}}, @fields[1..$#fields];\n        }\n    }   \n    return \\%data;\n}\n</code></pre>\n\n<p>I'm leaving it as an exercise to code the desired format of the printout. The above prints </p>\n\n<pre>\ndiffer for foo: 111 vs 666\n</pre>\n\n<p>Note comments in code to add tests. As you descend into data structures to compare them you need to check whether they carry the same type of data at each level (see <a href=\"http://perldoc.perl.org/functions/ref.html\" rel=\"nofollow noreferrer\">ref</a>) and whether they are of the same size (so you wouldn't try to read past the end of an array). Once you get this kind of work under your belt search for modules for this.</p>\n\n<p>I use <code>eq</code> in comparison of data (in arrayrefs) since it's not stated firmly that they are numbers. But if they are, as it appears to be the case, change <code>eq</code> to <code>==</code> .</p>\n\n<p>Doing a code review would take us too far, but here are a few remarks</p>\n\n<ul>\n<li><p>When you catch yourself needing such long list of variables think \"collections\" and reconsider your choice of data structures for the problem. Note that in the example above I didn't need a single scalar variable for data (I used one for temporary storage of the name)</p></li>\n<li><p>Picking strings apart with a regex is part and parcel of text analysis -- when suitable. Familiarize yourself with other approaches. At this point see <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a></p></li>\n</ul>\n"}], "owner": {"reputation": 43, "user_id": 8968793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460f7ab4664ea2383d8608cd480221fb?s=128&d=identicon&r=PG&f=1", "display_name": "thx94", "link": "https://stackoverflow.com/users/8968793/thx94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 52867928, "answer_count": 1, "score": 0, "last_activity_date": 1540193679, "creation_date": 1539833323, "last_edit_date": 1539929569, "question_id": 52866586, "link": "https://stackoverflow.com/questions/52866586/how-to-push-different-row-of-values-into-hashes-and-compare-it-with-foreach-loop", "title": "How to push different row of values into hashes and compare it with foreach loop", "body": "<p>I have two files, I need to do comparison to find out the matching and non-matching data. I got two problems now:</p>\n\n<p>Question 1: one of my hashes can only capture the 2nd row of the 'num', i tried to use</p>\n\n<pre><code>push @{hash1{name1}},$x1,$y1,$x2,$y2\n</code></pre>\n\n<p>but it is still returning the 2nd row of the 'num'.</p>\n\n<p>File1 :</p>\n\n<pre>\nname    foo\nnum     111 222 333 444\nname    jack\nnum     999 111 222 333\nnum     333 444 555 777\n</pre>\n\n<p>File2:</p>\n\n<pre>\nname    jack\nnum     999 111 222 333\nnum     333 444 555 777\nname    foo\nnum     666 222 333 444\n</pre>\n\n<p>This is my code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $input1=$ARGV[0];\nmy $input2=$ARGV[1];\n\nmy %hash1;\nmy %hash2;\nmy $name1;\nmy $name2;\nmy $x1;\nmy $x2;\nmy $y2;\nmy $y1;\n\nopen my $fh1,'&lt;', $input1 or die \"Cannot open file : $!\\n\";\nwhile (&lt;$fh1&gt;)\n{   \n    chomp;\n    if(/^name\\s+(\\S+)/)\n    {   \n        $name1 = $1; \n    }   \n    if(/^num\\s+(\\S+)\\s+(\\S+)\\s+(\\S+)\\s+(\\S+)/)\n    {   \n        $x1 = $1; \n        $y1 = $2; \n        $x2 = $3; \n        $y2 = $4; \n    }\n    $hash1{$name1}=[$x1,$y1,$x2,$y2];\n}   \nclose $fh1;\nprint Dumper (\\%hash1);\n\nopen my $fh2,'&lt;', $input2 or die \"Cannot open file : $!\\n\";\nwhile (&lt;$fh2&gt;)\n{   \n    chomp;\n    if(/^name\\s+(\\S+)/)\n    {\n        $name2 = $1; \n    }\n    if(/^num\\s+(\\S+)\\s+(\\S+)\\s+(\\S+)\\s+(\\S+)/)\n    {\n        $x1 = $1; \n        $y1 = $2; \n        $x2 = $3;\n        $y2 = $4;\n    }\n\n    $hash2{$name2}=[$x1,$y1,$x2,$y2];\n\n}\nclose $fh2;\nprint Dumper (\\%hash2);\n</code></pre>\n\n<p>My output:</p>\n\n<pre><code>$VAR1 = {\n          'jack' =&gt; [\n                      '333',\n                      '444',\n                      '555',\n                      '777'\n                    ],\n          'foo' =&gt; [\n                     '111',\n                     '222',\n                     '333',\n                     '444'\n                   ]\n        };\n$VAR1 = {\n          'jack' =&gt; [\n                      '333',\n                      '444',\n                      '555',\n                      '777'\n                    ],\n          'foo' =&gt; [\n                     '666',\n                     '222',\n                     '333',\n                     '444'\n                   ]\n        };\n</code></pre>\n\n<p>My expected Output:</p>\n\n<pre><code>$VAR1 = {\n          'jack' =&gt; [ \n                      '999',\n                      '111',\n                      '222',\n                      '333',\n                      '333',\n                      '444',\n                      '555',\n                      '777'\n                    ],\n          'foo' =&gt; [\n                     '111',\n                     '222',\n                     '333',\n                     '444'\n                   ]\n        };\n$VAR1 = {\n          'jack' =&gt; [ \n                      '999',\n                      '111',\n                      '222',\n                      '333',\n                      '333',\n                      '444',\n                      '555',\n                      '777'\n                    ],\n          'foo' =&gt; [\n                     '666',\n                     '222',\n                     '333',\n                     '444'\n                   ]\n        };\n</code></pre>\n\n<p>Question 2: I tried to use this foreach loop to do the matching of keys and values and print out in a table format. \nI tried this :</p>\n\n<pre><code>print \"Name\\tx1\\tX1\\tY1\\tX2\\tY2\\n\"\nforeach my $k1(keys %hash1)\n{\n    foreach my  $k2 (keys %hash2)\n    {\n        if($hash1{$name1} == $hash2{$name2})\n        {\n            print \"$name1,$x1,$y1,$x2,$y2\"\n        }\n    }\n}\n</code></pre>\n\n<p>but Im getting :</p>\n\n<pre>\n\"my\" variable %hash2 masks earlier declaration in same scope at script.pl line 67.\n\"my\" variable %hash1 masks earlier declaration in same scope at script.pl line 69.\n\"my\" variable $name1 masks earlier declaration in same scope at script.pl line 69.\n\"my\" variable %hash2 masks earlier declaration in same statement at script.pl line 69.\n\"my\" variable $name2 masks earlier declaration in same scope at script.pl line 69.\nsyntax error at script.pl line 65, near \"$k1(\"\nExecution of script.pl aborted due to compilation errors.\n</pre>\n\n<p>my desired output for matching :</p>\n\n<pre>\nName     x1   y1   x2   y2\njack     999  111  222  333\n         333  444  555  777\n</pre>\n"}, {"tags": ["regex", "string", "perl", "search", "substitution"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1539826942, "post_id": 52865338, "comment_id": 92645620, "body": "Hmm. What do you think <code>()</code> and <code>[]</code> do in a regular expression?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10515888, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-who6RgWAcyU/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWWBo4cQ2omJELP4lLFIK7G2UJHSw/mo/photo.jpg?sz=128", "display_name": "mother loadmining", "link": "https://stackoverflow.com/users/10515888/mother-loadmining"}, "edited": false, "score": 1, "creation_date": 1539827905, "post_id": 52865774, "comment_id": 92645763, "body": "Yes thank you for taking the time for a great explanation. The first part worked."}, {"owner": {"reputation": 97, "user_id": 10173122, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hVhcJq7Ahwg/AAAAAAAAAAI/AAAAAAAAAE4/PS6tZUU4XMc/photo.jpg?sz=128", "display_name": "Ethan Herbertson", "link": "https://stackoverflow.com/users/10173122/ethan-herbertson"}, "edited": false, "score": 1, "creation_date": 1539906098, "post_id": 52865774, "comment_id": 92681268, "body": "@J-L As the old saying goes:  You have a problem. You decide to solve it with Regular Expressions. Great! Now you have <i>two</i> problems.  Excellent answer."}], "tags": [], "owner": {"reputation": 1280, "user_id": 8513648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c59086b9318c37cc02acaeb85fef8f6?s=128&d=identicon&r=PG", "display_name": "J-L", "link": "https://stackoverflow.com/users/8513648/j-l"}, "is_accepted": true, "score": 1, "last_activity_date": 1539903373, "last_edit_date": 1539903373, "creation_date": 1539827119, "answer_id": 52865774, "question_id": 52865338, "link": "https://stackoverflow.com/questions/52865338/perl-string-manipulation-and-find/52865774#52865774", "title": "Perl string manipulation and find", "body": "<p>Instead of:</p>\n\n<pre><code>if($splitIndex[1] =~ m/^(\\d{3}\\d{4})/) {\n      $splitIndex[1] =~ s/([\\d{3}][\\d{4}])/1-701-[$1]-[$2]/;\n      print \"Updated: $splitIndex[1]\";\n    }\n</code></pre>\n\n<p>try this:</p>\n\n<pre><code>if ($splitIndex[1] =~ s/(\\d{3})(\\d{4})/1-701-$1-$2/)\n{\n    print \"Updated: $splitIndex[1]\";\n}\n</code></pre>\n\n<p>In regular expressions, a set of square brackets (<code>[</code> and <code>]</code>) will match <em>one and only one</em> character, regardless of what's between the brackets.  So when you write <code>[\\d{3}][\\d{4}]</code>, that will match <em>exactly two characters</em>, because you are using <em>two</em> sets of <code>[]</code>.  And those two characters will be one of <code>\\d</code> (any digit), <code>{</code>, <code>3</code>, <code>4</code>, or <code>}</code>, because that's what you wrote inside the brackets.</p>\n\n<p>The order doesn't matter inside of the square brackets of a regular expression, so <code>[\\d{3}]</code> is the same as <code>[}1527349806{3]</code>.  As you can see, that's probably not what you wanted.</p>\n\n<p>What you meant to do was <em>capture</em> the <code>\\d{3}</code> and <code>\\d{4}</code> strings, and you do that with a regular set of <em>capturing</em> parentheses, like this:  <code>(\\d{3})(\\d{4})</code></p>\n\n<p>Since you had only one set of parentheses (that is, you had <code>([\\d{3}][\\d{4}])</code>) and it contained exactly two <code>[]</code>s, it was putting exactly two characters into $1, and nothing at all into $2.  That's why, when you attempted to use $2 in the second half of your <code>s///</code>, it was complaining about an uninitialized value in $2.  You were attempting to use a value ($2) that simply wasn't set.</p>\n\n<p>(Also, you were doing two sets of matches:  One for the <code>m//</code>, and one for the <code>s///</code>.  I simply removed the <code>m//</code> match and kept the <code>s///</code> match, using its return value to determine if we need to print() anything.)</p>\n\n<p>The second part of the <code>s///</code> does not use regular expressions, so any <code>[</code>, <code>]</code>, <code>{</code>, <code>}</code>, <code>(</code>, or <code>)</code> will show up literally as that character.  So if you don't want square brackets in the final phone number, don't use them.  That's why I used <code>s/.../1-701-$1-$2/;</code> instead of <code>s/.../1-701-[$1]-[$2]/;</code>.</p>\n\n<p>So when you wrote <code>s/([\\d{3}][\\d{4}])/1-701-[$1]-[$2]/</code>, the <code>([\\d{3}][\\d{4}])</code> part was putting two characters into $1, and nothing into $2.  That's why you got a result that contained <code>[77]</code> (which was $1 surrounded by brackets) and <code>[]</code> (which was $2 (an uninitialized value) surrounded by brackets).</p>\n\n<p>As for the second part of your post, I notice that you use a lot of capturing parentheses in your regular expressions, but you never actually use what you capture.  That is, you never use $1 (or $2).  For example, you write:</p>\n\n<pre><code>if($searchValue =~ m/(\\D)/) {\n</code></pre>\n\n<p>which has <code>m/(\\D)/</code>, yet you never use $1 anywhere in that code.  I wonder:  What's the point of capturing that non-digit character if you don't use it anywhere in your code?</p>\n\n<p>I've seen programmers get confused and mix up the purpose of parentheses and square brackets.  When using regular expressions, square brackets (<code>[</code> and <code>]</code>) <strong>match</strong> (not capture) <em>exactly one</em> character.  What they match is <em>not</em> put in $1, $2, or any other $n.</p>\n\n<p>Parentheses, on the other hand, <em>capture</em> whatever they match, by setting $1 (or $2, $3, etc.) to what was matched.  In general, you shouldn't use parentheses unless you plan on capturing and using that match later.  (The main exception to this rule is if you need to group a set of matches, like this:  <code>m/I have a (cat|dog|bird)/</code>.)</p>\n\n<p>Many programmers confuse square brackets and parentheses in regular expressions, and try to use them interchangeably.  They'll write something like <code>m/I have a [cat|dog|bird]/</code> and not realize that it's the same as <code>m/I have a [abcdgiort|]/</code> (which doesn't capture anything, since there are no parentheses), and wonder why their program complains that $1 is an uninitialized value.</p>\n\n<p>This is a common mistake, so don't feel bad if you didn't know the difference.  Now you know, and hopefully you can figure out what needs to be corrected in the second part of your code.</p>\n\n<p>I hope this helps.</p>\n"}], "owner": {"reputation": 23, "user_id": 10515888, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-who6RgWAcyU/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWWBo4cQ2omJELP4lLFIK7G2UJHSw/mo/photo.jpg?sz=128", "display_name": "mother loadmining", "link": "https://stackoverflow.com/users/10515888/mother-loadmining"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 52865774, "answer_count": 1, "score": 1, "last_activity_date": 1539903373, "creation_date": 1539822700, "last_edit_date": 1539839027, "question_id": 52865338, "link": "https://stackoverflow.com/questions/52865338/perl-string-manipulation-and-find", "title": "Perl string manipulation and find", "body": "<p>I am currently working on a phonebook program for a class and I am having a little bit of trouble with the regex part in order to format my text and find what im looking for. Firstly, I am having trouble editing my phone number text to what I want. I am able to find the text that have 7 numbers in a row (777777) but I am unable to substitute it to (1-701-777-777).</p>\n\n<pre><code>if($splitIndex[1] =~ m/^(\\d{3}\\d{4})/) {\n      $splitIndex[1] =~ s/([\\d{3}][\\d{4}])/1-701-[$1]-[$2]/;\n      print \"Updated: $splitIndex[1]\";\n    }\n</code></pre>\n\n<p>When I run this code the output ends up being (wont let me imbed image here is output <a href=\"https://imgur.com/a/8HtW7xm\" rel=\"nofollow noreferrer\">https://imgur.com/a/8HtW7xm</a>).</p>\n\n<p>Secondly, I am having trouble doing the actual regex part for the searching. I save all the possible letter combinations in $letofSearch and the number order combination in $numOfSearch. Through playing around in regex I have figured out if I do [$numOfSearch]+[$numOfSearch[-1]...[$numOfSearch[1] it gives me the correct find for the numbers but I am unable to write it properly in my code. </p>\n\n<pre><code>    #If user input is only numbers\n    if($searchValue =~ m/(\\D)/) {\n      #print \"Not a number\\n\";\n      if($splitIndex[1] =~ m/([$numOfSearch]+)/) {\n        if($found == 0) {\n            print \"$splitIndex[0]:$splitIndex[1]\\n\";\n            $found = 1;\n        }\n      }\n      if($splitIndex[0] =~ m/([$letOfSearch])/i) {\n        if($found == 0) {\n            print \"$splitIndex[0]:$splitIndex[1]\\n\";\n            $found = 1;\n        }\n      }\n      $found = 0;\n    } else {\n      #If it is a number search for that number combo immedietly\n      if($splitIndex[1] =~ m/([$numOfSearch]+)/) {\n        if($found == 0) {\n            print \"$splitIndex[0]:$splitIndex[1]\\n\";\n            $found = 1;\n        }\n      }\n      if($splitIndex[0] =~ m/([$letOfSearch])/i) {\n        if($found == 0) {\n            print \"$splitIndex[0]:$splitIndex[1]\\n\";\n            $found = 1;\n        }\n      }\n      $found = 0;\n    }\n  }\n}\n</code></pre>\n"}]