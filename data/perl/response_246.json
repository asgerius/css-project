[{"tags": ["perl", "grep"], "comments": [{"owner": {"reputation": 41, "user_id": 3777684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd4f9d7ade7783bde5feb8d02ac1743a?s=128&d=identicon&r=PG&f=1", "display_name": "DanTheMan", "link": "https://stackoverflow.com/users/3777684/dantheman"}, "edited": false, "score": 1, "creation_date": 1569455388, "post_id": 58107808, "comment_id": 102606071, "body": "Please check out <a href=\"https://unix.stackexchange.com/questions/127459/multiline-regex-blank-line-delimiters\" title=\"multiline regex blank line delimiters\">unix.stackexchange.com/questions/127459/&hellip;</a> It should give you a head start."}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "reply_to_user": {"reputation": 41, "user_id": 3777684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd4f9d7ade7783bde5feb8d02ac1743a?s=128&d=identicon&r=PG&f=1", "display_name": "DanTheMan", "link": "https://stackoverflow.com/users/3777684/dantheman"}, "edited": false, "score": 0, "creation_date": 1569456059, "post_id": 58107808, "comment_id": 102606190, "body": "@DanTheMan That worked perfectly! All I had to do was make it recursive and it did it through multiple files for me. Thanks for referring it!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1569456923, "post_id": 58107808, "comment_id": 102606354, "body": "<code>perl -00 -wne&#39;print if &#47;^Dog&#47;&#39; files</code>, where <code>files</code> is some specification for files that you can come up in your shell.  Or, perhaps build the list and pipe that over <code>ls -1R dir&#47;*txt | xargs perl -00 -wne&#39;print if &#47;^Dog&#47;&#39;</code> (where I can imagine use of <code>find</code> or <code>grep</code> instead of that token <code>ls</code>) But I&#39;d suggest to write a script, as this is a very nice exercise to get you into that"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569457292, "post_id": 58107808, "comment_id": 102606410, "body": "(see <a href=\"https://stackoverflow.com/a/57987011/4653379\">this post</a> for example of piping data from a tool that builds a file list to another which process them)"}], "answers": [{"tags": [], "owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "is_accepted": false, "score": 2, "last_activity_date": 1569475967, "creation_date": 1569475967, "answer_id": 58110153, "question_id": 58107808, "link": "https://stackoverflow.com/questions/58107808/perl-system-grep-and-paste/58110153#58110153", "title": "Perl System Grep and Paste", "body": "<p>IF you can use <code>awk</code>, then this can be done.  By setting Record Selector to nothing <code>awk</code> works in block mode.  Test if block starts with <code>dog</code>, and if yes do the default action, print the block.</p>\n\n<pre><code>awk '/^Dog/' ORS=\"\\n\\n\" RS=\"\" file\nDog\nBulldog\nTerrier\n\nDog\nPitbull\nLab\nShepard\nHusky\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569542062, "post_id": 58119065, "comment_id": 102640126, "body": "Yes, the <a href=\"https://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\">range operators</a>,  nice :)"}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1569886383, "post_id": 58119065, "comment_id": 102733457, "body": "I have a question regarding this. If I want to print all dog blocks that contain the word bulldog within the block, is there any way to do this? or is not possible specify another restriction by string content"}, {"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1569895147, "post_id": 58119065, "comment_id": 102734898, "body": "@sfr you have to save the range to print (or not) at the end.  ie  <code>push @l if &#47;^Dog&#47;..&#47;^$&#47;; print @l if &#47;^$&#47; &amp;&amp; grep &#47;bulldog&#47;, @l; @l=() if &#47;^$&#47;</code>."}, {"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1569895184, "post_id": 58119065, "comment_id": 102734904, "body": "Again, there are a lot of implicit <code>$_</code> in the above suggestion.  Push the line into <code>@l</code> if it&#39;s in the range, then print the entire range if perl&#39;s <code>grep</code> matches bulldog to any substring of any item in the <code>@l</code> array."}], "tags": [], "owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "is_accepted": true, "score": 4, "last_activity_date": 1572025688, "last_edit_date": 1572025688, "creation_date": 1569508180, "answer_id": 58119065, "question_id": 58107808, "link": "https://stackoverflow.com/questions/58107808/perl-system-grep-and-paste/58119065#58119065", "title": "Perl System Grep and Paste", "body": "<p><code>perl -ne 'print if /^Dog/../^$/' file</code></p>\n\n<p>The <code>..</code> and <code>...</code> operators in perl can join two conditionals.  From the time that the first evaluates true until the second conditional evaluates true, the joined conditional will evaluate true.   So you want to <code>print</code> from the time <code>$_ =~ m/^Dog/</code> is true until <code>$_ =~ m/^\\s+$/</code> is true.  The above is shorthand for that.  </p>\n\n<p>The distinction between <code>..</code> vs <code>...</code> is not important here because in this case, the conditionals cannot both be true on the same line.</p>\n"}], "owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 1, "accepted_answer_id": 58119065, "answer_count": 2, "score": 1, "last_activity_date": 1572025688, "creation_date": 1569454844, "last_edit_date": 1569455762, "question_id": 58107808, "link": "https://stackoverflow.com/questions/58107808/perl-system-grep-and-paste", "title": "Perl System Grep and Paste", "body": "<p>I have a file that looks like this:</p>\n\n<blockquote>\n  <p>Dog\n  <br>Bulldog<br>Terrier</p>\n  \n  <p>Cat\n  <br>Persian</p>\n  \n  <p>Ape\n  <br>Gorilla</p>\n  \n  <p>Dog\n  <br>Pitbull<br>Lab<br>Shepard<br>Husky</p>\n</blockquote>\n\n<p>I want to be able to search for each line containing dog and select everything until the next empty line and put it into a new file.</p>\n\n<p>I want an output file like:</p>\n\n<blockquote>\n  <p>Dog\n  <br>Bulldog<br>Terrier</p>\n  \n  <p>Dog\n  <br>Pitbull<br>Lab<br>Shepard<br>Husky</p>\n</blockquote>\n\n<p>I know I can use grep to find the word dog but how can I use it, or with what can I use it, so that it grabs everything after it UNTIL the next empty line and moves it into another file. </p>\n\n<p>I am writing a script in Perl to do this because there are other things I wish to add on that are made easier with Perl. I was going to use <code>system(grep....)</code> to find the word but I wasn't sure what to do after that. </p>\n\n<p>I will also note that I want to be able to do this recursively. I have many files that look like what I had shown and I would like to extract the Dog block from all of them. So it would be something recursive from the directory. </p>\n"}, {"tags": ["perl", "centos", "freeradius"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1569447552, "post_id": 58106687, "comment_id": 102604390, "body": "I&#39;m voting to close this question as off-topic because it&#39;s not related to programming, and is probably better suited for the <a href=\"https://unix.stackexchange.com/\">Unix SE</a>."}, {"owner": {"reputation": 23, "user_id": 12121412, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-v83ATnbd3wA/AAAAAAAAAAI/AAAAAAAAAHo/fb9UOk11XMM/photo.jpg?sz=128", "display_name": "Sama", "link": "https://stackoverflow.com/users/12121412/sama"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1569452707, "post_id": 58106687, "comment_id": 102605611, "body": "I posted it here because I saw other questions regarding FreeRADIUS here. Any way I can simply move it to Unix SE?"}, {"owner": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1569465540, "post_id": 58106687, "comment_id": 102607831, "body": "Actually @stevieb FreeRADIUS implements its own interpreted policy language, and so it is, in a broad sense, related to programming."}], "answers": [{"tags": [], "owner": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "is_accepted": true, "score": 2, "last_activity_date": 1570142581, "last_edit_date": 1570142581, "creation_date": 1569509709, "answer_id": 58119543, "question_id": 58106687, "link": "https://stackoverflow.com/questions/58106687/freeradius-perl-module-unknown-or-invalid-value-perl-for-attribute-auth-type/58119543#58119543", "title": "FreeRADIUS Perl Module &quot;Unknown or invalid value &quot;perl&quot; for attribute Auth-Type&quot;", "body": "<p>It may be an initialisation ordering issue.  When you use attribute references like <code>&amp;Auth-Type</code> in the policy language (within any of the virtual server sections like <code>authorize { ... }</code>, <code>authenticate { ... }</code> etc... There's a multi-pass resolution process that occurs.  So even though the auth sections haven't been parsed at the point where you're setting values for <code>Auth-Type</code> is still works fine.</p>\n\n<p>For the users file, which is an older legacy format from &lt;= v2, there's no multi-pass processing. I can't remember in v3 without digging into the code which is initialised first, virtual servers or modules.  But if it's modules, then your problem is almost certainly, that the attribute resolution in the <code>files</code> module is being done before the <code>Auth-Type</code> sections are being processed, and the complete set of Auth-Type values has been built.</p>\n\n<p>The simple fix for this, is to manually provide an enumeration value for <code>Auth-Type</code> in the custom dictionary file.</p>\n\n<p>Try adding the following to <code>/etc/raddb/dictionary</code> or <code>/etc/freeradius/dictionary</code> on Debian based systems.</p>\n\n<p>That should allow the files module to get the correct enumeration value for <code>Auth-Type</code> before any of the virtual servers are parsed.</p>\n\n<pre><code>VALUE   Auth-Type       perl        100\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 12121412, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-v83ATnbd3wA/AAAAAAAAAAI/AAAAAAAAAHo/fb9UOk11XMM/photo.jpg?sz=128", "display_name": "Sama", "link": "https://stackoverflow.com/users/12121412/sama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 660, "favorite_count": 0, "accepted_answer_id": 58119543, "answer_count": 1, "score": 2, "last_activity_date": 1570142581, "creation_date": 1569446524, "question_id": 58106687, "link": "https://stackoverflow.com/questions/58106687/freeradius-perl-module-unknown-or-invalid-value-perl-for-attribute-auth-type", "title": "FreeRADIUS Perl Module &quot;Unknown or invalid value &quot;perl&quot; for attribute Auth-Type&quot;", "body": "<p>I am attempting to setup a FreeRadius Server with an OTP (LinOTP) backend in Centos 7. My issue is loading a perl module needed to link FreeRADIUS to LinOTP. No matter what I try I just keep getting the error below when I try starting radiusd (with \"/usr/sbin/radiusd -C -lstdout -xx\"):</p>\n\n<pre><code>/etc/raddb/mods-config/files/authorize[46]: Parse error (check) for entry DEFAULT: Unknown or invalid value \"perl\" for attribute Auth-Type\nFailed reading /etc/raddb/mods-config/files/authorize\n/etc/raddb/mods-enabled/files[9]: Instantiation failed for module \"files\"\n</code></pre>\n\n<p>per documentation I have completed the following:</p>\n\n<p>-added \"DEFAULT Auth-type := perl\" as the first and only uncommented line in /etc/raddb/users</p>\n\n<p>-added the module location to /etc/raddb/mods-available/perl</p>\n\n<p>-added the Auth-Type declarations in the site file (/etc/raddb/sites-available/linotp) see below.</p>\n\n<p>-I have also tried copying the changes over to the default site but I get the same issue.</p>\n\n<p>Here are the contents of the relevant files with comments removed (these things are 99% comments)\n/etc/raddb/users</p>\n\n<pre><code>DEFAULT         Auth-type := perl\n</code></pre>\n\n<p>/etc/raddb/mods-available/perl</p>\n\n<pre><code>perl {\n        filename = /etc/raddb/mods-config/perl/radius_linotp.pm\n}\n</code></pre>\n\n<p>/etc/raddb/sites-available/linotp</p>\n\n<pre><code>authorize {\n        files\n        perl\n        if (ok || updated) {\n                update control {\n                        Auth-Type := Perl\n                }\n        }\n        preprocess\n        chap\n        mschap\n        suffix\n        unix\n        expiration\n        logintime\n        pap\n}\nauthenticate {\nperl\n        Auth-Type Perl {\n                perl\n         }\n}\npreacct {\n        preprocess\n        acct_unique\n        suffix\n        files\n}\naccounting {\n        perl\n        detail\n        unix\n        radutmp\n        attr_filter.accounting_response\n}\nsession {\n        radutmp\n}\npost-auth {\n        exec\n        Post-Auth-Type REJECT {\n                attr_filter.access_reject\n        }\n}\npre-proxy {\n}\npost-proxy {\n}\n</code></pre>\n\n<p>/etc/raddb/mods-config/files/authorize</p>\n\n<pre><code>DEFAULT         Auth-type := perl\n</code></pre>\n\n<p>and finally the verbose startup log from running /usr/sbin/radiusd -C -lstdout -x</p>\n\n<pre><code>FreeRADIUS Version 3.0.13\nCopyright (C) 1999-2017 The FreeRADIUS server project and contributors\nThere is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A\nPARTICULAR PURPOSE\nYou may redistribute copies of FreeRADIUS under the terms of the\nGNU General Public License\nFor more information about these matters, see the file named COPYRIGHT\nStarting - reading configuration files ...\nincluding dictionary file /usr/share/freeradius/dictionary\nincluding dictionary file /usr/share/freeradius/dictionary.dhcp\nincluding dictionary file /usr/share/freeradius/dictionary.vqp\nincluding dictionary file /etc/raddb/dictionary\nincluding configuration file /etc/raddb/radiusd.conf\nincluding configuration file /etc/raddb/proxy.conf\nincluding configuration file /etc/raddb/clients.conf\nincluding files in directory /etc/raddb/mods-enabled/\nincluding configuration file /etc/raddb/mods-enabled/always\nincluding configuration file /etc/raddb/mods-enabled/attr_filter\nincluding configuration file /etc/raddb/mods-enabled/cache_eap\nincluding configuration file /etc/raddb/mods-enabled/chap\nincluding configuration file /etc/raddb/mods-enabled/date\nincluding configuration file /etc/raddb/mods-enabled/detail\nincluding configuration file /etc/raddb/mods-enabled/detail.log\nincluding configuration file /etc/raddb/mods-enabled/dhcp\nincluding configuration file /etc/raddb/mods-enabled/digest\nincluding configuration file /etc/raddb/mods-enabled/dynamic_clients\nincluding configuration file /etc/raddb/mods-enabled/echo\nincluding configuration file /etc/raddb/mods-enabled/exec\nincluding configuration file /etc/raddb/mods-enabled/expiration\nincluding configuration file /etc/raddb/mods-enabled/expr\nincluding configuration file /etc/raddb/mods-enabled/files\nincluding configuration file /etc/raddb/mods-enabled/linelog\nincluding configuration file /etc/raddb/mods-enabled/logintime\nincluding configuration file /etc/raddb/mods-enabled/mschap\nincluding configuration file /etc/raddb/mods-enabled/ntlm_auth\nincluding configuration file /etc/raddb/mods-enabled/pap\nincluding configuration file /etc/raddb/mods-enabled/passwd\nincluding configuration file /etc/raddb/mods-enabled/preprocess\nincluding configuration file /etc/raddb/mods-enabled/radutmp\nincluding configuration file /etc/raddb/mods-enabled/realm\nincluding configuration file /etc/raddb/mods-enabled/replicate\nincluding configuration file /etc/raddb/mods-enabled/soh\nincluding configuration file /etc/raddb/mods-enabled/sradutmp\nincluding configuration file /etc/raddb/mods-enabled/unix\nincluding configuration file /etc/raddb/mods-enabled/unpack\nincluding configuration file /etc/raddb/mods-enabled/utf8\nincluding configuration file /etc/raddb/mods-enabled/perl\nincluding files in directory /etc/raddb/policy.d/\nincluding configuration file /etc/raddb/policy.d/accounting\nincluding configuration file /etc/raddb/policy.d/canonicalization\nincluding configuration file /etc/raddb/policy.d/control\nincluding configuration file /etc/raddb/policy.d/cui\nincluding configuration file /etc/raddb/policy.d/debug\nincluding configuration file /etc/raddb/policy.d/dhcp\nincluding configuration file /etc/raddb/policy.d/eap\nincluding configuration file /etc/raddb/policy.d/filter\nincluding configuration file /etc/raddb/policy.d/operator-name\nincluding files in directory /etc/raddb/sites-enabled/\nmain {\n security {\n        user = \"radiusd\"\n        group = \"radiusd\"\n        allow_core_dumps = no\n }\n        name = \"radiusd\"\n        prefix = \"/usr\"\n        localstatedir = \"/var\"\n        logdir = \"/var/log/radius\"\n        run_dir = \"/var/run/radiusd\"\n}\nmain {\n        name = \"radiusd\"\n        prefix = \"/usr\"\n        localstatedir = \"/var\"\n        sbindir = \"/usr/sbin\"\n        logdir = \"/var/log/radius\"\n        run_dir = \"/var/run/radiusd\"\n        libdir = \"/usr/lib64/freeradius\"\n        radacctdir = \"/var/log/radius/radacct\"\n        hostname_lookups = no\n        max_request_time = 30\n        cleanup_delay = 5\n        max_requests = 16384\n        pidfile = \"/var/run/radiusd/radiusd.pid\"\n        checkrad = \"/usr/sbin/checkrad\"\n        debug_level = 0\n        proxy_requests = yes\n log {\n        stripped_names = no\n        auth = no\n        auth_badpass = no\n        auth_goodpass = no\n        colourise = yes\n        msg_denied = \"You are already logged in - access denied\"\n }\n resources {\n }\n security {\n        max_attributes = 200\n        reject_delay = 1.000000\n        status_server = yes\n }\n}\nradiusd: #### Loading Realms and Home Servers ####\n proxy server {\n        retry_delay = 5\n        retry_count = 3\n        default_fallback = no\n        dead_time = 120\n        wake_all_if_all_dead = no\n }\n home_server localhost {\n        ipaddr = 127.0.0.1\n        port = 1812\n        type = \"auth\"\n        secret = &lt;&lt;&lt; secret &gt;&gt;&gt;\n        response_window = 20.000000\n        response_timeouts = 1\n        max_outstanding = 65536\n        zombie_period = 40\n        status_check = \"status-server\"\n        ping_interval = 30\n        check_interval = 30\n        check_timeout = 4\n        num_answers_to_alive = 3\n        revive_interval = 120\n  limit {\n        max_connections = 16\n        max_requests = 0\n        lifetime = 0\n        idle_timeout = 0\n  }\n  coa {\n        irt = 2\n        mrt = 16\n        mrc = 5\n        mrd = 30\n  }\n }\n home_server_pool my_auth_failover {\n        type = fail-over\n        home_server = localhost\n }\n realm example.com {\n        auth_pool = my_auth_failover\n }\n realm LOCAL {\n }\nradiusd: #### Loading Clients ####\n client localhost {\n        ipaddr = 127.0.0.1\n        require_message_authenticator = no\n        secret = &lt;&lt;&lt; secret &gt;&gt;&gt;\n        nas_type = \"other\"\n        proto = \"*\"\n  limit {\n        max_connections = 16\n        lifetime = 0\n        idle_timeout = 30\n  }\n }\n client localhost_ipv6 {\n        ipv6addr = ::1\n        require_message_authenticator = no\n        secret = &lt;&lt;&lt; secret &gt;&gt;&gt;\n  limit {\n        max_connections = 16\n        lifetime = 0\n        idle_timeout = 30\n  }\n }\nDebugger not attached\nradiusd: #### Instantiating modules ####\n modules {\n  # Loaded module rlm_always\n  # Loading module \"reject\" from file /etc/raddb/mods-enabled/always\n  always reject {\n        rcode = \"reject\"\n        simulcount = 0\n        mpp = no\n  }\n  # Loading module \"fail\" from file /etc/raddb/mods-enabled/always\n  always fail {\n        rcode = \"fail\"\n        simulcount = 0\n        mpp = no\n  }\n  # Loading module \"ok\" from file /etc/raddb/mods-enabled/always\n  always ok {\n        rcode = \"ok\"\n        simulcount = 0\n        mpp = no\n  }\n  # Loading module \"handled\" from file /etc/raddb/mods-enabled/always\n  always handled {\n        rcode = \"handled\"\n        simulcount = 0\n        mpp = no\n  }\n  # Loading module \"invalid\" from file /etc/raddb/mods-enabled/always\n  always invalid {\n        rcode = \"invalid\"\n        simulcount = 0\n        mpp = no\n  }\n  # Loading module \"userlock\" from file /etc/raddb/mods-enabled/always\n  always userlock {\n        rcode = \"userlock\"\n        simulcount = 0\n        mpp = no\n  }\n  # Loading module \"notfound\" from file /etc/raddb/mods-enabled/always\n  always notfound {\n        rcode = \"notfound\"\n        simulcount = 0\n        mpp = no\n  }\n  # Loading module \"noop\" from file /etc/raddb/mods-enabled/always\n  always noop {\n        rcode = \"noop\"\n        simulcount = 0\n        mpp = no\n  }\n  # Loading module \"updated\" from file /etc/raddb/mods-enabled/always\n  always updated {\n        rcode = \"updated\"\n        simulcount = 0\n        mpp = no\n  }\n  # Loaded module rlm_attr_filter\n  # Loading module \"attr_filter.post-proxy\" from file /etc/raddb/mods-enabled/attr_filter\n  attr_filter attr_filter.post-proxy {\n        filename = \"/etc/raddb/mods-config/attr_filter/post-proxy\"\n        key = \"%{Realm}\"\n        relaxed = no\n  }\n  # Loading module \"attr_filter.pre-proxy\" from file /etc/raddb/mods-enabled/attr_filter\n  attr_filter attr_filter.pre-proxy {\n        filename = \"/etc/raddb/mods-config/attr_filter/pre-proxy\"\n        key = \"%{Realm}\"\n        relaxed = no\n  }\n  # Loading module \"attr_filter.access_reject\" from file /etc/raddb/mods-enabled/attr_filter\n  attr_filter attr_filter.access_reject {\n        filename = \"/etc/raddb/mods-config/attr_filter/access_reject\"\n        key = \"%{User-Name}\"\n        relaxed = no\n  }\n  # Loading module \"attr_filter.access_challenge\" from file /etc/raddb/mods-enabled/attr_filter\n  attr_filter attr_filter.access_challenge {\n        filename = \"/etc/raddb/mods-config/attr_filter/access_challenge\"\n        key = \"%{User-Name}\"\n        relaxed = no\n  }\n  # Loading module \"attr_filter.accounting_response\" from file /etc/raddb/mods-enabled/attr_filter\n  attr_filter attr_filter.accounting_response {\n        filename = \"/etc/raddb/mods-config/attr_filter/accounting_response\"\n        key = \"%{User-Name}\"\n        relaxed = no\n  }\n  # Loaded module rlm_cache\n  # Loading module \"cache_eap\" from file /etc/raddb/mods-enabled/cache_eap\n  cache cache_eap {\n        driver = \"rlm_cache_rbtree\"\n        key = \"%{%{control:State}:-%{%{reply:State}:-%{State}}}\"\n        ttl = 15\n        max_entries = 0\n        epoch = 0\n        add_stats = no\n  }\n  # Loaded module rlm_chap\n  # Loading module \"chap\" from file /etc/raddb/mods-enabled/chap\n  # Loaded module rlm_date\n  # Loading module \"date\" from file /etc/raddb/mods-enabled/date\n  date {\n        format = \"%b %e %Y %H:%M:%S %Z\"\n  }\n  # Loaded module rlm_detail\n  # Loading module \"detail\" from file /etc/raddb/mods-enabled/detail\n  detail {\n        filename = \"/var/log/radius/radacct/%{%{Packet-Src-IP-Address}:-%{Packet-Src-IPv6-Address}}/detail-%Y%m%d\"\n        header = \"%t\"\n        permissions = 384\n        locking = no\n        escape_filenames = no\n        log_packet_header = no\n  }\n  # Loading module \"auth_log\" from file /etc/raddb/mods-enabled/detail.log\n  detail auth_log {\n        filename = \"/var/log/radius/radacct/%{%{Packet-Src-IP-Address}:-%{Packet-Src-IPv6-Address}}/auth-detail-%Y%m%d\"\n        header = \"%t\"\n        permissions = 384\n        locking = no\n        escape_filenames = no\n        log_packet_header = no\n  }\n  # Loading module \"reply_log\" from file /etc/raddb/mods-enabled/detail.log\n  detail reply_log {\n        filename = \"/var/log/radius/radacct/%{%{Packet-Src-IP-Address}:-%{Packet-Src-IPv6-Address}}/reply-detail-%Y%m%d\"\n        header = \"%t\"\n        permissions = 384\n        locking = no\n        escape_filenames = no\n        log_packet_header = no\n  }\n  # Loading module \"pre_proxy_log\" from file /etc/raddb/mods-enabled/detail.log\n  detail pre_proxy_log {\n        filename = \"/var/log/radius/radacct/%{%{Packet-Src-IP-Address}:-%{Packet-Src-IPv6-Address}}/pre-proxy-detail-%Y%m%d\"\n        header = \"%t\"\n        permissions = 384\n        locking = no\n        escape_filenames = no\n        log_packet_header = no\n  }\n  # Loading module \"post_proxy_log\" from file /etc/raddb/mods-enabled/detail.log\n  detail post_proxy_log {\n        filename = \"/var/log/radius/radacct/%{%{Packet-Src-IP-Address}:-%{Packet-Src-IPv6-Address}}/post-proxy-detail-%Y%m%d\"\n        header = \"%t\"\n        permissions = 384\n        locking = no\n        escape_filenames = no\n        log_packet_header = no\n  }\n  # Loaded module rlm_dhcp\n  # Loading module \"dhcp\" from file /etc/raddb/mods-enabled/dhcp\n  # Loaded module rlm_digest\n  # Loading module \"digest\" from file /etc/raddb/mods-enabled/digest\n  # Loaded module rlm_dynamic_clients\n  # Loading module \"dynamic_clients\" from file /etc/raddb/mods-enabled/dynamic_clients\n  # Loaded module rlm_exec\n  # Loading module \"echo\" from file /etc/raddb/mods-enabled/echo\n  exec echo {\n        wait = yes\n        program = \"/bin/echo %{User-Name}\"\n        input_pairs = \"request\"\n        output_pairs = \"reply\"\n        shell_escape = yes\n  }\n  # Loading module \"exec\" from file /etc/raddb/mods-enabled/exec\n  exec {\n        wait = no\n        input_pairs = \"request\"\n        shell_escape = yes\n        timeout = 10\n  }\n  # Loaded module rlm_expiration\n  # Loading module \"expiration\" from file /etc/raddb/mods-enabled/expiration\n  # Loaded module rlm_expr\n  # Loading module \"expr\" from file /etc/raddb/mods-enabled/expr\n  expr {\n        safe_characters = \"@abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.-_: /\u00e4\u00e9\u00f6\u00fc\u00e0\u00e2\u00e6\u00e7\u00e8\u00e9\u00ea\u00eb\u00ee\u00ef\u00f4\u0153\u00f9\u00fb\u00fca\u00ff\u00c4\u00c9\u00d6\u00dc\u00df\u00c0\u00c2\u00c6\u00c7\u00c8\u00c9\u00ca\u00cb\u00ce\u00cf\u00d4\u0152\u00d9\u00db\u00dc\u0178\"\n  }\n  # Loaded module rlm_files\n  # Loading module \"files\" from file /etc/raddb/mods-enabled/files\n  files {\n        filename = \"/etc/raddb/mods-config/files/authorize\"\n        acctusersfile = \"/etc/raddb/mods-config/files/accounting\"\n        preproxy_usersfile = \"/etc/raddb/mods-config/files/pre-proxy\"\n  }\n  # Loaded module rlm_linelog\n  # Loading module \"linelog\" from file /etc/raddb/mods-enabled/linelog\n  linelog {\n        filename = \"/var/log/radius/linelog\"\n        escape_filenames = no\n        syslog_severity = \"info\"\n        permissions = 384\n        format = \"This is a log message for %{User-Name}\"\n        reference = \"messages.%{%{reply:Packet-Type}:-default}\"\n  }\n  # Loading module \"log_accounting\" from file /etc/raddb/mods-enabled/linelog\n  linelog log_accounting {\n        filename = \"/var/log/radius/linelog-accounting\"\n        escape_filenames = no\n        syslog_severity = \"info\"\n        permissions = 384\n        format = \"\"\n        reference = \"Accounting-Request.%{%{Acct-Status-Type}:-unknown}\"\n  }\n  # Loaded module rlm_logintime\n  # Loading module \"logintime\" from file /etc/raddb/mods-enabled/logintime\n  logintime {\n        minimum_timeout = 60\n  }\n  # Loaded module rlm_mschap\n  # Loading module \"mschap\" from file /etc/raddb/mods-enabled/mschap\n  mschap {\n        use_mppe = yes\n        require_encryption = no\n        require_strong = no\n        with_ntdomain_hack = yes\n   passchange {\n   }\n        allow_retry = yes\n        winbind_retry_with_normalised_username = no\n  }\n  # Loading module \"ntlm_auth\" from file /etc/raddb/mods-enabled/ntlm_auth\n  exec ntlm_auth {\n        wait = yes\n        program = \"/path/to/ntlm_auth --request-nt-key --domain=MYDOMAIN --username=%{mschap:User-Name} --password=%{User-Password}\"\n        shell_escape = yes\n  }\n  # Loaded module rlm_pap\n  # Loading module \"pap\" from file /etc/raddb/mods-enabled/pap\n  pap {\n        normalise = yes\n  }\n  # Loaded module rlm_passwd\n  # Loading module \"etc_passwd\" from file /etc/raddb/mods-enabled/passwd\n  passwd etc_passwd {\n        filename = \"/etc/passwd\"\n        format = \"*User-Name:Crypt-Password:\"\n        delimiter = \":\"\n        ignore_nislike = no\n        ignore_empty = yes\n        allow_multiple_keys = no\n        hash_size = 100\n  }\n  # Loaded module rlm_preprocess\n  # Loading module \"preprocess\" from file /etc/raddb/mods-enabled/preprocess\n  preprocess {\n        huntgroups = \"/etc/raddb/mods-config/preprocess/huntgroups\"\n        hints = \"/etc/raddb/mods-config/preprocess/hints\"\n        with_ascend_hack = no\n        ascend_channels_per_line = 23\n        with_ntdomain_hack = no\n        with_specialix_jetstream_hack = no\n        with_cisco_vsa_hack = no\n        with_alvarion_vsa_hack = no\n  }\n  # Loaded module rlm_radutmp\n  # Loading module \"radutmp\" from file /etc/raddb/mods-enabled/radutmp\n  radutmp {\n        filename = \"/var/log/radius/radutmp\"\n        username = \"%{User-Name}\"\n        case_sensitive = yes\n        check_with_nas = yes\n        permissions = 384\n        caller_id = yes\n  }\n  # Loaded module rlm_realm\n  # Loading module \"IPASS\" from file /etc/raddb/mods-enabled/realm\n  realm IPASS {\n        format = \"prefix\"\n        delimiter = \"/\"\n        ignore_default = no\n        ignore_null = no\n  }\n  # Loading module \"suffix\" from file /etc/raddb/mods-enabled/realm\n  realm suffix {\n        format = \"suffix\"\n        delimiter = \"@\"\n        ignore_default = no\n        ignore_null = no\n  }\n  # Loading module \"realmpercent\" from file /etc/raddb/mods-enabled/realm\n  realm realmpercent {\n        format = \"suffix\"\n        delimiter = \"%\"\n        ignore_default = no\n        ignore_null = no\n  }\n  # Loading module \"ntdomain\" from file /etc/raddb/mods-enabled/realm\n  realm ntdomain {\n        format = \"prefix\"\n        delimiter = \"\\\\\"\n        ignore_default = no\n        ignore_null = no\n  }\n  # Loaded module rlm_replicate\n  # Loading module \"replicate\" from file /etc/raddb/mods-enabled/replicate\n  # Loaded module rlm_soh\n  # Loading module \"soh\" from file /etc/raddb/mods-enabled/soh\n  soh {\n        dhcp = yes\n  }\n  # Loading module \"sradutmp\" from file /etc/raddb/mods-enabled/sradutmp\n  radutmp sradutmp {\n        filename = \"/var/log/radius/sradutmp\"\n        username = \"%{User-Name}\"\n        case_sensitive = yes\n        check_with_nas = yes\n        permissions = 420\n        caller_id = no\n  }\n  # Loaded module rlm_unix\n  # Loading module \"unix\" from file /etc/raddb/mods-enabled/unix\n  unix {\n        radwtmp = \"/var/log/radius/radwtmp\"\n  }\nCreating attribute Unix-Group\n  # Loaded module rlm_unpack\n  # Loading module \"unpack\" from file /etc/raddb/mods-enabled/unpack\n  # Loaded module rlm_utf8\n  # Loading module \"utf8\" from file /etc/raddb/mods-enabled/utf8\n  # Loaded module rlm_perl\n  # Loading module \"perl\" from file /etc/raddb/mods-enabled/perl\n  perl {\n        filename = \"/etc/raddb/mods-config/perl/radius_linotp.pm\"\n        func_authorize = \"authorize\"\n        func_authenticate = \"authenticate\"\n        func_post_auth = \"post_auth\"\n        func_accounting = \"accounting\"\n        func_preacct = \"preacct\"\n        func_checksimul = \"checksimul\"\n        func_detach = \"detach\"\n        func_xlat = \"xlat\"\n        func_pre_proxy = \"pre_proxy\"\n        func_post_proxy = \"post_proxy\"\n        func_recv_coa = \"recv_coa\"\n        func_send_coa = \"send_coa\"\n  }\n  instantiate {\n  }\n  # Instantiating module \"reject\" from file /etc/raddb/mods-enabled/always\n  # Instantiating module \"fail\" from file /etc/raddb/mods-enabled/always\n  # Instantiating module \"ok\" from file /etc/raddb/mods-enabled/always\n  # Instantiating module \"handled\" from file /etc/raddb/mods-enabled/always\n  # Instantiating module \"invalid\" from file /etc/raddb/mods-enabled/always\n  # Instantiating module \"userlock\" from file /etc/raddb/mods-enabled/always\n  # Instantiating module \"notfound\" from file /etc/raddb/mods-enabled/always\n  # Instantiating module \"noop\" from file /etc/raddb/mods-enabled/always\n  # Instantiating module \"updated\" from file /etc/raddb/mods-enabled/always\n  # Instantiating module \"attr_filter.post-proxy\" from file /etc/raddb/mods-enabled/attr_filter\nreading pairlist file /etc/raddb/mods-config/attr_filter/post-proxy\n  # Instantiating module \"attr_filter.pre-proxy\" from file /etc/raddb/mods-enabled/attr_filter\nreading pairlist file /etc/raddb/mods-config/attr_filter/pre-proxy\n  # Instantiating module \"attr_filter.access_reject\" from file /etc/raddb/mods-enabled/attr_filter\nreading pairlist file /etc/raddb/mods-config/attr_filter/access_reject\n[/etc/raddb/mods-config/attr_filter/access_reject]:11 Check item \"FreeRADIUS-Response-Delay\"    found in filter list for realm \"DEFAULT\". \n[/etc/raddb/mods-config/attr_filter/access_reject]:11 Check item \"FreeRADIUS-Response-Delay-USec\"       found in filter list for realm \"DEFAULT\". \n  # Instantiating module \"attr_filter.access_challenge\" from file /etc/raddb/mods-enabled/attr_filter\nreading pairlist file /etc/raddb/mods-config/attr_filter/access_challenge\n  # Instantiating module \"attr_filter.accounting_response\" from file /etc/raddb/mods-enabled/attr_filter\nreading pairlist file /etc/raddb/mods-config/attr_filter/accounting_response\n  # Instantiating module \"cache_eap\" from file /etc/raddb/mods-enabled/cache_eap\nrlm_cache (cache_eap): Driver rlm_cache_rbtree (module rlm_cache_rbtree) loaded and linked\n  # Instantiating module \"detail\" from file /etc/raddb/mods-enabled/detail\n  # Instantiating module \"auth_log\" from file /etc/raddb/mods-enabled/detail.log\nrlm_detail (auth_log): 'User-Password' suppressed, will not appear in detail output\n  # Instantiating module \"reply_log\" from file /etc/raddb/mods-enabled/detail.log\n  # Instantiating module \"pre_proxy_log\" from file /etc/raddb/mods-enabled/detail.log\n  # Instantiating module \"post_proxy_log\" from file /etc/raddb/mods-enabled/detail.log\n  # Instantiating module \"expiration\" from file /etc/raddb/mods-enabled/expiration\n  # Instantiating module \"files\" from file /etc/raddb/mods-enabled/files\nreading pairlist file /etc/raddb/mods-config/files/authorize\n/etc/raddb/mods-config/files/authorize[46]: Parse error (check) for entry DEFAULT: Unknown or invalid value \"perl\" for attribute Auth-Type\nFailed reading /etc/raddb/mods-config/files/authorize\n/etc/raddb/mods-enabled/files[9]: Instantiation failed for module \"files\"\n</code></pre>\n\n<p>From this I can see the perl module being loaded but it seems something is not happy about the Auth-Type.</p>\n"}, {"tags": ["perl", "activemq", "stomp", "messagebroker"], "answers": [{"tags": [], "owner": {"reputation": 2481, "user_id": 1444748, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WqxKU.jpg?s=128&g=1", "display_name": "Morad", "link": "https://stackoverflow.com/users/1444748/morad"}, "is_accepted": true, "score": 1, "last_activity_date": 1569447263, "creation_date": 1569447263, "answer_id": 58106823, "question_id": 58106240, "link": "https://stackoverflow.com/questions/58106240/send-binary-message-using-netstompclient/58106823#58106823", "title": "Send binary message using Net::Stomp::Client", "body": "<p>I solved this by adding <code>bytes_message =&gt; 1</code> to the <code>send()</code> method\nIn newer versions you need to use stomp 1.1 or greater (default is 1.0) (pass <code>version</code> or <code>accept_version</code> to the stomp client constructor) and higher and set the <code>content-type</code></p>\n"}], "owner": {"reputation": 2481, "user_id": 1444748, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WqxKU.jpg?s=128&g=1", "display_name": "Morad", "link": "https://stackoverflow.com/users/1444748/morad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 58106823, "answer_count": 1, "score": 0, "last_activity_date": 1569447263, "creation_date": 1569444006, "question_id": 58106240, "link": "https://stackoverflow.com/questions/58106240/send-binary-message-using-netstompclient", "title": "Send binary message using Net::Stomp::Client", "body": "<p>I need to send a binary message to Message Broker using the perl library <code>Net::Stomp::Client</code>. But whenever I send a message using the <code>send</code> or <code>send_with_receipt</code> methods, the message is received as a Text message.\nI'm using <code>ActiveMQ</code> in my server, and when I call consume, the received message is of type <code>TextMessage</code>. I need it to be of type <code>BytesMessage</code>.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I see in this <a href=\"http://activemq.apache.org/stomp.html\" rel=\"nofollow noreferrer\">link</a> that setting the content-length header will set the type to Bytes message... But I didn't find any example using Net::Stomp::Perl... If anyone can provide an example it would be great...</p>\n"}, {"tags": ["perl", "syntax", "subroutine", "chr"], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 4, "last_activity_date": 1569436802, "creation_date": 1569436802, "answer_id": 58104694, "question_id": 58104509, "link": "https://stackoverflow.com/questions/58104509/use-function-names-in-perls-map/58104694#58104694", "title": "use function names in perl&#39;s map", "body": "<p><code>map { chr } 0x00 .. 0x7F</code> is already pretty concise, but in addition to the <code>map BLOCK LIST</code> syntax, there is also the <code>map EXPR,LIST</code> syntax.</p>\n\n<pre><code>map chr,0x00..0x7f\nmap chr,0..127\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12104832"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 58104694, "answer_count": 1, "score": 0, "last_activity_date": 1583758760, "creation_date": 1569435947, "last_edit_date": 1583758760, "question_id": 58104509, "link": "https://stackoverflow.com/questions/58104509/use-function-names-in-perls-map", "title": "use function names in perl&#39;s map", "body": "<p>I was playing with this piece of code to print a list of chars:</p>\n\n<pre><code>perl -e 'print join(\" \", map { sprintf \"%02x\", ord }  grep /\\s/, map { chr } 0x0 .. 0x7F )'\n</code></pre>\n\n<p>Is there a easier way to write <code>map { chr } 0x0 .. 0x7F</code> ?</p>\n\n<p>I've tried:</p>\n\n<pre><code>map \\&amp;chr 0x0 .. 0x7F\n</code></pre>\n\n<p>But I get syntax error.</p>\n"}, {"tags": ["perl", "cpan", "dmake"], "comments": [{"owner": {"reputation": 31, "user_id": 12120845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d793cbe76d67ea210ff75ca058e0afb6?s=128&d=identicon&r=PG&f=1", "display_name": "mwk", "link": "https://stackoverflow.com/users/12120845/mwk"}, "edited": false, "score": 0, "creation_date": 1569435224, "post_id": 58104250, "comment_id": 102599703, "body": "Since posting this question, I also went into cpan and did an &quot;install YAML&quot; (noted as not installed during the PostScript::Simple install attempt). Along the way, it also ran into dmake issues (same error)."}, {"owner": {"reputation": 31, "user_id": 12120845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d793cbe76d67ea210ff75ca058e0afb6?s=128&d=identicon&r=PG&f=1", "display_name": "mwk", "link": "https://stackoverflow.com/users/12120845/mwk"}, "edited": false, "score": 0, "creation_date": 1569960540, "post_id": 58104250, "comment_id": 102762578, "body": "@stevieb - I have mingw installed on my system and tried pointing cpan to its make exe:    <code>cpan[2]&gt; o conf make c:\\\\MinGW\\\\bin\\\\mingw32-make.exe     make               [c:\\MinGW\\bin\\mingw32-make.exe] Please use &#39;o conf commit&#39; to make the config permanent!</code>    After:   <code>cpan[4]&gt; o conf make     make               [c:\\MinGW\\bin\\mingw32-make.exe] Type &#39;o conf&#39; to view all configuration items</code>    However, installing PostScript::Simple still failed as it didn&#39;t seem to like the mingw make exe."}], "answers": [{"comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1569481918, "post_id": 58104540, "comment_id": 102612660, "body": "The question is about ActivePerl, not Strawberry."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1569506326, "post_id": 58104540, "comment_id": 102625827, "body": "@daxim Whether it be ActivePerl or Strawberry, would the troubleshooting steps not be the same?"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1569436088, "creation_date": 1569436088, "answer_id": 58104540, "question_id": 58104250, "link": "https://stackoverflow.com/questions/58104250/dmake-not-found-when-installing-perl-module-using-cpan/58104540#58104540", "title": "dmake not found when installing Perl module using CPAN", "body": "<p>Run<code>cpan</code>, and execute the following:</p>\n\n<pre><code>o conf make\n</code></pre>\n\n<p>Here's an example from one of my Windows systems:</p>\n\n<pre><code>cpan&gt; o conf make\n    make               [C:\\STRAWB~1\\c\\bin\\gmake.exe]\n</code></pre>\n\n<p>Check to see if the file listed in the make option is available on your system where <code>cpan</code> thinks it is (the entry may just be missing the path information to the binary).</p>\n\n<p>If it's not, either find it, or look for another make program (<code>gmake.exe</code> is common), then enter the path and the make program's filename with the configuration command under <code>cpan</code>:</p>\n\n<pre><code>cpan&gt; o conf make C:\\\\Strawberry\\\\c\\\\bin\\\\gmake.exe\n    make               [C:\\Strawb~1\\c\\bin\\gmake.exe]\n    commit: wrote 'C:\\Strawberry\\perl\\lib/CPAN/Config.pm'\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 12120845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d793cbe76d67ea210ff75ca058e0afb6?s=128&d=identicon&r=PG&f=1", "display_name": "mwk", "link": "https://stackoverflow.com/users/12120845/mwk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1722, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1569482035, "creation_date": 1569434857, "last_edit_date": 1569482035, "question_id": 58104250, "link": "https://stackoverflow.com/questions/58104250/dmake-not-found-when-installing-perl-module-using-cpan", "title": "dmake not found when installing Perl module using CPAN", "body": "<p>I installed Perl from ActiveState. Plain version with no extensions. Windows 10.\n    \"This is perl 5, version 28, subversion 1 (v5.28.1) built for MSWin32-x64-multi-thread\"</p>\n\n<p>A pre-existing perl script that I need to use accesses PostScript::Simple so I need to add that to my install.</p>\n\n<p>Supposedly, the right way to do this is to open cpan and run the command \"install PostScript::Simple\".</p>\n\n<p>However, it eventually fails with a dmake error. I've tried cpan install dmake and appears to be trying to do so, but that also fails.</p>\n\n<pre><code>Loading internal logger. Log::Log4perl recommended for better logging\nReading 'H:\\.cpan\\Metadata'\n  Database was generated on Wed, 25 Sep 2019 15:55:37 GMT\nRunning install for module 'PostScript::Simple'\nCPAN: Digest::SHA loaded ok (v6.01)\nCPAN: Compress::Zlib loaded ok (v2.074)\nChecksum for H:\\.cpan\\sources\\authors\\id\\M\\MC\\MCNEWTON\\PostScript-Simple-0.09.tar.gz ok\nCPAN: Archive::Tar loaded ok (v2.30)\n'YAML' not installed, will not store persistent state\nCPAN: CPAN::Meta::Requirements loaded ok (v2.140)\nCPAN: Parse::CPAN::Meta loaded ok (v2.150010)\nCPAN: CPAN::Meta loaded ok (v2.150010)\nCPAN: Module::CoreList loaded ok (v5.20181129_28)\nConfiguring M/MC/MCNEWTON/PostScript-Simple-0.09.tar.gz with Makefile.PL\nChecking if your kit is complete...\nLooks good\nGenerating a dmake-style Makefile\nWriting Makefile for PostScript::Simple\nWriting MYMETA.yml and MYMETA.json\n  MCNEWTON/PostScript-Simple-0.09.tar.gz\n  C:\\Perl64\\bin\\perl.exe Makefile.PL -- OK\nRunning make for M/MC/MCNEWTON/PostScript-Simple-0.09.tar.gz\n**'dmake' is not recognized as an internal or external command,**\noperable program or batch file.\n  MCNEWTON/PostScript-Simple-0.09.tar.gz\n  dmake -- NOT OK\n</code></pre>\n"}, {"tags": ["regex", "bash", "shell", "perl", "command-line"], "answers": [{"tags": [], "owner": {"reputation": 547, "user_id": 8113769, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9tknD.jpg?s=128&g=1", "display_name": "sungtm", "link": "https://stackoverflow.com/users/8113769/sungtm"}, "is_accepted": false, "score": 1, "last_activity_date": 1569413981, "last_edit_date": 1569413981, "creation_date": 1569413636, "answer_id": 58098124, "question_id": 58097543, "link": "https://stackoverflow.com/questions/58097543/using-bash-variable-names-as-match-replacement-in-perl-regex-substitution-comman/58098124#58098124", "title": "Using bash variable names as match replacement in perl regex substitution command line", "body": "<p>Use <code>export</code> to access bash variables in Perl scripts:</p>\n\n<p>Try this:</p>\n\n<pre><code>export varone=\"noob\"\nexport vartwo=\"trivial\"\necho \"my {varone} and {vartwo} question\" | perl -pe 's|(.*){(\\w+)}(.*){(\\w+)}(.*)|${1}${ENV{$2}}${3}${ENV{$4}}${5}|g'\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<pre><code>echo \"my {varone} and {vartwo} question\" | perl -pe 's|(.*){(\\w+)}(.*){(\\w+)}(.*)|${1}${ENV{$2}}${3}${ENV{$4}}${5}|g'\nmy noob and trivial question\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1569419396, "post_id": 58098570, "comment_id": 102591663, "body": "-E is not forward compatible. It shouldn&#39;t be used except for single-use scripts."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1569415017, "creation_date": 1569415017, "answer_id": 58098570, "question_id": 58097543, "link": "https://stackoverflow.com/questions/58097543/using-bash-variable-names-as-match-replacement-in-perl-regex-substitution-comman/58098570#58098570", "title": "Using bash variable names as match replacement in perl regex substitution command line", "body": "<p>Here is another approach:</p>\n\n<pre><code>echo \"my {varone} and {vartwo} question\" | \\\n     perl -wpE 'BEGIN{ %h = @ARGV;@ARGV=() } s|{(\\w+)\\}|$h{$1}|g' \\\n     \"varone\" \"$varone\" \"vartwo\" \"$vartwo\" \n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>my noob and trivial question\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 5, "last_activity_date": 1569415884, "creation_date": 1569415884, "answer_id": 58098863, "question_id": 58097543, "link": "https://stackoverflow.com/questions/58097543/using-bash-variable-names-as-match-replacement-in-perl-regex-substitution-comman/58098863#58098863", "title": "Using bash variable names as match replacement in perl regex substitution command line", "body": "<p>Your main problem here is that you need to use <code>export</code> in order for your variables to be seen in your subprocesses (like the <code>perl</code> process).</p>\n\n<pre><code>export varone=\"noob\"\nexport vartwo=\"trivial\"\necho \"my {varone} and {vartwo} question\" | perl -pe '...'\n</code></pre>\n\n<p>You also need to know that shell variables are accessed inside a Perl program using the <code>%ENV</code> hash.</p>\n\n<p>So your code can be simplified to:</p>\n\n<pre><code>export varone=\"noob\"\nexport vartwo=\"trivial\"\necho \"my {varone} and {vartwo} question\" | perl -pe 's|\\{(\\w+)}|$ENV{$1}|g'\n</code></pre>\n\n<p>You might consider adding an option to check for unknown variables.</p>\n\n<pre><code>export varone=\"noob\"\nexport vartwo=\"trivial\"\necho \"my {varone} and {vartwo} question {varxxx}\" | perl -pe 's|\\{(\\w+)}|$ENV{$1}//\"UNKNOWN\"|g'\n</code></pre>\n\n<p>But I'd recommend looking at a <a href=\"https://metacpan.org/pod/Template\" rel=\"noreferrer\">proper templating engine</a> for this.</p>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 10822962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41bbe5dda6d8fc828895f214bcd58d34?s=128&d=identicon&r=PG&f=1", "display_name": "garys", "link": "https://stackoverflow.com/users/10822962/garys"}, "edited": false, "score": 0, "creation_date": 1569423673, "post_id": 58099790, "comment_id": 102594302, "body": "That&#39;s it, I appreciate the perl solution without any external storage as well, thanks for pointing this out!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1569418859, "creation_date": 1569418859, "answer_id": 58099790, "question_id": 58097543, "link": "https://stackoverflow.com/questions/58097543/using-bash-variable-names-as-match-replacement-in-perl-regex-substitution-comman/58099790#58099790", "title": "Using bash variable names as match replacement in perl regex substitution command line", "body": "<p>Don't generate Perl code from the shell! <a href=\"https://stackoverflow.com/a/13354418/589924\">It isn't easy</a>.</p>\n\n<p>Instead of generating code, pass the values to the script. <a href=\"https://stackoverflow.com/a/53529756/589924\">This answer</a> shows a couple of ways you can pass values to a Perl one-liner. Exporting the variables you want to interpolate is the simplest here.</p>\n\n <pre class=\"lang-sh prettyprint-override\"><code>export varone=\"noob\"\nexport vartwo=\"trivial\"\necho \"my {varone} and {vartwo} question\" |\n   perl -pe's/\\{(\\w+)\\}/$ENV{$1}/g'\n</code></pre>\n\n<p>It also means you can interpolate other variables like <code>PATH</code>. If that's no good, you'll have to somehow check if the variable name is legal.</p>\n\n <pre class=\"lang-sh prettyprint-override\"><code>export varone=\"noob\"\nexport vartwo=\"trivial\"\necho \"my {varone} and {vartwo} question\" |\n   perl -pe's/\\{(varone|vartwo)\\}/$ENV{$1}/g'\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 10822962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41bbe5dda6d8fc828895f214bcd58d34?s=128&d=identicon&r=PG&f=1", "display_name": "garys", "link": "https://stackoverflow.com/users/10822962/garys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "accepted_answer_id": 58099790, "answer_count": 4, "score": 3, "last_activity_date": 1569418859, "creation_date": 1569411620, "question_id": 58097543, "link": "https://stackoverflow.com/questions/58097543/using-bash-variable-names-as-match-replacement-in-perl-regex-substitution-comman", "title": "Using bash variable names as match replacement in perl regex substitution command line", "body": "<p>I'm trying to replace substrings delimited by characters in a string by the values of their matching bash variables in shell.</p>\n\n<p>So far, I've tried this without any success:</p>\n\n<pre><code>varone=\"noob\"\nvartwo=\"trivial\"\necho \"my {varone} and {vartwo} question\" |\u00a0perl -pe 's|(.*){(\\w+)}(.*)|${1}'$(echo \"${'${2}'}\")'${3}|g'\n</code></pre>\n\n<p>But I get: </p>\n\n<pre><code>bash: ${'${2}'}: bad substitution\n</code></pre>\n\n<p>Any idea on how to do this? Thanks in advance!</p>\n"}, {"tags": ["perl", "templates", "expression", "freemarker"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1569398962, "post_id": 58093157, "comment_id": 102580164, "body": "<a href=\"https://metacpan.org/search?size=20&amp;q=freemarker\" rel=\"nofollow noreferrer\">Searching CPAN for &quot;freemarker&quot;</a> didn&#39;t return anything. So probably not."}, {"owner": {"reputation": 49, "user_id": 9602275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a2a85504f21fdaa2365b74a6adf3cb8?s=128&d=identicon&r=PG&f=1", "display_name": "goutham", "link": "https://stackoverflow.com/users/9602275/goutham"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1569475480, "post_id": 58093157, "comment_id": 102610006, "body": "Thanks Dave. there is no module found."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1569485280, "post_id": 58093157, "comment_id": 102614354, "body": "Yes. That&#39;s what I said."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 9602275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a2a85504f21fdaa2365b74a6adf3cb8?s=128&d=identicon&r=PG&f=1", "display_name": "goutham", "link": "https://stackoverflow.com/users/9602275/goutham"}, "edited": false, "score": 0, "creation_date": 1569475440, "post_id": 58094742, "comment_id": 102609993, "body": "Hi Daxim, thanks for your response, can i get sample snippet code using fmpp, for freemarker template ?"}, {"owner": {"reputation": 49, "user_id": 9602275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a2a85504f21fdaa2365b74a6adf3cb8?s=128&d=identicon&r=PG&f=1", "display_name": "goutham", "link": "https://stackoverflow.com/users/9602275/goutham"}, "edited": false, "score": 0, "creation_date": 1569585975, "post_id": 58094742, "comment_id": 102655200, "body": "Yes sir, it&#39;s working, tried with Inline::Java, thank you so much. Do we need to bind perl Hash ref to pass java as a HashMap ? any code or link would be help full."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 49, "user_id": 9602275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a2a85504f21fdaa2365b74a6adf3cb8?s=128&d=identicon&r=PG&f=1", "display_name": "goutham", "link": "https://stackoverflow.com/users/9602275/goutham"}, "edited": false, "score": 0, "creation_date": 1569773939, "post_id": 58094742, "comment_id": 102696649, "body": "@goutham, <a href=\"https://stackoverflow.com/questions/ask\">open a new question</a> for that."}, {"owner": {"reputation": 49, "user_id": 9602275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a2a85504f21fdaa2365b74a6adf3cb8?s=128&d=identicon&r=PG&f=1", "display_name": "goutham", "link": "https://stackoverflow.com/users/9602275/goutham"}, "edited": false, "score": 0, "creation_date": 1569782003, "post_id": 58094742, "comment_id": 102698623, "body": "Ok Daxim, link for the same, [<a href=\"https://stackoverflow.com/questions/58144163/how-do-we-bind-perl-hash-reference-to-java-hash-map/58144699#58144699]\" title=\"how do we bind perl hash reference to java hash map\">stackoverflow.com/questions/58144163/&hellip;</a>"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 2, "last_activity_date": 1569401810, "creation_date": 1569401810, "answer_id": 58094742, "question_id": 58093157, "link": "https://stackoverflow.com/questions/58093157/apache-freemarker-template-module-for-perl/58094742#58094742", "title": "Apache Freemarker Template module for perl", "body": "<p>You can</p>\n\n<ul>\n<li>call <code>fmpp</code> as a child process (e.g. with <a href=\"http://p3rl.org/IPC::System::Simple\" rel=\"nofollow noreferrer\"><code>IPC::System::Simple</code></a>)</li>\n<li>or call the Java library with <a href=\"http://p3rl.org/Inline::Java\" rel=\"nofollow noreferrer\"><code>Inline::Java</code></a>.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 25516, "user_id": 606679, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/82758750c35c4b4ca9972bac9562b36c?s=128&d=identicon&r=PG", "display_name": "ddekany", "link": "https://stackoverflow.com/users/606679/ddekany"}, "is_accepted": false, "score": 0, "last_activity_date": 1569515984, "creation_date": 1569515984, "answer_id": 58121280, "question_id": 58093157, "link": "https://stackoverflow.com/questions/58093157/apache-freemarker-template-module-for-perl/58121280#58121280", "title": "Apache Freemarker Template module for perl", "body": "<p>FreeMarker only has Java implementation. As it's among the more complex template languages, it's unlikely that it will be ported to other platforms.</p>\n"}], "owner": {"reputation": 49, "user_id": 9602275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a2a85504f21fdaa2365b74a6adf3cb8?s=128&d=identicon&r=PG&f=1", "display_name": "goutham", "link": "https://stackoverflow.com/users/9602275/goutham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1569515984, "creation_date": 1569396160, "question_id": 58093157, "link": "https://stackoverflow.com/questions/58093157/apache-freemarker-template-module-for-perl", "title": "Apache Freemarker Template module for perl", "body": "<p>i wanna evaluate freemarker template expression in perl, do we have any module which supports it ?. Thank you.</p>\n"}, {"tags": ["oracle", "perl", "dbd"], "comments": [{"owner": {"reputation": 1952, "user_id": 4178262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MVZ9ZR1BFos/AAAAAAAAAAI/AAAAAAAAAAA/aEP8yOumPbw/photo.jpg?sz=128", "display_name": "Mark Stewart", "link": "https://stackoverflow.com/users/4178262/mark-stewart"}, "edited": false, "score": 0, "creation_date": 1569361617, "post_id": 58088422, "comment_id": 102570385, "body": "Is that a stray semi-colon <code>;</code>  in the line <code>;WITH GCG as (</code>  ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1569361878, "post_id": 58088422, "comment_id": 102570449, "body": "Does it work without the leading semi-colon (<code>;</code>)? If not, where does it show the asterisk (<code>*</code>)?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1569363756, "post_id": 58088422, "comment_id": 102570941, "body": "Include how you&#39;re preparing the statement?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1569371266, "post_id": 58088422, "comment_id": 102572431, "body": "Get rid of semicolons."}, {"owner": {"reputation": 13, "user_id": 8786691, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tCBlRcM0wNU/AAAAAAAAAAI/AAAAAAAAAjw/pkLKoISFeUw/photo.jpg?sz=128", "display_name": "Kevin Murray", "link": "https://stackoverflow.com/users/8786691/kevin-murray"}, "edited": false, "score": 1, "creation_date": 1569413880, "post_id": 58088422, "comment_id": 102588224, "body": "Ok. That&#39;s embarassing. I removed the semi-colons and it worked. I thought I had tried that but I&#39;m mistaken. Thanks everyone, sometimes fresh eyes on something helps."}], "answers": [{"tags": [], "owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1569363806, "last_edit_date": 1569363806, "creation_date": 1569362725, "answer_id": 58088703, "question_id": 58088422, "link": "https://stackoverflow.com/questions/58088422/perl-using-with-clause-in-database-prepare/58088703#58088703", "title": "PERL using WITH clause in Database prepare", "body": "<p>Change your statement to</p>\n\n<pre><code>my $sql = &lt;&lt;EOT;\nWITH GCG as (\nSELECT FIRST_NAME, CONFIRMATION,EMAIL,\nrow_number() over (partition by EMAIL order by (1)) gemail\nFROM GENERAL_VIEW \nWHERE \nCONFIRMATION is not null\nAND TO_CHAR(INSERT_DATE, 'YYYY-MM-DD HH24:MI:SS') &lt;= ?\nAND TO_CHAR(INSERT_DATE, 'YYYY-MM-DD HH24:MI:SS') &gt;= ?\nAND EMAIL is not null\n)\nSELECT FIRST_NAME, CONFIRMATION,EMAIL FROM GCG WHERE gemail=1\nEOT\n</code></pre>\n\n<p>Bon chance.</p>\n"}], "owner": {"reputation": 13, "user_id": 8786691, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tCBlRcM0wNU/AAAAAAAAAAI/AAAAAAAAAjw/pkLKoISFeUw/photo.jpg?sz=128", "display_name": "Kevin Murray", "link": "https://stackoverflow.com/users/8786691/kevin-murray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 58088703, "answer_count": 1, "score": 0, "last_activity_date": 1569363806, "creation_date": 1569360822, "question_id": 58088422, "link": "https://stackoverflow.com/questions/58088422/perl-using-with-clause-in-database-prepare", "title": "PERL using WITH clause in Database prepare", "body": "<p>I'm trying to prepare a complex query using WITH in perl against an Oracle DB and keep getting an error when preparing.</p>\n\n<blockquote>\n  <p>DBD::Proxy::st execute failed: Server returned error: Failed to execute method CallMethod: DBD::Oracle::db prepare failed: ORA-00911: invalid character (DBD ERROR: error possibly near &lt;*> </p>\n</blockquote>\n\n<p>Here is the sql I'm trying to prepare:</p>\n\n<pre><code>my $sql = &lt;&lt;EOT;\n;WITH GCG as (\nSELECT FIRST_NAME, CONFIRMATION,EMAIL,\nrow_number() over (partition by EMAIL order by (1)) gemail\nFROM GENERAL_VIEW \nWHERE \nCONFIRMATION is not null\nAND TO_CHAR(INSERT_DATE, 'YYYY-MM-DD HH24:MI:SS') &lt;= ?\nAND TO_CHAR(INSERT_DATE, 'YYYY-MM-DD HH24:MI:SS') &gt;= ?\nAND EMAIL is not null\n)\nSELECT FIRST_NAME, CONFIRMATION,EMAIL FROM GCG WHERE gemail=1;\nEOT\n</code></pre>\n\n<p>I've executed the query in DataGrip and I get a result. Seems there may be a perl nuance I'm missing.</p>\n\n<p>Anyone have any ideas that could help me out?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl", "ubuntu", "awk", "sed"], "comments": [{"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1569356276, "post_id": 58087298, "comment_id": 102568621, "body": "so do you mean replace line 3 with <code>|pattern|still some other different data</code> OR can you just delete lines 1 &amp; 2? Please update your Q if appropriate. Good luck."}, {"owner": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "reply_to_user": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1569356619, "post_id": 58087298, "comment_id": 102568754, "body": "@shellter: the sentence &#39;remove the first two lines of the pattern&#39; was in the original question. I have accentuated it. !You only need to delete line 1 &amp; 2!. Why Good luck? Is this a complicated thing to do?"}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 1, "creation_date": 1569356794, "post_id": 58087298, "comment_id": 102568822, "body": "&#39;remove the first two lines of the pattern&#39; seems less ambiguous. I sign all my comments Good luck. Even this one, Good luck ;-)!"}, {"owner": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "reply_to_user": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 1, "creation_date": 1569359154, "post_id": 58087298, "comment_id": 102569669, "body": "Why the downvotes?!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569365586, "post_id": 58087298, "comment_id": 102571382, "body": "The shown sample starts with a three-line pattern, the last one being <code>|pattern|sdk;sd|</code>. So I&#39;d expect that in the output, but it&#39;s not? Now, that line itself starts another pattern, which ends with what you actually show in the desired output.  What gives?"}, {"owner": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569365919, "post_id": 58087298, "comment_id": 102571451, "body": "@zdim: see explication in edit (I need multi-line)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569366049, "post_id": 58087298, "comment_id": 102571486, "body": "Ah, so if they happen to be chained then the whole thing goes.  Alright :)"}, {"owner": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569366464, "post_id": 58087298, "comment_id": 102571592, "body": "@zdim: it feels a little bit like <a href=\"https://stackoverflow.com/q/29558738/189035\">this</a> question, except my case is more constrained (my patterns are strictly at the  beginning/end of lines). But I don&#39;t understand advanced awk good enough to make sense of the answer there."}], "answers": [{"comments": [{"owner": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "edited": false, "score": 0, "creation_date": 1569359061, "post_id": 58087815, "comment_id": 102569622, "body": "also, shouldn&#39;t the second <code>|pattern|</code> be followed by <code>.*</code> (just guess, i&#39;m not a sed god or anything). Something else: the third <code>|pattern|</code>: it should leave the third line of the pattern in place (<i>not</i> <code>|pattern|</code>. I have edited the example to make this more clear)"}, {"owner": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "edited": false, "score": 0, "creation_date": 1569369563, "post_id": 58087815, "comment_id": 102572134, "body": "I gave an example in the edit where the code does not seem to give the correct answer."}, {"owner": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "edited": false, "score": 1, "creation_date": 1569408294, "post_id": 58087815, "comment_id": 102585280, "body": "Thanks. Just to confirm that this code <i>is</i> giving the desired result. Thank you again. For info, it takes about 3 times as much time on my system to run (on a 1GB file) as @zdim&#39;s solution."}, {"owner": {"reputation": 8780, "user_id": 318716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Jwj3.png?s=128&g=1", "display_name": "Joseph Quinsey", "link": "https://stackoverflow.com/users/318716/joseph-quinsey"}, "reply_to_user": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "edited": false, "score": 0, "creation_date": 1569416792, "post_id": 58087815, "comment_id": 102590105, "body": "@user189035: Interesting about the speed! Anyway, it is good to have two independent solutions, so you can check one against the other."}], "tags": [], "owner": {"reputation": 8780, "user_id": 318716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Jwj3.png?s=128&g=1", "display_name": "Joseph Quinsey", "link": "https://stackoverflow.com/users/318716/joseph-quinsey"}, "is_accepted": false, "score": 1, "last_activity_date": 1569378481, "last_edit_date": 1569378481, "creation_date": 1569357565, "answer_id": 58087815, "question_id": 58087298, "link": "https://stackoverflow.com/questions/58087298/sed-awk-perl-remove-the-first-two-lines-of-a-3-line-pattern/58087815#58087815", "title": "sed/awk/perl remove the first two lines of a 3 line pattern", "body": "<p><strong><em>Updated answer:</em></strong> The following <strong>sed</strong> solution should work:</p>\n\n<pre><code>  sed '/\\n/!N;/\\n.*\\n/!N;/^|pattern|.*\\n.*,,\\n|pattern|/!{P;D;};s/[^\\n]*\\n//;D;'\n</code></pre>\n\n<p>Explanation:</p>\n\n<ul>\n<li><code>/\\n/!N</code> if the P-space has only one line, read the next</li>\n<li><code>/\\n.*\\n/!N</code> if the P-space has only two lines, read in a third</li>\n<li><code>/^|pattern|.*\\n.*,,\\n|pattern|/</code> test if the first and third lines start with |pattern|, and the middle line ends with two commas</li>\n<li><code>!{P;D;}</code> if the match <em>fails</em>, then print the first line and start over</li>\n<li><code>s/[^\\n]*\\n//;D;</code> otherwise, when the match <em>succeeds</em>, delete the first two lines, and start over.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "edited": false, "score": 0, "creation_date": 1569367347, "post_id": 58089226, "comment_id": 102571770, "body": "sorry, but what language is this? How do you use it in the bash prompt (suppose the file is named trial.txt)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "edited": false, "score": 1, "creation_date": 1569367602, "post_id": 58089226, "comment_id": 102571819, "body": "@user189035 Oh ... it&#39;s a Perl program. You run it as <code>scriptname.pl datafile</code>, where the shown program goes in the <code>scriptname.pl</code> file (call it any name of course), which is made executable.  (Or you can run it as <code>perl scriptname.pl datafile</code>) This <i>can</i> be massaged into a &quot;one-liner&quot; but that&#39;d be too much complexity and mess"}, {"owner": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "edited": false, "score": 0, "creation_date": 1569368856, "post_id": 58089226, "comment_id": 102572008, "body": "can this be changed to be included in a pipe chain: <code>... | perl perlscript.pl | ... &gt; trial2.txt</code>?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "edited": false, "score": 0, "creation_date": 1569368894, "post_id": 58089226, "comment_id": 102572014, "body": "@user189035 Edited regex, to disallow <code>|pattern|</code> to end with <code>,,</code> and to disallow <code>,,$</code> to start with <code>|pattern|</code>.  Perhaps a nitpick but it&#39;s your requirement."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "edited": false, "score": 0, "creation_date": 1569368950, "post_id": 58089226, "comment_id": 102572024, "body": "@user189035 &quot;<i>included in a pipe chain</i>&quot; -- sure ... what comes down the pipe to it?  The data, line by line ...?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "edited": false, "score": 0, "creation_date": 1569369163, "post_id": 58089226, "comment_id": 102572060, "body": "@user189035 Updated, see the added part"}, {"owner": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "edited": false, "score": 2, "creation_date": 1569369448, "post_id": 58089226, "comment_id": 102572115, "body": "I confirm it works perfectly and is 3 times faster than a tac | awk | tac based solution. Allow me to check the other answers out of respect."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1577475830, "last_edit_date": 1577475830, "creation_date": 1569367059, "answer_id": 58089226, "question_id": 58087298, "link": "https://stackoverflow.com/questions/58087298/sed-awk-perl-remove-the-first-two-lines-of-a-3-line-pattern/58089226#58089226", "title": "sed/awk/perl remove the first two lines of a 3 line pattern", "body": "<p>Here is a simple take on it, using a buffer to collect and manage the pattern-lines</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $file = shift or die \"Usage: $0 file\\n\";\n\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nmy @buf;\n\nwhile (&lt;$fh&gt;) { \n    chomp;\n    if (/^\\|pattern\\|/ and not /,,$/) { \n        @buf = $_;     # start the buffer (first line) or overwrite (third)\n    }   \n    elsif (/,,$/ and not /^\\|pattern\\|/) { \n        if  (@buf) { push @buf, $_ }  # add to buffer with first line in it\n        else       { say }            # not part of 3-line-pattern; print\n    }   \n    else { \n        say for @buf;  # time to print out buffer\n        @buf = ();     # ... empty it ...\n        say            # and print the current line\n    }   \n}\n</code></pre>\n\n<p>This prints the expected output.  </p>\n\n<p>Explanation.  </p>\n\n<ul>\n<li><p>Pattern-lines go in a buffer, and when we get the \"third line\" the first two need be removed. Then \"assign\" to the array whenever we see <code>^|pattern|</code> -- either to start the buffer if it's the first line or to re-initialize the array (removing what's in it) if it's the third line</p></li>\n<li><p>A line ending with <code>,,</code> is added to the buffer, if there is a line there already. Nothing prohibits lines ending with <code>,,</code> just so -- they may be outside of a pattern; in that case just print it</p></li>\n<li><p>So each <code>|pattern|</code> line sets the buffer straight -- either starts it or resets it.  Thus once we run into a line with neither <code>^|pattern|</code> nor <code>,,$</code> we can print out our buffer, and that line</p></li>\n</ul>\n\n<p>Please test more comprehensively, what i still didn't get to do. </p>\n\n<hr>\n\n<p>In order to run this either in a pipeline or on a file use the <a href=\"https://perldoc.perl.org/perlop.html#I%2fO-Operators\" rel=\"nofollow noreferrer\">\"magical\" <code>&lt;&gt;</code></a> filehandle.  So it becomes</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy @buf;\n\nwhile (&lt;&gt;) {  # reads lines from files given on command line, or from STDIN\n    ...\n}\n</code></pre>\n\n<p>Now you can run it either as <code>data | script.pl</code> or as <code>script.pl datafile</code>. (Make the script executable for this, or use as <code>perl script.pl</code>.)</p>\n\n<p>The script's output goes to <code>STDOUT</code> which can be piped into other programs or redirected to a file.</p>\n"}, {"comments": [{"owner": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "edited": false, "score": 0, "creation_date": 1569369520, "post_id": 58089432, "comment_id": 102572128, "body": "in the section <code>(?&lt;!pattern)</code>, should this be <code>(?&lt;!\\|pattern\\|)</code>?"}, {"owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "reply_to_user": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "edited": false, "score": 0, "creation_date": 1569370228, "post_id": 58089432, "comment_id": 102572271, "body": "@user189035 thank you for pointing out. It will be more appropriate. I&#39;ve modified my answer accordingly."}, {"owner": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "edited": false, "score": 0, "creation_date": 1569410280, "post_id": 58089432, "comment_id": 102586334, "body": "I confirm the answer works. Tho it was not specific in the question, this will be operating on huge files so that I cannot guarantee they would fit in memory."}], "tags": [], "owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "is_accepted": false, "score": 1, "last_activity_date": 1569370109, "last_edit_date": 1569370109, "creation_date": 1569369163, "answer_id": 58089432, "question_id": 58087298, "link": "https://stackoverflow.com/questions/58087298/sed-awk-perl-remove-the-first-two-lines-of-a-3-line-pattern/58089432#58089432", "title": "sed/awk/perl remove the first two lines of a 3 line pattern", "body": "<p>It may depend on how your file is huge but if it is smaller than the allowed memory size, how about:</p>\n\n<pre><code>perl -0777 -pe '\n    1 while s/^\\|pattern\\|.+?\\|\\n(?&lt;!\\|pattern\\|).+?,,\\n(\\|pattern\\|.+?\\|)$/\\1/m;\n' trial.txt\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>|pattern|aslkaa|\n|l'kk|3lke|,,\n|x;;lkaa|c,c,s|\n|-0-ses|3dsd|\n|xk;xzz|'l3ld|\n|0=9c09s|klkl32|\n|d0-zox|m,3,a|\n|x'.za|wkl;3|\n|=-0poxz|3kls|\n|x-]0';a|sd;ks|\n|wsd|756|\n|sdw|;lksd|\n|pattern|askjkas|\n|xp]o]xa|lk3j2|,,\n|]-p[z|lks|\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "edited": false, "score": 0, "creation_date": 1569403948, "post_id": 58089525, "comment_id": 102582913, "body": "Thank you: I&#39;m a bit biased because I find awk a bit more readable, so your solution is my personal favorite;) I tried to do that in awk and for the life of me could not figure this out. It&#39;s (by a small amount) faster than @zdim&#39;s solution on a 1GB file."}], "tags": [], "owner": {"reputation": 2731, "user_id": 2801913, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4ffbc065ffbc6e7597c5044f65c1ed40?s=128&d=identicon&r=PG&f=1", "display_name": "Graeme", "link": "https://stackoverflow.com/users/2801913/graeme"}, "is_accepted": false, "score": 1, "last_activity_date": 1569371592, "last_edit_date": 1569371592, "creation_date": 1569369987, "answer_id": 58089525, "question_id": 58087298, "link": "https://stackoverflow.com/questions/58087298/sed-awk-perl-remove-the-first-two-lines-of-a-3-line-pattern/58089525#58089525", "title": "sed/awk/perl remove the first two lines of a 3 line pattern", "body": "<p>An awk solution:</p>\n\n<pre><code>awk -v pa=pattern '\n    $0 ~ pa {\n        do {\n            hold=$0;\n            getline;\n            hold=hold \"\\n\" $0;\n            getline;\n        } while(match($0, pa));\n        print hold\n    }\n    1' trial.txt\n</code></pre>\n\n<p>The idea is to buffer the line that matched the pattern, then the line after. If the next line also matches the pattern, loop, this time buffer the most recent matching line and and the one following it. This has the effect of removing the lines that need to be replaced.</p>\n\n<p>When the loop stops, the first line the buffer contains is either the line to replace the removed lines or simply a first pattern match that is not to be removed. Either way the contents of the buffer get printed.</p>\n\n<p>The final <code>1</code> statement is needed to print the line that ended the while loop and all other lines that aren't the first or second after one matching the pattern.</p>\n"}, {"comments": [{"owner": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "edited": false, "score": 0, "creation_date": 1569418053, "post_id": 58097468, "comment_id": 102590848, "body": "Thank you. I confirm it passes my test data set. On my machine, on the  1GB file  I use for tests, it seems it is much slower than the awk solution of @Graeme (the fastest solution so far). Could it be that the regex search is slower than <code>match()</code> he uses? I have near 0 knowledge of these things but would have liked to know."}], "tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 1, "last_activity_date": 1569411339, "creation_date": 1569411339, "answer_id": 58097468, "question_id": 58087298, "link": "https://stackoverflow.com/questions/58087298/sed-awk-perl-remove-the-first-two-lines-of-a-3-line-pattern/58097468#58097468", "title": "sed/awk/perl remove the first two lines of a 3 line pattern", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed ':a;N;s/[^\\n]*/&amp;/3;Ta;/^|pattern|.*\\n.*,,\\n|pattern|/{/,,\\n.*\\n\\|,,$/!{s/.*\\n//;ba}};P;D' file\n</code></pre>\n\n<p>Populate the pattern space with the next three lines of the file. If the first pattern matches the current three lines and neither the first or the third line ends with <code>,,</code>, then delete the first two lines and repeat. Otherwise print and delete the first line of the three line window and repeat.</p>\n"}], "owner": {"reputation": 4897, "user_id": 189035, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/39c115a166788050ce9f1d1f5eacdd96?s=128&d=identicon&r=PG", "display_name": "user189035", "link": "https://stackoverflow.com/users/189035/user189035"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 1, "accepted_answer_id": 58089226, "answer_count": 5, "score": 4, "last_activity_date": 1577475830, "creation_date": 1569354757, "last_edit_date": 1569440462, "question_id": 58087298, "link": "https://stackoverflow.com/questions/58087298/sed-awk-perl-remove-the-first-two-lines-of-a-3-line-pattern", "title": "sed/awk/perl remove the first two lines of a 3 line pattern", "body": "<p>I have a huge text file. I need to replace all occurrences of this three line \npattern:</p>\n\n<pre><code>|pattern|some data|\n|giberish|,,\n|pattern|some other data|\n</code></pre>\n\n<p>by the last line of the pattern:</p>\n\n<pre><code>|pattern|some other data|\n</code></pre>\n\n<p><strong>remove the first two lines of the pattern, keep only the last one</strong>.</p>\n\n<ul>\n<li>The second line of the pattern ends with two commas and does not start with <code>|pattern|</code></li>\n<li>The first line of the pattern line starts with <code>|pattern|</code> and does not end with two commas.</li>\n<li>The third line of the pattern line starts with <code>|pattern|</code> and does not end with two commas.</li>\n</ul>\n\n<p>I tried this:</p>\n\n<pre><code>sed 'N;N;/^|pattern|.*\\n.*,,\\n|pattern|.*/I,+1 d' trial.txt\n</code></pre>\n\n<p>with no much luck</p>\n\n<p>Edit: Here is a more substantial example</p>\n\n<pre><code>#!/usr/bin/env bash\ncat &gt; trial.txt &lt;&lt;EOL\n|pattern|sdkssd|\n|.x,mz|e,dsa|,,\n|pattern|sdk;sd|\n|xl'x|cxm;s|,,\n|pattern|aslkaa|\n|l'kk|3lke|,,\n|x;;lkaa|c,c,s|\n|-0-ses|3dsd|\n|xk;xzz|'l3ld|\n|0=9c09s|klkl32|\n|d0-zox|m,3,a|\n|x'.za|wkl;3|\n|=-0poxz|3kls|\n|x-]0';a|sd;ks|\n|wsd|756|\n|sdw|;lksd|\n|pattern|askjkas|\n|xp]o]xa|lk3j2|,,\n|]-p[z|lks|\nEOL\n</code></pre>\n\n<p>and it should become:</p>\n\n<pre><code>|pattern|aslkaa|\n|l'kk|3lke|,,\n|x;;lkaa|c,c,s|\n|-0-ses|3dsd|\n|xk;xzz|'l3ld|\n|0=9c09s|klkl32|\n|d0-zox|m,3,a|\n|x'.za|wkl;3|\n|=-0poxz|3kls|\n|x-]0';a|sd;ks|\n|wsd|756|\n|sdw|;lksd|\n|pattern|askjkas|\n|xp]o]xa|lk3j2|,,\n|]-p[z|lks|\n</code></pre>\n\n<hr>\n\n<p>@zdim:</p>\n\n<p>the first three lines of the file:</p>\n\n<pre><code>|pattern|sdkssd|\n|.x,mz|e,dsa|,,\n|pattern|sdk;sd|\n</code></pre>\n\n<p>satisfy the pattern. So they are replaced by </p>\n\n<pre><code>|pattern|sdk;sd|\n</code></pre>\n\n<p>so the top of the file now becomes:</p>\n\n<pre><code>|pattern|sdk;sd|\n|xl'x|cxm;s|,,\n|pattern|aslkaa|\n|l'kk|3lke|,,\n...\n</code></pre>\n\n<p>the first three lines of which are:</p>\n\n<pre><code>|pattern|sdk;sd|\n|xl'x|cxm;s|,,\n|pattern|aslkaa|\n</code></pre>\n\n<p>which satisfy the pattern, so they are replaced by:</p>\n\n<pre><code>|pattern|aslkaa|\n</code></pre>\n\n<p>so the top of the file now is:</p>\n\n<pre><code>|pattern|aslkaa|\n|l'kk|3lke|,,\n|x;;lkaa|c,c,s|\n|-0-ses|3dsd|\n....\n</code></pre>\n\n<hr>\n\n<p>@JosephQuinsey: </p>\n\n<p>consider this file:</p>\n\n<pre><code>#!/usr/bin/env bash\ncat &gt; trial.txt &lt;&lt;EOL\n|pattern|blabla|\n|||4|||-0.97|0|1429037262.8271||20160229||1025||1000.0|0.01|,,\n|pattern|blable|\n|||5|||-1.27|0|1429037262.854||20160229||1025||1000.0|0.01|,,\n|pattern|blasbla|\n|||493|||-0.22|5|1429037262.8676||20170228||1025||1000.0|0.01|,,\n|||11|||-0.22|5|1429037262.8676||20170228||1025||1000.0|0.01|,|T|347||1429043438.1962|-0.22|5|0||-0.22|1429043438.1962|,|Q|346||1429043437.713|-0.24|26|-0.22|5|||1429043437.713|\n|pattern|jksds|\n|||232|||-5.66|0|1429037262.817||20150415||1025||1000.0|0.01|,,\n|pattern|bdjkds|\n|||123q|||-7.15|0|1429037262.8271||20150415||1025||1000.0|0.01|,,\n|pattern|blabla|\n|||239ps|||-1.38|79086|1429037262.8773||20150415||1025||1000.0|0.01|,,\n|||-92opa|||-1.38|79086|1429037262.8773||20150415||1025||1000.0|0.01|,|T|1||1428969600.5019|-0.99|1|11||||,\n|||kj2w|||-1.38|79086|1429037262.8773||20150415||1025||1000.0|0.01|,|T|2||1428969600.5019|-1|1|11||||,\n|||0293|||-1.38|79086|1429037262.8773||20150415||1025||1000.0|0.01|,|T|3||1428969600.5019|-1.01|1|11||||,\n|||2;;w32|||-1.38|79086|1429037262.8773||20150415||1025||1000.0|0.01|,|T|4||1428969600.5019|-1.11|1|11||||,\nEOL\n</code></pre>\n"}, {"tags": ["unit-testing", "perl"], "answers": [{"comments": [{"owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "edited": false, "score": 1, "creation_date": 1569345285, "post_id": 58085076, "comment_id": 102564346, "body": "<code>replace a subroutine definition</code>, that is exactly what I wanted, and it works, Thanks!"}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 4, "last_activity_date": 1569345359, "last_edit_date": 1569345359, "creation_date": 1569344478, "answer_id": 58085076, "question_id": 58084633, "link": "https://stackoverflow.com/questions/58084633/how-to-mock-a-func-inside-thefile-pl-instead-of-a-module/58085076#58085076", "title": "how to mock a func inside thefile.pl instead of a module", "body": "<p>Your problem is that you are using the filename as a bare word, so Perl interprets that as a package name. Since <code>.</code> isn't a legal identifier character (a char you can use in a package name), you get that warning.</p>\n\n<p>If you want to use a filename, use a string instead:</p>\n\n<pre><code>require 'file.pl';\n</code></pre>\n\n<p>Then, in the call to <code>Test::MockModule</code>, it's expecting the name of a package that you defined in <em>file.pl</em> rather than the file name.</p>\n\n<p>I don't know what you are doing, but when I want to replace a subroutine definition, I just override it. This is the core of the idea and there are ways to do it temporarily. The code behind the interfaces such as <code>Test::MockModule</code> and <code>Hook::LexWrap</code> aren't that complicated:</p>\n\n<pre><code>BEGIN {\n    require 'file.pl';\n\n    package Some::Package;\n    no warnings 'redefine';\n    *get_name = sub { ... }\n    }\n</code></pre>\n\n<p>The glob (<code>*get_name</code>) is a bit tricky, but just about everything else already shows up in your example. I show some of these tricks in <a href=\"https://www.effectiveperlprogramming.com\" rel=\"nofollow noreferrer\">Effective Perl Programming</a>. For my work, reducing the module dependency list (especially in tests) is often worth the advanced trick.</p>\n"}], "owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 58085076, "answer_count": 1, "score": 2, "last_activity_date": 1569345359, "creation_date": 1569342654, "last_edit_date": 1569344851, "question_id": 58084633, "link": "https://stackoverflow.com/questions/58084633/how-to-mock-a-func-inside-thefile-pl-instead-of-a-module", "title": "how to mock a func inside thefile.pl instead of a module", "body": "<p>In a scenario that it is nice to not to change the code, but adding tests</p>\n\n<p>the code to be tested <code>thefile.pl</code></p>\n\n<pre><code>get_name{\n    return 'sth';\n}\n</code></pre>\n\n<p>test <code>test_thefile.t</code></p>\n\n<pre><code>use Test::More;\nuse Test::MockModule;\nrequire thefile.pl\nmy $module = Test::MockModule-&gt;new('thefile.pl')\n$module-&gt;mock(get_name =&gt; sub { return 'othername' });\nmy $name = get_name();\nok($name eq 'othername');\n</code></pre>\n\n<p>I got </p>\n\n<pre><code>Invalid package name thefile.pl\n</code></pre>\n"}, {"tags": ["perl", "freebsd"], "answers": [{"tags": [], "owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "is_accepted": false, "score": 2, "last_activity_date": 1569337291, "creation_date": 1569337291, "answer_id": 58083202, "question_id": 58082633, "link": "https://stackoverflow.com/questions/58082633/error-installing-lang-perl5-30-on-freebsd-12-0/58083202#58083202", "title": "error installing lang/perl5.30 on FreeBSD 12.0", "body": "<p>Well I don't know how FreeBSD handles patching the source code its compiling, but perl-5.30.0 needs the following patch applied to build properly on systems which use perl's malloc() library:\n<a href=\"https://perl5.git.perl.org/perl.git/blobdiff/cc16d262eb72677cdda2aa9395e943818b85ba38..9629b6dc1d6296e0d3a6a5dbfd0f672b4b2021ca:/malloc.c\" rel=\"nofollow noreferrer\">v5.31.0-13-g9629b6dc1d</a></p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 12113753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72aeef49523b98b74bb583d0f6d9043d?s=128&d=identicon&r=PG&f=1", "display_name": "Grigory", "link": "https://stackoverflow.com/users/12113753/grigory"}, "edited": false, "score": 0, "creation_date": 1581440936, "post_id": 60096698, "comment_id": 106431277, "body": "disabling MALLOC support is not an option."}], "tags": [], "owner": {"reputation": 11, "user_id": 6635861, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UWGWK.jpg?s=128&g=1", "display_name": "BH1WPO", "link": "https://stackoverflow.com/users/6635861/bh1wpo"}, "is_accepted": false, "score": 1, "last_activity_date": 1580997633, "creation_date": 1580997633, "answer_id": 60096698, "question_id": 58082633, "link": "https://stackoverflow.com/questions/58082633/error-installing-lang-perl5-30-on-freebsd-12-0/60096698#60096698", "title": "error installing lang/perl5.30 on FreeBSD 12.0", "body": "<p>1.go to /usr/ports/lang/per5.30</p>\n\n<p>2.run \"make config\" and deselect PERL_MALLOC option</p>\n\n<p>3.now retry make install</p>\n"}], "owner": {"reputation": 1, "user_id": 12113753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72aeef49523b98b74bb583d0f6d9043d?s=128&d=identicon&r=PG&f=1", "display_name": "Grigory", "link": "https://stackoverflow.com/users/12113753/grigory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1580997633, "creation_date": 1569335437, "question_id": 58082633, "link": "https://stackoverflow.com/questions/58082633/error-installing-lang-perl5-30-on-freebsd-12-0", "title": "error installing lang/perl5.30 on FreeBSD 12.0", "body": "<p>Clean installation of FreeBSD 12.0 updated to last patch.\n<BR>Trying to install Perl: <code>portmaster lang/perl5.30</code>\n<BR>Error: <code>malloc.c:1242:13: error: use of undeclared identifier 'my_perl</code></p>\n\n<p>How to fix it?</p>\n"}, {"tags": ["perl", "raku", "zef"], "comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 3, "creation_date": 1569296819, "post_id": 58072622, "comment_id": 102540781, "body": "Ask niner, or report a bug at <a href=\"https://github.com/niner/Inline-Perl5/issues\" rel=\"nofollow noreferrer\">github.com/niner/Inline-Perl5/issues</a> &#173;\u2014 it&#39;s unlikely that we can help, especially without the actual test output."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 12110334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9326f1667788f69dff1687b057c3f160?s=128&d=identicon&r=PG&f=1", "display_name": "keegjk1", "link": "https://stackoverflow.com/users/12110334/keegjk1"}, "edited": false, "score": 0, "creation_date": 1569798811, "post_id": 58117090, "comment_id": 102702060, "body": "Thanks timotimo. I will hold off using --force-test for a little while in the hope that someone can identify the underlying issue, but at least you have reduced my concerns about forcing the matter. If worst comes to worst and forcing the matter causes a problem, I could always reinstall perp6 from scratch..."}], "tags": [], "owner": {"reputation": 4159, "user_id": 804005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03be16b1311b73194e81ab62c3c8c241?s=128&d=identicon&r=PG", "display_name": "timotimo", "link": "https://stackoverflow.com/users/804005/timotimo"}, "is_accepted": false, "score": 4, "last_activity_date": 1569501809, "creation_date": 1569501809, "answer_id": 58117090, "question_id": 58072622, "link": "https://stackoverflow.com/questions/58072622/zef-verbose-install-inlineperl5-install-fails-i-get-t-p5-object-destr/58117090#58117090", "title": "&#39;zef --verbose install Inline::Perl5&#39; , install fails. I get &#39; t/p5_object_destructor.t (Wstat: 512 Tests: 20 Failed: 2)&#39;", "body": "<p>The test in question relies on the destruction of objects by the GC to happen at the expected time. Unfortunately, forcing the GC to destroy something when you want it to isn't simple. It's possible that some small change, like a side-effect from an optimization, causes the exact behavior of the GC to change and the test to no longer succeed.</p>\n\n<p>It's probably fine to <code>--force-test</code> in this case.</p>\n"}], "owner": {"reputation": 41, "user_id": 12110334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9326f1667788f69dff1687b057c3f160?s=128&d=identicon&r=PG&f=1", "display_name": "keegjk1", "link": "https://stackoverflow.com/users/12110334/keegjk1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1575803868, "creation_date": 1569295183, "last_edit_date": 1575803868, "question_id": 58072622, "link": "https://stackoverflow.com/questions/58072622/zef-verbose-install-inlineperl5-install-fails-i-get-t-p5-object-destr", "title": "&#39;zef --verbose install Inline::Perl5&#39; , install fails. I get &#39; t/p5_object_destructor.t (Wstat: 512 Tests: 20 Failed: 2)&#39;", "body": "<p>Using Linux Mint 19.1(Ubuntu based distro).\nAll other <code>Inline::Perl5</code> tests pass but install fails because <code>t/p5_object_destructor.t</code> fails.\nzef install works on another module so problem is specific to this module test.\nThis is a new Perl6 installation, only the successful test module added as I  tried to scope  the problem.\nI am reluctant to use 'force-test to override failure' without some advice.</p>\n"}, {"tags": ["bash", "perl", "ini"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569300560, "post_id": 58070666, "comment_id": 102541583, "body": "The <code>displayName = </code> is at multiple places (section) -- should it become &#39;john` everywhere?"}, {"owner": {"reputation": 443, "user_id": 270958, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ERBYI.jpg?s=128&g=1", "display_name": "madsonic", "link": "https://stackoverflow.com/users/270958/madsonic"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569304197, "post_id": 58070666, "comment_id": 102542642, "body": "well that was one of the difficulties i faced, only change the displayName where the preceeding userName = john."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569304346, "post_id": 58070666, "comment_id": 102542702, "body": "Hang on -- so you mean only change it where it&#39;s <code>12345</code>, in <code>sectionB</code>? Only in those sections where the username is what is given at the beginning, in this case <code>john</code>?  (And is there only one such section?)"}, {"owner": {"reputation": 443, "user_id": 270958, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ERBYI.jpg?s=128&g=1", "display_name": "madsonic", "link": "https://stackoverflow.com/users/270958/madsonic"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569304714, "post_id": 58070666, "comment_id": 102542844, "body": "Yes, in that case i only want to change sectionB. There might be multiple sections containing same the user name, which sould be changed as well. (sorry, forgot to mention that in my question)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569307216, "post_id": 58070666, "comment_id": 102543866, "body": "Ah. Updated to that (what I had originally changed every instance)"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569308001, "post_id": 58070960, "comment_id": 102544195, "body": "But the name is not <code>john</code>, that&#39;s just an example here -- the actual name is given on the <code>; user = </code> line in the beginning."}], "tags": [], "owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "is_accepted": false, "score": 2, "last_activity_date": 1569278120, "creation_date": 1569278120, "answer_id": 58070960, "question_id": 58070666, "link": "https://stackoverflow.com/questions/58070666/search-and-replace-items-within-an-ini-file-using-python2-7-perl-sed-within-a/58070960#58070960", "title": "Search and replace items within an ini file, using python2.7, perl, sed within a bash one-liner", "body": "<p>Something similar to this should do the trick:</p>\n\n<pre><code>$ perl -i.bak -pe'$user = $1 if /user = (.*)/; s/(displayName = ).*/${1}newid/ if $user eq \"john\"' foo.ini\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569307971, "post_id": 58071173, "comment_id": 102544180, "body": "But the name is not <code>john</code>, that&#39;s just an example here -- the actual name is given on the <code>; user = </code> line in the beginning."}, {"owner": {"reputation": 9698, "user_id": 111036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4d7fd4b3ed484fc72aa50e4abf323393?s=128&d=identicon&r=PG", "display_name": "mivk", "link": "https://stackoverflow.com/users/111036/mivk"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569314715, "post_id": 58071173, "comment_id": 102547359, "body": "@ikegami: Thank you! Yes, of course 07 is not &gt; 0400, and this worked accidentally because there is no \\x07 character in the file. Corrected it."}], "tags": [], "owner": {"reputation": 9698, "user_id": 111036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4d7fd4b3ed484fc72aa50e4abf323393?s=128&d=identicon&r=PG", "display_name": "mivk", "link": "https://stackoverflow.com/users/111036/mivk"}, "is_accepted": false, "score": 3, "last_activity_date": 1569321111, "last_edit_date": 1569321111, "creation_date": 1569280060, "answer_id": 58071173, "question_id": 58070666, "link": "https://stackoverflow.com/questions/58070666/search-and-replace-items-within-an-ini-file-using-python2-7-perl-sed-within-a/58071173#58071173", "title": "Search and replace items within an ini file, using python2.7, perl, sed within a bash one-liner", "body": "<p>This seems to do what you are after:</p>\n\n<pre><code>perl -0777 -ne '@sections = split /^\\[/m; foreach (@sections) { if (/^\\s*user\\s*=\\s*john\\s*$/m) {s/^(\\s*displayName\\s*=).*/$1 is now Greta/mi} } print join(\"[\", @sections); ' /tmp/inifile\n</code></pre>\n\n<p>Or in a more readable version:</p>\n\n<pre><code>perl -0777 -ne '                                    # -0777 makes it slurp the whole file\n  @sections = split /^\\[/m;                       # split on \"[\" if it's at the start of a line\n  foreach (@sections) {\n    if ( /^\\s*user\\s*=\\s*john\\s*$/m ) {              # if the section contains user=john\n      s/^(\\s*displayName\\s*=).*/$1 call me Greta/mi;  # give him a new displayname\n    }\n  }\n  print join(\"[\", @sections);     # print all, adding back the \"[\" we removed for split.\n' /tmp/inifile \n</code></pre>\n\n<p>The output:</p>\n\n<blockquote>\n<pre><code>; last modified 1 April 2001 by John Doe\n; Syntax:\n; user = john\n; displayName = 12345\n\n[sectionA]\nuser=notChange\ndisplayName=noChange\n[sectionB]\nuser = john\ndisplayName = call me Greta\n</code></pre>\n</blockquote>\n\n<p>Or to do it on files \"in-place\", with almost the same line:</p>\n\n<pre><code>perl -0777 -i.bak -pe '@sections = split /^\\[/m; foreach (@sections) { if (/^\\s*user\\s*=\\s*john\\s*$/m) {s/^(\\s*displayName\\s*=).*/$1 call me Greta/mi} } $_=join(\"[\", @sections); ' /tmp/inifile \n</code></pre>\n\n<p>Which gives:</p>\n\n<pre><code>diff /tmp/inifile /tmp/inifile.bak \n</code></pre>\n\n<blockquote>\n<pre><code>11c11\n&lt; displayName = call me Greta\n---\n&gt; displayName = 12345\n</code></pre>\n</blockquote>\n\n<p>And to specify the user and display name on the command-line instead of having them hard-coded, add them before the file name and add a <code>BEGIN</code> block:</p>\n\n<pre><code>perl -0777 -ne 'BEGIN{$u=shift; $n=shift}\n  @sections = split /^\\[/m; foreach (@sections) { if (/^\\s*user\\s*=\\s*$u\\s*$/m) {s/^(\\s*displayName\\s*=).*/$1 $n/mi} } print join(\"[\", @sections); '\n  \"john\" \"My name is Bond...\" /tmp/inifile\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9698, "user_id": 111036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4d7fd4b3ed484fc72aa50e4abf323393?s=128&d=identicon&r=PG", "display_name": "mivk", "link": "https://stackoverflow.com/users/111036/mivk"}, "edited": false, "score": 0, "creation_date": 1569314364, "post_id": 58072050, "comment_id": 102547192, "body": "Very nice. But this assumes that the user line in a section is always before the displayName line. Ini files usually have no specific order in the sections. Maybe something to check before doing it on a huge or on many file."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 9698, "user_id": 111036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4d7fd4b3ed484fc72aa50e4abf323393?s=128&d=identicon&r=PG", "display_name": "mivk", "link": "https://stackoverflow.com/users/111036/mivk"}, "edited": false, "score": 0, "creation_date": 1569314985, "post_id": 58072050, "comment_id": 102547518, "body": "@mivk Hah!  A good point, thank you. A quiet little assumption that was, added it to the list.  I do go with &quot;<i>file exactly as shown</i>&quot; as there were too many unspecified parts. Will relax (fix) that when I get to it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 9698, "user_id": 111036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4d7fd4b3ed484fc72aa50e4abf323393?s=128&d=identicon&r=PG", "display_name": "mivk", "link": "https://stackoverflow.com/users/111036/mivk"}, "edited": false, "score": 0, "creation_date": 1569348626, "post_id": 58072050, "comment_id": 102565736, "body": "@mivk Fixed.  Added a version which doesn&#39;t care for order"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1569818981, "last_edit_date": 1569818981, "creation_date": 1569289907, "answer_id": 58072050, "question_id": 58070666, "link": "https://stackoverflow.com/questions/58070666/search-and-replace-items-within-an-ini-file-using-python2-7-perl-sed-within-a/58072050#58072050", "title": "Search and replace items within an ini file, using python2.7, perl, sed within a bash one-liner", "body": "<p><strong>Note</strong> &nbsp; See end for a version which does not rely on order of lines within <code>[section]</code></p>\n\n<hr>\n\n<p>For input file <em>exactly</em> as shown </p>\n\n<pre><code>perl -pE'\n    /;\\s*user\\s*=\\s*(.*)/ and $user = $1; \n    ($u) = /^user\\s*=\\s*(.*)/;\n    s/^\\s*displayName\\s*=\\s*\\K.*/$user/ if $f; \n    $f = $u eq $user\n' file\n</code></pre>\n\n<p>Shown over multiple lines for readability, explanation line by line:</p>\n\n<ol>\n<li><p>Capture the user name to be used for the file. Comes in the beginning on lines with <code>;</code></p></li>\n<li><p>Capture the username in a section (<code>user</code> starts the line), or <code>$u</code> stays <code>undef</code></p></li>\n<li><p>Change the value for <code>displayName</code> --- if the flag <code>$f</code> is set (on the previous line)</p></li>\n<li><p>Set that <code>$f</code> flag to the result of comparison: true (1) if <code>$u</code> (is set and) matches <code>$user</code> </p></li>\n</ol>\n\n<p>The program works through the lines of a file as follows: </p>\n\n<ul>\n<li><p>on <code>;</code> line the <code>$user</code> is set while on other lines regex doesn't match and nothing happens</p></li>\n<li><p>on lines starting with <code>user</code> (in sections) that section's user name is set (<code>$u</code>), on other lines <code>$u</code> becomes <code>undef</code></p></li>\n<li><p>the <code>displayName</code> change happens if <code>$f</code> is true, and this was set on the previous line if <code>$u</code> was set and was indeed equal to the <code>$user</code> -- otherwise it's false. </p></li>\n<li><p>so <code>displayName</code> changes on a line following the <code>user =</code> line, and if on that (previous) line the user <code>$u</code> was equal to the one found in the beginning (<code>$user</code>).</p></li>\n</ul>\n\n<p>This freely uses variables which are often <code>undef</code> and would trigger numerous warnings with <code>-w</code>; contrary to my practice I drop it here, for simplicity (instead of testing with <code>define</code>).</p>\n\n<p>The code assumes that </p>\n\n<ul>\n<li><p>user name definition comes before its use on a line starting with <code>;</code> (at the beginning)</p></li>\n<li><p>in a section the <code>user =</code> line comes before the <code>displayName =</code> line --- but see below</p></li>\n<li><p>the <code>displayName</code> lines that come later start with the phrase, with nothing before it</p></li>\n<li><p>the <code>user =</code> lines in sections start with <code>user</code></p></li>\n<li><p>change <code>displayName =</code> only in the section with the username captured at the beginning</p></li>\n</ul>\n\n<p>To overwrite the input file (change it <em>in-place</em>) add <code>-i</code> option, or <code>-i.bak</code> to keep a backup. To create a new file with changes redirect output, <code>perl -wpe'...' file &gt; new_file</code> </p>\n\n<hr>\n\n<p>One necessary and possibly prohibitive assumption above is that the line <code>user =</code> comes before the line <code>displayName =</code>, what is in general not a rule in an <code>ini</code> file.</p>\n\n<p>In order to relax that we need to <em>first collect lines</em> for <code>user</code> and <code>displayName</code> for each section, and once both are on hand work it out and only then write them out</p>\n\n<pre><code>perl nE'\n    /;\\s*user\\s*=\\s*(.*)/ and $user = $1; \n    if ( 2 == ( @k = keys %sec ) ) { \n        say \"$_ = \", ( $sec{user} eq $user ? $user : $sec{$_} ) for @k;\n        %sec = () \n    } else { \n        /^(user|displayName)\\s*=\\s*(.*)/ and $sec{$1} = $2\n    }\n    print $_ unless /^(user|displayName)/;\n    END { \n        say \"$_ = \", ( $sec{user} eq $user ? $user : $sec{$_} ) for keys %sec\n    }\n' file\n</code></pre>\n\n<p>(Making this nicer, in particular getting rid of that code-repeating END block, is left as an exercise)</p>\n\n<p>If this code needs to live inside a bash script and no extra files can be had on disk, then so be it; but otherwise please write it as a nice script.</p>\n"}], "owner": {"reputation": 443, "user_id": 270958, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ERBYI.jpg?s=128&g=1", "display_name": "madsonic", "link": "https://stackoverflow.com/users/270958/madsonic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 58072050, "answer_count": 3, "score": 1, "last_activity_date": 1569818981, "creation_date": 1569275742, "last_edit_date": 1569304526, "question_id": 58070666, "link": "https://stackoverflow.com/questions/58070666/search-and-replace-items-within-an-ini-file-using-python2-7-perl-sed-within-a", "title": "Search and replace items within an ini file, using python2.7, perl, sed within a bash one-liner", "body": "<p>Today i stumbled upon a little problem i could not solve (easily). Basicly i want to update an item within a ini file, with simple pre installed tools only (bash, sed, perl or python). Sadly installing tools from the internet is not an option. </p>\n\n<p>But i could not figure out a solution by myself. I have tried perl search and replace, sed and python but nothing leads to a nice bash one-liner i was looking for. Known information is only the user (e.g john) and i want to change the displayName of John (only) leaving everything else as it was. I think a perl call could do the trick, but i was not able to figure it out. Anyway, how would you approach the development of such a perl statement? </p>\n\n<pre><code>; last modified 1 April 2001 by John Doe\n; Syntax:\n; user = john\n; displayName = 12345\n\n[sectionA]\nuser=notChange\ndisplayName=noChange\n[sectionB]\nuser = john\ndisplayName = 12345\n.....\n\n</code></pre>\n\n<p>I would like to parse the file for \"john\" and then replace whatever is written behind \"displayName=\"</p>\n\n<p>Thank you guys for all the great answers! I tested them all and all seem to work as expected, and provide hints for me to learn so one time i can solve such a task by myself :) ! Thank you for your time and effort!! </p>\n"}, {"tags": ["file", "perl", "grep"], "comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1569277765, "post_id": 58070654, "comment_id": 102537337, "body": "Please add sample input (no descriptions, no images, no links) and your desired output for that sample input to your question (no comment)."}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "reply_to_user": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1569286972, "post_id": 58070654, "comment_id": 102539134, "body": "@Cyrus, added. Please check."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1569390232, "last_edit_date": 1569390232, "creation_date": 1569294126, "answer_id": 58072515, "question_id": 58070654, "link": "https://stackoverflow.com/questions/58070654/parsing-aide-file-to-count-lines-between-patterns/58072515#58072515", "title": "Parsing AIDE file to count lines between patterns", "body": "<p>One way to do this is indeed by keeping the state, what you are attempting.</p>\n\n<p>A nice tool for that is the <a href=\"https://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\">range operator</a></p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $file = shift or die \"Usage: $0 file\\n\";\n\nmy $beg = qr/Added|Changed|Deleted/; \nmy $end = qr/Detail/;\n\nmy $cnt;\n\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nwhile (&lt;$fh&gt;) { \n    if (/$beg/ .. /$end/) { \n        ++$cnt unless /$end|$beg/;\n    }\n}\n\nsay $cnt;\n</code></pre>\n\n<p>This prints <code>6</code> for the supplied input file.  (Checked by also saving lines on an array and inspecting.) </p>\n\n<p>Comments on posted code</p>\n\n<ul>\n<li><p>The <code>grep</code> is a filter, and this isn't a good use for it</p></li>\n<li><p>The <code>-w</code> had been superseded by <code>use warnings;</code> in ... year 2000? Kinda 20 years ago. Don't mean to mock, just please update</p></li>\n<li><p>Use lexical filehandles (<code>open my $fh ...</code>), not globs (<code>INFILE</code>). Much better that way</p></li>\n<li><p>I'd say that <code>$matched == 1;</code> is a typo and that it should be <code>=</code> (not <code>==</code>)</p></li>\n<li><p>No need for <code>$_ =~ //</code>, as regex's match operator (as well as the  substitution operator) by default uses <code>$_</code>. While reliance on defaults like <code>$_</code> can be debated, in this case omitting it clearly improves readability, and this is almost always the case with regex</p></li>\n</ul>\n"}], "owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 58072515, "answer_count": 1, "score": 1, "last_activity_date": 1569390232, "creation_date": 1569275648, "last_edit_date": 1569350036, "question_id": 58070654, "link": "https://stackoverflow.com/questions/58070654/parsing-aide-file-to-count-lines-between-patterns", "title": "Parsing AIDE file to count lines between patterns", "body": "<p>ALL,</p>\n\n<p>Perl has a very powerful feature called <code>grep{} @some_var</code>.</p>\n\n<p>What I'm trying to do is to modify a script to use grep to parse the AIDE log file and count the number of changed lines.</p>\n\n<p>However for some reason the count is 0.</p>\n\n<p>Could someone please help? Its been a while since I used Perl in production...</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nmy @lines;\nopen( INFILE, \"aide.log\" ) || die \"Cannot open input file for processing\";\npush( @lines, $_ ) while &lt;INFILE&gt;;\nclose INFILE;\nmy $matched;\nmy $count = grep { $matched == 1; $matched = 1 if $_ =~ /[-A-Za-z0-9]*(Added|Changed|Removed)/; $matched = 0 if $_ =~ /[-A-Za-z0-9]*Detail/ } @lines;\nprint \"Number of changed files is \", $count, \"!\\n\";\n</code></pre>\n\n<p>All I need is to count the number of lines between</p>\n\n<pre><code>XXX Added\nXXX Changed\nXXX Deleted\n</code></pre>\n\n<p>and </p>\n\n<pre><code>XXX Detail\n</code></pre>\n\n<p>The count shoudn't include those lines.</p>\n\n<p>where <code>XXX</code> is just some arbitrary text.</p>\n\n<p>TIA!</p>\n\n<p>[EDIT]</p>\n\n<p>aide.log</p>\n\n<pre><code>AIDE version xxx\nExecuted on 23 September 2019 05:15:00\n\n2019-09-23T05:15:00+00 localhost Added files\n2019-09-23T05:15:00+00 localhost /tmp/testfile\n2019-09-23T05:15:00+00 localhost /scripts/aide-parser.pl\n2019-09-23T05:15:00+00 localhost Changed files\n2019-09-23T05:15:00+00 localhost /var/log/syslog\n2019-09-23T05:15:00+00 localhost Deleted files\n2019-09-23T05:15:00+00 localhost /scripts/aide-parser.pl.old\n2019-09-23T05:15:00+00 localhost /etc/aide.conf.old\n2019-09-23T05:15:00+00 localhost /etc/iptables.conf.old\n2019-09-23T05:15:00+00 localhost Details of changes\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>Number of changed files is 6\n</code></pre>\n\n<p>Only lines with the file name should be counted</p>\n\n<p>[/EDIT]</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1569271552, "post_id": 58069662, "comment_id": 102535610, "body": "Try replace <code>for</code> with <code>while</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569271681, "post_id": 58069662, "comment_id": 102535659, "body": "&quot;<i>field content is repeated in a subsequent field tagged from the set</i>&quot; -- repeated anywhere further in selected tags, not necessarily in the very next one?"}, {"owner": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569272508, "post_id": 58069662, "comment_id": 102535976, "body": "@zdim yes I&#39;m interested in any repeats, so long as it is in a field tagged by one of the tags in the set."}, {"owner": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569272622, "post_id": 58069662, "comment_id": 102536020, "body": "@H&#229;konH&#230;gland, This gives me what I expected (Question 1), although I don&#39;t understand why the two constructs are different."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569272757, "post_id": 58069662, "comment_id": 102536062, "body": "I guess they are different because <code>for</code> evaluates the regex operator in list context and <code>while</code> evaluates it in scalar context"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1569273275, "last_edit_date": 1569273275, "creation_date": 1569272398, "answer_id": 58070143, "question_id": 58069662, "link": "https://stackoverflow.com/questions/58069662/finding-repeating-tagged-substrings/58070143#58070143", "title": "Finding repeating tagged substrings", "body": "<p>Using a global match in a <code>for</code> loop will return all matches at once (and then iterates over the matches), hence the match variables will be set to the last successful match (before starting the iteration), whereas using the global regexp match in a while condition evaluates it in scalar context such that the match variables will be correct for each iteration.</p>\n\n<p>You can get all three matches by resetting <code>pos $line</code> for each iteration. E.g. using the following approach:</p>\n\n<pre><code>while ($line =~ m/\n      $tagmrkr$searchtags\\ ([^\\,]*,)\n      .*?\n      $tagmrkr$searchtags\\ \\1\n   /gx) {\n    pos $line = $-[0] + 1;\n    print qq/First field contents:$1\\n/;\n    print qq/Entire match:$&amp;\\n/;\n    print qq/\\n/;\n}\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>The line:%a astuff,%b bstuff,%t this,%u that,%v this,%t that,%x the other,%xx only once,%q the other,%z the other,%c cstuff\n\nFirst field contents:this,\nEntire match:%t this,%u that,%v this,\n\nFirst field contents:that,\nEntire match:%u that,%v this,%t that,\n\nFirst field contents:the other,\nEntire match:%x the other,%xx only once,%q the other,%z the other,\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "edited": false, "score": 0, "creation_date": 1569280814, "post_id": 58070149, "comment_id": 102538020, "body": "The first matched field should include the terminating comma to avoid matching an unterminated  longer second match. I.e., q(%x the other,%xx only once,%q the other,%z the others,%y the other,%c cstuff) &#39;%x the other,&#39; should not match the &#39;%z the others,&#39; It should keep looking until it finds &#39;%y the other,&#39;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "edited": false, "score": 1, "creation_date": 1569288704, "post_id": 58070149, "comment_id": 102539408, "body": "@Wes Alright, I left it out so to not be in a capture since it merely separates records. But that of course isn&#39;t some important criterion. Now the prints have a trailing comma, please review"}, {"owner": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "edited": false, "score": 0, "creation_date": 1569293820, "post_id": 58070149, "comment_id": 102540270, "body": "upon reflection, it&#39;s good to have the first comma  out of the capture, and also out of the look-ahead. the second comma has to be included in the look ahead to avoid matching a super-string.  <code>while ($s =~ &#47; $m$t \\s ([^,]+) , (?=(.*?$m$t\\s\\g{1}) , ) &#47;gx) {</code> also I would use a semicolon in the say statement to <code>say &quot;capture: $1; wh...</code> to make it clear that the comma isn&#39;t in the capture."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "edited": false, "score": 0, "creation_date": 1569295431, "post_id": 58070149, "comment_id": 102540528, "body": "@Wes OK, so I rolled it back. Before we update the printout format (good call), let&#39;s discuss these commas.  Why do you want the trailing comma included? (Is there a deeper reason related to the use of this?)  For one thing, the last field has no trailing comma; so whichever way one includes it in the pattern it has to be optional, too (otherwise the last field would never be matched!).  Doable, but then the output will differ for a case which happens to catch that last field.  Let me know what you think"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "edited": false, "score": 0, "creation_date": 1569309742, "post_id": 58070149, "comment_id": 102544993, "body": "@Wes I adjusted the print format, so that it&#39;s unambiguous. Let me know what you think of commas, and I&#39;ll think more."}, {"owner": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "edited": false, "score": 0, "creation_date": 1569309807, "post_id": 58070149, "comment_id": 102545025, "body": "I don&#39;t really want to capture the field terminator. I do need it to compare the two fields. If the second field has extra trailing characters it will trigger a false positive match if the terminators are not included. ... BTW the actual script uses &#39;\\&#39; instead of &#39;%&#39; for the tag marker and &#39;#&#39; instead of &#39;,&#39; for the field terminator. The # is a replacement for &lt;EOL&gt;. In the original file, the fields are one per line. See <a href=\"https://github.com/WesPeacock/DaasanachScripts/blob/master/MakeCompForm.pl\" rel=\"nofollow noreferrer\">github.com/WesPeacock/DaasanachScripts/blob/master/&hellip;</a> and the sample.sfm file at the same site"}, {"owner": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "edited": false, "score": 0, "creation_date": 1569309919, "post_id": 58070149, "comment_id": 102545077, "body": "Add a comma to the end of the second field and it&#39;ll be good."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "edited": false, "score": 0, "creation_date": 1569310383, "post_id": 58070149, "comment_id": 102545296, "body": "@Wes Alright, I added the comma, which must be optional. (Remove the <code>%c...</code> so that the string ends with <code>%z the other</code> and then the last match won&#39;t work unless there&#39;s that <code>?</code>.)  I still don&#39;t understand why that comma is needed but you know the problem :).  I&#39;ll go sleep on it now"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1602551980, "last_edit_date": 1602551980, "creation_date": 1569272413, "answer_id": 58070149, "question_id": 58069662, "link": "https://stackoverflow.com/questions/58069662/finding-repeating-tagged-substrings/58070149#58070149", "title": "Finding repeating tagged substrings", "body": "<p>One way to provide for overlaps is to <em>assert</em> the presence of the rest of the phrase, using <a href=\"https://perldoc.perl.org/perlretut#Looking-ahead-and-looking-behind\" rel=\"nofollow noreferrer\">lookahead</a>. Then that part is not consumed and the engine continues from before it and so it can match it again</p>\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $s = q(%a astuff,%b bstuff,%t this,%u that,%v this,%t that,)\n      . q(%x the other,%xx only once,%q the other,%z the other,%c cstuff); \n\nmy $m = qr/%/;\nmy $t = qr/(?:t|u|v|w|x|xx|y|z)/; \n\nwhile ($s =~ / $m$t \\s ([^,]+) , (?=(.*?$m$t\\s\\g{1},?)) /gx) { \n    say &quot;capture: $1&quot;;\n    say &quot;  whole: $1,$2&quot;;\n}\n</code></pre>\n<p>For a more detailed explanation of how the lookahead helps in catching overlapping patterns see <a href=\"https://stackoverflow.com/a/54141728/4653379\">this post</a></p>\n<p>Prints</p>\n<pre>\ncapture: this\n  whole: this,%u that,%v this,\ncapture: that\n  whole: that,%v this,%t that,\ncapture: the other\n  whole: the other,%xx only once,%q the other,%z the other,\n</pre>\n"}], "owner": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 58070149, "answer_count": 2, "score": 3, "last_activity_date": 1602551980, "creation_date": 1569269960, "last_edit_date": 1569294667, "question_id": 58069662, "link": "https://stackoverflow.com/questions/58069662/finding-repeating-tagged-substrings", "title": "Finding repeating tagged substrings", "body": "<p>I have a file where the lines are made up of fields that are:</p>\n\n<ul>\n<li>Delimited by alphanumeric tags that start with a special character ('%' in my example below)</li>\n<li>The tag text is terminated with a space</li>\n<li>The content of the field is terminated by ','</li>\n<li>The field content will never contain <strong>%</strong> or <strong>,</strong></li>\n</ul>\n\n<p>An example line:</p>\n\n<blockquote>\n  <p>%a astuff,%b bstuff,%t this,%u that,%v this,%t that,%x the other,%xx only once,%q the other,%z the other,%c cstuff</p>\n</blockquote>\n\n<p>Sets of tags are significant for searching -- This is the tag set for my example:</p>\n\n<blockquote>\n  <p>%t, %u, %v, %w, %x, %xx, %y, %z</p>\n</blockquote>\n\n<p>I want to find the content of fields where the tag is in the set and the field content is repeated in a subsequent field tagged from the set. Here is the code of my unsuccessful attempt:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $tagmrkr='%';\nmy $line='%a astuff,%b bstuff,%t this,%u that,%v this,%t that,%x the other,%xx only once,%q the other,%z the other,%c cstuff';\n\nmy $searchtags = qr/t|u|v|w|x|xx|y|z/; # excludes q\n\nprint qq/The line:$line\\n\\n/;\nfor ($line =~ m/\n    $tagmrkr$searchtags\\ ([^\\,]*,)\n    .*?\n    $tagmrkr$searchtags\\ \\1\n    /gx) {\n        print qq/First field contents:$1\\n/;\n        print qq/Entire match:$&amp;\\n/;\n        print qq/\\n/;\n        }\n</code></pre>\n\n<p>I was expecting:</p>\n\n<pre><code>The line:%a astuff,%b bstuff,%t this,%u that,%v this,%t that,%x the other,%xx only once,%q the other,%z the other,%c cstuff\n\nFirst field contents:this,\nEntire match:%t this,%u that,%v this,\n\nFirst field contents:the other,\nEntire match:%x the other,%xx only once,%q the other,%z the other,\n</code></pre>\n\n<p>I got:</p>\n\n<pre><code>The line:%a astuff,%b bstuff,%t this,%u that,%v this,%t that,%x the other,%xx only once,%q the other,%z the other,%c cstuff\n\nFirst field contents:the other,\nEntire match:%x the other,%xx only once,%q the other,%z the other,\n\nFirst field contents:the other,\nEntire match:%x the other,%xx only once,%q the other,%z the other,\n</code></pre>\n\n<p>Question 1:<br>\nWhy is the <code>$1</code> and <code>$&amp;</code> for first match being replaced by the values from the second match?</p>\n\n<p>Question 2: -- What should I change to get what I <em>want</em> (below) not what I expect?</p>\n\n<p>What I want is to be able to re-pivot the match so that it also finds the repeated field in spite of overlaps -- where the first field of the second match occurs before the second field of the first match. Actually, for my immediate purposes, all I need is the duplicated field content.</p>\n\n<p>I.e., I want 3 matches from the example:</p>\n\n<pre><code>The line:%a astuff,%b bstuff,%t this,%u that,%v this,%t that,%x the other,%xx only once,%q the other,%z the other,%c cstuff\n\nFirst field contents:this\nEntire match:%t this,%u that,%v this,\n\nFirst field contents:that\nEntire match:%u that,%v this,%t that,\n\nFirst field contents:the other\nEntire match:%x the other,%xx only once,%q the other,%z the other,\n</code></pre>\n"}, {"tags": ["perl", "cpan", "perlbrew", "vcf-variant-call-format"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1569268912, "post_id": 58069024, "comment_id": 102534544, "body": "According to <a href=\"https://metacpan.org/pod/VCF\" rel=\"nofollow noreferrer\">metacpan.org</a>, it is spelled with all uppercase letters: <code>VCF</code>"}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569269553, "post_id": 58069024, "comment_id": 102534833, "body": "@H&#229;konH&#230;gland thanks, I&#39;ve corrected that, but it&#39;s still not working, I&#39;ve edited the question"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569269806, "post_id": 58069024, "comment_id": 102534935, "body": "Maybe you can use <a href=\"https://github.com/vcftools/vcftools\" rel=\"nofollow noreferrer\">this</a> GitHub distribution?"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1569270388, "creation_date": 1569270388, "answer_id": 58069753, "question_id": 58069024, "link": "https://stackoverflow.com/questions/58069024/cannot-install-perl-package-vcf-via-cpan/58069753#58069753", "title": "Cannot install perl package `Vcf` via CPAN", "body": "<p>I was able to install the package from <a href=\"https://github.com/vcftools/vcftools\" rel=\"nofollow noreferrer\">GitHub</a>:</p>\n\n<pre><code>git clone git@github.com:vcftools/vcftools.git\ncd vcftools\n./autogen.sh\n./configure --prefix=/home/hakon/perlbrew/perls/perl-5.28.1\nmake\nmake install\n</code></pre>\n\n<p>Then I checked if I could run <code>vcf-validator</code>:</p>\n\n<pre><code>$ vcf-validator --help\nUsage: vcf-validator [OPTIONS] file.vcf.gz\nOptions:\n   -d, --duplicates                 Warn about duplicate positions.\n   -u, --unique-messages            Output all messages only once.\n   -h, -?, --help                   This help message.\n</code></pre>\n"}], "owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 58069753, "answer_count": 1, "score": 0, "last_activity_date": 1609647029, "creation_date": 1569267071, "last_edit_date": 1609647029, "question_id": 58069024, "link": "https://stackoverflow.com/questions/58069024/cannot-install-perl-package-vcf-via-cpan", "title": "Cannot install perl package `Vcf` via CPAN", "body": "<p>I'm attempting to install the perl package <code>VCF</code> for my perlbrew installation, which is accessed via <code>vcf-validator</code></p>\n\n<pre><code>703404669@bioitutil2:~$ vcf-validator \nCan't locate Vcf.pm in @INC (you may need to install the Vcf module) (@INC contains: /home/703404669/Scripts/vcftools-vcftools-ea875e2/src/perl /home/703404669/perl5/perlbrew/perls/perl-5.30.0/lib/site_perl/5.30.0/x86_64-linux /home/703404669/perl5/perlbrew/perls/perl-5.30.0/lib/site_perl/5.30.0 /home/703404669/perl5/perlbrew/perls/perl-5.30.0/lib/5.30.0/x86_64-linux /home/703404669/perl5/perlbrew/perls/perl-5.30.0/lib/5.30.0) at /usr/local/bin/vcf-validator line 9.\nBEGIN failed--compilation aborted at /usr/local/bin/vcf-validator line 9.\n</code></pre>\n\n<p>so I install via CPAN, <code>VCF</code> <em>not</em> <code>Vcf</code></p>\n\n<pre><code>703404669@bioitutil2:~$ cpan VCF\nLoading internal logger. Log::Log4perl recommended for better logging\nReading '/home/703404669/.cpan/Metadata'\n  Database was generated on Mon, 23 Sep 2019 11:29:03 GMT\nVCF is up to date (1.003).\n</code></pre>\n\n<p>but still cannot access the module/library:</p>\n\n<pre><code>703404669@bioitutil2:~$ vcf-validator \nCan't locate Vcf.pm in @INC (you may need to install the Vcf module) (@INC contains: /home/703404669/Scripts/vcftools-vcftools-ea875e2/src/perl /home/703404669/perl5/perlbrew/perls/perl-5.30.0/lib/site_perl/5.30.0/x86_64-linux /home/703404669/perl5/perlbrew/perls/perl-5.30.0/lib/site_perl/5.30.0 /home/703404669/perl5/perlbrew/perls/perl-5.30.0/lib/5.30.0/x86_64-linux /home/703404669/perl5/perlbrew/perls/perl-5.30.0/lib/5.30.0) at /usr/local/bin/vcf-validator line 9.\nBEGIN failed--compilation aborted at /usr/local/bin/vcf-validator line 9.\n</code></pre>\n\n<p>I've also tried this </p>\n\n<pre><code>703404669@bioitutil2:~$ /home/703404669/perl5/perlbrew/perls/perl-5.30.0/bin/perl -e'use VCF'; /home/703404669/perl5/perlbrew/perls/perl-5.30.0/bin/cpan VCF; /home/703404669/perl5/perlbrew/perls/perl-5.30.0/bin/perl -e'VCF'\nLoading internal logger. Log::Log4perl recommended for better logging\nReading '/home/703404669/.cpan/Metadata'\n  Database was generated on Mon, 23 Sep 2019 11:29:03 GMT\nVCF is up to date (1.003).\n</code></pre>\n\n<p>but am still unable to run the vcf-validator :(</p>\n"}, {"tags": ["perl", "overloading"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1569253446, "post_id": 58065366, "comment_id": 102528063, "body": "<code>FETCH</code> is a method of tied variables, which is a separate mechanism from overloaded packages."}], "answers": [{"comments": [{"owner": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 0, "creation_date": 1569254256, "post_id": 58065759, "comment_id": 102528477, "body": "hi @mob, this way of accessing the hash indeed works. However, this seems convoluted, with multiple blessings. Will there be a (relatively) huge speed penalty?  Secondly, can I &#39;catch&#39; the key that test.pl is looking for when it does $class-&gt;{answer}? The key here being &#39;answer&#39;."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 0, "creation_date": 1569255015, "post_id": 58065759, "comment_id": 102528866, "body": "To capture the key being accessed, you could make <code>$self-&gt;{fields}</code> into a tied hash (belonging to a separate class than <code>Record</code>)"}, {"owner": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 0, "creation_date": 1569255549, "post_id": 58065759, "comment_id": 102529107, "body": "Thank you. That&#39;s very helpful and I will try it out. However, as this will be used in loops, the code in <code>access_hash()</code> will be executed many times over. How bad is it, in terms of speed, to use the above code? (PS I&#39;m in Perl 5.8.8)"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 6, "last_activity_date": 1569258208, "last_edit_date": 1569258208, "creation_date": 1569252805, "answer_id": 58065759, "question_id": 58065366, "link": "https://stackoverflow.com/questions/58065366/overloading-a-perl-object-to-redirect-hash-access-to-custom-routine/58065759#58065759", "title": "overloading a Perl object to redirect hash access to custom routine", "body": "<p><code>Record</code> is a blessed hash reference, so if you overload the <code>%{}</code> operator, you will have trouble accessing the fields of the underlying hash.</p>\n\n<p>The <code>overload</code> authors thought about this, and provided the <code>overloading</code> pragma as a way to disable overloading for this and some other use cases.</p>\n\n<pre><code>use overload '%{}' =&gt; \\&amp;access_hash;\n...\nsub access_hash {\n    no overloading '%{}';\n    my ($self) = shift;\n    return $self-&gt;{fields};\n}\n</code></pre>\n\n<hr>\n\n<p>Prior to Perl 5.10, the workaround was to disable overloading by temporarily reblessing your object to something that wouldn't activate your overloaded operators.</p>\n\n<pre><code>sub access_hash {\n    my ($self) = shift;\n    my $orig_ref = ref($self);\n    bless $self, \"#$%^&amp;*()\";\n    my $fields = $self-&gt;{fields};\n    bless $self, $orig_ref;\n    return $fields;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569258276, "post_id": 58066494, "comment_id": 102530233, "body": "@zdim  Fair enough. I rephrased and corrected the error. Thank you for helping me help you help us all."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569263707, "post_id": 58066494, "comment_id": 102532372, "body": "Alright. So to help everyone help ourselves, I&#39;ll carry on: I still don&#39;t understand what you mean -- probably just me not seeing it.  They don&#39;t have <code>return $hashref</code> -- are you refering to their <code>access_hash</code> subroutine (where they return a hashref by name <code>$self</code>) ? So do you mean to say that they can just (populate the <code>$hashref</code> with data and) bless-and-return right there, without a separate subroutine (<code>new</code>) for constructing an object?"}, {"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569264304, "post_id": 58066494, "comment_id": 102532640, "body": "Somewhere in the OPs codebase a hash gets produced and returned and later used. (&quot;wrote a routine that parses a given string and returns a record&quot; / <code>$record-&gt;{data}-&gt;{field}</code>). Put the <code>bless</code> into that routine and you&#39;re golden."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569300099, "post_id": 58066494, "comment_id": 102541497, "body": "OK, I see what you mean -- to make that original package into the class (instead of passing around objects etc). While that may not solve what they&#39;re asking it may in fact simplify things overall. It&#39;d be nice to know more about their code to see whether that is possible.  (I still find it unclear in the answer on its own, but it may be just me.)"}], "tags": [], "owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "is_accepted": false, "score": 1, "last_activity_date": 1569258207, "last_edit_date": 1569258207, "creation_date": 1569255757, "answer_id": 58066494, "question_id": 58065366, "link": "https://stackoverflow.com/questions/58065366/overloading-a-perl-object-to-redirect-hash-access-to-custom-routine/58066494#58066494", "title": "overloading a Perl object to redirect hash access to custom routine", "body": "<p>You don't neccessarily need a dedicated constructor for Perl objects. You can define your <code>Record</code> class, and then simply <code>return bless $hashref, 'Record';</code> where you are now doing <code>return $hashref;</code>. All code that operates directly on the hashref will continue to work, but you will also be able to call methods on it.</p>\n"}], "owner": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1569258208, "creation_date": 1569251399, "question_id": 58065366, "link": "https://stackoverflow.com/questions/58065366/overloading-a-perl-object-to-redirect-hash-access-to-custom-routine", "title": "overloading a Perl object to redirect hash access to custom routine", "body": "<p>A while ago, I wrote a routine that parses a given string and returns a record in the form of a hash <code>(field =&gt; value, field2 =&gt; value2)</code>. Great, except requirements have changed and I now need to return more data and offer getter methods to get at this data. So, I adjusted the routine to return a <code>Record</code> object which stores this same hash in a <code>data</code> attribute.</p>\n\n<p>However, this will break legacy code that expects a hash so that it can get at the data using <code>$record-&gt;{field}</code>. With the new <code>Record</code> object, the path to this data is now <code>$record-&gt;{data}-&gt;{field}</code> or <code>$record-&gt;getByShortName('field')</code>.</p>\n\n<p>My idea was to overload the object's FETCH method and return the corresponding field. However, this does not seem to work. It looks like FETCH is never called.</p>\n\n<p>I'm looking for three pieces of advice:</p>\n\n<ol>\n<li>How can I overload my object correctly so that hash access attempts are redirected to a custom method of the object?</li>\n<li>Is this an advisable way of working or will there be a massive speed penalty?</li>\n<li>Are there better methods to keep backward compatibility in my case?</li>\n</ol>\n\n<p>Here's an MVE:</p>\n\n<p><strong>Record.pm</strong></p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>package Record;\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse overload fallback =&gt; 1, '%{}' =&gt; \\&amp;access_hash;\n\nsub new {\n    my ($class, %args) = @_;\n    my %fields = (answer =&gt;  42, question =&gt; 21);\n    $args{fields} = \\%fields;\n    return bless { %args }, $class;\n}\n\nsub access_hash {\n    my ($self) = shift;\n    return $self;  # cannot return $self-&gt;{fields} because that would recurse ad infinitum\n}\n\nsub FETCH {\n    print(Dumper(@_));  # does not return anything, is this method not being called\n}\n</code></pre>\n\n<p><strong>test.pl</strong></p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use Record;\n\nmy $inst = Record-&gt;new();\n\nprint($inst-&gt;{answer}.\"\\n\");\nprint($inst-&gt;{question}.\"\\n\");\n</code></pre>\n"}, {"tags": ["perl", "swagger", "openapi", "mojolicious"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1569257655, "post_id": 58060246, "comment_id": 102529983, "body": "Looking at the API request, I see that the substring <code>&#169;+</code> has been encoded as <code>%C2%A9%20</code> and in the DB it is <code>%C2%A9+</code>. I see two issues with this: 1) <code>+</code> should not be <code>%20</code>, but <code>%2B</code>, according to <a href=\"https://en.wikipedia.org/wiki/Percent-encoding\" rel=\"nofollow noreferrer\">this link</a>, and 2) The DB seems not to encode reserved characters, so <code>+</code> is not encoded in the DB."}], "owner": {"reputation": 472, "user_id": 2001559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L1bvT.png?s=128&g=1", "display_name": "Maverick", "link": "https://stackoverflow.com/users/2001559/maverick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 280, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1569234387, "creation_date": 1569233946, "last_edit_date": 1569234387, "question_id": 58060246, "link": "https://stackoverflow.com/questions/58060246/perl-using-mojoliciouspluginopenapi-with-encoded-urls", "title": "Perl - Using Mojolicious::Plugin::OpenAPI with encoded URL&#39;s", "body": "<p>I am in the process of creating restful APIs using the OpenAPI(swagger) v2  Specification using Mojolicious::Plugin::OpenAPI for my Mojolicious App.</p>\n\n<p>I have to create a GET endpoint where a URL will be passed as query parameter.\nThis particular URL is a random URL which may be encoded (even punnycoded).\nSometime it contains special character also (e.g <a href=\"http://example.com/4v3iI6HO/%C3%99\" rel=\"nofollow noreferrer\">http://example.com/4v3iI6HO/\u00d9</a>\u201e\u00d8\u00b9\u00d8\u00a8+-+\u00d9).</p>\n\n<p>My OpenAPI Specification json is -</p>\n\n<pre><code>{\n    \"swagger\": \"2.0\",\n    \"info\": {\n        \"version\": \"1.0\",\n        \"title\": \"MyApp API\"\n    },\n    \"schemes\": [\"https\"],\n    \"basePath\": \"/api\",\n    \"host\": \"myapp.com\",\n    \"paths\": {\n        \"/uri_lookup\": {\n            \"get\": {\n                \"x-mojo-name\": \"get_urls_details\",\n                \"x-mojo-to\": \"API::Urls#get_urls_details\",\n                \"operationId\": \"get_urls_details\",\n                \"parameters\": [\n                    {\n                        \"in\": \"query\",\n                        \"name\": \"url\",\n                        \"required\": true,\n                        \"type\": \"string\",\n                        \"description\": \"Url to search\"\n                    }\n                ],\n                \"responses\": {\n                    \"200\": {\n                        \"description\": \"Url Details\",\n                        \"schema\": {\n                            \"type\": \"object\"\n                        }\n                    },\n                    \"default\": {\n                        \"description\": \"Unexpected error\",\n                        \"schema\": {}\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>And in my Controller class I an checking the valid url, querying the DB and returning the response.</p>\n\n<pre><code>sub get_urls_details {\n    my ($self) = @_;\n\n    $self-&gt;openapi-&gt;valid_input or return;\n\n    # Checking it avalid url (starting with http/https or ftp)\n    $self-&gt;_validate_url( $self-&gt;param(\"url\") );\n\n    if ( not $self-&gt;validation-&gt;validator-&gt;has_error ) {\n        my $input = $self-&gt;validation-&gt;validator-&gt;output;\n        my $url = $input-&gt;{'url'};\n\n        # Till here everything is working fine for a normal url.\n        # But if a url contain special character,\n        # I am not able to see proper value here\n        my $uri_encoder = URI::Encode-&gt;new( { double_encode =&gt; 1, encode_reserved =&gt; 0 } );\n        $url = $uri_encoder-&gt;encode($url);\n        $self-&gt;app-&gt;log-&gt;info($url);\n        # Will be looking into DB here\n    }\n    else {\n        $self-&gt;respond_to(\n            any =&gt; {\n                status =&gt; 400,\n                json   =&gt; { message =&gt; 'Bad request. Invalid url' }\n            }\n        );\n    }\n\n}\n</code></pre>\n\n<p>I have those url's in DB in percentage encoding form (%). In the api request I will be getting the url in random encoding form(Chinese encoding, punnycoded etc). I have to encode these url to there percentage encoding and look into DB.\nI have tried to do it throgh URL::Encode but I am not gettign 100% correct percentage encoding(it all convert '+' to percentage encoding which I don't want). I am quite frusted from last couple of days with these encoded url and I am not sure how to cope with it.</p>\n\n<p>My question are -</p>\n\n<ol>\n<li><p>What is the correct way to handed these type of URl's in the backend side.\nIs the module I am using is correct ? Is there something wrong with my approach?</p></li>\n<li><p>I found 'allowReserved' parameter in open api doc (<a href=\"https://swagger.io/docs/specification/describing-parameters/\" rel=\"nofollow noreferrer\">https://swagger.io/docs/specification/describing-parameters/</a>) which I think can be used to handle such url's but when I used it my OpenAPI Specification json and updated the parameter section like-</p></li>\n</ol>\n\n<blockquote>\n<pre><code>\"parameters\": [\n                    {\n                        \"in\": \"query\",\n                        \"name\": \"url\",\n                        \"required\": true,\n                        \"type\": \"string\",\n                        \"description\": \"Url to search\",\n                        \"allowReserved\": true\n                    }\n                ],\n</code></pre>\n</blockquote>\n\n<p>I started getting errors-</p>\n\n<pre><code>Can't load application from file \"/home/Developmentmyapp\": Invalid JSON specification HASH(0x41e3fe0):\n- /paths/~1uri_lookup/get/parameters/0: /oneOf/0/oneOf/0 Properties not allowed: allowReserved, type.\n- /paths/~1uri_lookup/get/parameters/0: /oneOf/0/oneOf/1/oneOf/0 Properties not allowed: allowReserved.\n- /paths/~1uri_lookup/get/parameters/0: /oneOf/0/oneOf/1/oneOf/1 Properties not allowed: allowReserved.\n- /paths/~1uri_lookup/get/parameters/0: /oneOf/0/oneOf/1/oneOf/2 Properties not allowed: allowReserved.\n- /paths/~1uri_lookup/get/parameters/0: /oneOf/0/oneOf/1/oneOf/3 Properties not allowed: allowReserved.\n- /paths/~1uri_lookup/get/parameters/0: /oneOf/1 Properties not allowed: allowReserved, description, in, name, required, type. at /usr/local/share/perl/5.22.1/JSON/Validator.pm line 164.\n        JSON::Validator::load_and_validate_schema(JSON::Validator::OpenAPI::Mojolicious=HASH(0x3eee5b8), Mojo::Home=SCALAR(0x3e7b200), HASH(0x41ea790)) called at /usr/local/share/perl/5.22.1/JSON/Validator/OpenAPI/Mojolicious.pm line 39\n</code></pre>\n\n<p>I am not sure why this error is coming. Is this particular param is not supported in plugin ?</p>\n\n<p>Version I am using -</p>\n\n<p>Perl - 5.22</p>\n\n<p>Mojolicious-  8.24</p>\n\n<p>JSON::Validator - 3.14</p>\n\n<p>Mojolicious::Plugin::OpenAPI - 2.16</p>\n\n<p><strong>API request -</strong> <a href=\"http://localhost:3000/api/uri_lookup?url=hxxp://tets.com/xeroxep3290_all/TtQoy_B0/4v3iI6HO/%C3%99\" rel=\"nofollow noreferrer\">http://localhost:3000/api/uri_lookup?url=hxxp://tets.com/xeroxep3290_all/TtQoy_B0/4v3iI6HO/\u00d9</a>\u201e\u00d8\u00b9\u00d8\u00a8\u00d8\u00a9+\u00d8\u00a7\u00d9\u201e\u00d8\u00a7\u00d9\u2026\u00d9\u2026+-+\u00d9\u2026\u00d8\u00a7\u00d9\u0160\u00d9\u201e\u00d8\u00b2+\u00d9\u0192\u00d9\u02c6\u00d8\u00a8\u00d9\u201e\u00d8\u00a7\u00d9\u2020\u00d8\u00af.exe</p>\n\n<p><strong>Url I am getting in backend during request-</strong> hxxp://test.com/xeroxep3290_all/TtQoy_B0/4v3iI6HO/%C3%99%E2%80%9E%C3%98%C2%B9%C3%98%C2%A8%C3%98%C2%A9%20%C3%98%C2%A7%C3%99%E2%80%9E%C3%98%C2%A7%C3%99%E2%80%A6%C3%99%E2%80%A6%20-%20%C3%99%E2%80%A6%C3%98%C2%A7%C3%99%C5%A0%C3%99%E2%80%9E%C3%98%C2%B2%20%C3%99%C6%92%C3%99%CB%86%C3%98%C2%A8%C3%99%E2%80%9E%C3%98%C2%A7%C3%99%E2%80%A0%C3%98%C2%AF.exe\"</p>\n\n<p><strong>Url in DB -</strong> hxxp://test.com/xeroxep3290_all/TtQoy_B0/4v3iI6HO/%C3%99%E2%80%9E%C3%98%C2%B9%C3%98%C2%A8%C3%98%C2%A9+%C3%98%C2%A7%C3%99%E2%80%9E%C3%98%C2%A7%C3%99%E2%80%A6%C3%99%E2%80%A6+-+%C3%99%E2%80%A6%C3%98%C2%A7%C3%99%C5%A0%C3%99%E2%80%9E%C3%98%C2%B2+%C3%99%C6%92%C3%99%CB%86%C3%98%C2%A8%C3%99%E2%80%9E%C3%98%C2%A7%C3%99%E2%80%A0%C3%98%C2%AF.exe</p>\n\n<p>I am expecting the URL in back end and DB should match . Ideally I should have the same URL as in database.</p>\n"}, {"tags": ["perl", "command-line-arguments"], "comments": [{"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 1, "creation_date": 1569223228, "post_id": 58057274, "comment_id": 102512043, "body": "Which perl module for handling command line arguments do you (intend to) use?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1569223477, "post_id": 58057274, "comment_id": 102512178, "body": "I use <a href=\"https://metacpan.org/pod/Getopt::Long\" rel=\"nofollow noreferrer\">Getopt::Long</a> to parse arguments. It <a href=\"https://metacpan.org/pod/Getopt::Long#Options-with-multiple-values\" rel=\"nofollow noreferrer\">supports</a> what you want"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1569224018, "post_id": 58057274, "comment_id": 102512427, "body": "Feel free to post an answer. I&#39;m busy right now"}], "answers": [{"tags": [], "owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "is_accepted": true, "score": 6, "last_activity_date": 1569256963, "last_edit_date": 1569256963, "creation_date": 1569226921, "answer_id": 58058341, "question_id": 58057274, "link": "https://stackoverflow.com/questions/58057274/perl-commandline-arguments/58058341#58058341", "title": "Perl commandline arguments", "body": "<p>The library to use is <a href=\"https://perldoc.perl.org/Getopt/Long.html\" rel=\"nofollow noreferrer\">Getopt::Long</a></p>\n\n<p><strong>As I said I needed something like <code>--get=\"616\",\"718\"</code></strong></p>\n\n<p>So with this library you can put: <code>GetOptions('file=s' =&gt; \\$file, 'get=s' =&gt; \\@ary);</code> </p>\n\n<pre><code>'file=s' \n</code></pre>\n\n<p><strong><em>Means:</em></strong> <code>--file</code> needs a string after it.</p>\n\n<pre><code>'get=s'\n</code></pre>\n\n<p><strong><em>Means:</em></strong> The same, where now we can have multiple <code>--get value</code> on the command line and each such option adds its string to <code>@ary</code>.  Thus the option as a comma-separated list, requested in the question, is one element in the array and one way to expand this is</p>\n\n<pre><code>@ary = split(/,/, join(',', @ary));\n</code></pre>\n\n<p>as <a href=\"https://metacpan.org/pod/Getopt::Long#Options-with-multiple-values\" rel=\"nofollow noreferrer\">shown in documentation</a></p>\n\n<p>But there is also another way to give this: <code>'get=s@'</code>. What you prefer.</p>\n"}], "owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 1, "accepted_answer_id": 58058341, "answer_count": 1, "score": 1, "last_activity_date": 1569256963, "creation_date": 1569222497, "question_id": 58057274, "link": "https://stackoverflow.com/questions/58057274/perl-commandline-arguments", "title": "Perl commandline arguments", "body": "<p>I have a question about the commandline arguments in Perl. I'm not sure if someone has asked this question before because I'm not sure what to search for. </p>\n\n<p>I'm having an aaplication where I pass some commandline arguments. But I want it to look like this: <code>stepanalyzer --file=glasses.STEP --get=#62296,#3,#883</code> </p>\n\n<p>so I can say <code>--get</code> for example. And how I can pass multiple arguments with the <code>--get</code></p>\n\n<p>I hope someone is able to help me. Thanks in advance!</p>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1569223191, "post_id": 58057023, "comment_id": 102512028, "body": "Can you show us the output of <code>od</code> of your file, or the output of <code>cat -vET</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1569223365, "post_id": 58057452, "comment_id": 102512114, "body": "It seems like you are attempting to peel the onion. The question is a bit unclear don&#39;t you think?"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1569223423, "post_id": 58057452, "comment_id": 102512141, "body": "Also, the OP seems to be looking for a command-line solution so at the very least, you should metion that this is a Perl script fragment."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 1, "creation_date": 1569223507, "post_id": 58057452, "comment_id": 102512190, "body": "@kvantour I thikn that this is a very common question (with its non-specificity as well) and that it&#39;s useful to spell it out here"}, {"owner": {"reputation": 173, "user_id": 10254032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b401d2f6c753176c7321860ac61dc247?s=128&d=identicon&r=PG", "display_name": "user10254032", "link": "https://stackoverflow.com/users/10254032/user10254032"}, "edited": false, "score": 0, "creation_date": 1569287712, "post_id": 58057452, "comment_id": 102539258, "body": "@zdim thanks a lot, for your deep understanding on my question, really appreciated"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 173, "user_id": 10254032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b401d2f6c753176c7321860ac61dc247?s=128&d=identicon&r=PG", "display_name": "user10254032", "link": "https://stackoverflow.com/users/10254032/user10254032"}, "edited": false, "score": 0, "creation_date": 1569288997, "post_id": 58057452, "comment_id": 102539453, "body": "@user10254032 Welcome, and thank you for credit"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 173, "user_id": 10254032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b401d2f6c753176c7321860ac61dc247?s=128&d=identicon&r=PG", "display_name": "user10254032", "link": "https://stackoverflow.com/users/10254032/user10254032"}, "edited": false, "score": 1, "creation_date": 1569289026, "post_id": 58057452, "comment_id": 102539460, "body": "@user10254032  It&#39;s a good question I think, and have no Idea what that -1 is for  (upvoted)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 173, "user_id": 10254032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b401d2f6c753176c7321860ac61dc247?s=128&d=identicon&r=PG", "display_name": "user10254032", "link": "https://stackoverflow.com/users/10254032/user10254032"}, "edited": false, "score": 1, "creation_date": 1569401447, "post_id": 58057452, "comment_id": 102581514, "body": "@user10254032 I&#39;ve cleaned up around the use of POSIX character classes vs Unicode properties, and added another reference. Just letting you know..."}, {"owner": {"reputation": 173, "user_id": 10254032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b401d2f6c753176c7321860ac61dc247?s=128&d=identicon&r=PG", "display_name": "user10254032", "link": "https://stackoverflow.com/users/10254032/user10254032"}, "edited": false, "score": 0, "creation_date": 1569504154, "post_id": 58057452, "comment_id": 102624466, "body": "wow, its getting neat, thanks a lot for your effort"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 173, "user_id": 10254032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b401d2f6c753176c7321860ac61dc247?s=128&d=identicon&r=PG", "display_name": "user10254032", "link": "https://stackoverflow.com/users/10254032/user10254032"}, "edited": false, "score": 0, "creation_date": 1569515025, "post_id": 58057452, "comment_id": 102630654, "body": "@user10254032 Most welcome :)  I had a description a little sloppy (didn&#39;t mean to) so it ended up mixed up, now it&#39;s straightened between: POSIX character classes <code>[[:stuff:]]</code> (outer pair of <code>[]</code> is the regex&#39;s character class, only place where one can use POSIX <code>[:stuff:]</code>), and Unicode properties <code>\\p{Stuff}</code>, and Perl&#39;s convenience extension, <code>\\p{PosixStuff}</code> (syntax isn&#39;t as consistent though)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1569401801, "last_edit_date": 1569401801, "creation_date": 1569223276, "answer_id": 58057452, "question_id": 58057023, "link": "https://stackoverflow.com/questions/58057023/substitute-special-character-into-blank-space/58057452#58057452", "title": "Substitute special character into blank space", "body": "<p>There is no generic definition of a \"<em>special character</em>\" and you may need to specify what to keep -- so remove all characters other than those</p>\n\n<pre><code>$string =~ s/[^a-zA-Z0-9_,.-]//g;  # etc, spell out what to leave \n</code></pre>\n\n<p>and you can use the <em>word character</em> pattern <code>\\w</code></p>\n\n<pre><code>$string =~ s/[^\\w,.-]//g;\n</code></pre>\n\n<p>where i've only given a few punctuation charters as example.</p>\n\n<p>The <em>POSIX character class</em>, which you're trying to use, also work</p>\n\n<pre><code>$string =~ s/[^[:alnum:][:punct:]]/;\n</code></pre>\n\n<p>or using Perl extensions in the style of <code>\\p</code> \n<a href=\"https://perldoc.perl.org/perluniprops.html\" rel=\"nofollow noreferrer\">Unicode properties</a> for them</p>\n\n<pre><code>$string =~ s/[^\\p{PosixAlnum}\\p{PosixPunct}]//g;\n</code></pre>\n\n<p>where we can of course find actual Unicode properties as well, on the comprehensive page linked above.  Careful with the syntax; see \"<em>POSIX Character Classes</em>\" section in <a href=\"https://perldoc.perl.org/perlrecharclass.html\" rel=\"nofollow noreferrer\">perlrecharclass</a>.</p>\n\n<p>Or perhaps you really mean to remove the non-printable characters</p>\n\n<pre><code>$string =~ s/[^[:print:]]//g;\n</code></pre>\n\n<hr>\n\n<p>To use this as a  command line program (\"one-liner\")</p>\n\n<pre><code>perl -wpe's/\\W//g' file &gt; new_file\n</code></pre>\n\n<p>to save the output as <code>new_file</code>, or </p>\n\n<pre><code>perl -i.bak -wpe's/[^[:print:]]//g' file\n</code></pre>\n\n<p>to change the file <em>in-place</em> (remove <code>.bak</code> if you don't want a backup).</p>\n\n<p>If input is piped from another program</p>\n\n<pre><code>echo input | perl -wpe's/[^w,.-]//g'\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 10254032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b401d2f6c753176c7321860ac61dc247?s=128&d=identicon&r=PG", "display_name": "user10254032", "link": "https://stackoverflow.com/users/10254032/user10254032"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 1, "closed_date": 1569223423, "accepted_answer_id": 58057452, "answer_count": 1, "score": -1, "last_activity_date": 1569401801, "creation_date": 1569221471, "last_edit_date": 1569225051, "question_id": 58057023, "link": "https://stackoverflow.com/questions/58057023/substitute-special-character-into-blank-space", "closed_reason": "Duplicate", "title": "Substitute special character into blank space", "body": "<p>do you have any idea to translate all special character into blank spaces</p>\n\n<pre><code>^@^@^@^@&lt;9C&gt;^G^@^@*+^@^@ABD\n^@^@^@^@*+^@^@&lt;DC&gt;_^@^@ASD\n^@^@^@^@*+^@^@&lt;DC&gt;_^@^@ASaa\n^@^@^@^@&lt;80&gt;&lt;C2&gt;^A^@&lt;C2&gt;p^A^@ABD\n</code></pre>\n\n<p>od</p>\n\n<pre><code>0000000 040136 040136 040136 040136 034474 037103 043536 040136\n0000020 040136 025452 040136 040136 041101 005104 040136 040136\n0000040 040136 040136 025452 040136 040136 042074 037103 057137\n0000060 057100 040500 042102 057012 057100 057100 057100 025100\n0000100 057053 057100 036100 041504 057476 040136 040136 041101\n0000120 005104 040136 040136 040136 040136 034074 037060 041474\n0000140 037062 040536 040136 041474 037062 057160 057101 040500\n0000160 042102 000012\n0000163\n</code></pre>\n\n<p>cat -vET</p>\n\n<pre><code>^@^@^@^@&lt;9C&gt;^G^@^@*+^@^@ABD$\n^@^@^@^@*+^@^@&lt;DC&gt;_^@^@ABD$\n^@^@^@^@*+^@^@&lt;DC&gt;_^@^@ABD$\n^@^@^@^@&lt;80&gt;&lt;C2&gt;^A^@&lt;C2&gt;p^A^@ABD$\n</code></pre>\n\n<p>I've tried </p>\n\n<pre><code>LC_ALL=C sed -e 's/[^[:blank:][:print:]]//g'\nsed -r 's/[^[:print:]]//g'\n</code></pre>\n\n<p>or from this one <a href=\"https://unix.stackexchange.com/questions/336677/sed-and-remove-string-between-two-patterns\">https://unix.stackexchange.com/questions/336677/sed-and-remove-string-between-two-patterns</a></p>\n\n<p>and the output not as expected</p>\n\n<p>output</p>\n\n<pre><code>ABD\nASD\nASaa\nABD\n</code></pre>\n"}, {"tags": ["perl", "filehandle"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1569215992, "post_id": 58055643, "comment_id": 102509514, "body": "<code>my $filename = &lt;&gt;; chomp($filename);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1569214487, "last_edit_date": 1569214487, "creation_date": 1569214085, "answer_id": 58055801, "question_id": 58055643, "link": "https://stackoverflow.com/questions/58055643/how-do-you-set-up-a-open-or-die-statement-using-the-program-argument-as-input/58055801#58055801", "title": "How do you set up a open() or die statement using the program argument as input?", "body": "<p><code>@ARGV</code> contains the program's arguments.</p>\n\n<pre><code>@ARGV == 1\n   or die(\"usage\\n\");\n\nmy ($qfn) = @ARGV;\n\nopen(my $fh, \"&lt;\", $qfn)\n   or die(\"Can't open \\\"$qfn\\\": $!\\n\");\n\nwhile (&lt;$fh&gt;) {  # Sets $_\n   chomp;          # Remove the line feed from $_.\n   print(\"$_\\n\");  # Re-adds the line feed and prints the line.\n}\n</code></pre>\n\n<p>or </p>\n\n<pre><code>...\n\nwhile ( my $line = &lt;$fh&gt; ) {\n   chomp($line);      # Remove the line feed from $line.\n   print(\"$line\\n\");  # Re-adds the line feed and prints the line.\n}\n</code></pre>\n\n<p>The thing is, Perl has a special handle (<code>ARGV</code>) that reads from the files whose paths are found in <code>@ARGV</code> (or from STDIN if not arguments were provided). This is the default handle used by <code>&lt;&gt;</code> (meaning that <code>&lt;&gt;</code> is short for <code>&lt;ARGV&gt;</code>), so all you need is the following:</p>\n\n<pre><code>while (&lt;&gt;) {\n   chomp;\n   print(\"$_\\n\");\n}\n</code></pre>\n\n<hr>\n\n<p>Technically, all you need is the following:</p>\n\n<pre><code>while (&lt;&gt;) {\n   print;\n}\n</code></pre>\n\n<p>The above is equivalent to the following:</p>\n\n<pre><code>print while &lt;&gt;;   # Also one line at a time.\n</code></pre>\n\n<p>You could even use the following:</p>\n\n<pre><code>print &lt;&gt;;         # Reads all the lines, then prints them.\n</code></pre>\n\n<p>That said, one normally wants to transform the input in some way before printing it back out, and removing the training line feed is usually helpful to that.</p>\n\n<hr>\n\n<p>I called the variable qfn for qualified file name, meaning a relative or absolute path that includes a file name. This is what you truly accept, rather than just a file name.</p>\n"}], "owner": {"reputation": 11, "user_id": 12084159, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB02gu0RRhQ3lOSmwepL2bArk2fTmOX1PNRAxjjzg=k-s128", "display_name": "Nicholas Furusho", "link": "https://stackoverflow.com/users/12084159/nicholas-furusho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569214487, "creation_date": 1569212625, "question_id": 58055643, "link": "https://stackoverflow.com/questions/58055643/how-do-you-set-up-a-open-or-die-statement-using-the-program-argument-as-input", "title": "How do you set up a open() or die statement using the program argument as input?", "body": "<p>In my current homework assignment, I am trying to open a file using the open or die condition. I am supposed to open a file, then list its contents line by line, and then apply a regex to it (this part is irrelevant right now). Here is some code so far...</p>\n\n<pre><code>my $filename = '&lt;&gt;';\nopen(my $fh, \"&lt;\", $filename) or die \"Could not open file, please enter a proper file handle\";\n\nwhile(&lt;&gt;){\n  print $_;\n}\n\nclose $fh;\n</code></pre>\n\n<p>Thanks for helping guys... I look forward to an answer to my issue. I know it might be a simple answer but I'm still new to perl so anything is appreciated.</p>\n"}, {"tags": ["regex", "perl", "while-loop"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569202340, "post_id": 58054534, "comment_id": 102507142, "body": "<code>while ($content =~ s&#47;pattern&#47;repl&#47;g)</code> should be <code>while ($content =~ &#47;pattern&#47;g)</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1569202356, "post_id": 58054534, "comment_id": 102507147, "body": "ALWAYS use <code>use strict; use warnings;</code>"}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569203133, "post_id": 58054534, "comment_id": 102507258, "body": "@ikegami I need the substitution to take place"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569206055, "post_id": 58054534, "comment_id": 102507680, "body": "Do the substitution afterwards, or use the approach I described in answer to your earlier question to do both at once. Or use a proper HTML parser"}], "answers": [{"comments": [{"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1595224765, "post_id": 58055153, "comment_id": 111388869, "body": "What is the problem in using &quot;indirect object syntax&quot; to create an object?"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 1, "last_activity_date": 1569207705, "creation_date": 1569207705, "answer_id": 58055153, "question_id": 58054534, "link": "https://stackoverflow.com/questions/58054534/loop-through-global-substitution-and-execute-code-in-loop/58055153#58055153", "title": "loop through global substitution and execute code in loop", "body": "<p>You could do the following (but you should really consider using a real HTML parser):</p>\n\n<pre><code>$content =~ s{(&lt;img.+?src=)\"([^&gt;]+?)\\.([A-Za-z]+)\"}{\n    my $imageuri = \"$2.$3\";\n    print $imageuri, \"\\n\";\n    $mech-&gt;get($imageuri);\n    my $file = \"images/${year}_${number}_$num.$3\";\n    $num++;\n    $mech-&gt;save_content($file);\n    qq($1\"$file\")\n}eg;\n</code></pre>\n\n<p>The <code>e</code> modifier on the substitution operator makes perl parse the replacement part as a block of code, not a string.</p>\n\n<hr>\n\n<p>Other notes:</p>\n\n<ul>\n<li>Always start your Perl files with <code>use strict; use warnings;</code> or equivalent (e.g. <code>use strict</code> can be replaced by <code>use v5.12.0</code> or higher).</li>\n<li>Avoid indirect object syntax (<code>new WWW::Mechanize</code>). Use normal method calls instead (<code>WWW::Mechanize-&gt;new</code>).</li>\n<li>Use local variables (e.g. <code>my $num = 1;</code>) unless you really need package variables.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1588917375, "last_edit_date": 1588917375, "creation_date": 1569221269, "answer_id": 58056975, "question_id": 58054534, "link": "https://stackoverflow.com/questions/58054534/loop-through-global-substitution-and-execute-code-in-loop/58056975#58056975", "title": "loop through global substitution and execute code in loop", "body": "<p>Here is one way to do it with an HTML parser, <a href=\"https://metacpan.org/pod/HTML::TreeBuilder\" rel=\"nofollow noreferrer\">HTML::TreeBuilder</a>.</p>\n\n<p>This changes the <code>src</code> attribute to the new value in the processed node and replaces that node in the tree with the changed copy, for all <code>img</code> tags.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse HTML::TreeBuilder;\n\nmy $content = join '', &lt;DATA&gt;;  # join in general (not needed with one line)\n\nmy ($num, $year, $number) = (1, 2019, 23);\nmy $new_src_base = \"images/${year}_${number}_$num\";\n\nmy $tree = HTML::TreeBuilder-&gt;new_from_content($content);\n\nmy @nodes = $tree-&gt;look_down(_tag =&gt; 'img');\n\nfor my $node (@nodes) {\n    my ($ext) =  $node-&gt;attr('src') =~ m{.*/.*\\.(.*)\\z};    #/\n    my $orig_src = $node-&gt;attr('src', $new_src_base . \".$ext\");  # change 'src'\n    $node-&gt;replace_with($node);\n    # my $imageurl = $orig_src;  # fetch the image etc...\n    # $mech-&gt;get($imageurl);             \n}\n\nsay $tree-&gt;as_HTML;   # to inspect; otherwise print to file\n\n__DATA__\n&lt;P&gt;&lt;div class=\"row\" style=\"text-align:center\"&gt;&lt;a target=\"_blank\" href=\"/image/SG0092a.gif\"&gt; &lt;img src=\"/image/SG0092a.gif\"  alt=\"graphic image\" class=\"img-responsive graphic\"/&gt;&lt;/a&gt;&lt;/div&gt; &lt;div class=\"row\" style=\"text-align:center\"&gt;&lt;a target=\"_blank\" href=\"/image/SG0092b.gif\"&gt; &lt;img src=\"/image/SG0092b.gif\"  alt=\"graphic image\" class=\"img-responsive graphic\"/&gt;&lt;/a&gt;&lt;/div&gt; &lt;div class=\"row\" style=\"text-align:center\"&gt;&lt;a target=\"_blank\" href=\"/image/SG0092c.gif\"&gt; &lt;img src=\"/image/SG0092c.gif\"  alt=\"graphic image\" class=\"img-responsive graphic\"/&gt;&lt;/a&gt;&lt;/div&gt; &lt;div class=\"row\" style=\"text-align:center\"&gt;&lt;a target=\"_blank\" href=\"/image/SG0092d.gif\"&gt; &lt;img src=\"/image/SG0092d.gif\"  alt=\"graphic image\" class=\"img-responsive graphic\"/&gt;&lt;/a&gt;&lt;/div&gt; &lt;div class=\"row\" style=\"text-align:center\"&gt;&lt;a target=\"_blank\" href=\"/image/SG0092e.gif\"&gt; &lt;img src=\"/image/SG0092e.gif\"  alt=\"graphic image\" class=\"img-responsive graphic\"/&gt;&lt;/a&gt;&lt;/div&gt;\n</code></pre>\n\n<p>For the new name of <code>src</code> attribute I copy what I can infer from the OP.  The code in the question leaves <code>href</code> attribute of the link unchanged (path to the same gif) so this code leaves that, too.</p>\n\n<p>There are other tools to do this with, see <a href=\"https://stackoverflow.com/a/57069498/4653379\">this post</a> for more, for example.</p>\n\n<hr>\n\n<p>The above could perhaps run into problems related to <em>weak references</em> in older versions, see documentation. Then this should be safer</p>\n\n<pre><code>for my $node (@nodes) {\n    my ($ext) =  ( $node-&gt;attr('src') ) =~ m{.*/.*\\.(.*)\\z};  #/\n    my $copy = $node-&gt;clone;\n    my $orig_src = $copy-&gt;attr('src', $new_src_base . \".$ext\");\n    $node-&gt;replace_with($copy)-&gt;delete;\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 0, "last_activity_date": 1569354336, "creation_date": 1569354336, "answer_id": 58087226, "question_id": 58054534, "link": "https://stackoverflow.com/questions/58054534/loop-through-global-substitution-and-execute-code-in-loop/58087226#58087226", "title": "loop through global substitution and execute code in loop", "body": "<p>Using <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"nofollow noreferrer\">Mojo::DOM</a>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Mojo::DOM;\nuse Mojo::UserAgent;\n\nmy $ua = Mojo::UserAgent-&gt;new;\nmy $dom = Mojo::DOM-&gt;new($content);\nmy $num = 1;\nforeach my $img ($dom-&gt;find('img[src]')-&gt;each) {\n  next unless $img-&gt;{src} =~ m/\\.([a-zA-Z]+)\\z/;\n  my $ext = $1;\n  my $path = \"images/${year}_${number}_$num.$ext\";\n  $ua-&gt;get($img-&gt;{src})-&gt;result-&gt;save_to($path);\n  $img-&gt;attr(src =&gt; $path);\n  $num++;\n}\n\nprint $dom-&gt;to_string;\n</code></pre>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 58055153, "answer_count": 3, "score": -1, "last_activity_date": 1588917375, "creation_date": 1569200175, "last_edit_date": 1569200555, "question_id": 58054534, "link": "https://stackoverflow.com/questions/58054534/loop-through-global-substitution-and-execute-code-in-loop", "title": "loop through global substitution and execute code in loop", "body": "<pre><code>use WWW::Mechanize;\n\nmkdir \"images\";\n$url = \"https://www.somedomain.com/\";\n$mech = new WWW::Mechanize;\n$mech-&gt;get($url);\n$num = 1;\n$year = 2019;\n$number = 23;\n\n$content = q{&lt;P&gt;&lt;div class=\"row\" style=\"text-align:center\"&gt;&lt;a target=\"_blank\" href=\"/image/SG0092a.gif\"&gt;&lt;img src=\"/image/SG0092a.gif\"  alt=\"graphic image\" class=\"img-responsive graphic\"/&gt;&lt;/a&gt;&lt;/div&gt;&lt;div class=\"row\" style=\"text-align:center\"&gt;&lt;a target=\"_blank\" href=\"/image/SG0092b.gif\"&gt;&lt;img src=\"/image/SG0092b.gif\"  alt=\"graphic image\" class=\"img-responsive graphic\"/&gt;&lt;/a&gt;&lt;/div&gt;&lt;div class=\"row\" style=\"text-align:center\"&gt;&lt;a target=\"_blank\" href=\"/image/SG0092c.gif\"&gt;&lt;img src=\"/image/SG0092c.gif\"  alt=\"graphic image\" class=\"img-responsive graphic\"/&gt;&lt;/a&gt;&lt;/div&gt;&lt;div class=\"row\" style=\"text-align:center\"&gt;&lt;a target=\"_blank\" href=\"/image/SG0092d.gif\"&gt;&lt;img src=\"/image/SG0092d.gif\"  alt=\"graphic image\" class=\"img-responsive graphic\"/&gt;&lt;/a&gt;&lt;/div&gt;&lt;div class=\"row\" style=\"text-align:center\"&gt;&lt;a target=\"_blank\" href=\"/image/SG0092e.gif\"&gt;&lt;img src=\"/image/SG0092e.gif\"  alt=\"graphic image\" class=\"img-responsive graphic\"/&gt;&lt;/a&gt;&lt;/div&gt;};\n\nwhile ($content =~ s/(&lt;img.+?src=)\"([^&gt;]+?)\\.([A-Za-z]+)\"/$1\"images\\/${year}_${number}_$num.$3\"/g)\n{\n    $imageuri = \"$2.$3\";\n    print $imageuri, \"\\n\";\n    $mech-&gt;get($imageuri);\n    $mech-&gt;save_content(\"images/${year}_${number}_$num.$3\");\n    $num++;\n}\n\nprint $content, \"\\n\";\n</code></pre>\n\n<p>Is it possible to do the above in perl?  I would like the <code>src</code> attributes of the <code>img</code> elements replaced with a new path and filename and for the image files to be downloaded and saved with that path and filename.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 11690214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db211c870921bd0248928a0dfffe3e36?s=128&d=identicon&r=PG&f=1", "display_name": "allmail", "link": "https://stackoverflow.com/users/11690214/allmail"}, "edited": false, "score": 0, "creation_date": 1569267345, "post_id": 58056261, "comment_id": 102533889, "body": "thanks. I think I will just modify the .pm on my machine for now."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1569217386, "creation_date": 1569217386, "answer_id": 58056261, "question_id": 58054463, "link": "https://stackoverflow.com/questions/58054463/perl-archivezip-unexpected-behavior/58056261#58056261", "title": "Perl Archive::Zip unexpected behavior", "body": "<p>You are right and such a bug <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=55748\" rel=\"nofollow noreferrer\">was filed 9 years ago</a> and <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=91148\" rel=\"nofollow noreferrer\">again 6 years ago</a>. Unfortunately it looks like nobody cared as is the case with <a href=\"https://rt.cpan.org/Public/Dist/Display.html?Name=Archive-Zip\" rel=\"nofollow noreferrer\">lots of other bug reports</a> for this module.</p>\n"}], "owner": {"reputation": 123, "user_id": 11690214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db211c870921bd0248928a0dfffe3e36?s=128&d=identicon&r=PG&f=1", "display_name": "allmail", "link": "https://stackoverflow.com/users/11690214/allmail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 58056261, "answer_count": 1, "score": 0, "last_activity_date": 1569217386, "creation_date": 1569199391, "question_id": 58054463, "link": "https://stackoverflow.com/questions/58054463/perl-archivezip-unexpected-behavior", "title": "Perl Archive::Zip unexpected behavior", "body": "<p>I am wondering if this is a bug?</p>\n\n<pre><code>sub addFile {\n    my $self = shift;\n\n    my ($fileName, $newName, $compressionLevel);\n    if (ref($_[0]) eq 'HASH') {\n        $fileName         = $_[0]-&gt;{filename};\n        $newName          = $_[0]-&gt;{zipName};\n        $compressionLevel = $_[0]-&gt;{compressionLevel};\n    } else {\n        ($fileName, $newName, $compressionLevel) = @_;\n    }\n\n    if ($^O eq 'MSWin32' &amp;&amp; $Archive::Zip::UNICODE) {\n        $fileName = Win32::GetANSIPathName($fileName);\n    }\n\n    my $newMember = Archive::Zip::Member-&gt;newFromFile($fileName, $newName);\n    $newMember-&gt;desiredCompressionLevel($compressionLevel);**\n    if ($self-&gt;{'storeSymbolicLink'} &amp;&amp; -l $fileName) {\n        my $newMember =\n          Archive::Zip::Member-&gt;newFromString(readlink $fileName, $newName);\n\n        # For symbolic links, External File Attribute is set to 0xA1FF0000 by Info-ZIP\n        $newMember-&gt;{'externalFileAttributes'} = 0xA1FF0000;\n        $self-&gt;addMember($newMember);\n    } else {\n        $self-&gt;addMember($newMember);\n    }\n\n    return $newMember;\n}\n</code></pre>\n\n<p>It is not checking if <code>$newMember</code> is defined before calling <code>desiredCompressionLevel()</code></p>\n\n<p>And in case I try to add a file that does not exist, I get this </p>\n\n<pre><code>Can't call method \"desiredCompressionLevel\" on an undefined value at C:/Perl5281/site/lib/Archive/Zip/Archive.pm line 256.\n</code></pre>\n\n<p>Shouldn't this <code>addFile()</code> check for this condition and return undef if unsuccessful in adding the file. The help seems to indicate that behavior</p>\n\n<pre><code>addFile( $fileName [, $newName, $compressionLevel ] )\naddFile( { filename =&gt; $fileName [, zipName =&gt; $newName, compressionLevel =&gt; $compressionLevel } ] )\nAppend a member whose data comes from an external file, returning the member or undef.\n</code></pre>\n\n<p>Also in this function in the same module, it is checking the same condition and returning undef if unsuccessful (as expected)</p>\n\n<pre><code>sub updateMember {\n    my $self = shift;\n\n    my ($oldMember, $fileName);\n    if (ref($_[0]) eq 'HASH') {\n        $oldMember = $_[0]-&gt;{memberOrZipName};\n        $fileName  = $_[0]-&gt;{name};\n    } else {\n        ($oldMember, $fileName) = @_;\n    }\n\n    if (!defined($fileName)) {\n        _error(\"updateMember(): missing fileName argument\");\n        return undef;\n    }\n\n    my @newStat = stat($fileName);\n    if (!@newStat) {\n        _ioError(\"Can't stat $fileName\");\n        return undef;\n    }\n\n    my $isDir = -d _;\n\n    my $memberName;\n\n    if (ref($oldMember)) {\n        $memberName = $oldMember-&gt;fileName();\n    } else {\n        $oldMember = $self-&gt;memberNamed($memberName = $oldMember)\n          || $self-&gt;memberNamed($memberName =\n              _asZipDirName($oldMember, $isDir));\n    }\n\n    unless (defined($oldMember)\n        &amp;&amp; $oldMember-&gt;lastModTime() == $newStat[9]\n        &amp;&amp; $oldMember-&gt;isDirectory() == $isDir\n        &amp;&amp; ($isDir || ($oldMember-&gt;uncompressedSize() == $newStat[7]))) {\n\n        # create the new member\n        my $newMember =\n            $isDir\n          ? Archive::Zip::Member-&gt;newDirectoryNamed($fileName, $memberName)\n          : Archive::Zip::Member-&gt;newFromFile($fileName, $memberName);\n\n        unless (defined($newMember)) {\n            _error(\"creation of member $fileName failed in updateMember()\");\n            return undef;\n        }**\n\n        # replace old member or append new one\n        if (defined($oldMember)) {\n            $self-&gt;replaceMember($oldMember, $newMember);\n        } else {\n            $self-&gt;addMember($newMember);\n        }\n\n        return $newMember;\n    }\n\n    return $oldMember;\n}\n</code></pre>\n"}, {"tags": ["regex", "perl", "while-loop"], "comments": [{"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1569198432, "post_id": 58054369, "comment_id": 102506596, "body": "What do you mean by <i>only 4 times</i>? For example, if there 9 numbers in <code>$str</code>, you want to replace them all, of just 4 of them?"}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1569199282, "post_id": 58054369, "comment_id": 102506714, "body": "@GMB In this example the loop should only run 4 times"}], "answers": [{"tags": [], "owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "is_accepted": false, "score": 3, "last_activity_date": 1569198560, "creation_date": 1569198560, "answer_id": 58054408, "question_id": 58054369, "link": "https://stackoverflow.com/questions/58054369/loop-through-global-substitution/58054408#58054408", "title": "Loop through global substitution", "body": "<p>You don't need the loop: the /g modifier causes the substitution to be repeated as many times as it matches. What you want is the /e modifier to compute the substitution. Assuming the effect you were after is to add 5 to each number, the example code is as follows.</p>\n\n<pre><code>$str = \"1 2 3 4\";\n$str =~ s/(\\d)/$1+5/eg;\nprint \"$str\\n\";\n</code></pre>\n\n<p>If you really wanted to substitute numbers starting with 6, then this works.</p>\n\n<pre><code>$num = 6;\n$str = \"1 2 3 4\";\n$str =~ s/\\d/$num++/eg;\nprint \"$str\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1569199466, "last_edit_date": 1569199466, "creation_date": 1569199156, "answer_id": 58054447, "question_id": 58054369, "link": "https://stackoverflow.com/questions/58054369/loop-through-global-substitution/58054447#58054447", "title": "Loop through global substitution", "body": "<p>You could with the match operator.</p>\n\n<pre><code>my $new_str = '';\nwhile ($str =~ /\\G(.*?)\\d/gc) {\n   $new_str .= $1 . $num++;\n}\n\n$new_str .= substr($str, pos($str));\n</code></pre>\n\n<p>However, @TFBW's solution is probably what you want unless you're writing a tokenizer for a big parser. In a tokenizer, it would look more like:</p>\n\n<pre><code># So we don't have to say \u00ab$str =~ all\u00bb over the place.\n# Also, allows us to use redo.\nfor ($str) {\n   /\\G \\s+ /xgc;   # Skip whitespace.\n\n   if (/\\G (\\d+) /xgc) {\n      # Do something with $1.\n      redo;\n   }\n\n   ...\n\n   last if /\\G \\z /xgc;\n\n   die \"Unrecognized token\";\n}\n</code></pre>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1569199466, "creation_date": 1569198101, "question_id": 58054369, "link": "https://stackoverflow.com/questions/58054369/loop-through-global-substitution", "title": "Loop through global substitution", "body": "<pre><code>$num = 6;\n$str = \"1 2 3 4\";\nwhile ($str =~ s/\\d/$num/g)\n{\n    print $str, \"\\n\";\n    $num++;\n}\n</code></pre>\n\n<p>Is it possible to do something like the above in perl?  I would like the loop to run only 4 times and to finish with <code>$str</code> being <code>6 7 8 9</code>.</p>\n"}, {"tags": ["regex", "string", "perl"], "comments": [{"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 1, "creation_date": 1569164599, "post_id": 58050401, "comment_id": 102499079, "body": "Can you elaborate on what is not working?"}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1569167436, "post_id": 58050663, "comment_id": 102499856, "body": "That would allow two extensions, <code>&quot;.pl&quot;</code> and <code>&quot;.pl\\n&quot;</code>. You may want <code>\\z</code> instead."}, {"owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "edited": false, "score": 0, "creation_date": 1569218110, "post_id": 58050663, "comment_id": 102510051, "body": "Additionally filenames starting with a dash - which are very annoying - are allowed as well. So I guess this one&#39;s better: <code>&#47;^\\w[-\\w]*\\.pl\\z&#47;</code>"}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 3, "last_activity_date": 1569167797, "last_edit_date": 1569167797, "creation_date": 1569166085, "answer_id": 58050663, "question_id": 58050401, "link": "https://stackoverflow.com/questions/58050401/perl-linux-file-name-validation/58050663#58050663", "title": "perl linux file name validation", "body": "<blockquote>\n  <p><code>$filename !~ /^[-\\w]\\.pl$/</code></p>\n</blockquote>\n\n<p>This expression allows only a file name that's one character long (extension not included), with that character being a word character or a dash.</p>\n\n<p>I guess that you actually meant:</p>\n\n<pre><code>$filename !~ /^[-\\w]+\\.pl$/\n</code></pre>\n\n<p>Note: as commented by <a href=\"https://stackoverflow.com/users/1848654/melpomene\">melpomene</a>, another issue with your regex is that it would allow a file name that has a trailing new line after the extension. To avoid that, you can use the <code>\\z</code> assertion:</p>\n\n<pre><code>$filename !~ /^[-\\w]+\\.pl\\z/\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10321018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PXTBG.jpg?s=128&g=1", "display_name": "Dede", "link": "https://stackoverflow.com/users/10321018/dede"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1596439148, "creation_date": 1569164292, "last_edit_date": 1596439148, "question_id": 58050401, "link": "https://stackoverflow.com/questions/58050401/perl-linux-file-name-validation", "title": "perl linux file name validation", "body": "<p>I am trying to validate a file name in Perl and I cannot get it to work, I am not sure of what I am doing wrong. See my code below. </p>\n\n<pre><code> while ($filename !~ /^[-\\w]\\.pl$/){\n        print \"Invalid file name, type another : \";\n        my $filename = &lt;STDIN&gt;;\n        chomp $filename;\n    }\n</code></pre>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 478, "user_id": 1338382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vs6If.jpg?s=128&g=1", "display_name": "rprakash", "link": "https://stackoverflow.com/users/1338382/rprakash"}, "edited": false, "score": 0, "creation_date": 1569172456, "post_id": 58050344, "comment_id": 102501218, "body": "There are perl modules like <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a>, <a href=\"https://metacpan.org/pod/XML::Simple\" rel=\"nofollow noreferrer\">XML::Simple</a> which can be used to implement this."}, {"owner": {"reputation": 478, "user_id": 1338382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vs6If.jpg?s=128&g=1", "display_name": "rprakash", "link": "https://stackoverflow.com/users/1338382/rprakash"}, "edited": false, "score": 0, "creation_date": 1569172514, "post_id": 58050344, "comment_id": 102501239, "body": "And, <a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow noreferrer\">XML::Twig</a> also, as commented in this <a href=\"https://stackoverflow.com/a/58051122/1338382\">answer</a>"}, {"owner": {"reputation": 171, "user_id": 2799433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011e057102e676020e526b0b82f1949?s=128&d=identicon&r=PG&f=1", "display_name": "user2799433", "link": "https://stackoverflow.com/users/2799433/user2799433"}, "reply_to_user": {"reputation": 478, "user_id": 1338382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vs6If.jpg?s=128&g=1", "display_name": "rprakash", "link": "https://stackoverflow.com/users/1338382/rprakash"}, "edited": false, "score": 0, "creation_date": 1569177713, "post_id": 58050344, "comment_id": 102502647, "body": "@rprakash Are there any sample code on these modules?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 478, "user_id": 1338382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vs6If.jpg?s=128&g=1", "display_name": "rprakash", "link": "https://stackoverflow.com/users/1338382/rprakash"}, "edited": false, "score": 1, "creation_date": 1569187963, "post_id": 58050344, "comment_id": 102505005, "body": "@rprakash, Don&#39;t recommend a module whose own documentation recommends against using it! <a href=\"https://stackoverflow.com/q/33267765/589924\">Why is XML::Simple &quot;discouraged&quot;?</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569188117, "post_id": 58050344, "comment_id": 102505033, "body": "In the DOM model, XML elements don&#39;t have a value; they have child nodes, which might be text nodes. Depending on the parser, you might have to remove the elements children, then append a text node."}, {"owner": {"reputation": 478, "user_id": 1338382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vs6If.jpg?s=128&g=1", "display_name": "rprakash", "link": "https://stackoverflow.com/users/1338382/rprakash"}, "edited": false, "score": 0, "creation_date": 1569219977, "post_id": 58050344, "comment_id": 102510661, "body": "@user2799433 XML::LibXML can be seen <a href=\"https://grantm.github.io/perl-libxml-by-example/basics.html\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 478, "user_id": 1338382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vs6If.jpg?s=128&g=1", "display_name": "rprakash", "link": "https://stackoverflow.com/users/1338382/rprakash"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569220127, "post_id": 58050344, "comment_id": 102510730, "body": "@ikegami wasn&#39;t aware about the fact that XML::Simple is discouraged in new code."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569254884, "post_id": 58050344, "comment_id": 102528801, "body": "<a href=\"https://stackoverflow.com/q/8411684/589924\">XML::LibXML replace element value</a>"}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 2799433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011e057102e676020e526b0b82f1949?s=128&d=identicon&r=PG&f=1", "display_name": "user2799433", "link": "https://stackoverflow.com/users/2799433/user2799433"}, "edited": false, "score": 0, "creation_date": 1569169802, "post_id": 58051122, "comment_id": 102500451, "body": "I am writing a simple perl program to set data into xml file, the data is specified from command line arguments of this program."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "reply_to_user": {"reputation": 171, "user_id": 2799433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011e057102e676020e526b0b82f1949?s=128&d=identicon&r=PG&f=1", "display_name": "user2799433", "link": "https://stackoverflow.com/users/2799433/user2799433"}, "edited": false, "score": 0, "creation_date": 1569259937, "post_id": 58051122, "comment_id": 102530859, "body": "That doesn&#39;t really tell me anything more than your original question. This may help: <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 1, "last_activity_date": 1569169191, "creation_date": 1569169191, "answer_id": 58051122, "question_id": 58050344, "link": "https://stackoverflow.com/questions/58050344/how-to-set-value-to-a-xml-node-in-perl/58051122#58051122", "title": "How to set value to a xml node in perl", "body": "<p><a href=\"https://www.metacpan.org/pod/XML::Twig\" rel=\"nofollow noreferrer\">XML::Twig</a> can modify XML, as can many other modules. To say any more, you'd need to explicate your task.</p>\n"}], "owner": {"reputation": 171, "user_id": 2799433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011e057102e676020e526b0b82f1949?s=128&d=identicon&r=PG&f=1", "display_name": "user2799433", "link": "https://stackoverflow.com/users/2799433/user2799433"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1569254911, "answer_count": 1, "score": -2, "last_activity_date": 1569171635, "creation_date": 1569163882, "last_edit_date": 1569171635, "question_id": 58050344, "link": "https://stackoverflow.com/questions/58050344/how-to-set-value-to-a-xml-node-in-perl", "closed_reason": "Needs details or clarity", "title": "How to set value to a xml node in perl", "body": "<p>In perl, how to set a value to node in xml? I have searched <code>metacpan</code> and not found a module related to xml has a method do this.</p>\n"}, {"tags": ["regex", "string", "perl"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1569162951, "post_id": 58050191, "comment_id": 102498656, "body": "<code>s&#47;.{70}&#47;$&amp;\\n&#47;g;</code> should still work. Anything at the end which is less than 70 characters long will obviously not require any modification."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11578991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bbd0a635b4c4aa2ac4652e17fbf453a?s=128&d=identicon&r=PG&f=1", "display_name": "vevvostar", "link": "https://stackoverflow.com/users/11578991/vevvostar"}, "edited": false, "score": 0, "creation_date": 1569163825, "post_id": 58050205, "comment_id": 102498900, "body": "Thank you GMB. This works. However I would like to ask to you some more clarification, whether possible.This regular expression means: &quot;substitute, when find 70 characters, the previous regular expression (i.e the 70 character) plus a \\n.&quot; Is that correct?"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "reply_to_user": {"reputation": 13, "user_id": 11578991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bbd0a635b4c4aa2ac4652e17fbf453a?s=128&d=identicon&r=PG&f=1", "display_name": "vevvostar", "link": "https://stackoverflow.com/users/11578991/vevvostar"}, "edited": false, "score": 0, "creation_date": 1569164070, "post_id": 58050205, "comment_id": 102498958, "body": "@ele: yes that is correct. I added a few explanation to my answer."}, {"owner": {"reputation": 13, "user_id": 11578991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bbd0a635b4c4aa2ac4652e17fbf453a?s=128&d=identicon&r=PG&f=1", "display_name": "vevvostar", "link": "https://stackoverflow.com/users/11578991/vevvostar"}, "edited": false, "score": 0, "creation_date": 1569164396, "post_id": 58050205, "comment_id": 102499029, "body": "Thank you! Can I ask you what was the problem with my idea? Because it doesn&#39;t seem to &quot;concatenate&quot; what I ask."}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569191022, "post_id": 58050205, "comment_id": 102505579, "body": "@ikegami: thanks for your valuable suggestions, I added them to my answer."}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "reply_to_user": {"reputation": 13, "user_id": 11578991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bbd0a635b4c4aa2ac4652e17fbf453a?s=128&d=identicon&r=PG&f=1", "display_name": "vevvostar", "link": "https://stackoverflow.com/users/11578991/vevvostar"}, "edited": false, "score": 0, "creation_date": 1569191065, "post_id": 58050205, "comment_id": 102505582, "body": "@ele: see the good response by Holli about what was wrong with your initial solution."}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": true, "score": 4, "last_activity_date": 1569190983, "last_edit_date": 1569190983, "creation_date": 1569162912, "answer_id": 58050205, "question_id": 58050191, "link": "https://stackoverflow.com/questions/58050191/perl-insert-a-n-every-70-characters/58050205#58050205", "title": "Perl: insert a &quot;\\n&quot; every 70 characters", "body": "<p>Consider:</p>\n\n<pre><code>$finalstr =~ s/(.{70})/$1\\n/gs;\n</code></pre>\n\n<p>Expression <code>(.{70})</code> captures 70 characters, and then <code>$1\\n</code> substitutes with the captured part followed by a new line. Modifier <code>g</code> makes the search global (each and every match is replaced).</p>\n\n<p>Note: If you string does not contain embedded new lines, you can remove the final <code>s</code>.</p>\n\n<p>Example (with 4 characters instead of 70):</p>\n\n<pre><code>$ perl -we 'my $finalstr = \"123456789\"; $finalstr =~ s/(.{4})/$1\\n/gs; print \"$finalstr\\n\";'\n1234\n5678\n9\n$\n</code></pre>\n\n<hr>\n\n<p><strong>Edit</strong></p>\n\n<p>As commented by <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a>, an alternative solution would be:</p>\n\n<pre><code>$finalstr =~ s/.{70}\\K/\\n/g;\n</code></pre>\n\n<p>Rationale:</p>\n\n<ul>\n<li><p>the <code>\\K</code> character class indicates that what is left of it should not be suppressed; hence no capturing is needed (this is more efficient than capturing and replacing)</p></li>\n<li><p>removing the <code>s</code> modifier avoids counting in new lines as characters when matching; thus, if a new line is embedded in the string, the next line will accept 70 characters instead of just the remainder of the previous line.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "is_accepted": false, "score": 2, "last_activity_date": 1569190327, "last_edit_date": 1569190327, "creation_date": 1569187951, "answer_id": 58053555, "question_id": 58050191, "link": "https://stackoverflow.com/questions/58050191/perl-insert-a-n-every-70-characters/58053555#58053555", "title": "Perl: insert a &quot;\\n&quot; every 70 characters", "body": "<p>Two problems: In the call to <code>substr</code> you specify a value of 3. That obviously should be 70. Then you are concatenating to the target string <em>twice</em>, first by using <code>.=</code> and then by repeating the <code>$finalstr</code>. You need to use either one, not both. </p>\n\n<p>Correcting that gives you</p>\n\n<pre><code>for($i=0; $i&lt;=length($input)+1; $i=$i+70){\n    $finalstr .= substr($input,$i,70).\"\\n\";\n}\n</code></pre>\n\n<p>Which works as you intended. <code>substr</code> can also act as an <code>lvalue</code> though, so if you don't mind the <code>$input</code> being altered you can use that form: </p>\n\n<pre><code>for($i=70; $i&lt;=length($input)+1; $i=$i+71){\n    substr($input,$i,0) = \"\\n\"; \n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11578991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bbd0a635b4c4aa2ac4652e17fbf453a?s=128&d=identicon&r=PG&f=1", "display_name": "vevvostar", "link": "https://stackoverflow.com/users/11578991/vevvostar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 58050205, "answer_count": 2, "score": 0, "last_activity_date": 1569197994, "creation_date": 1569162810, "last_edit_date": 1569197994, "question_id": 58050191, "link": "https://stackoverflow.com/questions/58050191/perl-insert-a-n-every-70-characters", "title": "Perl: insert a &quot;\\n&quot; every 70 characters", "body": "<p>I have the following problem. I have a long string (1 thousand characters, more or less) and I am required to insert a \"\\n\" every 70 characters. My idea was</p>\n\n<pre><code>my $finalstr;\n    for($i=0; $i&lt;=length($input)+1; $i=$i+70){\n    $finalstr.=$finalstr.substr($input,$i,3).\"\\n\";\n    }\n</code></pre>\n\n<p>But it doesn't seem to work.The problem is that I don't know how to use regex in this case because the number of characters in <code>$input</code> could be not a multiple of 70.</p>\n"}, {"tags": ["perl", "apache-kafka", "kafka-consumer-api"], "answers": [{"comments": [{"owner": {"reputation": 3056, "user_id": 1447071, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/f2e8cde14371d5e6c6b65545dccd4e39?s=128&d=identicon&r=PG", "display_name": "Rubber Duck", "link": "https://stackoverflow.com/users/1447071/rubber-duck"}, "edited": false, "score": 0, "creation_date": 1577266856, "post_id": 59454721, "comment_id": 105131534, "body": "extremely cool, also mention that liberkafka is the basis for Kafkastreams KafkaSQL and and Python client and kafkacat"}], "tags": [], "owner": {"reputation": 58, "user_id": 1649676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebd2b12ccd5de301503eb36448b0a251?s=128&d=identicon&r=PG&f=1", "display_name": "alexandrfox", "link": "https://stackoverflow.com/users/1649676/alexandrfox"}, "is_accepted": false, "score": 1, "last_activity_date": 1577101123, "creation_date": 1577101123, "answer_id": 59454721, "question_id": 58050177, "link": "https://stackoverflow.com/questions/58050177/is-there-a-perl-kafka-consumer-group-implementation/59454721#59454721", "title": "Is there a Perl Kafka consumer group implementation", "body": "<p>Check out <a href=\"https://metacpan.org/pod/Net::Kafka\" rel=\"nofollow noreferrer\">Net::Kafka</a> - it is a Perl wrapper of <a href=\"https://github.com/edenhill/librdkafka\" rel=\"nofollow noreferrer\">librdkafka</a> C library that natively supports modern Consumer Group protocol.</p>\n"}], "owner": {"reputation": 3056, "user_id": 1447071, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/f2e8cde14371d5e6c6b65545dccd4e39?s=128&d=identicon&r=PG", "display_name": "Rubber Duck", "link": "https://stackoverflow.com/users/1447071/rubber-duck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1577101123, "creation_date": 1569162679, "question_id": 58050177, "link": "https://stackoverflow.com/questions/58050177/is-there-a-perl-kafka-consumer-group-implementation", "title": "Is there a Perl Kafka consumer group implementation", "body": "<p>I am creating a Perl stateless horizontally scalable microservice and was looking for a High Level Kafka consumer group implementation. </p>\n\n<p>I found this library \n<a href=\"https://metacpan.org/pod/Kafka::Consumer\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Kafka::Consumer</a>\nWhich has some low level functionality but has lots of limitations</p>\n\n<ol>\n<li>One must explicitly state the partition.</li>\n<li><p>The return value of </p>\n\n<p>$consumer->fetch_offsets(\n    $topic,                      # topic\n    0,\n    $group\n);\nis a HASH not usable in the:</p>\n\n<p>$consumer->commit_offsets(\n            $topic,\n            0,\n            $offsets1,\n            $group\n        );\nmethod. </p></li>\n<li><p>etc ...</p></li>\n</ol>\n\n<p>In the newer versions of Kafka consumer groups are handled by solely by Kafka without the need for a Zookeeper client and so clients in Java, Python, Scala ... just state group ID and leave a default auto commit to handle offsets. The polling logic and connections can also be handled by t High level libraries in those languages e.g. <a href=\"https://github.com/dpkp/kafka-python\" rel=\"nofollow noreferrer\">https://github.com/dpkp/kafka-python</a></p>\n\n<p>It is possible to use these building blocks or fork to create a high level library but I think someone probably has already done the work.</p>\n\n<p>Is there an open source Consumer Group implementation in Perl? and where can I find it?</p>\n"}, {"tags": ["perl", "installation", "perlbrew"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1569159052, "post_id": 58049586, "comment_id": 102497755, "body": "This looks like the same compilation issue as was reported with ruby, only this time with Perl. Possible duplicate of <a href=\"https://stackoverflow.com/questions/54363030/cannot-install-any-version-of-ruby-on-mojave-internal-ranlib-command-failed\">Cannot install any version of ruby on Mojave - internal ranlib command failed</a>"}], "owner": {"reputation": 11, "user_id": 1819710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a485ae16b1d0cc9ca473bb6e1dd16c2a?s=128&d=identicon&r=PG", "display_name": "Roger Thompson", "link": "https://stackoverflow.com/users/1819710/roger-thompson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1569158108, "creation_date": 1569158108, "question_id": 58049586, "link": "https://stackoverflow.com/questions/58049586/perl-5-30-0-install-failure-on-macos-10-14-6", "title": "perl (5.30.0) install failure on MacOS 10.14.6", "body": "<p>I have an up to date copy of XCode: Version 11.0 (11A420a)\nI use perlbrew to do installs, and the last successful one was 5-28.0 Jul 26 2018</p>\n\n<p>Here is that tail of the log:</p>\n\n<pre>\n\n    Finishing processing Unicode properties\n    Compiling Perl properties\n    Creating Perl synonyms\n    Writing tables\n    Making pod file\n    Making test script\n    Updating 'mktables.lst'\n    ./miniperl -Ilib -MExtUtils::Miniperl -e 'writemain(\\\"perlmain.c\", @ARGV)' DynaLoader \n    cc -c -DPERL_CORE -fno-common -DPERL_DARWIN -mmacosx-version-min=10.14 -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -I/opt/local/include -DPERL_USE_SAFE_PUTENV -std=c89 -O3 -Wall -Werror=declaration-after-statement -Werror=pointer-arith -Wextra -Wc++-compat -Wwrite-strings perlmain.c\n    cc -c -DPERL_CORE -fno-common -DPERL_DARWIN -mmacosx-version-min=10.14 -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -I/opt/local/include -DPERL_USE_SAFE_PUTENV -std=c89 -O3 -Wall -Werror=declaration-after-statement -Werror=pointer-arith -Wextra -Wc++-compat -Wwrite-strings op.c\n    cc -c -DPERL_CORE -fno-common -DPERL_DARWIN -mmacosx-version-min=10.14 -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -I/opt/local/include -DPERL_USE_SAFE_PUTENV -std=c89 -O3 -Wall -Werror=declaration-after-statement -Werror=pointer-arith -Wextra -Wc++-compat -Wwrite-strings perl.c\n    ./miniperl -Ilib make_ext.pl DynaLoader.o  MAKE=\"/Applications/Xcode.app/Contents/Developer/usr/bin/make\" LIBPERL_A=libperl.a LINKTYPE=static CCCDLFLAGS=\n    Generating a Unix-style Makefile\n    Writing Makefile for DynaLoader\n    \"../../miniperl\" \"-I../../lib\" DynaLoader_pm.PL DynaLoader.pm\n    rm -f DynaLoader.xs\n    cp dl_dlopen.xs DynaLoader.xs\n    \"../../miniperl\" \"-I../../lib\" \"../../lib/ExtUtils/xsubpp\" -noprototypes -typemap '/Users/roger/perl5/perlbrew/build/perl-5.30.0/perl-5.30.0/ext/DynaLoader/../../lib/ExtUtils/typemap'  DynaLoader.xs > DynaLoader.xsc\n    mv DynaLoader.xsc DynaLoader.c\n    cc -c   -fno-common -DPERL_DARWIN -mmacosx-version-min=10.14 -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -I/opt/local/include -DPERL_USE_SAFE_PUTENV -Wall -Werror=declaration-after-statement -Werror=pointer-arith -Wextra -Wc++-compat -Wwrite-strings -O3   -DVERSION=\\\"1.45\\\" -DXS_VERSION=\\\"1.45\\\"  \"-I../..\"  -DLIBC=\"\" DynaLoader.c\n    rm -rf ../../DynaLoader.o\n    cp DynaLoader.o ../../DynaLoader.o\n    rm -f libperl.a\n    /opt/local/bin/ar rc libperl.a op.o     perl.o  gv.o toke.o perly.o pad.o regcomp.o dump.o util.o mg.o reentr.o mro_core.o keywords.o hv.o av.o run.o pp_hot.o sv.o pp.o scope.o pp_ctl.o pp_sys.o doop.o doio.o regexec.o utf8.o taint.o deb.o universal.o globals.o perlio.o perlapi.o numeric.o mathoms.o locale.o pp_pack.o pp_sort.o caretx.o dquote.o time64.o   DynaLoader.o\n    /opt/local/bin/ranlib: object: libperl.a(op.o) malformed object (unknown load command 1)\n    /opt/local/bin/ar: internal ranlib command failed\n    make: *** [libperl.a] Error 1\n    ##### Brew Failed #####\n\n</pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1569154227, "post_id": 58048912, "comment_id": 102496682, "body": "Why not get even more detail by using <a href=\"https://metacpan.org/pod/Config#myconfig()\" rel=\"nofollow noreferrer\">Config::myconfig</a>?"}, {"owner": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1569193159, "post_id": 58048912, "comment_id": 102505956, "body": "@SteffenUllrich Because I didn&#39;t know it existed"}], "answers": [{"comments": [{"owner": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "edited": false, "score": 0, "creation_date": 1569161278, "post_id": 58049086, "comment_id": 102498259, "body": "That&#39;s a core module so it looks like this is the answer, but I was specifically looking for a way to do it within a script, if you could rephrase it."}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "reply_to_user": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "edited": false, "score": 1, "creation_date": 1569162146, "post_id": 58049086, "comment_id": 102498457, "body": "@felwithe <code>use Config; print &quot;$Config{archname}\\n&quot;;</code>,  <code>use Config (); while(my($k, $v) = each %Config::Config){print &quot;$k\\t$v\\n&quot;}</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "edited": false, "score": 1, "creation_date": 1569172371, "post_id": 58049086, "comment_id": 102501180, "body": "@felwithe What do you mean? This answer is using <code>Config</code> within a script."}, {"owner": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1569193087, "post_id": 58049086, "comment_id": 102505951, "body": "@melpomene Yes, but his code is from the command line. I already knew how to do it from the command line (just use -v). I was specifically asking how to do it from within a script."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "edited": false, "score": 1, "creation_date": 1569198270, "post_id": 58049086, "comment_id": 102506568, "body": "@felwith, Yes, but the same code could used in a script (if preceded by <code>use Config; use feature qw( say );</code>). Shawn used to it in a command line so you could see the output, that&#39;s all."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569198324, "post_id": 58049086, "comment_id": 102506573, "body": "Re &quot;<i>That&#39;s a core module</i>&quot;, That&#39;s putting it mildly. It&#39;s a module that&#39;s built alongside with <code>perl</code>, containing information about the <code>perl</code> being built."}, {"owner": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1569209633, "post_id": 58049086, "comment_id": 102508213, "body": "@melpomene It requires extra knowledge on the part of the user. At least several pieces. The user may not have those pieces of extra knowledge. That&#39;s why it has to actually answer the question as asked before I can accept it."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "edited": false, "score": 0, "creation_date": 1569209983, "post_id": 58049086, "comment_id": 102508275, "body": "@felwithe What extra knowledge are you talking about? Also, why do you think <code>perl file-with-code</code> is a script but <code>perl -e inline-code</code> is not?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "edited": false, "score": 0, "creation_date": 1569221242, "post_id": 58049086, "comment_id": 102511143, "body": "@felwithe, Re &quot;<i>That&#39;s why it has to actually answer the question as asked before I can accept it.</i>&quot;, You can accept it as it. But it&#39;s your prerogative not to do so."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1569221278, "post_id": 58049086, "comment_id": 102511171, "body": "@melpomene, <code>-MConfig -E</code> instead of <code>use Config; use feature qw( say );</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569221429, "post_id": 58049086, "comment_id": 102511252, "body": "@ikegami OK, true. But those are easily looked up in <a href=\"https://perldoc.pl/perlrun#-m%5B-%5Dmodule\" rel=\"nofollow noreferrer\"><code>perldoc perlrun</code></a> and technically there&#39;s nothing that prevents you from doing e.g. <code>#!perl -MConfig</code> in a script file."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1569221490, "post_id": 58049086, "comment_id": 102511274, "body": "@melpomene Noone said it would be hard to translate, and that wouldn&#39;t be enough."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 4, "last_activity_date": 1569154348, "creation_date": 1569154348, "answer_id": 58049086, "question_id": 58048912, "link": "https://stackoverflow.com/questions/58048912/how-to-print-the-information-that-perl-prints-with-version-but-from-within/58049086#58049086", "title": "How to print the information that Perl prints with &quot;--version&quot;, but from within a script?", "body": "<p>You're looking for the <a href=\"https://perldoc.pl/Config\" rel=\"nofollow noreferrer\">Config</a> module:</p>\n\n<pre><code>$ perl -MConfig -E 'say \"perl $^V built for $Config{archname}\"'\nperl v5.26.1 built for x86_64-linux-gnu-thread-multi\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 478, "user_id": 1338382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vs6If.jpg?s=128&g=1", "display_name": "rprakash", "link": "https://stackoverflow.com/users/1338382/rprakash"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569219681, "post_id": 58051579, "comment_id": 102510542, "body": "<code>&#47;usr&#47;bin&#47;perl</code> is the absolute path on my system, btw thanks for updating the answer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1569221037, "post_id": 58051579, "comment_id": 102511066, "body": "Sure, but the point is that it might not be for someone else. Or worse, it could be a different <code>perl</code> than the one being used if they have multiple builds of <code>perl</code> installed. By using <code>$^X</code>, you get the right one."}], "tags": [], "owner": {"reputation": 478, "user_id": 1338382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vs6If.jpg?s=128&g=1", "display_name": "rprakash", "link": "https://stackoverflow.com/users/1338382/rprakash"}, "is_accepted": false, "score": 0, "last_activity_date": 1569198738, "last_edit_date": 1569198738, "creation_date": 1569172293, "answer_id": 58051579, "question_id": 58048912, "link": "https://stackoverflow.com/questions/58048912/how-to-print-the-information-that-perl-prints-with-version-but-from-within/58051579#58051579", "title": "How to print the information that Perl prints with &quot;--version&quot;, but from within a script?", "body": "<p>If you want the exact string (as it's in <code>perl -v</code> output) in your script, then you can run the \"perl -v\" command from your script and get the string directly from the command output using the <a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"nofollow noreferrer\">IPC::Run::run()</a>.</p>\n\n<pre><code>use strict;\n\nuse IPC::Run qw(run);\n\n# Variables to capture the STDOUT and STDERR\nmy ($out, $err);\n\n# function \"run\" from IPC::Run to execute the \"perl -v\" command\n# and keep the STDOUT in $out variable and STDERR in $err\n# $out will have the complete output of \"perl -v\" command\nrun([$^X, \"-v\"], \\undef, \\$out, \\$err);\n\n# split the output at new line and\n# then get the second line (index 1) from the array\nmy $version_line = ( split /\\n/, $out )[1];\n\nprint $version_line.\"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1569198738, "creation_date": 1569152838, "last_edit_date": 1569160769, "question_id": 58048912, "link": "https://stackoverflow.com/questions/58048912/how-to-print-the-information-that-perl-prints-with-version-but-from-within", "title": "How to print the information that Perl prints with &quot;--version&quot;, but from within a script?", "body": "<p>To print the Perl version from within a script use <code>$^V</code>. But I would like to see the full string that Perl prints with <code>--version</code> or <code>-v</code>, which looks like</p>\n\n<p>\"This is perl 5, version 24, subversion 1 (v5.24.1) built for MSWin32-x64-multi-thread\". Or \"This is perl 5, version 26, subversion 3 (v5.26.3) built for x86_64-cygwin-threads-multi (with 7 registered patches, see perl -V for more detail)\".</p>\n\n<p>I have two environments that I think may be calling two different installations of Perl, but both are new so <code>$^V</code> is returning 5.24.1 for both.</p>\n"}, {"tags": ["perl", "pdf", "cpan"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569155613, "post_id": 58048648, "comment_id": 102497002, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 311, "user_id": 1006832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c65033a25e4aeaea36e8dbecf7131df?s=128&d=identicon&r=PG", "display_name": "Beeblbrox", "link": "https://stackoverflow.com/users/1006832/beeblbrox"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569250717, "post_id": 58048648, "comment_id": 102526641, "body": "Uh - I geniunely don&#39;t really know how I can do that wihout reproducing the entire script and my sample data, beyond the snippet that was in the linked question?  Sorry :-/"}, {"owner": {"reputation": 311, "user_id": 1006832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c65033a25e4aeaea36e8dbecf7131df?s=128&d=identicon&r=PG", "display_name": "Beeblbrox", "link": "https://stackoverflow.com/users/1006832/beeblbrox"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569251086, "post_id": 58048648, "comment_id": 102526840, "body": "Added an edit for what it&#39;sworth buit it&#39;s really no different from linked question"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569254951, "post_id": 58048648, "comment_id": 102528832, "body": "<i>&quot;..displays the full 400 reference adventure with links in html just fine.&quot;</i> What is a 400 reference adventure?"}, {"owner": {"reputation": 311, "user_id": 1006832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c65033a25e4aeaea36e8dbecf7131df?s=128&d=identicon&r=PG", "display_name": "Beeblbrox", "link": "https://stackoverflow.com/users/1006832/beeblbrox"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569258351, "post_id": 58048648, "comment_id": 102530260, "body": "@H&#229;konH&#230;gland - uh sorry that&#39;s a bit confusing - adventure gamebooks like Choose Your Own Adventure - not really relevant to the problem - in short it&#39;s a 150 page document that translates to HTML fine in the script but when I pipe the doc through the converter it cuts short at 11 pages and doesn&#39;t translate the links"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569263468, "post_id": 58048648, "comment_id": 102532272, "body": "Could you provide a link to sample content of <code>$textblob</code> that causes problems?"}, {"owner": {"reputation": 311, "user_id": 1006832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c65033a25e4aeaea36e8dbecf7131df?s=128&d=identicon&r=PG", "display_name": "Beeblbrox", "link": "https://stackoverflow.com/users/1006832/beeblbrox"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569294296, "post_id": 58048648, "comment_id": 102540350, "body": "@H&#229;konH&#230;gland sample data at <a href=\"https://fightingfantasy.net/Grekgunmod.doc\" rel=\"nofollow noreferrer\">fightingfantasy.net/Grekgunmod.doc</a> (copy paste the doc into a workingversion of the script) - if you don&#39;t have a server-running version I have it here at <a href=\"https://fightingfantasy.net/gamebooks/doc_to_refs.cgi\" rel=\"nofollow noreferrer\">fightingfantasy.net/gamebooks/doc_to_refs.cgi</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569311122, "post_id": 58048648, "comment_id": 102545662, "body": "Ok, thanks! I will check it out later today."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569320562, "post_id": 58048648, "comment_id": 102550793, "body": "Let&#39;s continue this discussion on email, if it is ok with you? (My email is in my profile)"}, {"owner": {"reputation": 311, "user_id": 1006832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c65033a25e4aeaea36e8dbecf7131df?s=128&d=identicon&r=PG", "display_name": "Beeblbrox", "link": "https://stackoverflow.com/users/1006832/beeblbrox"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569326719, "post_id": 58048648, "comment_id": 102554127, "body": "Sure have sent you an email ty so much"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1569352474, "creation_date": 1569352474, "answer_id": 58086861, "question_id": 58048648, "link": "https://stackoverflow.com/questions/58048648/pdffromhtml-no-anchors-and-early-termination/58086861#58086861", "title": "PDF::FromHTML No Anchors and Early Termination", "body": "<p><em>\"... and on larger documents the processing ceases at Page 11 of the PDF...\"</em></p>\n\n<p>This seems to be due to a bug in <a href=\"https://metacpan.org/source/AUDREYT/PDF-FromHTML-0.31/lib/PDF/FromHTML/Template/Container/PageDef.pm#L140\" rel=\"nofollow noreferrer\">PDF::FromHTML::Template::Container::PageDef</a>. Notice the line:</p>\n\n<pre><code>last if $::x++ &gt; 10;\n</code></pre>\n\n<p>It means it will never create more than 11 pages. I have filed a <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=130568\" rel=\"nofollow noreferrer\">bug report</a></p>\n"}], "owner": {"reputation": 311, "user_id": 1006832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c65033a25e4aeaea36e8dbecf7131df?s=128&d=identicon&r=PG", "display_name": "Beeblbrox", "link": "https://stackoverflow.com/users/1006832/beeblbrox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 58086861, "answer_count": 1, "score": 1, "last_activity_date": 1569352474, "creation_date": 1569150825, "last_edit_date": 1569253156, "question_id": 58048648, "link": "https://stackoverflow.com/questions/58048648/pdffromhtml-no-anchors-and-early-termination", "title": "PDF::FromHTML No Anchors and Early Termination", "body": "<p>Further top this question: <a href=\"https://stackoverflow.com/questions/57967465/pdffromhtml-corrupt-file-and-no-output/57971662#57971662\">PDF::FromHTML - Corrupt file and no output</a></p>\n\n<p>The code in question is 'working' in that it produces a PDF document just fine, just NONE of the HTML anchors are being translated, and on larger documents the processing ceases at Page 11 of the PDF - with no error, it closes the document just fine!</p>\n\n<p>Edit: To save looking at the Question Link:</p>\n\n<pre><code>    # print \"&lt;p&gt;\".$textblob.\"&lt;/p&gt;\";\n\n    $textblob='&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;'.$textblob.'&lt;/body&gt;&lt;/html&gt;';\n\n    # $textblob = decode('UTF-8', $textblob);\n\n    my $output;\n    if(defined($query-&gt;param('PDF'))){\n        my $pdf = PDF::FromHTML-&gt;new( encoding =&gt; 'utf-8' );\n        $pdf-&gt;load_file(\\$textblob);\n        $pdf-&gt;convert(\n            # With PDF::API2, font names such as 'traditional' also works\n             Font        =&gt; 'Arial',\n             LineHeight  =&gt; 10,\n             Landscape   =&gt; 0,\n        );\n        $pdf-&gt;write_file(\\$output);\n        print $output;\n    }\n</code></pre>\n\n<p>$textblob when uncommented to print and commenting out the PDF section displays the full 400 reference adventure with links in html just fine...</p>\n\n<p>Update:In desperation here is the entire script (it's not TOO long...)</p>\n\n<pre><code>#!/usr/bin/perl\nuse cPanelUserConfig;\nuse CGI::Carp qw(fatalsToBrowser);\nuse CGI;\nuse List::Util qw(shuffle);\nuse PDF::FromHTML;\nrequire \"authenticate.pl\";\n\n$query = new CGI;\n\nif(defined($query-&gt;param('PDF'))){\n    print $query-&gt;header(-type=&gt;'application/pdf');\n}\nelse{\n    print $query-&gt;header(-charset=&gt;'utf-8');\n    &amp;html_header;\n    print \"\\n\\n\\n\\n&lt;!-- -------------------------- BEGIN: ff.net Script generated text ------------------------------------------- --&gt;\";\n    print \"Randomise working? Let me know if you find a bug.&lt;br /&gt;\";\n}\n\nif(defined($query-&gt;param('doc'))){\n    $doc=$query-&gt;param('doc').\"\\nEOF\";\n    %refhash = $doc =~ /^[\\n\\s\\t\\.\\#]*(\\d+)[\\s\\t\\.\\#\\n]+(?!\\n*^[\\n\\s\\t\\.\\#]*\\d+[\\s\\t\\.\\#\\n]+)(.+?)(?=^[\\s\\t\\.\\#\\n]*\\d+[\\s\\t\\.\\#\\n]+|EOF)/smcgi; # refhash{key}=content, where key==refnumber and content==well, ref content\n    &amp;display_refhash(\\%refhash);\n\n}\n\nelsif(defined($query-&gt;param('references'))){\n    my %anchors;\n    my $refhashref=&amp;recreate_refhash($query-&gt;param('references'),\\%anchors);\n\n    if(defined($query-&gt;param('Randomise'))){\n        $refhashref=&amp;randomise($refhashref,\\%anchors);\n        print \"Your adventure looks like this: &lt;br /&gt;&lt;br /&gt;\";\n        &amp;display_refhash($refhashref);\n    }\n    elsif(defined($query-&gt;param('Save'))){\n        &amp;save($refhashref);\n    }\n    elsif(defined($query-&gt;param('Auto-HTML Tag'))){\n        print \"Your adventure looks like this: &lt;br /&gt;&lt;br /&gt;\";\n        &amp;display_refhash($refhashref);\n    }\n    elsif(defined($query-&gt;param('Auto-ABML Tag'))){\n        &amp;autoABML($refhashref);\n        print \"Your adventure looks like this: &lt;br /&gt;&lt;br /&gt;\";\n        &amp;display_refhash($refhashref);      \n    }\n    elsif(defined($query-&gt;param('PDF'))){\n        &amp;output_pdf($refhashref);\n    }\n    else{\n        print \"undefined function call\";\n    }\n}\nelse{ # output form to input doc content\n    print \"Please input your document text into the textarea below (copy and paste should do it):\";\n    print '&lt;form method=\"post\" action=\"doc_to_refs.cgi\" enctype=\"multipart/form-data\" name=\"doc_to_refs_form\"&gt;';\n    print $query-&gt;textarea(-name=&gt;'doc',-rows=&gt;20,-cols=&gt;100, -style=&gt;\"font-family:arial;width:98%\");\n    print $query-&gt;submit('Go!');\n    print '&lt;/form&gt;';\n}\n\n&amp;html_footer;\n\n# print \"&lt;!-- -------------------------- END: ff.net Script generated text ------------------------------------------- --&gt;\";    \n\nsub recreate_refhash{\n    my %refhash;\n    my $references=shift;\n    my $anchors_ref=shift;\n    for(my $x=0;$x&lt;$references;$x++){\n        my $referencekey=\"reference\".\"$x\";\n        my $referencecontent=\"reftext\".\"$x\";\n        my $anchorname=\"anchor\".\"$x\";\n        my $deletename=\"delete\".\"$x\";\n\n        if(!defined($query-&gt;param($deletename))){\n            $refhash{$query-&gt;param($referencekey)}=$query-&gt;param($referencecontent);\n\n            if(defined($query-&gt;param($anchorname))){\n                $$anchors_ref{$query-&gt;param($anchorname)}=$x;\n            }\n        }\n    }\n\n    return \\%refhash;\n}\n\nsub randomise{\n    my $refhashref=shift;\n    my $anchor_ref=shift;\n    my %refhash=%$refhashref;\n    my %randomisedrefhash, %Xrefhash, @refstack, $ref;\n    my %anchors=%$anchor_ref;\n\n    # randomise the list\n    @refstack=shuffle sort {$a &lt;=&gt; $b} keys %refhash; # inflict an order on the pre-shuffle (therefore we can xref predicatably?) not sure this makes ANY sense i'm melting....\n\n    ## transpose anchors back to their required location\n    for($x=0;$x&lt;@refstack;$x++){\n        if(defined($anchors{$refstack[$x]})){\n            my $anchor=\\$refstack[$anchors{$refstack[$x]}];\n            my $temp=$refstack[$x];\n            $refstack[$x]=$$anchor;\n\n            print \"---Swapping $temp with \".$$anchor;\n            $$anchor=$temp;\n\n            if(defined($anchors{$refstack[$x]})){\n                if($refstack[$anchors{$refstack[$x]}] ne $$anchor){\n                    $x--;\n                }\n            }\n        }\n    }\n\n    ## randomise the refs and the content associations, and create the cross-ref hash\n    foreach $ref(sort {$a &lt;=&gt; $b} keys %refhash){\n        $key=shift @refstack;\n        $randomisedrefhash{$ref}=$refhash{$key};\n        $Xrefhash{$key}=$ref;\n    }\n\n    ## now do the content link substitutions\n    foreach $ref(keys %randomisedrefhash){\n        $randomisedrefhash{$ref}=~s/(return\\sto|go\\sto|turn\\sto)(\\s+)(page|paragraph|reference|section)*(\\s)*(\\d+)/&amp;substitute_xref($1,$2,$3,$4,$5,\\%Xrefhash)/egi;\n    }\n\n    print \"You asked for the following anchors:\";\n    foreach $key(keys %anchors){\n        print $anchors{$key};\n    }\n\n    return \\%randomisedrefhash;\n}\n\nsub substitute_xref{ ## not sure that this is necessary but the verboseness was easier to work out\n    my $pretext1=shift;\n    my $pretext2=shift;\n    my $pretext3=shift;\n    my $pretext4=shift;\n    my $link=shift;\n    my $Xrefhashref=shift;\n    my %Xrefhash=%$Xrefhashref;   \n\n    my $newlink=$Xrefhash{$link};\n\n    return \"$pretext1$pretext2$pretext3$pretext4$newlink\";\n\n}\n\nsub save{\n    print \"Will Save soon\";\n}\n\nsub display_refhash{\n    my $refhashref=shift;\n    my %refhash=%$refhashref;\n\n    print '&lt;form method=\"post\" action=\"doc_to_refs.cgi\" enctype=\"multipart/form-data\" name=\"doc_to_refs_form\"&gt;';\n    my $x=0;\n    my $ref,$textblob;\n    foreach $ref (sort {$a &lt;=&gt; $b} keys %refhash){\n        my $reference=\"reference\".\"$x\";\n        my $reftext=\"reftext\".\"$x\";\n        my $anchor=\"anchor\".\"$x\";\n        my $delete=\"delete\".\"$x\";\n        my $default=$refhash{$ref};\n\n        print \"Reference is: \".$query-&gt;textfield(-name=&gt;$reference,-value=&gt;$ref, -override=&gt;1).\"&lt;br /&gt;\";\n        print $query-&gt;checkbox_group(-name=&gt;$delete,-values=&gt;$ref,-labels=&gt;{$ref=&gt;'Delete Me'}).\"&lt;br /&gt;\";\n        print $query-&gt;checkbox_group(-name=&gt;$anchor,-values=&gt;$ref, -labels=&gt;{$ref=&gt;'Anchor Me (Will NOT get Randomised)'}).\"&lt;br /&gt;\";\n        print \"Content is: \".$query-&gt;textarea(-name=&gt;$reftext, -default=&gt;$default, -rows=&gt;5, -override=&gt;1, -cols=&gt;100, -style=&gt;\"font-family:arial;width:98%\").\"&lt;br /&gt;\";\n        print \"&lt;br /&gt;&lt;br /&gt;\";\n\n        if((defined($query-&gt;param('Auto-HTML Tag'))) or (defined($query-&gt;param('PDF')))){\n            $ref=~s/(\\d+)/\\&lt;a id\\=\\\"$1\\\"\\&gt;$1\\&lt;\\/a\\&gt;/gi;\n            $default=~s/(return\\sto|go\\sto|turn\\sto)(\\s+)(page|paragraph|reference|section)*(\\s*)(\\d+)/\\&lt;a href\\=\\\"\\#$5\\\"\\&gt;$1 $2 $3 $4 $5\\&lt;\\/a\\&gt;/gi;\n        }       \n\n        if(defined($query-&gt;param('Auto-ABML Tag'))){\n            # $ref=~s/(\\d+)/\\&lt;a id\\=\\\"$1\\\"\\&gt;$1\\&lt;\\/a\\&gt;/gi;\n            $default=~s/(return\\sto|go\\sto|turn\\sto)(\\s+)(page|paragraph|reference|section)*(\\s*)(\\d+)/\\&amp;lt\\;tt ref\\=\\\"$5\\\"\\&amp;gt\\;$1 $2 $3 $4 $5\\&amp;lt\\;\\/tt\\&amp;gt\\;/gi;\n        }       \n\n        $textblob.=$ref.\" \".$default.\"&lt;br /&gt;&lt;br /&gt;\";\n\n        $x++;\n    }\n\n    print $query-&gt;hidden(-name=&gt;'references',-value=&gt;$x,override=&gt;1);\n#   print $query-&gt;submit(-name=&gt;'Save');\n    print $query-&gt;submit('Randomise');\n    print $query-&gt;submit('Auto-ABML Tag');  \n    print $query-&gt;submit('Auto-HTML Tag');  \n    print $query-&gt;submit('PDF');    \n    print \"&lt;/form&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;\";\n    $textblob=~s/\\n/\\&lt;br \\/\\&gt;/gi;\n\n    print \"&lt;p&gt;\".$textblob.\"&lt;/p&gt;\";\n\n}\n\nsub output_pdf{\n    my $refhashref=shift;\n    my %refhash=%$refhashref;\n\n    my $x=0;\n    my $ref,$textblob;\n    foreach $ref (sort {$a &lt;=&gt; $b} keys %refhash){\n        my $reference=\"reference\".\"$x\";\n        my $reftext=\"reftext\".\"$x\";\n        my $anchor=\"anchor\".\"$x\";\n        my $delete=\"delete\".\"$x\";\n        my $default=$refhash{$ref};\n\n        if((defined($query-&gt;param('Auto-HTML Tag'))) or (defined($query-&gt;param('PDF')))){\n            $ref=~s/(\\d+)/\\&lt;a id\\=\\\"$1\\\"\\&gt;$1\\&lt;\\/a\\&gt;/gi;\n            $default=~s/(return\\sto|go\\sto|turn\\sto)(\\s+)(page|paragraph|reference|section)*(\\s*)(\\d+)/\\&lt;a href\\=\\\"\\#$5\\\"\\&gt;$1 $2 $3 $4 $5\\&lt;\\/a\\&gt;/gi;\n        }       \n\n        if(defined($query-&gt;param('Auto-ABML Tag'))){\n            # $ref=~s/(\\d+)/\\&lt;a id\\=\\\"$1\\\"\\&gt;$1\\&lt;\\/a\\&gt;/gi;\n            $default=~s/(return\\sto|go\\sto|turn\\sto)(\\s+)(page|paragraph|reference|section)*(\\s*)(\\d+)/\\&amp;lt\\;tt ref\\=\\\"$5\\\"\\&amp;gt\\;$1 $2 $3 $4 $5\\&amp;lt\\;\\/tt\\&amp;gt\\;/gi;\n        }       \n\n        $textblob.=$ref.\" \".$default.\"&lt;br /&gt;&lt;br /&gt;\";\n\n        $x++;\n    }\n\n    $textblob=~s/\\n/\\&lt;br \\/\\&gt;/gi;\n\n    # print \"&lt;p&gt;\".$textblob.\"&lt;/p&gt;\";\n\n    $textblob='&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;'.$textblob.'&lt;/body&gt;&lt;/html&gt;';\n\n    my $output;\n    if(defined($query-&gt;param('PDF'))){\n        my $pdf = PDF::FromHTML-&gt;new( encoding =&gt; 'utf-8' );\n        $pdf-&gt;load_file(\\$textblob);\n        $pdf-&gt;convert(\n            # With PDF::API2, font names such as 'traditional' also works\n             Font        =&gt; 'Arial',\n             LineHeight  =&gt; 10,\n             Landscape   =&gt; 0,\n        );\n        $pdf-&gt;write_file(\\$output);\n        print $output;\n    }\n}\n\nsub html_header{\n\n}\n\nsub html_footer{\n\n}\n</code></pre>\n\n<p>If you want sample data let me know I'll upload it somewhere</p>\n"}, {"tags": ["perl", "syntax"], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1569123080, "post_id": 58045600, "comment_id": 102491262, "body": "wow, this is a surprise (to me). I&#39;d expect that it evaluates the comma, print warnings (twice), and use the last value.   And if I try to do this with a variable (<code>$v=$x,$y,$z</code>) it assigns <code>1</code> (success?) with warnings, and with parens around the list it does what I expected.  But if I add parens around the list in the hash key evaluation it still does what you say! I see this very example in perldoc -- but why? When is this <code>join</code> with <code>$;</code> triggered -- in what other contexts does that happen?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1569123488, "post_id": 58045600, "comment_id": 102491308, "body": "@zdim, The key expression is normally evaluated in scalar context. But when the it&#39;s the list/comma operator, a <code>join</code> is thrown in and it&#39;s evaluated in list context. The <code>l</code> after <code>entersub</code> means list context in <code>perl -MO=Concise,-exec -e&#39;$h{f(),g()}&#39;</code>. Change it to <code>$h{f()}</code>, and it becomes <code>s</code> for scalar context. /// This is the only place <code>$;</code> is used."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569140668, "post_id": 58045600, "comment_id": 102493690, "body": "@zdim <a href=\"https://perldoc.perl.org/perldata.html#Multi-dimensional-array-emulation\" rel=\"nofollow noreferrer\">perldoc.perl.org/&hellip;</a> - this is a perl4 feature that was retained in perl5"}, {"owner": {"reputation": 478, "user_id": 3261294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e04c85709847a658e1699565b21a363?s=128&d=identicon&r=PG&f=1", "display_name": "BarneySchmale", "link": "https://stackoverflow.com/users/3261294/barneyschmale"}, "edited": false, "score": 0, "creation_date": 1569143045, "post_id": 58045600, "comment_id": 102494172, "body": "After many years or programming with Perl I never knew this peculiar feature. Is there a Perl::Critic::Policy that warns about using this syntax?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 478, "user_id": 3261294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e04c85709847a658e1699565b21a363?s=128&d=identicon&r=PG&f=1", "display_name": "BarneySchmale", "link": "https://stackoverflow.com/users/3261294/barneyschmale"}, "edited": false, "score": 0, "creation_date": 1569349699, "post_id": 58045600, "comment_id": 102566155, "body": "@BarneySchmale Not that I can find, but I added an <a href=\"https://github.com/Grinnz/Perl-Critic-Freenode/issues/35\" rel=\"nofollow noreferrer\">issue</a> to remind myself to add one to Perl::Critic::Freenode."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 9, "last_activity_date": 1569123932, "last_edit_date": 1569123932, "creation_date": 1569119939, "answer_id": 58045600, "question_id": 58045349, "link": "https://stackoverflow.com/questions/58045349/perl-whats-the-meaning-of-hashnamea-b-c-d/58045600#58045600", "title": "Perl: What&#39;s the meaning of $hashName{&quot;a&quot;,&quot;b&quot;,&quot;c&quot;} = &quot;d&quot;;?", "body": "<pre><code>$foo{$x, $y, $z}\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>$foo{join($;, $x, $y, $z)}\n</code></pre>\n\n<p>where <code>$;</code> defaults to a control character (<code>\"\\x1C\"</code>).</p>\n\n<hr>\n\n<p>Not just similar...</p>\n\n<pre><code>$ diff \\\n   &lt;( perl -MO=Concise,-exec -e'$foo{$x,$y,$z}' 2&gt;&amp;1 ) \\\n   &lt;( perl -MO=Concise,-exec -e'$foo{join($;,$x,$y,$z)}' 2&gt;&amp;1 ) \\\n   &amp;&amp; echo identical\nidentical\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 10216792, "user_type": "registered", "profile_image": "https://graph.facebook.com/1705942696083276/picture?type=large", "display_name": "Benjy Strauss", "link": "https://stackoverflow.com/users/10216792/benjy-strauss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1569123932, "creation_date": 1569115403, "question_id": 58045349, "link": "https://stackoverflow.com/questions/58045349/perl-whats-the-meaning-of-hashnamea-b-c-d", "title": "Perl: What&#39;s the meaning of $hashName{&quot;a&quot;,&quot;b&quot;,&quot;c&quot;} = &quot;d&quot;;?", "body": "<p>I'm trying to convert a large perl program to Java.  In an initialization function, it creates a hash using parentheses and then starts assigning values. But then the keys become pairs and triplets of comma-separated strings.  What does it mean?</p>\n\n<pre><code> %par=( ...  )\n\n $par{\"symbolChainAny\"}=     \"*\";   # chain name if ...\n $par{\"acc2Thresh\"}=         16;    # threshold for...\n $par{\"txt\",\"copyright\"}=       \"elided\";\n $par{\"txt\",\"contactEmail\"}=    \"elided\";\n\n $par{\"txt\",\"modepred\",\"sec\"}=  \"prediction of secondary structure\";\n $par{\"txt\",\"modepred\",\"cap\"}=  \"prediction of secondary structure caps\";```\n\n</code></pre>\n"}, {"tags": ["bash", "shell", "perl", "awk"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1569106246, "post_id": 58044397, "comment_id": 102489416, "body": "<a href=\"https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question\" title=\"why is can someone help me not an actual question\">meta.stackoverflow.com/questions/284236/&hellip;</a>"}, {"owner": {"reputation": 19, "user_id": 8263666, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211608141073421/picture?type=large", "display_name": "Dedy K Wijaya", "link": "https://stackoverflow.com/users/8263666/dedy-k-wijaya"}, "reply_to_user": {"reputation": 96909, "user_id": 3030305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En2fP.png?s=128&g=1", "display_name": "John1024", "link": "https://stackoverflow.com/users/3030305/john1024"}, "edited": false, "score": 1, "creation_date": 1569153771, "post_id": 58044397, "comment_id": 102496589, "body": "@John1024 well noted sir, thanks for the advice"}], "answers": [{"comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 2, "creation_date": 1569106714, "post_id": 58044633, "comment_id": 102489481, "body": "To get rid of <code>sed</code> with GNU <code>awk</code>: Add to your BEGIN section <code>FS=&quot;[^0-9]*&quot;</code> and replace both <code>$3</code> with <code>$4</code>, <code>$2</code> with <code>$3</code> and <code>$1</code> with <code>$2</code>."}, {"owner": {"reputation": 3820, "user_id": 10678955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gRpbG.jpg?s=128&g=1", "display_name": "root", "link": "https://stackoverflow.com/users/10678955/root"}, "reply_to_user": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1569129900, "post_id": 58044633, "comment_id": 102492007, "body": "I wasn&#39;t aware that <code>FS</code> could be a regex - post edited - Thanks @Cyrus!!"}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1569141009, "post_id": 58044633, "comment_id": 102493760, "body": "From <code>man awk</code> (GNU awk): <i>If FS is a single character, fields are separated by that character. If FS is the null string, then each individual character becomes a separate field. Otherwise, FS is expected to be a full regular expression.</i>"}, {"owner": {"reputation": 19, "user_id": 8263666, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211608141073421/picture?type=large", "display_name": "Dedy K Wijaya", "link": "https://stackoverflow.com/users/8263666/dedy-k-wijaya"}, "edited": false, "score": 0, "creation_date": 1569154684, "post_id": 58044633, "comment_id": 102496800, "body": "just wanna make sure <code>[^0-9]</code> means NOT ONE of the characters right?"}, {"owner": {"reputation": 3820, "user_id": 10678955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gRpbG.jpg?s=128&g=1", "display_name": "root", "link": "https://stackoverflow.com/users/10678955/root"}, "edited": false, "score": 0, "creation_date": 1569200192, "post_id": 58044633, "comment_id": 102506860, "body": "Correct, <code>^</code> it means none of the rest of the characters appearing within the brackets."}], "tags": [], "owner": {"reputation": 3820, "user_id": 10678955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gRpbG.jpg?s=128&g=1", "display_name": "root", "link": "https://stackoverflow.com/users/10678955/root"}, "is_accepted": true, "score": 1, "last_activity_date": 1569129855, "last_edit_date": 1569129855, "creation_date": 1569105501, "answer_id": 58044633, "question_id": 58044397, "link": "https://stackoverflow.com/questions/58044397/how-i-make-a-list-of-missing-integer-from-a-sequence-using-bash/58044633#58044633", "title": "How I make a list of missing integer from a sequence using bash", "body": "<p><strong>EDITED</strong> (Thanks @Cyrus!)</p>\n\n<p>AWK is your friend:</p>\n\n<pre><code>#!/usr/bin/awk\n\nBEGIN {\n    FS=\"[^0-9]*\"\n    last_seq = 0;\n    next_serial = 0;\n}\n\n{\n    cur_seq = $2;\n    cur_serial = $3;\n    if (cur_seq != last_seq) {\n        last_seq = cur_seq;\n        ts = $4\n        prev = cur_serial;\n    } else {\n        if (cur_serial == next_serial) {\n            ts = $4;\n        } else {\n            for (i = next_serial; i &lt; cur_serial; i++) {\n                print \"EDR_MPU\" last_seq \"_\" i \"_\" ts \".csv.gz\"\n            }\n        }\n    }\n    next_serial = cur_serial + 1;\n}\n</code></pre>\n\n<p>And then you do:</p>\n\n<pre><code>$ &lt; files_190911.csv awk -f script.awk \nEDR_MPU023_12_20190911083544.csv.gz\nEDR_MPU023_13_20190911083544.csv.gz\nEDR_MPU024_53_20190911235501.csv.gz\nEDR_MPU025_27_20190911000302.csv.gz\nEDR_MPU025_28_20190911000302.csv.gz\n</code></pre>\n\n<p>The assignment to <code>FS=</code> splits lines by the regex. The rest program detects holes in sequences and prints them with the appropriate timestamp.</p>\n"}], "owner": {"reputation": 19, "user_id": 8263666, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211608141073421/picture?type=large", "display_name": "Dedy K Wijaya", "link": "https://stackoverflow.com/users/8263666/dedy-k-wijaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 58044633, "answer_count": 1, "score": -1, "last_activity_date": 1569153645, "creation_date": 1569102978, "last_edit_date": 1569153645, "question_id": 58044397, "link": "https://stackoverflow.com/questions/58044397/how-i-make-a-list-of-missing-integer-from-a-sequence-using-bash", "title": "How I make a list of missing integer from a sequence using bash", "body": "<p>I have a file let's say <strong>files_190911.csv</strong> whose contents are as follows.</p>\n\n<blockquote>\n  <p>EDR_MPU023_<strong>09</strong>_20190911080534.csv.gz<br>\n  EDR_MPU023_<strong>10</strong>_20190911081301.csv.gz<br>\n  EDR_MPU023_<strong>11</strong>_<strong>20190911083544</strong>.csv.gz<br>\n  EDR_MPU023_<strong>14</strong>_20190911091405.csv.gz<br>\n  EDR_MPU023_<strong>15</strong>_20190911105513.csv.gz<br>\n  EDR_MPU023_<strong>16</strong>_20190911105911.csv.gz<br>\n  EDR_MPU024_<strong>50</strong>_20190911235332.csv.gz<br>\n  EDR_MPU024_<strong>51</strong>_20190911235400.csv.gz<br>\n  EDR_MPU024_<strong>52</strong>_<strong>20190911235501</strong>.csv.gz<br>\n  EDR_MPU024_<strong>54</strong>_20190911235805.csv.gz<br>\n  EDR_MPU024_<strong>55</strong>_20190911235937.csv.gz<br>\n  EDR_MPU025_<strong>24</strong>_20190911000050.csv.gz<br>\n  EDR_MPU025_<strong>25</strong>_20190911000155.csv.gz<br>\n  EDR_MPU025_<strong>26</strong>_<strong>20190911000302</strong>.csv.gz<br>\n  EDR_MPU025_<strong>29</strong>_20190911000624.csv.gz<br></p>\n</blockquote>\n\n<p>I want to make a list of missing sequence from those using bash script. <br> \nEvery <strong>MPUXXX</strong> has its own sequence. So there are multiple series of sequences in that file.<br>\nThe datetime for missing list will use from previous sequence. <br> \nFrom the sample above, the result will be like this. <br></p>\n\n<blockquote>\n  <p>EDR_MPU023_<strong>12_20190911083544</strong>.csv.gz<br>\n  EDR_MPU023_<strong>13_20190911083544</strong>.csv.gz<br>\n  EDR_MPU024_<strong>53_20190911235501</strong>.csv.gz<br>\n  EDR_MPU025_<strong>27_20190911000302</strong>.csv.gz<br>\n  EDR_MPU025_<strong>28_20190911000302</strong>.csv.gz<br></p>\n</blockquote>\n\n<p>It would be simpler if there were only a single sequence. \nSo I can use something like this.</p>\n\n<pre><code>awk '{for(i=p+1; i&lt;$1; i++) print i} {p=$1}'\n</code></pre>\n\n<p>But I know this can't be used for multiple sequence.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1569100647, "post_id": 58044115, "comment_id": 102488595, "body": "See <a href=\"https://stackoverflow.com/a/44957490/589924\">this answer</a> for code that has to work around this optimization :)"}], "tags": [], "owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "is_accepted": true, "score": 4, "last_activity_date": 1569100092, "creation_date": 1569100092, "answer_id": 58044115, "question_id": 58044049, "link": "https://stackoverflow.com/questions/58044049/why-is-the-refcount-for-a-sub-higher-than-for-an-array/58044115#58044115", "title": "Why is the refcount for a sub higher than for an array?", "body": "<p>In the case where a closure isn't involved (i.e. the sub doesn't refer to any outer lexical variables), perl optimises things by sharing the sub (CV) rather than cloning it. So the first ref is for the \"prototype\" sub created at compile time, with an additional ref for each $subref created at runtime (an RV pointing at the original CV).</p>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 1, "accepted_answer_id": 58044115, "answer_count": 1, "score": 0, "last_activity_date": 1569100092, "creation_date": 1569099605, "question_id": 58044049, "link": "https://stackoverflow.com/questions/58044049/why-is-the-refcount-for-a-sub-higher-than-for-an-array", "title": "Why is the refcount for a sub higher than for an array?", "body": "<p>I have this test program:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Devel::Refcount qw( refcount );\nmy $subref = sub {1};\nprintf \"\\$subref has REFCNT=%d\\n\", refcount( $subref );\nmy $arrayref = [];\nprintf \"\\$arrayref has REFCNT=%d\\n\", refcount( $arrayref );\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>$subref has REFCNT=2\n$arrayref has REFCNT=1\n</code></pre>\n\n<p>Why is the reference count for the <code>sub</code> 2 (I expected it to be 1 as for the array ref)?</p>\n"}, {"tags": ["perl", "select", "io"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1569053339, "post_id": 58038328, "comment_id": 102477887, "body": "<i>&quot;... how can the perl I/O loop keep the child process from doing it&#39;s exit?&quot;</i> - I think this is the wrong question. It is the decision of the program itself to exit, not of the parent process (i.e. your perl program). So you need to ask what are the conditions inside the child program which make it exit and how these conditions change if the program is running inside a normal shell or inside your program. Given that this problem seems to happen only with a specific command you need to look at this command. Unfortunately you don&#39;t provide any further information about this so we cannot help."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1569053349, "post_id": 58038328, "comment_id": 102477888, "body": "So the <code>while</code> loop completes but the child stays afterwards? (What when the program completes?)  What kind of a thing is the <code>$command</code> itself?  That can surely lock things up if it wants."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569057072, "post_id": 58038328, "comment_id": 102478639, "body": "&quot;Hung&quot; is not an actual state. What is its actual state (e.g, as obtained using <code>ps</code>)? I would expect it to be a zombie since you don&#39;t reap it anywhere."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1569057229, "post_id": 58038328, "comment_id": 102478668, "body": "Tip: <code>!defined($bytesRead)</code> is an error. <code>defined($bytesRead) &amp;&amp; $bytesRead == 0</code> is not an error, so it&#39;s not valid to use <code>$!</code> then. It just means that EOF has been reached. <code>$bytesRead &lt; 0</code> can&#39;t happen."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569057388, "post_id": 58038328, "comment_id": 102478701, "body": "Tip: If <code>$outH==$errH</code> is possible, then you can write the same message to the log file twice. If <code>$outH==$errH</code> isn&#39;t possible, you should be using <code>elsif</code> instead of <code>if</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569057479, "post_id": 58038328, "comment_id": 102478716, "body": "Tip: <code>sysread</code> returns immediately if there&#39;s any data to read (even if it&#39;s less than the requested amount), so there&#39;s no point in requesting such a small amount (1024). I would consider 4*1024 or 8*1024 an absolute minimum."}, {"owner": {"reputation": 2311, "user_id": 1795483, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tDYbt.jpg?s=128&g=1", "display_name": "David Ljung Madison Stellar", "link": "https://stackoverflow.com/users/1795483/david-ljung-madison-stellar"}, "edited": false, "score": 0, "creation_date": 1569203411, "post_id": 58038328, "comment_id": 102507308, "body": "Thanks for all the help.  Here are some answers:  1) I don&#39;t have much control over the child program, but I can&#39;t imagine how it would know it would be running inside this loop, and I know the child is not maliciously getting stuck. 2) The child is not a zombie process, it&#39;s just stuck running after it would have normally terminated (as it does if I run the command without gathering output in this select loop 3) I&#39;ll look at the bytesRead error 4) In this case I am not worried about $outH==$errH 5) I can look at increasing the sysread amount, but I doubt that would be causing this issue"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569225747, "post_id": 58038328, "comment_id": 102513225, "body": "Thanks for response.  I still don&#39;t get what the program behavior is -- &quot;<i>sits in a hung state.</i>&quot; -- do you mean that the program locks up (hangs) in/after that <code>while</code>?  If not then how do you know what the child does?  (Logs never completed and <code>ps</code> shows the process ... in what state?)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569226053, "post_id": 58038328, "comment_id": 102513355, "body": "Is this deadlocking? (Does the code drop out of that <code>while</code> or not?)"}, {"owner": {"reputation": 2311, "user_id": 1795483, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tDYbt.jpg?s=128&g=1", "display_name": "David Ljung Madison Stellar", "link": "https://stackoverflow.com/users/1795483/david-ljung-madison-stellar"}, "edited": false, "score": 0, "creation_date": 1569347059, "post_id": 58038328, "comment_id": 102565102, "body": "The child never exits though it otherwise appears to run fine, and my code stays in the while loop.  But as mentioned, when I run the same command outside of this code it terminates as expected."}, {"owner": {"reputation": 2311, "user_id": 1795483, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tDYbt.jpg?s=128&g=1", "display_name": "David Ljung Madison Stellar", "link": "https://stackoverflow.com/users/1795483/david-ljung-madison-stellar"}, "edited": false, "score": 0, "creation_date": 1569347098, "post_id": 58038328, "comment_id": 102565128, "body": "I&#39;m not even sure how I could write the external command to be aware of whether it was being run from this select loop or just from the command-line if I wanted to, which made me suspect that something was wrong with my select loop."}, {"owner": {"reputation": 2311, "user_id": 1795483, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tDYbt.jpg?s=128&g=1", "display_name": "David Ljung Madison Stellar", "link": "https://stackoverflow.com/users/1795483/david-ljung-madison-stellar"}, "edited": false, "score": 0, "creation_date": 1569437801, "post_id": 58038328, "comment_id": 102600755, "body": "Okay - I&#39;ve been able to reduce the length of the child process from &gt;4 hours and have been able to run some tests, so I&#39;ll update the question."}, {"owner": {"reputation": 2311, "user_id": 1795483, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tDYbt.jpg?s=128&g=1", "display_name": "David Ljung Madison Stellar", "link": "https://stackoverflow.com/users/1795483/david-ljung-madison-stellar"}, "edited": false, "score": 0, "creation_date": 1569438460, "post_id": 58038328, "comment_id": 102601051, "body": "See the last two paragraphs, after the horizontal-rule in the question for the new info."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569440004, "post_id": 58038328, "comment_id": 102601653, "body": "Can give an example of how <code>$command</code> looks like? Also show how the handles <code>SYSOUT</code>, <code>SYSERR</code>, and <code>SYSLOG</code> are set up"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569441017, "post_id": 58038328, "comment_id": 102602072, "body": "Also as noted by @ikegami, you should probably check if <code>$bytesRead</code> is defined before doing the check <code>if ($bytesRead &lt;= 0)</code>. If it is not defined an error has occured. <code>syswrite</code> may also return <code>undef</code> indicating an error has occured"}, {"owner": {"reputation": 2311, "user_id": 1795483, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tDYbt.jpg?s=128&g=1", "display_name": "David Ljung Madison Stellar", "link": "https://stackoverflow.com/users/1795483/david-ljung-madison-stellar"}, "edited": false, "score": 0, "creation_date": 1569444150, "post_id": 58038328, "comment_id": 102603314, "body": "Yes - I&#39;ve changed it to:   &quot;if (!defined($bytesRead) || $bytesRead == 0) {&quot;"}, {"owner": {"reputation": 2311, "user_id": 1795483, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tDYbt.jpg?s=128&g=1", "display_name": "David Ljung Madison Stellar", "link": "https://stackoverflow.com/users/1795483/david-ljung-madison-stellar"}, "edited": false, "score": 0, "creation_date": 1569444206, "post_id": 58038328, "comment_id": 102603334, "body": "The command that is called is another perl script that calls a variety of other tools, and I don&#39;t have access to the source of all of them nor an easy way to find out how they handle I/O at all the other levels.  But the question is still raised - how could you possibly make a child that would act this way if you wanted to??"}, {"owner": {"reputation": 2311, "user_id": 1795483, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tDYbt.jpg?s=128&g=1", "display_name": "David Ljung Madison Stellar", "link": "https://stackoverflow.com/users/1795483/david-ljung-madison-stellar"}, "edited": false, "score": 0, "creation_date": 1569444219, "post_id": 58038328, "comment_id": 102603338, "body": "SYSOUT, SYSERR and SYSLOG are all appending to files."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569446572, "post_id": 58038328, "comment_id": 102604086, "body": "It can get stuck in the outer while loop if  <code>$sel-&gt;remove()</code> is not called, but from your code it seems that cannot happen. Anyway, try to add this line at the top of the outer <code>while</code> loop: <code>syswrite(SYSOUT,&quot;count: &quot; . $sel-&gt;count() . &quot;\\n&quot;);</code> . It should give you some more information about what is going on"}, {"owner": {"reputation": 2311, "user_id": 1795483, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tDYbt.jpg?s=128&g=1", "display_name": "David Ljung Madison Stellar", "link": "https://stackoverflow.com/users/1795483/david-ljung-madison-stellar"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569447201, "post_id": 58038328, "comment_id": 102604284, "body": "@H&#229;konH&#230;gland - is at 2 until the exit, then it&#39;s at 1"}, {"owner": {"reputation": 2311, "user_id": 1795483, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tDYbt.jpg?s=128&g=1", "display_name": "David Ljung Madison Stellar", "link": "https://stackoverflow.com/users/1795483/david-ljung-madison-stellar"}, "edited": false, "score": 0, "creation_date": 1569447373, "post_id": 58038328, "comment_id": 102604337, "body": "Interesting - if I use the timeout for can_read and call it multiple times after the process exits, then it finally gets the read of 0 bytes for $errH and closes it.  But it takes about 10 seconds and multiple can_read() attempts - but doesn&#39;t work if I don&#39;t specify the timeout.  I&#39;m beginning to suspect this is a perl bug where can_read is getting hung and not noticing the closing/exiting."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569467618, "post_id": 58038328, "comment_id": 102608220, "body": "Re &quot;<i>if I use the timeout for can_read and call it multiple times after the process exits, then it finally gets the read of 0 bytes for $errH and closes</i>&quot;, That indicates that the program you actually ran used some buffered I/O (readline, read or eof). These read data from the system and places it in a buffer, so there is nothing left to read as far as the system (select) is concerned. That&#39;s why you have to use sysread and nothing else."}, {"owner": {"reputation": 2311, "user_id": 1795483, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tDYbt.jpg?s=128&g=1", "display_name": "David Ljung Madison Stellar", "link": "https://stackoverflow.com/users/1795483/david-ljung-madison-stellar"}, "edited": false, "score": 0, "creation_date": 1569627182, "post_id": 58038328, "comment_id": 102670523, "body": "I don&#39;t understand entirely - why is it that the can_read() hangs indefinitely, but if I call can_read(&lt;timeout&gt;) it is able to realize that the handle closes?"}], "owner": {"reputation": 2311, "user_id": 1795483, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tDYbt.jpg?s=128&g=1", "display_name": "David Ljung Madison Stellar", "link": "https://stackoverflow.com/users/1795483/david-ljung-madison-stellar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1569438433, "creation_date": 1569052432, "last_edit_date": 1569438433, "question_id": 58038328, "link": "https://stackoverflow.com/questions/58038328/ioselect-loop-is-somehow-keeping-child-from-exiting", "title": "IO::Select loop is somehow keeping child from exiting?", "body": "<p>I have a perl IO::Select loop for running a command (with no stdin) and saving it's output into a variety of logs.</p>\n\n<p>It's worked great for a number of years, but suddenly it's misbehaving with one particular command.  The command runs to completion and exits properly if it's run from the command line, but when I run it from this perl code then after it's done (as seen from the logs) the child process won't exit, and it just sits in a hung state.  I don't have strace rights on the systems this is happening on, so I can't see exactly what is stuck.</p>\n\n<p>The code is essentially:</p>\n\n<pre><code>    # Start process\n    open(local *nostdin, '&lt;', '/dev/null') or die $!;\n    my $pid = open3('&lt;&amp;nostdin',\n       my $outH = gensym(),\n       my $errH = gensym(),\n       $command\n    );\n\n    # Setup select\n    my $sel = IO::Select-&gt;new();\n    $sel-&gt;add($outH);\n    $sel-&gt;add($errH);\n\n    # Select loop\n    while (my @ready = $sel-&gt;can_read()) {\n        foreach my $handle (@ready) {\n            my $bytesRead = sysread($handle, my $buf='', 1024);\n            if ($bytesRead &lt;= 0) {\n                warn(\"Error reading command out $!\\n  Command: $command\\n\") if $bytesRead;\n                $sel-&gt;remove($handle);\n                next;\n            }\n            if ($handle==$outH) {\n                syswrite(SYSOUT,$buf) if $stdoutOpen;\n                syswrite(SYSLOG,$buf) if $logOpen;\n            }\n            if ($handle==$errH) {\n                syswrite(SYSERR,$buf) if $stderrOpen;\n                syswrite(SYSLOG,$buf) if $logOpen;\n            }\n        }\n    }\n</code></pre>\n\n<p>Is there anything I could be doing wrong?  And even if there is a mistake, how can the perl I/O loop keep the child process from doing it's exit?  It seems once the child exits it would close all it's I/O and we'd finish this loop (as has always been the case with this code).</p>\n\n<hr>\n\n<p>I've done some tests using waitPid and some output, and it looks like the $outH is closing, but $errH never has any data and never closes, and then I can see from waitPid that the child has exiting.</p>\n\n<p>So I open two pipes, for child out and child err.  The child uses the output pipe and never the error pipe.  Then the child closes the output pipe and exits, somehow this exit isn't closing the error pipe.  How is this happening?  Is this something a child could even do on purpose?</p>\n"}, {"tags": ["file", "perl", "find"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1569044930, "post_id": 58037486, "comment_id": 102476524, "body": "When I run the script you show, adapted to process my directory structure and look for my files, I get error messages about inaccessible directories, but the code continues to look in other directories after that.  I&#39;m using Perl 5.28.2, (on a Mac running macOS 10.14.6 Mojave) if that helps at all."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1569052700, "post_id": 58037486, "comment_id": 102477747, "body": "@JonathanLeffler I also find that that is indeed only a warning, but the search does fail to produce results (v5.16 and v5.30).  However, once <code>chdir</code>-ing is disabled in options then it all works. I don&#39;t know why."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569829757, "post_id": 58037486, "comment_id": 102708818, "body": "I added to my answer another, cleaner, way to solve this (by <code>preprocess</code>-ing)"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1569903973, "last_edit_date": 1569903973, "creation_date": 1569052221, "answer_id": 58038296, "question_id": 58037486, "link": "https://stackoverflow.com/questions/58037486/find-file-in-perl-skip-permission-denied/58038296#58038296", "title": "Find file in Perl \u2014&#160;skip permission denied", "body": "<p>The <code>Permission denied</code> (for <code>cd</code>) is only a warning for me (managed using a <code>$SIG{__WARN__}</code> hook as below), so the program isn't getting killed.</p>\n\n<p>However, the search does get hampered, I suspect by the fact that in <a href=\"https://perldoc.perl.org/File/Find.html\" rel=\"nofollow noreferrer\"><code>find</code> operation</a></p>\n\n<blockquote>\n  <p>Additionally, for each directory found, it will <code>chdir()</code> into that directory and continue the search, invoking the <code>&amp;wanted</code> function on each file or subdirectory in the directory.</p>\n</blockquote>\n\n<p>and apparently once this <code>chdir</code> is foiled the search fails and I get no results.  (Note added -- on another system the search works, except for the no-no directory of course and with the warning.  But this clearly needs fixing.)</p>\n\n<p>I see two ways around this: use <code>preprocess</code> option to filter out directories, or disable <code>chdir</code>.</p>\n\n<p>&emsp; <strong>&mdash; Use <code>preprocess</code> option to filter out directories with bad permissions</strong></p>\n\n\n\n<p>The <code>preprocess</code> option invokes a user given subroutine, which receives the list of entries (in the current directory, to be processed) and should return a list, of entries that will then be processed. </p>\n\n<p>So we can check the input list of entries (in <code>@_</code>) for directories with bad permissions and exclude them from the return list, so they are never attempted</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse File::Find;\n\nmy @dirpath = @ARGV ? @ARGV : die \"Usage: $0 dir-list\\n\";\n\nmy @files;\n\nfind( { \n    wanted =&gt; sub { \n        push @files, $File::Find::name \n            if -f $File::Find::name and /\\.txt$/ \n    },  \n    preprocess =&gt; sub { \n        #say \"--&gt; Reading: $File::Find::dir\";         \n        return grep { not (-d and (not -x or not -r)) } @_; \n    }\n}, @dirpath); \n\nsay for @files;\n</code></pre>\n\n<p>In the <code>return</code> statement we filter out directories that are non-executable or unreadable.  See <a href=\"https://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">-X (filetest) operators</a>. That statement can be rewritten to print names for logging etc.</p>\n\n<p>&emsp; &nbsp; <strong>&mdash; Disable the <code>chdir</code>-ing, via the <code>no_chdir</code> option</strong></p>\n\n\n\n<p>When <code>chdir</code> to the directory (before listing its contents) is suppressed the search works overall. I don't know why the whole search fails with <code>chdir</code> but works without it.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse File::Find;\n\n$SIG{__WARN__} = sub { warn \"WARN: @_\" };  # manage the warnings\n\nsub bad_perm {\n    push @files, $File::Find::name \n        if (-f $File::Find::name and /\\.txt$/);\n};\n\nmy @dirpath = @ARGV ? @ARGV : die \"Usage: $0 dir-list\\n\";\n\nmy @files;\n\nfind( { no_chdir =&gt; 1, wanted =&gt; \\&amp;bad_perm }, @dirpath );\n\nsay for @files;\n</code></pre>\n\n<p>Now the search runs fine and assembles the correct list of (<code>.txt</code>) files.</p>\n\n<p>Along with that a warning is printed, now for <code>opendir</code></p>\n\n<pre>\nCan't opendir(tmp/this_belongs_to_root): Permission denied\n</pre>\n\n<p>The warning can be manipulated as you please in the <code>$SIG{__WARN__}</code> subroutine.  If you don't want to see this warning then re-emit warnings for all else except it, for example by</p>\n\n<pre><code>$SIG{__WARN__} = sub { \n    warn @_  unless $_[0] =~ /^Can't opendir\\(.*?: Permission denied/;\n};\n</code></pre>\n\n<p>See <a href=\"https://perldoc.perl.org/perlvar.html#General-Variables\" rel=\"nofollow noreferrer\">%SIG variable</a></p>\n\n<hr>\n\n<p>I check both ways with a small hierarchy of files and directories made for this purpose, which contain a directory made by root with <code>chmod go-rwx</code> permissions (for which I duly get errors whichever way I try to touch it as a user). </p>\n\n<p>I also tweak <code>-x</code> / <code>-r</code> permissions on yet other directories and the code works as intended.</p>\n"}], "owner": {"reputation": 117, "user_id": 4448636, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-nFGT_d0g44k/AAAAAAAAAAI/AAAAAAAAAOU/1tWa-DCDtTE/photo.jpg?sz=128", "display_name": "Rajar R", "link": "https://stackoverflow.com/users/4448636/rajar-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "accepted_answer_id": 58038296, "answer_count": 1, "score": 1, "last_activity_date": 1569903973, "creation_date": 1569043150, "last_edit_date": 1569829853, "question_id": 58037486, "link": "https://stackoverflow.com/questions/58037486/find-file-in-perl-skip-permission-denied", "title": "Find file in Perl \u2014&#160;skip permission denied", "body": "<p>Trying to use the Perl script below to find script full path in sub-directories.  It needs to skip the permission denied folders, whereas it is failing in a certain sub-directory if permission is denied. </p>\n\n<p>How can I continue after a 'permission denied' problem?</p>\n\n<pre><code>use File::Find;\n\nmy @files;\nmy @dirpath=qw(/app/welogic/);\n find(sub {\n           push @files,$File::Find::name if (-f $File::Find::name      and /\\wlst.sh$/);\n      }, @dirpath);\n</code></pre>\n"}, {"tags": ["perl", "saxon", "saxon-c"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569039993, "post_id": 58034996, "comment_id": 102475983, "body": "See also <a href=\"https://metacpan.org/pod/XML::LibXSLT\" rel=\"nofollow noreferrer\">XML::LibXSLT</a> and <a href=\"https://stackoverflow.com/questions/4496515/xslt2-0-processor-for-perl\">XSLT2.0 processor for Perl?</a>. If the C bindings provided by the module isn&#39;t sufficient, you can also write your own using e.g. <a href=\"https://metacpan.org/pod/FFI::Platypus\" rel=\"nofollow noreferrer\"><code>FFI::Platypus</code></a>, <a href=\"http://www.swig.org/\" rel=\"nofollow noreferrer\">Swig</a>, <a href=\"https://perldoc.perl.org/perlxs.html\" rel=\"nofollow noreferrer\">XS</a>, or <a href=\"https://metacpan.org/pod/Inline::C\" rel=\"nofollow noreferrer\"><code>Inline::C</code></a>"}, {"owner": {"reputation": 582, "user_id": 491499, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1a3fd9927b381622b6f2471d6d89b20d?s=128&d=identicon&r=PG", "display_name": "lschult2", "link": "https://stackoverflow.com/users/491499/lschult2"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569060042, "post_id": 58034996, "comment_id": 102479234, "body": "Thanks for the suggestions.  But I need Saxon (3.1 compliant), not LibXSLT.  I can&#39;t be the first person to want to use Saxon with Perl, so someone has to have done this before.  The Saxon/C page even specifically says it can be invoked from Perl.  I&#39;m not looking to create something new here, just using Saxon with Perl the way others do it.  So how do the rest of you use Saxon with Perl?"}], "answers": [{"comments": [{"owner": {"reputation": 582, "user_id": 491499, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1a3fd9927b381622b6f2471d6d89b20d?s=128&d=identicon&r=PG", "display_name": "lschult2", "link": "https://stackoverflow.com/users/491499/lschult2"}, "edited": false, "score": 0, "creation_date": 1569256758, "post_id": 58060086, "comment_id": 102529640, "body": "Ah, that explains the statement on the Saxon website.  Thank you for that clarification.  Can you tell me more about the workaround?  I&#39;m currently running Saxon via a filehandle: open(SAXON, &quot;| java -jar saxon9he.jar -s:- -xsl:my.xsl -o:output.xml&quot;), just for the convenience of printing the XML input to STDIN; this should be equivalent to an exec with an XML file as input.  What would running the transform command from Saxon/C, avoiding the need to run Java VM, look like?  I followed the installation instructions in the readme file, then got stuck."}, {"owner": {"reputation": 561, "user_id": 1408187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8076884650c64e4cd9fd84dac0c9e3a?s=128&d=identicon&r=PG", "display_name": "ond1", "link": "https://stackoverflow.com/users/1408187/ond1"}, "reply_to_user": {"reputation": 582, "user_id": 491499, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1a3fd9927b381622b6f2471d6d89b20d?s=128&d=identicon&r=PG", "display_name": "lschult2", "link": "https://stackoverflow.com/users/491499/lschult2"}, "edited": false, "score": 0, "creation_date": 1569257210, "post_id": 58060086, "comment_id": 102529800, "body": "Please can you give details of what you got stuck with?  The Transform.c, Query.c and Validate.c files are available in Saxon-/C install in the directory &#39;command&#39;. The bash shell build script should also be in the same directory to compile and create the executable.  The executables will run in a similar way to its Java counterpart (same options are available)."}, {"owner": {"reputation": 582, "user_id": 491499, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1a3fd9927b381622b6f2471d6d89b20d?s=128&d=identicon&r=PG", "display_name": "lschult2", "link": "https://stackoverflow.com/users/491499/lschult2"}, "edited": false, "score": 0, "creation_date": 1569286128, "post_id": 58060086, "comment_id": 102538978, "body": "Got a little further by adding the include for the directory containing jni.h, but still stuck.  Seems some headers are missing, but don&#39;t see instructions on how to get the headers for MacOS <code>sh-3.2# .&#47;buildpec-command.sh -I..&#47;Saxon.C.API&#47;jni Transform.c:13:14: fatal error: &#39;windows.h&#39; file not found     #include &lt;windows.h&gt; </code>"}, {"owner": {"reputation": 561, "user_id": 1408187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8076884650c64e4cd9fd84dac0c9e3a?s=128&d=identicon&r=PG", "display_name": "ond1", "link": "https://stackoverflow.com/users/1408187/ond1"}, "reply_to_user": {"reputation": 582, "user_id": 491499, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1a3fd9927b381622b6f2471d6d89b20d?s=128&d=identicon&r=PG", "display_name": "lschult2", "link": "https://stackoverflow.com/users/491499/lschult2"}, "edited": false, "score": 0, "creation_date": 1569322161, "post_id": 58060086, "comment_id": 102551677, "body": "This is a bug. The Apple preprocessor directive is missing. See bug issue: <a href=\"https://saxonica.plan.io/issues/4317\" rel=\"nofollow noreferrer\">saxonica.plan.io/issues/4317</a> I have fixed it and added the workaround simply by replacing the files with the ones in the bug issue. i.e. Transform.c: <a href=\"https://dev.saxonica.com/repos/archive/opensource/latest9.8/hec/command/Transform.c\" rel=\"nofollow noreferrer\">dev.saxonica.com/repos/archive/opensource/latest9.8/hec/comm&zwnj;&#8203;and/&hellip;</a>"}, {"owner": {"reputation": 582, "user_id": 491499, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1a3fd9927b381622b6f2471d6d89b20d?s=128&d=identicon&r=PG", "display_name": "lschult2", "link": "https://stackoverflow.com/users/491499/lschult2"}, "edited": false, "score": 0, "creation_date": 1569341848, "post_id": 58060086, "comment_id": 102562851, "body": "Progress, but new errors now: <code>sh-3.2# .&#47;buildpec-command.sh -I..&#47;Saxon.C.API&#47;jni Transform.c:15:13: error: cannot combine with previous &#39;int&#39; declaration specifier typedef int bool;             ^ &#47;Applications&#47;Xcode.app&#47;Contents&#47;Developer&#47;Toolchains&#47;XcodeD&zwnj;&#8203;efault.xctoolchain&#47;u&zwnj;&#8203;sr&#47;lib&#47;clang&#47;10.0.1&#47;&zwnj;&#8203;include&#47;stdbool.h:31&zwnj;&#8203;:14: note: expanded from macro &#39;bool&#39; Transform.c:15:1: warning: typedef requires a name [-Wmissing-declarations] Transform.c:217:9: warning: format string is not a string literal (potentially insecure)  Transform.c:217:9: note: treat the string as an argument to avoid this</code>"}, {"owner": {"reputation": 561, "user_id": 1408187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8076884650c64e4cd9fd84dac0c9e3a?s=128&d=identicon&r=PG", "display_name": "ond1", "link": "https://stackoverflow.com/users/1408187/ond1"}, "reply_to_user": {"reputation": 582, "user_id": 491499, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1a3fd9927b381622b6f2471d6d89b20d?s=128&d=identicon&r=PG", "display_name": "lschult2", "link": "https://stackoverflow.com/users/491499/lschult2"}, "edited": false, "score": 0, "creation_date": 1569343197, "post_id": 58060086, "comment_id": 102563442, "body": "It looks like there are other issue here when running building on macOS. 1) We need to comment out the defining of the bool variable 2) Add preprocessor code for the library path on macOS."}, {"owner": {"reputation": 561, "user_id": 1408187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8076884650c64e4cd9fd84dac0c9e3a?s=128&d=identicon&r=PG", "display_name": "ond1", "link": "https://stackoverflow.com/users/1408187/ond1"}, "reply_to_user": {"reputation": 582, "user_id": 491499, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1a3fd9927b381622b6f2471d6d89b20d?s=128&d=identicon&r=PG", "display_name": "lschult2", "link": "https://stackoverflow.com/users/491499/lschult2"}, "edited": false, "score": 0, "creation_date": 1569343864, "post_id": 58060086, "comment_id": 102563745, "body": "Working on a fix. Track bug issue: <a href=\"https://saxonica.plan.io/issues/4318\" rel=\"nofollow noreferrer\">saxonica.plan.io/issues/4318</a>"}, {"owner": {"reputation": 561, "user_id": 1408187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8076884650c64e4cd9fd84dac0c9e3a?s=128&d=identicon&r=PG", "display_name": "ond1", "link": "https://stackoverflow.com/users/1408187/ond1"}, "reply_to_user": {"reputation": 582, "user_id": 491499, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1a3fd9927b381622b6f2471d6d89b20d?s=128&d=identicon&r=PG", "display_name": "lschult2", "link": "https://stackoverflow.com/users/491499/lschult2"}, "edited": false, "score": 0, "creation_date": 1569344660, "post_id": 58060086, "comment_id": 102564106, "body": "I have fixed the two outstanding issues. You should now be able to checkout files from svn and try to build again."}, {"owner": {"reputation": 582, "user_id": 491499, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1a3fd9927b381622b6f2471d6d89b20d?s=128&d=identicon&r=PG", "display_name": "lschult2", "link": "https://stackoverflow.com/users/491499/lschult2"}, "edited": false, "score": 0, "creation_date": 1569361548, "post_id": 58060086, "comment_id": 102570360, "body": "Got it compiled!  It was still failing and had to make two more changes: <code>gcc  Transform.c -o transform -ldl -lc -lsaxonpec -DPEC -I..&#47;Saxon.C.API&#47;jni</code> changed to <code>gcc  Transform.c -o transform -ldl -lc -DHEC -I..&#47;Saxon.C.API&#47;jni</code>.  So removed -lsaxonpec and changed -DPEC to -DHEC..."}, {"owner": {"reputation": 582, "user_id": 491499, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1a3fd9927b381622b6f2471d6d89b20d?s=128&d=identicon&r=PG", "display_name": "lschult2", "link": "https://stackoverflow.com/users/491499/lschult2"}, "edited": false, "score": 0, "creation_date": 1608452646, "post_id": 58060086, "comment_id": 115584595, "body": "Just following up since it&#39;s been a year.  Has the integration work needed to extend Saxon/C on Perl come off your todo list yet?"}, {"owner": {"reputation": 561, "user_id": 1408187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8076884650c64e4cd9fd84dac0c9e3a?s=128&d=identicon&r=PG", "display_name": "ond1", "link": "https://stackoverflow.com/users/1408187/ond1"}, "reply_to_user": {"reputation": 582, "user_id": 491499, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1a3fd9927b381622b6f2471d6d89b20d?s=128&d=identicon&r=PG", "display_name": "lschult2", "link": "https://stackoverflow.com/users/491499/lschult2"}, "edited": false, "score": 0, "creation_date": 1608887480, "post_id": 58060086, "comment_id": 115706829, "body": "Thanks for the reminder. We will look into it"}], "tags": [], "owner": {"reputation": 561, "user_id": 1408187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8076884650c64e4cd9fd84dac0c9e3a?s=128&d=identicon&r=PG", "display_name": "ond1", "link": "https://stackoverflow.com/users/1408187/ond1"}, "is_accepted": true, "score": 1, "last_activity_date": 1569233397, "creation_date": 1569233397, "answer_id": 58060086, "question_id": 58034996, "link": "https://stackoverflow.com/questions/58034996/using-saxon-c-with-perl/58060086#58060086", "title": "Using Saxon/C with Perl", "body": "<p>we have not yet officially done the integration work needed to extend Saxon/C on perl it is still on our todo list. Therefore we currently don't support it. I don't know of anyone who has done this work as yet but I know it is can be done. </p>\n\n<p>On the Saxon website we state that it is possible to create extensions in languages like Perl since Saxon/C has a C/C++ interface. Currently, we only have extensions for PHP and Python (available in the next release). </p>\n\n<p>As a workaround you could run the transform command from Saxon/C using the exec function in Perl instead of the Java version, therefore avoiding the need to run Java VM.</p>\n"}], "owner": {"reputation": 582, "user_id": 491499, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1a3fd9927b381622b6f2471d6d89b20d?s=128&d=identicon&r=PG", "display_name": "lschult2", "link": "https://stackoverflow.com/users/491499/lschult2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 58060086, "answer_count": 1, "score": 1, "last_activity_date": 1575041527, "creation_date": 1569012467, "last_edit_date": 1575041527, "question_id": 58034996, "link": "https://stackoverflow.com/questions/58034996/using-saxon-c-with-perl", "title": "Using Saxon/C with Perl", "body": "<p>The Saxon website says Saxon/C can be invoked from Perl, but I can't find any examples.  The only thing I've found that interfaces to Saxon is one old Perl module (XML::Saxon::XSLT2) which uses Inline::Java and apparently is very slow.  But I can find nothing that uses Saxon/C.  Has anyone had any success in doing this who can share some tips?</p>\n"}, {"tags": ["perl", "substitution"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1569011324, "post_id": 58034754, "comment_id": 102471537, "body": "You probably need to look at the <code>qr&#47;&#47;</code> operator for quoting regular expressions.  However, you would normally use <code>my $qr1 = qr&#47;$pattern&#47;; while (&lt;&gt;) { s&#47;$qr1&#47;$replace&#47;g; print; }</code> or similar \u2014 separating the pattern from the replacement text.  There&#39;s also <code>eval</code>, but it is dangerous."}, {"owner": {"reputation": 1, "user_id": 12092585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f267c1aa1d5c23576ec759a61fc542d4?s=128&d=identicon&r=PG&f=1", "display_name": "SchwambornM", "link": "https://stackoverflow.com/users/12092585/schwambornm"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1569011741, "post_id": 58034754, "comment_id": 102471676, "body": "Of course more complex expressions are planned like: s/(a)(b)/$2$1/g  With the qr() I already played, luckless."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1569012643, "post_id": 58034754, "comment_id": 102471954, "body": "Yes, of course.  The <code>qr&#47;&#47;</code> operator may be a key part of the answer, though \u2014 for the match part.  The replacement part is trickier; in fact, you may be forced to use <code>eval</code> with that. (Casual experimentation with <code>s&#47;&#47;&#47;e</code> or <code>s&#47;&#47;&#47;ee</code> didn&#39;t produce the result I wanted. In the replacement is complex, then it&#39;s likely you&#39;ll need <code>eval</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1569012816, "post_id": 58034754, "comment_id": 102472006, "body": "I tried: <code>my $pattern = &#39;ab(.*)fg&#39;; my $replace = &#39;AB$1$1FG&#39;;  while (&lt;&gt;) {     print &quot;In:&quot;, $_;     my $line = $_;     eval &quot;s&#47;$pattern&#47;$replace&#47;g&quot;;     print &quot;O1:&quot;, $_;     $line =~ s&#47;ab(.*)fg&#47;AB$1$1FG&#47;g;     print &quot;O2:&quot;, $line; }</code> \u2014 given the input <code>abcdefg</code>, it produced three lines of output: <code>In:abcdefg</code> \u2014 <code>O1:ABcdecdeFG</code> \u2014 <code>O2:ABcdecdeFG</code>, as desired.  You could read the whole <code>s&#47;&#47;&#47;</code> expression from a file and <code>eval</code> it.  Note the security risks with <code>eval</code>; it isn&#39;t &quot;safe&quot;."}, {"owner": {"reputation": 1, "user_id": 12092585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f267c1aa1d5c23576ec759a61fc542d4?s=128&d=identicon&r=PG&f=1", "display_name": "SchwambornM", "link": "https://stackoverflow.com/users/12092585/schwambornm"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1569012968, "post_id": 58034754, "comment_id": 102472054, "body": "Many thanks Jonathan, I guess I&#39;ll go the way of separating the pattern, thought of keeping the expression at once."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1569033889, "post_id": 58034754, "comment_id": 102475300, "body": "@JonathanLeffler, Re &quot;<i>you may be forced to use eval with that.</i>&quot;, That&#39;s what String::Substitution is for."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569036569, "post_id": 58034754, "comment_id": 102475623, "body": "@ikegami: OK \u2014 if you say so.  I&#39;ve not heard of String::Substitution, so I couldn&#39;t recommend it.  It&#39;s the sort of reason I used comments, not an answer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1569056575, "post_id": 58034754, "comment_id": 102478540, "body": "@JonathanLeffler, I wasn&#39;t implying that you were hiding its existence. I just figured you&#39;d want to know there was a solution and what it was."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 12092585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f267c1aa1d5c23576ec759a61fc542d4?s=128&d=identicon&r=PG&f=1", "display_name": "SchwambornM", "link": "https://stackoverflow.com/users/12092585/schwambornm"}, "edited": false, "score": 0, "creation_date": 1569254779, "post_id": 58036857, "comment_id": 102528746, "body": "Then please check the mark next to the answer to indicate as much :)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1569066403, "last_edit_date": 1569066403, "creation_date": 1569033706, "answer_id": 58036857, "question_id": 58034754, "link": "https://stackoverflow.com/questions/58034754/using-a-perl-variable-as-the-substitute-expression/58036857#58036857", "title": "Using a Perl variable as the substitute expression", "body": "<p><code>$pattern</code> doesn't contain a regex pattern; it contains a bit of Perl source code. To evaluate Perl code, you need <a href=\"http://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\"><code>eval EXPR</code></a> (or <code>do</code> or <code>require</code>).</p>\n\n<p>Requiring Perl code from a user is a bad idea, though. Instead, I recommend the requiring the pattern and the replacement separately, as in the following:</p>\n\n<pre><code>my $pattern = 'a';\nmy $replacement = 'b';\nmy $string = 'abcd';\n\n$string =~ s/$pattern/$replacement/g;\n</code></pre>\n\n<p>Use a function from <a href=\"https://metacpan.org/pod/String::Substitution\" rel=\"nofollow noreferrer\">String::Substitution</a> if you want to allow <code>$1</code> and such to be allowed in the replacement expression.</p>\n\n<pre><code>use String::Substitution qw( gsub_modify );\n\nmy $pattern = '(a)(b)';\nmy $replacement = '$2$1';\nmy $string = 'abcd';\n\ngsub_modify($string, $pattern, $replacement);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12092585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f267c1aa1d5c23576ec759a61fc542d4?s=128&d=identicon&r=PG&f=1", "display_name": "SchwambornM", "link": "https://stackoverflow.com/users/12092585/schwambornm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569066403, "creation_date": 1569011086, "last_edit_date": 1569011197, "question_id": 58034754, "link": "https://stackoverflow.com/questions/58034754/using-a-perl-variable-as-the-substitute-expression", "title": "Using a Perl variable as the substitute expression", "body": "<p>I want to read the substitute expressions flexibly from external data,\nso my problem could be reduced to the following:</p>\n\n<pre><code>my $pattern = \"s/a/b/g\";\nmy $string  = \"abcd\";\n\n$string =~ $pattern;\nprint(\"$string\\n\");\n</code></pre>\n\n<p>This is not functioning, but where is my problem?\nOr does it even have no solution?</p>\n"}, {"tags": ["perl", "perl5.8"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1568964813, "post_id": 58023755, "comment_id": 102450151, "body": "Perl 5.8 was released in 2002 and has been out of support for a long time. Strongly consider upgrading to a more up to date version."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1568964862, "post_id": 58023755, "comment_id": 102450176, "body": "What do you mean by &quot;additional module&quot;? What modules are already available?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1568970490, "post_id": 58023755, "comment_id": 102452814, "body": "<i>i can&#39;t install any additional module</i> - That is rarely as true as people seem to think it is. It&#39;s unlikely that you wouldn&#39;t be able use <a href=\"https://metacpan.org/release/JSON-PP\" rel=\"nofollow noreferrer\">JSON::PP</a> as it&#39;s pure Perl (that&#39;s what &#39;PP&#39; means)."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1568970649, "post_id": 58023755, "comment_id": 102452913, "body": "If you see the <a href=\"https://metacpan.org/pod/HTTP::Daemon\" rel=\"nofollow noreferrer\">documenation for a recent version of HTTP::Daemon</a> you&#39;ll see that they&#39;ve started using the better constructor syntax <code>HTTP::Daemon-&gt;new()</code>. Please follow their example to avoid potential pain in your future."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1568989991, "post_id": 58023755, "comment_id": 102463186, "body": "You can also install any CPAN module to a <a href=\"https://metacpan.org/pod/local::lib\" rel=\"nofollow noreferrer\">local::lib</a> in your home directory if it&#39;s an issue of permissions. <a href=\"https://metacpan.org/pod/App::cpanminus#Downloading-the-standalone-executable\" rel=\"nofollow noreferrer\">Get the cpanm script</a> and then you can <code>cpanm -l local Any::Module</code> and run your script with <code>perl -Ilocal script.pl</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1569034323, "post_id": 58023755, "comment_id": 102475366, "body": "Re &quot;<i>i can&#39;t install any additional module</i>&quot;, If you can install code from SO, you can install code from CPAN."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 12090443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4caf4f089a418d07cee7693b8dbbec6?s=128&d=identicon&r=PG&f=1", "display_name": "bussirs", "link": "https://stackoverflow.com/users/12090443/bussirs"}, "edited": false, "score": 0, "creation_date": 1568978684, "post_id": 58026650, "comment_id": 102457117, "body": "Thanks but i can t  install any module on the servers. I&#39;am a public servant and the process is ****. I have to use what are on the computers ... Now we are thinking about switching from perl 5.8 to python 2.6 (in 2019). So i have to use the tools that are given ... So no perl json module"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 21, "user_id": 12090443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4caf4f089a418d07cee7693b8dbbec6?s=128&d=identicon&r=PG&f=1", "display_name": "bussirs", "link": "https://stackoverflow.com/users/12090443/bussirs"}, "edited": false, "score": 0, "creation_date": 1568979467, "post_id": 58026650, "comment_id": 102457472, "body": "@bussirs You can just copy/paste the module code into your script. Or use App::FatPacker, which automates the process."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 21, "user_id": 12090443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4caf4f089a418d07cee7693b8dbbec6?s=128&d=identicon&r=PG&f=1", "display_name": "bussirs", "link": "https://stackoverflow.com/users/12090443/bussirs"}, "edited": false, "score": 0, "creation_date": 1568980713, "post_id": 58026650, "comment_id": 102458114, "body": "@bussirs: As I like to say in situations like this - &quot;I suggest you upgrade your Perl, your manager or your job as appropriate&quot; :-)"}, {"owner": {"reputation": 21, "user_id": 12090443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4caf4f089a418d07cee7693b8dbbec6?s=128&d=identicon&r=PG&f=1", "display_name": "bussirs", "link": "https://stackoverflow.com/users/12090443/bussirs"}, "edited": false, "score": 0, "creation_date": 1568981678, "post_id": 58026650, "comment_id": 102458620, "body": "@DaveCross :) yes but my administration manage lifes so it&#39;s kind of up to people of good will  to make these lifes and interactions with us less *** even if the tech here is a mess ...  But your answer helped me so thanks :)"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "reply_to_user": {"reputation": 21, "user_id": 12090443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4caf4f089a418d07cee7693b8dbbec6?s=128&d=identicon&r=PG&f=1", "display_name": "bussirs", "link": "https://stackoverflow.com/users/12090443/bussirs"}, "edited": false, "score": 1, "creation_date": 1568994071, "post_id": 58026650, "comment_id": 102465362, "body": "@bussirs JSON::Tiny, a fork of Mojo::JSON is on CPAN, and is designed such that you could quite literally copy 300 lines and paste them into your code base. It&#39;s not a sustainable best practice, but totally possible, and not much different from copying lines of code out of StackOverflow."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1568996046, "post_id": 58026650, "comment_id": 102466175, "body": "However, you do need to at least be on Perl 5.8.4; older versions of Exporter wouldn&#39;t work with J::T as-is. And 5.10 is strongly suggested, since it&#39;s possible for JSON with entities greater than 64kb to cause some hickups in old versions of Perl&#39;s regex engine."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 21, "user_id": 12090443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4caf4f089a418d07cee7693b8dbbec6?s=128&d=identicon&r=PG&f=1", "display_name": "bussirs", "link": "https://stackoverflow.com/users/12090443/bussirs"}, "edited": false, "score": 2, "creation_date": 1568998289, "post_id": 58026650, "comment_id": 102466996, "body": "@bussirs Python 2 in 2019? It&#39;s all but <a href=\"https://www.anaconda.com/end-of-life-eol-for-python-2-7-is-coming-are-you-ready/\" rel=\"nofollow noreferrer\">end-of-life</a>. It seems as though whomever you work for goes out of their way to make things difficult for themselves, with no future situational awareness whatsoever."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1569034267, "post_id": 58026650, "comment_id": 102475359, "body": "You forgot to encode the content. <code>my $content = JSON::PP-&gt;new-&gt;encode({ Status =&gt; &#39;Ok&#39; });</code> should be <code>my $content = JSON::PP-&gt;new-&gt;utf8-&gt;encode({ Status =&gt; &#39;Ok&#39; });</code> or <code>my $content = encode_json({ Status =&gt; &#39;Ok&#39; });</code>"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1569044521, "last_edit_date": 1569044521, "creation_date": 1568975568, "answer_id": 58026650, "question_id": 58023755, "link": "https://stackoverflow.com/questions/58023755/how-to-return-a-json-in-a-mini-web-server-without-any-additional-module/58026650#58026650", "title": "How to return a json in a mini web server without any additional module?", "body": "<p>Rewriting the <a href=\"https://metacpan.org/pod/HTTP::Daemon#SYNOPSIS\" rel=\"nofollow noreferrer\">example in the documentation</a> to return JSON would look something like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse HTTP::Daemon;\nuse HTTP::Status;\nuse HTTP::Response;\nuse HTTP::Headers;\nuse JSON::PP;\n\nmy $headers = HTTP::Headers-&gt;new;\n$headers-&gt;header(Content_Type =&gt; 'application/json');\nmy $content = JSON::PP-&gt;new-&gt;utf8-&gt;encode({ Status =&gt; 'Ok' });\n\nmy $d = HTTP::Daemon-&gt;new || die;\nprint \"Please contact me at: &lt;URL:\", $d-&gt;url, \"&gt;\\n\";\nwhile (my $c = $d-&gt;accept) {\n    while (my $r = $c-&gt;get_request) {\n        if ($r-&gt;method eq 'GET' and $r-&gt;uri-&gt;path eq \"/xyzzy\") {\n            $c-&gt;send_response(\n                HTTP::Response-&gt;new(200, 'OK', $headers, $content)\n            );\n        }\n        else {\n            $c-&gt;send_error(RC_FORBIDDEN)\n        }\n    }\n    $c-&gt;close;\n    undef($c);\n}\n</code></pre>\n\n<p>But please note that writing a web application at this level is rarely a useful thing to do. You really want to install a web framework (I like <a href=\"https://metacpan.org/pod/Dancer2\" rel=\"nofollow noreferrer\">Dancer2</a>) as that will make your life far easier.</p>\n\n<p>I'm not sure what is imposing these restrictions on you. But if you're not using a modern version of Perl (5.10 at the very least) and installing modules from CPAN, then you're making your Perl development career far harder than it needs to be.</p>\n"}], "owner": {"reputation": 21, "user_id": 12090443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4caf4f089a418d07cee7693b8dbbec6?s=128&d=identicon&r=PG&f=1", "display_name": "bussirs", "link": "https://stackoverflow.com/users/12090443/bussirs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1569044521, "creation_date": 1568964625, "last_edit_date": 1568978821, "question_id": 58023755, "link": "https://stackoverflow.com/questions/58023755/how-to-return-a-json-in-a-mini-web-server-without-any-additional-module", "title": "How to return a json in a mini web server without any additional module?", "body": "<p>So my problem is that i have a perl5.8 installation and i can't install any additional module. (I am a public servant and i have to use the servers as they are without any right on it or choosing what i can install on it, the process to modify something take years).</p>\n\n<p>So there is a little web server script : </p>\n\n<pre><code>use HTTP::Daemon;\nuse HTTP::Status;\n\n(my $d = new HTTP::Daemon \nLocalAddr =&gt; '127.0.0.1',\nLocalPort =&gt; 52443\n) || die;\nprint \"Please contact me at: &lt;URL:\", $d-&gt;url, \"&gt;\\n\";\nwhile (my $c = $d-&gt;accept) {\n    while (my $r = $c-&gt;get_request) {\n        if ($r-&gt;method eq 'GET' and $r-&gt;uri-&gt;path eq \"/xyzzy\") {\n            # remember, this is *not* recommended practice :-)\n            $c-&gt;send_file_response(\"D:/Script/index.html\");\n        }\n        else {\n            $c-&gt;send_error(RC_FORBIDDEN)\n        }\n    }\n    $c-&gt;close;\n    undef($c);\n}\n</code></pre>\n\n<p>And i would like to return a json like : \n    {\"Status\" : \"Ok\" }</p>\n\n<p>regards</p>\n"}, {"tags": ["perl", "substitution"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1569034451, "post_id": 58022670, "comment_id": 102475378, "body": "Re &quot;<i>I know y/[1-9]/[a-j]/</i>&quot;, The correct usage is <code>y&#47;1-9&#47;a-i&#47;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9965744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4bDUw.png?s=128&g=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/9965744/steven"}, "edited": false, "score": 0, "creation_date": 1568964978, "post_id": 58023004, "comment_id": 102450239, "body": "OK,Thanks a lot! How to use substitute with for loop?"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 15, "user_id": 9965744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4bDUw.png?s=128&g=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/9965744/steven"}, "edited": false, "score": 0, "creation_date": 1568965093, "post_id": 58023004, "comment_id": 102450296, "body": "@Steven if you want the same behavior as your one-line, you should do something like <code>while(my $input = &lt;&gt;) { $input =~ s&#47;(\\d)&#47;$alphabets[$1 - 1]&#47;g; print $input; }</code> (<code>-p</code> flag basically wraps your code in <code>while(&lt;&gt;) { ... } continue { print }</code> (more or less))"}], "tags": [], "owner": {"reputation": 472, "user_id": 2001559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L1bvT.png?s=128&g=1", "display_name": "Maverick", "link": "https://stackoverflow.com/users/2001559/maverick"}, "is_accepted": false, "score": 0, "last_activity_date": 1568961912, "last_edit_date": 1568961912, "creation_date": 1568961548, "answer_id": 58023004, "question_id": 58022670, "link": "https://stackoverflow.com/questions/58022670/perl-substitute-numbers-to-alphabet-used-with-for/58023004#58023004", "title": "perl substitute numbers to alphabet,used with for", "body": "<p>I would suggest to write it properly as a perl script.\nThe one liner you mentioned is little hard to understand.</p>\n\n<pre><code>use strict;                                                            \nuse warnings;\n\nmy @alphabets = (\"a\"..\"z\");\n\nmy $input = $ARGV[0];\n\n$input =~ s/(\\d)/$alphabets[$1 - 1]/g;\n\nprint $input;\n</code></pre>\n\n<p>Run - </p>\n\n<blockquote>\n  <p>perl substitute.pl abc4xyz5u</p>\n</blockquote>\n\n<p>Output - </p>\n\n<blockquote>\n  <p>abcdxyzeu</p>\n</blockquote>\n\n<p>I am serching for the number in the string and replacing it with the alphabet on the same position(remenber array start form 0 index and hence 'position -1') in the 'alphabets' array</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 9965744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4bDUw.png?s=128&g=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/9965744/steven"}, "edited": false, "score": 0, "creation_date": 1568969443, "post_id": 58023806, "comment_id": 102452311, "body": "Thanks for your detailed explanation.&quot;s#$n[$_]#$h{$&amp;}#g for 0..$#n&quot; I think I get it now."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569013891, "post_id": 58023806, "comment_id": 102472288, "body": "Nitpicks: (1) The <code>\\d</code> matches some 300+ Unicode &quot;digits&quot; along with <code>[0-9]</code> ... things like <code>\u0664</code> for example (<code>perl -CS -wE&#39;$v=&quot;\\N{U+0664}&quot;; $v =~ &#47;(\\d)&#47;; say $1&#39;</code>) etc.  Why not just <code>[0-9]</code>? (2) The <code>$&amp;</code> is fine since v5.20 (and I&#39;m still not sure that it has good performance), and capture+<code>$1</code> is far more readily recognized and understood"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1569034615, "post_id": 58023806, "comment_id": 102475401, "body": "Re &quot;<i>Why not just <code>[0-9]</code></i>&quot;, More like <code>[1-9]</code>, based on the OP&#39;s snippets."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1569070931, "post_id": 58023806, "comment_id": 102481608, "body": "@zdim I have mixed feelings regarding <code>\\d</code>: yes it matches more than just <code>[0-9]</code>, but how often is that really an issue? Weird unicode digits don&#39;t just pop in strings everywhere for no reason. That being said, <code>[1-9]</code> matches more closely what OP wanted, so I&#39;ve changed for that. Regarding <code>$&amp;</code>: I&#39;m personally used to it, and so is OP. But the point of SO being provide answers that has useful in the future, I&#39;ve changed it to <code>$1</code> as it might easier for less experienced users (and regarding performances: I think we both agree that in this case it doesn&#39;t matter!) Thanks for your comment!"}], "tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": true, "score": 3, "last_activity_date": 1569070972, "last_edit_date": 1569070972, "creation_date": 1568964849, "answer_id": 58023806, "question_id": 58022670, "link": "https://stackoverflow.com/questions/58022670/perl-substitute-numbers-to-alphabet-used-with-for/58023806#58023806", "title": "perl substitute numbers to alphabet,used with for", "body": "<p>Your issue is within </p>\n\n<pre><code>s#$n[$_]#$h{$&amp;}#g for 0..$#n\n</code></pre>\n\n<p>You expect <code>$_</code> to be your input (so that <code>s###</code> is applied on it), but also <code>$n[$_]</code> to use the <code>$_</code> from the for loop (<code>0</code> to <code>$#n</code>). If you were to add a print, you'd notice that <code>$_</code>'s value within this loop is <code>0</code> to <code>$#n</code>, rather than your input.</p>\n\n<p>What you could do instead to fix it is something like:</p>\n\n<pre><code>$r=$_; $r=~s#$n[$_]#$h{$&amp;}#g for 0..$#n; $_=$r\n</code></pre>\n\n<p>But that's much more complicated that it has to be. I would instead do:</p>\n\n<pre><code>s#([1-9])#$h{$1}#g\n</code></pre>\n\n<p>Or, without using <code>%h</code> (since, let's face it, an hash with <code>0 =&gt; a</code>, <code>1 =&gt; b</code> etc. should be an array):</p>\n\n<pre><code>perl -pe '@a=\"a\"..\"j\"; s#([1-9])#$a[$1-1]#g'\n</code></pre>\n\n<p>Or, without requiring an array at all (I'll let you decide if you find it easier or harder to read; personally I'm fine with it), </p>\n\n<pre><code>perl -pe 's/([1-9])/chr(ord(\"a\")+$1-1)/ge'\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9965744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4bDUw.png?s=128&g=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/9965744/steven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 58023806, "answer_count": 2, "score": 1, "last_activity_date": 1569070972, "creation_date": 1568959893, "last_edit_date": 1568962833, "question_id": 58022670, "link": "https://stackoverflow.com/questions/58022670/perl-substitute-numbers-to-alphabet-used-with-for", "title": "perl substitute numbers to alphabet,used with for", "body": "<p>Perl substitute all Numbers to Alphabet</p>\n\n<pre><code>abc4xyz5u\n</code></pre>\n\n<p>to</p>\n\n<pre><code>abcdxyzeu\n</code></pre>\n\n<p>I try this,but it not work:</p>\n\n<pre><code>echo 'abc4xyz5u' | perl -pe'@n=1..9;@a=a..j;@h{@n}=@a;s#$n[$_]#$h{$&amp;}#g for 0..$#n'\n</code></pre>\n\n<p>I know y/[1-9]/[a-j]/, but I want to use a substitute.</p>\n"}, {"tags": ["perl", "expect.pm"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1568974486, "post_id": 58020898, "comment_id": 102455040, "body": "It is simpler if you use <a href=\"https://www.cyberciti.biz/faq/how-to-set-up-ssh-keys-on-linux-unix/\" rel=\"nofollow noreferrer\">public/private keys</a>. Then <code>ssh</code> will not ask for the password, and there will be no chance that you type it incorrectly :)"}, {"owner": {"reputation": 317, "user_id": 6836881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c145c9cbd56933e6158bc0200bd144f8?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/6836881/steve"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569003081, "post_id": 58020898, "comment_id": 102468779, "body": "Yes, but the target server doesn&#39;t allow the passwordless ssh login, so I&#39;m trying to make this Perl Expect work."}], "owner": {"reputation": 317, "user_id": 6836881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c145c9cbd56933e6158bc0200bd144f8?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/6836881/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568949220, "creation_date": 1568945462, "last_edit_date": 1568949220, "question_id": 58020898, "link": "https://stackoverflow.com/questions/58020898/perl-expect-for-ssh-login-if-a-bad-password-fails-how-to-try-another-password", "title": "Perl Expect: For ssh login, if a bad password fails, how to try another password?", "body": "<p>When using Expect in Perl to automate ssh logins, if the 1st password fails, how can we try another password?</p>\n\n<p>It's not hard to find the pure Expect examples to do so but cannot find one for Expect in Perl.</p>\n\n<pre><code>use Expect;\n\nmy $bad_pwd = 'pw123';\nmy $good_pwd = 'pw1234';\n\nmy $exp = Expect-&gt;spawn(\"ssh user@example.com\") or die;\n$exp-&gt;expect($timeout,  [ \"password: \", sub {$exp-&gt;send(\"$bad_pwd\\n\"); }]);\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 2048, "user_id": 10552687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd4bd62f003f927fbf2881ba3a31716?s=128&d=identicon&r=PG&f=1", "display_name": "dvo", "link": "https://stackoverflow.com/users/10552687/dvo"}, "edited": false, "score": 1, "creation_date": 1568925711, "post_id": 58018662, "comment_id": 102440873, "body": "<code>$1</code> references a Capture Group. Try wrapping the pattern for your desired output in parenthesis to make it a capture group."}], "answers": [{"tags": [], "owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 4, "last_activity_date": 1568925818, "creation_date": 1568925818, "answer_id": 58018715, "question_id": 58018662, "link": "https://stackoverflow.com/questions/58018662/print-only-the-matched-characters-in-perl/58018715#58018715", "title": "Print only the matched characters in perl", "body": "<p><code>$1</code> contains the part that was matched by the first capture group, but you have no capture groups in your regexp.</p>\n\n<p>Use <code>$&amp;</code> to get everything matched by the whole pattern.</p>\n\n<pre><code>perl -ne '/foo\\d/ &amp;&amp; print \"$&amp;\"' data.txt\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 10357582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42478052e400b0dff241e889b90552a5?s=128&d=identicon&r=PG&f=1", "display_name": "szenadam", "link": "https://stackoverflow.com/users/10357582/szenadam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 58018715, "answer_count": 1, "score": 0, "last_activity_date": 1568925818, "creation_date": 1568925538, "question_id": 58018662, "link": "https://stackoverflow.com/questions/58018662/print-only-the-matched-characters-in-perl", "title": "Print only the matched characters in perl", "body": "<p>Is there a Perl one-liner if I want to print only the matched characters with Perl. For example I have a text file like this:</p>\n\n<pre><code>data.txt\nfoo1 bar baz\nfoo2 bar baz\nbar foo3 baz\nbar baz foo4\n</code></pre>\n\n<p>I tried the following but there was no output:</p>\n\n<pre><code>perl -ne '/foo\\d/ &amp;&amp; print \"$1\"' data.txt\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "perl", "parameter-passing"], "comments": [{"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1568921296, "post_id": 58017797, "comment_id": 102439101, "body": "<code>$(&quot;#tableID&quot;)</code> should be <code>$(&quot;#&quot; + tableID)</code>. Variables aren&#39;t expanded inside strings, you need to concatenate them."}, {"owner": {"reputation": 11, "user_id": 10380880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccfbea179e98f1527215f332f65cbc4b?s=128&d=identicon&r=PG&f=1", "display_name": "Chucklehead", "link": "https://stackoverflow.com/users/10380880/chucklehead"}, "reply_to_user": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1568921540, "post_id": 58017797, "comment_id": 102439205, "body": "Excellent, Barmar! It worked, thank you."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 10380880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccfbea179e98f1527215f332f65cbc4b?s=128&d=identicon&r=PG&f=1", "display_name": "Chucklehead", "link": "https://stackoverflow.com/users/10380880/chucklehead"}, "is_accepted": true, "score": 1, "last_activity_date": 1568921837, "creation_date": 1568921837, "answer_id": 58017940, "question_id": 58017797, "link": "https://stackoverflow.com/questions/58017797/how-can-a-javascript-function-parameter-be-used-in-the-function-body-as-a-jquery/58017940#58017940", "title": "How can a JavaScript function parameter be used in the function body as a jQuery selector?", "body": "<p><code>$(\"#\" + tableID)</code></p>\n\n<p>Thank you, <a href=\"https://stackoverflow.com/users/1491895/barmar\">Barmar</a> for the solution! Concatenation did not occur to me.</p>\n"}], "owner": {"reputation": 11, "user_id": 10380880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccfbea179e98f1527215f332f65cbc4b?s=128&d=identicon&r=PG&f=1", "display_name": "Chucklehead", "link": "https://stackoverflow.com/users/10380880/chucklehead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 58017940, "answer_count": 1, "score": 0, "last_activity_date": 1568921837, "creation_date": 1568921180, "last_edit_date": 1568921348, "question_id": 58017797, "link": "https://stackoverflow.com/questions/58017797/how-can-a-javascript-function-parameter-be-used-in-the-function-body-as-a-jquery", "title": "How can a JavaScript function parameter be used in the function body as a jQuery selector?", "body": "<p>My JavaScript function is called by several CGI scripts, and thus I would like to pass the script-specific HTML id attribute as an argument to my function. Then, in the function body, I would like to use the parameter holding this argument in the jQuery shortcut. However, my parameter keeps getting interpreted as a string literal when I use the jQuery syntax.</p>\n\n<p>Writing out the long-form JavaScript to use the parameter works, but because I use the jQuery shortcut everywhere else, I would like to use the same syntax for this case as well. Each page can have multiple tables, so selecting on the table element will not work. I cannot find any documentation for what I am trying to accomplish. In Perl, this would be similar to using ${parameter_name} instead of $parameter_name.</p>\n\n<p>deleteItem.cgi (Perl):</p>\n\n<pre><code>my $rows;\nmy $counter = 0;\nfor (@array) {\n  $rows .= \"\n    &lt;tr id='del$counter' class='bg-dark' onclick='setRowBackground(\\'deleteItems\\', $counter)'&gt;\n      &lt;td&gt;$_&lt;/td&gt;\n    &lt;/tr&gt;\n  \";\n  $counter++;\n}\n\n&lt;head&gt;\n&lt;script type=\"text/javascript\" src=\"setBackground.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;table id=\"deleteItems\" class=\"bg-dark\"&gt;\n    $rows\n  &lt;/table&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>setBackground.js:</p>\n\n<pre><code>$(function() {\n  // this uses the id name and is what I am trying to avoid so that\n  setBackground.js can be used by multiple CGI scripts //\n  $('#deleteItems').DataTable();\n});\n\nfunction setRowBackground(tableID, rowNumber) {\n  // after removing class \"bg-dark\"\n  none of these work: //\n  $(\"#tableID\").DataTable().row(rowNumber).nodes().to$().addClass(\"bg-white\");\n  $(#\"tableID\").DataTable().row(rowNumber).nodes().to$().addClass(\"bg-white\");\n  $(#tableID).DataTable().row(rowNumber).nodes().to$().addClass(\"bg-white\");\n  $(#(tableID)).DataTable().row(rowNumber).nodes().to$().addClass(\"bg-white\");\n\n  // these do work:\n  ...but this one can only be used for a table with this id, and table ids\n  are not consistent accross multiple CGI scripts! //\n  $(#deleteItems).DataTable().row(rowNumber).nodes().to$().addClass(\"bg-white\");\n  // ...but this one is what I am trying to avoid since the rest of the code\n  uses jQuery. //\n  document.getElementById(tableId).DataTable().row(rowNumber).nodes().to$().addClass(\"bg-white\");\n}   \n\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1568921134, "post_id": 58017772, "comment_id": 102439042, "body": "Do you mean &quot;separated by either a space or a vertical bar character&quot;?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1568921136, "post_id": 58017772, "comment_id": 102439045, "body": "Please give several sample inputs and the desired results."}, {"owner": {"reputation": 377, "user_id": 9169752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaa4ea1d5239935a9e8a698f297ed7b9?s=128&d=identicon&r=PG&f=1", "display_name": "Dr Jay", "link": "https://stackoverflow.com/users/9169752/dr-jay"}, "edited": false, "score": 0, "creation_date": 1568921305, "post_id": 58017772, "comment_id": 102439105, "body": "tadman Yes  Yunnosch  results its like the example 1 or 2"}], "answers": [{"comments": [{"owner": {"reputation": 377, "user_id": 9169752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaa4ea1d5239935a9e8a698f297ed7b9?s=128&d=identicon&r=PG&f=1", "display_name": "Dr Jay", "link": "https://stackoverflow.com/users/9169752/dr-jay"}, "edited": false, "score": 0, "creation_date": 1569029057, "post_id": 58020800, "comment_id": 102474819, "body": "Thanks what if i want to add another | like this &#39;1|11|11|123&#39;"}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "reply_to_user": {"reputation": 377, "user_id": 9169752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaa4ea1d5239935a9e8a698f297ed7b9?s=128&d=identicon&r=PG&f=1", "display_name": "Dr Jay", "link": "https://stackoverflow.com/users/9169752/dr-jay"}, "edited": false, "score": 0, "creation_date": 1569033733, "post_id": 58020800, "comment_id": 102475278, "body": "You just put that in the regex, just repeat <code>\\d{1-4}[\\s|]</code> for as many groups as you need. Just make sure to not end the regex  with <code>[\\s|]</code> or it will only match when the input ends in <code>|</code> or space."}, {"owner": {"reputation": 377, "user_id": 9169752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaa4ea1d5239935a9e8a698f297ed7b9?s=128&d=identicon&r=PG&f=1", "display_name": "Dr Jay", "link": "https://stackoverflow.com/users/9169752/dr-jay"}, "edited": false, "score": 0, "creation_date": 1569039744, "post_id": 58020800, "comment_id": 102475959, "body": "Robert i did but not working  (\\d{1,4})[\\s|](\\d{4,6})[\\s|](\\d{4,6})[\\s|](\\d{3,4}) i&#39;m using regex101.com for testing."}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "reply_to_user": {"reputation": 377, "user_id": 9169752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaa4ea1d5239935a9e8a698f297ed7b9?s=128&d=identicon&r=PG&f=1", "display_name": "Dr Jay", "link": "https://stackoverflow.com/users/9169752/dr-jay"}, "edited": false, "score": 0, "creation_date": 1569071361, "post_id": 58020800, "comment_id": 102481702, "body": "@DrJay Your regex calls for 4 to 6 digits, but your input has only 2 (between the pipes)."}], "tags": [], "owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "is_accepted": true, "score": 0, "last_activity_date": 1568944748, "last_edit_date": 1568944748, "creation_date": 1568944336, "answer_id": 58020800, "question_id": 58017772, "link": "https://stackoverflow.com/questions/58017772/perl-adding-two-regex-in-the-same-time/58020800#58020800", "title": "Perl Adding two regex in the same time", "body": "<p>Your regex</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>/(\\d{1,4})\\s?\\|(\\d{4,6})\\s?\\|(\\d{3,4})/)\n</code></pre>\n\n<p>looks for an optional space and then a pipe, i.e., there must be a pipe for the regex to match. If you want either pipe or white space, use a <a href=\"https://perldoc.perl.org/perlrecharclass.html#Bracketed-Character-Classes\" rel=\"nofollow noreferrer\">bracketed character class</a> of the two <code>[\\s|]</code>:</p>\n\n<pre><code>/(\\d{1,4})[\\s|](\\d{4,6})[\\s|](\\d{3,4})/)\n</code></pre>\n\n<p>Because it's a bracketed character class, you also don't need to escape the pipe symbol.</p>\n\n<p>Note though that your example inputs don't fit the regex you posted; in particular, your examples don't have a \"cmd\" prefix and they only start with one leading digit, not 2 to 4, as your regex expects. I've adjusted the regex here to match the example input.</p>\n\n<pre><code>robert@saaz:~$ echo 1 1111 123 | perl -ne 'print \"matches\\n\" if (m/(\\d{1,4})[\\s|](\\d{4,6})[\\s|](\\d{3,4})/);' \nmatches\n\nrobert@saaz:~$ echo '1|1111|123' | perl -ne 'print \"matches\\n\" if (m/(\\d{1,4})[\\s|](\\d{4,6})[\\s|](\\d{3,4})/);' \nmatches\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 9169752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaa4ea1d5239935a9e8a698f297ed7b9?s=128&d=identicon&r=PG&f=1", "display_name": "Dr Jay", "link": "https://stackoverflow.com/users/9169752/dr-jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 58020800, "answer_count": 1, "score": 0, "last_activity_date": 1568944748, "creation_date": 1568921002, "last_edit_date": 1568921478, "question_id": 58017772, "link": "https://stackoverflow.com/questions/58017772/perl-adding-two-regex-in-the-same-time", "title": "Perl Adding two regex in the same time", "body": "<p>Its for perl script, I want to put two regex into same pattern attribute .First regex should enter <br>digit number {2,4} two or four same at the next range.</p>\n\n<p>exmaple white space 1 1111 123</p>\n\n<p>example with vertical bar ( | ) 1|1111|123</p>\n\n<p>Here's the regex for white space only work fine</p>\n\n<pre><code>if($msg{'what'} =~ /\\cmd\\s(\\d{2,4})\\s(\\d{4,6})\\s(\\d{3,4})/)\n</code></pre>\n\n<p>with two pattern \\s and | its not working.</p>\n\n<pre><code>if($msg{'what'} =~ /\\cmd\\s(\\d{2,4})\\s?\\|(\\d{4,6})\\s?\\|(\\d{3,4})/)\n</code></pre>\n\n<p>desired output is to get result with a space or a vertical bar in one line regex.</p>\n\n<p>1|1111|123 or 1 1111 123</p>\n"}, {"tags": ["perl", "stdout", "filehandle"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1568918985, "post_id": 58017248, "comment_id": 102438193, "body": "Depending on OS, <code>&#47;dev&#47;stdout</code> may work."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1568919320, "post_id": 58017248, "comment_id": 102438306, "body": "And no, there are no Perl-specific ways to get around the filename arg in three-arg open. This is why it&#39;s considered safer than older options."}, {"owner": {"reputation": 207, "user_id": 5121205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72773a0a615485891d15782714441413?s=128&d=identicon&r=PG&f=1", "display_name": "Sagebrush Gardener", "link": "https://stackoverflow.com/users/5121205/sagebrush-gardener"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1568919548, "post_id": 58017248, "comment_id": 102438401, "body": "@Grinnz /dev/stdout is a brilliant idea. Unfortunately, it doesn&#39;t work on my system: <code>couldn&#39;t open log file &#47;dev&#47;stdout</code>. If I try directly from the command line with <code>echo &quot;foo&quot; &gt; &#47;dev&#47;stdout</code>, I get <code>-bash: &#47;dev&#47;stdout: Permission denied</code>. <code>uname -a</code> returns <code>Linux myhost 2.6.32-754.17.1.el6.x86_64 #1 SMP Thu Jun 20 11:47:12 EDT 2019 x86_64 x86_64 x86_64 GNU&#47;Linux</code>"}], "owner": {"reputation": 207, "user_id": 5121205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72773a0a615485891d15782714441413?s=128&d=identicon&r=PG&f=1", "display_name": "Sagebrush Gardener", "link": "https://stackoverflow.com/users/5121205/sagebrush-gardener"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1568919389, "answer_count": 0, "score": 0, "last_activity_date": 1568921390, "creation_date": 1568918594, "last_edit_date": 1568921390, "question_id": 58017248, "link": "https://stackoverflow.com/questions/58017248/log-command-line-parameter-to-send-script-output-to-stdout", "closed_reason": "Duplicate", "title": "&quot;log=...&quot; command-line parameter to send script output to STDOUT?", "body": "<p>I have a perl script that requires a <code>--log=&lt;log&gt;</code> command line parameter. Obviously, this sends the script output to the filename specified. <strong>Without changing the script</strong>, is there any command-line value I can supply that would send output to STDOUT instead of a log file? When I supply \"STDOUT\", as you would probably expect, it sends the output to a file named \"STDOUT\".</p>\n\n<p>Here is the relevant code:</p>\n\n<pre><code>use Getopt::Long;\n...\nmy %C;\nmy $result = GetOptions(\"log=s\" =&gt; \\$C{log},\n                        ...\n                      );\n...\nmy $log_file = $C{log};\n...\nmy $log_fh;\nif(open($log_fh, '&gt;&gt;', $log_file)) {\n  print $log_fh $txt;\n  close($log_fh);\n} else {\n  print STDERR \"couldn't open log file $log_file\\n\";\n}\n</code></pre>\n\n<p>I suspect the answer is no, but I was hoping someone wiser than me might have a solution.</p>\n\n<p>Edit: It has been suggested that this is a duplicate of <a href=\"https://stackoverflow.com/questions/7756609/pass-stdout-as-file-name-for-command-line-util\">pass stdout as file name for command line util?</a> . While there is some overlap, that question involves a command line utility in an unspecified language. My question relates specifically to Perl, and even more specifically to the code above, and so could potentially have a different answer.</p>\n"}, {"tags": ["perl", "split"], "answers": [{"tags": [], "owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "is_accepted": false, "score": 1, "last_activity_date": 1568924869, "creation_date": 1568924869, "answer_id": 58018522, "question_id": 58015198, "link": "https://stackoverflow.com/questions/58015198/how-do-i-split-the-string/58018522#58018522", "title": "How do I split the string", "body": "<p>That code is treating the input as being <strong>multiple</strong> lines. To apply an operation across elements of an array, you need to use <code>map</code>:</p>\n\n<pre><code>my @result_strings = map {(split /\"/, $_)[1]} @lines;\nprint join \"\\n\", @result_strings; print \"\\n\";\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 478, "user_id": 1338382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vs6If.jpg?s=128&g=1", "display_name": "rprakash", "link": "https://stackoverflow.com/users/1338382/rprakash"}, "is_accepted": false, "score": 1, "last_activity_date": 1568967926, "creation_date": 1568967926, "answer_id": 58024625, "question_id": 58015198, "link": "https://stackoverflow.com/questions/58015198/how-do-i-split-the-string/58024625#58024625", "title": "How do I split the string", "body": "<p><strong>Method 1 :</strong> \nYou can use regex match to get the string between double quotes. Learn about  \"Pattern Memory\" <a href=\"https://users.cs.cf.ac.uk/Dave.Marshall/PERL/node90.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<pre><code>my $file = \"/path/to/scan_result\";\nopen (my $infile, \"&lt;\", $file) or die \"Can't open :$!\";\nwhile (&lt;$infile&gt;) {\n    print $1.\"\\n\" if ($_ = /\\\"(.*)\\\"/);\n}\n</code></pre>\n\n<p><strong>Method 2:</strong> \nSimilar to your code, split the string at double quotes and get the value at index 1 from the array after the split.</p>\n\n<pre><code>my $file = \"/path/to/scan_result\";\nopen (my $infile, \"&lt;\", $file) or die \"Can't open :$!\";\nwhile (&lt;$infile&gt;) {\n    print [split /\\\"/, $_]-&gt;[1].\"\\n\";\n}\n</code></pre>\n\n<p>And, always use three argument form of <a href=\"http://modernperlbooks.com/mt/2010/04/three-arg-open-migrating-to-modern-perl.html\" rel=\"nofollow noreferrer\">open</a>. </p>\n"}], "owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1568967926, "creation_date": 1568909917, "question_id": 58015198, "link": "https://stackoverflow.com/questions/58015198/how-do-i-split-the-string", "title": "How do I split the string", "body": "<p>ALL,</p>\n\n<p>I have a file which contains following string:</p>\n\n<p><code>VERIFYFAIL usbhd-sdb \"There were 1 files with viruses detected. The device has been detached. Infections found: \"</code></p>\n\n<p>And here is my code to get the results:</p>\n\n<pre><code>#!/usr/bin/perl\nopen( INFILE, \"/home/me/scan_result\" ) || die \"Can't open file\";\npush( @lines, $_ ) while &lt;INFILE&gt;;\nprint @lines, \"\\n\";\n($result_string) = (split /\"/, @lines)[1];\nprint $result_string, \"\\n\";\nclose INFILE;\n</code></pre>\n\n<p>However, while the first print successfully prints the string from the file, the second print prints an empty line.</p>\n\n<p>Basically I'm looking for a string between the quotes. But for some reason I'm failing to get it.</p>\n\n<p>Could someone see my error?</p>\n\n<p>TIA!</p>\n"}, {"tags": ["perl", "windows-10", "restart"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1568964878, "post_id": 58014569, "comment_id": 102450184, "body": "Please provide a reproducible example. <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 113, "user_id": 3669468, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001529134047/picture?type=large", "display_name": "petro4213", "link": "https://stackoverflow.com/users/3669468/petro4213"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1568973513, "post_id": 58014569, "comment_id": 102454500, "body": "I added an example to my original post (as it&#39;s not possible to get decent code formatting done in a comment)"}], "owner": {"reputation": 113, "user_id": 3669468, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001529134047/picture?type=large", "display_name": "petro4213", "link": "https://stackoverflow.com/users/3669468/petro4213"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1568973429, "creation_date": 1568907474, "last_edit_date": 1568973429, "question_id": 58014569, "link": "https://stackoverflow.com/questions/58014569/how-do-i-restart-my-perl-script-on-windows-10", "title": "How do I restart my Perl script on Windows 10", "body": "<p>I have a Perl script with a GUI that restarts itself, if I press a button in the GUI.\nThis is done through this simple call in the callback of the button:<br>\n<code>exec( $pathToMyself );</code><br>\nThis works fine on Windows 7. But on Windows 10, the script ends (and the GUI disappears), but it doesn't restart, unless I go to the command window, which I used to initially call the script, and press the <code>Enter</code> key there.<br>\nI don't like this behavior. Can anyone explain, where this comes from or give me a hint on how to restart my script without having to press <code>Enter</code>?<br>\nThanks, Gerhard\n<br><br>\nHere's a simple reproducible example:<br></p>\n\n<pre><code>    use Tk;\n    use strict;\n    my $pathToMyself = $0;\n\n    my $mw = MainWindow-&gt;new();\n    my $but = $mw-&gt;Button(-text =&gt; \"Restart\", -command =&gt; \\&amp;restartMe)-&gt;pack();\n    MainLoop;\n\n    sub restartMe {\n      print \"Restarting $pathToMyself...\\n\";\n      exec( $pathToMyself );\n    }\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1568904278, "post_id": 58013485, "comment_id": 102431332, "body": "what do you want to <i>keep</i>?"}, {"owner": {"reputation": 18299, "user_id": 2191572, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/TWbVr.png?s=128&g=1", "display_name": "MonkeyZeus", "link": "https://stackoverflow.com/users/2191572/monkeyzeus"}, "edited": false, "score": 1, "creation_date": 1568904352, "post_id": 58013485, "comment_id": 102431373, "body": "Which chars fail exactly? A simple search for &quot;regex remove emojis&quot; presents many possible solutions so is there any reason that the existing Internet answers do not suit your needs?"}, {"owner": {"reputation": 19, "user_id": 11638033, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--gVacGF51mE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcS0L3yHZ3xVswNXk6nbKKNY4BJ4A/mo/photo.jpg?sz=128", "display_name": "Alex Storm", "link": "https://stackoverflow.com/users/11638033/alex-storm"}, "edited": false, "score": 0, "creation_date": 1568905942, "post_id": 58013485, "comment_id": 102432295, "body": "I have edited my post to clarify the question. I want to keep latin and cyrillic non graphical characters only"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1568907907, "post_id": 58013485, "comment_id": 102433341, "body": "Where does your string come from? If it is defined literally in source, you may need <code>use utf8;</code>. If it comes from STDIN or a file or socket, you may need to decode it from UTF-8, or set an <code>:encoding(UTF-8)</code> layer on the handle. And then make sure it is encoded back to UTF-8 for output."}, {"owner": {"reputation": 19, "user_id": 11638033, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--gVacGF51mE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcS0L3yHZ3xVswNXk6nbKKNY4BJ4A/mo/photo.jpg?sz=128", "display_name": "Alex Storm", "link": "https://stackoverflow.com/users/11638033/alex-storm"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1568908810, "post_id": 58013485, "comment_id": 102433780, "body": "@Grinnz, &#39;use utf8&#39; pragma is set. String comes from CGI::Fast"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1568909894, "post_id": 58013485, "comment_id": 102434248, "body": "@AlexStorm The CGI.pm and CGI::Fast modules do not decode parameters, so you need to do that. <code>my $param = decode &#39;UTF-8&#39;, scalar $cgi-&gt;param(&#39;foo&#39;);</code> with decode from <a href=\"https://perldoc.pl/Encode\" rel=\"nofollow noreferrer\">Encode</a>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1568909955, "post_id": 58013485, "comment_id": 102434268, "body": "See also <a href=\"http://blogs.perl.org/users/grinnz/2018/11/modern-perl-cgi.html\" rel=\"nofollow noreferrer\">blogs.perl.org/users/grinnz/2018/11/modern-perl-cgi.html</a>"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1568922301, "post_id": 58013485, "comment_id": 102439569, "body": "As an aside, <code>[a-c]|[e-f]</code> can be simplified to <code>[a-ce-f]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1568917768, "post_id": 58015154, "comment_id": 102437682, "body": "You don&#39;t need to use alternation <code>|</code> inside a character class"}], "tags": [], "owner": {"reputation": 19, "user_id": 11638033, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--gVacGF51mE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcS0L3yHZ3xVswNXk6nbKKNY4BJ4A/mo/photo.jpg?sz=128", "display_name": "Alex Storm", "link": "https://stackoverflow.com/users/11638033/alex-storm"}, "is_accepted": false, "score": 0, "last_activity_date": 1568922011, "last_edit_date": 1568922011, "creation_date": 1568909722, "answer_id": 58015154, "question_id": 58013485, "link": "https://stackoverflow.com/questions/58013485/remove-all-graphical-unicode-characters-from-string/58015154#58015154", "title": "Remove all graphical unicode characters from string", "body": "<p>I am posting solution to my question. This is a perl-version of the answer given <a href=\"https://stackoverflow.com/a/49516025/11638033\">here</a></p>\n\n<p>Created a whitelist for:</p>\n\n<ul>\n<li>all numeric (p{N})</li>\n<li>letter (p{L})</li>\n<li>mark (p{M})</li>\n<li>punctuation (p{P})</li>\n<li>whitespace/separator (p{Z})</li>\n<li>other formatting (p{Cf}) and other characters above U+FFFF in Unicode (p{Cs}), and newline (\\s) characters</li>\n<li>p{L} specifically includes the characters from other alphabets such as Cyrillic, Latin, Kanji, etc.</li>\n</ul>\n\n<pre><code>$text =~ s/[^\\p{L}\\p{M}\\p{N}\\p{P}\\p{Z}\\p{Cf}\\p{Cs}]//g;\n</code></pre>\n\n<p>or, blacklist all special characters</p>\n\n<pre><code>$text =~ s/\\p{So}//g;\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11638033, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--gVacGF51mE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcS0L3yHZ3xVswNXk6nbKKNY4BJ4A/mo/photo.jpg?sz=128", "display_name": "Alex Storm", "link": "https://stackoverflow.com/users/11638033/alex-storm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 384, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568922011, "creation_date": 1568903788, "last_edit_date": 1568905600, "question_id": 58013485, "link": "https://stackoverflow.com/questions/58013485/remove-all-graphical-unicode-characters-from-string", "title": "Remove all graphical unicode characters from string", "body": "<p>How can I remove all graphical unicode characters (emoji, symbols, flags, etc) from a string?</p>\n\n<p>I have tried:</p>\n\n<pre><code>$text =~ s/[\\x{0001F600}-\\x{0001F64F}]|[\\x{0001F300}-\\x{0001F5FF}]|[\\x{0001F680}-\\x{0001F6FF}]|[\\x{0001F1E0}-\\x{0001F1FF}]|[\\x{2600}-\\x{26FF}]//g;\n</code></pre>\n\n<p>It removes some characters, but not all.</p>\n\n<p>These characters are left untouched by regex:</p>\n\n<p>\ud83e\udd23 \ud83e\udd70 \ud83e\udd17 \ud83e\udd29 \ud83e\udd14 \ud83e\udd28 \ud83e\udd10 \ud83e\udd24 \ud83e\udd11 \ud83e\udd2f \ud83e\udd75 \ud83e\udd76 \ud83e\udd2a \ud83e\udd2c \ud83e\udd12 \ud83e\udd15 \ud83e\udd22 \ud83e\udd2e \ud83e\udd27 \ud83e\udd20 \ud83e\udd21 \ud83e\udd73 \ud83e\udd74 \ud83e\udd7a \ud83e\udd25 \ud83e\udd2b \ud83e\udd2d \ud83e\uddd0 \ud83e\udd13 \ud83e\udd16 \ud83e\udd23 \ud83e\udd70 \ud83e\udd17 \ud83e\udd29 \ud83e\udd14 \ud83e\udd28 \ud83e\udd10 \ud83e\udd24 \ud83e\udd11 \ud83e\udd2f \ud83e\udd75 \ud83e\udd76 \ud83e\udd2a \ud83e\udd2c \ud83e\udd12 \ud83e\udd15 \ud83e\udd22 \ud83e\udd2e \ud83e\udd27 \ud83e\udd20 \ud83e\udd21 \ud83e\udd73 \ud83e\udd74 \ud83e\udd7a \ud83e\udd25 \ud83e\udd2b \ud83e\udd2d \ud83e\uddd0 \ud83e\udd13 \ud83e\udd16\ud83e\uddd2 \ud83e\uddd1 \ud83e\uddd3 \ud83e\uddd5 \ud83e\uddd4 \ud83e\uddb0 \ud83e\uddb0 \ud83e\uddb1 \ud83e\uddb1 \ud83e\uddb2\ud83e\uddb3\ud83e\uddb3\ud83e\uddb8\ud83e\uddb8\ud83e\uddb9\ud83e\uddb9\ud83e\udd35 \ud83e\udd34 \ud83e\udd36 \ud83e\uddd9 \ud83e\uddd9 \ud83e\udddd \ud83e\udddd \ud83e\udddb \ud83e\udddb \ud83e\udddf \ud83e\udddf \ud83e\uddde \ud83e\uddde \ud83e\udddc \ud83e\udddc \ud83e\uddda \ud83e\uddda \ud83e\udd30 \ud83e\udd31 \ud83e\udd26 \ud83e\udd26 \ud83e\udd37 \ud83e\udd37 \ud83e\uddd6 \ud83e\uddd6 \ud83e\udd33 \ud83e\udd32 \ud83e\udd1d \ud83e\udd1b \ud83e\udd1c \ud83e\udd1e \ud83e\udd1f \ud83e\udd18 \ud83e\udd1a \ud83e\udd19 \ud83e\uddb5 \ud83e\uddb6 \ud83e\udde0 \ud83e\uddb4 \ud83e\uddb7\ud83e\udde5 \ud83e\udd7e \ud83e\udd7f \ud83e\udde6 \ud83e\udde4 \ud83e\udde3 \ud83e\udde2 \ud83e\udd7d \ud83e\udd7c \ud83e\uddf5 \ud83e\uddf6</p>\n\n<p>What did I miss?</p>\n"}, {"tags": ["perl", "perl5.8"], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1568906179, "post_id": 58011528, "comment_id": 102432446, "body": "To add to this: the <a href=\"https://perldoc.pl/functions/use\" rel=\"nofollow noreferrer\">use</a> statement is documented to do two things. The first is to <code>require</code> the module, which requires passing the name that corresponds to its file path, with <code>::</code> translating to <code>&#47;</code>. The second is to <code>import</code> from the module, which requires passing the package name. Thus for both of these to work in one <code>use</code> statement, the file path and package name must match."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1568898445, "last_edit_date": 1568898445, "creation_date": 1568897806, "answer_id": 58011528, "question_id": 58011450, "link": "https://stackoverflow.com/questions/58011450/how-to-correctly-import-a-function-from-a-custom-module/58011528#58011528", "title": "How to correctly import a function from a custom module", "body": "<p>For best results, the package names you use should match the package names you supply to the <code>use</code> directive. Use</p>\n\n<pre><code>package Person;\n...\npackage PersonInit;\n...\nuse Person;\nuse PersonInit;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>package Person::Person;\n...\npackage Person::PersonInit;\n...\nuse Person::Person;\nuse Person::PersonInit;\n</code></pre>\n\n<p>but not</p>\n\n<pre><code>package Person;\n...\npackage PersonInit;\n...\nuse Person::Person;\nuse Person::PersonInit;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1568898808, "post_id": 58011721, "comment_id": 102427861, "body": "I can reproduce OP&#39;s problem by just running the code he provided. The only thing I need to do to fix it is replace <code>package PersonInit</code> by <code>package Person::PersonInit</code> in PersonInit.pm. (the same thing should be done in Person.pm, but that doesn&#39;t cause any error when I run it) (using perl 5.22 btw)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1568898457, "creation_date": 1568898457, "answer_id": 58011721, "question_id": 58011450, "link": "https://stackoverflow.com/questions/58011450/how-to-correctly-import-a-function-from-a-custom-module/58011721#58011721", "title": "How to correctly import a function from a custom module", "body": "<p>I suspect you're not sharing the code that you're actually using, as I'm not getting the error that you describe, but I am getting a load of other errors.</p>\n\n<p>The errors I'm getting are all down to confusion over the link between module paths and package names. Because your module files are in a directory called \"Person\", they should actually be called \"Person::Person\" and \"Person::PersonInit\". You seem to realise that when you're loading the modules (<code>use Person::Person</code>) but not when you're naming the packages (<code>package Person</code>) or calling class methods (<code>Person-&gt;new(...)</code>).</p>\n\n<p>Once I edited your files to consistently use the correct names for the packages, everything worked as expected.</p>\n\n<p>I'll note that you're defining both <code>@EXPORT</code> and <code>@EXPORT_OK</code>. Your exported subroutine only needs to be in one of those.</p>\n\n<p>I'm using Perl 5.26.1. From the tags on your question, it seems that you're using 5.8.something (I guess it's likely to be 5.8.8). It's possible that you're falling over a bug that has been fixed in the over thirteen years since that version was released - but, to be honest, I don't recall hearing about anything similar. Anyway, I'd urge you to upgrade to a newer version of Perl.</p>\n"}], "owner": {"reputation": 21, "user_id": 12090443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4caf4f089a418d07cee7693b8dbbec6?s=128&d=identicon&r=PG&f=1", "display_name": "bussirs", "link": "https://stackoverflow.com/users/12090443/bussirs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 58011528, "answer_count": 2, "score": 0, "last_activity_date": 1568898457, "creation_date": 1568897528, "question_id": 58011450, "link": "https://stackoverflow.com/questions/58011450/how-to-correctly-import-a-function-from-a-custom-module", "title": "How to correctly import a function from a custom module", "body": "<p>I need some clue on how to import correctly a function from a custom module in perl. (here person_init from the PersonInit module).</p>\n\n<p>This is my folder representation : </p>\n\n<pre><code>TestObject.pl\nPerson/Person.pm\nPerson/PersonInit.pm\n</code></pre>\n\n<p>here is the code of TestObject.pl</p>\n\n<pre><code>use FindBin 1.44 qw( $RealBin );\nuse lib $RealBin;\nuse warnings;        # Avertissement des messages d'erreurs\nuse strict;  \nuse Person::PersonInit;\n\nperson_init();\nprint('toto');\n</code></pre>\n\n<p>in Person.pm : </p>\n\n<pre><code>package Person;    # Nom du package, de notre classe\nuse warnings;        # Avertissement des messages d'erreurs\nuse strict;          # V\u00e9rification des d\u00e9clarations\nuse Carp;            # Utile pour \u00e9mettre certains avertissements\nsub new {\n  my ( $classe, $ref_arguments ) = @_;\n\n  # V\u00e9rifions la classe\n  $classe = ref($classe) || $classe;\n\n  # Cr\u00e9ation de la r\u00e9f\u00e9rence anonyme de hachage vide (futur objet)\n  my $this = {};\n\n  # Liaison de l'objet \u00e0 la classe\n  bless $this, $classe;\n\n  if (! ( defined $ref_arguments-&gt;{nom} )) {\n    $ref_arguments-&gt;{nom} = 'inconnu';\n  }\n\n  $this-&gt;{_NOM}          = $ref_arguments-&gt;{nom};\n  $this-&gt;{_PRENOM}       = $ref_arguments-&gt;{prenom};\n  $this-&gt;{_TEL}           = $ref_arguments-&gt;{tel};\n  $this-&gt;{_MAIL}           = $ref_arguments-&gt;{mail};\n  $this-&gt;{_GRADE}           = $ref_arguments-&gt;{grade};\n  $this-&gt;{_SEXE}         = $ref_arguments-&gt;{sexe};\n  $this-&gt;{_SERVICE}         = $ref_arguments-&gt;{service};\n\n  return $this;\n}\n1;                # Important, \u00e0 ne pas oublier\n__END__ \n</code></pre>\n\n<p>and in PersonInit.pm : </p>\n\n<pre><code>#/usr/bin/perl\npackage PersonInit;\nuse strict;\nuse POSIX;\nuse warnings;\n\nuse FindBin 1.44 qw( $RealBin );\nuse lib $RealBin;\nuse Person::Person;\nuse Exporter;\n\nour @ISA= qw( Exporter );\n\n# these CAN be exported.\nour @EXPORT_OK = qw( person_init );\n\n# these are exported by default.\nour @EXPORT = qw( person_init );\n\n\n\nsub person_init {\nmy ($arg) = @_;\nmy $Person = Person-&gt;new({\n    prenom        =&gt; 'Jean',\n    sexe          =&gt; 'M',\n    tel =&gt; '3',\n    mail  =&gt; '4',\n        grade  =&gt; 'g',\n        service  =&gt; 's',\n  });\n  print ($Person-&gt;{_NOM});\n  print ('toto');\n  return $Person;\n };\n\n1;\n</code></pre>\n\n<p>So when i try to launch t i've got this error : </p>\n\n<p>Undefined subroutine &amp;main::Person_Init called at D:\\Workspace\\Mapping\\TestObject.pl line 8.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 11058484, "user_type": "registered", "profile_image": "https://graph.facebook.com/2258396160903494/picture?type=large", "display_name": "luffy008", "link": "https://stackoverflow.com/users/11058484/luffy008"}, "edited": false, "score": 0, "creation_date": 1568899122, "post_id": 58009151, "comment_id": 102428074, "body": "Thanks, it worked. But I have another question. In this, all I am doing is capturing the output of the second Perl script. Is there any way that I can return some value from the second Perl script. Say from the first script I have to call some function which is in the second script and that function returns back some value to the first. I tried require() but that would load the second script which I don&#39;t want."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 27, "user_id": 11058484, "user_type": "registered", "profile_image": "https://graph.facebook.com/2258396160903494/picture?type=large", "display_name": "luffy008", "link": "https://stackoverflow.com/users/11058484/luffy008"}, "edited": false, "score": 0, "creation_date": 1568905934, "post_id": 58009151, "comment_id": 102432289, "body": "@luffy008 If you don&#39;t want to load it in the current process, then running it as a separate process is the only other option. The best way to not have to run a separate process is to make it a real module that can be loaded via <code>use</code> and then the subroutine can be called directly."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1568916936, "last_edit_date": 1568916936, "creation_date": 1568889498, "answer_id": 58009151, "question_id": 58008974, "link": "https://stackoverflow.com/questions/58008974/why-ipcsystemsimplecapture-is-not-working-with-arguments/58009151#58009151", "title": "Why IPC::System::Simple(capture) is not working with arguments", "body": "<p>If you only pass a single scalar, <code>capture</code> expects it to be a shell command.</p>\n\n<p>As such, <code>capture('perl xyz.pl Hello')</code> works.</p>\n\n<p>If you pass multiple scalars, <code>capture</code> expects the first to be a path to a program to execute. The rest are passed as arguments.</p>\n\n<p>As such, <code>capture('perl xyz.pl', 'Hello')</code> doesn't work.</p>\n\n<hr>\n\n<p>You could use</p>\n\n<pre><code>use IPC::System::Simple qw( capture );\n\nmy @cmd = ( 'perl', 'xyz.pl', 'Hello' );\ncapture(@cmd)\n</code></pre>\n\n<p>But you never want to use <code>capture</code> unless you pass a single scalar that's a shell command. Use <code>capturex</code> when passing a path and arguments.</p>\n\n<pre><code>use IPC::System::Simple qw( capturex );\n\nmy @cmd = ( 'perl', 'xyz.pl', 'Hello' );\ncapturex(@cmd)\n</code></pre>\n\n<hr>\n\n<p>But let's say you get the string <code>perl xyz.pl</code> from elsewhere. A shell needs to be invoked, so we need to convert the arguments in to shell literals.</p>\n\n<pre><code>use IPC::System::Simple qw( capture );\nuse String::ShellQuote  qw( shell_quote );\n\nmy $cmd = 'perl xyz.pl';\nmy @extra_args = 'Hello';\nmy $full_cmd = $cmd . ' ' . shell_quote(@extra_args);\ncapture($cmd)\n</code></pre>\n\n<p>Alternatively,</p>\n\n<pre><code>use IPC::System::Simple qw( capturex );\n\nmy $cmd = 'perl xyz.pl';\nmy @extra_args = 'Hello';\ncapturex('sh', '-c', 'eval $0 \"$@\"', $cmd, @extra_args)\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 11058484, "user_type": "registered", "profile_image": "https://graph.facebook.com/2258396160903494/picture?type=large", "display_name": "luffy008", "link": "https://stackoverflow.com/users/11058484/luffy008"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 58009151, "answer_count": 1, "score": 0, "last_activity_date": 1568916936, "creation_date": 1568888844, "question_id": 58008974, "link": "https://stackoverflow.com/questions/58008974/why-ipcsystemsimplecapture-is-not-working-with-arguments", "title": "Why IPC::System::Simple(capture) is not working with arguments", "body": "<p>I am trying to call a second script from the main script. When I am passing the argument in the command itself using capture, it's working. But when I am trying to send the command and arguments separately in capture function it's giving me an error that it can't find the specified file.</p>\n\n<p><strong>Second script</strong></p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.010;\nuse strict;\nuse warnings;\n\nmy $word= $ARGV[0];\n\nmy $crpyt = \"$word crypted\";\nprint \"$crpyt\\n\";\n\nmy $decrypt = \"$word decrypted\";\nprint \"$decrypt\\n\";\n</code></pre>\n\n<p><strong>main.pl</strong></p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.010;\nuse strict;\nuse warnings;\n\nuse IPC::System::Simple qw(capture capturex);\n\nmy $cmd= 'perl xyz.pl Hello';\nmy @arr = capture($cmd);\n\nprint \"$arr[0]\";\nprint \"$arr[1]\\n\";\n</code></pre>\n\n<p>This is working\n<strong>Output:</strong></p>\n\n<pre><code>Hello crypted\nHello decrypted\n</code></pre>\n\n<p><strong>BUT</strong>\n<strong>main.pl</strong></p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.010;\nuse strict;\nuse warnings;\n\nuse IPC::System::Simple qw(capture capturex);\n\nmy $cmd= 'perl xyz.pl';\nmy @arg=(\"Hello\");\nmy @arr = capture($cmd,@arg);\n\nprint \"$arr[0]\";\nprint \"$arr[1]\\n\";\n</code></pre>\n\n<p>This is not working. It says\n<code>\"perl xyz.pl\" failed to start: \"The system cannot find the file specified\" at main.pl line 11</code></p>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 25, "user_id": 8993244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b7526a8052f1353ff4e39e254554138?s=128&d=identicon&r=PG&f=1", "display_name": "&#214;nos", "link": "https://stackoverflow.com/users/8993244/%c3%96nos"}, "reply_to_user": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1568878751, "post_id": 58005038, "comment_id": 102416839, "body": "No problem installing <code>perl</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568888857, "post_id": 58005038, "comment_id": 102422136, "body": "If so, the easiest way is to read the entire file into memory. <code>-0777</code> will cause the whole file to be treated as the line when using <code>-n</code> or <code>-p</code>."}, {"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1568899287, "post_id": 58005038, "comment_id": 102428206, "body": "@EdMorton: taking nothing away from <code>awk</code> Ed :) ! just wanted to state there are no straightforward ways like <code>-0</code> option in <code>perl</code>."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1568899742, "post_id": 58005038, "comment_id": 102428501, "body": "@Inian the awk equivalent of <code>-v RS=&#39;\\0&#39;</code> seems pretty straightforward to me and has the benefit of being consistent with how you&#39;d specify any other char as the record separator, it&#39;s not unique to NUL."}, {"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1568899846, "post_id": 58005038, "comment_id": 102428556, "body": "@EdMorton: I&#39;ve removed my comment Ed! Again nothing against <code>awk</code>"}], "answers": [{"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 0, "last_activity_date": 1568900826, "creation_date": 1568900826, "answer_id": 58012523, "question_id": 58005038, "link": "https://stackoverflow.com/questions/58005038/add-lines-based-on-logic/58012523#58012523", "title": "Add lines based on logic", "body": "<p>This isn't quite right and I don't have time to debug it right now but the approach is to separate your records by the multi-line string you do NOT want replaced and then within each record replace the string you do want replaced:</p>\n\n<pre><code>BEGIN { RS=\";(FALSE|TRUE);-?[0-9]{0,3};-?[0-9]{0,3}.?[0-9]{0,3};\\n\\n[*][*] #MEA_DATA_END [*][*];\"; ORS=\"\" }\n{ print gensub(/;(FALSE|TRUE);-?[0-9]{0,3};-?[0-9]{0,3}.?[0-9]{0,3};/,\"&amp;\\n\\n** #MEA_DATA_END **;\",\"g\") RT }\n</code></pre>\n\n<p>The above uses GNU awk for multi-char RS and RT. You'd save it in a file named <code>foo.awk</code> and then execute it as <code>awk -f foo.awk inputfile</code>. You could save the leading regexp part in a variable to save having to hard-code it twice.</p>\n"}], "owner": {"reputation": 25, "user_id": 8993244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b7526a8052f1353ff4e39e254554138?s=128&d=identicon&r=PG&f=1", "display_name": "&#214;nos", "link": "https://stackoverflow.com/users/8993244/%c3%96nos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569219839, "creation_date": 1568875006, "last_edit_date": 1569219839, "question_id": 58005038, "link": "https://stackoverflow.com/questions/58005038/add-lines-based-on-logic", "title": "Add lines based on logic", "body": "<p>Looking for a way to add three lines to a file if they dosn't exist based on some logic.</p>\n\n<p>I have found the regular expressions needed to find some single and multiline patterns but doesn't know how to tie it all together.</p>\n\n<p>The logic goes like this:</p>\n\n<p>Add these three lines...</p>\n\n<pre><code>\n** #MEA_DATA_END **;\nMEA OK;TRUE\n</code></pre>\n\n<p>...if...</p>\n\n<pre><code>\\;(FALSE|TRUE)\\;-?\\d{0,3}\\;-?\\d{0,3}.?\\d{0,3}\\;\\n\n</code></pre>\n\n<p>...is not followed by...</p>\n\n<pre><code>$\\n^\\*\\* #MEA_DATA_END \\*\\*\\;\n</code></pre>\n\n<p>... or when last line of file is:</p>\n\n<pre><code>\\;(FALSE|TRUE)\\;-?\\d{0,3}\\;-?\\d{0,3}.?\\d{0,3}\\;\\z\n</code></pre>\n\n<p>Input file that wouldn't be changed:</p>\n\n<pre><code>FALSE;FALSE;-1;25.0;FALSE;FALSE;-1;25.0;\n\n** #MEA_DATA_END **;\nMEA OK;TRUE\n</code></pre>\n\n<p>Input file that will be changed:</p>\n\n<pre><code>FALSE;FALSE;-1;25.0;FALSE;FALSE;-1;25.0;\n\nSome other text\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>FALSE;FALSE;-1;25.0;FALSE;FALSE;-1;25.0;\n\n** #MEA_DATA_END **;\nMEA OK;TRUE\n\nSome other text\n</code></pre>\n\n<p>Another input file that will be changed:</p>\n\n<pre><code>FALSE;FALSE;-1;25.0;FALSE;FALSE;-1;25.0;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>FALSE;FALSE;-1;25.0;FALSE;FALSE;-1;25.0;\n\n** #MEA_DATA_END **;\nMEA OK;TRUE\n</code></pre>\n\n<p>I would like to create a script using sed or awk or similar. Does anyone know a solution to this?</p>\n"}, {"tags": ["arrays", "perl"], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 3, "last_activity_date": 1568870370, "creation_date": 1568870370, "answer_id": 58004146, "question_id": 58004088, "link": "https://stackoverflow.com/questions/58004088/convert-array-to-a-string-with-newlines-embeded-in-string/58004146#58004146", "title": "Convert array to a string with newlines embeded in string", "body": "<p>To join an array with newlines in between, use</p>\n\n<pre><code>join(\"\\n\", @array)\n</code></pre>\n\n<p>Your code uses the contents of the <code>$\"</code> variable as the separator, which by default contains a space.</p>\n"}, {"tags": [], "owner": {"reputation": 153, "user_id": 8225681, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t4oEruJ6XSQ/AAAAAAAAAAI/AAAAAAAAAmc/PukqCf1dVQ8/photo.jpg?sz=128", "display_name": "Himesh Ravi", "link": "https://stackoverflow.com/users/8225681/himesh-ravi"}, "is_accepted": false, "score": 1, "last_activity_date": 1568871063, "creation_date": 1568871063, "answer_id": 58004259, "question_id": 58004088, "link": "https://stackoverflow.com/questions/58004088/convert-array-to-a-string-with-newlines-embeded-in-string/58004259#58004259", "title": "Convert array to a string with newlines embeded in string", "body": "<p>Do this instead:</p>\n\n<pre><code>$content = $content . join(\"\\n\", @names);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1568871762, "post_id": 58004308, "comment_id": 102413594, "body": "There is a slight difference: If the array is empty, <code>join(&quot;&quot;, map &quot;$_\\n&quot;, @names)</code> produces <code>&quot;&quot;</code>, not <code>&quot;\\n&quot;</code>."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1568891068, "post_id": 58004308, "comment_id": 102423302, "body": "I usually just do e.g. <code>join(&quot;\\n&quot;, @array, &quot;&quot;)</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1611769634, "last_edit_date": 1611769634, "creation_date": 1568871313, "answer_id": 58004308, "question_id": 58004088, "link": "https://stackoverflow.com/questions/58004088/convert-array-to-a-string-with-newlines-embeded-in-string/58004308#58004308", "title": "Convert array to a string with newlines embeded in string", "body": "<p>Since it appears that you want a newline not just between each line, but after the last one too, you can use any of the following:</p>\n<pre class=\"lang-perl prettyprint-override\"><code>join(&quot;\\n&quot;, @names) . &quot;\\n&quot;\n</code></pre>\n<pre class=\"lang-perl prettyprint-override\"><code>join(&quot;&quot;, map &quot;$_\\n&quot;, @names)\n</code></pre>\n<pre class=\"lang-perl prettyprint-override\"><code>join(&quot;\\n&quot;, @names, &quot;&quot;)\n</code></pre>\n<p>These are equivalent except when the array in empty. In that situation, the first results in a newline, and the other result in an empty string.</p>\n<hr />\n<p>By the way,</p>\n<pre><code> $content = $content . EXPR;\n</code></pre>\n<p>can be written as</p>\n<pre><code> $content .= EXPR;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 1, "last_activity_date": 1611784090, "last_edit_date": 1611784090, "creation_date": 1611783660, "answer_id": 65927816, "question_id": 58004088, "link": "https://stackoverflow.com/questions/58004088/convert-array-to-a-string-with-newlines-embeded-in-string/65927816#65927816", "title": "Convert array to a string with newlines embeded in string", "body": "<p>The <code>$&quot;</code> variable holds the value that Perl uses between array elements when it interpolates an array in a double-quoted string. By default (and you haven't changed it), it's a space.</p>\n<p>Perhaps you were thinking about the input or output record separators, <code>$/</code> or <code>$\\</code>.</p>\n<p>But, you don't really want to play with those variables. If you want a newline, use a newline:</p>\n<pre><code>join &quot;\\n&quot;, @array;\n</code></pre>\n"}], "owner": {"reputation": 2387, "user_id": 30868, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/732ae7c85e255086f3c720fe34a00767?s=128&d=identicon&r=PG", "display_name": "ashishsony", "link": "https://stackoverflow.com/users/30868/ashishsony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 1, "accepted_answer_id": 58004308, "answer_count": 4, "score": 1, "last_activity_date": 1611784090, "creation_date": 1568869816, "last_edit_date": 1568870436, "question_id": 58004088, "link": "https://stackoverflow.com/questions/58004088/convert-array-to-a-string-with-newlines-embeded-in-string", "title": "Convert array to a string with newlines embeded in string", "body": "<p>i need to convert a perl array to a single string variable, containing all array items separated with newlines.</p>\n\n<pre><code>my $content = \"\";\n@names=('A','C','C','D','E');\n$content = $content . join($\", @names) . \"\\n\";\nprint $content;\n</code></pre>\n\n<p>I intend the output to be like:</p>\n\n<pre><code>A\nC\nC\nD\nE\n</code></pre>\n\n<p>But i get:</p>\n\n<pre><code>A C C D E\n</code></pre>\n\n<p>Why isn't the newline <code>\\n</code> character being honoured?</p>\n"}]